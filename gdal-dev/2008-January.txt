From woklist at kyngchaos.com  Tue Jan  1 11:25:06 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Jan  1 11:25:09 2008
Subject: [gdal-dev] gdal docs download out of sync
Message-ID: <2CB9C308-7FCD-40BA-A636-0701F8015C99@kyngchaos.com>

I realized that my doxygen install was incomplete (no latex, gs) so I  
figured I'd download the doc package instead wrestling with more  
dependencies.

It looks like the gdal150doc.zip is really for 1.4.4.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From warmerdam at pobox.com  Tue Jan  1 11:36:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  1 11:36:14 2008
Subject: [gdal-dev] Re: gdal docs download out of sync
In-Reply-To: <2CB9C308-7FCD-40BA-A636-0701F8015C99@kyngchaos.com>
References: <2CB9C308-7FCD-40BA-A636-0701F8015C99@kyngchaos.com>
Message-ID: <477A6C05.2030403@pobox.com>

William Kyngesburye wrote:
> I realized that my doxygen install was incomplete (no latex, gs) so I 
> figured I'd download the doc package instead wrestling with more 
> dependencies.
> 
> It looks like the gdal150doc.zip is really for 1.4.4.

William,

The gdal150 docs were captured before the final 1.5.0 updates were made
to the web site, but the actual API docs do reflect 1.5.0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Roger.Bivand at nhh.no  Tue Jan  1 15:04:15 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue Jan  1 15:04:19 2008
Subject: [gdal-dev] GDAL 1.5.0 questions
Message-ID: <Pine.LNX.4.64.0801012102140.10819@reclus.nhh.no>

Hi,

Two questions: first on the size of GDAL 1.5.0 binaries - on both Linux (RHEL4
i386) and Windows (MSYS/MinGW), the GDAL library libgdal.so.1.12.0 and
respectively libgdal-1.dll are four times larger than those built on the same
platforms with the same configure options (Linux 5019970 : 22203698; Windows
5279462 : 17919972). Have I missed a configure option or compile flag?

Second on MSYS/MinGW building GDAL - up to and including 1.4.4, my installation
of MSYS (1.0.10) just worked with ./configure, as suggested on:

http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW

But 1.5.0 does not build without editing libtool at line 6114 to sed out the
MSYS-anchored absolute path and replace it by a relative path (or possibly a
Windows drive-based absolute path. Once the lnkscript only has relative path
names, make runs to completion, and the resulting binaries, used with the R
bindings in the rgdal package, check through without error.

I'd welcome any suggestions for reducing the size of the libraries, and if
possible a fix to make path names in lnkscript relative (some are, but some are
not).

Thanks for all your hard work, and Happy New Year!

Best wishes,

Roger

PS. The Gmane feed is still pointing at gdal-dev@lists.maptools.org.

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From warmerdam at pobox.com  Tue Jan  1 15:21:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  1 15:21:30 2008
Subject: [gdal-dev] GDAL 1.5.0 questions
In-Reply-To: <Pine.LNX.4.64.0801012102140.10819@reclus.nhh.no>
References: <Pine.LNX.4.64.0801012102140.10819@reclus.nhh.no>
Message-ID: <477AA0D8.1080709@pobox.com>

Roger Bivand wrote:
> Hi,
> 
> Two questions: first on the size of GDAL 1.5.0 binaries - on both Linux 
> (RHEL4
> i386) and Windows (MSYS/MinGW), the GDAL library libgdal.so.1.12.0 and
> respectively libgdal-1.dll are four times larger than those built on the 
> same
> platforms with the same configure options (Linux 5019970 : 22203698; 
> Windows
> 5279462 : 17919972). Have I missed a configure option or compile flag?

Roger,

Optimization and debugging selection changed significantly in 1.5.0.  You
are likely getting build options "-O2 -g" instead of the old default of
"-O2", and so your library has debug info.  Try:

export CXXFLAGS=-O2
./configure ...

> PS. The Gmane feed is still pointing at gdal-dev@lists.maptools.org.

I'm afraid that is beyond my control.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From john.craddock at xitech.com.au  Tue Jan  1 15:31:05 2008
From: john.craddock at xitech.com.au (John L. Craddock)
Date: Tue Jan  1 15:31:08 2008
Subject: [gdal-dev] netCDF to GRIB 1
Message-ID: <1D4709F5DABD944E926E1F5C1AE5ABB807327D@server.office.xitech.com.au>

Hello all,
Been scanning the ether for windows code to convert ocean current files
in netCDF format to GRIB version 1. I know about GRADS and the lats4d
script. Thought I would ask here if anyone knows of a less circuitous
way of converting. I see GDAL reads netCDF. Is there a driver to output
GRIB?
Many thanks for your consideration.
Regards
John Craddock
mailto:John.Craddock@xitech.com.au
 
From mateusz at loskot.net  Tue Jan  1 15:35:03 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan  1 15:35:09 2008
Subject: [gdal-dev] GDAL 1.5.0 questions
In-Reply-To: <Pine.LNX.4.64.0801012102140.10819@reclus.nhh.no>
References: <Pine.LNX.4.64.0801012102140.10819@reclus.nhh.no>
Message-ID: <477AA3F7.7050408@loskot.net>

Roger Bivand wrote:
> Second on MSYS/MinGW building GDAL - up to and including 1.4.4, my 
> installation of MSYS (1.0.10) just worked with ./configure, as
> suggested on:
> 
> http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW
> 
> But 1.5.0 does not build without editing libtool at line 6114 to sed
> out the MSYS-anchored absolute path and replace it by a relative path
> (or possibly a Windows drive-based absolute path. Once the lnkscript
> only has relative path names, make runs to completion, and the
> resulting binaries, used with the R bindings in the rgdal package,
> check through without error.
> 
> I'd welcome any suggestions for reducing the size of the libraries,
> and if possible a fix to make path names in lnkscript relative (some
> are, but some are not).

Roger,

I'd add that MinGW users may need to deal with problems and should be
[1] prepared to apply fixes manually.

Also, if you know how to fix this issue, without breaking non-MinGW
configuration, I'd be thankful if you could submit [2] ticket and
attach patch.

[1] http://trac.osgeo.org/gdal/wiki/SupportedCompilers#UnsupportedCompilers

[2] http://trac.osgeo.org/gdal/wiki#BugTracking

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Tue Jan  1 15:38:06 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan  1 15:38:12 2008
Subject: [gdal-dev] netCDF to GRIB 1
In-Reply-To: <1D4709F5DABD944E926E1F5C1AE5ABB807327D@server.office.xitech.com.au>
References: <1D4709F5DABD944E926E1F5C1AE5ABB807327D@server.office.xitech.com.au>
Message-ID: <477AA4AE.5010908@loskot.net>

John L. Craddock wrote:
> Hello all,
> Been scanning the ether for windows code to convert ocean current files
> in netCDF format to GRIB version 1. I know about GRADS and the lats4d
> script. Thought I would ask here if anyone knows of a less circuitous
> way of converting. I see GDAL reads netCDF. Is there a driver to output
> GRIB?

John,

There is GRIB driver in the GDAL spike repository:

https://svn.osgeo.org/gdal/spike/grib/

You may try to checkout it and build into GDAL.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Tue Jan  1 15:42:52 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan  1 15:43:00 2008
Subject: [gdal-dev] netCDF to GRIB 1
In-Reply-To: <477AA4AE.5010908@loskot.net>
References: <1D4709F5DABD944E926E1F5C1AE5ABB807327D@server.office.xitech.com.au>
	<477AA4AE.5010908@loskot.net>
Message-ID: <477AA5CC.3020006@loskot.net>

Mateusz Loskot wrote:
> John L. Craddock wrote:
>> Hello all,
>> Been scanning the ether for windows code to convert ocean current files
>> in netCDF format to GRIB version 1. I know about GRADS and the lats4d
>> script. Thought I would ask here if anyone knows of a less circuitous
>> way of converting. I see GDAL reads netCDF. Is there a driver to output
>> GRIB?
> 
> John,
> 
> There is GRIB driver in the GDAL spike repository:
> 
> https://svn.osgeo.org/gdal/spike/grib/
> 
> You may try to checkout it and build into GDAL.

BTW, here you can find short instructions how to build GDAl with GRIB
support (the SVN URL given there is not active anymore, use the new one
above):

http://lists.osgeo.org/pipermail/gdal-dev/2007-February/011663.html

-- 
Mateusz Loskot
http://mateusz.loskot.net
From john.craddock at xitech.com.au  Tue Jan  1 17:12:55 2008
From: john.craddock at xitech.com.au (John L. Craddock)
Date: Tue Jan  1 17:12:59 2008
Subject: [gdal-dev] netCDF to GRIB 1
Message-ID: <1D4709F5DABD944E926E1F5C1AE5ABB807327E@server.office.xitech.com.au>

Many thanks for your help Mateusz, I will give it a try.
Regards
John C

> -----Original Message-----
> From: Mateusz Loskot [mailto:mateusz@loskot.net]
> Sent: 02 January 2008 06:43
> To: John L. Craddock
> Cc: gdal
> Subject: Re: [gdal-dev] netCDF to GRIB 1
> 
> 
> Mateusz Loskot wrote:
> > John L. Craddock wrote:
> >> Hello all,
> >> Been scanning the ether for windows code to convert ocean 
> current files
> >> in netCDF format to GRIB version 1. I know about GRADS and 
> the lats4d
> >> script. Thought I would ask here if anyone knows of a less 
> circuitous
> >> way of converting. I see GDAL reads netCDF. Is there a 
> driver to output
> >> GRIB?
> > 
> > John,
> > 
> > There is GRIB driver in the GDAL spike repository:
> > 
> > https://svn.osgeo.org/gdal/spike/grib/
> > 
> > You may try to checkout it and build into GDAL.
> 
> BTW, here you can find short instructions how to build GDAl with GRIB
> support (the SVN URL given there is not active anymore, use 
> the new one
> above):
> 
> http://lists.osgeo.org/pipermail/gdal-dev/2007-February/011663.html
> 
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> 
From Roger.Bivand at nhh.no  Tue Jan  1 17:15:58 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue Jan  1 17:16:00 2008
Subject: [gdal-dev] GDAL 1.5.0 questions
In-Reply-To: <477AA0D8.1080709@pobox.com>
References: <Pine.LNX.4.64.0801012102140.10819@reclus.nhh.no>
	<477AA0D8.1080709@pobox.com>
Message-ID: <Pine.LNX.4.64.0801012125440.10819@reclus.nhh.no>

On Tue, 1 Jan 2008, Frank Warmerdam wrote:

> Roger Bivand wrote:
>>  Hi,
>>
>>  Two questions: first on the size of GDAL 1.5.0 binaries - on both Linux
>>  (RHEL4
>>  i386) and Windows (MSYS/MinGW), the GDAL library libgdal.so.1.12.0 and
>>  respectively libgdal-1.dll are four times larger than those built on the
>>  same
>>  platforms with the same configure options (Linux 5019970 : 22203698;
>>  Windows
>>  5279462 : 17919972). Have I missed a configure option or compile flag?
>
> Roger,
>
> Optimization and debugging selection changed significantly in 1.5.0.  You
> are likely getting build options "-O2 -g" instead of the old default of
> "-O2", and so your library has debug info.  Try:
>
> export CXXFLAGS=-O2
> ./configure ...

Frank,

Thanks, I'd thought of this as you were replying, and am now down to Linux 
5948194, Windows 6277912 with:

export CXXFLAGS=-O2
export CFLAGS=-O2

on Linux, and (so far) editing GDALmake.opt on MSYS.

I'll see if I can find a workable way of supporting the MSYS file system 
root as Mateusz asked.

Best wishes,

Roger

>
>>  PS. The Gmane feed is still pointing at gdal-dev@lists.maptools.org.
>
> I'm afraid that is beyond my control.
>
> Best regards,
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From robert.coup at onetrackmind.co.nz  Tue Jan  1 17:56:29 2008
From: robert.coup at onetrackmind.co.nz (Robert Coup)
Date: Tue Jan  1 17:56:32 2008
Subject: [gdal-dev] Scripts to update from EPSG DB release?
Message-ID: <c5097ac40801011456l340d4c71u258f057efa3b6431@mail.gmail.com>

Hey folks,

I had a hunt around the source tree but couldn't find any scripts to update
the various .csv files in /data/ from a new EPSG release. Frank, you
committed the last update - any chance you could pass on the scripts/process
(or tell me where i should look)?

trunk should probably be updated to v6.14 (Sept 07) but it'd be nice to have
scripts available to allow backports or updates to new releases before they
get added to gdal.

Cheers,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080102/3d290b33/attachment.html
From woklist at kyngchaos.com  Tue Jan  1 22:29:40 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Jan  1 22:29:43 2008
Subject: [gdal-dev] Re: gdal docs download out of sync
In-Reply-To: <477A6C05.2030403@pobox.com>
References: <2CB9C308-7FCD-40BA-A636-0701F8015C99@kyngchaos.com>
	<477A6C05.2030403@pobox.com>
Message-ID: <5EA22201-B5ED-406B-BA68-A9E673AD187A@kyngchaos.com>

Is it just the index pages that are old?  I suppose I can easily  
substitute those from the 1.5.0 source.

On Jan 1, 2008, at 10:36 AM, Frank Warmerdam wrote:

> William Kyngesburye wrote:
>> I realized that my doxygen install was incomplete (no latex, gs) so  
>> I figured I'd download the doc package instead wrestling with more  
>> dependencies.
>> It looks like the gdal150doc.zip is really for 1.4.4.
>
> William,
>
> The gdal150 docs were captured before the final 1.5.0 updates were  
> made
> to the web site, but the actual API docs do reflect 1.5.0.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From Roger.Bivand at nhh.no  Wed Jan  2 06:23:17 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Jan  2 06:23:23 2008
Subject: [gdal-dev] GDAL 1.5.0 questions
In-Reply-To: <477AA3F7.7050408@loskot.net>
References: <Pine.LNX.4.64.0801012102140.10819@reclus.nhh.no>
	<477AA3F7.7050408@loskot.net>
Message-ID: <Pine.LNX.4.64.0801021206150.13418@reclus.nhh.no>

On Tue, 1 Jan 2008, Mateusz Loskot wrote:

> Roger Bivand wrote:
>> Second on MSYS/MinGW building GDAL - up to and including 1.4.4, my
>> installation of MSYS (1.0.10) just worked with ./configure, as
>> suggested on:
>>
>> http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW
>>
>> But 1.5.0 does not build without editing libtool at line 6114 to sed
>> out the MSYS-anchored absolute path and replace it by a relative path
>> (or possibly a Windows drive-based absolute path. Once the lnkscript
>> only has relative path names, make runs to completion, and the
>> resulting binaries, used with the R bindings in the rgdal package,
>> check through without error.
>>
>> I'd welcome any suggestions for reducing the size of the libraries,
>> and if possible a fix to make path names in lnkscript relative (some
>> are, but some are not).
>
> Roger,
>
> I'd add that MinGW users may need to deal with problems and should be
> [1] prepared to apply fixes manually.
>
> Also, if you know how to fix this issue, without breaking non-MinGW
> configuration, I'd be thankful if you could submit [2] ticket and
> attach patch.

I've opened ticket #2127 with suggested fix:

change line 5657 in ./ltmain.sh (or the correct line in the file it 
originates from) from:

$ECHO "$obj" >> $output

to

$ECHO "$obj" | ${SED} -e 's/.*gdal-[0-9].[0-9].[0-9]/\./' >> $output

(checked on MSYS and Linux RHEL4). Probably there is a better way of 
getting the build directory name - I am building in the source tree rather 
than outside. This is probably too small to be worth a patch, and in any 
case ltmain.sh claims to be the output of ltmain.m4sh.

The export CXXFLAGS=-O2 and export CFLAGS=-O2 route to avoiding large DLLs 
also works on MSYS.

Roger

>
> [1] http://trac.osgeo.org/gdal/wiki/SupportedCompilers#UnsupportedCompilers
>
> [2] http://trac.osgeo.org/gdal/wiki#BugTracking
>
> Cheers
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From bclay at ball.com  Wed Jan  2 11:18:21 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed Jan  2 11:18:27 2008
Subject: [gdal-dev] oci and sde drivers not registered
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFD3A@daytonmsg2k3.AERO.BALL.COM>

I am having problems getting to the OCI and SDE drivers loaded.

 

I initially pulled the FWTools.2.0.4 download then I downloaded the
precompiled OCI and SDE drivers from http://download.osgeo.org/gdal/.

When I execute ogrinfo -formats I see 26 drivers that were in the
initial configuration from FWTools.  I put the OCI and SDE dll's in the
FWTools.2.0.4/bin directory where the ogrinfo executable resides and I
added MSVCP71D.dll and MSVCR71D.dll because I received 2 errors while
running ogrinfo when it tried to load the ogr_SDE.dll.

 

Since I got the error while trying to load the load the SDE driver
before adding the dll's. I rashly assume that OGR recognizes the driver.

 

Is there some other step I need to take to get these last 2 drivers
registered?

 

Is there anything else I will have to do once ogrinfo sees the drivers
since I am using the C# wrapper in my code?

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080102/f32973d3/attachment.html
From Chris.Barker at noaa.gov  Wed Jan  2 11:52:22 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Jan  2 11:51:36 2008
Subject: [gdal-dev] GDAL 1.5.0 questions
In-Reply-To: <Pine.LNX.4.64.0801021206150.13418@reclus.nhh.no>
References: <Pine.LNX.4.64.0801012102140.10819@reclus.nhh.no>
	<477AA3F7.7050408@loskot.net>
	<Pine.LNX.4.64.0801021206150.13418@reclus.nhh.no>
Message-ID: <477BC146.9020707@noaa.gov>

Roger Bivand wrote:
> I've opened ticket #2127 with suggested fix:

Thanks Roger. For what it's worth, I'd really like to see MSYS + MingGW 
supported, so I hope you can work this out. As I am  useless to help, 
it's just a voice of encouragement, but being able to build with a easy 
to freely available compiler (particularly one that supports building 
Python extensions) is a real plus.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From craig.miller at spatialminds.com  Wed Jan  2 14:56:09 2008
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Jan  2 14:56:12 2008
Subject: [gdal-dev] Speeding file loading up
Message-ID: <8DDD8AC05A7E409095B6B6D9F3BCA00F@Carabiner>

Are there any tool/driver combos similar to geoquadtree for tiling up input
images (reducing I/O bottlenecks)?

Thanks for the suggestions,
Craig

From sy at perkins.net  Wed Jan  2 17:35:36 2008
From: sy at perkins.net (Simon Perkins)
Date: Wed Jan  2 17:35:42 2008
Subject: [gdal-dev] Testing if two spatial references are the same
In-Reply-To: <4776ACDE.6010909@pobox.com>
References: <4772B84F.4070601@perkins.net> <4772BB14.7080306@perkins.net>
	<4776ACDE.6010909@pobox.com>
Message-ID: <477C11B8.4090408@perkins.net>

Hi Frank,

The original TIFF file can be found here:

http://www.city.davis.ca.us/gis/data/aerial/2005/K10.tif

It's about 32MB in size.

Alternatively, listgeo displays the following information for the file:

Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                0                0               
         6625559.25       1975040.25       0               
      ModelPixelScaleTag (1,3):
         0.499999         0.499999         0               
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,12): "GeoTIFF 1.0"
      ProjectedCSTypeGeoKey (Short,1): PCS_NAD83_California_2
      PCSCitationGeoKey (Ascii,28): "California Zone II (NAD 83)"
      ProjLinearUnitsGeoKey (Short,1): Linear_Foot_US_Survey
      End_Of_Keys.
   End_Of_Geotiff.

PCS = 26942 (name unknown)
Projection = 10432 ()
GCS: 4269/NAD83
Datum: 6269/North American Datum 1983
Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9003/(unknown) (1.000000m)

Corner Coordinates:
Upper Left    ( 6625559.250, 1975040.248)
Lower Left    ( 6625559.250, 1974038.750)
Upper Right   ( 6628236.245, 1975040.248)
Lower Right   ( 6628236.245, 1974038.750)
Center        ( 6626897.747, 1974539.499)

See anything obviously wrong there?

Cheers,

Sy



Frank Warmerdam wrote:
> Simon Perkins wrote:
>> Hmm, looking at the projection string in more detail and comparing 
>> with the OGR source code, I see that it doesn't include a 
>> "PROJECTION" node, which OGR.IsSame() checks for.
>>
>> PROJCS["unnamed",
>>   GEOGCS["NAD83",
>>       DATUM["North_American_Datum_1983",
>>           SPHEROID["GRS 1980",6378137,298.2572221010002,
>>               AUTHORITY["EPSG","7019"]],
>>           AUTHORITY["EPSG","6269"]],
>>       PRIMEM["Greenwich",0],
>>       UNIT["degree",0.0174532925199433],
>>       AUTHORITY["EPSG","4269"]],
>>   UNIT["US survey foot",0.3048006096012192,
>>       AUTHORITY["EPSG","9003"]],
>>   AUTHORITY["EPSG","26942"]]
>>
>> So, is the TIFF file this came from missing some information? It was 
>> just a file I found on the web... It does have an EPSG code, so 
>> should IsSame() be checking for that?
>
> Simon,
>
> There is something seriously messed up abut this coordinate system.
> Normally EPSG:26942 would look like:
>
> PROJCS["NAD83 / California zone 2",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.257222101,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.01745329251994328,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4269"]],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>     PARAMETER["standard_parallel_1",39.83333333333334],
>     PARAMETER["standard_parallel_2",38.33333333333334],
>     PARAMETER["latitude_of_origin",37.66666666666666],
>     PARAMETER["central_meridian",-122],
>     PARAMETER["false_easting",2000000],
>     PARAMETER["false_northing",500000],
>     AUTHORITY["EPSG","26942"]]
>
> The behavior of the IsSame() method is questionable in
> this situation, but in any event the spatial reference is
> improperly formed.  I'd be interested in tracking down how
> this corrupt coordinate system is being produced if you can
> file an appropriate bug report.
>
> Best regards
>

From bclay at ball.com  Wed Jan  2 17:53:33 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed Jan  2 17:53:36 2008
Subject: [gdal-dev] GDAL/OGR 1.5.0 build errors
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFD3E@daytonmsg2k3.AERO.BALL.COM>

I am running into problems rebuilding some of the OGR libraries.  It
looks like a couple of the source trees have not migrated from the OGR
sub-tree into the main trunk.  In particular gml and pg and a file
(ogr\ogrsf_frmts\ogrsf_frmts.h).  After I copied the gml, oci and pg
directories over to the main trunk I had to change the GDAL_ROOT from
..\..\.. to ..\..

 

Since PostgreSql is by default installed in c:\Program Files I had to
add quotes in the nmake.opt file for:

PG_INC_DIR = "C:\Program Files\PostgreSQL\8.2\include"

PG_LIB = "C:\Program Files\PostgreSQL\8.2\lib\libpq.lib" wsock32.lib -
note libpqdll.lib changed to libpq.lib in current version of PostGis

 

Also OCI is not included in the frmts/makefile.vc

 

After a few minor adjustments and file rearrangements I got both SDE and
OCI built in and loading in my c# app.

 

One thing I noticed is that the OGR plugin source code is in 2 places in
the source tree.  I don't know if that is intentional or not.

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080102/0e09b47a/attachment.html
From mateusz at loskot.net  Wed Jan  2 18:12:45 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jan  2 18:12:51 2008
Subject: [gdal-dev] GDAL/OGR 1.5.0 build errors
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFD3E@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFD3E@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <477C1A6D.5000306@loskot.net>

Clay, Bruce wrote:
> I am running into problems rebuilding some of the OGR libraries.  It
> looks like a couple of the source trees have not migrated from the OGR
> sub-tree into the main trunk.

Bruce,

I'm not sure I understand what does "migrated" mean and what OGR subtree
was supposed to migrate to the trunk. Could you clarify?

> In particular gml and pg and a file
> (ogr\ogrsf_frmts\ogrsf_frmts.h).  After I copied the gml, oci and pg
> directories over to the main trunk I had to change the GDAL_ROOT from
> ..\..\.. to ..\..

AFAIK, GDAL_ROOT is not set or used currently.
It's always empty.

> Since PostgreSql is by default installed in c:\Program Files I had to
> add quotes in the nmake.opt file for:
> 
> PG_INC_DIR = "C:\Program Files\PostgreSQL\8.2\include"
> 
> PG_LIB = "C:\Program Files\PostgreSQL\8.2\lib\libpq.lib" wsock32.lib -
> note libpqdll.lib changed to libpq.lib in current version of PostGis

Please, note that you should not expect most the paths in nmake.opt
will be correct in your environment. These are just examples and
placeholders for your own paths and flags.
You are supposed to update it according your environment.

You needed to add quotes because your (or default) path consist of
space(s) but example given in nmake.opt
http://trac.osgeo.org/gdal/browser/trunk/gdal/nmake.opt#L224
does not include spaces, so no quotes have been applied.

> Also OCI is not included in the frmts/makefile.vc

OCI is an OGR driver but not GDAL driver, so does not belong to
gdal/frmts subtree, but to gdal/ogr/ogrsf_frmts.

> One thing I noticed is that the OGR plugin source code is in 2 places in
> the source tree.  I don't know if that is intentional or not.

Could you specify what code you mean?
For convenience, You can use URLs from Trac browser of GDAL sources at
http://trac.osgeo.org/gdal/browser/trunk/gdal

Summarizing, I don't see any bugs nor errors here.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From rsoconnor at gmail.com  Wed Jan  2 21:38:44 2008
From: rsoconnor at gmail.com (Rory O'Connor)
Date: Wed Jan  2 21:39:23 2008
Subject: [gdal-dev] Geotiffs and setstatistics
Message-ID: <AEB5C176-B40F-438F-BE2A-A0E3C57E48F0@gmail.com>

Hello,
Does the tiff driver support the SetStatistics function? I work with  
~4GB tiff files and it takes a significant time to call  
ComputeStatistics. The statistics are seemingly not cached in the meta  
data or the Xml file even if the file is opened as a PAM dataset.

Also, the bApproxOK option in computestatistics does not seem to obey  
the NoDataValue. I also get different results for the statistics if I  
just made the overviews or already had them.

Regards,
Rory 
From woklist at kyngchaos.com  Wed Jan  2 23:19:20 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Jan  2 23:19:24 2008
Subject: [gdal-dev] Re: gdal docs download out of sync
In-Reply-To: <5EA22201-B5ED-406B-BA68-A9E673AD187A@kyngchaos.com>
References: <2CB9C308-7FCD-40BA-A636-0701F8015C99@kyngchaos.com>
	<477A6C05.2030403@pobox.com>
	<5EA22201-B5ED-406B-BA68-A9E673AD187A@kyngchaos.com>
Message-ID: <9969891B-B14A-4BAC-89E2-C4FE84CB0878@kyngchaos.com>

Hm, maybe my brain is having trouble starting the new year - it took  
me a while to think of looking at the source.  The 1.5.0 source also  
has the old 1.4.4 index page.  Looks like SVN has the current index  
source.

On Jan 1, 2008, at 9:29 PM, William Kyngesburye wrote:

> Is it just the index pages that are old?  I suppose I can easily  
> substitute those from the 1.5.0 source.
>
> On Jan 1, 2008, at 10:36 AM, Frank Warmerdam wrote:
>
>> William Kyngesburye wrote:
>>> I realized that my doxygen install was incomplete (no latex, gs)  
>>> so I figured I'd download the doc package instead wrestling with  
>>> more dependencies.
>>> It looks like the gdal150doc.zip is really for 1.4.4.
>>
>> William,
>>
>> The gdal150 docs were captured before the final 1.5.0 updates were  
>> made
>> to the web site, but the actual API docs do reflect 1.5.0.
>>
>> Best regards,
>>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From rsoconnor at gmail.com  Thu Jan  3 02:50:17 2008
From: rsoconnor at gmail.com (Rory O'Connor)
Date: Thu Jan  3 02:50:22 2008
Subject: [gdal-dev] GeoTIFFs and GetStatistics
Message-ID: <f549a78e0801022350y350bc70by531986394852842c@mail.gmail.com>

Hello,

Does the TIFF driver support the SetStatistics function? I work with
~4GB TIFF files and it takes a significant amount of time to call
ComputeStatistics. Everytime I open a file or create one it takes about 10
minutes to calculate the statistics, which would be OK if it was a one time
only thing. The statistics are seemingly not cached in the meta
data or the Xml file even if the file was opened as a PAM dataset. Also it
didn't make a difference if the dataset was opened with read-only or update
permissions.

Here is a snippet of my code:

    int bForce = FALSE;
    int approxOK = TRUE;
    CPLErr err = poBand->GetStatistics (approxOK, bForce, minValue,
maxValue, pMean, pStdDev);

    if ( err != CE_None )
    {
        // Stats not cached, recompute them
        // BPS - using ApproxOK does not seem to obey the NoDataValue (mean
shifted toward 0)
        // also behaves differently if we just made overviews or already had
them
        // But it's soooooo much faster than recalcing full stats on a big
file
        poBand->ComputeStatistics (FALSE, minValue, maxValue, pMean,
pStdDev, NULL, NULL);
        poBand->SetStatistics (*minValue, *maxValue, *pMean, *pStdDev);
    }

BTW, thanks for the great product. Overall it has been a joy to use so far.

Regards,
Rory
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080102/575539f9/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Thu Jan  3 03:02:33 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Jan  3 03:02:50 2008
Subject: [gdal-dev] Re: News.gmane.org seems to have old return address
References: <CC197224AC75CE4DB23F739B16891B866E7565@tikka.haapa.mmm.fi>
	<475D45B7.60503@pobox.com>
Message-ID: <loom.20080103T075945-223@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> 
> Rahkonen Jukka wrote:
> > Hi,
> >  
> > I tried to send a followup through 
> > http://news.gmane.org/gmane.comp.gis.gdal.devel but it seems to send the 
> > mail to lists.maptools.org and it fails.
> 
> Jukka,
> 
> Frankly, this is why I'm not keen on these services.  Someone will set it up
> but no one is keeping it up to date with changes.  I don't know how.  If you
> can figure out how, more power to you!
> 
> Best regards,

Hi,

I asked gmane people to correct the return address and Mr. Lars Magne
Ingebrigtsen informed me that it is OK now.  It is affirmed if this mail goes
through.

-Jukka Rahkonen-


From yann.chemin at gmail.com  Thu Jan  3 03:08:04 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Thu Jan  3 03:08:06 2008
Subject: [gdal-dev] using GDAL to make a multi band image from several
	one-band images
Message-ID: <4f37eb890801030008q4f37a53coc7dc1b475f8c9750@mail.gmail.com>

Hello,

I would like to use GDAL (in Python) for doing something like this.

------------------------------------------------------
src1 = LoadfFile('file1.extension')
src1 = AddBlankLayers(45) # Increase the number of bands of the image
src1[0] = LoadFile('file1.extension')
src1[2] = LoadFile('file1.extension')
.....
src1[44] = LoadFile('file45.extension')
src1[45] = LoadFile('file46.extension')
SaveArrayWithGeo(src1,....,'HFA') #Finally, save the multiband image
------------------------------------------------------

The idea is to create a new file from an already existing one-band
file, only thing is to have it multi-band.

Maybe It is not the best way to start doing it...

Could anybody help please?
thanks
Yann
From schut at sarvision.nl  Thu Jan  3 04:16:32 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Jan  3 04:16:35 2008
Subject: [gdal-dev] using GDAL to make a multi band image from several
	one-band images
In-Reply-To: <4f37eb890801030008q4f37a53coc7dc1b475f8c9750@mail.gmail.com>
References: <4f37eb890801030008q4f37a53coc7dc1b475f8c9750@mail.gmail.com>
Message-ID: <477CA7F0.4000509@sarvision.nl>

Yann Chemin wrote:
> Hello,
> 
> I would like to use GDAL (in Python) for doing something like this.
...snip...
> The idea is to create a new file from an already existing one-band
> file, only thing is to have it multi-band.
> 
> Maybe It is not the best way to start doing it...

Hello Yann,

no need to use gdal/python for this, you can do this with the
gdal_merge.py tool that comes with gdal. Use the -separate option, and
it will merge your single-band input files into a multiband output file.
See http://gdal.org/gdal_merge.html for more info.

Regards,
Vincent.
> 
> Could anybody help please?
> thanks
> Yann
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From jbeiko at pyxisinnovation.com  Thu Jan  3 14:31:33 2008
From: jbeiko at pyxisinnovation.com (Jeff Beiko)
Date: Thu Jan  3 14:31:38 2008
Subject: [gdal-dev] GeoTiff and CreateCopy(...)
Message-ID: <8B5901C2B9E9094AA4028CF5E33980D72E2A57@aristotle.PyxisInnovation.local>

HI,

 

I built GDAL from source. When I call CreateCopy(...) with the GTiff
driver, it creates an image that is properly sized and geo-referenced,
however, the image is all black. 

 

I tried the same operation using the DLLs and include files from
FWTools, and it works properly and my image is coloured properly. I
noticed in FWTools that the geotiff and libtiff files are present. Do I
need to compile GDAL with external geotiff and libtiff support for the
CreateCopy() to work properly?

 

Thanks,

~Jeff

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080103/e4cd7553/attachment.html
From warmerdam at pobox.com  Thu Jan  3 16:30:35 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  3 16:31:14 2008
Subject: [gdal-dev] GeoTiff and CreateCopy(...)
In-Reply-To: <8B5901C2B9E9094AA4028CF5E33980D72E2A57@aristotle.PyxisInnovation.local>
References: <8B5901C2B9E9094AA4028CF5E33980D72E2A57@aristotle.PyxisInnovation.local>
Message-ID: <477D53FB.80601@pobox.com>

Jeff Beiko wrote:
> HI,
> 
>  
> 
> I built GDAL from source. When I call CreateCopy(?) with the GTiff 
> driver, it creates an image that is properly sized and geo-referenced, 
> however, the image is all black.
> 
> I tried the same operation using the DLLs and include files from 
> FWTools, and it works properly and my image is coloured properly. I 
> noticed in FWTools that the geotiff and libtiff files are present. Do I 
> need to compile GDAL with external geotiff and libtiff support for the 
> CreateCopy() to work properly?

Jeff,

No, you should not need to use an external libtiff.  The internal version
should be sufficient.  You might want to try duplicating the issue with
the "official" GDAL Win32 builds at:

   http://download.osgeo.org/gdal/win32/1.5/

If the problem occurs with that, you can file a detailed bug report,
including a tiffinfo and gdalinfo report on the source file.  If the
problem doesn't happen with the official build, then I suspect some details
of your build process are impacting things.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bfraser at geoanalytic.com  Thu Jan  3 17:08:05 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Jan  3 17:08:41 2008
Subject: [gdal-dev] change in ECW license agreement
References: <475EC609.6050105@gov.yk.ca>
Message-ID: <037301c84e55$1dd95c30$140002c0@shark>

Interesting problem.

The "old" GNU license says "This Agreement may only be
modified in writing signed by authorized representatives of
ERM.", but are we bound by those new license changes if we
use only the "old" source?

I say No, but I'm not a lawyer.  If the answer is Yes, then
I think the open source community needs to protect itself by
ensuring licenses for donated source code are granted in
perpetuity.

And both the old and new licenses are vague about the rights
of end-users who are using open-source apps to create ecw
files for sale.  Because I profit from the sale of data in
ecw format (but not from the sale of programs), do I need a
commercial ecw library license?  Maybe.

Perhaps we need a Google summer(s?)-of-code project to
produce a high performance FOSS JPEG 2000 library...

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Matt Wilkie" <matt.wilkie@gov.yk.ca>
To: <gdal-dev@lists.osgeo.org>
Sent: Tuesday, December 11, 2007 10:16 AM
Subject: [gdal-dev] change in ECW license agreement


> Hello Folks,
>
> In recent discussion with a sales representative ER
Mapper, now owned by
> Leica Geosystems Geospatial Imaging, it came to light that
there is a
> new End User License Agreement in effect for the ECW/JP2
SDK, as of this
> week. (I'm trying to determine what license we need to buy
in order to
> use gdal_translate to create ecw larger than 500mb).
>
> The new EULA mentions open source projects specifically in
a couple of
> provisions.  I'm not going to go so far as to interpret
them, because
> I'll probably get it wrong! From my limited understanding
it does look
> like some things might need to be changed in how GDAL
packages and
> distributes the ECW driver, and that an organisation which
uses open
> source ecw-using tools to produce products it sells might
be considered
> commercial use(?).
>
> In any case, there are people here who the changes will
impact and would
> want to be aware of it. If the attached document does not
make it
> through, the EULA can be found at
> http://www.ermapper.com/Downloads.aspx?v=315 (after free
registration,
> the EULA will be shown before download begins).
>
> Best regards,
>
> -- 
> matt wilkie
> --------------------------------------------
> Geographic Information,
> Information Management and Technology,
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
>
>


------------------------------------------------------------
--------------------


> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From sfkeller at gmail.com  Thu Jan  3 18:41:47 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu Jan  3 18:41:49 2008
Subject: [gdal-dev] ogr2ogr ignores LINEFORMAT=LF?
Message-ID: <25bc040b0801031541r13cf28e6v5fe7d3318a730d50@mail.gmail.com>

 (Sorry for double postings, I'm getting 550 5.1.1 User unknown errors),

Dear all

This works but it ignores LINEFORMAT=LF: The resulting file always contains
LF. What am I doing wrong?

$ ogr2ogr -f CSV out MyShape.shp -sql "select *,OGR_GOM_WKT from MyShape"
-dsco LINEFORMAT=LF

(I'm using Windows XP with GDAL 1.5.0b1, FWTools 2.0.2, released 2007/12/05)

-- Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/37e844a0/attachment.html
From sfkeller at gmail.com  Thu Jan  3 19:08:01 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu Jan  3 19:08:04 2008
Subject: [gdal-dev] Re: [FWTools] Re: Style usage?
In-Reply-To: <4774FF24.80308@mapgears.com>
References: <25bc040b0712271531o15b63506md72090796f1a7efd@mail.gmail.com>
	<4774FF24.80308@mapgears.com>
Message-ID: <25bc040b0801031608y37d0e42cmad3b1a3b84315a22@mail.gmail.com>

Thank you for the explanations. Three supplements:

1. Being able to add user defined styles to KML would be cool, e.g. through
the means suggested in the RFC 18 but also through Virtual Format (VRT)?

2. I stumbled over the STYLEITEM "AUTO" in the UMN MapServer docu:
http://mapserver.gis.umn.edu/docs/howto/ogr_howto/#styleitem-auto-rendering-layers-using-style-information-from-the-ogr-file

This enables that color and style is coming from individual shape objects
(currently MapInfo TAB and DGN only) as opposite to the usual case where
style is defined at the layer level. Idea: I think that if OGR can
pass-through styles on an object basis it's technically not too difficult to
set styles at the layer level (as suggested before).

3. Are there any current applications of OGR styles (for an end user)
besides for MapServer as described above and through the (programmer's) C
API?

-- Stefan

2007/12/28, Daniel Morissette <dmorissette@mapgears.com>:
>
> Stefan Keller wrote:
> >
> > 1. Is there also a concept and a way to change style output in an
> > ogr2ogr call, e.g. for KML?
> >
>
> I don't think ogr2ogr supports "changing" the style assigned to a given
> feature or assigning new styles to features, but when translating
> between formats that support styles ( e.g. TAB, MIF and DGN) then the
> styles are maintained as much as possible.
>
> With respect to KML, last time I checked I don't think the KML driver
> supported styles, so the answer is no, at the moment it is not possible
> to control the style of the features written to KML output (but
> technically that's feasible and could be implemented someday).
>
> > 2. Regarding the style concept perhaps it would be helpful to mention
> > similarities to SLD and eventually also to Mapfile symbols (if there are
> > any)?
> >
>
> The concept of assigning rendering rules to geometries is shared in both
> cases but that's about it. The terminology (pen/brush/etc vs
> symbolizers) and encoding (compact text strings vs verbose XML) are
> completely different.
>
> SLD also supports building up classifications using filter encoding
> which is not part of the OGR style concept.
>
> Why did OGR invent its own encoding instead of reusing SLD? Mostly
> because the OGR style encoding predates the days when SLD became well
> known (to me anyway) and widely used. But even if we were to do this
> again today I'm not sure if we would opt for a verbose XML encoding...
> we'd probably spend a lot of time debating the performance issues vs the
> benefits of interoperability with SLD.
>
> BTW, this question would really belong on the gdal-dev list, so I have
> cross-posted my reply to gdal-dev (and ask that further replies be sent
> only to gdal-dev).
>
> Daniel
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> FWTools mailing list
> FWTools@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/fwtools
> http://fwtools.maptools.org/
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/7d44e155/attachment.html
From warmerdam at pobox.com  Thu Jan  3 22:04:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan  3 22:04:46 2008
Subject: [gdal-dev] ogr2ogr ignores LINEFORMAT=LF?
In-Reply-To: <25bc040b0801031541r13cf28e6v5fe7d3318a730d50@mail.gmail.com>
References: <25bc040b0801031541r13cf28e6v5fe7d3318a730d50@mail.gmail.com>
Message-ID: <477DA235.8000909@pobox.com>

Stefan Keller wrote:
> (Sorry for double postings, I'm getting 550 5.1.1 User unknown errors),
>  
> Dear all
> 
> This works but it ignores LINEFORMAT=LF: The resulting file always 
> contains LF. What am I doing wrong?
> 
> $ ogr2ogr -f CSV out MyShape.shp -sql "select *,OGR_GOM_WKT from 
> MyShape" -dsco LINEFORMAT=LF
> 
> (I'm using Windows XP with GDAL 1.5.0b1, FWTools 2.0.2, released 2007/12/05)

Stefan,

You wrote that ogr2ogr ignores LINEFORMAT=LF and always products files
with line feeds.  Perhaps you mean that it always produces CRLF?

Looking in the code I see LINEFORMAT is a layer creation option, not a
datasource creation option.  So it should be specified with -lco instead
of -dsco.  Perhaps that is the root of your problem?  I have made an effort
to clarify this in the documentation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From tim.bowden at westnet.com.au  Fri Jan  4 01:34:16 2008
From: tim.bowden at westnet.com.au (Tim Bowden)
Date: Fri Jan  4 01:34:19 2008
Subject: [gdal-dev] change in ECW license agreement
In-Reply-To: <037301c84e55$1dd95c30$140002c0@shark>
References: <475EC609.6050105@gov.yk.ca> <037301c84e55$1dd95c30$140002c0@shark>
Message-ID: <1199428456.5906.25.camel@edoras>


On Thu, 2008-01-03 at 15:08 -0700, Brent Fraser wrote:
> Interesting problem.
> 
> The "old" GNU license says "This Agreement may only be
> modified in writing signed by authorized representatives of
> ERM.", but are we bound by those new license changes if we
> use only the "old" source?

I'm not trained in the art of law, but my limited understanding is
unless the old license agreement makes provision for being superseded by
a more recently published one (which from memory it doesn't) then so
long as you are using the source obtained under that original license it
still holds.

> 
> I say No, but I'm not a lawyer.  If the answer is Yes, then
> I think the open source community needs to protect itself by
> ensuring licenses for donated source code are granted in
> perpetuity.
> 
> And both the old and new licenses are vague about the rights
> of end-users who are using open-source apps to create ecw
> files for sale.  Because I profit from the sale of data in
> ecw format (but not from the sale of programs), do I need a
> commercial ecw library license?  Maybe.

I tried parsing the old ecw license some time ago for a project I was on
(commercial implementation of open source) and the response of ERM was
that they were aware of the difficulties in parsing the license (as far
as I was concerned it was vague & internally contradictory).  The
problem they had was that there were some third party patents they were
relying on, so could not use an OSI license (good to see the software
patent system is helping innovation again!), and that if the ecw lib was
being used to make money, they wanted their cut.  As far as I'm
concerned, it's not even close to being free software, even if it does
have source available for review.

> 
> Perhaps we need a Google summer(s?)-of-code project to
> produce a high performance FOSS JPEG 2000 library...
> 

libjasper for jpeg2000? What about ecw?  There's lots of data in that
format already existing that needs to be got at. I'm no expert on these
things, but wouldn't development of a free lib take a "clean room"
implementation to avoid using the "methods and concepts" (gee, thanks
SCO!) from existing patents used in the current non-free lib?  Has the
ecw format been published (apart from reading the existing source code),
or would that need to be "reverse engineered" as well?

> Brent Fraser
> GeoAnalytic Inc.
> Calgary, Alberta

Tim Bowden

From dany.geotools at gmail.com  Fri Jan  4 07:49:54 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Jan  4 07:49:57 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory on big
	sizes.
Message-ID: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>

Hi list,
I'm trying to build a very big In Memory Raster Dataset (~1 GB) using SWIG's
Java Bindings on my Notebook (with Windows Vista, with 2GB ram)

When calling the java method memoryDriver.create(...) the following error
appears "ERROR 2: Unable to create band arrays ... out of memory" which is
thrown when the underlying calloc method can't successfully allocate memory.

I have performed some tests and tunings with the following conclusions:
- reducing the JVM Heap Size (using -Xmx command) allows to allocate a
bigger native memory portion (using -Xmx1024M allows me to allocate only
<550 MB memory while using -Xmx16M allows me to allocate up to ~820MB) [Java
Heap space and "Native" Heap space are managed separately]
- increasing the virtual memory, the result is the same (out of memory).
- killing all unuseful processes -> freeing more physical memory (~1.2 GB),
the result is the same (out of memory))
Any setting allows me to allocate a max of ~840000 KBytes.

Anyway, why having almost 1.2 GB free physical memory and a 3GB virtual
memory setting (with ~2GB free) allows me only to create always ~840000
KBytes?
Does anyone know how memory is managed, how the calloc method operates and
whether an OS limitation exist?
Thank you very much.

Best Regards,
Daniele R.

PS: anyway, I will try avoid In Memory Raster use in case of very Big
datasets.

-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/047b65e3/attachment.html
From dany.geotools at gmail.com  Fri Jan  4 07:59:39 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Jan  4 07:59:41 2008
Subject: [gdal-dev] Question about create/createCopy drivers support
Message-ID: <7221db410801040459g41c66612h7af20fb9ce8df661@mail.gmail.com>

Hi list,
I have a very trivial question for you. (please dont kill me :-P)
Why some drivers only support createCopy method?
I talk about, as an instance, the JP2KAK driver. Why it does not provide the
create method?

Best Regards,
Daniele


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/8c085979/attachment.html
From warmerdam at pobox.com  Fri Jan  4 11:00:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  4 11:00:47 2008
Subject: [gdal-dev] Question about create/createCopy drivers support
In-Reply-To: <7221db410801040459g41c66612h7af20fb9ce8df661@mail.gmail.com>
References: <7221db410801040459g41c66612h7af20fb9ce8df661@mail.gmail.com>
Message-ID: <477E5811.7020300@pobox.com>

Daniele Romagnoli wrote:
> Hi list,
> I have a very trivial question for you. (please dont kill me :-P)
> Why some drivers only support createCopy method?
> I talk about, as an instance, the JP2KAK driver. Why it does not provide 
> the create method?

Daniele,

In order to support Create() a driver must support randomly ordered writing,
including situations like writing the imagery and then the projection, writing
some areas of imagery multiple times.  Writing bottom to top. etc.

For some formats this is not much of a problem.  For other formats this is
essentially impossible without collecting everything in some sort of temporary
file and writing it all out to the real file on close.

In the case of JPEG2000 data files, they must essentially be written top to
bottom in one pass, and once the georeferencing box has been written it is
hard to update it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Jan  4 11:09:19 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  4 11:09:59 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory on
	big sizes.
In-Reply-To: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>
References: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>
Message-ID: <477E5A2F.4070005@pobox.com>

Daniele Romagnoli wrote:
> Hi list,
> I'm trying to build a very big In Memory Raster Dataset (~1 GB) using 
> SWIG's Java Bindings on my Notebook (with Windows Vista, with 2GB ram)
> 
> When calling the java method memoryDriver.create(...) the following 
> error appears "ERROR 2: Unable to create band arrays ... out of memory" 
> which is thrown when the underlying calloc method can't successfully 
> allocate memory.
> I have performed some tests and tunings with the following conclusions:
> - reducing the JVM Heap Size (using -Xmx command) allows to allocate a 
> bigger native memory portion (using -Xmx1024M allows me to allocate only 
> <550 MB memory while using -Xmx16M allows me to allocate up to ~820MB) 
> [Java Heap space and "Native" Heap space are managed separately]
> - increasing the virtual memory, the result is the same (out of memory).
> - killing all unuseful processes -> freeing more physical memory (~1.2 
> GB), the result is the same (out of memory))
> Any setting allows me to allocate a max of ~840000 KBytes.
> 
> Anyway, why having almost 1.2 GB free physical memory and a 3GB virtual 
> memory setting (with ~2GB free) allows me only to create always ~840000 
> KBytes?
> Does anyone know how memory is managed, how the calloc method operates 
> and whether an OS limitation exist?
> Thank you very much.

Daniele,

I have no reason to believe this is a GDAL specific problem.  I presume you
are running 32bit Windows Vista?  If so, I believe any one process can have
at most 2GB of heap space which in your case would presumably be split
between the JVM and non Java memory in the same process.

I think you could allocate larger in memory rasters if you were running Win64
which has a very large potential virtual memory size per process.

PS. I started out this reply to tell you to check the ulimit command output
which reports per-process memory limits on linux before I realized you were
using windows.  I don't know if there is any equivelent thing on windows.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dany.geotools at gmail.com  Fri Jan  4 11:27:52 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Jan  4 11:27:58 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory on big
	sizes.
In-Reply-To: <477E5A2F.4070005@pobox.com>
References: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>
	<477E5A2F.4070005@pobox.com>
Message-ID: <7221db410801040827j705c5472rcb3b16b6260e3077@mail.gmail.com>

Frank,
thanks for your reply.


> I have no reason to believe this is a GDAL specific problem.  I presume
> you
> are running 32bit Windows Vista?


Yes, I'm running 32bit Windows Vista. I guess this is not a GDAL problem. I
have raised these questions just to know if someone had already faced such a
problem.
Thanks.

Regards,
Daniele Romagnoli

>
>


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/608c3502/attachment.html
From mchapman at texelinc.com  Fri Jan  4 11:32:43 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Fri Jan  4 11:35:41 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory onbig
	sizes.
In-Reply-To: <477E5A2F.4070005@pobox.com>
References: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com><477E5A2F.4070005@pobox.com>
Message-ID: <1469919195-1199464534-cardhu_decombobulator_blackberry.rim.net-25544157-@bxe022.bisx.prod.on.blackberry>

Daniele,

Are you using gdal api through jni or are you calling one of gdals exe programs?  Java limits the total memory for in-process dll's to whatever the xmx is set to minus whatever the jre needs.  I have dealt with this using java before.  You can either increase the xmx setting or call gdal from outside the java runtime, like a c++ exe.  In any case, you will always be limited to the amount of memory on your machine.  
P.S.  A good driver will use memory mapped file io (file channels in java NIO) for reading and writing which gives you a max file size of 1.8 Exobytes on windows and will consume minimal memory during execution...like a couple of MB. Unfortunately, most drivers don't use file channels. :)

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: Frank Warmerdam <warmerdam@pobox.com>

Date: Fri, 04 Jan 2008 11:09:19 
To:Daniele Romagnoli <dany.geotools@gmail.com>
Cc:gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] In Memory Raster - allocation run out of memory on
	big sizes.


Daniele Romagnoli wrote:
> Hi list,
> I'm trying to build a very big In Memory Raster Dataset (~1 GB) using 
> SWIG's Java Bindings on my Notebook (with Windows Vista, with 2GB ram)
> 
> When calling the java method memoryDriver.create(...) the following 
> error appears "ERROR 2: Unable to create band arrays ... out of memory" 
> which is thrown when the underlying calloc method can't successfully 
> allocate memory.
> I have performed some tests and tunings with the following conclusions:
> - reducing the JVM Heap Size (using -Xmx command) allows to allocate a 
> bigger native memory portion (using -Xmx1024M allows me to allocate only 
> <550 MB memory while using -Xmx16M allows me to allocate up to ~820MB) 
> [Java Heap space and "Native" Heap space are managed separately]
> - increasing the virtual memory, the result is the same (out of memory).
> - killing all unuseful processes -> freeing more physical memory (~1.2 
> GB), the result is the same (out of memory))
> Any setting allows me to allocate a max of ~840000 KBytes.
> 
> Anyway, why having almost 1.2 GB free physical memory and a 3GB virtual 
> memory setting (with ~2GB free) allows me only to create always ~840000 
> KBytes?
> Does anyone know how memory is managed, how the calloc method operates 
> and whether an OS limitation exist?
> Thank you very much.

Daniele,

I have no reason to believe this is a GDAL specific problem.  I presume you
are running 32bit Windows Vista?  If so, I believe any one process can have
at most 2GB of heap space which in your case would presumably be split
between the JVM and non Java memory in the same process.

I think you could allocate larger in memory rasters if you were running Win64
which has a very large potential virtual memory size per process.

PS. I started out this reply to tell you to check the ulimit command output
which reports per-process memory limits on linux before I realized you were
using windows.  I don't know if there is any equivelent thing on windows.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dany.geotools at gmail.com  Fri Jan  4 12:05:35 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Jan  4 12:05:38 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory onbig
	sizes.
In-Reply-To: <1469919195-1199464534-cardhu_decombobulator_blackberry.rim.net-25544157-@bxe022.bisx.prod.on.blackberry>
References: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>
	<477E5A2F.4070005@pobox.com>
	<1469919195-1199464534-cardhu_decombobulator_blackberry.rim.net-25544157-@bxe022.bisx.prod.on.blackberry>
Message-ID: <7221db410801040905j3356ae1dt81896cf744f50394@mail.gmail.com>

Hi Martin,
I'm using GDAL through JNI (by means of the SWIG's generated java bindings).
However, I guess that increasing the xmx, "steals" memory which could be
used by native items.

Regards,
Daniele.

On Jan 4, 2008 5:32 PM, <mchapman@texelinc.com> wrote:

> Daniele,
>
> Are you using gdal api through jni or are you calling one of gdals exe
> programs?  Java limits the total memory for in-process dll's to whatever the
> xmx is set to minus whatever the jre needs.  I have dealt with this using
> java before.  You can either increase the xmx setting or call gdal from
> outside the java runtime, like a c++ exe.  In any case, you will always be
> limited to the amount of memory on your machine.
> P.S.  A good driver will use memory mapped file io (file channels in java
> NIO) for reading and writing which gives you a max file size of 1.8Exobytes on windows and will consume minimal memory during execution...like
> a couple of MB. Unfortunately, most drivers don't use file channels. :)
>
> Martin
>
> Sent via BlackBerry by AT&T
>
> -----Original Message-----
> From: Frank Warmerdam <warmerdam@pobox.com>
>
> Date: Fri, 04 Jan 2008 11:09:19
> To:Daniele Romagnoli <dany.geotools@gmail.com>
> Cc:gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] In Memory Raster - allocation run out of memory on
>        big sizes.
>
>
> Daniele Romagnoli wrote:
> > Hi list,
> > I'm trying to build a very big In Memory Raster Dataset (~1 GB) using
> > SWIG's Java Bindings on my Notebook (with Windows Vista, with 2GB ram)
> >
> > When calling the java method memoryDriver.create(...) the following
> > error appears "ERROR 2: Unable to create band arrays ... out of memory"
> > which is thrown when the underlying calloc method can't successfully
> > allocate memory.
> > I have performed some tests and tunings with the following conclusions:
> > - reducing the JVM Heap Size (using -Xmx command) allows to allocate a
> > bigger native memory portion (using -Xmx1024M allows me to allocate only
> > <550 MB memory while using -Xmx16M allows me to allocate up to ~820MB)
> > [Java Heap space and "Native" Heap space are managed separately]
> > - increasing the virtual memory, the result is the same (out of memory).
> > - killing all unuseful processes -> freeing more physical memory (~1.2
> > GB), the result is the same (out of memory))
> > Any setting allows me to allocate a max of ~840000 KBytes.
> >
> > Anyway, why having almost 1.2 GB free physical memory and a 3GB virtual
> > memory setting (with ~2GB free) allows me only to create always ~840000
> > KBytes?
> > Does anyone know how memory is managed, how the calloc method operates
> > and whether an OS limitation exist?
> > Thank you very much.
>
> Daniele,
>
> I have no reason to believe this is a GDAL specific problem.  I presume
> you
> are running 32bit Windows Vista?  If so, I believe any one process can
> have
> at most 2GB of heap space which in your case would presumably be split
> between the JVM and non Java memory in the same process.
>
> I think you could allocate larger in memory rasters if you were running
> Win64
> which has a very large potential virtual memory size per process.
>
> PS. I started out this reply to tell you to check the ulimit command
> output
> which reports per-process memory limits on linux before I realized you
> were
> using windows.  I don't know if there is any equivelent thing on windows.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/b681acc5/attachment.html
From guilhem.vellut at gmail.com  Fri Jan  4 12:15:16 2008
From: guilhem.vellut at gmail.com (Guilhem Vellut)
Date: Fri Jan  4 12:15:19 2008
Subject: [gdal-dev] ogr2ogr - create an IND file during MapInfo file export
Message-ID: <43f4b6ee0801040915k5f9badf0vc27b073d7982a27c@mail.gmail.com>

Hello,
I would like to translate a SHP to a Mapinfo TAB file using ogr2ogr.
On top of obtaining the usual files (ID, MAP, TAB and DAT), I also
want to get an index on an attribute (MapInfo Pro creates an IND file
for that) but, if it is possible, I cannot find a mention of how to do
it in the doc. Does ogr2ogr have an option to create this IND file ?
Thanks in advance for any help.
Guilhem
From warmerdam at pobox.com  Fri Jan  4 12:24:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  4 12:24:30 2008
Subject: [gdal-dev] ogr2ogr - create an IND file during MapInfo file export
In-Reply-To: <43f4b6ee0801040915k5f9badf0vc27b073d7982a27c@mail.gmail.com>
References: <43f4b6ee0801040915k5f9badf0vc27b073d7982a27c@mail.gmail.com>
Message-ID: <477E6BB2.3070007@pobox.com>

Guilhem Vellut wrote:
> Hello,
> I would like to translate a SHP to a Mapinfo TAB file using ogr2ogr.
> On top of obtaining the usual files (ID, MAP, TAB and DAT), I also
> want to get an index on an attribute (MapInfo Pro creates an IND file
> for that) but, if it is possible, I cannot find a mention of how to do
> it in the doc. Does ogr2ogr have an option to create this IND file ?
> Thanks in advance for any help.

Guilhem,

I'm sorry, but ogr2ogr does not appear to support creating .ind files
for mapinfo datasets.  The capability does exist in the underlying MITAB
library so if you wanted it badly enough you might be able to modify the
mapinfo driver, or perhaps build a custom mitab utility to do this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dany.geotools at gmail.com  Fri Jan  4 12:25:51 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Jan  4 12:25:55 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory onbig
	sizes.
In-Reply-To: <7221db410801040905j3356ae1dt81896cf744f50394@mail.gmail.com>
References: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>
	<477E5A2F.4070005@pobox.com>
	<1469919195-1199464534-cardhu_decombobulator_blackberry.rim.net-25544157-@bxe022.bisx.prod.on.blackberry>
	<7221db410801040905j3356ae1dt81896cf744f50394@mail.gmail.com>
Message-ID: <7221db410801040925i260e8c7ap520aab473be32f20@mail.gmail.com>

Sorry Martin,
I will rectify the statement in my previous reply: "I guess that increasing
the xmx, "steals" memory which could be used by native items."
I'm saying that I have noticed this:
when increasing xmx settings, the out of memory errors in the native method
occurs with a smaller requested amount of data with respect to the case of a
lower xmx set.
As an instance,  Xmx1024 allows the native method to allocate only <550 MB
memory while Xmx16M allows to allocate up to ~820MB.

Thanks for your help.

Regards,
Daniele


On Jan 4, 2008 6:05 PM, Daniele Romagnoli <dany.geotools@gmail.com> wrote:

> Hi Martin,
> I'm using GDAL through JNI (by means of the SWIG's generated java
> bindings).
> However, I guess that increasing the xmx, "steals" memory which could be
> used by native items.
>
> Regards,
> Daniele.
>
>
> On Jan 4, 2008 5:32 PM, <mchapman@texelinc.com> wrote:
>
> > Daniele,
> >
> > Are you using gdal api through jni or are you calling one of gdals exe
> > programs?  Java limits the total memory for in-process dll's to whatever the
> > xmx is set to minus whatever the jre needs.  I have dealt with this using
> > java before.  You can either increase the xmx setting or call gdal from
> > outside the java runtime, like a c++ exe.  In any case, you will always be
> > limited to the amount of memory on your machine.
> > P.S.  A good driver will use memory mapped file io (file channels in
> > java NIO) for reading and writing which gives you a max file size of 1.8Exobytes on windows and will consume minimal memory during execution...like
> > a couple of MB. Unfortunately, most drivers don't use file channels. :)
> >
> > Martin
> >
> > Sent via BlackBerry by AT&T
> >
> > -----Original Message-----
> > From: Frank Warmerdam <warmerdam@pobox.com>
> >
> > Date: Fri, 04 Jan 2008 11:09:19
> > To:Daniele Romagnoli <dany.geotools@gmail.com>
> > Cc:gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] In Memory Raster - allocation run out of memory
> > on
> >        big sizes.
> >
> >
> > Daniele Romagnoli wrote:
> > > Hi list,
> > > I'm trying to build a very big In Memory Raster Dataset (~1 GB) using
> > > SWIG's Java Bindings on my Notebook (with Windows Vista, with 2GB ram)
> >
> > >
> > > When calling the java method memoryDriver.create(...) the following
> > > error appears "ERROR 2: Unable to create band arrays ... out of
> > memory"
> > > which is thrown when the underlying calloc method can't successfully
> > > allocate memory.
> > > I have performed some tests and tunings with the following
> > conclusions:
> > > - reducing the JVM Heap Size (using -Xmx command) allows to allocate a
> > > bigger native memory portion (using -Xmx1024M allows me to allocate
> > only
> > > <550 MB memory while using -Xmx16M allows me to allocate up to ~820MB)
> > > [Java Heap space and "Native" Heap space are managed separately]
> > > - increasing the virtual memory, the result is the same (out of
> > memory).
> > > - killing all unuseful processes -> freeing more physical memory (~1.2
> > > GB), the result is the same (out of memory))
> > > Any setting allows me to allocate a max of ~840000 KBytes.
> > >
> > > Anyway, why having almost 1.2 GB free physical memory and a 3GB
> > virtual
> > > memory setting (with ~2GB free) allows me only to create always
> > ~840000
> > > KBytes?
> > > Does anyone know how memory is managed, how the calloc method operates
> > > and whether an OS limitation exist?
> > > Thank you very much.
> >
> > Daniele,
> >
> > I have no reason to believe this is a GDAL specific problem.  I presume
> > you
> > are running 32bit Windows Vista?  If so, I believe any one process can
> > have
> > at most 2GB of heap space which in your case would presumably be split
> > between the JVM and non Java memory in the same process.
> >
> > I think you could allocate larger in memory rasters if you were running
> > Win64
> > which has a very large potential virtual memory size per process.
> >
> > PS. I started out this reply to tell you to check the ulimit command
> > output
> > which reports per-process memory limits on linux before I realized you
> > were
> > using windows.  I don't know if there is any equivelent thing on
> > windows.
> >
> > Best regards,
> > --
> >
> > ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> > and watch the world go round - Rush    | President OSGeo,
> > http://osgeo.org
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> -------------------------------------------------------
>
> Eng. Daniele Romagnoli
> Software Engineer
>
> GeoSolutions S.A.S.
> Via Carignoni 51
> 55041 Camaiore (LU)
> Italy
>
> phone: +39 0584983027
> fax:     +39 0584983027
> mob:   +39 328 0559267
>
>
> http://www.geo-solutions.it
>
> -------------------------------------------------------
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/f76b7ff5/attachment-0001.html
From mchapman at texelinc.com  Fri Jan  4 13:04:45 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Fri Jan  4 13:04:48 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory onbig
	sizes.
In-Reply-To: <7221db410801040925i260e8c7ap520aab473be32f20@mail.gmail.com>
References: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>	
	<477E5A2F.4070005@pobox.com>	
	<1469919195-1199464534-cardhu_decombobulator_blackberry.rim.net-25544157-@bxe022.bisx.prod.on.blackberry>	
	<7221db410801040905j3356ae1dt81896cf744f50394@mail.gmail.com>
	<7221db410801040925i260e8c7ap520aab473be32f20@mail.gmail.com>
Message-ID: <004a01c84efc$4a55ef10$df01cd30$@com>

Daniele,

 

Yeah, I'm not a Java programmer so I guess I should not be giving advice,
but I happen to remember similar issues when using gdal from jni in another
application I worked on a year or two ago.  Basically, I think the goal is
to minimize the memory used by the JRE and run gdal processes as
out-of-process exe programs so they can have as much memory as needed to
perform memory allocations.  It's either that or let the JRE consume all the
memory.not recommended.or get more memory.which is always recommended. J

 

Best regards,

 

Martin Chapman

Chief Software Architect

Fortified Datacom Inc.

http://www.fortifieddatacom.com

mchapman@fortifieddatacom.com

303-324-1065

 

From: Daniele Romagnoli [mailto:dany.geotools@gmail.com] 
Sent: Friday, January 04, 2008 10:26 AM
To: mchapman@texelinc.com; Simone Giannecchini; gdal-dev@lists.osgeo.org;
Frank Warmerdam
Subject: Re: [gdal-dev] In Memory Raster - allocation run out of memory
onbig sizes.

 

Sorry Martin,
I will rectify the statement in my previous reply: "I guess that increasing
the xmx, "steals" memory which could be used by native items."
I'm saying that I have noticed this:
when increasing xmx settings, the out of memory errors in the native method
occurs with a smaller requested amount of data with respect to the case of a
lower xmx set.
As an instance,  Xmx1024 allows the native method to allocate only <550 MB
memory while Xmx16M allows to allocate up to ~820MB. 

Thanks for your help.

Regards,
Daniele



On Jan 4, 2008 6:05 PM, Daniele Romagnoli <dany.geotools@gmail.com> wrote:

Hi Martin,
I'm using GDAL through JNI (by means of the SWIG's generated java bindings).

However, I guess that increasing the xmx, "steals" memory which could be
used by native items.

Regards, 
Daniele.

 

On Jan 4, 2008 5:32 PM, <mchapman@texelinc.com> wrote: 

Daniele,

Are you using gdal api through jni or are you calling one of gdals exe
programs?  Java limits the total memory for in-process dll's to whatever the
xmx is set to minus whatever the jre needs.  I have dealt with this using
java before.  You can either increase the xmx setting or call gdal from
outside the java runtime, like a c++ exe.  In any case, you will always be
limited to the amount of memory on your machine. 
P.S.  A good driver will use memory mapped file io (file channels in java
NIO) for reading and writing which gives you a max file size of 1.8 Exobytes
on windows and will consume minimal memory during execution...like a couple
of MB. Unfortunately, most drivers don't use file channels. :) 

Martin

Sent via BlackBerry by AT&T


-----Original Message-----
From: Frank Warmerdam <warmerdam@pobox.com>

Date: Fri, 04 Jan 2008 11:09:19
To:Daniele Romagnoli <dany.geotools@gmail.com>
Cc:gdal-dev@lists.osgeo.org 
Subject: Re: [gdal-dev] In Memory Raster - allocation run out of memory on 
       big sizes.


Daniele Romagnoli wrote:
> Hi list,
> I'm trying to build a very big In Memory Raster Dataset (~1 GB) using
> SWIG's Java Bindings on my Notebook (with Windows Vista, with 2GB ram) 
>
> When calling the java method memoryDriver.create(...) the following
> error appears "ERROR 2: Unable to create band arrays ... out of memory"
> which is thrown when the underlying calloc method can't successfully 
> allocate memory.
> I have performed some tests and tunings with the following conclusions:
> - reducing the JVM Heap Size (using -Xmx command) allows to allocate a
> bigger native memory portion (using -Xmx1024M allows me to allocate only 
> <550 MB memory while using -Xmx16M allows me to allocate up to ~820MB)
> [Java Heap space and "Native" Heap space are managed separately]
> - increasing the virtual memory, the result is the same (out of memory). 
> - killing all unuseful processes -> freeing more physical memory (~1.2
> GB), the result is the same (out of memory))
> Any setting allows me to allocate a max of ~840000 KBytes.
>
> Anyway, why having almost 1.2 GB free physical memory and a 3GB virtual
> memory setting (with ~2GB free) allows me only to create always ~840000
> KBytes?
> Does anyone know how memory is managed, how the calloc method operates 
> and whether an OS limitation exist?
> Thank you very much.

Daniele,

I have no reason to believe this is a GDAL specific problem.  I presume you
are running 32bit Windows Vista?  If so, I believe any one process can have 
at most 2GB of heap space which in your case would presumably be split
between the JVM and non Java memory in the same process.

I think you could allocate larger in memory rasters if you were running
Win64
which has a very large potential virtual memory size per process.

PS. I started out this reply to tell you to check the ulimit command output
which reports per-process memory limits on linux before I realized you were 
using windows.  I don't know if there is any equivelent thing on windows.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
<http://pobox.com/%7Ewarmerdam> 
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org 
http://lists.osgeo.org/mailman/listinfo/gdal-dev





-- 
------------------------------------------------------- 


Eng. Daniele Romagnoli 
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------




-- 
-------------------------------------------------------
Eng. Daniele Romagnoli 
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU) 
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

------------------------------------------------------- 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/e69f7ea4/attachment.html
From jasonbeverage at gmail.com  Fri Jan  4 13:43:59 2008
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Fri Jan  4 13:44:01 2008
Subject: [gdal-dev] Latest version of FWTools
Message-ID: <2c4bbbeb0801041043t243f6fd3o54a4f4364836ff7e@mail.gmail.com>

Hi all,

I was curious as to when the next version of of FWTools will be coming out
that is based on the final release of GDAL 1.5.  I noticed that the
2.0.3version is based on GDAL
1.5.0b1.

Thanks and a big congrats on the 1.5 release!

Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/2a2f61e4/attachment.html
From warmerdam at pobox.com  Fri Jan  4 14:16:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  4 14:16:58 2008
Subject: [gdal-dev] Latest version of FWTools
In-Reply-To: <2c4bbbeb0801041043t243f6fd3o54a4f4364836ff7e@mail.gmail.com>
References: <2c4bbbeb0801041043t243f6fd3o54a4f4364836ff7e@mail.gmail.com>
Message-ID: <477E860B.8090302@pobox.com>

Jason Beverage wrote:
> Hi all,
> 
> I was curious as to when the next version of of FWTools will be coming 
> out that is based on the final release of GDAL 1.5.  I noticed that the 
> 2.0.3 version is based on GDAL 1.5.0b1.
> 
> Thanks and a big congrats on the 1.5 release!

Jason,

2.0.4 is already published and based (roughly) on 1.5.0.  It seems I neglected
to update the web site as I often do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From even.rouault at mines-paris.org  Fri Jan  4 14:28:11 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan  4 14:28:15 2008
Subject: [gdal-dev] Motion : Adopt RFC-19 : Safer memory allocation in GDAL
Message-ID: <200801042028.12392.even.rouault@mines-paris.org>

Hi all,

I propose to start a vote for the adoption of RFC-19 - Safer memory allocation 
in GDAL - if there are no objections.

Best regards,
Even
From warmerdam at pobox.com  Fri Jan  4 14:31:39 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  4 14:32:01 2008
Subject: [gdal-dev] Motion : Adopt RFC-19 : Safer memory allocation in GDAL
In-Reply-To: <200801042028.12392.even.rouault@mines-paris.org>
References: <200801042028.12392.even.rouault@mines-paris.org>
Message-ID: <477E899B.50608@pobox.com>

Even Rouault wrote:
> Hi all,
> 
> I propose to start a vote for the adoption of RFC-19 - Safer memory allocation 
> in GDAL - if there are no objections.

Even,

I'm in support of http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc

+1

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From simboss1 at gmail.com  Fri Jan  4 14:54:28 2008
From: simboss1 at gmail.com (Simone Giannecchini)
Date: Fri Jan  4 14:54:30 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory onbig
	sizes.
In-Reply-To: <1469919195-1199464534-cardhu_decombobulator_blackberry.rim.net-25544157-@bxe022.bisx.prod.on.blackberry>
References: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>
	<477E5A2F.4070005@pobox.com>
	<1469919195-1199464534-cardhu_decombobulator_blackberry.rim.net-25544157-@bxe022.bisx.prod.on.blackberry>
Message-ID: <961f4d9e0801041154h3bf166fam1cf1ebd2265db684@mail.gmail.com>

Ciao Martin, (ciao daniele :-) )
sorry to chime in late in the discussion.

It is actually incorrect saying that "Java limits the total memory for
in-process dll's to whatever the xmx is set to minus whatever the jre
needs".

Actually a JVM process created using java or javaw is a normal process
itself and therefore it is (more or less :-) ) subject to the OS rules
for virtual memory usage.
Internally the JVM process heap is split between the GC managed Heap,
which size and layout can be controlled using the options you propose
plus a bunch more, and the native heap which is used by the JVM itseld
for its own  purposes but which is also used by whichever in-process
native code allocates memory dynamically like gdal would do using
*alloc functions.

On windows 32 bit a user process can *normally* use no more than 2 GB
of virtual space because the other 2 are *normally* reserved for OS
(kernel) usage. In practice I have never been able to make the JVM
process work with more than 1.5 gb maximum total memory which will be
shared between the native and gc heap.?

In the end raising the -Xmx memory limit should not only be
ineffective in this case, but should rather be countereffective since
it would *steal* heap space to the native space from the total quota
available to te JVM process in favour to the GC heap space.


Ciao,
Simone.

PS
Of course, feel free to correct in case I made some mistakes. I am
still trying to recover from the amount of alcohol and food I have
been drinking/eating latetly :-).

On Jan 4, 2008 5:32 PM,  <mchapman@texelinc.com> wrote:
> Daniele,
>
> Are you using gdal api through jni or are you calling one of gdals exe programs?  Java limits the total memory for in-process dll's to whatever the xmx is set to minus whatever the jre needs.  I have dealt with this using java before.  You can either increase the xmx setting or call gdal from outside the java runtime, like a c++ exe.  In any case, you will always be limited to the amount of memory on your machine.
> P.S.  A good driver will use memory mapped file io (file channels in java NIO) for reading and writing which gives you a max file size of 1.8 Exobytes on windows and will consume minimal memory during execution...like a couple of MB. Unfortunately, most drivers don't use file channels. :)
>
> Martin
>
> Sent via BlackBerry by AT&T
>
>
> -----Original Message-----
> From: Frank Warmerdam <warmerdam@pobox.com>
>
> Date: Fri, 04 Jan 2008 11:09:19
> To:Daniele Romagnoli <dany.geotools@gmail.com>
> Cc:gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] In Memory Raster - allocation run out of memory on
>         big sizes.
>
>
> Daniele Romagnoli wrote:
> > Hi list,
> > I'm trying to build a very big In Memory Raster Dataset (~1 GB) using
> > SWIG's Java Bindings on my Notebook (with Windows Vista, with 2GB ram)
> >
> > When calling the java method memoryDriver.create(...) the following
> > error appears "ERROR 2: Unable to create band arrays ... out of memory"
> > which is thrown when the underlying calloc method can't successfully
> > allocate memory.
> > I have performed some tests and tunings with the following conclusions:
> > - reducing the JVM Heap Size (using -Xmx command) allows to allocate a
> > bigger native memory portion (using -Xmx1024M allows me to allocate only
> > <550 MB memory while using -Xmx16M allows me to allocate up to ~820MB)
> > [Java Heap space and "Native" Heap space are managed separately]
> > - increasing the virtual memory, the result is the same (out of memory).
> > - killing all unuseful processes -> freeing more physical memory (~1.2
> > GB), the result is the same (out of memory))
> > Any setting allows me to allocate a max of ~840000 KBytes.
> >
> > Anyway, why having almost 1.2 GB free physical memory and a 3GB virtual
> > memory setting (with ~2GB free) allows me only to create always ~840000
> > KBytes?
> > Does anyone know how memory is managed, how the calloc method operates
> > and whether an OS limitation exist?
> > Thank you very much.
>
> Daniele,
>
> I have no reason to believe this is a GDAL specific problem.  I presume you
> are running 32bit Windows Vista?  If so, I believe any one process can have
> at most 2GB of heap space which in your case would presumably be split
> between the JVM and non Java memory in the same process.
>
> I think you could allocate larger in memory rasters if you were running Win64
> which has a very large potential virtual memory size per process.
>
> PS. I started out this reply to tell you to check the ulimit command output
> which reports per-process memory limits on linux before I realized you were
> using windows.  I don't know if there is any equivelent thing on windows.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions S.A.S.
Via Carignoni 51
55041  Camaiore (LU)
Italy

phone: +39 0584983027
fax:      +39 0584983027
mob:    +39 333 8128928


http://www.geo-solutions.it

-------------------------------------------------------
From mchapman at texelinc.com  Fri Jan  4 15:31:47 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Fri Jan  4 15:31:49 2008
Subject: [gdal-dev] In Memory Raster - allocation run out of memory onbig
	sizes.
In-Reply-To: <961f4d9e0801041154h3bf166fam1cf1ebd2265db684@mail.gmail.com>
References: <7221db410801040449h719ad740s74f20c1bda2328e1@mail.gmail.com>	
	<477E5A2F.4070005@pobox.com>	
	<1469919195-1199464534-cardhu_decombobulator_blackberry.rim.net-25544157-@bxe022.bisx.prod.on.blackberry>
	<961f4d9e0801041154h3bf166fam1cf1ebd2265db684@mail.gmail.com>
Message-ID: <007e01c84f10$d4908050$7db180f0$@com>

Simone,

I didn't know the JVM process heap is split like that. Thanks for that
information.

Best regards,

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065

-----Original Message-----
From: Simone Giannecchini [mailto:simboss1@gmail.com] 
Sent: Friday, January 04, 2008 12:54 PM
To: mchapman@texelinc.com
Cc: Frank Warmerdam; gdal-dev-bounces@lists.osgeo.org; Daniele Romagnoli;
gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] In Memory Raster - allocation run out of memory
onbig sizes.

Ciao Martin, (ciao daniele :-) )
sorry to chime in late in the discussion.

It is actually incorrect saying that "Java limits the total memory for
in-process dll's to whatever the xmx is set to minus whatever the jre
needs".

Actually a JVM process created using java or javaw is a normal process
itself and therefore it is (more or less :-) ) subject to the OS rules
for virtual memory usage.
Internally the JVM process heap is split between the GC managed Heap,
which size and layout can be controlled using the options you propose
plus a bunch more, and the native heap which is used by the JVM itseld
for its own  purposes but which is also used by whichever in-process
native code allocates memory dynamically like gdal would do using
*alloc functions.

On windows 32 bit a user process can *normally* use no more than 2 GB
of virtual space because the other 2 are *normally* reserved for OS
(kernel) usage. In practice I have never been able to make the JVM
process work with more than 1.5 gb maximum total memory which will be
shared between the native and gc heap.?

In the end raising the -Xmx memory limit should not only be
ineffective in this case, but should rather be countereffective since
it would *steal* heap space to the native space from the total quota
available to te JVM process in favour to the GC heap space.


Ciao,
Simone.

PS
Of course, feel free to correct in case I made some mistakes. I am
still trying to recover from the amount of alcohol and food I have
been drinking/eating latetly :-).

On Jan 4, 2008 5:32 PM,  <mchapman@texelinc.com> wrote:
> Daniele,
>
> Are you using gdal api through jni or are you calling one of gdals exe
programs?  Java limits the total memory for in-process dll's to whatever the
xmx is set to minus whatever the jre needs.  I have dealt with this using
java before.  You can either increase the xmx setting or call gdal from
outside the java runtime, like a c++ exe.  In any case, you will always be
limited to the amount of memory on your machine.
> P.S.  A good driver will use memory mapped file io (file channels in java
NIO) for reading and writing which gives you a max file size of 1.8 Exobytes
on windows and will consume minimal memory during execution...like a couple
of MB. Unfortunately, most drivers don't use file channels. :)
>
> Martin
>
> Sent via BlackBerry by AT&T
>
>
> -----Original Message-----
> From: Frank Warmerdam <warmerdam@pobox.com>
>
> Date: Fri, 04 Jan 2008 11:09:19
> To:Daniele Romagnoli <dany.geotools@gmail.com>
> Cc:gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] In Memory Raster - allocation run out of memory on
>         big sizes.
>
>
> Daniele Romagnoli wrote:
> > Hi list,
> > I'm trying to build a very big In Memory Raster Dataset (~1 GB) using
> > SWIG's Java Bindings on my Notebook (with Windows Vista, with 2GB ram)
> >
> > When calling the java method memoryDriver.create(...) the following
> > error appears "ERROR 2: Unable to create band arrays ... out of memory"
> > which is thrown when the underlying calloc method can't successfully
> > allocate memory.
> > I have performed some tests and tunings with the following conclusions:
> > - reducing the JVM Heap Size (using -Xmx command) allows to allocate a
> > bigger native memory portion (using -Xmx1024M allows me to allocate only
> > <550 MB memory while using -Xmx16M allows me to allocate up to ~820MB)
> > [Java Heap space and "Native" Heap space are managed separately]
> > - increasing the virtual memory, the result is the same (out of memory).
> > - killing all unuseful processes -> freeing more physical memory (~1.2
> > GB), the result is the same (out of memory))
> > Any setting allows me to allocate a max of ~840000 KBytes.
> >
> > Anyway, why having almost 1.2 GB free physical memory and a 3GB virtual
> > memory setting (with ~2GB free) allows me only to create always ~840000
> > KBytes?
> > Does anyone know how memory is managed, how the calloc method operates
> > and whether an OS limitation exist?
> > Thank you very much.
>
> Daniele,
>
> I have no reason to believe this is a GDAL specific problem.  I presume
you
> are running 32bit Windows Vista?  If so, I believe any one process can
have
> at most 2GB of heap space which in your case would presumably be split
> between the JVM and non Java memory in the same process.
>
> I think you could allocate larger in memory rasters if you were running
Win64
> which has a very large potential virtual memory size per process.
>
> PS. I started out this reply to tell you to check the ulimit command
output
> which reports per-process memory limits on linux before I realized you
were
> using windows.  I don't know if there is any equivelent thing on windows.
>
> Best regards,
> --
>
---------------------------------------+------------------------------------
--
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions S.A.S.
Via Carignoni 51
55041  Camaiore (LU)
Italy

phone: +39 0584983027
fax:      +39 0584983027
mob:    +39 333 8128928


http://www.geo-solutions.it

-------------------------------------------------------

From szekerest at gmail.com  Fri Jan  4 15:36:53 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan  4 15:36:57 2008
Subject: [gdal-dev] Motion : Adopt RFC-19 : Safer memory allocation in GDAL
In-Reply-To: <200801042028.12392.even.rouault@mines-paris.org>
References: <200801042028.12392.even.rouault@mines-paris.org>
Message-ID: <f3b73b7d0801041236j556c9b7ckf3db601f5bad1cf8@mail.gmail.com>

+1

Best regards,

Tamas


2008/1/4, Even Rouault <even.rouault@mines-paris.org>:
> Hi all,
>
> I propose to start a vote for the adoption of RFC-19 - Safer memory allocation
> in GDAL - if there are no objections.
>
> Best regards,
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From bclay at ball.com  Fri Jan  4 16:23:15 2008
From: bclay at ball.com (Clay, Bruce)
Date: Fri Jan  4 16:23:25 2008
Subject: [gdal-dev] OGR / Oracle problems
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFD47@daytonmsg2k3.AERO.BALL.COM>

I am running into 2 different problems in my program trying to count
fire reports from a MODIS database.

 

I have a database set up in Oracle 10g with 133 tables reported by
"select count(*) from sde.layers;" Only 3 of them appear to OGR when I
use the OCI driver.  The source code to get the names is shown below.

 

        public int GetTableList(DataSource dataSource, out ArrayList
tableList)

        {

            int status = -1;

 

            tableList = null;

 

            int numLayers = dataSource.GetLayerCount();

 

            if (numLayers > 0)

            {

                tableList = new ArrayList();

 

                if (tableList != null)

                {

                    for (int layerIndex = 0; layerIndex < numLayers;
layerIndex++)

                    {

                        Layer layer =
dataSource.GetLayerByIndex(layerIndex);

                        FeatureDefn featureDef = layer.GetLayerDefn();

 

                        string layerName = featureDef.GetName();

 

                        tableList.Add(layerName);

                    }

                    if (tableList.Count > 0)

                    {

                        status = 0;

                    }

                }

            }

            return (status);

        }

 

It looks like OGR is only including the tables that are set up for
SDO_GEOMETRY.  I say that because the same 3 tables show up if I issue
the following SQL

      select * from USER_SDO_GEOM_METADATA ;  All of the tables were
created with ArcCatalog but these three tables have been updated to
support use of SDO_GEOMETRY by adding metadata to Oracle.

 

 

The other problem I am encountering is that Date fields are not returned
along with other attribute fields.  The code I use to get the field list
is shown below.  All the field names are returned except for Date,
Geometry and the BLOB ESRI added for SE_ANNO_CAD_DATA.  Geometry I can
of course can get with a direct call. And the BLOB I don't really care
about but it would be nice if the field definition showed up. The date
is a critical field to use for the data retrieval because I am looking
specific date time windows.

 

        public int GetFieldList(DataSource dataSource, string tableName,

                                                     out
List<fieldInfoRec> fieldList)

        {

            int status = -1;

 

            fieldList = new List<fieldInfoRec>();

 

            if ((dataSource != null) && (tableName.Length > 0))

            {

                Layer layer = dataSource.GetLayerByName(tableName);

 

                if (layer != null)

                {

                    FeatureDefn featureDef = layer.GetLayerDefn();

 

                    int numFields = featureDef.GetFieldCount();

 

                    for (int fieldIndex = 0; fieldIndex < numFields;
fieldIndex++)

                    {

                        FieldDefn fieldDef =
featureDef.GetFieldDefn(fieldIndex);

                        if (fieldDef != null)

                        {

                            fieldInfoRec fieldInfo = new fieldInfoRec();

                            fieldInfo.fieldName = fieldDef.GetName();

 

                            fieldList.Add(fieldInfo);

                        }

                    }

 

                    if (fieldList.Count > 0)

                    {

                        status = 0;

                    }

                }

 

            }

            else

            {

                mLastErrorMsg = "GetFieldList:Invalid parameters";

            }

            return (status);

        }

 

Are these known issues?  Is there a way to work around them?

 

Bruce




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080104/a2b601b3/attachment-0001.html
From dmorissette at mapgears.com  Fri Jan  4 17:16:33 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Jan  4 17:16:33 2008
Subject: [gdal-dev] ogr2ogr - create an IND file during MapInfo file export
In-Reply-To: <477E6BB2.3070007@pobox.com>
References: <43f4b6ee0801040915k5f9badf0vc27b073d7982a27c@mail.gmail.com>
	<477E6BB2.3070007@pobox.com>
Message-ID: <477EB041.8050106@mapgears.com>

Frank Warmerdam wrote:
> 
> I'm sorry, but ogr2ogr does not appear to support creating .ind files
> for mapinfo datasets.  The capability does exist in the underlying MITAB
> library so if you wanted it badly enough you might be able to modify the
> mapinfo driver, or perhaps build a custom mitab utility to do this.
> 

If you need to do this only once for a few files, then you could convert 
the SHP to MIF/MID, then edit the .MIF header (it's a text file) to add 
an INDEX line in the header (just above the COLUMNS line) listing the 
numbers of all columns to index. Then rerun ogr2ogr to convert the 
MIF/MID dataset to TAB and the specified columns will be indexed.

For more info on the MIF File header format, see:
http://www.directionsmag.com/mapinfo-l/mif/AppJ.pdf

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From reedc+gdal at ctech.com  Fri Jan  4 17:29:51 2008
From: reedc+gdal at ctech.com (Reed Copsey, Jr.)
Date: Fri Jan  4 17:29:55 2008
Subject: [gdal-dev] Issue in Golden Software Surfer 7 format
Message-ID: <d82dce9d0801041429g6849c6a0g221ac3d36cc08bbe@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
/************************************************************************/
/*                          GetGeoTransform()                           */
/************************************************************************/

CPLErr GS7BGDataset::GetGeoTransform( double *padfGeoTransform )
{
    if( padfGeoTransform == NULL )
        return CE_Failure;

    GS7BGRasterBand *poGRB = (GS7BGRasterBand *)GetRasterBand( 1 );

    if( poGRB == NULL )
    {
        padfGeoTransform[0] = 0;
        padfGeoTransform[1] = 1;
        padfGeoTransform[2] = 0;
        padfGeoTransform[3] = 0;
        padfGeoTransform[4] = 0;
        padfGeoTransform[5] = 1;
        return CE_Failure;
    }

    /* check if we have a PAM GeoTransform stored */
    CPLPushErrorHandler( CPLQuietErrorHandler );
    CPLErr eErr = GDALPamDataset::GetGeoTransform( padfGeoTransform );
    CPLPopErrorHandler();

    if( eErr == CE_None )
        return CE_None;

    /* calculate pixel size first */
    padfGeoTransform[1] = (poGRB->dfMaxX - poGRB->dfMinX)/(nRasterXSize - 1);
    padfGeoTransform[5] = (poGRB->dfMinY - poGRB->dfMaxY)/(nRasterYSize - 1);

    /* then calculate image origin */
    padfGeoTransform[0] = poGRB->dfMinX - padfGeoTransform[1] / 2;
    padfGeoTransform[3] = poGRB->dfMaxY - padfGeoTransform[5] / 2;

    /* tilt/rotation does not supported by the GS grids */
    padfGeoTransform[4] = 0.0;
    padfGeoTransform[2] = 0.0;


    return CE_None;
}
From jluis at ualg.pt  Fri Jan  4 20:28:13 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Jan  4 20:28:23 2008
Subject: [gdal-dev] Issue in Golden Software Surfer 7 format
In-Reply-To: <d82dce9d0801041429g6849c6a0g221ac3d36cc08bbe@mail.gmail.com>
References: <d82dce9d0801041429g6849c6a0g221ac3d36cc08bbe@mail.gmail.com>
Message-ID: <477EDD2D.80604@ualg.pt>

Reed Copsey, Jr. wrote:
> Last year, a changeset was submitted which fixed the golden software 6 
> file formats (10814), but unfortunately it wasn't applied to the 
> surfer 7 file format which has the exact same issue.

>     /* calculate pixel size first */
>     padfGeoTransform[1] = (poGRB->dfMaxX - poGRB->dfMinX)/(nRasterXSize - 1);
>     padfGeoTransform[5] = (poGRB->dfMinY - poGRB->dfMaxY)/(nRasterYSize - 1);
>
>     /* then calculate image origin */
>     padfGeoTransform[0] = poGRB->dfMinX - padfGeoTransform[1] / 2;
>     padfGeoTransform[3] = poGRB->dfMaxY - padfGeoTransform[5] / 2;
>   

Reed,

I think that padfGeoTransform[3] should be

padfGeoTransform[3] = poGRB->dfMaxY + padfGeoTransform[5] / 2;


Joaquim Luis
From jluis at ualg.pt  Fri Jan  4 20:32:47 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Jan  4 20:32:52 2008
Subject: [gdal-dev] Issue in Golden Software Surfer 7 format
In-Reply-To: <477EDD2D.80604@ualg.pt>
References: <d82dce9d0801041429g6849c6a0g221ac3d36cc08bbe@mail.gmail.com>
	<477EDD2D.80604@ualg.pt>
Message-ID: <477EDE3E.9080803@ualg.pt>


>>     /* calculate pixel size first */
>>     padfGeoTransform[1] = (poGRB->dfMaxX - 
>> poGRB->dfMinX)/(nRasterXSize - 1);
>>     padfGeoTransform[5] = (poGRB->dfMinY - 
>> poGRB->dfMaxY)/(nRasterYSize - 1);
>>
>>     /* then calculate image origin */
>>     padfGeoTransform[0] = poGRB->dfMinX - padfGeoTransform[1] / 2;
>>     padfGeoTransform[3] = poGRB->dfMaxY - padfGeoTransform[5] / 2;
>>   
>
> Reed,
>
> I think that padfGeoTransform[3] should be
>
> padfGeoTransform[3] = poGRB->dfMaxY + padfGeoTransform[5] / 2;
>


Please forget/forgive
Only after sending previous mail I  realized that padfGeoTransform[5] 
had negative sign since it does (minY - maxY)

Joaquim
From ben at vterrain.org  Sat Jan  5 04:44:21 2008
From: ben at vterrain.org (Ben Discoe)
Date: Sat Jan  5 04:45:15 2008
Subject: [gdal-dev] wkbFlatten in tutorial
Message-ID: <01ef01c84f7f$8e8f3550$abad9ff0$@org>

In the OGR tutorial here:
 http://www.gdal.org/ogr/ogr_apitut.html

I find the text:
 "For each 2D geometry type there is a corresponding 2.5D type code; however, there is only a C++ class for both the 2D and 3D cases."

I can't quite parse it.  I understand that wkbFlatten turns e.g. wkbLineString25D into wkbLineString, and that the class OGRLineString stores either type.  Perhaps the tutorial means to say "there is NOT a C++ class.."?  

-Ben


From sfkeller at gmail.com  Sat Jan  5 07:44:27 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Sat Jan  5 07:44:29 2008
Subject: [gdal-dev] ogr2ogr ignores LINEFORMAT=LF?
In-Reply-To: <477DA235.8000909@pobox.com>
References: <25bc040b0801031541r13cf28e6v5fe7d3318a730d50@mail.gmail.com>
	<477DA235.8000909@pobox.com>
Message-ID: <25bc040b0801050444xf163205i8d676376bd2e002c@mail.gmail.com>

Frank,

You're right, I meant CRLF not LF (under Linux, fo Windows). I have tried to
correct it but got another delivery error (550 5.1.1 User unknown). It
finally worked with a parameter -lco like this:

  ogr2ogr -f CSV out Bahnhoefe.shp -sql "select *,OGR_GEOM_WKT from
Bahnhoefe" -lco "LINEFORMAT=LF"

I actually thought that -dsco would serve as a defailt for all layers (-lco)
because I don't bother too much about layer names..

-- Stefan

2008/1/4, Frank Warmerdam <warmerdam@pobox.com>:
>
> Stefan Keller wrote:
> > (Sorry for double postings, I'm getting 550 5.1.1 User unknown errors),
> >
> > Dear all
> >
> > This works but it ignores LINEFORMAT=LF: The resulting file always
> > contains LF. What am I doing wrong?
> >
> > $ ogr2ogr -f CSV out MyShape.shp -sql "select *,OGR_GOM_WKT from
> > MyShape" -dsco LINEFORMAT=LF
> >
> > (I'm using Windows XP with GDAL 1.5.0b1, FWTools 2.0.2, released
> 2007/12/05)
>
> Stefan,
>
> You wrote that ogr2ogr ignores LINEFORMAT=LF and always products files
> with line feeds.  Perhaps you mean that it always produces CRLF?
>
> Looking in the code I see LINEFORMAT is a layer creation option, not a
> datasource creation option.  So it should be specified with -lco instead
> of -dsco.  Perhaps that is the root of your problem?  I have made an
> effort
> to clarify this in the documentation.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
>
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080105/8513edb6/attachment.html
From warmerdam at pobox.com  Sat Jan  5 11:57:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan  5 11:57:30 2008
Subject: [gdal-dev] wkbFlatten in tutorial
In-Reply-To: <01ef01c84f7f$8e8f3550$abad9ff0$@org>
References: <01ef01c84f7f$8e8f3550$abad9ff0$@org>
Message-ID: <477FB6EC.9070009@pobox.com>

Ben Discoe wrote:
> In the OGR tutorial here:
>  http://www.gdal.org/ogr/ogr_apitut.html
> 
> I find the text:
>  "For each 2D geometry type there is a corresponding 2.5D type code; however, there is only a C++ class for both the 2D and 3D cases."
> 
> I can't quite parse it.  I understand that wkbFlatten turns e.g. wkbLineString25D into wkbLineString, and that the class OGRLineString stores either type.  Perhaps the tutorial means to say "there is NOT a C++ class.."?  

Ben,

I have adjusted this text as follows, which is hopefully less mixed up
and confusing.

"""
The wkbFlatten() macro is used above to convert the type for a wkbPoint25D
(a point with a z coordinate) into the base 2D geometry type code (wkbPoint).
For each 2D geometry type there is a corresponding 2.5D type code.  The 2D
and 2.5D geometry cases are handled by the same C++ class, so our code will
handle 2D or 3D cases properly.
"""

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From maplabs at light42.com  Sat Jan  5 15:54:20 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Sat Jan  5 15:44:59 2008
Subject: [gdal-dev] GDAL / Python and PPC
Message-ID: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>

Hi all-

   over the winter break, I decided I would get into the Python swing of 
things.. I loaded numpy into my OS X Framework Python 2.5.1. The 
problem was, numpy wanted to build both i386 and PPC architectures. I 
jiggled and rattled - I honestly dont remember exactly, and built just 
the PPC architecture. This is OS 10.4.10. All the tests run fine, and 
import numpy is happy in the interactive shell.

* I have numpy in python. * import numpy works fine without any GDAL 
anything ***

   Now, moving to GDAL, I configured --with-python, and make. The build 
gets to SWIG, which gets to Python, which sees Numpy, and.. issues the 
commands in a striking yellow text to build both PPC and i386 arch. 
This fails, and the make comes to a halt. Oh yes, it is in the make 
install, actually. Make itself succeeds.


UPDATE: I just reinstalled (after a full backup) the OSX Dev System for 
10.3 and 10.4 Universal. then built GDAL. Same result, on install, 
python bindings hit numpy, then try to build numpy and fail to link on 
i386 everything. I went into setup.py and added extra_compile_args = [ 
'-g', '-arch', 'ppc' ]
that appears in the build output, but a line later than the fatal C 
compiler: 'osgeo.gdal' -arch ppc -arch i386

no python...

   -Brian

From woklist at kyngchaos.com  Sat Jan  5 17:17:27 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Jan  5 17:17:32 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
Message-ID: <E78EE499-3673-4DCC-9AD2-0E6A705924BD@kyngchaos.com>

On Jan 5, 2008, at 2:54 PM, Brian Hamlin wrote:

> Hi all-
>
>  over the winter break, I decided I would get into the Python swing  
> of things.. I loaded numpy into my OS X Framework Python 2.5.1. The  
> problem was, numpy wanted to build both i386 and PPC architectures.  
> I jiggled and rattled - I honestly dont remember exactly, and built  
> just the PPC architecture. This is OS 10.4.10. All the tests run  
> fine, and import numpy is happy in the interactive shell.
>
> * I have numpy in python. * import numpy works fine without any GDAL  
> anything ***
>
What about the the numpy binary?

http://pythonmac.org/packages/

This is usually kept up to date, though right now it's a version  
behind.  But it's universal and built for the Python universal package.

For building it yourself, normally python extensions will build  
universal by default.  But numpy may not.  Try setting ARCHFLAGS  
before building numpy

export ARCHFLAGS="-arch ppc -arch i386"

If you are still having problems, this is really a question that  
should be asked on the Mac python list.

>  Now, moving to GDAL, I configured --with-python, and make. The  
> build gets to SWIG, which gets to Python, which sees Numpy, and..  
> issues the commands in a striking yellow text to build both PPC and  
> i386 arch. This fails, and the make comes to a halt. Oh yes, it is  
> in the make install, actually. Make itself succeeds.
>
Correct, because GDAL python *does* attempt to build universal by  
default, which fails because numpy is not.

>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do if  
you ARE a maniacally depressed robot?  No, don't try and answer, I'm  
50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy


From maplabs at light42.com  Sat Jan  5 20:02:10 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Sat Jan  5 19:52:46 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <E78EE499-3673-4DCC-9AD2-0E6A705924BD@kyngchaos.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
	<E78EE499-3673-4DCC-9AD2-0E6A705924BD@kyngchaos.com>
Message-ID: <02926DA3-BBF3-11DC-9E67-000A277A733C@light42.com>


On Jan 5, 2008, at 2:17 PM, William Kyngesburye wrote:

> export ARCHFLAGS="-arch ppc -arch i386"

Hi William-

   thanks very much for the reply. Unfortunately, ARCHFLAGS didn't help.
The link failure is just the same...

One thing to note is that I already have numpy built and in place in 
python. Hence,
why would I need another numpy built at all? Why is GDAL trying to 
build a numpy?
numpy is there already, working...

(on the same note, a binary install package is not necessary. *unless* 
that makes the
build work, of course!)

I am open to all solutions, as I dont rely on python for anything else  
right now, aside
from an occasional Regionator run..

best regards
    -Brian

From woklist at kyngchaos.com  Sat Jan  5 20:45:21 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Jan  5 20:45:25 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <02926DA3-BBF3-11DC-9E67-000A277A733C@light42.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
	<E78EE499-3673-4DCC-9AD2-0E6A705924BD@kyngchaos.com>
	<02926DA3-BBF3-11DC-9E67-000A277A733C@light42.com>
Message-ID: <C9061CB0-1C8C-410E-A27B-DDF35A460FDD@kyngchaos.com>

I guess I don't understand where the problem is.  Here is what I got  
out of your original description of the problem:

   OSX 10.4
   Python 2.5.1 universal binary installed
   no numpy

   build and install numpy from source, but it won't build universal

   GDAL python fails to build because numpy is not universal

more below...

On Jan 5, 2008, at 7:02 PM, Brian Hamlin wrote:

>
> On Jan 5, 2008, at 2:17 PM, William Kyngesburye wrote:
>
>> export ARCHFLAGS="-arch ppc -arch i386"
>
> Hi William-
>
>  thanks very much for the reply. Unfortunately, ARCHFLAGS didn't help.
> The link failure is just the same...
>
When I think about it, the GDAL python libs shouldn't be linking  
directly to the numpy libs anyways.  Python extension libs are really  
loadable modules, like plugins.  The python scripts take care of  
loading those.  So maybe you really mean it's a missing dependency  
problem, not a linking failure?  What is the error when compiling GDAL?

> One thing to note is that I already have numpy built and in place in  
> python. Hence,
> why would I need another numpy built at all? Why is GDAL trying to  
> build a numpy?
> numpy is there already, working...
>
> (on the same note, a binary install package is not necessary.  
> *unless* that makes the
> build work, of course!)
>

Installing the numpy binary from pythonmac.org is just a convenience  
so you don't have to worry about problems building it universal, which  
is what I think is the source of the GDAL problems.

GDAL doesn't come with its own copy of the numpy source or try to  
build it.

> I am open to all solutions, as I dont rely on python for anything  
> else  right now, aside
> from an occasional Regionator run..
>
> best regards
>   -Brian
>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From sgillies at frii.com  Sat Jan  5 21:01:58 2008
From: sgillies at frii.com (Sean Gillies)
Date: Sat Jan  5 21:02:04 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
Message-ID: <47803696.9060901@frii.com>

Brian Hamlin wrote:
> Hi all-
> 
>   over the winter break, I decided I would get into the Python swing of
> things.. I loaded numpy into my OS X Framework Python 2.5.1. The problem
> was, numpy wanted to build both i386 and PPC architectures. I jiggled
> and rattled - I honestly dont remember exactly, and built just the PPC
> architecture. This is OS 10.4.10. All the tests run fine, and import
> numpy is happy in the interactive shell.
> 
> * I have numpy in python. * import numpy works fine without any GDAL
> anything ***
> 
>   Now, moving to GDAL, I configured --with-python, and make. The build
> gets to SWIG, which gets to Python, which sees Numpy, and.. issues the
> commands in a striking yellow text to build both PPC and i386 arch. This
> fails, and the make comes to a halt. Oh yes, it is in the make install,
> actually. Make itself succeeds.
> 
> 
> UPDATE: I just reinstalled (after a full backup) the OSX Dev System for
> 10.3 and 10.4 Universal. then built GDAL. Same result, on install,
> python bindings hit numpy, then try to build numpy and fail to link on
> i386 everything. I went into setup.py and added extra_compile_args = [
> '-g', '-arch', 'ppc' ]
> that appears in the build output, but a line later than the fatal C
> compiler: 'osgeo.gdal' -arch ppc -arch i386
> 
> no python...
> 
>   -Brian

Brian,

You could also take the modern Python route: simply build the library
--without-python, get the setuptools module by downloading and executing

http://peak.telecommunity.com/dist/ez_setup.py

and then execute:

  $ easy_install GDAL

Howard has put a ton of work into it. Should just plain work and build
numpy for you as well.

Cheers,
Sean
From maplabs at light42.com  Sat Jan  5 22:15:10 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Sat Jan  5 22:05:39 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <47803696.9060901@frii.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
	<47803696.9060901@frii.com>
Message-ID: <96DAE770-BC05-11DC-9E67-000A277A733C@light42.com>


On Jan 5, 2008, at 6:01 PM, Sean Gillies wrote:

> Brian Hamlin wrote:
>> ...no python...
>
> [ setuptools install instructions....]
>
> Howard has put a ton of work into it. Should just plain work and build
> numpy for you as well.
>

well, that sounded good, but, no go..

===========
pbg42-2;/users/shared/srcs/gdal-trunk jspace4 sudo python -m  
easy-install 'gdal'
password;
searching for gdal
reading http;//cheeseshop.python.org/pypi/gdal/
reading http;//www.gdal.org
reading http;//cheeseshop.python.org/pypi/gdal/1.5.0
best match; gdal 1.5.0
downloading  
http;//pypi.python.org/packages/source/g/gdal/gdal 
-1.5.0.tar.gz3md5=a7fcc5ec9c1719aa7b3aba1cd7c9c1e7
processing gdal-1.5.0.tar.gz
running gdal-1.5.0/setup.py -q bdist-egg --dist-dir  
/tmp/easy-install-078ffx/gdal-1.5.0/egg-dist-tmp-ctpbwq
numpy include  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/site- 
packages/numpy/core/include
/usr/bin/ld; warning -l; directory name 9../../.libs0 does not exist
/usr/bin/ld; for architecture i386
/usr/bin/ld; warning /usr/local/lib/libgdal.dylib cputype 918,  
architecture ppc0 does not match cputype 970 for specified -arch flag;  
i386 9file not loaded0
/usr/bin/ld; warning -l; directory name 9../../.libs0 does not exist
/usr/bin/ld; for architecture ppc
/usr/bin/ld; warning can't open dynamic library;  
/developer/sdks/macosx10.4u.sdk/usr/local/lib/libgeos-c.1.dylib  
referenced from; /usr/local/lib/libgdal.dylib 9checking for undefined  
symbols may be affected0 9no such file or directory, errno = 20
/usr/bin/ld; warning can't open dynamic library;  
/developer/sdks/macosx10.4u.sdk/usr/local/lib/libgeos-3.0.0.dylib  
referenced from; /usr/local/lib/libgdal.dylib 9checking for undefined  
symbols may be affected0 9no such file or directory, errno = 20
/usr/bin/ld; warning can't open dynamic library;  
/developer/sdks/macosx10.4u.sdk/usr/local/lib/libexpat.1.dylib  
referenced from; /usr/local/lib/libgdal.dylib 9checking for undefined  
symbols may be affected0 9no such file or directory, errno = 20
/usr/bin/ld; warning can't open dynamic library;  
/developer/sdks/macosx10.4u.sdk/usr/local/pgsql/lib/libpq.5.dylib  
referenced from; /usr/local/lib/libgdal.dylib 9checking for undefined  
symbols may be affected0 9no such file or directory, errno = 20
/usr/bin/ld; undefined symbols;
-xml-errorstring referenced from libgdal expected to be defined in  
/usr/local/lib/libexpat.1.dylib
-xml-getcurrentlinenumber referenced from libgdal expected to be  
defined in /usr/local/lib/libexpat.1.dylib
-xml-geterrorcode referenced from libgdal expected to be defined in  
/usr/local/lib/libexpat.1.dylib
-xml-parse referenced from libgdal expected to be defined in  
/usr/local/lib/libexpat.1.dylib
-xml-parsercreate referenced from libgdal expected to be defined in  
/usr/local/lib/libexpat.1.dylib
-xml-parserfree referenced from libgdal expected to be defined in  
/usr/local/lib/libexpat.1.dylib
-xml-setcharacterdatahandler referenced from libgdal expected to be  
defined in /usr/local/lib/libexpat.1.dylib
-xml-setelementhandler referenced from libgdal expected to be defined  
in /usr/local/lib/libexpat.1.dylib
-xml-setuserdata referenced from libgdal expected to be defined in  
/usr/local/lib/libexpat.1.dylib
-xml-getcurrentcolumnnumber referenced from libgdal expected to be  
defined in /usr/local/lib/libexpat.1.dylib
-pqclear referenced from libgdal expected to be define49a0
shelstory;inteterm=xterm-cple-terminaf6;0;0
xxxx
pbg42-2;/users/shared/srcs/gdal-trunk jspace4 set
archflags='-arch ppc'
bash=/usr/bin/su
bash-versinfo=9[0]='2' [1]='05b' [2]='0' [3]='1' [4]='release'  
[5]='powerpc-apple-darwin8.0'0
bash-version='2.05b.0910-release'
columns=113
dirstack=90
euid=503
groups=90
histfile=/users/jspace/.bash-history
histfilesize=500
histsize=500
home=/users/jspace
hostname=pbg42-2.local
hosttype=powerpc
ifs=4' \t\n'
lines=30
logname=bmarshall
machtype=powerpc-apple-darwin8.0
mailcheck=60
oldpwd=/users/shared/srcs/gdal-trunk/swig/python
opterr=1
optind=1
ostype=darwin8.0
path=/bin;/sbin;/usr/local/bin;/usr/sbin;/usr/bin
pipestatus=9[0]='1'0
ppid=10866
ps1='\h;\w \u\4 '
ps2='. '
ps4='= '
pwd=/users/shared/srcs/gdal-trunk
securitysessionid=81049a0
shell=/bin/bash
shellopts=braceexpand;emacs;hashall;histexpand;history;interactive- 
comments;monitor
shlvl=2
term=xterm-color
term-program=apple-terminal
term-program-version=133
uid=503
user=jspace
-=gdal
--cf-user-text-encoding=0x1f6;0;0
===================
pbg42-2;/users/shared/srcs/gdal-trunk jspace4 python -v
3 installing zipimport hook
import zipimport 3 builtin
3 installed zipimport hook
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
site.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/site.py
import site 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
site.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/os.pyc  
matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/os.py
import os 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/os.pyc
import posix 3 builtin
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
posixpath.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
posixpath.py
import posixpath 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
posixpath.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
stat.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/stat.py
import stat 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
stat.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
userdict.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
userdict.py
import userdict 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
userdict.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/copy- 
reg.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/copy- 
reg.py
import copy-reg 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/copy- 
reg.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
types.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
types.py
import types 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
types.pyc
import -types 3 builtin
3 zipimport; found 308 names in  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/site- 
packages/rdflib-2.4.0-py2.5-macosx-10.3-fat.egg
3 zipimport; found 31 names in  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/site- 
packages/geopy-0.93-py2.5.egg
3 zipimport; found 44 names in  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/site- 
packages/simplejson-1.7.3-py2.5-macosx-10.3-fat.egg
3 zipimport; found 78 names in  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/site- 
packages/setuptools-0.6c6-py2.5.egg
3 zipimport; found 42 names in  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/site- 
packages/shapely-1.0b2-py2.5.egg
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
warnings.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
warnings.py
import warnings 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
warnings.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
linecache.pyc matches /library/frameworks/python.import warnings 3  
precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
warnings.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
linecache.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
linecache.py
import linecache 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
linecache.pyc
import encodings 3 directory  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/--init--.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/--init--.py
import encodings 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/--init--.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
codecs.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
codecs.py
import codecs 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
codecs.pyc
import -codecs 3 builtin
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/aliases.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/aliases.py
import encodings.aliases 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/aliases.pyc
3  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/ascii.pyc matches  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/ascii.py
import encodings.ascii 3 precompiled from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
encodings/ascii.pyc
python 2.5.1 9r251;54869, apr 18 2007, 22;08;040
[gcc 4.0.1 9apple computer, inc. build 53670] on darwin
type 'help', 'copyright', 'credits' or 'license' for more information.
dlopen9'/library/frameworks/python.framework/versions/2.5/lib/ 
python2.5/lib-dynload/readline.so', 20;
import readline 3 dynamically loaded from  
/library/frameworks/python.framework/versions/2.5/lib/python2.5/lib- 
dynload/readline.so
...


From woklist at kyngchaos.com  Sun Jan  6 15:37:48 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Jan  6 15:37:54 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <96DAE770-BC05-11DC-9E67-000A277A733C@light42.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
	<47803696.9060901@frii.com>
	<96DAE770-BC05-11DC-9E67-000A277A733C@light42.com>
Message-ID: <8AA0E2C9-B8D3-4D7C-845B-63366F0C5851@kyngchaos.com>

If all you want is binaries to use, what about my GDAL framework?   
GDAL Python binaries included.

It looks like the cheeseshop method is expecting dependencies in /usr/ 
local, so you would have to buid GDAL and all deps there.

On Jan 5, 2008, at 9:15 PM, Brian Hamlin wrote:

>
> On Jan 5, 2008, at 6:01 PM, Sean Gillies wrote:
>
>> Brian Hamlin wrote:
>>> ...no python...
>>
>> [ setuptools install instructions....]
>>
>> Howard has put a ton of work into it. Should just plain work and  
>> build
>> numpy for you as well.
>>
>
> well, that sounded good, but, no go..
>
> ===========
> pbg42-2;/users/shared/srcs/gdal-trunk jspace4 sudo python -m easy- 
> install 'gdal'
> password;
> searching for gdal
> reading http;//cheeseshop.python.org/pypi/gdal/
> reading http;//www.gdal.org
> reading http;//cheeseshop.python.org/pypi/gdal/1.5.0
> best match; gdal 1.5.0
> downloading http;//pypi.python.org/packages/source/g/gdal/ 
> gdal-1.5.0.tar.gz3md5=a7fcc5ec9c1719aa7b3aba1cd7c9c1e7
> processing gdal-1.5.0.tar.gz
> running gdal-1.5.0/setup.py -q bdist-egg --dist-dir /tmp/easy- 
> install-078ffx/gdal-1.5.0/egg-dist-tmp-ctpbwq
> numpy include /library/frameworks/python.framework/versions/2.5/lib/ 
> python2.5/site-packages/numpy/core/include
> /usr/bin/ld; warning -l; directory name 9../../.libs0 does not exist
> /usr/bin/ld; for architecture i386
> /usr/bin/ld; warning /usr/local/lib/libgdal.dylib cputype 918,  
> architecture ppc0 does not match cputype 970 for specified -arch  
> flag; i386 9file not loaded0
> /usr/bin/ld; warning -l; directory name 9../../.libs0 does not exist
> /usr/bin/ld; for architecture ppc
> /usr/bin/ld; warning can't open dynamic library; /developer/sdks/ 
> macosx10.4u.sdk/usr/local/lib/libgeos-c.1.dylib referenced from; / 
> usr/local/lib/libgdal.dylib 9checking for undefined symbols may be  
> affected0 9no such file or directory, errno = 20
> /usr/bin/ld; warning can't open dynamic library; /developer/sdks/ 
> macosx10.4u.sdk/usr/local/lib/libgeos-3.0.0.dylib referenced from; / 
> usr/local/lib/libgdal.dylib 9checking for undefined symbols may be  
> affected0 9no such file or directory, errno = 20
> /usr/bin/ld; warning can't open dynamic library; /developer/sdks/ 
> macosx10.4u.sdk/usr/local/lib/libexpat.1.dylib referenced from; /usr/ 
> local/lib/libgdal.dylib 9checking for undefined symbols may be  
> affected0 9no such file or directory, errno = 20
> /usr/bin/ld; warning can't open dynamic library; /developer/sdks/ 
> macosx10.4u.sdk/usr/local/pgsql/lib/libpq.5.dylib referenced from; / 
> usr/local/lib/libgdal.dylib 9checking for undefined symbols may be  
> affected0 9no such file or directory, errno = 20
> /usr/bin/ld; undefined symbols;
> -xml-errorstring referenced from libgdal expected to be defined in / 
> usr/local/lib/libexpat.1.dylib
> -xml-getcurrentlinenumber referenced from libgdal expected to be  
> defined in /usr/local/lib/libexpat.1.dylib
> -xml-geterrorcode referenced from libgdal expected to be defined in / 
> usr/local/lib/libexpat.1.dylib
> -xml-parse referenced from libgdal expected to be defined in /usr/ 
> local/lib/libexpat.1.dylib
> -xml-parsercreate referenced from libgdal expected to be defined in / 
> usr/local/lib/libexpat.1.dylib
> -xml-parserfree referenced from libgdal expected to be defined in / 
> usr/local/lib/libexpat.1.dylib
> -xml-setcharacterdatahandler referenced from libgdal expected to be  
> defined in /usr/local/lib/libexpat.1.dylib
> -xml-setelementhandler referenced from libgdal expected to be  
> defined in /usr/local/lib/libexpat.1.dylib
> -xml-setuserdata referenced from libgdal expected to be defined in / 
> usr/local/lib/libexpat.1.dylib
> -xml-getcurrentcolumnnumber referenced from libgdal expected to be  
> defined in /usr/local/lib/libexpat.1.dylib
> -pqclear referenced from libgdal expected to be define49a0
> shelstory;inteterm=xterm-cple-terminaf6;0;0
> xxxx
> pbg42-2;/users/shared/srcs/gdal-trunk jspace4 set
> archflags='-arch ppc'
> bash=/usr/bin/su
> bash- 
> versinfo 
> =9[0]='2' [1]='05b' [2]='0' [3]='1' [4]='release' [5]='powerpc-apple- 
> darwin8.0'0
> bash-version='2.05b.0910-release'
> columns=113
> dirstack=90
> euid=503
> groups=90
> histfile=/users/jspace/.bash-history
> histfilesize=500
> histsize=500
> home=/users/jspace
> hostname=pbg42-2.local
> hosttype=powerpc
> ifs=4' \t\n'
> lines=30
> logname=bmarshall
> machtype=powerpc-apple-darwin8.0
> mailcheck=60
> oldpwd=/users/shared/srcs/gdal-trunk/swig/python
> opterr=1
> optind=1
> ostype=darwin8.0
> path=/bin;/sbin;/usr/local/bin;/usr/sbin;/usr/bin
> pipestatus=9[0]='1'0
> ppid=10866
> ps1='\h;\w \u\4 '
> ps2='. '
> ps4='= '
> pwd=/users/shared/srcs/gdal-trunk
> securitysessionid=81049a0
> shell=/bin/bash
> shellopts=braceexpand;emacs;hashall;histexpand;history;interactive- 
> comments;monitor
> shlvl=2
> term=xterm-color
> term-program=apple-terminal
> term-program-version=133
> uid=503
> user=jspace
> -=gdal
> --cf-user-text-encoding=0x1f6;0;0
> ===================
> pbg42-2;/users/shared/srcs/gdal-trunk jspace4 python -v
> 3 installing zipimport hook
> import zipimport 3 builtin
> 3 installed zipimport hook
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> site.pyc matches /library/frameworks/python.framework/versions/2.5/ 
> lib/python2.5/site.py
> import site 3 precompiled from /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/site.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> os.pyc matches /library/frameworks/python.framework/versions/2.5/lib/ 
> python2.5/os.py
> import os 3 precompiled from /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/os.pyc
> import posix 3 builtin
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> posixpath.pyc matches /library/frameworks/python.framework/versions/ 
> 2.5/lib/python2.5/posixpath.py
> import posixpath 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/posixpath.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> stat.pyc matches /library/frameworks/python.framework/versions/2.5/ 
> lib/python2.5/stat.py
> import stat 3 precompiled from /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/stat.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> userdict.pyc matches /library/frameworks/python.framework/versions/ 
> 2.5/lib/python2.5/userdict.py
> import userdict 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/userdict.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> copy-reg.pyc matches /library/frameworks/python.framework/versions/ 
> 2.5/lib/python2.5/copy-reg.py
> import copy-reg 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/copy-reg.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> types.pyc matches /library/frameworks/python.framework/versions/2.5/ 
> lib/python2.5/types.py
> import types 3 precompiled from /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/types.pyc
> import -types 3 builtin
> 3 zipimport; found 308 names in /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/site-packages/rdflib-2.4.0-py2.5- 
> macosx-10.3-fat.egg
> 3 zipimport; found 31 names in /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/site-packages/geopy-0.93-py2.5.egg
> 3 zipimport; found 44 names in /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/site-packages/simplejson-1.7.3-py2.5- 
> macosx-10.3-fat.egg
> 3 zipimport; found 78 names in /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/site-packages/setuptools-0.6c6-py2.5.egg
> 3 zipimport; found 42 names in /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/site-packages/shapely-1.0b2-py2.5.egg
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> warnings.pyc matches /library/frameworks/python.framework/versions/ 
> 2.5/lib/python2.5/warnings.py
> import warnings 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/warnings.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> linecache.pyc matches /library/frameworks/python.import warnings 3  
> precompiled from /library/frameworks/python.framework/versions/2.5/ 
> lib/python2.5/warnings.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> linecache.pyc matches /library/frameworks/python.framework/versions/ 
> 2.5/lib/python2.5/linecache.py
> import linecache 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/linecache.pyc
> import encodings 3 directory /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/encodings
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> encodings/--init--.pyc matches /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/encodings/--init--.py
> import encodings 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/encodings/--init--.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> codecs.pyc matches /library/frameworks/python.framework/versions/2.5/ 
> lib/python2.5/codecs.py
> import codecs 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/codecs.pyc
> import -codecs 3 builtin
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> encodings/aliases.pyc matches /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/encodings/aliases.py
> import encodings.aliases 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/encodings/aliases.pyc
> 3 /library/frameworks/python.framework/versions/2.5/lib/python2.5/ 
> encodings/ascii.pyc matches /library/frameworks/python.framework/ 
> versions/2.5/lib/python2.5/encodings/ascii.py
> import encodings.ascii 3 precompiled from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/encodings/ascii.pyc
> python 2.5.1 9r251;54869, apr 18 2007, 22;08;040
> [gcc 4.0.1 9apple computer, inc. build 53670] on darwin
> type 'help', 'copyright', 'credits' or 'license' for more information.
> dlopen9'/library/frameworks/python.framework/versions/2.5/lib/ 
> python2.5/lib-dynload/readline.so', 20;
> import readline 3 dynamically loaded from /library/frameworks/ 
> python.framework/versions/2.5/lib/python2.5/lib-dynload/readline.so
> ...
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From sgillies at frii.com  Sun Jan  6 16:33:13 2008
From: sgillies at frii.com (Sean Gillies)
Date: Sun Jan  6 16:33:20 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <96DAE770-BC05-11DC-9E67-000A277A733C@light42.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
	<47803696.9060901@frii.com>
	<96DAE770-BC05-11DC-9E67-000A277A733C@light42.com>
Message-ID: <47814919.6010002@frii.com>

Brian Hamlin wrote:
> 
> On Jan 5, 2008, at 6:01 PM, Sean Gillies wrote:
> 
>> Brian Hamlin wrote:
>>> ...no python...
>>
>> [ setuptools install instructions....]
>>
>> Howard has put a ton of work into it. Should just plain work and build
>> numpy for you as well.
>>
> 
> well, that sounded good, but, no go..
> 
> ===========
> pbg42-2;/users/shared/srcs/gdal-trunk jspace4 sudo python -m
> easy-install 'gdal'
> password;
> searching for gdal
> reading http;//cheeseshop.python.org/pypi/gdal/
> reading http;//www.gdal.org
> reading http;//cheeseshop.python.org/pypi/gdal/1.5.0
> best match; gdal 1.5.0
> downloading
> http;//pypi.python.org/packages/source/g/gdal/gdal-1.5.0.tar.gz3md5=a7fcc5ec9c1719aa7b3aba1cd7c9c1e7
> 
> processing gdal-1.5.0.tar.gz
> running gdal-1.5.0/setup.py -q bdist-egg --dist-dir
> /tmp/easy-install-078ffx/gdal-1.5.0/egg-dist-tmp-ctpbwq
> numpy include
> /library/frameworks/python.framework/versions/2.5/lib/python2.5/site-packages/numpy/core/include
> 

Like William said, easy_install won't work if GDAL is installed in a
non-standard location that isn't also specified in the package's
setup.cfg file. The way my Gdawg buildout
(http://zcologia.com/news/638/replicable-python-geoprocessing-environments/)
works is to fetch the GDAL package from PyPI and then modify the
setup.cfg file. In your case you'll need to either do that, adding your
own particular header locations to the include-dirs parameter and your
library locations to the library-dirs parameter -- or use William's
binaries.

There were other warnings and errors in your post that I didn't
recognize, so I can't guarantee that the above will work. Could be some
other issues as well.

Sean

From JARED.RUBIN at saic.com  Sun Jan  6 17:23:06 2008
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Sun Jan  6 17:23:45 2008
Subject: [gdal-dev] gdal cache in python readarray/writearray
Message-ID: <200801061523.06871.rubinj@nemesis.tucson.saic.com>

Support,
  With the following python code, I don't understand how when I update an 
image file on disk and then open up the dataset again (same file name), that 
I don't get the update. As below. However if I just use the original dataset 
and call ReadAsArray then I do see the update. I would think that the 
FlushCache does as expected...but it seems that calling gdal.Open does not 
get the dirty (updated) data.
thanks
Jared

#!/usr/bin/env python

import sys,os,string,shutil
import gdal
from gdalconst import *

dataset = gdal.Open( sys.argv[1], GA_Update )
outputChip = dataset.GetRasterBand(1).ReadAsArray( 0, 0, 10, 10, 10, 10)
print outputChip
print
outputChip[5] = [100, 100, 100, 100, 100, 100, 100, 100, 100, 100]
print outputChip
print

dataset.GetRasterBand(1).WriteArray(outputChip)
dataset.GetRasterBand(1).FlushCache()

dataset2 = gdal.Open(sys.argv[1], GA_ReadOnly )
outputChip2 = dataset2.GetRasterBand(1).ReadAsArray( 0, 0, 10, 10, 10, 10)
print outputChip2
print

# below works
outputChip3 = dataset.GetRasterBand(1).ReadAsArray
print outputChip

From guilhem.vellut at gmail.com  Mon Jan  7 04:45:58 2008
From: guilhem.vellut at gmail.com (Guilhem Vellut)
Date: Mon Jan  7 04:46:01 2008
Subject: [gdal-dev] ogr2ogr - create an IND file during MapInfo file export
In-Reply-To: <477EB041.8050106@mapgears.com>
References: <43f4b6ee0801040915k5f9badf0vc27b073d7982a27c@mail.gmail.com>
	<477E6BB2.3070007@pobox.com> <477EB041.8050106@mapgears.com>
Message-ID: <43f4b6ee0801070145n3ec43cdav9349cc0ce5458bc7@mail.gmail.com>

Hello,
Thanks for your help. It worked! I actually had to use tab2tab (from
the MITAB distribution) instead of ogr2ogr in the second step but the
procedure does what I want.
guilhem

On Jan 4, 2008 11:16 PM, Daniel Morissette <dmorissette@mapgears.com> wrote:
> Frank Warmerdam wrote:
> >
> > I'm sorry, but ogr2ogr does not appear to support creating .ind files
> > for mapinfo datasets.  The capability does exist in the underlying MITAB
> > library so if you wanted it badly enough you might be able to modify the
> > mapinfo driver, or perhaps build a custom mitab utility to do this.
> >
>
> If you need to do this only once for a few files, then you could convert
> the SHP to MIF/MID, then edit the .MIF header (it's a text file) to add
> an INDEX line in the header (just above the COLUMNS line) listing the
> numbers of all columns to index. Then rerun ogr2ogr to convert the
> MIF/MID dataset to TAB and the specified columns will be indexed.
>
> For more info on the MIF File header format, see:
> http://www.directionsmag.com/mapinfo-l/mif/AppJ.pdf
>
> Daniel
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From dron at ak4719.spb.edu  Mon Jan  7 07:13:17 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Mon Jan  7 07:19:03 2008
Subject: [gdal-dev] Motion : Adopt RFC-19 : Safer memory allocation in GDAL
In-Reply-To: <200801042028.12392.even.rouault@mines-paris.org>
References: <200801042028.12392.even.rouault@mines-paris.org>
Message-ID: <20080107121317.GA3423@ak4719.spb.edu>

On Fri, Jan 04, 2008 at 08:28:11PM +0100, Even Rouault wrote:
> I propose to start a vote for the adoption of RFC-19 - Safer memory
> allocation in GDAL - if there are no objections.

I am +1 on http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc

Best refards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From dron at ak4719.spb.edu  Mon Jan  7 08:52:02 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Mon Jan  7 09:04:03 2008
Subject: [gdal-dev] Issue in Golden Software Surfer 7 format
In-Reply-To: <d82dce9d0801041429g6849c6a0g221ac3d36cc08bbe@mail.gmail.com>
References: <d82dce9d0801041429g6849c6a0g221ac3d36cc08bbe@mail.gmail.com>
Message-ID: <20080107135202.GA3810@ak4719.spb.edu>

On Fri, Jan 04, 2008 at 02:29:51PM -0800, Reed Copsey, Jr. wrote:
> Last year, a changeset was submitted which fixed the golden software 6
> file formats (10814), but unfortunately it wasn't applied to the
> surfer 7 file format which has the exact same issue.
> 
> This can be fixed by replacing the GetGeoTransform method in
> frmts\gsg\gs7bgdataset.cpp with the attached snippet.
> 
> I've also submitted this as ticket #2132

That should be fixed in 1.5 and trunk branches now.

Thanks for report,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From dmorissette at mapgears.com  Mon Jan  7 09:46:45 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jan  7 09:46:47 2008
Subject: [gdal-dev] Motion : Adopt RFC-19 : Safer memory allocation in GDAL
In-Reply-To: <200801042028.12392.even.rouault@mines-paris.org>
References: <200801042028.12392.even.rouault@mines-paris.org>
Message-ID: <47823B55.8010909@mapgears.com>

Even Rouault wrote:
> Hi all,
> 
> I propose to start a vote for the adoption of RFC-19 - Safer memory allocation 
> in GDAL - if there are no objections.
> 

+1 on http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From jmckenna at dmsolutions.ca  Mon Jan  7 10:23:53 2008
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Mon Jan  7 10:23:55 2008
Subject: [gdal-dev] Motion : Adopt RFC-19 : Safer memory allocation in GDAL
In-Reply-To: <47823B55.8010909@mapgears.com>
References: <200801042028.12392.even.rouault@mines-paris.org>
	<47823B55.8010909@mapgears.com>
Message-ID: <47824409.70800@dmsolutions.ca>

+1 here.  After reading the RFC I realize that I may have hit this issue 
recently: a mapserver mapfile with over 50+ WMS layers would crash 
mapserv on Windows consistently, yet had no problems on unix ever.  I 
never could narrow it down to one problem layer, but it seemed to only 
occur when I had many WMS layers.  Maybe this rfc is related, not sure. 
  Anyway thanks for this addition.

-jeff



Daniel Morissette wrote:
> Even Rouault wrote:
>> Hi all,
>>
>> I propose to start a vote for the adoption of RFC-19 - Safer memory 
>> allocation in GDAL - if there are no objections.
>>

From Chris.Barker at noaa.gov  Mon Jan  7 11:12:42 2008
From: Chris.Barker at noaa.gov (Chris Barker)
Date: Mon Jan  7 11:12:59 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <47803696.9060901@frii.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
	<47803696.9060901@frii.com>
Message-ID: <47824F7A.50704@noaa.gov>

Hi folks,

coming a bit late to the game, but...

> Brian Hamlin wrote:
>> The problem
>> was, numpy wanted to build both i386 and PPC architectures.

Why was this a problem? The Framework python is universal, and is set up 
to build universal extensions -- for the most part, that's what you 
want, and it certainly won't hurt anything, unless you are VERY short of 
disk space!

>> I jiggled
>> and rattled - I honestly dont remember exactly, and built just the PPC
>> architecture.

Again, why? In any case, it looks like you've gone through a bunch of 
hassle to create something that is now making things difficult for you.

I'd go back and either install the binary on pythonmac.org, or build 
from source with the default settings to get a universal numpy to go 
with your universal python. Then try building GDAL again.

Or, even easier, just use William's installers.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From eschenbe at psc.edu  Mon Jan  7 11:29:17 2008
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Mon Jan  7 11:29:19 2008
Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
Message-ID: <4782535D.4060600@psc.edu>

Any idea why I cannot convert a shapefile to the Lambert azimuthal equal area 
projection? I tried

ogr2ogr -t_srs EPSG:9820 -f "ESRI Shapefile" destination.shp source.shp

and saw the message

ERROR 6:
EPSG PCS/GCS code 9820 not found in EPSG support files.  Is this a valid
EPSG coordinate system?
Failed to process SRS definition: EPSG:9820

I'm using GDAL 1.4.2 on Fedora core 6.

TIA!
Kent
Pittsburgh Supercomputing Center
From ed at topozone.com  Mon Jan  7 11:48:05 2008
From: ed at topozone.com (Ed McNierney)
Date: Mon Jan  7 11:48:09 2008
Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
In-Reply-To: <4782535D.4060600@psc.edu>
References: <4782535D.4060600@psc.edu>
Message-ID: <4BF377919225F449BB097CB76FFE9BC801988793@ptolemy.topozone.com>

Kent -

The obvious question would be, "And do you think code 9820 actually exists in your EPSG file?".  There is no such projection code in my EPSG table from PROJ.

What projection definition do you think EPSG:9820 describes?

     - Ed

Ed McNierney
Chief Mapmaker
Demand Media / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA? 01863
ed@topozone.com
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Kent Eschenberg
Sent: Monday, January 07, 2008 11:29 AM
To: GDAL
Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area

Any idea why I cannot convert a shapefile to the Lambert azimuthal equal area 
projection? I tried

ogr2ogr -t_srs EPSG:9820 -f "ESRI Shapefile" destination.shp source.shp

and saw the message

ERROR 6:
EPSG PCS/GCS code 9820 not found in EPSG support files.  Is this a valid
EPSG coordinate system?
Failed to process SRS definition: EPSG:9820

I'm using GDAL 1.4.2 on Fedora core 6.

TIA!
Kent
Pittsburgh Supercomputing Center
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From retsios at itc.nl  Mon Jan  7 12:20:45 2008
From: retsios at itc.nl (Bas Retsios)
Date: Mon Jan  7 12:35:41 2008
Subject: [gdal-dev] netCDF to GRIB 1
In-Reply-To: <1D4709F5DABD944E926E1F5C1AE5ABB807327E@server.office.xitech.com.au>
References: <1D4709F5DABD944E926E1F5C1AE5ABB807327E@server.office.xitech.com.au>
Message-ID: <47825F6D.6060203@itc.nl>

Hello,

The GDAL-GRIB driver mentioned will read GRIB files (not write them), 
therefore it can not be directly used for converting netCDF to GRIB files.
However, this information might help:
For saving time when I was working on this driver, I implemented it as a 
"wrapper" around a full GRIB library written by Mr. Arthur Taylor.
The SVN link below contains both the "wrapper" that gives GDAL 
"GRIB-read" capabilities (which is file gribdataset.cpp), and the full 
GRIB library (which is all other files).
The GRIB library can both read and write GRIB files, but I only called 
the functions for reading (because that is what I was interested in).
With some effort you would be able to extend gribdataset.cpp so that it 
can also write back a GRIB file. This link 
http://www.gdal.org/gdal_drivertut.html describes how to proceed, at 
section "File Creation".

Cheers,

Bas.

-- 
Ir. V. (Bas) Retsios
Software Developer
Geo-information Processing Department
International Institute for Geo-information Science and Earth Observation (ITC)
P.O. Box 6,  7500 AA Enschede, The Netherlands
Phone +31 (0)53 4874 573, telefax +31 (0)53 4874 335
E-mail retsios@itc.nl, Internet http://www.itc.nl



John L. Craddock wrote:

>Many thanks for your help Mateusz, I will give it a try.
>Regards
>John C
>
>  
>
>>-----Original Message-----
>>From: Mateusz Loskot [mailto:mateusz@loskot.net]
>>Sent: 02 January 2008 06:43
>>To: John L. Craddock
>>Cc: gdal
>>Subject: Re: [gdal-dev] netCDF to GRIB 1
>>
>>
>>Mateusz Loskot wrote:
>>    
>>
>>>John L. Craddock wrote:
>>>      
>>>
>>>>Hello all,
>>>>Been scanning the ether for windows code to convert ocean 
>>>>        
>>>>
>>current files
>>    
>>
>>>>in netCDF format to GRIB version 1. I know about GRADS and 
>>>>        
>>>>
>>the lats4d
>>    
>>
>>>>script. Thought I would ask here if anyone knows of a less 
>>>>        
>>>>
>>circuitous
>>    
>>
>>>>way of converting. I see GDAL reads netCDF. Is there a 
>>>>        
>>>>
>>driver to output
>>    
>>
>>>>GRIB?
>>>>        
>>>>
>>>John,
>>>
>>>There is GRIB driver in the GDAL spike repository:
>>>
>>>https://svn.osgeo.org/gdal/spike/grib/
>>>
>>>You may try to checkout it and build into GDAL.
>>>      
>>>
>>BTW, here you can find short instructions how to build GDAl with GRIB
>>support (the SVN URL given there is not active anymore, use 
>>the new one
>>above):
>>
>>http://lists.osgeo.org/pipermail/gdal-dev/2007-February/011663.html
>>
>>-- 
>>Mateusz Loskot
>>http://mateusz.loskot.net
>>
>>    
>>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080107/41293e1a/attachment.html
From warmerdam at pobox.com  Mon Jan  7 12:57:45 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan  7 12:58:02 2008
Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
In-Reply-To: <4782535D.4060600@psc.edu>
References: <4782535D.4060600@psc.edu>
Message-ID: <47826819.4040602@pobox.com>

Kent Eschenberg wrote:
> Any idea why I cannot convert a shapefile to the Lambert azimuthal equal 
> area projection? I tried
> 
> ogr2ogr -t_srs EPSG:9820 -f "ESRI Shapefile" destination.shp source.shp
> 
> and saw the message
> 
> ERROR 6:
> EPSG PCS/GCS code 9820 not found in EPSG support files.  Is this a valid
> EPSG coordinate system?
> Failed to process SRS definition: EPSG:9820
> 
> I'm using GDAL 1.4.2 on Fedora core 6.

Kent,

EPSG 9820 is the identity of a projection method (ie. algorithm), but
to use it you also need to know the parameters to the algorithm (things
like central meridian, false easting, scale).  If you want to specify
things by EPSG code you would need to find a projected coordinate system
using LAEA and use that PCS's code.

What coordinate system do you want?

If you want to use LAEA with custom parameters, you can define it using
PROJ.4 format, or a WKT file.  In WKT you might use something like:

PROJCS["unnamed",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563],
             TOWGS84[0,0,0,0,0,0,0]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",0],
     PARAMETER["longitude_of_center",0],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0]]

Or in PROJ.4:

    +proj=laea +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Allan.Meek at drdc-rddc.gc.ca  Mon Jan  7 12:58:58 2008
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Mon Jan  7 12:59:01 2008
Subject: [gdal-dev] Java SWIG Bindings
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E0B241C@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi,

I'm currently trying to get GDAL 1.4.4 working with Java, but I've run
into problems in both Linux and Windows. I have been following the
instructions I found at
http://lists.osgeo.org/pipermail/gdal-dev/2006-February/007867.html.

In Linux, everything looks fine right up to the point where I try to run
the gdalinfo or TESTgdal programs:

  (from {...}/swig/java/apps)
  java -cp ../gdal.jar -Djava.library.path=../.libs/ gdalinfo

  Exception in thread "main" java.lang.NoClassDefFoundError: gdalinfo

If I remove "-cp ../gdal.jar", I seem to get farther, but it all crashes
at the first call to a GDAL function, gdal.AllRegister():

  java -Djava.library.path=../.libs/ gdalinfo

  Exception in thread "main" java.lang.NoClassDefFoundError: 
  org/gdal/gdal/gdal at gdalinfo.main(gdalinfo.java:64)

In Windows, I get stuck at step 2: when I run "nmake -f makefile.vc", I
get the following error:

  {...}
  fatal error 1073: don't know how to make 'ogr_wrap.obj.'
  Stop.
  {...}

Does anybody have any advice to help me get around these problems?

Thanks,
Allan

From eschenbe at psc.edu  Mon Jan  7 13:56:52 2008
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Mon Jan  7 13:56:54 2008
Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC801988793@ptolemy.topozone.com>
References: <4782535D.4060600@psc.edu>
	<4BF377919225F449BB097CB76FFE9BC801988793@ptolemy.topozone.com>
Message-ID: <478275F4.4010008@psc.edu>

Hi Ed,

Thanks! Here's the sequence of pages that led to the 9820 code:

www.gdal.org
www.gdal.org/ogr
www.gdal.org/ogr/osr_tutorial.html
www.remotesensing.org/geotiff/proj_list
www.remotesensing.org/geotiff/proj_list/lambert_azimuthal_equal_area.html

That last page lists the EPSG code as 9820. I'm trying I'm trying to convert 
currently uses the WGS84 projection.

What file do you mean when you refer to my "EPSG file"? Currently I don't have 
such a file; that is what I am trying to create.

All advice appreciated!
Kent

Ed McNierney wrote:
 > Kent -
 >
 > The obvious question would be, "And do you think code 9820 actually exists 
in your EPSG file?".  There is no such projection code in my EPSG table from PROJ.
 >
 > What projection definition do you think EPSG:9820 describes?
 >
 >      - Ed
 >
 > Ed McNierney
 > Chief Mapmaker
 > Demand Media / TopoZone.com
 > 73 Princeton Street, Suite 305
 > North Chelmsford, MA  01863
 > ed@topozone.com
 > Phone: +1 (978) 251-4242
 > Fax: +1 (978) 251-1396
 >
 > -----Original Message-----
 > From: gdal-dev-bounces@lists.osgeo.org 
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Kent Eschenberg
 > Sent: Monday, January 07, 2008 11:29 AM
 > To: GDAL
 > Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
 >
 > Any idea why I cannot convert a shapefile to the Lambert azimuthal equal area
 > projection? I tried
 >
 > ogr2ogr -t_srs EPSG:9820 -f "ESRI Shapefile" destination.shp source.shp
 >
 > and saw the message
 >
 > ERROR 6:
 > EPSG PCS/GCS code 9820 not found in EPSG support files.  Is this a valid
 > EPSG coordinate system?
 > Failed to process SRS definition: EPSG:9820
 >
 > I'm using GDAL 1.4.2 on Fedora core 6.
 >
 > TIA!
 > Kent
 > Pittsburgh Supercomputing Center
From nikos.alexandris at felis.uni-freiburg.de  Mon Jan  7 14:16:52 2008
From: nikos.alexandris at felis.uni-freiburg.de (nikos.alexandris@felis.uni-freiburg.de)
Date: Mon Jan  7 14:16:55 2008
Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
In-Reply-To: <478275F4.4010008@psc.edu>
References: <4782535D.4060600@psc.edu>
	<4BF377919225F449BB097CB76FFE9BC801988793@ptolemy.topozone.com>
	<478275F4.4010008@psc.edu>
Message-ID: <web-95430757@uni-freiburg.de>

Hi!

In my ubuntubox the "epsg" file, in which all epsg codes
are described, is under /usr/share/proj/

.

On Mon, 07 Jan 2008 13:56:52 -0500
 Kent Eschenberg <eschenbe@psc.edu> wrote:
> Hi Ed,
> 
> Thanks! Here's the sequence of pages that led to the 9820
> code:
> 
> www.gdal.org
> www.gdal.org/ogr
> www.gdal.org/ogr/osr_tutorial.html
> www.remotesensing.org/geotiff/proj_list
>
www.remotesensing.org/geotiff/proj_list/lambert_azimuthal_equal_area.html
> 
> That last page lists the EPSG code as 9820. I'm trying
> I'm trying to convert currently uses the WGS84
> projection.
> 
> What file do you mean when you refer to my "EPSG file"?
> Currently I don't have such a file; that is what I am
> trying to create.
> 
> All advice appreciated!
> Kent
> 
> Ed McNierney wrote:
>  > Kent -
>  >
>  > The obvious question would be, "And do you think code
> 9820 actually exists 
> in your EPSG file?".  There is no such projection code in
> my EPSG table from PROJ.
>  >
>  > What projection definition do you think EPSG:9820
> describes?
>  >
>  >      - Ed
>  >
>  > Ed McNierney
>  > Chief Mapmaker
>  > Demand Media / TopoZone.com
>  > 73 Princeton Street, Suite 305
>  > North Chelmsford, MA  01863
>  > ed@topozone.com
>  > Phone: +1 (978) 251-4242
>  > Fax: +1 (978) 251-1396
>  >
>  > -----Original Message-----
>  > From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of
> Kent Eschenberg
>  > Sent: Monday, January 07, 2008 11:29 AM
>  > To: GDAL
>  > Subject: [gdal-dev] Shapefile to Lambert Azimuthal
> Equal Area
>  >
>  > Any idea why I cannot convert a shapefile to the
> Lambert azimuthal equal area
>  > projection? I tried
>  >
>  > ogr2ogr -t_srs EPSG:9820 -f "ESRI Shapefile"
> destination.shp source.shp
>  >
>  > and saw the message
>  >
>  > ERROR 6:
>  > EPSG PCS/GCS code 9820 not found in EPSG support
> files.  Is this a valid
>  > EPSG coordinate system?
>  > Failed to process SRS definition: EPSG:9820
>  >
>  > I'm using GDAL 1.4.2 on Fedora core 6.
>  >
>  > TIA!
>  > Kent
>  > Pittsburgh Supercomputing Center
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

                    
                        .
         Nikos Alexandris - Ph.D. Candidate
                        .
            Department of Remote Sensing
                       and
            Landscape Information Systems
                     (FeLIS)
                        .
      Faculty of Forestry and Natural Environment
          Albert-Ludwigs-University Freiburg
                        .
            Tel.  +49 (0) 761 203 3697
            Fax.  +49 (0) 761 203 3701
             Skype: Nikos.Alexandris
                        .
           Address: Tennenbacher str. 4
              D-79106 Freiburg i. Br.
                     Germany
                        .
From ed at topozone.com  Mon Jan  7 14:17:05 2008
From: ed at topozone.com (Ed McNierney)
Date: Mon Jan  7 14:17:09 2008
Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
In-Reply-To: <478275F4.4010008@psc.edu>
References: <4782535D.4060600@psc.edu>
	<4BF377919225F449BB097CB76FFE9BC801988793@ptolemy.topozone.com>
	<478275F4.4010008@psc.edu>
Message-ID: <4BF377919225F449BB097CB76FFE9BC801988795@ptolemy.topozone.com>

Kent -

Frank's response is helpful here - I knew the 98xx codes were familiar but the light bulb didn't go on in my head.

If you have the PROJ library installed, you should have an EPSG file.  It is normally in /usr/local/share/proj.

The EPSG system is a set of numeric codes for standard geographic mathematical objects.  Those codes are used by PROJ to specify a specific projection, and act as both (a) a form of standardized shorthand for a specific projection and (b) a way to avoid typos, ambiguity, or confusion in describing a projection.

Not all EPSG code values refer to specific projections; some refer to families of projections, or projection types.  In your case, code 9820 refers to the entire class of all possible Lambert Azimuthal Equal Area (LAEA) projections.  There are an infinite number of LAEA projections; a specific projection is defined by the class/type of projection (LAEA in this example) and the particular parameters used to define the exact projection to be used.  Frank described, for example, one sort of LAEA projection you might want, centered on latitude=0, longitude=0.  An LAEA projection centered on latitude=0, longitude=90 is a different projection although it belongs to the same class.

If you are to use an EPSG code to describe a projection, you need to use one of the numeric codes found in your /usr/local/share/proj/epsg file.  Not all possible projections are described; only standard and commonly-used ones.

You don't have to use an EPSG code, and if you're not using a standard and well-known projection (not projection class) then there's no need to either look for or invent one.  You can instead describe the projection you want parametrically, using either the WKT or PROJ formats Frank described.  I usually like to use the PROJ format since it's a bit less verbose, but either will work.

	- Ed

Ed McNierney
Chief Mapmaker
Demand Media / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA? 01863
ed@topozone.com
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396

-----Original Message-----
From: Kent Eschenberg [mailto:eschenbe@psc.edu] 
Sent: Monday, January 07, 2008 1:57 PM
To: Ed McNierney
Cc: GDAL
Subject: Re: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area

Hi Ed,

Thanks! Here's the sequence of pages that led to the 9820 code:

www.gdal.org
www.gdal.org/ogr
www.gdal.org/ogr/osr_tutorial.html
www.remotesensing.org/geotiff/proj_list
www.remotesensing.org/geotiff/proj_list/lambert_azimuthal_equal_area.html

That last page lists the EPSG code as 9820. I'm trying I'm trying to convert 
currently uses the WGS84 projection.

What file do you mean when you refer to my "EPSG file"? Currently I don't have 
such a file; that is what I am trying to create.

All advice appreciated!
Kent

Ed McNierney wrote:
 > Kent -
 >
 > The obvious question would be, "And do you think code 9820 actually exists 
in your EPSG file?".  There is no such projection code in my EPSG table from PROJ.
 >
 > What projection definition do you think EPSG:9820 describes?
 >
 >      - Ed
 >
 > Ed McNierney
 > Chief Mapmaker
 > Demand Media / TopoZone.com
 > 73 Princeton Street, Suite 305
 > North Chelmsford, MA  01863
 > ed@topozone.com
 > Phone: +1 (978) 251-4242
 > Fax: +1 (978) 251-1396
 >
 > -----Original Message-----
 > From: gdal-dev-bounces@lists.osgeo.org 
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Kent Eschenberg
 > Sent: Monday, January 07, 2008 11:29 AM
 > To: GDAL
 > Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
 >
 > Any idea why I cannot convert a shapefile to the Lambert azimuthal equal area
 > projection? I tried
 >
 > ogr2ogr -t_srs EPSG:9820 -f "ESRI Shapefile" destination.shp source.shp
 >
 > and saw the message
 >
 > ERROR 6:
 > EPSG PCS/GCS code 9820 not found in EPSG support files.  Is this a valid
 > EPSG coordinate system?
 > Failed to process SRS definition: EPSG:9820
 >
 > I'm using GDAL 1.4.2 on Fedora core 6.
 >
 > TIA!
 > Kent
 > Pittsburgh Supercomputing Center
From collinsb at mitre.org  Mon Jan  7 15:05:48 2008
From: collinsb at mitre.org (Collins, Benjamin)
Date: Mon Jan  7 15:05:58 2008
Subject: [gdal-dev] Java SWIG Bindings
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E0B241C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E0B241C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <8D27E2CDAF11D34F97E7445BCCCDB92C023572D5@IMCSRV1.MITRE.ORG>

>-----Original Message-----
>From: gdal-dev-bounces@lists.osgeo.org 
>[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Meek, 
>Allan (Contractor)
>Sent: Monday, January 07, 2008 12:59 PM
>To: gdal-dev@lists.osgeo.org
>Subject: [gdal-dev] Java SWIG Bindings
>
>  (from {...}/swig/java/apps)
>  java -cp ../gdal.jar -Djava.library.path=../.libs/ gdalinfo
>
>  Exception in thread "main" java.lang.NoClassDefFoundError: gdalinfo
You may need to specify -cp .:../gdal.jar to get java to look at your
local folder for class files.

>
>If I remove "-cp ../gdal.jar", ...
Please don't do this.

>at the first call to a GDAL function, gdal.AllRegister():
>
>  java -Djava.library.path=../.libs/ gdalinfo
>
>  Exception in thread "main" java.lang.NoClassDefFoundError: 
>  org/gdal/gdal/gdal at gdalinfo.main(gdalinfo.java:64)
This is because you removed the reference to the java gdal classes by
removing ../gdal.jar from the classpath.

>
>In Windows, I get stuck at step 2: when I run "nmake -f makefile.vc",
I
>get the following error:
>
>  {...}
>  fatal error 1073: don't know how to make 'ogr_wrap.obj.'
>  Stop.
>  {...}
>
This is because you're running the command from gdal/swig/java.  Run
"nmake -f makefile.vc java" from gdal/swig.

--
Ben
From bclay at ball.com  Mon Jan  7 15:28:22 2008
From: bclay at ball.com (Clay, Bruce)
Date: Mon Jan  7 15:28:26 2008
Subject: [gdal-dev] more OGR problems
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFD4F@daytonmsg2k3.AERO.BALL.COM>

I am trying several different things to get my application to read data
from an Oracle Spatial table and still can not come up with a solid
solution.

 

I have tried ODBC but can not get it to connect to the table.  My
application usually hangs on the ogr.open() statement.  I have tried
"ODBC:username/password@instanceName", but I get an error that the
driver is not specified.  I have also tried "ODBC:{Microsoft ODBC for
Oracle};Server=instance;UID=userName;PWD=password;". This one hangs as
does any others when I specify a driver. 

 

I have tried OCI and can get connected but it only shows a few tables in
the whole database.  It only shows those with SDO metadata set.

 

I can retrieve data from the table with the exception of date values.  I
can use the DateTime field in the query itself and it seems to work ok
but I can not return the actual date.

 

I can get the index to the "SHAPE" and IsFieldSet returns true but
geometry = feature.GetGeometryDef() always returns NULL.

 

I can connect using the SDE driver but I get an odd error when I issue
the same SQL that works with the OCI driver.  The error is "Could not
execute SQL statement\nSQL: Syntax error, 14 extra tokens".  When I use
the SDE driver I see all of the tables and all of the fields in the
tables.

 

 

For some reason I can not use the debugger to step into any of the GDAL
/ OGR code.  I don't know if it is because of the managed vs. unmanaged
code since my app is written in C# or if it is the SWIG bindings.
Either way I am flying blind.

 

I keep hoping if that someone out there has run across some of these
problems and can give me a clue or something to try.  I would like to
ditch C# but that is not an option at this point.

 

Bruce

 

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080107/61152817/attachment.html
From warmerdam at pobox.com  Mon Jan  7 15:46:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan  7 15:46:20 2008
Subject: [gdal-dev] more OGR problems
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFD4F@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFD4F@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <47828F88.4080103@pobox.com>

Clay, Bruce wrote:
> I am trying several different things to get my application to read data 
> from an Oracle Spatial table and still can not come up with a solid 
> solution.

Bruce,

This is an oracle spatial table intended to be accessed through SDE,
is that right?

> I have tried ODBC but can not get it to connect to the table.  My 
> application usually hangs on the ogr.open() statement.

This may be because OGR is attempting to create layer objects from all
tables in the database.  This can be very very slow for complex
databases.

 >   I have tried
> ?ODBC:username/password@instanceName?, but I get an error that the 
> driver is not specified.

I'm not sure where that error is coming from.  Is 'instanceName' a
legitimate ODBC DSN?

 >   I have also tried ?ODBC:{Microsoft ODBC for
> Oracle};Server=instance;UID=userName;PWD=password;". This one hangs as 
> does any others when I specify a driver.

I don't think I've ever tried something like this.  If it is hanging,
it may once again be the "too many tables to enumerate" problem.

> I have tried OCI and can get connected but it only shows a few tables in 
> the whole database.  It only shows those with SDO metadata set.

This is as intended, though I think you should be able to specify a
specific table in the OCI connection string and just access that even if
it doesn't have sdo metadata.  I'm not really sure about this though.

> I can retrieve data from the table with the exception of date values.  I 
> can use the DateTime field in the query itself and it seems to work ok 
> but I can not return the actual date.

I'm no sql guru, but if there is some way of casting the field
contents to string in an SQL statement that might work.

> I can get the index to the ?SHAPE? and IsFieldSet returns true but 
> geometry = feature.GetGeometryDef() always returns NULL.

Assuming that shape is an SDE blob geometry instead of an
oracle spatial type geometry object, this is what I would
expect.

> I can connect using the SDE driver but I get an odd error when I issue 
> the same SQL that works with the OCI driver.  The error is ?Could not 
> execute SQL statement\nSQL: Syntax error, 14 extra tokens?.  When I use 
> the SDE driver I see all of the tables and all of the fields in the tables.

I'm surprised.  "14 extra tokens" does not sound like something the
OGR SQL parser would report, and the OGR SDE driver does not have a
custom SQL parser - just the generic OGR parser.  On the other hand,
SQL statements against OCI are passed directly through to Oracle.

So I'm confused on this one.

> I keep hoping if that someone out there has run across some of these 
> problems and can give me a clue or something to try.  I would like to 
> ditch C# but that is not an option at this point.

If you are wanting to access SDE managed spatial tables in oracle,
then I believe you should be doing so through the SDE driver for
maximum correctness.  If there are specific bugs in the SDE driver
we can try a few things to try and fix them.

I feel for your frustration, but unfortunately, SDE on Oracle is not something
that I have conveniently available for testing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mchapman at texelinc.com  Mon Jan  7 16:36:03 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Mon Jan  7 16:36:08 2008
Subject: [gdal-dev] more OGR problems
In-Reply-To: <47828F88.4080103@pobox.com>
References: <C482FF98AE985A47B8C982FD429C9E34FEFD4F@daytonmsg2k3.AERO.BALL.COM>
	<47828F88.4080103@pobox.com>
Message-ID: <001201c85175$4e2d6340$ea8829c0$@com>

FYI, 

I've used the GDAL to connect to Oracle directly and through SDE.  I
connected using the following connection string:

Oracle Direct:

sConnectString << "OCI:" << sUsername.GetBuffer();
sConnectString << "/" << sPassword.GetBuffer();
sConnectString << "@" << sHostAddress.GetBuffer();

SDE on top of Oracle:

CString sNoCaseCompare = m_sHostAddress;
sNoCaseCompare.MakeLower();
if (sNoCaseCompare == _T("localhost") || sNoCaseCompare == _T("127.0.0.1"))
	throw "Invalid Host Address.  Please enter a valid server name or
UNC.";
sConnectString << "SDE:" << m_sHostAddress.GetBuffer(0); 
sConnectString << "," << m_nHostPort;  
sConnectString << "," << m_sCatalog.GetBuffer(0);  
sConnectString << "," << m_sUserName.GetBuffer(0);  
sConnectString << "," << m_sPassword.GetBuffer(0);  

Please not that SDE does not like anything but UNC addresses on windows.

Hope that is of some help. 

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Monday, January 07, 2008 1:46 PM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] more OGR problems

Clay, Bruce wrote:
> I am trying several different things to get my application to read data 
> from an Oracle Spatial table and still can not come up with a solid 
> solution.

Bruce,

This is an oracle spatial table intended to be accessed through SDE,
is that right?

> I have tried ODBC but can not get it to connect to the table.  My 
> application usually hangs on the ogr.open() statement.

This may be because OGR is attempting to create layer objects from all
tables in the database.  This can be very very slow for complex
databases.

 >   I have tried
> "ODBC:username/password@instanceName", but I get an error that the 
> driver is not specified.

I'm not sure where that error is coming from.  Is 'instanceName' a
legitimate ODBC DSN?

 >   I have also tried "ODBC:{Microsoft ODBC for
> Oracle};Server=instance;UID=userName;PWD=password;". This one hangs as 
> does any others when I specify a driver.

I don't think I've ever tried something like this.  If it is hanging,
it may once again be the "too many tables to enumerate" problem.

> I have tried OCI and can get connected but it only shows a few tables in 
> the whole database.  It only shows those with SDO metadata set.

This is as intended, though I think you should be able to specify a
specific table in the OCI connection string and just access that even if
it doesn't have sdo metadata.  I'm not really sure about this though.

> I can retrieve data from the table with the exception of date values.  I 
> can use the DateTime field in the query itself and it seems to work ok 
> but I can not return the actual date.

I'm no sql guru, but if there is some way of casting the field
contents to string in an SQL statement that might work.

> I can get the index to the "SHAPE" and IsFieldSet returns true but 
> geometry = feature.GetGeometryDef() always returns NULL.

Assuming that shape is an SDE blob geometry instead of an
oracle spatial type geometry object, this is what I would
expect.

> I can connect using the SDE driver but I get an odd error when I issue 
> the same SQL that works with the OCI driver.  The error is "Could not 
> execute SQL statement\nSQL: Syntax error, 14 extra tokens".  When I use 
> the SDE driver I see all of the tables and all of the fields in the
tables.

I'm surprised.  "14 extra tokens" does not sound like something the
OGR SQL parser would report, and the OGR SDE driver does not have a
custom SQL parser - just the generic OGR parser.  On the other hand,
SQL statements against OCI are passed directly through to Oracle.

So I'm confused on this one.

> I keep hoping if that someone out there has run across some of these 
> problems and can give me a clue or something to try.  I would like to 
> ditch C# but that is not an option at this point.

If you are wanting to access SDE managed spatial tables in oracle,
then I believe you should be doing so through the SDE driver for
maximum correctness.  If there are specific bugs in the SDE driver
we can try a few things to try and fix them.

I feel for your frustration, but unfortunately, SDE on Oracle is not
something
that I have conveniently available for testing.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mchapman at texelinc.com  Mon Jan  7 16:39:46 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Mon Jan  7 16:39:51 2008
Subject: [gdal-dev] more OGR problems
In-Reply-To: <001201c85175$4e2d6340$ea8829c0$@com>
References: <C482FF98AE985A47B8C982FD429C9E34FEFD4F@daytonmsg2k3.AERO.BALL.COM>	<47828F88.4080103@pobox.com>
	<001201c85175$4e2d6340$ea8829c0$@com>
Message-ID: <001301c85175$d3307190$799154b0$@com>

Sorry that last email lost the code formatting:  here it is formatted...i
hope. :)

FYI, 

I've used the GDAL to connect to Oracle directly and through SDE.  I
connected using the following connection string:

Oracle Direct:

sConnectString << "OCI:" << sUsername.GetBuffer(); 
sConnectString << "/" << sPassword.GetBuffer(); 
sConnectString << "@" << sHostAddress.GetBuffer();

SDE on top of Oracle:

CString sNoCaseCompare = m_sHostAddress; 
sNoCaseCompare.MakeLower(); 

if (sNoCaseCompare == _T("localhost") || sNoCaseCompare == _T("127.0.0.1"))
	throw "Invalid Host Address.  Please enter a valid server name or
UNC.";

sConnectString << "SDE:" << m_sHostAddress.GetBuffer(0);
sConnectString << "," << m_nHostPort;
sConnectString << "," << m_sCatalog.GetBuffer(0);
sConnectString << "," << m_sUserName.GetBuffer(0);
sConnectString << "," << m_sPassword.GetBuffer(0);  

Please not that SDE does not like anything but UNC addresses on windows.

Hope that is of some help.

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Martin Chapman
Sent: Monday, January 07, 2008 2:36 PM
To: 'Frank Warmerdam'; 'Clay, Bruce'
Cc: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] more OGR problems

FYI, 

I've used the GDAL to connect to Oracle directly and through SDE.  I
connected using the following connection string:

Oracle Direct:

sConnectString << "OCI:" << sUsername.GetBuffer();
sConnectString << "/" << sPassword.GetBuffer();
sConnectString << "@" << sHostAddress.GetBuffer();

SDE on top of Oracle:

CString sNoCaseCompare = m_sHostAddress;
sNoCaseCompare.MakeLower();
if (sNoCaseCompare == _T("localhost") || sNoCaseCompare == _T("127.0.0.1"))
	throw "Invalid Host Address.  Please enter a valid server name or
UNC.";
sConnectString << "SDE:" << m_sHostAddress.GetBuffer(0); 
sConnectString << "," << m_nHostPort;  
sConnectString << "," << m_sCatalog.GetBuffer(0);  
sConnectString << "," << m_sUserName.GetBuffer(0);  
sConnectString << "," << m_sPassword.GetBuffer(0);  

Please not that SDE does not like anything but UNC addresses on windows.

Hope that is of some help. 

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Monday, January 07, 2008 1:46 PM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] more OGR problems

Clay, Bruce wrote:
> I am trying several different things to get my application to read data 
> from an Oracle Spatial table and still can not come up with a solid 
> solution.

Bruce,

This is an oracle spatial table intended to be accessed through SDE,
is that right?

> I have tried ODBC but can not get it to connect to the table.  My 
> application usually hangs on the ogr.open() statement.

This may be because OGR is attempting to create layer objects from all
tables in the database.  This can be very very slow for complex
databases.

 >   I have tried
> "ODBC:username/password@instanceName", but I get an error that the 
> driver is not specified.

I'm not sure where that error is coming from.  Is 'instanceName' a
legitimate ODBC DSN?

 >   I have also tried "ODBC:{Microsoft ODBC for
> Oracle};Server=instance;UID=userName;PWD=password;". This one hangs as 
> does any others when I specify a driver.

I don't think I've ever tried something like this.  If it is hanging,
it may once again be the "too many tables to enumerate" problem.

> I have tried OCI and can get connected but it only shows a few tables in 
> the whole database.  It only shows those with SDO metadata set.

This is as intended, though I think you should be able to specify a
specific table in the OCI connection string and just access that even if
it doesn't have sdo metadata.  I'm not really sure about this though.

> I can retrieve data from the table with the exception of date values.  I 
> can use the DateTime field in the query itself and it seems to work ok 
> but I can not return the actual date.

I'm no sql guru, but if there is some way of casting the field
contents to string in an SQL statement that might work.

> I can get the index to the "SHAPE" and IsFieldSet returns true but 
> geometry = feature.GetGeometryDef() always returns NULL.

Assuming that shape is an SDE blob geometry instead of an
oracle spatial type geometry object, this is what I would
expect.

> I can connect using the SDE driver but I get an odd error when I issue 
> the same SQL that works with the OCI driver.  The error is "Could not 
> execute SQL statement\nSQL: Syntax error, 14 extra tokens".  When I use 
> the SDE driver I see all of the tables and all of the fields in the
tables.

I'm surprised.  "14 extra tokens" does not sound like something the
OGR SQL parser would report, and the OGR SDE driver does not have a
custom SQL parser - just the generic OGR parser.  On the other hand,
SQL statements against OCI are passed directly through to Oracle.

So I'm confused on this one.

> I keep hoping if that someone out there has run across some of these 
> problems and can give me a clue or something to try.  I would like to 
> ditch C# but that is not an option at this point.

If you are wanting to access SDE managed spatial tables in oracle,
then I believe you should be doing so through the SDE driver for
maximum correctness.  If there are specific bugs in the SDE driver
we can try a few things to try and fix them.

I feel for your frustration, but unfortunately, SDE on Oracle is not
something
that I have conveniently available for testing.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From leretha.childress at baronservices.com  Mon Jan  7 16:45:01 2008
From: leretha.childress at baronservices.com (LeRetha Childress)
Date: Mon Jan  7 16:44:38 2008
Subject: [gdal-dev] gdal utilities
Message-ID: <E326C55B26184399B3C05495AC7856D5@lerethac>

I'm new to Gdal. Where can I find more information and examples on using
Gdal command line utilities?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080107/aaae4999/attachment.html
From even.rouault at mines-paris.org  Mon Jan  7 16:49:20 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  7 16:49:24 2008
Subject: [gdal-dev] RFC-19 revised
Message-ID: <200801072249.21406.even.rouault@mines-paris.org>

Hi all,

After more feedback coming from discussions on IRC, I've decided to revise the 
terms of http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc.

The summary of changes is that I would only add 2 new functions - VSIMalloc2 
and VSIMalloc3 - which would have the same behaviour of the previously named 
CPLSafeMalloc2 and CPLSafeMalloc3. Their behaviour would be consistent with 
the behaviour of current VSIMalloc. (The 'safe' qualifier could have implied 
that other memory allocation functions are not safe to use, which is not the 
case).

The proposed functions for detecting overflows when doing arithmetic 
operations (CPLSafeMul/CPLSafeSizetCastToInt), and the way of implementing 
them (templates vs not templates), don't make enough consensus and are 
retracted. There could be indeed a more general need for "safe" arithmetic, 
and not just restrict them to multiplication of size_t variables. The subject 
of security is far from being fully covered... ;-)

So, I call for a new vote on the updated RFC.

Best regards,
Even
From warmerdam at pobox.com  Mon Jan  7 16:58:11 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan  7 16:58:31 2008
Subject: [gdal-dev] RFC-19 revised
In-Reply-To: <200801072249.21406.even.rouault@mines-paris.org>
References: <200801072249.21406.even.rouault@mines-paris.org>
Message-ID: <4782A073.6040808@pobox.com>

Even Rouault wrote:
> Hi all,
> 
> After more feedback coming from discussions on IRC, I've decided to revise the 
> terms of http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc.
...
> So, I call for a new vote on the updated RFC.

I'm +1

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Jan  7 17:00:20 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan  7 17:00:39 2008
Subject: [gdal-dev] gdal utilities
In-Reply-To: <E326C55B26184399B3C05495AC7856D5@lerethac>
References: <E326C55B26184399B3C05495AC7856D5@lerethac>
Message-ID: <4782A0F4.2020306@pobox.com>

LeRetha Childress wrote:
> I?m new to Gdal. Where can I find more information and examples on using 
> Gdal command line utilities?

LeRetha,

The main resource is the man pages (in html format) at:

   http://www.gdal.org/gdal_utilities.html

There are also some additional materials in the wiki under:

   http://trac.osgeo.org/gdal/wiki/UserDocs

You might also find the raster processing tutorial useful, though I haven't
gotten around to "web formatting" it yet after presenting it at FOSS4G.

   http://trac.osgeo.org/gdal/wiki/UserDocs/RasterProcTutorial

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From hobu.inc at gmail.com  Mon Jan  7 16:59:08 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Jan  7 17:00:50 2008
Subject: [gdal-dev] RFC-19 revised
In-Reply-To: <4782A073.6040808@pobox.com>
References: <200801072249.21406.even.rouault@mines-paris.org>
	<4782A073.6040808@pobox.com>
Message-ID: <D4D2F93A-4378-4B6F-9446-4CE205805FA2@gmail.com>


On Jan 7, 2008, at 3:58 PM, Frank Warmerdam wrote:

> Even Rouault wrote:
>> Hi all,
>> After more feedback coming from discussions on IRC, I've decided to  
>> revise the terms of http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc 
>> .
> ...
>> So, I call for a new vote on the updated RFC.
>
> I'm +1

+1

From eschenbe at psc.edu  Mon Jan  7 17:06:27 2008
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Mon Jan  7 17:06:30 2008
Subject: [gdal-dev] Shapefile to Lambert Azimuthal Equal Area
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC801988795@ptolemy.topozone.com>
References: <4782535D.4060600@psc.edu>
	<4BF377919225F449BB097CB76FFE9BC801988793@ptolemy.topozone.com>
	<478275F4.4010008@psc.edu>
	<4BF377919225F449BB097CB76FFE9BC801988795@ptolemy.topozone.com>
Message-ID: <4782A263.60109@psc.edu>

Thank you Frank W., Nikos A. and Ed McN. I used gdalinfo to get the needed 
information from an existing GeoTiff file then used

ogr2ogr -s_srs WGS84 -t_srs "+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 
+datum=WGS84 +units=m +no_defs" -f "ESRI Shapefile" destination.shp source.shp

Kent
Pittsburgh Supercomputing Center
From dmorissette at mapgears.com  Mon Jan  7 17:30:38 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jan  7 17:30:47 2008
Subject: [gdal-dev] RFC-19 revised
In-Reply-To: <200801072249.21406.even.rouault@mines-paris.org>
References: <200801072249.21406.even.rouault@mines-paris.org>
Message-ID: <4782A80E.2050105@mapgears.com>

Even Rouault wrote:
> 
> After more feedback coming from discussions on IRC, I've decided to revise the 
> terms of http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc.
> 
...
> 
> So, I call for a new vote on the updated RFC.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From mateusz at loskot.net  Mon Jan  7 19:24:01 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Jan  7 19:24:10 2008
Subject: [gdal-dev] GDAL Maintenance Reports No 12-15/2007
Message-ID: <4782C2A1.2070706@loskot.net>

Hi,

I've updated the GDAL Maintenance Reports for the time of Nov-Dec 2007,
report numbers 12-15:

http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByMateusz2007

Now, the Wiki page "MaintenanceReportsByMateusz2007" includes complete 
set of reports for my 1st and 2nd GDAL Maintenance contract in 2007.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net
From dron at ak4719.spb.edu  Tue Jan  8 08:44:19 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Jan  8 08:49:09 2008
Subject: [gdal-dev] RFC-19 revised
In-Reply-To: <4782A80E.2050105@mapgears.com>
References: <200801072249.21406.even.rouault@mines-paris.org>
	<4782A80E.2050105@mapgears.com>
Message-ID: <20080108134419.GA8921@ak4719.spb.edu>

On Mon, Jan 07, 2008 at 05:30:38PM -0500, Daniel Morissette wrote:
> >After more feedback coming from discussions on IRC, I've decided to
> >revise the terms of
> >http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc.

+1.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From szekerest at gmail.com  Tue Jan  8 09:08:30 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jan  8 09:08:33 2008
Subject: [gdal-dev] RFC-19 revised
In-Reply-To: <200801072249.21406.even.rouault@mines-paris.org>
References: <200801072249.21406.even.rouault@mines-paris.org>
Message-ID: <f3b73b7d0801080608t258d1837je70a4e990b6d79d6@mail.gmail.com>

+1

Best regards,

Tamas



2008/1/7, Even Rouault <even.rouault@mines-paris.org>:
> Hi all,
>
> After more feedback coming from discussions on IRC, I've decided to revise the
> terms of http://trac.osgeo.org/gdal/wiki/rfc19_safememalloc.
>
> The summary of changes is that I would only add 2 new functions - VSIMalloc2
> and VSIMalloc3 - which would have the same behaviour of the previously named
> CPLSafeMalloc2 and CPLSafeMalloc3. Their behaviour would be consistent with
> the behaviour of current VSIMalloc. (The 'safe' qualifier could have implied
> that other memory allocation functions are not safe to use, which is not the
> case).
>
> The proposed functions for detecting overflows when doing arithmetic
> operations (CPLSafeMul/CPLSafeSizetCastToInt), and the way of implementing
> them (templates vs not templates), don't make enough consensus and are
> retracted. There could be indeed a more general need for "safe" arithmetic,
> and not just restrict them to multiplication of size_t variables. The subject
> of security is far from being fully covered... ;-)
>
> So, I call for a new vote on the updated RFC.
>
> Best regards,
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From santosh at darshan3d.com  Tue Jan  8 09:28:29 2008
From: santosh at darshan3d.com (santosh)
Date: Tue Jan  8 09:28:47 2008
Subject: [gdal-dev] dependancy library problem 
Message-ID: <4783888D.90901@darshan3d.com>

hi all
   I am having problem in dependancy library of gdal libpq.so. can any 
one tell me How can I get this libs?

Thanks
Santosh
From jeshua at OpenOSX.com  Tue Jan  8 09:43:39 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue Jan  8 09:43:44 2008
Subject: [gdal-dev] dependancy library problem 
In-Reply-To: <4783888D.90901@darshan3d.com>
References: <4783888D.90901@darshan3d.com>
Message-ID: <F45B0BAA-F04D-498D-B2C2-ADC79A21BFB7@OpenOSX.com>


On Jan 8, 2008, at 7:28 AM, santosh wrote:

>   I am having problem in dependancy library of gdal libpq.so. can  
> any one tell me How can I get this libs?

Download and install PostgreSQL:

<http://www.postgresql.org/>

Binaries are available for many platforms, and it should compile with  
no problems.


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364



From dany.geotools at gmail.com  Tue Jan  8 09:54:53 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Jan  8 09:54:57 2008
Subject: [gdal-dev] Java SWIG Bindings
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E0B241C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E0B241C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <7221db410801080654o757fd303n89e957ebdb05ec06@mail.gmail.com>

On Jan 7, 2008 6:58 PM, Meek, Allan (Contractor) <Allan.Meek@drdc-rddc.gc.ca>
wrote:

>
> Does anybody have any advice to help me get around these problems?


Hi,
I guess Benjamin has already solved your problems with its suggestions.
Anyway, we (GeoSolutions) are working on a Java ImageIO-Extensions project
which deeply leverages on GDAL via SWIG's generated bindings.
This project also contains a step-to-step guide on how to setup all the
required components/software in order to get everything working. Hence, the
guide also contains a section with instructions on how to build GDAL and
generate Java bindings on both Windows and Linux (as well as a set of
required customizations in order to extend capabilities).
You may find this guide at this site:
https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/documentation/ImageioExt.odt(When
asked for userID and pass you can simply use "guest" as userID with no
password).
Actually, the main website requires a real improvement since it is in a very
preliminar version (I have written some rows just for introduction... 50
seconds of work :) ). We will improve it very soon.
In case you need more help, let us know.

Best Regards,
Daniele Romagnoli


>
> Thanks,
> Allan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080108/ab0a4a05/attachment.html
From warmerdam at pobox.com  Tue Jan  8 10:19:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  8 10:20:06 2008
Subject: [gdal-dev] Re: [Incubator] GDAL graduation
In-Reply-To: <478352D2.4030704@gmail.com>
References: <B7FD835B-C329-43B7-8391-0E9B3D0D38E9@dmsolutions.ca>
	<478352D2.4030704@gmail.com>
Message-ID: <47839484.6060307@pobox.com>

Cameron Shorter wrote:
> Paul, Frank,
> Great to see GDAL reaching graduation, it sounds like GDAL is in good 
> shape.
> However, before graduating I think we need further closure on the 
> Providence Review Issues. I suspect that you should be able to close 
> many of them by either:
> 1. Receiving clarifications already requested.
> 2. There was a legal opinion stated by Eric Raymond during the formation 
> of OSGeo that Contributions to a project will automatically assume the 
> license of the project. You might want to apply this to contributions 
> you cannot get a response for.
> 3. If you don't resolve the license issue, there should be a work off 
> plan describing how it will be resolved. Is the code going to be 
> rewritten? Is it going to be moved into a separate download?
> 
> If there are any outstanding license issues, then there should be an 
> informative web page explaining the issues to potential users so they 
> understand the risks associated with using the code. A reference to the 
> Provenance Review should suffice.

Cameron,

In the interest of directness, I'll list the issues marked TO_RESOLVE:

In gdal/data we have several coordinate system dictionary files derived
in one fashion or another from other source (via translation scripts):

* cubewerx_extra.wkt: derived from definitions distributed by Cubewerx, rights 
unclear. '''TO_RESOLVE''' (emailed Edric)
* ecw_cs.dat: Derived via much processing from ERMapper GDT definitions, rights 
unclear. '''TO_RESOLVE'''
* esri_extra.wkt: Derived with some processing from projections definitions in 
ArcGIS, rights unclear. '''TO_RESOLVE'''

Also two data files - one a seed (template) used when creating DGN files,
and one a list of Canadian mapsheet names:

* seed_2d.dgn, seed_3d.dgn: Exact source of these files is unclear. 
'''TO_RESOLVE'''
* NTS-50kindex.csv: Provided by Matt Wilkie, derived from NRCan dataset, rights 
unclear.  '''TO_RESOLVE'''

Also, I discovered that the gdal_merge.py script is accidentally distributed
under LGPL instead of MIT/X license:

* gdal_merge.py: copyright held by Atlantis, under LGPL.  '''TO_RESOLVE'''

I noted some concern about the license terms of libgeotiff:

* Contains copy of libgeotiff, license terms not made clear.  '''TO_RESOLVE''' 
(Emailed Niles about using MIT/X license for his libgeotiff code).

This specific file from libgeotiff is somewhat unclear:

* geoextra.c: Derived by public domain contribution to libgeotiff from PCI but 
the terms are not clear.  (this also affects libgeotiff) '''TO_RESOLVE''' 
Email send to Dave Stanley to allow relicensing under MIT/X license.

The only C/C++ source marked TO_RESOLVE is the libgeotiff related stuff.  I
am very comfortable with the origin of this code and feel the issue to resolve
is just ensuring provenance and licensing are more clearly documented.

The gdal_merge.py script is under a legitimate open source license, and
the fact that it is LGPL does not affect any other parts of the library
so I'm not overly concerned.  I'd just like it cleared up so there aren't
any peculiar licenses in GDAL.

The coordinate system data files are slightly more confusing.  Some
capabilities of the library will not work without them.  I don't believe
there is any problem with any of them but it is a little unclear.   I
would like to get clarification on them but it can be challenging to get
a legal release from large corporations when they have no particular
incentive to apply their legal resources to the question.

In short, I believe the code is clean.  I am concerned about some of the
supporting coordinate system dictionaries.  One possible fallback might
be to somehow segregate the questionable dictionaries from the standard
install but this would substantially reduce the ability to process files
with ERMapper coordinate systems, and reduce ESRI compatability.

(cc:ing gdal-dev too as these provenance issues affect the GDAL community)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bfraser at geoanalytic.com  Tue Jan  8 10:38:18 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Jan  8 10:38:44 2008
Subject: [gdal-dev] gdal utilities
References: <E326C55B26184399B3C05495AC7856D5@lerethac>
Message-ID: <045701c8520c$7dfc21a0$140002c0@shark>

Have a look at
http://www.gdal.org/gdal_utilities.html
and
http://trac.osgeo.org/gdal/wiki/UserDocs


Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "LeRetha Childress"
<leretha.childress@baronservices.com>
To: <gdal-dev@lists.osgeo.org>
Sent: Monday, January 07, 2008 2:45 PM
Subject: [gdal-dev] gdal utilities


> I'm new to Gdal. Where can I find more information and
examples on using
> Gdal command line utilities?
>
>


------------------------------------------------------------
--------------------


> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lewis.milehi at gmail.com  Tue Jan  8 13:18:32 2008
From: lewis.milehi at gmail.com (keith lewis)
Date: Tue Jan  8 13:18:34 2008
Subject: [gdal-dev] join CSV to shapefile, column width question
Message-ID: <c07aa7ad0801081018q2f0041del813aa62eac92ed46@mail.gmail.com>

Hello,

I'm joining tabular data (csv) to a shapefile. The new String fields are
always 80 char wide. I tried to define the column width by creating a .CSVT
file in this manner.

"String (100)",String (100)"

However, this has no effect on the new columns that are joined to the
shapefile. The Shapefile specification allows String fields up to 255 char.
How can I create String fields greater than 80 char? Thanks

Keith
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080108/cf4a644d/attachment.html
From warmerdam at pobox.com  Tue Jan  8 14:31:46 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  8 14:32:04 2008
Subject: [gdal-dev] join CSV to shapefile, column width question
In-Reply-To: <c07aa7ad0801081018q2f0041del813aa62eac92ed46@mail.gmail.com>
References: <c07aa7ad0801081018q2f0041del813aa62eac92ed46@mail.gmail.com>
Message-ID: <4783CFA2.6040808@pobox.com>

keith lewis wrote:
> Hello,
> 
> I'm joining tabular data (csv) to a shapefile. The new String fields are 
> always 80 char wide. I tried to define the column width by creating a 
> .CSVT file in this manner.
> 
> "String (100)",String (100)"
> 
> However, this has no effect on the new columns that are joined to the 
> shapefile. The Shapefile specification allows String fields up to 255 
> char. How can I create String fields greater than 80 char? Thanks

Keith,

I would suggest you submit a bug report demonstrating the problem with setting
shapefile(dbf) field widths based on a .csvt file and I can look into it.
The approach seems reasonable.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Jan  8 14:36:30 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  8 14:36:40 2008
Subject: [gdal-dev] Motion: Add Even Rouault to GDAL PSC
Message-ID: <4783D0BE.6040901@pobox.com>

Folks,

Even Rouault has been an amazing contributor to the GDAL project for the last
six months or so, and has shown interest in many different aspects of the
project and demonstrated a good understanding of project functioning.  Based
on his substantial contributions, I would like to include him in the project
steering committee.

Motion: To add Even Rouault to the GDAL PSC.

+1 from me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From hobu.inc at gmail.com  Tue Jan  8 14:49:44 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Jan  8 14:51:15 2008
Subject: [gdal-dev] Motion: Add Even Rouault to GDAL PSC
In-Reply-To: <4783D0BE.6040901@pobox.com>
References: <4783D0BE.6040901@pobox.com>
Message-ID: <028CA2DF-C60F-4007-BCCB-D45468F84933@gmail.com>

+1

On Jan 8, 2008, at 1:36 PM, Frank Warmerdam wrote:

> Folks,
>
> Even Rouault has been an amazing contributor to the GDAL project for  
> the last
> six months or so, and has shown interest in many different aspects  
> of the
> project and demonstrated a good understanding of project  
> functioning.  Based
> on his substantial contributions, I would like to include him in the  
> project
> steering committee.
>
> Motion: To add Even Rouault to the GDAL PSC.
>
> +1 from me.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dmorissette at mapgears.com  Tue Jan  8 15:26:11 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Jan  8 15:26:12 2008
Subject: [gdal-dev] Motion: Add Even Rouault to GDAL PSC
In-Reply-To: <4783D0BE.6040901@pobox.com>
References: <4783D0BE.6040901@pobox.com>
Message-ID: <4783DC63.2060607@mapgears.com>

Frank Warmerdam wrote:
> 
> Motion: To add Even Rouault to the GDAL PSC.
> 
> +1 from me.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From greenberg at ucdavis.edu  Tue Jan  8 15:29:41 2008
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Tue Jan  8 15:29:44 2008
Subject: [gdal-dev] LAS format?
Message-ID: <4783DD35.2030900@ucdavis.edu>

Does OGR have any support for the LAS Lidar format?  If not, how do I go 
about lobbying for the inclusion?  Its a fairly straightforward, binary 
encoded set of x,y,z points.

--j

-- 

Jonathan A. Greenberg, PhD
Postdoctoral Scholar
Center for Spatial Technologies and Remote Sensing (CSTARS)
University of California, Davis
One Shields Avenue
The Barn, Room 250N
Davis, CA 95616
Cell: 415-794-5043
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
From Allan.Meek at drdc-rddc.gc.ca  Tue Jan  8 15:45:03 2008
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Tue Jan  8 15:45:08 2008
Subject: [gdal-dev] Java SWIG Bindings
In-Reply-To: <8D27E2CDAF11D34F97E7445BCCCDB92C023572D5@IMCSRV1.MITRE.ORG>
References: <DF1471B5C308B346BF5A2AEA00C5615E0B241C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<8D27E2CDAF11D34F97E7445BCCCDB92C023572D5@IMCSRV1.MITRE.ORG>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E0B247E@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Thanks for your help, Ben. With Daniele's document and your suggestions,
I've managed to get everything up and running in both Linux and Windows.

Thanks,
Allan


-----Original Message-----
From: Collins, Benjamin [mailto:collinsb@mitre.org] 
Sent: January 7, 2008 3:06 PM
To: Meek, Allan (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Java SWIG Bindings

>-----Original Message-----
>From: gdal-dev-bounces@lists.osgeo.org 
>[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Meek, 
>Allan (Contractor)
>Sent: Monday, January 07, 2008 12:59 PM
>To: gdal-dev@lists.osgeo.org
>Subject: [gdal-dev] Java SWIG Bindings
>
>  (from {...}/swig/java/apps)
>  java -cp ../gdal.jar -Djava.library.path=../.libs/ gdalinfo
>
>  Exception in thread "main" java.lang.NoClassDefFoundError: gdalinfo
You may need to specify -cp .:../gdal.jar to get java to look at your
local folder for class files.

>
>If I remove "-cp ../gdal.jar", ...
Please don't do this.

{...}
From hobu.inc at gmail.com  Tue Jan  8 16:18:00 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Jan  8 16:18:25 2008
Subject: [gdal-dev] LAS format?
In-Reply-To: <4783DD35.2030900@ucdavis.edu>
References: <4783DD35.2030900@ucdavis.edu>
Message-ID: <09B21014-992E-44B7-B9DA-9CE98311FC25@gmail.com>

Jonathan,

OGR does not currently support reading/writing LAS data, but there are  
some activities in the works toward moving that direction.  Mateusz  
Loskot, Phil Vachon, and myself are currently working on developing a  
LAS library with the intent that an OGR driver will be built atop it http://liblas.org 
.  The work builds on a library by Martin Isenburg that supports  
reading and writing LAS data.  We are working on reengineering it to  
use stl streams for i/o, add C and Python APIs, and architect things  
with an eye toward supporting LAS 2.0 if that insane specification  
actually sees the light of day.

Perry has a good synopsis and short term approach described on his  
weblog at http://www.perrygeo.net/wordpress/?p=38

As far as lobbying for inclusion, money and/or development time are  
the most effective persuasive instruments :)  My goal is to have an  
OGR driver by the end of the year, however.

Howard

On Jan 8, 2008, at 2:29 PM, Jonathan Greenberg wrote:

> Does OGR have any support for the LAS Lidar format?  If not, how do  
> I go about lobbying for the inclusion?  Its a fairly  
> straightforward, binary encoded set of x,y,z points.
>
> --j
>
> -- 
>
> Jonathan A. Greenberg, PhD
> Postdoctoral Scholar
> Center for Spatial Technologies and Remote Sensing (CSTARS)
> University of California, Davis
> One Shields Avenue
> The Barn, Room 250N
> Davis, CA 95616
> Cell: 415-794-5043
> AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Tue Jan  8 16:19:10 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jan  8 16:19:13 2008
Subject: [gdal-dev] Motion: Add Even Rouault to GDAL PSC
In-Reply-To: <4783D0BE.6040901@pobox.com>
References: <4783D0BE.6040901@pobox.com>
Message-ID: <f3b73b7d0801081319m490cef83g1c96f3c1fb87ad20@mail.gmail.com>

+1

Best regards,

Tamas


2008/1/8, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> Even Rouault has been an amazing contributor to the GDAL project for the last
> six months or so, and has shown interest in many different aspects of the
> project and demonstrated a good understanding of project functioning.  Based
> on his substantial contributions, I would like to include him in the project
> steering committee.
>
> Motion: To add Even Rouault to the GDAL PSC.
>
> +1 from me.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Tue Jan  8 16:25:59 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  8 16:26:02 2008
Subject: [gdal-dev] RFC-19 revised
In-Reply-To: <f3b73b7d0801080608t258d1837je70a4e990b6d79d6@mail.gmail.com>
References: <200801072249.21406.even.rouault@mines-paris.org>
	<f3b73b7d0801080608t258d1837je70a4e990b6d79d6@mail.gmail.com>
Message-ID: <200801082226.00071.even.rouault@mines-paris.org>

Hi all,

With votes from all members of the PSC, RFC-19 is considered to be passed.
I will proceed to commits as soon as I've removed all references to the 
withdrawn API from my tree. I'll leave comments in the code in those places 
to indicate they are good candidates for further security investigation.

Best regards,
Even
From hobu.inc at gmail.com  Tue Jan  8 16:38:15 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Jan  8 16:38:26 2008
Subject: [gdal-dev] LAS format?
In-Reply-To: <4783DD35.2030900@ucdavis.edu>
References: <4783DD35.2030900@ucdavis.edu>
Message-ID: <0E56262B-E131-46A1-A272-6ABE56F804B0@gmail.com>

Correction...

> *Matt* Perry has a good synopsis and short term approach described  
> on his weblog at http://www.perrygeo.net/wordpress/?p=38

Howard
From dron at ak4719.spb.edu  Wed Jan  9 02:15:50 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Jan  9 02:34:07 2008
Subject: [gdal-dev] Motion: Add Even Rouault to GDAL PSC
In-Reply-To: <4783D0BE.6040901@pobox.com>
References: <4783D0BE.6040901@pobox.com>
Message-ID: <20080109071550.GA12378@ak4719.spb.edu>

On Tue, Jan 08, 2008 at 02:36:30PM -0500, Frank Warmerdam wrote:
> Motion: To add Even Rouault to the GDAL PSC.

I am +1.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From vincent.poulain at these.cnes.fr  Wed Jan  9 03:55:11 2008
From: vincent.poulain at these.cnes.fr (Vincent POULAIN)
Date: Wed Jan  9 03:55:13 2008
Subject: [gdal-dev] SetGCPs() method not supported
Message-ID: <47848BEF.4090005@these.cnes.fr>

Hello all,

I try to convert a complex image into modulus image, the format is .hdr 
(ENVI image) but I have this error message:

ERROR 6: Dataset does not support the SetGCPs() method.

What can i do to solve that problem?

Thanks,
Vincent
From vali.system at free.fr  Wed Jan  9 05:22:23 2008
From: vali.system at free.fr (ValiSystem)
Date: Wed Jan  9 05:22:26 2008
Subject: [gdal-dev] SetGCPs() method not supported
In-Reply-To: <47848BEF.4090005@these.cnes.fr>
References: <47848BEF.4090005@these.cnes.fr>
Message-ID: <AD4B6CB3-1DCE-46DC-9A34-D98B347B21C6@free.fr>


On 9 janv. 08, at 09:55, Vincent POULAIN wrote:

> Hello all,
>
> I try to convert a complex image into modulus image, the format  
> is .hdr (ENVI image) but I have this error message:
>
> ERROR 6: Dataset does not support the SetGCPs() method.
>
> What can i do to solve that problem?
>
> Thanks,
> Vincent
>

Hello Vincent,

GCPs are not supported in all dataset formats, so make sure to use one  
that support it (i'd not be surprise if ENVI image does not support it).

I know that geotiff can have GCPs, searching for "GCP" in http://www.gdal.org/frmt_various.html 
  will help you to point out formats that are GCPs compatible.

Cheers,

nicolas
From vali.system at free.fr  Wed Jan  9 05:29:31 2008
From: vali.system at free.fr (ValiSystem)
Date: Wed Jan  9 05:29:33 2008
Subject: [gdal-dev] SetGCPs() method not supported
In-Reply-To: <AD4B6CB3-1DCE-46DC-9A34-D98B347B21C6@free.fr>
References: <47848BEF.4090005@these.cnes.fr>
	<AD4B6CB3-1DCE-46DC-9A34-D98B347B21C6@free.fr>
Message-ID: <9CB687BA-A8A8-435C-83A3-FEE44F6EE266@free.fr>


On 9 janv. 08, at 11:22, ValiSystem wrote:

>
> On 9 janv. 08, at 09:55, Vincent POULAIN wrote:
>
>> Hello all,
>>
>> I try to convert a complex image into modulus image, the format  
>> is .hdr (ENVI image) but I have this error message:
>>
>> ERROR 6: Dataset does not support the SetGCPs() method.
>>
>> What can i do to solve that problem?
>>
>> Thanks,
>> Vincent
>>
>
> Hello Vincent,
>
> GCPs are not supported in all dataset formats, so make sure to use  
> one that support it (i'd not be surprise if ENVI image does not  
> support it).
>
> I know that geotiff can have GCPs, searching for "GCP" in http://www.gdal.org/frmt_various.html 
>  will help you to point out formats that are GCPs compatible.
>
> Cheers,
>
> nicolas

OOps, little mistake, all formats are not visible in http://www.gdal.org/frmt_various.html 
. Well, maybe someone will tell you which format are GCP compatibles,  
or i'm afraid you'll have to to the fastidious job (if you do it  
manually) of finding them by yourself.

nicolas


From john.craddock at xitech.com.au  Wed Jan  9 06:12:50 2008
From: john.craddock at xitech.com.au (John L. Craddock)
Date: Wed Jan  9 06:12:54 2008
Subject: [gdal-dev] netCDF to GRIB 1
Message-ID: <1D4709F5DABD944E926E1F5C1AE5ABB8070524@server.office.xitech.com.au>

Hello Bas,
I did discover the read only attribute. Your response is most helpful. Thank you.
Kind regards
John C

-----Original Message-----
From: Bas Retsios [mailto:retsios@itc.nl]
Sent: 08 January 2008 03:21
To: John L. Craddock
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] netCDF to GRIB 1


Hello,

The GDAL-GRIB driver mentioned will read GRIB files (not write them), therefore it can not be directly used for converting netCDF to GRIB files.
However, this information might help:
For saving time when I was working on this driver, I implemented it as a "wrapper" around a full GRIB library written by Mr. Arthur Taylor.
The SVN link below contains both the "wrapper" that gives GDAL "GRIB-read" capabilities (which is file gribdataset.cpp), and the full GRIB library (which is all other files).
The GRIB library can both read and write GRIB files, but I only called the functions for reading (because that is what I was interested in).
With some effort you would be able to extend gribdataset.cpp so that it can also write back a GRIB file. This link http://www.gdal.org/gdal_drivertut.html describes how to proceed, at section "File Creation".

Cheers,

Bas.

-- 

Ir. V. (Bas) Retsios

Software Developer

Geo-information Processing Department

International Institute for Geo-information Science and Earth Observation (ITC)

P.O. Box 6,  7500 AA Enschede, The Netherlands

Phone +31 (0)53 4874 573, telefax +31 (0)53 4874 335

E-mail  retsios@itc.nl, Internet  http://www.itc.nl


John L. Craddock wrote:


Many thanks for your help Mateusz, I will give it a try.

Regards

John C



  

-----Original Message-----

From: Mateusz Loskot [ mailto:mateusz@loskot.net]

Sent: 02 January 2008 06:43

To: John L. Craddock

Cc: gdal

Subject: Re: [gdal-dev] netCDF to GRIB 1





Mateusz Loskot wrote:

    

John L. Craddock wrote:

      

Hello all,

Been scanning the ether for windows code to convert ocean 

        

current files

    

in netCDF format to GRIB version 1. I know about GRADS and 

        

the lats4d

    

script. Thought I would ask here if anyone knows of a less 

        

circuitous

    

way of converting. I see GDAL reads netCDF. Is there a 

        

driver to output

    

GRIB?

        

John,



There is GRIB driver in the GDAL spike repository:



https://svn.osgeo.org/gdal/spike/grib/



You may try to checkout it and build into GDAL.

      

BTW, here you can find short instructions how to build GDAl with GRIB

support (the SVN URL given there is not active anymore, use 

the new one

above):



http://lists.osgeo.org/pipermail/gdal-dev/2007-February/011663.html



-- 

Mateusz Loskot

http://mateusz.loskot.net



    

_______________________________________________

gdal-dev mailing list

gdal-dev@lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev

  


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080109/ecbb462f/attachment.html
From 2voodoo at gmx.de  Wed Jan  9 07:10:53 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Jan  9 07:10:47 2008
Subject: [gdal-dev] How to generate WinCE header files? + Compiling question
Message-ID: <4784B9CD.9070007@gmx.de>

Hi,

after having some problems compiling the current stable and/or SVN 
version of GDAL I now wonder how to generate header files which I can 
use in C++ along with the .lib - I assume I can not use the ones in in 
the src folder, right? May this be a basic question but I got the the 
header files for the version of GDAL I am currently using from somewhere 
I do not remember :)

Problems with compiling the current release is/was:
Error    17    error LNK2019: unresolved external symbol 
OGR_G_ExportToKML referenced in function "public: virtual char * __cdecl 
OGRGeometry::exportToKML(void)const " 
(?exportToKML@OGRGeometry@@UBAPADXZ)    ogrgeometry.obj
Error    18    error LNK2019: unresolved external symbol 
OGR_G_ExportToJson referenced in function "public: virtual char * 
__cdecl OGRGeometry::exportToJson(void)const " 
(?exportToJson@OGRGeometry@@UBAPADXZ)    ogrgeometry.obj
Error    19    error LNK2019: unresolved external symbol 
SASetupDefaultHooks referenced in function DBFOpen    dbfopen.obj
Error    20    error LNK2001: unresolved external symbol 
SASetupDefaultHooks    shpopen.obj

I corrected this in commenting all this out as I do not use those 
functions - but I guess that is not the best way to solve this issue.

May aim is to use "OGRSpatialReference" from my C++ code but I do not 
have the "ogr_spatialref.h" header. Currently I am using a "gdal_priv.h" 
header file (along with some others). Do I need Proj.4 for this to work?

Thanks in advance.
Tom
From 2voodoo at gmx.de  Wed Jan  9 07:35:25 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Jan  9 07:35:19 2008
Subject: [gdal-dev] How to generate WinCE header files? + Compiling
	question
In-Reply-To: <4784B9CD.9070007@gmx.de>
References: <4784B9CD.9070007@gmx.de>
Message-ID: <4784BF8D.8000306@gmx.de>

Tom Kazimiers schrieb:
> Hi,
>
> after having some problems compiling the current stable and/or SVN 
> version of GDAL I now wonder how to generate header files which I can 
> use in C++ along with the .lib - I assume I can not use the ones in in 
> the src folder, right? May this be a basic question but I got the the 
> header files for the version of GDAL I am currently using from 
> somewhere I do not remember :)
>
> Problems with compiling the current release is/was:
> Error    17    error LNK2019: unresolved external symbol 
> OGR_G_ExportToKML referenced in function "public: virtual char * 
> __cdecl OGRGeometry::exportToKML(void)const " 
> (?exportToKML@OGRGeometry@@UBAPADXZ)    ogrgeometry.obj
> Error    18    error LNK2019: unresolved external symbol 
> OGR_G_ExportToJson referenced in function "public: virtual char * 
> __cdecl OGRGeometry::exportToJson(void)const " 
> (?exportToJson@OGRGeometry@@UBAPADXZ)    ogrgeometry.obj
> Error    19    error LNK2019: unresolved external symbol 
> SASetupDefaultHooks referenced in function DBFOpen    dbfopen.obj
> Error    20    error LNK2001: unresolved external symbol 
> SASetupDefaultHooks    shpopen.obj
>
> I corrected this in commenting all this out as I do not use those 
> functions - but I guess that is not the best way to solve this issue.
>
> May aim is to use "OGRSpatialReference" from my C++ code but I do not 
> have the "ogr_spatialref.h" header. Currently I am using a 
> "gdal_priv.h" header file (along with some others). Do I need Proj.4 
> for this to work?
>
> Thanks in advance.
> Tom
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Well, after playing around a bit I am sure I can use the the "normal" 
header files. Everything is found and I can compile with OGR support. So 
this question seems to be answered.
Proj.4 support is not enabled by now and it seems that I do not need it 
- is this right?

Thanks,
Tom
From Tom.Kralidis at ec.gc.ca  Wed Jan  9 07:40:06 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Jan  9 07:40:10 2008
Subject: [gdal-dev] latest svn trunk build error
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F036CEE95@ecburexch1.ontario.int.ec.gc.ca>


Hi,

On FC6, using:

$ ./configure --with-png --with-libtiff=internal --with-geotiff=internal
--with-jpeg --with-xerces --with-geos=no
--with-pg=/usr/local/pgsql/bin/pg_config
--with-mysql=/usr/bin/mysql_config --with-sqlite
--with-curl=/usr/bin/curl-config --with-python --with-expat

...

make[2]: Entering directory
`/home/tkralidi/foss4g/gdal/trunk/gdal/frmts/sgi'
/bin/sh /home/tkralidi/foss4g/gdal/trunk/gdal/libtool --mode=compile
--tag=CXX g++ -g -O2  -Wall
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port
-I/home/tkralidi/foss4g/gdal/trunk/gdal/gcore
-I/home/tkralidi/foss4g/gdal/trunk/gdal/alg
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port  -c -o ../o/sgidataset.o
sgidataset.cpp
libtool: compile:  g++ -g -O2 -Wall
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port
-I/home/tkralidi/foss4g/gdal/trunk/gdal/gcore
-I/home/tkralidi/foss4g/gdal/trunk/gdal/alg
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr
-I/home/tkralidi/foss4g/gdal/trunk/gdal/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/tkralidi/foss4g/gdal/trunk/gdal/port -c sgidataset.cpp  -fPIC
-DPIC -o ../o/.libs/sgidataset.o
sgidataset.cpp: In member function 'virtual CPLErr
SGIRasterBand::IReadBlock(int, int, void*)':
sgidataset.cpp:267: error: 'g' was not declared in this scope
sgidataset.cpp:271: error: expected `;' before 'ImageGetRow'
sgidataset.cpp:259: warning: unused variable 'poGDS'
sgidataset.cpp: At global scope:
sgidataset.cpp:120: warning: 'void ImageGetRow(ImageRec*, unsigned
char*, int, int)' defined but not used
make[2]: *** [../o/sgidataset.o] Error 1
make[2]: Leaving directory
`/home/tkralidi/foss4g/gdal/trunk/gdal/frmts/sgi'
make[1]: *** [sgi-install-obj] Error 2
make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/frmts'
make: *** [frmts-target] Error 2
From Chris.Barker at noaa.gov  Wed Jan  9 07:54:00 2008
From: Chris.Barker at noaa.gov (Chris Barker)
Date: Wed Jan  9 07:54:24 2008
Subject: [gdal-dev] GDAL / Python and PPC
In-Reply-To: <F135957F-BE7E-11DC-9E67-000A277A733C@light42.com>
References: <63289330-BBD0-11DC-9E67-000A277A733C@light42.com>
	<47803696.9060901@frii.com> <47824F7A.50704@noaa.gov>
	<1DC43372-BD46-11DC-9E67-000A277A733C@light42.com>
	<47843CEE.1040607@noaa.gov>
	<F135957F-BE7E-11DC-9E67-000A277A733C@light42.com>
Message-ID: <4784C3E8.3030008@noaa.gov>

Brian Hamlin wrote:
> I have to ask, did anyone test the numpy+GDAL 1.5 build on PPC Macs?

I've yet  to try the latest, and I'm away from my mac 'till next week.

> I believe the numpy build failed on its own, and that I made t possible by
> requesting PPC only..

I've been building and using numpy Universally on a PPC mac for a good 
long time now, so I suspect that wasn't t he issue after all. Or maybe 
it is an issue with the latest numpy, but I don't think GDAL needs the 
latest numpy.

numpy should build Universal and run on PPC and Intel -- if it doesn't, 
then that's a question for the numpy list.

More when I get back to my Mac.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From dron at ak4719.spb.edu  Wed Jan  9 07:59:12 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Jan  9 08:04:18 2008
Subject: [gdal-dev] latest svn trunk build error
In-Reply-To: <2DC5CCA14756424BBBEE8B4B2E4A682F036CEE95@ecburexch1.ontario.int.ec.gc.ca>
References: <2DC5CCA14756424BBBEE8B4B2E4A682F036CEE95@ecburexch1.ontario.int.ec.gc.ca>
Message-ID: <20080109125912.GA13535@ak4719.spb.edu>

On Wed, Jan 09, 2008 at 07:40:06AM -0500, Kralidis,Tom [Burlington] wrote:
> -I/home/tkralidi/foss4g/gdal/trunk/gdal/port -c sgidataset.cpp  -fPIC
> -DPIC -o ../o/.libs/sgidataset.o
> sgidataset.cpp: In member function 'virtual CPLErr
> SGIRasterBand::IReadBlock(int, int, void*)':
> sgidataset.cpp:267: error: 'g' was not declared in this scope
> sgidataset.cpp:271: error: expected `;' before 'ImageGetRow'
> sgidataset.cpp:259: warning: unused variable 'poGDS'
> sgidataset.cpp: At global scope:
> sgidataset.cpp:120: warning: 'void ImageGetRow(ImageRec*, unsigned
> char*, int, int)' defined but not used

Ther e was a typo, it is fixed now in trunk.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From ricardo at tdwg.org  Wed Jan  9 10:15:04 2008
From: ricardo at tdwg.org (Ricardo Scachetti Pereira)
Date: Wed Jan  9 10:17:37 2008
Subject: [gdal-dev] Open source API to convert raster to polygons?
Message-ID: <4784E4F8.70409@tdwg.org>

    Hi all,
   
    Does anyone know of any open source geoprocessing APIs that I can 
use to convert raster maps into polygons (as a shapefile or SQL for 
PostGIS)? Does QGIS do that?

    I know that GDAL (via gdal_contour utility) can turn a raster into 
lines, but that's not good enough for me. I need closed polygons that I 
later intend to import into PostGIS. Gdal_contour would give usable 
intermediate results (i.e, it produces lines that I think can be turned 
into closed polygons), if it wasn't for the open polygons that are 
created where the grid values touch NODATA values.

    I have considered using GRASS (r.poly) but I need to embed the 
geoprocessing library on an research application that I will deploy to 
Windows desktop computers. To be completely honest, I can't even 
install  GRASS on my Windows workstation, so I have no hopes of 
deploying it via a neat installer :(( . That's probably due to the lack 
of intelligence and patience, and is another story.

    Any help with this would be greatly appreciated.

    Cheers,

Ricardo Pereira
Software Engineer and GIS Application Developer

   

   
From jedwards at prologic-inc.com  Wed Jan  9 13:59:18 2008
From: jedwards at prologic-inc.com (John Edwards)
Date: Wed Jan  9 14:00:40 2008
Subject: [gdal-dev] GDAL plugins and ArcGIS 9.2
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D047D2F2B@vader.prologic-inc.com>

Is there a branch of GDAL that was used for ArcGIS 9.2?  I'm trying
unsuccessfully to create a plugin for use in ArcGIS and wondering if the
source code that built ESRI's version of gdal13.dll is available.

 

It was implied in a previous thread
(http://lists.osgeo.org/pipermail/gdal-dev/2007-June/013309.html) that
there is an existing branch but I have been unable to find it.

 

John

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080109/2ba0e6e3/attachment.html
From ari.jolma at tkk.fi  Wed Jan  9 14:19:28 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Jan  9 14:18:13 2008
Subject: [gdal-dev] Open source API to convert raster to polygons?
In-Reply-To: <4784E4F8.70409@tdwg.org>
References: <4784E4F8.70409@tdwg.org>
Message-ID: <47851E40.70907@tkk.fi>

Ricardo Scachetti Pereira kirjoitti:
>    Hi all,
>      Does anyone know of any open source geoprocessing APIs that I can 
> use to convert raster maps into polygons (as a shapefile or SQL for 
> PostGIS)? Does QGIS do that?
>
>    I know that GDAL (via gdal_contour utility) can turn a raster into 
> lines, but that's not good enough for me. I need closed polygons that 
> I later intend to import into PostGIS. Gdal_contour would give usable 
> intermediate results (i.e, it produces lines that I think can be 
> turned into closed polygons), if it wasn't for the open polygons that 
> are created where the grid values touch NODATA values.
>
>    I have considered using GRASS (r.poly) but I need to embed the 
> geoprocessing library on an research application that I will deploy to 
> Windows desktop computers. To be completely honest, I can't even 
> install  GRASS on my Windows workstation, so I have no hopes of 
> deploying it via a neat installer :(( . That's probably due to the 
> lack of intelligence and patience, and is another story.
>
>    Any help with this would be greatly appreciated.

Dear Ricardo,

I've written a raster to polygon converter, which produces closed 
polygons from raster images. The algorithm is not speed optimized nor 
proven correct but quite ok. The polygons are OGR features and can thus 
be saved to PostGIS. This is, however, a method that I've written in 
Perl for the Geo::Raster class, which is a Perl interface to an 
in-memory libral raster. On the other hand, the Geo::Raster class 
contains methods to make or clip the raster from a raster opened with 
GDAL. These tools are available as Windows versions (the latest zip from 
http://map.hut.fi/files/Geoinformatica/snapshots/ which contains DLLs of 
the libraries and perl.exe and lots of Perl code).

A neat installer is possible, but the Geoinformatica distribution 
contains _a lot_ of files and is not very small. As a plus, 
Geoinformatica contains a GUI toolkit (GTK+ based)

If you're interested to try it out, I'll be glad to help as my time permits.

Regards,

Ari

>
>    Cheers,
>
> Ricardo Pereira
> Software Engineer and GIS Application Developer
>
>  
>   _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From leretha.childress at baronservices.com  Wed Jan  9 14:34:00 2008
From: leretha.childress at baronservices.com (LeRetha Childress)
Date: Wed Jan  9 14:34:01 2008
Subject: [gdal-dev] viewing data
Message-ID: <3FADD8F0D7BD48F4A5FE8A6F66C89974@lerethac>

I'm new to using GDAL and I was just wondering if anyone can help me out.

Is there a GDAL utility that will let you create a text file of the data
that you can then open and view in say MSWord or Notepad?

 

Thanks 

LeRetha

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080109/cafa795e/attachment.html
From Tom.Kralidis at ec.gc.ca  Wed Jan  9 14:43:35 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Jan  9 14:43:40 2008
Subject: [gdal-dev] viewing data
In-Reply-To: <3FADD8F0D7BD48F4A5FE8A6F66C89974@lerethac>
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F036CEEA4@ecburexch1.ontario.int.ec.gc.ca>


I've used ogr2ogr in the past to convert various vector data to CSV for
use in MS Excel, but this won't include the geometry data -- unless you
have that data encoded in a non geometry object in your source dataset.

..Tom
 


________________________________

	From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of LeRetha Childress
	Sent: 09 January, 2008 2:34 PM
	To: gdal-dev@lists.osgeo.org
	Subject: [gdal-dev] viewing data
	
	

	I'm new to using GDAL and I was just wondering if anyone can
help me out.

	Is there a GDAL utility that will let you create a text file of
the data that you can then open and view in say MSWord or Notepad?

	 

	Thanks 

	LeRetha

From even.rouault at mines-paris.org  Wed Jan  9 14:53:50 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan  9 14:53:54 2008
Subject: [gdal-dev] viewing data
In-Reply-To: <2DC5CCA14756424BBBEE8B4B2E4A682F036CEEA4@ecburexch1.ontario.int.ec.gc.ca>
References: <2DC5CCA14756424BBBEE8B4B2E4A682F036CEEA4@ecburexch1.ontario.int.ec.gc.ca>
Message-ID: <200801092053.50441.even.rouault@mines-paris.org>

You may want to try the following trick if you only have to deal with point 
geometry.

If you use the BNA driver as an output of ogr2ogr, by doing :
"ogr2ogr -f BNA -dsco MULTILINE=NO output.bna input"

you will get a file that can be read as a CSV file in Excel, with the 
coordinates in 2 columns. The last 2 columns contain the X and Y coordinates.

like :
"Tropical","-13.4",1,138.5000000000,-13.4000000000
"Tropical","-13.9",1,141.3000000000,-13.9000000000

Best regards,
Even

Le Wednesday 09 January 2008 20:43:35 Kralidis,Tom [Burlington], vous avez 
?crit?:
> I've used ogr2ogr in the past to convert various vector data to CSV for
> use in MS Excel, but this won't include the geometry data -- unless you
> have that data encoded in a non geometry object in your source dataset.
>
> ..Tom
>
>
>
> ________________________________
>
> 	From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of LeRetha Childress
> 	Sent: 09 January, 2008 2:34 PM
> 	To: gdal-dev@lists.osgeo.org
> 	Subject: [gdal-dev] viewing data
>
>
>
> 	I'm new to using GDAL and I was just wondering if anyone can
> help me out.
>
> 	Is there a GDAL utility that will let you create a text file of
> the data that you can then open and view in say MSWord or Notepad?
>
>
>
> 	Thanks
>
> 	LeRetha
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From maplabs at light42.com  Wed Jan  9 15:14:10 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Jan  9 15:01:51 2008
Subject: [gdal-dev] viewing data
In-Reply-To: <3FADD8F0D7BD48F4A5FE8A6F66C89974@lerethac>
References: <3FADD8F0D7BD48F4A5FE8A6F66C89974@lerethac>
Message-ID: <7034B551-BEEF-11DC-9E67-000A277A733C@light42.com>

On Jan 9, 2008, at 11:34 AM, LeRetha Childress wrote:

> I?m new to using GDAL and I was just wondering if anyone can help me 
> out.
>
> Is there a GDAL utility that will let you create a text file of the 
> data that you can then open and view in say MSWord or Notepad?
>
>

Are you talking about Vectors ? (the alternative makes little sense..)

First advice - avoid Word and Notepad. If you are at all serious about 
doing this project, get yourself a decent text editor that will a) 
handle large files, and b) not harm the data unintentionally.

There is a format called Well known Text (WKT) that is a standard, and 
is more or less human readable. There are many ways to convert a given 
file to WKT.  Also, CSV is useful for Excel.. Excel is a pretty good 
choice for modest needs.

Lastly: depending on what your goals are and what resources you have, 
you may need someone to help you a lot. If this is the case, consider 
hiring someone who is knowledgeable with Open Source Tools to get you 
started. This could save untold hours and headache.

   -Brian
From jluis at ualg.pt  Wed Jan  9 15:11:07 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Jan  9 15:11:08 2008
Subject: [gdal-dev] Open source API to convert raster to polygons?
In-Reply-To: <47851E40.70907@tkk.fi>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
Message-ID: <47852A5B.4040205@ualg.pt>

Ari Jolma wrote:
> Ricardo Scachetti Pereira kirjoitti:
>>    Hi all,
>>      Does anyone know of any open source geoprocessing APIs that I 
>> can use to convert raster maps into polygons (as a shapefile or SQL 
>> for PostGIS)? Does QGIS do that?
>>
>>    I know that GDAL (via gdal_contour utility) can turn a raster into 
>> lines, but that's not good enough for me. I need closed polygons that 
>> I later intend to import into PostGIS. Gdal_contour would give usable 
>> intermediate results (i.e, it produces lines that I think can be 
>> turned into closed polygons), if it wasn't for the open polygons that 
>> are created where the grid values touch NODATA values.
>>
>>    I have considered using GRASS (r.poly) but I need to embed the 
>> geoprocessing library on an research application that I will deploy 
>> to Windows desktop computers. To be completely honest, I can't even 
>> install  GRASS on my Windows workstation, so I have no hopes of 
>> deploying it via a neat installer :(( . That's probably due to the 
>> lack of intelligence and patience, and is another story.
>>
>>    Any help with this would be greatly appreciated.
>
> Dear Ricardo,
>
> I've written a raster to polygon converter, which produces closed 
> polygons from raster images. The algorithm is not speed optimized nor 
> proven correct but quite ok. The polygons are OGR features and can 
> thus be saved to PostGIS. This is, however, a method that I've written 
> in Perl for the Geo::Raster class, which is a Perl interface to an 
> in-memory libral raster. On the other hand, the Geo::Raster class 
> contains methods to make or clip the raster from a raster opened with 
> GDAL. These tools are available as Windows versions (the latest zip 
> from http://map.hut.fi/files/Geoinformatica/snapshots/ which contains 
> DLLs of the libraries and perl.exe and lots of Perl code).

Hi,
I am sorry but I have some difficulties in understanding this discussion.
What is a raster to polygon conversion?
I know, and have played with, vectorizing edge detected images, shape 
detection of simple forms like ellipses, lines, ridge crests on DTMs etc...
but for each of these goals the tools/algorithms used are different. 
What I do not understand is what is a generic "raster to polygon 
conversion".

Joaquim Luis

From mchapman at texelinc.com  Wed Jan  9 15:25:19 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed Jan  9 15:25:27 2008
Subject: [gdal-dev] Memory deallocation for GDALAllRegister
Message-ID: <001301c852fd$c1b55870$45200950$@com>

Grasshoppers,

 

When I call OGRRegisterAll() there is a corresponding OGRCleanupAll() to de
allocate memory.  My question is, what is the corresponding de-allocator for
GDALAllRegister()?  Right now if I call GDALAllRegister() it leaks memory on
shut down. 

 

Best regards, 

 

Martin Chapman

Chief Software Architect

Fortified Datacom Inc.

http://www.fortifieddatacom.com

mchapman@fortifieddatacom.com

303-324-1065

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080109/0f8a031b/attachment-0001.html
From even.rouault at mines-paris.org  Wed Jan  9 15:32:45 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan  9 15:32:48 2008
Subject: [gdal-dev] Memory deallocation for GDALAllRegister
In-Reply-To: <001301c852fd$c1b55870$45200950$@com>
References: <001301c852fd$c1b55870$45200950$@com>
Message-ID: <200801092132.45393.even.rouault@mines-paris.org>

You should look at the end of the main() of 
http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalinfo.c

Best regards,
Even

Le Wednesday 09 January 2008 21:25:19 Martin Chapman, vous avez ?crit?:
> Grasshoppers,
>
>
>
> When I call OGRRegisterAll() there is a corresponding OGRCleanupAll() to de
> allocate memory.  My question is, what is the corresponding de-allocator
> for GDALAllRegister()?  Right now if I call GDALAllRegister() it leaks
> memory on shut down.
>
>
>
> Best regards,
>
>
>
> Martin Chapman
>
> Chief Software Architect
>
> Fortified Datacom Inc.
>
> http://www.fortifieddatacom.com
>
> mchapman@fortifieddatacom.com
>
> 303-324-1065


From leretha.childress at baronservices.com  Wed Jan  9 15:59:38 2008
From: leretha.childress at baronservices.com (LeRetha Childress)
Date: Wed Jan  9 15:59:42 2008
Subject: [gdal-dev] viewing data points
Message-ID: <BD95E973274244ADBCF341BA85041A72@lerethac>

Is there a way that GDAL utilities can be used to view say min temperature
data at a specific lat/long?

 

LeRetha

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080109/c2ee68a9/attachment.html
From mchapman at texelinc.com  Wed Jan  9 16:07:31 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed Jan  9 16:07:39 2008
Subject: [gdal-dev] Memory deallocation for GDALAllRegister
In-Reply-To: <200801092132.45393.even.rouault@mines-paris.org>
References: <001301c852fd$c1b55870$45200950$@com>
	<200801092132.45393.even.rouault@mines-paris.org>
Message-ID: <002401c85303$a681c970$f3855c50$@com>

Even,

You are very wise in the art of GDAL.  That plugged up all of my memory leaks.  

+1 that Even is the man. :)

Best regards,

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Wednesday, January 09, 2008 1:33 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Memory deallocation for GDALAllRegister

You should look at the end of the main() of 
http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalinfo.c

Best regards,
Even

Le Wednesday 09 January 2008 21:25:19 Martin Chapman, vous avez ?crit :
> Grasshoppers,
>
>
>
> When I call OGRRegisterAll() there is a corresponding OGRCleanupAll() to de
> allocate memory.  My question is, what is the corresponding de-allocator
> for GDALAllRegister()?  Right now if I call GDALAllRegister() it leaks
> memory on shut down.
>
>
>
> Best regards,
>
>
>
> Martin Chapman
>
> Chief Software Architect
>
> Fortified Datacom Inc.
>
> http://www.fortifieddatacom.com
>
> mchapman@fortifieddatacom.com
>
> 303-324-1065


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From blake at hailmail.net  Wed Jan  9 16:33:53 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Wed Jan  9 16:33:56 2008
Subject: [gdal-dev] using gdal_translate with -dsco switch
In-Reply-To: <47852A5B.4040205@ualg.pt>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
	<47852A5B.4040205@ualg.pt>
Message-ID: <E5020D19-E35E-4ED9-8122-74CAD48FB24A@hailmail.net>

I am converting elevation data in Gtiff format to contours in KML  
format, but running into a usage problem when attempting to create 3D  
contours.

I noted the discussion here about enabling correct 3D representation  
in Google Earth (This is a great addition):
http://trac.osgeo.org/gdal/ticket/1570
and the need to use driver specific name=value option for ogr2ogr of  
"-dsco AltitudeMode=absolute" here:
http://www.gdal.org/ogr/drv_kml.html

When I attempt to use it with gdal_translate the utility simply  
returns the usage instructions. I'm guessing that either I am putting  
the flag in the wrong place or this option is not enabled in  
gdal_contour, even though I am able to successfully write KML with  
gdal_contour.

I'm running GDAL 1.5.0b2 on mac os x. This works for me:
gdal_contour -f KML -i 5.0 blakely.tif five_meter_contours.kml 		// 
Note: the -3d switch is left out intentionally since it does not seem  
to affect KML output


These do not:
gdal_contour -f KML -i 5.0 blakely.tif five_meter_contours.kml -dsco  
AltitudeMode=absolute
gdal_contour -f KML -dsco AltitudeMode=absolute -i 5.0 blakely.tif  
five_meter_contours.kml

Anyone have ideas of the problem?

Regards,

Dane

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080109/ad333bb8/attachment.html
From maplabs at light42.com  Wed Jan  9 17:05:23 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Jan  9 16:53:02 2008
Subject: [gdal-dev] using gdal_translate with -dsco switch
In-Reply-To: <E5020D19-E35E-4ED9-8122-74CAD48FB24A@hailmail.net>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
	<47852A5B.4040205@ualg.pt>
	<E5020D19-E35E-4ED9-8122-74CAD48FB24A@hailmail.net>
Message-ID: <F9ABF782-BEFE-11DC-9E67-000A277A733C@light42.com>

I think altitudeMode is for ogr2ogr using the KML driver.. thats where 
I have used it
  -Brian

On Jan 9, 2008, at 1:33 PM, Dane Springmeyer wrote:

> I am converting elevation data in Gtiff format to contours in KML 
> format, but running into a usage problem when attempting to create 3D 
> contours.
>
> I noted the discussion here about enabling correct 3D representation 
> in Google Earth (This is a great addition):
> http://trac.osgeo.org/gdal/ticket/1570
> and the need to use driver specific name=value option for ogr2ogr of 
> "-dsco AltitudeMode=absolute"?here:
> http://www.gdal.org/ogr/drv_kml.html
>
> When I attempt to use it with gdal_translate?the utility simply 
> returns the usage instructions.?I'm guessing that either I am putting 
> the flag in the wrong place or this option is not enabled in 
> gdal_contour, even though I am able to successfully write KML with 
> gdal_contour.?
>
> I'm running?GDAL 1.5.0b2 on mac os x. This works for me:
> gdal_contour -f KML -i 5.0 blakely.tif five_meter_contours.kml?        
>       //Note: the -3d switch is left out intentionally since it does 
> not seem to affect KML output
>
>
> These do not:
> gdal_contour -f KML -i 5.0 blakely.tif?five_meter_contours.kml?-dsco 
> AltitudeMode=absolute
> gdal_contour -f KML -dsco AltitudeMode=absolute -i 5.0 
> blakely.tif?five_meter_contours.kml
>
> Anyone have ideas of the problem? ?
>
> Regards,
>
> Dane
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From blake at hailmail.net  Wed Jan  9 18:04:06 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Wed Jan  9 18:04:08 2008
Subject: [gdal-dev] using gdal_translate with -dsco switch
In-Reply-To: <F9ABF782-BEFE-11DC-9E67-000A277A733C@light42.com>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
	<47852A5B.4040205@ualg.pt>
	<E5020D19-E35E-4ED9-8122-74CAD48FB24A@hailmail.net>
	<F9ABF782-BEFE-11DC-9E67-000A277A733C@light42.com>
Message-ID: <3BE18676-9DE3-4C32-9B0E-793E15C709C3@hailmail.net>

do gdal utilities that convert to vector formats use the same drivers  
as ogr?

-dane


On Jan 9, 2008, at 2:05 PM, Brian Hamlin wrote:

> I think altitudeMode is for ogr2ogr using the KML driver.. thats  
> where I have used it
>  -Brian
>
> On Jan 9, 2008, at 1:33 PM, Dane Springmeyer wrote:
>
>> I am converting elevation data in Gtiff format to contours in KML  
>> format, but running into a usage problem when attempting to create  
>> 3D contours.
>>
>> I noted the discussion here about enabling correct 3D  
>> representation in Google Earth (This is a great addition):
>> http://trac.osgeo.org/gdal/ticket/1570
>> and the need to use driver specific name=value option for ogr2ogr  
>> of "-dsco AltitudeMode=absolute" here:
>> http://www.gdal.org/ogr/drv_kml.html
>>
>> When I attempt to use it with gdal_translate the utility simply  
>> returns the usage instructions. I'm guessing that either I am  
>> putting the flag in the wrong place or this option is not enabled  
>> in gdal_contour, even though I am able to successfully write KML  
>> with gdal_contour.
>>
>> I'm running GDAL 1.5.0b2 on mac os x. This works for me:
>> gdal_contour -f KML -i 5.0 blakely.tif  
>> five_meter_contours.kml               //Note: the -3d switch is  
>> left out intentionally since it does not seem to affect KML output
>>
>>
>> These do not:
>> gdal_contour -f KML -i 5.0 blakely.tif five_meter_contours.kml - 
>> dsco AltitudeMode=absolute
>> gdal_contour -f KML -dsco AltitudeMode=absolute -i 5.0 blakely.tif  
>> five_meter_contours.kml
>>
>> Anyone have ideas of the problem?
>>
>> Regards,
>>
>> Dane
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lewis.milehi at gmail.com  Wed Jan  9 19:31:49 2008
From: lewis.milehi at gmail.com (keith lewis)
Date: Wed Jan  9 19:31:51 2008
Subject: [gdal-dev] viewing data
Message-ID: <c07aa7ad0801091631v63e48166l81c131d1cd1406e4@mail.gmail.com>

You can extract the attributes and geometry (point, lines and polygons) from
a Shapefile to a text file.

Here is an example:
ogr2ogr -f "CSV" output2 . -sql "select OGR_GEOM_WKT,* from parcels" -nln
parcel

The geometry field, in the CSV file, will be named OGR_GEOM_WKT.
The geometry coordinates will be in Well Known Text format.

Here is a sample of the WKT coordinates -
"POLYGON ((483368.9966979493 4813347.6753904885,483368.16060633108 ...

Please see http://www.gdal.org/ogr/ogr_sql.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080109/96892d18/attachment.html
From 2voodoo at gmx.de  Wed Jan  9 19:50:41 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Wed Jan  9 19:50:31 2008
Subject: [gdal-dev] Compiling GDAL 1.5 with Proj.4.6: proj_i.lib is missing
	all the time
Message-ID: <47856BE1.4030603@gmx.de>

Hello,

allday I tryed to get GDAL 1.5 working with Proj.4 (4.6) - without any luck.
Sure I am compiling for WinCE but this changes not that much, does it?

After fixing some things with missing files (pj_eqr, pj_glabgsm, ...) 
everything works well until proj_i.lib should be linked to GDAL - this 
does not work since proj_i.lib is never created. Did you experience this 
problem, too or do you have any ideas how to solve it? I tryed manually 
using LIB - without success.

Thank you very much
Tom
From warmerdam at pobox.com  Wed Jan  9 20:23:14 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan  9 20:23:41 2008
Subject: [gdal-dev] using gdal_translate with -dsco switch
In-Reply-To: <3BE18676-9DE3-4C32-9B0E-793E15C709C3@hailmail.net>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
	<47852A5B.4040205@ualg.pt>
	<E5020D19-E35E-4ED9-8122-74CAD48FB24A@hailmail.net>
	<F9ABF782-BEFE-11DC-9E67-000A277A733C@light42.com>
	<3BE18676-9DE3-4C32-9B0E-793E15C709C3@hailmail.net>
Message-ID: <47857382.8040308@pobox.com>

Dane Springmeyer wrote:
> do gdal utilities that convert to vector formats use the same drivers as 
> ogr?

Dane,

Generally yes, though I think gdaltindex is an anomoly in that it uses
shapelib directly rather than going through OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mateusz at loskot.net  Thu Jan 10 01:03:55 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jan 10 01:04:01 2008
Subject: [gdal-dev] Away for a few weeks
Message-ID: <4785B54B.5030202@loskot.net>

Folks,

I'd just like to inform that during a few next weeks I'm going to be
away or offline, so I'll not be able to monitor the list.
I'm sending this information because there may be some open discussions
I've participated in or perhaps some WinCE questions will appear.
Unfortunately, I'll not be able to monitor them for the time of my
absence.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From Sjur.A.Kolberg at sintef.no  Thu Jan 10 02:48:08 2008
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Thu Jan 10 02:50:15 2008
Subject: [gdal-dev] Compiling GDAL 1.5 with Proj.4.6: 
	proj_i.lib is missingall the time
In-Reply-To: <47856BE1.4030603@gmx.de>
References: <47856BE1.4030603@gmx.de>
Message-ID: <AC3559779B145744A3FA06C52D00BD0F02103055@SINTEFXCH01.sintef.no>


Tom,

If you are using Visual Studio to compile proj, there is an option in
Project properties - Linker - Advanced called Import Library, where you
specify the .lib to be generated.

Otherwise, I have had success with creating a R.lib from R.dll by using
first DUMPBIN/EXPORTS, editing the definition file, and then use LIB to
create the .lib file. This enables me to link R.lib into programs that
use R.dll.

Below is the top of the file I input to LIB, after editing. The comments
give the procedure, just substitute proj for R. 

If this does not work, I'm lost.

Sjur  :-)




; R.def : Export function list from R 2.6.0
; Generated using DUMPBIN /EXPORTS /OUT:R.def R.dll and editing. 
; This file in used to create R.lib using LIB /def:r.def /out:r.lib
; DUMPBIN.EXE and LIB.EXE reside in C:\Program Files\Microsoft Visual
Studio 8\VC>

LIBRARY      "R"
; DESCRIPTION  'R 2.6.0 Dynamic Link Library'

EXPORTS
    ; This is the list of exported function names
ATTRIB
AllDevicesKilled
BODY
Brent_fmin
CAAR
CAD4R
CADDDR
CADDR
<etc. There is no keyword or other signal at the end.>




> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Tom Kazimiers
> Sent: 10 januar 2008 01:51
> To: GDAL-Mailinglist
> Subject: [gdal-dev] Compiling GDAL 1.5 with Proj.4.6: 
> proj_i.lib is missingall the time
> 
> Hello,
> 
> allday I tryed to get GDAL 1.5 working with Proj.4 (4.6) - 
> without any luck.
> Sure I am compiling for WinCE but this changes not that much, does it?
> 
> After fixing some things with missing files (pj_eqr, 
> pj_glabgsm, ...) everything works well until proj_i.lib 
> should be linked to GDAL - this does not work since 
> proj_i.lib is never created. Did you experience this problem, 
> too or do you have any ideas how to solve it? I tryed 
> manually using LIB - without success.
> 
> Thank you very much
> Tom
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From Sjur.A.Kolberg at sintef.no  Thu Jan 10 03:04:29 2008
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Thu Jan 10 03:04:32 2008
Subject: [gdal-dev] Compiling GDAL 1.5 with Proj.4.6: 
	proj_i.lib is missingall the time
In-Reply-To: <AC3559779B145744A3FA06C52D00BD0F02103054@SINTEFXCH01.sintef.no>
References: <47856BE1.4030603@gmx.de> 
	<AC3559779B145744A3FA06C52D00BD0F02103054@SINTEFXCH01.sintef.no>
Message-ID: <AC3559779B145744A3FA06C52D00BD0F02103056@SINTEFXCH01.sintef.no>

 
Oops,

The CR/LF's in the file I copied in disappeared in the mail.
The export function names should be on separate lines.
Also, all semicolons start a new line.

The .def file again:

; R.def : Export function list from R 2.6.0
; Generated using DUMPBIN /EXPORTS /OUT:R.def R.dll and editing.
; This file in used to create R.lib using LIB /def:r.def /out:r.lib
; DUMPBIN.EXE and LIB.EXE reside in C:\Program Files\Microsoft Visual
Studio 8\VC

LIBRARY      "R"
; DESCRIPTION  'R 2.6.0 Dynamic Link Library'

EXPORTS
     ; This is the list of exported function names
ATTRIB 
AllDevicesKilled
BODY
Brent_fmin
CAAR
CAD4R
CADDDR
CADDR
...etc. There is no keyword or other signal at the end.



 
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.osgeo.org 
> > [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Tom Kazimiers
> > Sent: 10 januar 2008 01:51
> > To: GDAL-Mailinglist
> > Subject: [gdal-dev] Compiling GDAL 1.5 with Proj.4.6: 
> > proj_i.lib is missingall the time
> > 
> > Hello,
> > 
> > allday I tryed to get GDAL 1.5 working with Proj.4 (4.6) - 
> without any 
> > luck.
> > Sure I am compiling for WinCE but this changes not that 
> much, does it?
> > 
> > After fixing some things with missing files (pj_eqr, 
> pj_glabgsm, ...) 
> > everything works well until proj_i.lib should be linked to 
> GDAL - this 
> > does not work since proj_i.lib is never created. Did you experience 
> > this problem, too or do you have any ideas how to solve it? I tryed 
> > manually using LIB - without success.
> > 
> > Thank you very much
> > Tom
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
From ari.jolma at tkk.fi  Thu Jan 10 05:38:07 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Jan 10 05:38:47 2008
Subject: [gdal-dev] Open source API to convert raster to polygons?
In-Reply-To: <47852A5B.4040205@ualg.pt>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
	<47852A5B.4040205@ualg.pt>
Message-ID: <4785F58F.9050809@tkk.fi>

Joaquim Luis kirjoitti:
> Ari Jolma wrote:
>>
>> I've written a raster to polygon converter, which produces closed 
>> polygons from raster images.
>
> Hi,
> I am sorry but I have some difficulties in understanding this discussion.
> What is a raster to polygon conversion?
> I know, and have played with, vectorizing edge detected images, shape 
> detection of simple forms like ellipses, lines, ridge crests on DTMs 
> etc...
> but for each of these goals the tools/algorithms used are different. 
> What I do not understand is what is a generic "raster to polygon 
> conversion".

The raster to vector converter I've written is a tool that is based on 
an algorithm that you would apply after some kind of edge detection, 
posterize, classification, etc. tool. The algorithm works on integer 
pixel values and two pixels belong to an area if they have the same 
integer value. In my case I needed it for some work with classified land 
cover images, which have by nature only few pixel values.

The contour line algorithm in GDAL is different in the sense that it 
works on DEMs and it does not assume integer values and draws the lines 
through locations it finds using linear interpolation.

Cheers,

Ari

-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From 2voodoo at gmx.de  Thu Jan 10 06:39:59 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Thu Jan 10 06:40:02 2008
Subject: [gdal-dev] Compiling GDAL 1.5 with Proj.4.6: proj_i.lib is
	missingall the time
In-Reply-To: <AC3559779B145744A3FA06C52D00BD0F02103055@SINTEFXCH01.sintef.no>
References: <47856BE1.4030603@gmx.de>
	<AC3559779B145744A3FA06C52D00BD0F02103055@SINTEFXCH01.sintef.no>
Message-ID: <4786040F.7050104@gmx.de>

Sjur,

thanks for your suggestions - I tryed both the Visual Studio Setting and 
building manually.
In Visual Studio everything was set correctly and building the def 
manually gave me the solution why it is (still) not working.

The generated DEF File looks like the following:
---------------------------
Dump of file proj.dll

File Type: DLL

Summary

2000 .data
1000 .pdata
5000 .rdata
3000 .reloc
41000 .text
---------------------------

(the --- are not in the file)
So this seems to me as proj.dll does not export anything and thus the 
.lib is not created automatically.
This is strange because the Visual Studio project has a .def file itself 
where functions are exported and some "extern" terms before exported 
functions.

Am I something missing? (And Maybe I should ask for this on the Proj.4 
mailing list)

Thanks,
Tom

From ricardo at tdwg.org  Thu Jan 10 06:42:33 2008
From: ricardo at tdwg.org (Ricardo Scachetti Pereira)
Date: Thu Jan 10 06:42:47 2008
Subject: [gdal-dev] Open source API to convert raster to polygons?
In-Reply-To: <47852A5B.4040205@ualg.pt>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
	<47852A5B.4040205@ualg.pt>
Message-ID: <478604A9.1050201@tdwg.org>

    Sorry Joaquim,

    You are right. I haven't been precise enough.

    What I really need is some API or software library (preferably in C 
or C++) that I could use to convert ESRI Arc/Info Grids (the binary 
kind) to a Shapefile of polygons. If a library isn't available, a 
command line utility that I can call from C/C++ would suffice.

    I hope this clarify things a bit.

    Cheers,

Ricardo


Joaquim Luis wrote:
>> Ricardo Scachetti Pereira kirjoitti:
>>>    Hi all,
>>>      Does anyone know of any open source geoprocessing APIs that I 
>>> can use to convert raster maps into polygons (as a shapefile or SQL 
>>> for PostGIS)? Does QGIS do that?
> Hi,
> I am sorry but I have some difficulties in understanding this discussion.
> What is a raster to polygon conversion?

From dany.geotools at gmail.com  Thu Jan 10 08:11:19 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Thu Jan 10 08:11:22 2008
Subject: [Gdal-dev] JP2MrSID driver. How to get it?
In-Reply-To: <4713F827.6060105@pobox.com>
References: <7221db410710151300j3965151cj8aaf1d52089ddf77@mail.gmail.com>
	<4713F827.6060105@pobox.com>
Message-ID: <7221db410801100511v7d7b71cwfca227c63d530376@mail.gmail.com>

Hi,
I'm working on LINUX (Ubuntu) to fix some things on ImageIo-ext project.
I have read some olds threads talking about conflicts between Kakadu and
MrSID's Jpeg2000 support.
I'm using GDAL 1.4.2 with MrSid (GeoExpress Decode SDK 6.0.7.1407) and
Kakadu 5.2.6.

When building GDAL after configuring it for MrSid and Kakadu, I get only
JP2KAK and MrSID (using GDALInfo --formats).
I then attempted to edit GDALMake.opt after ./configure, adding MRSID_FLAGS
=   -DMRSID_J2K and I get errors when building.
However I have noticed that when configuring with support for only MrSID,
JP2MrSID appears in the list of supported formats (So, manually setting
MRSID_FLAGS is not required :P)

It is possible to support both JP2KAK and JP2MRSID driver on Linux?
Thanks a lot.

Best Regards,
Daniele



On Oct 16, 2007 12:30 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Daniele Romagnoli wrote:
> > Hi list,
> > I have just a simple question for you.
> >
> > I would like to test all the powerful drivers which are capable of
> > handle Jpeg2000 format.
> > I noticed that GDAL provides a wide set of JP2 drivers:
> >
> > JP2KAK
> > JP2ECW
> > JP2MrSID
> >
> > I already successfully tested the JP2KAK and the JP2ECW (by setting
> > GDAL_SKIP = JP2KAK) drivers.
> > Now I'm attempting to work with the JP2MrSID driver but I dont know how
> > to get it. I set GDAL_SKIP = JP2KAK JP2ECW (space separated list) but
> > calling "gdalinfo --formats" don't display JP2MrSID somewhere (only the
> > simple "MrSID" appears).
> >
> > Do I need to properly configure NMAKE.opt in some manner? (I already
> > enabled MrSID support)
> > Or JP2MrSID is just a symbolic name to say that MrSID driver also allows
> > reading JP2 files? (Although JP2ECW and ECW appear separately)
> >
> > Thank you very much for your help.
>
> Daniele,
>
> I see the nmake.opt in subversion lacks the MRSID_FLAGS = -DMRSID_J2K
> required to enable the JP2MRSID driver.  I have added this in trunk and
> 1.4 branch.  But basically just add this in your nmake.opt, just after
> MRSID_LIB for instance:
>
> # Comment out the following to supress JP2MRSID driver.
> MRSID_FLAGS =   -DMRSID_J2K
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080110/b7eeb42c/attachment.html
From Steven.Mullins at dmme.virginia.gov  Thu Jan 10 08:34:11 2008
From: Steven.Mullins at dmme.virginia.gov (Mullins, Steven)
Date: Thu Jan 10 08:34:31 2008
Subject: [gdal-dev] gdal_merge multiple files
Message-ID: <1C6192D3F2755C45A2D0658D6FE5ED8304C3914E@exch2k1.dmmenet.mme.state.va.us>

It seems that gdal_merge does not like globbing.  Are there other ways of getting a list of images into gdal_merge without putting them all on the command line?  I think I did this once before with a similar gdal command but used a config file???

Steve
From estrada.adam at gmail.com  Thu Jan 10 10:19:57 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Thu Jan 10 10:20:40 2008
Subject: [gdal-dev] Re: gdal_merge multiple files
In-Reply-To: <1C6192D3F2755C45A2D0658D6FE5ED8304C3914E@exch2k1.dmmenet.mme.state.va.us>
References: <1C6192D3F2755C45A2D0658D6FE5ED8304C3914E@exch2k1.dmmenet.mme.state.va.us>
Message-ID: <fef2104f-5842-4bb3-9a65-6c94ed6093ef@k2g2000hse.googlegroups.com>

Steve,
    I am using FWTools version 2.0.3 and the following command line
seems to work just fine.

python gdal_merge.py -n 0 -o \\fscluster\Images\Archive\Images
\31\mosaic_31.tif -of GTiff -co "TFW=YES" -v --optfile \\fscluster
\Images\Archive\Images\31\31.txt

The text file is a directory list that I created in Windows by typing
[ dir /b /s *.tif > 31.txt ]

I hope this helps.

AWE

On Jan 10, 8:34?am, "Mullins, Steven"
<Steven.Mull...@dmme.virginia.gov> wrote:
> It seems that gdal_merge does not like globbing. ?Are there other ways of getting a list of images into gdal_merge without putting them all on the command line? ?I think I did this once before with a similar gdal command but used a config file???
>
> Steve
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From leretha.childress at baronservices.com  Thu Jan 10 11:25:08 2008
From: leretha.childress at baronservices.com (LeRetha Childress)
Date: Thu Jan 10 11:25:05 2008
Subject: [gdal-dev] gdal file conversions
Message-ID: <38A80685B13D477C84485426408615A3@lerethac>

I am using NDFD .bin files such as ds.mint.bin. Is there a way to convert
them to a text format that would include coordinate information as well as
the data values?

I have been able to get a grid of temps with 

 

gdal_translate  -of AAIGrid -b 1 ds.mint.bin outputfile

 

but I would like to be able to create a file that shows lat long values
along with the temps.

 

Thanks

LeRetha Childress

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080110/f047d510/attachment.html
From leretha.childress at baronservices.com  Thu Jan 10 11:28:36 2008
From: leretha.childress at baronservices.com (LeRetha Childress)
Date: Thu Jan 10 11:28:34 2008
Subject: [gdal-dev] re: data viewing
Message-ID: <1FE7900973CB49229ADF5785ACD6A561@lerethac>

I have had many suggestions to use ogr2ogr file conversion to .csv file for
viewing data and that would be great but ogr can not recognize the file
format I am using.

I am using NDFD .bin files such as ds.mint.bin and I have been unsuccessful
in getting the file converted to a format ogr2ogr can recognize.

Any suggestions?

 

Thanks

LeRetha Childress

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080110/f00562ff/attachment.html
From warmerdam at pobox.com  Thu Jan 10 11:31:57 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 10 11:32:22 2008
Subject: [gdal-dev] gdal file conversions
In-Reply-To: <38A80685B13D477C84485426408615A3@lerethac>
References: <38A80685B13D477C84485426408615A3@lerethac>
Message-ID: <4786487D.9060905@pobox.com>

LeRetha Childress wrote:
> I am using NDFD .bin files such as ds.mint.bin. Is there a way to 
> convert them to a text format that would include coordinate information 
> as well as the data values?
> 
> I have been able to get a grid of temps with
> 
>  
> 
> gdal_translate  -of AAIGrid ?b 1 ds.mint.bin outputfile
> 
>  
> 
> but I would like to be able to create a file that shows lat long values 
> along with the temps.

LeRetha,

The gdal2xyz.py script will write out a file with "x y pixelvalue", one per
line in a text file.  It lives in swig/python/samples in the GDAL 1.5 source
tree and may be installed if you have Python enabled.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Thu Jan 10 11:45:14 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 10 11:45:43 2008
Subject: [Gdal-dev] JP2MrSID driver. How to get it?
In-Reply-To: <7221db410801100511v7d7b71cwfca227c63d530376@mail.gmail.com>
References: <7221db410710151300j3965151cj8aaf1d52089ddf77@mail.gmail.com>
	<4713F827.6060105@pobox.com>
	<7221db410801100511v7d7b71cwfca227c63d530376@mail.gmail.com>
Message-ID: <47864B9A.4080107@pobox.com>

Daniele Romagnoli wrote:
> Hi,
> I'm working on LINUX (Ubuntu) to fix some things on ImageIo-ext project.
> I have read some olds threads talking about conflicts between Kakadu and 
> MrSID's Jpeg2000 support.
> I'm using GDAL 1.4.2 with MrSid (GeoExpress Decode SDK 6.0.7.1407) and 
> Kakadu 5.2.6.
> 
> When building GDAL after configuring it for MrSid and Kakadu, I get only 
> JP2KAK and MrSID (using GDALInfo --formats).
> I then attempted to edit GDALMake.opt after ./configure, adding 
> MRSID_FLAGS =   -DMRSID_J2K and I get errors when building.
> However I have noticed that when configuring with support for only 
> MrSID, JP2MrSID appears in the list of supported formats (So, manually 
> setting MRSID_FLAGS is not required :P)
> 
> It is possible to support both JP2KAK and JP2MRSID driver on Linux?
> Thanks a lot.

Daniele,

I see MRSID_J2K is deliberately excluded by configure if Kakadu is being
built in.  I don't recall all the details, but the MrSID libraries include
a variant of Kakadu as I understand resulting in (apparently) various kinds
of symbol conflict problems.

When MRSID_J2K is defined, -lltikdu is also added to the link libraries.  If
you added this you could likely at least experiement with having both enabled
at the same time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Steven.Mullins at dmme.virginia.gov  Thu Jan 10 12:20:42 2008
From: Steven.Mullins at dmme.virginia.gov (Mullins, Steven)
Date: Thu Jan 10 12:21:10 2008
Subject: [gdal-dev] Re: gdal_merge multiple files
Message-ID: <1C6192D3F2755C45A2D0658D6FE5ED8304C39152@exch2k1.dmmenet.mme.state.va.us>

That was it... --optfile.  I used that before but could not remember it.

Thanks!

Steve

-----Original Message-----
From: estrada.adam@gmail.com [mailto:estrada.adam@gmail.com]
Sent: Thu, January 10, 2008 10:20 AM
To: 
Subject: [gdal-dev] Re: gdal_merge multiple files


Steve,
    I am using FWTools version 2.0.3 and the following command line
seems to work just fine.

python gdal_merge.py -n 0 -o \\fscluster\Images\Archive\Images
\31\mosaic_31.tif -of GTiff -co "TFW=YES" -v --optfile \\fscluster
\Images\Archive\Images\31\31.txt

The text file is a directory list that I created in Windows by typing
[ dir /b /s *.tif > 31.txt ]

I hope this helps.

AWE

On Jan 10, 8:34?am, "Mullins, Steven"
<Steven.Mull...@dmme.virginia.gov> wrote:
> It seems that gdal_merge does not like globbing. ?Are there other ways of getting a list of images into gdal_merge without putting them all on the command line? ?I think I did this once before with a similar gdal command but used a config file???
>
> Steve
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Thu Jan 10 12:34:29 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 10 12:34:56 2008
Subject: [gdal-dev] GDAL plugins and ArcGIS 9.2
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D047D2F2B@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730D047D2F2B@vader.prologic-inc.com>
Message-ID: <47865725.4080207@pobox.com>

John Edwards wrote:
> Is there a branch of GDAL that was used for ArcGIS 9.2?  I?m trying 
> unsuccessfully to create a plugin for use in ArcGIS and wondering if the 
> source code that built ESRI?s version of gdal13.dll is available.

John,

There is no specific ArcGIS branch off GDAL 1.3. In theory I think you
should be able to build a plugin using MSVC 7.0 (aka MS Visual Studio 2002
.NET) and any of the GDAL 1.3.x releases.  In practice I'm not sure if
there are particular options required.

I'll leave a more comprehensive response to others who know more about this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Chris.Barker at noaa.gov  Thu Jan 10 14:18:34 2008
From: Chris.Barker at noaa.gov (Chris Barker)
Date: Thu Jan 10 14:18:57 2008
Subject: [gdal-dev] Open source API to convert raster to polygons?
In-Reply-To: <478604A9.1050201@tdwg.org>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
	<47852A5B.4040205@ualg.pt> <478604A9.1050201@tdwg.org>
Message-ID: <47866F8A.10101@noaa.gov>

Ricardo Scachetti Pereira wrote:
>    What I really need is some API or software library (preferably in C 
> or C++) that I could use to convert ESRI Arc/Info Grids (the binary 
> kind) to a Shapefile of polygons.

Well, no, that doesn't answer the question at all. Polygons and Raster 
data are completely different concepts. Raster data is one or more 
values at a bunch of points on a grid -- what do you want your polygons 
to represent? I can think of two fairly obvious possibilities:

1) There are polygons visually represented in the raster -- maybe is was 
actually created by rendering polygons in the first place (like a map 
with boundaries or something). In this case, you're looking for line 
tracing or edge-detection tools.

2) Your raster represent some continuous field, like elevation n a DEM . 
In this case, you might want to contour the data, and get the contours 
as polygons. If this is the case, look for contouring code.

There are probably an infinite number of other ways one might want to 
extract polygons from raster data -- we need to know what you're trying 
to do to help any more.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From timmichelsen at gmx-topmail.de  Thu Jan 10 15:54:09 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Thu Jan 10 15:54:13 2008
Subject: [gdal-dev] converting csv to kml: locations displaced in Google
	Earth
Message-ID: <478685F1.6070601@gmx-topmail.de>

Hello,
I would like to convert a csv file to kml. When I load the resulting KML
into Googleearth (GE) the generated placemarks inside the file are
totally displaced.
What could be the reason?
Could it be that XML decription is used too old?

When I export my places from GE I read this line:
<kml xmlns="http://earth.google.com/kml/2.1">

In the generated KML file I can read:
<kml xmlns="http://earth.google.com/kml/2.0">

Here are the test files:
Latitude,Longitude,Name
48.1,0.25,"First point"
49.2,1.1,"Second point"
47.5,0.75,"Third point"

the command line I used:
ogr2ogr -f "KML" test.kml test.csv

the KML:
<?xml version="1.0" encoding="utf-8" ?>
<kml xmlns="http://earth.google.com/kml/2.0">
<Document><Folder><name>test</name>
     <Placemark>
       <description><![CDATA[
         <b>Latitude:</b> <i>48.1</i><br />
         <b>Longitude:</b> <i>0.25</i><br />
         <b>Name:</b> <i>First point</i><br />
      ]]></description>  </Placemark>
     <Placemark>
       <description><![CDATA[
         <b>Latitude:</b> <i>49.2</i><br />
         <b>Longitude:</b> <i>1.1</i><br />
         <b>Name:</b> <i>Second point</i><br />
      ]]></description>  </Placemark>
     <Placemark>
       <description><![CDATA[
         <b>Latitude:</b> <i>47.5</i><br />
         <b>Longitude:</b> <i>0.75</i><br />
         <b>Name:</b> <i>Third point</i><br />
      ]]></description>  </Placemark>
</Folder></Document></kml>

Attached you find the screenshot from GE.

I would highly appreciate your hints and help.

Kind regards,
Timmie

P.S. The Mailserver would let my inital mail through. This one comes 
with a smaller image.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-kml_google-earth_full_small.jpg
Type: image/jpeg
Size: 11901 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080110/d5390d79/test-kml_google-earth_full_small.jpg
From even.rouault at mines-paris.org  Thu Jan 10 16:19:53 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 10 16:19:57 2008
Subject: [gdal-dev] converting csv to kml: locations displaced in Google
	Earth
In-Reply-To: <478685F1.6070601@gmx-topmail.de>
References: <478685F1.6070601@gmx-topmail.de>
Message-ID: <200801102219.53919.even.rouault@mines-paris.org>

Answers below :

Le Thursday 10 January 2008 21:54:09 Tim Michelsen, vous avez ?crit?:
> Hello,
> I would like to convert a csv file to kml. When I load the resulting KML
> into Googleearth (GE) the generated placemarks inside the file are
> totally displaced.
> What could be the reason?
> Could it be that XML decription is used too old?
>
> When I export my places from GE I read this line:
> <kml xmlns="http://earth.google.com/kml/2.1">
>
> In the generated KML file I can read:
> <kml xmlns="http://earth.google.com/kml/2.0">

OGR KML driver exports KML 2.0 for the moment, but that shouldn't be a 
problem.
>
> Here are the test files:
> Latitude,Longitude,Name
> 48.1,0.25,"First point"
> 49.2,1.1,"Second point"
> 47.5,0.75,"Third point"
>
> the command line I used:
> ogr2ogr -f "KML" test.kml test.csv
>
> the KML:
> <?xml version="1.0" encoding="utf-8" ?>
> <kml xmlns="http://earth.google.com/kml/2.0">
> <Document><Folder><name>test</name>
>      <Placemark>
>        <description><![CDATA[
>          <b>Latitude:</b> <i>48.1</i><br />
>          <b>Longitude:</b> <i>0.25</i><br />
>          <b>Name:</b> <i>First point</i><br />
>       ]]></description>  </Placemark>
>      <Placemark>
>        <description><![CDATA[
>          <b>Latitude:</b> <i>49.2</i><br />
>          <b>Longitude:</b> <i>1.1</i><br />
>          <b>Name:</b> <i>Second point</i><br />
>       ]]></description>  </Placemark>
>      <Placemark>
>        <description><![CDATA[
>          <b>Latitude:</b> <i>47.5</i><br />
>          <b>Longitude:</b> <i>0.75</i><br />
>          <b>Name:</b> <i>Third point</i><br />
>       ]]></description>  </Placemark>
> </Folder></Document></kml>
>

The generated KML file is obviously not what you would expect (it has output 
all the CSV fields into the description tag, and GE by default put such 
placemark at (0?,0?), which is at the west of Africa) . But that can be 
logically explained. You can't use a CSV file as simply as you do. If you 
read more carefully http://www.gdal.org/ogr/drv_csv.html, you'll see that you 
need to create a VRT file, test.vrt, and do ogr2ogr on that file, not on the 
original CSV file.

> Attached you find the screenshot from GE.
>
> I would highly appreciate your hints and help.
>
> Kind regards,
> Timmie
>
> P.S. The Mailserver would let my inital mail through. This one comes
> with a smaller image.


From blake at hailmail.net  Thu Jan 10 16:51:09 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Thu Jan 10 16:51:14 2008
Subject: [gdal-dev] converting csv to kml: locations displaced in Google
	Earth
In-Reply-To: <478685F1.6070601@gmx-topmail.de>
References: <478685F1.6070601@gmx-topmail.de>
Message-ID: <1BA12BA0-AC4C-435C-B94B-A90249B0FCBD@hailmail.net>

Hi Tim,

I was just finishing writing you as Even's email came in... I'm going  
to try what he says about the vrt driver - that's interesting. My  
previous thoughts:

----

It looks like the ogr2ogr command is not forming the xml correctly. I  
have not used ogr2ogr with csv before, but I can help by giving you  
an example of what kind of KML you should be looking for to be output.

The example of:

> Latitude,Longitude,Name
> 48.1,0.25,"First point"
> 49.2,1.1,"Second point"
> 47.5,0.75,"Third point"

should become something like:

<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.2">
<Document>
	<name>Timmie's example KML from CSV</name>
		<Placemark>
			<name>First point</name>
			<Point>
				<coordinates>0.25,48.1,0</coordinates>
			</Point>
		</Placemark>
		<Placemark>
			<name>Second point</name>
			<Point>
				<coordinates>1.1,49.2,0</coordinates>
			</Point>
		</Placemark>
		<Placemark>
			<name>Third point</name>
			<Point>
				<coordinates>0.75,47.5,0</coordinates>
			</Point>
		</Placemark>
</Document>
</kml>

Try saving that XML as a .kml file and opening in GE to confirm. What  
is happening in the KML clip you sent before is that the coordinates  
are being placed inside the tag for the balloon or popup window.  
That's fine, but they also need to be placed....  
<Placemark><Point><coordinates> **HERE** </coordinates></Point></ 
Placemark> otherwise GE won't know where to plot them.

Maybe someone else can comment on how to property format your CSV to  
be read by ogr2ogr, or you could try GPSBABEL as a download:
http://www.gpsbabel.org/htmldoc-development/fmt_csv.html

or online:
http://www.gpsvisualizer.com/gpsbabel/


Does that help?

Cheers,

Dane




On Jan 10, 2008, at 12:54 PM, Tim Michelsen wrote:

> Hello,
> I would like to convert a csv file to kml. When I load the  
> resulting KML
> into Googleearth (GE) the generated placemarks inside the file are
> totally displaced.
> What could be the reason?
> Could it be that XML decription is used too old?
>
> When I export my places from GE I read this line:
> <kml xmlns="http://earth.google.com/kml/2.1">
>
> In the generated KML file I can read:
> <kml xmlns="http://earth.google.com/kml/2.0">
>
> Here are the test files:
> Latitude,Longitude,Name
> 48.1,0.25,"First point"
> 49.2,1.1,"Second point"
> 47.5,0.75,"Third point"
>
> the command line I used:
> ogr2ogr -f "KML" test.kml test.csv
>
> the KML:
> <?xml version="1.0" encoding="utf-8" ?>
> <kml xmlns="http://earth.google.com/kml/2.0">
> <Document><Folder><name>test</name>
>     <Placemark>
>       <description><![CDATA[
>         <b>Latitude:</b> <i>48.1</i><br />
>         <b>Longitude:</b> <i>0.25</i><br />
>         <b>Name:</b> <i>First point</i><br />
>      ]]></description>  </Placemark>
>     <Placemark>
>       <description><![CDATA[
>         <b>Latitude:</b> <i>49.2</i><br />
>         <b>Longitude:</b> <i>1.1</i><br />
>         <b>Name:</b> <i>Second point</i><br />
>      ]]></description>  </Placemark>
>     <Placemark>
>       <description><![CDATA[
>         <b>Latitude:</b> <i>47.5</i><br />
>         <b>Longitude:</b> <i>0.75</i><br />
>         <b>Name:</b> <i>Third point</i><br />
>      ]]></description>  </Placemark>
> </Folder></Document></kml>
>
> Attached you find the screenshot from GE.
>
> I would highly appreciate your hints and help.
>
> Kind regards,
> Timmie
>
> P.S. The Mailserver would let my inital mail through. This one  
> comes with a smaller image.<test-kml_google- 
> earth_full_small.jpg>_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Thu Jan 10 17:32:26 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 10 17:32:30 2008
Subject: [gdal-dev] converting csv to kml: locations displaced in Google
	Earth
In-Reply-To: <6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>
References: <478685F1.6070601@gmx-topmail.de>
	<200801102219.53919.even.rouault@mines-paris.org>
	<6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>
Message-ID: <200801102332.26704.even.rouault@mines-paris.org>

Dane,

I'm the one who wrote that part of the CSV doc indeed... 
Sorry that it's not clearer. What I meant by "You can write the associated VRT 
file (test.vrt)" is indeed "You must create at hand an associated VRT file 
(test.vrt)". You create it at hand, and then gives it as an input to OGR, so 
it can understand the structure of the underlying CSV file. I hope it makes 
things clearer...
If people have suggestions to formulate it more clearly in the docs, let me 
know.

Best regards

Le Thursday 10 January 2008 23:09:01, vous avez ?crit?:
> Hi Even,
>
> the csv to vrt docs here: http://www.gdal.org/ogr/drv_csv.html
>
> say to "write" a vrt but from the format's list and the error message
> I get it seems VRT is still read-only in Gdal 1.5
>
> Am I missing something?
>
> I get:
> ____
>
> [tropicana]$ ogr2ogr -f VRT test.vrt test.csv
> VRT driver does not support data source creation.
> ____
>
> - dane
>
> On Jan 10, 2008, at 1:19 PM, Even Rouault wrote:
> > Answers below :
> >
> > Le Thursday 10 January 2008 21:54:09 Tim Michelsen, vous avez ?crit :
> >> Hello,
> >> I would like to convert a csv file to kml. When I load the
> >> resulting KML
> >> into Googleearth (GE) the generated placemarks inside the file are
> >> totally displaced.
> >> What could be the reason?
> >> Could it be that XML decription is used too old?
> >>
> >> When I export my places from GE I read this line:
> >> <kml xmlns="http://earth.google.com/kml/2.1">
> >>
> >> In the generated KML file I can read:
> >> <kml xmlns="http://earth.google.com/kml/2.0">
> >
> > OGR KML driver exports KML 2.0 for the moment, but that shouldn't be a
> > problem.
> >
> >> Here are the test files:
> >> Latitude,Longitude,Name
> >> 48.1,0.25,"First point"
> >> 49.2,1.1,"Second point"
> >> 47.5,0.75,"Third point"
> >>
> >> the command line I used:
> >> ogr2ogr -f "KML" test.kml test.csv
> >>
> >> the KML:
> >> <?xml version="1.0" encoding="utf-8" ?>
> >> <kml xmlns="http://earth.google.com/kml/2.0">
> >> <Document><Folder><name>test</name>
> >>      <Placemark>
> >>        <description><![CDATA[
> >>          <b>Latitude:</b> <i>48.1</i><br />
> >>          <b>Longitude:</b> <i>0.25</i><br />
> >>          <b>Name:</b> <i>First point</i><br />
> >>       ]]></description>  </Placemark>
> >>      <Placemark>
> >>        <description><![CDATA[
> >>          <b>Latitude:</b> <i>49.2</i><br />
> >>          <b>Longitude:</b> <i>1.1</i><br />
> >>          <b>Name:</b> <i>Second point</i><br />
> >>       ]]></description>  </Placemark>
> >>      <Placemark>
> >>        <description><![CDATA[
> >>          <b>Latitude:</b> <i>47.5</i><br />
> >>          <b>Longitude:</b> <i>0.75</i><br />
> >>          <b>Name:</b> <i>Third point</i><br />
> >>       ]]></description>  </Placemark>
> >> </Folder></Document></kml>
> >
> > The generated KML file is obviously not what you would expect (it
> > has output
> > all the CSV fields into the description tag, and GE by default put
> > such
> > placemark at (0?,0?), which is at the west of Africa) . But that
> > can be
> > logically explained. You can't use a CSV file as simply as you do.
> > If you
> > read more carefully http://www.gdal.org/ogr/drv_csv.html, you'll
> > see that you
> > need to create a VRT file, test.vrt, and do ogr2ogr on that file,
> > not on the
> > original CSV file.
> >
> >> Attached you find the screenshot from GE.
> >>
> >> I would highly appreciate your hints and help.
> >>
> >> Kind regards,
> >> Timmie
> >>
> >> P.S. The Mailserver would let my inital mail through. This one comes
> >> with a smaller image.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From condit at sdsc.edu  Thu Jan 10 17:38:57 2008
From: condit at sdsc.edu (Christopher Condit)
Date: Thu Jan 10 17:39:08 2008
Subject: [gdal-dev] converting csv to kml: locations displaced in
	GoogleEarth
In-Reply-To: <200801102332.26704.even.rouault@mines-paris.org>
References: <478685F1.6070601@gmx-topmail.de><200801102219.53919.even.rouault@mines-paris.org><6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>
	<200801102332.26704.even.rouault@mines-paris.org>
Message-ID: <845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>

Just to clear this up if it isn't already: if the CSV file in question is called "test.csv" and I create a separate VRT file called "test.vrt" (in the same directory as "test.csv") with the following content:
<OGRVRTDataSource>
    <OGRVRTLayer name="test">
        <SrcDataSource>test.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
        <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
    </OGRVRTLayer>
</OGRVRTDataSource>

I can then treat the test.vrt file as a read-only OGR data source. And when I run the transform:
ogr2ogr -f KML test.kml test.vrt
 I end up with:
<?xml version="1.0" encoding="utf-8" ?>
<kml xmlns="http://earth.google.com/kml/2.0">
<Document><Folder><name>test</name>
  <Placemark>
      <name>First point</name>
      <description>
<![CDATA[
      <b>Latitude:</b> <i>48.1</i><br />
      <b>Longitude:</b> <i>0.25</i><br />
]]></description>
      <Point><coordinates>0.25,48.1,0</coordinates></Point>
  </Placemark>
  <Placemark>
      <name>Second point</name>
      <description>
<![CDATA[
      <b>Latitude:</b> <i>49.2</i><br />
      <b>Longitude:</b> <i>1.1</i><br />
]]></description>
      <Point><coordinates>1.1,49.200000000000003,0</coordinates></Point>
  </Placemark>
  <Placemark>
      <name>Third point</name>
      <description>
<![CDATA[
      <b>Latitude:</b> <i>47.5</i><br />
      <b>Longitude:</b> <i>0.75</i><br />
]]></description>
      <Point><coordinates>0.75,47.5,0</coordinates></Point>
  </Placemark>
</Folder></Document></kml>

Even - I think the documentation is straightforward...

-Chris


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Thursday, January 10, 2008 14:32
To: Dane Springmeyer
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] converting csv to kml: locations displaced in GoogleEarth

Dane,

I'm the one who wrote that part of the CSV doc indeed... 
Sorry that it's not clearer. What I meant by "You can write the associated VRT 
file (test.vrt)" is indeed "You must create at hand an associated VRT file 
(test.vrt)". You create it at hand, and then gives it as an input to OGR, so 
it can understand the structure of the underlying CSV file. I hope it makes 
things clearer...
If people have suggestions to formulate it more clearly in the docs, let me 
know.

Best regards

Le Thursday 10 January 2008 23:09:01, vous avez ?crit?:
> Hi Even,
>
> the csv to vrt docs here: http://www.gdal.org/ogr/drv_csv.html
>
> say to "write" a vrt but from the format's list and the error message
> I get it seems VRT is still read-only in Gdal 1.5
>
> Am I missing something?
>
> I get:
> ____
>
> [tropicana]$ ogr2ogr -f VRT test.vrt test.csv
> VRT driver does not support data source creation.
> ____
>
> - dane
>
> On Jan 10, 2008, at 1:19 PM, Even Rouault wrote:
> > Answers below :
> >
> > Le Thursday 10 January 2008 21:54:09 Tim Michelsen, vous avez ?crit :
> >> Hello,
> >> I would like to convert a csv file to kml. When I load the
> >> resulting KML
> >> into Googleearth (GE) the generated placemarks inside the file are
> >> totally displaced.
> >> What could be the reason?
> >> Could it be that XML decription is used too old?
> >>
> >> When I export my places from GE I read this line:
> >> <kml xmlns="http://earth.google.com/kml/2.1">
> >>
> >> In the generated KML file I can read:
> >> <kml xmlns="http://earth.google.com/kml/2.0">
> >
> > OGR KML driver exports KML 2.0 for the moment, but that shouldn't be a
> > problem.
> >
> >> Here are the test files:
> >> Latitude,Longitude,Name
> >> 48.1,0.25,"First point"
> >> 49.2,1.1,"Second point"
> >> 47.5,0.75,"Third point"
> >>
> >> the command line I used:
> >> ogr2ogr -f "KML" test.kml test.csv
> >>
> >> the KML:
> >> <?xml version="1.0" encoding="utf-8" ?>
> >> <kml xmlns="http://earth.google.com/kml/2.0">
> >> <Document><Folder><name>test</name>
> >>      <Placemark>
> >>        <description><![CDATA[
> >>          <b>Latitude:</b> <i>48.1</i><br />
> >>          <b>Longitude:</b> <i>0.25</i><br />
> >>          <b>Name:</b> <i>First point</i><br />
> >>       ]]></description>  </Placemark>
> >>      <Placemark>
> >>        <description><![CDATA[
> >>          <b>Latitude:</b> <i>49.2</i><br />
> >>          <b>Longitude:</b> <i>1.1</i><br />
> >>          <b>Name:</b> <i>Second point</i><br />
> >>       ]]></description>  </Placemark>
> >>      <Placemark>
> >>        <description><![CDATA[
> >>          <b>Latitude:</b> <i>47.5</i><br />
> >>          <b>Longitude:</b> <i>0.75</i><br />
> >>          <b>Name:</b> <i>Third point</i><br />
> >>       ]]></description>  </Placemark>
> >> </Folder></Document></kml>
> >
> > The generated KML file is obviously not what you would expect (it
> > has output
> > all the CSV fields into the description tag, and GE by default put
> > such
> > placemark at (0?,0?), which is at the west of Africa) . But that
> > can be
> > logically explained. You can't use a CSV file as simply as you do.
> > If you
> > read more carefully http://www.gdal.org/ogr/drv_csv.html, you'll
> > see that you
> > need to create a VRT file, test.vrt, and do ogr2ogr on that file,
> > not on the
> > original CSV file.
> >
> >> Attached you find the screenshot from GE.
> >>
> >> I would highly appreciate your hints and help.
> >>
> >> Kind regards,
> >> Timmie
> >>
> >> P.S. The Mailserver would let my inital mail through. This one comes
> >> with a smaller image.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From blake at hailmail.net  Thu Jan 10 17:55:29 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Thu Jan 10 17:55:32 2008
Subject: [gdal-dev] converting csv to kml: locations displaced in
	GoogleEarth
In-Reply-To: <845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>
References: <478685F1.6070601@gmx-topmail.de><200801102219.53919.even.rouault@mines-paris.org><6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>
	<200801102332.26704.even.rouault@mines-paris.org>
	<845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>
Message-ID: <17C2DEAA-22CC-459F-A2AB-EA6B89EAB2EF@hailmail.net>

Even and Chris -

Great, thanks for the clarification! That makes perfect sense now  
that I understand the idea behind a VRT file.

I think the current non-trac documentation is great but would benefit  
from spelling out that the VRT datasource is made by hand - just like  
Even mentioned.

For new users it might be helpful to have these steps in a tutorial  
somewhere. I could write that up quickly - where might be the best  
place to put it?  Maybe a "How do I convert CSV to KML?" in this  
spot: http://trac.osgeo.org/gdal/wiki/FAQVector

Is there a spot on trac for driver specific info that I could help  
out with adding info to as well?


Thanks,

Dane




On Jan 10, 2008, at 2:38 PM, Christopher Condit wrote:

> Just to clear this up if it isn't already: if the CSV file in  
> question is called "test.csv" and I create a separate VRT file  
> called "test.vrt" (in the same directory as "test.csv") with the  
> following content:
> <OGRVRTDataSource>
>     <OGRVRTLayer name="test">
>         <SrcDataSource>test.csv</SrcDataSource>
>         <GeometryType>wkbPoint</GeometryType>
>         <LayerSRS>WGS84</LayerSRS>
>         <GeometryField encoding="PointFromColumns" x="Longitude"  
> y="Latitude"/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
>
> I can then treat the test.vrt file as a read-only OGR data source.  
> And when I run the transform:
> ogr2ogr -f KML test.kml test.vrt
>  I end up with:
> <?xml version="1.0" encoding="utf-8" ?>
> <kml xmlns="http://earth.google.com/kml/2.0">
> <Document><Folder><name>test</name>
>   <Placemark>
>       <name>First point</name>
>       <description>
> <![CDATA[
>       <b>Latitude:</b> <i>48.1</i><br />
>       <b>Longitude:</b> <i>0.25</i><br />
> ]]></description>
>       <Point><coordinates>0.25,48.1,0</coordinates></Point>
>   </Placemark>
>   <Placemark>
>       <name>Second point</name>
>       <description>
> <![CDATA[
>       <b>Latitude:</b> <i>49.2</i><br />
>       <b>Longitude:</b> <i>1.1</i><br />
> ]]></description>
>       <Point><coordinates>1.1,49.200000000000003,0</coordinates></ 
> Point>
>   </Placemark>
>   <Placemark>
>       <name>Third point</name>
>       <description>
> <![CDATA[
>       <b>Latitude:</b> <i>47.5</i><br />
>       <b>Longitude:</b> <i>0.75</i><br />
> ]]></description>
>       <Point><coordinates>0.75,47.5,0</coordinates></Point>
>   </Placemark>
> </Folder></Document></kml>
>
> Even - I think the documentation is straightforward...
>
> -Chris
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev- 
> bounces@lists.osgeo.org] On Behalf Of Even Rouault
> Sent: Thursday, January 10, 2008 14:32
> To: Dane Springmeyer
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] converting csv to kml: locations displaced  
> in GoogleEarth
>
> Dane,
>
> I'm the one who wrote that part of the CSV doc indeed...
> Sorry that it's not clearer. What I meant by "You can write the  
> associated VRT
> file (test.vrt)" is indeed "You must create at hand an associated  
> VRT file
> (test.vrt)". You create it at hand, and then gives it as an input  
> to OGR, so
> it can understand the structure of the underlying CSV file. I hope  
> it makes
> things clearer...
> If people have suggestions to formulate it more clearly in the  
> docs, let me
> know.
>
> Best regards
>
> Le Thursday 10 January 2008 23:09:01, vous avez ?crit :
>> Hi Even,
>>
>> the csv to vrt docs here: http://www.gdal.org/ogr/drv_csv.html
>>
>> say to "write" a vrt but from the format's list and the error message
>> I get it seems VRT is still read-only in Gdal 1.5
>>
>> Am I missing something?
>>
>> I get:
>> ____
>>
>> [tropicana]$ ogr2ogr -f VRT test.vrt test.csv
>> VRT driver does not support data source creation.
>> ____
>>
>> - dane
>>
>> On Jan 10, 2008, at 1:19 PM, Even Rouault wrote:
>>> Answers below :
>>>
>>> Le Thursday 10 January 2008 21:54:09 Tim Michelsen, vous avez  
>>> ?crit :
>>>> Hello,
>>>> I would like to convert a csv file to kml. When I load the
>>>> resulting KML
>>>> into Googleearth (GE) the generated placemarks inside the file are
>>>> totally displaced.
>>>> What could be the reason?
>>>> Could it be that XML decription is used too old?
>>>>
>>>> When I export my places from GE I read this line:
>>>> <kml xmlns="http://earth.google.com/kml/2.1">
>>>>
>>>> In the generated KML file I can read:
>>>> <kml xmlns="http://earth.google.com/kml/2.0">
>>>
>>> OGR KML driver exports KML 2.0 for the moment, but that shouldn't  
>>> be a
>>> problem.
>>>
>>>> Here are the test files:
>>>> Latitude,Longitude,Name
>>>> 48.1,0.25,"First point"
>>>> 49.2,1.1,"Second point"
>>>> 47.5,0.75,"Third point"
>>>>
>>>> the command line I used:
>>>> ogr2ogr -f "KML" test.kml test.csv
>>>>
>>>> the KML:
>>>> <?xml version="1.0" encoding="utf-8" ?>
>>>> <kml xmlns="http://earth.google.com/kml/2.0">
>>>> <Document><Folder><name>test</name>
>>>>      <Placemark>
>>>>        <description><![CDATA[
>>>>          <b>Latitude:</b> <i>48.1</i><br />
>>>>          <b>Longitude:</b> <i>0.25</i><br />
>>>>          <b>Name:</b> <i>First point</i><br />
>>>>       ]]></description>  </Placemark>
>>>>      <Placemark>
>>>>        <description><![CDATA[
>>>>          <b>Latitude:</b> <i>49.2</i><br />
>>>>          <b>Longitude:</b> <i>1.1</i><br />
>>>>          <b>Name:</b> <i>Second point</i><br />
>>>>       ]]></description>  </Placemark>
>>>>      <Placemark>
>>>>        <description><![CDATA[
>>>>          <b>Latitude:</b> <i>47.5</i><br />
>>>>          <b>Longitude:</b> <i>0.75</i><br />
>>>>          <b>Name:</b> <i>Third point</i><br />
>>>>       ]]></description>  </Placemark>
>>>> </Folder></Document></kml>
>>>
>>> The generated KML file is obviously not what you would expect (it
>>> has output
>>> all the CSV fields into the description tag, and GE by default put
>>> such
>>> placemark at (0?,0?), which is at the west of Africa) . But that
>>> can be
>>> logically explained. You can't use a CSV file as simply as you do.
>>> If you
>>> read more carefully http://www.gdal.org/ogr/drv_csv.html, you'll
>>> see that you
>>> need to create a VRT file, test.vrt, and do ogr2ogr on that file,
>>> not on the
>>> original CSV file.
>>>
>>>> Attached you find the screenshot from GE.
>>>>
>>>> I would highly appreciate your hints and help.
>>>>
>>>> Kind regards,
>>>> Timmie
>>>>
>>>> P.S. The Mailserver would let my inital mail through. This one  
>>>> comes
>>>> with a smaller image.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From maplabs at light42.com  Thu Jan 10 18:15:44 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Thu Jan 10 18:02:37 2008
Subject: [gdal-dev] converting csv to kml: locations displaced in
	GoogleEarth
In-Reply-To: <17C2DEAA-22CC-459F-A2AB-EA6B89EAB2EF@hailmail.net>
References: <478685F1.6070601@gmx-topmail.de><200801102219.53919.even.rouault@mines-paris.org><6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>
	<200801102332.26704.even.rouault@mines-paris.org>
	<845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>
	<17C2DEAA-22CC-459F-A2AB-EA6B89EAB2EF@hailmail.net>
Message-ID: <F81A89D9-BFD1-11DC-9E67-000A277A733C@light42.com>

This cries out for a small custom script!

Simple csv in is a very common case for an end user.. , with all points 
in Lat/Lon.. or better Lon/La

The Google python tool Regionator will handle it also


On Jan 10, 2008, at 2:55 PM, Dane Springmeyer wrote:

> Even and Chris -
>
> Great, thanks for the clarification! That makes perfect sense now that 
> I understand the idea behind a VRT file.
>
> I think the current non-trac documentation is great but would benefit 
> from spelling out that the VRT datasource is made by hand - just like 
> Even mentioned.
>
> For new users it might be helpful to have these steps in a tutorial 
> somewhere. I could write that up quickly - where might be the best 
> place to put it?  Maybe a "How do I convert CSV to KML?" in this spot: 
> http://trac.osgeo.org/gdal/wiki/FAQVector
>
> Is there a spot on trac for driver specific info that I could help out 
> with adding info to as well?
>
>
> Thanks,
>
> Dane
>
>
>
>
> On Jan 10, 2008, at 2:38 PM, Christopher Condit wrote:
>
>> Just to clear this up if it isn't already: if the CSV file in 
>> question is called "test.csv" and I create a separate VRT file called 
>> "test.vrt" (in the same directory as "test.csv") with the following 
>> content:
>> <OGRVRTDataSource>
>>     <OGRVRTLayer name="test">
>>         <SrcDataSource>test.csv</SrcDataSource>
>>         <GeometryType>wkbPoint</GeometryType>
>>         <LayerSRS>WGS84</LayerSRS>
>>         <GeometryField encoding="PointFromColumns" x="Longitude" 
>> y="Latitude"/>
>>     </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>> I can then treat the test.vrt file as a read-only OGR data source. 
>> And when I run the transform:
>> ogr2ogr -f KML test.kml test.vrt
>>  I end up with:
>> <?xml version="1.0" encoding="utf-8" ?>
>> <kml xmlns="http://earth.google.com/kml/2.0">
>> <Document><Folder><name>test</name>
>>   <Placemark>
>>       <name>First point</name>
>>       <description>
>> <![CDATA[
>>       <b>Latitude:</b> <i>48.1</i><br />
>>       <b>Longitude:</b> <i>0.25</i><br />
>> ]]></description>
>>       <Point><coordinates>0.25,48.1,0</coordinates></Point>
>>   </Placemark>
>>   <Placemark>
>>       <name>Second point</name>
>>       <description>
>> <![CDATA[
>>       <b>Latitude:</b> <i>49.2</i><br />
>>       <b>Longitude:</b> <i>1.1</i><br />
>> ]]></description>
>>       
>> <Point><coordinates>1.1,49.200000000000003,0</coordinates></Point>
>>   </Placemark>
>>   <Placemark>
>>       <name>Third point</name>
>>       <description>
>> <![CDATA[
>>       <b>Latitude:</b> <i>47.5</i><br />
>>       <b>Longitude:</b> <i>0.75</i><br />
>> ]]></description>
>>       <Point><coordinates>0.75,47.5,0</coordinates></Point>
>>   </Placemark>
>> </Folder></Document></kml>
>>
>> Even - I think the documentation is straightforward...
>>
>> -Chris
>>
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org 
>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
>> Sent: Thursday, January 10, 2008 14:32
>> To: Dane Springmeyer
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] converting csv to kml: locations displaced in 
>> GoogleEarth
>>
>> Dane,
>>
>> I'm the one who wrote that part of the CSV doc indeed...
>> Sorry that it's not clearer. What I meant by "You can write the 
>> associated VRT
>> file (test.vrt)" is indeed "You must create at hand an associated VRT 
>> file
>> (test.vrt)". You create it at hand, and then gives it as an input to 
>> OGR, so
>> it can understand the structure of the underlying CSV file. I hope it 
>> makes
>> things clearer...
>> If people have suggestions to formulate it more clearly in the docs, 
>> let me
>> know.
>>
>> Best regards
>>
>> Le Thursday 10 January 2008 23:09:01, vous avez ?crit :
>>> Hi Even,
>>>
>>> the csv to vrt docs here: http://www.gdal.org/ogr/drv_csv.html
>>>
>>> say to "write" a vrt but from the format's list and the error message
>>> I get it seems VRT is still read-only in Gdal 1.5
>>>
>>> Am I missing something?
>>>
>>> I get:
>>> ____
>>>
>>> [tropicana]$ ogr2ogr -f VRT test.vrt test.csv
>>> VRT driver does not support data source creation.
>>> ____
>>>
>>> - dane
>>>
>>> On Jan 10, 2008, at 1:19 PM, Even Rouault wrote:
>>>> Answers below :
>>>>
>>>> Le Thursday 10 January 2008 21:54:09 Tim Michelsen, vous avez ?crit 
>>>> :
>>>>> Hello,
>>>>> I would like to convert a csv file to kml. When I load the
>>>>> resulting KML
>>>>> into Googleearth (GE) the generated placemarks inside the file are
>>>>> totally displaced.
>>>>> What could be the reason?
>>>>> Could it be that XML decription is used too old?
>>>>>
>>>>> When I export my places from GE I read this line:
>>>>> <kml xmlns="http://earth.google.com/kml/2.1">
>>>>>
>>>>> In the generated KML file I can read:
>>>>> <kml xmlns="http://earth.google.com/kml/2.0">
>>>>
>>>> OGR KML driver exports KML 2.0 for the moment, but that shouldn't 
>>>> be a
>>>> problem.
>>>>
>>>>> Here are the test files:
>>>>> Latitude,Longitude,Name
>>>>> 48.1,0.25,"First point"
>>>>> 49.2,1.1,"Second point"
>>>>> 47.5,0.75,"Third point"
>>>>>
>>>>> the command line I used:
>>>>> ogr2ogr -f "KML" test.kml test.csv
>>>>>
>>>>> the KML:
>>>>> <?xml version="1.0" encoding="utf-8" ?>
>>>>> <kml xmlns="http://earth.google.com/kml/2.0">
>>>>> <Document><Folder><name>test</name>
>>>>>      <Placemark>
>>>>>        <description><![CDATA[
>>>>>          <b>Latitude:</b> <i>48.1</i><br />
>>>>>          <b>Longitude:</b> <i>0.25</i><br />
>>>>>          <b>Name:</b> <i>First point</i><br />
>>>>>       ]]></description>  </Placemark>
>>>>>      <Placemark>
>>>>>        <description><![CDATA[
>>>>>          <b>Latitude:</b> <i>49.2</i><br />
>>>>>          <b>Longitude:</b> <i>1.1</i><br />
>>>>>          <b>Name:</b> <i>Second point</i><br />
>>>>>       ]]></description>  </Placemark>
>>>>>      <Placemark>
>>>>>        <description><![CDATA[
>>>>>          <b>Latitude:</b> <i>47.5</i><br />
>>>>>          <b>Longitude:</b> <i>0.75</i><br />
>>>>>          <b>Name:</b> <i>Third point</i><br />
>>>>>       ]]></description>  </Placemark>
>>>>> </Folder></Document></kml>
>>>>
>>>> The generated KML file is obviously not what you would expect (it
>>>> has output
>>>> all the CSV fields into the description tag, and GE by default put
>>>> such
>>>> placemark at (0?,0?), which is at the west of Africa) . But that
>>>> can be
>>>> logically explained. You can't use a CSV file as simply as you do.
>>>> If you
>>>> read more carefully http://www.gdal.org/ogr/drv_csv.html, you'll
>>>> see that you
>>>> need to create a VRT file, test.vrt, and do ogr2ogr on that file,
>>>> not on the
>>>> original CSV file.
>>>>
>>>>> Attached you find the screenshot from GE.
>>>>>
>>>>> I would highly appreciate your hints and help.
>>>>>
>>>>> Kind regards,
>>>>> Timmie
>>>>>
>>>>> P.S. The Mailserver would let my inital mail through. This one 
>>>>> comes
>>>>> with a smaller image.
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From timmichelsen at gmx-topmail.de  Thu Jan 10 18:06:22 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Thu Jan 10 18:06:26 2008
Subject: [gdal-dev] converting csv to kml: locations displaced
	in	GoogleEarth
In-Reply-To: <845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>
References: <478685F1.6070601@gmx-topmail.de><200801102219.53919.even.rouault@mines-paris.org><6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>	<200801102332.26704.even.rouault@mines-paris.org>
	<845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>
Message-ID: <4786A4EE.5090301@gmx-topmail.de>

Hello,
well Even was a little bit right: I may have read the docs too quickly. 
This is the nearly first or second time I use ogr2ogr on the command 
line. I normally use it indirectly through the programs like GRASS etc.
I am really amazed how simple one can add a geo-value to data with this 
programs once the logic is understood.

rest below.
> Just to clear this up if it isn't already: if the CSV file in question is called "test.csv" and I create a separate VRT file called "test.vrt" (in the same directory as "test.csv") with the following content:
> <OGRVRTDataSource>
>     <OGRVRTLayer name="test">
>         <SrcDataSource>test.csv</SrcDataSource>
>         <GeometryType>wkbPoint</GeometryType>
>         <LayerSRS>WGS84</LayerSRS>
>         <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> I can then treat the test.vrt file as a read-only OGR data source. And when I run the transform:
> ogr2ogr -f KML test.kml test.vrt
>  I end up with:
> <?xml version="1.0" encoding="utf-8" ?>
> <kml xmlns="http://earth.google.com/kml/2.0">
> <Document><Folder><name>test</name>
>   <Placemark>
>       <name>First point</name>
>       <description>
> <![CDATA[
>       <b>Latitude:</b> <i>48.1</i><br />
>       <b>Longitude:</b> <i>0.25</i><br />
> ]]></description>
>       <Point><coordinates>0.25,48.1,0</coordinates></Point>
>   </Placemark>
>   <Placemark>
>       <name>Second point</name>
>       <description>
> <![CDATA[
>       <b>Latitude:</b> <i>49.2</i><br />
>       <b>Longitude:</b> <i>1.1</i><br />
> ]]></description>
>       <Point><coordinates>1.1,49.200000000000003,0</coordinates></Point>
>   </Placemark>
>   <Placemark>
>       <name>Third point</name>
>       <description>
> <![CDATA[
>       <b>Latitude:</b> <i>47.5</i><br />
>       <b>Longitude:</b> <i>0.75</i><br />
> ]]></description>
>       <Point><coordinates>0.75,47.5,0</coordinates></Point>
>   </Placemark>
> </Folder></Document></kml>
With Evens first response I was able to convert correctly:
.VRT file like above.

csv2kml_test.sh
ogr2ogr -f "KML" test.kml test.vrt -dsco NameField=Name

test.kml displays smoothly some locations in France.

> Even - I think the documentation is straightforward...
I think that the documentation could be updated for things to be 
clearer. Why not writing like you suggested in your Mail 
(http://article.gmane.org/gmane.comp.gis.gdal.devel/14140)?

Why not adding this example we elaborated to the doc?
I could imagine that a lot of people find this useful.

A little off topic:
Does anyone know a good scripting library (preferably in python) which 
can be used to enhance the KML: set special symbols/pin, edit hyper 
links, etc.?

Thank you all for your help!

Kind
regards,
Timmie
From matt.wilkie at gov.yk.ca  Thu Jan 10 18:09:32 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Jan 10 18:09:36 2008
Subject: [gdal-dev] gdalwarp creates a bloated file
In-Reply-To: <1fef7d9b0712220437p17035845nc022d01743b1fa7e@mail.gmail.com>
References: <1fef7d9b0712202309o514faa2ak961a4935707dd0dd@mail.gmail.com>	<3CCE61578E85AB479D1E35EDB97F027982DC70@tawesmail1.LANGROUP.DNR.MD>	<1fef7d9b0712220020h3167d76ax9ef8e2072bc14a29@mail.gmail.com>	<200712221052.33756.even.rouault@mines-paris.org>
	<1fef7d9b0712220437p17035845nc022d01743b1fa7e@mail.gmail.com>
Message-ID: <4786A5AC.7080006@gov.yk.ca>

> Wonderful and thanks for pointing that out! gdal 1.5 did the trick.
> The file size is down from 218.5MB to 3.9MB.

for anybody who can't upgrade to 1.5 for some reason, if you recompress 
the bloated result with gdal_translate the image goes down to a 
reasonable size.  Eg:

   gdalwarp ... gdalwarp-result.tif
   gdal_translate -co compress=lzw gdalwarp-result.tif final-result.tif

Actually it's better not to compress with gdalwarp at all in this 
circumstance as that just slows it down, doing work for nothing.

Possibly related bug tickets:

gdalwarp creates GeoTIFFs bigger than gdal_translate - 
http://trac.osgeo.org/gdal/ticket/1688

gdalwarp -co "COMPRESS=DEFLATE" output 45% too big - 
http://trac.osgeo.org/gdal/ticket/1689

gdalwarp with pixel interleave, resample, and compress makes huge files 
- http://trac.osgeo.org/gdal/ticket/1470


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From timmichelsen at gmx-topmail.de  Thu Jan 10 18:18:19 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Thu Jan 10 18:18:27 2008
Subject: [gdal-dev] converting csv to kml: locations displaced
	in	GoogleEarth
In-Reply-To: <F81A89D9-BFD1-11DC-9E67-000A277A733C@light42.com>
References: <478685F1.6070601@gmx-topmail.de><200801102219.53919.even.rouault@mines-paris.org><6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>	<200801102332.26704.even.rouault@mines-paris.org>	<845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>	<17C2DEAA-22CC-459F-A2AB-EA6B89EAB2EF@hailmail.net>
	<F81A89D9-BFD1-11DC-9E67-000A277A733C@light42.com>
Message-ID: <4786A7BB.2040900@gmx-topmail.de>

> This cries out for a small custom script!
Yes. Imagine Exporting spreadsheet data like clients locations or hiking 
destinations from office into GE!

> Simple csv in is a very common case for an end user.. , with all points 
> in Lat/Lon.. or better Lon/La
Most non-GIS programs I know use the format lat./lon. wherr positive 
means north/west.

> The Google python tool Regionator will handle it also
I think this is a answer to my question for a python KML script from my 
last post: 
http://thread.gmane.org/gmane.comp.gis.gdal.devel/14140/focus=14144

For all others starting to venture here:
regionator - Google Code - http://code.google.com/p/regionator/

Kind regards,
Timmie
From warmerdam at pobox.com  Thu Jan 10 17:18:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 10 18:24:44 2008
Subject: [gdal-dev] Axis Ordering RFC
Message-ID: <478699C1.7020701@pobox.com>

Folks,

Due to issues with GDAL handling of geographic GMLJP2 files (and issues on
the horizon with WCS 1.1 support) I'm eager to get "axis order awareness"
into GDAL 1.6.0.  I have prepared a preliminary RFC and am currently seeking
feedback.

   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From matt.wilkie at gov.yk.ca  Thu Jan 10 18:33:21 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Jan 10 18:33:31 2008
Subject: [gdal-dev] gdal_merge multiple files
In-Reply-To: <1C6192D3F2755C45A2D0658D6FE5ED8304C3914E@exch2k1.dmmenet.mme.state.va.us>
References: <1C6192D3F2755C45A2D0658D6FE5ED8304C3914E@exch2k1.dmmenet.mme.state.va.us>
Message-ID: <4786AB41.2020903@gov.yk.ca>

> It seems that gdal_merge does not like globbing.  Are there other
> ways of getting a list of images into gdal_merge without putting them
> all on the command line?  I think I did this once before with a
> similar gdal command but used a config file???

I created a batch file for this purpose, which is attached.
I also just added it and Adam's example using --optfile to 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalMerge

Please amend or enhance as required.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------
-------------- next part --------------
@echo off
:: initial version, 2005-Nov-17, matt wilkie
:: this script is public domain
if [%1]==[] (
	echo.
	echo -={ gdal_wildmerge }=- Allow gdal_merge to accept wildcards for input files
	echo .
	echo . 	gdal_wildmerge.bat [input-file-wildcard] [output-file] {options}
	echo . 
	echo .	gdal_wildmerge d:\src\*.tif mosaick.tif -init -9999
	echo.
	goto :EOF
	)
	:: %1 is the input wildcard mask
	:: This is inverted from normal gdal_merge usage in order to allow other
	:: options be passed to gdal_merge


:: delayed expansion requires windows NT or later command shell 
:: (it won't work on windows 9x)
	verify other 2>nul 
	setlocal ENABLEDELAYEDEXPANSION 
	if errorlevel 1 goto :wrong_version

:: gdal_merge won't overwrite an existing file	
	if exist %2 goto :file_exists

:: Build the input file list
	set infiles=
	for %%a in (%1) do set infiles=!infiles! "%%a"

:: Here is were the actual work happens
	set gdalcmd=gdal_merge %infiles% -o "%2"
   echo %gdalcmd%
   :: IMPORTANT, if gdal_merge is not call'ed control doesn't return 
	:: to the batch file
	call %gdalcmd%
	goto :EOF

:file_exists
	echo *** the output file "%2" already exists.
	goto :EOF

:wrong_version
	echo.
	echo	Sorry, this batchfile requires DELAYED EXPANSION which is 
	echo	not available in this shell. See 
	echo  http://www.google.com/search?q=enabledelayedexpansion
	goto :EOF

From blake at hailmail.net  Thu Jan 10 19:09:30 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Thu Jan 10 19:09:33 2008
Subject: [gdal-dev] converting csv to kml: locations displaced
	in	GoogleEarth
In-Reply-To: <4786A7BB.2040900@gmx-topmail.de>
References: <478685F1.6070601@gmx-topmail.de><200801102219.53919.even.rouault@mines-paris.org><6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>	<200801102332.26704.even.rouault@mines-paris.org>	<845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>	<17C2DEAA-22CC-459F-A2AB-EA6B89EAB2EF@hailmail.net>
	<F81A89D9-BFD1-11DC-9E67-000A277A733C@light42.com>
	<4786A7BB.2040900@gmx-topmail.de>
Message-ID: <1AF5D565-6E84-4D62-9D1C-E22594E4C631@hailmail.net>

Tim,

Getting a bit off topic but...

If you find yourself interested along the way in getting at some of  
the more hidden styling features of kml like say, polygon hover effects:

http://www.jasonbirch.com/nodes/2006/10/18/38/using-multigeometry-for- 
mouseover-effects-in-google-earth-kml/

you may want to consider python templating techniques for your scripts:

http://zcologia.com/news/584/better-python-practices-for-the-geoweb/

Enjoy,

Dane


On Jan 10, 2008, at 3:18 PM, Tim Michelsen wrote:

>> This cries out for a small custom script!
> Yes. Imagine Exporting spreadsheet data like clients locations or  
> hiking destinations from office into GE!
>
>> Simple csv in is a very common case for an end user.. , with all  
>> points in Lat/Lon.. or better Lon/La
> Most non-GIS programs I know use the format lat./lon. wherr  
> positive means north/west.
>
>> The Google python tool Regionator will handle it also
> I think this is a answer to my question for a python KML script  
> from my last post: http://thread.gmane.org/ 
> gmane.comp.gis.gdal.devel/14140/focus=14144
>
> For all others starting to venture here:
> regionator - Google Code - http://code.google.com/p/regionator/
>
> Kind regards,
> Timmie

From szekerest at gmail.com  Thu Jan 10 19:37:02 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan 10 19:37:05 2008
Subject: [gdal-dev] Axis Ordering RFC
In-Reply-To: <478699C1.7020701@pobox.com>
References: <478699C1.7020701@pobox.com>
Message-ID: <f3b73b7d0801101637ub3fa2aftbc3e0b704ca46f0e@mail.gmail.com>

Frank,

Although I don't feel the problem deeply in my bones, I'm scared about
the number of changes it implies. In case if we would like to
represent the spatial reference with the same axis orientation
regardless of the underlying coordinate system definition then it
would be enough to add a new enum eg. AxisOrientation that could be
EastNorth or NorthEast or SouthEast whatever. And we can cosider X
orientation as being the 'East' and Y as the 'North' every time at the
GDAL/OGR interface. The most problematic issue about this is that who
will be responsible to set this property to the correct value.

Best regards,

Tamas




2008/1/10, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> Due to issues with GDAL handling of geographic GMLJP2 files (and issues on
> the horizon with WCS 1.1 support) I'm eager to get "axis order awareness"
> into GDAL 1.6.0.  I have prepared a preliminary RFC and am currently seeking
> feedback.
>
>    http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ivan.lucena at pmldnet.com  Thu Jan 10 19:53:23 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Jan 10 19:53:33 2008
Subject: [gdal-dev] GDAL plugins and ArcGIS 9.2
In-Reply-To: <47865725.4080207@pobox.com>
References: <2DBB9F887DAA394FA75D98474EA5730D047D2F2B@vader.prologic-inc.com>
	<47865725.4080207@pobox.com>
Message-ID: <4786BE03.8070201@pmldnet.com>

John,

If you search the gdal-dev archives you will find what Peng Gao (ESRI's) 
has to say about that. He said that it is possible but unlikely to work 
due to customization on their end. What I suggest is that as ESRI 
business partner (EDN member or some other kind of arrangement) you 
might be able to get the gdal_1.lib; their additional or modified .h(s) 
and some epsg_*.inc(s) files and use VC71, MSVS 2003, to build a GDAL14 
plugin.

Regards,

Ivan


Frank Warmerdam wrote:
> John Edwards wrote:
>> Is there a branch of GDAL that was used for ArcGIS 9.2?  I?m trying 
>> unsuccessfully to create a plugin for use in ArcGIS and wondering if 
>> the source code that built ESRI?s version of gdal13.dll is available.
> 
> John,
> 
> There is no specific ArcGIS branch off GDAL 1.3. In theory I think you
> should be able to build a plugin using MSVC 7.0 (aka MS Visual Studio 2002
> .NET) and any of the GDAL 1.3.x releases.  In practice I'm not sure if
> there are particular options required.
> 
> I'll leave a more comprehensive response to others who know more about 
> this.
> 
> Best regards,
From warmerdam at pobox.com  Thu Jan 10 20:30:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 10 20:30:51 2008
Subject: [gdal-dev] Axis Ordering RFC
In-Reply-To: <f3b73b7d0801101637ub3fa2aftbc3e0b704ca46f0e@mail.gmail.com>
References: <478699C1.7020701@pobox.com>
	<f3b73b7d0801101637ub3fa2aftbc3e0b704ca46f0e@mail.gmail.com>
Message-ID: <4786C6A9.5080903@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> Although I don't feel the problem deeply in my bones, I'm scared about
> the number of changes it implies. In case if we would like to
> represent the spatial reference with the same axis orientation
> regardless of the underlying coordinate system definition then it
> would be enough to add a new enum eg. AxisOrientation that could be
> EastNorth or NorthEast or SouthEast whatever. And we can cosider X
> orientation as being the 'East' and Y as the 'North' every time at the
> GDAL/OGR interface. The most problematic issue about this is that who
> will be responsible to set this property to the correct value.

Tamas,

I'm afraid I don't understand what you are suggesting.  Are you suggesting
that axis orientation not be part of the coordinate system?  Is there a
reason that your AxisOrientation enumeration is better than specifying the
Axis values in the WKT/OGRSpatialReference and having accessor methods?

I would like to stress that the AXIS keywords are already part of the
OGC WKT coordinate system definition, and that in the OGC model axis
orientation is considered to be part of the coordinate system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From craig.leat at gmail.com  Fri Jan 11 00:58:28 2008
From: craig.leat at gmail.com (Craig Leat)
Date: Fri Jan 11 00:58:32 2008
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 44, Issue 28
In-Reply-To: <20080111013052.5B48AE00D73@lists.osgeo.org>
References: <20080111013052.5B48AE00D73@lists.osgeo.org>
Message-ID: <1fef7d9b0801102158q5549a38o815b10a61dfca88d@mail.gmail.com>

> Date: Thu, 10 Jan 2008 17:18:41 -0500
> From: Frank Warmerdam <warmerdam@pobox.com>
> Subject: [gdal-dev] Axis Ordering RFC
> To: gdal-dev <gdal-dev@lists.osgeo.org>
> Message-ID: <478699C1.7020701@pobox.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Folks,
>
> Due to issues with GDAL handling of geographic GMLJP2 files (and issues on
> the horizon with WCS 1.1 support) I'm eager to get "axis order awareness"
> into GDAL 1.6.0.  I have prepared a preliminary RFC and am currently seeking
> feedback.
>
>    http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes
>

Hi

AFAIK, to support the South African datums (EPSG codes: 22275, 22277,
22279, ..., 22293 and 2046 to 2055) axis order and axis orientation
switches are required. Could this RFC be expanded to allow support for
these datums?

Frank when we discussed this 18 months ago you wrote the following:
"My intention for addressing this was to add some sort of +axis...
directives that would tell the pj_transform() function how axis values
need to be remapped.  So, it would require extending the PJ structure
with the axis info, and modifications to pj_transform to apply it,
converting stuff into internal form on the way in, and back to
external form on the way out."

I am not familiar with the API so please excuse me if I have missed the point.

Regards

Craig.
From warmerdam at pobox.com  Fri Jan 11 01:21:45 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 11 01:22:01 2008
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 44, Issue 28
In-Reply-To: <1fef7d9b0801102158q5549a38o815b10a61dfca88d@mail.gmail.com>
References: <20080111013052.5B48AE00D73@lists.osgeo.org>
	<1fef7d9b0801102158q5549a38o815b10a61dfca88d@mail.gmail.com>
Message-ID: <47870AF9.7050805@pobox.com>

Craig Leat wrote:
> AFAIK, to support the South African datums (EPSG codes: 22275, 22277,
> 22279, ..., 22293 and 2046 to 2055) axis order and axis orientation
> switches are required. Could this RFC be expanded to allow support for
> these datums?

Craig,

22279...22293 are projected coordinate systems.  It is my intention
to support axis ordering for projected coordinate systems as well
as geographic coordinate systems, though it is possible this may be
delayed a bit.

It looks like 2046 to 2055 are also projected coordinate systems.

Note, my work is not necessarily going to address handling of the
Transverse Mercator South Orientated projection method used in these
projected coordinate systems.  I'm still a bit confused about TMSO to
be honest.

> Frank when we discussed this 18 months ago you wrote the following:
> "My intention for addressing this was to add some sort of +axis...
> directives that would tell the pj_transform() function how axis values
> need to be remapped.  So, it would require extending the PJ structure
> with the axis info, and modifications to pj_transform to apply it,
> converting stuff into internal form on the way in, and back to
> external form on the way out."
> 
> I am not familiar with the API so please excuse me if I have missed the point.

The RFC covers an "all in GDAL/OGR" solution, mostly so it won't be
necessary to have a particular version of PROJ.4 for axis stuff to
work properly.  Someday I may also add the axis support described in
the paragraph above in PROJ.4, but I would presumably avoid using it
from GDAL even then.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From hjc520070 at 163.com  Fri Jan 11 02:19:54 2008
From: hjc520070 at 163.com (hjc520070)
Date: Fri Jan 11 02:20:03 2008
Subject: [gdal-dev] gdal install
Message-ID: <29626772.287751200035994285.JavaMail.coremail@bj163app61.163.com>

Hi all:
I want to use gdal 1.4.4 in windows, however it doesn't include a exe file as gdal-1.4.2.(Python_GDAL-1.4.2.win32-py2.4.exe).gdal-1.4.4 in my computer doesn't work with python2.5. Maybe I didn't install it correctly. Can somebody help me?
How to install gdal-1.4.4 with the file (gdalwin32exe144.zip)? If you did have a exe file like Python_GDAL-1.4.2.win32-py2.4.exe for python2.5,can you help me?
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080111/63fd22a9/attachment.html
From St.Mietke at gmx.de  Fri Jan 11 05:01:48 2008
From: St.Mietke at gmx.de (St.Mietke@gmx.de)
Date: Fri Jan 11 05:01:51 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed data types)
Message-ID: <20080111100148.268400@gmx.net>

Hi list members,

I tried to create a geotiff with the GDAL library (using Java), but it seems, that only unsigned-Byte writing is possible.

public int WriteRaster_Direct(int xoff, int yoff, int xsize, int ysize, int buf_xsize, int buf_ysize, int buf_type, java.nio.ByteBuffer buf)

I need a signed integer coverage.

Can anyone tell me, if there is any possibility to create such a geotiff coverage with unsigned data types?

Thanks in advance,
Stefan Mietke
-- 
Institute for Cartography
TU Dresden

GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
From dron at ak4719.spb.edu  Fri Jan 11 08:11:12 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Fri Jan 11 08:19:25 2008
Subject: [gdal-dev] Axis Ordering RFC
In-Reply-To: <478699C1.7020701@pobox.com>
References: <478699C1.7020701@pobox.com>
Message-ID: <20080111131112.GA26376@ak4719.spb.edu>

On Thu, Jan 10, 2008 at 05:18:41PM -0500, Frank Warmerdam wrote:
> Due to issues with GDAL handling of geographic GMLJP2 files (and
> issues on the horizon with WCS 1.1 support) I'm eager to get "axis
> order awareness" into GDAL 1.6.0.  I have prepared a preliminary RFC
> and am currently seeking feedback.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes

That is very good addition and I even know where I will use this new
functionality. I am +1 on it and only two notes to add:

1. SetAxes() should care of Z axis too. It can be overloaded in C++ part
   of API and have two variants in C bindings (e.g. SetAxes()
   SetAxesZ()).
2. Orientation and axis names should be enumerations instead of plain
   integers.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From collinsb at mitre.org  Fri Jan 11 08:33:38 2008
From: collinsb at mitre.org (Collins, Benjamin)
Date: Fri Jan 11 08:34:01 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed data types)
In-Reply-To: <20080111100148.268400@gmx.net>
References: <20080111100148.268400@gmx.net>
Message-ID: <8D27E2CDAF11D34F97E7445BCCCDB92C02357756@IMCSRV1.MITRE.ORG>

>-----Original Message-----
>From: St.Mietke@gmx.de
>
>I need a signed integer coverage.
http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html

Use ByteBuffer's putInt(int value)
- or -
Use ByteBuffer's asIntBuffer() and then IntBuffer's put(int i)

Either way, use ByteBuffer.allocateDirect(int capacity) to initially
create the Buffer.
--
Ben
From nikos.alexandris at felis.uni-freiburg.de  Fri Jan 11 08:51:43 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Fri Jan 11 08:51:37 2008
Subject: [gdal-dev] Exporting layers from the VMAP database
Message-ID: <1200059503.17775.12.camel@vertical>

Hi GDAL list!

Finally, I accessed (with ogrinfo) and exported successfully into
shapefile (with ogr2ogr) something from the VMAP database.

Although I can see the polbnda polygons for instance, I still don't
understand this error message:

$ ogr2ogr polbnda.shp gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia
'polbnda@bnd(*)_area'
GET_TABLE_ELEMENT: Invalid field number -1

What does this mean?


-- 
Nikos Alexandris
.
Department of Remote Sensing & Landscape Information Systems
Faculty of Forestry & Environmental Sciences, Albert-Ludwigs-University Freiburg
.
Tel.  +49 (0) 761 203 3697 / Fax.  +49 (0) 761 203 3701 / Skype: Nikos.Alexandris
.
Address: Tennenbacher str. 4, D-79106 Freiburg i. Br., Germany
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080111/60a3f056/attachment.bin
From dany.geotools at gmail.com  Fri Jan 11 08:57:32 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Jan 11 08:57:35 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed data types)
In-Reply-To: <20080111100148.268400@gmx.net>
References: <20080111100148.268400@gmx.net>
Message-ID: <7221db410801110557i2396c1bduab504524e1c316be@mail.gmail.com>

Hi again Stefan,
I have received your code and I will take a look on it.
Anyway, I suggest to create a view of your ByteBuffer as an IntBuffer and
then set data as Int.

PS: We are working on an ImageIO-Ext project which provides a set of format
readers/writers extending the Sun's Java ImageIO framework. This also
contains a GeoTiff plugin (reader/writer) leveraging on GDAL. Actually I'm
working on the writer capabilities (by supporting sourceRegions,
subSampling, destination, destinationOffset settings and metadata
settings,...). In case you are interested on it, you may find the project
here: https://imageio-ext.dev.java.net/ and get the code from subversion
As I have pointed out some days ago, actually, the homepage requires a real
improvement since it is in a very preliminar version (I have written some
rows just for introduction... 50 seconds of work :) ). We (GeoSolutions)
will improve it very soon.

PPS: while writing this email, I have noticed the reply of Benjamin
Collins... Sorry for posting the same advice.

Best Regards,
Daniele

On Jan 11, 2008 11:01 AM, <St.Mietke@gmx.de> wrote:

> Hi list members,
>
> I tried to create a geotiff with the GDAL library (using Java), but it
> seems, that only unsigned-Byte writing is possible.
>
> public int WriteRaster_Direct(int xoff, int yoff, int xsize, int ysize,
> int buf_xsize, int buf_ysize, int buf_type, java.nio.ByteBuffer buf)
>
> I need a signed integer coverage.
>
> Can anyone tell me, if there is any possibility to create such a geotiff
> coverage with unsigned data types?
>
> Thanks in advance,
> Stefan Mietke
> --
> Institute for Cartography
> TU Dresden
>
> GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
> Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080111/719f9479/attachment-0001.html
From neteler at osgeo.org  Fri Jan 11 12:02:14 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Fri Jan 11 12:02:16 2008
Subject: [gdal-dev] Exporting layers from the VMAP database
In-Reply-To: <1200059503.17775.12.camel@vertical>
References: <1200059503.17775.12.camel@vertical>
Message-ID: <86782b610801110902w5d4297fekd2907c1ae4fedab8@mail.gmail.com>

On Jan 11, 2008 2:51 PM, Nikos Alexandris
<nikos.alexandris@felis.uni-freiburg.de> wrote:
> Hi GDAL list!
>
> Finally, I accessed (with ogrinfo) and exported successfully into
> shapefile (with ogr2ogr) something from the VMAP database.
>
> Although I can see the polbnda polygons for instance, I still don't
> understand this error message:
>
> $ ogr2ogr polbnda.shp gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia
> 'polbnda@bnd(*)_area'
> GET_TABLE_ELEMENT: Invalid field number -1
>
> What does this mean?

Are you sure that the path is right?
See also
http://intevation.de/pipermail/freegis-list/2005-April/002276.html
(note: the @ symbol is scrambled there)

Markus
From St.Mietke at gmx.de  Fri Jan 11 12:06:34 2008
From: St.Mietke at gmx.de (Stefan)
Date: Fri Jan 11 12:06:37 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed data
	types)
In-Reply-To: <8D27E2CDAF11D34F97E7445BCCCDB92C02357756@IMCSRV1.MITRE.ORG>
References: <20080111100148.268400@gmx.net>
	<8D27E2CDAF11D34F97E7445BCCCDB92C02357756@IMCSRV1.MITRE.ORG>
Message-ID: <20080111170634.323300@gmx.net>

I tried it with putInt(), but the problem is, that I only have a output value every 4th pixel, cause the putInt() method increments the position by four.
I also changed the input raster, that I process. The input raster is now signed integer. With a input raster unsigned byte it doesn't work at all.


-------- Original-Nachricht --------
> Datum: Fri, 11 Jan 2008 08:33:38 -0500
> Von: "Collins, Benjamin" <collinsb@mitre.org>
> An: St.Mietke@gmx.de
> CC: gdal-dev@lists.osgeo.org
> Betreff: RE: [gdal-dev] GeoTiff writing with Java Bindings (signed data types)

> >-----Original Message-----
> >From: St.Mietke@gmx.de
> >
> >I need a signed integer coverage.
> http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html
> 
> Use ByteBuffer's putInt(int value)
> - or -
> Use ByteBuffer's asIntBuffer() and then IntBuffer's put(int i)
> 
> Either way, use ByteBuffer.allocateDirect(int capacity) to initially
> create the Buffer.
> --
> Ben

-- 
Institute for Cartography
TU Dresden

Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger?did=10
From collinsb at mitre.org  Fri Jan 11 12:18:32 2008
From: collinsb at mitre.org (Collins, Benjamin)
Date: Fri Jan 11 12:18:54 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed data
	types)
In-Reply-To: <20080111170634.323300@gmx.net>
References: <20080111100148.268400@gmx.net>
	<8D27E2CDAF11D34F97E7445BCCCDB92C02357756@IMCSRV1.MITRE.ORG>
	<20080111170634.323300@gmx.net>
Message-ID: <8D27E2CDAF11D34F97E7445BCCCDB92C023577CE@IMCSRV1.MITRE.ORG>

>-----Original Message-----
>From: Stefan [mailto:St.Mietke@gmx.de] 
>
>I tried it with putInt(), but the problem is, that I only have 
>a output value every 4th pixel, cause the putInt() method 
>increments the position by four.

Stefan,

See gdal/swig/java/apps/GDALtest.java 

--
Ben
From szekerest at gmail.com  Fri Jan 11 13:35:13 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 11 13:35:38 2008
Subject: [gdal-dev] Axis Ordering RFC
In-Reply-To: <4786C6A9.5080903@pobox.com>
References: <478699C1.7020701@pobox.com>
	<f3b73b7d0801101637ub3fa2aftbc3e0b704ca46f0e@mail.gmail.com>
	<4786C6A9.5080903@pobox.com>
Message-ID: <f3b73b7d0801111035s4e8e3194u9409bcf3c84eec21@mail.gmail.com>

2008/1/11, Frank Warmerdam <warmerdam@pobox.com>:

> I'm afraid I don't understand what you are suggesting.  Are you suggesting
> that axis orientation not be part of the coordinate system?  Is there a
> reason that your AxisOrientation enumeration is better than specifying the
> Axis values in the WKT/OGRSpatialReference and having accessor methods?
>

I'm rather asking than suggesting and just trying to understand the
problem. I only use a subset of the SRS-s that don't suffer from this
issue. I guess we're to expose something that's missing right now from
the SpatialReference API. That is possibly how the axes are
represented as XYZ coordinates. I was wondering if it would be enough
to expose one parameter to represent this like 'int
GetAxesDirection()' or 'SetAxesDirection(int)'. The reason is just to
keep it simple.
However it seems we would also want to represent a displayable name
for each axis following the WKT representation, so I've to retract the
statements above.

> I would like to stress that the AXIS keywords are already part of the
> OGC WKT coordinate system definition, and that in the OGC model axis
> orientation is considered to be part of the coordinate system.
>

Alea iacta est


Best regards,

Tamas
From warmerdam at pobox.com  Fri Jan 11 13:48:57 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 11 13:49:16 2008
Subject: [gdal-dev] Exporting layers from the VMAP database
In-Reply-To: <1200059503.17775.12.camel@vertical>
References: <1200059503.17775.12.camel@vertical>
Message-ID: <4787BA19.1080506@pobox.com>

Nikos Alexandris wrote:
> Hi GDAL list!
> 
> Finally, I accessed (with ogrinfo) and exported successfully into
> shapefile (with ogr2ogr) something from the VMAP database.
> 
> Although I can see the polbnda polygons for instance, I still don't
> understand this error message:
> 
> $ ogr2ogr polbnda.shp gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia
> 'polbnda@bnd(*)_area'
> GET_TABLE_ELEMENT: Invalid field number -1
> 
> What does this mean?

Nikos,

I'm not sure what it means.  Presumably it is being reported by the OGDI
VRF driver due to some sort of apparent inconsistency in the data file.
Hopefully it is not significant though there is a risk that some features
are incomplete in some fashion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From even.rouault at mines-paris.org  Fri Jan 11 14:42:10 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 11 14:42:13 2008
Subject: [gdal-dev] Exporting layers from the VMAP database
In-Reply-To: <4787BA19.1080506@pobox.com>
References: <1200059503.17775.12.camel@vertical> <4787BA19.1080506@pobox.com>
Message-ID: <200801112042.11089.even.rouault@mines-paris.org>

Nikos,

I don't recall the details, but this is something I've fixed a few months ago 
and this warning has disappeared if you use OGDI from CVS. As far as I 
remember, this warning can be safely ignored.

Best regards.

Le Friday 11 January 2008 19:48:57 Frank Warmerdam, vous avez ?crit?:
> Nikos Alexandris wrote:
> > Hi GDAL list!
> >
> > Finally, I accessed (with ogrinfo) and exported successfully into
> > shapefile (with ogr2ogr) something from the VMAP database.
> >
> > Although I can see the polbnda polygons for instance, I still don't
> > understand this error message:
> >
> > $ ogr2ogr polbnda.shp gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia
> > 'polbnda@bnd(*)_area'
> > GET_TABLE_ELEMENT: Invalid field number -1
> >
> > What does this mean?
>
> Nikos,
>
> I'm not sure what it means.  Presumably it is being reported by the OGDI
> VRF driver due to some sort of apparent inconsistency in the data file.
> Hopefully it is not significant though there is a risk that some features
> are incomplete in some fashion.
>
> Best regards,


From warmerdam at pobox.com  Fri Jan 11 15:00:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 11 15:00:28 2008
Subject: [gdal-dev] Axis Ordering RFC
In-Reply-To: <20080111131112.GA26376@ak4719.spb.edu>
References: <478699C1.7020701@pobox.com>
	<20080111131112.GA26376@ak4719.spb.edu>
Message-ID: <4787CACC.9010700@pobox.com>

Andrey Kiselev wrote:
> On Thu, Jan 10, 2008 at 05:18:41PM -0500, Frank Warmerdam wrote:
>> Due to issues with GDAL handling of geographic GMLJP2 files (and
>> issues on the horizon with WCS 1.1 support) I'm eager to get "axis
>> order awareness" into GDAL 1.6.0.  I have prepared a preliminary RFC
>> and am currently seeking feedback.
>>
>>   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes
> 
> That is very good addition and I even know where I will use this new
> functionality. I am +1 on it and only two notes to add:
> 
> 1. SetAxes() should care of Z axis too. It can be overloaded in C++ part
>    of API and have two variants in C bindings (e.g. SetAxes()
>    SetAxesZ()).

Andrey,

Done.  I have not documented the C API bindings in the RFC, but this would be
the way to do it.  But I should stress that at this time I am not adding any
sort of broad support for the Z axis to be remapped.

> 2. Orientation and axis names should be enumerations instead of plain
>    integers.

Done.  I'm slightly concerned this may make handling via SWIG messier which
is why I used the simple type "int" initially.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Jan 11 16:06:59 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 11 16:07:15 2008
Subject: [gdal-dev] Re: OGR/ GEOS GetNextFeature problem
In-Reply-To: <7ba910530801111243p65e5de4ds785a787adb2d7de2@mail.gmail.com>
References: <7ba910530801111243p65e5de4ds785a787adb2d7de2@mail.gmail.com>
Message-ID: <4787DA73.5030906@pobox.com>


Ahmet Murat ?zdemiray wrote:
> Hi,
> I have a problem with OGRLayer.GetNextFeature() method. I did not
> where to post this, so here I am.

Murat,

This would be a good topic to discuss on the gdal-dev mailing
list.  I am taking the liberty of cc:ing my reply there since the
issue does not seem to be confidential in any way.

> I had a working display program using gdal, which reads ESRI shape
> files and displays contents of it on a Windows Form. I downloaded gdal
> version 1.4.3 and compiled on Win32 using nmake. It was working fine,
> until I realized that, geometric operations like Contains, Disjoints,
> Intersects etc. does not work without GEOS library. So I downloaded
> lastest versions of gdal (1.5.0) and geos(3.0.0), compiled both of
> them with release configuration for Win32 with VS2005.
> 
> When I updated my old program, I realized that things are displayed
> slower. Started debugging and saw that GetNextFeature takes up to 15
> secs for some features and a shape file containing all countries of
> the world takes 2 minutes to display. Then, I downloaded FWTools
> 2.0.4, changed all bindings to FWTools' libraries and I got similar
> results. However, when I try to open same file with OpenEV, it can
> display it in 2 secs.
> 
> Here's are a few lines of my code, what do I do wrong?
> 
> layer->SetSpatialFilterRect(-180, -90, 180, 90);
> layer->ResetFeature();

I assume the above is actually layer->ResetReading()?

> OGRFeature* ftr;
> while((ftr = layer->GetNextFeature()) != NULL)
> {
>    // do something
>    OGRFeature::DestroyFeature( ftr );
> }

You haven't done anything wrong, but you have learned that GEOS
intersection tests can be inordinately expensive.

Hmm, on further reflection reading from a shapefile using a rectangular
filter such as any filter set with SetSpatialFilterRect() should short
circuit use of GEOS as per the code in OGRLayer::FilterGeometry():

/* -------------------------------------------------------------------- */
/*      Fallback to full intersect test (using GEOS) if we still        */
/*      don't know for sure.                                            */
/* -------------------------------------------------------------------- */
     if( m_bFilterIsEnvelope )
         return TRUE;
     else
     {
         if( OGRGeometryFactory::haveGEOS() )
             return m_poFilterGeom->Intersects( poGeometry );
         else
             return TRUE;
     }

I have skimmed the Shapefile driver and not noticed anything that should
defeat this logic but I might be missing something.  If you can demonstrate
the issue in some fashion I can easily reproduce, I'd like to dig into it.
Perhaps using:

ogrinfo -ro -spat -180 -90 180 90 ..

on your shapefile.  If you can do that, and can make the shapefile available
to me to reproduce the problem with I should be good to go.  You should
also file a Trac ticket at that point though you don't need to attach
the dataset if it is large or private.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mchapman at texelinc.com  Fri Jan 11 17:24:54 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Fri Jan 11 17:27:55 2008
Subject: [gdal-dev] Re: OGR/ GEOS GetNextFeature problem
In-Reply-To: <4787DA73.5030906@pobox.com>
References: <7ba910530801111243p65e5de4ds785a787adb2d7de2@mail.gmail.com><4787DA73.5030906@pobox.com>
Message-ID: <1894088580-1200090470-cardhu_decombobulator_blackberry.rim.net-1479208061-@bxe022.bisx.prod.on.blackberry>

Ahmet,

The best way to handle this is to compile gdal without geos and then link geos into your code and use it only when you want to.  You will have to write a function to swap the geometries back and forth between ogr and geos but it is minimal becaue Frank has already written them and you can reuse most of them even when geos is not linked in. 

Best regards,
Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: Frank Warmerdam <warmerdam@pobox.com>

Date: Fri, 11 Jan 2008 16:06:59 
To:Ahmet Murat ?zdemiray <ahmeto@cs.bilkent.edu.tr>
Cc:gdal-dev <gdal-dev@lists.osgeo.org>
Subject: [gdal-dev] Re: OGR/ GEOS GetNextFeature problem



Ahmet Murat ?zdemiray wrote:
> Hi,
> I have a problem with OGRLayer.GetNextFeature() method. I did not
> where to post this, so here I am.

Murat,

This would be a good topic to discuss on the gdal-dev mailing
list.  I am taking the liberty of cc:ing my reply there since the
issue does not seem to be confidential in any way.

> I had a working display program using gdal, which reads ESRI shape
> files and displays contents of it on a Windows Form. I downloaded gdal
> version 1.4.3 and compiled on Win32 using nmake. It was working fine,
> until I realized that, geometric operations like Contains, Disjoints,
> Intersects etc. does not work without GEOS library. So I downloaded
> lastest versions of gdal (1.5.0) and geos(3.0.0), compiled both of
> them with release configuration for Win32 with VS2005.
> 
> When I updated my old program, I realized that things are displayed
> slower. Started debugging and saw that GetNextFeature takes up to 15
> secs for some features and a shape file containing all countries of
> the world takes 2 minutes to display. Then, I downloaded FWTools
> 2.0.4, changed all bindings to FWTools' libraries and I got similar
> results. However, when I try to open same file with OpenEV, it can
> display it in 2 secs.
> 
> Here's are a few lines of my code, what do I do wrong?
> 
> layer->SetSpatialFilterRect(-180, -90, 180, 90);
> layer->ResetFeature();

I assume the above is actually layer->ResetReading()?

> OGRFeature* ftr;
> while((ftr = layer->GetNextFeature()) != NULL)
> {
>    // do something
>    OGRFeature::DestroyFeature( ftr );
> }

You haven't done anything wrong, but you have learned that GEOS
intersection tests can be inordinately expensive.

Hmm, on further reflection reading from a shapefile using a rectangular
filter such as any filter set with SetSpatialFilterRect() should short
circuit use of GEOS as per the code in OGRLayer::FilterGeometry():

/* -------------------------------------------------------------------- */
/*      Fallback to full intersect test (using GEOS) if we still        */
/*      don't know for sure.                                            */
/* -------------------------------------------------------------------- */
     if( m_bFilterIsEnvelope )
         return TRUE;
     else
     {
         if( OGRGeometryFactory::haveGEOS() )
             return m_poFilterGeom->Intersects( poGeometry );
         else
             return TRUE;
     }

I have skimmed the Shapefile driver and not noticed anything that should
defeat this logic but I might be missing something.  If you can demonstrate
the issue in some fashion I can easily reproduce, I'd like to dig into it.
Perhaps using:

ogrinfo -ro -spat -180 -90 180 90 ..

on your shapefile.  If you can do that, and can make the shapefile available
to me to reproduce the problem with I should be good to go.  You should
also file a Trac ticket at that point though you don't need to attach
the dataset if it is large or private.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From nikos.alexandris at felis.uni-freiburg.de  Sat Jan 12 06:28:46 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Sat Jan 12 06:28:41 2008
Subject: [gdal-dev] Exporting layers from the VMAP database
In-Reply-To: <86782b610801110902w5d4297fekd2907c1ae4fedab8@mail.gmail.com>
References: <1200059503.17775.12.camel@vertical>
	<86782b610801110902w5d4297fekd2907c1ae4fedab8@mail.gmail.com>
Message-ID: <1200137326.7146.68.camel@vertical>

Markus,

FYI:

(1) nik@vertical:~$ ogrinfo -ro -summary
gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia 'watrcrsl@hydro(*)_line'  
GET_TABLE_ELEMENT: Invalid field number -1
INFO: Open of `gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia'
      using driver `OGDI' successful.

Layer name: watrcrsl@hydro(*)_line
Geometry: Line String
Feature Count: 200441
Extent: (-31.262667, 30.000000) - (179.999900, 81.190750)
Layer SRS WKT:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4269"]]
id: Integer (10.0)
f_code: String (5.0)
hyc: Integer (5.0)
nam: String (64.0)
tile_id: Integer (5.0)
edg_id: Integer (10.0)

(2) Notice the difference in 'watrcrsl_@_hydro(*)_line':

nik@vertical:~$ ogrinfo -ro -summary
gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia 'watrcrsl_@_hydro(*)_line'  
GET_TABLE_ELEMENT: Invalid field number -1
INFO: Open of `gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia'
      using driver `OGDI' successful.


And the same I get for: 'polbnda@bnd(*)_area'   and
'polbnda_@_bnd(*)_area'


On Fri, 2008-01-11 at 18:02 +0100, Markus Neteler wrote:
> On Jan 11, 2008 2:51 PM, Nikos Alexandris
> <nikos.alexandris@felis.uni-freiburg.de> wrote:
> > Hi GDAL list!
> >
> > Finally, I accessed (with ogrinfo) and exported successfully into
> > shapefile (with ogr2ogr) something from the VMAP database.
> >
> > Although I can see the polbnda polygons for instance, I still don't
> > understand this error message:
> >
> > $ ogr2ogr polbnda.shp gltp:/vrf/home/nik/v0eur/vmaplv0/eurnasia
> > 'polbnda@bnd(*)_area'
> > GET_TABLE_ELEMENT: Invalid field number -1
> >
> > What does this mean?
> 
> Are you sure that the path is right?
> See also
> http://intevation.de/pipermail/freegis-list/2005-April/002276.html
> (note: the @ symbol is scrambled there)
> 
> Markus
-- 
Nikos Alexandris
.
Department of Remote Sensing & Landscape Information Systems
Faculty of Forestry & Environmental Sciences, Albert-Ludwigs-University Freiburg
.
Tel.  +49 (0) 761 203 3697 / Fax.  +49 (0) 761 203 3701 / Skype: Nikos.Alexandris
.
Address: Tennenbacher str. 4, D-79106 Freiburg i. Br., Germany
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080112/f30f8b85/attachment.bin
From St.Mietke at gmx.de  Sat Jan 12 10:56:29 2008
From: St.Mietke at gmx.de (Stefan Mietke)
Date: Sat Jan 12 10:56:32 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed data
	types)
In-Reply-To: <8D27E2CDAF11D34F97E7445BCCCDB92C023577CE@IMCSRV1.MITRE.ORG>
References: <20080111100148.268400@gmx.net>
	<8D27E2CDAF11D34F97E7445BCCCDB92C02357756@IMCSRV1.MITRE.ORG>
	<20080111170634.323300@gmx.net>
	<8D27E2CDAF11D34F97E7445BCCCDB92C023577CE@IMCSRV1.MITRE.ORG>
Message-ID: <20080112155629.183010@gmx.net>

Hi Ben,

it seems, that the getInt() / asIntBuffer().get() methods deliver false integer values. After reading my raster with the ReadRaster_Direct() method I get false pixel values. When I increment these false values, the output pixel value increases by 256. The values I don't manipulate, are fine after writing back to the geotiff file!
I als tried it with your code, and even there false values were displayed with the get() method. So there is no chance to manipulate these data with the writableRaster class.
But as I said, the code works with unsigned byte values, if they are already byte data.

Kind regards,
Stefan


-------- Original-Nachricht --------
> Datum: Fri, 11 Jan 2008 12:18:32 -0500
> Von: "Collins, Benjamin" <collinsb@mitre.org>
> An: "Stefan" <St.Mietke@gmx.de>
> CC: gdal-dev@lists.osgeo.org
> Betreff: RE: RE: [gdal-dev] GeoTiff writing with Java Bindings (signed data types)

> >-----Original Message-----
> >From: Stefan [mailto:St.Mietke@gmx.de] 
> >
> >I tried it with putInt(), but the problem is, that I only have 
> >a output value every 4th pixel, cause the putInt() method 
> >increments the position by four.
> 
> Stefan,
> 
> See gdal/swig/java/apps/GDALtest.java 
> 
> --
> Ben

-- 
Institute for Cartography
TU Dresden

GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
From mchapman at texelinc.com  Sat Jan 12 17:52:01 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Sat Jan 12 17:52:03 2008
Subject: [gdal-dev] Axis Ordering RFC
In-Reply-To: <4787CACC.9010700@pobox.com>
References: <478699C1.7020701@pobox.com>	<20080111131112.GA26376@ak4719.spb.edu>
	<4787CACC.9010700@pobox.com>
Message-ID: <003801c8556d$be960c80$3bc22580$@com>

Andrey,

Are you guys talking about the parameters in a projection file like
AXIS['Lat',NORTH],AXIS['Long',EAST]?  When you say "axis order awareness" I
was wondering how would that manifest itself in the API? Would it be methods
on the OGRSpatialReference class? I believe it's possible to extract those
values out of the projection string today if I am not mistaken.  How would
the awareness be different from what exists today?  Just curious.

Best regards,

Martin


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Friday, January 11, 2008 1:00 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Axis Ordering RFC

Andrey Kiselev wrote:
> On Thu, Jan 10, 2008 at 05:18:41PM -0500, Frank Warmerdam wrote:
>> Due to issues with GDAL handling of geographic GMLJP2 files (and
>> issues on the horizon with WCS 1.1 support) I'm eager to get "axis
>> order awareness" into GDAL 1.6.0.  I have prepared a preliminary RFC
>> and am currently seeking feedback.
>>
>>   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes
> 
> That is very good addition and I even know where I will use this new
> functionality. I am +1 on it and only two notes to add:
> 
> 1. SetAxes() should care of Z axis too. It can be overloaded in C++ part
>    of API and have two variants in C bindings (e.g. SetAxes()
>    SetAxesZ()).

Andrey,

Done.  I have not documented the C API bindings in the RFC, but this would
be
the way to do it.  But I should stress that at this time I am not adding any
sort of broad support for the Z axis to be remapped.

> 2. Orientation and axis names should be enumerations instead of plain
>    integers.

Done.  I'm slightly concerned this may make handling via SWIG messier which
is why I used the simple type "int" initially.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mchapman at texelinc.com  Sat Jan 12 19:40:58 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Sat Jan 12 19:41:00 2008
Subject: [gdal-dev] Axis Ordering RFC
In-Reply-To: <003801c8556d$be960c80$3bc22580$@com>
References: <478699C1.7020701@pobox.com>	<20080111131112.GA26376@ak4719.spb.edu>	<4787CACC.9010700@pobox.com>
	<003801c8556d$be960c80$3bc22580$@com>
Message-ID: <003901c8557c$f70d9fb0$e528df10$@com>

Alright, forget those questions.  I just read that nice wiki rfc.  My
apologies. That answers all my questions. :)

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Martin Chapman
Sent: Saturday, January 12, 2008 3:52 PM
To: 'Frank Warmerdam'; gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Axis Ordering RFC

Andrey,

Are you guys talking about the parameters in a projection file like
AXIS['Lat',NORTH],AXIS['Long',EAST]?  When you say "axis order awareness" I
was wondering how would that manifest itself in the API? Would it be methods
on the OGRSpatialReference class? I believe it's possible to extract those
values out of the projection string today if I am not mistaken.  How would
the awareness be different from what exists today?  Just curious.

Best regards,

Martin


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Friday, January 11, 2008 1:00 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Axis Ordering RFC

Andrey Kiselev wrote:
> On Thu, Jan 10, 2008 at 05:18:41PM -0500, Frank Warmerdam wrote:
>> Due to issues with GDAL handling of geographic GMLJP2 files (and
>> issues on the horizon with WCS 1.1 support) I'm eager to get "axis
>> order awareness" into GDAL 1.6.0.  I have prepared a preliminary RFC
>> and am currently seeking feedback.
>>
>>   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes
> 
> That is very good addition and I even know where I will use this new
> functionality. I am +1 on it and only two notes to add:
> 
> 1. SetAxes() should care of Z axis too. It can be overloaded in C++ part
>    of API and have two variants in C bindings (e.g. SetAxes()
>    SetAxesZ()).

Andrey,

Done.  I have not documented the C API bindings in the RFC, but this would
be
the way to do it.  But I should stress that at this time I am not adding any
sort of broad support for the Z axis to be remapped.

> 2. Orientation and axis names should be enumerations instead of plain
>    integers.

Done.  I'm slightly concerned this may make handling via SWIG messier which
is why I used the simple type "int" initially.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From timmichelsen at gmx-topmail.de  Sun Jan 13 06:40:18 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Sun Jan 13 06:40:32 2008
Subject: [gdal-dev] Re: converting csv to kml: locations displaced in
	GoogleEarth
In-Reply-To: <1AF5D565-6E84-4D62-9D1C-E22594E4C631@hailmail.net>
References: <478685F1.6070601@gmx-topmail.de><200801102219.53919.even.rouault@mines-paris.org><6A914D60-B23F-46AE-88AE-9EAA414C62D2@hailmail.net>	<200801102332.26704.even.rouault@mines-paris.org>	<845AADAC1106E44996327D62097E4C6BF254C4@et.ad.sdsc.edu>	<17C2DEAA-22CC-459F-A2AB-EA6B89EAB2EF@hailmail.net>	<F81A89D9-BFD1-11DC-9E67-000A277A733C@light42.com>	<4786A7BB.2040900@gmx-topmail.de>
	<1AF5D565-6E84-4D62-9D1C-E22594E4C631@hailmail.net>
Message-ID: <fmctb2$tjl$1@ger.gmane.org>

Hello,
> If you find yourself interested along the way in getting at some of the 
> more hidden styling features of kml like say, polygon hover effects:
> 
> http://www.jasonbirch.com/nodes/2006/10/18/38/using-multigeometry-for-mouseover-effects-in-google-earth-kml/ 
> 
> 
> you may want to consider python templating techniques for your scripts:
> 
> http://zcologia.com/news/584/better-python-practices-for-the-geoweb/
Thanks again for these links. I will investigate further. Maybe I will 
post on another list because is certainly passes beyond the core issues 
of gdal.
A interesting thing!

Kind regards,
Timmie

From 2voodoo at gmx.de  Sun Jan 13 08:52:10 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Sun Jan 13 08:52:12 2008
Subject: [gdal-dev] Does CCITTFax-Compression of GeoTiffs work for you?
Message-ID: <478A178A.5080601@gmx.de>

Hi there,

I asked this question already two month ago and would like to give it another try.
I am using GDAL 1.4.3 and esp. GeoTiff for reading and displaying
GeoTiffs on Windows CE.
I successfully managed it to display GeoTiff Files that are LZW
compressed - other formats seem not to work.
The error message I get when trying to load CCITTFax (3 or 4 - both do
not work) compressed images is:

GetBlockRef failed at X block offset 0, Y block offset 0

RasterIO still returns 0 (so it seems as there occured no error - but
CPLGetLastErrorMsg() returns the message above.)
gdalinfo returns for the working image:

Driver: GTiff/GeoTIFF
Size is 62, 68
Coordinate System is `'
Metadata:
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=508
  TIFFTAG_YRESOLUTION=508
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=LZW
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   68.0)
Upper Right (   62.0,    0.0)
Lower Right (   62.0,   68.0)
Center      (   31.0,   34.0)
Band 1 Block=62x68 Type=Byte, ColorInterp=Palette
  Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 128,255,0,255
    1: 251,13,0,255

For the same image (just compressed with CCITTFax4 - and black/white
colors) it returns:
Driver: GTiff/GeoTIFF
Size is 62, 68
Coordinate System is `'
Metadata:
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=508
  TIFFTAG_YRESOLUTION=508
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,   68.0)
Upper Right (   62.0,    0.0)
Lower Right (   62.0,   68.0)
Center      (   31.0,   34.0)
Band 1 Block=62x68 Type=Byte, ColorInterp=Palette
  Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255


Everything is identical, but the the compression tag.
Do you have any hint what might have gone wrong?

Thanks in advance,
Tom

From ivan.lucena at pmldnet.com  Sun Jan 13 10:59:31 2008
From: ivan.lucena at pmldnet.com (ivan.lucena@pmldnet.com)
Date: Sun Jan 13 11:00:04 2008
Subject: [gdal-dev] Does CCITTFax-Compression of GeoTiffs work for you?
Message-ID: <20080113155931.32472.qmail@s403.sureserver.com>

Hi Tom,

As long as I know GeoTiff CCITT 4 should work well in GDAL. 

>    TIFFTAG_SOFTWARE=IrfanView

Is it possible that "IrfanView" is producing a corrupted or out of standard CCITT?

Have you try to check the integrity of that files in another software? 

And what if you gdal_translate the successful LZW file to CCITT 4? Does it works?

Just some ideas...

Ivan

>  -------Original Message-------
>  From: Tom Kazimiers <2voodoo@gmx.de>
>  Subject: [gdal-dev] Does CCITTFax-Compression of GeoTiffs work for you?
>  Sent: Jan 13 '08 13:52
>  
>  Hi there,
>  
>  I asked this question already two month ago and would like to give it another try.
>  I am using GDAL 1.4.3 and esp. GeoTiff for reading and displaying
>  GeoTiffs on Windows CE.
>  I successfully managed it to display GeoTiff Files that are LZW
>  compressed - other formats seem not to work.
>  The error message I get when trying to load CCITTFax (3 or 4 - both do
>  not work) compressed images is:
>  
>  GetBlockRef failed at X block offset 0, Y block offset 0
>  
>  RasterIO still returns 0 (so it seems as there occured no error - but
>  CPLGetLastErrorMsg() returns the message above.)
>  gdalinfo returns for the working image:
>  
>  Driver: GTiff/GeoTIFF
>  Size is 62, 68
>  Coordinate System is `'
>  Metadata:
>    TIFFTAG_SOFTWARE=IrfanView
>    TIFFTAG_XRESOLUTION=508
>    TIFFTAG_YRESOLUTION=508
>    TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>  Image Structure Metadata:
>    COMPRESSION=LZW
>  Corner Coordinates:
>  Upper Left  (    0.0,    0.0)
>  Lower Left  (    0.0,   68.0)
>  Upper Right (   62.0,    0.0)
>  Lower Right (   62.0,   68.0)
>  Center      (   31.0,   34.0)
>  Band 1 Block=62x68 Type=Byte, ColorInterp=Palette
>    Metadata:
>      NBITS=1
>    Color Table (RGB with 2 entries)
>      0: 128,255,0,255
>      1: 251,13,0,255
>  
>  For the same image (just compressed with CCITTFax4 - and black/white
>  colors) it returns:
>  Driver: GTiff/GeoTIFF
>  Size is 62, 68
>  Coordinate System is `'
>  Metadata:
>    TIFFTAG_SOFTWARE=IrfanView
>    TIFFTAG_XRESOLUTION=508
>    TIFFTAG_YRESOLUTION=508
>    TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>  Image Structure Metadata:
>    COMPRESSION=CCITTFAX4
>  Corner Coordinates:
>  Upper Left  (    0.0,    0.0)
>  Lower Left  (    0.0,   68.0)
>  Upper Right (   62.0,    0.0)
>  Lower Right (   62.0,   68.0)
>  Center      (   31.0,   34.0)
>  Band 1 Block=62x68 Type=Byte, ColorInterp=Palette
>    Metadata:
>      NBITS=1
>    Color Table (RGB with 2 entries)
>      0: 255,255,255,255
>      1: 0,0,0,255
>  
>  
>  Everything is identical, but the the compression tag.
>  Do you have any hint what might have gone wrong?
>  
>  Thanks in advance,
>  Tom
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From 2voodoo at gmx.de  Sun Jan 13 12:25:03 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Sun Jan 13 12:25:02 2008
Subject: [gdal-dev] Does CCITTFax-Compression of GeoTiffs work for you?
In-Reply-To: <20080113155931.32472.qmail@s403.sureserver.com>
References: <20080113155931.32472.qmail@s403.sureserver.com>
Message-ID: <478A496F.2030604@gmx.de>

Ivan,

thanks for your answer. I do not think that IrfanView writes out of 
standard CCITT - bu anyway I tryed with gdal_translate.
Maybe I interpret this information wrong, but "gdal_translate --format 
GTiff" gives the following output:

Format Details:
  Short Name: GTiff
  Long Name: GeoTIFF
  Extension: tif
  Mime Type: image/tiff
  Help Topic: frmt_gtiff.html
  Supports: Create() - Create writeable dataset.
  Supports: CreateCopy() - Create dataset by copying another.
  Creation Datatypes: Byte UInt16 Int16 UInt32 Int32 Float32 Float64 
CInt16 CInt32 CFloa

<CreationOptionList>
  <Option name="COMPRESS" type="string-select">
    <Value>NONE</Value>
    <Value>LZW</Value>
    <Value>PACKBITS</Value>
    <Value>JPEG</Value>
    <Value>DEFLATE</Value>
  </Option>
  <Option name="PREDICTOR" type="int" description="Predictor Type"/>
  <Option name="JPEG_QUALITY" type="int" description="JPEG quality 
1-100, default 75."/>
  <Option name="INTERLEAVE" type="string-select">
    <Value>BAND</Value>
    <Value>PIXEL</Value>
  </Option>
  <Option name="TILED" type="boolean" description="Switch to tiled format"/>
  <Option name="TFW" type="boolean" description="Write out world file"/>
  <Option name="BLOCKXSIZE" type="int" description="Tile Width"/>
  <Option name="BLOCKYSIZE" type="int" description="Tile/Strip Height"/>
  <Option name="PHOTOMETRIC" type="string-select">
    <Value>MINISBLACK</Value>
    <Value>MINISWHITE</Value>
    <Value>RGB</Value>
    <Value>CMYK</Value>
    <Value>YCBCR</Value>
    <Value>CIELAB</Value>
    <Value>ICCLAB</Value>
    <Value>ITULAB</Value>
  </Option>
  <Option name="PROFILE" type="string-select">
    <Value>GDALGeoTIFF</Value>
    <Value>GeoTIFF</Value>
    <Value>BASELINE</Value>
  </Option>
</CreationOptionList>

Does this mean CCITT compression is not supported at all?

Thanks,
Tom

ivan.lucena@pmldnet.com schrieb:
> Hi Tom,
>
> As long as I know GeoTiff CCITT 4 should work well in GDAL. 
>
>   
>>    TIFFTAG_SOFTWARE=IrfanView
>>     
>
> Is it possible that "IrfanView" is producing a corrupted or out of standard CCITT?
>
> Have you try to check the integrity of that files in another software? 
>
> And what if you gdal_translate the successful LZW file to CCITT 4? Does it works?
>
> Just some ideas...
>
> Ivan
>
>   
>>  -------Original Message-------
>>  From: Tom Kazimiers <2voodoo@gmx.de>
>>  Subject: [gdal-dev] Does CCITTFax-Compression of GeoTiffs work for you?
>>  Sent: Jan 13 '08 13:52
>>  
>>  Hi there,
>>  
>>  I asked this question already two month ago and would like to give it another try.
>>  I am using GDAL 1.4.3 and esp. GeoTiff for reading and displaying
>>  GeoTiffs on Windows CE.
>>  I successfully managed it to display GeoTiff Files that are LZW
>>  compressed - other formats seem not to work.
>>  The error message I get when trying to load CCITTFax (3 or 4 - both do
>>  not work) compressed images is:
>>  
>>  GetBlockRef failed at X block offset 0, Y block offset 0
>>  
>>  RasterIO still returns 0 (so it seems as there occured no error - but
>>  CPLGetLastErrorMsg() returns the message above.)
>>  gdalinfo returns for the working image:
>>  
>>  Driver: GTiff/GeoTIFF
>>  Size is 62, 68
>>  Coordinate System is `'
>>  Metadata:
>>    TIFFTAG_SOFTWARE=IrfanView
>>    TIFFTAG_XRESOLUTION=508
>>    TIFFTAG_YRESOLUTION=508
>>    TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>>  Image Structure Metadata:
>>    COMPRESSION=LZW
>>  Corner Coordinates:
>>  Upper Left  (    0.0,    0.0)
>>  Lower Left  (    0.0,   68.0)
>>  Upper Right (   62.0,    0.0)
>>  Lower Right (   62.0,   68.0)
>>  Center      (   31.0,   34.0)
>>  Band 1 Block=62x68 Type=Byte, ColorInterp=Palette
>>    Metadata:
>>      NBITS=1
>>    Color Table (RGB with 2 entries)
>>      0: 128,255,0,255
>>      1: 251,13,0,255
>>  
>>  For the same image (just compressed with CCITTFax4 - and black/white
>>  colors) it returns:
>>  Driver: GTiff/GeoTIFF
>>  Size is 62, 68
>>  Coordinate System is `'
>>  Metadata:
>>    TIFFTAG_SOFTWARE=IrfanView
>>    TIFFTAG_XRESOLUTION=508
>>    TIFFTAG_YRESOLUTION=508
>>    TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>>  Image Structure Metadata:
>>    COMPRESSION=CCITTFAX4
>>  Corner Coordinates:
>>  Upper Left  (    0.0,    0.0)
>>  Lower Left  (    0.0,   68.0)
>>  Upper Right (   62.0,    0.0)
>>  Lower Right (   62.0,   68.0)
>>  Center      (   31.0,   34.0)
>>  Band 1 Block=62x68 Type=Byte, ColorInterp=Palette
>>    Metadata:
>>      NBITS=1
>>    Color Table (RGB with 2 entries)
>>      0: 255,255,255,255
>>      1: 0,0,0,255
>>  
>>  
>>  Everything is identical, but the the compression tag.
>>  Do you have any hint what might have gone wrong?
>>  
>>  Thanks in advance,
>>  Tom
>>  
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  
>>     
>
>   

From warmerdam at pobox.com  Sun Jan 13 12:39:25 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jan 13 12:39:29 2008
Subject: [gdal-dev] Does CCITTFax-Compression of GeoTiffs work for you?
In-Reply-To: <478A496F.2030604@gmx.de>
References: <20080113155931.32472.qmail@s403.sureserver.com>
	<478A496F.2030604@gmx.de>
Message-ID: <478A4CCD.5040607@pobox.com>

Tom Kazimiers wrote:
> Ivan,
> 
> thanks for your answer. I do not think that IrfanView writes out of 
> standard CCITT - bu anyway I tryed with gdal_translate.
> Maybe I interpret this information wrong, but "gdal_translate --format 
> GTiff" gives the following output:
> 
> Format Details:
>  Short Name: GTiff
>  Long Name: GeoTIFF
>  Extension: tif
>  Mime Type: image/tiff
>  Help Topic: frmt_gtiff.html
>  Supports: Create() - Create writeable dataset.
>  Supports: CreateCopy() - Create dataset by copying another.
>  Creation Datatypes: Byte UInt16 Int16 UInt32 Int32 Float32 Float64 
> CInt16 CInt32 CFloa
> 
> <CreationOptionList>
>  <Option name="COMPRESS" type="string-select">
>    <Value>NONE</Value>
>    <Value>LZW</Value>
>    <Value>PACKBITS</Value>
>    <Value>JPEG</Value>
>    <Value>DEFLATE</Value>
>  </Option>

Tom,

These are creation options and do not indicate what compression types
are available when reading TIFF files.  In 1.4.3 the FAX compression types
were not supported by GDAL when creating a TIFF file but should be supported
when reading a file.

I don't know why you are having problems.   I would suggest you try reading
the file with a standard build of GDAL (for instance the FWTools build)
and verify that it works at which point you can hopefully isolate your
issue to being WinCE related.

If it is a WinCE specific problem you may need to solve it yourself or
discuss it with Mateusz Loskot.  But Mateusz is mostly unavailable for
several weeks.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From didier.richard at ign.fr  Sun Jan 13 13:18:04 2008
From: didier.richard at ign.fr (RICHARD Didier)
Date: Sun Jan 13 13:14:48 2008
Subject: [gdal-dev] Lambert tangent form to Lambert secant form
Message-ID: <33947.81.66.8.49.1200248284.squirrel@81.66.8.49>

Hi all,

I am facing a bug in the MapInfo driver of GDAL that might need some
modifications of PROJ.4. The bug is two fold :

- MapInfo driver only supports 1SP LCC when building the CoordSys string.
Before, I implement an algorithm that modify LCC 1SP parameters to LCC 2SP
parameters. I would like to know whether someone on the list has already
implemented such a code. Another point is how to wrap that in GDAL (I
address this question to those who are on both list);

- When I use a SRS definition with both nadgrids and towgs84 parameters in
a PROJ.4 string, the later is not taken into account. Therefore, a WKT
string of such a SRS lacks the TOWGS84 block. As a consequence, the
MapInfo driver is not able to code the datum correctly (104 is written
which is the WGS84 datum). I would like to suggest to modify
pj_datum_set.c to keep storing towgs84 values even when nadgrids have been
encountered. The idea is to keep the datum_type has PJD_GRIDSHIFT in order
to keep precise coordinates transformation with grid and to parse the
towgs84 (from line 113). I don't know if there are known or already
debated issues on that, but I would like to know whether this idea is
correct or not.

Any comments/suggestions ?

Sincerely,

didier
-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23
From timmichelsen at gmx-topmail.de  Sun Jan 13 15:50:29 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Sun Jan 13 15:50:33 2008
Subject: [gdal-dev] Re: converting csv to kml: locations displaced in Google
	Earth
In-Reply-To: <1BA12BA0-AC4C-435C-B94B-A90249B0FCBD@hailmail.net>
References: <478685F1.6070601@gmx-topmail.de>
	<1BA12BA0-AC4C-435C-B94B-A90249B0FCBD@hailmail.net>
Message-ID: <478A7995.7030705@gmx-topmail.de>

Hello!

> Maybe someone else can comment on how to property format your CSV to be 
> read by ogr2ogr, or you could try GPSBABEL as a download:
> http://www.gpsbabel.org/htmldoc-development/fmt_csv.html
> 
> or online:
> http://www.gpsvisualizer.com/gpsbabel/
I found out (by trial & error) that CSv files are read well if the have 
the following attributes:
* use comma ( , ) as separator
* if the fields have text with comma wrap it in "": "Singapur, Asia"

If exporting from Office I found the OpenOffice Calc export dialog to 
better that Excel: it allows to specify the charset which is useful for 
non-english texts.

Kind regards,
Timmie
From sfkeller at gmail.com  Mon Jan 14 01:25:50 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon Jan 14 01:25:53 2008
Subject: [gdal-dev] Re: converting csv to kml: locations displaced in
	Google Earth
In-Reply-To: <478A7995.7030705@gmx-topmail.de>
References: <478685F1.6070601@gmx-topmail.de>
	<1BA12BA0-AC4C-435C-B94B-A90249B0FCBD@hailmail.net>
	<478A7995.7030705@gmx-topmail.de>
Message-ID: <25bc040b0801132225p19a722d9ha0035096d18bb258@mail.gmail.com>

You can also try out my beta release of a free online vector file converter
which is based on OGR:
http://geoconverter.hsr.ch !

-- Stefan

2008/1/13, Tim Michelsen <timmichelsen@gmx-topmail.de>:
>
> Hello!
>
> > Maybe someone else can comment on how to property format your CSV to be
> > read by ogr2ogr, or you could try GPSBABEL as a download:
> > http://www.gpsbabel.org/htmldoc-development/fmt_csv.html
> >
> > or online:
> > http://www.gpsvisualizer.com/gpsbabel/
> I found out (by trial & error) that CSv files are read well if the have
> the following attributes:
> * use comma ( , ) as separator
> * if the fields have text with comma wrap it in "": "Singapur, Asia"
>
> If exporting from Office I found the OpenOffice Calc export dialog to
> better that Excel: it allows to specify the charset which is useful for
> non-english texts.
>
> Kind regards,
> Timmie
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080114/0f750bcf/attachment.html
From warmerdam at pobox.com  Mon Jan 14 04:02:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 14 04:02:59 2008
Subject: [gdal-dev] Re: OGR/ GEOS GetNextFeature problem
In-Reply-To: <7ba910530801140042y60b86010l15eaf8aeb6571794@mail.gmail.com>
References: <7ba910530801111243p65e5de4ds785a787adb2d7de2@mail.gmail.com>
	<4787DA73.5030906@pobox.com>
	<7ba910530801121538j28f5687ala0c83bdcebdb5b06@mail.gmail.com>
	<7ba910530801140042y60b86010l15eaf8aeb6571794@mail.gmail.com>
Message-ID: <478B2518.80800@pobox.com>

Ahmet Murat ?zdemiray wrote:
> Frank,
> 
> On previous versions of GDAL, in order to create a polygon object
> SHPReadOGRObject method was making its own controls by checking ring
> direction etc., however, on 1.5.0 these controls are done by a new
> method on OgrGeometryFactory, organizepolygons and this method depends
> on geos calculations. I think, this is what makes older version of
> gdal perform faster than the new version of gdal.
> So there may be a trade off between performance and  precision, and I
> must choose performance for retrieving features from file. Therefore,
> I will continue using previous versions of gdal.

Murat,

Understood.  I have reopened bug report 1217 which tracks the change
that resulted in the slowdown.  If you can provide details (or ideally
the dataset) that demonstrates the problem that would be helpful.

   http://trac.osgeo.org/gdal/ticket/1217

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From sfkeller at gmail.com  Mon Jan 14 05:56:02 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon Jan 14 05:56:04 2008
Subject: [gdal-dev] CSV writer output parameter bug (file or dir?) and
	enhancement requests (SEPARATOR and FIELDSENCLOSED)
Message-ID: <25bc040b0801140256s3d226963w11ce433567a856e0@mail.gmail.com>

1. I think I got a bug: When one indicates an output parameter for any OGR
driver it can either be a directory or a file name depending on input and
parameters.
Now in the following case output is clearly a single layer: ogr2ogr -f CSV
towns.csv towns.shp . The CSV writer always outputs a directory - in this
case: towns.csv/towns.csv - but I expected just towns.csv as a file (without
directory).

2. Enhancement request: Currently the CSV writer outputs commas (",") as
field value separators (or delimiters). This follows "best practices" of CSV
but fails to serve MS Excel as expected. In order to support also a
non-negligible amount of Windows (and Mac) users I suggest to be able to
specify also semicolon or tab as separator.
Proposal: CSV driver specific dataset creation option for field value
separators, called SEPARATOR where commas are the default. This may be
overridden through use of the dataset creation option SEPARATOR which may
have a value of COMMA, SEMICOLON, or TAB. Example: ogr2ogr -f CSV -dsco
SEPARATOR=SEMICOLON out myfile.shp
I already submitted a request for this.

3. There is another issue: There is an 'official' attemtpt to specify CSV
in RFC 4180 (http://www.ietf.org/rfc/rfc4180.txt).
There it says that "Each field may or may not be enclosed in double quotes".
So, this could be another enhancement, e.g. ogr2ogr -f CSV -dsco
FIELDSENCLOSED=YES. Default would be NO.

-- Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080114/c138605e/attachment-0001.html
From abhay.menon at gmail.com  Mon Jan 14 10:14:32 2008
From: abhay.menon at gmail.com (abhay menon)
Date: Mon Jan 14 10:14:36 2008
Subject: [gdal-dev] GDAL and Java
Message-ID: <7a30cd70801140714t56873531ma3661286e6218af1@mail.gmail.com>

Hello all,

I know that presently Java swig bind is not been
maintained. But, want to if there is a sample java implementation of
OGR bind in java similar to that of gdalinfo and gdaltest.java

Best
rgds
Abhay

-- 
Sent from Gmail for mobile | mobile.google.com
From St.Mietke at gmx.de  Mon Jan 14 10:26:43 2008
From: St.Mietke at gmx.de (Stefan Mietke)
Date: Mon Jan 14 10:26:47 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed data
	types)
Message-ID: <20080114152643.194840@gmx.net>

Thats it! It works, wow ...

For interested list members:

The solution of this problem is simple:

After allocating a ByteBuffer, you have to set the Byte order, before reading the raster with 'ReadRaster_Direct()' method.

ByteBuffer byteBuffer = ByteBuffer.allocateDirect(buffer_size);
byteBuffer.order(ByteOrder.nativeOrder());

For the writing process you have to do the same with the output ByteBuffer.

I thank Daniele Romagnoli and Benjamin Collins for their great support.

Stefan Mietke
-- 
Institute for Cartography
TU Dresden

Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger?did=10
From sfkeller at gmail.com  Mon Jan 14 12:08:25 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon Jan 14 12:08:28 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed
	data types)
In-Reply-To: <20080114152643.194840@gmx.net>
References: <20080114152643.194840@gmx.net>
Message-ID: <25bc040b0801140908w58af94dcn54fd3875f3dc0991@mail.gmail.com>

Obviously, there seems to be quite some interest in a Java binding to
GDAL/OGR.
Can someone summarize and perhaps update the wiki/documentation with
instructions and example downloads?
Any volunteers to become a committer for this Java Binding?

-- Stefan

2008/1/14, Stefan Mietke <St.Mietke@gmx.de>:
>
> Thats it! It works, wow ...
>
> For interested list members:
>
> The solution of this problem is simple:
>
> After allocating a ByteBuffer, you have to set the Byte order, before
> reading the raster with 'ReadRaster_Direct()' method.
>
> ByteBuffer byteBuffer = ByteBuffer.allocateDirect(buffer_size);
> byteBuffer.order (ByteOrder.nativeOrder());
>
> For the writing process you have to do the same with the output
> ByteBuffer.
>
> I thank Daniele Romagnoli and Benjamin Collins for their great support.
>
> Stefan Mietke
> --
> Institute for Cartography
> TU Dresden
>
> Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger?did=10
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080114/f212dd8c/attachment.html
From jluis at ualg.pt  Mon Jan 14 12:24:39 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Jan 14 12:24:26 2008
Subject: [gdal-dev] Troubles buiding svn version on windows
Message-ID: <478B9AD7.6080205@ualg.pt>

Hi,
I'm having problem to build the snv version on Windows. Here is a short 
log of the errors.
The last time that updated was about 19 December and had no building 
problems than.

Joaquim Luis

     D:\progs_interix\netcdf-3.6.2b5_win\lib\libnetcdf.lib               
D:\prog
ramas\curl-7.15.1/libcurl_imp.lib wsock32.lib wldap32.lib winmm.lib  
gcore\Versi
on.res  /out:gdal16dev.dll /implib:gdal_i.lib
cpl_path.obj : warning LNK4044: unrecognized option 
"alternatename:__imp_??$?9DU
?$char_traits@D@std@@V?$allocator@D@1@@std@@YA_NABV?$basic_string@DU?$char_trait
s@D@std@@V?$allocator@D@2@@0@PBD@Z=__imp_??9std@@YA_NABV?$basic_string@DU?$char_
traits@D@std@@V?$allocator@D@2@@0@PBD@Z"; ignored
cpl_path.obj : warning LNK4044: unrecognized option 
"alternatename:__imp_??$?9DU
?$char_traits@D@std@@V?$allocator@D@1@@std@@YA_NABV?$basic_string@DU?$char_trait
s@D@std@@V?$allocator@D@2@@0@0@Z=__imp_??9std@@YA_NABV?$basic_string@DU?$char_tr
aits@D@std@@V?$allocator@D@2@@0@0@Z"; ignored

more of this stuff ....
....

LINK : fatal error LNK1104: cannot open file "atls.lib"
From warmerdam at pobox.com  Mon Jan 14 12:40:42 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 14 12:40:41 2008
Subject: [gdal-dev] Motion: Adopt RFC 20: OGRSpatialReference Axis Support
Message-ID: <478B9E9A.5010402@pobox.com>

Folks,

While I'm not super confident I have thought through all possible implications,
I would like to initiate a vote on RFC 20: OGRSpatialReference Axis Support.

   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes

+1 from me.
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jedwards at prologic-inc.com  Mon Jan 14 12:43:59 2008
From: jedwards at prologic-inc.com (John Edwards)
Date: Mon Jan 14 12:45:28 2008
Subject: [gdal-dev] GDAL plugins and ArcGIS 9.2
In-Reply-To: <4786BE03.8070201@pmldnet.com>
References: <2DBB9F887DAA394FA75D98474EA5730D047D2F2B@vader.prologic-inc.com>
	<47865725.4080207@pobox.com> <4786BE03.8070201@pmldnet.com>
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D0484EC53@vader.prologic-inc.com>

Thanks Ivan, Gao and Frank for the suggestions.

I started out with ArcGIS 9.2 (no SP) building with gdal 1.3 on MSVS
2005.  It finally worked once I upgraded to ArcGIS 9.2 SP4 and gdal 1.4
and dropped back to MSVS 2003.

Thanks again!

John

-----Original Message-----
From: Lucena, Ivan [mailto:ivan.lucena@pmldnet.com] 
Sent: Thursday, January 10, 2008 7:53 PM
To: Frank Warmerdam
Cc: John Edwards; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL plugins and ArcGIS 9.2

John,

If you search the gdal-dev archives you will find what Peng Gao (ESRI's)

has to say about that. He said that it is possible but unlikely to work 
due to customization on their end. What I suggest is that as ESRI 
business partner (EDN member or some other kind of arrangement) you 
might be able to get the gdal_1.lib; their additional or modified .h(s) 
and some epsg_*.inc(s) files and use VC71, MSVS 2003, to build a GDAL14 
plugin.

Regards,

Ivan


Frank Warmerdam wrote:
> John Edwards wrote:
>> Is there a branch of GDAL that was used for ArcGIS 9.2?  I'm trying 
>> unsuccessfully to create a plugin for use in ArcGIS and wondering if 
>> the source code that built ESRI's version of gdal13.dll is available.
> 
> John,
> 
> There is no specific ArcGIS branch off GDAL 1.3. In theory I think you
> should be able to build a plugin using MSVC 7.0 (aka MS Visual Studio
2002
> .NET) and any of the GDAL 1.3.x releases.  In practice I'm not sure if
> there are particular options required.
> 
> I'll leave a more comprehensive response to others who know more about

> this.
> 
> Best regards,

From jluis at ualg.pt  Mon Jan 14 13:22:59 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Jan 14 13:22:46 2008
Subject: [gdal-dev] Troubles buiding svn version on windows
In-Reply-To: <478B9AD7.6080205@ualg.pt>
References: <478B9AD7.6080205@ualg.pt>
Message-ID: <478BA883.6080804@ualg.pt>

Joaquim Luis wrote:
> Hi,
> I'm having problem to build the snv version on Windows. Here is a 
> short log of the errors.
> The last time that updated was about 19 December and had no building 
> problems than.

Sorry to not tell everything at once but I only remembered after sending 
the first message.
The errors that I reported occur when using MSVC6 but with the Intel 
compiler all goes fine.

Joaquim
From brownrigg at sunflower.com  Mon Jan 14 13:55:25 2008
From: brownrigg at sunflower.com (Rick Brownrigg)
Date: Mon Jan 14 14:24:32 2008
Subject: [gdal-dev] Issues with Java Bindings in 1.5 ...
Message-ID: <478BB01D.9000408@sunflower.com>

I have spent some time investigating the build issues for the Java 
bindings in 1.5, and for the most part there are a couple of nearly 
trivial fixes to the Makefile and the environment settings that are 
required. However, the most troublesome issue seems to be a swig 
type-mapping issue, which at present I do not know how to correct. It 
centers upon the gdal type ColorEntry, which is mapped in 
...../swig/include/gdal.i    For reasons I don't understand, the 
generated file ..../swig/java/org/gdal/gdal/ColorEntry.java tries to 
pass arguments of type long (a pointer presumably) to the various native 
settors/gettors implemented in gdalJNI.java (also a generated file), 
which is expecting java.awt.Color objects instead. Hence the code will 
not compile.  I don't understand the source of the mismatch, 
particularly as these two files are generated by swig.

Note that this mismatch was present in 1.4.x, but was masked by a #ifdef 
SWIGCSHARP directive around the mapping in gdal.i.  (and thus there was 
no Java proxy for the gdal type ColorEntry in 1.4.x (?)).

I had indicated I would volunteer to support the Java bindings, but with 
this experience, I am now not confident  that I can do so in a timely 
fashion.

FWIW...
Rick Brownrigg

From eschenbe at psc.edu  Mon Jan 14 15:07:11 2008
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Mon Jan 14 15:07:13 2008
Subject: [gdal-dev] Re: Poor Aggrement Between Layers
In-Reply-To: <4782A9D1.60605@psc.edu>
References: <477BFE05.3040703@psc.edu> <4782A9D1.60605@psc.edu>
Message-ID: <478BC0EF.9000904@psc.edu>

This problem has been traced, I believe, to an error in the original relief map 
in the Lambert projection provided by the National Atlas of the US (NAUS). The 
same map in the Albers projection seems correct.

On 1/2/2008 Kent Eschenberg wrote:
 > The two map layers described at
 >
 >    nationalatlas.gov/mld/srld48i.html (relief)
 >    nationalatlas.gov/mld/roadtrl.html (roads)
 >
 > don't seem to agree. If I look at the Los Angeles area I must shift
 > the roads about 10,596 feet to the right and 1,849 down.

Further testing has been done with these 3 datasets:

   A: nationalatlas.gov/mld/roadtrl.html (roads, geographic)
   B: nationalatlas.gov/mld/srld48i.html (relief, Lambert)
   C: nationalatlas.gov/mld/srld48a.html (relief, Albers)

The comparisons were done by converting one map to the same projection as the 
other map as follows:

   Compare A to B->geographic: disagree
   Compare A to C->geographic: agree
   Compare A->Lambert to B: disagree
   Compare B->geographic to C->geographic: disagree
   Compare A to C->geographic->Lambert->geographic: agree

The transformations at the "->" were performed by GDAL. For example, 
B->geographic was performed with

    gdalwarp -t_srs WGS84 srld48i200l.tif srld48i200l_WGS84.tif

where the projection of the input file is read from the file and associated 
files in the same directory.

Note that both the first and the last comparison exercised the GDAL 
transformation from Lambert to geographic. It seems therefore that this 
transformation is being done correctly by GDAL. The only conclusion I can make 
is that B is in error.

The funny thing is that Jay at the NAUS sent an image from their online 
MapMaker utility that uses A and B, and the results agree. Maybe MapMaker 
doesn't use exactly the same version of B as is available to the public for 
downloading.

Kent
Pittsburgh Supercomputing Center
From rdeyoe at clarksville.com  Mon Jan 14 15:31:27 2008
From: rdeyoe at clarksville.com (Ryk DeYoe)
Date: Mon Jan 14 15:30:21 2008
Subject: [gdal-dev] PGeo driver errors
Message-ID: <02d801c856ec$70d95120$090aa8c0@rdeyoe>


I'm using the PGeo driver to try to read some ESRI geodatabases to feed
Mapserver.  I'm running Ubuntu Edgy.  The standard Ubuntu gdal didn't have
PGeo compiled in so I've compiled gdal 1.3.1 (to match the Ubuntu libs) with
PGeo.  I've created the necessary ODBC connections to the mdb files.  I also
have the standard mdb-tools package installed.  I'm getting a "stack
smashing detected" error when trying to read the layers from the mdb file.
I think I've narrowed it down to reading the SRTEXT field from the
GDB_SpatialRefs table.  If i put dummy values in the field, it will read the
tables and give me layers but of course, the SRS is completely wrong.  I've
compiled gdal with stack protection turned off and then it just segfaults...

I have two ODBC sources: mdbcrash is the original mdb files in our GIS.  The
mdbtest source is the exact same file with dummy values in the SRTEXT field.

/*---------On the original mdbcrash source------------
user@gis:~# ogrinfo PGeo:mdbcrash
*** stack smashing detected ***: ogrinfo terminated
Aborted

/*---------On the modified mdbtest  source------------
user@gis:~# ogrinfo PGeo:mdbtest
ERROR 1: importFromWKT() failed on SRS 'dummy srtext1'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext2'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext3'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext2'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext4'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext5'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext6'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext7'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext8'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext9'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext10'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext1'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext7'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext7'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext7'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext7'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext7'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext11'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext11'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext11'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext11'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext11'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext11'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext11'.
ERROR 1: importFromWKT() failed on SRS 'dummy srtext12'.
INFO: Open of `PGeo:mdbtest'
using driver `PGeo' successful.
1: ww_val_shts
2: ww_treatment_plant
3: ww_pmp_arnd_ports (Point)
4: ww_plug (Point)
5: ww_ovrflw_wtrshd
6: ww_monitorpoints (Point)
7: ww_low_pressure_system (Point)
8: ww_laterals (Line String)
9: ww_cso (Point)
10: ww_cleanout (Point)
11: ww_chemical_feed_site (Point)
12: ww_basin
13: ww_sub_basin
14: ww_pump_station (Point)
15: ww_valves (Point)
16: ww_gravity_sewer (Line String)
17: ww_force_main (Line String)
18: T_1_DirtyAreas
19: T_1_PointErrors (Point)
20: T_1_LineErrors (Line String)
21: T_1_PolyErrors
22: Forcemain_Junctions (Point)
23: ww_manhole (Point)
24: gravity_sewer_Junctions (Point)
25: FlowMeter (Point)

----------------------------------------------------------

The SRTEXT field in the crashing file contains:

PROJCS["NAD_1983_StatePlane_Tennessee_FIPS_4100_Feet",GEOGCS["GCS_North_Amer
ican_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.2
57222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJEC
TION["Lambert_Conformal_Conic"],PARAMETER["False_Easting",1968500.0],PARAMET
ER["False_Northing",0.0],PARAMETER["Central_Meridian",-86.0],PARAMETER["Stan
dard_Parallel_1",35.25],PARAMETER["Standard_Parallel_2",36.41666666666666],P
ARAMETER["Latitude_Of_Origin",34.33333333333334],UNIT["Foot_US",0.3048006096
012192]]

The SRTEXT field in the modified file just has "dummy srtext" and the row
number of the record.

--------------------------------------------------------
odbc.ini:

[mdbtest]
Description=Sample PGeo Database
Driver=MDBDriver
Database=/tmp/good_sewer.mdb
#Host        =
Port=5432
#User        =
#Password    =
Trace=Yes
TraceFile=/var/log/odbc.log
Debug=yes
DebugFile=/var/log/odbc.dbg

[mdbcrash]
Description=Sample PGeo Database
Driver=MDBDriver
Database=/tmp/bad_sewer.mdb
#Host        =
Port=5432
#User        =
#Password    =
Trace=Yes
TraceFile=/var/log/odbc.log
Debug=yes
DebugFile=/var/log/odbc.dbg

-----------------------------------------------------
I have an sql.log file tracing the odbc calls.  Looks ok until it starts
selecting the srtext values.  I'm not sure but the buffer length seems to be
set to 511 where my srtext string is 542 in length.  Could this be the
problem?  And where can I increase this value?....in the ODBC source?...or
in gdal? (I've downloaded the odbc source just in case i have to rebuild)

[ODBC][21774][SQLAllocHandle.c][523]
                Entry:
                        Handle Type = 3
                        Input Handle = 0x804e658
[ODBC][21774][SQLAllocHandle.c][1058]
                Exit:[SQL_SUCCESS]
                        Output Handle = 0x8088bc0
[ODBC][21774][SQLExecDirect.c][236]
                Entry:
                        Statement = 0x8088bc0
                        SQL = [SELECT srtext FROM GDB_SpatialRefs WHERE srid
= 1][length = 49 (SQL_NTS)]
[ODBC][21774][SQLExecDirect.c][499]
                Exit:[SQL_SUCCESS]
[ODBC][21774][SQLNumResultCols.c][149]
                Entry:
                        Statement = 0x8088bc0
                        Column Count = 0xbffb8dc0
[ODBC][21774][SQLNumResultCols.c][234]
                Exit:[SQL_SUCCESS]
                        Count = 0xbffb8dc0 -> 1
[ODBC][21774][SQLDescribeCol.c][231]
                Entry:
                        Statement = 0x8088bc0
                        Column Number = 1
                        Column Name = 0xbffb8c58
                        Buffer Length = 256
                        Name Length = 0xbffb8c56
                        Data Type = 0x80879a0
                        Column Size = 0x8087a58
                        Decimal Digits = 0x80880f0
                        Nullable = 0x8087b68
[ODBC][21774][SQLDescribeCol.c][474]
                Exit:[SQL_SUCCESS]
                        Column Name = Indicator = -18715
                        Data Type = 0x80879a0 -> -1
                        Column Size = 0x8087a58 -> 0
                        Decimal Digits = 0x80880f0 -> 0
                        Nullable = 0x8087b68 -> 1
[ODBC][21774][SQLFetch.c][158]
                Entry:
                        Statement = 0x8088bc0
[ODBC][21774][SQLFetch.c][340]
                Exit:[SQL_SUCCESS]
[ODBC][21774][SQLGetData.c][230]
                Entry:
                        Statement = 0x8088bc0
                        Column Number = 1
                        Target Type = 1 SQL_CHAR
                        Buffer Length = 511
                        Target Value = 0xbffb8b78
                        StrLen Or Ind = 0xbffb8b5c
[ODBC][21774][SQLGetData.c][494]
                Exit:[SQL_SUCCESS]
                        Buffer =
[PROJCS["NAD_1983_StatePlane_Tennessee_FIPS_4100_Feet",GEOGCS["GCS_North_Ame
rican_1983",D
ATUM["D_North_American_1983",SPHEROID["G]
                        Strlen Or Ind = 0xbffb8b5c -> 12

-------------------- That's where it
stops ------------------------------------



Everything else with gdal seems to run great.  Shape files aren't a problem
but our GIS department doesn't update the shape files anymore....they work
in the geodatabases exclusively now.  Our geotiff aerial photos look very
nice and the gdaltindex stitched them together pretty simply.  I've been
trying to find the place to set the buffer size but not being a programmer
has me at a disadvantage.

Any help or direction is greatly appreciated.

Ryk DeYoe








From warmerdam at pobox.com  Mon Jan 14 15:44:54 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 14 15:44:56 2008
Subject: [gdal-dev] PGeo driver errors
In-Reply-To: <02d801c856ec$70d95120$090aa8c0@rdeyoe>
References: <02d801c856ec$70d95120$090aa8c0@rdeyoe>
Message-ID: <478BC9C6.9060707@pobox.com>

Ryk DeYoe wrote:
> I'm using the PGeo driver to try to read some ESRI geodatabases to feed
> Mapserver.  I'm running Ubuntu Edgy.  The standard Ubuntu gdal didn't have
> PGeo compiled in so I've compiled gdal 1.3.1 (to match the Ubuntu libs) with
> PGeo.  I've created the necessary ODBC connections to the mdb files.  I also
> have the standard mdb-tools package installed.  I'm getting a "stack
> smashing detected" error when trying to read the layers from the mdb file.
> I think I've narrowed it down to reading the SRTEXT field from the
> GDB_SpatialRefs table.  If i put dummy values in the field, it will read the
> tables and give me layers but of course, the SRS is completely wrong.  I've
> compiled gdal with stack protection turned off and then it just segfaults...

...

> I have an sql.log file tracing the odbc calls.  Looks ok until it starts
> selecting the srtext values.  I'm not sure but the buffer length seems to be
> set to 511 where my srtext string is 542 in length.  Could this be the
> problem?  And where can I increase this value?....in the ODBC source?...or
> in gdal? (I've downloaded the odbc source just in case i have to rebuild)
...
> Everything else with gdal seems to run great.  Shape files aren't a problem
> but our GIS department doesn't update the shape files anymore....they work
> in the geodatabases exclusively now.  Our geotiff aerial photos look very
> nice and the gdaltindex stitched them together pretty simply.  I've been
> trying to find the place to set the buffer size but not being a programmer
> has me at a disadvantage.

Ryk,

This sounds like an old but with the CPL ODBC code.  I suspect you need this
patch:

   http://trac.osgeo.org/gdal/changeset/12531

Presumably there is more info available in the associated bug ticket:

   http://trac.osgeo.org/gdal/ticket/1902

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Mon Jan 14 16:10:31 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 14 16:10:34 2008
Subject: [gdal-dev] Issues with Java Bindings in 1.5 ...
In-Reply-To: <478BB01D.9000408@sunflower.com>
References: <478BB01D.9000408@sunflower.com>
Message-ID: <f3b73b7d0801141310i4ff68413tb215a1e5d5f8a73d@mail.gmail.com>

Rick,

You can get further information about the history of the related
changes from this ticket:
http://trac.osgeo.org/gdal/ticket/1578

According to the changeset http://trac.osgeo.org/gdal/changeset/11640
The ColoryEntry is treated as objects for all of the binding instead
of arrays. Therefore the typemaps for GDALColorEntry in java has
become outdated.
It seems to me that these typemaps in the java bindings are tending to
map GDALColorEntry directly to java/awt/Color which is a target
language specific type.

I can consider the following 2 trivial options to fix this problem:

1, Revert the change for java

Index: gdal.i
===================================================================
--- gdal.i	(revision 13527)
+++ gdal.i	(working copy)
@@ -258,7 +258,7 @@
 // GDALColorEntry
 //
 //************************************************************************
-#ifndef SWIGPERL
+#if !definied(SWIGPERL) and !defined(SWIGJAVA)
 %rename (ColorEntry) GDALColorEntry;
 typedef struct
 {


2. Strip the GDALColorEntry typemaps and thread ColorEntry as a separate class.

Index: typemaps_java.i
===================================================================
--- typemaps_java.i	(revision 13527)
+++ typemaps_java.i	(working copy)
@@ -65,46 +65,9 @@



-%typemap(in) (GDALColorEntry *) (GDALColorEntry tmp) {
-  /* %typemap(in) (GDALColorEntry *) (GDALColorEntry tmp) */
-  $1 = NULL;
-  float *colorptr = 0;
-  const jclass Color = jenv->FindClass("java/awt/Color");
-  const jmethodID colors = jenv->GetMethodID(Color, "getRGBComponents",
-    "([F)[F");

-  jfloatArray colorArr = jenv->NewFloatArray(4);
-  colorArr = (jfloatArray)jenv->CallObjectMethod($input, colors, colorArr);

-  colorptr = (float *)jenv->GetFloatArrayElements(colorArr, 0);
-  tmp.c1 = (short)(colorptr[0] * 255);
-  tmp.c2 = (short)(colorptr[1] * 255);
-  tmp.c3 = (short)(colorptr[2] * 255);
-  tmp.c4 = (short)(colorptr[3] * 255);
-  /*printf( "  %d, %d, %d, %d\n",
-                    tmp.c1, tmp.c2, tmp.c3, tmp.c4 );*/
-  $1 = &tmp;
-}

-%typemap(out) (GDALColorEntry *) {
-  /* %typemap(out) (GDALColorEntry *) */
-  const jclass Color = jenv->FindClass("java/awt/Color");
-  const jmethodID ccon = jenv->GetMethodID(Color, "<init>",
-    "(IIII)V");
-  $result = jenv->NewObject(Color, ccon, $1->c1, $1->c2, $1->c3, $1->c4);
-}
-
-%typemap(jni) (GDALColorEntry *) "jobject"
-%typemap(jtype) (GDALColorEntry *) "java.awt.Color"
-%typemap(jstype) (GDALColorEntry *) "java.awt.Color"
-%typemap(javain) (GDALColorEntry *) "$javainput"
-%typemap(javaout) (GDALColorEntry *) {
-    return $jnicall;
-  }
-
-
-
-
 /*
  * Typemap argout of GDAL_GCP* used in Dataset::GetGCPs( )
  */

I would suggest to apply #2 in the development version since it
reduces the divergence between the java and the other languages,
however it breaks the backward compatibility.

Best regards,

Tamas




2008/1/14, Rick Brownrigg <brownrigg@sunflower.com>:
> I have spent some time investigating the build issues for the Java
> bindings in 1.5, and for the most part there are a couple of nearly
> trivial fixes to the Makefile and the environment settings that are
> required. However, the most troublesome issue seems to be a swig
> type-mapping issue, which at present I do not know how to correct. It
> centers upon the gdal type ColorEntry, which is mapped in
> ...../swig/include/gdal.i    For reasons I don't understand, the
> generated file ..../swig/java/org/gdal/gdal/ColorEntry.java tries to
> pass arguments of type long (a pointer presumably) to the various native
> settors/gettors implemented in gdalJNI.java (also a generated file),
> which is expecting java.awt.Color objects instead. Hence the code will
> not compile.  I don't understand the source of the mismatch,
> particularly as these two files are generated by swig.
>
> Note that this mismatch was present in 1.4.x, but was masked by a #ifdef
> SWIGCSHARP directive around the mapping in gdal.i.  (and thus there was
> no Java proxy for the gdal type ColorEntry in 1.4.x (?)).
>
> I had indicated I would volunteer to support the Java bindings, but with
> this experience, I am now not confident  that I can do so in a timely
> fashion.
>
> FWIW...
> Rick Brownrigg
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jluis at ualg.pt  Mon Jan 14 16:41:08 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Jan 14 16:44:22 2008
Subject: [gdal-dev] http driver timeout
Message-ID: <478BD6F4.1050903@ualg.pt>

Hi,

I'm using the new http driver trough a mex file within Matlab and things 
work fine ... while I don't have proxy problems.
The proxy problems is another matter, but when they do occur I have 
Matlab hanged (it's a very friendly multitask soft) during several 
minutes until the mex function gives up with a timeout error.
My question is: is there a way - a runtime parameter or something else - 
that permits to reduce that waiting time in case of connection failure?

Thanks
Joaquim Luis
From warmerdam at pobox.com  Mon Jan 14 16:58:01 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 14 16:58:00 2008
Subject: [gdal-dev] http driver timeout
In-Reply-To: <478BD6F4.1050903@ualg.pt>
References: <478BD6F4.1050903@ualg.pt>
Message-ID: <478BDAE9.6040904@pobox.com>

Joaquim Luis wrote:
> Hi,
> 
> I'm using the new http driver trough a mex file within Matlab and things 
> work fine ... while I don't have proxy problems.
> The proxy problems is another matter, but when they do occur I have 
> Matlab hanged (it's a very friendly multitask soft) during several 
> minutes until the mex function gives up with a timeout error.
> My question is: is there a way - a runtime parameter or something else - 
> that permits to reduce that waiting time in case of connection failure?

Joaquim,

I am not aware of a way for the user to set the timeout for the HTTP driver.
For the WCS driver there is a timeout element in the xml definition file,
but the HTTP driver doesn't have something corresponding.

You could modify the source code to add a mechanism - for instance change
the following code in gdal/port/cpl_http.cpp to include a default timeout
of your selection:

     /* Set timeout.*/
     const char *pszTimeout = CSLFetchNameValue( papszOptions, "TIMEOUT" );
     if( pszTimeout != NULL )
         curl_easy_setopt(http_handle, CURLOPT_TIMEOUT,
                          atoi(pszTimeout) );

There may also be an environment variable recognised by libcurl but I
haven't dug into that in details.  See curl.haxx.se I think.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jluis at ualg.pt  Mon Jan 14 17:15:52 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Jan 14 17:15:38 2008
Subject: [gdal-dev] http driver timeout
In-Reply-To: <478BDAE9.6040904@pobox.com>
References: <478BD6F4.1050903@ualg.pt> <478BDAE9.6040904@pobox.com>
Message-ID: <478BDF18.1070405@ualg.pt>


> You could modify the source code to add a mechanism - for instance change
> the following code in gdal/port/cpl_http.cpp to include a default timeout
> of your selection:
>
>     /* Set timeout.*/
>     const char *pszTimeout = CSLFetchNameValue( papszOptions, 
> "TIMEOUT" );
>     if( pszTimeout != NULL )
>         curl_easy_setopt(http_handle, CURLOPT_TIMEOUT,
>                          atoi(pszTimeout) );
>
> There may also be an environment variable recognised by libcurl but I
> haven't dug into that in details.  See curl.haxx.se I think.

Frank, thanks

I did had a look on libcurl doc. From the info here
http://curl.netmirror.org/libcurl/c/curl_easy_setopt.html#CURLOPTTIMEOUT
maybe the right parameter to pass is CURLOPT_CONNECTTIMEOUT

Joaquim
From rdeyoe at clarksville.com  Mon Jan 14 17:30:27 2008
From: rdeyoe at clarksville.com (Ryk DeYoe)
Date: Mon Jan 14 17:29:20 2008
Subject: [gdal-dev] PGeo driver errors
In-Reply-To: <478BC9C6.9060707@pobox.com>
Message-ID: <02eb01c856fd$10bb8ae0$090aa8c0@rdeyoe>



-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Monday, January 14, 2008 2:45 PM
To: Ryk DeYoe
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] PGeo driver errors


Ryk DeYoe wrote:
> I'm using the PGeo driver to try to read some ESRI geodatabases to feed
> Mapserver.  I'm running Ubuntu Edgy.  The standard Ubuntu gdal didn't have
> PGeo compiled in so I've compiled gdal 1.3.1 (to match the Ubuntu libs)
with
> PGeo.  I've created the necessary ODBC connections to the mdb files.  I
also
> have the standard mdb-tools package installed.  I'm getting a "stack
> smashing detected" error when trying to read the layers from the mdb file.
> I think I've narrowed it down to reading the SRTEXT field from the
> GDB_SpatialRefs table.  If i put dummy values in the field, it will read
the
> tables and give me layers but of course, the SRS is completely wrong.
I've
> compiled gdal with stack protection turned off and then it just
segfaults...

...

> I have an sql.log file tracing the odbc calls.  Looks ok until it starts
> selecting the srtext values.  I'm not sure but the buffer length seems to
be
> set to 511 where my srtext string is 542 in length.  Could this be the
> problem?  And where can I increase this value?....in the ODBC source?...or
> in gdal? (I've downloaded the odbc source just in case i have to rebuild)
...
> Everything else with gdal seems to run great.  Shape files aren't a
problem
> but our GIS department doesn't update the shape files anymore....they work
> in the geodatabases exclusively now.  Our geotiff aerial photos look very
> nice and the gdaltindex stitched them together pretty simply.  I've been
> trying to find the place to set the buffer size but not being a programmer
> has me at a disadvantage.

Ryk,

This sounds like an old but with the CPL ODBC code.  I suspect you need this
patch:

   http://trac.osgeo.org/gdal/changeset/12531

Presumably there is more info available in the associated bug ticket:

   http://trac.osgeo.org/gdal/ticket/1902

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



Thanks Frank, but there's no happiness there.  I'm still getting the same
error.  Just for fun, I grabbed the 1.5.0 source and saw that patch in
cpl_odbc.cpp also.  Compiled the 1.5.0 source and ran ogrinfo from the
gdal/apps directory and it's doing the same thing.  The sql.log file stops
at the same place, selecting srtext on the first record (there are 12
layers):

-------  tail sql.log  (ran with 1.5.0 ogrinfo) ---------

[ODBC][2064][SQLExecDirect.c][236]
                Entry:
                        Statement = 0x8088bc0
                        SQL = [SELECT srtext FROM GDB_SpatialRefs WHERE srid
= 1][length = 49 (SQL_NTS)]
[ODBC][2064][SQLExecDirect.c][499]
                Exit:[SQL_SUCCESS]
[ODBC][2064][SQLNumResultCols.c][149]
                Entry:
                        Statement = 0x8088bc0
                        Column Count = 0xbff6ef10
[ODBC][2064][SQLNumResultCols.c][234]
                Exit:[SQL_SUCCESS]
                        Count = 0xbff6ef10 -> 1
[ODBC][2064][SQLDescribeCol.c][231]
                Entry:
                        Statement = 0x8088bc0
                        Column Number = 1
                        Column Name = 0xbff6eda8
                        Buffer Length = 256
                        Name Length = 0xbff6eda6
                        Data Type = 0x80879a0
                        Column Size = 0x8087a58
                        Decimal Digits = 0x80880f0
                        Nullable = 0x8087b68
[ODBC][2064][SQLDescribeCol.c][474]
                Exit:[SQL_SUCCESS]
                        Column Name = Indicator = -18719
                        Data Type = 0x80879a0 -> -1
                        Column Size = 0x8087a58 -> 0
                        Decimal Digits = 0x80880f0 -> 0
                        Nullable = 0x8087b68 -> 1
[ODBC][2064][SQLFetch.c][158]
                Entry:
                        Statement = 0x8088bc0
[ODBC][2064][SQLFetch.c][340]
                Exit:[SQL_SUCCESS]
[ODBC][2064][SQLGetData.c][230]
                Entry:
                        Statement = 0x8088bc0
                        Column Number = 1
                        Target Type = 1 SQL_CHAR
                        Buffer Length = 511
                        Target Value = 0xbff6ecc8
                        StrLen Or Ind = 0xbff6ecac
[ODBC][2064][SQLGetData.c][494]
                Exit:[SQL_SUCCESS]
                        Buffer =
[PROJCS["NAD_1983_StatePlane_Tennessee_FIPS_4100_Feet",GEOGCS["GCS_North_Ame
rican_1983",DA
TUM["D_North_American_1983",SPHEROID["G]
                        Strlen Or Ind = 0xbff6ecac -> 12
---------  *SPLAT! -----------------------------------------

From rush at winkey.org  Mon Jan 14 17:31:26 2008
From: rush at winkey.org (winkey)
Date: Mon Jan 14 17:31:30 2008
Subject: [gdal-dev] grib driver
Message-ID: <1200349886.23033.42.camel@winkey.org>

After trying a second time I finally got the grib driver to work for me.

the grib file i am testing with is the gfs forecast model .5 degree
global grid available from
http://www.ftp.ncep.noaa.gov/data/nccf/com/gfs/prod/gfs.2008011412/gfs.t12z.pgrb2f00

replace 2008011412 with current date, last 2 digits are hour 00, 06, 12,
18

this is a list of my experiences.

first with gdalinfo I noticed that not enough info was reported to
choose the band(s) you want

degrib reports:
 2.0, 158408, 2, TMP="Temperature [K]", 1000-ISBL, 11/05/2007 00:00,
11/05/2007 00:00, 0.00

gdalinfo reports:
Band 2 Block=720x1 Type=Float64, ColorInterp=Undefined
  Description = 1000[Pa] ISBL="Isobaric surface"


There seems to be no way to specify the units. degrib has a feature to
convert the values in the grid to english or metric units. For instance
in the band above default would have the values in kelvin, specifying
english would convert those values to Fahrenheit, and metric would
convert to celsius.


Two part messages seem to be represented by two different bands. This is
not necessarily a problem but without the variable name being reported
by gdalinfo it is hard to find what your looking for.

degrib reports:
8.0, 901490, 2, UGRD="u-component of wind [m/s]", 2000-ISBL, 11/05/2007
00:00, 11/05/2007 00:00, 0.00
8.1, 901490, 2, VGRD="v-component of wind [m/s]", 2000-ISBL, 11/05/2007
00:00, 11/05/2007 00:00, 0.00

gdalinfo reports:
Band 8 Block=720x1 Type=Float64, ColorInterp=Undefined
  Description = 2000[Pa] ISBL="Isobaric surface"
Band 9 Block=720x1 Type=Float64, ColorInterp=Undefined
  Description = 2000[Pa] ISBL="Isobaric surface"


I tried contouring band 169 (aka grib msg 147) 925 mb temps it seemed to
contour only the northern hemisphere and nothing seemed in the right
place. once again I may have the wrong band, but that would not effect
hemisphere only the contours


thanks

brian



From warmerdam at pobox.com  Mon Jan 14 23:46:40 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 14 23:46:34 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <478B9E9A.5010402@pobox.com>
References: <478B9E9A.5010402@pobox.com>
Message-ID: <478C3AB0.7010102@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> While I'm not super confident I have thought through all possible 
> implications,
> I would like to initiate a vote on RFC 20: OGRSpatialReference Axis 
> Support.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes
> 
> +1 from me.

Folks,

I appologise for the irregularity but I have updated the RFC with a
suggested friend ammendment from Howard.  In the OGRCoordinateTransformation
section I added:

"""
The CPL config option "IGNORE_AXIS_ORIENTATION" may also be set to
"FALSE" to disable OGRCoordinateTransformation's checking, and application
of axis orientation changes. Effectively this is a backdoor to disable the
core effects of the RFC.
"""

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Jan 14 23:54:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 14 23:54:38 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <478C3AB0.7010102@pobox.com>
References: <478B9E9A.5010402@pobox.com> <478C3AB0.7010102@pobox.com>
Message-ID: <478C3C8C.6070804@pobox.com>

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> Folks,
>>
>> While I'm not super confident I have thought through all possible 
>> implications,
>> I would like to initiate a vote on RFC 20: OGRSpatialReference Axis 
>> Support.
>>
>>   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes
>>
>> +1 from me.
> 
> Folks,
> 
> I appologise for the irregularity but I have updated the RFC with a
> suggested friendly ammendment from Howard.  In the 
> OGRCoordinateTransformation
> section I added:
> 
> """
> The CPL config option "IGNORE_AXIS_ORIENTATION" may also be set to
> "FALSE" to disable OGRCoordinateTransformation's checking, and application
> of axis orientation changes. Effectively this is a backdoor to disable the
> core effects of the RFC.
> """

Grr, I got the sense of that backwards.  It now reads:

  """
  The CPL config option "IGNORE_AXIS_ORIENTATION" may also be set to
  "TRUE" to disable OGRCoordinateTransformation's checking, and application
  of axis orientation changes. Effectively this is a backdoor to disable the
  core effects of the RFC.
  """

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dron at ak4719.spb.edu  Tue Jan 15 02:03:49 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Jan 15 02:19:26 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <478C3C8C.6070804@pobox.com>
References: <478B9E9A.5010402@pobox.com> <478C3AB0.7010102@pobox.com>
	<478C3C8C.6070804@pobox.com>
Message-ID: <20080115070349.GA11946@ak4719.spb.edu>

On Mon, Jan 14, 2008 at 11:54:36PM -0500, Frank Warmerdam wrote:
>  The CPL config option "IGNORE_AXIS_ORIENTATION" may also be set to
>  "TRUE" to disable OGRCoordinateTransformation's checking, and
>  application of axis orientation changes. Effectively this is a
>  backdoor to disable the core effects of the RFC.

Frank,

Do we have any convention on GDAL option naming? Some of them starts
with "GDAL_" prefix, but this one not. I am suggesting to rename it in
"GDAL_IGNORE_AXIS_ORIENTATION" to be more uniform and clear.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From 2voodoo at gmx.de  Tue Jan 15 04:29:10 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Tue Jan 15 04:29:10 2008
Subject: [gdal-dev] Does CCITTFax-Compression of GeoTiffs work for you?
In-Reply-To: <20080113155931.32472.qmail@s403.sureserver.com>
References: <20080113155931.32472.qmail@s403.sureserver.com>
Message-ID: <478C7CE6.6030109@gmx.de>

Hello,
> Have you try to check the integrity of that files in another software? 
>   
Yes, I did - no problem occured. So I think the TIFs are fine.
> And what if you gdal_translate the successful LZW file to CCITT 4? Does it works?
>   
I did not recognize this tool before, thanks for this hint - I needed 
this with another problem. But for this no change in behaviour of my 
program.
gdal_translate translated everything correctly but the only compression 
that seem to work for me is LZW. All the others (I tryed with GDAL 1.50) 
do not work.
Surely OpenEV and other vierwers are able to display them.
So like you, Frank, said it is now a WinCE related problem - I will try 
to trace through the code and see what happens.

Anyway - thank you for your help.

Tom
From a.neumann at carto.net  Tue Jan 15 08:26:52 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue Jan 15 08:26:55 2008
Subject: [gdal-dev] tiff format: compression vs. performance
Message-ID: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at>

Hello,

I am wondering whether there is a webpage with some tips/hints on what is
the best compression method within the tiff file format when performance
is also an issue. My data is primarily read only, but reading should be
fast. I heard that storing the tiff files as uncompressed is often still
the fastest. Is this still the case? Are there recommended compression
methods that are both fast (and allow random access to a big tiff file)
and also creates smaller file sizes? I am looking at lossless compression
methods, so jpeg is not an option.

Thanks for hints (or links to a webpage discussing this issue).

Andreas


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From crschmidt at metacarta.com  Tue Jan 15 08:44:37 2008
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Tue Jan 15 08:44:40 2008
Subject: [gdal-dev] tiff format: compression vs. performance
In-Reply-To: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at>
References: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at>
Message-ID: <20080115134437.GC6639@alta.metacarta.com>

On Tue, Jan 15, 2008 at 02:26:52PM +0100, Andreas Neumann wrote:
> Hello,
> 
> I am wondering whether there is a webpage with some tips/hints on what is
> the best compression method within the tiff file format when performance
> is also an issue. My data is primarily read only, but reading should be
> fast. I heard that storing the tiff files as uncompressed is often still
> the fastest. Is this still the case? Are there recommended compression
> methods that are both fast (and allow random access to a big tiff file)
> and also creates smaller file sizes? I am looking at lossless compression
> methods, so jpeg is not an option.
> 
> Thanks for hints (or links to a webpage discussing this issue).

http://wiki.openaerialmap.org/Serving_Data

Regards,
-- 
Christopher Schmidt
MetaCarta
From ed at topozone.com  Tue Jan 15 10:03:57 2008
From: ed at topozone.com (Ed McNierney)
Date: Tue Jan 15 10:03:59 2008
Subject: [gdal-dev] tiff format: compression vs. performance
In-Reply-To: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at>
References: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at>
Message-ID: <4BF377919225F449BB097CB76FFE9BC8019887D2@ptolemy.topozone.com>

Andreas -

This is a complex issue, with many different factors involved.  I think it is more important to understand the principles involved rather than look at specific performance numbers for a given data set.

Compression essentially trades off disk read time for compute time.  For a compressed data set you spend less time reading from the disk (in theory) and more time decompressing the data.  If you don't manage to spend less time reading from the disk, then you're certainly going to have poorer performance than uncompressed data!

Generally speaking, of course, your disk is slow and your CPU is fast, but there's a lot of variability in both of those measurements.  Some disks are pretty fast, and some CPUs, while fast, may be busy doing a lot of other things.  Your disk will also have a certain read resolution or granularity; reading 100 bytes from a disk is no faster than reading 200 bytes, because your disk subsystem will read at least a whole sector when requested to do either.

You also need to look at the properties of your data, especially if you're limiting yourself to uncompressed, PackBits, and LZW-compressed TIFFs.  Some data sets (aerial photography) are usually quite incompressible using those algorithms.  They're not going to get any smaller if you try to compress them, so there's no point in trying.  Other data sets will perform much better.  You should test your data to first see which compression methods provide useful compression in your situation.

LZW compression can be particularly tricky, since it builds a "dictionary" on the fly from the source data.  Normally this means that if you want to read only the lower-right pixel in a TIFF file you will need to read and decode the ENTIRE file, in order to reconstruct the dictionary to read that last pixel.  This does not have to be the case, however.  You can specify a STRIP size in your TIFF file; this will treat the file as a series of strips, each N rows high.  Reading a random location in the file will only require decoding the strip that contains that data.  You will not get quite as good compression, but you can get much faster LZW performance.

Think carefully about what's involved in reading your data from the disk.  If you're reading a small, vertical strip from the file your disk will need to read a few bytes from one line, then (possibly) seek to the next line, read a few bytes, etc.  If your file is particularly wide this can become a problem, since a disk SEEK is the slowest thing you can possibly do.  This is where TILED TIFFs will help you, as they will organize your data in tiles rather than strips.  Think about what tiling is doing for you - it is reducing the need to seek across the width of the file to move vertically in the image.  Your tile size needs to be substantially smaller than the width of your TIFF in order to produce a noticeable improvement.  Again, the penalty you pay for seeking through the file depends very heavily on your particular disk subsystem, and you may or may not see much improvement from tiling.

I will give one example that showed quite different results from the one Christopher posted, simply to illustrate the variability.  This was a very old experiment and I don't have specific measurements available.  I was trying to compress scanned USGS topographic maps (DRGs), which are essentially line art scanned as TIFFs.  These images actually DO compress very well with Packbits or LZW, because they aren't photos and contain long stretches of identical pixels or repeated patterns.

There was no performance problem with the uncompressed TIFFs, but I needed more disk space (this was a long time ago <g>).  I found that PackBits compression reduced the TIFF files to one-third their original size, with no perceptible degradation in performance.  PackBits is, of course, a very simple algorithm so the reduced disk reading was a benefit and the decompression was trivial.  I then tried compression with LZW and found that these files were one-third smaller than PackBits (one-ninth the original size) but performance was distinctly slower.  That's because I needed to decompress the entire file up to a certain point in order to read that pixel.

But I then used LZW with a strip size of 1 row.  That meant that my files (roughly 6,000 x 7,000 pixels) were compressed as 7,000 independent 6,000-pixel data sets.  I could read any row by using the TIFF directory to seek right to it, then decompress the data.  I was surprised to find that this compression was nearly as fast as PackBits, but the files were only about 10% larger than the original LZW compression.  If LZW appears to be a suitable compression format for you, it is very worthwhile to experiment with different strip sizes to compare the tradeoff between performance and compression.

But.... now that I have a lot more disk space, I store all my TIFFs uncompressed.  That might change in the future (there have been other business reasons for storing the bulk of my data uncompressed).  Given your constraint on lossless compression, the very first thing you should do is see if PackBits or LZW actually compress your data, because if they don't your research is complete!

     - Ed

Ed McNierney
Chief Mapmaker
Demand Media / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA? 01863
ed@topozone.com
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Andreas Neumann
Sent: Tuesday, January 15, 2008 8:27 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] tiff format: compression vs. performance

Hello,

I am wondering whether there is a webpage with some tips/hints on what is
the best compression method within the tiff file format when performance
is also an issue. My data is primarily read only, but reading should be
fast. I heard that storing the tiff files as uncompressed is often still
the fastest. Is this still the case? Are there recommended compression
methods that are both fast (and allow random access to a big tiff file)
and also creates smaller file sizes? I am looking at lossless compression
methods, so jpeg is not an option.

Thanks for hints (or links to a webpage discussing this issue).

Andreas


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dron at ak4719.spb.edu  Tue Jan 15 10:48:36 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Jan 15 11:04:42 2008
Subject: [gdal-dev] tiff format: compression vs. performance
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC8019887D2@ptolemy.topozone.com>
References: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at>
	<4BF377919225F449BB097CB76FFE9BC8019887D2@ptolemy.topozone.com>
Message-ID: <20080115154835.GA13946@ak4719.spb.edu>

Ed,

On Tue, Jan 15, 2008 at 10:03:57AM -0500, Ed McNierney wrote:
> You also need to look at the properties of your data, especially if
> you're limiting yourself to uncompressed, PackBits, and LZW-compressed
> TIFFs.  Some data sets (aerial photography) are usually quite
> incompressible using those algorithms.  They're not going to get any
> smaller if you try to compress them, so there's no point in trying.

That depends on what you call a "compression". I think everything that
saves more than 10% of source file size is a good result for my needs.
And you can get such a ratio almost for every photography, just do not
forget to utilize data predictor. In most cases you will get better
ratios. And there is no reason to omit deflate compression. It has worse
performance than LZW, but better compression ratios.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From ed at topozone.com  Tue Jan 15 11:07:58 2008
From: ed at topozone.com (Ed McNierney)
Date: Tue Jan 15 11:08:00 2008
Subject: [gdal-dev] tiff format: compression vs. performance
In-Reply-To: <20080115154835.GA13946@ak4719.spb.edu>
References: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at><4BF377919225F449BB097CB76FFE9BC8019887D2@ptolemy.topozone.com>
	<20080115154835.GA13946@ak4719.spb.edu>
Message-ID: <4BF377919225F449BB097CB76FFE9BC8019887D3@ptolemy.topozone.com>

Andrey -

I think in my dictionary "quite incompressible" and "10% of source file
size" are the same thing <g>!

Thanks for that observation - it helps show why it's important not to
generalize too much; for some users a 10% savings is important, and for
others it's not worth the trouble.

	- Ed

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Andrey Kiselev
Sent: Tuesday, January 15, 2008 10:49 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] tiff format: compression vs. performance

Ed,

On Tue, Jan 15, 2008 at 10:03:57AM -0500, Ed McNierney wrote:
> You also need to look at the properties of your data, especially if
> you're limiting yourself to uncompressed, PackBits, and LZW-compressed
> TIFFs.  Some data sets (aerial photography) are usually quite
> incompressible using those algorithms.  They're not going to get any
> smaller if you try to compress them, so there's no point in trying.

That depends on what you call a "compression". I think everything that
saves more than 10% of source file size is a good result for my needs.
And you can get such a ratio almost for every photography, just do not
forget to utilize data predictor. In most cases you will get better
ratios. And there is no reason to omit deflate compression. It has worse
performance than LZW, but better compression ratios.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matt.wilkie at gov.yk.ca  Tue Jan 15 12:00:57 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Jan 15 12:01:04 2008
Subject: [gdal-dev] tiff format: compression vs. performance
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC8019887D2@ptolemy.topozone.com>
References: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at>
	<4BF377919225F449BB097CB76FFE9BC8019887D2@ptolemy.topozone.com>
Message-ID: <478CE6C9.7010803@gov.yk.ca>

Hi Ed,

Thank you for sharing the results of your experience with image 
compresssion and performance. We are all enriched because of it!

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From ed at topozone.com  Tue Jan 15 12:06:55 2008
From: ed at topozone.com (Ed McNierney)
Date: Tue Jan 15 12:06:57 2008
Subject: [gdal-dev] tiff format: compression vs. performance
In-Reply-To: <45681.193.246.86.39.1200416302.squirrel@webmail.customers.iirc.at>
References: <56944.193.246.86.39.1200403612.squirrel@webmail.customers.iirc.at>
	<4BF377919225F449BB097CB76FFE9BC8019887D2@ptolemy.topozone.com>
	<45681.193.246.86.39.1200416302.squirrel@webmail.customers.iirc.at>
Message-ID: <4BF377919225F449BB097CB76FFE9BC8019887D5@ptolemy.topozone.com>

Andreas -

I would, of course, advise against generalizations, but for aerial photos using tiled TIFFs with JPEG compression (in each tile) is worth investigating.  It can provide a good balance between compression and performance, since you get the benefits of JPEG compression but the tiling reduces the performance impact of extracting a small portion of the image.

     - Ed

-----Original Message-----
From: Andreas Neumann [mailto:a.neumann@carto.net] 
Sent: Tuesday, January 15, 2008 11:58 AM
To: Ed McNierney
Subject: RE: [gdal-dev] tiff format: compression vs. performance

Thank you Ed and others for sharing your experiences and the quite
comprehensive discussion of the subject.

In this particular case I am dealing with b/w maps, with bigger spots of
homogeneous white areas. I converted it to grayscale to get better quality
with using gdals' average resampling method.

I tested the filesizes uncompressed vs. packbits. Packbits is factor 6
smaller. Obviously, lzw and deflates are much smaller again, but if they
take longer/considerably more cpu to decompress, its probably not a good
option.

I will probably go with packbits.

What do you recommend for aerial images? Jpeg, or something else than tif?
ECW/MrSID is probably good, but dangerous, because of licenses. ECW now
owned by Leica, and Leica not exactly known as a pro OS company.

Andreas


> Andreas -
>
> This is a complex issue, with many different factors involved.  I think it
> is more important to understand the principles involved rather than look
> at specific performance numbers for a given data set.
>
> Compression essentially trades off disk read time for compute time.  For a
> compressed data set you spend less time reading from the disk (in theory)
> and more time decompressing the data.  If you don't manage to spend less
> time reading from the disk, then you're certainly going to have poorer
> performance than uncompressed data!
>
> Generally speaking, of course, your disk is slow and your CPU is fast, but
> there's a lot of variability in both of those measurements.  Some disks
> are pretty fast, and some CPUs, while fast, may be busy doing a lot of
> other things.  Your disk will also have a certain read resolution or
> granularity; reading 100 bytes from a disk is no faster than reading 200
> bytes, because your disk subsystem will read at least a whole sector when
> requested to do either.
>
> You also need to look at the properties of your data, especially if you're
> limiting yourself to uncompressed, PackBits, and LZW-compressed TIFFs.
> Some data sets (aerial photography) are usually quite incompressible using
> those algorithms.  They're not going to get any smaller if you try to
> compress them, so there's no point in trying.  Other data sets will
> perform much better.  You should test your data to first see which
> compression methods provide useful compression in your situation.
>
> LZW compression can be particularly tricky, since it builds a "dictionary"
> on the fly from the source data.  Normally this means that if you want to
> read only the lower-right pixel in a TIFF file you will need to read and
> decode the ENTIRE file, in order to reconstruct the dictionary to read
> that last pixel.  This does not have to be the case, however.  You can
> specify a STRIP size in your TIFF file; this will treat the file as a
> series of strips, each N rows high.  Reading a random location in the file
> will only require decoding the strip that contains that data.  You will
> not get quite as good compression, but you can get much faster LZW
> performance.
>
> Think carefully about what's involved in reading your data from the disk.
> If you're reading a small, vertical strip from the file your disk will
> need to read a few bytes from one line, then (possibly) seek to the next
> line, read a few bytes, etc.  If your file is particularly wide this can
> become a problem, since a disk SEEK is the slowest thing you can possibly
> do.  This is where TILED TIFFs will help you, as they will organize your
> data in tiles rather than strips.  Think about what tiling is doing for
> you - it is reducing the need to seek across the width of the file to move
> vertically in the image.  Your tile size needs to be substantially smaller
> than the width of your TIFF in order to produce a noticeable improvement.
> Again, the penalty you pay for seeking through the file depends very
> heavily on your particular disk subsystem, and you may or may not see much
> improvement from tiling.
>
> I will give one example that showed quite different results from the one
> Christopher posted, simply to illustrate the variability.  This was a very
> old experiment and I don't have specific measurements available.  I was
> trying to compress scanned USGS topographic maps (DRGs), which are
> essentially line art scanned as TIFFs.  These images actually DO compress
> very well with Packbits or LZW, because they aren't photos and contain
> long stretches of identical pixels or repeated patterns.
>
> There was no performance problem with the uncompressed TIFFs, but I needed
> more disk space (this was a long time ago <g>).  I found that PackBits
> compression reduced the TIFF files to one-third their original size, with
> no perceptible degradation in performance.  PackBits is, of course, a very
> simple algorithm so the reduced disk reading was a benefit and the
> decompression was trivial.  I then tried compression with LZW and found
> that these files were one-third smaller than PackBits (one-ninth the
> original size) but performance was distinctly slower.  That's because I
> needed to decompress the entire file up to a certain point in order to
> read that pixel.
>
> But I then used LZW with a strip size of 1 row.  That meant that my files
> (roughly 6,000 x 7,000 pixels) were compressed as 7,000 independent
> 6,000-pixel data sets.  I could read any row by using the TIFF directory
> to seek right to it, then decompress the data.  I was surprised to find
> that this compression was nearly as fast as PackBits, but the files were
> only about 10% larger than the original LZW compression.  If LZW appears
> to be a suitable compression format for you, it is very worthwhile to
> experiment with different strip sizes to compare the tradeoff between
> performance and compression.
>
> But.... now that I have a lot more disk space, I store all my TIFFs
> uncompressed.  That might change in the future (there have been other
> business reasons for storing the bulk of my data uncompressed).  Given
> your constraint on lossless compression, the very first thing you should
> do is see if PackBits or LZW actually compress your data, because if they
> don't your research is complete!
>
>      - Ed
>
> Ed McNierney
> Chief Mapmaker
> Demand Media / TopoZone.com
> 73 Princeton Street, Suite 305
> North Chelmsford, MA? 01863
> ed@topozone.com
> Phone: +1 (978) 251-4242
> Fax: +1 (978) 251-1396
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Andreas Neumann
> Sent: Tuesday, January 15, 2008 8:27 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] tiff format: compression vs. performance
>
> Hello,
>
> I am wondering whether there is a webpage with some tips/hints on what is
> the best compression method within the tiff file format when performance
> is also an issue. My data is primarily read only, but reading should be
> fast. I heard that storing the tiff files as uncompressed is often still
> the fastest. Is this still the case? Are there recommended compression
> methods that are both fast (and allow random access to a big tiff file)
> and also creates smaller file sizes? I am looking at lossless compression
> methods, so jpeg is not an option.
>
> Thanks for hints (or links to a webpage discussing this issue).
>
> Andreas
>
>
> --
> Andreas Neumann
> B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
> Email: a.neumann@carto.net, Web:
> * http://www.carto.net/ (Carto and SVG resources)
> * http://www.carto.net/neumann/ (personal page)
> * http://www.svgopen.org/ (SVG Open Conference)
> * http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From pal.kristensen at statkart.no  Wed Jan 16 03:12:16 2008
From: pal.kristensen at statkart.no (=?UTF-8?Q?P=C3=A5l_Kristensen?=)
Date: Wed Jan 16 03:12:18 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
Message-ID: <14873585.post@talk.nabble.com>


Hi!

I'm trying to convert some data (approx 10GB) from SDE to PostgreSQL/PostGIS
using ogr2ogr. Due to the large amount of data it's not practical to use
shapefiles as intermediate storage. The problem is that I can't find any
GDAL/OGR windows binaries with both SDE support and PostgreSQL support.

The windows binaries which you can download form
http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by using the
plugins available at the same link. However these win binaries does, for
some reason, not support PostgreSQL.

I then tried to use the latest FWtools (2.0.4) that has PostgreSQL support,
but I cant find any SDE plugins that works with newer FWtools than version
1.3.9.

So basically FWtools works with PostgreSQL and the win32 binaries from the
GDAL web site works with SDE.

Is there any win32 compilation of the latest gdal 1.5.0 that has both
PostgreSQL and SDE 9.x support??

Regards,
P?l Kristensen
-- 
View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From cavicchi at ferrara.linux.it  Wed Jan 16 10:17:31 2008
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Jan 16 10:17:39 2008
Subject: [gdal-dev] GCPs in GeoTiff
Message-ID: <478E200B.7080806@ferrara.linux.it>

Hi folk,
I have a simple question: exist a max number of GCPS for GeoTiff format?

Because I must to set a big number of GPS but when I look into GeoTiff 
that i made, I read only 6880 GCPs.

Tnx, regards.

-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]
From hobu.inc at gmail.com  Wed Jan 16 11:23:49 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Jan 16 11:25:51 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
In-Reply-To: <14873585.post@talk.nabble.com>
References: <14873585.post@talk.nabble.com>
Message-ID: <57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>

I have placed a PostGIS plugin on the download page.  Please confirm  
that it works for you...

http://download.osgeo.org/gdal/win32/1.5/

Howard

On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:

>
> Hi!
>
> I'm trying to convert some data (approx 10GB) from SDE to PostgreSQL/ 
> PostGIS
> using ogr2ogr. Due to the large amount of data it's not practical to  
> use
> shapefiles as intermediate storage. The problem is that I can't find  
> any
> GDAL/OGR windows binaries with both SDE support and PostgreSQL  
> support.
>
> The windows binaries which you can download form
> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by  
> using the
> plugins available at the same link. However these win binaries does,  
> for
> some reason, not support PostgreSQL.
>
> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL  
> support,
> but I cant find any SDE plugins that works with newer FWtools than  
> version
> 1.3.9.
>
> So basically FWtools works with PostgreSQL and the win32 binaries  
> from the
> GDAL web site works with SDE.
>
> Is there any win32 compilation of the latest gdal 1.5.0 that has both
> PostgreSQL and SDE 9.x support??
>
> Regards,
> P?l Kristensen
> -- 
> View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From abhay.menon at gmail.com  Wed Jan 16 14:41:48 2008
From: abhay.menon at gmail.com (abhay menon)
Date: Wed Jan 16 14:41:51 2008
Subject: [gdal-dev] GeoTiff writing with Java Bindings (signed
	data types)
In-Reply-To: <25bc040b0801140908w58af94dcn54fd3875f3dc0991@mail.gmail.com>
References: <20080114152643.194840@gmx.net>
	<25bc040b0801140908w58af94dcn54fd3875f3dc0991@mail.gmail.com>
Message-ID: <7a30cd70801161141n6a2c50e8l6d0ffa48d5bf8bc6@mail.gmail.com>

Hi,

Pardon me for the intrusion in this post related to Geotiff with GDAL(Java
bind).

I was wondering the list discussion was oriented towards the implementation
and the bind of the GDAL half of the GDAL/OGR bind has anyone implemented or
used the OGR half of the bind as well.

I tried a small test with Java OGR bind as follows, (I tried to hack the
GdalTest.java for this ):
OgrTest.java
-----------------------------------------------------------------------------------------
import org.gdal.ogr.Driver;
import org.gdal.ogr.ogr;

public class OgrTest
{
    public OgrTest() {

    }
    public static void main(String[] args) {
        System.out.println("OGR init...");
        ogr.RegisterAll();
        int count = ogr.GetDriverCount();

        System.out.println(count + " available Drivers");
        for (int i = 0; i < count; i++) {
            try {
                Driver driver = ogr.GetDriver(i);
                System.out.println(" " + driver.GetName() + " ");
            } catch (Exception e) {
                System.err.println("Error loading driver " + i);
            }
        }
    }
}

------------------------------------------------------------------------------------------

Is there any documentation or sample that exists for the same which is
advance enough to create complex application.

Rgds

Abhay.

On Jan 14, 2008 10:38 PM, Stefan Keller <sfkeller@gmail.com> wrote:

> Obviously, there seems to be quite some interest in a Java binding to
> GDAL/OGR.
> Can someone summarize and perhaps update the wiki/documentation with
> instructions and example downloads?
> Any volunteers to become a committer for this Java Binding?
>
> -- Stefan
>
> 2008/1/14, Stefan Mietke <St.Mietke@gmx.de>:
>
> > Thats it! It works, wow ...
> >
> > For interested list members:
> >
> > The solution of this problem is simple:
> >
> > After allocating a ByteBuffer, you have to set the Byte order, before
> > reading the raster with 'ReadRaster_Direct()' method.
> >
> > ByteBuffer byteBuffer = ByteBuffer.allocateDirect(buffer_size);
> > byteBuffer.order (ByteOrder.nativeOrder());
> >
> > For the writing process you have to do the same with the output
> > ByteBuffer.
> >
> > I thank Daniele Romagnoli and Benjamin Collins for their great support.
> >
> > Stefan Mietke
> > --
> > Institute for Cartography
> > TU Dresden
> >
> > Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
> > Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger?did=10
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080117/5a18fe7e/attachment.html
From sfkeller at gmail.com  Wed Jan 16 19:52:41 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed Jan 16 19:52:43 2008
Subject: [gdal-dev] myshape.prj versus -s_srs
Message-ID: <25bc040b0801161652u6c42a762xad1af5fc0d3753ce@mail.gmail.com>

I'm trying to a shapefile to KML. The Shapefile driver indicates that "If a
.prj files (...) is present, it will be read and used to associate a
projection with features.". In addition, the OGR KML driver documentation
says "All OGR KML output will be presented in EPSG:4326.".

Let's say the input files are myshape.shp, myshape.shx, myshape.dbf and
myshape.prj and I try "ogr2ogr -f kml out.kml myshape.shp".
then the resulting coordinates are still in the source coordinate system:
Why? I espected that theya re transformed to WGS84 according to the
documentation mentioned.

This is what finally worked: "ogr2ogr -f kml del_prairie.kml del_prairie.shp
-s_srs EPSG:21781 -t_srs EPSG:4326". But indicating "-s_srs EPSG:21781"
seems to me redundant to the existing file myshape.prj. Any explanations?

-- Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080117/d2c671de/attachment.html
From warmerdam at pobox.com  Wed Jan 16 22:09:39 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 16 22:09:25 2008
Subject: [gdal-dev] myshape.prj versus -s_srs
In-Reply-To: <25bc040b0801161652u6c42a762xad1af5fc0d3753ce@mail.gmail.com>
References: <25bc040b0801161652u6c42a762xad1af5fc0d3753ce@mail.gmail.com>
Message-ID: <478EC6F3.70001@pobox.com>

Stefan Keller wrote:
> I'm trying to a shapefile to KML. The Shapefile driver indicates that 
> "If a .prj files (...) is present, it will be read and used to associate 
> a projection with features.". In addition, the OGR KML driver 
> documentation says "All OGR KML output will be presented in EPSG:4326.".
>  
> Let's say the input files are myshape.shp, myshape.shx, myshape.dbf and 
> myshape.prj and I try "ogr2ogr -f kml out.kml myshape.shp".
> then the resulting coordinates are still in the source coordinate 
> system: Why? I espected that theya re transformed to WGS84 according to 
> the documentation mentioned.
>  
> This is what finally worked: "ogr2ogr -f kml del_prairie.kml 
> del_prairie.shp -s_srs EPSG:21781 -t_srs EPSG:4326". But indicating 
> "-s_srs EPSG:21781" seems to me redundant to the existing file 
> myshape.prj . Any explanations?

Stefan,

ogr2ogr does not reproject coordinates by default, even when writing
to formats like KML that only really support one output coordinate system
properly.  The -t_srs is the correct way to request reprojection.

The -s_srs EPSG:21781 option should be unnecessary if the source shapefile
already has a readable .prj file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From chowell at pyxisinnovation.com  Wed Jan 16 22:45:31 2008
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Wed Jan 16 22:45:34 2008
Subject: [gdal-dev] Urgent clarification needed. 
Message-ID: <478ECF5B.3000603@pyxisinnovation.com>

We're having some difficulty opening a client's database file via the 
ordinary OGR reader, therefore I was reading the documentation found at. 
http://www.gdal.org/ogr/drv_odbc.html in reference to using the ODBC, 
the documentation states that this is potentially available in both 
unix/windows builds. However only available in unix by special 
compilation options. My question is, is this driver available in windows 
without the need for any special compiliation options or do I have to do 
something special to get it ?

Cheers
Chris
From mchapman at texelinc.com  Wed Jan 16 23:19:45 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed Jan 16 23:19:53 2008
Subject: [gdal-dev] Urgent clarification needed. 
In-Reply-To: <478ECF5B.3000603@pyxisinnovation.com>
References: <478ECF5B.3000603@pyxisinnovation.com>
Message-ID: <001401c858c0$3141f370$93c5da50$@com>

Chris,

If you go to the /bin directory of your gdal installation you will find a
program called ogrinfo.exe (if you did the install process after compiling).
Run "ogrinfo --formats" from the command line in that directory and it will
dump the format list of available drivers.  I think ODBC is compiled in by
default. You could check http://www.gdal.org/ogr/drv_odbc.html , I think it
hints that is available on Windows.  Ogrinfo will tell the truth though. :)

Best regards, 

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Chris Howell
Sent: Wednesday, January 16, 2008 8:46 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Urgent clarification needed. 

We're having some difficulty opening a client's database file via the 
ordinary OGR reader, therefore I was reading the documentation found at. 
http://www.gdal.org/ogr/drv_odbc.html in reference to using the ODBC, 
the documentation states that this is potentially available in both 
unix/windows builds. However only available in unix by special 
compilation options. My question is, is this driver available in windows 
without the need for any special compiliation options or do I have to do 
something special to get it ?

Cheers
Chris
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From bfraser at geoanalytic.com  Wed Jan 16 23:50:09 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Jan 16 23:51:04 2008
Subject: [gdal-dev] Urgent clarification needed.
In-Reply-To: <478ECF5B.3000603@pyxisinnovation.com>
References: <478ECF5B.3000603@pyxisinnovation.com>
Message-ID: <.68.144.5.189.1200545409.squirrel@68.144.5.189>

Chris,
 There's a ODBC setting in GDAL's nmake.opt file:

# Comment out the following to disable ODBC support.
ODBC_SUPPORTED = 1


So by default it is supported...

Brent Fraser

> We're having some difficulty opening a client's database file via the
> ordinary OGR reader, therefore I was reading the documentation found at.
> http://www.gdal.org/ogr/drv_odbc.html in reference to using the ODBC,
> the documentation states that this is potentially available in both
> unix/windows builds. However only available in unix by special
> compilation options. My question is, is this driver available in windows
> without the need for any special compiliation options or do I have to do
> something special to get it ?
>
> Cheers
> Chris
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From pal.kristensen at statkart.no  Thu Jan 17 03:28:57 2008
From: pal.kristensen at statkart.no (=?UTF-8?Q?P=C3=A5l_Kristensen?=)
Date: Thu Jan 17 03:28:59 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
In-Reply-To: <57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>
References: <14873585.post@talk.nabble.com>
	<57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>
Message-ID: <14914348.post@talk.nabble.com>


Hi!

Thanks for the help! Unfortunately there seems to be something wrong. I got
the attached error message when executing the following command:

SET PG_USE_COPY=YES
ogr2ogr -nlt LINESTRING -nln n50_bilveg -lco GEOMETRY_NAME=the_geom -a_srs
EPSG:32633 -f PostgreSQL PG:"dbname=kartdata user=xxx host=xx.xx.xx.xx"
SDE:xx.xx.xx.xx,5157,,n50,n50,n50.bilveg

http://www.nabble.com/file/p14914348/ogr2ogr_error.png 

Do you know what is causing this?

Ogrinfo --formats however shows both SDE and PostgreSQL support.


Regards
P?l Kristensen



Howard Butler-3 wrote:
> 
> I have placed a PostGIS plugin on the download page.  Please confirm  
> that it works for you...
> 
> http://download.osgeo.org/gdal/win32/1.5/
> 
> Howard
> 
> On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:
> 
>>
>> Hi!
>>
>> I'm trying to convert some data (approx 10GB) from SDE to PostgreSQL/ 
>> PostGIS
>> using ogr2ogr. Due to the large amount of data it's not practical to  
>> use
>> shapefiles as intermediate storage. The problem is that I can't find  
>> any
>> GDAL/OGR windows binaries with both SDE support and PostgreSQL  
>> support.
>>
>> The windows binaries which you can download form
>> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by  
>> using the
>> plugins available at the same link. However these win binaries does,  
>> for
>> some reason, not support PostgreSQL.
>>
>> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL  
>> support,
>> but I cant find any SDE plugins that works with newer FWtools than  
>> version
>> 1.3.9.
>>
>> So basically FWtools works with PostgreSQL and the win32 binaries  
>> from the
>> GDAL web site works with SDE.
>>
>> Is there any win32 compilation of the latest gdal 1.5.0 that has both
>> PostgreSQL and SDE 9.x support??
>>
>> Regards,
>> P?l Kristensen
>> -- 
>> View this message in context:
>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914348.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mchapman at texelinc.com  Thu Jan 17 03:55:36 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Thu Jan 17 03:55:45 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
In-Reply-To: <14914348.post@talk.nabble.com>
References: <14873585.post@talk.nabble.com>	<57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>
	<14914348.post@talk.nabble.com>
Message-ID: <002701c858e6$ba590e20$2f0b2a60$@com>

P?l,

One thing to try is that SDE only likes UNC names, not IP addresses from my experience.

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P?l Kristensen
Sent: Thursday, January 17, 2008 1:29 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [Gdal-dev] SDE to PostgreSQL/PostGIS


Hi!

Thanks for the help! Unfortunately there seems to be something wrong. I got
the attached error message when executing the following command:

SET PG_USE_COPY=YES
ogr2ogr -nlt LINESTRING -nln n50_bilveg -lco GEOMETRY_NAME=the_geom -a_srs
EPSG:32633 -f PostgreSQL PG:"dbname=kartdata user=xxx host=xx.xx.xx.xx"
SDE:xx.xx.xx.xx,5157,,n50,n50,n50.bilveg

http://www.nabble.com/file/p14914348/ogr2ogr_error.png 

Do you know what is causing this?

Ogrinfo --formats however shows both SDE and PostgreSQL support.


Regards
P?l Kristensen



Howard Butler-3 wrote:
> 
> I have placed a PostGIS plugin on the download page.  Please confirm  
> that it works for you...
> 
> http://download.osgeo.org/gdal/win32/1.5/
> 
> Howard
> 
> On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:
> 
>>
>> Hi!
>>
>> I'm trying to convert some data (approx 10GB) from SDE to PostgreSQL/ 
>> PostGIS
>> using ogr2ogr. Due to the large amount of data it's not practical to  
>> use
>> shapefiles as intermediate storage. The problem is that I can't find  
>> any
>> GDAL/OGR windows binaries with both SDE support and PostgreSQL  
>> support.
>>
>> The windows binaries which you can download form
>> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by  
>> using the
>> plugins available at the same link. However these win binaries does,  
>> for
>> some reason, not support PostgreSQL.
>>
>> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL  
>> support,
>> but I cant find any SDE plugins that works with newer FWtools than  
>> version
>> 1.3.9.
>>
>> So basically FWtools works with PostgreSQL and the win32 binaries  
>> from the
>> GDAL web site works with SDE.
>>
>> Is there any win32 compilation of the latest gdal 1.5.0 that has both
>> PostgreSQL and SDE 9.x support??
>>
>> Regards,
>> P?l Kristensen
>> -- 
>> View this message in context:
>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914348.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mchapman at texelinc.com  Thu Jan 17 03:57:06 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Thu Jan 17 03:57:14 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
In-Reply-To: <14914348.post@talk.nabble.com>
References: <14873585.post@talk.nabble.com>	<57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>
	<14914348.post@talk.nabble.com>
Message-ID: <002801c858e6$efb41ce0$cf1c56a0$@com>

Whoops, from the image looks like your application or the plugin is compiled with the debug version and it doesn't like the different heap space.

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P?l Kristensen
Sent: Thursday, January 17, 2008 1:29 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [Gdal-dev] SDE to PostgreSQL/PostGIS


Hi!

Thanks for the help! Unfortunately there seems to be something wrong. I got
the attached error message when executing the following command:

SET PG_USE_COPY=YES
ogr2ogr -nlt LINESTRING -nln n50_bilveg -lco GEOMETRY_NAME=the_geom -a_srs
EPSG:32633 -f PostgreSQL PG:"dbname=kartdata user=xxx host=xx.xx.xx.xx"
SDE:xx.xx.xx.xx,5157,,n50,n50,n50.bilveg

http://www.nabble.com/file/p14914348/ogr2ogr_error.png 

Do you know what is causing this?

Ogrinfo --formats however shows both SDE and PostgreSQL support.


Regards
P?l Kristensen



Howard Butler-3 wrote:
> 
> I have placed a PostGIS plugin on the download page.  Please confirm  
> that it works for you...
> 
> http://download.osgeo.org/gdal/win32/1.5/
> 
> Howard
> 
> On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:
> 
>>
>> Hi!
>>
>> I'm trying to convert some data (approx 10GB) from SDE to PostgreSQL/ 
>> PostGIS
>> using ogr2ogr. Due to the large amount of data it's not practical to  
>> use
>> shapefiles as intermediate storage. The problem is that I can't find  
>> any
>> GDAL/OGR windows binaries with both SDE support and PostgreSQL  
>> support.
>>
>> The windows binaries which you can download form
>> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by  
>> using the
>> plugins available at the same link. However these win binaries does,  
>> for
>> some reason, not support PostgreSQL.
>>
>> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL  
>> support,
>> but I cant find any SDE plugins that works with newer FWtools than  
>> version
>> 1.3.9.
>>
>> So basically FWtools works with PostgreSQL and the win32 binaries  
>> from the
>> GDAL web site works with SDE.
>>
>> Is there any win32 compilation of the latest gdal 1.5.0 that has both
>> PostgreSQL and SDE 9.x support??
>>
>> Regards,
>> P?l Kristensen
>> -- 
>> View this message in context:
>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914348.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From pal.kristensen at statkart.no  Thu Jan 17 04:06:04 2008
From: pal.kristensen at statkart.no (=?UTF-8?Q?P=C3=A5l_Kristensen?=)
Date: Thu Jan 17 04:06:05 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
In-Reply-To: <002801c858e6$efb41ce0$cf1c56a0$@com>
References: <14873585.post@talk.nabble.com>
	<57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>
	<14914348.post@talk.nabble.com>
	<002801c858e6$efb41ce0$cf1c56a0$@com>
Message-ID: <14914870.post@talk.nabble.com>


Hi!

Thanks! I assumed that it was something like that. The SDE plugin seems to
work correctly, but the problem is the PostgreSQL plugin that Howard Butler
compiled for me yesterday.

So, the solution would be to recompile the PostgreSQL plugin without debug
support?

Regards,
P?l Kristensen



mchapman wrote:
> 
> Whoops, from the image looks like your application or the plugin is
> compiled with the debug version and it doesn't like the different heap
> space.
> 
> Martin Chapman
> Chief Software Architect
> Fortified Datacom Inc.
> http://www.fortifieddatacom.com
> mchapman@fortifieddatacom.com
> 303-324-1065
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P?l Kristensen
> Sent: Thursday, January 17, 2008 1:29 AM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [Gdal-dev] SDE to PostgreSQL/PostGIS
> 
> 
> Hi!
> 
> Thanks for the help! Unfortunately there seems to be something wrong. I
> got
> the attached error message when executing the following command:
> 
> SET PG_USE_COPY=YES
> ogr2ogr -nlt LINESTRING -nln n50_bilveg -lco GEOMETRY_NAME=the_geom -a_srs
> EPSG:32633 -f PostgreSQL PG:"dbname=kartdata user=xxx host=xx.xx.xx.xx"
> SDE:xx.xx.xx.xx,5157,,n50,n50,n50.bilveg
> 
> http://www.nabble.com/file/p14914348/ogr2ogr_error.png 
> 
> Do you know what is causing this?
> 
> Ogrinfo --formats however shows both SDE and PostgreSQL support.
> 
> 
> Regards
> P?l Kristensen
> 
> 
> 
> Howard Butler-3 wrote:
>> 
>> I have placed a PostGIS plugin on the download page.  Please confirm  
>> that it works for you...
>> 
>> http://download.osgeo.org/gdal/win32/1.5/
>> 
>> Howard
>> 
>> On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:
>> 
>>>
>>> Hi!
>>>
>>> I'm trying to convert some data (approx 10GB) from SDE to PostgreSQL/ 
>>> PostGIS
>>> using ogr2ogr. Due to the large amount of data it's not practical to  
>>> use
>>> shapefiles as intermediate storage. The problem is that I can't find  
>>> any
>>> GDAL/OGR windows binaries with both SDE support and PostgreSQL  
>>> support.
>>>
>>> The windows binaries which you can download form
>>> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by  
>>> using the
>>> plugins available at the same link. However these win binaries does,  
>>> for
>>> some reason, not support PostgreSQL.
>>>
>>> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL  
>>> support,
>>> but I cant find any SDE plugins that works with newer FWtools than  
>>> version
>>> 1.3.9.
>>>
>>> So basically FWtools works with PostgreSQL and the win32 binaries  
>>> from the
>>> GDAL web site works with SDE.
>>>
>>> Is there any win32 compilation of the latest gdal 1.5.0 that has both
>>> PostgreSQL and SDE 9.x support??
>>>
>>> Regards,
>>> P?l Kristensen
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914348.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914870.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mchapman at texelinc.com  Thu Jan 17 04:34:39 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Thu Jan 17 04:34:48 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
In-Reply-To: <14914870.post@talk.nabble.com>
References: <14873585.post@talk.nabble.com>	<57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>	<14914348.post@talk.nabble.com>	<002801c858e6$efb41ce0$cf1c56a0$@com>
	<14914870.post@talk.nabble.com>
Message-ID: <002901c858ec$2ecf68d0$8c6e3a70$@com>

Correct.

Martin Chapman
Chief Software Architect
Fortified Datacom Inc.
http://www.fortifieddatacom.com
mchapman@fortifieddatacom.com
303-324-1065


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P?l Kristensen
Sent: Thursday, January 17, 2008 2:06 AM
To: gdal-dev@lists.osgeo.org
Subject: RE: [Gdal-dev] SDE to PostgreSQL/PostGIS


Hi!

Thanks! I assumed that it was something like that. The SDE plugin seems to
work correctly, but the problem is the PostgreSQL plugin that Howard Butler
compiled for me yesterday.

So, the solution would be to recompile the PostgreSQL plugin without debug
support?

Regards,
P?l Kristensen



mchapman wrote:
> 
> Whoops, from the image looks like your application or the plugin is
> compiled with the debug version and it doesn't like the different heap
> space.
> 
> Martin Chapman
> Chief Software Architect
> Fortified Datacom Inc.
> http://www.fortifieddatacom.com
> mchapman@fortifieddatacom.com
> 303-324-1065
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P?l Kristensen
> Sent: Thursday, January 17, 2008 1:29 AM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [Gdal-dev] SDE to PostgreSQL/PostGIS
> 
> 
> Hi!
> 
> Thanks for the help! Unfortunately there seems to be something wrong. I
> got
> the attached error message when executing the following command:
> 
> SET PG_USE_COPY=YES
> ogr2ogr -nlt LINESTRING -nln n50_bilveg -lco GEOMETRY_NAME=the_geom -a_srs
> EPSG:32633 -f PostgreSQL PG:"dbname=kartdata user=xxx host=xx.xx.xx.xx"
> SDE:xx.xx.xx.xx,5157,,n50,n50,n50.bilveg
> 
> http://www.nabble.com/file/p14914348/ogr2ogr_error.png 
> 
> Do you know what is causing this?
> 
> Ogrinfo --formats however shows both SDE and PostgreSQL support.
> 
> 
> Regards
> P?l Kristensen
> 
> 
> 
> Howard Butler-3 wrote:
>> 
>> I have placed a PostGIS plugin on the download page.  Please confirm  
>> that it works for you...
>> 
>> http://download.osgeo.org/gdal/win32/1.5/
>> 
>> Howard
>> 
>> On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:
>> 
>>>
>>> Hi!
>>>
>>> I'm trying to convert some data (approx 10GB) from SDE to PostgreSQL/ 
>>> PostGIS
>>> using ogr2ogr. Due to the large amount of data it's not practical to  
>>> use
>>> shapefiles as intermediate storage. The problem is that I can't find  
>>> any
>>> GDAL/OGR windows binaries with both SDE support and PostgreSQL  
>>> support.
>>>
>>> The windows binaries which you can download form
>>> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by  
>>> using the
>>> plugins available at the same link. However these win binaries does,  
>>> for
>>> some reason, not support PostgreSQL.
>>>
>>> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL  
>>> support,
>>> but I cant find any SDE plugins that works with newer FWtools than  
>>> version
>>> 1.3.9.
>>>
>>> So basically FWtools works with PostgreSQL and the win32 binaries  
>>> from the
>>> GDAL web site works with SDE.
>>>
>>> Is there any win32 compilation of the latest gdal 1.5.0 that has both
>>> PostgreSQL and SDE 9.x support??
>>>
>>> Regards,
>>> P?l Kristensen
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914348.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914870.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From cheynm at yahoo.com  Thu Jan 17 10:14:23 2008
From: cheynm at yahoo.com (Mark Cheyne)
Date: Thu Jan 17 10:14:26 2008
Subject: [gdal-dev] C# OGRSpatialReference class -SetLinearUnits or
	SetLinearUnitsAndUpdateParameters()?
Message-ID: <439725.37552.qm@web32903.mail.mud.yahoo.com>

The class documentation for the OGRSpatialReference
class
(http://www.gdal.org/ogr/classOGRSpatialReference.html)
describes two methods to set the linear units of a
projected coordinate system:

* SetLinearUnits() -
http://www.gdal.org/ogr/classOGRSpatialReference.html#2016fee7b234666c5e94d528661e6729


* SetLinearUnitsAndUpdateParameters() -
http://www.gdal.org/ogr/classOGRSpatialReference.html#daab3d6e836f93974022bd78e221c4b4


Using C# with the binaries/wrappers that come with
FWTools 2.0.3, the second method does not appear on
this class. 

* Is its absence intentional or accidental? 
* When is it appropriate to use one or the other? 

I am having trouble creating a correct NAD83HARN UTM
zone 15N PCS in units of feet. 

Look at the code below, and the Proj4 and WKT it
produces. I think the false easting is getting wonked
- note the Proj4 says it is 152,400.3 feet, but the
WKT says it is 500,000 meters. Seems like a meters
conversion is getting misapplied? Or am I using the
class incorrectly? 

OSGeo.OSR.SpatialReference sr = new
SpatialReference(""); 
sr.SetProjCS("NAD83(HARN) / UTM zone 15N"); 
sr.SetWellKnownGeogCS("EPSG:4152"); 
sr.SetUTM(15, 1); 
sr.SetLinearUnits(Constants.SRS_UL_US_FOOT,
Constants.SRS_UL_US_FOOT_CONV); 

The Proj.4 params I get: 

+proj=tmerc +lat_0=0 +lon_0=-93 +k=0.9996
+x_0=152400.3 +y_0=0 +ellps=GRS80 +units=us-ft
+no_defs 



The WKT I get: 

PROJCS["NAD83(HARN) / UTM zone 15N", 
    GEOGCS["NAD83(HARN)", 
        DATUM["NAD83_High_Accuracy_Regional_Network", 
            SPHEROID["GRS 1980",6378137,298.257222101,

                AUTHORITY["EPSG","7019"]], 
            AUTHORITY["EPSG","6152"]], 
        PRIMEM["Greenwich",0, 
            AUTHORITY["EPSG","8901"]], 
        UNIT["degree",0.01745329251994328, 
            AUTHORITY["EPSG","9122"]], 
        AUTHORITY["EPSG","4152"]], 
    PROJECTION["Transverse_Mercator"], 
    PARAMETER["latitude_of_origin",0], 
    PARAMETER["central_meridian",-93], 
    PARAMETER["scale_factor",0.9996], 
    PARAMETER["false_easting",500000], 
    PARAMETER["false_northing",0], 
    UNIT["U.S. Foot",0.3048006]] 



Mark Cheyne
(608) 332-2235 (cell)


      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 

From hobu.inc at gmail.com  Thu Jan 17 10:17:29 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Jan 17 10:19:40 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
In-Reply-To: <002901c858ec$2ecf68d0$8c6e3a70$@com>
References: <14873585.post@talk.nabble.com>	<57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>	<14914348.post@talk.nabble.com>	<002801c858e6$efb41ce0$cf1c56a0$@com>
	<14914870.post@talk.nabble.com>
	<002901c858ec$2ecf68d0$8c6e3a70$@com>
Message-ID: <95F5D84B-4644-4D34-8913-F5445D5F435A@gmail.com>

Oops.  Can you try the new version that is available from the download  
site?

Howard

On Jan 17, 2008, at 3:34 AM, Martin Chapman wrote:

> Correct.
>
> Martin Chapman
> Chief Software Architect
> Fortified Datacom Inc.
> http://www.fortifieddatacom.com
> mchapman@fortifieddatacom.com
> 303-324-1065
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org 
> ] On Behalf Of P?l Kristensen
> Sent: Thursday, January 17, 2008 2:06 AM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [Gdal-dev] SDE to PostgreSQL/PostGIS
>
>
> Hi!
>
> Thanks! I assumed that it was something like that. The SDE plugin  
> seems to
> work correctly, but the problem is the PostgreSQL plugin that Howard  
> Butler
> compiled for me yesterday.
>
> So, the solution would be to recompile the PostgreSQL plugin without  
> debug
> support?
>
> Regards,
> P?l Kristensen
>
>
>
> mchapman wrote:
>>
>> Whoops, from the image looks like your application or the plugin is
>> compiled with the debug version and it doesn't like the different  
>> heap
>> space.
>>
>> Martin Chapman
>> Chief Software Architect
>> Fortified Datacom Inc.
>> http://www.fortifieddatacom.com
>> mchapman@fortifieddatacom.com
>> 303-324-1065
>>
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P?l Kristensen
>> Sent: Thursday, January 17, 2008 1:29 AM
>> To: gdal-dev@lists.osgeo.org
>> Subject: Re: [Gdal-dev] SDE to PostgreSQL/PostGIS
>>
>>
>> Hi!
>>
>> Thanks for the help! Unfortunately there seems to be something  
>> wrong. I
>> got
>> the attached error message when executing the following command:
>>
>> SET PG_USE_COPY=YES
>> ogr2ogr -nlt LINESTRING -nln n50_bilveg -lco GEOMETRY_NAME=the_geom  
>> -a_srs
>> EPSG:32633 -f PostgreSQL PG:"dbname=kartdata user=xxx  
>> host=xx.xx.xx.xx"
>> SDE:xx.xx.xx.xx,5157,,n50,n50,n50.bilveg
>>
>> http://www.nabble.com/file/p14914348/ogr2ogr_error.png
>>
>> Do you know what is causing this?
>>
>> Ogrinfo --formats however shows both SDE and PostgreSQL support.
>>
>>
>> Regards
>> P?l Kristensen
>>
>>
>>
>> Howard Butler-3 wrote:
>>>
>>> I have placed a PostGIS plugin on the download page.  Please confirm
>>> that it works for you...
>>>
>>> http://download.osgeo.org/gdal/win32/1.5/
>>>
>>> Howard
>>>
>>> On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:
>>>
>>>>
>>>> Hi!
>>>>
>>>> I'm trying to convert some data (approx 10GB) from SDE to  
>>>> PostgreSQL/
>>>> PostGIS
>>>> using ogr2ogr. Due to the large amount of data it's not practical  
>>>> to
>>>> use
>>>> shapefiles as intermediate storage. The problem is that I can't  
>>>> find
>>>> any
>>>> GDAL/OGR windows binaries with both SDE support and PostgreSQL
>>>> support.
>>>>
>>>> The windows binaries which you can download form
>>>> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by
>>>> using the
>>>> plugins available at the same link. However these win binaries  
>>>> does,
>>>> for
>>>> some reason, not support PostgreSQL.
>>>>
>>>> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL
>>>> support,
>>>> but I cant find any SDE plugins that works with newer FWtools than
>>>> version
>>>> 1.3.9.
>>>>
>>>> So basically FWtools works with PostgreSQL and the win32 binaries
>>>> from the
>>>> GDAL web site works with SDE.
>>>>
>>>> Is there any win32 compilation of the latest gdal 1.5.0 that has  
>>>> both
>>>> PostgreSQL and SDE 9.x support??
>>>>
>>>> Regards,
>>>> P?l Kristensen
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
>>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914348.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914870.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From pal.kristensen at statkart.no  Thu Jan 17 10:41:06 2008
From: pal.kristensen at statkart.no (=?UTF-8?Q?P=C3=A5l_Kristensen?=)
Date: Thu Jan 17 10:41:08 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
In-Reply-To: <95F5D84B-4644-4D34-8913-F5445D5F435A@gmail.com>
References: <14873585.post@talk.nabble.com>
	<57ACC178-B04B-4FA4-8D5C-F0F8E1D40951@gmail.com>
	<14914348.post@talk.nabble.com>
	<002801c858e6$efb41ce0$cf1c56a0$@com>
	<14914870.post@talk.nabble.com>
	<002901c858ec$2ecf68d0$8c6e3a70$@com>
	<95F5D84B-4644-4D34-8913-F5445D5F435A@gmail.com>
Message-ID: <14921866.post@talk.nabble.com>


Thanks!!

Works like i charm.

Regards
P?l


Howard Butler-3 wrote:
> 
> Oops.  Can you try the new version that is available from the download  
> site?
> 
> Howard
> 
> On Jan 17, 2008, at 3:34 AM, Martin Chapman wrote:
> 
>> Correct.
>>
>> Martin Chapman
>> Chief Software Architect
>> Fortified Datacom Inc.
>> http://www.fortifieddatacom.com
>> mchapman@fortifieddatacom.com
>> 303-324-1065
>>
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org 
>> ] On Behalf Of P?l Kristensen
>> Sent: Thursday, January 17, 2008 2:06 AM
>> To: gdal-dev@lists.osgeo.org
>> Subject: RE: [Gdal-dev] SDE to PostgreSQL/PostGIS
>>
>>
>> Hi!
>>
>> Thanks! I assumed that it was something like that. The SDE plugin  
>> seems to
>> work correctly, but the problem is the PostgreSQL plugin that Howard  
>> Butler
>> compiled for me yesterday.
>>
>> So, the solution would be to recompile the PostgreSQL plugin without  
>> debug
>> support?
>>
>> Regards,
>> P?l Kristensen
>>
>>
>>
>> mchapman wrote:
>>>
>>> Whoops, from the image looks like your application or the plugin is
>>> compiled with the debug version and it doesn't like the different  
>>> heap
>>> space.
>>>
>>> Martin Chapman
>>> Chief Software Architect
>>> Fortified Datacom Inc.
>>> http://www.fortifieddatacom.com
>>> mchapman@fortifieddatacom.com
>>> 303-324-1065
>>>
>>>
>>> -----Original Message-----
>>> From: gdal-dev-bounces@lists.osgeo.org
>>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P?l Kristensen
>>> Sent: Thursday, January 17, 2008 1:29 AM
>>> To: gdal-dev@lists.osgeo.org
>>> Subject: Re: [Gdal-dev] SDE to PostgreSQL/PostGIS
>>>
>>>
>>> Hi!
>>>
>>> Thanks for the help! Unfortunately there seems to be something  
>>> wrong. I
>>> got
>>> the attached error message when executing the following command:
>>>
>>> SET PG_USE_COPY=YES
>>> ogr2ogr -nlt LINESTRING -nln n50_bilveg -lco GEOMETRY_NAME=the_geom  
>>> -a_srs
>>> EPSG:32633 -f PostgreSQL PG:"dbname=kartdata user=xxx  
>>> host=xx.xx.xx.xx"
>>> SDE:xx.xx.xx.xx,5157,,n50,n50,n50.bilveg
>>>
>>> http://www.nabble.com/file/p14914348/ogr2ogr_error.png
>>>
>>> Do you know what is causing this?
>>>
>>> Ogrinfo --formats however shows both SDE and PostgreSQL support.
>>>
>>>
>>> Regards
>>> P?l Kristensen
>>>
>>>
>>>
>>> Howard Butler-3 wrote:
>>>>
>>>> I have placed a PostGIS plugin on the download page.  Please confirm
>>>> that it works for you...
>>>>
>>>> http://download.osgeo.org/gdal/win32/1.5/
>>>>
>>>> Howard
>>>>
>>>> On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:
>>>>
>>>>>
>>>>> Hi!
>>>>>
>>>>> I'm trying to convert some data (approx 10GB) from SDE to  
>>>>> PostgreSQL/
>>>>> PostGIS
>>>>> using ogr2ogr. Due to the large amount of data it's not practical  
>>>>> to
>>>>> use
>>>>> shapefiles as intermediate storage. The problem is that I can't  
>>>>> find
>>>>> any
>>>>> GDAL/OGR windows binaries with both SDE support and PostgreSQL
>>>>> support.
>>>>>
>>>>> The windows binaries which you can download form
>>>>> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by
>>>>> using the
>>>>> plugins available at the same link. However these win binaries  
>>>>> does,
>>>>> for
>>>>> some reason, not support PostgreSQL.
>>>>>
>>>>> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL
>>>>> support,
>>>>> but I cant find any SDE plugins that works with newer FWtools than
>>>>> version
>>>>> 1.3.9.
>>>>>
>>>>> So basically FWtools works with PostgreSQL and the win32 binaries
>>>>> from the
>>>>> GDAL web site works with SDE.
>>>>>
>>>>> Is there any win32 compilation of the latest gdal 1.5.0 that has  
>>>>> both
>>>>> PostgreSQL and SDE 9.x support??
>>>>>
>>>>> Regards,
>>>>> P?l Kristensen
>>>>> -- 
>>>>> View this message in context:
>>>>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
>>>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914348.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914870.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14921866.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From pal.kristensen at statkart.no  Thu Jan 17 10:41:41 2008
From: pal.kristensen at statkart.no (=?UTF-8?Q?P=C3=A5l_Kristensen?=)
Date: Thu Jan 17 10:41:43 2008
Subject: [Gdal-dev] SDE to PostgreSQL/PostGIS
Message-ID: <14921866.post@talk.nabble.com>


Thanks!!

Works like a charm.

Regards
P?l


Howard Butler-3 wrote:
> 
> Oops.  Can you try the new version that is available from the download  
> site?
> 
> Howard
> 
> On Jan 17, 2008, at 3:34 AM, Martin Chapman wrote:
> 
>> Correct.
>>
>> Martin Chapman
>> Chief Software Architect
>> Fortified Datacom Inc.
>> http://www.fortifieddatacom.com
>> mchapman@fortifieddatacom.com
>> 303-324-1065
>>
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org 
>> ] On Behalf Of P?l Kristensen
>> Sent: Thursday, January 17, 2008 2:06 AM
>> To: gdal-dev@lists.osgeo.org
>> Subject: RE: [Gdal-dev] SDE to PostgreSQL/PostGIS
>>
>>
>> Hi!
>>
>> Thanks! I assumed that it was something like that. The SDE plugin  
>> seems to
>> work correctly, but the problem is the PostgreSQL plugin that Howard  
>> Butler
>> compiled for me yesterday.
>>
>> So, the solution would be to recompile the PostgreSQL plugin without  
>> debug
>> support?
>>
>> Regards,
>> P?l Kristensen
>>
>>
>>
>> mchapman wrote:
>>>
>>> Whoops, from the image looks like your application or the plugin is
>>> compiled with the debug version and it doesn't like the different  
>>> heap
>>> space.
>>>
>>> Martin Chapman
>>> Chief Software Architect
>>> Fortified Datacom Inc.
>>> http://www.fortifieddatacom.com
>>> mchapman@fortifieddatacom.com
>>> 303-324-1065
>>>
>>>
>>> -----Original Message-----
>>> From: gdal-dev-bounces@lists.osgeo.org
>>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of P?l Kristensen
>>> Sent: Thursday, January 17, 2008 1:29 AM
>>> To: gdal-dev@lists.osgeo.org
>>> Subject: Re: [Gdal-dev] SDE to PostgreSQL/PostGIS
>>>
>>>
>>> Hi!
>>>
>>> Thanks for the help! Unfortunately there seems to be something  
>>> wrong. I
>>> got
>>> the attached error message when executing the following command:
>>>
>>> SET PG_USE_COPY=YES
>>> ogr2ogr -nlt LINESTRING -nln n50_bilveg -lco GEOMETRY_NAME=the_geom  
>>> -a_srs
>>> EPSG:32633 -f PostgreSQL PG:"dbname=kartdata user=xxx  
>>> host=xx.xx.xx.xx"
>>> SDE:xx.xx.xx.xx,5157,,n50,n50,n50.bilveg
>>>
>>> http://www.nabble.com/file/p14914348/ogr2ogr_error.png
>>>
>>> Do you know what is causing this?
>>>
>>> Ogrinfo --formats however shows both SDE and PostgreSQL support.
>>>
>>>
>>> Regards
>>> P?l Kristensen
>>>
>>>
>>>
>>> Howard Butler-3 wrote:
>>>>
>>>> I have placed a PostGIS plugin on the download page.  Please confirm
>>>> that it works for you...
>>>>
>>>> http://download.osgeo.org/gdal/win32/1.5/
>>>>
>>>> Howard
>>>>
>>>> On Jan 16, 2008, at 2:12 AM, P?l Kristensen wrote:
>>>>
>>>>>
>>>>> Hi!
>>>>>
>>>>> I'm trying to convert some data (approx 10GB) from SDE to  
>>>>> PostgreSQL/
>>>>> PostGIS
>>>>> using ogr2ogr. Due to the large amount of data it's not practical  
>>>>> to
>>>>> use
>>>>> shapefiles as intermediate storage. The problem is that I can't  
>>>>> find
>>>>> any
>>>>> GDAL/OGR windows binaries with both SDE support and PostgreSQL
>>>>> support.
>>>>>
>>>>> The windows binaries which you can download form
>>>>> http://download.osgeo.org/gdal/win32/1.5/ does support SDE 9.x, by
>>>>> using the
>>>>> plugins available at the same link. However these win binaries  
>>>>> does,
>>>>> for
>>>>> some reason, not support PostgreSQL.
>>>>>
>>>>> I then tried to use the latest FWtools (2.0.4) that has PostgreSQL
>>>>> support,
>>>>> but I cant find any SDE plugins that works with newer FWtools than
>>>>> version
>>>>> 1.3.9.
>>>>>
>>>>> So basically FWtools works with PostgreSQL and the win32 binaries
>>>>> from the
>>>>> GDAL web site works with SDE.
>>>>>
>>>>> Is there any win32 compilation of the latest gdal 1.5.0 that has  
>>>>> both
>>>>> PostgreSQL and SDE 9.x support??
>>>>>
>>>>> Regards,
>>>>> P?l Kristensen
>>>>> -- 
>>>>> View this message in context:
>>>>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14873585.html
>>>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914348.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14914870.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/SDE-to-PostgreSQL-PostGIS-tp14873585p14921866.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From craig.miller at spatialminds.com  Thu Jan 17 10:59:33 2008
From: craig.miller at spatialminds.com (Craig Miller)
Date: Thu Jan 17 10:59:36 2008
Subject: [gdal-dev] Windows nmake.opt - debug default?
Message-ID: <A0B513483C4C42E48831A215D1A73CFD@Carabiner>

I downloaded the gdal src zip file a couple days ago and noticed a couple of
minor things, but thought I'd mention them in case anyone wanted to change
them.

- When editing my nmake.opt file I noticed that it was set to compile a
debug build by default.  I wasn't sure if this was intentional.

- I received an error when trying to compile using the Solution File
(makegdal80.sln) for Visual Studio 2005  under Vista.  I didn't investigate
why this happened as the command line compilation still worked great and is
sufficient for my purposes.  I'm only mentioning it in-case someone is
maintaining these build files and is looking for beta type feedback.  I know
that they are still relatively new to the src release package.  I've
attached the buildlog.htm file in case it is of value.  I didn't do any
reading on how to use the new .sln file, so I may very well have just blown
right past a pre-build configuration step.


Craig

---
http://www.overlandnavigator.com
Touchscreen Friendly GPS Mapping 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080117/d965bd92/BuildLog.htm
From ivan.lucena at pmldnet.com  Thu Jan 17 11:24:27 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Jan 17 11:24:34 2008
Subject: [gdal-dev] Windows nmake.opt - debug default?
In-Reply-To: <A0B513483C4C42E48831A215D1A73CFD@Carabiner>
References: <A0B513483C4C42E48831A215D1A73CFD@Carabiner>
Message-ID: <478F813B.6050602@pmldnet.com>

Craig,

Thanks for the warning.

Craig Miller wrote:
> - I received an error when trying to compile using the Solution File
> (makegdal80.sln) for Visual Studio 2005  under Vista.  I didn't investigate
> why this happened as the command line compilation still worked great and is

That problem was caused by unix-dos newline conversion on SVN or by the 
OS/Software used to produce the .zip distribution and it was fixed 
yesterday: <http://trac.osgeo.org/gdal/ticket/2154#comment:4>

If you want to take advantage of the VS solution you can run that script 
to generate a new one:

C:\Dev\gdal>makegdal_gen
Usage: makegdal_gen "MS Visual C++ version" > makegdalNN.vcproj
Examples:
    makegdal_gen 7.10 > makegdal71.vcproj
    makegdal_gen 8.00 > makegdal80.vcproj
C:\Dev\gdal> makegdal_gen 8.00 > makegdal80.vcproj
C:\Dev\gdal> _

Best regards,

Ivan
From alouis at galdosinc.com  Thu Jan 17 12:10:23 2008
From: alouis at galdosinc.com (Andrew T. Louis)
Date: Thu Jan 17 12:10:26 2008
Subject: [gdal-dev] [ogr2ogr] Date mapping
Message-ID: <4E1D53230994FD45A119B5090DFBF4600183ED32@andalusia.Galdos.local>

Hi all,

I have a shape file containing a "Date" format property. When using the
ogr2ogr tool, to convert this shape file to GML, the date property
doesn't get generated in the GML schema. But the GML file containing the
instances has the right values

 

Instance

 

      <ogr:IS_CUSTODI>Y</ogr:IS_CUSTODI>

      <ogr:REASON_FOR>1</ogr:REASON_FOR>

      <ogr:DATE_OF_CH>2007/09/22</ogr:DATE_OF_CH>

      <ogr:GMLID>ADA012_1</ogr:GMLID>

 

 

Schema 

   <xs:element name="IS_CUSTODI" nillable="true" minOccurs="0"
maxOccurs="1">

      <xs:simpleType>

        <xs:restriction base="xs:string">

          <xs:maxLength value="1"/>

        </xs:restriction>

      </xs:simpleType>

    </xs:element>

    <xs:element name="REASON_FOR" nillable="true" minOccurs="0"
maxOccurs="1">

      <xs:simpleType>

        <xs:restriction base="xs:string">

          <xs:maxLength value="254"/>

        </xs:restriction>

      </xs:simpleType>

    </xs:element>

    <xs:element name="GMLID" nillable="true" minOccurs="0"
maxOccurs="1">

      <xs:simpleType>

        <xs:restriction base="xs:string">

          <xs:maxLength value="20"/>

        </xs:restriction>

      </xs:simpleType>

    </xs:element>

 

 

Anyone else has this issue?

 

Thanks

Andrew Louis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080117/c8ffe2ed/attachment.html
From retsios at itc.nl  Thu Jan 17 12:12:32 2008
From: retsios at itc.nl (Bas Retsios)
Date: Thu Jan 17 12:12:40 2008
Subject: [gdal-dev] grib driver
In-Reply-To: <1200349886.23033.42.camel@winkey.org>
References: <1200349886.23033.42.camel@winkey.org>
Message-ID: <478F8C80.8030105@itc.nl>

Hello,

I am happy that you were able to build GDAL with the GRIB driver and try 
it. I also thank you for the feedback, which I will use to improve the 
driver.

You are right, the choice for "metric" is accidentally fixed in the 
driver (in case you are interested, this is in file gribdataset.cpp, 
function GRIBRasterBand::ReadGribData, you will find a line with "sChar 
f_unit = 2; /* None = 0, English = 1, Metric = 2 */").
Consider that it was quite a headache to integrate degrib with GDAL, and 
I was so happy to get it to work after a huge effort, that I forgot that 
this was left hardcoded.
I guess this could be offered as an option to the user (e.g. with a 
command-line parameter for gdal_translate and gdalwarp).

To check what happens with the image's description and the 
georeferencing, I downloaded the image gfs.2008011612/gfs.t12.pgrb2f00.

Description:
Band 2 of this image contains the following metadata that could be used 
in a description:
- msgNum = 2
- subgNum = 0
- refTime = 1200484800.0000000
- validTime = 1200484800.0000000
- element = "TMP"
- comment = "Temperature [K]"
- unitName = "[K]"
- foreSec = 0.00000000000000000
- shortFstLevel = "1000-ISBL"
- longFstLevel = "1000[Pa] ISBL="Isobaric surface""
When I was implementing the GDAL-GRIB driver (a year ago), I had checked 
those fields in all GRIB images available to me at that time, and 
concluded that longFstLevel was sufficient. With your images it makes 
sense to compose a combination of these fields (note that GDAL only has 
place for one description string).
This also goes for bands 8 and 9: For both bands, msgNum = 8, but 
subgNum = 0,1. This can be incorporated in the description, but for GDAL 
they will remain separate bands.

Georeferencing:
This image contains (among others) the following info in the metadata:
- Scan direction = GRIB2BIT_2 (meaning from south to north)
- (lat1,lon1) = (90,0) .. considering the scan direction, this is the 
lower-left point
- (lat2,lon2) = (-90,359.5) .. this is the upper-right point of the image
Well, I was not happy with this, as it differs from all images I tried 
til now. At first sight I would conclude that the image is upside-down. 
Only by opening a band I can see that it is straight-up, and that the 
lower-left corner must be assigned (lat,lon)=(-90,0). The image contains 
the whole world, with the greenwich meridian on the left.
To solve this, I must add some intelligence to the code that passes the 
georeferencing parameters to GDAL (file gribdataset.cpp, function 
GRIBDataset::SetMetaData). However, I wish I had some documentation of 
the GRIB format, as I am not sure if I can simply "sort" the corner 
coordinates of the image (why is the scan direction given?).
For now, you can force gdal_translate to assign the correct georeference 
to the image during import, by adding a parameter: -a_ullr 0 90 360 -90 
. Unless your GIS expects longitudes to be between -180 and 180, this 
will solve the problem.

When I find some time, I will implement above improvements (user's 
choice of unit, better description, and more robust georeferencing). But 
if you have some experience in C++, feel free to assist.

Cheers,

Bas.

-- 
Ir. V. (Bas) Retsios
Software Developer
Geo-information Processing Department
International Institute for Geo-information Science and Earth Observation (ITC)
P.O. Box 6,  7500 AA Enschede, The Netherlands
Phone +31 (0)53 4874 573, telefax +31 (0)53 4874 335
E-mail retsios@itc.nl, Internet http://www.itc.nl





winkey wrote:

>After trying a second time I finally got the grib driver to work for me.
>
>the grib file i am testing with is the gfs forecast model .5 degree
>global grid available from
>http://www.ftp.ncep.noaa.gov/data/nccf/com/gfs/prod/gfs.2008011412/gfs.t12z.pgrb2f00
>
>replace 2008011412 with current date, last 2 digits are hour 00, 06, 12,
>18
>
>this is a list of my experiences.
>
>first with gdalinfo I noticed that not enough info was reported to
>choose the band(s) you want
>
>degrib reports:
> 2.0, 158408, 2, TMP="Temperature [K]", 1000-ISBL, 11/05/2007 00:00,
>11/05/2007 00:00, 0.00
>
>gdalinfo reports:
>Band 2 Block=720x1 Type=Float64, ColorInterp=Undefined
>  Description = 1000[Pa] ISBL="Isobaric surface"
>
>
>There seems to be no way to specify the units. degrib has a feature to
>convert the values in the grid to english or metric units. For instance
>in the band above default would have the values in kelvin, specifying
>english would convert those values to Fahrenheit, and metric would
>convert to celsius.
>
>
>Two part messages seem to be represented by two different bands. This is
>not necessarily a problem but without the variable name being reported
>by gdalinfo it is hard to find what your looking for.
>
>degrib reports:
>8.0, 901490, 2, UGRD="u-component of wind [m/s]", 2000-ISBL, 11/05/2007
>00:00, 11/05/2007 00:00, 0.00
>8.1, 901490, 2, VGRD="v-component of wind [m/s]", 2000-ISBL, 11/05/2007
>00:00, 11/05/2007 00:00, 0.00
>
>gdalinfo reports:
>Band 8 Block=720x1 Type=Float64, ColorInterp=Undefined
>  Description = 2000[Pa] ISBL="Isobaric surface"
>Band 9 Block=720x1 Type=Float64, ColorInterp=Undefined
>  Description = 2000[Pa] ISBL="Isobaric surface"
>
>
>I tried contouring band 169 (aka grib msg 147) 925 mb temps it seemed to
>contour only the northern hemisphere and nothing seemed in the right
>place. once again I may have the wrong band, but that would not effect
>hemisphere only the contours
>
>
>thanks
>
>brian
>
>
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080117/96c65d28/attachment-0001.html
From rush at winkey.org  Thu Jan 17 12:50:27 2008
From: rush at winkey.org (winkey)
Date: Thu Jan 17 12:50:31 2008
Subject: [gdal-dev] myshape.prj versus -s_srs
In-Reply-To: <478EC6F3.70001@pobox.com>
References: <25bc040b0801161652u6c42a762xad1af5fc0d3753ce@mail.gmail.com>
	<478EC6F3.70001@pobox.com>
Message-ID: <1200592227.2652.5.camel@winkey.org>

does this include apps like gdal_contour?

ie: gdal_contour -i 1 myraster -f KML mykml.kml

thanks
brian

On Wed, 2008-01-16 at 22:09 -0500, Frank Warmerdam wrote:
> Stefan Keller wrote:
> > I'm trying to a shapefile to KML. The Shapefile driver indicates that 
> > "If a .prj files (...) is present, it will be read and used to associate 
> > a projection with features.". In addition, the OGR KML driver 
> > documentation says "All OGR KML output will be presented in EPSG:4326.".
> >  
> > Let's say the input files are myshape.shp, myshape.shx, myshape.dbf and 
> > myshape.prj and I try "ogr2ogr -f kml out.kml myshape.shp".
> > then the resulting coordinates are still in the source coordinate 
> > system: Why? I espected that theya re transformed to WGS84 according to 
> > the documentation mentioned.
> >  
> > This is what finally worked: "ogr2ogr -f kml del_prairie.kml 
> > del_prairie.shp -s_srs EPSG:21781 -t_srs EPSG:4326". But indicating 
> > "-s_srs EPSG:21781" seems to me redundant to the existing file 
> > myshape.prj . Any explanations?
> 
> Stefan,
> 
> ogr2ogr does not reproject coordinates by default, even when writing
> to formats like KML that only really support one output coordinate system
> properly.  The -t_srs is the correct way to request reprojection.
> 
> The -s_srs EPSG:21781 option should be unnecessary if the source shapefile
> already has a readable .prj file.
> 
> Best regards,

From leretha.childress at baronservices.com  Thu Jan 17 15:02:35 2008
From: leretha.childress at baronservices.com (LeRetha Childress)
Date: Thu Jan 17 15:02:37 2008
Subject: [gdal-dev] divide by zero errors
Message-ID: <11724C8A07B74E7EAA1FC18BE1CD6519@lerethac>

I am using gdal in FWTools2.0.4

I have been processing some files from
ftp://ftpprd.ncep.noaa.gov/pub/data/nccf/com/gfs/prod/ in various formats
such as rucs, nam, gfs etc. 

I have encountered a problem with files that end with .grib2

 

For example if I run

 

gdalinfo -mm gdas1.t00z.engicegrb.grib2

 

it starts processing and then stops at band 1 

when debugged I get the following message

            Unhandled exception at 0x10049e24 in gdalinfo.exe : 0xC0000094.

            Integer division by zero.

 

Has anyone else encountered this problem?

Or can anyone tell me what to do to get gdal to process these files?

 

Thanks

LeRetha Childress

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080117/a640c1c0/attachment.html
From Bob.Moskovitz at conservation.ca.gov  Thu Jan 17 17:23:44 2008
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Thu Jan 17 17:24:38 2008
Subject: [gdal-dev] (no subject)
Message-ID: <A73B6E7A4503E948826CE81A65AF5FECA2A3C6@docexs1.ad.consrv.ca.gov>

Hello Gdal-dev,
 
I am looking for information on how to read a raster file into a numpy array in gdal, process that array(like average 2 arrays), and write it back to a raster file.  I'm also looking for examples for using gdal_array.
 
Thanks in advance,
Bob

Bob Moskovitz 
Seismic Hazard Zonation Project
California Geological Survey 
http://www.conservation.ca.gov/cgs/shzp<?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" />

CONFIDENTIALITY NOTICE: This communication is intended only for the use of the individual or entity to which it is addressed. This message contains information from the State of California, California Geological Survey, which may be privileged, confidential and exempt from disclosure under applicable law, including the Electronic Communications Privacy Act. If the reader of this communication is not the intended recipient, you are hereby notified that any dissemination, distribution, or copying of this communication is strictly prohibited.

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080117/8e82cd13/attachment.html
From szekerest at gmail.com  Thu Jan 17 17:38:23 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan 17 17:38:25 2008
Subject: [gdal-dev] C# OGRSpatialReference class -SetLinearUnits or
	SetLinearUnitsAndUpdateParameters()?
In-Reply-To: <439725.37552.qm@web32903.mail.mud.yahoo.com>
References: <439725.37552.qm@web32903.mail.mud.yahoo.com>
Message-ID: <f3b73b7d0801171438i7147e4abjadca7ae7545bd5d7@mail.gmail.com>

Mark,

This problem might be related to the following bug:
http://trac.osgeo.org/gdal/ticket/2081

You should check the correctness of the actual constant values passed
to SetLinearUnits();

The fix related to this issue is fairly new so you'd better use the
recent FWTools if possible.

I confirm that the SetLinearUnitsAndUpdateParameters is not exposed to
the SWIG API right now, so you might want to submit a ticket in case
you'd like to use that.


Best regards,

Tamas



2008/1/17, Mark Cheyne <cheynm@yahoo.com>:
> The class documentation for the OGRSpatialReference
> class
> (http://www.gdal.org/ogr/classOGRSpatialReference.html)
> describes two methods to set the linear units of a
> projected coordinate system:
>
> * SetLinearUnits() -
> http://www.gdal.org/ogr/classOGRSpatialReference.html#2016fee7b234666c5e94d528661e6729
>
>
> * SetLinearUnitsAndUpdateParameters() -
> http://www.gdal.org/ogr/classOGRSpatialReference.html#daab3d6e836f93974022bd78e221c4b4
>
>
> Using C# with the binaries/wrappers that come with
> FWTools 2.0.3, the second method does not appear on
> this class.
>
> * Is its absence intentional or accidental?
> * When is it appropriate to use one or the other?
>
> I am having trouble creating a correct NAD83HARN UTM
> zone 15N PCS in units of feet.
>
> Look at the code below, and the Proj4 and WKT it
> produces. I think the false easting is getting wonked
> - note the Proj4 says it is 152,400.3 feet, but the
> WKT says it is 500,000 meters. Seems like a meters
> conversion is getting misapplied? Or am I using the
> class incorrectly?
>
> OSGeo.OSR.SpatialReference sr = new
> SpatialReference("");
> sr.SetProjCS("NAD83(HARN) / UTM zone 15N");
> sr.SetWellKnownGeogCS("EPSG:4152");
> sr.SetUTM(15, 1);
> sr.SetLinearUnits(Constants.SRS_UL_US_FOOT,
> Constants.SRS_UL_US_FOOT_CONV);
>
> The Proj.4 params I get:
>
> +proj=tmerc +lat_0=0 +lon_0=-93 +k=0.9996
> +x_0=152400.3 +y_0=0 +ellps=GRS80 +units=us-ft
> +no_defs
>
>
>
> The WKT I get:
>
> PROJCS["NAD83(HARN) / UTM zone 15N",
>     GEOGCS["NAD83(HARN)",
>         DATUM["NAD83_High_Accuracy_Regional_Network",
>             SPHEROID["GRS 1980",6378137,298.257222101,
>
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6152"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.01745329251994328,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4152"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-93],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["U.S. Foot",0.3048006]]
>
>
>
> Mark Cheyne
> (608) 332-2235 (cell)
>
>
>       ____________________________________________________________________________________
> Be a better friend, newshound, and
> know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From cheynm at yahoo.com  Thu Jan 17 18:05:02 2008
From: cheynm at yahoo.com (Mark Cheyne)
Date: Thu Jan 17 18:05:04 2008
Subject: [gdal-dev] C# OGRSpatialReference class -SetLinearUnits or
	SetLinearUnitsAndUpdateParameters()?
In-Reply-To: <f3b73b7d0801171438i7147e4abjadca7ae7545bd5d7@mail.gmail.com>
Message-ID: <553119.5756.qm@web32908.mail.mud.yahoo.com>

Tamas - funny that you mention issue 2081 - I reported
that issue awhile back. Clearly I haven't yet upgraded
since you addressed the issue - my use of my custom
Constants class in the snippet below is my workaround
for the issue, the values are correct. 

Anyway, it is not the cause of my current problem. I
will add a ticket for you to SWIGify
SetLinearUnitsAndUpdateParameters().

Though I'm still curious what the differing purposes
of SetLinearUnits() and
SetLinearUnitsAndUpdateParameters() are, and this
might not be a fix for my actual problem anyway. I'll
look into it more.

Thank you!

--- Tamas Szekeres <szekerest@gmail.com> wrote:

> Mark,
> 
> This problem might be related to the following bug:
> http://trac.osgeo.org/gdal/ticket/2081
> 
> You should check the correctness of the actual
> constant values passed
> to SetLinearUnits();
> 
> The fix related to this issue is fairly new so you'd
> better use the
> recent FWTools if possible.
> 
> I confirm that the SetLinearUnitsAndUpdateParameters
> is not exposed to
> the SWIG API right now, so you might want to submit
> a ticket in case
> you'd like to use that.
> 
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> 2008/1/17, Mark Cheyne <cheynm@yahoo.com>:
> > The class documentation for the
> OGRSpatialReference
> > class
> >
>
(http://www.gdal.org/ogr/classOGRSpatialReference.html)
> > describes two methods to set the linear units of a
> > projected coordinate system:
> >
> > * SetLinearUnits() -
> >
>
http://www.gdal.org/ogr/classOGRSpatialReference.html#2016fee7b234666c5e94d528661e6729
> >
> >
> > * SetLinearUnitsAndUpdateParameters() -
> >
>
http://www.gdal.org/ogr/classOGRSpatialReference.html#daab3d6e836f93974022bd78e221c4b4
> >
> >
> > Using C# with the binaries/wrappers that come with
> > FWTools 2.0.3, the second method does not appear
> on
> > this class.
> >
> > * Is its absence intentional or accidental?
> > * When is it appropriate to use one or the other?
> >
> > I am having trouble creating a correct NAD83HARN
> UTM
> > zone 15N PCS in units of feet.
> >
> > Look at the code below, and the Proj4 and WKT it
> > produces. I think the false easting is getting
> wonked
> > - note the Proj4 says it is 152,400.3 feet, but
> the
> > WKT says it is 500,000 meters. Seems like a meters
> > conversion is getting misapplied? Or am I using
> the
> > class incorrectly?
> >
> > OSGeo.OSR.SpatialReference sr = new
> > SpatialReference("");
> > sr.SetProjCS("NAD83(HARN) / UTM zone 15N");
> > sr.SetWellKnownGeogCS("EPSG:4152");
> > sr.SetUTM(15, 1);
> > sr.SetLinearUnits(Constants.SRS_UL_US_FOOT,
> > Constants.SRS_UL_US_FOOT_CONV);
> >
> > The Proj.4 params I get:
> >
> > +proj=tmerc +lat_0=0 +lon_0=-93 +k=0.9996
> > +x_0=152400.3 +y_0=0 +ellps=GRS80 +units=us-ft
> > +no_defs
> >
> >
> >
> > The WKT I get:
> >
> > PROJCS["NAD83(HARN) / UTM zone 15N",
> >     GEOGCS["NAD83(HARN)",
> >        
> DATUM["NAD83_High_Accuracy_Regional_Network",
> >             SPHEROID["GRS
> 1980",6378137,298.257222101,
> >
> >                 AUTHORITY["EPSG","7019"]],
> >             AUTHORITY["EPSG","6152"]],
> >         PRIMEM["Greenwich",0,
> >             AUTHORITY["EPSG","8901"]],
> >         UNIT["degree",0.01745329251994328,
> >             AUTHORITY["EPSG","9122"]],
> >         AUTHORITY["EPSG","4152"]],
> >     PROJECTION["Transverse_Mercator"],
> >     PARAMETER["latitude_of_origin",0],
> >     PARAMETER["central_meridian",-93],
> >     PARAMETER["scale_factor",0.9996],
> >     PARAMETER["false_easting",500000],
> >     PARAMETER["false_northing",0],
> >     UNIT["U.S. Foot",0.3048006]]
> >
> >
> >
> > Mark Cheyne
> > (608) 332-2235 (cell)
> >
> >
> >      
>
____________________________________________________________________________________
> > Be a better friend, newshound, and
> > know-it-all with Yahoo! Mobile.  Try it now. 
>
http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 



      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping
From szekerest at gmail.com  Thu Jan 17 18:40:37 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan 17 18:40:39 2008
Subject: [gdal-dev] C# OGRSpatialReference class -SetLinearUnits or
	SetLinearUnitsAndUpdateParameters()?
In-Reply-To: <553119.5756.qm@web32908.mail.mud.yahoo.com>
References: <f3b73b7d0801171438i7147e4abjadca7ae7545bd5d7@mail.gmail.com>
	<553119.5756.qm@web32908.mail.mud.yahoo.com>
Message-ID: <f3b73b7d0801171540j583ea7afu87b6695a0a658aa7@mail.gmail.com>

2008/1/18, Mark Cheyne <cheynm@yahoo.com>:
> Tamas - funny that you mention issue 2081 - I reported
> that issue awhile back. Clearly I haven't yet upgraded
> since you addressed the issue - my use of my custom
> Constants class in the snippet below is my workaround
> for the issue, the values are correct.
>

Oh, indeed. I should take better care of the person behind of similar
problems in the future ;-)

> Anyway, it is not the cause of my current problem. I
> will add a ticket for you to SWIGify
> SetLinearUnitsAndUpdateParameters().
>
> Though I'm still curious what the differing purposes
> of SetLinearUnits() and
> SetLinearUnitsAndUpdateParameters() are, and this
> might not be a fix for my actual problem anyway. I'll
> look into it more.
>

Actually the latter will update the subsequent parameters of the SRS
node that might be affected by the linear units. See the
implementation of
OGRSpatialReference::SetLinearUnitsAndUpdateParameters in
ogrspatialreference.cpp for more details.

Best regards,

Tamas
From timmichelsen at gmx-topmail.de  Thu Jan 17 18:56:59 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Thu Jan 17 18:57:02 2008
Subject: [gdal-dev] (no subject)
In-Reply-To: <A73B6E7A4503E948826CE81A65AF5FECA2A3C6@docexs1.ad.consrv.ca.gov>
References: <A73B6E7A4503E948826CE81A65AF5FECA2A3C6@docexs1.ad.consrv.ca.gov>
Message-ID: <478FEB4B.2020708@gmx-topmail.de>

Hello Bob and Gdal-devs,
> I am looking for information on how to read a raster file into a numpy 
> array in gdal, process that array(like average 2 arrays), and write it 
> back to a raster file.  I'm also looking for examples for using gdal_array.
I would also like to learn from any examples out there about getting 
gdal work with numpy.

Thanks and kind regards,
Timmie
From ivan.lucena at pmldnet.com  Thu Jan 17 19:16:37 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Jan 17 19:16:43 2008
Subject: [gdal-dev] (no subject)
In-Reply-To: <478FEB4B.2020708@gmx-topmail.de>
References: <A73B6E7A4503E948826CE81A65AF5FECA2A3C6@docexs1.ad.consrv.ca.gov>
	<478FEB4B.2020708@gmx-topmail.de>
Message-ID: <478FEFE5.8030104@pmldnet.com>

Bob, Tim, see: http://trac.osgeo.org/gdal/wiki/GdalOgrInPython for 
details and examples and http://www.gdal.org/gdal_tutorial.html also.

Tim Michelsen wrote:
> Hello Bob and Gdal-devs,
>> I am looking for information on how to read a raster file into a numpy 
>> array in gdal, process that array(like average 2 arrays), and write it 
>> back to a raster file.  I'm also looking for examples for using 
>> gdal_array.
> I would also like to learn from any examples out there about getting 
> gdal work with numpy.
> 
> Thanks and kind regards,
> Timmie
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
From gok at aerometric-ak.com  Thu Jan 17 21:21:20 2008
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Thu Jan 17 21:22:32 2008
Subject: [gdal-dev] DWG/DXF 2.5 support in gdal 1.4.4
Message-ID: <3054411AF4728548AD6D7137190D56B30C474A@admin1.aeromap.com>

Hello, all.
Want to extent ticket #1459: http://trac.osgeo.org/gdal/ticket/1459
in order to support latest 2.05.01 DWG/DXF library (DDWG) from ODA.

Most changes done in ogr_dwg.h header (attached):
- switch from OdChar * to OdString &
- change OdInt32 to OdInt64
- make MyServices available (drop //ifdef notdef) and put this name in
OdStaticRxObject<MyServices> svcs;

DDWG has its own file buffer classes OdFileBuf.h, OdFileBuf.cpp in
ddwg25\Extensions\ExServices so my guess there is no reason to keep it
in gdal trunk gdal-1.4.4\ogr\ogrsf_frmts\dxfdwg. Just move those files
out of gdal scope and add the same from DDWG.

msvc 8.0 specific lib linked list:
odbc32.lib
libpng13-vc8.lib
libjpeg.lib
zlib1-vc8.lib
DD_vc8MD_PdfToolkit.lib
DD_vc8MD_PdfExport.lib
DD_VC8MD_RxRasterServices.lib
Gs_WinOpenGL.lib
Gs_WinGDI.lib
DD_VC8MD_Br.lib
DD_VC8MD_BrepRenderer.lib
DD_VC8MD_AcisBuilder.lib
DD_VC8MD_ModelerGeometry.lib
DD_VC8MD_DbCommands.lib
DD_VC8MD_Alloc.lib
DD_VC8MD_SvgExport.lib
DD_VC8MD_Gi.lib
DD_VC8MD_Jpeg.lib
DD_VC8MD_Db.lib
DD_VC8MD_DbRoot.lib
DD_VC8MD_Ge.lib
DD_VC8MD_Gs.lib
DD_VC8MD_Root.lib
opengl32.lib
DD_VC8MD_ZLib.lib
DD_VC8MD_zip.lib
DD_VC8MD_SpatialIndex.lib
DD_VC8MD_BmpExport.lib
DD_VC8MD_RxPlotStyleServices.lib
DD_VC8MD_DynBlocks.lib
DD_VC8MD_Ave.lib
DD_VC8MD_RxRasterProcessor.lib
DD_vc8MD_Dwf7Import.lib
DD_vc8MD_Dwf7Export.lib
WhipTk.lib
W3Dtk.lib
DwfToolkit.lib
DD_VC8MD_ExFieldEvaluator.lib
DD_vc8MD_PlotSettingsValidator.lib
DwfCore.lib
 
Gennady Khokhorin
Software Developer,
www.aerometric.com <http://www.aerometric.com/> 
(907) 272-4495
From gok at aerometric-ak.com  Thu Jan 17 23:08:01 2008
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Thu Jan 17 23:09:14 2008
Subject: [gdal-dev] RE: DWG/DXF 2.5 support in gdal 1.4.4
Message-ID: <3054411AF4728548AD6D7137190D56B302B57E67@admin1.aeromap.com>

 
... Most changes done in ogr_dwg.h header (attached)...
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogr_dwg.zip
Type: application/x-zip-compressed
Size: 3005 bytes
Desc: ogr_dwg.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080117/ae6238c4/ogr_dwg.bin
From sfkeller at gmail.com  Fri Jan 18 01:20:35 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri Jan 18 01:20:37 2008
Subject: [gdal-dev] myshape.prj versus -s_srs
In-Reply-To: <478EC6F3.70001@pobox.com>
References: <25bc040b0801161652u6c42a762xad1af5fc0d3753ce@mail.gmail.com>
	<478EC6F3.70001@pobox.com>
Message-ID: <25bc040b0801172220m4256aa33pffc8948241f78d8b@mail.gmail.com>

Thank you; was strange that it did take the .prj information.

I'd like to setup a wrapper around OGR that asks as few questions as
possible.

=> Is there a reliable way to find out if ogr2ogr recognizes an SRS from the
source format without -s_srs parameter? ogrinfo with return code?

-- Stefan

2008/1/17, Frank Warmerdam <warmerdam@pobox.com>:
>
> Stefan Keller wrote:
> > I'm trying to a shapefile to KML. The Shapefile driver indicates that
> > "If a .prj files (...) is present, it will be read and used to associate
> > a projection with features.". In addition, the OGR KML driver
> > documentation says "All OGR KML output will be presented in EPSG:4326.".
> >
> > Let's say the input files are myshape.shp, myshape.shx, myshape.dbf and
> > myshape.prj and I try "ogr2ogr -f kml out.kml myshape.shp".
> > then the resulting coordinates are still in the source coordinate
> > system: Why? I espected that theya re transformed to WGS84 according to
> > the documentation mentioned.
> >
> > This is what finally worked: "ogr2ogr -f kml del_prairie.kml
> > del_prairie.shp -s_srs EPSG:21781 -t_srs EPSG:4326". But indicating
> > "-s_srs EPSG:21781" seems to me redundant to the existing file
> > myshape.prj . Any explanations?
>
> Stefan,
>
> ogr2ogr does not reproject coordinates by default, even when writing
> to formats like KML that only really support one output coordinate system
> properly.  The -t_srs is the correct way to request reprojection.
>
> The -s_srs EPSG:21781 option should be unnecessary if the source shapefile
> already has a readable .prj file.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/2f03da42/attachment.html
From jmp at geosys.com  Fri Jan 18 03:18:13 2008
From: jmp at geosys.com (Jean Michel PIERRET)
Date: Fri Jan 18 03:18:13 2008
Subject: [gdal-dev] Read METADATA and PDS on GRIB Files with CSharp Bindings
Message-ID: <001c01c859aa$abbb9990$2201a8c0@pcjmp>

Hi,

 

            I have compiled gdal 1.5 with the GRIB driver; I can read GRIB
files but not the METADATA (PDS).

 

With CSharp Bindings :

 

How can I get the list of all key for the method "GetMetadata" on DataSet
and Band?

 

How can I read the PDS on a GRIB files?

 

Thanks.

Regards.

 


 <mailto:jmp@geosys.com> Jean-michel PIERRET - Poste  376


Tel : +33 (0)5 62 47 80 76
Mail :  <mailto:jmp@geosys.com> jmp@geosys.com
GEOSYS SA

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/48262423/attachment.html
From stefan.schwarzer at grid.unep.ch  Fri Jan 18 04:17:28 2008
From: stefan.schwarzer at grid.unep.ch (Stefan Schwarzer)
Date: Fri Jan 18 04:17:35 2008
Subject: [gdal-dev] (Swiss) SPOT projection - not able to identify it
Message-ID: <E71282AE-8222-48F5-A43E-A3A5EF7881C0@grid.unep.ch>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2180 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/c3df1606/smime-0001.bin
From dany.geotools at gmail.com  Fri Jan 18 04:48:53 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Jan 18 04:48:57 2008
Subject: [gdal-dev] GDAL setMetadata(HashTable) / setMetadata(String) on
	java.
Message-ID: <7221db410801180148m4242401as6fe5cf3f4e5ebc5b@mail.gmail.com>

Hi list,
I have some problems to set metadata in a dataset (as an instance, a
GeoTiff) using Java bindings.
I'm attempting to add some metadata in the default domain (""). I also have
enabled the PAM mechanism which should allow to add auxiliary metadata.

Now, when I attempt to set several metadata using the following code,
dataset.setMetadata("IMAGE__INPUT_NAME=temp","");
dataset.setMetadata("IMAGE__WIDTH=3000","");
dataset.setMetadata("IMAGE__HEIGHT=3000","");

only the last one (IMAGE__HEIGHT=3000) is displayed when calling gdalinfo on
the just created output dataset.
Is the setMetadata method "overriding"? I mean: does any setMetadata call
override the last set value?
Finally, I also have attempted to directly use an HashTable as input
parameter of setMetadata and the JVM crashes.
(I also have tuned the HashTable to be sure it does not contains null
keys/entries).

Is there someone which has already set metadata via Java Bindings? Maybe I'm
using a wrong approach.
Thanks for any help.

Best Regards,
Daniele Romagnoli


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/7e4ca3cc/attachment.html
From szekerest at gmail.com  Fri Jan 18 05:12:04 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 18 05:12:06 2008
Subject: [gdal-dev] Read METADATA and PDS on GRIB Files with CSharp
	Bindings
In-Reply-To: <001c01c859aa$abbb9990$2201a8c0@pcjmp>
References: <001c01c859aa$abbb9990$2201a8c0@pcjmp>
Message-ID: <f3b73b7d0801180212m26e1ce29q40734a8faa2adde8@mail.gmail.com>

Jean,

public string[] GetMetadata(string pszDomain)

member of each object should provide a string list that contain the metadata
name value pairs.

Best regards,

Tamas



2008/1/18, Jean Michel PIERRET <jmp@geosys.com>:
>
>  Hi,
>
>
>
>             I have compiled gdal 1.5 with the GRIB driver; I can read GRIB
> files but not the METADATA (PDS).
>
>
>
> With CSharp Bindings :
>
>
>
> How can I get the list of all key for the method "GetMetadata" on DataSet
> and Band?
>
>
>
> How can I read the PDS on a GRIB files?
>
>
>
> Thanks.
>
> Regards.
>
>
>
> *Jean-michel PIERRET <jmp@geosys.com> - Poste  376*
>
> *Tel : +33 (0)5 62 47 80 76*
> *Mail* : jmp@geosys.com
> *GEOSYS SA*
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/00b5f4a1/attachment.html
From stefan.schwarzer at grid.unep.ch  Fri Jan 18 05:19:35 2008
From: stefan.schwarzer at grid.unep.ch (Stefan Schwarzer)
Date: Fri Jan 18 05:19:38 2008
Subject: [gdal-dev] (Swiss) SPOT projection - not able to identify it
In-Reply-To: <E71282AE-8222-48F5-A43E-A3A5EF7881C0@grid.unep.ch>
References: <E71282AE-8222-48F5-A43E-A3A5EF7881C0@grid.unep.ch>
Message-ID: <83518EFE-A5AC-4A19-A1D4-1F5F3403B014@grid.unep.ch>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2180 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/909051f7/smime.bin
From szekerest at gmail.com  Fri Jan 18 05:47:30 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 18 05:47:33 2008
Subject: [gdal-dev] GDAL setMetadata(HashTable) / setMetadata(String) on
	java.
In-Reply-To: <7221db410801180148m4242401as6fe5cf3f4e5ebc5b@mail.gmail.com>
References: <7221db410801180148m4242401as6fe5cf3f4e5ebc5b@mail.gmail.com>
Message-ID: <f3b73b7d0801180247m1e63f393ra72efabf7c8b94da@mail.gmail.com>

2008/1/18, Daniele Romagnoli <dany.geotools@gmail.com>:
> Hi list,
> I have some problems to set metadata in a dataset (as an instance, a
> GeoTiff) using Java bindings.
> I'm attempting to add some metadata in the default domain (""). I also have
> enabled the PAM mechanism which should allow to add auxiliary metadata.
>
> Now, when I attempt to set several metadata using the following code,
> dataset.setMetadata("IMAGE__INPUT_NAME=temp","");
> dataset.setMetadata("IMAGE__WIDTH=3000","");
>  dataset.setMetadata("IMAGE__HEIGHT=3000","");
>
> only the last one (IMAGE__HEIGHT=3000) is displayed when calling gdalinfo on
> the just created output dataset.
> Is the setMetadata method "overriding"? I mean: does any setMetadata call
> override the last set value?

This is the expected behaviour right now. This member creates a
metadata list on the fly that has only one item that have been given
as the function parameter.
You should file a ticket and apply for SetMetadataItem/SetMetadataItem
whatever to be exposed to the SWIG interface.

> Finally, I also have attempted to directly use an HashTable as input
> parameter of setMetadata and the JVM crashes.
> (I also have tuned the HashTable to be sure it does not contains null
> keys/entries).
>

That might be a java bindings related issue, how the HashTable is
mapped from the target language to C/C++. That's worthy for a ticket
as well, however I'm not sure whether we currently have an active java
bindings maintainer or not.

Best regards,

Tamas
From S.Pascoe at rl.ac.uk  Fri Jan 18 06:57:47 2008
From: S.Pascoe at rl.ac.uk (Pascoe, S (Stephen))
Date: Fri Jan 18 07:00:59 2008
Subject: [gdal-dev] Adding Datums to GDAL
Message-ID: <EB1E7CB92F5B35459E0B926D2A614DB6168A36@EXCHANGE19.fed.cclrc.ac.uk>

I am relatively new to GDAL and OpenGIS technology in general to
apologies if this is the wrong forum.
 
I want to use GDAL to transform a EPSG:4326 raster to British National
Grid coordinates (EPSG:27700).  With a bit a bit of googling I found the
WKT for EPSG:27700 and installed it in <gdal-root>/share/epsg.wkt:
 
27700,PROJCS["OSGB 1936 / British National Grid",
        GEOGCS["OSGB 1936",
            DATUM["OSGB_1936",
                SPHEROID["Airy
1830",6377563.396,299.3249646,AUTHORITY["EPSG","7001"]],
                TOWGS84[375,-111,431,0,0,0,0],
                AUTHORITY["EPSG","6277"]],
            PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
            UNIT["DMSH",0.0174532925199433,AUTHORITY["EPSG","9108"]],
            AXIS["Lat",NORTH],
            AXIS["Long",EAST],
            AUTHORITY["EPSG","4277"]],
        PROJECTION["Transverse_Mercator"],
        PARAMETER["latitude_of_origin",49],
        PARAMETER["central_meridian",-2],
        PARAMETER["scale_factor",0.999601272],
        PARAMETER["false_easting",400000],
        PARAMETER["false_northing",-100000],
        UNIT["metre",1,AUTHORITY["EPSG","9001"]],
        AXIS["E",EAST],
        AXIS["N",NORTH],
        AUTHORITY["EPSG","27700"]]

Tests indicate it is found.  However, when I try to use gdalwarp I get
an error:
 
$ gdalwarp -t_srs EPSG:27700 -te -100000 -100000 600000 600000 -ts 400
400 map.tif trans.tif
ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49
+lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy
+datum=OSB36 +units=m +no_defs '.

Guessing that it didn't know what +datum=OSB36 was I tried changing it
to WGS84 and it worked (the proj parameters were taken directly from the
error above):
 
$ gdalwarp -t_srs '+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717
+x_0=400000 +y_0=-100000 +ellps=airy +datum=WGS84 +units=m +no_defs' -te
-100000 -100000 600000 600000 -ts 400 400 map.tif trans.tif
 
My question is how do I install the OSGB36 datum into GDAL?  The WKT
above appears to contain parameters for this datum so why is proj_4
failing?
 
Many thanks,
Stephen.
 
 
---
Stephen Pascoe  +44 (0)1235 445980
British Atmospheric Data Centre
Rutherford Appleton Laboratory
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/3918599a/attachment.html
From S.Pascoe at rl.ac.uk  Fri Jan 18 10:16:26 2008
From: S.Pascoe at rl.ac.uk (Pascoe, S (Stephen))
Date: Fri Jan 18 10:16:29 2008
Subject: [gdal-dev] Adding Datums to GDAL
In-Reply-To: <EB1E7CB92F5B35459E0B926D2A614DB6168A36@EXCHANGE19.fed.cclrc.ac.uk>
References: <EB1E7CB92F5B35459E0B926D2A614DB6168A36@EXCHANGE19.fed.cclrc.ac.uk>
Message-ID: <EB1E7CB92F5B35459E0B926D2A614DB6168A3A@EXCHANGE19.fed.cclrc.ac.uk>

OK I was showing my naivety with thinking GDAL didn't have EPSG:27700
pre-configured.  Please ignore the the first half of my query.  However,
having reinstalled Proj4 (4.6.0) and gdal-1.5.0, I still have the same
problem:
 
$ gdalwarp -t_srs EPSG:27700 -te -100000 -100000 600000 600000 -ts 400
400 map.tif trans.tif
ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49
+lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy
+datum=OSB36 +units=m +no_defs '.

 
map.tif is a global bitmap that has been georeferenced with GCPs:
 
gdalinfo map.tif
Driver: GTiff/GeoTIFF
Files: map.tif
Size is 960, 480
Coordinate System is `'
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.2572235629972,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG"
,"6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHOR
ITY["EPSG","4326"]]
GCP[  0]: Id=1, Info=
          (0,0) -> (-180,90,0)
GCP[  1]: Id=2, Info=
          (0,480) -> (-180,-90,0)
GCP[  2]: Id=3, Info=
          (960,0) -> (180,90,0)
GCP[  3]: Id=4, Info=
          (960,480) -> (180,-90,0)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  480.0)
Upper Right (  960.0,    0.0)
Lower Right (  960.0,  480.0)
Center      (  480.0,  240.0)
Band 1 Block=960x2 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=960x2 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=960x2 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=960x2 Type=Byte, ColorInterp=Alpha

 
S.
 
---
Stephen Pascoe  +44 (0)1235 445980
British Atmospheric Data Centre
Rutherford Appleton Laboratory
 


________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Pascoe, S
(Stephen)
Sent: 18 January 2008 11:58
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Adding Datums to GDAL


I am relatively new to GDAL and OpenGIS technology in general to
apologies if this is the wrong forum.
 
I want to use GDAL to transform a EPSG:4326 raster to British National
Grid coordinates (EPSG:27700).  With a bit a bit of googling I found the
WKT for EPSG:27700 and installed it in <gdal-root>/share/epsg.wkt:
 
27700,PROJCS["OSGB 1936 / British National Grid",
        GEOGCS["OSGB 1936",
            DATUM["OSGB_1936",
                SPHEROID["Airy
1830",6377563.396,299.3249646,AUTHORITY["EPSG","7001"]],
                TOWGS84[375,-111,431,0,0,0,0],
                AUTHORITY["EPSG","6277"]],
            PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
            UNIT["DMSH",0.0174532925199433,AUTHORITY["EPSG","9108"]],
            AXIS["Lat",NORTH],
            AXIS["Long",EAST],
            AUTHORITY["EPSG","4277"]],
        PROJECTION["Transverse_Mercator"],
        PARAMETER["latitude_of_origin",49],
        PARAMETER["central_meridian",-2],
        PARAMETER["scale_factor",0.999601272],
        PARAMETER["false_easting",400000],
        PARAMETER["false_northing",-100000],
        UNIT["metre",1,AUTHORITY["EPSG","9001"]],
        AXIS["E",EAST],
        AXIS["N",NORTH],
        AUTHORITY["EPSG","27700"]]

Tests indicate it is found.  However, when I try to use gdalwarp I get
an error:
 
$ gdalwarp -t_srs EPSG:27700 -te -100000 -100000 600000 600000 -ts 400
400 map.tif trans.tif
ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49
+lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy
+datum=OSB36 +units=m +no_defs '.

Guessing that it didn't know what +datum=OSB36 was I tried changing it
to WGS84 and it worked (the proj parameters were taken directly from the
error above):
 
$ gdalwarp -t_srs '+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717
+x_0=400000 +y_0=-100000 +ellps=airy +datum=WGS84 +units=m +no_defs' -te
-100000 -100000 600000 600000 -ts 400 400 map.tif trans.tif
 
My question is how do I install the OSGB36 datum into GDAL?  The WKT
above appears to contain parameters for this datum so why is proj_4
failing?
 
Many thanks,
Stephen.
 
 
---
Stephen Pascoe  +44 (0)1235 445980
British Atmospheric Data Centre
Rutherford Appleton Laboratory
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/707b026a/attachment.html
From josegomez at gmx.net  Fri Jan 18 10:23:23 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Fri Jan 18 10:23:27 2008
Subject: [gdal-dev] HDF V and VR components
Message-ID: <20080118152323.42850@gmx.net>

Hi,
I want to access a number of layers in the MOD09GHK product, which are not listed by GDAL (they are 1D datasets). They have shortnames ending in "_c" rather than "_1", as is common in most MODIS products.

I have tried using pyhdf to explore these datasets, but I was wondering whether I can read these 1D arrays with GDAL directly.

Thanks!
Jose
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
From warmerdam at pobox.com  Fri Jan 18 11:18:50 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 11:19:26 2008
Subject: [gdal-dev] HDF V and VR components
In-Reply-To: <20080118152323.42850@gmx.net>
References: <20080118152323.42850@gmx.net>
Message-ID: <4790D16A.6030000@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi, I want to access a number of layers in the MOD09GHK product, which are
> not listed by GDAL (they are 1D datasets). They have shortnames ending in
> "_c" rather than "_1", as is common in most MODIS products.
> 
> I have tried using pyhdf to explore these datasets, but I was wondering
> whether I can read these 1D arrays with GDAL directly.

Jose,

I do not believe there is any way to get at these arrays through the GDAL
interface.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From randre at gmail.com  Fri Jan 18 11:21:38 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri Jan 18 11:21:40 2008
Subject: [gdal-dev] Open source API to convert raster to polygons?
In-Reply-To: <47866F8A.10101@noaa.gov>
References: <4784E4F8.70409@tdwg.org> <47851E40.70907@tkk.fi>
	<47852A5B.4040205@ualg.pt> <478604A9.1050201@tdwg.org>
	<47866F8A.10101@noaa.gov>
Message-ID: <9c2015090801180821t7a95218y3087f51498b1f999@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
#! /usr/bin/python

import ogr
import gdal
import struct
from gdalconst import *

# POINT GDAL AT OUR INPUT DATA
filename = "564596.img"
dataset = gdal.Open( filename, GA_ReadOnly )
geotransform = dataset.GetGeoTransform()

# Create x_list and y_list arrays
start_x = geotransform[0]
start_y = geotransform[3]

x_list = []
y_list = []

x_i = 0
x_val = start_x
while x_i <= dataset.RasterXSize:
  x_list.append(x_val)
  x_val += geotransform[1]
  x_i += 1

y_i = 0
y_val = start_y
while y_i <= dataset.RasterYSize:
  y_list.append(y_val)
  y_val += geotransform[5]
  y_i += 1


# CREATE A SHAPEFILE TO WRITE THE POLYS TO
driver = ogr.GetDriverByName('ESRI Shapefile')
datasource = driver.CreateDataSource('randre_564596.shp')
layer = datasource.CreateLayer('polys', geom_type=ogr.wkbPolygon)

# READ RASTER DATA
band = dataset.GetRasterBand(1)
row = 0
polys = 0
while row < dataset.RasterYSize:
  scanline = band.ReadRaster( 0, row, band.XSize, 1, band.XSize, 1, GDT_Float32 )
  tuple_of_floats = struct.unpack('f' * band.XSize, scanline)
  total_cols = len(tuple_of_floats)
  col = 0
  for col in range(0,total_cols):
    pixel = tuple_of_floats[col]
    if pixel != 0.0:
      print 'Creating poly for Col: %d, Row: %d' % (col, row)
      xi = col
      yi = row

      # BUILD POLYGON GEOMETRY USING VALUES FROM x_list AND y_list ARRAYS
      x1 = x_list[xi]
      x2 = x_list[xi]
      x3 = x_list[xi + 1]
      x4 = x_list[xi + 1]

      y1 = y_list[yi]
      y2 = y_list[yi + 1]
      y3 = y_list[yi + 1]
      y4 = y_list[yi]
      wkt = 'POLYGON ((%f %f, %f %f, %f %f, %f %f, %f %f))' % (x1,y1, x2,y2, x3,y3, x4,y4, x1,y1)

      # THIS IS WHERE WE CREATE A POLYGON FOR THAT PIXEL
      geom = ogr.CreateGeometryFromWkt(wkt)
      feat = ogr.Feature(layer.GetLayerDefn())
      feat.SetGeometry(geom)

      # CREATE THE NEW FEATURE
      layer.CreateFeature(feat)
      polys += 1
  row += 1

# CLEAN UP AFTER SHAPEFILE CREATION
datasource.Destroy()

print "Created %d polys" % (polys)



From rdeyoe at clarksville.com  Fri Jan 18 12:18:35 2008
From: rdeyoe at clarksville.com (Ryk DeYoe)
Date: Fri Jan 18 12:17:55 2008
Subject: [gdal-dev] PGeo driver errors
In-Reply-To: <02eb01c856fd$10bb8ae0$090aa8c0@rdeyoe>
Message-ID: <038501c859f6$290ace20$090aa8c0@rdeyoe>


Ryk DeYoe wrote:
> I'm using the PGeo driver to try to read some ESRI geodatabases to feed
> Mapserver.  I'm running Ubuntu Edgy.  The standard Ubuntu gdal didn't have
> PGeo compiled in so I've compiled gdal 1.3.1 (to match the Ubuntu libs)
with
> PGeo.  I've created the necessary ODBC connections to the mdb files.  I
also
> have the standard mdb-tools package installed.  I'm getting a "stack
> smashing detected" error when trying to read the layers from the mdb file.
> I think I've narrowed it down to reading the SRTEXT field from the
> GDB_SpatialRefs table.  If i put dummy values in the field, it will read
the
> tables and give me layers but of course, the SRS is completely wrong.
I've
> compiled gdal with stack protection turned off and then it just
segfaults...

...

> I have an sql.log file tracing the odbc calls.  Looks ok until it starts
> selecting the srtext values.  I'm not sure but the buffer length seems to
be
> set to 511 where my srtext string is 542 in length.  Could this be the
> problem?  And where can I increase this value?....in the ODBC source?...or
> in gdal? (I've downloaded the odbc source just in case i have to rebuild)
...
> Everything else with gdal seems to run great.  Shape files aren't a
problem
> but our GIS department doesn't update the shape files anymore....they work
> in the geodatabases exclusively now.  Our geotiff aerial photos look very
> nice and the gdaltindex stitched them together pretty simply.  I've been
> trying to find the place to set the buffer size but not being a programmer
> has me at a disadvantage.

Ryk,

This sounds like an old but with the CPL ODBC code.  I suspect you need this
patch:

   http://trac.osgeo.org/gdal/changeset/12531

Presumably there is more info available in the associated bug ticket:

   http://trac.osgeo.org/gdal/ticket/1902

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



>  Thanks Frank, but there's no happiness there.  I'm still getting the same
>  error.  Just for fun, I grabbed the 1.5.0 source and saw that patch in
>  cpl_odbc.cpp also.  Compiled the 1.5.0 source and ran ogrinfo from the
>  gdal/apps directory and it's doing the same thing.  The sql.log file
stops
>  at the same place, selecting srtext on the first record (there are 12
>  layers):


Just a little more progress.  I found the location for increasing the buffer
( szWrkData[1024] in cpl_odbc.cpp ).  Now it seems to read in the whole
string without smashing the stack....then something weird happens somewhere
else. Strings in the SRTEXT file up to 32 chars are ok, but go to 33 chars
and the string gets truncated to 12 chars.  Of course, 12 chars is not
enough to define the SRS (from a 542 char SRTEXT) so the importFromWKT
function fails.

Can anyone point me to where this truncation is occurring?

From josegomez at gmx.net  Fri Jan 18 12:29:03 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Fri Jan 18 12:29:06 2008
Subject: [gdal-dev] HDF V and VR components
In-Reply-To: <4790D16A.6030000@pobox.com>
References: <20080118152323.42850@gmx.net> <4790D16A.6030000@pobox.com>
Message-ID: <20080118172903.82910@gmx.net>

Hi,


> Jose Luis Gomez Dans wrote:
> > Hi, I want to access a number of layers in the MOD09GHK product, which
> are
> > not listed by GDAL (they are 1D datasets). They have shortnames ending
> in
> > "_c" rather than "_1", as is common in most MODIS products.
> > 
> > I have tried using pyhdf to explore these datasets, but I was wondering
> > whether I can read these 1D arrays with GDAL directly.
> I do not believe there is any way to get at these arrays through the GDAL
> interface.

That is a shame. I have managed to get into them and process them using pyhdf, and saved them out using GDAL. It is fairly straightforward to use.

Thanks!
Jose
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
From randre at gmail.com  Fri Jan 18 12:53:53 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri Jan 18 12:53:55 2008
Subject: [gdal-dev] Question about using Python API to GDAL/OGR in a
	"production" environment
Message-ID: <9c2015090801180953s14e9e2e6m22a4e9ac1b9411c7@mail.gmail.com>

I've been using the GDAL and OGR modules in Python scripts for a little
while now to automate a variety of tasks at work.  It's worked very well,
and I would now like to use it in conjunction with Apache and FastCGI to
create some web services that read a variety of different data sources and
serve up KML and custom data strings that feed web-based map API's.
However, I've been strongly cautioned not to do this, as I'm told that GDAL
isn't "thread safe", and that I would need to write some sort of "connection
manager" to manage "things".  This intrigues me, and in no way dissuades me
from trying my idea out, but I'm curious if some of you have used GDAL/OGR
in a similar fashion in a "production" environment?  (Just exactly what
constitutes a 'production', or 'Enterprise' system is also a topic of some
interest to me.)  My use would strictly be "read-only", and using the Python
API.

Any feedback or suggestions of things to keep in mind would be greatly
appreciated.

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/ae30baa5/attachment.html
From sgillies at frii.com  Fri Jan 18 13:16:30 2008
From: sgillies at frii.com (Sean Gillies)
Date: Fri Jan 18 13:16:35 2008
Subject: [gdal-dev] Question about using Python API to GDAL/OGR in
	a	"production" environment
In-Reply-To: <9c2015090801180953s14e9e2e6m22a4e9ac1b9411c7@mail.gmail.com>
References: <9c2015090801180953s14e9e2e6m22a4e9ac1b9411c7@mail.gmail.com>
Message-ID: <4790ECFE.2090100@frii.com>

Roger Andr? wrote:
> I've been using the GDAL and OGR modules in Python scripts for a little
> while now to automate a variety of tasks at work.  It's worked very well,
> and I would now like to use it in conjunction with Apache and FastCGI to
> create some web services that read a variety of different data sources and
> serve up KML and custom data strings that feed web-based map API's.
> However, I've been strongly cautioned not to do this, as I'm told that GDAL
> isn't "thread safe", and that I would need to write some sort of "connection
> manager" to manage "things".  This intrigues me, and in no way dissuades me
> from trying my idea out, but I'm curious if some of you have used GDAL/OGR
> in a similar fashion in a "production" environment?  (Just exactly what
> constitutes a 'production', or 'Enterprise' system is also a topic of some
> interest to me.)  My use would strictly be "read-only", and using the Python
> API.
> 
> Any feedback or suggestions of things to keep in mind would be greatly
> appreciated.
> 
> Roger
> --

Roger,

You'll be fine in read-only mode. You may get advice that you should use
MapServer or GeoServer to do this, but ogr.py combined with KML
templates can do the job just as well. BTW, I'm using mod_wsgi for
Apache at http://zcologia.com/hammock/index.html and
http://zcologia.com/hammock/places.kml and it works fine. Much easier
than FastCGI.

Cheers,
Sean

From mchapman at texelinc.com  Fri Jan 18 13:29:06 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Fri Jan 18 13:32:13 2008
Subject: [gdal-dev] Question about using Python API to GDAL/OGR in
	a"production" environment
In-Reply-To: <9c2015090801180953s14e9e2e6m22a4e9ac1b9411c7@mail.gmail.com>
References: <9c2015090801180953s14e9e2e6m22a4e9ac1b9411c7@mail.gmail.com>
Message-ID: <160901515-1200681126-cardhu_decombobulator_blackberry.rim.net-1606852152-@bxe022.bisx.prod.on.blackberry>

If you know how to correctly synchronize your code execution with critical sections, mutexes, etc then gdal works great in a mt environment.  

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: "Roger Andr?" <randre@gmail.com>

Date: Fri, 18 Jan 2008 09:53:53 
To:gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Question about using Python API to GDAL/OGR in a
	"production" environment


I've been using the GDAL and OGR modules in Python scripts for a little while now to automate a variety of tasks at work.? It's worked very well, and I would now like to use it in conjunction with Apache and FastCGI to create some web services that read a variety of different data sources and serve up KML and custom data strings that feed web-based map API's.? However, I've been strongly cautioned not to do this, as I'm told that GDAL isn't "thread safe", and that I would need to write some sort of "connection manager" to manage "things".? This intrigues me, and in no way dissuades me from trying my idea out, but I'm curious if some of you have used GDAL/OGR in a similar fashion in a "production" environment?? (Just exactly what constitutes a 'production', or 'Enterprise' system is also a topic of some interest to me.)? My use would strictly be "read-only", and using the Python API. 

Any feedback or suggestions of things to keep in mind would be greatly appreciated.

Roger
--
 _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From abhay.menon at gmail.com  Fri Jan 18 13:37:23 2008
From: abhay.menon at gmail.com (abhay menon)
Date: Fri Jan 18 13:37:25 2008
Subject: [gdal-dev] Issues with Java Bindings in 1.5 ...
In-Reply-To: <f3b73b7d0801141310i4ff68413tb215a1e5d5f8a73d@mail.gmail.com>
References: <478BB01D.9000408@sunflower.com>
	<f3b73b7d0801141310i4ff68413tb215a1e5d5f8a73d@mail.gmail.com>
Message-ID: <7a30cd70801181037r4f53dc30n1010ddde29eae94e@mail.gmail.com>

Hi,

 The GDAL Java Bind for GDAL 1.5 got compiled but the GDALTest.Java failed
to compile.

at line 295

cm = poBand.GetRasterColorTable().getIndexColorModel(
                                gdal.GetDataTypeSize(buf_type));

Is the getIndexColorModel method been deprecated is there any other method
that is return ColorModel which is available in GetRasterColorTable ??

Rgds

Abhay

On Jan 15, 2008 2:40 AM, Tamas Szekeres <szekerest@gmail.com> wrote:

> Rick,
>
> You can get further information about the history of the related
> changes from this ticket:
> http://trac.osgeo.org/gdal/ticket/1578
>
> According to the changeset http://trac.osgeo.org/gdal/changeset/11640
> The ColoryEntry is treated as objects for all of the binding instead
> of arrays. Therefore the typemaps for GDALColorEntry in java has
> become outdated.
> It seems to me that these typemaps in the java bindings are tending to
> map GDALColorEntry directly to java/awt/Color which is a target
> language specific type.
>
> I can consider the following 2 trivial options to fix this problem:
>
> 1, Revert the change for java
>
> Index: gdal.i
> ===================================================================
> --- gdal.i      (revision 13527)
> +++ gdal.i      (working copy)
> @@ -258,7 +258,7 @@
>  // GDALColorEntry
>  //
>
>  //************************************************************************
> -#ifndef SWIGPERL
> +#if !definied(SWIGPERL) and !defined(SWIGJAVA)
>  %rename (ColorEntry) GDALColorEntry;
>  typedef struct
>  {
>
>
> 2. Strip the GDALColorEntry typemaps and thread ColorEntry as a separate
> class.
>
> Index: typemaps_java.i
> ===================================================================
> --- typemaps_java.i     (revision 13527)
> +++ typemaps_java.i     (working copy)
> @@ -65,46 +65,9 @@
>
>
>
> -%typemap(in) (GDALColorEntry *) (GDALColorEntry tmp) {
> -  /* %typemap(in) (GDALColorEntry *) (GDALColorEntry tmp) */
> -  $1 = NULL;
> -  float *colorptr = 0;
> -  const jclass Color = jenv->FindClass("java/awt/Color");
> -  const jmethodID colors = jenv->GetMethodID(Color, "getRGBComponents",
> -    "([F)[F");
>
> -  jfloatArray colorArr = jenv->NewFloatArray(4);
> -  colorArr = (jfloatArray)jenv->CallObjectMethod($input, colors,
> colorArr);
>
> -  colorptr = (float *)jenv->GetFloatArrayElements(colorArr, 0);
> -  tmp.c1 = (short)(colorptr[0] * 255);
> -  tmp.c2 = (short)(colorptr[1] * 255);
> -  tmp.c3 = (short)(colorptr[2] * 255);
> -  tmp.c4 = (short)(colorptr[3] * 255);
> -  /*printf( "  %d, %d, %d, %d\n",
> -                    tmp.c1, tmp.c2, tmp.c3, tmp.c4 );*/
> -  $1 = &tmp;
> -}
>
> -%typemap(out) (GDALColorEntry *) {
> -  /* %typemap(out) (GDALColorEntry *) */
> -  const jclass Color = jenv->FindClass("java/awt/Color");
> -  const jmethodID ccon = jenv->GetMethodID(Color, "<init>",
> -    "(IIII)V");
> -  $result = jenv->NewObject(Color, ccon, $1->c1, $1->c2, $1->c3, $1->c4);
> -}
> -
> -%typemap(jni) (GDALColorEntry *) "jobject"
> -%typemap(jtype) (GDALColorEntry *) "java.awt.Color"
> -%typemap(jstype) (GDALColorEntry *) "java.awt.Color"
> -%typemap(javain) (GDALColorEntry *) "$javainput"
> -%typemap(javaout) (GDALColorEntry *) {
> -    return $jnicall;
> -  }
> -
> -
> -
> -
>  /*
>  * Typemap argout of GDAL_GCP* used in Dataset::GetGCPs( )
>  */
>
> I would suggest to apply #2 in the development version since it
> reduces the divergence between the java and the other languages,
> however it breaks the backward compatibility.
>
> Best regards,
>
> Tamas
>
>
>
>
> 2008/1/14, Rick Brownrigg <brownrigg@sunflower.com>:
> > I have spent some time investigating the build issues for the Java
> > bindings in 1.5, and for the most part there are a couple of nearly
> > trivial fixes to the Makefile and the environment settings that are
> > required. However, the most troublesome issue seems to be a swig
> > type-mapping issue, which at present I do not know how to correct. It
> > centers upon the gdal type ColorEntry, which is mapped in
> > ...../swig/include/gdal.i    For reasons I don't understand, the
> > generated file ..../swig/java/org/gdal/gdal/ColorEntry.java tries to
> > pass arguments of type long (a pointer presumably) to the various native
> > settors/gettors implemented in gdalJNI.java (also a generated file),
> > which is expecting java.awt.Color objects instead. Hence the code will
> > not compile.  I don't understand the source of the mismatch,
> > particularly as these two files are generated by swig.
> >
> > Note that this mismatch was present in 1.4.x, but was masked by a #ifdef
> > SWIGCSHARP directive around the mapping in gdal.i.  (and thus there was
> > no Java proxy for the gdal type ColorEntry in 1.4.x (?)).
> >
> > I had indicated I would volunteer to support the Java bindings, but with
> > this experience, I am now not confident  that I can do so in a timely
> > fashion.
> >
> > FWIW...
> > Rick Brownrigg
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080119/3e7e7b15/attachment-0001.html
From warmerdam at pobox.com  Fri Jan 18 13:38:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 13:39:17 2008
Subject: [gdal-dev] [ogr2ogr] Date mapping
In-Reply-To: <4E1D53230994FD45A119B5090DFBF4600183ED32@andalusia.Galdos.local>
References: <4E1D53230994FD45A119B5090DFBF4600183ED32@andalusia.Galdos.local>
Message-ID: <4790F238.8060409@pobox.com>

Andrew T. Louis wrote:
> Hi all,
> 
> I have a shape file containing a ?Date? format property. When using the 
> ogr2ogr tool, to convert this shape file to GML, the date property 
> doesn?t get generated in the GML schema. But the GML file containing the 
> instances has the right values
...
> Anyone else has this issue?

Andrew,

Many drivers, including the GML driver, have no explicit support for the
DATE time either because the format does not support it or because the
driver implementor didn't bother/know to do something about this.  In
such cases the attribute is normally treated as a string.  This is what
is happening with the GML driver.

In theory this could be improved in the GML driver, though in practice
I worry about breaking the fragile GML driver for limited benefit.
Nevertheless, if you feel strongly about this, feel free to prepare a
patch that adds date support to the gml driver.  (It should be submitted
via Trac).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From sgillies at frii.com  Fri Jan 18 13:43:45 2008
From: sgillies at frii.com (Sean Gillies)
Date: Fri Jan 18 13:43:50 2008
Subject: [gdal-dev] Question about using Python API to GDAL/OGR
	in	a"production" environment
In-Reply-To: <160901515-1200681126-cardhu_decombobulator_blackberry.rim.net-1606852152-@bxe022.bisx.prod.on.blackberry>
References: <9c2015090801180953s14e9e2e6m22a4e9ac1b9411c7@mail.gmail.com>
	<160901515-1200681126-cardhu_decombobulator_blackberry.rim.net-1606852152-@bxe022.bisx.prod.on.blackberry>
Message-ID: <4790F361.7000508@frii.com>

And it's easy to stay in synch with Python. In fact, because of the
global interpreter lock, you'll have to really go out of your way to get
in trouble. See

http://linuxgazette.net/107/pai.html

for a nice intro to the GIL. BTW, Python doesn't take threads as
seriously as Java (for example). If you think you need Python threads,
you might want to take a look at the various multi-process modules instead.

Cheers,
Sean

mchapman@texelinc.com wrote:
> If you know how to correctly synchronize your code execution with critical sections, mutexes, etc then gdal works great in a mt environment.  
> 
> Martin
> 
> Sent via BlackBerry by AT&T
> 
> -----Original Message-----
> From: "Roger Andr?" <randre@gmail.com>
> 
> Date: Fri, 18 Jan 2008 09:53:53 
> To:gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Question about using Python API to GDAL/OGR in a
> 	"production" environment
> 
> 
> I've been using the GDAL and OGR modules in Python scripts for a little while now to automate a variety of tasks at work.  It's worked very well, and I would now like to use it in conjunction with Apache and FastCGI to create some web services that read a variety of different data sources and serve up KML and custom data strings that feed web-based map API's.  However, I've been strongly cautioned not to do this, as I'm told that GDAL isn't "thread safe", and that I would need to write some sort of "connection manager" to manage "things".  This intrigues me, and in no way dissuades me from trying my idea out, but I'm curious if some of you have used GDAL/OGR in a similar fashion in a "production" environment?  (Just exactly what constitutes a 'production', or 'Enterprise' system is also a topic of some interest to me.)  My use would strictly be "read-only", and using the Python API. 
> 
> Any feedback or suggestions of things to keep in mind would be greatly appreciated.
> 
> Roger
> --
>  _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Fri Jan 18 14:03:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 14:04:51 2008
Subject: [gdal-dev] PGeo driver errors
In-Reply-To: <038501c859f6$290ace20$090aa8c0@rdeyoe>
References: <038501c859f6$290ace20$090aa8c0@rdeyoe>
Message-ID: <4790F7F5.8050509@pobox.com>

Ryk DeYoe wrote:
> Just a little more progress.  I found the location for increasing the buffer
> ( szWrkData[1024] in cpl_odbc.cpp ).  Now it seems to read in the whole
> string without smashing the stack....then something weird happens somewhere
> else. Strings in the SRTEXT file up to 32 chars are ok, but go to 33 chars
> and the string gets truncated to 12 chars.  Of course, 12 chars is not
> enough to define the SRS (from a 542 char SRTEXT) so the importFromWKT
> function fails.
> 
> Can anyone point me to where this truncation is occurring?


Ryk,

I tried importing the SRS you gave in an earlier message into
OGRSpatialReference and it worked fine.  I can't help but wonder if the
problems you encounter are related to the mdbtool code, or something that
is only a problem in the somewhat antique version of GDAL/OGR you are using.

If you can demonstrate a problem in GDAL trunk (or 1.5.x) in a situation
that does not involve the MDBTools stuff (for instancing passing the wkt
on the commandline to a tool) I'd be more inclined to pursue the issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From simboss1 at gmail.com  Fri Jan 18 14:20:58 2008
From: simboss1 at gmail.com (Simone Giannecchini)
Date: Fri Jan 18 14:21:01 2008
Subject: [gdal-dev] GDAL setMetadata(HashTable) / setMetadata(String) on
	java.
In-Reply-To: <f3b73b7d0801180247m1e63f393ra72efabf7c8b94da@mail.gmail.com>
References: <7221db410801180148m4242401as6fe5cf3f4e5ebc5b@mail.gmail.com>
	<f3b73b7d0801180247m1e63f393ra72efabf7c8b94da@mail.gmail.com>
Message-ID: <961f4d9e0801181120j39ce88a4r87eff4fbf24b1b80@mail.gmail.com>

>
> That might be a java bindings related issue, how the HashTable is
> mapped from the target language to C/C++. That's worthy for a ticket
> as well, however I'm not sure whether we currently have an active java
> bindings maintainer or not.

As far as I know Andrea Aime volunteered in the past as the java
bindings maintainer but then I am not sure if he stepped down or not.
Anyway me and Daniele would be interested in volunteering for
maintaing the java bindings, at least the raster side of them, since
we use them quite a lot (see https://imageio-ext.dev.java.net/) but I
am not sure which are the right steps to take or even if this is the
right way start with this proposal.


Regards,
Simone.

-- 
-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions S.A.S.
Via Carignoni 51
55041  Camaiore (LU)
Italy

phone: +39 0584983027
fax:      +39 0584983027
mob:    +39 333 8128928


http://www.geo-solutions.it

-------------------------------------------------------
From leretha.childress at baronservices.com  Fri Jan 18 14:41:10 2008
From: leretha.childress at baronservices.com (LeRetha Childress)
Date: Fri Jan 18 14:40:59 2008
Subject: [gdal-dev] grib2 support
Message-ID: <064DCBC67BD04E78A79291FFAB922381@lerethac>

Is there any type of grib2 support in gdal now?

And if not is there a possibility of it be added sometime in the near
future?

 

LeRetha

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/851cb3ac/attachment.html
From warmerdam at pobox.com  Fri Jan 18 14:45:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 14:45:46 2008
Subject: [gdal-dev] GDAL setMetadata(HashTable) / setMetadata(String)
	on java.
In-Reply-To: <961f4d9e0801181120j39ce88a4r87eff4fbf24b1b80@mail.gmail.com>
References: <7221db410801180148m4242401as6fe5cf3f4e5ebc5b@mail.gmail.com>
	<f3b73b7d0801180247m1e63f393ra72efabf7c8b94da@mail.gmail.com>
	<961f4d9e0801181120j39ce88a4r87eff4fbf24b1b80@mail.gmail.com>
Message-ID: <479101CD.8060105@pobox.com>

Simone Giannecchini wrote:
>> That might be a java bindings related issue, how the HashTable is
>> mapped from the target language to C/C++. That's worthy for a ticket
>> as well, however I'm not sure whether we currently have an active java
>> bindings maintainer or not.
> 
> As far as I know Andrea Aime volunteered in the past as the java
> bindings maintainer but then I am not sure if he stepped down or not.
> Anyway me and Daniele would be interested in volunteering for
> maintaing the java bindings, at least the raster side of them, since
> we use them quite a lot (see https://imageio-ext.dev.java.net/) but I
> am not sure which are the right steps to take or even if this is the
> right way start with this proposal.

Simone,

I believe Andrea no longer had the time/interest to pursue the Java
bindings.  I would be pleased to have you and/or Daniele take on the task.
There isn't really any official designation as maintainer for a particular
binding so it is more of a convention or understanding.

Since neither of you are currently have commit priveledges, you can start
by submitting fixes via Trac.  After a few of these we can raise a motion
to add grant commit priveledges.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jingmuyang at aol.com  Fri Jan 18 14:48:16 2008
From: jingmuyang at aol.com (jingmuyang@aol.com)
Date: Fri Jan 18 14:48:22 2008
Subject: [gdal-dev] GDAL 1.5.0 Perl Binding on Cygwin
Message-ID: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>

I have successfully built GDAL 1.5.0 Perl binding on Cygwin and the
followings might be helpful for those who experience problems.





1. Go to directory gdal-1.5.0/swig/perl and run 'perl
Makefile.PL'.? The following four Makefiles should be created if
it succeeds:





Makefile_Geo__GDAL


Makefile_Geo__GDAL__Const


Makefile_Geo__OGR


Makefile_Geo__OSR





2. Edit each of the four Makefiles by appending -lstdc++ after each -lgdal and save them.





3. Run make using each of the four Makefiles as follows:





make -f Makefile_Geo__GDAL


make -f Makefile_Geo__GDAL__Const


make -f Makefile_Geo__OGR


make -f Makefile_Geo__OSR





4. Install the Perl Geo::GDAL package by running





make -f Makefile_Geo__GDAL install





That it.? Enjoy!





Jim


________________________________________________________________________
More new features than ever.  Check out the new AOL Mail ! - http://webmail.aol.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080118/2abbf387/attachment.html
From warmerdam at pobox.com  Fri Jan 18 14:55:25 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 14:55:59 2008
Subject: [gdal-dev] Adding Datums to GDAL
In-Reply-To: <EB1E7CB92F5B35459E0B926D2A614DB6168A3A@EXCHANGE19.fed.cclrc.ac.uk>
References: <EB1E7CB92F5B35459E0B926D2A614DB6168A36@EXCHANGE19.fed.cclrc.ac.uk>
	<EB1E7CB92F5B35459E0B926D2A614DB6168A3A@EXCHANGE19.fed.cclrc.ac.uk>
Message-ID: <4791042D.9060905@pobox.com>

Pascoe, S (Stephen) wrote:
> OK I was showing my naivety with thinking GDAL didn't have EPSG:27700 
> pre-configured.  Please ignore the the first half of my query.  However, 
> having reinstalled Proj4 (4.6.0) and gdal-1.5.0, I still have the same 
> problem:
>  
> $ gdalwarp -t_srs EPSG:27700 -te -100000 -100000 600000 600000 -ts 400 
> 400 map.tif trans.tif
> ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49 
> +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy 
> +datum=OSB36 +units=m +no_defs '.

Stephen,

I see the OGRSpatialReference:exportToProj4() method has a bug and is
translating this as datum=OSB36 instead of datum=OSGB36 as it ought.  I
have filed a bug and will fix it shortly in trunk and 1.5 branches.

   http://trac.osgeo.org/gdal/ticket/2160

Briefly though, just edit gdal/ogr/ogr_srs_proj4.cpp and change OSB36
to OSGB36 to fix the problem.

Thanks for bringing this to my attention.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Fri Jan 18 15:04:36 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 18 15:04:37 2008
Subject: [gdal-dev] GDAL setMetadata(HashTable) / setMetadata(String) on
	java.
In-Reply-To: <961f4d9e0801181120j39ce88a4r87eff4fbf24b1b80@mail.gmail.com>
References: <7221db410801180148m4242401as6fe5cf3f4e5ebc5b@mail.gmail.com>
	<f3b73b7d0801180247m1e63f393ra72efabf7c8b94da@mail.gmail.com>
	<961f4d9e0801181120j39ce88a4r87eff4fbf24b1b80@mail.gmail.com>
Message-ID: <f3b73b7d0801181204x76b0e578t429f84b5b09d93f@mail.gmail.com>

Simone,

That would be great if you and Daniele could join in with a long term
commitment. I'm sure we could provide help with solving the SWIG and
the gdal core related issues if needed, however we have not too much
experience with the java internals and testing.

Frank,

Does someone monitor the java related tickets this time?



Best regards,

Tamas



2008/1/18, Simone Giannecchini <simboss1@gmail.com>:
> >
> > That might be a java bindings related issue, how the HashTable is
> > mapped from the target language to C/C++. That's worthy for a ticket
> > as well, however I'm not sure whether we currently have an active java
> > bindings maintainer or not.
>
> As far as I know Andrea Aime volunteered in the past as the java
> bindings maintainer but then I am not sure if he stepped down or not.
> Anyway me and Daniele would be interested in volunteering for
> maintaing the java bindings, at least the raster side of them, since
> we use them quite a lot (see https://imageio-ext.dev.java.net/) but I
> am not sure which are the right steps to take or even if this is the
> right way start with this proposal.
>
>
> Regards,
> Simone.
>
> --
> -------------------------------------------------------
> Eng. Simone Giannecchini
> President /CEO GeoSolutions S.A.S.
> Via Carignoni 51
> 55041  Camaiore (LU)
> Italy
>
> phone: +39 0584983027
> fax:      +39 0584983027
> mob:    +39 333 8128928
>
>
> http://www.geo-solutions.it
>
> -------------------------------------------------------
>
From gok at aerometric-ak.com  Fri Jan 18 15:17:31 2008
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Fri Jan 18 15:18:39 2008
Subject: [gdal-dev] outline point cloud
Message-ID: <3054411AF4728548AD6D7137190D56B30C474C@admin1.aeromap.com>

Hello.
I want create outline 2d polygon around points cloud.
Is there any tools in GDAL to approach this task?

Thanks.
gok
From stpoppy at ptd.net  Fri Jan 18 15:41:41 2008
From: stpoppy at ptd.net (cartrite)
Date: Fri Jan 18 15:41:31 2008
Subject: [gdal-dev] adding the pds format ISIS
Message-ID: <1200688901.3763.3.camel@linux-o863.site>

Hi,
I was wondering how one would add a PDS, ISIS3 reader. I didn't see an
option in configure help. There is a folder under formats. And I can run
make from the pds folder, but I'm not sure how to link.
Steve Popovich

From szekerest at gmail.com  Fri Jan 18 15:42:18 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 18 15:42:21 2008
Subject: [gdal-dev] OGR style fields
Message-ID: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>

Folks,

Currently only a few of the OGR data sources have built in style
support, however we might want to preserve the style information when
copying the data from one data source to another.
As of the implementation of GDAL RFC 6 we could do such things easily
regardless of the target data source type, like for example:

ogr2ogr -overwrite -f "ESRI Shapefile" -sql "select *,OGR_STYLE from
rivers where OGR_GEOMETRY='POLYGON'" rivers.shp rivers.tab

would copy all of the polygons from a mapinfo layer and add a new
field containing the style string for each of the features.

It would be quite trivial to prepare a data source independent support
to consume this information and return meaningful value when
OGRFeature::GetStyleString is called.

As the benefit of this change we could consider each of these layer as
having internal style information. For example we could use the
mapserver STYLEITEM "AUTO" functionality with these layers.

The most trivial implementation to achieve this would changing
OGRFeature::GetStyleString as follows:

const char *OGRFeature::GetStyleString()
{
    int  iStyleField;

    if (m_pszStyleString)
        return m_pszStyleString;

    iStyleField = GetFieldIndex("OGR_STYLE");
    if (iStyleField >= 0)
        return GetFieldAsString(iStyleField);

    return NULL;
}

What do you think about this kind of addition?

Best regards,

Tamas
From warmerdam at pobox.com  Fri Jan 18 15:44:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 15:45:37 2008
Subject: [gdal-dev] outline point cloud
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C474C@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C474C@admin1.aeromap.com>
Message-ID: <47910FA0.8080808@pobox.com>

Gennady Khokhorin wrote:
> Hello.
> I want create outline 2d polygon around points cloud.
> Is there any tools in GDAL to approach this task?

Gok,

I think if you turn the points into a MULTIPOINT OGRGeometry
you can call ConvexHull() on the collection to get a minimum
bounding convex polygon.  Note that you need to use a build with
GEOS support as GEOS is used to implement this method.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Jan 18 15:54:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 15:55:19 2008
Subject: [gdal-dev] (Swiss) SPOT projection - not able to identify it
In-Reply-To: <E71282AE-8222-48F5-A43E-A3A5EF7881C0@grid.unep.ch>
References: <E71282AE-8222-48F5-A43E-A3A5EF7881C0@grid.unep.ch>
Message-ID: <47911218.4070402@pobox.com>

Stefan Schwarzer wrote:
> Hi there,
> 
> I have a SPOT image for some part of Switzerland. The metadata are a bit 
> vague, it's saying:
...
> The GDALINFO gives me this:
> 
> gridmac7:~ schwarzer$ 
> /Library/Frameworks/GDAL.framework/Versions/1.4/Programs/gdalinfo 
> /Volumes/couvagl/data/source\ data/SPOT/tif/SITL-Spot-5m-RGB.tif
> Driver: GTiff/GeoTIFFSize is 13000, 12000
> Coordinate System is:
> PROJCS["OM          D514",
>     GEOGCS["unnamed",
>         DATUM["unknown",
>             SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Hotine_Oblique_Mercator"],
>     PARAMETER["latitude_of_center",46.95240555555556],
>     PARAMETER["longitude_of_center",7.439583333333333],
>     PARAMETER["azimuth",90],
>     PARAMETER["rectified_grid_angle",90],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",600000],
>     PARAMETER["false_northing",200000],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
...
> But what kind of projection is this? 
> 
> Normally I would have said it's in the national system, which is CH1903 
> has the same Projection parameters. But I am confused due to
> 
> 1. PROJCS["OM          D514"
> 2. GEOGCS["unnamed"
> 3. DATUM["unknown",
> 
> also, the metadata are talkingabout WGS84....
> 
> Can some one clear the picture for me please?

Stefan,

I imagine this is intended to be CH1903.  The PROJCS name "OM     D514"
indicates that this is a PCI generated TIFF file (from Spot!) and based on
my intimate knowledge of that GeoTIFF writer I suspect it is not writing
out the normal EPSG datum code for the file so GDAL ends up with "unnamed".

It might be interesting to see a "listgeo" report on this file.

BTW, I'm not positive that Hotine Oblique Mercator is really the best way
to translate Swiss Oblique Mercator.  I'm not sure if this will invalidate
reprojection results within GDAL or not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Jan 18 15:56:58 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 15:57:28 2008
Subject: [gdal-dev] OGR style fields
In-Reply-To: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
References: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
Message-ID: <4791129A.3020902@pobox.com>

Tamas Szekeres wrote:
> Folks,
> 
> Currently only a few of the OGR data sources have built in style
> support, however we might want to preserve the style information when
> copying the data from one data source to another.
> As of the implementation of GDAL RFC 6 we could do such things easily
> regardless of the target data source type, like for example:
> 
> ogr2ogr -overwrite -f "ESRI Shapefile" -sql "select *,OGR_STYLE from
> rivers where OGR_GEOMETRY='POLYGON'" rivers.shp rivers.tab
> 
> would copy all of the polygons from a mapinfo layer and add a new
> field containing the style string for each of the features.
> 
> It would be quite trivial to prepare a data source independent support
> to consume this information and return meaningful value when
> OGRFeature::GetStyleString is called.
> 
> As the benefit of this change we could consider each of these layer as
> having internal style information. For example we could use the
> mapserver STYLEITEM "AUTO" functionality with these layers.
> 
> The most trivial implementation to achieve this would changing
> OGRFeature::GetStyleString as follows:
> 
> const char *OGRFeature::GetStyleString()
> {
>     int  iStyleField;
> 
>     if (m_pszStyleString)
>         return m_pszStyleString;
> 
>     iStyleField = GetFieldIndex("OGR_STYLE");
>     if (iStyleField >= 0)
>         return GetFieldAsString(iStyleField);
> 
>     return NULL;
> }
> 
> What do you think about this kind of addition?

Tamas,

I would not object to this though I'd note I plan to prepare a MapServer
RFC to allow using OGR style strings from any datasource (not just through
CONNECTIONTYPE OGR) in the next few weeks.  So from a mapserver point of
view, I don't think this change is particularly necessary.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Jan 18 15:58:11 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 15:58:45 2008
Subject: [gdal-dev] adding the pds format ISIS
In-Reply-To: <1200688901.3763.3.camel@linux-o863.site>
References: <1200688901.3763.3.camel@linux-o863.site>
Message-ID: <479112E3.2030409@pobox.com>

cartrite wrote:
> Hi,
> I was wondering how one would add a PDS, ISIS3 reader. I didn't see an
> option in configure help. There is a folder under formats. And I can run
> make from the pds folder, but I'm not sure how to link.

Steve,

In GDAL 1.5.0 the PDS, ISIS2, and ISIS3 drivers should be built into GDAL
by default.  They do not depend on external libraries so no configure
options are required.

You can confirm availability of a driver using the --format switch.

eg.

warmerda@gdal64[27]% gdalinfo --format isis3
Format Details:
   Short Name: ISIS3
   Long Name: USGS Astrogeology ISIS cube (Version 3)
   Help Topic: frmt_various.html#ISIS3

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Fri Jan 18 16:09:08 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 18 16:09:12 2008
Subject: [gdal-dev] Issues with Java Bindings in 1.5 ...
In-Reply-To: <7a30cd70801181037r4f53dc30n1010ddde29eae94e@mail.gmail.com>
References: <478BB01D.9000408@sunflower.com>
	<f3b73b7d0801141310i4ff68413tb215a1e5d5f8a73d@mail.gmail.com>
	<7a30cd70801181037r4f53dc30n1010ddde29eae94e@mail.gmail.com>
Message-ID: <f3b73b7d0801181309w1a1ada06n7bd4273a842d6204@mail.gmail.com>

Hi,

That might be a side effect of the issue below. I guess each of my
suggestions would provide a fix for it.

However I personally don't favour adding much of the target language
specific things in the bindings. It would be more convenient to
implement this at the other side of the API by using the ColorTable
and ColorEntry classes.

Best regards,

Tamas



2008/1/18, abhay menon <abhay.menon@gmail.com>:
> Hi,
>
>  The GDAL Java Bind for GDAL 1.5 got compiled but the GDALTest.Java failed
> to compile.
>
> at line 295
>
> cm = poBand.GetRasterColorTable().getIndexColorModel(
>                                 gdal.GetDataTypeSize (buf_type));
>
> Is the getIndexColorModel method been deprecated is there any other method
> that is return ColorModel which is available in GetRasterColorTable ??
>
> Rgds
>
> Abhay
>
>
>  On Jan 15, 2008 2:40 AM, Tamas Szekeres <szekerest@gmail.com> wrote:
> > Rick,
> >
> > You can get further information about the history of the related
> > changes from this ticket:
> > http://trac.osgeo.org/gdal/ticket/1578
> >
> > According to the changeset
> http://trac.osgeo.org/gdal/changeset/11640
> > The ColoryEntry is treated as objects for all of the binding instead
> > of arrays. Therefore the typemaps for GDALColorEntry in java has
> > become outdated.
> > It seems to me that these typemaps in the java bindings are tending to
> > map GDALColorEntry directly to java/awt/Color which is a target
> > language specific type.
> >
> > I can consider the following 2 trivial options to fix this problem:
> >
> > 1, Revert the change for java
> >
> > Index: gdal.i
> >
> ===================================================================
> > --- gdal.i      (revision 13527)
> > +++ gdal.i      (working copy)
> > @@ -258,7 +258,7 @@
> >  // GDALColorEntry
> >  //
> >
> //************************************************************************
> > -#ifndef SWIGPERL
> > +#if !definied(SWIGPERL) and !defined(SWIGJAVA)
> >  %rename (ColorEntry) GDALColorEntry;
> >  typedef struct
> >  {
> >
> >
> > 2. Strip the GDALColorEntry typemaps and thread ColorEntry as a separate
> class.
> >
> > Index: typemaps_java.i
> >
> ===================================================================
> > --- typemaps_java.i     (revision 13527)
> > +++ typemaps_java.i     (working copy)
> > @@ -65,46 +65,9 @@
> >
> >
> >
> > -%typemap(in) (GDALColorEntry *) (GDALColorEntry tmp) {
> > -  /* %typemap(in) (GDALColorEntry *) (GDALColorEntry tmp) */
> > -  $1 = NULL;
> > -  float *colorptr = 0;
> > -  const jclass Color =
> jenv->FindClass("java/awt/Color");
> > -  const jmethodID colors = jenv->GetMethodID(Color, "getRGBComponents",
> > -    "([F)[F");
> >
> > -  jfloatArray colorArr = jenv->NewFloatArray(4);
> > -  colorArr = (jfloatArray)jenv->CallObjectMethod($input,
> colors, colorArr);
> >
> > -  colorptr = (float
> *)jenv->GetFloatArrayElements(colorArr, 0);
> > -  tmp.c1 = (short)(colorptr[0] * 255);
> > -  tmp.c2 = (short)(colorptr[1] * 255);
> > -  tmp.c3 = (short)(colorptr[2] * 255);
> > -  tmp.c4 = (short)(colorptr[3] * 255);
> > -  /*printf( "  %d, %d, %d, %d\n",
> > -                    tmp.c1, tmp.c2, tmp.c3, tmp.c4 );*/
> > -  $1 = &tmp;
> > -}
> >
> > -%typemap(out) (GDALColorEntry *) {
> > -  /* %typemap(out) (GDALColorEntry *) */
> > -  const jclass Color =
> jenv->FindClass("java/awt/Color");
> > -  const jmethodID ccon = jenv->GetMethodID(Color, "<init>",
> > -    "(IIII)V");
> > -  $result = jenv->NewObject(Color, ccon, $1->c1, $1->c2, $1->c3, $1->c4);
> > -}
> > -
> > -%typemap(jni) (GDALColorEntry *) "jobject"
> > -%typemap(jtype) (GDALColorEntry *) "java.awt.Color"
> > -%typemap(jstype) (GDALColorEntry *) "java.awt.Color"
> > -%typemap(javain) (GDALColorEntry *) "$javainput"
> > -%typemap(javaout) (GDALColorEntry *) {
> > -    return $jnicall;
> > -  }
> > -
> > -
> > -
> > -
> >  /*
> >  * Typemap argout of GDAL_GCP* used in Dataset::GetGCPs( )
> >  */
> >
> > I would suggest to apply #2 in the development version since it
> > reduces the divergence between the java and the other languages,
> > however it breaks the backward compatibility.
> >
> > Best regards,
> >
> > Tamas
> >
> >
> >
> >
> > 2008/1/14, Rick Brownrigg < brownrigg@sunflower.com>:
> >
> >
> >
> > > I have spent some time investigating the build issues for the Java
> > > bindings in 1.5, and for the most part there are a couple of nearly
> > > trivial fixes to the Makefile and the environment settings that are
> > > required. However, the most troublesome issue seems to be a swig
> > > type-mapping issue, which at present I do not know how to correct. It
> > > centers upon the gdal type ColorEntry, which is mapped in
> > > ...../swig/include/gdal.i    For reasons I don't understand, the
> > > generated file
> ..../swig/java/org/gdal/gdal/ColorEntry.java tries to
> > > pass arguments of type long (a pointer presumably) to the various native
> > > settors/gettors implemented in gdalJNI.java (also a generated file),
> > > which is expecting java.awt.Color objects instead. Hence the code will
> > > not compile.  I don't understand the source of the mismatch,
> > > particularly as these two files are generated by swig.
> > >
> > > Note that this mismatch was present in 1.4.x, but was masked by a #ifdef
> > > SWIGCSHARP directive around the mapping in gdal.i.  (and thus there was
> > > no Java proxy for the gdal type ColorEntry in 1.4.x (?)).
> > >
> > > I had indicated I would volunteer to support the Java bindings, but with
> > > this experience, I am now not confident  that I can do so in a timely
> > > fashion.
> > >
> > > FWIW...
> > > Rick Brownrigg
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
From szekerest at gmail.com  Fri Jan 18 16:17:35 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 18 16:17:40 2008
Subject: [gdal-dev] OGR style fields
In-Reply-To: <4791129A.3020902@pobox.com>
References: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
	<4791129A.3020902@pobox.com>
Message-ID: <f3b73b7d0801181317g1f73a3cnc6179cf503dd701@mail.gmail.com>

Frank,

Mapserver is only a subset of the areas where this change would be
beneficial. There might be other renderers that would utilize the OGR
style support. I don't think this would eliminate the need of that
mapserver related RFC, though.

Would this change need an RFC on an explicit motion to vote on?

Best regards,

Tamas


2008/1/18, Frank Warmerdam <warmerdam@pobox.com>:
> Tamas Szekeres wrote:
> > Folks,
> >
> > Currently only a few of the OGR data sources have built in style
> > support, however we might want to preserve the style information when
> > copying the data from one data source to another.
> > As of the implementation of GDAL RFC 6 we could do such things easily
> > regardless of the target data source type, like for example:
> >
> > ogr2ogr -overwrite -f "ESRI Shapefile" -sql "select *,OGR_STYLE from
> > rivers where OGR_GEOMETRY='POLYGON'" rivers.shp rivers.tab
> >
> > would copy all of the polygons from a mapinfo layer and add a new
> > field containing the style string for each of the features.
> >
> > It would be quite trivial to prepare a data source independent support
> > to consume this information and return meaningful value when
> > OGRFeature::GetStyleString is called.
> >
> > As the benefit of this change we could consider each of these layer as
> > having internal style information. For example we could use the
> > mapserver STYLEITEM "AUTO" functionality with these layers.
> >
> > The most trivial implementation to achieve this would changing
> > OGRFeature::GetStyleString as follows:
> >
> > const char *OGRFeature::GetStyleString()
> > {
> >     int  iStyleField;
> >
> >     if (m_pszStyleString)
> >         return m_pszStyleString;
> >
> >     iStyleField = GetFieldIndex("OGR_STYLE");
> >     if (iStyleField >= 0)
> >         return GetFieldAsString(iStyleField);
> >
> >     return NULL;
> > }
> >
> > What do you think about this kind of addition?
>
> Tamas,
>
> I would not object to this though I'd note I plan to prepare a MapServer
> RFC to allow using OGR style strings from any datasource (not just through
> CONNECTIONTYPE OGR) in the next few weeks.  So from a mapserver point of
> view, I don't think this change is particularly necessary.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
From warmerdam at pobox.com  Fri Jan 18 16:24:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 16:24:30 2008
Subject: [gdal-dev] OGR style fields
In-Reply-To: <f3b73b7d0801181317g1f73a3cnc6179cf503dd701@mail.gmail.com>
References: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
	<4791129A.3020902@pobox.com>
	<f3b73b7d0801181317g1f73a3cnc6179cf503dd701@mail.gmail.com>
Message-ID: <479118F2.60606@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> Mapserver is only a subset of the areas where this change would be
> beneficial. There might be other renderers that would utilize the OGR
> style support. I don't think this would eliminate the need of that
> mapserver related RFC, though.
> 
> Would this change need an RFC on an explicit motion to vote on?

Tamas,

I think the notification of intent on the mailing list is sufficient
(as you have already done).  Go ahead and make your change and if there
are objections that arise we might reconsider.  But I don't anticipate
any problems.

Do please make a brief note in the method docs about this special
behavior for an attributed named ogr_style.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ari.jolma at tkk.fi  Fri Jan 18 17:09:10 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Fri Jan 18 17:07:50 2008
Subject: [gdal-dev] GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
References: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
Message-ID: <47912386.9080100@tkk.fi>

jingmuyang@aol.com kirjoitti:
> I have successfully built GDAL 1.5.0 Perl binding on Cygwin and the 
> followings might be helpful for those who experience problems.
>
> 2. Edit each of the four Makefiles by appending -lstdc++ after each 
> -lgdal and save them.

If you tell me how to detect Cygwin reliably I can add this to Makefile.PL

>
> 3. Run make using each of the four Makefiles as follows:
>
> make -f Makefile_Geo__GDAL
> make -f Makefile_Geo__GDAL__Const
> make -f Makefile_Geo__OGR
> make -f Makefile_Geo__OSR

"make build" does this, sorry, I know its non-standard outside of gdal, 
where it is standard :)

>
> 4. Install the Perl Geo::GDAL package by running
>
> make -f Makefile_Geo__GDAL install

"make install" should do this

>
> That it.  Enjoy!
>
> Jim

Cheers,

Ari

>
> ------------------------------------------------------------------------
> More new features than ever. Check out the new AOL Mail 
> <http://o.aolcdn.com/cdn.webmail.aol.com/mailtour/aol/en-us/text.htm?ncid=aolcmp00050000000003>!
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Fri Jan 18 18:06:03 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 18:06:28 2008
Subject: [gdal-dev] Re: Motion: Add Even Rouault to GDAL PSC
In-Reply-To: <4783D0BE.6040901@pobox.com>
References: <4783D0BE.6040901@pobox.com>
Message-ID: <479130DB.6080206@pobox.com>

Frank Warmerdam wrote:
> Motion: To add Even Rouault to the GDAL PSC.

Folks,

This motion passes with support from myself, Howard, Daniel, Tamas and
Andrey.   Welcome to the project steering committee Even!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From stpoppy at ptd.net  Fri Jan 18 18:18:54 2008
From: stpoppy at ptd.net (cartrite)
Date: Fri Jan 18 18:18:42 2008
Subject: [gdal-dev] adding the pds format ISIS
In-Reply-To: <479112E3.2030409@pobox.com>
References: <1200688901.3763.3.camel@linux-o863.site>
	<479112E3.2030409@pobox.com>
Message-ID: <1200698334.4285.9.camel@linux-o863.site>

Hi Frank,
I didn't see it on the list of formats after configure ran and someone
else had trouble with reading an ISIS3 cub. And none of the object files
in the pds folder were produced after running make.

I became aware of the problem at the ISIS support forum. According to a
user, GDAL 1.5.0 was built and got an error when trying gdal_translate
on the cub.
http://isis.astrogeology.usgs.gov/IsisSupport/viewtopic.php?p=5477#5477

Steve


On Fri, 2008-01-18 at 15:58 -0500, Frank Warmerdam wrote:
> cartrite wrote:
> > Hi,
> > I was wondering how one would add a PDS, ISIS3 reader. I didn't see an
> > option in configure help. There is a folder under formats. And I can run
> > make from the pds folder, but I'm not sure how to link.
> 
> Steve,
> 
> In GDAL 1.5.0 the PDS, ISIS2, and ISIS3 drivers should be built into GDAL
> by default.  They do not depend on external libraries so no configure
> options are required.
> 
> You can confirm availability of a driver using the --format switch.
> 
> eg.
> 
> warmerda@gdal64[27]% gdalinfo --format isis3
> Format Details:
>    Short Name: ISIS3
>    Long Name: USGS Astrogeology ISIS cube (Version 3)
>    Help Topic: frmt_various.html#ISIS3
> 
> Best regards,

From warmerdam at pobox.com  Fri Jan 18 18:23:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 18:24:00 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <20080115070349.GA11946@ak4719.spb.edu>
References: <478B9E9A.5010402@pobox.com> <478C3AB0.7010102@pobox.com>
	<478C3C8C.6070804@pobox.com>
	<20080115070349.GA11946@ak4719.spb.edu>
Message-ID: <479134F6.4020802@pobox.com>

Andrey Kiselev wrote:
> On Mon, Jan 14, 2008 at 11:54:36PM -0500, Frank Warmerdam wrote:
>>  The CPL config option "IGNORE_AXIS_ORIENTATION" may also be set to
>>  "TRUE" to disable OGRCoordinateTransformation's checking, and
>>  application of axis orientation changes. Effectively this is a
>>  backdoor to disable the core effects of the RFC.
> 
> Frank,
> 
> Do we have any convention on GDAL option naming? Some of them starts
> with "GDAL_" prefix, but this one not. I am suggesting to rename it in
> "GDAL_IGNORE_AXIS_ORIENTATION" to be more uniform and clear.

Andrey,

I have adjusted the RFC accordingly, though we haven't generally been
very consistent with CPL config option naming in the past.

Unfortunately our two business days (and a bit) have passed without
getting enough support for the RFC to pass.  Under the assumption (hope!)
that folks have just been to busy to review it, I'm going to keep the
motion alive for an extra two business days (till Tuesday evening).

Any PSC members who have concerns are encouraged to raise them.  If there
isn't support by then, I guess I'll have to shelve this plan and see what
alternative I can come up with.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Jan 18 18:27:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 18 18:28:12 2008
Subject: [gdal-dev] adding the pds format ISIS
In-Reply-To: <1200698334.4285.9.camel@linux-o863.site>
References: <1200688901.3763.3.camel@linux-o863.site>
	<479112E3.2030409@pobox.com>
	<1200698334.4285.9.camel@linux-o863.site>
Message-ID: <479135F0.7090408@pobox.com>

cartrite wrote:
> Hi Frank,
> I didn't see it on the list of formats after configure ran and someone
> else had trouble with reading an ISIS3 cub. And none of the object files
> in the pds folder were produced after running make.
> 
> I became aware of the problem at the ISIS support forum. According to a
> user, GDAL 1.5.0 was built and got an error when trying gdal_translate
> on the cub.
> http://isis.astrogeology.usgs.gov/IsisSupport/viewtopic.php?p=5477#5477

Steve,

I suspect the driver is failing to recognise that particular ISIS3 cube
for some particular reason.  In particular the .cub parser is rather
sensitive and if the .qub keywords don't parse properly it generally
gives up and assumes the product isn't actually an ISIS3 file.

If you, or Ross can file a trac ticket with a pointer to the problem
dataset somewhere I can fetch it from, I'd be pleased to look into and
fix the problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From hobu.inc at gmail.com  Fri Jan 18 18:31:32 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Jan 18 18:33:44 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <479134F6.4020802@pobox.com>
References: <478B9E9A.5010402@pobox.com> <478C3AB0.7010102@pobox.com>
	<478C3C8C.6070804@pobox.com>
	<20080115070349.GA11946@ak4719.spb.edu>
	<479134F6.4020802@pobox.com>
Message-ID: <D2B8D391-766D-4A72-AC34-95201F6751F5@gmail.com>


On Jan 18, 2008, at 5:23 PM, Frank Warmerdam wrote:

> Andrey Kiselev wrote:
>> On Mon, Jan 14, 2008 at 11:54:36PM -0500, Frank Warmerdam wrote:
>>> The CPL config option "IGNORE_AXIS_ORIENTATION" may also be set to
>>> "TRUE" to disable OGRCoordinateTransformation's checking, and
>>> application of axis orientation changes. Effectively this is a
>>> backdoor to disable the core effects of the RFC.
>> Frank,
>> Do we have any convention on GDAL option naming? Some of them starts
>> with "GDAL_" prefix, but this one not. I am suggesting to rename it  
>> in
>> "GDAL_IGNORE_AXIS_ORIENTATION" to be more uniform and clear.
>
> Andrey,
>
> I have adjusted the RFC accordingly, though we haven't generally been
> very consistent with CPL config option naming in the past.
>
> Unfortunately our two business days (and a bit) have passed without
> getting enough support for the RFC to pass.  Under the assumption  
> (hope!)
> that folks have just been to busy to review it, I'm going to keep the
> motion alive for an extra two business days (till Tuesday evening).
>
> Any PSC members who have concerns are encouraged to raise them.  If  
> there
> isn't support by then, I guess I'll have to shelve this plan and see  
> what
> alternative I can come up with.

I am +1 on this RFC, especially with the CPL config option that allows  
a user to totally shut axis guessing off.  I admit to being slightly  
nervous about turning this stuff on by default, however.  If we start  
seeing lots of problems with it, I suppose we could flip the bit on it  
and have the CPL option be the thing that turns it on...

Howard
From dstahlke at gi.alaska.edu  Fri Jan 18 18:41:13 2008
From: dstahlke at gi.alaska.edu (Dan Stahlke)
Date: Fri Jan 18 18:41:15 2008
Subject: [gdal-dev] Re: Open source API to convert raster to polygons? (
 Roger Andr? )
In-Reply-To: <20080118170007.722ACE00F01@lists.osgeo.org>
References: <20080118170007.722ACE00F01@lists.osgeo.org>
Message-ID: <47913919.6020705@gi.alaska.edu>

I have a C program that will create a polygon around the non-zero pixels 
of an image.  It was written for Unix so I don't know how hard it would 
be to get it to compile in Windows.  The program is fast though - the 
reading of the image from disk takes as long as the actual polygon 
tracing.  There are many options available including the ability to use 
the Douglas-Peucker algorithm to reduce the number of points in the 
polygon.  Output is in WKT format and can be either in the projection of 
the source image or in longitude/latitude.  Here is the link to the 
source code:
http://www.gina.alaska.edu/page.xml?group=projects&page=gdalscripts

gdal-dev-request@lists.osgeo.org wrote:
> Hi Ricardo,
>
> I had to do the same thing yesterday and wrote the script that's 
> attached here.  It will read a raster data file and create a polygon 
> for each pixel that does not have a value of 0.0.  The input, output 
> and pixel value are all hard-coded, and the script is pretty crude, 
> but it seems to work.  I'll warn you ahead of time that the shapefiles 
> it creates are large, with a very high feature count. Oh, and I make 
> no attempt to assign SRS, the shapefile will be in whatever projection 
> the input raster is in.
>
> Hope that helps,
>
> Roger
> --
> PS - If anyone else reads this and has suggestions for optimizing 
> performance, I would really welcome them.

From stpoppy at ptd.net  Fri Jan 18 19:08:07 2008
From: stpoppy at ptd.net (cartrite)
Date: Fri Jan 18 19:07:54 2008
Subject: [gdal-dev] adding the pds format ISIS
In-Reply-To: <479112E3.2030409@pobox.com>
References: <1200688901.3763.3.camel@linux-o863.site>
	<479112E3.2030409@pobox.com>
Message-ID: <1200701287.11952.6.camel@linux-o863.site>

This is really a reply to your next message which never got to my email
account.
I did go though with a make install and everything worked on my end. I
thought that the object files would be needed in the pds folder after
building but apparently this isn't so. Sorry about that. 
I left Ross a note to fill out a ticket if he wants to fix this. I don't
have the file he is trying to open. I can open .cub files on my end.
Steve
On Fri, 2008-01-18 at 15:58 -0500, Frank Warmerdam wrote:
> cartrite wrote:
> > Hi,
> > I was wondering how one would add a PDS, ISIS3 reader. I didn't see an
> > option in configure help. There is a folder under formats. And I can run
> > make from the pds folder, but I'm not sure how to link.
> 
> Steve,
> 
> In GDAL 1.5.0 the PDS, ISIS2, and ISIS3 drivers should be built into GDAL
> by default.  They do not depend on external libraries so no configure
> options are required.
> 
> You can confirm availability of a driver using the --format switch.
> 
> eg.
> 
> warmerda@gdal64[27]% gdalinfo --format isis3
> Format Details:
>    Short Name: ISIS3
>    Long Name: USGS Astrogeology ISIS cube (Version 3)
>    Help Topic: frmt_various.html#ISIS3
> 
> Best regards,

From matt.wilkie at gov.yk.ca  Fri Jan 18 18:55:28 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Fri Jan 18 20:02:44 2008
Subject: [gdal-dev] GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
References: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
Message-ID: <47913C70.5050606@gov.yk.ca>

Thank you Jim!
I've created a page for this at 
http://trac.osgeo.org/gdal/wiki/GdalPerlOnCygwin

please update/revise as needed.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From jluis at ualg.pt  Fri Jan 18 20:21:01 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Jan 19 03:49:02 2008
Subject: [gdal-dev] GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <47912386.9080100@tkk.fi>
References: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
	<47912386.9080100@tkk.fi>
Message-ID: <4791507D.5080700@ualg.pt>

Ari Jolma wrote:
> jingmuyang@aol.com kirjoitti:
>> I have successfully built GDAL 1.5.0 Perl binding on Cygwin and the 
>> followings might be helpful for those who experience problems.
>>
>> 2. Edit each of the four Makefiles by appending -lstdc++ after each 
>> -lgdal and save them.
>
> If you tell me how to detect Cygwin reliably I can add this to 
> Makefile.PL

Ari,
Within GMT a cygwin installation is detected with a

#ifdef _WIN32

and that has worked well since a long time.

Joaquim Luis
From nhv at cape.com  Sat Jan 19 10:50:08 2008
From: nhv at cape.com (Norman Vine)
Date: Sat Jan 19 10:50:13 2008
Subject: [gdal-dev] GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <4791507D.5080700@ualg.pt>
Message-ID: <20080119164017.0020530E921@mrelay1.cape.com>

 
> Ari Jolma wrote:
> > jingmuyang@aol.com kirjoitti:
> >> I have successfully built GDAL 1.5.0 Perl binding on 
> Cygwin and the 
> >> followings might be helpful for those who experience problems.
> >>
> >> 2. Edit each of the four Makefiles by appending -lstdc++ 
> after each 
> >> -lgdal and save them.
> >
> > If you tell me how to detect Cygwin reliably I can add this to 
> > Makefile.PL

#ifdef __CYGWIN__

http://cygwin.com/faq/faq.programming.html#faq.programming.preprocessor

HTH

Norman

From sfkeller at gmail.com  Sat Jan 19 12:03:01 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Sat Jan 19 12:03:03 2008
Subject: [gdal-dev] OGR style fields
In-Reply-To: <479118F2.60606@pobox.com>
References: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
	<4791129A.3020902@pobox.com>
	<f3b73b7d0801181317g1f73a3cnc6179cf503dd701@mail.gmail.com>
	<479118F2.60606@pobox.com>
Message-ID: <25bc040b0801190903g4a644144kf06672a540deade8@mail.gmail.com>

About two weeks ago I proposed in the FWTools list to enable users of
OGR/GDAL tools like ogr2ogr to set the style parameters from the command
line or using .VRT. This would be a valuable extension for writing KML
files.

Any views about this?

Stefan

2008/1/18, Frank Warmerdam <warmerdam@pobox.com>:
>
> Tamas Szekeres wrote:
> > Frank,
> >
> > Mapserver is only a subset of the areas where this change would be
> > beneficial. There might be other renderers that would utilize the OGR
> > style support. I don't think this would eliminate the need of that
> > mapserver related RFC, though.
> >
> > Would this change need an RFC on an explicit motion to vote on?
>
> Tamas,
>
> I think the notification of intent on the mailing list is sufficient
> (as you have already done).  Go ahead and make your change and if there
> are objections that arise we might reconsider.  But I don't anticipate
> any problems.
>
> Do please make a brief note in the method docs about this special
> behavior for an attributed named ogr_style.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080119/c34389c6/attachment.html
From schwehr at ccom.unh.edu  Sat Jan 19 12:05:40 2008
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Sat Jan 19 12:05:50 2008
Subject: [gdal-dev] gdal 1.5.0 with python in mac osx fink
Message-ID: <47922DE4.8000406@ccom.unh.edu>

Hi All,

I have redone how gdal python is supported in fink.  If anyone is up for 
testing, I could really use the help.

http://vislab-ccom.unh.edu/~schwehr/software/fink/gdal.info
http://vislab-ccom.unh.edu/~schwehr/software/fink/gdal-py.info

Put these two files in /sw/fink/10.5/local/main/libs, then do a "fink 
install gdal-py25"

Thanks,
-kurt

From even.rouault at mines-paris.org  Sat Jan 19 13:11:10 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 19 13:11:16 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <D2B8D391-766D-4A72-AC34-95201F6751F5@gmail.com>
References: <478B9E9A.5010402@pobox.com> <479134F6.4020802@pobox.com>
	<D2B8D391-766D-4A72-AC34-95201F6751F5@gmail.com>
Message-ID: <200801191911.11748.even.rouault@mines-paris.org>

I am +1 on this RFC too, and also appreciate the CPL config option that will 
enable people to revert to the older behaviour if problems show up.

Even

Le Saturday 19 January 2008 00:31:32 Howard Butler, vous avez ?crit?:
> On Jan 18, 2008, at 5:23 PM, Frank Warmerdam wrote:
> > Andrey Kiselev wrote:
> >> On Mon, Jan 14, 2008 at 11:54:36PM -0500, Frank Warmerdam wrote:
> >>> The CPL config option "IGNORE_AXIS_ORIENTATION" may also be set to
> >>> "TRUE" to disable OGRCoordinateTransformation's checking, and
> >>> application of axis orientation changes. Effectively this is a
> >>> backdoor to disable the core effects of the RFC.
> >>
> >> Frank,
> >> Do we have any convention on GDAL option naming? Some of them starts
> >> with "GDAL_" prefix, but this one not. I am suggesting to rename it
> >> in
> >> "GDAL_IGNORE_AXIS_ORIENTATION" to be more uniform and clear.
> >
> > Andrey,
> >
> > I have adjusted the RFC accordingly, though we haven't generally been
> > very consistent with CPL config option naming in the past.
> >
> > Unfortunately our two business days (and a bit) have passed without
> > getting enough support for the RFC to pass.  Under the assumption
> > (hope!)
> > that folks have just been to busy to review it, I'm going to keep the
> > motion alive for an extra two business days (till Tuesday evening).
> >
> > Any PSC members who have concerns are encouraged to raise them.  If
> > there
> > isn't support by then, I guess I'll have to shelve this plan and see
> > what
> > alternative I can come up with.
>
> I am +1 on this RFC, especially with the CPL config option that allows
> a user to totally shut axis guessing off.  I admit to being slightly
> nervous about turning this stuff on by default, however.  If we start
> seeing lots of problems with it, I suppose we could flip the bit on it
> and have the CPL option be the thing that turns it on...
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Sat Jan 19 13:55:01 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Jan 19 13:55:03 2008
Subject: [gdal-dev] OGR style fields
In-Reply-To: <25bc040b0801190903g4a644144kf06672a540deade8@mail.gmail.com>
References: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
	<4791129A.3020902@pobox.com>
	<f3b73b7d0801181317g1f73a3cnc6179cf503dd701@mail.gmail.com>
	<479118F2.60606@pobox.com>
	<25bc040b0801190903g4a644144kf06672a540deade8@mail.gmail.com>
Message-ID: <f3b73b7d0801191055y28a6a29cya1046fb5fa543458@mail.gmail.com>

2008/1/19, Stefan Keller <sfkeller@gmail.com>:
> About two weeks ago I proposed in the FWTools list to enable users of
> OGR/GDAL tools like ogr2ogr to set the style parameters from the command
> line or using .VRT. This would be a valuable extension for writing KML
> files.
>

Stefan,

How do you think this kind of configuration should look like. How
should we change the style per feature at the ogr2ogr command line?
Would it be sufficient for example to set this style for each feature
equally by using a field alias or something like:

ogr2ogr -f KML -sql "select *, [stylestring] as OGR_STYLE from
mylayer" mylayer.kml mylayer.shp

I'm also uncertain about the usability of producing a full fledged
ready to use KML output by the driver this way and setting up the
style representation in a specific way inside. This driver should
instead become template based or something that more customizable.


Best regards,

Tamas
From szekerest at gmail.com  Sat Jan 19 14:14:08 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Jan 19 14:14:11 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <479134F6.4020802@pobox.com>
References: <478B9E9A.5010402@pobox.com> <478C3AB0.7010102@pobox.com>
	<478C3C8C.6070804@pobox.com> <20080115070349.GA11946@ak4719.spb.edu>
	<479134F6.4020802@pobox.com>
Message-ID: <f3b73b7d0801191114u635b3a54s341deecf255fd5d0@mail.gmail.com>

I'm +0 with these changes. I agree with the necessity of the changes,
but I couldn't think over all of the possible impacts by this time.

Best regards,

Tamas



2008/1/19, Frank Warmerdam <warmerdam@pobox.com>:
> Andrey Kiselev wrote:
> > On Mon, Jan 14, 2008 at 11:54:36PM -0500, Frank Warmerdam wrote:
> >>  The CPL config option "IGNORE_AXIS_ORIENTATION" may also be set to
> >>  "TRUE" to disable OGRCoordinateTransformation's checking, and
> >>  application of axis orientation changes. Effectively this is a
> >>  backdoor to disable the core effects of the RFC.
> >
> > Frank,
> >
> > Do we have any convention on GDAL option naming? Some of them starts
> > with "GDAL_" prefix, but this one not. I am suggesting to rename it in
> > "GDAL_IGNORE_AXIS_ORIENTATION" to be more uniform and clear.
>
> Andrey,
>
> I have adjusted the RFC accordingly, though we haven't generally been
> very consistent with CPL config option naming in the past.
>
> Unfortunately our two business days (and a bit) have passed without
> getting enough support for the RFC to pass.  Under the assumption (hope!)
> that folks have just been to busy to review it, I'm going to keep the
> motion alive for an extra two business days (till Tuesday evening).
>
> Any PSC members who have concerns are encouraged to raise them.  If there
> isn't support by then, I guess I'll have to shelve this plan and see what
> alternative I can come up with.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Sat Jan 19 14:26:42 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 19 14:27:12 2008
Subject: [gdal-dev] OGR style fields
In-Reply-To: <f3b73b7d0801191055y28a6a29cya1046fb5fa543458@mail.gmail.com>
References: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
	<4791129A.3020902@pobox.com>
	<f3b73b7d0801181317g1f73a3cnc6179cf503dd701@mail.gmail.com>
	<479118F2.60606@pobox.com>
	<25bc040b0801190903g4a644144kf06672a540deade8@mail.gmail.com>
	<f3b73b7d0801191055y28a6a29cya1046fb5fa543458@mail.gmail.com>
Message-ID: <47924EF2.9010602@pobox.com>

Tamas Szekeres wrote:
> 2008/1/19, Stefan Keller <sfkeller@gmail.com>:
>> About two weeks ago I proposed in the FWTools list to enable users of
>> OGR/GDAL tools like ogr2ogr to set the style parameters from the command
>> line or using .VRT. This would be a valuable extension for writing KML
>> files.
>>
> 
> Stefan,
> 
> How do you think this kind of configuration should look like. How
> should we change the style per feature at the ogr2ogr command line?
> Would it be sufficient for example to set this style for each feature
> equally by using a field alias or something like:
> 
> ogr2ogr -f KML -sql "select *, [stylestring] as OGR_STYLE from
> mylayer" mylayer.kml mylayer.shp

Tamas,

I'd note that the OGR SQL parser does not understand how to use
"AS" to rename a field.

> I'm also uncertain about the usability of producing a full fledged
> ready to use KML output by the driver this way and setting up the
> style representation in a specific way inside. This driver should
> instead become template based or something that more customizable.

I don't think templating or related logic needs to be part of OGR.
If someone wanted dynamic styling for a set of features, then they
would presumably have to write a program or script that produced the
appropriate style string for each feature based on the feature
characteristics.

With the change (GetStyle() falls back to OGR_STYLE attribute) I think
the only other OGR changes that might be needed are:

  * Support for style strings in the KML driver (missing now completely
    as far as I know *and* I'm not even sure that KML styling options
    would be well represented by OGR Feature Style strings).

  * Some mechanism to manage feature styles - at least carrying them
    through or reassigning to an attribute - in the VRT driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From nikos.alexandris at felis.uni-freiburg.de  Sat Jan 19 15:47:27 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Sat Jan 19 15:47:32 2008
Subject: [gdal-dev] HDF V and VR components
In-Reply-To: <20080118172903.82910@gmx.net>
References: <20080118152323.42850@gmx.net> <4790D16A.6030000@pobox.com>
	<20080118172903.82910@gmx.net>
Message-ID: <1200775647.31843.1.camel@vertical>

Salut Jose!

Just curious: which layers (ending in _c) are those exactly? Is this
piece of information in the "product description" of MODIS products
available (somwhere)?

Thank you,

Nikos.


On Fri, 2008-01-18 at 18:29 +0100, Jose Luis Gomez Dans wrote:
> Hi,
> 
> 
> > Jose Luis Gomez Dans wrote:
> > > Hi, I want to access a number of layers in the MOD09GHK product, which
> > are
> > > not listed by GDAL (they are 1D datasets). They have shortnames ending
> > in
> > > "_c" rather than "_1", as is common in most MODIS products.
> > > 
> > > I have tried using pyhdf to explore these datasets, but I was wondering
> > > whether I can read these 1D arrays with GDAL directly.
> > I do not believe there is any way to get at these arrays through the GDAL
> > interface.
> 
> That is a shame. I have managed to get into them and process them using pyhdf, and saved them out using GDAL. It is fairly straightforward to use.
> 
> Thanks!
> Jose
-- 
Nikos Alexandris
.
Department of Remote Sensing & Landscape Information Systems
Faculty of Forestry & Environmental Sciences, Albert-Ludwigs-University Freiburg
.
Tel.  +49 (0) 761 203 3697 / Fax.  +49 (0) 761 203 3701 / Skype: Nikos.Alexandris
.
Address: Tennenbacher str. 4, D-79106 Freiburg i. Br., Germany
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080119/4b8f1f33/attachment.bin
From szekerest at gmail.com  Sat Jan 19 15:48:49 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Jan 19 15:48:51 2008
Subject: [gdal-dev] OGR style fields
In-Reply-To: <47924EF2.9010602@pobox.com>
References: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
	<4791129A.3020902@pobox.com>
	<f3b73b7d0801181317g1f73a3cnc6179cf503dd701@mail.gmail.com>
	<479118F2.60606@pobox.com>
	<25bc040b0801190903g4a644144kf06672a540deade8@mail.gmail.com>
	<f3b73b7d0801191055y28a6a29cya1046fb5fa543458@mail.gmail.com>
	<47924EF2.9010602@pobox.com>
Message-ID: <f3b73b7d0801191248s1ef957b1j711e3fa9c3be48e1@mail.gmail.com>

2008/1/19, Frank Warmerdam <warmerdam@pobox.com>:
> I'd note that the OGR SQL parser does not understand how to use
> "AS" to rename a field.
>

Frank,

I'm quite aware of that, neither the field name alias not the
constants are supported in the select field list. I consider this as
an addition not as an existing feature.

>
> With the change (GetStyle() falls back to OGR_STYLE attribute) I think
> the only other OGR changes that might be needed are:
>
>   * Support for style strings in the KML driver (missing now completely
>     as far as I know *and* I'm not even sure that KML styling options
>     would be well represented by OGR Feature Style strings).
>

The transformation from the OGR style to the KML style is quite
ambiguous. However I think we could easily include the PolyStyle,
LineStyle and LabelStyle in the KML output.
We should also provide style transformation functions like
GetStyleAsKML that should be exposed to the SWIG interface as well.
However this might be a subject of a subsequent proposal.

>   * Some mechanism to manage feature styles - at least carrying them
>     through or reassigning to an attribute - in the VRT driver.
>

I think it would be enough to add the following line
poDstFeat->SetStyleString(poSrcFeat->GetStyleString());

to TranslateFeature in ogrvrtlayer.cpp if you don't object that.

Best regards,

Tamas
From ari.jolma at tkk.fi  Sat Jan 19 18:14:17 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sat Jan 19 18:13:10 2008
Subject: [gdal-dev] GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <4791507D.5080700@ualg.pt>
References: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
	<47912386.9080100@tkk.fi> <4791507D.5080700@ualg.pt>
Message-ID: <47928449.5020004@tkk.fi>

Joaquim Luis kirjoitti:
> Ari Jolma wrote:
>> jingmuyang@aol.com kirjoitti:
>>> I have successfully built GDAL 1.5.0 Perl binding on Cygwin and the 
>>> followings might be helpful for those who experience problems.
>>>
>>> 2. Edit each of the four Makefiles by appending -lstdc++ after each 
>>> -lgdal and save them.
>>
>> If you tell me how to detect Cygwin reliably I can add this to 
>> Makefile.PL
>
> Ari,
> Within GMT a cygwin installation is detected with a
>
> #ifdef _WIN32

Ah, I meant in Makefile.PL, i.e., by Perl. It's probably something in 
Config.pm?

Ari

>
> and that has worked well since a long time.
>
> Joaquim Luis


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Sat Jan 19 18:24:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 19 18:25:23 2008
Subject: [gdal-dev] OGR style fields
In-Reply-To: <f3b73b7d0801191248s1ef957b1j711e3fa9c3be48e1@mail.gmail.com>
References: <f3b73b7d0801181242i30073d83h6490372f8b6cabbf@mail.gmail.com>
	<4791129A.3020902@pobox.com>
	<f3b73b7d0801181317g1f73a3cnc6179cf503dd701@mail.gmail.com>
	<479118F2.60606@pobox.com>
	<25bc040b0801190903g4a644144kf06672a540deade8@mail.gmail.com>
	<f3b73b7d0801191055y28a6a29cya1046fb5fa543458@mail.gmail.com>
	<47924EF2.9010602@pobox.com>
	<f3b73b7d0801191248s1ef957b1j711e3fa9c3be48e1@mail.gmail.com>
Message-ID: <479286C0.7080907@pobox.com>

Tamas Szekeres wrote:
>>   * Some mechanism to manage feature styles - at least carrying them
>>     through or reassigning to an attribute - in the VRT driver.
>>
> 
> I think it would be enough to add the following line
> poDstFeat->SetStyleString(poSrcFeat->GetStyleString());
> 
> to TranslateFeature in ogrvrtlayer.cpp if you don't object that.

Tamas,

Good idea ... done.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dron at ak4719.spb.edu  Sun Jan 20 04:34:44 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Sun Jan 20 04:49:36 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <479134F6.4020802@pobox.com>
References: <478B9E9A.5010402@pobox.com> <478C3AB0.7010102@pobox.com>
	<478C3C8C.6070804@pobox.com>
	<20080115070349.GA11946@ak4719.spb.edu>
	<479134F6.4020802@pobox.com>
Message-ID: <20080120093444.GB5408@ak4719.spb.edu>

On Fri, Jan 18, 2008 at 06:23:34PM -0500, Frank Warmerdam wrote:
> Unfortunately our two business days (and a bit) have passed without
> getting enough support for the RFC to pass.  Under the assumption
> (hope!) that folks have just been to busy to review it, I'm going to
> keep the motion alive for an extra two business days (till Tuesday
> evening).
> 
> Any PSC members who have concerns are encouraged to raise them.  If
> there isn't support by then, I guess I'll have to shelve this plan and
> see what alternative I can come up with.

I am +1.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From tomwebster2008 at yahoo.com  Mon Jan 21 02:03:20 2008
From: tomwebster2008 at yahoo.com (Tom Webster)
Date: Mon Jan 21 02:03:24 2008
Subject: [gdal-dev] How to disable gdalwarp -dstalpha option?
Message-ID: <98708.5688.qm@web45709.mail.sp1.yahoo.com>

Dear Developers,
   
  I am just trying to use the gdalwarp utility for resampling a 4-band GeoTIFF file. I wish each band is resampled - one by one, but if I run the gdalwarp, whether I include the following either option: -co ALPHA=YES or -co ALPHA=NO, the stdout shows this:
   
  "Using band 4 of source image as alpha."
   
  Certainly this is not what I am after. How could I disable the -dstalpha option in this wonderful tool. Much appreciated.
   
  Tom Webster
   
   
   
   

       
---------------------------------
Looking for last minute shopping deals?  Find them fast with Yahoo! Search.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080120/04f42c23/attachment.html
From mitchelljj98 at gmail.com  Mon Jan 21 06:11:51 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Mon Jan 21 06:11:53 2008
Subject: [gdal-dev] gdal_merge vs gdalwarp for mosaicking
Message-ID: <fa2ac0580801210311n7d9323eag8d63f273c6199f7b@mail.gmail.com>

Hi,

If I need to be able to mosaic tiles together but do not need to change the
projection, then I can run gdal_merge which will run faster than gdalwarp.
My question is their any advantage to running gdalwarp as far as:
1.) data quality
2.) scalability: I will be mosaicking many gigabytes (5GB-100GB) worth of
tiles together will gdal_merge be able to handle this?

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080121/f5d5e379/attachment.html
From mitchelljj98 at gmail.com  Mon Jan 21 06:55:25 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Mon Jan 21 06:55:29 2008
Subject: [gdal-dev] gdal_merge vs gdal_translate for reducing resolution
Message-ID: <fa2ac0580801210355j1f1ee6f1jaadb84626a67a707@mail.gmail.com>

Hi,

I have tried running both gdal_merge and gdal_translate for reducing the
resolution of individual tiles and I have found that both the data quality
and speed for the conversion are identical.  Since everything is identical
is their any reason to prefer one program over the other for reducing
resolution?

Also if what is the preferred method as far as data quality is concerned
where you want to have multiple passes at reducing the resolution as an
example:

method 1
2x resolution: 1/2 of full resolution
4x resolution: 1/4 of full resolution
8x resolution: 1/8 of full resolution
16x resolution: 1/16 of full resolution

method 2
2x resolution: 1/2 of full resolution
4x resolution: 1/2 of 2x resolution
8x resolution: 1/2 of 4x resolution
16x resolution: 1/2 of 8x resolution

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080121/01174932/attachment.html
From nowak at xpam.de  Mon Jan 21 07:57:22 2008
From: nowak at xpam.de (Adam Nowacki)
Date: Mon Jan 21 07:57:41 2008
Subject: [gdal-dev] gdal_merge vs gdal_translate for reducing resolution
In-Reply-To: <fa2ac0580801210355j1f1ee6f1jaadb84626a67a707@mail.gmail.com>
References: <fa2ac0580801210355j1f1ee6f1jaadb84626a67a707@mail.gmail.com>
Message-ID: <479496B2.3060108@xpam.de>

> I have tried running both gdal_merge and gdal_translate for reducing the 
> resolution of individual tiles and I have found that both the data 
> quality and speed for the conversion are identical.  Since everything is 
> identical is their any reason to prefer one program over the other for 
> reducing resolution?

Both do equally bad at reducing resolution since both use nearest 
neighbor sampling. gdalwarp with bilinear resampler might do better but 
I would suggest using gdaladdo with average filter instead.
From jingmuyang at aol.com  Mon Jan 21 08:10:41 2008
From: jingmuyang at aol.com (jingmuyang@aol.com)
Date: Mon Jan 21 08:11:07 2008
Subject: [gdal-dev] GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <47928449.5020004@tkk.fi>
References: <47928449.5020004@tkk.fi>
Message-ID: <8CA2A46288FEA15-8C8-3B9E@webmail-nf05.sim.aol.com>

I believe that using `uname | grep CYGWIN` in Makefile.PL should be able to handle the Cygwin system type.





Cheers,





Jim





-----Original Message-----

From: Ari Jolma 

To: Joaquim Luis 

Cc: jingmuyang@aol.com; gdal-dev@lists.osgeo.org

Sent: Sat, 19 Jan 2008 6:14 pm

Subject: Re: [gdal-dev] GDAL 1.5.0 Perl Binding on Cygwin



  
    Joaquim Luis kirjoitti:?

  > Ari Jolma wrote:?

  >> jingmuyang@aol.com kirjoitti:?


>>> I have successfully built GDAL 1.5.0 Perl binding on
Cygwin and the >>> followings might be helpful for those who
experience problems.?

  >>>?

  >>> 2. Edit each of the four Makefiles by appending -lstdc++ after each   >>> -lgdal and save them.?

  >>?

  >> If you tell me how to detect Cygwin reliably I can add this to   >> Makefile.PL?

  >?

  > Ari,?

  > Within GMT a cygwin installation is detected with a?

  >?

  > #ifdef _WIN32?

?

  Ah, I meant in Makefile.PL, i.e., by Perl. It's probably something in   Config.pm??

?

  Ari?

?

  >?

  > and that has worked well since a long time.?

  >?

  > Joaquim Luis?

?

    --   Prof. Ari Jolma?

  Geoinformatiikka / Geoinformatics?

  Teknillinen Korkeakoulu / Helsinki University of Technology?

  tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland?

  Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma?

?

      
   


________________________________________________________________________
More new features than ever.  Check out the new AOL Mail ! - http://webmail.aol.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080121/5ba804b3/attachment.html
From josegomez at gmx.net  Mon Jan 21 10:49:48 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Mon Jan 21 10:49:56 2008
Subject: [gdal-dev] HDF V and VR components
In-Reply-To: <1200775647.31843.1.camel@vertical>
References: <20080118152323.42850@gmx.net> <4790D16A.6030000@pobox.com>	
	<20080118172903.82910@gmx.net> <1200775647.31843.1.camel@vertical>
Message-ID: <20080121154948.59510@gmx.net>

Hi,

> Just curious: which layers (ending in _c) are those exactly? Is this
> piece of information in the "product description" of MODIS products
> available (somwhere)?

>From the top of my head, I can't remember, but the layer names are the same as the ones you can play around with in GDAL, with the final "_1" changed to "_c". The MOD09 product does have all the available observations for a given day (only the best observation is given gridded, and easily accessible through GDAL). The other observations are present there, but need to be decoded (they are in a 1D array, plus a couple of arrays to "unwrap" the data).

Cheers,
Jose 
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser
From schwehr at ccom.unh.edu  Mon Jan 21 11:55:45 2008
From: schwehr at ccom.unh.edu (Kurt Schwehr)
Date: Mon Jan 21 11:56:02 2008
Subject: [gdal-dev] gdal 1.5.0 in fink for Mac OSX 10.5
Message-ID: <4794CE91.2070106@ccom.unh.edu>

Hi All,

I have put a gdal 1.5.0 package in fink for Mac OSX 10.5 unstable.  I 
have also created a gdal-py25 package for the swig fink bindings.  This 
new package uses setup.py such that the package builds faster and 
cleaner than the old gdal-python-py2[45] package that is still in the 
10.4 tree.  If it proves itself, I will push this back to 10.4 unstable.

If you see that there are drivers that are not enabled that can be using 
libraries in either the fink tree or the default mac install, please let 
me know.

The status should change hear by tomorrow:

http://pdb.finkproject.org/pdb/package.php/gdal

-kurt




From vandorn at atmosresearch.com  Mon Jan 21 17:39:50 2008
From: vandorn at atmosresearch.com (Jeff Van Dorn)
Date: Mon Jan 21 17:39:54 2008
Subject: [gdal-dev] netcdf to geotiff and aaigrid
Message-ID: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>

Hello,

I'm hoping someone can set me straight in how to go about converting  
a bunch of netCDF files I have into both GTiff and AAIGrid formats,  
as my initial attempts have failed.  I'm using gdal version "GDAL  
1.6.0dev, FWTools 2.0.4, released 2007/12/21".

The netCDF data is on a 0.125 x 0.125 degree regular lat/lon grid  
(sample file at: http://temagami.tosm.ttu.edu/~jvandorn/gdal/ 
NE_1961-1990_Yearly_Max_Temp.nc).  I create this netCDF file from  
some ASCII data, and the ncdump is at bottom of email, which includes  
an abbreviated list of lat/lons.  It opens/displays fine in GrADS, so  
it seems to be a valid netCDF file; however, I'm not sure if there  
are any other data descriptors that I need to include in the file to  
allow the proper creation of GTiff or AAIGrid files.

I do seem to be able to create a mostly valid AAIGrid file by simply  
doing:  gdal_translate -of AAIGrid, BUT it appears upside-down when  
putting into something that can read that format, even though the  
header info seems MOSTLY correct (I'd think yll should really be  
38.0000 (min of latitudes in netCDF file - 1/2 grid size, (or 38.0625  
- 0.0625)):

ncols        110
nrows        80
xllcorner    -80.750000000000
yllcorner    28.000000000000
cellsize     0.125000000000

But, overall the image appears to be correct, other than inverted in  
the y direction, which I'm not really sure how to correct.

When I try to convert to the GTiff, from either the AAIGrid or netCDF  
format, all I get is a black rectangle as an image.  When going from  
netCDF to GTiff, I've tried -a_srs NAD83 and 27 (although I honestly  
don't know what exact projection it's on, other than it's just a  
regular lat/lon grid), but neither seem to help.  I'm not really sure  
what other settings to attempt to play with when converting to GTiff  
from either format.

Here's the gdalinfo from the AAIGrid to GTiff attempt:
-----------------------  start of data ------------------------------
Driver: GTiff/GeoTIFF
Files: aaigrid_to_gtiff.tif
Size is 110, 80
Coordinate System is `'
Origin = (-80.750000000000000,38.000000000000000)
Pixel Size = (0.125000000000000,-0.125000000000000)
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -80.7500000,  38.0000000)
Lower Left  ( -80.7500000,  28.0000000)
Upper Right ( -67.0000000,  38.0000000)
Lower Right ( -67.0000000,  28.0000000)
Center      ( -73.8750000,  33.0000000)
Band 1 Block=110x18 Type=Float32, ColorInterp=Gray
   NoData Value=-999
-----------------------  end of data ------------------------------

Basically, I'm looking for any suggestions that people have to offer.

Thanks for any suggestions.
Jeff


------------  ncdump of NE_1961-1990_Yearly_Max_Temp.nc --------------
netcdf NE_1961-1990_Yearly_Max_Temp {
dimensions:
         lat = 80 ;
         lon = 110 ;
variables:
         float lat(lat) ;
                 lat:units = "degrees_north" ;
         float lon(lon) ;
                 lon:units = "degrees_east" ;
         float tmax(lat, lon) ;
                 tmax:units = "degrees C" ;
                 tmax:long_name = "Maximum Air Temperature" ;
                 tmax:_FillValue = -999.f ;

// global attributes:
                 :title = "1961-1990 Yearly Averaged 1/8 degree by  
1/8 degree Downscaled Data" ;
                 :creation_date = "Mon Jan 21 13:24:35 CST 2008" ;

data:

  lat = 38.0625, 38.1875, 38.3125, 38.4375, 38.5625, 38.6875, 38.8125,
     ...removed some lines...
     47.9375 ;

  lon = -80.6875, -80.5625, -80.4375, -80.3125, -80.1875, -80.0625,  
-79.9375,
     ...removed some lines
     -67.5625, -67.4375, -67.3125, -67.1875, -67.0625 ;


}



From fx.gamoy at geomatika.fr  Mon Jan 21 18:10:36 2008
From: fx.gamoy at geomatika.fr (FX GAMOY)
Date: Mon Jan 21 18:07:33 2008
Subject: [gdal-dev] mapinfo to postgis problem
Message-ID: <200801220010.37025.fx.gamoy@geomatika.fr>

Hello world,

i am using ogr2ogr in order to translate mapinfo tab files into postgis 
database..

Everything is nice but ....

i work with polylines representing a water network ( system ).. 
i would like to draw on the map the way the line has been vectorized with 
mapinfo.. using some arrows

But this way seem to be sometimes changed by the ogr2ogr translation or by 
mapserver when computing the map.

i will be very pleased  if anybody could give me suggest!

Best regards,

fx
From mgfernandes at ualg.pt  Mon Jan 21 18:53:37 2008
From: mgfernandes at ualg.pt (Miguel Fernandes)
Date: Mon Jan 21 19:00:33 2008
Subject: [gdal-dev] Compiling gdal-svn-stable-2008.01.21 with libcurl support
Message-ID: <47953081.7040302@ualg.pt>

Hello,

I'm compiling gdal version gdal-svn-stable-2008.01.21 with libcurl 
libcurl-7.15.1-msvc-win32-ssl-0.9.8a-zlib-1.2.3 support and netcdf 3.6.1 
using MC VC7.
I'm having a linkage error in function select in file gdalhttp.cpp, i've 
tried to look for the declaration of this function in the code but i'm 
not being able to find it, is it part of gdal code or i'm i missing some 
library, i've checked the includes and i seem to have them all. The 
output is the following:

  link /nologo /dll /debug /INCLUDE:_OGRFeatureStylePuller  
/INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods  
/INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll 
/INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  
/INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  /IN
CLUDE:_OCTNewCoordinateTransformation@8 /INCLUDE:_vbSafeArrayToPtr@16 
port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj 
ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
 vb6\vb6_support.obj       odbc32.lib odbccp32.lib user32.lib           
C:\Programas\netCDF_3.6.1\lib\netcdf.lib               
C:\Programas\libs\libcurl\libcurl_imp.lib  gcore\Version.res  
/out:gdal15.dll /implib:gdal_i.lib

Creating library gdal_i.lib and object gdal_i.exp
gdalhttp.obj : error LNK2019: unresolved external symbol 
__imp__select@20 referenced in function "enum CPLErr __cdecl 
CPLHTTPFetchMulti(struct CPLHTTPRequest *,
int,char const * const *)" 
(?CPLHTTPFetchMulti@@YA?AW4CPLErr@@PAUCPLHTTPRequest@
@HPBQBD@Z)

gdal15.dll : fatal error LNK1120: 1 unresolved externals

Can anyone point where i can find the declaration of this function or 
why the linker isn't finding it.
Thanks in advance.

-- 
/Miguel Fernandes
/*
**Projecto ERSTA*
CIMA - Centro de Investiga??o Marinha Ambiental
Campus de Gambelas
8005-139 Faro
Portugal

+351 289800995 ext.7574
mgfernandes@ualg.pt

From grevedan at hotmail.com  Mon Jan 21 19:07:58 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Mon Jan 21 19:07:59 2008
Subject: [gdal-dev] Warping MrSid Images
Message-ID: <BAY139-W9B22978223E6AFC2596BCC73E0@phx.gbl>

Greetings,

I'm having an issue with a MrSid dataset.  Performance seems to be dreadfully slow reprojecting data from this 14336 pix by 14336 pix 8bit, 3 band RGB, UTM rotated image with 8 overviews. Whether I warp the image into a  512 pix x 428 pix geotiff or a 15620 pix x 13102 pix geotiff, (EPSG:4326) both warp operations take over 5 minutes. (5:30 for the small image, 7:15 for the large which required 600 megabyte of disk output). 

Might there be a better way of creating a VRT, grabbing one of the overview bands, and using this virtual "overview" dataset in the warp operation.  Strangely enough, if I translate the source into a GeoTiff, and create 8 explicit overviews, the 512 pix x 428 pix warp operation takes about 30 seconds.

-- Dan Greve
-- Software Engineer
-- Northrop Grumman Integrated Systems

_________________________________________________________________
Climb to the top of the charts!?Play the word scramble challenge with star power.
http://club.live.com/star_shuffle.aspx?icid=starshuffle_wlmailtextlink_jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080121/6163dfb2/attachment.html
From warmerdam at pobox.com  Mon Jan 21 20:41:54 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 21 20:42:18 2008
Subject: [gdal-dev] Compiling gdal-svn-stable-2008.01.21 with libcurl
	support
In-Reply-To: <47953081.7040302@ualg.pt>
References: <47953081.7040302@ualg.pt>
Message-ID: <479549E2.8020205@pobox.com>

Miguel Fernandes wrote:
> Hello,
> 
> I'm compiling gdal version gdal-svn-stable-2008.01.21 with libcurl 
> libcurl-7.15.1-msvc-win32-ssl-0.9.8a-zlib-1.2.3 support and netcdf 3.6.1 
> using MC VC7.
> I'm having a linkage error in function select in file gdalhttp.cpp, i've 
> tried to look for the declaration of this function in the code but i'm 
> not being able to find it, is it part of gdal code or i'm i missing some 
> library, i've checked the includes and i seem to have them all. The 
> output is the following:
> 
>  link /nologo /dll /debug /INCLUDE:_OGRFeatureStylePuller  
> /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods  
> /INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll 
> /INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  
> /INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  /IN
> CLUDE:_OCTNewCoordinateTransformation@8 /INCLUDE:_vbSafeArrayToPtr@16 
> port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj 
> ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
> vb6\vb6_support.obj       odbc32.lib odbccp32.lib user32.lib           
> C:\Programas\netCDF_3.6.1\lib\netcdf.lib               
> C:\Programas\libs\libcurl\libcurl_imp.lib  gcore\Version.res  
> /out:gdal15.dll /implib:gdal_i.lib
> 
> Creating library gdal_i.lib and object gdal_i.exp
> gdalhttp.obj : error LNK2019: unresolved external symbol 
> __imp__select@20 referenced in function "enum CPLErr __cdecl 
> CPLHTTPFetchMulti(struct CPLHTTPRequest *,
> int,char const * const *)" 
> (?CPLHTTPFetchMulti@@YA?AW4CPLErr@@PAUCPLHTTPRequest@
> @HPBQBD@Z)
> 
> gdal15.dll : fatal error LNK1120: 1 unresolved externals
> 
> Can anyone point where i can find the declaration of this function or 
> why the linker isn't finding it.

Miguel,

Try adding wsock32.lib in your CURL_LIB declaration in nmake.opt.  Frankly
I'm quite surprised that gdalhttp.cpp uses select() directly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Jan 21 20:59:18 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 21 20:59:42 2008
Subject: [gdal-dev] netcdf to geotiff and aaigrid
In-Reply-To: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>
References: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>
Message-ID: <47954DF6.8080203@pobox.com>

Jeff Van Dorn wrote:
> Hello,
> 
> I'm hoping someone can set me straight in how to go about converting a 
> bunch of netCDF files I have into both GTiff and AAIGrid formats, as my 
> initial attempts have failed.  I'm using gdal version "GDAL 1.6.0dev, 
> FWTools 2.0.4, released 2007/12/21".
...
> I do seem to be able to create a mostly valid AAIGrid file by simply 
> doing:  gdal_translate -of AAIGrid, BUT it appears upside-down when 
> putting into something that can read that format, even though the header 
> info seems MOSTLY correct (I'd think yll should really be 38.0000 (min 
> of latitudes in netCDF file - 1/2 grid size, (or 38.0625 - 0.0625)):
> 
> ncols        110
> nrows        80
> xllcorner    -80.750000000000
> yllcorner    28.000000000000
> cellsize     0.125000000000
> 
> But, overall the image appears to be correct, other than inverted in the 
> y direction, which I'm not really sure how to correct.

Jeff,

I tried translating this file with my linux build of GDAL and the output
AAIGRID header looks like:

ncols        110
nrows        80
xllcorner    -80.750000000000
yllcorner    38.000000000000
cellsize     0.125000000000
NODATA_value   -999

I'm not at all sure why you get a yllcorner of 28 when I get 38.  I
displayed the file directly, and the output aaigrid file and both seemed
"right side up" and otherwise normal.

> When I try to convert to the GTiff, from either the AAIGrid or netCDF 
> format, all I get is a black rectangle as an image. 

I suspect this has more to do with the software you are displaying
the GeoTIFF file with than the actual data.  Many software packages
don't do particularly savvy autoscaling of floating point image data.

Have you tried displaying it in OpenEV?

BTW, were you using the linux or win32 version of FWTools.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Jan 21 21:07:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 21 21:07:52 2008
Subject: [gdal-dev] Warping MrSid Images
In-Reply-To: <BAY139-W9B22978223E6AFC2596BCC73E0@phx.gbl>
References: <BAY139-W9B22978223E6AFC2596BCC73E0@phx.gbl>
Message-ID: <47954FE4.8070101@pobox.com>

Dan Greve wrote:
> Greetings,
> 
> I'm having an issue with a MrSid dataset.  Performance seems to be 
> dreadfully slow reprojecting data from this 14336 pix by 14336 pix 8bit, 
> 3 band RGB, UTM rotated image with 8 overviews. Whether I warp the image 
> into a  512 pix x 428 pix geotiff or a 15620 pix x 13102 pix geotiff, 
> (EPSG:4326) both warp operations take over 5 minutes. (5:30 for the 
> small image, 7:15 for the large which required 600 megabyte of disk 
> output).
>
> Might there be a better way of creating a VRT, grabbing one of the 
> overview bands, and using this virtual "overview" dataset in the warp 
> operation.  Strangely enough, if I translate the source into a GeoTiff, 
> and create 8 explicit overviews, the 512 pix x 428 pix warp operation 
> takes about 30 seconds.

Dan,

Whew, a bad mix.  Warped VRT and MrSID.

Generally speaking "random access" to MrSID tends to be slow.  And the
Warped VRT mechanism tends to result in quite a bit of random access
though I haven't analysed it carefully.

The other thing to keep in mind is that the Warp API always reads the
source data required for a particular output rectangle at full resolution.
This ensures that it can do the resampling kernels and such precisely.
But if you are downsampling greatly this is serious overkill.  It would
in fact be nice, and even reasonable, for the warp api to take advantage
of overviews if they are at least of the required resolution.  But it is
hard for the warp API to really know the resolution required in many cases
since it is at least potentially possible for a reprojection or other
warp to be highly irregular in resolution across an area and thus "highest
resolution" can't be determined without alot of internal scanning.

If you want dramatically lower resolution warps from a source image, you are
actually best off building a separate overview file and warping from that.

BTW, MapServer does not have this problem because it assumes that accuracy
of reprojection is not all that important.  So the warper just reads the
source data at something like 2x the expected resolution of the output and
it doesn't really worry about bad edge cases.  This makes MapServer fast,
but somewhat sloppy.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From grevedan at hotmail.com  Mon Jan 21 21:46:41 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Mon Jan 21 21:46:44 2008
Subject: [gdal-dev] Warping MrSid Images
In-Reply-To: <47954FE4.8070101@pobox.com>
References: <BAY139-W9B22978223E6AFC2596BCC73E0@phx.gbl>
	<47954FE4.8070101@pobox.com>
Message-ID: <BAY139-W20F04FDD76815CC3EE2ABEC73E0@phx.gbl>

Frank,
 
Thanks for the tips.  Until I understand the warp operation better I'll stay away from the VRTWarped dataset, and instead create a "MEM" In Memory raster using the overview that is just larger than the required resolution.  It sounds though like the MapServer "simple decimation" algorithm might be more appropriate for datasets without overviews, followed by the necessary reprojection operation. In my application responsiveness of the UI is currently more important than accuracy. 
 
By the way, get those 2008 Rush Tour tickets before they sell out!
 
-- dan



> Date: Mon, 21 Jan 2008 21:07:32 -0500> From: warmerdam@pobox.com> To: grevedan@hotmail.com> CC: gdal-dev@lists.osgeo.org> Subject: Re: [gdal-dev] Warping MrSid Images> > Dan Greve wrote:> > Greetings,> > > > I'm having an issue with a MrSid dataset. Performance seems to be > > dreadfully slow reprojecting data from this 14336 pix by 14336 pix 8bit, > > 3 band RGB, UTM rotated image with 8 overviews. Whether I warp the image > > into a 512 pix x 428 pix geotiff or a 15620 pix x 13102 pix geotiff, > > (EPSG:4326) both warp operations take over 5 minutes. (5:30 for the > > small image, 7:15 for the large which required 600 megabyte of disk > > output).> >> > Might there be a better way of creating a VRT, grabbing one of the > > overview bands, and using this virtual "overview" dataset in the warp > > operation. Strangely enough, if I translate the source into a GeoTiff, > > and create 8 explicit overviews, the 512 pix x 428 pix warp operation > > takes about 30 seconds.> > Dan,> > Whew, a bad mix. Warped VRT and MrSID.> > Generally speaking "random access" to MrSID tends to be slow. And the> Warped VRT mechanism tends to result in quite a bit of random access> though I haven't analysed it carefully.> > The other thing to keep in mind is that the Warp API always reads the> source data required for a particular output rectangle at full resolution.> This ensures that it can do the resampling kernels and such precisely.> But if you are downsampling greatly this is serious overkill. It would> in fact be nice, and even reasonable, for the warp api to take advantage> of overviews if they are at least of the required resolution. But it is> hard for the warp API to really know the resolution required in many cases> since it is at least potentially possible for a reprojection or other> warp to be highly irregular in resolution across an area and thus "highest> resolution" can't be determined without alot of internal scanning.> > If you want dramatically lower resolution warps from a source image, you are> actually best off building a separate overview file and warping from that.> > BTW, MapServer does not have this problem because it assumes that accuracy> of reprojection is not all that important. So the warper just reads the> source data at something like 2x the expected resolution of the output and> it doesn't really worry about bad edge cases. This makes MapServer fast,> but somewhat sloppy.> > Best regards,> -- > ---------------------------------------+--------------------------------------> I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@pobox.com> light and sound - activate the windows | http://pobox.com/~warmerdam> and watch the world go round - Rush | President OSGeo, http://osgeo.org> 
_________________________________________________________________
Helping your favorite cause is as easy as instant messaging.?You IM, we give.
http://im.live.com/Messenger/IM/Home/?source=text_hotmail_join
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080121/ba1c50b3/attachment-0001.html
From yann.chemin at gmail.com  Mon Jan 21 23:46:07 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Mon Jan 21 23:46:09 2008
Subject: [gdal-dev] _gdal.py: cannot find _gdal.GDALGetFileList
Message-ID: <4f37eb890801212046t40d10114q17c8d1a6432cc5e5@mail.gmail.com>

Hello,
While doing this:

 papszFileList = _gdal.GDALGetFileList( hDataset )

it gave this error:

     papszFileList = _gdal.GDALGetFileList( hDataset )
 AttributeError: 'module' object has no attribute 'GDALGetFileList'

The imported modules are:

 import _gdal
 import gdal
 from gdalconst import *

Am I missing something?
thank you for any suggestion...
Yann
From SriRam.PrasadBhasker at rmsi.com  Tue Jan 22 04:47:19 2008
From: SriRam.PrasadBhasker at rmsi.com (SriRam Prasad Bhasker)
Date: Tue Jan 22 04:48:01 2008
Subject: [gdal-dev] gdal_merge output JPG unable to write
Message-ID: <OF69DF86FE.C4AF11C6-ON652573D8.0035962D-652573D8.0035B039@rmsi.com>

Hi

Gdal_Merge is not supporting JPEG Driver for Writing.. 

can anyone one know list of valid output drivers for Gdal_merge

I have 2.0 Gb sized Jpeg Files (150 odd..)need to merge them into one 
Mosaiced Jpeg File.

thnx

bhasker



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080122/4746dd14/attachment.html
From szekerest at gmail.com  Tue Jan 22 05:00:26 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jan 22 05:00:28 2008
Subject: [gdal-dev] mapinfo to postgis problem
In-Reply-To: <200801220010.37025.fx.gamoy@geomatika.fr>
References: <200801220010.37025.fx.gamoy@geomatika.fr>
Message-ID: <f3b73b7d0801220200x7ad861byb5bbad253125e1@mail.gmail.com>

2008/1/22, FX GAMOY <fx.gamoy@geomatika.fr>:

> i work with polylines representing a water network ( system )..
> i would like to draw on the map the way the line has been vectorized with
> mapinfo.. using some arrows
>
> But this way seem to be sometimes changed by the ogr2ogr translation or by
> mapserver when computing the map.
>

Could you describe the behaviour of the change?


Best regards,

Tamas
From warmerdam at pobox.com  Tue Jan 22 09:53:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 22 09:54:05 2008
Subject: [gdal-dev] gdal_merge output JPG unable to write
In-Reply-To: <OF69DF86FE.C4AF11C6-ON652573D8.0035962D-652573D8.0035B039@rmsi.com>
References: <OF69DF86FE.C4AF11C6-ON652573D8.0035962D-652573D8.0035B039@rmsi.com>
Message-ID: <47960378.8030705@pobox.com>

SriRam Prasad Bhasker wrote:
> 
> Hi
> 
> Gdal_Merge is not supporting JPEG Driver for Writing..
> 
> can anyone one know list of valid output drivers for Gdal_merge
> 
> I have 2.0 Gb sized Jpeg Files (150 odd..)need to merge them into one 
> Mosaiced Jpeg File.

Bhasker,

If you do "gdal_merge.py --formats" it will list all the formats supported
by the current build.  All those with "rw+" in brackets afterwards are
suitable output formats.  If they have "ro" then the format is read only.
If they have "rw" then the format supports writing, but only in "copy in
a single pass from another dataset" mode which is insufficient for
gdal_merge.py which needs to write the output in somewhat random chunks.

Note that you can merge into a mosaic in a format like Erdas Imagine or
BigTIFF (if you are using a new enough build) and then gdal_translate that
to JPEG.  I would however stress that JPEG is a poorly performing format
for large geospatial datasets that you want to access randomly in a
desktop viewer or web mapping situation for instance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Jan 22 10:15:06 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 22 10:15:29 2008
Subject: [gdal-dev] _gdal.py: cannot find _gdal.GDALGetFileList
In-Reply-To: <4f37eb890801212046t40d10114q17c8d1a6432cc5e5@mail.gmail.com>
References: <4f37eb890801212046t40d10114q17c8d1a6432cc5e5@mail.gmail.com>
Message-ID: <4796087A.2000606@pobox.com>

Yann Chemin wrote:
> Hello,
> While doing this:
> 
>  papszFileList = _gdal.GDALGetFileList( hDataset )
> 
> it gave this error:
> 
>      papszFileList = _gdal.GDALGetFileList( hDataset )
>  AttributeError: 'module' object has no attribute 'GDALGetFileList'
> 
> The imported modules are:
> 
>  import _gdal
>  import gdal
>  from gdalconst import *
> 
> Am I missing something?
> thank you for any suggestion...

Yann,

GDALGetFileList() is new to GDAL 1.5.0, and likely only exists in the
modern Python bindings (not the antique bindings distributed in FWTools
or built using --with-ogpython).

Is it possible that you are using an older GDAL or a new GDAL with old
bindings (ie. FWTools)?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Doug_Newcomb at fws.gov  Tue Jan 22 10:19:42 2008
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Tue Jan 22 10:20:07 2008
Subject: [gdal-dev] gdal_merge output JPG unable to write
In-Reply-To: <47960378.8030705@pobox.com>
Message-ID: <OFE2A5E9D1.F2BC638D-ON852573D8.0053CC86-852573D8.00543392@fws.gov>

Basker,

You might also want to look at  http://www.gdal.org/formats_list.html.  The
last column lists the Maximum file size.  If you are merging multiple 2 GB
files, you will hit the 4 GiB limit for the standard JPEG format  fairly
quickly.

Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
Life is too short for undocumented, proprietary data formats.


                                                                           
             Frank Warmerdam                                               
             <warmerdam@pobox.                                             
             com>                                                       To 
             Sent by:                  SriRam Prasad Bhasker               
             gdal-dev-bounces@         <SriRam.PrasadBhasker@rmsi.com>     
             lists.osgeo.org                                            cc 
                                       gdal-dev@lists.osgeo.org            
                                                                   Subject 
             01/22/2008 09:53          Re: [gdal-dev] gdal_merge output    
             AM                        JPG unable to write                 
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           




SriRam Prasad Bhasker wrote:
>
> Hi
>
> Gdal_Merge is not supporting JPEG Driver for Writing..
>
> can anyone one know list of valid output drivers for Gdal_merge
>
> I have 2.0 Gb sized Jpeg Files (150 odd..)need to merge them into one
> Mosaiced Jpeg File.

Bhasker,

If you do "gdal_merge.py --formats" it will list all the formats supported
by the current build.  All those with "rw+" in brackets afterwards are
suitable output formats.  If they have "ro" then the format is read only.
If they have "rw" then the format supports writing, but only in "copy in
a single pass from another dataset" mode which is insufficient for
gdal_merge.py which needs to write the output in somewhat random chunks.

Note that you can merge into a mosaic in a format like Erdas Imagine or
BigTIFF (if you are using a new enough build) and then gdal_translate that
to JPEG.  I would however stress that JPEG is a poorly performing format
for large geospatial datasets that you want to access randomly in a
desktop viewer or web mapping situation for instance.

Best regards,
--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jluis at ualg.pt  Tue Jan 22 10:23:32 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jan 22 10:23:46 2008
Subject: [gdal-dev] netcdf to geotiff and aaigrid
In-Reply-To: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>
References: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>
Message-ID: <47960A74.4000209@ualg.pt>

Jeff Van Dorn wrote:
> I do seem to be able to create a mostly valid AAIGrid file by simply 
> doing:  gdal_translate -of AAIGrid, BUT it appears upside-down when 
> putting into something that can read that format, even though the 
> header info seems MOSTLY correct  ...

Jeff,
That's a known issue with the netCDF driver. netCDF files can be stored 
bottom-up or top-down, but since the driver doesn't test for which is 
the case on the file it's processing, the ones that are not written the 
way it thinks they are end up Up-Down flipped.

Joaquim Luis

From stpoppy at ptd.net  Tue Jan 22 11:30:05 2008
From: stpoppy at ptd.net (cartrite)
Date: Tue Jan 22 11:30:04 2008
Subject: [gdal-dev] gdal_merge vs gdal_translate for reducing resolution
Message-ID: <1201019405.6057.3.camel@linux-o863.site>

Hi John,
Gdalwarp can also use cubic, cubic spline. At least it could in 1.4.4.
Steve

From vandorn at atmosresearch.com  Tue Jan 22 12:08:53 2008
From: vandorn at atmosresearch.com (Jeff Van Dorn)
Date: Tue Jan 22 12:38:04 2008
Subject: [gdal-dev] netcdf to geotiff and aaigrid
In-Reply-To: <47954DF6.8080203@pobox.com>
References: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>
	<47954DF6.8080203@pobox.com>
Message-ID: <ADD0793E-247A-4C21-B879-1D4457E8CBEF@atmosresearch.com>


On Jan 21, 2008, at 7:59 PM, Frank Warmerdam wrote:

> Jeff Van Dorn wrote:
>> Hello,
>> I'm hoping someone can set me straight in how to go about  
>> converting a bunch of netCDF files I have into both GTiff and  
>> AAIGrid formats, as my initial attempts have failed.  I'm using  
>> gdal version "GDAL 1.6.0dev, FWTools 2.0.4, released 2007/12/21".
> ...
>> I do seem to be able to create a mostly valid AAIGrid file by  
>> simply doing:  gdal_translate -of AAIGrid, BUT it appears upside- 
>> down when putting into something that can read that format, even  
>> though the header info seems MOSTLY correct (I'd think yll should  
>> really be 38.0000 (min of latitudes in netCDF file - 1/2 grid  
>> size, (or 38.0625 - 0.0625)):
>> ncols        110
>> nrows        80
>> xllcorner    -80.750000000000
>> yllcorner    28.000000000000
>> cellsize     0.125000000000
>> But, overall the image appears to be correct, other than inverted  
>> in the y direction, which I'm not really sure how to correct.
>
> Jeff,
>
> I tried translating this file with my linux build of GDAL and the  
> output
> AAIGRID header looks like:
>
> ncols        110
> nrows        80
> xllcorner    -80.750000000000
> yllcorner    38.000000000000
> cellsize     0.125000000000
> NODATA_value   -999
>
> I'm not at all sure why you get a yllcorner of 28 when I get 38.  I
> displayed the file directly, and the output aaigrid file and both  
> seemed
> "right side up" and otherwise normal.

Frank,

Thanks for the reply.

That is certainly strange that you get 38.0.  I just built version  
1.5.0 from scratch, but I still don't get 38.0 (here's my session):
jvandorn@temagami:~/public_html/gdal> gdal_translate --version
GDAL 1.5.0, released 2007/12/18
jvandorn@temagami:~/public_html/gdal> gdal_translate -of AAIGrid  
NE_1961-1990_Yearly_Max_Temp.nc NE_1961-1990_Yearly_Max_Temp.ASC
Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
Input file size is 110, 80
0...10...20...30...40...50...60...70...80...90...100 - done.
jvandorn@temagami:~/public_html/gdal> head -n 5  
NE_1961-1990_Yearly_Max_Temp.ASC
ncols        110
nrows        80
xllcorner    -80.750000000000
yllcorner    28.000000000000
cellsize     0.125000000000

Are you doing anything other than just gdal_translate -of AAIGrid,  
when converting that file?  I wouldn't really care all that much if I  
was just needing to convert this one file, as it's easy enough to  
manually change, but as I literally have thousands of files to  
convert to both AAIGrid and GTiff (with lots of different domains),  
it'd be nice to have it done automatically.

I don't know if this could be related to what Joaquim said, in that  
the appearing upside-down is a known issue with the netCDF driver.   
So, yours truly was not upside down?  A gif image of the data is  
here: http://temagami.tosm.ttu.edu/~jvandorn/gdal/ 
NE_1961-1990_Yearly_Max_Temp.gif

>> When I try to convert to the GTiff, from either the AAIGrid or  
>> netCDF format, all I get is a black rectangle as an image.
>
> I suspect this has more to do with the software you are displaying
> the GeoTIFF file with than the actual data.  Many software packages
> don't do particularly savvy autoscaling of floating point image data.
>
> Have you tried displaying it in OpenEV?

I'm not having any luck with OpenEV, just seg faults on me (using the  
FWTools version) when I attempt to open an image.
I've tried opening the generated GeoTiffs in ESRI's ArcMap.  I've  
been successful in opening other sample GeoTiffs with that program,  
but not the Tiff's I created (I also just get the black rectangle for  
GIF/JPEGs if that helps to diagnose at all).

>
> BTW, were you using the linux or win32 version of FWTools.

Using the linux version, and I've tried both OpenEV and  
gdal_translate on 2 different machines:
machine 1) Linux temagami 2.6.11.4-21.15-smp #1 SMP Tue Nov 28  
13:39:58 UTC 2006 x86_64 x86_64 x86_64 GNU/Linux
machine 2) Linux linuxlt 2.6.5-7.252-smp #1 SMP Tue Feb 14 11:11:04  
UTC 2006 i686 i686 i386 GNU/Linux

I built the latest GDAL code today on both machines.  I had to do -- 
without-libtool on the 64bit version, but otherwise, didn't specify  
anything when I ran configure on either machine.

Thanks for the help,
Jeff

>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>

From jluis at ualg.pt  Tue Jan 22 12:54:38 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jan 22 12:54:43 2008
Subject: [gdal-dev] netcdf to geotiff and aaigrid
In-Reply-To: <ADD0793E-247A-4C21-B879-1D4457E8CBEF@atmosresearch.com>
References: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>	<47954DF6.8080203@pobox.com>
	<ADD0793E-247A-4C21-B879-1D4457E8CBEF@atmosresearch.com>
Message-ID: <47962DDE.5070403@ualg.pt>


>
> I don't know if this could be related to what Joaquim said, in that 
> the appearing upside-down is a known issue with the netCDF driver.  
> So, yours truly was not upside down?  A gif image of the data is here: 
> http://temagami.tosm.ttu.edu/~jvandorn/gdal/NE_1961-1990_Yearly_Max_Temp.gif 
>

Jeff,

Those are two different issues. Probably the yll error is related with 
this bug (fixed now)
http://trac.osgeo.org/gdal/ticket/1794#comment:6
I'm using the svn version and the header is correct.

Also, I could open your converted files in Mirone with no problem ... 
except from the fact that they are upside-down

Joaquim
From estrada.adam at gmail.com  Tue Jan 22 13:40:43 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Tue Jan 22 13:40:45 2008
Subject: [gdal-dev] OGR Select Features by Location...
Message-ID: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>

All,
    I have quite a bit of LIDAR data that has been converted to point
shapefiles.  I need to select all the points that intersect with
another polygon shapefile and then write those features to another
layer (shapefile).  ArcGIS will definitely do it but I am afraid that
my machine is not beefy enough to handle LIDAR-sized datasets so I was
wondering if anyone knew of some functionality in OGR lib that would
do this for me?  I cannot seem to figure out how to select by location
with the set of tools that are available i.e ogr2ogr...

Many thanks in advance,
AWE
From maplabs at light42.com  Tue Jan 22 14:31:51 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Tue Jan 22 14:10:00 2008
Subject: [gdal-dev] OGR Select Features by Location...
In-Reply-To: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>
Message-ID: <AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>

thats a good application of PostGIS
I think people can do it with GEOS directly, but I have not written 
that myself

  -Brian


On Jan 22, 2008, at 10:40 AM, estrada.adam@gmail.com wrote:

> All,
>     I have quite a bit of LIDAR data that has been converted to point
> shapefiles.  I need to select all the points that intersect with
> another polygon shapefile and then write those features to another
> layer (shapefile).  ArcGIS will definitely do it but I am afraid that
> my machine is not beefy enough to handle LIDAR-sized datasets so I was
> wondering if anyone knew of some functionality in OGR lib that would
> do this for me?  I cannot seem to figure out how to select by location
> with the set of tools that are available i.e ogr2ogr...
>
> Many thanks in advance,
> AWE
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From vandorn at atmosresearch.com  Tue Jan 22 17:01:49 2008
From: vandorn at atmosresearch.com (Jeff Van Dorn)
Date: Tue Jan 22 17:01:53 2008
Subject: [gdal-dev] netcdf to geotiff and aaigrid
In-Reply-To: <47962DDE.5070403@ualg.pt>
References: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>	<47954DF6.8080203@pobox.com>
	<ADD0793E-247A-4C21-B879-1D4457E8CBEF@atmosresearch.com>
	<47962DDE.5070403@ualg.pt>
Message-ID: <1E653BDF-FBB7-43C7-85D6-63955838DA9D@atmosresearch.com>


On Jan 22, 2008, at 11:54 AM, Joaquim Luis wrote:

>
>>
>> I don't know if this could be related to what Joaquim said, in  
>> that the appearing upside-down is a known issue with the netCDF  
>> driver.  So, yours truly was not upside down?  A gif image of the  
>> data is here: http://temagami.tosm.ttu.edu/~jvandorn/gdal/ 
>> NE_1961-1990_Yearly_Max_Temp.gif
>
> Jeff,
>
> Those are two different issues. Probably the yll error is related  
> with this bug (fixed now)
> http://trac.osgeo.org/gdal/ticket/1794#comment:6
> I'm using the svn version and the header is correct.

Joaquim,

Thanks for the suggestion.  However, assuming (which I know is bad)  
that what your code from SVN is equal to the SVN code I can get from  
the web: gdal-svn-trunk-2008.01.22.tar.gz, I still don't get the  
proper header info, as I was still getting 28.0 instead of the  
expected 38.0 for yll.  However, from this post from awhile back  
(http://lists.osgeo.org/pipermail/gdal-dev/2006-December/ 
011202.html), it seems like someone else was having the same issues I  
was (wrong yll and inverted netCDF file), and made some changes to / 
frmts/aaigrid/aaigriddataset.cpp, and after I did the same, I'm now  
seeing the proper yll and the image is no longer inverted.  Nice. :)

>
> Also, I could open your converted files in Mirone with no  
> problem ... except from the fact that they are upside-down

Thanks so much for mentioning Mirone, as I too can successfully open  
my GeoTiffs using that, so all would appear well for me now. It  
likely shows, but I'm new to GeoTiffs, so have much to learn.

Thanks for all the help.
Jeff

>
> Joaquim

From jluis at ualg.pt  Tue Jan 22 17:42:22 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jan 22 17:42:26 2008
Subject: [gdal-dev] netcdf to geotiff and aaigrid
In-Reply-To: <1E653BDF-FBB7-43C7-85D6-63955838DA9D@atmosresearch.com>
References: <DBE578C0-B440-4A31-BDF2-27D31B69A3FC@atmosresearch.com>	<47954DF6.8080203@pobox.com>
	<ADD0793E-247A-4C21-B879-1D4457E8CBEF@atmosresearch.com>
	<47962DDE.5070403@ualg.pt>
	<1E653BDF-FBB7-43C7-85D6-63955838DA9D@atmosresearch.com>
Message-ID: <4796714E.8090204@ualg.pt>

> Thanks for the suggestion.  However, assuming (which I know is bad) 
> that what your code from SVN is equal to the SVN code I can get from 
> the web: gdal-svn-trunk-2008.01.22.tar.gz, I still don't get the 
> proper header info, as I was still getting 28.0 instead of the 
> expected 38.0 for yll.  However, from this post from awhile back 
> (http://lists.osgeo.org/pipermail/gdal-dev/2006-December/011202.html), 
> it seems like someone else was having the same issues I was (wrong yll 
> and inverted netCDF file), and made some changes to 
> /frmts/aaigrid/aaigriddataset.cpp, and after I did the same, I'm now 
> seeing the proper yll and the image is no longer inverted.  Nice. :)

Jeff,

That's a bit strange. I just did a fresh svn, recompiled and I still get 
the correct yll=38.0
Regarding your solution of changing aaigriddataset.cpp, be careful for 
it might bite you back in the future.
An alternative is to use also GMT. You can convert your .nc files to the 
GMT old netcdf format. For example with
grdreformat your_nc_file.nc tmp.grd=cf
and than use the GDAL's GMT driver, which doesn't suffer from up-down 
problem, to do the conversion to GeoTiff.

Joaquim
From grevedan at hotmail.com  Tue Jan 22 17:55:51 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Tue Jan 22 17:55:53 2008
Subject: [gdal-dev] Warping MrSid Images
In-Reply-To: <47954FE4.8070101@pobox.com>
References: <BAY139-W9B22978223E6AFC2596BCC73E0@phx.gbl>
	<47954FE4.8070101@pobox.com>
Message-ID: <BAY139-W375CE15FA9B42E8F9593ECC73E0@phx.gbl>

Frank, Just thought I'd let you know how well a VRTDataset wrapped around MrSid overviews went.  I was able (naturally) to reduce the time to create a 512 x 428 using a raw MrSid to MEM warp operation from 5 minutes to 5 seconds.  Overall using the VRT wrapped MrSid overviews takes 20 minutes on my crappy PC to generate an image quadtree of a 20 megabyte MrSid to 800 Megabyte uncompressed DDS tiles. Naturally, images without overviews don't benefit from this approach, but even building overviews on images that support them should still cut down overall processing time. Thanks again! -- Dan Greve-- Northrop Grumman Integrated Systems

> Date: Mon, 21 Jan 2008 21:07:32 -0500> From: warmerdam@pobox.com> To: grevedan@hotmail.com> CC: gdal-dev@lists.osgeo.org> Subject: Re: [gdal-dev] Warping MrSid Images> > Dan Greve wrote:> > Greetings,> > > > I'm having an issue with a MrSid dataset. Performance seems to be > > dreadfully slow reprojecting data from this 14336 pix by 14336 pix 8bit, > > 3 band RGB, UTM rotated image with 8 overviews. Whether I warp the image > > into a 512 pix x 428 pix geotiff or a 15620 pix x 13102 pix geotiff, > > (EPSG:4326) both warp operations take over 5 minutes. (5:30 for the > > small image, 7:15 for the large which required 600 megabyte of disk > > output).> >> > Might there be a better way of creating a VRT, grabbing one of the > > overview bands, and using this virtual "overview" dataset in the warp > > operation. Strangely enough, if I translate the source into a GeoTiff, > > and create 8 explicit overviews, the 512 pix x 428 pix warp operation > > takes about 30 seconds.> > Dan,> > Whew, a bad mix. Warped VRT and MrSID.> > Generally speaking "random access" to MrSID tends to be slow. And the> Warped VRT mechanism tends to result in quite a bit of random access> though I haven't analysed it carefully.> > The other thing to keep in mind is that the Warp API always reads the> source data required for a particular output rectangle at full resolution.> This ensures that it can do the resampling kernels and such precisely.> But if you are downsampling greatly this is serious overkill. It would> in fact be nice, and even reasonable, for the warp api to take advantage> of overviews if they are at least of the required resolution. But it is> hard for the warp API to really know the resolution required in many cases> since it is at least potentially possible for a reprojection or other> warp to be highly irregular in resolution across an area and thus "highest> resolution" can't be determined without alot of internal scanning.> > If you want dramatically lower resolution warps from a source image, you are> actually best off building a separate overview file and warping from that.> > BTW, MapServer does not have this problem because it assumes that accuracy> of reprojection is not all that important. So the warper just reads the> source data at something like 2x the expected resolution of the output and> it doesn't really worry about bad edge cases. This makes MapServer fast,> but somewhat sloppy.> > Best regards,> -- > ---------------------------------------+--------------------------------------> I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@pobox.com> light and sound - activate the windows | http://pobox.com/~warmerdam> and watch the world go round - Rush | President OSGeo, http://osgeo.org> 
_________________________________________________________________
Shed those extra pounds with MSN and The Biggest Loser!
http://biggestloser.msn.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080122/63cf79c1/attachment-0001.html
From yann.chemin at gmail.com  Tue Jan 22 19:06:14 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Tue Jan 22 19:06:17 2008
Subject: [gdal-dev] _gdal.py: cannot find _gdal.GDALGetFileList
In-Reply-To: <4796087A.2000606@pobox.com>
References: <4f37eb890801212046t40d10114q17c8d1a6432cc5e5@mail.gmail.com>
	<4796087A.2000606@pobox.com>
Message-ID: <4f37eb890801221606q52f006a5u9b9a57fd99527186@mail.gmail.com>

Yes Frank,

gdal-config --version
1.4.4

This is indeed an old version,
shall upgrade now,

thank you
Yann

On 22/01/2008, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Yann Chemin wrote:
> > Hello,
> > While doing this:
> >
> >  papszFileList = _gdal.GDALGetFileList( hDataset )
> >
> > it gave this error:
> >
> >      papszFileList = _gdal.GDALGetFileList( hDataset )
> >  AttributeError: 'module' object has no attribute 'GDALGetFileList'
> >
> > The imported modules are:
> >
> >  import _gdal
> >  import gdal
> >  from gdalconst import *
> >
> > Am I missing something?
> > thank you for any suggestion...
>
> Yann,
>
> GDALGetFileList() is new to GDAL 1.5.0, and likely only exists in the
> modern Python bindings (not the antique bindings distributed in FWTools
> or built using --with-ogpython).
>
> Is it possible that you are using an older GDAL or a new GDAL with old
> bindings (ie. FWTools)?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
From randre at gmail.com  Tue Jan 22 21:49:53 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Jan 22 21:49:55 2008
Subject: [gdal-dev] OGR Select Features by Location...
In-Reply-To: <AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>
	<AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>
Message-ID: <9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com>

I think that if you built GDAL with GEOS support, you can call on the GEOS
methods from directly within your ogr objects.  (Not sure I'm saying that
right)  There is an example here -
http://mapserver.gis.umn.edu/community/conferences/MUM3/workshop/python/geometriespdf

Code in the example looks something like this:

#! /usr/bin/python

import ogr

r1 = {'minx': -5.0, 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}
r2 = {'minx': 0.0, 'miny': -5.0, 'maxx': 10.0, 'maxy':5.0}

template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f %(maxy)
f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'

w1 = template % r1
w2 = template % r2

g1 = ogr.CreateGeometryFromWkt(w1)
g2 = ogr.CreateGeometryFromWkt(w2)

inter = g1.Intersection(g2)   # <---------------GEOS Intersection command?

print inter

--

On Jan 22, 2008 11:31 AM, Brian Hamlin <maplabs@light42.com> wrote:

> thats a good application of PostGIS
> I think people can do it with GEOS directly, but I have not written
> that myself
>
>  -Brian
>
>
> On Jan 22, 2008, at 10:40 AM, estrada.adam@gmail.com wrote:
>
> > All,
> >     I have quite a bit of LIDAR data that has been converted to point
> > shapefiles.  I need to select all the points that intersect with
> > another polygon shapefile and then write those features to another
> > layer (shapefile).  ArcGIS will definitely do it but I am afraid that
> > my machine is not beefy enough to handle LIDAR-sized datasets so I was
> > wondering if anyone knew of some functionality in OGR lib that would
> > do this for me?  I cannot seem to figure out how to select by location
> > with the set of tools that are available i.e ogr2ogr...
> >
> > Many thanks in advance,
> > AWE
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080122/f45b301e/attachment.html
From miller_joseph at bah.com  Wed Jan 23 12:28:41 2008
From: miller_joseph at bah.com (Miller, Joseph [USA])
Date: Wed Jan 23 12:28:56 2008
Subject: [gdal-dev] gdal_contour with OCI table names and append
Message-ID: <7585F83BC6F1DB4195D8496D9C68963A0348B87B@MCLNEXVS08.resource.ds.bah.com>

Hey all,
I am trying to use gdal_contour (version 1.5.0) to output my contours
directly into oracle spatial layers.  The command below creates a table
called "contour" in my instance:
gdal_contour.exe -a GLC test.asc  -i 2 -f OCI
"OCI:user/password@mydatabase"
 
The problem is that I am unable to specify an alternate table name or
pass in an overwrite or append flag.  I have tried using "-nln", "-lco
OVERWRITE=yes", and even specifying a dst_filename, but nothing seems to
work.
 
Has anyone had any success with this?  If so, can you send me an example
of the command syntax?
 
Thanks,
Joe Miller
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080123/f1af9bbb/attachment.html
From josegomez at gmx.net  Wed Jan 23 12:41:35 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Jan 23 12:41:38 2008
Subject: [gdal-dev] OGR Select Features by Location...
In-Reply-To: <9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>
	<AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>
	<9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com>
Message-ID: <20080123174135.139330@gmx.net>

Hi,


> I think that if you built GDAL with GEOS support, you can call on the GEOS
> methods from directly within your ogr objects.  (Not sure I'm saying that
> right)  There is an example here -
> http://mapserver.gis.umn.edu/community/conferences/MUM3/workshop/python/geometriespdf
> 
> Code in the example looks something like this:
> 
> #! /usr/bin/python
> 
> import ogr
> 
> r1 = {'minx': -5.0, 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}
> r2 = {'minx': 0.0, 'miny': -5.0, 'maxx': 10.0, 'maxy':5.0}
> 
> template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f
> %(maxy)
> f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'
> 
> w1 = template % r1
> w2 = template % r2
> 
> g1 = ogr.CreateGeometryFromWkt(w1)
> g2 = ogr.CreateGeometryFromWkt(w2)
> 
> inter = g1.Intersection(g2)   # <---------------GEOS Intersection command?
> 
> print inter
> 

While this will work, I doubt it will cope with multi-million points. Say that you know the extent of your polygon (min and max x and y coordinates), you could extract the points within that region "easily" with OGR and python:
import ogr
r1 = {'minx': -5.0 , 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}

template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f %(maxy) f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'

w1 = template % r1

g1 = ogr.CreateGeometryFromWkt(w1)
s = ogr.Open (<fname>)
L = s.GetLayer(0) #Or layer whatever
L.SetSpatialFilter ( g1 )
#If it is a square region,
#L.SetSpatialFilterRect(r1['minx'], r1['miny'], r1['maxx'], r1['maxy'])


Clearly, you can use any geometry, not just a square. You can have a shapefile with your polygon geometry, read the first feature, and use that as your SpatialFilter geometry, but I don't know how fast this is. If you decide to go this way, it would be interesting to know how well it performs.

Jose
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
From randre at gmail.com  Wed Jan 23 13:15:16 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Jan 23 13:15:17 2008
Subject: [gdal-dev] OGR Select Features by Location...
In-Reply-To: <20080123174135.139330@gmx.net>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>
	<AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>
	<9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com>
	<20080123174135.139330@gmx.net>
Message-ID: <9c2015090801231015mbcf7246sd38fd3ffd1793ecf@mail.gmail.com>

Hmm, performance is a good point.  I thought that SetSpatialFilter only
returned the intersection of the 2 envelopes though?  Will that accurately
capture only points that are within an odd-shaped polygon.

Roger
--

On Jan 23, 2008 9:41 AM, Jose Luis Gomez Dans <josegomez@gmx.net> wrote:

> Hi,
>
>
> > I think that if you built GDAL with GEOS support, you can call on the
> GEOS
> > methods from directly within your ogr objects.  (Not sure I'm saying
> that
> > right)  There is an example here -
> >
> http://mapserver.gis.umn.edu/community/conferences/MUM3/workshop/python/geometriespdf
> >
> > Code in the example looks something like this:
> >
> > #! /usr/bin/python
> >
> > import ogr
> >
> > r1 = {'minx': -5.0, 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}
> > r2 = {'minx': 0.0, 'miny': -5.0, 'maxx': 10.0, 'maxy':5.0}
> >
> > template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f
> > %(maxy)
> > f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'
> >
> > w1 = template % r1
> > w2 = template % r2
> >
> > g1 = ogr.CreateGeometryFromWkt(w1)
> > g2 = ogr.CreateGeometryFromWkt(w2)
> >
> > inter = g1.Intersection(g2)   # <---------------GEOS Intersection
> command?
> >
> > print inter
> >
>
> While this will work, I doubt it will cope with multi-million points. Say
> that you know the extent of your polygon (min and max x and y coordinates),
> you could extract the points within that region "easily" with OGR and
> python:
> import ogr
> r1 = {'minx': -5.0 , 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}
>
> template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f
> %(maxy) f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'
>
> w1 = template % r1
>
> g1 = ogr.CreateGeometryFromWkt(w1)
> s = ogr.Open (<fname>)
> L = s.GetLayer(0) #Or layer whatever
> L.SetSpatialFilter ( g1 )
> #If it is a square region,
> #L.SetSpatialFilterRect(r1['minx'], r1['miny'], r1['maxx'], r1['maxy'])
>
>
> Clearly, you can use any geometry, not just a square. You can have a
> shapefile with your polygon geometry, read the first feature, and use that
> as your SpatialFilter geometry, but I don't know how fast this is. If you
> decide to go this way, it would be interesting to know how well it performs.
>
> Jose
> --
> GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
> Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080123/f2527636/attachment.html
From warmerdam at pobox.com  Wed Jan 23 13:20:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 23 13:20:41 2008
Subject: [gdal-dev] gdal_contour with OCI table names and append
In-Reply-To: <7585F83BC6F1DB4195D8496D9C68963A0348B87B@MCLNEXVS08.resource.ds.bah.com>
References: <7585F83BC6F1DB4195D8496D9C68963A0348B87B@MCLNEXVS08.resource.ds.bah.com>
Message-ID: <4797856C.1000404@pobox.com>

Miller, Joseph [USA] wrote:
> Hey all,
> I am trying to use gdal_contour (version 1.5.0) to output my contours 
> directly into oracle spatial layers.  The command below creates a table 
> called "contour" in my instance:
> gdal_contour.exe -a GLC test.asc  -i 2 -f OCI "OCI:user/password@mydatabase"
>  
> The problem is that I am unable to specify an alternate table name or 
> pass in an overwrite or append flag.  I have tried using "-nln", "-lco 
> OVERWRITE=yes", and even specifying a dst_filename, but nothing seems to 
> work.
>  
> Has anyone had any success with this?  If so, can you send me an example 
> of the command syntax?

Joe,

Good point!  I have added a -nln switch to define the layer name on
the commandline.  Currently it is hardcoded to "contour".

If you are building from source, replace gdal/apps/gdal_contour.cpp with
http://svn.osgeo.org/gdal/trunk/gdal/apps/gdal_contour.cpp and rebuild/install.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From rob.braswell at unh.edu  Wed Jan 23 13:59:24 2008
From: rob.braswell at unh.edu (Bobby Braswell)
Date: Wed Jan 23 13:59:46 2008
Subject: [gdal-dev] HDF subdatasets
Message-ID: <F03CBEEC-5422-4F8C-8EB1-818F89F7F492@unh.edu>


Hi-

Is it possible to access the names of subdatasets in HDF4 files using  
gdal-python? I can get the SDS names using gdalinfo, but would like  
to do it from within my code.

For example the result of

D = gdal.Open('MCD43A4.A2002001.h18v01.005.2007115060137.hdf')

produces some dictionaries within D containing metadata information,  
but I can't find the subdataset names anywhere, e.g.,

'HDF4_EOS:EOS_GRID:"MCD43A4.A2002001.h18v01.005.2007115060137.hdf":Nadir 
_Reflectance_Band1'

Thanks very much,
Rob Braswell

From nikos.alexandris at felis.uni-freiburg.de  Wed Jan 23 14:04:45 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Wed Jan 23 14:04:48 2008
Subject: [gdal-dev] HDF subdatasets
In-Reply-To: <F03CBEEC-5422-4F8C-8EB1-818F89F7F492@unh.edu>
References: <F03CBEEC-5422-4F8C-8EB1-818F89F7F492@unh.edu>
Message-ID: <1201115085.27068.8.camel@vertical>

Is the script below of any help on how to grep the names you require?

http://mpa.itc.it/markus/useful/modis_hdf2erdas_ll_wgs84.sh

On Wed, 2008-01-23 at 13:59 -0500, Bobby Braswell wrote:
> Hi-
> 
> Is it possible to access the names of subdatasets in HDF4 files using  
> gdal-python? I can get the SDS names using gdalinfo, but would like  
> to do it from within my code.
> 
> For example the result of
> 
> D = gdal.Open('MCD43A4.A2002001.h18v01.005.2007115060137.hdf')
> 
> produces some dictionaries within D containing metadata information,  
> but I can't find the subdataset names anywhere, e.g.,
> 
> 'HDF4_EOS:EOS_GRID:"MCD43A4.A2002001.h18v01.005.2007115060137.hdf":Nadir 
> _Reflectance_Band1'
> 
> Thanks very much,
> Rob Braswell
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-- 
Nikos Alexandris
.
Department of Remote Sensing & Landscape Information Systems
Faculty of Forestry & Environmental Sciences, Albert-Ludwigs-University Freiburg
.
Tel.  +49 (0) 761 203 3697 / Fax.  +49 (0) 761 203 3701 / Skype: Nikos.Alexandris
.
Address: Tennenbacher str. 4, D-79106 Freiburg i. Br., Germany
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080123/07cf3dfa/attachment.bin
From warmerdam at pobox.com  Wed Jan 23 14:15:54 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 23 14:16:16 2008
Subject: [gdal-dev] HDF subdatasets
In-Reply-To: <F03CBEEC-5422-4F8C-8EB1-818F89F7F492@unh.edu>
References: <F03CBEEC-5422-4F8C-8EB1-818F89F7F492@unh.edu>
Message-ID: <4797926A.5000902@pobox.com>

Bobby Braswell wrote:
> 
> Hi-
> 
> Is it possible to access the names of subdatasets in HDF4 files using 
> gdal-python? I can get the SDS names using gdalinfo, but would like to 
> do it from within my code.
> 
> For example the result of
> 
> D = gdal.Open('MCD43A4.A2002001.h18v01.005.2007115060137.hdf')
> 
> produces some dictionaries within D containing metadata information, but 
> I can't find the subdataset names anywhere, e.g.,
> 
> 'HDF4_EOS:EOS_GRID:"MCD43A4.A2002001.h18v01.005.2007115060137.hdf":Nadir_Reflectance_Band1' 


Bobby,

You should be able to fetch the subdataset metadata using:

  sdlist = D.GetMetadata( 'SUBDATASETS' )

eg.

 >>> import gdal
 >>> D = gdal.Open('NISE_SSMIF11_19911227.HDFEOS')
GDAL: GDALOpen(NISE_SSMIF11_19911227.HDFEOS) succeeds as HDF4.
 >>> print D.GetMetadata('SUBDATASETS')
{'SUBDATASET_2_NAME': 
'HDF4_EOS:EOS_GRID:"NISE_SSMIF11_19911227.HDFEOS":Northern Hemisphere:Age', 
'SUBDATASET_4_DESC': '[721x721] Age Southern Hemisphere (8-bit unsigned 
integer)', 'SUBDATASET_4_NAME': 
'HDF4_EOS:EOS_GRID:"NISE_SSMIF11_19911227.HDFEOS":Southern Hemisphere:Age', 
'SUBDATASET_3_NAME': 'HDF4_EOS:EOS_GRID:"NISE_SSMIF11_19911227.HDFEOS":Southern 
Hemisphere:Extent', 'SUBDATASET_2_DESC': '[721x721] Age Northern Hemisphere 
(8-bit unsigned integer)', 'SUBDATASET_1_DESC': '[721x721] Extent Northern 
Hemisphere (8-bit unsigned integer)', 'SUBDATASET_3_DESC': '[721x721] Extent 
Southern Hemisphere (8-bit unsigned integer)', 'SUBDATASET_1_NAME': 
'HDF4_EOS:EOS_GRID:"NISE_SSMIF11_19911227.HDFEOS":Northern Hemisphere:Extent'}

Note, the return value is a dictionary with keys of the form
SUBDATASET_n_NAME and SUBDATASET_n_DESC.

You might also want to skim the portion of

   http://www.gdal.org/gdal_datamodel.html

with the subtitle "SUBDATASETS Domain".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From rob.braswell at unh.edu  Wed Jan 23 14:32:52 2008
From: rob.braswell at unh.edu (Bobby Braswell)
Date: Wed Jan 23 14:33:17 2008
Subject: [gdal-dev] HDF subdatasets
In-Reply-To: <4797926A.5000902@pobox.com>
References: <F03CBEEC-5422-4F8C-8EB1-818F89F7F492@unh.edu>
	<4797926A.5000902@pobox.com>
Message-ID: <69F47B24-FCC5-4158-A618-07B272745FF3@unh.edu>


Thanks very much.

Sorry, I saw that documentation but didn't make the connection about  
how to access the various domains.

Regards,
Rob

On Jan 23, 2008, at 2:15 PM, Frank Warmerdam wrote:

> Bobby Braswell wrote:
>> Hi-
>> Is it possible to access the names of subdatasets in HDF4 files  
>> using gdal-python? I can get the SDS names using gdalinfo, but  
>> would like to do it from within my code.
>> For example the result of
>> D = gdal.Open('MCD43A4.A2002001.h18v01.005.2007115060137.hdf')
>> produces some dictionaries within D containing metadata  
>> information, but I can't find the subdataset names anywhere, e.g.,
>> 'HDF4_EOS:EOS_GRID:"MCD43A4.A2002001.h18v01.005.2007115060137.hdf":Na 
>> dir_Reflectance_Band1'
>
>
> Bobby,
>
> You should be able to fetch the subdataset metadata using:
>
>  sdlist = D.GetMetadata( 'SUBDATASETS' )
>
> eg.
>
> >>> import gdal
> >>> D = gdal.Open('NISE_SSMIF11_19911227.HDFEOS')
> GDAL: GDALOpen(NISE_SSMIF11_19911227.HDFEOS) succeeds as HDF4.
> >>> print D.GetMetadata('SUBDATASETS')
> {'SUBDATASET_2_NAME':  
> 'HDF4_EOS:EOS_GRID:"NISE_SSMIF11_19911227.HDFEOS":Northern  
> Hemisphere:Age', 'SUBDATASET_4_DESC': '[721x721] Age Southern  
> Hemisphere (8-bit unsigned integer)', 'SUBDATASET_4_NAME':  
> 'HDF4_EOS:EOS_GRID:"NISE_SSMIF11_19911227.HDFEOS":Southern  
> Hemisphere:Age', 'SUBDATASET_3_NAME':  
> 'HDF4_EOS:EOS_GRID:"NISE_SSMIF11_19911227.HDFEOS":Southern  
> Hemisphere:Extent', 'SUBDATASET_2_DESC': '[721x721] Age Northern  
> Hemisphere (8-bit unsigned integer)', 'SUBDATASET_1_DESC':  
> '[721x721] Extent Northern Hemisphere (8-bit unsigned integer)',  
> 'SUBDATASET_3_DESC': '[721x721] Extent Southern Hemisphere (8-bit  
> unsigned integer)', 'SUBDATASET_1_NAME':  
> 'HDF4_EOS:EOS_GRID:"NISE_SSMIF11_19911227.HDFEOS":Northern  
> Hemisphere:Extent'}
>
> Note, the return value is a dictionary with keys of the form
> SUBDATASET_n_NAME and SUBDATASET_n_DESC.
>
> You might also want to skim the portion of
>
>   http://www.gdal.org/gdal_datamodel.html
>
> with the subtitle "SUBDATASETS Domain".
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org

From warmerdam at pobox.com  Wed Jan 23 14:34:45 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 23 14:35:06 2008
Subject: [gdal-dev] OGR Select Features by Location...
In-Reply-To: <9c2015090801231015mbcf7246sd38fd3ffd1793ecf@mail.gmail.com>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>
	<AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>
	<9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com>
	<20080123174135.139330@gmx.net>
	<9c2015090801231015mbcf7246sd38fd3ffd1793ecf@mail.gmail.com>
Message-ID: <479796D5.9080808@pobox.com>

Roger Andr? wrote:
> Hmm, performance is a good point.  I thought that SetSpatialFilter only 
> returned the intersection of the 2 envelopes though?  Will that 
> accurately capture only points that are within an odd-shaped polygon.

Roger,

If you build GDAL with GEOS support, and your spatial filter is not
rectangular, OGR will actually do an initial comparison based on
envelopes, but then do a refined test based on proper intersection
of the spatial filter polygon with the feature geometry.

However, this is a fairly expensive operation and I still sort of wonder
How badly you need this sort of operation.  Doing a spatial filtering with
a complex polygon against a *lot* of points will be slow.

I don't recall the details of your original email, but I can't help but
wonder if some post spatial filtering (based on rectangular filters)
examination in your own code might not be more appropriate.

One warning ... I believe GEOS builds some sort of a spatial index for
a polygon for doing intersect operations. But because of the way things
are organized in OGR, GEOS will have to rebuild this spatial index for
every single geometry compared against it.  Not effort is made to preserve
this work.  In fact, I don't even believe this is currently possible through
the GEOS C API though I could be confused.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jordi.inglada at cnes.fr  Thu Jan 24 04:11:10 2008
From: jordi.inglada at cnes.fr (Jordi Inglada)
Date: Thu Jan 24 04:13:03 2008
Subject: [gdal-dev] CNES internship offer
Message-ID: <1201165870.27307.187.camel@localhost>

Dear all,

CNES offers a 5 month internship on "Automatic information extraction
chains using Pl?iades data":

<http://www.cnes.fr/web/1527-cnes-internships-2007.php?view=item&item=5008>

Please do not hesitate to forward this information to students who could
be interested.

Best regards,

J. Inglada

-- 
CNES - DCT/SI/AP - BPI 1219
18, avenue Edouard Belin
31401 Toulouse Cedex 09 - France
Tel. +33.(0)5.61.27.33.97 - Fax. +33.(0)5.61.28.31.09 


From sanjay_ieee at yahoo.com  Thu Jan 24 04:41:45 2008
From: sanjay_ieee at yahoo.com (sanjay boddhu)
Date: Thu Jan 24 04:41:47 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
Message-ID: <990615.34394.qm@web52905.mail.re2.yahoo.com>

Hi ,
     I have been trying to fix (or to be more appropriate, find the cleanup calls to fix) the memory and resource leaks in my application(which uses GDAL to read and write to a tif file). I have tried all the cleanup calls mentioned in the end of :

http://www.gdal.org/gdalinfo.c.html

and reduced lot of memory/resource leaks......But i still get a memory leak pointing in "GDALDataset  Create( ...)"  and few resource leaks of Mutex and TLsAlloc. 

I would really appreciate if anyone can recommend the right cleanup calls for the above leaks or hint me in the right direction.

Thanks

Sanjay



"If you look at what you do not have in life, you don't have anything"
"If you look at what you have in life, you have everything"
       
---------------------------------
Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it now.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080124/45a51d70/attachment.html
From ivan at theory.asu.ru  Thu Jan 24 06:55:01 2008
From: ivan at theory.asu.ru (Ivan Shmakov)
Date: Thu Jan 24 06:55:09 2008
Subject: [gdal-dev] a generic options facility for GDAL
In-Reply-To: <m2r6hhfhog.fsf@cherry.siamics.int> (Ivan Shmakov's message of
	"Thu, 20 Dec 2007 22:35:11 +0600")
References: <m2ir2wi5s6.fsf@cherry.siamics.int>
	<20071218132636.GA10779@ak4719.spb.edu> <4767D2E8.6080109@pmldnet.com>
	<20071218150708.GA11464@ak4719.spb.edu> <47692835.8090801@pmldnet.com>
	<20071219153737.GA17128@ak4719.spb.edu>
	<m2k5nahadt.fsf@cherry.siamics.int> <4769B3F2.8030205@pmldnet.com>
	<m23atyghv1.fsf@cherry.siamics.int> <476A791A.4060905@pmldnet.com>
	<m2r6hhfhog.fsf@cherry.siamics.int>
Message-ID: <m2r6g7moa2.fsf_-_@cherry.siamics.int>

>>>>> Ivan Shmakov <ivan@theory.asu.ru> writes:

[...]

 > However, as I've stated before, different interfaces should be
 > provided.  There're a plenty of GDAL users with a wide variety of
 > needs.  There're tasks where encoding the options within the
 > dataset name would be appropriate, and the same for helper files
 > and separate options structure.

 > I believe, that these needs may all be addressed at once with a
 > generic options facility to be added to GDAL.

	I'm currently preparing a proof of concept patch implementing
	such a generic options facility for GDAL.  If all goes well I'll
	post it within 24 hours or so.

	In particular, it would be possible to override the dimensions
	order, and to specify the dimensions map (thus addressing ticket
	#2079, http://trac.osgeo.org/gdal/ticket/2079.)

 > To this end:

 > * upon ::Open (), GDAL parses the options encoded within the
 > dataset name; they result is passed to the specific driver;

	First version of the patch will probably implement only this way
	of passing the options, although a way to read them from a file
	(as specified by the dataset name) will be provided.  A way to
	selectively apply the options depending on the dataset name
	passed will be provided as well.

 > * upon ::OpenOptions (), application may pass additional options,
 > in addition to those already passed as specified above;

 > * the driver may request additional options from a driver-specific
 > helper file;

 > * all these options will become available to the parts of the
 > driver requesting them.

 > To my mind, the algorithm roughly outlined above covers well your
 > case, as well as, I believe, many other cases.

	After the patch will be ready, I'm going to evaluate it on my
	datasets, in particular on AIRS L2 and MODIS L3 BRDF/Albedo
	(MOD43B).  I'll post my experience (if any) some time later.

From dev at geoaspects.com  Thu Jan 24 07:39:44 2008
From: dev at geoaspects.com (Geo Aspects Development)
Date: Thu Jan 24 07:40:02 2008
Subject: [gdal-dev] OGR Feature Styles
Message-ID: <E22918CC-0E2C-4C25-B58D-5EFE5472414D@geoaspects.com>

hi,

I have a couple of questions regarding feature styles in OGR.

Firstly, it appears that there is no way to count or list the names of  
styles stored in a StyleTable - the list is private and there are no  
methods to access it. So, for example, in a UI, I can't list the  
available styles by name for the user to choose from. Is this correct?

Secondly, the section in the documentation marked  "Feature Styles can  
be stored at 2 levels" suggests that a style can be defined at the  
dataset or feature level. In fact, there is a  StyleTable property for  
OGRDataSource, for OGRLayer and for OGRFeature, however, none of the  
drivers appear to use these tables (they simply store the style string  
directly in the feature without using a table), plus the StyleMgr only  
uses the one style table it has been initialized with (so you have to  
preload it from the dataset, layer or feature) - which means that "all  
that stuff should be transparent to the OGR client " is not exactly  
the case ie If I want to look up a style name (as denoted by an @name  
in the style string) I need to search the style tables stored in the  
feature, then the layer and  then the dataset myself?

Thanks
Tim
From mchapman at texelinc.com  Thu Jan 24 08:19:04 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Thu Jan 24 08:22:12 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
In-Reply-To: <990615.34394.qm@web52905.mail.re2.yahoo.com>
References: <990615.34394.qm@web52905.mail.re2.yahoo.com>
Message-ID: <589636693-1201180927-cardhu_decombobulator_blackberry.rim.net-905951294-@bxe022.bisx.prod.on.blackberry>

Not sure if this is it but are you calling GDALCleanupAll?  It's called that or GDALAllCleanup or something.  I think it is declared near GDALRegisterAll.  

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: sanjay boddhu <sanjay_ieee@yahoo.com>

Date: Thu, 24 Jan 2008 01:41:45 
To:gdal-dev@lists.osgeo.org
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)


Hi ,
???? I have been trying to fix (or to be more appropriate, find the cleanup calls to fix) the memory and resource leaks in my application(which uses GDAL to read and write to a tif file). I have tried all the cleanup calls mentioned in the end of :

http://www.gdal.org/gdalinfo.c.html

and reduced lot of memory/resource leaks......But i still get a memory leak pointing in "GDALDataset? Create( ...)"? and few resource leaks of Mutex and TLsAlloc. 

I would really appreciate if anyone can recommend the right cleanup calls for the above leaks or hint me in the right direction.

Thanks

Sanjay



"If you look at what you do not have in life, you don't have anything"
"If you look at what you have in life, you have everything"
 
----------------
Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it now. <http://us.rd.yahoo.com/evt=51733/*http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ > _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From pmallas at rsmas.miami.edu  Thu Jan 24 09:56:07 2008
From: pmallas at rsmas.miami.edu (Paul Mallas)
Date: Thu Jan 24 09:56:17 2008
Subject: [gdal-dev] Re: GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
References: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
Message-ID: <fna8u8$svb$1@ger.gmane.org>

I fixed this problem by editing a Cygwin script /usr/bin/perlld from:

my $CC = 'gcc';
to:
my $CC = 'g++';

This seems to fix other perl problems (non-GDAL) with Cygwin as well. 
When I pointed this out, the Cygwin folks thought it was a bug but 
wanted to investigate why this was set to gcc in the first place.

Anyway, my problem remains with perl swig bindings on Cygwin. I know Ari 
wants nothing more to do with this issue, but since we're on the 
subject, maybe someone else might able to give me a clue.

It seems I have a problem linking with the gdal lib with external libs. 
  I get a ton of these types of messages below - I think the issue has 
to do with the beginning underscore in the calls because rikdataset.cpp 
calls "uncompress" not "_uncompress":

/usr/local/lib/libgdal.a(rikdataset.o):rikdataset.cpp:(.text+0x519): 
undefined reference to `_uncompress'
/usr/local/lib/libgdal.a(jpeg2000dataset.o): In function 
`_ZN18JPEG2000RasterBandC2EP15JPEG2000Datasetiii':
/home/pmallas/gdal/frmts/jpeg2000/jpeg2000dataset.cpp:257: undefined 
reference to `_jas_matrix_create'
....

I am ignorant of how libraries get called - probably the windows demands 
a prepended underscore for library calls or something. And I know there 
are flags to manipulate leading underscores with g++ (like 
-fleading-underscore), but I could never get them to work. I have spent 
considerable time trying to sort this out with no luck.

Any insights would be appreciated.

jingmuyang@aol.com wrote:
> I have successfully built GDAL 1.5.0 Perl binding on Cygwin and the 
> followings might be helpful for those who experience problems.
> 
> 1. Go to directory gdal-1.5.0/swig/perl and run 'perl Makefile.PL'.  The 
> following four Makefiles should be created if it succeeds:
> 
> Makefile_Geo__GDAL
> Makefile_Geo__GDAL__Const
> Makefile_Geo__OGR
> Makefile_Geo__OSR
> 
> 2. Edit each of the four Makefiles by appending -lstdc++ after each 
> -lgdal and save them.
> 
> 3. Run make using each of the four Makefiles as follows:
> 
> make -f Makefile_Geo__GDAL
> make -f Makefile_Geo__GDAL__Const
> make -f Makefile_Geo__OGR
> make -f Makefile_Geo__OSR
> 
> 4. Install the Perl Geo::GDAL package by running
> 
> make -f Makefile_Geo__GDAL install
> 
> That it.  Enjoy!
> 
> Jim
> 
> ------------------------------------------------------------------------
> More new features than ever. Check out the new AOL Mail 
> <http://o.aolcdn.com/cdn.webmail.aol.com/mailtour/aol/en-us/text.htm?ncid=aolcmp00050000000003>!
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Thu Jan 24 13:57:40 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 24 13:57:55 2008
Subject: [gdal-dev] OGR Feature Styles
In-Reply-To: <E22918CC-0E2C-4C25-B58D-5EFE5472414D@geoaspects.com>
References: <E22918CC-0E2C-4C25-B58D-5EFE5472414D@geoaspects.com>
Message-ID: <4798DFA4.9080803@pobox.com>

Geo Aspects Development wrote:
> hi,
> 
> I have a couple of questions regarding feature styles in OGR.
> 
> Firstly, it appears that there is no way to count or list the names of 
> styles stored in a StyleTable - the list is private and there are no 
> methods to access it. So, for example, in a UI, I can't list the 
> available styles by name for the user to choose from. Is this correct?

Tim,

That is correct.  I wouldn't mind adding a few extra accessors
for this though - at least in trunk.

> Secondly, the section in the documentation marked  "Feature Styles can 
> be stored at 2 levels" suggests that a style can be defined at the 
> dataset or feature level. In fact, there is a  StyleTable property for 
> OGRDataSource, for OGRLayer and for OGRFeature, however, none of the 
> drivers appear to use these tables (they simply store the style string 
> directly in the feature without using a table), plus the StyleMgr only 
> uses the one style table it has been initialized with (so you have to 
> preload it from the dataset, layer or feature) - which means that "all 
> that stuff should be transparent to the OGR client " is not exactly the 
> case ie If I want to look up a style name (as denoted by an @name in the 
> style string) I need to search the style tables stored in the feature, 
> then the layer and  then the dataset myself?

You are correct.  In practice styling is only actually implemented at the
feature level.  A number of the things envisaged in the style document
were not put into practice.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From even.rouault at mines-paris.org  Thu Jan 24 14:30:09 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 24 14:30:15 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
In-Reply-To: <990615.34394.qm@web52905.mail.re2.yahoo.com>
References: <990615.34394.qm@web52905.mail.re2.yahoo.com>
Message-ID: <200801242030.10348.even.rouault@mines-paris.org>

Hi,

If you want precise help, you should mention the exact version of GDAL you're 
using, and report the exact message you get from your memory leak detector, 
including filenames and line numbers. (If you use Valgrind under Linux, a 
Valgrind trace would help a lot). Your source code would of course help to 
see if it's a memory leak in GDAL or in the way you're using it in your code.

Best regards.

Le Thursday 24 January 2008 10:41:45 sanjay boddhu, vous avez ?crit?:
> Hi ,
>      I have been trying to fix (or to be more appropriate, find the cleanup
> calls to fix) the memory and resource leaks in my application(which uses
> GDAL to read and write to a tif file). I have tried all the cleanup calls
> mentioned in the end of :
>
> http://www.gdal.org/gdalinfo.c.html
>
> and reduced lot of memory/resource leaks......But i still get a memory leak
> pointing in "GDALDataset  Create( ...)"  and few resource leaks of Mutex
> and TLsAlloc.
>
> I would really appreciate if anyone can recommend the right cleanup calls
> for the above leaks or hint me in the right direction.
>
> Thanks
>
> Sanjay
>
>
>
> "If you look at what you do not have in life, you don't have anything"
> "If you look at what you have in life, you have everything"
>
> ---------------------------------
> Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it
> now.


From sanjay_ieee at yahoo.com  Thu Jan 24 14:44:08 2008
From: sanjay_ieee at yahoo.com (sanjay boddhu)
Date: Thu Jan 24 14:44:10 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
In-Reply-To: <589636693-1201180927-cardhu_decombobulator_blackberry.rim.net-905951294-@bxe022.bisx.prod.on.blackberry>
Message-ID: <862155.36268.qm@web52912.mail.re2.yahoo.com>

Hi Martin,
              I did try calling all the below cleanup calls:

VSICleanupFileManager();
GDALDestroyDriverManager();
CPLCleanupTLS();
CPLFinderClean();
CPLFreeConfig();

But i  still have the leak with call stack showing the below order(poiting to VSIMalloc):

Type    Quantity    Total (bytes)    Allocation Location    Sequence

Leak exiting program    1    4    gdal14.dll, cpl_vsisimple.cpp, VSIMalloc - line 280    52
  Memory Leak Exiting Program: Address 0x04266CF8 (4) allocated by malloc.

Allocation Call Stack - Thread 0 [0x0CA0]
VSIMalloc    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_vsisimple.cpp    280
CPLMalloc    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_conv.cpp    127
GTiffCreate    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gtiff\geotiff.cpp    3568
Create    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gtiff\geotiff.cpp    3640
Create    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldriver.cpp    109

and the resource leaks are(one of the mutex) looks like:

Type    Quantity    Deallocator    Allocation Location    Sequence

CreateMutexA    1    CloseHandle    gdal14.dll, cpl_multiproc.cpp, CPLCreateMutex - line 457    53
  Resource Leak Exiting Program: Handle 0x00000110 allocated by CreateMutexA.

Allocation Call Stack - Thread 0 [0x0CA0]
CPLCreateMutex    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    457
CPLCreateOrAcquireMutex    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    117
CPLMutexHolder    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    63
GetGDALDriverManager    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldrivermanager.cpp    72
GDALAllRegister    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gdalallregister.cpp    73

And TLSAlloc leak looks like:

Type    Quantity    Deallocator    Allocation Location    Sequence

TlsAlloc    1    TlsFree    gdal14.dll, cpl_multiproc.cpp, CPLGetTLSList - line 642    58
  Resource Leak Exiting Program: Handle 0x00000021 allocated by TlsAlloc.

Allocation Call Stack - Thread 0 [0x0CA0]
CPLGetTLSList    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    642
CPLGetTLS    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    954
CPLGetStaticResult    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_path.cpp    55
CPLGetDirname    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_path.cpp    165
AutoLoadDrivers    c:\documents and settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldrivermanager.cpp    553

Sorry to dump the call stack..but if martin/someone can find any obvious mistake/ missing something in my calling the cleanup calls that would be helpful.

Thanks
Sanjay

mchapman@texelinc.com wrote: Not sure if this is it but are you calling GDALCleanupAll?  It's called that or GDALAllCleanup or something.  I think it is declared near GDALRegisterAll.  

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: sanjay boddhu 

Date: Thu, 24 Jan 2008 01:41:45 
To:gdal-dev@lists.osgeo.org
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)


Hi ,
     I have been trying to fix (or to be more appropriate, find the cleanup calls to fix) the memory and resource leaks in my application(which uses GDAL to read and write to a tif file). I have tried all the cleanup calls mentioned in the end of :

http://www.gdal.org/gdalinfo.c.html

and reduced lot of memory/resource leaks......But i still get a memory leak pointing in "GDALDataset  Create( ...)"  and few resource leaks of Mutex and TLsAlloc. 

I would really appreciate if anyone can recommend the right cleanup calls for the above leaks or hint me in the right direction.

Thanks

Sanjay



"If you look at what you do not have in life, you don't have anything"
"If you look at what you have in life, you have everything"
 
----------------
Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it now.  _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



"If you look at what you do not have in life, you don't have anything"
"If you look at what you have in life, you have everything"
       
---------------------------------
Never miss a thing.   Make Yahoo your homepage.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080124/f1f5b5f4/attachment.html
From sanjay_ieee at yahoo.com  Thu Jan 24 14:46:21 2008
From: sanjay_ieee at yahoo.com (sanjay boddhu)
Date: Thu Jan 24 14:46:24 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
In-Reply-To: <200801242030.10348.even.rouault@mines-paris.org>
Message-ID: <133264.23205.qm@web52910.mail.re2.yahoo.com>

Thanks Even...I'm using the 1.4.2 and attached the call stack log in the  previous message

Even Rouault <even.rouault@mines-paris.org> wrote: Hi,

If you want precise help, you should mention the exact version of GDAL you're 
using, and report the exact message you get from your memory leak detector, 
including filenames and line numbers. (If you use Valgrind under Linux, a 
Valgrind trace would help a lot). Your source code would of course help to 
see if it's a memory leak in GDAL or in the way you're using it in your code.

Best regards.

Le Thursday 24 January 2008 10:41:45 sanjay boddhu, vous avez ?crit :
> Hi ,
>      I have been trying to fix (or to be more appropriate, find the cleanup
> calls to fix) the memory and resource leaks in my application(which uses
> GDAL to read and write to a tif file). I have tried all the cleanup calls
> mentioned in the end of :
>
> http://www.gdal.org/gdalinfo.c.html
>
> and reduced lot of memory/resource leaks......But i still get a memory leak
> pointing in "GDALDataset  Create( ...)"  and few resource leaks of Mutex
> and TLsAlloc.
>
> I would really appreciate if anyone can recommend the right cleanup calls
> for the above leaks or hint me in the right direction.
>
> Thanks
>
> Sanjay
>
>
>
> "If you look at what you do not have in life, you don't have anything"
> "If you look at what you have in life, you have everything"
>
> ---------------------------------
> Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it
> now.





"If you look at what you do not have in life, you don't have anything"
"If you look at what you have in life, you have everything"
       
---------------------------------
Never miss a thing.   Make Yahoo your homepage.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080124/93494fcc/attachment.html
From sanjay_ieee at yahoo.com  Thu Jan 24 15:02:00 2008
From: sanjay_ieee at yahoo.com (sanjay boddhu)
Date: Thu Jan 24 15:02:03 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
In-Reply-To: <200801242030.10348.even.rouault@mines-paris.org>
Message-ID: <274505.50734.qm@web52912.mail.re2.yahoo.com>

Hi Even,
            I'm using Visual studio  with devpartner and below is the part of my app(but reproduces the leaks i have mentioned), its just simply reading from a tif file and creating a another one:

main()
{
.........
.........
GDALAllRegister();
GDALDriver *drv = GetGDALDriverManager()->GetDriverByName("GTiff");
GDALDataset *in_img = (GDALDataset*) GDALOpen(input_file_name.c_str(), GA_ReadOnly);
GDALRasterBand *band = in_img->GetRasterBand(1);
unsigned short *in_buff = new unsigned short[size_x * size_y];
band->RasterIO(GF_Read, 0, 0, size_x, size_y, in_buff, size_x, size_y, GDT_UInt16, 0, 0);
GDALDataset *out_img = drv->Create(output_file_name.c_str(), size_x, size_y, 3, GDT_UInt16, NULL);
band = out_img->GetRasterBand(1);
        band->RasterIO(GF_Write, 0, 0, size_x, size_y, in_buff, size_x, size_y, GDT_UInt16, 0, 0);
        
 GDALClose( out_img );
 GDALClose( in_img );

 delete[] in_buff;

       
VSICleanupFileManager();
GDALDestroyDriverManager();
CPLCleanupTLS();
CPLFinderClean();
CPLFreeConfig();

.....
.....
}

Even Rouault <even.rouault@mines-paris.org> wrote: Hi,

If you want precise help, you should mention the exact version of GDAL you're 
using, and report the exact message you get from your memory leak detector, 
including filenames and line numbers. (If you use Valgrind under Linux, a 
Valgrind trace would help a lot). Your source code would of course help to 
see if it's a memory leak in GDAL or in the way you're using it in your code.

Best regards.

Le Thursday 24 January 2008 10:41:45 sanjay boddhu, vous avez ?crit :
> Hi ,
>      I have been trying to fix (or to be more appropriate, find the cleanup
> calls to fix) the memory and resource leaks in my application(which uses
> GDAL to read and write to a tif file). I have tried all the cleanup calls
> mentioned in the end of :
>
> http://www.gdal.org/gdalinfo.c.html
>
> and reduced lot of memory/resource leaks......But i still get a memory leak
> pointing in "GDALDataset  Create( ...)"  and few resource leaks of Mutex
> and TLsAlloc.
>
> I would really appreciate if anyone can recommend the right cleanup calls
> for the above leaks or hint me in the right direction.
>
> Thanks
>
> Sanjay
>
>
>
> "If you look at what you do not have in life, you don't have anything"
> "If you look at what you have in life, you have everything"
>
> ---------------------------------
> Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it
> now.





"If you look at what you do not have in life, you don't have anything"
"If you look at what you have in life, you have everything"
       
---------------------------------
Never miss a thing.   Make Yahoo your homepage.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080124/5933adda/attachment-0001.html
From even.rouault at mines-paris.org  Thu Jan 24 15:09:46 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 24 15:09:51 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
In-Reply-To: <862155.36268.qm@web52912.mail.re2.yahoo.com>
References: <862155.36268.qm@web52912.mail.re2.yahoo.com>
Message-ID: <200801242109.47352.even.rouault@mines-paris.org>

The leak reported in geotiff.cpp was indeed a leak in GDAL 1.4.2. It's fixed 
since GDAL 1.5.0, so you should consider upgrading.

As far the ressource leaks, I can't really say as it's probably windows 
specific stuff I can't test on my platform, but I wouldn't worry too much if 
I were you. These are probably just one time leaks.

Le Thursday 24 January 2008 20:44:08 sanjay boddhu, vous avez ?crit?:
> Hi Martin,
>               I did try calling all the below cleanup calls:
>
> VSICleanupFileManager();
> GDALDestroyDriverManager();
> CPLCleanupTLS();
> CPLFinderClean();
> CPLFreeConfig();
>
> But i  still have the leak with call stack showing the below order(poiting
> to VSIMalloc):
>
> Type    Quantity    Total (bytes)    Allocation Location    Sequence
>
> Leak exiting program    1    4    gdal14.dll, cpl_vsisimple.cpp, VSIMalloc
> - line 280    52 Memory Leak Exiting Program: Address 0x04266CF8 (4)
> allocated by malloc.
>
> Allocation Call Stack - Thread 0 [0x0CA0]
> VSIMalloc    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_vsisimple.cpp    280
> CPLMalloc    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_conv.cpp    127
> GTiffCreate    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gtiff\geotiff.cpp    3568
> Create    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gtiff\geotiff.cpp    3640
> Create    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldriver.cpp    109
>
> and the resource leaks are(one of the mutex) looks like:
>
> Type    Quantity    Deallocator    Allocation Location    Sequence
>
> CreateMutexA    1    CloseHandle    gdal14.dll, cpl_multiproc.cpp,
> CPLCreateMutex - line 457    53 Resource Leak Exiting Program: Handle
> 0x00000110 allocated by CreateMutexA.
>
> Allocation Call Stack - Thread 0 [0x0CA0]
> CPLCreateMutex    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    457
> CPLCreateOrAcquireMutex    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    117
> CPLMutexHolder    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    63
> GetGDALDriverManager    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldrivermanager.cpp   
> 72 GDALAllRegister    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gdalallregister.cpp    73
>
> And TLSAlloc leak looks like:
>
> Type    Quantity    Deallocator    Allocation Location    Sequence
>
> TlsAlloc    1    TlsFree    gdal14.dll, cpl_multiproc.cpp, CPLGetTLSList -
> line 642    58 Resource Leak Exiting Program: Handle 0x00000021 allocated
> by TlsAlloc.
>
> Allocation Call Stack - Thread 0 [0x0CA0]
> CPLGetTLSList    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    642
> CPLGetTLS    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    954
> CPLGetStaticResult    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_path.cpp    55
> CPLGetDirname    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_path.cpp    165
> AutoLoadDrivers    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldrivermanager.cpp   
> 553
>
> Sorry to dump the call stack..but if martin/someone can find any obvious
> mistake/ missing something in my calling the cleanup calls that would be
> helpful.
>
> Thanks
> Sanjay
>
> mchapman@texelinc.com wrote: Not sure if this is it but are you calling
> GDALCleanupAll?  It's called that or GDALAllCleanup or something.  I think
> it is declared near GDALRegisterAll.
>
> Martin
>
> Sent via BlackBerry by AT&T
>
> -----Original Message-----
> From: sanjay boddhu
>
> Date: Thu, 24 Jan 2008 01:41:45
> To:gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
>
>
> Hi ,
>      I have been trying to fix (or to be more appropriate, find the cleanup
> calls to fix) the memory and resource leaks in my application(which uses
> GDAL to read and write to a tif file). I have tried all the cleanup calls
> mentioned in the end of :
>
> http://www.gdal.org/gdalinfo.c.html
>
> and reduced lot of memory/resource leaks......But i still get a memory leak
> pointing in "GDALDataset  Create( ...)"  and few resource leaks of Mutex
> and TLsAlloc.
>
> I would really appreciate if anyone can recommend the right cleanup calls
> for the above leaks or hint me in the right direction.
>
> Thanks
>
> Sanjay
>
>
>
> "If you look at what you do not have in life, you don't have anything"
> "If you look at what you have in life, you have everything"
>
> ----------------
> Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it
> now.  _______________________________________________ gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> "If you look at what you do not have in life, you don't have anything"
> "If you look at what you have in life, you have everything"
>
> ---------------------------------
> Never miss a thing.   Make Yahoo your homepage.


From sanjay_ieee at yahoo.com  Thu Jan 24 15:18:44 2008
From: sanjay_ieee at yahoo.com (sanjay boddhu)
Date: Thu Jan 24 15:18:46 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
In-Reply-To: <200801242109.47352.even.rouault@mines-paris.org>
Message-ID: <719254.62244.qm@web52912.mail.re2.yahoo.com>

Thanks Even I'll upgrade and check back on the leaks

Sanjay

Even Rouault <even.rouault@mines-paris.org> wrote: The leak reported in geotiff.cpp was indeed a leak in GDAL 1.4.2. It's fixed 
since GDAL 1.5.0, so you should consider upgrading.

As far the ressource leaks, I can't really say as it's probably windows 
specific stuff I can't test on my platform, but I wouldn't worry too much if 
I were you. These are probably just one time leaks.

Le Thursday 24 January 2008 20:44:08 sanjay boddhu, vous avez ?crit :
> Hi Martin,
>               I did try calling all the below cleanup calls:
>
> VSICleanupFileManager();
> GDALDestroyDriverManager();
> CPLCleanupTLS();
> CPLFinderClean();
> CPLFreeConfig();
>
> But i  still have the leak with call stack showing the below order(poiting
> to VSIMalloc):
>
> Type    Quantity    Total (bytes)    Allocation Location    Sequence
>
> Leak exiting program    1    4    gdal14.dll, cpl_vsisimple.cpp, VSIMalloc
> - line 280    52 Memory Leak Exiting Program: Address 0x04266CF8 (4)
> allocated by malloc.
>
> Allocation Call Stack - Thread 0 [0x0CA0]
> VSIMalloc    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_vsisimple.cpp    280
> CPLMalloc    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_conv.cpp    127
> GTiffCreate    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gtiff\geotiff.cpp    3568
> Create    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gtiff\geotiff.cpp    3640
> Create    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldriver.cpp    109
>
> and the resource leaks are(one of the mutex) looks like:
>
> Type    Quantity    Deallocator    Allocation Location    Sequence
>
> CreateMutexA    1    CloseHandle    gdal14.dll, cpl_multiproc.cpp,
> CPLCreateMutex - line 457    53 Resource Leak Exiting Program: Handle
> 0x00000110 allocated by CreateMutexA.
>
> Allocation Call Stack - Thread 0 [0x0CA0]
> CPLCreateMutex    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    457
> CPLCreateOrAcquireMutex    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    117
> CPLMutexHolder    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    63
> GetGDALDriverManager    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldrivermanager.cpp   
> 72 GDALAllRegister    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\frmts\gdalallregister.cpp    73
>
> And TLSAlloc leak looks like:
>
> Type    Quantity    Deallocator    Allocation Location    Sequence
>
> TlsAlloc    1    TlsFree    gdal14.dll, cpl_multiproc.cpp, CPLGetTLSList -
> line 642    58 Resource Leak Exiting Program: Handle 0x00000021 allocated
> by TlsAlloc.
>
> Allocation Call Stack - Thread 0 [0x0CA0]
> CPLGetTLSList    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    642
> CPLGetTLS    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_multiproc.cpp    954
> CPLGetStaticResult    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_path.cpp    55
> CPLGetDirname    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\port\cpl_path.cpp    165
> AutoLoadDrivers    c:\documents and
> settings\sboddhu\desktop\gdal142\gdal-1.4.2\gcore\gdaldrivermanager.cpp   
> 553
>
> Sorry to dump the call stack..but if martin/someone can find any obvious
> mistake/ missing something in my calling the cleanup calls that would be
> helpful.
>
> Thanks
> Sanjay
>
> mchapman@texelinc.com wrote: Not sure if this is it but are you calling
> GDALCleanupAll?  It's called that or GDALAllCleanup or something.  I think
> it is declared near GDALRegisterAll.
>
> Martin
>
> Sent via BlackBerry by AT&T
>
> -----Original Message-----
> From: sanjay boddhu
>
> Date: Thu, 24 Jan 2008 01:41:45
> To:gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
>
>
> Hi ,
>      I have been trying to fix (or to be more appropriate, find the cleanup
> calls to fix) the memory and resource leaks in my application(which uses
> GDAL to read and write to a tif file). I have tried all the cleanup calls
> mentioned in the end of :
>
> http://www.gdal.org/gdalinfo.c.html
>
> and reduced lot of memory/resource leaks......But i still get a memory leak
> pointing in "GDALDataset  Create( ...)"  and few resource leaks of Mutex
> and TLsAlloc.
>
> I would really appreciate if anyone can recommend the right cleanup calls
> for the above leaks or hint me in the right direction.
>
> Thanks
>
> Sanjay
>
>
>
> "If you look at what you do not have in life, you don't have anything"
> "If you look at what you have in life, you have everything"
>
> ----------------
> Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it
> now.  _______________________________________________ gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> "If you look at what you do not have in life, you don't have anything"
> "If you look at what you have in life, you have everything"
>
> ---------------------------------
> Never miss a thing.   Make Yahoo your homepage.





"If you look at what you do not have in life, you don't have anything"
"If you look at what you have in life, you have everything"
       
---------------------------------
Be a better friend, newshound, and know-it-all with Yahoo! Mobile.  Try it now.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080124/94d0b957/attachment.html
From ivan at theory.asu.ru  Thu Jan 24 16:10:45 2008
From: ivan at theory.asu.ru (Ivan Shmakov)
Date: Thu Jan 24 16:10:54 2008
Subject: [gdal-dev] Re: a generic options facility for GDAL
In-Reply-To: <m2r6g7moa2.fsf_-_@cherry.siamics.int> (Ivan Shmakov's message of
	"Thu, 24 Jan 2008 17:55:01 +0600")
References: <m2ir2wi5s6.fsf@cherry.siamics.int>
	<20071218132636.GA10779@ak4719.spb.edu> <4767D2E8.6080109@pmldnet.com>
	<20071218150708.GA11464@ak4719.spb.edu> <47692835.8090801@pmldnet.com>
	<20071219153737.GA17128@ak4719.spb.edu>
	<m2k5nahadt.fsf@cherry.siamics.int> <4769B3F2.8030205@pmldnet.com>
	<m23atyghv1.fsf@cherry.siamics.int> <476A791A.4060905@pmldnet.com>
	<m2r6hhfhog.fsf@cherry.siamics.int>
	<m2r6g7moa2.fsf_-_@cherry.siamics.int>
Message-ID: <m23asnlyju.fsf@cherry.siamics.int>

* Preface

	Here I'm posting a proof of concept patch implementing (a part
	of) a generic options facility for GDAL.  The goals of having
	such a facility are as follows (see, e. g., [1, 2]):

	* provide a generic way to obtain the information about a
	  specific dataset from a helper file, either distributed with
	  GDAL, or created by the user; (especially for the information
	  that cannot be obtained by any other means, or needs some
	  complex heuristics to be implemented by the driver);

	* provide an easy to use API for an application developer to
	  pass the options to a GDAL driver;

	* provide a way to specify options for the dataset by encoding
	  them within the dataset name.

	Reaching the first goal will allow for some hard-coded defaults
	and heuristics to be thrown away from the drivers' source and be
	put into a helper file, thus easing the maintenance of the
	driver and offering more flexibility to the user.

	The last goal is so that the extra flexibility will be available
	in a backward compatible way.

	By no means the code or the interface below is of a production
	quality.  I explicitly state that it is not intended for
	inclusion into the official GDAL source.  The code is provided
	so that the people interested in the problem could evaluate the
	approach and (I hope) eventually come up with a solution
	suitable for inclusion into GDAL.

	The added code is in the public domain.

	Use the code at your own risk.

* The interface

	The interface currently implemented allows for the hierarchy of
	options to be specified either with a helper file, or from the
	command line.  E. g.:

$ cat "$GDAL_OPTIONS_FILE" 
{ match "^HDF4_EOS:EOS_GRID:.*:MOD_Grid_BRDF:Albedo\$" } {
    options hdf4 { dims { iy 0 ix 1 iband 2 i4 3 } }
}
{ match "^HDF4_EOS:EOS_GRID:.*:MOD_Grid_BRDF:BRDF_Albedo_Parameters\$" } {
    options hdf4 { dims { iy 0 ix 1 iband 2 i4 3 } }
}
$ file=2006-08-02-brdf-22-3/2006-08-02-brdf.1.hdf
$ dataset="HDF4_EOS:EOS_GRID:\"${file}\":MOD_Grid_BRDF:BRDF_Albedo_Parameters"
$ gdalinfo "${dataset}:OPTIONS:dict create hdf4 { dims { iy 0 ix 1 iband 2 i4 3 } }" 
Driver: HDF4Image/HDF4 Dataset
Size is 1200, 1200
...
Band 1 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
Band 2 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
...
Band 29 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
Band 30 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
$ 

	Either way the options specified are as follows:

hdf4
 `-- dims
     |-- iy    => 0
     |-- ix    => 1
     |-- iband => 2
     `-- i4    => 3

	The HDF4 driver fails to determine the meaning of the dimensions
	when no options are specified:

$ gdalinfo "${dataset}"
Driver: HDF4Image/HDF4 Dataset
Size is 1200, 1200
...
Band 1 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
Band 2 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
...
Band 11999 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
Band 12000 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
$ 

	The options support is currently added only to the HDF4 driver
	and only the options in `dims' subspace (namely, `ix', `iy',
	`iband' and `i4') are handled.

	There're no substantial API to be described at the moment.
	Please refer to the source if you need to know the details.

* The implementation

	In order not to invent either a string representation or a
	simple hierarchial database, I've chosen to use the facilities
	provided by Tcl [3] -- the language notable for its ``everything
	is a string'' concept.  In particular, I've used the
	``dictionaries'' facility [4] introduced in Tcl version 8.5.

	Using of a programming language here also allows for different
	strategies for the options processing to be easily evaluated.
	In particular, the `GDAL_OPTIONS_FILE' support is currently
	implemented in pure Tcl:

$ cat gdal-options.tcl 

proc merge-in { args } {
    global GDALdict
    ## .
    set GDALdict [ uplevel \#0 { dict merge } [ list $GDALdict ] $args ]
}

proc match { regexp } {
    global GDALinfo
    ## .
    regexp -- $regexp $GDALinfo
}

proc options { args } {
    ## .
    merge-in [ uplevel \#0 { dict create } $args ]
}

set varn env(GDAL_OPTIONS_FILE)
if { [ info exists $varn ]
     && [ file exists [ set $varn ] ] } {
    set chan [ open [ set $varn ] "r" ]
    foreach { condition body } [ read $chan ] {
        if { [ uplevel \#0 $condition ] } {
            uplevel \#0 $body
        }
    }
    close $chan
}

## .
set GDALdict
$ 

	In order to use such a file, the Tcl `source' [5] command may be
	specified in the `:OPTIONS:' part, e. g. (provided that
	`$GDAL_OPTIONS_FILE' points to a suitable file):

$ gdalinfo "${dataset}:OPTIONS:source gdal-options.tcl" 
Driver: HDF4Image/HDF4 Dataset
Size is 1200, 1200
...
Band 1 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
Band 2 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
...
Band 29 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
Band 30 Block=1200x1 Type=Int16, ColorInterp=Gray
  NoData Value=32767
$ 

	Using both the helper file and the dataset name is also
	possible, e. g.:

HDF4_EOS:EOS_GRID:"FILE.hdf":Foo_Grid:Bar_Field:OPTIONS:source gdal-options.tcl; options hdf4 { subspace { option-1 value-1 } }

[1] http://lists.osgeo.org/pipermail/gdal-dev/2007-November/014853.html
[2] http://lists.osgeo.org/pipermail/gdal-dev/2007-December/015343.html
[3] http://www.tcl.tk/
[4] http://www.tcl.tk/man/tcl8.5/TclCmd/dict.htm
[5] http://www.tcl.tk/man/tcl8.5/TclCmd/source.htm

	The changes were made against SVN r13584.  The short description
	is as follows.

    * patch #2 -- options support for the HDF4 driver

    frmts/hdf4/hdf4imagedataset.cpp
    (HDF4ImageDataset::go_dims): New member.
    (HDF4ImageDataset::go_geoloc): Likewise.
    (HDF4ImageDataset::HDF4ImageDataset): Initialize `go_dims' and
    `go_geoloc' with a null pointer.
    (HDF4ImageDataset::GetImageDimensions): Override guessing if the
    dimensions indices were specified explicitly via the options.
    (HDF4ImageDataset::Open): Initialize `go_dims' and `go_geoloc' using
    the `options' field of the `GDALOpenInfo' object passed.

    * patch #1 -- generic options facility, proof of concept

    gcore/gdal_priv.h
    (tcl8.5/tcl.h): Include it.
    (struct gdal_options): New type.
    (gdal_options_process_string): New function declaration.
    (gdal_options_sub): Likewise.
    (gdal_option_get): Likewise.
    (gdal_option_put): Likewise.
    (GDALOpenInfo::GDALOpenInfo): Allow for optional `go_override' argument.
    (GDALOpenInfo::options): New member.

    gcore/gdalopeninfo.cpp
    (GDALOpenInfo::GDALOpenInfo): Added `go_override' argument; initialize
    the `options' member; implemented `:OPTIONS:' handling.
    (GDALOpenInfo::~GDALOpenInfo): Call `gdal_options_free' on `options'.
    (assert.h): Include it.
    (MALLOC_VAR): New macro.
    (MALLOC_ARY): Likewise.
    (tclobjs_from_strings): New function.
    (tclobjs_decrement_refcount): Likewise.
    (dict_get): Likewise.
    (gdal_options_new): Likewise.
    (gdal_options_free): Likewise.
    (gdal_options_process_string): Likewise.
    (gdal_options_sub): Likewise.
    (gdal_option_get): Likewise.
    (gdal_option_put): Likewise.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: patch-1.diff.gz
Type: text/x-diff
Size: 10430 bytes
Desc: patch #1 -- generic options facility, proof of concept
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080125/b0aeda79/patch-1.diff-0001.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: patch-2.diff.gz
Type: text/x-diff
Size: 4871 bytes
Desc: patch #2 -- options support for the HDF4 driver
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080125/b0aeda79/patch-2.diff-0001.bin
From szekerest at gmail.com  Thu Jan 24 17:33:48 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan 24 17:33:51 2008
Subject: [gdal-dev] RFC 21: OGR SQL type cast and field name alias
Message-ID: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>

Folks,

I've put together an RFC to provide support for specifying field name
alias and the type in the OGR SQL select list. The RFC can be found
here:

http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

The corresponding tracking bug that contains the proposed patch:

http://trac.osgeo.org/gdal/ticket/2171

Any comments and ideas about the proposal would be helpful.

Best regards,

Tamas
From nicholas.g.lawrence at mainroads.qld.gov.au  Thu Jan 24 18:01:43 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Thu Jan 24 18:02:08 2008
Subject: [gdal-dev] ERDAS Imagine to ERMapper
Message-ID: <OF3443627C.D4342DC7-ON4A2573DA.007E2814-4A2573DA.007E7F69@transport.qld.gov.au>


Hello,

I have a large (19 Gigabyte) erdas imagine file which I want to bring into
ERMapper.

I have downloaded the minimalist windows executables from
http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries

I am running windows xp with 2 GB of RAM.

I know I should use the gdal_translate command, but I am unsure of the best
output format.

ecw won't work for the file size is too large.

I thought GTiff would work, but I can't force BIGTIFF=YES

Is there a plain old band-interleaved-by-line format available?

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From nbarker at ittvis.com  Thu Jan 24 18:10:09 2008
From: nbarker at ittvis.com (Norman Barker)
Date: Thu Jan 24 18:10:15 2008
Subject: [gdal-dev] ERDAS Imagine to ERMapper
References: <OF3443627C.D4342DC7-ON4A2573DA.007E2814-4A2573DA.007E7F69@transport.qld.gov.au>
Message-ID: <B1B624F7C110834B96594065A74F3A540916B09E@gemini.rsinc.com>

Hi,

ERMapper supports jpeg2000 and whilst you can't convert to jpeg2000
using the gdal jp2ecw driver (since the driver is limited to 500mb not
ERMapper) you can with JP2KAK

So,

gdal_translate -OF JP2KAK in.img out.jp2

but it might take a while ....

Norman


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of
nicholas.g.lawrence@mainroads.qld.gov.au
Sent: Thursday, January 24, 2008 4:02 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] ERDAS Imagine to ERMapper


Hello,

I have a large (19 Gigabyte) erdas imagine file which I want to bring
into
ERMapper.

I have downloaded the minimalist windows executables from
http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries

I am running windows xp with 2 GB of RAM.

I know I should use the gdal_translate command, but I am unsure of the
best
output format.

ecw won't work for the file size is too large.

I thought GTiff would work, but I can't force BIGTIFF=YES

Is there a plain old band-interleaved-by-line format available?

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From bfraser at geoanalytic.com  Thu Jan 24 18:13:55 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Jan 24 18:14:10 2008
Subject: [gdal-dev] ERDAS Imagine to ERMapper
References: <OF3443627C.D4342DC7-ON4A2573DA.007E2814-4A2573DA.007E7F69@transport.qld.gov.au>
Message-ID: <03f201c85ede$cafa6fa0$140002c0@shark>

Nick,

  GDAL v1.5.0 has ERmapper's ERS/BIL format built-in.  You
could try that..

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta
----- Original Message ----- 
From: <nicholas.g.lawrence@mainroads.qld.gov.au>
To: <gdal-dev@lists.osgeo.org>
Sent: Thursday, January 24, 2008 4:01 PM
Subject: [gdal-dev] ERDAS Imagine to ERMapper


>
> Hello,
>
> I have a large (19 Gigabyte) erdas imagine file which I
want to bring into
> ERMapper.
>
> I have downloaded the minimalist windows executables from
> http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
>
> I am running windows xp with 2 GB of RAM.
>
> I know I should use the gdal_translate command, but I am
unsure of the best
> output format.
>
> ecw won't work for the file size is too large.
>
> I thought GTiff would work, but I can't force BIGTIFF=YES
>
> Is there a plain old band-interleaved-by-line format
available?
>
> Regards,
> nick
>
>
>
************************************************************
***********
> WARNING: This e-mail (including any attachments) may
contain legally
> privileged, confidential or private information and may be
protected by
> copyright. You may only use it if you are the person(s) it
was intended
> to be sent to and if you use it in an authorised way.  No
one is
> allowed to use, review, alter, transmit, disclose,
distribute, print
> or copy this e-mail without appropriate authority.
>
> If this e-mail was not intended for you and was sent to
you by mistake,
> please telephone or e-mail me immediately, destroy any
hardcopies of
> this e-mail and delete it and any copies of it from your
computer
> system. Any right which the sender may have under
copyright law, and
> any legal privilege and confidentiality attached to this
e-mail is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this e-mail does
not contain
> and is not affected by computer viruses, defects or
interference by
> third parties or replication problems (including
incompatibility with
> your computer system).
>
> Opinions contained in this e-mail do not necessarily
reflect the
> opinions of the Queensland Department of Main Roads,
Queensland
> Transport or Maritime Safety Queensland, or endorsed
organisations
> utilising the same infrastructure.
>
************************************************************
***********
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nicholas.g.lawrence at mainroads.qld.gov.au  Thu Jan 24 19:20:16 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Thu Jan 24 19:28:21 2008
Subject: [gdal-dev] ERDAS Imagine to ERMapper
In-Reply-To: <03f201c85ede$cafa6fa0$140002c0@shark>
Message-ID: <OF825FB00D.EB2FBC92-ON4A2573DB.0000DF21-4A2573DB.0001DAA0@transport.qld.gov.au>

> > Hello,
> >
> > I have a large (19 Gigabyte) erdas imagine file which I
> want to bring into
> > ERMapper.
> >
> > I have downloaded the minimalist windows executables from
> > http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> >
> > I am running windows xp with 2 GB of RAM.
> >
> > I know I should use the gdal_translate command, but I am
> unsure of the best
> > output format.
> >
> > ecw won't work for the file size is too large.
> >
> > I thought GTiff would work, but I can't force BIGTIFF=YES
> >
> > Is there a plain old band-interleaved-by-line format
> available?
> >
> > Regards,
> > nick

> Nick,

> GDAL v1.5.0 has ERmapper's ERS/BIL format built-in.  You
> could try that..

> Brent Fraser

Brent,

I downloaded GDAL today, and according to the name of the
zip file I do have v1.5

But what is the short form of ERMapper's ERS/BIL format?
I can not find it in the list of supported formats at
http://www.gdal.org/formats_list.html

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From jingmuyang at aol.com  Thu Jan 24 19:36:05 2008
From: jingmuyang at aol.com (Jingmu Yang)
Date: Thu Jan 24 19:36:39 2008
Subject: [gdal-dev] Re: GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <fna8u8$svb$1@ger.gmane.org>
References: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
	<fna8u8$svb$1@ger.gmane.org>
Message-ID: <47992EF4.9010603@aol.com>

I experienced the same problem when I initially built GDAL 1.5.0 on 
Cygwin.  After analyzing the libraries I found that I had old GDAL 
libraries installed on /usr/local/lib/.  What I did was to delete those 
old libraries from /usr/local/lib and then built GDAL 1.5.0 without Perl 
binding.  After GDAL 1.5.0 was installed on /usr/local/ I built Perl 
binding as I described and I no longer have the link problems.

Hope this can help.

Jim

Paul Mallas wrote:
> I fixed this problem by editing a Cygwin script /usr/bin/perlld from:
>
> my $CC = 'gcc';
> to:
> my $CC = 'g++';
>
> This seems to fix other perl problems (non-GDAL) with Cygwin as well. 
> When I pointed this out, the Cygwin folks thought it was a bug but 
> wanted to investigate why this was set to gcc in the first place.
>
> Anyway, my problem remains with perl swig bindings on Cygwin. I know 
> Ari wants nothing more to do with this issue, but since we're on the 
> subject, maybe someone else might able to give me a clue.
>
> It seems I have a problem linking with the gdal lib with external 
> libs.  I get a ton of these types of messages below - I think the 
> issue has to do with the beginning underscore in the calls because 
> rikdataset.cpp calls "uncompress" not "_uncompress":
>
> /usr/local/lib/libgdal.a(rikdataset.o):rikdataset.cpp:(.text+0x519): 
> undefined reference to `_uncompress'
> /usr/local/lib/libgdal.a(jpeg2000dataset.o): In function 
> `_ZN18JPEG2000RasterBandC2EP15JPEG2000Datasetiii':
> /home/pmallas/gdal/frmts/jpeg2000/jpeg2000dataset.cpp:257: undefined 
> reference to `_jas_matrix_create'
> ....
>
> I am ignorant of how libraries get called - probably the windows 
> demands a prepended underscore for library calls or something. And I 
> know there are flags to manipulate leading underscores with g++ (like 
> -fleading-underscore), but I could never get them to work. I have 
> spent considerable time trying to sort this out with no luck.
>
> Any insights would be appreciated.
>
> jingmuyang@aol.com wrote:
>> I have successfully built GDAL 1.5.0 Perl binding on Cygwin and the 
>> followings might be helpful for those who experience problems.
>>
>> 1. Go to directory gdal-1.5.0/swig/perl and run 'perl Makefile.PL'.  
>> The following four Makefiles should be created if it succeeds:
>>
>> Makefile_Geo__GDAL
>> Makefile_Geo__GDAL__Const
>> Makefile_Geo__OGR
>> Makefile_Geo__OSR
>>
>> 2. Edit each of the four Makefiles by appending -lstdc++ after each 
>> -lgdal and save them.
>>
>> 3. Run make using each of the four Makefiles as follows:
>>
>> make -f Makefile_Geo__GDAL
>> make -f Makefile_Geo__GDAL__Const
>> make -f Makefile_Geo__OGR
>> make -f Makefile_Geo__OSR
>>
>> 4. Install the Perl Geo::GDAL package by running
>>
>> make -f Makefile_Geo__GDAL install
>>
>> That it.  Enjoy!
>>
>> Jim
>>
>> ------------------------------------------------------------------------
>> More new features than ever. Check out the new AOL Mail 
>> <http://o.aolcdn.com/cdn.webmail.aol.com/mailtour/aol/en-us/text.htm?ncid=aolcmp00050000000003>! 
>>
>>
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nicholas.g.lawrence at mainroads.qld.gov.au  Thu Jan 24 20:13:18 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Thu Jan 24 20:13:24 2008
Subject: [gdal-dev] ERDAS Imagine to ERMapper
In-Reply-To: <OF825FB00D.EB2FBC92-ON4A2573DB.0000DF21-4A2573DB.0001DAA0@transport.qld.gov.au>
Message-ID: <OFE07933CB.71060C46-ON4A2573DB.00067E93-4A2573DB.0006B558@transport.qld.gov.au>

> > > Hello,
> > >
> > > I have a large (19 Gigabyte) erdas imagine file which I
> > want to bring into
> > > ERMapper.
> > >
> > > I have downloaded the minimalist windows executables from
> > > http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> > >
> > > I am running windows xp with 2 GB of RAM.
> > >
> > > I know I should use the gdal_translate command, but I am
> > unsure of the best
> > > output format.
> > >
> > > ecw won't work for the file size is too large.
> > >
> > > I thought GTiff would work, but I can't force BIGTIFF=YES
> > >
> > > Is there a plain old band-interleaved-by-line format
> > available?
> > >
> > > Regards,
> > > nick

> > Nick,

> > GDAL v1.5.0 has ERmapper's ERS/BIL format built-in.  You
> > could try that..

> > Brent Fraser

> Brent,

> I downloaded GDAL today, and according to the name of the
> zip file I do have v1.5

> But what is the short form of ERMapper's ERS/BIL format?
> I can not find it in the list of supported formats at
> http://www.gdal.org/formats_list.html

> Regards,
> nick

Me again.

I have found the short form for ERMapper's ERS/BIL format within
the help for gdal_translate itself.

I'm running the translate now. I'm guessing it will take hours
to complete.

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From COUTUJF at dfo-mpo.gc.ca  Thu Jan 24 20:48:32 2008
From: COUTUJF at dfo-mpo.gc.ca (=?iso-8859-1?Q?Coutu=2C_Jean-Fran=E7ois?=)
Date: Thu Jan 24 20:48:35 2008
Subject: [gdal-dev] Gdaladdo error
Message-ID: <F85017E987358E4BBD45EE552104788A012A2159@lauqueex01.lau.dfo-mpo.ca>

Hi, 

I am trying to build overviews for 100+ geotiff and tiff files. 
Gdaladdo only screws up on a handful. 
Can anyone tell me what is wrong with my files? 

I have: GDAL 1.5.0b1, FWTools 2.0.3, released 2007/12/10 

Here is the error I get: 

------------------------ 
gdaladdo -r average 1965_04_07_Prince_Rupert_PK00893_PK05204.TIF 2 4 8 16 
0...10...20...30...40...50...60...70...80...90...100 - done. 
Assertion failed: tif->tif_flags&TIFF_BIGTIFF, file tif_dirwrite.c, line 2027 

This application has requested the Runtime to terminate it in an unusual way. 
Please contact the application's support team for more information. 
------------------------- 

Here is gdalinfo output before and after: 

------------------------- 
Driver: GTiff/GeoTIFF 
Files: 1965_04_07_Prince_Rupert_PK00893_PK05204.TIF 
       1965_04_07_Prince_Rupert_PK00893_PK05204.aux 
Size is 7800, 12100 
Coordinate System is: 
PROJCS["unnamed", 
    GEOGCS["NAD83", 
        DATUM["North_American_Datum_1983", 
            SPHEROID["GRS 1980",6378137,298.2572221010002, 
                AUTHORITY["EPSG","7019"]], 
            AUTHORITY["EPSG","6269"]], 
        PRIMEM["Greenwich",0], 
        UNIT["degree",0.0174532925199433], 
        AUTHORITY["EPSG","4269"]], 
    PROJECTION["Transverse_Mercator"], 
    PARAMETER["latitude_of_origin",0], 
    PARAMETER["central_meridian",-129], 
    PARAMETER["scale_factor",0.9996], 
    PARAMETER["false_easting",500000], 
    PARAMETER["false_northing",0], 
    UNIT["metre",1, 
        AUTHORITY["EPSG","9001"]], 
    AUTHORITY["EPSG","26909"]] 
Origin = (416530.000000000000000,6021255.000000000000000) 
Pixel Size = (0.100000000000000,-0.100000000000000) 
Metadata: 
  AREA_OR_POINT=Area 
  TIFFTAG_IMAGEDESCRIPTION=ORTHO: LL XY: 416530.000 6020045.000 PIXELS: 0.10 0.10 ROT: 0.00 
  TIFFTAG_SOFTWARE=Adobe Photoshop CS Windows 
  TIFFTAG_DATETIME=2007:08:28 22:22:19 
  TIFFTAG_XRESOLUTION=72 
  TIFFTAG_YRESOLUTION=72 
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch) 
Image Structure Metadata: 
  INTERLEAVE=BAND 
Corner Coordinates: 
Upper Left  (  416530.000, 6021255.000) (130d17'1.20"W, 54d19'56.30"N) 
Lower Left  (  416530.000, 6020045.000) (130d16'59.98"W, 54d19'17.17"N) 
Upper Right (  417310.000, 6021255.000) (130d16'18.03"W, 54d19'56.76"N) 
Lower Right (  417310.000, 6020045.000) (130d16'16.82"W, 54d19'17.62"N) 
Center      (  416920.000, 6020650.000) (130d16'39.01"W, 54d19'36.96"N) 
Band 1 Block=7800x1 Type=Byte, ColorInterp=Gray 
  Metadata: 
    LAYER_TYPE=athematic 
<GDALRasterAttributeTable/> 

---------------------------------- 

After: 

---------------------------------- 

ERROR 1: 1965_04_07_Prince_Rupert_PK00893_PK05204.TIF:No space to read TIFF dire 
ctory 
ERROR 1: TIFFReadDirectory:Failed to read directory at offset 127257924 
gdalinfo failed - unable to open '1965_04_07_Prince_Rupert_PK00893_PK05204.TIF'. 

----------------------------------- 

Thanks! 

------------------------------------------------------------------------ 
Jean-Francois Coutu 
Canadian Coast Guard 
coutujf at dfo dash mpo dot gc dot ca 

"The fate of the Universe is a decision yet to be made, one which we will intelligently consider when the time is right"  -R. Kurzweil


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080124/c2355bc3/attachment.html
From yann.chemin at gmail.com  Thu Jan 24 21:52:03 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Thu Jan 24 21:52:29 2008
Subject: [gdal-dev] TRMM in GDAL?
Message-ID: <4f37eb890801241852x5a50886q37ae02f88b36718@mail.gmail.com>

Hello I am trying to convert TRMM 2B31 from HDF into anything more
common for processing (Gtiff, HFA, ...)

Basically gdalinfo returns this:

yann@gis4400:~/TRMM$ gdalinfo 2B31.070101.52014.6.HDF
Driver: HDF4/Hierarchical Data Format Release 4
Size is 512, 512
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

while in the  2B31.070101.52014.6.HDF.XML:
<SpatialDomainContainer>
    <HorizontalSpatialDomainContainer>
      <BoundingRectangle>
        <WestBoundingCoordinate>-180</WestBoundingCoordinate>
        <NorthBoundingCoordinate>40</NorthBoundingCoordinate>
        <EastBoundingCoordinate>180</EastBoundingCoordinate>
        <SouthBoundingCoordinate>-40</SouthBoundingCoordinate>
      </BoundingRectangle>
    </HorizontalSpatialDomainContainer>
  </SpatialDomainContainer>

Any suggestion please?
Yann
From oneingray at gmail.com  Fri Jan 25 00:31:38 2008
From: oneingray at gmail.com (Ivan Shmakov)
Date: Fri Jan 25 00:31:42 2008
Subject: [gdal-dev] Re: HDF-EOS vs. GDAL: order of dimensions
In-Reply-To: <476A791A.4060905@pmldnet.com>
References: <m2ir2wi5s6.fsf@cherry.siamics.int>
	<20071218132636.GA10779@ak4719.spb.edu> <4767D2E8.6080109@pmldnet.com>
	<20071218150708.GA11464@ak4719.spb.edu> <47692835.8090801@pmldnet.com>
	<20071219153737.GA17128@ak4719.spb.edu>
	<m2k5nahadt.fsf@cherry.siamics.int> <4769B3F2.8030205@pmldnet.com>
	<m23atyghv1.fsf@cherry.siamics.int> <476A791A.4060905@pmldnet.com>
Message-ID: <b1e3a35f0801242131j15006a48ub831eccce9880da4@mail.gmail.com>

>>>>> Lucena, Ivan <ivan.lucena@pmldnet.com> writes:

 >> I believe that the driver should be given options already read and
 >> parsed, and not the helper file name or its contents.  This way,
 >> both the options parsing and the whole options concept could be
 >> much generalized among the drivers.  And it requires introducing
 >> an ``options'' structure, which may be initialized either by GDAL
 >> reading the helper file, or by the calling application itself.

 > I am dealing with a real scenario where because of the complexity,
 > variability and quantity of HDF files I can't see how the open
 > option would play a role. For me that should be a separated thread,
 > IMHO.

 > But that is how I would like to see it working:

 > There are 350 HDF that I want to server it a webapp. First thing to
 > do is to create a catalog. I am not a big Mapserver expert but I
 > guess that you should use *gdaltindex* for that. That will happen
 > in the server machine just once, during some sort of data
 > preparation process, and once in a while when you update it with
 > new files.

 > Running gdaltindex, the HDF4 driver will look for hdf-helper file
 > on the same folder as the driver and then on <gdal>\data. If there
 > is a match between a pair {product name,dataset name} on the data
 > file and one similar pair on the helper file, the driver will use
 > the dimension order from the helper file, ex.:

 > SUBDATASET_52_NAME=HDF4_EOS:EOS_SWATH:"MYD06_L2.A2006220.hdf":mod06:Cloud_Mask_1km
 > SUBDATASET_52_DESC=[2040x1354x2] Cloud_Mask_1km mod06 (8-bit integer)

 > --> This dataset has 2 bands of 2040x1354.

 > SUBDATASET_28_NAME=HDF4_EOS:EOS_SWATH:"MYD06_L2.A2006220.hdf":mod06:Radiance_Variance
 > SUBDATASET_28_DESC=[7x408x270] Radiance_Variance mod06 (16-bit integer)

 > --> This dataset has 7 bands of 408x270

 > That is because this file is a very known problematic product that
 > doesn't have dimension order information for some datasets:

 > Product: "MODIS Level 2 Cloud Properties"
 > Dataset: "Cloud_Mask_1km"
 > Dataset: "Radiance_Variance"

 > Does it make sense?

        Could you please test your data with the proof of concept
        patch I've posted to the list recently?  I've put the
        following into my "$GDAL_OPTIONS_FILE" and it seems to make
        GDAL work correctly with the dataset:

$ cat "$GDAL_OPTIONS_FILE"
{ expr 0 } { some lines skipped }
{ match "^HDF4_EOS:EOS_SWATH:.*:mod06:Cloud_Mask_1km\$" } {
    options hdf4 { dims { iy 0 ix 1 iband 2 } }
}
$ gdalinfo 'HDF4_EOS:EOS_SWATH:"MOD06_L2.A2002234.0515.003.2002243234435.hdf":mod06:Radiance_Variance:OPTIONS:source
gdal-options.tcl'
Driver: HDF4Image/HDF4 Dataset
Files: MOD06_L2.A2002234.0515.003.2002243234435.hdf
Size is 1354, 2040
Coordinate System is `'
GCP Projection = (null)
GCP[  0]: Id=, Info=
          (2.5,2.5) -> (72.4288864135742,45.6274261474609,0)
...
GCP[143]: Id=, Info=
          (1322.5,2037.5) -> (91.8692855834961,24.5590171813965,0)
Metadata:
  HDFEOSVersion=HDFEOS_V2.4
  Number_of_Instrument_Scans=2040
  Maximum_Number_of_1km_Frames=1354
...
  Parameter_Type=MODIS Input
  Cell_Along_Swath_Sampling=1, 2030, 1
  Cell_Across_Swath_Sampling=1, 1354, 1
  Geolocation_Pointer=External MODIS geolocation product
  description=See MODIS atmosphere QA plan for details

Geolocation:
  X_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"MOD06_L2.A2002234.0515.003.2002243234435.hdf":mod06:Longitude
  X_BAND=1
  Y_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"MOD06_L2.A2002234.0515.003.2002243234435.hdf":mod06:Latitude
  Y_BAND=1
  PIXEL_OFFSET=2
  PIXEL_STEP=5
  LINE_OFFSET=2
  LINE_STEP=5
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 2040.0)
Upper Right ( 1354.0,    0.0)
Lower Right ( 1354.0, 2040.0)
Center      (  677.0, 1020.0)
Band 1 Block=1354x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
Band 2 Block=1354x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
$

        While without the helper file GDAL seems to misinterpret the
        dimensions:

$ gdalinfo 'HDF4_EOS:EOS_SWATH:"MOD06_L2.A2002234.0515.003.2002243234435.hdf":mod06:Cloud_Mask_1km'
Driver: HDF4Image/HDF4 Dataset
Files: MOD06_L2.A2002234.0515.003.2002243234435.hdf
Size is 2, 1354
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.4
  Number_of_Instrument_Scans=2040
  Maximum_Number_of_1km_Frames=1354
...
  Parameter_Type=MODIS Input
  Cell_Along_Swath_Sampling=1, 2030, 1
  Cell_Across_Swath_Sampling=1, 1354, 1
  Geolocation_Pointer=External MODIS geolocation product
  description=See MODIS atmosphere QA plan for details

Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1354.0)
Upper Right (    2.0,    0.0)
Lower Right (    2.0, 1354.0)
Center      (    1.0,  677.0)
Band 1 Block=2x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
Band 2 Block=2x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
...
Band 2039 Block=2x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
Band 2040 Block=2x1 Type=Byte, ColorInterp=Gray
  NoData Value=0
$
From warmerdam at pobox.com  Fri Jan 25 00:41:09 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 25 00:41:12 2008
Subject: [gdal-dev] TRMM in GDAL?
In-Reply-To: <4f37eb890801241852x5a50886q37ae02f88b36718@mail.gmail.com>
References: <4f37eb890801241852x5a50886q37ae02f88b36718@mail.gmail.com>
Message-ID: <47997675.3020005@pobox.com>

Yann Chemin wrote:
> Hello I am trying to convert TRMM 2B31 from HDF into anything more
> common for processing (Gtiff, HFA, ...)
> 
> Basically gdalinfo returns this:
> 
> yann@gis4400:~/TRMM$ gdalinfo 2B31.070101.52014.6.HDF
> Driver: HDF4/Hierarchical Data Format Release 4
> Size is 512, 512
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)

Yann,

The above sounds like the bogus parent dataset.  Were there
subdatasets?  If so, do a gdalinfo on them and see if they have
meaningful georeferencing.

If there are subdatsets but they lack georeferencing, you may
find you can use "-a_ullr -180 40 180 40" on a gdal_translate line
to assign the following bounds as part of a translation.

Best regards,

> while in the  2B31.070101.52014.6.HDF.XML:
> <SpatialDomainContainer>
>     <HorizontalSpatialDomainContainer>
>       <BoundingRectangle>
>         <WestBoundingCoordinate>-180</WestBoundingCoordinate>
>         <NorthBoundingCoordinate>40</NorthBoundingCoordinate>
>         <EastBoundingCoordinate>180</EastBoundingCoordinate>
>         <SouthBoundingCoordinate>-40</SouthBoundingCoordinate>
>       </BoundingRectangle>
>     </HorizontalSpatialDomainContainer>
>   </SpatialDomainContainer>
> 
> Any suggestion please?
> Yann
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Jan 25 00:48:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 25 00:48:40 2008
Subject: [gdal-dev] Gdaladdo error
In-Reply-To: <F85017E987358E4BBD45EE552104788A012A2159@lauqueex01.lau.dfo-mpo.ca>
References: <F85017E987358E4BBD45EE552104788A012A2159@lauqueex01.lau.dfo-mpo.ca>
Message-ID: <47997832.10104@pobox.com>

Coutu wrote:
> Hi,
> 
> I am trying to build overviews for 100+ geotiff and tiff files.
> Gdaladdo only screws up on a handful.
> Can anyone tell me what is wrong with my files?
> 
> I have: GDAL 1.5.0b1, FWTools 2.0.3, released 2007/12/10
> 
> Here is the error I get:
> 
> ------------------------
> gdaladdo -r average 1965_04_07_Prince_Rupert_PK00893_PK05204.TIF 2 4 8 16
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> Assertion failed: tif->tif_flags&TIFF_BIGTIFF, file tif_dirwrite.c, line 
> 2027
> 
> This application has requested the Runtime to terminate it in an unusual 
> way.
> Please contact the application's support team for more information.

Jean-Fran?ois,

This looks quite serious.  Could you verify the problem still occurs with
FWTools 2.0.5?  If so, can you post a bug report in the GDAL Trac and make
a file demonstrating the problem available?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From nicholas.g.lawrence at mainroads.qld.gov.au  Fri Jan 25 00:38:17 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Fri Jan 25 00:49:58 2008
Subject: [gdal-dev] ERDAS Imagine to ERMapper
In-Reply-To: <OFE07933CB.71060C46-ON4A2573DB.00067E93-4A2573DB.0006B558@transport.qld.gov.au>
Message-ID: <OFA5717264.D74C3850-ON4A2573DB.001E28C2-4A2573DB.001EF840@transport.qld.gov.au>

> > > > Hello,
> > > >
> > > > I have a large (19 Gigabyte) erdas imagine file which I
> > > want to bring into
> > > > ERMapper.
> > > >
> > > > I have downloaded the minimalist windows executables from
> > > > http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> > > >
> > > > I am running windows xp with 2 GB of RAM.
> > > >
> > > > I know I should use the gdal_translate command, but I am
> > > unsure of the best
> > > > output format.
> > > >
> > > > ecw won't work for the file size is too large.
> > > >
> > > > I thought GTiff would work, but I can't force BIGTIFF=YES
> > > >
> > > > Is there a plain old band-interleaved-by-line format
> > > available?
> > > >
> > > > Regards,
> > > > nick

> > > Nick,

> > > GDAL v1.5.0 has ERmapper's ERS/BIL format built-in.  You
> > > could try that..

> > > Brent Fraser

> > Brent,

> > I downloaded GDAL today, and according to the name of the
> > zip file I do have v1.5

> > But what is the short form of ERMapper's ERS/BIL format?
> > I can not find it in the list of supported formats at
> > http://www.gdal.org/formats_list.html

> > Regards,
> > nick

> Me again.

> I have found the short form for ERMapper's ERS/BIL format within
> the help for gdal_translate itself.

> I'm running the translate now. I'm guessing it will take hours
> to complete.

> Regards,
> nick

I should provide some background.

I have an ERDAS Imagine file of 19 Gigabytes that I want to import
into ERMapper. Two other files (next largest size is 16 Gigabytes)
imported okay. I only have problems with the last image.

The top half of the image is fine. The lower half is all black.

My supplier can view the entire image at his end.

I used ArcMap to open the image at my end and it is fine.

This confirms that the file itself is okay.

I downloaded GDAL v1.5 and used gdal_translate to go from
ERDAS Imagine format to ERMapper format as I stated in my
previous message.

The processing has now finished, and the result is the same error
of the lower half of the image being all black.

So, GDAL is giving the same results for me as ERMapper does. But
ArcMap displays it fine.

Excuse me, I just thought of something.

Okay, back again. I zoomed in with ArcMap, and after a while, the
screen went all black. ERDAS Imagine has pyramid layers right? Is
my problem that the pyramid layers are displaying fine but the
lowest layer is bad? Is ArcMap initially displaying the pyramid
layers whilst ERMapper and GDAL ignore the pyramid layers to
access the raw data?

Regards,
nick


***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From warmerdam at pobox.com  Fri Jan 25 01:08:46 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 25 01:08:48 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 20: OGRSpatialReference Axis
	Support
In-Reply-To: <479134F6.4020802@pobox.com>
References: <478B9E9A.5010402@pobox.com> <478C3AB0.7010102@pobox.com>
	<478C3C8C.6070804@pobox.com>
	<20080115070349.GA11946@ak4719.spb.edu>
	<479134F6.4020802@pobox.com>
Message-ID: <47997CEE.4080204@pobox.com>

Folks,

The motion to adopt RFC 20: OGRSpatialReference Axis Orientation has passed
with support from FrankW, HowardB, EvenR, AndreyK and a +0 from TamasS.

   http://trac.osgeo.org/gdal/wiki/rfc20_srs_axes

I shall proceed with implementation - though I'm sure there will be
refinements from the sketchy plan in the RFC over time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From yann.chemin at gmail.com  Fri Jan 25 01:32:25 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Fri Jan 25 01:32:29 2008
Subject: [gdal-dev] TRMM in GDAL?
In-Reply-To: <47997675.3020005@pobox.com>
References: <4f37eb890801241852x5a50886q37ae02f88b36718@mail.gmail.com>
	<47997675.3020005@pobox.com>
Message-ID: <4f37eb890801242232l3cdc975at6d20a5bd168900f6@mail.gmail.com>

On 25/01/2008, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Yann Chemin wrote:
> > Hello I am trying to convert TRMM 2B31 from HDF into anything more
> > common for processing (Gtiff, HFA, ...)
> >
> > Basically gdalinfo returns this:
> >
> > yann@gis4400:~/TRMM$ gdalinfo 2B31.070101.52014.6.HDF
> > Driver: HDF4/Hierarchical Data Format Release 4
> > Size is 512, 512
> > Coordinate System is `'
> > Corner Coordinates:
> > Upper Left  (    0.0,    0.0)
> > Lower Left  (    0.0,  512.0)
> > Upper Right (  512.0,    0.0)
> > Lower Right (  512.0,  512.0)
> > Center      (  256.0,  256.0)
>
> Yann,
>
> The above sounds like the bogus parent dataset.  Were there
> subdatasets?  If so, do a gdalinfo on them and see if they have
> meaningful georeferencing.

This is all that gdalinfo returns. However, the c code provided by
TRMM website reads several subdatasets...
------------------------------------------------------------------------------------------------------------------
yann@gis4400:~/TRMM$ ./select_vNsds_linux 2B31.070101.52014.6.HDF

 Number of SDS arrays in file: 9

    1) geolocation                 dimensions =    9246     49      2
    2) dHat                        dimensions =    9246     49
    3) sigmaDHat                   dimensions =    9246     49
    4) rHat                        dimensions =    9246     49     80
    5) sigmaRHat                   dimensions =    9246     49     80
    6) rrSurf                      dimensions =    9246     49
    7) sigmaRRsurf                 dimensions =    9246     49
    8) latentHeatHH                dimensions =    9246     49     13
    9) spare                       dimensions =    9246     49      4
------------------------------------------------------------------------------------------------------------------
>
> If there are subdatsets but they lack georeferencing, you may
> find you can use "-a_ullr -180 40 180 40" on a gdal_translate line
> to assign the following bounds as part of a translation.

Thank you for this I will try this in any case.
Yann

>
> Best regards,
>
> > while in the  2B31.070101.52014.6.HDF.XML:
> > <SpatialDomainContainer>
> >     <HorizontalSpatialDomainContainer>
> >       <BoundingRectangle>
> >         <WestBoundingCoordinate>-180</WestBoundingCoordinate>
> >         <NorthBoundingCoordinate>40</NorthBoundingCoordinate>
> >         <EastBoundingCoordinate>180</EastBoundingCoordinate>
> >         <SouthBoundingCoordinate>-40</SouthBoundingCoordinate>
> >       </BoundingRectangle>
> >     </HorizontalSpatialDomainContainer>
> >   </SpatialDomainContainer>
> >
> > Any suggestion please?
> > Yann
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
From mattia.parigiani at gmail.com  Fri Jan 25 08:17:06 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Fri Jan 25 08:17:10 2008
Subject: [gdal-dev] extracting bands from HDF to GeoTiff
Message-ID: <6b6f1c810801250517v2b75f7bar428feee04940d067@mail.gmail.com>

Hello all

I am pretty new to GDAL and need to carry out a task relating HDF datasets..

In particular I have HDF data with raster images inside and I would like to
extract certain bands from the HDF band set and convert them into a Geotiff
or some other RGB format..
I guess this could be done using the gdal_translate utility or by writing
some C snippet using the GDAL API...
Can anyone help me out on this or give any suggestions...
Thanks for your attention

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080125/44c2db2e/attachment.html
From dany.geotools at gmail.com  Fri Jan 25 08:46:37 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Fri Jan 25 08:46:39 2008
Subject: [gdal-dev] extracting bands from HDF to GeoTiff
In-Reply-To: <6b6f1c810801250517v2b75f7bar428feee04940d067@mail.gmail.com>
References: <6b6f1c810801250517v2b75f7bar428feee04940d067@mail.gmail.com>
Message-ID: <7221db410801250546x44211729tdde812ba509c9a45@mail.gmail.com>

Hi Mattia,
Surely, someone in this mailing list will provide you a great tip.
Anyway, in the meantime, you can try with this command:

gdal_info -of GTiff -b 1 -b 2 -b 3 -co "PHOTOMETRIC=RGB" hdfsamplefile.hdf
tiftobewritten.tif

with the following notes:
-b 1 -b 2 -b3 allows to select the desired bands (instead of 1, 2, 3, select
the bands of your HDF dataset you need)
-co "PHOTOMETRIC=RGB" is a create option which allows to set the RGB color
interpretation.
hdfsamplefile.hdf is your source HDF file. Note that if your HDF contains
several subdatasets and you need some bands of a subdataset you need to
provide the subdataset name returned by gdalinfo on the
main file.

As an instance, calling gdalinfo on a HDF4, the last part of the information
you can obtain could be:
...
 SUBDATASET_48_NAME=HDF4_SDS:UNKNOWN:"c:\Work\data\hdf4\TOVS_DAILY_AM_870330_NG.HDF":157
 SUBDATASET_48_DESC=[180x360] Data-Set-99 (16-bit integer)
 SUBDATASET_49_NAME=HDF4_SDS:UNKNOWN:"c:\Work\data\hdf4\TOVS_DAILY_AM_870330_NG.HDF":160
 SUBDATASET_49_DESC=[180x360] Data-Set-101 (16-bit integer)
 SUBDATASET_50_NAME=HDF4_SDS:UNKNOWN:"c:\Work\data\hdf4\TOVS_DAILY_AM_870330_NG.HDF":164
 SUBDATASET_50_DESC=[5x180x360] Data-Set-103 (16-bit integer)
....

So, if you need to extract 3 bands from the subdataset #50 (having 5 bands),
you need to use
HDF4_SDS:UNKNOWN:"c:\Work\data\hdf4\TOVS_DAILY_AM_870330_NG.HDF":164
as sourcedataset of your gdal_translate command.

In case you encounter an error reporting that is not a recognised format try
removing the "C:" prefix in the subdataset name.

Let me know if this help.
Regards,
Daniele

On Jan 25, 2008 2:17 PM, mattia <mattia.parigiani@gmail.com> wrote:

> Hello all
>
> I am pretty new to GDAL and need to carry out a task relating HDF
> datasets..
>
> In particular I have HDF data with raster images inside and I would like
> to extract certain bands from the HDF band set and convert them into a
> Geotiff or some other RGB format..
> I guess this could be done using the gdal_translate utility or by writing
> some C snippet using the GDAL API...
> Can anyone help me out on this or give any suggestions...
> Thanks for your attention
>
> --
> Mattia
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080125/b1170f66/attachment.html
From rob.braswell at unh.edu  Fri Jan 25 09:18:51 2008
From: rob.braswell at unh.edu (Bobby Braswell)
Date: Fri Jan 25 09:18:57 2008
Subject: [gdal-dev] Re: HDF subdatasets
In-Reply-To: <13004006.27431201261481186.JavaMail.nabble@isper.nabble.com>
References: <13004006.27431201261481186.JavaMail.nabble@isper.nabble.com>
Message-ID: <D538985A-CB59-4815-9E97-B03B93231BC6@unh.edu>


Andrea, I'm new to this but the following works for me:

from osgeo import gdal

hdf = gdal.Open('MCD43A4.A2002001.h12v04.005.2007114135144.hdf')
sdsdict = hdf.GetMetadata('SUBDATASETS')
sdslist =[sdsdict[k] for k in sdsdict.keys() if '_NAME' in k]

names=[]
for l in sdslist:
      names.append(l)

hdf = None

sds=[]
for n in names:
	sds.append(gdal.Open(n))



At this point I can inspect the metadata for the subdatasets, e.g.,

sds[0].GetMetadata()
sds[0].RasterCount

Or retreive the image data in the layer corresponding to that  
subdataset, e.g.,

layer = sds[0].ReadAsArray()
type(layer)
dir(layer)
layer.shape


Good luck,
Rob Braswell


On Jan 25, 2008, at 6:44 AM, andrea.pistoni@next.it wrote:

> Hi Rob!
>
> Maybe you can help me. I'm using Gdal.Open() method to open an HDF5  
> file with attributes and Dataset inside.
> I work with C#. The "Open" method opens the file but I cannot see  
> the Raster contained in it and the RasterCount property is 0 (seem  
> such as it don't see the raster).
> Is there a command of GDAL to acces directly to a specific Dataset  
> inside a HDF5 file?
> Using GetMetadata("SUBDATASET") I get the list of Dataset with name,  
> path and dimensions but How can I get the Dataset Matrix? The  
> "ReadRaster" method doesn't work because the Dataset ds has  
> RasterCount equals to zero
> An example of my code is:
> ....
> Dataset ds = Gdal.Open("c:\Test.h5", "c:\plotina.bmp");
> ....
>
> Thank in advance
>
> Andrea
>
> -------------------------------------
>
>
> Bobby Braswell wrote:
>>
>>
>> Hi-
>>
>> Is it possible to access the names of subdatasets in HDF4 files using
>> gdal-python? I can get the SDS names using gdalinfo, but would like
>> to do it from within my code.
>>
>> For example the result of
>>
>> D = gdal.Open('MCD43A4.A2002001.h18v01.005.2007115060137.hdf')
>>
>> produces some dictionaries within D containing metadata information,
>> but I can't find the subdataset names anywhere, e.g.,
>>
>> 'HDF4_EOS:EOS_GRID 
>> :"MCD43A4.A2002001.h18v01.005.2007115060137.hdf":Nadir
>> _Reflectance_Band1'
>>
>> Thanks very much,
>> Rob Braswell
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> Quoted from:  http://www.nabble.com/HDF-subdatasets-tp15049650p15049650.html

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080125/323438c7/attachment-0001.html
From bfraser at geoanalytic.com  Fri Jan 25 10:06:41 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Jan 25 10:06:55 2008
Subject: [gdal-dev] ERDAS Imagine to ERMapper
References: <OFA5717264.D74C3850-ON4A2573DB.001E28C2-4A2573DB.001EF840@transport.qld.gov.au>
Message-ID: <012401c85f63$e433f330$140002c0@shark>

Nick,

You could try using gdal_translate to extract a full-res
small geographic window of the incoming Imagine file and the
ERS/BIL to confirm the pixels hold data.

  Personally I think files of 16 to 19 gb are risky, as lot
of apps will not open them.  You may want to use a multi
file tiling scheme.

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

>
> I should provide some background.
>
> I have an ERDAS Imagine file of 19 Gigabytes that I want
to import
> into ERMapper. Two other files (next largest size is 16
Gigabytes)
> imported okay. I only have problems with the last image.
>
> The top half of the image is fine. The lower half is all
black.
>
> My supplier can view the entire image at his end.
>
> I used ArcMap to open the image at my end and it is fine.
>
> This confirms that the file itself is okay.
>
> I downloaded GDAL v1.5 and used gdal_translate to go from
> ERDAS Imagine format to ERMapper format as I stated in my
> previous message.
>
> The processing has now finished, and the result is the
same error
> of the lower half of the image being all black.
>
> So, GDAL is giving the same results for me as ERMapper
does. But
> ArcMap displays it fine.
>
> Excuse me, I just thought of something.
>
> Okay, back again. I zoomed in with ArcMap, and after a
while, the
> screen went all black. ERDAS Imagine has pyramid layers
right? Is
> my problem that the pyramid layers are displaying fine but
the
> lowest layer is bad? Is ArcMap initially displaying the
pyramid
> layers whilst ERMapper and GDAL ignore the pyramid layers
to
> access the raw data?
>
> Regards,
> nick
>

From dburken at comcast.net  Fri Jan 25 10:40:41 2008
From: dburken at comcast.net (dburken@comcast.net)
Date: Fri Jan 25 10:40:44 2008
Subject: [gdal-dev] pcs.csv question
Message-ID: <012520081540.17706.479A02F8000DAE070000452A2200734076020A059D9A0D0B@comcast.net>

Hi Frank,

Hey in the pcs.cvs file origins and central meridians are listed in what appears to be decimal degrees.  But the value is the same as degrees minutes.  

Is there a field to indicate interpret as degrees.minutes as opposed to decimal degrees?

Example:
pcs code 26961 Hawaii zone 1 has a:
origin 18 degrees 50 minutes N
central meridian 155 degrees 30 minutes W

In the cvs file it's:
18.5
-155.3

Any insight appreciated...
Dave
From even.rouault at mines-paris.org  Fri Jan 25 14:43:24 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 25 14:43:30 2008
Subject: [gdal-dev] RFC 21: OGR SQL type cast and field name alias
In-Reply-To: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>
References: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>
Message-ID: <200801252043.25243.even.rouault@mines-paris.org>

Tamas,

I'm probably missing something as I have never used the OGR styling 
capability, but as far the specific motivation explained in the RFC is 
concerned, couldn't it be possible, and more simple, to hack directly in 
ogrfeature.cpp a width big enough for the OGR_STYLE special field (it can be 
made very big as the shape driver automatically crop it to 255) ?
Your proposal suggests that the user is aware that DBF strings cannot be 
bigger than 255 characters, which is not obvious (for example, we don't even 
document that in drv_shapefile.html. Would be good to do ;-) )
If I remember well too, FrankW also proposed to add an option to ogr2ogr that 
would scan all the features to compute the required with in case it's not set 
by the input driver. That could also help in your use case. One drawback is 
that ogr2ogr would need to run in 2 passes when this option is used.

Best regards,
Even.

Le Thursday 24 January 2008 23:33:48 Tamas Szekeres, vous avez ?crit?:
> Folks,
>
> I've put together an RFC to provide support for specifying field name
> alias and the type in the OGR SQL select list. The RFC can be found
> here:
>
> http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast
>
> The corresponding tracking bug that contains the proposed patch:
>
> http://trac.osgeo.org/gdal/ticket/2171
>
> Any comments and ideas about the proposal would be helpful.
>
> Best regards,
>
> Tamas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Jan 25 14:56:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 25 14:56:14 2008
Subject: [gdal-dev] RFC 21: OGR SQL type cast and field name alias
In-Reply-To: <200801252043.25243.even.rouault@mines-paris.org>
References: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>
	<200801252043.25243.even.rouault@mines-paris.org>
Message-ID: <479A3ED8.7080107@pobox.com>


> Le Thursday 24 January 2008 23:33:48 Tamas Szekeres, vous avez ?crit :
>> Folks,
>>
>> I've put together an RFC to provide support for specifying field name
>> alias and the type in the OGR SQL select list. The RFC can be found
>> here:
>>
>> http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast
>>
>> The corresponding tracking bug that contains the proposed patch:
>>
>> http://trac.osgeo.org/gdal/ticket/2171
>>
>> Any comments and ideas about the proposal would be helpful.

Tamas,

What other types are supportted when casting fields via your new mechanism?
I'd like to see the RFC explain how each of the OGR field types would
be represented in these cast directives.

Like Even, I'm not positive this will always be the best way of dealing
with long style strings when writing to shapefiles.  But I think it is
a very useful advance for this and other reasons.  Heck - the ability to
use AS to rename fields is very valuable all on it's own.

BTW, I didn't notice any test scripts in the proposed patch.  That would
also be needed though I'd be willing to write the tests for the new feature
if you like.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Fri Jan 25 15:46:14 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 25 15:46:17 2008
Subject: [gdal-dev] RFC 21: OGR SQL type cast and field name alias
In-Reply-To: <200801252043.25243.even.rouault@mines-paris.org>
References: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>
	<200801252043.25243.even.rouault@mines-paris.org>
Message-ID: <f3b73b7d0801251246m66aaca6cnd7c8fc528acb5624@mail.gmail.com>

2008/1/25, Even Rouault <even.rouault@mines-paris.org>:
> I'm probably missing something as I have never used the OGR styling
> capability, but as far the specific motivation explained in the RFC is
> concerned, couldn't it be possible, and more simple, to hack directly in
> ogrfeature.cpp a width big enough for the OGR_STYLE special field (it can be
> made very big as the shape driver automatically crop it to 255) ?

Even,

My motivation described out there is only a use case this enhancement
can help with. However I certainly keep in mind to provide an option
for a broader of interest rather than making a local change.
Setting the default length of the OGR_STYLE field would neither help
to solve my original issue, since I'd like to set the length to the
length of the largest value instead of 255 which was only an example
in the proposal. I could also have written as well

ogr2ogr -f "ESRI Shapefile" -sql "select *, CAST(OGR_STYLE AS
character(82)) from rivers" rivers.shp rivers.tab

for example.

To determine the largest length I could also have included some string
functions, like

"select max(length(OGR_STYLE)) form rivers"

but I haven't addressed this in the proposal.


> Your proposal suggests that the user is aware that DBF strings cannot be
> bigger than 255 characters, which is not obvious (for example, we don't even
> document that in drv_shapefile.html. Would be good to do ;-) )

No, this was only an example. I could also have used a bigger value
here as well however the shapefile driver will possibly truncate the
strings to 255 in length.

> If I remember well too, FrankW also proposed to add an option to ogr2ogr that
> would scan all the features to compute the required with in case it's not set
> by the input driver. That could also help in your use case. One drawback is
> that ogr2ogr would need to run in 2 passes when this option is used.

I would forcibly discourage this solution to alter the concept how
ogr2ogr is working only because of the OGR_STYLE field.

I think this change cannot be compared in value with the option to
implement additional functionality can be found anyway in the SQL92
specification. I consider it's trivial to establish a support for
changing the name and the type of the field when making data
transformations between the OGR supported data sources.


Best regards,

Tamas
From chowell at pyxisinnovation.com  Fri Jan 25 15:46:50 2008
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Fri Jan 25 15:46:59 2008
Subject: [gdal-dev] Error Opening Some .shp Files
Message-ID: <479A4ABA.8090104@pyxisinnovation.com>

Hi,

I am getting an error with the OGR driver when attempting to open some 
shape files. The ogr process

OGRSFDriverRegistrar::Open(string)

Method is crashing the C++ runtime. Upon further review with FWTools 
ogrinfo can't even open the shape file. I tried trapping the error with 
a catch all (...) however still seemed to happen. Any thoughts would be 
appreciated. I can accept that the shape file(s) may be no good however, 
crashing isn't an option for me.

Cheers
Chris
From szekerest at gmail.com  Fri Jan 25 16:04:17 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 25 16:04:28 2008
Subject: [gdal-dev] RFC 21: OGR SQL type cast and field name alias
In-Reply-To: <479A3ED8.7080107@pobox.com>
References: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>
	<200801252043.25243.even.rouault@mines-paris.org>
	<479A3ED8.7080107@pobox.com>
Message-ID: <f3b73b7d0801251304o207dea7al8969646b18e392fb@mail.gmail.com>

2008/1/25, Frank Warmerdam <warmerdam@pobox.com>:
> What other types are supportted when casting fields via your new mechanism?
> I'd like to see the RFC explain how each of the OGR field types would
> be represented in these cast directives.
>

Frank,

I consider converting to string, float, and integer makes sense with
the OGR field types. I've descibed this option in the proposal using
the SQL pseudo syntax description:

<data type> ::= character [ ( field_length ) ]
                | float [ ( field_length ) ]
                | integer [ ( field_length ) ]
Should I add more description about this topic in the RFC?

SQL92 specifies some additional types like datetime for example.
However in case of the datetime type GetFieldAsDatetime doesn't really
support using other than the datetime as the source type so it doesn't
really support type conversion.

>
> BTW, I didn't notice any test scripts in the proposed patch.  That would
> also be needed though I'd be willing to write the tests for the new feature
> if you like.
>

I'm indeed not an expert in writing python scripts, therefore I would
really appreciate if you were help me out. I can update the RFC
accordingly.
I'm using ogrinfo and ogr2ogr for making the SQL specific tests in my side.


Best regards,

Tamas
From warmerdam at pobox.com  Fri Jan 25 16:23:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 25 16:23:46 2008
Subject: [gdal-dev] RFC 21: OGR SQL type cast and field name alias
In-Reply-To: <f3b73b7d0801251304o207dea7al8969646b18e392fb@mail.gmail.com>
References: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>
	<200801252043.25243.even.rouault@mines-paris.org>
	<479A3ED8.7080107@pobox.com>
	<f3b73b7d0801251304o207dea7al8969646b18e392fb@mail.gmail.com>
Message-ID: <479A5349.8030508@pobox.com>

Tamas Szekeres wrote:
> 2008/1/25, Frank Warmerdam <warmerdam@pobox.com>:
>> What other types are supportted when casting fields via your new mechanism?
>> I'd like to see the RFC explain how each of the OGR field types would
>> be represented in these cast directives.
>>
> 
> Frank,
> 
> I consider converting to string, float, and integer makes sense with
> the OGR field types. I've descibed this option in the proposal using
> the SQL pseudo syntax description:
> 
> <data type> ::= character [ ( field_length ) ]
>                 | float [ ( field_length ) ]
>                 | integer [ ( field_length ) ]
> Should I add more description about this topic in the RFC?

Tamas,

Sorry, I guess I missed that.

How will you handle precision for floating point fields?

What about casting something to be an integer list, string list or floating
point list?  I don't mind it not being supported, but at least we should
be explicit on that point in the RFC.

> SQL92 specifies some additional types like datetime for example.
> However in case of the datetime type GetFieldAsDatetime doesn't really
> support using other than the datetime as the source type so it doesn't
> really support type conversion.

In theory if we have a string formatted properly we should be
able to convert it to date/time format.  I see OGRFeature::SetField(int,const 
char*) uses OGRParseDate() to set date/time fields from string input.  I
think this would be quite a useful cast.

>> BTW, I didn't notice any test scripts in the proposed patch.  That would
>> also be needed though I'd be willing to write the tests for the new feature
>> if you like.
>>
> 
> I'm indeed not an expert in writing python scripts, therefore I would
> really appreciate if you were help me out. I can update the RFC
> accordingly.
> I'm using ogrinfo and ogr2ogr for making the SQL specific tests in my side.

Yes, please just list that I will add test scripts in the RFC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Jan 25 16:36:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 25 16:36:26 2008
Subject: [gdal-dev] Error Opening Some .shp Files
In-Reply-To: <479A4ABA.8090104@pyxisinnovation.com>
References: <479A4ABA.8090104@pyxisinnovation.com>
Message-ID: <479A5655.8000505@pobox.com>

Chris Howell wrote:
> Hi,
> 
> I am getting an error with the OGR driver when attempting to open some 
> shape files. The ogr process
> 
> OGRSFDriverRegistrar::Open(string)
> 
> Method is crashing the C++ runtime. Upon further review with FWTools 
> ogrinfo can't even open the shape file. I tried trapping the error with 
> a catch all (...) however still seemed to happen. Any thoughts would be 
> appreciated. I can accept that the shape file(s) may be no good however, 
> crashing isn't an option for me.

Chris,

It would be helpful if you could file a ticket in trac on this issue, and
provide a pointer to the file that is causing the problem.   The intent is
that a corrupt file should cause a error to be issued which in C# should
be translated to an exception.  If it is crashing then there is bug that
needs to be fixed, but it is almost certain we need the dataset to fix it.

You can provide it to me privately for only this purpose if the data is
priveledged.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From marcello_ferrero at yahoo.com  Fri Jan 25 17:03:51 2008
From: marcello_ferrero at yahoo.com (marcello ferrero)
Date: Fri Jan 25 17:03:53 2008
Subject: [gdal-dev] Map Caching with GDAL
Message-ID: <963713.3176.qm@web60124.mail.yahoo.com>

Hi,
in order to implement a map caching mechanism for my application
I need to read tiles from a server (for example OpenStreetMap) and keep
them in memory to speed up subsequent access to the same tiles once
they have been already downloaded from the map server.
To implement
this, I'm going to manage a single indexed (x,y,z) data file where I keep the dump of each .png (or .jpg) file.
Therefore I need
to access the .png (or .jpg) tile not from a file (in that case I would
simply use GDALOpen to open it), but from a memory buffer.

What are the GDAL functions to do what I need?
Any help is really appreciated.

Thanks
Marcello Ferrero
Bluemapia
http://www.sourceforge.net/projects/bluemapia



      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080125/7630d711/attachment.html
From robert.coup at onetrackmind.co.nz  Fri Jan 25 17:14:06 2008
From: robert.coup at onetrackmind.co.nz (Robert Coup)
Date: Fri Jan 25 17:14:11 2008
Subject: [gdal-dev] Map Caching with GDAL
In-Reply-To: <963713.3176.qm@web60124.mail.yahoo.com>
References: <963713.3176.qm@web60124.mail.yahoo.com>
Message-ID: <c5097ac40801251414m4e10f692m31c6bdf09f63b366@mail.gmail.com>

On 26/01/2008, marcello ferrero <marcello_ferrero@yahoo.com> wrote:
> in order to implement a map caching mechanism for my application I need to read tiles from a server (for example OpenStreetMap) and keep them in memory to speed up subsequent access to the same tiles once they have been already downloaded from the map server.
> To implement this, I'm going to manage a single indexed (x,y,z) data file where I keep the dump of each .png (or .jpg) file.

TileCache running with memcached could do exactly what you want, or
just memcached on its own.
  http://www.tilecache.org/
  http://www.danga.com/memcached/

> Therefore I need to access the .png (or .jpg) tile not from a file (in that case I would simply use GDALOpen to open it), but from a memory buffer.
>
> What are the GDAL functions to do what I need?

Have a look at the in-memory raster documentation:
http://gdal.org/frmt_mem.html

Rob :)
From COUTUJF at dfo-mpo.gc.ca  Fri Jan 25 17:19:38 2008
From: COUTUJF at dfo-mpo.gc.ca (=?iso-8859-1?Q?Coutu=2C_Jean-Fran=E7ois?=)
Date: Fri Jan 25 17:19:47 2008
Subject: [gdal-dev] Gdaladdo error
In-Reply-To: <47997832.10104@pobox.com>
References: <F85017E987358E4BBD45EE552104788A012A2159@lauqueex01.lau.dfo-mpo.ca>
	<47997832.10104@pobox.com>
Message-ID: <F85017E987358E4BBD45EE552104788A012C9843@lauqueex01.lau.dfo-mpo.ca>

Hello Frank,

Thanks for the anwser... I did test it with FWTools 2.0.5 today and got the same error. I can make a bug report but the smallest file that I have that is causing the problem is about 94M...What is the best way to make it available? Can I attach it to the bug?

Thanks,

JF  

-----Message d'origine-----
De : Frank Warmerdam [mailto:warmerdam@pobox.com] 
Envoy? : 24 janvier 2008 21:49
? : Coutu, Jean-Fran?ois
Cc : gdal-dev@lists.osgeo.org
Objet : Re: [gdal-dev] Gdaladdo error

Coutu wrote:
> Hi,
> 
> I am trying to build overviews for 100+ geotiff and tiff files.
> Gdaladdo only screws up on a handful.
> Can anyone tell me what is wrong with my files?
> 
> I have: GDAL 1.5.0b1, FWTools 2.0.3, released 2007/12/10
> 
> Here is the error I get:
> 
> ------------------------
> gdaladdo -r average 1965_04_07_Prince_Rupert_PK00893_PK05204.TIF 2 4 8 
> 16 0...10...20...30...40...50...60...70...80...90...100 - done.
> Assertion failed: tif->tif_flags&TIFF_BIGTIFF, file tif_dirwrite.c, 
> line
> 2027
> 
> This application has requested the Runtime to terminate it in an 
> unusual way.
> Please contact the application's support team for more information.

Jean-Fran?ois,

This looks quite serious.  Could you verify the problem still occurs with FWTools 2.0.5?  If so, can you post a bug report in the GDAL Trac and make a file demonstrating the problem available?

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From nowak at xpam.de  Fri Jan 25 17:25:46 2008
From: nowak at xpam.de (Adam Nowacki)
Date: Fri Jan 25 17:25:58 2008
Subject: [gdal-dev] Map Caching with GDAL
In-Reply-To: <963713.3176.qm@web60124.mail.yahoo.com>
References: <963713.3176.qm@web60124.mail.yahoo.com>
Message-ID: <479A61EA.9010503@xpam.de>

marcello ferrero wrote:
> Therefore I need to access the .png (or .jpg) tile not from a file (in 
> that case I would simply use GDALOpen to open it), but from a memory buffer.
> 
> What are the GDAL functions to do what I need?
> Any help is really appreciated.

Use http://www.gdal.org/cpl__vsi_8h.html#1ecb3a78729ecea4d2ce22065a605244
to create a virtual file from memory buffer and GDALOpen it.

Here's copy/paste from WCS driver:
osResultFilename.Printf( "/vsimem/wcs/%p/wcsresult.dat", this );
FILE *fp = VSIFileFromMemBuffer( osResultFilename, pabyData, nDataLen, 
FALSE );
if( fp == NULL ) return NULL;
VSIFCloseL( fp );
GDALDataset *poDS = (GDALDataset *) GDALOpen( osResultFilename, 
GA_ReadOnly );
From warmerdam at pobox.com  Fri Jan 25 17:50:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 25 17:50:24 2008
Subject: [gdal-dev] Gdaladdo error
In-Reply-To: <F85017E987358E4BBD45EE552104788A012C9843@lauqueex01.lau.dfo-mpo.ca>
References: <F85017E987358E4BBD45EE552104788A012A2159@lauqueex01.lau.dfo-mpo.ca>
	<47997832.10104@pobox.com>
	<F85017E987358E4BBD45EE552104788A012C9843@lauqueex01.lau.dfo-mpo.ca>
Message-ID: <479A67A4.6070401@pobox.com>

Coutu wrote:
> Hello Frank,
> 
> Thanks for the anwser... I did test it with FWTools 2.0.5 today and got the
> same error. I can make a bug report but the smallest file that I have that
> is causing the problem is about 94M...What is the best way to make it
> available? Can I attach it to the bug?

JF,

You can't attach large files to bug tickets.  Can you stage it on a web
or ftp server and provide an url to it?  If not, I can provide a location
to upload it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Fri Jan 25 17:57:57 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 25 17:58:00 2008
Subject: [gdal-dev] RFC 21: OGR SQL type cast and field name alias
In-Reply-To: <479A5349.8030508@pobox.com>
References: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>
	<200801252043.25243.even.rouault@mines-paris.org>
	<479A3ED8.7080107@pobox.com>
	<f3b73b7d0801251304o207dea7al8969646b18e392fb@mail.gmail.com>
	<479A5349.8030508@pobox.com>
Message-ID: <f3b73b7d0801251457r304ec83emca56111038c83cf1@mail.gmail.com>

2008/1/25, Frank Warmerdam <warmerdam@pobox.com>:
>
> How will you handle precision for floating point fields?
>

We could easily support that by using the SQL92 numeric type as:
numeric [ ( field_length [, field_precision ] ) ]

I'll update the RFC accordingly.

> What about casting something to be an integer list, string list or floating
> point list?  I don't mind it not being supported, but at least we should
> be explicit on that point in the RFC.
>

I cannot support these easily since the corresponding conversion
routines are missing in the OGR code. We have no such kind of types in
SQL92 either so it could only be an OGR specific extension.

>
> In theory if we have a string formatted properly we should be
> able to convert it to date/time format.  I see OGRFeature::SetField(int,const
> char*) uses OGRParseDate() to set date/time fields from string input.  I
> think this would be quite a useful cast.
>

Yes, I've possibly missed that. I'll add support converting to the
datetimes as well. Here is my proposed data type definition that
contains all of the changes mentioned above.

<data type> ::= character [ ( field_length ) ]
                | float [ ( field_length ) ]
                | numeric [ ( field_length [, field_precision ] ) ]
                | integer
                | timestamp

Because of these changes I'll have to add SWQ_DATETIME to the
swq_field_type struct as well.

Best regards,

Tamas
From szekerest at gmail.com  Fri Jan 25 18:40:23 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan 25 18:40:26 2008
Subject: [gdal-dev] RFC 21: OGR SQL type cast and field name alias
In-Reply-To: <f3b73b7d0801251457r304ec83emca56111038c83cf1@mail.gmail.com>
References: <f3b73b7d0801241433u1178e5f3m542f26e116d6547b@mail.gmail.com>
	<200801252043.25243.even.rouault@mines-paris.org>
	<479A3ED8.7080107@pobox.com>
	<f3b73b7d0801251304o207dea7al8969646b18e392fb@mail.gmail.com>
	<479A5349.8030508@pobox.com>
	<f3b73b7d0801251457r304ec83emca56111038c83cf1@mail.gmail.com>
Message-ID: <f3b73b7d0801251540y528c75c5w39a4df0c4ea3af63@mail.gmail.com>

I've updated

http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

according to the changes mentioned below.

Best regards,

Tamas


2008/1/25, Tamas Szekeres <szekerest@gmail.com>:
> 2008/1/25, Frank Warmerdam <warmerdam@pobox.com>:
> >
> > How will you handle precision for floating point fields?
> >
>
> We could easily support that by using the SQL92 numeric type as:
> numeric [ ( field_length [, field_precision ] ) ]
>
> I'll update the RFC accordingly.
>
> > What about casting something to be an integer list, string list or floating
> > point list?  I don't mind it not being supported, but at least we should
> > be explicit on that point in the RFC.
> >
>
> I cannot support these easily since the corresponding conversion
> routines are missing in the OGR code. We have no such kind of types in
> SQL92 either so it could only be an OGR specific extension.
>
> >
> > In theory if we have a string formatted properly we should be
> > able to convert it to date/time format.  I see OGRFeature::SetField(int,const
> > char*) uses OGRParseDate() to set date/time fields from string input.  I
> > think this would be quite a useful cast.
> >
>
> Yes, I've possibly missed that. I'll add support converting to the
> datetimes as well. Here is my proposed data type definition that
> contains all of the changes mentioned above.
>
> <data type> ::= character [ ( field_length ) ]
>                 | float [ ( field_length ) ]
>                 | numeric [ ( field_length [, field_precision ] ) ]
>                 | integer
>                 | timestamp
>
> Because of these changes I'll have to add SWQ_DATETIME to the
> swq_field_type struct as well.
>
> Best regards,
>
> Tamas
>
From dgplinux at yahoo.com  Sat Jan 26 01:19:42 2008
From: dgplinux at yahoo.com (dgp)
Date: Sat Jan 26 01:19:44 2008
Subject: [Gdal-dev] How to use GDAL using MS VC++6
Message-ID: <15105091.post@talk.nabble.com>


I was successfull in building the GDAL on windows .I could see the lib , bin
,include  etc folders in
my path  "C:\warmerda\bld"  .But when I try to use
samples(eg:-http://perrygeo.net/download/gdaldemtools_20060207.zip) provided
i get lots of linker errors(despite providing LIB,INCLUDE paths in my
project settings in Visaul studio 6/8). Can anyone explain how to utilize
GDAL libraries in MS Visual studio?
-- 
View this message in context: http://www.nabble.com/How-to-use-GDAL-using-MS-VC%2B%2B6-tp15105091p15105091.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mchapman at texelinc.com  Sat Jan 26 01:30:27 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Sat Jan 26 01:33:39 2008
Subject: [Gdal-dev] How to use GDAL using MS VC++6
In-Reply-To: <15105091.post@talk.nabble.com>
References: <15105091.post@talk.nabble.com>
Message-ID: <722447262-1201329211-cardhu_decombobulator_blackberry.rim.net-799786481-@bxe022.bisx.prod.on.blackberry>

Dgp,

Can you post the link errors from the output window? That may yield clues to the problem.

Martin

Sent via BlackBerry by AT&T

-----Original Message-----
From: dgp <dgplinux@yahoo.com>

Date: Fri, 25 Jan 2008 22:19:42 
To:gdal-dev@lists.osgeo.org
Subject: [Gdal-dev] How to use GDAL using MS VC++6



I was successfull in building the GDAL on windows .I could see the lib , bin
,include  etc folders in
my path  "C:\warmerda\bld"  .But when I try to use
samples(eg:-http://perrygeo.net/download/gdaldemtools_20060207.zip) provided
i get lots of linker errors(despite providing LIB,INCLUDE paths in my
project settings in Visaul studio 6/8). Can anyone explain how to utilize
GDAL libraries in MS Visual studio?
-- 
View this message in context: http://www.nabble.com/How-to-use-GDAL-using-MS-VC%2B%2B6-tp15105091p15105091.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mchapman at texelinc.com  Sat Jan 26 01:33:55 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Sat Jan 26 01:37:05 2008
Subject: [Gdal-dev] How to use GDAL using MS VC++6
In-Reply-To: <15105091.post@talk.nabble.com>
References: <15105091.post@talk.nabble.com>
Message-ID: <428113680-1201329419-cardhu_decombobulator_blackberry.rim.net-182301133-@bxe022.bisx.prod.on.blackberry>

Also, do you have the gdal_i.lib and gdalxx.dll in the same directory as your vc .exe program? 

Martin


Sent via BlackBerry by AT&T

-----Original Message-----
From: dgp <dgplinux@yahoo.com>

Date: Fri, 25 Jan 2008 22:19:42 
To:gdal-dev@lists.osgeo.org
Subject: [Gdal-dev] How to use GDAL using MS VC++6



I was successfull in building the GDAL on windows .I could see the lib , bin
,include  etc folders in
my path  "C:\warmerda\bld"  .But when I try to use
samples(eg:-http://perrygeo.net/download/gdaldemtools_20060207.zip) provided
i get lots of linker errors(despite providing LIB,INCLUDE paths in my
project settings in Visaul studio 6/8). Can anyone explain how to utilize
GDAL libraries in MS Visual studio?
-- 
View this message in context: http://www.nabble.com/How-to-use-GDAL-using-MS-VC%2B%2B6-tp15105091p15105091.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From pssmaniam at hotmail.com  Sat Jan 26 03:47:07 2008
From: pssmaniam at hotmail.com (Sundaram Subramaniam)
Date: Sat Jan 26 03:47:10 2008
Subject: [Gdal-dev] How to use GDAL using MS VC++6
In-Reply-To: <15105091.post@talk.nabble.com>
References: <15105091.post@talk.nabble.com>
Message-ID: <BAY144-W44F9E42F2AD1A835A4F21CB83A0@phx.gbl>


The linker errors may be due to the gdal library is not linked to your project in MS VC++.
to solve this

Goto   Project Setting
Add   gdal_i.lib 
     to  Object/libray modules  in Link 

then Compile the program

S.Subramaniam Scientist ,Land Resources Group, RS&GIS_Applications Area, National Remote Sensing Agency Hyderabad - 500 037 INDIA

 ----------------------------------------> Date: Fri, 25 Jan 2008 22:19:42 -0800> From: dgplinux@yahoo.com> To: gdal-dev@lists.osgeo.org> Subject: [Gdal-dev] How to use GDAL using MS VC++6>>> I was successfull in building the GDAL on windows .I could see the lib , bin> ,include etc folders in> my path "C:\warmerda\bld" .But when I try to use> samples(eg:-http://perrygeo.net/download/gdaldemtools_20060207.zip) provided> i get lots of linker errors(despite providing LIB,INCLUDE paths in my> project settings in Visaul studio 6/8). Can anyone explain how to utilize> GDAL libraries in MS Visual studio?> --> View this message in context: http://www.nabble.com/How-to-use-GDAL-using-MS-VC%2B%2B6-tp15105091p15105091.html> Sent from the GDAL - Dev mailing list archive at Nabble.com.>> _______________________________________________> gdal-dev mailing list> gdal-dev@lists.osgeo.org> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=220
From mattia.parigiani at gmail.com  Sun Jan 27 13:32:48 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Sun Jan 27 13:32:51 2008
Subject: [gdal-dev] compiling GDAL API with gcc
Message-ID: <6b6f1c810801271032j6e3da73fna124393c95259ca4@mail.gmail.com>

I installed GDAL by installing FWTools (I currently have it under /opt)
Using Ubuntu 7.10
For some reason I try to compile :

#include <stdio.h>
#include "gdal.h"

int main() {

    printf("test\n");

    GDALAllRegister();

}


but get:

/tmp/cc4QzAsI.o: In function `main':
helloworld.c:(.text+0x1e): undefined reference to `GDALAllRegister'
collect2: ld returned 1 exit status


the compile command I use is:

gcc -I/opt/FWTools/FWTools2.4.0/include/ helloworld.c

where the include/ subfolder contains all the header files: gdal.h.... ecc
ecc


Have done it as super user and the same result was coming put when I have
gdal installed as from synaptic packet manager (which I now tried removing)

Does anyone know where the problem might me?
Is it the compiler? should I be using another instead of gcc..

I tried following the tutorial and this is where the C snippet have pasted
comes from ..
I deduce that I actually can write C code to use the GDAL API!!!
But then again , why doesnt it compile??

thanks for u time

-- 
Mati
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080127/fb4c5487/attachment.html
From nhv at cape.com  Sun Jan 27 13:41:17 2008
From: nhv at cape.com (Norman Vine)
Date: Sun Jan 27 13:41:19 2008
Subject: [gdal-dev] compiling GDAL API with gcc
In-Reply-To: <6b6f1c810801271032j6e3da73fna124393c95259ca4@mail.gmail.com>
Message-ID: <20080127193100.D68BE30E7E8@mrelay1.cape.com>

Mattia writes:
>
> I installed GDAL by installing FWTools (I currently have it 
> under /opt) 
> Using Ubuntu 7.10
> For some reason I try to compile :
> 
> #include <stdio.h>
> #include "gdal.h"
> 
> int main() {
> 
>     printf("test\n");
> 
>     GDALAllRegister();
> 
> }
> 
> 
> but get:
> 
> /tmp/cc4QzAsI.o: In function `main':
> helloworld.c:(.text+0x1e): undefined reference to `GDALAllRegister'
> collect2: ld returned 1 exit status

This is a linker error not a compiler error

You need to link with libgdal


> the compile command I use is: 
> 
> gcc -I/opt/FWTools/FWTools2.4.0/include/ helloworld.c

try something like 

gcc -I/opt/FWTools/FWTools2.4.0/include/ -L/opt/FWTools/FWTools2.4.0/lib
-lgdal helloworld.c

HTH

Norman


From dfuhry at gmail.com  Sun Jan 27 22:42:09 2008
From: dfuhry at gmail.com (Dave Fuhry)
Date: Sun Jan 27 22:42:12 2008
Subject: [gdal-dev] ogrinfo PGeo segfault in libmdodbc.so mdb_free_indices()
Message-ID: <90699a8d0801271942o32ca9420qfcda36d9788c8756@mail.gmail.com>

$ ogrinfo PGeo:Beaverhead

segfaults.  Is this definitely an mdbtools bug?  Here's the backtrace:

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x2a999ef970 (LWP 8355)]
0x0000002a98261b6b in free () from /lib/libc.so.6
(gdb) bt
#0  0x0000002a98261b6b in free () from /lib/libc.so.6
#1  0x0000002a9a221328 in mdb_free_indices () from /usr/lib/libmdbodbc.so
#2  0x0000002a9a225167 in mdb_free_tabledef () from /usr/lib/libmdbodbc.so
#3  0x0000002a9a21dc1b in mdb_sql_reset () from /usr/lib/libmdbodbc.so
#4  0x0000002a9a21cdbf in ?? () from /usr/lib/libmdbodbc.so
#5  0x0000002a9a21ceb5 in SQLExecDirect () from /usr/lib/libmdbodbc.so
#6  0x0000002a9642ca88 in SQLExecDirect () from /usr/lib/libodbc.so.1
#7  0x0000002a95a24cd2 in CPLODBCStatement::ExecuteSQL (this=0x7fbffff4f0,
    pszStatement=0x0) at cpl_odbc.cpp:400
#8  0x0000002a95ae8272 in OGRPGeoLayer::LookupSRID (this=0x647840, nSRID=1)
    at ogrpgeolayer.cpp:352
#9  0x0000002a95ae9308 in OGRPGeoTableLayer::Initialize (this=0x647840,
    pszTableName=0x643b20 "Corner", pszGeomCol=0x643c10 "Shape",
    nShapeType=<value optimized out>, dfExtentLeft=1, dfExtentRight=-1,
    dfExtentBottom=1, dfExtentTop=-1, nSRID=1, bHasZ=<value optimized out>)
    at ogrpgeotablelayer.cpp:94
#10 0x0000002a95ae69f9 in OGRPGeoDataSource::Open (this=0x605600,
    pszNewName=<value optimized out>, bUpdate=<value optimized out>,
    bTestOpen=<value optimized out>) at ogrpgeodatasource.cpp:155
#11 0x0000002a95ae7963 in OGRPGeoDriver::Open (this=<value optimized out>,
    pszFilename=0x604690 "PGeo:Beaverhead", bUpdate=1) at ogrpgeodriver.cpp:95
#12 0x0000002a95af6bbd in OGRSFDriverRegistrar::Open (
    pszName=0x604690 "PGeo:Beaverhead", bUpdate=1, ppoDriver=0x7fbffff8d8)
    at ogrsfdriverregistrar.cpp:204
#13 0x000000000040196b in main (nArgc=2, papszArgv=0x604650) at ogrinfo.cpp:149

I'm using gdal from svn HEAD, mdbtools 0.6pre1, and unixodbc 2.2.11-16
(debian).  The file is the (large, sorry) mdb contained in
ftp://ftp.gis.mt.gov/CadastralFramework/Beaverhead/Beaverhead.zip

I'm having some trouble getting this working with a debug build of
libmdbodbc.so, but I'll send a backtrace with that when I can.

-Dave Fuhry
From Allan.Meek at drdc-rddc.gc.ca  Mon Jan 28 11:41:24 2008
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Mon Jan 28 11:41:27 2008
Subject: [gdal-dev] Lat/long & distance/heading calculation
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E0B2918@ottawaex02.Ottawa.drdc-rddc.gc.ca>

This is a bit of a long shot, but I'm hoping I might find some help
here. 

I have a start lat/long position, a distance, and a heading. Is there an
easy way (in OGR or elsewhere) to calculate the end lat/long position
(after travelling the given distance on the given heading)?

I have a working formula for calculating the distance and heading
between two lat/long positions, but I wanted to see if I can get around
having to rework this to solve my problem.

Any help would be appreciated!

Thanks,
Allan
From warmerdam at pobox.com  Mon Jan 28 12:03:55 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 28 12:04:27 2008
Subject: [gdal-dev] Lat/long & distance/heading calculation
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E0B2918@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E0B2918@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <479E0AFB.2000607@pobox.com>

Meek, Allan (Contractor) wrote:
> This is a bit of a long shot, but I'm hoping I might find some help
> here. 
> 
> I have a start lat/long position, a distance, and a heading. Is there an
> easy way (in OGR or elsewhere) to calculate the end lat/long position
> (after travelling the given distance on the given heading)?
> 
> I have a working formula for calculating the distance and heading
> between two lat/long positions, but I wanted to see if I can get around
> having to rework this to solve my problem.

Allan,

This sort of operation can be handled by the "geod" program distributed
with PROJ.4.  I think there are corresponding callable C function but
I'm not positive.

GEOD(1)                                                                GEOD(1)

NAME
        geod - direct geodesic computations
        invgeod - inverse geodesic computations

SYNOPSIS
        geod  +ellps=<ellipse> [ -afFIlptwW [ args ] ] [
        +args ] file[s]
        invgeod +ellps=<ellipse> [ -afFIlptwW [ args ] ]
        [ +args ] file[s]

DESCRIPTION
        Geod  (direct)  and  invgeod  (inverse)  perform
        geodesic (Great Circle) computations for  deter-
        mining latitude, longitude and back azimuth of a
        terminus point given a initial  point  latitude,
        longitude,  azimuth and distance (direct) or the
        forward and back azimuths and  distance  between
        an initial and terminus point latitudes and lon-
        gitudes (inverse).

        The following  runline  control  parameters  can
        appear in any order:

        -I     Specifies  that the inverse geodesic com-
               putation is to be performed.  May be used
               with  execution of goed as an alternative
               to invgeod execution.

        -a     Latitude and longitudes  of  the  initial
               and  terminal  points,  forward  and back
               azimuths and distance are output.

        -ta    A specifies a character employed  as  the
               first  character to denote a control line
               to be passed through without  processing.

        -le    Gives  a  listing  of  all the ellipsoids
               that may be  selected  with  the  +ellps=
               option.

        -lu    Gives a listing of all the units that may
               be selected with the +units= option.

        -[f|F] format
               Format is a printf format string to  con-
               trol  the  output  form of the geographic
               coordinate values (f) or  distance  value
               (F).   The  default  mode is DMS for geo-
               graphic coordinates and "%.3f"  for  dis-
               tance.

        -[w|W]n
               N is the number of significant fractional
               digits to employ for seconds output (when
               the  option  is  not  specified,  -w3  is
               assumed).  When -W is employed the fields
               will   be  constant  width  with  leading
               zeroes.

        -p     This option causes the  azimuthal  values
               to  be  output  as  unsigned  DMS numbers
               between 0 and 360 degrees.  Also note -f.

        The +args run-line arguments are associated with
        geodetic parameters for  specifying  the  ellip-
        soidal or sphere to use.  See proj documentation
        for full list of these  parameters  and  contrl.
        The options are processed in left to right order
        from the run line.   Reentry  of  an  option  is
        ignored  with  the first occurance assumed to be
        the desired value.

        One or more files (processed in  left  to  right
        order)  specify  the source of data to be trans-
        formed.  A - will specify the location  of  pro-
        cessing  standard input.  If no files are speci-
        fied, the input is assumed to be from stdin.

        For direct determinations input data must be  in
        latitude,  longitude, azimuth and distance order
        and output will be latitude, longitude and  back
        azimuth of the terminus point.  Latitude, longi-
        tude of the initial and terminus point are input
        for  the inverse mode and respective forward and
        back  azimuth  from  the  initial  and  terminus
        points   are  output  along  with  the  distance
        between the points.

        Input geographic coordinates (latitude and  lon-
        gitude) and azimuthal data must be in DMS format
        and input distance data must be in units consis-
        tent  with  the  ellipsoid  major axis or sphere
        radius  units.   Output  geographic  coordinates
        will  be  in  DMS  (if  the  -f  switch  is  not
        employed) to 0.001" with  trailing,  zero-valued
        minute-second  fields  deleted.  Output distance
        data will be in the same units as the  ellipsoid
        or sphere radius.

        The  Earth?s  ellipsoidal figure may be selected
        in the same manner  as  program  proj  by  using
        +ellps=, +a=, +es=, etc.

        Geod  may also be used to determine intermediate
        points along either a geodesic line between  two
        points  or  along  an  arc of specified distance
        from a geographic point.  In both cases an  ini-
        tial point must be specified with +lat_1=lat and
        +lon_1=lon  parameters  and  either  a  terminus
        point  +lat_2=lat  and  +lon_2=lon or a distance
        and azimuth from the initial point with  +S=dis-
        tance and +A=azimuth must be specified.

        If  points along a geodesic are to be determined
        then either +n_S=integer specifying  the  number
        of  intermediate  points  and/or +del_S=distance
        specifying  the  incremental  distance   between
        points must be specified.

        To  determine  points  along  an arc equidistant
        from the initial  point  both  +del_A=angle  and
        +n_A=integer  must  be specified which determine
        the respective angular increments and number  of
        points to be determined.

EXAMPLE
        The  following  script  determines  the geodesic
        azimuths and distance in U.S. stature miles from
        Boston, MA, to Portland, OR:
              geod +ellps=clrk66 <<EOF -I +units=us-mi
              42d15?N 71d07?W 45d31?N 123d41?W
              EOF
        which gives the results:
              -66d31?50.141"   75d39?13.083"   2587.504
        where  the first two values are the azimuth from
        Boston to Portland, the back azimuth from  Port-
        land to Boston followed by the distance.

        An example of forward geodesic use is to use the
        Boston location and determine  Portland?s  loca-
        tion by azimuth and distance:
              geod +ellps=clrk66 <<EOF +units=us-mi
              42d15?N 71d07?W -66d31?50.141" 2587.504
              EOF
        which gives:
              45d31?0.003"N              123d40?59.985"W
             75d39?13.094"
        Note: lack of precision in  the  distance  value
        compromises  the precision of the Portland loca-
        tion.

SEE ALSO
        Thomas, P.D., 1970, Spheroidal Geodesics, Refer-
        ence   Systems  &  Local  Geometry:  U.S.  Naval
        Oceanographic  Office, S-138.

HOME PAGE
        http://www.remotesensing.org/proj

                               2000/03/21 Rel. 4.4

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From rayg at daylongraphics.com  Mon Jan 28 19:55:49 2008
From: rayg at daylongraphics.com (Ray Gardener)
Date: Mon Jan 28 19:55:51 2008
Subject: [gdal-dev] Lat/long & distance/heading calculation
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E0B2918@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E0B2918@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <479E7995.7080200@daylongraphics.com>

If you can use UTM or similar coords, then

x = cos(heading) * distance + start_pos_x
y = sin(heading) * distance + start_pos_y

Assuming heading in clockwise radians with north = up.

Then you can inverse transform (x, y) from UTM to lat/lon.

Ray


Meek, Allan (Contractor) wrote:
> This is a bit of a long shot, but I'm hoping I might find some help
> here. 
> 
> I have a start lat/long position, a distance, and a heading. Is there an
> easy way (in OGR or elsewhere) to calculate the end lat/long position
> (after travelling the given distance on the given heading)?
> 
> I have a working formula for calculating the distance and heading
> between two lat/long positions, but I wanted to see if I can get around
> having to rework this to solve my problem.
> 
> Any help would be appreciated!
> 
> Thanks,
> Allan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

From lxnyce at gmail.com  Mon Jan 28 20:45:34 2008
From: lxnyce at gmail.com (Lennox Antoine)
Date: Mon Jan 28 20:45:40 2008
Subject: [gdal-dev] Lat/long & distance/heading calculation
In-Reply-To: <479E7995.7080200@daylongraphics.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E0B2918@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<479E7995.7080200@daylongraphics.com>
Message-ID: <82c245aa0801281745t459c98a8xbd4b19ce87632fe2@mail.gmail.com>

This might be what you're looking for :
http://www.movable-type.co.uk/scripts/latlong.html

Look for the section : *Destination point given distance and bearing from
start point

*-Lennox*

*On Jan 28, 2008 7:55 PM, Ray Gardener <rayg@daylongraphics.com> wrote:

> If you can use UTM or similar coords, then
>
> x = cos(heading) * distance + start_pos_x
> y = sin(heading) * distance + start_pos_y
>
> Assuming heading in clockwise radians with north = up.
>
> Then you can inverse transform (x, y) from UTM to lat/lon.
>
> Ray
>
>
> Meek, Allan (Contractor) wrote:
> > This is a bit of a long shot, but I'm hoping I might find some help
> > here.
> >
> > I have a start lat/long position, a distance, and a heading. Is there an
> > easy way (in OGR or elsewhere) to calculate the end lat/long position
> > (after travelling the given distance on the given heading)?
> >
> > I have a working formula for calculating the distance and heading
> > between two lat/long positions, but I wanted to see if I can get around
> > having to rework this to solve my problem.
> >
> > Any help would be appreciated!
> >
> > Thanks,
> > Allan
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-Lennox
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080128/3c2c882c/attachment.html
From rush at winkey.org  Mon Jan 28 23:35:27 2008
From: rush at winkey.org (winkey)
Date: Mon Jan 28 23:35:34 2008
Subject: [gdal-dev] GDALContourGenerate() and kml
Message-ID: <1201581332.21758.15.camel@winkey.org>

It seems there is an issue with contouring directly to kml

If you set ID and ELEV OGR fields, they end up with field id's of 2 and
3, name and description have 0 and 1. gdal_contour as well as my code
assumes id's of 0 and 1.

If you contour to another OGR format then translate to kml, ID and ELEV
are set, name and description are missing.

if your use id's of 2 and 3 when contouring to kml, ID and ELEV are set,
but if you contour to a different OGR format then translate to kml then
no fields are set.

thanks
brian

From joe at omc-international.com.au  Tue Jan 29 01:59:44 2008
From: joe at omc-international.com.au (Joe Healy)
Date: Tue Jan 29 01:59:49 2008
Subject: [gdal-dev] OGR Select Features by Location...
In-Reply-To: <20080123174135.139330@gmx.net>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>	<AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>	<9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com>
	<20080123174135.139330@gmx.net>
Message-ID: <479ECEE0.30906@omc-international.com.au>


We use postgis for this sort of work. It is orders of magnitude faster 
than ArcGIS.

 From memory the largest we have dealt with so far was in the 10's of 
millions of points. It handles this very well.

Depending on the size of the dataset, we find loading the data using the 
copy command in psql, creating indexes and then querying is fast enough 
that people are happy to reload the data etc. each time they perform the 
join. For the larger data sets, loading the data and building the 
indexes once is a big gain.

Hope this helps,

Joe


Jose Luis Gomez Dans wrote:
> Hi,
>
>
>   
>> I think that if you built GDAL with GEOS support, you can call on the GEOS
>> methods from directly within your ogr objects.  (Not sure I'm saying that
>> right)  There is an example here -
>> http://mapserver.gis.umn.edu/community/conferences/MUM3/workshop/python/geometriespdf
>>
>> Code in the example looks something like this:
>>
>> #! /usr/bin/python
>>
>> import ogr
>>
>> r1 = {'minx': -5.0, 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}
>> r2 = {'minx': 0.0, 'miny': -5.0, 'maxx': 10.0, 'maxy':5.0}
>>
>> template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f
>> %(maxy)
>> f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'
>>
>> w1 = template % r1
>> w2 = template % r2
>>
>> g1 = ogr.CreateGeometryFromWkt(w1)
>> g2 = ogr.CreateGeometryFromWkt(w2)
>>
>> inter = g1.Intersection(g2)   # <---------------GEOS Intersection command?
>>
>> print inter
>>
>>     
>
> While this will work, I doubt it will cope with multi-million points. Say that you know the extent of your polygon (min and max x and y coordinates), you could extract the points within that region "easily" with OGR and python:
> import ogr
> r1 = {'minx': -5.0 , 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}
>
> template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f %(maxy) f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'
>
> w1 = template % r1
>
> g1 = ogr.CreateGeometryFromWkt(w1)
> s = ogr.Open (<fname>)
> L = s.GetLayer(0) #Or layer whatever
> L.SetSpatialFilter ( g1 )
> #If it is a square region,
> #L.SetSpatialFilterRect(r1['minx'], r1['miny'], r1['maxx'], r1['maxy'])
>
>
> Clearly, you can use any geometry, not just a square. You can have a shapefile with your polygon geometry, read the first feature, and use that as your SpatialFilter geometry, but I don't know how fast this is. If you decide to go this way, it would be interesting to know how well it performs.
>
> Jose
>   

From oliver.eichler at gmx.de  Tue Jan 29 02:09:16 2008
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Tue Jan 29 02:09:24 2008
Subject: [gdal-dev] Conversion problem proj4 -> wkt ->proj4
Message-ID: <20080129070916.70320@gmx.net>

Hi,

I try to convert a proj4 string into wkt to store it into a GeoTiff. Later on 
I need to restore the projection from the string. However the most important 
part "+nadgrids=@null" is missing. See attached file. Anyone knows how to "do 
it right"?

Thanks

Oliver
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.c
Type: text/x-csrc
Size: 464 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080129/28ff2d56/test.bin
From oliver.eichler at gmx.de  Tue Jan 29 02:54:05 2008
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Tue Jan 29 02:54:08 2008
Subject: [gdal-dev] Conversion problem proj4 -> wkt ->proj4
In-Reply-To: <20080129070916.70320@gmx.net>
References: <20080129070916.70320@gmx.net>
Message-ID: <20080129075405.312050@gmx.net>


Ok, solved it. Found a hint by chance :)

You have to add +wktext


+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs


Oliver


-------- Original-Nachricht --------
> Datum: Tue, 29 Jan 2008 08:09:16 +0100
> Von: "Oliver Eichler" <oliver.eichler@gmx.de>
> An: gdal-dev@lists.osgeo.org
> Betreff: [gdal-dev] Conversion problem proj4 -> wkt ->proj4

> Hi,
> 
> I try to convert a proj4 string into wkt to store it into a GeoTiff. Later
> on 
> I need to restore the projection from the string. However the most
> important 
> part "+nadgrids=@null" is missing. See attached file. Anyone knows how to
> "do 
> it right"?
> 
> Thanks
> 
> Oliver
From agerretsen at nlr.nl  Tue Jan 29 04:40:02 2008
From: agerretsen at nlr.nl (Gerretsen, A.)
Date: Tue Jan 29 04:40:19 2008
Subject: [gdal-dev] Lat/long & distance/heading calculation
References: <DF1471B5C308B346BF5A2AEA00C5615E0B2918@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<479E7995.7080200@daylongraphics.com>
Message-ID: <BD1E017E319BDA46B6E4E8885A0F4859743489@exchange1a.nlr.nl>

Sorry for hijacking this discussion a bit, but we have a similar problem.

We are sort of doing to inverse of the issue mentioned here. We have an aircraft at a certain position and to that
aircraft a camera is attached looking at another position.

In the software we have these positions in XYZ coordinates (for example UTM), but if we calculate the heading wtih those
it is relative to the "grid north" of the projection used. That is not what we need to send to our visual, which needs
them relative to "true north". Is there an easy way to convert between those two?

Arno


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ray Gardener
Sent: 29 January 2008 01:56
To: Meek, Allan (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Lat/long & distance/heading calculation

If you can use UTM or similar coords, then

x = cos(heading) * distance + start_pos_x
y = sin(heading) * distance + start_pos_y

Assuming heading in clockwise radians with north = up.

Then you can inverse transform (x, y) from UTM to lat/lon.

Ray


Meek, Allan (Contractor) wrote:
> This is a bit of a long shot, but I'm hoping I might find some help
> here. 
> 
> I have a start lat/long position, a distance, and a heading. Is there an
> easy way (in OGR or elsewhere) to calculate the end lat/long position
> (after travelling the given distance on the given heading)?
> 
> I have a working formula for calculating the distance and heading
> between two lat/long positions, but I wanted to see if I can get around
> having to rework this to solve my problem.
> 
> Any help would be appreciated!
> 
> Thanks,
> Allan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dany.geotools at gmail.com  Tue Jan 29 06:02:21 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Jan 29 06:02:25 2008
Subject: [gdal-dev] Help on building GDAL with JPEG2000 (Jasper) support on
	Windows for use with Java Bindings
Message-ID: <7221db410801290302l5dd0eedes39c5a297059abd80@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: jvmcrash.log
Type: application/octet-stream
Size: 19347 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080129/e45bdcec/jvmcrash-0001.obj
From andyc at comsine.co.uk  Tue Jan 29 07:25:28 2008
From: andyc at comsine.co.uk (Andrew Chamberlain)
Date: Tue Jan 29 07:23:55 2008
Subject: [gdal-dev] gdalwarp and the geos projection
Message-ID: <479F1B38.3090306@comsine.co.uk>

Hi All,

Just wondering if anyone can help.  Apologies if this is the wrong 
mailing list, but I couldn't find any other for GDAL users.

I'm using gdalwarp to project an image from Plate Carree (proj=eqc) to 
Geostationary Satellite projection (proj=geos), and I'm finding that the 
east and west edges of the resulting Earth-disk are being cut off (at 
the sides of the containing image).  I would estimate the clipping to be 
~100 pixels on each side (the overall width is 3700).

The source image has the projection details given below, and the command 
I'm using is:

  gdalwarp -t_srs '+proj=geos +lon_0=0.0 +h=745331460 +x_0=0.0 +y_0=0.0' 
-ts 3700 3700 source_eqc.tif dest_geos.tif

Has anyone seen this problem before with the geos projection?  When I 
try with the ortho projection, the full Earth disk is rendered.

Andy

-----------------------------------------------------

Size is 16384, 8192
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Equirectangular"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-20036285.350299999117851,10018754.171399999409914)
Pixel Size = (2445.835614050000004,-2445.835614050000004)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-20036285.350,10018754.171) (  0d 0'0.01"E, 90d 0'0.00"N)
Lower Left  (-20036285.350,-10017531.179) (179d59'20.45"W, 89d59'20.71"S)
Upper Right (20036285.350,10018754.171) (  0d 0'0.01"E, 90d 0'0.00"N)
Lower Right (20036285.350,-10017531.179) (179d59'20.45"E, 89d59'20.71"S)
Center      (      -0.000,     611.496) (  0d 0'0.00"W,  0d 0'19.91"N)

From retsios at itc.nl  Tue Jan 29 08:17:18 2008
From: retsios at itc.nl (Bas Retsios)
Date: Tue Jan 29 08:17:23 2008
Subject: [gdal-dev] gdalwarp and the geos projection
In-Reply-To: <479F1B38.3090306@comsine.co.uk>
References: <479F1B38.3090306@comsine.co.uk>
Message-ID: <479F275E.7070800@itc.nl>

Hi!

We use the geos projection in gdalwarp, but only as a source (not as a 
target).
The images we receive in geos projection are from the meteorological 
satellites Meteosat-8 and Meteosat-9 (MSG).
And the size of most bands is 3712x3712 pixels.

I noticed your 3700x3700 images, therefore I got curious: are you trying 
to convert back to the projection of the MSG images?

Anyway, the only suspicious part I noticed in your gdalwarp command is 
the +h=745331460 parameter.
+h is the satellite height, in meters. This "height" is the distance 
from the ellipsoid (thus not from the centre of the earth). For MSG 
(which is a geostationary satellite), the correct value is +h=35785831.
Your value is about 20 times higher, which is two times the earth-moon 
distance. Are you sure you have an image taken from that far away?
See also:
http://www.remotesensing.org/geotiff/proj_list/geos.html

Cheers,

Bas.

-- 
Ir. V. (Bas) Retsios
Software Developer
Geo-information Processing Department
International Institute for Geo-information Science and Earth Observation (ITC)
P.O. Box 6,  7500 AA Enschede, The Netherlands
Phone +31 (0)53 4874 573, telefax +31 (0)53 4874 335
E-mail retsios@itc.nl, Internet http://www.itc.nl



Andrew Chamberlain wrote:

> Hi All,
>
> Just wondering if anyone can help.  Apologies if this is the wrong 
> mailing list, but I couldn't find any other for GDAL users.
>
> I'm using gdalwarp to project an image from Plate Carree (proj=eqc) to 
> Geostationary Satellite projection (proj=geos), and I'm finding that 
> the east and west edges of the resulting Earth-disk are being cut off 
> (at the sides of the containing image).  I would estimate the clipping 
> to be ~100 pixels on each side (the overall width is 3700).
>
> The source image has the projection details given below, and the 
> command I'm using is:
>
>  gdalwarp -t_srs '+proj=geos +lon_0=0.0 +h=745331460 +x_0=0.0 
> +y_0=0.0' -ts 3700 3700 source_eqc.tif dest_geos.tif
>
> Has anyone seen this problem before with the geos projection?  When I 
> try with the ortho projection, the full Earth disk is rendered.
>
> Andy
>
> -----------------------------------------------------
>
> Size is 16384, 8192
> Coordinate System is:
> PROJCS["unnamed",
>    GEOGCS["unnamed",
>        DATUM["unknown",
>            SPHEROID["unretrievable - using 
> WGS84",6378137,298.257223563]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.0174532925199433]],
>    PROJECTION["Equirectangular"],
>    PARAMETER["latitude_of_origin",0],
>    PARAMETER["central_meridian",0],
>    PARAMETER["false_easting",0],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]]]
> Origin = (-20036285.350299999117851,10018754.171399999409914)
> Pixel Size = (2445.835614050000004,-2445.835614050000004)
> Metadata:
>  AREA_OR_POINT=Area
> Corner Coordinates:
> Upper Left  (-20036285.350,10018754.171) (  0d 0'0.01"E, 90d 0'0.00"N)
> Lower Left  (-20036285.350,-10017531.179) (179d59'20.45"W, 89d59'20.71"S)
> Upper Right (20036285.350,10018754.171) (  0d 0'0.01"E, 90d 0'0.00"N)
> Lower Right (20036285.350,-10017531.179) (179d59'20.45"E, 89d59'20.71"S)
> Center      (      -0.000,     611.496) (  0d 0'0.00"W,  0d 0'19.91"N)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From pmallas at rsmas.miami.edu  Tue Jan 29 09:17:41 2008
From: pmallas at rsmas.miami.edu (Paul Mallas)
Date: Tue Jan 29 09:17:43 2008
Subject: [gdal-dev] Re: GDAL 1.5.0 Perl Binding on Cygwin
In-Reply-To: <47992EF4.9010603@aol.com>
References: <8CA282233D9B81F-900-1750@webmail-nf18.sim.aol.com>
	<fna8u8$svb$1@ger.gmane.org> <47992EF4.9010603@aol.com>
Message-ID: <479F3585.1030601@rsmas.miami.edu>

I finally got the GDAL Perl bindings to compile on Cygwin. 

In addition to the c++ library issue that Jim mentioned, I used the 
--without-libtool option in the configure script when building the gdal 
library.

Jingmu Yang wrote:
> I experienced the same problem when I initially built GDAL 1.5.0 on 
> Cygwin.  After analyzing the libraries I found that I had old GDAL 
> libraries installed on /usr/local/lib/.  What I did was to delete 
> those old libraries from /usr/local/lib and then built GDAL 1.5.0 
> without Perl binding.  After GDAL 1.5.0 was installed on /usr/local/ I 
> built Perl binding as I described and I no longer have the link problems.
>
> Hope this can help.
>
> Jim
>
> Paul Mallas wrote:
>> I fixed this problem by editing a Cygwin script /usr/bin/perlld from:
>>
>> my $CC = 'gcc';
>> to:
>> my $CC = 'g++';
>>
>> This seems to fix other perl problems (non-GDAL) with Cygwin as well. 
>> When I pointed this out, the Cygwin folks thought it was a bug but 
>> wanted to investigate why this was set to gcc in the first place.
>>
>> Anyway, my problem remains with perl swig bindings on Cygwin. I know 
>> Ari wants nothing more to do with this issue, but since we're on the 
>> subject, maybe someone else might able to give me a clue.
>>
>> It seems I have a problem linking with the gdal lib with external 
>> libs.  I get a ton of these types of messages below - I think the 
>> issue has to do with the beginning underscore in the calls because 
>> rikdataset.cpp calls "uncompress" not "_uncompress":
>>
>> /usr/local/lib/libgdal.a(rikdataset.o):rikdataset.cpp:(.text+0x519): 
>> undefined reference to `_uncompress'
>> /usr/local/lib/libgdal.a(jpeg2000dataset.o): In function 
>> `_ZN18JPEG2000RasterBandC2EP15JPEG2000Datasetiii':
>> /home/pmallas/gdal/frmts/jpeg2000/jpeg2000dataset.cpp:257: undefined 
>> reference to `_jas_matrix_create'
>> ....
>>
>> I am ignorant of how libraries get called - probably the windows 
>> demands a prepended underscore for library calls or something. And I 
>> know there are flags to manipulate leading underscores with g++ (like 
>> -fleading-underscore), but I could never get them to work. I have 
>> spent considerable time trying to sort this out with no luck.
>>
>> Any insights would be appreciated.
>>
>> jingmuyang@aol.com wrote:
>>> I have successfully built GDAL 1.5.0 Perl binding on Cygwin and the 
>>> followings might be helpful for those who experience problems.
>>>
>>> 1. Go to directory gdal-1.5.0/swig/perl and run 'perl Makefile.PL'.  
>>> The following four Makefiles should be created if it succeeds:
>>>
>>> Makefile_Geo__GDAL
>>> Makefile_Geo__GDAL__Const
>>> Makefile_Geo__OGR
>>> Makefile_Geo__OSR
>>>
>>> 2. Edit each of the four Makefiles by appending -lstdc++ after each 
>>> -lgdal and save them.
>>>
>>> 3. Run make using each of the four Makefiles as follows:
>>>
>>> make -f Makefile_Geo__GDAL
>>> make -f Makefile_Geo__GDAL__Const
>>> make -f Makefile_Geo__OGR
>>> make -f Makefile_Geo__OSR
>>>
>>> 4. Install the Perl Geo::GDAL package by running
>>>
>>> make -f Makefile_Geo__GDAL install
>>>
>>> That it.  Enjoy!
>>>
>>> Jim
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>> More new features than ever. Check out the new AOL Mail 
>>> <http://o.aolcdn.com/cdn.webmail.aol.com/mailtour/aol/en-us/text.htm?ncid=aolcmp00050000000003>! 
>>>
>>>
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From crschmidt at metacarta.com  Tue Jan 29 10:19:12 2008
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Tue Jan 29 10:19:17 2008
Subject: [gdal-dev] Conversion problem proj4 -> wkt ->proj4
In-Reply-To: <20080129070916.70320@gmx.net>
References: <20080129070916.70320@gmx.net>
Message-ID: <20080129151912.GB713@alta.metacarta.com>

On Tue, Jan 29, 2008 at 08:09:16AM +0100, Oliver Eichler wrote:
> Hi,
> 
> I try to convert a proj4 string into wkt to store it into a GeoTiff. Later on 
> I need to restore the projection from the string. However the most important 
> part "+nadgrids=@null" is missing. See attached file. Anyone knows how to "do 
> it right"?

Use "+wktext" -- this tells it to store a special piece of metadata with
the actual proj4 in it:

+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0
+k=1.0 +units=m +nadgrids=@null +wktext  +no_defs

The WKT should then match this:
http://spatialreference.org/ref/user/6/prettywkt/

Regards,
-- 
Christopher Schmidt
MetaCarta
From daniel112b at gmail.com  Tue Jan 29 10:19:34 2008
From: daniel112b at gmail.com (Daniel)
Date: Tue Jan 29 10:19:39 2008
Subject: [gdal-dev] Performance and sibling files
Message-ID: <962626470801290719o6f011045jb2dd9f957e666e51@mail.gmail.com>

Hello,

We have identfied a serious performance problem with the reading of sibling
files performed in the GDALOpenInfo constructor.

When we commented out lines 123-127 in gdalopeninfo.cpp (the VSIReadDir
call), the runtime of our application went down from 150 days to 15! The
application is 100% i/O-bound (uses no cpu time according to the task
manager)

This is our setup:

7.5 million small (~20 KB) jpeg files with corresponding world files for a
total of 15 million files, distributed in 50000 directories (approximately
300 files per directory).

The files reside on a fast 15K SAS disk running in a Windows 2003 server
with 8 cores and 4 GB RAM. The filesystem is NTFS (no compression /
indexing).

Due to the way the files are organized, neighboring jpeg files are located
in different directories. This means that we always have to read the entire
directory in order to open just one file.

Our app needs to go read the entire dataset ordered geographically.
Unfortunately, changing the directory layout is not an option.

Reading one complete directory means reading ~1.5 MB data from disk. The
data is read non-sequentially, since the NTFS directory structure is a
B-Tree and FindNextFile returns the contents sorted alphabetically.
The disk cache gets exhausted after reading 2700 directories. This means
that we neve re-use the previously read directory data.

I realise that this might be a quite unusual case but it would be very nice
if the sibling reading in GDALOpenInfo was optional.

I don't think that the changes made in ticket #2158 (
http://trac.osgeo.org/gdal/ticket/2158) would help in this case since there
was almost no CPU utilization.

Regards,
  Daniel B?ck
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080129/66db6b59/attachment.html
From Allan.Meek at drdc-rddc.gc.ca  Tue Jan 29 10:22:22 2008
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Tue Jan 29 10:22:27 2008
Subject: [gdal-dev] Lat/long & distance/heading calculation
In-Reply-To: <82c245aa0801281745t459c98a8xbd4b19ce87632fe2@mail.gmail.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E0B2918@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<479E7995.7080200@daylongraphics.com>
	<82c245aa0801281745t459c98a8xbd4b19ce87632fe2@mail.gmail.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1099CA@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Thanks to everybody for the replies. I had actually found the formula
for distance between 

two lat-lon coordinates on this page. If only I'd scrolled down a little
bit, I'd have found this 

formula!

 

Allan

 

________________________________

From: Lennox Antoine [mailto:lxnyce@gmail.com] 
Sent: January 28, 2008 8:46 PM
To: Ray Gardener
Cc: Meek, Allan (Contractor); gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Lat/long & distance/heading calculation

 

This might be what you're looking for :
http://www.movable-type.co.uk/scripts/latlong.html

Look for the section : Destination point given distance and bearing from
start point

-Lennox

On Jan 28, 2008 7:55 PM, Ray Gardener <rayg@daylongraphics.com> wrote:

If you can use UTM or similar coords, then

x = cos(heading) * distance + start_pos_x
y = sin(heading) * distance + start_pos_y

Assuming heading in clockwise radians with north = up.

Then you can inverse transform (x, y) from UTM to lat/lon.

Ray






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080129/b913e033/attachment-0001.html
From andyc at comsine.co.uk  Tue Jan 29 11:51:13 2008
From: andyc at comsine.co.uk (Andrew Chamberlain)
Date: Tue Jan 29 11:49:37 2008
Subject: [gdal-dev] gdalwarp and the geos projection
In-Reply-To: <479F275E.7070800@itc.nl>
References: <479F1B38.3090306@comsine.co.uk> <479F275E.7070800@itc.nl>
Message-ID: <479F5981.7070604@comsine.co.uk>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080129/a3b30dbd/attachment.html
From even.rouault at mines-paris.org  Tue Jan 29 14:30:22 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 29 14:30:27 2008
Subject: [gdal-dev] Performance and sibling files
In-Reply-To: <962626470801290719o6f011045jb2dd9f957e666e51@mail.gmail.com>
References: <962626470801290719o6f011045jb2dd9f957e666e51@mail.gmail.com>
Message-ID: <200801292030.22952.even.rouault@mines-paris.org>

Daniel,

I have added your message in ticket #2158 and added you in CC of the ticket, 
so you can follow how it evolves.

Best regards,
Even

Le Tuesday 29 January 2008 16:19:34 Daniel, vous avez ?crit?:
> Hello,
>
> We have identfied a serious performance problem with the reading of sibling
> files performed in the GDALOpenInfo constructor.
>
> When we commented out lines 123-127 in gdalopeninfo.cpp (the VSIReadDir
> call), the runtime of our application went down from 150 days to 15! The
> application is 100% i/O-bound (uses no cpu time according to the task
> manager)
>
> This is our setup:
>
> 7.5 million small (~20 KB) jpeg files with corresponding world files for a
> total of 15 million files, distributed in 50000 directories (approximately
> 300 files per directory).
>
> The files reside on a fast 15K SAS disk running in a Windows 2003 server
> with 8 cores and 4 GB RAM. The filesystem is NTFS (no compression /
> indexing).
>
> Due to the way the files are organized, neighboring jpeg files are located
> in different directories. This means that we always have to read the entire
> directory in order to open just one file.
>
> Our app needs to go read the entire dataset ordered geographically.
> Unfortunately, changing the directory layout is not an option.
>
> Reading one complete directory means reading ~1.5 MB data from disk. The
> data is read non-sequentially, since the NTFS directory structure is a
> B-Tree and FindNextFile returns the contents sorted alphabetically.
> The disk cache gets exhausted after reading 2700 directories. This means
> that we neve re-use the previously read directory data.
>
> I realise that this might be a quite unusual case but it would be very nice
> if the sibling reading in GDALOpenInfo was optional.
>
> I don't think that the changes made in ticket #2158 (
> http://trac.osgeo.org/gdal/ticket/2158) would help in this case since there
> was almost no CPU utilization.
>
> Regards,
>   Daniel B?ck


From estrada.adam at gmail.com  Tue Jan 29 14:35:15 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Tue Jan 29 14:35:53 2008
Subject: [gdal-dev] Re: OGR Select Features by Location...
In-Reply-To: <479ECEE0.30906@omc-international.com.au>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>
	<AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>
	<9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com> 
	<20080123174135.139330@gmx.net>
	<479ECEE0.30906@omc-international.com.au>
Message-ID: <9aeca04d-54e5-4b0a-a5dc-546be7226637@q77g2000hsh.googlegroups.com>

All,
    How important is it to create the index for the intersection
function I am trying to perform.  We are talking over 15 million LIDAR
points already loaded in to my PostgreSQL DB for a single dataset.  I
read something that said that each set of 1 million points takes an
hour to process when creating the index.  I have 60 datasets that are
similar in size...Arghhh...I suppose that I will try it with and then
without the indexes and report back.

AWE

On Jan 29, 1:59?am, Joe Healy <j...@omc-international.com.au> wrote:
> We use postgis for this sort of work. It is orders of magnitude faster
> than ArcGIS.
>
> ?From memory the largest we have dealt with so far was in the 10's of
> millions of points. It handles this very well.
>
> Depending on the size of the dataset, we find loading the data using the
> copy command in psql, creating indexes and then querying is fast enough
> that people are happy to reload the data etc. each time they perform the
> join. For the larger data sets, loading the data and building the
> indexes once is a big gain.
>
> Hope this helps,
>
> Joe
>
> Jose Luis Gomez Dans wrote:
>
>
>
>
>
> > Hi,
>
> >> I think that if you built GDAL with GEOS support, you can call on the GEOS
> >> methods from directly within your ogr objects. ?(Not sure I'm saying that
> >> right) ?There is an example here -
> >>http://mapserver.gis.umn.edu/community/conferences/MUM3/workshop/pyth...
>
> >> Code in the example looks something like this:
>
> >> #! /usr/bin/python
>
> >> import ogr
>
> >> r1 = {'minx': -5.0, 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}
> >> r2 = {'minx': 0.0, 'miny': -5.0, 'maxx': 10.0, 'maxy':5.0}
>
> >> template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f
> >> %(maxy)
> >> f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'
>
> >> w1 = template % r1
> >> w2 = template % r2
>
> >> g1 = ogr.CreateGeometryFromWkt(w1)
> >> g2 = ogr.CreateGeometryFromWkt(w2)
>
> >> inter = g1.Intersection(g2) ? # <---------------GEOS Intersection command?
>
> >> print inter
>
> > While this will work, I doubt it will cope with multi-million points. Say that you know the extent of your polygon (min and max x and y coordinates), you could extract the points within that region "easily" with OGR and python:
> > import ogr
> > r1 = {'minx': -5.0 , 'miny': 0.0, 'maxx': 5.0, 'maxy':10.0}
>
> > template = 'POLYGON ((%(minx)f %(miny)f, %(minx)f %(maxy)f, %(maxx)f %(maxy) f, %(maxx)f %(miny)f, %(minx)f %(miny)f))'
>
> > w1 = template % r1
>
> > g1 = ogr.CreateGeometryFromWkt(w1)
> > s = ogr.Open (<fname>)
> > L = s.GetLayer(0) #Or layer whatever
> > L.SetSpatialFilter ( g1 )
> > #If it is a square region,
> > #L.SetSpatialFilterRect(r1['minx'], r1['miny'], r1['maxx'], r1['maxy'])
>
> > Clearly, you can use any geometry, not just a square. You can have a shapefile with your polygon geometry, read the first feature, and use that as your SpatialFilter geometry, but I don't know how fast this is. If you decide to go this way, it would be interesting to know how well it performs.
>
> > Jose
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev- Hide quoted text -
>
> - Show quoted text -
From armin.burger at gmx.net  Tue Jan 29 16:51:41 2008
From: armin.burger at gmx.net (Armin Burger)
Date: Tue Jan 29 16:51:45 2008
Subject: [gdal-dev] GDAL Java bindings, compiled for Windows
Message-ID: <479F9FED.7040406@gmx.net>

Hello everybody

does anybody know if there is somewhere a compiled version (for Windows)
of GDAL including Java bindings available that could be used for
extracting basic information from various types of image formats
(extent, projection, bands, etc)? An older version like 1.3 would be
fully sufficient.

Before just calling the gdalinfo executable and parsing the output with
Java I would like to be sure there are no other alternatives currently
available.

Thanks for any help

Armin



From joe at omc-international.com.au  Tue Jan 29 18:55:32 2008
From: joe at omc-international.com.au (Joe Healy)
Date: Tue Jan 29 18:55:40 2008
Subject: [gdal-dev] Re: OGR Select Features by Location...
In-Reply-To: <9aeca04d-54e5-4b0a-a5dc-546be7226637@q77g2000hsh.googlegroups.com>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>	<AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>	<9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com>
	<20080123174135.139330@gmx.net>	<479ECEE0.30906@omc-international.com.au>
	<9aeca04d-54e5-4b0a-a5dc-546be7226637@q77g2000hsh.googlegroups.com>
Message-ID: <479FBCF4.1000807@omc-international.com.au>

We're probably getting a little off topic, but

estrada.adam@gmail.com wrote:
> All,
>     How important is it to create the index for the intersection
> function I am trying to perform. 
It depends on how many of your points are within the bounding box of 
each polygon.
If the bounding box will reduce the number of point in polygon 
comparisons significantly then it is essential, otherwise a linear scan 
may be quicker if they are all inside.
>  We are talking over 15 million LIDAR
> points already loaded in to my PostgreSQL DB for a single dataset.  I
> read something that said that each set of 1 million points takes an
> hour to process when creating the index.
For sets with approx 8 million points someone here ran yesterday, the 
complete loading, indexing and querying took approximately 40 minutes 
per set.
Make sure you are using copy to insert the data. Email either the 
posgresql performance list or postgis list for other performance hints 
if it is still not quick enough.

Hope that helps,

Joe
From sfkeller at gmail.com  Tue Jan 29 20:20:21 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Tue Jan 29 20:20:23 2008
Subject: [gdal-dev] Select a geometry attribute from multiple geometry input?
Message-ID: <25bc040b0801291720n35cf9f46hc6bfe9ecd80a21f1@mail.gmail.com>

Hi all,

There are formats which allow a feature class to have multiple geometry
attributes.
I currently look at the INTERLIS input driver with a dataset which contains
label features.
They have a position (POINT) and direction (LINESTRING) and obviously the
input
driver takes the last one. The same problem can occur with GML.

How can I select a geometry attribute from input to be passed to an
OGR simple feature when there are many?

-- Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/cea4c568/attachment.html
From dany.geotools at gmail.com  Wed Jan 30 04:19:33 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Jan 30 04:19:36 2008
Subject: [gdal-dev] GDAL Java bindings, compiled for Windows
In-Reply-To: <479F9FED.7040406@gmx.net>
References: <479F9FED.7040406@gmx.net>
Message-ID: <7221db410801300119h6329f22p95696458d720ce1e@mail.gmail.com>

Hello Armin,
I dont know if a version of GDAL containing ready to use Java bindings (DLL)
exists.
I guess you should compile them by yourself using SWIG (proper makefile to
build Java bindings are already contained in GDAL).
Anyway, I'm working on a project which deeply leverages on JAVA bindings for
GDAL 1.4.4.
The project is available here:  https://imageio-ext.dev.java.net/

The homepage contains a link to a setup guide which illustrates,
step-by-step, how to setup all the required elements (Hence, the GDAL Java
bindings generation too).
You can take a look on that document. (LINK:
https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/documentation/ImageioExt-SetupGuide.pdf
)
It is actually on SVN: when asked for identification, you can set "guest" as
user with no password.
If you are not interested in some topics (such as kakadu, ecw, mrsid) you
can just skip those sections as well as the patch topic.
Note that it is not a definitive guide so it may be slightly changed in the
future (since I'm working on some maven procedures tunings).

You will notice that building GDAL and JAVA bindings is not a really hard
task.
However, if you encounter some problems, I can build a basic GDAL (without
external libraries) as well as Java bindings for you.
I can start the building in background.
Let me know.

Best Regards,
Daniele


On Jan 29, 2008 10:51 PM, Armin Burger <armin.burger@gmx.net> wrote:

> Hello everybody
>
> does anybody know if there is somewhere a compiled version (for Windows)
> of GDAL including Java bindings available that could be used for
> extracting basic information from various types of image formats
> (extent, projection, bands, etc)? An older version like 1.3 would be
> fully sufficient.
>
> Before just calling the gdalinfo executable and parsing the output with
> Java I would like to be sure there are no other alternatives currently
> available.
>
> Thanks for any help
>
> Armin
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/c8a77d51/attachment.html
From armin.burger at gmx.net  Wed Jan 30 07:00:10 2008
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Jan 30 07:00:13 2008
Subject: [gdal-dev] GDAL Java bindings, compiled for Windows
In-Reply-To: <7221db410801300119h6329f22p95696458d720ce1e@mail.gmail.com>
References: <479F9FED.7040406@gmx.net>
	<7221db410801300119h6329f22p95696458d720ce1e@mail.gmail.com>
Message-ID: <20080130120010.4150@gmx.net>

Daniele

sorry, I was overlooking this first mail, just read the second with the attached files. Thanks even more for the really valuable setup guide! I hope now we can manage to get it setup.

Armin



> Re: Re: [gdal-dev] GDAL Java bindings, compiled for Windows

> Hello Armin,
> I dont know if a version of GDAL containing ready to use Java bindings
> (DLL)
> exists.
> I guess you should compile them by yourself using SWIG (proper makefile to
> build Java bindings are already contained in GDAL).
> Anyway, I'm working on a project which deeply leverages on JAVA bindings
> for
> GDAL 1.4.4.
> The project is available here:  https://imageio-ext.dev.java.net/
> 
> The homepage contains a link to a setup guide which illustrates,
> step-by-step, how to setup all the required elements (Hence, the GDAL Java
> bindings generation too).
> You can take a look on that document. (LINK:
> https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/documentation/ImageioExt-SetupGuide.pdf
> )
> It is actually on SVN: when asked for identification, you can set "guest"
> as
> user with no password.
> If you are not interested in some topics (such as kakadu, ecw, mrsid) you
> can just skip those sections as well as the patch topic.
> Note that it is not a definitive guide so it may be slightly changed in
> the
> future (since I'm working on some maven procedures tunings).
> 
> You will notice that building GDAL and JAVA bindings is not a really hard
> task.
> However, if you encounter some problems, I can build a basic GDAL (without
> external libraries) as well as Java bindings for you.
> I can start the building in background.
> Let me know.
> 
> Best Regards,
> Daniele
> 
> 
> On Jan 29, 2008 10:51 PM, Armin Burger <armin.burger@gmx.net> wrote:
> 
> > Hello everybody
> >
> > does anybody know if there is somewhere a compiled version (for Windows)
> > of GDAL including Java bindings available that could be used for
> > extracting basic information from various types of image formats
> > (extent, projection, bands, etc)? An older version like 1.3 would be
> > fully sufficient.
> >
> > Before just calling the gdalinfo executable and parsing the output with
> > Java I would like to be sure there are no other alternatives currently
> > available.
> >
> > Thanks for any help
> >
> > Armin
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 
> 
> 
> -- 
> -------------------------------------------------------
> Eng. Daniele Romagnoli
> Software Engineer
> 
> GeoSolutions S.A.S.
> Via Carignoni 51
> 55041 Camaiore (LU)
> Italy
> 
> phone: +39 0584983027
> fax:     +39 0584983027
> mob:   +39 328 0559267
> 
> 
> http://www.geo-solutions.it
> 
> -------------------------------------------------------

-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail
From mchapman at texelinc.com  Wed Jan 30 11:50:33 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed Jan 30 11:50:40 2008
Subject: [gdal-dev] Slightly off topic...
Message-ID: <003701c86360$3b1d3800$b157a800$@com>

Canadian Mappers,

 

Have any of you Kanuck's ever wondered where your Canadian Geese go in the
winter time?  Well, they come to Colorado and poop all over the sidewalk.
What's up with that?

 

Martin J

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/4bfc97fb/attachment.html
From warmerdam at pobox.com  Wed Jan 30 12:00:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 30 12:00:42 2008
Subject: [gdal-dev] VSIReadDir() and GDALOpenInfo
Message-ID: <47A0AD20.3070404@pobox.com>

Folks,

These have been a couple complaints so far about the new behavior of the
GDALOpenInfo class (used by GDALOpen), where it will build a list of filenames
in a directory before calling each of the drivers to try and open something.

This was done in the hopes of reducing the overhead of having many drivers
probing around for files using fstat and fopen which I presume can be fairly
expensive.  This was especially perceived as an issue for the new identify
operation.

But it seems that just scanning for a list of files in a directory can be
quite expensive in a directory with many thousands of entries - at least on
some operating systems, as documented in:

   http://trac.osgeo.org/gdal/ticket/2158

Two steps have been taken in an effort to reduce the impact of this issue.
First, Even has corrected VSIReadDir() to avoid an O(n^2) effect in how
the filename list was being built.  Second, I have added a configuration
option so that it is possible to disable the directory scanning for those
who are aware that this issue is impacting their performance.

But I'm wondering if there is a fundamentally better approach to scanning
for the list of files in a directory, or if this is inherently quite an
expensive operation.  Thoughts?  Other experiences on this?  Is this more
of an issue with particular file systems?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From eschenbe at psc.edu  Wed Jan 30 12:03:52 2008
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Jan 30 12:03:59 2008
Subject: [gdal-dev] Slightly off topic...
In-Reply-To: <003701c86360$3b1d3800$b157a800$@com>
References: <003701c86360$3b1d3800$b157a800$@com>
Message-ID: <47A0ADF8.9020608@psc.edu>

Actually the animal's name is the Canada Goose (one) or Canada Geese (several). 
They'd only be "Canadian" if they were born in Canada but the little map (have 
to work a map in here somewhere) at

    http://en.wikipedia.org/wiki/Canada_Goose

suggests that more come from the U.S. than Canada. Sure it isn't your 
neighbor's poodle?

Kent

Martin Chapman wrote:
> Canadian Mappers,
> 
> Have any of you Kanuck's ever wondered where your Canadian Geese go in the
> winter time?  Well, they come to Colorado and poop all over the sidewalk.
> What's up with that?
> 
> Martin J
From warmerdam at pobox.com  Wed Jan 30 12:05:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 30 12:05:25 2008
Subject: [gdal-dev] Select a geometry attribute from multiple geometry
	input?
In-Reply-To: <25bc040b0801291720n35cf9f46hc6bfe9ecd80a21f1@mail.gmail.com>
References: <25bc040b0801291720n35cf9f46hc6bfe9ecd80a21f1@mail.gmail.com>
Message-ID: <47A0AE3C.2060103@pobox.com>

Stefan Keller wrote:
> Hi all,
>  
> There are formats which allow a feature class to have multiple geometry 
> attributes.
> I currently look at the INTERLIS input driver with a dataset which 
> contains label features.
> They have a position (POINT) and direction (LINESTRING) and obviously 
> the input
> driver takes the last one. The same problem can occur with GML.
>  
> How can I select a geometry attribute from input to be passed to an
> OGR simple feature when there are many?

Stefan,

The OGR data model assumes at most one geometry per feature.  In theory
you could merge multiple features as a feature collection, but that will
generally be unsatisfactory in actual use.  I have contemplated having
drivers like the PostGIS driver treat this case as distinct layers.  So
for instance, a table with two geometry columns might appear through
OGR as two layers, one for each geometry column.

We could potentially extend the OGR API to allow multiple geometries.  It
would *likely* have to be accomplished by basically reporting the geometry
properties available for a layer, and providing a call to select which of
them would be in use for a given set of operations.  But even this modest
change would be a non-trivial effort.  It would require an RFC and someone
willing to work on it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Mario.Beaulieu at crim.ca  Wed Jan 30 12:07:52 2008
From: Mario.Beaulieu at crim.ca (mario beaulieu)
Date: Wed Jan 30 12:08:41 2008
Subject: [gdal-dev] 1 bits per pixel tif image io driver
Message-ID: <3D784C4B-3359-484F-88E0-847C2CAA1215@corpo.crim.ca>

Hi, i am a newbie.

Is it possible to load 1 bit per pixel image (1BPP) with gdal since GDALDataType does not enumerated this type of image?



-------------------------------------------------------------
Mario Beaulieu
Agent de recherche
?quipe Vision et imagerie
CRIM (Centre de recherche informatique de Montr?al / 
Computer Research Institute of Montreal)
514 840-1235, poste 2478
Mario.Beaulieu@crim.ca
www.crim.ca
-------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/080b8920/attachment.html
From warmerdam at pobox.com  Wed Jan 30 12:09:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 30 12:10:17 2008
Subject: [gdal-dev] GDALContourGenerate() and kml
In-Reply-To: <1201581332.21758.15.camel@winkey.org>
References: <1201581332.21758.15.camel@winkey.org>
Message-ID: <47A0AF5C.3040102@pobox.com>

winkey wrote:
> It seems there is an issue with contouring directly to kml
> 
> If you set ID and ELEV OGR fields, they end up with field id's of 2 and
> 3, name and description have 0 and 1. gdal_contour as well as my code
> assumes id's of 0 and 1.
> 
> If you contour to another OGR format then translate to kml, ID and ELEV
> are set, name and description are missing.
> 
> if your use id's of 2 and 3 when contouring to kml, ID and ELEV are set,
> but if you contour to a different OGR format then translate to kml then
> no fields are set.

Brian,

I haven't reviewed this really carefully, but I think the problem is that the
gdal_contour program assumes that newly created layers have no fields, and
that the fields it creates will be added with field index 0, 1, 2, etc.  This
is true of most formats, but some formats have predefined attribute fields
when a fresh layer is created.

I would suggest you file a detailed ticket on the problem and gdal_contour
can be made more flexible, and also made to recognise and issue an error
when new fields can't be created.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Jan 30 12:19:49 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 30 12:20:15 2008
Subject: [gdal-dev] 1 bits per pixel tif image io driver
In-Reply-To: <3D784C4B-3359-484F-88E0-847C2CAA1215@corpo.crim.ca>
References: <3D784C4B-3359-484F-88E0-847C2CAA1215@corpo.crim.ca>
Message-ID: <47A0B1B5.1050004@pobox.com>

mario beaulieu wrote:
> Hi, i am a newbie.
>  
> Is it possible to load 1 bit per pixel image (1BPP) with gdal since 
> GDALDataType 
> <http://www.gdal.org/gdal_8h.html#22e22ce0a55036a96f652765793fb7a4> does 
> not enumerated this type of image?

Mario,

GDAL will automatically treat 1bit TIFF files as 8bit which happen to only
have pixel values 0 and 1.  In most cases it will also treat 0 and 1 as having
pseudocolor table entries to provide proper color and it will report metadata
indicating that NBITS=1.

eg.

warmerda@gdal64[53]% gdalinfo misc/fax2d.tif --debug off
Driver: GTiff/GeoTIFF
Files: misc/fax2d.tif
Size is 1728, 1082
Coordinate System is `'
Metadata:
   TIFFTAG_SOFTWARE=fax2tiff
   TIFFTAG_XRESOLUTION=204
   TIFFTAG_YRESOLUTION=98
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
   COMPRESSION=CCITTFAX3
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 1082.0)
Upper Right ( 1728.0,    0.0)
Lower Right ( 1728.0, 1082.0)
Center      (  864.0,  541.0)
Band 1 Block=1728x1082 Type=Byte, ColorInterp=Palette
   Image Structure Metadata:
     NBITS=1
   Color Table (RGB with 2 entries)
     0: 255,255,255,255
     1: 0,0,0,255

So, yes, you can work with 1BPP images.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mgfernandes at ualg.pt  Wed Jan 30 13:18:22 2008
From: mgfernandes at ualg.pt (Miguel Fernandes)
Date: Wed Jan 30 13:22:29 2008
Subject: [gdal-dev] Version gdal-svn-stable-2008.01.21 with ECW support in
	windows
Message-ID: <47A0BF6E.8050307@ualg.pt>

Hello,

I'm trying to have the version gdal-svn-stable-2008.01.21 with ECW 
enable in windows but i'm not being successful. I'm have no compilation 
problem but when ask for the formats the ecw is not available.
I've downloaded de ERMapper SDK 3.3 and linked with those libs but not 
successful, I've downloaded the SDK source code, compiled and linked 
gdal with the libraries but not successful again.
I'm enabling ecw in GDAL with the following lines:

ECW_PLUGIN = NO
ECWDIR  =     C:\Programas\libs\ecw\libecwj2-3.3
ECWLIB  =   $(ECWDIR)\lib\NCScnetd.lib $(ECWDIR)\lib\NCScnetSd.lib 
$(ECWDIR)\lib\NCSEcwd.lib $(ECWDIR)\lib\NCSEcwCd.lib 
$(ECWDIR)\lib\NCSEcwCud.lib $(ECWDIR)\lib\NCSEcwSd.lib 
$(ECWDIR)\lib\NCSUtild.lib $(ECWDIR)\lib\NCSUtilSd.lib

Am I missing something in order to enable the feature or is this a 
version mismatch.
Kind Regards,

-- 
/Miguel Fernandes
/*
**Projecto ERSTA*
CIMA - Centro de Investiga??o Marinha Ambiental
Campus de Gambelas
8005-139 Faro
Portugal

+351 289800995 ext.7574
mgfernandes@ualg.pt

From warmerdam at pobox.com  Wed Jan 30 13:31:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 30 13:32:14 2008
Subject: [gdal-dev] Version gdal-svn-stable-2008.01.21 with ECW support
	in windows
In-Reply-To: <47A0BF6E.8050307@ualg.pt>
References: <47A0BF6E.8050307@ualg.pt>
Message-ID: <47A0C28D.20005@pobox.com>

Miguel Fernandes wrote:
> Hello,
> 
> I'm trying to have the version gdal-svn-stable-2008.01.21 with ECW 
> enable in windows but i'm not being successful. I'm have no compilation 
> problem but when ask for the formats the ecw is not available.
> I've downloaded de ERMapper SDK 3.3 and linked with those libs but not 
> successful, I've downloaded the SDK source code, compiled and linked 
> gdal with the libraries but not successful again.
> I'm enabling ecw in GDAL with the following lines:
> 
> ECW_PLUGIN = NO
> ECWDIR  =     C:\Programas\libs\ecw\libecwj2-3.3
> ECWLIB  =   $(ECWDIR)\lib\NCScnetd.lib $(ECWDIR)\lib\NCScnetSd.lib 
> $(ECWDIR)\lib\NCSEcwd.lib $(ECWDIR)\lib\NCSEcwCd.lib 
> $(ECWDIR)\lib\NCSEcwCud.lib $(ECWDIR)\lib\NCSEcwSd.lib 
> $(ECWDIR)\lib\NCSUtild.lib $(ECWDIR)\lib\NCSUtilSd.lib
> 
> Am I missing something in order to enable the feature or is this a 
> version mismatch.

Miguel,

The most likely issue (IMHO) is that changes to nmake.opt do not
automatically trigger rebuild of all affected files.  So if you did a
build, then added the above to nmake.opt and built again some files would
not get recompiled that need to be.

Try doing a clean and build.

eg.
nmake /f makefile.vc clean
nmake /f makefile.vc

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From estrada.adam at gmail.com  Wed Jan 30 15:27:13 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Wed Jan 30 15:27:16 2008
Subject: [gdal-dev] Re: OGR Select Features by Location...
In-Reply-To: <479FBCF4.1000807@omc-international.com.au>
References: <b3c6f4cd-10ab-4aaf-8f61-23d90e3c473f@21g2000hsj.googlegroups.com>
	<AE10F7D0-C920-11DC-9E67-000A277A733C@light42.com>
	<9c2015090801221849s5a0033e3x661b228a3fbe4ab1@mail.gmail.com> 
	<20080123174135.139330@gmx.net>
	<479ECEE0.30906@omc-international.com.au> 
	<9aeca04d-54e5-4b0a-a5dc-546be7226637@q77g2000hsh.googlegroups.com> 
	<479FBCF4.1000807@omc-international.com.au>
Message-ID: <2256ddfb-7283-4faa-a427-3815abc1af30@s19g2000prg.googlegroups.com>

Joe,
    I am actually using ogr2ogr to get the data in and out of the
database so this is not totally off topic!  Thanks for the update
though...it appears to be working wonderfully.

Adam

On Jan 29, 6:55?pm, Joe Healy <j...@omc-international.com.au> wrote:
> We're probably getting a little off topic, but
>
> estrada.a...@gmail.com wrote:
> > All,
> > ? ? How important is it to create the index for the intersection
> > function I am trying to perform.
>
> It depends on how many of your points are within the bounding box of
> each polygon.
> If the bounding box will reduce the number of point in polygon
> comparisons significantly then it is essential, otherwise a linear scan
> may be quicker if they are all inside.> ?We are talking over 15 million LIDAR
> > points already loaded in to my PostgreSQL DB for a single dataset. ?I
> > read something that said that each set of 1 million points takes an
> > hour to process when creating the index.
>
> For sets with approx 8 million points someone here ran yesterday, the
> complete loading, indexing and querying took approximately 40 minutes
> per set.
> Make sure you are using copy to insert the data. Email either the
> posgresql performance list or postgis list for other performance hints
> if it is still not quick enough.
>
> Hope that helps,
>
> Joe
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From sfkeller at gmail.com  Wed Jan 30 15:46:25 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed Jan 30 15:46:26 2008
Subject: [gdal-dev] Select a geometry attribute from multiple geometry
	input?
In-Reply-To: <47A0AE3C.2060103@pobox.com>
References: <25bc040b0801291720n35cf9f46hc6bfe9ecd80a21f1@mail.gmail.com>
	<47A0AE3C.2060103@pobox.com>
Message-ID: <25bc040b0801301246m6e375c9dp62876be5a7bac7a1@mail.gmail.com>

Frank,

 I can imagine that adding multiple geometries to OGR would touch some core
components.

> The OGR data model assumes at most one geometry per feature.

I assumed that. My proposal rather would be, that users have at least a
choice which geometry the input driver takes. This would restrict the
solution to the input drivers (GML, Interlis 1, Interlis 2, others?). I
would simply add a (common) format specific option (e.g. -dsco
GeometryField=fieldname). What do you think?

Stefan

2008/1/30, Frank Warmerdam <warmerdam@pobox.com>:
>
> Stefan Keller wrote:
> > Hi all,
> >
> > There are formats which allow a feature class to have multiple geometry
> > attributes.
> > I currently look at the INTERLIS input driver with a dataset which
> > contains label features.
> > They have a position (POINT) and direction (LINESTRING) and obviously
> > the input
> > driver takes the last one. The same problem can occur with GML.
> >
> > How can I select a geometry attribute from input to be passed to an
> > OGR simple feature when there are many?
>
> Stefan,
>
> The OGR data model assumes at most one geometry per feature.  In theory
> you could merge multiple features as a feature collection, but that will
> generally be unsatisfactory in actual use.  I have contemplated having
> drivers like the PostGIS driver treat this case as distinct layers.  So
> for instance, a table with two geometry columns might appear through
> OGR as two layers, one for each geometry column.
>
> We could potentially extend the OGR API to allow multiple geometries.  It
> would *likely* have to be accomplished by basically reporting the geometry
> properties available for a layer, and providing a call to select which of
> them would be in use for a given set of operations.  But even this modest
> change would be a non-trivial effort.  It would require an RFC and someone
> willing to work on it.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/7378e1d3/attachment.html
From sfkeller at gmail.com  Wed Jan 30 15:57:13 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed Jan 30 15:57:16 2008
Subject: [gdal-dev] GDAL Java bindings, compiled for Windows
In-Reply-To: <7221db410801300119h6329f22p95696458d720ce1e@mail.gmail.com>
References: <479F9FED.7040406@gmx.net>
	<7221db410801300119h6329f22p95696458d720ce1e@mail.gmail.com>
Message-ID: <25bc040b0801301257t655d6aabof3f1c364c60b48df@mail.gmail.com>

Hi all,

There have been at least two threads in the last weeks about GDAL-Java
binding. And I assume that several people interested in Java are listening
on this mailing lists.

Question to the GDAL maintainers (Frank, Mateusz?): What about to use the
Wiki like http://trac.osgeo.org/gdal/wiki/GdalOgrInJava to share
experiences?

Stefan

2008/1/30, Daniele Romagnoli <dany.geotools@gmail.com>:
>
> Hello Armin,
> I dont know if a version of GDAL containing ready to use Java bindings
> (DLL) exists.
> I guess you should compile them by yourself using SWIG (proper makefile to
> build Java bindings are already contained in GDAL).
> Anyway, I'm working on a project which deeply leverages on JAVA bindings
> for GDAL 1.4.4.
> The project is available here:  https://imageio-ext.dev.java.net/
>
> The homepage contains a link to a setup guide which illustrates,
> step-by-step, how to setup all the required elements (Hence, the GDAL Java
> bindings generation too).
> You can take a look on that document. (LINK:
> https://imageio-ext.dev.java.net/svn/imageio-ext/trunk/documentation/ImageioExt-SetupGuide.pdf
> )
> It is actually on SVN: when asked for identification, you can set "guest"
> as user with no password.
> If you are not interested in some topics (such as kakadu, ecw, mrsid) you
> can just skip those sections as well as the patch topic.
> Note that it is not a definitive guide so it may be slightly changed in
> the future (since I'm working on some maven procedures tunings).
>
> You will notice that building GDAL and JAVA bindings is not a really hard
> task.
> However, if you encounter some problems, I can build a basic GDAL (without
> external libraries) as well as Java bindings for you.
> I can start the building in background.
> Let me know.
>
> Best Regards,
> Daniele
>
>
> On Jan 29, 2008 10:51 PM, Armin Burger <armin.burger@gmx.net> wrote:
>
> > Hello everybody
> >
> > does anybody know if there is somewhere a compiled version (for Windows)
> > of GDAL including Java bindings available that could be used for
> > extracting basic information from various types of image formats
> > (extent, projection, bands, etc)? An older version like 1.3 would be
> > fully sufficient.
> >
> > Before just calling the gdalinfo executable and parsing the output with
> > Java I would like to be sure there are no other alternatives currently
> > available.
> >
> > Thanks for any help
> >
> > Armin
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> -------------------------------------------------------
> Eng. Daniele Romagnoli
> Software Engineer
>
> GeoSolutions S.A.S.
> Via Carignoni 51
> 55041 Camaiore (LU)
> Italy
>
> phone: +39 0584983027
> fax:     +39 0584983027
> mob:   +39 328 0559267
>
>
> http://www.geo-solutions.it
>
> -------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/ba7ccf09/attachment.html
From warmerdam at pobox.com  Wed Jan 30 15:57:40 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 30 15:58:05 2008
Subject: [gdal-dev] Select a geometry attribute from multiple geometry
	input?
In-Reply-To: <25bc040b0801301246m6e375c9dp62876be5a7bac7a1@mail.gmail.com>
References: <25bc040b0801291720n35cf9f46hc6bfe9ecd80a21f1@mail.gmail.com>
	<47A0AE3C.2060103@pobox.com>
	<25bc040b0801301246m6e375c9dp62876be5a7bac7a1@mail.gmail.com>
Message-ID: <47A0E4C4.8050406@pobox.com>

Stefan Keller wrote:
> Frank,
>  
> I can imagine that adding multiple geometries to OGR would touch some 
> core components.
>  
>  > The OGR data model assumes at most one geometry per feature.
>  
> I assumed that. My proposal rather would be, that users have at least a 
> choice which geometry the input driver takes. This would restrict the 
> solution to the input drivers (GML, Interlis 1, Interlis 2, others?). I 
> would simply add a (common) format specific option (e.g. -dsco 
> GeometryField=fieldname). What do you think?

Stefan,

-dsco (DataSource Creation Option) applies only when creating a datasource,
not when opening an existing datasource for read access.

In theory it could be supported via an environment/config variable, or
perhaps encoded into the datasource name in some funky way.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Jan 30 16:13:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 30 16:14:04 2008
Subject: [gdal-dev] GDAL Java bindings, compiled for Windows
In-Reply-To: <25bc040b0801301257t655d6aabof3f1c364c60b48df@mail.gmail.com>
References: <479F9FED.7040406@gmx.net>
	<7221db410801300119h6329f22p95696458d720ce1e@mail.gmail.com>
	<25bc040b0801301257t655d6aabof3f1c364c60b48df@mail.gmail.com>
Message-ID: <47A0E87E.6080007@pobox.com>

Stefan Keller wrote:
> Hi all,
>  
> There have been at least two threads in the last weeks about GDAL-Java 
> binding. And I assume that several people interested in Java are 
> listening on this mailing lists.
>  
> Question to the GDAL maintainers (Frank, Mateusz?): What about to 
> use the Wiki like http://trac.osgeo.org/gdal/wiki/GdalOgrInJava to share 
> experiences?

Stefan,

By all means, please do!  The Trac wiki is here so folks can help each other
in a persistent way.  Anyone who gets an OSGeo userid can add to the wiki
quite easily.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From tutey at o2.pl  Wed Jan 30 16:45:09 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Jan 30 16:46:29 2008
Subject: [gdal-dev] no man pages in GDAL 1.5 svn
Message-ID: <47A0EFE5.5050805@o2.pl>

Hi

Current GDAL 1.5 SVN build does not generate any man pages. Can anybody 
confirm or is this only me?

Maciek
From warmerdam at pobox.com  Wed Jan 30 17:21:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 30 17:21:43 2008
Subject: [gdal-dev] no man pages in GDAL 1.5 svn
In-Reply-To: <47A0EFE5.5050805@o2.pl>
References: <47A0EFE5.5050805@o2.pl>
Message-ID: <47A0F859.9030809@pobox.com>

Maciej Sieczka wrote:
> Hi
> 
> Current GDAL 1.5 SVN build does not generate any man pages. Can anybody 
> confirm or is this only me?

Maciek,

Previously a copy of the man pages lived in Subversion.  But recently it
was changed so that they are not, though they are distributed in source
tarballs.  If you want them from svn you need to do "make man".

It also appears that if you already have a man directory, nothing will happen
so you need to blow it away first.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mchapman at texelinc.com  Wed Jan 30 17:43:46 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed Jan 30 17:43:52 2008
Subject: [gdal-dev] MySQL TestCapability for CreateField
Message-ID: <002401c86391$92fef7d0$b8fce770$@com>

Howard,

 

In 1.5.0 the call to pMySQLLayer->TestCapability("CreateField") returns
FALSE, but when I try to create a field in MySQL it works fine.  Should that
capability be added to the MySQL driver?

 

Best regards,

 

Martin Chapman

Chief Software Architect

Fortified Datacom Inc.

http://www.fortifieddatacom.com

mchapman@fortifieddatacom.com

303-324-1065

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/2dcec4de/attachment-0001.html
From szekerest at gmail.com  Wed Jan 30 17:53:09 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan 30 17:53:13 2008
Subject: [gdal-dev] Motion: Adopt RFC 21: OGR SQL type cast and field name
	alias
Message-ID: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>

Folks,

I've created a minor change in RFC 21 for supporting the
date/time/timestamp type casts and
updated the proposed patch accordingly.

As having no further comments about this topic I would like to call
for a vote on RFC 21.

http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

+1 from me.

Best regards,

Tamas
From tutey at o2.pl  Wed Jan 30 18:12:34 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Jan 30 18:13:53 2008
Subject: [gdal-dev] no man pages in GDAL 1.5 svn
In-Reply-To: <47A0F859.9030809@pobox.com>
References: <47A0EFE5.5050805@o2.pl> <47A0F859.9030809@pobox.com>
Message-ID: <47A10462.5020102@o2.pl>

Frank Warmerdam pisze:
> Maciej Sieczka wrote:
>> Hi
>>
>> Current GDAL 1.5 SVN build does not generate any man pages. Can 
>> anybody confirm or is this only me?
> 
> Maciek,
> 
> Previously a copy of the man pages lived in Subversion.  But recently it
> was changed so that they are not, though they are distributed in source
> tarballs.  If you want them from svn you need to do "make man".

Thanks for the hint. It works. Unfortunately "make install" does not 
install them. Could it? I learned that there is "make install-man", but 
I'd rather do the whole installation in one step, so that checkinstall 
could create a single deb package out of it.

Maciek
From ealpert at digitalglobe.com  Wed Jan 30 19:06:23 2008
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Jan 30 19:06:27 2008
Subject: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23301BA0321@COMAIL01.digitalglobe.com>

 

Prior to 1.5 I'd been using the trunk version from 11/06/2007. Looking
at gdal_wrap.cpp I see that there were two versions checked in 1.3.31
and 1.3.30. One of these checks breaks a piece of code that worked fine
in version 1.3.29

 

The problem relates to clean up when an object is dereferenced in perl.

 

For many releases now if I created and wrote an image I would have to
Call FlushCache *and* undef the variable referencing the GDALdataset
inorder for all the data I wrote to actually end up in the file. This no
longer works. Now I must exit my perl script completely for the all the
data to be completely written.

 

Below is an example of converting to grayscale. This works great if at
the end I'm done. But this is not the case. Later in the script I call
gdal_rasterize and the resulting file ends up not having a geotransform
and is 3x too big. If I exit my app and call gdal_rasterize manually
everything works correctly. This is what led me to believe there's been
a change in the perl binding that relate to cleaning up and finalizing
the file that now doesn't execute on derference but only when the perl
script exits. 

 

On 11/06/2007 my code worked. Today with the stock 1.5 it doesn't. So my
question is there some function to call to force the file to be
completely written? If not is there a way to revert to the prior
functionality. . 

 

                $gtiff_driver = Geo::GDAL::GetDriverByName('GTiff');

                $fil = Geo::GDAL::Open("$tmp_dir/$$.tif");

                $xsize = $fil->{RasterXSize};

                $ysize = $fil->{RasterYSize};

 

                $tot = $xsize;

                $width = $xsize;

                $bandr = $fil->GetRasterBand(1);

                $bandg = $fil->GetRasterBand(2);

                $bandb = $fil->GetRasterBand(3);

                $output_ds= $gtiff_driver->Create("$tmp_dir/$$\_bw.tif",
$fil->{RasterXSize}, $fil->{RasterYSize}, 1,
$Geo::GDAL::Const::GDT_Byte);

                $output_ds->SetGeoTransform($fil->GetGeoTransform);

                $output_ds->SetProjection($fil->GetProjection);

                $b = $output_ds->GetRasterBand(1);

                for($k = 0; $k < $fil->{RasterYSize}; $k++) {

                        $scanliner =
$bandr->ReadRaster(0,$k,$fil->{RasterXSize},1);

                        $scanlineb =
$bandb->ReadRaster(0,$k,$fil->{RasterXSize},1);

                        $scanlineg =
$bandg->ReadRaster(0,$k,$fil->{RasterXSize},1);

                        @datar = unpack("C[$tot]",$scanliner);

                        @datag = unpack("C[$tot]",$scanlineg);

                        @datab = unpack("C[$tot]",$scanlineb);

 

                        @datagrey = ();

                        $min = 300;

                        $max = -1;

                        for ($i = 0; $i < scalar @datar; $i++) {

                                $t = (.3 * $datar[$i] + .59 * $datag[$i]
+  .11 * $datab[$i]) + .000001;

                                push @datagrey, int ($t+.5);

                        }

 

 

                        $ot = pack("c[$tot]",@datagrey);

                        $b->WriteRaster(0,$k,$width,1,$ot);

                }

                $output_ds->FlushCache;

                undef $output_ds;

 

 

later I call:

                system "gdal_rasterize -i -l $$ -b 1 -burn 0
$tmp_dir/$$.shp $tmp_dir/$$\_bw.tif ";

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/3af06015/attachment.html
From sfkeller at gmail.com  Wed Jan 30 19:11:26 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed Jan 30 19:11:28 2008
Subject: [gdal-dev] Select a geometry attribute from multiple geometry
	input?
In-Reply-To: <47A0E4C4.8050406@pobox.com>
References: <25bc040b0801291720n35cf9f46hc6bfe9ecd80a21f1@mail.gmail.com>
	<47A0AE3C.2060103@pobox.com>
	<25bc040b0801301246m6e375c9dp62876be5a7bac7a1@mail.gmail.com>
	<47A0E4C4.8050406@pobox.com>
Message-ID: <25bc040b0801301611i62583597ld3c1842c5e1fce4d@mail.gmail.com>

> -dsco (DataSource Creation Option) applies only when creating a
datasource,
Oh, sorry.
You say via an environment/config variable.
Why not also use "... -dsro GeometryField=fieldname" (dsro= DataSource
Reading Option)?
-- Stefan

2008/1/30, Frank Warmerdam <warmerdam@pobox.com>:
>
> Stefan Keller wrote:
> > Frank,
> >
> > I can imagine that adding multiple geometries to OGR would touch some
> > core components.
> >
> >  > The OGR data model assumes at most one geometry per feature.
> >
> > I assumed that. My proposal rather would be, that users have at least a
> > choice which geometry the input driver takes. This would restrict the
> > solution to the input drivers (GML, Interlis 1, Interlis 2, others?). I
> > would simply add a (common) format specific option (e.g. -dsco
> > GeometryField=fieldname). What do you think?
>
> Stefan,
>
> -dsco (DataSource Creation Option) applies only when creating a
> datasource,
> not when opening an existing datasource for read access.
>
> In theory it could be supported via an environment/config variable, or
> perhaps encoded into the datasource name in some funky way.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080131/5228bcf8/attachment-0001.html
From mchapman at texelinc.com  Wed Jan 30 19:26:26 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed Jan 30 19:26:35 2008
Subject: [gdal-dev] my_thread_global_end
Message-ID: <000001c8639f$eaebf020$c0c3d060$@com>

How do I get my_thread_global_end() to exit when using GDAL?

 

Martin Chapman

Chief Software Architect

Fortified Datacom Inc.

http://www.fortifieddatacom.com

mchapman@fortifieddatacom.com

303-324-1065

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080130/e0804f24/attachment.html
From ari.jolma at tkk.fi  Thu Jan 31 03:48:18 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Jan 31 03:48:20 2008
Subject: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23301BA0321@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301BA0321@COMAIL01.digitalglobe.com>
Message-ID: <47A18B52.7070707@tkk.fi>

Ethan,

This is because of something, which is a good thing. You (now in 1.5) 
get a reference to the dataset you create by getting its raster band. 
Geo::GDAL does not destroy the dataset while there is a reference to it. 
You either need to use the non-referencing version of GetRasterBand, 
which is _GetRasterBand or get rid of the reference by destroying the 
raster variable $b.

Best regards,

Ari

Ethan Alpert kirjoitti:
>
> Prior to 1.5 I?d been using the trunk version from 11/06/2007. Looking 
> at gdal_wrap.cpp I see that there were two versions checked in 1.3.31 
> and 1.3.30. One of these checks breaks a piece of code that worked 
> fine in version 1.3.29
>
> The problem relates to clean up when an object is dereferenced in perl.
>
> For many releases now if I created and wrote an image I would have to 
> Call FlushCache **and** undef the variable referencing the GDALdataset 
> inorder for all the data I wrote to actually end up in the file. This 
> no longer works. Now I must exit my perl script completely for the all 
> the data to be completely written.
>
> Below is an example of converting to grayscale. This works great if at 
> the end I?m done. But this is not the case. Later in the script I call 
> gdal_rasterize and the resulting file ends up not having a 
> geotransform and is 3x too big. If I exit my app and call 
> gdal_rasterize manually everything works correctly. This is what led 
> me to believe there?s been a change in the perl binding that relate to 
> cleaning up and finalizing the file that now doesn?t execute on 
> derference but only when the perl script exits.
>
> On 11/06/2007 my code worked. Today with the stock 1.5 it doesn?t. So 
> my question is there some function to call to force the file to be 
> completely written? If not is there a way to revert to the prior 
> functionality. .
>
> $gtiff_driver = Geo::GDAL::GetDriverByName('GTiff');
>
> $fil = Geo::GDAL::Open("$tmp_dir/$$.tif");
>
> $xsize = $fil->{RasterXSize};
>
> $ysize = $fil->{RasterYSize};
>
> $tot = $xsize;
>
> $width = $xsize;
>
> $bandr = $fil->GetRasterBand(1);
>
> $bandg = $fil->GetRasterBand(2);
>
> $bandb = $fil->GetRasterBand(3);
>
> $output_ds= $gtiff_driver->Create("$tmp_dir/$$\_bw.tif", 
> $fil->{RasterXSize}, $fil->{RasterYSize}, 1, $Geo::GDAL::Const::GDT_Byte);
>
> $output_ds->SetGeoTransform($fil->GetGeoTransform);
>
> $output_ds->SetProjection($fil->GetProjection);
>
> $b = $output_ds->GetRasterBand(1);
>
> for($k = 0; $k < $fil->{RasterYSize}; $k++) {
>
> $scanliner = $bandr->ReadRaster(0,$k,$fil->{RasterXSize},1);
>
> $scanlineb = $bandb->ReadRaster(0,$k,$fil->{RasterXSize},1);
>
> $scanlineg = $bandg->ReadRaster(0,$k,$fil->{RasterXSize},1);
>
> @datar = unpack("C[$tot]",$scanliner);
>
> @datag = unpack("C[$tot]",$scanlineg);
>
> @datab = unpack("C[$tot]",$scanlineb);
>
> @datagrey = ();
>
> $min = 300;
>
> $max = -1;
>
> for ($i = 0; $i < scalar @datar; $i++) {
>
> $t = (.3 * $datar[$i] + .59 * $datag[$i] + .11 * $datab[$i]) + .000001;
>
> push @datagrey, int ($t+.5);
>
> }
>
> $ot = pack("c[$tot]",@datagrey);
>
> $b->WriteRaster(0,$k,$width,1,$ot);
>
> }
>
> $output_ds->FlushCache;
>
> undef $output_ds;
>
> later I call:
>
> system "gdal_rasterize -i -l $$ -b 1 -burn 0 $tmp_dir/$$.shp 
> $tmp_dir/$$\_bw.tif ";
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From St.Mietke at gmx.de  Thu Jan 31 04:24:55 2008
From: St.Mietke at gmx.de (Stefan Mietke)
Date: Thu Jan 31 04:24:58 2008
Subject: [gdal-dev] GeoTIFF - missing Tag
Message-ID: <20080131092455.107850@gmx.net>

Hi List,

is there anybody who can tell me how to add Tags in a GeoTIFF file using gdal? All files I created with ArcMap seems not to be well-formed.

I receive following debug message:

Warning 1: TIFFReadDirectory:C:\Tomcat\temp\temp1889831732091.bin: invalid TIFF directory; tags are not sorted in ascending order
ERROR 1: MissingRequired:C:\Tomcat\temp\temp1889831732091.bin: TIFF directory is missing required "ImageLength" field

Kind regards,
Stefan Mietke
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
From dron at ak4719.spb.edu  Thu Jan 31 05:17:30 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Thu Jan 31 05:35:40 2008
Subject: [gdal-dev] VSIReadDir() and GDALOpenInfo
In-Reply-To: <47A0AD20.3070404@pobox.com>
References: <47A0AD20.3070404@pobox.com>
Message-ID: <20080131101729.GA7740@ak4719.spb.edu>

On Wed, Jan 30, 2008 at 12:00:16PM -0500, Frank Warmerdam wrote:
> But I'm wondering if there is a fundamentally better approach to
> scanning for the list of files in a directory, or if this is
> inherently quite an expensive operation.  Thoughts?  Other experiences
> on this?  Is this more of an issue with particular file systems?

Ulrich Drepper has some insights on the issue:

 http://udrepper.livejournal.com/18555.html

Based on his article I see few problems with our code:

 1. We are using readdir() instead of readdir64().
 2. We are not checking the file type: do we really need to add
    subdirectory names to the list?
 3. Directory entry names have a fixed length, so we can optimize a bit
    by removing CPLStrdup() call.

The only problem is that readdir64() could be not portable enougth, but
this is easy to fix using the same approach as with other *64() calls.

Other than above it seems to be nothing to optimize in our code.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From dron at ak4719.spb.edu  Thu Jan 31 05:21:28 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Thu Jan 31 05:35:42 2008
Subject: [gdal-dev] Motion: Adopt RFC 21: OGR SQL type cast and field name
	alias
In-Reply-To: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
References: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
Message-ID: <20080131102128.GB7740@ak4719.spb.edu>

On Wed, Jan 30, 2008 at 11:53:09PM +0100, Tamas Szekeres wrote:
> As having no further comments about this topic I would like to call
> for a vote on RFC 21.
> 
> http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

+0

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From ealpert at digitalglobe.com  Thu Jan 31 08:21:57 2008
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Thu Jan 31 08:22:01 2008
Subject: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings
In-Reply-To: <47A18B52.7070707@tkk.fi>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301BA0321@COMAIL01.digitalglobe.com>
	<47A18B52.7070707@tkk.fi>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23301BA034D@COMAIL01.digitalglobe.com>

Ari,

Thanks for the response. Both suggested approaches fix the problem. I
sort of see the utility of this approach however I still believe that a
FlushCache and dereferencing a dataset object should result in the
output file being closed and in a complete state. Since the rasterband
is associated with a dataset what is the usefulness of keeping the
dadtaset and it's rasterband after its dataset has been "closed"? If you
don't dereference the bands the resulting file is not just incomplete
but wrong. Extra data gets written into the tif and the georeferncing is
overwritten.

-e 



-----Original Message-----
From: Ari Jolma [mailto:ari.jolma@tkk.fi] 
Sent: Thursday, January 31, 2008 1:48 AM
To: Ethan Alpert
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings

Ethan,

This is because of something, which is a good thing. You (now in 1.5) 
get a reference to the dataset you create by getting its raster band. 
Geo::GDAL does not destroy the dataset while there is a reference to it.

You either need to use the non-referencing version of GetRasterBand, 
which is _GetRasterBand or get rid of the reference by destroying the 
raster variable $b.

Best regards,

Ari

Ethan Alpert kirjoitti:
>
> Prior to 1.5 I'd been using the trunk version from 11/06/2007. Looking

> at gdal_wrap.cpp I see that there were two versions checked in 1.3.31 
> and 1.3.30. One of these checks breaks a piece of code that worked 
> fine in version 1.3.29
>
> The problem relates to clean up when an object is dereferenced in
perl.
>
> For many releases now if I created and wrote an image I would have to 
> Call FlushCache **and** undef the variable referencing the GDALdataset

> inorder for all the data I wrote to actually end up in the file. This 
> no longer works. Now I must exit my perl script completely for the all

> the data to be completely written.
>
> Below is an example of converting to grayscale. This works great if at

> the end I'm done. But this is not the case. Later in the script I call

> gdal_rasterize and the resulting file ends up not having a 
> geotransform and is 3x too big. If I exit my app and call 
> gdal_rasterize manually everything works correctly. This is what led 
> me to believe there's been a change in the perl binding that relate to

> cleaning up and finalizing the file that now doesn't execute on 
> derference but only when the perl script exits.
>
> On 11/06/2007 my code worked. Today with the stock 1.5 it doesn't. So 
> my question is there some function to call to force the file to be 
> completely written? If not is there a way to revert to the prior 
> functionality. .
>
> $gtiff_driver = Geo::GDAL::GetDriverByName('GTiff');
>
> $fil = Geo::GDAL::Open("$tmp_dir/$$.tif");
>
> $xsize = $fil->{RasterXSize};
>
> $ysize = $fil->{RasterYSize};
>
> $tot = $xsize;
>
> $width = $xsize;
>
> $bandr = $fil->GetRasterBand(1);
>
> $bandg = $fil->GetRasterBand(2);
>
> $bandb = $fil->GetRasterBand(3);
>
> $output_ds= $gtiff_driver->Create("$tmp_dir/$$\_bw.tif", 
> $fil->{RasterXSize}, $fil->{RasterYSize}, 1,
$Geo::GDAL::Const::GDT_Byte);
>
> $output_ds->SetGeoTransform($fil->GetGeoTransform);
>
> $output_ds->SetProjection($fil->GetProjection);
>
> $b = $output_ds->GetRasterBand(1);
>
> for($k = 0; $k < $fil->{RasterYSize}; $k++) {
>
> $scanliner = $bandr->ReadRaster(0,$k,$fil->{RasterXSize},1);
>
> $scanlineb = $bandb->ReadRaster(0,$k,$fil->{RasterXSize},1);
>
> $scanlineg = $bandg->ReadRaster(0,$k,$fil->{RasterXSize},1);
>
> @datar = unpack("C[$tot]",$scanliner);
>
> @datag = unpack("C[$tot]",$scanlineg);
>
> @datab = unpack("C[$tot]",$scanlineb);
>
> @datagrey = ();
>
> $min = 300;
>
> $max = -1;
>
> for ($i = 0; $i < scalar @datar; $i++) {
>
> $t = (.3 * $datar[$i] + .59 * $datag[$i] + .11 * $datab[$i]) +
.000001;
>
> push @datagrey, int ($t+.5);
>
> }
>
> $ot = pack("c[$tot]",@datagrey);
>
> $b->WriteRaster(0,$k,$width,1,$ot);
>
> }
>
> $output_ds->FlushCache;
>
> undef $output_ds;
>
> later I call:
>
> system "gdal_rasterize -i -l $$ -b 1 -burn 0 $tmp_dir/$$.shp 
> $tmp_dir/$$\_bw.tif ";
>
>
------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Thu Jan 31 10:03:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 31 10:03:58 2008
Subject: [gdal-dev] Motion: Adopt RFC 21: OGR SQL type cast and field
	name alias
In-Reply-To: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
References: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
Message-ID: <47A1E346.2000103@pobox.com>

Tamas Szekeres wrote:
> Folks,
> 
> I've created a minor change in RFC 21 for supporting the
> date/time/timestamp type casts and
> updated the proposed patch accordingly.
> 
> As having no further comments about this topic I would like to call
> for a vote on RFC 21.
> 
> http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

+1

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Thu Jan 31 10:12:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 31 10:12:50 2008
Subject: [gdal-dev] VSIReadDir() and GDALOpenInfo
In-Reply-To: <20080131101729.GA7740@ak4719.spb.edu>
References: <47A0AD20.3070404@pobox.com> <20080131101729.GA7740@ak4719.spb.edu>
Message-ID: <47A1E55B.6080700@pobox.com>

Andrey Kiselev wrote:
> On Wed, Jan 30, 2008 at 12:00:16PM -0500, Frank Warmerdam wrote:
>> But I'm wondering if there is a fundamentally better approach to
>> scanning for the list of files in a directory, or if this is
>> inherently quite an expensive operation.  Thoughts?  Other experiences
>> on this?  Is this more of an issue with particular file systems?
> 
> Ulrich Drepper has some insights on the issue:
> 
>  http://udrepper.livejournal.com/18555.html
> 
> Based on his article I see few problems with our code:
> 
>  1. We are using readdir() instead of readdir64().

Andrey,

In the VSIReadDir() code we do not actually consult the file size so
I don't see any requirement to complicate things with the 64bit variant.

>  2. We are not checking the file type: do we really need to add
>     subdirectory names to the list?

Yes, the sibling list should contain all normal files, special files
and directories.

>  3. Directory entry names have a fixed length, so we can optimize a bit
>     by removing CPLStrdup() call.

Memory still needs to be dynamically allocated for the entry in the list
returned from ReadDir() so I don't see what you are getting at.

> Other than above it seems to be nothing to optimize in our code.

It was an informative article though I'm left with the same conclusion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Thu Jan 31 10:16:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 31 10:16:35 2008
Subject: [gdal-dev] GeoTIFF - missing Tag
In-Reply-To: <20080131092455.107850@gmx.net>
References: <20080131092455.107850@gmx.net>
Message-ID: <47A1E632.2010502@pobox.com>

Stefan Mietke wrote:
> Hi List,
> 
> is there anybody who can tell me how to add Tags in a GeoTIFF file using
> gdal? All files I created with ArcMap seems not to be well-formed.
> 
> I receive following debug message:
> 
> Warning 1: TIFFReadDirectory:C:\Tomcat\temp\temp1889831732091.bin: invalid
> TIFF directory; tags are not sorted in ascending order ERROR 1:
> MissingRequired:C:\Tomcat\temp\temp1889831732091.bin: TIFF directory is
> missing required "ImageLength" field

Stefan,

If a TIFF file is missing ImageLength it isn't much of an image file.  Could
you provide a smallish example of this directly to me by email and I'll see
if it is repairable in any way I know?

I don't believe GDAL will be helpful in this regard, but it might be doable
with libtiff (on which GDAL is built).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Thu Jan 31 10:31:14 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 31 10:31:41 2008
Subject: [gdal-dev] Select a geometry attribute from multiple geometry
	input?
In-Reply-To: <25bc040b0801301611i62583597ld3c1842c5e1fce4d@mail.gmail.com>
References: <25bc040b0801291720n35cf9f46hc6bfe9ecd80a21f1@mail.gmail.com>
	<47A0AE3C.2060103@pobox.com>
	<25bc040b0801301246m6e375c9dp62876be5a7bac7a1@mail.gmail.com>
	<47A0E4C4.8050406@pobox.com>
	<25bc040b0801301611i62583597ld3c1842c5e1fce4d@mail.gmail.com>
Message-ID: <47A1E9C2.5000800@pobox.com>

Stefan Keller wrote:
>  > -dsco (DataSource Creation Option) applies only when creating a 
> datasource,
> Oh, sorry.
> You say via an environment/config variable.
> Why not also use "... -dsro GeometryField=fieldname" (dsro= DataSource 
> Reading Option)?

Stefan,

Well, there is no such commandline switch.  And there is no mechanism to
pass such options to GDALOpen().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Thu Jan 31 10:38:59 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 31 10:39:30 2008
Subject: [gdal-dev] MySQL TestCapability for CreateField
In-Reply-To: <002401c86391$92fef7d0$b8fce770$@com>
References: <002401c86391$92fef7d0$b8fce770$@com>
Message-ID: <47A1EB93.7020903@pobox.com>

Martin Chapman wrote:
> Howard,
> 
>  
> 
> In 1.5.0 the call to pMySQLLayer->TestCapability("CreateField") returns 
> FALSE, but when I try to create a field in MySQL it works fine.  Should 
> that capability be added to the MySQL driver?

Martin,

I agree. I've created a ticket, and will fix it in trunk and 1.5 branch.

   http://trac.osgeo.org/gdal/ticket/2184

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dmorissette at mapgears.com  Thu Jan 31 10:55:54 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Jan 31 10:55:56 2008
Subject: [gdal-dev] Motion: Adopt RFC 21: OGR SQL type cast and field
	name	alias
In-Reply-To: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
References: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
Message-ID: <47A1EF8A.1040901@mapgears.com>

Tamas Szekeres wrote:
> 
> As having no further comments about this topic I would like to call
> for a vote on RFC 21.
> 
> http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From hobu.inc at gmail.com  Thu Jan 31 10:55:40 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Jan 31 10:58:47 2008
Subject: [gdal-dev] Motion: Adopt RFC 21: OGR SQL type cast and field
	name	alias
In-Reply-To: <47A1EF8A.1040901@mapgears.com>
References: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
	<47A1EF8A.1040901@mapgears.com>
Message-ID: <D5F70A22-11C7-4E35-B043-C48440EE1D02@gmail.com>



> Tamas Szekeres wrote:
>> As having no further comments about this topic I would like to call
>> for a vote on RFC 21.
>> http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast
>

+1

From ari.jolma at tkk.fi  Thu Jan 31 12:27:23 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Jan 31 12:26:44 2008
Subject: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23301BA034D@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301BA0321@COMAIL01.digitalglobe.com>
	<47A18B52.7070707@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB23301BA034D@COMAIL01.digitalglobe.com>
Message-ID: <47A204FB.9030605@tkk.fi>

Ethan Alpert kirjoitti:
> Ari,
>
> Thanks for the response. Both suggested approaches fix the problem. I
> sort of see the utility of this approach however I still believe that a
> FlushCache and dereferencing a dataset object should result in the
> output file being closed and in a complete state. Since the rasterband
> is associated with a dataset what is the usefulness of keeping the
> dadtaset and it's rasterband after its dataset has been "closed"? If you
> don't dereference the bands the resulting file is not just incomplete
> but wrong. Extra data gets written into the tif and the georeferncing is
> overwritten.
>   

The main idea is to prevent segfaults. If a reference to a closed 
dataset is allowed to exist, using it would cause a segfault. Yes, I see 
that ideally it should just make the rasterband object stale underneath 
the user code. However, I don't know how to achieve that efficiently or 
without modifying GDAL itself.

Hm, the first would require maintaining a list of valid rasterband 
objects and at the beginning of each rasterband method the object should 
be tested for validity. Probably not very efficient.

Ari

> -e 
>
>
>
> -----Original Message-----
> From: Ari Jolma [mailto:ari.jolma@tkk.fi] 
> Sent: Thursday, January 31, 2008 1:48 AM
> To: Ethan Alpert
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings
>
> Ethan,
>
> This is because of something, which is a good thing. You (now in 1.5) 
> get a reference to the dataset you create by getting its raster band. 
> Geo::GDAL does not destroy the dataset while there is a reference to it.
>
> You either need to use the non-referencing version of GetRasterBand, 
> which is _GetRasterBand or get rid of the reference by destroying the 
> raster variable $b.
>
> Best regards,
>
> Ari
>
> Ethan Alpert kirjoitti:
>   
>> Prior to 1.5 I'd been using the trunk version from 11/06/2007. Looking
>>     
>
>   
>> at gdal_wrap.cpp I see that there were two versions checked in 1.3.31 
>> and 1.3.30. One of these checks breaks a piece of code that worked 
>> fine in version 1.3.29
>>
>> The problem relates to clean up when an object is dereferenced in
>>     
> perl.
>   
>> For many releases now if I created and wrote an image I would have to 
>> Call FlushCache **and** undef the variable referencing the GDALdataset
>>     
>
>   
>> inorder for all the data I wrote to actually end up in the file. This 
>> no longer works. Now I must exit my perl script completely for the all
>>     
>
>   
>> the data to be completely written.
>>
>> Below is an example of converting to grayscale. This works great if at
>>     
>
>   
>> the end I'm done. But this is not the case. Later in the script I call
>>     
>
>   
>> gdal_rasterize and the resulting file ends up not having a 
>> geotransform and is 3x too big. If I exit my app and call 
>> gdal_rasterize manually everything works correctly. This is what led 
>> me to believe there's been a change in the perl binding that relate to
>>     
>
>   
>> cleaning up and finalizing the file that now doesn't execute on 
>> derference but only when the perl script exits.
>>
>> On 11/06/2007 my code worked. Today with the stock 1.5 it doesn't. So 
>> my question is there some function to call to force the file to be 
>> completely written? If not is there a way to revert to the prior 
>> functionality. .
>>
>> $gtiff_driver = Geo::GDAL::GetDriverByName('GTiff');
>>
>> $fil = Geo::GDAL::Open("$tmp_dir/$$.tif");
>>
>> $xsize = $fil->{RasterXSize};
>>
>> $ysize = $fil->{RasterYSize};
>>
>> $tot = $xsize;
>>
>> $width = $xsize;
>>
>> $bandr = $fil->GetRasterBand(1);
>>
>> $bandg = $fil->GetRasterBand(2);
>>
>> $bandb = $fil->GetRasterBand(3);
>>
>> $output_ds= $gtiff_driver->Create("$tmp_dir/$$\_bw.tif", 
>> $fil->{RasterXSize}, $fil->{RasterYSize}, 1,
>>     
> $Geo::GDAL::Const::GDT_Byte);
>   
>> $output_ds->SetGeoTransform($fil->GetGeoTransform);
>>
>> $output_ds->SetProjection($fil->GetProjection);
>>
>> $b = $output_ds->GetRasterBand(1);
>>
>> for($k = 0; $k < $fil->{RasterYSize}; $k++) {
>>
>> $scanliner = $bandr->ReadRaster(0,$k,$fil->{RasterXSize},1);
>>
>> $scanlineb = $bandb->ReadRaster(0,$k,$fil->{RasterXSize},1);
>>
>> $scanlineg = $bandg->ReadRaster(0,$k,$fil->{RasterXSize},1);
>>
>> @datar = unpack("C[$tot]",$scanliner);
>>
>> @datag = unpack("C[$tot]",$scanlineg);
>>
>> @datab = unpack("C[$tot]",$scanlineb);
>>
>> @datagrey = ();
>>
>> $min = 300;
>>
>> $max = -1;
>>
>> for ($i = 0; $i < scalar @datar; $i++) {
>>
>> $t = (.3 * $datar[$i] + .59 * $datag[$i] + .11 * $datab[$i]) +
>>     
> .000001;
>   
>> push @datagrey, int ($t+.5);
>>
>> }
>>
>> $ot = pack("c[$tot]",@datagrey);
>>
>> $b->WriteRaster(0,$k,$width,1,$ot);
>>
>> }
>>
>> $output_ds->FlushCache;
>>
>> undef $output_ds;
>>
>> later I call:
>>
>> system "gdal_rasterize -i -l $$ -b 1 -burn 0 $tmp_dir/$$.shp 
>> $tmp_dir/$$\_bw.tif ";
>>
>>
>>     
> ------------------------------------------------------------------------
>   
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     
>
>
>   


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From jasonbeverage at gmail.com  Thu Jan 31 13:47:25 2008
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Thu Jan 31 13:47:31 2008
Subject: [gdal-dev] Strong Naming of C# Wrappers
Message-ID: <2c4bbbeb0801311047j202f4869p39e7428b9deca4cc@mail.gmail.com>

Hi all,

I've been using the C# wrappers that come with FWTools, and I noticed that
they are not strongly named.  This is causing a problem for my project as we
require everything to be strongly named.

I noticed that the makefile.vc has a "sign" step that generates the
gdal.snkfile, but it is not used after that.

If you change the gdal_csharp target to include the /keyfile argument, it
should produce strongly named assemblies:
$(CSC) /debug:full /keyfile:gdal.snk /target:library /out:ogr_csharp.dll
ogr\*.cs
$(CSC) /debug:full /keyfile:gdal.snk /target:library /out:gdal_csharp.dll
gdal\*.cs
$(CSC) /debug:full /keyfile:gdal.snk /target:library
/out:gdalconst_csharp.dll const\*.cs
$(CSC) /debug:full /keyfile:gdal.snk /target:library /out:osr_csharp.dll
osr\*.cs

It would be great if the bindings that come from the FWTools distro become
the "official" way to download the binaries and they are signed when we get
them.

Thanks!

Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080131/15e9f6e8/attachment.html
From tutey at o2.pl  Thu Jan 31 14:58:20 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Thu Jan 31 14:59:42 2008
Subject: [gdal-dev] no man pages in GDAL 1.5 svn
In-Reply-To: <47A1EA2E.5030503@pobox.com>
References: <47A0EFE5.5050805@o2.pl> <47A0F859.9030809@pobox.com>
	<47A10462.5020102@o2.pl> <47A1EA2E.5030503@pobox.com>
Message-ID: <47A2285C.8000909@o2.pl>

Frank Warmerdam pisze:

> How about "make install install-man"

I didn't know I can do both at the same time. Thanks, this way it works now:

$ make
$ make man
# checkinstall [options] make install install-man

Best!
Maciek
From szekerest at gmail.com  Thu Jan 31 15:03:59 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan 31 15:04:11 2008
Subject: [gdal-dev] Strong Naming of C# Wrappers
In-Reply-To: <2c4bbbeb0801311047j202f4869p39e7428b9deca4cc@mail.gmail.com>
References: <2c4bbbeb0801311047j202f4869p39e7428b9deca4cc@mail.gmail.com>
Message-ID: <f3b73b7d0801311203p485d1c6boe115d0cb700198c5@mail.gmail.com>

Jason,

Please file a ticket for this issue, I'll take care of this.
The /keyfile compiler option is quite VS2005 specific, however I think
we have alternative options to achieve the same results which is
compiler neutral.

Best regards,

Tamas




2008/1/31, Jason Beverage <jasonbeverage@gmail.com>:
> Hi all,
>
> I've been using the C# wrappers that come with FWTools, and I noticed that
> they are not strongly named.  This is causing a problem for my project as we
> require everything to be strongly named.
>
> I noticed that the makefile.vc has a "sign" step that generates the gdal.snk
> file, but it is not used after that.
>
> If you change the gdal_csharp target to include the /keyfile argument, it
> should produce strongly named assemblies:
> $(CSC) /debug:full /keyfile:gdal.snk /target:library /out:ogr_csharp.dll
> ogr\*.cs
> $(CSC) /debug:full /keyfile:gdal.snk /target:library /out:gdal_csharp.dll
> gdal\*.cs
>  $(CSC) /debug:full /keyfile:gdal.snk /target:library
> /out:gdalconst_csharp.dll const\*.cs
> $(CSC) /debug:full /keyfile:gdal.snk /target:library /out:osr_csharp.dll
> osr\*.cs
>
> It would be great if the bindings that come from the FWTools distro become
> the "official" way to download the binaries and they are signed when we get
> them.
>
> Thanks!
>
> Jason
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Thu Jan 31 15:57:08 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 31 15:57:13 2008
Subject: [gdal-dev] Motion: Adopt RFC 21: OGR SQL type cast and field name
	alias
In-Reply-To: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
References: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
Message-ID: <200801312157.09184.even.rouault@mines-paris.org>

+1

Le Wednesday 30 January 2008 23:53:09 Tamas Szekeres, vous avez ?crit?:
> Folks,
>
> I've created a minor change in RFC 21 for supporting the
> date/time/timestamp type casts and
> updated the proposed patch accordingly.
>
> As having no further comments about this topic I would like to call
> for a vote on RFC 21.
>
> http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast
>
> +1 from me.
>
> Best regards,
>
> Tamas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Thu Jan 31 18:43:24 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan 31 18:43:28 2008
Subject: [gdal-dev] Strong Naming of C# Wrappers
In-Reply-To: <2c4bbbeb0801311336g25a0cff9l97ce9e23b3d450dc@mail.gmail.com>
References: <2c4bbbeb0801311047j202f4869p39e7428b9deca4cc@mail.gmail.com>
	<f3b73b7d0801311203p485d1c6boe115d0cb700198c5@mail.gmail.com>
	<2c4bbbeb0801311336g25a0cff9l97ce9e23b3d450dc@mail.gmail.com>
Message-ID: <f3b73b7d0801311543h52a6014au51d1abd56747e858@mail.gmail.com>

Added the strong name support in SVN trunk r13646
We are using a fixed keyfile that won't change among the releases.
gdal.snk have also been added to the repository.
The keyfile is referenced by AssemblyInfo.cs that might be deprecated
by the further Visual Studio releases. However this is the only way to
support the strongnames for all of the platforms right now.

Best regards,

Tamas

2008/1/31, Jason Beverage <jasonbeverage@gmail.com>:
> Thanks Tamas.  It's so much nicer to just be able to download a working
> binary than having to compile and configure everything yourself.
>
> Thanks!
>
> Jason
>
>
> On Jan 31, 2008 3:03 PM, Tamas Szekeres <szekerest@gmail.com> wrote:
>
> > Jason,
> >
> > Please file a ticket for this issue, I'll take care of this.
> > The /keyfile compiler option is quite VS2005 specific, however I think
> > we have alternative options to achieve the same results which is
> > compiler neutral.
> >
> > Best regards,
> >
> > Tamas
> >
> >
> >
> >
> > 2008/1/31, Jason Beverage <jasonbeverage@gmail.com>:
> >
> >
> >
> > > Hi all,
> > >
> > > I've been using the C# wrappers that come with FWTools, and I noticed
> that
> > > they are not strongly named.  This is causing a problem for my project
> as we
> > > require everything to be strongly named.
> > >
> > > I noticed that the makefile.vc has a "sign" step that generates the
> gdal.snk
> > > file, but it is not used after that.
> > >
> > > If you change the gdal_csharp target to include the /keyfile argument,
> it
> > > should produce strongly named assemblies:
> > > $(CSC) /debug:full /keyfile:gdal.snk /target:library /out:ogr_csharp.dll
> > > ogr\*.cs
> > > $(CSC) /debug:full /keyfile:gdal.snk /target:library
> /out:gdal_csharp.dll
> > > gdal\*.cs
> > >  $(CSC) /debug:full /keyfile:gdal.snk /target:library
> > > /out:gdalconst_csharp.dll const\*.cs
> > > $(CSC) /debug:full /keyfile:gdal.snk /target:library /out:osr_csharp.dll
> > > osr\*.cs
> > >
> > > It would be great if the bindings that come from the FWTools distro
> become
> > > the "official" way to download the binaries and they are signed when we
> get
> > > them.
> > >
> > > Thanks!
> > >
> > > Jason
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
>
>
