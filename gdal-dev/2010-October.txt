From jukka.rahkonen at mmmtike.fi  Fri Oct  1 01:03:59 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Oct  1 01:04:09 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
References: <i81e9e$4dc$1@dough.gmane.org>
	<201009301850.49816.even.rouault@mines-paris.org>
	<4CA4C5E0.7060004@gmx.eu>
Message-ID: <loom.20101001T070009-148@post.gmane.org>

Hermann Peifer <peifer <at> gmx.eu> writes:


> At work, we are taking this "standard grid" issue pretty serious, but 
> indeed, we might be the only ones worldwide with such a business rule.

You are not alone, we are reprojecting our rasters to standard grid because it
helps in making seamless mosaics from the reprojected images. We are widening
the target extents a little bit to all directions with a python script to suit
the grid.

-Jukka Rahkonen-


From peifer at gmx.eu  Fri Oct  1 09:20:14 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Oct  1 09:21:26 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <loom.20101001T070009-148@post.gmane.org>
References: <i81e9e$4dc$1@dough.gmane.org>	<201009301850.49816.even.rouault@mines-paris.org>	<4CA4C5E0.7060004@gmx.eu>
	<loom.20101001T070009-148@post.gmane.org>
Message-ID: <4CA5E00E.7010409@gmx.eu>

On 01/10/2010 07:03, Jukka Rahkonen wrote:
> Hermann Peifer<peifer<at>  gmx.eu>  writes:
>
>
>> At work, we are taking this "standard grid" issue pretty serious, but
>> indeed, we might be the only ones worldwide with such a business rule.
>
> You are not alone, we are reprojecting our rasters to standard grid because it
> helps in making seamless mosaics from the reprojected images. We are widening
> the target extents a little bit to all directions with a python script to suit
> the grid.
>

So we are already 2 ;-)

Actually, I tentatively thought there would be more. This was why I 
wrote to the mailing list in the first place. I am aware that this 
(non-)issue can be solved in a shell one-liner or perhaps X lines of 
some other script code. I just thought that if there is a general 
interest, it could perhaps be built into the library.

Hermann
From szekerest at gmail.com  Fri Oct  1 09:35:03 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Oct  1 09:35:06 2010
Subject: [gdal-dev] OGR SQL for insert/update/delete operations
Message-ID: <AANLkTi=xpT5iGqSVCyZGmgqhL7DgQ7=idEPFTwh7=YNG@mail.gmail.com>

Hi All,

Do we have any plan to extend OGR SQL for insert/update/delete operations?
Would this idea be reasonable to implement?
I would think something about mapping those commands to the corresponding
CreateFeature/SetFeature/DeleteFeature methods of the OGR layers.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101001/089fa25f/attachment.html
From warmerdam at pobox.com  Fri Oct  1 09:44:48 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct  1 09:50:05 2010
Subject: [gdal-dev] OGR SQL for insert/update/delete operations
In-Reply-To: <AANLkTi=xpT5iGqSVCyZGmgqhL7DgQ7=idEPFTwh7=YNG@mail.gmail.com>
References: <AANLkTi=xpT5iGqSVCyZGmgqhL7DgQ7=idEPFTwh7=YNG@mail.gmail.com>
Message-ID: <4CA5E5D0.2060902@pobox.com>

Tamas Szekeres wrote:
> Hi All,
> 
> Do we have any plan to extend OGR SQL for insert/update/delete 
> operations? Would this idea be reasonable to implement?
> I would think something about mapping those commands to the 
> corresponding CreateFeature/SetFeature/DeleteFeature methods of the OGR 
> layers.

Tamas,

I have no plans to do so.  I'm not sure how valuable such operations
would be though I suppose it would be nice to easily express update or
delete operations that apply according to some WHERE clause.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Doug_Newcomb at fws.gov  Fri Oct  1 10:02:14 2010
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Fri Oct  1 10:10:15 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CA5E00E.7010409@gmx.eu>
Message-ID: <OFACCF1CA7.EA18B3E8-ON852577AF.004A8252-852577AF.004D1C75@fws.gov>

I probably do it the hard way.  The USDA flies summer color imagery in 
North Carolina every couple of years for crop verification.  They will put 
draft versions of the imagery up in single image per county mosaics in 
MrSid format for download about 6-8 months before they make the final 
quarter quadragle geotiffs available.  The single county mosaics are in 
UTM projection.  In NC, we like utm zones so much, we have three of them. 
Since I prefer to work with a seamless image layer in the same projection 
(North Carolina State Plane) and quarter quad format, I:

1) Use nearblack on the county MrSid images and output to Imagine format.
2) Reproject the county Imagine images to NC State Plane projection
3) use gdaltindex to create a shapefile index (1) from an older statewide 
image layer with image overlap in North Carolina State Plane projection.
4) use gdaltindex to make a shapefile index (2) of the reprojected county 
Imagine format image files.
4) Run a python script which grabs the corner coordinates  of each polygon 
from shapefile index 1 and use that to create a list of  Imagine images 
that overlap with the polygon by comparing it to index 2.  This script 
then recursively "cookie cuts" the section of each Imagine image that 
falls within the polygon and creates a tiff file , using gdaltranslate. 
After all of the "cookie cutting" has been done, the script merges all of 
the tiff files into one tiff file using gdalwarp.

For most of this, I cheat by using python to pass os.system commands to 
use the utility binaries. 

I made up a powerpoint presentation on this a couple of years ago at an 
internal national meeting, is there a suitable wiki to upload  it to  ( 
after getting release permission and conversion to Openoffice impress 
format)?

Doug
 


Doug Newcomb 
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the 
official policy of the U.S.Fish and Wildlife Service or Dept. of the 
Interior.   Life is too short for undocumented, proprietary data formats.



Hermann Peifer <peifer@gmx.eu> 
Sent by: gdal-dev-bounces@lists.osgeo.org
10/01/2010 09:21 AM

To
Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>
cc
gdal-dev@lists.osgeo.org
Subject
[gdal-dev] Re: gdal_rasterize -tr and -te






On 01/10/2010 07:03, Jukka Rahkonen wrote:
> Hermann Peifer<peifer<at>  gmx.eu>  writes:
>
>
>> At work, we are taking this "standard grid" issue pretty serious, but
>> indeed, we might be the only ones worldwide with such a business rule.
>
> You are not alone, we are reprojecting our rasters to standard grid 
because it
> helps in making seamless mosaics from the reprojected images. We are 
widening
> the target extents a little bit to all directions with a python script 
to suit
> the grid.
>

So we are already 2 ;-)

Actually, I tentatively thought there would be more. This was why I 
wrote to the mailing list in the first place. I am aware that this 
(non-)issue can be solved in a shell one-liner or perhaps X lines of 
some other script code. I just thought that if there is a general 
interest, it could perhaps be built into the library.

Hermann
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101001/55ff244b/attachment-0001.html
From szekerest at gmail.com  Fri Oct  1 10:23:22 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Oct  1 10:23:24 2010
Subject: [gdal-dev] OGR SQL for insert/update/delete operations
In-Reply-To: <4CA5E5D0.2060902@pobox.com>
References: <AANLkTi=xpT5iGqSVCyZGmgqhL7DgQ7=idEPFTwh7=YNG@mail.gmail.com>
	<4CA5E5D0.2060902@pobox.com>
Message-ID: <AANLkTinnT73vGAU8jVE=pX5-Fjp50Z8BhvRNSMwamQ6P@mail.gmail.com>

2010/10/1 Frank Warmerdam <warmerdam@pobox.com>

> I have no plans to do so.  I'm not sure how valuable such operations
> would be though I suppose it would be nice to easily express update or
> delete operations that apply according to some WHERE clause.
>
>
Frank,

Do we have an alternative way to modify the attributes for a subset of the
features (ie in a shapefile) by using an OGR commandline tool?

I guess we only expect CreateFeature to be implemented by a driver which is
advertised to support reading and writing. Having no valuable
SetFeature/DeleteFeature implementations out there will make this
requirement difficult to realize at all.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101001/5c597f0b/attachment.html
From JAMES.E.HOPPER at saic.com  Fri Oct  1 12:15:51 2010
From: JAMES.E.HOPPER at saic.com (jim hopper)
Date: Fri Oct  1 12:30:48 2010
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 77, Issue 2
In-Reply-To: <20101001160015.09C18E020F5@lists.osgeo.org>
Message-ID: <C8CB8177.1CD82%james.e.hopper@saic.com>




On 10/1/10 12:00 PM, "gdal-dev-request@lists.osgeo.org"
<gdal-dev-request@lists.osgeo.org> wrote:

> Send gdal-dev mailing list submissions to
> gdal-dev@lists.osgeo.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> or, via email, send a message with subject or body 'help' to
> gdal-dev-request@lists.osgeo.org
> 
> You can reach the person managing the list at
> gdal-dev-owner@lists.osgeo.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of gdal-dev digest..."
> 
> 
> Today's Topics:
> 
>    1. Re: OGR SQL for insert/update/delete operations (Tamas Szekeres)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Fri, 1 Oct 2010 16:23:22 +0200
> From: Tamas Szekeres <szekerest@gmail.com>
> Subject: Re: [gdal-dev] OGR SQL for insert/update/delete operations
> To: Frank Warmerdam <warmerdam@pobox.com>
> Cc: gdal-dev <gdal-dev@lists.osgeo.org>
> Message-ID:
> <AANLkTinnT73vGAU8jVE=pX5-Fjp50Z8BhvRNSMwamQ6P@mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
> 
> 2010/10/1 Frank Warmerdam <warmerdam@pobox.com>
> 
>> I have no plans to do so.  I'm not sure how valuable such operations
>> would be though I suppose it would be nice to easily express update or
>> delete operations that apply according to some WHERE clause.
>> 
>> 
> Frank,
> 
> Do we have an alternative way to modify the attributes for a subset of the
> features (ie in a shapefile) by using an OGR commandline tool?
> 
> I guess we only expect CreateFeature to be implemented by a driver which is
> advertised to support reading and writing. Having no valuable
> SetFeature/DeleteFeature implementations out there will make this
> requirement difficult to realize at all.
> 
> 
> Best regards,
> 
> Tamas
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: 
> http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101001/5c597f0b/attach
> ment-0001.html
> 
> ------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> End of gdal-dev Digest, Vol 77, Issue 2
> ***************************************

From kmayall at gmail.com  Fri Oct  1 16:07:26 2010
From: kmayall at gmail.com (keith)
Date: Fri Oct  1 16:07:28 2010
Subject: [gdal-dev] calling gdalinfo from python
Message-ID: <1285963646417-5592721.post@n2.nabble.com>


I'm just learning python and have imported gdalinfo.py, but I'm not sure how
to call it.
Is it gdalinfo.main('myimage.img')
It's just giving me back the usage. The image file exists in the current
working directory.

Thanks for any help! Using Python 2.6.

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/calling-gdalinfo-from-python-tp5592721p5592721.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Oct  1 16:16:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct  1 16:16:54 2010
Subject: [gdal-dev] calling gdalinfo from python
In-Reply-To: <1285963646417-5592721.post@n2.nabble.com>
References: <1285963646417-5592721.post@n2.nabble.com>
Message-ID: <201010012216.58210.even.rouault@mines-paris.org>

Le vendredi 01 octobre 2010 22:07:26, keith a ?crit :
> I'm just learning python and have imported gdalinfo.py, but I'm not sure
> how to call it.
> Is it gdalinfo.main('myimage.img')
> It's just giving me back the usage. The image file exists in the current
> working directory.
> 
> Thanks for any help! Using Python 2.6.

Try gdalinfo.main(['foo', 'myimage.img'])

The 'foo' is in fact gdalinfo.py when called from the command line, like 
python gdalinfo.py myimage.img
From kmayall at gmail.com  Fri Oct  1 16:35:15 2010
From: kmayall at gmail.com (keith)
Date: Fri Oct  1 16:35:18 2010
Subject: [gdal-dev] Re: calling gdalinfo from python
In-Reply-To: <201010012216.58210.even.rouault@mines-paris.org>
References: <1285963646417-5592721.post@n2.nabble.com>
	<201010012216.58210.even.rouault@mines-paris.org>
Message-ID: <1285965315951-5592796.post@n2.nabble.com>


Thanks Even! 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/calling-gdalinfo-from-python-tp5592721p5592796.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Sat Oct  2 07:54:58 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Oct  2 07:55:01 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <AANLkTi=vH4n5LMiH5J31BVQ1XhSrvhkfiK9B-S5-EQ=e@mail.gmail.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
	<AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>
	<4CA35023.2060007@mapgears.com>
	<AANLkTi=7NzxMx9YtR5V4pmdpRxyhrCr-+fBut_2siVYY@mail.gmail.com>
	<4CA48614.10209@mapgears.com>
	<AANLkTi=vH4n5LMiH5J31BVQ1XhSrvhkfiK9B-S5-EQ=e@mail.gmail.com>
Message-ID: <AANLkTimjUVEK671E9Xq24tvPDrK+fQ=1ai=7=aApAJ_d@mail.gmail.com>

Hi,

I think the problem is with the call to stat() on the samba mounted files.
tab2tab reported the same problem.

On Thu, Sep 30, 2010 at 7:10 PM, Sebastian E. Ovide <
sebastian.ovide@gmail.com> wrote:

> done... didn't work...
>
> Copied on the same SMB folder with undercase names... both ogrinfo and
> tab2tab failed.
> Copied the same files to a local folder and both ogrinfo and tab2tab
> succeeded...
>
> same errors....
>
>
> On Thu, Sep 30, 2010 at 1:44 PM, Daniel Morissette <
> dmorissette@mapgears.com> wrote:
>
>> Sebastian E. Ovide wrote:
>> >
>> > can verbosity be increased further ?
>> >
>>
>> I don't think so... the only way to know more about what is happening
>> would be to run this in gdb.
>>
>>
>> > and with TAB2TAB the only messages that I get are:
>> >
>> > gis@mapserver:/tmp$ /home/gis/src/mitab-1.7.0/mitab/tab2tab
>> > /home/gis/data/tmp/CA_AbandonedMine.TAB test.TAB
>> > ERROR 3: stat() failed for /home/gis/data/tmp/CA_AbandonedMine.id
>> >
>> > ERROR 3: Open() failed for /home/gis/data/tmp/CA_AbandonedMine.map
>> > ERROR 3: /home/gis/data/tmp/CA_AbandonedMine.TAB could not be opened as
>> > a MapInfo dataset.
>> > Failed to open /home/gis/data/tmp/CA_AbandonedMine.TAB
>> >
>>
>> This looks like an uppercase vs lowercase file extension problem. There
>> is some logic in MITAB to try to guess and then adjust filename
>> extensions (e.g. .MAP vs .map) on non-Windows systems that uses stat()
>> and for some reason it seems to fail with the SMB share.
>>
>> Can you please try renaming all files for a given table to lowercase
>> extensions (.tab, .map, .dat, .ind, .id) and then see if that changes
>> anything with the tab2tab program on the SMB share?
>>
>> If that solves the issue then we'll need to reproduce this here and run
>> this in gdb to figure the exact source of the problem and fix it.
>>
>> Daniel
>> --
>> Daniel Morissette
>> http://www.mapgears.com/
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Sebastian E. Ovide
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101002/b171731b/attachment.html
From saqib.jamil88 at gmail.com  Sun Oct  3 10:57:28 2010
From: saqib.jamil88 at gmail.com (Saqib Jamil)
Date: Sun Oct  3 10:57:30 2010
Subject: [gdal-dev] Conversion from well-known binary to GeoJSON
Message-ID: <AANLkTi=wt0KvaGbadKQdtC1Bw0YTDoXhVn3U8=FZ6ymd@mail.gmail.com>

Hey,

I need to convert a well-known binary object to a GeoJSON object for my
project in Ingres. Is that supported in the OGR library?

I checked this link and it says that creation of a GeoJSON object is not
possible, but I'm still not sure if this is what is implied here :
http://www.gdal.org/ogr/ogr_formats.html

I would really appreciate a reply. Thanks alot for your help.

Saqib Jamil
UWID: 20253760
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101003/5a8d809e/attachment.html
From warmerdam at pobox.com  Sun Oct  3 11:27:25 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Oct  3 11:32:42 2010
Subject: [gdal-dev] Conversion from well-known binary to GeoJSON
In-Reply-To: <AANLkTi=wt0KvaGbadKQdtC1Bw0YTDoXhVn3U8=FZ6ymd@mail.gmail.com>
References: <AANLkTi=wt0KvaGbadKQdtC1Bw0YTDoXhVn3U8=FZ6ymd@mail.gmail.com>
Message-ID: <4CA8A0DD.2080903@pobox.com>

Saqib Jamil wrote:
> Hey,
> 
> I need to convert a well-known binary object to a GeoJSON object for my 
> project in Ingres. Is that supported in the OGR library?
> 
> I checked this link and it says that creation of a GeoJSON object is not 
> possible, but I'm still not sure if this is what is implied here : 
> http://www.gdal.org/ogr/ogr_formats.html
> 
> I would really appreciate a reply. Thanks alot for your help.

Saqib,

It appears the documentation is out of date, and the GeoJSON driver does
support file creation.  I have updated the documentation accordingly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ghislain.picard at lgge.obs.ujf-grenoble.fr  Mon Oct  4 03:16:51 2010
From: ghislain.picard at lgge.obs.ujf-grenoble.fr (Ghislain Picard)
Date: Mon Oct  4 03:53:28 2010
Subject: [gdal-dev] gdalwrap and crossing 180W/180E
Message-ID: <4CA97F63.5030900@lgge.obs.ujf-grenoble.fr>

  Hi all,
I'm using gdal 1.7.2 and still have the problem of reprojection with 
data crossing 180W/180E.

The data are in lat-long from:
http://www.naturalearthdata.com/downloads/50m-raster-data/50m-shaded-relief/

The image is then cropped as follow:

gdal_merge.py -ul_lr
-180.0 -50.0 180.0 -90.0 -of GTiff -o SR_50_crop.tif SR_50M.tif


and projected in polar stereographic as follow:

gdalwarp -s_srs EPSG:4326
-t_srs EPSG:3031 -of GTiff SR_50M_crop.tif SR_50_stereo.tif


In the reprojected image, a sector of data is missing around the 
180W/180E meridan. This sector is several degree wide although the 
original data was with a resolution of 1/3 degree... surprising.

Is it a bug ? or something wrong with my gdal commands ?
Cheers,
Ghislain

-- 
Ghislain Picard

Laboratoire de Glaciologie et G?ophysique de l'Environnement
54 rue Moli?re - Domaine Universitaire - BP 96
38402 St Martin d'H?res Cedex, FRANCE
tel : +33 476 82 42 42
fax : +33 476 82 42 01

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101004/20ab8307/attachment.html
From m.massing at warped-space.de  Mon Oct  4 04:34:54 2010
From: m.massing at warped-space.de (Manuel Massing)
Date: Mon Oct  4 04:34:57 2010
Subject: [gdal-dev] gdalwrap and crossing 180W/180E
In-Reply-To: <4CA97F63.5030900@lgge.obs.ujf-grenoble.fr>
References: <4CA97F63.5030900@lgge.obs.ujf-grenoble.fr>
Message-ID: <201010041034.54660.m.massing@warped-space.de>

Hi,

To follow myself up, I just had a look at the 
documentation (i know, next time I'll look
before posting :-)) - the bounding window is sampled
in destination coordinates, so my remark viz
choosing SAMPLE_STEPS as the divisor of x-resolution
is not correct - but increasing the number of SAMPLE_STEPS
should still help.

Other options of interest:
 -SAMPLE_GRID=YES, sample internal points as well when computing source window
 -SOURCE_EXTRA=<x>, adds a border around the computed source window
	

bye,

	Manuel
From m.massing at warped-space.de  Mon Oct  4 04:16:06 2010
From: m.massing at warped-space.de (Manuel Massing)
Date: Mon Oct  4 04:35:39 2010
Subject: [gdal-dev] gdalwrap and crossing 180W/180E
In-Reply-To: <4CA97F63.5030900@lgge.obs.ujf-grenoble.fr>
References: <4CA97F63.5030900@lgge.obs.ujf-grenoble.fr>
Message-ID: <201010041016.07050.m.massing@warped-space.de>

Hi Ghislain,

you could try increasing the "SAMPLE_STEPS" warp option, e.g.

	gdalwarp -wo "SAMPLE_STEPS=210"

which should improve the localization of the source bounding
window. 

Choosing SAMPLE_STEPS as a divisor of the source datasets x-resolution
should help avoid this discretization artifact altogether. 

bye,

	Manuel



From schut at sarvision.nl  Mon Oct  4 06:45:24 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Oct  4 06:45:29 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CA5E00E.7010409@gmx.eu>
References: <i81e9e$4dc$1@dough.gmane.org>	<201009301850.49816.even.rouault@mines-paris.org>	<4CA4C5E0.7060004@gmx.eu>	<loom.20101001T070009-148@post.gmane.org>
	<4CA5E00E.7010409@gmx.eu>
Message-ID: <4CA9B044.6010502@sarvision.nl>

  On 10/01/2010 03:20 PM, Hermann Peifer wrote:
> On 01/10/2010 07:03, Jukka Rahkonen wrote:
>> Hermann Peifer<peifer<at>  gmx.eu>  writes:
>>
>>
>>> At work, we are taking this "standard grid" issue pretty serious, but
>>> indeed, we might be the only ones worldwide with such a business rule.
>>
>> You are not alone, we are reprojecting our rasters to standard grid 
>> because it
>> helps in making seamless mosaics from the reprojected images. We are 
>> widening
>> the target extents a little bit to all directions with a python 
>> script to suit
>> the grid.
>>
>
> So we are already 2 ;-)
>
> Actually, I tentatively thought there would be more. This was why I 
> wrote to the mailing list in the first place. I am aware that this 
> (non-)issue can be solved in a shell one-liner or perhaps X lines of 
> some other script code. I just thought that if there is a general 
> interest, it could perhaps be built into the library.

Make that 3 :-)

We also often do this, when different datasets (from several satellite 
sensors) need to be used together. Cause I do almost all my gdal stuff 
in python, I just coded this grid matching into the relevant python 
scripts. However, if support for it would be built into the gdal command 
line utilities, we would undoubtly use it often.

Vincent Schut.
>
> Hermann
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From peifer at gmx.eu  Mon Oct  4 09:08:45 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Oct  4 09:10:02 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CA9B044.6010502@sarvision.nl>
References: <i81e9e$4dc$1@dough.gmane.org>	<201009301850.49816.even.rouault@mines-paris.org>	<4CA4C5E0.7060004@gmx.eu>	<loom.20101001T070009-148@post.gmane.org>	<4CA5E00E.7010409@gmx.eu>
	<4CA9B044.6010502@sarvision.nl>
Message-ID: <4CA9D1DD.1090002@gmx.eu>

On 04/10/2010 12:45, Vincent Schut wrote:
> On 10/01/2010 03:20 PM, Hermann Peifer wrote:
>> On 01/10/2010 07:03, Jukka Rahkonen wrote:
>>> Hermann Peifer<peifer<at> gmx.eu> writes:
>>>
>>>
>>>> At work, we are taking this "standard grid" issue pretty serious, but
>>>> indeed, we might be the only ones worldwide with such a business rule.
>>>
>>> You are not alone, we are reprojecting our rasters to standard grid
>>> because it
>>> helps in making seamless mosaics from the reprojected images. We are
>>> widening
>>> the target extents a little bit to all directions with a python
>>> script to suit
>>> the grid.
>>>
>>
>> So we are already 2 ;-)
>>
>> Actually, I tentatively thought there would be more. This was why I
>> wrote to the mailing list in the first place. I am aware that this
>> (non-)issue can be solved in a shell one-liner or perhaps X lines of
>> some other script code. I just thought that if there is a general
>> interest, it could perhaps be built into the library.
>
> Make that 3 :-)
>
> We also often do this, when different datasets (from several satellite
> sensors) need to be used together. Cause I do almost all my gdal stuff
> in python, I just coded this grid matching into the relevant python
> scripts. However, if support for it would be built into the gdal command
> line utilities, we would undoubtly use it often.
>

Thanks for the time, Vincent.

Even,

I guess that 3 interested GDAL users (on a global scale) are not enough 
to make you reconsider your initial statement:

 > This is a bit too specialized requirement...

?

Hermann
From peifer at gmx.eu  Mon Oct  4 09:16:07 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Oct  4 09:17:23 2010
Subject: [gdal-dev] ERROR 4: ... is a grib file,
 but no raster dataset was successfully identified.
Message-ID: <4CA9D397.7030304@gmx.eu>


Hi All,

I am getting this error for a grib2 file:

$ gdalinfo HRES_ENS_2010100300+000.grib2
ERROR 4: HRES_ENS_2010100300+000.grib2 is a grib file, but no raster 
dataset was successfully identified.
gdalinfo failed - unable to open 'HRES_ENS_2010100300+000.grib2'.


I am using gdal from trunk which has, among others, support for these 
formats:

$ gdalinfo --formats | egrep "JP|GRIB"
   JPEG (rwv): JPEG JFIF
   JPEG2000 (rwv): JPEG-2000 part 1 (ISO/IEC 15444-1)
   GRIB (rov): GRIdded Binary (.grb)

I found some older postings to the mailing list on a similar error, but 
whatever was mentioned there did not help in my case.

Thanks for your time,

Hermann
From rush at winkey.org  Mon Oct  4 09:27:48 2010
From: rush at winkey.org (brian)
Date: Mon Oct  4 09:27:56 2010
Subject: [gdal-dev] ERROR 4: ... is a grib file, but no raster dataset
	was successfully identified.
In-Reply-To: <4CA9D397.7030304@gmx.eu>
References: <4CA9D397.7030304@gmx.eu>
Message-ID: <1286198870.12572.2.camel@winkey.org>

Hermann

Do you have a link to the grib file you can share?

Brian


On Mon, 2010-10-04 at 15:16 +0200, Hermann Peifer wrote:
> Hi All,
> 
> I am getting this error for a grib2 file:
> 
> $ gdalinfo HRES_ENS_2010100300+000.grib2
> ERROR 4: HRES_ENS_2010100300+000.grib2 is a grib file, but no raster 
> dataset was successfully identified.
> gdalinfo failed - unable to open 'HRES_ENS_2010100300+000.grib2'.
> 
> 
> I am using gdal from trunk which has, among others, support for these 
> formats:
> 
> $ gdalinfo --formats | egrep "JP|GRIB"
>    JPEG (rwv): JPEG JFIF
>    JPEG2000 (rwv): JPEG-2000 part 1 (ISO/IEC 15444-1)
>    GRIB (rov): GRIdded Binary (.grb)
> 
> I found some older postings to the mailing list on a similar error, but 
> whatever was mentioned there did not help in my case.
> 
> Thanks for your time,
> 
> Hermann
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From peifer at gmx.eu  Mon Oct  4 10:06:50 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Oct  4 10:08:14 2010
Subject: [gdal-dev] ERROR 4: ... is a grib file, but no raster dataset
	was successfully identified.
In-Reply-To: <1286198870.12572.2.camel@winkey.org>
References: <4CA9D397.7030304@gmx.eu> <1286198870.12572.2.camel@winkey.org>
Message-ID: <4CA9DF7A.30507@gmx.eu>

  It is here for the next 10 days: 
http://transfer.eea.europa.eu/download/6694e0deb608337a8d0e6c1fb0ad5068

Thanks for your time, Hermann

On 04/10/2010 15:27, brian wrote:
> Hermann
>
> Do you have a link to the grib file you can share?
>
> Brian
>
>
> On Mon, 2010-10-04 at 15:16 +0200, Hermann Peifer wrote:
>> Hi All,
>>
>> I am getting this error for a grib2 file:
>>
>> $ gdalinfo HRES_ENS_2010100300+000.grib2
>> ERROR 4: HRES_ENS_2010100300+000.grib2 is a grib file, but no raster
>> dataset was successfully identified.
>> gdalinfo failed - unable to open 'HRES_ENS_2010100300+000.grib2'.
>>
>>
>> I am using gdal from trunk which has, among others, support for these
>> formats:
>>
>> $ gdalinfo --formats | egrep "JP|GRIB"
>>     JPEG (rwv): JPEG JFIF
>>     JPEG2000 (rwv): JPEG-2000 part 1 (ISO/IEC 15444-1)
>>     GRIB (rov): GRIdded Binary (.grb)
>>
>> I found some older postings to the mailing list on a similar error, but
>> whatever was mentioned there did not help in my case.
>>
>> Thanks for your time,
>>
>> Hermann
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dmorissette at mapgears.com  Mon Oct  4 10:23:13 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Oct  4 10:23:17 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <AANLkTimjUVEK671E9Xq24tvPDrK+fQ=1ai=7=aApAJ_d@mail.gmail.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>	<AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>	<4CA35023.2060007@mapgears.com>	<AANLkTi=7NzxMx9YtR5V4pmdpRxyhrCr-+fBut_2siVYY@mail.gmail.com>	<4CA48614.10209@mapgears.com>	<AANLkTi=vH4n5LMiH5J31BVQ1XhSrvhkfiK9B-S5-EQ=e@mail.gmail.com>
	<AANLkTimjUVEK671E9Xq24tvPDrK+fQ=1ai=7=aApAJ_d@mail.gmail.com>
Message-ID: <4CA9E351.1020500@mapgears.com>

Chaitanya kumar CH wrote:
> Hi,
> 
> I think the problem is with the call to stat() on the samba mounted
> files. tab2tab reported the same problem.
> 


Yes, that's what I think as well. I sent a small test program to
Sebastian off-list last week to try to find out more information about
what is happening but haven't heard back from him yet.

Here is a copy of what I sent in case you're interested:


-------- Original Message --------
Subject: Re: [gdal-dev] ogr problems with MapInfo
Date: Thu, 30 Sep 2010 10:09:17 -0400
From: Daniel Morissette <dmorissette@mapgears.com>
To: Sebastian E. Ovide <sebastian.ovide@gmail.com>

(Taking this off-list, we'll summarize on the list later)

Sebastian E. Ovide wrote:
> done... didn't work...
>
> Copied on the same SMB folder with undercase names... both ogrinfo and
> tab2tab failed.
> Copied the same files to a local folder and both ogrinfo and tab2tab
> succeeded...
>
> same errors....
>

It may be that stat() is failing for some reason. Can you please test
with the following little program, save it as test_stat.cpp in the
mitab-1.x/mitab/ source directory:

---------- mitab-1.x/mitab/test_stat.cpp ---------
include "cpl_vsi.h"

int main(int argc, char *argv[])
{
    VSIStatBuf  sStatBuf;
    struct stat stat_buf;
    int status;

    if (argc != 2)
    {
        printf("Usage: %s <filename>\n", argv[0]);
        return -1;
    }

    status = VSIStat(argv[1], &sStatBuf);
    printf("VSIStat(%s) = %d (%s)\n", argv[1], status ,
status?strerror(errno):"" );

    status = stat(argv[1], &stat_buf);
    printf("stat(%s) = %d (%s)\n", argv[1], status,
status?strerror(errno):"" );

}
-----------------------------------------------

And then add the following target (lines) at the end of the GNUmakefile
in that directory:

---------- mitab-1.x/mitab/GNUmakefile ---------

test_stat: test_stat.o $(LIBS)
	$(CXX) $(LFLAGS) -o test_stat test_stat.o $(LIBS) -lm
-----------------------------------------------
(Note that the second line start with a real TAB character, not spaces)

... and build it using 'make test_stat'

... and finally try running it against one of your files. e.g.

  ./test_stat /home/gis/data/tmp/CA_AbandonedMine.MAP

and also against the version with lowercase extension:

  ./test_stat /home/gis/data/tmp/CA_AbandonedMine.map

... and let's see what output we get.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From rush at winkey.org  Mon Oct  4 10:24:03 2010
From: rush at winkey.org (brian)
Date: Mon Oct  4 10:24:06 2010
Subject: [gdal-dev] ERROR 4: ... is a grib file, but no raster dataset
	was successfully identified.
In-Reply-To: <4CA9DF7A.30507@gmx.eu>
References: <4CA9D397.7030304@gmx.eu> <1286198870.12572.2.camel@winkey.org>
	<4CA9DF7A.30507@gmx.eu>
Message-ID: <1286202243.12572.11.camel@winkey.org>

Hermann

GDAL uses degrib to read grib files. I tryed the product in both degrib
and gribdump, neither app will read it. Either the grib file is corrupt
or it is a varient that neither app will read.


Brian


rush@octopi ~ $ degrib HRES_ENS_2010100300+000.grib2 -I
ERROR: with inventory, so far:
MsgNum, Byte, GRIB-Version, elem, level, reference(UTC), valid(UTC),
Proj(hr)
1.0, 0, 2, (null), (null), 01/01/1970 00:00, 01/01/1970 00:00, 0.00
ERROR: In call to GRIB2Inventory.
ERROR: Ran out of file in Section 1
ERROR: Problems with section 1


rush@octopi ~ $ degrib HRES_ENS_2010100300+000.grib2 -C -Csv
ERROR: In call to Grib2Convert.
ERROR: In call to ReadGrib2Record.
Inside ReadGrib2Record.. Calling FindSectLen
ERROR: Section 1 labeled as 21

rush@octopi ~ $ gribdump -v HRES_ENS_2010100300+000.grib2
Oct 04 14:21:53 gribdump[22297]: Starting Up
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 2
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 4
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 6
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 8
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 10
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 12
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 14
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 16
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 18
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 20
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 22
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 24
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 26
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 28
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 30
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 32
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 34
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 36
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 38
Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
Oct 04 14:21:53 gribdump[22297]: GRIB product: 40
Oct 04 14:21:53 gribdump[22297]: EOF on input
Oct 04 14:21:53 gribdump[22297]: Exiting
Oct 04 14:21:53 gribdump[22297]: 0 WMO msgs, 0 GRIBs decoded, 0 written


On Mon, 2010-10-04 at 16:06 +0200, Hermann Peifer wrote:
> It is here for the next 10 days: 
> http://transfer.eea.europa.eu/download/6694e0deb608337a8d0e6c1fb0ad5068
> 
> Thanks for your time, Hermann
> 
> On 04/10/2010 15:27, brian wrote:
> > Hermann
> >
> > Do you have a link to the grib file you can share?
> >
> > Brian
> >
> >
> > On Mon, 2010-10-04 at 15:16 +0200, Hermann Peifer wrote:
> >> Hi All,
> >>
> >> I am getting this error for a grib2 file:
> >>
> >> $ gdalinfo HRES_ENS_2010100300+000.grib2
> >> ERROR 4: HRES_ENS_2010100300+000.grib2 is a grib file, but no raster
> >> dataset was successfully identified.
> >> gdalinfo failed - unable to open 'HRES_ENS_2010100300+000.grib2'.
> >>
> >>
> >> I am using gdal from trunk which has, among others, support for these
> >> formats:
> >>
> >> $ gdalinfo --formats | egrep "JP|GRIB"
> >>     JPEG (rwv): JPEG JFIF
> >>     JPEG2000 (rwv): JPEG-2000 part 1 (ISO/IEC 15444-1)
> >>     GRIB (rov): GRIdded Binary (.grb)
> >>
> >> I found some older postings to the mailing list on a similar error, but
> >> whatever was mentioned there did not help in my case.
> >>
> >> Thanks for your time,
> >>
> >> Hermann
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From peifer at gmx.eu  Mon Oct  4 10:28:01 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Oct  4 10:29:20 2010
Subject: [gdal-dev] ERROR 4: ... is a grib file, but no raster dataset
	was successfully identified.
In-Reply-To: <1D5F4E64B8C04F4C868B94AC9A532AF80E9C778E@ATLMAIL01.corp.weather.com>
References: <4CA9D397.7030304@gmx.eu>
	<1D5F4E64B8C04F4C868B94AC9A532AF80E9C778E@ATLMAIL01.corp.weather.com>
Message-ID: <4CA9E471.7030409@gmx.eu>

  On 04/10/2010 15:21, Cassanova, Bill wrote:
> As a suggestion give wgrib2 a try.  If it fails as well there is
> something not quite correct in the grib2 itself.
> I have seen this error before and the problem was exactly that.

Thanks for the hint! You are right: wgrib2 doesn't like the file either:

$ wgrib2 HRES_ENS_2010100300+000.grib2

*** FATAL ERROR: rd_grib2_msg, missing end section ('7777') ***


It looks like I better contact the data provider.

Hermann
From even.rouault at mines-paris.org  Mon Oct  4 10:31:45 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct  4 10:31:57 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CA9D1DD.1090002@gmx.eu>
References: <i81e9e$4dc$1@dough.gmane.org>
	<201009301850.49816.even.rouault@mines-paris.org>
	<4CA4C5E0.7060004@gmx.eu> <loom.20101001T070009-148@post.gmane.org>
	<4CA5E00E.7010409@gmx.eu> <4CA9B044.6010502@sarvision.nl>
	<4CA9D1DD.1090002@gmx.eu>
Message-ID: <1286202705.4ca9e551dd64b@webmail.free.fr>

Selon Hermann Peifer <peifer@gmx.eu>:

>
> Even,
>
> I guess that 3 interested GDAL users (on a global scale) are not enough
> to make you reconsider your initial statement:

Well, it looks like there is interest for that feature ;-) You know, when you
don't need personnaly a stuff, it generally looks a bit too specialized...
Anyone is free/encouraged to come with a proposal, or better a patch !

This raises quite a few questions :
* what is a standard grid ?
* what syntax would you imagine to pass to gdal utilities to define how you want
the rounding ?
* do you want to round/ceil/floor ? or so that the adjusted extent includes the
exact extent ? or so that the adjusted extent is contained inside the exact
extent ?
* which gdal utilities would be impacted ?
* ... and is there a concensus among the interested users ;-) ?

Best regards,

Even

From peifer at gmx.eu  Mon Oct  4 10:32:03 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Oct  4 10:33:21 2010
Subject: [gdal-dev] Re: ERROR 4: ... is a grib file,
 but no raster dataset was successfully identified.
In-Reply-To: <1286202243.12572.11.camel@winkey.org>
References: <4CA9D397.7030304@gmx.eu>
	<1286198870.12572.2.camel@winkey.org>	<4CA9DF7A.30507@gmx.eu>
	<1286202243.12572.11.camel@winkey.org>
Message-ID: <4CA9E563.5050408@gmx.eu>

Brian,

Indeed, the file seems to be suspicious. See also my other mail where I 
used wgrib2, as suggested by Bill. I will have to contact the data provider.

Thanks again for your time, Hermann


On 04/10/2010 16:24, brian wrote:
> Hermann
>
> GDAL uses degrib to read grib files. I tryed the product in both degrib
> and gribdump, neither app will read it. Either the grib file is corrupt
> or it is a varient that neither app will read.
>
>
> Brian
>
>
> rush@octopi ~ $ degrib HRES_ENS_2010100300+000.grib2 -I
> ERROR: with inventory, so far:
> MsgNum, Byte, GRIB-Version, elem, level, reference(UTC), valid(UTC),
> Proj(hr)
> 1.0, 0, 2, (null), (null), 01/01/1970 00:00, 01/01/1970 00:00, 0.00
> ERROR: In call to GRIB2Inventory.
> ERROR: Ran out of file in Section 1
> ERROR: Problems with section 1
>
>
> rush@octopi ~ $ degrib HRES_ENS_2010100300+000.grib2 -C -Csv
> ERROR: In call to Grib2Convert.
> ERROR: In call to ReadGrib2Record.
> Inside ReadGrib2Record.. Calling FindSectLen
> ERROR: Section 1 labeled as 21
>
> rush@octopi ~ $ gribdump -v HRES_ENS_2010100300+000.grib2
> Oct 04 14:21:53 gribdump[22297]: Starting Up
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 2
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 4
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 6
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 8
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 10
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 12
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 14
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 16
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 18
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 20
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 22
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 24
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 26
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 28
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 30
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 32
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 34
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 36
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 38
> Oct 04 14:21:53 gribdump[22297]: oversize GRIB product 2
> Oct 04 14:21:53 gribdump[22297]: GRIB product: 40
> Oct 04 14:21:53 gribdump[22297]: EOF on input
> Oct 04 14:21:53 gribdump[22297]: Exiting
> Oct 04 14:21:53 gribdump[22297]: 0 WMO msgs, 0 GRIBs decoded, 0 written
>
>
> On Mon, 2010-10-04 at 16:06 +0200, Hermann Peifer wrote:
>> It is here for the next 10 days:
>> http://transfer.eea.europa.eu/download/6694e0deb608337a8d0e6c1fb0ad5068
>>
>> Thanks for your time, Hermann
>>
>> On 04/10/2010 15:27, brian wrote:
>>> Hermann
>>>
>>> Do you have a link to the grib file you can share?
>>>
>>> Brian
>>>
>>>
>>> On Mon, 2010-10-04 at 15:16 +0200, Hermann Peifer wrote:
>>>> Hi All,
>>>>
>>>> I am getting this error for a grib2 file:
>>>>
>>>> $ gdalinfo HRES_ENS_2010100300+000.grib2
>>>> ERROR 4: HRES_ENS_2010100300+000.grib2 is a grib file, but no raster
>>>> dataset was successfully identified.
>>>> gdalinfo failed - unable to open 'HRES_ENS_2010100300+000.grib2'.
>>>>
>>>>
>>>> I am using gdal from trunk which has, among others, support for these
>>>> formats:
>>>>
>>>> $ gdalinfo --formats | egrep "JP|GRIB"
>>>>      JPEG (rwv): JPEG JFIF
>>>>      JPEG2000 (rwv): JPEG-2000 part 1 (ISO/IEC 15444-1)
>>>>      GRIB (rov): GRIdded Binary (.grb)
>>>>
>>>> I found some older postings to the mailing list on a similar error, but
>>>> whatever was mentioned there did not help in my case.
>>>>
>>>> Thanks for your time,
>>>>
>>>> Hermann
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dmorissette at mapgears.com  Mon Oct  4 10:50:15 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Oct  4 10:50:17 2010
Subject: [gdal-dev] MOTION: Add Alan Boudreault as GDAL/OGR committer
In-Reply-To: <4CA3667F.1010508@mapgears.com>
References: <4CA3667F.1010508@mapgears.com>
Message-ID: <4CA9E9A7.9070601@mapgears.com>

Daniel Morissette wrote:
> MOTION: To add Alan Boudreault as GDAL/OGR committer
> 
> 

This motion has passed with +1 from PSC members DanielM, FrankW, EvenR,
HowardB and TamasS (and non-PSC +1 from DidierR).

Alan, I will enable your CVS commit access once you confirm on this list
that you have read and agreed to the GDAL/OGR committer guidelines in
http://trac.osgeo.org/gdal/wiki/rfc3_commiters

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From peifer at gmx.eu  Mon Oct  4 11:01:14 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Oct  4 11:02:37 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <1286202705.4ca9e551dd64b@webmail.free.fr>
References: <i81e9e$4dc$1@dough.gmane.org>	<201009301850.49816.even.rouault@mines-paris.org>	<4CA4C5E0.7060004@gmx.eu>
	<loom.20101001T070009-148@post.gmane.org>	<4CA5E00E.7010409@gmx.eu>
	<4CA9B044.6010502@sarvision.nl>	<4CA9D1DD.1090002@gmx.eu>
	<1286202705.4ca9e551dd64b@webmail.free.fr>
Message-ID: <4CA9EC3A.9090409@gmx.eu>

On 04/10/2010 16:31, Even Rouault wrote:
>
> This raises quite a few questions :
> * what is a standard grid ?

Ours starts at 0,0, then goes in all directions with the given tr


> * what syntax would you imagine to pass to gdal utilities to define how you want
> the rounding ?

Some creation options like standard=yes, standard_origin=0,0

> * do you want to round/ceil/floor ? or so that the adjusted extent includes the
> exact extent ? or so that the adjusted extent is contained inside the exact
> extent ?

The adjusted extend includes the exact extent.

> * which gdal utilities would be impacted ?

All the ones that create new raster files: gdal_rasterize, 
gdal_translate, gdalwarp, ...

> * ... and is there a concensus among the interested users ;-) ?
>

Hmm. Let's see.

From warmerdam at pobox.com  Mon Oct  4 11:23:47 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct  4 11:23:56 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CA9EC3A.9090409@gmx.eu>
References: <i81e9e$4dc$1@dough.gmane.org>
	<201009301850.49816.even.rouault@mines-paris.org>	<4CA4C5E0.7060004@gmx.eu>
	<loom.20101001T070009-148@post.gmane.org>	<4CA5E00E.7010409@gmx.eu>
	<4CA9B044.6010502@sarvision.nl>	<4CA9D1DD.1090002@gmx.eu>
	<1286202705.4ca9e551dd64b@webmail.free.fr> <4CA9EC3A.9090409@gmx.eu>
Message-ID: <4CA9F183.3090004@pobox.com>

Hermann Peifer wrote:
> On 04/10/2010 16:31, Even Rouault wrote:
>>
>> This raises quite a few questions :
>> * what is a standard grid ?
> 
> Ours starts at 0,0, then goes in all directions with the given tr
> 
> 
>> * what syntax would you imagine to pass to gdal utilities to define 
>> how you want
>> the rounding ?
> 
> Some creation options like standard=yes, standard_origin=0,0
> 
>> * do you want to round/ceil/floor ? or so that the adjusted extent 
>> includes the
>> exact extent ? or so that the adjusted extent is contained inside the 
>> exact
>> extent ?
> 
> The adjusted extend includes the exact extent.
> 
>> * which gdal utilities would be impacted ?
> 
> All the ones that create new raster files: gdal_rasterize, 
> gdal_translate, gdalwarp, ...

Even,

I would suggest "-tap" for "target aligned pixels" to go with "-tr".  I
would think that gdalwarp, gdal_rasterize, and perhaps gdal_merge.py and
gdalbuildvrt would be appropriate applications to support this switch.

I don't see how it would be appropriate for gdal_translate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From todd.jellett at caris.com  Mon Oct  4 11:28:10 2010
From: todd.jellett at caris.com (Todd Jellett)
Date: Mon Oct  4 11:51:59 2010
Subject: [gdal-dev] Mixed line endings in released gdal172.zip
	(sagadataset.cpp)
Message-ID: <4CA9F28A.1000109@caris.com>

FYI There are mixed line endings (unix/windows) in the released version 
of gdal172.zip obtained here 
(http://trac.osgeo.org/gdal/wiki/DownloadSource).

This is causing a subversion problem when attempting to do a "Vendor 
Update" from v1.6.0 to v1.7.2 which preserves our local changes 
(nmake.opt  + makefile.vc). It doesn't matter which line ending is used, 
it just can't be mixed in the same file. The issue is described here:

http://svn.haxx.se/users/archive-2006-07/0702.shtml

The only file with mixed line endings is sagadataset.cpp (but this one 
file is enough to cause svn to barf) .

Todd

From warmerdam at pobox.com  Mon Oct  4 12:04:43 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct  4 12:04:51 2010
Subject: [gdal-dev] Mixed line endings in released gdal172.zip
	(sagadataset.cpp)
In-Reply-To: <4CA9F28A.1000109@caris.com>
References: <4CA9F28A.1000109@caris.com>
Message-ID: <4CA9FB1B.9050308@pobox.com>

Todd Jellett wrote:
> FYI There are mixed line endings (unix/windows) in the released version 
> of gdal172.zip obtained here 
> (http://trac.osgeo.org/gdal/wiki/DownloadSource).
> 
> This is causing a subversion problem when attempting to do a "Vendor 
> Update" from v1.6.0 to v1.7.2 which preserves our local changes 
> (nmake.opt  + makefile.vc). It doesn't matter which line ending is used, 
> it just can't be mixed in the same file. The issue is described here:
> 
> http://svn.haxx.se/users/archive-2006-07/0702.shtml
> 
> The only file with mixed line endings is sagadataset.cpp (but this one 
> file is enough to cause svn to barf) .

Todd,

I have corrected this file in trunk and the 1.7 branch.  The next GDAL 1.7.x
release should not have this issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yehil at rafael.co.il  Mon Oct  4 13:11:14 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon Oct  4 13:22:35 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef 
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEBE23198@MAILBOXSERVER.rf.local>

Hi
We are using Gdal 1.7.0b from FWTools 2.7.1.
Our application is written in C#.
In our application we need to open a large number of tiff files (more than 2000).
We noticed that opening a dataset and then getting the projection string will increase the amount of memory (private bytes) by more that 80KB. This seems not a large amount, but multiplied by 2000 is more than 160MB.
Is anyone aware of such a problem?

Sent from my mobile
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101004/63a7878d/attachment.html
From even.rouault at mines-paris.org  Mon Oct  4 13:43:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct  4 13:43:29 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CA9EC3A.9090409@gmx.eu>
References: <i81e9e$4dc$1@dough.gmane.org>
	<1286202705.4ca9e551dd64b@webmail.free.fr>
	<4CA9EC3A.9090409@gmx.eu>
Message-ID: <201010041943.42449.even.rouault@mines-paris.org>

Le lundi 04 octobre 2010 17:01:14, Hermann Peifer a ?crit :
> 
> > * do you want to round/ceil/floor ? or so that the adjusted extent
> > includes the exact extent ? or so that the adjusted extent is contained
> > inside the exact extent ?
> 
> The adjusted extend includes the exact extent.
> 

Hum, the example you gave in the first email seems to show the contrary:

Original extent:

Upper Left  ( 4923406.374, 3088693.597)
Lower Right ( 4994261.374, 3010723.597)

Wished extent:

Upper Left  ( 4923500, 3088600)
Lower Right ( 4994200, 3010800)

Unless I'm wrong, the rounded/adjusted bounding box is included within the 
original/exact extent.
From peifer at gmx.eu  Mon Oct  4 14:44:05 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Oct  4 14:44:04 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <201010041943.42449.even.rouault@mines-paris.org>
References: <i81e9e$4dc$1@dough.gmane.org>
	<1286202705.4ca9e551dd64b@webmail.free.fr>
	<4CA9EC3A.9090409@gmx.eu>
	<201010041943.42449.even.rouault@mines-paris.org>
Message-ID: <4CAA2075.3040900@gmx.eu>

  On 04/10/2010 19:43, Even Rouault wrote:
> Le lundi 04 octobre 2010 17:01:14, Hermann Peifer a ?crit :
>>> * do you want to round/ceil/floor ? or so that the adjusted extent
>>> includes the exact extent ? or so that the adjusted extent is contained
>>> inside the exact extent ?
>> The adjusted extend includes the exact extent.
>>
> Hum, the example you gave in the first email seems to show the contrary:
>
> Original extent:
>
> Upper Left  ( 4923406.374, 3088693.597)
> Lower Right ( 4994261.374, 3010723.597)
>
> Wished extent:
>
> Upper Left  ( 4923500, 3088600)
> Lower Right ( 4994200, 3010800)
>
> Unless I'm wrong, the rounded/adjusted bounding box is included within the
> original/exact extent.

Hmm. I vaguely remember that I was thinking twice before giving the 
example, but obviously, this was not enough.

So the wished extent for a tr of 100 should indeed better read:

Upper Left ( 4923400, 3088700)
Lower Right ( 4994300, 3010700)

Sorry, Hermann
From aboudreault at mapgears.com  Mon Oct  4 14:42:46 2010
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Mon Oct  4 14:51:18 2010
Subject: [gdal-dev] MOTION: Add Alan Boudreault as GDAL/OGR committer
In-Reply-To: <4CA9E9A7.9070601@mapgears.com>
References: <4CA3667F.1010508@mapgears.com> <4CA9E9A7.9070601@mapgears.com>
Message-ID: <201010041442.46765.aboudreault@mapgears.com>

Devs,

I've read and I agree with the GDAL/OGR committer guidelines.

Thanks,
Alan

On October 4, 2010 10:50:15 am Daniel Morissette wrote:
> Daniel Morissette wrote:
> > MOTION: To add Alan Boudreault as GDAL/OGR committer
> 
> This motion has passed with +1 from PSC members DanielM, FrankW, EvenR,
> HowardB and TamasS (and non-PSC +1 from DidierR).
> 
> Alan, I will enable your CVS commit access once you confirm on this list
> that you have read and agreed to the GDAL/OGR committer guidelines in
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> Daniel

-- 
Alan Boudreault
Mapgears
http://www.mapgears.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101004/5e248ec9/attachment.html
From EAdam at co.lincoln.or.us  Mon Oct  4 14:56:44 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Mon Oct  4 15:17:48 2010
Subject: [gdal-dev] gdal_rasterize -tr and -te
In-Reply-To: <20101004155200.C4231E01CEC@lists.osgeo.org>
References: <20101004155200.C4231E01CEC@lists.osgeo.org>
Message-ID: <4CA9C0F7.4F75.00CE.0@co.lincoln.or.us>

I would find aligning the pixels to 'standard grid' to be useful as well.  Similar to the -a for g.region in GRASS.  

Thanks, Eli




From gregcoats at mac.com  Mon Oct  4 15:43:48 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Oct  4 16:44:07 2010
Subject: [gdal-dev] A way to determine which ONE image in a .vrt is
 currently being displayed
In-Reply-To: <4CAA2075.3040900@gmx.eu>
References: <i81e9e$4dc$1@dough.gmane.org>
	<1286202705.4ca9e551dd64b@webmail.free.fr> <4CA9EC3A.9090409@gmx.eu>
	<201010041943.42449.even.rouault@mines-paris.org>
	<4CAA2075.3040900@gmx.eu>
Message-ID: <33EC6642-4830-43FD-8190-062AA6BF4DE6@mac.com>

Using GDAL and QGIS, I am able to pan and zoom through 1699 highly compressed GeoJP2 images, that are seamlessly joined together by a .vrt file. After zooming in to narrowing the area of interest, I then want to know the filename of the highly compressed GeoJP2 image I am currently viewing, so that I can then pull up for that area, a reversible compressed GeoJP2 or a GeoTIFF.
Do be able to accomplish this, I wrote
1. gdalinfo_11.sh
a 25 line bash shell script that extracts from gdalinfo, and writes to a text file, the GeoJP2/GeoTIFF filename, and the Upper Left and Lower Right x,y coordinates
2. xy2file_28.c
a 110 line C program that reads in from the text file created by gdalinfo_11.sh, and the current x,y coordinates displayed by QGIS, and then writes out the filename of the 1 of 1699 georeferenced images that contains those coordinates. Below is a sample output. I note that running xy2file_28 takes only 0.01 seconds.
 /usr/bin/time ./xy2file_28 ${HOME}/gis/text_for_dcua/xy_coor_11.txt 294898 4313543
 inx=294898.000000 iny=4313543.000000 
 Checking 0 100 200 300  
 inx=  294898.0000 iny= 4313543.0000 is within 
 ulx=  294000.0000 lrx=  295500.0000 uly= 4314000.0000 lry= 4312500.0000 of 
 18stj940125.jp2 
 Resuming checking 400 500 600 700 800 900 1000 1100 1200 1300 1400 1500 1600 1699 
        0.01 real         0.00 user         0.00 sys

This script and this program can be downloaded from http://homepage.mac.com/gregcoats/jp2/xy2file.zip
While these meet my current requirement, they need to be revised and improved to address the wider GDAL audience. I am not qualified to do that, but perhaps someone will more programming and GDAL experience than me will consider doing so.
Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101004/a300e426/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Oct  5 03:35:46 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Oct  5 03:35:48 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEBE23198@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEBE23198@MAILBOXSERVER.rf.local>
Message-ID: <AANLkTindqxvHhNS7n+WGvKuyjUB5PCWV0KqAqmfbTrok@mail.gmail.com>

Livneh,

I am assuming the 80KB refers to the memory change for getting the
projection and not the whole dataset.
Can you check if the 80KB memory is freed and not leaked if the dataset is
closed?

On Mon, Oct 4, 2010 at 10:41 PM, Livneh Yehiyam <yehil@rafael.co.il> wrote:

> Hi
> We are using Gdal 1.7.0b from FWTools 2.7.1.
> Our application is written in C#.
> In our application we need to open a large number of tiff files (more than
> 2000).
> We noticed that opening a dataset and then getting the projection string
> will increase the amount of memory (private bytes) by more that 80KB. This
> seems not a large amount, but multiplied by 2000 is more than 160MB.
> Is anyone aware of such a problem?
>
> Sent from my mobile
> ------------------------------
> * This message (including any attachments) issued by RAFAEL- ADVANCED
> DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential
> information intended for a specific individual and purpose, may constitute
> information that is privileged or confidential or otherwise protected from
> disclosure. If you are not the intended recipient, you should contact us
> immediately and thereafter delete this message from your system. You are
> hereby notified that any disclosure, copying, dissemination, distribution or
> forwarding of this message, or the taking of any action based on it, is
> strictly prohibited. If you have received this e-mail in error, please
> notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely
> delete or destroy any and all electronic or other copies of the original
> message and any attachments thereof. *
> ------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101005/09e5658e/attachment.html
From briansmailbox at gmail.com  Tue Oct  5 05:04:08 2010
From: briansmailbox at gmail.com (Brian Kelly)
Date: Tue Oct  5 05:04:10 2010
Subject: [gdal-dev] JVM crash on making a call to the class/method
	OGRLineString::exportToWkt
In-Reply-To: <201009301901.39679.even.rouault@mines-paris.org>
References: <AANLkTim9ovKQWsgjv22hVXu+8nU0q-DoGHhbgEN1a_qB@mail.gmail.com>
	<201009301901.39679.even.rouault@mines-paris.org>
Message-ID: <AANLkTimCoHA539x6QpFxkeGuJ4MjBerEi4Mh_EzOxyKP@mail.gmail.com>

Even,

Thanks for the suggestions. I'll be working through them and will try to
factor out into a standalone test case if possible.

Best regards,
Brian


On Thu, Sep 30, 2010 at 6:01 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Brian,
>
> This is indeed going be difficult to help you in an efficient way without a
> testable case...
>
> First, check that GDAL is configured --with-threads
>
> Then try the OGRFeature and OGRTestGC test applications that are generated
> in
> swig/java/build/apps
>
> How ogrinfo and ogr2ogr work on the TIGER data ? (try with valgrind) That
> could be a bug in the TIGER driver if it doesn't occur with other format.
>
> Your errors seem to indicate some native heap memory corruption. Perhaps a
> bug
> in GDAL or the Java bindings, or perhaps a misuse of the API that lead to
> that. (There are indeed some ways of causing corruption by misusing the API
> if
> you don't follow the do's / dont do's in the API doc, and potentially other
> undocumented ways...)
>
> The best would really for you to extract the parts where you use OGR API
> and
> try having a minimum app that trigger the issue.
>
> Best regards,
>
> Even
>
> Le jeudi 30 septembre 2010 15:18:48, Brian Kelly a ?crit :
> > Hi all,
> >
> > Apologies in advance for not providing a testable case that can be fired
> > up. I'm hoping the background info provided and investigation work shown
> > below is enough to help trace what the issue is.
> >
> > PROBLEM DEFINITION:
> > I work with a custom java application that loads GIS data using GDAL
> > (current TRUNK code in use though issue occurs with v1.7.2 also). We can
> > load a variety of data types (MapInfo, DGN,etc) with no issues. A problem
> > occurs when TIGER data is loaded though - the TIGER data loads and is
> > viewable but after a few pans and zooms the JAVA server process crashes.
> > This seems to happen when it tries to unload loaded features. Was using
> US
> > Census data tiger files.
> >
> > PROBLEM ANALYSIS:
> > Two sources of debug information were looked at. A (1) general log file
> > generated by java and (2) a core dump file. The outputs of these are
> below.
> >
> > 1. LOG NUMBER ONE: The log file generated on crash indicates the source
> of
> > the problem is the GDAL library when features are deleted.
> >
> > Current thread (0x0000000041a4d800):  JavaThread
> > "FeatureNativeObjectsCleaner" daemon [_thread_in_native, id=28311,
> > stack(0x00007ff5f4cc8000,0x00007ff5f4dc9000)]
> > siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR),
> > si_addr=0x000000000000003a
> > Stack: [0x00007ff5f4cc8000,0x00007ff5f4dc9000],  sp=0x00007ff5f4dc77a8,
> > free space=3fd0000000000000018k
> > Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
> > code)
> > C  0x0000000042355af0
> > j  org.gdal.ogr.FeatureNative.delete()V+23
> >
> > 2. LOG NUMBER TWO: A linux core dump was captured when the JVM crashed.
> > This was analysed for more precise details using the GDB debugger using
> > the approach outlined at
> > http://www.dialogic.com/support/helpweb/dxall/tn957.aspx
> >
> > The output from the core dump file analysis was:
> > Loaded symbols for /usr/lib/jvm/jrrt-4.0.1-1.6.0/jre/lib/amd64/libdcpr.so
> > Core was generated by `/usr/lib/jvm/java-6-jrockit/bin/java -Xms2048m
> > -Xmx2048m -Djava.util.logging.ma'.
> > Program terminated with signal 6, Aborted.
> > #0  0x00007f51ac719a75 in raise () from /lib/libc.so.6
> > (gdb) bt
> > #0  0x00007f51ac719a75 in raise () from /lib/libc.so.6
> > #1  0x00007f51ac71d5c0 in abort () from /lib/libc.so.6
> > #2  0x00007f51ac7534fb in ?? () from /lib/libc.so.6
> > #3  0x00007f51ac75d5b6 in ?? () from /lib/libc.so.6
> > #4  0x00007f51ac7616d8 in ?? () from /lib/libc.so.6
> > #5  0x00007f51ac76258e in malloc () from /lib/libc.so.6
> > #6  0x00007f515d06c262 in OGRLineString::exportToWkt
> (this=0x7f5154722bb0,
> >     ppszDstText=0x7f5158804728) at ogrlinestring.cpp:1049
> > #7  0x00007f515d51655f in OGRGeometryShadow_ExportToWkt__SWIG_1
> > (jenv=0x5952bf0,
> >     jcls=<value optimized out>, jarg1=6, jarg1_=0xffffffffffffffff)
> >     at ogr_wrap.cpp:1792
> > #8  Java_org_gdal_ogr_ogrJNI_Geometry_1ExportToWkt_1_1SWIG_11
> > (jenv=0x5952bf0,
> >     jcls=<value optimized out>, jarg1=6, jarg1_=0xffffffffffffffff)
> >     at ogr_wrap.cpp:7166
> > #9  0x00007f5166de2715 in ?? ()
> > #10 0x00000000827520c0 in ?? ()
> >
> >
> > 1. The core dump file indicates that an exception occurs in the file
> > ogrlinestring.cpp at L1049. In the GDAL trunk source code that I have
> this
> > corresponds to the line:
> >        *ppszDstText = (char *) VSIMalloc( nMaxString );
> > 2. The output from Log #1 indicates that there might be an issue with
> > memory pointers. This is based on the SEGV_MAPERR error output and the
> > opinion on the post here:
> >
> http://www.linuxquestions.org/questions/programming-9/free-invalid-next-siz
> > e-fast-c-error-729852/
> >
> > It looks like the problem could be a memory pointer size issue related to
> > ogrlinestring. If anyone could take a quick look and suggest a fix that
> > would be appreciated. I'm a java programmer lost in a C++ world on this
> > one.
> >
> > Thanks,
> > Brian
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101005/f7461604/attachment.html
From spam at kolix.de  Tue Oct  5 05:33:47 2010
From: spam at kolix.de (moritzzz)
Date: Tue Oct  5 05:33:49 2010
Subject: [gdal-dev] Reading Geometry from text file
Message-ID: <1286271227169-5602472.post@n2.nabble.com>


Hey guys,

I just started using gdal/ogr and am running into a lot of problems. The
main one right now comes up when I'm trying to create a geometry from a
string that I read from a file. The line I'm reading looks like this:
MULTIPOLYGON(((1 1,5 1,5 5,1 5,1 1),(2 2,2 3,3 3,3 2,2 2)),((6 3,9 2,9 4,6
3)))

Now I wrote some c++ code that's supposed to create a OGRMultipolygon in
which line is the mentioned line from the file:

double* kdTreeMgmtServer::process_polygon(string line, string path) {
	char* lineArr = (char*) line.c_str();

	OGRGeometry* new_geom;
	OGRGeometryFactory::createFromWkt(&lineArr, NULL, &new_geom);
	if (wkbFlatten(new_geom->getGeometryType()) != wkbMultiPolygon) {
		log_error("not a multipolygon! geometrytype =
%d\n",new_geom->getGeometryType());
		return NULL;
	}
	if (!new_geom->IsValid()) {
		log_debug("line is invalid: '%s'\n", line.c_str());
	}
	OGRMultiPolygon* poly = (OGRMultiPolygon*) new_geom;
	poly->get_Area();
}

The first part seems to work fine, as the geometry is recognized as a
multipolygon but the validation always fails and poly->get_Area(); causes a
crash of the code. What am I doing wrong?

Cheers

Moritz
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Reading-Geometry-from-text-file-tp5602472p5602472.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Oct  5 06:43:33 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Oct  5 06:43:35 2010
Subject: [gdal-dev] Reading Geometry from text file
In-Reply-To: <1286271227169-5602472.post@n2.nabble.com>
References: <1286271227169-5602472.post@n2.nabble.com>
Message-ID: <AANLkTikzaC7hP2e8t59WAw4UEo9-PS=LW=03BRMHzfag@mail.gmail.com>

Moritz,

Did you compile GDAL/OGR with GEOS library support? IsValid() will fail
without this.

I can't tell why get_Area() crashes.

On Tue, Oct 5, 2010 at 3:03 PM, moritzzz <spam@kolix.de> wrote:

>
> Hey guys,
>
> I just started using gdal/ogr and am running into a lot of problems. The
> main one right now comes up when I'm trying to create a geometry from a
> string that I read from a file. The line I'm reading looks like this:
> MULTIPOLYGON(((1 1,5 1,5 5,1 5,1 1),(2 2,2 3,3 3,3 2,2 2)),((6 3,9 2,9 4,6
> 3)))
>
> Now I wrote some c++ code that's supposed to create a OGRMultipolygon in
> which line is the mentioned line from the file:
>
> double* kdTreeMgmtServer::process_polygon(string line, string path) {
>        char* lineArr = (char*) line.c_str();
>
>        OGRGeometry* new_geom;
>        OGRGeometryFactory::createFromWkt(&lineArr, NULL, &new_geom);
>        if (wkbFlatten(new_geom->getGeometryType()) != wkbMultiPolygon) {
>                log_error("not a multipolygon! geometrytype =
> %d\n",new_geom->getGeometryType());
>                return NULL;
>        }
>        if (!new_geom->IsValid()) {
>                log_debug("line is invalid: '%s'\n", line.c_str());
>        }
>        OGRMultiPolygon* poly = (OGRMultiPolygon*) new_geom;
>        poly->get_Area();
> }
>
> The first part seems to work fine, as the geometry is recognized as a
> multipolygon but the validation always fails and poly->get_Area(); causes a
> crash of the code. What am I doing wrong?
>
> Cheers
>
> Moritz
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Reading-Geometry-from-text-file-tp5602472p5602472.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101005/fee1a1b7/attachment-0001.html
From spam at kolix.de  Tue Oct  5 08:25:50 2010
From: spam at kolix.de (moritzzz)
Date: Tue Oct  5 08:25:52 2010
Subject: [gdal-dev] Re: Reading Geometry from text file
In-Reply-To: <AANLkTikzaC7hP2e8t59WAw4UEo9-PS=LW=03BRMHzfag@mail.gmail.com>
References: <1286271227169-5602472.post@n2.nabble.com>
	<AANLkTikzaC7hP2e8t59WAw4UEo9-PS=LW=03BRMHzfag@mail.gmail.com>
Message-ID: <1286281550296-5602924.post@n2.nabble.com>


Hey,

I checked gdal out from the svn repos and build it with:
./configure --libdir=/usr/lib --with-geos=yes
make -j3
make install

Installed geos stuff:
dpkg -l | grep geos
ii  libgeos-3.2.0                          3.2.0-1                             
Geometry engine for Geographic Information Systems - C++ Library
ii  libgeos-c1                             3.2.0-1                             
Geometry engine for Geographic Information Systems - C Library
ii  libgeos-dev                            3.2.0-1                             
Geometry engine for GIS - Development files

So from my pov it should be installed with geos support and IsValid() should
not fail if the geometry is valid.

For the crash of get_Area(), there is no error message or something like
that. The program just shutsdown.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Reading-Geometry-from-text-file-tp5602472p5602924.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Oct  5 09:31:42 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Oct  5 09:31:45 2010
Subject: [gdal-dev] Re: Reading Geometry from text file
In-Reply-To: <1286281550296-5602924.post@n2.nabble.com>
References: <1286271227169-5602472.post@n2.nabble.com>
	<AANLkTikzaC7hP2e8t59WAw4UEo9-PS=LW=03BRMHzfag@mail.gmail.com>
	<1286281550296-5602924.post@n2.nabble.com>
Message-ID: <AANLkTimy81ReL2bDK=YMObJRWkWvRQ7ZrPLAAN22HB+i@mail.gmail.com>

Moritz,

Then we can probably rule out the geos library. Just make sure it was
recognized by the configure script by looking at its output or in the
config.log file.

We need to have some info on the get_Area() error.
Build gdal after configuring with the --enable-debug switch and run the
application with the environment variable CPL_DEBUG set to 'ON'.
For deeper analysis run it with ddd or some other debugger.

On Tue, Oct 5, 2010 at 5:55 PM, moritzzz <spam@kolix.de> wrote:

>
> Hey,
>
> I checked gdal out from the svn repos and build it with:
> ./configure --libdir=/usr/lib --with-geos=yes
> make -j3
> make install
>
> Installed geos stuff:
> dpkg -l | grep geos
> ii  libgeos-3.2.0                          3.2.0-1
> Geometry engine for Geographic Information Systems - C++ Library
> ii  libgeos-c1                             3.2.0-1
> Geometry engine for Geographic Information Systems - C Library
> ii  libgeos-dev                            3.2.0-1
> Geometry engine for GIS - Development files
>
> So from my pov it should be installed with geos support and IsValid()
> should
> not fail if the geometry is valid.
>
> For the crash of get_Area(), there is no error message or something like
> that. The program just shutsdown.
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Reading-Geometry-from-text-file-tp5602472p5602924.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101005/43b2074e/attachment.html
From spam at kolix.de  Tue Oct  5 09:50:28 2010
From: spam at kolix.de (moritzzz)
Date: Tue Oct  5 09:50:30 2010
Subject: [gdal-dev] Re: Reading Geometry from text file
In-Reply-To: <AANLkTimy81ReL2bDK=YMObJRWkWvRQ7ZrPLAAN22HB+i@mail.gmail.com>
References: <1286271227169-5602472.post@n2.nabble.com>
	<AANLkTikzaC7hP2e8t59WAw4UEo9-PS=LW=03BRMHzfag@mail.gmail.com>
	<1286281550296-5602924.post@n2.nabble.com>
	<AANLkTimy81ReL2bDK=YMObJRWkWvRQ7ZrPLAAN22HB+i@mail.gmail.com>
Message-ID: <1286286628969-5603175.post@n2.nabble.com>


So I now changed the code to just use the geos library and it works:

Point* kdTreeMgmtServer::process_polygon(string line, string path) {
	WKTReader* wkt_reader = new WKTReader();
	Geometry* geom = wkt_reader->read(line);

	if(!geom->isValid()) {
		log_error("not a valid geometry: %s\n", line.c_str());
		return NULL;
	}
	if(geom->getGeometryTypeId() != GEOS_MULTIPOLYGON) {
		log_error("geometry is not a multipolygon! geometrytype = %s\n",
geom->getGeometryType().c_str());
		return NULL;
	}
	MultiPolygon* poly = (MultiPolygon*) geom;
	Point* centroid = poly->getCentroid();

	log_debug("centroid: %lf %lf\n", centroid->getX(), centroid->getY());

	return centroid;
}

This code is now calculating the good centroid etc and the geos library
should offer enough functionality for my purpose. As soon as I have some
time I'll enable the debug and check out what's wrong with the gdal/ogr
stuff.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Reading-Geometry-from-text-file-tp5602472p5603175.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From j.donovan at virtalis.com  Tue Oct  5 10:48:50 2010
From: j.donovan at virtalis.com (John Donovan)
Date: Tue Oct  5 10:49:04 2010
Subject: [gdal-dev] Minor documentation problem
Message-ID: <C8891C79DFCAB347B9221DF3890EDD2F73E3C8@topdog.Virtalis.local>

Hi all,
I was just perusing the gdalwarp page on www.gdal.org/gdalwarp.html,
when I noticed this tautological sentence:

"Mosaicing into an existing output file is supported if the output file
already exists."

Any idea what it is meant to say? I presume it is something to do with
the bounds of an existing output file being used instead of those of the
input.

-JD

______________________________________________________________________
This email has been scanned for Virtalis Ltd by the MessageLabs Email Security System. ______________________________________________________________________
From warmerdam at pobox.com  Tue Oct  5 10:54:24 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct  5 10:54:32 2010
Subject: [gdal-dev] Minor documentation problem
In-Reply-To: <C8891C79DFCAB347B9221DF3890EDD2F73E3C8@topdog.Virtalis.local>
References: <C8891C79DFCAB347B9221DF3890EDD2F73E3C8@topdog.Virtalis.local>
Message-ID: <4CAB3C20.8080306@pobox.com>

John Donovan wrote:
> Hi all,
> I was just perusing the gdalwarp page on www.gdal.org/gdalwarp.html,
> when I noticed this tautological sentence:
> 
> "Mosaicing into an existing output file is supported if the output file
> already exists."
> 
> Any idea what it is meant to say? I presume it is something to do with
> the bounds of an existing output file being used instead of those of the
> input.

John,

It means if the output file already exists then it will be mosaiced into
as opposed to a new file being created.  It isn't just the bounds of the
existing file that are utilized - the whole file is used and the only
thing altered is the pixels replaced as part of the warp/mosaic operation.

I don't think the statement is tautological, but it does seem to be less
than clear, and perhaps a bit redundant.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From j.donovan at virtalis.com  Tue Oct  5 11:19:46 2010
From: j.donovan at virtalis.com (John Donovan)
Date: Tue Oct  5 11:19:50 2010
Subject: [gdal-dev] Minor documentation problem
References: <C8891C79DFCAB347B9221DF3890EDD2F73E3C8@topdog.Virtalis.local>
	<4CAB3C20.8080306@pobox.com>
Message-ID: <C8891C79DFCAB347B9221DF3890EDD2F73E3D5@topdog.Virtalis.local>

Ah yes, I can see what you mean now. OK, maybe not tautological, but it
certainly made me stop for a moment to figure it out!

-JD

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 05 October 2010 15:54
To: John Donovan
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Minor documentation problem

John Donovan wrote:
> Hi all,
> I was just perusing the gdalwarp page on www.gdal.org/gdalwarp.html, 
> when I noticed this tautological sentence:
> 
> "Mosaicing into an existing output file is supported if the output 
> file already exists."
> 
> Any idea what it is meant to say? I presume it is something to do with

> the bounds of an existing output file being used instead of those of 
> the input.

John,

It means if the output file already exists then it will be mosaiced into
as opposed to a new file being created.  It isn't just the bounds of the
existing file that are utilized - the whole file is used and the only
thing altered is the pixels replaced as part of the warp/mosaic
operation.

I don't think the statement is tautological, but it does seem to be less
than clear, and perhaps a bit redundant.

Best regards,
-- 

______________________________________________________________________
This email has been scanned for Virtalis Ltd by the MessageLabs Email Security System. ______________________________________________________________________
From even.rouault at mines-paris.org  Tue Oct  5 13:40:14 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct  5 13:40:25 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CA9F183.3090004@pobox.com>
References: <i81e9e$4dc$1@dough.gmane.org> <4CA9EC3A.9090409@gmx.eu>
	<4CA9F183.3090004@pobox.com>
Message-ID: <201010051940.14445.even.rouault@mines-paris.org>

Le lundi 04 octobre 2010 17:23:47, Frank Warmerdam a ?crit :

> > gdal_translate, gdalwarp, ...
> 
> Even,
> 
> I would suggest "-tap" for "target aligned pixels" to go with "-tr".  I
> would think that gdalwarp, gdal_rasterize, and perhaps gdal_merge.py and
> gdalbuildvrt would be appropriate applications to support this switch.

Foks,

I've followed Frank's suggestion. Please test the patch attached to 
http://trac.osgeo.org/gdal/ticket/3772 (applies cleanly on latest trunk, 
r20770) and report if it works as you expect. Then I'll commit it.

> 
> I don't see how it would be appropriate for gdal_translate.
> 
> Best regards,
From yehil at rafael.co.il  Tue Oct  5 16:03:56 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Tue Oct  5 16:05:07 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef
In-Reply-To: <AANLkTindqxvHhNS7n+WGvKuyjUB5PCWV0KqAqmfbTrok@mail.gmail.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319A@MAILBOXSERVER.rf.local>

Hi
After further investigation I think the situation is more complex, as the results I'm getting depends on the file opened.
I ran the test with several tiff files and I'm getting completly different results, as described below.
Also, to rest my mind that this is not a problem with the C# binding, I'v created an identical test using the c interface.

case 1: 580MB tiff, tiled RGB with pyramid:
GDALOpen increased the memory by 17KB.
GetProjectionRef increased the memory by an additional 35KB.
After calling GDALClose, the memory was still 2KB more than before the call to GDALOpen.

case 1: 434MB tiff, tiled RGB without pyramid:
GDALOpen increased the memory by 40KB.
GetProjectionRef increased the memory by an additional 0.6KB.
After calling GDALClose, the memory was still 2KB more than before the call to GDALOpen.

case 3: 420MB tiff, one row per strip RGB without pyramid:
GDALOpen increased the memory by 186KB.
GetProjectionRef increased the memory by an additional 0.5KB.
After calling GDALClose, the memory was still 4KB more than before the call to GDALOpen.

case 4: 2GB tiff, one row per strip palette packbits compression without pyramid:
GDALOpen increased the memory by 867KB.
GetProjectionRef increased the memory by an additional 0.1KB.
After calling GDALClose, the memory was still 9KB more than before the call to GDALOpen.

Beside being very inconsistent (or at least I fail to see the pattern), a few things worry me, and might send me searching for another solution:
1. opening large stripped files increases the memory by almost 1MB. Multiplied by hundreds of files this amount to hundreds of MBs.
2. for a big tiled pyramid file, even the 35KB increase for just reading the projection might be too much.

-----Original Message-----
From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
Sent: Tuesday, October 05, 2010 9:36 AM
To: Livneh Yehiyam
Cc: gdal-dev
Subject: Re: [gdal-dev] Memory usage for GetProjectionRef

Livneh,

I am assuming the 80KB refers to the memory change for getting the projection and not the whole dataset.
Can you check if the 80KB memory is freed and not leaked if the dataset is closed?

On Mon, Oct 4, 2010 at 10:41 PM, Livneh Yehiyam <yehil@rafael.co.il<mailto:yehil@rafael.co.il>> wrote:

Hi
We are using Gdal 1.7.0b from FWTools 2.7.1.
Our application is written in C#.
In our application we need to open a large number of tiff files (more than 2000).
We noticed that opening a dataset and then getting the projection string will increase the amount of memory (private bytes) by more that 80KB. This seems not a large amount, but multiplied by 2000 is more than 160MB.
Is anyone aware of such a problem?

Sent from my mobile

________________________________
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf@rafael.co.il<mailto:lawraf@rafael.co.il> and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
________________________________

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
From warmerdam at pobox.com  Tue Oct  5 17:32:41 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct  5 17:32:50 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319A@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319A@MAILBOXSERVER.rf.local>
Message-ID: <4CAB9979.8050106@pobox.com>

Livneh Yehiyam wrote:
> Hi
> After further investigation I think the situation is more complex, as the results I'm getting depends on the file opened.
> I ran the test with several tiff files and I'm getting completly different results, as described below.
> Also, to rest my mind that this is not a problem with the C# binding, I'v created an identical test using the c interface.
> 
> case 1: 580MB tiff, tiled RGB with pyramid:
> GDALOpen increased the memory by 17KB.
> GetProjectionRef increased the memory by an additional 35KB.
> After calling GDALClose, the memory was still 2KB more than before the call to GDALOpen.
> 
> case 1: 434MB tiff, tiled RGB without pyramid:
> GDALOpen increased the memory by 40KB.
> GetProjectionRef increased the memory by an additional 0.6KB.
> After calling GDALClose, the memory was still 2KB more than before the call to GDALOpen.
> 
> case 3: 420MB tiff, one row per strip RGB without pyramid:
> GDALOpen increased the memory by 186KB.
> GetProjectionRef increased the memory by an additional 0.5KB.
> After calling GDALClose, the memory was still 4KB more than before the call to GDALOpen.
> 
> case 4: 2GB tiff, one row per strip palette packbits compression without pyramid:
> GDALOpen increased the memory by 867KB.
> GetProjectionRef increased the memory by an additional 0.1KB.
> After calling GDALClose, the memory was still 9KB more than before the call to GDALOpen.
> 
> Beside being very inconsistent (or at least I fail to see the pattern), a few things worry me, and might send me searching for another solution:
> 1. opening large stripped files increases the memory by almost 1MB. Multiplied by hundreds of files this amount to hundreds of MBs.
> 2. for a big tiled pyramid file, even the 35KB increase for just reading the projection might be too much.

Livneh,

I can run "gdalinfo utm.tif" under valgrind, a memory corruption and
leak checker, and confirm that no memory is leaked.  I'm not sure what
you are using to check memory use but I have no reason to trust it.

Note that there are memory buffers allocated and kept around for a
variety of purposes.  Some of these are not freed until cleanup functions
like GDALDestroyDriverManager() are called.  These may include cached
copies of the coordinate system .csv files.

You are welcome to go looking for another solution, but I have little
reason to believe GDAL's GeoTIFF driver leaks memory.  If it does
I would be pleased to fix it if you can demonstrate it in a credible way.

I hope you will forgive my disbelief, but I've received so many half
baked claims of memory leaks over the years from folks who don't
understand how heaps work in C programs, how to use leak checking
tools and so forth that my first reaction is usually to disregard
them now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yehil at rafael.co.il  Tue Oct  5 17:39:22 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Tue Oct  5 17:45:03 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef
In-Reply-To: <4CAB9979.8050106@pobox.com>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319A@MAILBOXSERVER.rf.local>,
	<4CAB9979.8050106@pobox.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319D@MAILBOXSERVER.rf.local>

Hi
I'm sorry if I was misunderstood, but these are not leaks I'm worried about, but rather I'm trying to understand the memory consumption of the various GDAL calls I use.
I didn't notice any leak, and I trust you test for leaks all the time.
Take for example the first two examples below. These two are the same image, with and without the pyramid (overviews). Why should the call to GetProjectionRef raise the memory of the application by a different amount?

Thanks 
Yehiyam
________________________________________
From: Frank Warmerdam [warmerdam@pobox.com]
Sent: Tuesday, October 05, 2010 11:32 PM
To: Livneh Yehiyam
Cc: gdal-dev
Subject: Re: [gdal-dev] Memory usage for GetProjectionRef

Livneh Yehiyam wrote:
> Hi
> After further investigation I think the situation is more complex, as the results I'm getting depends on the file opened.
> I ran the test with several tiff files and I'm getting completly different results, as described below.
> Also, to rest my mind that this is not a problem with the C# binding, I'v created an identical test using the c interface.
>
> case 1: 580MB tiff, tiled RGB with pyramid:
> GDALOpen increased the memory by 17KB.
> GetProjectionRef increased the memory by an additional 35KB.
> After calling GDALClose, the memory was still 2KB more than before the call to GDALOpen.
>
> case 1: 434MB tiff, tiled RGB without pyramid:
> GDALOpen increased the memory by 40KB.
> GetProjectionRef increased the memory by an additional 0.6KB.
> After calling GDALClose, the memory was still 2KB more than before the call to GDALOpen.
>
> case 3: 420MB tiff, one row per strip RGB without pyramid:
> GDALOpen increased the memory by 186KB.
> GetProjectionRef increased the memory by an additional 0.5KB.
> After calling GDALClose, the memory was still 4KB more than before the call to GDALOpen.
>
> case 4: 2GB tiff, one row per strip palette packbits compression without pyramid:
> GDALOpen increased the memory by 867KB.
> GetProjectionRef increased the memory by an additional 0.1KB.
> After calling GDALClose, the memory was still 9KB more than before the call to GDALOpen.
>
> Beside being very inconsistent (or at least I fail to see the pattern), a few things worry me, and might send me searching for another solution:
> 1. opening large stripped files increases the memory by almost 1MB. Multiplied by hundreds of files this amount to hundreds of MBs.
> 2. for a big tiled pyramid file, even the 35KB increase for just reading the projection might be too much.

Livneh,

I can run "gdalinfo utm.tif" under valgrind, a memory corruption and
leak checker, and confirm that no memory is leaked.  I'm not sure what
you are using to check memory use but I have no reason to trust it.

Note that there are memory buffers allocated and kept around for a
variety of purposes.  Some of these are not freed until cleanup functions
like GDALDestroyDriverManager() are called.  These may include cached
copies of the coordinate system .csv files.

You are welcome to go looking for another solution, but I have little
reason to believe GDAL's GeoTIFF driver leaks memory.  If it does
I would be pleased to fix it if you can demonstrate it in a credible way.

I hope you will forgive my disbelief, but I've received so many half
baked claims of memory leaks over the years from folks who don't
understand how heaps work in C programs, how to use leak checking
tools and so forth that my first reaction is usually to disregard
them now.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************

From warmerdam at pobox.com  Tue Oct  5 18:36:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct  5 18:36:13 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319D@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319A@MAILBOXSERVER.rf.local>,
	<4CAB9979.8050106@pobox.com>
	<C5D1974ECA44D2429ECBC64B967C34C06AEBE2319D@MAILBOXSERVER.rf.local>
Message-ID: <4CABA855.1050100@pobox.com>

Livneh Yehiyam wrote:
> Hi I'm sorry if I was misunderstood, but these are not leaks I'm worried
> about, but rather I'm trying to understand the memory consumption of the
> various GDAL calls I use. I didn't notice any leak, and I trust you test for
> leaks all the time. 

Livney,

We don't check for memory leaks all the time or comprehensively.  But
regular use of GeoTIFF it one of the most frequently leak tested things.

> Take for example the first two examples below. These two
> are the same image, with and without the pyramid (overviews). Why should the
> call to GetProjectionRef raise the memory of the application by a different
> amount?

In the case of pyramids at the end of Open the "last directory" which is
likely the top level of the pyramid will be the active directory.  Calling
GetProjectionRef() causes a switch of context back to the base pyramid level
to fetch the projection tags.   The base directory is typically larger
since it will have the projection, other metadata and bigger tile
offset/size arrays.

If these aren't leaks and the amounts of memory are modest why does it
matter what details are happening internally?  The behavior of the
GeoTIFF driver is fairly complex for some good, and some bad reasons.
Trying to understand the details of it's operation - especially by
observing memory use - is likely to be frustrating.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yehil at rafael.co.il  Wed Oct  6 01:23:20 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed Oct  6 01:24:33 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319E@MAILBOXSERVER.rf.local>

Frank,
I agree that the amount is small per file, but in our application we need to keep thousands of files open, and keep memory consumption to a certain limit.
I have another question regarding the stripped file. When I open a large stripped file, the memory rises by almost 1 MB. I assume this is caused by some sort of caching. When I open hundreds of such files, the amount of memory is multiplied. Can I limit this amount?

Yehiyam
Sent from my mobile


-----------------------------
From: "Frank Warmerdam"
Subject: Re: [gdal-dev] Memory usage for GetProjectionRef
Date: 06 ??????? 2010 00:35


Livneh Yehiyam wrote:
> Hi I'm sorry if I was misunderstood, but these are not leaks I'm worried
> about, but rather I'm trying to understand the memory consumption of the
> various GDAL calls I use. I didn't notice any leak, and I trust you test for
> leaks all the time.

Livney,

We don't check for memory leaks all the time or comprehensively.  But
regular use of GeoTIFF it one of the most frequently leak tested things.

> Take for example the first two examples below. These two
> are the same image, with and without the pyramid (overviews). Why should the
> call to GetProjectionRef raise the memory of the application by a different
> amount?

In the case of pyramids at the end of Open the "last directory" which is
likely the top level of the pyramid will be the active directory.  Calling
GetProjectionRef() causes a switch of context back to the base pyramid level
to fetch the projection tags.   The base directory is typically larger
since it will have the projection, other metadata and bigger tile
offset/size arrays.

If these aren't leaks and the amounts of memory are modest why does it
matter what details are happening internally?  The behavior of the
GeoTIFF driver is fairly complex for some good, and some bad reasons.
Trying to understand the details of it's operation - especially by
observing memory use - is likely to be frustrating.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101006/d36e0c36/attachment-0001.html
From warmerdam at pobox.com  Wed Oct  6 08:34:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct  6 08:34:50 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319E@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319E@MAILBOXSERVER.rf.local>
Message-ID: <4CAC6CE2.8080602@pobox.com>

Livneh Yehiyam wrote:
> Frank,
> I agree that the amount is small per file, but in our application we 
> need to keep thousands of files open, and keep memory consumption to a 
> certain limit.

Livneh,

Ah, I'm starting to grasp your issue.  I will humbly suggest that the idea
of keeping thousands of files open at the same time may be unwise.  If it
really is critical you might need a lighter weight approach than GDAL
or libtiff.

> I have another question regarding the stripped file. When I open a large 
> stripped file, the memory rises by almost 1 MB. I assume this is caused 
> by some sort of caching. When I open hundreds of such files, the amount 
> of memory is multiplied. Can I limit this amount?

Amoung other things the current active directory in a TIFF file will hold
it's strip offsets and strip size values in RAM.  For a large file
(say 50000x50000 with one scanline strips) this would amount to
50000 x 16 or about 800K if the offsets and sizes are 64bit.  This is
all within libtiff.

Also, GDALRasterBand builds arrays of block pointers are creation time
which will initially all be null.  In the above case this would be another
50000 pointers - another 400K on a 64bit system.  There is a special
"subblocking" mechanism in place to prevent this block pointer array
from initially being too large for tiled files but for scanline oriented
files this mechanism does not kick in.  The GDALRasterBand block pointer
memory use will apply to any GDAL raster format that uses the block
cache.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Wed Oct  6 08:38:31 2010
From: joelodom at gmail.com (Joel Odom)
Date: Wed Oct  6 08:38:33 2010
Subject: [gdal-dev] Selecting OGR Driver Based on File Name
Message-ID: <AANLkTimSi+-1EFNXjsycE8t7JYMh_4m_Qo1KR=YhdLxQ@mail.gmail.com>

Is there a canonical way to pick an OGR driver based on a file name or on a
generalized connect string?  (For example, if the file name ends in ".shp",
it would select the Shapefile driver.)  Thanks.


-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101006/a1f19aad/attachment.html
From warmerdam at pobox.com  Wed Oct  6 08:47:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct  6 08:47:51 2010
Subject: [gdal-dev] Selecting OGR Driver Based on File Name
In-Reply-To: <AANLkTimSi+-1EFNXjsycE8t7JYMh_4m_Qo1KR=YhdLxQ@mail.gmail.com>
References: <AANLkTimSi+-1EFNXjsycE8t7JYMh_4m_Qo1KR=YhdLxQ@mail.gmail.com>
Message-ID: <4CAC6FEE.5000606@pobox.com>

Joel Odom wrote:
> Is there a canonical way to pick an OGR driver based on a file name or 
> on a generalized connect string?  (For example, if the file name ends in 
> ".shp", it would select the Shapefile driver.)  Thanks.

Joel,

No.

I really wanted to send this out with just that one word answer, but I
can't help myself but elaborate.

First, I think file format identification based on filename extension is
a terrible idea, and I curse those operating systems that try to build it
into the graphical shell.   Likewise a pox on applications that carry on
this tradition.

Second, there are a number of OGR file formats that have no dependency on
extension.  For example GML, DGN, DXF, PCIDSK.  For these formats any
extension is fine and only letting people pick a file if it has some
particular is offensive to me.

Third, there are lots of database connection formats that aren't extension
based.  Typically these can be identified based on a prefix string like
MYSQL: though not always.

Despite my feelings on this matter, on the GDAL side of the house we actually
provide a metadata item on drivers allowing specification of a preferred
extension which applications can use.  We also have an "identify" mechanism
that will try to efficiently identify what format a file or dataset name
string is without necessarily actually opening it.

Unfortunately, the OGR world is less sophisticated in this regard and lacks
these two mechanisms.  This is one reason I'd like to have a "grand
unification" of GDAL and OGR one day.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Wed Oct  6 09:15:33 2010
From: joelodom at gmail.com (Joel Odom)
Date: Wed Oct  6 09:15:36 2010
Subject: [gdal-dev] Selecting OGR Driver Based on File Name
In-Reply-To: <4CAC6FEE.5000606@pobox.com>
References: <AANLkTimSi+-1EFNXjsycE8t7JYMh_4m_Qo1KR=YhdLxQ@mail.gmail.com>
	<4CAC6FEE.5000606@pobox.com>
Message-ID: <AANLkTi=fb0maT4GjQ4O2JT62eCf6NHitqG6Y6w=jUE7D@mail.gmail.com>

Thanks, Frank.

I understand the purist argument against this, though I think that 90% of
the time you can look at a connection string for a data source and determine
what the output driver should be.  I'd like to see this feature in the
future, but I understand that it would need a caveat that it may not always
work or return the expected result.  Maybe a "GuessOutputDriver(...)"
function would be the appropriate way to name it.




On Wed, Oct 6, 2010 at 8:47 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Joel Odom wrote:
>
>> Is there a canonical way to pick an OGR driver based on a file name or on
>> a generalized connect string?  (For example, if the file name ends in
>> ".shp", it would select the Shapefile driver.)  Thanks.
>>
>
> Joel,
>
> No.
>
> I really wanted to send this out with just that one word answer, but I
> can't help myself but elaborate.
>
> First, I think file format identification based on filename extension is
> a terrible idea, and I curse those operating systems that try to build it
> into the graphical shell.   Likewise a pox on applications that carry on
> this tradition.
>
> Second, there are a number of OGR file formats that have no dependency on
> extension.  For example GML, DGN, DXF, PCIDSK.  For these formats any
> extension is fine and only letting people pick a file if it has some
> particular is offensive to me.
>
> Third, there are lots of database connection formats that aren't extension
> based.  Typically these can be identified based on a prefix string like
> MYSQL: though not always.
>
> Despite my feelings on this matter, on the GDAL side of the house we
> actually
> provide a metadata item on drivers allowing specification of a preferred
> extension which applications can use.  We also have an "identify" mechanism
> that will try to efficiently identify what format a file or dataset name
> string is without necessarily actually opening it.
>
> Unfortunately, the OGR world is less sophisticated in this regard and lacks
> these two mechanisms.  This is one reason I'd like to have a "grand
> unification" of GDAL and OGR one day.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101006/e20b076c/attachment.html
From peifer at gmx.eu  Wed Oct  6 09:20:27 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct  6 09:21:56 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <201010051940.14445.even.rouault@mines-paris.org>
References: <i81e9e$4dc$1@dough.gmane.org>
	<4CA9EC3A.9090409@gmx.eu>	<4CA9F183.3090004@pobox.com>
	<201010051940.14445.even.rouault@mines-paris.org>
Message-ID: <4CAC779B.5060301@gmx.eu>

On 05/10/2010 19:40, Even Rouault wrote:
> Le lundi 04 octobre 2010 17:23:47, Frank Warmerdam a ?crit :
>
>>> gdal_translate, gdalwarp, ...
>>
>> Even,
>>
>> I would suggest "-tap" for "target aligned pixels" to go with "-tr".  I
>> would think that gdalwarp, gdal_rasterize, and perhaps gdal_merge.py and
>> gdalbuildvrt would be appropriate applications to support this switch.
>
> Foks,
>
> I've followed Frank's suggestion. Please test the patch attached to
> http://trac.osgeo.org/gdal/ticket/3772 (applies cleanly on latest trunk,
> r20770) and report if it works as you expect. Then I'll commit it.
>
>>
>> I don't see how it would be appropriate for gdal_translate.
>>
>> Best regards,

I applied the patch and the corner coordinates seem to work fine for 
gdal_rasterize and gdalwarp. I haven't tried gdalbuildvrt. Perhaps 
someone else would like to test it?

On the other hand...

The new, target aligned tiffs do only have NODATA values, which seems to 
be related to ERROR 1:

$ gdal_rasterize --debug on --config GDAL_CACHEMAX 2000 -ot byte 
-a_nodata 0 -co compress=lzw -tr 255 255 -tap -l lu001l_luxembourg -burn 
1 -where CODE=111 lu001l_luxembourg.shp out.tif
OGR: OGROpen(lu001l_luxembourg.shp/0x1978ae0) succeeded as ESRI Shapefile.
GDAL: QuietDelete(out.tif) invoking Delete()
GDAL: GDALOpen(out.tif, this=0x19cbe00) succeeds as GTiff.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(out.tif, this=0x19cbe00)
GDAL: GDALDriver::Create(GTiff,out.tif,224,321,1,Byte,0x1979ab0)
ERROR 1: Type mismatch or improper type of arguments to = operator.
GTiff: Adjusted bytes to write from 8064 to 7392.
GDAL: GDALClose(out.tif, this=0x19caf40)
GDAL: GDALDeregister_GTiff() called.

I am not sure if this new ERROR is related to your patch or some other 
changes which came through checking out -r 20770.

This error message is obvioulsy defined in from ogr/swq_op_general.cpp

Hermann
From dmorissette at mapgears.com  Wed Oct  6 09:33:33 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Oct  6 09:33:39 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <AANLkTinwx91RCEKQs85pRftU7h2QBUZaoYgaQ19jDe3=@mail.gmail.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
	<AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>
	<4CA35023.2060007@mapgears.com>
	<AANLkTi=7NzxMx9YtR5V4pmdpRxyhrCr-+fBut_2siVYY@mail.gmail.com>
	<4CA48614.10209@mapgears.com>
	<AANLkTi=vH4n5LMiH5J31BVQ1XhSrvhkfiK9B-S5-EQ=e@mail.gmail.com>
	<4CA49A0D.9010602@mapgears.com>
	<AANLkTindheXo1JHdyP7TPyvZt1R+Fm3MqXtrOy5PDc9n@mail.gmail.com>
	<4CAB2A7F.2090402@mapgears.com>
	<AANLkTinwx91RCEKQs85pRftU7h2QBUZaoYgaQ19jDe3=@mail.gmail.com>
Message-ID: <4CAC7AAD.7000301@mapgears.com>

Taking this thread back to the list.

The problem here seems to be that the stat() calls fail because the
samba share uses large (64 bit) inode values which are too large for the
32 bit st_ino member of the stat struct.

I have found two possible solutions on the Web, but didn't test either one:

1- Compile your code (all your code and custom libs and not just the
main.c program) with -D_FILE_OFFSET_BITS=64 to enable large file
support. This seems to be the accepted way to fix a program without
changing any code, see for instance http://www.suse.de/~aj/linux_lfs.html

2- One can possibly work around the issue by mounting the smb share with
the "nounix,noserverino" options as suggested here:
http://stackoverflow.com/questions/2438890/cc1plus-error-include-value-too-large-for-defined-data-type-when-compiling-wit


Now, according to http://trac.osgeo.org/gdal/wiki/LargeFileSupport
GDAL/OGR already enables large file support if your OS supports it .
Obviously that did not work in this case.

Question to Frank and other devs: Is it that a specific configure option
has to be used to enable large file support, or that the MITAB source
MUST be updated to use VSIL* calls everywhere?

(I fear it's the latter, but I thought I'd take a chance anyway)

Daniel


Sebastian E. Ovide wrote:
> gis@mapserver:~/data/tmp$ /home/gis/src/mitab-1.7.0/mitab/test_stat
> /home/gis/data/tmp/CA_AbandonedMine.TAB
> VSIStat(/home/gis/data/tmp/CA_AbandonedMine.TAB) = -1 (Value too large
> for defined data type)
> stat(/home/gis/data/tmp/CA_AbandonedMine.TAB) = -1 (Value too large for
> defined data type)
> 
> gis@mapserver:~/data/tmp$ /home/gis/src/mitab-1.7.0/mitab/test_stat
> /home/gis/data/tmp/CA_AbandonedMine_.tab
> VSIStat(/home/gis/data/tmp/CA_AbandonedMine_.tab) = -1 (Value too large
> for defined data type)
> stat(/home/gis/data/tmp/CA_AbandonedMine_.tab) = -1 (Value too large for
> defined data type)
> 
> 
> On Tue, Oct 5, 2010 at 2:39 PM, Daniel Morissette
> <dmorissette@mapgears.com <mailto:dmorissette@mapgears.com>> wrote:
> 
>     Oh, it seems that I missed one character when I copied the little
>     program. The first line should be:
> 
>     #include "cpl_vsi.h"
> 
> 
> 
>     Sebastian E. Ovide wrote:
>     > gis@mapserver:~/src/mitab-1.7.0/mitab$ make test_stat
>     > c++ -c -I../ogr -I. -I.. -I../cpl  -fPIC --no-rtti -fno-exceptions -g
>     > -Wall -DDEBUG -DCPL_LSB test_stat.cpp -o test_stat.o
>     > test_stat.cpp:1: error: expected constructor, destructor, or type
>     > conversion before string constant
>     > make: *** [test_stat.o] Error 1
>     >
>     >
>     > On Thu, Sep 30, 2010 at 3:09 PM, Daniel Morissette
>     > <dmorissette@mapgears.com <mailto:dmorissette@mapgears.com>
>     <mailto:dmorissette@mapgears.com <mailto:dmorissette@mapgears.com>>>
>     wrote:
>     >
>     >     (Taking this off-list, we'll summarize on the list later)
>     >
>     >     Sebastian E. Ovide wrote:
>     >     > done... didn't work...
>     >     >
>     >     > Copied on the same SMB folder with undercase names... both
>     ogrinfo and
>     >     > tab2tab failed.
>     >     > Copied the same files to a local folder and both ogrinfo and
>     tab2tab
>     >     > succeeded...
>     >     >
>     >     > same errors....
>     >     >
>     >
>     >     It may be that stat() is failing for some reason. Can you
>     please test
>     >     with the following little program, save it as test_stat.cpp in the
>     >     mitab-1.x/mitab/ source directory:
>     >
>     >     ---------- mitab-1.x/mitab/test_stat.cpp ---------
>     >     include "cpl_vsi.h"
>     >
>     >     int main(int argc, char *argv[])
>     >     {
>     >        VSIStatBuf  sStatBuf;
>     >        struct stat stat_buf;
>     >        int status;
>     >
>     >        if (argc != 2)
>     >        {
>     >            printf("Usage: %s <filename>\n", argv[0]);
>     >            return -1;
>     >        }
>     >
>     >        status = VSIStat(argv[1], &sStatBuf);
>     >        printf("VSIStat(%s) = %d (%s)\n", argv[1], status ,
>     >     status?strerror(errno):"" );
>     >
>     >        status = stat(argv[1], &stat_buf);
>     >        printf("stat(%s) = %d (%s)\n", argv[1], status,
>     >     status?strerror(errno):"" );
>     >
>     >     }
>     >     -----------------------------------------------
>     >
>     >     And then add the following target (lines) at the end of the
>     GNUmakefile
>     >     in that directory:
>     >
>     >     ---------- mitab-1.x/mitab/GNUmakefile ---------
>     >
>     >     test_stat: test_stat.o $(LIBS)
>     >            $(CXX) $(LFLAGS) -o test_stat test_stat.o $(LIBS) -lm
>     >     -----------------------------------------------
>     >     (Note that the second line start with a real TAB character,
>     not spaces)
>     >
>     >     ... and build it using 'make test_stat'
>     >
>     >     ... and finally try running it against one of your files. e.g.
>     >
>     >      ./test_stat /home/gis/data/tmp/CA_AbandonedMine.MAP
>     >
>     >     and also against the version with lowercase extension:
>     >
>     >      ./test_stat /home/gis/data/tmp/CA_AbandonedMine.map
>     >
>     >     ... and let's see what output we get.
>     >
>     >     Daniel
>     >     --
>     >     Daniel Morissette
>     >     http://www.mapgears.com/
>     >
>     >
>     >
>     >
>     > --
>     > Sebastian E. Ovide
>     >
>     >
>     >
> 
> 
>     --
>     Daniel Morissette
>     http://www.mapgears.com/
> 
> 
> 
> 
> -- 
> Sebastian E. Ovide
> 
> 
> 
> 


-- 
Daniel Morissette
http://www.mapgears.com/
From sagar at spiffymap.net  Wed Oct  6 09:43:33 2010
From: sagar at spiffymap.net (sagar_sahay)
Date: Wed Oct  6 09:43:35 2010
Subject: [gdal-dev] Re: GDAL JAVA problem
In-Reply-To: <1286372404138-5607118.post@n2.nabble.com>
References: <20090112190512.23669.qmail@s466.sureserver.com>
	<1286372404138-5607118.post@n2.nabble.com>
Message-ID: <1286372613744-5607136.post@n2.nabble.com>


Hi Ivan,
 
Can you please help me with compiling the GdalInfo class in Ubuntu with
Netbeans. My problem is that the program is throwing an exception when it
reaches the gdal.AllRegister() method and the exception says the following:
Native library load failed.
java.lang.UnsatisfiedLinkError: no gdaljni in java.library.path
Exception in thread "main" java.lang.UnsatisfiedLinkError:
org.gdal.gdal.gdalJNI.AllRegister()V
        at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
        at org.gdal.gdal.gdal.AllRegister(gdal.java:447)
        at ogr.gdalinfo.main(gdalinfo.java:57)

I would be obliged if you would help me with this.

Thanks,
Sagar

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-JAVA-problem-tp2147356p5607136.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Wed Oct  6 10:03:03 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Oct  6 10:03:05 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmU6IEdEQUwgSkFWQSBwcm9ibGVt?=
Message-ID: <20101006140304.25200.qmail@s466.sureserver.com>

Sagar,

In order to make it to work you NetBeans need to have access to GDAL shared libraries, the GDAL Java wrapper shared libraries and the GDAL.JAR file. I would guess that the GDAL Java wrapper not been in the path would be the usual suspect (libgdalconstjni.so, libgdaljni.so).

Regards,

Ivan


>  -------Original Message-------
>  From: sagar_sahay <sagar@spiffymap.net>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] Re: GDAL JAVA problem
>  Sent: Oct 06 '10 08:43
>  
>  
>  Hi Ivan,
>  
>  Can you please help me with compiling the GdalInfo class in Ubuntu with
>  Netbeans. My problem is that the program is throwing an exception when it
>  reaches the gdal.AllRegister() method and the exception says the following:
>  Native library load failed.
>  java.lang.UnsatisfiedLinkError: no gdaljni in java.library.path
>  Exception in thread "main" java.lang.UnsatisfiedLinkError:
>  org.gdal.gdal.gdalJNI.AllRegister()V
>  ????????at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
>  ????????at org.gdal.gdal.gdal.AllRegister(gdal.java:447)
>  ????????at ogr.gdalinfo.main(gdalinfo.java:57)
>  
>  I would be obliged if you would help me with this.
>  
>  Thanks,
>  Sagar
>  
>  --
>  View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-JAVA-problem-tp2147356p5607136.html
>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From warmerdam at pobox.com  Wed Oct  6 10:07:17 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct  6 10:07:26 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <4CAC7AAD.7000301@mapgears.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
	<AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>
	<4CA35023.2060007@mapgears.com>
	<AANLkTi=7NzxMx9YtR5V4pmdpRxyhrCr-+fBut_2siVYY@mail.gmail.com>
	<4CA48614.10209@mapgears.com>
	<AANLkTi=vH4n5LMiH5J31BVQ1XhSrvhkfiK9B-S5-EQ=e@mail.gmail.com>
	<4CA49A0D.9010602@mapgears.com>
	<AANLkTindheXo1JHdyP7TPyvZt1R+Fm3MqXtrOy5PDc9n@mail.gmail.com>
	<4CAB2A7F.2090402@mapgears.com>
	<AANLkTinwx91RCEKQs85pRftU7h2QBUZaoYgaQ19jDe3=@mail.gmail.com>
	<4CAC7AAD.7000301@mapgears.com>
Message-ID: <4CAC8295.2020404@pobox.com>

Daniel Morissette wrote:
> Now, according to http://trac.osgeo.org/gdal/wiki/LargeFileSupport
> GDAL/OGR already enables large file support if your OS supports it .
> Obviously that did not work in this case.

Daniel,

The above topic says that GDAL supports reading large files, it doesn't
necessarily mean that _LARGEFILE_SOURCE is defined.   I *think* I accomplish
reading large files on linux by using a particular 64bit API in
gdal/port/cpl_vsil_unix_stdio_64.cpp though it is a bit unclear exactly
what is getting defined.

On my system I see cpl_conf.h contains "#define UNIX_STDIO_64 1" and:

/* Define to name of 64bit fopen function */
#define VSI_FOPEN64 fopen64

/* Define to name of 64bit fseek func */
#define VSI_FSEEK64 fseeko64

/* Define to name of 64bit ftell func */
#define VSI_FTELL64 ftello64

/* Define to 1, if you have 64 bit STDIO API */
#define VSI_LARGE_API_SUPPORTED 1

/* Define to 1, if you have LARGEFILE64_SOURCE */
/* #undef VSI_NEED_LARGEFILE64_SOURCE */

/* Define to name of 64bit stat function */
#define VSI_STAT64 stat64

/* Define to name of 64bit stat structure */
#define VSI_STAT64_T stat64

It seems to me if VSIStatL() is being used on linux large inode
values shouldn't be a problem.  Perhaps I missing something.  Or
perhaps the MITAB code is using VSIStat() instead?  If so, perhaps
it would suffice to upgrade it to use VSIStatL()?

> Question to Frank and other devs: Is it that a specific configure option
> has to be used to enable large file support, or that the MITAB source
> MUST be updated to use VSIL* calls everywhere?
> 
> (I fear it's the latter, but I thought I'd take a chance anyway)

I think it is the latter.  You should upgrade to use VSI*L everywhere in
MITAB.  This may also be important to allow access to mapinfo files in
non-traditional file systems (like /vsimem/, and the newly popular
/vsicurl/).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sagar at spiffymap.net  Wed Oct  6 10:14:42 2010
From: sagar at spiffymap.net (sagar_sahay)
Date: Wed Oct  6 10:14:47 2010
Subject: [gdal-dev] Re: GDAL JAVA problem
In-Reply-To: <20101006140304.25200.qmail@s466.sureserver.com>
References: <20090112190512.23669.qmail@s466.sureserver.com>
	<20101006140304.25200.qmail@s466.sureserver.com>
Message-ID: <1286374482538-5607231.post@n2.nabble.com>


Ivan,
 
I have specified -Djava.library.path="~/home/gdal/gdal-1.7.2/swig/java". Is
there any other way to include the files which you had mentioned in the
reply. If so please let me know.

Thanks,
Sagar
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-JAVA-problem-tp2147356p5607231.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From peifer at gmx.eu  Wed Oct  6 10:20:55 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct  6 10:22:17 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CAC779B.5060301@gmx.eu>
References: <i81e9e$4dc$1@dough.gmane.org>	<4CA9EC3A.9090409@gmx.eu>	<4CA9F183.3090004@pobox.com>	<201010051940.14445.even.rouault@mines-paris.org>
	<4CAC779B.5060301@gmx.eu>
Message-ID: <4CAC85C7.7020005@gmx.eu>

On 06/10/2010 15:20, Hermann Peifer wrote:
>
> On the other hand...
>
> The new, target aligned tiffs do only have NODATA values, which seems to
> be related to ERROR 1:
>
> $ gdal_rasterize --debug on --config GDAL_CACHEMAX 2000 -ot byte
> -a_nodata 0 -co compress=lzw -tr 255 255 -tap -l lu001l_luxembourg -burn
> 1 -where CODE=111 lu001l_luxembourg.shp out.tif
> OGR: OGROpen(lu001l_luxembourg.shp/0x1978ae0) succeeded as ESRI Shapefile.
> GDAL: QuietDelete(out.tif) invoking Delete()
> GDAL: GDALOpen(out.tif, this=0x19cbe00) succeeds as GTiff.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(out.tif, this=0x19cbe00)
> GDAL: GDALDriver::Create(GTiff,out.tif,224,321,1,Byte,0x1979ab0)
> ERROR 1: Type mismatch or improper type of arguments to = operator.
> GTiff: Adjusted bytes to write from 8064 to 7392.
> GDAL: GDALClose(out.tif, this=0x19caf40)
> GDAL: GDALDeregister_GTiff() called.
>
> I am not sure if this new ERROR is related to your patch or some other
> changes which came through checking out -r 20770.
>

I see: ERROR 1 can be avoided by using: -where CODE=\'50000\' (CODE is a 
string field). In any case: I rasterize via a shell script and I did not 
get the same error when running the same script last week.

Hermann

From warmerdam at pobox.com  Wed Oct  6 10:34:35 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct  6 10:34:43 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CAC85C7.7020005@gmx.eu>
References: <i81e9e$4dc$1@dough.gmane.org>	<4CA9EC3A.9090409@gmx.eu>
	<4CA9F183.3090004@pobox.com>
	<201010051940.14445.even.rouault@mines-paris.org>
	<4CAC779B.5060301@gmx.eu> <4CAC85C7.7020005@gmx.eu>
Message-ID: <4CAC88FB.7090808@pobox.com>

Hermann Peifer wrote:
>> $ gdal_rasterize --debug on --config GDAL_CACHEMAX 2000 -ot byte
>> -a_nodata 0 -co compress=lzw -tr 255 255 -tap -l lu001l_luxembourg -burn
>> 1 -where CODE=111 lu001l_luxembourg.shp out.tif
>> OGR: OGROpen(lu001l_luxembourg.shp/0x1978ae0) succeeded as ESRI 
>> Shapefile.
>> GDAL: QuietDelete(out.tif) invoking Delete()
>> GDAL: GDALOpen(out.tif, this=0x19cbe00) succeeds as GTiff.
>> GDAL: GDALDefaultOverviews::OverviewScan()
>> GDAL: GDALClose(out.tif, this=0x19cbe00)
>> GDAL: GDALDriver::Create(GTiff,out.tif,224,321,1,Byte,0x1979ab0)
>> ERROR 1: Type mismatch or improper type of arguments to = operator.
...
> I see: ERROR 1 can be avoided by using: -where CODE=\'50000\' (CODE is a 
> string field). In any case: I rasterize via a shell script and I did not 
> get the same error when running the same script last week.

Herman,

Were you using GDAL 1.7 last week?  The above is related to the OGR SQL
upgrade - it is now more picky about types in expressions.   I may need
to consider some sort of adjustment.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sagar at spiffymap.net  Wed Oct  6 10:35:38 2010
From: sagar at spiffymap.net (sagar_sahay)
Date: Wed Oct  6 10:35:40 2010
Subject: [gdal-dev] Re: GDAL JAVA problem
In-Reply-To: <1286374482538-5607231.post@n2.nabble.com>
References: <20090112190512.23669.qmail@s466.sureserver.com>
	<20101006140304.25200.qmail@s466.sureserver.com>
	<1286374482538-5607231.post@n2.nabble.com>
Message-ID: <1286375738595-5607309.post@n2.nabble.com>


After tweaking the path variable I got this exception:

Native library load failed.
java.lang.UnsatisfiedLinkError:
/home/gdal/gdal-1.7.2/swig/java/libgdaljni.so:
/home/gdal/gdal-1.7.2/swig/java/libgdaljni.so: wrong ELF class: ELFCLASS64
(Possible cause: architecture word width mismatch)
Exception in thread "main" java.lang.UnsatisfiedLinkError:
org.gdal.gdal.gdalJNI.AllRegister()V
        at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
        at org.gdal.gdal.gdal.AllRegister(gdal.java:447)
        at ogr.gdalinfo.main(gdalinfo.java:57)
Java Result: 1

Please Help.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-JAVA-problem-tp2147356p5607309.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From peifer at gmx.eu  Wed Oct  6 10:40:36 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct  6 10:41:57 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CAC88FB.7090808@pobox.com>
References: <i81e9e$4dc$1@dough.gmane.org>	<4CA9EC3A.9090409@gmx.eu>	<4CA9F183.3090004@pobox.com>	<201010051940.14445.even.rouault@mines-paris.org>	<4CAC779B.5060301@gmx.eu>
	<4CAC85C7.7020005@gmx.eu> <4CAC88FB.7090808@pobox.com>
Message-ID: <4CAC8A64.1080005@gmx.eu>

On 06/10/2010 16:34, Frank Warmerdam wrote:
> Hermann Peifer wrote:
>>> $ gdal_rasterize --debug on --config GDAL_CACHEMAX 2000 -ot byte
>>> -a_nodata 0 -co compress=lzw -tr 255 255 -tap -l lu001l_luxembourg -burn
>>> 1 -where CODE=111 lu001l_luxembourg.shp out.tif
>>> OGR: OGROpen(lu001l_luxembourg.shp/0x1978ae0) succeeded as ESRI
>>> Shapefile.
>>> GDAL: QuietDelete(out.tif) invoking Delete()
>>> GDAL: GDALOpen(out.tif, this=0x19cbe00) succeeds as GTiff.
>>> GDAL: GDALDefaultOverviews::OverviewScan()
>>> GDAL: GDALClose(out.tif, this=0x19cbe00)
>>> GDAL: GDALDriver::Create(GTiff,out.tif,224,321,1,Byte,0x1979ab0)
>>> ERROR 1: Type mismatch or improper type of arguments to = operator.
> ...
>> I see: ERROR 1 can be avoided by using: -where CODE=\'50000\' (CODE is
>> a string field). In any case: I rasterize via a shell script and I did
>> not get the same error when running the same script last week.
>
> Herman,
>
> Were you using GDAL 1.7 last week?

No, but an earlier version of 1.8dev (a few months old, perhaps)

Hermann

From matt at klaric.com  Wed Oct  6 10:43:24 2010
From: matt at klaric.com (Matt Klaric)
Date: Wed Oct  6 10:43:27 2010
Subject: [gdal-dev] Memory usage for GetProjectionRef
In-Reply-To: <4CAC6CE2.8080602@pobox.com>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEBE2319E@MAILBOXSERVER.rf.local>
	<4CAC6CE2.8080602@pobox.com>
Message-ID: <AANLkTimucyT==BG24Q5smnEu0aQEZA3wiB7eSjYyNjvY@mail.gmail.com>

On Wed, Oct 6, 2010 at 7:34 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Livneh Yehiyam wrote:
>
>> I agree that the amount is small per file, but in our application we need
>> to keep thousands of files open, and keep memory consumption to a certain
>> limit.
>>
>
> Ah, I'm starting to grasp your issue.  I will humbly suggest that the idea
> of keeping thousands of files open at the same time may be unwise.  If it
> really is critical you might need a lighter weight approach than GDAL
> or libtiff.
>

Livneh--

Perhaps you could describe the problem that you're trying to tackle and we
could see if there is an alternative way to solve it without having
thousands of files open at a time.  Without knowing exactly what your
problem is, it seems like using a GDAL VRT (
http://www.gdal.org/gdal_vrttut.html) file might be one approach to consider
in lieu of having thousands of files open.

--Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101006/117db37d/attachment-0001.html
From gregcorradini at gmail.com  Wed Oct  6 11:40:07 2010
From: gregcorradini at gmail.com (gregcorradini)
Date: Wed Oct  6 11:40:11 2010
Subject: [gdal-dev] Re: GDAL easy_install problem
In-Reply-To: <AANLkTikK3e9SrUM3_JhT930DR-S4Sxr6qo5gbN49sFSv@mail.gmail.com>
References: <AANLkTik=WGuO8-LgRpgHC7YpGz9yX2uBw+9aZ+12Nf6t@mail.gmail.com>
	<AANLkTikK3e9SrUM3_JhT930DR-S4Sxr6qo5gbN49sFSv@mail.gmail.com>
Message-ID: <1286379607257-5607588.post@n2.nabble.com>


Thanks for the help Chaitanya,

Sorry about the late response. I saw the temporary fix with swq.h. I'm
confused about one aspect of this workaround though. It says that I should
copy the swq.h file into the gdal installed tree. So this is the step after
compiling gdal-1.7.2 ? For some reason it seems to me that I'd want to
replace/overwrite the swq.h file with the download BEFORE I build. I tried
both, but with no luck. So I'm missing something obvious. Anyway, if I'm
replacing the swq.h file after install then I'm having trouble finding the
correct installed tree. Is it somewhere in /usr/local/lib? 

Thanks again




-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-easy-install-problem-tp5577829p5607588.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From eadam at co.lincoln.or.us  Wed Oct  6 12:42:14 2010
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Wed Oct  6 12:43:06 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
Message-ID: <4CAC4476020000CE0003C805@mail.co.lincoln.or.us>

The results of -tap are what I expect, pixels aligned with 0,0.  Although I have a separate question at the end.

Prior to the patch I ran this:
 gdal_rasterize -tr 100 100 -a Elevation -l town town.shp townrasterb.tif
and got this:
gdalinfo townrasterb.tif 
...
Origin = (7267911.066051597706974,512434.991065477312077)
Pixel Size = (100.000000000000000,-100.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 7267911.066,  512434.991) (124d 6'49.77"W, 45d 0'53.75"N)
Lower Left  ( 7267911.066,  290634.991) (124d 4'33.15"W, 44d24'25.68"N)
Upper Right ( 7392811.066,  512434.991) (123d37'52.26"W, 45d 1'45.22"N)
Lower Right ( 7392811.066,  290634.991) (123d35'53.84"W, 44d25'16.61"N)
Center      ( 7330361.066,  401534.991) (123d51'17.02"W, 44d43' 6.24"N)
Band 1 Block=1249x1 Type=Float64, ColorInterp=Gray

After the patch I ran this:
gdal_rasterize -tr 100 100 -tap -a Elevation -l town town.shp townrasterd.tif
and got this:
gdalinfo townrasterd.tif 
...
Origin = (7267900.000000000000000,512500.000000000000000)
Pixel Size = (100.000000000000000,-100.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 7267900.000,  512500.000) (124d 6'49.97"W, 45d 0'54.39"N)
Lower Left  ( 7267900.000,  290600.000) (124d 4'33.28"W, 44d24'25.33"N)
Upper Right ( 7392900.000,  512500.000) (123d37'51.05"W, 45d 1'45.90"N)
Lower Right ( 7392900.000,  290600.000) (123d35'52.60"W, 44d25'16.29"N)
Center      ( 7330400.000,  401550.000) (123d51'16.49"W, 44d43' 6.41"N)
Band 1 Block=1250x1 Type=Float64, ColorInterp=Gray

town.shp is a point layer with 12 points, 11 of those points have values in -a Elevation (1 is null), and in the output tif, 9 pixels have values.  The far south and far east points do not have corresponding pixels with values.  If this needs review, I can open a ticket and attach a very small example.  

I include this info in this thread since that is the case before -tap and after -tap I get the same thing, except the far east point has a corresponding pixel with -tap.  This probably doesn't have anything (much) to do with -tap.   

Thanks, Eli

>>> Hermann Peifer <peifer@gmx.eu> 10/06/10 7:43 AM >>>
On 06/10/2010 16:34, Frank Warmerdam wrote:
> Hermann Peifer wrote:
>>> $ gdal_rasterize --debug on --config GDAL_CACHEMAX 2000 -ot byte
>>> -a_nodata 0 -co compress=lzw -tr 255 255 -tap -l lu001l_luxembourg -burn
>>> 1 -where CODE=111 lu001l_luxembourg.shp out.tif
>>> OGR: OGROpen(lu001l_luxembourg.shp/0x1978ae0) succeeded as ESRI
>>> Shapefile.
>>> GDAL: QuietDelete(out.tif) invoking Delete()
>>> GDAL: GDALOpen(out.tif, this=0x19cbe00) succeeds as GTiff.
>>> GDAL: GDALDefaultOverviews::OverviewScan()
>>> GDAL: GDALClose(out.tif, this=0x19cbe00)
>>> GDAL: GDALDriver::Create(GTiff,out.tif,224,321,1,Byte,0x1979ab0)
>>> ERROR 1: Type mismatch or improper type of arguments to = operator.
> ...
>> I see: ERROR 1 can be avoided by using: -where CODE=\'50000\' (CODE is
>> a string field). In any case: I rasterize via a shell script and I did
>> not get the same error when running the same script last week.
>
> Herman,
>
> Were you using GDAL 1.7 last week?

No, but an earlier version of 1.8dev (a few months old, perhaps)

Hermann

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Wed Oct  6 13:35:56 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct  6 13:36:06 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <4CAC4476020000CE0003C805@mail.co.lincoln.or.us>
References: <4CAC4476020000CE0003C805@mail.co.lincoln.or.us>
Message-ID: <201010061935.56545.even.rouault@mines-paris.org>

Le mercredi 06 octobre 2010 18:42:14, Eli Adam a ?crit :
> The results of -tap are what I expect, pixels aligned with 0,0.  Although I
> have a separate question at the end.

ok, I've applied the patch in trunk in r20778

> 
> Prior to the patch I ran this:
>  gdal_rasterize -tr 100 100 -a Elevation -l town town.shp townrasterb.tif
> and got this:
> gdalinfo townrasterb.tif
> ...
> Origin = (7267911.066051597706974,512434.991065477312077)
> Pixel Size = (100.000000000000000,-100.000000000000000)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 7267911.066,  512434.991) (124d 6'49.77"W, 45d 0'53.75"N)
> Lower Left  ( 7267911.066,  290634.991) (124d 4'33.15"W, 44d24'25.68"N)
> Upper Right ( 7392811.066,  512434.991) (123d37'52.26"W, 45d 1'45.22"N)
> Lower Right ( 7392811.066,  290634.991) (123d35'53.84"W, 44d25'16.61"N)
> Center      ( 7330361.066,  401534.991) (123d51'17.02"W, 44d43' 6.24"N)
> Band 1 Block=1249x1 Type=Float64, ColorInterp=Gray
> 
> After the patch I ran this:
> gdal_rasterize -tr 100 100 -tap -a Elevation -l town town.shp
> townrasterd.tif and got this:
> gdalinfo townrasterd.tif
> ...
> Origin = (7267900.000000000000000,512500.000000000000000)
> Pixel Size = (100.000000000000000,-100.000000000000000)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 7267900.000,  512500.000) (124d 6'49.97"W, 45d 0'54.39"N)
> Lower Left  ( 7267900.000,  290600.000) (124d 4'33.28"W, 44d24'25.33"N)
> Upper Right ( 7392900.000,  512500.000) (123d37'51.05"W, 45d 1'45.90"N)
> Lower Right ( 7392900.000,  290600.000) (123d35'52.60"W, 44d25'16.29"N)
> Center      ( 7330400.000,  401550.000) (123d51'16.49"W, 44d43' 6.41"N)
> Band 1 Block=1250x1 Type=Float64, ColorInterp=Gray
> 
> town.shp is a point layer with 12 points, 11 of those points have values in
> -a Elevation (1 is null), and in the output tif, 9 pixels have values. 
> The far south and far east points do not have corresponding pixels with
> values.  If this needs review, I can open a ticket and attach a very small
> example.
> 
> I include this info in this thread since that is the case before -tap and
> after -tap I get the same thing, except the far east point has a
> corresponding pixel with -tap.  This probably doesn't have anything (much)
> to do with -tap.
> 

Yes, I'm pretty confident this has nothing to do with -tap. More likely an 
issue with the rasterize code itself. You can probably file a ticket with data 
and command on how to reproduce to keep track of the issue.

From even.rouault at mines-paris.org  Wed Oct  6 13:37:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct  6 13:37:50 2010
Subject: [gdal-dev] Re: GDAL JAVA problem
In-Reply-To: <1286375738595-5607309.post@n2.nabble.com>
References: <20090112190512.23669.qmail@s466.sureserver.com>
	<1286374482538-5607231.post@n2.nabble.com>
	<1286375738595-5607309.post@n2.nabble.com>
Message-ID: <201010061937.42078.even.rouault@mines-paris.org>

Le mercredi 06 octobre 2010 16:35:38, sagar_sahay a ?crit :
> After tweaking the path variable I got this exception:
> 
> Native library load failed.
> java.lang.UnsatisfiedLinkError:
> /home/gdal/gdal-1.7.2/swig/java/libgdaljni.so:
> /home/gdal/gdal-1.7.2/swig/java/libgdaljni.so: wrong ELF class: ELFCLASS64
> (Possible cause: architecture word width mismatch)
> Exception in thread "main" java.lang.UnsatisfiedLinkError:
> org.gdal.gdal.gdalJNI.AllRegister()V
>         at org.gdal.gdal.gdalJNI.AllRegister(Native Method)
>         at org.gdal.gdal.gdal.AllRegister(gdal.java:447)
>         at ogr.gdalinfo.main(gdalinfo.java:57)
> Java Result: 1
> 
> Please Help.

Well, by looking at the error, it looks like you're on a 64bit Linux, so the 
binding library has been compiled as 64bit, which is fine. So my guess is that 
you're running a 32bit JVM or 64bit JVM in 32bit mode.
From kmayall at gmail.com  Wed Oct  6 13:48:53 2010
From: kmayall at gmail.com (kmayall)
Date: Wed Oct  6 13:48:55 2010
Subject: [gdal-dev] corner coords in tif vs ecw
Message-ID: <1286387333709-5608144.post@n2.nabble.com>


I used gdal_translate to convert a geotiff to an ecw file.

C:\Program Files\FWTools2.4.7>gdal_translate -of ECW f:\test\mytif.tif
f:\test\myecw.ecw
Input file size is 2353, 2353
0...10...20...30...40...50...60...70...80...90...100 - done.

However, the corner coordinates are different between the two files.
The tiff uses values from the coordinate system, while the ecw seems to just
use the tile dimensions.
I'm not sure if there is something different in how the two formats store
that data, or if there was an option I didn't use.  Any insight is
appreciated.  gdalinfo results for the tif and ecw are below.

C:\Program Files\FWTools2.4.7>gdalinfo f:\gisdata\test\mytif.tif
Driver: GTiff/GeoTIFF
Files: f:\gisdata\test\mytif.tif
Size is 2353, 2353
Coordinate System is:
PROJCS["Bermuda_2000_National_Grid",
    GEOGCS["GCS_Bermuda_2000",
        DATUM["Bermuda_2000",
            SPHEROID["WGS_1984",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",32],
    PARAMETER["central_meridian",-64.75],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",550000],
    PARAMETER["false_northing",100000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (535999.787499999980000,129999.862499999990000)
Pixel Size = (0.425000000000000,-0.425000000000000)
Metadata:
  TIFFTAG_SOFTWARE=ERDAS IMAGINE
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  535999.787,  129999.862) ( 64d53'54.96"W, 32d16'13.63"N)
Lower Left  (  535999.787,  128999.837) ( 64d53'54.90"W, 32d15'41.16"N)
Upper Right (  536999.813,  129999.862) ( 64d53'16.74"W, 32d16'13.67"N)
Lower Right (  536999.813,  128999.837) ( 64d53'16.70"W, 32d15'41.20"N)
Center      (  536499.800,  129499.850) ( 64d53'35.82"W, 32d15'57.42"N)
Band 1 Block=2353x8 Type=Byte, ColorInterp=Red
Band 2 Block=2353x8 Type=Byte, ColorInterp=Green
Band 3 Block=2353x8 Type=Byte, ColorInterp=Blue

C:\Program Files\FWTools2.4.7>gdalinfo f:\gisdata\test\myecw.ecw
Driver: ECW/ERMapper Compressed Wavelets
Files: f:\gisdata\test\myecw.ecw
       f:\gisdata\test\myecw.ecw.aux.xml
Size is 2353, 2353
Coordinate System is:
PROJCS["Bermuda_2000_National_Grid",
    GEOGCS["GCS_Bermuda_2000",
        DATUM["Bermuda_2000",
            SPHEROID["WGS_1984",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",32],
    PARAMETER["central_meridian",-64.75],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",550000],
    PARAMETER["false_northing",100000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Metadata:
  TIFFTAG_SOFTWARE=ERDAS IMAGINE
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 2353.0)
Upper Right ( 2353.0,    0.0)
Lower Right ( 2353.0, 2353.0)
Center      ( 1176.5, 1176.5)
Band 1 Block=2353x1 Type=Byte, ColorInterp=Red
  Overviews: arbitrary
Band 2 Block=2353x1 Type=Byte, ColorInterp=Green
  Overviews: arbitrary
Band 3 Block=2353x1 Type=Byte, ColorInterp=Blue
  Overviews: arbitrary


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-corner-coords-in-tif-vs-ecw-tp5608144p5608144.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan at sanchezortega.es  Wed Oct  6 14:01:43 2010
From: ivan at sanchezortega.es (=?utf-8?q?Iv=C3=A1n_S=C3=A1nchez_Ortega?=)
Date: Wed Oct  6 14:01:50 2010
Subject: [gdal-dev] Selecting OGR Driver Based on File Name
In-Reply-To: <AANLkTimSi+-1EFNXjsycE8t7JYMh_4m_Qo1KR=YhdLxQ@mail.gmail.com>
References: <AANLkTimSi+-1EFNXjsycE8t7JYMh_4m_Qo1KR=YhdLxQ@mail.gmail.com>
Message-ID: <201010062001.44365.ivan@sanchezortega.es>

On Wednesday 06 October 2010 14:38:31 Joel Odom wrote:
> Is there a canonical way to pick an OGR driver based on a file name or on a
> generalized connect string?

No, but you can do a generic open, as in:

datasource = ogr.Open(filename)


Cheers,
-- 
----------------------------------
Iv?n S?nchez Ortega <ivan@sanchezortega.es>

http://ivan.sanchezortega.es
MSN:i_eat_s_p_a_m_for_breakfast@hotmail.com
Jabber:ivansanchez@jabber.org ; ivansanchez@kdetalk.net
IRC: ivansanchez @ OFTC & freenode
From alexander.bruy at gmail.com  Wed Oct  6 14:06:18 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Wed Oct  6 14:06:20 2010
Subject: [gdal-dev] OGR and Delphi. OGRReleaseDatasource problem
Message-ID: <AANLkTinCdx_294pcpgiWwfOy1ND-wR7rGR-YZ5NYucHW@mail.gmail.com>

Hi,

I've develop some GIS tools with Delphi and want to use GDAL/OGR. I can't find
any existing Pascal bindings, so I start to write them by myself. Now
I have ObjectPascal
(Delphi and FreePascal compatible) bindings for OGR.

When I compile and run small test application (simply open a shape,
display number of features
and table shema) I find that OGRReleaseDatasource return error code 6
instead OGR_ERRNONE.
Why? Maybe there are bugs in test application or in my bindings? Can
anyone look at this?

Pascal bindings and test program attached.

Thanks

-- 
Alexander Bruy
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogr_pas.tar.bz2
Type: application/x-bzip2
Size: 12121 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101006/4e135397/ogr_pas.tar-0001.bz2
From alexander.bruy at gmail.com  Wed Oct  6 14:17:29 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Wed Oct  6 14:17:31 2010
Subject: [gdal-dev] SQLite/SpatiaLite driver capabilities
Message-ID: <AANLkTimGnfZJ64a5XGW55WuGxRzZ+anhnmYA5X3Xyif+@mail.gmail.com>

Hi,

Seems, that OGR reports wrong capabilities for SQLite/SpatiaLite layers.
At least for DeleteFeature capability. I always get FALSE when test this
capability, but I can delete features from layer passing to the ExecuteSQL
method DELETE statement.

Is this bug or feature?

Thanks

-- 
Alexander Bruy
From even.rouault at mines-paris.org  Wed Oct  6 14:23:30 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct  6 14:23:39 2010
Subject: [gdal-dev] SQLite/SpatiaLite driver capabilities
In-Reply-To: <AANLkTimGnfZJ64a5XGW55WuGxRzZ+anhnmYA5X3Xyif+@mail.gmail.com>
References: <AANLkTimGnfZJ64a5XGW55WuGxRzZ+anhnmYA5X3Xyif+@mail.gmail.com>
Message-ID: <201010062023.30551.even.rouault@mines-paris.org>

Le mercredi 06 octobre 2010 20:17:29, Alexander Bruy a ?crit :
> Hi,
> 
> Seems, that OGR reports wrong capabilities for SQLite/SpatiaLite layers.
> At least for DeleteFeature capability. I always get FALSE when test this
> capability, but I can delete features from layer passing to the ExecuteSQL
> method DELETE statement.

There are sometimes inconsistencies between actual capabilities and reported 
capabilities, which is a bug then.

But in that case, it is not a bug. the DeleteFeature capability must be 
reported if the layer has an implementation of OGRLayer::DeleteFeature(), 
which the SQlite driver has not. The fact that it the SQLite SQL engine can 
process DELETE statements doesn't influence that fact.

> 
> Is this bug or feature?

So this is a "feature"

> 
> Thanks
From warmerdam at pobox.com  Wed Oct  6 15:00:17 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct  6 15:00:24 2010
Subject: [gdal-dev] OGR and Delphi. OGRReleaseDatasource problem
In-Reply-To: <AANLkTinCdx_294pcpgiWwfOy1ND-wR7rGR-YZ5NYucHW@mail.gmail.com>
References: <AANLkTinCdx_294pcpgiWwfOy1ND-wR7rGR-YZ5NYucHW@mail.gmail.com>
Message-ID: <4CACC741.5020301@pobox.com>

Alexander Bruy wrote:
> Hi,
> 
> I've develop some GIS tools with Delphi and want to use GDAL/OGR. I can't find
> any existing Pascal bindings, so I start to write them by myself. Now
> I have ObjectPascal
> (Delphi and FreePascal compatible) bindings for OGR.
> 
> When I compile and run small test application (simply open a shape,
> display number of features
> and table shema) I find that OGRReleaseDatasource return error code 6
> instead OGR_ERRNONE.
> Why? Maybe there are bugs in test application or in my bindings? Can
> anyone look at this?

Alexander,

OGRReleaseDatasource() is appropriate for use with OGROpenShared().
If you are just calling OGROpen() you should instead call
OGR_DS_Destroy().   OGRReleaseDataSource() will return an error if
called with a non-shared datasource.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alexander.bruy at gmail.com  Wed Oct  6 15:58:07 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Wed Oct  6 15:58:09 2010
Subject: [gdal-dev] SQLite/SpatiaLite driver capabilities
In-Reply-To: <201010062023.30551.even.rouault@mines-paris.org>
References: <AANLkTimGnfZJ64a5XGW55WuGxRzZ+anhnmYA5X3Xyif+@mail.gmail.com>
	<201010062023.30551.even.rouault@mines-paris.org>
Message-ID: <AANLkTimzZVuwf6WVS_fZUUEoNKW=PoLNd9rQzpKroX8o@mail.gmail.com>

Hi Even,

thanks for clarification

2010/10/6 Even Rouault <even.rouault@mines-paris.org>:
> Le mercredi 06 octobre 2010 20:17:29, Alexander Bruy a ?crit :
>> Hi,
>>
>> Seems, that OGR reports wrong capabilities for SQLite/SpatiaLite layers.
>> At least for DeleteFeature capability. I always get FALSE when test this
>> capability, but I can delete features from layer passing to the ExecuteSQL
>> method DELETE statement.
>
> There are sometimes inconsistencies between actual capabilities and reported
> capabilities, which is a bug then.
>
> But in that case, it is not a bug. the DeleteFeature capability must be
> reported if the layer has an implementation of OGRLayer::DeleteFeature(),
> which the SQlite driver has not. The fact that it the SQLite SQL engine can
> process DELETE statements doesn't influence that fact.
>
>>
>> Is this bug or feature?
>
> So this is a "feature"

-- 
Alexander Bruy
From peifer at gmx.eu  Thu Oct  7 02:38:00 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Oct  7 02:38:07 2010
Subject: [gdal-dev] Re: gdal_rasterize -tr and -te
In-Reply-To: <201010061935.56545.even.rouault@mines-paris.org>
References: <4CAC4476020000CE0003C805@mail.co.lincoln.or.us>
	<201010061935.56545.even.rouault@mines-paris.org>
Message-ID: <4CAD6AC8.9000904@gmx.eu>

  On 06/10/2010 19:35, Even Rouault wrote:
> Le mercredi 06 octobre 2010 18:42:14, Eli Adam a ?crit :
>> The results of -tap are what I expect, pixels aligned with 0,0.  Although I
>> have a separate question at the end.
> ok, I've applied the patch in trunk in r20778

Thanks.

Yesterday evening, I was thinking if there could be some use cases where 
an optional argument to the -tap switch would make sense. This argument 
would be a numerical value, typically integral multiples of the -tr 
value. Example: I gdal_rasterize with 100m resolution, but I want my 
target extent to be aligned to 1000m. I do admit that this could indeed 
be: "a bit too specialized requirement... "

Hermann
From sagar at spiffymap.net  Thu Oct  7 05:03:36 2010
From: sagar at spiffymap.net (sagar_sahay)
Date: Thu Oct  7 05:03:40 2010
Subject: [gdal-dev] Re: GDAL JAVA problem
In-Reply-To: <201010061937.42078.even.rouault@mines-paris.org>
References: <20090112190512.23669.qmail@s466.sureserver.com>
	<20101006140304.25200.qmail@s466.sureserver.com>
	<1286374482538-5607231.post@n2.nabble.com>
	<1286375738595-5607309.post@n2.nabble.com>
	<201010061937.42078.even.rouault@mines-paris.org>
Message-ID: <1286442216701-5610554.post@n2.nabble.com>


Hi Even,
  
Thanks for that, that error has been resolved. But the following warning as
keeps coming , would you know what this means:
Native library load failed.
java.lang.UnsatisfiedLinkError: no gdaljni in java.library.path

I am loading all the .so files individually 
                       
System.load("/home/gdal/gdal-1.7.2/swig/java/libgdalconstjni.so");
                       
System.load("/home/gdal/gdal-1.7.2/swig/java/libgdaljni.so");
                       
System.load("/home/gdal/gdal-1.7.2/swig/java/libogrjni.so");
                       
System.load("/home/gdal/gdal-1.7.2/swig/java/libosrjni.so");

But still the error is coming. Please help if you can.

Thanks again,
Sagar
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-JAVA-problem-tp2147356p5610554.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From traderboy at yahoo.com  Thu Oct  7 08:36:21 2010
From: traderboy at yahoo.com (Joe Franklin)
Date: Thu Oct  7 08:38:52 2010
Subject: [gdal-dev] ArcGIS Stretch type Standard deviations in GDAL?
Message-ID: <944752.86942.qm@web114408.mail.gq1.yahoo.com>

How can I use GDAL to convert a TIFF displayed in ArcMap using a standard deviation stretch of 2 to a TIFF (or other format) I can display using Mapserver/OpenLayers?  I can use the raster Export function in ArcMap, but I have about 100 TIFFs in 50 .mxds so I'd like to process all the TIFFs using a batch file.  I did find a -stddev option in the gdalenhance utility, but it gives an error that it's not recognized (using version 1.7.2)  

I also looked for an option in Mapserver to pass the std dev value to the GDAL driver before rendering, but I haven't found one.

I'm new working with rasters, so hopefully this makes sense.






      

From bhudspeth at edac.unm.edu  Thu Oct  7 10:50:05 2010
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Thu Oct  7 10:55:59 2010
Subject: [gdal-dev] Problems using gdal python binding 'createcopy' function
Message-ID: <1286463005.1461.5.camel@wilbur-desktop>

Hello,

I am trying to copy a GeoTiff to an AAIGrid file using the Python
osgeo-gdal CreateCopy() function. The metadata associated with the
function indicates that one can output a Float32-formatted file, but I
am having trouble figuring out exactly how the output format is
specified in a call to the function....

What I have is:

src_filename='input.tif'
src_ds=gdal.Open(src_filename)
dst_ds_format="AAIGrid"
dst_driver=gdal.GetDriverByName(dst_ds_format)
dst_filename='output.asc'
dst_ds_pm25=dst_driver.CreateCopy(dst_filename,src_ds,0,['Type=Float32'])
		    
The way I have written the output data type argument obviously doesn't
work... Can anyone help me with this?

Thanks much, 

Bill

From warmerdam at pobox.com  Thu Oct  7 11:05:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct  7 11:05:35 2010
Subject: [gdal-dev] Problems using gdal python binding 'createcopy'
	function
In-Reply-To: <1286463005.1461.5.camel@wilbur-desktop>
References: <1286463005.1461.5.camel@wilbur-desktop>
Message-ID: <4CADE1B7.8090509@pobox.com>

William Hudspeth wrote:
> Hello,
> 
> I am trying to copy a GeoTiff to an AAIGrid file using the Python
> osgeo-gdal CreateCopy() function. The metadata associated with the
> function indicates that one can output a Float32-formatted file, but I
> am having trouble figuring out exactly how the output format is
> specified in a call to the function....
> 
> What I have is:
> 
> src_filename='input.tif'
> src_ds=gdal.Open(src_filename)
> dst_ds_format="AAIGrid"
> dst_driver=gdal.GetDriverByName(dst_ds_format)
> dst_filename='output.asc'
> dst_ds_pm25=dst_driver.CreateCopy(dst_filename,src_ds,0,['Type=Float32'])
> 		    
> The way I have written the output data type argument obviously doesn't
> work... Can anyone help me with this?

Bill,

There is no way to make the AAIGRID CreateCopy() produce a floating
point output except to give it a floating point input.  Applications like
gdal_translate which supports an '-ot' output type flag accomplish this
by interposing a VRT dataset between the original CreateCopy that takes care
of the pixel type adaption.   But this is a hard approach to use in Python.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bhudspeth at edac.unm.edu  Thu Oct  7 12:00:30 2010
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Thu Oct  7 12:00:32 2010
Subject: [gdal-dev] Problems using gdal python binding 'createcopy' function
Message-ID: <1286467230.1461.9.camel@wilbur-desktop>

Hi Frank,

Thanks for responding. I have tried the following,


gdal_translate -ot Float32 -of AAIGrid src.tif dst.asc


Only to get an AAIGrid in Int16 format....??

From wbhk at unm.edu  Thu Oct  7 11:34:03 2010
From: wbhk at unm.edu (William Hudspeth)
Date: Thu Oct  7 12:04:10 2010
Subject: [gdal-dev] Problems using gdal python binding 'createcopy' function
In-Reply-To: 1286463005.1461.5.camel@wilbur-desktop
Message-ID: <1286465643.1461.7.camel@wilbur-desktop>

Hi Frank,

Thanks for responding. I just tried:

gdal_translate -ot Float32 -of AAIGrid input.tif output.asc

and got an Int16 AAIGrid (?)

Bill


From warmerdam at pobox.com  Thu Oct  7 12:30:32 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct  7 12:30:41 2010
Subject: [gdal-dev] Problems using gdal python binding 'createcopy'
	function
In-Reply-To: <1286467230.1461.9.camel@wilbur-desktop>
References: <1286467230.1461.9.camel@wilbur-desktop>
Message-ID: <4CADF5A8.2060901@pobox.com>

William Hudspeth wrote:
> Hi Frank,
> 
> Thanks for responding. I have tried the following,
> 
> 
> gdal_translate -ot Float32 -of AAIGrid src.tif dst.asc
> 
> 
> Only to get an AAIGrid in Int16 format....??

Bill,

I see that by default floating point values in the AAIGRID CreateCopy
code are written as "%6.20g" which just produces an integer representation
if the values are integers.  I tried this which did produce floating point
output values since the original pixels were rescaled in the 0.0 to 1.0 range.

gdal_translate utm.tif out.grd -of AAIGRID -ot Float32 -scale 0 255 0 1

(the exceptions were still the integer values of 0 and 1)

I see you can manually control the formatting with the DECIMAL_PRECISION
creation option.

eg.

gdal_translate utm.tif out.grd -of AAIGRID -ot Float32 -co DECIMAL_PRECISION=3

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Steve.Toutant at inspq.qc.ca  Thu Oct  7 12:33:35 2010
From: Steve.Toutant at inspq.qc.ca (Steve.Toutant@inspq.qc.ca)
Date: Thu Oct  7 12:49:00 2010
Subject: [gdal-dev] ogr and postgres
Message-ID: <OFFF58496F.7AE55961-ON852577B5.005AF767-852577B5.005AF76B@isn.rtss.qc.ca>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101007/01051354/attachment.html
From jrepetto at free.fr  Thu Oct  7 13:14:36 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Oct  7 13:15:25 2010
Subject: [gdal-dev] corner coords in tif vs ecw
In-Reply-To: <1286387333709-5608144.post@n2.nabble.com>
References: <1286387333709-5608144.post@n2.nabble.com>
Message-ID: <4CADFFFC.8080305@free.fr>

On 10/06/10 19:48, kmayall wrote:
>
> I used gdal_translate to convert a geotiff to an ecw file.
>
> However, the corner coordinates are different between the two files.
> The tiff uses values from the coordinate system, while the ecw seems to just
> use the tile dimensions.
> I'm not sure if there is something different in how the two formats store
> that data, or if there was an option I didn't use.  Any insight is
> appreciated.  gdalinfo results for the tif and ecw are below.
>

Hello,

I noticed similar problems, and I think this may be a bug in gdalinfo.
What does "ECW Header Editor" report about your ECW file ?

Regards,
Jean-Claude
From sagar at spiffymap.net  Fri Oct  8 05:12:49 2010
From: sagar at spiffymap.net (sagar_sahay)
Date: Fri Oct  8 05:12:53 2010
Subject: [gdal-dev] Modification to the ogr2ogr.java
Message-ID: <1286529169396-5614291.post@n2.nabble.com>


Hi,
 
I am trying to modify the ogr2ogr.java found at the link
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/ogr2ogr.java ,
to cater to multiple ".shp" files. The problem which I am facing is that
there are too many System.exit(1) statements which makes it a little
difficult to understand the working of the code properly. I am trying to
execute a command of the form :
 ogr2ogr -t_srs WGS84 -s_srs ESRI::NaturalFeature_Area.prj osmnf.shp
NaturalFeature_Area.shp

Any advice on this topic is welcomed.

Thanks
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Modification-to-the-ogr2ogr-java-tp5614291p5614291.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Fri Oct  8 06:27:45 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Oct  8 06:27:47 2010
Subject: [gdal-dev] Modification to the ogr2ogr.java
In-Reply-To: <1286529169396-5614291.post@n2.nabble.com>
References: <1286529169396-5614291.post@n2.nabble.com>
Message-ID: <AANLkTinV=nsx55qExptVNoMjz3s2f8zUMJtNg5=tAGKA@mail.gmail.com>

Sagar,

You can specify the directory containing the shapefiles as the source
datasource. If you want to select .shp files specifically, mention them
without the extension at the end of the command.

You don't have to specify the source SRS if the file name of the .prj file
is the same as the .shp file.

On Fri, Oct 8, 2010 at 2:42 PM, sagar_sahay <sagar@spiffymap.net> wrote:

>
> Hi,
>
> I am trying to modify the ogr2ogr.java found at the link
> http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/ogr2ogr.java,
> to cater to multiple ".shp" files. The problem which I am facing is that
> there are too many System.exit(1) statements which makes it a little
> difficult to understand the working of the code properly. I am trying to
> execute a command of the form :
>  ogr2ogr -t_srs WGS84 -s_srs ESRI::NaturalFeature_Area.prj osmnf.shp
> NaturalFeature_Area.shp
>
> Any advice on this topic is welcomed.
>
> Thanks
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Modification-to-the-ogr2ogr-java-tp5614291p5614291.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101008/43787bf7/attachment.html
From ahmettemiz88 at gmail.com  Fri Oct  8 06:31:48 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Oct  8 06:31:51 2010
Subject: [gdal-dev] overlaying a map on another
Message-ID: <AANLkTinC3ODH_=1Brp8gaqpbKSZEVd2tDLzyFbdQMg6W@mail.gmail.com>

hello

how can I overlay one map on another ?

regards
From sagar at spiffymap.net  Fri Oct  8 06:50:07 2010
From: sagar at spiffymap.net (sagar_sahay)
Date: Fri Oct  8 06:50:11 2010
Subject: [gdal-dev] Re: Modification to the ogr2ogr.java
In-Reply-To: <AANLkTinV=nsx55qExptVNoMjz3s2f8zUMJtNg5=tAGKA@mail.gmail.com>
References: <1286529169396-5614291.post@n2.nabble.com>
	<AANLkTinV=nsx55qExptVNoMjz3s2f8zUMJtNg5=tAGKA@mail.gmail.com>
Message-ID: <1286535007145-5614501.post@n2.nabble.com>


Hi Chaitanya,

Thanks for that, would you happen to know what is the work being done by the
function TranslateLayer in the code referenced in my previous message. I ask
this because after execution of this function my program displays the error 
and then exists the system. To stop this from happening I have just
commented the line and now the program works fine.

>From what I understand from your suggestion is this I should give the source
folder where all the ".shp" files are as input to the command something like
this:
ogr2ogr -t_srs WGS84 -s_srs ESRI::/home/shp/ osmnf.shp
NaturalFeature_Area.shp

How do i specify it to take only "*.shp" files  from the directory
specified.

I am writing the java code on netbeans for this , I have introduced a for
loop which constantly updates the following variables:

 String fileName=children[index].replace(".shp",".prj");
                      String args1[]=new String[6];
                      args1[0]= "-t_srs";
                      args1[1]= "WGS84";
                      args1[2]= "-s_srs";
                      args1[3]= "ESRI::/home/sagar/meridian data/"+fileName;
                      args1[4]= "/home/osmnf/";
                      args1[5]= "/home/meridian data/"+children[index];

Please share your views.

Thanks again.

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Modification-to-the-ogr2ogr-java-tp5614291p5614501.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jorge.arevalo at deimos-space.com  Fri Oct  8 09:05:07 2010
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Oct  8 09:16:52 2010
Subject: [gdal-dev] Question about raster interleaving
Message-ID: <AANLkTi=Dg_Syomxwh+fe5pj0Nb09D1wvNRYs_etZsuWu@mail.gmail.com>

Hi everybody,

If I'm implementing a driver for a given raster structure, that always
has BSQ format, has sense to implement the IRasterIO for Dataset
and/or Rasterband derived classes?

Thanks in advance.

Best regards,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
From jzl5325 at psu.edu  Fri Oct  8 10:11:46 2010
From: jzl5325 at psu.edu (Jay L.)
Date: Fri Oct  8 10:11:51 2010
Subject: [gdal-dev] OSR Projection Error 6
Message-ID: <AANLkTikeZ3dLOs-Sp8TjsMCXS8Mx43D9YBEL=WJ2SP54@mail.gmail.com>

Morning all,

I am struggling to get a coordinate transformation to work in a python
script.  Below is the code snippet that is causing the following error:

"ERROR 6: No translation for 'Azimuthal_Equidistant' to PROJ.4 format is
known."

I am pulling the input spatial reference from the input shapefile
(Mars_2000), defining the custom projection (custom in that it is centered
on a point), and then trying to transform to the custom projection.

Create a new shapefile and copy, one geometry at a time, from the input to
> the new output
> ...
> #Define the new projection to ortho centered on the crater
>     azimuthal =
> "PROJCS['Azimuthal_Equidistant',GEOGCS['GCS_Mars_2000',DATUM['D_Mars_2000',SPHEROID['Mars_2000_IAU_IAG',3396190.0,169.8944472236118]],PRIMEM['Reference_Meridian',0.0],UNIT['Degree',0.0174532925199433]],PROJECTION['Azimuthal_Equidistant'],PARAMETER['False_Easting',0.0],PARAMETER['False_Northing',0.0],PARAMETER['Central_Meridian',%f],PARAMETER['Latitude_Of_Origin',%f],UNIT['Meter',1.0]]"
> %(x,y)
>
>     intermediate_SR.ImportFromWkt(azimuthal)
>
>     #Transform the point from the spatial input reference to an azimuthal
> projection centered on the point
>     outputGeom.TransformTo(intermediate_SR)
> ...
>
Do I need to define the coordinate system differently or am I making an
error somewhere else?

Thanks!
Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101008/aad464f6/attachment.html
From warmerdam at pobox.com  Fri Oct  8 10:16:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct  8 10:16:49 2010
Subject: [gdal-dev] overlaying a map on another
In-Reply-To: <AANLkTinC3ODH_=1Brp8gaqpbKSZEVd2tDLzyFbdQMg6W@mail.gmail.com>
References: <AANLkTinC3ODH_=1Brp8gaqpbKSZEVd2tDLzyFbdQMg6W@mail.gmail.com>
Message-ID: <4CAF27CA.1080906@pobox.com>

ahmet temiz wrote:
> hello
> 
> how can I overlay one map on another ?

Ahmet,

If you want a meaningful response you really need to make a more serious
effort in asking the question.  Are you wanting to overlap raster on raster?
Vector on vector?  In a particular application?  If raster, do you want
to treat some pixels as transparent when overlaying?  Are you wanting to do
this strictly as batch processing with gdal/ogr tools, or are you really
interested in an application environment like mapserver or qgis?

I could write a ten page answer to your email and still never come near to
the use case you actually had in mind when you asked.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From GISxperts at web.de  Fri Oct  8 11:32:50 2010
From: GISxperts at web.de (Hannes Reuter)
Date: Fri Oct  8 11:52:37 2010
Subject: [gdal-dev] gdal python bindings for 1.7 - where to find
Message-ID: <1388117108.547903.1286551970975.JavaMail.fmail@mwmweb018>

Dear GDALer (probably mostly Howard)

I saw that the old python bindings are gone(http://trac.osgeo.org/gdal/ticket/3286),
however I'm wondering if there are still python bindings for 1.7. in egg or msi installer format prepared?

At http://pypi.python.org/pypi/GDAL/ only source is provided,
while http://pypi.python.org/pypi/GDAL/1.6.1 contains bindings for different python versions etc.
Are you planning to create new bindings and where do I find them for 2.x ?
Or do we need to compile them individually ? Is there a manual how to do that.. looked rather difficult for me on a first look. 

Hannes

PS: I would like to try the 1.7 bindings due to the fact that I python script linked against 1.6 seems to crash by using readasarray on a windows7/vista maschine with the latest stable numpy and scipy at least for me. I would like to see if 1.7 is better in that sense before filling an error to the trac system.






--
Dr. Hannes Isaak Reuter
gisxperts gbr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Hannes.vcf
Type: text/x-vcard
Size: 286 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101008/78d82112/Hannes.vcf
From warmerdam at pobox.com  Fri Oct  8 13:16:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct  8 13:16:42 2010
Subject: [gdal-dev] minizip "zip" support, and the kmlsuperoverlay driver
Message-ID: <4CAF51F5.7000801@pobox.com>

Folks,

In recent days I have brought the "create a zip file" side of minizip
into gdal/port.  We already used minizip code for unzipping them - for
instance in the /vsizip/ virtual file system handler.

I have not yet incorporated support for creating zip files via the
/vsizip/ virtual file system handler, and I'm not sure if I will.  In the
meantime I have created a simplified CPL API to the zip code, published
in cpl_conv.h.  I did this for use in MapServer to zip up multi-file
WFS GetFeature responses.

Now that this is here, I have also taken the liberty of updating the
kmlsuperoverlay driver to use it and made the kmlsuperoverlay driver a
"built by default" driver since it no longer has external dependencies.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at gmail.com  Fri Oct  8 13:53:53 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Oct  8 13:54:04 2010
Subject: [gdal-dev] Unicode filenames
Message-ID: <4CAF5AB1.80401@gmail.com>

Frank,

Is RFC 30 supposed to mean that using GDALOpen can be used with utf8 
filenames? Are the changes made in trunk already?

I'm testing on Windows and I observe that opening a file using utf8 
filename does not succeed due to OpenInfo creation failing (the filename 
is still in utf8 at that point) and thus no driver picks up the file. 
The code never gets to VSIWin32FilesystemHandler where recode to ucs2 
happens.

Regards,

Ari

From warmerdam at pobox.com  Fri Oct  8 16:12:02 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct  8 16:12:15 2010
Subject: [gdal-dev] Unicode filenames
In-Reply-To: <4CAF5AB1.80401@gmail.com>
References: <4CAF5AB1.80401@gmail.com>
Message-ID: <4CAF7B12.90304@pobox.com>

Ari Jolma wrote:
> Frank,
> 
> Is RFC 30 supposed to mean that using GDALOpen can be used with utf8 
> filenames? Are the changes made in trunk already?

Ari,

Yes, and Yes.

> I'm testing on Windows and I observe that opening a file using utf8 
> filename does not succeed due to OpenInfo creation failing (the filename 
> is still in utf8 at that point) and thus no driver picks up the file. 

I don't understand this.  Why would a utf-8 string interfere with the
creation of the GDALOpenInfo object?

> The code never gets to VSIWin32FilesystemHandler where recode to ucs2 
> happens.

Very early in the GDALOpenInfo constructor a call is made to VSIStatExL()
which should go to VSIWin32FilesystemHandler::Stat() in cpl_vsil_win32.cpp.
I don't know why this would not happen.

Thereafter the file is opened with VSIFOpen() which is implemented
in cpl_vsisimple.cpp and on WIN32 uses _wfopen() on a wchar_t string.

I presume you are using a visual studio build, not some other windows
compiler - right?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Oct  8 21:30:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct  8 21:30:34 2010
Subject: [gdal-dev] Question about raster interleaving
In-Reply-To: <AANLkTi=Dg_Syomxwh+fe5pj0Nb09D1wvNRYs_etZsuWu@mail.gmail.com>
References: <AANLkTi=Dg_Syomxwh+fe5pj0Nb09D1wvNRYs_etZsuWu@mail.gmail.com>
Message-ID: <4CAFC5B3.8040308@pobox.com>

Jorge Ar?valo wrote:
> Hi everybody,
> 
> If I'm implementing a driver for a given raster structure, that always
> has BSQ format, has sense to implement the IRasterIO for Dataset
> and/or Rasterband derived classes?

Jorge,

If the data is band interleaved there is little value in implementing
the GDALDataset::IRasterIO() method.  In theory you might be able to
provide an optimized override for GDALRasterBand::IRasterIO().  Are
you implementing your bands by deriving from RawRasterBand?  If so,
there is already an (in theory) optimized GDALRasterBand::IRasterIO()
override.

In any event, I find there are only rare circumstances where IRasterIO
overrides are worth the trouble of implmentation as opposed to providing
simple block oriented access.  So think about what your needs are and
remember that implementing IRasterIO() properly is relatively hard.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at gmail.com  Sat Oct  9 03:39:48 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Oct  9 03:40:08 2010
Subject: [gdal-dev] Unicode filenames
In-Reply-To: <4CAF7B12.90304@pobox.com>
References: <4CAF5AB1.80401@gmail.com> <4CAF7B12.90304@pobox.com>
Message-ID: <4CB01C44.3020403@gmail.com>

  8.10.2010 23:12, Frank Warmerdam kirjoitti:
>
> Very early in the GDALOpenInfo constructor a call is made to VSIStatExL()
> which should go to VSIWin32FilesystemHandler::Stat() in 
> cpl_vsil_win32.cpp.
> I don't know why this would not happen.
>
> Thereafter the file is opened with VSIFOpen() which is implemented
> in cpl_vsisimple.cpp and on WIN32 uses _wfopen() on a wchar_t string.
>
> I presume you are using a visual studio build, not some other windows
> compiler - right?

Ah, it's this again: http://trac.osgeo.org/gdal/ticket/2649

I'm using MinGW, which uses MS runtime and thus _MSC_VER is, IMO, *not* 
the correct macro to check, as the wide functions are available in the 
runtime, which can be used by other compilers also. Changing the 
_MSC_VER test to defined(MSVCRT) in cpl_vsil_win32.cpp and adding 
-D__MSVCRT_VERSION__=0x0601 to GDALMake.opt(1) fixes the problem for MinGW.

I'm not sure which would be the correct fix. Does MSVC define 
__MSVCRT_VERSION__?

That also seems to make the GTK+ and Perl interface work ok, i.e., a 
GTK+ stock file open dialog starts to work for data with skandinavian 
characters in the filename. :)

Regards,

Ari

(1) http://lists.fedoraproject.org/pipermail/mingw/2009-March/000957.html

>
> Best regards,

From ari.jolma at gmail.com  Sat Oct  9 08:13:56 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Oct  9 08:13:58 2010
Subject: [gdal-dev] kmlsuperoverlay breaks the trunk
Message-ID: <4CB05C84.9010408@gmail.com>

make[2]: Entering directory `/home/ajolma/dev/gdal/frmts/kmlsuperoverlay'
make[2]: *** No rule to make target `../o/kmlsuperoverlaydataset.o', needed by `install-obj'.  Stop.
make[2]: Leaving directory `/home/ajolma/dev/gdal/frmts/kmlsuperoverlay'
make[1]: *** [kmlsuperoverlay-install-obj] Error 2

Ari


From antonio.valentino at tiscali.it  Sat Oct  9 10:49:39 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sat Oct  9 10:55:48 2010
Subject: [gdal-dev] kmlsuperoverlay breaks the trunk
In-Reply-To: <4CB05C84.9010408@gmail.com>
References: <4CB05C84.9010408@gmail.com>
Message-ID: <20101009164939.2848fa8c@mac1>

Hi Ari,
the following mini-patch should fix the issue:


Index: gdal/frmts/kmlsuperoverlay/GNUmakefile
===================================================================
--- gdal/frmts/kmlsuperoverlay/GNUmakefile	(revisione 20798)
+++ gdal/frmts/kmlsuperoverlay/GNUmakefile	(copia locale)
@@ -10,4 +10,5 @@
 clean:
 	rm -f *.o $(O_OBJ)
 
-install-obj:	$(O_OBJ)
+#install-obj:	$(O_OBJ)
+install-obj:	$(O_OBJ:.o=.$(OBJ_EXT))



ciao



Il giorno Sat, 09 Oct 2010 15:13:56 +0300
Ari Jolma <ari.jolma@gmail.com> ha scritto:

> make[2]: Entering directory
> `/home/ajolma/dev/gdal/frmts/kmlsuperoverlay' make[2]: *** No rule to
> make target `../o/kmlsuperoverlaydataset.o', needed by
> `install-obj'.  Stop. make[2]: Leaving directory
> `/home/ajolma/dev/gdal/frmts/kmlsuperoverlay' make[1]: ***
> [kmlsuperoverlay-install-obj] Error 2
> 
> Ari
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Antonio Valentino
From jorge.arevalo at deimos-space.com  Sat Oct  9 10:58:15 2010
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Sat Oct  9 10:58:43 2010
Subject: [gdal-dev] Question about raster interleaving
In-Reply-To: <4CAFC5B3.8040308@pobox.com>
References: <AANLkTi=Dg_Syomxwh+fe5pj0Nb09D1wvNRYs_etZsuWu@mail.gmail.com>
	<4CAFC5B3.8040308@pobox.com>
Message-ID: <AANLkTik1H+VBbE8EUbyTT3p1BherDAx9Cbj9TJbqYa9A@mail.gmail.com>

Hi Frank

2010/10/9 Frank Warmerdam <warmerdam@pobox.com>:
> Jorge Ar?valo wrote:
>>
>> Hi everybody,
>>
>> If I'm implementing a driver for a given raster structure, that always
>> has BSQ format, has sense to implement the IRasterIO for Dataset
>> and/or Rasterband derived classes?
>
> Jorge,
>
> If the data is band interleaved there is little value in implementing
> the GDALDataset::IRasterIO() method. ?In theory you might be able to
> provide an optimized override for GDALRasterBand::IRasterIO(). ?Are
> you implementing your bands by deriving from RawRasterBand? ?If so,
> there is already an (in theory) optimized GDALRasterBand::IRasterIO()
> override.
>

No, my bands derive from GDALRasterBand, directly


> In any event, I find there are only rare circumstances where IRasterIO
> overrides are worth the trouble of implementation as opposed to providing
> simple block oriented access. ?So think about what your needs are and
> remember that implementing IRasterIO() properly is relatively hard.
>

Yes, I think you're right. I'm improving GDAL PostGIS Raster driver
(formerly WKT Raster), but I think the block oriented access is the
right one. At the end, PostGIS raster files are chunks of data (one
chunk = one raster table row), individually georeferenced, that may be
related forming a bigger raster coverage (one raster per table) or not
(one raster per row). That fits in the block scheme.

Many thanks,

Best regards,
Jorge

> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>



-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
From gregcorradini at gmail.com  Sun Oct 10 00:44:30 2010
From: gregcorradini at gmail.com (gregcorradini)
Date: Sun Oct 10 00:44:32 2010
Subject: [gdal-dev] Re: GDAL easy_install problem
In-Reply-To: <1286379607257-5607588.post@n2.nabble.com>
References: <AANLkTik=WGuO8-LgRpgHC7YpGz9yX2uBw+9aZ+12Nf6t@mail.gmail.com>
	<AANLkTikK3e9SrUM3_JhT930DR-S4Sxr6qo5gbN49sFSv@mail.gmail.com>
	<1286379607257-5607588.post@n2.nabble.com>
Message-ID: <1286685870941-5619701.post@n2.nabble.com>


It seems like swq.h belongs in /usr/local/include folder to fix the easy
install problem.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-easy-install-problem-tp5577829p5619701.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From gregcorradini at gmail.com  Sun Oct 10 21:04:32 2010
From: gregcorradini at gmail.com (gregcorradini)
Date: Sun Oct 10 21:04:34 2010
Subject: [gdal-dev] gdal python bindings for 1.7 - where to find
In-Reply-To: <1388117108.547903.1286551970975.JavaMail.fmail@mwmweb018>
References: <1388117108.547903.1286551970975.JavaMail.fmail@mwmweb018>
Message-ID: <1286759072031-5621683.post@n2.nabble.com>


Hey Hannes,
I think most of your questions can be answered here
http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Have you seen this? It
covers how to install the Python bindings for GDAL 1.7.x and Python 2.x. I'd
pay attention to the Dependencies subhead -- there's a few libraries and dev
headers you need installed including setuptools
http://pypi.python.org/pypi/setuptools.

Also, there's currently a problem with the easy install method described
above. Here is the ticket and the workaround for that
http://trac.osgeo.org/gdal/ticket/3468#comment:10. Notice that swq.h should
be put in /usr/local/include to get easy install to work (at least that's
what i did. I also had to put set my PYTHONPATH to point to that install).
But everything has been working for me ;) 

hope that helps.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdal-python-bindings-for-1-7-where-to-find-tp5615414p5621683.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Sun Oct 10 23:03:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Oct 10 23:03:48 2010
Subject: [gdal-dev] kmlsuperoverlay breaks the trunk
In-Reply-To: <20101009164939.2848fa8c@mac1>
References: <4CB05C84.9010408@gmail.com> <20101009164939.2848fa8c@mac1>
Message-ID: <4CB27E89.4050500@pobox.com>

Antonio Valentino wrote:
> Hi Ari,
> the following mini-patch should fix the issue:
> 
> 
> Index: gdal/frmts/kmlsuperoverlay/GNUmakefile
> ===================================================================
> --- gdal/frmts/kmlsuperoverlay/GNUmakefile	(revisione 20798)
> +++ gdal/frmts/kmlsuperoverlay/GNUmakefile	(copia locale)
> @@ -10,4 +10,5 @@
>  clean:
>  	rm -f *.o $(O_OBJ)
>  
> -install-obj:	$(O_OBJ)
> +#install-obj:	$(O_OBJ)
> +install-obj:	$(O_OBJ:.o=.$(OBJ_EXT))

Antonio / Ari,

Thanks for identifying the issue.  I have applied a variation of this
change (http://trac.osgeo.org/gdal/changeset/20807).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Oct 10 23:05:45 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Oct 10 23:05:53 2010
Subject: [gdal-dev] OSR Projection Error 6
In-Reply-To: <AANLkTikeZ3dLOs-Sp8TjsMCXS8Mx43D9YBEL=WJ2SP54@mail.gmail.com>
References: <AANLkTikeZ3dLOs-Sp8TjsMCXS8Mx43D9YBEL=WJ2SP54@mail.gmail.com>
Message-ID: <4CB27F09.8080604@pobox.com>

Jay L. wrote:
> Morning all,
> 
> I am struggling to get a coordinate transformation to work in a python 
> script.  Below is the code snippet that is causing the following error:
> 
> "ERROR 6: No translation for 'Azimuthal_Equidistant' to PROJ.4 format is 
> known."
> 
> I am pulling the input spatial reference from the input shapefile 
> (Mars_2000), defining the custom projection (custom in that it is 
> centered on a point), and then trying to transform to the custom projection.
> 
>     Create a new shapefile and copy, one geometry at a time, from the
>     input to the new output
>     ...
>     #Define the new projection to ortho centered on the crater
>         azimuthal =
>     "PROJCS['Azimuthal_Equidistant',GEOGCS['GCS_Mars_2000',DATUM['D_Mars_2000',SPHEROID['Mars_2000_IAU_IAG',3396190.0,169.8944472236118]],PRIMEM['Reference_Meridian',0.0],UNIT['Degree',0.0174532925199433]],PROJECTION['Azimuthal_Equidistant'],PARAMETER['False_Easting',0.0],PARAMETER['False_Northing',0.0],PARAMETER['Central_Meridian',%f],PARAMETER['Latitude_Of_Origin',%f],UNIT['Meter',1.0]]"
>     %(x,y)
>        
>         intermediate_SR.ImportFromWkt(azimuthal)
>        
>         #Transform the point from the spatial input reference to an
>     azimuthal projection centered on the point
>         outputGeom.TransformTo(intermediate_SR)
>     ...
> 
> Do I need to define the coordinate system differently or am I making an 
> error somewhere else?

Jay,

The problem is that this is an ESRI projection engine string.  These
are similar but sometimes incompatible with OGR WKT.  After importing
it, call morphFromESRI().

eg.
          intermediate_SR.ImportFromWkt(azimuthal)
          intermediate_SR.MorphFromESRI()

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From antonio.valentino at tiscali.it  Mon Oct 11 03:07:51 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Oct 11 03:07:56 2010
Subject: [gdal-dev] gdal python bindings for 1.7 - where to find
In-Reply-To: <1286759072031-5621683.post@n2.nabble.com>
References: <1388117108.547903.1286551970975.JavaMail.fmail@mwmweb018>
	<1286759072031-5621683.post@n2.nabble.com>
Message-ID: <20101011090751.2aa57d52@asigrid01>

Hi Greg,

Il giorno Sun, 10 Oct 2010 18:04:32 -0700 (PDT)
gregcorradini <gregcorradini@gmail.com> ha scritto:

> 
> Hey Hannes,
> I think most of your questions can be answered here
> http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Have you seen this?
> It covers how to install the Python bindings for GDAL 1.7.x and
> Python 2.x. I'd pay attention to the Dependencies subhead -- there's
> a few libraries and dev headers you need installed including
> setuptools http://pypi.python.org/pypi/setuptools.

[cut]

do you know where can I find pre-build binaries for win32 of GDAL?
It seems that only 1.6.x series is available at

http://download.osgeo.org/gdal/win32/


best regards

-- 
Antonio Valentino
From sebastian.ovide at gmail.com  Mon Oct 11 05:28:55 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Mon Oct 11 05:29:16 2010
Subject: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
Message-ID: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>

Hi All,

Importing shapes into Oracle I'm getting not valid geometrie: ORA-13349 and
ORA-13356.

No problem importing the same shapes into PostGIS.

any ideas ?

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/bc6062e7/attachment.html
From rajjad at gmail.com  Mon Oct 11 05:32:56 2010
From: rajjad at gmail.com (Imran Rajjad)
Date: Mon Oct 11 05:32:58 2010
Subject: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
In-Reply-To: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>
References: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>
Message-ID: <AANLkTi=BzqJVNLhErbAf59kPO5xpvFFGXPhZWyOENUQk@mail.gmail.com>

Hi Sebastian

did you verify geometries ? there is a tool in esri arcmap that
validates and fixes geometries, I kind of had the same problem but I
applied correction through arcMap , and it worked.

regards.
Imran

On Mon, Oct 11, 2010 at 2:28 PM, Sebastian E. Ovide
<sebastian.ovide@gmail.com> wrote:
> Hi All,
> Importing shapes into Oracle I'm getting not valid geometrie:?ORA-13349 and
> ORA-13356.
> No problem importing the same shapes into PostGIS.
> any ideas ?
>
> --
> Sebastian E. Ovide
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
I.R
From micklesh at gmail.com  Mon Oct 11 05:39:40 2010
From: micklesh at gmail.com (Michael Shishcu)
Date: Mon Oct 11 05:40:04 2010
Subject: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
In-Reply-To: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>
References: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>
Message-ID: <AANLkTimZNiuw=NSNaV_e8=HdZ3VS0JHJ2fTd92f7FSv4@mail.gmail.com>

Also, this can be caused by too big  tolerance of your coordinates, check
this in your metadata
regards, michael

On 11 October 2010 12:28, Sebastian E. Ovide <sebastian.ovide@gmail.com>wrote:

> Hi All,
>
> Importing shapes into Oracle I'm getting not valid geometrie: ORA-13349 and
> ORA-13356.
>
> No problem importing the same shapes into PostGIS.
>
> any ideas ?
>
> --
> Sebastian E. Ovide
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/962e0c69/attachment.html
From sebastian.ovide at gmail.com  Mon Oct 11 06:13:14 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Mon Oct 11 06:13:39 2010
Subject: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
In-Reply-To: <AANLkTimZNiuw=NSNaV_e8=HdZ3VS0JHJ2fTd92f7FSv4@mail.gmail.com>
References: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>
	<AANLkTimZNiuw=NSNaV_e8=HdZ3VS0JHJ2fTd92f7FSv4@mail.gmail.com>
Message-ID: <AANLkTi=NmYRvoPJA6=LWjKDPBgBL30TyTUA1VcyLzYT7@mail.gmail.com>

you mean before importing the shapes ?

On Mon, Oct 11, 2010 at 10:39 AM, Michael Shishcu <micklesh@gmail.com>wrote:

> Also, this can be caused by too big  tolerance of your coordinates, check
> this in your metadata
> regards, michael
>
> On 11 October 2010 12:28, Sebastian E. Ovide <sebastian.ovide@gmail.com>wrote:
>
>> Hi All,
>>
>> Importing shapes into Oracle I'm getting not valid geometrie: ORA-13349
>> and ORA-13356.
>>
>> No problem importing the same shapes into PostGIS.
>>
>> any ideas ?
>>
>> --
>> Sebastian E. Ovide
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/f24e4efc/attachment.html
From micklesh at gmail.com  Mon Oct 11 06:29:30 2010
From: micklesh at gmail.com (Michael Shishcu)
Date: Mon Oct 11 06:29:52 2010
Subject: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
In-Reply-To: <AANLkTi=NmYRvoPJA6=LWjKDPBgBL30TyTUA1VcyLzYT7@mail.gmail.com>
References: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>
	<AANLkTimZNiuw=NSNaV_e8=HdZ3VS0JHJ2fTd92f7FSv4@mail.gmail.com>
	<AANLkTi=NmYRvoPJA6=LWjKDPBgBL30TyTUA1VcyLzYT7@mail.gmail.com>
Message-ID: <AANLkTim=pxqmqwe4Uyg2V-rTURbwjjPB8NVVBMSkmEt-@mail.gmail.com>

I mean, you have points in your shape(s) too close to each other.
When you are importing them, oracle "interprets" them as the same point
(ORA-13356) or overlapping ones (ORA-13349).
ways to escape
- "simplify" your shapes - delete adjacent points (too close ones)
- change your metadata for the layer (insert or update)

insert into USER_SDO_GEOM_METADATA
values ('LAYER','COLUMN',
mdsys.sdo_dim_array(
mdsys.sdo_dim_element('X',minX,maxX, toleranceX),
mdsys.sdo_dim_element('Y',minY,maxY, toleranceY)
),
SRID), so that toleranceX and toleranceY are small enough to serve your
shapes

regards, michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/c222f118/attachment-0001.html
From sebastian.ovide at gmail.com  Mon Oct 11 08:02:14 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Mon Oct 11 08:02:36 2010
Subject: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
In-Reply-To: <AANLkTim=pxqmqwe4Uyg2V-rTURbwjjPB8NVVBMSkmEt-@mail.gmail.com>
References: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>
	<AANLkTimZNiuw=NSNaV_e8=HdZ3VS0JHJ2fTd92f7FSv4@mail.gmail.com>
	<AANLkTi=NmYRvoPJA6=LWjKDPBgBL30TyTUA1VcyLzYT7@mail.gmail.com>
	<AANLkTim=pxqmqwe4Uyg2V-rTURbwjjPB8NVVBMSkmEt-@mail.gmail.com>
Message-ID: <AANLkTim2_MasEbp7=UFfhAqq5PZPsb+KDELa_v4AMixh@mail.gmail.com>

yes, updating the metadata worked.

Is there anyway to do it through ogr2ogr ?

We are trying to replace shp2do with ogr2ogr as shp2do requires multiple
steps (create do, import it and then create the index by hand)... and for
what I've seen with PostGIS, ogr2ogr is a single line operation.... How can
be done in Oracle ?(single line without modifying shapes)


thanks

On Mon, Oct 11, 2010 at 11:29 AM, Michael Shishcu <micklesh@gmail.com>wrote:

> I mean, you have points in your shape(s) too close to each other.
> When you are importing them, oracle "interprets" them as the same point
> (ORA-13356) or overlapping ones (ORA-13349).
> ways to escape
> - "simplify" your shapes - delete adjacent points (too close ones)
> - change your metadata for the layer (insert or update)
>
> insert into USER_SDO_GEOM_METADATA
> values ('LAYER','COLUMN',
> mdsys.sdo_dim_array(
> mdsys.sdo_dim_element('X',minX,maxX, toleranceX),
> mdsys.sdo_dim_element('Y',minY,maxY, toleranceY)
> ),
> SRID), so that toleranceX and toleranceY are small enough to serve your
> shapes
>
> regards, michael
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/be59c242/attachment.html
From eloi.ribeiro at gmail.com  Mon Oct 11 08:55:17 2010
From: eloi.ribeiro at gmail.com (Eloi Ribeiro)
Date: Mon Oct 11 08:55:19 2010
Subject: [gdal-dev] how to say gdalwarp to use nadgrid by default
Message-ID: <AANLkTin7p+QMN0J0mxgv5jvK1XnrrgSaVAQt6ZqgXij5@mail.gmail.com>

Hi all,

I would like that every time a I use gdalwarp for some EPSG codes [1]
transformation it would use by default the nadgrids [2] (for Portugal and
Spain) that I have under the folder '/usr/share/proj/'.

For that purpose in PostGIS I needed to add
'+nadgrids=nadgrid_file_name.gsb' at the end of the line of the 'proj4text'
field text in table 'spatial_ref_sys' for each EPSG code I wonted to use the
nadgrid.

So I suppose there must be a similar way of doing this with GDAL. How can I
achieve this with GDAL?

Thank's!

[1] 27492,27493,20790,20791,23029,23030,23031,3763,4258,4326
[2] pt73_e89.gsb, ptLX_e89.gsb, ptLB_e89.gsb, ptED_e89.gsb, R2009V9.gsb,
BALR2009.gsb


Eloi Ribeiro
GIS Analyst
39,45? -4,40?
http://eloiribeiro.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/51f531cd/attachment.html
From timmichelsen at gmx-topmail.de  Mon Oct 11 08:55:27 2010
From: timmichelsen at gmx-topmail.de (Timmie)
Date: Mon Oct 11 08:55:39 2010
Subject: [gdal-dev] read SDC files?
Message-ID: <loom.20101011T145400-817@post.gmane.org>

Hello,
is there a possibility to read sdc files [1] with gdal/ogr?

If not, do you know any library that provides access to such data?

Best regards,
Timmie

[1]: http://en.wikipedia.org/wiki/Smart_Data_Compression

From rigal at rapideye.de  Mon Oct 11 09:32:58 2010
From: rigal at rapideye.de (Matthieu Rigal)
Date: Mon Oct 11 10:00:28 2010
Subject: [gdal-dev] python GetDescription() returns empty strings on 1.7.1
Message-ID: <201010111532.58402.rigal@rapideye.de>

Hi folks,

Currently running GDAL 1.7.1, I noticed a regression towards the 1.6.x branch 
which I could not find in the tickets.

Teh GetDescription() always seems to return empty strings, except for just 
created file and just setted description...

Here is a description of the bug, I don't think it is quite the expected 
result :
>>> from osgeo import gdal
>>> xT = gdal.GetDriverByName('GTiff').Create('test-desc.tif',10,10,1)
>>> xB = xT.GetRasterBand(1)
>>> xB.SetDescription('test')
>>> xT = None
>>> xT2 = gdal.Open('test-desc.tif')
>>> xT2.GetRasterBand(1).GetDescription()
''

The 1.6.1 returns:
'test'

Is it a known bug ? Solved in further versions ?

Regards,
Matthieu

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany
 
Follow us on Twitter! www.twitter.com/rapideye_ag
 
Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: 
Juergen Breitkopf 
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified
 
*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.
 
The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From warmerdam at pobox.com  Mon Oct 11 10:33:51 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 11 10:34:00 2010
Subject: [gdal-dev] python GetDescription() returns empty strings on 1.7.1
In-Reply-To: <201010111532.58402.rigal@rapideye.de>
References: <201010111532.58402.rigal@rapideye.de>
Message-ID: <4CB3204F.7090407@pobox.com>

Matthieu Rigal wrote:
> Hi folks,
> 
> Currently running GDAL 1.7.1, I noticed a regression towards the 1.6.x branch 
> which I could not find in the tickets.
> 
> Teh GetDescription() always seems to return empty strings, except for just 
> created file and just setted description...
> 
> Here is a description of the bug, I don't think it is quite the expected 
> result :
>>>> from osgeo import gdal
>>>> xT = gdal.GetDriverByName('GTiff').Create('test-desc.tif',10,10,1)
>>>> xB = xT.GetRasterBand(1)
>>>> xB.SetDescription('test')
>>>> xT = None
>>>> xT2 = gdal.Open('test-desc.tif')
>>>> xT2.GetRasterBand(1).GetDescription()
> ''
> 
> The 1.6.1 returns:
> 'test'
> 
> Is it a known bug ? Solved in further versions ?

Matthieu,

I confirmed the problem but was unable to reproduce correction operation
against the current 1.6 branch so whatever changed appears to have changed
there as well.

I presume with 1.6.1 you are seeing a .aux.xml file created - is that right?

There is no special handling of the raster band description in the geotiff
driver itself, so saving it falls to the GDALPamRasterBand.  I see it also
has no override for SetDescription() so it falls to GDALMajorObject to
hold the description.  In GDALPamRasterBand::SerializeToXML() a non-empty
description will be saved to the .aux.xml file; however, SerializeToXML()
is not called unless there is some record of the PAM information being dirty.

Since SetDescription() was not overridded in GDALPamRasterBand there was
no mechanism to set GPF_DIRTY in the pam layer.

Without more investigation I can't see why things regressed after 1.6.1.
I suspect it was a case of other information being handled a different
way so less gets written to the .aux.xml file.

I believe the fix is to override SetDescription() in GDALPamRasterBand
and to set the dirty flag there.

I'd appreciate it if you could file a ticket, and copy in the above
discussion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Mon Oct 11 10:43:02 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct 11 10:43:13 2010
Subject: [gdal-dev] python GetDescription() returns empty strings on 1.7.1
In-Reply-To: <201010111532.58402.rigal@rapideye.de>
References: <201010111532.58402.rigal@rapideye.de>
Message-ID: <1286808182.4cb3227654efa@webmail.free.fr>

Selon Matthieu Rigal <rigal@rapideye.de>:

Matthieu,

I can reproduce in trunk too. I'm not aware that this issue was known. I'm even
a bit surprised this has worked before as the SetDescription() method in
GDALPamRasterBand doesn't seem to have been ever overloaded, so a bit of
investigation is necessary.

In 1.6.x branch, I suppose this worked before the band description was written
in a .aux.xml file ?

Best regards,

Even

> Hi folks,
>
> Currently running GDAL 1.7.1, I noticed a regression towards the 1.6.x branch
> which I could not find in the tickets.
>
> Teh GetDescription() always seems to return empty strings, except for just
> created file and just setted description...
>
> Here is a description of the bug, I don't think it is quite the expected
> result :
> >>> from osgeo import gdal
> >>> xT = gdal.GetDriverByName('GTiff').Create('test-desc.tif',10,10,1)
> >>> xB = xT.GetRasterBand(1)
> >>> xB.SetDescription('test')
> >>> xT = None
> >>> xT2 = gdal.Open('test-desc.tif')
> >>> xT2.GetRasterBand(1).GetDescription()
> ''
>
> The 1.6.1 returns:
> 'test'
>
> Is it a known bug ? Solved in further versions ?
>
> Regards,
> Matthieu
>
> RapidEye AG
> Molkenmarkt 30
> 14776 Brandenburg an der Havel
> Germany
>
> Follow us on Twitter! www.twitter.com/rapideye_ag
>
> Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
> Management Board/Vorstand: Wolfgang G. Biedermann
> Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates:
> Juergen Breitkopf
> Commercial Register/Handelsregister Potsdam HRB 17 796
> Tax Number/Steuernummer: 048/100/00053
> VAT-Ident-Number/Ust.-ID: DE 199331235
> DIN EN ISO 9001 certified
>
> *************************************************************************
> Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
> Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
> E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
> Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
> die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.
>
> The information in this e-mail is intended for the named recipients
> only. It may contain privileged and confidential information. If you
> have received this communication in error, any use, copying or
> dissemination of its contents is strictly prohibited. Please erase all
> copies of the message along with any included attachments and notify
> RapidEye AG or the sender immediately by telephone at the number
> indicated on this page.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From rigal at rapideye.de  Mon Oct 11 11:02:15 2010
From: rigal at rapideye.de (Matthieu Rigal)
Date: Mon Oct 11 11:01:24 2010
Subject: [gdal-dev] python GetDescription() returns empty strings on 1.7.1
In-Reply-To: <4CB3204F.7090407@pobox.com>
References: <201010111532.58402.rigal@rapideye.de> <4CB3204F.7090407@pobox.com>
Message-ID: <201010111702.15541.rigal@rapideye.de>

Hi Frank and Even,

Thanks for your replies.
From what I can see, it is not related to the aux.xml files, because this 
still works after deletion.
I must add that I have the same problem when working on .pix images, so it is 
probably not driver specific... it may be specific to the SWIG or to python...

I just filed this discussion as a ticket, her you can find it 
http://trac.osgeo.org/gdal/ticket/3780

Thanks for all the great job you're doing !
Best Regards,
Matthieu


On Monday 11 October 2010 16:33:51 Frank Warmerdam wrote:
> Matthieu Rigal wrote:
> > Hi folks,
> > 
> > Currently running GDAL 1.7.1, I noticed a regression towards the 1.6.x
> > branch which I could not find in the tickets.
> > 
> > Teh GetDescription() always seems to return empty strings, except for
> > just created file and just setted description...
> > 
> > Here is a description of the bug, I don't think it is quite the expected
> > 
> > result :
> >>>> from osgeo import gdal
> >>>> xT = gdal.GetDriverByName('GTiff').Create('test-desc.tif',10,10,1)
> >>>> xB = xT.GetRasterBand(1)
> >>>> xB.SetDescription('test')
> >>>> xT = None
> >>>> xT2 = gdal.Open('test-desc.tif')
> >>>> xT2.GetRasterBand(1).GetDescription()
> > 
> > ''
> > 
> > The 1.6.1 returns:
> > 'test'
> > 
> > Is it a known bug ? Solved in further versions ?
> 
> Matthieu,
> 
> I confirmed the problem but was unable to reproduce correction operation
> against the current 1.6 branch so whatever changed appears to have changed
> there as well.
> 
> I presume with 1.6.1 you are seeing a .aux.xml file created - is that
> right?
> 
> There is no special handling of the raster band description in the geotiff
> driver itself, so saving it falls to the GDALPamRasterBand.  I see it also
> has no override for SetDescription() so it falls to GDALMajorObject to
> hold the description.  In GDALPamRasterBand::SerializeToXML() a non-empty
> description will be saved to the .aux.xml file; however, SerializeToXML()
> is not called unless there is some record of the PAM information being
> dirty.
> 
> Since SetDescription() was not overridded in GDALPamRasterBand there was
> no mechanism to set GPF_DIRTY in the pam layer.
> 
> Without more investigation I can't see why things regressed after 1.6.1.
> I suspect it was a case of other information being handled a different
> way so less gets written to the .aux.xml file.
> 
> I believe the fix is to override SetDescription() in GDALPamRasterBand
> and to set the dirty flag there.
> 
> I'd appreciate it if you could file a ticket, and copy in the above
> discussion.
> 
> Best regards,


-- 
Matthieu Rigal
Product Development

RapidEye AG                           Tel:  +49-(0)3381-89 04 331
Molkenmarkt 30                       Fax: +49-(0)3381-89 04 101
14776 Brandenburg/Havel
Germany                                  http://www.rapideye.de

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany
 
Follow us on Twitter! www.twitter.com/rapideye_ag
 
Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: 
Juergen Breitkopf 
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified
 
*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.
 
The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From rigal at rapideye.de  Mon Oct 11 11:17:05 2010
From: rigal at rapideye.de (Matthieu Rigal)
Date: Mon Oct 11 11:16:10 2010
Subject: [gdal-dev] python GetDescription() returns empty strings on 1.7.1
In-Reply-To: <1286808182.4cb3227654efa@webmail.free.fr>
References: <201010111532.58402.rigal@rapideye.de>
	<1286808182.4cb3227654efa@webmail.free.fr>
Message-ID: <201010111717.05523.rigal@rapideye.de>

Hi Even,
actually, I was a bit too fast... I had no equiped 1.6.1 version, so I 
"guessed" the result, from an output of one of the scripts I have.

Now that you told me, I reaccessed an old configuration to test it really, and 
indeed it does not work, BUT :

when I have one image with several layers having names created by other 
software, the GetDescription() did return it, whereas know it is not returning 
it...

Regards,
Matthieu

On Monday 11 October 2010 16:43:02 you wrote:
> Selon Matthieu Rigal <rigal@rapideye.de>:
> 
> Matthieu,
> 
> I can reproduce in trunk too. I'm not aware that this issue was known. I'm
> even a bit surprised this has worked before as the SetDescription() method
> in GDALPamRasterBand doesn't seem to have been ever overloaded, so a bit
> of investigation is necessary.
> 
> In 1.6.x branch, I suppose this worked before the band description was
> written in a .aux.xml file ?
> 
> Best regards,
> 
> Even
> 
> > Hi folks,
> > 
> > Currently running GDAL 1.7.1, I noticed a regression towards the 1.6.x
> > branch which I could not find in the tickets.
> > 
> > Teh GetDescription() always seems to return empty strings, except for
> > just created file and just setted description...
> > 
> > Here is a description of the bug, I don't think it is quite the expected
> > 
> > result :
> > >>> from osgeo import gdal
> > >>> xT = gdal.GetDriverByName('GTiff').Create('test-desc.tif',10,10,1)
> > >>> xB = xT.GetRasterBand(1)
> > >>> xB.SetDescription('test')
> > >>> xT = None
> > >>> xT2 = gdal.Open('test-desc.tif')
> > >>> xT2.GetRasterBand(1).GetDescription()
> > 
> > ''
> > 
> > The 1.6.1 returns:
> > 'test'
> > 
> > Is it a known bug ? Solved in further versions ?
> > 
> > Regards,
> > Matthieu
> > 
> > RapidEye AG
> > Molkenmarkt 30
> > 14776 Brandenburg an der Havel
> > Germany
> > 
> > Follow us on Twitter! www.twitter.com/rapideye_ag
> > 
> > Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
> > Management Board/Vorstand: Wolfgang G. Biedermann
> > Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates:
> > Juergen Breitkopf
> > Commercial Register/Handelsregister Potsdam HRB 17 796
> > Tax Number/Steuernummer: 048/100/00053
> > VAT-Ident-Number/Ust.-ID: DE 199331235
> > DIN EN ISO 9001 certified
> > 
> > *************************************************************************
> > Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
> > Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
> > E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
> > Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
> > die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.
> > 
> > The information in this e-mail is intended for the named recipients
> > only. It may contain privileged and confidential information. If you
> > have received this communication in error, any use, copying or
> > dissemination of its contents is strictly prohibited. Please erase all
> > copies of the message along with any included attachments and notify
> > RapidEye AG or the sender immediately by telephone at the number
> > indicated on this page.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Matthieu Rigal
Product Development

RapidEye AG                           Tel:  +49-(0)3381-89 04 331
Molkenmarkt 30                       Fax: +49-(0)3381-89 04 101
14776 Brandenburg/Havel
Germany                                  http://www.rapideye.de

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany
 
Follow us on Twitter! www.twitter.com/rapideye_ag
 
Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: 
Juergen Breitkopf 
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified
 
*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.
 
The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From gregcorradini at gmail.com  Mon Oct 11 12:29:37 2010
From: gregcorradini at gmail.com (gregcorradini)
Date: Mon Oct 11 12:29:38 2010
Subject: [gdal-dev] Re: gdal python bindings for 1.7 - where to find
In-Reply-To: <20101011090751.2aa57d52@asigrid01>
References: <1388117108.547903.1286551970975.JavaMail.fmail@mwmweb018>
	<1286759072031-5621683.post@n2.nabble.com>
	<20101011090751.2aa57d52@asigrid01>
Message-ID: <1286814577915-5623737.post@n2.nabble.com>


Antonio,
I don't know much about the pre-built binaries for win32 except for what's
talked about here http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries.

However, you might want to see what version of GDAL FwTools2.4.7
(http://fwtools.maptools.org/) is using for win32 binaries. 

Sorry, i don't know more
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdal-python-bindings-for-1-7-where-to-find-tp5615414p5623737.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jukka.rahkonen at mmmtike.fi  Mon Oct 11 13:39:59 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Oct 11 13:40:09 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: ORA-13349 and ORA-13356
References: <AANLkTimkAshMDmfdyZp28NHMhRaGi6ERoNmG4OxFc=za@mail.gmail.com>
	<AANLkTimZNiuw=NSNaV_e8=HdZ3VS0JHJ2fTd92f7FSv4@mail.gmail.com>
	<AANLkTi=NmYRvoPJA6=LWjKDPBgBL30TyTUA1VcyLzYT7@mail.gmail.com>
	<AANLkTim=pxqmqwe4Uyg2V-rTURbwjjPB8NVVBMSkmEt-@mail.gmail.com>
	<AANLkTim2_MasEbp7=UFfhAqq5PZPsb+KDELa_v4AMixh@mail.gmail.com>
Message-ID: <loom.20101011T193309-856@post.gmane.org>

Sebastian E. Ovide <sebastian.ovide <at> gmail.com> writes:

> 
> 
> yes, updating the metadata worked.?
> 
> Is there anyway to do it through ogr2ogr ?
> 
> We are trying to replace shp2do with ogr2ogr as shp2do requires multiple steps
(create do, import it and then create the index by hand)... and for what I've
seen with PostGIS, ogr2ogr is a single line operation.... How can be done in
Oracle ?(single line without modifying shapes)?

Hi,

If setting the Oracle tolerance value is enough, you can give it on the command
line with DIMINFO_X, _Y and _Z (see http://gdal.org/ogr/drv_oci.html).
However, the default is just two millimeters. If there are vertices at that
small distance then preprocessing the data before import might be still a good
idea. 

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Mon Oct 11 14:01:29 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct 11 14:00:54 2010
Subject: [gdal-dev] Re: GDAL JAVA problem
In-Reply-To: <1286442216701-5610554.post@n2.nabble.com>
References: <20090112190512.23669.qmail@s466.sureserver.com>
	<201010061937.42078.even.rouault@mines-paris.org>
	<1286442216701-5610554.post@n2.nabble.com>
Message-ID: <201010112001.29840.even.rouault@mines-paris.org>

Sagar,

don't load the .so directly. Let gdal.jar do the dirty work for you !

Use the import org.gdal.XXX imports and then gdal.AllRegister() or 
ogr.RegisterAll() instead.

See the examples in 
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps

Le jeudi 07 octobre 2010 11:03:36, sagar_sahay a ?crit :
> Hi Even,
> 
> Thanks for that, that error has been resolved. But the following warning as
> keeps coming , would you know what this means:
> Native library load failed.
> java.lang.UnsatisfiedLinkError: no gdaljni in java.library.path
> 
> I am loading all the .so files individually
> 
> System.load("/home/gdal/gdal-1.7.2/swig/java/libgdalconstjni.so");
> 
> System.load("/home/gdal/gdal-1.7.2/swig/java/libgdaljni.so");
> 
> System.load("/home/gdal/gdal-1.7.2/swig/java/libogrjni.so");
> 
> System.load("/home/gdal/gdal-1.7.2/swig/java/libosrjni.so");
> 
> But still the error is coming. Please help if you can.
> 
> Thanks again,
> Sagar
From even.rouault at mines-paris.org  Mon Oct 11 14:03:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Oct 11 14:03:05 2010
Subject: [gdal-dev] read SDC files?
In-Reply-To: <loom.20101011T145400-817@post.gmane.org>
References: <loom.20101011T145400-817@post.gmane.org>
Message-ID: <201010112003.42207.even.rouault@mines-paris.org>

Le lundi 11 octobre 2010 14:55:27, Timmie a ?crit :
> Hello,
> is there a possibility to read sdc files [1] with gdal/ogr?

No

> 
> If not, do you know any library that provides access to such data?

No, there's perhaps one though, but the link you've provided makes me be 
pessimistic about that unless you contact ESRI directly.

> 
> Best regards,
> Timmie
> 
> [1]: http://en.wikipedia.org/wiki/Smart_Data_Compression
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jaadfoo at gmail.com  Mon Oct 11 15:20:45 2010
From: jaadfoo at gmail.com (Jamie Adams)
Date: Mon Oct 11 15:20:47 2010
Subject: [gdal-dev] kmlsuperoverlay nodata support
Message-ID: <AANLkTi=SOt-5pAcJNV81jwyDSNFPSBt7-JWE-sL8M7Gw@mail.gmail.com>

I'm evaluating the new kmlsuperoverlay driver in trunk and have been unable
to get nodata values to show up as transparent in the output.  Are there
format specific creation options I should be using?

- Jamie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/1b279b5e/attachment.html
From mmatuszak at rootnode.net  Tue Oct 12 05:15:16 2010
From: mmatuszak at rootnode.net (mmatuszak@rootnode.net)
Date: Tue Oct 12 05:22:52 2010
Subject: [gdal-dev] import georaster using gdal java api
Message-ID: <e74c6973451fa759bce5232ec569e11d@cox.rootnode.net>

Hi,
I am facing problem which I am not able to jump over:)
I created georaster table using instruction from oracle website
http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14254/geor_operations.htm
Using gdal_translate and pl/sql I am able to import geotiff into 
Oracle.
Then using gdal to export from oracle I am receiving proper image.
But doing the same in java

oracle_driver.CreateCopy("georaster:"+db_connection, datasource,
 0, new String[] { "INSERT=VALUES(" + id + ",
SDO_GEOR.INIT('GEORASTER_RDT_01'))",
 "blockxsize=512", "blockysize=512", "blockbsize=3"});

and then exporting it again I got image full of black colour.
What am I doing wrong?


From even.rouault at mines-paris.org  Tue Oct 12 05:40:41 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct 12 05:40:50 2010
Subject: [gdal-dev] import georaster using gdal java api
In-Reply-To: <e74c6973451fa759bce5232ec569e11d@cox.rootnode.net>
References: <e74c6973451fa759bce5232ec569e11d@cox.rootnode.net>
Message-ID: <1286876441.4cb42d19edfa1@webmail.free.fr>

Selon mmatuszak@rootnode.net:

I'm not sure if this will solve your problem but according to
http://gdal.org/java/org/gdal/gdal/Driver.html#CreateCopy(java.lang.String,%20org.gdal.gdal.Dataset)
,
you should explicitely call .delete() on the returned dataset to ensure that
everything gets properly closed.

> Hi,
> I am facing problem which I am not able to jump over:)
> I created georaster table using instruction from oracle website
>
http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14254/geor_operations.htm
> Using gdal_translate and pl/sql I am able to import geotiff into
> Oracle.
> Then using gdal to export from oracle I am receiving proper image.
> But doing the same in java
>
> oracle_driver.CreateCopy("georaster:"+db_connection, datasource,
>  0, new String[] { "INSERT=VALUES(" + id + ",
> SDO_GEOR.INIT('GEORASTER_RDT_01'))",
>  "blockxsize=512", "blockysize=512", "blockbsize=3"});
>
> and then exporting it again I got image full of black colour.
> What am I doing wrong?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From GISxperts at web.de  Tue Oct 12 05:48:51 2010
From: GISxperts at web.de (Hannes Reuter)
Date: Tue Oct 12 05:48:53 2010
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 77, Issue 20
In-Reply-To: <20101011102955.54073E01A75@lists.osgeo.org>
References: <20101011102955.54073E01A75@lists.osgeo.org>
Message-ID: <273399615.50111.1286876931092.JavaMail.fmail@mwmweb020>

Dear greg, 

yes i'm aware of this site.. -> thats the reason I'm asking as the link to http://pypi.python.org/pypi/GDAL/
points only to source and not to the executable python binding binaries anymore for anything greater than version 1.6.

Are we supposed to install python bindings via easy install on windows ? than the documentation should be updated. 

hannes





--
Dr. Hannes Isaak Reuter
gisxperts gbr

-----Urspr?ngliche Nachricht-----
Von: gdal-dev-request@lists.osgeo.org
Gesendet: Oct 11, 2010 12:29:55 PM
An: gdal-dev@lists.osgeo.org
Betreff: gdal-dev Digest, Vol 77, Issue 20

Send gdal-dev mailing list submissions to
	gdal-dev@lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
	gdal-dev-request@lists.osgeo.org

You can reach the person managing the list at
	gdal-dev-owner@lists.osgeo.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of gdal-dev digest..."


Today's Topics:

   1. Re: gdal python bindings for 1.7 - where to find (gregcorradini)
   2. Re: kmlsuperoverlay breaks the trunk (Frank Warmerdam)
   3. Re: OSR Projection Error 6 (Frank Warmerdam)
   4. Re: gdal python bindings for 1.7 - where to find
      (Antonio Valentino)
   5. ogr2ogr OCI: ORA-13349 and ORA-13356 (Sebastian E. Ovide)
   6. Re: ogr2ogr OCI: ORA-13349 and ORA-13356 (Imran Rajjad)
   7. Re: ogr2ogr OCI: ORA-13349 and ORA-13356 (Michael Shishcu)
   8. Re: ogr2ogr OCI: ORA-13349 and ORA-13356 (Sebastian E. Ovide)
   9. Re: ogr2ogr OCI: ORA-13349 and ORA-13356 (Michael Shishcu)


----------------------------------------------------------------------

Message: 1
Date: Sun, 10 Oct 2010 18:04:32 -0700 (PDT)
From: gregcorradini <gregcorradini@gmail.com>
Subject: Re: [gdal-dev] gdal python bindings for 1.7 - where to find
To: gdal-dev@lists.osgeo.org
Message-ID: <1286759072031-5621683.post@n2.nabble.com>
Content-Type: text/plain; charset=us-ascii


Hey Hannes,
I think most of your questions can be answered here
http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Have you seen this? It
covers how to install the Python bindings for GDAL 1.7.x and Python 2.x. I'd
pay attention to the Dependencies subhead -- there's a few libraries and dev
headers you need installed including setuptools
http://pypi.python.org/pypi/setuptools.

Also, there's currently a problem with the easy install method described
above. Here is the ticket and the workaround for that
http://trac.osgeo.org/gdal/ticket/3468#comment:10. Notice that swq.h should
be put in /usr/local/include to get easy install to work (at least that's
what i did. I also had to put set my PYTHONPATH to point to that install).
But everything has been working for me ;) 

hope that helps.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-gdal-python-bindings-for-1-7-where-to-find-tp5615414p5621683.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.


------------------------------

Message: 2
Date: Sun, 10 Oct 2010 23:03:37 -0400
From: Frank Warmerdam <warmerdam@pobox.com>
Subject: Re: [gdal-dev] kmlsuperoverlay breaks the trunk
To: Antonio Valentino [
Cc: gdal-dev <gdal-dev@lists.osgeo.org>
Message-ID: <4CB27E89.4050500@pobox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Antonio Valentino wrote:
> Hi Ari,
> the following mini-patch should fix the issue:
> 
> 
> Index: gdal/frmts/kmlsuperoverlay/GNUmakefile
> ===================================================================
> --- gdal/frmts/kmlsuperoverlay/GNUmakefile	(revisione 20798)
> +++ gdal/frmts/kmlsuperoverlay/GNUmakefile	(copia locale)
> @@ -10,4 +10,5 @@
>  clean:
>  	rm -f *.o $(O_OBJ)
>  
> -install-obj:	$(O_OBJ)
> +#install-obj:	$(O_OBJ)
> +install-obj:	$(O_OBJ:.o=.$(OBJ_EXT))

Antonio / Ari,

Thanks for identifying the issue.  I have applied a variation of this
change (http://trac.osgeo.org/gdal/changeset/20807).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



------------------------------

Message: 3
Date: Sun, 10 Oct 2010 23:05:45 -0400
From: Frank Warmerdam <warmerdam@pobox.com>
Subject: Re: [gdal-dev] OSR Projection Error 6
To: "Jay L." <jzl5325@psu.edu>
Cc: gdal-dev@lists.osgeo.org
Message-ID: <4CB27F09.8080604@pobox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Jay L. wrote:
> Morning all,
> 
> I am struggling to get a coordinate transformation to work in a python 
> script.  Below is the code snippet that is causing the following error:
> 
> "ERROR 6: No translation for 'Azimuthal_Equidistant' to PROJ.4 format is 
> known."
> 
> I am pulling the input spatial reference from the input shapefile 
> (Mars_2000), defining the custom projection (custom in that it is 
> centered on a point), and then trying to transform to the custom projection.
> 
>     Create a new shapefile and copy, one geometry at a time, from the
>     input to the new output
>     ...
>     #Define the new projection to ortho centered on the crater
>         azimuthal =
>     "PROJCS['Azimuthal_Equidistant',GEOGCS['GCS_Mars_2000',DATUM['D_Mars_2000',SPHEROID['Mars_2000_IAU_IAG',3396190.0,169.8944472236118]],PRIMEM['Reference_Meridian',0.0],UNIT['Degree',0.0174532925199433]],PROJECTION['Azimuthal_Equidistant'],PARAMETER['False_Easting',0.0],PARAMETER['False_Northing',0.0],PARAMETER['Central_Meridian',%f],PARAMETER['Latitude_Of_Origin',%f],UNIT['Meter',1.0]]"
>     %(x,y)
>        
>         intermediate_SR.ImportFromWkt(azimuthal)
>        
>         #Transform the point from the spatial input reference to an
>     azimuthal projection centered on the point
>         outputGeom.TransformTo(intermediate_SR)
>     ...
> 
> Do I need to define the coordinate system differently or am I making an 
> error somewhere else?

Jay,

The problem is that this is an ESRI projection engine string.  These
are similar but sometimes incompatible with OGR WKT.  After importing
it, call morphFromESRI().

eg.
          intermediate_SR.ImportFromWkt(azimuthal)
          intermediate_SR.MorphFromESRI()

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



------------------------------

Message: 4
Date: Mon, 11 Oct 2010 09:07:51 +0200
From: Antonio Valentino [
Subject: Re: [gdal-dev] gdal python bindings for 1.7 - where to find
To: gregcorradini <gregcorradini@gmail.com>
Cc: gdal-dev@lists.osgeo.org
Message-ID: <20101011090751.2aa57d52@asigrid01>
Content-Type: text/plain; charset=US-ASCII

Hi Greg,

Il giorno Sun, 10 Oct 2010 18:04:32 -0700 (PDT)
gregcorradini <gregcorradini@gmail.com> ha scritto:

> 
> Hey Hannes,
> I think most of your questions can be answered here
> http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Have you seen this?
> It covers how to install the Python bindings for GDAL 1.7.x and
> Python 2.x. I'd pay attention to the Dependencies subhead -- there's
> a few libraries and dev headers you need installed including
> setuptools http://pypi.python.org/pypi/setuptools.

[cut]

do you know where can I find pre-build binaries for win32 of GDAL?
It seems that only 1.6.x series is available at

http://download.osgeo.org/gdal/win32/


best regards

-- 
Antonio Valentino


------------------------------

Message: 5
Date: Mon, 11 Oct 2010 10:28:55 +0100
From: "Sebastian E. Ovide" 
Subject: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
To: gdal-dev <gdal-dev@lists.osgeo.org>
Message-ID:
	[
Content-Type: text/plain; charset="iso-8859-1"

Hi All,

Importing shapes into Oracle I'm getting not valid geometrie: ORA-13349 and
ORA-13356.

No problem importing the same shapes into PostGIS.

any ideas ?

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/bc6062e7/attachment-0001.html

------------------------------

Message: 6
Date: Mon, 11 Oct 2010 14:32:56 +0500
From: Imran Rajjad <rajjad@gmail.com>
Subject: Re: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
To: "Sebastian E. Ovide" 
Cc: gdal-dev <gdal-dev@lists.osgeo.org>
Message-ID:
	[
Content-Type: text/plain; charset=ISO-8859-1

Hi Sebastian

did you verify geometries ? there is a tool in esri arcmap that
validates and fixes geometries, I kind of had the same problem but I
applied correction through arcMap , and it worked.

regards.
Imran

On Mon, Oct 11, 2010 at 2:28 PM, Sebastian E. Ovide
 wrote:
> Hi All,
> Importing shapes into Oracle I'm getting not valid geometrie:?ORA-13349 and
> ORA-13356.
> No problem importing the same shapes into PostGIS.
> any ideas ?
>
> --
> Sebastian E. Ovide
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
I.R


------------------------------

Message: 7
Date: Mon, 11 Oct 2010 12:39:40 +0300
From: Michael Shishcu <micklesh@gmail.com>
Subject: Re: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
To: "Sebastian E. Ovide" 
Cc: gdal-dev <gdal-dev@lists.osgeo.org>
Message-ID:
	[
Content-Type: text/plain; charset="iso-8859-1"

Also, this can be caused by too big  tolerance of your coordinates, check
this in your metadata
regards, michael

On 11 October 2010 12:28, Sebastian E. Ovide wrote:

> Hi All,
>
> Importing shapes into Oracle I'm getting not valid geometrie: ORA-13349 and
> ORA-13356.
>
> No problem importing the same shapes into PostGIS.
>
> any ideas ?
>
> --
> Sebastian E. Ovide
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/962e0c69/attachment-0001.html

------------------------------

Message: 8
Date: Mon, 11 Oct 2010 11:13:14 +0100
From: "Sebastian E. Ovide" 
Subject: Re: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
To: Michael Shishcu <micklesh@gmail.com>
Cc: gdal-dev <gdal-dev@lists.osgeo.org>
Message-ID:
	[
Content-Type: text/plain; charset="iso-8859-1"

you mean before importing the shapes ?

On Mon, Oct 11, 2010 at 10:39 AM, Michael Shishcu <micklesh@gmail.com>wrote:

> Also, this can be caused by too big  tolerance of your coordinates, check
> this in your metadata
> regards, michael
>
> On 11 October 2010 12:28, Sebastian E. Ovide wrote:
>
>> Hi All,
>>
>> Importing shapes into Oracle I'm getting not valid geometrie: ORA-13349
>> and ORA-13356.
>>
>> No problem importing the same shapes into PostGIS.
>>
>> any ideas ?
>>
>> --
>> Sebastian E. Ovide
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/f24e4efc/attachment-0001.html

------------------------------

Message: 9
Date: Mon, 11 Oct 2010 13:29:30 +0300
From: Michael Shishcu <micklesh@gmail.com>
Subject: Re: [gdal-dev] ogr2ogr OCI: ORA-13349 and ORA-13356
To: "Sebastian E. Ovide" 
Cc: gdal-dev <gdal-dev@lists.osgeo.org>
Message-ID:
	[
Content-Type: text/plain; charset="iso-8859-1"

I mean, you have points in your shape(s) too close to each other.
When you are importing them, oracle "interprets" them as the same point
(ORA-13356) or overlapping ones (ORA-13349).
ways to escape
- "simplify" your shapes - delete adjacent points (too close ones)
- change your metadata for the layer (insert or update)

insert into USER_SDO_GEOM_METADATA
values ('LAYER','COLUMN',
mdsys.sdo_dim_array(
mdsys.sdo_dim_element('X',minX,maxX, toleranceX),
mdsys.sdo_dim_element('Y',minY,maxY, toleranceY)
),
SRID), so that toleranceX and toleranceY are small enough to serve your
shapes

regards, michael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101011/c222f118/attachment.html

------------------------------

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

End of gdal-dev Digest, Vol 77, Issue 20
****************************************
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Hannes.vcf
Type: text/x-vcard
Size: 286 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101012/1cc0260c/Hannes-0001.vcf
From jukka.rahkonen at mmmtike.fi  Tue Oct 12 06:01:43 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Oct 12 06:01:57 2010
Subject: [gdal-dev] Sortshp and corrupted output with 3D polygon input
Message-ID: <loom.20101012T112638-247@post.gmane.org>

Hi,

I was sorting a shapefile with sortshp (Windows 2003 Server, GDAL 1.7.0dev,
FWTools 2.4.2, released 2009/06/24, from FWTools 2.4.2).

Sorting went OK well and it looks like the resulting sorted shapefile works with
Mapserver. However, I noticed that the file size of .shp file decreased from 307
KB in the original into 207 KB in the sorted file and started to wonder why.
I also noticed that I could not process the sorted shapefile further with
ogr2ogr. The result was one thousand times this kind of error message and
program stop:

ERROR 1: Corrupted .shp file : shape 978, nPoints=12, nParts=1, nEntitySize=248.

I discovered that the original shapefile I had was a 3D shapefile. Ogrinfo
reports that also the shapefile created by sortshp is of type 3D polygon.

ogrinfo -al -so error_sorted.shp
INFO: Open of `error_sorted.shp'
      using driver `ESRI Shapefile' successful.

Layer name: error_sorted
Geometry: 3D Polygon

However, I have a feeling that perhaps it is not 3D Polygon layer but a normal
Polygon layer with wrong headers or something. I did another test by using an
intermediate 2D Polygon shapefile created by using ogr2ogr and option -lco
SHPT=POLYGON. Size of the resulting .shp file was 207 KB, just the same than the
invalid output from sortshp. Finally, sorting this 2D-shapefile with sortshp
gives me a valid sorted shapefile.

-Jukka Rahkonen-



From ivan.lucena at pmldnet.com  Tue Oct 12 06:53:49 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Oct 12 06:53:52 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gaW1wb3J0IGdlb3Jhc3RlciB1c2luZyBnZGFsIGphdmEgYXBp?=
Message-ID: <20101012105349.10211.qmail@s466.sureserver.com>

Hi,

The is nothing especial in calling the GeoRaster driver's CreateCopy from C or Java but can you try to use the same 
Java code to CreateCopy other formats, like GTIFF to HFA, for example? Just to see if there is anything missing.

Regards,

Ivan

>  -------Original Message-------
>  From: mmatuszak@rootnode.net
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] import georaster using gdal java api
>  Sent: Oct 12 '10 04:15
>  
>  Hi,
>  I am facing problem which I am not able to jump over:)
>  I created georaster table using instruction from oracle website
>  http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14254/geor_operations.htm
>  Using gdal_translate and pl/sql I am able to import geotiff into
>  Oracle.
>  Then using gdal to export from oracle I am receiving proper image.
>  But doing the same in java
>  
>  oracle_driver.CreateCopy("georaster:"+db_connection, datasource,
>  0, new String[] { "INSERT=VALUES(" + id + ",
>  SDO_GEOR.INIT('GEORASTER_RDT_01'))",
>  "blockxsize=512", "blockysize=512", "blockbsize=3"});
>  
>  and then exporting it again I got image full of black colour.
>  What am I doing wrong?
>  
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From mmatuszak at rootnode.net  Tue Oct 12 07:08:08 2010
From: mmatuszak at rootnode.net (Matuszak Marcin)
Date: Tue Oct 12 07:08:11 2010
Subject: [gdal-dev] import georaster using gdal java api
In-Reply-To: <20101012105349.10211.qmail@s466.sureserver.com>
References: <20101012105349.10211.qmail@s466.sureserver.com>
Message-ID: <af4c427205a27a506d7630fae3465b9e@cox.rootnode.net>

I did not read javadoc with sufficient attention. Calling delete on
dataset solve the problem.

Thanks.
On Tue, 12 Oct 2010 05:53:49 -0500, "Ivan Lucena"
<ivan.lucena@pmldnet.com> wrote:
> Hi,
> 
> The is nothing especial in calling the GeoRaster driver's CreateCopy
> from C or Java but can you try to use the same
> Java code to CreateCopy other formats, like GTIFF to HFA, for
> example? Just to see if there is anything missing.
> 
> Regards,
> 
> Ivan
> 
>>  -------Original Message-------
>>  From: mmatuszak@rootnode.net
>>  To: gdal-dev@lists.osgeo.org
>>  Subject: [gdal-dev] import georaster using gdal java api
>>  Sent: Oct 12 '10 04:15
>>
>>  Hi,
>>  I am facing problem which I am not able to jump over:)
>>  I created georaster table using instruction from oracle website
>>  http://download.oracle.com/docs/cd/B19306_01/appdev.102/b14254/geor_operations.htm
>>  Using gdal_translate and pl/sql I am able to import geotiff into
>>  Oracle.
>>  Then using gdal to export from oracle I am receiving proper image.
>>  But doing the same in java
>>
>>  oracle_driver.CreateCopy("georaster:"+db_connection, datasource,
>>  0, new String[] { "INSERT=VALUES(" + id + ",
>>  SDO_GEOR.INIT('GEORASTER_RDT_01'))",
>>  "blockxsize=512", "blockysize=512", "blockbsize=3"});
>>
>>  and then exporting it again I got image full of black colour.
>>  What am I doing wrong?
>>
>>
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>

-- 
Pozdrawiam,
Matuszak Marcin

From zoltans at geograph.co.za  Tue Oct 12 06:51:04 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue Oct 12 07:10:27 2010
Subject: [gdal-dev] Geomedia mdb files
Message-ID: <4CB43D98.1030906@geograph.co.za>

Hi,
Is there an opensource read/write capability for Geomedia Access MDB files?
If not, are there any "work in progress" attempts?

I see they are "Standard Jet DBs", but the geometry coordinates seem to 
be in a BLOB field.

TIA,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From warmerdam at pobox.com  Tue Oct 12 08:07:34 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 12 08:07:43 2010
Subject: [gdal-dev] Sortshp and corrupted output with 3D polygon input
In-Reply-To: <loom.20101012T112638-247@post.gmane.org>
References: <loom.20101012T112638-247@post.gmane.org>
Message-ID: <4CB44F86.3000201@pobox.com>

Jukka Rahkonen wrote:
> Hi,
> 
> I was sorting a shapefile with sortshp (Windows 2003 Server, GDAL 1.7.0dev,
> FWTools 2.4.2, released 2009/06/24, from FWTools 2.4.2).
...
> However, I have a feeling that perhaps it is not 3D Polygon layer but a normal
> Polygon layer with wrong headers or something. I did another test by using an
> intermediate 2D Polygon shapefile created by using ogr2ogr and option -lco
> SHPT=POLYGON. Size of the resulting .shp file was 207 KB, just the same than the
> invalid output from sortshp. Finally, sorting this 2D-shapefile with sortshp
> gives me a valid sorted shapefile.

Jukka,

sortshp is a MapServer utility.  If you file a ticket in the MapServer Trac
and assign it to me ("warmerdam") I'll try and make the utility a bit more
bulletproof.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From P.Halls at york.ac.uk  Tue Oct 12 10:24:53 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Tue Oct 12 10:26:31 2010
Subject: [gdal-dev] Efficiency question for using the OGR API
Message-ID: <4CB46FB5.7080003@york.ac.uk>

Dear All,

    when needing to have multiple output channels open through OGR to the same 
location, is it generally more efficient to open a new datasource / OGR instance 
for each channel / output layer, or to open one datasource / Ogr instance and 
maintain a list of layer handles for each of the separate layers accessed 
through this datasource / OGR instance?

    Are there any realistic limits to the number of 'open' layers per datasource?

Many thanks,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From harsh.govind at spadac.com  Tue Oct 12 10:35:20 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Tue Oct 12 10:36:28 2010
Subject: [gdal-dev] kmlsuperoverlay nodata support
In-Reply-To: <AANLkTi=SOt-5pAcJNV81jwyDSNFPSBt7-JWE-sL8M7Gw@mail.gmail.com>
References: <AANLkTi=SOt-5pAcJNV81jwyDSNFPSBt7-JWE-sL8M7Gw@mail.gmail.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E281DB43D379D@SPATCEX003.spadac.com>

What is the command line that you are using? Please try the following and let me know:

Gdal_translate.exe -of KMLSUPEROVERLAY c:\my.tif c:\myResult.kmz -co FORMAT=PNG

Regards,
Harsh Govind

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jamie Adams
Sent: Monday, October 11, 2010 3:21 PM
To: gdal-dev
Subject: [gdal-dev] kmlsuperoverlay nodata support

I'm evaluating the new kmlsuperoverlay driver in trunk and have been unable to get nodata values to show up as transparent in the output.  Are there format specific creation options I should be using?

- Jamie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101012/5b31a191/attachment.html
From warmerdam at pobox.com  Tue Oct 12 10:57:35 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 12 10:57:43 2010
Subject: [gdal-dev] Efficiency question for using the OGR API
In-Reply-To: <4CB46FB5.7080003@york.ac.uk>
References: <4CB46FB5.7080003@york.ac.uk>
Message-ID: <4CB4775F.9080708@pobox.com>

Peter J Halls wrote:
> Dear All,
> 
>    when needing to have multiple output channels open through OGR to the 
> same location, is it generally more efficient to open a new datasource / 
> OGR instance for each channel / output layer, or to open one datasource 
> / Ogr instance and maintain a list of layer handles for each of the 
> separate layers accessed through this datasource / OGR instance?
> 
>    Are there any realistic limits to the number of 'open' layers per 
> datasource?

Peter,

I would say that there is no significant difference at the OGR API level
to having many datasources with one layer each vs. one datasource with many
layers.

However, within particular drivers there can be dramatic differences.

For instance, many of the RDBMS drivers are somewhat fragile in the face
of mixing operations on different layer and will at least have to close
off transactions and start new ones each time you switch layers to
write (for instance).   So, for RDBMSes I'd suggest one connection for
each layer you want to concurrently write and perhaps one more for
read operations.

Some datasources are pretty expensive and it the cost of keeping multiple
copies open would be high.  For instance the S-57 driver aggressively
caches stuff in memory and it could be a disaster to have many
datasources open on the same underlying file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Oct 12 10:59:34 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 12 10:59:43 2010
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <4CB43D98.1030906@geograph.co.za>
References: <4CB43D98.1030906@geograph.co.za>
Message-ID: <4CB477D6.2020806@pobox.com>

Zoltan Szecsei wrote:
> Hi,
> Is there an opensource read/write capability for Geomedia Access MDB files?
> If not, are there any "work in progress" attempts?
> 
> I see they are "Standard Jet DBs", but the geometry coordinates seem to 
> be in a BLOB field.

zoltan,

I am not aware of an open source geomedia reader, though I've discussed
it with a few people from time to time.  I not aware of the BLOB format
but I suspect a sustained effort could lead to a decoding of it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wendell at enflight.com  Tue Oct 12 11:15:43 2010
From: wendell at enflight.com (Wendell Turner)
Date: Tue Oct 12 11:46:41 2010
Subject: [gdal-dev] combine shapefiles?
Message-ID: <20101012151543.GA23705@cloud3.rho.net>

Is there a utility that will combine multiple shapefiles
into one shapefile?  I tried ogr2ogr with several
combinations of arguments (overwrite, append, update) but it
didn't work.  Is there another utility that will will
combine them?

(mapserver queries don't seem to work right on layers with
multiple shapefiles using a tileindex)

Wendell

From warmerdam at pobox.com  Tue Oct 12 11:51:22 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 12 11:51:29 2010
Subject: [gdal-dev] combine shapefiles?
In-Reply-To: <20101012151543.GA23705@cloud3.rho.net>
References: <20101012151543.GA23705@cloud3.rho.net>
Message-ID: <4CB483FA.9040500@pobox.com>

Wendell Turner wrote:
> Is there a utility that will combine multiple shapefiles
> into one shapefile?  I tried ogr2ogr with several
> combinations of arguments (overwrite, append, update) but it
> didn't work.  Is there another utility that will will
> combine them?
> 
> (mapserver queries don't seem to work right on layers with
> multiple shapefiles using a tileindex)


Wendell,

I was successful doing this to copy a file to another file and then
append another copy of the same features onto the second file.

   ogr2ogr out.shp in.shp
   ogr2ogr -update -append out.shp in.shp in -nln out

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jaadfoo at gmail.com  Tue Oct 12 12:26:19 2010
From: jaadfoo at gmail.com (Jamie Adams)
Date: Tue Oct 12 12:26:22 2010
Subject: [gdal-dev] kmlsuperoverlay nodata support
In-Reply-To: <4B3B3C35D34C9345BC8914C199882E281DB43D379D@SPATCEX003.spadac.com>
References: <AANLkTi=SOt-5pAcJNV81jwyDSNFPSBt7-JWE-sL8M7Gw@mail.gmail.com>
	<4B3B3C35D34C9345BC8914C199882E281DB43D379D@SPATCEX003.spadac.com>
Message-ID: <AANLkTim9Z2zcZbneSbCNnOUe_CWPeB4t4mtZAwAsneDX@mail.gmail.com>

The FORMAT=PNG flag worked fine, I just couldn't figure out what -co options
were available.  I tried "gdalinfo --format KMLSUPEROVERLAY", but it doesn't
return much info.  Ideally I'd like to have hybrid output, where tiles with
transparancy are PNG and the rest are JPG.  Newer versions of gdal2tiles
support this.  Where can I find a list of what creation options are
available for the driver?

- Jamie

On Tue, Oct 12, 2010 at 7:35 AM, Harsh Govind <harsh.govind@spadac.com>wrote:

>  What is the command line that you are using? Please try the following and
> let me know:
>
>
>
> *Gdal_translate.exe ?of KMLSUPEROVERLAY c:\my.tif c:\myResult.kmz ?co
> FORMAT=PNG*
>
>
>
> *Regards,*
> *Harsh Govind*
>
>  *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Jamie Adams
> *Sent:* Monday, October 11, 2010 3:21 PM
> *To:* gdal-dev
> *Subject:* [gdal-dev] kmlsuperoverlay nodata support
>
>
>
> I'm evaluating the new kmlsuperoverlay driver in trunk and have been unable
> to get nodata values to show up as transparent in the output.  Are there
> format specific creation options I should be using?
>
>
>
> - Jamie
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101012/fbdfbcf6/attachment.html
From Bob.Moskovitz at conservation.ca.gov  Tue Oct 12 12:18:20 2010
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Tue Oct 12 12:33:26 2010
Subject: [gdal-dev] Geomedia mdb files
References: <4CB43D98.1030906@geograph.co.za> <4CB477D6.2020806@pobox.com>
Message-ID: <A73B6E7A4503E948826CE81A65AF5FEC0109FB8C@docexs1.ad.consrv.ca.gov>


Frank,

I'm also interested in seeing a Geomedia driver for gdal.  Btw, gvSIG has a Geomedia plugin (see https://code.google.com/p/extmdb ).  This might help you figure out how to make a driver for gdal.

Bob Moskovitz
Seismic Hazards Mapping Program
California Geological Survey

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org on behalf of Frank Warmerdam
Sent: Tue 10/12/2010 7:59 AM
To: Zoltan Szecsei
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Geomedia mdb files
 
Zoltan Szecsei wrote:
> Hi,
> Is there an opensource read/write capability for Geomedia Access MDB files?
> If not, are there any "work in progress" attempts?
> 
> I see they are "Standard Jet DBs", but the geometry coordinates seem to 
> be in a BLOB field.

zoltan,

I am not aware of an open source geomedia reader, though I've discussed
it with a few people from time to time.  I not aware of the BLOB format
but I suspect a sustained effort could lead to a decoding of it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Tue Oct 12 12:33:59 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 12 12:34:10 2010
Subject: [gdal-dev] Geomedia mdb files
In-Reply-To: <A73B6E7A4503E948826CE81A65AF5FEC0109FB8C@docexs1.ad.consrv.ca.gov>
References: <4CB43D98.1030906@geograph.co.za> <4CB477D6.2020806@pobox.com>
	<A73B6E7A4503E948826CE81A65AF5FEC0109FB8C@docexs1.ad.consrv.ca.gov>
Message-ID: <4CB48DF7.2080302@pobox.com>

Moskovitz, Bob wrote:
> Frank,
> 
> I'm also interested in seeing a Geomedia driver for gdal.  Btw, gvSIG has a
> Geomedia plugin (see https://code.google.com/p/extmdb ).  This might help
> you figure out how to make a driver for gdal.

Bob,

Interesting.  Using the extmdb MDBGeometryAdapter.java code it should be
possible to fairly easily implement geomedia feature reading in OGR.

Anyone interested in taking the task on or funding it?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Tue Oct 12 22:43:13 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Tue Oct 12 22:44:55 2010
Subject: [gdal-dev] Is it possible to convert shapefile from PointZ to Point?
Message-ID: <4CB51CC1.5030201@swoodbridge.com>

Hi all,

Is it possible to convert shapefile from type PointZ to Point using 
ogr2ogr? and how?

I can't use shp2pgsql to load the file because it is attempting to free 
an invalid pointer for some reason (which I will report to that list). 
The file has already be reprojected using ogr2ogr and works in OpenEV. 
My thinking it to convert it to 2D and try loading that and see if that 
helps from a diagnostic point of view.

I have not tried loading the it via ogr2ogr which I will try, but would 
still like the file as Point and not PointZ.

Thanks,
   -Steve
From jukka.rahkonen at mmmtike.fi  Wed Oct 13 00:29:40 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Oct 13 00:29:50 2010
Subject: [gdal-dev] Re: Is it possible to convert shapefile from PointZ to
	Point?
References: <4CB51CC1.5030201@swoodbridge.com>
Message-ID: <loom.20101013T062752-232@post.gmane.org>

Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:

> 
> Hi all,
> 
> Is it possible to convert shapefile from type PointZ to Point using 
> ogr2ogr? and how?

Have you tried with -lco SHPT=POINT? See http://gdal.org/ogr/drv_shapefile.html

-Jukka Rahkonen-

From jukka.rahkonen at mmmtike.fi  Wed Oct 13 03:10:52 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Oct 13 03:11:06 2010
Subject: [gdal-dev] Re: combine shapefiles?
References: <20101012151543.GA23705@cloud3.rho.net>
	<4CB483FA.9040500@pobox.com>
Message-ID: <loom.20101013T084944-515@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:


> I was successful doing this to copy a file to another file and then
> append another copy of the same features onto the second file.
> 
>    ogr2ogr out.shp in.shp
>    ogr2ogr -update -append out.shp in.shp in -nln out

That's what I have used too, exept I think there is one "in" too much in the
latter command and this should be enough.
ogr2ogr -update -append out.shp in.shp -nln out

What is important is to use the -nln switch, otherwise ogr2ogr tries to create a
new layer into the out.shp shapefile for each shapefile to be added and that
will fail. And of course the aim is to collect everything on the same layer.

However, the .shp part of shapefile can not grow bigger than 4 gigabytes. For
bigger datasets spatialite feels a good alternative and I have done some tests
with it. Unfortunately adding new shapefiles into spatialite comes extremely
slow once the filesize of the database gets bigger and I have not had patience
to continue beyond 8 gigabytes. I feel this has something to do with journal
tables which spatialite is using for making updates safe. My guess is that the
bigger the database file is the bigger is also the journal table and finally all
the time is spent with journals.  I noticed that after 24 hour run I had more
than 30000 deleted spatialite journal tables in the trashbox of my network drive.

Your ultimate problem was that Mapserver WMS GetFeatureInfo request does not
work through OGR tileindex. I had a try with our WMS server and I can see the
same behaviour. Result is allways "msQueryByPoint(): Search returned no results.
No matching record(s) found." I suggest you to have another try on Mapserver
mailing list and see if this is something worth a bug report or feature request.

-Jukka Rahkonen-

From sagar at spiffymap.net  Wed Oct 13 05:01:23 2010
From: sagar at spiffymap.net (sagar_sahay)
Date: Wed Oct 13 05:01:28 2010
Subject: [gdal-dev] Re: GDAL JAVA problem
In-Reply-To: <201010112001.29840.even.rouault@mines-paris.org>
References: <20090112190512.23669.qmail@s466.sureserver.com>
	<20101006140304.25200.qmail@s466.sureserver.com>
	<1286374482538-5607231.post@n2.nabble.com>
	<1286375738595-5607309.post@n2.nabble.com>
	<201010061937.42078.even.rouault@mines-paris.org>
	<1286442216701-5610554.post@n2.nabble.com>
	<201010112001.29840.even.rouault@mines-paris.org>
Message-ID: <1286960483415-5630121.post@n2.nabble.com>


Even,

I am actually trying to run the ogr2ogr.java from the link which you have
specified. In that if I don't load all the .so files individually it gives
me an exception at .AllRegister() method and the execution stops, but when I
load them individually it catches the exception and displays the exception
message as displayed in my previous post without stopping the execution. I
have manually built and referenced the gdal jar file in the netbeans
project. The exception message is still coming though.

Thanks,
Sagar
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-JAVA-problem-tp2147356p5630121.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Wed Oct 13 05:17:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 13 05:17:13 2010
Subject: [gdal-dev] Re: GDAL JAVA problem
In-Reply-To: <1286960483415-5630121.post@n2.nabble.com>
References: <20090112190512.23669.qmail@s466.sureserver.com>
	<20101006140304.25200.qmail@s466.sureserver.com>
	<1286374482538-5607231.post@n2.nabble.com>
	<1286375738595-5607309.post@n2.nabble.com>
	<201010061937.42078.even.rouault@mines-paris.org>
	<1286442216701-5610554.post@n2.nabble.com>
	<201010112001.29840.even.rouault@mines-paris.org>
	<1286960483415-5630121.post@n2.nabble.com>
Message-ID: <1286961425.4cb57911934dd@webmail.free.fr>

Sagar,

this is normally just a matter of having all the needed .so (libgdal.so and the
4 JNI .so) in your LD_LIBRARY_PATH and gdal.jar in your java classpath.

I'd encourage you to try on the command line first.

See http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix
From peifer at gmx.eu  Wed Oct 13 05:31:12 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct 13 05:32:38 2010
Subject: [gdal-dev] Re: ERROR 4: ... is a grib file,
 but no raster dataset was successfully identified.
In-Reply-To: <4CA9E563.5050408@gmx.eu>
References: <4CA9D397.7030304@gmx.eu>	<1286198870.12572.2.camel@winkey.org>	<4CA9DF7A.30507@gmx.eu>	<1286202243.12572.11.camel@winkey.org>
	<4CA9E563.5050408@gmx.eu>
Message-ID: <4CB57C60.2070409@gmx.eu>

Hello again.

I am still running into this error with gdalinfo:

$ gdalinfo HRES_ENS_2010101000+000.grib2
ERROR 4: HRES_ENS_2010101000+000.grib2 is a grib file, but no raster 
dataset was successfully identified.
gdalinfo failed - unable to open 'HRES_ENS_2010101000+000.grib2'.


However, other tools (wgrib2 and grib_ls from libgrib-api-tools) read 
the same file without any problems, see below.

Any ideas? The file is here:
http://transfer.eea.europa.eu/download/07ae94812cbe4823600b4d5ae64aadca

Thanks in advance, Hermann


$ wgrib2 HRES_ENS_2010101000+000.grib2
1:0:d=2010101000:MASSDEN:surface:anl:ENS=hi-res ctl chemical=Water Vapour
2:675793:d=2010101000:MASSDEN:500 m above ground:anl:ENS=hi-res ctl 
chemical=Water Vapour
3:1351586:d=2010101000:MASSDEN:1000 m above ground:anl:ENS=hi-res ctl 
chemical=Water Vapour
4:2027379:d=2010101000:MASSDEN:3000 m above ground:anl:ENS=hi-res ctl 
chemical=Water Vapour
5:2703172:d=2010101000:MASSDEN:surface:anl:ENS=hi-res ctl 
chemical=Nitrous Oxide
6:3378965:d=2010101000:MASSDEN:500 m above ground:anl:ENS=hi-res ctl 
chemical=Nitrous Oxide
7:4054758:d=2010101000:MASSDEN:1000 m above ground:anl:ENS=hi-res ctl 
chemical=Nitrous Oxide
8:4730551:d=2010101000:MASSDEN:3000 m above ground:anl:ENS=hi-res ctl 
chemical=Nitrous Oxide
9:5406344:d=2010101000:MASSDEN:surface:anl:ENS=hi-res ctl chemical=Ammonium
10:6082137:d=2010101000:MASSDEN:500 m above ground:anl:ENS=hi-res ctl 
chemical=Ammonium
11:6757930:d=2010101000:MASSDEN:1000 m above ground:anl:ENS=hi-res ctl 
chemical=Ammonium
12:7433723:d=2010101000:MASSDEN:3000 m above ground:anl:ENS=hi-res ctl 
chemical=Ammonium
13:8109516:d=2010101000:MASSDEN:surface:anl:ENS=hi-res ctl 
chemical=Nitrogen Dioxide
14:8785309:d=2010101000:MASSDEN:500 m above ground:anl:ENS=hi-res ctl 
chemical=Nitrogen Dioxide
15:9461102:d=2010101000:MASSDEN:1000 m above ground:anl:ENS=hi-res ctl 
chemical=Nitrogen Dioxide
16:10136895:d=2010101000:MASSDEN:3000 m above ground:anl:ENS=hi-res ctl 
chemical=Nitrogen Dioxide
17:10812688:d=2010101000:MASSDEN:surface:anl:ENS=hi-res ctl chemical=??? 
see code 4.230
18:11488481:d=2010101000:MASSDEN:500 m above ground:anl:ENS=hi-res ctl 
chemical=??? see code 4.230
19:12164274:d=2010101000:MASSDEN:1000 m above ground:anl:ENS=hi-res ctl 
chemical=??? see code 4.230
20:12840067:d=2010101000:MASSDEN:3000 m above ground:anl:ENS=hi-res ctl 
chemical=??? see code 4.230

From peifer at gmx.eu  Wed Oct 13 12:44:05 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct 13 12:43:55 2010
Subject: [gdal-dev] Re: combine shapefiles?
In-Reply-To: <loom.20101013T084944-515@post.gmane.org>
References: <20101012151543.GA23705@cloud3.rho.net>	<4CB483FA.9040500@pobox.com>
	<loom.20101013T084944-515@post.gmane.org>
Message-ID: <4CB5E1D5.4060507@gmx.eu>

On 13/10/2010 09:10, Jukka Rahkonen wrote:
>
> However, the .shp part of shapefile can not grow bigger than 4 gigabytes.

Did you ever succeed in creating a, say: 3.9G .shp file?

I do remember that some time ago, I was running into problems around 2G, 
which wasn't too much of a surprise, as [1] suggests that:

 > There is a 2 GB size limit for any shapefile component file,...

Hermann

[1] 
http://webhelp.esri.com/arcgiSDEsktop/9.3/index.cfm?TopicName=Geoprocessing_considerations_for_shapefile_output
From Jukka.Rahkonen at mmmtike.fi  Wed Oct 13 13:15:37 2010
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Oct 13 13:31:48 2010
Subject: [gdal-dev] Re: combine shapefiles?
References: <20101012151543.GA23705@cloud3.rho.net>	<4CB483FA.9040500@pobox.com>
	<loom.20101013T084944-515@post.gmane.org> <4CB5E1D5.4060507@gmx.eu>
Message-ID: <CC197224AC75CE4DB23F739B16891B86E3498D@tikka.haapa.mmm.fi>

Hermann Peifer wrote:
 
> On 13/10/2010 09:10, Jukka Rahkonen wrote:
>
>> However, the .shp part of shapefile can not grow bigger than 4 gigabytes.
> Did you ever succeed in creating a, say: 3.9G .shp file?
> I do remember that some time ago, I was running into problems around 2G, 
> which wasn't too much of a surprise, as [1] suggests that:
> > There is a 2 GB size limit for any shapefile component file,...

> Hermann

> [1] 
> http://webhelp.esri.com/arcgiSDEsktop/9.3/index.cfm?TopicName=Geoprocessing_considerations_for_shapefile_output

See http://trac.osgeo.org/gdal/ticket/3236

It should be possible now to write and read .shp parts up to 4 GB but I have not tested that myself. For sure 2 GB is not a limit for .dbf because I have myself reached 32 gigabytes.

-Jukka-

From simon.thepot at makina-corpus.com  Wed Oct 13 15:35:14 2010
From: simon.thepot at makina-corpus.com (=?UTF-8?Q?Simon_Th=C3=A9pot?=)
Date: Wed Oct 13 15:41:37 2010
Subject: [gdal-dev] est failure on gdal 1.7 (layer.getExtent). Isolated in C
	and Python
Message-ID: <e41102812fbe09acb65b23b4f08106ab@makina-corpus.com>

Hi all,
i'm experiencing a test failure on gdal1.7,postgis 1.4, Python2.6,
Django-1.2.3 that I
isolated in Python and C (so I think it might not be related to django).

Python : http://pastebin.com/Pz40E63R
C : http://pastebin.com/KXHENU90

The loaded files are at (pasted in the C source code as commentary) :
#
http://code.djangoproject.com/browser/django/trunk/django/contrib/gis/tests/data/test_vrt/test_vrt.vrt
#
http://code.djangoproject.com/browser/django/trunk/django/contrib/gis/tests/data/test_vrt/test_vrt.csv

Those are correct as ogrinfo seems to indicate.

getExtent won't work and result in a (GRException: OGR failure).

The C version seems pretty straight forward and I hope someone may give me
a hand on this.



Synthesis of the below part: only one test out of 61 failed, for this one,
only one fixture out of three failed (thus, 2 calls out of three to
layer.extent succeeded...), the one using the vrt file.
=======
Here come some details on the python/django part where the test failure
first appeared :

The file :
http://code.djangoproject.com/browser/django/tags/releases/1.2.3/django/contrib/gis/gdal/tests/test_ds.py

Only one fail :
test
http://code.djangoproject.com/browser/django/tags/releases/1.2.3/django/contrib/gis/gdal/tests/test_ds.py#L72
at line
http://code.djangoproject.com/browser/django/tags/releases/1.2.3/django/contrib/gis/gdal/tests/test_ds.py#L88

And this only for one fixture out of three (the middle one) :
http://code.djangoproject.com/browser/django/tags/releases/1.2.3/django/contrib/gis/gdal/tests/test_ds.py#L26

All of this as been isolated in the simplest python file
(http://pastebin.com/Pz40E63R <= same link as above).
=======


Thanks a lot for any insight,
Cheers,
Simon Thepot


ps : As i investigated, I think it is due to a GeomType that is not set
for its
OGRFeatureDefn (GetLayerDef). But... it seems the GeomType is set in
Python (and C I think), as it
ansers me Point25D.

From warmerdam at pobox.com  Wed Oct 13 16:04:34 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 13 16:04:42 2010
Subject: [gdal-dev] est failure on gdal 1.7 (layer.getExtent). Isolated
	in C and Python
In-Reply-To: <e41102812fbe09acb65b23b4f08106ab@makina-corpus.com>
References: <e41102812fbe09acb65b23b4f08106ab@makina-corpus.com>
Message-ID: <4CB610D2.3040402@pobox.com>

Simon Th?pot wrote:
> getExtent won't work and result in a (GRException: OGR failure).

Simon,

It is a bug in OGRVRTLayer::GetExtent().  It is mistakenly directly calling
GetExtent() on the CSV file layer when it really needs to translate the
features (pulling out the right fields for geometry) and compute the extents
on that.  The problem persists in trunk.

Could you file a ticket on this?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From craig.destigter at koordinates.com  Wed Oct 13 23:39:12 2010
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Wed Oct 13 23:39:15 2010
Subject: [gdal-dev] cubic / bilinear resampling with gdalwarp looks
	similar to nearest neighbour
In-Reply-To: <f832ba00c89e251d7f96dec12f9f8708.squirrel@pricepages.org>
References: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>
	<201009292334.33205.even.rouault@mines-paris.org>
	<AANLkTinrg33ruOQS-uiga4=xYvbFvTQ85F1bLk8kvfpy@mail.gmail.com>
	<f832ba00c89e251d7f96dec12f9f8708.squirrel@pricepages.org>
Message-ID: <AANLkTi=Eh4rew3L2K0fiv-1fcNU89Js5o9f02g15hw-U@mail.gmail.com>

Apologies for the long delay. I've finally had opportunity to look into this
again.

I'm still unsure why exactly the bilinear and bicubic resampling produces
such second-rate output in GDAL. I have a few questions:

1. Is there a fundamental reason why the bilinear resampling couldn't use
all the pixels from the source region, rather than just the 4 corner pixels?
A destination pixel would then be the weighted average of all the source
pixels for each band.

2. Suppose a 1/6 sampling ratio, i.e. a 6x6 region (0, 0)-->(6, 6) in the
source image corresponds to a 1x1 region in the output.
What source pixels are used by the bilinear resampling in GDAL?

Wikipedia <http://en.wikipedia.org/wiki/Bilinear_interpolation> suggests it
should be the 'nearest' four pixels to the desired destination pixel, i.e.
(2, 2), (2, 3), (3, 2), (3, 3). Is that what GDAL is doing, or is it using
(0, 0), (0, 5), (5, 0), (5, 5) ?

3. Assuming a 'no' answer to (1), if I were to contribute a patch to make
bilinear/bicubic resampling take all the source pixels into account, would
it meet much opposition? It would probably make large-scale downsampling
using these methods much slower, though its questionable whether anyone
would complain given that the quality of current output is so poor...

Thanks for your help
Craig de Stigter

On Thu, Sep 30, 2010 at 12:30 PM, Seth Price <seth@pricepages.org> wrote:

> The only way to 'force' it is to use cubicspline or lanczos. Everything
> else has a hardcoded filter size. If those are too slow, I'd suggest using
> the OpenCL code I wrote over the summer. It's many times faster. (It
> should be in trunk soon if it isn't already.)
>
> http://github.com/mailseth/OpenCL-integration-for-GRASS---GDAL
>
> ~Seth
>
>
>
> On Wed, September 29, 2010 4:12 pm, Craig de Stigter wrote:
> > Thanks Even
> >
> > However if I do the same thing with reprojection I get the same result.
> > gdalwarp output looks sharp and ugly, imagemagick output looks nice.
> >
> > Is there any way to force the bilinear/cubic interpolation to notice more
> > pixels? The other interpolation methods are much slower, I imagine even
> > forcing cubic to notice all of the 5x5 pixels would still be faster.
> >
> > Regards
> > Craig de Stigter
> >
> > On Thu, Sep 30, 2010 at 10:34 AM, Even Rouault
> > <even.rouault@mines-paris.org
> >> wrote:
> >
> >> Craig,
> >>
> >> The main reason is that you are using gdalwarp to reduce an image by a
> >> large
> >> factor and not reproject it, which generally only involves image
> >> resizing
> >> by
> >> small factors. The implementation of the bilinear and cubic resampling
> >> algorithms is currently not designed for the pure resizing use case and
> >> takes
> >> only into account a few source pixels (basically if to compute a
> >> destination
> >> pixel you would need to take into account a 5x5 source window, they will
> >> only
> >> used the 4 corners of that square, which fine usually since those are
> >> just
> >> the
> >> immediate neighbours of the source pixel), whereas cubicspline and
> >> lancsoz
> >> take into account more pixels (all the pixels in the 5x5 square).
> >>
> >> Best regards,
> >>
> >> Even
> >>
> >> Le mercredi 29 septembre 2010 22:27:01, Craig de Stigter a ?crit :
> >> > Hi folks
> >> >
> >> > I filed this bug <http://trac.osgeo.org/gdal/ticket/3740> on gdal a
> >> few
> >> > weeks back and haven't heard anything since.
> >> >
> >> > Would someone mind taking a look at it?
> >> >
> >> > Thanks
> >> > Craig de Stigter
> >>
> >
> >
> >
> > --
> > Koordinates Ltd
> > PO Box 1604, Shortland St, Auckland, New Zealand
> > Phone +64-9-966 0433 Fax +64-9-969 0045
> > Web http://www.koordinates.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


-- 
Koordinates Ltd
PO Box 1604, Shortland St, Auckland, New Zealand
Phone +64-9-966 0433 Fax +64-9-969 0045
Web http://www.koordinates.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101014/464d335c/attachment.html
From warmerdam at pobox.com  Wed Oct 13 23:48:31 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 13 23:48:42 2010
Subject: [gdal-dev] cubic / bilinear resampling with gdalwarp looks
	similar to nearest neighbour
In-Reply-To: <AANLkTi=Eh4rew3L2K0fiv-1fcNU89Js5o9f02g15hw-U@mail.gmail.com>
References: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>
	<201009292334.33205.even.rouault@mines-paris.org>
	<AANLkTinrg33ruOQS-uiga4=xYvbFvTQ85F1bLk8kvfpy@mail.gmail.com>
	<f832ba00c89e251d7f96dec12f9f8708.squirrel@pricepages.org>
	<AANLkTi=Eh4rew3L2K0fiv-1fcNU89Js5o9f02g15hw-U@mail.gmail.com>
Message-ID: <4CB67D8F.2090203@pobox.com>

Craig de Stigter wrote:
> Apologies for the long delay. I've finally had opportunity to look into 
> this again. 
> 
> I'm still unsure why exactly the bilinear and bicubic resampling 
> produces such second-rate output in GDAL. I have a few questions:
> 
> 1. Is there a fundamental reason why the bilinear resampling couldn't 
> use all the pixels from the source region, rather than just the 4 corner 
> pixels? A destination pixel would then be the weighted average of all 
> the source pixels for each band.

Craig,

Well, it would no longer be bilinear.  It would be averaged.

> 2. Suppose a 1/6 sampling ratio, i.e. a 6x6 region (0, 0)-->(6, 6) in 
> the source image corresponds to a 1x1 region in the output.
> What source pixels are used by the bilinear resampling in GDAL?
>
> Wikipedia <http://en.wikipedia.org/wiki/Bilinear_interpolation> suggests 
> it should be the 'nearest' four pixels to the desired destination pixel, 
> i.e. (2, 2), (2, 3), (3, 2), (3, 3). Is that what GDAL is doing, or is 
> it using (0, 0), (0, 5), (5, 0), (5, 5) ?

It will use (2, 2), (2, 3), (3, 2), (3, 3).

> 3. Assuming a 'no' answer to (1), if I were to contribute a patch to 
> make bilinear/bicubic resampling take all the source pixels into 
> account, would it meet much opposition? It would probably make 
> large-scale downsampling using these methods much slower, though its 
> questionable whether anyone would complain given that the quality of 
> current output is so poor...

I'm not adverse to your preparing a patch that implements an
"averaged" resampling kernel, but it doesn't replace bilinear.

Generally speaking the warper is not intended for dramatic changes
of resolution - it is intended for changes of geometry at roughly the
same resolution - for instance reprojection.

Average was already implemented as a resampling kernel in the
"build overviews" tool because it is aimed at dramatic changes of
resolution.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From seth at pricepages.org  Thu Oct 14 00:24:49 2010
From: seth at pricepages.org (Seth Price)
Date: Thu Oct 14 00:24:55 2010
Subject: [gdal-dev] cubic / bilinear resampling with gdalwarp looks
	similar to nearest neighbour
In-Reply-To: <4CB67D8F.2090203@pobox.com>
References: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>
	<201009292334.33205.even.rouault@mines-paris.org>
	<AANLkTinrg33ruOQS-uiga4=xYvbFvTQ85F1bLk8kvfpy@mail.gmail.com>
	<f832ba00c89e251d7f96dec12f9f8708.squirrel@pricepages.org>
	<AANLkTi=Eh4rew3L2K0fiv-1fcNU89Js5o9f02g15hw-U@mail.gmail.com>
	<4CB67D8F.2090203@pobox.com>
Message-ID: <54A58F7E-90BC-4EB5-93AB-B5C16D478B31@pricepages.org>

Bilinear uses the nearest four pixels, bicubic uses the nearest 16  
pixels. That's what makes them linear and cubic. Do you have a source  
for another way to do it?

It would be possible to do averaging, *then* resample, but I'm not  
sure that's worth it here. (Weighted averaging would be better anyway.)
~Seth


On Oct 13, 2010, at 9:48 PM, Frank Warmerdam wrote:

> Craig de Stigter wrote:
>> Apologies for the long delay. I've finally had opportunity to look  
>> into this again. I'm still unsure why exactly the bilinear and  
>> bicubic resampling produces such second-rate output in GDAL. I have  
>> a few questions:
>> 1. Is there a fundamental reason why the bilinear resampling  
>> couldn't use all the pixels from the source region, rather than  
>> just the 4 corner pixels? A destination pixel would then be the  
>> weighted average of all the source pixels for each band.
>
> Craig,
>
> Well, it would no longer be bilinear.  It would be averaged.
>
>> 2. Suppose a 1/6 sampling ratio, i.e. a 6x6 region (0, 0)-->(6, 6)  
>> in the source image corresponds to a 1x1 region in the output.
>> What source pixels are used by the bilinear resampling in GDAL?
>>
>> Wikipedia <http://en.wikipedia.org/wiki/Bilinear_interpolation>  
>> suggests it should be the 'nearest' four pixels to the desired  
>> destination pixel, i.e. (2, 2), (2, 3), (3, 2), (3, 3). Is that  
>> what GDAL is doing, or is it using (0, 0), (0, 5), (5, 0), (5, 5) ?
>
> It will use (2, 2), (2, 3), (3, 2), (3, 3).
>
>> 3. Assuming a 'no' answer to (1), if I were to contribute a patch  
>> to make bilinear/bicubic resampling take all the source pixels into  
>> account, would it meet much opposition? It would probably make  
>> large-scale downsampling using these methods much slower, though  
>> its questionable whether anyone would complain given that the  
>> quality of current output is so poor...
>
> I'm not adverse to your preparing a patch that implements an
> "averaged" resampling kernel, but it doesn't replace bilinear.
>
> Generally speaking the warper is not intended for dramatic changes
> of resolution - it is intended for changes of geometry at roughly the
> same resolution - for instance reprojection.
>
> Average was already implemented as a resampling kernel in the
> "build overviews" tool because it is aimed at dramatic changes of
> resolution.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>

From Ralf.Suhr at itc-halle.de  Thu Oct 14 08:11:23 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Oct 14 08:11:28 2010
Subject: [gdal-dev] Error in gml reader.
Message-ID: <201010141411.23831.Ralf.Suhr@itc-halle.de>

Hello List,

I am working with gml v3 data. Sometimes coordiantes like 712345.082 
5432000.318 become 712345.082 5432 when using the postgres database driver. 
But everthing is correct when using the new pg_dump driver. The gml data is 
read by nas driver who used gml driver for converting geometrys.

I have created a ticket.

Gr
Ralf
From jluis at ualg.pt  Thu Oct 14 11:01:06 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Oct 14 11:01:22 2010
Subject: [gdal-dev] building with PDF driver on Windows
Message-ID: <4CB71B32.90200@ualg.pt>

Hi,

I tried to build GDAL on Win with PDF support and CV2010

Well that's an adventure. Instructions on how to build poppler are 
completely absent (but there is on CMake list file that we may try to 
guess what's essential from the optional stuff).  Building free type 
raised an error somewhere (something about an already defined INT32)

Next, there was this error (easily fixed with a pair of '/')

C:/programs/compa_libs/poppler\goo/gtypes.h(31) : error C2371: 'GBool' : 
redefinition; different bas ic types
         ..\..\port\cpl_port.h(169) : see declaration of 'GBool'

But finally I stopped at the errors bellow. I see in the nmake.opt that 
it links also against liblcms-1.lib. I don't know this one but Google 
seams indicate that it is
"Little CMS (color management engine)". Is that so? And the errors below 
are they explained by the fact that I'm not linking against this lib?
Clearly, we need a bit more info on how build with PDF support.

Thanks

Joaquim



         lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
ogrsf_frmts.lib(resolvexlinks.obj) : warning LNK4221: This object file 
does not define any previously undefined public symbols, so it will not 
be used by any link operation that consumes this library
         link /nologo /dll /INCLUDE:_OGRFeatureStylePuller  
/INCLUDE:_OSRValidate  /INCLUDE:_OPTGetPr
ojectionMethods  /INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll 
/INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  
/INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  
/INCLUDE:_OCTNewCoordinateTransformation@8  port\*.obj gcore\*.obj 
alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib 
ogr\ogr.lib          
C:\programs\compa_libs\hdf-4.2.5\compileds\vc10_32\lib\hm425m.lib 
C:\programs\compa_libs\hdf-4.2.5\compileds\vc10_32\lib\hd425m.lib 
Ws2_32.lib  
c:\programs\Geo_DSDK-7.0.0.2167\lib\Release_md\lti_dsdk_dll.lib 
advapi32.lib user32.lib    
C:\progs_cygw\netcdf-3.6.3\compileds\VC10_32\lib\libnetcdf.lib     
C:\programs\proj4\compileds\VC10_32\lib\proj_i.lib     
C:\programs\compa_libs\hdf5-1.8.4-patch1\compileds\vc10_32\dll\hdf5dll.lib     
C:\program
s\compa_libs\curl-7.20.0\compileds\vc10_32/lib/libcurl_imp.lib 
wsock32.lib wldap32.lib winmm.lib
          
C:\programs\compa_libs\poppler\buildVC2010_32\Release/poppler.lib 
C:\programs\compa_libs\freetype-2.4.3\objs\win32\vc2008\freetype243.lib 
advapi32.lib gdi32.lib gcore\Version.res  /out:gdal17.dll /implib:gdal_i.lib
    Creating library gdal_i.lib and object gdal_i.exppdfdataset.obj : 
error LNK2019: unresolved external symbol "public: void __thiscall 
PDFDoc::displayP
ageSlice(class OutputDev 
*,int,double,double,int,int,int,int,int,int,int,int,int (__cdecl*)(void *),
void *,int (__cdecl*)(class Annot *,void *),void *)" 
(?displayPageSlice@PDFDoc@@QAEXPAVOutputDev@@HN
NHHHHHHHHP6AHPAX@Z1P6AHPAVAnnot@@1@Z1@Z) referenced in function "public: 
virtual enum CPLErr __thisc
all PDFRasterBand::IReadBlock(int,int,void *)" 
(?IReadBlock@PDFRasterBand@@UAE?AW4CPLErr@@HHPAX@Z)
pdfdataset.obj : error LNK2019: unresolved external symbol "public: 
__thiscall SplashOutputDev::SplashOutputDev(enum 
SplashColorMode,int,int,unsigned char *,int,int)" 
(??0SplashOutputDev@@QAE@W4SplashColorMode@@HHPAEHH@Z) referenced in 
function "public: virtual enum CPLErr __thiscall PDFRasterBand::
IReadBlock(int,int,void *)" 
(?IReadBlock@PDFRasterBand@@UAE?AW4CPLErr@@HHPAX@Z)
gdal17.dll : fatal error LNK1120: 2 unresolved externals
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual 
Studio 10.0\VC\BIN\link.EXE"' :
  return code '0x460'
From nhatzop at gmail.com  Thu Oct 14 12:52:29 2010
From: nhatzop at gmail.com (nickos85)
Date: Thu Oct 14 12:52:31 2010
Subject: [gdal-dev] tileindex performance
Message-ID: <1287075149883-5635751.post@n2.nabble.com>


Hi,

I have a mapserver and a high resolution image about 4GB when i make the
image tiles with a size of 512x512 using gdal_retile I have better result
instead of a tile size of 256x256. I think the problem is on how the search
algorithm for the location of the tile can be improoved. Any suggestions?

--Nikos Hatzopoulos 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/tileindex-performance-tp5635751p5635751.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Thu Oct 14 12:59:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct 14 12:59:36 2010
Subject: [gdal-dev] tileindex performance
In-Reply-To: <1287075149883-5635751.post@n2.nabble.com>
References: <1287075149883-5635751.post@n2.nabble.com>
Message-ID: <4CB736EF.7050403@pobox.com>

nickos85 wrote:
> Hi,
> 
> I have a mapserver and a high resolution image about 4GB when i make the
> image tiles with a size of 512x512 using gdal_retile I have better result
> instead of a tile size of 256x256. I think the problem is on how the search
> algorithm for the location of the tile can be improoved. Any suggestions?

Nikos,

Did you spatially index your tile index?  The tileindex should be spatially
indexed with shptree.

What sorts of map requests are you making?  Are they made at near full
resolution or are they overviews?

I'm generally not a fan of tiling with gdal_retile, and prefer to make one,
or a few, large files internally tiled with overviews.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From elijah at villagis.com  Thu Oct 14 13:02:14 2010
From: elijah at villagis.com (Elijah Robison)
Date: Thu Oct 14 13:03:48 2010
Subject: [gdal-dev] tileindex performance
In-Reply-To: <1287075149883-5635751.post@n2.nabble.com>
References: <1287075149883-5635751.post@n2.nabble.com>
Message-ID: <4CB73796.9080907@villagis.com>

Hi Nikos,

I also have difficulty tiling large, high res images with gdal_retile.  
I would say our average process--a county-wide, 1-foot resolution 
ECW--takes about a month to run to completion.

At first, tiles are generated with blazing speed.  But by the time the 
routine has been running for about 24-hours, it slows to a crawl.  Is 
this the symptoms you are experiencing or are you running into something 
else?

I would very much love to get to the bottom of this and find a way to 
maintain the original performance throughout a tiling routine.

Best, Elijah Robison


nickos85 wrote:
> Hi,
>
> I have a mapserver and a high resolution image about 4GB when i make the
> image tiles with a size of 512x512 using gdal_retile I have better result
> instead of a tile size of 256x256. I think the problem is on how the search
> algorithm for the location of the tile can be improoved. Any suggestions?
>
> --Nikos Hatzopoulos 
>   
From even.rouault at mines-paris.org  Thu Oct 14 13:32:53 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 14 13:32:49 2010
Subject: [gdal-dev] building with PDF driver on Windows
In-Reply-To: <4CB71B32.90200@ualg.pt>
References: <4CB71B32.90200@ualg.pt>
Message-ID: <201010141932.53400.even.rouault@mines-paris.org>

Le jeudi 14 octobre 2010 17:01:06, Joaquim Luis a ?crit :
> Hi,
> 
> I tried to build GDAL on Win with PDF support and CV2010
> 
> Well that's an adventure.

I trust you and didn't even try this way.

Instead I just downloaded the kde-win32 installer, used the "packager mode" 
(or whatever it is called. I'm just quoting from my memory of doing this a few 
weeks ago), and selected the poppler, freetype and lcms packages and their 
developement packages. The only requirement for GDAL is poppler, freetype and 
lcms appears to be poppler requirements on this KDE build. But those lib only 
work with MSVC 2008 if I remember.
From Debitsch at T-Online.de  Thu Oct 14 13:29:04 2010
From: Debitsch at T-Online.de (Rasmus Debitsch)
Date: Thu Oct 14 13:49:35 2010
Subject: [gdal-dev] Re: Geomedia mdb files
Message-ID: <A4A6FBA2D0674484B0C9EDC7B7614F33@sagnix>

You may find a description of the Geomedia BLOB format at 
http://www.mygeomedia.com/articles/gdoblobs.asp. A more detailed description 
should be available via the Intergraph synergy program 
(http://synergy.intergraph.com/).

Rasmus 

From jluis at ualg.pt  Thu Oct 14 14:58:51 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Oct 14 14:59:27 2010
Subject: [gdal-dev] building with PDF driver on Windows
In-Reply-To: <201010141932.53400.even.rouault@mines-paris.org>
References: <4CB71B32.90200@ualg.pt>
	<201010141932.53400.even.rouault@mines-paris.org>
Message-ID: <4CB752EB.4070201@ualg.pt>

On 14-10-2010 18:32, Even Rouault wrote:
> Le jeudi 14 octobre 2010 17:01:06, Joaquim Luis a ?crit :
>    
>> Hi,
>>
>> I tried to build GDAL on Win with PDF support and CV2010
>>
>> Well that's an adventure.
>>      
> I trust you and didn't even try this way.
>
> Instead I just downloaded the kde-win32 installer, used the "packager mode"
> (or whatever it is called. I'm just quoting from my memory of doing this a few
> weeks ago), and selected the poppler, freetype and lcms packages and their
> developement packages. The only requirement for GDAL is poppler, freetype and
> lcms appears to be poppler requirements on this KDE build. But those lib only
> work with MSVC 2008 if I remember.
>    

Even,

Hmm, on a further check those symbols are from poppler so it's not a 
lcms fault.
I get another error building poppler referring iconv.h that I ignore 
either but selected as a no dependency in CMake, but this affect the 
creation of a poppler-cpp.lib, not poppler.lib so I'm not sure it 
relates to the GDAL error.
I would like to build these dependencies myself because:

1. I don't want to use anything that dares to create manifests dependencies
2. I want to be able to build 64 bits versions too.

Anyway, I found these warnings too that are unrelated to this PDF driver 
issue

json_util.c
json_util.c(62) : warning C4013: 'open' undefined; assuming extern 
returning int
json_util.c(71) : warning C4013: 'read' undefined; assuming extern 
returning int
json_util.c(74) : warning C4013: 'close' undefined; assuming extern 
returning int
json_util.c(109) : warning C4013: 'write' undefined; assuming extern 
returning int

ogrsf_frmts.lib(resolvexlinks.obj) : warning LNK4221: This object file 
does not define any previously undefined public symbols, so it will not 
be used by any link operation that consumes this library

and many "blabla ... possible loss of data" warnings.


From boris.dev at gmail.com  Thu Oct 14 15:24:38 2010
From: boris.dev at gmail.com (Boris Dev)
Date: Thu Oct 14 15:49:30 2010
Subject: [gdal-dev] geoPDF file "not recognized as a supported format" by
	GDAL1.8dev ?
Message-ID: <AANLkTim1TD3_GGgmy7Hojfk3cDXycUg1L9-N+UipF_+-@mail.gmail.com>

A GDAL doc <http://www.gdal.org/frmt_pdf.html> says GDAL1.8 handles
geospatial PDF file (which I assume are the same as geoPDF topo files of the
USGS).

The problem is that after compiling GDAL1.8 from source GDAL doesn't
recognize my geoPDF file.

When I try both of the following:

$gdalinfo my_geopdf.pdf

$gdal_translate my_geopdf.pdf

It returns:

ERROR 4: 'my_geopdf.pdf' not recognized as a supported format"

When compiling GDAL and POPPLER (which is also needed for this problem) I
made sure to do the following:

gdal$./configure --with-poppler=yes --with-python

poppler$./configure --enable-xpdf-headers

...any suggestions on where I am going wrong with this?

I am new to using GDAL.

My final objective to to extact the geoPDF images as jpegs and somehow
extract the latitude/longitude bounding box information of the image so I
can create KMLs.

THANKS!!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101014/86bef919/attachment.html
From even.rouault at mines-paris.org  Thu Oct 14 16:02:15 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 14 16:02:10 2010
Subject: [gdal-dev] geoPDF file "not recognized as a supported format" by
	GDAL1.8dev ?
In-Reply-To: <AANLkTim1TD3_GGgmy7Hojfk3cDXycUg1L9-N+UipF_+-@mail.gmail.com>
References: <AANLkTim1TD3_GGgmy7Hojfk3cDXycUg1L9-N+UipF_+-@mail.gmail.com>
Message-ID: <201010142202.15847.even.rouault@mines-paris.org>

Boris

yes, GDAL should be able to read geoPDF topo files from the USGS. (geospatial 
PDF is more neutral term than geoPDF that happens to be a trademark... see 
"Important Note" in http://en.wikipedia.org/wiki/Geospatial_PDF. no further 
comment...)

First, did you check that PDF is listed when doing :

$ gdalinfo --formats

If not, then GDAL configure hasn't found poppler. You should check that you 
have a /usr/include/poppler directory and a /usr/lib/libpoppler.so file, or if 
you have installed them in another root (./configure --enable-xpdf-headers --
prefix=/some/path) , you should specify this directory as value of --with-
poppler=/some/path

If yes, then you should provide a link to the file that causes problem so I can 
see what's wrong with it

Le jeudi 14 octobre 2010 21:24:38, Boris Dev a ?crit :
> A GDAL doc <http://www.gdal.org/frmt_pdf.html> says GDAL1.8 handles
> geospatial PDF file (which I assume are the same as geoPDF topo files of
> the USGS).
> 
> The problem is that after compiling GDAL1.8 from source GDAL doesn't
> recognize my geoPDF file.
> 
> When I try both of the following:
> 
> $gdalinfo my_geopdf.pdf
> 
> $gdal_translate my_geopdf.pdf
> 
> It returns:
> 
> ERROR 4: 'my_geopdf.pdf' not recognized as a supported format"
> 
> When compiling GDAL and POPPLER (which is also needed for this problem) I
> made sure to do the following:
> 
> gdal$./configure --with-poppler=yes --with-python
> 
> poppler$./configure --enable-xpdf-headers
> 
> ...any suggestions on where I am going wrong with this?
> 
> I am new to using GDAL.
> 
> My final objective to to extact the geoPDF images as jpegs and somehow
> extract the latitude/longitude bounding box information of the image so I
> can create KMLs.
> 
> THANKS!!
From jluis at ualg.pt  Thu Oct 14 17:23:51 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Oct 14 17:24:17 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <4CB752EB.4070201@ualg.pt>
References: <4CB71B32.90200@ualg.pt>	<201010141932.53400.even.rouault@mines-paris.org>
	<4CB752EB.4070201@ualg.pt>
Message-ID: <4CB774E7.5020800@ualg.pt>

Did I mention before that the propeller (sorry, poppler) doesn't have 
any building instructions for Windows?

Well, the CMakeLists.txt is incomplete and does not add the contents of 
the "splash" directory to the project. After adding all *.cc from 
'splash' to project, GDAL is happy with the poppler.lib and now gdalinfo 
says

...
   KMLSUPEROVERLAY (rw): Kml Super Overlay
   XYZ (rwv): ASCII Gridded XYZ
   HF2 (rwv): HF2/HFZ heightfield raster
   PDF (rov): Geospatial PDF

but I'm now confused with the presence of the KMLSUPEROVERLAY because my 
nmake.opt has

# Uncomment out the following to enable KML Super-Overlay support.
#KMLSUPEROVERLAY_SUPPORTED = YES
#MINIZIP_INCLUDE = -I$(OSSIM_HOME)\minizip\src
#MINIZIP_LIBRARY = $(OSSIM_HOME)\minizip\release\minizip.lib


Not complaining. Just reporting.

Joaquim




> On 14-10-2010 18:32, Even Rouault wrote:
>> Le jeudi 14 octobre 2010 17:01:06, Joaquim Luis a ?crit :
>>> Hi,
>>>
>>> I tried to build GDAL on Win with PDF support and CV2010
>>>
>>> Well that's an adventure.
>> I trust you and didn't even try this way.
>>
>> Instead I just downloaded the kde-win32 installer, used the "packager 
>> mode"
>> (or whatever it is called. I'm just quoting from my memory of doing 
>> this a few
>> weeks ago), and selected the poppler, freetype and lcms packages and 
>> their
>> developement packages. The only requirement for GDAL is poppler, 
>> freetype and
>> lcms appears to be poppler requirements on this KDE build. But those 
>> lib only
>> work with MSVC 2008 if I remember.
>
> Even,
>
> Hmm, on a further check those symbols are from poppler so it's not a 
> lcms fault.
> I get another error building poppler referring iconv.h that I ignore 
> either but selected as a no dependency in CMake, but this affect the 
> creation of a poppler-cpp.lib, not poppler.lib so I'm not sure it 
> relates to the GDAL error.
> I would like to build these dependencies myself because:
>
> 1. I don't want to use anything that dares to create manifests 
> dependencies
> 2. I want to be able to build 64 bits versions too.
>
> Anyway, I found these warnings too that are unrelated to this PDF 
> driver issue
>
> json_util.c
> json_util.c(62) : warning C4013: 'open' undefined; assuming extern 
> returning int
> json_util.c(71) : warning C4013: 'read' undefined; assuming extern 
> returning int
> json_util.c(74) : warning C4013: 'close' undefined; assuming extern 
> returning int
> json_util.c(109) : warning C4013: 'write' undefined; assuming extern 
> returning int
>
> ogrsf_frmts.lib(resolvexlinks.obj) : warning LNK4221: This object file 
> does not define any previously undefined public symbols, so it will 
> not be used by any link operation that consumes this library
>
> and many "blabla ... possible loss of data" warnings.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From even.rouault at mines-paris.org  Thu Oct 14 17:32:54 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 14 17:32:48 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <4CB774E7.5020800@ualg.pt>
References: <4CB71B32.90200@ualg.pt> <4CB752EB.4070201@ualg.pt>
	<4CB774E7.5020800@ualg.pt>
Message-ID: <201010142332.54049.even.rouault@mines-paris.org>

Le jeudi 14 octobre 2010 23:23:51, Joaquim Luis a ?crit :
> Did I mention before that the propeller (sorry, poppler) doesn't have
> any building instructions for Windows?
> 
> Well, the CMakeLists.txt is incomplete and does not add the contents of
> the "splash" directory to the project. After adding all *.cc from
> 'splash' to project, GDAL is happy with the poppler.lib and now gdalinfo
> says

Cool!

> 
> ...
>    KMLSUPEROVERLAY (rw): Kml Super Overlay
>    XYZ (rwv): ASCII Gridded XYZ
>    HF2 (rwv): HF2/HFZ heightfield raster
>    PDF (rov): Geospatial PDF
> 
> but I'm now confused with the presence of the KMLSUPEROVERLAY because my
> nmake.opt has
> 
> # Uncomment out the following to enable KML Super-Overlay support.
> #KMLSUPEROVERLAY_SUPPORTED = YES
> #MINIZIP_INCLUDE = -I$(OSSIM_HOME)\minizip\src
> #MINIZIP_LIBRARY = $(OSSIM_HOME)\minizip\release\minizip.lib
> 
> 
> Not complaining. Just reporting.

Thanks, this is obsolete now. I've just removed that. This dates back to when 
KMLSUPEROVERLAY needed external minizip. Now minizip has been imported in GDAL 
source tree and this is no longer needed.

> 
> Joaquim
> 
> > On 14-10-2010 18:32, Even Rouault wrote:
> >> Le jeudi 14 octobre 2010 17:01:06, Joaquim Luis a ?crit :
> >>> Hi,
> >>> 
> >>> I tried to build GDAL on Win with PDF support and CV2010
> >>> 
> >>> Well that's an adventure.
> >> 
> >> I trust you and didn't even try this way.
> >> 
> >> Instead I just downloaded the kde-win32 installer, used the "packager
> >> mode"
> >> (or whatever it is called. I'm just quoting from my memory of doing
> >> this a few
> >> weeks ago), and selected the poppler, freetype and lcms packages and
> >> their
> >> developement packages. The only requirement for GDAL is poppler,
> >> freetype and
> >> lcms appears to be poppler requirements on this KDE build. But those
> >> lib only
> >> work with MSVC 2008 if I remember.
> > 
> > Even,
> > 
> > Hmm, on a further check those symbols are from poppler so it's not a
> > lcms fault.
> > I get another error building poppler referring iconv.h that I ignore
> > either but selected as a no dependency in CMake, but this affect the
> > creation of a poppler-cpp.lib, not poppler.lib so I'm not sure it
> > relates to the GDAL error.
> > I would like to build these dependencies myself because:
> > 
> > 1. I don't want to use anything that dares to create manifests
> > dependencies
> > 2. I want to be able to build 64 bits versions too.
> > 
> > Anyway, I found these warnings too that are unrelated to this PDF
> > driver issue
> > 
> > json_util.c
> > json_util.c(62) : warning C4013: 'open' undefined; assuming extern
> > returning int
> > json_util.c(71) : warning C4013: 'read' undefined; assuming extern
> > returning int
> > json_util.c(74) : warning C4013: 'close' undefined; assuming extern
> > returning int
> > json_util.c(109) : warning C4013: 'write' undefined; assuming extern
> > returning int
> > 
> > ogrsf_frmts.lib(resolvexlinks.obj) : warning LNK4221: This object file
> > does not define any previously undefined public symbols, so it will
> > not be used by any link operation that consumes this library
> > 
> > and many "blabla ... possible loss of data" warnings.
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Thu Oct 14 17:38:14 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Oct 14 17:38:20 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <201010142332.54049.even.rouault@mines-paris.org>
References: <4CB71B32.90200@ualg.pt> <4CB752EB.4070201@ualg.pt>
	<4CB774E7.5020800@ualg.pt>
	<201010142332.54049.even.rouault@mines-paris.org>
Message-ID: <4CB77846.9080104@ualg.pt>


> Thanks, this is obsolete now. I've just removed that. This dates back to when
> KMLSUPEROVERLAY needed external minizip. Now minizip has been imported in GDAL
> source tree and this is no longer needed.
>    

Nice. So I got two for the price of one.

From matt.wilkie at gov.yk.ca  Thu Oct 14 19:28:20 2010
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Oct 14 19:29:28 2010
Subject: [gdal-dev] geoPDF file "not recognized as a supported format"
	by	GDAL1.8dev ?
In-Reply-To: <201010142202.15847.even.rouault@mines-paris.org>
References: <AANLkTim1TD3_GGgmy7Hojfk3cDXycUg1L9-N+UipF_+-@mail.gmail.com>
	<201010142202.15847.even.rouault@mines-paris.org>
Message-ID: <4CB79214.3090601@gov.yk.ca>


> yes, GDAL should be able to read geoPDF topo files from the USGS. (geospatial
> PDF is more neutral term than geoPDF that happens to be a trademark

This is great news, thanks!

-matt
From mark.millman at mizar.com  Thu Oct 14 20:16:44 2010
From: mark.millman at mizar.com (Mark Millman)
Date: Thu Oct 14 20:36:53 2010
Subject: [gdal-dev] gdaldem color-relief color_text_files
Message-ID: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>

I am in need of some color_text files to use with the gdaldem color-relief
utility to create color relief versions of Slope, Aspect, Roughness, TRI, &
TPI maps.  I seems to me that these ought to be pretty standard and as my
skill set is on the developer side rather than the cartographer side of
things I am hoping that some generous cartographer out there has already
created some eye candy quality color_text_files for this purpose.

 

Thanks in advance.  Mark

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101014/cd3e17f6/attachment.html
From tosborn at sbcglobal.net  Thu Oct 14 22:44:42 2010
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Thu Oct 14 22:44:43 2010
Subject: [gdal-dev] Re: geoPDF file "not recognized as a supported format" by
	GDAL1.8dev ?
In-Reply-To: <4CB79214.3090601@gov.yk.ca>
References: <AANLkTim1TD3_GGgmy7Hojfk3cDXycUg1L9-N+UipF_+-@mail.gmail.com>
	<201010142202.15847.even.rouault@mines-paris.org>
	<4CB79214.3090601@gov.yk.ca>
Message-ID: <1287110682059-5637475.post@n2.nabble.com>


Is there a prebuilt Windows 32-bit executable for Gdal Development 1.8
available for download anywhere?  I would love to try the new geospatial pdf
capability but don't really have the necessary expertise to build Gdal from
code.

Thanks

Tim Osborn
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-geoPDF-file-not-recognized-as-a-supported-format-by-GDAL1-8dev-tp5636448p5637475.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Michael.Pascoe at nt.gov.au  Thu Oct 14 22:49:06 2010
From: Michael.Pascoe at nt.gov.au (Michael Pascoe)
Date: Thu Oct 14 22:57:37 2010
Subject: [gdal-dev] Java swig binding wont comile.
Message-ID: <E2E8389DD7EF534685DBB16ABAAFC5D886DB3D48FF@emdch-es2.prod.main.ntgov>

Hello,

I am trying to get GDAL building and working for the purpose of converting various scanned historic maps to the JPEG2000 format and also to georeference these images.

I downloaded gdal-1.7.2 and it built fine on (Red Hat 3.4.5-2). I then attempted to build the java swig bindings for GDAL using the directions at this page:

http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix

I got the following errors when I ran make:


mkdir -p org/gdal/gdal
mkdir -p org/gdal/gdalconst
mkdir -p org/gdal/ogr
mkdir -p org/gdal/osr
/bin/sh /users/developers/ilismaps/GDAL/gdal-1.7.2/libtool --mode=compile --tag=CXX g++ -fno-strict-aliasing -g -O2  -Wall -Wdeclaration-after-statement  -I/users/developers/ilismaps/GDAL/gdal-1.7.2/port -I/users/developers/ilismaps/GDAL/gdal-1.7.2/gcore -I/users/developers/ilismaps/GDAL/gdal-1.7.2/alg -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr/ogrsf_frmts -I/usr/java/jdk1.5.0_10/include -I/usr/java/jdk1.5.0_10/include/linux -c gdal_wrap.cpp
libtool: compile:  g++ -fno-strict-aliasing -g -O2 -Wall -Wdeclaration-after-statement -I/users/developers/ilismaps/GDAL/gdal-1.7.2/port -I/users/developers/ilismaps/GDAL/gdal-1.7.2/gcore -I/users/developers/ilismaps/GDAL/gdal-1.7.2/alg -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr/ogrsf_frmts -I/usr/java/jdk1.5.0_10/include -I/usr/java/jdk1.5.0_10/include/linux -c gdal_wrap.cpp  -fPIC -DPIC -o .libs/gdal_wrap.o
cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
gdal_wrap.cpp: In function `_jstring* Java_org_gdal_gdal_gdalJNI_get_1Driver_1ShortName(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:4194: error: `GDALDriverShadow_get_ShortName' was not declared in this scope
gdal_wrap.cpp:4194: warning: unused variable 'GDALDriverShadow_get_ShortName'
gdal_wrap.cpp: In function `_jstring* Java_org_gdal_gdal_gdalJNI_get_1Driver_1LongName(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:4211: error: `GDALDriverShadow_get_LongName' was not declared in this scope
gdal_wrap.cpp:4211: warning: unused variable 'GDALDriverShadow_get_LongName'
gdal_wrap.cpp: In function `_jstring* Java_org_gdal_gdal_gdalJNI_get_1Driver_1HelpTopic(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:4228: error: `GDALDriverShadow_get_HelpTopic' was not declared in this scope
gdal_wrap.cpp:4228: warning: unused variable 'GDALDriverShadow_get_HelpTopic'
gdal_wrap.cpp: In function `jlong Java_org_gdal_gdal_gdalJNI_Driver_1CreateCopy(JNIEnv*, _jclass*, jlong, _jstring*, jlong, jint, _jobject*, _jobject*)':
gdal_wrap.cpp:4378: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_GCPsToGeoTransform(JNIEnv*, _jclass*, _jobjectArray*, _jdoubleArray*, jint)':
gdal_wrap.cpp:5397: warning: cast to pointer from integer of different size
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterXSize(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:6501: error: `GDALDatasetShadow_get_RasterXSize' was not declared in this scope
gdal_wrap.cpp:6501: warning: unused variable 'GDALDatasetShadow_get_RasterXSize'
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterYSize(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:6516: error: `GDALDatasetShadow_get_RasterYSize' was not declared in this scope
gdal_wrap.cpp:6516: warning: unused variable 'GDALDatasetShadow_get_RasterYSize'
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterCount(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:6531: error: `GDALDatasetShadow_get_RasterCount' was not declared in this scope
gdal_wrap.cpp:6531: warning: unused variable 'GDALDatasetShadow_get_RasterCount'
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_Dataset_1BuildOverviews(JNIEnv*, _jclass*, jlong, _jstring*, _jintArray*, _jobject*)':
gdal_wrap.cpp:6750: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_Dataset_1SetGCPs(JNIEnv*, _jclass*, jlong, _jobjectArray*, _jstring*)':
gdal_wrap.cpp:6891: warning: cast to pointer from integer of different size
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_Band_1GetHistogram_1_1SWIG_10(JNIEnv*, _jclass*, jlong, jdouble, jdouble, _jintArray*, jboolean, jboolean, _jobject*)':
gdal_wrap.cpp:7859: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_Band_1GetDefaultHistogram(JNIEnv*, _jclass*, jlong, _jdoubleArray*, _jdoubleArray*, _jobjectArray*, jboolean, _jobject*)':
gdal_wrap.cpp:8076: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_get_1Band_1XSize(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:8123: error: `GDALRasterBandShadow_get_XSize' was not declared in this scope
gdal_wrap.cpp:8123: warning: unused variable 'GDALRasterBandShadow_get_XSize'
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_get_1Band_1YSize(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:8138: error: `GDALRasterBandShadow_get_YSize' was not declared in this scope
gdal_wrap.cpp:8138: warning: unused variable 'GDALRasterBandShadow_get_YSize'
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_get_1Band_1DataType(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:8153: error: `GDALRasterBandShadow_get_DataType' was not declared in this scope
gdal_wrap.cpp:8153: warning: unused variable 'GDALRasterBandShadow_get_DataType'
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_Band_1ComputeStatistics(JNIEnv*, _jclass*, jlong, jboolean, _jdoubleArray*, _jdoubleArray*, _jdoubleArray*, _jdoubleArray*, _jobject*)':
gdal_wrap.cpp:8742: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_ComputeMedianCutPCT(JNIEnv*, _jclass*, jlong, jlong, jlong, jint, jlong, _jobject*)':
gdal_wrap.cpp:9765: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_DitherRGB2PCT(JNIEnv*, _jclass*, jlong, jlong, jlong, jlong, jlong, _jobject*)':
gdal_wrap.cpp:9828: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_ReprojectImage(JNIEnv*, _jclass*, jlong, jlong, _jstring*, _jstring*, jint, jdouble, jdouble, _jobject*)':
gdal_wrap.cpp:9912: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_ComputeProximity(JNIEnv*, _jclass*, jlong, jlong, _jobject*, _jobject*)':
gdal_wrap.cpp:9999: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_RasterizeLayer(JNIEnv*, _jclass*, jlong, _jintArray*, _jobject*, _jdoubleArray*, _jobject*, _jobject*)':
gdal_wrap.cpp:10074: warning: cast to pointer from integer of different size
gdal_wrap.cpp:10129: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_Polygonize(JNIEnv*, _jclass*, jlong, jlong, _jobject*, jint, _jobject*, _jobject*)':
gdal_wrap.cpp:10204: warning: cast to pointer from integer of different size
gdal_wrap.cpp:10243: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_FillNodata(JNIEnv*, _jclass*, jlong, jlong, jdouble, jint, _jobject*, _jobject*)':
gdal_wrap.cpp:10332: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_SieveFilter(JNIEnv*, _jclass*, jlong, jlong, jlong, jint, jint, _jobject*, _jobject*)':
gdal_wrap.cpp:10418: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_RegenerateOverviews(JNIEnv*, _jclass*, jlong, _jobjectArray*, _jstring*, _jobject*)':
gdal_wrap.cpp:10490: warning: cast to pointer from integer of different size
gdal_wrap.cpp:10509: error: `sProgressInfo' was not declared in this scope
gdal_wrap.cpp: In function `jint Java_org_gdal_gdal_gdalJNI_RegenerateOverview(JNIEnv*, _jclass*, jlong, jlong, _jstring*, _jobject*)':
gdal_wrap.cpp:10575: error: `sProgressInfo' was not declared in this scope
make: *** [gdal_wrap.lo] Error 1


I have very little experience with c++ (hence why I am trying to use the java bindings). What could be causing this build error?

Despite this exception I had a go at building the java files and found that a lot of the classes had invalid java syntax eg.:

class class GeometryNative extends WeakReference

Im guessing that this is due to the build of the swig bindings failing.

Any assistance with getting the swig bindings to build is greatly appreciated.

Thanks

Michael Pascoe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101015/cada792a/attachment-0001.html
From christian.mueller at nvoe.at  Thu Oct 14 23:47:55 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Fri Oct 15 01:48:17 2010
Subject: [gdal-dev] tileindex performance
In-Reply-To: <4CB73796.9080907@villagis.com>
References: <1287075149883-5635751.post@n2.nabble.com>
	<4CB73796.9080907@villagis.com>
Message-ID: <20101015054755.hvn0odjf4804g8sk@webmail.nvoe.at>

Hi guys, I am the developer of the gdal_retile. Using gdal_retile on  
very large images only makes sense if you plan to import your tiles  
into a jdbc database. Serving images from so many files is not  
recommended.

I tested on an AIX Box, tiling an 80 GB Erdas image. The performance  
decrease was due to the increasing number of files in the file system.  
I had about 1 million of individual files. Deleting or moving this  
file set was a reason for drinking a cup of coffee. (15 - 30 minutes).  
And we are talking here from an AIX Box having a JFS file system and  
fast server disks.

Please check this symptom in your environment, look for the number of  
files you have created and the performance.

I am interested if this symptom occurs on your platforms too.

Cheers
Christian


Quoting Elijah Robison <elijah@villagis.com>:

> Hi Nikos,
>
> I also have difficulty tiling large, high res images with gdal_retile.
> I would say our average process--a county-wide, 1-foot resolution
> ECW--takes about a month to run to completion.
>
> At first, tiles are generated with blazing speed.  But by the time the
> routine has been running for about 24-hours, it slows to a crawl.  Is
> this the symptoms you are experiencing or are you running into
> something else?
>
> I would very much love to get to the bottom of this and find a way to
> maintain the original performance throughout a tiling routine.
>
> Best, Elijah Robison
>
>
> nickos85 wrote:
>> Hi,
>>
>> I have a mapserver and a high resolution image about 4GB when i make the
>> image tiles with a size of 512x512 using gdal_retile I have better result
>> instead of a tile size of 256x256. I think the problem is on how the search
>> algorithm for the location of the tile can be improoved. Any suggestions?
>>
>> --Nikos Hatzopoulos
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From webmaster at spaceyes.fr  Fri Oct 15 02:54:06 2010
From: webmaster at spaceyes.fr (qt user)
Date: Fri Oct 15 03:01:41 2010
Subject: [gdal-dev] gdaldem color-relief color_text_files
In-Reply-To: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>
References: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>
Message-ID: <017101cb6c35$c2d952c0$488bf840$@fr>

Mark,

 

If you are a Windows user, you can take a look to this free product : 

http://www.spaceyes.com/index.php?option=com_content
<http://www.spaceyes.com/index.php?option=com_content&task=blogcategory&id=1
5&Itemid=148> &task=blogcategory&id=15&Itemid=148

It contains a user friendly graphic frontend to gdaldem with preview. It
also features a color editor for the color_text format and some builtin
color tables. 

 

Best regards,

 

Fr?d?ric.

 

De : gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Mark Millman
Envoy? : vendredi 15 octobre 2010 02:17
? : gdal-dev@lists.osgeo.org
Objet : [gdal-dev] gdaldem color-relief color_text_files

 

I am in need of some color_text files to use with the gdaldem color-relief
utility to create color relief versions of Slope, Aspect, Roughness, TRI, &
TPI maps.  I seems to me that these ought to be pretty standard and as my
skill set is on the developer side rather than the cartographer side of
things I am hoping that some generous cartographer out there has already
created some eye candy quality color_text_files for this purpose.

 

Thanks in advance.  Mark

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101015/5f4c33f5/attachment.html
From even.rouault at mines-paris.org  Fri Oct 15 03:13:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 15 03:13:15 2010
Subject: [gdal-dev] Re: geoPDF file "not recognized as a supported format"
	by GDAL1.8dev ?
In-Reply-To: <1287110682059-5637475.post@n2.nabble.com>
References: <AANLkTim1TD3_GGgmy7Hojfk3cDXycUg1L9-N+UipF_+-@mail.gmail.com>
	<201010142202.15847.even.rouault@mines-paris.org>
	<4CB79214.3090601@gov.yk.ca>
	<1287110682059-5637475.post@n2.nabble.com>
Message-ID: <1287126785.4cb7ff013d388@imp.free.fr>

Tim,

Tamas Szekeres maintains daily builds for Windows at
http://vbkto.dyndns.org/sdk/

OSGeo4W also has a gdal-dev package.

But as far as I know, they don't come with the poppler dependency needed to get
PDF support.

Selon Tim Osborn <tosborn@sbcglobal.net>:

>
> Is there a prebuilt Windows 32-bit executable for Gdal Development 1.8
> available for download anywhere?  I would love to try the new geospatial pdf
> capability but don't really have the necessary expertise to build Gdal from
> code.
>
> Thanks
>
> Tim Osborn
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/gdal-dev-geoPDF-file-not-recognized-as-a-supported-format-by-GDAL1-8dev-tp5636448p5637475.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Fri Oct 15 03:14:53 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 15 03:15:05 2010
Subject: [gdal-dev] Java swig binding wont comile.
In-Reply-To: <E2E8389DD7EF534685DBB16ABAAFC5D886DB3D48FF@emdch-es2.prod.main.ntgov>
References: <E2E8389DD7EF534685DBB16ABAAFC5D886DB3D48FF@emdch-es2.prod.main.ntgov>
Message-ID: <1287126893.4cb7ff6d3a5a1@imp.free.fr>

Michael,

my guess is that you use a too old version of SWIG. You could retry generating
the bindings file with SWIG 1.3.39 that is a version known to work.


Selon Michael Pascoe <Michael.Pascoe@nt.gov.au>:

> Hello,
>
> I am trying to get GDAL building and working for the purpose of converting
> various scanned historic maps to the JPEG2000 format and also to georeference
> these images.
>
> I downloaded gdal-1.7.2 and it built fine on (Red Hat 3.4.5-2). I then
> attempted to build the java swig bindings for GDAL using the directions at
> this page:
>
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix
>
> I got the following errors when I ran make:
>
>
> mkdir -p org/gdal/gdal
> mkdir -p org/gdal/gdalconst
> mkdir -p org/gdal/ogr
> mkdir -p org/gdal/osr
> /bin/sh /users/developers/ilismaps/GDAL/gdal-1.7.2/libtool --mode=compile
> --tag=CXX g++ -fno-strict-aliasing -g -O2  -Wall
> -Wdeclaration-after-statement
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/port
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/gcore
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/alg
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr/ogrsf_frmts
> -I/usr/java/jdk1.5.0_10/include -I/usr/java/jdk1.5.0_10/include/linux -c
> gdal_wrap.cpp
> libtool: compile:  g++ -fno-strict-aliasing -g -O2 -Wall
> -Wdeclaration-after-statement
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/port
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/gcore
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/alg
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr/ogrsf_frmts
> -I/usr/java/jdk1.5.0_10/include -I/usr/java/jdk1.5.0_10/include/linux -c
> gdal_wrap.cpp  -fPIC -DPIC -o .libs/gdal_wrap.o
> cc1plus: warning: command line option "-Wdeclaration-after-statement" is
> valid for C/ObjC but not for C++
> gdal_wrap.cpp: In function `_jstring*
> Java_org_gdal_gdal_gdalJNI_get_1Driver_1ShortName(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:4194: error: `GDALDriverShadow_get_ShortName' was not declared
> in this scope
> gdal_wrap.cpp:4194: warning: unused variable 'GDALDriverShadow_get_ShortName'
> gdal_wrap.cpp: In function `_jstring*
> Java_org_gdal_gdal_gdalJNI_get_1Driver_1LongName(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:4211: error: `GDALDriverShadow_get_LongName' was not declared
> in this scope
> gdal_wrap.cpp:4211: warning: unused variable 'GDALDriverShadow_get_LongName'
> gdal_wrap.cpp: In function `_jstring*
> Java_org_gdal_gdal_gdalJNI_get_1Driver_1HelpTopic(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:4228: error: `GDALDriverShadow_get_HelpTopic' was not declared
> in this scope
> gdal_wrap.cpp:4228: warning: unused variable 'GDALDriverShadow_get_HelpTopic'
> gdal_wrap.cpp: In function `jlong
> Java_org_gdal_gdal_gdalJNI_Driver_1CreateCopy(JNIEnv*, _jclass*, jlong,
> _jstring*, jlong, jint, _jobject*, _jobject*)':
> gdal_wrap.cpp:4378: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_GCPsToGeoTransform(JNIEnv*, _jclass*,
> _jobjectArray*, _jdoubleArray*, jint)':
> gdal_wrap.cpp:5397: warning: cast to pointer from integer of different size
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterXSize(JNIEnv*, _jclass*,
> jlong)':
> gdal_wrap.cpp:6501: error: `GDALDatasetShadow_get_RasterXSize' was not
> declared in this scope
> gdal_wrap.cpp:6501: warning: unused variable
> 'GDALDatasetShadow_get_RasterXSize'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterYSize(JNIEnv*, _jclass*,
> jlong)':
> gdal_wrap.cpp:6516: error: `GDALDatasetShadow_get_RasterYSize' was not
> declared in this scope
> gdal_wrap.cpp:6516: warning: unused variable
> 'GDALDatasetShadow_get_RasterYSize'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterCount(JNIEnv*, _jclass*,
> jlong)':
> gdal_wrap.cpp:6531: error: `GDALDatasetShadow_get_RasterCount' was not
> declared in this scope
> gdal_wrap.cpp:6531: warning: unused variable
> 'GDALDatasetShadow_get_RasterCount'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Dataset_1BuildOverviews(JNIEnv*, _jclass*, jlong,
> _jstring*, _jintArray*, _jobject*)':
> gdal_wrap.cpp:6750: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Dataset_1SetGCPs(JNIEnv*, _jclass*, jlong,
> _jobjectArray*, _jstring*)':
> gdal_wrap.cpp:6891: warning: cast to pointer from integer of different size
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Band_1GetHistogram_1_1SWIG_10(JNIEnv*, _jclass*,
> jlong, jdouble, jdouble, _jintArray*, jboolean, jboolean, _jobject*)':
> gdal_wrap.cpp:7859: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Band_1GetDefaultHistogram(JNIEnv*, _jclass*,
> jlong, _jdoubleArray*, _jdoubleArray*, _jobjectArray*, jboolean, _jobject*)':
> gdal_wrap.cpp:8076: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Band_1XSize(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:8123: error: `GDALRasterBandShadow_get_XSize' was not declared
> in this scope
> gdal_wrap.cpp:8123: warning: unused variable 'GDALRasterBandShadow_get_XSize'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Band_1YSize(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:8138: error: `GDALRasterBandShadow_get_YSize' was not declared
> in this scope
> gdal_wrap.cpp:8138: warning: unused variable 'GDALRasterBandShadow_get_YSize'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Band_1DataType(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:8153: error: `GDALRasterBandShadow_get_DataType' was not
> declared in this scope
> gdal_wrap.cpp:8153: warning: unused variable
> 'GDALRasterBandShadow_get_DataType'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Band_1ComputeStatistics(JNIEnv*, _jclass*, jlong,
> jboolean, _jdoubleArray*, _jdoubleArray*, _jdoubleArray*, _jdoubleArray*,
> _jobject*)':
> gdal_wrap.cpp:8742: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_ComputeMedianCutPCT(JNIEnv*, _jclass*, jlong,
> jlong, jlong, jint, jlong, _jobject*)':
> gdal_wrap.cpp:9765: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_DitherRGB2PCT(JNIEnv*, _jclass*, jlong, jlong,
> jlong, jlong, jlong, _jobject*)':
> gdal_wrap.cpp:9828: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_ReprojectImage(JNIEnv*, _jclass*, jlong, jlong,
> _jstring*, _jstring*, jint, jdouble, jdouble, _jobject*)':
> gdal_wrap.cpp:9912: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_ComputeProximity(JNIEnv*, _jclass*, jlong, jlong,
> _jobject*, _jobject*)':
> gdal_wrap.cpp:9999: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_RasterizeLayer(JNIEnv*, _jclass*, jlong,
> _jintArray*, _jobject*, _jdoubleArray*, _jobject*, _jobject*)':
> gdal_wrap.cpp:10074: warning: cast to pointer from integer of different size
> gdal_wrap.cpp:10129: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Polygonize(JNIEnv*, _jclass*, jlong, jlong,
> _jobject*, jint, _jobject*, _jobject*)':
> gdal_wrap.cpp:10204: warning: cast to pointer from integer of different size
> gdal_wrap.cpp:10243: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_FillNodata(JNIEnv*, _jclass*, jlong, jlong,
> jdouble, jint, _jobject*, _jobject*)':
> gdal_wrap.cpp:10332: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_SieveFilter(JNIEnv*, _jclass*, jlong, jlong,
> jlong, jint, jint, _jobject*, _jobject*)':
> gdal_wrap.cpp:10418: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_RegenerateOverviews(JNIEnv*, _jclass*, jlong,
> _jobjectArray*, _jstring*, _jobject*)':
> gdal_wrap.cpp:10490: warning: cast to pointer from integer of different size
> gdal_wrap.cpp:10509: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_RegenerateOverview(JNIEnv*, _jclass*, jlong,
> jlong, _jstring*, _jobject*)':
> gdal_wrap.cpp:10575: error: `sProgressInfo' was not declared in this scope
> make: *** [gdal_wrap.lo] Error 1
>
>
> I have very little experience with c++ (hence why I am trying to use the java
> bindings). What could be causing this build error?
>
> Despite this exception I had a go at building the java files and found that a
> lot of the classes had invalid java syntax eg.:
>
> class class GeometryNative extends WeakReference
>
> Im guessing that this is due to the build of the swig bindings failing.
>
> Any assistance with getting the swig bindings to build is greatly
> appreciated.
>
> Thanks
>
> Michael Pascoe
>


From ari.jolma at gmail.com  Fri Oct 15 04:27:01 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Oct 15 04:27:09 2010
Subject: [gdal-dev] Geoinformatica 2010-10-15 available
Message-ID: <4CB81055.3040403@tkk.fi>

  Folks,

Geoinformatica(1) is a stack of free software, which builds on GDAL, 
Perl, and GTK+. I've just made a new win32 binary release of the 
stack(2), which contains the latest GDAL from trunk. It also contains 
the Perl bindings (Geo::GDAL module), a set of modules built on top of 
that, and a set of Perl modules built on top of Perl bindings for GTK+ 
that can be used to develop graphical geospatial programs for the desktop.

Geoinformatica is somewhat experimental OSGeo labs software whose 
proof-of-concept desktop application is useful but not a comprehensive 
GIS. This Windows release is aimed at being a simple to install and easy 
to use platform for exploiting the power of GEOS, GDAL, Perl and other 
free software. The windows installer is basically a file copy. The 
resulting directory is self-contained and can be used to install the 
platform even as a standard user on any Windows machine.

GDAL and other libraries in Geoinformatica are compiled with MinGW.

Best regards,

Ari

(1) http://trac.osgeo.org/geoinformatica/
(2) http://geoinformatics.tkk.fi/files/Geoinformatica/win32/

From piva at meeo.it  Fri Oct 15 04:30:29 2010
From: piva at meeo.it (Giacomo Piva)
Date: Fri Oct 15 04:37:11 2010
Subject: [gdal-dev] raster resize
Message-ID: <4CB81125.40207@meeo.it>

  Hi all,
I would like to resize the dimension of a raster like the gdal_translate 
tool with "-outsize" option.
I took a look into the gdal_translate.cpp source file but I didn't 
understand how it works, I can't find the resize operation lines.
Does someone can help me to understand it?

Thank you.

-- 
Giacomo

From even.rouault at mines-paris.org  Fri Oct 15 04:49:25 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 15 04:49:37 2010
Subject: [gdal-dev] raster resize
In-Reply-To: <4CB81125.40207@meeo.it>
References: <4CB81125.40207@meeo.it>
Message-ID: <1287132565.4cb81595d50a3@webmail.free.fr>

Selon Giacomo Piva <piva@meeo.it>:

Giacomo,

gdal_translate doesn't do the hard work itself and lets other part of GDAL do
it. To be more precise, the resizing of the raster in the context of
gdal_translate is done through the VRT driver (frmts/vrt/vrtsources.cpp). But if
you want to do it yourself with GDAL API, the best is to use the GDALRasterIO()
function directly by specifying dimensions of output buffer that are different
than the dimensions of the source window (this will do nearest neighbour
resampling).


>   Hi all,
> I would like to resize the dimension of a raster like the gdal_translate
> tool with "-outsize" option.
> I took a look into the gdal_translate.cpp source file but I didn't
> understand how it works, I can't find the resize operation lines.
> Does someone can help me to understand it?
>
> Thank you.
>
> --
> Giacomo
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From piva at meeo.it  Fri Oct 15 05:09:15 2010
From: piva at meeo.it (Giacomo Piva)
Date: Fri Oct 15 05:15:59 2010
Subject: [gdal-dev] raster resize
In-Reply-To: <1287132565.4cb81595d50a3@webmail.free.fr>
References: <4CB81125.40207@meeo.it> <1287132565.4cb81595d50a3@webmail.free.fr>
Message-ID: <4CB81A3B.9020304@meeo.it>

  Thank you Even, this solve my problem.

On 10/15/2010 10:49 AM, Even Rouault wrote:
> Selon Giacomo Piva<piva@meeo.it>:
>
> Giacomo,
>
> gdal_translate doesn't do the hard work itself and lets other part of GDAL do
> it. To be more precise, the resizing of the raster in the context of
> gdal_translate is done through the VRT driver (frmts/vrt/vrtsources.cpp). But if
> you want to do it yourself with GDAL API, the best is to use the GDALRasterIO()
> function directly by specifying dimensions of output buffer that are different
> than the dimensions of the source window (this will do nearest neighbour
> resampling).
>
>
>>    Hi all,
>> I would like to resize the dimension of a raster like the gdal_translate
>> tool with "-outsize" option.
>> I took a look into the gdal_translate.cpp source file but I didn't
>> understand how it works, I can't find the resize operation lines.
>> Does someone can help me to understand it?
>>
>> Thank you.
>>
>> --
>> Giacomo
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>


-- 
Giacomo Piva

MEEO S.r.l.
Via Saragat 9
I-44122 Ferrara, Italy
Tel: +39 0532 1861501
Fax: +39 0532 1861637
http://www.meeo.it

========================================
"ATTENZIONE:le informazioni contenute in questo messaggio sono
da considerarsi confidenziali ed il loro utilizzo ? riservato unicamente
al destinatario sopra indicato. Chi dovesse ricevere questo messaggio
per errore ? tenuto ad informare il mittente ed a rimuoverlo
definitivamente da ogni supporto elettronico o cartaceo."

"WARNING:This message contains confidential and/or proprietary
information which may be subject to privilege or immunity and which
is intended for use of its addressee only. Should you receive this
message in error, you are kindly requested to inform the sender and
to definitively remove it from any paper or electronic format."

From Ralf.Suhr at itc-halle.de  Fri Oct 15 07:36:47 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Fri Oct 15 07:36:52 2010
Subject: [gdal-dev] Error in gml reader.
In-Reply-To: <201010141411.23831.Ralf.Suhr@itc-halle.de>
References: <201010141411.23831.Ralf.Suhr@itc-halle.de>
Message-ID: <201010151336.48206.Ralf.Suhr@itc-halle.de>

Fixed in http://trac.osgeo.org/gdal/changeset/20468

Am Donnerstag 14 Oktober 2010 14:11:23 schrieb Ralf Suhr:
> Hello List,
> 
> I am working with gml v3 data. Sometimes coordiantes like 712345.082
> 5432000.318 become 712345.082 5432 when using the postgres database driver.
> But everthing is correct when using the new pg_dump driver. The gml data is
> read by nas driver who used gml driver for converting geometrys.
> 
> I have created a ticket.
> 
> Gr
> Ralf
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From a.neumann at carto.net  Fri Oct 15 11:26:13 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri Oct 15 11:26:12 2010
Subject: [gdal-dev] mod_python issue with libtiff
Message-ID: <30841.193.246.86.39.1287156373.squirrel@webmail.carto.net>

Hi,

I recently upgraded my gdal version to the recent SVN version. The
command-line tools work fine, but my python scripts inside Apache
mod_python fail with the following error:

-----------------------------------------

ERROR 1: WARNING ! libtiff version mismatch : You're linking against
libtiff 3.X but GDAL has been compiled against libtiff >= 4.0.0
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] mod_python
(pid=2117, interpreter='srv139.stadt-uster.ch', phase='PythonHandler',
handler='mod_python.publisher'): Application error
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] ServerName:
'srv139.stadt-uster.ch'
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] DocumentRoot:
'/home/www/www/'
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] URI:
'/geodatenshop/extract_meta.py/raster'
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Location: None
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Directory: '/'
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Filename:
'/home/www/www/geodatenshop/extract_meta.py'
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] PathInfo: '/raster'
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Traceback (most
recent call last):
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
"/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1537, in
HandlerDispatch\n    default=default_handler, arg=req,
silent=hlist.silent)
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
"/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1229, in
_process_target\n    result = _execute_target(config, req, object, arg)
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
"/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1128, in
_execute_target\n    result = object(arg)
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
"/usr/lib/python2.6/dist-packages/mod_python/publisher.py", line 213, in
handler\n    published = publish_object(req, object)
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
"/usr/lib/python2.6/dist-packages/mod_python/publisher.py", line 425, in
publish_object\n    return publish_object(req,util.apply_fs_data(object,
req.form, req=req))
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
"/usr/lib/python2.6/dist-packages/mod_python/util.py", line 554, in
apply_fs_data\n    return object(**args)
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
"/home/www/www/geodatenshop/extract_meta.py", line 18, in raster\n   
req.write('\\t<driver>'+dataset.GetDriver().ShortName+'/'+dataset.GetDriver().LongName+'</driver>\\n')
[Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] AttributeError:
'NoneType' object has no attribute 'GetDriver'

--------------------------

I set the libtiff to "internal" in the configure options before the compile.

I don't understand why the mod_python scripts link to libtiff 3.x. Why are
the commandline tools (gdal-info, gdal-translate, gdal_merge.py, etc.)
working fine, but the scripts inside mod_python do not.

Both are using python2.6.

Thank you very much for any pointers or hints on what may be wrong in my
configuration.

Andreas


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From bfraser at geoanalytic.com  Fri Oct 15 11:29:07 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Oct 15 11:29:13 2010
Subject: [gdal-dev] gdaldem color-relief color_text_files
In-Reply-To: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>
References: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>
Message-ID: <4CB87343.1040007@geoanalytic.com>

  Mark,

   Here's a color-by-elevation file from VTP (http://vterrain.org/).  
You'll have to edit it to get it into GDAL's format:

Best Regards,
Brent Fraser


colormap1
blend: 1
relative: 0
size 35
     elev -6800.000000 color 255 255 255
     elev -6400.000000 color 20 20 30
     elev -6000.000000 color 60 60 70
     elev -5600.000000 color 120 120 130
     elev -5200.000000 color 180 185 190
     elev -4800.000000 color 160 80 0
     elev -4400.000000 color 128 128 0
     elev -4000.000000 color 160 0 160
     elev -3600.000000 color 144 64 144
     elev -3200.000000 color 128 128 128
     elev -2800.000000 color 64 128 60
     elev -2400.000000 color 0 128 0
     elev -2000.000000 color 0 128 128
     elev -1600.000000 color 0 0 160
     elev -1200.000000 color 43 90 142
     elev -800.000000 color 81 121 172
     elev -400.000000 color 108 156 195
     elev -1.000000 color 182 228 255
     elev 0.000000 color 0 0 238
     elev 0.100000 color 40 224 40
     elev 450.000000 color 0 128 0
     elev 900.000000 color 100 144 76
     elev 1350.000000 color 204 170 136
     elev 1800.000000 color 136 100 70
     elev 2250.000000 color 128 128 128
     elev 2700.000000 color 180 128 64
     elev 3150.000000 color 255 144 32
     elev 3600.000000 color 200 110 80
     elev 4050.000000 color 160 80 160
     elev 4500.000000 color 144 40 128
     elev 4950.000000 color 128 128 128
     elev 5400.000000 color 255 255 255
     elev 5850.000000 color 255 255 128
     elev 6300.000000 color 255 128 0
     elev 6750.000000 color 0 128 0




On 10/14/2010 6:16 PM, Mark Millman wrote:
>
> I am in need of some color_text files to use with the gdaldem 
> color-relief utility to create color relief versions of Slope, Aspect, 
> Roughness, TRI, & TPI maps.  I seems to me that these ought to be 
> pretty standard and as my skill set is on the developer side rather 
> than the cartographer side of things I am hoping that some generous 
> cartographer out there has already created some eye candy quality 
> color_text_files for this purpose.
>
> Thanks in advance.  Mark
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101015/bd257f93/attachment.html
From even.rouault at mines-paris.org  Fri Oct 15 14:32:00 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 15 14:31:44 2010
Subject: [gdal-dev] mod_python issue with libtiff
In-Reply-To: <30841.193.246.86.39.1287156373.squirrel@webmail.carto.net>
References: <30841.193.246.86.39.1287156373.squirrel@webmail.carto.net>
Message-ID: <201010152032.00901.even.rouault@mines-paris.org>

Andreas,

I'm somehow happy to see that you've hit the warning. It means that it was 
usefull to add it and probably saved you headaches when things would have 
started to crash awfully...

Now, I'm afraid I cannot really help you more. There's something in your 
Apache that loads a libtiff 3.X... Don't you load other modules that could load 
libtiff indirectly ? A "ld foo.so | grep libtiff" on the potential .so python 
modules might help find the culprit.

Or perhaps if you move/rename /usr/lib/libtiff.so* to something else, the 
culprit will complain and you'll be able to identify it.

Le vendredi 15 octobre 2010 17:26:13, Andreas Neumann a ?crit :
> Hi,
> 
> I recently upgraded my gdal version to the recent SVN version. The
> command-line tools work fine, but my python scripts inside Apache
> mod_python fail with the following error:
> 
> -----------------------------------------
> 
> ERROR 1: WARNING ! libtiff version mismatch : You're linking against
> libtiff 3.X but GDAL has been compiled against libtiff >= 4.0.0
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] mod_python
> (pid=2117, interpreter='srv139.stadt-uster.ch', phase='PythonHandler',
> handler='mod_python.publisher'): Application error
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] ServerName:
> 'srv139.stadt-uster.ch'
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] DocumentRoot:
> '/home/www/www/'
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] URI:
> '/geodatenshop/extract_meta.py/raster'
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Location: None
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Directory: '/'
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Filename:
> '/home/www/www/geodatenshop/extract_meta.py'
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] PathInfo:
> '/raster' [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]
> Traceback (most recent call last):
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
> "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1537, in
> HandlerDispatch\n    default=default_handler, arg=req,
> silent=hlist.silent)
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
> "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1229, in
> _process_target\n    result = _execute_target(config, req, object, arg)
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
> "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1128, in
> _execute_target\n    result = object(arg)
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
> "/usr/lib/python2.6/dist-packages/mod_python/publisher.py", line 213, in
> handler\n    published = publish_object(req, object)
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
> "/usr/lib/python2.6/dist-packages/mod_python/publisher.py", line 425, in
> publish_object\n    return publish_object(req,util.apply_fs_data(object,
> req.form, req=req))
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
> "/usr/lib/python2.6/dist-packages/mod_python/util.py", line 554, in
> apply_fs_data\n    return object(**args)
> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
> "/home/www/www/geodatenshop/extract_meta.py", line 18, in raster\n
> req.write('\\t<driver>'+dataset.GetDriver().ShortName+'/'+dataset.GetDriver
> ().LongName+'</driver>\\n') [Fri Oct 15 17:03:22 2010] [error] [client
> 10.63.238.198] AttributeError: 'NoneType' object has no attribute
> 'GetDriver'
> 
> --------------------------
> 
> I set the libtiff to "internal" in the configure options before the
> compile.
> 
> I don't understand why the mod_python scripts link to libtiff 3.x. Why are
> the commandline tools (gdal-info, gdal-translate, gdal_merge.py, etc.)
> working fine, but the scripts inside mod_python do not.
> 
> Both are using python2.6.
> 
> Thank you very much for any pointers or hints on what may be wrong in my
> configuration.
> 
> Andreas
From Chris.Barker at noaa.gov  Fri Oct 15 14:59:16 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Fri Oct 15 14:59:19 2010
Subject: [gdal-dev] mod_python issue with libtiff
In-Reply-To: <201010152032.00901.even.rouault@mines-paris.org>
References: <30841.193.246.86.39.1287156373.squirrel@webmail.carto.net>
	<201010152032.00901.even.rouault@mines-paris.org>
Message-ID: <4CB8A484.2080706@noaa.gov>

On 10/15/10 11:32 AM, Even Rouault wrote:
> There's something in your
> Apache that loads a libtiff 3.X... Don't you load other modules that could load
> libtiff indirectly ? A "ld foo.so | grep libtiff" on the potential .so python
> modules might help find the culprit.

But if you need the "culprit", what then?

>> I set the libtiff to "internal" in the configure options before the
>> compile.

Perhaps you could re-build GDAL with the system libtiff instead, if all 
your Apache modules use the same one, I'd think you'd be all set. That's 
kind of the Linux way, anyway.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From eloi.ribeiro at gmail.com  Sun Oct 17 07:48:32 2010
From: eloi.ribeiro at gmail.com (Eloi Ribeiro)
Date: Sun Oct 17 07:48:35 2010
Subject: [gdal-dev] Re: how to say gdalwarp to use nadgrid by default
In-Reply-To: <AANLkTin7p+QMN0J0mxgv5jvK1XnrrgSaVAQt6ZqgXij5@mail.gmail.com>
References: <AANLkTin7p+QMN0J0mxgv5jvK1XnrrgSaVAQt6ZqgXij5@mail.gmail.com>
Message-ID: <AANLkTimtNpjBfKdrwRgMh8THez0JEahbTaA83+d8v9zr@mail.gmail.com>

In other words,

When I ask GDAL for:
*gdalwarp -s_srs EPSG:23030 -t_srs EPSG:4258 rast_23030.tif rast_4258.tif*

GDAL knows that 'EPSG:23030' means '+proj=utm +zone=30 +ellps=intl +units=m
+no_defs'.
So my question is: From witch file GDAL gets that information from?

Cheers,

Eloi Ribeiro
GIS Analyst
39,45? -4,40?
http://eloiribeiro.wordpress.com


On Mon, Oct 11, 2010 at 14:55, Eloi Ribeiro <eloi.ribeiro@gmail.com> wrote:

> Hi all,
>
> I would like that every time a I use gdalwarp for some EPSG codes [1]
> transformation it would use by default the nadgrids [2] (for Portugal and
> Spain) that I have under the folder '/usr/share/proj/'.
>
> For that purpose in PostGIS I needed to add
> '+nadgrids=nadgrid_file_name.gsb' at the end of the line of the 'proj4text'
> field text in table 'spatial_ref_sys' for each EPSG code I wonted to use the
> nadgrid.
>
> So I suppose there must be a similar way of doing this with GDAL. How can I
> achieve this with GDAL?
>
> Thank's!
>
> [1] 27492,27493,20790,20791,23029,23030,23031,3763,4258,4326
> [2] pt73_e89.gsb, ptLX_e89.gsb, ptLB_e89.gsb, ptED_e89.gsb, R2009V9.gsb,
> BALR2009.gsb
>
>
> Eloi Ribeiro
> GIS Analyst
> 39,45? -4,40?
> http://eloiribeiro.wordpress.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101017/c3940712/attachment.html
From chaitanya.ch at gmail.com  Sun Oct 17 08:46:27 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Oct 17 08:46:33 2010
Subject: [gdal-dev] Re: how to say gdalwarp to use nadgrid by default
In-Reply-To: <AANLkTimtNpjBfKdrwRgMh8THez0JEahbTaA83+d8v9zr@mail.gmail.com>
References: <AANLkTin7p+QMN0J0mxgv5jvK1XnrrgSaVAQt6ZqgXij5@mail.gmail.com>
	<AANLkTimtNpjBfKdrwRgMh8THez0JEahbTaA83+d8v9zr@mail.gmail.com>
Message-ID: <AANLkTincv_MPHdDGapTZN+KF+pSEauKU417F9TVV07gx@mail.gmail.com>

Eloi,

You can find the files at gdal/data/pcs.csv and gdal/data/gcs.csv
You may also want to refer to http://www.gdal.org/ogr/osr_tutorial.html

On Sun, Oct 17, 2010 at 5:18 PM, Eloi Ribeiro <eloi.ribeiro@gmail.com>wrote:

> In other words,
>
> When I ask GDAL for:
> *gdalwarp -s_srs EPSG:23030 -t_srs EPSG:4258 rast_23030.tif rast_4258.tif*
>
> GDAL knows that 'EPSG:23030' means '+proj=utm +zone=30 +ellps=intl +units=m
> +no_defs'.
> So my question is: From witch file GDAL gets that information from?
>
> Cheers,
>
> Eloi Ribeiro
> GIS Analyst
> 39,45? -4,40?
> http://eloiribeiro.wordpress.com
>
>
> On Mon, Oct 11, 2010 at 14:55, Eloi Ribeiro <eloi.ribeiro@gmail.com>wrote:
>
>> Hi all,
>>
>> I would like that every time a I use gdalwarp for some EPSG codes [1]
>> transformation it would use by default the nadgrids [2] (for Portugal and
>> Spain) that I have under the folder '/usr/share/proj/'.
>>
>> For that purpose in PostGIS I needed to add
>> '+nadgrids=nadgrid_file_name.gsb' at the end of the line of the 'proj4text'
>> field text in table 'spatial_ref_sys' for each EPSG code I wonted to use the
>> nadgrid.
>>
>> So I suppose there must be a similar way of doing this with GDAL. How can
>> I achieve this with GDAL?
>>
>> Thank's!
>>
>> [1] 27492,27493,20790,20791,23029,23030,23031,3763,4258,4326
>> [2] pt73_e89.gsb, ptLX_e89.gsb, ptLB_e89.gsb, ptED_e89.gsb, R2009V9.gsb,
>> BALR2009.gsb
>>
>>
>> Eloi Ribeiro
>> GIS Analyst
>> 39,45? -4,40?
>> http://eloiribeiro.wordpress.com
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101017/f4bcc5bd/attachment.html
From bfraser at geoanalytic.com  Sun Oct 17 11:56:45 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Sun Oct 17 11:56:54 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <4CB774E7.5020800@ualg.pt>
References: <4CB71B32.90200@ualg.pt>	<201010141932.53400.even.rouault@mines-paris.org>	<4CB752EB.4070201@ualg.pt>
	<4CB774E7.5020800@ualg.pt>
Message-ID: <4CBB1CBD.5000200@geoanalytic.com>

  I'm about to embark on compiling Poppler on Windows to get Geospatial 
PDF support in GDAL.  Any recommendations with respect to compiler 
version, dependencies, CMake options, etc?

Thanks!
Brent Fraser

On 10/14/2010 3:23 PM, Joaquim Luis wrote:
> Did I mention before that the propeller (sorry, poppler) doesn't have 
> any building instructions for Windows?
>
> Well, the CMakeLists.txt is incomplete and does not add the contents 
> of the "splash" directory to the project. After adding all *.cc from 
> 'splash' to project, GDAL is happy with the poppler.lib and now 
> gdalinfo says
>
> ...
>   KMLSUPEROVERLAY (rw): Kml Super Overlay
>   XYZ (rwv): ASCII Gridded XYZ
>   HF2 (rwv): HF2/HFZ heightfield raster
>   PDF (rov): Geospatial PDF
>
> but I'm now confused with the presence of the KMLSUPEROVERLAY because 
> my nmake.opt has
>
> # Uncomment out the following to enable KML Super-Overlay support.
> #KMLSUPEROVERLAY_SUPPORTED = YES
> #MINIZIP_INCLUDE = -I$(OSSIM_HOME)\minizip\src
> #MINIZIP_LIBRARY = $(OSSIM_HOME)\minizip\release\minizip.lib
>
>
> Not complaining. Just reporting.
>
> Joaquim
>
>
>
>
>> On 14-10-2010 18:32, Even Rouault wrote:
>>> Le jeudi 14 octobre 2010 17:01:06, Joaquim Luis a ?crit :
>>>> Hi,
>>>>
>>>> I tried to build GDAL on Win with PDF support and CV2010
>>>>
>>>> Well that's an adventure.
>>> I trust you and didn't even try this way.
>>>
>>> Instead I just downloaded the kde-win32 installer, used the 
>>> "packager mode"
>>> (or whatever it is called. I'm just quoting from my memory of doing 
>>> this a few
>>> weeks ago), and selected the poppler, freetype and lcms packages and 
>>> their
>>> developement packages. The only requirement for GDAL is poppler, 
>>> freetype and
>>> lcms appears to be poppler requirements on this KDE build. But those 
>>> lib only
>>> work with MSVC 2008 if I remember.
>>
>> Even,
>>
>> Hmm, on a further check those symbols are from poppler so it's not a 
>> lcms fault.
>> I get another error building poppler referring iconv.h that I ignore 
>> either but selected as a no dependency in CMake, but this affect the 
>> creation of a poppler-cpp.lib, not poppler.lib so I'm not sure it 
>> relates to the GDAL error.
>> I would like to build these dependencies myself because:
>>
>> 1. I don't want to use anything that dares to create manifests 
>> dependencies
>> 2. I want to be able to build 64 bits versions too.
>>
>> Anyway, I found these warnings too that are unrelated to this PDF 
>> driver issue
>>
>> json_util.c
>> json_util.c(62) : warning C4013: 'open' undefined; assuming extern 
>> returning int
>> json_util.c(71) : warning C4013: 'read' undefined; assuming extern 
>> returning int
>> json_util.c(74) : warning C4013: 'close' undefined; assuming extern 
>> returning int
>> json_util.c(109) : warning C4013: 'write' undefined; assuming extern 
>> returning int
>>
>> ogrsf_frmts.lib(resolvexlinks.obj) : warning LNK4221: This object 
>> file does not define any previously undefined public symbols, so it 
>> will not be used by any link operation that consumes this library
>>
>> and many "blabla ... possible loss of data" warnings.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From jluis at ualg.pt  Sun Oct 17 14:11:32 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Oct 17 14:12:19 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <4CBB1CBD.5000200@geoanalytic.com>
References: <4CB71B32.90200@ualg.pt>	<201010141932.53400.even.rouault@mines-paris.org>	<4CB752EB.4070201@ualg.pt>
	<4CB774E7.5020800@ualg.pt> <4CBB1CBD.5000200@geoanalytic.com>
Message-ID: <4CBB3C54.2020802@ualg.pt>

Brent,

 From memory, as I don't find the CMake cash with exact details. I first 
built freetype, which I think is mandatory, and than because I already 
had them built but don't know if they are a must-be, I added also zlib, 
jpeg to the CMake list.
My first error was to not select 'splash' because I didn't know what it 
was but it's part of poppler and needs to be selected. I did not include 
any Qt stuff and probably some other.
Once it is built (I used only VC2010) there is the mess of the includes. 
You will need to include the root directory where the whole poppler tree 
lives, plus that ../poppler  plus still one other dir that holds only 
one .h file. I moved that .h to one of the other places and now use this 
(my names) in nmake.opt

POPPLER_CFLAGS = -IC:/programs/compa_libs -IC:/programs/compa_libs/poppler

Good luck

Joaquim


>  I'm about to embark on compiling Poppler on Windows to get Geospatial 
> PDF support in GDAL.  Any recommendations with respect to compiler 
> version, dependencies, CMake options, etc?
>
> Thanks!
> Brent Fraser
>
> On 10/14/2010 3:23 PM, Joaquim Luis wrote:
>> Did I mention before that the propeller (sorry, poppler) doesn't have 
>> any building instructions for Windows?
>>
>> Well, the CMakeLists.txt is incomplete and does not add the contents 
>> of the "splash" directory to the project. After adding all *.cc from 
>> 'splash' to project, GDAL is happy with the poppler.lib and now 
>> gdalinfo says
>>
>> ...
>>   KMLSUPEROVERLAY (rw): Kml Super Overlay
>>   XYZ (rwv): ASCII Gridded XYZ
>>   HF2 (rwv): HF2/HFZ heightfield raster
>>   PDF (rov): Geospatial PDF
>>
>> but I'm now confused with the presence of the KMLSUPEROVERLAY because 
>> my nmake.opt has
>>
>> # Uncomment out the following to enable KML Super-Overlay support.
>> #KMLSUPEROVERLAY_SUPPORTED = YES
>> #MINIZIP_INCLUDE = -I$(OSSIM_HOME)\minizip\src
>> #MINIZIP_LIBRARY = $(OSSIM_HOME)\minizip\release\minizip.lib
>>
>>
>> Not complaining. Just reporting.
>>
>> Joaquim
>>
>>
>>
>>
>>> On 14-10-2010 18:32, Even Rouault wrote:
>>>> Le jeudi 14 octobre 2010 17:01:06, Joaquim Luis a ?crit :
>>>>> Hi,
>>>>>
>>>>> I tried to build GDAL on Win with PDF support and CV2010
>>>>>
>>>>> Well that's an adventure.
>>>> I trust you and didn't even try this way.
>>>>
>>>> Instead I just downloaded the kde-win32 installer, used the 
>>>> "packager mode"
>>>> (or whatever it is called. I'm just quoting from my memory of doing 
>>>> this a few
>>>> weeks ago), and selected the poppler, freetype and lcms packages 
>>>> and their
>>>> developement packages. The only requirement for GDAL is poppler, 
>>>> freetype and
>>>> lcms appears to be poppler requirements on this KDE build. But 
>>>> those lib only
>>>> work with MSVC 2008 if I remember.
>>>
>>> Even,
>>>
>>> Hmm, on a further check those symbols are from poppler so it's not a 
>>> lcms fault.
>>> I get another error building poppler referring iconv.h that I ignore 
>>> either but selected as a no dependency in CMake, but this affect the 
>>> creation of a poppler-cpp.lib, not poppler.lib so I'm not sure it 
>>> relates to the GDAL error.
>>> I would like to build these dependencies myself because:
>>>
>>> 1. I don't want to use anything that dares to create manifests 
>>> dependencies
>>> 2. I want to be able to build 64 bits versions too.
>>>
>>> Anyway, I found these warnings too that are unrelated to this PDF 
>>> driver issue
>>>
>>> json_util.c
>>> json_util.c(62) : warning C4013: 'open' undefined; assuming extern 
>>> returning int
>>> json_util.c(71) : warning C4013: 'read' undefined; assuming extern 
>>> returning int
>>> json_util.c(74) : warning C4013: 'close' undefined; assuming extern 
>>> returning int
>>> json_util.c(109) : warning C4013: 'write' undefined; assuming extern 
>>> returning int
>>>
>>> ogrsf_frmts.lib(resolvexlinks.obj) : warning LNK4221: This object 
>>> file does not define any previously undefined public symbols, so it 
>>> will not be used by any link operation that consumes this library
>>>
>>> and many "blabla ... possible loss of data" warnings.
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>

From bfraser at geoanalytic.com  Sun Oct 17 14:24:53 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Sun Oct 17 14:25:02 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <4CBB3C54.2020802@ualg.pt>
References: <4CB71B32.90200@ualg.pt>	<201010141932.53400.even.rouault@mines-paris.org>	<4CB752EB.4070201@ualg.pt>
	<4CB774E7.5020800@ualg.pt> <4CBB1CBD.5000200@geoanalytic.com>
	<4CBB3C54.2020802@ualg.pt>
Message-ID: <4CBB3F75.3020101@geoanalytic.com>


Joaquim,

   Many thanks for the info.  I may go the kde-win32 route for now to 
skip the building of poppler.lib, but I expect that eventually I may 
need to build it from source, especially for mapserver.

Thanks again,
Brent Fraser

On 10/17/2010 12:11 PM, Joaquim Luis wrote:
> Brent,
>
> From memory, as I don't find the CMake cash with exact details. I 
> first built freetype, which I think is mandatory, and than because I 
> already had them built but don't know if they are a must-be, I added 
> also zlib, jpeg to the CMake list.
> My first error was to not select 'splash' because I didn't know what 
> it was but it's part of poppler and needs to be selected. I did not 
> include any Qt stuff and probably some other.
> Once it is built (I used only VC2010) there is the mess of the 
> includes. You will need to include the root directory where the whole 
> poppler tree lives, plus that ../poppler  plus still one other dir 
> that holds only one .h file. I moved that .h to one of the other 
> places and now use this (my names) in nmake.opt
>
> POPPLER_CFLAGS = -IC:/programs/compa_libs 
> -IC:/programs/compa_libs/poppler
>
> Good luck
>
> Joaquim
>
>
>>  I'm about to embark on compiling Poppler on Windows to get 
>> Geospatial PDF support in GDAL.  Any recommendations with respect to 
>> compiler version, dependencies, CMake options, etc?
>>
>> Thanks!
>> Brent Fraser
>>
>> On 10/14/2010 3:23 PM, Joaquim Luis wrote:
>>> Did I mention before that the propeller (sorry, poppler) doesn't 
>>> have any building instructions for Windows?
>>>
>>> Well, the CMakeLists.txt is incomplete and does not add the contents 
>>> of the "splash" directory to the project. After adding all *.cc from 
>>> 'splash' to project, GDAL is happy with the poppler.lib and now 
>>> gdalinfo says
>>>
>>> ...
>>>   KMLSUPEROVERLAY (rw): Kml Super Overlay
>>>   XYZ (rwv): ASCII Gridded XYZ
>>>   HF2 (rwv): HF2/HFZ heightfield raster
>>>   PDF (rov): Geospatial PDF
>>>
>>> but I'm now confused with the presence of the KMLSUPEROVERLAY 
>>> because my nmake.opt has
>>>
>>> # Uncomment out the following to enable KML Super-Overlay support.
>>> #KMLSUPEROVERLAY_SUPPORTED = YES
>>> #MINIZIP_INCLUDE = -I$(OSSIM_HOME)\minizip\src
>>> #MINIZIP_LIBRARY = $(OSSIM_HOME)\minizip\release\minizip.lib
>>>
>>>
>>> Not complaining. Just reporting.
>>>
>>> Joaquim
>>>
>>>
>>>
>>>
>>>> On 14-10-2010 18:32, Even Rouault wrote:
>>>>> Le jeudi 14 octobre 2010 17:01:06, Joaquim Luis a ?crit :
>>>>>> Hi,
>>>>>>
>>>>>> I tried to build GDAL on Win with PDF support and CV2010
>>>>>>
>>>>>> Well that's an adventure.
>>>>> I trust you and didn't even try this way.
>>>>>
>>>>> Instead I just downloaded the kde-win32 installer, used the 
>>>>> "packager mode"
>>>>> (or whatever it is called. I'm just quoting from my memory of 
>>>>> doing this a few
>>>>> weeks ago), and selected the poppler, freetype and lcms packages 
>>>>> and their
>>>>> developement packages. The only requirement for GDAL is poppler, 
>>>>> freetype and
>>>>> lcms appears to be poppler requirements on this KDE build. But 
>>>>> those lib only
>>>>> work with MSVC 2008 if I remember.
>>>>
>>>> Even,
>>>>
>>>> Hmm, on a further check those symbols are from poppler so it's not 
>>>> a lcms fault.
>>>> I get another error building poppler referring iconv.h that I 
>>>> ignore either but selected as a no dependency in CMake, but this 
>>>> affect the creation of a poppler-cpp.lib, not poppler.lib so I'm 
>>>> not sure it relates to the GDAL error.
>>>> I would like to build these dependencies myself because:
>>>>
>>>> 1. I don't want to use anything that dares to create manifests 
>>>> dependencies
>>>> 2. I want to be able to build 64 bits versions too.
>>>>
>>>> Anyway, I found these warnings too that are unrelated to this PDF 
>>>> driver issue
>>>>
>>>> json_util.c
>>>> json_util.c(62) : warning C4013: 'open' undefined; assuming extern 
>>>> returning int
>>>> json_util.c(71) : warning C4013: 'read' undefined; assuming extern 
>>>> returning int
>>>> json_util.c(74) : warning C4013: 'close' undefined; assuming extern 
>>>> returning int
>>>> json_util.c(109) : warning C4013: 'write' undefined; assuming 
>>>> extern returning int
>>>>
>>>> ogrsf_frmts.lib(resolvexlinks.obj) : warning LNK4221: This object 
>>>> file does not define any previously undefined public symbols, so it 
>>>> will not be used by any link operation that consumes this library
>>>>
>>>> and many "blabla ... possible loss of data" warnings.
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>
>

From jluis at ualg.pt  Sun Oct 17 14:39:26 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Oct 17 14:39:48 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <4CBB3F75.3020101@geoanalytic.com>
References: <4CB71B32.90200@ualg.pt>	<201010141932.53400.even.rouault@mines-paris.org>	<4CB752EB.4070201@ualg.pt>
	<4CB774E7.5020800@ualg.pt> <4CBB1CBD.5000200@geoanalytic.com>
	<4CBB3C54.2020802@ualg.pt> <4CBB3F75.3020101@geoanalytic.com>
Message-ID: <4CBB42DE.9090801@ualg.pt>

On 17-10-2010 19:24, Brent Fraser wrote:
>
> Joaquim,
>
>   Many thanks for the info.  I may go the kde-win32 route for now to 
> skip the building of poppler.lib, but I expect that eventually I may 
> need to build it from source, especially for mapserver.
>

Right, and

>>
>> From memory, as I don't find the CMake cash with exact details.

obviously I meant "cache" not "cash"

From ahmettemiz88 at gmail.com  Sun Oct 17 14:58:16 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sun Oct 17 14:58:27 2010
Subject: [gdal-dev] =?iso-8859-9?q?Kanun_tasar=FDs=FD_ile_ilgili_not?=
Message-ID: <AANLkTikEhs2qVzUaspX22tL05SoM7kXpUO+qe+Qt-t5-@mail.gmail.com>

merhaba

Kanun tasar?s? ile ilgili ?ok az bir bilgimiz oldu. san?yorum
pazartesi (yar?n) g?r?? bildirilecek.

O g?n i?in olay? pek toparlayamad?k. Ama daha sonra
d???nd?m.

Bence:

?zellikle "CBS" nin bir ibare olarak kanunda ge?mesi iyi olur.

?rne?in:
ilk maddede "Tehlike ve risk haritalar?n?n CBS ortam?nda olmas?
gerekmektedir" benzeri c?mleler teknik olarak do?ru
olacakt?r. ??nk? CBS ortam? d???nda bu haritalar?n ?retildi?i
ortam? ben hi? duymad?m. Bu nedenle CBS isminin net olarak
ge?mesi yerinde olur.

Benzer ?ekilde CBS nin yerle?im planlar?nda da ge?mesi
iyi olur diye d???n?yorum.




Mesala Bay?nd?rl?k Bakanl???  kanun maddesine CBS ibaresini
koydurmu? bu sayede CBS konu oldu?u zaman a??rl?k koyuyor.

iyi ?al??malar

-- 
Ahmet Temiz
Jeoloji M?h.
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From szekerest at gmail.com  Sun Oct 17 16:24:35 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Oct 17 16:24:40 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <4CBB42DE.9090801@ualg.pt>
References: <4CB71B32.90200@ualg.pt>
	<201010141932.53400.even.rouault@mines-paris.org>
	<4CB752EB.4070201@ualg.pt> <4CB774E7.5020800@ualg.pt>
	<4CBB1CBD.5000200@geoanalytic.com> <4CBB3C54.2020802@ualg.pt>
	<4CBB3F75.3020101@geoanalytic.com> <4CBB42DE.9090801@ualg.pt>
Message-ID: <AANLkTikWVQdewEOtJZpXpd4tLDawsN5jVF4s2Yx7841f@mail.gmail.com>

Hi poppler gurus,

I've also compiled poppler.lib (version 0.14.4) with various versions of
MSVC, but it seems to generate double free memory corruptions in gdal.
A single run of pdf.py (from the autotest suite) seems to complete
successfully, however running the script multiple times (in a batch) could
eventually generate a crash. Has anyone run into the same issue?


Best regards,

Tamas




2010/10/17 Joaquim Luis <jluis@ualg.pt>

> On 17-10-2010 19:24, Brent Fraser wrote:
>
>>
>> Joaquim,
>>
>>  Many thanks for the info.  I may go the kde-win32 route for now to skip
>> the building of poppler.lib, but I expect that eventually I may need to
>> build it from source, especially for mapserver.
>>
>>
> Right, and
>
>
>
>>> From memory, as I don't find the CMake cash with exact details.
>>>
>>
> obviously I meant "cache" not "cash"
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101017/c36f3f6b/attachment.html
From jluis at ualg.pt  Sun Oct 17 17:35:37 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Oct 17 17:36:27 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <AANLkTikWVQdewEOtJZpXpd4tLDawsN5jVF4s2Yx7841f@mail.gmail.com>
References: <4CB71B32.90200@ualg.pt>	<201010141932.53400.even.rouault@mines-paris.org>	<4CB752EB.4070201@ualg.pt>	<4CB774E7.5020800@ualg.pt>	<4CBB1CBD.5000200@geoanalytic.com>	<4CBB3C54.2020802@ualg.pt>	<4CBB3F75.3020101@geoanalytic.com>	<4CBB42DE.9090801@ualg.pt>
	<AANLkTikWVQdewEOtJZpXpd4tLDawsN5jVF4s2Yx7841f@mail.gmail.com>
Message-ID: <4CBB6C29.4060107@ualg.pt>

Tamas,

I didn't notice that but on the other hand I never run it enough times 
to make it happen.

Joaquim


> Hi poppler gurus,
>
> I've also compiled poppler.lib (version 0.14.4) with various versions 
> of MSVC, but it seems to generate double free memory corruptions in gdal.
> A single run of pdf.py (from the autotest suite) seems to complete 
> successfully, however running the script multiple times (in a batch) 
> could eventually generate a crash. Has anyone run into the same issue?
>
>
> Best regards,
>
> Tamas
>
>
>
>
> 2010/10/17 Joaquim Luis <jluis@ualg.pt <mailto:jluis@ualg.pt>>
>
>     On 17-10-2010 19:24, Brent Fraser wrote:
>
>
>         Joaquim,
>
>          Many thanks for the info.  I may go the kde-win32 route for
>         now to skip the building of poppler.lib, but I expect that
>         eventually I may need to build it from source, especially for
>         mapserver.
>
>
>     Right, and
>
>
>
>             >From memory, as I don't find the CMake cash with exact
>             details.
>
>
>     obviously I meant "cache" not "cash"
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101017/09a6b4ef/attachment-0001.html
From Michael.Pascoe at nt.gov.au  Mon Oct 18 02:03:48 2010
From: Michael.Pascoe at nt.gov.au (Michael Pascoe)
Date: Mon Oct 18 02:04:27 2010
Subject: [gdal-dev] Java swig binding wont comile.
In-Reply-To: <1287126893.4cb7ff6d3a5a1@imp.free.fr>
References: <E2E8389DD7EF534685DBB16ABAAFC5D886DB3D48FF@emdch-es2.prod.main.ntgov>
	<1287126893.4cb7ff6d3a5a1@imp.free.fr>
Message-ID: <E2E8389DD7EF534685DBB16ABAAFC5D886DB3D4A2B@emdch-es2.prod.main.ntgov>

Thanks Even,

I installed SWIG 1.3.39 then tried to recompile the swig wrappers. First I had to fix some things I had mangled while trying to debug this problem. Then I found I had to run:

make veryclean

in gdal-1.7.2/swig/java to make it recompile the wrappers. (I was trying "make clean" for a while)

Finally I ran:

make 

And after that the example application gdalinfo would compile and run.

Thank you for your assistance

Michael Pascoe


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Friday, 15 October 2010 4:45 PM
To: Michael Pascoe
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Java swig binding wont comile.

Michael,

my guess is that you use a too old version of SWIG. You could retry generating
the bindings file with SWIG 1.3.39 that is a version known to work.


Selon Michael Pascoe <Michael.Pascoe@nt.gov.au>:

> Hello,
>
> I am trying to get GDAL building and working for the purpose of converting
> various scanned historic maps to the JPEG2000 format and also to georeference
> these images.
>
> I downloaded gdal-1.7.2 and it built fine on (Red Hat 3.4.5-2). I then
> attempted to build the java swig bindings for GDAL using the directions at
> this page:
>
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix
>
> I got the following errors when I ran make:
>
>
> mkdir -p org/gdal/gdal
> mkdir -p org/gdal/gdalconst
> mkdir -p org/gdal/ogr
> mkdir -p org/gdal/osr
> /bin/sh /users/developers/ilismaps/GDAL/gdal-1.7.2/libtool --mode=compile
> --tag=CXX g++ -fno-strict-aliasing -g -O2  -Wall
> -Wdeclaration-after-statement
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/port
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/gcore
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/alg
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr/ogrsf_frmts
> -I/usr/java/jdk1.5.0_10/include -I/usr/java/jdk1.5.0_10/include/linux -c
> gdal_wrap.cpp
> libtool: compile:  g++ -fno-strict-aliasing -g -O2 -Wall
> -Wdeclaration-after-statement
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/port
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/gcore
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/alg
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr
> -I/users/developers/ilismaps/GDAL/gdal-1.7.2/ogr/ogrsf_frmts
> -I/usr/java/jdk1.5.0_10/include -I/usr/java/jdk1.5.0_10/include/linux -c
> gdal_wrap.cpp  -fPIC -DPIC -o .libs/gdal_wrap.o
> cc1plus: warning: command line option "-Wdeclaration-after-statement" is
> valid for C/ObjC but not for C++
> gdal_wrap.cpp: In function `_jstring*
> Java_org_gdal_gdal_gdalJNI_get_1Driver_1ShortName(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:4194: error: `GDALDriverShadow_get_ShortName' was not declared
> in this scope
> gdal_wrap.cpp:4194: warning: unused variable 'GDALDriverShadow_get_ShortName'
> gdal_wrap.cpp: In function `_jstring*
> Java_org_gdal_gdal_gdalJNI_get_1Driver_1LongName(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:4211: error: `GDALDriverShadow_get_LongName' was not declared
> in this scope
> gdal_wrap.cpp:4211: warning: unused variable 'GDALDriverShadow_get_LongName'
> gdal_wrap.cpp: In function `_jstring*
> Java_org_gdal_gdal_gdalJNI_get_1Driver_1HelpTopic(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:4228: error: `GDALDriverShadow_get_HelpTopic' was not declared
> in this scope
> gdal_wrap.cpp:4228: warning: unused variable 'GDALDriverShadow_get_HelpTopic'
> gdal_wrap.cpp: In function `jlong
> Java_org_gdal_gdal_gdalJNI_Driver_1CreateCopy(JNIEnv*, _jclass*, jlong,
> _jstring*, jlong, jint, _jobject*, _jobject*)':
> gdal_wrap.cpp:4378: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_GCPsToGeoTransform(JNIEnv*, _jclass*,
> _jobjectArray*, _jdoubleArray*, jint)':
> gdal_wrap.cpp:5397: warning: cast to pointer from integer of different size
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterXSize(JNIEnv*, _jclass*,
> jlong)':
> gdal_wrap.cpp:6501: error: `GDALDatasetShadow_get_RasterXSize' was not
> declared in this scope
> gdal_wrap.cpp:6501: warning: unused variable
> 'GDALDatasetShadow_get_RasterXSize'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterYSize(JNIEnv*, _jclass*,
> jlong)':
> gdal_wrap.cpp:6516: error: `GDALDatasetShadow_get_RasterYSize' was not
> declared in this scope
> gdal_wrap.cpp:6516: warning: unused variable
> 'GDALDatasetShadow_get_RasterYSize'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterCount(JNIEnv*, _jclass*,
> jlong)':
> gdal_wrap.cpp:6531: error: `GDALDatasetShadow_get_RasterCount' was not
> declared in this scope
> gdal_wrap.cpp:6531: warning: unused variable
> 'GDALDatasetShadow_get_RasterCount'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Dataset_1BuildOverviews(JNIEnv*, _jclass*, jlong,
> _jstring*, _jintArray*, _jobject*)':
> gdal_wrap.cpp:6750: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Dataset_1SetGCPs(JNIEnv*, _jclass*, jlong,
> _jobjectArray*, _jstring*)':
> gdal_wrap.cpp:6891: warning: cast to pointer from integer of different size
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Band_1GetHistogram_1_1SWIG_10(JNIEnv*, _jclass*,
> jlong, jdouble, jdouble, _jintArray*, jboolean, jboolean, _jobject*)':
> gdal_wrap.cpp:7859: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Band_1GetDefaultHistogram(JNIEnv*, _jclass*,
> jlong, _jdoubleArray*, _jdoubleArray*, _jobjectArray*, jboolean, _jobject*)':
> gdal_wrap.cpp:8076: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Band_1XSize(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:8123: error: `GDALRasterBandShadow_get_XSize' was not declared
> in this scope
> gdal_wrap.cpp:8123: warning: unused variable 'GDALRasterBandShadow_get_XSize'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Band_1YSize(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:8138: error: `GDALRasterBandShadow_get_YSize' was not declared
> in this scope
> gdal_wrap.cpp:8138: warning: unused variable 'GDALRasterBandShadow_get_YSize'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_get_1Band_1DataType(JNIEnv*, _jclass*, jlong)':
> gdal_wrap.cpp:8153: error: `GDALRasterBandShadow_get_DataType' was not
> declared in this scope
> gdal_wrap.cpp:8153: warning: unused variable
> 'GDALRasterBandShadow_get_DataType'
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Band_1ComputeStatistics(JNIEnv*, _jclass*, jlong,
> jboolean, _jdoubleArray*, _jdoubleArray*, _jdoubleArray*, _jdoubleArray*,
> _jobject*)':
> gdal_wrap.cpp:8742: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_ComputeMedianCutPCT(JNIEnv*, _jclass*, jlong,
> jlong, jlong, jint, jlong, _jobject*)':
> gdal_wrap.cpp:9765: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_DitherRGB2PCT(JNIEnv*, _jclass*, jlong, jlong,
> jlong, jlong, jlong, _jobject*)':
> gdal_wrap.cpp:9828: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_ReprojectImage(JNIEnv*, _jclass*, jlong, jlong,
> _jstring*, _jstring*, jint, jdouble, jdouble, _jobject*)':
> gdal_wrap.cpp:9912: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_ComputeProximity(JNIEnv*, _jclass*, jlong, jlong,
> _jobject*, _jobject*)':
> gdal_wrap.cpp:9999: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_RasterizeLayer(JNIEnv*, _jclass*, jlong,
> _jintArray*, _jobject*, _jdoubleArray*, _jobject*, _jobject*)':
> gdal_wrap.cpp:10074: warning: cast to pointer from integer of different size
> gdal_wrap.cpp:10129: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_Polygonize(JNIEnv*, _jclass*, jlong, jlong,
> _jobject*, jint, _jobject*, _jobject*)':
> gdal_wrap.cpp:10204: warning: cast to pointer from integer of different size
> gdal_wrap.cpp:10243: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_FillNodata(JNIEnv*, _jclass*, jlong, jlong,
> jdouble, jint, _jobject*, _jobject*)':
> gdal_wrap.cpp:10332: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_SieveFilter(JNIEnv*, _jclass*, jlong, jlong,
> jlong, jint, jint, _jobject*, _jobject*)':
> gdal_wrap.cpp:10418: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_RegenerateOverviews(JNIEnv*, _jclass*, jlong,
> _jobjectArray*, _jstring*, _jobject*)':
> gdal_wrap.cpp:10490: warning: cast to pointer from integer of different size
> gdal_wrap.cpp:10509: error: `sProgressInfo' was not declared in this scope
> gdal_wrap.cpp: In function `jint
> Java_org_gdal_gdal_gdalJNI_RegenerateOverview(JNIEnv*, _jclass*, jlong,
> jlong, _jstring*, _jobject*)':
> gdal_wrap.cpp:10575: error: `sProgressInfo' was not declared in this scope
> make: *** [gdal_wrap.lo] Error 1
>
>
> I have very little experience with c++ (hence why I am trying to use the java
> bindings). What could be causing this build error?
>
> Despite this exception I had a go at building the java files and found that a
> lot of the classes had invalid java syntax eg.:
>
> class class GeometryNative extends WeakReference
>
> Im guessing that this is due to the build of the swig bindings failing.
>
> Any assistance with getting the swig bindings to build is greatly
> appreciated.
>
> Thanks
>
> Michael Pascoe
>



Internal Virus Database is out of date.
Checked by AVG - www.avg.com 
Version: 9.0.862 / Virus Database: 271.1.1/3179 - Release Date: 10/06/10 04:04:00
From eloi.ribeiro at gmail.com  Mon Oct 18 05:26:30 2010
From: eloi.ribeiro at gmail.com (Eloi Ribeiro)
Date: Mon Oct 18 05:26:31 2010
Subject: [gdal-dev] Re: how to say gdalwarp to use nadgrid by default
In-Reply-To: <AANLkTincv_MPHdDGapTZN+KF+pSEauKU417F9TVV07gx@mail.gmail.com>
References: <AANLkTin7p+QMN0J0mxgv5jvK1XnrrgSaVAQt6ZqgXij5@mail.gmail.com>
	<AANLkTimtNpjBfKdrwRgMh8THez0JEahbTaA83+d8v9zr@mail.gmail.com>
	<AANLkTincv_MPHdDGapTZN+KF+pSEauKU417F9TVV07gx@mail.gmail.com>
Message-ID: <AANLkTikcWb0E1yW3PoQ_UVgxMCmngEBcZP1WfpgfbQQ+@mail.gmail.com>

Thanks Chaitanya,

I intended to avoid all this writing to make sure the nadgrid is used:

*gdalwarp -s_srs "+proj=utm +zone=30 +ellps=intl +units=m +nadgrids=R2009V9.gsb
+wktext" -t_srs "+proj=longlat +ellps=GRS80 +towgs84=0,0,0" rast_23030.tif
rast_4258.tif*

But after reading this[1] I just realise that there is not such a
configuration file to search for in GDAL.

After all is not that big issue.

Thanks anyway.

By,

[1] http://www.osgeo.org/pipermail/gdal-dev/2007-April/012561.html

<http://www.osgeo.org/pipermail/gdal-dev/2007-April/012561.html>
Eloi Ribeiro
GIS Analyst
39,45? -4,40?
http://eloiribeiro.wordpress.com


On Sun, Oct 17, 2010 at 14:46, Chaitanya kumar CH <chaitanya.ch@gmail.com>wrote:

> Eloi,
>
> You can find the files at gdal/data/pcs.csv and gdal/data/gcs.csv
> You may also want to refer to http://www.gdal.org/ogr/osr_tutorial.html
>
> On Sun, Oct 17, 2010 at 5:18 PM, Eloi Ribeiro <eloi.ribeiro@gmail.com>wrote:
>
>> In other words,
>>
>> When I ask GDAL for:
>> *gdalwarp -s_srs EPSG:23030 -t_srs EPSG:4258 rast_23030.tif rast_4258.tif
>> *
>>
>> GDAL knows that 'EPSG:23030' means '+proj=utm +zone=30 +ellps=intl
>> +units=m +no_defs'.
>> So my question is: From witch file GDAL gets that information from?
>>
>> Cheers,
>>
>> Eloi Ribeiro
>> GIS Analyst
>> 39,45? -4,40?
>> http://eloiribeiro.wordpress.com
>>
>>
>> On Mon, Oct 11, 2010 at 14:55, Eloi Ribeiro <eloi.ribeiro@gmail.com>wrote:
>>
>>> Hi all,
>>>
>>> I would like that every time a I use gdalwarp for some EPSG codes [1]
>>> transformation it would use by default the nadgrids [2] (for Portugal and
>>> Spain) that I have under the folder '/usr/share/proj/'.
>>>
>>> For that purpose in PostGIS I needed to add
>>> '+nadgrids=nadgrid_file_name.gsb' at the end of the line of the 'proj4text'
>>> field text in table 'spatial_ref_sys' for each EPSG code I wonted to use the
>>> nadgrid.
>>>
>>> So I suppose there must be a similar way of doing this with GDAL. How can
>>> I achieve this with GDAL?
>>>
>>> Thank's!
>>>
>>> [1] 27492,27493,20790,20791,23029,23030,23031,3763,4258,4326
>>> [2] pt73_e89.gsb, ptLX_e89.gsb, ptLB_e89.gsb, ptED_e89.gsb, R2009V9.gsb,
>>> BALR2009.gsb
>>>
>>>
>>> Eloi Ribeiro
>>> GIS Analyst
>>> 39,45? -4,40?
>>> http://eloiribeiro.wordpress.com
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101018/1cd6e1a8/attachment.html
From a.neumann at carto.net  Mon Oct 18 10:32:33 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Oct 18 10:32:32 2010
Subject: [gdal-dev] mod_python issue with libtiff
In-Reply-To: <201010152032.00901.even.rouault@mines-paris.org>
References: <30841.193.246.86.39.1287156373.squirrel@webmail.carto.net>
	<201010152032.00901.even.rouault@mines-paris.org>
Message-ID: <21990.193.246.86.39.1287412353.squirrel@webmail.carto.net>

Hi,

Thank you all for your hints so far.

Frank also suggested to examine which libraries are in use by Apache with
the following command:

cat /proc/<apache-id>/maps

It turns out that
/usr/lib/libtiff.so.4.3.2
and
/usr/local/lib/libtiff.so.5.0.0

are in use.

There is no libtiff.so.3x installed in the system.

So I wonder if the error message mentioning 3x and 4x actually means 4x
and 5x?


I also tried mod_wsgi instead of mod_python, but the same error message
appears.

After looking at all the libraries that are used by Apache I also saw that
GRASS was included. Next, I compiled gdal without GRASS support - and
voila - mod_wsgi and mod_python worked.

My GRASS installation was fairly old and I don't need it on this server
currently. My guess is that GRASS somehow linked to libtiff4x and the rest
of gdal linked to libtiff5x. Or maybe GRASS links to libtiff3x which isn't
present in my system anymore? I also guess that compiling GRASS again
would solve the problem.

Although I still don't fully understand the output of
/proc/<apache-id>/maps, it is cool being able to look at the libraries
that a process is using.

Thanks for all of your hints. Problem is solved now.

Andreas


On Fri, October 15, 2010 8:32 pm, Even Rouault wrote:
> Andreas,
>
> I'm somehow happy to see that you've hit the warning. It means that it was
> usefull to add it and probably saved you headaches when things would have
> started to crash awfully...
>
> Now, I'm afraid I cannot really help you more. There's something in your
> Apache that loads a libtiff 3.X... Don't you load other modules that could
> load
> libtiff indirectly ? A "ld foo.so | grep libtiff" on the potential .so
> python
> modules might help find the culprit.
>
> Or perhaps if you move/rename /usr/lib/libtiff.so* to something else, the
> culprit will complain and you'll be able to identify it.
>
> Le vendredi 15 octobre 2010 17:26:13, Andreas Neumann a ?crit :
>> Hi,
>>
>> I recently upgraded my gdal version to the recent SVN version. The
>> command-line tools work fine, but my python scripts inside Apache
>> mod_python fail with the following error:
>>
>> -----------------------------------------
>>
>> ERROR 1: WARNING ! libtiff version mismatch : You're linking against
>> libtiff 3.X but GDAL has been compiled against libtiff >= 4.0.0
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] mod_python
>> (pid=2117, interpreter='srv139.stadt-uster.ch', phase='PythonHandler',
>> handler='mod_python.publisher'): Application error
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] ServerName:
>> 'srv139.stadt-uster.ch'
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] DocumentRoot:
>> '/home/www/www/'
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] URI:
>> '/geodatenshop/extract_meta.py/raster'
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Location: None
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Directory: '/'
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] Filename:
>> '/home/www/www/geodatenshop/extract_meta.py'
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198] PathInfo:
>> '/raster' [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]
>> Traceback (most recent call last):
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
>> "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1537, in
>> HandlerDispatch\n    default=default_handler, arg=req,
>> silent=hlist.silent)
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
>> "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1229, in
>> _process_target\n    result = _execute_target(config, req, object, arg)
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
>> "/usr/lib/python2.6/dist-packages/mod_python/importer.py", line 1128, in
>> _execute_target\n    result = object(arg)
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
>> "/usr/lib/python2.6/dist-packages/mod_python/publisher.py", line 213, in
>> handler\n    published = publish_object(req, object)
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
>> "/usr/lib/python2.6/dist-packages/mod_python/publisher.py", line 425, in
>> publish_object\n    return publish_object(req,util.apply_fs_data(object,
>> req.form, req=req))
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
>> "/usr/lib/python2.6/dist-packages/mod_python/util.py", line 554, in
>> apply_fs_data\n    return object(**args)
>> [Fri Oct 15 17:03:22 2010] [error] [client 10.63.238.198]   File
>> "/home/www/www/geodatenshop/extract_meta.py", line 18, in raster\n
>> req.write('\\t<driver>'+dataset.GetDriver().ShortName+'/'+dataset.GetDriver
>> ().LongName+'</driver>\\n') [Fri Oct 15 17:03:22 2010] [error] [client
>> 10.63.238.198] AttributeError: 'NoneType' object has no attribute
>> 'GetDriver'
>>
>> --------------------------
>>
>> I set the libtiff to "internal" in the configure options before the
>> compile.
>>
>> I don't understand why the mod_python scripts link to libtiff 3.x. Why
>> are
>> the commandline tools (gdal-info, gdal-translate, gdal_merge.py, etc.)
>> working fine, but the scripts inside mod_python do not.
>>
>> Both are using python2.6.
>>
>> Thank you very much for any pointers or hints on what may be wrong in my
>> configuration.
>>
>> Andreas
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From warmerdam at pobox.com  Mon Oct 18 10:47:39 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 18 10:47:49 2010
Subject: [gdal-dev] mod_python issue with libtiff
In-Reply-To: <21990.193.246.86.39.1287412353.squirrel@webmail.carto.net>
References: <30841.193.246.86.39.1287156373.squirrel@webmail.carto.net>
	<201010152032.00901.even.rouault@mines-paris.org>
	<21990.193.246.86.39.1287412353.squirrel@webmail.carto.net>
Message-ID: <4CBC5E0B.4090201@pobox.com>

Andreas Neumann wrote:
> Hi,
> 
> Thank you all for your hints so far.
> 
> Frank also suggested to examine which libraries are in use by Apache with
> the following command:
> 
> cat /proc/<apache-id>/maps
> 
> It turns out that
> /usr/lib/libtiff.so.4.3.2
> and
> /usr/local/lib/libtiff.so.5.0.0
> 
> are in use.
> 
> There is no libtiff.so.3x installed in the system.
> 
> So I wonder if the error message mentioning 3x and 4x actually means 4x
> and 5x?

Andreas,

I would just note that libtiff 3.x is normally installed with libtool
versions in the 4.x.x range on linux systems while libtiff 4.0beta is
normally installed with libtool version numbers in the 5.x range.  It is
common for the .so version numbers to have no meaningful relationship with
software versions.

This is also true of many other packages, including GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From boris.dev at gmail.com  Mon Oct 18 13:14:26 2010
From: boris.dev at gmail.com (Boris Dev)
Date: Mon Oct 18 13:14:48 2010
Subject: [gdal-dev] geoPDF file "not recognized as a supported format" by
	GDAL1.8dev ?
In-Reply-To: <201010142202.15847.even.rouault@mines-paris.org>
References: <AANLkTim1TD3_GGgmy7Hojfk3cDXycUg1L9-N+UipF_+-@mail.gmail.com>
	<201010142202.15847.even.rouault@mines-paris.org>
Message-ID: <AANLkTimtcm5oFqEBk3CtakGMWaN6s08m4f-updK4n1Jk@mail.gmail.com>

Your instructions worked. thanks!

On Thu, Oct 14, 2010 at 4:02 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Boris
>
> yes, GDAL should be able to read geoPDF topo files from the USGS.
> (geospatial
> PDF is more neutral term than geoPDF that happens to be a trademark... see
> "Important Note" in http://en.wikipedia.org/wiki/Geospatial_PDF. no
> further
> comment...)
>
> First, did you check that PDF is listed when doing :
>
> $ gdalinfo --formats
>
> If not, then GDAL configure hasn't found poppler. You should check that you
> have a /usr/include/poppler directory and a /usr/lib/libpoppler.so file, or
> if
> you have installed them in another root (./configure --enable-xpdf-headers
> --
> prefix=/some/path) , you should specify this directory as value of --with-
> poppler=/some/path
>
> If yes, then you should provide a link to the file that causes problem so I
> can
> see what's wrong with it
>
> Le jeudi 14 octobre 2010 21:24:38, Boris Dev a ?crit :
> > A GDAL doc <http://www.gdal.org/frmt_pdf.html> says GDAL1.8 handles
> > geospatial PDF file (which I assume are the same as geoPDF topo files of
> > the USGS).
> >
> > The problem is that after compiling GDAL1.8 from source GDAL doesn't
> > recognize my geoPDF file.
> >
> > When I try both of the following:
> >
> > $gdalinfo my_geopdf.pdf
> >
> > $gdal_translate my_geopdf.pdf
> >
> > It returns:
> >
> > ERROR 4: 'my_geopdf.pdf' not recognized as a supported format"
> >
> > When compiling GDAL and POPPLER (which is also needed for this problem) I
> > made sure to do the following:
> >
> > gdal$./configure --with-poppler=yes --with-python
> >
> > poppler$./configure --enable-xpdf-headers
> >
> > ...any suggestions on where I am going wrong with this?
> >
> > I am new to using GDAL.
> >
> > My final objective to to extact the geoPDF images as jpegs and somehow
> > extract the latitude/longitude bounding box information of the image so I
> > can create KMLs.
> >
> > THANKS!!
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101018/453c928e/attachment.html
From warmerdam at pobox.com  Mon Oct 18 20:19:30 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 18 20:19:38 2010
Subject: [gdal-dev] RFC 29 - OGR Ignored Fields Applied in Trunk
Message-ID: <4CBCE412.9060203@pobox.com>

Folks,

With minor adjustments and the addition of swig bindings and a test suite
I have committed Martin's changes for RFC 29 - OGR field ignoring.

Testing is welcome.  We could of course benefit from implementation of
this capability in many other drivers - especially RDBMS drivers, and it
would be nice to have some applications taking advantage of it.

   http://trac.osgeo.org/gdal/ticket/3716
   http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alexander.bruy at gmail.com  Tue Oct 19 03:15:07 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Tue Oct 19 03:15:09 2010
Subject: [gdal-dev] RFC 29 - OGR Ignored Fields Applied in Trunk
In-Reply-To: <4CBCE412.9060203@pobox.com>
References: <4CBCE412.9060203@pobox.com>
Message-ID: <AANLkTikoSGDLqS6eiy72GvU_emMa7zqX_4GwPzE7CA0E@mail.gmail.com>

Thanks for this Frank

We used this functionality in our project and were forced to compile GDAL
with this patch. Also we add this capability to the SQLite driver.
I've upload our patch for it this evening

2010/10/19 Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> With minor adjustments and the addition of swig bindings and a test suite
> I have committed Martin's changes for RFC 29 - OGR field ignoring.
>
> Testing is welcome. ?We could of course benefit from implementation of
> this capability in many other drivers - especially RDBMS drivers, and it
> would be nice to have some applications taking advantage of it.
>
> ?http://trac.osgeo.org/gdal/ticket/3716
> ?http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Alexander Bruy
From j.donovan at virtalis.com  Tue Oct 19 05:53:03 2010
From: j.donovan at virtalis.com (John Donovan)
Date: Tue Oct 19 05:53:10 2010
Subject: [gdal-dev] gdaldem color-relief color_text_files
References: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>
Message-ID: <C8891C79DFCAB347B9221DF3890EDD2F73E833@topdog.Virtalis.local>

This isn't quite what you need, but for creating thematic colour
schemes, http://colorbrewer2.org/ is a rather neat tool. I suppose it
wouldn't be too much of a stretch to interpolate between the colours it
generates for a full 256 pallette.
 
-JD

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Mark Millman
Sent: 15 October 2010 01:17
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] gdaldem color-relief color_text_files



I am in need of some color_text files to use with the gdaldem
color-relief utility to create color relief versions of Slope, Aspect,
Roughness, TRI, & TPI maps.  I seems to me that these ought to be pretty
standard and as my skill set is on the developer side rather than the
cartographer side of things I am hoping that some generous cartographer
out there has already created some eye candy quality color_text_files
for this purpose.

 

Thanks in advance.  Mark


______________________________________________________________________
This email has been scanned for Virtalis Ltd by the MessageLabs Email
Security System.
______________________________________________________________________


...
From jluis at ualg.pt  Tue Oct 19 06:08:14 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Oct 19 06:08:31 2010
Subject: [gdal-dev] gdaldem color-relief color_text_files
In-Reply-To: <C8891C79DFCAB347B9221DF3890EDD2F73E833@topdog.Virtalis.local>
References: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>
	<C8891C79DFCAB347B9221DF3890EDD2F73E833@topdog.Virtalis.local>
Message-ID: <4CBD6E0E.1070607@ualg.pt>

Now that the ability to read GMT .cpt palettes was added to trunk I'll 
make a little advertise on the Mirone's "Color Palette" tool.
It has over a hundred internal color scales and one can manipulate each 
one of them with lifter and/or click-and-drags. At the end, the color 
scale can be exported as continuous or discrete GMT palettes. It looks 
like this

http://w3.ualg.pt/~jluis/mirone/files/ChangePalette2.html

Joaquim

> This isn't quite what you need, but for creating thematic colour
> schemes, http://colorbrewer2.org/ is a rather neat tool. I suppose it
> wouldn't be too much of a stretch to interpolate between the colours it
> generates for a full 256 pallette.
>
> -JD
>
> ________________________________
>
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Mark Millman
> Sent: 15 October 2010 01:17
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] gdaldem color-relief color_text_files
>
>
>
> I am in need of some color_text files to use with the gdaldem
> color-relief utility to create color relief versions of Slope, Aspect,
> Roughness, TRI,&  TPI maps.  I seems to me that these ought to be pretty
> standard and as my skill set is on the developer side rather than the
> cartographer side of things I am hoping that some generous cartographer
> out there has already created some eye candy quality color_text_files
> for this purpose.
>
>
>
> Thanks in advance.  Mark
>
>
> ______________________________________________________________________
> This email has been scanned for Virtalis Ltd by the MessageLabs Email
> Security System.
> ______________________________________________________________________
>
>
> ...
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>    

From bfraser at geoanalytic.com  Tue Oct 19 10:06:58 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Oct 19 10:07:07 2010
Subject: [gdal-dev] building with PDF driver on Windows + ?
In-Reply-To: <4CBB42DE.9090801@ualg.pt>
References: <4CB71B32.90200@ualg.pt>	<201010141932.53400.even.rouault@mines-paris.org>	<4CB752EB.4070201@ualg.pt>
	<4CB774E7.5020800@ualg.pt> <4CBB1CBD.5000200@geoanalytic.com>
	<4CBB3C54.2020802@ualg.pt> <4CBB3F75.3020101@geoanalytic.com>
	<4CBB42DE.9090801@ualg.pt>
Message-ID: <4CBDA602.8060204@geoanalytic.com>

  To all,

   Here's a list of steps for building GDAL with KDE-win's poppler.lib 
on Windows (win32):

1. Install compiler ( MS VC 9 Express Ed.), or better yet use the full 
MS VC 9 if you have it.
     http://www.microsoft.com/express/Downloads/#2008-Visual-CPP
   I don't think the SDK is required but here's a link:
     
http://blogs.msdn.com/b/windowssdk/archive/2008/02/07/windows-sdk-rtms.aspx

2. Install KDE-win32 stable 4.4.4 (http://windows.kde.org/).
     Note: In the installer unselect "skip basic settings pages" and 
select "Package Manager"
     Select Bin,Devel (and Src?) for:
         poppler-vc90     0.12.4
         freetype-vc90    2.4.2-3
         lcms            1.18

3. Get latest GDAL source:
     svn checkout https://svn.osgeo.org/gdal/trunk/gdal gdal

4. Edit GDAL's nmake.opt to enable poppler (it's commented-outby 
default), and edit/hack the makefile.vc to disable building of VB6 
support (ATL is not included in VC Express Ed. or the SDK)

5. Build GDAL with VC's command line:
     nmake -f makefile.vc

Many thanks to Joaquim and Even for pointing the way...

Best Regards,
Brent Fraser


On 10/17/2010 12:39 PM, Joaquim Luis wrote:
> On 17-10-2010 19:24, Brent Fraser wrote:
>>
>> Joaquim,
>>
>>   Many thanks for the info.  I may go the kde-win32 route for now to 
>> skip the building of poppler.lib, but I expect that eventually I may 
>> need to build it from source, especially for mapserver.
>>
>
> Right, and
>
>>>
>>> From memory, as I don't find the CMake cash with exact details.
>
> obviously I meant "cache" not "cash"
>
>

From even.rouault at mines-paris.org  Tue Oct 19 13:29:15 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct 19 13:29:22 2010
Subject: [gdal-dev] gdaldem color-relief color_text_files
In-Reply-To: <4CBD6E0E.1070607@ualg.pt>
References: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>
	<C8891C79DFCAB347B9221DF3890EDD2F73E833@topdog.Virtalis.local>
	<4CBD6E0E.1070607@ualg.pt>
Message-ID: <201010191929.15890.even.rouault@mines-paris.org>

Joaquim,

by the way the link to GDAL on Mirone home page 
(http://w3.ualg.pt/~jluis/mirone) is broken. It should point to 
http://gdal.org and not to http://remotesensing.org/gdal

Le mardi 19 octobre 2010 12:08:14, Joaquim Luis a ?crit :
> Now that the ability to read GMT .cpt palettes was added to trunk I'll
> make a little advertise on the Mirone's "Color Palette" tool.
> It has over a hundred internal color scales and one can manipulate each
> one of them with lifter and/or click-and-drags. At the end, the color
> scale can be exported as continuous or discrete GMT palettes. It looks
> like this
> 
> http://w3.ualg.pt/~jluis/mirone/files/ChangePalette2.html
> 
> Joaquim
> 
> > This isn't quite what you need, but for creating thematic colour
> > schemes, http://colorbrewer2.org/ is a rather neat tool. I suppose it
> > wouldn't be too much of a stretch to interpolate between the colours it
> > generates for a full 256 pallette.
> > 
> > -JD
> > 
> > ________________________________
> > 
> > From: gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Mark Millman
> > Sent: 15 October 2010 01:17
> > To: gdal-dev@lists.osgeo.org
> > Subject: [gdal-dev] gdaldem color-relief color_text_files
> > 
> > 
> > 
> > I am in need of some color_text files to use with the gdaldem
> > color-relief utility to create color relief versions of Slope, Aspect,
> > Roughness, TRI,&  TPI maps.  I seems to me that these ought to be pretty
> > standard and as my skill set is on the developer side rather than the
> > cartographer side of things I am hoping that some generous cartographer
> > out there has already created some eye candy quality color_text_files
> > for this purpose.
> > 
> > 
> > 
> > Thanks in advance.  Mark
> > 
> > 
> > ______________________________________________________________________
> > This email has been scanned for Virtalis Ltd by the MessageLabs Email
> > Security System.
> > ______________________________________________________________________
> > 
> > 
> > ...
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From George.Corrado at gd-ais.com  Tue Oct 19 13:33:53 2010
From: George.Corrado at gd-ais.com (Corrado, George P.)
Date: Tue Oct 19 13:49:09 2010
Subject: [gdal-dev] DTED Elevations with Java and gdal
Message-ID: <E8ACED485A33194F9FDAC00F6DD724FD15706AB882@VAFF06-MABPRD01.ad.gd-ais.com>

Hello,

Does anyone have a java example on how to get elevations from a .dt1 file.  My ultimate goal would be to take a .dt1, translate it to a png, and then feed the png into gdal to get elevations and coordinates.

I ran the gdal_translate on one of my .dt1 files and came up with this.  Note: this is actually DTED2 even though the file ext is dt1.  Not sure why that is, maybe because it's really old.

C:\jdk1.6.0_21\bin>gdal_translate -of PNG --config GDAL_CACHEMAX 30 C:\DTED2\DTED\E032\N34.DT1 C:\DTED2\DTED\E032\N34.pn
g
Input file size is 3601, 3601
Warning 6: PNG driver doesn't support data type Int16. Only eight bit (Byte) and sixteen bit (UInt16) bands supported. D
efaulting to Byte

0...10...20...30...40...50...60...70...80...90...100 - done.

It created a png file along with an xml file.  I had to do this with the gdal_translate.exe file, but eventually I would like to use straight Java.

Thanks,
George


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101019/05ff92d9/attachment.html
From jluis at ualg.pt  Tue Oct 19 13:57:37 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Oct 19 13:58:12 2010
Subject: [gdal-dev] gdaldem color-relief color_text_files
In-Reply-To: <201010191929.15890.even.rouault@mines-paris.org>
References: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>	<C8891C79DFCAB347B9221DF3890EDD2F73E833@topdog.Virtalis.local>	<4CBD6E0E.1070607@ualg.pt>
	<201010191929.15890.even.rouault@mines-paris.org>
Message-ID: <4CBDDC11.9000603@ualg.pt>

Even,

Thanks. It was when I wrote it long time ago. Now fixed.


> Joaquim,
>
> by the way the link to GDAL on Mirone home page
> (http://w3.ualg.pt/~jluis/mirone) is broken. It should point to
> http://gdal.org and not to http://remotesensing.org/gdal
>
> Le mardi 19 octobre 2010 12:08:14, Joaquim Luis a ?crit :
>    
>> Now that the ability to read GMT .cpt palettes was added to trunk I'll
>> make a little advertise on the Mirone's "Color Palette" tool.
>> It has over a hundred internal color scales and one can manipulate each
>> one of them with lifter and/or click-and-drags. At the end, the color
>> scale can be exported as continuous or discrete GMT palettes. It looks
>> like this
>>
>> http://w3.ualg.pt/~jluis/mirone/files/ChangePalette2.html
>>
>> Joaquim
>>
>>      
>>> This isn't quite what you need, but for creating thematic colour
>>> schemes, http://colorbrewer2.org/ is a rather neat tool. I suppose it
>>> wouldn't be too much of a stretch to interpolate between the colours it
>>> generates for a full 256 pallette.
>>>
>>> -JD
>>>
>>> ________________________________
>>>
>>> From: gdal-dev-bounces@lists.osgeo.org
>>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Mark Millman
>>> Sent: 15 October 2010 01:17
>>> To: gdal-dev@lists.osgeo.org
>>> Subject: [gdal-dev] gdaldem color-relief color_text_files
>>>
>>>
>>>
>>> I am in need of some color_text files to use with the gdaldem
>>> color-relief utility to create color relief versions of Slope, Aspect,
>>> Roughness, TRI,&   TPI maps.  I seems to me that these ought to be pretty
>>> standard and as my skill set is on the developer side rather than the
>>> cartographer side of things I am hoping that some generous cartographer
>>> out there has already created some eye candy quality color_text_files
>>> for this purpose.
>>>
>>>
>>>
>>> Thanks in advance.  Mark
>>>
>>>
>>> ______________________________________________________________________
>>> This email has been scanned for Virtalis Ltd by the MessageLabs Email
>>> Security System.
>>> ______________________________________________________________________
>>>
>>>
>>> ...
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>        
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>      
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>    

From even.rouault at mines-paris.org  Tue Oct 19 14:03:34 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct 19 14:03:40 2010
Subject: [gdal-dev] DTED Elevations with Java and gdal
In-Reply-To: <E8ACED485A33194F9FDAC00F6DD724FD15706AB882@VAFF06-MABPRD01.ad.gd-ais.com>
References: <E8ACED485A33194F9FDAC00F6DD724FD15706AB882@VAFF06-MABPRD01.ad.gd-ais.com>
Message-ID: <201010192003.34559.even.rouault@mines-paris.org>

George,

It's not appropriate to convert from DTED to PNG. See the warning of 
gdal_translate : DTED is signed 16 bits, but PNG can only support unsigned 16 
bits. So if you translate from DTED to PNG you'll lose the negative values 
(and in particular the nodata=-32767). I'm not sure why you want to convert 
your DTED file and not use it directly ? If you really don't want to read the 
DTED, convert to Geotiff instead

To do this with Java, see the Driver.CreateCopy() method :

http://gdal.org/java/org/gdal/gdal/Driver.html#CreateCopy(java.lang.String,
%20org.gdal.gdal.Dataset)

Best regards,

Even

Le mardi 19 octobre 2010 19:33:53, Corrado, George P. a ?crit :
> Hello,
> 
> Does anyone have a java example on how to get elevations from a .dt1 file. 
> My ultimate goal would be to take a .dt1, translate it to a png, and then
> feed the png into gdal to get elevations and coordinates.
> 
> I ran the gdal_translate on one of my .dt1 files and came up with this. 
> Note: this is actually DTED2 even though the file ext is dt1.  Not sure
> why that is, maybe because it's really old.
> 
> C:\jdk1.6.0_21\bin>gdal_translate -of PNG --config GDAL_CACHEMAX 30
> C:\DTED2\DTED\E032\N34.DT1 C:\DTED2\DTED\E032\N34.pn g
> Input file size is 3601, 3601
> Warning 6: PNG driver doesn't support data type Int16. Only eight bit
> (Byte) and sixteen bit (UInt16) bands supported. D efaulting to Byte
> 
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> It created a png file along with an xml file.  I had to do this with the
> gdal_translate.exe file, but eventually I would like to use straight Java.
> 
> Thanks,
> George
From bfraser at geoanalytic.com  Tue Oct 19 14:11:13 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Oct 19 14:11:27 2010
Subject: [gdal-dev] Testing Geospatial PDF support
Message-ID: <4CBDDF41.2080506@geoanalytic.com>

  Even,


   I've tested a couple of Geospatial PDFs with the code that's in GDAL 
trunk.

The Canadian topos work well (e.g. 
ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/50k_geopdf/085/b/cantopo_085b14_geopdf.zip).   
They were produced using ESRI ArcMap 9.2.6.1500.  I get a properly 
geo-referenced GeoTiff after running gdal_translate.

  I have another PDF produced by ArcMap10.0.0.2414.   It has a main map 
and a keymap.  The strange thing is that even though the coordinate 
system is UTM Zone 35 , it has a transformation matrix with geographic 
coordinates given.  Here's a portion of the "dump" file:

  Item[4] : VP
   Type = array
    Item[0]:
     Type = dictionary
      Item[0] : Name = ??I (string)
      Item[1] : Measure
       Type = dictionary
        Item[0] : Subtype = GEO (name)
        Item[1] : LPTS
         Type = array
          Item[0]: 0 (int)
          Item[1]: 1 (int)
          Item[2]: 0 (int)
          Item[3]: 0 (int)
          Item[4]: 1 (int)
          Item[5]: 0 (int)
          Item[6]: 1 (int)
          Item[7]: 1 (int)
        Item[2] : GPTS
         Type = array
          Item[0]: 38.815000 (real)
          Item[1]: 23.644900 (real)
          Item[2]: 43.662600 (real)
          Item[3]: 23.387000 (real)
          Item[4]: 43.615000 (real)
          Item[5]: 31.889000 (real)
          Item[6]: 38.774900 (real)
          Item[7]: 31.540700 (real)
        Item[3] : GCS
         Type = dictionary
          Item[0] : WKT = 
PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]] 
(string)
          Item[1] : Type = PROJCS (name)
        Item[4] : Type = Measure (name)
        Item[5] : Bounds
         Type = array
          Item[0]: 0 (int)
          Item[1]: 1 (int)
          Item[2]: 0 (int)
          Item[3]: 0 (int)
          Item[4]: 1 (int)
          Item[5]: 0 (int)
          Item[6]: 1 (int)
          Item[7]: 1 (int)
      Item[2] : Type = Viewport (name)
      Item[3] : BBox
       Type = array
        Item[0]: 3168 (int)
        Item[1]: 2433 (int)
        Item[2]: 3557 (int)
        Item[3]: 2127 (int)
    Item[1]:
     Type = dictionary
      Item[0] : Name = ??A (string)
      Item[1] : Measure
       Type = dictionary
        Item[0] : Subtype = GEO (name)
        Item[1] : LPTS
         Type = array
          Item[0]: 0 (int)
          Item[1]: 1 (int)
          Item[2]: 0 (int)
          Item[3]: 0 (int)
          Item[4]: 1 (int)
          Item[5]: 0 (int)
          Item[6]: 1 (int)
          Item[7]: 1 (int)
        Item[2] : GPTS
         Type = array
          Item[0]: 40.190600 (real)
          Item[1]: 26.279300 (real)
          Item[2]: 40.767200 (real)
          Item[3]: 26.273100 (real)
          Item[4]: 40.769300 (real)
          Item[5]: 27.212000 (real)
          Item[6]: 40.192600 (real)
          Item[7]: 27.210200 (real)
        Item[3] : GCS
         Type = dictionary
          Item[0] : WKT = 
PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]] 
(string)
          Item[1] : Type = PROJCS (name)
        Item[4] : Type = Measure (name)
        Item[5] : Bounds
         Type = array
          Item[0]: 0 (int)
          Item[1]: 1 (int)
          Item[2]: 0 (int)
          Item[3]: 0 (int)
          Item[4]: 1 (int)
          Item[5]: 0 (int)
          Item[6]: 1 (int)
          Item[7]: 1 (int)
      Item[2] : Type = Viewport (name)
      Item[3] : BBox
       Type = array
        Item[0]: 57 (int)
        Item[1]: 2465 (int)
        Item[2]: 3052 (int)
        Item[3]: 46 (int)

------------------------

The resulting GeoTiff has a scaling problem, I suspect related to the 
transformation matrix.

Any thoughts on that?

Thanks!
Brent Fraser


From aashishcy at gmail.com  Tue Oct 19 14:37:29 2010
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Tue Oct 19 14:37:31 2010
Subject: [gdal-dev] grouping shapefiles
Message-ID: <AANLkTin4tqJbNznR52RG+Ef5BrAhnjt6jFg3JeVCDxfo@mail.gmail.com>

I know I can merge shapefiles using ogr2ogr but is there a way to group
them? So that each layer can be separate and we just send users a single
file (other then zip)?

I don't know any but wondering if someone.

Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101019/14abcc48/attachment.html
From even.rouault at mines-paris.org  Tue Oct 19 14:45:24 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct 19 14:45:30 2010
Subject: [gdal-dev] Re: Testing Geospatial PDF support
In-Reply-To: <4CBDDF41.2080506@geoanalytic.com>
References: <4CBDDF41.2080506@geoanalytic.com>
Message-ID: <201010192045.25075.even.rouault@mines-paris.org>

Brent,

I'm not sure what you find is wrong. What does gdalinfo returns ?

The PDF driver will reproject the coordinates of the GPTS array from 
geographic into UTM 35N and try to build a geotransform matrix from that. The 
matrix may have rotating terms, so you likely need to use gdalwarp afterwards 
to make it look "straight". However I'm not 100% sure this is the correct way 
to interpret the the Adobe style georeferencing, but I didn't find a better one 
up to know. So if you or someone else have any clue...

Most geospatial PDFs I've found in the wild (such as the one of cantopo) seem 
to use the OGC Best Practice encoding.

Even

Le mardi 19 octobre 2010 20:11:13, Brent Fraser a ?crit :
>   Even,
> 
> 
>    I've tested a couple of Geospatial PDFs with the code that's in GDAL
> trunk.
> 
> The Canadian topos work well (e.g.
> ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/50k_geopdf/085/b/cantopo_085b14_geo
> pdf.zip). They were produced using ESRI ArcMap 9.2.6.1500.  I get a
> properly geo-referenced GeoTiff after running gdal_translate.
> 
>   I have another PDF produced by ArcMap10.0.0.2414.   It has a main map
> and a keymap.  The strange thing is that even though the coordinate
> system is UTM Zone 35 , it has a transformation matrix with geographic
> coordinates given.  Here's a portion of the "dump" file:
> 
>   Item[4] : VP
>    Type = array
>     Item[0]:
>      Type = dictionary
>       Item[0] : Name = ??I (string)
>       Item[1] : Measure
>        Type = dictionary
>         Item[0] : Subtype = GEO (name)
>         Item[1] : LPTS
>          Type = array
>           Item[0]: 0 (int)
>           Item[1]: 1 (int)
>           Item[2]: 0 (int)
>           Item[3]: 0 (int)
>           Item[4]: 1 (int)
>           Item[5]: 0 (int)
>           Item[6]: 1 (int)
>           Item[7]: 1 (int)
>         Item[2] : GPTS
>          Type = array
>           Item[0]: 38.815000 (real)
>           Item[1]: 23.644900 (real)
>           Item[2]: 43.662600 (real)
>           Item[3]: 23.387000 (real)
>           Item[4]: 43.615000 (real)
>           Item[5]: 31.889000 (real)
>           Item[6]: 38.774900 (real)
>           Item[7]: 31.540700 (real)
>         Item[3] : GCS
>          Type = dictionary
>           Item[0] : WKT =
> PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPH
> EROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["De
> gree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["Fal
> se_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Me
> ridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origi
> n",0.0],UNIT["Meter",1.0]] (string)
>           Item[1] : Type = PROJCS (name)
>         Item[4] : Type = Measure (name)
>         Item[5] : Bounds
>          Type = array
>           Item[0]: 0 (int)
>           Item[1]: 1 (int)
>           Item[2]: 0 (int)
>           Item[3]: 0 (int)
>           Item[4]: 1 (int)
>           Item[5]: 0 (int)
>           Item[6]: 1 (int)
>           Item[7]: 1 (int)
>       Item[2] : Type = Viewport (name)
>       Item[3] : BBox
>        Type = array
>         Item[0]: 3168 (int)
>         Item[1]: 2433 (int)
>         Item[2]: 3557 (int)
>         Item[3]: 2127 (int)
>     Item[1]:
>      Type = dictionary
>       Item[0] : Name = ??A (string)
>       Item[1] : Measure
>        Type = dictionary
>         Item[0] : Subtype = GEO (name)
>         Item[1] : LPTS
>          Type = array
>           Item[0]: 0 (int)
>           Item[1]: 1 (int)
>           Item[2]: 0 (int)
>           Item[3]: 0 (int)
>           Item[4]: 1 (int)
>           Item[5]: 0 (int)
>           Item[6]: 1 (int)
>           Item[7]: 1 (int)
>         Item[2] : GPTS
>          Type = array
>           Item[0]: 40.190600 (real)
>           Item[1]: 26.279300 (real)
>           Item[2]: 40.767200 (real)
>           Item[3]: 26.273100 (real)
>           Item[4]: 40.769300 (real)
>           Item[5]: 27.212000 (real)
>           Item[6]: 40.192600 (real)
>           Item[7]: 27.210200 (real)
>         Item[3] : GCS
>          Type = dictionary
>           Item[0] : WKT =
> PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPH
> EROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["De
> gree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["Fal
> se_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Me
> ridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origi
> n",0.0],UNIT["Meter",1.0]] (string)
>           Item[1] : Type = PROJCS (name)
>         Item[4] : Type = Measure (name)
>         Item[5] : Bounds
>          Type = array
>           Item[0]: 0 (int)
>           Item[1]: 1 (int)
>           Item[2]: 0 (int)
>           Item[3]: 0 (int)
>           Item[4]: 1 (int)
>           Item[5]: 0 (int)
>           Item[6]: 1 (int)
>           Item[7]: 1 (int)
>       Item[2] : Type = Viewport (name)
>       Item[3] : BBox
>        Type = array
>         Item[0]: 57 (int)
>         Item[1]: 2465 (int)
>         Item[2]: 3052 (int)
>         Item[3]: 46 (int)
> 
> ------------------------
> 
> The resulting GeoTiff has a scaling problem, I suspect related to the
> transformation matrix.
> 
> Any thoughts on that?
> 
> Thanks!
> Brent Fraser
From dan.putler at sauder.ubc.ca  Tue Oct 19 15:08:34 2010
From: dan.putler at sauder.ubc.ca (Dan Putler)
Date: Tue Oct 19 15:09:45 2010
Subject: [gdal-dev] grouping shapefiles
In-Reply-To: <AANLkTin4tqJbNznR52RG+Ef5BrAhnjt6jFg3JeVCDxfo@mail.gmail.com>
References: <AANLkTin4tqJbNznR52RG+Ef5BrAhnjt6jFg3JeVCDxfo@mail.gmail.com>
Message-ID: <4CBDECB2.8010803@sauder.ubc.ca>

Hi Jayesh,

I think the short answer is "no". A shapefile can only deal with one 
geometry layer at a time by construction. To handle multiple layers in 
the same file, folks have gone to geospatial databases, where each table 
is a separate layer if the table has a geometry column. An "open" format 
that would do what you want can be done using SpatiaLite: 
http://www.gaia-gis.it/spatialite/.

Dan

On 10/19/2010 11:37 AM, Jayesh Chaudhary wrote:
> I know I can merge shapefiles using ogr2ogr but is there a way to 
> group them? So that each layer can be separate and we just send users 
> a single file (other then zip)?
>
> I don't know any but wondering if someone.
>
> Thanks,
>

From EAdam at co.lincoln.or.us  Tue Oct 19 15:10:18 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Tue Oct 19 15:10:58 2010
Subject: [gdal-dev] Re: Testing Geospatial PDF support
In-Reply-To: <201010192045.25075.even.rouault@mines-paris.org>
References: <4CBDDF41.2080506@geoanalytic.com>
	<201010192045.25075.even.rouault@mines-paris.org>
Message-ID: <4CBD8AA9.4F75.00CE.0@co.lincoln.or.us>

There are more geospatial pdfs available here:
http://nationalmap.gov/ustopo/index.html - then click on 'Download Maps
(Map Store)' on the left side.  

Then you need to place a marker, then click the marker, then hit
download.

I've not worked with them very much yet.  

Bests, Eli

>>> Even Rouault <even.rouault@mines-paris.org> 10/19/2010 11:45 AM
>>>
Brent,

I'm not sure what you find is wrong. What does gdalinfo returns ?

The PDF driver will reproject the coordinates of the GPTS array from 
geographic into UTM 35N and try to build a geotransform matrix from
that. The 
matrix may have rotating terms, so you likely need to use gdalwarp
afterwards 
to make it look "straight". However I'm not 100% sure this is the
correct way 
to interpret the the Adobe style georeferencing, but I didn't find a
better one 
up to know. So if you or someone else have any clue...

Most geospatial PDFs I've found in the wild (such as the one of
cantopo) seem 
to use the OGC Best Practice encoding.

Even

Le mardi 19 octobre 2010 20:11:13, Brent Fraser a ?crit :
>   Even,
> 
> 
>    I've tested a couple of Geospatial PDFs with the code that's in
GDAL
> trunk.
> 
> The Canadian topos work well (e.g.
>
ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/50k_geopdf/085/b/cantopo_085b14_geo

> pdf.zip). They were produced using ESRI ArcMap 9.2.6.1500.  I get a
> properly geo-referenced GeoTiff after running gdal_translate.
> 
>   I have another PDF produced by ArcMap10.0.0.2414.   It has a main
map
> and a keymap.  The strange thing is that even though the coordinate
> system is UTM Zone 35 , it has a transformation matrix with
geographic
> coordinates given.  Here's a portion of the "dump" file:
> 
>   Item[4] : VP
>    Type = array
>     Item[0]:
>      Type = dictionary
>       Item[0] : Name = ??I (string)
>       Item[1] : Measure
>        Type = dictionary
>         Item[0] : Subtype = GEO (name)
>         Item[1] : LPTS
>          Type = array
>           Item[0]: 0 (int)
>           Item[1]: 1 (int)
>           Item[2]: 0 (int)
>           Item[3]: 0 (int)
>           Item[4]: 1 (int)
>           Item[5]: 0 (int)
>           Item[6]: 1 (int)
>           Item[7]: 1 (int)
>         Item[2] : GPTS
>          Type = array
>           Item[0]: 38.815000 (real)
>           Item[1]: 23.644900 (real)
>           Item[2]: 43.662600 (real)
>           Item[3]: 23.387000 (real)
>           Item[4]: 43.615000 (real)
>           Item[5]: 31.889000 (real)
>           Item[6]: 38.774900 (real)
>           Item[7]: 31.540700 (real)
>         Item[3] : GCS
>          Type = dictionary
>           Item[0] : WKT =
>
PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPH
>
EROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["De
>
gree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["Fal
>
se_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Me
>
ridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origi
> n",0.0],UNIT["Meter",1.0]] (string)
>           Item[1] : Type = PROJCS (name)
>         Item[4] : Type = Measure (name)
>         Item[5] : Bounds
>          Type = array
>           Item[0]: 0 (int)
>           Item[1]: 1 (int)
>           Item[2]: 0 (int)
>           Item[3]: 0 (int)
>           Item[4]: 1 (int)
>           Item[5]: 0 (int)
>           Item[6]: 1 (int)
>           Item[7]: 1 (int)
>       Item[2] : Type = Viewport (name)
>       Item[3] : BBox
>        Type = array
>         Item[0]: 3168 (int)
>         Item[1]: 2433 (int)
>         Item[2]: 3557 (int)
>         Item[3]: 2127 (int)
>     Item[1]:
>      Type = dictionary
>       Item[0] : Name = ??A (string)
>       Item[1] : Measure
>        Type = dictionary
>         Item[0] : Subtype = GEO (name)
>         Item[1] : LPTS
>          Type = array
>           Item[0]: 0 (int)
>           Item[1]: 1 (int)
>           Item[2]: 0 (int)
>           Item[3]: 0 (int)
>           Item[4]: 1 (int)
>           Item[5]: 0 (int)
>           Item[6]: 1 (int)
>           Item[7]: 1 (int)
>         Item[2] : GPTS
>          Type = array
>           Item[0]: 40.190600 (real)
>           Item[1]: 26.279300 (real)
>           Item[2]: 40.767200 (real)
>           Item[3]: 26.273100 (real)
>           Item[4]: 40.769300 (real)
>           Item[5]: 27.212000 (real)
>           Item[6]: 40.192600 (real)
>           Item[7]: 27.210200 (real)
>         Item[3] : GCS
>          Type = dictionary
>           Item[0] : WKT =
>
PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPH
>
EROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["De
>
gree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["Fal
>
se_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Me
>
ridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origi
> n",0.0],UNIT["Meter",1.0]] (string)
>           Item[1] : Type = PROJCS (name)
>         Item[4] : Type = Measure (name)
>         Item[5] : Bounds
>          Type = array
>           Item[0]: 0 (int)
>           Item[1]: 1 (int)
>           Item[2]: 0 (int)
>           Item[3]: 0 (int)
>           Item[4]: 1 (int)
>           Item[5]: 0 (int)
>           Item[6]: 1 (int)
>           Item[7]: 1 (int)
>       Item[2] : Type = Viewport (name)
>       Item[3] : BBox
>        Type = array
>         Item[0]: 57 (int)
>         Item[1]: 2465 (int)
>         Item[2]: 3052 (int)
>         Item[3]: 46 (int)
> 
> ------------------------
> 
> The resulting GeoTiff has a scaling problem, I suspect related to
the
> transformation matrix.
> 
> Any thoughts on that?
> 
> Thanks!
> Brent Fraser
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org 
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From bfraser at geoanalytic.com  Tue Oct 19 16:54:28 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Oct 19 16:54:39 2010
Subject: [gdal-dev] Re: Testing Geospatial PDF support
In-Reply-To: <201010192045.25075.even.rouault@mines-paris.org>
References: <4CBDDF41.2080506@geoanalytic.com>
	<201010192045.25075.even.rouault@mines-paris.org>
Message-ID: <4CBE0584.6060706@geoanalytic.com>

  Evan,

For the original PDF, gdalinfo shows:

Driver: PDF/Geospatial PDF
Files: my.pdf
Size is 7487, 5229
Coordinate System is:
PROJCS["WGS_1984_UTM_Zone_35N",
     GEOGCS["GCS_WGS_1984",
         DATUM["WGS_1984",
             SPHEROID["WGS_1984",6378137.0,298.257223563]],
         PRIMEM["Greenwich",0.0],
         UNIT["Degree",0.0174532925199433]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["False_Easting",500000.0],
     PARAMETER["False_Northing",0.0],
     PARAMETER["Central_Meridian",27.0],
     PARAMETER["Scale_Factor",0.9996],
     PARAMETER["Latitude_Of_Origin",0.0],
     UNIT["Meter",1.0]]
GeoTransform =
   208685.3477667082, 91.60344342730002, -9.686865691546485e-005
   4840743.141406364, -0.0003005644555746527, -103.1065102766238
Corner Coordinates:
Upper Left  (  208685.348, 4840743.141) ( 23d23'13.21"E, 43d39'45.29"N)
Lower Left  (  208684.841, 4301599.199) ( 23d38'41.63"E, 38d48'54.07"N)
Upper Right (  894520.329, 4840740.891) ( 31d53'20.40"E, 43d36'54.07"N)
Lower Right (  894519.822, 4301596.949) ( 31d32'26.52"E, 38d46'29.57"N)
Center      (  551602.585, 4571170.045) ( 27d36'58.63"E, 41d17'25.18"N)
Band 1 Block=7487x1 Type=Byte, ColorInterp=Red
Band 2 Block=7487x1 Type=Byte, ColorInterp=Green
Band 3 Block=7487x1 Type=Byte, ColorInterp=Blue


and the resulting Geotiff is:

Driver: GTiff/GeoTIFF
Files: my.tif
Size is 7487, 5229
Coordinate System is:
PROJCS["WGS 84 / UTM zone 35N",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",27],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","32635"]]
GeoTransform =
   208685.3477667082, 91.60344342730002, -9.686865691546485e-005
   4840743.141406364, -0.0003005644555746527, -103.1065102766238
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  208685.348, 4840743.141) ( 23d23'13.21"E, 43d39'45.29"N)
Lower Left  (  208684.841, 4301599.199) ( 23d38'41.63"E, 38d48'54.07"N)
Upper Right (  894520.329, 4840740.891) ( 31d53'20.40"E, 43d36'54.07"N)
Lower Right (  894519.822, 4301596.949) ( 31d32'26.52"E, 38d46'29.57"N)
Center      (  551602.585, 4571170.045) ( 27d36'58.63"E, 41d17'25.18"N)
Band 1 Block=7487x1 Type=Byte, ColorInterp=Red
Band 2 Block=7487x1 Type=Byte, ColorInterp=Green
Band 3 Block=7487x1 Type=Byte, ColorInterp=Blue



After gdalwarp:

Driver: GTiff/GeoTIFF
Files: gdalwarp.tif
Size is 7179, 5644
Coordinate System is:
PROJCS["WGS 84 / UTM zone 35N",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",27],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","32635"]]
Origin = (208684.841232902890000,4840743.141386642100000)
Pixel Size = (95.527649479168488,-95.527649479168488)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  208684.841, 4840743.141) ( 23d23'13.19"E, 43d39'45.29"N)
Lower Left  (  208684.841, 4301585.088) ( 23d38'41.65"E, 38d48'53.62"N)
Upper Right (  894477.837, 4840743.141) ( 31d53'18.52"E, 43d36'54.23"N)
Lower Right (  894477.837, 4301585.088) ( 31d32'24.76"E, 38d46'29.25"N)
Center      (  551581.339, 4571164.115) ( 27d36'57.71"E, 41d17'24.99"N)
Band 1 Block=7179x1 Type=Byte, ColorInterp=Red
Band 2 Block=7179x1 Type=Byte, ColorInterp=Green
Band 3 Block=7179x1 Type=Byte, ColorInterp=Blue


Doing the math on a 1:75k map, at 150 dpi the pixel size should be about 
12.7 meters.

Brent

On 10/19/2010 12:45 PM, Even Rouault wrote:
> Brent,
>
> I'm not sure what you find is wrong. What does gdalinfo returns ?
>
> The PDF driver will reproject the coordinates of the GPTS array from
> geographic into UTM 35N and try to build a geotransform matrix from that. The
> matrix may have rotating terms, so you likely need to use gdalwarp afterwards
> to make it look "straight". However I'm not 100% sure this is the correct way
> to interpret the the Adobe style georeferencing, but I didn't find a better one
> up to know. So if you or someone else have any clue...
>
> Most geospatial PDFs I've found in the wild (such as the one of cantopo) seem
> to use the OGC Best Practice encoding.
>
> Even
>
> Le mardi 19 octobre 2010 20:11:13, Brent Fraser a ?crit :
>>    Even,
>>
>>
>>     I've tested a couple of Geospatial PDFs with the code that's in GDAL
>> trunk.
>>
>> The Canadian topos work well (e.g.
>> ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/50k_geopdf/085/b/cantopo_085b14_geo
>> pdf.zip). They were produced using ESRI ArcMap 9.2.6.1500.  I get a
>> properly geo-referenced GeoTiff after running gdal_translate.
>>
>>    I have another PDF produced by ArcMap10.0.0.2414.   It has a main map
>> and a keymap.  The strange thing is that even though the coordinate
>> system is UTM Zone 35 , it has a transformation matrix with geographic
>> coordinates given.  Here's a portion of the "dump" file:
>>
>>    Item[4] : VP
>>     Type = array
>>      Item[0]:
>>       Type = dictionary
>>        Item[0] : Name = ??I (string)
>>        Item[1] : Measure
>>         Type = dictionary
>>          Item[0] : Subtype = GEO (name)
>>          Item[1] : LPTS
>>           Type = array
>>            Item[0]: 0 (int)
>>            Item[1]: 1 (int)
>>            Item[2]: 0 (int)
>>            Item[3]: 0 (int)
>>            Item[4]: 1 (int)
>>            Item[5]: 0 (int)
>>            Item[6]: 1 (int)
>>            Item[7]: 1 (int)
>>          Item[2] : GPTS
>>           Type = array
>>            Item[0]: 38.815000 (real)
>>            Item[1]: 23.644900 (real)
>>            Item[2]: 43.662600 (real)
>>            Item[3]: 23.387000 (real)
>>            Item[4]: 43.615000 (real)
>>            Item[5]: 31.889000 (real)
>>            Item[6]: 38.774900 (real)
>>            Item[7]: 31.540700 (real)
>>          Item[3] : GCS
>>           Type = dictionary
>>            Item[0] : WKT =
>> PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPH
>> EROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["De
>> gree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["Fal
>> se_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Me
>> ridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origi
>> n",0.0],UNIT["Meter",1.0]] (string)
>>            Item[1] : Type = PROJCS (name)
>>          Item[4] : Type = Measure (name)
>>          Item[5] : Bounds
>>           Type = array
>>            Item[0]: 0 (int)
>>            Item[1]: 1 (int)
>>            Item[2]: 0 (int)
>>            Item[3]: 0 (int)
>>            Item[4]: 1 (int)
>>            Item[5]: 0 (int)
>>            Item[6]: 1 (int)
>>            Item[7]: 1 (int)
>>        Item[2] : Type = Viewport (name)
>>        Item[3] : BBox
>>         Type = array
>>          Item[0]: 3168 (int)
>>          Item[1]: 2433 (int)
>>          Item[2]: 3557 (int)
>>          Item[3]: 2127 (int)
>>      Item[1]:
>>       Type = dictionary
>>        Item[0] : Name = ??A (string)
>>        Item[1] : Measure
>>         Type = dictionary
>>          Item[0] : Subtype = GEO (name)
>>          Item[1] : LPTS
>>           Type = array
>>            Item[0]: 0 (int)
>>            Item[1]: 1 (int)
>>            Item[2]: 0 (int)
>>            Item[3]: 0 (int)
>>            Item[4]: 1 (int)
>>            Item[5]: 0 (int)
>>            Item[6]: 1 (int)
>>            Item[7]: 1 (int)
>>          Item[2] : GPTS
>>           Type = array
>>            Item[0]: 40.190600 (real)
>>            Item[1]: 26.279300 (real)
>>            Item[2]: 40.767200 (real)
>>            Item[3]: 26.273100 (real)
>>            Item[4]: 40.769300 (real)
>>            Item[5]: 27.212000 (real)
>>            Item[6]: 40.192600 (real)
>>            Item[7]: 27.210200 (real)
>>          Item[3] : GCS
>>           Type = dictionary
>>            Item[0] : WKT =
>> PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPH
>> EROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["De
>> gree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["Fal
>> se_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Me
>> ridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origi
>> n",0.0],UNIT["Meter",1.0]] (string)
>>            Item[1] : Type = PROJCS (name)
>>          Item[4] : Type = Measure (name)
>>          Item[5] : Bounds
>>           Type = array
>>            Item[0]: 0 (int)
>>            Item[1]: 1 (int)
>>            Item[2]: 0 (int)
>>            Item[3]: 0 (int)
>>            Item[4]: 1 (int)
>>            Item[5]: 0 (int)
>>            Item[6]: 1 (int)
>>            Item[7]: 1 (int)
>>        Item[2] : Type = Viewport (name)
>>        Item[3] : BBox
>>         Type = array
>>          Item[0]: 57 (int)
>>          Item[1]: 2465 (int)
>>          Item[2]: 3052 (int)
>>          Item[3]: 46 (int)
>>
>> ------------------------
>>
>> The resulting GeoTiff has a scaling problem, I suspect related to the
>> transformation matrix.
>>
>> Any thoughts on that?
>>
>> Thanks!
>> Brent Fraser

From aashishcy at gmail.com  Tue Oct 19 18:47:39 2010
From: aashishcy at gmail.com (Jayesh Chaudhary)
Date: Tue Oct 19 18:47:43 2010
Subject: [gdal-dev] grouping shapefiles
In-Reply-To: <4CBDECB2.8010803@sauder.ubc.ca>
References: <AANLkTin4tqJbNznR52RG+Ef5BrAhnjt6jFg3JeVCDxfo@mail.gmail.com>
	<4CBDECB2.8010803@sauder.ubc.ca>
Message-ID: <AANLkTinu7VhJ-fNU3TLDYxH_h4vWVUh5cshpRGYef+5w@mail.gmail.com>

On Tue, Oct 19, 2010 at 3:08 PM, Dan Putler <dan.putler@sauder.ubc.ca>wrote:

> Hi Jayesh,
>
> I think the short answer is "no". A shapefile can only deal with one
> geometry layer at a time by construction.


Thanks,  I know this.


> To handle multiple layers in the same file, folks have gone to geospatial
> databases, where each table is a separate layer if the table has a geometry
> column. An "open" format that would do what you want can be done using
> SpatiaLite: http://www.gaia-gis.it/spatialite/.
>

This is very useful information. I was thinking of some sort of database but
didn't know about spatialite.

Thanks Dan. I will look into it.


> Dan
>
>
> On 10/19/2010 11:37 AM, Jayesh Chaudhary wrote:
>
>> I know I can merge shapefiles using ogr2ogr but is there a way to group
>> them? So that each layer can be separate and we just send users a single
>> file (other then zip)?
>>
>> I don't know any but wondering if someone.
>>
>> Thanks,
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101019/86052e62/attachment.html
From sebastian.ovide at gmail.com  Wed Oct 20 04:35:27 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Oct 20 04:35:53 2010
Subject: [gdal-dev] ESRI binary grids problem
Message-ID: <AANLkTikeChfh04OUFJ=wJ-hsGK7mZ3t2a0=d7vFkB1AN@mail.gmail.com>

Hi All

I've save a ESRI binary grid using ArcMAP (in Binary format) and using
gdalinfo it looks like the RRD files are not read...

any ideas ?

thanks

gis@mapserver:~$ gdalinfo data/ie/rasters/ie_t02_q200/
Driver: AIG/Arc/Info Binary Grid
Files: data/ie/rasters/ie_t02_q200/
       data/ie/rasters/ie_t02_q200/z001014x.adf
       data/ie/rasters/ie_t02_q200/prj.adf
       data/ie/rasters/ie_t02_q200/z001002.adf
       data/ie/rasters/ie_t02_q200/z001003.adf
       data/ie/rasters/ie_t02_q200/z001011x.adf
       data/ie/rasters/ie_t02_q200/z001008.adf
       data/ie/rasters/ie_t02_q200/z001004.adf
       data/ie/rasters/ie_t02_q200/dblbnd.adf
       data/ie/rasters/ie_t02_q200/w001001x.adf
       data/ie/rasters/ie_t02_q200/z001009x.adf
       data/ie/rasters/ie_t02_q200/z001012x.adf
       data/ie/rasters/ie_t02_q200/w001001.adf
       data/ie/rasters/ie_t02_q200/z001003x.adf
       data/ie/rasters/ie_t02_q200/sta.adf
       data/ie/rasters/ie_t02_q200/z001015.adf
       data/ie/rasters/ie_t02_q200/z001005.adf
       data/ie/rasters/ie_t02_q200/z001013x.adf
       data/ie/rasters/ie_t02_q200/z001010.adf
       data/ie/rasters/ie_t02_q200/w001000.adf
       data/ie/rasters/ie_t02_q200/z001006.adf
       data/ie/rasters/ie_t02_q200/z001014.adf
       data/ie/rasters/ie_t02_q200/hdr.adf
       data/ie/rasters/ie_t02_q200/z001001.adf
       data/ie/rasters/ie_t02_q200/z001005x.adf
       data/ie/rasters/ie_t02_q200/z001010x.adf
       data/ie/rasters/ie_t02_q200/z001004x.adf
       data/ie/rasters/ie_t02_q200/w001000x.adf
       data/ie/rasters/ie_t02_q200/z001013.adf
       data/ie/rasters/ie_t02_q200/z001015x.adf
       data/ie/rasters/ie_t02_q200/z001001x.adf
       data/ie/rasters/ie_t02_q200/z001007x.adf
       data/ie/rasters/ie_t02_q200/z001006x.adf
       data/ie/rasters/ie_t02_q200/z001011.adf
       data/ie/rasters/ie_t02_q200/z001007.adf
       data/ie/rasters/ie_t02_q200/z001008x.adf
       data/ie/rasters/ie_t02_q200/z001002x.adf
       data/ie/rasters/ie_t02_q200/z001009.adf
       data/ie/rasters/ie_t02_q200/z001012.adf
Size is 64402, 89106
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",53.5],
    PARAMETER["central_meridian",-8],
    PARAMETER["scale_factor",1.000035],
    PARAMETER["false_easting",200000],
    PARAMETER["false_northing",250000],
    UNIT["METERS",1]]
Origin = (15390.000000000000000,461520.000000000000000)
Pixel Size = (5.000000000000000,-5.000000000000000)
Corner Coordinates:
Upper Left  (   15390.000,  461520.000) ( 10d54'41.98"W, 55d21'55.72"N)
Lower Left  (   15390.000,   15990.000) ( 10d39'3.41"W, 51d22'1.58"N)
Upper Right (  337400.000,  461520.000) (  5d49'56.05"W, 55d22'51.38"N)
Lower Right (  337400.000,   15990.000) (  6d 1'35.29"W, 51d22'49.73"N)
Center      (  176395.000,  238755.000) (  8d21'17.49"W, 53d23'54.38"N)
Band 1 Block=512x4 Type=Float32, ColorInterp=Undefined
  Min=1.000 Max=4.000
  NoData Value=-3.4028234663852886e+38
ERROR 3: Attempt to read past EOF in
data/ie/rasters/ie_t02_q200//../info/arc.dir.
ERROR 4: Failed to open table .VAT


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/5909a113/attachment-0001.html
From bontepaarden at gmail.com  Wed Oct 20 05:15:43 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed Oct 20 05:16:10 2010
Subject: [gdal-dev] Reading GML
Message-ID: <AANLkTikb51LEY6QB4P7tXvaZhjJCRnTf-FKjZVHEd2Ep@mail.gmail.com>

Hi all,

I have a GML which I want to convert to shapefile.
I've started with checking the file with ogrinfo (v1.7.2).
It returns "Unrecognised geometry type <Surface>."

After searching a bit it seems GDAL v1.8 might read the GML properly.
So I'm looking for the binaries of GDAL v1.8. At Tamas his site I can
download the v1.7.2 version but I can't find the v1.8 binaries.

Does anybody know where I can download that version or do I need to build
them myself?

Thanks,

Paul
The Netherlands
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/fe373e39/attachment.html
From chaitanya.ch at gmail.com  Wed Oct 20 06:07:34 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Oct 20 06:07:37 2010
Subject: [gdal-dev] Reading GML
In-Reply-To: <AANLkTikb51LEY6QB4P7tXvaZhjJCRnTf-FKjZVHEd2Ep@mail.gmail.com>
References: <AANLkTikb51LEY6QB4P7tXvaZhjJCRnTf-FKjZVHEd2Ep@mail.gmail.com>
Message-ID: <AANLkTikJLcO7HPGwVvF5x3pPLkjo-ikLNYcikSFDxbeQ@mail.gmail.com>

Paul,

1.7 doesn't support some geometry types that 1.8 does. GDAL1.8 is yet to be
released. You have to build it yourselves.
You can find a nightly snapshot of the source code for the trunk (1.8) at
http://trac.osgeo.org/gdal/wiki/DownloadSource#NightlySnapshots
Build hints: http://trac.osgeo.org/gdal/wiki/BuildHints


On Wed, Oct 20, 2010 at 2:45 PM, Paul Meems <bontepaarden@gmail.com> wrote:

> Hi all,
>
> I have a GML which I want to convert to shapefile.
> I've started with checking the file with ogrinfo (v1.7.2).
> It returns "Unrecognised geometry type <Surface>."
>
> After searching a bit it seems GDAL v1.8 might read the GML properly.
> So I'm looking for the binaries of GDAL v1.8. At Tamas his site I can
> download the v1.7.2 version but I can't find the v1.8 binaries.
>
> Does anybody know where I can download that version or do I need to build
> them myself?
>
> Thanks,
>
> Paul
> The Netherlands
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/253cb081/attachment.html
From ari.jolma at gmail.com  Wed Oct 20 06:08:19 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Oct 20 06:08:25 2010
Subject: [gdal-dev] Reading GML
In-Reply-To: <AANLkTikb51LEY6QB4P7tXvaZhjJCRnTf-FKjZVHEd2Ep@mail.gmail.com>
References: <AANLkTikb51LEY6QB4P7tXvaZhjJCRnTf-FKjZVHEd2Ep@mail.gmail.com>
Message-ID: <4CBEBF93.5010403@gmail.com>

On 10/20/2010 12:15 PM, Paul Meems wrote:
> Hi all,
>
> I have a GML which I want to convert to shapefile.
> I've started with checking the file with ogrinfo (v1.7.2).
> It returns "Unrecognised geometry type <Surface>."
>
> After searching a bit it seems GDAL v1.8 might read the GML properly.
> So I'm looking for the binaries of GDAL v1.8. At Tamas his site I can 
> download the v1.7.2 version but I can't find the v1.8 binaries.
>
> Does anybody know where I can download that version or do I need to 
> build them myself?

Geoinformatica contains a very recent GDAL (1.8 is not yet released) 
built for Windows with MinGW: 
http://geoinformatics.tkk.fi/files/Geoinformatica/win32/Geoinformatica-2010-10-18.exe

It contains Xerces so GML should be supported (if that's a requirement - 
I don't use GML much) - I have no idea if GML surfaces are supported. 
Mark Overmeer develops a Perl module for GML but as of yet there's no 
integration with Geoinformatica (which contains Perl support for GDAL).

Ari

>
> Thanks,
>
> Paul
> The Netherlands
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/d5dfaa4e/attachment.html
From even.rouault at mines-paris.org  Wed Oct 20 07:20:04 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 20 07:20:12 2010
Subject: [gdal-dev] Reading GML
In-Reply-To: <AANLkTikJLcO7HPGwVvF5x3pPLkjo-ikLNYcikSFDxbeQ@mail.gmail.com>
References: <AANLkTikb51LEY6QB4P7tXvaZhjJCRnTf-FKjZVHEd2Ep@mail.gmail.com>
	<AANLkTikJLcO7HPGwVvF5x3pPLkjo-ikLNYcikSFDxbeQ@mail.gmail.com>
Message-ID: <1287573604.4cbed0643fbaa@webmail.free.fr>

Paul,

you can find GDAL 1.8dev binary packages on Tamas site. They are identified as
the -dev releases.

Selon Chaitanya kumar CH <chaitanya.ch@gmail.com>:

> Paul,
>
> 1.7 doesn't support some geometry types that 1.8 does. GDAL1.8 is yet to be
> released. You have to build it yourselves.
> You can find a nightly snapshot of the source code for the trunk (1.8) at
> http://trac.osgeo.org/gdal/wiki/DownloadSource#NightlySnapshots
> Build hints: http://trac.osgeo.org/gdal/wiki/BuildHints
>
>
> On Wed, Oct 20, 2010 at 2:45 PM, Paul Meems <bontepaarden@gmail.com> wrote:
>
> > Hi all,
> >
> > I have a GML which I want to convert to shapefile.
> > I've started with checking the file with ogrinfo (v1.7.2).
> > It returns "Unrecognised geometry type <Surface>."
> >
> > After searching a bit it seems GDAL v1.8 might read the GML properly.
> > So I'm looking for the binaries of GDAL v1.8. At Tamas his site I can
> > download the v1.7.2 version but I can't find the v1.8 binaries.
> >
> > Does anybody know where I can download that version or do I need to build
> > them myself?
> >
> > Thanks,
> >
> > Paul
> > The Netherlands
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t??a??????nj??/ /k??m??r/
> +91-9494447584
> 17.2416N 80.1426E
>


From bontepaarden at gmail.com  Wed Oct 20 09:24:37 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed Oct 20 09:25:00 2010
Subject: [gdal-dev] Reading GML
In-Reply-To: <1287573604.4cbed0643fbaa@webmail.free.fr>
References: <AANLkTikb51LEY6QB4P7tXvaZhjJCRnTf-FKjZVHEd2Ep@mail.gmail.com>
	<AANLkTikJLcO7HPGwVvF5x3pPLkjo-ikLNYcikSFDxbeQ@mail.gmail.com>
	<1287573604.4cbed0643fbaa@webmail.free.fr>
Message-ID: <AANLkTiniLNPDTNACdMEF2fU4_Pz665UORVg__xfVGVf4@mail.gmail.com>

Even,

You are completely right.
I was a bit confused by all the numbers in the package names ;)

I'm going the check my GML now.

Thanks,
Paul

2010/10/20 Even Rouault <even.rouault@mines-paris.org>

> Paul,
>
> you can find GDAL 1.8dev binary packages on Tamas site. They are identified
> as
> the -dev releases.
>
> Selon Chaitanya kumar CH <chaitanya.ch@gmail.com>:
>
> > Paul,
> >
> > 1.7 doesn't support some geometry types that 1.8 does. GDAL1.8 is yet to
> be
> > released. You have to build it yourselves.
> > You can find a nightly snapshot of the source code for the trunk (1.8) at
> > http://trac.osgeo.org/gdal/wiki/DownloadSource#NightlySnapshots
> > Build hints: http://trac.osgeo.org/gdal/wiki/BuildHints
> >
> >
> > On Wed, Oct 20, 2010 at 2:45 PM, Paul Meems <bontepaarden@gmail.com>
> wrote:
> >
> > > Hi all,
> > >
> > > I have a GML which I want to convert to shapefile.
> > > I've started with checking the file with ogrinfo (v1.7.2).
> > > It returns "Unrecognised geometry type <Surface>."
> > >
> > > After searching a bit it seems GDAL v1.8 might read the GML properly.
> > > So I'm looking for the binaries of GDAL v1.8. At Tamas his site I can
> > > download the v1.7.2 version but I can't find the v1.8 binaries.
> > >
> > > Does anybody know where I can download that version or do I need to
> build
> > > them myself?
> > >
> > > Thanks,
> > >
> > > Paul
> > > The Netherlands
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/8afced7c/attachment.html
From warmerdam at pobox.com  Wed Oct 20 09:43:02 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Oct 20 09:43:11 2010
Subject: [gdal-dev] ESRI binary grids problem
In-Reply-To: <AANLkTikeChfh04OUFJ=wJ-hsGK7mZ3t2a0=d7vFkB1AN@mail.gmail.com>
References: <AANLkTikeChfh04OUFJ=wJ-hsGK7mZ3t2a0=d7vFkB1AN@mail.gmail.com>
Message-ID: <4CBEF1E6.6060401@pobox.com>

Sebastian E. Ovide wrote:
> Hi All
> 
> I've save a ESRI binary grid using ArcMAP (in Binary format) and using 
> gdalinfo it looks like the RRD files are not read... 

Sebastian,

Unfortunately, it is hard for me to figure out much without access to
the dataset.   For a counter example, I'll provide a trimmed gdalinfo
report for an aigrid dataset where the .rrd's are used:

Driver: AIG/Arc/Info Binary Grid
Files: h_dem
        h_dem.aux
        h_dem.rrd
        h_dem/vat.adf
        h_dem/metadata.xml
        h_dem/log
        h_dem/w001001.adf
        h_dem/dblbnd.adf
        h_dem/hdr.adf
        h_dem/w001001x.adf
        h_dem/sta.adf
        h_dem/prj.adf
Size is 3602, 1802
Coordinate System is:
GEOGCS["WGS 84",
...
Origin = (-180.099999999999994,90.100000000000023)
Pixel Size = (0.100000000000000,-0.100000000000000)
Corner Coordinates:
Upper Left  (-180.1000000,  90.1000000) (180d 6' 0.00"W, 90d 6' 0.00"N)
Lower Left  (-180.1000000, -90.1000000) (180d 6' 0.00"W, 90d 6' 0.00"S)
Upper Right ( 180.1000000,  90.1000000) (180d 6' 0.00"E, 90d 6' 0.00"N)
Lower Right ( 180.1000000, -90.1000000) (180d 6' 0.00"E, 90d 6' 0.00"S)
Center      (   0.0000000,   0.0000000) (  0d 0' 0.00"E,  0d 0' 0.00"N)
Band 1 Block=256x4 Type=Int16, ColorInterp=Undefined
   Min=-405.000 Max=7512.000
   NoData Value=-32768
   Overviews: 899x449, 448x223, 223x110, 110x54
   Metadata:
     LAYER_TYPE=athematic

Note the .aux and .rrd files listed in the file list above the grid
directory.  Also note the "Overviews:" listed in the band description.

The error report in yours about not being able to read the contents of
the info directory are not uncommon and I wouldn't expect that to interefere
with the .aux/.rrd access though I'm not sure there is no side effect.  You
might try hiding your info directory temporarily to see if that helps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From boris.dev at gmail.com  Wed Oct 20 10:07:15 2010
From: boris.dev at gmail.com (Boris Dev)
Date: Wed Oct 20 10:07:39 2010
Subject: [gdal-dev] PDF-->JPEG-->KML. Confused about association between KML
 bounding box and PDF's neatline and corner coordinates.
Message-ID: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>

My objective is to make a KML ground overlay with a geospatial PDF map.

Using GDAL's translate utility I have converted the PDF to a JPEG. The next
step and problem for me is to write the text of the KML ground overlay,
which requires a text of bounding box information like this:

<LatLonBox>
        <north>37.91904192681665</north>
        <south>37.46543388598137</south>
        <east>15.35832653742206</east>
        <west>14.60128369746704</west>

        <rotation>-0.1556640799496235</rotation>
      </LatLonBox>


As GDAL's output, I saw that the entire PDF with legend, title, etc and not
just the map image was converted.

As GDAL's output, I also saw 2 parts of data that seem they are useful to
match a bounding box to the map within the jpeg, but I cant figure out the
puzzle of how to make this work? Can I get the bounding box of the entire
PDF image with this information below?

Corner Coordinates:
Upper Left  (  666937.758, 2024687.983)
Lower Left  (  666991.811, 2018338.153)
Upper Right (  674511.276, 2024754.795)
Lower Right (  674565.328, 2018404.965)
Center      (  670751.543, 2021546.474)

<MDI key="NEATLINE">POLYGON ((672676.488065659650601
2019417.955749646294862,672636.091432046378031
2024030.267778463661671,667347.405745737953112
2023983.612156898481771,667385.539170471020043
2019370.524140953086317,672676.488065659650601
2019417.955749646294862,672676.488065659650601
2019417.955749646294862,672676.488065659650601
2019417.955749646294862,672676.488065659650601
2019417.955749646294862))</MDI>

I realize the coordinate above need to be converted to lat/long to be a KML
ground overlay onto Google Maps, which I think I can handle.

But I am unsure if I need to extract the map image from the jpeg using the
NEATLINE?
How are the Corner Coordinates translated into a bounding box?

Any suggestions?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/7856199e/attachment.html
From cfab13 at hotmail.fr  Wed Oct 20 10:11:50 2010
From: cfab13 at hotmail.fr (Tacot)
Date: Wed Oct 20 10:11:52 2010
Subject: [gdal-dev] [gdal_retile]reshape ecw
Message-ID: <1287583910754-5655048.post@n2.nabble.com>


Hi,

I try to cut an image in several tiles.
I use this command:

gdal_retile -of ECW -ps 10000 10000 -targetDir C:\GDAL\ECW Image.ecw

I obtain 4 tiles, but after I've got this message:

"Traceback (most recent call last):
  File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal_retile.py", line 941, in ?
    sys.exit(main(sys.argv))
  File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal_retile.py", line 858, in main
    dsCreatedTileIndex = tileImage(minfo,ti)
  File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal_retile.py", line 336, in tileImage
    createTile(minfo, offsetX, offsetY, width, height,tilename,OGRDS)
  File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal_retile.py", line 507, in createTile
    data = s_band.ReadRaster( 0,0,readX,readY,readX,readY,  t_band.DataType
)
  File "C:\PROGRA~1\FWTOOL~1.7\pymod\gdal.py", line 851, in ReadRaster
    buf_xsize, buf_ysize,buf_type)
MemoryError"

So I guess that's a memory's problem.
So Is there a means to by-pass it?

Thanks

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-retile-reshape-ecw-tp5655048p5655048.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/ea5e7907/attachment.html
From bfraser at geoanalytic.com  Wed Oct 20 10:18:03 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Oct 20 10:18:06 2010
Subject: [gdal-dev] PDF-->JPEG-->KML. Confused about association between
	KML bounding box and PDF's neatline and corner coordinates.
In-Reply-To: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>
References: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>
Message-ID: <4CBEFA1B.6040407@geoanalytic.com>

Boris,

   Use gdalwarp to convert your jpeg to Geographic coordinates (I think 
it needs to be converted for KML anyways):

gdalwarp -t_srs EPSG:4326 in.jpg out.jpg

then use gdalinfo to get the corner coordinates.

Currently the entire page of the PDF is rendered into the image.   
Perhaps we can convince Even to add an option to convert only the mapped 
area (or mask everything else?)

Best Regards,
Brent Fraser

On 10/20/2010 8:07 AM, Boris Dev wrote:
> My objective is to make a KML ground overlay with a geospatial PDF map.
>
> Using GDAL's translate utility I have converted the PDF to a JPEG. The 
> next step and problem for me is to write the text of the KML ground 
> overlay, which requires a text of bounding box information like this:
>
> <LatLonBox>
>          <north>37.91904192681665</north>
>          <south>37.46543388598137</south>
>          <east>15.35832653742206</east>
>          <west>14.60128369746704</west>
>
>
>          <rotation>-0.1556640799496235</rotation>
>        </LatLonBox>
>
> As GDAL's output, I saw that the entire PDF with legend, title, etc 
> and not just the map image was converted.
>
> As GDAL's output, I also saw 2 parts of data that seem they are useful 
> to match a bounding box to the map within the jpeg, but I cant figure 
> out the puzzle of how to make this work? Can I get the bounding box of 
> the entire PDF image with this information below?
>
> Corner Coordinates:
> Upper Left  (  666937.758, 2024687.983)
> Lower Left  (  666991.811, 2018338.153)
> Upper Right (  674511.276, 2024754.795)
> Lower Right (  674565.328, 2018404.965)
> Center      (  670751.543, 2021546.474)
>
> <MDI key="NEATLINE">POLYGON ((672676.488065659650601 
> 2019417.955749646294862,672636.091432046378031 
> 2024030.267778463661671,667347.405745737953112 
> 2023983.612156898481771,667385.539170471020043 
> 2019370.524140953086317,672676.488065659650601 
> 2019417.955749646294862,672676.488065659650601 
> 2019417.955749646294862,672676.488065659650601 
> 2019417.955749646294862,672676.488065659650601 
> 2019417.955749646294862))</MDI>
>
> I realize the coordinate above need to be converted to lat/long to be 
> a KML ground overlay onto Google Maps, which I think I can handle.
>
> But I am unsure if I need to extract the map image from the jpeg using 
> the NEATLINE?
> How are the Corner Coordinates translated into a bounding box?
>
> Any suggestions?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/10d8584f/attachment.html
From christian.mueller at nvoe.at  Wed Oct 20 10:54:37 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Wed Oct 20 10:54:49 2010
Subject: [gdal-dev] [gdal_retile]reshape ecw
In-Reply-To: <1287583910754-5655048.post@n2.nabble.com>
References: <1287583910754-5655048.post@n2.nabble.com>
Message-ID: <20101020165437.imk6ly4q888g44ok@webmail.nvoe.at>

The error does not occur in the gdal_retile.py  python code, it occurs  
in the gdal C code.  Your tile size
is really large producing images with 100 millions of pixel. Try a  
smaller  pixel size, each pixel needs some bytes, dependent on your  
color model.

Quoting Tacot <cfab13@hotmail.fr>:

>
> Hi,
>
> I try to cut an image in several tiles.
> I use this command:
>
> gdal_retile -of ECW -ps 10000 10000 -targetDir C:\GDAL\ECW Image.ecw
>
> I obtain 4 tiles, but after I've got this message:
>
> "Traceback (most recent call last):
>   File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal_retile.py", line 941, in ?
>     sys.exit(main(sys.argv))
>   File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal_retile.py", line 858, in main
>     dsCreatedTileIndex = tileImage(minfo,ti)
>   File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal_retile.py", line 336, in tileImage
>     createTile(minfo, offsetX, offsetY, width, height,tilename,OGRDS)
>   File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal_retile.py", line 507, in createTile
>     data = s_band.ReadRaster( 0,0,readX,readY,readX,readY,  t_band.DataType
> )
>   File "C:\PROGRA~1\FWTOOL~1.7\pymod\gdal.py", line 851, in ReadRaster
>     buf_xsize, buf_ysize,buf_type)
> MemoryError"
>
> So I guess that's a memory's problem.
> So Is there a means to by-pass it?
>
> Thanks
>
> --
> View this message in context:   
> http://osgeo-org.1803224.n2.nabble.com/gdal-retile-reshape-ecw-tp5655048p5655048.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From even.rouault at mines-paris.org  Wed Oct 20 11:04:04 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 20 11:04:12 2010
Subject: [gdal-dev] PDF-->JPEG-->KML. Confused about association between
	KML bounding box and PDF's neatline and corner coordinates.
In-Reply-To: <4CBEFA1B.6040407@geoanalytic.com>
References: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>
	<4CBEFA1B.6040407@geoanalytic.com>
Message-ID: <1287587044.4cbf04e462b1e@webmail.free.fr>

You don't need to convince anyone to add new functionnality. It already exists
;-)

See the -cutline option of gdalwarp. Basically you use the NEATLINE reported by
gdalinfo as the CUTLINE (that was the sole purpose of reporting the NEATLINE by
the way !)

The easiest way is to make a simple CSV like this :

foo,WKT
bla,"POLYGON((....))"

and you paste the content of NEATLINE as the value of the WKT.

and do a gdalwarp without reprojecting to crop (use -crop_to_cutline) to the
neatline. Then you can do a 2nd gdalwarp to reproject to the target SRS.

(if you want to do just one gdalwarp, you'll have to do ogr2ogr to reproject the
cutline.csv into the target SRS)

See http://gdal.org/gdalwarp.html and/or
http://gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e08


> Boris,
>
>    Use gdalwarp to convert your jpeg to Geographic coordinates (I think
> it needs to be converted for KML anyways):
>
> gdalwarp -t_srs EPSG:4326 in.jpg out.jpg
>
> then use gdalinfo to get the corner coordinates.
>
> Currently the entire page of the PDF is rendered into the image.
> Perhaps we can convince Even to add an option to convert only the mapped
> area (or mask everything else?)
>
> Best Regards,
> Brent Fraser
>
> On 10/20/2010 8:07 AM, Boris Dev wrote:
> > My objective is to make a KML ground overlay with a geospatial PDF map.
> >
> > Using GDAL's translate utility I have converted the PDF to a JPEG. The
> > next step and problem for me is to write the text of the KML ground
> > overlay, which requires a text of bounding box information like this:
> >
> > <LatLonBox>
> >          <north>37.91904192681665</north>
> >          <south>37.46543388598137</south>
> >          <east>15.35832653742206</east>
> >          <west>14.60128369746704</west>
> >
> >
> >          <rotation>-0.1556640799496235</rotation>
> >        </LatLonBox>
> >
> > As GDAL's output, I saw that the entire PDF with legend, title, etc
> > and not just the map image was converted.
> >
> > As GDAL's output, I also saw 2 parts of data that seem they are useful
> > to match a bounding box to the map within the jpeg, but I cant figure
> > out the puzzle of how to make this work? Can I get the bounding box of
> > the entire PDF image with this information below?
> >
> > Corner Coordinates:
> > Upper Left  (  666937.758, 2024687.983)
> > Lower Left  (  666991.811, 2018338.153)
> > Upper Right (  674511.276, 2024754.795)
> > Lower Right (  674565.328, 2018404.965)
> > Center      (  670751.543, 2021546.474)
> >
> > <MDI key="NEATLINE">POLYGON ((672676.488065659650601
> > 2019417.955749646294862,672636.091432046378031
> > 2024030.267778463661671,667347.405745737953112
> > 2023983.612156898481771,667385.539170471020043
> > 2019370.524140953086317,672676.488065659650601
> > 2019417.955749646294862,672676.488065659650601
> > 2019417.955749646294862,672676.488065659650601
> > 2019417.955749646294862,672676.488065659650601
> > 2019417.955749646294862))</MDI>
> >
> > I realize the coordinate above need to be converted to lat/long to be
> > a KML ground overlay onto Google Maps, which I think I can handle.
> >
> > But I am unsure if I need to extract the map image from the jpeg using
> > the NEATLINE?
> > How are the Corner Coordinates translated into a bounding box?
> >
> > Any suggestions?
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From cfab13 at hotmail.fr  Wed Oct 20 11:15:52 2010
From: cfab13 at hotmail.fr (Tacot)
Date: Wed Oct 20 11:15:54 2010
Subject: [gdal-dev] Re: [gdal_retile]reshape ecw
In-Reply-To: <1287583910754-5655048.post@n2.nabble.com>
References: <1287583910754-5655048.post@n2.nabble.com>
Message-ID: <1287587752671-5655301.post@n2.nabble.com>


Hi,

Why do you talk about million pixels?

I'm trying now with this command:
gdal_retile -of ECW -ps 1000 1000 -targetDir C:\GDAL\ECW Image.ecw
It's not finished yet, but there's so many tiles!!

I thought maybe using gdalbuildvrt, it could be a possibility.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-retile-reshape-ecw-tp5655048p5655301.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From christian.mueller at nvoe.at  Wed Oct 20 11:27:26 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Wed Oct 20 11:27:37 2010
Subject: [gdal-dev] Re: [gdal_retile]reshape ecw
In-Reply-To: <1287587752671-5655301.post@n2.nabble.com>
References: <1287583910754-5655048.post@n2.nabble.com>
	<1287587752671-5655301.post@n2.nabble.com>
Message-ID: <20101020172726.p559vl674ko48cgs@webmail.nvoe.at>

The -ps parameter specifies the pixel width and pixel height of a  
tile. You must multiply these values.

-ps  1000 1000

means 1000x1000 = 1 million pixels for each tile

As a consequence, a tile needs 1 MB .. n MB , depending on your color  
model. The file size of the tiles my be smaller if compression is  
used. (e. g. png), but in memory during calculations, the  raster data  
is uncompressed.

Quoting Tacot <cfab13@hotmail.fr>:

>
> Hi,
>
> Why do you talk about million pixels?
>
> I'm trying now with this command:
> gdal_retile -of ECW -ps 1000 1000 -targetDir C:\GDAL\ECW Image.ecw
> It's not finished yet, but there's so many tiles!!
>
> I thought maybe using gdalbuildvrt, it could be a possibility.
> --
> View this message in context:   
> http://osgeo-org.1803224.n2.nabble.com/gdal-retile-reshape-ecw-tp5655048p5655301.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From bfraser at geoanalytic.com  Wed Oct 20 13:26:36 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Oct 20 13:26:39 2010
Subject: [gdal-dev] PDF-->JPEG-->KML. Confused about association between
	KML bounding box and PDF's neatline and corner coordinates.
In-Reply-To: <1287587044.4cbf04e462b1e@webmail.free.fr>
References: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>
	<4CBEFA1B.6040407@geoanalytic.com>
	<1287587044.4cbf04e462b1e@webmail.free.fr>
Message-ID: <4CBF264C.3070008@geoanalytic.com>

Hmmm.  My PDF doesn't seem to have a neatline, only a MediaBox and two 
BBoxes...

Brent

On 10/20/2010 9:04 AM, Even Rouault wrote:
> You don't need to convince anyone to add new functionnality. It already exists
> ;-)
>
> See the -cutline option of gdalwarp. Basically you use the NEATLINE reported by
> gdalinfo as the CUTLINE (that was the sole purpose of reporting the NEATLINE by
> the way !)
>
> The easiest way is to make a simple CSV like this :
>
> foo,WKT
> bla,"POLYGON((....))"
>
> and you paste the content of NEATLINE as the value of the WKT.
>
> and do a gdalwarp without reprojecting to crop (use -crop_to_cutline) to the
> neatline. Then you can do a 2nd gdalwarp to reproject to the target SRS.
>
> (if you want to do just one gdalwarp, you'll have to do ogr2ogr to reproject the
> cutline.csv into the target SRS)
>
> See http://gdal.org/gdalwarp.html and/or
> http://gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e08
>
>
>> Boris,
>>
>>     Use gdalwarp to convert your jpeg to Geographic coordinates (I think
>> it needs to be converted for KML anyways):
>>
>> gdalwarp -t_srs EPSG:4326 in.jpg out.jpg
>>
>> then use gdalinfo to get the corner coordinates.
>>
>> Currently the entire page of the PDF is rendered into the image.
>> Perhaps we can convince Even to add an option to convert only the mapped
>> area (or mask everything else?)
>>
>> Best Regards,
>> Brent Fraser
>>
>> On 10/20/2010 8:07 AM, Boris Dev wrote:
>>> My objective is to make a KML ground overlay with a geospatial PDF map.
>>>
>>> Using GDAL's translate utility I have converted the PDF to a JPEG. The
>>> next step and problem for me is to write the text of the KML ground
>>> overlay, which requires a text of bounding box information like this:
>>>
>>> <LatLonBox>
>>>           <north>37.91904192681665</north>
>>>           <south>37.46543388598137</south>
>>>           <east>15.35832653742206</east>
>>>           <west>14.60128369746704</west>
>>>
>>>
>>>           <rotation>-0.1556640799496235</rotation>
>>>         </LatLonBox>
>>>
>>> As GDAL's output, I saw that the entire PDF with legend, title, etc
>>> and not just the map image was converted.
>>>
>>> As GDAL's output, I also saw 2 parts of data that seem they are useful
>>> to match a bounding box to the map within the jpeg, but I cant figure
>>> out the puzzle of how to make this work? Can I get the bounding box of
>>> the entire PDF image with this information below?
>>>
>>> Corner Coordinates:
>>> Upper Left  (  666937.758, 2024687.983)
>>> Lower Left  (  666991.811, 2018338.153)
>>> Upper Right (  674511.276, 2024754.795)
>>> Lower Right (  674565.328, 2018404.965)
>>> Center      (  670751.543, 2021546.474)
>>>
>>> <MDI key="NEATLINE">POLYGON ((672676.488065659650601
>>> 2019417.955749646294862,672636.091432046378031
>>> 2024030.267778463661671,667347.405745737953112
>>> 2023983.612156898481771,667385.539170471020043
>>> 2019370.524140953086317,672676.488065659650601
>>> 2019417.955749646294862,672676.488065659650601
>>> 2019417.955749646294862,672676.488065659650601
>>> 2019417.955749646294862,672676.488065659650601
>>> 2019417.955749646294862))</MDI>
>>>
>>> I realize the coordinate above need to be converted to lat/long to be
>>> a KML ground overlay onto Google Maps, which I think I can handle.
>>>
>>> But I am unsure if I need to extract the map image from the jpeg using
>>> the NEATLINE?
>>> How are the Corner Coordinates translated into a bounding box?
>>>
>>> Any suggestions?
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From even.rouault at mines-paris.org  Wed Oct 20 13:49:09 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Oct 20 13:49:15 2010
Subject: [gdal-dev] PDF-->JPEG-->KML. Confused about association between
	KML bounding box and PDF's neatline and corner coordinates.
In-Reply-To: <4CBF264C.3070008@geoanalytic.com>
References: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>
	<1287587044.4cbf04e462b1e@webmail.free.fr>
	<4CBF264C.3070008@geoanalytic.com>
Message-ID: <201010201949.09772.even.rouault@mines-paris.org>

NEATLINE is only a concept of geospatial PDF encoded according to the OGC Best 
Practice. Adobe-style have only bbox. That could be turned into a pseudo 
neatline I guess.

Le mercredi 20 octobre 2010 19:26:36, Brent Fraser a ?crit :
> Hmmm.  My PDF doesn't seem to have a neatline, only a MediaBox and two
> BBoxes...
> 
> Brent
> 
> On 10/20/2010 9:04 AM, Even Rouault wrote:
> > You don't need to convince anyone to add new functionnality. It already
> > exists ;-)
> > 
> > See the -cutline option of gdalwarp. Basically you use the NEATLINE
> > reported by gdalinfo as the CUTLINE (that was the sole purpose of
> > reporting the NEATLINE by the way !)
> > 
> > The easiest way is to make a simple CSV like this :
> > 
> > foo,WKT
> > bla,"POLYGON((....))"
> > 
> > and you paste the content of NEATLINE as the value of the WKT.
> > 
> > and do a gdalwarp without reprojecting to crop (use -crop_to_cutline) to
> > the neatline. Then you can do a 2nd gdalwarp to reproject to the target
> > SRS.
> > 
> > (if you want to do just one gdalwarp, you'll have to do ogr2ogr to
> > reproject the cutline.csv into the target SRS)
> > 
> > See http://gdal.org/gdalwarp.html and/or
> > http://gdal.org/structGDALWarpOptions.html#0ed77f9917bb96c7a9aabd73d4d06e
> > 08
> > 
> >> Boris,
> >> 
> >>     Use gdalwarp to convert your jpeg to Geographic coordinates (I think
> >> 
> >> it needs to be converted for KML anyways):
> >> 
> >> gdalwarp -t_srs EPSG:4326 in.jpg out.jpg
> >> 
> >> then use gdalinfo to get the corner coordinates.
> >> 
> >> Currently the entire page of the PDF is rendered into the image.
> >> Perhaps we can convince Even to add an option to convert only the mapped
> >> area (or mask everything else?)
> >> 
> >> Best Regards,
> >> Brent Fraser
> >> 
> >> On 10/20/2010 8:07 AM, Boris Dev wrote:
> >>> My objective is to make a KML ground overlay with a geospatial PDF map.
> >>> 
> >>> Using GDAL's translate utility I have converted the PDF to a JPEG. The
> >>> next step and problem for me is to write the text of the KML ground
> >>> overlay, which requires a text of bounding box information like this:
> >>> 
> >>> <LatLonBox>
> >>> 
> >>>           <north>37.91904192681665</north>
> >>>           <south>37.46543388598137</south>
> >>>           <east>15.35832653742206</east>
> >>>           <west>14.60128369746704</west>
> >>>           
> >>>           
> >>>           <rotation>-0.1556640799496235</rotation>
> >>>         
> >>>         </LatLonBox>
> >>> 
> >>> As GDAL's output, I saw that the entire PDF with legend, title, etc
> >>> and not just the map image was converted.
> >>> 
> >>> As GDAL's output, I also saw 2 parts of data that seem they are useful
> >>> to match a bounding box to the map within the jpeg, but I cant figure
> >>> out the puzzle of how to make this work? Can I get the bounding box of
> >>> the entire PDF image with this information below?
> >>> 
> >>> Corner Coordinates:
> >>> Upper Left  (  666937.758, 2024687.983)
> >>> Lower Left  (  666991.811, 2018338.153)
> >>> Upper Right (  674511.276, 2024754.795)
> >>> Lower Right (  674565.328, 2018404.965)
> >>> Center      (  670751.543, 2021546.474)
> >>> 
> >>> <MDI key="NEATLINE">POLYGON ((672676.488065659650601
> >>> 2019417.955749646294862,672636.091432046378031
> >>> 2024030.267778463661671,667347.405745737953112
> >>> 2023983.612156898481771,667385.539170471020043
> >>> 2019370.524140953086317,672676.488065659650601
> >>> 2019417.955749646294862,672676.488065659650601
> >>> 2019417.955749646294862,672676.488065659650601
> >>> 2019417.955749646294862,672676.488065659650601
> >>> 2019417.955749646294862))</MDI>
> >>> 
> >>> I realize the coordinate above need to be converted to lat/long to be
> >>> a KML ground overlay onto Google Maps, which I think I can handle.
> >>> 
> >>> But I am unsure if I need to extract the map image from the jpeg using
> >>> the NEATLINE?
> >>> How are the Corner Coordinates translated into a bounding box?
> >>> 
> >>> Any suggestions?
> >>> 
> >>> 
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From George.Corrado at gd-ais.com  Wed Oct 20 15:03:12 2010
From: George.Corrado at gd-ais.com (Corrado, George P.)
Date: Wed Oct 20 15:18:25 2010
Subject: [gdal-dev] DTED Elevations with Java and gdal
In-Reply-To: <201010192003.34559.even.rouault@mines-paris.org>
References: <E8ACED485A33194F9FDAC00F6DD724FD15706AB882@VAFF06-MABPRD01.ad.gd-ais.com>
	<201010192003.34559.even.rouault@mines-paris.org>
Message-ID: <E8ACED485A33194F9FDAC00F6DD724FD15706ABF11@VAFF06-MABPRD01.ad.gd-ais.com>

Hey Even,

So I was messing around with one of the gdal examples that prints a lot of debug info, which is nice.  I found a thread where someone wanted to get elevation data at a certain point or pixel.  I think it was Frank who responded to it.  Anyway, I tried to follow along, and I think I'm in the right place in code.  I've got the dted file loaded, it has gone through this line without error:

returnVal = poBand.ReadRaster_Direct(0, 0, poBand.getXSize(), poBand.getYSize(), xsize, ysize, buf_type, data.slice());


and this bit of code:

short[][] shorts = new short[bandCount][];
            for (int i = 0; i < bandCount; i++)
            {
                shorts[i] = new short[pixels];
                bands[i].asShortBuffer().get(shorts[i]);
            }
            imgBuffer = new DataBufferShort(shorts, pixels);
            buffer_type = DataBuffer.TYPE_USHORT;
            sampleModel = new BandedSampleModel(buffer_type,
                    xsize, ysize, xsize, banks, offsets);
            data_type = BufferedImage.TYPE_USHORT_GRAY;


does the imgBuffer or the sampleModel contain any elevation data for a given point?  Or do I have to get it from the Band class higher up in the code?  I think it would be cool to get all the pixel elevation data and then color each pixel according to elevation height.

I think this is the example I was working with:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/GDALtest.java

I saw this piece of code when I was browsing around the threads, but wasn't sure what geo_x and geo_y should be or where they come from.

double[] test = poDataset.GetGeoTransform();
        double pixel_x = (geo_x - test[0]) / test[1];
        double pixel_y = (geo_y - test[3]) / test[5];


Sorry for all the questions and pasting code.
Thanks,
George
-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Tuesday, October 19, 2010 2:04 PM
To: gdal-dev@lists.osgeo.org
Cc: Corrado, George P.
Subject: Re: [gdal-dev] DTED Elevations with Java and gdal

George,

It's not appropriate to convert from DTED to PNG. See the warning of 
gdal_translate : DTED is signed 16 bits, but PNG can only support unsigned 16 
bits. So if you translate from DTED to PNG you'll lose the negative values 
(and in particular the nodata=-32767). I'm not sure why you want to convert 
your DTED file and not use it directly ? If you really don't want to read the 
DTED, convert to Geotiff instead

To do this with Java, see the Driver.CreateCopy() method :

http://gdal.org/java/org/gdal/gdal/Driver.html#CreateCopy(java.lang.String,
%20org.gdal.gdal.Dataset)

Best regards,

Even

Le mardi 19 octobre 2010 19:33:53, Corrado, George P. a ?crit :
> Hello,
> 
> Does anyone have a java example on how to get elevations from a .dt1 file. 
> My ultimate goal would be to take a .dt1, translate it to a png, and then
> feed the png into gdal to get elevations and coordinates.
> 
> I ran the gdal_translate on one of my .dt1 files and came up with this. 
> Note: this is actually DTED2 even though the file ext is dt1.  Not sure
> why that is, maybe because it's really old.
> 
> C:\jdk1.6.0_21\bin>gdal_translate -of PNG --config GDAL_CACHEMAX 30
> C:\DTED2\DTED\E032\N34.DT1 C:\DTED2\DTED\E032\N34.pn g
> Input file size is 3601, 3601
> Warning 6: PNG driver doesn't support data type Int16. Only eight bit
> (Byte) and sixteen bit (UInt16) bands supported. D efaulting to Byte
> 
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> It created a png file along with an xml file.  I had to do this with the
> gdal_translate.exe file, but eventually I would like to use straight Java.
> 
> Thanks,
> George
From matt at globalforestwatch.ca  Wed Oct 20 16:50:58 2010
From: matt at globalforestwatch.ca (Matt Hanneman)
Date: Wed Oct 20 16:51:16 2010
Subject: [gdal-dev] gdal_merge: stacking and band statistics
Message-ID: <4CBF5632.8010708@globalforestwatch.ca>

  Hi,

Can anyone help a newbie? I have been trying to calculate statistics 
with gdal_merge when merging/stacking several tiffs together into a HFA 
format (see below for syntax). However, when loaded into ArcGIS it 
reports that there are no statistics calculated for any of the bands. 
Will the 'STATISTICS' option not work when stacking multiple bands? As 
you can probably tell I am fairly new to this, so forgive my ignorance.

gdal_merge -co STATISTICS=YES -v -o "E:/Temp/A2E.img" -of HFA -separate 
"A.TIF" "B.TIF" "C.TIF" "D.TIF" "E.TIF" "F.TIF"

Thanks,

Matt

-- 

*Matt Hanneman*
Director of GIS and Remote Sensing
Global Forest Watch Canada
10337 146 St, Edmonton, AB T5N 3A3
Tel: 780-422-5989 Fax: 780-454-5521
www.globalforestwatch.ca <http://www.globalforestwatch.ca/>

**

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/cb3bdba8/attachment.html
From elijah at villagis.com  Wed Oct 20 16:53:15 2010
From: elijah at villagis.com (Elijah Robison)
Date: Wed Oct 20 16:53:43 2010
Subject: [gdal-dev] gdal_merge: stacking and band statistics
In-Reply-To: <4CBF5632.8010708@globalforestwatch.ca>
References: <4CBF5632.8010708@globalforestwatch.ca>
Message-ID: <4CBF56BB.4060303@villagis.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/1748ad2d/attachment.html
From jason.roberts at duke.edu  Wed Oct 20 17:17:49 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Oct 20 17:18:04 2010
Subject: [gdal-dev] gdal_merge: stacking and band statistics
In-Reply-To: <4CBF5632.8010708@globalforestwatch.ca>
References: <4CBF5632.8010708@globalforestwatch.ca>
Message-ID: <00b301cb709c$40810f00$c1832d00$@roberts@duke.edu>

Matt,

 

Although I have not worked with multi-band HFA format, I have experimented
fairly extensively with single-band, GDAL-produced, HFA-format files in
ArcGIS 9.3.1 SP1. Maybe my experience will be interesting to you anyway.

 

My experience was that calculating the statistics with GDAL and with ArcGIS
was not equivalent. For example, when I calculated the statistics with GDAL
for integer rasters, they did not show up with a random color classification
in ArcGIS by default. They appeared to use a black-to-white stretch instead.
This was not desirable for categorical data (e.g. landcover values). But if
I calculated the statistics using ArcGIS, they did show up with random
colors.

 

Unfortunately I did not take extensive notes on this, summarizing my
experience in my own code with this comment:

 

        # Do not use GDAL to calculate statistics.

        # Even though GDAL can do it faster than the geoprocessor, we

        # prefer to use the geoprocessor to maximize the compatibility

        # of the output raster with ArcGIS. For example, I do not know

        # how to get GDAL to build an ArcGIS-compatible histogram.

        # Without the histogram ArcGIS defaults to displaying integer

        # rasters using a black-to-white stretch rather than a unique

        # value classifier with random colors. ArcGIS users will

        # expect colors; to get the necessary histogram, we have to

        # calculate statistics with the geoprocessor.

 

I also recall there being some other differences, possibly with floating
point files, too. I'm sorry I did not take better notes.

 

I found the whole thing a bit bizarre because I thought that ArcGIS 9.3.1
used GDAL internally to manipulate HFA files. But maybe not in all
circumstances. And 9.3.1 has an ESRI-customized version of GDAL 1.4, so it
is not like they are running the latest GDAL code.

 

Anyway, hope this helps,

 

Jason

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Matt Hanneman
Sent: Wednesday, October 20, 2010 4:51 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] gdal_merge: stacking and band statistics

 

Hi,

Can anyone help a newbie? I have been trying to calculate statistics with
gdal_merge when merging/stacking several tiffs together into a HFA format
(see below for syntax). However, when loaded into ArcGIS it reports that
there are no statistics calculated for any of the bands. Will the
'STATISTICS' option not work when stacking multiple bands? As you can
probably tell I am fairly new to this, so forgive my ignorance.

gdal_merge -co STATISTICS=YES -v -o "E:/Temp/A2E.img" -of HFA -separate
"A.TIF" "B.TIF" "C.TIF" "D.TIF" "E.TIF" "F.TIF"

Thanks,

Matt 

 

-- 

Matt Hanneman
Director of GIS and Remote Sensing
Global Forest Watch Canada
10337 146 St, Edmonton, AB T5N 3A3
Tel: 780-422-5989 Fax: 780-454-5521 
www.globalforestwatch.ca <http://www.globalforestwatch.ca/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/86191ccf/attachment-0001.html
From boris.dev at gmail.com  Wed Oct 20 17:28:15 2010
From: boris.dev at gmail.com (Boris Dev)
Date: Wed Oct 20 17:28:39 2010
Subject: [gdal-dev] PDF-->JPEG-->KML. Confused about association between
	KML bounding box and PDF's neatline and corner coordinates.
In-Reply-To: <4CBEFA1B.6040407@geoanalytic.com>
References: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>
	<4CBEFA1B.6040407@geoanalytic.com>
Message-ID: <AANLkTi=_t5EfzrGGTTxgWrmHxHh0rycP8nU=ceXhvN3J@mail.gmail.com>

thanks..I am almost there...I think I am making a simple usage typo?

gdalwarp without the option '-t_srs EPSG:4326' works OK.

But it doesnt work with the command written exactly as you have it

>
> gdalwarp -t_srs EPSG:4326 in.jpg out.jpg
>
>
After that command, I do not get anything processed (it just outputs to the
screen the usage info).

I also had no luck with trying different variations of the -t_srs option
such as

gdalwarp -t_srs "+proj=EPSG:4326" in.jpg out.jpg

I am using the most recent SVN GDAL.



>  then use gdalinfo to get the corner coordinates.
>
> Currently the entire page of the PDF is rendered into the image.   Perhaps
> we can convince Even to add an option to convert only the mapped area (or
> mask everything else?)
>
> Best Regards,
> Brent Fraser
>
>
> On 10/20/2010 8:07 AM, Boris Dev wrote:
>
> My objective is to make a KML ground overlay with a geospatial PDF map.
>
> Using GDAL's translate utility I have converted the PDF to a JPEG. The next
> step and problem for me is to write the text of the KML ground overlay,
> which requires a text of bounding box information like this:
>
> <LatLonBox>
>         <north>37.91904192681665</north>
>         <south>37.46543388598137</south>
>         <east>15.35832653742206</east>
>         <west>14.60128369746704</west>
>
>
>         <rotation>-0.1556640799496235</rotation>
>       </LatLonBox>
>
>
> As GDAL's output, I saw that the entire PDF with legend, title, etc and not
> just the map image was converted.
>
> As GDAL's output, I also saw 2 parts of data that seem they are useful to
> match a bounding box to the map within the jpeg, but I cant figure out the
> puzzle of how to make this work? Can I get the bounding box of the entire
> PDF image with this information below?
>
> Corner Coordinates:
> Upper Left  (  666937.758, 2024687.983)
> Lower Left  (  666991.811, 2018338.153)
> Upper Right (  674511.276, 2024754.795)
> Lower Right (  674565.328, 2018404.965)
> Center      (  670751.543, 2021546.474)
>
> <MDI key="NEATLINE">POLYGON ((672676.488065659650601
> 2019417.955749646294862,672636.091432046378031
> 2024030.267778463661671,667347.405745737953112
> 2023983.612156898481771,667385.539170471020043
> 2019370.524140953086317,672676.488065659650601
> 2019417.955749646294862,672676.488065659650601
> 2019417.955749646294862,672676.488065659650601
> 2019417.955749646294862,672676.488065659650601
> 2019417.955749646294862))</MDI>
>
> I realize the coordinate above need to be converted to lat/long to be a KML
> ground overlay onto Google Maps, which I think I can handle.
>
> But I am unsure if I need to extract the map image from the jpeg using the
> NEATLINE?
> How are the Corner Coordinates translated into a bounding box?
>
> Any suggestions?
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101020/6adb9fb0/attachment.html
From Luke.Pinner at environment.gov.au  Wed Oct 20 21:58:35 2010
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Wed Oct 20 22:13:41 2010
Subject: [gdal-dev] ogr.UseExceptions() doesn't raise an exception on a
	non-existant dataset [SEC=UNCLASSIFIED]
Message-ID: <64102B2FB850C345B04D09C82018F45F056E4CB7@ACT01VEXCCL04.internal.govt>

OGR doesn't raise an exception on attempting to open a non-existant
dataset even if ogr.UseExceptions() has been called, GDAL does though.
Is this intentional or a bug?
GDAL version = 1.7.2

from osgeo import gdal,ogr
gdal.UseExceptions()
ogr.UseExceptions()

ds=ogr.Open('foo')
#No exception raised by ogr

ds=gdal.Open('foo')
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
RuntimeError: `foo' does not exist in the file system,
and is not recognised as a supported dataset name.

Regards
Luke

If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.

Please consider the environment before printing this email.
From mark.millman at mizar.com  Thu Oct 21 01:18:00 2010
From: mark.millman at mizar.com (Mark Millman)
Date: Thu Oct 21 01:18:08 2010
Subject: [gdal-dev] gdaldem color-relief color_text_files
In-Reply-To: <C8891C79DFCAB347B9221DF3890EDD2F73E833@topdog.Virtalis.local>
References: <057a01cb6bfe$41627d70$c4277850$@millman@mizar.com>
	<C8891C79DFCAB347B9221DF3890EDD2F73E833@topdog.Virtalis.local>
Message-ID: <070801cb70df$55fe53e0$01fafba0$@millman@mizar.com>

Thanks, as you say this doesn't really solve my problem but it is a useful
tool, as was SpaceEyes3D Viewer color-relief editor.

In exploring my problem I've written some Java code to interpolate shades
within a color_text_file.  If you set up a color-text-file with color
differences at 1000 meter intervals, this code will fill in equally spaced
colors at 100m (or any increment you want) to produce a file with lots of
shades.  If anyone is interested I can provide the code for this.  If anyone
is interested in this let me know and I'll send you a copy.  

Mark

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of John Donovan
Sent: Tuesday, October 19, 2010 2:53 AM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] gdaldem color-relief color_text_files

This isn't quite what you need, but for creating thematic colour
schemes, http://colorbrewer2.org/ is a rather neat tool. I suppose it
wouldn't be too much of a stretch to interpolate between the colours it
generates for a full 256 pallette.
 
-JD

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Mark Millman
Sent: 15 October 2010 01:17
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] gdaldem color-relief color_text_files



I am in need of some color_text files to use with the gdaldem
color-relief utility to create color relief versions of Slope, Aspect,
Roughness, TRI, & TPI maps.  I seems to me that these ought to be pretty
standard and as my skill set is on the developer side rather than the
cartographer side of things I am hoping that some generous cartographer
out there has already created some eye candy quality color_text_files
for this purpose.

 

Thanks in advance.  Mark


______________________________________________________________________
This email has been scanned for Virtalis Ltd by the MessageLabs Email
Security System.
______________________________________________________________________


...
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ari.jolma at gmail.com  Thu Oct 21 01:59:46 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Oct 21 01:59:50 2010
Subject: [gdal-dev] ogr.UseExceptions() doesn't raise an exception on
	a non-existant dataset [SEC=UNCLASSIFIED]
In-Reply-To: <64102B2FB850C345B04D09C82018F45F056E4CB7@ACT01VEXCCL04.internal.govt>
References: <64102B2FB850C345B04D09C82018F45F056E4CB7@ACT01VEXCCL04.internal.govt>
Message-ID: <4CBFD6D2.3010604@gmail.com>

On 10/21/2010 04:58 AM, Pinner, Luke wrote:
> OGR doesn't raise an exception on attempting to open a non-existant
> dataset even if ogr.UseExceptions() has been called, GDAL does though.
> Is this intentional or a bug?
>    

Luke,

It is a (bit annoying feature admittedly) feature. If none of the 
available drivers open a data source based on the passed string, then 
OGROpen returns a null and barks only to debug stream if one is open. 
The swig wrappers (you're using Python swig wrappers) does not test this 
condition (no error but data source object null) and pass the null 
object up. So it is the app developer's responsibility to check for the 
returned data source object.

Best regards,

Ari

> GDAL version = 1.7.2
>
> from osgeo import gdal,ogr
> gdal.UseExceptions()
> ogr.UseExceptions()
>
> ds=ogr.Open('foo')
> #No exception raised by ogr
>
> ds=gdal.Open('foo')
> Traceback (most recent call last):
>    File "<interactive input>", line 1, in<module>
> RuntimeError: `foo' does not exist in the file system,
> and is not recognised as a supported dataset name.
>
> Regards
> Luke
>
> If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.
>
> Please consider the environment before printing this email.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    

From P.Halls at york.ac.uk  Thu Oct 21 02:11:30 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Oct 21 02:11:38 2010
Subject: [gdal-dev] gdal_merge: stacking and band statistics
In-Reply-To: <00b301cb709c$40810f00$c1832d00$@roberts@duke.edu>
References: <4CBF5632.8010708@globalforestwatch.ca>
	<00b301cb709c$40810f00$c1832d00$@roberts@duke.edu>
Message-ID: <4CBFD992.2090501@york.ac.uk>

Jason,

    as a heavy ArcGIS user and teacher, as well as GDAL, I think you may have 
missed something about ArcGIS.  I have not tested the *outputs* of statistics 
calculations between GDAL and ArcGIS, however what you describe seems to be a 
display default.

    When any image is opened from disk in ArcGIS the default display is a 
black-to-white stretch: it is necessary to go to the Symbology menu and select a 
more appropriate scheme.  However, the internal Statistics tool in ArcMap sets a 
categorical contrast colour scheme by default.  I think this is the difference 
you are observing.

    Whether the two results are equivalent or different cannot really be 
determined by display in this way, rather use the ArcGIS Raster Calculator to 
subtract one image from the other and then examine the residual results: if the 
images are equivalent the output cells should have the same value - although 
this value may not be zero.

Best wishes,

Peter

Jason Roberts wrote:
> Matt,
> 
>  
> 
> Although I have not worked with multi-band HFA format, I have experimented
> fairly extensively with single-band, GDAL-produced, HFA-format files in
> ArcGIS 9.3.1 SP1. Maybe my experience will be interesting to you anyway.
> 
>  
> 
> My experience was that calculating the statistics with GDAL and with ArcGIS
> was not equivalent. For example, when I calculated the statistics with GDAL
> for integer rasters, they did not show up with a random color classification
> in ArcGIS by default. They appeared to use a black-to-white stretch instead.
> This was not desirable for categorical data (e.g. landcover values). But if
> I calculated the statistics using ArcGIS, they did show up with random
> colors.
> 
>  
> 
> Unfortunately I did not take extensive notes on this, summarizing my
> experience in my own code with this comment:
> 
>  
> 
>         # Do not use GDAL to calculate statistics.
> 
>         # Even though GDAL can do it faster than the geoprocessor, we
> 
>         # prefer to use the geoprocessor to maximize the compatibility
> 
>         # of the output raster with ArcGIS. For example, I do not know
> 
>         # how to get GDAL to build an ArcGIS-compatible histogram.
> 
>         # Without the histogram ArcGIS defaults to displaying integer
> 
>         # rasters using a black-to-white stretch rather than a unique
> 
>         # value classifier with random colors. ArcGIS users will
> 
>         # expect colors; to get the necessary histogram, we have to
> 
>         # calculate statistics with the geoprocessor.
> 
>  
> 
> I also recall there being some other differences, possibly with floating
> point files, too. I'm sorry I did not take better notes.
> 
>  
> 
> I found the whole thing a bit bizarre because I thought that ArcGIS 9.3.1
> used GDAL internally to manipulate HFA files. But maybe not in all
> circumstances. And 9.3.1 has an ESRI-customized version of GDAL 1.4, so it
> is not like they are running the latest GDAL code.
> 
>  
> 
> Anyway, hope this helps,
> 
>  
> 
> Jason
> 
>  
> 
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Matt Hanneman
> Sent: Wednesday, October 20, 2010 4:51 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] gdal_merge: stacking and band statistics
> 
>  
> 
> Hi,
> 
> Can anyone help a newbie? I have been trying to calculate statistics with
> gdal_merge when merging/stacking several tiffs together into a HFA format
> (see below for syntax). However, when loaded into ArcGIS it reports that
> there are no statistics calculated for any of the bands. Will the
> 'STATISTICS' option not work when stacking multiple bands? As you can
> probably tell I am fairly new to this, so forgive my ignorance.
> 
> gdal_merge -co STATISTICS=YES -v -o "E:/Temp/A2E.img" -of HFA -separate
> "A.TIF" "B.TIF" "C.TIF" "D.TIF" "E.TIF" "F.TIF"
> 
> Thanks,
> 
> Matt 
> 
>  
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From P.Halls at york.ac.uk  Thu Oct 21 04:12:01 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Oct 21 04:12:07 2010
Subject: [gdal-dev] Query regarding results from ExecuteSQL and the OCI
 driver - pre OGR 1.8.n
Message-ID: <4CBFF5D1.7020902@york.ac.uk>

Dear Team,

     I'm waiting for 1.8 to be firmed up before upgrading to it, so this relates 
to the old OCI driver.

     I'm puzzled.  In order to work around the possibility that a table may not 
exist, and therefore require to be created, I attempted to use ExecuteSQL 
through the OCI driver with the SQL expression
"Select * from user_catalog where table_name like '<required table>'"

     The call returns a non-zero value, but when treating this as a layerhandle 
and looking to check that the layer name is that requested I find the results of 
  OGR_FD_GetName are the text of my original SQL query.  Looking at the code in 
ogrocidatasource I can see no apparent reason for this result.

     Am I going about my query incorrectly?  Should I be expecting to obtain a 
valid layer from this query or is a non-zero return value adequate indication 
that the result of the query contains one or more table names?

Thanks and best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From sebastian.ovide at gmail.com  Thu Oct 21 04:53:15 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Oct 21 04:53:37 2010
Subject: [gdal-dev] ESRI binary grids problem
In-Reply-To: <4CBEF1E6.6060401@pobox.com>
References: <AANLkTikeChfh04OUFJ=wJ-hsGK7mZ3t2a0=d7vFkB1AN@mail.gmail.com>
	<4CBEF1E6.6060401@pobox.com>
Message-ID: <AANLkTinGuBeFv8ero_WbsnzW80GGgfqf22hGvFJPyaK6@mail.gmail.com>

thanks for that  Frank,

mounting a windows share folder with samba I can see the Overviews. Copying
the same files into a ext4 FS, the overviews are not detected. So I renamed
the .rrd and .aux files in undercapital (same name as the raster folders)
and now I can see the overview also under ext4.

about the errors:

ERROR 3: Attempt to read past EOF in
data/ie/rasters/ie_t02_q200//../info/arc.dir.
ERROR 4: Failed to open table .VAT

I have deleted (renamed) the info folder and now the errors are gone... just
wondering if I have lost any functionality...


On Wed, Oct 20, 2010 at 2:43 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Sebastian E. Ovide wrote:
>
>> Hi All
>>
>> I've save a ESRI binary grid using ArcMAP (in Binary format) and using
>> gdalinfo it looks like the RRD files are not read...
>>
>
> Sebastian,
>
> Unfortunately, it is hard for me to figure out much without access to
> the dataset.   For a counter example, I'll provide a trimmed gdalinfo
> report for an aigrid dataset where the .rrd's are used:
>
>
> Driver: AIG/Arc/Info Binary Grid
> Files: h_dem
>       h_dem.aux
>       h_dem.rrd
>       h_dem/vat.adf
>       h_dem/metadata.xml
>       h_dem/log
>       h_dem/w001001.adf
>       h_dem/dblbnd.adf
>       h_dem/hdr.adf
>       h_dem/w001001x.adf
>       h_dem/sta.adf
>       h_dem/prj.adf
> Size is 3602, 1802
> Coordinate System is:
> GEOGCS["WGS 84",
> ...
> Origin = (-180.099999999999994,90.100000000000023)
> Pixel Size = (0.100000000000000,-0.100000000000000)
> Corner Coordinates:
> Upper Left  (-180.1000000,  90.1000000) (180d 6' 0.00"W, 90d 6' 0.00"N)
> Lower Left  (-180.1000000, -90.1000000) (180d 6' 0.00"W, 90d 6' 0.00"S)
> Upper Right ( 180.1000000,  90.1000000) (180d 6' 0.00"E, 90d 6' 0.00"N)
> Lower Right ( 180.1000000, -90.1000000) (180d 6' 0.00"E, 90d 6' 0.00"S)
> Center      (   0.0000000,   0.0000000) (  0d 0' 0.00"E,  0d 0' 0.00"N)
> Band 1 Block=256x4 Type=Int16, ColorInterp=Undefined
>  Min=-405.000 Max=7512.000
>  NoData Value=-32768
>  Overviews: 899x449, 448x223, 223x110, 110x54
>  Metadata:
>    LAYER_TYPE=athematic
>
> Note the .aux and .rrd files listed in the file list above the grid
> directory.  Also note the "Overviews:" listed in the band description.
>
> The error report in yours about not being able to read the contents of
> the info directory are not uncommon and I wouldn't expect that to
> interefere
> with the .aux/.rrd access though I'm not sure there is no side effect.  You
> might try hiding your info directory temporarily to see if that helps.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101021/30979423/attachment.html
From jason.roberts at duke.edu  Thu Oct 21 07:55:43 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Oct 21 07:55:59 2010
Subject: [gdal-dev] gdal_merge: stacking and band statistics
In-Reply-To: <4CBFD992.2090501@york.ac.uk>
References: <4CBF5632.8010708@globalforestwatch.ca>
	<00b301cb709c$40810f00$c1832d00$%roberts@duke.edu>
	<4CBFD992.2090501@york.ac.uk>
Message-ID: <00fb01cb7116$e49fd3d0$addf7b70$@roberts@duke.edu>

Peter,

Thanks for your comments. I did not mean to suggest that GDAL produced
different pixel values or statistical values than ArcGIS. In my experience,
they are the same (barring this GDAL bug that I found
http://trac.osgeo.org/gdal/ticket/3151 a while back, which has since been
fixed).

>     When any image is opened from disk in ArcGIS the default display is a 
> black-to-white stretch: it is necessary to go to the Symbology menu and
select a 
> more appropriate scheme.  However, the internal Statistics tool in ArcMap
sets a 
> categorical contrast colour scheme by default.  I think this is the
difference 
> you are observing.

I am not sure if the mechanism that you described here (the internal
Statistics tool in ArcMap sets a categorical contrast colour scheme by
default) is how it works, but the end effect you describe is what I'm
seeing. When you execute the "Calculate Statistics" tool in ArcGIS (in
ArcMap or ArcCatalog), it writes something to integer raster files that
cause them to be displayed with a random colorful categorical scheme by
default, rather than the black-and-white stretch. This seems to be an
additional side effect besides computing the statistical values. (Note that
this is not a color map; the colors are selected randomly every time the
file is loaded by the GUI).

GDAL seems to compute the statistical values just fine but does not perform
that side effect. I like that side effect because it makes it much easier to
distinguish arbitrary categorical values than a black-to-white stretch does.
But I have not figured out how to reproduce that side effect with GDAL. It
may be something that is ESRI-specific.

In the comments I extracted from my code (in my original reply to Matt), I
noted that the problem was "I do not know how to get GDAL to build an
ArcGIS-compatible histogram". That makes it sound like I had narrowed down
the side effect somewhat. Perhaps I did, but I do not have good notes from
those experiments. It sounds like I noticed that calling
GDALRasterBand::SetStatistics() was not enough to produce the side effect
but that the ArcGIS Calculate Statistics tool also happened to compute a
histogram that could be retrieved by GDALRasterBand::GetDefaultHistogram().
I probably concluded that the histogram was what enabled the side effect,
but then found that calling GDALRasterBand::SetDefaultHistogram() did not
produce the side effect either, and therefore that "GDAL does not build an
ArcGIS-compatible histogram".

Anyway, if you or anyone else can demonstrate how to produce an integer
raster with GDAL that displays by default in ArcGIS with the random colorful
categorical scheme, I would greatly appreciate that knowledge!

Best,
Jason


-----Original Message-----
From: Peter J Halls [mailto:P.Halls@york.ac.uk] 
Sent: Thursday, October 21, 2010 2:12 AM
To: Jason Roberts
Cc: 'Matt Hanneman'; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal_merge: stacking and band statistics

Jason,

    as a heavy ArcGIS user and teacher, as well as GDAL, I think you may
have 
missed something about ArcGIS.  I have not tested the *outputs* of
statistics 
calculations between GDAL and ArcGIS, however what you describe seems to be
a 
display default.

    When any image is opened from disk in ArcGIS the default display is a 
black-to-white stretch: it is necessary to go to the Symbology menu and
select a 
more appropriate scheme.  However, the internal Statistics tool in ArcMap
sets a 
categorical contrast colour scheme by default.  I think this is the
difference 
you are observing.

    Whether the two results are equivalent or different cannot really be 
determined by display in this way, rather use the ArcGIS Raster Calculator
to 
subtract one image from the other and then examine the residual results: if
the 
images are equivalent the output cells should have the same value - although

this value may not be zero.

Best wishes,

Peter

Jason Roberts wrote:
> Matt,
> 
>  
> 
> Although I have not worked with multi-band HFA format, I have experimented
> fairly extensively with single-band, GDAL-produced, HFA-format files in
> ArcGIS 9.3.1 SP1. Maybe my experience will be interesting to you anyway.
> 
>  
> 
> My experience was that calculating the statistics with GDAL and with
ArcGIS
> was not equivalent. For example, when I calculated the statistics with
GDAL
> for integer rasters, they did not show up with a random color
classification
> in ArcGIS by default. They appeared to use a black-to-white stretch
instead.
> This was not desirable for categorical data (e.g. landcover values). But
if
> I calculated the statistics using ArcGIS, they did show up with random
> colors.
> 
>  
> 
> Unfortunately I did not take extensive notes on this, summarizing my
> experience in my own code with this comment:
> 
>  
> 
>         # Do not use GDAL to calculate statistics.
> 
>         # Even though GDAL can do it faster than the geoprocessor, we
> 
>         # prefer to use the geoprocessor to maximize the compatibility
> 
>         # of the output raster with ArcGIS. For example, I do not know
> 
>         # how to get GDAL to build an ArcGIS-compatible histogram.
> 
>         # Without the histogram ArcGIS defaults to displaying integer
> 
>         # rasters using a black-to-white stretch rather than a unique
> 
>         # value classifier with random colors. ArcGIS users will
> 
>         # expect colors; to get the necessary histogram, we have to
> 
>         # calculate statistics with the geoprocessor.
> 
>  
> 
> I also recall there being some other differences, possibly with floating
> point files, too. I'm sorry I did not take better notes.
> 
>  
> 
> I found the whole thing a bit bizarre because I thought that ArcGIS 9.3.1
> used GDAL internally to manipulate HFA files. But maybe not in all
> circumstances. And 9.3.1 has an ESRI-customized version of GDAL 1.4, so it
> is not like they are running the latest GDAL code.
> 
>  
> 
> Anyway, hope this helps,
> 
>  
> 
> Jason
> 
>  
> 
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Matt Hanneman
> Sent: Wednesday, October 20, 2010 4:51 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] gdal_merge: stacking and band statistics
> 
>  
> 
> Hi,
> 
> Can anyone help a newbie? I have been trying to calculate statistics with
> gdal_merge when merging/stacking several tiffs together into a HFA format
> (see below for syntax). However, when loaded into ArcGIS it reports that
> there are no statistics calculated for any of the bands. Will the
> 'STATISTICS' option not work when stacking multiple bands? As you can
> probably tell I am fairly new to this, so forgive my ignorance.
> 
> gdal_merge -co STATISTICS=YES -v -o "E:/Temp/A2E.img" -of HFA -separate
> "A.TIF" "B.TIF" "C.TIF" "D.TIF" "E.TIF" "F.TIF"
> 
> Thanks,
> 
> Matt 
> 
>  
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
----------------------------------------------------------------------------
----
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------
----

From jukka.rahkonen at mmmtike.fi  Thu Oct 21 09:05:50 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Oct 21 09:06:03 2010
Subject: [gdal-dev] Can overviews be fiddled?
Message-ID: <loom.20101021T143327-899@post.gmane.org>

Hi,

My colleague wants to know if it is possible to build a bigtiff image that gets
overviews from different datasets. The aim is to have a one scale dependent
rastes map image. Idea is quite attractive but is is possible to do?

The procedure might start from a bunch of external .ovr files

bigtiff_1 -> gdaladdo -ro 2 4    #for near zoom
bigtiff_2 -> gdaladdo -ro 8 16   #for far zoom
bigtiff_3 -> gdaladdo -ro 32 64  #for more far zoom 

If overviews bigtiff_1.ovr, bigtiff_2.ovr and bigtiff_3.ovr could be combined
and renamed as bigtiff_1.ovr we the result would be a bigtiff_1 image which
would look like bigtiff_2 and bigtiff_3 when zoomed out.

I can see problems if working with real world maps because the originals would
have different pixel sizes but is it possible even in theory to construct hand
made overviews?  It could be a pleasure to use a single image as a background
map in GDAL based GIS programs instead of playing with several scale dependent
layers.

-Jukka Rahkonen-

From ricardo.garcia.silva at gmail.com  Thu Oct 21 12:18:56 2010
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Thu Oct 21 12:19:18 2010
Subject: [gdal-dev] opening LRIT files
Message-ID: <AANLkTi=9wwgGFKmKEpVkuf7n_3fEgUWE6OX=F9QCFpNu@mail.gmail.com>

Hello all

I'd like to know if it is possible to open LRIT[1] files using GDAL.

The files I'm trying to open come from the GOES12 satellite. I
investigated the MSG[2] driver, which uses a XRIT decompressor
library, thinking I might be able to fool GDAL into opening my LRIT
files as if they were HRIT. I obtained the decompressor library from
EUMETSAT's website and compiled GDAL with the MSG driver (had to make
some changes to the source code, mainly correcting some includes).

Unfortunately, when trying to open my files with gdalinfo I get:

ERROR 1: The prologue of the data set could not be found at the
location specified:
/home/geo2/Dados_teste/GOES12/H-000-MSG1__-MSG1________-_________-PRO______-201002060000-__

gdalinfo failed - unable to open
'MSG(/home/geo2/Dados_teste/GOES12,201002060000,(1),Y,N,1,1)'.


The command I'm using is:

gdalinfo "MSG(/home/geo2/Dados_teste/GOES12,201002060000,(1),Y,N,1,1)"

Also, my files are named:
L-000-MSG2__-GOES12______-CHANNEL_075W-SEGMENT___-201002060000-__

So it is no wonder that GDAL complains to not being able to find the
files, since their filename doesn't have the same structure. Right now
I'm stumped, not knowing if I should just give up, or try tweaking my
filenames to match the expected format.

Has anyone had any success with such a task? Thanks

I've also looked at the ILWIS[3] software, which has a GEONETCAST
plugin that can indeed open my files. It seems to be using GDAL under
the hood, although I'm not sure. The problem is that it isn't
available for linux, which is a requirement for the task I am
handling.

[1] - http://noaasis.noaa.gov/LRIT/docs&links.html
[2] - http://www.gdal.org/frmt_msg.html
[3] - http://52north.org

-- 
___________________________ ___ __
Ricardo Garcia Silva
From even.rouault at mines-paris.org  Thu Oct 21 13:50:41 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 21 13:50:45 2010
Subject: [gdal-dev] Can overviews be fiddled?
In-Reply-To: <loom.20101021T143327-899@post.gmane.org>
References: <loom.20101021T143327-899@post.gmane.org>
Message-ID: <201010211950.41659.even.rouault@mines-paris.org>

Jukka,

Yes, I believe I have a workflow to do what you want.

Let that your full resolution be foo.tif
Put the first level of overview in foo.tif.ovr
The second level of overview in foo.tif.ovr.ovr
And so on

You can check with gdalinfo foo.tif that the overviews are
all taken into account.

If you use latest svn trunk version, you can use the new COPY_SRC_OVERVIEWS 
creation option to translate foo.tif and its existing overviews into a target 
GTiff
From even.rouault at mines-paris.org  Thu Oct 21 14:46:36 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 21 14:46:40 2010
Subject: [gdal-dev] Re: Testing Geospatial PDF support
In-Reply-To: <4CBE0584.6060706@geoanalytic.com>
References: <4CBDDF41.2080506@geoanalytic.com>
	<201010192045.25075.even.rouault@mines-paris.org>
	<4CBE0584.6060706@geoanalytic.com>
Message-ID: <201010212046.37013.even.rouault@mines-paris.org>

For those interested in this saga, with the help of Brent, the issue has been 
solved and is now fixed in trunk. This was an issue when dealing with multiple 
georeferencing bounding boxes in Adobe style encoding and/or when the bounding 
box doesn't cover the whole page area.

Le mardi 19 octobre 2010 22:54:28, Brent Fraser a ?crit :
>   Evan,
> 
> For the original PDF, gdalinfo shows:
> 
> Driver: PDF/Geospatial PDF
> Files: my.pdf
> Size is 7487, 5229
> Coordinate System is:
> PROJCS["WGS_1984_UTM_Zone_35N",
>      GEOGCS["GCS_WGS_1984",
>          DATUM["WGS_1984",
>              SPHEROID["WGS_1984",6378137.0,298.257223563]],
>          PRIMEM["Greenwich",0.0],
>          UNIT["Degree",0.0174532925199433]],
>      PROJECTION["Transverse_Mercator"],
>      PARAMETER["False_Easting",500000.0],
>      PARAMETER["False_Northing",0.0],
>      PARAMETER["Central_Meridian",27.0],
>      PARAMETER["Scale_Factor",0.9996],
>      PARAMETER["Latitude_Of_Origin",0.0],
>      UNIT["Meter",1.0]]
> GeoTransform =
>    208685.3477667082, 91.60344342730002, -9.686865691546485e-005
>    4840743.141406364, -0.0003005644555746527, -103.1065102766238
> Corner Coordinates:
> Upper Left  (  208685.348, 4840743.141) ( 23d23'13.21"E, 43d39'45.29"N)
> Lower Left  (  208684.841, 4301599.199) ( 23d38'41.63"E, 38d48'54.07"N)
> Upper Right (  894520.329, 4840740.891) ( 31d53'20.40"E, 43d36'54.07"N)
> Lower Right (  894519.822, 4301596.949) ( 31d32'26.52"E, 38d46'29.57"N)
> Center      (  551602.585, 4571170.045) ( 27d36'58.63"E, 41d17'25.18"N)
> Band 1 Block=7487x1 Type=Byte, ColorInterp=Red
> Band 2 Block=7487x1 Type=Byte, ColorInterp=Green
> Band 3 Block=7487x1 Type=Byte, ColorInterp=Blue
> 
> 
> and the resulting Geotiff is:
> 
> Driver: GTiff/GeoTIFF
> Files: my.tif
> Size is 7487, 5229
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 35N",
>      GEOGCS["WGS 84",
>          DATUM["WGS_1984",
>              SPHEROID["WGS 84",6378137,298.257223563,
>                  AUTHORITY["EPSG","7030"]],
>              AUTHORITY["EPSG","6326"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4326"]],
>      PROJECTION["Transverse_Mercator"],
>      PARAMETER["latitude_of_origin",0],
>      PARAMETER["central_meridian",27],
>      PARAMETER["scale_factor",0.9996],
>      PARAMETER["false_easting",500000],
>      PARAMETER["false_northing",0],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","32635"]]
> GeoTransform =
>    208685.3477667082, 91.60344342730002, -9.686865691546485e-005
>    4840743.141406364, -0.0003005644555746527, -103.1065102766238
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (  208685.348, 4840743.141) ( 23d23'13.21"E, 43d39'45.29"N)
> Lower Left  (  208684.841, 4301599.199) ( 23d38'41.63"E, 38d48'54.07"N)
> Upper Right (  894520.329, 4840740.891) ( 31d53'20.40"E, 43d36'54.07"N)
> Lower Right (  894519.822, 4301596.949) ( 31d32'26.52"E, 38d46'29.57"N)
> Center      (  551602.585, 4571170.045) ( 27d36'58.63"E, 41d17'25.18"N)
> Band 1 Block=7487x1 Type=Byte, ColorInterp=Red
> Band 2 Block=7487x1 Type=Byte, ColorInterp=Green
> Band 3 Block=7487x1 Type=Byte, ColorInterp=Blue
> 
> 
> 
> After gdalwarp:
> 
> Driver: GTiff/GeoTIFF
> Files: gdalwarp.tif
> Size is 7179, 5644
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 35N",
>      GEOGCS["WGS 84",
>          DATUM["WGS_1984",
>              SPHEROID["WGS 84",6378137,298.257223563,
>                  AUTHORITY["EPSG","7030"]],
>              AUTHORITY["EPSG","6326"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4326"]],
>      PROJECTION["Transverse_Mercator"],
>      PARAMETER["latitude_of_origin",0],
>      PARAMETER["central_meridian",27],
>      PARAMETER["scale_factor",0.9996],
>      PARAMETER["false_easting",500000],
>      PARAMETER["false_northing",0],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","32635"]]
> Origin = (208684.841232902890000,4840743.141386642100000)
> Pixel Size = (95.527649479168488,-95.527649479168488)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (  208684.841, 4840743.141) ( 23d23'13.19"E, 43d39'45.29"N)
> Lower Left  (  208684.841, 4301585.088) ( 23d38'41.65"E, 38d48'53.62"N)
> Upper Right (  894477.837, 4840743.141) ( 31d53'18.52"E, 43d36'54.23"N)
> Lower Right (  894477.837, 4301585.088) ( 31d32'24.76"E, 38d46'29.25"N)
> Center      (  551581.339, 4571164.115) ( 27d36'57.71"E, 41d17'24.99"N)
> Band 1 Block=7179x1 Type=Byte, ColorInterp=Red
> Band 2 Block=7179x1 Type=Byte, ColorInterp=Green
> Band 3 Block=7179x1 Type=Byte, ColorInterp=Blue
> 
> 
> Doing the math on a 1:75k map, at 150 dpi the pixel size should be about
> 12.7 meters.
> 
> Brent
> 
> On 10/19/2010 12:45 PM, Even Rouault wrote:
> > Brent,
> > 
> > I'm not sure what you find is wrong. What does gdalinfo returns ?
> > 
> > The PDF driver will reproject the coordinates of the GPTS array from
> > geographic into UTM 35N and try to build a geotransform matrix from that.
> > The matrix may have rotating terms, so you likely need to use gdalwarp
> > afterwards to make it look "straight". However I'm not 100% sure this is
> > the correct way to interpret the the Adobe style georeferencing, but I
> > didn't find a better one up to know. So if you or someone else have any
> > clue...
> > 
> > Most geospatial PDFs I've found in the wild (such as the one of cantopo)
> > seem to use the OGC Best Practice encoding.
> > 
> > Even
> > 
> > Le mardi 19 octobre 2010 20:11:13, Brent Fraser a ?crit :
> >>    Even,
> >>    
> >>     I've tested a couple of Geospatial PDFs with the code that's in GDAL
> >> 
> >> trunk.
> >> 
> >> The Canadian topos work well (e.g.
> >> ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/50k_geopdf/085/b/cantopo_085b14_
> >> geo pdf.zip). They were produced using ESRI ArcMap 9.2.6.1500.  I get a
> >> properly geo-referenced GeoTiff after running gdal_translate.
> >> 
> >>    I have another PDF produced by ArcMap10.0.0.2414.   It has a main map
> >> 
> >> and a keymap.  The strange thing is that even though the coordinate
> >> system is UTM Zone 35 , it has a transformation matrix with geographic
> >> 
> >> coordinates given.  Here's a portion of the "dump" file:
> >>    Item[4] : VP
> >>    
> >>     Type = array
> >>     
> >>      Item[0]:
> >>       Type = dictionary
> >>       
> >>        Item[0] : Name = ??I (string)
> >>        Item[1] : Measure
> >>        
> >>         Type = dictionary
> >>         
> >>          Item[0] : Subtype = GEO (name)
> >>          Item[1] : LPTS
> >>          
> >>           Type = array
> >>           
> >>            Item[0]: 0 (int)
> >>            Item[1]: 1 (int)
> >>            Item[2]: 0 (int)
> >>            Item[3]: 0 (int)
> >>            Item[4]: 1 (int)
> >>            Item[5]: 0 (int)
> >>            Item[6]: 1 (int)
> >>            Item[7]: 1 (int)
> >>          
> >>          Item[2] : GPTS
> >>          
> >>           Type = array
> >>           
> >>            Item[0]: 38.815000 (real)
> >>            Item[1]: 23.644900 (real)
> >>            Item[2]: 43.662600 (real)
> >>            Item[3]: 23.387000 (real)
> >>            Item[4]: 43.615000 (real)
> >>            Item[5]: 31.889000 (real)
> >>            Item[6]: 38.774900 (real)
> >>            Item[7]: 31.540700 (real)
> >>          
> >>          Item[3] : GCS
> >>          
> >>           Type = dictionary
> >>           
> >>            Item[0] : WKT =
> >> 
> >> PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",
> >> SPH
> >> EROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT
> >> ["De
> >> gree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER[
> >> "Fal
> >> se_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Centra
> >> l_Me
> >> ridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_O
> >> rigi n",0.0],UNIT["Meter",1.0]] (string)
> >> 
> >>            Item[1] : Type = PROJCS (name)
> >>          
> >>          Item[4] : Type = Measure (name)
> >>          Item[5] : Bounds
> >>          
> >>           Type = array
> >>           
> >>            Item[0]: 0 (int)
> >>            Item[1]: 1 (int)
> >>            Item[2]: 0 (int)
> >>            Item[3]: 0 (int)
> >>            Item[4]: 1 (int)
> >>            Item[5]: 0 (int)
> >>            Item[6]: 1 (int)
> >>            Item[7]: 1 (int)
> >>        
> >>        Item[2] : Type = Viewport (name)
> >>        Item[3] : BBox
> >>        
> >>         Type = array
> >>         
> >>          Item[0]: 3168 (int)
> >>          Item[1]: 2433 (int)
> >>          Item[2]: 3557 (int)
> >>          Item[3]: 2127 (int)
> >>      
> >>      Item[1]:
> >>       Type = dictionary
> >>       
> >>        Item[0] : Name = ??A (string)
> >>        Item[1] : Measure
> >>        
> >>         Type = dictionary
> >>         
> >>          Item[0] : Subtype = GEO (name)
> >>          Item[1] : LPTS
> >>          
> >>           Type = array
> >>           
> >>            Item[0]: 0 (int)
> >>            Item[1]: 1 (int)
> >>            Item[2]: 0 (int)
> >>            Item[3]: 0 (int)
> >>            Item[4]: 1 (int)
> >>            Item[5]: 0 (int)
> >>            Item[6]: 1 (int)
> >>            Item[7]: 1 (int)
> >>          
> >>          Item[2] : GPTS
> >>          
> >>           Type = array
> >>           
> >>            Item[0]: 40.190600 (real)
> >>            Item[1]: 26.279300 (real)
> >>            Item[2]: 40.767200 (real)
> >>            Item[3]: 26.273100 (real)
> >>            Item[4]: 40.769300 (real)
> >>            Item[5]: 27.212000 (real)
> >>            Item[6]: 40.192600 (real)
> >>            Item[7]: 27.210200 (real)
> >>          
> >>          Item[3] : GCS
> >>          
> >>           Type = dictionary
> >>           
> >>            Item[0] : WKT =
> >> 
> >> PROJCS["WGS_1984_UTM_Zone_35N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",
> >> SPH
> >> EROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT
> >> ["De
> >> gree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER[
> >> "Fal
> >> se_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Centra
> >> l_Me
> >> ridian",27.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_O
> >> rigi n",0.0],UNIT["Meter",1.0]] (string)
> >> 
> >>            Item[1] : Type = PROJCS (name)
> >>          
> >>          Item[4] : Type = Measure (name)
> >>          Item[5] : Bounds
> >>          
> >>           Type = array
> >>           
> >>            Item[0]: 0 (int)
> >>            Item[1]: 1 (int)
> >>            Item[2]: 0 (int)
> >>            Item[3]: 0 (int)
> >>            Item[4]: 1 (int)
> >>            Item[5]: 0 (int)
> >>            Item[6]: 1 (int)
> >>            Item[7]: 1 (int)
> >>        
> >>        Item[2] : Type = Viewport (name)
> >>        Item[3] : BBox
> >>        
> >>         Type = array
> >>         
> >>          Item[0]: 57 (int)
> >>          Item[1]: 2465 (int)
> >>          Item[2]: 3052 (int)
> >>          Item[3]: 46 (int)
> >> 
> >> ------------------------
> >> 
> >> The resulting GeoTiff has a scaling problem, I suspect related to the
> >> transformation matrix.
> >> 
> >> Any thoughts on that?
> >> 
> >> Thanks!
> >> Brent Fraser
From anders.moe at geocap.no  Thu Oct 21 16:50:25 2010
From: anders.moe at geocap.no (Anders Moe)
Date: Thu Oct 21 16:50:29 2010
Subject: [gdal-dev] OCI driver supports DeleteLayer but reports otherwise
Message-ID: <AANLkTimVcGcw6vTk4DmRn01YZmpYy4=QfyPpEqM=Zp5j@mail.gmail.com>

Hi everyone

Just did a

  svn checkout https://svn.osgeo.org/gdal/trunk/gdal gdal


The OGR/OCI driver seems to have a functional ::DeleteLayer but does not
report this as a capability. Therefore, it will not respond to

ogr2ogr   -overwrite

either. However the SQL command DELLAYER is understood, which in turn calls
::DeleteLayer.

I think the sqlite driver has a similar inconsistency.

Cheers,
Anders
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101021/97d8b237/attachment.html
From even.rouault at mines-paris.org  Thu Oct 21 17:05:02 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 21 17:05:05 2010
Subject: [gdal-dev] OCI driver supports DeleteLayer but reports otherwise
In-Reply-To: <AANLkTimVcGcw6vTk4DmRn01YZmpYy4=QfyPpEqM=Zp5j@mail.gmail.com>
References: <AANLkTimVcGcw6vTk4DmRn01YZmpYy4=QfyPpEqM=Zp5j@mail.gmail.com>
Message-ID: <201010212305.02797.even.rouault@mines-paris.org>

Le jeudi 21 octobre 2010 22:50:25, Anders Moe a ?crit :
> Hi everyone
> 
> Just did a
> 
>   svn checkout https://svn.osgeo.org/gdal/trunk/gdal gdal
> 
> 
> The OGR/OCI driver seems to have a functional ::DeleteLayer but does not
> report this as a capability. Therefore, it will not respond to
> 
> ogr2ogr   -overwrite
> 
> either. However the SQL command DELLAYER is understood, which in turn calls
> 
> ::DeleteLayer.

Perhaps you should open a ticket to track that.

> 
> I think the sqlite driver has a similar inconsistency.

It wasn't actually implementing the exact expected interface, but it was doing 
99% of the job, so I've just implemented the 1% missing.

> 
> Cheers,
> Anders
From EAdam at co.lincoln.or.us  Thu Oct 21 17:56:47 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Thu Oct 21 17:57:40 2010
Subject: [gdal-dev] PDF-->JPEG-->KML. Confused about association
	betweenKML bounding box and PDF's neatli
In-Reply-To: <AANLkTi=_t5EfzrGGTTxgWrmHxHh0rycP8nU=ceXhvN3J@mail.gmail.com>
References: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>
	<4CBEFA1B.6040407@geoanalytic.com>
	<AANLkTi=_t5EfzrGGTTxgWrmHxHh0rycP8nU=ceXhvN3J@mail.gmail.com>
Message-ID: <4CC054AE.4F75.00CE.0@co.lincoln.or.us>

Boris,

Did you try something like:

gdalwarp -t_srs "EPSG:4326" in.jpg out.jpg

or 

gdalwarp -t_srs 'EPSG:4326' in.jpg out.jpg


HTH, Eli

>>> Boris Dev <boris.dev@gmail.com> 10/20/2010 2:28 PM >>>
thanks..I am almost there...I think I am making a simple usage typo?

gdalwarp without the option '-t_srs EPSG:4326' works OK.

But it doesnt work with the command written exactly as you have it

>
> gdalwarp -t_srs EPSG:4326 in.jpg out.jpg
>
>
After that command, I do not get anything processed (it just outputs to the
screen the usage info).

I also had no luck with trying different variations of the -t_srs option
such as

gdalwarp -t_srs "+proj=EPSG:4326" in.jpg out.jpg

I am using the most recent SVN GDAL.



>  then use gdalinfo to get the corner coordinates.
>
> Currently the entire page of the PDF is rendered into the image.   Perhaps
> we can convince Even to add an option to convert only the mapped area (or
> mask everything else?)
>
> Best Regards,
> Brent Fraser
>
>
> On 10/20/2010 8:07 AM, Boris Dev wrote:
>
> My objective is to make a KML ground overlay with a geospatial PDF map.
>
> Using GDAL's translate utility I have converted the PDF to a JPEG. The next
> step and problem for me is to write the text of the KML ground overlay,
> which requires a text of bounding box information like this:
>
> <LatLonBox>
>         <north>37.91904192681665</north>
>         <south>37.46543388598137</south>
>         <east>15.35832653742206</east>
>         <west>14.60128369746704</west>
>
>
>         <rotation>-0.1556640799496235</rotation>
>       </LatLonBox>
>
>
> As GDAL's output, I saw that the entire PDF with legend, title, etc and not
> just the map image was converted.
>
> As GDAL's output, I also saw 2 parts of data that seem they are useful to
> match a bounding box to the map within the jpeg, but I cant figure out the
> puzzle of how to make this work? Can I get the bounding box of the entire
> PDF image with this information below?
>
> Corner Coordinates:
> Upper Left  (  666937.758, 2024687.983)
> Lower Left  (  666991.811, 2018338.153)
> Upper Right (  674511.276, 2024754.795)
> Lower Right (  674565.328, 2018404.965)
> Center      (  670751.543, 2021546.474)
>
> <MDI key="NEATLINE">POLYGON ((672676.488065659650601
> 2019417.955749646294862,672636.091432046378031
> 2024030.267778463661671,667347.405745737953112
> 2023983.612156898481771,667385.539170471020043
> 2019370.524140953086317,672676.488065659650601
> 2019417.955749646294862,672676.488065659650601
> 2019417.955749646294862,672676.488065659650601
> 2019417.955749646294862,672676.488065659650601
> 2019417.955749646294862))</MDI>
>
> I realize the coordinate above need to be converted to lat/long to be a KML
> ground overlay onto Google Maps, which I think I can handle.
>
> But I am unsure if I need to extract the map image from the jpeg using the
> NEATLINE?
> How are the Corner Coordinates translated into a bounding box?
>
> Any suggestions?
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev 
>
>

From matt at globalforestwatch.ca  Thu Oct 21 18:29:52 2010
From: matt at globalforestwatch.ca (Matt Hanneman)
Date: Thu Oct 21 18:29:51 2010
Subject: [gdal-dev] loading a patch
Message-ID: <4CC0BEE0.5020508@globalforestwatch.ca>

I noticed that gdal_translate and gdal_merge both cause the output image 
to be shifted by 1/2 a pixel SE. I assume this is how gdal handles the 
cell reference, but I am not sure.

Anyways, I found a potential patch here: 
https://trac.osgeo.org/gdal/ticket/2637
...but I have no idea how to apply a patch. Can someone tell me how I 
could implement this patch. Another worry is that this patch is for 
1.6.4 and I am using 1.7.1.

-- 

*Matt Hanneman*
Director of GISand Remote Sensing
Global Forest Watch Canada
10337 146 St, Edmonton, AB T5N 3A3
Tel: 780-422-5989 Fax: 780-454-5521
www.globalforestwatch.ca <http://www.globalforestwatch.ca/>

**

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101021/69f43800/attachment.html
From Luke.Pinner at environment.gov.au  Thu Oct 21 18:44:06 2010
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Thu Oct 21 18:44:10 2010
Subject: [gdal-dev] ogr.UseExceptions() doesn't raise an exception ona
	non-existant dataset [SEC=UNCLASSIFIED]
In-Reply-To: <4CBFD6D2.3010604@gmail.com>
References: <64102B2FB850C345B04D09C82018F45F056E4CB7@ACT01VEXCCL04.internal.govt>
	<4CBFD6D2.3010604@gmail.com>
Message-ID: <64102B2FB850C345B04D09C82018F45F056E4CBF@ACT01VEXCCL04.internal.govt>

No problem, I do check the returned data source object. I just thought
it inconsistent with GDAL. 

Thanks for the reply,
Luke

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ari Jolma
Sent: Thursday, 21 October 2010 5:00 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ogr.UseExceptions() doesn't raise an exception
ona non-existant dataset

On 10/21/2010 04:58 AM, Pinner, Luke wrote:
> OGR doesn't raise an exception on attempting to open a non-existant
> dataset even if ogr.UseExceptions() has been called, GDAL does though.
> Is this intentional or a bug?
>    

Luke,

It is a (bit annoying feature admittedly) feature. If none of the 
available drivers open a data source based on the passed string, then 
OGROpen returns a null and barks only to debug stream if one is open. 
The swig wrappers (you're using Python swig wrappers) does not test this

condition (no error but data source object null) and pass the null 
object up. So it is the app developer's responsibility to check for the 
returned data source object.

Best regards,

Ari

> GDAL version = 1.7.2
>
> from osgeo import gdal,ogr
> gdal.UseExceptions()
> ogr.UseExceptions()
>
> ds=ogr.Open('foo')
> #No exception raised by ogr
>
> ds=gdal.Open('foo')
> Traceback (most recent call last):
>    File "<interactive input>", line 1, in<module>
> RuntimeError: `foo' does not exist in the file system,
> and is not recognised as a supported dataset name.
>
> Regards
> Luke
>
> If you have received this transmission in error please notify us
immediately by return e-mail and delete all copies. If this e-mail or
any attachments have been sent to you in error, that error does not
constitute waiver of any confidentiality, privilege or copyright in
respect of information in the e-mail or attachments.
>
> Please consider the environment before printing this email.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.

Please consider the environment before printing this email.
From timg at boatinghowto.com  Fri Oct 22 02:20:29 2010
From: timg at boatinghowto.com (timg)
Date: Fri Oct 22 02:20:33 2010
Subject: [gdal-dev] OGR2OGR S57
Message-ID: <1287728429614-5661459.post@n2.nabble.com>


I am new to this so pardon me if I ask a stupid question.  I have
successfully used the ogr utility to convert an s57 ENC to kml format for
overlay on google earth.  So now I have a google earth layer with a
bazillion yellow pushpins...haha.  So My question...Is it possible to use
ogr to just pull out a specific layer from the s57 and make that layer a kml
file, and if so is it possible to pull out more than one layer at a time?

I looked at the ogr2ogr commands but can't figure out how to do this, if it
can be done would you please give me an example command to enter into the
shell.

my source file is master.000 and the kml file will be 099.kml

thank you
Tim


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR2OGR-S57-tp5661459p5661459.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From cfab13 at hotmail.fr  Fri Oct 22 09:00:06 2010
From: cfab13 at hotmail.fr (Tacot)
Date: Fri Oct 22 09:00:12 2010
Subject: [gdal-dev] Re: [gdal_retile]reshape ecw
In-Reply-To: <20101020172726.p559vl674ko48cgs@webmail.nvoe.at>
References: <1287583910754-5655048.post@n2.nabble.com>
	<1287587752671-5655301.post@n2.nabble.com>
	<20101020172726.p559vl674ko48cgs@webmail.nvoe.at>
Message-ID: <1287752406003-5662432.post@n2.nabble.com>


OK. So I try using this size for each tiles 128*128.
The treatment is very long.

So is it possible with GDALBUILDVRT, to translate virtualy the ECW in
another format; cut in several tiles; and then re-translate each tile in
ecw?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-retile-reshape-ecw-tp5655048p5662432.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Fri Oct 22 09:36:26 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct 22 09:36:32 2010
Subject: [gdal-dev] OGR2OGR S57
In-Reply-To: <1287728429614-5661459.post@n2.nabble.com>
References: <1287728429614-5661459.post@n2.nabble.com>
Message-ID: <4CC1935A.9080801@pobox.com>

timg wrote:
> I am new to this so pardon me if I ask a stupid question.  I have
> successfully used the ogr utility to convert an s57 ENC to kml format for
> overlay on google earth.  So now I have a google earth layer with a
> bazillion yellow pushpins...haha.  So My question...Is it possible to use
> ogr to just pull out a specific layer from the s57 and make that layer a kml
> file, and if so is it possible to pull out more than one layer at a time?
> 
> I looked at the ogr2ogr commands but can't figure out how to do this, if it
> can be done would you please give me an example command to enter into the
> shell.
> 
> my source file is master.000 and the kml file will be 099.kml

Tim,

It is possible to list the particular layers (by their object class name)
at the end of the ogr2ogr command.  If no layer names are provided then all
layers are translated.

So, for instance:

   ogr2ogr -f KML ~/099.kml master.000 ROADWY RUNWAY RIVERS

The ogr2ogr documentation is available at:

   http://www.gdal.org/ogr2ogr.html

though I must concede it has grown pretty complex.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From vivesraf at gmail.com  Fri Oct 22 11:07:04 2010
From: vivesraf at gmail.com (R.Vives)
Date: Fri Oct 22 11:07:06 2010
Subject: [gdal-dev] Can't open 'GLOBE' DEM tile
Message-ID: <1287760024075-5662863.post@n2.nabble.com>


Hi all,

I downloaded a 'GLOBE' DEM tile from the NOAA website
(http://www.ngdc.noaa.gov/mgg/topo/gltiles.html). After uncompression, I
renamed it with a .bin extension, and I downloaded the header file (.hdr).

My problem is: when I try to convert this file to GeoTiff, It seems not to
be recognized by gdal. I have the same result when I do 'gdalinfo' on it: 

============

C:\gdal_ogr>gdalinfo k10g.bin
ERROR 4: `k10g.bin' not recognised as a supported file format.

gdalinfo failed - unable to open 'k10g.bin'.

============

I checked the documentation, but I found nothing that could help me. How to
make this file recognized by gdal? 

Thanks.

Rafael_Vives
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Can-t-open-GLOBE-DEM-tile-tp5662863p5662863.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From christian.mueller at nvoe.at  Fri Oct 22 11:15:34 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Fri Oct 22 11:15:45 2010
Subject: [gdal-dev] Re: [gdal_retile]reshape ecw
In-Reply-To: <1287752406003-5662432.post@n2.nabble.com>
References: <1287583910754-5655048.post@n2.nabble.com>
	<1287587752671-5655301.post@n2.nabble.com>
	<20101020172726.p559vl674ko48cgs@webmail.nvoe.at>
	<1287752406003-5662432.post@n2.nabble.com>
Message-ID: <20101022171534.0ru7gee5cg0k0gk0@webmail.nvoe.at>

In my experience, 128x128 is too small. 256x256 or 512x512 are good choices.

I have no experience with GDALBUILDVRT, cannot assist here.



Quoting Tacot <cfab13@hotmail.fr>:

>
> OK. So I try using this size for each tiles 128*128.
> The treatment is very long.
>
> So is it possible with GDALBUILDVRT, to translate virtualy the ECW in
> another format; cut in several tiles; and then re-translate each tile in
> ecw?
> --
> View this message in context:   
> http://osgeo-org.1803224.n2.nabble.com/gdal-retile-reshape-ecw-tp5655048p5662432.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From srp at geo.ku.dk  Fri Oct 22 11:40:26 2010
From: srp at geo.ku.dk (Simon Proud)
Date: Fri Oct 22 11:40:28 2010
Subject: [gdal-dev] Transforming MSG Native data into reflectances
Message-ID: <1287762026103-5662990.post@n2.nabble.com>


Hi all,
I'm testing out GDAL for use with MSG data, and would like to convert data
from raw counts to reflectance/brightness temperatures.

I have succeeded in this with the HRIT data (by compiling GDAL with the
--with-msg option) but is it also possible to do this with the native format
(.nat)? I'm totally unfamiliar with the native format, so any advice would
be greatfully received!

Thanks.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Transforming-MSG-Native-data-into-reflectances-tp5662990p5662990.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tappenbeck at widemann.de  Fri Oct 22 12:14:24 2010
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Fri Oct 22 12:21:59 2010
Subject: [gdal-dev] problems to cut form large image
Message-ID: <4CC1B860.50001@widemann.de>


   hi !



i want to cut a part of a lage (7gb) tiff-image and use this command:

C:\Program Files (x86)\FWTools2.4.7>gdalwarp -r near -te 2608000 
55900100 2613104.5424 5582270.5709 -of GTiff -o F:\wt_3a.tif 
D:\weissenturm\streifen_3_GK2.tif

but i get following message:

Usage: gdalwarp [--help-general] [--formats]
      [-s_srs srs_def] [-t_srs srs_def] [-to "NAME=VALUE"]
      [-order n] [-tps] [-rpc] [-geoloc] [-et err_threshold]
      [-te xmin ymin xmax ymax] [-tr xres yres] [-ts width height]
      [-wo "NAME=VALUE"] [-ot Byte/Int16/...] [-wt Byte/Int16]
      [-srcnodata "value [value...]"] [-dstnodata "value [value...]"]
-dstalpha
      [-r resampling_method] [-wm memory_in_mb] [-multi] [-q]
      [-cutline datasource] [-cl layer] [-cwhere expression]
      [-csql statement] [-cblend dist_in_pixels]
      [-of format] [-co "NAME=VALUE"]*
      srcfile* dstfile

  Available resampling methods:
      near (default), bilinear, cubic, cubicspline, lanczos.

did anybody now anything about this message ??

regards Jan .-)

From boris.dev at gmail.com  Fri Oct 22 12:18:23 2010
From: boris.dev at gmail.com (Boris Dev)
Date: Fri Oct 22 12:22:01 2010
Subject: [gdal-dev] PDF-->JPEG-->KML. Confused about association
	betweenKML bounding box and PDF's neatli
In-Reply-To: <4CC054AE.4F75.00CE.0@co.lincoln.or.us>
References: <AANLkTimhcvjRK1RYZ4_HbUr74QeB3j5ZHMcpkEuDOojq@mail.gmail.com>
	<4CBEFA1B.6040407@geoanalytic.com>
	<AANLkTi=_t5EfzrGGTTxgWrmHxHh0rycP8nU=ceXhvN3J@mail.gmail.com>
	<4CC054AE.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <AANLkTikO5AosWyU-bU6VFiEUcJeJocxwUrc6QtMufoVp@mail.gmail.com>

Thanks -- but I believe the problem is I didnt install PROJ when installing
GDAL from SVN source

On Thu, Oct 21, 2010 at 5:56 PM, Eli Adam <EAdam@co.lincoln.or.us> wrote:

> Boris,
>
> Did you try something like:
>
> gdalwarp -t_srs "EPSG:4326" in.jpg out.jpg
>
> or
>
> gdalwarp -t_srs 'EPSG:4326' in.jpg out.jpg
>
>
> HTH, Eli
>
> >>> Boris Dev <boris.dev@gmail.com> 10/20/2010 2:28 PM >>>
> thanks..I am almost there...I think I am making a simple usage typo?
>
> gdalwarp without the option '-t_srs EPSG:4326' works OK.
>
> But it doesnt work with the command written exactly as you have it
>
> >
> > gdalwarp -t_srs EPSG:4326 in.jpg out.jpg
> >
> >
> After that command, I do not get anything processed (it just outputs to the
> screen the usage info).
>
> I also had no luck with trying different variations of the -t_srs option
> such as
>
> gdalwarp -t_srs "+proj=EPSG:4326" in.jpg out.jpg
>
> I am using the most recent SVN GDAL.
>
>
>
> >  then use gdalinfo to get the corner coordinates.
> >
> > Currently the entire page of the PDF is rendered into the image.
> Perhaps
> > we can convince Even to add an option to convert only the mapped area (or
> > mask everything else?)
> >
> > Best Regards,
> > Brent Fraser
> >
> >
> > On 10/20/2010 8:07 AM, Boris Dev wrote:
> >
> > My objective is to make a KML ground overlay with a geospatial PDF map.
> >
> > Using GDAL's translate utility I have converted the PDF to a JPEG. The
> next
> > step and problem for me is to write the text of the KML ground overlay,
> > which requires a text of bounding box information like this:
> >
> > <LatLonBox>
> >         <north>37.91904192681665</north>
> >         <south>37.46543388598137</south>
> >         <east>15.35832653742206</east>
> >         <west>14.60128369746704</west>
> >
> >
> >         <rotation>-0.1556640799496235</rotation>
> >       </LatLonBox>
> >
> >
> > As GDAL's output, I saw that the entire PDF with legend, title, etc and
> not
> > just the map image was converted.
> >
> > As GDAL's output, I also saw 2 parts of data that seem they are useful to
> > match a bounding box to the map within the jpeg, but I cant figure out
> the
> > puzzle of how to make this work? Can I get the bounding box of the entire
> > PDF image with this information below?
> >
> > Corner Coordinates:
> > Upper Left  (  666937.758, 2024687.983)
> > Lower Left  (  666991.811, 2018338.153)
> > Upper Right (  674511.276, 2024754.795)
> > Lower Right (  674565.328, 2018404.965)
> > Center      (  670751.543, 2021546.474)
> >
> > <MDI key="NEATLINE">POLYGON ((672676.488065659650601
> > 2019417.955749646294862,672636.091432046378031
> > 2024030.267778463661671,667347.405745737953112
> > 2023983.612156898481771,667385.539170471020043
> > 2019370.524140953086317,672676.488065659650601
> > 2019417.955749646294862,672676.488065659650601
> > 2019417.955749646294862,672676.488065659650601
> > 2019417.955749646294862,672676.488065659650601
> > 2019417.955749646294862))</MDI>
> >
> > I realize the coordinate above need to be converted to lat/long to be a
> KML
> > ground overlay onto Google Maps, which I think I can handle.
> >
> > But I am unsure if I need to extract the map image from the jpeg using
> the
> > NEATLINE?
> > How are the Corner Coordinates translated into a bounding box?
> >
> > Any suggestions?
> >
> >
> > _______________________________________________
> > gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://
> lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101022/4ef7e4cb/attachment.html
From peifer at gmx.eu  Fri Oct 22 13:21:00 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Oct 22 13:20:49 2010
Subject: [gdal-dev] Re: problems to cut form large image
In-Reply-To: <4CC1B860.50001@widemann.de>
References: <4CC1B860.50001@widemann.de>
Message-ID: <4CC1C7FC.1020609@gmx.eu>

On 22/10/2010 18:14, Jan Tappenbeck wrote:
>
> C:\Program Files (x86)\FWTools2.4.7>gdalwarp -r near -te 2608000
> 55900100 2613104.5424 5582270.5709 -of GTiff -o F:\wt_3a.tif
> D:\weissenturm\streifen_3_GK2.tif
>

  What do you expect -o to do?

BTW: -r near and -of GTiff can be dropped, as both are default options.

Hermann
From warmerdam at pobox.com  Fri Oct 22 13:30:38 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct 22 13:30:44 2010
Subject: [gdal-dev] problems to cut form large image
In-Reply-To: <4CC1B860.50001@widemann.de>
References: <4CC1B860.50001@widemann.de>
Message-ID: <4CC1CA3E.4010006@pobox.com>

Jan Tappenbeck wrote:
> 
>   hi !
> 
> 
> 
> i want to cut a part of a lage (7gb) tiff-image and use this command:
> 
> C:\Program Files (x86)\FWTools2.4.7>gdalwarp -r near -te 2608000 
> 55900100 2613104.5424 5582270.5709 -of GTiff -o F:\wt_3a.tif 
> D:\weissenturm\streifen_3_GK2.tif
> 
> but i get following message:
...
> did anybody now anything about this message ??

Jan,

The problem is the -o switch you use - there is no such switch.
Perhaps you mean to indicate the output file?  The gdalwarp command
normally ends with the input file, then the output file.

eg.

gdalwarp <various options> in.tif out.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pcreso at pcreso.com  Fri Oct 22 14:59:59 2010
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Fri Oct 22 15:06:41 2010
Subject: [gdal-dev] OGR2OGR S57
In-Reply-To: <1287728429614-5661459.post@n2.nabble.com>
Message-ID: <656790.22304.qm@web33206.mail.mud.yahoo.com>

Hi Tim,

S57 is a pretty complex format, so I suggest you look at an intermediate format that is supported by some sort of data management capability so you can work with it & select what is to converted to kml.

Postgis is the obvious one, or you could use shapefiles with ogr & something like QGIS to work with your dataset to select the features you are after.

ogr has limited selection/query capanbility, but I'm not sure how well supported this is for S57 data input.

HTH,

 Brent Wood


--- On Fri, 10/22/10, timg <timg@boatinghowto.com> wrote:

> From: timg <timg@boatinghowto.com>
> Subject: [gdal-dev] OGR2OGR S57
> To: gdal-dev@lists.osgeo.org
> Date: Friday, October 22, 2010, 7:20 PM
> 
> I am new to this so pardon me if I ask a stupid
> question.? I have
> successfully used the ogr utility to convert an s57 ENC to
> kml format for
> overlay on google earth.? So now I have a google earth
> layer with a
> bazillion yellow pushpins...haha.? So My question...Is
> it possible to use
> ogr to just pull out a specific layer from the s57 and make
> that layer a kml
> file, and if so is it possible to pull out more than one
> layer at a time?
> 
> I looked at the ogr2ogr commands but can't figure out how
> to do this, if it
> can be done would you please give me an example command to
> enter into the
> shell.
> 
> my source file is master.000 and the kml file will be
> 099.kml
> 
> thank you
> Tim
> 
> 
> -- 
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR2OGR-S57-tp5661459p5661459.html
> Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From even.rouault at mines-paris.org  Fri Oct 22 15:27:39 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 22 15:27:37 2010
Subject: [gdal-dev] Can't open 'GLOBE' DEM tile
In-Reply-To: <1287760024075-5662863.post@n2.nabble.com>
References: <1287760024075-5662863.post@n2.nabble.com>
Message-ID: <201010222127.39862.even.rouault@mines-paris.org>

I believe I tried recently and this worked. At which URL did you download the 
.hdr ?

Le vendredi 22 octobre 2010 17:07:04, R.Vives a ?crit :
> Hi all,
> 
> I downloaded a 'GLOBE' DEM tile from the NOAA website
> (http://www.ngdc.noaa.gov/mgg/topo/gltiles.html). After uncompression, I
> renamed it with a .bin extension, and I downloaded the header file (.hdr).
> 
> My problem is: when I try to convert this file to GeoTiff, It seems not to
> be recognized by gdal. I have the same result when I do 'gdalinfo' on it:
> 
> ============
> 
> C:\gdal_ogr>gdalinfo k10g.bin
> ERROR 4: `k10g.bin' not recognised as a supported file format.
> 
> gdalinfo failed - unable to open 'k10g.bin'.
> 
> ============
> 
> I checked the documentation, but I found nothing that could help me. How to
> make this file recognized by gdal?
> 
> Thanks.
> 
> Rafael_Vives
From vivesraf at gmail.com  Fri Oct 22 15:42:03 2010
From: vivesraf at gmail.com (R.Vives)
Date: Fri Oct 22 15:42:05 2010
Subject: [gdal-dev] Re: Can't open 'GLOBE' DEM tile
In-Reply-To: <201010222127.39862.even.rouault@mines-paris.org>
References: <1287760024075-5662863.post@n2.nabble.com>
	<201010222127.39862.even.rouault@mines-paris.org>
Message-ID: <1287776523505-5663887.post@n2.nabble.com>



Even Rouault wrote:
> 
>>I believe I tried recently and this worked. At which URL did you download
the 
>>.hdr ?
> 

Hello Even, 

thanks for your help. Here is the URL:

http://www.ngdc.noaa.gov/mgg/topo/DATATILES/elev/geovu/hdr/
http://www.ngdc.noaa.gov/mgg/topo/DATATILES/elev/geovu/hdr/ 

Regards

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Can-t-open-GLOBE-DEM-tile-tp5662863p5663887.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From woklist at kyngchaos.com  Fri Oct 22 15:50:59 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Oct 22 15:51:05 2010
Subject: [gdal-dev] GDAL rejecting Winkel Tripel projection
Message-ID: <D3AD4865-10A8-4637-A0CA-2A09F48834A2@kyngchaos.com>

Using gdalwarp and ogr2ogr with:

-t_srs '+proj=wintri'

I get:

Translating source or target SRS failed:
+proj=wintri

and:

Failed to process SRS definition: +proj=wintri

respectively.

Other proj-style SRS definitions work, but not wintri.  It works directly with the proj program.

Is GDAL blocking use of wintri, or not configured to use it?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.


From even.rouault at mines-paris.org  Fri Oct 22 16:07:12 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 22 16:07:10 2010
Subject: [gdal-dev] GDAL rejecting Winkel Tripel projection
In-Reply-To: <D3AD4865-10A8-4637-A0CA-2A09F48834A2@kyngchaos.com>
References: <D3AD4865-10A8-4637-A0CA-2A09F48834A2@kyngchaos.com>
Message-ID: <201010222207.12634.even.rouault@mines-paris.org>

apparently, the OGRSpatialReference object has currently no support for this 
projection.

Le vendredi 22 octobre 2010 21:50:59, William Kyngesburye a ?crit :
> Using gdalwarp and ogr2ogr with:
> 
> -t_srs '+proj=wintri'
> 
> I get:
> 
> Translating source or target SRS failed:
> +proj=wintri
> 
> and:
> 
> Failed to process SRS definition: +proj=wintri
> 
> respectively.
> 
> Other proj-style SRS definitions work, but not wintri.  It works directly
> with the proj program.
> 
> Is GDAL blocking use of wintri, or not configured to use it?
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> All generalizations are dangerous, even this one.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Fri Oct 22 16:12:45 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 22 16:12:43 2010
Subject: [gdal-dev] Re: Can't open 'GLOBE' DEM tile
In-Reply-To: <1287776523505-5663887.post@n2.nabble.com>
References: <1287760024075-5662863.post@n2.nabble.com>
	<201010222127.39862.even.rouault@mines-paris.org>
	<1287776523505-5663887.post@n2.nabble.com>
Message-ID: <201010222212.46030.even.rouault@mines-paris.org>

Ah ok, I don't know what this geovu software is, but its hdr files are not 
handled by GDAL.

Use those ones instead : 
http://www.ngdc.noaa.gov/mgg/topo/DATATILES/elev/esri/arcgis/

They will be handled by the Hdr/ESRI .hdr Labelled driver

Le vendredi 22 octobre 2010 21:42:03, R.Vives a ?crit :
> Even Rouault wrote:
> >>I believe I tried recently and this worked. At which URL did you download
> 
> the
> 
> >>.hdr ?
> 
> Hello Even,
> 
> thanks for your help. Here is the URL:
> 
> http://www.ngdc.noaa.gov/mgg/topo/DATATILES/elev/geovu/hdr/
> http://www.ngdc.noaa.gov/mgg/topo/DATATILES/elev/geovu/hdr/
> 
> Regards
From vivesraf at gmail.com  Fri Oct 22 16:34:35 2010
From: vivesraf at gmail.com (R.Vives)
Date: Fri Oct 22 16:34:37 2010
Subject: [gdal-dev] Re: Can't open 'GLOBE' DEM tile
In-Reply-To: <201010222212.46030.even.rouault@mines-paris.org>
References: <1287760024075-5662863.post@n2.nabble.com>
	<201010222127.39862.even.rouault@mines-paris.org>
	<1287776523505-5663887.post@n2.nabble.com>
	<201010222212.46030.even.rouault@mines-paris.org>
Message-ID: <1287779675869-5664069.post@n2.nabble.com>


All right, it works with those .hdr files. 

I didn't pay attention to the "Geovu Software". In fact I didn't realize
there was a specific header for each software. But now, my problem is
solved, Thank you.

Regards,

Rafael Vives
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Can-t-open-GLOBE-DEM-tile-tp5662863p5664069.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From woklist at kyngchaos.com  Fri Oct 22 16:50:54 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Oct 22 16:50:57 2010
Subject: [gdal-dev] GDAL rejecting Winkel Tripel projection
In-Reply-To: <201010222207.12634.even.rouault@mines-paris.org>
References: <D3AD4865-10A8-4637-A0CA-2A09F48834A2@kyngchaos.com>
	<201010222207.12634.even.rouault@mines-paris.org>
Message-ID: <B02E0815-C368-44D7-98E6-163DF8BE01DE@kyngchaos.com>

So, why?  Is it because it has no defined inverse projection?  I think aitoff is another such, and it's not handled by GDAL either.

I see a +wktext option mentioned in ogr_srs_proj4.cpp:importFromProj4(), but it doesn't help.  I guess importFromProj4() looks at the projection and rejects the proj4 string before +wktext is helpful.

If I could figure out a WKT definition, does GDAL restrict that?

Any other way I can get GDAL to use wintri?

On Oct 22, 2010, at 3:07 PM, Even Rouault wrote:

> apparently, the OGRSpatialReference object has currently no support for this 
> projection.
> 
> Le vendredi 22 octobre 2010 21:50:59, William Kyngesburye a ?crit :
>> Using gdalwarp and ogr2ogr with:
>> 
>> -t_srs '+proj=wintri'
>> 
>> I get:
>> 
>> Translating source or target SRS failed:
>> +proj=wintri
>> 
>> and:
>> 
>> Failed to process SRS definition: +proj=wintri
>> 
>> respectively.
>> 
>> Other proj-style SRS definitions work, but not wintri.  It works directly
>> with the proj program.
>> 
>> Is GDAL blocking use of wintri, or not configured to use it?
>> 
>> -----
>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>> 
>> All generalizations are dangerous, even this one.
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed robot?

[Marvin]  You think you have problems?  What are you supposed to do if you ARE a maniacally depressed robot?  No, don't try and answer, I'm 50,000 times more intelligent than you and even I don't know the answer...

- HitchHiker's Guide to the Galaxy


From even.rouault at mines-paris.org  Fri Oct 22 17:02:40 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 22 17:02:38 2010
Subject: [gdal-dev] GDAL rejecting Winkel Tripel projection
In-Reply-To: <628322F8-BF1A-4FC1-B94C-F2DE7C73085A@kyngchaos.com>
References: <D3AD4865-10A8-4637-A0CA-2A09F48834A2@kyngchaos.com>
	<201010222207.12634.even.rouault@mines-paris.org>
	<628322F8-BF1A-4FC1-B94C-F2DE7C73085A@kyngchaos.com>
Message-ID: <201010222302.40975.even.rouault@mines-paris.org>

Le vendredi 22 octobre 2010 22:48:43, William Kyngesburye a ?crit :
> So, why?  Is it because it has no defined inverse projection?  I think
> aitoff is another such, and it's not handled by GDAL either.

I don't know the reason. My guess is that perhaps beause nobody cared enough 
about that projection to add support for it ??

> 
> I see a +wktext option mentioned in ogr_srs_proj4.cpp:importFromProj4(),
> but it doesn't help.  I guess importFromProj4() looks at the projection
> and rejects the proj4 string before +wktext is helpful.

+wktext cannot help when OSR doesn't recognize the projection. It only helps 
to keep the extra options that OSR doesn't handle by itself.

> 
> If I could figure out a WKT definition, does GDAL restrict that?
> 
> Any other way I can get GDAL to use wintri?

You can write the WKT and add a EXTENSION['PROJ4','+proj=wintri ...'] node in 
it, so it is used when translating it into proj4.

> 
> On Oct 22, 2010, at 3:07 PM, Even Rouault wrote:
> > apparently, the OGRSpatialReference object has currently no support for
> > this projection.
> > 
> > Le vendredi 22 octobre 2010 21:50:59, William Kyngesburye a ?crit :
> >> Using gdalwarp and ogr2ogr with:
> >> 
> >> -t_srs '+proj=wintri'
> >> 
> >> I get:
> >> 
> >> Translating source or target SRS failed:
> >> +proj=wintri
> >> 
> >> and:
> >> 
> >> Failed to process SRS definition: +proj=wintri
> >> 
> >> respectively.
> >> 
> >> Other proj-style SRS definitions work, but not wintri.  It works
> >> directly with the proj program.
> >> 
> >> Is GDAL blocking use of wintri, or not configured to use it?
> >> 
> >> -----
> >> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> >> http://www.kyngchaos.com/
> >> 
> >> All generalizations are dangerous, even this one.
> >> 
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting,
> and all for things that the beasts of the jungle would not deign to
> possess - money to purchase the effeminate pleasures of weaklings.  And
> yet withal bound down by silly customs that make them slaves to their
> unhappy lot while firm in the belief that they be the lords of creation
> enjoying the only real pleasures of existence....
> 
> - the wisdom of Tarzan
From woklist at kyngchaos.com  Fri Oct 22 18:23:45 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Oct 22 18:23:48 2010
Subject: [gdal-dev] GDAL rejecting Winkel Tripel projection
In-Reply-To: <201010222302.40975.even.rouault@mines-paris.org>
References: <D3AD4865-10A8-4637-A0CA-2A09F48834A2@kyngchaos.com>
	<201010222207.12634.even.rouault@mines-paris.org>
	<628322F8-BF1A-4FC1-B94C-F2DE7C73085A@kyngchaos.com>
	<201010222302.40975.even.rouault@mines-paris.org>
Message-ID: <A8D5CAE4-2B7E-4E3B-A062-1FC521B9F1AB@kyngchaos.com>

On Oct 22, 2010, at 4:02 PM, Even Rouault wrote:

>> If I could figure out a WKT definition, does GDAL restrict that?
>> 
>> Any other way I can get GDAL to use wintri?
> 
> You can write the WKT and add a EXTENSION['PROJ4','+proj=wintri ...'] node in 
> it, so it is used when translating it into proj4.

I'll give it a try, thanks.

----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From even.rouault at mines-paris.org  Sat Oct 23 06:24:13 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct 23 06:24:07 2010
Subject: [gdal-dev] Re: GDAL GeoPDF support
In-Reply-To: <679777.31180.qm@web32907.mail.mud.yahoo.com>
References: <679777.31180.qm@web32907.mail.mud.yahoo.com>
Message-ID: <201010231224.13236.even.rouault@mines-paris.org>

Hi Robert,

> Hi Even,
> You are the lead for GeoPDF correct?

I wouldn't say that like that, but yes I wrote the driver.

> Thanks for putting this option within
> GDAL.  Great service.  I want to help and support more Datums, but I
> wanted to ask you what kind of work is required to do this. Can you give
> me a description of what needs to be done to add Projection support.  I am
> not sure yet why GDAL cannot understand my GeoPDF.

I don't see anything wrong in the output of gdalinfo. GDAL seems to understand 
correctly your PDF. The fact that the PROJCS description string is 'unnamed' 
isn't an issue. It just means that there is no particular name for a 
Transverse_Mercator projection on WGS84 datum with central_meridian = -99.5 
and latitude_of_origine != 0. When building back the WKT for the SRS of the 
PDF, the driver has logic to guess the PROJCS name for just a few of the most 
common SRS, like the UTM projections on WGS84 and a few others. The others 
will stay unnamed, but it shouldn't matter. By the way I couldn't find this 
projection in the EPSG dictionnary, so it has probably no name at all.

If you didn't see a warning like 'Unhandled (yet) value for Datum : XXXX. 
Defaulting to WGS84...' in the console, it means that the datum in the file was 
really WGS84, so at first sight, everything seems to be right.

> I know that the
> metadata embedded in the PDF file is all there.  I current have a GeoPDF
> map of mexico which has the following gdalinfo: Driver: PDF/Geospatial
> PDFFiles: c:\geopdf\mexico.pdfSize is 6372, 5072Coordinate System
> is:PROJCS["unnamed",    GEOGCS["WGS 84",        DATUM["WGS_1984",        
>    SPHEROID["WGS 84",6378137,298.257223563,              
>  AUTHORITY["EPSG","7030"]],            TOWGS84[0,0,0,0,0,0,0],          
>  AUTHORITY["EPSG","6326"]],        PRIMEM["Greenwich",0,          
>  AUTHORITY["EPSG","8901"]],        UNIT["degree",0.0174532925199433,      
>      AUTHORITY["EPSG","9108"]],        AUTHORITY["EPSG","4326"]],  
>  PROJECTION["Transverse_Mercator"],  
>  PARAMETER["latitude_of_origin",18.33333333333333],  
>  PARAMETER["central_meridian",-99.5],  
>  PARAMETER["scale_factor",0.9996],    PARAMETER["false_easting",0],  
>  PARAMETER["false_northing",0]]GeoTransform =  -139312.767126,
> 44.02043807999999, 0.14064624  221574.863831, 0.12083184,
> -44.05555728Metadata:  NEATLINE=POLYGON ((-136371.49610477735
> 218423.09941881828,137294.39917355074
> 219174.28580209854,138251.35443593346
> 2894.4713489619025,-136210.56288904281
> 1074.355416633829,-136637.11588929727
> 218155.67013899569,-136371.49610477735 218423.09941881828))Corner
> Coordinates:Upper Left  ( -139312.767,  221574.864)Lower Left  (
> -138599.409,   -1874.923)Upper Right (  141185.464,  222344.804)Lower
> Right (  141898.822,   -1104.982)Center      (    1293.027,
>  110234.941)Band 1 Block=6372x1 Type=Byte, ColorInterp=RedBand 2
> Block=6372x1 Type=Byte, ColorInterp=GreenBand 3 Block=6372x1 Type=Byte,
> ColorInterp=Blue
> 
> What would I need to do to add more support for Projection to get rid of
> "unnamed"?? Thanks,
> Robert
From even.rouault at mines-paris.org  Sat Oct 23 10:40:52 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Oct 23 10:41:01 2010
Subject: [gdal-dev] RFC 7 - Use VSILFILE for VSI*L Functions - Call for
	discussion
Message-ID: <201010231640.53077.even.rouault@mines-paris.org>

Folks,

I've decided to bring RFC 7 back to life :

   http://trac.osgeo.org/gdal/wiki/rfc7_vsilapi

I'd appreciate review and comment. I've a patch attached to ticket 
http://trac.osgeo.org/gdal/ticket/3799 for the implementation.

Best regards,

Even
From warmerdam at pobox.com  Sat Oct 23 11:38:11 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Oct 23 11:38:17 2010
Subject: [gdal-dev] RFC 7 - Use VSILFILE for VSI*L Functions - Call for
	discussion
In-Reply-To: <201010231640.53077.even.rouault@mines-paris.org>
References: <201010231640.53077.even.rouault@mines-paris.org>
Message-ID: <4CC30163.5090903@pobox.com>

Even Rouault wrote:
> Folks,
> 
> I've decided to bring RFC 7 back to life :
> 
>    http://trac.osgeo.org/gdal/wiki/rfc7_vsilapi
> 
> I'd appreciate review and comment. I've a patch attached to ticket 
> http://trac.osgeo.org/gdal/ticket/3799 for the implementation.

Even,

I am supportive, and will take responsibility for testing the JPIPKAK
driver.  If/when the changes are in place, I will also review the impact,
if any, on MapServer which makes some use of VSI*L facilities.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From orcima at magic.fr  Mon Oct 25 03:03:17 2010
From: orcima at magic.fr (orcima)
Date: Mon Oct 25 03:03:21 2010
Subject: [gdal-dev] dgndirect dans gdal
Message-ID: <1287990197121-5669571.post@n2.nabble.com>


Hello,

I do not understand why dgnDirect being integrated into Teigha it is not yet
in ogr2ogr to convert V8 DGN files

Can you tell me when that is done?


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/dgndirect-dans-gdal-tp5669571p5669571.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From orcima at magic.fr  Mon Oct 25 04:02:48 2010
From: orcima at magic.fr (orcima)
Date: Mon Oct 25 04:02:51 2010
Subject: [gdal-dev] Re: dgndirect dans gdal
In-Reply-To: <1287990197121-5669571.post@n2.nabble.com>
References: <1287990197121-5669571.post@n2.nabble.com>
Message-ID: <1287993768491-5669760.post@n2.nabble.com>


Ha but of course there is a monopoly 
http://www.autodwg.com/dgn-to-dwg/buynow.htm  AutoDWG DGN   $ 295 ! !


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/dgndirect-dans-gdal-tp5669571p5669760.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Mon Oct 25 05:04:23 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Oct 25 05:04:25 2010
Subject: [gdal-dev] About new GDAL/OGR drivers
In-Reply-To: <201009062027.22693.even.rouault@mines-paris.org>
References: <201009062027.22693.even.rouault@mines-paris.org>
Message-ID: <AANLkTik7+iWatYLW5aunUW51U48zHkkU5PtrepgGA8vh@mail.gmail.com>

Hi All,

FYI: I've added the required dependencies for the OpenJPEG and GeoPDF
drivers to all the development packages available at:
http://vbkto.dyndns.org/sdk/ so all the new drivers mentioned below can now
be tested against the recent GDAL SVN daily builds.
If you encounter any issues feel free to provide a feedback.


Best regards,

Tamas




2010/9/6 Even Rouault <even.rouault@mines-paris.org>

> Hi all,
>
> I've neglected to mention a few of the GDAL/OGR drivers that I have
> recently
> added into trunk since 1.7 release. For those that like doing early testing
> and write useful bug reports so that those new drivers are in shape for the
> 1.8.0 release, here's a summary :
>
> GDAL drivers :
> * HF2/HFZ ( http://gdal.org/frmt_hf2.html ) : heightfield raster datasets
> that
> can be compressed. Read/write support.
> * JP2OpenJPEG ( http://gdal.org/frmt_jp2openjpeg.html ) : another (the
> 5th!)
> JPEG2000 driver, based on the open-source OpenJpeg library (BSD-licenced).
> More potential than Jasper with big images, but depends on an (yet)
> unreleased
> development branch of OpenJpeg. Read/write support.
> * XYZ ( http://gdal.org/frmt_xyz.html ) : to access simple gridded ASCII
> files.
> Read/write support.
> * GeoPDF ( http://gdal.org/frmt_geopdf.html ) : to extract both
> georeferencing
> and rasterize PDF documents, that have georeferencing encoded in either of
> the
> 2 current existing ways : the OGC GeoPDF encoding best practice (promoted
> by
> TerraGo), or according to the Adobe Supplement to ISO 32000. Read-only,
> based
> on poppler library (GPL-licenced)
>
> OGR drivers :
> * GPSBabel ( http://gdal.org/ogr/drv_gpsbabel.html ) : leverages the
> capabilities of the GPSBabel utility (GPL-licenced) to read/write many GPS
> file
> formats.
> * OpenAir ( http://gdal.org/ogr/drv_openair.html ) and SUA (
> http://gdal.org/ogr/drv_sua.html ) : 2 fairly equivalent and
> special-purpose
> drivers to read text files describing Special Use Airspaces.
> * PDS ( http://gdal.org/ogr/drv_pds.html ) : another fairly specialized
> driver
> to extract tabular information from NASA PDS  (Planetary Data Systems)
> files
> * PGDump ( http://gdal.org/ogr/drv_pgdump.html ) : I believe I alrealdy
> mentionned that one. A write-only driver to generate SQL dump files that
> can be
> later injected into a live PostgreSQL instance. More or less similar to
> PostGIS shp2pgsql utility
> * WFS ( http://gdal.org/ogr/drv_wfs.html ) : a WFS/WFS-T client that can
> read
> and write OGC WFS 1.0.0 and 1.1.0 services.
>
> The GML driver was also significantly upgraded, in particular to support
> more
> GML3 geometries, more complex documents with non-flat structures and
> various
> tweaks that help reading some GML application schemas (CityGML, AIXM)
> etc...
> For more details about that... and the work done by all the others GDAL
> contributors, you can have a look at the preliminary NEWS :
> http://trac.osgeo.org/gdal/browser/trunk/gdal/NEWS
>
> How testing those new stuff ?
> - Unix/Linux users : checkout GDAL svn trunk (or daily snapshot from
> http://gdal.org/daily/ ), configure, make, make install ;-)
> - Windows users : build from source, or use for example Tamas Szekeres'
> daily
> builds at http://vbkto.dyndns.org/sdk/  (Note that those builds don't
> currently include JP2OpenJPEG and GeoPDF due to the external dependencies).
> I
> believe that gdal-dev in osgeo4w has also been recently updated with a
> 1.8.0dev snapshot.
>
> Have fun,
>
> Even
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101025/9b29bb8a/attachment.html
From bontepaarden at gmail.com  Mon Oct 25 05:17:01 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon Oct 25 05:17:22 2010
Subject: [gdal-dev] warp, translate and world files
Message-ID: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>

Hi list,

I've got several png files with worldfiles.
I need them in another projection (28992 --> 3785).
I'm using gdalwarp to reproject to a tiff file and then I use gdal_translate
to create a png file again.
My original png file is about 25 kB, the warped tiff is over 2MB and the
translated png file is over 80 kB.

The 80 kB file is workable. But I think I can get the same result using the
original png file but with a modified world file.
I did some tests and ended up with a world file that makes the png file load
in the correct location and with the correct width and height.
All I'm missing are the rotation values in the world file. I can see the
file needs to be rotated a bit, but can't figure out the algorithm behind
it.

Most likely I'm not the first person to do this so I'm asking if someone can
point me to the right direction.
Of course I did Google already.

Thanks,

Paul
The Netherlands (EPSG:28992)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101025/05e7cf9f/attachment.html
From warmerdam at pobox.com  Mon Oct 25 09:02:02 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 25 09:02:07 2010
Subject: [gdal-dev] dgndirect dans gdal
In-Reply-To: <1287990197121-5669571.post@n2.nabble.com>
References: <1287990197121-5669571.post@n2.nabble.com>
Message-ID: <4CC57FCA.9080608@pobox.com>

orcima wrote:
> Hello,
> 
> I do not understand why dgnDirect being integrated into Teigha it is not yet
> in ogr2ogr to convert V8 DGN files
> 
> Can you tell me when that is done?

Orcima,

I believe the OGR DGNdirect based driver was deprecated a couple years ago
over code provenance issues and has been unmaintained for at least that time.
For me, it proved challenging to retain access to the dgndirect libraries
due to their somewhat proprietary licensing.  This also limited the interest
of others in use of the driver.

Currently there is no real approach to dgn v8 support in OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From zoltans at geograph.co.za  Mon Oct 25 09:09:17 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon Oct 25 09:09:24 2010
Subject: [gdal-dev] dgndirect dans gdal
In-Reply-To: <4CC57FCA.9080608@pobox.com>
References: <1287990197121-5669571.post@n2.nabble.com>
	<4CC57FCA.9080608@pobox.com>
Message-ID: <4CC5817D.9040102@geograph.co.za>

On 2010-10-25 15:02, Frank Warmerdam wrote:
>
>
> I believe the OGR DGNdirect based driver was deprecated a couple years 
> ago
> over code provenance issues and has been unmaintained for at least 
> that time.
> For me, it proved challenging to retain access to the dgndirect libraries
> due to their somewhat proprietary licensing.  This also limited the 
> interest
> of others in use of the driver.
>
> Currently there is no real approach to dgn v8 support in OGR.

Just so that silence is not interpreted as "no interest", I could use a 
simple ASCII Point & Linestring to DGN converter.....

Regards,
Z

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================



-----
No virus found in this message.
Checked by AVG - www.avg.com
Version: 10.0.1144 / Virus Database: 422/3217 - Release Date: 10/24/10

From warmerdam at pobox.com  Mon Oct 25 09:19:09 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 25 09:19:14 2010
Subject: [gdal-dev] dgndirect dans gdal
In-Reply-To: <4CC5817D.9040102@geograph.co.za>
References: <1287990197121-5669571.post@n2.nabble.com>
	<4CC57FCA.9080608@pobox.com> <4CC5817D.9040102@geograph.co.za>
Message-ID: <4CC583CD.1050100@pobox.com>

Zoltan Szecsei wrote:
> Just so that silence is not interpreted as "no interest", I could use a 
> simple ASCII Point & Linestring to DGN converter.....

Zoltan,

Modern version of microstation can still read pre-v8 DGN files, so why not
just produce old style DGN files which is stll supported?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Oct 25 10:16:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Oct 25 10:16:47 2010
Subject: [gdal-dev] Query regarding results from ExecuteSQL and the OCI
	driver - pre OGR 1.8.n
In-Reply-To: <4CBFF5D1.7020902@york.ac.uk>
References: <4CBFF5D1.7020902@york.ac.uk>
Message-ID: <4CC5914A.4010009@pobox.com>

Peter J Halls wrote:
> Dear Team,
> 
>     I'm waiting for 1.8 to be firmed up before upgrading to it, so this 
> relates to the old OCI driver.

Peter,

You are in luck.  This weekend I managed to install Oracle on my
ubuntu development system, so my interest level in matters oracle has
suddenly jumped substantially.

>     I'm puzzled.  In order to work around the possibility that a table 
> may not exist, and therefore require to be created, I attempted to use 
> ExecuteSQL through the OCI driver with the SQL expression
> "Select * from user_catalog where table_name like '<required table>'"
> 
>     The call returns a non-zero value, but when treating this as a 
> layerhandle and looking to check that the layer name is that requested I 
> find the results of  OGR_FD_GetName are the text of my original SQL 
> query.  Looking at the code in ogrocidatasource I can see no apparent 
> reason for this result.

What does it matter what the name of the layer is in this case?  It
is true that the OCI driver assigns the whole query as the layer name
of the query result but this should not normally cause any problem.

I checked a few other drivers and find that:

   shapefile: identifies the primary shapefile being processed and
              uses it's name for the sql query layer.

   postgis: uses the fixed text "sql_statement" as the layer name for
            the result.

>     Am I going about my query incorrectly?  Should I be expecting to 
> obtain a valid layer from this query or is a non-zero return value 
> adequate indication that the result of the query contains one or more 
> table names?

I believe you are getting back a perfectly ok query layer that
happens to have a somewhat esoteric, yet descriptive name.

BTW, I run a query like yours against my instance and get back reasonable
results:

ogrinfo OCI:warmerda/tiger@localhost \
-sql "select * from user_catalog where table_name like 'R%'" --debug off

INFO: Open of `OCI:warmerda/tiger@localhost'
       using driver `OCI' successful.

Layer name: select * from user_catalog where table_name like 'R%'
Geometry: Unknown (any)
Feature Count: 1
Layer SRS WKT:
(unknown)
TABLE_NAME: String (30.0)
TABLE_TYPE: String (11.0)
OGRFeature(select * from user_catalog where table_name like 'R%'):0
   TABLE_NAME (String) = ROAD
   TABLE_TYPE (String) = TABLE


Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From vaerabati at gmail.com  Mon Oct 25 15:43:40 2010
From: vaerabati at gmail.com (Vaish)
Date: Mon Oct 25 15:43:52 2010
Subject: [gdal-dev] How to generate tiles with multiple vrt's using GDAL
Message-ID: <loom.20101025T214241-844@post.gmane.org>

Hi,
  How can I generate tiles using multiple VRT'S without any tranparent gaps 
using gdal commands.

1. When I run the gdal2tiles command on the first VRT , it works well but when
I run gdal2tiles command on the second VRT and point to the same outfput
folder. The tiles are overwritten.

I do not want to merge files because it takes time . Need to do this for an
ongoing project. So everyday I can make VRT's and append to it.

Can anyone suggest a soloution to this?

Thanks,
Vaish

From vaerabati at gmail.com  Mon Oct 25 16:21:29 2010
From: vaerabati at gmail.com (Vaish)
Date: Mon Oct 25 16:21:39 2010
Subject: [gdal-dev] Re: How to generate tiles with multiple vrt's using GDAL
References: <loom.20101025T214241-844@post.gmane.org>
Message-ID: <loom.20101025T221939-472@post.gmane.org>

 
 Hi,
   How can I generate tiles using multiple VRT'S without any tranparent gaps 
 using gdal commands.
 
 1. When I run the gdal2tiles command on the first VRT , it works well but 
when I run gdal2tiles command on the second VRT and point to the same outfput
 folder. The tiles are overwritten.
 
 I do not want to merge files because it takes time . Need to do this for an
 ongoing project. So everyday I can make VRT's , generate tiles and append to 
 same output folder.
 
 Can anyone suggest a soloution to the above problem?
 
 Thanks,
 Vaish
 




From tosborn at sbcglobal.net  Mon Oct 25 17:53:50 2010
From: tosborn at sbcglobal.net (Tim Osborn)
Date: Mon Oct 25 17:53:52 2010
Subject: [gdal-dev] warp, translate and world files
In-Reply-To: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>
References: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>
Message-ID: <1288043630231-5672559.post@n2.nabble.com>


One thing you have to be mindful of is that the rotation parameters in world
files are so seldom used that some software doesn't even support them.  So
the the first thing you would need to check is whether your target software
supports rotation in a world file.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-warp-translate-and-world-files-tp5669942p5672559.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From frankhevans at yahoo.com  Mon Oct 25 18:45:52 2010
From: frankhevans at yahoo.com (turtlewax)
Date: Mon Oct 25 18:45:53 2010
Subject: [gdal-dev] NITF JPEG2000/Kakadu  vsisubfile/mechanism.
In-Reply-To: <4B4DF910.2020607@pobox.com>
References: <241B7A26A6184570B5A90C82F9823742@chapmanm64>
	<4B4DF910.2020607@pobox.com>
Message-ID: <1288046752225-5672725.post@n2.nabble.com>


>>I *think* it could be trivially extended to support JP2KAK with a case
>>similar to the one for JasPer with the filename encoded using the
>>/vsisubfile/ mechanism. 

Frank, I'm looking into this now. Partial success 

gdal_translate -of NITF -co IC=C8 foo.tif foo.ntf
Input file size is 5677, 2428
Warning 6: Driver JP2KAK does not support FORMAT creation option
0...10...20...30...40...50...60...70...80...90...100 - done.

Looking for guidance on this "vsisubfile" business. 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/NITF-JPEG2000-compression-and-Kakadu-tp4334019p5672725.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From frankhevans at yahoo.com  Tue Oct 26 09:23:54 2010
From: frankhevans at yahoo.com (turtlewax)
Date: Tue Oct 26 09:23:56 2010
Subject: [gdal-dev] Re: NITF JPEG2000/Kakadu  vsisubfile/mechanism.
In-Reply-To: <1288046752225-5672725.post@n2.nabble.com>
References: <241B7A26A6184570B5A90C82F9823742@chapmanm64>
	<4B4DF910.2020607@pobox.com>
	<1288046752225-5672725.post@n2.nabble.com>
Message-ID: <1288099434679-5674585.post@n2.nabble.com>


Need to make the "jp2kakdataset" recognize vsisubfile.  Guidance appreciated.

===================================================
gdal_translate -of NITF -co IC=C8 foo.tif foo.ntf
Input file size is 5677, 2428
ERROR 4: `/vsisubfile/933_41351268,foo.ntf' not recognised as a supported
file format.

ERROR 1: Unable to open JPEG2000 image within NITF file.
Is the JP2KAK driver available?
ERROR 1: Kakadu Core Error:
Code-stream must start with an SOC marker!
Warning 6: Driver JP2KAK does not support PROFILE creation option
Warning 6: Driver JP2KAK does not support CODESTREAM_ONLY creation option
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 1: Kakadu Core Error:
Code-stream must start with an SOC marker!
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/NITF-JPEG2000-compression-and-Kakadu-tp4334019p5674585.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From iwillig at gmail.com  Tue Oct 26 10:35:32 2010
From: iwillig at gmail.com (Ivan Willig)
Date: Tue Oct 26 10:35:34 2010
Subject: [gdal-dev] Issue with python bindings.
Message-ID: <AANLkTin78xUtqsdx=oZuTs1TaOqgpM3NynyEmdFsMgrF@mail.gmail.com>

Hi list,
I am having an issues with using the python swig based bindings. I am on
Fedora 13 using the default gdal rpm, which is at version 1.6.2. My issue is
when i stack method calls.  For example when I do the following:

ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp").GetLayer().GetFeature(0)

I get a Segmentation fault. Here are the results of strace
http://paste.pocoo.org/show/281682/. What am I doing wrong? Should I just
hand compile a new version of gdal? Or is this not an advised usage of the
python bindings? A limitation in swig? Thanks for your help.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101026/a47833f1/attachment.html
From warmerdam at pobox.com  Tue Oct 26 10:44:30 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 26 10:44:34 2010
Subject: [gdal-dev] Issue with python bindings.
In-Reply-To: <AANLkTin78xUtqsdx=oZuTs1TaOqgpM3NynyEmdFsMgrF@mail.gmail.com>
References: <AANLkTin78xUtqsdx=oZuTs1TaOqgpM3NynyEmdFsMgrF@mail.gmail.com>
Message-ID: <4CC6E94E.5030208@pobox.com>

Ivan Willig wrote:
> Hi list,
> I am having an issues with using the python swig based bindings. I am on 
> Fedora 13 using the default gdal rpm, which is at version 1.6.2. My 
> issue is when i stack method calls.  For example when I do the following: 
> 
> ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp").GetLayer().GetFeature(0)
> 
> 
> I get a Segmentation fault. Here are the results of strace 
> http://paste.pocoo.org/show/281682/. What am I doing wrong? Should I 
> just hand compile a new version of gdal? Or is this not an advised usage 
> of the python bindings? A limitation in swig? Thanks for your help.

Ivan,

I believe the problem is object lifetimes.  Keep a reference to the
datasource around until you are done with the feature(s).

ds = ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp")
feat = ds.GetLayer().GetFeature(0)
...
feat = None
ds = None

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From iwillig at gmail.com  Tue Oct 26 10:54:24 2010
From: iwillig at gmail.com (Ivan Willig)
Date: Tue Oct 26 10:54:27 2010
Subject: [gdal-dev] Issue with python bindings.
In-Reply-To: <4CC6E94E.5030208@pobox.com>
References: <AANLkTin78xUtqsdx=oZuTs1TaOqgpM3NynyEmdFsMgrF@mail.gmail.com>
	<4CC6E94E.5030208@pobox.com>
Message-ID: <AANLkTi=Ca-qJu=zadTwwfNvbdNsnN1S=QQFNhBZAbHfW@mail.gmail.com>

Thanks Frank. That seems to be the issue. Whats the rule about this how long
you should keep a reference. For example this causes the same issue.

ds.GetLayer().GetFeature(0).GetGeometryRef().GetEnvelope()

Which I am going to guess is because I should keep a reference to the
geometry. Correct?

Ivan Willig




On Tue, Oct 26, 2010 at 10:44 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Ivan Willig wrote:
>
>> Hi list,
>> I am having an issues with using the python swig based bindings. I am on
>> Fedora 13 using the default gdal rpm, which is at version 1.6.2. My issue is
>> when i stack method calls.  For example when I do the following:
>> ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp").GetLayer().GetFeature(0)
>>
>>
>> I get a Segmentation fault. Here are the results of strace
>> http://paste.pocoo.org/show/281682/. What am I doing wrong? Should I just
>> hand compile a new version of gdal? Or is this not an advised usage of the
>> python bindings? A limitation in swig? Thanks for your help.
>>
>
> Ivan,
>
> I believe the problem is object lifetimes.  Keep a reference to the
> datasource around until you are done with the feature(s).
>
> ds = ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp")
> feat = ds.GetLayer().GetFeature(0)
> ...
> feat = None
> ds = None
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101026/848efcbc/attachment-0001.html
From jason.roberts at duke.edu  Tue Oct 26 10:59:10 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Oct 26 10:59:16 2010
Subject: [gdal-dev] Issue with python bindings.
In-Reply-To: <AANLkTi=Ca-qJu=zadTwwfNvbdNsnN1S=QQFNhBZAbHfW@mail.gmail.com>
References: <AANLkTin78xUtqsdx=oZuTs1TaOqgpM3NynyEmdFsMgrF@mail.gmail.com>
	<4CC6E94E.5030208@pobox.com>
	<AANLkTi=Ca-qJu=zadTwwfNvbdNsnN1S=QQFNhBZAbHfW@mail.gmail.com>
Message-ID: <027401cb751e$5911ab70$0b350250$@roberts@duke.edu>

Ivan, Frank,

 

A month ago I started a gotchas page with Even Rouault that discusses this
issue: http://trac.osgeo.org/gdal/wiki/PythonGotchas. If you have a moment,
please consider adding your examples as other cases that cause the lifetime
problem. Also (Frank) if there is any general advice you wish to add, it
would be greatly appreciated.

 

Best,

Jason

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ivan Willig
Sent: Tuesday, October 26, 2010 10:54 AM
To: Frank Warmerdam
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Issue with python bindings.

 

Thanks Frank. That seems to be the issue. Whats the rule about this how long
you should keep a reference. For example this causes the same issue. 

 

ds.GetLayer().GetFeature(0).GetGeometryRef().GetEnvelope()

 

Which I am going to guess is because I should keep a reference to the
geometry. Correct? 




Ivan Willig






On Tue, Oct 26, 2010 at 10:44 AM, Frank Warmerdam <warmerdam@pobox.com>
wrote:

Ivan Willig wrote:

Hi list,
I am having an issues with using the python swig based bindings. I am on
Fedora 13 using the default gdal rpm, which is at version 1.6.2. My issue is
when i stack method calls.  For example when I do the following: 
ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp").GetLayer().GetFeature(0)


I get a Segmentation fault. Here are the results of strace
http://paste.pocoo.org/show/281682/. What am I doing wrong? Should I just
hand compile a new version of gdal? Or is this not an advised usage of the
python bindings? A limitation in swig? Thanks for your help.

 

Ivan,

I believe the problem is object lifetimes.  Keep a reference to the
datasource around until you are done with the feature(s).

ds = ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp")
feat = ds.GetLayer().GetFeature(0)
...
feat = None
ds = None

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101026/1436e3fc/attachment.html
From iwillig at gmail.com  Tue Oct 26 11:01:01 2010
From: iwillig at gmail.com (Ivan Willig)
Date: Tue Oct 26 11:01:05 2010
Subject: [gdal-dev] Issue with python bindings.
In-Reply-To: <-5483432428227790785@unknownmsgid>
References: <AANLkTin78xUtqsdx=oZuTs1TaOqgpM3NynyEmdFsMgrF@mail.gmail.com>
	<4CC6E94E.5030208@pobox.com>
	<AANLkTi=Ca-qJu=zadTwwfNvbdNsnN1S=QQFNhBZAbHfW@mail.gmail.com>
	<-5483432428227790785@unknownmsgid>
Message-ID: <AANLkTi=sg_w37Wn8UMpV=P4D0w1ktSCdNOeAc5jPTH3f@mail.gmail.com>

Thanks Jason,
I will add my examples when I get a chance.

Ivan Willig




On Tue, Oct 26, 2010 at 10:59 AM, Jason Roberts <jason.roberts@duke.edu>wrote:

>  Ivan, Frank,
>
>
>
> A month ago I started a gotchas page with Even Rouault that discusses this
> issue: http://trac.osgeo.org/gdal/wiki/PythonGotchas. If you have a
> moment, please consider adding your examples as other cases that cause the
> lifetime problem. Also (Frank) if there is any general advice you wish to
> add, it would be greatly appreciated.
>
>
>
> Best,
>
> Jason
>
>
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Ivan Willig
> *Sent:* Tuesday, October 26, 2010 10:54 AM
> *To:* Frank Warmerdam
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Issue with python bindings.
>
>
>
> Thanks Frank. That seems to be the issue. Whats the rule about this how
> long you should keep a reference. For example this causes the same issue.
>
>
>
> ds.GetLayer().GetFeature(0).GetGeometryRef().GetEnvelope()
>
>
>
> Which I am going to guess is because I should keep a reference to the
> geometry. Correct?
>
>
>  Ivan Willig
>
>
>
>
>  On Tue, Oct 26, 2010 at 10:44 AM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
>
> Ivan Willig wrote:
>
> Hi list,
> I am having an issues with using the python swig based bindings. I am on
> Fedora 13 using the default gdal rpm, which is at version 1.6.2. My issue is
> when i stack method calls.  For example when I do the following:
> ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp").GetLayer().GetFeature(0)
>
>
> I get a Segmentation fault. Here are the results of strace
> http://paste.pocoo.org/show/281682/. What am I doing wrong? Should I just
> hand compile a new version of gdal? Or is this not an advised usage of the
> python bindings? A limitation in swig? Thanks for your help.
>
>
>
> Ivan,
>
> I believe the problem is object lifetimes.  Keep a reference to the
> datasource around until you are done with the feature(s).
>
> ds = ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp")
> feat = ds.GetLayer().GetFeature(0)
> ...
> feat = None
> ds = None
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101026/edebfe3e/attachment.html
From sebastian.ovide at gmail.com  Tue Oct 26 11:56:38 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Tue Oct 26 11:57:00 2010
Subject: [gdal-dev] ogrinfo wildchar in the datasource?
Message-ID: <AANLkTimLyRE6Wa0+_BREn157GETBBoepnBtkGjOy8V+m@mail.gmail.com>

Hi All,

Is there anyway to make gdal read from multiple folders ? something like
ogrinfo mydata/* ? where mydata has a lot of subfolders and any of those
subfolders have shape files.

(I have some folders with tens of folders with shape files that I need to
display with to MapServer. Just wondering if I need to create a script or if
there is a shortcut...)

thanks


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101026/34dc1c6b/attachment.html
From peifer at gmx.eu  Tue Oct 26 12:01:41 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue Oct 26 12:01:41 2010
Subject: [gdal-dev] Re: warp, translate and world files
In-Reply-To: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>
References: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>
Message-ID: <4CC6FB65.7040204@gmx.eu>

On 25/10/2010 11:17, Paul Meems wrote:
> Hi list,
>
> I've got several png files with worldfiles.
> I need them in another projection (28992 --> 3785).
> I'm using gdalwarp to reproject to a tiff file and then I use
> gdal_translate to create a png file again.
> My original png file is about 25 kB, the warped tiff is over 2MB and the
> translated png file is over 80 kB.
>

I am not quite sure why you don't use -of png to save the creation of 
the intermediate tiff file. You might also be able to use -of byte which 
creates an 8 bit PNG (if this format is sufficient for your purpose).

The size difference 20k vs 80k could be due to the fact that the source 
file is PNG8 and the generated file is PNG24. There may be other 
reasons, though.

Hermann
From warmerdam at pobox.com  Tue Oct 26 12:25:31 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 26 12:25:38 2010
Subject: [gdal-dev] ogrinfo wildchar in the datasource?
In-Reply-To: <AANLkTimLyRE6Wa0+_BREn157GETBBoepnBtkGjOy8V+m@mail.gmail.com>
References: <AANLkTimLyRE6Wa0+_BREn157GETBBoepnBtkGjOy8V+m@mail.gmail.com>
Message-ID: <4CC700FB.7080707@pobox.com>

Sebastian E. Ovide wrote:
> 
> Hi All,
> 
> Is there anyway to make gdal read from multiple folders ? something like 
> ogrinfo mydata/* ? where mydata has a lot of subfolders and any of those 
> subfolders have shape files.
> 
> (I have some folders with tens of folders with shape files that I need 
> to display with to MapServer. Just wondering if I need to create a 
> script or if there is a shortcut...)

Sebastian,

This would have to be something supported by the shapefile driver in this
case, and it supports two configurations.  One where the datasource is a
file (one of .shp or.shx) in which case it provides one layer.  The other
configuration is where a directory is given as the datasource name in
which case it provides one layer per .shx/shp/dbf set in the directory.

There is no mechanism existing now to do what you want short of constructing
a complicated virtual file collecting several directory based shapefile
datasources.   This approach would not be helpful to you, I think.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sebastian.ovide at gmail.com  Tue Oct 26 12:35:52 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Tue Oct 26 12:36:16 2010
Subject: [gdal-dev] ogrinfo wildchar in the datasource?
In-Reply-To: <4CC700FB.7080707@pobox.com>
References: <AANLkTimLyRE6Wa0+_BREn157GETBBoepnBtkGjOy8V+m@mail.gmail.com>
	<4CC700FB.7080707@pobox.com>
Message-ID: <AANLkTimeiYinwkr44ns9hLsgfty4Czijcu30Li_wL7nN@mail.gmail.com>

...probably I will copy (or move) all the files under the same folder... I
do not like too much this approach... as I would prefer to maintain the
original directory hierarchy...  but it will make its job...

On Tue, Oct 26, 2010 at 5:25 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Sebastian E. Ovide wrote:
>
>>
>> Hi All,
>>
>> Is there anyway to make gdal read from multiple folders ? something like
>> ogrinfo mydata/* ? where mydata has a lot of subfolders and any of those
>> subfolders have shape files.
>>
>> (I have some folders with tens of folders with shape files that I need to
>> display with to MapServer. Just wondering if I need to create a script or if
>> there is a shortcut...)
>>
>
> Sebastian,
>
> This would have to be something supported by the shapefile driver in this
> case, and it supports two configurations.  One where the datasource is a
> file (one of .shp or.shx) in which case it provides one layer.  The other
> configuration is where a directory is given as the datasource name in
> which case it provides one layer per .shx/shp/dbf set in the directory.
>
> There is no mechanism existing now to do what you want short of
> constructing
> a complicated virtual file collecting several directory based shapefile
> datasources.   This approach would not be helpful to you, I think.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101026/5b24486d/attachment.html
From Bob.Moskovitz at conservation.ca.gov  Tue Oct 26 12:51:20 2010
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Tue Oct 26 12:51:34 2010
Subject: [gdal-dev] ogrinfo wildchar in the datasource?
In-Reply-To: <AANLkTimeiYinwkr44ns9hLsgfty4Czijcu30Li_wL7nN@mail.gmail.com>
References: <AANLkTimLyRE6Wa0+_BREn157GETBBoepnBtkGjOy8V+m@mail.gmail.com><4CC700FB.7080707@pobox.com>
	<AANLkTimeiYinwkr44ns9hLsgfty4Czijcu30Li_wL7nN@mail.gmail.com>
Message-ID: <A73B6E7A4503E948826CE81A65AF5FEC01E08148@docexs1.ad.consrv.ca.gov>

Sebastian,

 

Why not create a script to find all the files and pass it to ogrinfo.
For instance, if I wanted to run ogrinfo on all shapefiles in mydata,
you can do something like this little bash script:

 

for shapefile in `find mydata -name "*.shp"`

do

ogrinfo   -al  -so $shapefile

                done

 

Bob

 

 

Bob Moskovitz

Seismic Hazards Mapping Program

California Geological Survey

 

CONFIDENTIALITY NOTICE: This communication is intended only for the use
of the individual or entity to which it is addressed. This message
contains information from the State of California, California Geological
Survey, which may be privileged, confidential and exempt from disclosure
under applicable law, including the Electronic Communications Privacy
Act. If the reader of this communication is not the intended recipient,
you are hereby notified that any dissemination, distribution, or copying
of this communication is strictly prohibited.

 

 

 

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Sebastian E.
Ovide
Sent: Tuesday, October 26, 2010 9:36 AM
To: Frank Warmerdam
Cc: gdal-dev
Subject: Re: [gdal-dev] ogrinfo wildchar in the datasource?

 

...probably I will copy (or move) all the files under the same folder...
I do not like too much this approach... as I would prefer to maintain
the original directory hierarchy...  but it will make its job...

On Tue, Oct 26, 2010 at 5:25 PM, Frank Warmerdam <warmerdam@pobox.com>
wrote:

Sebastian E. Ovide wrote:


Hi All,

Is there anyway to make gdal read from multiple folders ? something like
ogrinfo mydata/* ? where mydata has a lot of subfolders and any of those
subfolders have shape files.

(I have some folders with tens of folders with shape files that I need
to display with to MapServer. Just wondering if I need to create a
script or if there is a shortcut...)

 

Sebastian,

This would have to be something supported by the shapefile driver in
this
case, and it supports two configurations.  One where the datasource is a
file (one of .shp or.shx) in which case it provides one layer.  The
other
configuration is where a directory is given as the datasource name in
which case it provides one layer per .shx/shp/dbf set in the directory.

There is no mechanism existing now to do what you want short of
constructing
a complicated virtual file collecting several directory based shapefile
datasources.   This approach would not be helpful to you, I think.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




-- 
Sebastian E. Ovide




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101026/8942a3b5/attachment.html
From warmerdam at pobox.com  Tue Oct 26 13:02:20 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 26 13:02:23 2010
Subject: [gdal-dev] Intent to Package GDAL/OGR 1.7.3  
Message-ID: <4CC7099C.5010105@pobox.com>

Folks,

I would like to package GDAL/OGR 1.7.3 in the near future.  Does anyone
have anything they see as critical for a 1.7.3 release?  If I don't hear
anything back, I hope to prepare a release candidate before the end of this
week.

To the best of my knowledge we don't have a formal release procedure for
point releases yet for GDAL, so I'll take the approach of initiating an
RC and then calling for a motion to adopt it after a bit of testing.

Hopefully soon we can get the 1.8.0 release train moving.  So please also
think about any significant changes that are needed before that can occur.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Oct 26 13:09:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct 26 13:08:48 2010
Subject: [gdal-dev] Motion: RFC 7 - Use VSILFILE for VSI*L Functions
Message-ID: <201010261909.05856.even.rouault@mines-paris.org>

Folks,

Motion: I move to adopt RFC 7: Use VSILFILE for VSI*L Functions.

   http://trac.osgeo.org/gdal/wiki/rfc7_vsilapi

Starting with my +1

Best regards,

Even
From John.C.Cartwright at noaa.gov  Tue Oct 26 12:19:44 2010
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Tue Oct 26 13:11:54 2010
Subject: [gdal-dev] problem with the OGR VRT example?
Message-ID: <4CC6FFA0.8010305@noaa.gov>

Hello All,

I was looking at the OGR VRT example on
http://www.gdal.org/ogr/drv_csv.html, and it doesn't seem to work -
complains that unrecognized driver.  Am I missing something?

Following example on http://www.gdal.org/ogr/drv_csv.html,

1) created a text file (test.csv) with the following:

Latitude,Longitude,Name
48.1,0.25,"First point"
49.2,1.1,"Second point"
47.5,0.75,"Third point"

2) created a text file (test.vrt) with the following:

<OGRVRTDataSource>
    <OGRVRTLayer name="test">
        <SrcDataSource>test.csv</SrcDataSource>
        <GeometryType>wkbPoint</GeometryType>
        <LayerSRS>WGS84</LayerSRS>
        <GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/>
    </OGRVRTLayer>
</OGRVRTDataSource>

3) tried "ogrinfo -ro -al test.vrt" and got:

FAILURE:
Unable to open datasource `test.vrt' with the following drivers.


This is GDAL 1.7.1 on linux.  My ultimate objective is that take a CSV
file whose first two fields are x,y and convert to a shapefile with the
remaining fields as attributes.

Thanks!

--john

From even.rouault at mines-paris.org  Tue Oct 26 13:24:28 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Oct 26 13:24:12 2010
Subject: [gdal-dev] problem with the OGR VRT example?
In-Reply-To: <4CC6FFA0.8010305@noaa.gov>
References: <4CC6FFA0.8010305@noaa.gov>
Message-ID: <201010261924.29018.even.rouault@mines-paris.org>

Works for me (tested with 1.7.2, but there's no reason 1.7.1 doesn't work). 
Check that <OGRVRTDataSource> is on the first line of the test.vrt file without 
any extra character (space, newline, etc...) before.

Le mardi 26 octobre 2010 18:19:44, John Cartwright a ?crit :
> Hello All,
> 
> I was looking at the OGR VRT example on
> http://www.gdal.org/ogr/drv_csv.html, and it doesn't seem to work -
> complains that unrecognized driver.  Am I missing something?
> 
> Following example on http://www.gdal.org/ogr/drv_csv.html,
> 
> 1) created a text file (test.csv) with the following:
> 
> Latitude,Longitude,Name
> 48.1,0.25,"First point"
> 49.2,1.1,"Second point"
> 47.5,0.75,"Third point"
> 
> 2) created a text file (test.vrt) with the following:
> 
> <OGRVRTDataSource>
>     <OGRVRTLayer name="test">
>         <SrcDataSource>test.csv</SrcDataSource>
>         <GeometryType>wkbPoint</GeometryType>
>         <LayerSRS>WGS84</LayerSRS>
>         <GeometryField encoding="PointFromColumns" x="Longitude"
> y="Latitude"/> </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> 3) tried "ogrinfo -ro -al test.vrt" and got:
> 
> FAILURE:
> Unable to open datasource `test.vrt' with the following drivers.
> 
> 
> This is GDAL 1.7.1 on linux.  My ultimate objective is that take a CSV
> file whose first two fields are x,y and convert to a shapefile with the
> remaining fields as attributes.
> 
> Thanks!
> 
> --john
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Tue Oct 26 13:35:08 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Oct 26 13:35:10 2010
Subject: [gdal-dev] Motion: RFC 7 - Use VSILFILE for VSI*L Functions
In-Reply-To: <201010261909.05856.even.rouault@mines-paris.org>
References: <201010261909.05856.even.rouault@mines-paris.org>
Message-ID: <4CC7114C.7020909@pobox.com>

Even Rouault wrote:
> Folks,
> 
> Motion: I move to adopt RFC 7: Use VSILFILE for VSI*L Functions.
> 
>    http://trac.osgeo.org/gdal/wiki/rfc7_vsilapi
> 
> Starting with my +1

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dmorissette at mapgears.com  Tue Oct 26 13:36:53 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Oct 26 13:36:55 2010
Subject: [gdal-dev] Motion: RFC 7 - Use VSILFILE for VSI*L Functions
In-Reply-To: <201010261909.05856.even.rouault@mines-paris.org>
References: <201010261909.05856.even.rouault@mines-paris.org>
Message-ID: <4CC711B5.1010300@mapgears.com>

Even Rouault wrote:
> Folks,
> 
> Motion: I move to adopt RFC 7: Use VSILFILE for VSI*L Functions.
> 
>    http://trac.osgeo.org/gdal/wiki/rfc7_vsilapi
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From George.Corrado at gd-ais.com  Tue Oct 26 13:30:55 2010
From: George.Corrado at gd-ais.com (Corrado, George P.)
Date: Tue Oct 26 13:46:05 2010
Subject: [gdal-dev] Intent to Package GDAL/OGR 1.7.3  
In-Reply-To: <4CC7099C.5010105@pobox.com>
References: <4CC7099C.5010105@pobox.com>
Message-ID: <E8ACED485A33194F9FDAC00F6DD724FD16E143AD6F@VAFF06-MABPRD01.ad.gd-ais.com>

Hello,

Maybe make one of the Java SWIG examples read in DTED and fetch an elevation from a point.

Thanks,
George

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, October 26, 2010 1:02 PM
To: gdal-dev
Subject: [gdal-dev] Intent to Package GDAL/OGR 1.7.3 

Folks,

I would like to package GDAL/OGR 1.7.3 in the near future.  Does anyone
have anything they see as critical for a 1.7.3 release?  If I don't hear
anything back, I hope to prepare a release candidate before the end of this
week.

To the best of my knowledge we don't have a formal release procedure for
point releases yet for GDAL, so I'll take the approach of initiating an
RC and then calling for a motion to adopt it after a bit of testing.

Hopefully soon we can get the 1.8.0 release train moving.  So please also
think about any significant changes that are needed before that can occur.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Tue Oct 26 14:00:13 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Oct 26 14:00:35 2010
Subject: [gdal-dev] Re: ogrinfo wildchar in the datasource?
References: <AANLkTimLyRE6Wa0+_BREn157GETBBoepnBtkGjOy8V+m@mail.gmail.com>
Message-ID: <loom.20101026T195952-74@post.gmane.org>

Sebastian E. Ovide <sebastian.ovide <at> gmail.com> writes:

> 
> 
> Hi All,
> Is there anyway to make gdal read from multiple folders ? something like
ogrinfo mydata/* ? where mydata has a lot of subfolders and any of those
subfolders have shape files.
> 
> 
> (I have some folders with tens of folders with shape files that I need to
display with to MapServer. Just wondering if I need to create a script or if
there is a shortcut...)

Hi,

I can't say about gdal but because you want it for Mapserver so just create an
ogrtileindex with write_absolute_paths options to index all your shapefiles from
their current directories. It may need a tiny little script or some manual work
to combine per directory tileindex shapefiles but it should not be very laborous.

-Jukka Rahkonen-




From szekerest at gmail.com  Tue Oct 26 14:37:43 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Oct 26 14:37:46 2010
Subject: [gdal-dev] Motion: RFC 7 - Use VSILFILE for VSI*L Functions
In-Reply-To: <201010261909.05856.even.rouault@mines-paris.org>
References: <201010261909.05856.even.rouault@mines-paris.org>
Message-ID: <AANLkTim13_YasukqOXbkTg0QL6SUyTig9LpdHsxUdMRQ@mail.gmail.com>

+1

Tamas



2010/10/26 Even Rouault <even.rouault@mines-paris.org>

> Folks,
>
> Motion: I move to adopt RFC 7: Use VSILFILE for VSI*L Functions.
>
>   http://trac.osgeo.org/gdal/wiki/rfc7_vsilapi
>
> Starting with my +1
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101026/79064810/attachment.html
From hobu.inc at gmail.com  Tue Oct 26 15:43:51 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Oct 26 15:43:59 2010
Subject: [gdal-dev] Motion: RFC 7 - Use VSILFILE for VSI*L Functions
In-Reply-To: <AANLkTim13_YasukqOXbkTg0QL6SUyTig9LpdHsxUdMRQ@mail.gmail.com>
References: <201010261909.05856.even.rouault@mines-paris.org>
	<AANLkTim13_YasukqOXbkTg0QL6SUyTig9LpdHsxUdMRQ@mail.gmail.com>
Message-ID: <5E0C6177-C745-40B2-9490-9DD57C74278E@gmail.com>

+1.   

+1 for making VSIL_STRICT_ENFORCE active when building debug.  We already do that for some stuff in the swig bindings with void pointers that compiler can't easily detect mixups of.

Howard

On Oct 26, 2010, at 1:37 PM, Tamas Szekeres wrote:

> +1
> 
> Tamas
> 
> 
> 
> 2010/10/26 Even Rouault <even.rouault@mines-paris.org>
> Folks,
> 
> Motion: I move to adopt RFC 7: Use VSILFILE for VSI*L Functions.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc7_vsilapi
> 
> Starting with my +1
> 
> Best regards,
> 
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From rush at winkey.org  Tue Oct 26 19:04:23 2010
From: rush at winkey.org (brian)
Date: Tue Oct 26 19:04:26 2010
Subject: [gdal-dev] new nearblack feature
Message-ID: <1288134263.17136.40.camel@winkey.org>

Hello everybody

A new switch has been added to nearblack, -setmask, nearblack will write
a mask band to mask out the nodata areas.

Brian

From schut at sarvision.nl  Wed Oct 27 04:12:44 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Oct 27 04:15:40 2010
Subject: [gdal-dev] Issue with python bindings.
In-Reply-To: <AANLkTi=Ca-qJu=zadTwwfNvbdNsnN1S=QQFNhBZAbHfW@mail.gmail.com>
References: <AANLkTin78xUtqsdx=oZuTs1TaOqgpM3NynyEmdFsMgrF@mail.gmail.com>	<4CC6E94E.5030208@pobox.com>
	<AANLkTi=Ca-qJu=zadTwwfNvbdNsnN1S=QQFNhBZAbHfW@mail.gmail.com>
Message-ID: <4CC7DEFC.9020902@sarvision.nl>

Ivan,

in my experience it is often enough to keep a ref to the dataset to 
avoid these segfaults. However, my experience is more with gdal (raster) 
than with ogr (vector), so ymmv, and some experimenting might be 
required. Just start with keeping a ds reference, if that doesn't work, 
go further up the chain and also keep a ref to the layer, and so on.

Vincent Schut.

On 10/26/2010 04:54 PM, Ivan Willig wrote:
> Thanks Frank. That seems to be the issue. Whats the rule about this 
> how long you should keep a reference. For example this causes the same 
> issue.
>
> ds.GetLayer().GetFeature(0).GetGeometryRef().GetEnvelope()
>
> Which I am going to guess is because I should keep a reference to the 
> geometry. Correct?
>
> Ivan Willig
>
>
>
>
> On Tue, Oct 26, 2010 at 10:44 AM, Frank Warmerdam <warmerdam@pobox.com 
> <mailto:warmerdam@pobox.com>> wrote:
>
>     Ivan Willig wrote:
>
>         Hi list,
>         I am having an issues with using the python swig based
>         bindings. I am on Fedora 13 using the default gdal rpm, which
>         is at version 1.6.2. My issue is when i stack method calls.
>          For example when I do the following:
>         ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp").GetLayer().GetFeature(0)
>
>
>         I get a Segmentation fault. Here are the results of strace
>         http://paste.pocoo.org/show/281682/. What am I doing wrong?
>         Should I just hand compile a new version of gdal? Or is this
>         not an advised usage of the python bindings? A limitation in
>         swig? Thanks for your help.
>
>
>     Ivan,
>
>     I believe the problem is object lifetimes.  Keep a reference to the
>     datasource around until you are done with the feature(s).
>
>     ds = ogr.Open("/home/ivan/dev/bigapps/data/nyco.shp")
>     feat = ds.GetLayer().GetFeature(0)
>     ...
>     feat = None
>     ds = None
>
>     Best regards,
>     -- 
>     ---------------------------------------+--------------------------------------
>     I set the clouds in motion - turn up   | Frank Warmerdam,
>     warmerdam@pobox.com <mailto:warmerdam@pobox.com>
>     light and sound - activate the windows |
>     http://pobox.com/~warmerdam <http://pobox.com/%7Ewarmerdam>
>     and watch the world go round - Rush    | Geospatial Programmer for
>     Rent
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101027/9390fded/attachment-0001.html
From bontepaarden at gmail.com  Wed Oct 27 04:32:37 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed Oct 27 04:33:00 2010
Subject: [gdal-dev] Re: warp, translate and world files
In-Reply-To: <4CC6FB65.7040204@gmx.eu>
References: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>
	<4CC6FB65.7040204@gmx.eu>
Message-ID: <AANLkTinLok+HJYfGF7No8UcmGd5F0hf6mhZjcu5fHyqQ@mail.gmail.com>

Hermann,

You're right the size difference is because of PNG8 or PNG24.

I'm now on the gdal_warp track again. But I can't produce a PNG file. When I
use -ot PNG I get this list of supported file formats:
  VRT: Virtual Raster
  GTiff: GeoTIFF
  NITF: National Imagery Transmission Format
  HFA: Erdas Imagine Images (.img)
  ELAS: ELAS
  MEM: In Memory Raster
  BMP: MS Windows Device Independent Bitmap
  PCIDSK: PCIDSK Database File
  ILWIS: ILWIS Raster Map
  SGI: SGI Image File Format 1.0
  Leveller: Leveller heightfield
  Terragen: Terragen heightfield
  ERS: ERMapper .ers Labelled
  JP2ECW: ERMapper JPEG2000
  RMF: Raster Matrix Format
  RST: Idrisi Raster A.1
  INGR: Intergraph Raster
  GSBG: Golden Software Binary Grid (.grd)
  PNM: Portable Pixmap Format (netpbm)
  ENVI: ENVI .hdr Labelled
  EHdr: ESRI .hdr Labelled
  PAux: PCI .aux Labelled
  MFF: Vexcel MFF Raster
  MFF2: Vexcel MFF2 (HKV) Raster
  BT: VTP .bt (Binary Terrain) 1.3 Format
  IDA: Image Data and Analysis
  ADRG: ARC Digitized Raster Graphics
  SAGA: SAGA GIS Binary Grid (.sdat)

Does this mean I haven't build my GDAL properly? If not can you give me a
hint on how to enable png support in the make files?

Thanks,

Paul


2010/10/26 Hermann Peifer <peifer@gmx.eu>

> On 25/10/2010 11:17, Paul Meems wrote:
>
>> Hi list,
>>
>> I've got several png files with worldfiles.
>> I need them in another projection (28992 --> 3785).
>> I'm using gdalwarp to reproject to a tiff file and then I use
>> gdal_translate to create a png file again.
>> My original png file is about 25 kB, the warped tiff is over 2MB and the
>> translated png file is over 80 kB.
>>
>>
> I am not quite sure why you don't use -of png to save the creation of the
> intermediate tiff file. You might also be able to use -of byte which creates
> an 8 bit PNG (if this format is sufficient for your purpose).
>
> The size difference 20k vs 80k could be due to the fact that the source
> file is PNG8 and the generated file is PNG24. There may be other reasons,
> though.
>
> Hermann
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101027/16847495/attachment.html
From jrepetto at free.fr  Wed Oct 27 05:18:01 2010
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Oct 27 05:25:07 2010
Subject: [gdal-dev] Re: warp, translate and world files
In-Reply-To: <AANLkTinLok+HJYfGF7No8UcmGd5F0hf6mhZjcu5fHyqQ@mail.gmail.com>
References: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>	<4CC6FB65.7040204@gmx.eu>
	<AANLkTinLok+HJYfGF7No8UcmGd5F0hf6mhZjcu5fHyqQ@mail.gmail.com>
Message-ID: <4CC7EE49.9090506@free.fr>

Le 27/10/2010 10:32, Paul Meems a ?crit :
>
> I'm now on the gdal_warp track again. But I can't produce a PNG file.
> When I use -ot PNG I get this list of supported file formats

Because the syntax is "-of ONG", not "-ot PNG".

Jean-Claude
From jrepetto at free.fr  Wed Oct 27 05:42:52 2010
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Oct 27 05:43:28 2010
Subject: [gdal-dev] Re: warp, translate and world files
In-Reply-To: <4CC7EE49.9090506@free.fr>
References: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>	<4CC6FB65.7040204@gmx.eu>	<AANLkTinLok+HJYfGF7No8UcmGd5F0hf6mhZjcu5fHyqQ@mail.gmail.com>
	<4CC7EE49.9090506@free.fr>
Message-ID: <4CC7F41C.9040902@free.fr>

Le 27/10/2010 11:18, Jean-Claude Repetto a ?crit :
> Le 27/10/2010 10:32, Paul Meems a ?crit :
>>
>> I'm now on the gdal_warp track again. But I can't produce a PNG file.
>> When I use -ot PNG I get this list of supported file formats
>
> Because the syntax is "-of ONG", not "-ot PNG".
>

"-of PNG" , of course !
From peifer at gmx.eu  Wed Oct 27 08:28:25 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Oct 27 08:30:17 2010
Subject: [gdal-dev] Re: warp, translate and world files
In-Reply-To: <4CC7F41C.9040902@free.fr>
References: <AANLkTi=+-LV9EmyiNNXcWF3CZTbejw2NeyCKX8Uk77+U@mail.gmail.com>	<4CC6FB65.7040204@gmx.eu>	<AANLkTinLok+HJYfGF7No8UcmGd5F0hf6mhZjcu5fHyqQ@mail.gmail.com>	<4CC7EE49.9090506@free.fr>
	<4CC7F41C.9040902@free.fr>
Message-ID: <4CC81AE9.9030506@gmx.eu>

On 27/10/2010 11:42, Jean-Claude Repetto wrote:
> Le 27/10/2010 11:18, Jean-Claude Repetto a ?crit :
>> Le 27/10/2010 10:32, Paul Meems a ?crit :
>>>
>>> I'm now on the gdal_warp track again. But I can't produce a PNG file.
>>> When I use -ot PNG I get this list of supported file formats
>>
>> Because the syntax is "-of ONG", not "-ot PNG".
>>
>
> "-of PNG" , of course !

Correct. Sorry, I introduced the error in a previous mail. One could 
save pressing the Shift key and use: -of png

Hermann
From matt.gregory at oregonstate.edu  Wed Oct 27 15:11:17 2010
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Oct 27 15:17:15 2010
Subject: [gdal-dev] ImportError with Python 2.6 and VS 2008
Message-ID: <1D673F86DDA00841A1216F04D1CE70D64264929589@EXCH2.nws.oregonstate.edu>

Hi all,

I apologize if this specific issue has been addressed before.  I've checked the listserve and didn't see anything right off.  I'm sure I'm doing something stupid ...

Previously, I had been compiling GDAL from trunk using VS2005 (VC8) and Python 2.5.  I've recently gone to Python 2.6 (32-bit) on a Windows 7 64-bit box and have tried to compile with VS 2008 (VC9) (also 32-bit).  Here are the steps I took:

* Updated from SVN
* Rebuilt Release version of gdal_svn using makegdal90.
* cd to "swig" and run "C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\vcvars32.bat"
* Ran "nmake /f makefile.vc python"
* cd to "swig\python" and ran "python setup.py install'

The C++ build seems to work fine and I get the expected outputs.  The Python install also seems to work correctly and puts the expected files into site-packages.  But I get this error message in Python:

>>> from osgeo import gdal
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python26\lib\site-packages\osgeo\__init__.py", line 21, in <module>
    _gdal = swig_import_helper()
  File "C:\Python26\lib\site-packages\osgeo\__init__.py", line 17, in swig_impor
t_helper
    _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: DLL load failed: The specified module could not be found.

I've gotten these issues before when I haven't matched the correct version of Python against Visual Studio, but I *think* I've avoided those problems here.  I did notice that 'makefile90.vcproj' is using MSVC_VER=1400 in the make tool command lines.  I tried switching these to MSVC_VER=1500 to no avail. 

Any help is greatly appreciated.

matt

From P.Halls at york.ac.uk  Thu Oct 28 04:56:33 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Oct 28 04:56:37 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
Message-ID: <4CC93AC1.4010301@york.ac.uk>

Dear Team,

     I've reviewed the change log for release 8 so far and do not think that 
this question is version specific.

     I'm coding to support an incremental process for loading a large spatial 
database from a set of distribution objects.  I have noted that my present 
approach results in the OGR_FID column values restarting at 1 for each append. 
This is clearly an error!  However, there does not appear to be a method for 
initialising the 'nextfidtowrite' value in the API.  What is the best strategy 
to adopt?

     So far as I can see, there appear to be two options.  One is to read every 
feature until there are no more to read: I'd rather not do that.  The other 
would involve opening the layer, reading the featurecount and then requesting 
the featurecount'th feature - featurecount'th + 1 should give an error.  Both 
methods should leave the current feature being the last existing feature, but is 
this sufficient to effectively initialise the value at which the next FID will 
start?

Thanks and best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From even.rouault at mines-paris.org  Thu Oct 28 06:09:46 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 06:09:55 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <4CC93AC1.4010301@york.ac.uk>
References: <4CC93AC1.4010301@york.ac.uk>
Message-ID: <1288260586.4cc94bea2cb16@webmail.free.fr>

Hi Peter,

Do you mean that just after issuing a CreateFeature(), the feature ID isn't set
to the correct value (the one that you'll find after dataset reopening) ?

You have to be more specific about which OGR driver you are talking about
because the mechanisms for setting/retrieving FID is driver specific.

Perhaps a small snippet of code would help to understand what you do / would
like to do.

If you're interested in the PG driver, here's a relevant ticket :
http://trac.osgeo.org/gdal/ticket/3744

Best regards,

Even

> Dear Team,
>
>      I've reviewed the change log for release 8 so far and do not think that
> this question is version specific.
>
>      I'm coding to support an incremental process for loading a large spatial
> database from a set of distribution objects.  I have noted that my present
> approach results in the OGR_FID column values restarting at 1 for each
> append.
> This is clearly an error!  However, there does not appear to be a method for
> initialising the 'nextfidtowrite' value in the API.  What is the best
> strategy
> to adopt?
>
>      So far as I can see, there appear to be two options.  One is to read
> every
> feature until there are no more to read: I'd rather not do that.  The other
> would involve opening the layer, reading the featurecount and then requesting
> the featurecount'th feature - featurecount'th + 1 should give an error.  Both
> methods should leave the current feature being the last existing feature, but
> is
> this sufficient to effectively initialise the value at which the next FID
> will
> start?
>
> Thanks and best wishes,
>
> Peter
>
>
--------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
> This message has the status of a private and personal communication
>
--------------------------------------------------------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From P.Halls at york.ac.uk  Thu Oct 28 06:21:00 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Oct 28 06:22:17 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <1288260586.4cc94bea2cb16@webmail.free.fr>
References: <4CC93AC1.4010301@york.ac.uk>
	<1288260586.4cc94bea2cb16@webmail.free.fr>
Message-ID: <4CC94E8C.6040500@york.ac.uk>

Even,

    thank you for your response.  I had missed feat.SetFID, mentioned in the PG 
ticket, so will have a go with that.

    For the record, I'm currently working against the OCI driver but wish to be 
reasonably independent of the underlying database implementation - hence use of OGR.

Thanks and best wishes,

Peter

Even Rouault wrote:
> Hi Peter,
> 
> Do you mean that just after issuing a CreateFeature(), the feature ID isn't set
> to the correct value (the one that you'll find after dataset reopening) ?
> 
> You have to be more specific about which OGR driver you are talking about
> because the mechanisms for setting/retrieving FID is driver specific.
> 
> Perhaps a small snippet of code would help to understand what you do / would
> like to do.
> 
> If you're interested in the PG driver, here's a relevant ticket :
> http://trac.osgeo.org/gdal/ticket/3744
> 
> Best regards,
> 
> Even
> 
>> Dear Team,
>>
>>      I've reviewed the change log for release 8 so far and do not think that
>> this question is version specific.
>>
>>      I'm coding to support an incremental process for loading a large spatial
>> database from a set of distribution objects.  I have noted that my present
>> approach results in the OGR_FID column values restarting at 1 for each
>> append.
>> This is clearly an error!  However, there does not appear to be a method for
>> initialising the 'nextfidtowrite' value in the API.  What is the best
>> strategy
>> to adopt?
>>
>>      So far as I can see, there appear to be two options.  One is to read
>> every
>> feature until there are no more to read: I'd rather not do that.  The other
>> would involve opening the layer, reading the featurecount and then requesting
>> the featurecount'th feature - featurecount'th + 1 should give an error.  Both
>> methods should leave the current feature being the last existing feature, but
>> is
>> this sufficient to effectively initialise the value at which the next FID
>> will
>> start?
>>
>> Thanks and best wishes,
>>
>> Peter
>>
>>
> --------------------------------------------------------------------------------
>> Peter J Halls, GIS Advisor, University of York
>> Telephone: 01904 323806     Fax: 01904 323740
>> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
>> This message has the status of a private and personal communication
>>
> --------------------------------------------------------------------------------
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From oyvind.idland at gmail.com  Thu Oct 28 06:51:18 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Thu Oct 28 06:51:20 2010
Subject: [gdal-dev] NoData vs metadata confusion
Message-ID: <AANLkTi=Ob1zdf8v4jmz0EgNReu-qwWufzdyinazsm_nS@mail.gmail.com>

Hello,

stumbled across a problem when reading MrSid:

The MrSid dataset contains 3 bands, R/G/B. None of the 3 bands gives me a
GetNoDataValue(),
however, the metadata contains IMAGE__NO_DATA_VALUE=255,255,255.

Does this mean, that I have to check for both cases ?

The version is GDAL 1.7.2.


Regards,


Oyvind Idland
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/9af58e6e/attachment.html
From chaitanya.ch at gmail.com  Thu Oct 28 07:09:34 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Oct 28 07:09:36 2010
Subject: [gdal-dev] NoData vs metadata confusion
In-Reply-To: <AANLkTi=Ob1zdf8v4jmz0EgNReu-qwWufzdyinazsm_nS@mail.gmail.com>
References: <AANLkTi=Ob1zdf8v4jmz0EgNReu-qwWufzdyinazsm_nS@mail.gmail.com>
Message-ID: <AANLkTimknaBDSrQC6uKn_ESwxbHidKRL00w8aMe8uU2r@mail.gmail.com>

Oyvind,

GDAL handles nodata values band by band, whereas in MrSID all the bands of
the particular pixel location must match the nodata values for that pixel to
be considered nodata.
Currently nodata values are ignored in this driver. I don't know if anything
is planned for future releases.

On Thu, Oct 28, 2010 at 4:21 PM, Oyvind Idland <oyvind.idland@gmail.com>wrote:

> Hello,
>
> stumbled across a problem when reading MrSid:
>
> The MrSid dataset contains 3 bands, R/G/B. None of the 3 bands gives me a
> GetNoDataValue(),
> however, the metadata contains IMAGE__NO_DATA_VALUE=255,255,255.
>
> Does this mean, that I have to check for both cases ?
>
> The version is GDAL 1.7.2.
>
>
> Regards,
>
>
> Oyvind Idland
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/ad2e02ec/attachment.html
From oyvind.idland at gmail.com  Thu Oct 28 07:18:59 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Thu Oct 28 07:19:02 2010
Subject: [gdal-dev] NoData vs metadata confusion
In-Reply-To: <AANLkTimknaBDSrQC6uKn_ESwxbHidKRL00w8aMe8uU2r@mail.gmail.com>
References: <AANLkTi=Ob1zdf8v4jmz0EgNReu-qwWufzdyinazsm_nS@mail.gmail.com>
	<AANLkTimknaBDSrQC6uKn_ESwxbHidKRL00w8aMe8uU2r@mail.gmail.com>
Message-ID: <AANLkTimzGS-H4eSHTeA3L1C3gpXkm7O8KiP8w_Zu7H+-@mail.gmail.com>

Thanks for fast reply !

I assume the IMAGE__NO_DATA_VALUE=255,255,255 comes from the MrSid SDK
library.

These values could easily be mapped to the GDAL-bands NoData, as they
practically means
the same ? (255 for each band)


-- Oyvind


On Thu, Oct 28, 2010 at 1:09 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Oyvind,
>
> GDAL handles nodata values band by band, whereas in MrSID all the bands of
> the particular pixel location must match the nodata values for that pixel to
> be considered nodata.
> Currently nodata values are ignored in this driver. I don't know if
> anything is planned for future releases.
>
> On Thu, Oct 28, 2010 at 4:21 PM, Oyvind Idland <oyvind.idland@gmail.com>wrote:
>
>> Hello,
>>
>> stumbled across a problem when reading MrSid:
>>
>> The MrSid dataset contains 3 bands, R/G/B. None of the 3 bands gives me a
>> GetNoDataValue(),
>> however, the metadata contains IMAGE__NO_DATA_VALUE=255,255,255.
>>
>> Does this mean, that I have to check for both cases ?
>>
>> The version is GDAL 1.7.2.
>>
>>
>> Regards,
>>
>>
>> Oyvind Idland
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/5915ccca/attachment-0001.html
From even.rouault at mines-paris.org  Thu Oct 28 08:01:26 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 08:10:17 2010
Subject: [gdal-dev] NoData vs metadata confusion
In-Reply-To: <AANLkTimzGS-H4eSHTeA3L1C3gpXkm7O8KiP8w_Zu7H+-@mail.gmail.com>
References: <AANLkTi=Ob1zdf8v4jmz0EgNReu-qwWufzdyinazsm_nS@mail.gmail.com>
	<AANLkTimknaBDSrQC6uKn_ESwxbHidKRL00w8aMe8uU2r@mail.gmail.com>
	<AANLkTimzGS-H4eSHTeA3L1C3gpXkm7O8KiP8w_Zu7H+-@mail.gmail.com>
Message-ID: <1288267286.4cc96616c3372@webmail.free.fr>

Oyvind,

The best abstraction to deal with a nodata triplet would be the NODATA_VALUES
metadata item at the dataset level described in
http://www.gdal.org/gdal_datamodel.html

You can do : gdal_translate your.sid your.tif -mo NODATA_VALUES="255 255 255"

Since a few GDAL releases this will results in an implicit mask band that will
only mark pixels where R=G=B=255 as transparent. However mask bands are not
honoured very much in GDAL. Unless you use latest trunk version where you could
do :

gdal_translate your.tif rgba.tif -b 1 -b 2 -b 3 -b mask -mo NODATA_VALUES=""

to make a RGBA image by translating the implicit mask band into a explicit alpha
channel.

> Thanks for fast reply !
>
> I assume the IMAGE__NO_DATA_VALUE=255,255,255 comes from the MrSid SDK
> library.
>
> These values could easily be mapped to the GDAL-bands NoData, as they
> practically means
> the same ? (255 for each band)
>
>
> -- Oyvind
>
>
> On Thu, Oct 28, 2010 at 1:09 PM, Chaitanya kumar CH
> <chaitanya.ch@gmail.com>wrote:
>
> > Oyvind,
> >
> > GDAL handles nodata values band by band, whereas in MrSID all the bands of
> > the particular pixel location must match the nodata values for that pixel
> to
> > be considered nodata.
> > Currently nodata values are ignored in this driver. I don't know if
> > anything is planned for future releases.
> >
> > On Thu, Oct 28, 2010 at 4:21 PM, Oyvind Idland
> <oyvind.idland@gmail.com>wrote:
> >
> >> Hello,
> >>
> >> stumbled across a problem when reading MrSid:
> >>
> >> The MrSid dataset contains 3 bands, R/G/B. None of the 3 bands gives me a
> >> GetNoDataValue(),
> >> however, the metadata contains IMAGE__NO_DATA_VALUE=255,255,255.
> >>
> >> Does this mean, that I have to check for both cases ?
> >>
> >> The version is GDAL 1.7.2.
> >>
> >>
> >> Regards,
> >>
> >>
> >> Oyvind Idland
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t??a??????nj??/ /k??m??r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
>


From P.Halls at york.ac.uk  Thu Oct 28 10:32:44 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Oct 28 10:32:49 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <1288260586.4cc94bea2cb16@webmail.free.fr>
References: <4CC93AC1.4010301@york.ac.uk>
	<1288260586.4cc94bea2cb16@webmail.free.fr>
Message-ID: <4CC9898C.3050204@york.ac.uk>

Even and team,

    following the hint from Even's post below, I have been experimenting with 
OGR_F_SetFID to get the FID for appends to increment beyond the existing value, 
rather than always to start at 1.  I'm testing against the OCI driver and am not 
(yet) using 1.8.

    I've found that there appears to be no way to 'reset' the starting FID value 
used by the driver for output.  I can certainly set the FID to an arbitrary 
value for a specific record, but the internal counter does not appear to be 
reset-able.  This means that I must manage the FID values externally to OGR when 
appending to an existing dataset in order to avoid new records being added with 
OGR_FID values restarting from 1.

    Is this what is expected / intended?

    The observed behaviour does not quite seem to be as one might expect - 
especially for the database drivers where the FID is to become the primary key 
and so must have unique values.  At present it would appear that this condition 
is broken when OGR is used to append.  Indeed, were I to create a table with a 
unique constraint on OGR_FID, appends would fail once there are records in the 
table.

    I've also tried reading the last record in the table and reading the table 
until there are no more records to read, but neither seem to have any impact on 
the initial FID value when writing.

    Is this a peculiarity of the OCI driver?

Thanks and best wishes,

Peter

Even Rouault wrote:
> Hi Peter,
> 
> Do you mean that just after issuing a CreateFeature(), the feature ID isn't set
> to the correct value (the one that you'll find after dataset reopening) ?
> 
> You have to be more specific about which OGR driver you are talking about
> because the mechanisms for setting/retrieving FID is driver specific.
> 
> Perhaps a small snippet of code would help to understand what you do / would
> like to do.
> 
> If you're interested in the PG driver, here's a relevant ticket :
> http://trac.osgeo.org/gdal/ticket/3744
> 
> Best regards,
> 
> Even
> 
>> Dear Team,
>>
>>      I've reviewed the change log for release 8 so far and do not think that
>> this question is version specific.
>>
>>      I'm coding to support an incremental process for loading a large spatial
>> database from a set of distribution objects.  I have noted that my present
>> approach results in the OGR_FID column values restarting at 1 for each
>> append.
>> This is clearly an error!  However, there does not appear to be a method for
>> initialising the 'nextfidtowrite' value in the API.  What is the best
>> strategy
>> to adopt?
>>
>>      So far as I can see, there appear to be two options.  One is to read
>> every
>> feature until there are no more to read: I'd rather not do that.  The other
>> would involve opening the layer, reading the featurecount and then requesting
>> the featurecount'th feature - featurecount'th + 1 should give an error.  Both
>> methods should leave the current feature being the last existing feature, but
>> is
>> this sufficient to effectively initialise the value at which the next FID
>> will
>> start?
>>
>> Thanks and best wishes,
>>
>> Peter
>>
>>
> --------------------------------------------------------------------------------
>> Peter J Halls, GIS Advisor, University of York
>> Telephone: 01904 323806     Fax: 01904 323740
>> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
>> This message has the status of a private and personal communication
>>
> --------------------------------------------------------------------------------
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From warmerdam at pobox.com  Thu Oct 28 11:02:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct 28 11:02:19 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <4CC9898C.3050204@york.ac.uk>
References: <4CC93AC1.4010301@york.ac.uk>
	<1288260586.4cc94bea2cb16@webmail.free.fr>
	<4CC9898C.3050204@york.ac.uk>
Message-ID: <4CC99075.4050100@pobox.com>

Peter J Halls wrote:
> Even and team,
> 
>    following the hint from Even's post below, I have been experimenting 
> with OGR_F_SetFID to get the FID for appends to increment beyond the 
> existing value, rather than always to start at 1.  I'm testing against 
> the OCI driver and am not (yet) using 1.8.
> 
>    I've found that there appears to be no way to 'reset' the starting 
> FID value used by the driver for output.  I can certainly set the FID to 
> an arbitrary value for a specific record, but the internal counter does 
> not appear to be reset-able.  This means that I must manage the FID 
> values externally to OGR when appending to an existing dataset in order 
> to avoid new records being added with OGR_FID values restarting from 1.
> 
>    Is this what is expected / intended?

Peter,

This is a flaw in the OCI driver.  FIDs are supposed to be unique, and
if the CreateFeature() method is assigning one, it should ensure it is
unique.

I have reviewed the trunk code, and this seems to be a problem with it too.

My feeling is that the first time iNextShapeId is used in the lifetime of
an OGROCITableLayer we ought to do a query on the corresponding column
to find it's max, and use that +1 as iNextShapeId.  This would generally
avoid conflicts, and would not be as expensive as querying for each
create feature.

The downside to this approach is that it assumes no one else is adding
features to the table during the lifetime of the OGROCITableLayer object.
This is usually safe, but not always.  This is one example of how the
OGR RDBMS drivers are often not *really* prepared to live cleanly in
a multi-user / multi-application environment.  It could be "done right"
but the cost for bulk loads might be quite painful.  Fast bulk loads
was the original reason for existence of the OCI driver.

If you would like to prepare code for that it would be great.  If not,
please create a ticket for the issue and hopefully I'll have a chance to
do it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From cfab13 at hotmail.fr  Thu Oct 28 11:05:02 2010
From: cfab13 at hotmail.fr (Tacot)
Date: Thu Oct 28 11:05:04 2010
Subject: [gdal-dev] [GDALBUILDVRT]Syntax to do tiles
Message-ID: <1288278302792-5682930.post@n2.nabble.com>


Hi

I would like to reshape a ECW pictures in several tiles.
Would it be possible to translate ECW in VRT; cut the VRT in tiles, and
re-translate all VRT in ECW?
And if it's possible, what are the syntax for those commands?

Thanks
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALBUILDVRT-Syntax-to-do-tiles-tp5682930p5682930.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From anders.moe at geocap.no  Thu Oct 28 11:08:03 2010
From: anders.moe at geocap.no (Anders Moe)
Date: Thu Oct 28 11:08:05 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <4CC99075.4050100@pobox.com>
References: <4CC93AC1.4010301@york.ac.uk>
	<1288260586.4cc94bea2cb16@webmail.free.fr>
	<4CC9898C.3050204@york.ac.uk> <4CC99075.4050100@pobox.com>
Message-ID: <AANLkTik28eCk2SDtoz3=8is2otJxqFCdYZH7e25WpKBR@mail.gmail.com>

An interesting discussion, but shouldn't the layer table have been cread
with a UNIQUE contraint in the ID column in the first place ?

Anders

On Thu, Oct 28, 2010 at 5:02 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Peter J Halls wrote:
>
>> Even and team,
>>
>>   following the hint from Even's post below, I have been experimenting
>> with OGR_F_SetFID to get the FID for appends to increment beyond the
>> existing value, rather than always to start at 1.  I'm testing against the
>> OCI driver and am not (yet) using 1.8.
>>
>>   I've found that there appears to be no way to 'reset' the starting FID
>> value used by the driver for output.  I can certainly set the FID to an
>> arbitrary value for a specific record, but the internal counter does not
>> appear to be reset-able.  This means that I must manage the FID values
>> externally to OGR when appending to an existing dataset in order to avoid
>> new records being added with OGR_FID values restarting from 1.
>>
>>   Is this what is expected / intended?
>>
>
> Peter,
>
> This is a flaw in the OCI driver.  FIDs are supposed to be unique, and
> if the CreateFeature() method is assigning one, it should ensure it is
> unique.
>
> I have reviewed the trunk code, and this seems to be a problem with it too.
>
> My feeling is that the first time iNextShapeId is used in the lifetime of
> an OGROCITableLayer we ought to do a query on the corresponding column
> to find it's max, and use that +1 as iNextShapeId.  This would generally
> avoid conflicts, and would not be as expensive as querying for each
> create feature.
>
> The downside to this approach is that it assumes no one else is adding
> features to the table during the lifetime of the OGROCITableLayer object.
> This is usually safe, but not always.  This is one example of how the
> OGR RDBMS drivers are often not *really* prepared to live cleanly in
> a multi-user / multi-application environment.  It could be "done right"
> but the cost for bulk loads might be quite painful.  Fast bulk loads
> was the original reason for existence of the OCI driver.
>
> If you would like to prepare code for that it would be great.  If not,
> please create a ticket for the issue and hopefully I'll have a chance to
> do it.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 

________________________________________________________

Anders Moe

Managing Director
Geocap
w: +47 22 95 56 63
anders.moe@geocap.no
________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/3b5f50b7/attachment.html
From even.rouault at mines-paris.org  Thu Oct 28 11:24:50 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 11:25:03 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <4CC9898C.3050204@york.ac.uk>
References: <4CC93AC1.4010301@york.ac.uk>
	<1288260586.4cc94bea2cb16@webmail.free.fr>
	<4CC9898C.3050204@york.ac.uk>
Message-ID: <1288279490.4cc995c224941@webmail.free.fr>

Selon Peter J Halls <P.Halls@york.ac.uk>:

Not using it, it's hard for me to comment on OCI peculiarities. I've looked
quickly at the code of ogroctitablelayer.cpp and it seems to be consistant with
the behaviour you describe : if you set a FID before using CreateFeature() it
will use it, otherwise it will use a serial number incremented on OGR side, that
is initially set at 1 at datasource opening. I have no clue if it is
wanted/expected for some reason... That seems to be related with the way the FID
column is discovered. I see this :

/* -------------------------------------------------------------------- */
/*      What is the name of the column to use as FID?  This defaults    */
/*      to OGR_FID but we allow it to be overridden by a config         */
/*      variable.  Ideally we would identify a column that is a         */
/*      primary key and use that, but I'm not yet sure how to           */
/*      accomplish that.                                                */
/* -------------------------------------------------------------------- */
    const char *pszExpectedFIDName =
        CPLGetConfigOption( "OCI_FID", "OGR_FID" );

So there's no real guarantee on the characteristics of the FID column. It could
even have no uniqueness constraint.

Generally/ideally, the driver should be able to set automatically the FID of the
feature that is passed to CreateFeature() with a unique value, especially when
the FID is a RDBMS auto-increment column. This is for example done in the 
SQLite driver. The patch I mentionned in my previous post about the PG driver
also aims at doing that. The Shape driver also seems to do it that way.

So there's perhaps place for improvements in OCI driver.

> Even and team,
>
>     following the hint from Even's post below, I have been experimenting with
> OGR_F_SetFID to get the FID for appends to increment beyond the existing
> value,
> rather than always to start at 1.  I'm testing against the OCI driver and am
> not
> (yet) using 1.8.
>
>     I've found that there appears to be no way to 'reset' the starting FID
> value
> used by the driver for output.  I can certainly set the FID to an arbitrary
> value for a specific record, but the internal counter does not appear to be
> reset-able.  This means that I must manage the FID values externally to OGR
> when
> appending to an existing dataset in order to avoid new records being added
> with
> OGR_FID values restarting from 1.
>
>     Is this what is expected / intended?
>
>     The observed behaviour does not quite seem to be as one might expect -
> especially for the database drivers where the FID is to become the primary
> key
> and so must have unique values.  At present it would appear that this
> condition
> is broken when OGR is used to append.  Indeed, were I to create a table with
> a
> unique constraint on OGR_FID, appends would fail once there are records in
> the
> table.
>
>     I've also tried reading the last record in the table and reading the
> table
> until there are no more records to read, but neither seem to have any impact
> on
> the initial FID value when writing.
>
>     Is this a peculiarity of the OCI driver?
>
> Thanks and best wishes,
>
> Peter
>
> Even Rouault wrote:
> > Hi Peter,
> >
> > Do you mean that just after issuing a CreateFeature(), the feature ID isn't
> set
> > to the correct value (the one that you'll find after dataset reopening) ?
> >
> > You have to be more specific about which OGR driver you are talking about
> > because the mechanisms for setting/retrieving FID is driver specific.
> >
> > Perhaps a small snippet of code would help to understand what you do /
> would
> > like to do.
> >
> > If you're interested in the PG driver, here's a relevant ticket :
> > http://trac.osgeo.org/gdal/ticket/3744
> >
> > Best regards,
> >
> > Even
> >
> >> Dear Team,
> >>
> >>      I've reviewed the change log for release 8 so far and do not think
> that
> >> this question is version specific.
> >>
> >>      I'm coding to support an incremental process for loading a large
> spatial
> >> database from a set of distribution objects.  I have noted that my present
> >> approach results in the OGR_FID column values restarting at 1 for each
> >> append.
> >> This is clearly an error!  However, there does not appear to be a method
> for
> >> initialising the 'nextfidtowrite' value in the API.  What is the best
> >> strategy
> >> to adopt?
> >>
> >>      So far as I can see, there appear to be two options.  One is to read
> >> every
> >> feature until there are no more to read: I'd rather not do that.  The
> other
> >> would involve opening the layer, reading the featurecount and then
> requesting
> >> the featurecount'th feature - featurecount'th + 1 should give an error.
> Both
> >> methods should leave the current feature being the last existing feature,
> but
> >> is
> >> this sufficient to effectively initialise the value at which the next FID
> >> will
> >> start?
> >>
> >> Thanks and best wishes,
> >>
> >> Peter
> >>
> >>
> >
>
--------------------------------------------------------------------------------
> >> Peter J Halls, GIS Advisor, University of York
> >> Telephone: 01904 323806     Fax: 01904 323740
> >> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
> >> This message has the status of a private and personal communication
> >>
> >
>
--------------------------------------------------------------------------------
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
>
> --
>
--------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: IT Services, University of York, Heslington, York YO10 5DD
> This message has the status of a private and personal communication
>
--------------------------------------------------------------------------------
>


From even.rouault at mines-paris.org  Thu Oct 28 11:38:40 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 11:38:48 2010
Subject: [gdal-dev] [GDALBUILDVRT]Syntax to do tiles
In-Reply-To: <1288278302792-5682930.post@n2.nabble.com>
References: <1288278302792-5682930.post@n2.nabble.com>
Message-ID: <1288280320.4cc9990043fd8@webmail.free.fr>

Selon Tacot <cfab13@hotmail.fr>:

gdalbuildvrt is aimed at building a single dataset from a mosaic of tiles. You
just want to do the contrary. You were on a better track the other day when you
were exploring gdal_retile.

Generally the syntax for GDAL utilities is there :
http://gdal.org/gdal_utilities.html

>
> Hi
>
> I would like to reshape a ECW pictures in several tiles.
> Would it be possible to translate ECW in VRT; cut the VRT in tiles, and
> re-translate all VRT in ECW?
> And if it's possible, what are the syntax for those commands?
>
> Thanks
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/GDALBUILDVRT-Syntax-to-do-tiles-tp5682930p5682930.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From bchrist at iinet.net.au  Thu Oct 28 11:55:40 2010
From: bchrist at iinet.net.au (BradC)
Date: Thu Oct 28 11:55:42 2010
Subject: [gdal-dev] RE: Memory leak from GDALRasterIO
In-Reply-To: <31FBEB7D5D344A47BB76A65BD8ED35A9234D09CE32@MBXC.exchange.cornell.edu>
References: <31FBEB7D5D344A47BB76A65BD8ED35A9234D09C500@MBXC.exchange.cornell.edu>
	<4C51E5E8.1020805@pobox.com>
	<31FBEB7D5D344A47BB76A65BD8ED35A9234D09CE32@MBXC.exchange.cornell.edu>
Message-ID: <1288281340523-5683178.post@n2.nabble.com>


Hi All,

I am working on fixing a memory use issue in the Virtual Planet Builder
project (an off shoot of OpenSceneGraph) and have come accross the exact
issue described in this thread.

The code essential runs in a loop creating an image pyramid from a large ECW
file. During this loop there a very large number of RasterIO() calls. When
doing this memory use grows continually, seemingly without limit. If I close
and repoen my GDALDataSet regulary then I regain all the memory but it seems
from  this thread there should be a much better way to control memory use.

I have tried calling GDALSetCacheMax() with values from 1 to 1,000,000 with
no effect. I have also tried calling while(GDALFlushCacheBlock()); after
each RasterIO call, once again with no effect.

I am hoping somebody could point me in the right direction because I am
running out of ideas.

Cheers,
Brad
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Memory-leak-from-GDALRasterIO-tp5352901p5683178.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jukka.rahkonen at mmmtike.fi  Thu Oct 28 12:33:55 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Oct 28 12:34:05 2010
Subject: [gdal-dev] Re: [GDALBUILDVRT]Syntax to do tiles
References: <1288278302792-5682930.post@n2.nabble.com>
	<1288280320.4cc9990043fd8@webmail.free.fr>
Message-ID: <loom.20101028T183048-17@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Selon Tacot <cfab13 <at> hotmail.fr>:
> 
> gdalbuildvrt is aimed at building a single dataset from a mosaic of tiles. You
> just want to do the contrary. You were on a better track the other day when you
> were exploring gdal_retile.

Perhapt gdal2tiles or MapTiler (www.maptiler.org) are even better matches.

-Jukka Rahkonen-

From warmerdam at pobox.com  Thu Oct 28 13:12:43 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct 28 13:12:48 2010
Subject: [gdal-dev] RE: Memory leak from GDALRasterIO
In-Reply-To: <1288281340523-5683178.post@n2.nabble.com>
References: <31FBEB7D5D344A47BB76A65BD8ED35A9234D09C500@MBXC.exchange.cornell.edu>
	<4C51E5E8.1020805@pobox.com>
	<31FBEB7D5D344A47BB76A65BD8ED35A9234D09CE32@MBXC.exchange.cornell.edu>
	<1288281340523-5683178.post@n2.nabble.com>
Message-ID: <4CC9AF0B.1060803@pobox.com>

BradC wrote:
> Hi All,
> 
> I am working on fixing a memory use issue in the Virtual Planet Builder
> project (an off shoot of OpenSceneGraph) and have come accross the exact
> issue described in this thread.
> 
> The code essential runs in a loop creating an image pyramid from a large ECW
> file. During this loop there a very large number of RasterIO() calls. When
> doing this memory use grows continually, seemingly without limit. If I close
> and repoen my GDALDataSet regulary then I regain all the memory but it seems
> from  this thread there should be a much better way to control memory use.
> 
> I have tried calling GDALSetCacheMax() with values from 1 to 1,000,000 with
> no effect. I have also tried calling while(GDALFlushCacheBlock()); after
> each RasterIO call, once again with no effect.
> 
> I am hoping somebody could point me in the right direction because I am
> running out of ideas.

Brad,

I *think* this is due to aggressive caching logic within the ECW SDK itself
and I'm not aware of how to influence it as an application built on the SDK.
You might want to poke around on the ECW Forums for clues.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Thu Oct 28 13:45:49 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 13:45:06 2010
Subject: [gdal-dev] Motion: RFC 7 - Use VSILFILE for VSI*L Functions
In-Reply-To: <201010261909.05856.even.rouault@mines-paris.org>
References: <201010261909.05856.even.rouault@mines-paris.org>
Message-ID: <201010281945.49557.even.rouault@mines-paris.org>

Hi,

This motion has passed with +1 from PSC members EvenR, FrankW, DanielM, 
TamasS and HowardB  (and non-PSC +1 from GaigeP).

I will proceed soon to commiting the patch to svn.

I'll make VSIL_STRICT_ENFORCE active when DEBUG is defined. Hopefully this will 
not cause troubles. Anyway, it'd be easy to change that.

Best regards,

Even

Le mardi 26 octobre 2010 19:09:05, Even Rouault a ?crit :
> Folks,
> 
> Motion: I move to adopt RFC 7: Use VSILFILE for VSI*L Functions.
> 
>    http://trac.osgeo.org/gdal/wiki/rfc7_vsilapi
> 
> Starting with my +1
> 
> Best regards,
> 
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ksshannon at gmail.com  Thu Oct 28 13:58:55 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Oct 28 13:59:15 2010
Subject: [gdal-dev] gdalinfo and scale/offset
Message-ID: <AANLkTinsyXLz9jfn5Z-CDy2jjLh7KHrxH2sOv1z6U4WF@mail.gmail.com>

Hello,
I have been working  on ticket #3797.  In the example given, gdalinfo is the
calling the netcdf driver.  I agree with Frank's opinion on this in ticket
#1660:

Note that GDALRasterBand has methods to get the offset and scale. The normal
> GDAL practice would be to return them via those methods - not to apply them
> on the fly. Then it is up to the caller to do so if they wish.
>

gdal shouldn't be in charge of scaling the data to what may be a different
data type, or unpacking it.  But in this case, gdalinfo is the caller.
Should the functionality of the scaling be added to gdalinfo?  Maybe
optionally reporting the stats as scaled data?  Any thoughts?

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/2182b732/attachment.html
From even.rouault at mines-paris.org  Thu Oct 28 14:09:38 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 14:08:54 2010
Subject: [gdal-dev] gdalinfo and scale/offset
In-Reply-To: <AANLkTinsyXLz9jfn5Z-CDy2jjLh7KHrxH2sOv1z6U4WF@mail.gmail.com>
References: <AANLkTinsyXLz9jfn5Z-CDy2jjLh7KHrxH2sOv1z6U4WF@mail.gmail.com>
Message-ID: <201010282009.38198.even.rouault@mines-paris.org>

Kyle,

Frank added in GDAL 1.7 a '-unscale' option to gdal_translate, so people can 
always use gdal_translate -unscale to apply the offset and scale (they can even 
do that do a VRT file to save disk space), and then use gdalinfo on the result.

Extract from the gdal_translate man page:

"-unscale : Apply the scale/offset metadata for the bands to convert scaled 
values to unscaled values.  It is also often necessary to reset the output 
datatype with the -ot switch."

Is there a need for such an option in gdalinfo ? I have no strong opinion 
about this. An issue I see is that usually -stats record the computed stats in 
a .aux.xml file for later retrieval. The interaction with a -unscale option 
would be tricky... What happens if the user computes with -unscale and then do 
gdalinfo without it... Or the other way round.

Le jeudi 28 octobre 2010 19:58:55, Kyle Shannon a ?crit :
> Hello,
> I have been working  on ticket #3797.  In the example given, gdalinfo is
> the calling the netcdf driver.  I agree with Frank's opinion on this in
> ticket #1660:
> 
> Note that GDALRasterBand has methods to get the offset and scale. The
> normal
> 
> > GDAL practice would be to return them via those methods - not to apply
> > them on the fly. Then it is up to the caller to do so if they wish.
> 
> gdal shouldn't be in charge of scaling the data to what may be a different
> data type, or unpacking it.  But in this case, gdalinfo is the caller.
> Should the functionality of the scaling be added to gdalinfo?  Maybe
> optionally reporting the stats as scaled data?  Any thoughts?
> 
> # ============================
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us
> # ============================
From jluis at ualg.pt  Thu Oct 28 14:35:09 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Oct 28 14:35:42 2010
Subject: [gdal-dev] gdalinfo and scale/offset
In-Reply-To: <201010282009.38198.even.rouault@mines-paris.org>
References: <AANLkTinsyXLz9jfn5Z-CDy2jjLh7KHrxH2sOv1z6U4WF@mail.gmail.com>
	<201010282009.38198.even.rouault@mines-paris.org>
Message-ID: <4CC9C25D.2070701@ualg.pt>

Even

Thanks for pointing into this that I was not aware of as it would be the 
main point of my answer to Kyle's question.
But still, as it is referred in the ticket (sorry for lousy formatting 
but I never learn how to do it better) the main issue occurred in the 
conversion to another format (geotiff for that matter). So though an 
option exists ('unscale') to account for offset/scale the natural 
expectancy is that the conversion does not change the data values.

Redoing the tickets example we can see (not shown than because I 
thought  it of lesser interest)

C:\SVN\mironeWC\src_C\t>gdalinfo lixo.tiff -mm
Driver: GTiff/GeoTIFF
Files: lixo.tiff
Size is 21, 21
Coordinate System is `'
Origin = (-10.500000000000000,10.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
   NC_GLOBAL#Conventions=COARDS/CF-1.0
   NC_GLOBAL#title=lixo.grd
   NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
   NC_GLOBAL#GMT_version=4.5.4
   z#long_name=z
   z#_FillValue=1.#QNAN0e+000
   z#actual_range=-1, 1
   z#scale_factor=0.01
   x#long_name=x
   x#actual_range=-10, 10
   y#long_name=y
   y#actual_range=-10, 10
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -10.5000000,  10.5000000)
Lower Left  ( -10.5000000, -10.5000000)
Upper Right (  10.5000000,  10.5000000)
Lower Right (  10.5000000, -10.5000000)
Center      (   0.0000000,   0.0000000)
Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
     Computed Min/Max=-100.000,100.000


It's true that we can still see a trace of the previous info about the scale

   z#actual_range=-1, 1
   z#scale_factor=0.01

but a user would need to be very very attentive to realize that and to 
know that the data values were off by an 0.01 factor.

I think that in these situations the scale factor would better be 
applied by default (like with the gdal_info example)

Joaquim

> Kyle,
>
> Frank added in GDAL 1.7 a '-unscale' option to gdal_translate, so people can
> always use gdal_translate -unscale to apply the offset and scale (they can even
> do that do a VRT file to save disk space), and then use gdalinfo on the result.
>
> Extract from the gdal_translate man page:
>
> "-unscale : Apply the scale/offset metadata for the bands to convert scaled
> values to unscaled values.  It is also often necessary to reset the output
> datatype with the -ot switch."
>
> Is there a need for such an option in gdalinfo ? I have no strong opinion
> about this. An issue I see is that usually -stats record the computed stats in
> a .aux.xml file for later retrieval. The interaction with a -unscale option
> would be tricky... What happens if the user computes with -unscale and then do
> gdalinfo without it... Or the other way round.
>
> Le jeudi 28 octobre 2010 19:58:55, Kyle Shannon a ?crit :
>    
>> Hello,
>> I have been working  on ticket #3797.  In the example given, gdalinfo is
>> the calling the netcdf driver.  I agree with Frank's opinion on this in
>> ticket #1660:
>>
>> Note that GDALRasterBand has methods to get the offset and scale. The
>> normal
>>
>>      
>>> GDAL practice would be to return them via those methods - not to apply
>>> them on the fly. Then it is up to the caller to do so if they wish.
>>>        
>> gdal shouldn't be in charge of scaling the data to what may be a different
>> data type, or unpacking it.  But in this case, gdalinfo is the caller.
>> Should the functionality of the scaling be added to gdalinfo?  Maybe
>> optionally reporting the stats as scaled data?  Any thoughts?
>>
>> # ============================
>> Kyle Shannon
>> Physical Science Technician
>> RMRS Fire Sciences Lab
>> Fire, Fuels&  Smoke - RWU 4405
>> 5775 Highway 10 W.
>> Missoula, MT 59808
>> (406)829-6954
>> kshannon@fs.fed.us
>> # ============================
>>      
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>    

From ksshannon at gmail.com  Thu Oct 28 14:51:10 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Oct 28 14:51:28 2010
Subject: [gdal-dev] gdalinfo and scale/offset
In-Reply-To: <4CC9C25D.2070701@ualg.pt>
References: <AANLkTinsyXLz9jfn5Z-CDy2jjLh7KHrxH2sOv1z6U4WF@mail.gmail.com>
	<201010282009.38198.even.rouault@mines-paris.org>
	<4CC9C25D.2070701@ualg.pt>
Message-ID: <AANLkTimiZ834k=fuLDqZb8Mxeuo57T6sWQezf2ZpOUgX@mail.gmail.com>

Joaquim,
With my code I wrote today, the offset and scale are set on the
GDALRasterBand itself.  If I do the following:

gdal_translate lixo.grd lixo.tif
gdalinfo lixo.tif -mm

I get:

Driver: GTiff/GeoTIFF
Files: lixo.tif
       lixo.tif.aux.xml
Size is 21, 21
Coordinate System is `'
Origin = (-10.500000000000000,10.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  NC_GLOBAL#Conventions=COARDS/CF-1.0
  NC_GLOBAL#title=lixo.grd
  NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
  NC_GLOBAL#GMT_version=4.5.4
  z#long_name=z
  z#_FillValue=nan
  z#actual_range=-1, 1
  z#scale_factor=0.01
  x#long_name=x
  x#actual_range=-10, 10
  y#long_name=y
  y#actual_range=-10, 10
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -10.5000000,  10.5000000)
Lower Left  ( -10.5000000, -10.5000000)
Upper Right (  10.5000000,  10.5000000)
Lower Right (  10.5000000, -10.5000000)
Center      (   0.0000000,   0.0000000)
Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
    Computed Min/Max=-100.000,100.000
  NoData Value=nan
  Offset: 0,   Scale:0.01
  Metadata:
    NETCDF_VARNAME=z

where you can see the offset and scale reported at the band level.  This is
not just metadata anymore, it belongs to GDALRasterBand.

if I run:
gdal_translate -unscale lixo.grd lixo_uscale.tif
gdalinfo -mm lixo_unscale.tif

Files: lixo_uscale.tif
       lixo_uscale.tif.aux.xml
Size is 21, 21
Coordinate System is `'
Origin = (-10.500000000000000,10.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  NC_GLOBAL#Conventions=COARDS/CF-1.0
  NC_GLOBAL#title=lixo.grd
  NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
  NC_GLOBAL#GMT_version=4.5.4
  z#long_name=z
  z#_FillValue=nan
  z#actual_range=-1, 1
  z#scale_factor=0.01
  x#long_name=x
  x#actual_range=-10, 10
  y#long_name=y
  y#actual_range=-10, 10
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( -10.5000000,  10.5000000)
Lower Left  ( -10.5000000, -10.5000000)
Upper Right (  10.5000000,  10.5000000)
Lower Right (  10.5000000, -10.5000000)
Center      (   0.0000000,   0.0000000)
Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
    Computed Min/Max=-1.000,1.000
  NoData Value=nan
  Metadata:
    NETCDF_VARNAME=z

The data in the tif is unscaled or unpacked.

I don't know if this is clear, I apologize for all the snippets. I, like
Even, have no strong feelings for gdalinfo reporting scaled/unscaled data.

kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Thu, Oct 28, 2010 at 12:35 PM, Joaquim Luis <jluis@ualg.pt> wrote:

> Even
>
> Thanks for pointing into this that I was not aware of as it would be the
> main point of my answer to Kyle's question.
> But still, as it is referred in the ticket (sorry for lousy formatting but
> I never learn how to do it better) the main issue occurred in the conversion
> to another format (geotiff for that matter). So though an option exists
> ('unscale') to account for offset/scale the natural expectancy is that the
> conversion does not change the data values.
>
> Redoing the tickets example we can see (not shown than because I thought
>  it of lesser interest)
>
> C:\SVN\mironeWC\src_C\t>gdalinfo lixo.tiff -mm
> Driver: GTiff/GeoTIFF
> Files: lixo.tiff
> Size is 21, 21
> Coordinate System is `'
> Origin = (-10.500000000000000,10.500000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
>  NC_GLOBAL#Conventions=COARDS/CF-1.0
>  NC_GLOBAL#title=lixo.grd
>  NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
>  NC_GLOBAL#GMT_version=4.5.4
>  z#long_name=z
>  z#_FillValue=1.#QNAN0e+000
>  z#actual_range=-1, 1
>  z#scale_factor=0.01
>  x#long_name=x
>  x#actual_range=-10, 10
>  y#long_name=y
>  y#actual_range=-10, 10
> Image Structure Metadata:
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -10.5000000,  10.5000000)
> Lower Left  ( -10.5000000, -10.5000000)
> Upper Right (  10.5000000,  10.5000000)
> Lower Right (  10.5000000, -10.5000000)
> Center      (   0.0000000,   0.0000000)
> Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
>    Computed Min/Max=-100.000,100.000
>
>
> It's true that we can still see a trace of the previous info about the
> scale
>
>  z#actual_range=-1, 1
>  z#scale_factor=0.01
>
> but a user would need to be very very attentive to realize that and to know
> that the data values were off by an 0.01 factor.
>
> I think that in these situations the scale factor would better be applied
> by default (like with the gdal_info example)
>
> Joaquim
>
>  Kyle,
>>
>> Frank added in GDAL 1.7 a '-unscale' option to gdal_translate, so people
>> can
>> always use gdal_translate -unscale to apply the offset and scale (they can
>> even
>> do that do a VRT file to save disk space), and then use gdalinfo on the
>> result.
>>
>> Extract from the gdal_translate man page:
>>
>> "-unscale : Apply the scale/offset metadata for the bands to convert
>> scaled
>> values to unscaled values.  It is also often necessary to reset the output
>> datatype with the -ot switch."
>>
>> Is there a need for such an option in gdalinfo ? I have no strong opinion
>> about this. An issue I see is that usually -stats record the computed
>> stats in
>> a .aux.xml file for later retrieval. The interaction with a -unscale
>> option
>> would be tricky... What happens if the user computes with -unscale and
>> then do
>> gdalinfo without it... Or the other way round.
>>
>> Le jeudi 28 octobre 2010 19:58:55, Kyle Shannon a ?crit :
>>
>>
>>> Hello,
>>> I have been working  on ticket #3797.  In the example given, gdalinfo is
>>> the calling the netcdf driver.  I agree with Frank's opinion on this in
>>> ticket #1660:
>>>
>>> Note that GDALRasterBand has methods to get the offset and scale. The
>>> normal
>>>
>>>
>>>
>>>> GDAL practice would be to return them via those methods - not to apply
>>>> them on the fly. Then it is up to the caller to do so if they wish.
>>>>
>>>>
>>> gdal shouldn't be in charge of scaling the data to what may be a
>>> different
>>> data type, or unpacking it.  But in this case, gdalinfo is the caller.
>>> Should the functionality of the scaling be added to gdalinfo?  Maybe
>>> optionally reporting the stats as scaled data?  Any thoughts?
>>>
>>> # ============================
>>> Kyle Shannon
>>> Physical Science Technician
>>> RMRS Fire Sciences Lab
>>> Fire, Fuels&  Smoke - RWU 4405
>>> 5775 Highway 10 W.
>>> Missoula, MT 59808
>>> (406)829-6954
>>> kshannon@fs.fed.us
>>> # ============================
>>>
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/0c686cf8/attachment-0001.html
From jluis at ualg.pt  Thu Oct 28 15:10:00 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Oct 28 15:10:07 2010
Subject: [gdal-dev] gdalinfo and scale/offset
In-Reply-To: <AANLkTimiZ834k=fuLDqZb8Mxeuo57T6sWQezf2ZpOUgX@mail.gmail.com>
References: <AANLkTinsyXLz9jfn5Z-CDy2jjLh7KHrxH2sOv1z6U4WF@mail.gmail.com>
	<201010282009.38198.even.rouault@mines-paris.org>
	<4CC9C25D.2070701@ualg.pt>
	<AANLkTimiZ834k=fuLDqZb8Mxeuo57T6sWQezf2ZpOUgX@mail.gmail.com>
Message-ID: <4CC9CA88.4050503@ualg.pt>

Kyle,

Yes, that is much better but (sorry for one other 'but') what about 
formats that do not know anything about scale/offset?
(Surfer format is one comes right to my mind)
In those cases conversion would definitively go wrong. Issue a 
screaming  warning in than?

Joaquim

> Joaquim,
> With my code I wrote today, the offset and scale are set on the 
> GDALRasterBand itself.  If I do the following:
>
> gdal_translate lixo.grd lixo.tif
> gdalinfo lixo.tif -mm
>
> I get:
>
> Driver: GTiff/GeoTIFF
> Files: lixo.tif
>        lixo.tif.aux.xml
> Size is 21, 21
> Coordinate System is `'
> Origin = (-10.500000000000000,10.500000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
>   NC_GLOBAL#Conventions=COARDS/CF-1.0
>   NC_GLOBAL#title=lixo.grd
>   NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
>   NC_GLOBAL#GMT_version=4.5.4
>   z#long_name=z
>   z#_FillValue=nan
>   z#actual_range=-1, 1
>   z#scale_factor=0.01
>   x#long_name=x
>   x#actual_range=-10, 10
>   y#long_name=y
>   y#actual_range=-10, 10
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -10.5000000,  10.5000000)
> Lower Left  ( -10.5000000, -10.5000000)
> Upper Right (  10.5000000,  10.5000000)
> Lower Right (  10.5000000, -10.5000000)
> Center      (   0.0000000,   0.0000000)
> Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
>     Computed Min/Max=-100.000,100.000
>   NoData Value=nan
>   Offset: 0,   Scale:0.01
>   Metadata:
>     NETCDF_VARNAME=z
>
> where you can see the offset and scale reported at the band level.  
> This is not just metadata anymore, it belongs to GDALRasterBand.
>
> if I run:
> gdal_translate -unscale lixo.grd lixo_uscale.tif
> gdalinfo -mm lixo_unscale.tif
>
> Files: lixo_uscale.tif
>        lixo_uscale.tif.aux.xml
> Size is 21, 21
> Coordinate System is `'
> Origin = (-10.500000000000000,10.500000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
>   NC_GLOBAL#Conventions=COARDS/CF-1.0
>   NC_GLOBAL#title=lixo.grd
>   NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
>   NC_GLOBAL#GMT_version=4.5.4
>   z#long_name=z
>   z#_FillValue=nan
>   z#actual_range=-1, 1
>   z#scale_factor=0.01
>   x#long_name=x
>   x#actual_range=-10, 10
>   y#long_name=y
>   y#actual_range=-10, 10
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -10.5000000,  10.5000000)
> Lower Left  ( -10.5000000, -10.5000000)
> Upper Right (  10.5000000,  10.5000000)
> Lower Right (  10.5000000, -10.5000000)
> Center      (   0.0000000,   0.0000000)
> Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
>     Computed Min/Max=-1.000,1.000
>   NoData Value=nan
>   Metadata:
>     NETCDF_VARNAME=z
>
> The data in the tif is unscaled or unpacked.
>
> I don't know if this is clear, I apologize for all the snippets. I, 
> like Even, have no strong feelings for gdalinfo reporting 
> scaled/unscaled data.
>
> kss
>
> # ============================
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us <mailto:kshannon@fs.fed.us>
> # ============================
>
>
> On Thu, Oct 28, 2010 at 12:35 PM, Joaquim Luis <jluis@ualg.pt 
> <mailto:jluis@ualg.pt>> wrote:
>
>     Even
>
>     Thanks for pointing into this that I was not aware of as it would
>     be the main point of my answer to Kyle's question.
>     But still, as it is referred in the ticket (sorry for lousy
>     formatting but I never learn how to do it better) the main issue
>     occurred in the conversion to another format (geotiff for that
>     matter). So though an option exists ('unscale') to account for
>     offset/scale the natural expectancy is that the conversion does
>     not change the data values.
>
>     Redoing the tickets example we can see (not shown than because I
>     thought  it of lesser interest)
>
>     C:\SVN\mironeWC\src_C\t>gdalinfo lixo.tiff -mm
>     Driver: GTiff/GeoTIFF
>     Files: lixo.tiff
>     Size is 21, 21
>     Coordinate System is `'
>     Origin = (-10.500000000000000,10.500000000000000)
>     Pixel Size = (1.000000000000000,-1.000000000000000)
>     Metadata:
>      NC_GLOBAL#Conventions=COARDS/CF-1.0
>      NC_GLOBAL#title=lixo.grd
>      NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
>      NC_GLOBAL#GMT_version=4.5.4
>      z#long_name=z
>      z#_FillValue=1.#QNAN0e+000
>      z#actual_range=-1, 1
>      z#scale_factor=0.01
>      x#long_name=x
>      x#actual_range=-10, 10
>      y#long_name=y
>      y#actual_range=-10, 10
>     Image Structure Metadata:
>      INTERLEAVE=BAND
>     Corner Coordinates:
>     Upper Left  ( -10.5000000,  10.5000000)
>     Lower Left  ( -10.5000000, -10.5000000)
>     Upper Right (  10.5000000,  10.5000000)
>     Lower Right (  10.5000000, -10.5000000)
>     Center      (   0.0000000,   0.0000000)
>     Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
>        Computed Min/Max=-100.000,100.000
>
>
>     It's true that we can still see a trace of the previous info about
>     the scale
>
>      z#actual_range=-1, 1
>      z#scale_factor=0.01
>
>     but a user would need to be very very attentive to realize that
>     and to know that the data values were off by an 0.01 factor.
>
>     I think that in these situations the scale factor would better be
>     applied by default (like with the gdal_info example)
>
>     Joaquim
>
>         Kyle,
>
>         Frank added in GDAL 1.7 a '-unscale' option to gdal_translate,
>         so people can
>         always use gdal_translate -unscale to apply the offset and
>         scale (they can even
>         do that do a VRT file to save disk space), and then use
>         gdalinfo on the result.
>
>         Extract from the gdal_translate man page:
>
>         "-unscale : Apply the scale/offset metadata for the bands to
>         convert scaled
>         values to unscaled values.  It is also often necessary to
>         reset the output
>         datatype with the -ot switch."
>
>         Is there a need for such an option in gdalinfo ? I have no
>         strong opinion
>         about this. An issue I see is that usually -stats record the
>         computed stats in
>         a .aux.xml file for later retrieval. The interaction with a
>         -unscale option
>         would be tricky... What happens if the user computes with
>         -unscale and then do
>         gdalinfo without it... Or the other way round.
>
>         Le jeudi 28 octobre 2010 19:58:55, Kyle Shannon a ?crit :
>
>             Hello,
>             I have been working  on ticket #3797.  In the example
>             given, gdalinfo is
>             the calling the netcdf driver.  I agree with Frank's
>             opinion on this in
>             ticket #1660:
>
>             Note that GDALRasterBand has methods to get the offset and
>             scale. The
>             normal
>
>
>                 GDAL practice would be to return them via those
>                 methods - not to apply
>                 them on the fly. Then it is up to the caller to do so
>                 if they wish.
>
>             gdal shouldn't be in charge of scaling the data to what
>             may be a different
>             data type, or unpacking it.  But in this case, gdalinfo is
>             the caller.
>             Should the functionality of the scaling be added to
>             gdalinfo?  Maybe
>             optionally reporting the stats as scaled data?  Any thoughts?
>
>             # ============================
>             Kyle Shannon
>             Physical Science Technician
>             RMRS Fire Sciences Lab
>             Fire, Fuels&  Smoke - RWU 4405
>             5775 Highway 10 W.
>             Missoula, MT 59808
>             (406)829-6954
>             kshannon@fs.fed.us <mailto:kshannon@fs.fed.us>
>             # ============================
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/c365ba12/attachment.html
From ksshannon at gmail.com  Thu Oct 28 15:21:05 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu Oct 28 15:21:23 2010
Subject: [gdal-dev] gdalinfo and scale/offset
In-Reply-To: <4CC9CA88.4050503@ualg.pt>
References: <AANLkTinsyXLz9jfn5Z-CDy2jjLh7KHrxH2sOv1z6U4WF@mail.gmail.com>
	<201010282009.38198.even.rouault@mines-paris.org>
	<4CC9C25D.2070701@ualg.pt>
	<AANLkTimiZ834k=fuLDqZb8Mxeuo57T6sWQezf2ZpOUgX@mail.gmail.com>
	<4CC9CA88.4050503@ualg.pt>
Message-ID: <AANLkTimKvO8KwV0UXmAUHOL1BOkXNfrj0J_CheRWhS6X@mail.gmail.com>

Ah, I see your issue.  I honestly don't know what to do about that.  The
only option I see is issuing a warning and continuing.  I don't think
unscaling that data is an option without a user explicitly asking for it to
be unscaled.  I am still not sure if this is even a gdal issue.  The caller
just might have to know what's going on.  A warning message wouldn't be a
bad idea, but I don't know who's job it should be, whether specific drivers
that don't support Scale/Offset should issue a warning on CreateCopy() or if
the caller, gdal_translate, should issue that warning.  I have to defer to
more experienced gdal'ers/programmers.

kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================


On Thu, Oct 28, 2010 at 1:10 PM, Joaquim Luis <jluis@ualg.pt> wrote:

>  Kyle,
>
> Yes, that is much better but (sorry for one other 'but') what about formats
> that do not know anything about scale/offset?
> (Surfer format is one comes right to my mind)
> In those cases conversion would definitively go wrong. Issue a screaming
> warning in than?
>
> Joaquim
>
>
> Joaquim,
> With my code I wrote today, the offset and scale are set on the
> GDALRasterBand itself.  If I do the following:
>
> gdal_translate lixo.grd lixo.tif
> gdalinfo lixo.tif -mm
>
> I get:
>
> Driver: GTiff/GeoTIFF
> Files: lixo.tif
>        lixo.tif.aux.xml
> Size is 21, 21
> Coordinate System is `'
> Origin = (-10.500000000000000,10.500000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
>   NC_GLOBAL#Conventions=COARDS/CF-1.0
>   NC_GLOBAL#title=lixo.grd
>   NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
>   NC_GLOBAL#GMT_version=4.5.4
>   z#long_name=z
>   z#_FillValue=nan
>   z#actual_range=-1, 1
>   z#scale_factor=0.01
>   x#long_name=x
>   x#actual_range=-10, 10
>   y#long_name=y
>   y#actual_range=-10, 10
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -10.5000000,  10.5000000)
> Lower Left  ( -10.5000000, -10.5000000)
> Upper Right (  10.5000000,  10.5000000)
> Lower Right (  10.5000000, -10.5000000)
> Center      (   0.0000000,   0.0000000)
> Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
>     Computed Min/Max=-100.000,100.000
>   NoData Value=nan
>   Offset: 0,   Scale:0.01
>   Metadata:
>     NETCDF_VARNAME=z
>
> where you can see the offset and scale reported at the band level.  This is
> not just metadata anymore, it belongs to GDALRasterBand.
>
> if I run:
> gdal_translate -unscale lixo.grd lixo_uscale.tif
> gdalinfo -mm lixo_unscale.tif
>
> Files: lixo_uscale.tif
>        lixo_uscale.tif.aux.xml
> Size is 21, 21
> Coordinate System is `'
> Origin = (-10.500000000000000,10.500000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
>   NC_GLOBAL#Conventions=COARDS/CF-1.0
>   NC_GLOBAL#title=lixo.grd
>   NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
>   NC_GLOBAL#GMT_version=4.5.4
>   z#long_name=z
>   z#_FillValue=nan
>   z#actual_range=-1, 1
>   z#scale_factor=0.01
>   x#long_name=x
>   x#actual_range=-10, 10
>   y#long_name=y
>   y#actual_range=-10, 10
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( -10.5000000,  10.5000000)
> Lower Left  ( -10.5000000, -10.5000000)
> Upper Right (  10.5000000,  10.5000000)
> Lower Right (  10.5000000, -10.5000000)
> Center      (   0.0000000,   0.0000000)
> Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
>     Computed Min/Max=-1.000,1.000
>   NoData Value=nan
>   Metadata:
>     NETCDF_VARNAME=z
>
> The data in the tif is unscaled or unpacked.
>
> I don't know if this is clear, I apologize for all the snippets. I, like
> Even, have no strong feelings for gdalinfo reporting scaled/unscaled data.
>
> kss
>
> # ============================
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us
> # ============================
>
>
> On Thu, Oct 28, 2010 at 12:35 PM, Joaquim Luis <jluis@ualg.pt> wrote:
>
>> Even
>>
>> Thanks for pointing into this that I was not aware of as it would be the
>> main point of my answer to Kyle's question.
>> But still, as it is referred in the ticket (sorry for lousy formatting but
>> I never learn how to do it better) the main issue occurred in the conversion
>> to another format (geotiff for that matter). So though an option exists
>> ('unscale') to account for offset/scale the natural expectancy is that the
>> conversion does not change the data values.
>>
>> Redoing the tickets example we can see (not shown than because I thought
>>  it of lesser interest)
>>
>> C:\SVN\mironeWC\src_C\t>gdalinfo lixo.tiff -mm
>> Driver: GTiff/GeoTIFF
>> Files: lixo.tiff
>> Size is 21, 21
>> Coordinate System is `'
>> Origin = (-10.500000000000000,10.500000000000000)
>> Pixel Size = (1.000000000000000,-1.000000000000000)
>> Metadata:
>>  NC_GLOBAL#Conventions=COARDS/CF-1.0
>>  NC_GLOBAL#title=lixo.grd
>>  NC_GLOBAL#history=grdmath -R-10/10/-10/10 -I1 X Y MUL = lixo.grd
>>  NC_GLOBAL#GMT_version=4.5.4
>>  z#long_name=z
>>  z#_FillValue=1.#QNAN0e+000
>>  z#actual_range=-1, 1
>>  z#scale_factor=0.01
>>  x#long_name=x
>>  x#actual_range=-10, 10
>>  y#long_name=y
>>  y#actual_range=-10, 10
>> Image Structure Metadata:
>>  INTERLEAVE=BAND
>> Corner Coordinates:
>> Upper Left  ( -10.5000000,  10.5000000)
>> Lower Left  ( -10.5000000, -10.5000000)
>> Upper Right (  10.5000000,  10.5000000)
>> Lower Right (  10.5000000, -10.5000000)
>> Center      (   0.0000000,   0.0000000)
>> Band 1 Block=21x21 Type=Float32, ColorInterp=Gray
>>    Computed Min/Max=-100.000,100.000
>>
>>
>> It's true that we can still see a trace of the previous info about the
>> scale
>>
>>  z#actual_range=-1, 1
>>  z#scale_factor=0.01
>>
>> but a user would need to be very very attentive to realize that and to
>> know that the data values were off by an 0.01 factor.
>>
>> I think that in these situations the scale factor would better be applied
>> by default (like with the gdal_info example)
>>
>> Joaquim
>>
>>  Kyle,
>>>
>>> Frank added in GDAL 1.7 a '-unscale' option to gdal_translate, so people
>>> can
>>> always use gdal_translate -unscale to apply the offset and scale (they
>>> can even
>>> do that do a VRT file to save disk space), and then use gdalinfo on the
>>> result.
>>>
>>> Extract from the gdal_translate man page:
>>>
>>> "-unscale : Apply the scale/offset metadata for the bands to convert
>>> scaled
>>> values to unscaled values.  It is also often necessary to reset the
>>> output
>>> datatype with the -ot switch."
>>>
>>> Is there a need for such an option in gdalinfo ? I have no strong opinion
>>> about this. An issue I see is that usually -stats record the computed
>>> stats in
>>> a .aux.xml file for later retrieval. The interaction with a -unscale
>>> option
>>> would be tricky... What happens if the user computes with -unscale and
>>> then do
>>> gdalinfo without it... Or the other way round.
>>>
>>> Le jeudi 28 octobre 2010 19:58:55, Kyle Shannon a ?crit :
>>>
>>>
>>>> Hello,
>>>> I have been working  on ticket #3797.  In the example given, gdalinfo is
>>>> the calling the netcdf driver.  I agree with Frank's opinion on this in
>>>> ticket #1660:
>>>>
>>>> Note that GDALRasterBand has methods to get the offset and scale. The
>>>> normal
>>>>
>>>>
>>>>
>>>>> GDAL practice would be to return them via those methods - not to apply
>>>>> them on the fly. Then it is up to the caller to do so if they wish.
>>>>>
>>>>>
>>>> gdal shouldn't be in charge of scaling the data to what may be a
>>>> different
>>>> data type, or unpacking it.  But in this case, gdalinfo is the caller.
>>>> Should the functionality of the scaling be added to gdalinfo?  Maybe
>>>> optionally reporting the stats as scaled data?  Any thoughts?
>>>>
>>>> # ============================
>>>> Kyle Shannon
>>>> Physical Science Technician
>>>> RMRS Fire Sciences Lab
>>>> Fire, Fuels&  Smoke - RWU 4405
>>>> 5775 Highway 10 W.
>>>> Missoula, MT 59808
>>>> (406)829-6954
>>>> kshannon@fs.fed.us
>>>> # ============================
>>>>
>>>>
>>>  _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/65d6a2e0/attachment-0001.html
From Maximilian.Buchheit at NRCan-RNCan.gc.ca  Thu Oct 28 15:39:51 2010
From: Maximilian.Buchheit at NRCan-RNCan.gc.ca (Buchheit, Maximilian)
Date: Thu Oct 28 15:39:55 2010
Subject: [gdal-dev] gdalwarp with the -tps option -performance issues
Message-ID: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C1@S0-OTT-X2.nrn.nrcan.gc.ca>

When you use "gdalwarp -tps" what is the practical limit to the number of GCPs useable in the thin plate spline algorithm before the program bogs down.
I would like to use it  with  over 1600 spline knots spread over the image.
Currently on a X86_64 smp linux system with 4 cores and 8 cpus and "-multi" turned on,  1600 knots takes about 30 min.  As far as I can gather from experimenting with the  # of knots, most of this time is spent with either solving for the spline weights or generating the spline kernel.
 
Who can shed some light on what is going on under the hood here?  Is the spline kernel being calculated on-the-fly for every pixel in the image? What method of solving for the weights is being used, and can it handle very large sparse matrices?
 
Thanks,
   Max
 
------------------
Max Buchheit
Canada Centre for Remote Sensing / Centre Canadien de T?l?d?tection
Earth Sciences Sector / Secteur des Sciences de la Terre
Natural Resources Canada / Ressources Naturelles Canada
4th Floor, 588 Booth Street /  4-ieme ?tage, 588 rue Booth
Ottawa, Ontario, K1A 0Y7
Phone: (613) 943-7444/ Email: mbuchhei at nrcan.gc.ca

 

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/9599d27c/attachment.html
From Maximilian.Buchheit at NRCan-RNCan.gc.ca  Thu Oct 28 15:41:30 2010
From: Maximilian.Buchheit at NRCan-RNCan.gc.ca (Buchheit, Maximilian)
Date: Thu Oct 28 15:41:33 2010
Subject: [gdal-dev] gdal & SMP  linux
Message-ID: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C4@S0-OTT-X2.nrn.nrcan.gc.ca>

Is any of the GDAL code SMP aware (in linux)?
 

------------------
Max Buchheit
Canada Centre for Remote Sensing / Centre Canadien de T?l?d?tection
Earth Sciences Sector / Secteur des Sciences de la Terre
Natural Resources Canada / Ressources Naturelles Canada
4th Floor, 588 Booth Street /  4-ieme ?tage, 588 rue Booth
Ottawa, Ontario, K1A 0Y7
Phone: (613) 943-7444/ Email: mbuchhei at nrcan.gc.ca

 

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/33a545a8/attachment.html
From Maximilian.Buchheit at NRCan-RNCan.gc.ca  Thu Oct 28 15:42:09 2010
From: Maximilian.Buchheit at NRCan-RNCan.gc.ca (Buchheit, Maximilian)
Date: Thu Oct 28 15:42:12 2010
Subject: [gdal-dev] gdal and MMAP IO
Message-ID: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C5@S0-OTT-X2.nrn.nrcan.gc.ca>

Does GDAL utilize MMAP calls?  Is this something you would consider as an enhancement?
 

------------------
Max Buchheit
Canada Centre for Remote Sensing / Centre Canadien de T?l?d?tection
Earth Sciences Sector / Secteur des Sciences de la Terre
Natural Resources Canada / Ressources Naturelles Canada
4th Floor, 588 Booth Street /  4-ieme ?tage, 588 rue Booth
Ottawa, Ontario, K1A 0Y7
Phone: (613) 943-7444/ Email: mbuchhei at nrcan.gc.ca

 

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101028/dea837bb/attachment.html
From even.rouault at mines-paris.org  Thu Oct 28 15:50:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 15:49:37 2010
Subject: [gdal-dev] gdal & SMP  linux
In-Reply-To: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C4@S0-OTT-X2.nrn.nrcan.gc.ca>
References: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C4@S0-OTT-X2.nrn.nrcan.gc.ca>
Message-ID: <201010282150.21210.even.rouault@mines-paris.org>

Le jeudi 28 octobre 2010 21:41:30, Buchheit, Maximilian a ?crit :
> Is any of the GDAL code SMP aware (in linux)?

You mean multithreaded ? or multi-thread safe ?

* multithreaded : very little currently. To my knowledge only the warping code 
that can use 2 threads : one for I/O, another one for computation

* multi-thread safe : generally yes, provided many things how you use the 
API... gdal.org documentation and Trac wiki are your friends there

> 
> 
> ------------------
> Max Buchheit
> Canada Centre for Remote Sensing / Centre Canadien de T?l?d?tection
> Earth Sciences Sector / Secteur des Sciences de la Terre
> Natural Resources Canada / Ressources Naturelles Canada
> 4th Floor, 588 Booth Street /  4-ieme ?tage, 588 rue Booth
> Ottawa, Ontario, K1A 0Y7
> Phone: (613) 943-7444/ Email: mbuchhei at nrcan.gc.ca
From even.rouault at mines-paris.org  Thu Oct 28 15:57:29 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 15:56:45 2010
Subject: [gdal-dev] gdalwarp with the -tps option -performance issues
In-Reply-To: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C1@S0-OTT-X2.nrn.nrcan.gc.ca>
References: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C1@S0-OTT-X2.nrn.nrcan.gc.ca>
Message-ID: <201010282157.29680.even.rouault@mines-paris.org>

Le jeudi 28 octobre 2010 21:39:51, Buchheit, Maximilian a ?crit :
> When you use "gdalwarp -tps" what is the practical limit to the number of
> GCPs useable in the thin plate spline algorithm before the program bogs
> down. I would like to use it  with  over 1600 spline knots spread over the
> image. Currently on a X86_64 smp linux system with 4 cores and 8 cpus and
> "-multi" turned on,  1600 knots takes about 30 min.  As far as I can
> gather from experimenting with the  # of knots, most of this time is spent
> with either solving for the spline weights or generating the spline
> kernel.

-multi can use currently only 2 threads : one for I/O, another one for 
computation. So more than 2 cores won't help.

> 
> Who can shed some light on what is going on under the hood here?  Is the
> spline kernel being calculated on-the-fly for every pixel in the image?
> What method of solving for the weights is being used, and can it handle
> very large sparse matrices?

Code lies in 
http://trac.osgeo.org/gdal/browser/trunk/gdal/alg/thinplatespline.cpp

As far as I know, only the get_point() method is called when reprojection is 
needed so I think it is linear in the number of nodes. Cannot help more on 
that. Perhaps retry with less nodes

> 
> Thanks,
>    Max
> 
> ------------------
> Max Buchheit
> Canada Centre for Remote Sensing / Centre Canadien de T?l?d?tection
> Earth Sciences Sector / Secteur des Sciences de la Terre
> Natural Resources Canada / Ressources Naturelles Canada
> 4th Floor, 588 Booth Street /  4-ieme ?tage, 588 rue Booth
> Ottawa, Ontario, K1A 0Y7
> Phone: (613) 943-7444/ Email: mbuchhei at nrcan.gc.ca
From even.rouault at mines-paris.org  Thu Oct 28 15:59:07 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Oct 28 15:58:22 2010
Subject: [gdal-dev] gdal and MMAP IO
In-Reply-To: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C5@S0-OTT-X2.nrn.nrcan.gc.ca>
References: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C5@S0-OTT-X2.nrn.nrcan.gc.ca>
Message-ID: <201010282159.07131.even.rouault@mines-paris.org>

Le jeudi 28 octobre 2010 21:42:09, Buchheit, Maximilian a ?crit :
> Does GDAL utilize MMAP calls?

No

> Is this something you would consider as an
> enhancement?
> 

Hum I dunno. I guess you would have to show that it brings real enhancements, 
and not break portability to OS that don't support mmap.

> 
> ------------------
> Max Buchheit
> Canada Centre for Remote Sensing / Centre Canadien de T?l?d?tection
> Earth Sciences Sector / Secteur des Sciences de la Terre
> Natural Resources Canada / Ressources Naturelles Canada
> 4th Floor, 588 Booth Street /  4-ieme ?tage, 588 rue Booth
> Ottawa, Ontario, K1A 0Y7
> Phone: (613) 943-7444/ Email: mbuchhei at nrcan.gc.ca
From warmerdam at pobox.com  Thu Oct 28 16:31:32 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Oct 28 16:31:37 2010
Subject: [gdal-dev] gdal and MMAP IO
In-Reply-To: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C5@S0-OTT-X2.nrn.nrcan.gc.ca>
References: <AC5C8D744B56174DB5AE2F3D1A18623F030D08C5@S0-OTT-X2.nrn.nrcan.gc.ca>
Message-ID: <4CC9DDA4.2000203@pobox.com>

Buchheit, Maximilian wrote:
> Does GDAL utilize MMAP calls?  Is this something you would consider as 
> an enhancement?

Max,

I am interested in adding mmap support the VSI*L IO API and seeing where
it could be used.  Libtiff can utilize memory mapping, and in some cases
in the past I've seen noteworthy improvements in performance with it.
I haven't used it for the last 11 years as it was difficult to use large
files on 32bit systems, but with 64bit being so common that is less of
an issue than it was.

I might be quite particular about how memory mapping should be implemented.
So you might not want to invest huge effort before discussing a proposed
approach.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jukka.rahkonen at mmmtike.fi  Thu Oct 28 18:37:39 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Oct 28 18:37:53 2010
Subject: [gdal-dev] Re: Coding for appending to a database in OGR
References: <4CC93AC1.4010301@york.ac.uk>
Message-ID: <loom.20101029T003719-54@post.gmane.org>

Peter J Halls <P.Halls <at> york.ac.uk> writes:

> 
> Dear Team,
> 
>      I've reviewed the change log for release 8 so far and do not think that 
> this question is version specific.
> 
>      I'm coding to support an incremental process for loading a large spatial 
> database from a set of distribution objects.  I have noted that my present 
> approach results in the OGR_FID column values restarting at 1 for each append. 
> This is clearly an error!  However, there does not appear to be a method for 
> initialising the 'nextfidtowrite' value in the API.  What is the best strategy 
> to adopt?
>

Try to study how people have solved this problem with WFS-T servers. With WFS
insert case system must be able to append to a tabel and to generate a valid new
fid and also send it back to WFS client after successful insert.

I know that Geoserver default behaviour is to read the max value of primary key
column (what is PK is queried from the database when the new layer is added into
service or then user can show it in a bit peculiar but documented way). Insert
is then done by using fid=(max+1). Of course primary key must be numeric and it
can not be a combined key. This is not reliable in production systems with other
users doing inserts as well because max+1 may not be valid any more when it is
used. And even Geoserver can select the same max value several times if insert
takes a long time. However normally it works OK because primary key constraint
prevents insert with an already used fid and it leads to WFS error and client
can make a new trial.

Better way is to tell Geoserver the name of the Oracle sequence where to select
the nextval and use that as a fid. This works even with concurrent Geoserver
inserts because each insert candidate has for sure an unique fid and it does not
matter which one gets inserted first. However, there will be troubles if some
other system is also making inserts and does not take the fids from the same
sequence. It is possible that some bigger number is already used in the database
but sequence goes behind. Inevidently there will be a collision when sequence
reaches this used number but it will just lead to one failing insert, WFS error,
new trial with next nextval, and finally success.

In theory the right way to do with Oracle is to make a trigger that reads new
fid value from a sequence on inserts. The trouble is that the value of the new
fid is known for sure only after an successful insert. With the Geoserver logic
trigger can not be used. Geoserver thinks "I took an unique value from sequence,
I tried to do an insert by using that as a new fid, database accepted insert and
therefore the new fid in the database must be the value selected from the
sequence and I can send it back to the client". Insert trigger can not be used
because Geoserver wants to know the fid candidate before insert. If there were
an insert trigger it would select again nextval from the sequence and the stored
fid would not be the same than Geoserver believes. I can guarantee that this
lead us to some funny situations before we noticed it and managed to tell the
db-admins that we just cannot use our standard trigger-sequence system with
WFS-T tables.

Inserts into PostGIS are easier because fid can be in a "serial" column and it
handles unique fids automatically. I do not know how Geoserver is getting back
the value of the new fid from PostGIS.

Ogr does not need to get real fids back like WFS-T and if you just want to get
the job done right with Oracle, create a sequence and make a trigger on OGR_FID
column and let the database do the rest. Ogr can send whatever it wants but
Oracle makes the final decision. But that is not the right way to do it with a
general tool like ogr2ogr because this sequence-trigger system is tricky to make
and in well managed systems ogr user does not even have enough rights for that.
I would suggest an approach of "select max OGR_FID and start appending with
fid=(max+1)".

With PostGIS it could be done rather automatic. Ogr might create the OGR_FID
column as serial type and then just do inserts without fids. But what if there
is an error and ogr wants to print it into a log or somewhere? I do not know.

-Jukka Rahkonen-


From P.Halls at york.ac.uk  Fri Oct 29 04:58:55 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Fri Oct 29 04:59:00 2010
Subject: [gdal-dev] Two OGR Driver questions: specifically OCI but really a
	general question
In-Reply-To: <loom.20101029T003719-54@post.gmane.org>
References: <4CC93AC1.4010301@york.ac.uk>
	<loom.20101029T003719-54@post.gmane.org>
Message-ID: <4CCA8CCF.1060001@york.ac.uk>

Dear Team,

    would someone please explain to me the purpose of the UnboundCreateFeature 
method?  Within the OCI driver it does not appear that this method can ever get 
invoked: is it superseded by the BoundCreateFeature method?

    Secondly, the OCI driver BoundCreateFeature method appears to write the FID 
value into the feature data structure as well as write it out into the SQL to 
perform the action; the UnboundCreateFeature method does not.  Is this a 
requirement?

Thanks and best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From neil.jakeman at findmaps.co.uk  Fri Oct 29 05:59:57 2010
From: neil.jakeman at findmaps.co.uk (NeilJ)
Date: Fri Oct 29 05:59:58 2010
Subject: [gdal-dev] Worldfile creation inconsistency with gdal_translate
Message-ID: <1288346397246-5685831.post@n2.nabble.com>




Please can someone explain to me why I get the message "Waring 6: Driver
JPEG does not support WORDFILE creation option" when using gdal_translate on
a windows command line (FW Tools 2.4.7), when running:
gdal_translate -of JPEG -co WORDLFILE=YES -a_srs EPSG:27700 HP40SE.tif
F:\geo_streetview\jpg\HP40SE.jpg

The tif in question has the following details:

Driver: GTiff/GeoTIFF
Files: HP40SE.tif
Size is 5000, 5000
Coordinate System is:
PROJCS["unnamed",
    GEOGCS[,
        DATUM["unknown",
            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","27700"]]
Origin = (445000.000000000000000,1205000.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=DEFLATE
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  445000.000, 1205000.000)
Lower Left  (  445000.000, 1200000.000)
Upper Right (  450000.000, 1205000.000)
Lower Right (  450000.000, 1200000.000)
Center      (  447500.000, 1202500.000)
Band 1 Block=5000x1 Type=Byte, ColorInterp=Red Band 2 Block=5000x1
Type=Byte, ColorInterp=Green Band 3 Block=5000x1 Type=Byte, ColorInterp=Blue

I am very confused by the worldfile=yes option as I have used it before on
other conversions without a problem.

Any advice on when and why this does/doesn't work?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Worldfile-creation-inconsistency-with-gdal-translate-tp5685831p5685831.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mdsumner at gmail.com  Fri Oct 29 06:13:47 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri Oct 29 06:13:49 2010
Subject: [gdal-dev] Worldfile creation inconsistency with gdal_translate
In-Reply-To: <1288346397246-5685831.post@n2.nabble.com>
References: <1288346397246-5685831.post@n2.nabble.com>
Message-ID: <AANLkTimcBEpzxs5nD5BCTDaoRzk9Om6p=c-OE2o9--wV@mail.gmail.com>

Try spelling the option correctly (both in the argument and in your report):

gdal_translate -of JPEG -co WORLDFILE=YES -a_srs EPSG:27700 HP40SE.tif
F:\geo_streetview\jpg\HP40SE.jpg

HTH

On Fri, Oct 29, 2010 at 8:59 PM, NeilJ <neil.jakeman@findmaps.co.uk> wrote:
>
>
>
> Please can someone explain to me why I get the message "Waring 6: Driver
> JPEG does not support WORDFILE creation option" when using gdal_translate on
> a windows command line (FW Tools 2.4.7), when running:
> gdal_translate -of JPEG -co WORDLFILE=YES -a_srs EPSG:27700 HP40SE.tif
> F:\geo_streetview\jpg\HP40SE.jpg
>
> The tif in question has the following details:
>
> Driver: GTiff/GeoTIFF
> Files: HP40SE.tif
> Size is 5000, 5000
> Coordinate System is:
> PROJCS["unnamed",
> ? ?GEOGCS[,
> ? ? ? ?DATUM["unknown",
> ? ? ? ? ? ?SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433]],
> ? ?UNIT["metre",1,
> ? ? ? ?AUTHORITY["EPSG","9001"]],
> ? ?AUTHORITY["EPSG","27700"]]
> Origin = (445000.000000000000000,1205000.000000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Metadata:
> ?AREA_OR_POINT=Area
> Image Structure Metadata:
> ?COMPRESSION=DEFLATE
> ?INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left ?( ?445000.000, 1205000.000)
> Lower Left ?( ?445000.000, 1200000.000)
> Upper Right ( ?450000.000, 1205000.000)
> Lower Right ( ?450000.000, 1200000.000)
> Center ? ? ?( ?447500.000, 1202500.000)
> Band 1 Block=5000x1 Type=Byte, ColorInterp=Red Band 2 Block=5000x1
> Type=Byte, ColorInterp=Green Band 3 Block=5000x1 Type=Byte, ColorInterp=Blue
>
> I am very confused by the worldfile=yes option as I have used it before on
> other conversions without a problem.
>
> Any advice on when and why this does/doesn't work?
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Worldfile-creation-inconsistency-with-gdal-translate-tp5685831p5685831.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Michael Sumner
Institute for Marine and Antarctic Studies, University of Tasmania
Hobart, Australia
e-mail: mdsumner@gmail.com
From jorge.arevalo at deimos-space.com  Fri Oct 29 06:36:54 2010
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Oct 29 06:37:19 2010
Subject: [gdal-dev] _gdal_array not found
Message-ID: <AANLkTinY3QMiUGzCxW0-MVa0=FetJW9kCvUmT2NZ-RjU@mail.gmail.com>

Hi,

I'm using Python 2.7, with GDAL 1.7.2 bindings. Piece of code:

(...)
dst_ds = raster.Create( tiff, tiff_width, tiff_height, 4, gdal.GDT_Byte)
(...)
zeros = numpy.zeros( (tiff_height, tiff_width), numpy.uint8 )
dst_ds.GetRasterBand(1).WriteArray( zeros )
(...)

In the "WriteArray" line, I get this exception:

File "myFile.py", line 389, in createBlankRasters
    dst_ds.GetRasterBand(1).WriteArray( zeros )
  File "/usr/local/lib/python2.7/site-packages/osgeo/gdal.py", line
898, in WriteArray
    import gdalnumeric
  File "/usr/local/lib/python2.7/site-packages/osgeo/gdalnumeric.py",
line 1, in <module>
    from gdal_array import *
  File "/usr/local/lib/python2.7/site-packages/osgeo/gdal_array.py",
line 25, in <module>
    _gdal_array = swig_import_helper()
  File "/usr/local/lib/python2.7/site-packages/osgeo/gdal_array.py",
line 17, in swig_import_helper
    import _gdal_array
ImportError: No module named _gdal_array

Ok, the file _gdal_array.py doesn't exist. But this code works with
Python 2.4 and GDAL 1.6.0 in the same machine (Suse Enterprise 10.2
x86_64).

Comparing the contents of the
/usr/local/lib/python2.7/site-packages/osgeo/ directory with the
contents of the equivalent directory of the other version of Python
(/usr/lib/python2.4/site-packages/GDAL-1.6.0-py2.4-linux-x86_64.egg/osgeo/),
I find several files missing in the newer one (2.7). Files like
"_gdal_array.py", "_gdal_array.pyc", "_gdalconst.py",
"_gdal_array.so", "_gdalconst.so", "_gdal.py", "_gdal.pyc",
"_gdal.so", and so on. All the missing files starting with "_"

The newer installation (2.7) was created from sources, building python
2.7 and GDAL 1.7.2 (with "configure --with-python && make && make
install"). The previous installation (2.4) was created from package
manager (Suse YaST).

I've looking for the missing files in another directories, but they
don't exist. I suppose they weren't compiled, but why? If they're no
longer neded with GDAL 1.7.2, why is python 2.7 asking for them? I
need the code to work in this new version. Any clues?

Many thanks in advance,

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
From neil.jakeman at findmaps.co.uk  Fri Oct 29 07:02:47 2010
From: neil.jakeman at findmaps.co.uk (NeilJ)
Date: Fri Oct 29 07:02:53 2010
Subject: [gdal-dev] RE: Worldfile creation inconsistency with gdal_translate
In-Reply-To: <AANLkTimcBEpzxs5nD5BCTDaoRzk9Om6p=c-OE2o9--wV@mail.gmail.com>
References: <1288346397246-5685831.post@n2.nabble.com>
	<AANLkTimcBEpzxs5nD5BCTDaoRzk9Om6p=c-OE2o9--wV@mail.gmail.com>
Message-ID: <00de01cb7758$a0f24350$252613ac@find.local>


How embarrassing.

 

Thanks for your keen eyed assistance

 

  _____  

From: Michael Sumner-2 [via OSGeo.org]
[mailto:ml-node+5685852-1135641362-298918@n2.nabble.com] 
Sent: 29 October 2010 11:14
To: NeilJ
Subject: Re: Worldfile creation inconsistency with gdal_translate

 

Try spelling the option correctly (both in the argument and in your report):


gdal_translate -of JPEG -co WORLDFILE=YES -a_srs EPSG:27700 HP40SE.tif 
F:\geo_streetview\jpg\HP40SE.jpg 

HTH 

On Fri, Oct 29, 2010 at 8:59 PM, NeilJ <[hidden email]> wrote: 


> 
> 
> 
> Please can someone explain to me why I get the message "Waring 6: Driver 
> JPEG does not support WORDFILE creation option" when using gdal_translate
on 
> a windows command line (FW Tools 2.4.7), when running: 
> gdal_translate -of JPEG -co WORDLFILE=YES -a_srs EPSG:27700 HP40SE.tif 
> F:\geo_streetview\jpg\HP40SE.jpg 
> 
> The tif in question has the following details: 
> 
> Driver: GTiff/GeoTIFF 
> Files: HP40SE.tif 
> Size is 5000, 5000 
> Coordinate System is: 
> PROJCS["unnamed", 
>    GEOGCS[, 
>        DATUM["unknown", 
>            SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],

>        PRIMEM["Greenwich",0], 
>        UNIT["degree",0.0174532925199433]], 
>    UNIT["metre",1, 
>        AUTHORITY["EPSG","9001"]], 
>    AUTHORITY["EPSG","27700"]] 
> Origin = (445000.000000000000000,1205000.000000000000000) 
> Pixel Size = (1.000000000000000,-1.000000000000000) 
> Metadata: 
>  AREA_OR_POINT=Area 
> Image Structure Metadata: 
>  COMPRESSION=DEFLATE 
>  INTERLEAVE=PIXEL 
> Corner Coordinates: 
> Upper Left  (  445000.000, 1205000.000) 
> Lower Left  (  445000.000, 1200000.000) 
> Upper Right (  450000.000, 1205000.000) 
> Lower Right (  450000.000, 1200000.000) 
> Center      (  447500.000, 1202500.000) 
> Band 1 Block=5000x1 Type=Byte, ColorInterp=Red Band 2 Block=5000x1 
> Type=Byte, ColorInterp=Green Band 3 Block=5000x1 Type=Byte,
ColorInterp=Blue 
> 
> I am very confused by the worldfile=yes option as I have used it before on

> other conversions without a problem. 
> 
> Any advice on when and why this does/doesn't work? 
> -- 
> View this message in context:
http://osgeo-org.1803224.n2.nabble.com/Worldfile-creation-inconsistency-with
-gdal-translate-tp5685831p5685831.html
<http://osgeo-org.1803224.n2.nabble.com/Worldfile-creation-inconsistency-wit
h-gdal-translate-tp5685831p5685831.html?by-user=t> 
> Sent from the GDAL - Dev mailing list archive at Nabble.com. 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 




-- 
Michael Sumner 
Institute for Marine and Antarctic Studies, University of Tasmania 
Hobart, Australia 
e-mail: [hidden email] 
_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev



  _____  

View message @
http://osgeo-org.1803224.n2.nabble.com/Worldfile-creation-inconsistency-with
-gdal-translate-tp5685831p5685852.html 
To unsubscribe from Worldfile creation inconsistency with gdal_translate,
click
<http://osgeo-org.1803224.n2.nabble.com/template/TplServlet.jtp?tpl=unsubscr
ibe_by_code&node=5685831&code=bmVpbC5qYWtlbWFuQGZpbmRtYXBzLmNvLnVrfDU2ODU4Mz
F8LTc3MzM2MTY0MQ==>  here. 

 


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Worldfile-creation-inconsistency-with-gdal-translate-tp5685831p5686012.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101029/3878ea58/attachment.html
From even.rouault at mines-paris.org  Fri Oct 29 07:08:46 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Oct 29 07:08:55 2010
Subject: [gdal-dev] _gdal_array not found
In-Reply-To: <AANLkTinY3QMiUGzCxW0-MVa0=FetJW9kCvUmT2NZ-RjU@mail.gmail.com>
References: <AANLkTinY3QMiUGzCxW0-MVa0=FetJW9kCvUmT2NZ-RjU@mail.gmail.com>
Message-ID: <1288350526.4ccaab3ea5528@webmail.free.fr>

Jorge,

WriteArray() needs the gdal-numpy module to be built. So ensure you have numpy
and numpy-devel packages installed (or whatever they are named on your distro)
when rebuilding the GDAL python bindings. I guess you lack the numpy-devel
package that is necessary for building and probably not installed if you've just
installed the packaged version.

> Hi,
>
> I'm using Python 2.7, with GDAL 1.7.2 bindings. Piece of code:
>
> (...)
> dst_ds = raster.Create( tiff, tiff_width, tiff_height, 4, gdal.GDT_Byte)
> (...)
> zeros = numpy.zeros( (tiff_height, tiff_width), numpy.uint8 )
> dst_ds.GetRasterBand(1).WriteArray( zeros )
> (...)
>
> In the "WriteArray" line, I get this exception:
>
> File "myFile.py", line 389, in createBlankRasters
>     dst_ds.GetRasterBand(1).WriteArray( zeros )
>   File "/usr/local/lib/python2.7/site-packages/osgeo/gdal.py", line
> 898, in WriteArray
>     import gdalnumeric
>   File "/usr/local/lib/python2.7/site-packages/osgeo/gdalnumeric.py",
> line 1, in <module>
>     from gdal_array import *
>   File "/usr/local/lib/python2.7/site-packages/osgeo/gdal_array.py",
> line 25, in <module>
>     _gdal_array = swig_import_helper()
>   File "/usr/local/lib/python2.7/site-packages/osgeo/gdal_array.py",
> line 17, in swig_import_helper
>     import _gdal_array
> ImportError: No module named _gdal_array
>
> Ok, the file _gdal_array.py doesn't exist. But this code works with
> Python 2.4 and GDAL 1.6.0 in the same machine (Suse Enterprise 10.2
> x86_64).
>
> Comparing the contents of the
> /usr/local/lib/python2.7/site-packages/osgeo/ directory with the
> contents of the equivalent directory of the other version of Python
> (/usr/lib/python2.4/site-packages/GDAL-1.6.0-py2.4-linux-x86_64.egg/osgeo/),
> I find several files missing in the newer one (2.7). Files like
> "_gdal_array.py", "_gdal_array.pyc", "_gdalconst.py",
> "_gdal_array.so", "_gdalconst.so", "_gdal.py", "_gdal.pyc",
> "_gdal.so", and so on. All the missing files starting with "_"
>
> The newer installation (2.7) was created from sources, building python
> 2.7 and GDAL 1.7.2 (with "configure --with-python && make && make
> install"). The previous installation (2.4) was created from package
> manager (Suse YaST).
>
> I've looking for the missing files in another directories, but they
> don't exist. I suppose they weren't compiled, but why? If they're no
> longer neded with GDAL 1.7.2, why is python 2.7 asking for them? I
> need the code to work in this new version. Any clues?
>
> Many thanks in advance,
>
> --
> Jorge Ar?valo
> Internet & Mobilty Division, DEIMOS
> jorge.arevalo@deimos-space.com
> http://mobility.grupodeimos.com/
> http://gis4free.wordpress.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From P.Halls at york.ac.uk  Fri Oct 29 07:09:08 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Fri Oct 29 07:09:30 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <4CC99075.4050100@pobox.com>
References: <4CC93AC1.4010301@york.ac.uk>
	<1288260586.4cc94bea2cb16@webmail.free.fr>
	<4CC9898C.3050204@york.ac.uk> <4CC99075.4050100@pobox.com>
Message-ID: <4CCAAB54.4060104@york.ac.uk>

Frank and team,

    having reviewed the code again and the comments made by others, for which 
thanks, it seems to me that there is a possible solution that might resolve all 
the concerns.  I've asked my DBA for performance expectation comments, but have 
not yet heard back from him.

    Instead of trying to track the current FID and where the caller has not 
specified a value  'SELECT max(OGR_FID) + 1 FROM <tablename>' could be used 
instead.  This will always return the maximum value plus one and consigns the 
work to Oracle.  This will be 'safe' for multiple updaters and saves the 
overhead / risk of enquiring the value and updating it in the code.

    However, one side effect of this is that the value is not readily known to 
OGR.  As this is only when writing a new feature to the database, does this 
matter?  Is there any reliance on the FID within a newly created / written 
feature having the destination FID value on return - I suspect that, in the 
majority of instances, the next call is to destroy the feature handle?  As this 
would be a change in behaviour, at least it will be if I am correct that only 
the BoundCreateFeature method is actually used, then this may be significant.

How do others regard this?  Is it a big issue or a non-issue?

Best wishes,

Peter

Frank Warmerdam wrote:
> Peter J Halls wrote:
>> Even and team,
>>
>>    following the hint from Even's post below, I have been 
>> experimenting with OGR_F_SetFID to get the FID for appends to 
>> increment beyond the existing value, rather than always to start at 
>> 1.  I'm testing against the OCI driver and am not (yet) using 1.8.
>>
>>    I've found that there appears to be no way to 'reset' the starting 
>> FID value used by the driver for output.  I can certainly set the FID 
>> to an arbitrary value for a specific record, but the internal counter 
>> does not appear to be reset-able.  This means that I must manage the 
>> FID values externally to OGR when appending to an existing dataset in 
>> order to avoid new records being added with OGR_FID values restarting 
>> from 1.
>>
>>    Is this what is expected / intended?
> 
> Peter,
> 
> This is a flaw in the OCI driver.  FIDs are supposed to be unique, and
> if the CreateFeature() method is assigning one, it should ensure it is
> unique.
> 
> I have reviewed the trunk code, and this seems to be a problem with it too.
> 
> My feeling is that the first time iNextShapeId is used in the lifetime of
> an OGROCITableLayer we ought to do a query on the corresponding column
> to find it's max, and use that +1 as iNextShapeId.  This would generally
> avoid conflicts, and would not be as expensive as querying for each
> create feature.
> 
> The downside to this approach is that it assumes no one else is adding
> features to the table during the lifetime of the OGROCITableLayer object.
> This is usually safe, but not always.  This is one example of how the
> OGR RDBMS drivers are often not *really* prepared to live cleanly in
> a multi-user / multi-application environment.  It could be "done right"
> but the cost for bulk loads might be quite painful.  Fast bulk loads
> was the original reason for existence of the OCI driver.
> 
> If you would like to prepare code for that it would be great.  If not,
> please create a ticket for the issue and hopefully I'll have a chance to
> do it.
> 
> Best regards,

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From jorge.arevalo at deimos-space.com  Fri Oct 29 07:20:19 2010
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Oct 29 07:20:43 2010
Subject: [gdal-dev] _gdal_array not found
In-Reply-To: <1288350526.4ccaab3ea5528@webmail.free.fr>
References: <AANLkTinY3QMiUGzCxW0-MVa0=FetJW9kCvUmT2NZ-RjU@mail.gmail.com>
	<1288350526.4ccaab3ea5528@webmail.free.fr>
Message-ID: <AANLkTin=LAJuvUvJE=NrGm6ivhekPNK3BBhX0eGXNLbq@mail.gmail.com>

2010/10/29 Even Rouault <even.rouault@mines-paris.org>:
> Jorge,
>
> WriteArray() needs the gdal-numpy module to be built. So ensure you have numpy
> and numpy-devel packages installed (or whatever they are named on your distro)
> when rebuilding the GDAL python bindings. I guess you lack the numpy-devel
> package that is necessary for building and probably not installed if you've just
> installed the packaged version.
>

Hi Even,

Thanks for the fast responde. That sounds very logic. I built numpy
from sources too (numpy 1.5.0) so, what should I do if I want the
development packages? I did a

python setup.py build --fcompiler=gnu95
python setup.py install

Isn't it enough?

BTW, I found that
http://download.opensuse.org/repositories/home:/ashigabou/SLE_10/x86_64/.
I think I'll try it with these packages...


>> Hi,
>>
>> I'm using Python 2.7, with GDAL 1.7.2 bindings. Piece of code:
>>
>> (...)
>> dst_ds = raster.Create( tiff, tiff_width, tiff_height, 4, gdal.GDT_Byte)
>> (...)
>> zeros = numpy.zeros( (tiff_height, tiff_width), numpy.uint8 )
>> dst_ds.GetRasterBand(1).WriteArray( zeros )
>> (...)
>>
>> In the "WriteArray" line, I get this exception:
>>
>> File "myFile.py", line 389, in createBlankRasters
>> ? ? dst_ds.GetRasterBand(1).WriteArray( zeros )
>> ? File "/usr/local/lib/python2.7/site-packages/osgeo/gdal.py", line
>> 898, in WriteArray
>> ? ? import gdalnumeric
>> ? File "/usr/local/lib/python2.7/site-packages/osgeo/gdalnumeric.py",
>> line 1, in <module>
>> ? ? from gdal_array import *
>> ? File "/usr/local/lib/python2.7/site-packages/osgeo/gdal_array.py",
>> line 25, in <module>
>> ? ? _gdal_array = swig_import_helper()
>> ? File "/usr/local/lib/python2.7/site-packages/osgeo/gdal_array.py",
>> line 17, in swig_import_helper
>> ? ? import _gdal_array
>> ImportError: No module named _gdal_array
>>
>> Ok, the file _gdal_array.py doesn't exist. But this code works with
>> Python 2.4 and GDAL 1.6.0 in the same machine (Suse Enterprise 10.2
>> x86_64).
>>
>> Comparing the contents of the
>> /usr/local/lib/python2.7/site-packages/osgeo/ directory with the
>> contents of the equivalent directory of the other version of Python
>> (/usr/lib/python2.4/site-packages/GDAL-1.6.0-py2.4-linux-x86_64.egg/osgeo/),
>> I find several files missing in the newer one (2.7). Files like
>> "_gdal_array.py", "_gdal_array.pyc", "_gdalconst.py",
>> "_gdal_array.so", "_gdalconst.so", "_gdal.py", "_gdal.pyc",
>> "_gdal.so", and so on. All the missing files starting with "_"
>>
>> The newer installation (2.7) was created from sources, building python
>> 2.7 and GDAL 1.7.2 (with "configure --with-python && make && make
>> install"). The previous installation (2.4) was created from package
>> manager (Suse YaST).
>>
>> I've looking for the missing files in another directories, but they
>> don't exist. I suppose they weren't compiled, but why? If they're no
>> longer neded with GDAL 1.7.2, why is python 2.7 asking for them? I
>> need the code to work in this new version. Any clues?
>>
>> Many thanks in advance,
>>
>> --
>> Jorge Ar?valo
>> Internet & Mobilty Division, DEIMOS
>> jorge.arevalo@deimos-space.com
>> http://mobility.grupodeimos.com/
>> http://gis4free.wordpress.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>



-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
From jorge.arevalo at deimos-space.com  Fri Oct 29 07:46:09 2010
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Oct 29 07:46:33 2010
Subject: [gdal-dev] _gdal_array not found
In-Reply-To: <AANLkTin=LAJuvUvJE=NrGm6ivhekPNK3BBhX0eGXNLbq@mail.gmail.com>
References: <AANLkTinY3QMiUGzCxW0-MVa0=FetJW9kCvUmT2NZ-RjU@mail.gmail.com>
	<1288350526.4ccaab3ea5528@webmail.free.fr>
	<AANLkTin=LAJuvUvJE=NrGm6ivhekPNK3BBhX0eGXNLbq@mail.gmail.com>
Message-ID: <AANLkTinFaUX32V5PCTG-+2MzUHsbPwUVr74RkhXEsd_M@mail.gmail.com>

2010/10/29 Jorge Ar?valo <jorge.arevalo@deimos-space.com>:
> 2010/10/29 Even Rouault <even.rouault@mines-paris.org>:
>> Jorge,
>>
>> WriteArray() needs the gdal-numpy module to be built. So ensure you have numpy
>> and numpy-devel packages installed (or whatever they are named on your distro)
>> when rebuilding the GDAL python bindings. I guess you lack the numpy-devel
>> package that is necessary for building and probably not installed if you've just
>> installed the packaged version.
>>
>
> Hi Even,
>
> Thanks for the fast responde. That sounds very logic. I built numpy
> from sources too (numpy 1.5.0) so, what should I do if I want the
> development packages? I did a
>
> python setup.py build --fcompiler=gnu95
> python setup.py install
>
> Isn't it enough?
>
> BTW, I found that
> http://download.opensuse.org/repositories/home:/ashigabou/SLE_10/x86_64/.
> I think I'll try it with these packages...
>
>

Update: these packages, as I supposed, were compiled for the default
suse 10.2 python installation (/usr/lib64/python2.4), just the one
that works. So, I can't use them :-(


>>> Hi,
>>>
>>> I'm using Python 2.7, with GDAL 1.7.2 bindings. Piece of code:
>>>
>>> (...)
>>> dst_ds = raster.Create( tiff, tiff_width, tiff_height, 4, gdal.GDT_Byte)
>>> (...)
>>> zeros = numpy.zeros( (tiff_height, tiff_width), numpy.uint8 )
>>> dst_ds.GetRasterBand(1).WriteArray( zeros )
>>> (...)
>>>
>>> In the "WriteArray" line, I get this exception:
>>>
>>> File "myFile.py", line 389, in createBlankRasters
>>> ? ? dst_ds.GetRasterBand(1).WriteArray( zeros )
>>> ? File "/usr/local/lib/python2.7/site-packages/osgeo/gdal.py", line
>>> 898, in WriteArray
>>> ? ? import gdalnumeric
>>> ? File "/usr/local/lib/python2.7/site-packages/osgeo/gdalnumeric.py",
>>> line 1, in <module>
>>> ? ? from gdal_array import *
>>> ? File "/usr/local/lib/python2.7/site-packages/osgeo/gdal_array.py",
>>> line 25, in <module>
>>> ? ? _gdal_array = swig_import_helper()
>>> ? File "/usr/local/lib/python2.7/site-packages/osgeo/gdal_array.py",
>>> line 17, in swig_import_helper
>>> ? ? import _gdal_array
>>> ImportError: No module named _gdal_array
>>>
>>> Ok, the file _gdal_array.py doesn't exist. But this code works with
>>> Python 2.4 and GDAL 1.6.0 in the same machine (Suse Enterprise 10.2
>>> x86_64).
>>>
>>> Comparing the contents of the
>>> /usr/local/lib/python2.7/site-packages/osgeo/ directory with the
>>> contents of the equivalent directory of the other version of Python
>>> (/usr/lib/python2.4/site-packages/GDAL-1.6.0-py2.4-linux-x86_64.egg/osgeo/),
>>> I find several files missing in the newer one (2.7). Files like
>>> "_gdal_array.py", "_gdal_array.pyc", "_gdalconst.py",
>>> "_gdal_array.so", "_gdalconst.so", "_gdal.py", "_gdal.pyc",
>>> "_gdal.so", and so on. All the missing files starting with "_"
>>>
>>> The newer installation (2.7) was created from sources, building python
>>> 2.7 and GDAL 1.7.2 (with "configure --with-python && make && make
>>> install"). The previous installation (2.4) was created from package
>>> manager (Suse YaST).
>>>
>>> I've looking for the missing files in another directories, but they
>>> don't exist. I suppose they weren't compiled, but why? If they're no
>>> longer neded with GDAL 1.7.2, why is python 2.7 asking for them? I
>>> need the code to work in this new version. Any clues?
>>>
>>> Many thanks in advance,
>>>
>>> --
>>> Jorge Ar?valo
>>> Internet & Mobilty Division, DEIMOS
>>> jorge.arevalo@deimos-space.com
>>> http://mobility.grupodeimos.com/
>>> http://gis4free.wordpress.com
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>
>
>
> --
> Jorge Ar?valo
> Internet & Mobilty Division, DEIMOS
> jorge.arevalo@deimos-space.com
> http://mobility.grupodeimos.com/
> http://gis4free.wordpress.com
>



-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
From warmerdam at pobox.com  Fri Oct 29 09:23:22 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct 29 09:23:27 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <4CCAAB54.4060104@york.ac.uk>
References: <4CC93AC1.4010301@york.ac.uk>
	<1288260586.4cc94bea2cb16@webmail.free.fr>
	<4CC9898C.3050204@york.ac.uk>
	<4CC99075.4050100@pobox.com> <4CCAAB54.4060104@york.ac.uk>
Message-ID: <4CCACACA.5070609@pobox.com>

Peter J Halls wrote:
> Frank and team,
> 
>    having reviewed the code again and the comments made by others, for 
> which thanks, it seems to me that there is a possible solution that 
> might resolve all the concerns.  I've asked my DBA for performance 
> expectation comments, but have not yet heard back from him.
> 
>    Instead of trying to track the current FID and where the caller has 
> not specified a value  'SELECT max(OGR_FID) + 1 FROM <tablename>' could 
> be used instead.  This will always return the maximum value plus one and 
> consigns the work to Oracle.  This will be 'safe' for multiple updaters 
> and saves the overhead / risk of enquiring the value and updating it in 
> the code.
> 
>    However, one side effect of this is that the value is not readily 
> known to OGR.  As this is only when writing a new feature to the 
> database, does this matter?  Is there any reliance on the FID within a 
> newly created / written feature having the destination FID value on 
> return - I suspect that, in the majority of instances, the next call is 
> to destroy the feature handle?  As this would be a change in behaviour, 
> at least it will be if I am correct that only the BoundCreateFeature 
> method is actually used, then this may be significant.
> 
> How do others regard this?  Is it a big issue or a non-issue?

Peter,

I am quite concerned about the performance impact of doing the MAX()
operation for every feature insert.   I also would consider it a major
disadvantage to not return the FID properly set on the feature.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Oct 29 09:44:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Oct 29 09:44:48 2010
Subject: [gdal-dev] Two OGR Driver questions: specifically OCI but really
	a general question
In-Reply-To: <4CCA8CCF.1060001@york.ac.uk>
References: <4CC93AC1.4010301@york.ac.uk>
	<loom.20101029T003719-54@post.gmane.org> <4CCA8CCF.1060001@york.ac.uk>
Message-ID: <4CCACFCA.6050002@pobox.com>

Peter J Halls wrote:
> Dear Team,
> 
>    would someone please explain to me the purpose of the 
> UnboundCreateFeature method?  Within the OCI driver it does not appear 
> that this method can ever get invoked: is it superseded by the 
> BoundCreateFeature method?
> 
>    Secondly, the OCI driver BoundCreateFeature method appears to write 
> the FID value into the feature data structure as well as write it out 
> into the SQL to perform the action; the UnboundCreateFeature method does 
> not.  Is this a requirement?

Peter,

I don't really recall the reason for the bound and unbound versions.
But the unbound case can still be used if the MULTI_LOAD=false layer
creation option is used.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From P.Halls at york.ac.uk  Fri Oct 29 09:50:31 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Fri Oct 29 09:51:05 2010
Subject: [gdal-dev] Two OGR Driver questions: specifically OCI but really
	a general question
In-Reply-To: <4CCACFCA.6050002@pobox.com>
References: <4CC93AC1.4010301@york.ac.uk>
	<loom.20101029T003719-54@post.gmane.org>
	<4CCA8CCF.1060001@york.ac.uk> <4CCACFCA.6050002@pobox.com>
Message-ID: <4CCAD127.2020508@york.ac.uk>

Frank,

Frank Warmerdam wrote:
> Peter J Halls wrote:
>> Dear Team,
>>
>>    would someone please explain to me the purpose of the 
>> UnboundCreateFeature method?  Within the OCI driver it does not appear 
>> that this method can ever get invoked: is it superseded by the 
>> BoundCreateFeature method?
>>
>>    Secondly, the OCI driver BoundCreateFeature method appears to write 
>> the FID value into the feature data structure as well as write it out 
>> into the SQL to perform the action; the UnboundCreateFeature method 
>> does not.  Is this a requirement?
> 
> Peter,
> 
> I don't really recall the reason for the bound and unbound versions.
> But the unbound case can still be used if the MULTI_LOAD=false layer
> creation option is used.

Thanks ...

Best wishes,

Peter

> 
> Best regards,

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From P.Halls at york.ac.uk  Fri Oct 29 09:53:35 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Fri Oct 29 09:56:42 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
In-Reply-To: <4CCACACA.5070609@pobox.com>
References: <4CC93AC1.4010301@york.ac.uk>
	<1288260586.4cc94bea2cb16@webmail.free.fr>
	<4CC9898C.3050204@york.ac.uk> <4CC99075.4050100@pobox.com>
	<4CCAAB54.4060104@york.ac.uk> <4CCACACA.5070609@pobox.com>
Message-ID: <4CCAD1DF.60301@york.ac.uk>

Thanks, Frank ...

Frank Warmerdam wrote:
> Peter J Halls wrote:
>> Frank and team,
>>
>>    having reviewed the code again and the comments made by others, for 
>> which thanks, it seems to me that there is a possible solution that 
>> might resolve all the concerns.  I've asked my DBA for performance 
>> expectation comments, but have not yet heard back from him.
>>
>>    Instead of trying to track the current FID and where the caller has 
>> not specified a value  'SELECT max(OGR_FID) + 1 FROM <tablename>' 
>> could be used instead.  This will always return the maximum value plus 
>> one and consigns the work to Oracle.  This will be 'safe' for multiple 
>> updaters and saves the overhead / risk of enquiring the value and 
>> updating it in the code.
>>
>>    However, one side effect of this is that the value is not readily 
>> known to OGR.  As this is only when writing a new feature to the 
>> database, does this matter?  Is there any reliance on the FID within a 
>> newly created / written feature having the destination FID value on 
>> return - I suspect that, in the majority of instances, the next call 
>> is to destroy the feature handle?  As this would be a change in 
>> behaviour, at least it will be if I am correct that only the 
>> BoundCreateFeature method is actually used, then this may be significant.
>>
>> How do others regard this?  Is it a big issue or a non-issue?
> 
> Peter,
> 
> I am quite concerned about the performance impact of doing the MAX()
> operation for every feature insert.   I also would consider it a major
> disadvantage to not return the FID properly set on the feature.

Now I've talked it over with my DBA, my view is that a Sequence would give 
better performance.  Use of NextVal from the Sequence will return a unique value 
for the FID, which can then be written back to the feature as well as to the 
dbms and maintain the unique values - provided all updaters use the same Sequence.

We worked out that setting the Primary Key or Unique constraint on the column 
would prevent multiple updaters using the same FID value: the lack of this 
constraint is probably a separate issue.  The constraint would also be essential 
to prevent multiple updaters using different methods of obtaining a value for 
the FID as even the Sequence could then get out of step.

However, to support multiple updaters using different methods would require that 
the OGR insert code be defensive and expect to fail (through violation of the 
constraint) and be prepared to try new values until success is achieved.  We 
think that this overhead might exceed the use of SELECT max(OGR_FID) + 1.

This then comes back to the question of providing support for multiple updaters.

Best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: IT Services, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From Chris.Barker at noaa.gov  Fri Oct 29 12:18:21 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Fri Oct 29 12:18:26 2010
Subject: [gdal-dev] _gdal_array not found
In-Reply-To: <AANLkTinY3QMiUGzCxW0-MVa0=FetJW9kCvUmT2NZ-RjU@mail.gmail.com>
References: <AANLkTinY3QMiUGzCxW0-MVa0=FetJW9kCvUmT2NZ-RjU@mail.gmail.com>
Message-ID: <4CCAF3CD.1080901@noaa.gov>

On 10/29/10 3:36 AM, Jorge Ar?valo wrote:
> I find several files missing in the newer one (2.7). Files like
> "_gdal_array.py", "_gdal_array.pyc", "_gdalconst.py",
> "_gdal_array.so", "_gdalconst.so", "_gdal.py", "_gdal.pyc",
> "_gdal.so", and so on. All the missing files starting with "_"
>
> The newer installation (2.7) was created from sources, building python
> 2.7 and GDAL 1.7.2 (with "configure --with-python&&  make&&  make
> install"). The previous installation (2.4) was created from package
> manager (Suse YaST).

Something went wrong with your build -- check the messages carefully. 
And yes, installing numpy from source should give you what you need.

Do make sure that you are using the same version of python for everything.

HTH,

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From matt.gregory at oregonstate.edu  Fri Oct 29 13:48:10 2010
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Fri Oct 29 13:48:14 2010
Subject: [gdal-dev] RE: ImportError with Python 2.6 and VS 2008
In-Reply-To: <1D673F86DDA00841A1216F04D1CE70D64264929589@EXCH2.nws.oregonstate.edu>
References: <1D673F86DDA00841A1216F04D1CE70D64264929589@EXCH2.nws.oregonstate.edu>
Message-ID: <1D673F86DDA00841A1216F04D1CE70D64264929673@EXCH2.nws.oregonstate.edu>

Hi again,

> I apologize if this specific issue has been addressed before.  I've
> checked the listserve and didn't see anything right off.  I'm sure I'm
> doing something stupid ...

Turns out I am an idiot in the most obvious way.  I hadn't included gdal\bin in my PATH yet on my new system.  I would have normally found this out through running a C/C++ app, but I went first to Python in this case, saw that _gdal.pyd was indeed there and didn't look further, until I ran dependency walker on it.  Now everything works as expected.

Sorry for the noise.

matt
From ragi at burhum.com  Fri Oct 29 18:48:47 2010
From: ragi at burhum.com (Ragi Burhum)
Date: Fri Oct 29 18:48:49 2010
Subject: [gdal-dev] Coding for appending to a database in OGR
Message-ID: <AANLkTinqEHJ1gUZ_b2bX_PRdKCMDZhW4JppMZvp1TgKJ@mail.gmail.com>

>
> From: Peter J Halls <P.Halls@york.ac.uk>
> Subject: Re: [gdal-dev] Coding for appending to a database in OGR
> To: Frank Warmerdam <warmerdam@pobox.com>
> Cc: gdal-dev@lists.osgeo.org
> Message-ID: <4CCAD1DF.60301@york.ac.uk>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Thanks, Frank ...
>
> Frank Warmerdam wrote:
> > Peter J Halls wrote:
> >> Frank and team,
> >>
> >>    having reviewed the code again and the comments made by others, for
> >> which thanks, it seems to me that there is a possible solution that
> >> might resolve all the concerns.  I've asked my DBA for performance
> >> expectation comments, but have not yet heard back from him.
> >>
> >>    Instead of trying to track the current FID and where the caller has
> >> not specified a value  'SELECT max(OGR_FID) + 1 FROM <tablename>'
> >> could be used instead.  This will always return the maximum value plus
> >> one and consigns the work to Oracle.  This will be 'safe' for multiple
> >> updaters and saves the overhead / risk of enquiring the value and
> >> updating it in the code.
> >>
> >>    However, one side effect of this is that the value is not readily
> >> known to OGR.  As this is only when writing a new feature to the
> >> database, does this matter?  Is there any reliance on the FID within a
> >> newly created / written feature having the destination FID value on
> >> return - I suspect that, in the majority of instances, the next call
> >> is to destroy the feature handle?  As this would be a change in
> >> behaviour, at least it will be if I am correct that only the
> >> BoundCreateFeature method is actually used, then this may be
> significant.
> >>
> >> How do others regard this?  Is it a big issue or a non-issue?
> >
> > Peter,
> >
> > I am quite concerned about the performance impact of doing the MAX()
> > operation for every feature insert.   I also would consider it a major
> > disadvantage to not return the FID properly set on the feature.
>
> Now I've talked it over with my DBA, my view is that a Sequence would give
> better performance.  Use of NextVal from the Sequence will return a unique
> value
> for the FID, which can then be written back to the feature as well as to
> the
> dbms and maintain the unique values - provided all updaters use the same
> Sequence.
>
> We worked out that setting the Primary Key or Unique constraint on the
> column
> would prevent multiple updaters using the same FID value: the lack of this
> constraint is probably a separate issue.  The constraint would also be
> essential
> to prevent multiple updaters using different methods of obtaining a value
> for
> the FID as even the Sequence could then get out of step.
>
> However, to support multiple updaters using different methods would require
> that
> the OGR insert code be defensive and expect to fail (through violation of
> the
> constraint) and be prepared to try new values until success is achieved.
>  We
> think that this overhead might exceed the use of SELECT max(OGR_FID) + 1.
>
> This then comes back to the question of providing support for multiple
> updaters.
>
> Best wishes,
>
> Peter
>

Hello Peter,

Actually, unless I am missing something very obvious, the select max()+1
approach would not work since there are race-condition-like situations where
one of the statements from one of the connections would fail. Why not just
used the underlying database's AUTOINCREMENT features? Most dbs support that
and I think in Oracle it is done with a sequence combined with a trigger or
specifying the sequence.nextval() in the insert statement itself.

Just to point out, ArcObjects has the concept of a RowBuffer - a row that is
used for insertion that behaves just like regular row except that it doesn't
have identity (the ID hasn't been assigned yet) until after it has been
inserted (after db insertion, the id is looked up and assigned to the client
object).

my two cents,

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101029/06db9cad/attachment.html
From ksshannon at gmail.com  Sat Oct 30 15:40:49 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Sat Oct 30 15:41:08 2010
Subject: [gdal-dev] Buildbot
Message-ID: <AANLkTi=TWgKiRCMznFENC8b8X=uN0Rdi19XatOBZ1CSD@mail.gmail.com>

I can't seem to get to the buildbot, I recall something was said a while ago
about late migration after something happened. Is it still down, or is it
just me?

kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101030/56c8227c/attachment.html
From warmerdam at pobox.com  Sat Oct 30 15:45:17 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Oct 30 15:45:22 2010
Subject: [gdal-dev] Buildbot
In-Reply-To: <AANLkTi=TWgKiRCMznFENC8b8X=uN0Rdi19XatOBZ1CSD@mail.gmail.com>
References: <AANLkTi=TWgKiRCMznFENC8b8X=uN0Rdi19XatOBZ1CSD@mail.gmail.com>
Message-ID: <4CCC75CD.8060702@pobox.com>

Kyle Shannon wrote:
> I can't seem to get to the buildbot, I recall something was said a while 
> ago about late migration after something happened. Is it still down, or 
> is it just me?

Kyle,

Unfortunately buildbot is still down.  Mateusz is looking into setting
something up again but it might be Hudson instead of buildbot.

However, you can still run the autotest suite locally if that is the
aspect of most interest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sglish at hotmail.com  Sun Oct 31 02:47:14 2010
From: sglish at hotmail.com (Chris English)
Date: Sun Oct 31 02:49:17 2010
Subject: [gdal-dev] VPF - Failure fetching requested layer OGDI
Message-ID: <SNT117-W60BA2D06A976323D89DB2FC5470@phx.gbl>


On Windows:
I'm trying to build some shape files from VPF files using OGDI in FWTools-2.4.7,I finally got my gltp:/vrf/  going and that resulted in:
C:\gisdata\vdu\software\um\DNC16>ogrinfo  gltp:/vrf/gisdata/vdu/software/um/DNC16/a1611110ERROR 4: OGDI Driver doesn't support update.Had to open data source read-only.INFO: Open of `gltp:/vrf/gisdata/vdu/software/um/DNC16/a1611110'      using driver `OGDI' successful.1: landmrka@cul(*)_area (Polygon)2: transa@cul(*)_area (Polygon)3: transl@cul(*)_line (Line String)4: buildngp@cul(*)_point (Point)5: builtupp@cul(*)_point (Point)6: commp@cul(*)_point (Point)7: industp@cul(*)_point (Point)8: ecrarea@ecr(*)_area (Polygon)9: foreshoa@ecr(*)_area (Polygon)10: coastl@ecr(*)_line (Line String)11: islandp@ecr(*)_point (Point)...32: dangera@obs(*)_area (Polygon)33: hazarda@obs(*)_area (Polygon)34: reefa@obs(*)_area (Polygon)35: ruinsa@obs(*)_area (Polygon)36: bridgel@obs(*)_line (Line String)37: hazardl@obs(*)_line (Line String)38: pipelinl@obs(*)_line (Line String)39: dangerp@obs(*)_point (Point)...
Going for more specifics at the layer level
C:\gisdata\vdu\software\um\DNC16>ogrinfo  -al gltp:/vrf/gisdata/vdu/software/um/DNC16/a1611110 'dangera@obs(*)_area'ERROR 4: OGDI Driver doesn't support update.Had to open data source read-only.INFO: Open of `gltp:/vrf/gisdata/vdu/software/um/DNC16/a1611110'      using driver `OGDI' successful.FAILURE: Couldn't fetch requested layer 'dangera@obs(*)_area'!
Playing around with case sensitivity to no avail.
C:\gisdata\vdu\software\um\DNC16>ogrinfo  gltp:/vrf/gisdata/vdu/software/um/DNC16/a1611110 'DANGERA@OBS(*)_area'ERROR 4: OGDI Driver doesn't support update.Had to open data source read-only.INFO: Open of `gltp:/vrf/gisdata/vdu/software/um/DNC16/a1611110'      using driver `OGDI' successful.FAILURE: Couldn't fetch requested layer 'DANGERA@OBS(*)_area'!
I'm not sure how much more info I'd get from the specific call to the layer level.Generally, I know it is there.
C:\gisdata\vdu\software\um\DNC16>ogr2ogr a1611110_danger_a.shp  gltp:/vrf/gisdata/vdu/software/um/DNC16/a1611110 'DANGERA@OBS(*)_area'FAILURE: Couldn't fetch requested layer ''DANGERA@OBS(*)_area''!
Ah, failure to fetch means no shape file.  Any help in pushing this into shape greatlyappreciated, there's some danger I need to map.
Chris English

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20101031/8d8a2ab2/attachment.html
From ahmettemiz88 at gmail.com  Sun Oct 31 14:38:19 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sun Oct 31 14:38:22 2010
Subject: [gdal-dev] smoothing lines
Message-ID: <AANLkTikU3FQgVpT+gN+P7g05O08BntX9v-Ra3thE0Nh_@mail.gmail.com>

hello

Is there any way to smooth lines (contours) in gdal ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
From yehil at rafael.co.il  Sun Oct 31 14:49:28 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Sun Oct 31 14:52:14 2010
Subject: [gdal-dev] gdal2tiles from fwtools
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231A0@MAILBOXSERVER.rf.local>

Hi
Is there a problem with the python script gdal2tiles in FWTools 2.4.7?
I'm getting the following error:

C:\Program Files\FWTools2.4.7>gdal2tiles
Traceback (most recent call last):
  File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal2tiles.py", line 38, in ?
    from osgeo import gdal
ImportError: No module named osgeo
C:\Program Files\FWTools2.4.7>


Thanks
Yehiyam Livneh
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************

From yehil at rafael.co.il  Sun Oct 31 14:53:17 2010
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Sun Oct 31 14:54:47 2010
Subject: [gdal-dev] gdal2tiles from fwtools
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231A1@MAILBOXSERVER.rf.local>

Hi
Is there a problem with the python script gdal2tiles in FWTools 2.4.7?
I'm getting the following error:

C:\Program Files\FWTools2.4.7>gdal2tiles
Traceback (most recent call last):
  File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal2tiles.py", line 38, in ?
    from osgeo import gdal
ImportError: No module named osgeo
C:\Program Files\FWTools2.4.7>


Thanks
Yehiyam Livneh
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************

From warmerdam at pobox.com  Sun Oct 31 15:32:15 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Oct 31 15:32:17 2010
Subject: [gdal-dev] RFC 32 - gdallocationinfo utility
Message-ID: <4CCDC43F.1000504@pobox.com>

Folks,

I have written a new gdal utility which I would like to become a standard
installed and supported utility.  I think it is likely appropriate to seek
feedback on new supported utilities (as opposed to ones that are not installed
by default, and are sort of informal).   So I have prepared an RFC.

   http://trac.osgeo.org/gdal/wiki/rfc32_gdallocationinfo

The implementation is all already in trunk, so feel free to inspect the
code, docs, etc.   I'll call for a vote this week after incorporating
preliminary feedback.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Oct 31 15:34:21 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Oct 31 15:34:26 2010
Subject: [gdal-dev] gdal2tiles from fwtools
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231A1@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C06AEBE231A1@MAILBOXSERVER.rf.local>
Message-ID: <4CCDC4BD.4060700@pobox.com>

Livneh Yehiyam wrote:
> Hi
> Is there a problem with the python script gdal2tiles in FWTools 2.4.7?
> I'm getting the following error:
> 
> C:\Program Files\FWTools2.4.7>gdal2tiles
> Traceback (most recent call last):
>   File "C:\PROGRA~1\FWTOOL~1.7\bin\gdal2tiles.py", line 38, in ?
>     from osgeo import gdal
> ImportError: No module named osgeo
> C:\Program Files\FWTools2.4.7>

Livneh,

I'm afraid that gdal2tiles.py is not supported as part of FWTools.  It
uses the "new" python api while FWTools ships with the "old" python api.

Try OSGeo4W - you might need a newer package than the default GDAL from
OSGeo4W. Try "gdal17" through the advanced install.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

