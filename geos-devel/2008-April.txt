From bfraser at geoanalytic.com  Wed Apr  2 18:12:57 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Apr  2 18:43:19 2008
Subject: [geos-devel] How to create a noded set of linestrings?
Message-ID: <02ac01c8950e$b4d2be10$140002c0@shark>

Hello all,

  I'm really new to using GEOS so please bear with me.

My basic problem is to create polygons from lines (single
segment linestrings).  Using the GEOS example.cpp (and ogr)
I've been able to scavange code to read my shapefile of
lines, apply the polygonizer to create polygons, then create
a shapefile of polygons.  Works great.

But the lines have a few cases of crossing intersections
which I'd like to intersect before polygonization.  How can
I get a "noded" set of geometry?  Is it one method in GEOS
or something like (btw the code below is NOT logically
correct!):

 for (unsigned int i=0; i<input_geoms->size(); i++) {
  Geometry *g1 = (*input_geoms)[i];
  for (unsigned int j=i; j<input_geoms->size(); j++) {
   Geometry *g2 = (*input_geoms)[j];
   try {
    if ( g1->crosses(g2) )
    {
     Geometry *g3 = g1->Union(g2);
     geoms->push_back(g3);
    }else
    {
     geoms->push_back(g1);
    }
   }
  }
 }

Thanks!

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

From pramsey at cleverelephant.ca  Wed Apr  2 19:22:46 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Apr  2 19:22:50 2008
Subject: [geos-devel] How to create a noded set of linestrings?
In-Reply-To: <02ac01c8950e$b4d2be10$140002c0@shark>
References: <02ac01c8950e$b4d2be10$140002c0@shark>
Message-ID: <30fe546d0804021622u67818ce1pc34c4f70384d8211@mail.gmail.com>

Offhand, if you collect them all into one geometrycollection, then run
intersection(collection,empty) you should get something out that does
what you want. You'll have to pick through the results and remove any
empties and points that come out the far side, but the remaining lines
should be ready to pass to your polygonizer...

P

On Wed, Apr 2, 2008 at 3:12 PM, Brent Fraser <bfraser@geoanalytic.com> wrote:
> Hello all,
>
>   I'm really new to using GEOS so please bear with me.
>
>  My basic problem is to create polygons from lines (single
>  segment linestrings).  Using the GEOS example.cpp (and ogr)
>  I've been able to scavange code to read my shapefile of
>  lines, apply the polygonizer to create polygons, then create
>  a shapefile of polygons.  Works great.
>
>  But the lines have a few cases of crossing intersections
>  which I'd like to intersect before polygonization.  How can
>  I get a "noded" set of geometry?  Is it one method in GEOS
>  or something like (btw the code below is NOT logically
>  correct!):
>
>   for (unsigned int i=0; i<input_geoms->size(); i++) {
>   Geometry *g1 = (*input_geoms)[i];
>   for (unsigned int j=i; j<input_geoms->size(); j++) {
>    Geometry *g2 = (*input_geoms)[j];
>    try {
>     if ( g1->crosses(g2) )
>     {
>      Geometry *g3 = g1->Union(g2);
>      geoms->push_back(g3);
>     }else
>     {
>      geoms->push_back(g1);
>     }
>    }
>   }
>   }
>
>  Thanks!
>
>  Brent Fraser
>  GeoAnalytic Inc.
>  Calgary, Alberta
>
>  _______________________________________________
>  geos-devel mailing list
>  geos-devel@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at cleverelephant.ca  Thu Apr  3 13:33:55 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu Apr  3 13:33:57 2008
Subject: [geos-devel] Incubation Progress
In-Reply-To: <47DABA6A.9060003@pobox.com>
References: <47DABA6A.9060003@pobox.com>
Message-ID: <30fe546d0804031033h1862f450k9074fa4d115cb869@mail.gmail.com>

Frank,

I'm getting back onto this horse...

First, I've started moving the main page for geos to the geos trac wiki.
That leaves the subsidiary tasks of moving the download, svn snap, and
svn log to downloads.osgeo.org at some point.

Second, I've started to flesh out a PSC page.  If you could do an RFC1
for us on governance, that would be great. I'm happy with Apache-style
voting, and the Mapserver RFC1, myself (for reference, it's at
http://mapserver.gis.umn.edu/development/rfc/ms-rfc-1 )

Third, provenance review, I'll volunteer to get that done.

Thanks,

Paul

On Fri, Mar 14, 2008 at 10:48 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Folks,
>
>  I've just realized that I am in fact the OSGeo appointed incubation
>  mentor for the GEOS project.  I have been meaning to prompt for some
> progress
>  for a while, but this seems like a good time.
>
>  I see two main things that need to be done:
>
>  1) Setup project governance.  This will presumably amount to setting up a
>  Project Steering Committee responsible for approving commiters, approving
>  major technical changes - perhaps via an RFC process, and making other
>  major project decisions.  I would be willing to draft an "RFC 1" outlining
>  this, modelled on the one used by MapServer or GDAL if that would be
> helpful
>  (let me know).
>
>  One key issue is establishing the initial PSC.  As major stakeholders it
>  may be desirable to have Safe Software, Autodesk and Ingres represented.
>  I also assume that Paul will be on it (perhaps chairing?).  There are also
>  several other contributors that might be reasonable - mostly obviously Ben
>  Jubb who has done the recent work at Refractions.
>
>  2) Provenance Review.  This process is described at:
>
>   http://www.osgeo.org/incubator/process/codereview.html
>
>  For GEOS I anticipate this mostly just being a bit tedious because of the
>  number of files to review, but likely not very hard since there have been
>  a limited number of contributors, and little use of outside code.  Is there
>  anyone willing to volunteer for this work?  I would be happy to provide
>  guideance and support.
>
>  Best regards,
>  --
>
> ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>  _______________________________________________
>  geos-devel mailing list
>  geos-devel@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at cleverelephant.ca  Thu Apr  3 13:43:14 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu Apr  3 13:43:18 2008
Subject: [geos-devel] Bootstrap PSC
Message-ID: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>

Folks we are going to need a PSC to start with, something smaller
would be better, I think.

I previously proposed a small group here:

http://lists.osgeo.org/pipermail/geos-devel/2007-October/003076.html

Could I have comments, additions / subtractions?

Paul
From mchapman at texelinc.com  Thu Apr  3 13:47:33 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Thu Apr  3 13:47:48 2008
Subject: [geos-devel] Union problem
Message-ID: <008301c895b2$ccfeff40$66fcfdc0$@com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: union_problem.PNG
Type: image/png
Size: 144958 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20080403/ec249d3d/union_problem-0001.png
From pramsey at cleverelephant.ca  Thu Apr  3 13:50:29 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu Apr  3 13:50:31 2008
Subject: [geos-devel] Union problem
In-Reply-To: <008301c895b2$ccfeff40$66fcfdc0$@com>
References: <008301c895b2$ccfeff40$66fcfdc0$@com>
Message-ID: <30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>

Most probably a bug... any chance you could run this same test case
under JTS so we can confirm if it's a problem at the algorithm level
or the port level?

Thanks,

P

On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com> wrote:

> All,
>
> When I union the two features USA and Mexico I end up with a geometry that
> has one point where the y or lat value for one point is zero.  See the
> attachment for what I mean.  Does anyone think this is a bug in GEOS or am I
> not doing something correctly?  Most other geometric unions create good
> geometries.  If you want I can send the original shape file.
>
>
>
> Thanks for any help.
>
>
>
> Best regards,
>
> Martin
>
>
> _______________________________________________
>  geos-devel mailing list
>  geos-devel@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Thu Apr  3 13:53:29 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Apr  3 13:53:35 2008
Subject: [geos-devel] Bootstrap PSC
In-Reply-To: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>
References: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>
Message-ID: <47F51999.8000906@loskot.net>

Paul Ramsey wrote:
> Folks we are going to need a PSC to start with, something smaller
> would be better, I think.
> 
> I previously proposed a small group here:
> 
> http://lists.osgeo.org/pipermail/geos-devel/2007-October/003076.html
> 
> Could I have comments, additions / subtractions?

In my opinion, the roadmap proposal sounds very good to me
and I'd follow it if I was asked.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mbdavis at refractions.net  Thu Apr  3 14:01:05 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Thu Apr  3 13:55:35 2008
Subject: [geos-devel] Bootstrap PSC
In-Reply-To: <47F51999.8000906@loskot.net>
References: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>
	<47F51999.8000906@loskot.net>
Message-ID: <47F51B61.3050004@refractions.net>

+1 for me.

I am happy to be included in the PSC, but really have minimal spare time 
to devote to yet another project!  So I can really only function in an 
advisory role, not a leadership role. 

M

Mateusz Loskot wrote:
> Paul Ramsey wrote:
>> Folks we are going to need a PSC to start with, something smaller
>> would be better, I think.
>>
>> I previously proposed a small group here:
>>
>> http://lists.osgeo.org/pipermail/geos-devel/2007-October/003076.html
>>
>> Could I have comments, additions / subtractions?
>
> In my opinion, the roadmap proposal sounds very good to me
> and I'd follow it if I was asked.
>
> Greetings

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From hobu.inc at gmail.com  Thu Apr  3 14:13:59 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Apr  3 14:17:10 2008
Subject: [geos-devel] Bootstrap PSC
In-Reply-To: <47F51B61.3050004@refractions.net>
References: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>
	<47F51999.8000906@loskot.net> <47F51B61.3050004@refractions.net>
Message-ID: <AA956719-0CA7-4F15-864D-22974D11B403@gmail.com>

+1 for me.  I'm still willing to participate as PSC member.

Additionally, I would also like to nominate Mateusz Loskot for the  
GEOS PSC membership list.  His work has left a huge imprint on GEOS,  
and he's kept things rolling through the various developmental lulls  
in the project after Sandro left.

Howard

On Apr 3, 2008, at 1:01 PM, Martin Davis wrote:
> +1 for me.
>
> I am happy to be included in the PSC, but really have minimal spare  
> time to devote to yet another project!  So I can really only  
> function in an advisory role, not a leadership role.
> M
>
> Mateusz Loskot wrote:
>> Paul Ramsey wrote:
>>> Folks we are going to need a PSC to start with, something smaller
>>> would be better, I think.
>>>
>>> I previously proposed a small group here:
>>>
>>> http://lists.osgeo.org/pipermail/geos-devel/2007-October/003076.html
>>>
>>> Could I have comments, additions / subtractions?
>>
>> In my opinion, the roadmap proposal sounds very good to me
>> and I'd follow it if I was asked.
>>
>> Greetings
>
> -- 
> Martin Davis
> Senior Technical Architect
> Refractions Research, Inc.
> (250) 383-3022
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From mchapman at texelinc.com  Thu Apr  3 14:22:58 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Thu Apr  3 14:23:09 2008
Subject: [geos-devel] Union problem
In-Reply-To: <30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>
References: <008301c895b2$ccfeff40$66fcfdc0$@com>
	<30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>
Message-ID: <009401c895b7$bef88150$3ce983f0$@com>

Unfortunately, I do not have JTS but I will try to step through the code and
see if I can learn more about the problem.  Perhaps a careful inspection of
the input and output point sets will yield some clues because the problem is
predictable.

Best regards,
Martin

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Thursday, April 03, 2008 11:50 AM
To: GEOS Development List
Subject: Re: [geos-devel] Union problem

Most probably a bug... any chance you could run this same test case
under JTS so we can confirm if it's a problem at the algorithm level
or the port level?

Thanks,

P

On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com>
wrote:

> All,
>
> When I union the two features USA and Mexico I end up with a geometry that
> has one point where the y or lat value for one point is zero.  See the
> attachment for what I mean.  Does anyone think this is a bug in GEOS or am
I
> not doing something correctly?  Most other geometric unions create good
> geometries.  If you want I can send the original shape file.
>
>
>
> Thanks for any help.
>
>
>
> Best regards,
>
> Martin
>
>
> _______________________________________________
>  geos-devel mailing list
>  geos-devel@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel

From mbdavis at refractions.net  Thu Apr  3 14:32:25 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Thu Apr  3 14:28:28 2008
Subject: [geos-devel] Union problem
In-Reply-To: <009401c895b7$bef88150$3ce983f0$@com>
References: <008301c895b2$ccfeff40$66fcfdc0$@com>	<30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>
	<009401c895b7$bef88150$3ce983f0$@com>
Message-ID: <47F522B9.9000109@refractions.net>

Send me the shapefile and I'll try it out in JTS.

M

Martin Chapman wrote:
> Unfortunately, I do not have JTS but I will try to step through the code and
> see if I can learn more about the problem.  Perhaps a careful inspection of
> the input and output point sets will yield some clues because the problem is
> predictable.
>
> Best regards,
> Martin
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Thursday, April 03, 2008 11:50 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] Union problem
>
> Most probably a bug... any chance you could run this same test case
> under JTS so we can confirm if it's a problem at the algorithm level
> or the port level?
>
> Thanks,
>
> P
>
> On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com>
> wrote:
>
>   
>> All,
>>
>> When I union the two features USA and Mexico I end up with a geometry that
>> has one point where the y or lat value for one point is zero.  See the
>> attachment for what I mean.  Does anyone think this is a bug in GEOS or am
>>     
> I
>   
>> not doing something correctly?  Most other geometric unions create good
>> geometries.  If you want I can send the original shape file.
>>
>>
>>
>> Thanks for any help.
>>
>>
>>
>> Best regards,
>>
>> Martin
>>
>>
>> _______________________________________________
>>  geos-devel mailing list
>>  geos-devel@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>     
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From pramsey at cleverelephant.ca  Thu Apr  3 14:40:41 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu Apr  3 14:40:43 2008
Subject: [geos-devel] Bootstrap PSC
In-Reply-To: <AA956719-0CA7-4F15-864D-22974D11B403@gmail.com>
References: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>
	<47F51999.8000906@loskot.net> <47F51B61.3050004@refractions.net>
	<AA956719-0CA7-4F15-864D-22974D11B403@gmail.com>
Message-ID: <30fe546d0804031140j6c8e5176r2687fd9dd9a9eb27@mail.gmail.com>

I agree... one thing I see lacking in my proposed PSC is people who
would feel comfortable committing right away. The Safe and Autodesk
folks aren't going to get their hands dirty right out of the gate,
Martin provides architecture but no direct code mucking.

So Mateusz on the PSC.

On Thu, Apr 3, 2008 at 11:13 AM, Howard Butler <hobu.inc@gmail.com> wrote:
> +1 for me.  I'm still willing to participate as PSC member.
>
>  Additionally, I would also like to nominate Mateusz Loskot for the GEOS PSC
> membership list.  His work has left a huge imprint on GEOS, and he's kept
> things rolling through the various developmental lulls in the project after
> Sandro left.
>
>  Howard
>
>
>
>  On Apr 3, 2008, at 1:01 PM, Martin Davis wrote:
>
> > +1 for me.
> >
> > I am happy to be included in the PSC, but really have minimal spare time
> to devote to yet another project!  So I can really only function in an
> advisory role, not a leadership role.
> > M
> >
> > Mateusz Loskot wrote:
> >
> > > Paul Ramsey wrote:
> > >
> > > > Folks we are going to need a PSC to start with, something smaller
> > > > would be better, I think.
> > > >
> > > > I previously proposed a small group here:
> > > >
> > > > http://lists.osgeo.org/pipermail/geos-devel/2007-October/003076.html
> > > >
> > > > Could I have comments, additions / subtractions?
> > > >
> > >
> > > In my opinion, the roadmap proposal sounds very good to me
> > > and I'd follow it if I was asked.
> > >
> > > Greetings
> > >
> >
> > --
> > Martin Davis
> > Senior Technical Architect
> > Refractions Research, Inc.
> > (250) 383-3022
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
>
>  _______________________________________________
>  geos-devel mailing list
>  geos-devel@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mbdavis at refractions.net  Thu Apr  3 14:53:18 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Thu Apr  3 14:47:46 2008
Subject: [geos-devel] Bootstrap PSC
In-Reply-To: <30fe546d0804031140j6c8e5176r2687fd9dd9a9eb27@mail.gmail.com>
References: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>	<47F51999.8000906@loskot.net>
	<47F51B61.3050004@refractions.net>	<AA956719-0CA7-4F15-864D-22974D11B403@gmail.com>
	<30fe546d0804031140j6c8e5176r2687fd9dd9a9eb27@mail.gmail.com>
Message-ID: <47F5279E.2000608@refractions.net>

Well... it is a Steering Committee, not a Coding Committee, no?  8^)

But I agree - Mateusz would be a good voice to have on board. 

Paul Ramsey wrote:
> I agree... one thing I see lacking in my proposed PSC is people who
> would feel comfortable committing right away. The Safe and Autodesk
> folks aren't going to get their hands dirty right out of the gate,
> Martin provides architecture but no direct code mucking.
>
> So Mateusz on the PSC.
>
> On Thu, Apr 3, 2008 at 11:13 AM, Howard Butler <hobu.inc@gmail.com> wrote:
>   
>> +1 for me.  I'm still willing to participate as PSC member.
>>
>>  Additionally, I would also like to nominate Mateusz Loskot for the GEOS PSC
>> membership list.  His work has left a huge imprint on GEOS, and he's kept
>> things rolling through the various developmental lulls in the project after
>> Sandro left.
>>
>>  Howard
>>
>>
>>
>>  On Apr 3, 2008, at 1:01 PM, Martin Davis wrote:
>>
>>     
>>> +1 for me.
>>>
>>> I am happy to be included in the PSC, but really have minimal spare time
>>>       
>> to devote to yet another project!  So I can really only function in an
>> advisory role, not a leadership role.
>>     
>>> M
>>>
>>> Mateusz Loskot wrote:
>>>
>>>       
>>>> Paul Ramsey wrote:
>>>>
>>>>         
>>>>> Folks we are going to need a PSC to start with, something smaller
>>>>> would be better, I think.
>>>>>
>>>>> I previously proposed a small group here:
>>>>>
>>>>> http://lists.osgeo.org/pipermail/geos-devel/2007-October/003076.html
>>>>>
>>>>> Could I have comments, additions / subtractions?
>>>>>
>>>>>           
>>>> In my opinion, the roadmap proposal sounds very good to me
>>>> and I'd follow it if I was asked.
>>>>
>>>> Greetings
>>>>
>>>>         
>>> --
>>> Martin Davis
>>> Senior Technical Architect
>>> Refractions Research, Inc.
>>> (250) 383-3022
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>       
>>  _______________________________________________
>>  geos-devel mailing list
>>  geos-devel@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>     
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From mchapman at texelinc.com  Thu Apr  3 16:42:27 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Thu Apr  3 16:42:41 2008
Subject: [geos-devel] Union problem
In-Reply-To: <47F522B9.9000109@refractions.net>
References: <008301c895b2$ccfeff40$66fcfdc0$@com>	<30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>	<009401c895b7$bef88150$3ce983f0$@com>
	<47F522B9.9000109@refractions.net>
Message-ID: <003d01c895cb$3adf94d0$b09ebe70$@com>

Martin,

Here you go.  It occurs when you union the US and Mexico. Thanks for your
help!

Best regards,
Martin


-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Martin Davis
Sent: Thursday, April 03, 2008 12:32 PM
To: GEOS Development List
Subject: Re: [geos-devel] Union problem

Send me the shapefile and I'll try it out in JTS.

M

Martin Chapman wrote:
> Unfortunately, I do not have JTS but I will try to step through the code
and
> see if I can learn more about the problem.  Perhaps a careful inspection
of
> the input and output point sets will yield some clues because the problem
is
> predictable.
>
> Best regards,
> Martin
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Thursday, April 03, 2008 11:50 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] Union problem
>
> Most probably a bug... any chance you could run this same test case
> under JTS so we can confirm if it's a problem at the algorithm level
> or the port level?
>
> Thanks,
>
> P
>
> On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com>
> wrote:
>
>   
>> All,
>>
>> When I union the two features USA and Mexico I end up with a geometry
that
>> has one point where the y or lat value for one point is zero.  See the
>> attachment for what I mean.  Does anyone think this is a bug in GEOS or
am
>>     
> I
>   
>> not doing something correctly?  Most other geometric unions create good
>> geometries.  If you want I can send the original shape file.
>>
>>
>>
>> Thanks for any help.
>>
>>
>>
>> Best regards,
>>
>> Martin
>>
>>
>> _______________________________________________
>>  geos-devel mailing list
>>  geos-devel@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>     
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: CNTRY92.zip
Type: application/x-zip-compressed
Size: 212921 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20080403/b9491c07/CNTRY92-0001.bin
From bfraser at geoanalytic.com  Thu Apr  3 17:24:30 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Apr  3 17:24:50 2008
Subject: [geos-devel] How to create a noded set of linestrings?
References: <02ac01c8950e$b4d2be10$140002c0@shark>
	<30fe546d0804021622u67818ce1pc34c4f70384d8211@mail.gmail.com>
Message-ID: <02d701c895d1$1aafee20$140002c0@shark>

Paul,

  Thanks for the info.  I've switched to the GEOS C api (to
quote the doxygen doc: "If you prefer troubles you can use
the C++ interface.")

Since
    gNodedGeoms = GEOSIntersection( *gGeoms, NULL );

causes a crash, how would I create an empty geometry
collection?


And for comparision, the JTS Developer's Guide gives the
following example:

-------------
A simple trick for noding a group of LineStrings is to union
them together. It turns out that the unioning process will
node the LineStrings for us. For example, the following code
will node a collection of LineStrings:

    Collection lineStrings = . . .
    Geometry nodedLineStrings = (LineString)
lineStrings.get(0);
    for (int i = 1; i < lineStrings.size(); i++) {
        nodedLineStrings =
nodedLineStrings.union((LineString)lineStrings.get(i));
    }
-------------
But I'm not sure what the syntax would be in C (or C++).

Thanks!
Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Paul Ramsey" <pramsey@cleverelephant.ca>
To: "GEOS Development List" <geos-devel@lists.osgeo.org>
Sent: Wednesday, April 02, 2008 5:22 PM
Subject: Re: [geos-devel] How to create a noded set of
linestrings?


> Offhand, if you collect them all into one
geometrycollection, then run
> intersection(collection,empty) you should get something
out that does
> what you want. You'll have to pick through the results and
remove any
> empties and points that come out the far side, but the
remaining lines
> should be ready to pass to your polygonizer...
>
> P
>
> On Wed, Apr 2, 2008 at 3:12 PM, Brent Fraser
<bfraser@geoanalytic.com> wrote:
> > Hello all,
> >
> >   I'm really new to using GEOS so please bear with me.
> >
> >  My basic problem is to create polygons from lines
(single
> >  segment linestrings).  Using the GEOS example.cpp (and
ogr)
> >  I've been able to scavange code to read my shapefile of
> >  lines, apply the polygonizer to create polygons, then
create
> >  a shapefile of polygons.  Works great.
> >
> >  But the lines have a few cases of crossing
intersections
> >  which I'd like to intersect before polygonization.  How
can
> >  I get a "noded" set of geometry?  Is it one method in
GEOS
> >  or something like (btw the code below is NOT logically
> >  correct!):
> >
> >   for (unsigned int i=0; i<input_geoms->size(); i++) {
> >   Geometry *g1 = (*input_geoms)[i];
> >   for (unsigned int j=i; j<input_geoms->size(); j++) {
> >    Geometry *g2 = (*input_geoms)[j];
> >    try {
> >     if ( g1->crosses(g2) )
> >     {
> >      Geometry *g3 = g1->Union(g2);
> >      geoms->push_back(g3);
> >     }else
> >     {
> >      geoms->push_back(g1);
> >     }
> >    }
> >   }
> >   }
> >
> >  Thanks!
> >
> >  Brent Fraser
> >  GeoAnalytic Inc.
> >  Calgary, Alberta
> >
> >  _______________________________________________
> >  geos-devel mailing list
> >  geos-devel@lists.osgeo.org
> >  http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>

From Dale.Lutz at safe.com  Thu Apr  3 17:36:50 2008
From: Dale.Lutz at safe.com (Dale Lutz)
Date: Thu Apr  3 17:43:36 2008
Subject: [geos-devel] Union problem
Message-ID: <1F3C01D6E667B64985B9D81FD8AC90DE1BF8472E10@email1.safe.internal>

Sorry, this is too good to let pass by:

> Here you go.  It occurs when you union the US and Mexico. Thanks for your help!

I'm guessing there is no problem with the US and Canada?

Is GEOS supporting the Democratic candidates that want to renegotiate NAFTA?

Maybe Ross Perot was right after all?



From mbdavis at refractions.net  Fri Apr  4 15:17:41 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Fri Apr  4 15:12:04 2008
Subject: [geos-devel] Union problem
In-Reply-To: <003d01c895cb$3adf94d0$b09ebe70$@com>
References: <008301c895b2$ccfeff40$66fcfdc0$@com>	<30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>	<009401c895b7$bef88150$3ce983f0$@com>	<47F522B9.9000109@refractions.net>
	<003d01c895cb$3adf94d0$b09ebe70$@com>
Message-ID: <47F67ED5.4040207@refractions.net>

This works fine in JTS.

Unfortunately I don't have GEOS running, so can't test it there.  
Possibly we could look into that during some future work.

It is a bit suspicious that it looks like the offending point is the 
terminating point of the last ring in the US MultiPolygon.

M



Martin Chapman wrote:
> Martin,
>
> Here you go.  It occurs when you union the US and Mexico. Thanks for your
> help!
>
> Best regards,
> Martin
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Martin Davis
> Sent: Thursday, April 03, 2008 12:32 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] Union problem
>
> Send me the shapefile and I'll try it out in JTS.
>
> M
>
> Martin Chapman wrote:
>   
>> Unfortunately, I do not have JTS but I will try to step through the code
>>     
> and
>   
>> see if I can learn more about the problem.  Perhaps a careful inspection
>>     
> of
>   
>> the input and output point sets will yield some clues because the problem
>>     
> is
>   
>> predictable.
>>
>> Best regards,
>> Martin
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>> Sent: Thursday, April 03, 2008 11:50 AM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] Union problem
>>
>> Most probably a bug... any chance you could run this same test case
>> under JTS so we can confirm if it's a problem at the algorithm level
>> or the port level?
>>
>> Thanks,
>>
>> P
>>
>> On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com>
>> wrote:
>>
>>   
>>     
>>> All,
>>>
>>> When I union the two features USA and Mexico I end up with a geometry
>>>       
> that
>   
>>> has one point where the y or lat value for one point is zero.  See the
>>> attachment for what I mean.  Does anyone think this is a bug in GEOS or
>>>       
> am
>   
>>>     
>>>       
>> I
>>   
>>     
>>> not doing something correctly?  Most other geometric unions create good
>>> geometries.  If you want I can send the original shape file.
>>>
>>>
>>>
>>> Thanks for any help.
>>>
>>>
>>>
>>> Best regards,
>>>
>>> Martin
>>>
>>>
>>> _______________________________________________
>>>  geos-devel mailing list
>>>  geos-devel@lists.osgeo.org
>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>     
>>>       
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>   
>>     
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From mbdavis at refractions.net  Fri Apr  4 15:18:26 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Fri Apr  4 15:12:48 2008
Subject: [geos-devel] Union problem
In-Reply-To: <1F3C01D6E667B64985B9D81FD8AC90DE1BF8472E10@email1.safe.internal>
References: <1F3C01D6E667B64985B9D81FD8AC90DE1BF8472E10@email1.safe.internal>
Message-ID: <47F67F02.3050705@refractions.net>

GEOS's only preferred political affiliations are with the Flat Earth 
Society, since they make geodyssey so much easier.  8^)

Dale Lutz wrote:
> Sorry, this is too good to let pass by:
>
>   
>> Here you go.  It occurs when you union the US and Mexico. Thanks for your help!
>>     
>
> I'm guessing there is no problem with the US and Canada?
>
> Is GEOS supporting the Democratic candidates that want to renegotiate NAFTA?
>
> Maybe Ross Perot was right after all?
>
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From pramsey at cleverelephant.ca  Fri Apr  4 18:01:23 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Fri Apr  4 18:01:25 2008
Subject: [geos-devel] Bootstrap PSC
In-Reply-To: <47F5279E.2000608@refractions.net>
References: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>
	<47F51999.8000906@loskot.net> <47F51B61.3050004@refractions.net>
	<AA956719-0CA7-4F15-864D-22974D11B403@gmail.com>
	<30fe546d0804031140j6c8e5176r2687fd9dd9a9eb27@mail.gmail.com>
	<47F5279E.2000608@refractions.net>
Message-ID: <30fe546d0804041501n39f59b6bm6e7f8af70e57e718@mail.gmail.com>

See the wiki page here:

http://trac.osgeo.org/geos/wiki/PSC

Comments and questions before we move onto the next stage of business?

P
From mchapman at texelinc.com  Fri Apr  4 18:32:18 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Fri Apr  4 18:37:49 2008
Subject: [geos-devel] Union problem
In-Reply-To: <47F67ED5.4040207@refractions.net>
References: <008301c895b2$ccfeff40$66fcfdc0$@com>	<30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>	<009401c895b7$bef88150$3ce983f0$@com>	<47F522B9.9000109@refractions.net><003d01c895cb$3adf94d0$b09ebe70$@com><47F67ED5.4040207@refractions.net>
Message-ID: <732776416-1207348570-cardhu_decombobulator_blackberry.rim.net-1332964632-@bxe130.bisx.prod.on.blackberry>

Martin,

Thank you for confirming that.  I will look at my code and validate that I am not screwing up the points after the geos operation. If not, I will try my best to debug through the geos source and look for the problem.

By chance do you have a recommendation on where I should start looking in the union operation source code for this issue? Could I put a linearRing.isClosed() method call somewhere in the union code to trap the violating ring? 

Thanks again for all your help!

Best regards,
Martin.  





.
Sent via BlackBerry by AT&T

-----Original Message-----
From: Martin Davis <mbdavis@refractions.net>

Date: Fri, 04 Apr 2008 12:17:41 
To:GEOS Development List <geos-devel@lists.osgeo.org>
Subject: Re: [geos-devel] Union problem


This works fine in JTS.

Unfortunately I don't have GEOS running, so can't test it there.  
Possibly we could look into that during some future work.

It is a bit suspicious that it looks like the offending point is the 
terminating point of the last ring in the US MultiPolygon.

M



Martin Chapman wrote:
> Martin,
>
> Here you go.  It occurs when you union the US and Mexico. Thanks for your
> help!
>
> Best regards,
> Martin
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Martin Davis
> Sent: Thursday, April 03, 2008 12:32 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] Union problem
>
> Send me the shapefile and I'll try it out in JTS.
>
> M
>
> Martin Chapman wrote:
>   
>> Unfortunately, I do not have JTS but I will try to step through the code
>>     
> and
>   
>> see if I can learn more about the problem.  Perhaps a careful inspection
>>     
> of
>   
>> the input and output point sets will yield some clues because the problem
>>     
> is
>   
>> predictable.
>>
>> Best regards,
>> Martin
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>> Sent: Thursday, April 03, 2008 11:50 AM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] Union problem
>>
>> Most probably a bug... any chance you could run this same test case
>> under JTS so we can confirm if it's a problem at the algorithm level
>> or the port level?
>>
>> Thanks,
>>
>> P
>>
>> On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com>
>> wrote:
>>
>>   
>>     
>>> All,
>>>
>>> When I union the two features USA and Mexico I end up with a geometry
>>>       
> that
>   
>>> has one point where the y or lat value for one point is zero.  See the
>>> attachment for what I mean.  Does anyone think this is a bug in GEOS or
>>>       
> am
>   
>>>     
>>>       
>> I
>>   
>>     
>>> not doing something correctly?  Most other geometric unions create good
>>> geometries.  If you want I can send the original shape file.
>>>
>>>
>>>
>>> Thanks for any help.
>>>
>>>
>>>
>>> Best regards,
>>>
>>> Martin
>>>
>>>
>>> _______________________________________________
>>>  geos-devel mailing list
>>>  geos-devel@lists.osgeo.org
>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>     
>>>       
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>   
>>     
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
From mbdavis at refractions.net  Fri Apr  4 19:52:22 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Fri Apr  4 19:46:43 2008
Subject: [geos-devel] Union problem
In-Reply-To: <732776416-1207348570-cardhu_decombobulator_blackberry.rim.net-1332964632-@bxe130.bisx.prod.on.blackberry>
References: <008301c895b2$ccfeff40$66fcfdc0$@com>	<30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>	<009401c895b7$bef88150$3ce983f0$@com>	<47F522B9.9000109@refractions.net><003d01c895cb$3adf94d0$b09ebe70$@com><47F67ED5.4040207@refractions.net>
	<732776416-1207348570-cardhu_decombobulator_blackberry.rim.net-1332964632-@bxe130.bisx.prod.on.blackberry>
Message-ID: <47F6BF36.8000207@refractions.net>

Martin,

I'm guessing that the polygon ring is in fact closed, it's just that one 
of the points is getting zeroed out for some reason.

It's hard to know what to say about where to start.  But you could look 
for convenient points where you could check whether the first/last point 
of a ring is (0,0), and maybe that will turn something up.  There is a 
point in GeometryGraph where rings are extracted from the graph of edges 
- that would be the first place to look.

Happy hunting... 


mchapman@texelinc.com wrote:
> Martin,
>
> Thank you for confirming that.  I will look at my code and validate that I am not screwing up the points after the geos operation. If not, I will try my best to debug through the geos source and look for the problem.
>
> By chance do you have a recommendation on where I should start looking in the union operation source code for this issue? Could I put a linearRing.isClosed() method call somewhere in the union code to trap the violating ring? 
>
> Thanks again for all your help!
>
> Best regards,
> Martin.  
>
>
>
>
>
> .
> Sent via BlackBerry by AT&T
>
> -----Original Message-----
> From: Martin Davis <mbdavis@refractions.net>
>
> Date: Fri, 04 Apr 2008 12:17:41 
> To:GEOS Development List <geos-devel@lists.osgeo.org>
> Subject: Re: [geos-devel] Union problem
>
>
> This works fine in JTS.
>
> Unfortunately I don't have GEOS running, so can't test it there.  
> Possibly we could look into that during some future work.
>
> It is a bit suspicious that it looks like the offending point is the 
> terminating point of the last ring in the US MultiPolygon.
>
> M
>
>
>
> Martin Chapman wrote:
>   
>> Martin,
>>
>> Here you go.  It occurs when you union the US and Mexico. Thanks for your
>> help!
>>
>> Best regards,
>> Martin
>>
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Martin Davis
>> Sent: Thursday, April 03, 2008 12:32 PM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] Union problem
>>
>> Send me the shapefile and I'll try it out in JTS.
>>
>> M
>>
>> Martin Chapman wrote:
>>   
>>     
>>> Unfortunately, I do not have JTS but I will try to step through the code
>>>     
>>>       
>> and
>>   
>>     
>>> see if I can learn more about the problem.  Perhaps a careful inspection
>>>     
>>>       
>> of
>>   
>>     
>>> the input and output point sets will yield some clues because the problem
>>>     
>>>       
>> is
>>   
>>     
>>> predictable.
>>>
>>> Best regards,
>>> Martin
>>>
>>> -----Original Message-----
>>> From: geos-devel-bounces@lists.osgeo.org
>>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>>> Sent: Thursday, April 03, 2008 11:50 AM
>>> To: GEOS Development List
>>> Subject: Re: [geos-devel] Union problem
>>>
>>> Most probably a bug... any chance you could run this same test case
>>> under JTS so we can confirm if it's a problem at the algorithm level
>>> or the port level?
>>>
>>> Thanks,
>>>
>>> P
>>>
>>> On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com>
>>> wrote:
>>>
>>>   
>>>     
>>>       
>>>> All,
>>>>
>>>> When I union the two features USA and Mexico I end up with a geometry
>>>>       
>>>>         
>> that
>>   
>>     
>>>> has one point where the y or lat value for one point is zero.  See the
>>>> attachment for what I mean.  Does anyone think this is a bug in GEOS or
>>>>       
>>>>         
>> am
>>   
>>     
>>>>     
>>>>       
>>>>         
>>> I
>>>   
>>>     
>>>       
>>>> not doing something correctly?  Most other geometric unions create good
>>>> geometries.  If you want I can send the original shape file.
>>>>
>>>>
>>>>
>>>> Thanks for any help.
>>>>
>>>>
>>>>
>>>> Best regards,
>>>>
>>>> Martin
>>>>
>>>>
>>>> _______________________________________________
>>>>  geos-devel mailing list
>>>>  geos-devel@lists.osgeo.org
>>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>>     
>>>>       
>>>>         
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>   
>>>     
>>>       
>>   
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>     
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From ari.jolma at tkk.fi  Sun Apr  6 09:43:24 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sun Apr  6 09:44:57 2008
Subject: [geos-devel] Union problem
In-Reply-To: <003d01c895cb$3adf94d0$b09ebe70$@com>
References: <008301c895b2$ccfeff40$66fcfdc0$@com>
	<30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com>
	<009401c895b7$bef88150$3ce983f0$@com>
	<47F522B9.9000109@refractions.net>
	<003d01c895cb$3adf94d0$b09ebe70$@com>
Message-ID: <47F8D37C.303@tkk.fi>

I tried this with GEOS 3 RC4 (from Perl and through GDAL) and it works 
fine. The border between US and Mexico disappears :)

What's VantagePoint? Maybe it's using old GEOS or otherwise doing 
something wrong?

Regards,

Ari

Martin Chapman kirjoitti:
> Martin,
>
> Here you go.  It occurs when you union the US and Mexico. Thanks for your
> help!
>
> Best regards,
> Martin
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Martin Davis
> Sent: Thursday, April 03, 2008 12:32 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] Union problem
>
> Send me the shapefile and I'll try it out in JTS.
>
> M
>
> Martin Chapman wrote:
>   
>> Unfortunately, I do not have JTS but I will try to step through the code
>>     
> and
>   
>> see if I can learn more about the problem.  Perhaps a careful inspection
>>     
> of
>   
>> the input and output point sets will yield some clues because the problem
>>     
> is
>   
>> predictable.
>>
>> Best regards,
>> Martin
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>> Sent: Thursday, April 03, 2008 11:50 AM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] Union problem
>>
>> Most probably a bug... any chance you could run this same test case
>> under JTS so we can confirm if it's a problem at the algorithm level
>> or the port level?
>>
>> Thanks,
>>
>> P
>>
>> On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com>
>> wrote:
>>
>>   
>>     
>>> All,
>>>
>>> When I union the two features USA and Mexico I end up with a geometry
>>>       
> that
>   
>>> has one point where the y or lat value for one point is zero.  See the
>>> attachment for what I mean.  Does anyone think this is a bug in GEOS or
>>>       
> am
>   
>>>     
>>>       
>> I
>>   
>>     
>>> not doing something correctly?  Most other geometric unions create good
>>> geometries.  If you want I can send the original shape file.
>>>
>>>
>>>
>>> Thanks for any help.
>>>
>>>
>>>
>>> Best regards,
>>>
>>> Martin
>>>
>>>
>>> _______________________________________________
>>>  geos-devel mailing list
>>>  geos-devel@lists.osgeo.org
>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>     
>>>       
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>   
>>     
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mchapman at texelinc.com  Sun Apr  6 11:19:37 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Sun Apr  6 11:24:38 2008
Subject: [geos-devel] Union problem
In-Reply-To: <47F8D37C.303@tkk.fi>
References: <008301c895b2$ccfeff40$66fcfdc0$@com><30fe546d0804031050i185fcefch5993fa11de304a69@mail.gmail.com><009401c895b7$bef88150$3ce983f0$@com><47F522B9.9000109@refractions.net><003d01c895cb$3adf94d0$b09ebe70$@com><47F8D37C.303@tkk.fi>
Message-ID: <1878908885-1207495411-cardhu_decombobulator_blackberry.rim.net-2084372185-@bxe130.bisx.prod.on.blackberry>

Thanks Ari.  I think I may be using an older version of GEOS. VantagePoint is a cheesy desktop tool I'm building for emergency responders. I really appreciate your help. I will try RC4 and see if that fixes the problem.

Best regards,
Martin


 
Sent via BlackBerry by AT&T

-----Original Message-----
From: Ari Jolma <ari.jolma@tkk.fi>

Date: Sun, 06 Apr 2008 16:43:24 
To:GEOS Development List <geos-devel@lists.osgeo.org>
Subject: Re: [geos-devel] Union problem


I tried this with GEOS 3 RC4 (from Perl and through GDAL) and it works 
fine. The border between US and Mexico disappears :)

What's VantagePoint? Maybe it's using old GEOS or otherwise doing 
something wrong?

Regards,

Ari

Martin Chapman kirjoitti:
> Martin,
>
> Here you go.  It occurs when you union the US and Mexico. Thanks for your
> help!
>
> Best regards,
> Martin
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Martin Davis
> Sent: Thursday, April 03, 2008 12:32 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] Union problem
>
> Send me the shapefile and I'll try it out in JTS.
>
> M
>
> Martin Chapman wrote:
>   
>> Unfortunately, I do not have JTS but I will try to step through the code
>>     
> and
>   
>> see if I can learn more about the problem.  Perhaps a careful inspection
>>     
> of
>   
>> the input and output point sets will yield some clues because the problem
>>     
> is
>   
>> predictable.
>>
>> Best regards,
>> Martin
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>> Sent: Thursday, April 03, 2008 11:50 AM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] Union problem
>>
>> Most probably a bug... any chance you could run this same test case
>> under JTS so we can confirm if it's a problem at the algorithm level
>> or the port level?
>>
>> Thanks,
>>
>> P
>>
>> On Thu, Apr 3, 2008 at 10:47 AM, Martin Chapman <mchapman@texelinc.com>
>> wrote:
>>
>>   
>>     
>>> All,
>>>
>>> When I union the two features USA and Mexico I end up with a geometry
>>>       
> that
>   
>>> has one point where the y or lat value for one point is zero.  See the
>>> attachment for what I mean.  Does anyone think this is a bug in GEOS or
>>>       
> am
>   
>>>     
>>>       
>> I
>>   
>>     
>>> not doing something correctly?  Most other geometric unions create good
>>> geometries.  If you want I can send the original shape file.
>>>
>>>
>>>
>>> Thanks for any help.
>>>
>>>
>>>
>>> Best regards,
>>>
>>> Martin
>>>
>>>
>>> _______________________________________________
>>>  geos-devel mailing list
>>>  geos-devel@lists.osgeo.org
>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>     
>>>       
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>   
>>     
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
From pramsey at cleverelephant.ca  Mon Apr  7 16:47:51 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon Apr  7 16:47:57 2008
Subject: [geos-devel] RFC1
Message-ID: <30fe546d0804071347n47bfbda7t197cf5f8edcaa499@mail.gmail.com>

For your delectation, RFC1 <http://trac.osgeo.org/geos/wiki/RFC1>, a
superficially edited version of the Mapserver RFC for a project
steering committee.

PSC bootstrap members, please review and provide your feedback!

Thanks,

Paul
From pramsey at cleverelephant.ca  Tue Apr  8 13:49:34 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue Apr  8 13:49:35 2008
Subject: [geos-devel] RFC 2 for GEOS
Message-ID: <30fe546d0804081049lad39a2bm47535bc5cae45fa8@mail.gmail.com>

For your delectation, a draft of RFC2. We will hold off on voting on
it until we approve RFC1, for obvious reasons :)

http://trac.osgeo.org/geos/wiki/RFC2

Please add any edits you wish or comment on the list.

Paul
From sgillies at frii.com  Tue Apr  8 13:58:55 2008
From: sgillies at frii.com (Sean Gillies)
Date: Tue Apr  8 14:00:51 2008
Subject: [geos-devel] RFC 2 for GEOS
In-Reply-To: <30fe546d0804081049lad39a2bm47535bc5cae45fa8@mail.gmail.com>
References: <30fe546d0804081049lad39a2bm47535bc5cae45fa8@mail.gmail.com>
Message-ID: <47FBB25F.6080201@frii.com>

Paul Ramsey wrote:
> For your delectation, a draft of RFC2. We will hold off on voting on
> it until we approve RFC1, for obvious reasons :)
> 
> http://trac.osgeo.org/geos/wiki/RFC2
> 
> Please add any edits you wish or comment on the list.
> 
> Paul

Paul, "#1232" works better with Trac than "bug 1232".

Sean
From pramsey at cleverelephant.ca  Wed Apr  9 16:45:00 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Apr  9 16:45:02 2008
Subject: [geos-devel] RFC1 - Call for Vote
Message-ID: <30fe546d0804091345n7d9b4b4bld4ca9413f720859d@mail.gmail.com>

OK, PSC bootstrapped members, I'm calling for a vote on RFC1, your
terms of existence, in good bootstrappy fashion, please vote using the
procedures outlined in the document you are voting on.

http://trac.osgeo.org/geos/wiki/RFC1

Thanks,

P
From mateusz at loskot.net  Wed Apr  9 16:50:06 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  9 16:50:12 2008
Subject: [geos-devel] Bootstrap PSC
In-Reply-To: <47F5279E.2000608@refractions.net>
References: <30fe546d0804031043l5852509cx2773507a22ec0a9e@mail.gmail.com>	<47F51999.8000906@loskot.net>	<47F51B61.3050004@refractions.net>	<AA956719-0CA7-4F15-864D-22974D11B403@gmail.com>	<30fe546d0804031140j6c8e5176r2687fd9dd9a9eb27@mail.gmail.com>
	<47F5279E.2000608@refractions.net>
Message-ID: <47FD2BFE.7060600@loskot.net>

Paul, Martin, Howard,

Thank you for proposing my person to the PSC.
Certainly, I'm willing to participate if you consider me helpful.

Greetings
Mateusz

Martin Davis wrote:
> Well... it is a Steering Committee, not a Coding Committee, no?  8^)
> 
> But I agree - Mateusz would be a good voice to have on board.
 >
> Paul Ramsey wrote:
>> I agree... one thing I see lacking in my proposed PSC is people who
>> would feel comfortable committing right away. The Safe and Autodesk
>> folks aren't going to get their hands dirty right out of the gate,
>> Martin provides architecture but no direct code mucking.
>>
>> So Mateusz on the PSC.
>>
>> On Thu, Apr 3, 2008 at 11:13 AM, Howard Butler <hobu.inc@gmail.com> 
>> wrote:
>>  
>>> +1 for me.  I'm still willing to participate as PSC member.
>>>
>>>  Additionally, I would also like to nominate Mateusz Loskot for the 
>>> GEOS PSC
>>> membership list.  His work has left a huge imprint on GEOS, and he's 
>>> kept
>>> things rolling through the various developmental lulls in the project 
>>> after
>>> Sandro left.
>>>
>>>  Howard
>>>
>>>
>>>
>>>  On Apr 3, 2008, at 1:01 PM, Martin Davis wrote:
>>>
>>>    
>>>> +1 for me.
>>>>
>>>> I am happy to be included in the PSC, but really have minimal spare 
>>>> time
>>>>       
>>> to devote to yet another project!  So I can really only function in an
>>> advisory role, not a leadership role.
>>>    
>>>> M
>>>>
>>>> Mateusz Loskot wrote:
>>>>
>>>>      
>>>>> Paul Ramsey wrote:
>>>>>
>>>>>        
>>>>>> Folks we are going to need a PSC to start with, something smaller
>>>>>> would be better, I think.
>>>>>>
>>>>>> I previously proposed a small group here:
>>>>>>
>>>>>> http://lists.osgeo.org/pipermail/geos-devel/2007-October/003076.html
>>>>>>
>>>>>> Could I have comments, additions / subtractions?
>>>>>>
>>>>>>           
>>>>> In my opinion, the roadmap proposal sounds very good to me
>>>>> and I'd follow it if I was asked.
>>>>>
>>>>> Greetings
>>>>>
>>>>>         
>>>> -- 
>>>> Martin Davis
>>>> Senior Technical Architect
>>>> Refractions Research, Inc.
>>>> (250) 383-3022
>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>>       
>>>  _______________________________________________
>>>  geos-devel mailing list
>>>  geos-devel@lists.osgeo.org
>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>     
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>   
> 


-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Wed Apr  9 18:19:39 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  9 18:19:45 2008
Subject: [geos-devel] RFC1
In-Reply-To: <30fe546d0804071347n47bfbda7t197cf5f8edcaa499@mail.gmail.com>
References: <30fe546d0804071347n47bfbda7t197cf5f8edcaa499@mail.gmail.com>
Message-ID: <47FD40FB.8090006@loskot.net>

Paul Ramsey wrote:
> For your delectation, RFC1 <http://trac.osgeo.org/geos/wiki/RFC1>, a
> superficially edited version of the Mapserver RFC for a project
> steering committee.
> 
> PSC bootstrap members, please review and provide your feedback!

Sorry for late feedback, but my comment should not stop the voting.
Perhaps, one situation is missing from the "When is Vote Required?"

- Giving commit access to new members of the development team

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Wed Apr  9 18:23:53 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  9 18:23:59 2008
Subject: [geos-devel] RFC1
In-Reply-To: <47FD40FB.8090006@loskot.net>
References: <30fe546d0804071347n47bfbda7t197cf5f8edcaa499@mail.gmail.com>
	<47FD40FB.8090006@loskot.net>
Message-ID: <47FD41F9.4090400@loskot.net>

Mateusz Loskot wrote:
> Paul Ramsey wrote:
>> For your delectation, RFC1 <http://trac.osgeo.org/geos/wiki/RFC1>, a
>> superficially edited version of the Mapserver RFC for a project
>> steering committee.
>>
>> PSC bootstrap members, please review and provide your feedback!
> 
> Sorry for late feedback, but my comment should not stop the voting.
> Perhaps, one situation is missing from the "When is Vote Required?"
> 
> - Giving commit access to new members of the development team

And my last comment/question is to the "IRC Meeting Attendance".

Shouldn't we provide information what's the GEOS project IRC channel?
Perhaps it's reasonable to register #geos if not, #postgis channel 
should be listed I think (or #osgeo will be used for our purposes?)

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Wed Apr  9 18:26:05 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  9 18:26:10 2008
Subject: [geos-devel] RFC1 - Call for Vote
In-Reply-To: <30fe546d0804091345n7d9b4b4bld4ca9413f720859d@mail.gmail.com>
References: <30fe546d0804091345n7d9b4b4bld4ca9413f720859d@mail.gmail.com>
Message-ID: <47FD427D.2080904@loskot.net>

Paul Ramsey wrote:
> OK, PSC bootstrapped members, I'm calling for a vote on RFC1, your
> terms of existence, in good bootstrappy fashion, please vote using the
> procedures outlined in the document you are voting on.
> 
> http://trac.osgeo.org/geos/wiki/RFC1


+1


Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Wed Apr  9 18:45:07 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  9 18:45:12 2008
Subject: [geos-devel] RFC 2 for GEOS
In-Reply-To: <30fe546d0804081049lad39a2bm47535bc5cae45fa8@mail.gmail.com>
References: <30fe546d0804081049lad39a2bm47535bc5cae45fa8@mail.gmail.com>
Message-ID: <47FD46F3.6030204@loskot.net>

Paul Ramsey wrote:
> For your delectation, a draft of RFC2. We will hold off on voting on
> it until we approve RFC1, for obvious reasons :)
> 
> http://trac.osgeo.org/geos/wiki/RFC2
> 
> Please add any edits you wish or comment on the list.

Here are my comments:

1. I'm not sure I'm the right candidate for SVN admin regarding required 
privileges to OSGeo infrastructure/LDAP. I'm only allowed to admin 
selected OSGeo services like Buildbot, FTP, gdal.org, install/remove 
software.

2. I'd propose to add a note saying:

Every developer position in the project is represented by an individual,
so commit access can be granted to an individual only.

3. I believe it's a good idea to complete the technical responsibilities
with a note like this one:

Every commit introducing new feature shall/must/... be covered with 
corresponding test case included to the GEOS set of unit tests 
(trunk/tests/unit)

4. IMHO there is lack of a few technical issues, but I assume we will 
add it later on, like:

- branching strategy (explain what's stable branch, etc.)
- basic coding guidelines

both explained on separate and *short* wiki pages.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From gary.crawford at autodesk.com  Wed Apr  9 19:19:21 2008
From: gary.crawford at autodesk.com (Gary Crawford)
Date: Wed Apr  9 19:19:25 2008
Subject: [geos-devel] RFC1 - Call for Vote
In-Reply-To: <47FD427D.2080904@loskot.net>
References: <30fe546d0804091345n7d9b4b4bld4ca9413f720859d@mail.gmail.com>
	<47FD427D.2080904@loskot.net>
Message-ID: <CBCEF0EE5DB8F3478ECCB522CD594799254EC92672@ADSK-NAMSG-02.MGDADSK.autodesk.com>

+1

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Mateusz Loskot
Sent: Wednesday, April 09, 2008 3:26 PM
To: GEOS Development List
Subject: Re: [geos-devel] RFC1 - Call for Vote

Paul Ramsey wrote:
> OK, PSC bootstrapped members, I'm calling for a vote on RFC1, your
> terms of existence, in good bootstrappy fashion, please vote using the
> procedures outlined in the document you are voting on.
>
> http://trac.osgeo.org/geos/wiki/RFC1


+1


Greetings
--
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
From hobu.inc at gmail.com  Wed Apr  9 20:10:49 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Apr  9 20:13:24 2008
Subject: [geos-devel] RFC1 - Call for Vote
In-Reply-To: <CBCEF0EE5DB8F3478ECCB522CD594799254EC92672@ADSK-NAMSG-02.MGDADSK.autodesk.com>
References: <30fe546d0804091345n7d9b4b4bld4ca9413f720859d@mail.gmail.com>
	<47FD427D.2080904@loskot.net>
	<CBCEF0EE5DB8F3478ECCB522CD594799254EC92672@ADSK-NAMSG-02.MGDADSK.autodesk.com>
Message-ID: <1C631F9C-544B-497F-838C-E37921D88C43@gmail.com>

+1

On Apr 9, 2008, at 6:19 PM, Gary Crawford wrote:
> +1
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org [mailto:geos-devel-bounces@lists.osgeo.org 
> ] On Behalf Of Mateusz Loskot
> Sent: Wednesday, April 09, 2008 3:26 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] RFC1 - Call for Vote
>
> Paul Ramsey wrote:
>> OK, PSC bootstrapped members, I'm calling for a vote on RFC1, your
>> terms of existence, in good bootstrappy fashion, please vote using  
>> the
>> procedures outlined in the document you are voting on.
>>
>> http://trac.osgeo.org/geos/wiki/RFC1
>
>
> +1
>
>
> Greetings
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From mbdavis at refractions.net  Wed Apr  9 20:24:41 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Wed Apr  9 20:18:44 2008
Subject: [geos-devel] RFC1 - Call for Vote
In-Reply-To: <30fe546d0804091345n7d9b4b4bld4ca9413f720859d@mail.gmail.com>
References: <30fe546d0804091345n7d9b4b4bld4ca9413f720859d@mail.gmail.com>
Message-ID: <47FD5E49.4080601@refractions.net>

+1

Paul Ramsey wrote:
> OK, PSC bootstrapped members, I'm calling for a vote on RFC1, your
> terms of existence, in good bootstrappy fashion, please vote using the
> procedures outlined in the document you are voting on.
>
> http://trac.osgeo.org/geos/wiki/RFC1
>
> Thanks,
>
> P
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From Dale.Lutz at safe.com  Thu Apr 10 12:18:59 2008
From: Dale.Lutz at safe.com (Dale Lutz)
Date: Thu Apr 10 12:19:03 2008
Subject: [geos-devel] RFC1 - Call for Vote
Message-ID: <1F3C01D6E667B64985B9D81FD8AC90DE20E9651C9E@email1.safe.internal>

+1



Paul Ramsey wrote:

> OK, PSC bootstrapped members, I'm calling for a vote on RFC1, your

> terms of existence, in good bootstrappy fashion, please vote using the

> procedures outlined in the document you are voting on.

>

> http://trac.osgeo.org/geos/wiki/RFC1


Dale

----------------------------------------------------------------------
Dale Lutz              Safe Software Inc.           dale.lutz@safe.com<mailto:dal@safe.com>
VP Development         Surrey, BC, CANADA        phone: (604) 501-9985
                       http://www.safe.com<http://www.safe.com/>         fax: (604) 501-9965
----------------------------------------------------------------------


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080410/06e4cfab/attachment.html
From pramsey at cleverelephant.ca  Fri Apr 18 11:38:23 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Fri Apr 18 11:38:26 2008
Subject: [geos-devel] RFC 2 for GEOS
In-Reply-To: <47FD46F3.6030204@loskot.net>
References: <30fe546d0804081049lad39a2bm47535bc5cae45fa8@mail.gmail.com>
	<47FD46F3.6030204@loskot.net>
Message-ID: <30fe546d0804180838m1525937ej92a8c6bb53493dbf@mail.gmail.com>

On Wed, Apr 9, 2008 at 3:45 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
>
>  1. I'm not sure I'm the right candidate for SVN admin regarding required
> privileges to OSGeo infrastructure/LDAP. I'm only allowed to admin selected
> OSGeo services like Buildbot, FTP, gdal.org, install/remove software.

Other nominee? Hobu?

>  2. I'd propose to add a note saying:
>
>  Every developer position in the project is represented by an individual,
>  so commit access can be granted to an individual only.

OK

>  3. I believe it's a good idea to complete the technical responsibilities
>  with a note like this one:
>
>  Every commit introducing new feature shall/must/... be covered with
> corresponding test case included to the GEOS set of unit tests
> (trunk/tests/unit)

OK

>  4. IMHO there is lack of a few technical issues, but I assume we will add
> it later on, like:
>
>  - branching strategy (explain what's stable branch, etc.)
>  - basic coding guidelines
>
>  both explained on separate and *short* wiki pages.

Hop to it! :)

P

>  Greetings
>  --
>  Mateusz Loskot
>  http://mateusz.loskot.net
>
>
>  _______________________________________________
>  geos-devel mailing list
>  geos-devel@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at cleverelephant.ca  Fri Apr 18 11:39:54 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Fri Apr 18 11:39:56 2008
Subject: [geos-devel] RFC 2 - Call for Vote
Message-ID: <30fe546d0804180839h13a38a78tf44ab740e024ed4e@mail.gmail.com>

The current text is here:

http://trac.osgeo.org/geos/wiki/RFC2

PSC, please cast your votes.
From pramsey at cleverelephant.ca  Fri Apr 18 11:45:44 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Fri Apr 18 11:45:47 2008
Subject: [geos-devel] Incubation Status
Message-ID: <30fe546d0804180845k7f324b48n9f0b91fcb1019da6@mail.gmail.com>

PSC,

Our OSGeo incubation is coming along pretty well.  When RFC2 is
passed, we'll have the governance side done.

- The code provenance review is probably the largest outstanding piece
of work. I have volunteered to complete it, hopefully it won't take
long. The volume of code is large, but the number of committers is
small, so I am optimistic.

After that we will be pretty close to being ready to ask for
graduation. A few things still need to happen:

- Downloads and last bits of fixed infrastructure moved from
geos.refractions.net to osgeo.org.  I wonder if someone (hobu?) would
volunteer to help with that. It involves setting up the nightly
snapshots, doxygen generation, and download section on osgeo
infrastructure, mostly.

- Completing the items in the incubation checklist:
http://wiki.osgeo.org/wiki/GEOS_Incubation_Status
- Getting all our committers to officially assent to RFC2 on the mailing list.

So, all in all, going well, from a bureaucratic PoV.

>From a practical PoV, the general silence on the list is disturbing...
we have outstanding bugs, we have people (from Safe, at least) working
the code base... there should be more noise.  Corporate PSC members,
please ensure if you have staff assigned that they try and integrate
into the community a bit more... open source, it's not just a job,
it's a lifestyle.

Thanks!

Paul
From warmerdam at pobox.com  Fri Apr 18 11:56:42 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 18 11:57:10 2008
Subject: [geos-devel] Incubation Status
In-Reply-To: <30fe546d0804180845k7f324b48n9f0b91fcb1019da6@mail.gmail.com>
References: <30fe546d0804180845k7f324b48n9f0b91fcb1019da6@mail.gmail.com>
Message-ID: <4808C4BA.2030502@pobox.com>

Paul Ramsey wrote:
> - Downloads and last bits of fixed infrastructure moved from
> geos.refractions.net to osgeo.org.  I wonder if someone (hobu?) would
> volunteer to help with that. It involves setting up the nightly
> snapshots, doxygen generation, and download section on osgeo
> infrastructure, mostly.

Paul,

I would be willing to help with this stuff.  I gather we want a
geos.osgeo.org web site hosted on xblade14 at telascience?  (similar
to www.gdal.org and grass.osgeo.org)?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From sgillies at frii.com  Mon Apr 28 12:33:32 2008
From: sgillies at frii.com (Sean Gillies)
Date: Mon Apr 28 12:33:28 2008
Subject: [geos-devel] Binary predicate shortcuts
Message-ID: <4815FC5C.4050706@frii.com>

Could GEOS not return known results immediately when evaluating binary
predicates where both geometries are the same (same address in memory)?
If this is already done, it's buried deeper in the code than I've
looked, or I've completely missed it.

Sean
From mbdavis at refractions.net  Mon Apr 28 12:45:12 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Mon Apr 28 12:46:37 2008
Subject: [geos-devel] Binary predicate shortcuts
In-Reply-To: <4815FC5C.4050706@frii.com>
References: <4815FC5C.4050706@frii.com>
Message-ID: <4815FF18.5060200@refractions.net>

Neither GEOS nor JTS checks for identical geometries as input to the 
predicates.

What's your use case for this?  At first glance it doesn't seem like it 
would be a major source of performance loss.

You could always check for this in your wrapper..  8^)

Sean Gillies wrote:
> Could GEOS not return known results immediately when evaluating binary
> predicates where both geometries are the same (same address in memory)?
> If this is already done, it's buried deeper in the code than I've
> looked, or I've completely missed it.
>
> Sean
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From sgillies at frii.com  Mon Apr 28 13:00:35 2008
From: sgillies at frii.com (Sean Gillies)
Date: Mon Apr 28 13:00:30 2008
Subject: [geos-devel] Binary predicate shortcuts
In-Reply-To: <4815FF18.5060200@refractions.net>
References: <4815FC5C.4050706@frii.com> <4815FF18.5060200@refractions.net>
Message-ID: <481602B3.6050006@frii.com>

Thanks, Martin. I wanted to check that I wasn't duplicating.

Martin Davis wrote:
> Neither GEOS nor JTS checks for identical geometries as input to the
> predicates.
> 
> What's your use case for this?  At first glance it doesn't seem like it
> would be a major source of performance loss.
> 
> You could always check for this in your wrapper..  8^)
> 
> Sean Gillies wrote:
>> Could GEOS not return known results immediately when evaluating binary
>> predicates where both geometries are the same (same address in memory)?
>> If this is already done, it's buried deeper in the code than I've
>> looked, or I've completely missed it.
>>
>> Sean
From makzpj at gmail.com  Mon Apr 28 16:58:43 2008
From: makzpj at gmail.com (Maximo Pech)
Date: Mon Apr 28 16:58:46 2008
Subject: [geos-devel] GEOSBuffer doesn't take all of my geometry
Message-ID: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>

Hi, I'm having trouble with a geometry in WKT form, it begins like this:

POLYGON ((-97.3813520229492866 26.0028241269227607, -97.3813272725338663
26.0046293743595065, -97.3793295485156989 26.0046069937576725,
-97.3793543294448654 26.0028017481029394, -97.3813520229492866
26.0028241269227607), (-97.3813520229492866 26.0028241269227607,
-97.3813767710094567 26.0010188790133867, -97.3793791080158968
26.0009965019755249, -97.3773814473803014 26.0009740973626933,
-97.3753837891055838 26.0009516651750232, -97.3753589495133269
26.0027569077319392, -97.3753341075571370 26.00456214981606...

It's a polygon with many rings inside it. I'm trying to buffer it to make a
intersection operation with a lot of other geometries because GEOS says it
has a self-intersection at or near point -97.3814 26.0028, but after
buffering it my geometry becomes:

POLYGON ((-97.3813520229492866 26.0028241269227607, -97.3813272725338663
26.0046293743595065, -97.3793295485156989 26.0046069937576725,
-97.3793543294448654 26.0028017481029394, -97.3813520229492866
26.0028241269227607))

All of the remaining rings are gone.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080428/7b8e7a9e/attachment.html
From mbdavis at refractions.net  Mon Apr 28 17:07:05 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Mon Apr 28 17:14:18 2008
Subject: [geos-devel] GEOSBuffer doesn't take all of my geometry
In-Reply-To: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>
References: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>
Message-ID: <48163C79.6010203@refractions.net>

When I look at the geometry fragment you provided, the "hole" actually 
lies completely outside the shell.  If the other holes are the same, 
then buffer just removes them entirely.

In other words, buffer is behaving according to spec - it's just that 
your input geometry is too munged to be fixed by buffer.  8^)

Maximo Pech wrote:
> Hi, I'm having trouble with a geometry in WKT form, it begins like this:
>
> POLYGON ((-97.3813520229492866 26.0028241269227607, 
> -97.3813272725338663 26.0046293743595065, -97.3793295485156989 
> 26.0046069937576725, -97.3793543294448654 26.0028017481029394, 
> -97.3813520229492866 26.0028241269227607), (-97.3813520229492866 
> 26.0028241269227607, -97.3813767710094567 26.0010188790133867, 
> -97.3793791080158968 26.0009965019755249, -97.3773814473803014 
> 26.0009740973626933, -97.3753837891055838 26.0009516651750232, 
> -97.3753589495133269 26.0027569077319392, -97.3753341075571370 
> 26.00456214981606...
>
> It's a polygon with many rings inside it. I'm trying to buffer it to 
> make a intersection operation with a lot of other geometries because 
> GEOS says it has a self-intersection at or near point -97.3814 
> 26.0028, but after buffering it my geometry becomes:
>
> POLYGON ((-97.3813520229492866 26.0028241269227607, 
> -97.3813272725338663 26.0046293743595065, -97.3793295485156989 
> 26.0046069937576725, -97.3793543294448654 26.0028017481029394, 
> -97.3813520229492866 26.0028241269227607))
>
> All of the remaining rings are gone.
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From robert.coup at koordinates.com  Mon Apr 28 17:41:12 2008
From: robert.coup at koordinates.com (Robert Coup)
Date: Mon Apr 28 17:41:15 2008
Subject: [geos-devel] GEOSBuffer doesn't take all of my geometry
In-Reply-To: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>
References: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>
Message-ID: <c5097ac40804281441i7773fd44qc7bfe42cc2a27b44@mail.gmail.com>

On Tue, Apr 29, 2008 at 8:58 AM, Maximo Pech <makzpj@gmail.com> wrote:

> It's a polygon with many rings inside it. I'm trying to buffer it to make a intersection operation with a lot of other geometries because GEOS says it has a self-intersection at or near point -97.3814 26.0028, but after buffering it my geometry becomes:
<snip>
> All of the remaining rings are gone.

Thats how buffer() works ... what do you want to occur?
- buffer inner rings outwards?
- buffer inner rings inwards?
- buffer inner rings inwards or outwards depending on their hole-ness?

Basically you'd need to buffer each ring of the polygon separately,
then re-assemble them.

This is why "just buffer(0) it" isn't really a decent solution for
"fixing" invalid geometries... it might be worth having a look at this
thread from a week or so ago on the postgis list:
http://postgis.refractions.net/pipermail/postgis-users/2008-April/019390.html

- Rob :)
From makzpj at gmail.com  Mon Apr 28 18:07:07 2008
From: makzpj at gmail.com (Maximo Pech)
Date: Mon Apr 28 18:07:09 2008
Subject: [geos-devel] GEOSBuffer doesn't take all of my geometry
In-Reply-To: <48163C79.6010203@refractions.net>
References: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>
	<48163C79.6010203@refractions.net>
Message-ID: <e70424ee0804281507t4a5fec29u60f3b71f9541c49a@mail.gmail.com>

Well, I will explain you why I have this weird geometry.

The application I'm coding uses 2 esri shapefiles, one of them is huge, it's
the size of Mexico, and the shape of it is very similar to Mexico. It's a
huge multipolygon 24M in size.

Then I have another shapefile, the size of a city, this one is made of many
polygons and it's smaller.

I have to calculate the intersection percent between the first and the
second shapes.

To do this I convert both shapefiles to WKT, so I end up with a huge WKT 54M
in size from the first shapefile and many small WKT's from the second one.

Problems start with the first shape, the huge one, having lots of
self-intersections. I tried to "fix" it by doing a GEOSbuffer on it, but
after some calculations, GEOSBuffer fails with an error I don't remember.

After that I tried spliting the huge WKT multipolygon into many smaller WKT
polygons, and applying a GEOSBuffer to each one of them when needed, but
this doesn't work either because many of the resulting polygons are screwed
up, and I can't discard any of them. Also there is no way I can get a
shapefile with a valid multipolygon inside it, I have to find a way to make
it usable for GEOSIntersection.

2008/4/28 Martin Davis <mbdavis@refractions.net>:

> When I look at the geometry fragment you provided, the "hole" actually
> lies completely outside the shell.  If the other holes are the same, then
> buffer just removes them entirely.
>
> In other words, buffer is behaving according to spec - it's just that your
> input geometry is too munged to be fixed by buffer.  8^)
>
> Maximo Pech wrote:
>
> > Hi, I'm having trouble with a geometry in WKT form, it begins like this:
> >
> > POLYGON ((-97.3813520229492866 26.0028241269227607, -97.3813272725338663
> > 26.0046293743595065, -97.3793295485156989 26.0046069937576725,
> > -97.3793543294448654 26.0028017481029394, -97.3813520229492866
> > 26.0028241269227607), (-97.3813520229492866 26.0028241269227607,
> > -97.3813767710094567 26.0010188790133867, -97.3793791080158968
> > 26.0009965019755249, -97.3773814473803014 26.0009740973626933,
> > -97.3753837891055838 26.0009516651750232, -97.3753589495133269
> > 26.0027569077319392, -97.3753341075571370 26.00456214981606...
> >
> > It's a polygon with many rings inside it. I'm trying to buffer it to
> > make a intersection operation with a lot of other geometries because GEOS
> > says it has a self-intersection at or near point -97.3814 26.0028, but after
> > buffering it my geometry becomes:
> >
> > POLYGON ((-97.3813520229492866 26.0028241269227607, -97.3813272725338663
> > 26.0046293743595065, -97.3793295485156989 26.0046069937576725,
> > -97.3793543294448654 26.0028017481029394, -97.3813520229492866
> > 26.0028241269227607))
> >
> > All of the remaining rings are gone.
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
>
> --
> Martin Davis
> Senior Technical Architect
> Refractions Research, Inc.
> (250) 383-3022
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080428/9c56a2b6/attachment.html
From mbdavis at refractions.net  Mon Apr 28 18:27:39 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Mon Apr 28 18:37:00 2008
Subject: [geos-devel] GEOSBuffer doesn't take all of my geometry
In-Reply-To: <e70424ee0804281507t4a5fec29u60f3b71f9541c49a@mail.gmail.com>
References: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>	<48163C79.6010203@refractions.net>
	<e70424ee0804281507t4a5fec29u60f3b71f9541c49a@mail.gmail.com>
Message-ID: <48164F5B.7010200@refractions.net>

Sounds like a tough problem, alright.

Can you throw away all the component polygons in the first shape which 
don't intersect the second shapefile?  Does that reduce the size at all?

Otherwise, you could use a manual tool (like JUMP) to find all the 
self-intersections in the first shape and manually fix them.

I guess one other thing I might try is to:
- split the first shape into linework
- node the linework (by unioning it with a single point)
- polygonize the noded linework
That might give you a clean "big poly" - although if it is really 
screwed up you might have to drop some of the created polygons.


Maximo Pech wrote:
> Well, I will explain you why I have this weird geometry.
>
> The application I'm coding uses 2 esri shapefiles, one of them is 
> huge, it's the size of Mexico, and the shape of it is very similar to 
> Mexico. It's a huge multipolygon 24M in size.
>
> Then I have another shapefile, the size of a city, this one is made of 
> many polygons and it's smaller.
>
> I have to calculate the intersection percent between the first and the 
> second shapes.
>
> To do this I convert both shapefiles to WKT, so I end up with a huge 
> WKT 54M in size from the first shapefile and many small WKT's from the 
> second one.
>
> Problems start with the first shape, the huge one, having lots of 
> self-intersections. I tried to "fix" it by doing a GEOSbuffer on it, 
> but after some calculations, GEOSBuffer fails with an error I don't 
> remember.
>
> After that I tried spliting the huge WKT multipolygon into many 
> smaller WKT polygons, and applying a GEOSBuffer to each one of them 
> when needed, but this doesn't work either because many of the 
> resulting polygons are screwed up, and I can't discard any of them. 
> Also there is no way I can get a shapefile with a valid multipolygon 
> inside it, I have to find a way to make it usable for GEOSIntersection.
>
> 2008/4/28 Martin Davis <mbdavis@refractions.net 
> <mailto:mbdavis@refractions.net>>:
>
>     When I look at the geometry fragment you provided, the "hole"
>     actually lies completely outside the shell.  If the other holes
>     are the same, then buffer just removes them entirely.
>
>     In other words, buffer is behaving according to spec - it's just
>     that your input geometry is too munged to be fixed by buffer.  8^)
>
>     Maximo Pech wrote:
>
>         Hi, I'm having trouble with a geometry in WKT form, it begins
>         like this:
>
>         POLYGON ((-97.3813520229492866 26.0028241269227607,
>         -97.3813272725338663 26.0046293743595065, -97.3793295485156989
>         26.0046069937576725, -97.3793543294448654 26.0028017481029394,
>         -97.3813520229492866 26.0028241269227607),
>         (-97.3813520229492866 26.0028241269227607,
>         -97.3813767710094567 26.0010188790133867, -97.3793791080158968
>         26.0009965019755249, -97.3773814473803014 26.0009740973626933,
>         -97.3753837891055838 26.0009516651750232, -97.3753589495133269
>         26.0027569077319392, -97.3753341075571370 26.00456214981606...
>
>         It's a polygon with many rings inside it. I'm trying to buffer
>         it to make a intersection operation with a lot of other
>         geometries because GEOS says it has a self-intersection at or
>         near point -97.3814 26.0028, but after buffering it my
>         geometry becomes:
>
>         POLYGON ((-97.3813520229492866 26.0028241269227607,
>         -97.3813272725338663 26.0046293743595065, -97.3793295485156989
>         26.0046069937576725, -97.3793543294448654 26.0028017481029394,
>         -97.3813520229492866 26.0028241269227607))
>
>         All of the remaining rings are gone.
>         ------------------------------------------------------------------------
>
>         _______________________________________________
>         geos-devel mailing list
>         geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>     -- 
>     Martin Davis
>     Senior Technical Architect
>     Refractions Research, Inc.
>     (250) 383-3022
>
>     _______________________________________________
>     geos-devel mailing list
>     geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From makzpj at gmail.com  Mon Apr 28 19:00:19 2008
From: makzpj at gmail.com (Maximo Pech)
Date: Mon Apr 28 19:00:21 2008
Subject: [geos-devel] GEOSBuffer doesn't take all of my geometry
In-Reply-To: <48164F5B.7010200@refractions.net>
References: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>
	<48163C79.6010203@refractions.net>
	<e70424ee0804281507t4a5fec29u60f3b71f9541c49a@mail.gmail.com>
	<48164F5B.7010200@refractions.net>
Message-ID: <e70424ee0804281600n6cc1ea6bicaa7c2120afb6044@mail.gmail.com>

Sounds like a tough problem, alright.

>
> Can you throw away all the component polygons in the first shape which
> don't intersect the second shapefile?  Does that reduce the size at all?


That would't work because many of the component polygons are invalid, in
order to throw away them if they don't intersect the shapefile I have to
clean them first because GEOSIntersects doesn't work with invalid polygons,
but some (if not all) are as screwed up as the example polygons of my first
post (inner rings outside of outer rings and many ugly things...)


>
>
> Otherwise, you could use a manual tool (like JUMP) to find all the
> self-intersections in the first shape and manually fix them.


That would be good but it's required that the final user just launches the
process and it should calculate and fix the invalid input automatically.


>
>
> I guess one other thing I might try is to:
> - split the first shape into linework
> - node the linework (by unioning it with a single point)
> - polygonize the noded linework
> That might give you a clean "big poly" - although if it is really screwed
> up you might have to drop some of the created polygons.


I will try that but I don't understand what do you mean by linework.


>
>
>
> Maximo Pech wrote:
>
> > Well, I will explain you why I have this weird geometry.
> >
> > The application I'm coding uses 2 esri shapefiles, one of them is huge,
> > it's the size of Mexico, and the shape of it is very similar to Mexico. It's
> > a huge multipolygon 24M in size.
> >
> > Then I have another shapefile, the size of a city, this one is made of
> > many polygons and it's smaller.
> >
> > I have to calculate the intersection percent between the first and the
> > second shapes.
> >
> > To do this I convert both shapefiles to WKT, so I end up with a huge WKT
> > 54M in size from the first shapefile and many small WKT's from the second
> > one.
> >
> > Problems start with the first shape, the huge one, having lots of
> > self-intersections. I tried to "fix" it by doing a GEOSbuffer on it, but
> > after some calculations, GEOSBuffer fails with an error I don't remember.
> >
> > After that I tried spliting the huge WKT multipolygon into many smaller
> > WKT polygons, and applying a GEOSBuffer to each one of them when needed, but
> > this doesn't work either because many of the resulting polygons are screwed
> > up, and I can't discard any of them. Also there is no way I can get a
> > shapefile with a valid multipolygon inside it, I have to find a way to make
> > it usable for GEOSIntersection.
> >
> > 2008/4/28 Martin Davis <mbdavis@refractions.net <mailto:
> > mbdavis@refractions.net>>:
> >
> >
> >    When I look at the geometry fragment you provided, the "hole"
> >    actually lies completely outside the shell.  If the other holes
> >    are the same, then buffer just removes them entirely.
> >
> >    In other words, buffer is behaving according to spec - it's just
> >    that your input geometry is too munged to be fixed by buffer.  8^)
> >
> >    Maximo Pech wrote:
> >
> >        Hi, I'm having trouble with a geometry in WKT form, it begins
> >        like this:
> >
> >        POLYGON ((-97.3813520229492866 26.0028241269227607,
> >        -97.3813272725338663 26.0046293743595065, -97.3793295485156989
> >        26.0046069937576725, -97.3793543294448654 26.0028017481029394,
> >        -97.3813520229492866 26.0028241269227607),
> >        (-97.3813520229492866 26.0028241269227607,
> >        -97.3813767710094567 26.0010188790133867, -97.3793791080158968
> >        26.0009965019755249, -97.3773814473803014 26.0009740973626933,
> >        -97.3753837891055838 26.0009516651750232, -97.3753589495133269
> >        26.0027569077319392, -97.3753341075571370 26.00456214981606...
> >
> >        It's a polygon with many rings inside it. I'm trying to buffer
> >        it to make a intersection operation with a lot of other
> >        geometries because GEOS says it has a self-intersection at or
> >        near point -97.3814 26.0028, but after buffering it my
> >        geometry becomes:
> >
> >        POLYGON ((-97.3813520229492866 26.0028241269227607,
> >        -97.3813272725338663 26.0046293743595065, -97.3793295485156989
> >        26.0046069937576725, -97.3793543294448654 26.0028017481029394,
> >        -97.3813520229492866 26.0028241269227607))
> >
> >        All of the remaining rings are gone.
> >
> >  ------------------------------------------------------------------------
> >
> >        _______________________________________________
> >        geos-devel mailing list
> >        geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
> >        http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> >
> >    --    Martin Davis
> >    Senior Technical Architect
> >    Refractions Research, Inc.
> >    (250) 383-3022
> >
> >    _______________________________________________
> >    geos-devel mailing list
> >    geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
> >    http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
>
> --
> Martin Davis
> Senior Technical Architect
> Refractions Research, Inc.
> (250) 383-3022
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080428/67656379/attachment.html
From mbdavis at refractions.net  Mon Apr 28 19:12:04 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Mon Apr 28 19:13:33 2008
Subject: [geos-devel] GEOSBuffer doesn't take all of my geometry
In-Reply-To: <e70424ee0804281600n6cc1ea6bicaa7c2120afb6044@mail.gmail.com>
References: <e70424ee0804281358p157499f6r5ec142e109e8c620@mail.gmail.com>	<48163C79.6010203@refractions.net>	<e70424ee0804281507t4a5fec29u60f3b71f9541c49a@mail.gmail.com>	<48164F5B.7010200@refractions.net>
	<e70424ee0804281600n6cc1ea6bicaa7c2120afb6044@mail.gmail.com>
Message-ID: <481659C4.6050704@refractions.net>



Maximo Pech wrote:
> Sounds like a tough problem, alright.
>
>
>     Can you throw away all the component polygons in the first shape
>     which don't intersect the second shapefile?  Does that reduce the
>     size at all?
>
>
> That would't work because many of the component polygons are invalid, 
> in order to throw away them if they don't intersect the shapefile I 
> have to clean them first because GEOSIntersects doesn't work with 
> invalid polygons, but some (if not all) are as screwed up as the 
> example polygons of my first post (inner rings outside of outer rings 
> and many ugly things...)

You could check their Envelopes, instead of the geometry itself.  That 
avoids the problem with invalid geometry.
>  
>
>
>
>     Otherwise, you could use a manual tool (like JUMP) to find all the
>     self-intersections in the first shape and manually fix them.
>
>
> That would be good but it's required that the final user just launches 
> the process and it should calculate and fix the invalid input 
> automatically.
Well, all I can say is that there is no magic answer to cleaning invalid 
geometry.  That's why APIs generally require valid geometry!  When 
trying to handle invalid data, the approach to take is heavily dependent 
on exactly *how* they can be invalid.  Your problem is compounded by the 
fact that the input is so large.
>  
>
>
>
>     I guess one other thing I might try is to:
>     - split the first shape into linework
>     - node the linework (by unioning it with a single point)
>     - polygonize the noded linework
>     That might give you a clean "big poly" - although if it is really
>     screwed up you might have to drop some of the created polygons.
>
>
> I will try that but I don't understand what do you mean by linework.

"Linework" means the lines which make up the geometries.  In the case of 
polygons, you get get this by calling getBoundary.
>  
>
>
>
>
>     Maximo Pech wrote:
>
>         Well, I will explain you why I have this weird geometry.
>
>         The application I'm coding uses 2 esri shapefiles, one of them
>         is huge, it's the size of Mexico, and the shape of it is very
>         similar to Mexico. It's a huge multipolygon 24M in size.
>
>         Then I have another shapefile, the size of a city, this one is
>         made of many polygons and it's smaller.
>
>         I have to calculate the intersection percent between the first
>         and the second shapes.
>
>         To do this I convert both shapefiles to WKT, so I end up with
>         a huge WKT 54M in size from the first shapefile and many small
>         WKT's from the second one.
>
>         Problems start with the first shape, the huge one, having lots
>         of self-intersections. I tried to "fix" it by doing a
>         GEOSbuffer on it, but after some calculations, GEOSBuffer
>         fails with an error I don't remember.
>
>         After that I tried spliting the huge WKT multipolygon into
>         many smaller WKT polygons, and applying a GEOSBuffer to each
>         one of them when needed, but this doesn't work either because
>         many of the resulting polygons are screwed up, and I can't
>         discard any of them. Also there is no way I can get a
>         shapefile with a valid multipolygon inside it, I have to find
>         a way to make it usable for GEOSIntersection.
>
>         2008/4/28 Martin Davis <mbdavis@refractions.net
>         <mailto:mbdavis@refractions.net>
>         <mailto:mbdavis@refractions.net
>         <mailto:mbdavis@refractions.net>>>:
>
>
>            When I look at the geometry fragment you provided, the "hole"
>            actually lies completely outside the shell.  If the other holes
>            are the same, then buffer just removes them entirely.
>
>            In other words, buffer is behaving according to spec - it's
>         just
>            that your input geometry is too munged to be fixed by
>         buffer.  8^)
>
>            Maximo Pech wrote:
>
>                Hi, I'm having trouble with a geometry in WKT form, it
>         begins
>                like this:
>
>                POLYGON ((-97.3813520229492866 26.0028241269227607,
>                -97.3813272725338663 26.0046293743595065,
>         -97.3793295485156989
>                26.0046069937576725, -97.3793543294448654
>         26.0028017481029394,
>                -97.3813520229492866 26.0028241269227607),
>                (-97.3813520229492866 26.0028241269227607,
>                -97.3813767710094567 26.0010188790133867,
>         -97.3793791080158968
>                26.0009965019755249, -97.3773814473803014
>         26.0009740973626933,
>                -97.3753837891055838 26.0009516651750232,
>         -97.3753589495133269
>                26.0027569077319392, -97.3753341075571370
>         26.00456214981606...
>
>                It's a polygon with many rings inside it. I'm trying to
>         buffer
>                it to make a intersection operation with a lot of other
>                geometries because GEOS says it has a self-intersection
>         at or
>                near point -97.3814 26.0028, but after buffering it my
>                geometry becomes:
>
>                POLYGON ((-97.3813520229492866 26.0028241269227607,
>                -97.3813272725338663 26.0046293743595065,
>         -97.3793295485156989
>                26.0046069937576725, -97.3793543294448654
>         26.0028017481029394,
>                -97.3813520229492866 26.0028241269227607))
>
>                All of the remaining rings are gone.
>              
>          ------------------------------------------------------------------------
>
>                _______________________________________________
>                geos-devel mailing list
>                geos-devel@lists.osgeo.org
>         <mailto:geos-devel@lists.osgeo.org>
>         <mailto:geos-devel@lists.osgeo.org
>         <mailto:geos-devel@lists.osgeo.org>>
>
>                http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>            --    Martin Davis
>            Senior Technical Architect
>            Refractions Research, Inc.
>            (250) 383-3022
>
>            _______________________________________________
>            geos-devel mailing list
>            geos-devel@lists.osgeo.org
>         <mailto:geos-devel@lists.osgeo.org>
>         <mailto:geos-devel@lists.osgeo.org
>         <mailto:geos-devel@lists.osgeo.org>>
>
>            http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>         ------------------------------------------------------------------------
>
>         _______________________________________________
>         geos-devel mailing list
>         geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>     -- 
>     Martin Davis
>     Senior Technical Architect
>     Refractions Research, Inc.
>     (250) 383-3022
>
>     _______________________________________________
>     geos-devel mailing list
>     geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From makzpj at gmail.com  Tue Apr 29 18:39:18 2008
From: makzpj at gmail.com (Maximo Pech)
Date: Tue Apr 29 18:39:21 2008
Subject: [geos-devel] GEOSContaints return value
Message-ID: <e70424ee0804291539t6e9869a1y3015d4a68ce0fa2d@mail.gmail.com>

GEOSContains(g1, g2) returns 1 when g1 contains g2 or when g2 contains g1?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080429/086f9883/attachment.html
From mbdavis at refractions.net  Tue Apr 29 18:51:27 2008
From: mbdavis at refractions.net (Martin Davis)
Date: Tue Apr 29 18:52:43 2008
Subject: [geos-devel] GEOSContaints return value
In-Reply-To: <e70424ee0804291539t6e9869a1y3015d4a68ce0fa2d@mail.gmail.com>
References: <e70424ee0804291539t6e9869a1y3015d4a68ce0fa2d@mail.gmail.com>
Message-ID: <4817A66F.3040308@refractions.net>

You read it in the order in which the args are given.  So:

GEOSContains(g1, g2) = 1 iff g1 contains g2

Maximo Pech wrote:
> GEOSContains(g1, g2) returns 1 when g1 contains g2 or when g2 contains g1?
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From makzpj at gmail.com  Wed Apr 30 13:51:21 2008
From: makzpj at gmail.com (Maximo Pech)
Date: Wed Apr 30 13:51:24 2008
Subject: [geos-devel] Multilinestring to polygon
Message-ID: <e70424ee0804301051h44751c4fy9cda966198c8ab85@mail.gmail.com>

How can I convert a multilinestring into a polygon?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080430/c3c73473/attachment.html
From ivanmarkovic at beotel.net  Wed Apr 30 15:25:36 2008
From: ivanmarkovic at beotel.net (=?US-ASCII?B?SXZhbiBNYXJrb3ZpYw==?=)
Date: Wed Apr 30 14:28:24 2008
Subject: [geos-devel] Unsubscribe
In-Reply-To: <20080430160008.87BBFE017DF@lists.osgeo.org>
References: <20080430160008.87BBFE017DF@lists.osgeo.org>
Message-ID: <1209583536815@ivanmarkovic_beotel.net>

Unsubscribe. Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080430/04405cd1/attachment.html
