From geos-trac at osgeo.org  Mon Jan  5 18:43:24 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Jan  5 18:43:25 2009
Subject: [geos-devel] Re: [GEOS] #218: Memory Leak Fix for BufferBuilder
In-Reply-To: <046.81f753f3f3893c09b05723455fa2c3c5@osgeo.org>
References: <046.81f753f3f3893c09b05723455fa2c3c5@osgeo.org>
Message-ID: <055.d125ff0f9587d13b8def28a4bdc843d4@osgeo.org>

#218: Memory Leak Fix for BufferBuilder
---------------------+------------------------------------------------------
 Reporter:  swongu   |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect   |       Status:  closed                    
 Priority:  minor    |    Milestone:                            
Component:  Core     |      Version:  svn-trunk                 
 Severity:  Content  |   Resolution:  fixed                     
 Keywords:           |  
---------------------+------------------------------------------------------
Changes (by swongu):

  * status:  new => closed
  * resolution:  => fixed

Comment:

 Fixed in r2231.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/218#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From charles.thibert at ingres.com  Tue Jan  6 14:01:30 2009
From: charles.thibert at ingres.com (Chuck Thibert)
Date: Tue Jan  6 14:01:32 2009
Subject: [geos-devel] Re: Thread Safe CAPI 2.0 patch online
In-Reply-To: <1229719376.3344.13.camel@localhost.localdomain>
References: <30fe546d0811271008y6fa0d65dsc626eb20c7b1ab56@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F052@ZDND.DND.boston.cob>
	<1228132527.3229.2.camel@localhost.localdomain>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20519B48C@ZDND.DND.boston.cob>
	<1229030051.4148.2.camel@localhost.localdomain>
	<30fe546d0812172107m29753029j2480a0d7e47c7442@mail.gmail.com>
	<30fe546d0812172125q27fbfb50rd757dac60748244@mail.gmail.com>
	<1229704267.3344.3.camel@localhost.localdomain>
	<30fe546d0812190850r5f463547j8d702a755d47716d@mail.gmail.com>
	<1229714059.3344.6.camel@localhost.localdomain>
	<30fe546d0812191125y718df14bo738b716ed4224ac@mail.gmail.com>
	<1229719376.3344.13.camel@localhost.localdomain>
Message-ID: <1231268490.3268.1.camel@localhost.localdomain>

Hi again,

With the holidays over, just want to push this up the stack again.  I
want to be sure it's commit ready when I hand it off.  Any further
comments?

Thanks,
Chuck


On Fri, 2008-12-19 at 15:42 -0500, Chuck Thibert wrote:
> Hi all,
> 
> I've changed the patch based on Paul's comments.
> 
> -- combined the two header files for easy maintenance. (This 'fixed' the
> configure error by getting rid of the thread safe header.)
> -- fixed the char * error.
> -- changed the .c from geosTS_c.cpp to geos_ts_c.cpp
> -- moved the test executables to tests/unit/capi directory.  This seemed
> to cause patch a bit of problems so I created a little script that does
> the svn move before applying the patch.
> 
> All this is in a new 2.0 tar file attached to the ticket.
> 
> Thanks again for the testing and comments Paul.
> 
> Chuck
From pramsey at cleverelephant.ca  Tue Jan  6 15:46:10 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue Jan  6 15:46:43 2009
Subject: [geos-devel] Re: Thread Safe CAPI 2.0 patch online
In-Reply-To: <1231268490.3268.1.camel@localhost.localdomain>
References: <30fe546d0811271008y6fa0d65dsc626eb20c7b1ab56@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F052@ZDND.DND.boston.cob>
	<1228132527.3229.2.camel@localhost.localdomain>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20519B48C@ZDND.DND.boston.cob>
	<1229030051.4148.2.camel@localhost.localdomain>
	<30fe546d0812172107m29753029j2480a0d7e47c7442@mail.gmail.com>
	<30fe546d0812172125q27fbfb50rd757dac60748244@mail.gmail.com>
	<1229704267.3344.3.camel@localhost.localdomain>
	<30fe546d0812190850r5f463547j8d702a755d47716d@mail.gmail.com>
	<1229714059.3344.6.camel@localhost.localdomain>
	<30fe546d0812191125y718df14bo738b716ed4224ac@mail.gmail.com>
	<1229719376.3344.13.camel@localhost.localdomain>
	<1231268490.3268.1.camel@localhost.localdomain>
Message-ID: <975E0591-F5C2-49F7-AD61-B75C56AD8648@cleverelephant.ca>

I can review again, but a second pair of eyes would be preferred.

P

On Jan 6, 2009, at 11:01 AM, Chuck Thibert wrote:

> Hi again,
>
> With the holidays over, just want to push this up the stack again.  I
> want to be sure it's commit ready when I hand it off.  Any further
> comments?
>
> Thanks,
> Chuck
>
>
> On Fri, 2008-12-19 at 15:42 -0500, Chuck Thibert wrote:
>> Hi all,
>>
>> I've changed the patch based on Paul's comments.
>>
>> -- combined the two header files for easy maintenance. (This  
>> 'fixed' the
>> configure error by getting rid of the thread safe header.)
>> -- fixed the char * error.
>> -- changed the .c from geosTS_c.cpp to geos_ts_c.cpp
>> -- moved the test executables to tests/unit/capi directory.  This  
>> seemed
>> to cause patch a bit of problems so I created a little script that  
>> does
>> the svn move before applying the patch.
>>
>> All this is in a new 2.0 tar file attached to the ticket.
>>
>> Thanks again for the testing and comments Paul.
>>
>> Chuck
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel


--
Paul Ramsey
pramsey@cleverelephant.ca
+1 250 885 0632

From pramsey at cleverelephant.ca  Thu Jan  8 11:46:45 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu Jan  8 11:46:53 2009
Subject: [geos-devel] Re: Thread Safe CAPI 2.0 patch online
In-Reply-To: <975E0591-F5C2-49F7-AD61-B75C56AD8648@cleverelephant.ca>
References: <30fe546d0811271008y6fa0d65dsc626eb20c7b1ab56@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F052@ZDND.DND.boston.cob>
	<1228132527.3229.2.camel@localhost.localdomain>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20519B48C@ZDND.DND.boston.cob>
	<1229030051.4148.2.camel@localhost.localdomain>
	<30fe546d0812172107m29753029j2480a0d7e47c7442@mail.gmail.com>
	<30fe546d0812172125q27fbfb50rd757dac60748244@mail.gmail.com>
	<1229704267.3344.3.camel@localhost.localdomain>
	<30fe546d0812190850r5f463547j8d702a755d47716d@mail.gmail.com>
	<1229714059.3344.6.camel@localhost.localdomain>
	<30fe546d0812191125y718df14bo738b716ed4224ac@mail.gmail.com>
	<1229719376.3344.13.camel@localhost.localdomain>
	<1231268490.3268.1.camel@localhost.localdomain>
	<975E0591-F5C2-49F7-AD61-B75C56AD8648@cleverelephant.ca>
Message-ID: <ABB1CE9A-EA2C-425F-9A66-097FED53DDEE@cleverelephant.ca>

OK cool kids, I'm just going to review it again myself and then apply  
it if it looks OK to *me*... (and we all know where *that* leads...:)

P.

On Jan 6, 2009, at 12:46 PM, Paul Ramsey wrote:

> I can review again, but a second pair of eyes would be preferred.
>
> P
>
> On Jan 6, 2009, at 11:01 AM, Chuck Thibert wrote:
>
>> Hi again,
>>
>> With the holidays over, just want to push this up the stack again.  I
>> want to be sure it's commit ready when I hand it off.  Any further
>> comments?
>>
>> Thanks,
>> Chuck
>>
>>
>> On Fri, 2008-12-19 at 15:42 -0500, Chuck Thibert wrote:
>>> Hi all,
>>>
>>> I've changed the patch based on Paul's comments.
>>>
>>> -- combined the two header files for easy maintenance. (This  
>>> 'fixed' the
>>> configure error by getting rid of the thread safe header.)
>>> -- fixed the char * error.
>>> -- changed the .c from geosTS_c.cpp to geos_ts_c.cpp
>>> -- moved the test executables to tests/unit/capi directory.  This  
>>> seemed
>>> to cause patch a bit of problems so I created a little script that  
>>> does
>>> the svn move before applying the patch.
>>>
>>> All this is in a new 2.0 tar file attached to the ticket.
>>>
>>> Thanks again for the testing and comments Paul.
>>>
>>> Chuck
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> --
> Paul Ramsey
> pramsey@cleverelephant.ca
> +1 250 885 0632
>


--
Paul Ramsey
pramsey@cleverelephant.ca
+1 250 885 0632

From pramsey at cleverelephant.ca  Sun Jan 11 17:00:53 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Sun Jan 11 17:00:56 2009
Subject: [geos-devel] Toronto Code Sprint: March 7-10
Message-ID: <30fe546d0901111400i4b192724w439de72641c91e79@mail.gmail.com>

Community members,

Reminder, there is a Code Sprint event occurring this spring that
members of the "C tribe" of open source GIS projects might be
interested in attending.

  http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009

We have space for only about five more attendees, and a couple more
sponsors, so don't be shy (sponsors please contact me directly). Those
who have already signed up, please finalize your travel plans and mark
your attendance confirmed ASAP in case we have to cap attendance at
the event as we approach the date.

Thanks,

Paul
From sgillies at frii.com  Sun Jan 11 22:56:01 2009
From: sgillies at frii.com (Sean Gillies)
Date: Sun Jan 11 23:03:19 2009
Subject: [geos-devel] C API coordinate sequence dimensions
Message-ID: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>

I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter what

   # Accessing libgeos_c via Python ctypes
   >>> s = lgeos.GEOSCoordSeq_create(2, 2)
   >>> ndim = c_int()
   >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
   1
   >>> ndim
   c_long(3)

Is this a known bug? Looks like we're only testing creation of 3D  
coordinate sequences in

http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp

--
Sean Gillies
http://sgillies.net

From geosanak at gmail.com  Mon Jan 12 07:40:31 2009
From: geosanak at gmail.com (Sanak)
Date: Mon Jan 12 07:40:32 2009
Subject: [geos-devel] C API coordinate sequence dimensions
In-Reply-To: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>
Message-ID: <5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>

Hi list,

I don't know that this is a known bug, but
CoordinateArraySequence.getDimension() method always return 3.

[trunk/source/headers/geos/geom/CoordinateArraySequence.h - line 88]
size_t getDimension() const { return 3; }


JTS(JTS Topology Suite) seems to be also the same.

[jts/src/com/vividsolutions/jts/geom/DefaultCoordinateSequence.java - line
95]
public int getDimension() { return 3; }

I don't know that this is a specification or not...

Regards,

Sanak.

2009/1/12 Sean Gillies <sgillies@frii.com>

> I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter what
>
>  # Accessing libgeos_c via Python ctypes
>  >>> s = lgeos.GEOSCoordSeq_create(2, 2)
>  >>> ndim = c_int()
>  >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
>  1
>  >>> ndim
>  c_long(3)
>
> Is this a known bug? Looks like we're only testing creation of 3D
> coordinate sequences in
>
>
> http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
>
> --
> Sean Gillies
> http://sgillies.net
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090112/f0ec9050/attachment.html
From mbdavis at refractions.net  Mon Jan 12 12:56:23 2009
From: mbdavis at refractions.net (Martin Davis)
Date: Mon Jan 12 12:57:42 2009
Subject: [geos-devel] C API coordinate sequence dimensions
In-Reply-To: <5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>
	<5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
Message-ID: <496B8447.3080203@refractions.net>

Actually JTS implements this correctly.  The return value from 
getDimension is computed by the implementation of CoordinateSequence.  
In the case of DefaultCoordinateSequence (which by the way is deprecated 
and replaced by CoordinateArraySequence) the value is alway 3, since the 
Coordinate representation used by these sequences always allows for 3 
ordinates.

In the case of PackedCoordinateSequence the dimension can be selected on 
creation, and this is the value that is returned by getDimension.

Sanak wrote:
> Hi list,
>
> I don't know that this is a known bug, but 
> CoordinateArraySequence.getDimension() method always return 3.
>
> [trunk/source/headers/geos/geom/CoordinateArraySequence.h - line 88]
> size_t getDimension() const { return 3; }
>
>
> JTS(JTS Topology Suite) seems to be also the same.
>
> [jts/src/com/vividsolutions/jts/geom/DefaultCoordinateSequence.java - 
> line 95]
> public int getDimension() { return 3; }
>
> I don't know that this is a specification or not...
>
> Regards,
>
> Sanak.
>
> 2009/1/12 Sean Gillies <sgillies@frii.com <mailto:sgillies@frii.com>>
>
>     I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter what
>
>      # Accessing libgeos_c via Python ctypes
>      >>> s = lgeos.GEOSCoordSeq_create(2, 2)
>      >>> ndim = c_int()
>      >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
>      1
>      >>> ndim
>      c_long(3)
>
>     Is this a known bug? Looks like we're only testing creation of 3D
>     coordinate sequences in
>
>     http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
>
>     --
>     Sean Gillies
>     http://sgillies.net
>
>     _______________________________________________
>     geos-devel mailing list
>     geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From sgillies at frii.com  Mon Jan 12 13:04:22 2009
From: sgillies at frii.com (Sean Gillies)
Date: Mon Jan 12 13:04:26 2009
Subject: [geos-devel] C API coordinate sequence dimensions
In-Reply-To: <496B8447.3080203@refractions.net>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>
	<5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
	<496B8447.3080203@refractions.net>
Message-ID: <4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>

So, the dimension argument in GEOSCoordSeq_create is ignored unless  
the active sequence implementation takes dimensions other than 3?

Why is GEOS's default sequence 3D when all operations are 2D?

Sean

On Jan 12, 2009, at 10:56 AM, Martin Davis wrote:

> Actually JTS implements this correctly.  The return value from  
> getDimension is computed by the implementation of  
> CoordinateSequence.  In the case of DefaultCoordinateSequence (which  
> by the way is deprecated and replaced by CoordinateArraySequence)  
> the value is alway 3, since the Coordinate representation used by  
> these sequences always allows for 3 ordinates.
>
> In the case of PackedCoordinateSequence the dimension can be  
> selected on creation, and this is the value that is returned by  
> getDimension.
>
> Sanak wrote:
>> Hi list,
>>
>> I don't know that this is a known bug, but  
>> CoordinateArraySequence.getDimension() method always return 3.
>>
>> [trunk/source/headers/geos/geom/CoordinateArraySequence.h - line 88]
>> size_t getDimension() const { return 3; }
>>
>>
>> JTS(JTS Topology Suite) seems to be also the same.
>>
>> [jts/src/com/vividsolutions/jts/geom/DefaultCoordinateSequence.java  
>> - line 95]
>> public int getDimension() { return 3; }
>>
>> I don't know that this is a specification or not...
>>
>> Regards,
>>
>> Sanak.
>>
>> 2009/1/12 Sean Gillies <sgillies@frii.com <mailto:sgillies@frii.com>>
>>
>>    I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter  
>> what
>>
>>     # Accessing libgeos_c via Python ctypes
>>     >>> s = lgeos.GEOSCoordSeq_create(2, 2)
>>     >>> ndim = c_int()
>>     >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
>>     1
>>     >>> ndim
>>     c_long(3)
>>
>>    Is this a known bug? Looks like we're only testing creation of 3D
>>    coordinate sequences in
>>
>>    http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
>>
>>    --
>>    Sean Gillies
>>    http://sgillies.net
>>
>>    _______________________________________________
>>    geos-devel mailing list
>>    geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>>    http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> -- 
> Martin Davis
> Senior Technical Architect
> Refractions Research, Inc.
> (250) 383-3022
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel



--
Sean Gillies
sean.gillies@gmail.com
http://sgillies.net

From pramsey at cleverelephant.ca  Mon Jan 12 13:40:09 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon Jan 12 13:40:17 2009
Subject: [geos-devel] C API coordinate sequence dimensions
In-Reply-To: <4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>
	<5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
	<496B8447.3080203@refractions.net>
	<4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>
Message-ID: <75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>

Not all operations are 2D, just 99% of them. Some of the overlay ops  
try to compute "correct" derived Z-values.

P

On Jan 12, 2009, at 10:04 AM, Sean Gillies wrote:

> So, the dimension argument in GEOSCoordSeq_create is ignored unless  
> the active sequence implementation takes dimensions other than 3?
>
> Why is GEOS's default sequence 3D when all operations are 2D?
>
> Sean
>
> On Jan 12, 2009, at 10:56 AM, Martin Davis wrote:
>
>> Actually JTS implements this correctly.  The return value from  
>> getDimension is computed by the implementation of  
>> CoordinateSequence.  In the case of DefaultCoordinateSequence  
>> (which by the way is deprecated and replaced by  
>> CoordinateArraySequence) the value is alway 3, since the Coordinate  
>> representation used by these sequences always allows for 3 ordinates.
>>
>> In the case of PackedCoordinateSequence the dimension can be  
>> selected on creation, and this is the value that is returned by  
>> getDimension.
>>
>> Sanak wrote:
>>> Hi list,
>>>
>>> I don't know that this is a known bug, but  
>>> CoordinateArraySequence.getDimension() method always return 3.
>>>
>>> [trunk/source/headers/geos/geom/CoordinateArraySequence.h - line 88]
>>> size_t getDimension() const { return 3; }
>>>
>>>
>>> JTS(JTS Topology Suite) seems to be also the same.
>>>
>>> [jts/src/com/vividsolutions/jts/geom/ 
>>> DefaultCoordinateSequence.java - line 95]
>>> public int getDimension() { return 3; }
>>>
>>> I don't know that this is a specification or not...
>>>
>>> Regards,
>>>
>>> Sanak.
>>>
>>> 2009/1/12 Sean Gillies <sgillies@frii.com  
>>> <mailto:sgillies@frii.com>>
>>>
>>>   I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter  
>>> what
>>>
>>>    # Accessing libgeos_c via Python ctypes
>>>    >>> s = lgeos.GEOSCoordSeq_create(2, 2)
>>>    >>> ndim = c_int()
>>>    >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
>>>    1
>>>    >>> ndim
>>>    c_long(3)
>>>
>>>   Is this a known bug? Looks like we're only testing creation of 3D
>>>   coordinate sequences in
>>>
>>>   http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
>>>
>>>   --
>>>   Sean Gillies
>>>   http://sgillies.net
>>>
>>>   _______________________________________________
>>>   geos-devel mailing list
>>>   geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>>>   http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>
>>> ------------------------------------------------------------------------
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> -- 
>> Martin Davis
>> Senior Technical Architect
>> Refractions Research, Inc.
>> (250) 383-3022
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>
> --
> Sean Gillies
> sean.gillies@gmail.com
> http://sgillies.net
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel


--
Paul Ramsey
pramsey@cleverelephant.ca
+1 250 885 0632

From sgillies at frii.com  Mon Jan 12 14:00:21 2009
From: sgillies at frii.com (Sean Gillies)
Date: Mon Jan 12 14:00:24 2009
Subject: [geos-devel] C API coordinate sequence dimensions
In-Reply-To: <75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>
	<5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
	<496B8447.3080203@refractions.net>
	<4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>
	<75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>
Message-ID: <CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>

Ah, I didn't know this. Which ones?

On Jan 12, 2009, at 11:40 AM, Paul Ramsey wrote:

> Not all operations are 2D, just 99% of them. Some of the overlay ops  
> try to compute "correct" derived Z-values.
>
> P
>
> On Jan 12, 2009, at 10:04 AM, Sean Gillies wrote:
>
>> So, the dimension argument in GEOSCoordSeq_create is ignored unless  
>> the active sequence implementation takes dimensions other than 3?
>>
>> Why is GEOS's default sequence 3D when all operations are 2D?
>>
>> Sean
>>
>> On Jan 12, 2009, at 10:56 AM, Martin Davis wrote:
>>
>>> Actually JTS implements this correctly.  The return value from  
>>> getDimension is computed by the implementation of  
>>> CoordinateSequence.  In the case of DefaultCoordinateSequence  
>>> (which by the way is deprecated and replaced by  
>>> CoordinateArraySequence) the value is alway 3, since the  
>>> Coordinate representation used by these sequences always allows  
>>> for 3 ordinates.
>>>
>>> In the case of PackedCoordinateSequence the dimension can be  
>>> selected on creation, and this is the value that is returned by  
>>> getDimension.
>>>
>>> Sanak wrote:
>>>> Hi list,
>>>>
>>>> I don't know that this is a known bug, but  
>>>> CoordinateArraySequence.getDimension() method always return 3.
>>>>
>>>> [trunk/source/headers/geos/geom/CoordinateArraySequence.h - line  
>>>> 88]
>>>> size_t getDimension() const { return 3; }
>>>>
>>>>
>>>> JTS(JTS Topology Suite) seems to be also the same.
>>>>
>>>> [jts/src/com/vividsolutions/jts/geom/ 
>>>> DefaultCoordinateSequence.java - line 95]
>>>> public int getDimension() { return 3; }
>>>>
>>>> I don't know that this is a specification or not...
>>>>
>>>> Regards,
>>>>
>>>> Sanak.
>>>>
>>>> 2009/1/12 Sean Gillies <sgillies@frii.com  
>>>> <mailto:sgillies@frii.com>>
>>>>
>>>>  I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter  
>>>> what
>>>>
>>>>   # Accessing libgeos_c via Python ctypes
>>>>   >>> s = lgeos.GEOSCoordSeq_create(2, 2)
>>>>   >>> ndim = c_int()
>>>>   >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
>>>>   1
>>>>   >>> ndim
>>>>   c_long(3)
>>>>
>>>>  Is this a known bug? Looks like we're only testing creation of 3D
>>>>  coordinate sequences in
>>>>
>>>>  http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
>>>>
>>>>  --
>>>>  Sean Gillies
>>>>  http://sgillies.net
>>>>
>>>>  _______________________________________________
>>>>  geos-devel mailing list
>>>>  geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>>
>>>> ------------------------------------------------------------------------
>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>> -- 
>>> Martin Davis
>>> Senior Technical Architect
>>> Refractions Research, Inc.
>>> (250) 383-3022
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>
>>
>> --
>> Sean Gillies
>> sean.gillies@gmail.com
>> http://sgillies.net
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> --
> Paul Ramsey
> pramsey@cleverelephant.ca
> +1 250 885 0632
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From robe.dnd at cityofboston.gov  Mon Jan 12 14:18:40 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Mon Jan 12 14:18:45 2009
Subject: [geos-devel] C API coordinate sequence dimensions
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com><5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com><496B8447.3080203@refractions.net><4F48AE18-644A-468B-9CB6-10296613C34B@frii.com><75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>
	<CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>

A lot of these are catalogued here 

http://postgis.refractions.net/documentation/manual-svn/ch08.html#id2671967

and
 ST_Union and I just discovered even ST_BuildArea.

ST_ConvexHull (but that in my opinion gives goofy results).


Though still debating how to describe that their results are debateable.

Also ST_BuildArea seems to hmm do a 2D and then tack on the Z so I guess I should add that to the list.  Simon tested this out when he was doing this write up and to my shock it sort of preserved 3D though I would say incorrectly.  Any rate I don't think he has that here, but still an interesting read

http://www.spatialdbadvisor.com/postgis_tips_tricks








-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
Sent: Mon 1/12/2009 2:00 PM
To: GEOS Development List
Subject: Re: [geos-devel] C API coordinate sequence dimensions
 
Ah, I didn't know this. Which ones?

On Jan 12, 2009, at 11:40 AM, Paul Ramsey wrote:

> Not all operations are 2D, just 99% of them. Some of the overlay ops  
> try to compute "correct" derived Z-values.
>
> P
>
> On Jan 12, 2009, at 10:04 AM, Sean Gillies wrote:
>
>> So, the dimension argument in GEOSCoordSeq_create is ignored unless  
>> the active sequence implementation takes dimensions other than 3?
>>
>> Why is GEOS's default sequence 3D when all operations are 2D?
>>
>> Sean
>>
>> On Jan 12, 2009, at 10:56 AM, Martin Davis wrote:
>>
>>> Actually JTS implements this correctly.  The return value from  
>>> getDimension is computed by the implementation of  
>>> CoordinateSequence.  In the case of DefaultCoordinateSequence  
>>> (which by the way is deprecated and replaced by  
>>> CoordinateArraySequence) the value is alway 3, since the  
>>> Coordinate representation used by these sequences always allows  
>>> for 3 ordinates.
>>>
>>> In the case of PackedCoordinateSequence the dimension can be  
>>> selected on creation, and this is the value that is returned by  
>>> getDimension.
>>>
>>> Sanak wrote:
>>>> Hi list,
>>>>
>>>> I don't know that this is a known bug, but  
>>>> CoordinateArraySequence.getDimension() method always return 3.
>>>>
>>>> [trunk/source/headers/geos/geom/CoordinateArraySequence.h - line  
>>>> 88]
>>>> size_t getDimension() const { return 3; }
>>>>
>>>>
>>>> JTS(JTS Topology Suite) seems to be also the same.
>>>>
>>>> [jts/src/com/vividsolutions/jts/geom/ 
>>>> DefaultCoordinateSequence.java - line 95]
>>>> public int getDimension() { return 3; }
>>>>
>>>> I don't know that this is a specification or not...
>>>>
>>>> Regards,
>>>>
>>>> Sanak.
>>>>
>>>> 2009/1/12 Sean Gillies <sgillies@frii.com  
>>>> <mailto:sgillies@frii.com>>
>>>>
>>>>  I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter  
>>>> what
>>>>
>>>>   # Accessing libgeos_c via Python ctypes
>>>>   >>> s = lgeos.GEOSCoordSeq_create(2, 2)
>>>>   >>> ndim = c_int()
>>>>   >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
>>>>   1
>>>>   >>> ndim
>>>>   c_long(3)
>>>>
>>>>  Is this a known bug? Looks like we're only testing creation of 3D
>>>>  coordinate sequences in
>>>>
>>>>  http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
>>>>
>>>>  --
>>>>  Sean Gillies
>>>>  http://sgillies.net
>>>>
>>>>  _______________________________________________
>>>>  geos-devel mailing list
>>>>  geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
>>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>>
>>>> ------------------------------------------------------------------------
>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>> -- 
>>> Martin Davis
>>> Senior Technical Architect
>>> Refractions Research, Inc.
>>> (250) 383-3022
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>
>>
>> --
>> Sean Gillies
>> sean.gillies@gmail.com
>> http://sgillies.net
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> --
> Paul Ramsey
> pramsey@cleverelephant.ca
> +1 250 885 0632
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel






-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090112/c93eb12d/attachment-0001.html
From sgillies at frii.com  Mon Jan 12 14:37:15 2009
From: sgillies at frii.com (Sean Gillies)
Date: Mon Jan 12 14:37:18 2009
Subject: [geos-devel] C API coordinate sequence dimensions
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com><5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com><496B8447.3080203@refractions.net><4F48AE18-644A-468B-9CB6-10296613C34B@frii.com><75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>
	<CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
Message-ID: <86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>

Thanks, Regina, that hints that the supporting GEOS C API functions  
might be considering z, but then again, the 3D might be implemented in  
the PostGIS lib.

On Jan 12, 2009, at 12:18 PM, Obe, Regina wrote:

> A lot of these are catalogued here
>
> http://postgis.refractions.net/documentation/manual-svn/ch08.html#id2671967
>
> and
>  ST_Union and I just discovered even ST_BuildArea.
>
> ST_ConvexHull (but that in my opinion gives goofy results).
>
>
> Though still debating how to describe that their results are  
> debateable.
>
> Also ST_BuildArea seems to hmm do a 2D and then tack on the Z so I  
> guess I should add that to the list.  Simon tested this out when he  
> was doing this write up and to my shock it sort of preserved 3D  
> though I would say incorrectly.  Any rate I don't think he has that  
> here, but still an interesting read
>
> http://www.spatialdbadvisor.com/postgis_tips_tricks
>
>
>
>
>
>
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
> Sent: Mon 1/12/2009 2:00 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] C API coordinate sequence dimensions
>
> Ah, I didn't know this. Which ones?
>
> On Jan 12, 2009, at 11:40 AM, Paul Ramsey wrote:
>
> > Not all operations are 2D, just 99% of them. Some of the overlay ops
> > try to compute "correct" derived Z-values.
> >
> > P
> >
> > On Jan 12, 2009, at 10:04 AM, Sean Gillies wrote:
> >
> >> So, the dimension argument in GEOSCoordSeq_create is ignored unless
> >> the active sequence implementation takes dimensions other than 3?
> >>
> >> Why is GEOS's default sequence 3D when all operations are 2D?
> >>
> >> Sean
> >>
> >> On Jan 12, 2009, at 10:56 AM, Martin Davis wrote:
> >>
> >>> Actually JTS implements this correctly.  The return value from
> >>> getDimension is computed by the implementation of
> >>> CoordinateSequence.  In the case of DefaultCoordinateSequence
> >>> (which by the way is deprecated and replaced by
> >>> CoordinateArraySequence) the value is alway 3, since the
> >>> Coordinate representation used by these sequences always allows
> >>> for 3 ordinates.
> >>>
> >>> In the case of PackedCoordinateSequence the dimension can be
> >>> selected on creation, and this is the value that is returned by
> >>> getDimension.
> >>>
> >>> Sanak wrote:
> >>>> Hi list,
> >>>>
> >>>> I don't know that this is a known bug, but
> >>>> CoordinateArraySequence.getDimension() method always return 3.
> >>>>
> >>>> [trunk/source/headers/geos/geom/CoordinateArraySequence.h - line
> >>>> 88]
> >>>> size_t getDimension() const { return 3; }
> >>>>
> >>>>
> >>>> JTS(JTS Topology Suite) seems to be also the same.
> >>>>
> >>>> [jts/src/com/vividsolutions/jts/geom/
> >>>> DefaultCoordinateSequence.java - line 95]
> >>>> public int getDimension() { return 3; }
> >>>>
> >>>> I don't know that this is a specification or not...
> >>>>
> >>>> Regards,
> >>>>
> >>>> Sanak.
> >>>>
> >>>> 2009/1/12 Sean Gillies <sgillies@frii.com
> >>>> <mailto:sgillies@frii.com>>
> >>>>
> >>>>  I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter
> >>>> what
> >>>>
> >>>>   # Accessing libgeos_c via Python ctypes
> >>>>   >>> s = lgeos.GEOSCoordSeq_create(2, 2)
> >>>>   >>> ndim = c_int()
> >>>>   >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
> >>>>   1
> >>>>   >>> ndim
> >>>>   c_long(3)
> >>>>
> >>>>  Is this a known bug? Looks like we're only testing creation of  
> 3D
> >>>>  coordinate sequences in
> >>>>
> >>>>  http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
> >>>>
> >>>>  --
> >>>>  Sean Gillies
> >>>>  http://sgillies.net
> >>>>
> >>>>  _______________________________________________
> >>>>  geos-devel mailing list
> >>>>  geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
> >>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
> >>>>
> >>>>
> >>>>  
> ------------------------------------------------------------------------
> >>>>
> >>>> _______________________________________________
> >>>> geos-devel mailing list
> >>>> geos-devel@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >>>
> >>> --
> >>> Martin Davis
> >>> Senior Technical Architect
> >>> Refractions Research, Inc.
> >>> (250) 383-3022
> >>>
> >>> _______________________________________________
> >>> geos-devel mailing list
> >>> geos-devel@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >>
> >>
> >>
> >> --
> >> Sean Gillies
> >> sean.gillies@gmail.com
> >> http://sgillies.net
> >>
> >> _______________________________________________
> >> geos-devel mailing list
> >> geos-devel@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> >
> > --
> > Paul Ramsey
> > pramsey@cleverelephant.ca
> > +1 250 885 0632
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>
>
>
>
> The substance of this message, including any attachments, may be  
> confidential, legally privileged and/or exempt from disclosure  
> pursuant to Massachusetts law. It is intended solely for the  
> addressee. If you received this in error, please contact the sender  
> and delete the material from any computer.
>
>
>
> Help make the earth a greener place. If at all possible resist  
> printing this email and join us in saving paper.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From robe.dnd at cityofboston.gov  Mon Jan 12 14:49:12 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Mon Jan 12 14:52:20 2009
Subject: [geos-devel] C API coordinate sequence dimensions
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com><5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com><496B8447.3080203@refractions.net><4F48AE18-644A-468B-9CB6-10296613C34B@frii.com><75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca><CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com><53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
	<86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>

I looked at the GEOS code a while back and compared to JTS and
was shocked that I saw GEOS z (as I call it smurf code and did not see
this smurf code in JTS).

This was when I was testing the PostGIS functions for 3D support assuming all GEOS functions should be 2D and to my shock they seemed to do something with Z.

I'm pretty sure at the very least that ST_ConvexHull, ST_Union Z support
is coming straight from GEOS.  Haven't verified ST_Difference.


-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
Sent: Mon 1/12/2009 2:37 PM
To: GEOS Development List
Subject: Re: [geos-devel] C API coordinate sequence dimensions
 
Thanks, Regina, that hints that the supporting GEOS C API functions  
might be considering z, but then again, the 3D might be implemented in  
the PostGIS lib.

On Jan 12, 2009, at 12:18 PM, Obe, Regina wrote:

> A lot of these are catalogued here
>
> http://postgis.refractions.net/documentation/manual-svn/ch08.html#id2671967
>
> and
>  ST_Union and I just discovered even ST_BuildArea.
>
> ST_ConvexHull (but that in my opinion gives goofy results).
>
>
> Though still debating how to describe that their results are  
> debateable.
>
> Also ST_BuildArea seems to hmm do a 2D and then tack on the Z so I  
> guess I should add that to the list.  Simon tested this out when he  
> was doing this write up and to my shock it sort of preserved 3D  
> though I would say incorrectly.  Any rate I don't think he has that  
> here, but still an interesting read
>
> http://www.spatialdbadvisor.com/postgis_tips_tricks
>
>
>
>
>
>
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
> Sent: Mon 1/12/2009 2:00 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] C API coordinate sequence dimensions
>
> Ah, I didn't know this. Which ones?
>
> On Jan 12, 2009, at 11:40 AM, Paul Ramsey wrote:
>
> > Not all operations are 2D, just 99% of them. Some of the overlay ops
> > try to compute "correct" derived Z-values.
> >
> > P
> >
> > On Jan 12, 2009, at 10:04 AM, Sean Gillies wrote:
> >
> >> So, the dimension argument in GEOSCoordSeq_create is ignored unless
> >> the active sequence implementation takes dimensions other than 3?
> >>
> >> Why is GEOS's default sequence 3D when all operations are 2D?
> >>
> >> Sean
> >>
> >> On Jan 12, 2009, at 10:56 AM, Martin Davis wrote:
> >>
> >>> Actually JTS implements this correctly.  The return value from
> >>> getDimension is computed by the implementation of
> >>> CoordinateSequence.  In the case of DefaultCoordinateSequence
> >>> (which by the way is deprecated and replaced by
> >>> CoordinateArraySequence) the value is alway 3, since the
> >>> Coordinate representation used by these sequences always allows
> >>> for 3 ordinates.
> >>>
> >>> In the case of PackedCoordinateSequence the dimension can be
> >>> selected on creation, and this is the value that is returned by
> >>> getDimension.
> >>>
> >>> Sanak wrote:
> >>>> Hi list,
> >>>>
> >>>> I don't know that this is a known bug, but
> >>>> CoordinateArraySequence.getDimension() method always return 3.
> >>>>
> >>>> [trunk/source/headers/geos/geom/CoordinateArraySequence.h - line
> >>>> 88]
> >>>> size_t getDimension() const { return 3; }
> >>>>
> >>>>
> >>>> JTS(JTS Topology Suite) seems to be also the same.
> >>>>
> >>>> [jts/src/com/vividsolutions/jts/geom/
> >>>> DefaultCoordinateSequence.java - line 95]
> >>>> public int getDimension() { return 3; }
> >>>>
> >>>> I don't know that this is a specification or not...
> >>>>
> >>>> Regards,
> >>>>
> >>>> Sanak.
> >>>>
> >>>> 2009/1/12 Sean Gillies <sgillies@frii.com
> >>>> <mailto:sgillies@frii.com>>
> >>>>
> >>>>  I'm finding that GEOSCoordSeq_getDimensions returns 3 no matter
> >>>> what
> >>>>
> >>>>   # Accessing libgeos_c via Python ctypes
> >>>>   >>> s = lgeos.GEOSCoordSeq_create(2, 2)
> >>>>   >>> ndim = c_int()
> >>>>   >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
> >>>>   1
> >>>>   >>> ndim
> >>>>   c_long(3)
> >>>>
> >>>>  Is this a known bug? Looks like we're only testing creation of  
> 3D
> >>>>  coordinate sequences in
> >>>>
> >>>>  http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
> >>>>
> >>>>  --
> >>>>  Sean Gillies
> >>>>  http://sgillies.net
> >>>>
> >>>>  _______________________________________________
> >>>>  geos-devel mailing list
> >>>>  geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
> >>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
> >>>>
> >>>>
> >>>>  
> ------------------------------------------------------------------------
> >>>>
> >>>> _______________________________________________
> >>>> geos-devel mailing list
> >>>> geos-devel@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >>>
> >>> --
> >>> Martin Davis
> >>> Senior Technical Architect
> >>> Refractions Research, Inc.
> >>> (250) 383-3022
> >>>
> >>> _______________________________________________
> >>> geos-devel mailing list
> >>> geos-devel@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >>
> >>
> >>
> >> --
> >> Sean Gillies
> >> sean.gillies@gmail.com
> >> http://sgillies.net
> >>
> >> _______________________________________________
> >> geos-devel mailing list
> >> geos-devel@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> >
> > --
> > Paul Ramsey
> > pramsey@cleverelephant.ca
> > +1 250 885 0632
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>
>
>
>
> The substance of this message, including any attachments, may be  
> confidential, legally privileged and/or exempt from disclosure  
> pursuant to Massachusetts law. It is intended solely for the  
> addressee. If you received this in error, please contact the sender  
> and delete the material from any computer.
>
>
>
> Help make the earth a greener place. If at all possible resist  
> printing this email and join us in saving paper.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel




-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090112/a5f06cf6/attachment.html
From geos-trac at osgeo.org  Mon Jan 12 17:47:40 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Jan 12 17:47:42 2009
Subject: [geos-devel] Re: [GEOS] #210: Create a thread safe CAPI
In-Reply-To: <048.6c4e30c5ade9074657c1ea5390f33d29@osgeo.org>
References: <048.6c4e30c5ade9074657c1ea5390f33d29@osgeo.org>
Message-ID: <057.3ddcef38257e5ee99bca9aee95814a7b@osgeo.org>

#210: Create a thread safe CAPI
-----------------------------+----------------------------------------------
 Reporter:  cthibert         |        Owner:  geos-devel@lists.osgeo.org
     Type:  enhancement      |       Status:  new                       
 Priority:  major            |    Milestone:  3.1                       
Component:  C API            |      Version:                            
 Severity:  Feature Request  |   Resolution:                            
 Keywords:                   |  
-----------------------------+----------------------------------------------
Changes (by pramsey):

  * milestone:  => 3.1

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/210#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Jan 12 20:21:15 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Jan 12 20:42:01 2009
Subject: [geos-devel] Re: [GEOS] #210: Create a thread safe CAPI
In-Reply-To: <048.6c4e30c5ade9074657c1ea5390f33d29@osgeo.org>
References: <048.6c4e30c5ade9074657c1ea5390f33d29@osgeo.org>
Message-ID: <057.7eca6f213cd72e0b373e414e2566606b@osgeo.org>

#210: Create a thread safe CAPI
-----------------------------+----------------------------------------------
 Reporter:  cthibert         |        Owner:  geos-devel@lists.osgeo.org
     Type:  enhancement      |       Status:  closed                    
 Priority:  major            |    Milestone:  3.1                       
Component:  C API            |      Version:                            
 Severity:  Feature Request  |   Resolution:  fixed                     
 Keywords:                   |  
-----------------------------+----------------------------------------------
Changes (by pramsey):

  * status:  new => closed
  * resolution:  => fixed

Comment:

 Committed to trunk at r2232.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/210#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Jan 12 20:22:49 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Jan 12 20:42:01 2009
Subject: [geos-devel] Re: [GEOS] #215: Single-sided buffering implementation
In-Reply-To: <046.194dd1fb9160eca5e3555b6776685e43@osgeo.org>
References: <046.194dd1fb9160eca5e3555b6776685e43@osgeo.org>
Message-ID: <055.d9217fe6068b8b2397bec00570adbcf3@osgeo.org>

#215: Single-sided buffering implementation
-------------------------+--------------------------------------------------
 Reporter:  swongu       |        Owner:  geos-devel@lists.osgeo.org
     Type:  enhancement  |       Status:  closed                    
 Priority:  major        |    Milestone:  3.1                       
Component:  Core         |      Version:  svn-trunk                 
 Severity:  Content      |   Resolution:  fixed                     
 Keywords:               |  
-------------------------+--------------------------------------------------
Changes (by pramsey):

  * status:  new => closed
  * resolution:  => fixed
  * milestone:  => 3.1

Comment:

 Applied by Stephen. Remember to close your tickets!

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/215#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Jan 12 20:41:06 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Jan 12 20:42:02 2009
Subject: [geos-devel] Re: [GEOS] #222: GEOS 3.0 won't link on ARM-EABI
	platform
In-Reply-To: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
References: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
Message-ID: <058.0c116e60c48a2d76eaf489da026ecdbd@osgeo.org>

#222: GEOS 3.0 won't link on ARM-EABI platform
-----------------------+----------------------------------------------------
 Reporter:  jcrepetto  |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect     |       Status:  new                       
 Priority:  major      |    Milestone:  3.0.1                     
Component:  Default    |      Version:  3.0.0                     
 Severity:  Critical   |   Resolution:                            
 Keywords:             |  
-----------------------+----------------------------------------------------
Comment (by pramsey):

 Sorry, we need a patch on this that you like, we don't have ARM systems
 lying around to re-create it.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/222#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Jan 12 20:48:19 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Jan 12 20:48:20 2009
Subject: [geos-devel] Re: [GEOS] #202: Undefined behavior in
	Coordinate::hashCode
In-Reply-To: <047.73fdea73f1e1c54c7376c787498f724a@osgeo.org>
References: <047.73fdea73f1e1c54c7376c787498f724a@osgeo.org>
Message-ID: <056.1191e0582064508d0bae9c6e2be7583a@osgeo.org>

#202: Undefined behavior in Coordinate::hashCode
------------------------------------+---------------------------------------
 Reporter:  mloskot                 |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect                  |       Status:  new                       
 Priority:  major                   |    Milestone:  3.1.0                     
Component:  Core                    |      Version:  svn-trunk                 
 Severity:  Significant             |   Resolution:                            
 Keywords:  coordinate hash double  |  
------------------------------------+---------------------------------------
Changes (by pramsey):

  * milestone:  => 3.1.0

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/202#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From pramsey at opengeo.org  Mon Jan 12 21:05:20 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Mon Jan 12 21:05:29 2009
Subject: [geos-devel] 3.1.0
Message-ID: <C627EE6D-EF86-45E3-A54A-71E0BC77B95C@opengeo.org>

Hi Cool Kids,

You'll notice that I've spammed the living heck out of the bug  
tracker, assigning milestones to everything. I'd like to push 3.1 out  
the door sooner than later, so if you could attack the bugs assigned  
to you over the next month, that would be mucho appreciated.

http://trac.osgeo.org/geos/report/3

Paul

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS is Love.

From geos-trac at osgeo.org  Tue Jan 13 02:11:17 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue Jan 13 02:11:23 2009
Subject: [geos-devel] Re: [GEOS] #222: GEOS 3.0 won't link on ARM-EABI
	platform
In-Reply-To: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
References: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
Message-ID: <058.c8f67bdf3f104cb72baeea42f2373d33@osgeo.org>

#222: GEOS 3.0 won't link on ARM-EABI platform
-----------------------+----------------------------------------------------
 Reporter:  jcrepetto  |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect     |       Status:  new                       
 Priority:  major      |    Milestone:                            
Component:  Default    |      Version:  3.0.0                     
 Severity:  Critical   |   Resolution:                            
 Keywords:             |  
-----------------------+----------------------------------------------------
Comment (by jcrepetto):

 You don't need an ARM system to recreate it. The toolchain mentioned above
 is a cross-compiler. You just have to install it on your PC, then use it
 to compile GEOS.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/222#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From robe.dnd at cityofboston.gov  Tue Jan 13 09:42:32 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Jan 13 09:42:36 2009
Subject: [geos-devel] RE: Can't compile Geos 3.1 under OpenSUSE anymore
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFE6@ZDND.DND.boston.cob>


Oops sent to wrong dev group last time.
-----Original Message-----
From: Obe, Regina 
Sent: Tuesday, January 13, 2009 9:40 AM
To: 'PostGIS Development Discussion'
Subject: Can't compile Geos 3.1 under OpenSUSE anymore

I assume this is because of the recent changes.  I did an svn up and a
reconfigure and then compile under OpenSUSE.

I get this error

 g++ -DHAVE_CONFIG_H -I. -I../source/headers -I../source/headers/geos
-I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
-DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic
-Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
.deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o libgeos_c_la-geos_c.o
>/dev/null 2>&1
mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
`libgeos_c_la-geos_ts_c.lo'.  Stop.
make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
make: *** [all-recursive] Error 1

Am I missing something?

Thanks,
Regina
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From robe.dnd at cityofboston.gov  Tue Jan 13 10:02:15 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Jan 13 10:02:23 2009
Subject: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1 under
	OpenSUSE anymore
In-Reply-To: <496CA8F6.8050900@siriusit.co.uk>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob>
	<496CA8F6.8050900@siriusit.co.uk>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob>

Mark,

Good thought.  I can't remember if I did an autogen or not, but just did
and my OpenSUSE is still compiling.

My MingW install which I did do an sh autogen.sh , configure, make
clean, make is failing with the same error

 g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
-I../source/headers/geos -I../source/headers
-DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
-O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
 g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
-I../source/headers/geos -I../source/headers
-DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
-O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
`libgeos_c_la-geos_ts_c.lo'.  Stop.
make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
make: *** [all-recursive] Error 1


Have you tried the latest one?

My next step is to blow out my geos source and start from scratch.

Thanks,
Regina

-----Original Message-----
From: postgis-devel-bounces@postgis.refractions.net
[mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of Mark
Cave-Ayland
Sent: Tuesday, January 13, 2009 9:45 AM
To: PostGIS Development Discussion
Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
anymore

Obe, Regina wrote:

> I assume this is because of the recent changes.  I did an svn up and a
> reconfigure and then compile under OpenSUSE.
> 
> I get this error
> 
>  g++ -DHAVE_CONFIG_H -I. -I../source/headers -I../source/headers/geos
> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic
> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o libgeos_c_la-geos_c.o
>> /dev/null 2>&1
> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
> `libgeos_c_la-geos_ts_c.lo'.  Stop.
> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
> make: *** [all-recursive] Error 1
> 
> Am I missing something?
> 
> Thanks,
> Regina

Hmmm the "ts" part implies this is something to do with the thread-safe 
API patch. Perhaps you need to re-run autogen.sh so that it picks up the

new files? Failing that does a brand new checkout work?


HTH,

Mark.

-- 
Mark Cave-Ayland
Sirius Corporation - The Open Source Experts
http://www.siriusit.co.uk
T: +44 870 608 0063
_______________________________________________
postgis-devel mailing list
postgis-devel@postgis.refractions.net
http://postgis.refractions.net/mailman/listinfo/postgis-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From pramsey at cleverelephant.ca  Tue Jan 13 10:48:38 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue Jan 13 10:48:40 2009
Subject: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1 under
	OpenSUSE anymore
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob>
	<496CA8F6.8050900@siriusit.co.uk>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob>
Message-ID: <30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com>

Yep, same here on a fresh checkout. And there was indeed a file
missing from my check-in. Fixed at r2233.

P.

On Tue, Jan 13, 2009 at 7:02 AM, Obe, Regina <robe.dnd@cityofboston.gov> wrote:
> Mark,
>
> Good thought.  I can't remember if I did an autogen or not, but just did
> and my OpenSUSE is still compiling.
>
> My MingW install which I did do an sh autogen.sh , configure, make
> clean, make is failing with the same error
>
>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
> -I../source/headers/geos -I../source/headers
> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
> geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
> -I../source/headers/geos -I../source/headers
> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
> geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
> `libgeos_c_la-geos_ts_c.lo'.  Stop.
> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
> make: *** [all-recursive] Error 1
>
>
> Have you tried the latest one?
>
> My next step is to blow out my geos source and start from scratch.
>
> Thanks,
> Regina
>
> -----Original Message-----
> From: postgis-devel-bounces@postgis.refractions.net
> [mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of Mark
> Cave-Ayland
> Sent: Tuesday, January 13, 2009 9:45 AM
> To: PostGIS Development Discussion
> Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
> anymore
>
> Obe, Regina wrote:
>
>> I assume this is because of the recent changes.  I did an svn up and a
>> reconfigure and then compile under OpenSUSE.
>>
>> I get this error
>>
>>  g++ -DHAVE_CONFIG_H -I. -I../source/headers -I../source/headers/geos
>> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
>> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic
>> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
>> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o libgeos_c_la-geos_c.o
>>> /dev/null 2>&1
>> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
>> make: *** [all-recursive] Error 1
>>
>> Am I missing something?
>>
>> Thanks,
>> Regina
>
> Hmmm the "ts" part implies this is something to do with the thread-safe
> API patch. Perhaps you need to re-run autogen.sh so that it picks up the
>
> new files? Failing that does a brand new checkout work?
>
>
> HTH,
>
> Mark.
>
> --
> Mark Cave-Ayland
> Sirius Corporation - The Open Source Experts
> http://www.siriusit.co.uk
> T: +44 870 608 0063
> _______________________________________________
> postgis-devel mailing list
> postgis-devel@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From robe.dnd at cityofboston.gov  Tue Jan 13 10:54:01 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Jan 13 10:54:08 2009
Subject: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
	underOpenSUSE anymore
In-Reply-To: <30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob><496CA8F6.8050900@siriusit.co.uk><53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob>
	<30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D20547011B@ZDND.DND.boston.cob>

Okay that fixed my OpenSUSE compile problem.

On MingW, getting a different error now -- but haven't done a complete
clean blowout so it could be remnants of something else.  But just in
case.  Below is what I get under MingW


-DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_ts_c.o
geos_ts_c.cpp: In function `char*
GEOSisValidReason_r(GEOSContextHandle_HS*, const
geos::geom::Geometry*)':
geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
geos_ts_c.cpp:587: warning: unused variable 'strdup'
geos_ts_c.cpp: In function `char
GEOSWKBWriter_getIncludeSRID_r(GEOSContextHandle_HS*, const
GEOSWKBWriter*)':
geos_ts_c.cpp:3682: warning: converting to non-pointer type `char' from
NULL
geos_ts_c.cpp:3688: warning: converting to non-pointer type `char' from
NULL
geos_ts_c.cpp:3699: warning: converting to non-pointer type `char' from
NULL
make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
make: *** [all-recursive] Error 1


I'll be testing under Visual Studio in the next day or so.

 

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Tuesday, January 13, 2009 10:49 AM
To: GEOS Development List
Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
underOpenSUSE anymore

Yep, same here on a fresh checkout. And there was indeed a file
missing from my check-in. Fixed at r2233.

P.

On Tue, Jan 13, 2009 at 7:02 AM, Obe, Regina <robe.dnd@cityofboston.gov>
wrote:
> Mark,
>
> Good thought.  I can't remember if I did an autogen or not, but just
did
> and my OpenSUSE is still compiling.
>
> My MingW install which I did do an sh autogen.sh , configure, make
> clean, make is failing with the same error
>
>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
> -I../source/headers/geos -I../source/headers
> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
> geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
> -I../source/headers/geos -I../source/headers
> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
> geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
> `libgeos_c_la-geos_ts_c.lo'.  Stop.
> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
> make: *** [all-recursive] Error 1
>
>
> Have you tried the latest one?
>
> My next step is to blow out my geos source and start from scratch.
>
> Thanks,
> Regina
>
> -----Original Message-----
> From: postgis-devel-bounces@postgis.refractions.net
> [mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of
Mark
> Cave-Ayland
> Sent: Tuesday, January 13, 2009 9:45 AM
> To: PostGIS Development Discussion
> Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
> anymore
>
> Obe, Regina wrote:
>
>> I assume this is because of the recent changes.  I did an svn up and
a
>> reconfigure and then compile under OpenSUSE.
>>
>> I get this error
>>
>>  g++ -DHAVE_CONFIG_H -I. -I../source/headers -I../source/headers/geos
>> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
>> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic
>> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
>> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o libgeos_c_la-geos_c.o
>>> /dev/null 2>&1
>> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
>> make: *** [all-recursive] Error 1
>>
>> Am I missing something?
>>
>> Thanks,
>> Regina
>
> Hmmm the "ts" part implies this is something to do with the
thread-safe
> API patch. Perhaps you need to re-run autogen.sh so that it picks up
the
>
> new files? Failing that does a brand new checkout work?
>
>
> HTH,
>
> Mark.
>
> --
> Mark Cave-Ayland
> Sirius Corporation - The Open Source Experts
> http://www.siriusit.co.uk
> T: +44 870 608 0063
> _______________________________________________
> postgis-devel mailing list
> postgis-devel@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From pramsey at cleverelephant.ca  Tue Jan 13 11:05:41 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue Jan 13 11:05:43 2009
Subject: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
	underOpenSUSE anymore
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D20547011B@ZDND.DND.boston.cob>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob>
	<496CA8F6.8050900@siriusit.co.uk>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob>
	<30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20547011B@ZDND.DND.boston.cob>
Message-ID: <30fe546d0901130805v51d42922nc09494b4fd58fa68@mail.gmail.com>

Doesn't make much sense to me. <cstring> is #include'd, so...?

On Tue, Jan 13, 2009 at 7:54 AM, Obe, Regina <robe.dnd@cityofboston.gov> wrote:
> Okay that fixed my OpenSUSE compile problem.
>
> On MingW, getting a different error now -- but haven't done a complete
> clean blowout so it could be remnants of something else.  But just in
> case.  Below is what I get under MingW
>
>
> -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_ts_c.o
> geos_ts_c.cpp: In function `char*
> GEOSisValidReason_r(GEOSContextHandle_HS*, const
> geos::geom::Geometry*)':
> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
> geos_ts_c.cpp:587: warning: unused variable 'strdup'
> geos_ts_c.cpp: In function `char
> GEOSWKBWriter_getIncludeSRID_r(GEOSContextHandle_HS*, const
> GEOSWKBWriter*)':
> geos_ts_c.cpp:3682: warning: converting to non-pointer type `char' from
> NULL
> geos_ts_c.cpp:3688: warning: converting to non-pointer type `char' from
> NULL
> geos_ts_c.cpp:3699: warning: converting to non-pointer type `char' from
> NULL
> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
> make: *** [all-recursive] Error 1
>
>
> I'll be testing under Visual Studio in the next day or so.
>
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Tuesday, January 13, 2009 10:49 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
> underOpenSUSE anymore
>
> Yep, same here on a fresh checkout. And there was indeed a file
> missing from my check-in. Fixed at r2233.
>
> P.
>
> On Tue, Jan 13, 2009 at 7:02 AM, Obe, Regina <robe.dnd@cityofboston.gov>
> wrote:
>> Mark,
>>
>> Good thought.  I can't remember if I did an autogen or not, but just
> did
>> and my OpenSUSE is still compiling.
>>
>> My MingW install which I did do an sh autogen.sh , configure, make
>> clean, make is failing with the same error
>>
>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>> -I../source/headers/geos -I../source/headers
>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>> geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>> -I../source/headers/geos -I../source/headers
>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>> geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>> make: *** [all-recursive] Error 1
>>
>>
>> Have you tried the latest one?
>>
>> My next step is to blow out my geos source and start from scratch.
>>
>> Thanks,
>> Regina
>>
>> -----Original Message-----
>> From: postgis-devel-bounces@postgis.refractions.net
>> [mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of
> Mark
>> Cave-Ayland
>> Sent: Tuesday, January 13, 2009 9:45 AM
>> To: PostGIS Development Discussion
>> Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
>> anymore
>>
>> Obe, Regina wrote:
>>
>>> I assume this is because of the recent changes.  I did an svn up and
> a
>>> reconfigure and then compile under OpenSUSE.
>>>
>>> I get this error
>>>
>>>  g++ -DHAVE_CONFIG_H -I. -I../source/headers -I../source/headers/geos
>>> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
>>> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic
>>> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
>>> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o libgeos_c_la-geos_c.o
>>>> /dev/null 2>&1
>>> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
>>> make: *** [all-recursive] Error 1
>>>
>>> Am I missing something?
>>>
>>> Thanks,
>>> Regina
>>
>> Hmmm the "ts" part implies this is something to do with the
> thread-safe
>> API patch. Perhaps you need to re-run autogen.sh so that it picks up
> the
>>
>> new files? Failing that does a brand new checkout work?
>>
>>
>> HTH,
>>
>> Mark.
>>
>> --
>> Mark Cave-Ayland
>> Sirius Corporation - The Open Source Experts
>> http://www.siriusit.co.uk
>> T: +44 870 608 0063
>> _______________________________________________
>> postgis-devel mailing list
>> postgis-devel@postgis.refractions.net
>> http://postgis.refractions.net/mailman/listinfo/postgis-devel
>> -----------------------------------------
>> The substance of this message, including any attachments, may be
>> confidential, legally privileged and/or exempt from disclosure
>> pursuant to Massachusetts law. It is intended
>> solely for the addressee. If you received this in error, please
>> contact the sender and delete the material from any computer.
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at opengeo.org  Tue Jan 13 12:08:32 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Tue Jan 13 12:08:34 2009
Subject: [geos-devel] Chuck Thibert as Committer
Message-ID: <30fe546d0901130908r43100b24y528df7e50b6d23ad@mail.gmail.com>

PSC,

Chuck has now created and had accepted a large patch to the code base,
I'd like to make him a committer. I caused more trouble applying his
patch than any other process would :)

Paul
From hobu.inc at gmail.com  Tue Jan 13 12:10:34 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Jan 13 12:10:37 2009
Subject: [geos-devel] Chuck Thibert as Committer
In-Reply-To: <30fe546d0901130908r43100b24y528df7e50b6d23ad@mail.gmail.com>
References: <30fe546d0901130908r43100b24y528df7e50b6d23ad@mail.gmail.com>
Message-ID: <F1A61932-3237-49C4-89B8-93E5B7106A66@gmail.com>


On Jan 13, 2009, at 11:08 AM, Paul Ramsey wrote:

> PSC,
>
> Chuck has now created and had accepted a large patch to the code base,
> I'd like to make him a committer. I caused more trouble applying his
> patch than any other process would :)

+1 subject to acceptance of RFC 2 http://trac.osgeo.org/geos/wiki/RFC2
From sgillies at frii.com  Tue Jan 13 13:08:05 2009
From: sgillies at frii.com (Sean Gillies)
Date: Tue Jan 13 13:08:09 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate sequence dimensions)
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com><5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com><496B8447.3080203@refractions.net><4F48AE18-644A-468B-9CB6-10296613C34B@frii.com><75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca><CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com><53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
	<86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>
Message-ID: <BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>

"Smurf code"? Smurfs are good, if I remember my Saturday morning  
cartoons :)

It would probably take me much longer to grep and read through the  
code base to find which functions are 3D and document them in the wiki  
than it would take the authors ... can I do anything to entice them to  
document the 3D functions?

Sean

On Jan 12, 2009, at 12:49 PM, Obe, Regina wrote:

> I looked at the GEOS code a while back and compared to JTS and
> was shocked that I saw GEOS z (as I call it smurf code and did not see
> this smurf code in JTS).
>
> This was when I was testing the PostGIS functions for 3D support  
> assuming all GEOS functions should be 2D and to my shock they seemed  
> to do something with Z.
>
> I'm pretty sure at the very least that ST_ConvexHull, ST_Union Z  
> support
> is coming straight from GEOS.  Haven't verified ST_Difference.
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
> Sent: Mon 1/12/2009 2:37 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] C API coordinate sequence dimensions
>
> Thanks, Regina, that hints that the supporting GEOS C API functions
> might be considering z, but then again, the 3D might be implemented in
> the PostGIS lib.
>
> On Jan 12, 2009, at 12:18 PM, Obe, Regina wrote:
>
> > A lot of these are catalogued here
> >
> > http://postgis.refractions.net/documentation/manual-svn/ch08.html#id2671967
> >
> > and
> >  ST_Union and I just discovered even ST_BuildArea.
> >
> > ST_ConvexHull (but that in my opinion gives goofy results).
> >
> >
> > Though still debating how to describe that their results are
> > debateable.
> >
> > Also ST_BuildArea seems to hmm do a 2D and then tack on the Z so I
> > guess I should add that to the list.  Simon tested this out when he
> > was doing this write up and to my shock it sort of preserved 3D
> > though I would say incorrectly.  Any rate I don't think he has that
> > here, but still an interesting read
> >
> > http://www.spatialdbadvisor.com/postgis_tips_tricks
> >
> >
> >
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
> > Sent: Mon 1/12/2009 2:00 PM
> > To: GEOS Development List
> > Subject: Re: [geos-devel] C API coordinate sequence dimensions
> >
> > Ah, I didn't know this. Which ones?
> >
> > On Jan 12, 2009, at 11:40 AM, Paul Ramsey wrote:
> >
> > > Not all operations are 2D, just 99% of them. Some of the overlay  
> ops
> > > try to compute "correct" derived Z-values.
> > >
> > > P
> > >
> > > On Jan 12, 2009, at 10:04 AM, Sean Gillies wrote:
> > >
> > >> So, the dimension argument in GEOSCoordSeq_create is ignored  
> unless
> > >> the active sequence implementation takes dimensions other than 3?
> > >>
> > >> Why is GEOS's default sequence 3D when all operations are 2D?
> > >>
> > >> Sean
> > >>
> > >> On Jan 12, 2009, at 10:56 AM, Martin Davis wrote:
> > >>
> > >>> Actually JTS implements this correctly.  The return value from
> > >>> getDimension is computed by the implementation of
> > >>> CoordinateSequence.  In the case of DefaultCoordinateSequence
> > >>> (which by the way is deprecated and replaced by
> > >>> CoordinateArraySequence) the value is alway 3, since the
> > >>> Coordinate representation used by these sequences always allows
> > >>> for 3 ordinates.
> > >>>
> > >>> In the case of PackedCoordinateSequence the dimension can be
> > >>> selected on creation, and this is the value that is returned by
> > >>> getDimension.
> > >>>
> > >>> Sanak wrote:
> > >>>> Hi list,
> > >>>>
> > >>>> I don't know that this is a known bug, but
> > >>>> CoordinateArraySequence.getDimension() method always return 3.
> > >>>>
> > >>>> [trunk/source/headers/geos/geom/CoordinateArraySequence.h -  
> line
> > >>>> 88]
> > >>>> size_t getDimension() const { return 3; }
> > >>>>
> > >>>>
> > >>>> JTS(JTS Topology Suite) seems to be also the same.
> > >>>>
> > >>>> [jts/src/com/vividsolutions/jts/geom/
> > >>>> DefaultCoordinateSequence.java - line 95]
> > >>>> public int getDimension() { return 3; }
> > >>>>
> > >>>> I don't know that this is a specification or not...
> > >>>>
> > >>>> Regards,
> > >>>>
> > >>>> Sanak.
> > >>>>
> > >>>> 2009/1/12 Sean Gillies <sgillies@frii.com
> > >>>> <mailto:sgillies@frii.com>>
> > >>>>
> > >>>>  I'm finding that GEOSCoordSeq_getDimensions returns 3 no  
> matter
> > >>>> what
> > >>>>
> > >>>>   # Accessing libgeos_c via Python ctypes
> > >>>>   >>> s = lgeos.GEOSCoordSeq_create(2, 2)
> > >>>>   >>> ndim = c_int()
> > >>>>   >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
> > >>>>   1
> > >>>>   >>> ndim
> > >>>>   c_long(3)
> > >>>>
> > >>>>  Is this a known bug? Looks like we're only testing creation of
> > 3D
> > >>>>  coordinate sequences in
> > >>>>
> > >>>>  http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
> > >>>>
> > >>>>  --
> > >>>>  Sean Gillies
> > >>>>  http://sgillies.net
> > >>>>
> > >>>>  _______________________________________________
> > >>>>  geos-devel mailing list
> > >>>>  geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
> > >>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >>>>
> > >>>>
> > >>>>
> >  
> ------------------------------------------------------------------------
> > >>>>
> > >>>> _______________________________________________
> > >>>> geos-devel mailing list
> > >>>> geos-devel@lists.osgeo.org
> > >>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >>>
> > >>> --
> > >>> Martin Davis
> > >>> Senior Technical Architect
> > >>> Refractions Research, Inc.
> > >>> (250) 383-3022
> > >>>
> > >>> _______________________________________________
> > >>> geos-devel mailing list
> > >>> geos-devel@lists.osgeo.org
> > >>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >>
> > >>
> > >>
> > >> --
> > >> Sean Gillies
> > >> sean.gillies@gmail.com
> > >> http://sgillies.net
> > >>
> > >> _______________________________________________
> > >> geos-devel mailing list
> > >> geos-devel@lists.osgeo.org
> > >> http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >
> > >
> > > --
> > > Paul Ramsey
> > > pramsey@cleverelephant.ca
> > > +1 250 885 0632
> > >
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> >
> >
> >
> >
> >
> > The substance of this message, including any attachments, may be
> > confidential, legally privileged and/or exempt from disclosure
> > pursuant to Massachusetts law. It is intended solely for the
> > addressee. If you received this in error, please contact the sender
> > and delete the material from any computer.
> >
> >
> >
> > Help make the earth a greener place. If at all possible resist
> > printing this email and join us in saving paper.
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>
>
> The substance of this message, including any attachments, may be  
> confidential, legally privileged and/or exempt from disclosure  
> pursuant to Massachusetts law. It is intended solely for the  
> addressee. If you received this in error, please contact the sender  
> and delete the material from any computer.
>
>
>
> Help make the earth a greener place. If at all possible resist  
> printing this email and join us in saving paper.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From robe.dnd at cityofboston.gov  Tue Jan 13 13:17:26 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Jan 13 13:17:32 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate sequence
	dimensions)
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com><5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com><496B8447.3080203@refractions.net><4F48AE18-644A-468B-9CB6-10296613C34B@frii.com><75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca><CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com><53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob><86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com><53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>
	<BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F8@ZDND.DND.boston.cob>

I think there has been discussion of documenting GEOS.  At least C++-Doc (J Doc kind of autogenerate thingy to start with).

Yes Smurfs are good.  I'm greatful for all their work just like I'm very thankful when my old pet cat leaves a dead rat head beside his bowl.  It is a little unexpected but nevertheless appreciated. It is just in need of a little polishing :).



-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
Sent: Tue 1/13/2009 1:08 PM
To: GEOS Development List
Subject: 3D operations (Re: [geos-devel] C API coordinate sequence dimensions)
 
"Smurf code"? Smurfs are good, if I remember my Saturday morning  
cartoons :)

It would probably take me much longer to grep and read through the  
code base to find which functions are 3D and document them in the wiki  
than it would take the authors ... can I do anything to entice them to  
document the 3D functions?

Sean

On Jan 12, 2009, at 12:49 PM, Obe, Regina wrote:

> I looked at the GEOS code a while back and compared to JTS and
> was shocked that I saw GEOS z (as I call it smurf code and did not see
> this smurf code in JTS).
>
> This was when I was testing the PostGIS functions for 3D support  
> assuming all GEOS functions should be 2D and to my shock they seemed  
> to do something with Z.
>
> I'm pretty sure at the very least that ST_ConvexHull, ST_Union Z  
> support
> is coming straight from GEOS.  Haven't verified ST_Difference.
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
> Sent: Mon 1/12/2009 2:37 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] C API coordinate sequence dimensions
>
> Thanks, Regina, that hints that the supporting GEOS C API functions
> might be considering z, but then again, the 3D might be implemented in
> the PostGIS lib.
>
> On Jan 12, 2009, at 12:18 PM, Obe, Regina wrote:
>
> > A lot of these are catalogued here
> >
> > http://postgis.refractions.net/documentation/manual-svn/ch08.html#id2671967
> >
> > and
> >  ST_Union and I just discovered even ST_BuildArea.
> >
> > ST_ConvexHull (but that in my opinion gives goofy results).
> >
> >
> > Though still debating how to describe that their results are
> > debateable.
> >
> > Also ST_BuildArea seems to hmm do a 2D and then tack on the Z so I
> > guess I should add that to the list.  Simon tested this out when he
> > was doing this write up and to my shock it sort of preserved 3D
> > though I would say incorrectly.  Any rate I don't think he has that
> > here, but still an interesting read
> >
> > http://www.spatialdbadvisor.com/postgis_tips_tricks
> >
> >
> >
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: geos-devel-bounces@lists.osgeo.org on behalf of Sean Gillies
> > Sent: Mon 1/12/2009 2:00 PM
> > To: GEOS Development List
> > Subject: Re: [geos-devel] C API coordinate sequence dimensions
> >
> > Ah, I didn't know this. Which ones?
> >
> > On Jan 12, 2009, at 11:40 AM, Paul Ramsey wrote:
> >
> > > Not all operations are 2D, just 99% of them. Some of the overlay  
> ops
> > > try to compute "correct" derived Z-values.
> > >
> > > P
> > >
> > > On Jan 12, 2009, at 10:04 AM, Sean Gillies wrote:
> > >
> > >> So, the dimension argument in GEOSCoordSeq_create is ignored  
> unless
> > >> the active sequence implementation takes dimensions other than 3?
> > >>
> > >> Why is GEOS's default sequence 3D when all operations are 2D?
> > >>
> > >> Sean
> > >>
> > >> On Jan 12, 2009, at 10:56 AM, Martin Davis wrote:
> > >>
> > >>> Actually JTS implements this correctly.  The return value from
> > >>> getDimension is computed by the implementation of
> > >>> CoordinateSequence.  In the case of DefaultCoordinateSequence
> > >>> (which by the way is deprecated and replaced by
> > >>> CoordinateArraySequence) the value is alway 3, since the
> > >>> Coordinate representation used by these sequences always allows
> > >>> for 3 ordinates.
> > >>>
> > >>> In the case of PackedCoordinateSequence the dimension can be
> > >>> selected on creation, and this is the value that is returned by
> > >>> getDimension.
> > >>>
> > >>> Sanak wrote:
> > >>>> Hi list,
> > >>>>
> > >>>> I don't know that this is a known bug, but
> > >>>> CoordinateArraySequence.getDimension() method always return 3.
> > >>>>
> > >>>> [trunk/source/headers/geos/geom/CoordinateArraySequence.h -  
> line
> > >>>> 88]
> > >>>> size_t getDimension() const { return 3; }
> > >>>>
> > >>>>
> > >>>> JTS(JTS Topology Suite) seems to be also the same.
> > >>>>
> > >>>> [jts/src/com/vividsolutions/jts/geom/
> > >>>> DefaultCoordinateSequence.java - line 95]
> > >>>> public int getDimension() { return 3; }
> > >>>>
> > >>>> I don't know that this is a specification or not...
> > >>>>
> > >>>> Regards,
> > >>>>
> > >>>> Sanak.
> > >>>>
> > >>>> 2009/1/12 Sean Gillies <sgillies@frii.com
> > >>>> <mailto:sgillies@frii.com>>
> > >>>>
> > >>>>  I'm finding that GEOSCoordSeq_getDimensions returns 3 no  
> matter
> > >>>> what
> > >>>>
> > >>>>   # Accessing libgeos_c via Python ctypes
> > >>>>   >>> s = lgeos.GEOSCoordSeq_create(2, 2)
> > >>>>   >>> ndim = c_int()
> > >>>>   >>> lgeos.GEOSCoordSeq_getDimensions(s, byref(ndim))
> > >>>>   1
> > >>>>   >>> ndim
> > >>>>   c_long(3)
> > >>>>
> > >>>>  Is this a known bug? Looks like we're only testing creation of
> > 3D
> > >>>>  coordinate sequences in
> > >>>>
> > >>>>  http://trac.osgeo.org/geos/browser/trunk/tests/unit/capi/GEOSCoordSeqTest.cpp
> > >>>>
> > >>>>  --
> > >>>>  Sean Gillies
> > >>>>  http://sgillies.net
> > >>>>
> > >>>>  _______________________________________________
> > >>>>  geos-devel mailing list
> > >>>>  geos-devel@lists.osgeo.org <mailto:geos-devel@lists.osgeo.org>
> > >>>>  http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >>>>
> > >>>>
> > >>>>
> >  
> ------------------------------------------------------------------------
> > >>>>
> > >>>> _______________________________________________
> > >>>> geos-devel mailing list
> > >>>> geos-devel@lists.osgeo.org
> > >>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >>>
> > >>> --
> > >>> Martin Davis
> > >>> Senior Technical Architect
> > >>> Refractions Research, Inc.
> > >>> (250) 383-3022
> > >>>
> > >>> _______________________________________________
> > >>> geos-devel mailing list
> > >>> geos-devel@lists.osgeo.org
> > >>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >>
> > >>
> > >>
> > >> --
> > >> Sean Gillies
> > >> sean.gillies@gmail.com
> > >> http://sgillies.net
> > >>
> > >> _______________________________________________
> > >> geos-devel mailing list
> > >> geos-devel@lists.osgeo.org
> > >> http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >
> > >
> > > --
> > > Paul Ramsey
> > > pramsey@cleverelephant.ca
> > > +1 250 885 0632
> > >
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> >
> >
> >
> >
> >
> > The substance of this message, including any attachments, may be
> > confidential, legally privileged and/or exempt from disclosure
> > pursuant to Massachusetts law. It is intended solely for the
> > addressee. If you received this in error, please contact the sender
> > and delete the material from any computer.
> >
> >
> >
> > Help make the earth a greener place. If at all possible resist
> > printing this email and join us in saving paper.
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>
>
> The substance of this message, including any attachments, may be  
> confidential, legally privileged and/or exempt from disclosure  
> pursuant to Massachusetts law. It is intended solely for the  
> addressee. If you received this in error, please contact the sender  
> and delete the material from any computer.
>
>
>
> Help make the earth a greener place. If at all possible resist  
> printing this email and join us in saving paper.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel





-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090113/48ffb23f/attachment-0001.html
From rindahl at lrcwe.com  Tue Jan 13 13:21:20 2009
From: rindahl at lrcwe.com (Bruce Rindahl)
Date: Tue Jan 13 13:21:23 2009
Subject: [geos-devel] Minimum Bounding Circle
In-Reply-To: <49591F8F.6070100@lrcwe.com>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0DB@ZDND.DND.boston.cob>	<4959139F.1060209@refractions.net>
	<49591F8F.6070100@lrcwe.com>
Message-ID: <496CDBA0.6020005@lrcwe.com>

I am interested in exploring this issue further.  I believe the the 
computation of a minimum bounding circle is a requirement in evaluating 
congressional districts (Lee- Reference??).  If so then to have this 
function available to a program like PostGIS would be a plus.  I would 
like to test this module but need some help.  How do I  expose the 
module so it is available in PostGIS?

Bruce

Bruce Rindahl wrote:
> I just looked at MinimumDiameter.cpp and the code does the same thing 
> as the first part of my code linked by Regina.  This would be nice to 
> have except for one thing - it may not work.  It calls 
> distancePerpendicular which I couldn't find.  If this finds the point 
> furthest from the /extended/ line segment and uses this to compute the 
> diameter it is the same method as I used - rotate the geometry so the 
> segment is horizontal and compute the bounding box.  I can provide you 
> with a geometry where this algorithm fails.  Lee Meilleur can also 
> provide a counter example.  Because of this I changed my code to test 
> every point pair for the Minimum Diameter.
> Bruce Rindahl
>
> Martin Davis wrote:
>> Yes, this is computing the same thing as the Minimum Bounding Circle 
>> algorithm.  This algorithm appeared in JTS for some reason which is 
>> lost in the mists of time.  AFAIK it's never really been used or 
>> tested extensively.
>> It probably postdated the initial port of GEOS, and I guess nobody 
>> went looking for it until now...
>>
>> Obe, Regina wrote:
>>>
>>> I was snooping around the GEOS library and noticed a curious 
>>> algorithm class
>>> called MinimumDiameter.  As far as I can tell from scanning the code,
>>> it seems similar in concept to the the Minimum Bounding Circle 
>>> plpgsql algorithm that
>>> Bruce posted in November
>>>
>>> http://postgis.refractions.net/pipermail/postgis-users/2008-October/021734.html 
>>>
>>>
>>> Just wondering why this is not exposed in the CAPI interface or does 
>>> it server an entirely different purpose from what I am thinking.
>>>
>>> Thanks,
>>> Regina
>>>
>>>
>>>
>>>
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> *The substance of this message, including any attachments, may be 
>>> confidential, legally privileged and/or exempt from disclosure 
>>> pursuant to Massachusetts law. It is intended solely for the 
>>> addressee. If you received this in error, please contact the sender 
>>> and delete the material from any computer. *
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> * Help make the earth a greener place. If at all possible resist 
>>> printing this email and join us in saving paper. *
>>>
>>> * *
>>>
>>> * *
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090113/7dafc3e1/attachment.html
From robe.dnd at cityofboston.gov  Tue Jan 13 13:30:52 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Jan 13 13:34:42 2009
Subject: [geos-devel] Minimum Bounding Circle
References: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0DB@ZDND.DND.boston.cob>	<4959139F.1060209@refractions.net>
	<49591F8F.6070100@lrcwe.com> <496CDBA0.6020005@lrcwe.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0FA@ZDND.DND.boston.cob>

I'm probably not the best person to answer this but based on my understanding.

I think you - 
1) Expose it in GEOS --  capi/geos_c.cpp, .h
2) Then on the PostGIS side create a function in lwgeom/lwgeom_geos.* that
calls the CAPI function.

Hope that helps,
Regina
-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of Bruce Rindahl
Sent: Tue 1/13/2009 1:21 PM
To: rindahl@lrcwe.com; GEOS Development List
Cc: Lee Meilleur
Subject: Re: [geos-devel] Minimum Bounding Circle
 
I am interested in exploring this issue further.  I believe the the 
computation of a minimum bounding circle is a requirement in evaluating 
congressional districts (Lee- Reference??).  If so then to have this 
function available to a program like PostGIS would be a plus.  I would 
like to test this module but need some help.  How do I  expose the 
module so it is available in PostGIS?

Bruce

Bruce Rindahl wrote:
> I just looked at MinimumDiameter.cpp and the code does the same thing 
> as the first part of my code linked by Regina.  This would be nice to 
> have except for one thing - it may not work.  It calls 
> distancePerpendicular which I couldn't find.  If this finds the point 
> furthest from the /extended/ line segment and uses this to compute the 
> diameter it is the same method as I used - rotate the geometry so the 
> segment is horizontal and compute the bounding box.  I can provide you 
> with a geometry where this algorithm fails.  Lee Meilleur can also 
> provide a counter example.  Because of this I changed my code to test 
> every point pair for the Minimum Diameter.
> Bruce Rindahl
>
> Martin Davis wrote:
>> Yes, this is computing the same thing as the Minimum Bounding Circle 
>> algorithm.  This algorithm appeared in JTS for some reason which is 
>> lost in the mists of time.  AFAIK it's never really been used or 
>> tested extensively.
>> It probably postdated the initial port of GEOS, and I guess nobody 
>> went looking for it until now...
>>
>> Obe, Regina wrote:
>>>
>>> I was snooping around the GEOS library and noticed a curious 
>>> algorithm class
>>> called MinimumDiameter.  As far as I can tell from scanning the code,
>>> it seems similar in concept to the the Minimum Bounding Circle 
>>> plpgsql algorithm that
>>> Bruce posted in November
>>>
>>> http://postgis.refractions.net/pipermail/postgis-users/2008-October/021734.html 
>>>
>>>
>>> Just wondering why this is not exposed in the CAPI interface or does 
>>> it server an entirely different purpose from what I am thinking.
>>>
>>> Thanks,
>>> Regina
>>>
>>>
>>>
>>>
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> *The substance of this message, including any attachments, may be 
>>> confidential, legally privileged and/or exempt from disclosure 
>>> pursuant to Massachusetts law. It is intended solely for the 
>>> addressee. If you received this in error, please contact the sender 
>>> and delete the material from any computer. *
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> * Help make the earth a greener place. If at all possible resist 
>>> printing this email and join us in saving paper. *
>>>
>>> * *
>>>
>>> * *
>>>
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090113/b210d546/attachment.html
From charles.thibert at ingres.com  Tue Jan 13 13:54:52 2009
From: charles.thibert at ingres.com (Chuck Thibert)
Date: Tue Jan 13 13:55:05 2009
Subject: [geos-devel] Chuck Thibert as Committer
In-Reply-To: <F1A61932-3237-49C4-89B8-93E5B7106A66@gmail.com>
References: <30fe546d0901130908r43100b24y528df7e50b6d23ad@mail.gmail.com>
	<F1A61932-3237-49C4-89B8-93E5B7106A66@gmail.com>
Message-ID: <1231872892.3818.7.camel@localhost.localdomain>

I have read, understand and agree to RFC 2
http://trac.osgeo.org/geos/wiki/RFC2

Thanks,
Chuck

On Tue, 2009-01-13 at 11:10 -0600, Howard Butler wrote:
> On Jan 13, 2009, at 11:08 AM, Paul Ramsey wrote:
> 
> > PSC,
> >
> > Chuck has now created and had accepted a large patch to the code base,
> > I'd like to make him a committer. I caused more trouble applying his
> > patch than any other process would :)
> 
> +1 subject to acceptance of RFC 2 http://trac.osgeo.org/geos/wiki/RFC2
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
From rindahl at lrcwe.com  Tue Jan 13 15:14:52 2009
From: rindahl at lrcwe.com (Bruce Rindahl)
Date: Tue Jan 13 15:14:56 2009
Subject: [geos-devel] Minimum Bounding Circle
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0FA@ZDND.DND.boston.cob>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0DB@ZDND.DND.boston.cob>	<4959139F.1060209@refractions.net>
	<49591F8F.6070100@lrcwe.com> <496CDBA0.6020005@lrcwe.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0FA@ZDND.DND.boston.cob>
Message-ID: <496CF63C.60605@lrcwe.com>

OK I can kill this thread...
This issue came up when a request to generate the MINIMUM Bounding 
Circle of a geometry.  To generate this you need the MAXIMUM diameter of 
a geometry as a start.  Note the opposite operations.  The bottom line 
is there is no MaximumDiameter function in GEOS (or probably JTS).  If 
the MinimumDiameter function is need that could be exposed but I don't 
need it.
As for my other comment that the algorithm may fail, that appears to be 
wrong since I was confused by the maximum/minimum issue.  It looks fine 
for what it is doing.
Sorry for all the traffic.

Bruce Rindahl

Obe, Regina wrote:
>
> I'm probably not the best person to answer this but based on my 
> understanding.
>
> I think you -
> 1) Expose it in GEOS --  capi/geos_c.cpp, .h
> 2) Then on the PostGIS side create a function in lwgeom/lwgeom_geos.* that
> calls the CAPI function.
>
> Hope that helps,
> Regina
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org on behalf of Bruce Rindahl
> Sent: Tue 1/13/2009 1:21 PM
> To: rindahl@lrcwe.com; GEOS Development List
> Cc: Lee Meilleur
> Subject: Re: [geos-devel] Minimum Bounding Circle
>
> I am interested in exploring this issue further.  I believe the the
> computation of a minimum bounding circle is a requirement in evaluating
> congressional districts (Lee- Reference??).  If so then to have this
> function available to a program like PostGIS would be a plus.  I would
> like to test this module but need some help.  How do I  expose the
> module so it is available in PostGIS?
>
> Bruce
>
> Bruce Rindahl wrote:
> > I just looked at MinimumDiameter.cpp and the code does the same thing
> > as the first part of my code linked by Regina.  This would be nice to
> > have except for one thing - it may not work.  It calls
> > distancePerpendicular which I couldn't find.  If this finds the point
> > furthest from the /extended/ line segment and uses this to compute the
> > diameter it is the same method as I used - rotate the geometry so the
> > segment is horizontal and compute the bounding box.  I can provide you
> > with a geometry where this algorithm fails.  Lee Meilleur can also
> > provide a counter example.  Because of this I changed my code to test
> > every point pair for the Minimum Diameter.
> > Bruce Rindahl
> >
> > Martin Davis wrote:
> >> Yes, this is computing the same thing as the Minimum Bounding Circle
> >> algorithm.  This algorithm appeared in JTS for some reason which is
> >> lost in the mists of time.  AFAIK it's never really been used or
> >> tested extensively.
> >> It probably postdated the initial port of GEOS, and I guess nobody
> >> went looking for it until now...
> >>
> >> Obe, Regina wrote:
> >>>
> >>> I was snooping around the GEOS library and noticed a curious
> >>> algorithm class
> >>> called MinimumDiameter.  As far as I can tell from scanning the code,
> >>> it seems similar in concept to the the Minimum Bounding Circle
> >>> plpgsql algorithm that
> >>> Bruce posted in November
> >>>
> >>> 
> http://postgis.refractions.net/pipermail/postgis-users/2008-October/021734.html
> >>>
> >>>
> >>> Just wondering why this is not exposed in the CAPI interface or does
> >>> it server an entirely different purpose from what I am thinking.
> >>>
> >>> Thanks,
> >>> Regina
> >>>
> >>>
> >>>
> >>>
> >>>
> >>> 
> ------------------------------------------------------------------------
> >>>
> >>>
> >>> *The substance of this message, including any attachments, may be
> >>> confidential, legally privileged and/or exempt from disclosure
> >>> pursuant to Massachusetts law. It is intended solely for the
> >>> addressee. If you received this in error, please contact the sender
> >>> and delete the material from any computer. *
> >>>
> >>> 
> ------------------------------------------------------------------------
> >>>
> >>>
> >>> * Help make the earth a greener place. If at all possible resist
> >>> printing this email and join us in saving paper. *
> >>>
> >>> * *
> >>>
> >>> * *
> >>>
> >>> 
> ------------------------------------------------------------------------
> >>>
> >>>
> >>> _______________________________________________
> >>> geos-devel mailing list
> >>> geos-devel@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >>
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090113/cc8b18df/attachment-0001.html
From mark.cave-ayland at ilande.co.uk  Wed Jan 14 02:54:21 2009
From: mark.cave-ayland at ilande.co.uk (Mark Cave-Ayland)
Date: Wed Jan 14 03:13:58 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate sequence
	dimensions)
In-Reply-To: <BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>
	<5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
	<496B8447.3080203@refractions.net>
	<4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>
	<75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>
	<CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
	<86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>
	<BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>
Message-ID: <1231919661.6447.4.camel@mca-desktop>

On Tue, 2009-01-13 at 11:08 -0700, Sean Gillies wrote:

> "Smurf code"? Smurfs are good, if I remember my Saturday morning  
> cartoons :)
> 
> It would probably take me much longer to grep and read through the  
> code base to find which functions are 3D and document them in the wiki  
> than it would take the authors ... can I do anything to entice them to  
> document the 3D functions?
> 
> Sean

Bear in mind that even though some functions claim to support 3D, they
may actually be broken. We currently have an issue in PostGIS with
BuildArea returning an invalid polygon here due to an incorrect Z
coordinate:

http://postgis.refractions.net/pipermail/postgis-devel/2009-January/004571.html

Can anyone with more experience with BuildArea (like Martin!) comment on
whether this is a GEOS bug or simply a problem with behaviour > 2
dimensions being undefined?


ATB,

Mark.


From strk at keybit.net  Wed Jan 14 04:04:23 2009
From: strk at keybit.net (strk)
Date: Wed Jan 14 04:04:27 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate sequence
	dimensions)
In-Reply-To: <1231919661.6447.4.camel@mca-desktop>
References: <5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
	<496B8447.3080203@refractions.net>
	<4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>
	<75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>
	<CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
	<86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>
	<BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>
	<1231919661.6447.4.camel@mca-desktop>
Message-ID: <20090114090423.GB87941@keybit.net>

On Wed, Jan 14, 2009 at 07:54:21AM +0000, Mark Cave-Ayland wrote:

> Can anyone with more experience with BuildArea (like Martin!) comment on
> whether this is a GEOS bug or simply a problem with behaviour > 2
> dimensions being undefined?

JTS didn't support 3d when I added it to GEOS, so can't really
serve as a source of information. The 3d task was added driven by
customer needs, so the only working and tested functions was the one
the customer needed. If I recall correctly it was mainly Intersection
and probably Union.

Since other functions are based on the former, there may be side-effects
you wouldn't care about if you aren't using 3d features.

Paul draw the specs about expected behaviour. Dunno if there's a doc
around and I likely lost mine (Oops).

--strk; 

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From robe.dnd at cityofboston.gov  Wed Jan 14 08:05:56 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Wed Jan 14 08:06:02 2009
Subject: [geos-devel] RE: [postgis-devel] Can't compile Geos
	3.1underOpenSUSE anymore, compiles okay under Vc2005 with changes
In-Reply-To: <30fe546d0901130805v51d42922nc09494b4fd58fa68@mail.gmail.com>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob><496CA8F6.8050900@siriusit.co.uk><53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob><30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com><53F9CF533E1AA14EA1F8C5C08ABC08D20547011B@ZDND.DND.boston.cob>
	<30fe546d0901130805v51d42922nc09494b4fd58fa68@mail.gmail.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D20547084E@ZDND.DND.boston.cob>

Paul,

Okay I blew out my geos trunk and it didn't help.  Though your change to
config  forced me to finally bite the bullet and upgrade my mingw
autoconf and automake since I could no longer even sh autogen.sh after
that and even copying my configure from my OpenSUSE install did not
work.  I was meaning to upgrade since PostGIS requires a newer autoconf
too.

I guess your other changes got rid of some of the warnings and I am left
with 

geos_ts_c.cpp: In function `char*
GEOSisValidReason_r(GEOSContextHandle_HS*, const
geos::geom::Geometry*)':
geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
geos_ts_c.cpp:587: warning: unused variable 'strdup'
make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
make: *** [all-recursive] Error 1


I wonder if upgrading my GCC would help.   I think I'm running GCC
3.4.5.

On another note -- I think for VC 2005 the geos_ts_c.cpp has to be
added.  I just compiled under VC 2005 and that seemd to compile okay
with 300 someodd warnings after adding that dependency.

I'll send you a patch for that once I've cleaned it up.  I wanted to get
rid of that reference to c:/mys... that has been stuck in there for eons
too.

Thanks,
Regina



-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Tuesday, January 13, 2009 11:06 AM
To: GEOS Development List
Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos
3.1underOpenSUSE anymore

Doesn't make much sense to me. <cstring> is #include'd, so...?

On Tue, Jan 13, 2009 at 7:54 AM, Obe, Regina <robe.dnd@cityofboston.gov>
wrote:
> Okay that fixed my OpenSUSE compile problem.
>
> On MingW, getting a different error now -- but haven't done a complete
> clean blowout so it could be remnants of something else.  But just in
> case.  Below is what I get under MingW
>
>
> -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_ts_c.o
> geos_ts_c.cpp: In function `char*
> GEOSisValidReason_r(GEOSContextHandle_HS*, const
> geos::geom::Geometry*)':
> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
> geos_ts_c.cpp:587: warning: unused variable 'strdup'
> geos_ts_c.cpp: In function `char
> GEOSWKBWriter_getIncludeSRID_r(GEOSContextHandle_HS*, const
> GEOSWKBWriter*)':
> geos_ts_c.cpp:3682: warning: converting to non-pointer type `char'
from
> NULL
> geos_ts_c.cpp:3688: warning: converting to non-pointer type `char'
from
> NULL
> geos_ts_c.cpp:3699: warning: converting to non-pointer type `char'
from
> NULL
> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
> make: *** [all-recursive] Error 1
>
>
> I'll be testing under Visual Studio in the next day or so.
>
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Tuesday, January 13, 2009 10:49 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
> underOpenSUSE anymore
>
> Yep, same here on a fresh checkout. And there was indeed a file
> missing from my check-in. Fixed at r2233.
>
> P.
>
> On Tue, Jan 13, 2009 at 7:02 AM, Obe, Regina
<robe.dnd@cityofboston.gov>
> wrote:
>> Mark,
>>
>> Good thought.  I can't remember if I did an autogen or not, but just
> did
>> and my OpenSUSE is still compiling.
>>
>> My MingW install which I did do an sh autogen.sh , configure, make
>> clean, make is failing with the same error
>>
>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>> -I../source/headers/geos -I../source/headers
>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>> geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>> -I../source/headers/geos -I../source/headers
>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>> geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>> make: *** [all-recursive] Error 1
>>
>>
>> Have you tried the latest one?
>>
>> My next step is to blow out my geos source and start from scratch.
>>
>> Thanks,
>> Regina
>>
>> -----Original Message-----
>> From: postgis-devel-bounces@postgis.refractions.net
>> [mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of
> Mark
>> Cave-Ayland
>> Sent: Tuesday, January 13, 2009 9:45 AM
>> To: PostGIS Development Discussion
>> Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
>> anymore
>>
>> Obe, Regina wrote:
>>
>>> I assume this is because of the recent changes.  I did an svn up and
> a
>>> reconfigure and then compile under OpenSUSE.
>>>
>>> I get this error
>>>
>>>  g++ -DHAVE_CONFIG_H -I. -I../source/headers
-I../source/headers/geos
>>> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
>>> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic
>>> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
>>> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o libgeos_c_la-geos_c.o
>>>> /dev/null 2>&1
>>> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
>>> make: *** [all-recursive] Error 1
>>>
>>> Am I missing something?
>>>
>>> Thanks,
>>> Regina
>>
>> Hmmm the "ts" part implies this is something to do with the
> thread-safe
>> API patch. Perhaps you need to re-run autogen.sh so that it picks up
> the
>>
>> new files? Failing that does a brand new checkout work?
>>
>>
>> HTH,
>>
>> Mark.
>>
>> --
>> Mark Cave-Ayland
>> Sirius Corporation - The Open Source Experts
>> http://www.siriusit.co.uk
>> T: +44 870 608 0063
>> _______________________________________________
>> postgis-devel mailing list
>> postgis-devel@postgis.refractions.net
>> http://postgis.refractions.net/mailman/listinfo/postgis-devel
>> -----------------------------------------
>> The substance of this message, including any attachments, may be
>> confidential, legally privileged and/or exempt from disclosure
>> pursuant to Massachusetts law. It is intended
>> solely for the addressee. If you received this in error, please
>> contact the sender and delete the material from any computer.
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From robe.dnd at cityofboston.gov  Wed Jan 14 08:17:07 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Wed Jan 14 08:17:11 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate
	sequencedimensions)
In-Reply-To: <20090114090423.GB87941@keybit.net>
References: <5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com><496B8447.3080203@refractions.net><4F48AE18-644A-468B-9CB6-10296613C34B@frii.com><75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca><CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com><53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob><86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com><53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob><BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com><1231919661.6447.4.camel@mca-desktop>
	<20090114090423.GB87941@keybit.net>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205470856@ZDND.DND.boston.cob>

Well from my observation it looks like most of those Ops functions (not
sure about Union and Intersection) -- first do a 2D operation and then
do some sort of apply the Z back on.  So the Z is never considered in
the basic operation -- thus the cause of a lot of the goofiness.

 Take this example.  It seems clear to me that these polygon's are not
within each other so it should be a multipolygon not a Polygon with a
hole. One lies above the other.

SELECT ST_AsEWKT(ST_BuildArea('MULTILINESTRING((0 0 1,20 0 1,20 20 1,0
20 1,0 0 1),(10 10 2,10 11 2,11 11 2,11 10 2,10 10 2))'))

"POLYGON((0 0 1,0 20 1,20 20 1,20 0 1,0 0 1),(10 10 2,11 10 2,11 11 2,10
11 2,10 10 2))"





-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of strk
Sent: Wednesday, January 14, 2009 4:04 AM
To: GEOS Development List
Subject: Re: 3D operations (Re: [geos-devel] C API coordinate
sequencedimensions)

On Wed, Jan 14, 2009 at 07:54:21AM +0000, Mark Cave-Ayland wrote:

> Can anyone with more experience with BuildArea (like Martin!) comment
on
> whether this is a GEOS bug or simply a problem with behaviour > 2
> dimensions being undefined?

JTS didn't support 3d when I added it to GEOS, so can't really
serve as a source of information. The 3d task was added driven by
customer needs, so the only working and tested functions was the one
the customer needed. If I recall correctly it was mainly Intersection
and probably Union.

Since other functions are based on the former, there may be side-effects
you wouldn't care about if you aren't using 3d features.

Paul draw the specs about expected behaviour. Dunno if there's a doc
around and I likely lost mine (Oops).

--strk; 

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From david.bitner at gmail.com  Wed Jan 14 11:07:30 2009
From: david.bitner at gmail.com (David William Bitner)
Date: Wed Jan 14 11:07:32 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate sequence 
	dimensions)
In-Reply-To: <20090114090423.GB87941@keybit.net>
References: <5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
	<4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>
	<75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>
	<CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
	<86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>
	<BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>
	<1231919661.6447.4.camel@mca-desktop>
	<20090114090423.GB87941@keybit.net>
Message-ID: <d2f53e190901140807j558fdbc0xa37846744536b9c6@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: zpreservation.PNG
Type: image/png
Size: 39985 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090114/ef61c79c/zpreservation-0001.png
From sgillies at frii.com  Wed Jan 14 11:34:41 2009
From: sgillies at frii.com (Sean Gillies)
Date: Wed Jan 14 11:34:44 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate sequence
	dimensions)
In-Reply-To: <d2f53e190901140807j558fdbc0xa37846744536b9c6@mail.gmail.com>
References: <5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
	<4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>
	<75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>
	<CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
	<86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>
	<BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>
	<1231919661.6447.4.camel@mca-desktop>
	<20090114090423.GB87941@keybit.net>
	<d2f53e190901140807j558fdbc0xa37846744536b9c6@mail.gmail.com>
Message-ID: <E40B2CA2-432D-4B36-B4A8-CBE24EF4B781@frii.com>

David, thank you.

Cheers,
Sean

On Jan 14, 2009, at 9:07 AM, David William Bitner wrote:

> Here are the specs that were used, the only requirement was for  
> intersection, but I'm not sure if anything else was affected.
>
>
>
> On Wed, Jan 14, 2009 at 3:04 AM, strk <strk@keybit.net> wrote:
> On Wed, Jan 14, 2009 at 07:54:21AM +0000, Mark Cave-Ayland wrote:
>
> > Can anyone with more experience with BuildArea (like Martin!)  
> comment on
> > whether this is a GEOS bug or simply a problem with behaviour > 2
> > dimensions being undefined?
>
> JTS didn't support 3d when I added it to GEOS, so can't really
> serve as a source of information. The 3d task was added driven by
> customer needs, so the only working and tested functions was the one
> the customer needed. If I recall correctly it was mainly Intersection
> and probably Union.
>
> Since other functions are based on the former, there may be side- 
> effects
> you wouldn't care about if you aren't using 3d features.
>
> Paul draw the specs about expected behaviour. Dunno if there's a doc
> around and I likely lost mine (Oops).
>
> --strk;
>
>  Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
>  http://foo.keybit.net/~strk/services.html  /\  Keep it simple!
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>
> -- 
> ************************************
> David William Bitner
> <zpreservation.PNG>_______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From pramsey at cleverelephant.ca  Wed Jan 14 11:55:37 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Jan 14 11:55:40 2009
Subject: [geos-devel] RE: [postgis-devel] Can't compile Geos
	3.1underOpenSUSE anymore, compiles okay under Vc2005 with changes
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D20547084E@ZDND.DND.boston.cob>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob>
	<496CA8F6.8050900@siriusit.co.uk>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob>
	<30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20547011B@ZDND.DND.boston.cob>
	<30fe546d0901130805v51d42922nc09494b4fd58fa68@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20547084E@ZDND.DND.boston.cob>
Message-ID: <30fe546d0901140855n5d001cc7ic447b86a3fc186d0@mail.gmail.com>

Someone smarter than me is going to have to solve this. strdup is
defined in <cstring> if I'm not mistaken, and that's included at the
top of the file.  So why is it not being picked up? You are even using
the gnu toolchain, so all the more reason you should have consistent
behavior to the linux/osx builds.

P.

On Wed, Jan 14, 2009 at 5:05 AM, Obe, Regina <robe.dnd@cityofboston.gov> wrote:
> Paul,
>
> Okay I blew out my geos trunk and it didn't help.  Though your change to
> config  forced me to finally bite the bullet and upgrade my mingw
> autoconf and automake since I could no longer even sh autogen.sh after
> that and even copying my configure from my OpenSUSE install did not
> work.  I was meaning to upgrade since PostGIS requires a newer autoconf
> too.
>
> I guess your other changes got rid of some of the warnings and I am left
> with
>
> geos_ts_c.cpp: In function `char*
> GEOSisValidReason_r(GEOSContextHandle_HS*, const
> geos::geom::Geometry*)':
> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
> geos_ts_c.cpp:587: warning: unused variable 'strdup'
> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
> make: *** [all-recursive] Error 1
>
>
> I wonder if upgrading my GCC would help.   I think I'm running GCC
> 3.4.5.
>
> On another note -- I think for VC 2005 the geos_ts_c.cpp has to be
> added.  I just compiled under VC 2005 and that seemd to compile okay
> with 300 someodd warnings after adding that dependency.
>
> I'll send you a patch for that once I've cleaned it up.  I wanted to get
> rid of that reference to c:/mys... that has been stuck in there for eons
> too.
>
> Thanks,
> Regina
>
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Tuesday, January 13, 2009 11:06 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos
> 3.1underOpenSUSE anymore
>
> Doesn't make much sense to me. <cstring> is #include'd, so...?
>
> On Tue, Jan 13, 2009 at 7:54 AM, Obe, Regina <robe.dnd@cityofboston.gov>
> wrote:
>> Okay that fixed my OpenSUSE compile problem.
>>
>> On MingW, getting a different error now -- but haven't done a complete
>> clean blowout so it could be remnants of something else.  But just in
>> case.  Below is what I get under MingW
>>
>>
>> -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_ts_c.o
>> geos_ts_c.cpp: In function `char*
>> GEOSisValidReason_r(GEOSContextHandle_HS*, const
>> geos::geom::Geometry*)':
>> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
>> geos_ts_c.cpp:587: warning: unused variable 'strdup'
>> geos_ts_c.cpp: In function `char
>> GEOSWKBWriter_getIncludeSRID_r(GEOSContextHandle_HS*, const
>> GEOSWKBWriter*)':
>> geos_ts_c.cpp:3682: warning: converting to non-pointer type `char'
> from
>> NULL
>> geos_ts_c.cpp:3688: warning: converting to non-pointer type `char'
> from
>> NULL
>> geos_ts_c.cpp:3699: warning: converting to non-pointer type `char'
> from
>> NULL
>> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>> make: *** [all-recursive] Error 1
>>
>>
>> I'll be testing under Visual Studio in the next day or so.
>>
>>
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>> Sent: Tuesday, January 13, 2009 10:49 AM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
>> underOpenSUSE anymore
>>
>> Yep, same here on a fresh checkout. And there was indeed a file
>> missing from my check-in. Fixed at r2233.
>>
>> P.
>>
>> On Tue, Jan 13, 2009 at 7:02 AM, Obe, Regina
> <robe.dnd@cityofboston.gov>
>> wrote:
>>> Mark,
>>>
>>> Good thought.  I can't remember if I did an autogen or not, but just
>> did
>>> and my OpenSUSE is still compiling.
>>>
>>> My MingW install which I did do an sh autogen.sh , configure, make
>>> clean, make is failing with the same error
>>>
>>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>>> -I../source/headers/geos -I../source/headers
>>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
>>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>>> geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
>>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>>> -I../source/headers/geos -I../source/headers
>>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\" -g
>>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>>> geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>>> make: *** [all-recursive] Error 1
>>>
>>>
>>> Have you tried the latest one?
>>>
>>> My next step is to blow out my geos source and start from scratch.
>>>
>>> Thanks,
>>> Regina
>>>
>>> -----Original Message-----
>>> From: postgis-devel-bounces@postgis.refractions.net
>>> [mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of
>> Mark
>>> Cave-Ayland
>>> Sent: Tuesday, January 13, 2009 9:45 AM
>>> To: PostGIS Development Discussion
>>> Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
>>> anymore
>>>
>>> Obe, Regina wrote:
>>>
>>>> I assume this is because of the recent changes.  I did an svn up and
>> a
>>>> reconfigure and then compile under OpenSUSE.
>>>>
>>>> I get this error
>>>>
>>>>  g++ -DHAVE_CONFIG_H -I. -I../source/headers
> -I../source/headers/geos
>>>> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
>>>> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic
>>>> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
>>>> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o libgeos_c_la-geos_c.o
>>>>> /dev/null 2>&1
>>>> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
>>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>>> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
>>>> make: *** [all-recursive] Error 1
>>>>
>>>> Am I missing something?
>>>>
>>>> Thanks,
>>>> Regina
>>>
>>> Hmmm the "ts" part implies this is something to do with the
>> thread-safe
>>> API patch. Perhaps you need to re-run autogen.sh so that it picks up
>> the
>>>
>>> new files? Failing that does a brand new checkout work?
>>>
>>>
>>> HTH,
>>>
>>> Mark.
>>>
>>> --
>>> Mark Cave-Ayland
>>> Sirius Corporation - The Open Source Experts
>>> http://www.siriusit.co.uk
>>> T: +44 870 608 0063
>>> _______________________________________________
>>> postgis-devel mailing list
>>> postgis-devel@postgis.refractions.net
>>> http://postgis.refractions.net/mailman/listinfo/postgis-devel
>>> -----------------------------------------
>>> The substance of this message, including any attachments, may be
>>> confidential, legally privileged and/or exempt from disclosure
>>> pursuant to Massachusetts law. It is intended
>>> solely for the addressee. If you received this in error, please
>>> contact the sender and delete the material from any computer.
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>> -----------------------------------------
>> The substance of this message, including any attachments, may be
>> confidential, legally privileged and/or exempt from disclosure
>> pursuant to Massachusetts law. It is intended
>> solely for the addressee. If you received this in error, please
>> contact the sender and delete the material from any computer.
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mbdavis at refractions.net  Wed Jan 14 12:12:50 2009
From: mbdavis at refractions.net (Martin Davis)
Date: Wed Jan 14 12:13:53 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate
	sequence	dimensions)
In-Reply-To: <1231919661.6447.4.camel@mca-desktop>
References: <3FDD21B0-ED58-4187-BC5E-018A5E16D251@frii.com>	<5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>	<496B8447.3080203@refractions.net>	<4F48AE18-644A-468B-9CB6-10296613C34B@frii.com>	<75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca>	<CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>	<86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>	<BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>
	<1231919661.6447.4.camel@mca-desktop>
Message-ID: <496E1D12.7030806@refractions.net>

Not me...  as strk says, this is functionality which isn't in JTS.

Mark Cave-Ayland wrote:
> On Tue, 2009-01-13 at 11:08 -0700, Sean Gillies wrote:
>
>   
>> "Smurf code"? Smurfs are good, if I remember my Saturday morning  
>> cartoons :)
>>
>> It would probably take me much longer to grep and read through the  
>> code base to find which functions are 3D and document them in the wiki  
>> than it would take the authors ... can I do anything to entice them to  
>> document the 3D functions?
>>
>> Sean
>>     
>
> Bear in mind that even though some functions claim to support 3D, they
> may actually be broken. We currently have an issue in PostGIS with
> BuildArea returning an invalid polygon here due to an incorrect Z
> coordinate:
>
> http://postgis.refractions.net/pipermail/postgis-devel/2009-January/004571.html
>
> Can anyone with more experience with BuildArea (like Martin!) comment on
> whether this is a GEOS bug or simply a problem with behaviour > 2
> dimensions being undefined?
>
>
> ATB,
>
> Mark.
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From robe.dnd at cityofboston.gov  Wed Jan 14 12:27:24 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Wed Jan 14 12:27:30 2009
Subject: [geos-devel] RE: [postgis-devel] Can't compile
	Geos3.1underOpenSUSE anymore, compiles okay under Vc2005 with changes
In-Reply-To: <30fe546d0901140855n5d001cc7ic447b86a3fc186d0@mail.gmail.com>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob><496CA8F6.8050900@siriusit.co.uk><53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob><30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com><53F9CF533E1AA14EA1F8C5C08ABC08D20547011B@ZDND.DND.boston.cob><30fe546d0901130805v51d42922nc09494b4fd58fa68@mail.gmail.com><53F9CF533E1AA14EA1F8C5C08ABC08D20547084E@ZDND.DND.boston.cob>
	<30fe546d0901140855n5d001cc7ic447b86a3fc186d0@mail.gmail.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D20549576E@ZDND.DND.boston.cob>

Evidentally we had the same issue with CLocalizer and the use of strdup
was removed.  Not sure if that is the right solution though.

http://trac.osgeo.org/geos/changeset/2180 

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Wednesday, January 14, 2009 11:56 AM
To: GEOS Development List
Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile
Geos3.1underOpenSUSE anymore, compiles okay under Vc2005 with changes

Someone smarter than me is going to have to solve this. strdup is
defined in <cstring> if I'm not mistaken, and that's included at the
top of the file.  So why is it not being picked up? You are even using
the gnu toolchain, so all the more reason you should have consistent
behavior to the linux/osx builds.

P.

On Wed, Jan 14, 2009 at 5:05 AM, Obe, Regina <robe.dnd@cityofboston.gov>
wrote:
> Paul,
>
> Okay I blew out my geos trunk and it didn't help.  Though your change
to
> config  forced me to finally bite the bullet and upgrade my mingw
> autoconf and automake since I could no longer even sh autogen.sh after
> that and even copying my configure from my OpenSUSE install did not
> work.  I was meaning to upgrade since PostGIS requires a newer
autoconf
> too.
>
> I guess your other changes got rid of some of the warnings and I am
left
> with
>
> geos_ts_c.cpp: In function `char*
> GEOSisValidReason_r(GEOSContextHandle_HS*, const
> geos::geom::Geometry*)':
> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
> geos_ts_c.cpp:587: warning: unused variable 'strdup'
> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
> make: *** [all-recursive] Error 1
>
>
> I wonder if upgrading my GCC would help.   I think I'm running GCC
> 3.4.5.
>
> On another note -- I think for VC 2005 the geos_ts_c.cpp has to be
> added.  I just compiled under VC 2005 and that seemd to compile okay
> with 300 someodd warnings after adding that dependency.
>
> I'll send you a patch for that once I've cleaned it up.  I wanted to
get
> rid of that reference to c:/mys... that has been stuck in there for
eons
> too.
>
> Thanks,
> Regina
>
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Tuesday, January 13, 2009 11:06 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos
> 3.1underOpenSUSE anymore
>
> Doesn't make much sense to me. <cstring> is #include'd, so...?
>
> On Tue, Jan 13, 2009 at 7:54 AM, Obe, Regina
<robe.dnd@cityofboston.gov>
> wrote:
>> Okay that fixed my OpenSUSE compile problem.
>>
>> On MingW, getting a different error now -- but haven't done a
complete
>> clean blowout so it could be remnants of something else.  But just in
>> case.  Below is what I get under MingW
>>
>>
>> -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_ts_c.o
>> geos_ts_c.cpp: In function `char*
>> GEOSisValidReason_r(GEOSContextHandle_HS*, const
>> geos::geom::Geometry*)':
>> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
>> geos_ts_c.cpp:587: warning: unused variable 'strdup'
>> geos_ts_c.cpp: In function `char
>> GEOSWKBWriter_getIncludeSRID_r(GEOSContextHandle_HS*, const
>> GEOSWKBWriter*)':
>> geos_ts_c.cpp:3682: warning: converting to non-pointer type `char'
> from
>> NULL
>> geos_ts_c.cpp:3688: warning: converting to non-pointer type `char'
> from
>> NULL
>> geos_ts_c.cpp:3699: warning: converting to non-pointer type `char'
> from
>> NULL
>> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>> make: *** [all-recursive] Error 1
>>
>>
>> I'll be testing under Visual Studio in the next day or so.
>>
>>
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>> Sent: Tuesday, January 13, 2009 10:49 AM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
>> underOpenSUSE anymore
>>
>> Yep, same here on a fresh checkout. And there was indeed a file
>> missing from my check-in. Fixed at r2233.
>>
>> P.
>>
>> On Tue, Jan 13, 2009 at 7:02 AM, Obe, Regina
> <robe.dnd@cityofboston.gov>
>> wrote:
>>> Mark,
>>>
>>> Good thought.  I can't remember if I did an autogen or not, but just
>> did
>>> and my OpenSUSE is still compiling.
>>>
>>> My MingW install which I did do an sh autogen.sh , configure, make
>>> clean, make is failing with the same error
>>>
>>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>>> -I../source/headers/geos -I../source/headers
>>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\"
-g
>>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>>> geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
>>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>>> -I../source/headers/geos -I../source/headers
>>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\"
-g
>>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>>> geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>>> make: *** [all-recursive] Error 1
>>>
>>>
>>> Have you tried the latest one?
>>>
>>> My next step is to blow out my geos source and start from scratch.
>>>
>>> Thanks,
>>> Regina
>>>
>>> -----Original Message-----
>>> From: postgis-devel-bounces@postgis.refractions.net
>>> [mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of
>> Mark
>>> Cave-Ayland
>>> Sent: Tuesday, January 13, 2009 9:45 AM
>>> To: PostGIS Development Discussion
>>> Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
>>> anymore
>>>
>>> Obe, Regina wrote:
>>>
>>>> I assume this is because of the recent changes.  I did an svn up
and
>> a
>>>> reconfigure and then compile under OpenSUSE.
>>>>
>>>> I get this error
>>>>
>>>>  g++ -DHAVE_CONFIG_H -I. -I../source/headers
> -I../source/headers/geos
>>>> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
>>>> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi
-pedantic
>>>> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
>>>> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o
libgeos_c_la-geos_c.o
>>>>> /dev/null 2>&1
>>>> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
>>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>>> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
>>>> make: *** [all-recursive] Error 1
>>>>
>>>> Am I missing something?
>>>>
>>>> Thanks,
>>>> Regina
>>>
>>> Hmmm the "ts" part implies this is something to do with the
>> thread-safe
>>> API patch. Perhaps you need to re-run autogen.sh so that it picks up
>> the
>>>
>>> new files? Failing that does a brand new checkout work?
>>>
>>>
>>> HTH,
>>>
>>> Mark.
>>>
>>> --
>>> Mark Cave-Ayland
>>> Sirius Corporation - The Open Source Experts
>>> http://www.siriusit.co.uk
>>> T: +44 870 608 0063
>>> _______________________________________________
>>> postgis-devel mailing list
>>> postgis-devel@postgis.refractions.net
>>> http://postgis.refractions.net/mailman/listinfo/postgis-devel
>>> -----------------------------------------
>>> The substance of this message, including any attachments, may be
>>> confidential, legally privileged and/or exempt from disclosure
>>> pursuant to Massachusetts law. It is intended
>>> solely for the addressee. If you received this in error, please
>>> contact the sender and delete the material from any computer.
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>> -----------------------------------------
>> The substance of this message, including any attachments, may be
>> confidential, legally privileged and/or exempt from disclosure
>> pursuant to Massachusetts law. It is intended
>> solely for the addressee. If you received this in error, please
>> contact the sender and delete the material from any computer.
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From pramsey at cleverelephant.ca  Wed Jan 14 12:43:03 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Jan 14 12:43:06 2009
Subject: [geos-devel] RE: [postgis-devel] Can't compile
	Geos3.1underOpenSUSE anymore, compiles okay under Vc2005 with changes
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D20549576E@ZDND.DND.boston.cob>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob>
	<496CA8F6.8050900@siriusit.co.uk>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob>
	<30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20547011B@ZDND.DND.boston.cob>
	<30fe546d0901130805v51d42922nc09494b4fd58fa68@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20547084E@ZDND.DND.boston.cob>
	<30fe546d0901140855n5d001cc7ic447b86a3fc186d0@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D20549576E@ZDND.DND.boston.cob>
Message-ID: <30fe546d0901140943i41f8a236hf2b67deae7a34ab1@mail.gmail.com>

Does this help?

On Wed, Jan 14, 2009 at 9:27 AM, Obe, Regina <robe.dnd@cityofboston.gov> wrote:
> Evidentally we had the same issue with CLocalizer and the use of strdup
> was removed.  Not sure if that is the right solution though.
>
> http://trac.osgeo.org/geos/changeset/2180
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Wednesday, January 14, 2009 11:56 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile
> Geos3.1underOpenSUSE anymore, compiles okay under Vc2005 with changes
>
> Someone smarter than me is going to have to solve this. strdup is
> defined in <cstring> if I'm not mistaken, and that's included at the
> top of the file.  So why is it not being picked up? You are even using
> the gnu toolchain, so all the more reason you should have consistent
> behavior to the linux/osx builds.
>
> P.
>
> On Wed, Jan 14, 2009 at 5:05 AM, Obe, Regina <robe.dnd@cityofboston.gov>
> wrote:
>> Paul,
>>
>> Okay I blew out my geos trunk and it didn't help.  Though your change
> to
>> config  forced me to finally bite the bullet and upgrade my mingw
>> autoconf and automake since I could no longer even sh autogen.sh after
>> that and even copying my configure from my OpenSUSE install did not
>> work.  I was meaning to upgrade since PostGIS requires a newer
> autoconf
>> too.
>>
>> I guess your other changes got rid of some of the warnings and I am
> left
>> with
>>
>> geos_ts_c.cpp: In function `char*
>> GEOSisValidReason_r(GEOSContextHandle_HS*, const
>> geos::geom::Geometry*)':
>> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
>> geos_ts_c.cpp:587: warning: unused variable 'strdup'
>> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>> make: *** [all-recursive] Error 1
>>
>>
>> I wonder if upgrading my GCC would help.   I think I'm running GCC
>> 3.4.5.
>>
>> On another note -- I think for VC 2005 the geos_ts_c.cpp has to be
>> added.  I just compiled under VC 2005 and that seemd to compile okay
>> with 300 someodd warnings after adding that dependency.
>>
>> I'll send you a patch for that once I've cleaned it up.  I wanted to
> get
>> rid of that reference to c:/mys... that has been stuck in there for
> eons
>> too.
>>
>> Thanks,
>> Regina
>>
>>
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>> Sent: Tuesday, January 13, 2009 11:06 AM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos
>> 3.1underOpenSUSE anymore
>>
>> Doesn't make much sense to me. <cstring> is #include'd, so...?
>>
>> On Tue, Jan 13, 2009 at 7:54 AM, Obe, Regina
> <robe.dnd@cityofboston.gov>
>> wrote:
>>> Okay that fixed my OpenSUSE compile problem.
>>>
>>> On MingW, getting a different error now -- but haven't done a
> complete
>>> clean blowout so it could be remnants of something else.  But just in
>>> case.  Below is what I get under MingW
>>>
>>>
>>> -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_ts_c.o
>>> geos_ts_c.cpp: In function `char*
>>> GEOSisValidReason_r(GEOSContextHandle_HS*, const
>>> geos::geom::Geometry*)':
>>> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
>>> geos_ts_c.cpp:587: warning: unused variable 'strdup'
>>> geos_ts_c.cpp: In function `char
>>> GEOSWKBWriter_getIncludeSRID_r(GEOSContextHandle_HS*, const
>>> GEOSWKBWriter*)':
>>> geos_ts_c.cpp:3682: warning: converting to non-pointer type `char'
>> from
>>> NULL
>>> geos_ts_c.cpp:3688: warning: converting to non-pointer type `char'
>> from
>>> NULL
>>> geos_ts_c.cpp:3699: warning: converting to non-pointer type `char'
>> from
>>> NULL
>>> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
>>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>>> make: *** [all-recursive] Error 1
>>>
>>>
>>> I'll be testing under Visual Studio in the next day or so.
>>>
>>>
>>>
>>> -----Original Message-----
>>> From: geos-devel-bounces@lists.osgeo.org
>>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>>> Sent: Tuesday, January 13, 2009 10:49 AM
>>> To: GEOS Development List
>>> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
>>> underOpenSUSE anymore
>>>
>>> Yep, same here on a fresh checkout. And there was indeed a file
>>> missing from my check-in. Fixed at r2233.
>>>
>>> P.
>>>
>>> On Tue, Jan 13, 2009 at 7:02 AM, Obe, Regina
>> <robe.dnd@cityofboston.gov>
>>> wrote:
>>>> Mark,
>>>>
>>>> Good thought.  I can't remember if I did an autogen or not, but just
>>> did
>>>> and my OpenSUSE is still compiling.
>>>>
>>>> My MingW install which I did do an sh autogen.sh , configure, make
>>>> clean, make is failing with the same error
>>>>
>>>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>>>> -I../source/headers/geos -I../source/headers
>>>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\"
> -g
>>>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>>>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>>>> geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
>>>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>>>> -I../source/headers/geos -I../source/headers
>>>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\"
> -g
>>>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>>>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>>>> geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
>>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>>>> make: *** [all-recursive] Error 1
>>>>
>>>>
>>>> Have you tried the latest one?
>>>>
>>>> My next step is to blow out my geos source and start from scratch.
>>>>
>>>> Thanks,
>>>> Regina
>>>>
>>>> -----Original Message-----
>>>> From: postgis-devel-bounces@postgis.refractions.net
>>>> [mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of
>>> Mark
>>>> Cave-Ayland
>>>> Sent: Tuesday, January 13, 2009 9:45 AM
>>>> To: PostGIS Development Discussion
>>>> Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
>>>> anymore
>>>>
>>>> Obe, Regina wrote:
>>>>
>>>>> I assume this is because of the recent changes.  I did an svn up
> and
>>> a
>>>>> reconfigure and then compile under OpenSUSE.
>>>>>
>>>>> I get this error
>>>>>
>>>>>  g++ -DHAVE_CONFIG_H -I. -I../source/headers
>> -I../source/headers/geos
>>>>> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
>>>>> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi
> -pedantic
>>>>> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
>>>>> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o
> libgeos_c_la-geos_c.o
>>>>>> /dev/null 2>&1
>>>>> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
>>>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>>>> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
>>>>> make: *** [all-recursive] Error 1
>>>>>
>>>>> Am I missing something?
>>>>>
>>>>> Thanks,
>>>>> Regina
>>>>
>>>> Hmmm the "ts" part implies this is something to do with the
>>> thread-safe
>>>> API patch. Perhaps you need to re-run autogen.sh so that it picks up
>>> the
>>>>
>>>> new files? Failing that does a brand new checkout work?
>>>>
>>>>
>>>> HTH,
>>>>
>>>> Mark.
>>>>
>>>> --
>>>> Mark Cave-Ayland
>>>> Sirius Corporation - The Open Source Experts
>>>> http://www.siriusit.co.uk
>>>> T: +44 870 608 0063
>>>> _______________________________________________
>>>> postgis-devel mailing list
>>>> postgis-devel@postgis.refractions.net
>>>> http://postgis.refractions.net/mailman/listinfo/postgis-devel
>>>> -----------------------------------------
>>>> The substance of this message, including any attachments, may be
>>>> confidential, legally privileged and/or exempt from disclosure
>>>> pursuant to Massachusetts law. It is intended
>>>> solely for the addressee. If you received this in error, please
>>>> contact the sender and delete the material from any computer.
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>> -----------------------------------------
>>> The substance of this message, including any attachments, may be
>>> confidential, legally privileged and/or exempt from disclosure
>>> pursuant to Massachusetts law. It is intended
>>> solely for the addressee. If you received this in error, please
>>> contact the sender and delete the material from any computer.
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>> -----------------------------------------
>> The substance of this message, including any attachments, may be
>> confidential, legally privileged and/or exempt from disclosure
>> pursuant to Massachusetts law. It is intended
>> solely for the addressee. If you received this in error, please
>> contact the sender and delete the material from any computer.
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: strdup.patch
Type: application/octet-stream
Size: 723 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090114/bbebdc32/strdup-0001.obj
From chodgson at refractions.net  Wed Jan 14 13:11:29 2009
From: chodgson at refractions.net (Chris Hodgson)
Date: Wed Jan 14 13:11:34 2009
Subject: 3D operations (Re: [geos-devel] C API
	coordinate	sequencedimensions)
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D205470856@ZDND.DND.boston.cob>
References: <5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com><496B8447.3080203@refractions.net><4F48AE18-644A-468B-9CB6-10296613C34B@frii.com><75D91A7C-3FC0-4996-82E4-5BE84144B557@cleverelephant.ca><CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com><53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob><86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com><53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob><BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com><1231919661.6447.4.camel@mca-desktop>	<20090114090423.GB87941@keybit.net>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205470856@ZDND.DND.boston.cob>
Message-ID: <496E2AD1.6090701@refractions.net>

AFAIK, the "3-d" functions were never truly 3-d, more what is sometimes 
called 2.5-d. That is, all of the operations return the same result, in 
2-d, that they would return if the inputs had been 2-d - but then some 
heuristics are used to come up with a reasonable value for the 3rd 
coordinate.

So in your example, Regina, the two polygons DO intersect in 2-d. In 
2.5-d, there is no way for something to be "above" something else. Think 
of the z value as the height of the line - not the elevation, but think 
of the line as having a height, like a ribbon on it's side.

These 2.5-d operations are very useful, particularly the cases which 
have well-defined results. They are also not compatible with true 3-d 
operations, but since GEOS doesn't support volumes, (polyhedrons and 
spheres and the like) true 3-d operations aren't something I think we 
need to worry about yet.

Chris

Obe, Regina wrote:
> Well from my observation it looks like most of those Ops functions (not
> sure about Union and Intersection) -- first do a 2D operation and then
> do some sort of apply the Z back on.  So the Z is never considered in
> the basic operation -- thus the cause of a lot of the goofiness.
>
>  Take this example.  It seems clear to me that these polygon's are not
> within each other so it should be a multipolygon not a Polygon with a
> hole. One lies above the other.
>
> SELECT ST_AsEWKT(ST_BuildArea('MULTILINESTRING((0 0 1,20 0 1,20 20 1,0
> 20 1,0 0 1),(10 10 2,10 11 2,11 11 2,11 10 2,10 10 2))'))
>
> "POLYGON((0 0 1,0 20 1,20 20 1,20 0 1,0 0 1),(10 10 2,11 10 2,11 11 2,10
> 11 2,10 10 2))"
>
>
>
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of strk
> Sent: Wednesday, January 14, 2009 4:04 AM
> To: GEOS Development List
> Subject: Re: 3D operations (Re: [geos-devel] C API coordinate
> sequencedimensions)
>
> On Wed, Jan 14, 2009 at 07:54:21AM +0000, Mark Cave-Ayland wrote:
>
>   
>> Can anyone with more experience with BuildArea (like Martin!) comment
>>     
> on
>   
>> whether this is a GEOS bug or simply a problem with behaviour > 2
>> dimensions being undefined?
>>     
>
> JTS didn't support 3d when I added it to GEOS, so can't really
> serve as a source of information. The 3d task was added driven by
> customer needs, so the only working and tested functions was the one
> the customer needed. If I recall correctly it was mainly Intersection
> and probably Union.
>
> Since other functions are based on the former, there may be side-effects
> you wouldn't care about if you aren't using 3d features.
>
> Paul draw the specs about expected behaviour. Dunno if there's a doc
> around and I likely lost mine (Oops).
>
> --strk; 
>
>  Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
>  http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>   

From david.bitner at gmail.com  Wed Jan 14 13:27:54 2009
From: david.bitner at gmail.com (David William Bitner)
Date: Wed Jan 14 13:27:56 2009
Subject: 3D operations (Re: [geos-devel] C API coordinate 
	sequencedimensions)
In-Reply-To: <496E2AD1.6090701@refractions.net>
References: <5f9be0a0901120440l657f6ca2o7fb93b6e968c96ce@mail.gmail.com>
	<CD08EE03-22E7-47EC-AF9F-F2B01B84764C@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F1@ZDND.DND.boston.cob>
	<86DA7F0E-324C-4DFF-856E-3875ED1C39CF@frii.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F0F2@ZDND.DND.boston.cob>
	<BAD1CE88-8103-4DD0-9644-117E3079B0FC@frii.com>
	<1231919661.6447.4.camel@mca-desktop>
	<20090114090423.GB87941@keybit.net>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205470856@ZDND.DND.boston.cob>
	<496E2AD1.6090701@refractions.net>
Message-ID: <d2f53e190901141027h723fcc00md0be88311178524@mail.gmail.com>

Just to add $.02 to this discussion, the use case that led to the 2.5D
intersection capabilities was for the analysis of flight tracks around an
airport.  A very common analysis is what is called a "gate analysis" where a
2D line (the gate) is drawn and the 2D intersection between the gate and the
flight tracks that go over that line is calculated.  Carrying the
Z coordinate through allows for very useful statistics to be calculated on
the result.  This allows to answer questions such as what was the minimum,
maximum, and average altitude of all aircraft that went through the gate.
David

On Wed, Jan 14, 2009 at 12:11 PM, Chris Hodgson <chodgson@refractions.net>wrote:

> AFAIK, the "3-d" functions were never truly 3-d, more what is sometimes
> called 2.5-d. That is, all of the operations return the same result, in 2-d,
> that they would return if the inputs had been 2-d - but then some heuristics
> are used to come up with a reasonable value for the 3rd coordinate.
>
> So in your example, Regina, the two polygons DO intersect in 2-d. In 2.5-d,
> there is no way for something to be "above" something else. Think of the z
> value as the height of the line - not the elevation, but think of the line
> as having a height, like a ribbon on it's side.
>
> These 2.5-d operations are very useful, particularly the cases which have
> well-defined results. They are also not compatible with true 3-d operations,
> but since GEOS doesn't support volumes, (polyhedrons and spheres and the
> like) true 3-d operations aren't something I think we need to worry about
> yet.
>
> Chris
>
>
> Obe, Regina wrote:
>
>> Well from my observation it looks like most of those Ops functions (not
>> sure about Union and Intersection) -- first do a 2D operation and then
>> do some sort of apply the Z back on.  So the Z is never considered in
>> the basic operation -- thus the cause of a lot of the goofiness.
>>
>>  Take this example.  It seems clear to me that these polygon's are not
>> within each other so it should be a multipolygon not a Polygon with a
>> hole. One lies above the other.
>>
>> SELECT ST_AsEWKT(ST_BuildArea('MULTILINESTRING((0 0 1,20 0 1,20 20 1,0
>> 20 1,0 0 1),(10 10 2,10 11 2,11 11 2,11 10 2,10 10 2))'))
>>
>> "POLYGON((0 0 1,0 20 1,20 20 1,20 0 1,0 0 1),(10 10 2,11 10 2,11 11 2,10
>> 11 2,10 10 2))"
>>
>>
>>
>>
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of strk
>> Sent: Wednesday, January 14, 2009 4:04 AM
>> To: GEOS Development List
>> Subject: Re: 3D operations (Re: [geos-devel] C API coordinate
>> sequencedimensions)
>>
>> On Wed, Jan 14, 2009 at 07:54:21AM +0000, Mark Cave-Ayland wrote:
>>
>>
>>
>>> Can anyone with more experience with BuildArea (like Martin!) comment
>>>
>>>
>> on
>>
>>
>>> whether this is a GEOS bug or simply a problem with behaviour > 2
>>> dimensions being undefined?
>>>
>>>
>>
>> JTS didn't support 3d when I added it to GEOS, so can't really
>> serve as a source of information. The 3d task was added driven by
>> customer needs, so the only working and tested functions was the one
>> the customer needed. If I recall correctly it was mainly Intersection
>> and probably Union.
>>
>> Since other functions are based on the former, there may be side-effects
>> you wouldn't care about if you aren't using 3d features.
>>
>> Paul draw the specs about expected behaviour. Dunno if there's a doc
>> around and I likely lost mine (Oops).
>>
>> --strk;
>>  Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
>>  http://foo.keybit.net/~strk/services.html  /\  Keep it simple!
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>> -----------------------------------------
>> The substance of this message, including any attachments, may be
>> confidential, legally privileged and/or exempt from disclosure
>> pursuant to Massachusetts law. It is intended
>> solely for the addressee. If you received this in error, please
>> contact the sender and delete the material from any computer.
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>



-- 
************************************
David William Bitner
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090114/df811fb3/attachment.html
From robe.dnd at cityofboston.gov  Wed Jan 14 15:05:43 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Wed Jan 14 15:05:48 2009
Subject: [geos-devel] RE: [postgis-devel] Can't
	compileGeos3.1underOpenSUSE anymore,
	compiles okay under Vc2005 with changes
In-Reply-To: <30fe546d0901140943i41f8a236hf2b67deae7a34ab1@mail.gmail.com>
References: <53F9CF533E1AA14EA1F8C5C08ABC08D20546FFD5@ZDND.DND.boston.cob><496CA8F6.8050900@siriusit.co.uk><53F9CF533E1AA14EA1F8C5C08ABC08D205470051@ZDND.DND.boston.cob><30fe546d0901130748j1fdb2314g75382f4d99b13ac@mail.gmail.com><53F9CF533E1AA14EA1F8C5C08ABC08D20547011B@ZDND.DND.boston.cob><30fe546d0901130805v51d42922nc09494b4fd58fa68@mail.gmail.com><53F9CF533E1AA14EA1F8C5C08ABC08D20547084E@ZDND.DND.boston.cob><30fe546d0901140855n5d001cc7ic447b86a3fc186d0@mail.gmail.com><53F9CF533E1AA14EA1F8C5C08ABC08D20549576E@ZDND.DND.boston.cob>
	<30fe546d0901140943i41f8a236hf2b67deae7a34ab1@mail.gmail.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205495973@ZDND.DND.boston.cob>

That seems to work. 

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Wednesday, January 14, 2009 12:43 PM
To: GEOS Development List
Subject: Re: [geos-devel] RE: [postgis-devel] Can't
compileGeos3.1underOpenSUSE anymore, compiles okay under Vc2005 with
changes

Does this help?

On Wed, Jan 14, 2009 at 9:27 AM, Obe, Regina <robe.dnd@cityofboston.gov>
wrote:
> Evidentally we had the same issue with CLocalizer and the use of
strdup
> was removed.  Not sure if that is the right solution though.
>
> http://trac.osgeo.org/geos/changeset/2180
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Wednesday, January 14, 2009 11:56 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile
> Geos3.1underOpenSUSE anymore, compiles okay under Vc2005 with changes
>
> Someone smarter than me is going to have to solve this. strdup is
> defined in <cstring> if I'm not mistaken, and that's included at the
> top of the file.  So why is it not being picked up? You are even using
> the gnu toolchain, so all the more reason you should have consistent
> behavior to the linux/osx builds.
>
> P.
>
> On Wed, Jan 14, 2009 at 5:05 AM, Obe, Regina
<robe.dnd@cityofboston.gov>
> wrote:
>> Paul,
>>
>> Okay I blew out my geos trunk and it didn't help.  Though your change
> to
>> config  forced me to finally bite the bullet and upgrade my mingw
>> autoconf and automake since I could no longer even sh autogen.sh
after
>> that and even copying my configure from my OpenSUSE install did not
>> work.  I was meaning to upgrade since PostGIS requires a newer
> autoconf
>> too.
>>
>> I guess your other changes got rid of some of the warnings and I am
> left
>> with
>>
>> geos_ts_c.cpp: In function `char*
>> GEOSisValidReason_r(GEOSContextHandle_HS*, const
>> geos::geom::Geometry*)':
>> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
>> geos_ts_c.cpp:587: warning: unused variable 'strdup'
>> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>> make: *** [all-recursive] Error 1
>>
>>
>> I wonder if upgrading my GCC would help.   I think I'm running GCC
>> 3.4.5.
>>
>> On another note -- I think for VC 2005 the geos_ts_c.cpp has to be
>> added.  I just compiled under VC 2005 and that seemd to compile okay
>> with 300 someodd warnings after adding that dependency.
>>
>> I'll send you a patch for that once I've cleaned it up.  I wanted to
> get
>> rid of that reference to c:/mys... that has been stuck in there for
> eons
>> too.
>>
>> Thanks,
>> Regina
>>
>>
>>
>> -----Original Message-----
>> From: geos-devel-bounces@lists.osgeo.org
>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>> Sent: Tuesday, January 13, 2009 11:06 AM
>> To: GEOS Development List
>> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos
>> 3.1underOpenSUSE anymore
>>
>> Doesn't make much sense to me. <cstring> is #include'd, so...?
>>
>> On Tue, Jan 13, 2009 at 7:54 AM, Obe, Regina
> <robe.dnd@cityofboston.gov>
>> wrote:
>>> Okay that fixed my OpenSUSE compile problem.
>>>
>>> On MingW, getting a different error now -- but haven't done a
> complete
>>> clean blowout so it could be remnants of something else.  But just
in
>>> case.  Below is what I get under MingW
>>>
>>>
>>> -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_ts_c.o
>>> geos_ts_c.cpp: In function `char*
>>> GEOSisValidReason_r(GEOSContextHandle_HS*, const
>>> geos::geom::Geometry*)':
>>> geos_ts_c.cpp:587: error: `strdup' was not declared in this scope
>>> geos_ts_c.cpp:587: warning: unused variable 'strdup'
>>> geos_ts_c.cpp: In function `char
>>> GEOSWKBWriter_getIncludeSRID_r(GEOSContextHandle_HS*, const
>>> GEOSWKBWriter*)':
>>> geos_ts_c.cpp:3682: warning: converting to non-pointer type `char'
>> from
>>> NULL
>>> geos_ts_c.cpp:3688: warning: converting to non-pointer type `char'
>> from
>>> NULL
>>> geos_ts_c.cpp:3699: warning: converting to non-pointer type `char'
>> from
>>> NULL
>>> make[1]: *** [libgeos_c_la-geos_ts_c.lo] Error 1
>>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>>> make: *** [all-recursive] Error 1
>>>
>>>
>>> I'll be testing under Visual Studio in the next day or so.
>>>
>>>
>>>
>>> -----Original Message-----
>>> From: geos-devel-bounces@lists.osgeo.org
>>> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
>>> Sent: Tuesday, January 13, 2009 10:49 AM
>>> To: GEOS Development List
>>> Subject: Re: [geos-devel] RE: [postgis-devel] Can't compile Geos 3.1
>>> underOpenSUSE anymore
>>>
>>> Yep, same here on a fresh checkout. And there was indeed a file
>>> missing from my check-in. Fixed at r2233.
>>>
>>> P.
>>>
>>> On Tue, Jan 13, 2009 at 7:02 AM, Obe, Regina
>> <robe.dnd@cityofboston.gov>
>>> wrote:
>>>> Mark,
>>>>
>>>> Good thought.  I can't remember if I did an autogen or not, but
just
>>> did
>>>> and my OpenSUSE is still compiling.
>>>>
>>>> My MingW install which I did do an sh autogen.sh , configure, make
>>>> clean, make is failing with the same error
>>>>
>>>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>>>> -I../source/headers/geos -I../source/headers
>>>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\"
> -g
>>>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>>>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>>>> geos_c.cpp  -DDLL_EXPORT -DPIC -o .libs/libgeos_c_la-geos_c.o
>>>>  g++ -DHAVE_CONFIG_H -I. -I. -I../source/headers
>>>> -I../source/headers/geos -I../source/headers
>>>> -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\" -DGEOS_JTS_PORT=\"1.7.1\"
> -g
>>>> -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT
>>>> libgeos_c_la-geos_c.lo -MD -MP -MF .deps/libgeos_c_la-geos_c.Tpo -c
>>>> geos_c.cpp -o libgeos_c_la-geos_c.o >/dev/null 2>&1
>>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>>> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/capi'
>>>> make: *** [all-recursive] Error 1
>>>>
>>>>
>>>> Have you tried the latest one?
>>>>
>>>> My next step is to blow out my geos source and start from scratch.
>>>>
>>>> Thanks,
>>>> Regina
>>>>
>>>> -----Original Message-----
>>>> From: postgis-devel-bounces@postgis.refractions.net
>>>> [mailto:postgis-devel-bounces@postgis.refractions.net] On Behalf Of
>>> Mark
>>>> Cave-Ayland
>>>> Sent: Tuesday, January 13, 2009 9:45 AM
>>>> To: PostGIS Development Discussion
>>>> Subject: Re: [postgis-devel] Can't compile Geos 3.1 under OpenSUSE
>>>> anymore
>>>>
>>>> Obe, Regina wrote:
>>>>
>>>>> I assume this is because of the recent changes.  I did an svn up
> and
>>> a
>>>>> reconfigure and then compile under OpenSUSE.
>>>>>
>>>>> I get this error
>>>>>
>>>>>  g++ -DHAVE_CONFIG_H -I. -I../source/headers
>> -I../source/headers/geos
>>>>> -I../source/headers -DGEOS_CAPI_VERSION=\"3.1.0-CAPI-1.5.0\"
>>>>> -DGEOS_JTS_PORT=\"1.7.1\" -g -O2 -DGEOS_INLINE -Wall -ansi
> -pedantic
>>>>> -Wno-long-long -MT libgeos_c_la-geos_c.lo -MD -MP -MF
>>>>> .deps/libgeos_c_la-geos_c.Tpo -c geos_c.cpp -o
> libgeos_c_la-geos_c.o
>>>>>> /dev/null 2>&1
>>>>> mv -f .deps/libgeos_c_la-geos_c.Tpo .deps/libgeos_c_la-geos_c.Plo
>>>>> make[1]: *** No rule to make target `geos_ts_c.cpp', needed by
>>>>> `libgeos_c_la-geos_ts_c.lo'.  Stop.
>>>>> make[1]: Leaving directory `/projects/geos-3.1.0SVN/capi'
>>>>> make: *** [all-recursive] Error 1
>>>>>
>>>>> Am I missing something?
>>>>>
>>>>> Thanks,
>>>>> Regina
>>>>
>>>> Hmmm the "ts" part implies this is something to do with the
>>> thread-safe
>>>> API patch. Perhaps you need to re-run autogen.sh so that it picks
up
>>> the
>>>>
>>>> new files? Failing that does a brand new checkout work?
>>>>
>>>>
>>>> HTH,
>>>>
>>>> Mark.
>>>>
>>>> --
>>>> Mark Cave-Ayland
>>>> Sirius Corporation - The Open Source Experts
>>>> http://www.siriusit.co.uk
>>>> T: +44 870 608 0063
>>>> _______________________________________________
>>>> postgis-devel mailing list
>>>> postgis-devel@postgis.refractions.net
>>>> http://postgis.refractions.net/mailman/listinfo/postgis-devel
>>>> -----------------------------------------
>>>> The substance of this message, including any attachments, may be
>>>> confidential, legally privileged and/or exempt from disclosure
>>>> pursuant to Massachusetts law. It is intended
>>>> solely for the addressee. If you received this in error, please
>>>> contact the sender and delete the material from any computer.
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>> -----------------------------------------
>>> The substance of this message, including any attachments, may be
>>> confidential, legally privileged and/or exempt from disclosure
>>> pursuant to Massachusetts law. It is intended
>>> solely for the addressee. If you received this in error, please
>>> contact the sender and delete the material from any computer.
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>> -----------------------------------------
>> The substance of this message, including any attachments, may be
>> confidential, legally privileged and/or exempt from disclosure
>> pursuant to Massachusetts law. It is intended
>> solely for the addressee. If you received this in error, please
>> contact the sender and delete the material from any computer.
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From geos-trac at osgeo.org  Wed Jan 14 17:05:04 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed Jan 14 17:05:05 2009
Subject: [geos-devel] [GEOS] #225: Port Cascaded Union from JTS
Message-ID: <047.37254571ba087f11481922a46b415dcb@osgeo.org>

#225: Port Cascaded Union from JTS
-----------------------------+----------------------------------------------
 Reporter:  pramsey          |       Owner:  geos-devel@lists.osgeo.org
     Type:  defect           |      Status:  new                       
 Priority:  major            |   Milestone:  3.1.0                     
Component:  Core             |     Version:  svn-trunk                 
 Severity:  Feature Request  |    Keywords:                            
-----------------------------+----------------------------------------------
 For performance reasons, a port of current JTS features into GEOS would
 help many operaitons...

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/225>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed Jan 14 17:08:56 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed Jan 14 17:08:57 2009
Subject: [geos-devel] Re: [GEOS] #225: Port Cascaded Union from JTS
In-Reply-To: <047.37254571ba087f11481922a46b415dcb@osgeo.org>
References: <047.37254571ba087f11481922a46b415dcb@osgeo.org>
Message-ID: <056.261b7e08cd98d6f5069a236aec5db75a@osgeo.org>

#225: Port Cascaded Union from JTS
-----------------------------+----------------------------------------------
 Reporter:  pramsey          |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect           |       Status:  new                       
 Priority:  major            |    Milestone:  3.1.0                     
Component:  Core             |      Version:  svn-trunk                 
 Severity:  Feature Request  |   Resolution:                            
 Keywords:                   |  
-----------------------------+----------------------------------------------
Changes (by pramsey):

 * cc: hartmut.kaiser@gmail.com (added)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/225#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed Jan 14 17:09:41 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed Jan 14 17:09:41 2009
Subject: [geos-devel] Re: [GEOS] #225: Port Cascaded Union from JTS
In-Reply-To: <047.37254571ba087f11481922a46b415dcb@osgeo.org>
References: <047.37254571ba087f11481922a46b415dcb@osgeo.org>
Message-ID: <056.5c71158b35a89abd4e2ae1994bc99d14@osgeo.org>

#225: Port Cascaded Union from JTS
-----------------------------+----------------------------------------------
 Reporter:  pramsey          |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect           |       Status:  new                       
 Priority:  major            |    Milestone:  3.1.0                     
Component:  Core             |      Version:  svn-trunk                 
 Severity:  Feature Request  |   Resolution:                            
 Keywords:                   |  
-----------------------------+----------------------------------------------
Comment (by pramsey):

 Martin notes test case is available in JTS now: In CVS, in the package
 test.jts.junit.operation.union

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/225#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From pramsey at opengeo.org  Sun Jan 18 18:12:36 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Sun Jan 18 18:12:43 2009
Subject: [geos-devel] 3.1.0 Release
Message-ID: <4BEEC59B-0E2B-4DE2-A8C8-9843425D3BFF@opengeo.org>

Folks, thanks for your work on the 3.1.0 milestone, I see the number  
of tickets is already substantially reduced.

http://trac.osgeo.org/geos/report/3

I would like to see #188, #202, and #226 closed, and then move to an  
"RC" release.

Thoughts? PSC, weight in.

P

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS. Because you're just that good looking.

From pramsey at cleverelephant.ca  Mon Jan 19 18:07:19 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon Jan 19 18:07:22 2009
Subject: [geos-devel] 2009 Code Sprint Agenda
Message-ID: <30fe546d0901191507x593fb836j73e47478bbcf5c15@mail.gmail.com>

I've started with some higher level ideas for an agenda. Individual
teams might want to start breaking out their plans into work-by-day as
we get closer.

http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009_Agenda

P.

http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009
From pramsey at opengeo.org  Tue Jan 20 15:58:52 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Tue Jan 20 15:58:56 2009
Subject: [geos-devel] checkNotGeometryCollection in Geometry::Union
Message-ID: <951DA41C-2C37-4554-9496-22E5D24715D1@opengeo.org>

Why do we have the check for checkNotGeometryCollection() in  
Geometry::Union? What is it doing for us?

P.

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS. Because you're just that good looking.

From mbdavis at refractions.net  Tue Jan 20 16:00:57 2009
From: mbdavis at refractions.net (Martin Davis)
Date: Tue Jan 20 16:01:42 2009
Subject: [geos-devel] checkNotGeometryCollection in Geometry::Union
In-Reply-To: <951DA41C-2C37-4554-9496-22E5D24715D1@opengeo.org>
References: <951DA41C-2C37-4554-9496-22E5D24715D1@opengeo.org>
Message-ID: <49763B89.2040103@refractions.net>

This might be a hold-over from an older version of JTS.  Or, it might 
just be following the pattern of the original binary overlay operations 
- which doesn't apply to UnaryUnion.

Paul Ramsey wrote:
> Why do we have the check for checkNotGeometryCollection() in 
> Geometry::Union? What is it doing for us?
>
> P.
>
> -- 
> Paul Ramsey
> OpenGeo - http://opengeo.org
> PostGIS. Because you're just that good looking.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From pramsey at opengeo.org  Fri Jan 23 14:11:05 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Fri Jan 23 14:11:08 2009
Subject: [geos-devel] checkNotGeometryCollection in Geometry::Union
In-Reply-To: <49763B89.2040103@refractions.net>
References: <951DA41C-2C37-4554-9496-22E5D24715D1@opengeo.org>
	<49763B89.2040103@refractions.net>
Message-ID: <30fe546d0901231111q14ba9b2al5bb57c20e5d968a5@mail.gmail.com>

FYI, after grepping the source to see what was actually *using* those
methods (very few things), I have opted to remove the checks. The
methods were themselves calling things like this:
OverlayOp::overlayOp(this, other, OverlayOp::opUNION).

P.

On Tue, Jan 20, 2009 at 1:00 PM, Martin Davis <mbdavis@refractions.net> wrote:
> This might be a hold-over from an older version of JTS.  Or, it might just
> be following the pattern of the original binary overlay operations - which
> doesn't apply to UnaryUnion.
>
> Paul Ramsey wrote:
>>
>> Why do we have the check for checkNotGeometryCollection() in
>> Geometry::Union? What is it doing for us?
>>
>> P.
>>
>> --
>> Paul Ramsey
>> OpenGeo - http://opengeo.org
>> PostGIS. Because you're just that good looking.
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
> --
> Martin Davis
> Senior Technical Architect
> Refractions Research, Inc.
> (250) 383-3022
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at opengeo.org  Sat Jan 24 14:26:41 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Sat Jan 24 14:26:44 2009
Subject: [geos-devel] 3.1.0 Release
In-Reply-To: <4BEEC59B-0E2B-4DE2-A8C8-9843425D3BFF@opengeo.org>
References: <4BEEC59B-0E2B-4DE2-A8C8-9843425D3BFF@opengeo.org>
Message-ID: <30fe546d0901241126k1281f854m945d91373ccd27ee@mail.gmail.com>

Stephen (#188),
Mateusz (#202),
Frank (#226),

do you think it's reasonable to get those closed in time for a 3.1.0
RC in early February?

Paul

On Sun, Jan 18, 2009 at 3:12 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
> Folks, thanks for your work on the 3.1.0 milestone, I see the number of
> tickets is already substantially reduced.
>
> http://trac.osgeo.org/geos/report/3
>
> I would like to see #188, #202, and #226 closed, and then move to an "RC"
> release.
>
> Thoughts? PSC, weight in.
>
> P
>
> --
> Paul Ramsey
> OpenGeo - http://opengeo.org
> PostGIS. Because you're just that good looking.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at opengeo.org  Sat Jan 24 14:30:29 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Sat Jan 24 14:30:31 2009
Subject: [geos-devel] Chuck Thibert as Committer
In-Reply-To: <1231872892.3818.7.camel@localhost.localdomain>
References: <30fe546d0901130908r43100b24y528df7e50b6d23ad@mail.gmail.com>
	<F1A61932-3237-49C4-89B8-93E5B7106A66@gmail.com>
	<1231872892.3818.7.camel@localhost.localdomain>
Message-ID: <30fe546d0901241130h3142ad7q874230275bb821db@mail.gmail.com>

PSC, would you please complete voting on this?

On Tue, Jan 13, 2009 at 10:54 AM, Chuck Thibert
<charles.thibert@ingres.com> wrote:
> I have read, understand and agree to RFC 2
> http://trac.osgeo.org/geos/wiki/RFC2
>
> Thanks,
> Chuck
>
> On Tue, 2009-01-13 at 11:10 -0600, Howard Butler wrote:
>> On Jan 13, 2009, at 11:08 AM, Paul Ramsey wrote:
>>
>> > PSC,
>> >
>> > Chuck has now created and had accepted a large patch to the code base,
>> > I'd like to make him a committer. I caused more trouble applying his
>> > patch than any other process would :)
>>
>> +1 subject to acceptance of RFC 2 http://trac.osgeo.org/geos/wiki/RFC2
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Sat Jan 24 18:31:54 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jan 24 18:32:41 2009
Subject: [geos-devel] 3.1.0 Release
In-Reply-To: <30fe546d0901241126k1281f854m945d91373ccd27ee@mail.gmail.com>
References: <4BEEC59B-0E2B-4DE2-A8C8-9843425D3BFF@opengeo.org>
	<30fe546d0901241126k1281f854m945d91373ccd27ee@mail.gmail.com>
Message-ID: <62281.94.193.98.140.1232839914.squirrel@loskot.net>

Paul Ramsey wrote:
> Stephen (#188),
> Mateusz (#202),
> Frank (#226),
>
> do you think it's reasonable to get those closed in time for a 3.1.0
> RC in early February?

Paul,

The UB in hashDouble() does not seem to leak very often as it might be
platform/implementation specific. So, I would vote for 1) leaving as or 2)
applying the memcpy-based fix suggested in the report.

Unfortunately, today I've dropped the only laptop I have here in London
and broken the graphics completely, so I can't see anything. Means, I've
became compiler-less now.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Jan 24 18:26:23 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jan 24 19:05:01 2009
Subject: [geos-devel] Chuck Thibert as Committer
In-Reply-To: <30fe546d0901241130h3142ad7q874230275bb821db@mail.gmail.com>
References: <30fe546d0901130908r43100b24y528df7e50b6d23ad@mail.gmail.com>
	<F1A61932-3237-49C4-89B8-93E5B7106A66@gmail.com>
	<1231872892.3818.7.camel@localhost.localdomain>
	<30fe546d0901241130h3142ad7q874230275bb821db@mail.gmail.com>
Message-ID: <61589.94.193.98.140.1232839583.squirrel@loskot.net>

+1


Paul Ramsey wrote:
> PSC, would you please complete voting on this?
>
> On Tue, Jan 13, 2009 at 10:54 AM, Chuck Thibert
> <charles.thibert@ingres.com> wrote:
>> I have read, understand and agree to RFC 2
>> http://trac.osgeo.org/geos/wiki/RFC2
>>
>> Thanks,
>> Chuck
>>
>> On Tue, 2009-01-13 at 11:10 -0600, Howard Butler wrote:
>>> On Jan 13, 2009, at 11:08 AM, Paul Ramsey wrote:
>>>
>>> > PSC,
>>> >
>>> > Chuck has now created and had accepted a large patch to the code
>>> base,
>>> > I'd like to make him a committer. I caused more trouble applying his
>>> > patch than any other process would :)
>>>
>>> +1 subject to acceptance of RFC 2 http://trac.osgeo.org/geos/wiki/RFC2
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>


-- 
Mateusz Loskot
http://mateusz.loskot.net

From pramsey at opengeo.org  Mon Jan 26 13:15:12 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Mon Jan 26 13:15:14 2009
Subject: [geos-devel] Chuck Thibert as Committer
In-Reply-To: <61589.94.193.98.140.1232839583.squirrel@loskot.net>
References: <30fe546d0901130908r43100b24y528df7e50b6d23ad@mail.gmail.com>
	<F1A61932-3237-49C4-89B8-93E5B7106A66@gmail.com>
	<1231872892.3818.7.camel@localhost.localdomain>
	<30fe546d0901241130h3142ad7q874230275bb821db@mail.gmail.com>
	<61589.94.193.98.140.1232839583.squirrel@loskot.net>
Message-ID: <30fe546d0901261015l39f54d17qa7257fffef93c08b@mail.gmail.com>

Hearing no howls of outrage, I pronounce the motion carried. Go forth
and do No Harm.

P

On Sat, Jan 24, 2009 at 3:26 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
> +1
>
>
> Paul Ramsey wrote:
>> PSC, would you please complete voting on this?
>>
>> On Tue, Jan 13, 2009 at 10:54 AM, Chuck Thibert
>> <charles.thibert@ingres.com> wrote:
>>> I have read, understand and agree to RFC 2
>>> http://trac.osgeo.org/geos/wiki/RFC2
>>>
>>> Thanks,
>>> Chuck
>>>
>>> On Tue, 2009-01-13 at 11:10 -0600, Howard Butler wrote:
>>>> On Jan 13, 2009, at 11:08 AM, Paul Ramsey wrote:
>>>>
>>>> > PSC,
>>>> >
>>>> > Chuck has now created and had accepted a large patch to the code
>>>> base,
>>>> > I'd like to make him a committer. I caused more trouble applying his
>>>> > patch than any other process would :)
>>>>
>>>> +1 subject to acceptance of RFC 2 http://trac.osgeo.org/geos/wiki/RFC2
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
>
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From swongu at gmail.com  Mon Jan 26 13:30:56 2009
From: swongu at gmail.com (Stephen Wong)
Date: Mon Jan 26 13:30:58 2009
Subject: [geos-devel] 3.1.0 Release
In-Reply-To: <62281.94.193.98.140.1232839914.squirrel@loskot.net>
References: <4BEEC59B-0E2B-4DE2-A8C8-9843425D3BFF@opengeo.org>
	<30fe546d0901241126k1281f854m945d91373ccd27ee@mail.gmail.com>
	<62281.94.193.98.140.1232839914.squirrel@loskot.net>
Message-ID: <633230220901261030n62f1f6ebsed9ebcd7770a2e93@mail.gmail.com>

Hi Paul,
I filed the issue (#188) but I have not the resources (time) at this moment
to resolve it.  So, you might want to push it beyond 3.1.0.

I'm hoping that when the new buffer algorithm is ported from JTS, that the
issue might go away by itself...

Stephen


On Sat, Jan 24, 2009 at 3:31 PM, Mateusz Loskot <mateusz@loskot.net> wrote:

> Paul Ramsey wrote:
> > Stephen (#188),
> > Mateusz (#202),
> > Frank (#226),
> >
> > do you think it's reasonable to get those closed in time for a 3.1.0
> > RC in early February?
>
> Paul,
>
> The UB in hashDouble() does not seem to leak very often as it might be
> platform/implementation specific. So, I would vote for 1) leaving as or 2)
> applying the memcpy-based fix suggested in the report.
>
> Unfortunately, today I've dropped the only laptop I have here in London
> and broken the graphics completely, so I can't see anything. Means, I've
> became compiler-less now.
>
> Best regards,
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090126/6d7d6489/attachment.html
From pramsey at opengeo.org  Mon Jan 26 14:21:43 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Mon Jan 26 14:21:47 2009
Subject: [geos-devel] 3.1.0RC1 : Vote
Message-ID: <30fe546d0901261121x248def60u59af9221ed67dcfe@mail.gmail.com>

OK, I have punted a few more issues to 3.2, and there are only three
tickets left against 3.1.0, hopefully all easy and fast!

http://trac.osgeo.org/geos/report/3

I would like to release 3.1.0RC1 this week *anyways*, so I am calling
for a vote on release.

P.
From warmerdam at pobox.com  Mon Jan 26 15:52:43 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 26 15:53:04 2009
Subject: [geos-devel] 3.1.0RC1 : Vote
In-Reply-To: <30fe546d0901261121x248def60u59af9221ed67dcfe@mail.gmail.com>
References: <30fe546d0901261121x248def60u59af9221ed67dcfe@mail.gmail.com>
Message-ID: <497E229B.7050806@pobox.com>

Paul Ramsey wrote:
> OK, I have punted a few more issues to 3.2, and there are only three
> tickets left against 3.1.0, hopefully all easy and fast!
> 
> http://trac.osgeo.org/geos/report/3

Paul,

I have resolved and close the ticket on the win32 makefile.vc.

> I would like to release 3.1.0RC1 this week *anyways*, so I am calling
> for a vote on release.

So what is the motion?

I'm in favor of a release.

The approach I've taken in GDAL for "lightweight releases" is to package
and bring forward an RC, and then ask the PSC to vote on promoting it to
final after they have tested.  It keeps the voting overhead down to one
round (well one round per release candidate as the case may be!) and
implicitly ties the vote to at least rudimentary testing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at opengeo.org  Mon Jan 26 15:57:46 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Mon Jan 26 15:57:49 2009
Subject: [geos-devel] 3.1.0RC1 : Vote
In-Reply-To: <497E229B.7050806@pobox.com>
References: <30fe546d0901261121x248def60u59af9221ed67dcfe@mail.gmail.com>
	<497E229B.7050806@pobox.com>
Message-ID: <30fe546d0901261257n5cc7847cvb8cc2bd748f08135@mail.gmail.com>

On Mon, Jan 26, 2009 at 12:52 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Paul Ramsey wrote:
>> I would like to release 3.1.0RC1 this week *anyways*, so I am calling
>> for a vote on release.
>
> So what is the motion?

To release a 3.1.0RC1 this week. As a lightweight testing version, the
SVN snap, which is built from 'make dist' just as the release will be,
should suffice <http://download.osgeo.org/geos/geos-svn.tar.bz2>

P.

> I'm in favor of a release.
>
> The approach I've taken in GDAL for "lightweight releases" is to package
> and bring forward an RC, and then ask the PSC to vote on promoting it to
> final after they have tested.  It keeps the voting overhead down to one
> round (well one round per release candidate as the case may be!) and
> implicitly ties the vote to at least rudimentary testing.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Mon Jan 26 16:55:26 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Jan 26 16:55:44 2009
Subject: [geos-devel] 3.1.0RC1 : Vote
In-Reply-To: <30fe546d0901261121x248def60u59af9221ed67dcfe@mail.gmail.com>
References: <30fe546d0901261121x248def60u59af9221ed67dcfe@mail.gmail.com>
Message-ID: <54482.94.193.98.140.1233006926.squirrel@loskot.net>

Paul Ramsey wrote:
> OK, I have punted a few more issues to 3.2, and there are only three
> tickets left against 3.1.0, hopefully all easy and fast!
>
> http://trac.osgeo.org/geos/report/3
>
> I would like to release 3.1.0RC1 this week *anyways*, so I am calling
> for a vote on release.

I'm in favour of Frank's idea.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From pramsey at opengeo.org  Tue Jan 27 13:35:01 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Tue Jan 27 13:35:04 2009
Subject: [geos-devel] 3.1.0rc1
Message-ID: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>

This is a pre-warning to PSC members to download and test the first
3.1 rc tarball:

http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2

If I don't hear any howls of dismay over the next 24 hours, I will
make a wider announcement for testing.

Paul
From mateusz at loskot.net  Tue Jan 27 19:56:47 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan 27 19:56:52 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
Message-ID: <497FAD4F.1070902@loskot.net>

Paul Ramsey pisze:
> This is a pre-warning to PSC members to download and test the first
> 3.1 rc tarball:
> 
> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
> 
> If I don't hear any howls of dismay over the next 24 hours, I will
> make a wider announcement for testing.

Hi Paul,

I've downloaded, unpacked and built this RC using Visual C++ 2005
with success. I got 0 .exe files and 2 .dll files - as expected.

I've noticed that the README file is not very helpful for users building 
it on Windows. Perhaps the notes from Wiki could be copied there?
Somet time ago I added boostrap.bat script and it is mentioned in 
instructions on the Wiki. I see that version.h is provided in the 
package and platform.h is generated automagically.
Does it mean bootstrap.bat is useless now? If so, I can remove its notes 
from the Wiki.

Greetings,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From pramsey at opengeo.org  Tue Jan 27 20:07:17 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Tue Jan 27 20:07:19 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <497FAD4F.1070902@loskot.net>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<497FAD4F.1070902@loskot.net>
Message-ID: <30fe546d0901271707n157a981dj33b4a3f33c8ea4a1@mail.gmail.com>

On Tue, Jan 27, 2009 at 4:56 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
> I've noticed that the README file is not very helpful for users building it
> on Windows. Perhaps the notes from Wiki could be copied there?

Done

> Somet time ago I added boostrap.bat script and it is mentioned in
> instructions on the Wiki. I see that version.h is provided in the package
> and platform.h is generated automagically.
> Does it mean bootstrap.bat is useless now? If so, I can remove its notes
> from the Wiki.

No idea. Does it? :)

P.
From pramsey at opengeo.org  Tue Jan 27 20:15:58 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Tue Jan 27 20:15:59 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901271707n157a981dj33b4a3f33c8ea4a1@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<497FAD4F.1070902@loskot.net>
	<30fe546d0901271707n157a981dj33b4a3f33c8ea4a1@mail.gmail.com>
Message-ID: <30fe546d0901271715v5210d553tbc5c5a2a2c4119a7@mail.gmail.com>

OK, answer is: maybe? The files are generated by ./configure as part of the

./autogen.sh; ./configure ; make dist

process, so they will appear in the tarballs. On the other hand, they
don't exist in SVN, so if you windoze developers checkout svn you need
some other way to get your hands on them... and bootstrap at least
makes that a bit faster. You could re-name it to autogen.bat? :)

P

On Tue, Jan 27, 2009 at 5:07 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
> On Tue, Jan 27, 2009 at 4:56 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
>> I've noticed that the README file is not very helpful for users building it
>> on Windows. Perhaps the notes from Wiki could be copied there?
>
> Done
>
>> Somet time ago I added boostrap.bat script and it is mentioned in
>> instructions on the Wiki. I see that version.h is provided in the package
>> and platform.h is generated automagically.
>> Does it mean bootstrap.bat is useless now? If so, I can remove its notes
>> from the Wiki.
>
> No idea. Does it? :)
>
> P.
>
From blake at hailmail.net  Wed Jan 28 00:02:21 2009
From: blake at hailmail.net (Dane Springmeyer)
Date: Wed Jan 28 00:11:05 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
Message-ID: <73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>

Paul,

I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make  
installs went perfectly.

Just a few compiler warnings that I've pasted here: http://dpaste.com/hold/113736/

Dane

On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:

> This is a pre-warning to PSC members to download and test the first
> 3.1 rc tarball:
>
> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>
> If I don't hear any howls of dismay over the next 24 hours, I will
> make a wider announcement for testing.
>
> Paul
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From blake at hailmail.net  Wed Jan 28 00:40:39 2009
From: blake at hailmail.net (Dane Springmeyer)
Date: Wed Jan 28 00:40:35 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
Message-ID: <E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>

Hi again,

I just did a bit further testing of the new cascaded union goodness  
via Shapely. See the linked email below:
http://lists.gispython.org/pipermail/community/2009-January/001960.html

Seems that I reached where a point that 'should never be reached' ?
http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractSTRtree.cpp#L358

I am new to looking at the geos code, so any pointers to help me test  
more would be great.

Thanks!

Dane


On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:

> Paul,
>
> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make  
> installs went perfectly.
>
> Just a few compiler warnings that I've pasted here: http://dpaste.com/hold/113736/
>
> Dane
>
> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>
>> This is a pre-warning to PSC members to download and test the first
>> 3.1 rc tarball:
>>
>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>
>> If I don't hear any howls of dismay over the next 24 hours, I will
>> make a wider announcement for testing.
>>
>> Paul
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From ben at gls.co.za  Wed Jan 28 02:25:19 2009
From: ben at gls.co.za (Ben Harper)
Date: Wed Jan 28 02:26:41 2009
Subject: [geos-devel] Precision model and predicates
Message-ID: <27BA4145191C1849903386A90FE16D65165F9B28BA@xserver.gls.co.za>

Hi,
I'm trying to use GEOS to evaluate geometric predicates while using a Precision Model that is lower than the default. It looks as though the Precision Model is only used for certain operations, and in particular ignored when evaluating the border conditions of whether lines touch each other. I've read the JTS technical docs, and they seemed to imply that this type of thing should work.

My test is to create two polygons side by side, with one touching edge. The TOUCH predicate evaluates true. I then move one polygon away by DBL_EPSILON (1e-16), and evaluate the predicate again. This time it is false. A brief step through and code search seems to reveal that the precision model is not used here.

Am I completely missing the point?

Thanks,
Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090128/7a9bf03d/attachment.html
From hartmut.kaiser at gmail.com  Wed Jan 28 10:44:52 2009
From: hartmut.kaiser at gmail.com (Hartmut Kaiser)
Date: Wed Jan 28 10:44:57 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
Message-ID: <49807d76.16be600a.4d8d.3929@mx.google.com>

> I just did a bit further testing of the new cascaded union goodness
> via Shapely. See the linked email below:
> http://lists.gispython.org/pipermail/community/2009-January/001960.html
> 
> Seems that I reached where a point that 'should never be reached' ?
> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
> TRtree.cpp#L358
> 
> I am new to looking at the geos code, so any pointers to help me test
> more would be great.

Could you provide a minimal test I could use to reproduce this problem?
Regards Hartmut

> 
> Thanks!
> 
> Dane
> 
> 
> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
> 
> > Paul,
> >
> > I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
> > installs went perfectly.
> >
> > Just a few compiler warnings that I've pasted here:
> http://dpaste.com/hold/113736/
> >
> > Dane
> >
> > On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
> >
> >> This is a pre-warning to PSC members to download and test the first
> >> 3.1 rc tarball:
> >>
> >> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
> >>
> >> If I don't hear any howls of dismay over the next 24 hours, I will
> >> make a wider announcement for testing.
> >>
> >> Paul
> >> _______________________________________________
> >> geos-devel mailing list
> >> geos-devel@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From mbdavis at refractions.net  Wed Jan 28 12:16:59 2009
From: mbdavis at refractions.net (Martin Davis)
Date: Wed Jan 28 12:17:09 2009
Subject: [geos-devel] Precision model and predicates
In-Reply-To: <27BA4145191C1849903386A90FE16D65165F9B28BA@xserver.gls.co.za>
References: <27BA4145191C1849903386A90FE16D65165F9B28BA@xserver.gls.co.za>
Message-ID: <4980930B.8040104@refractions.net>

The Precision Model is primarily used in constructive methods.  New 
Geometrys are computed so that their coordinates fall on the implicit 
grid defined by the Precision Model.

Currently the Precision Model is not used in evaluation of geometric 
predicates.  They are evaluated on the exact values of the coordinates.

What is your use case for wanting approximate predicates?

Ben Harper wrote:
>
> Hi,
>
> I'm trying to use GEOS to evaluate geometric predicates while using a 
> Precision Model that is lower than the default. It looks as though the 
> Precision Model is only used for certain operations, and in particular 
> ignored when evaluating the border conditions of whether lines touch 
> each other. I've read the JTS technical docs, and they seemed to imply 
> that this type of thing should work.
>
>  
>
> My test is to create two polygons side by side, with one touching 
> edge. The TOUCH predicate evaluates true. I then move one polygon away 
> by DBL_EPSILON (1e-16), and evaluate the predicate again. This time it 
> is false. A brief step through and code search seems to reveal that 
> the precision model is not used here.
>
>  
>
> Am I completely missing the point?
>
>  
>
> Thanks,
>
> Ben
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From sgillies at frii.com  Wed Jan 28 12:39:59 2009
From: sgillies at frii.com (Sean Gillies)
Date: Wed Jan 28 12:40:02 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
Message-ID: <3E742862-A652-4387-9D4A-F97BE947A247@frii.com>

RC 1 builds and seems to work fine here on OS X 10.5, gcc 4.0.1, at  
least with Shapely. Haven't tried the reentrant API yet, but intend to  
next week.

Sean

On Jan 27, 2009, at 10:02 PM, Dane Springmeyer wrote:

> Paul,
>
> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make  
> installs went perfectly.
>
> Just a few compiler warnings that I've pasted here: http://dpaste.com/hold/113736/
>
> Dane
>
> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>
>> This is a pre-warning to PSC members to download and test the first
>> 3.1 rc tarball:
>>
>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>
>> If I don't hear any howls of dismay over the next 24 hours, I will
>> make a wider announcement for testing.
>>
>> Paul
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From pramsey at opengeo.org  Wed Jan 28 13:33:57 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Jan 28 13:34:00 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
Message-ID: <30fe546d0901281033x4076b772x9dde872647edc4b7@mail.gmail.com>

Dane, can you provide the shapefile? I will see if this reproduces in
PostGIS and generate a test file for Hartmut if it does.

P.

On Tue, Jan 27, 2009 at 9:40 PM, Dane Springmeyer <blake@hailmail.net> wrote:
> Hi again,
>
> I just did a bit further testing of the new cascaded union goodness via
> Shapely. See the linked email below:
> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>
> Seems that I reached where a point that 'should never be reached' ?
> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractSTRtree.cpp#L358
>
> I am new to looking at the geos code, so any pointers to help me test more
> would be great.
>
> Thanks!
>
> Dane
>
>
> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>
>> Paul,
>>
>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>> installs went perfectly.
>>
>> Just a few compiler warnings that I've pasted here:
>> http://dpaste.com/hold/113736/
>>
>> Dane
>>
>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>
>>> This is a pre-warning to PSC members to download and test the first
>>> 3.1 rc tarball:
>>>
>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>
>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>> make a wider announcement for testing.
>>>
>>> Paul
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From blake at hailmail.net  Wed Jan 28 14:54:53 2009
From: blake at hailmail.net (Dane Springmeyer)
Date: Wed Jan 28 14:54:49 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901281033x4076b772x9dde872647edc4b7@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<30fe546d0901281033x4076b772x9dde872647edc4b7@mail.gmail.com>
Message-ID: <2DCD82B6-52DA-4D02-BEF2-AA7FB6665786@hailmail.net>

Hi Paul and Hartmut,

Sean wisely mentioned I should be careful in testing shapefiles with  
invalid polygons, which I definitely forgot to think about since I was  
reading in the shapefile directly.

Nevertheless with both this original shapefile [1] (that does have  
invalid polygons) and a cleaned up version (with the buffer(0) trick)  
that I have posted here [2], the below script results in the "should  
never be reached" assertion.

Perhaps the cleaned up shapefile [2] is still invalid for passing  
directly to the cascaded_union,  just let me know how to test further.

Cheers,

Dane


[1] http://thematicmapping.org/downloads/TM_WORLD_BORDERS-0.3.zip
[2] http://dbsgeo.com/tmp/test_world_shapefile.zip


### python ###

from shapely.ops import cascaded_union
from osgeo import ogr
from shapely.wkb import loads

ds = ogr.Open('tm_world_buffer_zero.shp')
state = ds.GetLayer(0)
states = []
while 1:
    f = state.GetNextFeature()
    if f is None: break
    g = f.geometry()
    states.append(loads(g.ExportToWkb()))

print len(states) # 246

u = cascaded_union(states)
[....snip...]
cxx type MultiPolygon
cxx type Polygon
cxx type Polygon
cxx type Polygon
cxx type Polygon
cxx type MultiPolygon
cxx type MultiPolygon
cxx type MultiPolygon
cxx type MultiPolygon
Assertion failed: (!"should never be reached"), function itemsTree,  
file AbstractSTRtree.cpp, line 358.
Abort trap







On Jan 28, 2009, at 10:33 AM, Paul Ramsey wrote:

> Dane, can you provide the shapefile? I will see if this reproduces in
> PostGIS and generate a test file for Hartmut if it does.
>
> P.
>
> On Tue, Jan 27, 2009 at 9:40 PM, Dane Springmeyer  
> <blake@hailmail.net> wrote:
>> Hi again,
>>
>> I just did a bit further testing of the new cascaded union goodness  
>> via
>> Shapely. See the linked email below:
>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>
>> Seems that I reached where a point that 'should never be reached' ?
>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractSTRtree.cpp#L358
>>
>> I am new to looking at the geos code, so any pointers to help me  
>> test more
>> would be great.
>>
>> Thanks!
>>
>> Dane
>>
>>
>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>
>>> Paul,
>>>
>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>> installs went perfectly.
>>>
>>> Just a few compiler warnings that I've pasted here:
>>> http://dpaste.com/hold/113736/
>>>
>>> Dane
>>>
>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>
>>>> This is a pre-warning to PSC members to download and test the first
>>>> 3.1 rc tarball:
>>>>
>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>
>>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>>> make a wider announcement for testing.
>>>>
>>>> Paul
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From pramsey at opengeo.org  Wed Jan 28 15:45:43 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Jan 28 15:45:45 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <2DCD82B6-52DA-4D02-BEF2-AA7FB6665786@hailmail.net>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<30fe546d0901281033x4076b772x9dde872647edc4b7@mail.gmail.com>
	<2DCD82B6-52DA-4D02-BEF2-AA7FB6665786@hailmail.net>
Message-ID: <30fe546d0901281245m17bfb489g146c6a5ab6f125f8@mail.gmail.com>

Well, I'm seeing the same thing, with a bit more information:

aggtest=# select geometrytype(st_union(the_geom)) from tm_world;
NOTICE:  TopologyException: found non-noded intersection between
21.8917 -26.6689, 21.9536 -26.6644 and 21.9536 -26.6644, 21.8917
-26.6689 21.953 -26.6645
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
The connection to the server was lost. Attempting reset: Failed.
!> \q

The crash is probably the result of bad null/exception handling on my
part, but the core problem is that one of the union pairs is failing.
Basically ST_Union(geom1, geom2) still isn't 100% robust, so if you
find (or create) a pairing that doesn't work, you're SOL.

There's a hack approach to this which would probably work "better",
but still not 100%, and that would be to catch the exception when it
occurs in GEOS, and put the bad pair off to the side everything else
is done. Then try to union(finalresult, bad1) and union(finalresult,
bad2) in the hopes that the specific problem of union(bad1, bad2)
doesn't come up in the union with the finalresult.

I'm going to wrap this data into a MULTIPOLYGON for Hartmut to run,
which should allow him to extract the bad pairing, which we can then
give to Martin and see if JTS also dislikes it.

P.

On Wed, Jan 28, 2009 at 11:54 AM, Dane Springmeyer <blake@hailmail.net> wrote:
> Hi Paul and Hartmut,
>
> Sean wisely mentioned I should be careful in testing shapefiles with invalid
> polygons, which I definitely forgot to think about since I was reading in
> the shapefile directly.
>
> Nevertheless with both this original shapefile [1] (that does have invalid
> polygons) and a cleaned up version (with the buffer(0) trick) that I have
> posted here [2], the below script results in the "should never be reached"
> assertion.
>
> Perhaps the cleaned up shapefile [2] is still invalid for passing directly
> to the cascaded_union,  just let me know how to test further.
>
> Cheers,
>
> Dane
>
>
> [1] http://thematicmapping.org/downloads/TM_WORLD_BORDERS-0.3.zip
> [2] http://dbsgeo.com/tmp/test_world_shapefile.zip
>
>
> ### python ###
>
> from shapely.ops import cascaded_union
> from osgeo import ogr
> from shapely.wkb import loads
>
> ds = ogr.Open('tm_world_buffer_zero.shp')
> state = ds.GetLayer(0)
> states = []
> while 1:
>   f = state.GetNextFeature()
>   if f is None: break
>   g = f.geometry()
>   states.append(loads(g.ExportToWkb()))
>
> print len(states) # 246
>
> u = cascaded_union(states)
> [....snip...]
> cxx type MultiPolygon
> cxx type Polygon
> cxx type Polygon
> cxx type Polygon
> cxx type Polygon
> cxx type MultiPolygon
> cxx type MultiPolygon
> cxx type MultiPolygon
> cxx type MultiPolygon
> Assertion failed: (!"should never be reached"), function itemsTree, file
> AbstractSTRtree.cpp, line 358.
> Abort trap
>
>
>
>
>
>
>
> On Jan 28, 2009, at 10:33 AM, Paul Ramsey wrote:
>
>> Dane, can you provide the shapefile? I will see if this reproduces in
>> PostGIS and generate a test file for Hartmut if it does.
>>
>> P.
>>
>> On Tue, Jan 27, 2009 at 9:40 PM, Dane Springmeyer <blake@hailmail.net>
>> wrote:
>>>
>>> Hi again,
>>>
>>> I just did a bit further testing of the new cascaded union goodness via
>>> Shapely. See the linked email below:
>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>
>>> Seems that I reached where a point that 'should never be reached' ?
>>>
>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractSTRtree.cpp#L358
>>>
>>> I am new to looking at the geos code, so any pointers to help me test
>>> more
>>> would be great.
>>>
>>> Thanks!
>>>
>>> Dane
>>>
>>>
>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>
>>>> Paul,
>>>>
>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>>> installs went perfectly.
>>>>
>>>> Just a few compiler warnings that I've pasted here:
>>>> http://dpaste.com/hold/113736/
>>>>
>>>> Dane
>>>>
>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>
>>>>> This is a pre-warning to PSC members to download and test the first
>>>>> 3.1 rc tarball:
>>>>>
>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>
>>>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>>>> make a wider announcement for testing.
>>>>>
>>>>> Paul
>>>>> _______________________________________________
>>>>> geos-devel mailing list
>>>>> geos-devel@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From sgillies at frii.com  Wed Jan 28 16:15:43 2009
From: sgillies at frii.com (Sean Gillies)
Date: Wed Jan 28 16:15:45 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901281245m17bfb489g146c6a5ab6f125f8@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<30fe546d0901281033x4076b772x9dde872647edc4b7@mail.gmail.com>
	<2DCD82B6-52DA-4D02-BEF2-AA7FB6665786@hailmail.net>
	<30fe546d0901281245m17bfb489g146c6a5ab6f125f8@mail.gmail.com>
Message-ID: <2BD0149F-2AC2-4A39-8451-7D231621E098@frii.com>

GEOS 3.1.0rc1 is dumping debugging noise from GEOSUnionCascaded,  
something we should fix.

Dane's shapefile is a bit broken, being a mix of polygons and  
multipolygons. Is that the problem?

Sean

On Jan 28, 2009, at 1:45 PM, Paul Ramsey wrote:

> Well, I'm seeing the same thing, with a bit more information:
>
> aggtest=# select geometrytype(st_union(the_geom)) from tm_world;
> NOTICE:  TopologyException: found non-noded intersection between
> 21.8917 -26.6689, 21.9536 -26.6644 and 21.9536 -26.6644, 21.8917
> -26.6689 21.953 -26.6645
> server closed the connection unexpectedly
> 	This probably means the server terminated abnormally
> 	before or while processing the request.
> The connection to the server was lost. Attempting reset: Failed.
> !> \q
>
> The crash is probably the result of bad null/exception handling on my
> part, but the core problem is that one of the union pairs is failing.
> Basically ST_Union(geom1, geom2) still isn't 100% robust, so if you
> find (or create) a pairing that doesn't work, you're SOL.
>
> There's a hack approach to this which would probably work "better",
> but still not 100%, and that would be to catch the exception when it
> occurs in GEOS, and put the bad pair off to the side everything else
> is done. Then try to union(finalresult, bad1) and union(finalresult,
> bad2) in the hopes that the specific problem of union(bad1, bad2)
> doesn't come up in the union with the finalresult.
>
> I'm going to wrap this data into a MULTIPOLYGON for Hartmut to run,
> which should allow him to extract the bad pairing, which we can then
> give to Martin and see if JTS also dislikes it.
>
> P.
>
> On Wed, Jan 28, 2009 at 11:54 AM, Dane Springmeyer  
> <blake@hailmail.net> wrote:
>> Hi Paul and Hartmut,
>>
>> Sean wisely mentioned I should be careful in testing shapefiles  
>> with invalid
>> polygons, which I definitely forgot to think about since I was  
>> reading in
>> the shapefile directly.
>>
>> Nevertheless with both this original shapefile [1] (that does have  
>> invalid
>> polygons) and a cleaned up version (with the buffer(0) trick) that  
>> I have
>> posted here [2], the below script results in the "should never be  
>> reached"
>> assertion.
>>
>> Perhaps the cleaned up shapefile [2] is still invalid for passing  
>> directly
>> to the cascaded_union,  just let me know how to test further.
>>
>> Cheers,
>>
>> Dane
>>
>>
>> [1] http://thematicmapping.org/downloads/TM_WORLD_BORDERS-0.3.zip
>> [2] http://dbsgeo.com/tmp/test_world_shapefile.zip
>>
>>
>> ### python ###
>>
>> from shapely.ops import cascaded_union
>> from osgeo import ogr
>> from shapely.wkb import loads
>>
>> ds = ogr.Open('tm_world_buffer_zero.shp')
>> state = ds.GetLayer(0)
>> states = []
>> while 1:
>>  f = state.GetNextFeature()
>>  if f is None: break
>>  g = f.geometry()
>>  states.append(loads(g.ExportToWkb()))
>>
>> print len(states) # 246
>>
>> u = cascaded_union(states)
>> [....snip...]
>> cxx type MultiPolygon
>> cxx type Polygon
>> cxx type Polygon
>> cxx type Polygon
>> cxx type Polygon
>> cxx type MultiPolygon
>> cxx type MultiPolygon
>> cxx type MultiPolygon
>> cxx type MultiPolygon
>> Assertion failed: (!"should never be reached"), function itemsTree,  
>> file
>> AbstractSTRtree.cpp, line 358.
>> Abort trap
>>
>>
>>
>>
>>
>>
>>
>> On Jan 28, 2009, at 10:33 AM, Paul Ramsey wrote:
>>
>>> Dane, can you provide the shapefile? I will see if this reproduces  
>>> in
>>> PostGIS and generate a test file for Hartmut if it does.
>>>
>>> P.
>>>
>>> On Tue, Jan 27, 2009 at 9:40 PM, Dane Springmeyer <blake@hailmail.net 
>>> >
>>> wrote:
>>>>
>>>> Hi again,
>>>>
>>>> I just did a bit further testing of the new cascaded union  
>>>> goodness via
>>>> Shapely. See the linked email below:
>>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>>
>>>> Seems that I reached where a point that 'should never be reached' ?
>>>>
>>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractSTRtree.cpp#L358
>>>>
>>>> I am new to looking at the geos code, so any pointers to help me  
>>>> test
>>>> more
>>>> would be great.
>>>>
>>>> Thanks!
>>>>
>>>> Dane
>>>>
>>>>
>>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>>
>>>>> Paul,
>>>>>
>>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and  
>>>>> make
>>>>> installs went perfectly.
>>>>>
>>>>> Just a few compiler warnings that I've pasted here:
>>>>> http://dpaste.com/hold/113736/
>>>>>
>>>>> Dane
>>>>>
>>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>>
>>>>>> This is a pre-warning to PSC members to download and test the  
>>>>>> first
>>>>>> 3.1 rc tarball:
>>>>>>
>>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>>
>>>>>> If I don't hear any howls of dismay over the next 24 hours, I  
>>>>>> will
>>>>>> make a wider announcement for testing.
>>>>>>
>>>>>> Paul
>>>>>> _______________________________________________
>>>>>> geos-devel mailing list
>>>>>> geos-devel@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>
>>>>> _______________________________________________
>>>>> geos-devel mailing list
>>>>> geos-devel@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From pramsey at opengeo.org  Wed Jan 28 16:46:47 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Jan 28 16:46:50 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <2BD0149F-2AC2-4A39-8451-7D231621E098@frii.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<30fe546d0901281033x4076b772x9dde872647edc4b7@mail.gmail.com>
	<2DCD82B6-52DA-4D02-BEF2-AA7FB6665786@hailmail.net>
	<30fe546d0901281245m17bfb489g146c6a5ab6f125f8@mail.gmail.com>
	<2BD0149F-2AC2-4A39-8451-7D231621E098@frii.com>
Message-ID: <30fe546d0901281346g6d81f7bv832d42c1981587d6@mail.gmail.com>

On Wed, Jan 28, 2009 at 1:15 PM, Sean Gillies <sgillies@frii.com> wrote:
> GEOS 3.1.0rc1 is dumping debugging noise from GEOSUnionCascaded, something
> we should fix.

Dumb, dumb. That's because I built it off my sandbox and had some
uncommitted noise. I'll drop rc2 off of a clean tree.

> Dane's shapefile is a bit broken, being a mix of polygons and multipolygons.
> Is that the problem?

No, the input should be built into a single multipolygon, to the
makeup of the original consituents should be submerged.

P

>
> Sean
>
> On Jan 28, 2009, at 1:45 PM, Paul Ramsey wrote:
>
>> Well, I'm seeing the same thing, with a bit more information:
>>
>> aggtest=# select geometrytype(st_union(the_geom)) from tm_world;
>> NOTICE:  TopologyException: found non-noded intersection between
>> 21.8917 -26.6689, 21.9536 -26.6644 and 21.9536 -26.6644, 21.8917
>> -26.6689 21.953 -26.6645
>> server closed the connection unexpectedly
>>        This probably means the server terminated abnormally
>>        before or while processing the request.
>> The connection to the server was lost. Attempting reset: Failed.
>> !> \q
>>
>> The crash is probably the result of bad null/exception handling on my
>> part, but the core problem is that one of the union pairs is failing.
>> Basically ST_Union(geom1, geom2) still isn't 100% robust, so if you
>> find (or create) a pairing that doesn't work, you're SOL.
>>
>> There's a hack approach to this which would probably work "better",
>> but still not 100%, and that would be to catch the exception when it
>> occurs in GEOS, and put the bad pair off to the side everything else
>> is done. Then try to union(finalresult, bad1) and union(finalresult,
>> bad2) in the hopes that the specific problem of union(bad1, bad2)
>> doesn't come up in the union with the finalresult.
>>
>> I'm going to wrap this data into a MULTIPOLYGON for Hartmut to run,
>> which should allow him to extract the bad pairing, which we can then
>> give to Martin and see if JTS also dislikes it.
>>
>> P.
>>
>> On Wed, Jan 28, 2009 at 11:54 AM, Dane Springmeyer <blake@hailmail.net>
>> wrote:
>>>
>>> Hi Paul and Hartmut,
>>>
>>> Sean wisely mentioned I should be careful in testing shapefiles with
>>> invalid
>>> polygons, which I definitely forgot to think about since I was reading in
>>> the shapefile directly.
>>>
>>> Nevertheless with both this original shapefile [1] (that does have
>>> invalid
>>> polygons) and a cleaned up version (with the buffer(0) trick) that I have
>>> posted here [2], the below script results in the "should never be
>>> reached"
>>> assertion.
>>>
>>> Perhaps the cleaned up shapefile [2] is still invalid for passing
>>> directly
>>> to the cascaded_union,  just let me know how to test further.
>>>
>>> Cheers,
>>>
>>> Dane
>>>
>>>
>>> [1] http://thematicmapping.org/downloads/TM_WORLD_BORDERS-0.3.zip
>>> [2] http://dbsgeo.com/tmp/test_world_shapefile.zip
>>>
>>>
>>> ### python ###
>>>
>>> from shapely.ops import cascaded_union
>>> from osgeo import ogr
>>> from shapely.wkb import loads
>>>
>>> ds = ogr.Open('tm_world_buffer_zero.shp')
>>> state = ds.GetLayer(0)
>>> states = []
>>> while 1:
>>>  f = state.GetNextFeature()
>>>  if f is None: break
>>>  g = f.geometry()
>>>  states.append(loads(g.ExportToWkb()))
>>>
>>> print len(states) # 246
>>>
>>> u = cascaded_union(states)
>>> [....snip...]
>>> cxx type MultiPolygon
>>> cxx type Polygon
>>> cxx type Polygon
>>> cxx type Polygon
>>> cxx type Polygon
>>> cxx type MultiPolygon
>>> cxx type MultiPolygon
>>> cxx type MultiPolygon
>>> cxx type MultiPolygon
>>> Assertion failed: (!"should never be reached"), function itemsTree, file
>>> AbstractSTRtree.cpp, line 358.
>>> Abort trap
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> On Jan 28, 2009, at 10:33 AM, Paul Ramsey wrote:
>>>
>>>> Dane, can you provide the shapefile? I will see if this reproduces in
>>>> PostGIS and generate a test file for Hartmut if it does.
>>>>
>>>> P.
>>>>
>>>> On Tue, Jan 27, 2009 at 9:40 PM, Dane Springmeyer <blake@hailmail.net>
>>>> wrote:
>>>>>
>>>>> Hi again,
>>>>>
>>>>> I just did a bit further testing of the new cascaded union goodness via
>>>>> Shapely. See the linked email below:
>>>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>>>
>>>>> Seems that I reached where a point that 'should never be reached' ?
>>>>>
>>>>>
>>>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractSTRtree.cpp#L358
>>>>>
>>>>> I am new to looking at the geos code, so any pointers to help me test
>>>>> more
>>>>> would be great.
>>>>>
>>>>> Thanks!
>>>>>
>>>>> Dane
>>>>>
>>>>>
>>>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>>>
>>>>>> Paul,
>>>>>>
>>>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>>>>> installs went perfectly.
>>>>>>
>>>>>> Just a few compiler warnings that I've pasted here:
>>>>>> http://dpaste.com/hold/113736/
>>>>>>
>>>>>> Dane
>>>>>>
>>>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>>>
>>>>>>> This is a pre-warning to PSC members to download and test the first
>>>>>>> 3.1 rc tarball:
>>>>>>>
>>>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>>>
>>>>>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>>>>>> make a wider announcement for testing.
>>>>>>>
>>>>>>> Paul
>>>>>>> _______________________________________________
>>>>>>> geos-devel mailing list
>>>>>>> geos-devel@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>
>>>>>> _______________________________________________
>>>>>> geos-devel mailing list
>>>>>> geos-devel@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>
>>>>> _______________________________________________
>>>>> geos-devel mailing list
>>>>> geos-devel@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at opengeo.org  Wed Jan 28 16:49:53 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Jan 28 16:49:56 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <49807d76.16be600a.4d8d.3929@mx.google.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<49807d76.16be600a.4d8d.3929@mx.google.com>
Message-ID: <30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>

For anyone that needs a test geometry, here's Dane's input as a single
multipolygon:

http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2

On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
<hartmut.kaiser@gmail.com> wrote:
>> I just did a bit further testing of the new cascaded union goodness
>> via Shapely. See the linked email below:
>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>
>> Seems that I reached where a point that 'should never be reached' ?
>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>> TRtree.cpp#L358
>>
>> I am new to looking at the geos code, so any pointers to help me test
>> more would be great.
>
> Could you provide a minimal test I could use to reproduce this problem?
> Regards Hartmut
>
>>
>> Thanks!
>>
>> Dane
>>
>>
>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>
>> > Paul,
>> >
>> > I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>> > installs went perfectly.
>> >
>> > Just a few compiler warnings that I've pasted here:
>> http://dpaste.com/hold/113736/
>> >
>> > Dane
>> >
>> > On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>> >
>> >> This is a pre-warning to PSC members to download and test the first
>> >> 3.1 rc tarball:
>> >>
>> >> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>> >>
>> >> If I don't hear any howls of dismay over the next 24 hours, I will
>> >> make a wider announcement for testing.
>> >>
>> >> Paul
>> >> _______________________________________________
>> >> geos-devel mailing list
>> >> geos-devel@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/geos-devel
>> >
>> > _______________________________________________
>> > geos-devel mailing list
>> > geos-devel@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at opengeo.org  Wed Jan 28 19:40:11 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Jan 28 19:40:14 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<49807d76.16be600a.4d8d.3929@mx.google.com>
	<30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>
Message-ID: <30fe546d0901281640x7af6f357y769eed2d8eaae9db@mail.gmail.com>

Incidentally, the problem is not the invalid geometries. I first tried
the union after "fixing" them with buffer(0), but I just now tried the
union after deleting them, with the same result.

aggtest=# delete from tm_world_2 where not st_isvalid(the_geom);
NOTICE:  Ring Self-intersection at or near point -53.7564 48.5033
NOTICE:  Ring Self-intersection at or near point -70.9172 -54.7086
NOTICE:  Ring Self-intersection at or near point 5.33694 61.5928
NOTICE:  Ring Self-intersection at or near point 143.662 49.3122
DELETE 4
aggtest=# select geometrytype(st_union(the_geom)) from tm_world_2;
NOTICE:  TopologyException: found non-noded intersection between
32.4122 -21.2178, 32.4762 -21.3219 and 32.4762 -21.3219, 32.4122
-21.2178 32.4756 -21.3208
ERROR:  GEOS2POSTGIS returned an error
aggtest=#

P

On Wed, Jan 28, 2009 at 1:49 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
> For anyone that needs a test geometry, here's Dane's input as a single
> multipolygon:
>
> http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2
>
> On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
> <hartmut.kaiser@gmail.com> wrote:
>>> I just did a bit further testing of the new cascaded union goodness
>>> via Shapely. See the linked email below:
>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>
>>> Seems that I reached where a point that 'should never be reached' ?
>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>>> TRtree.cpp#L358
>>>
>>> I am new to looking at the geos code, so any pointers to help me test
>>> more would be great.
>>
>> Could you provide a minimal test I could use to reproduce this problem?
>> Regards Hartmut
>>
>>>
>>> Thanks!
>>>
>>> Dane
>>>
>>>
>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>
>>> > Paul,
>>> >
>>> > I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>> > installs went perfectly.
>>> >
>>> > Just a few compiler warnings that I've pasted here:
>>> http://dpaste.com/hold/113736/
>>> >
>>> > Dane
>>> >
>>> > On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>> >
>>> >> This is a pre-warning to PSC members to download and test the first
>>> >> 3.1 rc tarball:
>>> >>
>>> >> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>> >>
>>> >> If I don't hear any howls of dismay over the next 24 hours, I will
>>> >> make a wider announcement for testing.
>>> >>
>>> >> Paul
>>> >> _______________________________________________
>>> >> geos-devel mailing list
>>> >> geos-devel@lists.osgeo.org
>>> >> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>> >
>>> > _______________________________________________
>>> > geos-devel mailing list
>>> > geos-devel@lists.osgeo.org
>>> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
From pramsey at opengeo.org  Thu Jan 29 01:30:38 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu Jan 29 01:30:41 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<49807d76.16be600a.4d8d.3929@mx.google.com>
	<30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>
Message-ID: <30fe546d0901282230q2e6ef40aw406b4305e5494f39@mail.gmail.com>

FYI, I've relocated this file to

http://s3.cleverelephant.ca/bigmulti.txt.bz2

P.

On Wed, Jan 28, 2009 at 1:49 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
> For anyone that needs a test geometry, here's Dane's input as a single
> multipolygon:
>
> http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2
>
> On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
> <hartmut.kaiser@gmail.com> wrote:
>>> I just did a bit further testing of the new cascaded union goodness
>>> via Shapely. See the linked email below:
>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>
>>> Seems that I reached where a point that 'should never be reached' ?
>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>>> TRtree.cpp#L358
>>>
>>> I am new to looking at the geos code, so any pointers to help me test
>>> more would be great.
>>
>> Could you provide a minimal test I could use to reproduce this problem?
>> Regards Hartmut
>>
>>>
>>> Thanks!
>>>
>>> Dane
>>>
>>>
>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>
>>> > Paul,
>>> >
>>> > I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>> > installs went perfectly.
>>> >
>>> > Just a few compiler warnings that I've pasted here:
>>> http://dpaste.com/hold/113736/
>>> >
>>> > Dane
>>> >
>>> > On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>> >
>>> >> This is a pre-warning to PSC members to download and test the first
>>> >> 3.1 rc tarball:
>>> >>
>>> >> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>> >>
>>> >> If I don't hear any howls of dismay over the next 24 hours, I will
>>> >> make a wider announcement for testing.
>>> >>
>>> >> Paul
>>> >> _______________________________________________
>>> >> geos-devel mailing list
>>> >> geos-devel@lists.osgeo.org
>>> >> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>> >
>>> > _______________________________________________
>>> > geos-devel mailing list
>>> > geos-devel@lists.osgeo.org
>>> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
From ben at gls.co.za  Thu Jan 29 03:23:12 2009
From: ben at gls.co.za (Ben Harper)
Date: Thu Jan 29 03:23:30 2009
Subject: [geos-devel] Precision model and predicates
In-Reply-To: <4980930B.8040104@refractions.net>
References: <27BA4145191C1849903386A90FE16D65165F9B28BA@xserver.gls.co.za>
	<4980930B.8040104@refractions.net>
Message-ID: <27BA4145191C1849903386A90FE16D65165F9B2A92@xserver.gls.co.za>

I see - that's kind of what I guessed.

The reason why I'm ending up with geometries with precision less than
2^53 is because I have my application work to within a specified
tolerance (by default 1 micrometer). My intermediate representation
for polygon coordinates can be 32-bit signed integers, with scale & offset,
if this meets the precision criteria. Obviously in certain cases this
ends up being less than straight 'double' precision, and this is the
root of my problem.

In writing some of my own geometric predicate functions, I have come to
the conclusion that if one wants to work strictly to a certain precision,
then you need to make your epsilon an arbitrary value, be it a #define,
a global 'double', or whatever the case may be. In doing so, one might
as well make it a variable that the user can control.

It also occurred to me that in doing this one needs to place a priority on
the 3 principle regions (Interior, Boundary, and Exterior).
The natural order seems to be Border > Interior > Exterior.
For example:
You have a point that is actually inside a polygon, but within 'epsilon'
distance from its edge. You obviously need to make the decision whether
the point is Interior or Boundary, and in such as case it is considered
to intersect the Boundary only by virtue of the Boundary's priority over
the Interior.

I am curious as to how you have approached this in JTS, or your thoughts
on the matter?

Thanks,
Ben


-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Martin Davis
Sent: Wednesday, January 28, 2009 7:17 PM
To: GEOS Development List
Subject: Re: [geos-devel] Precision model and predicates

The Precision Model is primarily used in constructive methods.  New
Geometrys are computed so that their coordinates fall on the implicit
grid defined by the Precision Model.

Currently the Precision Model is not used in evaluation of geometric
predicates.  They are evaluated on the exact values of the coordinates.

What is your use case for wanting approximate predicates?

Ben Harper wrote:
>
> Hi,
>
> I'm trying to use GEOS to evaluate geometric predicates while using a
> Precision Model that is lower than the default. It looks as though the
> Precision Model is only used for certain operations, and in particular
> ignored when evaluating the border conditions of whether lines touch
> each other. I've read the JTS technical docs, and they seemed to imply
> that this type of thing should work.
>
>
>
> My test is to create two polygons side by side, with one touching
> edge. The TOUCH predicate evaluates true. I then move one polygon away
> by DBL_EPSILON (1e-16), and evaluate the predicate again. This time it
> is false. A brief step through and code search seems to reveal that
> the precision model is not used here.
>
>
>
> Am I completely missing the point?
>
>
>
> Thanks,
>
> Ben
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

--
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
From mbdavis at refractions.net  Thu Jan 29 15:09:11 2009
From: mbdavis at refractions.net (Martin Davis)
Date: Thu Jan 29 15:09:16 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901281640x7af6f357y769eed2d8eaae9db@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>	<49807d76.16be600a.4d8d.3929@mx.google.com>	<30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>
	<30fe546d0901281640x7af6f357y769eed2d8eaae9db@mail.gmail.com>
Message-ID: <49820CE7.7040804@refractions.net>

When I look at the area of the reported TopologyException in OpenJUMP, 
I'm seeing the following kinds of vertex values:

Feature ID: 122
[   3:0:666] POINT (32.476230999999984 -21.321853999999973)
Feature ID: 222
[     0:144] POINT (32.476231 -21.321854)

So the dataset is not actually 100% cleanly noded.  These kinds of small 
discrepancies are exactly the kind of situation which used to cause 
robustness errors in JTS.  This has pretty much been fixed by the 
addition of the Geometry Snapping concept.  I think this made it into 
GEOS - but perhaps there's a bug in it?

It should be possible to narrow down the problem by finding the two 
geometries which containing the problematic points and just working with 
them.  (Mozambique and Zimbabwe)


Paul Ramsey wrote:
> Incidentally, the problem is not the invalid geometries. I first tried
> the union after "fixing" them with buffer(0), but I just now tried the
> union after deleting them, with the same result.
>
> aggtest=# delete from tm_world_2 where not st_isvalid(the_geom);
> NOTICE:  Ring Self-intersection at or near point -53.7564 48.5033
> NOTICE:  Ring Self-intersection at or near point -70.9172 -54.7086
> NOTICE:  Ring Self-intersection at or near point 5.33694 61.5928
> NOTICE:  Ring Self-intersection at or near point 143.662 49.3122
> DELETE 4
> aggtest=# select geometrytype(st_union(the_geom)) from tm_world_2;
> NOTICE:  TopologyException: found non-noded intersection between
> 32.4122 -21.2178, 32.4762 -21.3219 and 32.4762 -21.3219, 32.4122
> -21.2178 32.4756 -21.3208
> ERROR:  GEOS2POSTGIS returned an error
> aggtest=#
>
> P
>
> On Wed, Jan 28, 2009 at 1:49 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
>   
>> For anyone that needs a test geometry, here's Dane's input as a single
>> multipolygon:
>>
>> http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2
>>
>> On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
>> <hartmut.kaiser@gmail.com> wrote:
>>     
>>>> I just did a bit further testing of the new cascaded union goodness
>>>> via Shapely. See the linked email below:
>>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>>
>>>> Seems that I reached where a point that 'should never be reached' ?
>>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>>>> TRtree.cpp#L358
>>>>
>>>> I am new to looking at the geos code, so any pointers to help me test
>>>> more would be great.
>>>>         
>>> Could you provide a minimal test I could use to reproduce this problem?
>>> Regards Hartmut
>>>
>>>       
>>>> Thanks!
>>>>
>>>> Dane
>>>>
>>>>
>>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>>
>>>>         
>>>>> Paul,
>>>>>
>>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>>>> installs went perfectly.
>>>>>
>>>>> Just a few compiler warnings that I've pasted here:
>>>>>           
>>>> http://dpaste.com/hold/113736/
>>>>         
>>>>> Dane
>>>>>
>>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>>
>>>>>           
>>>>>> This is a pre-warning to PSC members to download and test the first
>>>>>> 3.1 rc tarball:
>>>>>>
>>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>>
>>>>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>>>>> make a wider announcement for testing.
>>>>>>
>>>>>> Paul
>>>>>> _______________________________________________
>>>>>> geos-devel mailing list
>>>>>> geos-devel@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>             
>>>>> _______________________________________________
>>>>> geos-devel mailing list
>>>>> geos-devel@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>           
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>         
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>       
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From pramsey at opengeo.org  Thu Jan 29 15:18:00 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu Jan 29 15:18:03 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <49820CE7.7040804@refractions.net>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<49807d76.16be600a.4d8d.3929@mx.google.com>
	<30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>
	<30fe546d0901281640x7af6f357y769eed2d8eaae9db@mail.gmail.com>
	<49820CE7.7040804@refractions.net>
Message-ID: <30fe546d0901291218k68d037b9v8c476e23caffdb48@mail.gmail.com>

I can do an individual union of Mozambique and Zimbabwe without
problems. Should I be seeing a topology exception?

P

On Thu, Jan 29, 2009 at 12:09 PM, Martin Davis <mbdavis@refractions.net> wrote:
> When I look at the area of the reported TopologyException in OpenJUMP, I'm
> seeing the following kinds of vertex values:
>
> Feature ID: 122
> [   3:0:666] POINT (32.476230999999984 -21.321853999999973)
> Feature ID: 222
> [     0:144] POINT (32.476231 -21.321854)
>
> So the dataset is not actually 100% cleanly noded.  These kinds of small
> discrepancies are exactly the kind of situation which used to cause
> robustness errors in JTS.  This has pretty much been fixed by the addition
> of the Geometry Snapping concept.  I think this made it into GEOS - but
> perhaps there's a bug in it?
>
> It should be possible to narrow down the problem by finding the two
> geometries which containing the problematic points and just working with
> them.  (Mozambique and Zimbabwe)
>
>
> Paul Ramsey wrote:
>>
>> Incidentally, the problem is not the invalid geometries. I first tried
>> the union after "fixing" them with buffer(0), but I just now tried the
>> union after deleting them, with the same result.
>>
>> aggtest=# delete from tm_world_2 where not st_isvalid(the_geom);
>> NOTICE:  Ring Self-intersection at or near point -53.7564 48.5033
>> NOTICE:  Ring Self-intersection at or near point -70.9172 -54.7086
>> NOTICE:  Ring Self-intersection at or near point 5.33694 61.5928
>> NOTICE:  Ring Self-intersection at or near point 143.662 49.3122
>> DELETE 4
>> aggtest=# select geometrytype(st_union(the_geom)) from tm_world_2;
>> NOTICE:  TopologyException: found non-noded intersection between
>> 32.4122 -21.2178, 32.4762 -21.3219 and 32.4762 -21.3219, 32.4122
>> -21.2178 32.4756 -21.3208
>> ERROR:  GEOS2POSTGIS returned an error
>> aggtest=#
>>
>> P
>>
>> On Wed, Jan 28, 2009 at 1:49 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
>>
>>>
>>> For anyone that needs a test geometry, here's Dane's input as a single
>>> multipolygon:
>>>
>>> http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2
>>>
>>> On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
>>> <hartmut.kaiser@gmail.com> wrote:
>>>
>>>>>
>>>>> I just did a bit further testing of the new cascaded union goodness
>>>>> via Shapely. See the linked email below:
>>>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>>>
>>>>> Seems that I reached where a point that 'should never be reached' ?
>>>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>>>>> TRtree.cpp#L358
>>>>>
>>>>> I am new to looking at the geos code, so any pointers to help me test
>>>>> more would be great.
>>>>>
>>>>
>>>> Could you provide a minimal test I could use to reproduce this problem?
>>>> Regards Hartmut
>>>>
>>>>
>>>>>
>>>>> Thanks!
>>>>>
>>>>> Dane
>>>>>
>>>>>
>>>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>>>
>>>>>
>>>>>>
>>>>>> Paul,
>>>>>>
>>>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>>>>> installs went perfectly.
>>>>>>
>>>>>> Just a few compiler warnings that I've pasted here:
>>>>>>
>>>>>
>>>>> http://dpaste.com/hold/113736/
>>>>>
>>>>>>
>>>>>> Dane
>>>>>>
>>>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>>>
>>>>>>
>>>>>>>
>>>>>>> This is a pre-warning to PSC members to download and test the first
>>>>>>> 3.1 rc tarball:
>>>>>>>
>>>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>>>
>>>>>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>>>>>> make a wider announcement for testing.
>>>>>>>
>>>>>>> Paul
>>>>>>> _______________________________________________
>>>>>>> geos-devel mailing list
>>>>>>> geos-devel@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> geos-devel mailing list
>>>>>> geos-devel@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> geos-devel mailing list
>>>>> geos-devel@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>
>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>>
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>
>
> --
> Martin Davis
> Senior Technical Architect
> Refractions Research, Inc.
> (250) 383-3022
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at opengeo.org  Thu Jan 29 15:21:46 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu Jan 29 15:27:23 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901291218k68d037b9v8c476e23caffdb48@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<49807d76.16be600a.4d8d.3929@mx.google.com>
	<30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>
	<30fe546d0901281640x7af6f357y769eed2d8eaae9db@mail.gmail.com>
	<49820CE7.7040804@refractions.net>
	<30fe546d0901291218k68d037b9v8c476e23caffdb48@mail.gmail.com>
Message-ID: <30fe546d0901291221w45e60b26pc6ce8e2d5385695f@mail.gmail.com>

My database agrees with you, that those are the offending locations:

aggtest=# select gid,name from tm_world_2 where st_dwithin(the_geom,
st_setsrid('POINT(32.4122
 gid |    name
-----+------------
 122 | Mozambique
 224 | Zimbabwe
(2 rows)

But, the union throws no exception:

aggtest=# select a.name, b.name, st_geometrytype(st_union(a.the_geom,
b.the_geom)) from tm_world_2 a, tm_world_2 b where a.gid = 122
    name    |   name   | st_geometrytype
------------+----------+-----------------
 Mozambique | Zimbabwe | ST_MultiPolygon
(1 row)



On Thu, Jan 29, 2009 at 12:18 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
> I can do an individual union of Mozambique and Zimbabwe without
> problems. Should I be seeing a topology exception?
>
> P
>
> On Thu, Jan 29, 2009 at 12:09 PM, Martin Davis <mbdavis@refractions.net> wrote:
>> When I look at the area of the reported TopologyException in OpenJUMP, I'm
>> seeing the following kinds of vertex values:
>>
>> Feature ID: 122
>> [   3:0:666] POINT (32.476230999999984 -21.321853999999973)
>> Feature ID: 222
>> [     0:144] POINT (32.476231 -21.321854)
>>
>> So the dataset is not actually 100% cleanly noded.  These kinds of small
>> discrepancies are exactly the kind of situation which used to cause
>> robustness errors in JTS.  This has pretty much been fixed by the addition
>> of the Geometry Snapping concept.  I think this made it into GEOS - but
>> perhaps there's a bug in it?
>>
>> It should be possible to narrow down the problem by finding the two
>> geometries which containing the problematic points and just working with
>> them.  (Mozambique and Zimbabwe)
>>
>>
>> Paul Ramsey wrote:
>>>
>>> Incidentally, the problem is not the invalid geometries. I first tried
>>> the union after "fixing" them with buffer(0), but I just now tried the
>>> union after deleting them, with the same result.
>>>
>>> aggtest=# delete from tm_world_2 where not st_isvalid(the_geom);
>>> NOTICE:  Ring Self-intersection at or near point -53.7564 48.5033
>>> NOTICE:  Ring Self-intersection at or near point -70.9172 -54.7086
>>> NOTICE:  Ring Self-intersection at or near point 5.33694 61.5928
>>> NOTICE:  Ring Self-intersection at or near point 143.662 49.3122
>>> DELETE 4
>>> aggtest=# select geometrytype(st_union(the_geom)) from tm_world_2;
>>> NOTICE:  TopologyException: found non-noded intersection between
>>> 32.4122 -21.2178, 32.4762 -21.3219 and 32.4762 -21.3219, 32.4122
>>> -21.2178 32.4756 -21.3208
>>> ERROR:  GEOS2POSTGIS returned an error
>>> aggtest=#
>>>
>>> P
>>>
>>> On Wed, Jan 28, 2009 at 1:49 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
>>>
>>>>
>>>> For anyone that needs a test geometry, here's Dane's input as a single
>>>> multipolygon:
>>>>
>>>> http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2
>>>>
>>>> On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
>>>> <hartmut.kaiser@gmail.com> wrote:
>>>>
>>>>>>
>>>>>> I just did a bit further testing of the new cascaded union goodness
>>>>>> via Shapely. See the linked email below:
>>>>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>>>>
>>>>>> Seems that I reached where a point that 'should never be reached' ?
>>>>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>>>>>> TRtree.cpp#L358
>>>>>>
>>>>>> I am new to looking at the geos code, so any pointers to help me test
>>>>>> more would be great.
>>>>>>
>>>>>
>>>>> Could you provide a minimal test I could use to reproduce this problem?
>>>>> Regards Hartmut
>>>>>
>>>>>
>>>>>>
>>>>>> Thanks!
>>>>>>
>>>>>> Dane
>>>>>>
>>>>>>
>>>>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>>>>
>>>>>>
>>>>>>>
>>>>>>> Paul,
>>>>>>>
>>>>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>>>>>> installs went perfectly.
>>>>>>>
>>>>>>> Just a few compiler warnings that I've pasted here:
>>>>>>>
>>>>>>
>>>>>> http://dpaste.com/hold/113736/
>>>>>>
>>>>>>>
>>>>>>> Dane
>>>>>>>
>>>>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>> This is a pre-warning to PSC members to download and test the first
>>>>>>>> 3.1 rc tarball:
>>>>>>>>
>>>>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>>>>
>>>>>>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>>>>>>> make a wider announcement for testing.
>>>>>>>>
>>>>>>>> Paul
>>>>>>>> _______________________________________________
>>>>>>>> geos-devel mailing list
>>>>>>>> geos-devel@lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> geos-devel mailing list
>>>>>>> geos-devel@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> geos-devel mailing list
>>>>>> geos-devel@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> geos-devel mailing list
>>>>> geos-devel@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>
>>>>>
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>
>>
>> --
>> Martin Davis
>> Senior Technical Architect
>> Refractions Research, Inc.
>> (250) 383-3022
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
From mbdavis at refractions.net  Thu Jan 29 15:39:21 2009
From: mbdavis at refractions.net (Martin Davis)
Date: Thu Jan 29 15:39:26 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <30fe546d0901291218k68d037b9v8c476e23caffdb48@mail.gmail.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>	<49807d76.16be600a.4d8d.3929@mx.google.com>	<30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>	<30fe546d0901281640x7af6f357y769eed2d8eaae9db@mail.gmail.com>	<49820CE7.7040804@refractions.net>
	<30fe546d0901291218k68d037b9v8c476e23caffdb48@mail.gmail.com>
Message-ID: <498213F9.2060800@refractions.net>

I would have expected so - so I'm puzzled.  No further ideas at the 
moment, I'm afraid.

Paul Ramsey wrote:
> I can do an individual union of Mozambique and Zimbabwe without
> problems. Should I be seeing a topology exception?
>
> P
>
> On Thu, Jan 29, 2009 at 12:09 PM, Martin Davis <mbdavis@refractions.net> wrote:
>   
>> When I look at the area of the reported TopologyException in OpenJUMP, I'm
>> seeing the following kinds of vertex values:
>>
>> Feature ID: 122
>> [   3:0:666] POINT (32.476230999999984 -21.321853999999973)
>> Feature ID: 222
>> [     0:144] POINT (32.476231 -21.321854)
>>
>> So the dataset is not actually 100% cleanly noded.  These kinds of small
>> discrepancies are exactly the kind of situation which used to cause
>> robustness errors in JTS.  This has pretty much been fixed by the addition
>> of the Geometry Snapping concept.  I think this made it into GEOS - but
>> perhaps there's a bug in it?
>>
>> It should be possible to narrow down the problem by finding the two
>> geometries which containing the problematic points and just working with
>> them.  (Mozambique and Zimbabwe)
>>
>>
>> Paul Ramsey wrote:
>>     
>>> Incidentally, the problem is not the invalid geometries. I first tried
>>> the union after "fixing" them with buffer(0), but I just now tried the
>>> union after deleting them, with the same result.
>>>
>>> aggtest=# delete from tm_world_2 where not st_isvalid(the_geom);
>>> NOTICE:  Ring Self-intersection at or near point -53.7564 48.5033
>>> NOTICE:  Ring Self-intersection at or near point -70.9172 -54.7086
>>> NOTICE:  Ring Self-intersection at or near point 5.33694 61.5928
>>> NOTICE:  Ring Self-intersection at or near point 143.662 49.3122
>>> DELETE 4
>>> aggtest=# select geometrytype(st_union(the_geom)) from tm_world_2;
>>> NOTICE:  TopologyException: found non-noded intersection between
>>> 32.4122 -21.2178, 32.4762 -21.3219 and 32.4762 -21.3219, 32.4122
>>> -21.2178 32.4756 -21.3208
>>> ERROR:  GEOS2POSTGIS returned an error
>>> aggtest=#
>>>
>>> P
>>>
>>> On Wed, Jan 28, 2009 at 1:49 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
>>>
>>>       
>>>> For anyone that needs a test geometry, here's Dane's input as a single
>>>> multipolygon:
>>>>
>>>> http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2
>>>>
>>>> On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
>>>> <hartmut.kaiser@gmail.com> wrote:
>>>>
>>>>         
>>>>>> I just did a bit further testing of the new cascaded union goodness
>>>>>> via Shapely. See the linked email below:
>>>>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>>>>
>>>>>> Seems that I reached where a point that 'should never be reached' ?
>>>>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>>>>>> TRtree.cpp#L358
>>>>>>
>>>>>> I am new to looking at the geos code, so any pointers to help me test
>>>>>> more would be great.
>>>>>>
>>>>>>             
>>>>> Could you provide a minimal test I could use to reproduce this problem?
>>>>> Regards Hartmut
>>>>>
>>>>>
>>>>>           
>>>>>> Thanks!
>>>>>>
>>>>>> Dane
>>>>>>
>>>>>>
>>>>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> Paul,
>>>>>>>
>>>>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and make
>>>>>>> installs went perfectly.
>>>>>>>
>>>>>>> Just a few compiler warnings that I've pasted here:
>>>>>>>
>>>>>>>               
>>>>>> http://dpaste.com/hold/113736/
>>>>>>
>>>>>>             
>>>>>>> Dane
>>>>>>>
>>>>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>>>> This is a pre-warning to PSC members to download and test the first
>>>>>>>> 3.1 rc tarball:
>>>>>>>>
>>>>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>>>>
>>>>>>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>>>>>>> make a wider announcement for testing.
>>>>>>>>
>>>>>>>> Paul
>>>>>>>> _______________________________________________
>>>>>>>> geos-devel mailing list
>>>>>>>> geos-devel@lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>>
>>>>>>>>                 
>>>>>>> _______________________________________________
>>>>>>> geos-devel mailing list
>>>>>>> geos-devel@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>
>>>>>>>               
>>>>>> _______________________________________________
>>>>>> geos-devel mailing list
>>>>>> geos-devel@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>
>>>>>>             
>>>>> _______________________________________________
>>>>> geos-devel mailing list
>>>>> geos-devel@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>
>>>>>
>>>>>           
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>
>>>       
>> --
>> Martin Davis
>> Senior Technical Architect
>> Refractions Research, Inc.
>> (250) 383-3022
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>     
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From sgillies at frii.com  Thu Jan 29 16:07:02 2009
From: sgillies at frii.com (Sean Gillies)
Date: Thu Jan 29 16:07:04 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <498213F9.2060800@refractions.net>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>	<49807d76.16be600a.4d8d.3929@mx.google.com>	<30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>	<30fe546d0901281640x7af6f357y769eed2d8eaae9db@mail.gmail.com>	<49820CE7.7040804@refractions.net>
	<30fe546d0901291218k68d037b9v8c476e23caffdb48@mail.gmail.com>
	<498213F9.2060800@refractions.net>
Message-ID: <A55F84BB-453F-41D8-A4C2-B20794846F24@frii.com>

Another data point: I found Dane's shapefile to contain 100 polygons  
and 145 multipolygons. I was able to cascade union a) the first  
collection of 100 polygons, and also b) the collection of 3238  
polygons exploded from the 145 multis. An attempt to cascade union  
everything (a + b) failed, as you're finding.

http://lists.gispython.org/pipermail/community/2009-January/001963.html

Sean

On Jan 29, 2009, at 1:39 PM, Martin Davis wrote:

> I would have expected so - so I'm puzzled.  No further ideas at the  
> moment, I'm afraid.
>
> Paul Ramsey wrote:
>> I can do an individual union of Mozambique and Zimbabwe without
>> problems. Should I be seeing a topology exception?
>>
>> P
>>
>> On Thu, Jan 29, 2009 at 12:09 PM, Martin Davis <mbdavis@refractions.net 
>> > wrote:
>>
>>> When I look at the area of the reported TopologyException in  
>>> OpenJUMP, I'm
>>> seeing the following kinds of vertex values:
>>>
>>> Feature ID: 122
>>> [   3:0:666] POINT (32.476230999999984 -21.321853999999973)
>>> Feature ID: 222
>>> [     0:144] POINT (32.476231 -21.321854)
>>>
>>> So the dataset is not actually 100% cleanly noded.  These kinds of  
>>> small
>>> discrepancies are exactly the kind of situation which used to cause
>>> robustness errors in JTS.  This has pretty much been fixed by the  
>>> addition
>>> of the Geometry Snapping concept.  I think this made it into GEOS  
>>> - but
>>> perhaps there's a bug in it?
>>>
>>> It should be possible to narrow down the problem by finding the two
>>> geometries which containing the problematic points and just  
>>> working with
>>> them.  (Mozambique and Zimbabwe)
>>>
>>>
>>> Paul Ramsey wrote:
>>>
>>>> Incidentally, the problem is not the invalid geometries. I first  
>>>> tried
>>>> the union after "fixing" them with buffer(0), but I just now  
>>>> tried the
>>>> union after deleting them, with the same result.
>>>>
>>>> aggtest=# delete from tm_world_2 where not st_isvalid(the_geom);
>>>> NOTICE:  Ring Self-intersection at or near point -53.7564 48.5033
>>>> NOTICE:  Ring Self-intersection at or near point -70.9172 -54.7086
>>>> NOTICE:  Ring Self-intersection at or near point 5.33694 61.5928
>>>> NOTICE:  Ring Self-intersection at or near point 143.662 49.3122
>>>> DELETE 4
>>>> aggtest=# select geometrytype(st_union(the_geom)) from tm_world_2;
>>>> NOTICE:  TopologyException: found non-noded intersection between
>>>> 32.4122 -21.2178, 32.4762 -21.3219 and 32.4762 -21.3219, 32.4122
>>>> -21.2178 32.4756 -21.3208
>>>> ERROR:  GEOS2POSTGIS returned an error
>>>> aggtest=#
>>>>
>>>> P
>>>>
>>>> On Wed, Jan 28, 2009 at 1:49 PM, Paul Ramsey  
>>>> <pramsey@opengeo.org> wrote:
>>>>
>>>>
>>>>> For anyone that needs a test geometry, here's Dane's input as a  
>>>>> single
>>>>> multipolygon:
>>>>>
>>>>> http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2
>>>>>
>>>>> On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
>>>>> <hartmut.kaiser@gmail.com> wrote:
>>>>>
>>>>>
>>>>>>> I just did a bit further testing of the new cascaded union  
>>>>>>> goodness
>>>>>>> via Shapely. See the linked email below:
>>>>>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>>>>>
>>>>>>> Seems that I reached where a point that 'should never be  
>>>>>>> reached' ?
>>>>>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>>>>>>> TRtree.cpp#L358
>>>>>>>
>>>>>>> I am new to looking at the geos code, so any pointers to help  
>>>>>>> me test
>>>>>>> more would be great.
>>>>>>>
>>>>>>>
>>>>>> Could you provide a minimal test I could use to reproduce this  
>>>>>> problem?
>>>>>> Regards Hartmut
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Thanks!
>>>>>>>
>>>>>>> Dane
>>>>>>>
>>>>>>>
>>>>>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Paul,
>>>>>>>>
>>>>>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make  
>>>>>>>> and make
>>>>>>>> installs went perfectly.
>>>>>>>>
>>>>>>>> Just a few compiler warnings that I've pasted here:
>>>>>>>>
>>>>>>>>
>>>>>>> http://dpaste.com/hold/113736/
>>>>>>>
>>>>>>>
>>>>>>>> Dane
>>>>>>>>
>>>>>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> This is a pre-warning to PSC members to download and test  
>>>>>>>>> the first
>>>>>>>>> 3.1 rc tarball:
>>>>>>>>>
>>>>>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>>>>>
>>>>>>>>> If I don't hear any howls of dismay over the next 24 hours,  
>>>>>>>>> I will
>>>>>>>>> make a wider announcement for testing.
>>>>>>>>>
>>>>>>>>> Paul
>>>>>>>>> _______________________________________________
>>>>>>>>> geos-devel mailing list
>>>>>>>>> geos-devel@lists.osgeo.org
>>>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>>>
>>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> geos-devel mailing list
>>>>>>>> geos-devel@lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>>
>>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> geos-devel mailing list
>>>>>>> geos-devel@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>
>>>>>>>
>>>>>> _______________________________________________
>>>>>> geos-devel mailing list
>>>>>> geos-devel@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>
>>>>>>
>>>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>>
>>>>
>>> --
>>> Martin Davis
>>> Senior Technical Architect
>>> Refractions Research, Inc.
>>> (250) 383-3022
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>
>
> -- 
> Martin Davis
> Senior Technical Architect
> Refractions Research, Inc.
> (250) 383-3022
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From pramsey at opengeo.org  Fri Jan 30 00:11:20 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Fri Jan 30 00:11:24 2009
Subject: [geos-devel] 3.1.0rc1
In-Reply-To: <A55F84BB-453F-41D8-A4C2-B20794846F24@frii.com>
References: <30fe546d0901271035t262bc223heb34e8c68976447e@mail.gmail.com>
	<73789A08-29C9-4C8E-B259-CBCBF9101AF1@hailmail.net>
	<E7926892-165A-4974-9AD9-A6FEAAF31A51@hailmail.net>
	<49807d76.16be600a.4d8d.3929@mx.google.com>
	<30fe546d0901281349h41f2bd70v97cbed15c0dde944@mail.gmail.com>
	<30fe546d0901281640x7af6f357y769eed2d8eaae9db@mail.gmail.com>
	<49820CE7.7040804@refractions.net>
	<30fe546d0901291218k68d037b9v8c476e23caffdb48@mail.gmail.com>
	<498213F9.2060800@refractions.net>
	<A55F84BB-453F-41D8-A4C2-B20794846F24@frii.com>
Message-ID: <30fe546d0901292111n67d70b3apa3b0e3e168602f1a@mail.gmail.com>

One more: Running the old aggregate union also fails,

aggtest=# select geometrytype(st_union_old(the_geom)) from tm_world;
NOTICE:  TopologyException: found non-noded intersection between
-89.142 17.8189, -89.142 17.8189 and -89.142 17.8189, -89.142 17.8189
-89.142 17.8189
ERROR:  GEOS union() threw an error!

But with a topology error in a different location. But, like the new
union, you can't re-produce the error by running standard union on the
pair of geometries at that location.

P.

On Thu, Jan 29, 2009 at 1:07 PM, Sean Gillies <sgillies@frii.com> wrote:
> Another data point: I found Dane's shapefile to contain 100 polygons and 145
> multipolygons. I was able to cascade union a) the first collection of 100
> polygons, and also b) the collection of 3238 polygons exploded from the 145
> multis. An attempt to cascade union everything (a + b) failed, as you're
> finding.
>
> http://lists.gispython.org/pipermail/community/2009-January/001963.html
>
> Sean
>
> On Jan 29, 2009, at 1:39 PM, Martin Davis wrote:
>
>> I would have expected so - so I'm puzzled.  No further ideas at the
>> moment, I'm afraid.
>>
>> Paul Ramsey wrote:
>>>
>>> I can do an individual union of Mozambique and Zimbabwe without
>>> problems. Should I be seeing a topology exception?
>>>
>>> P
>>>
>>> On Thu, Jan 29, 2009 at 12:09 PM, Martin Davis <mbdavis@refractions.net>
>>> wrote:
>>>
>>>> When I look at the area of the reported TopologyException in OpenJUMP,
>>>> I'm
>>>> seeing the following kinds of vertex values:
>>>>
>>>> Feature ID: 122
>>>> [   3:0:666] POINT (32.476230999999984 -21.321853999999973)
>>>> Feature ID: 222
>>>> [     0:144] POINT (32.476231 -21.321854)
>>>>
>>>> So the dataset is not actually 100% cleanly noded.  These kinds of small
>>>> discrepancies are exactly the kind of situation which used to cause
>>>> robustness errors in JTS.  This has pretty much been fixed by the
>>>> addition
>>>> of the Geometry Snapping concept.  I think this made it into GEOS - but
>>>> perhaps there's a bug in it?
>>>>
>>>> It should be possible to narrow down the problem by finding the two
>>>> geometries which containing the problematic points and just working with
>>>> them.  (Mozambique and Zimbabwe)
>>>>
>>>>
>>>> Paul Ramsey wrote:
>>>>
>>>>> Incidentally, the problem is not the invalid geometries. I first tried
>>>>> the union after "fixing" them with buffer(0), but I just now tried the
>>>>> union after deleting them, with the same result.
>>>>>
>>>>> aggtest=# delete from tm_world_2 where not st_isvalid(the_geom);
>>>>> NOTICE:  Ring Self-intersection at or near point -53.7564 48.5033
>>>>> NOTICE:  Ring Self-intersection at or near point -70.9172 -54.7086
>>>>> NOTICE:  Ring Self-intersection at or near point 5.33694 61.5928
>>>>> NOTICE:  Ring Self-intersection at or near point 143.662 49.3122
>>>>> DELETE 4
>>>>> aggtest=# select geometrytype(st_union(the_geom)) from tm_world_2;
>>>>> NOTICE:  TopologyException: found non-noded intersection between
>>>>> 32.4122 -21.2178, 32.4762 -21.3219 and 32.4762 -21.3219, 32.4122
>>>>> -21.2178 32.4756 -21.3208
>>>>> ERROR:  GEOS2POSTGIS returned an error
>>>>> aggtest=#
>>>>>
>>>>> P
>>>>>
>>>>> On Wed, Jan 28, 2009 at 1:49 PM, Paul Ramsey <pramsey@opengeo.org>
>>>>> wrote:
>>>>>
>>>>>
>>>>>> For anyone that needs a test geometry, here's Dane's input as a single
>>>>>> multipolygon:
>>>>>>
>>>>>> http://cleverelephant.dyndns.org/~pramsey/bigmulti.txt.bz2
>>>>>>
>>>>>> On Wed, Jan 28, 2009 at 7:44 AM, Hartmut Kaiser
>>>>>> <hartmut.kaiser@gmail.com> wrote:
>>>>>>
>>>>>>
>>>>>>>> I just did a bit further testing of the new cascaded union goodness
>>>>>>>> via Shapely. See the linked email below:
>>>>>>>>
>>>>>>>> http://lists.gispython.org/pipermail/community/2009-January/001960.html
>>>>>>>>
>>>>>>>> Seems that I reached where a point that 'should never be reached' ?
>>>>>>>>
>>>>>>>> http://trac.osgeo.org/geos/browser/trunk/source/index/strtree/AbstractS
>>>>>>>> TRtree.cpp#L358
>>>>>>>>
>>>>>>>> I am new to looking at the geos code, so any pointers to help me
>>>>>>>> test
>>>>>>>> more would be great.
>>>>>>>>
>>>>>>>>
>>>>>>> Could you provide a minimal test I could use to reproduce this
>>>>>>> problem?
>>>>>>> Regards Hartmut
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Thanks!
>>>>>>>>
>>>>>>>> Dane
>>>>>>>>
>>>>>>>>
>>>>>>>> On Jan 27, 2009, at 9:02 PM, Dane Springmeyer wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> Paul,
>>>>>>>>>
>>>>>>>>> I tested on mac 10.5 and ubuntu 8.10 and all configure;make and
>>>>>>>>> make
>>>>>>>>> installs went perfectly.
>>>>>>>>>
>>>>>>>>> Just a few compiler warnings that I've pasted here:
>>>>>>>>>
>>>>>>>>>
>>>>>>>> http://dpaste.com/hold/113736/
>>>>>>>>
>>>>>>>>
>>>>>>>>> Dane
>>>>>>>>>
>>>>>>>>> On Jan 27, 2009, at 10:35 AM, Paul Ramsey wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> This is a pre-warning to PSC members to download and test the
>>>>>>>>>> first
>>>>>>>>>> 3.1 rc tarball:
>>>>>>>>>>
>>>>>>>>>> http://download.osgeo.org/geos/geos-3.1.0rc1.tar.bz2
>>>>>>>>>>
>>>>>>>>>> If I don't hear any howls of dismay over the next 24 hours, I will
>>>>>>>>>> make a wider announcement for testing.
>>>>>>>>>>
>>>>>>>>>> Paul
>>>>>>>>>> _______________________________________________
>>>>>>>>>> geos-devel mailing list
>>>>>>>>>> geos-devel@lists.osgeo.org
>>>>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> geos-devel mailing list
>>>>>>>>> geos-devel@lists.osgeo.org
>>>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>>>
>>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> geos-devel mailing list
>>>>>>>> geos-devel@lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>>
>>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> geos-devel mailing list
>>>>>>> geos-devel@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> _______________________________________________
>>>>> geos-devel mailing list
>>>>> geos-devel@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>>
>>>>>
>>>>>
>>>> --
>>>> Martin Davis
>>>> Senior Technical Architect
>>>> Refractions Research, Inc.
>>>> (250) 383-3022
>>>>
>>>> _______________________________________________
>>>> geos-devel mailing list
>>>> geos-devel@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>>
>>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>>
>>
>> --
>> Martin Davis
>> Senior Technical Architect
>> Refractions Research, Inc.
>> (250) 383-3022
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From geos-trac at osgeo.org  Fri Jan 30 05:29:53 2009
From: geos-trac at osgeo.org (GEOS)
Date: Fri Jan 30 05:29:54 2009
Subject: [geos-devel] [GEOS] #227: Deleting 'void*' is undefined in
 IntervalRTreeLeafNode class.
Message-ID: <047.1cc49bb88966caacad4fa2e8456f2748@osgeo.org>

#227: Deleting 'void*' is undefined in IntervalRTreeLeafNode class.
-------------------------+--------------------------------------------------
 Reporter:  mloskot      |       Owner:  geos-devel@lists.osgeo.org
     Type:  defect       |      Status:  new                       
 Priority:  major        |   Milestone:                            
Component:  Core         |     Version:  svn-trunk                 
 Severity:  Significant  |    Keywords:  void                      
-------------------------+--------------------------------------------------
 According to section 5.3.5/3 of C++ Standard, there is undefined behavior
 in
 [source:trunk/source/headers/geos/index/intervalrtree/IntervalRTreeLeafNode.h@2263#L50
 IntervalRTreeLeafNode destructor] (line 50) because
 [source:trunk/source/headers/geos/index/intervalrtree/IntervalRTreeLeafNode.h@2263#L39
 item] (line 39) is a pointer of type void.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/227>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Fri Jan 30 11:11:38 2009
From: geos-trac at osgeo.org (GEOS)
Date: Fri Jan 30 11:11:39 2009
Subject: [geos-devel] Re: [GEOS] #227: Deleting 'void*' is undefined in
 IntervalRTreeLeafNode class.
In-Reply-To: <047.1cc49bb88966caacad4fa2e8456f2748@osgeo.org>
References: <047.1cc49bb88966caacad4fa2e8456f2748@osgeo.org>
Message-ID: <056.1804682dadd8630a7600819130ce5630@osgeo.org>

#227: Deleting 'void*' is undefined in IntervalRTreeLeafNode class.
-------------------------+--------------------------------------------------
 Reporter:  mloskot      |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect       |       Status:  new                       
 Priority:  major        |    Milestone:                            
Component:  Core         |      Version:  svn-trunk                 
 Severity:  Significant  |   Resolution:                            
 Keywords:  void         |  
-------------------------+--------------------------------------------------
Comment (by mloskot):

 A little irc discussion with Sandro about this issue from Jan 30, 2009:
 {{{
 <strk> deleting void* ?
 <mloskot> in general, it's trivial to fix - tricky part ->  as long as we
 know base type of the item
 <strk> we never know
 <mloskot> why?
 <strk> you'll have to define a base class just for that
 <strk> and have the actual items subclass it
 <strk> by either multiple-inheritance or wrapping
 <mloskot> what about inserting through a wrapper instead of plain void*?
 <strk> what I said, a wrapper (an abstract base)
 <mloskot> I'd need to think, but for now simplest is to add a thin empty
 base class.
 <strk> yeah, I'd go there
 <mloskot> perhaps we could have a common base class template to all geos
 objects and they we could specialize it with some traits
 <mloskot> like flags
 <strk> I'd rather find "local" solutions
 <strk> or you could end up walking on a looong road, and full of perils
 <mloskot> like
 <mloskot> class polygon : public geos::traits<geos::indexable>
 <mloskot> similar to boost.operators
 <mloskot> later on
 <mloskot> class envelope : public geos::traits<geos::indexable,
 geos::addable>
 <mloskot> etc.
 <strk> eh
 <strk> and bringing all contributors up in the learning curve
 <strk> to even *read* that :)
 <strk> there aren't many void pointers around atm right?
 <mloskot> you mean reading the templatized thing?
 <strk> it would change the semantic of everything, won't it?
 <strk> or, maybe not
 <strk> but the user can't just rely on those added fields to be available
 can it?
 <strk> or does the traits trick ensure a given layout in the virtual table
 ?
 <mloskot> it's only or as many as change of type(s)
 <mloskot> anyway, i don't like void* item ;-)
 <strk> me neither
 <strk> as I said, I'd take an abstract base pointer
 <strk> and move the problem elsewhere
 <strk> local-base class
 <strk> you'd then adapt, wrap or inherit for use
 <mloskot> we have everything polymorphic anyway, so one more abstract type
 wouldn't change much for the performance, or complexity
 <strk> right
 <strk> I think I used thi trick elsewhere in geos codebase (not sure
 though)
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/227#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From pramsey at opengeo.org  Fri Jan 30 15:18:47 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Fri Jan 30 15:18:50 2009
Subject: [geos-devel] 3.1.0rc2
Message-ID: <C10B9954-4F28-471D-885D-D92A2E5DB254@opengeo.org>

I've placed RC2 on the download site, with Matz changes and the  
removal of stoopid debugging noise in the last one.

http://download.osgeo.org/geos/geos-3.1.0rc2.tar.bz2

PSC, if you don't howl about this one, I'm going to make the link  
public on Monday morning.

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS is Love.

From sgillies at frii.com  Fri Jan 30 16:52:43 2009
From: sgillies at frii.com (Sean Gillies)
Date: Fri Jan 30 16:52:47 2009
Subject: [geos-devel] 3.1.0rc2
In-Reply-To: <C10B9954-4F28-471D-885D-D92A2E5DB254@opengeo.org>
References: <C10B9954-4F28-471D-885D-D92A2E5DB254@opengeo.org>
Message-ID: <38D2E64B-8056-4245-8BEA-427FDCDCA2F0@frii.com>

Fine here. That cascaded union problem remains.

On Jan 30, 2009, at 1:18 PM, Paul Ramsey wrote:

> I've placed RC2 on the download site, with Matz changes and the  
> removal of stoopid debugging noise in the last one.
>
> http://download.osgeo.org/geos/geos-3.1.0rc2.tar.bz2
>
> PSC, if you don't howl about this one, I'm going to make the link  
> public on Monday morning.
>
> --
> Paul Ramsey
> OpenGeo - http://opengeo.org
> PostGIS is Love.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel



--
Sean Gillies
sean.gillies@gmail.com
http://sgillies.net

From pramsey at cleverelephant.ca  Fri Jan 30 17:50:49 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Fri Jan 30 17:50:55 2009
Subject: [geos-devel] 3.1.0rc2
In-Reply-To: <38D2E64B-8056-4245-8BEA-427FDCDCA2F0@frii.com>
References: <C10B9954-4F28-471D-885D-D92A2E5DB254@opengeo.org>
	<38D2E64B-8056-4245-8BEA-427FDCDCA2F0@frii.com>
Message-ID: <1A5A3D60-1F73-407F-AB58-6B03BACD37BB@cleverelephant.ca>

The union bug seems to be longstanding. The old process also failed.  
It is a mystery to me why we can't produce pairwise failures though.

P

On 30-Jan-09, at 1:52 PM, Sean Gillies <sgillies@frii.com> wrote:

> Fine here. That cascaded union problem remains.
>
> On Jan 30, 2009, at 1:18 PM, Paul Ramsey wrote:
>
>> I've placed RC2 on the download site, with Matz changes and the  
>> removal of stoopid debugging noise in the last one.
>>
>> http://download.osgeo.org/geos/geos-3.1.0rc2.tar.bz2
>>
>> PSC, if you don't howl about this one, I'm going to make the link  
>> public on Monday morning.
>>
>> --
>> Paul Ramsey
>> OpenGeo - http://opengeo.org
>> PostGIS is Love.
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>
> --
> Sean Gillies
> sean.gillies@gmail.com
> http://sgillies.net
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
From hartmut.kaiser at gmail.com  Fri Jan 30 18:35:09 2009
From: hartmut.kaiser at gmail.com (Hartmut Kaiser)
Date: Fri Jan 30 18:35:16 2009
Subject: [geos-devel] 3.1.0rc2
In-Reply-To: <1A5A3D60-1F73-407F-AB58-6B03BACD37BB@cleverelephant.ca>
References: <C10B9954-4F28-471D-885D-D92A2E5DB254@opengeo.org>	<38D2E64B-8056-4245-8BEA-427FDCDCA2F0@frii.com>
	<1A5A3D60-1F73-407F-AB58-6B03BACD37BB@cleverelephant.ca>
Message-ID: <49838eb2.e203be0a.70ee.ffffeb08@mx.google.com>

> The union bug seems to be longstanding. The old process also failed.
> It is a mystery to me why we can't produce pairwise failures though.

It might be, that you're seeing an error from unioning geometries being
intermediary results from preceding union operations. The cascaded union
algorithm doesn't 'grow' the result sequentially, but builds several
sub-geometries based on proximity criteria of the initial geometries and
'grows' those. As a result the sequence of pair-wise union operations is
completely different from the na?ve union algorithm.

Regards Hartmut

> 
> P
> 
> On 30-Jan-09, at 1:52 PM, Sean Gillies <sgillies@frii.com> wrote:
> 
> > Fine here. That cascaded union problem remains.
> >
> > On Jan 30, 2009, at 1:18 PM, Paul Ramsey wrote:
> >
> >> I've placed RC2 on the download site, with Matz changes and the
> >> removal of stoopid debugging noise in the last one.
> >>
> >> http://download.osgeo.org/geos/geos-3.1.0rc2.tar.bz2
> >>
> >> PSC, if you don't howl about this one, I'm going to make the link
> >> public on Monday morning.
> >>
> >> --
> >> Paul Ramsey
> >> OpenGeo - http://opengeo.org
> >> PostGIS is Love.
> >>
> >> _______________________________________________
> >> geos-devel mailing list
> >> geos-devel@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> >
> >
> > --
> > Sean Gillies
> > sean.gillies@gmail.com
> > http://sgillies.net
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From robe.dnd at cityofboston.gov  Fri Jan 30 20:00:20 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Fri Jan 30 20:04:43 2009
Subject: [geos-devel] 3.1.0rc2
References: <C10B9954-4F28-471D-885D-D92A2E5DB254@opengeo.org>	<38D2E64B-8056-4245-8BEA-427FDCDCA2F0@frii.com>
	<1A5A3D60-1F73-407F-AB58-6B03BACD37BB@cleverelephant.ca>
	<49838eb2.e203be0a.70ee.ffffeb08@mx.google.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F13B@ZDND.DND.boston.cob>

This is just an observation.  I've seen a lot of these type failures in my garden tests and just ignored them.

This for example happens often if you in PostGIS create a MULTIPOLYGON by collecting valid polygons that happen to intersect in some way 
and then pass this to ST_Union. Those are invalid anyway so of course its not that big of a surprise they fail.

I'm just wandering if maybe as part of intermediary process, the union algorithm is creating such invalid multipolygons

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of Hartmut Kaiser
Sent: Fri 1/30/2009 6:35 PM
To: 'GEOS Development List'
Subject: RE: [geos-devel] 3.1.0rc2
 
 The union bug seems to be longstanding. The old process also failed.
 It is a mystery to me why we can't produce pairwise failures though.

 It might be, that you're seeing an error from unioning geometries being
 intermediary results from preceding union operations. The cascaded union
algorithm doesn't 'grow' the result sequentially, but builds several
sub-geometries based on proximity criteria of the initial geometries and
'grows' those. As a result the sequence of pair-wise union operations is
completely different from the na?ve union algorithm.

Regards Hartmut

> 
> P
> 
> On 30-Jan-09, at 1:52 PM, Sean Gillies <sgillies@frii.com> wrote:
> 
> > Fine here. That cascaded union problem remains.
> >
> > On Jan 30, 2009, at 1:18 PM, Paul Ramsey wrote:
> >
> >> I've placed RC2 on the download site, with Matz changes and the
> >> removal of stoopid debugging noise in the last one.
> >>
> >> http://download.osgeo.org/geos/geos-3.1.0rc2.tar.bz2
> >>
> >> PSC, if you don't howl about this one, I'm going to make the link
> >> public on Monday morning.
> >>
> >> --
> >> Paul Ramsey
> >> OpenGeo - http://opengeo.org
> >> PostGIS is Love.
> >>
> >> _______________________________________________
> >> geos-devel mailing list
> >> geos-devel@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
> >
> >
> > --
> > Sean Gillies
> > sean.gillies@gmail.com
> > http://sgillies.net
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel




-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090130/d8fa7993/attachment.html
