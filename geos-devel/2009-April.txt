From bicealyh at gmail.com  Wed Apr  1 23:24:30 2009
From: bicealyh at gmail.com (LiN YongHeng)
Date: Wed Apr  1 23:24:32 2009
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 1
In-Reply-To: <20090401160137.65A82E01B35@lists.osgeo.org>
References: <20090401160137.65A82E01B35@lists.osgeo.org>
Message-ID: <11e4f1140904012024t1af77286nab3311df1b093753@mail.gmail.com>

Hi anybody,
I know that. I give the example just want to say that  WKBWriter output is
the same with WKTWriter, not having the SRID.But if I use the below codes,
it can contains the SRID.
---------------------------------------CODES-------------------------------------
 pWriter = GEOSWKBWriter_create();
 GEOSWKBWriter_setIncludeSRID(pWriter ,srid); /*write          SRID in the
GEOSWKBWriter*/
pWKB = GEOSWKBWriter_write(pWriter , g3, &size);
--------------------------------------------CODE-------------------------------
Now, pWKB  have the SRID!
I look at the GEOS source codes, find that the problem is just like below
code I have note.
void
WKBWriter::writeSRID(int SRID)
{
        if (includeSRID && SRID != 0)  /*The problem is here*/
          writeInt(SRID);
}
If I don't give the SRID number to the WKBWriter, it always have zero number
and can't past the if condition.

Best regards,

2009/4/2 <geos-devel-request@lists.osgeo.org>

> Send geos-devel mailing list submissions to
>        geos-devel@lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://lists.osgeo.org/mailman/listinfo/geos-devel
> or, via email, send a message with subject or body 'help' to
>        geos-devel-request@lists.osgeo.org
>
> You can reach the person managing the list at
>        geos-devel-owner@lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of geos-devel digest..."
>
>
> Today's Topics:
>
>   1. Re: Question (Paul Ramsey)
>   2. Re: Question (Paul Ramsey)
>   3. Re: Question (LiN YongHeng)
>   4. Re: Question (Frank Warmerdam)
>   5. Re: Question (Frank Warmerdam)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Tue, 31 Mar 2009 18:09:20 -0700
> From: Paul Ramsey <pramsey@opengeo.org>
> Subject: Re: [geos-devel] Question
> To: LiN YongHeng <bicealyh@gmail.com>
> Cc: geos-devel@lists.osgeo.org
> Message-ID: <791C9529-32B0-416F-B03C-EC9DB8B36439@opengeo.org>
> Content-Type: text/plain; charset="us-ascii"
>
>
> There's no way right now. You could do a little work on your client
> side, and pull both the WKT and the SRID, then concatenate them into
> an output string with 'SRID=9999;...' just like your input. In the
> longer run, we could add EWKT and EWKB outputs. :/
>
> P
>
> On 31-Mar-09, at 6:07 PM, LiN YongHeng wrote:
>
> > hello Paul Ramsey and anyone,
> > The function GEOSGeomToWKB_buf() doesn't include the SRID. if I want
> > to output encodings that embed the srid, how
> > can I do?
> >
> > 2009/3/31 Paul Ramsey <pramsey@opengeo.org>
> > To clarify: your first representation is nonstandard:
> >
> >  SRID=5001;POINT(44 31)
> >
> > GEOS will accept it, but it won't emit it. If you print out
> >
> >  GEOSGeomToWKT(g1)
> >
> > you will see the standard representation
> >
> >  POINT(44 31)
> >
> > which you'll note doesn't include the SRID.
> >
> > It doesn't actually look like we support output encodings that embed
> > the srid... odd.
> >
> > P
> >
> > On Tue, Mar 31, 2009 at 8:42 AM, strk <strk@keybit.net> wrote:
> > > On Tue, Mar 31, 2009 at 11:24:50PM +0800, LiN YongHeng wrote:
> > >> hello everyone, Please look these code:
> > >> GEOSGeom g1, g2;
> > >> g1 = GEOSGeomFromWKT("SRID=5001;POINT(44 31)");
> > >> g1srid = GEOSGetSRID(g1);
> > >> g2 = GEOSGeomFromWKT(GEOSGeomToWKT(g1));
> > >> g2srid= GEOSGetSRID(g2);
> > >> g2srid not have the same value with g1srid, which g1srid value is
> > 5001 and
> > >> g2srid is -1. My GEOS version is "3.1.0". I don't know why? Can
> > anyone give
> > >> me answer
> > >
> > > The WKT standard doesn't include a SRID specification,
> > > so GEOSGeomToWKT won't get it. Still GEOSGeomFromWKT
> > > accepts that.
> > >
> > > --strk;
> > >
> > >  Free GIS & Flash consultant/developer      ()  ASCII Ribbon
> > Campaign
> > >  http://foo.keybit.net/~strk/services.html  /\  Keep it simple!
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >
> >
>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090331/e0866f02/attachment-0001.html
>
> ------------------------------
>
> Message: 2
> Date: Tue, 31 Mar 2009 18:09:48 -0700
> From: Paul Ramsey <pramsey@opengeo.org>
> Subject: Re: [geos-devel] Question
> To: LiN YongHeng <bicealyh@gmail.com>
> Cc: geos-devel@lists.osgeo.org
> Message-ID: <8D10AAE4-DA8D-4204-B173-8A543C1AA1D5@opengeo.org>
> Content-Type: text/plain; charset="us-ascii"
>
> And if you want to submit patches for EWKT and EWKB outputs, we'd love
> to see them.
>
> P
>
> On 31-Mar-09, at 6:07 PM, LiN YongHeng wrote:
>
> > hello Paul Ramsey and anyone,
> > The function GEOSGeomToWKB_buf() doesn't include the SRID. if I want
> > to output encodings that embed the srid, how
> > can I do?
> >
> > 2009/3/31 Paul Ramsey <pramsey@opengeo.org>
> > To clarify: your first representation is nonstandard:
> >
> >  SRID=5001;POINT(44 31)
> >
> > GEOS will accept it, but it won't emit it. If you print out
> >
> >  GEOSGeomToWKT(g1)
> >
> > you will see the standard representation
> >
> >  POINT(44 31)
> >
> > which you'll note doesn't include the SRID.
> >
> > It doesn't actually look like we support output encodings that embed
> > the srid... odd.
> >
> > P
> >
> > On Tue, Mar 31, 2009 at 8:42 AM, strk <strk@keybit.net> wrote:
> > > On Tue, Mar 31, 2009 at 11:24:50PM +0800, LiN YongHeng wrote:
> > >> hello everyone, Please look these code:
> > >> GEOSGeom g1, g2;
> > >> g1 = GEOSGeomFromWKT("SRID=5001;POINT(44 31)");
> > >> g1srid = GEOSGetSRID(g1);
> > >> g2 = GEOSGeomFromWKT(GEOSGeomToWKT(g1));
> > >> g2srid= GEOSGetSRID(g2);
> > >> g2srid not have the same value with g1srid, which g1srid value is
> > 5001 and
> > >> g2srid is -1. My GEOS version is "3.1.0". I don't know why? Can
> > anyone give
> > >> me answer
> > >
> > > The WKT standard doesn't include a SRID specification,
> > > so GEOSGeomToWKT won't get it. Still GEOSGeomFromWKT
> > > accepts that.
> > >
> > > --strk;
> > >
> > >  Free GIS & Flash consultant/developer      ()  ASCII Ribbon
> > Campaign
> > >  http://foo.keybit.net/~strk/services.html  /\  Keep it simple!
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >
> >
>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090331/749591cb/attachment-0001.html
>
> ------------------------------
>
> Message: 3
> Date: Wed, 1 Apr 2009 11:18:54 +0800
> From: LiN YongHeng <bicealyh@gmail.com>
> Subject: Re: [geos-devel] Question
> To: geos-devel@geos.refractions.net
> Message-ID:
>        <11e4f1140903312018u5d6c9461t781500e86acac6fd@mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> hello anybody ,
> I have seen the source code, which have writen the SRID, just like below
> codes.  Why don't you say that the output not  contain
> the SRID? but the fact that the output don't contain the SRID, so
> I really puzzle about  this.
> -------------------------------Source
> Code---------------------------------------
> void
> WKBWriter::writePolygon(const Polygon &g)
> {
>  writeByteOrder();
>
>  writeGeometryType(WKBConstants::wkbPolygon, g.getSRID());
>  writeSRID(g.getSRID());
>
>  int nholes = g.getNumInteriorRing();
>  writeInt(nholes+1);
>  const LineString* ls = g.getExteriorRing();
>  assert(ls);
>  const CoordinateSequence* cs=ls->getCoordinatesRO();
>  assert(cs);
>  writeCoordinateSequence(*cs, true);
>  for (int i=0; i<nholes; i++)
>  {
>  ls = g.getInteriorRingN(i);
>  assert(ls);
>  cs = ls->getCoordinatesRO();
>  assert(cs);
>  writeCoordinateSequence(*cs, true);
>  }
> }
> -------------------------------Source
> Code---------------------------------------
> 2009/3/31 strk <strk@keybit.net>
>
> > On Tue, Mar 31, 2009 at 11:24:50PM +0800, LiN YongHeng wrote:
> > > hello everyone, Please look these code:
> > > GEOSGeom g1, g2;
> > > g1 = GEOSGeomFromWKT("SRID=5001;POINT(44 31)");
> > > g1srid = GEOSGetSRID(g1);
> > > g2 = GEOSGeomFromWKT(GEOSGeomToWKT(g1));
> > > g2srid= GEOSGetSRID(g2);
> > > g2srid not have the same value with g1srid, which g1srid value is 5001
> > and
> > > g2srid is -1. My GEOS version is "3.1.0". I don't know why? Can anyone
> > give
> > > me answer
> >
> > The WKT standard doesn't include a SRID specification,
> > so GEOSGeomToWKT won't get it. Still GEOSGeomFromWKT
> > accepts that.
> >
> > --strk;
> >
> >  Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
> >  http://foo.keybit.net/~strk/services.html  /\  Keep it simple!
> >
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090401/d68061cd/attachment-0001.html
>
> ------------------------------
>
> Message: 4
> Date: Tue, 31 Mar 2009 23:44:27 -0400
> From: Frank Warmerdam <warmerdam@pobox.com>
> Subject: Re: [geos-devel] Question
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Cc: geos-devel@geos.refractions.net
> Message-ID: <49D2E31B.90109@pobox.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> LiN YongHeng wrote:
> > hello anybody ,
> > I have seen the source code, which have writen the SRID, just like below
> > codes.  Why don't you say that the output not  contain
> > the SRID? but the fact that the output don't contain the SRID, so
> > I really puzzle about  this.
> > -------------------------------Source
> > Code---------------------------------------
> > void
> > WKBWriter::writePolygon(const Polygon &g)
> > {
> >  writeByteOrder();
> >
> >  writeGeometryType(WKBConstants::wkbPolygon, g.getSRID());
> >  writeSRID(g.getSRID());
>
> LiN,
>
> This is the WKB writer, not the WKT writer.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>
> ------------------------------
>
> Message: 5
> Date: Tue, 31 Mar 2009 23:44:27 -0400
> From: Frank Warmerdam <warmerdam@pobox.com>
> Subject: Re: [geos-devel] Question
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Cc: geos-devel@geos.refractions.net
> Message-ID: <49D2E31B.90109@pobox.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> LiN YongHeng wrote:
> > hello anybody ,
> > I have seen the source code, which have writen the SRID, just like below
> > codes.  Why don't you say that the output not  contain
> > the SRID? but the fact that the output don't contain the SRID, so
> > I really puzzle about  this.
> > -------------------------------Source
> > Code---------------------------------------
> > void
> > WKBWriter::writePolygon(const Polygon &g)
> > {
> >  writeByteOrder();
> >
> >  writeGeometryType(WKBConstants::wkbPolygon, g.getSRID());
> >  writeSRID(g.getSRID());
>
> LiN,
>
> This is the WKB writer, not the WKT writer.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>
> ------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> End of geos-devel Digest, Vol 78, Issue 1
> *****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090402/d645ce77/attachment-0001.html
From ragi at burhum.com  Thu Apr  2 19:44:48 2009
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Thu Apr  2 19:44:51 2009
Subject: [geos-devel] Re: geos-devel Digest, Vol 77, Issue 17
In-Reply-To: <20090320160020.120D3E018D3@lists.osgeo.org>
References: <20090320160020.120D3E018D3@lists.osgeo.org>
Message-ID: <738927440904021644k76715d5cjcbb35a07772e1b62@mail.gmail.com>

On Fri, Mar 20, 2009 at 9:00 AM, <geos-devel-request@lists.osgeo.org> wrote:

> Date: Fri, 20 Mar 2009 09:59:23 +0100
> From: J?rgen E. Fischer <jef@norbit.de>
> Subject: Re: [geos-devel] Using the GEOS C++ interface on Windows
>        (Visual Studio)
> To: geos-devel@lists.osgeo.org
> Message-ID: <20090320085923.GA15394@norbit.de>
> Content-Type: text/plain; charset=iso-8859-1
>
> Hi Ragi,
>
> On Thu, 19. Mar 2009 at 13:23:23 -0700, Ragi Y. Burhum wrote:
> > For about six months now, we (the company I am working for) have been
> > using the GEOS C++ API on Linux and Mac platforms without a problem
> > for an application we are writing. Last week, we started porting that
> > application to Windows (Visual Studio IDE) and when it came down to
> > linking I realized that only the GEOS C API had the GEOS_DLL contructs
> > to export the symbols.
>
> I've run into this in the past too.  I seems that's intentional as C++
> ABI are everything but stable on Windows - you need to compile the C++
> DLL with the same compiler that you plan to use it with to be able to
> use it reliably.  But that kind of ruins the point of DLLs.  C-APIs
> don't have that problem.
>
>
> J?rgen
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden
> http://www.norbit.de
>
> --
> norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
> Rheinstrasse 13, 26506 Norden
> GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502
>
>
>
For those of you that were interested in the GEOS VS studio C++ project with
the dll export symbols on all the classes. I put it up at this link
http://www.mv360.com.mx/~rburhum/geos/ hopefully someone will merge it with
trunk so that I don't have to redo the changes for every release :)

If there are any comments, questions, about the code changes feel free to
contact me.

J?rgen, I would be interested on finding out what kind of problems you have
run into when using GEOS C++ on Windows. So far, I have had good success and
haven't really faced any issues...

Thanks,

- Ragi Burhum
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090402/15bc3e3a/attachment.html
From strk at keybit.net  Tue Apr  7 05:31:04 2009
From: strk at keybit.net (strk)
Date: Tue Apr  7 05:31:37 2009
Subject: [geos-devel] geos_ts_c.cpp warning
Message-ID: <20090407093104.GG52753@keybit.net>

FYI: this is the only warning I get building GEOS trunk:

geos_ts_c.cpp:2132: warning: comparison between signed and unsigned integer expressions

--strk;

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From mateusz at loskot.net  Tue Apr  7 06:10:42 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr  7 06:10:32 2009
Subject: [geos-devel] Visual C++ project maintenance
Message-ID: <49DB26A2.5020602@loskot.net>

Folks,

I'm going to drop maintenance of Visual C++ build configurations
available in form of solution/projects from build/msvc80
and build/msvc90.

As I'm the author of these extra modules, should I remove them or
leave them where they are? Similarly, what should I do with build/bjam?

If there is anyone interested, feel free to take over maintenance
of these projects.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From mateusz at loskot.net  Tue Apr  7 07:02:33 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr  7 07:02:22 2009
Subject: [geos-devel] geos_ts_c.cpp warning
In-Reply-To: <20090407093104.GG52753@keybit.net>
References: <20090407093104.GG52753@keybit.net>
Message-ID: <49DB32C9.1080001@loskot.net>

strk wrote:
> FYI: this is the only warning I get building GEOS trunk:
> 
> geos_ts_c.cpp:2132: warning: comparison between signed and unsigned
> integer expressions

FYI, GEOS full build using Visual C++ 9.0 gives nearly 500 warnings.
Some of them are pretty serious, see my tickets on Trac.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From strk at keybit.net  Tue Apr  7 08:38:29 2009
From: strk at keybit.net (strk)
Date: Tue Apr  7 08:39:36 2009
Subject: [geos-devel] JTS-1.9 Buffer enhancement to be ported
Message-ID: <20090407123829.GI52753@keybit.net>

FYI, Safe Software funded me for porting enhancement in Buffer
and Valid operation from JTS-1.9 to GEOS.

I'm at work already. Thanks Safe.

--strk; 

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From cfis at savagexi.com  Tue Apr  7 11:56:31 2009
From: cfis at savagexi.com (Charlie Savage)
Date: Tue Apr  7 11:56:36 2009
Subject: [geos-devel] Visual C++ project maintenance
In-Reply-To: <49DB26A2.5020602@loskot.net>
References: <49DB26A2.5020602@loskot.net>
Message-ID: <49DB77AF.3090505@savagexi.com>

Hi Mateusz,

> I'm going to drop maintenance of Visual C++ build configurations
> available in form of solution/projects from build/msvc80
> and build/msvc90.
> 
> As I'm the author of these extra modules, should I remove them or
> leave them where they are? Similarly, what should I do with build/bjam?

I'd like them to be left where they are since I find them quite useful.

Thanks,

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090407/06ac8f4f/smime.bin
From strk at keybit.net  Tue Apr  7 12:58:13 2009
From: strk at keybit.net (strk)
Date: Tue Apr  7 12:59:21 2009
Subject: [geos-devel] SegmentString to become an abstract class
Message-ID: <20090407165813.GN52753@keybit.net>

One of the changes introduced in JTS-1.9 is that SegmentString
became an abstract class (from a concrete one).

I feel comfortable changing that as the C-API won't notice,
but I'd like to signal that this would be of course a change
in the known-to-be-fragile C++ API and ABI, thus calling for 
a lib version bump.

If anyone has problems with it please scream loud.

--strk;

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From mateusz at loskot.net  Tue Apr  7 13:59:32 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr  7 13:59:42 2009
Subject: [geos-devel] Visual C++ project maintenance
In-Reply-To: <49DB77AF.3090505@savagexi.com>
References: <49DB26A2.5020602@loskot.net> <49DB77AF.3090505@savagexi.com>
Message-ID: <62482.212.183.134.211.1239127172.squirrel@loskot.net>

Charlie Savage wrote:
> Hi Mateusz,
>
>> I'm going to drop maintenance of Visual C++ build configurations
>> available in form of solution/projects from build/msvc80
>> and build/msvc90.
>>
>> As I'm the author of these extra modules, should I remove them or
>> leave them where they are? Similarly, what should I do with build/bjam?
>
> I'd like them to be left where they are since I find them quite useful.

Charlie,

Great, feel free to take it over.
The same with NMAKE makefiles.
AFAIK, Frank is maintaining them (with me as a backup)
and perhaps he will continue.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue Apr  7 14:59:34 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  7 14:59:49 2009
Subject: [geos-devel] Visual C++ project maintenance
In-Reply-To: <62482.212.183.134.211.1239127172.squirrel@loskot.net>
References: <49DB26A2.5020602@loskot.net> <49DB77AF.3090505@savagexi.com>
	<62482.212.183.134.211.1239127172.squirrel@loskot.net>
Message-ID: <49DBA296.7070304@pobox.com>

Mateusz Loskot wrote:
> 
> Great, feel free to take it over.
> The same with NMAKE makefiles.
> AFAIK, Frank is maintaining them (with me as a backup)
> and perhaps he will continue.

Folks,

It is still my intention to update the nmake makefiles periodically.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From strk at keybit.net  Wed Apr  8 08:08:10 2009
From: strk at keybit.net (strk)
Date: Wed Apr  8 08:09:21 2009
Subject: [geos-devel] Prepared geometry API
Message-ID: <20090408120810.GX52753@keybit.net>

While working on a testcase for prepared geometries in GEOS
I've found that the documentation for the "GEOSPrepare" function
doesn't match with actual behaviour:

 /*
  * Argument ownership is taken by prepared geometry
  */
 extern const GEOSPreparedGeometry GEOS_DLL *GEOSPrepare(const GEOSGeometry* g);

Testcase is along these lines:

	GEOSGeometry* g = GEOSGeomFromWKT("POLYGON EMPTY");
	const GEOSPreparedGeometry* pg = GEOSPrepare(g);
	GEOSPreparedGeom_destroy(pg);

	// 'g' leaks w/out the call below
	//GEOSGeom_destroy(g);

So, is it documentation wrong or implementation ?

--strk; 

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From strk at keybit.net  Wed Apr  8 10:17:32 2009
From: strk at keybit.net (strk)
Date: Wed Apr  8 10:18:38 2009
Subject: [geos-devel] Memory bug in Prepared geometry
Message-ID: <20090408141732.GY52753@keybit.net>

I've just committed a fix for a bad memory
bug in PreparedPolygonContainsProperly.cpp into trunk.

I suspect it was in latest release too (I haven't checked).
If so, I think this would be worth pushing out with
a new patch-level release.

ref: http://code.google.com/p/postgis/issues/detail?id=147

--strk; 

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From pramsey at opengeo.org  Wed Apr  8 10:47:00 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Apr  8 10:48:04 2009
Subject: [geos-devel] Re: Prepared geometry API
In-Reply-To: <20090408120810.GX52753@keybit.net>
References: <20090408120810.GX52753@keybit.net>
Message-ID: <30fe546d0904080747uc1541e1hbe74d0e8edc31c@mail.gmail.com>

I think, having examined this and talked w/ martin about intent, the
documentation is wrong. Argument ownership is *not* taken, the
prepared geometry does not fully subsume the original geometry. At
least wrt JTS interpretations.

There are a number of implementations in PostGIS and probable some
python projects too that now manage the prep and the original geom
separately, precisely to avoid the leak mentioned in your test case.

P.

On Wed, Apr 8, 2009 at 5:08 AM, strk <strk@keybit.net> wrote:
> While working on a testcase for prepared geometries in GEOS
> I've found that the documentation for the "GEOSPrepare" function
> doesn't match with actual behaviour:
>
> ?/*
> ?* Argument ownership is taken by prepared geometry
> ?*/
> ?extern const GEOSPreparedGeometry GEOS_DLL *GEOSPrepare(const GEOSGeometry* g);
>
> Testcase is along these lines:
>
> ? ? ? ?GEOSGeometry* g = GEOSGeomFromWKT("POLYGON EMPTY");
> ? ? ? ?const GEOSPreparedGeometry* pg = GEOSPrepare(g);
> ? ? ? ?GEOSPreparedGeom_destroy(pg);
>
> ? ? ? ?// 'g' leaks w/out the call below
> ? ? ? ?//GEOSGeom_destroy(g);
>
> So, is it documentation wrong or implementation ?
>
> --strk;
>
> ?Free GIS & Flash consultant/developer ? ? ?() ?ASCII Ribbon Campaign
> ?http://foo.keybit.net/~strk/services.html ?/\ ?Keep it simple!
>
From pramsey at opengeo.org  Wed Apr  8 12:55:03 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Apr  8 12:55:05 2009
Subject: [geos-devel] 3.1.1
Message-ID: <30fe546d0904080955l3a92c90cp5bc66fb776f4a122@mail.gmail.com>

A crasher was found in preparedcontains (introduced by yours truly,
repaired by strk). I'd like to release a 3.1.1 so that we have a solid
base for the PostGIS 1.4 release.

http://code.google.com/p/postgis/issues/detail?id=147

Any objections?

P
From mateusz at loskot.net  Wed Apr  8 15:57:40 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  8 15:58:00 2009
Subject: [geos-devel] Boost License compatibility
Message-ID: <49DD01B4.60207@loskot.net>

Folks,

"mloskot, You Are Not A Lawyer!"

However, I'm trying to understand compatibility of the terms of LGPL
and Boost License [1].
I'm looking for someone who would be able to confirm if
it i (or not) forbidden to copy/rewrite/port parts/solutions/algorithms
from source of GEOS to a source licensed under the terms of Boost License.

Here is a short comparison of Boost License and LGPL [2] and I'm worried
that Boost's requirement of:

"Must grant permission to copy, use and modify the software for any use
(commercial and non-commercial) for no fee. "

forbids such activity (copying).

[1]
http://www.crystalclearsoftware.com/cgi-bin/boost_wiki/wiki.pl?Boost_License
[2]
http://www.crystalclearsoftware.com/cgi-bin/boost_wiki/wiki.pl?Boost_License/GNU_Lesser_General_Public_License_-_LGPL

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From gdt at ir.bbn.com  Wed Apr  8 16:09:58 2009
From: gdt at ir.bbn.com (Greg Troxel)
Date: Wed Apr  8 16:19:32 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <49DD01B4.60207@loskot.net> (Mateusz Loskot's message of "Wed, 08
	Apr 2009 20:57:40 +0100")
References: <49DD01B4.60207@loskot.net>
Message-ID: <rmi63hec3ft.fsf@fnord.ir.bbn.com>


Mateusz Loskot <mateusz@loskot.net> writes:

> Folks,
>
> "mloskot, You Are Not A Lawyer!"

IANAL either; TINLA.

> However, I'm trying to understand compatibility of the terms of LGPL
> and Boost License [1].

Typically when people talk about compatibility of licenses, they are asking:

  If I combine work A under license LA with work B under license LB to
  form C, can I distribute C at all?

(For example, original BSD and GPL are incompatible, because the original
BSD license requires acknowledgement in supporting materials and the GPL
forbids adding that condition.  So combined works can't be distributed
at all.)

I think you're asking a different question that adds a condition.

  (bind A to GEOS, B to Boost)
  can I distribute C under LB?

> I'm looking for someone who would be able to confirm if
> it i (or not) forbidden to copy/rewrite/port parts/solutions/algorithms
> from source of GEOS to a source licensed under the terms of Boost License.

I would say that sure, you can copy (because the LGPL only imposes
constraints on distributing), but then you have to follow the LGPL's
distribution terms.  This would mean that the combined work would have
to be licensed under the LPGL (or pure GPL - I'm not quite clear on this
point).  The Boost license 1.0 looks like the "MIT license", "X11
License", or "modified BSD license".

> Here is a short comparison of Boost License and LGPL [2] and I'm worried
> that Boost's requirement of:
>
> "Must grant permission to copy, use and modify the software for any use
> (commercial and non-commercial) for no fee. "
>
> forbids such activity (copying).

That was a requirement of the working group that came up with the
license.  That language does not appear in the actual license, so
there's no need to follow it.  "Commercial" is am imprecise word, but it
seems clear the boost people mean "provide binaries without sources" by
that.

It's pretty clear the boost people would reject including LPGL code in
boost, if that's what you are asking.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 193 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090408/1cecb405/attachment.bin
From pramsey at opengeo.org  Wed Apr  8 16:28:37 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Apr  8 16:28:39 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <rmi63hec3ft.fsf@fnord.ir.bbn.com>
References: <49DD01B4.60207@loskot.net> <rmi63hec3ft.fsf@fnord.ir.bbn.com>
Message-ID: <30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>

FSF says they are compatible.

http://www.fsf.org/licensing/licenses/

P

On Wed, Apr 8, 2009 at 1:09 PM, Greg Troxel <gdt@ir.bbn.com> wrote:
>
> Mateusz Loskot <mateusz@loskot.net> writes:
>
>> Folks,
>>
>> "mloskot, You Are Not A Lawyer!"
>
> IANAL either; TINLA.
>
>> However, I'm trying to understand compatibility of the terms of LGPL
>> and Boost License [1].
>
> Typically when people talk about compatibility of licenses, they are asking:
>
> ?If I combine work A under license LA with work B under license LB to
> ?form C, can I distribute C at all?
>
> (For example, original BSD and GPL are incompatible, because the original
> BSD license requires acknowledgement in supporting materials and the GPL
> forbids adding that condition. ?So combined works can't be distributed
> at all.)
>
> I think you're asking a different question that adds a condition.
>
> ?(bind A to GEOS, B to Boost)
> ?can I distribute C under LB?
>
>> I'm looking for someone who would be able to confirm if
>> it i (or not) forbidden to copy/rewrite/port parts/solutions/algorithms
>> from source of GEOS to a source licensed under the terms of Boost License.
>
> I would say that sure, you can copy (because the LGPL only imposes
> constraints on distributing), but then you have to follow the LGPL's
> distribution terms. ?This would mean that the combined work would have
> to be licensed under the LPGL (or pure GPL - I'm not quite clear on this
> point). ?The Boost license 1.0 looks like the "MIT license", "X11
> License", or "modified BSD license".
>
>> Here is a short comparison of Boost License and LGPL [2] and I'm worried
>> that Boost's requirement of:
>>
>> "Must grant permission to copy, use and modify the software for any use
>> (commercial and non-commercial) for no fee. "
>>
>> forbids such activity (copying).
>
> That was a requirement of the working group that came up with the
> license. ?That language does not appear in the actual license, so
> there's no need to follow it. ?"Commercial" is am imprecise word, but it
> seems clear the boost people mean "provide binaries without sources" by
> that.
>
> It's pretty clear the boost people would reject including LPGL code in
> boost, if that's what you are asking.
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From chodgson at refractions.net  Wed Apr  8 16:47:08 2009
From: chodgson at refractions.net (Chris Hodgson)
Date: Wed Apr  8 16:47:12 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>
References: <49DD01B4.60207@loskot.net> <rmi63hec3ft.fsf@fnord.ir.bbn.com>
	<30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>
Message-ID: <49DD0D4C.9050301@refractions.net>

But don't forget to read:

http://www.fsf.org/licensing/licenses/gpl-faq.html#WhatDoesCompatMean

It seems their definition of compatibility only refers to the ability to 
combine the code, without reference to what license the resulting code 
could possibly be released under.

Chris

Paul Ramsey wrote:
> FSF says they are compatible.
>
> http://www.fsf.org/licensing/licenses/
>
> P
>
> On Wed, Apr 8, 2009 at 1:09 PM, Greg Troxel <gdt@ir.bbn.com> wrote:
>   
>> Mateusz Loskot <mateusz@loskot.net> writes:
>>
>>     
>>> Folks,
>>>
>>> "mloskot, You Are Not A Lawyer!"
>>>       
>> IANAL either; TINLA.
>>
>>     
>>> However, I'm trying to understand compatibility of the terms of LGPL
>>> and Boost License [1].
>>>       
>> Typically when people talk about compatibility of licenses, they are asking:
>>
>>  If I combine work A under license LA with work B under license LB to
>>  form C, can I distribute C at all?
>>
>> (For example, original BSD and GPL are incompatible, because the original
>> BSD license requires acknowledgement in supporting materials and the GPL
>> forbids adding that condition.  So combined works can't be distributed
>> at all.)
>>
>> I think you're asking a different question that adds a condition.
>>
>>  (bind A to GEOS, B to Boost)
>>  can I distribute C under LB?
>>
>>     
>>> I'm looking for someone who would be able to confirm if
>>> it i (or not) forbidden to copy/rewrite/port parts/solutions/algorithms
>>> from source of GEOS to a source licensed under the terms of Boost License.
>>>       
>> I would say that sure, you can copy (because the LGPL only imposes
>> constraints on distributing), but then you have to follow the LGPL's
>> distribution terms.  This would mean that the combined work would have
>> to be licensed under the LPGL (or pure GPL - I'm not quite clear on this
>> point).  The Boost license 1.0 looks like the "MIT license", "X11
>> License", or "modified BSD license".
>>
>>     
>>> Here is a short comparison of Boost License and LGPL [2] and I'm worried
>>> that Boost's requirement of:
>>>
>>> "Must grant permission to copy, use and modify the software for any use
>>> (commercial and non-commercial) for no fee. "
>>>
>>> forbids such activity (copying).
>>>       
>> That was a requirement of the working group that came up with the
>> license.  That language does not appear in the actual license, so
>> there's no need to follow it.  "Commercial" is am imprecise word, but it
>> seems clear the boost people mean "provide binaries without sources" by
>> that.
>>
>> It's pretty clear the boost people would reject including LPGL code in
>> boost, if that's what you are asking.
>>
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>     
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>   

From mateusz at loskot.net  Wed Apr  8 16:49:31 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  8 16:49:43 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <rmi63hec3ft.fsf@fnord.ir.bbn.com>
References: <49DD01B4.60207@loskot.net> <rmi63hec3ft.fsf@fnord.ir.bbn.com>
Message-ID: <49DD0DDB.2060509@loskot.net>

Greg Troxel wrote:
> Mateusz Loskot <mateusz@loskot.net> writes:
>> However, I'm trying to understand compatibility of the terms of
>> LGPL and Boost License [1].
> 
> Typically when people talk about compatibility of licenses, they are
> asking:
> 
> If I combine work A under license LA with work B under license LB to 
> form C, can I distribute C at all?
> 
> (For example, original BSD and GPL are incompatible, because the
> original BSD license requires acknowledgement in supporting materials
> and the GPL forbids adding that condition.  So combined works can't
> be distributed at all.)
> 
> I think you're asking a different question that adds a condition.
> 
> (bind A to GEOS, B to Boost) can I distribute C under LB?

The question is like this:

Can I copy lines 10-30 from GEOS source file a.cpp to project X which
is licensed under the terms of Boost License?

>> I'm looking for someone who would be able to confirm if it i (or
>> not) forbidden to copy/rewrite/port parts/solutions/algorithms from
>> source of GEOS to a source licensed under the terms of Boost
>> License.
> 
> I would say that sure, you can copy (because the LGPL only imposes 
> constraints on distributing), but then you have to follow the LGPL's 
> distribution terms.  This would mean that the combined work would
> have to be licensed under the LPGL (or pure GPL - I'm not quite clear
> on this point).  The Boost license 1.0 looks like the "MIT license",
> "X11 License", or "modified BSD license".


There is an existing code, project X licensed under Boost License.
If I copy some work based on LGPL and include it in the X,
can I still distribute X under the terms of Boost License?

>> Here is a short comparison of Boost License and LGPL [2] and I'm
>> worried that Boost's requirement of:
>> 
>> "Must grant permission to copy, use and modify the software for any
>> use (commercial and non-commercial) for no fee. "
>> 
>> forbids such activity (copying).
> 
> That was a requirement of the working group that came up with the 
> license.  That language does not appear in the actual license, so 
> there's no need to follow it.  "Commercial" is am imprecise word, but
> it seems clear the boost people mean "provide binaries without
> sources" by that.

Yes, that's clear.

> It's pretty clear the boost people would reject including LPGL code
> in boost, if that's what you are asking.

And this is something that is not clear or better, not obvious to me.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Wed Apr  8 16:51:52 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  8 16:52:04 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>
References: <49DD01B4.60207@loskot.net> <rmi63hec3ft.fsf@fnord.ir.bbn.com>
	<30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>
Message-ID: <49DD0E68.2070808@loskot.net>

Paul Ramsey wrote:
> FSF says they are compatible.
> 
> http://www.fsf.org/licensing/licenses/

Thanks for the URL, however it does not explain
what it means that they are compatible.

My understanding is that any "injection" of LGPL or GPL code
into code licensed under the terms of Boost License,
require that the latter must be re-licensed
under the terms of LGPL or GPL.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Wed Apr  8 16:56:41 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  8 16:56:52 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <49DD0D4C.9050301@refractions.net>
References: <49DD01B4.60207@loskot.net>
	<rmi63hec3ft.fsf@fnord.ir.bbn.com>	<30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>
	<49DD0D4C.9050301@refractions.net>
Message-ID: <49DD0F89.10603@loskot.net>

Chris Hodgson wrote:
> But don't forget to read:
> 
> http://www.fsf.org/licensing/licenses/gpl-faq.html#WhatDoesCompatMean
> 
> 
> It seems their definition of compatibility only refers to the ability
> to combine the code, without reference to what license the resulting
> code could possibly be released under.

"It means that the other license and the GNU GPL are compatible; you can
combine code released under the other license with code released
under the GNU GPL in one larger program"

It helps, but not much :-)

It's still unclear if I must release the "larger program" under the
terms of GPL or I can release it under the terms of the "other license"

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From pramsey at opengeo.org  Wed Apr  8 17:03:44 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Apr  8 17:03:46 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <49DD0F89.10603@loskot.net>
References: <49DD01B4.60207@loskot.net> <rmi63hec3ft.fsf@fnord.ir.bbn.com>
	<30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>
	<49DD0D4C.9050301@refractions.net> <49DD0F89.10603@loskot.net>
Message-ID: <30fe546d0904081403s4accbea7v12446daf4e2ae1a3@mail.gmail.com>

Since you're talking about taking a small snippet of LGPL and putting
it into a larger chunk of Boost, probably you will get no definitive
answer, since it hinges on whether your new combined result is a
"derived work" (in which case it's LGPL) or not (in which case it can
be Boost).  The "safe" black-and-white answer is that combining
anything from a *GPL project with another compatibly-licensed project
creates a *GPL resultant.

P.

On Wed, Apr 8, 2009 at 1:56 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
> Chris Hodgson wrote:
>> But don't forget to read:
>>
>> http://www.fsf.org/licensing/licenses/gpl-faq.html#WhatDoesCompatMean
>>
>>
>> It seems their definition of compatibility only refers to the ability
>> to combine the code, without reference to what license the resulting
>> code could possibly be released under.
>
> "It means that the other license and the GNU GPL are compatible; you can
> combine code released under the other license with code released
> under the GNU GPL in one larger program"
>
> It helps, but not much :-)
>
> It's still unclear if I must release the "larger program" under the
> terms of GPL or I can release it under the terms of the "other license"
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Wed Apr  8 17:20:56 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  8 17:21:07 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <30fe546d0904081403s4accbea7v12446daf4e2ae1a3@mail.gmail.com>
References: <49DD01B4.60207@loskot.net>
	<rmi63hec3ft.fsf@fnord.ir.bbn.com>	<30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>	<49DD0D4C.9050301@refractions.net>
	<49DD0F89.10603@loskot.net>
	<30fe546d0904081403s4accbea7v12446daf4e2ae1a3@mail.gmail.com>
Message-ID: <49DD1538.6050707@loskot.net>

Paul Ramsey wrote:
> Since you're talking about taking a small snippet of LGPL and putting
>  it into a larger chunk of Boost, probably you will get no definitive
>  answer, since it hinges on whether your new combined result is a 
> "derived work" (in which case it's LGPL) or not (in which case it can
>  be Boost).  The "safe" black-and-white answer is that combining 
> anything from a *GPL project with another compatibly-licensed project
>  creates a *GPL resultant.

All this makes sense and seems to be best approach. Thanks!

Slightly changing my original question.
Let's assume no code is copied.
Is it safe to "translate" or let's say rewrite some parts of
implementation of algorithms available in GEOS, using different
types, different idioms, different C++ constructions, etc.
and license such work under the terms of Boost License?

Best regards,

p.s. I understand that the best answer is
probably "Ask your lawyer!", so sorry for bothering
if it's OT here.

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From pramsey at opengeo.org  Wed Apr  8 17:31:55 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed Apr  8 17:31:57 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <49DD1538.6050707@loskot.net>
References: <49DD01B4.60207@loskot.net> <rmi63hec3ft.fsf@fnord.ir.bbn.com>
	<30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>
	<49DD0D4C.9050301@refractions.net> <49DD0F89.10603@loskot.net>
	<30fe546d0904081403s4accbea7v12446daf4e2ae1a3@mail.gmail.com>
	<49DD1538.6050707@loskot.net>
Message-ID: <30fe546d0904081431h5cc15325kd478fb7abc81e6b@mail.gmail.com>

Definitely an "ask your lawyer". Our feeling when porting JTS to C++
was that the port was still a "derived work" and should retain the
LGPL license of the original work. However, that was merely a feeling,
I have no idea where the grey areas lie in things like algorithm
porting.

P.

On Wed, Apr 8, 2009 at 2:20 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
> Paul Ramsey wrote:
>> Since you're talking about taking a small snippet of LGPL and putting
>> ?it into a larger chunk of Boost, probably you will get no definitive
>> ?answer, since it hinges on whether your new combined result is a
>> "derived work" (in which case it's LGPL) or not (in which case it can
>> ?be Boost). ?The "safe" black-and-white answer is that combining
>> anything from a *GPL project with another compatibly-licensed project
>> ?creates a *GPL resultant.
>
> All this makes sense and seems to be best approach. Thanks!
>
> Slightly changing my original question.
> Let's assume no code is copied.
> Is it safe to "translate" or let's say rewrite some parts of
> implementation of algorithms available in GEOS, using different
> types, different idioms, different C++ constructions, etc.
> and license such work under the terms of Boost License?
>
> Best regards,
>
> p.s. I understand that the best answer is
> probably "Ask your lawyer!", so sorry for bothering
> if it's OT here.
>
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Wed Apr  8 17:41:16 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  8 17:41:29 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <30fe546d0904081431h5cc15325kd478fb7abc81e6b@mail.gmail.com>
References: <49DD01B4.60207@loskot.net>
	<rmi63hec3ft.fsf@fnord.ir.bbn.com>	<30fe546d0904081328g5aec33u32e39a8a9097ffac@mail.gmail.com>	<49DD0D4C.9050301@refractions.net>
	<49DD0F89.10603@loskot.net>	<30fe546d0904081403s4accbea7v12446daf4e2ae1a3@mail.gmail.com>	<49DD1538.6050707@loskot.net>
	<30fe546d0904081431h5cc15325kd478fb7abc81e6b@mail.gmail.com>
Message-ID: <49DD19FC.7010107@loskot.net>

Paul Ramsey wrote:
> Definitely an "ask your lawyer". Our feeling when porting JTS to C++
> was that the port was still a "derived work" and should retain the
> LGPL license of the original work. However, that was merely a feeling,
> I have no idea where the grey areas lie in things like algorithm
> porting.

Right, I have similar feeling.

Thanks for help!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From gdt at ir.bbn.com  Wed Apr  8 18:02:48 2009
From: gdt at ir.bbn.com (Greg Troxel)
Date: Wed Apr  8 18:03:01 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <49DD0DDB.2060509@loskot.net> (Mateusz Loskot's message of "Wed, 
	08 Apr 2009 21:49:31 +0100")
References: <49DD01B4.60207@loskot.net> <rmi63hec3ft.fsf@fnord.ir.bbn.com>
	<49DD0DDB.2060509@loskot.net>
Message-ID: <rmiocv6ajnb.fsf@fnord.ir.bbn.com>


Mateusz Loskot <mateusz@loskot.net> writes:

> The question is like this:
>
> Can I copy lines 10-30 from GEOS source file a.cpp to project X which
> is licensed under the terms of Boost License?

If those lines are deemed to be non-trivial - and the rule of them is
that 10 or more lines are definitely non-trivial - then no, because you
have a derived work and can't distribute the LGPL code under the Boost
License.  If you read one line and write something to do a similar
algorithm but differently, almost certainly it's not a derived work and
the licnense of the inspirational work doesn't matter.  The middle
ground is hard and standard advice is not to skate near the edge of thin
ice.

> There is an existing code, project X licensed under Boost License.
> If I copy some work based on LGPL and include it in the X,
> can I still distribute X under the terms of Boost License?

Definitely not.

>> It's pretty clear the boost people would reject including LPGL code
>> in boost, if that's what you are asking.
>
> And this is something that is not clear or better, not obvious to me.

From reading their analysis of licenses, it seems clear to me that Boost
wants to allow proprietary use of boost.  This is the same licensing
goal as the BSDs, and it's different from the FSF goal.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 193 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090408/da027928/attachment.bin
From mateusz at loskot.net  Wed Apr  8 18:43:41 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr  8 18:43:47 2009
Subject: [geos-devel] Boost License compatibility
In-Reply-To: <rmiocv6ajnb.fsf@fnord.ir.bbn.com>
References: <49DD01B4.60207@loskot.net>
	<rmi63hec3ft.fsf@fnord.ir.bbn.com>	<49DD0DDB.2060509@loskot.net>
	<rmiocv6ajnb.fsf@fnord.ir.bbn.com>
Message-ID: <49DD289D.7070901@loskot.net>

Greg Troxel wrote:
> Mateusz Loskot <mateusz@loskot.net> writes:
> 
>> The question is like this:
>>
>> Can I copy lines 10-30 from GEOS source file a.cpp to project X which
>> is licensed under the terms of Boost License?
> 
> If those lines are deemed to be non-trivial - and the rule of them is
> that 10 or more lines are definitely non-trivial - then no, because you
> have a derived work and can't distribute the LGPL code under the Boost
> License.  If you read one line and write something to do a similar
> algorithm but differently, almost certainly it's not a derived work and
> the licnense of the inspirational work doesn't matter.  The middle
> ground is hard and standard advice is not to skate near the edge of thin
> ice.

Yes, this is best recommendation.

>>> It's pretty clear the boost people would reject including LPGL code
>>> in boost, if that's what you are asking.
>> And this is something that is not clear or better, not obvious to me.
> 
> From reading their analysis of licenses, it seems clear to me that Boost
> wants to allow proprietary use of boost.  This is the same licensing
> goal as the BSDs, and it's different from the FSF goal.

Right, good point.

Thanks to all for help in understanding the issue!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From bicealyh at gmail.com  Fri Apr 10 04:35:42 2009
From: bicealyh at gmail.com (LiN YongHeng)
Date: Fri Apr 10 04:35:44 2009
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 7
In-Reply-To: <20090409160011.2E2E8E01A7B@lists.osgeo.org>
References: <20090409160011.2E2E8E01A7B@lists.osgeo.org>
Message-ID: <11e4f1140904100135m443214e4h6e65cc11b62c75ee@mail.gmail.com>

Hello everyone,
I have a question about GEOSUnion().
I give value to g1 and g2 like below:
GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
"POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
like GEOSGeom g3 =
GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
Does anyone can tell me why?



2009/4/10 <geos-devel-request@lists.osgeo.org>

> Send geos-devel mailing list submissions to
>        geos-devel@lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://lists.osgeo.org/mailman/listinfo/geos-devel
> or, via email, send a message with subject or body 'help' to
>        geos-devel-request@lists.osgeo.org
>
> You can reach the person managing the list at
>        geos-devel-owner@lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of geos-devel digest..."
>
>
> Today's Topics:
>
>   1. Re: Boost License compatibility (Mateusz Loskot)
>   2. Re: Boost License compatibility (Paul Ramsey)
>   3. Re: Boost License compatibility (Mateusz Loskot)
>   4. Re: Boost License compatibility (Greg Troxel)
>   5. Re: Boost License compatibility (Mateusz Loskot)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Wed, 08 Apr 2009 22:20:56 +0100
> From: Mateusz Loskot <mateusz@loskot.net>
> Subject: Re: [geos-devel] Boost License compatibility
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49DD1538.6050707@loskot.net>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Paul Ramsey wrote:
> > Since you're talking about taking a small snippet of LGPL and putting
> >  it into a larger chunk of Boost, probably you will get no definitive
> >  answer, since it hinges on whether your new combined result is a
> > "derived work" (in which case it's LGPL) or not (in which case it can
> >  be Boost).  The "safe" black-and-white answer is that combining
> > anything from a *GPL project with another compatibly-licensed project
> >  creates a *GPL resultant.
>
> All this makes sense and seems to be best approach. Thanks!
>
> Slightly changing my original question.
> Let's assume no code is copied.
> Is it safe to "translate" or let's say rewrite some parts of
> implementation of algorithms available in GEOS, using different
> types, different idioms, different C++ constructions, etc.
> and license such work under the terms of Boost License?
>
> Best regards,
>
> p.s. I understand that the best answer is
> probably "Ask your lawyer!", so sorry for bothering
> if it's OT here.
>
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>
>
> ------------------------------
>
> Message: 2
> Date: Wed, 8 Apr 2009 14:31:55 -0700
> From: Paul Ramsey <pramsey@opengeo.org>
> Subject: Re: [geos-devel] Boost License compatibility
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID:
>        <30fe546d0904081431h5cc15325kd478fb7abc81e6b@mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Definitely an "ask your lawyer". Our feeling when porting JTS to C++
> was that the port was still a "derived work" and should retain the
> LGPL license of the original work. However, that was merely a feeling,
> I have no idea where the grey areas lie in things like algorithm
> porting.
>
> P.
>
> On Wed, Apr 8, 2009 at 2:20 PM, Mateusz Loskot <mateusz@loskot.net> wrote:
> > Paul Ramsey wrote:
> >> Since you're talking about taking a small snippet of LGPL and putting
> >>  it into a larger chunk of Boost, probably you will get no definitive
> >>  answer, since it hinges on whether your new combined result is a
> >> "derived work" (in which case it's LGPL) or not (in which case it can
> >>  be Boost).  The "safe" black-and-white answer is that combining
> >> anything from a *GPL project with another compatibly-licensed project
> >>  creates a *GPL resultant.
> >
> > All this makes sense and seems to be best approach. Thanks!
> >
> > Slightly changing my original question.
> > Let's assume no code is copied.
> > Is it safe to "translate" or let's say rewrite some parts of
> > implementation of algorithms available in GEOS, using different
> > types, different idioms, different C++ constructions, etc.
> > and license such work under the terms of Boost License?
> >
> > Best regards,
> >
> > p.s. I understand that the best answer is
> > probably "Ask your lawyer!", so sorry for bothering
> > if it's OT here.
> >
> > --
> > Mateusz Loskot, http://mateusz.loskot.net
> > Charter Member of OSGeo, http://osgeo.org
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >
>
>
> ------------------------------
>
> Message: 3
> Date: Wed, 08 Apr 2009 22:41:16 +0100
> From: Mateusz Loskot <mateusz@loskot.net>
> Subject: Re: [geos-devel] Boost License compatibility
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49DD19FC.7010107@loskot.net>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Paul Ramsey wrote:
> > Definitely an "ask your lawyer". Our feeling when porting JTS to C++
> > was that the port was still a "derived work" and should retain the
> > LGPL license of the original work. However, that was merely a feeling,
> > I have no idea where the grey areas lie in things like algorithm
> > porting.
>
> Right, I have similar feeling.
>
> Thanks for help!
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>
>
> ------------------------------
>
> Message: 4
> Date: Wed, 08 Apr 2009 18:02:48 -0400
> From: Greg Troxel <gdt@ir.bbn.com>
> Subject: Re: [geos-devel] Boost License compatibility
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <rmiocv6ajnb.fsf@fnord.ir.bbn.com>
> Content-Type: text/plain; charset="us-ascii"
>
>
> Mateusz Loskot <mateusz@loskot.net> writes:
>
> > The question is like this:
> >
> > Can I copy lines 10-30 from GEOS source file a.cpp to project X which
> > is licensed under the terms of Boost License?
>
> If those lines are deemed to be non-trivial - and the rule of them is
> that 10 or more lines are definitely non-trivial - then no, because you
> have a derived work and can't distribute the LGPL code under the Boost
> License.  If you read one line and write something to do a similar
> algorithm but differently, almost certainly it's not a derived work and
> the licnense of the inspirational work doesn't matter.  The middle
> ground is hard and standard advice is not to skate near the edge of thin
> ice.
>
> > There is an existing code, project X licensed under Boost License.
> > If I copy some work based on LGPL and include it in the X,
> > can I still distribute X under the terms of Boost License?
>
> Definitely not.
>
> >> It's pretty clear the boost people would reject including LPGL code
> >> in boost, if that's what you are asking.
> >
> > And this is something that is not clear or better, not obvious to me.
>
> >From reading their analysis of licenses, it seems clear to me that Boost
> wants to allow proprietary use of boost.  This is the same licensing
> goal as the BSDs, and it's different from the FSF goal.
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: not available
> Type: application/pgp-signature
> Size: 193 bytes
> Desc: not available
> Url :
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090408/da027928/attachment-0001.bin
>
> ------------------------------
>
> Message: 5
> Date: Wed, 08 Apr 2009 23:43:41 +0100
> From: Mateusz Loskot <mateusz@loskot.net>
> Subject: Re: [geos-devel] Boost License compatibility
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49DD289D.7070901@loskot.net>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Greg Troxel wrote:
> > Mateusz Loskot <mateusz@loskot.net> writes:
> >
> >> The question is like this:
> >>
> >> Can I copy lines 10-30 from GEOS source file a.cpp to project X which
> >> is licensed under the terms of Boost License?
> >
> > If those lines are deemed to be non-trivial - and the rule of them is
> > that 10 or more lines are definitely non-trivial - then no, because you
> > have a derived work and can't distribute the LGPL code under the Boost
> > License.  If you read one line and write something to do a similar
> > algorithm but differently, almost certainly it's not a derived work and
> > the licnense of the inspirational work doesn't matter.  The middle
> > ground is hard and standard advice is not to skate near the edge of thin
> > ice.
>
> Yes, this is best recommendation.
>
> >>> It's pretty clear the boost people would reject including LPGL code
> >>> in boost, if that's what you are asking.
> >> And this is something that is not clear or better, not obvious to me.
> >
> > From reading their analysis of licenses, it seems clear to me that Boost
> > wants to allow proprietary use of boost.  This is the same licensing
> > goal as the BSDs, and it's different from the FSF goal.
>
> Right, good point.
>
> Thanks to all for help in understanding the issue!
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>
>
> ------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> End of geos-devel Digest, Vol 78, Issue 7
> *****************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090410/71db0efb/attachment.html
From pa.leroux at gmail.com  Fri Apr 10 05:46:38 2009
From: pa.leroux at gmail.com (Pascal Leroux)
Date: Fri Apr 10 05:46:42 2009
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 7
In-Reply-To: <11e4f1140904100135m443214e4h6e65cc11b62c75ee@mail.gmail.com>
References: <20090409160011.2E2E8E01A7B@lists.osgeo.org>
	<11e4f1140904100135m443214e4h6e65cc11b62c75ee@mail.gmail.com>
Message-ID: <99a083a70904100246y41d9ba32nd796b851ef5c8392@mail.gmail.com>

Hi YongHeng
the result doesn't matter : your input polygons are not valid
Pascal

2009/4/10 LiN YongHeng <bicealyh@gmail.com>

> Hello everyone,
> I have a question about GEOSUnion().
> I give value to g1 and g2 like below:
> GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
> "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
> like GEOSGeom g3 =
> GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
> Does anyone can tell me why?
>
>
>
> 2009/4/10 <geos-devel-request@lists.osgeo.org>
>
>> Send geos-devel mailing list submissions to
>>        geos-devel@lists.osgeo.org
>>
>> To subscribe or unsubscribe via the World Wide Web, visit
>>        http://lists.osgeo.org/mailman/listinfo/geos-devel
>> or, via email, send a message with subject or body 'help' to
>>        geos-devel-request@lists.osgeo.org
>>
>> You can reach the person managing the list at
>>        geos-devel-owner@lists.osgeo.org
>>
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of geos-devel digest..."
>>
>>
>> Today's Topics:
>>
>>   1. Re: Boost License compatibility (Mateusz Loskot)
>>   2. Re: Boost License compatibility (Paul Ramsey)
>>   3. Re: Boost License compatibility (Mateusz Loskot)
>>   4. Re: Boost License compatibility (Greg Troxel)
>>   5. Re: Boost License compatibility (Mateusz Loskot)
>>
>>
>> ----------------------------------------------------------------------
>>
>> Message: 1
>> Date: Wed, 08 Apr 2009 22:20:56 +0100
>> From: Mateusz Loskot <mateusz@loskot.net>
>> Subject: Re: [geos-devel] Boost License compatibility
>> To: GEOS Development List <geos-devel@lists.osgeo.org>
>> Message-ID: <49DD1538.6050707@loskot.net>
>> Content-Type: text/plain; charset=ISO-8859-1
>>
>> Paul Ramsey wrote:
>> > Since you're talking about taking a small snippet of LGPL and putting
>> >  it into a larger chunk of Boost, probably you will get no definitive
>> >  answer, since it hinges on whether your new combined result is a
>> > "derived work" (in which case it's LGPL) or not (in which case it can
>> >  be Boost).  The "safe" black-and-white answer is that combining
>> > anything from a *GPL project with another compatibly-licensed project
>> >  creates a *GPL resultant.
>>
>> All this makes sense and seems to be best approach. Thanks!
>>
>> Slightly changing my original question.
>> Let's assume no code is copied.
>> Is it safe to "translate" or let's say rewrite some parts of
>> implementation of algorithms available in GEOS, using different
>> types, different idioms, different C++ constructions, etc.
>> and license such work under the terms of Boost License?
>>
>> Best regards,
>>
>> p.s. I understand that the best answer is
>> probably "Ask your lawyer!", so sorry for bothering
>> if it's OT here.
>>
>> --
>> Mateusz Loskot, http://mateusz.loskot.net
>> Charter Member of OSGeo, http://osgeo.org
>>
>>
>> ------------------------------
>>
>> Message: 2
>> Date: Wed, 8 Apr 2009 14:31:55 -0700
>> From: Paul Ramsey <pramsey@opengeo.org>
>> Subject: Re: [geos-devel] Boost License compatibility
>> To: GEOS Development List <geos-devel@lists.osgeo.org>
>> Message-ID:
>>        <30fe546d0904081431h5cc15325kd478fb7abc81e6b@mail.gmail.com>
>> Content-Type: text/plain; charset=ISO-8859-1
>>
>> Definitely an "ask your lawyer". Our feeling when porting JTS to C++
>> was that the port was still a "derived work" and should retain the
>> LGPL license of the original work. However, that was merely a feeling,
>> I have no idea where the grey areas lie in things like algorithm
>> porting.
>>
>> P.
>>
>> On Wed, Apr 8, 2009 at 2:20 PM, Mateusz Loskot <mateusz@loskot.net>
>> wrote:
>> > Paul Ramsey wrote:
>> >> Since you're talking about taking a small snippet of LGPL and putting
>> >>  it into a larger chunk of Boost, probably you will get no definitive
>> >>  answer, since it hinges on whether your new combined result is a
>> >> "derived work" (in which case it's LGPL) or not (in which case it can
>> >>  be Boost).  The "safe" black-and-white answer is that combining
>> >> anything from a *GPL project with another compatibly-licensed project
>> >>  creates a *GPL resultant.
>> >
>> > All this makes sense and seems to be best approach. Thanks!
>> >
>> > Slightly changing my original question.
>> > Let's assume no code is copied.
>> > Is it safe to "translate" or let's say rewrite some parts of
>> > implementation of algorithms available in GEOS, using different
>> > types, different idioms, different C++ constructions, etc.
>> > and license such work under the terms of Boost License?
>> >
>> > Best regards,
>> >
>> > p.s. I understand that the best answer is
>> > probably "Ask your lawyer!", so sorry for bothering
>> > if it's OT here.
>> >
>> > --
>> > Mateusz Loskot, http://mateusz.loskot.net
>> > Charter Member of OSGeo, http://osgeo.org
>> > _______________________________________________
>> > geos-devel mailing list
>> > geos-devel@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>> >
>>
>>
>> ------------------------------
>>
>> Message: 3
>> Date: Wed, 08 Apr 2009 22:41:16 +0100
>> From: Mateusz Loskot <mateusz@loskot.net>
>> Subject: Re: [geos-devel] Boost License compatibility
>> To: GEOS Development List <geos-devel@lists.osgeo.org>
>> Message-ID: <49DD19FC.7010107@loskot.net>
>> Content-Type: text/plain; charset=ISO-8859-1
>>
>> Paul Ramsey wrote:
>> > Definitely an "ask your lawyer". Our feeling when porting JTS to C++
>> > was that the port was still a "derived work" and should retain the
>> > LGPL license of the original work. However, that was merely a feeling,
>> > I have no idea where the grey areas lie in things like algorithm
>> > porting.
>>
>> Right, I have similar feeling.
>>
>> Thanks for help!
>>
>> Best regards,
>> --
>> Mateusz Loskot, http://mateusz.loskot.net
>> Charter Member of OSGeo, http://osgeo.org
>>
>>
>> ------------------------------
>>
>> Message: 4
>> Date: Wed, 08 Apr 2009 18:02:48 -0400
>> From: Greg Troxel <gdt@ir.bbn.com>
>> Subject: Re: [geos-devel] Boost License compatibility
>> To: GEOS Development List <geos-devel@lists.osgeo.org>
>> Message-ID: <rmiocv6ajnb.fsf@fnord.ir.bbn.com>
>> Content-Type: text/plain; charset="us-ascii"
>>
>>
>> Mateusz Loskot <mateusz@loskot.net> writes:
>>
>> > The question is like this:
>> >
>> > Can I copy lines 10-30 from GEOS source file a.cpp to project X which
>> > is licensed under the terms of Boost License?
>>
>> If those lines are deemed to be non-trivial - and the rule of them is
>> that 10 or more lines are definitely non-trivial - then no, because you
>> have a derived work and can't distribute the LGPL code under the Boost
>> License.  If you read one line and write something to do a similar
>> algorithm but differently, almost certainly it's not a derived work and
>> the licnense of the inspirational work doesn't matter.  The middle
>> ground is hard and standard advice is not to skate near the edge of thin
>> ice.
>>
>> > There is an existing code, project X licensed under Boost License.
>> > If I copy some work based on LGPL and include it in the X,
>> > can I still distribute X under the terms of Boost License?
>>
>> Definitely not.
>>
>> >> It's pretty clear the boost people would reject including LPGL code
>> >> in boost, if that's what you are asking.
>> >
>> > And this is something that is not clear or better, not obvious to me.
>>
>> >From reading their analysis of licenses, it seems clear to me that Boost
>> wants to allow proprietary use of boost.  This is the same licensing
>> goal as the BSDs, and it's different from the FSF goal.
>> -------------- next part --------------
>> A non-text attachment was scrubbed...
>> Name: not available
>> Type: application/pgp-signature
>> Size: 193 bytes
>> Desc: not available
>> Url :
>> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090408/da027928/attachment-0001.bin
>>
>> ------------------------------
>>
>> Message: 5
>> Date: Wed, 08 Apr 2009 23:43:41 +0100
>> From: Mateusz Loskot <mateusz@loskot.net>
>> Subject: Re: [geos-devel] Boost License compatibility
>> To: GEOS Development List <geos-devel@lists.osgeo.org>
>> Message-ID: <49DD289D.7070901@loskot.net>
>> Content-Type: text/plain; charset=ISO-8859-1
>>
>> Greg Troxel wrote:
>> > Mateusz Loskot <mateusz@loskot.net> writes:
>> >
>> >> The question is like this:
>> >>
>> >> Can I copy lines 10-30 from GEOS source file a.cpp to project X which
>> >> is licensed under the terms of Boost License?
>> >
>> > If those lines are deemed to be non-trivial - and the rule of them is
>> > that 10 or more lines are definitely non-trivial - then no, because you
>> > have a derived work and can't distribute the LGPL code under the Boost
>> > License.  If you read one line and write something to do a similar
>> > algorithm but differently, almost certainly it's not a derived work and
>> > the licnense of the inspirational work doesn't matter.  The middle
>> > ground is hard and standard advice is not to skate near the edge of thin
>> > ice.
>>
>> Yes, this is best recommendation.
>>
>> >>> It's pretty clear the boost people would reject including LPGL code
>> >>> in boost, if that's what you are asking.
>> >> And this is something that is not clear or better, not obvious to me.
>> >
>> > From reading their analysis of licenses, it seems clear to me that Boost
>> > wants to allow proprietary use of boost.  This is the same licensing
>> > goal as the BSDs, and it's different from the FSF goal.
>>
>> Right, good point.
>>
>> Thanks to all for help in understanding the issue!
>>
>> Best regards,
>> --
>> Mateusz Loskot, http://mateusz.loskot.net
>> Charter Member of OSGeo, http://osgeo.org
>>
>>
>> ------------------------------
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>> End of geos-devel Digest, Vol 78, Issue 7
>> *****************************************
>>
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090410/e1afbd27/attachment-0001.html
From geos-trac at osgeo.org  Fri Apr 10 07:43:58 2009
From: geos-trac at osgeo.org (GEOS)
Date: Fri Apr 10 07:43:59 2009
Subject: [geos-devel] [GEOS] #247: Can not compile GEOS SVN
Message-ID: <044.89ed97995283f4e3a47411d4b5d9259c@osgeo.org>

#247: Can not compile GEOS SVN
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.1.1                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Maybe I'm missing something -- but just tried pulling SVN of GEOS.
 First I tried make clean and got a bunch of errors about aclocal 1.10
 missing or something.
 Then I tried

 doing an
 sh autogen.sh

 I can't autogen or compile it on either my OpenSUSE 10.3 box or Windows XP
 under MingW. both give similar Error.

 OpenSUSE gives this error
 sh autogen.sh
 * Running /usr/bin/libtoolize (1.5.24)
 \tOPTIONS = --force --copy
 * Running /usr/bin/aclocal (1.10)
 * Running /usr/bin/autoheader (2.61)
 * Running /usr/bin/automake (1.10)
 \tOPTIONS = --add-missing --copy
 configure.in:250: required file `tests/unit/tut/Makefile.in' not found

   Something went wrong, giving up!

 --Windows XP gives this error
 * Running /bin/libtoolize (1.4e)
 \tOPTIONS = --force --copy
 * Running /bin/aclocal (1.8.2)
 /usr/share/aclocal/autoopts.m4:22: warning: underquoted definition of
 AG_PATH_AUTOOPTS
   run info '(automake)Extending aclocal'
   or see
 http://sources.redhat.com/automake/automake.html#Extending%20aclocal
 * Running /bin/autoheader (2.59)
 * Running /bin/automake (1.8.2)
 \tOPTIONS = --add-missing --copy
 configure.in:350: required file `tests/unit/tut/Makefile.in' not found

   Something went wrong, giving up!

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/247>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From bicealyh at gmail.com  Sun Apr 12 21:17:11 2009
From: bicealyh at gmail.com (LiN YongHeng)
Date: Sun Apr 12 21:17:14 2009
Subject: [geos-devel] question about GEOSUnion?
Message-ID: <11e4f1140904121817o3acb3f0eo5c0203551d6b9cdc@mail.gmail.com>

Hello everyone,
I have a question about GEOSUnion().
I give value to g1 and g2 like below:
GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
"POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
like GEOSGeom g3 =
GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
Does anyone can tell me why?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090413/38a437e5/attachment.html
From robe.dnd at cityofboston.gov  Mon Apr 13 01:32:38 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Mon Apr 13 01:36:10 2009
Subject: [geos-devel] question about GEOSUnion?
References: <11e4f1140904121817o3acb3f0eo5c0203551d6b9cdc@mail.gmail.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F27F@ZDND.DND.boston.cob>

LiN YongHeng,

your geometry is invalid since first you don't have enough points to form a polygon after you remove the dupes and second you have self intersections.  Therefore the union is undefined at best.

Hope that helps,
Regina


-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of LiN YongHeng
Sent: Sun 4/12/2009 9:17 PM
To: geos-devel@lists.osgeo.org
Subject: [geos-devel] question about GEOSUnion?
 
Hello everyone,
I have a question about GEOSUnion().
I give value to g1 and g2 like below:
GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
"POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
like GEOSGeom g3 =
GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
Does anyone can tell me why?



-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090413/dddedf6a/attachment.html
From mateusz at loskot.net  Mon Apr 13 05:16:41 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Apr 13 05:16:46 2009
Subject: [geos-devel] question about GEOSUnion?
In-Reply-To: <11e4f1140904121817o3acb3f0eo5c0203551d6b9cdc@mail.gmail.com>
References: <11e4f1140904121817o3acb3f0eo5c0203551d6b9cdc@mail.gmail.com>
Message-ID: <49E302F9.2000008@loskot.net>

LiN YongHeng wrote:
> Hello everyone, I have a question about GEOSUnion(). I give value to 
> g1 and g2 like below: GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1 6,
> 1 3))"  and GEOSGeom g2 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"
> , but if I make union operation like GEOSGeom g3 = GEOSUnion(g1, g2),
> it give me result like "GEOMETRYCOLLECTION EMPTY". Does anyone can
> tell me why?

LiN YongHeng,

In order to be able to use GEOS or PostGIS, you need to read and
understand some basic informations included in the OGC Simple Feature
Specification

http://www.opengeospatial.org/standards/sfs

Otherwise, you will be hit the wall when you try to use every function.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From bicealyh at gmail.com  Mon Apr 13 21:31:40 2009
From: bicealyh at gmail.com (LiN YongHeng)
Date: Mon Apr 13 21:31:43 2009
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 10
In-Reply-To: <20090413160013.7BCB3E01205@lists.osgeo.org>
References: <20090413160013.7BCB3E01205@lists.osgeo.org>
Message-ID: <11e4f1140904131831v53fc55ecqc6e15e825d968e1a@mail.gmail.com>

Hello,everyone,
If you say that my geometry is invalid, it means that GeosEnvelop return a
invalid geometry. I use the
GeosEnvelop("LINE(1 3,1 6)") and it return the geometry like
GEOSGeom g2 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))".
After I use the GEOSUnion, it give me result like "GEOMETRYCOLLECTION
EMPTY".  Does anyone can
tell me how to do that?
2009/4/14 <geos-devel-request@lists.osgeo.org>

> Send geos-devel mailing list submissions to
>        geos-devel@lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>        http://lists.osgeo.org/mailman/listinfo/geos-devel
> or, via email, send a message with subject or body 'help' to
>        geos-devel-request@lists.osgeo.org
>
> You can reach the person managing the list at
>        geos-devel-owner@lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of geos-devel digest..."
>
>
> Today's Topics:
>
>   1. question about GEOSUnion? (LiN YongHeng)
>   2. RE: question about GEOSUnion? (Obe, Regina)
>   3. Re: question about GEOSUnion? (Mateusz Loskot)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Mon, 13 Apr 2009 09:17:11 +0800
> From: LiN YongHeng <bicealyh@gmail.com>
> Subject: [geos-devel] question about GEOSUnion?
> To: geos-devel@lists.osgeo.org
> Message-ID:
>        <11e4f1140904121817o3acb3f0eo5c0203551d6b9cdc@mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hello everyone,
> I have a question about GEOSUnion().
> I give value to g1 and g2 like below:
> GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
> "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
> like GEOSGeom g3 =
> GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
> Does anyone can tell me why?
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090413/38a437e5/attachment-0001.html
>
> ------------------------------
>
> Message: 2
> Date: Mon, 13 Apr 2009 01:32:38 -0400
> From: "Obe, Regina" <robe.dnd@cityofboston.gov>
> Subject: RE: [geos-devel] question about GEOSUnion?
> To: "GEOS Development List" <geos-devel@lists.osgeo.org>
> Message-ID:
>        <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F27F@ZDND.DND.boston.cob>
> Content-Type: text/plain; charset="iso-8859-1"
>
> LiN YongHeng,
>
> your geometry is invalid since first you don't have enough points to form a
> polygon after you remove the dupes and second you have self intersections.
>  Therefore the union is undefined at best.
>
> Hope that helps,
> Regina
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org on behalf of LiN YongHeng
> Sent: Sun 4/12/2009 9:17 PM
> To: geos-devel@lists.osgeo.org
> Subject: [geos-devel] question about GEOSUnion?
>
> Hello everyone,
> I have a question about GEOSUnion().
> I give value to g1 and g2 like below:
> GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
> "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
> like GEOSGeom g3 =
> GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
> Does anyone can tell me why?
>
>
>
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090413/dddedf6a/attachment-0001.html
>
> ------------------------------
>
> Message: 3
> Date: Mon, 13 Apr 2009 10:16:41 +0100
> From: Mateusz Loskot <mateusz@loskot.net>
> Subject: Re: [geos-devel] question about GEOSUnion?
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49E302F9.2000008@loskot.net>
> Content-Type: text/plain; charset=ISO-8859-1
>
> LiN YongHeng wrote:
> > Hello everyone, I have a question about GEOSUnion(). I give value to
> > g1 and g2 like below: GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1 6,
> > 1 3))"  and GEOSGeom g2 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"
> > , but if I make union operation like GEOSGeom g3 = GEOSUnion(g1, g2),
> > it give me result like "GEOMETRYCOLLECTION EMPTY". Does anyone can
> > tell me why?
>
> LiN YongHeng,
>
> In order to be able to use GEOS or PostGIS, you need to read and
> understand some basic informations included in the OGC Simple Feature
> Specification
>
> http://www.opengeospatial.org/standards/sfs
>
> Otherwise, you will be hit the wall when you try to use every function.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>
>
> ------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> End of geos-devel Digest, Vol 78, Issue 10
> ******************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090414/d5bce4a3/attachment.html
From bicealyh at gmail.com  Mon Apr 13 21:50:13 2009
From: bicealyh at gmail.com (LiN YongHeng)
Date: Mon Apr 13 21:50:25 2009
Subject: [geos-devel] [question]GEOSWKBWriter_write
Message-ID: <11e4f1140904131850u6b871485q85594c78b3e9f85f@mail.gmail.com>

hello everyone,
I want to ask you a question about that when the GEOSGeom g1 =
'GEOMETRYCOLLECTION EMPTY' and I use the GEOSWKBWriter_write to
write the g1 to wkb, my program collapse. It means that GEOS not work, Why?
Best regards,
LIN
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090414/99032206/attachment.html
From robe.dnd at cityofboston.gov  Tue Apr 14 00:17:42 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Apr 14 00:17:49 2009
Subject: [geos-devel] question about GEOSUnion?
References: <20090413160013.7BCB3E01205@lists.osgeo.org>
	<11e4f1140904131831v53fc55ecqc6e15e825d968e1a@mail.gmail.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F283@ZDND.DND.boston.cob>

LiN YongHeng,

Its best to change the subject line if you must reply to a digest and cut out all non-relevant stuff.

Now getting back to your question.  I don't use GEOS directly but thru PostGIS, but I presume it behaves the same.

1) There is no such thing as LINE.  If I try that I get invalid geometry, but maybe GEOS doesn't validate that and function then does somethig strange with it.

It should be 
LINESTRING(1 3,1 6)

2) When I do Envelope of LINESTRING(1 3, 3 6)

I get
LINESTRING(1 3,1 6)

3) Which version of GEOS are you using?

Hope that helps,
Regina
-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of LiN YongHeng
Sent: Mon 4/13/2009 9:31 PM
To: geos-devel@lists.osgeo.org
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 10
 
Hello,everyone,
If you say that my geometry is invalid, it means that GeosEnvelop return a
invalid geometry. I use the
GeosEnvelop("LINE(1 3,1 6)") and it return the geometry like
GEOSGeom g2 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))".
After I use the GEOSUnion, it give me result like "GEOMETRYCOLLECTION
EMPTY".  Does anyone can
tell me how to do that?
2009/4/14 <geos-devel-request@lists.osgeo.org>

> Message: 1
> Date: Mon, 13 Apr 2009 09:17:11 +0800
> From: LiN YongHeng <bicealyh@gmail.com>
> Subject: [geos-devel] question about GEOSUnion?
> To: geos-devel@lists.osgeo.org
> Message-ID:
>        <11e4f1140904121817o3acb3f0eo5c0203551d6b9cdc@mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hello everyone,
> I have a question about GEOSUnion().
> I give value to g1 and g2 like below:
> GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
> "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
> like GEOSGeom g3 =
> GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
> Does anyone can tell me why?
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090413/38a437e5/attachment-0001.html
>
> ------------------------------
>
> Message: 2
> Date: Mon, 13 Apr 2009 01:32:38 -0400
> From: "Obe, Regina" <robe.dnd@cityofboston.gov>
> Subject: RE: [geos-devel] question about GEOSUnion?
> To: "GEOS Development List" <geos-devel@lists.osgeo.org>
> Message-ID:
>        <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F27F@ZDND.DND.boston.cob>
> Content-Type: text/plain; charset="iso-8859-1"
>
> LiN YongHeng,
>
> your geometry is invalid since first you don't have enough points to form a
> polygon after you remove the dupes and second you have self intersections.
>  Therefore the union is undefined at best.
>
> Hope that helps,
> Regina
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org on behalf of LiN YongHeng
> Sent: Sun 4/12/2009 9:17 PM
> To: geos-devel@lists.osgeo.org
> Subject: [geos-devel] question about GEOSUnion?
>
> Hello everyone,
> I have a question about GEOSUnion().
> I give value to g1 and g2 like below:
> GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
> "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
> like GEOSGeom g3 =
> GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
> Does anyone can tell me why?
>
>
>
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090413/dddedf6a/attachment-0001.html
>
> ------------------------------
>
> Message: 3
> Date: Mon, 13 Apr 2009 10:16:41 +0100
> From: Mateusz Loskot <mateusz@loskot.net>
> Subject: Re: [geos-devel] question about GEOSUnion?
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49E302F9.2000008@loskot.net>
> Content-Type: text/plain; charset=ISO-8859-1
>
> LiN YongHeng wrote:
> > Hello everyone, I have a question about GEOSUnion(). I give value to
> > g1 and g2 like below: GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1 6,
> > 1 3))"  and GEOSGeom g2 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"
> > , but if I make union operation like GEOSGeom g3 = GEOSUnion(g1, g2),
> > it give me result like "GEOMETRYCOLLECTION EMPTY". Does anyone can
> > tell me why?
>
> LiN YongHeng,
>
> In order to be able to use GEOS or PostGIS, you need to read and
> understand some basic informations included in the OGC Simple Feature
> Specification
>
> http://www.opengeospatial.org/standards/sfs
>
> Otherwise, you will be hit the wall when you try to use every function.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>
>
> ------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> End of geos-devel Digest, Vol 78, Issue 10
> ******************************************
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090414/1bacb90a/attachment-0001.html
From robe.dnd at cityofboston.gov  Tue Apr 14 00:18:32 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Apr 14 00:19:43 2009
Subject: [geos-devel] question about GEOSUnion?
References: <20090413160013.7BCB3E01205@lists.osgeo.org><11e4f1140904131831v53fc55ecqc6e15e825d968e1a@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F283@ZDND.DND.boston.cob>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F284@ZDND.DND.boston.cob>

Oops typo I meant

LINESTRING(1 3,1 6)

envelope gives back the same thing

LINESTRING(1 3,1 6)

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of Obe, Regina
Sent: Tue 4/14/2009 12:17 AM
To: GEOS Development List
Subject: RE: [geos-devel] question about GEOSUnion?
 
LiN YongHeng,

Its best to change the subject line if you must reply to a digest and cut out all non-relevant stuff.

Now getting back to your question.  I don't use GEOS directly but thru PostGIS, but I presume it behaves the same.

1) There is no such thing as LINE.  If I try that I get invalid geometry, but maybe GEOS doesn't validate that and function then does somethig strange with it.

It should be 
LINESTRING(1 3,1 6)

2) When I do Envelope of LINESTRING(1 3, 3 6)

I get
LINESTRING(1 3,1 6)

3) Which version of GEOS are you using?

Hope that helps,
Regina
-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of LiN YongHeng
Sent: Mon 4/13/2009 9:31 PM
To: geos-devel@lists.osgeo.org
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 10
 
Hello,everyone,
If you say that my geometry is invalid, it means that GeosEnvelop return a
invalid geometry. I use the
GeosEnvelop("LINE(1 3,1 6)") and it return the geometry like
GEOSGeom g2 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))".
After I use the GEOSUnion, it give me result like "GEOMETRYCOLLECTION
EMPTY".  Does anyone can
tell me how to do that?
2009/4/14 <geos-devel-request@lists.osgeo.org>

> Message: 1
> Date: Mon, 13 Apr 2009 09:17:11 +0800
> From: LiN YongHeng <bicealyh@gmail.com>
> Subject: [geos-devel] question about GEOSUnion?
> To: geos-devel@lists.osgeo.org
> Message-ID:
>        <11e4f1140904121817o3acb3f0eo5c0203551d6b9cdc@mail.gmail.com>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hello everyone,
> I have a question about GEOSUnion().
> I give value to g1 and g2 like below:
> GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
> "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
> like GEOSGeom g3 =
> GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
> Does anyone can tell me why?
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090413/38a437e5/attachment-0001.html
>
> ------------------------------
>
> Message: 2
> Date: Mon, 13 Apr 2009 01:32:38 -0400
> From: "Obe, Regina" <robe.dnd@cityofboston.gov>
> Subject: RE: [geos-devel] question about GEOSUnion?
> To: "GEOS Development List" <geos-devel@lists.osgeo.org>
> Message-ID:
>        <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F27F@ZDND.DND.boston.cob>
> Content-Type: text/plain; charset="iso-8859-1"
>
> LiN YongHeng,
>
> your geometry is invalid since first you don't have enough points to form a
> polygon after you remove the dupes and second you have self intersections.
>  Therefore the union is undefined at best.
>
> Hope that helps,
> Regina
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org on behalf of LiN YongHeng
> Sent: Sun 4/12/2009 9:17 PM
> To: geos-devel@lists.osgeo.org
> Subject: [geos-devel] question about GEOSUnion?
>
> Hello everyone,
> I have a question about GEOSUnion().
> I give value to g1 and g2 like below:
> GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  and GEOSGeom g2 =
> "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"  , but if I make union operation
> like GEOSGeom g3 =
> GEOSUnion(g1, g2), it give me result like "GEOMETRYCOLLECTION EMPTY".
> Does anyone can tell me why?
>
>
>
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> http://lists.osgeo.org/pipermail/geos-devel/attachments/20090413/dddedf6a/attachment-0001.html
>
> ------------------------------
>
> Message: 3
> Date: Mon, 13 Apr 2009 10:16:41 +0100
> From: Mateusz Loskot <mateusz@loskot.net>
> Subject: Re: [geos-devel] question about GEOSUnion?
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49E302F9.2000008@loskot.net>
> Content-Type: text/plain; charset=ISO-8859-1
>
> LiN YongHeng wrote:
> > Hello everyone, I have a question about GEOSUnion(). I give value to
> > g1 and g2 like below: GEOSGeom g1 = "POLYGON ((1  3, 1  3, 1  6, 1 6,
> > 1 3))"  and GEOSGeom g2 = "POLYGON ((1  3, 1  3, 1  6, 1  6, 1 3))"
> > , but if I make union operation like GEOSGeom g3 = GEOSUnion(g1, g2),
> > it give me result like "GEOMETRYCOLLECTION EMPTY". Does anyone can
> > tell me why?
>
> LiN YongHeng,
>
> In order to be able to use GEOS or PostGIS, you need to read and
> understand some basic informations included in the OGC Simple Feature
> Specification
>
> http://www.opengeospatial.org/standards/sfs
>
> Otherwise, you will be hit the wall when you try to use every function.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>
>
> ------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
> End of geos-devel Digest, Vol 78, Issue 10
> ******************************************
>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090414/599baf63/attachment.html
From mateusz at loskot.net  Tue Apr 14 03:55:52 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr 14 03:55:58 2009
Subject: [geos-devel] [question]GEOSWKBWriter_write
In-Reply-To: <11e4f1140904131850u6b871485q85594c78b3e9f85f@mail.gmail.com>
References: <11e4f1140904131850u6b871485q85594c78b3e9f85f@mail.gmail.com>
Message-ID: <49E44188.3000808@loskot.net>

LiN YongHeng wrote:
> hello everyone,
> I want to ask you a question about that when the GEOSGeom g1 =
> 'GEOMETRYCOLLECTION EMPTY' and I use the GEOSWKBWriter_write to
> write the g1 to wkb, my program collapse. It means that GEOS not work, Why?

You clearly haven't done your homework.
Please, read this first, then ask:

http://www.catb.org/~esr/faqs/smart-questions.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From strk at keybit.net  Tue Apr 14 04:58:08 2009
From: strk at keybit.net (strk)
Date: Tue Apr 14 04:59:14 2009
Subject: [geos-devel] Buffer gets 20 times faster
Message-ID: <20090414085807.GE13109@keybit.net>

Good news: bringing the Buffer package in sync with JTS-1.9+
results in some buffer operations completing in 1/20 of the time
they used to.

In particular, the fme.xml testcase under tests/xmltester runs now in
1.04 seconds while it took ~ 21.89 in geos-3.1.0.

This is due to both robustness and performance improvements.
Robustness results in the operation being performed only once
rather than 3 times each at reduced precision. Performance still
beats this much lower the nominal 7 seconds you get by dividing
the original time.

Time for testing some known dataset here.

Paul, where can I find the dataset you used at the Toronto Sprint
for such tests ?

--strk;

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From pramsey at cleverelephant.ca  Tue Apr 14 19:11:11 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue Apr 14 19:12:14 2009
Subject: [geos-devel] Re: Buffer gets 20 times faster
In-Reply-To: <20090414085807.GE13109@keybit.net>
References: <20090414085807.GE13109@keybit.net>
Message-ID: <30fe546d0904141611y9e331c3s8d2776366c2fcb79@mail.gmail.com>

I didn't do any buffer speed tests in Toronto. In fact, I don't think
I did any PostGIS profiling. You could use the states.shp file from
the GeoServer download as an example of "ordinary" data.

P

On Tue, Apr 14, 2009 at 1:58 AM, strk <strk@keybit.net> wrote:
> Good news: bringing the Buffer package in sync with JTS-1.9+
> results in some buffer operations completing in 1/20 of the time
> they used to.
>
> In particular, the fme.xml testcase under tests/xmltester runs now in
> 1.04 seconds while it took ~ 21.89 in geos-3.1.0.
>
> This is due to both robustness and performance improvements.
> Robustness results in the operation being performed only once
> rather than 3 times each at reduced precision. Performance still
> beats this much lower the nominal 7 seconds you get by dividing
> the original time.
>
> Time for testing some known dataset here.
>
> Paul, where can I find the dataset you used at the Toronto Sprint
> for such tests ?
>
> --strk;
>
> ?Free GIS & Flash consultant/developer ? ? ?() ?ASCII Ribbon Campaign
> ?http://foo.keybit.net/~strk/services.html ?/\ ?Keep it simple!
>
From bicealyh at gmail.com  Tue Apr 14 22:35:51 2009
From: bicealyh at gmail.com (LiN YongHeng)
Date: Tue Apr 14 22:35:53 2009
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 11
In-Reply-To: <20090414041749.6A812E01270@lists.osgeo.org>
References: <20090414041749.6A812E01270@lists.osgeo.org>
Message-ID: <11e4f1140904141935o30b53768h158f676d65cd7bfd@mail.gmail.com>

Hi Regina,
        The GEOS' Version I used is "3.1.0". Today, I use
GEOSEnvelop("LINESTRING(1 3,1 6)") again, what a pity, it don't return the
result like what you said. In my program, the result is "POLYGON ((1  3, 1
3, 1  6, 1  6, 1 3))". So I want to ask you which version of GEOS are you
using?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090415/461c5136/attachment.html
From robe.dnd at cityofboston.gov  Tue Apr 14 23:05:04 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Apr 14 23:05:09 2009
Subject: [geos-devel] Something wrong with GEOSEnvelope function in 3.1.0?
References: <20090414041749.6A812E01270@lists.osgeo.org>
	<11e4f1140904141935o30b53768h158f676d65cd7bfd@mail.gmail.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F28D@ZDND.DND.boston.cob>

LiN ,

I'm using GEOS 3.1.0 as well.  However on further inspection it looks like PostGIS uses its own implementation of Envelope and not the GEOS one, so you could very well be right that there is something wrong with that GEOS function.

Unfortunately I don't know enough about GEOS to test it apart from PostGIS.  

Maybe Mateusz or Sandro or Paul can confirm the issue.


Thanks,
Regina

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of LiN YongHeng
Sent: Tue 4/14/2009 10:35 PM
To: geos-devel@lists.osgeo.org
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 11
 
Hi Regina,
        The GEOS' Version I used is "3.1.0". Today, I use
GEOSEnvelop("LINESTRING(1 3,1 6)") again, what a pity, it don't return the
result like what you said. In my program, the result is "POLYGON ((1  3, 1
3, 1  6, 1  6, 1 3))". So I want to ask you which version of GEOS are you
using?



-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090414/7f86ac58/attachment.html
From robe.dnd at cityofboston.gov  Tue Apr 14 23:40:16 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Tue Apr 14 23:40:21 2009
Subject: [geos-devel] Something wrong with GEOSEnvelope function in 3.1.0?
References: <20090414041749.6A812E01270@lists.osgeo.org><11e4f1140904141935o30b53768h158f676d65cd7bfd@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D204D7F28D@ZDND.DND.boston.cob>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F28E@ZDND.DND.boston.cob>

LiN,

Actually I looked at the bug tracker, and this appears to be an already reported bug so you are right I think.

http://trac.osgeo.org/geos/ticket/160

In a mythical world the bounding box of a horizontal line would be a polygon where the top and bottom are the same line, but evidentally not the world we live in :)

Though the test example in bug tracker was using PostGIS so not sure what that version was since PostGIS doesn't even use GEOS for that function (or at least not anymore and that particular bug example works correctly in PostGIS 1.3.5+)


Thanks,
Regina




-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of Obe, Regina
Sent: Tue 4/14/2009 11:05 PM
To: GEOS Development List
Subject: [geos-devel] Something wrong with GEOSEnvelope function in 3.1.0?
 
LiN ,

I'm using GEOS 3.1.0 as well.  However on further inspection it looks like PostGIS uses its own implementation of Envelope and not the GEOS one, so you could very well be right that there is something wrong with that GEOS function.

Unfortunately I don't know enough about GEOS to test it apart from PostGIS.  

Maybe Mateusz or Sandro or Paul can confirm the issue.


Thanks,
Regina

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org on behalf of LiN YongHeng
Sent: Tue 4/14/2009 10:35 PM
To: geos-devel@lists.osgeo.org
Subject: [geos-devel] Re: geos-devel Digest, Vol 78, Issue 11
 
Hi Regina,
        The GEOS' Version I used is "3.1.0". Today, I use
GEOSEnvelop("LINESTRING(1 3,1 6)") again, what a pity, it don't return the
result like what you said. In my program, the result is "POLYGON ((1  3, 1
3, 1  6, 1  6, 1 3))". So I want to ask you which version of GEOS are you
using?



-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090414/073043c6/attachment.html
From strk at keybit.net  Wed Apr 15 10:17:12 2009
From: strk at keybit.net (strk)
Date: Wed Apr 15 10:18:17 2009
Subject: [geos-devel] Numerical stability and -ffloat-store flag
Message-ID: <20090415141712.GO30190@keybit.net>

Some of you may remember the numerical stability issue
I've been struggling with 3 years ago:
http://lists.osgeo.org/pipermail/geos-devel/2006-April/002202.html

That problem shows up again now that I added a testcase
for buffering operation taken from JTS repository:
TestBufferExternal2.xml.

The test succeeds on a 64bit system, fails on a 32bit one, adding
this other variable to the already complex situation.

Both me and Mateusz confirmed adding -ffloat-store to CFLAGS
fixed the run on 32bit system too, so I suggest we add
that flag by default, for improved numerical stability, when
available in the compiler.

Ok for everyone ? 

--strk; 

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From bicealyh at gmail.com  Fri Apr 17 05:26:33 2009
From: bicealyh at gmail.com (LiN YongHeng)
Date: Fri Apr 17 05:26:35 2009
Subject: [geos-devel] [question]
Message-ID: <11e4f1140904170226m53814a23qbf6a28df03686c69@mail.gmail.com>

Hello everyone,
          Please look at the second  parameter of
GEOSWKBWriter_setIncludeSRID's function,like
this---GEOSWKBWriter_setIncludeSRID(GEOSWKBWriter* writer, const char
writeSRID). It use the const char to define the writeSRID, so it means that
the writeSRID's value not more than 256?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090417/60f914fd/attachment.html
From mateusz at loskot.net  Fri Apr 17 05:43:58 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Apr 17 05:52:18 2009
Subject: [geos-devel] [question]
In-Reply-To: <11e4f1140904170226m53814a23qbf6a28df03686c69@mail.gmail.com>
References: <11e4f1140904170226m53814a23qbf6a28df03686c69@mail.gmail.com>
Message-ID: <49E84F5E.1050608@loskot.net>

LiN YongHeng wrote:
> Hello everyone,

Hello,

Please, let me to repeat myself:

"Use meaningful, specific subject headers"

http://www.catb.org/~esr/faqs/smart-questions.html#bespecific

Subject: [question] is far from being meaningful.

> Please look at the second  parameter of 
> GEOSWKBWriter_setIncludeSRID's function,like 
> this---GEOSWKBWriter_setIncludeSRID(GEOSWKBWriter* writer, const char
>  writeSRID). It use the const char to define the writeSRID, so it 
> means that the writeSRID's value not more than 256?

The writeSRID is a flag which indicates if SRID should be written or
not. In other words, writeSRID is considered as of type of bool.
writeSRID = 0 means false.

Check implementation of geos::io::WKBWriter::setIncludeSRID() and
you will understand how it works.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From Tom.Kralidis at ec.gc.ca  Mon Apr 20 11:33:53 2009
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Mon Apr 20 11:33:59 2009
Subject: [geos-devel] build error on trunk
In-Reply-To: <4C1F40E8-23D5-49A6-AA02-5673188C6925@frii.com>
References: <047.5985c73c13d6291585a0bb6b52e9a1ee@osgeo.org><30fe546d0902021132w55bc6cb1v857e57e65fc1857c@mail.gmail.com>
	<4C1F40E8-23D5-49A6-AA02-5673188C6925@frii.com>
Message-ID: <23842457308FD64AA88A8EE62F2A7D5B8338F9@OntExch3.ontario.int.ec.gc.ca>


On fc10, using svn trunk:

$ ./autogen.sh && ./configure --enable-python=yes && make

...gives me:

ar cru .libs/liblocation.a .libs/IndexedPointInAreaLocator.o
.libs/PointOnGeometryLocator.o .libs/SimplePointInAreaLocator.o
ranlib .libs/liblocation.a
creating liblocation.la
(cd .libs && rm -f liblocation.la && ln -s ../liblocation.la
liblocation.la)
make[4]: Leaving directory
`/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/locate'
make[3]: Leaving directory
`/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/locate'
Making all in distance
make[3]: Entering directory
`/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/distance'
make[4]: Entering directory
`/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/distance'
/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H
-I. -I../../../source/headers -I../../../source/headers/geos
-I../../../source/headers     -g -O2 -DGEOS_INLINE   -MT
DiscreteHausdorffDistance.lo -MD -MP -MF
.deps/DiscreteHausdorffDistance.Tpo -c -o DiscreteHausdorffDistance.lo
DiscreteHausdorffDistance.cpp
mkdir .libs
 g++ -DHAVE_CONFIG_H -I. -I../../../source/headers
-I../../../source/headers/geos -I../../../source/headers -g -O2
-DGEOS_INLINE -MT DiscreteHausdorffDistance.lo -MD -MP -MF
.deps/DiscreteHausdorffDistance.Tpo -c DiscreteHausdorffDistance.cpp
-fPIC -DPIC -o .libs/DiscreteHausdorffDistance.o
DiscreteHausdorffDistance.cpp:108: fatal error: opening dependency file
.deps/DiscreteHausdorffDistance.Tpo: Permission denied
compilation terminated.
make[4]: *** [DiscreteHausdorffDistance.lo] Error 1
make[4]: Leaving directory
`/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/distance'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory
`/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/distance'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory
`/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory
`/home/tkralidi/foss4g/geos/trunk/geos/source'
make: *** [all-recursive] Error 1

Not sure if / how this relates to http://trac.osgeo.org/geos/ticket/248

..Tom
From pramsey at opengeo.org  Mon Apr 20 12:04:56 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Mon Apr 20 12:05:00 2009
Subject: [geos-devel] build error on trunk
In-Reply-To: <23842457308FD64AA88A8EE62F2A7D5B8338F9@OntExch3.ontario.int.ec.gc.ca>
References: <047.5985c73c13d6291585a0bb6b52e9a1ee@osgeo.org>
	<30fe546d0902021132w55bc6cb1v857e57e65fc1857c@mail.gmail.com>
	<4C1F40E8-23D5-49A6-AA02-5673188C6925@frii.com>
	<23842457308FD64AA88A8EE62F2A7D5B8338F9@OntExch3.ontario.int.ec.gc.ca>
Message-ID: <30fe546d0904200904o56bf7eaj27c5fffbd178bd3d@mail.gmail.com>

I'm unable to duplicate this on OS/X at r2396. Anyone else able to duplicate?

P

On Mon, Apr 20, 2009 at 8:33 AM, Kralidis,Tom [Ontario]
<Tom.Kralidis@ec.gc.ca> wrote:
>
> On fc10, using svn trunk:
>
> $ ./autogen.sh && ./configure --enable-python=yes && make
>
> ...gives me:
>
> ar cru .libs/liblocation.a .libs/IndexedPointInAreaLocator.o
> .libs/PointOnGeometryLocator.o .libs/SimplePointInAreaLocator.o
> ranlib .libs/liblocation.a
> creating liblocation.la
> (cd .libs && rm -f liblocation.la && ln -s ../liblocation.la
> liblocation.la)
> make[4]: Leaving directory
> `/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/locate'
> make[3]: Leaving directory
> `/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/locate'
> Making all in distance
> make[3]: Entering directory
> `/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/distance'
> make[4]: Entering directory
> `/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/distance'
> /bin/sh ../../../libtool --tag=CXX ? --mode=compile g++ -DHAVE_CONFIG_H
> -I. -I../../../source/headers -I../../../source/headers/geos
> -I../../../source/headers ? ? -g -O2 -DGEOS_INLINE ? -MT
> DiscreteHausdorffDistance.lo -MD -MP -MF
> .deps/DiscreteHausdorffDistance.Tpo -c -o DiscreteHausdorffDistance.lo
> DiscreteHausdorffDistance.cpp
> mkdir .libs
> ?g++ -DHAVE_CONFIG_H -I. -I../../../source/headers
> -I../../../source/headers/geos -I../../../source/headers -g -O2
> -DGEOS_INLINE -MT DiscreteHausdorffDistance.lo -MD -MP -MF
> .deps/DiscreteHausdorffDistance.Tpo -c DiscreteHausdorffDistance.cpp
> -fPIC -DPIC -o .libs/DiscreteHausdorffDistance.o
> DiscreteHausdorffDistance.cpp:108: fatal error: opening dependency file
> .deps/DiscreteHausdorffDistance.Tpo: Permission denied
> compilation terminated.
> make[4]: *** [DiscreteHausdorffDistance.lo] Error 1
> make[4]: Leaving directory
> `/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/distance'
> make[3]: *** [all-recursive] Error 1
> make[3]: Leaving directory
> `/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm/distance'
> make[2]: *** [all-recursive] Error 1
> make[2]: Leaving directory
> `/home/tkralidi/foss4g/geos/trunk/geos/source/algorithm'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory
> `/home/tkralidi/foss4g/geos/trunk/geos/source'
> make: *** [all-recursive] Error 1
>
> Not sure if / how this relates to http://trac.osgeo.org/geos/ticket/248
>
> ..Tom
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From geos-trac at osgeo.org  Mon Apr 20 14:25:37 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr 20 14:25:39 2009
Subject: [geos-devel] Re: [GEOS] #215: Single-sided buffering implementation
In-Reply-To: <046.194dd1fb9160eca5e3555b6776685e43@osgeo.org>
References: <046.194dd1fb9160eca5e3555b6776685e43@osgeo.org>
Message-ID: <055.33b355a1a9be019724eb5bb272d4a12e@osgeo.org>

#215: Single-sided buffering implementation
-------------------------+--------------------------------------------------
 Reporter:  swongu       |        Owner:  geos-devel@lists.osgeo.org
     Type:  enhancement  |       Status:  reopened                  
 Priority:  major        |    Milestone:                            
Component:  Core         |      Version:  svn-trunk                 
 Severity:  Content      |   Resolution:                            
 Keywords:               |  
-------------------------+--------------------------------------------------
Changes (by swongu):

  * status:  closed => reopened
  * resolution:  fixed =>
  * milestone:  3.1.0 =>

Comment:

 I don't think this was ever patched...

 Now that JTS 1.9 is synced with GEOS this patch might have trouble landing
 on the trunk.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/215#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr 20 15:41:25 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr 20 15:41:27 2009
Subject: [geos-devel] Re: [GEOS] #215: Single-sided buffering implementation
In-Reply-To: <046.194dd1fb9160eca5e3555b6776685e43@osgeo.org>
References: <046.194dd1fb9160eca5e3555b6776685e43@osgeo.org>
Message-ID: <055.70386d1e4f47abe4212e9bea43dae8a9@osgeo.org>

#215: Single-sided buffering implementation
-------------------------+--------------------------------------------------
 Reporter:  swongu       |        Owner:  geos-devel@lists.osgeo.org
     Type:  enhancement  |       Status:  reopened                  
 Priority:  major        |    Milestone:                            
Component:  Core         |      Version:  svn-trunk                 
 Severity:  Content      |   Resolution:                            
 Keywords:               |  
-------------------------+--------------------------------------------------
Comment (by pramsey):

 Could you try to patch it in, Steven, or are we completely hosed now?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/215#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Tue Apr 21 02:50:42 2009
From: strk at keybit.net (strk)
Date: Tue Apr 21 02:50:48 2009
Subject: [geos-devel] build error on trunk
In-Reply-To: <23842457308FD64AA88A8EE62F2A7D5B8338F9@OntExch3.ontario.int.ec.gc.ca>
References: <4C1F40E8-23D5-49A6-AA02-5673188C6925@frii.com>
	<23842457308FD64AA88A8EE62F2A7D5B8338F9@OntExch3.ontario.int.ec.gc.ca>
Message-ID: <20090421065042.GA36439@keybit.net>

On Mon, Apr 20, 2009 at 11:33:53AM -0400, Kralidis,Tom [Ontario] wrote:

> DiscreteHausdorffDistance.cpp:108: fatal error: opening dependency file
> .deps/DiscreteHausdorffDistance.Tpo: Permission denied
> compilation terminated.

Try a make distclean, also check permissions of the new directories.

--strk;

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From mateusz at loskot.net  Tue Apr 21 05:27:17 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr 21 05:27:03 2009
Subject: [geos-devel] build error on trunk
In-Reply-To: <30fe546d0904200904o56bf7eaj27c5fffbd178bd3d@mail.gmail.com>
References: <047.5985c73c13d6291585a0bb6b52e9a1ee@osgeo.org>	<30fe546d0902021132w55bc6cb1v857e57e65fc1857c@mail.gmail.com>	<4C1F40E8-23D5-49A6-AA02-5673188C6925@frii.com>	<23842457308FD64AA88A8EE62F2A7D5B8338F9@OntExch3.ontario.int.ec.gc.ca>
	<30fe546d0904200904o56bf7eaj27c5fffbd178bd3d@mail.gmail.com>
Message-ID: <49ED9175.6060802@loskot.net>

Paul Ramsey wrote:
> I'm unable to duplicate this on OS/X at r2396. Anyone else able to duplicate?

I've tested today's revision 2398 on two machines with, 32 and 64 bit,
both running gUbuntu 8.10.
I am unable to reproduce this problem. All 477 unit tests pass.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From Tom.Kralidis at ec.gc.ca  Tue Apr 21 08:13:30 2009
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Tue Apr 21 08:13:42 2009
Subject: [geos-devel] build error on trunk
In-Reply-To: <20090421065042.GA36439@keybit.net>
References: <4C1F40E8-23D5-49A6-AA02-5673188C6925@frii.com><23842457308FD64AA88A8EE62F2A7D5B8338F9@OntExch3.ontario.int.ec.gc.ca>
	<20090421065042.GA36439@keybit.net>
Message-ID: <23842457308FD64AA88A8EE62F2A7D5B833910@OntExch3.ontario.int.ec.gc.ca>


> > DiscreteHausdorffDistance.cpp:108: fatal error: opening dependency 
> > file
> > .deps/DiscreteHausdorffDistance.Tpo: Permission denied compilation 
> > terminated.
> 
> Try a make distclean, also check permissions of the new directories.
> 

Tried that, still no dice.  Did a fresh svn co and things worked.
Probably privs.  Ticket 248 closed.  Sorry for the noise.

..Tom
From q.vuilliot at gmail.com  Tue Apr 21 09:24:58 2009
From: q.vuilliot at gmail.com (Quentin VUILLIOT)
Date: Tue Apr 21 09:25:00 2009
Subject: [geos-devel] split self-intersecting LineString into
	non-intersecting lines
Message-ID: <bd7fd0d20904210624n660e1415m3bed6f037e94fb19@mail.gmail.com>

Hello everyone,

I'm not sure this is the right place to post such a question, but I
can't find any other Geos mailing-list or forum. So please excuse me
if I'm wrong here.

I can't find a way of splitting a linestring that intersects itself
into several linestrings that don't. I'm surprised not to find any
clues about that on the web, though it seems to me that it should be a
rather common problem, isn't it?
I mean, there is a function to determine whether a linestring is
simple or not, but nothing to do more with it, like locate the
intersection points?

Thank you in advance for your answers

Quentin
From geosanak at gmail.com  Wed Apr 22 09:17:04 2009
From: geosanak at gmail.com (Sanak)
Date: Wed Apr 22 09:17:06 2009
Subject: [geos-devel] split self-intersecting LineString into 
	non-intersecting lines
In-Reply-To: <bd7fd0d20904210624n660e1415m3bed6f037e94fb19@mail.gmail.com>
References: <bd7fd0d20904210624n660e1415m3bed6f037e94fb19@mail.gmail.com>
Message-ID: <5f9be0a0904220617v537c38f5q5bd87d6c59ee0371@mail.gmail.com>

Hi Quentin,

"Union" method will split self-intersection linestring.

[Input]
A:LINESTRING(0 0, 100 100, 0 100, 100 0)
B:POINT(0 0)
- B is a one node of A.

Result = A.Union(B)

[Output]
Result:MULTILINESTRING ((0 0, 50 50), (50 50, 100 100, 0 100, 50 50), (50
50, 100 0))

Refer to the document "FOSS4G 2007 : Secrets of the JTS Topology Suite"
(http://www.foss4g2007.org/presentations/view.php?abstract_id=115 )
for details.

Regards,

Sanak.

2009/4/21 Quentin VUILLIOT <q.vuilliot@gmail.com>

> Hello everyone,
>
> I'm not sure this is the right place to post such a question, but I
> can't find any other Geos mailing-list or forum. So please excuse me
> if I'm wrong here.
>
> I can't find a way of splitting a linestring that intersects itself
> into several linestrings that don't. I'm surprised not to find any
> clues about that on the web, though it seems to me that it should be a
> rather common problem, isn't it?
> I mean, there is a function to determine whether a linestring is
> simple or not, but nothing to do more with it, like locate the
> intersection points?
>
> Thank you in advance for your answers
>
> Quentin
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090422/e48377c3/attachment.html
From q.vuilliot at gmail.com  Thu Apr 23 04:24:45 2009
From: q.vuilliot at gmail.com (Quentin VUILLIOT)
Date: Thu Apr 23 04:31:03 2009
Subject: [geos-devel] split self-intersecting LineString into 
	non-intersecting lines
In-Reply-To: <5f9be0a0904220617v537c38f5q5bd87d6c59ee0371@mail.gmail.com>
References: <bd7fd0d20904210624n660e1415m3bed6f037e94fb19@mail.gmail.com>
	<5f9be0a0904220617v537c38f5q5bd87d6c59ee0371@mail.gmail.com>
Message-ID: <bd7fd0d20904230124y1dd4c597re722d3e686f0d569@mail.gmail.com>

Hi Sanak!

Thank you so much for this trick, it is a bit curious but works just great!

Best regards,
Quentin

2009/4/22 Sanak <geosanak@gmail.com>:
> Hi Quentin,
>
> "Union" method will split self-intersection linestring.
>
> [Input]
> A:LINESTRING(0 0, 100 100, 0 100, 100 0)
> B:POINT(0 0)
> - B is a one node of A.
>
> Result = A.Union(B)
>
> [Output]
> Result:MULTILINESTRING ((0 0, 50 50), (50 50, 100 100, 0 100, 50 50), (50
> 50, 100 0))
>
> Refer to the document "FOSS4G 2007 : Secrets of the JTS Topology Suite"
> (http://www.foss4g2007.org/presentations/view.php?abstract_id=115 )
> for details.
>
> Regards,
>
> Sanak.
>
> 2009/4/21 Quentin VUILLIOT <q.vuilliot@gmail.com>
>>
>> Hello everyone,
>>
>> I'm not sure this is the right place to post such a question, but I
>> can't find any other Geos mailing-list or forum. So please excuse me
>> if I'm wrong here.
>>
>> I can't find a way of splitting a linestring that intersects itself
>> into several linestrings that don't. I'm surprised not to find any
>> clues about that on the web, though it seems to me that it should be a
>> rather common problem, isn't it?
>> I mean, there is a function to determine whether a linestring is
>> simple or not, but nothing to do more with it, like locate the
>> intersection points?
>>
>> Thank you in advance for your answers
>>
>> Quentin
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From aronbierbaum at gmail.com  Mon Apr 27 14:47:19 2009
From: aronbierbaum at gmail.com (Aron Bierbaum)
Date: Mon Apr 27 14:47:21 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
Message-ID: <34457a4c0904271147x40eac7a1qae7b9cfdd51aa57a@mail.gmail.com>

We have a rather large application that queries a PostgreSQL database
from multiple threads and creates Shapely/GEOS geometry objects from
multiple threads using the WKB builder. Over the past few weeks we
have been trying to track down a odd crash in our application that
seems to happen when we create a Shapely/GEOS object from WKT in order
to start the DB query. After many hours of debugging we believe we
have a solution. From what we can tell our application was crashing
because memory that was being allocated in the GEOS dll was being
released inside of our application. When converting a GEOS geometry
object to a string, Shapely calls GEOSGeomToWKT_r which creates a char
buffer using std::malloc. After the call Shapely releases the memory
using the standard free function. According to a "Potential Errors
Passing CRT Objects Across DLL Boundaries" [1]:

   "A related problem can occur when you allocate memory (either
explicitly with new or malloc, or implicitly with strdup,
strstreambuf::str, and so on) and then pass a pointer across a DLL
boundary to be freed. This can cause a memory access violation or heap
corruption if the DLL and its users use different copies of the CRT
libraries.

The basic problem is that two DLLs can use different copies of the
CRT. This can lead to many problems if you don't allocated and free
memory in the same DLL. In order to get around this problem we added a
new function to the GEOS capi, GEOSFree, that simply frees memory
allocated in the GEOS DLL. Then in Shapely we just use this function
where we need to ensure that memory allocated and returned from GEOS
is also freed in the GEOS DLL.

I have attached a patch for both GEOS and Shapely that we have been
testing with for a few weeks without any problems. Does anyone have a
better way to address this issue?

Thanks,
Aron Bierbaum
-------------- next part --------------
A non-text attachment was scrubbed...
Name: geos.patch
Type: text/x-patch
Size: 923 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090427/2bbecbd5/geos.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: shapely.patch
Type: text/x-patch
Size: 1161 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090427/2bbecbd5/shapely.bin
From pramsey at opengeo.org  Mon Apr 27 15:28:13 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Mon Apr 27 15:28:31 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <34457a4c0904271147x40eac7a1qae7b9cfdd51aa57a@mail.gmail.com>
References: <34457a4c0904271147x40eac7a1qae7b9cfdd51aa57a@mail.gmail.com>
Message-ID: <30fe546d0904271228y341222f3ld2c03cb970151f6d@mail.gmail.com>

On Mon, Apr 27, 2009 at 11:47 AM, Aron Bierbaum <aronbierbaum@gmail.com> wrote:

> I have attached a patch for both GEOS and Shapely that we have been
> testing with for a few weeks without any problems. Does anyone have a
> better way to address this issue?

Pretty simple patch... more C-API changes. Hmm. Perhaps GEOS 3.2 will
be out sooner than one might expect.

I don't have the smarts to know if there's a better way.

P.
From cfis at savagexi.com  Mon Apr 27 15:44:02 2009
From: cfis at savagexi.com (Charlie Savage)
Date: Mon Apr 27 15:44:13 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <34457a4c0904271147x40eac7a1qae7b9cfdd51aa57a@mail.gmail.com>
References: <34457a4c0904271147x40eac7a1qae7b9cfdd51aa57a@mail.gmail.com>
Message-ID: <49F60B02.4030100@savagexi.com>

Hi Aron,

> From what we can tell our application was crashing
> because memory that was being allocated in the GEOS dll was being
> released inside of our application. When converting a GEOS geometry
> object to a string, Shapely calls GEOSGeomToWKT_r which creates a char
> buffer using std::malloc. After the call Shapely releases the memory
> using the standard free function. According to a "Potential Errors
> Passing CRT Objects Across DLL Boundaries" [1]:

Yup, you can't do that.  The GEOS api has to provide a way of freeing 
the buffer (just like your patch adds).

> I have attached a patch for both GEOS and Shapely that we have been
> testing with for a few weeks without any problems. Does anyone have a
> better way to address this issue?

If you build Shapely (and Geos) using VC++ in Debug mode with assertions 
on (-RTC1 off the top of my head), then VC will raise assertions errors 
on problems like this.  Its a lot easier to find them that way.

Charlie
-- 
Charlie Savage
http://cfis.savagexi.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090427/8a98f6d6/smime.bin
From cfis at savagexi.com  Mon Apr 27 15:46:09 2009
From: cfis at savagexi.com (Charlie Savage)
Date: Mon Apr 27 15:46:22 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <30fe546d0904271228y341222f3ld2c03cb970151f6d@mail.gmail.com>
References: <34457a4c0904271147x40eac7a1qae7b9cfdd51aa57a@mail.gmail.com>
	<30fe546d0904271228y341222f3ld2c03cb970151f6d@mail.gmail.com>
Message-ID: <49F60B81.8070304@savagexi.com>



Paul Ramsey wrote:
> On Mon, Apr 27, 2009 at 11:47 AM, Aron Bierbaum <aronbierbaum@gmail.com> wrote:
> 
>> I have attached a patch for both GEOS and Shapely that we have been
>> testing with for a few weeks without any problems. Does anyone have a
>> better way to address this issue?
> 
> Pretty simple patch... more C-API changes. Hmm. Perhaps GEOS 3.2 will
> be out sooner than one might expect.
> 
> I don't have the smarts to know if there's a better way.

There isn't.  For every piece of memory GEOS allocates and returns via 
the capi (or C++ api), it must provide a function to free it.

If you are using C++ you can get around it by providing a memory 
deallocator for objects returned from GEOS (say for std::string in this 
case) but for C you obviously can't do that.

Charlie


-- 
Charlie Savage
http://cfis.savagexi.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090427/bbef4cf8/smime.bin
From pramsey at opengeo.org  Mon Apr 27 16:17:51 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Mon Apr 27 16:26:18 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <49F60B81.8070304@savagexi.com>
References: <34457a4c0904271147x40eac7a1qae7b9cfdd51aa57a@mail.gmail.com>
	<30fe546d0904271228y341222f3ld2c03cb970151f6d@mail.gmail.com>
	<49F60B81.8070304@savagexi.com>
Message-ID: <30fe546d0904271317h7cf5a9dfqba17392aedc61572@mail.gmail.com>

In that case, Aron, can you put your GEOS patch into a Trac issue
(http://trac.osgeo.org/geos) for us to put into the next release.

Thanks,

P.

On Mon, Apr 27, 2009 at 12:46 PM, Charlie Savage <cfis@savagexi.com> wrote:
>
>
> Paul Ramsey wrote:
>>
>> On Mon, Apr 27, 2009 at 11:47 AM, Aron Bierbaum <aronbierbaum@gmail.com>
>> wrote:
>>
>>> I have attached a patch for both GEOS and Shapely that we have been
>>> testing with for a few weeks without any problems. Does anyone have a
>>> better way to address this issue?
>>
>> Pretty simple patch... more C-API changes. Hmm. Perhaps GEOS 3.2 will
>> be out sooner than one might expect.
>>
>> I don't have the smarts to know if there's a better way.
>
> There isn't. ?For every piece of memory GEOS allocates and returns via the
> capi (or C++ api), it must provide a function to free it.
>
> If you are using C++ you can get around it by providing a memory deallocator
> for objects returned from GEOS (say for std::string in this case) but for C
> you obviously can't do that.
>
> Charlie
>
>
> --
> Charlie Savage
> http://cfis.savagexi.com
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From geos-trac at osgeo.org  Mon Apr 27 16:37:17 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr 27 16:37:18 2009
Subject: [geos-devel] [GEOS] #249: GEOS, Shapely, DLLs, and memory
Message-ID: <045.6b582997ca86e001db103055a8611b6f@osgeo.org>

#249: GEOS, Shapely, DLLs, and memory
------------------------+---------------------------------------------------
 Reporter:  aronb       |       Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.2.0                     
Component:  Default     |     Version:  3.1.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Add a GEOSFree function to the capi so that users can free memory
 allocated in the GEOS DLL from the same DLL. This is needed if the user
 code is using a different copy of the CRT than GEOS.

  * [http://lists.osgeo.org/pipermail/geos-devel/2009-April/004102.html
 Original post to geos-devel]

  * [http://msdn.microsoft.com/en-us/library/ms235460.aspx Potential Errors
 Passing CRT Objects Across DLL Boundaries]

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/249>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From aronbierbaum at gmail.com  Mon Apr 27 16:39:23 2009
From: aronbierbaum at gmail.com (Aron Bierbaum)
Date: Mon Apr 27 16:39:27 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <30fe546d0904271317h7cf5a9dfqba17392aedc61572@mail.gmail.com>
References: <34457a4c0904271147x40eac7a1qae7b9cfdd51aa57a@mail.gmail.com>
	<30fe546d0904271228y341222f3ld2c03cb970151f6d@mail.gmail.com>
	<49F60B81.8070304@savagexi.com>
	<30fe546d0904271317h7cf5a9dfqba17392aedc61572@mail.gmail.com>
Message-ID: <34457a4c0904271339i3dd5c61crd7552afb1e409196@mail.gmail.com>

I have added a ticket for the issue. I was not sure exactly you wanted
for the version or milestone fields, but I gave it a shot.

   http://trac.osgeo.org/geos/ticket/249

Thanks,
Aron

On Mon, Apr 27, 2009 at 3:17 PM, Paul Ramsey <pramsey@opengeo.org> wrote:
> In that case, Aron, can you put your GEOS patch into a Trac issue
> (http://trac.osgeo.org/geos) for us to put into the next release.
>
> Thanks,
>
> P.
>
> On Mon, Apr 27, 2009 at 12:46 PM, Charlie Savage <cfis@savagexi.com> wrote:
>>
>>
>> Paul Ramsey wrote:
>>>
>>> On Mon, Apr 27, 2009 at 11:47 AM, Aron Bierbaum <aronbierbaum@gmail.com>
>>> wrote:
>>>
>>>> I have attached a patch for both GEOS and Shapely that we have been
>>>> testing with for a few weeks without any problems. Does anyone have a
>>>> better way to address this issue?
>>>
>>> Pretty simple patch... more C-API changes. Hmm. Perhaps GEOS 3.2 will
>>> be out sooner than one might expect.
>>>
>>> I don't have the smarts to know if there's a better way.
>>
>> There isn't. ?For every piece of memory GEOS allocates and returns via the
>> capi (or C++ api), it must provide a function to free it.
>>
>> If you are using C++ you can get around it by providing a memory deallocator
>> for objects returned from GEOS (say for std::string in this case) but for C
>> you obviously can't do that.
>>
>> Charlie
>>
>>
>> --
>> Charlie Savage
>> http://cfis.savagexi.com
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From ragi at burhum.com  Tue Apr 28 13:31:56 2009
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Tue Apr 28 13:31:57 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
Message-ID: <738927440904281031t18328ac3lded8b35392f505b1@mail.gmail.com>

>
>
> Date: Mon, 27 Apr 2009 13:46:09 -0600
> From: Charlie Savage <cfis@savagexi.com>
> Subject: Re: [geos-devel] GEOS, Shapely, DLLs, and memory
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49F60B81.8070304@savagexi.com>
> Content-Type: text/plain; charset="utf-8"
>
>
>
> Paul Ramsey wrote:
> > On Mon, Apr 27, 2009 at 11:47 AM, Aron Bierbaum <aronbierbaum@gmail.com>
> wrote:
> >
> >> I have attached a patch for both GEOS and Shapely that we have been
> >> testing with for a few weeks without any problems. Does anyone have a
> >> better way to address this issue?
> >
> > Pretty simple patch... more C-API changes. Hmm. Perhaps GEOS 3.2 will
> > be out sooner than one might expect.
> >
> > I don't have the smarts to know if there's a better way.
>
> There isn't.  For every piece of memory GEOS allocates and returns via
> the capi (or C++ api), it must provide a function to free it.
>
> If you are using C++ you can get around it by providing a memory
> deallocator for objects returned from GEOS (say for std::string in this
> case) but for C you obviously can't do that.


Well, there is another way (not necessarily "better"), which is to compile
the GEOS dll yourself using the same runtime that you use in your main
application. That is what I have been doing this whole time to avoid this
issue.

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090428/badf67f8/attachment.html
From mateusz at loskot.net  Tue Apr 28 15:22:46 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr 28 15:22:54 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <738927440904281031t18328ac3lded8b35392f505b1@mail.gmail.com>
References: <738927440904281031t18328ac3lded8b35392f505b1@mail.gmail.com>
Message-ID: <49F75786.7030101@loskot.net>

Ragi Y. Burhum wrote:
> 
>     Date: Mon, 27 Apr 2009 13:46:09 -0600
>     From: Charlie Savage <cfis@savagexi.com <mailto:cfis@savagexi.com>>
>     Subject: Re: [geos-devel] GEOS, Shapely, DLLs, and memory
>     To: GEOS Development List <geos-devel@lists.osgeo.org
>     <mailto:geos-devel@lists.osgeo.org>>
>     Message-ID: <49F60B81.8070304@savagexi.com
>     <mailto:49F60B81.8070304@savagexi.com>>
>     Content-Type: text/plain; charset="utf-8"
> 
> 
> 
>     Paul Ramsey wrote:
>     > On Mon, Apr 27, 2009 at 11:47 AM, Aron Bierbaum
>     <aronbierbaum@gmail.com <mailto:aronbierbaum@gmail.com>> wrote:
>     >
>     >> I have attached a patch for both GEOS and Shapely that we have been
>     >> testing with for a few weeks without any problems. Does anyone have a
>     >> better way to address this issue?
>     >
>     > Pretty simple patch... more C-API changes. Hmm. Perhaps GEOS 3.2 will
>     > be out sooner than one might expect.
>     >
>     > I don't have the smarts to know if there's a better way.
> 
>     There isn't.  For every piece of memory GEOS allocates and returns via
>     the capi (or C++ api), it must provide a function to free it.
> 
>     If you are using C++ you can get around it by providing a memory
>     deallocator for objects returned from GEOS (say for std::string in this
>     case) but for C you obviously can't do that.
> 
> 
> Well, there is another way (not necessarily "better"), which is to
> compile the GEOS dll yourself using the same runtime that you use in
> your main application. That is what I have been doing this whole time to
> avoid this issue.

It will not help.

You must not cross modules boundaries, it's well known issue on Windows
platform. See "How should I deallocate resources acquainted from GDAL on
Windows?" in GDAL FAQ and the two links below this Q&A:

http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous#FAQ-Miscellaneous

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From cfis at savagexi.com  Tue Apr 28 15:28:03 2009
From: cfis at savagexi.com (Charlie Savage)
Date: Tue Apr 28 15:28:11 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <49F75786.7030101@loskot.net>
References: <738927440904281031t18328ac3lded8b35392f505b1@mail.gmail.com>
	<49F75786.7030101@loskot.net>
Message-ID: <49F758C3.3080609@savagexi.com>



>> Well, there is another way (not necessarily "better"), which is to
>> compile the GEOS dll yourself using the same runtime that you use in
>> your main application. That is what I have been doing this whole time to
>> avoid this issue.
> 
> It will not help.

Actually Ragi is correct, that does work.  And for an internal 
environment its fine. But for distributing GEOS binaries its too fragile 
because you never now what other runtime libraries will be linked into 
an application.

> You must not cross modules boundaries, it's well known issue on Windows
> platform.

If an executable and its dlls link against the exact same runtime 
library, you can cross module boundaries because all the memory and file 
handles are managed by the same instance of the runtime library (so in 
effect you aren't crossing runtime library boundaries).

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20090428/f795ab03/smime.bin
From mateusz at loskot.net  Tue Apr 28 15:34:58 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr 28 15:35:03 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <49F758C3.3080609@savagexi.com>
References: <738927440904281031t18328ac3lded8b35392f505b1@mail.gmail.com>	<49F75786.7030101@loskot.net>
	<49F758C3.3080609@savagexi.com>
Message-ID: <49F75A62.1030503@loskot.net>

Charlie Savage wrote:
> 
> 
>>> Well, there is another way (not necessarily "better"), which is to
>>> compile the GEOS dll yourself using the same runtime that you use in
>>> your main application. That is what I have been doing this whole time to
>>> avoid this issue.
>>
>> It will not help.
> 
> Actually Ragi is correct, that does work.

Charlie, Ragi,

I take it beck. Yes, you are right.
Replying in rush, I've missed the fact Ragi is talking
about "the same runtime" what I read as "the same compiler"
and corrected as same compiler != same runtime.

>> You must not cross modules boundaries, it's well known issue on Windows
>> platform.
> 
> If an executable and its dlls link against the exact same runtime
> library, you can cross module boundaries because all the memory and file
> handles are managed by the same instance of the runtime library (so in
> effect you aren't crossing runtime library boundaries).

Yes, same runtime, yes.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From ragi at burhum.com  Wed Apr 29 12:51:04 2009
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Wed Apr 29 12:51:06 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
Message-ID: <738927440904290951v3f29a8afy628d708c991fd866@mail.gmail.com>

On Wed, Apr 29, 2009 at 9:00 AM, <geos-devel-request@lists.osgeo.org> wrote:

> Date: Tue, 28 Apr 2009 20:34:58 +0100
> From: Mateusz Loskot <mateusz@loskot.net>
> Subject: Re: [geos-devel] GEOS, Shapely, DLLs, and memory
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49F75A62.1030503@loskot.net>
> Content-Type: text/plain; charset=UTF-8
>
> Charlie Savage wrote:
> >
> >
> >>> Well, there is another way (not necessarily "better"), which is to
> >>> compile the GEOS dll yourself using the same runtime that you use in
> >>> your main application. That is what I have been doing this whole time
> to
> >>> avoid this issue.
> >>
> >> It will not help.
> >
> > Actually Ragi is correct, that does work.
>
> Charlie, Ragi,
>
> I take it beck. Yes, you are right.
> Replying in rush, I've missed the fact Ragi is talking
> about "the same runtime" what I read as "the same compiler"
> and corrected as same compiler != same runtime.
>
> >> You must not cross modules boundaries, it's well known issue on Windows
> >> platform.
> >
> > If an executable and its dlls link against the exact same runtime
> > library, you can cross module boundaries because all the memory and file
> > handles are managed by the same instance of the runtime library (so in
> > effect you aren't crossing runtime library boundaries).
>
> Yes, same runtime, yes.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
>
>
I took a quick a look at the patch and it seems that it may be incorrect (I
may be wrong if I am missing something obvious like some operator new
/delete overloading or some obscure memory management in GEOS that I
completely missed).

The patch calls for a GeosFree function that calls free(), however, most of
the functions are allocated with new (in fact, I only found 6 places in
trunk where malloc is used whereas new is all over the place). This patch in
fact, would potentialy make you mix runtimes.

We all know the rule. Match:
malloc with free
new with delete
new [ ] with delete [ ]

Any other combination is undefined behavior by the C++ standard and although
it may be working on whatever vendor/version of the C++ compiler you are
using, it is not guranteed to work in the future.

GCC tends to be very forgiving about this and sometimes MSVC can also be (at
least when combining the same VC version of the C runtime with the C++
runtime in certain versions) which could explain why there haven't been any
crashes in the shapely test cases that are calling free on something new'ed.

Valgrind, Purify, etc would point out these issues right of the bat.

To fix it correctly you would need a function that encapsulates each of
those three freeing methods and document which one to use for each c-api or
something of that sort. In my case, I have been using the C++ ABI and just
rifting through the GEOS code to find out how it was allocated to match it
properly in combination with recompilation of the entire GEOS dll as I
explained earlier.

My two cents,

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090429/d65186e5/attachment.html
From mateusz at loskot.net  Wed Apr 29 13:09:31 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Apr 29 13:09:18 2009
Subject: [geos-devel] GEOS, Shapely, DLLs, and memory
In-Reply-To: <738927440904290951v3f29a8afy628d708c991fd866@mail.gmail.com>
References: <738927440904290951v3f29a8afy628d708c991fd866@mail.gmail.com>
Message-ID: <49F889CB.9070803@loskot.net>

Ragi Y. Burhum wrote:
> 
> On Wed, Apr 29, 2009 at 9:00 AM, <geos-devel-request@lists.osgeo.org 
> <mailto:geos-devel-request@lists.osgeo.org>> wrote:
> 
>     Date: Tue, 28 Apr 2009 20:34:58 +0100
>     From: Mateusz Loskot <mateusz@loskot.net <mailto:mateusz@loskot.net>>
>     Subject: Re: [geos-devel] GEOS, Shapely, DLLs, and memory
>     To: GEOS Development List <geos-devel@lists.osgeo.org
>     <mailto:geos-devel@lists.osgeo.org>>
>     Message-ID: <49F75A62.1030503@loskot.net
>     <mailto:49F75A62.1030503@loskot.net>>
>     Content-Type: text/plain; charset=UTF-8
> 
>     Charlie Savage wrote:
>      >
>      >
>      >>> Well, there is another way (not necessarily "better"), which is to
>      >>> compile the GEOS dll yourself using the same runtime that you
>     use in
>      >>> your main application. That is what I have been doing this
>     whole time to
>      >>> avoid this issue.
>      >>
>      >> It will not help.
>      >
>      > Actually Ragi is correct, that does work.
> 
>     Charlie, Ragi,
> 
>     I take it beck. Yes, you are right.
>     Replying in rush, I've missed the fact Ragi is talking
>     about "the same runtime" what I read as "the same compiler"
>     and corrected as same compiler != same runtime.
> 
>      >> You must not cross modules boundaries, it's well known issue on
>     Windows
>      >> platform.
>      >
>      > If an executable and its dlls link against the exact same runtime
>      > library, you can cross module boundaries because all the memory
>     and file
>      > handles are managed by the same instance of the runtime library
>     (so in
>      > effect you aren't crossing runtime library boundaries).
> 
>     Yes, same runtime, yes.
> 
>     Best regards,
>     --
>     Mateusz Loskot, http://mateusz.loskot.net
>     Charter Member of OSGeo, http://osgeo.org
> 
> 
> I took a quick a look at the patch and it seems that it may be incorrect 
> (I may be wrong if I am missing something obvious like some operator new 
> /delete overloading or some obscure memory management in GEOS that I 
> completely missed).
> 
> The patch calls for a GeosFree function that calls free(), however, most 
> of the functions are allocated with new (in fact, I only found 6 places 
> in trunk where malloc is used whereas new is all over the place). This 
> patch in fact, would potentialy make you mix runtimes.


Ragi,

AFAIU, this patch is supposed to be used against string of
characters and byte arrays, like WKT string etc.
These are allocated using std::malloc.

Users are supposed to deallocate objects with corresponding deallocators 
like functions

GEOSGeom_destroy for GEOSGeometry
EOSCoordSeq_destroy for GEOSCoordSequence
etc.

There is lack of deallocator for GEOSGeomToWKT and GEOSGeomToWKB
and this patch, AFAIU, is supposed to cover it.

Perhaps it would be better to rename GEOSFree to GEOSBufWKT_destroy
and GEOSBufWKB_destroy, for clarity.

> We all know the rule. Match:
> malloc with free
> new with delete
> new [ ] with delete [ ]

Yes, you're perfectly right.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From geos-trac at osgeo.org  Wed Apr 29 18:49:26 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed Apr 29 18:49:27 2009
Subject: [geos-devel] [GEOS] #250: geos_contains(multipolygon,
 polygon) returns false when it should return true
Message-ID: <050.825a6f9a7507c0bcbb97b8284a89107c@osgeo.org>

#250: geos_contains(multipolygon, polygon) returns false when it should return
true
------------------------+---------------------------------------------------
 Reporter:  cdestigter  |       Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.1.1                     
Component:  Default     |     Version:  3.0.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 In geodjango:

 {{{
 #!python
 from django.contrib.gis import geos
 g1 = geos.GEOSGeometry('MULTIPOLYGON(((0 0,0 10,10 10,10 0,0 0)))')
 g2 = geos.GEOSGeometry('POLYGON((1 1,1 2,2 2,2 1,1 1))')

 g1.contains(g2)
  => False

 g2.within(g1)
  => False
 }}}

 Both of the above should return True. The following combinations work fine
 though:
 polygon.contains(polygon)
 multipolygon.contains(multipolygon)
 polygon.contains(multipolygon)

 It's possible this has been fixed in a more recent version, though I
 couldn't find any existing tickets on it. Feel free to close if that's the
 case, stating when it was fixed.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/250>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed Apr 29 19:52:35 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed Apr 29 19:52:36 2009
Subject: [geos-devel] Re: [GEOS] #250: geos_contains(multipolygon,
 polygon) returns false when it should return true
In-Reply-To: <050.825a6f9a7507c0bcbb97b8284a89107c@osgeo.org>
References: <050.825a6f9a7507c0bcbb97b8284a89107c@osgeo.org>
Message-ID: <059.13c777deb29a6410a8dad14d7db75eaf@osgeo.org>

#250: geos_contains(multipolygon, polygon) returns false when it should return
true
------------------------+---------------------------------------------------
 Reporter:  cdestigter  |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.0                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by mloskot):

 I've added new unit tests for C API calls
 [source:trunk/tests/unit/capi/GEOSContainsTest.cpp GEOSContains] and
 [source:trunk/tests/unit/capi/GEOSWithinTest.cpp GEOSWithin] (see r2422).
 The tests include cases you've reported above as test case number 3  (see
 function ''void test<3>'', in both files).

 I've run the tests on Linux 64-bit, certainly, using GEOS from trunk and I
 couldn't reproduce your problem. IOW, all the tests cases pass as
 expected.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/250#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From ragi at burhum.com  Thu Apr 30 14:02:51 2009
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Thu Apr 30 14:09:14 2009
Subject: [geos-devel] Re: GEOS, Shapely, DLLs, and memory (Mateusz Loskot)
Message-ID: <738927440904301102v3efe527u43fcb92d10b37d2e@mail.gmail.com>

> Date: Wed, 29 Apr 2009 18:09:31 +0100
> From: Mateusz Loskot <mateusz@loskot.net>
> Subject: Re: [geos-devel] GEOS, Shapely, DLLs, and memory
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Message-ID: <49F889CB.9070803@loskot.net>
> Content-Type: text/plain; charset=UTF-8; format=flowed
>
>
> Ragi,
>
> AFAIU, this patch is supposed to be used against string of
> characters and byte arrays, like WKT string etc.
> These are allocated using std::malloc.
>
> Users are supposed to deallocate objects with corresponding deallocators
> like functions
>
> GEOSGeom_destroy for GEOSGeometry
> EOSCoordSeq_destroy for GEOSCoordSequence
> etc.


This shows my ignorance of the C-API :) I have been working exclusively with
the C++ ABI

>
>
> There is lack of deallocator for GEOSGeomToWKT and GEOSGeomToWKB
> and this patch, AFAIU, is supposed to cover it.
>
> Perhaps it would be better to rename GEOSFree to GEOSBufWKT_destroy
> and GEOSBufWKB_destroy, for clarity.
>

Now this name change makes sense to me. My (incorrect) assumption was that
GEOSFree was meant to destroy memory allocated from within GEOS, not that it
was meant to free memory allocated exclusively by these two functions.

Thanks for the clarification.

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090430/0f784b97/attachment.html
