From chip_masters at yahoo.com  Wed Jun  1 17:57:21 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Fwd: [postgis-users] Error compiling PostGIS + GEOS
Message-ID: <20050601215721.23457.qmail@web41112.mail.yahoo.com>

GEOS developers,

I posted this message to the postgis-users group
today, and am reposting it here. Thanks in advance for
any assistance you can provide

Chip Masters
chip_masters@yahoo.com

Note: forwarded message attached.





		
__________________________________ 
Discover Yahoo! 
Stay in touch with email, IM, photo sharing and more. Check it out! 
http://discover.yahoo.com/stayintouch.html
-------------- next part --------------
An embedded message was scrubbed...
From: Chip Masters <chip_masters@yahoo.com>
Subject: [postgis-users] Error compiling PostGIS + GEOS
Date: Wed, 1 Jun 2005 10:51:46 -0700 (PDT)
Size: 4045
Url: http://lists.osgeo.org/pipermail/geos-devel/attachments/20050601/e54b21fc/attachment.mht
From strk at refractions.net  Sat Jun  4 07:21:14 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Fwd: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050601215721.23457.qmail@web41112.mail.yahoo.com>
References: <20050601215721.23457.qmail@web41112.mail.yahoo.com>
Message-ID: <20050604112113.GA36951@keybit.net>

Can you try with the 2-1 branch of GEOS CVS ?
It will be release 2.1.2 soon.

--strk;

On Wed, Jun 01, 2005 at 02:57:21PM -0700, Chip Masters wrote:
> GEOS developers,
> 
> I posted this message to the postgis-users group
> today, and am reposting it here. Thanks in advance for
> any assistance you can provide
> 
> Chip Masters
> chip_masters@yahoo.com
> 
> Note: forwarded message attached.
> 
> 
> 
> 
> 
> 		
> __________________________________ 
> Discover Yahoo! 
> Stay in touch with email, IM, photo sharing and more. Check it out! 
> http://discover.yahoo.com/stayintouch.html
> Date: Wed, 1 Jun 2005 10:51:46 -0700 (PDT)
> From: Chip Masters <chip_masters@yahoo.com>
> Subject: [postgis-users] Error compiling PostGIS + GEOS
> Reply-To: PostGIS Users Discussion <postgis-users@postgis.refractions.net>
> To: postgis-users@postgis.refractions.net
> Cc: charon@cyc.com
> X-BeenThere: postgis-users@postgis.refractions.net
> 
> PostGIS users,
> 
> I recently tried compiling the PostGIS 1.0.1 package
> together with the GEOS 2.1.1 package, following the
> instructions for doing so found in the README.postgis
> document included in the PostGIS distribution. I am
> using the following versions of gmake and gcc:
> 
> GNU Make version 3.79.1
> gcc (GCC) 3.4.2
> 
> I am trying to install on RedHat 7.3, w/ the
> 2.4.20-18.7bigmem kernel. I get the following error:
> 
> > ../index/quadtree/QuadTreeNodeBase.cpp:149:
> `sprintf' > undeclared (first use this function)
> > ../index/quadtree/QuadTreeNodeBase.cpp:149: (Each 
> > undeclared identifier is reported only once for each
> > function it appears in.)
> > make[2]: *** [QuadTreeNodeBase.lo] Error 1
> > make[2]: Leaving directory 
> > `/cyc110/scratch/geos-2.1.1/source/geom'
> > make[1]: *** [all-recursive] Error 1
> > make[1]: Leaving directory 
> > `/cyc110/scratch/geos-2.1.1/source'
> > make: *** [all-recursive] Error 1
> 
> Can anyone help?
> 
> Thanks in advance,
> 
> Chip Masters
> chip_masters@yahoo.com
> 
> 
> 
> 
> 		
> __________________________________ 
> Discover Yahoo! 
> Get on-the-go sports scores, stock quotes, news and more. Check it out! 
> http://discover.yahoo.com/mobile.html
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-users

> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From strk at refractions.net  Mon Jun  6 05:07:10 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
Message-ID: <20050606090710.GA53575@keybit.net>

We'd like to release GEOS 2.1.2, a bugfix and performance
improvement work.

Changes since 2.1.1:

- Segfault fix in Point::isEmpty
- Mem Leak fix in OffsetCurveBuilder::getRingCurve
- Bugfix in LineSegment::reverse
- Added multipolygon buffering test in source/test/testLeaksBig
- Ported JTS robustness patch for RobustLineIntersector
- Removed useless Coordinate copies in OverlayOp::mergeZ()
- Avoided throws by IsValid on invalid input
- Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block, ostringstream
  instead of sprintf)
- Better support for older compilers (Polygonizer::LineStringAdder friendship)
- Removed useless Coordinate copies in CGAlgorithms::isOnLine()
- Added support for polygonize and parametrized buffer tests in XMLTester
- Fixed support for --includedir and --libdir
- Fixed Z interpolation in LineIntersector
- Handled NULL results from getCentroid() in XMLTester
- Segfault fix in (EMPTY)Geometry::getCentroid()
- Made polygon::getBoundary() always OGC-valid (no LinearRings)
- Input checking and promoting in GeometryFactory::createMultiLineString()
- Segfault fix in GeometryEditor::editPolygon()


Did anyone other then me test the code yet ?
It is accessible using the branch-2-1 tag of CVS.
Any test or bug report is highly appreciated.

Thanks

--strk;


From carl.anderson at vadose.org  Mon Jun  6 20:15:59 2005
From: carl.anderson at vadose.org (Carl Anderson)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] cvs 2.1.2
Message-ID: <42A4E73F.3060906@vadose.org>


Just tried the branch-2-1 (2.1.2) of geos (inside postgis) and all 
topology errors that I have been fighting with during a recursive 
symdifference run of polygons came through without error.  The topology 
errors where mostly due to vertex vs intersections less than EPSILON (a 
minimum measurable unit) apart.

mille grazie to strk and all.

C.

Carl Anderson
GIS Manager
Fulton County Georgia

From pramsey at refractions.net  Mon Jun  6 23:46:39 2005
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <20050606090710.GA53575@keybit.net>
References: <20050606090710.GA53575@keybit.net>
Message-ID: <5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>

OK, compiles and runs the XMLTester fine under OS/X 10.4.1
I'm good to go. Any other test results from other platforms (windows  
anyone? slowaris? freebsd? OS/X 10.3?)

cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r  
branch-2-1 geos
cd geos
./autogen.sh
./configure
make
cd source/text
./XMLTester

Paul

Paul

On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:

> We'd like to release GEOS 2.1.2, a bugfix and performance
> improvement work.
>
> Changes since 2.1.1:
>
> - Segfault fix in Point::isEmpty
> - Mem Leak fix in OffsetCurveBuilder::getRingCurve
> - Bugfix in LineSegment::reverse
> - Added multipolygon buffering test in source/test/testLeaksBig
> - Ported JTS robustness patch for RobustLineIntersector
> - Removed useless Coordinate copies in OverlayOp::mergeZ()
> - Avoided throws by IsValid on invalid input
> - Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,  
> ostringstream
>   instead of sprintf)
> - Better support for older compilers (Polygonizer::LineStringAdder  
> friendship)
> - Removed useless Coordinate copies in CGAlgorithms::isOnLine()
> - Added support for polygonize and parametrized buffer tests in  
> XMLTester
> - Fixed support for --includedir and --libdir
> - Fixed Z interpolation in LineIntersector
> - Handled NULL results from getCentroid() in XMLTester
> - Segfault fix in (EMPTY)Geometry::getCentroid()
> - Made polygon::getBoundary() always OGC-valid (no LinearRings)
> - Input checking and promoting in  
> GeometryFactory::createMultiLineString()
> - Segfault fix in GeometryEditor::editPolygon()
>
>
> Did anyone other then me test the code yet ?
> It is accessible using the branch-2-1 tag of CVS.
> Any test or bug report is highly appreciated.
>
> Thanks
>
> --strk;
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>


From steve.lime at dnr.state.mn.us  Tue Jun  7 00:12:37 2005
From: steve.lime at dnr.state.mn.us (Steve Lime)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
Message-ID: <s2a4d888.028@co5.dnr.state.mn.us>

Tests ok on OSX 10.3.9. 

However, my multipolygon buffer script still produces a bus error - can someone comfirm this works in another environment? SImple polygons (w or w/o holes work fine). Multipolygon convex hulls work fine.

Steve

>>> pramsey@refractions.net 06/06/05 10:46 PM >>>
OK, compiles and runs the XMLTester fine under OS/X 10.4.1
I'm good to go. Any other test results from other platforms (windows  
anyone? slowaris? freebsd? OS/X 10.3?)

cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r  
branch-2-1 geos
cd geos
./autogen.sh
./configure
make
cd source/text
./XMLTester

Paul

Paul

On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:

> We'd like to release GEOS 2.1.2, a bugfix and performance
> improvement work.
>
> Changes since 2.1.1:
>
> - Segfault fix in Point::isEmpty
> - Mem Leak fix in OffsetCurveBuilder::getRingCurve
> - Bugfix in LineSegment::reverse
> - Added multipolygon buffering test in source/test/testLeaksBig
> - Ported JTS robustness patch for RobustLineIntersector
> - Removed useless Coordinate copies in OverlayOp::mergeZ()
> - Avoided throws by IsValid on invalid input
> - Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,  
> ostringstream
>   instead of sprintf)
> - Better support for older compilers (Polygonizer::LineStringAdder  
> friendship)
> - Removed useless Coordinate copies in CGAlgorithms::isOnLine()
> - Added support for polygonize and parametrized buffer tests in  
> XMLTester
> - Fixed support for --includedir and --libdir
> - Fixed Z interpolation in LineIntersector
> - Handled NULL results from getCentroid() in XMLTester
> - Segfault fix in (EMPTY)Geometry::getCentroid()
> - Made polygon::getBoundary() always OGC-valid (no LinearRings)
> - Input checking and promoting in  
> GeometryFactory::createMultiLineString()
> - Segfault fix in GeometryEditor::editPolygon()
>
>
> Did anyone other then me test the code yet ?
> It is accessible using the branch-2-1 tag of CVS.
> Any test or bug report is highly appreciated.
>
> Thanks
>
> --strk;
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>

_______________________________________________
geos-devel mailing list
geos-devel@geos.refractions.net
http://geos.refractions.net/mailman/listinfo/geos-devel


From strk at refractions.net  Tue Jun  7 04:03:02 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <s2a4d888.028@co5.dnr.state.mn.us>
References: <s2a4d888.028@co5.dnr.state.mn.us>
Message-ID: <20050607080302.GB64289@keybit.net>

On Mon, Jun 06, 2005 at 11:12:37PM -0500, Steve Lime wrote:
> Tests ok on OSX 10.3.9. 
> 
> However, my multipolygon buffer script still produces a bus error - can someone comfirm this works in another environment? SImple polygons (w or w/o holes work fine). Multipolygon convex hulls work fine.

It worked here on 32bit GNU/linux/gcc-3.4.3
You test case is included in the source/test/testLeaksBig.xml,
so it works on OS/X 10.4.1 as reported by Paul.
Did you get any warning at compile time ?
Are you able to run the test trough a debugger

--strk;

> 
> Steve
> 
> >>> pramsey@refractions.net 06/06/05 10:46 PM >>>
> OK, compiles and runs the XMLTester fine under OS/X 10.4.1
> I'm good to go. Any other test results from other platforms (windows  
> anyone? slowaris? freebsd? OS/X 10.3?)
> 
> cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r  
> branch-2-1 geos
> cd geos
> ./autogen.sh
> ./configure
> make
> cd source/text
> ./XMLTester
> 
> Paul
> 
> Paul
> 
> On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:
> 
> > We'd like to release GEOS 2.1.2, a bugfix and performance
> > improvement work.
> >
> > Changes since 2.1.1:
> >
> > - Segfault fix in Point::isEmpty
> > - Mem Leak fix in OffsetCurveBuilder::getRingCurve
> > - Bugfix in LineSegment::reverse
> > - Added multipolygon buffering test in source/test/testLeaksBig
> > - Ported JTS robustness patch for RobustLineIntersector
> > - Removed useless Coordinate copies in OverlayOp::mergeZ()
> > - Avoided throws by IsValid on invalid input
> > - Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,  
> > ostringstream
> >   instead of sprintf)
> > - Better support for older compilers (Polygonizer::LineStringAdder  
> > friendship)
> > - Removed useless Coordinate copies in CGAlgorithms::isOnLine()
> > - Added support for polygonize and parametrized buffer tests in  
> > XMLTester
> > - Fixed support for --includedir and --libdir
> > - Fixed Z interpolation in LineIntersector
> > - Handled NULL results from getCentroid() in XMLTester
> > - Segfault fix in (EMPTY)Geometry::getCentroid()
> > - Made polygon::getBoundary() always OGC-valid (no LinearRings)
> > - Input checking and promoting in  
> > GeometryFactory::createMultiLineString()
> > - Segfault fix in GeometryEditor::editPolygon()
> >
> >
> > Did anyone other then me test the code yet ?
> > It is accessible using the branch-2-1 tag of CVS.
> > Any test or bug report is highly appreciated.
> >
> > Thanks
> >
> > --strk;
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@geos.refractions.net
> > http://geos.refractions.net/mailman/listinfo/geos-devel
> >
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From strk at refractions.net  Tue Jun  7 04:05:02 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
References: <20050606090710.GA53575@keybit.net>
	<5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
Message-ID: <20050607080502.GC64289@keybit.net>

On Mon, Jun 06, 2005 at 08:46:39PM -0700, Paul Ramsey wrote:
> OK, compiles and runs the XMLTester fine under OS/X 10.4.1
> I'm good to go. Any other test results from other platforms (windows  
> anyone? slowaris? freebsd? OS/X 10.3?)

No luck on freebsd 4.2 with gcc 2.95.2 (very very old).
The problem seems to be with stringstreams: unavailable sstream
header - including strstream unavailable ostringstream type.
If anyone have similar problems and possibly a solution I'd
change sstream usage with something else.

--strk;

> 
> cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r  
> branch-2-1 geos
> cd geos
> ./autogen.sh
> ./configure
> make
> cd source/text
> ./XMLTester
> 
> Paul
> 
> Paul
> 
> On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:
> 
> >We'd like to release GEOS 2.1.2, a bugfix and performance
> >improvement work.
> >
> >Changes since 2.1.1:
> >
> >- Segfault fix in Point::isEmpty
> >- Mem Leak fix in OffsetCurveBuilder::getRingCurve
> >- Bugfix in LineSegment::reverse
> >- Added multipolygon buffering test in source/test/testLeaksBig
> >- Ported JTS robustness patch for RobustLineIntersector
> >- Removed useless Coordinate copies in OverlayOp::mergeZ()
> >- Avoided throws by IsValid on invalid input
> >- Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,  
> >ostringstream
> >  instead of sprintf)
> >- Better support for older compilers (Polygonizer::LineStringAdder  
> >friendship)
> >- Removed useless Coordinate copies in CGAlgorithms::isOnLine()
> >- Added support for polygonize and parametrized buffer tests in  
> >XMLTester
> >- Fixed support for --includedir and --libdir
> >- Fixed Z interpolation in LineIntersector
> >- Handled NULL results from getCentroid() in XMLTester
> >- Segfault fix in (EMPTY)Geometry::getCentroid()
> >- Made polygon::getBoundary() always OGC-valid (no LinearRings)
> >- Input checking and promoting in  
> >GeometryFactory::createMultiLineString()
> >- Segfault fix in GeometryEditor::editPolygon()
> >
> >
> >Did anyone other then me test the code yet ?
> >It is accessible using the branch-2-1 tag of CVS.
> >Any test or bug report is highly appreciated.
> >
> >Thanks
> >
> >--strk;
> >
> >_______________________________________________
> >geos-devel mailing list
> >geos-devel@geos.refractions.net
> >http://geos.refractions.net/mailman/listinfo/geos-devel
> >
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From strk at refractions.net  Tue Jun  7 10:49:05 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <20050607080502.GC64289@keybit.net>
References: <20050606090710.GA53575@keybit.net>
	<5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
	<20050607080502.GC64289@keybit.net>
Message-ID: <20050607144905.GA3919@keybit.net>

I've upgraded GCC to 3.4.4 and had success building GEOS
on FreeBSD 4.2. Did anyone handle to compile GEOS with 
gcc < 3.0.0 ? (so we can document the requirement)

--strk;


On Tue, Jun 07, 2005 at 10:05:02AM +0200, strk@refractions.net wrote:
> On Mon, Jun 06, 2005 at 08:46:39PM -0700, Paul Ramsey wrote:
> > OK, compiles and runs the XMLTester fine under OS/X 10.4.1
> > I'm good to go. Any other test results from other platforms (windows  
> > anyone? slowaris? freebsd? OS/X 10.3?)
> 
> No luck on freebsd 4.2 with gcc 2.95.2 (very very old).
> The problem seems to be with stringstreams: unavailable sstream
> header - including strstream unavailable ostringstream type.
> If anyone have similar problems and possibly a solution I'd
> change sstream usage with something else.
> 
> --strk;
> 
> > 
> > cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r  
> > branch-2-1 geos
> > cd geos
> > ./autogen.sh
> > ./configure
> > make
> > cd source/text
> > ./XMLTester
> > 
> > Paul
> > 
> > Paul
> > 
> > On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:
> > 
> > >We'd like to release GEOS 2.1.2, a bugfix and performance
> > >improvement work.
> > >
> > >Changes since 2.1.1:
> > >
> > >- Segfault fix in Point::isEmpty
> > >- Mem Leak fix in OffsetCurveBuilder::getRingCurve
> > >- Bugfix in LineSegment::reverse
> > >- Added multipolygon buffering test in source/test/testLeaksBig
> > >- Ported JTS robustness patch for RobustLineIntersector
> > >- Removed useless Coordinate copies in OverlayOp::mergeZ()
> > >- Avoided throws by IsValid on invalid input
> > >- Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,  
> > >ostringstream
> > >  instead of sprintf)
> > >- Better support for older compilers (Polygonizer::LineStringAdder  
> > >friendship)
> > >- Removed useless Coordinate copies in CGAlgorithms::isOnLine()
> > >- Added support for polygonize and parametrized buffer tests in  
> > >XMLTester
> > >- Fixed support for --includedir and --libdir
> > >- Fixed Z interpolation in LineIntersector
> > >- Handled NULL results from getCentroid() in XMLTester
> > >- Segfault fix in (EMPTY)Geometry::getCentroid()
> > >- Made polygon::getBoundary() always OGC-valid (no LinearRings)
> > >- Input checking and promoting in  
> > >GeometryFactory::createMultiLineString()
> > >- Segfault fix in GeometryEditor::editPolygon()
> > >
> > >
> > >Did anyone other then me test the code yet ?
> > >It is accessible using the branch-2-1 tag of CVS.
> > >Any test or bug report is highly appreciated.
> > >
> > >Thanks
> > >
> > >--strk;
> > >
> > >_______________________________________________
> > >geos-devel mailing list
> > >geos-devel@geos.refractions.net
> > >http://geos.refractions.net/mailman/listinfo/geos-devel
> > >
> > 
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@geos.refractions.net
> > http://geos.refractions.net/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From pramsey at refractions.net  Tue Jun  7 12:09:56 2005
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <20050607144905.GA3919@keybit.net>
References: <20050606090710.GA53575@keybit.net>	<5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>	<20050607080502.GC64289@keybit.net>
	<20050607144905.GA3919@keybit.net>
Message-ID: <42A5C6D4.2070506@refractions.net>

gcc 2.96 on an old red hat 7.3 box compiles and passes tests.

Paul

strk@refractions.net wrote:

> I've upgraded GCC to 3.4.4 and had success building GEOS
> on FreeBSD 4.2. Did anyone handle to compile GEOS with 
> gcc < 3.0.0 ? (so we can document the requirement)
> 
> --strk;
> 
> 
> On Tue, Jun 07, 2005 at 10:05:02AM +0200, strk@refractions.net wrote:
> 
>>On Mon, Jun 06, 2005 at 08:46:39PM -0700, Paul Ramsey wrote:
>>
>>>OK, compiles and runs the XMLTester fine under OS/X 10.4.1
>>>I'm good to go. Any other test results from other platforms (windows  
>>>anyone? slowaris? freebsd? OS/X 10.3?)
>>
>>No luck on freebsd 4.2 with gcc 2.95.2 (very very old).
>>The problem seems to be with stringstreams: unavailable sstream
>>header - including strstream unavailable ostringstream type.
>>If anyone have similar problems and possibly a solution I'd
>>change sstream usage with something else.
>>
>>--strk;
>>
>>
>>>cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r  
>>>branch-2-1 geos
>>>cd geos
>>>./autogen.sh
>>>./configure
>>>make
>>>cd source/text
>>>./XMLTester
>>>
>>>Paul
>>>
>>>Paul
>>>
>>>On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:
>>>
>>>
>>>>We'd like to release GEOS 2.1.2, a bugfix and performance
>>>>improvement work.
>>>>
>>>>Changes since 2.1.1:
>>>>
>>>>- Segfault fix in Point::isEmpty
>>>>- Mem Leak fix in OffsetCurveBuilder::getRingCurve
>>>>- Bugfix in LineSegment::reverse
>>>>- Added multipolygon buffering test in source/test/testLeaksBig
>>>>- Ported JTS robustness patch for RobustLineIntersector
>>>>- Removed useless Coordinate copies in OverlayOp::mergeZ()
>>>>- Avoided throws by IsValid on invalid input
>>>>- Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,  
>>>>ostringstream
>>>> instead of sprintf)
>>>>- Better support for older compilers (Polygonizer::LineStringAdder  
>>>>friendship)
>>>>- Removed useless Coordinate copies in CGAlgorithms::isOnLine()
>>>>- Added support for polygonize and parametrized buffer tests in  
>>>>XMLTester
>>>>- Fixed support for --includedir and --libdir
>>>>- Fixed Z interpolation in LineIntersector
>>>>- Handled NULL results from getCentroid() in XMLTester
>>>>- Segfault fix in (EMPTY)Geometry::getCentroid()
>>>>- Made polygon::getBoundary() always OGC-valid (no LinearRings)
>>>>- Input checking and promoting in  
>>>>GeometryFactory::createMultiLineString()
>>>>- Segfault fix in GeometryEditor::editPolygon()
>>>>
>>>>
>>>>Did anyone other then me test the code yet ?
>>>>It is accessible using the branch-2-1 tag of CVS.
>>>>Any test or bug report is highly appreciated.
>>>>
>>>>Thanks
>>>>
>>>>--strk;
>>>>
>>>>_______________________________________________
>>>>geos-devel mailing list
>>>>geos-devel@geos.refractions.net
>>>>http://geos.refractions.net/mailman/listinfo/geos-devel
>>>>
>>>
>>>_______________________________________________
>>>geos-devel mailing list
>>>geos-devel@geos.refractions.net
>>>http://geos.refractions.net/mailman/listinfo/geos-devel
>>
>>_______________________________________________
>>geos-devel mailing list
>>geos-devel@geos.refractions.net
>>http://geos.refractions.net/mailman/listinfo/geos-devel
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From sdlime at comcast.net  Wed Jun  8 03:29:21 2005
From: sdlime at comcast.net (Stephen Lime)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <20050607080302.GB64289@keybit.net>
References: <s2a4d888.028@co5.dnr.state.mn.us>
	<20050607080302.GB64289@keybit.net>
Message-ID: <d8d47db92e936869e15a7980810e0ccc@comcast.net>

I need to replicate the test case in my environment and see what 
happens. Certainly could be a coding problem in my interface.

Steve

On Jun 7, 2005, at 3:03 AM, strk@refractions.net wrote:

> On Mon, Jun 06, 2005 at 11:12:37PM -0500, Steve Lime wrote:
>> Tests ok on OSX 10.3.9.
>>
>> However, my multipolygon buffer script still produces a bus error - 
>> can someone comfirm this works in another environment? SImple 
>> polygons (w or w/o holes work fine). Multipolygon convex hulls work 
>> fine.
>
> It worked here on 32bit GNU/linux/gcc-3.4.3
> You test case is included in the source/test/testLeaksBig.xml,
> so it works on OS/X 10.4.1 as reported by Paul.
> Did you get any warning at compile time ?
> Are you able to run the test trough a debugger
>
> --strk;
>
>>
>> Steve
>>
>>>>> pramsey@refractions.net 06/06/05 10:46 PM >>>
>> OK, compiles and runs the XMLTester fine under OS/X 10.4.1
>> I'm good to go. Any other test results from other platforms (windows
>> anyone? slowaris? freebsd? OS/X 10.3?)
>>
>> cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r
>> branch-2-1 geos
>> cd geos
>> ./autogen.sh
>> ./configure
>> make
>> cd source/text
>> ./XMLTester
>>
>> Paul
>>
>> Paul
>>
>> On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:
>>
>>> We'd like to release GEOS 2.1.2, a bugfix and performance
>>> improvement work.
>>>
>>> Changes since 2.1.1:
>>>
>>> - Segfault fix in Point::isEmpty
>>> - Mem Leak fix in OffsetCurveBuilder::getRingCurve
>>> - Bugfix in LineSegment::reverse
>>> - Added multipolygon buffering test in source/test/testLeaksBig
>>> - Ported JTS robustness patch for RobustLineIntersector
>>> - Removed useless Coordinate copies in OverlayOp::mergeZ()
>>> - Avoided throws by IsValid on invalid input
>>> - Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,
>>> ostringstream
>>>   instead of sprintf)
>>> - Better support for older compilers (Polygonizer::LineStringAdder
>>> friendship)
>>> - Removed useless Coordinate copies in CGAlgorithms::isOnLine()
>>> - Added support for polygonize and parametrized buffer tests in
>>> XMLTester
>>> - Fixed support for --includedir and --libdir
>>> - Fixed Z interpolation in LineIntersector
>>> - Handled NULL results from getCentroid() in XMLTester
>>> - Segfault fix in (EMPTY)Geometry::getCentroid()
>>> - Made polygon::getBoundary() always OGC-valid (no LinearRings)
>>> - Input checking and promoting in
>>> GeometryFactory::createMultiLineString()
>>> - Segfault fix in GeometryEditor::editPolygon()
>>>
>>>
>>> Did anyone other then me test the code yet ?
>>> It is accessible using the branch-2-1 tag of CVS.
>>> Any test or bug report is highly appreciated.
>>>
>>> Thanks
>>>
>>> --strk;
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@geos.refractions.net
>>> http://geos.refractions.net/mailman/listinfo/geos-devel
>>>
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@geos.refractions.net
>> http://geos.refractions.net/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@geos.refractions.net
>> http://geos.refractions.net/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>


From strk at refractions.net  Wed Jun  8 05:39:09 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <42A5C6D4.2070506@refractions.net>
References: <20050606090710.GA53575@keybit.net>
	<5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
	<20050607080502.GC64289@keybit.net>
	<20050607144905.GA3919@keybit.net>
	<42A5C6D4.2070506@refractions.net>
Message-ID: <20050608093909.GA26262@keybit.net>

On Tue, Jun 07, 2005 at 09:09:56AM -0700, Paul Ramsey wrote:
> gcc 2.96 on an old red hat 7.3 box compiles and passes tests.

Thanks, added a note in the INSTALL file.
--strk;

From debian at adkgis.org  Thu Jun  9 16:51:24 2005
From: debian at adkgis.org (Steve Halasz)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] geos 2.1.2 missing '.so'
Message-ID: <1118350284.4131.10.camel@marcy>

Hi,

I'm upgrading the geos package for debian and in /usr/lib I end up with:

lrwxrwxrwx  1 steve steve  13 2005-06-09 15:52 libgeos -> libgeos.2.1.2
lrwxrwxrwx  1 steve steve  13 2005-06-09 15:52 libgeos.2 ->
libgeos.2.1.2
-rwxr-xr-x  1 steve steve 20M 2005-06-09 15:52 libgeos.2.1.2
-rw-r--r--  1 steve steve 46M 2005-06-09 15:52 libgeos.a
-rwxr-xr-x  1 steve steve 772 2005-06-09 15:52 libgeos.la

Shouldn't the libraries have '.so' in their names?

Thanks,
Steve


From strk at refractions.net  Fri Jun 10 04:44:38 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] geos 2.1.2 missing '.so'
In-Reply-To: <1118350284.4131.10.camel@marcy>
References: <1118350284.4131.10.camel@marcy>
Message-ID: <20050610084438.GB55748@keybit.net>

On Thu, Jun 09, 2005 at 04:51:24PM -0400, Steve Halasz wrote:
...
> Shouldn't the libraries have '.so' in their names?

I don't have .so extensions on my arch too,
since I upgraded gcc to 3.4.x I guesss..
Dynamic linkage still works though. Are you having problems ?

--strk;

From R.Beck at m4com.de  Fri Jun 10 06:41:50 2005
From: R.Beck at m4com.de (Reiner Beck)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] geos 2.1.2 missing '.so'
In-Reply-To: <1118350284.4131.10.camel@marcy>
References: <1118350284.4131.10.camel@marcy>
Message-ID: <42A96E6E.5020303@m4com.de>

Steve,
>Shouldn't the libraries have '.so' in their names?
>  
I had a similar problem related to a version mismatch of libtool and the 
ltmain.sh in the project root directory. Well, this was not related to GEOS.

However, assuming you do an installation from source, go to the geos 
project main directory and run "libtoolize --force", do a "./configure" 
and build geos. This fixed it for my project.
See http://people.debian.org/~keybuk/libtool-missing_so.html for some 
details ...

HTH ...

Cheers
Reiner

From debian at adkgis.org  Fri Jun 10 16:17:19 2005
From: debian at adkgis.org (Steve Halasz)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] geos 2.1.2 missing '.so'
In-Reply-To: <42A96E6E.5020303@m4com.de>
References: <1118350284.4131.10.camel@marcy>  <42A96E6E.5020303@m4com.de>
Message-ID: <1118434639.4090.49.camel@marcy>

On Fri, 2005-06-10 at 12:41 +0200, Reiner Beck wrote:
> Steve,
> >Shouldn't the libraries have '.so' in their names?
> >  
> I had a similar problem related to a version mismatch of libtool and the 
> ltmain.sh in the project root directory. Well, this was not related to GEOS.
> 
> However, assuming you do an installation from source, go to the geos 
> project main directory and run "libtoolize --force", do a "./configure" 
> and build geos. This fixed it for my project.
> See http://people.debian.org/~keybuk/libtool-missing_so.html for some 
> details ...

Thanks, this was very helpful. I followed the instructions at:

http://people.debian.org/~keybuk/libtool-updating.html

Then I ended up having to copy in acsite.m4 and autogen.sh from cvs and
running autogen.sh. But after that everything's fine.

Steve



From strk at refractions.net  Fri Jun 10 17:14:16 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] geos 2.1.2 missing '.so'
In-Reply-To: <42A96E6E.5020303@m4com.de>
References: <1118350284.4131.10.camel@marcy> <42A96E6E.5020303@m4com.de>
Message-ID: <20050610211416.GA69922@keybit.net>

Thank you very much. I've updated the autogen.sh
to invoke libtoolize --force --copy so to avoid future
problems of this kind.

Anyway, I confirm I have no problems using shared
libraries w/out the .so extension here (gnu/Linux/gcc-3.4.3)

--strk;

On Fri, Jun 10, 2005 at 12:41:50PM +0200, Reiner Beck wrote:
> Steve,
> >Shouldn't the libraries have '.so' in their names?
> > 
> I had a similar problem related to a version mismatch of libtool and the 
> ltmain.sh in the project root directory. Well, this was not related to GEOS.
> 
> However, assuming you do an installation from source, go to the geos 
> project main directory and run "libtoolize --force", do a "./configure" 
> and build geos. This fixed it for my project.
> See http://people.debian.org/~keybuk/libtool-missing_so.html for some 
> details ...
> 
> HTH ...
> 
> Cheers
> Reiner
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From chip_masters at yahoo.com  Mon Jun 13 12:24:54 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050603231849.GK29607@keybit.net>
Message-ID: <20050613162454.61995.qmail@web41106.mail.yahoo.com>

OK, we downloaded the 2.1.2 GEOS package, and tried
installing PostGIS 1.0.1 w/ it, and now I'm getting
this trying to rebuild PostGIS:

cc1plus: Unrecognized option
`-Wdeclaration-after-statement'
cc1plus: Unrecognized option `-Wold-style-definition'
cc1plus: Unrecognized option `-Wendif-labels'
make[1]: *** [lwgeom_geos_wrapper.o] Error 1
make[1]: Leaving directory
`/cyc110/scratch/postgis-1.0.1/lwgeom'
make: *** [liblwgeom] Error 2
[root@cyc11 postgis]# ls


There are only 2 options for using GEOS in the
Makefile.config, and I am certain they are set
correctly.

Any help is greatly appreciated.

Chip Masters
chip_masters@yahoo.com

--- strk@refractions.net wrote:

> The upcoming 2.1.2 GEOS version should have fixed
> this,
> you can try downloading the "branch-2-1" branch from
> CVS.
> --strk;
> 
> On Wed, Jun 01, 2005 at 10:51:46AM -0700, Chip
> Masters wrote:
> > PostGIS users,
> > 
> > I recently tried compiling the PostGIS 1.0.1
> package
> > together with the GEOS 2.1.1 package, following
> the
> > instructions for doing so found in the
> README.postgis
> > document included in the PostGIS distribution. I
> am
> > using the following versions of gmake and gcc:
> > 
> > GNU Make version 3.79.1
> > gcc (GCC) 3.4.2
> > 
> > I am trying to install on RedHat 7.3, w/ the
> > 2.4.20-18.7bigmem kernel. I get the following
> error:
> > 
> > > ../index/quadtree/QuadTreeNodeBase.cpp:149:
> > `sprintf' > undeclared (first use this function)
> > > ../index/quadtree/QuadTreeNodeBase.cpp:149:
> (Each 
> > > undeclared identifier is reported only once for
> each
> > > function it appears in.)
> > > make[2]: *** [QuadTreeNodeBase.lo] Error 1
> > > make[2]: Leaving directory 
> > > `/cyc110/scratch/geos-2.1.1/source/geom'
> > > make[1]: *** [all-recursive] Error 1
> > > make[1]: Leaving directory 
> > > `/cyc110/scratch/geos-2.1.1/source'
> > > make: *** [all-recursive] Error 1
> > 
> > Can anyone help?
> > 
> > Thanks in advance,
> > 
> > Chip Masters
> > chip_masters@yahoo.com
> > 
> > 
> > 
> > 
> > 		
> > __________________________________ 
> > Discover Yahoo! 
> > Get on-the-go sports scores, stock quotes, news
> and more. Check it out! 
> > http://discover.yahoo.com/mobile.html
> > _______________________________________________
> > postgis-users mailing list
> > postgis-users@postgis.refractions.net
> >
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> 





		
__________________________________ 
Yahoo! Mail Mobile 
Take Yahoo! Mail with you! Check email on your mobile phone. 
http://mobile.yahoo.com/learn/mail 

From strk at refractions.net  Mon Jun 13 12:42:17 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050613162454.61995.qmail@web41106.mail.yahoo.com>
References: <20050603231849.GK29607@keybit.net>
	<20050613162454.61995.qmail@web41106.mail.yahoo.com>
Message-ID: <20050613164217.GA95843@keybit.net>

Auch! On my system that's only a warning :(
It is probably due to CXXFLAGS being appended CFLAGS, which 
inherits default value at build time.

Try changing line 206 of lwgeom/Makefile (first CFLAGS occurrence)

From:
CFLAGS += ...

To:
CFLAGS = ...

--strk;


On Mon, Jun 13, 2005 at 09:24:54AM -0700, Chip Masters wrote:
> OK, we downloaded the 2.1.2 GEOS package, and tried
> installing PostGIS 1.0.1 w/ it, and now I'm getting
> this trying to rebuild PostGIS:
> 
> cc1plus: Unrecognized option
> `-Wdeclaration-after-statement'
> cc1plus: Unrecognized option `-Wold-style-definition'
> cc1plus: Unrecognized option `-Wendif-labels'
> make[1]: *** [lwgeom_geos_wrapper.o] Error 1
> make[1]: Leaving directory
> `/cyc110/scratch/postgis-1.0.1/lwgeom'
> make: *** [liblwgeom] Error 2
> [root@cyc11 postgis]# ls
> 
> 
> There are only 2 options for using GEOS in the
> Makefile.config, and I am certain they are set
> correctly.
> 
> Any help is greatly appreciated.
> 
> Chip Masters
> chip_masters@yahoo.com
> 
> --- strk@refractions.net wrote:
> 
> > The upcoming 2.1.2 GEOS version should have fixed
> > this,
> > you can try downloading the "branch-2-1" branch from
> > CVS.
> > --strk;
> > 
> > On Wed, Jun 01, 2005 at 10:51:46AM -0700, Chip
> > Masters wrote:
> > > PostGIS users,
> > > 
> > > I recently tried compiling the PostGIS 1.0.1
> > package
> > > together with the GEOS 2.1.1 package, following
> > the
> > > instructions for doing so found in the
> > README.postgis
> > > document included in the PostGIS distribution. I
> > am
> > > using the following versions of gmake and gcc:
> > > 
> > > GNU Make version 3.79.1
> > > gcc (GCC) 3.4.2
> > > 
> > > I am trying to install on RedHat 7.3, w/ the
> > > 2.4.20-18.7bigmem kernel. I get the following
> > error:
> > > 
> > > > ../index/quadtree/QuadTreeNodeBase.cpp:149:
> > > `sprintf' > undeclared (first use this function)
> > > > ../index/quadtree/QuadTreeNodeBase.cpp:149:
> > (Each 
> > > > undeclared identifier is reported only once for
> > each
> > > > function it appears in.)
> > > > make[2]: *** [QuadTreeNodeBase.lo] Error 1
> > > > make[2]: Leaving directory 
> > > > `/cyc110/scratch/geos-2.1.1/source/geom'
> > > > make[1]: *** [all-recursive] Error 1
> > > > make[1]: Leaving directory 
> > > > `/cyc110/scratch/geos-2.1.1/source'
> > > > make: *** [all-recursive] Error 1
> > > 
> > > Can anyone help?
> > > 
> > > Thanks in advance,
> > > 
> > > Chip Masters
> > > chip_masters@yahoo.com
> > > 
> > > 
> > > 
> > > 
> > > 		
> > > __________________________________ 
> > > Discover Yahoo! 
> > > Get on-the-go sports scores, stock quotes, news
> > and more. Check it out! 
> > > http://discover.yahoo.com/mobile.html
> > > _______________________________________________
> > > postgis-users mailing list
> > > postgis-users@postgis.refractions.net
> > >
> >
> http://postgis.refractions.net/mailman/listinfo/postgis-users
> > _______________________________________________
> > postgis-users mailing list
> > postgis-users@postgis.refractions.net
> >
> http://postgis.refractions.net/mailman/listinfo/postgis-users
> > 
> 
> 
> 
> 
> 
> 		
> __________________________________ 
> Yahoo! Mail Mobile 
> Take Yahoo! Mail with you! Check email on your mobile phone. 
> http://mobile.yahoo.com/learn/mail 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From sdlime at comcast.net  Tue Jun 14 00:34:25 2005
From: sdlime at comcast.net (Stephen Lime)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <20050607080302.GB64289@keybit.net>
References: <s2a4d888.028@co5.dnr.state.mn.us>
	<20050607080302.GB64289@keybit.net>
Message-ID: <1daf3e239a0b418c0e8441a1d00a2507@comcast.net>

I got it on my end. GEOS works fine (so does my stuff now)...

Steve

On Jun 7, 2005, at 3:03 AM, strk@refractions.net wrote:

> On Mon, Jun 06, 2005 at 11:12:37PM -0500, Steve Lime wrote:
>> Tests ok on OSX 10.3.9.
>>
>> However, my multipolygon buffer script still produces a bus error - 
>> can someone comfirm this works in another environment? SImple 
>> polygons (w or w/o holes work fine). Multipolygon convex hulls work 
>> fine.
>
> It worked here on 32bit GNU/linux/gcc-3.4.3
> You test case is included in the source/test/testLeaksBig.xml,
> so it works on OS/X 10.4.1 as reported by Paul.
> Did you get any warning at compile time ?
> Are you able to run the test trough a debugger
>
> --strk;
>
>>
>> Steve
>>
>>>>> pramsey@refractions.net 06/06/05 10:46 PM >>>
>> OK, compiles and runs the XMLTester fine under OS/X 10.4.1
>> I'm good to go. Any other test results from other platforms (windows
>> anyone? slowaris? freebsd? OS/X 10.3?)
>>
>> cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r
>> branch-2-1 geos
>> cd geos
>> ./autogen.sh
>> ./configure
>> make
>> cd source/text
>> ./XMLTester
>>
>> Paul
>>
>> Paul
>>
>> On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:
>>
>>> We'd like to release GEOS 2.1.2, a bugfix and performance
>>> improvement work.
>>>
>>> Changes since 2.1.1:
>>>
>>> - Segfault fix in Point::isEmpty
>>> - Mem Leak fix in OffsetCurveBuilder::getRingCurve
>>> - Bugfix in LineSegment::reverse
>>> - Added multipolygon buffering test in source/test/testLeaksBig
>>> - Ported JTS robustness patch for RobustLineIntersector
>>> - Removed useless Coordinate copies in OverlayOp::mergeZ()
>>> - Avoided throws by IsValid on invalid input
>>> - Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,
>>> ostringstream
>>>   instead of sprintf)
>>> - Better support for older compilers (Polygonizer::LineStringAdder
>>> friendship)
>>> - Removed useless Coordinate copies in CGAlgorithms::isOnLine()
>>> - Added support for polygonize and parametrized buffer tests in
>>> XMLTester
>>> - Fixed support for --includedir and --libdir
>>> - Fixed Z interpolation in LineIntersector
>>> - Handled NULL results from getCentroid() in XMLTester
>>> - Segfault fix in (EMPTY)Geometry::getCentroid()
>>> - Made polygon::getBoundary() always OGC-valid (no LinearRings)
>>> - Input checking and promoting in
>>> GeometryFactory::createMultiLineString()
>>> - Segfault fix in GeometryEditor::editPolygon()
>>>
>>>
>>> Did anyone other then me test the code yet ?
>>> It is accessible using the branch-2-1 tag of CVS.
>>> Any test or bug report is highly appreciated.
>>>
>>> Thanks
>>>
>>> --strk;
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel@geos.refractions.net
>>> http://geos.refractions.net/mailman/listinfo/geos-devel
>>>
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@geos.refractions.net
>> http://geos.refractions.net/mailman/listinfo/geos-devel
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@geos.refractions.net
>> http://geos.refractions.net/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>


From carueda at ucdavis.edu  Tue Jun 14 01:30:08 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
References: <20050606090710.GA53575@keybit.net>
	<5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
Message-ID: <42AE6B60.5050705@ucdavis.edu>

I just tried GEOS 2.1.2 (as is available from the website) under 
MinGW: MSYS 1.0.10, MinGW 4.1.0.  The only complain was related with 
lines 49 and 454 in source/test/XMLTester.cpp:
If `using geos::Polygon' is kept, the compiler complains about 
redefinition of Polygon (which I think is consistent with the comment 
strk (?) put on that line. However, if the line is commented, the 
complain is now that Polygon (in line 454) is not defined. So an easy 
solution was just to qualify the usage of Polygon in line 454 and 
comment line 49:

line 49:    //using geos::Polygon; // for mingw ...
line 454:   vector<geos::Polygon *>*polys = ....

The build now succeeds (I haven't run the tests, however).

Hope this is useful.

regards,
carlos


Paul Ramsey wrote:
> OK, compiles and runs the XMLTester fine under OS/X 10.4.1
> I'm good to go. Any other test results from other platforms (windows  
> anyone? slowaris? freebsd? OS/X 10.3?)
> 
> cvs -d :pserver:cvs@postgis.refractions.net:/home/cvs/postgis co -r  
> branch-2-1 geos
> cd geos
> ./autogen.sh
> ./configure
> make
> cd source/text
> ./XMLTester
> 
> Paul
> 
> Paul
> 
> On 6-Jun-05, at 2:07 AM, strk@refractions.net wrote:
> 
>> We'd like to release GEOS 2.1.2, a bugfix and performance
>> improvement work.
>>
>> Changes since 2.1.1:
>>
>> - Segfault fix in Point::isEmpty
>> - Mem Leak fix in OffsetCurveBuilder::getRingCurve
>> - Bugfix in LineSegment::reverse
>> - Added multipolygon buffering test in source/test/testLeaksBig
>> - Ported JTS robustness patch for RobustLineIntersector
>> - Removed useless Coordinate copies in OverlayOp::mergeZ()
>> - Avoided throws by IsValid on invalid input
>> - Stricter C++ syntax (math.h=>cmath, ieeefp.h in "C" block,  
>> ostringstream
>>   instead of sprintf)
>> - Better support for older compilers (Polygonizer::LineStringAdder  
>> friendship)
>> - Removed useless Coordinate copies in CGAlgorithms::isOnLine()
>> - Added support for polygonize and parametrized buffer tests in  
>> XMLTester
>> - Fixed support for --includedir and --libdir
>> - Fixed Z interpolation in LineIntersector
>> - Handled NULL results from getCentroid() in XMLTester
>> - Segfault fix in (EMPTY)Geometry::getCentroid()
>> - Made polygon::getBoundary() always OGC-valid (no LinearRings)
>> - Input checking and promoting in  
>> GeometryFactory::createMultiLineString()
>> - Segfault fix in GeometryEditor::editPolygon()
>>
>>
>> Did anyone other then me test the code yet ?
>> It is accessible using the branch-2-1 tag of CVS.
>> Any test or bug report is highly appreciated.
>>
>> Thanks
>>
>> --strk;
>>

From strk at refractions.net  Tue Jun 14 07:07:10 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <42AE6B60.5050705@ucdavis.edu>
References: <20050606090710.GA53575@keybit.net>
	<5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
	<42AE6B60.5050705@ucdavis.edu>
Message-ID: <20050614110710.GA4792@keybit.net>

On Mon, Jun 13, 2005 at 10:30:08PM -0700, Carlos A. Rueda wrote:
> I just tried GEOS 2.1.2 (as is available from the website) under 
> MinGW: MSYS 1.0.10, MinGW 4.1.0.  The only complain was related with 
> lines 49 and 454 in source/test/XMLTester.cpp:
> If `using geos::Polygon' is kept, the compiler complains about 
> redefinition of Polygon (which I think is consistent with the comment 
> strk (?) put on that line. However, if the line is commented, the 
> complain is now that Polygon (in line 454) is not defined. So an easy 
> solution was just to qualify the usage of Polygon in line 454 and 
> comment line 49:
> 
> line 49:    //using geos::Polygon; // for mingw ...
> line 454:   vector<geos::Polygon *>*polys = ....
> 
> The build now succeeds (I haven't run the tests, however).
> 
> Hope this is useful.

Yes, thanks, but I'd like to avoid including the "other" Polygon
definition instead, how is it being imported ? Does your compiler
tell you that ? Is it in the std namespace ? I'd rather avoid
using namespace std if it is...

--strk;

From carueda at ucdavis.edu  Tue Jun 14 14:37:35 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <20050614110710.GA4792@keybit.net>
References: <20050606090710.GA53575@keybit.net>
	<5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
	<42AE6B60.5050705@ucdavis.edu> <20050614110710.GA4792@keybit.net>
Message-ID: <42AF23EF.5010608@ucdavis.edu>

strk@refractions.net wrote:
 > Yes, thanks, but I'd like to avoid including the "other" Polygon
 > definition instead, how is it being imported ? Does your compiler
 > tell you that ? Is it in the std namespace ? I'd rather avoid
 > using namespace std if it is...

It seems the other Polygon is global, not in the std namespace. What 
follows is more info about the build environment and what I did to try 
to figure it out.

$ msysinfo
msysinfo-1.3: Send this to the MSYS support list:

MSYS 1.0.10(0.46/3/2) 2004-03-15 07:17 i686 unknown; targ=MINGW32
GNU bash, version 2.04.0(1)-release (i686-pc-msys); ENV=.profile
GNU Make version 3.79.1,Built for i686-pc-msys; MAKE_MODE=unix
gcc.exe (GCC) 3.4.2 (mingw-special); targ=MINGW32
GNU ld version 2.15.91 20040904
    789320 Tue Mar 16 12:32:49 2004 /bin/msys-1.0.dll
     52064 Thu Jan 02 07:05:27 2003 /bin/msysltdl-3.dll
    135680 Tue Mar 16 12:32:48 2004 /bin/make.exe
     88064 Tue Sep 21 01:15:22 2004 /usr/local/bin/gcc.exe
    642048 Sat Sep 04 16:45:43 2004 /usr/local/bin/ld.exe
...

# this is the error with original XMLTester.cpp code:
$ cd source/test/
$ make
XMLTester.cpp:49: error: `Polygon' is already declared in this scope
make: *** [XMLTester.o] Error 1

# then I tried the -E option to see the preprocessed source:
g++  -DHAVE_CONFIG_H -I. -I. -I../..//source/headers 
-I../..//source/headers/geos
  -I../../source/headers -I../../source/io/markup  -E -o XMLTester.i 
XMLTester.cpp


Resulting XMLTester.i contains the following declaration:
   BOOL __attribute__((__stdcall__)) Polygon(HDC,const POINT*,int);
which I don;t see is nested in any namespace.

I think it's a compiler bug to not accept the `using geos::Polygon' as 
a mechanism to hide any other possible Polygon declarations, even a 
global one (please anybody correct me if I'm wrong on this). Also note 
the gcc is rather recent (3.4.2).

So my workaround for now is to fully qualify geos::Polygon.

carlos

PS. BTW, ./XMLTester passes all tests.

From strk at refractions.net  Wed Jun 15 05:17:16 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Ready for 2.1.2 ?
In-Reply-To: <42AF23EF.5010608@ucdavis.edu>
References: <20050606090710.GA53575@keybit.net>
	<5914FCEF-334E-4697-9685-F70627694BA8@refractions.net>
	<42AE6B60.5050705@ucdavis.edu> <20050614110710.GA4792@keybit.net>
	<42AF23EF.5010608@ucdavis.edu>
Message-ID: <20050615091716.GC14143@keybit.net>

On Tue, Jun 14, 2005 at 11:37:35AM -0700, Carlos A. Rueda wrote:
...
> I think it's a compiler bug to not accept the `using geos::Polygon' as 
> a mechanism to hide any other possible Polygon declarations, even a 
> global one (please anybody correct me if I'm wrong on this). Also note 
> the gcc is rather recent (3.4.2).
> 
> So my workaround for now is to fully qualify geos::Polygon.

It's probably a bug (it worked with Mark's compiler), anyway
I think we can go with fully qualification. The hard part is
*remembering* about it next time we'll need a Polygon in that
file...

Anyway, committed in both 2-1 and head branches.

--strk;

From strk at refractions.net  Fri Jun 17 11:40:01 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] geos 2.1.2 missing '.so'
In-Reply-To: <42A96E6E.5020303@m4com.de>
References: <1118350284.4131.10.camel@marcy> <42A96E6E.5020303@m4com.de>
Message-ID: <20050617154001.GA41863@keybit.net>

On Fri, Jun 10, 2005 at 12:41:50PM +0200, Reiner Beck wrote:
> Steve,
> >Shouldn't the libraries have '.so' in their names?
> > 
> I had a similar problem related to a version mismatch of libtool and the 
> ltmain.sh in the project root directory. Well, this was not related to GEOS.
> 
> However, assuming you do an installation from source, go to the geos 
> project main directory and run "libtoolize --force", do a "./configure" 
> and build geos. This fixed it for my project.
> See http://people.debian.org/~keybuk/libtool-missing_so.html for some 
> details ...

I'm trying to figure out how to fix this problem.

I've removed the ltmain.sh from the repository and put
the libtoolize call in autogen.sh.

Now, ./autogen.sh is run when a release is prepared, but
the libtool script is created by runs of ./configure.

How is it possible to have libtool (created on target machines)
and ltmain.sh (created on the distributor machine) have a 
matching version ?

--strk;

From chip_masters at yahoo.com  Fri Jun 17 15:51:02 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050613164217.GA95843@keybit.net>
Message-ID: <20050617195103.54769.qmail@web41126.mail.yahoo.com>

Thanks strk,

With that change we were able to complete that step of
the installation. Now, however, I am having difficulty
with the step:

> As postgres run:
>
>   createlang plpgsql yourdatabase
>   psql -f lwpostgis.sql -d yourdatabase

I created a test database, named 'test' and gave it
the plpgsql language. I verified that this worked:

> test=# select * from pg_language ;
>  lanname  | lanispl | lanpltrusted | lanplcallfoid |
> lanvalidator |    lanacl     
>----------+---------+--------------+---------------+--------------+---------------
>  internal | f       | f            |             0 |
        > 2246 | 
>  c        | f       | f            |             0 |
        > 2247 | 
>  plpgsql  | t       | t            |         40392 |
       > 40393 | 
>  sql      | f       | t            |             0 |
        > 2248 | {=U/postgres}
> (4 rows)

however when I try to load the lwpostgis.sql script, I
get an error:

> ~/% psql -f
/home/cyc110/scratch/postgis-1.0.1/lwpostgis.sql -d
test
> BEGIN
>psql:/home/cyc110/scratch/postgis-1.0.1/lwpostgis.sql:41:
> NOTICE:  type "histogram2d" is not yet defined
> DETAIL:  Creating a shell type definition.
>psql:/home/cyc110/scratch/postgis-1.0.1/lwpostgis.sql:41:
> ERROR:  could not load library
"/cyc110/scratch/pgsql/lib/liblwgeom.so.1.0":
/cyc110/scratch/pgsql/lib/liblwgeom.so.1.0: undefined
symbol: __builtin_new
>psql:/home/cyc110/scratch/postgis-1.0.1/lwpostgis.sql:46:
> ERROR:  current transaction is aborted, commands
ignored until end of transaction block
> ...

Any advice on this problem?

Thanks in advance,

Chip Masters

--- strk@refractions.net wrote:

> Auch! On my system that's only a warning :(
> It is probably due to CXXFLAGS being appended
> CFLAGS, which 
> inherits default value at build time.
> 
> Try changing line 206 of lwgeom/Makefile (first
> CFLAGS occurrence)
> 
> From:
> CFLAGS += ...
> 
> To:
> CFLAGS = ...
> 
> --strk;
> 
> 
> On Mon, Jun 13, 2005 at 09:24:54AM -0700, Chip
> Masters wrote:
> > OK, we downloaded the 2.1.2 GEOS package, and
> tried
> > installing PostGIS 1.0.1 w/ it, and now I'm
> getting
> > this trying to rebuild PostGIS:
> > 
> > cc1plus: Unrecognized option
> > `-Wdeclaration-after-statement'
> > cc1plus: Unrecognized option
> `-Wold-style-definition'
> > cc1plus: Unrecognized option `-Wendif-labels'
> > make[1]: *** [lwgeom_geos_wrapper.o] Error 1
> > make[1]: Leaving directory
> > `/cyc110/scratch/postgis-1.0.1/lwgeom'
> > make: *** [liblwgeom] Error 2
> > [root@cyc11 postgis]# ls
> > 
> > 
> > There are only 2 options for using GEOS in the
> > Makefile.config, and I am certain they are set
> > correctly.
> > 
> > Any help is greatly appreciated.
> > 
> > Chip Masters
> > chip_masters@yahoo.com
> > 
> > --- strk@refractions.net wrote:
> > 
> > > The upcoming 2.1.2 GEOS version should have
> fixed
> > > this,
> > > you can try downloading the "branch-2-1" branch
> from
> > > CVS.
> > > --strk;
> > > 
> > > On Wed, Jun 01, 2005 at 10:51:46AM -0700, Chip
> > > Masters wrote:
> > > > PostGIS users,
> > > > 
> > > > I recently tried compiling the PostGIS 1.0.1
> > > package
> > > > together with the GEOS 2.1.1 package,
> following
> > > the
> > > > instructions for doing so found in the
> > > README.postgis
> > > > document included in the PostGIS distribution.
> I
> > > am
> > > > using the following versions of gmake and gcc:
> > > > 
> > > > GNU Make version 3.79.1
> > > > gcc (GCC) 3.4.2
> > > > 
> > > > I am trying to install on RedHat 7.3, w/ the
> > > > 2.4.20-18.7bigmem kernel. I get the following
> > > error:
> > > > 
> > > > > ../index/quadtree/QuadTreeNodeBase.cpp:149:
> > > > `sprintf' > undeclared (first use this
> function)
> > > > > ../index/quadtree/QuadTreeNodeBase.cpp:149:
> > > (Each 
> > > > > undeclared identifier is reported only once
> for
> > > each
> > > > > function it appears in.)
> > > > > make[2]: *** [QuadTreeNodeBase.lo] Error 1
> > > > > make[2]: Leaving directory 
> > > > > `/cyc110/scratch/geos-2.1.1/source/geom'
> > > > > make[1]: *** [all-recursive] Error 1
> > > > > make[1]: Leaving directory 
> > > > > `/cyc110/scratch/geos-2.1.1/source'
> > > > > make: *** [all-recursive] Error 1
> > > > 
> > > > Can anyone help?
> > > > 
> > > > Thanks in advance,
> > > > 
> > > > Chip Masters
> > > > chip_masters@yahoo.com
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 		
> > > > __________________________________ 
> > > > Discover Yahoo! 
> > > > Get on-the-go sports scores, stock quotes,
> news
> > > and more. Check it out! 
> > > > http://discover.yahoo.com/mobile.html
> > > >
> _______________________________________________
> > > > postgis-users mailing list
> > > > postgis-users@postgis.refractions.net
> > > >
> > >
> >
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> > > _______________________________________________
> > > postgis-users mailing list
> > > postgis-users@postgis.refractions.net
> > >
> >
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> > > 
> > 
> > 
> > 
> > 
> > 
> > 		
> > __________________________________ 
> > Yahoo! Mail Mobile 
> > Take Yahoo! Mail with you! Check email on your
> mobile phone. 
> > http://mobile.yahoo.com/learn/mail 
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@geos.refractions.net
> >
>
http://geos.refractions.net/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
>
http://geos.refractions.net/mailman/listinfo/geos-devel
> 





		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com

From strk at refractions.net  Fri Jun 17 18:47:49 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050617195103.54769.qmail@web41126.mail.yahoo.com>
References: <20050613164217.GA95843@keybit.net>
	<20050617195103.54769.qmail@web41126.mail.yahoo.com>
Message-ID: <20050617224749.GA44813@keybit.net>

On Fri, Jun 17, 2005 at 12:51:02PM -0700, Chip Masters wrote:
...
> > ERROR:  could not load library
> "/cyc110/scratch/pgsql/lib/liblwgeom.so.1.0":
> /cyc110/scratch/pgsql/lib/liblwgeom.so.1.0: undefined
> symbol: __builtin_new

Can you check liblwgeom.so.1.0 being
linked against the stdlibc++ library ?

--strk;

From strk at refractions.net  Mon Jun 20 06:24:09 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] XMLTester installed by default
Message-ID: <20050620102409.GB68775@keybit.net>

I've made XMLTester installed by default in
head and 2-1 branches.

--strk;

From chip_masters at yahoo.com  Mon Jun 20 16:18:43 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050617224749.GA44813@keybit.net>
Message-ID: <20050620201843.32169.qmail@web41110.mail.yahoo.com>

I'm sorry, srtk, I don't understand exactly what you
mean by that. Can you give me an example of how I
would check the linking. (I'm not very familiar with C
or C++.)

If it helps, I am running libstdc++ version
2.96-112.7.1 which I am told is often incompatable
with newer software because it is so old. If libstdc++
needs to be upgraded then we will upgrade our postgis
machine to SuSE 9.2. Do you know of any issues with
running postgis/geos on SuSE?

Thanks again,

Chip Masters

--- strk@refractions.net wrote:

> On Fri, Jun 17, 2005 at 12:51:02PM -0700, Chip
> Masters wrote:
> ...
> > > ERROR:  could not load library
> > "/cyc110/scratch/pgsql/lib/liblwgeom.so.1.0":
> > /cyc110/scratch/pgsql/lib/liblwgeom.so.1.0:
> undefined
> > symbol: __builtin_new
> 
> Can you check liblwgeom.so.1.0 being
> linked against the stdlibc++ library ?
> 
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
>
http://geos.refractions.net/mailman/listinfo/geos-devel
> 





		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com

From strk at refractions.net  Mon Jun 20 16:20:25 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050620201843.32169.qmail@web41110.mail.yahoo.com>
References: <20050617224749.GA44813@keybit.net>
	<20050620201843.32169.qmail@web41110.mail.yahoo.com>
Message-ID: <20050620202025.GB76003@keybit.net>

On Mon, Jun 20, 2005 at 01:18:43PM -0700, Chip Masters wrote:
> I'm sorry, srtk, I don't understand exactly what you
> mean by that. Can you give me an example of how I
> would check the linking. (I'm not very familiar with C
> or C++.)

# ldd /cyc110/scratch/pgsql/lib/liblwgeom.so.1.0

--strk;

> 
> If it helps, I am running libstdc++ version
> 2.96-112.7.1 which I am told is often incompatable
> with newer software because it is so old. If libstdc++
> needs to be upgraded then we will upgrade our postgis
> machine to SuSE 9.2. Do you know of any issues with
> running postgis/geos on SuSE?
> 
> Thanks again,
> 
> Chip Masters
> 
> --- strk@refractions.net wrote:
> 
> > On Fri, Jun 17, 2005 at 12:51:02PM -0700, Chip
> > Masters wrote:
> > ...
> > > > ERROR:  could not load library
> > > "/cyc110/scratch/pgsql/lib/liblwgeom.so.1.0":
> > > /cyc110/scratch/pgsql/lib/liblwgeom.so.1.0:
> > undefined
> > > symbol: __builtin_new
> > 
> > Can you check liblwgeom.so.1.0 being
> > linked against the stdlibc++ library ?
> > 
> > --strk;
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@geos.refractions.net
> >
> http://geos.refractions.net/mailman/listinfo/geos-devel
> > 
> 
> 
> 
> 
> 
> 		
> ____________________________________________________ 
> Yahoo! Sports 
> Rekindle the Rivalries. Sign up for Fantasy Football 
> http://football.fantasysports.yahoo.com
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-users

From chip_masters at yahoo.com  Mon Jun 20 17:15:56 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050620202025.GB76003@keybit.net>
Message-ID: <20050620211556.70317.qmail@web41121.mail.yahoo.com>

Thanks strk. Here's what I get from ldd:

[postgres@cyc11 pgsql]$ ldd
/cyc110/scratch/pgsql/lib/liblwgeom.so.1.0
        libstdc++.so.6 =>
/usr/local/lib/libstdc++.so.6 (0x4014d000)
        libproj.so.0 => /usr/local/lib/libproj.so.0
(0x40233000)
        libgcc_s.so.1 => /usr/lib/libgcc_s.so.1
(0x40268000)
        libc.so.6 => /lib/libc.so.6 (0x40271000)
        libm.so.6 => /lib/libm.so.6 (0x403a8000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2
(0x80000000)


--- strk@refractions.net wrote:

> On Mon, Jun 20, 2005 at 01:18:43PM -0700, Chip
> Masters wrote:
> > I'm sorry, srtk, I don't understand exactly what
> you
> > mean by that. Can you give me an example of how I
> > would check the linking. (I'm not very familiar
> with C
> > or C++.)
> 
> # ldd /cyc110/scratch/pgsql/lib/liblwgeom.so.1.0
> 
> --strk;
> 
> > 
> > If it helps, I am running libstdc++ version
> > 2.96-112.7.1 which I am told is often incompatable
> > with newer software because it is so old. If
> libstdc++
> > needs to be upgraded then we will upgrade our
> postgis
> > machine to SuSE 9.2. Do you know of any issues
> with
> > running postgis/geos on SuSE?
> > 
> > Thanks again,
> > 
> > Chip Masters
> > 
> > --- strk@refractions.net wrote:
> > 
> > > On Fri, Jun 17, 2005 at 12:51:02PM -0700, Chip
> > > Masters wrote:
> > > ...
> > > > > ERROR:  could not load library
> > > > "/cyc110/scratch/pgsql/lib/liblwgeom.so.1.0":
> > > > /cyc110/scratch/pgsql/lib/liblwgeom.so.1.0:
> > > undefined
> > > > symbol: __builtin_new
> > > 
> > > Can you check liblwgeom.so.1.0 being
> > > linked against the stdlibc++ library ?
> > > 
> > > --strk;
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel@geos.refractions.net
> > >
> >
>
http://geos.refractions.net/mailman/listinfo/geos-devel
> > > 
> > 
> > 
> > 
> > 
> > 
> > 		
> >
> ____________________________________________________
> 
> > Yahoo! Sports 
> > Rekindle the Rivalries. Sign up for Fantasy
> Football 
> > http://football.fantasysports.yahoo.com
> > _______________________________________________
> > postgis-users mailing list
> > postgis-users@postgis.refractions.net
> >
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> 





		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com

From strk at refractions.net  Mon Jun 20 18:09:55 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050620211556.70317.qmail@web41121.mail.yahoo.com>
References: <20050620202025.GB76003@keybit.net>
	<20050620211556.70317.qmail@web41121.mail.yahoo.com>
Message-ID: <20050620220955.GA76659@keybit.net>

On Mon, Jun 20, 2005 at 02:15:56PM -0700, Chip Masters wrote:
> Thanks strk. Here's what I get from ldd:
> 
> [postgres@cyc11 pgsql]$ ldd
> /cyc110/scratch/pgsql/lib/liblwgeom.so.1.0
>         libstdc++.so.6 =>
> /usr/local/lib/libstdc++.so.6 (0x4014d000)
>         libproj.so.0 => /usr/local/lib/libproj.so.0
> (0x40233000)
>         libgcc_s.so.1 => /usr/lib/libgcc_s.so.1
> (0x40268000)
>         libc.so.6 => /lib/libc.so.6 (0x40271000)
>         libm.so.6 => /lib/libm.so.6 (0x403a8000)
>         /lib/ld-linux.so.2 => /lib/ld-linux.so.2
> (0x80000000)


mmm the c++ standard lib is there, does anyone have an idea
of where should __builtin_new be defined ?
Did you get any warning at compile time ?
Can you run any GEOS application (XMLTester in source/test) ?

--strk;

From chip_masters at yahoo.com  Mon Jun 20 18:31:36 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050620220955.GA76659@keybit.net>
Message-ID: <20050620223136.62257.qmail@web41102.mail.yahoo.com>

XMLTester works fine:

> ...
> Failed: 0
> Succeeded: 490
> End Test

Chip

--- strk@refractions.net wrote:

> On Mon, Jun 20, 2005 at 02:15:56PM -0700, Chip
> Masters wrote:
> > Thanks strk. Here's what I get from ldd:
> > 
> > [postgres@cyc11 pgsql]$ ldd
> > /cyc110/scratch/pgsql/lib/liblwgeom.so.1.0
> >         libstdc++.so.6 =>
> > /usr/local/lib/libstdc++.so.6 (0x4014d000)
> >         libproj.so.0 =>
> /usr/local/lib/libproj.so.0
> > (0x40233000)
> >         libgcc_s.so.1 => /usr/lib/libgcc_s.so.1
> > (0x40268000)
> >         libc.so.6 => /lib/libc.so.6 (0x40271000)
> >         libm.so.6 => /lib/libm.so.6 (0x403a8000)
> >         /lib/ld-linux.so.2 => /lib/ld-linux.so.2
> > (0x80000000)
> 
> 
> mmm the c++ standard lib is there, does anyone have
> an idea
> of where should __builtin_new be defined ?
> Did you get any warning at compile time ?
> Can you run any GEOS application (XMLTester in
> source/test) ?
> 
> --strk;
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> 





		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com

From strk at refractions.net  Mon Jun 20 19:13:13 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050620223136.62257.qmail@web41102.mail.yahoo.com>
References: <20050620220955.GA76659@keybit.net>
	<20050620223136.62257.qmail@web41102.mail.yahoo.com>
Message-ID: <20050620231313.GC76659@keybit.net>

On Mon, Jun 20, 2005 at 03:31:36PM -0700, Chip Masters wrote:
> XMLTester works fine:
> 
> > ...
> > Failed: 0
> > Succeeded: 490
> > End Test
> 
> Chip

Is the `postgres` binary linked against libstdc++ as well ?
--strk;

From carl.anderson at vadose.org  Mon Jun 20 20:02:49 2005
From: carl.anderson at vadose.org (Carl Anderson)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] non precision related geometric issue
Message-ID: <42B75929.6010108@vadose.org>


Based on recent improvements in the geos library, I have started in 
depth geometric testing.
Thanks to all for the improvements.

attached is a test file for XMLTester for a failure case.

The B object has an edge intersection with itself, violating assertions 
2.1.12.1 and 2.1.12.2 of the SF SQL spec.  GEOS reports it as valid but 
upon intersection it abends.  JTS/GEOS is not conditioned to test for 
those assertions but Martin may have had those assertions in mind when 
writing the overlayOp bts.

This is not a precision issue as can be clearly be seen from the test file.

There is another variation of this issue that I cannot, as of yet, 
reliably express with a simple test case.
The variation invloves shared edges between the two test objects.  I 
will keep digging.

C.



-------------- next part --------------
A non-text attachment was scrubbed...
Name: mytest8.xml
Type: text/xml
Size: 532 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20050620/75704668/mytest8.xml
From chip_masters at yahoo.com  Mon Jun 20 23:13:11 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050620231313.GC76659@keybit.net>
Message-ID: <20050621031311.36290.qmail@web41123.mail.yahoo.com>

Yes it is.

~/bin/% ldd postgres
        libstdc++.so.6 =>
/usr/local/lib/libstdc++.so.6 (0x40022000)
        libz.so.1 => /usr/lib/libz.so.1 (0x40108000)
        libreadline.so.4.1 =>
/usr/lib/libreadline.so.4.1 (0x40116000)
        libtermcap.so.2 => /lib/libtermcap.so.2
(0x4013c000)
        libcrypt.so.1 => /lib/libcrypt.so.1
(0x40141000)
        libresolv.so.2 => /lib/libresolv.so.2
(0x4016e000)
        libnsl.so.1 => /lib/libnsl.so.1 (0x40180000)
        libdl.so.2 => /lib/libdl.so.2 (0x40197000)
        libm.so.6 => /lib/libm.so.6 (0x4019b000)
        libc.so.6 => /lib/libc.so.6 (0x401bd000)
        libgcc_s.so.1 => /usr/lib/libgcc_s.so.1
(0x402f3000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2
(0x40000000)


--- strk@refractions.net wrote:

> On Mon, Jun 20, 2005 at 03:31:36PM -0700, Chip
> Masters wrote:
> > XMLTester works fine:
> > 
> > > ...
> > > Failed: 0
> > > Succeeded: 490
> > > End Test
> > 
> > Chip
> 
> Is the `postgres` binary linked against libstdc++ as
> well ?
> --strk;
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> 





		
__________________________________ 
Discover Yahoo! 
Use Yahoo! to plan a weekend, have fun online and more. Check it out! 
http://discover.yahoo.com/

From strk at refractions.net  Tue Jun 21 04:34:11 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] non precision related geometric issue
In-Reply-To: <42B75929.6010108@vadose.org>
References: <42B75929.6010108@vadose.org>
Message-ID: <20050621083411.GD76659@keybit.net>

On Mon, Jun 20, 2005 at 08:02:49PM -0400, Carl Anderson wrote:
> 
> Based on recent improvements in the geos library, I have started in 
> depth geometric testing.
> Thanks to all for the improvements.
> 
> attached is a test file for XMLTester for a failure case.
> 
> The B object has an edge intersection with itself, violating assertions 
> 2.1.12.1 and 2.1.12.2 of the SF SQL spec.  GEOS reports it as valid but 
> upon intersection it abends.  JTS/GEOS is not conditioned to test for 
> those assertions but Martin may have had those assertions in mind when 
> writing the overlayOp bts.

That's an error in XMLTester, swap A and B geometries and you'll
read two 'false' from isvalid. 'arg1' is not honourated !
I'll take a look at it.

--strk;

> 
> This is not a precision issue as can be clearly be seen from the test file.
> 
> There is another variation of this issue that I cannot, as of yet, 
> reliably express with a simple test case.
> The variation invloves shared edges between the two test objects.  I 
> will keep digging.
> 
> C.
> 
> 
> 


> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From strk at refractions.net  Tue Jun 21 05:18:47 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <9EB50F1A91413F4FA63019487FCD251D1133E4@WEBBASEDDC.webbasedltd.local>
References: <20050620220955.GA76659@keybit.net>
	<9EB50F1A91413F4FA63019487FCD251D1133E4@WEBBASEDDC.webbasedltd.local>
Message-ID: <20050621091847.GA82130@keybit.net>

On Tue, Jun 21, 2005 at 09:41:36AM +0100, Mark Cave-Ayland wrote:
...
> Could you write a script using 'nm' that would find the symbol, e.g. the
> following works but is not recursive (you could probably solve this with
> some bash scripting):
> 
> nm --dynamic /usr/lib/* | grep '__builtin_new'

# find <root> -type f -name '*so' | xargs nm --print-file-name --dynamic 2> /dev/null | grep __builtin_new

I find many 'U'ndefined, few 'T'ext (libflashplayer) and 'W'eak symbols,
one of which in libstdc++

/usr/lib/libstdc++-3-libc6.1-2-2.10.0.so:000264b0 W __builtin_new

No symbols in my GCC 3.4.3 root!

--strk;

From chip_masters at yahoo.com  Tue Jun 21 12:28:01 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <9EB50F1A91413F4FA63019487FCD251D1133E7@WEBBASEDDC.webbasedltd.local>
Message-ID: <20050621162801.21526.qmail@web41126.mail.yahoo.com>

--- Mark Cave-Ayland <m.cave-ayland@webbased.co.uk>
wrote:

>  
> 
> > -----Original Message-----
> > From:
> postgis-users-bounces@postgis.refractions.net 
> >
>
[mailto:postgis-users-bounces@postgis.refractions.net]
> On 
> > Behalf Of strk@refractions.net
> > Sent: 21 June 2005 10:19
> > To: 'PostGIS Users Discussion'; 'GEOS Development
> List'
> > Subject: Re: [geos-devel] Re: [postgis-users]
> Error compiling 
> > PostGIS + GEOS
> > 
> > 
> > On Tue, Jun 21, 2005 at 09:41:36AM +0100, Mark
> Cave-Ayland wrote: ...
> > > Could you write a script using 'nm' that would
> find the 
> > symbol, e.g. 
> > > the following works but is not recursive (you
> could probably solve 
> > > this with some bash scripting):
> > > 
> > > nm --dynamic /usr/lib/* | grep '__builtin_new'
> > 
> > # find <root> -type f -name '*so' | xargs nm 
> > --print-file-name --dynamic 2> /dev/null | grep
> __builtin_new
> > 
> > I find many 'U'ndefined, few 'T'ext
> (libflashplayer) and 
> > 'W'eak symbols, one of which in libstdc++
> > 
> > /usr/lib/libstdc++-3-libc6.1-2-2.10.0.so:000264b0
> W __builtin_new
> > 
> > No symbols in my GCC 3.4.3 root!
> > 
> > --strk;
> 
> 
> Hmmm, me neither :(
> 
> It seems to suggest a broken compiler or
> installation - perhaps one of the
> libraries upon which PostGIS depends has been
> installed from a binary
> RPM/package compiled from a different version of gcc
> which shows up this
> particular bug? It may be worth checking if Chip has
> manually compiled and
> installed all the relevant libraries on the same
> machine.
> 
> 
> Kind regards,
> 
> Mark.
> 
> ------------------------
> WebBased Ltd
> 17 Research Way
> Tamar Science Park
> Plymouth
> PL6 8BT 
> 
> T: +44 (0)1752 797131
> F: +44 (0)1752 791023
> W: http://www.webbased.co.uk
> 

Hi Mark,

I asked our system administrator to look into the
library configuration on cyc11, where we are trying to
install postgis, and here's his response:

> Yes, pretty much all of the libraries were installed
> from RedHat 7.1 rpms. The only thing we built by
hand 
> was gcc 3.4.3.  Running their script yields the 
> following results (with all of the mozilla/plugin 
> libraries snipped)
>
> /usr/lib/libstdc++-2-libc6.1-1-2.9.0.so:000311c0 W 
> __builtin_new
> /usr/lib/libdb_cxx-3.1.so:000777b4 W __builtin_new
> /usr/lib/libstdc++-3-libc6.2-2-2.10.0.so:000271d4 W 
> __builtin_new

We have the option of upgrading our OS to SuSE 9.2,
which we would be required to do if fixing this
problem involves recompiling the standard C/C++
libraries. Do you have any reason to believe that
later versions of the shared libraries might not
exhibit this problem?

Thanks again for everyone's help.

Chip




		
__________________________________ 
Yahoo! Mail 
Stay connected, organized, and protected. Take the tour: 
http://tour.mail.yahoo.com/mailtour.html 


From strk at refractions.net  Tue Jun 21 17:17:42 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050621162801.21526.qmail@web41126.mail.yahoo.com>
References: <9EB50F1A91413F4FA63019487FCD251D1133E7@WEBBASEDDC.webbasedltd.local>
	<20050621162801.21526.qmail@web41126.mail.yahoo.com>
Message-ID: <20050621211742.GF82130@keybit.net>

I recall something like GCC-3.4 having an ABI compatibility problem for C++
code compiled with previous versions.
Can you try recompiling GEOS with the new compiler ?

--strk;

On Tue, Jun 21, 2005 at 09:28:01AM -0700, Chip Masters wrote:
> --- Mark Cave-Ayland <m.cave-ayland@webbased.co.uk>
> wrote:
> 
> >  
> > 
> > > -----Original Message-----
> > > From:
> > postgis-users-bounces@postgis.refractions.net 
> > >
> >
> [mailto:postgis-users-bounces@postgis.refractions.net]
> > On 
> > > Behalf Of strk@refractions.net
> > > Sent: 21 June 2005 10:19
> > > To: 'PostGIS Users Discussion'; 'GEOS Development
> > List'
> > > Subject: Re: [geos-devel] Re: [postgis-users]
> > Error compiling 
> > > PostGIS + GEOS
> > > 
> > > 
> > > On Tue, Jun 21, 2005 at 09:41:36AM +0100, Mark
> > Cave-Ayland wrote: ...
> > > > Could you write a script using 'nm' that would
> > find the 
> > > symbol, e.g. 
> > > > the following works but is not recursive (you
> > could probably solve 
> > > > this with some bash scripting):
> > > > 
> > > > nm --dynamic /usr/lib/* | grep '__builtin_new'
> > > 
> > > # find <root> -type f -name '*so' | xargs nm 
> > > --print-file-name --dynamic 2> /dev/null | grep
> > __builtin_new
> > > 
> > > I find many 'U'ndefined, few 'T'ext
> > (libflashplayer) and 
> > > 'W'eak symbols, one of which in libstdc++
> > > 
> > > /usr/lib/libstdc++-3-libc6.1-2-2.10.0.so:000264b0
> > W __builtin_new
> > > 
> > > No symbols in my GCC 3.4.3 root!
> > > 
> > > --strk;
> > 
> > 
> > Hmmm, me neither :(
> > 
> > It seems to suggest a broken compiler or
> > installation - perhaps one of the
> > libraries upon which PostGIS depends has been
> > installed from a binary
> > RPM/package compiled from a different version of gcc
> > which shows up this
> > particular bug? It may be worth checking if Chip has
> > manually compiled and
> > installed all the relevant libraries on the same
> > machine.
> > 
> > 
> > Kind regards,
> > 
> > Mark.
> > 
> > ------------------------
> > WebBased Ltd
> > 17 Research Way
> > Tamar Science Park
> > Plymouth
> > PL6 8BT 
> > 
> > T: +44 (0)1752 797131
> > F: +44 (0)1752 791023
> > W: http://www.webbased.co.uk
> > 
> 
> Hi Mark,
> 
> I asked our system administrator to look into the
> library configuration on cyc11, where we are trying to
> install postgis, and here's his response:
> 
> > Yes, pretty much all of the libraries were installed
> > from RedHat 7.1 rpms. The only thing we built by
> hand 
> > was gcc 3.4.3.  Running their script yields the 
> > following results (with all of the mozilla/plugin 
> > libraries snipped)
> >
> > /usr/lib/libstdc++-2-libc6.1-1-2.9.0.so:000311c0 W 
> > __builtin_new
> > /usr/lib/libdb_cxx-3.1.so:000777b4 W __builtin_new
> > /usr/lib/libstdc++-3-libc6.2-2-2.10.0.so:000271d4 W 
> > __builtin_new
> 
> We have the option of upgrading our OS to SuSE 9.2,
> which we would be required to do if fixing this
> problem involves recompiling the standard C/C++
> libraries. Do you have any reason to believe that
> later versions of the shared libraries might not
> exhibit this problem?
> 
> Thanks again for everyone's help.
> 
> Chip
> 
> 
> 
> 
> 		
> __________________________________ 
> Yahoo! Mail 
> Stay connected, organized, and protected. Take the tour: 
> http://tour.mail.yahoo.com/mailtour.html 
> 
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-users

From strk at refractions.net  Tue Jun 21 17:50:48 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] non precision related geometric issue
In-Reply-To: <20050621083411.GD76659@keybit.net>
References: <42B75929.6010108@vadose.org> <20050621083411.GD76659@keybit.net>
Message-ID: <20050621215048.GK82130@keybit.net>

On Tue, Jun 21, 2005 at 10:34:11AM +0200, strk@refractions.net wrote:
> On Mon, Jun 20, 2005 at 08:02:49PM -0400, Carl Anderson wrote:
> > 
> > Based on recent improvements in the geos library, I have started in 
> > depth geometric testing.
> > Thanks to all for the improvements.
> > 
> > attached is a test file for XMLTester for a failure case.
> > 
> > The B object has an edge intersection with itself, violating assertions 
> > 2.1.12.1 and 2.1.12.2 of the SF SQL spec.  GEOS reports it as valid but 
> > upon intersection it abends.  JTS/GEOS is not conditioned to test for 
> > those assertions but Martin may have had those assertions in mind when 
> > writing the overlayOp bts.
> 
> That's an error in XMLTester, swap A and B geometries and you'll
> read two 'false' from isvalid. 'arg1' is not honourated !
> I'll take a look at it.

I've fixed the isValid test handling and restructured the XMLTester
code somehow, but it's still often fails honouring parameters, don't 
expect it to always understand what you type in XML ...

--strk;

From chip_masters at yahoo.com  Tue Jun 21 18:45:51 2005
From: chip_masters at yahoo.com (Chip Masters)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050621211742.GF82130@keybit.net>
Message-ID: <20050621224551.13192.qmail@web41109.mail.yahoo.com>

We did compile GEOS (PostgreSQL and PostGIS as well)
with GCC 3.4.3. 

--- strk@refractions.net wrote:

> I recall something like GCC-3.4 having an ABI
> compatibility problem for C++
> code compiled with previous versions.
> Can you try recompiling GEOS with the new compiler ?
> 
> --strk;
> 
> On Tue, Jun 21, 2005 at 09:28:01AM -0700, Chip
> Masters wrote:
> > --- Mark Cave-Ayland
> <m.cave-ayland@webbased.co.uk>
> > wrote:
> > 
> > >  
> > > 
> > > > -----Original Message-----
> > > > From:
> > > postgis-users-bounces@postgis.refractions.net 
> > > >
> > >
> >
>
[mailto:postgis-users-bounces@postgis.refractions.net]
> > > On 
> > > > Behalf Of strk@refractions.net
> > > > Sent: 21 June 2005 10:19
> > > > To: 'PostGIS Users Discussion'; 'GEOS
> Development
> > > List'
> > > > Subject: Re: [geos-devel] Re: [postgis-users]
> > > Error compiling 
> > > > PostGIS + GEOS
> > > > 
> > > > 
> > > > On Tue, Jun 21, 2005 at 09:41:36AM +0100, Mark
> > > Cave-Ayland wrote: ...
> > > > > Could you write a script using 'nm' that
> would
> > > find the 
> > > > symbol, e.g. 
> > > > > the following works but is not recursive
> (you
> > > could probably solve 
> > > > > this with some bash scripting):
> > > > > 
> > > > > nm --dynamic /usr/lib/* | grep
> '__builtin_new'
> > > > 
> > > > # find <root> -type f -name '*so' | xargs nm 
> > > > --print-file-name --dynamic 2> /dev/null |
> grep
> > > __builtin_new
> > > > 
> > > > I find many 'U'ndefined, few 'T'ext
> > > (libflashplayer) and 
> > > > 'W'eak symbols, one of which in libstdc++
> > > > 
> > > >
> /usr/lib/libstdc++-3-libc6.1-2-2.10.0.so:000264b0
> > > W __builtin_new
> > > > 
> > > > No symbols in my GCC 3.4.3 root!
> > > > 
> > > > --strk;
> > > 
> > > 
> > > Hmmm, me neither :(
> > > 
> > > It seems to suggest a broken compiler or
> > > installation - perhaps one of the
> > > libraries upon which PostGIS depends has been
> > > installed from a binary
> > > RPM/package compiled from a different version of
> gcc
> > > which shows up this
> > > particular bug? It may be worth checking if Chip
> has
> > > manually compiled and
> > > installed all the relevant libraries on the same
> > > machine.
> > > 
> > > 
> > > Kind regards,
> > > 
> > > Mark.
> > > 
> > > ------------------------
> > > WebBased Ltd
> > > 17 Research Way
> > > Tamar Science Park
> > > Plymouth
> > > PL6 8BT 
> > > 
> > > T: +44 (0)1752 797131
> > > F: +44 (0)1752 791023
> > > W: http://www.webbased.co.uk
> > > 
> > 
> > Hi Mark,
> > 
> > I asked our system administrator to look into the
> > library configuration on cyc11, where we are
> trying to
> > install postgis, and here's his response:
> > 
> > > Yes, pretty much all of the libraries were
> installed
> > > from RedHat 7.1 rpms. The only thing we built by
> > hand 
> > > was gcc 3.4.3.  Running their script yields the 
> > > following results (with all of the
> mozilla/plugin 
> > > libraries snipped)
> > >
> > > /usr/lib/libstdc++-2-libc6.1-1-2.9.0.so:000311c0
> W 
> > > __builtin_new
> > > /usr/lib/libdb_cxx-3.1.so:000777b4 W
> __builtin_new
> > >
> /usr/lib/libstdc++-3-libc6.2-2-2.10.0.so:000271d4 W 
> > > __builtin_new
> > 
> > We have the option of upgrading our OS to SuSE
> 9.2,
> > which we would be required to do if fixing this
> > problem involves recompiling the standard C/C++
> > libraries. Do you have any reason to believe that
> > later versions of the shared libraries might not
> > exhibit this problem?
> > 
> > Thanks again for everyone's help.
> > 
> > Chip
> > 
> > 
> > 
> > 
> > 		
> > __________________________________ 
> > Yahoo! Mail 
> > Stay connected, organized, and protected. Take the
> tour: 
> > http://tour.mail.yahoo.com/mailtour.html 
> > 
> > _______________________________________________
> > postgis-users mailing list
> > postgis-users@postgis.refractions.net
> >
>
http://postgis.refractions.net/mailman/listinfo/postgis-users
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
>
http://geos.refractions.net/mailman/listinfo/geos-devel
> 





		
____________________________________________________ 
Yahoo! Sports 
Rekindle the Rivalries. Sign up for Fantasy Football 
http://football.fantasysports.yahoo.com

From strk at refractions.net  Tue Jun 21 19:04:40 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-users] Error compiling PostGIS + GEOS
In-Reply-To: <20050621224551.13192.qmail@web41109.mail.yahoo.com>
References: <20050621211742.GF82130@keybit.net>
	<20050621224551.13192.qmail@web41109.mail.yahoo.com>
Message-ID: <20050621230440.GQ82130@keybit.net>

On Tue, Jun 21, 2005 at 03:45:51PM -0700, Chip Masters wrote:
> We did compile GEOS (PostgreSQL and PostGIS as well)
> with GCC 3.4.3. 

Are you sure you don't have old c++ headers around ?
Can you seek that __builtin_new symbol in system headers ?

--strk;

From strk at refractions.net  Tue Jun 21 20:50:52 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] GeomUnion shortcircuit tests
In-Reply-To: <20050621220332.GN82130@keybit.net>
References: <20050621220332.GN82130@keybit.net>
Message-ID: <20050622005052.GC90155@keybit.net>

As suggested by Bill I've implemented short circuit tests
in GEOS' Union operation: when bounding boxes of input geoms
are disjoint we just merge the two geoms in a collection, avoiding
to build graphs, node, etc...

HEAD & 2-1 branches updated.

Bill, if you have GEOS source code you can uncomment a debugging
line inside the short-circuit test so to be warned when the
disjoint-bboxes happen. This could help checking how number 
of occurrences relate to different types of sorting.

--strk;

From strk at refractions.net  Thu Jun 23 06:55:18 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: [postgis-devel] GeomUnion Performance Info
In-Reply-To: <Pine.LNX.4.58.0506222148200.5066@fastcat.binko.net>
References: <42B5D9B8.3030109@binko.net> <20050621213739.GH82130@keybit.net>
	<42B8D41F.5050607@binko.net> <20050622093545.GB93884@keybit.net>
	<Pine.LNX.4.58.0506221428140.19006@fastcat.binko.net>
	<Pine.LNX.4.58.0506221716370.31000@fastcat.binko.net>
	<20050623000407.GA1176@keybit.net>
	<Pine.LNX.4.58.0506222026420.31000@fastcat.binko.net>
	<Pine.LNX.4.58.0506222148200.5066@fastcat.binko.net>
Message-ID: <20050623105518.GA5443@keybit.net>

Bill, I found a missing backport of a performance improvement 
after profiling GeomUnion. It was on the most-time-consuming
function CGAlgorithm::isPointInRing(). Now this is fixed, could
you update your snapshot before remaking your tests ?

(I'm talking about 2-1 branch)

Thank you.

--strk;

From strk at refractions.net  Fri Jun 24 05:26:52 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] isOnLine optimizations
Message-ID: <20050624092652.GB15072@keybit.net>

I've been profiling Union operations.
It seems the most time-spending function
is Envelope::intersects() called by LineIntersector::computeIntersection()
called by CGAlgorithms::isOnLine for every segment of a given
CoordinateSequence.

I think we can optimize this in two ways:

	1) easier, quicker: LineIntersector::hasIntersection(p1, p2, q)
	   so to avoid Z computation and properVar.

	2) descend the input CoordinateSequence in a binary
	   fashion and checking Envelope intersection of the
	   section. Keep descending until a intersecting segment
	   is found.

For point (2) we might be able to use one of the existing indexes
but I'm not sure how much overhead we would be adding with that.

What do you think ?

--strk;

From strk at refractions.net  Fri Jun 24 05:32:20 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] isOnLine optimizations
In-Reply-To: <20050624092652.GB15072@keybit.net>
References: <20050624092652.GB15072@keybit.net>
Message-ID: <20050624093220.GA15557@keybit.net>

On Fri, Jun 24, 2005 at 11:26:52AM +0200, strk@refractions.net wrote:
> I've been profiling Union operations.
> It seems the most time-spending function
> is Envelope::intersects() called by LineIntersector::computeIntersection()
> called by CGAlgorithms::isOnLine for every segment of a given
> CoordinateSequence.
> 
> I think we can optimize this in two ways:
> 
> 	1) easier, quicker: LineIntersector::hasIntersection(p1, p2, q)
> 	   so to avoid Z computation and properVar.

Tried this, time for my example union (20 world countries incremental
union) goes from 1m6sec to 1m0sec (93%, not much).

--strk;

> 
> 	2) descend the input CoordinateSequence in a binary
> 	   fashion and checking Envelope intersection of the
> 	   section. Keep descending until a intersecting segment
> 	   is found.
> 
> For point (2) we might be able to use one of the existing indexes
> but I'm not sure how much overhead we would be adding with that.
> 
> What do you think ?
> 
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From strk at refractions.net  Fri Jun 24 06:14:46 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] isOnLine optimizations
In-Reply-To: <20050624092652.GB15072@keybit.net>
References: <20050624092652.GB15072@keybit.net>
Message-ID: <20050624101446.GB15557@keybit.net>

On Fri, Jun 24, 2005 at 11:26:52AM +0200, strk@refractions.net wrote:
...
> 	2) descend the input CoordinateSequence in a binary
> 	   fashion and checking Envelope intersection of the
> 	   section. Keep descending until a intersecting segment
> 	   is found.

Oops... this was bullshit, arbitrary points don't give you 
envelope of the whole segment. Sorry... thinknig another way
to speed it up..

--strk;

From strk at refractions.net  Fri Jun 24 07:30:10 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] isOnLine optimizations
In-Reply-To: <20050624093220.GA15557@keybit.net>
References: <20050624092652.GB15072@keybit.net>
	<20050624093220.GA15557@keybit.net>
Message-ID: <20050624113010.GA16577@keybit.net>

On Fri, Jun 24, 2005 at 11:32:20AM +0200, strk@refractions.net wrote:
> On Fri, Jun 24, 2005 at 11:26:52AM +0200, strk@refractions.net wrote:
> > I've been profiling Union operations.
> > It seems the most time-spending function
> > is Envelope::intersects() called by LineIntersector::computeIntersection()
> > called by CGAlgorithms::isOnLine for every segment of a given
> > CoordinateSequence.
> > 
> > I think we can optimize this in two ways:
> > 
> > 	1) easier, quicker: LineIntersector::hasIntersection(p1, p2, q)
> > 	   so to avoid Z computation and properVar.
> 
> Tried this, time for my example union (20 world countries incremental
> union) goes from 1m6sec to 1m0sec (93%, not much).

Ok, I'm fine with this. Linking postgis against JTS makes the
query run in about 1m30sec.

--strk;

From garand at odragis.org  Fri Jun 24 14:24:26 2005
From: garand at odragis.org (Michel Garand)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] library link problem
Message-ID: <1119637467.5947.17.camel@geoport.odragis.org>

Greetings!

I have compiled the new geos 2.1.2 and somehow when i check to see if
the ldconfig has done its job by doing a ldconfig -v  libgeos, libgeos.2
and libgeos.2.1.2 are not found it is not there. :(

Can anybody give me a advice?

Thanks

Michel




From strk at refractions.net  Fri Jun 24 14:31:04 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] library link problem
In-Reply-To: <1119637467.5947.17.camel@geoport.odragis.org>
References: <1119637467.5947.17.camel@geoport.odragis.org>
Message-ID: <20050624183104.GA20478@keybit.net>

On Fri, Jun 24, 2005 at 08:24:26PM +0200, Michel Garand wrote:
> Greetings!
> 
> I have compiled the new geos 2.1.2 and somehow when i check to see if
> the ldconfig has done its job by doing a ldconfig -v  libgeos, libgeos.2
> and libgeos.2.1.2 are not found it is not there. :(
> 
> Can anybody give me a advice?

Please try:
libtoolize --force
./configure again
make install

See also:
http://geos.refractions.net/pipermail/geos-devel/2005-June/001459.html

--strk;

From garand at odragis.org  Fri Jun 24 15:57:45 2005
From: garand at odragis.org (Michel Garand)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] library link problem
In-Reply-To: <20050624183104.GA20478@keybit.net>
References: <1119637467.5947.17.camel@geoport.odragis.org>
	<20050624183104.GA20478@keybit.net>
Message-ID: <1119643065.5947.23.camel@geoport.odragis.org>

Greetings!
still no luck :(
with ldconfig -v libgeos, libgeos.2, libgeos.2.1.2 still don't appear even though there are in /usr/local/lib!

Michel

On Fri, 2005-06-24 at 20:31 +0200, strk@refractions.net wrote:
> On Fri, Jun 24, 2005 at 08:24:26PM +0200, Michel Garand wrote:
> > Greetings!
> > 
> > I have compiled the new geos 2.1.2 and somehow when i check to see if
> > the ldconfig has done its job by doing a ldconfig -v  libgeos, libgeos.2
> > and libgeos.2.1.2 are not found it is not there. :(
> > 
> > Can anybody give me a advice?
> 
> Please try:
> libtoolize --force
> ./configure again
> make install
> 
> See also:
> http://geos.refractions.net/pipermail/geos-devel/2005-June/001459.html
> 
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From strk at refractions.net  Sat Jun 25 03:35:40 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] library link problem
In-Reply-To: <1119643065.5947.23.camel@geoport.odragis.org>
References: <1119637467.5947.17.camel@geoport.odragis.org>
	<20050624183104.GA20478@keybit.net>
	<1119643065.5947.23.camel@geoport.odragis.org>
Message-ID: <20050625073540.GA20571@keybit.net>

On Fri, Jun 24, 2005 at 09:57:45PM +0200, Michel Garand wrote:
> Greetings!
> still no luck :(
> with ldconfig -v libgeos, libgeos.2, libgeos.2.1.2 still don't appear even though there are in /usr/local/lib!

Do you have /usr/local/lib listed in /etc/ld.so.conf ?
--strk;

From garand at odragis.org  Sat Jun 25 04:25:54 2005
From: garand at odragis.org (Michel Garand)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] library link problem
In-Reply-To: <20050625073540.GA20571@keybit.net>
References: <1119637467.5947.17.camel@geoport.odragis.org>
	<20050624183104.GA20478@keybit.net>
	<1119643065.5947.23.camel@geoport.odragis.org>
	<20050625073540.GA20571@keybit.net>
Message-ID: <1119687954.7652.2.camel@geoport.odragis.org>

Greetings!
On Sat, 2005-06-25 at 09:35 +0200, strk@refractions.net wrote:
> On Fri, Jun 24, 2005 at 09:57:45PM +0200, Michel Garand wrote:
> > Greetings!
> > still no luck :(
> > with ldconfig -v libgeos, libgeos.2, libgeos.2.1.2 still don't appear even though there are in /usr/local/lib!
> 
> Do you have /usr/local/lib listed in /etc/ld.so.conf ?
> --strk;

Yes, all other libraries there are listed.

I have just upgraded my debian woody to sarge maybe some of the newer
tools will help.

If the problem continues I will be back

Michel


From strk at refractions.net  Sat Jun 25 05:41:55 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] Re: isOnLine optimizations + ABI compatibility
In-Reply-To: <5A94289A9268514C8D6C0F1FF44BA0279C3DAC@venus.VividSolutions.com>
References: <5A94289A9268514C8D6C0F1FF44BA0279C3DAC@venus.VividSolutions.com>
Message-ID: <20050625094155.GC27789@keybit.net>

On Fri, Jun 24, 2005 at 12:03:59PM -0700, Martin Davis wrote:
> > I've been profiling Union operations.
> > It seems the most time-spending function
> > is Envelope::intersects() called by 
> > LineIntersector::computeIntersection()
> > called by CGAlgorithms::isOnLine for every segment of a given 
> > CoordinateSequence.
> 
> Strk, I've come up with a fix for this problem which should avoid any
> isCovered tests at all, for cases where it's not required (e.g. for the
> union of polygons).
> 
> I've commited this to JTS.  (I assume you can determine the changes from
> via diff, right?)  Can you retry your performance tests and let me know
> if this makes a difference?

Yes, a BIG difference. New timings are comparable between buffer(0)
and incremental Union() implementations:

Envelope::intersects calls reduce from
430875985 to
 10010718

Now the problem is understand whether it is possible to use the
patch in geos-2.1 without breaking ABI. I'll research on this
and in postgis connector before going back to GEOS/JTS profiling.

Thanks! (timings follow)

Timings:
------------------------------------------------------------------------

        Classic geomunion (geos-2.1)
                real    2m25.230s
                user    2m20.337s
                sys     0m0.527s

        Classic geomunion, Martin JTS patches (geos-2.1)
                real    0m58.692s
                user    0m56.113s
                sys     0m0.392s

------------------------------------------------------------------------

        Classic geomunion (geos-head)
                real    1m40.458s
                user    1m36.724s
                sys     0m0.454s

        Classic geomunion, Martin JTS patches (geos-head)
                real    0m43.015s
                user    0m41.207s
                sys     0m0.352s

        Buffer(0) geomunion (geos-head)
                real    0m43.845s
                user    0m41.906s
                sys     0m0.358s

------------------------------------------------------------------------


From strk at refractions.net  Sat Jun 25 05:44:07 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] library link problem
In-Reply-To: <1119687954.7652.2.camel@geoport.odragis.org>
References: <1119637467.5947.17.camel@geoport.odragis.org>
	<20050624183104.GA20478@keybit.net>
	<1119643065.5947.23.camel@geoport.odragis.org>
	<20050625073540.GA20571@keybit.net>
	<1119687954.7652.2.camel@geoport.odragis.org>
Message-ID: <20050625094407.GD27789@keybit.net>

On Sat, Jun 25, 2005 at 10:25:54AM +0200, Michel Garand wrote:
> Greetings!
> On Sat, 2005-06-25 at 09:35 +0200, strk@refractions.net wrote:
> > On Fri, Jun 24, 2005 at 09:57:45PM +0200, Michel Garand wrote:
> > > Greetings!
> > > still no luck :(
> > > with ldconfig -v libgeos, libgeos.2, libgeos.2.1.2 still don't appear even though there are in /usr/local/lib!
> > 
> > Do you have /usr/local/lib listed in /etc/ld.so.conf ?
> > --strk;
> 
> Yes, all other libraries there are listed.

But, did your geos library get the .so extention now ?
If they didn't (after libtoolize...) maybe you need a make clean.

--strk;

From strk at refractions.net  Sat Jun 25 05:49:28 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] ABI protection
Message-ID: <20050625094928.GE27789@keybit.net>

Guys, I need C++ gury help here...

We have a big performance improving patch hanging.
This would require adding a new public method to
the Node class.

Now. It sounds to me that this would break ABI, am
I correct in thinking this ?

Someone suggested that adding the method as *last*
item in class definition could avoid this brekage,
setting the new method pointer as last in the vtable,
can we take this as good ?

The problem is that this is probably compiler-specific
so I dunno what to do.

PostGIS itself won't suffer from this as it never
directly uses Nodes, but I think other libs might
(ogr most likely).

If we cannot find a safe way to add a public function
I can still find a workaround using module-static 
methods for that, but I'd prefer avoiding it to
keep geos code layout similar between branches.

Comments, tips ?

--strk;

From strk at refractions.net  Sat Jun 25 11:40:53 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] ABI protection
In-Reply-To: <20050625152122.GC26409@train.civil.northwestern.edu>
References: <20050625094928.GE27789@keybit.net>
	<20050625152122.GC26409@train.civil.northwestern.edu>
Message-ID: <20050625154053.GA30256@keybit.net>

On Sat, Jun 25, 2005 at 10:21:22AM -0500, Curtis Barrett wrote:
> Adding non-virtual methods will not break compatibility. If the method is virtual, I don't think you can add it without breaking compatibility. 
> 
> One option would be to (for now) make the new method a function external to the Node class and grant it friend status with Node. This way, it can work on the interals of Node without changing Node's face to the world. Depending on what the method does, this may not be practical.

I think non-virtual option is ok for the 2.1 branch.
Other thougths ?

--strk;

From debian at adkgis.org  Sat Jun 25 15:53:43 2005
From: debian at adkgis.org (Steve Halasz)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] library link problem
In-Reply-To: <1119687954.7652.2.camel@geoport.odragis.org>
References: <1119637467.5947.17.camel@geoport.odragis.org>
	<20050624183104.GA20478@keybit.net>
	<1119643065.5947.23.camel@geoport.odragis.org>
	<20050625073540.GA20571@keybit.net>
	<1119687954.7652.2.camel@geoport.odragis.org>
Message-ID: <1119729223.4138.7.camel@marcy>

On Sat, 2005-06-25 at 10:25 +0200, Michel Garand wrote:
> Greetings!
> On Sat, 2005-06-25 at 09:35 +0200, strk@refractions.net wrote:
> > On Fri, Jun 24, 2005 at 09:57:45PM +0200, Michel Garand wrote:
> > > Greetings!
> > > still no luck :(
> > > with ldconfig -v libgeos, libgeos.2, libgeos.2.1.2 still don't appear even though there are in /usr/local/lib!
> > 
> > Do you have /usr/local/lib listed in /etc/ld.so.conf ?
> > --strk;
> 
> Yes, all other libraries there are listed.
> 
> I have just upgraded my debian woody to sarge maybe some of the newer
> tools will help.
> 

I believe I've sorted this out in the deb package, but my sponsor hasn't
uploaded it I think because of the pending c++ ABI transition. You can
get the 2.1.2 package source from

http://mentors.debian.net/debian/pool/main/g/geos/

unpack it with

dpkg-source -x geos_2.1.2-1.dsc

and build it with 

dpkg-buildpackage -rfakeroot

Steve


From fwarmerdam at gmail.com  Sat Jun 25 15:54:01 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] ABI protection
In-Reply-To: <20050625154053.GA30256@keybit.net>
References: <20050625094928.GE27789@keybit.net>
	<20050625152122.GC26409@train.civil.northwestern.edu>
	<20050625154053.GA30256@keybit.net>
Message-ID: <931f8ea90506251254626a3e1c@mail.gmail.com>

On 6/25/05, strk@refractions.net <strk@refractions.net> wrote:
> On Sat, Jun 25, 2005 at 10:21:22AM -0500, Curtis Barrett wrote:
> > Adding non-virtual methods will not break compatibility. If the method is virtual, I don't think you can add it without breaking compatibility.
> >
> > One option would be to (for now) make the new method a function external to the Node class and grant it friend status with Node. This way, it can work on the interals of Node without changing Node's face to the world. Depending on what the method does, this may not be practical.
> 
> I think non-virtual option is ok for the 2.1 branch.
> Other thougths ?

Strk,

I don't believe that OGR interacts directly with the Node class.
The OGR bindings are still quite simple - the common operates on 
geos::Geometry.  

If there are not classes derived from Node for which you need
to retain binary compatibility then adding the method at the end
of the class (and hence the end of the vtable) should avoid any
ABI effects.  Otherwise having it non-virtual will avoid ABI changes,
as suggested. 

I think making it not virtual would be preferrable as a "bridge" step 
as opposed to using a friend function. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From strk at refractions.net  Sat Jun 25 16:06:35 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:48 2007
Subject: [dale.lutz@safe.com: Re: [geos-devel] ABI protection]
Message-ID: <20050625200635.GC30256@keybit.net>

----- Forwarded message from Dale Lutz <dale.lutz@safe.com> -----

Date: Sat, 25 Jun 2005 12:05:22 -0700
From: "Dale Lutz" <dale.lutz@safe.com>
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Subject: Re: [geos-devel] ABI protection
To: <geos-devel@geos.refractions.net>

Hello strk, others,

> > Adding non-virtual methods will not break compatibility. If the method is
> virtual, I don't think you can add it without breaking compatibility.
> >
> > One option would be to (for now) make the new method a function external
> to the Node class and grant it friend status with Node. This way, it can
> work on the interals of Node without changing Node's face to the world.
> Depending on what the method does, this may not be practical.
> 
> I think non-virtual option is ok for the 2.1 branch.


I can confirm from direct experience that it is FINE to add virtual methods
without breaking compability so long as:

1) They are added at the BOTTOM of the list of methods for classes which
never have any children derived from them.  

2) They are not overloading a method that already exists, that is, they must
have a unique name



It is also absolutely no problem to add non-virtual methods any which way you
want.


We've had to deal with this with our FME plugin API as well as FME Objects,
and so long as we've followed these rules, all has been well.

Hope this helps.


Dale

----------------------------------------------------------------------
Dale Lutz              Safe Software Inc.                 dal@safe.com
VP Development         Surrey, BC, CANADA        phone: (604) 501-9985
                       http://www.safe.com         fax: (604) 501-9965
----------------------------------------------------------------------

> 


----- End forwarded message -----

From garand at odragis.org  Sun Jun 26 04:48:52 2005
From: garand at odragis.org (Michel Garand)
Date: Fri Nov  2 20:52:48 2007
Subject: [geos-devel] library link problem
In-Reply-To: <1119729223.4138.7.camel@marcy>
References: <1119637467.5947.17.camel@geoport.odragis.org>
	<20050624183104.GA20478@keybit.net>
	<1119643065.5947.23.camel@geoport.odragis.org>
	<20050625073540.GA20571@keybit.net>
	<1119687954.7652.2.camel@geoport.odragis.org>
	<1119729223.4138.7.camel@marcy>
Message-ID: <1119775733.5973.1.camel@geoport.odragis.org>

Greetings!
Thanks strk and Steve.
On Sat, 2005-06-25 at 15:53 -0400, Steve Halasz wrote:
> On Sat, 2005-06-25 at 10:25 +0200, Michel Garand wrote:
> > Greetings!
> > On Sat, 2005-06-25 at 09:35 +0200, strk@refractions.net wrote:
> > > On Fri, Jun 24, 2005 at 09:57:45PM +0200, Michel Garand wrote:
> > > > Greetings!
> > > > still no luck :(
> > > > with ldconfig -v libgeos, libgeos.2, libgeos.2.1.2 still don't appear even though there are in /usr/local/lib!
> > > 
> > > Do you have /usr/local/lib listed in /etc/ld.so.conf ?
> > > --strk;
> > 
> > Yes, all other libraries there are listed.
> > 
> > I have just upgraded my debian woody to sarge maybe some of the newer
> > tools will help.
> > 
> 
> I believe I've sorted this out in the deb package, but my sponsor hasn't
> uploaded it I think because of the pending c++ ABI transition. You can
> get the 2.1.2 package source from
> 
> http://mentors.debian.net/debian/pool/main/g/geos/
> 
> unpack it with
> 
> dpkg-source -x geos_2.1.2-1.dsc
> 
> and build it with 
> 
> dpkg-buildpackage -rfakeroot
> 
> Steve
> 

Everything seems to work OK.

Best regards 

Michel





From strk at refractions.net  Sun Jun 26 05:42:02 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] ABI protection (COMMIT)
In-Reply-To: <931f8ea90506251254626a3e1c@mail.gmail.com>
References: <20050625094928.GE27789@keybit.net>
	<20050625152122.GC26409@train.civil.northwestern.edu>
	<20050625154053.GA30256@keybit.net>
	<931f8ea90506251254626a3e1c@mail.gmail.com>
Message-ID: <20050626094202.GA36665@keybit.net>

Committed as non-virtual addition.
Thank you all for your thoughts
--strk;

On Sat, Jun 25, 2005 at 03:54:01PM -0400, Frank Warmerdam wrote:
> On 6/25/05, strk@refractions.net <strk@refractions.net> wrote:
> > On Sat, Jun 25, 2005 at 10:21:22AM -0500, Curtis Barrett wrote:
> > > Adding non-virtual methods will not break compatibility. If the method is virtual, I don't think you can add it without breaking compatibility.
> > >
> > > One option would be to (for now) make the new method a function external to the Node class and grant it friend status with Node. This way, it can work on the interals of Node without changing Node's face to the world. Depending on what the method does, this may not be practical.
> > 
> > I think non-virtual option is ok for the 2.1 branch.
> > Other thougths ?
> 
> Strk,
> 
> I don't believe that OGR interacts directly with the Node class.
> The OGR bindings are still quite simple - the common operates on 
> geos::Geometry.  
> 
> If there are not classes derived from Node for which you need
> to retain binary compatibility then adding the method at the end
> of the class (and hence the end of the vtable) should avoid any
> ABI effects.  Otherwise having it non-virtual will avoid ABI changes,
> as suggested. 
> 
> I think making it not virtual would be preferrable as a "bridge" step 
> as opposed to using a friend function. 
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From strk at refractions.net  Mon Jun 27 06:38:57 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] (no subject)
Message-ID: <20050627103857.GA45463@keybit.net>

Other analisys from the GeomUnion world.

We found that bottleneck for GeomUnion operation
is build of graph and noding of lineworks.

This means that reducing these operations will
speed up the query. Issuing a buffer(0) on the
collection of ALL input is the most performant
way to accomplish this.

This can already be done with all postgis releases
using buffer(collect(the_geom),0);

Now. This approach is memory hungry as the uniq graph
being build will contain the FULL topology set
(vertex + edges). 

Let's see how we can leverage this problem.


*GEOS improvements*

(1) When building the graph GEOS makes *copies* of elements instead
of using references to them. Improvements could be done here, using
a new Coordinates bucket to store intersections.

(2) GEOS Coordinates are 3d, even when input is 2d only. Graph
elements are composed of Coordinates, so this influences total
size of them. We could instead use 2d+arbitrary_number_of_dimensions
approach, something on which Martin is working within development
version of JTS.

(3) GEOS threats all binary operation in the same way, building
full graph, labeling it and then extracting required elements.
It could rather take into account requested operation thus
removing out-of-result elements as soon as they are detected.

*PostGIS improvements*

On the postgis side, the only thing we can do is group input geoms
in chunks and invoke graph operations for each chunk.

_IF_ the result of each graph operation will contain less points
then the sum of input points, we'd have reduced memory occupation.
The more points this operation will strip away, the less memory
next operation will require.

_ELSE_ we would only be building more graphs, spending more
CPU cycles and thrashing more.

Now, research topic is "how do we compose chunks to maximize the reduction
of points?"

A few observation:

	(1) Isolated geometries will keep all their points
	(2) Geometries fully contained in another geometry will disappear
	(3) Union of intersecting or touching sets of geometries will
	    contain less points then sum of input.

All statement actually say the same thing. Good formed chunks are
those rich of intersection!

We experimented SPATIAL ORDERING to augment probability
of intersection. Btree is simple to perform and can use
an index ( a btree index ) while GiST ordering requires clustering
of table.

About chunks size I'd add another observation:

	(4) Topologically correct geoms won't reduce in a buffer(0)
	    operation.

This is importat because we can define size of chunks by either
number of geometries (a) or number of input points (b).
I implemented and experimented both.

(a) Number of input points give us more control on the memory required to
store each chunk and graph.

(b) Number of input geometries give us more control on the number of 
geometries involved in each graph.

Since our main problem is memory occupation I think (a) is more
appropriate. Anyway we need a way to let the user set this size,
as it will greatly influence performances of the operation.

This could be a compile-time define or an information extracted
from the postgresql running system (is it possible Mark ?).
I'd like the second most.

*Conclusions*

Generally speaking I think our big problem here is GEOS.

Implementing chunked work in PostGIS is still worth it,
but I think we can get the most out of improving GEOS
performances.

I'd close the PostGIS work first so we close a step
and then would take care of GEOS.

For closing PostGIS work i see these steps:

	- Obsolete MemGeomUnion (do we still have a use for it?)

	- Modify GeomUnion definition
	  (requires dump/reload OR postgis_proc_upgrade.pl script
	   ability to replace it)

	- Add ordering tip in performance chapter of manual.

Comments welcome.

--strk;

From strk at refractions.net  Mon Jun 27 06:43:01 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] GeomUnion performance analisys and dev plan
Message-ID: <20050627104301.GB45463@keybit.net>

Previous mail didn't have a subject, sorry :(
This is a subject-only one to fix that :)

Ref:
http://postgis.refractions.net/pipermail/postgis-devel/2005-June/001486.html

--strk;

From strk at refractions.net  Mon Jun 27 14:41:23 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] LineSegment copy removal, ABI protection 2
Message-ID: <20050627184123.GB49229@keybit.net>

I've found that many of the Coordinate copies are
done within LineSegment. LineSegment contains two
points and ops on them.

Fiddling with SubgraphDepthLocater I've handled
to reduce run time of the attached test from
279.71 to 17.17 seconds !

I obtained this avoiding to construct a LineSegment
until really needed.

  %   cumulative   self              self     total                              time   seconds   seconds    calls   s/call   s/call  name                       84.82    237.26   237.26  7645820     0.00     0.00  geos::LineSegment::reverse()
 
Martin, should LineSegment store REAL coordinates or can it
safely store references to them ?

... this change would break both ABI and API, probably unused parts
but still ... maybe we should add a new class like LightLineSegment
to avoid it in this case.

--strk;

From mbdavis at VividSolutions.com  Mon Jun 27 15:58:21 2005
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] RE: LineSegment copy removal, ABI protection 2
Message-ID: <5A94289A9268514C8D6C0F1FF44BA0279C3DAE@venus.VividSolutions.com>

> Martin, should LineSegment store REAL coordinates or can it 
> safely store references to them ?

References should be safe - LineSegment never changes its coordinates.
It may reorder them, however (but this should work with references,
right)?

I didn't get the attachment - is this a fix that might be good for JTS
too?

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046


> -----Original Message-----
> From: strk@refractions.net [mailto:strk@refractions.net] 
> Sent: June 27, 2005 11:41 AM
> To: geos-devel@geos.refractions.net; Martin Davis
> Subject: LineSegment copy removal, ABI protection 2
> 
> 
> I've found that many of the Coordinate copies are
> done within LineSegment. LineSegment contains two
> points and ops on them.
> 
> Fiddling with SubgraphDepthLocater I've handled
> to reduce run time of the attached test from
> 279.71 to 17.17 seconds !
> 
> I obtained this avoiding to construct a LineSegment
> until really needed.
> 
>   %   cumulative   self              self     total           
>                    time   seconds   seconds    calls   s/call 
>   s/call  name                       84.82    237.26   237.26 
>  7645820     0.00     0.00  geos::LineSegment::reverse()
>  
> Martin, should LineSegment store REAL coordinates or can it 
> safely store references to them ?
> 
> ... this change would break both ABI and API, probably unused 
> parts but still ... maybe we should add a new class like 
> LightLineSegment to avoid it in this case.
> 
> --strk;
> 

From strk at refractions.net  Mon Jun 27 17:20:04 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] RE: LineSegment copy removal, ABI protection 2
In-Reply-To: <5A94289A9268514C8D6C0F1FF44BA0279C3DAE@venus.VividSolutions.com>
References: <5A94289A9268514C8D6C0F1FF44BA0279C3DAE@venus.VividSolutions.com>
Message-ID: <20050627212004.GA49843@keybit.net>

On Mon, Jun 27, 2005 at 12:58:21PM -0700, Martin Davis wrote:
> > Martin, should LineSegment store REAL coordinates or can it 
> > safely store references to them ?
> 
> References should be safe - LineSegment never changes its coordinates.
> It may reorder them, however (but this should work with references,
> right)?
> 
> I didn't get the attachment - is this a fix that might be good for JTS
> too?

Ok, first of all I'm fried, sorry. My timings were distorder
by the profiler. W/out specific profiling calls comparison
is:

With LineSegment::reverse calls
        real    0m35.149s
        user    0m30.244s
        sys     0m1.231s

Without LineSegment::reverse calls
        real    0m29.858s
        user    0m29.043s
        sys     0m0.121s

About porting to JTS, I'm not sure it will influence things
as JTS is probably NOT making copies of Coordinate.
Am I wrong ?

XML test is available from:
http://foo.keybit.net/~strk/tmp/test.xml.bz2

--strk;

From strk at refractions.net  Mon Jun 27 21:42:37 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] RE: LineSegment copy removal, ABI protection 2
In-Reply-To: <20050627212004.GA49843@keybit.net>
References: <5A94289A9268514C8D6C0F1FF44BA0279C3DAE@venus.VividSolutions.com>
	<20050627212004.GA49843@keybit.net>
Message-ID: <20050628014237.GM49843@keybit.net>

On Mon, Jun 27, 2005 at 11:20:04PM +0200, strk@refractions.net wrote:
...
> Ok, first of all I'm fried, sorry. My timings were distorder
> by the profiler. W/out specific profiling calls comparison
> is:
> 
> With LineSegment::reverse calls
>         real    0m35.149s
>         user    0m30.244s
>         sys     0m1.231s
> 
> Without LineSegment::reverse calls
>         real    0m29.858s
>         user    0m29.043s
>         sys     0m0.121s

I might be fried again, but after porting latest Martin's 
patches time sems to be reduced to:

	real    0m8.847s
	user    0m8.542s
	sys     0m0.093s

Martin, are you experiencing this much improvements ?

--strk;

> XML test is available from:
> http://foo.keybit.net/~strk/tmp/test.xml.bz2

From mbdavis at VividSolutions.com  Tue Jun 28 11:41:20 2005
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] RE: LineSegment copy removal, ABI protection 2
Message-ID: <5A94289A9268514C8D6C0F1FF44BA02796CEC3@venus.VividSolutions.com>

> Martin, are you experiencing this much improvements ?

No.  But I don't think my recent changes would be executed during buffer
anyway.  And I certainly wouldn't expect them to provide that much
improvement.

Let me get this straight - the changes that you made were just to change
LineSegment to use references rather than copies?  (This change is
irrelevant in the Java world, since the usual pattern is to use
copy-by-reference.  So JTS effectively already has this improvement, I
think.)

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046


> -----Original Message-----
> From: strk@refractions.net [mailto:strk@refractions.net] 
> Sent: June 27, 2005 6:43 PM
> To: GEOS Development List
> Cc: Martin Davis
> Subject: Re: [geos-devel] RE: LineSegment copy removal, ABI 
> protection 2
> 
> 
> On Mon, Jun 27, 2005 at 11:20:04PM +0200, 
> strk@refractions.net wrote: ...
> > Ok, first of all I'm fried, sorry. My timings were distorder by the 
> > profiler. W/out specific profiling calls comparison
> > is:
> > 
> > With LineSegment::reverse calls
> >         real    0m35.149s
> >         user    0m30.244s
> >         sys     0m1.231s
> > 
> > Without LineSegment::reverse calls
> >         real    0m29.858s
> >         user    0m29.043s
> >         sys     0m0.121s
> 
> I might be fried again, but after porting latest Martin's 
> patches time sems to be reduced to:
> 
> 	real    0m8.847s
> 	user    0m8.542s
> 	sys     0m0.093s
> 
> Martin, are you experiencing this much improvements ?
> 
> --strk;
> 
> > XML test is available from: 
> > http://foo.keybit.net/~strk/tmp/test.xml.bz2
> 

From strk at refractions.net  Tue Jun 28 16:49:18 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] GEOS and PostGIS release candidates
Message-ID: <20050628204918.GM59881@keybit.net>

PostGIS and GEOS repository have been tagged to act
as release candidates for 1.0.2 and 2.1.3 respectively

   GEOS: rel-2-1-3-rc1
POSTGIS: pre_1_0_2_unionTest

All tests are welcome, Changes (in order to know what to test):

Postgis:
        - Fault tolerant btree ops
        - Memory Leak fix in pg_error
        - Rtree index fix. See:
          http://archives.postgresql.org/pgsql-hackers/2005-06/msg01108.php
        - Chunked GeomUnion implementation (much faster)
        - Support for postgresql 8.1
        - Cleaner build scripts: avoided mix of CFLAGS and CXXFLAGS

GEOS:
	- win32/mingw build support
	- Segfault fix in LinearRing and LineString constructors
	- Segfault fix in Polygonizer
	- XMLTester installed by default
	- XMLTester code cleanup
	- Fixed handling of collection input in GeometryFactory::buildGeometry
	- Added shortcircuit test for Union operation
	- Reduced useless Coordinate copies in CGAlgorithms::isPointInRing()
	- Performance improvements in CGAlgorithms::isOnLine()
	- Other minor performance improvements
	- New Node::isIncidentEdgeInResult() method
	- OverlayOp's PointBuilder performance improvement by reduction
	  of LineIntersector calls.
	- Optimizations in Buffer operation
	- Sever BUGFIX in DepthSegmentLT as suggested by Graeme Hiebert

--strk;


From strk at refractions.net  Tue Jun 28 17:17:06 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] GEOS rel-2-1-3-rc2
In-Reply-To: <20050628204918.GM59881@keybit.net>
References: <20050628204918.GM59881@keybit.net>
Message-ID: <20050628211706.GP59881@keybit.net>

On Tue, Jun 28, 2005 at 10:49:18PM +0200, strk@refractions.net wrote:
> PostGIS and GEOS repository have been tagged to act
> as release candidates for 1.0.2 and 2.1.3 respectively
> 
>    GEOS: rel-2-1-3-rc1
> POSTGIS: pre_1_0_2_unionTest

BUGFIX in GEOS (thanks to Graeme Hiebert) 
new tag: rel-2-1-3-rc2

--strk;

From jpalmer at paradise.net.nz  Wed Jun 29 06:59:16 2005
From: jpalmer at paradise.net.nz (Jeremy Palmer)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] Spatial Indexes
Message-ID: <20050629105717.16ED4AE690@smtp-3.paradise.net.nz>

Hi,

 

I was wondering if at some stage updatable spatial indexes will be included
to the GEOS library. i.e. like Rtree. I also noticed that JTS has
implemented the remove method for the quad tree index. Is planned to port
this functionality into GEOS?

 

Cheers

Jeremy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20050629/b3183b2f/attachment.html
From strk at refractions.net  Wed Jun 29 14:36:19 2005
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:54 2007
Subject: [geos-devel] Re: [postgis-devel] (no subject)
In-Reply-To: <42C2CD15.7030403@logix-tt.com>
References: <20050627103857.GA45463@keybit.net> <42C2CD15.7030403@logix-tt.com>
Message-ID: <20050629183619.GC66653@keybit.net>

On Wed, Jun 29, 2005 at 06:32:21PM +0200, Markus Schaber wrote:
> Hi, Strk,
> 
> strk@refractions.net wrote:
> 
> > This can already be done with all postgis releases
> > using buffer(collect(the_geom),0);
> 
> Did you notice that this does only work for polygonal geometries, not
> for points, lines and mixed geometries?

AAARRRGGHHH!
A missing drawback, I new it was too easy !
I guess we'll have to switch this behaviour off
for 1.0.2 and take more time to fix for 1.1.0

--strk;

> 
> geonames=# select asText(buffer('POINT(0 0)',0));
>           astext
> --------------------------
>  GEOMETRYCOLLECTION EMPTY
> (1 row)
> 
> geonames=# select asText(buffer('LINESTRING(0 0,1 1)',0));
>           astext
> --------------------------
>  GEOMETRYCOLLECTION EMPTY
> (1 row)
> 
> Markus
> _______________________________________________
> postgis-devel mailing list
> postgis-devel@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-devel

