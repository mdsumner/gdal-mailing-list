From strk at refractions.net  Tue Nov  2 11:18:34 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] DoubleBits and IEEE-754
Message-ID: <20041102161834.GB52672@freek.keybit.net>

I've found and fixed a bug in DoubleBits class.

It handles operations on doubles using knowledge of their
format (ieee-754).

Since double type internal format is not guaranteed to conform
to the standard I've also provided a fall-back implementation,
but that is prone to round-off errors. Detection of the required
format is performed checking for the __STDC_IEC_559__ define, which
should be non-0 if the format is available.

There might also be ENDIANNES problems, which I did not consider
yet. Basically the DoubleBits class makes bitwise operations on
the provided double, so byte order is important, probably assumed
as LITTLE_ENDIAN (am I right Martin?).

--strk;

From strk at refractions.net  Thu Nov  4 03:37:31 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] packages -> namespace
Message-ID: <20041104083731.GB98745@freek.keybit.net>

Hello all,
I've already sent a mail about this, but since I feel 
we really need to do that, I insist.
Please let me know what you think.

GEOS is a port from JTS.
IMO the port missed the package layout.
Every package in Java represent a separate namespace.

For example JTS has two PlanarGraph classes, one
in the geomgraph and another in the planargraph package.

In GEOS this became geos::PlanarGraph and geos::planarPlanarGraph.

This has two drawbacks:

	- hard-to-understand corrispondence between GEOS and JTS
	- possible name clashes

My suggestion is to map every JTS package to a GEOS sub-namespace,
as in:

	geos::geomgraph::PlanarGraph
	geos::planargraph::PlanarGraph

Code that in JTS goes:

	import planargraph;

In GEOS would go:

	using namespace geos::planargraph;

A problem in this is that once again we'll break the API, but 
I knew we had API stability problems and hence I reduced the
documentation to the subset used by the main client: PostGIS.

If we base our versioning scheme on the documented part of
GEOS we can safely consider indexer, noder and graphs as new
interfaces, instead of a change in old interfaces.
I mean we could keep the 'geom' package in the root namespace
(geos) and just define a new namespace for every newly documented
package.

What do you think about it ?

--strk;

From shebeko at mail.ru  Thu Nov  4 11:38:50 2004
From: shebeko at mail.ru (=?Windows-1251?B?2OXh5eruIMXi4+Xt6Ok=?=)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] performance of WKTReader
Message-ID: <142786145031.20041104183850@mail.ru>

 Hi. I just compiled geos 2.1.0 using VC7 2003 compiler.

 1. Looks like that WKTReader is too slow, isn't it?

 I convert 29583 strings to multipolygons object;
 Total point count was 854744, avarage point count is 28

 Convertion time was about ~ 40 seconds.

  For comparation deep copy of all converted objects was about 1200
 milliseconds.
 This is good enough, if keep in mind complex structure of
 multipolygon.
 Deep copy of vector<string> that contain source for conversion was about 100 milliseconds

 2. Is any alternative to parse WKT?
 3. Is exist any solution to parse WKB?

 4. Just not exacly clear from documentation.
    Copy constructor and operator= make deep copy, isn't it?

Thanks for pay attantion.


From strk at refractions.net  Fri Nov  5 06:46:06 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] performance of WKTReader
In-Reply-To: <142786145031.20041104183850@mail.ru>
References: <142786145031.20041104183850@mail.ru>
Message-ID: <20041105114606.GD12126@freek.keybit.net>

On Thu, Nov 04, 2004 at 06:38:50PM +0200, ?????? ??????? wrote:
>  Hi. I just compiled geos 2.1.0 using VC7 2003 compiler.
> 
>  1. Looks like that WKTReader is too slow, isn't it?

Yes it is!

> 
>  I convert 29583 strings to multipolygons object;
>  Total point count was 854744, avarage point count is 28
> 
>  Convertion time was about ~ 40 seconds.
> 
>   For comparation deep copy of all converted objects was about 1200
>  milliseconds.
>  This is good enough, if keep in mind complex structure of
>  multipolygon.
>  Deep copy of vector<string> that contain source for conversion was about 100 milliseconds
> 
>  2. Is any alternative to parse WKT?

Use GeometryFactory to construct geoms.

>  3. Is exist any solution to parse WKB?

Nope. You can WKB-construct postgis geoms and then feed them to 
GEOS... might be faster then WKT-constructing GEOS geoms.

>  4. Just not exacly clear from documentation.
>     Copy constructor and operator= make deep copy, isn't it?

Copy constructors do, operator= doesn't (not defined).
Try sticking with documented features, as GEOS interface is
pretty unstable. From the documentation you should use
the clone() method for deep-copy.

> Thanks for pay attantion.

Thank you for sharing your experience.

--strk;

From hi_ono2001 at ybb.ne.jp  Fri Nov  5 11:50:21 2004
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] VB or VBA interface for GEOS
Message-ID: <003601c4c357$89eba770$4b8001db@webgis>

Hi.

 Does anyone try to build VB or VBA interface for GEOS(Active-X DLL etc.)?



 Regards.


From mbdavis at VividSolutions.com  Fri Nov  5 16:41:44 2004
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] Fixed: Bug in isValid for certain kinds of invalid
	polygon holes
Message-ID: <5A94289A9268514C8D6C0F1FF44BA0274F5953@venus.VividSolutions.com>

A bug was recently reported involving isValid throwing an exception for
polygons with certain kinds of invalid hole rings.  This has now been
fixed and will appear in the next release of JTS  (and probably GEOS
too).
 
(The problem test case is:
 
POLYGON ((
        37.654639 55.726496, 
        37.654056 55.726947, 
        37.653801 55.727333, 
        37.653801 55.727435, 
        37.654468 55.727483, 
        37.656654 55.727466, 
        37.656572 55.727063, 
        37.656654 55.726713, 
        37.657052 55.726531, 
        37.657571 55.726365, 
        37.658071 55.725961, 
        37.658321 55.725609, 
        37.658303 55.725374, 
        37.658321 55.725609, 
        37.658906 55.725309, 
        37.659488 55.72511, 
        37.658135 55.724571, 
        37.657386 55.724922, 
        37.657135 55.724873, 
        37.65647 55.725274, 
        37.655635 55.725828, 
        37.655195 55.7265, 
        37.655635 55.725927, 
        37.654639 55.726496
    ), (
        37.658321 55.725609, 
        37.658906 55.725309, 
        37.659488 55.72511, 
        37.658906 55.725309, 
        37.658321 55.725609
    ))
 
Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20041105/c0274fac/attachment.html
From mcoletti at gmail.com  Tue Nov  9 14:01:47 2004
From: mcoletti at gmail.com (Mark Coletti)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] config script adds too many compiler options
Message-ID: <12009508041109110120982cac@mail.gmail.com>

geos-config --cflags emits "-g -O2" in addition to providing the
include directory path.  config scripts should never set these
options.  For example, setting "-O2" can make debugging difficult as
the optimizer may relocate or outright eliminate source code.

Cheers,

Mark
-- 
I'm taking reality in small doses to build immunity.

From strk at refractions.net  Tue Nov  9 14:06:47 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] config script adds too many compiler options
In-Reply-To: <12009508041109110120982cac@mail.gmail.com>
References: <12009508041109110120982cac@mail.gmail.com>
Message-ID: <20041109190647.GB71136@freek.keybit.net>

On Tue, Nov 09, 2004 at 02:01:47PM -0500, Mark Coletti wrote:
> geos-config --cflags emits "-g -O2" in addition to providing the
> include directory path.  config scripts should never set these
> options.  For example, setting "-O2" can make debugging difficult as
> the optimizer may relocate or outright eliminate source code.
> 
> Cheers,
> 
> Mark

You can use geos-config --includes to get includes only (w/out the -I).
If no one has arguments in favor of current --cflags I'd remove
-g -O2 from it.

--strk;

> -- 
> I'm taking reality in small doses to build immunity.
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From ferdinando.villa at uvm.edu  Tue Nov  9 14:11:34 2004
From: ferdinando.villa at uvm.edu (Ferdinando Villa)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] config script adds too many compiler options
In-Reply-To: <12009508041109110120982cac@mail.gmail.com>
References: <12009508041109110120982cac@mail.gmail.com>
Message-ID: <1100027494.4475.26.camel@basil.snr.uvm.edu>

Good point. Strk - could you please remove the @CFLAGS@ from the
--cflags line in tools/geos-config.in and commit? I'm having trouble
findin my cvs password again...

thanks,
ferdinando

On Tue, 2004-11-09 at 14:01, Mark Coletti wrote:
> geos-config --cflags emits "-g -O2" in addition to providing the
> include directory path.  config scripts should never set these
> options.  For example, setting "-O2" can make debugging difficult as
> the optimizer may relocate or outright eliminate source code.
> 
> Cheers,
> 
> Mark
-- 
Ferdinando Villa, Ph.D., Associate Research Professor, Ecoinformatics
Gund Institute for Ecological Economics and Dept of Botany, Univ. of Vermont
http://ecoinformatics.uvm.edu


From mcoletti at gmail.com  Tue Nov  9 14:42:49 2004
From: mcoletti at gmail.com (Mark Coletti)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] config script adds too many compiler options
In-Reply-To: <20041109190647.GB71136@freek.keybit.net>
References: <12009508041109110120982cac@mail.gmail.com>
	<20041109190647.GB71136@freek.keybit.net>
Message-ID: <120095080411091142273f73b7@mail.gmail.com>

On Tue, 9 Nov 2004 20:06:47 +0100, strk@refractions.net
<strk@refractions.net> wrote:
> You can use geos-config --includes to get includes only (w/out the -I).
> If no one has arguments in favor of current --cflags I'd remove
> -g -O2 from it.

I just hacked the config shell script to not emit those.  :) 

In any case, I was wondering why re-compilation times had jumped and
gdb was occasionally acting schizophrenic.  How often do people pay
attention to compiler command lines, anyway?  I was lucky I noticed
the "-g -O2" float by.  8-)

Cheers,

Mark
-- 
I'm taking reality in small doses to build immunity.

From strk at refractions.net  Tue Nov  9 15:14:19 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] config script adds too many compiler options
In-Reply-To: <1100027494.4475.26.camel@basil.snr.uvm.edu>
References: <12009508041109110120982cac@mail.gmail.com>
	<1100027494.4475.26.camel@basil.snr.uvm.edu>
Message-ID: <20041109201419.GC71136@freek.keybit.net>

Committed.
--strk;

On Tue, Nov 09, 2004 at 02:11:34PM -0500, Ferdinando Villa wrote:
> Good point. Strk - could you please remove the @CFLAGS@ from the
> --cflags line in tools/geos-config.in and commit? I'm having trouble
> findin my cvs password again...
> 
> thanks,
> ferdinando
> 
> On Tue, 2004-11-09 at 14:01, Mark Coletti wrote:
> > geos-config --cflags emits "-g -O2" in addition to providing the
> > include directory path.  config scripts should never set these
> > options.  For example, setting "-O2" can make debugging difficult as
> > the optimizer may relocate or outright eliminate source code.
> > 
> > Cheers,
> > 
> > Mark
> -- 
> Ferdinando Villa, Ph.D., Associate Research Professor, Ecoinformatics
> Gund Institute for Ecological Economics and Dept of Botany, Univ. of Vermont
> http://ecoinformatics.uvm.edu
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From alexbodn at 012.net.il  Fri Nov 12 20:36:29 2004
From: alexbodn at 012.net.il (alex bodnaru)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] proposing debian support diff
Message-ID: <1100309788.19587.17.camel@localhost.localdomain>

hello friends,

i am using debian linux, and i've made the files additions needed to
make GEOS compile and install on a debian system.
the attached diff contains one directory, debian/ which should be in the
geos distribution root directory: e.g /usr/src/geos/geos-2.0.1.

making the debian packages uses standard geos making procedures.
no changes have been made to any file originally found in geos.

geos version and dependencies are being automatically deduced, so no
change should be needed to the debian files upon geos upgrading.

please include debian files in the geos distribution, for all debian
geos users to benefit.

best regards,

alex
-------------- next part --------------
A non-text attachment was scrubbed...
Name: geos-2.0.1.diff
Type: text/x-patch
Size: 13860 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20041113/b72af6fe/geos-2.0.1.bin
From Owen.Gibbins at safe.com  Wed Nov 17 18:46:18 2004
From: Owen.Gibbins at safe.com (Owen Gibbins)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] Geometry::relate checkNotGeometryCollection -
	unnecessary?
Message-ID: <CB8D74468A40754791B9F85EAE581CE50309B570@van-e2k1.safe.internal>

Hi all,

I am working with making spatial comparisons between geometries using GEOS, and ran into trouble when either or both of the geometries were GeometryCollections.  I tracked this down to the first two lines in Geometry::relate(const Geometry*):

 checkNotGeometryCollection(this);
 checkNotGeometryCollection(other);

Can anyone tell me if this check is really necessary? I commented out the two lines, and voil?! All my issues were resolved.  The intersection matrix resulting from a comparison between a GeometryCollection with another GeometryCollection, or between a GeometryCollection and a non-collection Geometry, makes sense in every test case I have run so far.

If there is no good reason not to get rid of this check, maybe someone would be so kind as to make this change.  I'm having trouble getting CVS set up for the GEOS repository, and I don't anticipate tinkering around much more with the code anyway.

Thank you!

Owen Gibbins

--------------------------------------------------------------
Owen Gibbins                             owen.gibbins@safe.com
Developer, Safe Software Inc.            (604)501-9985 ext.210
--------------------------------------------------------------

From mbdavis at VividSolutions.com  Wed Nov 17 19:52:02 2004
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:52:30 2007
Subject: [geos-devel] Geometry::relate checkNotGeometryCollection
	-unnecessary?
Message-ID: <5A94289A9268514C8D6C0F1FF44BA02722581E@venus.VividSolutions.com>

There is a reason that check is in the code - it wasn't just added in frivously.  But it's a subtle issue. 

The short answer is that there are GC examples which cause the current JTS/GEOS code to break.  For instannce, try relating:

GEOMETRYCOLLECTION (POLYGON ((0 0, 120 0, 120 100, 0 100, 0 0)), 
  POLYGON ((0 180, 120 180, 60 99, 0 180)))

LINESTRING (60 140, 60 60) 

The problem is that there's some assumptions fairly deep in the code that polygons do not overlap.  The simply way around this is to union all the objects in the collection and then compute the relationship.  This is potentially a lot more expensive, but at least will work.  But there are further more subtle issues.

The first is that the OGC SFS does not define the semantics of relationships with GeometryCollection.  In particular, it doesn't say how to handle the case where the GC contains two polygons that overlap.  Is the portion of the polygon boundary that is inside the other polygon on the boundary of the GC or not?   According to the obvious interpretation (and currently implemented) of getBoundary(), it is.  But the "union" semantics for relate would say a point intersecting the "contained" boundary is in the interior of the GC.  

A knarlier problem is that using the algorithms currently in JTS/GEOS, it isn't possible to make the relate algorithm fully robust if GCs are allowed.  The problem is where a polygon vertex lies very close to an edge of another polygon.  JTS can robustly determine if the vertex is inside or outside or on the other polygon.  But it can't tell if a line which passes through the interior of both polygons and the vertex is wholely contained in the polygons (if they do touch) or is partially in the exterior of the polygons (if they don't touch).

One approach would be just to ignore these issues, and compute *some* answer even if it's technically wrong.  I didn't really like this approach, since it could conceivably cause unexpected inconsistencies to surface in some uses of the library.  So I've been procrastinating on addressing this issue, waiting until perhaps a better approach became apparent.  But I'm open to being convinced - or even bribed  8^)

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046


> -----Original Message-----
> From: Owen Gibbins [mailto:Owen.Gibbins@safe.com] 
> Sent: November 17, 2004 3:46 PM
> To: geos-devel@geos.refractions.net
> Subject: [geos-devel] Geometry::relate 
> checkNotGeometryCollection -unnecessary?
> 
> 
> Hi all,
> 
> I am working with making spatial comparisons between 
> geometries using GEOS, and ran into trouble when either or 
> both of the geometries were GeometryCollections.  I tracked 
> this down to the first two lines in Geometry::relate(const Geometry*):
> 
>  checkNotGeometryCollection(this);  checkNotGeometryCollection(other);
> 
> Can anyone tell me if this check is really necessary? I 
> commented out the two lines, and voil?! All my issues were 
> resolved.  The intersection matrix resulting from a 
> comparison between a GeometryCollection with another 
> GeometryCollection, or between a GeometryCollection and a 
> non-collection Geometry, makes sense in every test case I 
> have run so far.
> 
> If there is no good reason not to get rid of this check, 
> maybe someone would be so kind as to make this change.  I'm 
> having trouble getting CVS set up for the GEOS repository, 
> and I don't anticipate tinkering around much more with the 
> code anyway.
> 
> Thank you!
> 
> Owen Gibbins
> 
> --------------------------------------------------------------
> Owen Gibbins                             owen.gibbins@safe.com
> Developer, Safe Software Inc.            (604)501-9985 ext.210
> --------------------------------------------------------------
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net 
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 

From kolda at 3dgi.dk  Thu Nov 18 14:53:25 2004
From: kolda at 3dgi.dk (Jan Kolar)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
Message-ID: <Pine.GSO.4.21.0411182047260.23546-100000@jumbo.servers.vrml.auc.dk>

i am using following SPARC machine:
Sun Microsystems Inc.   SunOS 5.9
GNU Make 3.80
gcc (GCC) 3.3.2
when attempt to compile geos-2.0.1 make exits with following:
 g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
-I../../source/headers/geos -I../../source/headers -DGEOS
_VERSION=2.0.1 -g -O2 -MT IsValidOp.lo -MD -MP -MF .deps/IsValidOp.Tpo -c
../operation/valid/IsValidOp.cpp  -
fPIC -DPIC -o .libs/IsValidOp.o
../operation/valid/IsValidOp.cpp: In static member function `static bool 
   geos::IsValidOp::isValid(const geos::Coordinate&)':
../operation/valid/IsValidOp.cpp:107: error: `finite' undeclared (first
use 
   this function)
../operation/valid/IsValidOp.cpp:107: error: (Each undeclared identifier
is 
   reported only once for each function it appears in.)
make[2]: *** [IsValidOp.lo] Error 1
make[2]: Leaving directory
`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/source/geom
'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory
`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/source'
make: *** [all-recursive] Error 1

any suggestions? (i can build geos1.0 on the same machine)

thank you --kolda


From victor at dpec.com.ar  Thu Nov 18 15:01:55 2004
From: victor at dpec.com.ar (=?ISO-8859-1?Q?Qui=F1ones?= Victor)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <Pine.GSO.4.21.0411182047260.23546-100000@jumbo.servers.vrml.auc.dk>
References: <Pine.GSO.4.21.0411182047260.23546-100000@jumbo.servers.vrml.auc.dk>
Message-ID: <20041118170155.222b1ea7.victor@dpec.com.ar>

On Thu, 18 Nov 2004 20:53:25 +0100 (CET)
Jan Kolar <kolda@3dgi.dk> wrote:

#i am using following SPARC machine:
#Sun Microsystems Inc.   SunOS 5.9
#GNU Make 3.80
#gcc (GCC) 3.3.2
#when attempt to compile geos-2.0.1 make exits with following:
# g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
#-I../../source/headers/geos -I../../source/headers -DGEOS
#_VERSION=2.0.1 -g -O2 -MT IsValidOp.lo -MD -MP -MF .deps/IsValidOp.Tpo -c
#../operation/valid/IsValidOp.cpp  -
#fPIC -DPIC -o .libs/IsValidOp.o
#../operation/valid/IsValidOp.cpp: In static member function `static bool 
#   geos::IsValidOp::isValid(const geos::Coordinate&)':
#../operation/valid/IsValidOp.cpp:107: error: `finite' undeclared (first
#use 
#   this function)
#../operation/valid/IsValidOp.cpp:107: error: (Each undeclared identifier
#is 
#   reported only once for each function it appears in.)
#make[2]: *** [IsValidOp.lo] Error 1
#make[2]: Leaving directory
#`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/source/geom
#'
#make[1]: *** [all-recursive] Error 1
#make[1]: Leaving directory
#`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/source'
#make: *** [all-recursive] Error 1
#
#any suggestions? (i can build geos1.0 on the same machine)

LDFLAGS=-lstdc++

i did and works!
#
#thank you --kolda
#
#_______________________________________________
#geos-devel mailing list
#geos-devel@geos.refractions.net
#http://geos.refractions.net/mailman/listinfo/geos-devel


From kolda at 3dgi.dk  Fri Nov 19 06:05:11 2004
From: kolda at 3dgi.dk (Jan Kolar)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <20041118170155.222b1ea7.victor@dpec.com.ar>
Message-ID: <Pine.GSO.4.21.0411191202380.10961-100000@jumbo.servers.vrml.auc.dk>

using LDFLAGS=3D-lstdc++ does not help to me. compilation exits at the same
point with the same error. any other suggestions? --kolda

On Thu, 18 Nov 2004, [ISO-8859-1] Qui=F1ones Victor wrote:

> On Thu, 18 Nov 2004 20:53:25 +0100 (CET)
> Jan Kolar <kolda@3dgi.dk> wrote:
>=20
> #i am using following SPARC machine:
> #Sun Microsystems Inc.   SunOS 5.9
> #GNU Make 3.80
> #gcc (GCC) 3.3.2
> #when attempt to compile geos-2.0.1 make exits with following:
> # g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
> #-I../../source/headers/geos -I../../source/headers -DGEOS
> #_VERSION=3D2.0.1 -g -O2 -MT IsValidOp.lo -MD -MP -MF .deps/IsValidOp.Tpo=
 -c
> #../operation/valid/IsValidOp.cpp  -
> #fPIC -DPIC -o .libs/IsValidOp.o
> #../operation/valid/IsValidOp.cpp: In static member function `static bool=
=20
> #   geos::IsValidOp::isValid(const geos::Coordinate&)':
> #../operation/valid/IsValidOp.cpp:107: error: `finite' undeclared (first
> #use=20
> #   this function)
> #../operation/valid/IsValidOp.cpp:107: error: (Each undeclared identifier
> #is=20
> #   reported only once for each function it appears in.)
> #make[2]: *** [IsValidOp.lo] Error 1
> #make[2]: Leaving directory
> #`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/s=
ource/geom
> #'
> #make[1]: *** [all-recursive] Error 1
> #make[1]: Leaving directory
> #`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/s=
ource'
> #make: *** [all-recursive] Error 1
> #
> #any suggestions? (i can build geos1.0 on the same machine)
>=20
> LDFLAGS=3D-lstdc++
>=20
> i did and works!
> #
> #thank you --kolda
> #
> #_______________________________________________
> #geos-devel mailing list
> #geos-devel@geos.refractions.net
> #http://geos.refractions.net/mailman/listinfo/geos-devel
>=20
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>=20


From strk at refractions.net  Fri Nov 19 06:49:34 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <Pine.GSO.4.21.0411191202380.10961-100000@jumbo.servers.vrml.auc.dk>
References: <20041118170155.222b1ea7.victor@dpec.com.ar>
	<Pine.GSO.4.21.0411191202380.10961-100000@jumbo.servers.vrml.auc.dk>
Message-ID: <20041119114934.GD33726@freek.keybit.net>

On Fri, Nov 19, 2004 at 12:05:11PM +0100, Jan Kolar wrote:
> using LDFLAGS=-lstdc++ does not help to me. compilation exits at the same
> point with the same error. any other suggestions? --kolda

Try adding this macro in geos/platform.h:

#define finite(x) (!isinf((x)) && !isnan((x))

--strk;


> 
> On Thu, 18 Nov 2004, [ISO-8859-1] Qui?ones Victor wrote:
> 
> > On Thu, 18 Nov 2004 20:53:25 +0100 (CET)
> > Jan Kolar <kolda@3dgi.dk> wrote:
> > 
> > #i am using following SPARC machine:
> > #Sun Microsystems Inc.   SunOS 5.9
> > #GNU Make 3.80
> > #gcc (GCC) 3.3.2
> > #when attempt to compile geos-2.0.1 make exits with following:
> > # g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
> > #-I../../source/headers/geos -I../../source/headers -DGEOS
> > #_VERSION=2.0.1 -g -O2 -MT IsValidOp.lo -MD -MP -MF .deps/IsValidOp.Tpo -c
> > #../operation/valid/IsValidOp.cpp  -
> > #fPIC -DPIC -o .libs/IsValidOp.o
> > #../operation/valid/IsValidOp.cpp: In static member function `static bool 
> > #   geos::IsValidOp::isValid(const geos::Coordinate&)':
> > #../operation/valid/IsValidOp.cpp:107: error: `finite' undeclared (first
> > #use 
> > #   this function)
> > #../operation/valid/IsValidOp.cpp:107: error: (Each undeclared identifier
> > #is 
> > #   reported only once for each function it appears in.)
> > #make[2]: *** [IsValidOp.lo] Error 1
> > #make[2]: Leaving directory
> > #`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/source/geom
> > #'
> > #make[1]: *** [all-recursive] Error 1
> > #make[1]: Leaving directory
> > #`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/source'
> > #make: *** [all-recursive] Error 1
> > #
> > #any suggestions? (i can build geos1.0 on the same machine)
> > 
> > LDFLAGS=-lstdc++
> > 
> > i did and works!
> > #
> > #thank you --kolda
> > #
> > #_______________________________________________
> > #geos-devel mailing list
> > #geos-devel@geos.refractions.net
> > #http://geos.refractions.net/mailman/listinfo/geos-devel
> > 
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@geos.refractions.net
> > http://geos.refractions.net/mailman/listinfo/geos-devel
> > 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From kolda at 3dgi.dk  Fri Nov 19 08:55:02 2004
From: kolda at 3dgi.dk (Jan Kolar)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <20041119114934.GD33726@freek.keybit.net>
Message-ID: <Pine.GSO.4.21.0411191450150.10961-100000@jumbo.servers.vrml.auc.dk>

after adding the macro to 'platform.h' the exit point has changed, however=
=20
compilation still unsuccessful.

 g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
-I../../source/headers/geos -I../../source/headers -DGEOS_VERSION=3D2.1.0 -=
g
-O2 -MT IsValidOp.lo -MD -MP -MF .deps/IsValidOp.Tpo -c
=2E./operation/valid/IsValidOp.cpp  -fPIC -DPIC -o .libs/IsValidOp.o
=2E./operation/valid/IsValidOp.cpp: In static member function `static bool=
=20
   geos::IsValidOp::isValid(const geos::Coordinate&)':
=2E./operation/valid/IsValidOp.cpp:63: error: `isinf' undeclared (first use
this=20
   function)
=2E./operation/valid/IsValidOp.cpp:63: error: (Each undeclared identifier i=
s=20
   reported only once for each function it appears in.)
=2E./operation/valid/IsValidOp.cpp:63: error: parse error before `return'
=2E./operation/valid/IsValidOp.cpp:64: error: parse error before `return'
make[2]: *** [IsValidOp.lo] Error 1
make[2]: Leaving directory
`/group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source=
/geom'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory
`/group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source=
'
make: *** [all-recursive] Error 1

P.S. i am attempting to build version geos-2.1.0 now.

On Fri, 19 Nov 2004 strk@refractions.net wrote:

> On Fri, Nov 19, 2004 at 12:05:11PM +0100, Jan Kolar wrote:
> > using LDFLAGS=3D-lstdc++ does not help to me. compilation exits at the =
same
> > point with the same error. any other suggestions? --kolda
>=20
> Try adding this macro in geos/platform.h:
>=20
> #define finite(x) (!isinf((x)) && !isnan((x))
>=20
> --strk;
>=20
>=20
> >=20
> > On Thu, 18 Nov 2004, [ISO-8859-1] Qui=F1ones Victor wrote:
> >=20
> > > On Thu, 18 Nov 2004 20:53:25 +0100 (CET)
> > > Jan Kolar <kolda@3dgi.dk> wrote:
> > >=20
> > > #i am using following SPARC machine:
> > > #Sun Microsystems Inc.   SunOS 5.9
> > > #GNU Make 3.80
> > > #gcc (GCC) 3.3.2
> > > #when attempt to compile geos-2.0.1 make exits with following:
> > > # g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
> > > #-I../../source/headers/geos -I../../source/headers -DGEOS
> > > #_VERSION=3D2.0.1 -g -O2 -MT IsValidOp.lo -MD -MP -MF .deps/IsValidOp=
=2ETpo -c
> > > #../operation/valid/IsValidOp.cpp  -
> > > #fPIC -DPIC -o .libs/IsValidOp.o
> > > #../operation/valid/IsValidOp.cpp: In static member function `static =
bool=20
> > > #   geos::IsValidOp::isValid(const geos::Coordinate&)':
> > > #../operation/valid/IsValidOp.cpp:107: error: `finite' undeclared (fi=
rst
> > > #use=20
> > > #   this function)
> > > #../operation/valid/IsValidOp.cpp:107: error: (Each undeclared identi=
fier
> > > #is=20
> > > #   reported only once for each function it appears in.)
> > > #make[2]: *** [IsValidOp.lo] Error 1
> > > #make[2]: Leaving directory
> > > #`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0=
=2E1/source/geom
> > > #'
> > > #make[1]: *** [all-recursive] Error 1
> > > #make[1]: Leaving directory
> > > #`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0=
=2E1/source'
> > > #make: *** [all-recursive] Error 1
> > > #
> > > #any suggestions? (i can build geos1.0 on the same machine)
> > >=20
> > > LDFLAGS=3D-lstdc++
> > >=20
> > > i did and works!
> > > #
> > > #thank you --kolda
> > > #
> > > #_______________________________________________
> > > #geos-devel mailing list
> > > #geos-devel@geos.refractions.net
> > > #http://geos.refractions.net/mailman/listinfo/geos-devel
> > >=20
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel@geos.refractions.net
> > > http://geos.refractions.net/mailman/listinfo/geos-devel
> > >=20
> >=20
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@geos.refractions.net
> > http://geos.refractions.net/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>=20


From strk at refractions.net  Fri Nov 19 08:57:56 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <Pine.GSO.4.21.0411191450150.10961-100000@jumbo.servers.vrml.auc.dk>
References: <20041119114934.GD33726@freek.keybit.net>
	<Pine.GSO.4.21.0411191450150.10961-100000@jumbo.servers.vrml.auc.dk>
Message-ID: <20041119135756.GB35760@freek.keybit.net>

On Fri, Nov 19, 2004 at 02:55:02PM +0100, Jan Kolar wrote:
> after adding the macro to 'platform.h' the exit point has changed, however 
> compilation still unsuccessful.
> 
>  g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
> -I../../source/headers/geos -I../../source/headers -DGEOS_VERSION=2.1.0 -g
> -O2 -MT IsValidOp.lo -MD -MP -MF .deps/IsValidOp.Tpo -c
> ../operation/valid/IsValidOp.cpp  -fPIC -DPIC -o .libs/IsValidOp.o
> ../operation/valid/IsValidOp.cpp: In static member function `static bool 
>    geos::IsValidOp::isValid(const geos::Coordinate&)':
> ../operation/valid/IsValidOp.cpp:63: error: `isinf' undeclared (first use
> this 
>    function)

... you dont' have isinf() either ...
check your system manuals for a finite value check.
(-lc maybe?)
--strk;

> ../operation/valid/IsValidOp.cpp:63: error: (Each undeclared identifier is 
>    reported only once for each function it appears in.)
> ../operation/valid/IsValidOp.cpp:63: error: parse error before `return'
> ../operation/valid/IsValidOp.cpp:64: error: parse error before `return'
> make[2]: *** [IsValidOp.lo] Error 1
> make[2]: Leaving directory
> `/group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source/geom'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory
> `/group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source'
> make: *** [all-recursive] Error 1
> 
> P.S. i am attempting to build version geos-2.1.0 now.
> 
> On Fri, 19 Nov 2004 strk@refractions.net wrote:
> 
> > On Fri, Nov 19, 2004 at 12:05:11PM +0100, Jan Kolar wrote:
> > > using LDFLAGS=-lstdc++ does not help to me. compilation exits at the same
> > > point with the same error. any other suggestions? --kolda
> > 
> > Try adding this macro in geos/platform.h:
> > 
> > #define finite(x) (!isinf((x)) && !isnan((x))
> > 
> > --strk;
> > 
> > 
> > > 
> > > On Thu, 18 Nov 2004, [ISO-8859-1] Qui?ones Victor wrote:
> > > 
> > > > On Thu, 18 Nov 2004 20:53:25 +0100 (CET)
> > > > Jan Kolar <kolda@3dgi.dk> wrote:
> > > > 
> > > > #i am using following SPARC machine:
> > > > #Sun Microsystems Inc.   SunOS 5.9
> > > > #GNU Make 3.80
> > > > #gcc (GCC) 3.3.2
> > > > #when attempt to compile geos-2.0.1 make exits with following:
> > > > # g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
> > > > #-I../../source/headers/geos -I../../source/headers -DGEOS
> > > > #_VERSION=2.0.1 -g -O2 -MT IsValidOp.lo -MD -MP -MF .deps/IsValidOp.Tpo -c
> > > > #../operation/valid/IsValidOp.cpp  -
> > > > #fPIC -DPIC -o .libs/IsValidOp.o
> > > > #../operation/valid/IsValidOp.cpp: In static member function `static bool 
> > > > #   geos::IsValidOp::isValid(const geos::Coordinate&)':
> > > > #../operation/valid/IsValidOp.cpp:107: error: `finite' undeclared (first
> > > > #use 
> > > > #   this function)
> > > > #../operation/valid/IsValidOp.cpp:107: error: (Each undeclared identifier
> > > > #is 
> > > > #   reported only once for each function it appears in.)
> > > > #make[2]: *** [IsValidOp.lo] Error 1
> > > > #make[2]: Leaving directory
> > > > #`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/source/geom
> > > > #'
> > > > #make[1]: *** [all-recursive] Error 1
> > > > #make[1]: Leaving directory
> > > > #`/group/3dgidata/PostgreSQLDB/test/postgresql-7.4.1/contrib/geos-2.0.1/source'
> > > > #make: *** [all-recursive] Error 1
> > > > #
> > > > #any suggestions? (i can build geos1.0 on the same machine)
> > > > 
> > > > LDFLAGS=-lstdc++
> > > > 
> > > > i did and works!
> > > > #
> > > > #thank you --kolda
> > > > #
> > > > #_______________________________________________
> > > > #geos-devel mailing list
> > > > #geos-devel@geos.refractions.net
> > > > #http://geos.refractions.net/mailman/listinfo/geos-devel
> > > > 
> > > > _______________________________________________
> > > > geos-devel mailing list
> > > > geos-devel@geos.refractions.net
> > > > http://geos.refractions.net/mailman/listinfo/geos-devel
> > > > 
> > > 
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel@geos.refractions.net
> > > http://geos.refractions.net/mailman/listinfo/geos-devel
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@geos.refractions.net
> > http://geos.refractions.net/mailman/listinfo/geos-devel
> > 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From nhv at cape.com  Fri Nov 19 09:28:21 2004
From: nhv at cape.com (Norman Vine)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <Pine.GSO.4.21.0411191450150.10961-100000@jumbo.servers.vrml.auc.dk>
Message-ID: <EKEJIKAILPONGGENMBGACEPMJHAA.nhv@cape.com>

Jan Kolar writes: 
> 
> after adding the macro to 'platform.h' the exit point has changed, however 
> compilation still unsuccessful.
> 
> ../operation/valid/IsValidOp.cpp:63: error: `isinf' undeclared 

maybe this will help
http://www.unixguide.net/sun/faq/5.06.shtml

note: google is your friend  :-)

hint: google("solaris isinf")
 

From strk at refractions.net  Fri Nov 19 09:28:29 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <EKEJIKAILPONGGENMBGACEPMJHAA.nhv@cape.com>
References: <Pine.GSO.4.21.0411191450150.10961-100000@jumbo.servers.vrml.auc.dk>
	<EKEJIKAILPONGGENMBGACEPMJHAA.nhv@cape.com>
Message-ID: <20041119142829.GC35760@freek.keybit.net>

On Fri, Nov 19, 2004 at 09:28:21AM -0500, Norman Vine wrote:
> Jan Kolar writes: 
> > 
> > after adding the macro to 'platform.h' the exit point has changed, however 
> > compilation still unsuccessful.
> > 
> > ../operation/valid/IsValidOp.cpp:63: error: `isinf' undeclared 
> 
> maybe this will help
> http://www.unixguide.net/sun/faq/5.06.shtml
> 
> note: google is your friend  :-)
> 
> hint: google("solaris isinf")

Good stuff. This means you can also remove that macro...
--strk;

>  
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From kolda at 3dgi.dk  Fri Nov 19 10:33:43 2004
From: kolda at 3dgi.dk (Jan Kolar)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <20041119142829.GC35760@freek.keybit.net>
Message-ID: <Pine.GSO.4.21.0411191627110.10961-100000@jumbo.servers.vrml.auc.dk>

ok, including 
#include <ieeefp.h>
in platforms.h solves the problem with finite()/isinf() functions. to what
has been posted i can add that i have found that isinf() was in earlier
versions of Solaris, however since Solaris 8/9 isinf() doesn't exist at
all. so no i get further and have a new error :(

 g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
-I../../source/headers/geos -I../../source/headers -DGEOS_VERSION=2.1.0 -g
-O2 -c ../index/quadtree/QuadTreeNode.cpp -Wp,-MD,.deps/QuadTreeNode.TPlo
-fPIC -DPIC -o .libs/QuadTreeNode.o
../index/quadtree/QuadTreeNode.cpp: In method `class string
geos::QuadTreeNode::toString() const':
../index/quadtree/QuadTreeNode.cpp:175: implicit declaration of function
`int geos::sprintf(...)'
*** Error code 1
make: Fatal error: Command failed for target `QuadTreeNode.lo'
Current working directory
/group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source/geom
*** Error code 1
make: Fatal error: Command failed for target `all-recursive'
Current working directory
/group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source
*** Error code 1
make: Fatal error: Command failed for target `all-recursive'


From nhv at cape.com  Fri Nov 19 10:51:17 2004
From: nhv at cape.com (Norman Vine)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <Pine.GSO.4.21.0411191627110.10961-100000@jumbo.servers.vrml.auc.dk>
Message-ID: <EKEJIKAILPONGGENMBGAAEADJIAA.nhv@cape.com>

Jan Kolar writes:
> 
> ok, including 
> #include <ieeefp.h>
> in platforms.h solves the problem with finite()/isinf() functions. to what
> has been posted i can add that i have found that isinf() was in earlier
> versions of Solaris, however since Solaris 8/9 isinf() doesn't exist at
> all. so no i get further and have a new error :(

> ../index/quadtree/QuadTreeNode.cpp:175: implicit declaration of function
> `int geos::sprintf(...)'

This wants to call the global sprintf as below

    ::sprintf(buf, "%d", level); 

HTH

Norman

From nhv at cape.com  Fri Nov 19 10:56:31 2004
From: nhv at cape.com (Norman Vine)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <EKEJIKAILPONGGENMBGAAEADJIAA.nhv@cape.com>
Message-ID: <EKEJIKAILPONGGENMBGAIEADJIAA.nhv@cape.com>

Norman Vine writes:
> 
> Jan Kolar writes:
> > 
> 
> > ../index/quadtree/QuadTreeNode.cpp:175: implicit declaration of function
> > `int geos::sprintf(...)'
> 
> This wants to call the global sprintf as below
> 
>     ::sprintf(buf, "%d", level); 

That's true but the problem is that stdio.h isn't being included

so to the top of the file add

#include <stdio.h> 

From strk at refractions.net  Fri Nov 19 10:59:50 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <EKEJIKAILPONGGENMBGAIEADJIAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAAEADJIAA.nhv@cape.com>
	<EKEJIKAILPONGGENMBGAIEADJIAA.nhv@cape.com>
Message-ID: <20041119155950.GA38710@freek.keybit.net>

On Fri, Nov 19, 2004 at 10:56:31AM -0500, Norman Vine wrote:
> Norman Vine writes:
> > 
> > Jan Kolar writes:
> > > 
> > 
> > > ../index/quadtree/QuadTreeNode.cpp:175: implicit declaration of function
> > > `int geos::sprintf(...)'
> > 
> > This wants to call the global sprintf as below
> > 
> >     ::sprintf(buf, "%d", level); 
> 
> That's true but the problem is that stdio.h isn't being included
> 
> so to the top of the file add
> 
> #include <stdio.h> 

Committed.
--strk;

From strk at refractions.net  Fri Nov 19 11:10:46 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <20041119155950.GA38710@freek.keybit.net>
References: <EKEJIKAILPONGGENMBGAAEADJIAA.nhv@cape.com>
	<EKEJIKAILPONGGENMBGAIEADJIAA.nhv@cape.com>
	<20041119155950.GA38710@freek.keybit.net>
Message-ID: <20041119161046.GB38710@freek.keybit.net>

Actually I've substituted the sprintf call using ostringstream 
instead.
--strk;

On Fri, Nov 19, 2004 at 04:59:50PM +0100, strk@refractions.net wrote:
> On Fri, Nov 19, 2004 at 10:56:31AM -0500, Norman Vine wrote:
> > Norman Vine writes:
> > > 
> > > Jan Kolar writes:
> > > > 
> > > 
> > > > ../index/quadtree/QuadTreeNode.cpp:175: implicit declaration of function
> > > > `int geos::sprintf(...)'
> > > 
> > > This wants to call the global sprintf as below
> > > 
> > >     ::sprintf(buf, "%d", level); 
> > 
> > That's true but the problem is that stdio.h isn't being included
> > 
> > so to the top of the file add
> > 
> > #include <stdio.h> 
> 
> Committed.
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From strk at refractions.net  Fri Nov 19 11:35:55 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] proposing debian support diff
In-Reply-To: <1100309788.19587.17.camel@localhost.localdomain>
References: <1100309788.19587.17.camel@localhost.localdomain>
Message-ID: <20041119163555.GB39225@freek.keybit.net>

Alex, I've added the files you provided to GEOS CVS
but I cannot handle to build a .deb neither on debign 3.0
nor on testing/unstable.
Can you provide instructions in a README and/or a Makefile
codifing the process of building it ?

TIA

--strk;

On Sat, Nov 13, 2004 at 03:36:29AM +0200, alex bodnaru wrote:
> hello friends,
> 
> i am using debian linux, and i've made the files additions needed to
> make GEOS compile and install on a debian system.
> the attached diff contains one directory, debian/ which should be in the
> geos distribution root directory: e.g /usr/src/geos/geos-2.0.1.
> 
> making the debian packages uses standard geos making procedures.
> no changes have been made to any file originally found in geos.
> 
> geos version and dependencies are being automatically deduced, so no
> change should be needed to the debian files upon geos upgrading.
> 
> please include debian files in the geos distribution, for all debian
> geos users to benefit.
> 
> best regards,
> 
> alex


> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From kolda at 3dgi.dk  Mon Nov 22 12:32:09 2004
From: kolda at 3dgi.dk (Jan Kolar)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <Pine.GSO.4.21.0411191627110.10961-100000@jumbo.servers.vrml.auc.dk>
Message-ID: <Pine.GSO.4.21.0411221830070.3009-100000@jumbo.servers.vrml.auc.dk>

i just want to reposrt that addinig
#include <ieeefp.h>
#include <stdio.h>
to ./source/headers/geos/platform.h has solved the initial compilation
problem. thank you --kolda


On Fri, 19 Nov 2004, Jan Kolar wrote:

> ok, including 
> #include <ieeefp.h>
> in platforms.h solves the problem with finite()/isinf() functions. to what
> has been posted i can add that i have found that isinf() was in earlier
> versions of Solaris, however since Solaris 8/9 isinf() doesn't exist at
> all. so no i get further and have a new error :(
> 
>  g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
> -I../../source/headers/geos -I../../source/headers -DGEOS_VERSION=2.1.0 -g
> -O2 -c ../index/quadtree/QuadTreeNode.cpp -Wp,-MD,.deps/QuadTreeNode.TPlo
> -fPIC -DPIC -o .libs/QuadTreeNode.o
> ../index/quadtree/QuadTreeNode.cpp: In method `class string
> geos::QuadTreeNode::toString() const':
> ../index/quadtree/QuadTreeNode.cpp:175: implicit declaration of function
> `int geos::sprintf(...)'
> *** Error code 1
> make: Fatal error: Command failed for target `QuadTreeNode.lo'
> Current working directory
> /group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source/geom
> *** Error code 1
> make: Fatal error: Command failed for target `all-recursive'
> Current working directory
> /group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source
> *** Error code 1
> make: Fatal error: Command failed for target `all-recursive'
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 


From strk at refractions.net  Tue Nov 30 05:02:36 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] Re: [RE]: Intersection of point and linestring. still
	bad results...
In-Reply-To: <00ff01c4d6b3$e3f91b20$0b01a8c0@nil5>
References: <00ff01c4d6b3$e3f91b20$0b01a8c0@nil5>
Message-ID: <20041130100236.GB59731@freek.keybit.net>

ksa, I've verified the problem locally, with postgis 0.9 and head 
branches and GEOS cvs.

The lost of precision is not due to textual conversion, but I'm still
convinced it is due to rounding errors.

Martin, basically the computed intersection point bewteen two
linestrings do not intersect any of the two.

This are a few intersting debugging lines:

 OverlayOp::computeOverlay: li:
 (-271.415,93.57,0)_(-187.14,74.3603,0) (-236.164, 88.6138)_(-238.349,24.5005)
 :  proper

The LineIntersector found proper intersection between those two segments:
POINT(-236.268122207233 85.558597112599)

 OverlayOp::labelIncompleteNode(node (-236.268,85.5585,0) lbl: a:- b:i, 0)
 RobustLineIntersector::computeIntersection((-236.268,85.5585,0), (-236.164,88.6138), (-238.349,24.5005))
  envelope intersects point
  orientationIndex p1p2p==1 p2p1p==-1 <---- CHECK THIS !
  after location set: node (-236.268,85.5585,0) lbl: a:e b:i

The PointLocator is failing to recognize it as 'internal' to geometry 'a':

 LINESTRING(-268.94877508 161.46993124,-268.94877508 161.46993124,-236.16352798 88.61382659,-238.34921112 24.5004545)

Whose last segment is exactly the one on which LineIntersector above
found the proper intersection point.

The orientationIndex computed by CGAlgorithm should be 0 for both p1p2p
and p2p1p for p to be considered ON p1-p2 segment, but it is 1 and -1
respectively.

The RobustDeterminant class uses ==, < and > checks which do not consider
floating point rounding errors. Maybe overriding these operators for
considering rounding errors would give the expected result, but I dunno
how this generalization would impact both speed and precision of GEOS.

Ideas Martin ?

--strk;

On Tue, Nov 30, 2004 at 11:08:50AM +0300, ksa wrote:
> Hi, strk.
> 
> search=# select gid, geom from t_table_46;
>  gid |
> geom
> -----+----------------------------------------------------------------------
> ----------------------------------------------------------------------------
> ----------------------------------------------------------------------------
> ------------------
>    1 |
> SRID=2000;MULTILINESTRING((-346.39495192 -32.22278924,-346.39495192 -32.2227
> 8924,-347.01462094 37.18014143,-261.50029565 23.54742291,-271.41500003
> 93.5700226,-187.14001279 74.36028286,-195.1957101 155.53692498,-118.97642017
> 141.90420646))
>    2 | SRID=2000;MULTILINESTRING((-268.94877508 161.46993124,-268.94877508
> 161.46993124,-236.16352798 88.61382659,-238.34921112 24.5004545))
> (2 rows)
> 
> 
> search=# select setsrid(intersection(t1.geom, t2.geom), 2000) from
> t_table_46 t1, t_table_46 t2 where t1.gid = 1 and t2.gid = 2;
>                       setsrid
> ----------------------------------------------------
>  SRID=2000;POINT(-236.267686750346 85.558502660642)
> (1 row)
> 
> So, I have one point that intersects with both multilinestrings.
> But I still have bad results...
> Pleace, help me...
> 
> 
> search=# select
> intersection('SRID=2000;MULTILINESTRING((-346.39495192 -32.22278924,-346.394
> 95192 -32.22278924,-347.01462094 37.18014143,-261.50029565
> 23.54742291,-271.41500003 93.5700226,-187.14001279 74.36028286,-195.1957101
> 155.53692498,-118.97642017 141.90420646))',
> 'SRID=2000;POINT(-236.267686750346 85.558502660642)');
>            intersection
> -----------------------------------
>  SRID=-1;GEOMETRYCOLLECTION(EMPTY)
> (1 row)
> 
> 
> search=# select
> intersection(transform('SRID=2000;MULTILINESTRING((-346.39495192 -32.2227892
> 4,-346.39495192 -32.22278924,-347.01462094 37.18014143,-261.50029565
> 23.54742291,-271.41500003 93.5700226,-187.14001279 74.36028286,-195.1957101
> 155.53692498,-118.97642017 141.90420646))', 2000),
> transform('SRID=2000;POINT(-236.267686750346 85.558502660642)', 2000));
>            intersection
> -----------------------------------
>  SRID=-1;GEOMETRYCOLLECTION(EMPTY)
> (1 row)
> 
> 
> And why intersection() returns geometry with -1 SRID? All parameters have
> srid=2000.
> 
> search=# select intersection(t1.geom, t2.geom) from t_table_46 t1,
> t_table_46 t2 where t1.gid = 1 and t2.gid = 2;
>                    intersection
> --------------------------------------------------
>  SRID=-1;POINT(-236.267686750346 85.558502660642)
> (1 row)
> 
> ksa.

From strk at keybit.net  Tue Nov 30 07:12:29 2004
From: strk at keybit.net (strk)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] rounding errors
Message-ID: <20041130121228.GG59731@freek.keybit.net>

I've reduced the dataset showing the bug:

 id |                             astext
----+----------------------------------------------------------------
  1 | LINESTRING(-236.16352798 88.61382659,-238.34921112 24.5004545)
  2 | LINESTRING(-271.41500003 93.5700226,-187.14001279 74.36028286)

These two segments intersect at this point:

 id |                  astext
----+------------------------------------------
  3 | POINT(-236.267686750346 85.558502660642)

Inserted into the table w/out textual conversion, so w/ no lost of
information there.

So 1^2 == 3
But 1^3 and 2^3 both return empty geometry.

Attached is xml test, which also fails with JTS.

--strk;
-------------- next part --------------
<run>
  <precisionModel type="FLOATING"/>

   <case>
      <desc>1^2</desc>
	<a>LINESTRING(-236.16352798 88.61382659,-238.34921112 24.5004545)</a>
	<b>LINESTRING(-271.41500003 93.5700226,-187.14001279 74.36028286)</b>
      <test>
	<op name="intersection" arg1="A" arg2="B">
		POINT(-236.2676867503460869 85.5585026606420342)
	</op>
      </test>
   </case>

   <case>
      <desc>1^3</desc>
	<a>LINESTRING(-236.16352798 88.61382659,-238.34921112 24.5004545)</a>
	<b>POINT(-236.2676867503460869 85.5585026606420342)</b>
      <test>
         <op name="intersection" arg1="A" arg2="B">
		POINT(-236.2676867503460869 85.5585026606420342)
	 </op>
      </test>
   </case>

   <case>
      <desc>2^3</desc>
	<a>LINESTRING(-271.41500003 93.5700226,-187.14001279 74.36028286)</a>
	<b>POINT(-236.2676867503460869 85.5585026606420342)</b>
      <test>
         <op name="intersection" arg1="A" arg2="B">
		POINT(-236.2676867503460869 85.5585026606420342)
	 </op>
      </test>
   </case>
</run>
From strk at refractions.net  Tue Nov 30 07:54:48 2004
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] build problem on Solaris
In-Reply-To: <Pine.GSO.4.21.0411221830070.3009-100000@jumbo.servers.vrml.auc.dk>
References: <Pine.GSO.4.21.0411191627110.10961-100000@jumbo.servers.vrml.auc.dk>
	<Pine.GSO.4.21.0411221830070.3009-100000@jumbo.servers.vrml.auc.dk>
Message-ID: <20041130125448.GI59731@freek.keybit.net>

On Mon, Nov 22, 2004 at 06:32:09PM +0100, Jan Kolar wrote:
> i just want to reposrt that addinig
> #include <ieeefp.h>
> #include <stdio.h>
> to ./source/headers/geos/platform.h has solved the initial compilation
> problem. thank you --kolda

Thanks kolda, I've updated GEOS to include ieeefp.h when available.
If you update your snapshot you should find stdio.h to not be
needed anymore. If this is not the case, or anything is still
failing please let me know.
--strk;


> 
> 
> On Fri, 19 Nov 2004, Jan Kolar wrote:
> 
> > ok, including 
> > #include <ieeefp.h>
> > in platforms.h solves the problem with finite()/isinf() functions. to what
> > has been posted i can add that i have found that isinf() was in earlier
> > versions of Solaris, however since Solaris 8/9 isinf() doesn't exist at
> > all. so no i get further and have a new error :(
> > 
> >  g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers
> > -I../../source/headers/geos -I../../source/headers -DGEOS_VERSION=2.1.0 -g
> > -O2 -c ../index/quadtree/QuadTreeNode.cpp -Wp,-MD,.deps/QuadTreeNode.TPlo
> > -fPIC -DPIC -o .libs/QuadTreeNode.o
> > ../index/quadtree/QuadTreeNode.cpp: In method `class string
> > geos::QuadTreeNode::toString() const':
> > ../index/quadtree/QuadTreeNode.cpp:175: implicit declaration of function
> > `int geos::sprintf(...)'
> > *** Error code 1
> > make: Fatal error: Command failed for target `QuadTreeNode.lo'
> > Current working directory
> > /group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source/geom
> > *** Error code 1
> > make: Fatal error: Command failed for target `all-recursive'
> > Current working directory
> > /group/3dgidata/Postgres/source/postgresql-7.4.6/contrib/geos-2.1.0/source
> > *** Error code 1
> > make: Fatal error: Command failed for target `all-recursive'
> > 
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel@geos.refractions.net
> > http://geos.refractions.net/mailman/listinfo/geos-devel
> > 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From strk at keybit.net  Tue Nov 30 11:28:08 2004
From: strk at keybit.net (strk)
Date: Fri Nov  2 20:52:39 2007
Subject: [geos-devel] Re: gettimeofday for win32
In-Reply-To: <41AC9AF4.1020602@sh163.net>
References: <20041129114056.GD49654@freek.keybit.net>
	<41AC9AF4.1020602@sh163.net>
Message-ID: <20041130162808.GB62714@freek.keybit.net>

On Wed, Dec 01, 2004 at 12:08:20AM +0800, Wu Yongwei wrote:
> Of course. The code you mentioned is considered in the public domain. I 
> am happy that you find it useful.
> 
> By the way, I will no longer maintain the mywebpage site. The new site is:
> 
> http://wyw.dcweb.cn/
> 
> Best regards,
> 
> Yongwei

Thank you Yongwei.
The code will go into the 2.1.0 release.
--strk;

> 
> strk wrote:
> >Hi, is it ok for you if the code published here:
> >http://mywebpage.netscape.com/yongweiwu/timeval.h.txt
> >gets included in the GEOS distribution (http://geos.refractions.net) ?
> >
> >TIA
> >--strk;

