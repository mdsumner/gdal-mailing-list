From geos-trac at osgeo.org  Sun Apr  1 05:57:31 2012
From: geos-trac at osgeo.org (GEOS)
Date: Sun Apr  1 05:58:22 2012
Subject: [geos-devel] Re: [GEOS] #518: GEOS 3.3.2 crashes on MinGW64
In-Reply-To: <047.b01ab5afea3f50a5f2df568d899fe87a@osgeo.org>
References: <047.b01ab5afea3f50a5f2df568d899fe87a@osgeo.org>
Message-ID: <056.bfe6a1f5baab0ce9d8353d1348ba6286@osgeo.org>

#518: GEOS 3.3.2 crashes on MinGW64
------------------------+---------------------------------------------------
 Reporter:  esseffe     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.3                     
Component:  Default     |     Version:  3.3.2                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by robe):

 okay I upgraded my mingw64 to gcc 4.6.3 and now I'm experiencing crashing
 in xmltester.exe to.  I'm pretty sure it was working fine on my 4.4.7 (or
 something like that).  I'm going to roll back to that one or my 4.5 next
 to see if I get the same issue.

 For me it fails here:
 this is running branch 3.3 r3574

 {{{
 terminate called after throwing an instance of
 'geos::util::TopologyException'
   what():  TopologyException: found non-noded intersection between
 LINESTRING (-
 105571 939969, -102895 939993) and LINESTRING (9485.36 770763, -102895
 939993) a
 t -102894.5562421389 939992.66927296668

 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/518#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sun Apr  1 06:30:28 2012
From: geos-trac at osgeo.org (GEOS)
Date: Sun Apr  1 06:31:16 2012
Subject: [geos-devel] Re: [GEOS] #518: GEOS 3.3.2 crashes on MinGW64
In-Reply-To: <047.b01ab5afea3f50a5f2df568d899fe87a@osgeo.org>
References: <047.b01ab5afea3f50a5f2df568d899fe87a@osgeo.org>
Message-ID: <056.1cb9e60d592795f2f01c3336e7789964@osgeo.org>

#518: GEOS 3.3.2 crashes on MinGW64
------------------------+---------------------------------------------------
 Reporter:  esseffe     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.3                     
Component:  Default     |     Version:  3.3.2                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by robe):

 I'm a bit confused where the xmltester comes into play.  I switched back
 to my gcc 4.5.4 mingw64 and this is what make check gives me with r3574


 {{{
 ===============================
   GEOS Test Suite Application
 ===============================

 capi::GEOSBuffer: ....................
 capi::GEOSContains: ...
 capi::GEOSCoordSeq: ......
 capi::GEOSGeomFromWKB: .....
 capi::GEOSGeomToWKT: .............
 capi::GEOSGeom_create: .......
 capi::GEOSGeom_extractUniquePoints: ...
 capi::GEOSIntersects: ...NOTICE: IllegalArgumentException:
 RobustDeterminant enc
 ountered non-finite numbers
 .NOTICE: IllegalArgumentException: RobustDeterminant encountered non-
 finite numb
 ers
 .
 capi::GEOSLineStringPoint: ...
 capi::GEOSOffsetCurve: ......
 capi::GEOSOrientationIndex: ...........
 capi::GEOSPolygonizeGetCutEdges: ..
 capi::GEOSPreparedGeometry: ......
 capi::GEOSRelateBoundaryNodeRule: .......NOTICE: Invalid boundary node
 rule 5
 .
 capi::GEOSRelatePatternMatch: .....NOTICE: IllegalArgumentException:
 Geometry is
  not lineal

 capi::GEOSSharedPaths: ..NOTICE: IllegalArgumentException: Geometry is not
 linea
 l
 .
 capi::GEOSSimplify: .
 capi::GEOSSnap: ....
 capi::GEOSUnaryUnion: ........
 capi::GEOSWithin: ...
 capi::GEOSisValidDetail: ..[3=F]...
 geos::algorithm::Angle: ....
 geos::algorithm::CGAlgorithms::computeOrientation: ..
 geos::algorithm::CGAlgorithms::isCCW: .....
 geos::algorithm::CGAlgorithms::isPointInRing: ..
 geos::algorithm::CGAlgorithms::signedArea: ...
 geos::algorithm::ConvexHull: .......
 geos::algorithm::InteriorPointArea: .
 geos::algorithm::PointLocator: ....
 geos::algorithm::RobustLineIntersection: ..
 geos::algorithm::RobustLineIntersector: .............
 geos::algorithm::distace::DiscreteHausdorffDistance: ....
 geos::geom::Coordinate: .........
 geos::geom::CoordinateArraySequence: .................
 geos::geom::CoordinateArraySequenceFactory: ....
 geos::geom::CoordinateList: ..
 geos::geom::Dimension: .....
 geos::geom::Envelope: .........
 geos::geom::Geometry::clone: .......
 geos::geom::Geometry::covers: ...
 geos::geom::Geometry::isRectangle: .......
 geos::geom::GeometryFactory: ....................................
 geos::geom::IntersectionMatrix: .............................
 geos::geom::LineSegment: ......
 geos::geom::LineString: .........................
 geos::geom::LinearRing: ..............................
 geos::geom::Location: ...
 geos::geom::MultiLineString: .
 geos::geom::MultiPoint: ............................
 geos::geom::MultiPolygon: .
 geos::geom::Point: ........................................
 geos::geom::Polygon: .....................................
 geos::geom::PrecisionModel: .........
 geos::geom::Triangle: .....
 geos::geom::prep::PreparedGeometryFactory: .............................
 geos::geom::util::GeometryExtracter: ..
 geos::index::quadtree::DoubleBits: .
 geos::io::ByteOrderValues: ...
 geos::io::WKBReader: .......
 geos::io::WKBWriter: ...
 geos::io::WKTReader: ......
 geos::io::WKTWriter: .....
 geos::linearref::LocationIndexedLine: ........................
 geos::noding::BasicSegmentString: ....
 geos::noding::NodedSegmentString: .....
 geos::noding::SegmentNode: ....
 geos::noding::SegmentPointComparator: .....
 geos::noding::snapround::HotPixel: ..
 geos::operation::IsSimpleOp: ...
 geos::operation::buffer::BufferOp: ..........
 geos::operation::buffer::BufferParameters: ..........
 geos::operation::distance::DistanceOp: ...................
 geos::operation::geounion::CascadedPolygonUnion: .
 geos::operation::geounion::UnaryUnionOp: ......
 geos::operation::linemerge::LineMerger: ......
 geos::operation::linemerge::LineSequencer: ............
 geos::operation::overlay::snap::GeometrySnapper: ..
 geos::operation::overlay::snap::LineStringSnapper: .......
 geos::operation::overlay::validate::FuzzyPointLocator: .......
 geos::operation::overlay::validate::OffsetPointGenerator: .....
 geos::operation::overlay::validate::OverlayResultValidator: ......
 geos::operation::sharedpaths::SharedPathsOp: .....................
 geos::operation::valid::IsValidOp: .
 geos::operation::valid::ValidClosedRing: .....
 geos::operation::valid::ValidSelfTouchingRingFormingHole: .......
 geos::precision::SimpleGeometryPrecisionReducer: .......
 geos::simplify::DouglasPeuckerSimplifier: ..........
 geos::simplify::TopologyPreservingSimplifier: ...........
 geos::util::UniqueCoordinateArrayFilter: .

 ---> group: capi::GEOSisValidDetail, test: test<3>
      problem: assertion failed
      failed assertion: "Values are not equal: expected 'POINT (NAN -5)'
 actual '
 POINT (-1.#IND -5)'"

 tests summary: failures:1 ok:744
 FAIL: geos_unit.exe
 ==================
 1 of 1 test failed
 ==================
 make[3]: *** [check-TESTS] Error 1
 make[3]: Leaving directory
 `/c/ming64/projects/geos/branches/3.3/tests/unit'
 make[2]: *** [check-am] Error 2
 make[2]: Leaving directory
 `/c/ming64/projects/geos/branches/3.3/tests/unit'
 make[1]: *** [check-recursive] Error 1
 make[1]: Leaving directory `/c/ming64/projects/geos/branches/3.3/tests'
 make: *** [check-recursive] Error 1
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/518#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From pramsey at opengeo.org  Sun Apr  1 17:56:52 2012
From: pramsey at opengeo.org (Paul Ramsey)
Date: Sun Apr  1 17:56:58 2012
Subject: [geos-devel] 3.3.3?
In-Reply-To: <20120222065230.GA2367@gnash>
References: <CACowWR1=jFRPeyau3kTvAgO0XvhjYzw3yNs5ZDn77isU=vtXtQ@mail.gmail.com>
	<20120222065230.GA2367@gnash>
Message-ID: <CACowWR2nFxV1M75nGH04QhCswBBsVF+HNAn+y-wD_QSshsAohw@mail.gmail.com>

In order to have a 3.3.3 on the street to match up to PostGIS 2.0 I
just dropped one out. It's the windows build issues plus the
collections-with-empty fix you added.

P.

On Tue, Feb 21, 2012 at 10:52 PM, Sandro Santilli <strk@keybit.net> wrote:
> On Tue, Feb 21, 2012 at 10:35:08AM -0800, Paul Ramsey wrote:
>> Any objection to my pushing out a 3.3.3? I see there are some small
>> win32 fixes that I'm sure folks would enjoy not having to handfix
>> building the tarball (having just hand-fixed them myself).
>
> Let's at least take a look at the 6 open tickets in that milestone
> for low hanging fruits ? ?After which, no problem with me with taking
> 3.3.3 out and planning a 3.3.4
>
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
From strk at keybit.net  Mon Apr  2 03:07:41 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon Apr  2 03:08:39 2012
Subject: [geos-devel] 3.3.3?
In-Reply-To: <CACowWR2nFxV1M75nGH04QhCswBBsVF+HNAn+y-wD_QSshsAohw@mail.gmail.com>
References: <CACowWR1=jFRPeyau3kTvAgO0XvhjYzw3yNs5ZDn77isU=vtXtQ@mail.gmail.com>
	<20120222065230.GA2367@gnash>
	<CACowWR2nFxV1M75nGH04QhCswBBsVF+HNAn+y-wD_QSshsAohw@mail.gmail.com>
Message-ID: <20120402070741.GE23975@gnash>

On Sun, Apr 01, 2012 at 02:56:52PM -0700, Paul Ramsey wrote:
> In order to have a 3.3.3 on the street to match up to PostGIS 2.0 I
> just dropped one out. It's the windows build issues plus the
> collections-with-empty fix you added.

Good. Could you please also shift all 3.3.3 tickets up to 3.3.4 
and announce the release ?

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

From geos-trac at osgeo.org  Mon Apr  2 03:54:31 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 03:55:29 2012
Subject: [geos-devel] Re: [GEOS] #508: TopologyPreservingSimplifier creates
 invalid line from closed line
In-Reply-To: <044.2801226cbba103e51e0464f7cb00011d@osgeo.org>
References: <044.2801226cbba103e51e0464f7cb00011d@osgeo.org>
Message-ID: <053.4e47a521ab9644d8d0af4c1104a70c8b@osgeo.org>

#508: TopologyPreservingSimplifier creates invalid line from closed line
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * version:  3.3.2 => 3.3.3
  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/508#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 03:55:29 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 03:55:32 2012
Subject: [geos-devel] Re: [GEOS] #509: GEOS crashes on check in MingW GCC
	4.6.2
In-Reply-To: <044.dda502498b4ae989f15504593f1c28c6@osgeo.org>
References: <044.dda502498b4ae989f15504593f1c28c6@osgeo.org>
Message-ID: <053.937d6a2788396422c48aa8911cf3076a@osgeo.org>

#509: GEOS crashes on check in MingW GCC 4.6.2
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * version:  3.3.2 => 3.3.3
  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/509#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 03:55:54 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 03:55:59 2012
Subject: [geos-devel] Re: [GEOS] #510: TopologyPreservingSimplifier
 returning invalid output
In-Reply-To: <044.2b08e1a5ad66d16af2b382d4c876128b@osgeo.org>
References: <044.2b08e1a5ad66d16af2b382d4c876128b@osgeo.org>
Message-ID: <053.29b8a84f78b5aaff4e80bd55b10d0fcc@osgeo.org>

#510: TopologyPreservingSimplifier returning invalid output
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * version:  3.3.2 => 3.3.3
  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/510#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 03:56:40 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 03:56:48 2012
Subject: [geos-devel] Re: [GEOS] #513: Fix PHP 5.4 compatibility
In-Reply-To: <045.4dfc080feca04930ff080e6b79dfd382@osgeo.org>
References: <045.4dfc080feca04930ff080e6b79dfd382@osgeo.org>
Message-ID: <054.c7348e1c93eaca4e25fb750538a2f9c8@osgeo.org>

#513: Fix PHP 5.4 compatibility
------------------------+---------------------------------------------------
 Reporter:  voxik       |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * version:  3.3.2 => 3.3.3
  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/513#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 03:58:47 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 03:59:06 2012
Subject: [geos-devel] Re: [GEOS] #516: platform.h doesn't work right for
	mingw64
In-Reply-To: <044.1ad82d433b870fb5d61da0d89b0f5d98@osgeo.org>
References: <044.1ad82d433b870fb5d61da0d89b0f5d98@osgeo.org>
Message-ID: <053.1ebb413889f1cb0c26bf7b88b783916c@osgeo.org>

#516: platform.h doesn't work right for mingw64
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * version:  3.3.2 => 3.3.3
  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/516#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 03:59:08 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 03:59:26 2012
Subject: [geos-devel] Re: [GEOS] #517: GEOS Intersection() error w/ test
	case.
In-Reply-To: <047.2a0569822f315088cb3b0d28c1bf0831@osgeo.org>
References: <047.2a0569822f315088cb3b0d28c1bf0831@osgeo.org>
Message-ID: <056.342ac037b4dde95f8877ef22c41734e8@osgeo.org>

#517: GEOS Intersection() error w/ test case.
------------------------+---------------------------------------------------
 Reporter:  andrepl     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.2                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/517#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 03:59:47 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 04:00:08 2012
Subject: [geos-devel] Re: [GEOS] #518: GEOS 3.3.2 crashes on MinGW64
In-Reply-To: <047.b01ab5afea3f50a5f2df568d899fe87a@osgeo.org>
References: <047.b01ab5afea3f50a5f2df568d899fe87a@osgeo.org>
Message-ID: <056.ea587a80464fb2dded54188949ce5217@osgeo.org>

#518: GEOS 3.3.2 crashes on MinGW64
------------------------+---------------------------------------------------
 Reporter:  esseffe     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.2                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/518#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 04:00:07 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 04:00:34 2012
Subject: [geos-devel] Re: [GEOS] #522: Exception on overlay between valid
 linestrings [JTS fails too]
In-Reply-To: <044.cd40b1a0d6ce2f6e498e2ecce1f58682@osgeo.org>
References: <044.cd40b1a0d6ce2f6e498e2ecce1f58682@osgeo.org>
Message-ID: <053.f1e01580964f21f866ac82aaad3f9619@osgeo.org>

#522: Exception on overlay between valid linestrings [JTS fails too]
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.2                     
 Severity:  Unassigned  |    Keywords:  jtsfail                   
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/522#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 04:00:25 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 04:00:48 2012
Subject: [geos-devel] Re: [GEOS] #523: SymDifference between two valid
 geometries return an _invalid_ geometry [JTS fails too]
In-Reply-To: <044.a930774d74a88c51d62a6390e1a0584e@osgeo.org>
References: <044.a930774d74a88c51d62a6390e1a0584e@osgeo.org>
Message-ID: <053.0c6719003d98f47350c8ff51d99774c2@osgeo.org>

#523: SymDifference between two valid geometries return an _invalid_ geometry
[JTS fails too]
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.2                     
 Severity:  Unassigned  |    Keywords:  jtsfail                   
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/523#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 04:00:38 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 04:01:02 2012
Subject: [geos-devel] Re: [GEOS] #507: Postgres crash in geos 3.3.0 using
 postgis st_buffer function
In-Reply-To: <047.bc0d51feb60f44db8167fac566d86de1@osgeo.org>
References: <047.bc0d51feb60f44db8167fac566d86de1@osgeo.org>
Message-ID: <056.b813392e577932ee133538d799a39cca@osgeo.org>

#507: Postgres crash in geos 3.3.0 using postgis st_buffer function
----------------------+-----------------------------------------------------
 Reporter:  luisico   |       Owner:  geos-devel@?              
     Type:  defect    |      Status:  new                       
 Priority:  minor     |   Milestone:  3.3.4                     
Component:  Default   |     Version:  3.3.0                     
 Severity:  Critical  |    Keywords:                            
----------------------+-----------------------------------------------------
Changes (by strk):

  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/507#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 04:00:54 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 04:01:19 2012
Subject: [geos-devel] Re: [GEOS] #515: mingw64 make check returns #IND
In-Reply-To: <044.f9004e33c629eadddb90b7cdb2068449@osgeo.org>
References: <044.f9004e33c629eadddb90b7cdb2068449@osgeo.org>
Message-ID: <053.89fc4958304ec6e78fd1999ed56416dd@osgeo.org>

#515: mingw64 make check returns #IND
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  trivial     |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.2                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.3 => 3.3.4


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/515#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Mon Apr  2 04:03:06 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon Apr  2 04:03:40 2012
Subject: [geos-devel] 3.3.3?
In-Reply-To: <20120402070741.GE23975@gnash>
References: <CACowWR1=jFRPeyau3kTvAgO0XvhjYzw3yNs5ZDn77isU=vtXtQ@mail.gmail.com>
	<20120222065230.GA2367@gnash>
	<CACowWR2nFxV1M75nGH04QhCswBBsVF+HNAn+y-wD_QSshsAohw@mail.gmail.com>
	<20120402070741.GE23975@gnash>
Message-ID: <20120402080306.GJ23975@gnash>

On Mon, Apr 02, 2012 at 09:07:41AM +0200, Sandro Santilli wrote:
> On Sun, Apr 01, 2012 at 02:56:52PM -0700, Paul Ramsey wrote:
> > In order to have a 3.3.3 on the street to match up to PostGIS 2.0 I
> > just dropped one out. It's the windows build issues plus the
> > collections-with-empty fix you added.
> 
> Good. Could you please also shift all 3.3.3 tickets up to 3.3.4 
> and announce the release ?

Never mind. I did this myself.

It's pretty time consuming to do it one-by-one (only 10 of them, luckly).
Do we have access to the underlying database to do it with an SQL line 
for next time ?

--strk; 

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

From geos-trac at osgeo.org  Mon Apr  2 04:08:43 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 04:09:29 2012
Subject: [geos-devel] [GEOS] #526: Port JTS bugfix to
	GeometryPrecisionReducer
Message-ID: <044.427567335d1d7e2b6e55b084fd43e397@osgeo.org>

#526: Port JTS bugfix to GeometryPrecisionReducer
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 See
 http://sourceforge.net/tracker/?func=detail&aid=3511312&group_id=128875&atid=713120

 Was fixed in revision 575 of JTS.
 GEOS also misses a unit test for that class (JTS has one which is improved
 with that commit)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/526>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 05:02:03 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 05:02:24 2012
Subject: [geos-devel] [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
Message-ID: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 GEOSUnaryUnion fails to correctly node this line:

 {{{
 MULTILINESTRING((1725063 4819121,1725104 4819067,1725060
 4819087,1725064.14183882 4819094.70208557,1725064.13656044
 4819094.70235069,1725064.14210359 4819094.70227252,1725064.14210362
 4819094.70227252,1725064.13656043 4819094.70235069,1725055 4819094,1725055
 4819094,1725055 4819094,1725063 4819121))
 }}}


 I'm assuming ST_IsSimple is a good sign of correct noding:

 {{{
 =# select ST_IsSimple( ST_UnaryUnion( 'MULTILINESTRING((1725063
 4819121,1725104 4819067,1725060 4819087,1725064.14183882
 4819094.70208557,1725064.13656044 4819094.70235069,1725064.14210359
 4819094.70227252,1725064.14210362 4819094.70227252,1725064.13656043
 4819094.70235069,1725055 4819094,1725055 4819094,1725055 4819094,1725063
 4819121))' ) );
  st_issimple
 -------------
  f
 (1 row)
 }}}
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 05:46:02 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 05:46:24 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.b3ed9a1095b0ac526b4622274ba8e9f5@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Uff, ST_IsSimple isn't a good check when it comes to _closed_ lines, in
 that they have no bounday so the node would be considered as an
 interior/interior intersection, like here:

 MULTILINESTRING((0 0, 10 0, 10 10, 0 0), (0 0, -10 0, -10 -10, 0 0))

 The boundary node rule is really getting in my way.

 @mbdavis : how can I check for correct noding ? And is Polygonizer happy
 with noding which involves closed lines ?

 /me goes on to try again the polygonizer call with more closed lines.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Mon Apr  2 05:57:05 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon Apr  2 05:57:23 2012
Subject: [geos-devel] Boundary node rule
Message-ID: <20120402095705.GM23975@gnash>

I've started a wiki page about the need for specifying a boundary node rule
for a set of operations:

http://trac.osgeo.org/geos/wiki/BundaryNodeRule

The issue came out in the past with a proposal to make BNR part of a Geometry,
the proposal wasn't accepted because it should really be an operation-level
parameter (or how to deal with binary operators with different BNRs ?).

But there still is a need for dealing with that rule.
I just hit it while looking for a way to tell if a set of lines were or not
"correctly noded" and realized that "isSimple" operation would tell you
a bow tie with a single node isn't simple because the node would be considered
not-a-node (but interior to the closed geometries...)

Please update the page with more operations if you think boundary node rule
affects more than the one listed in there. Thanks.

--strk; 

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

From geos-trac at osgeo.org  Mon Apr  2 06:00:31 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 06:00:52 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.2899866acef17d1b14fd049d02e1498c@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Checked: polygonizer is happy with closed components.

 Wouldn't it be great if we discovered that the noding checker was also
 fooled by boundary node rule, throwing topology exceptions on perfectly
 good noding ? (found non-noded intersection etc.etc.)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 08:32:15 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 08:32:36 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.798f713a8e05d2e08334f997b379a872@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 A second attempt at checking for correct noding: compute intersection
 matrix between each pair of lines. Expected outcome: interior/interior
 intersection is always false in a correctly noded arrangement.

 This confirms UnaryUnion isn't correctly noding:
 {{{
 with noded as (
  select ST_UnaryUnion(
 'LINESTRING(1725063 4819121,1725104 4819067,1725060
 4819087,1725064.14183882 4819094.70208557,1725064.13656044
 4819094.70235069,1725064.14210359 4819094.70227252,1725064.14210362
 4819094.70227252,1725064.13656043 4819094.70235069,1725055 4819094,1725055
 4819094,1725055 4819094,1725063 4819121)'
  ) as g ),
 dumped as (  select (st_dump(g)).* from noded ),
 matrices as ( select a.path as ap, b.path as bp, st_relate(a.geom, b.geom,
 2) as im
            from dumped a, dumped b where a.path < b.path)
 select ap, bp, im from matrices where ST_RelateMatch(im, 'T********');
  ap  | bp  |    im
 -----+-----+-----------
  {1} | {2} | 0F1F00102
  {2} | {5} | 1F1F00102
 (2 rows)
 }}}

 So first and second line have puntual interior/interior intersection,
 while second and fifth line have lineal interior/interior intersection.
 Shouldn't happen, right ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 08:45:03 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 08:45:18 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.5aec973e57fe8d346f6cafcdbc6b661e@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 I've attached the script defining an SQL function to check for correct
 noding here:
 http://trac.osgeo.org/postgis/attachment/ticket/1735/CheckNoding.sql

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 09:29:59 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 09:30:12 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.e423a590e8464593d9058e7fae17d77a@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Further analysis: the first attempt at running the union overlay op fails
 the internal noding validator step:
 {{{
 EdgeNodingValidator found noding invalid: TopologyException: found non-
 noded intersection between LINESTRING (1.72506e+06 4.81909e+06,
 1.72506e+06 4.81909e+06) and LINESTRING (1.72506e+06 4.81909e+06,
 1.72506e+06 4.81909e+06) at 1725064.1365604457 4819094.70235069
 }}}

 So SnapIfNeededOverlayOp switches on snapping, which seems to pass the
 check:
 {{{
 EdgeNodingValidator accepted the noding
 }}}

 Now it'd be interesting to see _why_ the internal edge noding validator
 passes while our own checking fails it !

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 09:32:23 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 09:32:46 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.e2cef65408ad4a0a9eb662f05d5465b7@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Ah, I see the EdgeNodingValidator runs _before_ we re-add the common bits
 that we removed before runnign the operation. I bet the re-addition of
 commit bits is introducing more non-noded intersection. It would not be
 the first time I detect such behavior. I start thinking that removing
 common bits heuristic isn't such a good one.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 16:27:14 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 16:27:41 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.e10503bbb4f23b117430133b34dc1022@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Simplified input still reproducing the bogus noding:

 {{{
 LINESTRING(
  1725063 4819121,
  1725064.14183882 4819094.70208557,
  1725064.13656044 4819094.70235069,
  1725064.14210362 4819094.70227252,
  1725064.13656043 4819094.70235069,
  1725063 4819121
 )
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:7>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 17:31:47 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 17:32:24 2012
Subject: [geos-devel] [GEOS] #528: GEOS CMAKE Windows SDK x64 crashes
Message-ID: <044.e0d7814a7d7b2d349f9072b93cdc61d6@osgeo.org>

#528: GEOS CMAKE Windows SDK x64 crashes
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Following Paul's instructions
 http://trac.osgeo.org/postgis/wiki/DevWikiWinMingWSys_20_MSVC

 but using  Microsoft Windows 7.1 (x64) SDK (should be equivalent VC2008)

 When doing make check in PostGIS I get the same crash
 on cunit -- makevalid exception test.

 So it seems exceptions aren't being handled right for windows 64-bit.

 NOTe i get the same failures when compiling on mingw64 for anything higher
 the gcc 4.5.4. (gcc 4.6.3, gcc 4.6.1)

 I also ran what I guessed is how you test

 {{{
 nmake test
 }}}


 {{{
 Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
 Copyright (C) Microsoft Corporation.  All rights reserved.

 Running tests...
 Test project C:/ming64/projects/geos/branches/geos-3.3.3vcbuild
     Start 1: geos_unit
 1/4 Test #1: geos_unit ........................***Failed    0.27 sec
     Start 2: xmltester
 2/4 Test #2: xmltester ........................   Passed    5.59 sec
     Start 3: bug234
 3/4 Test #3: bug234 ...........................   Passed    0.02 sec
     Start 4: TestSweepLineSpeed
 4/4 Test #4: TestSweepLineSpeed ...............   Passed    3.27 sec

 75% tests passed, 1 tests failed out of 4

 Total Test time (real) =  11.81 sec
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/528>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon Apr  2 17:33:33 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon Apr  2 17:34:18 2012
Subject: [geos-devel] Re: [GEOS] #528: GEOS CMAKE Windows SDK x64 crashes
In-Reply-To: <044.e0d7814a7d7b2d349f9072b93cdc61d6@osgeo.org>
References: <044.e0d7814a7d7b2d349f9072b93cdc61d6@osgeo.org>
Message-ID: <053.41dd538ef3967a98ae08518d8372b2c0@osgeo.org>

#528: GEOS CMAKE Windows SDK x64 crashes
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by robe):

 refer to #518

 I suspect they are similar issues.  It always crashes when it tries to
 throw an error.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/528#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From mtnclimb at telus.net  Tue Apr  3 01:13:16 2012
From: mtnclimb at telus.net (Martin Davis)
Date: Tue Apr  3 01:08:23 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail
	at correctly node input lines
In-Reply-To: <053.b3ed9a1095b0ac526b4622274ba8e9f5@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
	<053.b3ed9a1095b0ac526b4622274ba8e9f5@osgeo.org>
Message-ID: <4F7A86EC.6040601@telus.net>

JTS uses the FastNodingValidator to check for correctly noded line 
arrangements.  Basically it checks for any interior-interior segment 
intersections, using indexing to speed things up.

And yes, the OGC operation semantics aren't fully capable when it comes 
to more specific uses like checking noding.  That's one reason I 
introduced the boundary-node rule.

The Polygonizer is fine with closed lines (as long as, as always, the 
linework is FULLY noded).

This issue is just one more example of a robustness failure.

On 4/2/2012 2:46 AM, GEOS wrote:
> #527: Union and UnaryUnion both fail at correctly node input lines
> ------------------------+---------------------------------------------------
>   Reporter:  strk        |       Owner:  geos-devel@?
>       Type:  defect      |      Status:  new
>   Priority:  major       |   Milestone:  3.3.4
> Component:  Default     |     Version:  3.3.3
>   Severity:  Unassigned  |    Keywords:
> ------------------------+---------------------------------------------------
>
> Comment(by strk):
>
>   Uff, ST_IsSimple isn't a good check when it comes to _closed_ lines, in
>   that they have no bounday so the node would be considered as an
>   interior/interior intersection, like here:
>
>   MULTILINESTRING((0 0, 10 0, 10 10, 0 0), (0 0, -10 0, -10 -10, 0 0))
>
>   The boundary node rule is really getting in my way.
>
>   @mbdavis : how can I check for correct noding ? And is Polygonizer happy
>   with noding which involves closed lines ?
>
>   /me goes on to try again the polygonizer call with more closed lines.
>
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> -----
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 2012.0.1913 / Virus Database: 2114/4909 - Release Date: 04/01/12
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20120402/64213304/attachment.html
From strk at keybit.net  Tue Apr  3 02:37:14 2012
From: strk at keybit.net (Sandro Santilli)
Date: Tue Apr  3 02:37:41 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail
	at correctly node input lines
In-Reply-To: <4F7A86EC.6040601@telus.net>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
	<053.b3ed9a1095b0ac526b4622274ba8e9f5@osgeo.org>
	<4F7A86EC.6040601@telus.net>
Message-ID: <20120403063547.GA28952@gnash>

On Mon, Apr 02, 2012 at 10:13:16PM -0700, Martin Davis wrote:
> JTS uses the FastNodingValidator to check for correctly noded line
> arrangements.  Basically it checks for any interior-interior segment
> intersections, using indexing to speed things up.
> 
> And yes, the OGC operation semantics aren't fully capable when it
> comes to more specific uses like checking noding.  That's one reason
> I introduced the boundary-node rule.
> 
> The Polygonizer is fine with closed lines (as long as, as always,
> the linework is FULLY noded).
> 
> This issue is just one more example of a robustness failure.

Do you think the use of a selected Noder might handle such cases
better than relying on Union operation to do noding ?

It seems to me that GeometryGraph class (used by overlay ops)
uses EdgeIntersectionList and friends to perform noding, rather
than the "noding" package. I've been thinking that this specific
case of a noding failure could have been resolved by an
IteratedNoder (just guessing that the problem is in a splitting
node modifying an edge shape to cross another existing edge).

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

From geos-trac at osgeo.org  Tue Apr  3 06:52:19 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue Apr  3 06:52:31 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.bdf25cde2dedba40c25c6bb9f55bae3d@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 For the record: the IteratedNoder succeeds in noding the above input with
 2 iterations, but the overlay operation isn't using the noding classes at
 all if I'm not mistaken.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:8>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Tue Apr  3 07:13:03 2012
From: strk at keybit.net (Sandro Santilli)
Date: Tue Apr  3 07:13:39 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail
	at correctly node input lines
In-Reply-To: <20120403063547.GA28952@gnash>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
	<053.b3ed9a1095b0ac526b4622274ba8e9f5@osgeo.org>
	<4F7A86EC.6040601@telus.net> <20120403063547.GA28952@gnash>
Message-ID: <20120403111303.GE28952@gnash>

On Tue, Apr 03, 2012 at 08:37:14AM +0200, Sandro Santilli wrote:
> On Mon, Apr 02, 2012 at 10:13:16PM -0700, Martin Davis wrote:
> > JTS uses the FastNodingValidator to check for correctly noded line
> > arrangements.  Basically it checks for any interior-interior segment
> > intersections, using indexing to speed things up.
> > 
> > And yes, the OGC operation semantics aren't fully capable when it
> > comes to more specific uses like checking noding.  That's one reason
> > I introduced the boundary-node rule.
> > 
> > The Polygonizer is fine with closed lines (as long as, as always,
> > the linework is FULLY noded).
> > 
> > This issue is just one more example of a robustness failure.
> 
> Do you think the use of a selected Noder might handle such cases
> better than relying on Union operation to do noding ?

I tried this. IteratedNoder succeeds at second iteration.

SimpleSnapRounder fails with:
 TopologyException: found endpt/interior pt intersection at index 1 :
                    pt 1.72506e+06 4.81909e+06

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

From geos-trac at osgeo.org  Tue Apr  3 08:41:10 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue Apr  3 08:41:25 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.723dcd3de9bf1f2d17069a7d1984eae5@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 I've to correct myself, it takes 5 iterations to correctly node the above!
 {{{
 Iteration1: # nodes created: 3
 Iteration2: # nodes created: 3
 Iteration3: # nodes created: 5
 Iteration4: # nodes created: 5
 Iteration5: # nodes created: 5
 Iteration6: # nodes created: 0
 }}}

 Since IteratedNoder returns 19 output segments, many of which being
 duplicates, I'm not sure it's doing its work the way it's meant to.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:9>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From candia234 at hotmail.com  Tue Apr  3 17:12:24 2012
From: candia234 at hotmail.com (Gloria Candia Cuno)
Date: Tue Apr  3 17:12:57 2012
Subject: [geos-devel] Deep blue
Message-ID: <SNT139-W16FD4B9C1A7B3E4139D68BFA4D0@phx.gbl>


White flowers 

 I would like to introduce you a very good company which , They can offer you all kinds of electronical products , such as laptops ,gps ,TV LCD,cell phones,ps3,MP3/4,motorcycles  etc........Please take some time to have a look ,there must be products you 'd like to purchase. I think this is a very good chance that you can give your family pretty gifts.
Their website : www.metobuy.com 
Email?metobuy@188.com
MSN?metobuy@hotmail.com
 Dad, in this special day, all the blessings are with our love, crowded in your cup, red, deep, until the bottom of my heart.  		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20120403/5b498f69/attachment.html
From geos-trac at osgeo.org  Thu Apr  5 11:36:35 2012
From: geos-trac at osgeo.org (GEOS)
Date: Thu Apr  5 11:37:10 2012
Subject: [geos-devel] [GEOS] #529: SimpleSnapRounder performs bogus noding
Message-ID: <044.cae537068d0bc4dc50b583ef1a631e85@osgeo.org>

#529: SimpleSnapRounder performs bogus noding
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 I've committed a GeometryNoder class with r3593 with which doing some
 noding tests. If I try to use SimpleSnapRounder noder rather than the
 IteratedNoder (or SimpleNoder) I get a completely wrong answer on the
 simpest case:

 {{{
 LINESTRING(0 0, 10 10, 10 0, 0 10)
 }}}

 There's something deeply wrong in the code and the whole Noding interface
 is overly confusing (probably due to memory management not correctly
 ported).

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/529>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sun Apr  8 13:09:20 2012
From: geos-trac at osgeo.org (GEOS)
Date: Sun Apr  8 13:10:16 2012
Subject: [geos-devel] Re: [GEOS] #529: SimpleSnapRounder performs bogus
	noding
In-Reply-To: <044.cae537068d0bc4dc50b583ef1a631e85@osgeo.org>
References: <044.cae537068d0bc4dc50b583ef1a631e85@osgeo.org>
Message-ID: <053.cecd756c75351877e328556061eb0acf@osgeo.org>

#529: SimpleSnapRounder performs bogus noding
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 The problem here was with misuse. SimpleSnapRounder, as all snap-rounding
 noders using HotPixel class, can only work with a FIXED PrecisionModel.
 FLOATING precision models break HotPixel and thus all its users.

 Will leave this ticket open until HotPixel is equipped with a control to
 throw IllegalArgumentException on a 0 scale.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/529#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Apr 10 10:57:47 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue Apr 10 10:58:14 2012
Subject: [geos-devel] Re: [GEOS] #526: Port JTS bugfix to
	GeometryPrecisionReducer
In-Reply-To: <044.427567335d1d7e2b6e55b084fd43e397@osgeo.org>
References: <044.427567335d1d7e2b6e55b084fd43e397@osgeo.org>
Message-ID: <053.2958bb5584bda3c132d2c4411e8dcf69@osgeo.org>

#526: Port JTS bugfix to GeometryPrecisionReducer
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.4.0                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * version:  3.3.3 => svn-trunk
  * resolution:  => fixed
  * milestone:  3.3.4 => 3.4.0


Comment:

 Ported class and regression test for the first time in 3.4 branch (trunk,
 r3605)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/526#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Apr 10 11:07:00 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue Apr 10 11:07:09 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.ac056acbd5c846f22fe4ed04cd773c24@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 With r3606 in 3.3 branch and r3607 in trunk the binary union is enhanced
 to always re-union (self union) the results of operations to which common
 bits are re-added. Doing so fixes this case and the PostGIS case
 http://trac.osgeo.org/postgis/ticket/1735

 Unary union itself is still not fixed in that it takes a different path
 (doesn't use BinaryOp).
 May be worth updating it to use BinaryOp as well, but must be aware of
 possible infinite loops as one would be calling the other...

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:10>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Apr 10 11:17:24 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue Apr 10 11:18:08 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.cb61e9ca6b296b3ab2f3333c3b897d6e@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 r3608 in 3.3 branch and r3609 in trunk/3.4 also switch unary union over.
 I'll work on an automated testcase before closing this.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:11>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Apr 10 11:59:05 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue Apr 10 11:59:24 2012
Subject: [geos-devel] Re: [GEOS] #527: Union and UnaryUnion both fail at
 correctly node input lines
In-Reply-To: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
References: <044.2b2220f1dfff4885a04b8494a58c3232@osgeo.org>
Message-ID: <053.e509af1584b4f7b2699a894df027a9a3@osgeo.org>

#527: Union and UnaryUnion both fail at correctly node input lines
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.3.4                     
Component:  Default     |      Version:  3.3.3                     
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 r3610 / r3611 add a testcase for this (3.3 / trunk)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/527#comment:12>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Apr 10 13:02:23 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue Apr 10 13:02:49 2012
Subject: [geos-devel] Re: [GEOS] #529: SimpleSnapRounder performs bogus
	noding
In-Reply-To: <044.cae537068d0bc4dc50b583ef1a631e85@osgeo.org>
References: <044.cae537068d0bc4dc50b583ef1a631e85@osgeo.org>
Message-ID: <053.aaf16832b5effe870ddab6e057793cae@osgeo.org>

#529: SimpleSnapRounder performs bogus noding
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.4.0                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  invalid                   
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => invalid


Comment:

 r3612 adds an assertion in HotPixel

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/529#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Apr 10 13:06:42 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue Apr 10 13:07:27 2012
Subject: [geos-devel] Re: [GEOS] #507: Postgres crash in geos 3.3.0 using
 postgis st_buffer function
In-Reply-To: <047.bc0d51feb60f44db8167fac566d86de1@osgeo.org>
References: <047.bc0d51feb60f44db8167fac566d86de1@osgeo.org>
Message-ID: <056.59fd41b7b8a7930cdc05634c12934870@osgeo.org>

#507: Postgres crash in geos 3.3.0 using postgis st_buffer function
----------------------+-----------------------------------------------------
 Reporter:  luisico   |       Owner:  geos-devel@?              
     Type:  defect    |      Status:  new                       
 Priority:  minor     |   Milestone:  3.3.4                     
Component:  Default   |     Version:  3.3.0                     
 Severity:  Critical  |    Keywords:                            
----------------------+-----------------------------------------------------

Comment(by strk):

 luisico: can you provide a dump or shapefile of the gadm0 table ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/507#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From candia234 at hotmail.com  Tue Apr 10 17:52:11 2012
From: candia234 at hotmail.com (Gloria Candia Cuno)
Date: Tue Apr 10 17:52:45 2012
Subject: [geos-devel] Muse Fan
Message-ID: <SNT139-W6144E7F797AFB40AA791A7FA340@phx.gbl>


Plum color 

I have a Japanese friend told me that he worked in a Japanese company. I visited the company he worked for and found the products very favorable. And there are many product versions, such as the European version, American version, and the Asian version and so on. All company's products take photos for the true products. I suggest you should have a look at this website. This is the company?s website:  www.metobuy.com. You can enjoy a lot of benefits in the shortest shopping time. The company?s email address is: 
Email?metobuy@188.com
MSN?metobuy@hotmail.com
 What is Friendship? Language teacher it is a version of the newspaper, always have a new message; physics teacher said it was no telegraph key in the circuit, always an effective response; math teacher said that it is fixed no fixed length of track, never be terminated; We say that friendship is in a dry spring, always full of vitality. ? ?  		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20120410/3bdae1cb/attachment.html
From alex.trofast at actian.com  Wed Apr 11 11:33:42 2012
From: alex.trofast at actian.com (Alex Trofast)
Date: Wed Apr 11 11:34:33 2012
Subject: [geos-devel] GEOSEnvelope and getting Max/Min X/Y
Message-ID: <4F85A456.90509@actian.com>

Greetings,

When you have an envelope created from GEOSEnvelope (all using the CAPI) 
what is the best and easiest way to grab the max and min x/y? CoordSeq? 
I see in the C++ envelope class there is a getMaxX, GetMaxY and so on.
Any help greatly appreciated.

Thanks,

-- 
Alex
http://bit.ly/geodb

From strk at keybit.net  Wed Apr 11 11:36:10 2012
From: strk at keybit.net (Sandro Santilli)
Date: Wed Apr 11 11:37:00 2012
Subject: [geos-devel] GEOSEnvelope and getting Max/Min X/Y
In-Reply-To: <4F85A456.90509@actian.com>
References: <4F85A456.90509@actian.com>
Message-ID: <20120411153610.GC11364@gnash>

On Wed, Apr 11, 2012 at 11:33:42AM -0400, Alex Trofast wrote:
> Greetings,
> 
> When you have an envelope created from GEOSEnvelope (all using the
> CAPI) what is the best and easiest way to grab the max and min x/y?
> CoordSeq? I see in the C++ envelope class there is a getMaxX,
> GetMaxY and so on.
> Any help greatly appreciated.

Yeah, no ENVELOPE class in C-API, it's a normal geometry, so a polygon.
You'll have to loop over the coordinates and do the comparison yourself.

--strk; 

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

From geos-trac at osgeo.org  Thu Apr 12 03:49:21 2012
From: geos-trac at osgeo.org (GEOS)
Date: Thu Apr 12 03:49:56 2012
Subject: [geos-devel] [GEOS] #530: Overlay crash with input having NaN
	ordinate values
Message-ID: <044.ccc309362cf5eb6b2d7dd458dabeffb2@osgeo.org>

#530: Overlay crash with input having NaN ordinate values
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 {{{

 pg15=# select ST_Difference(
 '010200000002000000000000000000F8FF000000000000F8FF0000000000000000000000000000F03F',
 'POINT(1 1)' );
 The connection to the server was lost. Attempting reset: Failed.
 !>
 }}}

 The HEXWKB represent a line with a NaN coordinate.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/530>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu Apr 12 03:50:23 2012
From: geos-trac at osgeo.org (GEOS)
Date: Thu Apr 12 03:51:01 2012
Subject: [geos-devel] Re: [GEOS] #530: Overlay crash with input having NaN
	ordinate values
In-Reply-To: <044.ccc309362cf5eb6b2d7dd458dabeffb2@osgeo.org>
References: <044.ccc309362cf5eb6b2d7dd458dabeffb2@osgeo.org>
Message-ID: <053.e3d66a6615be570c7c4632283d1513da@osgeo.org>

#530: Overlay crash with input having NaN ordinate values
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Origin: http://trac.osgeo.org/postgis/ticket/1773#comment:2 (to be closed
 when fixed here)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/530#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu Apr 12 03:52:44 2012
From: geos-trac at osgeo.org (GEOS)
Date: Thu Apr 12 03:53:33 2012
Subject: [geos-devel] [GEOS] #531: UnaryUnion of an line collapsed to a
 point returns EMPTY
Message-ID: <044.1f55e533a01c1b3e0babb3fe44b3d40b@osgeo.org>

#531: UnaryUnion of an line collapsed to a point returns EMPTY
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.4                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 If you pass a collapsed line to UnaryUnion it becomes EMPTY.
 I would expect it to become a point instead.

 Example input: MULTILINESTRING((0 1,0 1,0 1,0 1))

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/531>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From JFORMONT at siradel.com  Fri Apr 13 05:52:20 2012
From: JFORMONT at siradel.com (Jasmin FORMONT)
Date: Fri Apr 13 06:03:50 2012
Subject: [geos-devel] polygon with overlapping edges
Message-ID: <4DDD462E988B52488DA728A04EF7C57454DEDBE831@Eucles.Siradel.local>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: overlapping_polygon.dxf
Type: application/octet-stream
Size: 15406 bytes
Desc: overlapping_polygon.dxf
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20120413/6e4ac9ee/overlapping_polygon.obj
From strk at keybit.net  Fri Apr 13 08:39:41 2012
From: strk at keybit.net (Sandro Santilli)
Date: Fri Apr 13 08:40:32 2012
Subject: [geos-devel] polygon with overlapping edges
In-Reply-To: <4DDD462E988B52488DA728A04EF7C57454DEDBE831@Eucles.Siradel.local>
References: <4DDD462E988B52488DA728A04EF7C57454DEDBE831@Eucles.Siradel.local>
Message-ID: <20120413123941.GJ10344@gnash>

On Fri, Apr 13, 2012 at 11:52:20AM +0200, Jasmin FORMONT wrote:
> Hi everyone
> 
> I am currently testing some GEOS features.
> I am having trouble with polygons with overlapping edges. You can see attached an example of what I use (dxf file).
> When loaded as a GEOS polygon, it is considered not valid. Is there any way to avoid this problem ? Maybe a GEOS function making this polygon
> valid by slightly moving some points ?
> 
> I have no influence on the input polygons, they are produced like that by our production chain and changing this is not an option.
> 
> thanks for any tip

Try a buffer with distance 0.
Or try PostGIS 2.0 (has an ST_MakeValid function).

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

From JFORMONT at siradel.com  Fri Apr 13 09:48:20 2012
From: JFORMONT at siradel.com (Jasmin FORMONT)
Date: Fri Apr 13 09:48:51 2012
Subject: [geos-devel] polygon with overlapping edges
In-Reply-To: <20120413123941.GJ10344@gnash>
References: <4DDD462E988B52488DA728A04EF7C57454DEDBE831@Eucles.Siradel.local>
	<20120413123941.GJ10344@gnash>
Message-ID: <4DDD462E988B52488DA728A04EF7C57454DEDBE846@Eucles.Siradel.local>

I tried a buffer(0), but it splits my geometry in two separate polygons. And I can't use postgis.

But is it a normal behavior that this kind of polygon is not supported ? I didn't explain the error I get : when I try to apply a difference (or any topologic operation) on this polygon with another (a "regular" one), it throws a TopologyException: side location conflict.

-----Message d'origine-----
De?: geos-devel-bounces@lists.osgeo.org [mailto:geos-devel-bounces@lists.osgeo.org] De la part de Sandro Santilli
Envoy??: vendredi 13 avril 2012 14:40
??: GEOS Development List
Objet?: Re: [geos-devel] polygon with overlapping edges

On Fri, Apr 13, 2012 at 11:52:20AM +0200, Jasmin FORMONT wrote:
> Hi everyone
> 
> I am currently testing some GEOS features.
> I am having trouble with polygons with overlapping edges. You can see attached an example of what I use (dxf file).
> When loaded as a GEOS polygon, it is considered not valid. Is there any way to avoid this problem ? Maybe a GEOS function making this polygon
> valid by slightly moving some points ?
> 
> I have no influence on the input polygons, they are produced like that by our production chain and changing this is not an option.
> 
> thanks for any tip

Try a buffer with distance 0.
Or try PostGIS 2.0 (has an ST_MakeValid function).

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
From mateusz at loskot.net  Fri Apr 13 10:12:26 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Apr 13 10:13:19 2012
Subject: [geos-devel] polygon with overlapping edges
In-Reply-To: <4DDD462E988B52488DA728A04EF7C57454DEDBE846@Eucles.Siradel.local>
References: <4DDD462E988B52488DA728A04EF7C57454DEDBE831@Eucles.Siradel.local>
	<20120413123941.GJ10344@gnash>
	<4DDD462E988B52488DA728A04EF7C57454DEDBE846@Eucles.Siradel.local>
Message-ID: <CABUeae_BRUhZnAhrYqHo_VdstOGLADS_Z5cvdk9M+u-po5aoFQ@mail.gmail.com>

On 13 April 2012 14:48, Jasmin FORMONT <JFORMONT@siradel.com> wrote:
> I tried a buffer(0), but it splits my geometry in two separate polygons.

IMHO, that's most reasonable result you can get with GEOS.

> But is it a normal behavior that this kind of polygon is not supported ?

Yes, because this polygon is not simple, thus not valid according to
OGC SF spec.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From JFORMONT at siradel.com  Fri Apr 13 10:59:48 2012
From: JFORMONT at siradel.com (Jasmin FORMONT)
Date: Fri Apr 13 11:00:36 2012
Subject: [geos-devel] polygon with overlapping edges
In-Reply-To: <CABUeae_BRUhZnAhrYqHo_VdstOGLADS_Z5cvdk9M+u-po5aoFQ@mail.gmail.com>
References: <4DDD462E988B52488DA728A04EF7C57454DEDBE831@Eucles.Siradel.local>
	<20120413123941.GJ10344@gnash>
	<4DDD462E988B52488DA728A04EF7C57454DEDBE846@Eucles.Siradel.local>
	<CABUeae_BRUhZnAhrYqHo_VdstOGLADS_Z5cvdk9M+u-po5aoFQ@mail.gmail.com>
Message-ID: <4DDD462E988B52488DA728A04EF7C57454DEDBE84F@Eucles.Siradel.local>

Ok, thanks for your answers
Jasmin

-----Message d'origine-----
De?: geos-devel-bounces@lists.osgeo.org [mailto:geos-devel-bounces@lists.osgeo.org] De la part de Mateusz Loskot
Envoy??: vendredi 13 avril 2012 16:12
??: GEOS Development List
Objet?: Re: [geos-devel] polygon with overlapping edges

On 13 April 2012 14:48, Jasmin FORMONT <JFORMONT@siradel.com> wrote:
> I tried a buffer(0), but it splits my geometry in two separate polygons.

IMHO, that's most reasonable result you can get with GEOS.

> But is it a normal behavior that this kind of polygon is not supported ?

Yes, because this polygon is not simple, thus not valid according to
OGC SF spec.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
From JFORMONT at siradel.com  Wed Apr 18 11:05:21 2012
From: JFORMONT at siradel.com (Jasmin FORMONT)
Date: Wed Apr 18 11:05:38 2012
Subject: [geos-devel] polygon snapping
Message-ID: <4DDD462E988B52488DA728A04EF7C57454DEDBE931@Eucles.Siradel.local>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: snap.dxf
Type: application/octet-stream
Size: 15815 bytes
Desc: snap.dxf
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20120418/c167f1a1/snap-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: res_snap.dxf
Type: application/octet-stream
Size: 15915 bytes
Desc: res_snap.dxf
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20120418/c167f1a1/res_snap-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: actual_snap.dxf
Type: application/octet-stream
Size: 14366 bytes
Desc: actual_snap.dxf
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20120418/c167f1a1/actual_snap-0001.obj
From strk at keybit.net  Wed Apr 18 11:11:30 2012
From: strk at keybit.net (Sandro Santilli)
Date: Wed Apr 18 11:12:09 2012
Subject: [geos-devel] polygon snapping
In-Reply-To: <4DDD462E988B52488DA728A04EF7C57454DEDBE931@Eucles.Siradel.local>
References: <4DDD462E988B52488DA728A04EF7C57454DEDBE931@Eucles.Siradel.local>
Message-ID: <20120418151130.GJ3163@gnash>

Use the C-API: GEOSnap(which, to_which, tolerance)

--strk;

On Wed, Apr 18, 2012 at 05:05:21PM +0200, Jasmin FORMONT wrote:
> Hi everyone
> 
> I'm trying to snap some polygons together. You can see attached the base situation (snap.dxf), what I'd like to obtain (or something similar to this, res_snap.dxf) and the best I can  get(actual_snap.dxf).
> So far I managed to have two polygons snapped together, but the 3rd one never obey my orders :)
> 
> I don't really understand how the GeometrySnapper object I create works. I use the method snap(Geometry, Geometry, double, GeomPtrPair). I've seen the method snapTo but I can't get it to actually do something.
> 
> Could someone explain what would be a good method to obtain something similar to what I want ?
> Thanks
From JFORMONT at siradel.com  Thu Apr 19 04:04:08 2012
From: JFORMONT at siradel.com (Jasmin FORMONT)
Date: Thu Apr 19 04:04:16 2012
Subject: [geos-devel] polygon snapping
In-Reply-To: <20120418151130.GJ3163@gnash>
References: <4DDD462E988B52488DA728A04EF7C57454DEDBE931@Eucles.Siradel.local>
	<20120418151130.GJ3163@gnash>
Message-ID: <4DDD462E988B52488DA728A04EF7C57454DEDBE948@Eucles.Siradel.local>

I don't understand how to use initGEOS(). What is a GEOSMessageHandler ?

-----Message d'origine-----
De?: geos-devel-bounces@lists.osgeo.org [mailto:geos-devel-bounces@lists.osgeo.org] De la part de Sandro Santilli
Envoy??: mercredi 18 avril 2012 17:11
??: GEOS Development List
Objet?: Re: [geos-devel] polygon snapping

Use the C-API: GEOSnap(which, to_which, tolerance)

--strk;

On Wed, Apr 18, 2012 at 05:05:21PM +0200, Jasmin FORMONT wrote:
> Hi everyone
> 
> I'm trying to snap some polygons together. You can see attached the base situation (snap.dxf), what I'd like to obtain (or something similar to this, res_snap.dxf) and the best I can  get(actual_snap.dxf).
> So far I managed to have two polygons snapped together, but the 3rd one never obey my orders :)
> 
> I don't really understand how the GeometrySnapper object I create works. I use the method snap(Geometry, Geometry, double, GeomPtrPair). I've seen the method snapTo but I can't get it to actually do something.
> 
> Could someone explain what would be a good method to obtain something similar to what I want ?
> Thanks
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
From strk at keybit.net  Thu Apr 19 04:37:22 2012
From: strk at keybit.net (Sandro Santilli)
Date: Thu Apr 19 04:37:36 2012
Subject: [geos-devel] polygon snapping
In-Reply-To: <4DDD462E988B52488DA728A04EF7C57454DEDBE948@Eucles.Siradel.local>
References: <4DDD462E988B52488DA728A04EF7C57454DEDBE931@Eucles.Siradel.local>
	<20120418151130.GJ3163@gnash>
	<4DDD462E988B52488DA728A04EF7C57454DEDBE948@Eucles.Siradel.local>
Message-ID: <20120419083722.GB25859@gnash>

On Thu, Apr 19, 2012 at 10:04:08AM +0200, Jasmin FORMONT wrote:
> I don't understand how to use initGEOS(). What is a GEOSMessageHandler ?

A function taking a format string and an arbitrary number of 
variables. Same signature as printf()

--strk;
From geos-trac at osgeo.org  Thu Apr 19 05:42:16 2012
From: geos-trac at osgeo.org (GEOS)
Date: Thu Apr 19 05:42:39 2012
Subject: [geos-devel] [GEOS] #532: Extend GEOSGetCentroid for Z dimension
Message-ID: <047.12dca32e8865b08fd6731bd85c1d47c4@osgeo.org>

#532: Extend GEOSGetCentroid for Z dimension
------------------------+---------------------------------------------------
 Reporter:  mwtoews     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Extend `GEOSGetCentroid` to calculate the Z component of a centroid from
 3D geometries.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/532>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu Apr 19 09:03:44 2012
From: geos-trac at osgeo.org (GEOS)
Date: Thu Apr 19 09:04:17 2012
Subject: [geos-devel] Re: [GEOS] #532: Extend GEOSGetCentroid for Z dimension
In-Reply-To: <047.12dca32e8865b08fd6731bd85c1d47c4@osgeo.org>
References: <047.12dca32e8865b08fd6731bd85c1d47c4@osgeo.org>
Message-ID: <056.f3ec7a11b339f2bd49302ff105631344@osgeo.org>

#532: Extend GEOSGetCentroid for Z dimension
------------------------+---------------------------------------------------
 Reporter:  mwtoews     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by mwtoews):

 Updating `CentroidPoint.cpp` and `CentroidLine.cpp` is straight-forward,
 and the results work with the C-API (via PostGIS). However, I'm stumped on
 `CentroidArea.cpp`, in particular
 [http://trac.osgeo.org/geos/browser/trunk/src/algorithm/CentroidArea.cpp#L144
 CentroidArea::area2]. The linear rings would really need to be co-planar
 to have a true 3D areal feature (is this part of `isValid()`?).

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/532#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From curtis.jones at gmail.com  Thu Apr 19 17:27:29 2012
From: curtis.jones at gmail.com (Curtis Jones)
Date: Thu Apr 19 17:28:09 2012
Subject: [geos-devel] Shortest Line Between Two Polygons
Message-ID: <66653B56-A05A-408F-9669-882F262FEF83@gmail.com>

I just started using GEOS (C API) yesterday, so I'm probably missing the obvious answer. Given two polygons, I'd like to get a line that connects the two closest points of those polygons; or, more specifically, the point on polygon 2 that is closest to polygon 1.

While trying to find the best way to do this I found that PostGIS has an ST_ShortestLine(<geom1>, <geom2>) function, so I dug into its implementation. It's not a trivial amount of code.

Is there a GEOS-provided method of accomplishing this?

Any help would be appreciated. Thanks.

--
Curtis Jones
curtis.jones@gmail.com

From chodgson at refractions.net  Thu Apr 19 17:33:40 2012
From: chodgson at refractions.net (Chris Hodgson)
Date: Thu Apr 19 17:33:50 2012
Subject: [geos-devel] Shortest Line Between Two Polygons
In-Reply-To: <66653B56-A05A-408F-9669-882F262FEF83@gmail.com>
References: <66653B56-A05A-408F-9669-882F262FEF83@gmail.com>
Message-ID: <4F9084B4.5030307@refractions.net>

Alternatively you could look at the distance function in GEOS or Postgis 
- it's probably a similarly large amount of code - but it must find the 
closest points on the two inputs in order to calculate the distance, all 
you need to do is grab those points and put them together as a line.

Chris

On 12-04-19 02:27 PM, Curtis Jones wrote:
> I just started using GEOS (C API) yesterday, so I'm probably missing the obvious answer. Given two polygons, I'd like to get a line that connects the two closest points of those polygons; or, more specifically, the point on polygon 2 that is closest to polygon 1.
>
> While trying to find the best way to do this I found that PostGIS has an ST_ShortestLine(<geom1>,<geom2>) function, so I dug into its implementation. It's not a trivial amount of code.
>
> Is there a GEOS-provided method of accomplishing this?
>
> Any help would be appreciated. Thanks.
>
> --
> Curtis Jones
> curtis.jones@gmail.com
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From jochen at remote.org  Fri Apr 27 13:46:00 2012
From: jochen at remote.org (Jochen Topf)
Date: Fri Apr 27 13:46:30 2012
Subject: [geos-devel] Line intersections
Message-ID: <20120427174600.GA22244@eldorado.topf.org>

Hi!

I have a dataset with hundreds of thousands of linestrings and want to find any
intersections between those linestrings. There will only be a few
intersections.

Any suggestions on how to do this efficiently with GEOS?

Jochen
-- 
Jochen Topf  jochen@remote.org  http://www.remote.org/jochen/  +49-721-388298

From chodgson at refractions.net  Fri Apr 27 14:32:34 2012
From: chodgson at refractions.net (Chris Hodgson)
Date: Fri Apr 27 14:32:56 2012
Subject: [geos-devel] Line intersections
In-Reply-To: <20120427174600.GA22244@eldorado.topf.org>
References: <20120427174600.GA22244@eldorado.topf.org>
Message-ID: <4F9AE642.8070702@refractions.net>

Jochen,

I'll have to admit, I'm not sure exactly what functions you want to use 
in GEOS to do this, but from an algorithmic standpoint I suggest the 
following line of reasoning:

- depending on how long your linestrings are, and how big a machine you 
have, they may or may not be able to fit all in memory
   - if they all fit in memory:
     - build an index on them
     - loop over them, using the index to retrieve a list of all the 
linestrings that overlap the bounding box of the current linestring
     - loop over all those and test for intersection with the current

   - if they don't all fit in memory:
     - put them in postgis and use a single SQL query to do the same 
logic as above (this also works even if they do fit in memory :)
     - alternatively, create a grid where within each cell is a number 
of linestrings that will fit in memory, and for each cell, retrieve 
linestrings that overlap that cell (brute force) and use the above 
algorithm (make the cells as large as possible so there are fewer of 
them so you don't have to spend to much time finding all the linestrings 
that overlap each cell)

- one other thing to consider is the degree of entanglement of your 
linestrings, that is, how many linestrings' bounding boxes do you expect 
to overlap the bounding box of any given linestring? eg. low 
entanglement would be the line segments of a downtown city road network, 
high entanglement might be contour lines, depending on how they're 
modeled. If you have high entanglement, it might serve to break down all 
the linestrings into smaller pieces, possibly even into 2-point line 
segments which are really easy to test, before doing either of the above 
approaches. The idea here is to minimize the number of intersection 
tests between large linestrings.

Cheers,
Chris


On 12-04-27 10:46 AM, Jochen Topf wrote:
> Hi!
>
> I have a dataset with hundreds of thousands of linestrings and want to find any
> intersections between those linestrings. There will only be a few
> intersections.
>
> Any suggestions on how to do this efficiently with GEOS?
>
> Jochen

From warmerdam at pobox.com  Sat Apr 28 23:03:42 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Apr 28 23:03:52 2012
Subject: [geos-devel] GEOS Graduates OSGeo Incubation
Message-ID: <4F9CAF8E.6030809@pobox.com>

OSGeo is pleased to announce that the GEOS project has graduated from
the incubation process and is now a full fledged OSGeo project with
Sandro Santilli appointed as project representative (Vice President,
GEOS).

GEOS is C++ port of the Java Topology Suite (JTS). As such, it aims to
contain the complete functionality of JTS in C++. This includes all the
OpenGIS Simple Features for SQL spatial predicate functions and spatial
operators, as well as specific JTS enhanced topology functions.

   http://geos.osgeo.org/

Graduating incubation includes requirements for open community operation,
a responsible project governance model, code provenance and license
verification and general good project operation. Graduating incubation
is the OSGeo seal of approval for a project and gives potential users of
the project added confidence in the viability and safety of the project.

   http://www.osgeo.org/incubator/
From jochen at remote.org  Sun Apr 29 16:05:06 2012
From: jochen at remote.org (Jochen Topf)
Date: Sun Apr 29 16:05:46 2012
Subject: [geos-devel] Line intersections
In-Reply-To: <4F9AE642.8070702@refractions.net>
References: <20120427174600.GA22244@eldorado.topf.org>
	<4F9AE642.8070702@refractions.net>
Message-ID: <20120429200506.GA3344@eldorado.topf.org>

Hi!

thanks for the suggestions. All of that seems rather expensive to me. So in the
end I wrote the intersection check myself: Create std::vector with all line
segments, sort the vector. Go through the vector in two nested loops. Outer
loop goes through all segments, inner starts from position of outer plus one
until it finds a segment thats outside the envelope of first segment. Check
for intersection with usual line segment intersection check.

Nearly 30 million segments fit easily into memory and the whole things takes
not even 30 seconds including reading in of data etc.

Jochen

On Fri, Apr 27, 2012 at 11:32:34AM -0700, Chris Hodgson wrote:
> Date: Fri, 27 Apr 2012 11:32:34 -0700
> From: Chris Hodgson <chodgson@refractions.net>
> To: GEOS Development List <geos-devel@lists.osgeo.org>
> Subject: Re: [geos-devel] Line intersections
> 
> Jochen,
> 
> I'll have to admit, I'm not sure exactly what functions you want to
> use in GEOS to do this, but from an algorithmic standpoint I suggest
> the following line of reasoning:
> 
> - depending on how long your linestrings are, and how big a machine
> you have, they may or may not be able to fit all in memory
>   - if they all fit in memory:
>     - build an index on them
>     - loop over them, using the index to retrieve a list of all the
> linestrings that overlap the bounding box of the current linestring
>     - loop over all those and test for intersection with the current
> 
>   - if they don't all fit in memory:
>     - put them in postgis and use a single SQL query to do the same
> logic as above (this also works even if they do fit in memory :)
>     - alternatively, create a grid where within each cell is a
> number of linestrings that will fit in memory, and for each cell,
> retrieve linestrings that overlap that cell (brute force) and use
> the above algorithm (make the cells as large as possible so there
> are fewer of them so you don't have to spend to much time finding
> all the linestrings that overlap each cell)
> 
> - one other thing to consider is the degree of entanglement of your
> linestrings, that is, how many linestrings' bounding boxes do you
> expect to overlap the bounding box of any given linestring? eg. low
> entanglement would be the line segments of a downtown city road
> network, high entanglement might be contour lines, depending on how
> they're modeled. If you have high entanglement, it might serve to
> break down all the linestrings into smaller pieces, possibly even
> into 2-point line segments which are really easy to test, before
> doing either of the above approaches. The idea here is to minimize
> the number of intersection tests between large linestrings.
> 
> Cheers,
> Chris
> 
> 
> On 12-04-27 10:46 AM, Jochen Topf wrote:
> >Hi!
> >
> >I have a dataset with hundreds of thousands of linestrings and want to find any
> >intersections between those linestrings. There will only be a few
> >intersections.
> >
> >Any suggestions on how to do this efficiently with GEOS?
> >
> >Jochen
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> 

-- 
Jochen Topf  jochen@remote.org  http://www.remote.org/jochen/  +49-721-388298

