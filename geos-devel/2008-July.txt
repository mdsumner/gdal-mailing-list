From anders.moe at geocap.no  Tue Jul 15 06:06:12 2008
From: anders.moe at geocap.no (Anders Moe)
Date: Tue Jul 15 06:07:15 2008
Subject: [geos-devel] 
	Problems compiling GEOS on windows, missing *.inl files
In-Reply-To: <OF46B827E9.53FD714D-ON85257486.004D1AC6-85257486.004DB18C@un.org>
References: <BLU111-W14F01A88E212E28F6366BCF28D0@phx.gbl>
	<OF46B827E9.53FD714D-ON85257486.004D1AC6-85257486.004DB18C@un.org>
Message-ID: <BLU111-W48AEDDD9CCB322B747CDEEF28C0@phx.gbl>

 
I've downloaded the SVN nightly, but I'm experiencing several problems (using VC 2005)
 
1) The dirlist.mk file doesn't exist, so the make immediately fails. I had to remove the 
 
!INCLUDE dirlist.mk
 
statement from makefile.vc
 
2) I then get lots of errors because the *.inl files are missing. I did get a compile simply by commenting out statements like
 
#include myfil.inl
 
but ended up getting a lot of linking errors at the end. 
 
Same problem with 3.0. Is GEOS supported at all on windows ? 
 
Cheers, 
 
Anders. 
 
________________________________________________________Anders Moe
Software Integration ManagerGeocapw: +47 22 95 56 66
anders.moe@geocap.no________________________________________________________
 
_________________________________________________________________
Hold kontakten med Windows Live Messenger.
http://clk.atdmt.com/GBL/go/msnnkdre0010000003gbl/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080715/bbffbfc0/attachment.html
From mateusz at loskot.net  Tue Jul 15 06:27:10 2008
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Tue Jul 15 06:27:17 2008
Subject: [geos-devel] Problems compiling GEOS on windows, missing *.inl
	files
In-Reply-To: <BLU111-W48AEDDD9CCB322B747CDEEF28C0@phx.gbl>
References: <BLU111-W14F01A88E212E28F6366BCF28D0@phx.gbl>	<OF46B827E9.53FD714D-ON85257486.004D1AC6-85257486.004DB18C@un.org>
	<BLU111-W48AEDDD9CCB322B747CDEEF28C0@phx.gbl>
Message-ID: <487C7B7E.2030106@loskot.net>

Anders Moe pisze:
> I've downloaded the SVN nightly, but I'm experiencing several
> problems (using VC 2005)
> 
> 1) The dirlist.mk file doesn't exist, so the make immediately fails.
> I had to remove the
> 
> !INCLUDE dirlist.mk
> 
> statement from makefile.vc


I don't know what is the exact procedure generating SVN Nightly 
packages, but perhaps it's broken.
So, I'd suggest to get sources directly from SVN trunk:

svn checkout http://svn.osgeo.org/geos/trunk geos-svn

dirlist.mk file is available in SVN trunk (I've confirmed).

> 2) I then get lots of errors because the *.inl files are missing. I
> did get a compile simply by commenting out statements like
> 
> #include myfil.inl
> 
> but ended up getting a lot of linking errors at the end.
> 
> Same problem with 3.0. Is GEOS supported at all on windows ?

Yes, GEOS is supported on Windows with Visual C++ compiler, for sure.
Please, tell me what steps you have taken to build it, what commands?
Verify, if it looks like this:

http://trac.osgeo.org/geos/wiki/WikiStart#Windows

All commands are supposed to be issued from the top-level directory,
the same where bootstrap.bat lives.


However, I've checked and can confirm that the geos-3.0.0.tar.bz2 
package is incomplete. The dirlist.mak and bootstrap.bat files are not 
included. The procedure generating .tar.gz/.zip package obviously need 
to be updated to include missing files.

Paul, could you check it?

Regards
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Tue Jul 15 06:30:17 2008
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Tue Jul 15 06:30:24 2008
Subject: [geos-devel] Problems compiling GEOS on windows, missing *.inl
	files
In-Reply-To: <487C7B7E.2030106@loskot.net>
References: <BLU111-W14F01A88E212E28F6366BCF28D0@phx.gbl>	<OF46B827E9.53FD714D-ON85257486.004D1AC6-85257486.004DB18C@un.org>	<BLU111-W48AEDDD9CCB322B747CDEEF28C0@phx.gbl>
	<487C7B7E.2030106@loskot.net>
Message-ID: <487C7C39.3020506@loskot.net>

Mateusz ?oskot pisze:
> However, I've checked and can confirm that the geos-3.0.0.tar.bz2 
> package is incomplete. The dirlist.mak and bootstrap.bat files are not 
> included. The procedure generating .tar.gz/.zip package obviously need 
> to be updated to include missing files.
> 
> Paul, could you check it?

Looks like it has been reported already:

http://trac.osgeo.org/geos/ticket/179

Ciao
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From anders.moe at geocap.no  Tue Jul 15 07:09:24 2008
From: anders.moe at geocap.no (Anders Moe)
Date: Tue Jul 15 07:09:27 2008
Subject: [geos-devel] Problems compiling GEOS on windows, missing *.inl
	files
In-Reply-To: <487C7B7E.2030106@loskot.net>
References: <BLU111-W14F01A88E212E28F6366BCF28D0@phx.gbl>
	<OF46B827E9.53FD714D-ON85257486.004D1AC6-85257486.004DB18C@un.org>
	<BLU111-W48AEDDD9CCB322B747CDEEF28C0@phx.gbl>
	<487C7B7E.2030106@loskot.net>
Message-ID: <BLU111-W157BED3FD05D7DA374C566F28C0@phx.gbl>

 
Thanks a lot! Everything worked when I checked out using svn rather than using the nightly tarball.
 
For the record, I used VC2008 on Vista64 this time.
 
Again, thanks for a quick reply.
Cheers, 
 
Anders
________________________________________________________Anders Moe
Software Integration ManagerGeocapw: +47 22 95 56 66
anders.moe@geocap.no________________________________________________________
 

> Date: Tue, 15 Jul 2008 12:27:10 +0200> From: mateusz@loskot.net> To: geos-devel@lists.osgeo.org> Subject: Re: [geos-devel] Problems compiling GEOS on windows, missing *.inl files> > Anders Moe pisze:> > I've downloaded the SVN nightly, but I'm experiencing several> > problems (using VC 2005)> > > > 1) The dirlist.mk file doesn't exist, so the make immediately fails.> > I had to remove the> > > > !INCLUDE dirlist.mk> > > > statement from makefile.vc> > > I don't know what is the exact procedure generating SVN Nightly > packages, but perhaps it's broken.> So, I'd suggest to get sources directly from SVN trunk:> > svn checkout http://svn.osgeo.org/geos/trunk geos-svn> > dirlist.mk file is available in SVN trunk (I've confirmed).> > > 2) I then get lots of errors because the *.inl files are missing. I> > did get a compile simply by commenting out statements like> > > > #include myfil.inl> > > > but ended up getting a lot of linking errors at the end.> > > > Same problem with 3.0. Is GEOS supported at all on windows ?> > Yes, GEOS is supported on Windows with Visual C++ compiler, for sure.> Please, tell me what steps you have taken to build it, what commands?> Verify, if it looks like this:> > http://trac.osgeo.org/geos/wiki/WikiStart#Windows> > All commands are supposed to be issued from the top-level directory,> the same where bootstrap.bat lives.> > > However, I've checked and can confirm that the geos-3.0.0.tar.bz2 > package is incomplete. The dirlist.mak and bootstrap.bat files are not > included. The procedure generating .tar.gz/.zip package obviously need > to be updated to include missing files.> > Paul, could you check it?> > Regards> -- > Mateusz Loskot, http://mateusz.loskot.net> Charter Member of OSGeo, http://osgeo.org> _______________________________________________> geos-devel mailing list> geos-devel@lists.osgeo.org> http://lists.osgeo.org/mailman/listinfo/geos-devel
_________________________________________________________________
Hold kontakten med Windows Live Messenger.
http://clk.atdmt.com/GBL/go/msnnkdre0010000003gbl/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20080715/bc8340c4/attachment.html
From mateusz at loskot.net  Thu Jul 17 13:13:49 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jul 17 13:13:56 2008
Subject: [geos-devel] Build problems on Solaris
In-Reply-To: <486381BD.3060503@sun.com>
References: <485780F8.3010605@sun.com> <48578803.7000206@loskot.net>
	<486381BD.3060503@sun.com>
Message-ID: <487F7DCD.3000307@loskot.net>

Magne M?hre wrote:
> Mateusz ?oskot wrote:
>> Magne M?hre pisze:
>>> I've raised ticket #186 to address some problems with building
>>> on Solaris, using the Sun compiler suite.
>>>
>>> I can prepare a couple of patches for this.  I guess prepending
>>> namespace specification on those standard library functions that
>>> don't have them should be uncontroversial and unproblematic ?
>>> The same with including <typeinfo> where that isn't done ?
>> Magne,
>>
>> You are more than welcome to provide us with patches fixing GEOS for Sun
>> compiler. Absolutely, using fully qualified names and including missing
>> headers won't break anything, but is more than recommended.
>>
>> Please, attach patches to the Ticket #186
> 
> I've added a patch for this to #186.

Magne,

I've applied your #186 patch to GEOS SVN trunk.

> I've also raised a separate ticket
> for a couple of minor issues with autogen.sh and configure.in
> (Ticket #192)

I'll do my best to check it soon.

Greetings
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From iknowjoseph at gmail.com  Tue Jul 22 11:02:24 2008
From: iknowjoseph at gmail.com (Joseph Reeves)
Date: Tue Jul 22 11:02:29 2008
Subject: [geos-devel] GEOS on Openmoko
Message-ID: <958244340807220802l2c9c47a3ob4959ac0928df24c@mail.gmail.com>

Dear all,

I'm trying to compile SpatiaLite on the Openmoko platform using the toolchain:

http://www.gaia-gis.it/spatialite-2.0/index.html

http://wiki.openmoko.org/wiki/Toolchain

I've cross compiled PROJ.4 without any trouble, but am having issues
with GEOS. Version 3 seems to have particular issues:

joseph@joseph-work:~$ om-conf geos-3.0.0/
Source directory: /home/joseph/geos-3.0.0
Extra configure arguments:
automake (GNU automake) 1.10
Written by Tom Tromey <tromey@redhat.com>
       and Alexandre Duret-Lutz <adl@gnu.org>.

Copyright 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
AUTOV is 1
NOTE: Executing autoreconf --verbose --install --force -I
/home/joseph/geos-3.0.0/ -I /home/joseph/geos-3.0.0/macros/
-I/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal-1
-I /usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal
autoreconf: Entering directory `.'
autoreconf: configure.in: not using Gettext
autoreconf: running: aclocal --force
autoreconf: configure.in: tracing
autoreconf: running: libtoolize --copy --force
autoreconf: running: /usr/bin/autoconf
--include=/home/joseph/geos-3.0.0/
--include=/home/joseph/geos-3.0.0/macros/
--include=/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal-1
--include=/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal
--force --warnings=cross
configure.in:159: error: possibly undefined macro: AC_PROG_SWIG
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
autoreconf: /usr/bin/autoconf failed with exit status: 1
FATAL: autoreconf execution failed.
joseph@joseph-work:~$

So I tried 2.2.3 which configures much better (apologies for all the text) :

joseph@joseph-work:~$ om-conf geos-2.2.3/
Source directory: /home/joseph/geos-2.2.3
Extra configure arguments:
automake (GNU automake) 1.10
Written by Tom Tromey <tromey@redhat.com>
       and Alexandre Duret-Lutz <adl@gnu.org>.

Copyright 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
AUTOV is 1
NOTE: Executing autoreconf --verbose --install --force -I
/home/joseph/geos-2.2.3/ -I /home/joseph/geos-2.2.3/macros/
-I/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal-1
-I /usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal
autoreconf: Entering directory `.'
autoreconf: configure.in: not using Gettext
autoreconf: running: aclocal --force
autoreconf: configure.in: tracing
autoreconf: running: libtoolize --copy --force
autoreconf: running: /usr/bin/autoconf
--include=/home/joseph/geos-2.2.3/
--include=/home/joseph/geos-2.2.3/macros/
--include=/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal-1
--include=/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal
--force --warnings=cross
autoreconf: running: /usr/bin/autoheader
--include=/home/joseph/geos-2.2.3/
--include=/home/joseph/geos-2.2.3/macros/
--include=/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal-1
--include=/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/share/aclocal/aclocal
--force --warnings=cross
autoreconf: running: automake --add-missing --copy --force-missing
--warnings=cross
automake: unknown warning category `cross'
autoreconf: Leaving directory `.'
NOTE: Running /home/joseph/geos-2.2.3/configure
--build=i686-linux              --host=arm-angstrom-linux-gnueabi
         --target=arm-angstrom-linux-gnueabi
--prefix=/usr                   --exec_prefix=/usr
--bindir=/usr/bin               --sbindir=/usr/sbin
 --libexecdir=/usr/libexec                  --datadir=/usr/share
             --sysconfdir=/etc               --sharedstatedir=/usr/com
              --localstatedir=/var
--libdir=/usr/lib                  --includedir=/usr/include
    --oldincludedir=/usr/include
--infodir=/usr/share/info               --mandir=/usr/share/man
                                    ...
checking build system type... i686-pc-linux-gnu
checking host system type... arm-angstrom-linux-gnueabi
checking target system type... arm-angstrom-linux-gnueabi
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for arm-angstrom-linux-gnueabi-strip...
arm-angstrom-linux-gnueabi-strip
checking for arm-angstrom-linux-gnueabi-gcc... ccache
arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=arm920t
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
-mtune=arm920t accepts -g... yes
checking for ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
-mtune=arm920t option to accept ISO C89... none needed
checking for style of include used by make... GNU
checking dependency style of ccache arm-angstrom-linux-gnueabi-gcc
-march=armv4t -mtune=arm920t... gcc3
checking whether we are using the GNU C++ compiler... yes
checking whether ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t
-mtune=arm920t accepts -g... yes
checking dependency style of ccache arm-angstrom-linux-gnueabi-g++
-march=armv4t -mtune=arm920t... gcc3
checking for library containing strerror... none required
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ld used by ccache arm-angstrom-linux-gnueabi-gcc
-march=armv4t -mtune=arm920t... arm-angstrom-linux-gnueabi-ld
checking if the linker (arm-angstrom-linux-gnueabi-ld) is GNU ld... yes
checking for arm-angstrom-linux-gnueabi-ld option to reload object files... -r
checking for BSD-compatible nm...
/usr/local/openmoko/arm/bin/arm-angstrom-linux-gnueabi-nm -B
checking whether ln -s works... yes
checking how to recognize dependent libraries... pass_all
checking how to run the C preprocessor... arm-angstrom-linux-gnueabi-gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking how to run the C++ preprocessor... ccache
arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=arm920t -E
checking for arm-angstrom-linux-gnueabi-g77... ccache
arm-angstrom-linux-gnueabi-g77 -march=armv4t -mtune=arm920t
checking whether we are using the GNU Fortran 77 compiler... no
checking whether ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t
-mtune=arm920t accepts -g... no
checking the maximum length of command line arguments... 98304
checking command to parse
/usr/local/openmoko/arm/bin/arm-angstrom-linux-gnueabi-nm -B output
from ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
-mtune=arm920t object... ok
checking for objdir... .libs
checking for arm-angstrom-linux-gnueabi-ar... arm-angstrom-linux-gnueabi-ar
checking for arm-angstrom-linux-gnueabi-ranlib...
arm-angstrom-linux-gnueabi-ranlib
checking for arm-angstrom-linux-gnueabi-strip... (cached)
arm-angstrom-linux-gnueabi-strip
checking if ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
-mtune=arm920t supports -fno-rtti -fno-exceptions... no
checking for ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
-mtune=arm920t option to produce PIC... -fPIC
checking if ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
-mtune=arm920t PIC flag -fPIC works... yes
checking if ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
-mtune=arm920t static flag -static works... yes
checking if ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
-mtune=arm920t supports -c -o file.o... yes
checking whether the ccache arm-angstrom-linux-gnueabi-gcc
-march=armv4t -mtune=arm920t linker (arm-angstrom-linux-gnueabi-ld)
supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking for shl_load... no
checking for shl_load in -ldld... no
checking for dlopen... no
checking for dlopen in -ldl... yes
checking whether a program can dlopen itself... cross
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by ccache arm-angstrom-linux-gnueabi-g++
-march=armv4t -mtune=arm920t... arm-angstrom-linux-gnueabi-ld
checking if the linker (arm-angstrom-linux-gnueabi-ld) is GNU ld... yes
checking whether the ccache arm-angstrom-linux-gnueabi-g++
-march=armv4t -mtune=arm920t linker (arm-angstrom-linux-gnueabi-ld)
supports shared libraries... yes
checking for ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t
-mtune=arm920t option to produce PIC... -fPIC
checking if ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t
-mtune=arm920t PIC flag -fPIC works... yes
checking if ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t
-mtune=arm920t static flag -static works... yes
checking if ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t
-mtune=arm920t supports -c -o file.o... yes
checking whether the ccache arm-angstrom-linux-gnueabi-g++
-march=armv4t -mtune=arm920t linker (arm-angstrom-linux-gnueabi-ld)
supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
appending configuration tag "F77" to libtool
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t
-mtune=arm920t option to produce PIC... -fPIC
checking if ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t
-mtune=arm920t PIC flag -fPIC works... no
checking if ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t
-mtune=arm920t static flag -static works... no
checking if ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t
-mtune=arm920t supports -c -o file.o... no
checking whether the ccache arm-angstrom-linux-gnueabi-g77
-march=armv4t -mtune=arm920t linker (arm-angstrom-linux-gnueabi-ld)
supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether long int is 64 bits... configure: WARNING: 64 bit
arithmetic disabled when cross-compiling
no
checking whether long long int is 64 bits... configure: WARNING: 64
bit arithmetic disabled when cross-compiling
no
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking whether closedir returns void... yes
checking for working memcmp... no
checking for strftime... yes
checking for vprintf... yes
checking for _doprnt... no
checking for working alloca.h... yes
checking for alloca... yes
checking for dirent.h that defines DIR... (cached) yes
checking for library containing opendir... (cached) none required
checking for ANSI C header files... (cached) yes
checking for memory.h... (cached) yes
checking for unistd.h... (cached) yes
checking ieeefp.h usability... no
checking ieeefp.h presence... no
checking for ieeefp.h... no
checking sys/file.h usability... yes
checking sys/file.h presence... yes
checking for sys/file.h... yes
checking for strchr... yes
checking for memcpy... yes
checking whether stat file-mode macros are broken... no
checking whether struct tm is in sys/time.h or time.h... time.h
checking for size_t... yes
checking for an ANSI C-conforming const... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating source/Makefile
config.status: creating source/capi/Makefile
config.status: creating source/geom/Makefile
config.status: creating source/headers/Makefile
config.status: creating source/headers/geos/Makefile
config.status: creating tools/Makefile
config.status: creating tools/geos-config
config.status: creating macros/Makefile
config.status: creating source/test/Makefile
config.status: creating source/bigtest/Makefile
config.status: creating doc/Makefile
config.status: creating source/headers/geos/version.h
config.status: creating doc/Doxyfile
config.status: creating swig/Makefile
config.status: creating swig/python/Makefile
config.status: creating swig/python/tests/Makefile
config.status: creating swig/python/tests/cases/Makefile
config.status: creating swig/ruby/Makefile
config.status: creating swig/ruby/test/Makefile
config.status: creating VisualStudio/Makefile
config.status: creating source/capi/geos_c.h
config.status: creating source/headers/config.h
config.status: source/headers/config.h is unchanged
config.status: creating source/headers/geos/platform.h
config.status: source/headers/geos/platform.h is unchanged
config.status: executing depfiles commands
joseph@joseph-work:~$

But I can't make it:

joseph@joseph-work:~$ cd geos-2.2.3/
joseph@joseph-work:~/geos-2.2.3$ make
Making all in source
make[1]: Entering directory `/home/joseph/geos-2.2.3/source'
Making all in geom
make[2]: Entering directory `/home/joseph/geos-2.2.3/source/geom'
/bin/sh ../../libtool --tag=CXX   --mode=compile ccache
arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=arm920t
-DHAVE_CONFIG_H -I. -I../../source/headers -I../../source/headers/geos
-I../../source/headers -DGEOS_VERSION=""2.2.3""
-isystem/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/include
-isystem/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/include
-fexpensive-optimizations -fomit-frame-pointer -frename-registers -Os
-fpermissive -fvisibility-inlines-hidden -MT Coordinate.lo -MD -MP -MF
.deps/Coordinate.Tpo -c -o Coordinate.lo Coordinate.cpp
 ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=arm920t
-DHAVE_CONFIG_H -I. -I../../source/headers -I../../source/headers/geos
-I../../source/headers -DGEOS_VERSION=2.2.3
-isystem/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/include
-isystem/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/include
-fexpensive-optimizations -fomit-frame-pointer -frename-registers -Os
-fpermissive -fvisibility-inlines-hidden -MT Coordinate.lo -MD -MP -MF
.deps/Coordinate.Tpo -c Coordinate.cpp  -fPIC -DPIC -o
.libs/Coordinate.o
In file included from Coordinate.cpp:16:
../../source/headers/geos/geom.h:20:18: error: memory: No such file or directory
../../source/headers/geos/geom.h:21:20: error: iostream: No such file
or directory
../../source/headers/geos/geom.h:22:18: error: string: No such file or directory
../../source/headers/geos/geom.h:23:18: error: vector: No such file or directory
../../source/headers/geos/geom.h:24:21: error: algorithm: No such file
or directory
../../source/headers/geos/geom.h:25:15: error: map: No such file or directory
../../source/headers/geos/geom.h:26:17: error: cmath: No such file or directory
In file included from ../../source/headers/geos/geom.h:27,
                 from Coordinate.cpp:16:
../../source/headers/geos/platform.h:37:2: warning: #warning "Could
not find 64bit integer definition!"
Coordinate.cpp:17:19: error: sstream: No such file or directory
../../source/headers/geos/geom.h:37: error: 'string' does not name a type
../../source/headers/geos/geom.h:44: error: 'string' does not name a type
../../source/headers/geos/geom.h:291: error: 'string' does not name a type
../../source/headers/geos/geom.h:317: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:356: error: 'string' does not name a type
../../source/headers/geos/geom.h:476: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h: In member function 'double
geos::Coordinate::distance(const geos::Coordinate&) const':
../../source/headers/geos/geom.h:444: error: 'sqrt' was not declared
in this scope
../../source/headers/geos/geom.h: In static member function 'static
int geos::Coordinate::hashCode(double)':
../../source/headers/geos/geom.h:461: warning: right shift count >=
width of type
../../source/headers/geos/geom.h: At global scope:
../../source/headers/geos/geom.h:600: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:600: error: 'vector' declared as a
'virtual' field
../../source/headers/geos/geom.h:600: error: expected ';' before '<' token
../../source/headers/geos/geom.h:609: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:609: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:652: error: 'string' does not name a type
../../source/headers/geos/geom.h:655: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:655: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:733: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:733: error: expected ';' before '<' token
../../source/headers/geos/geom.h:739: error: expected `)' before '<' token
../../source/headers/geos/geom.h:750: error: 'string' does not name a type
../../source/headers/geos/geom.h:751: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:751: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:753: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:753: error: expected ';' before '<' token
../../source/headers/geos/geom.h:785: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:785: error: expected ';' before '<' token
../../source/headers/geos/geom.h:786: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:786: error: expected ';' before '<' token
../../source/headers/geos/geom.h:787: error: 'string' does not name a type
../../source/headers/geos/geom.h:788: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:788: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:789: error: 'vector' has not been declared
../../source/headers/geos/geom.h:789: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:789: error: 'void
geos::PointCoordinateSequence::setPoints(int)' cannot be overloaded
../../source/headers/geos/geom.h:788: error: with 'void
geos::PointCoordinateSequence::setPoints(int)'
../../source/headers/geos/geom.h:791: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:791: error: expected ';' before '<' token
../../source/headers/geos/geom.h:792: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:792: error: expected ';' before '<' token
../../source/headers/geos/geom.h:827: error: 'create' declared as a
'virtual' field
../../source/headers/geos/geom.h:827: error: expected ';' before '(' token
../../source/headers/geos/geom.h:856: error: expected ';' before '(' token
../../source/headers/geos/geom.h:875: error: expected ';' before '(' token
../../source/headers/geos/geom.h:1009: error: 'string' does not name a type
../../source/headers/geos/geom.h:1022: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:1218: error: 'string' does not name a type
../../source/headers/geos/geom.h:1310: error: 'string' has not been declared
../../source/headers/geos/geom.h:1322: error: 'string' does not name a type
../../source/headers/geos/geom.h:1324: error: 'string' does not name a type
../../source/headers/geos/geom.h:1422: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:1422: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:1428: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:1428: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:1446: error: 'vector' has not been declared
../../source/headers/geos/geom.h:1446: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:1447: error: 'vector' has not been declared
../../source/headers/geos/geom.h:1447: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:1447: error: 'int
geos::Geometry::compare(int) const' cannot be overloaded
../../source/headers/geos/geom.h:1446: error: with 'int
geos::Geometry::compare(int) const'
../../source/headers/geos/geom.h:1471: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:1596: error: 'string' does not name a type
../../source/headers/geos/geom.h:1601: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:1609: error: expected `)' before 'elements'
../../source/headers/geos/geom.h:1613: error: 'string' has not been declared
../../source/headers/geos/geom.h:1613: error: 'string' has not been declared
../../source/headers/geos/geom.h:1616: error: 'string' has not been declared
../../source/headers/geos/geom.h:1619: error: 'string' has not been declared
../../source/headers/geos/geom.h:1630: error: 'string' has not been declared
../../source/headers/geos/geom.h:1632: error: 'string' does not name a type
../../source/headers/geos/geom.h:1725: error: expected `)' before '<' token
../../source/headers/geos/geom.h:1765: error: 'string' does not name a type
../../source/headers/geos/geom.h:1787: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:1787: error: expected ';' before '<' token
../../source/headers/geos/geom.h:1794: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:1857: error: 'string' does not name a type
../../source/headers/geos/geom.h:1878: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:1928: error: 'string' does not name a type
../../source/headers/geos/geom.h:1955: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:1990: error: 'string' does not name a type
../../source/headers/geos/geom.h:1999: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:2042: error: 'vector' has not been declared
../../source/headers/geos/geom.h:2042: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:2075: error: 'string' does not name a type
../../source/headers/geos/geom.h:2096: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:2096: error: expected ';' before '<' token
../../source/headers/geos/geom.h:2103: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:2132: error: expected `)' before '<' token
../../source/headers/geos/geom.h:2145: error: 'string' does not name a type
../../source/headers/geos/geom.h:2156: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:2186: error: expected `)' before '<' token
../../source/headers/geos/geom.h:2203: error: 'string' does not name a type
../../source/headers/geos/geom.h:2212: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:2245: error: expected `)' before '<' token
../../source/headers/geos/geom.h:2262: error: 'string' does not name a type
../../source/headers/geos/geom.h:2270: warning: overflow in implicit
constant conversion
../../source/headers/geos/geom.h:2361: error: expected ';' before '(' token
../../source/headers/geos/geom.h:2364: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:2364: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:2370: error: expected ';' before '(' token
../../source/headers/geos/geom.h:2373: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:2373: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:2379: error: expected ';' before '(' token
../../source/headers/geos/geom.h:2382: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:2382: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:2397: error: expected ';' before '(' token
../../source/headers/geos/geom.h:2400: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:2400: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:2409: error: 'vector' has not been declared
../../source/headers/geos/geom.h:2409: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:2412: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:2412: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:2424: error: expected ';' before '(' token
../../source/headers/geos/geom.h:2427: error: expected ',' or '...'
before '<' token
../../source/headers/geos/geom.h:2427: warning: ISO C++ forbids
declaration of 'vector' with no type
../../source/headers/geos/geom.h:2445: warning: overflow in implicit
constant conversion
Coordinate.cpp:28: error: 'string' does not name a type
make[2]: *** [Coordinate.lo] Error 1
make[2]: Leaving directory `/home/joseph/geos-2.2.3/source/geom'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/joseph/geos-2.2.3/source'
make: *** [all-recursive] Error 1
joseph@joseph-work:~/geos-2.2.3$

A large number of required files seem to have not been created? Any
help with this would be greatly appreciated.

Thanks in advance,

Joseph
From gdt at ir.bbn.com  Tue Jul 22 11:16:02 2008
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue Jul 22 11:25:25 2008
Subject: [geos-devel] GEOS on Openmoko
In-Reply-To: <958244340807220802l2c9c47a3ob4959ac0928df24c@mail.gmail.com>
	(Joseph Reeves's message of "Tue, 22 Jul 2008 16:02:24 +0100")
References: <958244340807220802l2c9c47a3ob4959ac0928df24c@mail.gmail.com>
Message-ID: <rmid4l6rlu5.fsf@fnord.ir.bbn.com>

  I'm trying to compile SpatiaLite on the Openmoko platform using the toolchain:

  http://www.gaia-gis.it/spatialite-2.0/index.html

  http://wiki.openmoko.org/wiki/Toolchain

  I've cross compiled PROJ.4 without any trouble, but am having issues
  with GEOS. Version 3 seems to have particular issues:

3.0: It looks like you don't have swig installed.  It may be that geos
is not quite set up for cross compiling.

  configure.in:159: error: possibly undefined macro: AC_PROG_SWIG
        If this token and others are legitimate, please use m4_pattern_allow.
        See the Autoconf documentation.
  autoreconf: /usr/bin/autoconf failed with exit status: 1
  FATAL: autoreconf execution failed.

2.2.3: It looks like you don't have adequate C++ support on the target.
I am unclear on if the C++ part is optional or core, and if you can turn
it off.

  In file included from Coordinate.cpp:16:
  ../../source/headers/geos/geom.h:20:18: error: memory: No such file or directory
  ../../source/headers/geos/geom.h:21:20: error: iostream: No such file
  or directory
  ../../source/headers/geos/geom.h:22:18: error: string: No such file or directory
  ../../source/headers/geos/geom.h:23:18: error: vector: No such file or directory
  ../../source/headers/geos/geom.h:24:21: error: algorithm: No such file
  or directory
  ../../source/headers/geos/geom.h:25:15: error: map: No such file or directory
  ../../source/headers/geos/geom.h:26:17: error: cmath: No such file or directory

From mateusz at loskot.net  Tue Jul 22 12:06:03 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jul 22 12:06:12 2008
Subject: [geos-devel] GEOS on Openmoko
In-Reply-To: <rmid4l6rlu5.fsf@fnord.ir.bbn.com>
References: <958244340807220802l2c9c47a3ob4959ac0928df24c@mail.gmail.com>
	<rmid4l6rlu5.fsf@fnord.ir.bbn.com>
Message-ID: <4886056B.9050809@loskot.net>

Greg Troxel wrote:
> 2.2.3: It looks like you don't have adequate C++ support on the target.
> I am unclear on if the C++ part is optional or core, and if you can turn
> it off.
> 
>   In file included from Coordinate.cpp:16:
>   ../../source/headers/geos/geom.h:20:18: error: memory: No such file or directory
>   ../../source/headers/geos/geom.h:21:20: error: iostream: No such file
>   or directory
>   ../../source/headers/geos/geom.h:22:18: error: string: No such file or directory
>   ../../source/headers/geos/geom.h:23:18: error: vector: No such file or directory
>   ../../source/headers/geos/geom.h:24:21: error: algorithm: No such file
>   or directory
>   ../../source/headers/geos/geom.h:25:15: error: map: No such file or directory
>   ../../source/headers/geos/geom.h:26:17: error: cmath: No such file or directory

Joseph,

Greg is correct. You have not properly installed C++ compiler and C++
Standard Library. What version of C++ compiler do you use?

Greg,

GEOS core is written in C++, so there is no way to disable C++ part.

Regards
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From iknowjoseph at gmail.com  Tue Jul 22 12:16:19 2008
From: iknowjoseph at gmail.com (Joseph Reeves)
Date: Tue Jul 22 12:16:21 2008
Subject: [geos-devel] GEOS on Openmoko
In-Reply-To: <4886056B.9050809@loskot.net>
References: <958244340807220802l2c9c47a3ob4959ac0928df24c@mail.gmail.com>
	<rmid4l6rlu5.fsf@fnord.ir.bbn.com> <4886056B.9050809@loskot.net>
Message-ID: <958244340807220916r6a8ab7d1nc26d6ac699f44f68@mail.gmail.com>

Thanks for both replies.

C++ reports itself as 4.1.3:

joseph@joseph-work:~/geos-2.2.3$ c++ --version
c++ (GCC) 4.1.3 20070929 (prerelease) (Ubuntu 4.1.2-16ubuntu2)
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

joseph@joseph-work:~/geos-2.2.3$

The openmoko toolchain includes the c++ header files, but I have not
managed to get them seen when making GEOS. Copying them the what I
thought was the correct location simply produces pages of error
messages:

joseph@joseph-work:~$ ls -l
/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/usr/include/c++/4.1.2/
total 540
-rw-r--r-- 1 root root  2822 2008-05-10 19:54 algorithm
drwxr-xr-x 3 root root  4096 2008-05-11 20:02 arm-angstrom-linux-gnueabi
drwxr-xr-x 2 root root  4096 2008-05-11 20:02 backward
drwxr-xr-x 2 root root  4096 2008-05-11 20:02 bits
-rw-r--r-- 1 root root 34951 2008-05-10 19:54 bitset
-rw-r--r-- 1 root root  2011 2008-05-10 19:54 cassert
-rw-r--r-- 1 root root  2586 2008-05-10 19:54 cctype
-rw-r--r-- 1 root root  2133 2008-05-10 19:54 cerrno
-rw-r--r-- 1 root root  2055 2008-05-10 19:54 cfloat
-rw-r--r-- 1 root root  1854 2008-05-10 19:54 ciso646
-rw-r--r-- 1 root root  2060 2008-05-10 19:54 climits
-rw-r--r-- 1 root root  2251 2008-05-10 19:54 clocale
-rw-r--r-- 1 root root 13842 2008-05-10 19:54 cmath
-rw-r--r-- 1 root root 40858 2008-05-10 19:54 complex
-rw-r--r-- 1 root root  2295 2008-05-10 19:54 csetjmp
-rw-r--r-- 1 root root  2201 2008-05-10 19:54 csignal
-rw-r--r-- 1 root root  2182 2008-05-10 19:54 cstdarg
-rw-r--r-- 1 root root  2085 2008-05-10 19:54 cstddef
-rw-r--r-- 1 root root  4455 2008-05-10 19:54 cstdio
-rw-r--r-- 1 root root  5368 2008-05-10 19:54 cstdlib
-rw-r--r-- 1 root root  3474 2008-05-10 19:54 cstring
-rw-r--r-- 1 root root  2487 2008-05-10 19:54 ctime
-rw-r--r-- 1 root root  6152 2008-05-10 19:54 cwchar
-rw-r--r-- 1 root root  3027 2008-05-10 19:54 cwctype
-rw-r--r-- 1 root root 16310 2008-05-10 19:54 cxxabi.h
drwxr-xr-x 2 root root  4096 2008-05-11 20:02 debug
-rw-r--r-- 1 root root  2994 2008-05-10 19:54 deque
-rw-r--r-- 1 root root  4701 2008-05-10 19:54 exception
-rw-r--r-- 1 root root  1809 2008-05-10 19:54 exception_defines.h
drwxr-xr-x 3 root root  4096 2008-05-11 20:02 ext
-rw-r--r-- 1 root root 24123 2008-05-10 19:54 fstream
-rw-r--r-- 1 root root  2230 2008-05-10 19:54 functional
-rw-r--r-- 1 root root  8972 2008-05-10 19:54 iomanip
-rw-r--r-- 1 root root  2015 2008-05-10 19:54 ios
-rw-r--r-- 1 root root  6456 2008-05-10 19:54 iosfwd
-rw-r--r-- 1 root root  2962 2008-05-10 19:54 iostream
-rw-r--r-- 1 root root 28592 2008-05-10 19:54 istream
-rw-r--r-- 1 root root  2972 2008-05-10 19:54 iterator
-rw-r--r-- 1 root root 42248 2008-05-10 19:54 limits
-rw-r--r-- 1 root root  2992 2008-05-10 19:54 list
-rw-r--r-- 1 root root  1776 2008-05-10 19:54 locale
-rw-r--r-- 1 root root  2812 2008-05-10 19:54 map
-rw-r--r-- 1 root root 12140 2008-05-10 19:54 memory
-rw-r--r-- 1 root root  3854 2008-05-10 19:54 new
-rw-r--r-- 1 root root  2816 2008-05-10 19:54 numeric
-rw-r--r-- 1 root root 17718 2008-05-10 19:54 ostream
-rw-r--r-- 1 root root  2998 2008-05-10 19:54 queue
-rw-r--r-- 1 root root  2812 2008-05-10 19:54 set
-rw-r--r-- 1 root root 19370 2008-05-10 19:54 sstream
-rw-r--r-- 1 root root  2864 2008-05-10 19:54 stack
-rw-r--r-- 1 root root  4490 2008-05-10 19:54 stdexcept
-rw-r--r-- 1 root root 28224 2008-05-10 19:54 streambuf
-rw-r--r-- 1 root root  2152 2008-05-10 19:54 string
drwxr-xr-x 2 root root  4096 2008-05-11 20:02 tr1
-rw-r--r-- 1 root root  5440 2008-05-10 19:54 typeinfo
-rw-r--r-- 1 root root  2781 2008-05-10 19:54 utility
-rw-r--r-- 1 root root 35133 2008-05-10 19:54 valarray
-rw-r--r-- 1 root root  3034 2008-05-10 19:54 vector
joseph@joseph-work:~$

Thanks again,

Joseph




2008/7/22 Mateusz Loskot <mateusz@loskot.net>:
> Greg Troxel wrote:
>> 2.2.3: It looks like you don't have adequate C++ support on the target.
>> I am unclear on if the C++ part is optional or core, and if you can turn
>> it off.
>>
>>   In file included from Coordinate.cpp:16:
>>   ../../source/headers/geos/geom.h:20:18: error: memory: No such file or directory
>>   ../../source/headers/geos/geom.h:21:20: error: iostream: No such file
>>   or directory
>>   ../../source/headers/geos/geom.h:22:18: error: string: No such file or directory
>>   ../../source/headers/geos/geom.h:23:18: error: vector: No such file or directory
>>   ../../source/headers/geos/geom.h:24:21: error: algorithm: No such file
>>   or directory
>>   ../../source/headers/geos/geom.h:25:15: error: map: No such file or directory
>>   ../../source/headers/geos/geom.h:26:17: error: cmath: No such file or directory
>
> Joseph,
>
> Greg is correct. You have not properly installed C++ compiler and C++
> Standard Library. What version of C++ compiler do you use?
>
> Greg,
>
> GEOS core is written in C++, so there is no way to disable C++ part.
>
> Regards
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Tue Jul 22 12:42:52 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jul 22 12:43:08 2008
Subject: [geos-devel] GEOS on Openmoko
In-Reply-To: <958244340807220916r6a8ab7d1nc26d6ac699f44f68@mail.gmail.com>
References: <958244340807220802l2c9c47a3ob4959ac0928df24c@mail.gmail.com>	<rmid4l6rlu5.fsf@fnord.ir.bbn.com>
	<4886056B.9050809@loskot.net>
	<958244340807220916r6a8ab7d1nc26d6ac699f44f68@mail.gmail.com>
Message-ID: <48860E0C.5090803@loskot.net>

Joseph Reeves wrote:
> Thanks for both replies.
> 
> C++ reports itself as 4.1.3:

Joseph,

OK, it's very good C++ compiler.

> The openmoko toolchain includes the c++ header files, but I have not
> managed to get them seen when making GEOS. Copying them the what I
> thought was the correct location simply produces pages of error
> messages:
> 
> joseph@joseph-work:~$ ls -l
> /usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/usr/include/c++/4.1.2/
> total 540
> -rw-r--r-- 1 root root  2822 2008-05-10 19:54 algorithm
> [...]


You may try to specify this location as INCLUDE directory this way:

$
CPPFLAGS="-I/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/usr/include/c++/4.1.2"
./configure && make

Ciao
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From iknowjoseph at gmail.com  Wed Jul 23 05:20:21 2008
From: iknowjoseph at gmail.com (Joseph Reeves)
Date: Wed Jul 23 05:20:23 2008
Subject: [geos-devel] GEOS on Openmoko
In-Reply-To: <48860E0C.5090803@loskot.net>
References: <958244340807220802l2c9c47a3ob4959ac0928df24c@mail.gmail.com>
	<rmid4l6rlu5.fsf@fnord.ir.bbn.com> <4886056B.9050809@loskot.net>
	<958244340807220916r6a8ab7d1nc26d6ac699f44f68@mail.gmail.com>
	<48860E0C.5090803@loskot.net>
Message-ID: <958244340807230220p670c5a4bma582a3342932feaf@mail.gmail.com>

Thanks Mateusz,

I've tried adding the flags in the way that the Openmoko toolchain
will accept, although make still fails later. I'm not sure if this is
working as it should:

joseph@joseph-work:~$ om-conf CPPFLAGS="-I/usr/local/openmoko/arm/arm-angstrom-l
inux-gnueabi/usr/include/c++/4.1.2" geos-2.2.3/
Source directory: /home/joseph/geos-2.2.3
Extra configure arguments:
automake (GNU automake) 1.10
Written by Tom Tromey <tromey@redhat.com>
       and Alexandre Duret-Lutz <adl@gnu.org>.

Copyright 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
AUTOV is 1
NOTE: Executing autoreconf --verbose --install --force -I /home/joseph/geos-2.2.
3/ -I /home/joseph/geos-2.2.3/macros/ -I/usr/local/openmoko/arm/arm-angstrom-lin
ux-gnueabi/share/aclocal/aclocal-1 -I /usr/local/openmoko/arm/arm-angstrom-linux
-gnueabi/share/aclocal/aclocal
autoreconf: Entering directory `.'
autoreconf: configure.in: not using Gettext
autoreconf: running: aclocal --force
autoreconf: configure.in: tracing
autoreconf: running: libtoolize --copy --force
autoreconf: running: /usr/bin/autoconf --include=/home/joseph/geos-2.2.3/ --incl
ude=/home/joseph/geos-2.2.3/macros/ --include=/usr/local/openmoko/arm/arm-angstr
om-linux-gnueabi/share/aclocal/aclocal-1 --include=/usr/local/openmoko/arm/arm-a
ngstrom-linux-gnueabi/share/aclocal/aclocal --force --warnings=cross
autoreconf: running: /usr/bin/autoheader --include=/home/joseph/geos-2.2.3/ --in
clude=/home/joseph/geos-2.2.3/macros/ --include=/usr/local/openmoko/arm/arm-angs
trom-linux-gnueabi/share/aclocal/aclocal-1 --include=/usr/local/openmoko/arm/arm
-angstrom-linux-gnueabi/share/aclocal/aclocal --force --warnings=cross
autoreconf: running: automake --add-missing --copy --force-missing --warnings=cr
oss
automake: unknown warning category `cross'
autoreconf: Leaving directory `.'
NOTE: Running /home/joseph/geos-2.2.3/configure                     --build=i686
-linux              --host=arm-angstrom-linux-gnueabi               --target=arm
-angstrom-linux-gnueabi                     --prefix=/usr                   --ex
ec_prefix=/usr              --bindir=/usr/bin               --sbindir=/usr/sbin
    --libexecdir=/usr/libexec               --datadir=/usr/share
   --sysconfdir=/etc                --sharedstatedir=/usr/com               --lo
calstatedir=/var                    --libdir=/usr/lib               --includedir
=/usr/include               --oldincludedir=/usr/include                    --in
fodir=/usr/share/info               --mandir=/usr/share/man
    ...
checking build system type... i686-pc-linux-gnu
checking host system type... arm-angstrom-linux-gnueabi
checking target system type... arm-angstrom-linux-gnueabi
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for arm-angstrom-linux-gnueabi-strip... arm-angstrom-linux-gnueabi-stri
p
checking for arm-angstrom-linux-gnueabi-gcc... ccache arm-angstrom-linux-gnueabi
-gcc -march=armv4t -mtune=arm920t
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... yes
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=arm9
20t accepts -g... yes
checking for ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=arm920t
option to accept ISO C89... none needed
checking for style of include used by make... GNU
checking dependency style of ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t
 -mtune=arm920t... gcc3
checking whether we are using the GNU C++ compiler... yes
checking whether ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=arm9
20t accepts -g... yes
checking dependency style of ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t
 -mtune=arm920t... gcc3
checking for library containing strerror... none required
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for ld used by ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtu
ne=arm920t... arm-angstrom-linux-gnueabi-ld
checking if the linker (arm-angstrom-linux-gnueabi-ld) is GNU ld... yes
checking for arm-angstrom-linux-gnueabi-ld option to reload object files... -r
checking for BSD-compatible nm... /usr/local/openmoko/arm/bin/arm-angstrom-linux
-gnueabi-nm -B
checking whether ln -s works... yes
checking how to recognize dependent libraries... pass_all
checking how to run the C preprocessor... arm-angstrom-linux-gnueabi-gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking how to run the C++ preprocessor... ccache arm-angstrom-linux-gnueabi-g+
+ -march=armv4t -mtune=arm920t -E
checking for arm-angstrom-linux-gnueabi-g77... ccache arm-angstrom-linux-gnueabi
-g77 -march=armv4t -mtune=arm920t
checking whether we are using the GNU Fortran 77 compiler... no
checking whether ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t -mtune=arm9
20t accepts -g... no
checking the maximum length of command line arguments... 98304
checking command to parse /usr/local/openmoko/arm/bin/arm-angstrom-linux-gnueabi
-nm -B output from ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=ar
m920t object... ok
checking for objdir... .libs
checking for arm-angstrom-linux-gnueabi-ar... arm-angstrom-linux-gnueabi-ar
checking for arm-angstrom-linux-gnueabi-ranlib... arm-angstrom-linux-gnueabi-ran
lib
checking for arm-angstrom-linux-gnueabi-strip... (cached) arm-angstrom-linux-gnu
eabi-strip
checking if ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=arm920t s
upports -fno-rtti -fno-exceptions... no
checking for ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=arm920t
option to produce PIC... -fPIC
checking if ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=arm920t P
IC flag -fPIC works... yes
checking if ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=arm920t s
tatic flag -static works... yes
checking if ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=arm920t s
upports -c -o file.o... yes
checking whether the ccache arm-angstrom-linux-gnueabi-gcc -march=armv4t -mtune=
arm920t linker (arm-angstrom-linux-gnueabi-ld) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking for shl_load... no
checking for shl_load in -ldld... no
checking for dlopen... no
checking for dlopen in -ldl... yes
checking whether a program can dlopen itself... cross
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
configure: creating libtool
appending configuration tag "CXX" to libtool
checking for ld used by ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtu
ne=arm920t... arm-angstrom-linux-gnueabi-ld
checking if the linker (arm-angstrom-linux-gnueabi-ld) is GNU ld... yes
checking whether the ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=
arm920t linker (arm-angstrom-linux-gnueabi-ld) supports shared libraries... yes
checking for ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=arm920t
option to produce PIC... -fPIC
checking if ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=arm920t P
IC flag -fPIC works... yes
checking if ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=arm920t s
tatic flag -static works... yes
checking if ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=arm920t s
upports -c -o file.o... yes
checking whether the ccache arm-angstrom-linux-gnueabi-g++ -march=armv4t -mtune=
arm920t linker (arm-angstrom-linux-gnueabi-ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
appending configuration tag "F77" to libtool
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... yes
checking for ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t -mtune=arm920t
option to produce PIC... -fPIC
checking if ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t -mtune=arm920t P
IC flag -fPIC works... no
checking if ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t -mtune=arm920t s
tatic flag -static works... no
checking if ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t -mtune=arm920t s
upports -c -o file.o... no
checking whether the ccache arm-angstrom-linux-gnueabi-g77 -march=armv4t -mtune=
arm920t linker (arm-angstrom-linux-gnueabi-ld) supports shared libraries... yes
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether long int is 64 bits... configure: WARNING: 64 bit arithmetic di
sabled when cross-compiling
no
checking whether long long int is 64 bits... configure: WARNING: 64 bit arithmet
ic disabled when cross-compiling
no
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking whether closedir returns void... yes
checking for working memcmp... no
checking for strftime... yes
checking for vprintf... yes
checking for _doprnt... no
checking for working alloca.h... yes
checking for alloca... yes
checking for dirent.h that defines DIR... (cached) yes
checking for library containing opendir... (cached) none required
checking for ANSI C header files... (cached) yes
checking for memory.h... (cached) yes
checking for unistd.h... (cached) yes
checking ieeefp.h usability... no
checking ieeefp.h presence... no
checking for ieeefp.h... no
checking sys/file.h usability... yes
checking sys/file.h presence... yes
checking for sys/file.h... yes
checking for strchr... yes
checking for memcpy... yes
checking whether stat file-mode macros are broken... no
checking whether struct tm is in sys/time.h or time.h... time.h
checking for size_t... yes
checking for an ANSI C-conforming const... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating source/Makefile
config.status: creating source/capi/Makefile
config.status: creating source/geom/Makefile
config.status: creating source/headers/Makefile
config.status: creating source/headers/geos/Makefile
config.status: creating tools/Makefile
config.status: creating tools/geos-config
config.status: creating macros/Makefile
config.status: creating source/test/Makefile
config.status: creating source/bigtest/Makefile
config.status: creating doc/Makefile
config.status: creating source/headers/geos/version.h
config.status: creating doc/Doxyfile
config.status: creating swig/Makefile
config.status: creating swig/python/Makefile
config.status: creating swig/python/tests/Makefile
config.status: creating swig/python/tests/cases/Makefile
config.status: creating swig/ruby/Makefile
config.status: creating swig/ruby/test/Makefile
config.status: creating VisualStudio/Makefile
config.status: creating source/capi/geos_c.h
config.status: creating source/headers/config.h
config.status: source/headers/config.h is unchanged
config.status: creating source/headers/geos/platform.h
config.status: source/headers/geos/platform.h is unchanged
config.status: executing depfiles commands
joseph@joseph-work:~$

Thanks,

Joseph




2008/7/22 Mateusz Loskot <mateusz@loskot.net>:
> Joseph Reeves wrote:
>> Thanks for both replies.
>>
>> C++ reports itself as 4.1.3:
>
> Joseph,
>
> OK, it's very good C++ compiler.
>
>> The openmoko toolchain includes the c++ header files, but I have not
>> managed to get them seen when making GEOS. Copying them the what I
>> thought was the correct location simply produces pages of error
>> messages:
>>
>> joseph@joseph-work:~$ ls -l
>> /usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/usr/include/c++/4.1.2/
>> total 540
>> -rw-r--r-- 1 root root  2822 2008-05-10 19:54 algorithm
>> [...]
>
>
> You may try to specify this location as INCLUDE directory this way:
>
> $
> CPPFLAGS="-I/usr/local/openmoko/arm/arm-angstrom-linux-gnueabi/usr/include/c++/4.1.2"
> ./configure && make
>
> Ciao
> --
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Wed Jul 23 07:29:51 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jul 23 07:29:58 2008
Subject: [geos-devel] GEOS on Openmoko
In-Reply-To: <958244340807230220p670c5a4bma582a3342932feaf@mail.gmail.com>
References: <958244340807220802l2c9c47a3ob4959ac0928df24c@mail.gmail.com>	<rmid4l6rlu5.fsf@fnord.ir.bbn.com>
	<4886056B.9050809@loskot.net>	<958244340807220916r6a8ab7d1nc26d6ac699f44f68@mail.gmail.com>	<48860E0C.5090803@loskot.net>
	<958244340807230220p670c5a4bma582a3342932feaf@mail.gmail.com>
Message-ID: <4887162F.9070206@loskot.net>

Joseph Reeves wrote:
> Thanks Mateusz,
> 
> I've tried adding the flags in the way that the Openmoko toolchain
> will accept, although make still fails later. I'm not sure if this is
> working as it should:
> 
> joseph@joseph-work:~$ om-conf CPPFLAGS="-I/usr/local/openmoko/arm/arm-angstrom-l
> inux-gnueabi/usr/include/c++/4.1.2" geos-2.2.3/

It looks OK to me.
I have no idea why it fails later.
I'm sorry but have no experience with OpenMoko, so I'm of little help 
here. Perhaps you could ask some gurus on OM lists.

Ciao
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From jef at norbit.de  Wed Jul 30 16:38:45 2008
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed Jul 30 16:38:50 2008
Subject: [geos-devel] C-API extension
Message-ID: <20080730203845.GA15971@norbit.de>

Hi there,

while porting Quantum GIS from the C++ API to the C API I found that
there currently seems to be no way to get the cut edges from
the Polygonizer.

Please consider the attached patch, which adds that.

tia
J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-0
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

-------------- next part --------------
Index: capi/geos_c.cpp
===================================================================
--- capi/geos_c.cpp	(revision 2135)
+++ capi/geos_c.cpp	(working copy)
@@ -1349,6 +1349,54 @@
 }
 
 Geometry *
+GEOSPolygonizeGetCutEdges(const Geometry * const * g, unsigned int ngeoms)
+{
+	using geos::operation::polygonize::Polygonizer;
+	unsigned int i;
+	Geometry *out = NULL;
+
+	try{
+		// Polygonize
+		Polygonizer plgnzr;
+		for (i=0; i<ngeoms; i++) plgnzr.add(g[i]);
+#if GEOS_DEBUG
+	NOTICE_MESSAGE("geometry vector added to polygonizer");
+#endif
+
+		std::vector<const LineString *>*lines = plgnzr.getCutEdges();
+
+#if GEOS_DEBUG
+	NOTICE_MESSAGE("output polygons got");
+#endif
+
+		// We need a vector of Geometry pointers, not
+		// Polygon pointers.
+		// STL vector doesn't allow transparent upcast of this
+		// nature, so we explicitly convert.
+		// (it's just a waste of processor and memory, btw)
+    std::vector<Geometry*> *linevec =
+				new std::vector<Geometry *>(lines->size());
+		for (i=0; i<lines->size(); i++) (*linevec)[i] = (*lines)[i]->clone();
+
+		out = geomFactory->createGeometryCollection(linevec);
+		// the above method takes ownership of the passed
+		// vector, so we must *not* delete it
+	}
+	catch (const std::exception &e)
+	{
+		ERROR_MESSAGE("%s", e.what());
+		return NULL;
+	}
+	catch (...)
+	{
+		ERROR_MESSAGE("Unknown exception thrown");
+		return NULL;
+	}
+
+	return out;
+}
+
+Geometry *
 GEOSLineMerge(const Geometry *g)
 {
 		using geos::operation::linemerge::LineMerger;
Index: capi/geos_c.h.in
===================================================================
--- capi/geos_c.h.in	(revision 2135)
+++ capi/geos_c.h.in	(working copy)
@@ -283,8 +283,8 @@
  * all arguments remain ownership of the caller
  * (both Geometries and pointers)
  */
-extern GEOSGeometry GEOS_DLL *GEOSPolygonize(const GEOSGeometry * const geoms[],
-	unsigned int ngeoms);
+extern GEOSGeometry GEOS_DLL *GEOSPolygonize(const GEOSGeometry * const geoms[], unsigned int ngeoms);
+extern GEOSGeometry GEOS_DLL *GEOSPolygonizeGetCutEdges(const GEOSGeometry * const geoms[], unsigned int ngeoms);
 
 extern GEOSGeometry GEOS_DLL *GEOSLineMerge(const GEOSGeometry* g);
 extern GEOSGeometry GEOS_DLL *GEOSSimplify(const GEOSGeometry* g1, double tolerance);
From mateusz at loskot.net  Thu Jul 31 11:48:50 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jul 31 11:49:21 2008
Subject: [geos-devel] C-API extension
In-Reply-To: <20080730203845.GA15971@norbit.de>
References: <20080730203845.GA15971@norbit.de>
Message-ID: <4891DEE2.7020803@loskot.net>

J?rgen E. Fischer wrote:
> Hi there,
> 
> while porting Quantum GIS from the C++ API to the C API I found that
> there currently seems to be no way to get the cut edges from
> the Polygonizer.
> 
> Please consider the attached patch, which adds that.

J?rgen,

Thanks for this extension.
I created ticket [1] for it and I'm going to apply it to the trunk.

[1] http://trac.osgeo.org/geos/ticket/195
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
