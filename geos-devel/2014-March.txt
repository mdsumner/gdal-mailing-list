From bontepaarden at gmail.com  Mon Mar  3 01:35:50 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 3 Mar 2014 10:35:50 +0100
Subject: [geos-devel] Looking for the closest point
Message-ID: <CAHNf2YTdrHh2d0wWLH6cQDxetqaNAWkwRb_EsanEExXRAZw9WQ@mail.gmail.com>

Hi List,

We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.

I've got a linestring (stream) and need to know the closest point at that
stream from a specific location.
What I need is the index of the point in the stream and the distance from
the location to that point.

We currently have a custom GetClosestPoint method which is not using GEOS,
but that is not working when a long linestring is close to the location but
the points are far away.
For example my line has two points, starts in Amsterdam and ends in Paris.
My location is near Antwerp.

Does GEOS have a better method for this? I did searched using Google and
found several methods/pages but I'm not sure what to use.
I also want to make it a generic method that will work with all types of
lines and polygons.

Any advice would be much appreciated.

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*Join us at the MapWindow GIS Conference 2014
<http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140303/a3ee73bd/attachment.html>

From bontepaarden at gmail.com  Mon Mar  3 02:15:52 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 3 Mar 2014 11:15:52 +0100
Subject: [geos-devel] Aggregate on attribute
Message-ID: <CAHNf2YTBUxbV+h84BzOWzb6i1SGRw5FOip-5Xhngkbb+z0BU0Q@mail.gmail.com>

Hi List,

We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.

We currently have a custom AggregateShapefile method which is not using
GEOS.
In this method we aggregate (union) all shapes based on an attribute. This
method is not working 100% and I'm wondering if GEOS has something similar.

For example I have the counties shapefile of the USA. I want to aggregate
all counties that are in the same state.
I know of the Union method in GEOS, but that doesn't takes into account the
attribute and in this example will result in a shapefile with 1 shape
instead of a shape for each state.

Any advice will be much appreciated.

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*Join us at the MapWindow GIS Conference 2014
<http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140303/92c2361c/attachment.html>

From strk at keybit.net  Mon Mar  3 02:31:30 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 3 Mar 2014 11:31:30 +0100
Subject: [geos-devel] Aggregate on attribute
In-Reply-To: <CAHNf2YTBUxbV+h84BzOWzb6i1SGRw5FOip-5Xhngkbb+z0BU0Q@mail.gmail.com>
References: <CAHNf2YTBUxbV+h84BzOWzb6i1SGRw5FOip-5Xhngkbb+z0BU0Q@mail.gmail.com>
Message-ID: <20140303103130.GD10626@localhost>

On Mon, Mar 03, 2014 at 11:15:52AM +0100, Paul Meems wrote:
> Hi List,
> 
> We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.
> 
> We currently have a custom AggregateShapefile method which is not using
> GEOS.
> In this method we aggregate (union) all shapes based on an attribute. This
> method is not working 100% and I'm wondering if GEOS has something similar.

GEOS has no support for "attributes".
It'll need to be built outside.

> For example I have the counties shapefile of the USA. I want to aggregate
> all counties that are in the same state.
> I know of the Union method in GEOS, but that doesn't takes into account the
> attribute and in this example will result in a shapefile with 1 shape
> instead of a shape for each state.
> 
> Any advice will be much appreciated.

PostGIS would sound like an appropriate tool for what you're trying to do.

--strk;

From bontepaarden at gmail.com  Mon Mar  3 03:08:13 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 3 Mar 2014 12:08:13 +0100
Subject: [geos-devel] Aggregate on attribute
In-Reply-To: <20140303103130.GD10626@localhost>
References: <CAHNf2YTBUxbV+h84BzOWzb6i1SGRw5FOip-5Xhngkbb+z0BU0Q@mail.gmail.com>
	<20140303103130.GD10626@localhost>
Message-ID: <CAHNf2YS0i6rbdq=zGdmqtwVokUWVY1+L=yrBWhJ4ozs903_AFg@mail.gmail.com>

Thanks Sandro for the quick reply.

I understand how to solve this using a database.

For now we're going to look closer to our own function and fix the issues
were facing.

Thanks,



Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*Join us at the MapWindow GIS Conference 2014
<http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*


2014-03-03 11:31 GMT+01:00 Sandro Santilli <strk at keybit.net>:

> On Mon, Mar 03, 2014 at 11:15:52AM +0100, Paul Meems wrote:
> > Hi List,
> >
> > We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.
> >
> > We currently have a custom AggregateShapefile method which is not using
> > GEOS.
> > In this method we aggregate (union) all shapes based on an attribute.
> This
> > method is not working 100% and I'm wondering if GEOS has something
> similar.
>
> GEOS has no support for "attributes".
> It'll need to be built outside.
>
> > For example I have the counties shapefile of the USA. I want to aggregate
> > all counties that are in the same state.
> > I know of the Union method in GEOS, but that doesn't takes into account
> the
> > attribute and in this example will result in a shapefile with 1 shape
> > instead of a shape for each state.
> >
> > Any advice will be much appreciated.
>
> PostGIS would sound like an appropriate tool for what you're trying to do.
>
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140303/ecfd8f66/attachment.html>

From remi.cura at gmail.com  Tue Mar  4 01:50:41 2014
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Tue, 4 Mar 2014 10:50:41 +0100
Subject: [geos-devel] Looking for the closest point
In-Reply-To: <CAHNf2YTdrHh2d0wWLH6cQDxetqaNAWkwRb_EsanEExXRAZw9WQ@mail.gmail.com>
References: <CAHNf2YTdrHh2d0wWLH6cQDxetqaNAWkwRb_EsanEExXRAZw9WQ@mail.gmail.com>
Message-ID: <CAJvUf_sdK9a1h9hXuBqVc6VfkMVLkKaeNDZhV0S8B7Ew5kGRCw@mail.gmail.com>

Hey,
if you have access to sql,
you don't need geos.

You could simply convert line to point then order by distance and get the
closest.
Using postgis it would be quiet easy.
You lines appears to be big, so a simple euclidian distance may give you
wrong result, you would need a geographical distance.

Cheers,

R?mi-C


2014-03-03 10:35 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:

> Hi List,
>
> We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.
>
> I've got a linestring (stream) and need to know the closest point at that
> stream from a specific location.
> What I need is the index of the point in the stream and the distance from
> the location to that point.
>
> We currently have a custom GetClosestPoint method which is not using GEOS,
> but that is not working when a long linestring is close to the location but
> the points are far away.
> For example my line has two points, starts in Amsterdam and ends in Paris.
> My location is near Antwerp.
>
> Does GEOS have a better method for this? I did searched using Google and
> found several methods/pages but I'm not sure what to use.
> I also want to make it a generic method that will work with all types of
> lines and polygons.
>
> Any advice would be much appreciated.
>
> Thanks,
>
> Paul
>
>  *Paul Meems *
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
>
>
>
> *Join us at the MapWindow GIS Conference 2014
> <http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140304/0596c872/attachment.html>

From bontepaarden at gmail.com  Tue Mar  4 03:04:38 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Tue, 4 Mar 2014 12:04:38 +0100
Subject: [geos-devel] Looking for the closest point
In-Reply-To: <CAJvUf_sdK9a1h9hXuBqVc6VfkMVLkKaeNDZhV0S8B7Ew5kGRCw@mail.gmail.com>
References: <CAHNf2YTdrHh2d0wWLH6cQDxetqaNAWkwRb_EsanEExXRAZw9WQ@mail.gmail.com>
	<CAJvUf_sdK9a1h9hXuBqVc6VfkMVLkKaeNDZhV0S8B7Ew5kGRCw@mail.gmail.com>
Message-ID: <CAHNf2YQC5PXL2gPYZ5yC0g0fLFEaFRbTK2P7+9Rhp_MPjKjP0w@mail.gmail.com>

Thanks R?mi,

Unfortunately I can't use SpatiaLite or PostGIS.

For now I do this:
1) Break all lines into separate linestrings
2) Search around my location for 1 or more linestrings
3) Create a perpendicular line from my location to the found linestring
4) Use the linestring with the shortest perpendicular line.

I was just wondering if GEOS can already do this.

Thanks,



Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*Join us at the MapWindow GIS Conference 2014
<http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*


2014-03-04 10:50 GMT+01:00 R?mi Cura <remi.cura at gmail.com>:

> Hey,
> if you have access to sql,
> you don't need geos.
>
> You could simply convert line to point then order by distance and get the
> closest.
> Using postgis it would be quiet easy.
> You lines appears to be big, so a simple euclidian distance may give you
> wrong result, you would need a geographical distance.
>
> Cheers,
>
> R?mi-C
>
>
> 2014-03-03 10:35 GMT+01:00 Paul Meems <bontepaarden at gmail.com>:
>
>>  Hi List,
>>
>> We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.
>>
>> I've got a linestring (stream) and need to know the closest point at that
>> stream from a specific location.
>> What I need is the index of the point in the stream and the distance from
>> the location to that point.
>>
>> We currently have a custom GetClosestPoint method which is not using
>> GEOS, but that is not working when a long linestring is close to the
>> location but the points are far away.
>> For example my line has two points, starts in Amsterdam and ends in
>> Paris. My location is near Antwerp.
>>
>> Does GEOS have a better method for this? I did searched using Google and
>> found several methods/pages but I'm not sure what to use.
>> I also want to make it a generic method that will work with all types of
>> lines and polygons.
>>
>> Any advice would be much appreciated.
>>
>> Thanks,
>>
>> Paul
>>
>>  *Paul Meems *
>> Release manager, configuration manager
>> and forum moderator of MapWindow GIS.
>> www.mapwindow.org
>>
>> Owner of MapWindow.nl - Support for
>> Dutch speaking users.
>> www.mapwindow.nl
>>
>>
>>
>> *Join us at the MapWindow GIS Conference 2014
>> <http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140304/854d3d11/attachment.html>

From mwtoews at gmail.com  Tue Mar  4 11:18:02 2014
From: mwtoews at gmail.com (Mike Toews)
Date: Wed, 5 Mar 2014 08:18:02 +1300
Subject: [geos-devel] Looking for the closest point
In-Reply-To: <CAHNf2YTdrHh2d0wWLH6cQDxetqaNAWkwRb_EsanEExXRAZw9WQ@mail.gmail.com>
References: <CAHNf2YTdrHh2d0wWLH6cQDxetqaNAWkwRb_EsanEExXRAZw9WQ@mail.gmail.com>
Message-ID: <CAM2FmMqVXhnyzNA6tJ0CnTLzUmbTW-afcv-9G4V4wn_N+NGRUg@mail.gmail.com>

Have you tried using NearestPoints(g1, g2)?
http://geos.refractions.net/ro/doxygen_docs/html/classgeos_1_1operation_1_1distance_1_1DistanceOp.html#a6
(and for C-API it is called GEOSNearestPoints).

It will return the closest points along on the linestring from another
geometry (like a point). Normally you might expect one point that is
closest, however it is conceivable there could be many equidistant
closest points to another. Another detail is that the returned
coordinate(s) may not be vertices of the original linestring. If you
need the closest vertex(es), then you should convert the stream to a
multipoint before using NearestPoints.

-Mike

On 3 March 2014 22:35, Paul Meems <bontepaarden at gmail.com> wrote:
>
> Hi List,
>
> We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.
>
> I've got a linestring (stream) and need to know the closest point at that stream from a specific location.
> What I need is the index of the point in the stream and the distance from the location to that point.
>
> We currently have a custom GetClosestPoint method which is not using GEOS, but that is not working when a long linestring is close to the location but the points are far away.
> For example my line has two points, starts in Amsterdam and ends in Paris. My location is near Antwerp.
>
> Does GEOS have a better method for this? I did searched using Google and found several methods/pages but I'm not sure what to use.
> I also want to make it a generic method that will work with all types of lines and polygons.
>
> Any advice would be much appreciated.
>
> Thanks,
>
> Paul
>
> Paul Meems
> Release manager, configuration manager
> and forum moderator of MapWindow GIS.
> www.mapwindow.org
>
> Owner of MapWindow.nl - Support for
> Dutch speaking users.
> www.mapwindow.nl
>
>
> Join us at the MapWindow GIS Conference 2014, in Debrecen Hungary
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From bontepaarden at gmail.com  Tue Mar  4 23:57:39 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 5 Mar 2014 08:57:39 +0100
Subject: [geos-devel] Looking for the closest point
In-Reply-To: <CAM2FmMqVXhnyzNA6tJ0CnTLzUmbTW-afcv-9G4V4wn_N+NGRUg@mail.gmail.com>
References: <CAHNf2YTdrHh2d0wWLH6cQDxetqaNAWkwRb_EsanEExXRAZw9WQ@mail.gmail.com>
	<CAM2FmMqVXhnyzNA6tJ0CnTLzUmbTW-afcv-9G4V4wn_N+NGRUg@mail.gmail.com>
Message-ID: <CAHNf2YQ=2eALLWNhuf4+P92WXHEzMun-GUvd0_YGggNhAEMpeg@mail.gmail.com>

Thanks Mike,

NearestPoints sounds interesting. I'll have a try with it.

Thanks,



Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*Join us at the MapWindow GIS Conference 2014
<http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*


2014-03-04 20:18 GMT+01:00 Mike Toews <mwtoews at gmail.com>:

> Have you tried using NearestPoints(g1, g2)?
>
> http://geos.refractions.net/ro/doxygen_docs/html/classgeos_1_1operation_1_1distance_1_1DistanceOp.html#a6
> (and for C-API it is called GEOSNearestPoints).
>
> It will return the closest points along on the linestring from another
> geometry (like a point). Normally you might expect one point that is
> closest, however it is conceivable there could be many equidistant
> closest points to another. Another detail is that the returned
> coordinate(s) may not be vertices of the original linestring. If you
> need the closest vertex(es), then you should convert the stream to a
> multipoint before using NearestPoints.
>
> -Mike
>
> On 3 March 2014 22:35, Paul Meems <bontepaarden at gmail.com> wrote:
> >
> > Hi List,
> >
> > We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.
> >
> > I've got a linestring (stream) and need to know the closest point at
> that stream from a specific location.
> > What I need is the index of the point in the stream and the distance
> from the location to that point.
> >
> > We currently have a custom GetClosestPoint method which is not using
> GEOS, but that is not working when a long linestring is close to the
> location but the points are far away.
> > For example my line has two points, starts in Amsterdam and ends in
> Paris. My location is near Antwerp.
> >
> > Does GEOS have a better method for this? I did searched using Google and
> found several methods/pages but I'm not sure what to use.
> > I also want to make it a generic method that will work with all types of
> lines and polygons.
> >
> > Any advice would be much appreciated.
> >
> > Thanks,
> >
> > Paul
> >
> > Paul Meems
> > Release manager, configuration manager
> > and forum moderator of MapWindow GIS.
> > www.mapwindow.org
> >
> > Owner of MapWindow.nl - Support for
> > Dutch speaking users.
> > www.mapwindow.nl
> >
> >
> > Join us at the MapWindow GIS Conference 2014, in Debrecen Hungary
> >
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140305/e10977bb/attachment.html>

From varunsaraf14 at gmail.com  Thu Mar  6 03:53:43 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Thu, 6 Mar 2014 17:23:43 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140220063045.GA7415@localhost>
References: <CAB-WT30MztQCbFAvHBTYnWEyqM56vPC0C+1SvwxjaNsyLwwJEw@mail.gmail.com>
	<20140212165257.GA3849@localhost>
	<CAJvUf_vGWeM7o0kvJC2vOVSn=oTwq1ewV=B8p7ZcF4GaYHdRQA@mail.gmail.com>
	<CAB-WT32KqqBxTv1FSN=Gvkis=ieoEYVjzRKOwLYrDHmSY3Ewvg@mail.gmail.com>
	<20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
Message-ID: <CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>

Hi,

We either create the PrecisionModel and the GeometryFactory in the
GEOSContext_setPrecisionModel or pass a pointer to the
new PrecisionModel to this method. But the signature of initGEOS/initGEOS_r
cannot be changed so how to pass it to the initGEOS. Please clarify.

Regards,
Varun Saraf

On Thu, Feb 20, 2014 at 12:00 PM, Sandro Santilli <strk at keybit.net> wrote:

> Hi Sean,
>
> On Wed, Feb 19, 2014 at 11:15:18AM -0700, Sean Gillies wrote:
>
> > My Shapely project would benefit from this feature and I've written up
> its
> > requirements here: https://github.com/Toblerity/Shapely/issues/110.
> > Briefly, I'd like to be able to pass a precision model reference into
> > initGEOS and create an appropriate geometry factory in the GEOS context.
> > And I'd like to be able to switch between precision models within a
> Python
> > program, so not adding any new state outside of the context struct would
> be
> > my preference.
>
> I agree about making the precision model part of the context.
> But we can't change the initGEOS signature, so we'll need
> some GEOSContext_setPrecisionModel kind of method.
> At that point, we have to decide what happens with a previously
> set PrecisionModel, if it has to be allowed at all.
>
> Deleting the PrecisionModel and the GeometryFactory on finishGEOS
> is fine, but note that this would make any created geometry also
> broken (they hold a reference to the GeometryFactory that created
> them). Not a big deal, as long as it's clearely documented. Dunno
> if it would make sense for the opaque GEOSGeometry type to also
> hold a pointer to the context, just in case...
>
> > Once a wiki page is created, I'll be happy to copy my requirements there.
>
> I hope Varun will take action about the wiki :)
>
> --strk;
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140306/b7aae660/attachment.html>

From strk at keybit.net  Thu Mar  6 04:14:58 2014
From: strk at keybit.net (Sandro Santilli)
Date: Thu, 6 Mar 2014 13:14:58 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
References: <CAB-WT30MztQCbFAvHBTYnWEyqM56vPC0C+1SvwxjaNsyLwwJEw@mail.gmail.com>
	<20140212165257.GA3849@localhost>
	<CAJvUf_vGWeM7o0kvJC2vOVSn=oTwq1ewV=B8p7ZcF4GaYHdRQA@mail.gmail.com>
	<CAB-WT32KqqBxTv1FSN=Gvkis=ieoEYVjzRKOwLYrDHmSY3Ewvg@mail.gmail.com>
	<20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
Message-ID: <20140306121458.GH6080@localhost>

On Thu, Mar 06, 2014 at 05:23:43PM +0530, Varun Saraf wrote:
> Hi,
> 
> We either create the PrecisionModel and the GeometryFactory in the
> GEOSContext_setPrecisionModel or pass a pointer to the
> new PrecisionModel to this method. But the signature of initGEOS/initGEOS_r
> cannot be changed so how to pass it to the initGEOS. Please clarify.

Please make proposals.
My proposal was in the mail you quoted, did you understand it ?

--strk;

> On Thu, Feb 20, 2014 at 12:00 PM, Sandro Santilli <strk at keybit.net> wrote:
> >
> > I agree about making the precision model part of the context.
> > But we can't change the initGEOS signature, so we'll need
> > some GEOSContext_setPrecisionModel kind of method.
> > At that point, we have to decide what happens with a previously
> > set PrecisionModel, if it has to be allowed at all.
> >
> > Deleting the PrecisionModel and the GeometryFactory on finishGEOS
> > is fine, but note that this would make any created geometry also
> > broken (they hold a reference to the GeometryFactory that created
> > them). Not a big deal, as long as it's clearely documented. Dunno
> > if it would make sense for the opaque GEOSGeometry type to also
> > hold a pointer to the context, just in case...

From varunsaraf14 at gmail.com  Thu Mar  6 11:24:19 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Fri, 7 Mar 2014 00:54:19 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140306121458.GH6080@localhost>
References: <CAB-WT30MztQCbFAvHBTYnWEyqM56vPC0C+1SvwxjaNsyLwwJEw@mail.gmail.com>
	<20140212165257.GA3849@localhost>
	<CAJvUf_vGWeM7o0kvJC2vOVSn=oTwq1ewV=B8p7ZcF4GaYHdRQA@mail.gmail.com>
	<CAB-WT32KqqBxTv1FSN=Gvkis=ieoEYVjzRKOwLYrDHmSY3Ewvg@mail.gmail.com>
	<20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
Message-ID: <CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>

Hi,

I have made a temporary proposal. Below is the link to the wiki page.

http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel

Regards,
Varun Saraf



On Thu, Mar 6, 2014 at 5:44 PM, Sandro Santilli <strk at keybit.net> wrote:

> On Thu, Mar 06, 2014 at 05:23:43PM +0530, Varun Saraf wrote:
> > Hi,
> >
> > We either create the PrecisionModel and the GeometryFactory in the
> > GEOSContext_setPrecisionModel or pass a pointer to the
> > new PrecisionModel to this method. But the signature of
> initGEOS/initGEOS_r
> > cannot be changed so how to pass it to the initGEOS. Please clarify.
>
> Please make proposals.
> My proposal was in the mail you quoted, did you understand it ?
>
> --strk;
>
> > On Thu, Feb 20, 2014 at 12:00 PM, Sandro Santilli <strk at keybit.net>
> wrote:
> > >
> > > I agree about making the precision model part of the context.
> > > But we can't change the initGEOS signature, so we'll need
> > > some GEOSContext_setPrecisionModel kind of method.
> > > At that point, we have to decide what happens with a previously
> > > set PrecisionModel, if it has to be allowed at all.
> > >
> > > Deleting the PrecisionModel and the GeometryFactory on finishGEOS
> > > is fine, but note that this would make any created geometry also
> > > broken (they hold a reference to the GeometryFactory that created
> > > them). Not a big deal, as long as it's clearely documented. Dunno
> > > if it would make sense for the opaque GEOSGeometry type to also
> > > hold a pointer to the context, just in case...
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140307/4c74023a/attachment.html>

From strk at keybit.net  Fri Mar  7 00:16:32 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 7 Mar 2014 09:16:32 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
References: <CAB-WT30MztQCbFAvHBTYnWEyqM56vPC0C+1SvwxjaNsyLwwJEw@mail.gmail.com>
	<20140212165257.GA3849@localhost>
	<CAJvUf_vGWeM7o0kvJC2vOVSn=oTwq1ewV=B8p7ZcF4GaYHdRQA@mail.gmail.com>
	<CAB-WT32KqqBxTv1FSN=Gvkis=ieoEYVjzRKOwLYrDHmSY3Ewvg@mail.gmail.com>
	<20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
Message-ID: <20140307081632.GA8901@localhost>

On Fri, Mar 07, 2014 at 12:54:19AM +0530, Varun Saraf wrote:

> I have made a temporary proposal. Below is the link to the wiki page.
> 
> http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel

You propose to expose a new "PrecisionModel" object, but not
the exposure of a "GeometryFactory" ? Is that correct ?

Did you understand the proposal of Sean Gillies ?
He proposed to expose no new objects, but simply pretend the
"PrecisionModel" parameters are really parameters of a "context".

What problems do you see with that proposal ?
Have you read the problems I individuated about that ?
Can you think about solutions to them ?

--strk;

> On Thu, Mar 6, 2014 at 5:44 PM, Sandro Santilli <strk at keybit.net> wrote:
> 
> > On Thu, Mar 06, 2014 at 05:23:43PM +0530, Varun Saraf wrote:
> > > Hi,
> > >
> > > We either create the PrecisionModel and the GeometryFactory in the
> > > GEOSContext_setPrecisionModel or pass a pointer to the
> > > new PrecisionModel to this method. But the signature of
> > initGEOS/initGEOS_r
> > > cannot be changed so how to pass it to the initGEOS. Please clarify.
> >
> > Please make proposals.
> > My proposal was in the mail you quoted, did you understand it ?
> >
> > --strk;
> >
> > > On Thu, Feb 20, 2014 at 12:00 PM, Sandro Santilli <strk at keybit.net>
> > wrote:
> > > >
> > > > I agree about making the precision model part of the context.
> > > > But we can't change the initGEOS signature, so we'll need
> > > > some GEOSContext_setPrecisionModel kind of method.
> > > > At that point, we have to decide what happens with a previously
> > > > set PrecisionModel, if it has to be allowed at all.
> > > >
> > > > Deleting the PrecisionModel and the GeometryFactory on finishGEOS
> > > > is fine, but note that this would make any created geometry also
> > > > broken (they hold a reference to the GeometryFactory that created
> > > > them). Not a big deal, as long as it's clearely documented. Dunno
> > > > if it would make sense for the opaque GEOSGeometry type to also
> > > > hold a pointer to the context, just in case...
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >

> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel


-- 

 () ?ASCII ribbon campaign  --  Keep it simple !
 /\ ?http://strk.keybit.net/rants/ascii_mails.txt  

From varunsaraf14 at gmail.com  Fri Mar  7 04:53:02 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Fri, 7 Mar 2014 18:23:02 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140307081632.GA8901@localhost>
References: <CAB-WT30MztQCbFAvHBTYnWEyqM56vPC0C+1SvwxjaNsyLwwJEw@mail.gmail.com>
	<20140212165257.GA3849@localhost>
	<CAJvUf_vGWeM7o0kvJC2vOVSn=oTwq1ewV=B8p7ZcF4GaYHdRQA@mail.gmail.com>
	<CAB-WT32KqqBxTv1FSN=Gvkis=ieoEYVjzRKOwLYrDHmSY3Ewvg@mail.gmail.com>
	<20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
Message-ID: <CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>

Hi,

You had earlier pointed out that initGEOS signature cannot be changed so
the PrecisionModel parameters cannot be the parameters of a context. So
according Sean Gillies requirements, a default geometry factory will be
created first and later the precision model can be changed. Something
similar to this:
handle->geomFactory = GeometryFactory ( const PrecisionModel * pm)

Now coming to what happens to previously set PrecisionModel. If I am not
wrong, a copy of the PrecisionModel is made, so deleting the previously set
PrecisionModel should not make a problem.

Regards,
Varun Saraf

On Fri, Mar 7, 2014 at 1:46 PM, Sandro Santilli <strk at keybit.net> wrote:

> On Fri, Mar 07, 2014 at 12:54:19AM +0530, Varun Saraf wrote:
>
> > I have made a temporary proposal. Below is the link to the wiki page.
> >
> > http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel
>
> You propose to expose a new "PrecisionModel" object, but not
> the exposure of a "GeometryFactory" ? Is that correct ?
>
> Did you understand the proposal of Sean Gillies ?
> He proposed to expose no new objects, but simply pretend the
> "PrecisionModel" parameters are really parameters of a "context".
>
> What problems do you see with that proposal ?
> Have you read the problems I individuated about that ?
> Can you think about solutions to them ?
>
> --strk;
>
> > On Thu, Mar 6, 2014 at 5:44 PM, Sandro Santilli <strk at keybit.net> wrote:
> >
> > > On Thu, Mar 06, 2014 at 05:23:43PM +0530, Varun Saraf wrote:
> > > > Hi,
> > > >
> > > > We either create the PrecisionModel and the GeometryFactory in the
> > > > GEOSContext_setPrecisionModel or pass a pointer to the
> > > > new PrecisionModel to this method. But the signature of
> > > initGEOS/initGEOS_r
> > > > cannot be changed so how to pass it to the initGEOS. Please clarify.
> > >
> > > Please make proposals.
> > > My proposal was in the mail you quoted, did you understand it ?
> > >
> > > --strk;
> > >
> > > > On Thu, Feb 20, 2014 at 12:00 PM, Sandro Santilli <strk at keybit.net>
> > > wrote:
> > > > >
> > > > > I agree about making the precision model part of the context.
> > > > > But we can't change the initGEOS signature, so we'll need
> > > > > some GEOSContext_setPrecisionModel kind of method.
> > > > > At that point, we have to decide what happens with a previously
> > > > > set PrecisionModel, if it has to be allowed at all.
> > > > >
> > > > > Deleting the PrecisionModel and the GeometryFactory on finishGEOS
> > > > > is fine, but note that this would make any created geometry also
> > > > > broken (they hold a reference to the GeometryFactory that created
> > > > > them). Not a big deal, as long as it's clearely documented. Dunno
> > > > > if it would make sense for the opaque GEOSGeometry type to also
> > > > > hold a pointer to the context, just in case...
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >
>
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> --
>
>  ()  ASCII ribbon campaign  --  Keep it simple !
>  /\  http://strk.keybit.net/rants/ascii_mails.txt
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140307/d18fc805/attachment.html>

From strk at keybit.net  Fri Mar  7 05:22:29 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 7 Mar 2014 14:22:29 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
References: <CAJvUf_vGWeM7o0kvJC2vOVSn=oTwq1ewV=B8p7ZcF4GaYHdRQA@mail.gmail.com>
	<CAB-WT32KqqBxTv1FSN=Gvkis=ieoEYVjzRKOwLYrDHmSY3Ewvg@mail.gmail.com>
	<20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
Message-ID: <20140307132229.GC2117@localhost>

On Fri, Mar 07, 2014 at 06:23:02PM +0530, Varun Saraf wrote:
> Hi,
> 
> You had earlier pointed out that initGEOS signature cannot be changed so
> the PrecisionModel parameters cannot be the parameters of a context. So
> according Sean Gillies requirements, a default geometry factory will be
> created first and later the precision model can be changed. Something
> similar to this:
> handle->geomFactory = GeometryFactory ( const PrecisionModel * pm)
> 
> Now coming to what happens to previously set PrecisionModel. If I am not
> wrong, a copy of the PrecisionModel is made, so deleting the previously set
> PrecisionModel should not make a problem.

That's correct, GeometryFactory copies the PrecisionModel to owned space.
The problem is more with the GeometryFactory itself, which is a pointer,
so before overriding geomFactory, the previously-set GeometryFactory will
need to be dealth with. How ?

--strk;

From varunsaraf14 at gmail.com  Fri Mar  7 06:27:49 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Fri, 7 Mar 2014 19:57:49 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140307132229.GC2117@localhost>
References: <CAJvUf_vGWeM7o0kvJC2vOVSn=oTwq1ewV=B8p7ZcF4GaYHdRQA@mail.gmail.com>
	<CAB-WT32KqqBxTv1FSN=Gvkis=ieoEYVjzRKOwLYrDHmSY3Ewvg@mail.gmail.com>
	<20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
Message-ID: <CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>

Hi,

Currently, how is a GeometryFactory deleted and under what circumstances is
the finishGEOS function called? Given a GeometryFactory needs to stay alive
as long as any geometry that has been constructed with that factory. How
can we be sure that no geometry is still active which was created using
this GeometryFactory?

Regards,
Varun Saraf

On Fri, Mar 7, 2014 at 6:52 PM, Sandro Santilli <strk at keybit.net> wrote:

> On Fri, Mar 07, 2014 at 06:23:02PM +0530, Varun Saraf wrote:
> > Hi,
> >
> > You had earlier pointed out that initGEOS signature cannot be changed so
> > the PrecisionModel parameters cannot be the parameters of a context. So
> > according Sean Gillies requirements, a default geometry factory will be
> > created first and later the precision model can be changed. Something
> > similar to this:
> > handle->geomFactory = GeometryFactory ( const PrecisionModel * pm)
> >
> > Now coming to what happens to previously set PrecisionModel. If I am not
> > wrong, a copy of the PrecisionModel is made, so deleting the previously
> set
> > PrecisionModel should not make a problem.
>
> That's correct, GeometryFactory copies the PrecisionModel to owned space.
> The problem is more with the GeometryFactory itself, which is a pointer,
> so before overriding geomFactory, the previously-set GeometryFactory will
> need to be dealth with. How ?
>
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140307/931889ce/attachment.html>

From strk at keybit.net  Fri Mar  7 06:49:05 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 7 Mar 2014 15:49:05 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
References: <20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
Message-ID: <20140307144905.GD2117@localhost>

On Fri, Mar 07, 2014 at 07:57:49PM +0530, Varun Saraf wrote:
> Hi,
> 
> Currently, how is a GeometryFactory deleted and under what circumstances is
> the finishGEOS function called? Given a GeometryFactory needs to stay alive
> as long as any geometry that has been constructed with that factory. How
> can we be sure that no geometry is still active which was created using
> this GeometryFactory?

The finishGEOS_r function is supposedly called when the user is no longer
willing to use a specific "context". The finishGEOS function is supposedly
called when the user is no longer willing to use the library, until next
call to initGEOS. That's how they are documented.

One way to track created geometries would be putting them in a list on
creation and dropping them off the list when destructed (there's a C-API
endpoint for deleting them). But some geometries are created "internally",
as the result of operations. Those geometries would be harder to get on 
that list.

Would such tracking list be worth it ? Or better to just document the
problem and let the user be able to shoot their feet ? 

--strk;

From mika.heiskanen at fmi.fi  Fri Mar  7 09:10:48 2014
From: mika.heiskanen at fmi.fi (Mika Heiskanen)
Date: Fri, 07 Mar 2014 19:10:48 +0200
Subject: [geos-devel] Bug in GEOS polygonizer
Message-ID: <5319FD98.5070104@fmi.fi>

Hi all,

I'm new to GEOS, and this is my first post to this list which I just
subscribed to.

I am quite confident I have found a bug in the GEOS polygonizer.

The problem:

- I have a set of edges which I first polygonize, and then
   call buildGeometry on to get a single multipolygon.

- The last two rings in the multipolygon output should not be
   there, they have already been listed as holes in earlier
   polygons.

Leads:

- The extra rings are listed last in the resulting multipolygon,
   implying they might be on some internal todo-list, but are
   perhaps not correctly removed when added as a hole to the
   multipolygon. This todo-list might be the last geometry
   collection to be added to the resulting multipolygon.

- The second coordinate of the rings is the first coordinate
   of the holes already added. This might imply some internal
   sorting/constructing has been done on the rings but perhaps
   not consistently.

I will try to debug this myself, but since I am completely
new to the code I would appreciate any hints on where to
look. For this purpose I have temporarily made this link available:

   http://beta.fmi.fi/bug.zip

The zip-file contains two files. One named EDGES, containing
about 2000 coordinate pairs forming the resulting polygons by a true
case of contouring temperature over Scandinavia, and
a second file named bug.cpp, a simple test program which uses the
GEOS C++ API and can be compiled in the GEOS source directory as
instructed by the first lines in bug.cpp:

// ./configure  CXXFLAGS="-g -O0" && make
// g++ -std=c++11 -Wno-deprecated-declarations -o bug bug.cpp 
src/.libs/libgeos.a

The test program prints a multipolygon WKT. The last two rings in
it have as their second coordinates:

    664682.9106474313884974 -3956251.4601273220032454
    824358.6671691739466041 -3900967.1810790780000389

The rings are embedded in "(( ))" meaning they are polygons in
a multipolygon. However, if you search backward in the output
the same coordinates appear first in holes embedded in "( )".

I will try to debug this on Monday, until then I'm pretty much
booked. Meanwhile any hints on where to look for the bug would be
appreciated.

This bug seems to occur fairly frequently. The test case covers
only one temperature interval in Scandinavia, the same problem
occurred in a couple of the ~20 temperature intervals I calculated.
The test data was the first one I tried.

Regards,

Mika Heiskanen / Finnish Meteorological Institute

From strk at keybit.net  Fri Mar  7 09:58:52 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 7 Mar 2014 18:58:52 +0100
Subject: [geos-devel] Bug in GEOS polygonizer
In-Reply-To: <5319FD98.5070104@fmi.fi>
References: <5319FD98.5070104@fmi.fi>
Message-ID: <20140307175852.GF2117@localhost>

On Fri, Mar 07, 2014 at 07:10:48PM +0200, Mika Heiskanen wrote:
> Hi all,
> 
> I'm new to GEOS, and this is my first post to this list which I just
> subscribed to.
> 
> I am quite confident I have found a bug in the GEOS polygonizer.
> 
> The problem:
> 
> - I have a set of edges which I first polygonize, and then
>   call buildGeometry on to get a single multipolygon.
> 
> - The last two rings in the multipolygon output should not be
>   there, they have already been listed as holes in earlier
>   polygons.

The polygonizer function will return a polygon with an hole
and the polygon filling the hole. It's the expected behavior.

--strk;


From varunsaraf14 at gmail.com  Fri Mar  7 10:11:26 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Fri, 7 Mar 2014 23:41:26 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140307144905.GD2117@localhost>
References: <20140213181949.GB28332@localhost>
	<CAOodmJqGSgZei11aq+zgsB_eg-4BvcWc4X4cetS7M=zt=83wLQ@mail.gmail.com>
	<20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
Message-ID: <CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>

Hi,

I guess it would be ideal to implement the tracking and we should give it a
shot. I think it will be worth the effort. To just document the problem and
leave it at that would be easier and we can always consider this later on
if need be. Can you tell me more about these internal geometries? Other
geometries can be tracked like you pointed out but what about these.

Regards,
Varun Saraf


On Fri, Mar 7, 2014 at 8:19 PM, Sandro Santilli <strk at keybit.net> wrote:

> On Fri, Mar 07, 2014 at 07:57:49PM +0530, Varun Saraf wrote:
> > Hi,
> >
> > Currently, how is a GeometryFactory deleted and under what circumstances
> is
> > the finishGEOS function called? Given a GeometryFactory needs to stay
> alive
> > as long as any geometry that has been constructed with that factory. How
> > can we be sure that no geometry is still active which was created using
> > this GeometryFactory?
>
> The finishGEOS_r function is supposedly called when the user is no longer
> willing to use a specific "context". The finishGEOS function is supposedly
> called when the user is no longer willing to use the library, until next
> call to initGEOS. That's how they are documented.
>
> One way to track created geometries would be putting them in a list on
> creation and dropping them off the list when destructed (there's a C-API
> endpoint for deleting them). But some geometries are created "internally",
> as the result of operations. Those geometries would be harder to get on
> that list.
>
> Would such tracking list be worth it ? Or better to just document the
> problem and let the user be able to shoot their feet ?
>
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140307/70b8533d/attachment.html>

From strk at keybit.net  Fri Mar  7 10:20:30 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 7 Mar 2014 19:20:30 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
References: <20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
Message-ID: <20140307182030.GA30661@localhost>

On Fri, Mar 07, 2014 at 11:41:26PM +0530, Varun Saraf wrote:
> Hi,
> 
> I guess it would be ideal to implement the tracking and we should give it a
> shot. I think it will be worth the effort. To just document the problem and
> leave it at that would be easier and we can always consider this later on
> if need be. Can you tell me more about these internal geometries? Other
> geometries can be tracked like you pointed out but what about these.

One possibility would be to _forbid_ instanciation of geometries other
than via GeometryFactory, making GeometryFactory a friend of all Geometry
subclasses and making all Geometry subclasses constructors private.

I've no idea about the effect of such a big change on existing clients,
could be a big can of worms.

Another could be intercepting all outgoing Geometries resulting from
C-API exposed operations so to extract the GeometryFactory pointer
and thus adding them to the GeometryFactory-specific list. This one
would sound much safer.

But what would the advantage of such tracking be, exactly ?
It would mean a user can change the "precision model" of a GEOS
context w/out that invalidating/corrupting existing geometries.
Basically would allow users to use the _same_ context to produce
differently modeled geometries. Is that a big advantage compared
to the use of different contexts ? Is it worth the risk ?

Sean proposal was to use different contexts from the start.

--strk;


> On Fri, Mar 7, 2014 at 8:19 PM, Sandro Santilli <strk at keybit.net> wrote:
> 
> > On Fri, Mar 07, 2014 at 07:57:49PM +0530, Varun Saraf wrote:
> > > Hi,
> > >
> > > Currently, how is a GeometryFactory deleted and under what circumstances
> > is
> > > the finishGEOS function called? Given a GeometryFactory needs to stay
> > alive
> > > as long as any geometry that has been constructed with that factory. How
> > > can we be sure that no geometry is still active which was created using
> > > this GeometryFactory?
> >
> > The finishGEOS_r function is supposedly called when the user is no longer
> > willing to use a specific "context". The finishGEOS function is supposedly
> > called when the user is no longer willing to use the library, until next
> > call to initGEOS. That's how they are documented.
> >
> > One way to track created geometries would be putting them in a list on
> > creation and dropping them off the list when destructed (there's a C-API
> > endpoint for deleting them). But some geometries are created "internally",
> > as the result of operations. Those geometries would be harder to get on
> > that list.
> >
> > Would such tracking list be worth it ? Or better to just document the
> > problem and let the user be able to shoot their feet ?
> >
> > --strk;
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> >

> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel


-- 

 () ?ASCII ribbon campaign  --  Keep it simple !
 /\ ?http://strk.keybit.net/rants/ascii_mails.txt  

From varunsaraf14 at gmail.com  Fri Mar  7 10:40:08 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Sat, 8 Mar 2014 00:10:08 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140307182030.GA30661@localhost>
References: <20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
Message-ID: <CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>

Hi,

I think the reason to use different contexts is primarily to use different
precision models. If it is then its unnecessary to delete a context and
create a new one just to change the precision model. I might be wrong here.

Regards,
Varun Saraf


On Fri, Mar 7, 2014 at 11:50 PM, Sandro Santilli <strk at keybit.net> wrote:

> On Fri, Mar 07, 2014 at 11:41:26PM +0530, Varun Saraf wrote:
> > Hi,
> >
> > I guess it would be ideal to implement the tracking and we should give
> it a
> > shot. I think it will be worth the effort. To just document the problem
> and
> > leave it at that would be easier and we can always consider this later on
> > if need be. Can you tell me more about these internal geometries? Other
> > geometries can be tracked like you pointed out but what about these.
>
> One possibility would be to _forbid_ instanciation of geometries other
> than via GeometryFactory, making GeometryFactory a friend of all Geometry
> subclasses and making all Geometry subclasses constructors private.
>
> I've no idea about the effect of such a big change on existing clients,
> could be a big can of worms.
>
> Another could be intercepting all outgoing Geometries resulting from
> C-API exposed operations so to extract the GeometryFactory pointer
> and thus adding them to the GeometryFactory-specific list. This one
> would sound much safer.
>
> But what would the advantage of such tracking be, exactly ?
> It would mean a user can change the "precision model" of a GEOS
> context w/out that invalidating/corrupting existing geometries.
> Basically would allow users to use the _same_ context to produce
> differently modeled geometries. Is that a big advantage compared
> to the use of different contexts ? Is it worth the risk ?
>
> Sean proposal was to use different contexts from the start.
>
> --strk;
>
>
> > On Fri, Mar 7, 2014 at 8:19 PM, Sandro Santilli <strk at keybit.net> wrote:
> >
> > > On Fri, Mar 07, 2014 at 07:57:49PM +0530, Varun Saraf wrote:
> > > > Hi,
> > > >
> > > > Currently, how is a GeometryFactory deleted and under what
> circumstances
> > > is
> > > > the finishGEOS function called? Given a GeometryFactory needs to stay
> > > alive
> > > > as long as any geometry that has been constructed with that factory.
> How
> > > > can we be sure that no geometry is still active which was created
> using
> > > > this GeometryFactory?
> > >
> > > The finishGEOS_r function is supposedly called when the user is no
> longer
> > > willing to use a specific "context". The finishGEOS function is
> supposedly
> > > called when the user is no longer willing to use the library, until
> next
> > > call to initGEOS. That's how they are documented.
> > >
> > > One way to track created geometries would be putting them in a list on
> > > creation and dropping them off the list when destructed (there's a
> C-API
> > > endpoint for deleting them). But some geometries are created
> "internally",
> > > as the result of operations. Those geometries would be harder to get on
> > > that list.
> > >
> > > Would such tracking list be worth it ? Or better to just document the
> > > problem and let the user be able to shoot their feet ?
> > >
> > > --strk;
> > > _______________________________________________
> > > geos-devel mailing list
> > > geos-devel at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/geos-devel
> > >
>
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> --
>
>  ()  ASCII ribbon campaign  --  Keep it simple !
>  /\  http://strk.keybit.net/rants/ascii_mails.txt
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140308/ab907070/attachment-0001.html>

From mika.heiskanen at fmi.fi  Fri Mar  7 10:46:49 2014
From: mika.heiskanen at fmi.fi (Mika Heiskanen)
Date: Fri, 07 Mar 2014 20:46:49 +0200
Subject: [geos-devel] Bug in GEOS polygonizer
In-Reply-To: <20140307175852.GF2117@localhost>
References: <5319FD98.5070104@fmi.fi> <20140307175852.GF2117@localhost>
Message-ID: <531A1419.70809@fmi.fi>

On 03/07/2014 07:58 PM, Sandro Santilli wrote:
> The polygonizer function will return a polygon with an hole
> and the polygon filling the hole. It's the expected behavior.

I see now that you are right:

   http://osdir.com/ml/geos-devel-gis/2009-08/msg00012.html

I was not aware that getting the same polygon twice in
the output was a common requirement in GIS.

However, that is not convenient when converting the output
to SVG. Looks like I'll have to discard any polygon with
even parity. I'll try to find out how that can be done.
A quick grep does not reveal anything though, any tips on how to
accomplish dropping the extra polygons as far as SVG is concerned
would be appreciated. Seems like the feature mentioned in
the above link has not been implemented, at least not in GEOS.

Thank you in advance,

Mika Heiskanen / FMI


From strk at keybit.net  Fri Mar  7 10:57:20 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 7 Mar 2014 19:57:20 +0100
Subject: [geos-devel] Bug in GEOS polygonizer
In-Reply-To: <531A1419.70809@fmi.fi>
References: <5319FD98.5070104@fmi.fi> <20140307175852.GF2117@localhost>
	<531A1419.70809@fmi.fi>
Message-ID: <20140307185720.GB30661@localhost>

On Fri, Mar 07, 2014 at 08:46:49PM +0200, Mika Heiskanen wrote:
> On 03/07/2014 07:58 PM, Sandro Santilli wrote:
> >The polygonizer function will return a polygon with an hole
> >and the polygon filling the hole. It's the expected behavior.
> 
> I see now that you are right:
> 
>   http://osdir.com/ml/geos-devel-gis/2009-08/msg00012.html
> 
> I was not aware that getting the same polygon twice in
> the output was a common requirement in GIS.

You don't get the polygon twice, you get the _ring_ twice,
once with the role of a shell (outer ring) and one with the
role of an hole (inner ring).

> However, that is not convenient when converting the output
> to SVG. Looks like I'll have to discard any polygon with
> even parity. I'll try to find out how that can be done.
> A quick grep does not reveal anything though, any tips on how to
> accomplish dropping the extra polygons as far as SVG is concerned
> would be appreciated. Seems like the feature mentioned in
> the above link has not been implemented, at least not in GEOS.

You may see if Martin Davis ever added that support to the JTS
side of things. If so, it would be nice to port over.

In PostGIS you can find a function that does what you need,
it's called "BuidArea". It was also recently improved:
http://trac.osgeo.org/postgis/ticket/1806

--strk; 

 () ?ASCII ribbon campaign  --  Keep it simple !
 /\ ?http://strk.keybit.net/rants/ascii_mails.txt  

From mika.heiskanen at fmi.fi  Fri Mar  7 12:00:20 2014
From: mika.heiskanen at fmi.fi (Mika Heiskanen)
Date: Fri, 07 Mar 2014 22:00:20 +0200
Subject: [geos-devel] Bug in GEOS polygonizer
In-Reply-To: <20140307185720.GB30661@localhost>
References: <5319FD98.5070104@fmi.fi>
	<20140307175852.GF2117@localhost>	<531A1419.70809@fmi.fi>
	<20140307185720.GB30661@localhost>
Message-ID: <531A2554.4000504@fmi.fi>

On 03/07/2014 08:57 PM, Sandro Santilli wrote:
> You don't get the polygon twice, you get the _ring_ twice,
> once with the role of a shell (outer ring) and one with the
> role of an hole (inner ring).

Sorry for my mistake in the terminology. Thank you for your
explanations, you've been very helpful indeed. If you don't
mind, could you also provide some pointer as to why the
polygonizer returns the same ring twice, I would like to
document our code properly.

> You may see if Martin Davis ever added that support to the JTS
> side of things. If so, it would be nice to port over.
>
> In PostGIS you can find a function that does what you need,
> it's called "BuidArea". It was also recently improved:
> http://trac.osgeo.org/postgis/ticket/1806

Will check both. Thank you very much again for your advice.

Regards,

Mika Heiskanen / FMI


From bontepaarden at gmail.com  Sun Mar  9 05:33:27 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Sun, 9 Mar 2014 13:33:27 +0100
Subject: [geos-devel] Looking for the closest point
In-Reply-To: <CAM2FmMqVXhnyzNA6tJ0CnTLzUmbTW-afcv-9G4V4wn_N+NGRUg@mail.gmail.com>
References: <CAHNf2YTdrHh2d0wWLH6cQDxetqaNAWkwRb_EsanEExXRAZw9WQ@mail.gmail.com>
	<CAM2FmMqVXhnyzNA6tJ0CnTLzUmbTW-afcv-9G4V4wn_N+NGRUg@mail.gmail.com>
Message-ID: <CAHNf2YTJAHBK3f_6g5NXG57jP6GQLwV0PBiO1zbuWzpA4tsHoQ@mail.gmail.com>

Just an update.
We've implemented a new method in MapWinGIS that is using GEOSNearestPoints
and it is doing exactly what I was looking for.

Thanks,



Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*Join us at the MapWindow GIS Conference 2014
<http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*


2014-03-04 20:18 GMT+01:00 Mike Toews <mwtoews at gmail.com>:

> Have you tried using NearestPoints(g1, g2)?
>
> http://geos.refractions.net/ro/doxygen_docs/html/classgeos_1_1operation_1_1distance_1_1DistanceOp.html#a6
> (and for C-API it is called GEOSNearestPoints).
>
> It will return the closest points along on the linestring from another
> geometry (like a point). Normally you might expect one point that is
> closest, however it is conceivable there could be many equidistant
> closest points to another. Another detail is that the returned
> coordinate(s) may not be vertices of the original linestring. If you
> need the closest vertex(es), then you should convert the stream to a
> multipoint before using NearestPoints.
>
> -Mike
>
> On 3 March 2014 22:35, Paul Meems <bontepaarden at gmail.com> wrote:
> >
> > Hi List,
> >
> > We use with MapWinGIS (C++ ActiveX control) GDAL with GEOS.
> >
> > I've got a linestring (stream) and need to know the closest point at
> that stream from a specific location.
> > What I need is the index of the point in the stream and the distance
> from the location to that point.
> >
> > We currently have a custom GetClosestPoint method which is not using
> GEOS, but that is not working when a long linestring is close to the
> location but the points are far away.
> > For example my line has two points, starts in Amsterdam and ends in
> Paris. My location is near Antwerp.
> >
> > Does GEOS have a better method for this? I did searched using Google and
> found several methods/pages but I'm not sure what to use.
> > I also want to make it a generic method that will work with all types of
> lines and polygons.
> >
> > Any advice would be much appreciated.
> >
> > Thanks,
> >
> > Paul
> >
> > Paul Meems
> > Release manager, configuration manager
> > and forum moderator of MapWindow GIS.
> > www.mapwindow.org
> >
> > Owner of MapWindow.nl - Support for
> > Dutch speaking users.
> > www.mapwindow.nl
> >
> >
> > Join us at the MapWindow GIS Conference 2014, in Debrecen Hungary
> >
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140309/a2c4fd6b/attachment.html>

From r.cohen at realty-property.com  Sun Mar  9 04:36:44 2014
From: r.cohen at realty-property.com (Riccardo Cohen)
Date: Sun, 09 Mar 2014 12:36:44 +0100
Subject: [geos-devel] concave hull
Message-ID: <531C524C.9000608@realty-property.com>

I need to generate a concave hull for a collection of points. I found 
only convexHull() in Geos 3.5.0.
But it seems that PostGis uses some GEOS functions to make a concave hull :

http://postgis.net/docs/ST_ConcaveHull.html

Is it possible simply in a C program without having to implement a 
special new algorithm ?

Thanks a lot
-- 
Riccardo Cohen
+33 (0)6 09 83 64 49
Soci?t? Realty-Property.com
16 rue de Belle Isle
37100 Tours
France

<http://www.appartement-maison.fr>

From mika.heiskanen at fmi.fi  Mon Mar 10 06:33:16 2014
From: mika.heiskanen at fmi.fi (Mika Heiskanen)
Date: Mon, 10 Mar 2014 15:33:16 +0200
Subject: [geos-devel] Bug in GEOS polygonizer
In-Reply-To: <20140307185720.GB30661@localhost>
References: <5319FD98.5070104@fmi.fi>
	<20140307175852.GF2117@localhost>	<531A1419.70809@fmi.fi>
	<20140307185720.GB30661@localhost>
Message-ID: <531DBF1C.4070209@fmi.fi>

Hi,

On 03/07/2014 08:57 PM, Sandro Santilli wrote:
> You don't get the polygon twice, you get the _ring_ twice,
> once with the role of a shell (outer ring) and one with the
> role of an hole (inner ring).

[I'm including the above quote to make it clear for any new reader
  that is no bug in GEOS.]

> You may see if Martin Davis ever added that support to the JTS
> side of things. If so, it would be nice to port over.

Did not find any such code either in JTS nor in GEOS.

> In PostGIS you can find a function that does what you need,
> it's called "BuidArea". It was also recently improved:
> http://trac.osgeo.org/postgis/ticket/1806

I programmed a similar algorithm to remove unwanted duplicate
rings from the polygonizer output. The algorithm is a bit
different though.

The code first normalizes the list of polygons returned by the
Polygonizer. This makes sure the coordinates are in a specific
order, which makes finding matching rings easier. For each hole
a matching outer shell is then searched for by comparing the
first edge of the hole with the edge formed by the first and last
(different) coordinates of the shells. The remaining code is similar
to that in PostGIS: count the number of parent shells and remove
polygons with an odd number of parents. I'm not doing a final overlay
operation though, as I don't think my application needs it.

I can make the code available if there is any interest. The
code is about 100 lines, so making the code available as a web
link might be preferable over posting the code here. I wouldn't
mind sending the code in email either to anyone interested.
The code uses the GEOS C++ API.

Regards,

Mika Heiskanen


From varunsaraf14 at gmail.com  Mon Mar 10 07:07:15 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Mon, 10 Mar 2014 19:37:15 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
References: <20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
Message-ID: <CAPfr+rsCNNgdnG=o6-Dw4ajS3QbXGL3tH30yvPUqY7vfv4fePg@mail.gmail.com>

Hi,

The second method you suggested sounds better. But as of now I am not able
to judge how big/risky the implementation will be. Your views on my
previous mail?

Regards,
Varun Saraf


On Sat, Mar 8, 2014 at 12:10 AM, Varun Saraf <varunsaraf14 at gmail.com> wrote:

> Hi,
>
> I think the reason to use different contexts is primarily to use different
> precision models. If it is then its unnecessary to delete a context and
> create a new one just to change the precision model. I might be wrong here.
>
> Regards,
> Varun Saraf
>
>
> On Fri, Mar 7, 2014 at 11:50 PM, Sandro Santilli <strk at keybit.net> wrote:
>
>> On Fri, Mar 07, 2014 at 11:41:26PM +0530, Varun Saraf wrote:
>> > Hi,
>> >
>> > I guess it would be ideal to implement the tracking and we should give
>> it a
>> > shot. I think it will be worth the effort. To just document the problem
>> and
>> > leave it at that would be easier and we can always consider this later
>> on
>> > if need be. Can you tell me more about these internal geometries? Other
>> > geometries can be tracked like you pointed out but what about these.
>>
>> One possibility would be to _forbid_ instanciation of geometries other
>> than via GeometryFactory, making GeometryFactory a friend of all Geometry
>> subclasses and making all Geometry subclasses constructors private.
>>
>> I've no idea about the effect of such a big change on existing clients,
>> could be a big can of worms.
>>
>> Another could be intercepting all outgoing Geometries resulting from
>> C-API exposed operations so to extract the GeometryFactory pointer
>> and thus adding them to the GeometryFactory-specific list. This one
>> would sound much safer.
>>
>> But what would the advantage of such tracking be, exactly ?
>> It would mean a user can change the "precision model" of a GEOS
>> context w/out that invalidating/corrupting existing geometries.
>> Basically would allow users to use the _same_ context to produce
>> differently modeled geometries. Is that a big advantage compared
>> to the use of different contexts ? Is it worth the risk ?
>>
>> Sean proposal was to use different contexts from the start.
>>
>> --strk;
>>
>>
>> > On Fri, Mar 7, 2014 at 8:19 PM, Sandro Santilli <strk at keybit.net>
>> wrote:
>> >
>> > > On Fri, Mar 07, 2014 at 07:57:49PM +0530, Varun Saraf wrote:
>> > > > Hi,
>> > > >
>> > > > Currently, how is a GeometryFactory deleted and under what
>> circumstances
>> > > is
>> > > > the finishGEOS function called? Given a GeometryFactory needs to
>> stay
>> > > alive
>> > > > as long as any geometry that has been constructed with that
>> factory. How
>> > > > can we be sure that no geometry is still active which was created
>> using
>> > > > this GeometryFactory?
>> > >
>> > > The finishGEOS_r function is supposedly called when the user is no
>> longer
>> > > willing to use a specific "context". The finishGEOS function is
>> supposedly
>> > > called when the user is no longer willing to use the library, until
>> next
>> > > call to initGEOS. That's how they are documented.
>> > >
>> > > One way to track created geometries would be putting them in a list on
>> > > creation and dropping them off the list when destructed (there's a
>> C-API
>> > > endpoint for deleting them). But some geometries are created
>> "internally",
>> > > as the result of operations. Those geometries would be harder to get
>> on
>> > > that list.
>> > >
>> > > Would such tracking list be worth it ? Or better to just document the
>> > > problem and let the user be able to shoot their feet ?
>> > >
>> > > --strk;
>> > > _______________________________________________
>> > > geos-devel mailing list
>> > > geos-devel at lists.osgeo.org
>> > > http://lists.osgeo.org/mailman/listinfo/geos-devel
>> > >
>>
>> > _______________________________________________
>> > geos-devel mailing list
>> > geos-devel at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>
>> --
>>
>>  ()  ASCII ribbon campaign  --  Keep it simple !
>>  /\  http://strk.keybit.net/rants/ascii_mails.txt
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140310/e324341f/attachment.html>

From dshean at gmail.com  Tue Mar 11 12:29:15 2014
From: dshean at gmail.com (David Shean)
Date: Tue, 11 Mar 2014 12:29:15 -0700
Subject: [geos-devel] polar geometry spanning 0-360 lon
Message-ID: <DF3DD423-8853-4298-81C1-D787A5C675D7@gmail.com>

Hi list,
I've run into this a few times now, and I'm hoping someone can point me in the right direction.  I primarily use GEOS through the ogr API to work with polar data in either EPSG:3031 or EPSG:3413.  When I work with smaller geometries in these projections, I always convert to WGS84 before performing any operations, and this works well.  However, even this seems to fail for large polygons that span 0-360 around the pole:

g1 = POLYGON ((-45.0 -54.673528789190144,45.00716107726717 -54.669377943743747,135.0 -54.66522770972778,-135.00716107726717 -54.669377943743747,-45.0 -54.673528789190144))
g2 = POLYGON ((-45.0 -54.673528789190144,45.00255773311347 -54.672046393296853,135.0 -54.670564075397799,-135.002557733113463 -54.672046393296853,-45.0 -54.673528789190144))
g1.Intersection(g2)
POLYGON ((3.650402839379899 -54.671285186562592,-45.0 -54.673528789190144,-83.299396823994513 -54.67176254220486,3.650402839379899 -54.671285186562592))

For reference, the EPSG:3031 geom is POLYGON ((-3333500 3333500,3333500 3333500,3333500 -3333500,-3333500 -3333500,-3333500 3333500)).

This looks like a bug to me, but maybe there is a way to specify that the polygon should include minlat -90?  Thanks.
-David



From mwtoews at gmail.com  Tue Mar 11 14:53:58 2014
From: mwtoews at gmail.com (Mike Toews)
Date: Wed, 12 Mar 2014 10:53:58 +1300
Subject: [geos-devel] polar geometry spanning 0-360 lon
In-Reply-To: <DF3DD423-8853-4298-81C1-D787A5C675D7@gmail.com>
References: <DF3DD423-8853-4298-81C1-D787A5C675D7@gmail.com>
Message-ID: <CAM2FmMqn2Dfon4NnHXYrRDA229E1P+49gmqNyLB94KwFTM=Jvg@mail.gmail.com>

Hi David,

GEOS (and JTS) use Cartesian space, so concepts of latitude and
longitude are irrelevant. The choice of projection and precision are
important for spatial operations, but these need to be handled
externally using libraries like PROJ.4, or other logic for handling
latitude and longitude.

The two valid polygons look like skinny lines in a Cartesian
representation of EPSG:4326, but look more like squares when
transformed to EPSG:3031. It's not clear what you were expecting, so I
cant tell what is considered a "fail". The intersection results are
the same for JTS, and does not seem like a bug to me.

Usually the best approach is to do spatial operations with GEOS in a
projected Cartesian space (on either pole, for your case). But only do
this if it is within the range of the projection's limits. This is
further limited by the size of the geometry, as sometimes they don't
fit within the projection nicely. But these are general GIS concerns
that are out of scope for GEOS to consider.

-Mike

On 12 March 2014 08:29, David Shean <dshean at gmail.com> wrote:
> Hi list,
> I've run into this a few times now, and I'm hoping someone can point me in the right direction.  I primarily use GEOS through the ogr API to work with polar data in either EPSG:3031 or EPSG:3413.  When I work with smaller geometries in these projections, I always convert to WGS84 before performing any operations, and this works well.  However, even this seems to fail for large polygons that span 0-360 around the pole:
>
> g1 = POLYGON ((-45.0 -54.673528789190144,45.00716107726717 -54.669377943743747,135.0 -54.66522770972778,-135.00716107726717 -54.669377943743747,-45.0 -54.673528789190144))
> g2 = POLYGON ((-45.0 -54.673528789190144,45.00255773311347 -54.672046393296853,135.0 -54.670564075397799,-135.002557733113463 -54.672046393296853,-45.0 -54.673528789190144))
> g1.Intersection(g2)
> POLYGON ((3.650402839379899 -54.671285186562592,-45.0 -54.673528789190144,-83.299396823994513 -54.67176254220486,3.650402839379899 -54.671285186562592))
>
> For reference, the EPSG:3031 geom is POLYGON ((-3333500 3333500,3333500 3333500,3333500 -3333500,-3333500 -3333500,-3333500 3333500)).
>
> This looks like a bug to me, but maybe there is a way to specify that the polygon should include minlat -90?  Thanks.
> -David

From dshean at gmail.com  Tue Mar 11 15:37:52 2014
From: dshean at gmail.com (David Shean)
Date: Tue, 11 Mar 2014 15:37:52 -0700
Subject: [geos-devel] polar geometry spanning 0-360 lon
In-Reply-To: <CAM2FmMqn2Dfon4NnHXYrRDA229E1P+49gmqNyLB94KwFTM=Jvg@mail.gmail.com>
References: <DF3DD423-8853-4298-81C1-D787A5C675D7@gmail.com>
	<CAM2FmMqn2Dfon4NnHXYrRDA229E1P+49gmqNyLB94KwFTM=Jvg@mail.gmail.com>
Message-ID: <83657635-D74D-4812-B234-0D65968307DD@gmail.com>

On Mar 11, 2014, at 2:53 PM, Mike Toews <mwtoews at gmail.com> wrote:

> Hi David,
> 
> GEOS (and JTS) use Cartesian space, so concepts of latitude and
> longitude are irrelevant.

Ah, good to know.

> The choice of projection and precision are
> important for spatial operations, but these need to be handled
> externally using libraries like PROJ.4, or other logic for handling
> latitude and longitude.
> 
> The two valid polygons look like skinny lines in a Cartesian
> representation of EPSG:4326, but look more like squares when
> transformed to EPSG:3031. It's not clear what you were expecting, so I
> cant tell what is considered a "fail". The intersection results are
> the same for JTS, and does not seem like a bug to me.
> 
> Usually the best approach is to do spatial operations with GEOS in a
> projected Cartesian space (on either pole, for your case). But only do
> this if it is within the range of the projection's limits. This is
> further limited by the size of the geometry, as sometimes they don't
> fit within the projection nicely. But these are general GIS concerns
> that are out of scope for GEOS to consider.

This all makes sense.  Early on, I implemented the conversion to wgs84 for intersection operations to handle near-global geometries that exceeded the limits of the polar stereographic projections.  It sounds like I should always perform the intersection in projected coords, and handle these cases separately.  

Thanks for the quick response.

> 
> -Mike
> 
> On 12 March 2014 08:29, David Shean <dshean at gmail.com> wrote:
>> Hi list,
>> I've run into this a few times now, and I'm hoping someone can point me in the right direction.  I primarily use GEOS through the ogr API to work with polar data in either EPSG:3031 or EPSG:3413.  When I work with smaller geometries in these projections, I always convert to WGS84 before performing any operations, and this works well.  However, even this seems to fail for large polygons that span 0-360 around the pole:
>> 
>> g1 = POLYGON ((-45.0 -54.673528789190144,45.00716107726717 -54.669377943743747,135.0 -54.66522770972778,-135.00716107726717 -54.669377943743747,-45.0 -54.673528789190144))
>> g2 = POLYGON ((-45.0 -54.673528789190144,45.00255773311347 -54.672046393296853,135.0 -54.670564075397799,-135.002557733113463 -54.672046393296853,-45.0 -54.673528789190144))
>> g1.Intersection(g2)
>> POLYGON ((3.650402839379899 -54.671285186562592,-45.0 -54.673528789190144,-83.299396823994513 -54.67176254220486,3.650402839379899 -54.671285186562592))
>> 
>> For reference, the EPSG:3031 geom is POLYGON ((-3333500 3333500,3333500 3333500,3333500 -3333500,-3333500 -3333500,-3333500 3333500)).
>> 
>> This looks like a bug to me, but maybe there is a way to specify that the polygon should include minlat -90?  Thanks.
>> -David
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel


From pramsey at cleverelephant.ca  Wed Mar 12 03:16:00 2014
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed, 12 Mar 2014 06:16:00 -0400
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
References: <20140220063045.GA7415@localhost>
	<CAPfr+rvCOa_tNoo8EhxaaQ-6QfsAOGcuVng1=ozfBfcnvO0SUg@mail.gmail.com>
	<20140306121458.GH6080@localhost>
	<CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
Message-ID: <CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>

I would tend to expect choosing a single precision model and working
with it for a long time to be a more common usage than swapping
between lots of models. My bias.

P.

On Fri, Mar 7, 2014 at 1:40 PM, Varun Saraf <varunsaraf14 at gmail.com> wrote:
> Hi,
>
> I think the reason to use different contexts is primarily to use different
> precision models. If it is then its unnecessary to delete a context and
> create a new one just to change the precision model. I might be wrong here.
>
> Regards,
> Varun Saraf
>
>
> On Fri, Mar 7, 2014 at 11:50 PM, Sandro Santilli <strk at keybit.net> wrote:
>>
>> On Fri, Mar 07, 2014 at 11:41:26PM +0530, Varun Saraf wrote:
>> > Hi,
>> >
>> > I guess it would be ideal to implement the tracking and we should give
>> > it a
>> > shot. I think it will be worth the effort. To just document the problem
>> > and
>> > leave it at that would be easier and we can always consider this later
>> > on
>> > if need be. Can you tell me more about these internal geometries? Other
>> > geometries can be tracked like you pointed out but what about these.
>>
>> One possibility would be to _forbid_ instanciation of geometries other
>> than via GeometryFactory, making GeometryFactory a friend of all Geometry
>> subclasses and making all Geometry subclasses constructors private.
>>
>> I've no idea about the effect of such a big change on existing clients,
>> could be a big can of worms.
>>
>> Another could be intercepting all outgoing Geometries resulting from
>> C-API exposed operations so to extract the GeometryFactory pointer
>> and thus adding them to the GeometryFactory-specific list. This one
>> would sound much safer.
>>
>> But what would the advantage of such tracking be, exactly ?
>> It would mean a user can change the "precision model" of a GEOS
>> context w/out that invalidating/corrupting existing geometries.
>> Basically would allow users to use the _same_ context to produce
>> differently modeled geometries. Is that a big advantage compared
>> to the use of different contexts ? Is it worth the risk ?
>>
>> Sean proposal was to use different contexts from the start.
>>
>> --strk;
>>
>>
>> > On Fri, Mar 7, 2014 at 8:19 PM, Sandro Santilli <strk at keybit.net> wrote:
>> >
>> > > On Fri, Mar 07, 2014 at 07:57:49PM +0530, Varun Saraf wrote:
>> > > > Hi,
>> > > >
>> > > > Currently, how is a GeometryFactory deleted and under what
>> > > > circumstances
>> > > is
>> > > > the finishGEOS function called? Given a GeometryFactory needs to
>> > > > stay
>> > > alive
>> > > > as long as any geometry that has been constructed with that factory.
>> > > > How
>> > > > can we be sure that no geometry is still active which was created
>> > > > using
>> > > > this GeometryFactory?
>> > >
>> > > The finishGEOS_r function is supposedly called when the user is no
>> > > longer
>> > > willing to use a specific "context". The finishGEOS function is
>> > > supposedly
>> > > called when the user is no longer willing to use the library, until
>> > > next
>> > > call to initGEOS. That's how they are documented.
>> > >
>> > > One way to track created geometries would be putting them in a list on
>> > > creation and dropping them off the list when destructed (there's a
>> > > C-API
>> > > endpoint for deleting them). But some geometries are created
>> > > "internally",
>> > > as the result of operations. Those geometries would be harder to get
>> > > on
>> > > that list.
>> > >
>> > > Would such tracking list be worth it ? Or better to just document the
>> > > problem and let the user be able to shoot their feet ?
>> > >
>> > > --strk;
>> > > _______________________________________________
>> > > geos-devel mailing list
>> > > geos-devel at lists.osgeo.org
>> > > http://lists.osgeo.org/mailman/listinfo/geos-devel
>> > >
>>
>> > _______________________________________________
>> > geos-devel mailing list
>> > geos-devel at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>>
>> --
>>
>>  ()  ASCII ribbon campaign  --  Keep it simple !
>>  /\  http://strk.keybit.net/rants/ascii_mails.txt
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From strk at keybit.net  Wed Mar 12 05:46:24 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 12 Mar 2014 13:46:24 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
References: <CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
Message-ID: <20140312124624.GF5956@localhost>

On Wed, Mar 12, 2014 at 06:16:00AM -0400, Paul Ramsey wrote:
> I would tend to expect choosing a single precision model and working
> with it for a long time to be a more common usage than swapping
> between lots of models. My bias.

I also find this to be a more likely usecase.

--strk;

From varunsaraf14 at gmail.com  Wed Mar 12 06:16:15 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Wed, 12 Mar 2014 18:46:15 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140312124624.GF5956@localhost>
References: <CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
Message-ID: <CAPfr+rtvfhFidj9F-J22AzRmtrX_Eexp-PO3E2ZoEVPa4r_6AQ@mail.gmail.com>

Hi,

So I guess we just document the issue and leave it at that. On a side note,
when the geometry becomes broken on deleting its geometry factory, what are
the side effects. I mean to ask does it not affect much if the geometry's
geometry factory pointer points to NULL or the user has to specifically
keep this in mind and ensure this situation never arises.

Also, how should I go forward from here?

Regards,
Varun Saraf


On Wed, Mar 12, 2014 at 6:16 PM, Sandro Santilli <strk at keybit.net> wrote:

> On Wed, Mar 12, 2014 at 06:16:00AM -0400, Paul Ramsey wrote:
> > I would tend to expect choosing a single precision model and working
> > with it for a long time to be a more common usage than swapping
> > between lots of models. My bias.
>
> I also find this to be a more likely usecase.
>
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140312/31421d3c/attachment-0001.html>

From strk at keybit.net  Wed Mar 12 07:11:52 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 12 Mar 2014 15:11:52 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+rtvfhFidj9F-J22AzRmtrX_Eexp-PO3E2ZoEVPa4r_6AQ@mail.gmail.com>
References: <CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
	<CAPfr+rtvfhFidj9F-J22AzRmtrX_Eexp-PO3E2ZoEVPa4r_6AQ@mail.gmail.com>
Message-ID: <20140312141152.GG5956@localhost>

On Wed, Mar 12, 2014 at 06:46:15PM +0530, Varun Saraf wrote:
> Hi,
> 
> So I guess we just document the issue and leave it at that. On a side note,
> when the geometry becomes broken on deleting its geometry factory, what are
> the side effects.

Using the geometry in some operations would result in the code accessing
arbitrary memory with undefined behavior.

--strk;

From varunsaraf14 at gmail.com  Wed Mar 12 10:18:23 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Wed, 12 Mar 2014 22:48:23 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140312141152.GG5956@localhost>
References: <CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
	<CAPfr+rtvfhFidj9F-J22AzRmtrX_Eexp-PO3E2ZoEVPa4r_6AQ@mail.gmail.com>
	<20140312141152.GG5956@localhost>
Message-ID: <CAPfr+rsDq=J5-seSUhKvCSLn799rikMdS=mb_ti0Vy9iH735sQ@mail.gmail.com>

Hi,

We did not finalize the parameters to be passed for creation of the new
precision model. I had earlier proposed a model with fixed precision with
the following arguments: double newScale, double newOffsetX, double
newOffsetY. Should we include other arguments or these are fine?

Regards,
Varun Saraf


On Wed, Mar 12, 2014 at 7:41 PM, Sandro Santilli <strk at keybit.net> wrote:

> On Wed, Mar 12, 2014 at 06:46:15PM +0530, Varun Saraf wrote:
> > Hi,
> >
> > So I guess we just document the issue and leave it at that. On a side
> note,
> > when the geometry becomes broken on deleting its geometry factory, what
> are
> > the side effects.
>
> Using the geometry in some operations would result in the code accessing
> arbitrary memory with undefined behavior.
>
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140312/edb53dfb/attachment.html>

From strk at keybit.net  Wed Mar 12 10:30:44 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 12 Mar 2014 18:30:44 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAPfr+rsDq=J5-seSUhKvCSLn799rikMdS=mb_ti0Vy9iH735sQ@mail.gmail.com>
References: <CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
	<CAPfr+rtvfhFidj9F-J22AzRmtrX_Eexp-PO3E2ZoEVPa4r_6AQ@mail.gmail.com>
	<20140312141152.GG5956@localhost>
	<CAPfr+rsDq=J5-seSUhKvCSLn799rikMdS=mb_ti0Vy9iH735sQ@mail.gmail.com>
Message-ID: <20140312173044.GA25029@localhost>

On Wed, Mar 12, 2014 at 10:48:23PM +0530, Varun Saraf wrote:
> Hi,
> 
> We did not finalize the parameters to be passed for creation of the new
> precision model. I had earlier proposed a model with fixed precision with
> the following arguments: double newScale, double newOffsetX, double
> newOffsetY. Should we include other arguments or these are fine?

There's nothing else in a PrecisionModel, so those are fine.

--strk;

From geos-trac at osgeo.org  Fri Mar 14 15:52:09 2014
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 14 Mar 2014 22:52:09 -0000
Subject: [geos-devel] [GEOS] #686: cmath needed for two tests
Message-ID: <047.1a787ac83e960701bc84c83ff7f791c5@osgeo.org>

#686: cmath needed for two tests
------------------------+---------------------------------------------------
 Reporter:  goatbar     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.3                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Could someone be so kind as to add
 {{{
 #include <cmath>
 }}}
 to these two files?  We have a picky compiler demanding cmath for the
 proper definition of ISNAN.

   * tests/unit/geom/CoordinateArraySequenceTest.cpp
   * tests/unit/io/WKBWriterTest.cpp

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/686>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Sun Mar 16 09:08:42 2014
From: geos-trac at osgeo.org (GEOS)
Date: Sun, 16 Mar 2014 16:08:42 -0000
Subject: [geos-devel] [GEOS] #686: cmath needed for two tests
In-Reply-To: <047.1a787ac83e960701bc84c83ff7f791c5@osgeo.org>
References: <047.1a787ac83e960701bc84c83ff7f791c5@osgeo.org>
Message-ID: <056.36dc21709a36be8b3f20a8b1eb9c93a7@osgeo.org>

#686: cmath needed for two tests
------------------------+---------------------------------------------------
 Reporter:  goatbar     |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.4.3                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 r3975 in trunk

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/686#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From sean.gillies at gmail.com  Sun Mar 16 11:24:19 2014
From: sean.gillies at gmail.com (Sean Gillies)
Date: Sun, 16 Mar 2014 12:24:19 -0600
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140312124624.GF5956@localhost>
References: <CAPfr+rsKYUxJ+zwjcefYk4bnBOdyWCO=hT-1jLH66KqaxBpF8w@mail.gmail.com>
	<20140307081632.GA8901@localhost>
	<CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
Message-ID: <CAOodmJp2td042o+PX=aTjJZet_V0q6QLc2g=QOSicHHXPLAXMA@mail.gmail.com>

On Mar 12, 2014 6:46 AM, "Sandro Santilli" <strk at keybit.net> wrote:

> On Wed, Mar 12, 2014 at 06:16:00AM -0400, Paul Ramsey wrote:
> > I would tend to expect choosing a single precision model and working
> > with it for a long time to be a more common usage than swapping
> > between lots of models. My bias.
>
> I also find this to be a more likely usecase.
>
> --strk;
>

While agree that one model at a time (and two at the most) is the most
likely use case, I'm concerned about designs that limit the number. I'm
also reversing myself on whether there should be a precision model in the
global context. I'd rather GEOS did not add more global state.

Please see the wiki page
http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel for my (Shapely)
requirements.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140316/48766efd/attachment.html>

From r.cohen at realty-property.com  Sun Mar 16 12:49:42 2014
From: r.cohen at realty-property.com (Riccardo Cohen)
Date: Sun, 16 Mar 2014 20:49:42 +0100
Subject: [geos-devel] concave hull
In-Reply-To: <531C524C.9000608@realty-property.com>
References: <531C524C.9000608@realty-property.com>
Message-ID: <53260056.9050008@realty-property.com>

Hello
Is there anyone who can guide me to a piece of answer please ?
Thanks a lot.

On 09/03/2014 12:36, Riccardo Cohen wrote:
> I need to generate a concave hull for a collection of points. I found
> only convexHull() in Geos 3.5.0.
> But it seems that PostGis uses some GEOS functions to make a concave hull :
>
> http://postgis.net/docs/ST_ConcaveHull.html
>
> Is it possible simply in a C program without having to implement a
> special new algorithm ?
>
> Thanks a lot

-- 
Riccardo Cohen
+33 (0)6 09 83 64 49
Soci?t? Realty-Property.com
16 rue de Belle Isle
37100 Tours
France

<http://www.appartement-maison.fr>

From mwtoews at gmail.com  Sun Mar 16 14:01:23 2014
From: mwtoews at gmail.com (Mike Toews)
Date: Mon, 17 Mar 2014 10:01:23 +1300
Subject: [geos-devel] concave hull
In-Reply-To: <531C524C.9000608@realty-property.com>
References: <531C524C.9000608@realty-property.com>
Message-ID: <CAM2FmMoj-7n66cB3vGvqrS4L+WEVcVsVtx=5Qo=kupp3jzSOug@mail.gmail.com>

On 10 March 2014 00:36, Riccardo Cohen <r.cohen at realty-property.com> wrote:
> I need to generate a concave hull for a collection of points. I found only
> convexHull() in Geos 3.5.0.
> But it seems that PostGis uses some GEOS functions to make a concave hull :
>
> http://postgis.net/docs/ST_ConcaveHull.html
>
> Is it possible simply in a C program without having to implement a special
> new algorithm ?
>
> Thanks a lot

No C library function is available for ConcaveHull. The algorithm is
implemented in PL/pgSQL:
http://trac.osgeo.org/postgis/browser/trunk/postgis/postgis.sql.in#L5098

The code could probably be adapted to a somewhat lengthy C routine,
which would call several GEOS functions. However, some of the
underlying functions found in the algorithm are not available through
GEOS, such as:
 * ST_Translate, since there are oddly no affine transformation
   abilities with GEOS
 * ST_ForceSFS, which is part of liblwgeom

-Mike

From geos-trac at osgeo.org  Sun Mar 16 14:55:15 2014
From: geos-trac at osgeo.org (GEOS)
Date: Sun, 16 Mar 2014 21:55:15 -0000
Subject: [geos-devel] [GEOS] #687: Affine transformation functions
Message-ID: <047.1e34eae1c4dbdde77bf1958a16d7d2a0@osgeo.org>

#687: Affine transformation functions
-----------------------------+----------------------------------------------
 Reporter:  mwtoews          |       Owner:  geos-devel@?              
     Type:  enhancement      |      Status:  new                       
 Priority:  major            |   Milestone:  GEOS Future               
Component:  Default          |     Version:                            
 Severity:  Feature Request  |    Keywords:                            
-----------------------------+----------------------------------------------
 This is a feature request to apply a 2D or 3D affine transformation to a
 geometry. The routine should ideally be applied in-place, only changing
 the values of the vertices.

 There are several implementations of the affine transform, including
 [https://github.com/Toblerity/Shapely/blob/master/shapely/affinity.py#L8
 shapely.affinity] and PostGIS (e.g.
 [http://trac.osgeo.org/postgis/browser/trunk/liblwgeom/ptarray.c#L1670
 here] and
 [http://trac.osgeo.org/postgis/browser/trunk/postgis/lwgeom_functions_basic.c#L2532
 here]).

 Derived functions, such as "rotate", "scale", "transform" and "skew" can
 be build by client applications by assembling the appropriate matrix
 parameters. As for the function signature, I think the best approach would
 be to keep the same matrix order of {{{[a, b, d, e, xoff, yoff]}}} for 2D
 and {{{[a, b, c, d, e, f, g, h, i, xoff, yoff, zoff]}}} for 3D. Whether or
 not these should be fed into a single function as either a 6 or 12-length
 double array, or as two functions with fixed arguments is debatable.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/687>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From frederik at remote.org  Sun Mar 16 14:34:32 2014
From: frederik at remote.org (Frederik Ramm)
Date: Sun, 16 Mar 2014 22:34:32 +0100
Subject: [geos-devel] concave hull
In-Reply-To: <53260056.9050008@realty-property.com>
References: <531C524C.9000608@realty-property.com>
	<53260056.9050008@realty-property.com>
Message-ID: <532618E8.2010308@remote.org>

Hi,

On 16.03.2014 20:49, Riccardo Cohen wrote:
>> I need to generate a concave hull for a collection of points. 

[...]

>> Is it possible simply in a C program without having to implement a
>> special new algorithm ?

If you strike out the "simply" then use the CGAL library which has
concave hulls.

Bye
Frederik

-- 
Frederik Ramm  ##  eMail frederik at remote.org  ##  N49?00'09" E008?23'33"

From r.cohen at realty-property.com  Mon Mar 17 00:03:25 2014
From: r.cohen at realty-property.com (Riccardo Cohen)
Date: Mon, 17 Mar 2014 08:03:25 +0100
Subject: [geos-devel] concave hull
In-Reply-To: <532618E8.2010308@remote.org>
References: <531C524C.9000608@realty-property.com>	<53260056.9050008@realty-property.com>
	<532618E8.2010308@remote.org>
Message-ID: <53269E3D.9040406@realty-property.com>

Thanks a lot for all your responses.
I did not know GCAL and I'm rather impressed. I'll try it some times.

Thanks again.

On 16/03/2014 22:34, Frederik Ramm wrote:
> Hi,
>
> On 16.03.2014 20:49, Riccardo Cohen wrote:
>>> I need to generate a concave hull for a collection of points.
>
> [...]
>
>>> Is it possible simply in a C program without having to implement a
>>> special new algorithm ?
>
> If you strike out the "simply" then use the CGAL library which has
> concave hulls.
>
> Bye
> Frederik
>

-- 
Riccardo Cohen
+33 (0)6 09 83 64 49
Soci?t? Realty-Property.com
16 rue de Belle Isle
37100 Tours
France

<http://www.appartement-maison.fr>

From geos-trac at osgeo.org  Mon Mar 17 01:12:22 2014
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 17 Mar 2014 08:12:22 -0000
Subject: [geos-devel] [GEOS] #687: Affine transformation functions
In-Reply-To: <047.1e34eae1c4dbdde77bf1958a16d7d2a0@osgeo.org>
References: <047.1e34eae1c4dbdde77bf1958a16d7d2a0@osgeo.org>
Message-ID: <056.ba1527c8ed61f3cc1b401438731a9774@osgeo.org>

#687: Affine transformation functions
-----------------------------+----------------------------------------------
 Reporter:  mwtoews          |       Owner:  geos-devel@?              
     Type:  enhancement      |      Status:  new                       
 Priority:  major            |   Milestone:  GEOS Future               
Component:  Default          |     Version:                            
 Severity:  Feature Request  |    Keywords:                            
-----------------------------+----------------------------------------------

Comment(by mwtoews):

 And of course there is a
 [http://www.vividsolutions.com/jts/javadoc/com/vividsolutions/jts/geom/util/AffineTransformation.html
 JTS AffineTransformation Class], which seems the ideal way to define how
 this should be defined in GEOS.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/687#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From strk at keybit.net  Mon Mar 17 01:31:17 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 17 Mar 2014 09:31:17 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAOodmJp2td042o+PX=aTjJZet_V0q6QLc2g=QOSicHHXPLAXMA@mail.gmail.com>
References: <CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
	<CAOodmJp2td042o+PX=aTjJZet_V0q6QLc2g=QOSicHHXPLAXMA@mail.gmail.com>
Message-ID: <20140317083117.GA4417@localhost>

On Sun, Mar 16, 2014 at 12:24:19PM -0600, Sean Gillies wrote:
> On Mar 12, 2014 6:46 AM, "Sandro Santilli" <strk at keybit.net> wrote:
> 
> > On Wed, Mar 12, 2014 at 06:16:00AM -0400, Paul Ramsey wrote:
> > > I would tend to expect choosing a single precision model and working
> > > with it for a long time to be a more common usage than swapping
> > > between lots of models. My bias.
> >
> > I also find this to be a more likely usecase.
> 
> While agree that one model at a time (and two at the most) is the most
> likely use case, I'm concerned about designs that limit the number. I'm
> also reversing myself on whether there should be a precision model in the
> global context. I'd rather GEOS did not add more global state.
> 
> Please see the wiki page
> http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel for my (Shapely)
> requirements.

So what would you think about "parking" a pointer to the client-owned
GeometryFactory into the "context" right before calling the geometry
creation functions ? Such "parking" method would return the old
GeometryFactory, so that you can pass it back. You'd only own the 
GeometryFactory objects you'd have explicitly created.

I'm talking about GeometryFactory rather than PrecisionModel because
the object referenced  by geometries is really a GeometryFactory,
not a PrecisionModel. A GeometryFactory also references a
CoordinateSequenceFactory.

--strk;

From sean.gillies at gmail.com  Mon Mar 17 10:16:05 2014
From: sean.gillies at gmail.com (Sean Gillies)
Date: Mon, 17 Mar 2014 11:16:05 -0600
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <20140317083117.GA4417@localhost>
References: <CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
	<CAOodmJp2td042o+PX=aTjJZet_V0q6QLc2g=QOSicHHXPLAXMA@mail.gmail.com>
	<20140317083117.GA4417@localhost>
Message-ID: <CAOodmJp-iosWhgScxZq+2-1H5FjMtNet4+N0dnz1Gn47CFav5w@mail.gmail.com>

On Mon, Mar 17, 2014 at 2:31 AM, Sandro Santilli <strk at keybit.net> wrote:

> On Sun, Mar 16, 2014 at 12:24:19PM -0600, Sean Gillies wrote:
> > On Mar 12, 2014 6:46 AM, "Sandro Santilli" <strk at keybit.net> wrote:
> >
> > > On Wed, Mar 12, 2014 at 06:16:00AM -0400, Paul Ramsey wrote:
> > > > I would tend to expect choosing a single precision model and working
> > > > with it for a long time to be a more common usage than swapping
> > > > between lots of models. My bias.
> > >
> > > I also find this to be a more likely usecase.
> >
> > While agree that one model at a time (and two at the most) is the most
> > likely use case, I'm concerned about designs that limit the number. I'm
> > also reversing myself on whether there should be a precision model in the
> > global context. I'd rather GEOS did not add more global state.
> >
> > Please see the wiki page
> > http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel for my
> (Shapely)
> > requirements.
>
> So what would you think about "parking" a pointer to the client-owned
> GeometryFactory into the "context" right before calling the geometry
> creation functions ? Such "parking" method would return the old
> GeometryFactory, so that you can pass it back. You'd only own the
> GeometryFactory objects you'd have explicitly created.
>
> I'm talking about GeometryFactory rather than PrecisionModel because
> the object referenced  by geometries is really a GeometryFactory,
> not a PrecisionModel. A GeometryFactory also references a
> CoordinateSequenceFactory.
>

Sounds practical. Geometry objects will have to park their factories before
every operation, right? Offloading complexity to client code seems fair
enough.

I've updated my wiki notes to refer to geometry factories instead of models.


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140317/f8b40aed/attachment-0001.html>

From varunsaraf14 at gmail.com  Wed Mar 19 12:17:50 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Thu, 20 Mar 2014 00:47:50 +0530
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAOodmJp-iosWhgScxZq+2-1H5FjMtNet4+N0dnz1Gn47CFav5w@mail.gmail.com>
References: <CAPfr+ruMRkju9A65ePgATecoktwsegxNvPv4PLRVAaMkgGMHUQ@mail.gmail.com>
	<20140307132229.GC2117@localhost>
	<CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
	<CAOodmJp2td042o+PX=aTjJZet_V0q6QLc2g=QOSicHHXPLAXMA@mail.gmail.com>
	<20140317083117.GA4417@localhost>
	<CAOodmJp-iosWhgScxZq+2-1H5FjMtNet4+N0dnz1Gn47CFav5w@mail.gmail.com>
Message-ID: <CAPfr+rsM5GVy-iBTsWS1RKBWQ9Xncj96P8WLMejk=EcSjqzV=w@mail.gmail.com>

Hi,

Below is the link to the initial draft of my proposal. Please have a look
and let me know. I have enabled comments so you can comment there itself.

https://docs.google.com/document/d/1MBGF1w5WNGuT4KSBtrT7uJRHRtfpx_J1ik03LKk9GJs/edit#

Regards,
Varun Saraf


On Mon, Mar 17, 2014 at 10:46 PM, Sean Gillies <sean.gillies at gmail.com>wrote:

> On Mon, Mar 17, 2014 at 2:31 AM, Sandro Santilli <strk at keybit.net> wrote:
>
>> On Sun, Mar 16, 2014 at 12:24:19PM -0600, Sean Gillies wrote:
>> > On Mar 12, 2014 6:46 AM, "Sandro Santilli" <strk at keybit.net> wrote:
>> >
>> > > On Wed, Mar 12, 2014 at 06:16:00AM -0400, Paul Ramsey wrote:
>> > > > I would tend to expect choosing a single precision model and working
>> > > > with it for a long time to be a more common usage than swapping
>> > > > between lots of models. My bias.
>> > >
>> > > I also find this to be a more likely usecase.
>> >
>> > While agree that one model at a time (and two at the most) is the most
>> > likely use case, I'm concerned about designs that limit the number. I'm
>> > also reversing myself on whether there should be a precision model in
>> the
>> > global context. I'd rather GEOS did not add more global state.
>> >
>> > Please see the wiki page
>> > http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel for my
>> (Shapely)
>> > requirements.
>>
>> So what would you think about "parking" a pointer to the client-owned
>> GeometryFactory into the "context" right before calling the geometry
>> creation functions ? Such "parking" method would return the old
>> GeometryFactory, so that you can pass it back. You'd only own the
>> GeometryFactory objects you'd have explicitly created.
>>
>> I'm talking about GeometryFactory rather than PrecisionModel because
>> the object referenced  by geometries is really a GeometryFactory,
>> not a PrecisionModel. A GeometryFactory also references a
>> CoordinateSequenceFactory.
>>
>
> Sounds practical. Geometry objects will have to park their factories
> before every operation, right? Offloading complexity to client code seems
> fair enough.
>
> I've updated my wiki notes to refer to geometry factories instead of
> models.
>
>
> --
> Sean Gillies
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140320/4be3105b/attachment.html>

From varunsaraf14 at gmail.com  Thu Mar 20 21:03:17 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Fri, 21 Mar 2014 09:33:17 +0530
Subject: [geos-devel] GSoC Proposal : Expose PrecisionModel through C-API
Message-ID: <CAPfr+rsQZ+cT87n-TGgNdskfX00zxf=-k2=iBVKkVBLiXvjWiQ@mail.gmail.com>

Hi,

Since today is the last day for submitting the proposal, it would be great
to have some feedback on my proposal which I have submitted on melange [1].
Also, GEOS is not listed on the OSGeo GSoC ideas wiki page [2] as of yet.

Regards,
Varun Saraf

[1]
http://www.google-melange.com/gsoc/proposal/review/student/google/gsoc2014/varunsaraf/5668600916475904
[2] http://wiki.osgeo.org/wiki/Google_Summer_of_Code_2014_Ideas

On Thu, Mar 20, 2014 at 12:47 AM, Varun Saraf <varunsaraf14 at gmail.com>wrote:

> Hi,
>
> Below is the link to the initial draft of my proposal. Please have a look
> and let me know. I have enabled comments so you can comment there itself.
>
>
> https://docs.google.com/document/d/1MBGF1w5WNGuT4KSBtrT7uJRHRtfpx_J1ik03LKk9GJs/edit#
>
> Regards,
> Varun Saraf
>
>
> On Mon, Mar 17, 2014 at 10:46 PM, Sean Gillies <sean.gillies at gmail.com>wrote:
>
>> On Mon, Mar 17, 2014 at 2:31 AM, Sandro Santilli <strk at keybit.net> wrote:
>>
>>> On Sun, Mar 16, 2014 at 12:24:19PM -0600, Sean Gillies wrote:
>>> > On Mar 12, 2014 6:46 AM, "Sandro Santilli" <strk at keybit.net> wrote:
>>> >
>>> > > On Wed, Mar 12, 2014 at 06:16:00AM -0400, Paul Ramsey wrote:
>>> > > > I would tend to expect choosing a single precision model and
>>> working
>>> > > > with it for a long time to be a more common usage than swapping
>>> > > > between lots of models. My bias.
>>> > >
>>> > > I also find this to be a more likely usecase.
>>> >
>>> > While agree that one model at a time (and two at the most) is the most
>>> > likely use case, I'm concerned about designs that limit the number. I'm
>>> > also reversing myself on whether there should be a precision model in
>>> the
>>> > global context. I'd rather GEOS did not add more global state.
>>> >
>>> > Please see the wiki page
>>> > http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel for my
>>> (Shapely)
>>> > requirements.
>>>
>>> So what would you think about "parking" a pointer to the client-owned
>>> GeometryFactory into the "context" right before calling the geometry
>>> creation functions ? Such "parking" method would return the old
>>> GeometryFactory, so that you can pass it back. You'd only own the
>>> GeometryFactory objects you'd have explicitly created.
>>>
>>> I'm talking about GeometryFactory rather than PrecisionModel because
>>> the object referenced  by geometries is really a GeometryFactory,
>>> not a PrecisionModel. A GeometryFactory also references a
>>> CoordinateSequenceFactory.
>>>
>>
>> Sounds practical. Geometry objects will have to park their factories
>> before every operation, right? Offloading complexity to client code seems
>> fair enough.
>>
>> I've updated my wiki notes to refer to geometry factories instead of
>> models.
>>
>>
>> --
>> Sean Gillies
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140321/5ed189e8/attachment.html>

From varunsaraf14 at gmail.com  Thu Mar 20 21:07:59 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Fri, 21 Mar 2014 09:37:59 +0530
Subject: [geos-devel] GSoC Proposal : Expose PrecisionModel through C-API
In-Reply-To: <CAPfr+rsQZ+cT87n-TGgNdskfX00zxf=-k2=iBVKkVBLiXvjWiQ@mail.gmail.com>
References: <CAPfr+rsQZ+cT87n-TGgNdskfX00zxf=-k2=iBVKkVBLiXvjWiQ@mail.gmail.com>
Message-ID: <CAPfr+rsmaFj1C6vXSuVPM=5TuKsk9BqyhsBZx5KWqVOEeiBdag@mail.gmail.com>

Hi,

Please refer to the below link if you are not able to access my proposal
through the link I had shared in my previous mail.

http://www.google-melange.com/gsoc/proposal/public/google/gsoc2014/varunsaraf/5668600916475904

Regards,
Varun Saraf


On Fri, Mar 21, 2014 at 9:33 AM, Varun Saraf <varunsaraf14 at gmail.com> wrote:

> Hi,
>
> Since today is the last day for submitting the proposal, it would be great
> to have some feedback on my proposal which I have submitted on melange [1].
> Also, GEOS is not listed on the OSGeo GSoC ideas wiki page [2] as of yet.
>
> Regards,
> Varun Saraf
>
> [1]
> http://www.google-melange.com/gsoc/proposal/review/student/google/gsoc2014/varunsaraf/5668600916475904
> [2] http://wiki.osgeo.org/wiki/Google_Summer_of_Code_2014_Ideas
>
> On Thu, Mar 20, 2014 at 12:47 AM, Varun Saraf <varunsaraf14 at gmail.com>wrote:
>
>> Hi,
>>
>> Below is the link to the initial draft of my proposal. Please have a look
>> and let me know. I have enabled comments so you can comment there itself.
>>
>>
>> https://docs.google.com/document/d/1MBGF1w5WNGuT4KSBtrT7uJRHRtfpx_J1ik03LKk9GJs/edit#
>>
>> Regards,
>> Varun Saraf
>>
>>
>> On Mon, Mar 17, 2014 at 10:46 PM, Sean Gillies <sean.gillies at gmail.com>wrote:
>>
>>> On Mon, Mar 17, 2014 at 2:31 AM, Sandro Santilli <strk at keybit.net>wrote:
>>>
>>>> On Sun, Mar 16, 2014 at 12:24:19PM -0600, Sean Gillies wrote:
>>>> > On Mar 12, 2014 6:46 AM, "Sandro Santilli" <strk at keybit.net> wrote:
>>>> >
>>>> > > On Wed, Mar 12, 2014 at 06:16:00AM -0400, Paul Ramsey wrote:
>>>> > > > I would tend to expect choosing a single precision model and
>>>> working
>>>> > > > with it for a long time to be a more common usage than swapping
>>>> > > > between lots of models. My bias.
>>>> > >
>>>> > > I also find this to be a more likely usecase.
>>>> >
>>>> > While agree that one model at a time (and two at the most) is the most
>>>> > likely use case, I'm concerned about designs that limit the number.
>>>> I'm
>>>> > also reversing myself on whether there should be a precision model in
>>>> the
>>>> > global context. I'd rather GEOS did not add more global state.
>>>> >
>>>> > Please see the wiki page
>>>> > http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel for my
>>>> (Shapely)
>>>> > requirements.
>>>>
>>>> So what would you think about "parking" a pointer to the client-owned
>>>> GeometryFactory into the "context" right before calling the geometry
>>>> creation functions ? Such "parking" method would return the old
>>>> GeometryFactory, so that you can pass it back. You'd only own the
>>>> GeometryFactory objects you'd have explicitly created.
>>>>
>>>> I'm talking about GeometryFactory rather than PrecisionModel because
>>>> the object referenced  by geometries is really a GeometryFactory,
>>>> not a PrecisionModel. A GeometryFactory also references a
>>>> CoordinateSequenceFactory.
>>>>
>>>
>>> Sounds practical. Geometry objects will have to park their factories
>>> before every operation, right? Offloading complexity to client code seems
>>> fair enough.
>>>
>>> I've updated my wiki notes to refer to geometry factories instead of
>>> models.
>>>
>>>
>>> --
>>> Sean Gillies
>>>
>>> _______________________________________________
>>> geos-devel mailing list
>>> geos-devel at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/geos-devel
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20140321/bb0e26d5/attachment.html>

From strk at keybit.net  Fri Mar 21 02:28:51 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 21 Mar 2014 10:28:51 +0100
Subject: [geos-devel] GSoC Proposal : Expose PrecisionModel through C-API
In-Reply-To: <CAPfr+rsQZ+cT87n-TGgNdskfX00zxf=-k2=iBVKkVBLiXvjWiQ@mail.gmail.com>
References: <CAPfr+rsQZ+cT87n-TGgNdskfX00zxf=-k2=iBVKkVBLiXvjWiQ@mail.gmail.com>
Message-ID: <20140321092851.GC6075@localhost>

On Fri, Mar 21, 2014 at 09:33:17AM +0530, Varun Saraf wrote:
> Hi,
> 
> Since today is the last day for submitting the proposal, it would be great
> to have some feedback on my proposal which I have submitted on melange [1].
> Also, GEOS is not listed on the OSGeo GSoC ideas wiki page [2] as of yet.

It's a wiki, please add it !

--strk;

From strk at keybit.net  Fri Mar 21 02:30:53 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 21 Mar 2014 10:30:53 +0100
Subject: [geos-devel] Exposing Precision model through C-API
In-Reply-To: <CAOodmJp-iosWhgScxZq+2-1H5FjMtNet4+N0dnz1Gn47CFav5w@mail.gmail.com>
References: <CAPfr+rvJnBMT8aVNtDL8U3RyZTRD0mFYgaq+qnVmTy=+NA4jvg@mail.gmail.com>
	<20140307144905.GD2117@localhost>
	<CAPfr+rs2Bw5X1o_QdtRJ+05mVZxL9BA4=L-sjJrJ+TgZAotCpw@mail.gmail.com>
	<20140307182030.GA30661@localhost>
	<CAPfr+ruMFZPiqkYUarPg_Qd0CdEw5GbefGcTUYWknb5gpYp4Ow@mail.gmail.com>
	<CACowWR1wjU-t3MNRLWEB0X62ur5LttZAYJKUhs-4HQi07m45-A@mail.gmail.com>
	<20140312124624.GF5956@localhost>
	<CAOodmJp2td042o+PX=aTjJZet_V0q6QLc2g=QOSicHHXPLAXMA@mail.gmail.com>
	<20140317083117.GA4417@localhost>
	<CAOodmJp-iosWhgScxZq+2-1H5FjMtNet4+N0dnz1Gn47CFav5w@mail.gmail.com>
Message-ID: <20140321093053.GD6075@localhost>

On Mon, Mar 17, 2014 at 11:16:05AM -0600, Sean Gillies wrote:

> > > http://trac.osgeo.org/geos/wiki/GSoC/CAPI_PrecisionModel for my

> Sounds practical. Geometry objects will have to park their factories before
> every operation, right? Offloading complexity to client code seems fair
> enough.

Yes, that's what I was thinking.
Are you wishing to co-mentor Varun ?
http://www.google-melange.com/gsoc/proposal/review/org/google/gsoc2014/varunsaraf/5668600916475904

--strk;

From Roger.Bivand at nhh.no  Sat Mar 22 14:46:29 2014
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 22 Mar 2014 22:46:29 +0100
Subject: [geos-devel] GEOSNode usage: what should g be?
Message-ID: <alpine.LRH.2.03.1403222244480.30120@reclus.nhh.no>

I'd like to ask for pointers to example code using GEOSNode/GEOSNode_r in 
CAPI. What should the geometry g be - GEOS_MULTILINESTRING, 
GEOS_LINESTRING, or what? Looking at the C++ code, it appears to be a 
SegmentString. If so, can a GEOS_MULTILINESTRING be converted to such an 
object in the CAPI?

I'd like to add noding to rgeos, a user has occasional incoming polygon 
geometries that are not valid, and whose creation he does not control, and 
needs to node them after coercion to line strings, before going back out 
through polygonize.

Grateful for any ideas,

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no


From Roger.Bivand at nhh.no  Sun Mar 23 02:41:31 2014
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 23 Mar 2014 02:41:31 -0700 (PDT)
Subject: [geos-devel] GEOSNode usage: what should g be?
In-Reply-To: <alpine.LRH.2.03.1403222244480.30120@reclus.nhh.no>
References: <alpine.LRH.2.03.1403222244480.30120@reclus.nhh.no>
Message-ID: <1395567691773-5130512.post@n6.nabble.com>

Answering my own question, g can be LineString and GeometryCollection, I
haven't tested MultiLineString. The returned objects are MultiLineString.

Testing with the original problem (a twisted bowtie polygon coerced to
LineString), with a 2D rectangular random walk with 999 segments, and 100
random segments shows no issues, with the noded output feeding through to
polygonizing without obvious failures.

Roger


Roger Bivand wrote
> I'd like to ask for pointers to example code using GEOSNode/GEOSNode_r in 
> CAPI. What should the geometry g be - GEOS_MULTILINESTRING, 
> GEOS_LINESTRING, or what? Looking at the C++ code, it appears to be a 
> SegmentString. If so, can a GEOS_MULTILINESTRING be converted to such an 
> object in the CAPI?
> 
> I'd like to add noding to rgeos, a user has occasional incoming polygon 
> geometries that are not valid, and whose creation he does not control, and 
> needs to node them after coercion to line strings, before going back out 
> through polygonize.
> 
> Grateful for any ideas,
> 
> Roger
> 
> -- 
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 91 00
> e-mail: 

> Roger.Bivand@

> 
> _______________________________________________
> geos-devel mailing list

> geos-devel at .osgeo

> http://lists.osgeo.org/mailman/listinfo/geos-devel





-----
Roger Bivand
NHH Norwegian School of Economics, Bergen, Norway
--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GEOSNode-usage-what-should-g-be-tp5130497p5130512.html
Sent from the GEOS Developers mailing list archive at Nabble.com.

