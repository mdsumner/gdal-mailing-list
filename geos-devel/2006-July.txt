From mateusz at loskot.net  Sat Jul  1 07:23:33 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:23 2007
Subject: [geos-devel] GEOS 2.2.2 C API + Reference counter
Message-ID: <44A65B35.9060207@loskot.net>

Hi,

As we talked yesterday, I applied small changes
with reference counter to make
initGEOS/finishGEOS more safe.
I applied those changes to GEOS 2.2.2.

Here is the package with geos_c.h/cpp files:

http://mateusz.loskot.net/tmp/geos-capi-refcounted.tar.bz2

Original version of GEOS 2.2.2 crashes in following situation:

initGEOS(NULL, NULL);
finishGEOS();
finishGEOS(); // <--- BUM!

Now, changes described above, make it safe to call init/finishGEOS
multiple time, no matter in what order.

I think this small patch could be applied to GEOS 2.2.2 as a backport.

If case of comments, just give me a note.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Jul  1 07:27:57 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:23 2007
Subject: [geos-devel] GEOS 2.2.2 C API + Reference counter
In-Reply-To: <44A65B35.9060207@loskot.net>
References: <44A65B35.9060207@loskot.net>
Message-ID: <44A65C3D.1070706@loskot.net>

Mateusz Loskot wrote:
> Hi,
> 
> As we talked yesterday, I applied small changes
> with reference counter to make
> initGEOS/finishGEOS more safe.

I've forgot about one more *important* thing.
The reference counting is not thread-safe, also, the static
variable - GEOSInitCounter - in geos_c.cpp unit
scope MUST NOT be change outside initGEOS or finishGEOS functions.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From strk at refractions.net  Sat Jul  1 08:05:07 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:23 2007
Subject: [geos-devel] GEOS 2.2.2 C API + Reference counter
In-Reply-To: <44A65B35.9060207@loskot.net>
References: <44A65B35.9060207@loskot.net>
Message-ID: <20060701120507.GB45785@keybit.net>

Don't we get the same effect by just making sure the global
geometryFactory is set to 0 after deletion ?

--strk;

On Sat, Jul 01, 2006 at 01:23:33PM +0200, Mateusz Loskot wrote:
> Hi,
> 
> As we talked yesterday, I applied small changes
> with reference counter to make
> initGEOS/finishGEOS more safe.
> I applied those changes to GEOS 2.2.2.
> 
> Here is the package with geos_c.h/cpp files:
> 
> http://mateusz.loskot.net/tmp/geos-capi-refcounted.tar.bz2
> 
> Original version of GEOS 2.2.2 crashes in following situation:
> 
> initGEOS(NULL, NULL);
> finishGEOS();
> finishGEOS(); // <--- BUM!
> 
> Now, changes described above, make it safe to call init/finishGEOS
> multiple time, no matter in what order.
> 
> I think this small patch could be applied to GEOS 2.2.2 as a backport.
> 
> If case of comments, just give me a note.
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


-- 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From mateusz at loskot.net  Sat Jul  1 08:16:46 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:23 2007
Subject: [geos-devel] GEOS 2.2.2 C API + Reference counter
In-Reply-To: <20060701120507.GB45785@keybit.net>
References: <44A65B35.9060207@loskot.net> <20060701120507.GB45785@keybit.net>
Message-ID: <44A667AE.9090207@loskot.net>

strk@refractions.net wrote:
> Don't we get the same effect by just making sure the global 
> geometryFactory is set to 0 after deletion ?

Yes, in current GEOS 2.2.2 we do.
But the ref-counter is better in case if any other
initialization/deinitialization will be required in init/finishGEOS.
I mean, it's more extensible.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jingzhang at cbigroup.com  Mon Jul  3 06:01:11 2006
From: jingzhang at cbigroup.com (zhangjing)
Date: Fri Nov  2 20:53:23 2007
Subject: [geos-devel] Geometry Simplify.
Message-ID: <20060703100114.4FDAF2C078C@netnation.refractions.net>

Hi

I have polygons which may be self-intersected , and is there any way to simplify the polygons in geos? 

Thanks
Jing



From sdlime at comcast.net  Sun Jul  2 11:42:56 2006
From: sdlime at comcast.net (Stephen Lime)
Date: Fri Nov  2 20:53:23 2007
Subject: [geos-devel] initGEOS/finishGEOS and multiple subsystems
In-Reply-To: <6.2.3.4.2.20060630092228.03088008@hobu.mail.iastate.edu>
References: <20060628131235.GH82268@keybit.net>
	<6D2638F1A4681D49B2798FD89AABD830E3F1B5@ecnshmw511.eapac.ericsson.se>
	<6.2.3.4.2.20060630092228.03088008@hobu.mail.iastate.edu>
Message-ID: <98bcc9c27daada9dfcf17ff800436c91@comcast.net>

Is there any issue with the error/warning functions that may be pointed 
to? Can different
subsystems use separate functions at the same time?

Steve

On Jun 30, 2006, at 9:31 AM, Howard Butler wrote:

> Recently, Steve Lime reconfigured MapServer to use the GEOS C API 
> instead of the C++ one.  Python Cartographic Library, which builds on 
> MapServer and GEOS, among other things, *also* uses the GEOS C API.  
> Each subsystem doesn't know when the other is calling 
> initGEOS/finishGEOS, and on teardown, this is causing a segfault 
> because the geomFactory has already been destroyed.
>
> After some discussion on #gdal with Frank, Norman, and Mateusz, we 
> suggest that initGEOS/finishGEOS do some reference counting to ensure 
> that geomFactory isn't prematurely destroyed.
>
> Does this seem reasonable?
>
> Howard
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>


From strk at refractions.net  Tue Jul  4 04:16:45 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] initGEOS/finishGEOS and multiple subsystems
In-Reply-To: <98bcc9c27daada9dfcf17ff800436c91@comcast.net>
References: <20060628131235.GH82268@keybit.net>
	<6D2638F1A4681D49B2798FD89AABD830E3F1B5@ecnshmw511.eapac.ericsson.se>
	<6.2.3.4.2.20060630092228.03088008@hobu.mail.iastate.edu>
	<98bcc9c27daada9dfcf17ff800436c91@comcast.net>
Message-ID: <20060704081645.GB83204@keybit.net>

On Sun, Jul 02, 2006 at 10:42:56AM -0500, Stephen Lime wrote:
> Is there any issue with the error/warning functions that may be pointed 
> to? Can different
> subsystems use separate functions at the same time?

One issue is surely that you *need* to provide them, or the
code will segfault (I should probably provide a default handler
instead). About different subsistems the answer is NO, the handlers
are global functions, so only two different processes can use
different handlers.

--strk;

From sgillies at frii.com  Tue Jul  4 11:44:53 2006
From: sgillies at frii.com (Sean Gillies)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] initGEOS/finishGEOS and multiple subsystems
In-Reply-To: <20060704081645.GB83204@keybit.net>
References: <20060628131235.GH82268@keybit.net>
	<6D2638F1A4681D49B2798FD89AABD830E3F1B5@ecnshmw511.eapac.ericsson.se>
	<6.2.3.4.2.20060630092228.03088008@hobu.mail.iastate.edu>
	<98bcc9c27daada9dfcf17ff800436c91@comcast.net>
	<20060704081645.GB83204@keybit.net>
Message-ID: <998C1313-DA2D-4E96-A6B6-AE252631FBFC@frii.com>

On Jul 4, 2006, at 2:16 AM, strk@refractions.net wrote:

> On Sun, Jul 02, 2006 at 10:42:56AM -0500, Stephen Lime wrote:
>> Is there any issue with the error/warning functions that may be  
>> pointed
>> to? Can different
>> subsystems use separate functions at the same time?
>
> One issue is surely that you *need* to provide them, or the
> code will segfault (I should probably provide a default handler
> instead). About different subsistems the answer is NO, the handlers
> are global functions, so only two different processes can use
> different handlers.
>
> --strk;

Wow, this is going to make it really hard for the GDAL, MapServer,  
and PCL (Python Cartographic Library) Python modules to play together  
unless I distribute non-GEOS GDAL and MapServer modules along with  
PCL releases.

I missed a lot of this email discussion, and certainly missed  
anything that may have been discussed on IRC last week. Is there a  
possibility of initGEOS and finishGEOS passing in the case that it's  
already been initialized or finished? If so, users could control the  
behavior of the GEOS handlers by importing ogr.py, mapscript.py, or  
geometry.py first.

Sean

---
Sean Gillies
http://zcologia.com




From arovira at ngeografics.com  Wed Jul  5 10:24:03 2006
From: arovira at ngeografics.com (=?ISO-8859-1?Q?Albert_Rovira_Brugu=E9s?=)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Linemerge operation broken in geos-cvs.tar.bz2
Message-ID: <44ABCB83.9000809@ngeografics.com>

Hi,

I tryed compile the current distribution of geos-cvs.tar.bz2 but I get
some errors because there are some missing headers files :

EdgeString.cpp:
    'geos/operation/linemerge/LineMergeEdge.h': No such file or directory

LineMergeDirectedEdge.cpp:
   'geos/operation/linemerge/LineMergeDirectedEdge.h': No such file or 
directory  

LineMergeGraph.cpp:
geos/operation/linemerge/LineMergeEdge.h

and so on ..

Is linemerge operation broken or in development ? What does exactly this 
function ?
I'm searching something that converts MULTILINESTRING where each string 
ends with the begin of the next
to a simple LINESTRING. Can this function help me ?

Thanks,
Albert.



From strk at refractions.net  Wed Jul  5 11:43:27 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] initGEOS/finishGEOS and multiple subsystems
In-Reply-To: <998C1313-DA2D-4E96-A6B6-AE252631FBFC@frii.com>
References: <20060628131235.GH82268@keybit.net>
	<6D2638F1A4681D49B2798FD89AABD830E3F1B5@ecnshmw511.eapac.ericsson.se>
	<6.2.3.4.2.20060630092228.03088008@hobu.mail.iastate.edu>
	<98bcc9c27daada9dfcf17ff800436c91@comcast.net>
	<20060704081645.GB83204@keybit.net>
	<998C1313-DA2D-4E96-A6B6-AE252631FBFC@frii.com>
Message-ID: <20060705154327.GD15255@keybit.net>

On Tue, Jul 04, 2006 at 09:44:53AM -0600, Sean Gillies wrote:

> anything that may have been discussed on IRC last week. Is there a  
> possibility of initGEOS and finishGEOS passing in the case that it's  
> already been initialized or finished? If so, users could control the  
> behavior of the GEOS handlers by importing ogr.py, mapscript.py, or  
> geometry.py first.

The 3.0.0 code is already immune from multiple init/finish calls.
2.2 branch has been recently patched for this.

--strk;

From sgillies at frii.com  Wed Jul  5 11:50:24 2006
From: sgillies at frii.com (Sean Gillies)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] initGEOS/finishGEOS and multiple subsystems
In-Reply-To: <20060705154327.GD15255@keybit.net>
References: <20060628131235.GH82268@keybit.net>
	<6D2638F1A4681D49B2798FD89AABD830E3F1B5@ecnshmw511.eapac.ericsson.se>
	<6.2.3.4.2.20060630092228.03088008@hobu.mail.iastate.edu>
	<98bcc9c27daada9dfcf17ff800436c91@comcast.net>
	<20060704081645.GB83204@keybit.net>
	<998C1313-DA2D-4E96-A6B6-AE252631FBFC@frii.com>
	<20060705154327.GD15255@keybit.net>
Message-ID: <0E3B29DB-8FBB-40CB-A403-33E0FD6141B2@frii.com>

On Jul 5, 2006, at 9:43 AM, strk@refractions.net wrote:

> On Tue, Jul 04, 2006 at 09:44:53AM -0600, Sean Gillies wrote:
>
>> anything that may have been discussed on IRC last week. Is there a
>> possibility of initGEOS and finishGEOS passing in the case that it's
>> already been initialized or finished? If so, users could control the
>> behavior of the GEOS handlers by importing ogr.py, mapscript.py, or
>> geometry.py first.
>
> The 3.0.0 code is already immune from multiple init/finish calls.
> 2.2 branch has been recently patched for this.
>
> --strk;

Great! Can we set a target for a 2.2.3 release?

---
Sean Gillies
http://zcologia.com




From strk at refractions.net  Wed Jul  5 12:03:07 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] initGEOS/finishGEOS and multiple subsystems
In-Reply-To: <0E3B29DB-8FBB-40CB-A403-33E0FD6141B2@frii.com>
References: <20060628131235.GH82268@keybit.net>
	<6D2638F1A4681D49B2798FD89AABD830E3F1B5@ecnshmw511.eapac.ericsson.se>
	<6.2.3.4.2.20060630092228.03088008@hobu.mail.iastate.edu>
	<98bcc9c27daada9dfcf17ff800436c91@comcast.net>
	<20060704081645.GB83204@keybit.net>
	<998C1313-DA2D-4E96-A6B6-AE252631FBFC@frii.com>
	<20060705154327.GD15255@keybit.net>
	<0E3B29DB-8FBB-40CB-A403-33E0FD6141B2@frii.com>
Message-ID: <20060705160307.GE15255@keybit.net>

On Wed, Jul 05, 2006 at 09:50:24AM -0600, Sean Gillies wrote:
> On Jul 5, 2006, at 9:43 AM, strk@refractions.net wrote:
> 
> >On Tue, Jul 04, 2006 at 09:44:53AM -0600, Sean Gillies wrote:
> >
> >>anything that may have been discussed on IRC last week. Is there a
> >>possibility of initGEOS and finishGEOS passing in the case that it's
> >>already been initialized or finished? If so, users could control the
> >>behavior of the GEOS handlers by importing ogr.py, mapscript.py, or
> >>geometry.py first.
> >
> >The 3.0.0 code is already immune from multiple init/finish calls.
> >2.2 branch has been recently patched for this.
> >
> >--strk;
> 
> Great! Can we set a target for a 2.2.3 release?

Would one week be enough for testing ?

--strk;

From delcacho at gmail.com  Wed Jul  5 14:07:45 2006
From: delcacho at gmail.com (Carlos del Cacho)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] problem with line intersections
Message-ID: <bfa4e3120607051107n7363276cxb762d22b3e852113@mail.gmail.com>

First of all, thank you for providing a great development API for GIS
hobbyists like me, and professionals alike. I love it :-)

I'd ike to share a problem I've been experiencing and that I've been hitting
my head against the wall with for some time trying to solve it. Here it is:
how do I go around selecting precision so that, as an example, the following
two lines are identified as collinear when computing intersections?

LINESTRING (8,3688218877951126 10,4893534336614670, 7,4109953259110313
10,7767014022266900)
LINESTRING (0 13, 10 10)

Any tip will be gladly welcome. Thanks in advance.

Cheers,
Carlos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060705/80c2c090/attachment.html
From strk at refractions.net  Wed Jul  5 16:53:40 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Linemerge operation broken in geos-cvs.tar.bz2
In-Reply-To: <44ABCB83.9000809@ngeografics.com>
References: <44ABCB83.9000809@ngeografics.com>
Message-ID: <20060705205340.GH15255@keybit.net>

On Wed, Jul 05, 2006 at 04:24:03PM +0200, Albert Rovira Brugu?s wrote:
> Hi,
> 
> I tryed compile the current distribution of geos-cvs.tar.bz2 but I get
> some errors because there are some missing headers files :
> 
> EdgeString.cpp:
>    'geos/operation/linemerge/LineMergeEdge.h': No such file or directory

I confirm the bug.
If you can test the next generated snapshot (in an hour from now)
it should be fixed.

Thanks for pointing out!

--strk;


From mbdavis at VividSolutions.com  Wed Jul  5 17:20:31 2006
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] problem with line intersections
Message-ID: <5A94289A9268514C8D6C0F1FF44BA027EBAB84@venus.VividSolutions.com>

Currently there's no way to do this.  There has been some discussion
about this on the JTS list.  Maybe this will appear in a future version.
 
 
Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046

	-----Original Message-----
	From: geos-devel-bounces@geos.refractions.net
[mailto:geos-devel-bounces@geos.refractions.net] On Behalf Of Carlos del
Cacho
	Sent: July 5, 2006 11:08 AM
	To: geos-devel@geos.refractions.net
	Subject: [geos-devel] problem with line intersections
	
	
	First of all, thank you for providing a great development API
for GIS hobbyists like me, and professionals alike. I love it :-)
	 
	I'd ike to share a problem I've been experiencing and that I've
been hitting my head against the wall with for some time trying to solve
it. Here it is: how do I go around selecting precision so that, as an
example, the following two lines are identified as collinear when
computing intersections? 
	 
	LINESTRING (8,3688218877951126 10,4893534336614670,
7,4109953259110313 10,7767014022266900)
	LINESTRING (0 13, 10 10)
	 
	Any tip will be gladly welcome. Thanks in advance.
	 
	Cheers,
	Carlos

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060705/128b9167/attachment.html
From strk at keybit.net  Wed Jul  5 19:35:59 2006
From: strk at keybit.net (strk)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
Message-ID: <20060705233559.GA21461@keybit.net>

Charlie, we'll release the first candidate of GEOS in a week.
Do you have a working set of automake's files or do we have
to keep using the distribute-only ones ?

--strk; 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From mateusz at loskot.net  Wed Jul  5 20:07:01 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Handling C and C++ API with geos-config 
Message-ID: <44AC5425.8050008@loskot.net>

Hi,

Today, strk and I were talking about how to improve geos-config utility
to provide appropriate but different definitions for GEOS C++ and C APIs.

Here is what we've discussed:


Proposal 1)

- add new macros HAVE_GEOS_CAPI,
GEOS_CAPI_LIBS, GEOS_CAPI_VERSION

(the latter is impossible at the moment)

GEOS_LIBS="`geos-config --ldflags` -lgeos"
GEOS_CAPI_LIBS="`geos-config --ldflags` -lgeos_c


Proposal 2)

Add --capi option to geos-config?

geos-config --version  - returns version for C++ API
geos-config --ldflags  - returns flags for C++ API

geos-config --capi --version - returns version of C API
geos-config --capi --ldflags - returns flags for C API


Strk's note: it's an uncommon interface, but I've to say I like it. I
guess it won't be straightforward to implement w/out a getopt though,
ie: --cflags --capi (swapping order of flags)


Proposal 3)


Yet another option is to have two separate config utilities:
one for C++ API, second for C API.

geos-config - checks for C++ API
geos-config-c - checks for C API
geos-c-config - this option follows lib naming style libgeos and libgeos-c


We would like to start wider discussion, a brainstorm regarding proposal
above. What is the best one?
May be there are possible better solutions?

Thanks in advance for any idea.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From cfis at savagexi.com  Wed Jul  5 20:07:41 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Re: GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060705233559.GA21461@keybit.net>
References: <20060705233559.GA21461@keybit.net>
Message-ID: <44AC544D.4000501@savagexi.com>

Yeah, the ones I have seem to work (not checked in yet).  I also have 
most of SWIG ported to the c-api, but its not yet tested.  I'll aim to 
check all these changes in by (or before if possible).  Does that work?

Are you planning the release at the beginning or end of the week?

Charlie

strk wrote:
> Charlie, we'll release the first candidate of GEOS in a week.
> Do you have a working set of automake's files or do we have
> to keep using the distribute-only ones ?
> 
> --strk; 
> 
>  /"\    ASCII Ribbon Campaign
>  \ /    Respect for low technology.
>   X     Keep e-mail messages readable by any computer system.
>  / \    Keep it ASCII. 
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060705/03de7624/smime.bin
From mike at fuhr.org  Wed Jul  5 23:40:38 2006
From: mike at fuhr.org (Michael Fuhr)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060705233559.GA21461@keybit.net>
References: <20060705233559.GA21461@keybit.net>
Message-ID: <20060706034038.GA31940@winnie.fuhr.org>

On Thu, Jul 06, 2006 at 01:35:59AM +0200, strk wrote:
> Charlie, we'll release the first candidate of GEOS in a week.

I just tried building GEOS CVS on Solaris 9 and got several undefined
symbol errors while linking capi/geostest.  I haven't built GEOS
CVS on Solaris for a long time so I don't know when this problem
started, but I have a libgeos-3.0.0.so from 16 Jan that appears to
work.

Here's what the linker complained about:

geos::index::bintree::NodeBase::addAllItems(std::vector<void*, std::allocator<void*> >*)
geos::index::bintree::NodeBase::addAllItemsFromOverlapping(geos::index::bintree::Interval*, std::vector<void*, std::allocator<void*> >*)
typeinfo for geos::index::bintree::NodeBase
geos::index::bintree::Interval::getMin() 
geos::index::bintree::Interval::getMax() 
geos::index::bintree::NodeBase::NodeBase()
geos::index::bintree::NodeBase::~NodeBase()
geos::index::bintree::Interval::getWidth() 
geos::index::bintree::NodeBase::nodeSize() 
geos::index::bintree::Interval::Interval(geos::index::bintree::Interval*)
geos::index::bintree::Interval::Interval()
geos::index::bintree::Interval::~Interval()
geos::index::bintree::Interval::Interval(double, double)
geos::index::bintree::NodeBase::add(void*)
geos::index::bintree::Root::insert(geos::index::bintree::Interval*, void*)
geos::index::bintree::NodeBase::size() 
geos::index::bintree::NodeBase::depth() 
geos::index::bintree::NodeBase::getItems() 

Earlier I see the following warnings and errors:

rm -fr .libs/libgeos.lax/libindex.a
mkdir .libs/libgeos.lax/libindex.a
(cd .libs/libgeos.lax/libindex.a && ar x /<path omitted>/source/index/.libs/libindex.a)
libtool: link: warning: object name conflicts; renaming object files
libtool: link: warning: to ensure that they will not overwrite
Mutually exclusive options were given!
Usage:  uniq [-c|-d|-u][-f fields][-s char] [input_file [output_file]]
Or:     uniq [-c|-d|-u][-n][+m] [input_file [output_file]]
../libtool: -r: is not an identifier

I see these messages only for libindex; other libraries build without
complaint.  uniq appears to be failing because of the options it's
passed.

I don't know much about libtool but it looks involved.  Any ideas?

-- 
Michael Fuhr

From strk at refractions.net  Thu Jul  6 03:12:25 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706034038.GA31940@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
Message-ID: <20060706071225.GD21461@keybit.net>

It seems a problem with the libtool script for your platform.
Maybe using another version ? libtoolize -f ?

The problem is probably there since we renamed classes to have
same classnames in different namespaces (to reflect JTS layout).

--strk;

On Wed, Jul 05, 2006 at 09:40:38PM -0600, Michael Fuhr wrote:
> On Thu, Jul 06, 2006 at 01:35:59AM +0200, strk wrote:
> > Charlie, we'll release the first candidate of GEOS in a week.
> 
> I just tried building GEOS CVS on Solaris 9 and got several undefined
> symbol errors while linking capi/geostest.  I haven't built GEOS
> CVS on Solaris for a long time so I don't know when this problem
> started, but I have a libgeos-3.0.0.so from 16 Jan that appears to
> work.
> 
> Here's what the linker complained about:
> 
> geos::index::bintree::NodeBase::addAllItems(std::vector<void*, std::allocator<void*> >*)
> geos::index::bintree::NodeBase::addAllItemsFromOverlapping(geos::index::bintree::Interval*, std::vector<void*, std::allocator<void*> >*)
> typeinfo for geos::index::bintree::NodeBase
> geos::index::bintree::Interval::getMin() 
> geos::index::bintree::Interval::getMax() 
> geos::index::bintree::NodeBase::NodeBase()
> geos::index::bintree::NodeBase::~NodeBase()
> geos::index::bintree::Interval::getWidth() 
> geos::index::bintree::NodeBase::nodeSize() 
> geos::index::bintree::Interval::Interval(geos::index::bintree::Interval*)
> geos::index::bintree::Interval::Interval()
> geos::index::bintree::Interval::~Interval()
> geos::index::bintree::Interval::Interval(double, double)
> geos::index::bintree::NodeBase::add(void*)
> geos::index::bintree::Root::insert(geos::index::bintree::Interval*, void*)
> geos::index::bintree::NodeBase::size() 
> geos::index::bintree::NodeBase::depth() 
> geos::index::bintree::NodeBase::getItems() 
> 
> Earlier I see the following warnings and errors:
> 
> rm -fr .libs/libgeos.lax/libindex.a
> mkdir .libs/libgeos.lax/libindex.a
> (cd .libs/libgeos.lax/libindex.a && ar x /<path omitted>/source/index/.libs/libindex.a)
> libtool: link: warning: object name conflicts; renaming object files
> libtool: link: warning: to ensure that they will not overwrite
> Mutually exclusive options were given!
> Usage:  uniq [-c|-d|-u][-f fields][-s char] [input_file [output_file]]
> Or:     uniq [-c|-d|-u][-n][+m] [input_file [output_file]]
> ../libtool: -r: is not an identifier
> 
> I see these messages only for libindex; other libraries build without
> complaint.  uniq appears to be failing because of the options it's
> passed.
> 
> I don't know much about libtool but it looks involved.  Any ideas?
> 
> -- 
> Michael Fuhr
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

-- 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From strk at refractions.net  Thu Jul  6 03:16:09 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Re: GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <44AC544D.4000501@savagexi.com>
References: <20060705233559.GA21461@keybit.net> <44AC544D.4000501@savagexi.com>
Message-ID: <20060706071609.GE21461@keybit.net>

On Wed, Jul 05, 2006 at 06:07:41PM -0600, Charlie Savage wrote:
> Yeah, the ones I have seem to work (not checked in yet).  I also have 
> most of SWIG ported to the c-api, but its not yet tested.  I'll aim to 
> check all these changes in by (or before if possible).  Does that work?

As far as you also tested all Makefile rules work with and w/out 
SWIG or python or ruby availability  (all, check, install, dist).

> Are you planning the release at the beginning or end of the week?

End of week.

--strk;

From arovira at ngeografics.com  Thu Jul  6 04:39:55 2006
From: arovira at ngeografics.com (=?ISO-8859-1?Q?Albert_Rovira_Brugu=E9s?=)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Linemerge operation broken in geos-cvs.tar.bz2
In-Reply-To: <20060705205340.GH15255@keybit.net>
References: <44ABCB83.9000809@ngeografics.com>
	<20060705205340.GH15255@keybit.net>
Message-ID: <44ACCC5B.1090609@ngeografics.com>

Now works, thank you !!

Finally I made some tests with the functions of this library and works 
very well.
Congratulations all development team, It's a good work !!

Thanks,
Albert.

En/na strk@refractions.net ha escrit:

>On Wed, Jul 05, 2006 at 04:24:03PM +0200, Albert Rovira Brugu?s wrote:
>  
>
>>Hi,
>>
>>I tryed compile the current distribution of geos-cvs.tar.bz2 but I get
>>some errors because there are some missing headers files :
>>
>>EdgeString.cpp:
>>   'geos/operation/linemerge/LineMergeEdge.h': No such file or directory
>>    
>>
>
>I confirm the bug.
>If you can test the next generated snapshot (in an hour from now)
>it should be fixed.
>
>Thanks for pointing out!
>
>--strk;
>
>_______________________________________________
>geos-devel mailing list
>geos-devel@geos.refractions.net
>http://geos.refractions.net/mailman/listinfo/geos-devel
>  
>


From mike at fuhr.org  Thu Jul  6 09:55:46 2006
From: mike at fuhr.org (Michael Fuhr)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706071225.GD21461@keybit.net>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
Message-ID: <20060706135546.GA45371@winnie.fuhr.org>

On Thu, Jul 06, 2006 at 09:12:25AM +0200, strk@refractions.net wrote:
> It seems a problem with the libtool script for your platform.
> Maybe using another version ? libtoolize -f ?

I installed a different libtool and the GEOS build succeeded.  For
the archives, I had been using libtool-1.5-sol9-sparc-local from
sunfreeware.com; I replaced it with libtool-1.5.22 built from source.
That appears to have worked, at least well enough to build all of
GEOS.

I'm still having a few problems on Solaris 9/sparc, though.  During
the build I see a lot of the following warnings:

warning: #warning "Could not find 64bit integer definition!"
warning: right shift count >= width of type

I'm also getting some test failures; see the attached file.

-- 
Michael Fuhr
-------------- next part --------------
---> group: geos::io::ByteOrderValues, test: test<2>
     problem: assertion failed
     failed assertion: "putDouble big endian[4]"

---> group: geos::io::ByteOrderValues, test: test<3>
     problem: assertion failed
     failed assertion: "putLong big endian[3]"

---> group: geos::io::WKBReader, test: test<2>
     problem: assertion failed
     failed assertion: "NDR output: expected 010200000002000000000000000000F03F000000000000004000000000000008400000000000001040 actual 0102000000020000000000F03F0000F03F000000400000004000000840000008400000104000001040"

---> group: geos::io::WKBReader, test: test<3>
     problem: assertion failed
     failed assertion: "NDR output: expected 0103000000020000000500000000000000000000000000000000000000000000000000244000000000000000000000000000002440000000000000244000000000000000000000000000002440000000000000000000000000000000000400000000000000000000400000000000000040000000000000004000000000000018400000000000001840000000000000104000000000000000400000000000000040 actual 0103000000020000000500000000000000000000000000000000000000000024400000244000000000000000000000244000002440000024400000244000000000000000000000244000002440000000000000000000000000000000000400000000000040000000400000004000000040000000400000004000001840000018400000184000001840000010400000104000000040000000400000004000000040"

---> group: geos::io::WKBReader, test: test<4>
     problem: assertion failed
     failed assertion: "NDR output: expected 010400000005000000010100000000000000000000000000000000000000010100000000000000000024400000000000000000010100000000000000000024400000000000002440010100000000000000000000000000000000002440010100000000000000000000000000000000000000 actual 010400000005000000010100000000000000000000000000000000000000010100000000002440000024400000000000000000010100000000002440000024400000244000002440010100000000000000000000000000244000002440010100000000000000000000000000000000000000"

---> group: geos::io::WKBReader, test: test<5>
     problem: assertion failed
     failed assertion: "NDR output: expected 010500000002000000010200000005000000000000000000000000000000000000000000000000002440000000000000000000000000000024400000000000002440000000000000000000000000000024400000000000002440000000000000344001020000000400000000000000000000400000000000000040000000000000004000000000000018400000000000001840000000000000104000000000000034400000000000000040 actual 010500000002000000010200000005000000000000000000000000000000000000000000244000002440000000000000000000002440000024400000244000002440000000000000000000002440000024400000244000002440000034400000344001020000000400000000000040000000400000004000000040000000400000004000001840000018400000184000001840000010400000104000003440000034400000004000000040"

---> group: geos::io::WKBReader, test: test<6>
     problem: assertion failed
     failed assertion: "NDR output: expected 0106000000020000000103000000020000000500000000000000000000000000000000000000000000000000244000000000000000000000000000002440000000000000244000000000000000000000000000002440000000000000000000000000000000000400000000000000000000400000000000000040000000000000004000000000000018400000000000001840000000000000104000000000000000400000000000000040010300000001000000040000000000000000004E400000000000004E400000000000004E400000000000004940000000000080514000000000000044400000000000004E400000000000004E40 actual 01060000000200000001030000000200000005000000000000000000000000000000000000000000244000002440000000000000000000002440000024400000244000002440000000000000000000002440000024400000000000000000000000000000000004000000000000400000004000000040000000400000004000000040000018400000184000001840000018400000104000001040000000400000004000000040000000400103000000010000000400000000004E4000004E4000004E4000004E4000004E4000004E4000004940000049400080514000805140000044400000444000004E4000004E4000004E4000004E40"

---> group: geos::io::WKBReader, test: test<7>
     problem: assertion failed
     failed assertion: "NDR output: expected 010700000006000000010100000000000000000000000000000000000000010200000002000000000000000000F03F00000000000000400000000000000840000000000000104001030000000200000005000000000000000000000000000000000000000000000000002440000000000000000000000000000024400000000000002440000000000000000000000000000024400000000000000000000000000000000004000000000000000000004000000000000000400000000000000040000000000000184000000000000018400000000000001040000000000000004000000000000000400104000000050000000101000000000000000000000000000000000000000101000000000000000000244000000000000000000101000000000000000000244000000000000024400101000000000000000000000000000000000024400101000000000000000000000000000000000000000105000000020000000102000000050000000000000000000000000000000000000000000000000024400000000000000000000000000000244000000000000024400000000000000000000000000000244000000000000024400000000000003440010200000004000000000000000000004000000000000000400000000000000040000000000000184000000000000018400000000000001040000000000000344000000000000000400106000000020000000103000000020000000500000000000000000000000000000000000000000000000000244000000000000000000000000000002440000000000000244000000000000000000000000000002440000000000000000000000000000000000400000000000000000000400000000000000040000000000000004000000000000018400000000000001840000000000000104000000000000000400000000000000040010300000001000000040000000000000000004E400000000000004E400000000000004E400000000000004940000000000080514000000000000044400000000000004E400000000000004E40 actual 0107000000060000000101000000000000000000000000000000000000000102000000020000000000F03F0000F03F000000400000004000000840000008400000104000001040010300000002000000050000000000000000000000000000000000000000002440000024400000000000000000000024400000244000002440000024400000000000000000000024400000244000000000000000000000000000000000040000000000004000000040000000400000004000000040000000400000184000001840000018400000184000001040000010400000004000000040000000400000004001040000000500000001010000000000000000000000000000000000000001010000000000244000002440000000000000000001010000000000244000002440000024400000244001010000000000000000000000000024400000244001010000000000000000000000000000000000000001050000000200000001020000000500000000000000000000000000000000000000000024400000244000000000000000000000244000002440000024400000244000000000000000000000244000002440000024400000244000003440000034400102000000040000000000004000000040000000400000004000000040000000400000184000001840000018400000184000001040000010400000344000003440000000400000004001060000000200000001030000000200000005000000000000000000000000000000000000000000244000002440000000000000000000002440000024400000244000002440000000000000000000002440000024400000000000000000000000000000000004000000000000400000004000000040000000400000004000000040000018400000184000001840000018400000104000001040000000400000004000000040000000400103000000010000000400000000004E4000004E4000004E4000004E4000004E4000004E4000004940000049400080514000805140000044400000444000004E4000004E4000004E4000004E40"

From mike at fuhr.org  Thu Jul  6 10:33:03 2006
From: mike at fuhr.org (Michael Fuhr)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706135546.GA45371@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
Message-ID: <20060706143303.GA47052@winnie.fuhr.org>

On Thu, Jul 06, 2006 at 07:55:46AM -0600, Michael Fuhr wrote:
> I'm also getting some test failures; see the attached file.

With the latest GEOS, PostGIS is now failing a regress_ogc test
that I hadn't seen it fail before:

 3c3
 < unite_garray|MULTIPOINT(2 3,0 0)
 ---
 > unite_garray|MULTIPOINT(0 0,2 3)

This is on Solaris 9/sparc (big-endian).

-- 
Michael Fuhr

From mateusz at loskot.net  Thu Jul  6 13:04:17 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Effects of using -g and -O2 together
Message-ID: <44AD4291.6090004@loskot.net>

Hi,

I noticed that GEOS' ./configure scripts called with
--enable-cassert=yes (GEOS equivalent of --enable-debug=yes)
sets CFLAGS as follows:

CFLAGS = -g -O2 -Wall -ansi -pedantic -Wno-long-long

As you see, this will produce debug version of optimized code.
It is not forbidden, but according to GCC manual, it can produce
some side and unexpected effects:

http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Debugging-Options.html#Debugging-Options
"GCC allows you to use -g with -O. The shortcuts taken by optimized code
may occasionally produce surprising results: some variables you declared
may not exist at all; flow of control may briefly move where you did not
expect it; some statements may not be executed because they compute
constant results or their values were already at hand; some statements
may execute in different places because they were moved out of loops."

I'd suggest to remove -O2 option if --enable-cassert is passed to
./configure.

What do you think?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From strk at refractions.net  Thu Jul  6 13:43:45 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Effects of using -g and -O2 together
In-Reply-To: <44AD4291.6090004@loskot.net>
References: <44AD4291.6090004@loskot.net>
Message-ID: <20060706174345.GB29868@keybit.net>

On Thu, Jul 06, 2006 at 07:04:17PM +0200, Mateusz Loskot wrote:

> I'd suggest to remove -O2 option if --enable-cassert is passed to
> ./configure.
> 
> What do you think?

Sounds good to me, we might also rename --enable-cassert to
--enable-debug.

--strk;

From strk at refractions.net  Thu Jul  6 13:44:57 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706143303.GA47052@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
	<20060706143303.GA47052@winnie.fuhr.org>
Message-ID: <20060706174457.GC29868@keybit.net>

On Thu, Jul 06, 2006 at 08:33:03AM -0600, Michael Fuhr wrote:
> On Thu, Jul 06, 2006 at 07:55:46AM -0600, Michael Fuhr wrote:
> > I'm also getting some test failures; see the attached file.
> 
> With the latest GEOS, PostGIS is now failing a regress_ogc test
> that I hadn't seen it fail before:
> 
>  3c3
>  < unite_garray|MULTIPOINT(2 3,0 0)
>  ---
>  > unite_garray|MULTIPOINT(0 0,2 3)
> 
> This is on Solaris 9/sparc (big-endian).

I've been seeing this failure for a long time now.
I think it's due to changes in internal algorithms
but I didn't check closely. Maybe we should check
with equals('MULTIPOINT(2 3,0 0)', ...) instead.

--strk;

From mateusz at loskot.net  Thu Jul  6 13:54:53 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Effects of using -g and -O2 together
In-Reply-To: <20060706174345.GB29868@keybit.net>
References: <44AD4291.6090004@loskot.net> <20060706174345.GB29868@keybit.net>
Message-ID: <44AD4E6D.2090404@loskot.net>

strk@refractions.net wrote:
> On Thu, Jul 06, 2006 at 07:04:17PM +0200, Mateusz Loskot wrote:
> 
>> I'd suggest to remove -O2 option if --enable-cassert is passed to
>> ./configure.
>>
>> What do you think?
> 
> Sounds good to me, we might also rename --enable-cassert to
> --enable-debug.

Sounds very good to me.
I'd prefer more consistent behaviour with --enable-debug than
implicit setting -g with --enable-cassert.

Am I supposed to fix it or you want to do it yourself?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mike at fuhr.org  Thu Jul  6 16:00:55 2006
From: mike at fuhr.org (Michael Fuhr)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706135546.GA45371@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
Message-ID: <20060706200055.GA49442@winnie.fuhr.org>

On Thu, Jul 06, 2006 at 07:55:46AM -0600, Michael Fuhr wrote:
> I'm still having a few problems on Solaris 9/sparc, though.  During
> the build I see a lot of the following warnings:
> 
> warning: #warning "Could not find 64bit integer definition!"
> warning: right shift count >= width of type
> 
> I'm also getting some test failures; see the attached file.

The problem finding a 64-bit integer type is due to an inability
to compile the PGAC_TYPE_64BIT_INT conftest program.  That program
includes <stdint.h>, which doesn't exist on Solaris 9, so the compile
fails, causing the test to fail for all candidate types.  I removed
<stdint.h> from the test program; configure then found a 64-bit type:

checking whether int64_t is 64 bits... no
checking whether long int is 64 bits... no
checking whether long long int is 64 bits... yes

The PGAC_TYPE_64BIT_INT definition in acsite.m4 appears to be
borrowed from PostgreSQL, although current releases of PostgreSQL
have slightly different code.  I've attached the latest definition as
found in config/c-compiler.m4 in the 8.1.4 source code.  I replaced
the GEOS acsite.m4 with this file; the build then succeeded and all
tests passed.

-- 
Michael Fuhr
-------------- next part --------------
# PGAC_TYPE_64BIT_INT(TYPE)
# -------------------------
# Check if TYPE is a working 64 bit integer type. Set HAVE_TYPE_64 to
# yes or no respectively, and define HAVE_TYPE_64 if yes.
AC_DEFUN([PGAC_TYPE_64BIT_INT],
[define([Ac_define], [translit([have_$1_64], [a-z *], [A-Z_P])])dnl
define([Ac_cachevar], [translit([pgac_cv_type_$1_64], [ *], [_p])])dnl
AC_CACHE_CHECK([whether $1 is 64 bits], [Ac_cachevar],
[AC_TRY_RUN(
[typedef $1 ac_int64;

/*
 * These are globals to discourage the compiler from folding all the
 * arithmetic tests down to compile-time constants.
 */
ac_int64 a = 20000001;
ac_int64 b = 40000005;

int does_int64_work()
{
  ac_int64 c,d;

  if (sizeof(ac_int64) != 8)
    return 0;			/* definitely not the right size */

  /* Do perfunctory checks to see if 64-bit arithmetic seems to work */
  c = a * b;
  d = (c + b) / b;
  if (d != a+1)
    return 0;
  return 1;
}
main() {
  exit(! does_int64_work());
}],
[Ac_cachevar=yes],
[Ac_cachevar=no],
[# If cross-compiling, check the size reported by the compiler and
# trust that the arithmetic works.
AC_COMPILE_IFELSE([AC_LANG_BOOL_COMPILE_TRY([], [sizeof($1) == 8])],
                  Ac_cachevar=yes,
                  Ac_cachevar=no)])])

Ac_define=$Ac_cachevar
if test x"$Ac_cachevar" = xyes ; then
  AC_DEFINE(Ac_define,, [Define to 1 if `]$1[' works and is 64 bits.])
fi
undefine([Ac_define])dnl
undefine([Ac_cachevar])dnl
])# PGAC_TYPE_64BIT_INT
From strk at refractions.net  Thu Jul  6 17:24:21 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Effects of using -g and -O2 together
In-Reply-To: <44AD4E6D.2090404@loskot.net>
References: <44AD4291.6090004@loskot.net> <20060706174345.GB29868@keybit.net>
	<44AD4E6D.2090404@loskot.net>
Message-ID: <20060706212421.GA36474@keybit.net>

On Thu, Jul 06, 2006 at 07:54:53PM +0200, Mateusz Loskot wrote:
> strk@refractions.net wrote:
> > On Thu, Jul 06, 2006 at 07:04:17PM +0200, Mateusz Loskot wrote:
> > 
> >> I'd suggest to remove -O2 option if --enable-cassert is passed to
> >> ./configure.
> >>
> >> What do you think?
> > 
> > Sounds good to me, we might also rename --enable-cassert to
> > --enable-debug.
> 
> Sounds very good to me.
> I'd prefer more consistent behaviour with --enable-debug than
> implicit setting -g with --enable-cassert.

Mm.. I checked and actually, we're not setting -g -O2 explicitly
in any configuration file. Also, we advertise --disable-cassert
to define NDEBUG, which is undefined by default.

So, to summarize, -g -O2 is an implicit setting.
This seems to come from 

(info autoconf)
 - Macro: AC_PROG_CC ([COMPILER-SEARCH-LIST])
...
     If using the GNU C compiler, set shell variable `GCC' to `yes'.
     If output variable `CFLAGS' was not already set, set it to `-g
     -O2' for the GNU C compiler (`-O2' on systems where GCC does not
     accept `-g'), or `-g' for other compilers.
...
 - Macro: AC_PROG_CXX ([COMPILER-SEARCH-LIST])
....
     If using the GNU C++ compiler, set shell variable `GXX' to `yes'.
     If output variable `CXXFLAGS' was not already set, set it to `-g
     -O2' for the GNU C++ compiler (`-O2' on systems where G++ does not
     accept `-g'), or `-g' for other compilers.

So, GNU seems to disagree with itself
(you can expect this from a recursive acronym)

Anyway, if you export CFLAGS/CXXFLAGS in the environment
those macros shouldn't set anything. I'm not sure it's worth
adding an additional special case for that.

--strk;

From strk at refractions.net  Thu Jul  6 17:32:22 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706200055.GA49442@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
	<20060706200055.GA49442@winnie.fuhr.org>
Message-ID: <20060706213222.GB36474@keybit.net>

<stdint.h> was added to allow testing of int64_t.
When building with -pedantic the 'long long' is warned about,
while using int64_t is accepted nicely. 
I guess that every system having a 64bit "long long" also
has an int64_t, we just need to find the appropriate header...

--strk;

On Thu, Jul 06, 2006 at 02:00:55PM -0600, Michael Fuhr wrote:
> On Thu, Jul 06, 2006 at 07:55:46AM -0600, Michael Fuhr wrote:
> > I'm still having a few problems on Solaris 9/sparc, though.  During
> > the build I see a lot of the following warnings:
> > 
> > warning: #warning "Could not find 64bit integer definition!"
> > warning: right shift count >= width of type
> > 
> > I'm also getting some test failures; see the attached file.
> 
> The problem finding a 64-bit integer type is due to an inability
> to compile the PGAC_TYPE_64BIT_INT conftest program.  That program
> includes <stdint.h>, which doesn't exist on Solaris 9, so the compile
> fails, causing the test to fail for all candidate types.  I removed
> <stdint.h> from the test program; configure then found a 64-bit type:
> 
> checking whether int64_t is 64 bits... no
> checking whether long int is 64 bits... no
> checking whether long long int is 64 bits... yes
> 
> The PGAC_TYPE_64BIT_INT definition in acsite.m4 appears to be
> borrowed from PostgreSQL, although current releases of PostgreSQL
> have slightly different code.  I've attached the latest definition as
> found in config/c-compiler.m4 in the 8.1.4 source code.  I replaced
> the GEOS acsite.m4 with this file; the build then succeeded and all
> tests passed.
> 
> -- 
> Michael Fuhr

> # PGAC_TYPE_64BIT_INT(TYPE)
> # -------------------------
> # Check if TYPE is a working 64 bit integer type. Set HAVE_TYPE_64 to
> # yes or no respectively, and define HAVE_TYPE_64 if yes.
> AC_DEFUN([PGAC_TYPE_64BIT_INT],
> [define([Ac_define], [translit([have_$1_64], [a-z *], [A-Z_P])])dnl
> define([Ac_cachevar], [translit([pgac_cv_type_$1_64], [ *], [_p])])dnl
> AC_CACHE_CHECK([whether $1 is 64 bits], [Ac_cachevar],
> [AC_TRY_RUN(
> [typedef $1 ac_int64;
> 
> /*
>  * These are globals to discourage the compiler from folding all the
>  * arithmetic tests down to compile-time constants.
>  */
> ac_int64 a = 20000001;
> ac_int64 b = 40000005;
> 
> int does_int64_work()
> {
>   ac_int64 c,d;
> 
>   if (sizeof(ac_int64) != 8)
>     return 0;			/* definitely not the right size */
> 
>   /* Do perfunctory checks to see if 64-bit arithmetic seems to work */
>   c = a * b;
>   d = (c + b) / b;
>   if (d != a+1)
>     return 0;
>   return 1;
> }
> main() {
>   exit(! does_int64_work());
> }],
> [Ac_cachevar=yes],
> [Ac_cachevar=no],
> [# If cross-compiling, check the size reported by the compiler and
> # trust that the arithmetic works.
> AC_COMPILE_IFELSE([AC_LANG_BOOL_COMPILE_TRY([], [sizeof($1) == 8])],
>                   Ac_cachevar=yes,
>                   Ac_cachevar=no)])])
> 
> Ac_define=$Ac_cachevar
> if test x"$Ac_cachevar" = xyes ; then
>   AC_DEFINE(Ac_define,, [Define to 1 if `]$1[' works and is 64 bits.])
> fi
> undefine([Ac_define])dnl
> undefine([Ac_cachevar])dnl
> ])# PGAC_TYPE_64BIT_INT

> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


-- 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From strk at refractions.net  Thu Jul  6 17:34:16 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706135546.GA45371@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
Message-ID: <20060706213416.GC36474@keybit.net>

On Thu, Jul 06, 2006 at 07:55:46AM -0600, Michael Fuhr wrote:
...
> warning: #warning "Could not find 64bit integer definition!"
> warning: right shift count >= width of type
> 
> I'm also getting some test failures; see the attached file.


Do you still get the failures after successful 64bit int detection ?

--strk;

From delcacho at gmail.com  Thu Jul  6 18:28:39 2006
From: delcacho at gmail.com (Carlos del Cacho)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] problem with line intersections
Message-ID: <bfa4e3120607061528t7a8e574fnc86f965c1e26d75d@mail.gmail.com>

Martin,

Thanks for your fast reply.

I coded a (slow) workaround for my application.

Cheers,
Carlos


Date: Wed, 5 Jul 2006 14:20:31 -0700
From: "Martin Davis" <mbdavis@VividSolutions.com>
Subject: RE: [geos-devel] problem with line intersections
To: "GEOS Development List" <geos-devel@geos.refractions.net>
Message-ID:
       <5A94289A9268514C8D6C0F1FF44BA027EBAB84@venus.VividSolutions.com>
Content-Type: text/plain; charset="us-ascii"

Currently there's no way to do this.  There has been some discussion
about this on the JTS list.  Maybe this will appear in a future version.


Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060707/f0491355/attachment.html
From mike at fuhr.org  Thu Jul  6 19:27:53 2006
From: mike at fuhr.org (Michael Fuhr)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706213222.GB36474@keybit.net>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
	<20060706200055.GA49442@winnie.fuhr.org>
	<20060706213222.GB36474@keybit.net>
Message-ID: <20060706232752.GA50508@winnie.fuhr.org>

On Thu, Jul 06, 2006 at 11:32:22PM +0200, strk@refractions.net wrote:
> <stdint.h> was added to allow testing of int64_t.
> When building with -pedantic the 'long long' is warned about,
> while using int64_t is accepted nicely. 
> I guess that every system having a 64bit "long long" also
> has an int64_t, we just need to find the appropriate header...

<inttypes.h> is available on Solaris, FreeBSD, and Linux; I don't
know about other platforms but it's part of the Open Group Base
Specifications (however, so is <stdint.h>, which Solaris 9 doesn't
have).  I just remembered that we've discussed <stdint.h> and
<inttypes.h> before:

http://postgis.refractions.net/pipermail/postgis-users/2006-February/011031.html

On Solaris 9, gcc 3.4.2 with -ansi doesn't define int64_t (even
when including <inttypes.h>), and with -pedantic it warns about
long long.  With -ansi -pedantic -Wno-long-long it recognizes long
long without complaint.

-- 
Michael Fuhr

From mike at fuhr.org  Thu Jul  6 19:29:26 2006
From: mike at fuhr.org (Michael Fuhr)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706213416.GC36474@keybit.net>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
	<20060706213416.GC36474@keybit.net>
Message-ID: <20060706232926.GB50508@winnie.fuhr.org>

On Thu, Jul 06, 2006 at 11:34:16PM +0200, strk@refractions.net wrote:
> On Thu, Jul 06, 2006 at 07:55:46AM -0600, Michael Fuhr wrote:
> ...
> > warning: #warning "Could not find 64bit integer definition!"
> > warning: right shift count >= width of type
> > 
> > I'm also getting some test failures; see the attached file.
> 
> Do you still get the failures after successful 64bit int detection ?

No, all tests passed after configure found a 64-bit type.

-- 
Michael Fuhr

From mike at fuhr.org  Thu Jul  6 22:29:01 2006
From: mike at fuhr.org (Michael Fuhr)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060706232752.GA50508@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
	<20060706200055.GA49442@winnie.fuhr.org>
	<20060706213222.GB36474@keybit.net>
	<20060706232752.GA50508@winnie.fuhr.org>
Message-ID: <20060707022900.GA51583@winnie.fuhr.org>

On Thu, Jul 06, 2006 at 05:27:53PM -0600, Michael Fuhr wrote:
> On Solaris 9, gcc 3.4.2 with -ansi doesn't define int64_t (even
> when including <inttypes.h>), and with -pedantic it warns about
> long long.  With -ansi -pedantic -Wno-long-long it recognizes long
> long without complaint.

I just noticed that the conftest program is compiled without the
options that will be used for the build.  I had edited acsite.m4 and
changed <stdint.h> to <inttypes.h>, which resulted in configure
finding int64_t because the conftest compile didn't use -ansi; but
then when the build used -ansi the compiler failed, complaining that
int64_t isn't a type.  Setting CFLAGS before the PGAC_TYPE_64BIT_INT
tests in configure.in fixed that problem (configure then found long
long int as the 64-bit type).

Here's a summary of what works on Solaris 9/sparc with gcc 3.4.2:

* In acsite.m4 include <inttypes.h> instead of <stdint.h>.

* In configure.in, before the PGAC_TYPE_64BIT_INT tests, set CFLAGS
  to have the same options that will be used for the actual build.

With these changes (and after replacing a buggy libtool) GEOS builds
and passes all tests on Solaris 9/sparc 32-bit.  I haven't done a
64-bit build yet.

-- 
Michael Fuhr

From warmerdam at pobox.com  Thu Jul  6 22:49:59 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060707022900.GA51583@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>	<20060706034038.GA31940@winnie.fuhr.org>	<20060706071225.GD21461@keybit.net>	<20060706135546.GA45371@winnie.fuhr.org>	<20060706200055.GA49442@winnie.fuhr.org>	<20060706213222.GB36474@keybit.net>	<20060706232752.GA50508@winnie.fuhr.org>
	<20060707022900.GA51583@winnie.fuhr.org>
Message-ID: <44ADCBD7.7080007@pobox.com>


Strk,

I just tried building MapServer against the GEOS 3.0.0 C API and discovered
that the C API there does not seem to have all the methods for accessing
points on geometries that are in the 2.2.x branch.

I've asked Mateusz to fix this up, if my analysis is correct.

I hadn't noticed this before since GDAL doesn't use those extra
methods.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ssarkar at forestone.com  Fri Jul  7 12:48:31 2006
From: ssarkar at forestone.com (Sudipta Sarkar)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
Message-ID: <44AE905F.3060709@forestone.com>

Hi All,
I am trying to use GEOS to create envelope geometries for a bunch of 
different tiles and create a spatial index based on these geometries. 
The purpose is to select features lying within a particular tile based 
on an initial query on the spatial index of these different tiles. I am 
a complete newbie to GEOS so was hoping if anyone can suggest as to 
which index amidst Quadtree and SRTree will work best for my purpose. It 
will also be helpful if anyone can point me to any example script in 
C/C++ that uses GEOS to build indexes and query them.

Any help is appreciated.
Thanks
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssarkar.vcf
Type: text/x-vcard
Size: 253 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060707/d3363bc6/ssarkar.vcf
From pramsey at refractions.net  Fri Jul  7 13:11:39 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
In-Reply-To: <44AE905F.3060709@forestone.com>
References: <44AE905F.3060709@forestone.com>
Message-ID: <44AE95CB.8040709@refractions.net>

I am not a programmer, so I can't give you code snippets. I can tell you 
that if your tiles are regularly sized and regularly spaced (as the term 
"tile" hints) probably the quadtree will be marginally more 
efficient/faster.

WRT your actual problem, depending on your implementation requirements 
using PostGIS/PostgreSQL rather than coding from scratch will certainly 
be easier. The suitability of that kind of solution obviously depends on 
where you are going to deploy the final product, of course.

P.

Sudipta Sarkar wrote:
> Hi All,
> I am trying to use GEOS to create envelope geometries for a bunch of 
> different tiles and create a spatial index based on these geometries. 
> The purpose is to select features lying within a particular tile based 
> on an initial query on the spatial index of these different tiles. I am 
> a complete newbie to GEOS so was hoping if anyone can suggest as to 
> which index amidst Quadtree and SRTree will work best for my purpose. It 
> will also be helpful if anyone can point me to any example script in 
> C/C++ that uses GEOS to build indexes and query them.
> 
> Any help is appreciated.
> Thanks


From ssarkar at forestone.com  Fri Jul  7 13:22:35 2006
From: ssarkar at forestone.com (Sudipta Sarkar)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
In-Reply-To: <44AE95CB.8040709@refractions.net>
References: <44AE905F.3060709@forestone.com> <44AE95CB.8040709@refractions.net>
Message-ID: <44AE985B.60307@forestone.com>

Hi Paul,
Yes we do have PostGreSQL and PostGIS and I know we can do it through 
PostGIS but the current requirement precludes use of PostgreSQL and so 
it has to be from scratch. Sorry for wrong choice of words but my tiles 
may not be regularly sized. So am i to assume then that SRTree will be 
more efficient?
Is there any tutorial or example anywhere I can look at?

Paul Ramsey wrote:
> I am not a programmer, so I can't give you code snippets. I can tell 
> you that if your tiles are regularly sized and regularly spaced (as 
> the term "tile" hints) probably the quadtree will be marginally more 
> efficient/faster.
>
> WRT your actual problem, depending on your implementation requirements 
> using PostGIS/PostgreSQL rather than coding from scratch will 
> certainly be easier. The suitability of that kind of solution 
> obviously depends on where you are going to deploy the final product, 
> of course.
>
> P.
>
> Sudipta Sarkar wrote:
>> Hi All,
>> I am trying to use GEOS to create envelope geometries for a bunch of 
>> different tiles and create a spatial index based on these geometries. 
>> The purpose is to select features lying within a particular tile 
>> based on an initial query on the spatial index of these different 
>> tiles. I am a complete newbie to GEOS so was hoping if anyone can 
>> suggest as to which index amidst Quadtree and SRTree will work best 
>> for my purpose. It will also be helpful if anyone can point me to any 
>> example script in C/C++ that uses GEOS to build indexes and query them.
>>
>> Any help is appreciated.
>> Thanks
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssarkar.vcf
Type: text/x-vcard
Size: 253 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060707/b5760707/ssarkar.vcf
From chodgson at refractions.net  Fri Jul  7 13:34:17 2006
From: chodgson at refractions.net (Chris Hodgson)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
In-Reply-To: <44AE95CB.8040709@refractions.net>
References: <44AE905F.3060709@forestone.com> <44AE95CB.8040709@refractions.net>
Message-ID: <44AE9B19.9080902@refractions.net>

I belive the difference between the quadtree and SRTree implementations 
is that the quad tree is not editable once it is created and you start 
querying it, while you can continue to add and remove envelopes from an 
SRTree, intermixed between queries. Assuming that your data is static 
and you don't need to change the index on the fly, I believe that the 
quadtree will give you better performance.

There should be examples of how to use both of these indexes within the 
geos code itself. I believe the graph-building operations use an index 
to locate the nearby nodes/edges when inserting new ones? I could be 
wrong, but I'm sure if you search for references to index classes within 
the geos code itself, you will find a usage example.

I'll second Paul's suggestion that PostGIS will let you do this far more 
easily, assuming it fits your other requirements.

Hope that helps!

Chris Hodgson


> Sudipta Sarkar wrote:
> 
>> Hi All,
>> I am trying to use GEOS to create envelope geometries for a bunch of 
>> different tiles and create a spatial index based on these geometries. 
>> The purpose is to select features lying within a particular tile based 
>> on an initial query on the spatial index of these different tiles. I 
>> am a complete newbie to GEOS so was hoping if anyone can suggest as to 
>> which index amidst Quadtree and SRTree will work best for my purpose. 
>> It will also be helpful if anyone can point me to any example script 
>> in C/C++ that uses GEOS to build indexes and query them.
>>
>> Any help is appreciated.
>> Thanks


From mbdavis at VividSolutions.com  Fri Jul  7 14:05:09 2006
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
Message-ID: <5A94289A9268514C8D6C0F1FF44BA0279C3FC6@venus.VividSolutions.com>

Here's the differences between Quadtree and STRtree:

Quadtree is dynamic (items can be added at any time, not just at
construction time, and items can be deleted)
STRtree is static (the tree can be populated with items only once, after
construction)
STRtree is faster than Quadtree (up to 2 times or more faster)

As usual, there is a tradeoff between flexibility and efficiency.

There are examples of the use of these classes throughout the GEOS/JTS
code.  In particular (in JTS at least) the unit tests in test.jts.index
should provide some simple examples.

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046


> -----Original Message-----
> From: geos-devel-bounces@geos.refractions.net 
> [mailto:geos-devel-bounces@geos.refractions.net] On Behalf Of 
> Sudipta Sarkar
> Sent: July 7, 2006 9:49 AM
> To: geos-devel@geos.refractions.net
> Subject: [geos-devel] Indexing question from a newbie
> 
> 
> Hi All,
> I am trying to use GEOS to create envelope geometries for a bunch of 
> different tiles and create a spatial index based on these geometries. 
> The purpose is to select features lying within a particular 
> tile based 
> on an initial query on the spatial index of these different 
> tiles. I am 
> a complete newbie to GEOS so was hoping if anyone can suggest as to 
> which index amidst Quadtree and SRTree will work best for my 
> purpose. It 
> will also be helpful if anyone can point me to any example script in 
> C/C++ that uses GEOS to build indexes and query them.
> 
> Any help is appreciated.
> Thanks
> 

From chodgson at refractions.net  Fri Jul  7 14:13:38 2006
From: chodgson at refractions.net (Chris Hodgson)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
In-Reply-To: <5A94289A9268514C8D6C0F1FF44BA0279C3FC6@venus.VividSolutions.com>
References: <5A94289A9268514C8D6C0F1FF44BA0279C3FC6@venus.VividSolutions.com>
Message-ID: <44AEA452.8050606@refractions.net>

Whoops... I got it backwards... ignore my earlier post, Martin is the 
authoritative source.

Chris Hodgson

Martin Davis wrote:
> Here's the differences between Quadtree and STRtree:
> 
> Quadtree is dynamic (items can be added at any time, not just at
> construction time, and items can be deleted)
> STRtree is static (the tree can be populated with items only once, after
> construction)
> STRtree is faster than Quadtree (up to 2 times or more faster)
> 
> As usual, there is a tradeoff between flexibility and efficiency.
> 
> There are examples of the use of these classes throughout the GEOS/JTS
> code.  In particular (in JTS at least) the unit tests in test.jts.index
> should provide some simple examples.


From ssarkar at forestone.com  Fri Jul  7 14:20:32 2006
From: ssarkar at forestone.com (Sudipta Sarkar)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
In-Reply-To: <44AE9B19.9080902@refractions.net>
References: <44AE905F.3060709@forestone.com> <44AE95CB.8040709@refractions.net>
	<44AE9B19.9080902@refractions.net>
Message-ID: <44AEA5F0.1090904@forestone.com>

Guys,
One more question is, is it at all possible to construct quadtree and 
strtree indices based on 3D point geometries? It seems you have  to 
supply the envelope of a geometry to the constructor function of both 
the indices but can you construct envelopes of points?


>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssarkar.vcf
Type: text/x-vcard
Size: 253 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060707/6d8b334d/ssarkar.vcf
From mbdavis at VividSolutions.com  Fri Jul  7 14:24:15 2006
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
Message-ID: <5A94289A9268514C8D6C0F1FF44BA027EBABA3@venus.VividSolutions.com>

Nope - the indexes are 2D only.

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046


> -----Original Message-----
> From: geos-devel-bounces@geos.refractions.net 
> [mailto:geos-devel-bounces@geos.refractions.net] On Behalf Of 
> Sudipta Sarkar
> Sent: July 7, 2006 11:21 AM
> To: GEOS Development List
> Subject: Re: [geos-devel] Indexing question from a newbie
> 
> 
> Guys,
> One more question is, is it at all possible to construct quadtree and 
> strtree indices based on 3D point geometries? It seems you have  to 
> supply the envelope of a geometry to the constructor function of both 
> the indices but can you construct envelopes of points?
> 
> 
> >
> 

From ssarkar at forestone.com  Fri Jul  7 14:34:32 2006
From: ssarkar at forestone.com (Sudipta Sarkar)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
In-Reply-To: <5A94289A9268514C8D6C0F1FF44BA027EBABA3@venus.VividSolutions.com>
References: <5A94289A9268514C8D6C0F1FF44BA027EBABA3@venus.VividSolutions.com>
Message-ID: <44AEA938.8070602@forestone.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: ssarkar.vcf
Type: text/x-vcard
Size: 253 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060707/69b17dee/ssarkar.vcf
From strk at refractions.net  Fri Jul  7 15:19:02 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] CAPI versioning and branches
Message-ID: <20060707191902.GA54616@keybit.net>

Moving toward releases 2.2.3 and 3.0.0 I've been thinking
we'll have problem with CAPI lib versioning.

Problem is we need to make sure CAPI from 2.2 branch
is less- versioned then from HEAD. The only solution
that comes to my mind is incrementing the minor number
in HEAD, even if there is no change at all (well, there
is a micro change in this case, but as a generally rule).

So, 2.2.3 would come out with CAPI 1.1.1 and 3.0.0 with
CAPI 1.2.0. SONAME should always be set to libgeos_so.1
so that minor increments won't be binary-incompatible.

How does it sound ?

--strk; 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From strk at refractions.net  Fri Jul  7 15:34:38 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060707022900.GA51583@winnie.fuhr.org>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
	<20060706200055.GA49442@winnie.fuhr.org>
	<20060706213222.GB36474@keybit.net>
	<20060706232752.GA50508@winnie.fuhr.org>
	<20060707022900.GA51583@winnie.fuhr.org>
Message-ID: <20060707193438.GB54616@keybit.net>

I committed a patch following your instructions.
Could you test it ?

TIA

--strk;

On Thu, Jul 06, 2006 at 08:29:01PM -0600, Michael Fuhr wrote:
> On Thu, Jul 06, 2006 at 05:27:53PM -0600, Michael Fuhr wrote:
> > On Solaris 9, gcc 3.4.2 with -ansi doesn't define int64_t (even
> > when including <inttypes.h>), and with -pedantic it warns about
> > long long.  With -ansi -pedantic -Wno-long-long it recognizes long
> > long without complaint.
> 
> I just noticed that the conftest program is compiled without the
> options that will be used for the build.  I had edited acsite.m4 and
> changed <stdint.h> to <inttypes.h>, which resulted in configure
> finding int64_t because the conftest compile didn't use -ansi; but
> then when the build used -ansi the compiler failed, complaining that
> int64_t isn't a type.  Setting CFLAGS before the PGAC_TYPE_64BIT_INT
> tests in configure.in fixed that problem (configure then found long
> long int as the 64-bit type).
> 
> Here's a summary of what works on Solaris 9/sparc with gcc 3.4.2:
> 
> * In acsite.m4 include <inttypes.h> instead of <stdint.h>.
> 
> * In configure.in, before the PGAC_TYPE_64BIT_INT tests, set CFLAGS
>   to have the same options that will be used for the actual build.
> 
> With these changes (and after replacing a buggy libtool) GEOS builds
> and passes all tests on Solaris 9/sparc 32-bit.  I haven't done a
> 64-bit build yet.
> 
> -- 
> Michael Fuhr

From strk at refractions.net  Fri Jul  7 15:36:22 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <44ADCBD7.7080007@pobox.com>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
	<20060706200055.GA49442@winnie.fuhr.org>
	<20060706213222.GB36474@keybit.net>
	<20060706232752.GA50508@winnie.fuhr.org>
	<20060707022900.GA51583@winnie.fuhr.org>
	<44ADCBD7.7080007@pobox.com>
Message-ID: <20060707193622.GC54616@keybit.net>

On Thu, Jul 06, 2006 at 10:49:59PM -0400, Frank Warmerdam wrote:
> 
> Strk,
> 
> I just tried building MapServer against the GEOS 3.0.0 C API and discovered
> that the C API there does not seem to have all the methods for accessing
> points on geometries that are in the 2.2.x branch.
> 
> I've asked Mateusz to fix this up, if my analysis is correct.
> 
> I hadn't noticed this before since GDAL doesn't use those extra
> methods.

Mm.. we shouldn't drop methods in the CAPI.
If you can be more specific I'll check that out.

--strk; 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From warmerdam at pobox.com  Fri Jul  7 15:52:14 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060707193622.GC54616@keybit.net>
References: <20060705233559.GA21461@keybit.net>	<20060706034038.GA31940@winnie.fuhr.org>	<20060706071225.GD21461@keybit.net>	<20060706135546.GA45371@winnie.fuhr.org>	<20060706200055.GA49442@winnie.fuhr.org>	<20060706213222.GB36474@keybit.net>	<20060706232752.GA50508@winnie.fuhr.org>	<20060707022900.GA51583@winnie.fuhr.org>	<44ADCBD7.7080007@pobox.com>
	<20060707193622.GC54616@keybit.net>
Message-ID: <44AEBB6E.1040500@pobox.com>

strk@refractions.net wrote:
> On Thu, Jul 06, 2006 at 10:49:59PM -0400, Frank Warmerdam wrote:
>> Strk,
>>
>> I just tried building MapServer against the GEOS 3.0.0 C API and discovered
>> that the C API there does not seem to have all the methods for accessing
>> points on geometries that are in the 2.2.x branch.
>>
>> I've asked Mateusz to fix this up, if my analysis is correct.
>>
>> I hadn't noticed this before since GDAL doesn't use those extra
>> methods.
> 
> Mm.. we shouldn't drop methods in the CAPI.
> If you can be more specific I'll check that out.

Strk,

I'm sorry, it was my mistake.  I had an old geos_c.h sitting around
in geos/source/capi and didn't realize I needed to point at geos/capi for
3.0.  No problem after all.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mateusz at loskot.net  Fri Jul  7 16:07:25 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] CAPI versioning and branches
In-Reply-To: <20060707191902.GA54616@keybit.net>
References: <20060707191902.GA54616@keybit.net>
Message-ID: <44AEBEFD.9080904@loskot.net>

strk@refractions.net wrote:
> Moving toward releases 2.2.3 and 3.0.0 I've been thinking
> we'll have problem with CAPI lib versioning.
> 
> Problem is we need to make sure CAPI from 2.2 branch
> is less- versioned then from HEAD. The only solution
> that comes to my mind is incrementing the minor number
> in HEAD, even if there is no change at all (well, there
> is a micro change in this case, but as a generally rule).
> 
> So, 2.2.3 would come out with CAPI 1.1.1 and 3.0.0 with
> CAPI 1.2.0. SONAME should always be set to libgeos_so.1
> so that minor increments won't be binary-incompatible.
> 
> How does it sound ?

Yes, it does for me.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mbdavis at VividSolutions.com  Fri Jul  7 18:00:37 2006
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Indexing question from a newbie
Message-ID: <5A94289A9268514C8D6C0F1FF44BA027EBABA7@venus.VividSolutions.com>

Oh, I see what you mean.  Yes, points are supported.
 
 
Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046

	-----Original Message-----
	From: geos-devel-bounces@geos.refractions.net
[mailto:geos-devel-bounces@geos.refractions.net] On Behalf Of Sudipta
Sarkar
	Sent: July 7, 2006 11:35 AM
	To: GEOS Development List
	Subject: Re: [geos-devel] Indexing question from a newbie
	
	
	But Martin even with 2D geometry can we construct quad tree and
strtree indices for point geometries?
	
	
	Martin Davis wrote: 

		Nope - the indexes are 2D only.
		
		Martin Davis, Senior Technical Architect
		Vivid Solutions Inc.      www.vividsolutions.com
		Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
		Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046
		
		
		  

			-----Original Message-----
			From: geos-devel-bounces@geos.refractions.net 
			[mailto:geos-devel-bounces@geos.refractions.net]
On Behalf Of 
			Sudipta Sarkar
			Sent: July 7, 2006 11:21 AM
			To: GEOS Development List
			Subject: Re: [geos-devel] Indexing question from
a newbie
			
			
			Guys,
			One more question is, is it at all possible to
construct quadtree and 
			strtree indices based on 3D point geometries? It
seems you have  to 
			supply the envelope of a geometry to the
constructor function of both 
			the indices but can you construct envelopes of
points?
			
			
			    

		_______________________________________________
		geos-devel mailing list
		geos-devel@geos.refractions.net
		http://geos.refractions.net/mailman/listinfo/geos-devel
		
		  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060707/bca59775/attachment.html
From mike at fuhr.org  Fri Jul  7 20:07:33 2006
From: mike at fuhr.org (Michael Fuhr)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS-3.0.0rc1 in a week, SWIG status ?
In-Reply-To: <20060707193438.GB54616@keybit.net>
References: <20060705233559.GA21461@keybit.net>
	<20060706034038.GA31940@winnie.fuhr.org>
	<20060706071225.GD21461@keybit.net>
	<20060706135546.GA45371@winnie.fuhr.org>
	<20060706200055.GA49442@winnie.fuhr.org>
	<20060706213222.GB36474@keybit.net>
	<20060706232752.GA50508@winnie.fuhr.org>
	<20060707022900.GA51583@winnie.fuhr.org>
	<20060707193438.GB54616@keybit.net>
Message-ID: <20060708000733.GA48970@winnie.fuhr.org>

On Fri, Jul 07, 2006 at 09:34:38PM +0200, strk@refractions.net wrote:
> I committed a patch following your instructions.
> Could you test it ?

Configure found long long int as a 64-bit type, the build succeeded,
and all tests passed on Solaris 9/sparc 32-bit with gcc 3.4.2.

Thanks!

-- 
Michael Fuhr

From strk at refractions.net  Sat Jul  8 18:26:54 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] 2.2.3 tagged
Message-ID: <20060708222654.GE69630@keybit.net>

Release 2.2.3 of GEOS is tagged. Main reason for it was a little
fix in the CAPI (making multiple initGEOS/finishGEOS calls harmless).

CAPI lib version is 1.1.1

--strk; 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From strk at refractions.net  Sat Jul  8 18:51:28 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Handling C and C++ API with geos-config
In-Reply-To: <44AC5425.8050008@loskot.net>
References: <44AC5425.8050008@loskot.net>
Message-ID: <20060708225128.GG69630@keybit.net>

On Thu, Jul 06, 2006 at 02:07:01AM +0200, Mateusz Loskot wrote:

> Proposal 1)
> 
> - add new macros HAVE_GEOS_CAPI,
> GEOS_CAPI_LIBS, GEOS_CAPI_VERSION
> 
> (the latter is impossible at the moment)
> 
> GEOS_LIBS="`geos-config --ldflags` -lgeos"
> GEOS_CAPI_LIBS="`geos-config --ldflags` -lgeos_c

After a brief discussion on #postgis we decided to
drop the GEOS_CAPI_VERSION part. We want to expose
a single version, which is *release* version, not
any *abi* version.

I'm still unsure about these two alternatives for
the geos-config part:

(1)
> Add --capi option to geos-config?

(2)
> geos-config - checks for C++ API
> geos-c-config - this option follows lib naming style libgeos and libgeos-c


Maybe, we don't need any of the two, as long as the --ldflags
switch doesn't output either -lgeos or -lgeos_c
(the geos.m4 macro can do this for foreign packages)

--strk;

From pramsey at refractions.net  Sat Jul  8 19:10:12 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] GEOS 2.2.3 Released
In-Reply-To: <20060708222654.GE69630@keybit.net>
References: <20060708222654.GE69630@keybit.net>
Message-ID: <AB745EA5-D7C1-4FF1-8A4F-132DB8BED5BB@refractions.net>


GEOS 2.2.3 is now available for download from http:// 
geos.refractions.net.

On 8-Jul-06, at 3:26 PM, strk@refractions.net wrote:

> Release 2.2.3 of GEOS is tagged. Main reason for it was a little
> fix in the CAPI (making multiple initGEOS/finishGEOS calls harmless).
>
> CAPI lib version is 1.1.1
>
> --strk;
>
>  /"\    ASCII Ribbon Campaign
>  \ /    Respect for low technology.
>   X     Keep e-mail messages readable by any computer system.
>  / \    Keep it ASCII.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From mateusz at loskot.net  Mon Jul 10 03:13:41 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Using std::vector<bool> container
In-Reply-To: <20060426103619.GF55765@keybit.net>
References: <444A89A5.5050503@loskot.net> <20060426103619.GF55765@keybit.net>
Message-ID: <44B1FE25.3010207@loskot.net>

Hi,

I found this old message unreplied, so here I give my response
with longer delay. Sorry for that.

strk@refractions.net wrote:
> Mateusz, the role of vector<bool> used there is to "tag" each
> vertex in a CoordinateSequence telling wheter or not it is going
> to be into the result. Size of the CoordinateSequence is not
> known at compile-time, and we need a random access iterator 
> to couple each vertex with this information. 

So, we can't used deque because it does not support dynamic resize.
Also, we can't used bitset becasue it does not support iterators.

> If we want to keep tracking JTS as close as possible I'd
> use small integers instead of bools and still use a vector.
> Does it make sense ?

Yes, vector of integers is the best and safest solution I see.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From mateusz at loskot.net  Mon Jul 10 03:22:09 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Undefine references in libgeos_c 2.2.3
Message-ID: <44B20021.2060808@loskot.net>

Hi,

Yesterday, one of GDAL users reported that GDAL CVS does not build
with GEOS 2.2.3.
I investigated the problem and noticed two issues.
The first one is related to GDAL autotools (already fixed).
But the second one seems to be related to GEOS itsef.

I downloaded fresh GEOS 2.2.3 release and build it in standard way:

$ ./configure
$ make
$ sudo make install

Next, I checkouted GDAL from CVS and tried to build it too.
The libgdal library builds and links well, but linking
OGR utilities fails with following message:

/bin/sh /home/mloskot/tmp/gdal-cvs/gdal/libtool --mode=link     g++
ogrinfo.o /home/mloskot/tmp/gdal-cvs/gdal/libgdal.la -o ogrinfo
g++ ogrinfo.o -o .libs/ogrinfo
/home/mloskot/tmp/gdal-cvs/gdal/.libs/libgdal.so -L/usr/local/lib
-L/usr/lib -lpq -lrt -ldl -lpthread
/usr/local/lib/libgeos_c.so.1: undefined reference to
`geos::WKBReader::read(std::basic_istream<char, std::char_traits<char> >&)'
/usr/local/lib/libgeos_c.so.1: undefined reference to
`geos::WKBWriter::write(geos::Geometry const&, std::basic_ostream<char,
std::char_traits<char> >&)'
/usr/local/lib/libgeos_c.so.1: undefined reference to
`geos::Point::getCoordinatesRO() const'
/usr/local/lib/libgeos_c.so.1: undefined reference to
`geos::WKBWriter::WKBWriter(int, int)'
collect2: ld returned 1 exit status
make[1]: *** [ogrinfo] Error 1
make[1]: Leaving directory `/home/mloskot/tmp/gdal-cvs/gdal/ogr'
make: *** [ogr-apps] Error 2

I checked 2.2.3 sources and all calls listed above are declared (.h) and
defined (.cpp) properly.

It seems to be a problem with -lgeos -lgeos_c linking but I'm not sure.

Any ideas?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From strk at refractions.net  Mon Jul 10 06:20:42 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Undefine references in libgeos_c 2.2.3
In-Reply-To: <44B20021.2060808@loskot.net>
References: <44B20021.2060808@loskot.net>
Message-ID: <20060710102042.GH77845@keybit.net>

Do you mean you're using -lgeos -lgeos_c ?
One problem might be that libgeos_c.so *knows* which version
of libgeos.so to link against, while manual link could pick up
a wrong one (ie: manual -lgeos would link against 3.0.0 while
libgeos_c.so from 2.2.3 needs to use libgeos.so from 2.2.3!)

--strk;

On Mon, Jul 10, 2006 at 09:22:09AM +0200, Mateusz Loskot wrote:
> Hi,
> 
> Yesterday, one of GDAL users reported that GDAL CVS does not build
> with GEOS 2.2.3.
> I investigated the problem and noticed two issues.
> The first one is related to GDAL autotools (already fixed).
> But the second one seems to be related to GEOS itsef.
> 
> I downloaded fresh GEOS 2.2.3 release and build it in standard way:
> 
> $ ./configure
> $ make
> $ sudo make install
> 
> Next, I checkouted GDAL from CVS and tried to build it too.
> The libgdal library builds and links well, but linking
> OGR utilities fails with following message:
> 
> /bin/sh /home/mloskot/tmp/gdal-cvs/gdal/libtool --mode=link     g++
> ogrinfo.o /home/mloskot/tmp/gdal-cvs/gdal/libgdal.la -o ogrinfo
> g++ ogrinfo.o -o .libs/ogrinfo
> /home/mloskot/tmp/gdal-cvs/gdal/.libs/libgdal.so -L/usr/local/lib
> -L/usr/lib -lpq -lrt -ldl -lpthread
> /usr/local/lib/libgeos_c.so.1: undefined reference to
> `geos::WKBReader::read(std::basic_istream<char, std::char_traits<char> >&)'
> /usr/local/lib/libgeos_c.so.1: undefined reference to
> `geos::WKBWriter::write(geos::Geometry const&, std::basic_ostream<char,
> std::char_traits<char> >&)'
> /usr/local/lib/libgeos_c.so.1: undefined reference to
> `geos::Point::getCoordinatesRO() const'
> /usr/local/lib/libgeos_c.so.1: undefined reference to
> `geos::WKBWriter::WKBWriter(int, int)'
> collect2: ld returned 1 exit status
> make[1]: *** [ogrinfo] Error 1
> make[1]: Leaving directory `/home/mloskot/tmp/gdal-cvs/gdal/ogr'
> make: *** [ogr-apps] Error 2
> 
> I checked 2.2.3 sources and all calls listed above are declared (.h) and
> defined (.cpp) properly.
> 
> It seems to be a problem with -lgeos -lgeos_c linking but I'm not sure.
> 
> Any ideas?
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

-- 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From mateusz at loskot.net  Mon Jul 10 06:31:15 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Undefine references in libgeos_c 2.2.3
In-Reply-To: <20060710102042.GH77845@keybit.net>
References: <44B20021.2060808@loskot.net> <20060710102042.GH77845@keybit.net>
Message-ID: <44B22C73.2030908@loskot.net>

strk@refractions.net wrote:
> Do you mean you're using -lgeos -lgeos_c ?

Yes.
GDAL composes GEOS flags as follows (in configure.in/configure)

GEOS_LIBS="${GEOS_LIBS} -lgeos_c"
GEOS_CFLAGS="${GEOS_CFLAGS}"

> One problem might be that libgeos_c.so *knows* which version
> of libgeos.so to link against, while manual link could pick up
> a wrong one (ie: manual -lgeos would link against 3.0.0 while
> libgeos_c.so from 2.2.3 needs to use libgeos.so from 2.2.3!)

I don't suppose this is the problem.
I have cleaned all old geos include/lib files from my system before
I attempted to test GDAL + GEOS 2.2.3.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From strk at refractions.net  Mon Jul 10 07:45:45 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Undefine references in libgeos_c 2.2.3
In-Reply-To: <44B22C73.2030908@loskot.net>
References: <44B20021.2060808@loskot.net> <20060710102042.GH77845@keybit.net>
	<44B22C73.2030908@loskot.net>
Message-ID: <20060710114545.GK77845@keybit.net>

On Mon, Jul 10, 2006 at 12:31:15PM +0200, Mateusz Loskot wrote:
> strk@refractions.net wrote:
...
> > One problem might be that libgeos_c.so *knows* which version
> > of libgeos.so to link against, while manual link could pick up
> > a wrong one (ie: manual -lgeos would link against 3.0.0 while
> > libgeos_c.so from 2.2.3 needs to use libgeos.so from 2.2.3!)
> 
> I don't suppose this is the problem.
> I have cleaned all old geos include/lib files from my system before
> I attempted to test GDAL + GEOS 2.2.3.

Did it work with *any* other 2.2.x release ? 
Does it work with head ?
What does `ldd path/to/libgeos_c.so` returns ?
What does `nm path/to/the/linked/libgeos.so | grep <your_undefined_syms>` ?

--strk;

From mateusz at loskot.net  Mon Jul 10 09:13:05 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Undefine references in libgeos_c 2.2.3
In-Reply-To: <20060710114545.GK77845@keybit.net>
References: <44B20021.2060808@loskot.net>
	<20060710102042.GH77845@keybit.net>	<44B22C73.2030908@loskot.net>
	<20060710114545.GK77845@keybit.net>
Message-ID: <44B25261.6070006@loskot.net>

strk@refractions.net wrote:
> On Mon, Jul 10, 2006 at 12:31:15PM +0200, Mateusz Loskot wrote:
>> strk@refractions.net wrote:
> ...
>>> One problem might be that libgeos_c.so *knows* which version
>>> of libgeos.so to link against, while manual link could pick up
>>> a wrong one (ie: manual -lgeos would link against 3.0.0 while
>>> libgeos_c.so from 2.2.3 needs to use libgeos.so from 2.2.3!)
>> I don't suppose this is the problem.
>> I have cleaned all old geos include/lib files from my system before
>> I attempted to test GDAL + GEOS 2.2.3.
> 
> Did it work with *any* other 2.2.x release ? 
> Does it work with head ?

Yes, but the problem is not related with GEOS version (between 2.2.0 <->
3.0.0).
I mean, I work with GDAL CVS + GEOS CVS for long time without any
problems, but... I build GDAL without libtool enabled
And THAT seems to be the problem.
I've tested it now.

I did build GEOS 2.2.3:

$ ./configure
$ make
$ sudo make install

$ geos-config --version
2.2.3

Next, I built GDAL but using --without-libtool option:

$ ./configure --without-libtool --with-geos=yes
$ make
$ sudo make install

Everything works well, no errors about undefined refereces, GDAL is
linked with GEOS 2.2.3:

mloskot:~$ ldd /home/mloskot/usr/lib/libgdal.so
        linux-gate.so.1 =>  (0xffffe000)
        libgeos.so.2 => /usr/local/lib/libgeos.so.2 (0xb79e5000)
        libgeos_c.so.1 => /usr/local/lib/libgeos_c.so.1 (0xb79d7000)
        ...

The QUESTION is where is the problem with libtool, between GDAL and
GEOS? It seems that libtool for GDAL is not able to link it with GEOS
properly.
Any ideas?

I'll write about it to gdal-dev list too.

> What does `ldd path/to/libgeos_c.so` returns ?
> What does `nm path/to/the/linked/libgeos.so | grep <your_undefined_syms>` ?

Both, GEOS 2.2.2 and 2.2.3 includes all symbols reported by GDAL as
missing. So, there is everything fine with GEOS.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From cfis at savagexi.com  Mon Jul 10 17:13:28 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api questions for SWIG
Message-ID: <44B2C2F8.8040905@savagexi.com>

While I'm working through the SWIG bindings, I've come up with a few 
questions/issues about the c api.

1.  GEOSGeomTypeId.  This is both a method name in the CAPI and the name 
of an enum.  This causes problems in the SWIG bindings because I have 
code that does this:

     GEOSGeomTypeIdgeomId = (GEOSGeomTypeId)GEOSGeomTypeId(geom);

     switch (geomId)
     {
     case GEOS_POINT:
     case GEOS_LINESTRING:
     etc.
     }

VC++ won't compile this code (haven't checked gcc).  However, it seems 
like a bad idea to have the same identifier used for two different 
things.  Can we change the name of the enum to something like GeomTypeID?

2.  Message handlers have this signature:

    typedef void (*GEOSMessageHandler)(const char *fmt, ...);

Are the ... parameters ever used (I didn't see any place where they 
were).  If they are used, what are they?  If not, should they be removed?

3.  Init/Finish.  In SWIG I can automatically call initGEOS and install 
the message handlers.  But I don't know of a way to call finishGEOS 
automatically.  What happens if the SWIG bindings don't call it?

Thanks,

Charlie






-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060710/9801572d/smime.bin
From strk at refractions.net  Mon Jul 10 17:25:52 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api questions for SWIG
In-Reply-To: <44B2C2F8.8040905@savagexi.com>
References: <44B2C2F8.8040905@savagexi.com>
Message-ID: <20060710212552.GL2789@keybit.net>

On Mon, Jul 10, 2006 at 03:13:28PM -0600, Charlie Savage wrote:
> While I'm working through the SWIG bindings, I've come up with a few 
> questions/issues about the c api.
> 
> 1.  GEOSGeomTypeId.  This is both a method name in the CAPI and the name 
> of an enum.  This causes problems in the SWIG bindings because I have 
> code that does this:
> 
>     GEOSGeomTypeIdgeomId = (GEOSGeomTypeId)GEOSGeomTypeId(geom);
> 
>     switch (geomId)
>     {
>     case GEOS_POINT:
>     case GEOS_LINESTRING:
>     etc.
>     }
> 
> VC++ won't compile this code (haven't checked gcc).  However, it seems 
> like a bad idea to have the same identifier used for two different 
> things.  Can we change the name of the enum to something like GeomTypeID?

I already renamed the enum to GEOSGeomTypes.

> 2.  Message handlers have this signature:
> 
>    typedef void (*GEOSMessageHandler)(const char *fmt, ...);
> 
> Are the ... parameters ever used (I didn't see any place where they 
> were).  If they are used, what are they?  If not, should they be removed?

'...' is for variable args.
It's the same signature of printf from stdio.h.

I would not change this as it would break existing code.

BTW, you made me notice we're not using it correctly: an unlikely
exception containing any format string might crash the app...

> 3.  Init/Finish.  In SWIG I can automatically call initGEOS and install 
> the message handlers.  But I don't know of a way to call finishGEOS 
> automatically.  What happens if the SWIG bindings don't call it?

In HEAD finishGEOS() is a no-op. In 2.2 deletes a GeometryFactory.
At worst you'll leak.

--strk;

From cfis at savagexi.com  Mon Jul 10 17:30:38 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api questions for SWIG
In-Reply-To: <20060710212552.GL2789@keybit.net>
References: <44B2C2F8.8040905@savagexi.com> <20060710212552.GL2789@keybit.net>
Message-ID: <44B2C6FE.4070207@savagexi.com>

> I already renamed the enum to GEOSGeomTypes.

Hmm, let me resync again then.

> 
>> 2.  Message handlers have this signature:
>>
>>    typedef void (*GEOSMessageHandler)(const char *fmt, ...);
>>
>> Are the ... parameters ever used (I didn't see any place where they 
>> were).  If they are used, what are they?  If not, should they be removed?
> 
> '...' is for variable args.

Yes, I know.  Is it used though, and if so, how?  I'm just trying to get 
the exception handler correct.

> It's the same signature of printf from stdio.h.
> 
> I would not change this as it would break existing code.

Ok.

>> 3.  Init/Finish.  In SWIG I can automatically call initGEOS and install 
>> the message handlers.  But I don't know of a way to call finishGEOS 
>> automatically.  What happens if the SWIG bindings don't call it?
> 
> In HEAD finishGEOS() is a no-op. In 2.2 deletes a GeometryFactory.
> At worst you'll leak.

Good, that should be ok I think since on unload the whole dll or shared 
library will be unloaded.

Thanks,

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060710/6cd3321e/smime.bin
From strk at refractions.net  Mon Jul 10 17:39:58 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api questions for SWIG
In-Reply-To: <44B2C6FE.4070207@savagexi.com>
References: <44B2C2F8.8040905@savagexi.com> <20060710212552.GL2789@keybit.net>
	<44B2C6FE.4070207@savagexi.com>
Message-ID: <20060710213958.GM2789@keybit.net>

On Mon, Jul 10, 2006 at 03:30:38PM -0600, Charlie Savage wrote:
> >I already renamed the enum to GEOSGeomTypes.
> 
> Hmm, let me resync again then.
> 
> >
> >>2.  Message handlers have this signature:
> >>
> >>   typedef void (*GEOSMessageHandler)(const char *fmt, ...);
> >>
> >>Are the ... parameters ever used (I didn't see any place where they 
> >>were).  If they are used, what are they?  If not, should they be removed?
> >
> >'...' is for variable args.
> 
> Yes, I know.  Is it used though, and if so, how?  I'm just trying to get 
> the exception handler correct.

I just went trought all calls and it's never used.
But I changed to use of it:

	FUNC("%s", const char*)

You can always bail out of you get different formats then '%s', but
I suggest you use the vsprintf set of functions from GNU lib.

--strk;


From cfis at savagexi.com  Mon Jul 10 17:45:46 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api questions for SWIG
In-Reply-To: <20060710212552.GL2789@keybit.net>
References: <44B2C2F8.8040905@savagexi.com> <20060710212552.GL2789@keybit.net>
Message-ID: <44B2CA8A.1010407@savagexi.com>

> I already renamed the enum to GEOSGeomTypes.

I see what is going on.  geos_c.h.in was changed but not geos_c.h.vc

I see there are a number of differences now between the two files. 
Should they be resynced?

Charlie


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060710/dc6f1302/smime.bin
From hobu at iastate.edu  Mon Jul 10 17:49:59 2006
From: hobu at iastate.edu (Howard Butler)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api questions for SWIG
In-Reply-To: <44B2CA8A.1010407@savagexi.com>
References: <44B2C2F8.8040905@savagexi.com> <20060710212552.GL2789@keybit.net>
	<44B2CA8A.1010407@savagexi.com>
Message-ID: <6.2.3.4.2.20060710164939.02d3e6b0@hobu.mail.iastate.edu>

yes, please resync the files

At 04:45 PM 7/10/2006, Charlie Savage wrote:
>>I already renamed the enum to GEOSGeomTypes.
>
>I see what is going on.  geos_c.h.in was changed but not geos_c.h.vc
>
>I see there are a number of differences now between the two files. 
>Should they be resynced?
>
>Charlie
>
>
>
>
>
>_______________________________________________
>geos-devel mailing list
>geos-devel@geos.refractions.net
>http://geos.refractions.net/mailman/listinfo/geos-devel


From cfis at savagexi.com  Mon Jul 10 20:06:40 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] equalsExact
Message-ID: <44B2EB90.9040008@savagexi.com>

I noticed the c api exposes the equals method on geometry but not 
equalExact.  The equals method is a topological comparison while the 
equalsExact compares geometries node by node (you can specify a 
tolerance for the comparison)..

I find equalsExact useful when writing tests cases (for example, geom1 
-> wkb -> geom2, then geom1.equalsExact(geom2)).

I was wondering if this is more generally useful and should be exposed 
as part the c api?

Thanks,

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060710/f8fe1688/smime.bin
From cfis at savagexi.com  Tue Jul 11 14:20:46 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Coordinate Sequence Dimensions?
Message-ID: <44B3EBFE.1090605@savagexi.com>

To create a coordinate sequence via the C API you use this method:

GEOSCoordSeq_create(unsigned int size, unsigned int dims)

If you trace through the code though, the dims is never used. 
Coordinate sequences always have 3 dimensions.  I guess there are plans 
to have different types of coordinate sequences in the future?

In the SWIG bindings, should I hide this parameter since its not used or 
go ahead and expose it (right now its exposed).

Thanks,

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060711/553d5bc6/smime.bin
From strk at refractions.net  Tue Jul 11 17:08:21 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Coordinate Sequence Dimensions?
In-Reply-To: <44B3EBFE.1090605@savagexi.com>
References: <44B3EBFE.1090605@savagexi.com>
Message-ID: <20060711210821.GC19240@keybit.net>

On Tue, Jul 11, 2006 at 12:20:46PM -0600, Charlie Savage wrote:
> To create a coordinate sequence via the C API you use this method:
> 
> GEOSCoordSeq_create(unsigned int size, unsigned int dims)
> 
> If you trace through the code though, the dims is never used. 
> Coordinate sequences always have 3 dimensions.  I guess there are plans 
> to have different types of coordinate sequences in the future?

Maybe :)

> In the SWIG bindings, should I hide this parameter since its not used or 
> go ahead and expose it (right now its exposed).

That's depend on how bindings would handled a future addition of it.
We wouldn't be able to add a parameter to a C api, thus the dimension
arg is there now.

--strk;

From cfis at savagexi.com  Wed Jul 12 14:36:39 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Union problem
Message-ID: <44B54137.4030508@savagexi.com>

To test the SWIG bindings, I've ported the example.cpp program to Ruby 
and am checking that the output from both programs matches.

The relations (intersects, disjoint, etc.) all work.

I'm having issues with union though.

When I run the code via SWIG (ie, the c api), I get a lot of unhappy 
messages from geos which I've attached below.  When I run the code from 
example.cpp it works.  I think I've got all the geometries correct (all 
the relation operations work).  I've also changed example.cpp to use the 
default precision model like the c api does.

Is there something else I'm missing?

Thanks,

Charlie

----------
The code take 11 geometries and unions them together.  See 
doc/example.cpp:858.


-------- UNION COMBINATION  ------
Original exception: TopologyException: side location conflict 0 250 1.7e-308
Trying with Common bits remover.
CBR: TopologyException: side location conflict 0 250 1.7e-308
Trying with precision 25
Reduced with precision (25): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 24
Reduced with precision (24): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 23
Reduced with precision (23): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 22
Reduced with precision (22): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 21
Reduced with precision (21): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 20
Reduced with precision (20): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 19
Reduced with precision (19): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 18
Reduced with precision (18): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 17
Reduced with precision (17): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 16
Reduced with precision (16): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 15
Reduced with precision (15): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 14
Reduced with precision (14): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 13
Reduced with precision (13): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 12
Reduced with precision (12): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 11
Reduced with precision (11): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 10
Reduced with precision (10): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 9
Reduced with precision (9): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 8
Reduced with precision (8): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 7
Reduced with precision (7): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 6
Reduced with precision (6): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 5
Reduced with precision (5): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 4
Reduced with precision (4): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 3
Reduced with precision (3): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 2
Reduced with precision (2): TopologyException: side location conflict 0 
250 1.7e-308
Trying with precision 1
Reduced: TopologyException: side location conflict 0 250 1.7e-308
Trying simplifying with tolerance 0.01
Simplified with tolerance (0.01): TopologyException: side location 
conflict 0 250 1.7e-308
Trying simplifying with tolerance 0.02
Simplified with tolerance (0.02): TopologyException: side location 
conflict 0 250 1.7e-308
Trying simplifying with tolerance 0.03
Simplified with tolerance (0.03): TopologyException: side location 
conflict 0 250 1.7e-308
Trying simplifying with tolerance 0.04
Simplified: TopologyException: side location conflict 0 250 1.7e-308
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060712/f30cff44/smime.bin
From cfis at savagexi.com  Wed Jul 12 14:59:59 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api feedback
Message-ID: <44B546AF.8000303@savagexi.com>

For what its worth, now that I've gone through the c api for the SWIG 
bindings, here is some feedback:

1.  The methods GEOSCoordSeq_getSize and GEOSCoordSeq_getDimensions 
return their results by updating a pointer to a size_t parameter.  Thus 
like this:

GEOSCoordSeq_getSize(const GEOSCoordSeq s, size_t *size);

In contrast, these methods just return the result:

GEOSGeom_getDimensions returns value, not as a parameter
GEOSGeom_getNumcoordinates
GEOSGeom_getNumInteriorRings
GEOSGeom_getNumGeometries

Seems like an unneeded inconsistency.

2.  The coordinate sequence api is extremely awkward to use.  Its 
verbose and results in fairly unreadable code.  Like this:

     cs = Geos::CoordinateSequence.new(4,3)
     cs.set_x(0, 7)
     cs.set_y(0, 8)
     cs.set_z(0, 9)
     cs.set_x(1, 3)
     cs.set_y(1, 3)
     cs.set_z(1, 3)
     cs.set_x(2, 11)
     cs.set_y(2, 15.2)
     cs.set_z(2, 2)
     cs.set_x(3, 7)
     cs.set_y(3, 8)
     cs.set_z(3, 9)

This all seems fairly unecessary since coordinate sequences only support 
x/y/z.  Would be a lot nicer to do this:

     cs.add(7,8,9)
     cs.add(3,3,3)
     cs.add(11,15.2,2)
     cs.add(7,8,9)

Isn't that much clearer?  I believe the api is setup the way it is to 
allow more dimensions in the future.  Is this a case of YAGNI 
(http://en.wikipedia.org/wiki/YAGNI)?

Could we please expose a simplified for coordinate sequences in the c 
api?  Such as an "add" method, and while we are at it, shouldn't there 
also be a remove method?


3.  A lot of methods, like GEOSDisjoint, return a char.  The char is 0 
for false, 1 for true and 2 for an exception.  I took that to mean '0', 
'1', '2'.  In fact its not, its like this:

(char)1

Thus if you look at the char is actually '%' (or some such thing).  You 
of course need to get the int result back by a typecast

result = (int)GEOSDisjoint

Maybe this could be better documented?


4.  Buffer operation now takes quadrant segments.  I had no idea what 
that should be...hunting through the code it turns out to default to 8. 
  Do people use the quadrant parameter much?  Seems like an unneeded bit 
of complexity.  At a minimum, can the default value be exposed as a 
constant?  That way the SWIG bindings can set a default value for the 
buffer operation so users can just do geom.buffer(10) and can specify 
the second parameter only if needed.


5.  Two operations that used to be exposed via SWIG are no longer:

within_distance
equal_exact


6.  Not very important, but the shape factory is not exposed via the c 
api.  Not sure if anyone uses it - its used in example.cpp.

7. The envelopes is not exposed.  I find that one quite useful when 
dealing with bounding boxes - easier than having to work with a polygon 
that represents a bounding box.

Anyway, hope these comments are helpful.


Thanks,

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060712/e4baa432/smime.bin
From cfis at savagexi.com  Wed Jul 12 17:36:42 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api feedback
In-Reply-To: <44B546AF.8000303@savagexi.com>
References: <44B546AF.8000303@savagexi.com>
Message-ID: <44B56B6A.7030606@savagexi.com>

> 1.  The methods GEOSCoordSeq_getSize and GEOSCoordSeq_getDimensions 
> return their results by updating a pointer to a size_t parameter.  Thus 
> like this:
> 
> GEOSCoordSeq_getSize(const GEOSCoordSeq s, size_t *size);
> 
> In contrast, these methods just return the result:
> 
> GEOSGeom_getDimensions returns value, not as a parameter
> GEOSGeom_getNumcoordinates
> GEOSGeom_getNumInteriorRings
> GEOSGeom_getNumGeometries
> 
> Seems like an unneeded inconsistency.

A follow up to this.  The methods like GEOSGeom_genNumcoordinates are 
defined like this:

/* Return -1 on exception */
extern size_t GEOS_DLL GEOSGetNumCoordinates(const GEOSGeom g1);

However, size_t is defined as:

typedef unsigned int size_t

So returning -1 isn't such a good idea is it?  You'd have to type cast 
to an int first to check the result.

Charlie





-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060712/8480af2e/smime.bin
From strk at refractions.net  Wed Jul 12 19:05:07 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Union problem
In-Reply-To: <44B54137.4030508@savagexi.com>
References: <44B54137.4030508@savagexi.com>
Message-ID: <20060712230507.GA42249@keybit.net>

Charlie, example.cpp, *and* unit tests, all keep using the C++ API.
SWIG is using the C API instead, so you shouldn't expect things
to work in the exactly same way.
I would indeed discourage you from porting unit testing and example.cpp
but rather find new tests which might be useful for CAPI in general.

The unhappy messages you're seing are in fact very happy ones :)
It's the new code handling robustness problems by trying different
reduction or simplification. Your logs seems to reveal that a topology
preserving simplification with a tolerance of 0.04 did it.
Seems nice (you should look at results to actually tell if we like it)...

--strk;

On Wed, Jul 12, 2006 at 12:36:39PM -0600, Charlie Savage wrote:
> To test the SWIG bindings, I've ported the example.cpp program to Ruby 
> and am checking that the output from both programs matches.
> 
> The relations (intersects, disjoint, etc.) all work.
> 
> I'm having issues with union though.
> 
> When I run the code via SWIG (ie, the c api), I get a lot of unhappy 
> messages from geos which I've attached below.  When I run the code from 
> example.cpp it works.  I think I've got all the geometries correct (all 
> the relation operations work).  I've also changed example.cpp to use the 
> default precision model like the c api does.
> 
> Is there something else I'm missing?
> 
> Thanks,
> 
> Charlie
> 
> ----------
> The code take 11 geometries and unions them together.  See 
> doc/example.cpp:858.
> 
> 
> -------- UNION COMBINATION  ------
> Original exception: TopologyException: side location conflict 0 250 1.7e-308
> Trying with Common bits remover.
> CBR: TopologyException: side location conflict 0 250 1.7e-308
> Trying with precision 25
> Reduced with precision (25): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 24
> Reduced with precision (24): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 23
> Reduced with precision (23): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 22
> Reduced with precision (22): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 21
> Reduced with precision (21): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 20
> Reduced with precision (20): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 19
> Reduced with precision (19): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 18
> Reduced with precision (18): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 17
> Reduced with precision (17): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 16
> Reduced with precision (16): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 15
> Reduced with precision (15): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 14
> Reduced with precision (14): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 13
> Reduced with precision (13): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 12
> Reduced with precision (12): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 11
> Reduced with precision (11): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 10
> Reduced with precision (10): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 9
> Reduced with precision (9): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 8
> Reduced with precision (8): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 7
> Reduced with precision (7): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 6
> Reduced with precision (6): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 5
> Reduced with precision (5): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 4
> Reduced with precision (4): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 3
> Reduced with precision (3): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 2
> Reduced with precision (2): TopologyException: side location conflict 0 
> 250 1.7e-308
> Trying with precision 1
> Reduced: TopologyException: side location conflict 0 250 1.7e-308
> Trying simplifying with tolerance 0.01
> Simplified with tolerance (0.01): TopologyException: side location 
> conflict 0 250 1.7e-308
> Trying simplifying with tolerance 0.02
> Simplified with tolerance (0.02): TopologyException: side location 
> conflict 0 250 1.7e-308
> Trying simplifying with tolerance 0.03
> Simplified with tolerance (0.03): TopologyException: side location 
> conflict 0 250 1.7e-308
> Trying simplifying with tolerance 0.04
> Simplified: TopologyException: side location conflict 0 250 1.7e-308



> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


-- 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From cfis at savagexi.com  Wed Jul 12 19:23:52 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] Union problem
In-Reply-To: <20060712230507.GA42249@keybit.net>
References: <44B54137.4030508@savagexi.com> <20060712230507.GA42249@keybit.net>
Message-ID: <44B58488.8020401@savagexi.com>

Hi Strk,

Comments below.

> Charlie, example.cpp, *and* unit tests, all keep using the C++ API.
> SWIG is using the C API instead, so you shouldn't expect things
> to work in the exactly same way.
> I would indeed discourage you from porting unit testing and example.cpp
> but rather find new tests which might be useful for CAPI in general.

Well, maybe you can help then.  What I would like is an example of two 
geometries and what the expected results would be for various operations 
like union, intersection, etc.  That way I can verify that the results 
returned through the C API are correct.

I guess I don't understand why you think example.cpp is a bad thing to 
look at.  I can see the geometries in their WKT format, and then I can 
see what the results are when different operations happen like union, etc.

Why would the union of the same two geometries be different depending on 
  whether you use the C API versus the C++ API?

Anyway, I'm happy to use any examples people have.  I don't think its 
viable for me to make up my own examples - I don't know what the results 
are supposed to look like.  Thus the tests would be useless.

> The unhappy messages you're seing are in fact very happy ones :)
> It's the new code handling robustness problems by trying different
> reduction or simplification. Your logs seems to reveal that a topology
> preserving simplification with a tolerance of 0.04 did it.
> Seems nice (you should look at results to actually tell if we like it)...

Sorry, don't understand.  Where is this tolerance set in doing a Union? 
     How do I control it through the C API?

And it then end its not happy - the results is a segmentation fault. 
That of course might be a bug in the SWIG bindings.

Charlie


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060712/21a9f429/smime.bin
From woodbri at swoodbridge.com  Wed Jul 12 19:29:18 2006
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] c api feedback
In-Reply-To: <44B56B6A.7030606@savagexi.com>
References: <44B546AF.8000303@savagexi.com> <44B56B6A.7030606@savagexi.com>
Message-ID: <44B585CE.5030302@swoodbridge.com>

Charlie,

Thanks for all your work and analysis. I am a user of C-API and I would 
vote for consistency. I think the whole idea of a published and 
supported API among or things is to provide a consistent view of the 
underlying code and to hide some of the oddities that might exist in 
that code. I would rather the API take care of things like consistent 
return values rather then have to have that spread all over in my code. 
Great if it needs a type cast then do it in the wrapper so it is easy to 
work with return values.

My 2 cents, which isn't worth that much since I'm doing the coding. And 
thanks to all those that are working so hard on this.

Best regards,
   -Steve

Charlie Savage wrote:
>> 1.  The methods GEOSCoordSeq_getSize and GEOSCoordSeq_getDimensions 
>> return their results by updating a pointer to a size_t parameter.  
>> Thus like this:
>>
>> GEOSCoordSeq_getSize(const GEOSCoordSeq s, size_t *size);
>>
>> In contrast, these methods just return the result:
>>
>> GEOSGeom_getDimensions returns value, not as a parameter
>> GEOSGeom_getNumcoordinates
>> GEOSGeom_getNumInteriorRings
>> GEOSGeom_getNumGeometries
>>
>> Seems like an unneeded inconsistency.
> 
> A follow up to this.  The methods like GEOSGeom_genNumcoordinates are 
> defined like this:
> 
> /* Return -1 on exception */
> extern size_t GEOS_DLL GEOSGetNumCoordinates(const GEOSGeom g1);
> 
> However, size_t is defined as:
> 
> typedef unsigned int size_t
> 
> So returning -1 isn't such a good idea is it?  You'd have to type cast 
> to an int first to check the result.
> 
> Charlie
> 
> 
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From cfis at savagexi.com  Thu Jul 13 00:07:23 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:24 2007
Subject: [geos-devel] 2 proposed c-api additions
Message-ID: <44B5C6FB.9060407@savagexi.com>

Hi everyone,

Strk pointed me at the XML test suite as a good source of test data.  So 
  using Ruby, I now load the xml test cases and can run them through the 
SWIG bindings which use the c api.

To do this, however, requires adding 2 methods to the C API.

The first method is Geometry::normalize which converts a geometry to its 
cannonincal form.  Without this method, the results from performing 
operations (like buffer) will be in some undetermined order and thus the 
test fails since the actual result does not match the expected result. 
Since this seems to be a generally useful method I'd like to add in to 
the C API.

The second method is one I mentioned the other day, equalsExact.  The 
XMLTestRunner uses this method to verify that the expected and actual 
results match.  Unfortunately, using equals does not work since it 
returns false in some cases where equalsExact returns true (you can set 
a tolerance with equalsExact).  Once again, this seems like a generally 
useful method so I'd also like to add in to the C API.

On my local box I have added both of these methods to the C API, and the 
  SWIG bindings now generate the same results as the C++ API (i've only 
done some of the tests so far).

Note that a number of the XML test cases fail using either API.  For 
example, in buffer.xml roughly half the tests fail.  Is this a problem?

Charlie





-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060712/3d60cbc0/smime.bin
From cfis at savagexi.com  Thu Jul 13 04:16:54 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] New python/ruby SWIG bindings checked in
Message-ID: <44B60176.8070007@savagexi.com>

A quick update on the SWIG bindings.  I've checked in the following changes:

* Complete SWIG bindings for Ruby and Python that use the C API

* Almost 100% test coverage of the Ruby bindings (and thus C API).

* A quick sanity test for the Python bindings (since both bindings share 
99% of the same code I feel pretty good about the Python bindings - but 
always good to check).

* Integration of the SWIG bindings into the GEOS build system.  To build 
the bindings:

./configure --enable-python --enable-ruby

* Right now you need SWIG 1.3.29 installed, but I think the plan is to 
include the SWIG generated wrappers in the distribution so you won't 
need SWIG at all.

* The bindings compile and work on Linux with g++ and on Windows with 
VC++ 2005.


What needs to be done:

* Check the build using MingW on Windows
* A bit more testing (test gladly accepted)
* Add some helper methods to smooth the rough edges of the c-api, 
particularly working with coordinate sequences which is painful.

So if you have some time, grab the latest from CVS and see if the 
bindings compile and work on your platform!

I'd love to hear from Python users (Sean and Howard!). Since I'm 
familiar with Ruby, I know the Rubyisms to put into the bindings.
But I don't know Python well enough to get the Pythonisms right.  So let 
me know if there are things missing like special methods or iterators, 
and I'll add them in.

Thanks,

Charlie





















-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060713/189a144d/smime.bin
From ferdinando.villa at uvm.edu  Thu Jul 13 12:11:17 2006
From: ferdinando.villa at uvm.edu (Ferdinando Villa)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Polygon multiple intersection algorithm?
Message-ID: <008a01c6a696$f8ab02e0$2aa6c684@ECOINFORMATICS>

Good folks,

apologies for tapping into your knowledge without a real GEOS question, but
I can't even seem to express this with enough brevity for a Google search.
There must be a name for an algorithm that creates the maximum set of
non-overlapping shapes based on the intersection of a source shape set. For
example, the intersection of squares A and B is a smaller square C. The
intersection set is A-C, C, and B-C. I need to do the same as efficiently as
possible with an arbitrary number of shapes.

Does this process have a name, and/or a smarter algorithm than the
exponential ones I can think of? It sounds so generally useful that I can't
think it doesn't, but I found no clue. Pardon my ignorance....

Cheers,
ferdinando 

--
Ferdinando Villa, Associate Research Professor, Ecoinformatics
Ecoinformatics Collaboratory, Gund Inst. for Ecol. Economics and Dept. of
Botany
University of Vermont           http://ecoinformatics.uvm.edu


From mbdavis at VividSolutions.com  Thu Jul 13 12:44:18 2006
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Polygon multiple intersection algorithm?
Message-ID: <5A94289A9268514C8D6C0F1FF44BA027EBABE8@venus.VividSolutions.com>

Fernando,

The name of the algorithm you are looking for is polygon overlay.   This
is a standard GIS algorithm.  Unfortunately it's not in JTS/GEOS right
now - but soon hopefully....

This is also sometimes referred to as (polygonal) coverage overlay.  You
should find quite a few references to these on Google - but I haven't
had any luck in finding code.  Let me know if you do!

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046


> -----Original Message-----
> From: geos-devel-bounces@geos.refractions.net 
> [mailto:geos-devel-bounces@geos.refractions.net] On Behalf Of 
> Ferdinando Villa
> Sent: July 13, 2006 9:11 AM
> To: geos-devel@geos.refractions.net
> Subject: [geos-devel] Polygon multiple intersection algorithm?
> 
> 
> Good folks,
> 
> apologies for tapping into your knowledge without a real GEOS 
> question, but I can't even seem to express this with enough 
> brevity for a Google search. There must be a name for an 
> algorithm that creates the maximum set of non-overlapping 
> shapes based on the intersection of a source shape set. For 
> example, the intersection of squares A and B is a smaller 
> square C. The intersection set is A-C, C, and B-C. I need to 
> do the same as efficiently as possible with an arbitrary 
> number of shapes.
> 
> Does this process have a name, and/or a smarter algorithm 
> than the exponential ones I can think of? It sounds so 
> generally useful that I can't think it doesn't, but I found 
> no clue. Pardon my ignorance....
> 
> Cheers,
> ferdinando 
> 
> --
> Ferdinando Villa, Associate Research Professor, 
> Ecoinformatics Ecoinformatics Collaboratory, Gund Inst. for 
> Ecol. Economics and Dept. of Botany
> University of Vermont           http://ecoinformatics.uvm.edu
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net 
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 

From jingzhang at cbigroup.com  Fri Jul 14 05:33:21 2006
From: jingzhang at cbigroup.com (zhangjing)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] geometry validation and simplfiy problem
Message-ID: <20060714093308.485DA2C1842@netnation.refractions.net>

hi, all

im developing a vector map editor using geos library as spatial engine, and the user's input may not comform to normalized geometry, ie the shell may cross holes. The input are always multiple LineRing. and i wonder if there is any method in geos to make these multiple LineRing a normalized geometry (Multipolygon, or Polygon with correct shell/hole relations). 

In ArcObjects, ITopologicalOperator->Simplify can do the job, here is a description of the function.

Simplify permanently alters the input geometry so that the geometry becomes topologically consistent.  For Point Collections, this means that all duplicate Points (Points with the same X and Y coordinates) are removed (unless they are attribute aware and have different attributes).  For Segment Collections, this means that all duplicate Segments are removed, all Crossing Segments are split into non-crossing segments (The crossing point becomes a vertex for all of the connected segments), all overlapping segments are broken into non-overlapping segments (the overlap becomes a new Segment), and all non-connected Paths are connected.  For Polygons, this means that all overlapping Rings are split into non-overlapping Rings, all Exterior and Interior Rings have the proper orientation, and all non-closed Rings are closed. 

so, is there any way to do this in geos?

TIA
Jing Zhang.




From mbdavis at VividSolutions.com  Fri Jul 14 12:32:42 2006
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] geometry validation and simplfiy problem
Message-ID: <5A94289A9268514C8D6C0F1FF44BA027EBABF4@venus.VividSolutions.com>

Not currently, but it would be nice to have.  I have done some work in
this direction, but it's not really in a releasable state.

When you "simplify" a polygon with a hole which crosses outside the
outer shell, what happens to the part that is outside?  Does it
disappear, or become another polygon?

One thing you can do which should work almost all the time is to run
buffer(0) on the invalid polygon.  Buffer is very tolerant of bad
topology, and will generally fix the polygon in the way I suspect you
are looking for.

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046


> -----Original Message-----
> From: geos-devel-bounces@geos.refractions.net 
> [mailto:geos-devel-bounces@geos.refractions.net] On Behalf Of 
> zhangjing
> Sent: July 14, 2006 2:33 AM
> To: GEOS Development List
> Subject: [geos-devel] geometry validation and simplfiy problem
> 
> 
> hi, all
> 
> im developing a vector map editor using geos library as 
> spatial engine, and the user's input may not comform to 
> normalized geometry, ie the shell may cross holes. The input 
> are always multiple LineRing. and i wonder if there is any 
> method in geos to make these multiple LineRing a normalized 
> geometry (Multipolygon, or Polygon with correct shell/hole 
> relations). 
> 
> In ArcObjects, ITopologicalOperator->Simplify can do the job, 
> here is a description of the function.
> 
> Simplify permanently alters the input geometry so that the 
> geometry becomes topologically consistent.  For Point 
> Collections, this means that all duplicate Points (Points 
> with the same X and Y coordinates) are removed (unless they 
> are attribute aware and have different attributes).  For 
> Segment Collections, this means that all duplicate Segments 
> are removed, all Crossing Segments are split into 
> non-crossing segments (The crossing point becomes a vertex 
> for all of the connected segments), all overlapping segments 
> are broken into non-overlapping segments (the overlap becomes 
> a new Segment), and all non-connected Paths are connected.  
> For Polygons, this means that all overlapping Rings are split 
> into non-overlapping Rings, all Exterior and Interior Rings 
> have the proper orientation, and all non-closed Rings are closed. 
> 
> so, is there any way to do this in geos?
> 
> TIA
> Jing Zhang.
> 
> 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net 
> http://geos.refractions.net/mailman/listinfo/g> eos-devel
> 

From jingzhang at cbigroup.com  Fri Jul 14 22:43:10 2006
From: jingzhang at cbigroup.com (zhangjing)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] geometry validation and simplfiy problem
Message-ID: <20060715024254.4D65C2C1900@netnation.refractions.net>

thanks Martin,

>Not currently, but it would be nice to have.  I have done some work in
>this direction, but it's not really in a releasable state.

yes, really looking forward. 


>When you "simplify" a polygon with a hole which crosses outside the
>outer shell, what happens to the part that is outside?  Does it
>disappear, or become another polygon?

i believe it will become another polygon. i think all i want is to make the 
LineRings into topology correct polygon(multipolygon). 

>One thing you can do which should work almost all the time is to run
>buffer(0) on the invalid polygon.  Buffer is very tolerant of bad
>topology, and will generally fix the polygon in the way I suspect you
>are looking for.
>

i will try buffer(0). will buffer(0) simplify a self-intersected polygon?

thanks.




From mbdavis at VividSolutions.com  Mon Jul 17 11:39:32 2006
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] geometry validation and simplfiy problem
Message-ID: <5A94289A9268514C8D6C0F1FF44BA027EBAC01@venus.VividSolutions.com>

> i will try buffer(0). will buffer(0) simplify a 
> self-intersected polygon?

Yes, it should do.  Post back once you've tried it and let us know if it
works in your situation.

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.      www.vividsolutions.com
Suite #1A-2328 Government Street Victoria, B.C. V8T 5G5
Phone: (250) 385 6040 - Local 308 Fax: (250) 385 6046


> -----Original Message-----
> From: geos-devel-bounces@geos.refractions.net 
> [mailto:geos-devel-bounces@geos.refractions.net] On Behalf Of 
> zhangjing
> Sent: July 14, 2006 7:43 PM
> To: GEOS Development List
> Subject: Re: RE: [geos-devel] geometry validation and simplfiy problem
> 
> 
> thanks Martin,
> 
> >Not currently, but it would be nice to have.  I have done 
> some work in 
> >this direction, but it's not really in a releasable state.
> 
> yes, really looking forward. 
> 
> 
> >When you "simplify" a polygon with a hole which crosses outside the 
> >outer shell, what happens to the part that is outside?  Does it 
> >disappear, or become another polygon?
> 
> i believe it will become another polygon. i think all i want 
> is to make the 
> LineRings into topology correct polygon(multipolygon). 
> 
> >One thing you can do which should work almost all the time is to run
> >buffer(0) on the invalid polygon.  Buffer is very tolerant of bad 
> >topology, and will generally fix the polygon in the way I 
> suspect you 
> >are looking for.
> >
> 

> 
> thanks.
> 
> 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net 
> http://geos.refractions.net/mailman/listinfo/g> eos-devel
> 

From jmckenna at dmsolutions.ca  Tue Jul 18 21:33:49 2006
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Newbie 2.2.3 win32 build question
Message-ID: <44BD8BFD.10504@dmsolutions.ca>

I'm trying to build geos-2.2.3 on win32 with msvc, and I get this 
compile error:

         copy headers\geos\platform.h.vc headers\geos\platform.h
         1 file(s) copied.
NMAKE : fatal error U1073: don't know how to make 
'headers/geos/version.h.vc'
Stop.

The headers/geos/version.h.vc and capi/geos_c.h.vc files do not exist. 
How do I generate those files?  (blush)

thanks, and sorry for the dumb question.

jeff



-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From cfis at savagexi.com  Tue Jul 18 21:39:19 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Newbie 2.2.3 win32 build question
In-Reply-To: <44BD8BFD.10504@dmsolutions.ca>
References: <44BD8BFD.10504@dmsolutions.ca>
Message-ID: <44BD8D47.2000408@savagexi.com>

Hmm...those files are in CVS head.  Maybe the got left out of 2.2.3 by 
mistake?  Not sure how they would be auto-generated, you'd have strip 
out the autoconf info.

Mateusz has some files you could probably use on his website:

http://mateusz.loskot.net/projects/geos/

Thanks,

Charlie

Jeff McKenna wrote:
> I'm trying to build geos-2.2.3 on win32 with msvc, and I get this 
> compile error:
> 
>         copy headers\geos\platform.h.vc headers\geos\platform.h
>         1 file(s) copied.
> NMAKE : fatal error U1073: don't know how to make 
> 'headers/geos/version.h.vc'
> Stop.
> 
> The headers/geos/version.h.vc and capi/geos_c.h.vc files do not exist. 
> How do I generate those files?  (blush)
> 
> thanks, and sorry for the dumb question.
> 
> jeff
> 
> 
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060718/17970ba2/smime.bin
From jmckenna at dmsolutions.ca  Tue Jul 18 21:56:34 2006
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Newbie 2.2.3 win32 build question
In-Reply-To: <44BD8D47.2000408@savagexi.com>
References: <44BD8BFD.10504@dmsolutions.ca> <44BD8D47.2000408@savagexi.com>
Message-ID: <44BD9152.3070406@dmsolutions.ca>

thanks so much Charlie.  I guess it wasn't a dumb question: I just 
checked out the cvs rel-2.2.3 version and those files are there, yet all 
of the release downloads on geos.refractions.net including the cvs 
nightly snapshot don't have the files.

hopefully this can be fixed so no one else goes through what i just went 
through.

thanks.

jeff



Charlie Savage wrote:
> Hmm...those files are in CVS head.  Maybe the got left out of 2.2.3 by 
> mistake?  Not sure how they would be auto-generated, you'd have strip 
> out the autoconf info.
> 
> Mateusz has some files you could probably use on his website:
> 
> http://mateusz.loskot.net/projects/geos/
> 
> Thanks,
> 
> Charlie
> 
> Jeff McKenna wrote:
>> I'm trying to build geos-2.2.3 on win32 with msvc, and I get this 
>> compile error:
>>
>>         copy headers\geos\platform.h.vc headers\geos\platform.h
>>         1 file(s) copied.
>> NMAKE : fatal error U1073: don't know how to make 
>> 'headers/geos/version.h.vc'
>> Stop.
>>
>> The headers/geos/version.h.vc and capi/geos_c.h.vc files do not exist. 
>> How do I generate those files?  (blush)
>>
>> thanks, and sorry for the dumb question.
>>
>> jeff
>>
>>

From cfis at savagexi.com  Tue Jul 18 22:42:05 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Newbie 2.2.3 win32 build question
In-Reply-To: <44BD9152.3070406@dmsolutions.ca>
References: <44BD8BFD.10504@dmsolutions.ca> <44BD8D47.2000408@savagexi.com>
	<44BD9152.3070406@dmsolutions.ca>
Message-ID: <44BD9BFD.1010900@savagexi.com>

Jeff,

Just checked the build scripts.

platform.in.vc is correctly included in source tarballs for geos 3.0. 
But version.in.vc is not, so I've fixed that.

So this should be fixed now.  Thanks for the headsup.

Charlie

Jeff McKenna wrote:
> thanks so much Charlie.  I guess it wasn't a dumb question: I just 
> checked out the cvs rel-2.2.3 version and those files are there, yet all 
> of the release downloads on geos.refractions.net including the cvs 
> nightly snapshot don't have the files.
> 
> hopefully this can be fixed so no one else goes through what i just went 
> through.
> 
> thanks.
> 
> jeff
> 
> 
> 
> Charlie Savage wrote:
>> Hmm...those files are in CVS head.  Maybe the got left out of 2.2.3 by 
>> mistake?  Not sure how they would be auto-generated, you'd have strip 
>> out the autoconf info.
>>
>> Mateusz has some files you could probably use on his website:
>>
>> http://mateusz.loskot.net/projects/geos/
>>
>> Thanks,
>>
>> Charlie
>>
>> Jeff McKenna wrote:
>>> I'm trying to build geos-2.2.3 on win32 with msvc, and I get this 
>>> compile error:
>>>
>>>         copy headers\geos\platform.h.vc headers\geos\platform.h
>>>         1 file(s) copied.
>>> NMAKE : fatal error U1073: don't know how to make 
>>> 'headers/geos/version.h.vc'
>>> Stop.
>>>
>>> The headers/geos/version.h.vc and capi/geos_c.h.vc files do not 
>>> exist. How do I generate those files?  (blush)
>>>
>>> thanks, and sorry for the dumb question.
>>>
>>> jeff
>>>
>>>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060718/1fd33018/smime.bin
From maik.troemel at maitro.net  Wed Jul 19 03:22:14 2006
From: maik.troemel at maitro.net (=?ISO-8859-1?Q?Maik_Tr=F6mel?=)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] GEOS for Python
Message-ID: <44BDDDA6.8020102@maitro.net>

Hello List,

im searching for a docu how to install GEOS for Python, but i didn't 
find anything yet.
Probably someone knows a link or can help me.

Thanks for help.

Greetings Maik

From cfis at savagexi.com  Wed Jul 19 03:26:09 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] GEOS for Python
In-Reply-To: <44BDDDA6.8020102@maitro.net>
References: <44BDDDA6.8020102@maitro.net>
Message-ID: <44BDDE91.4060800@savagexi.com>

There is a SWIG extension for Pyhton.

If using head, building the extension is part of the build process on 
*nix machines.

If using 2.2 or 2.3 or windows you'll have to build it yourself.  Some 
instructions for building a Ruby extension are here:

http://cfis.savagexi.com/articles/2006/04/12/ruby-bindings-for-geos

Building the python extension works the same way, just substitute the 
right header files/libraries.

Charlie



Maik Tr?mel wrote:
> Hello List,
> 
> im searching for a docu how to install GEOS for Python, but i didn't 
> find anything yet.
> Probably someone knows a link or can help me.
> 
> Thanks for help.
> 
> Greetings Maik
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060719/cbc0b487/smime.bin
From rberger at ibd.com  Tue Jul 25 02:43:50 2006
From: rberger at ibd.com (Robert J. Berger)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: New python/ruby SWIG bindings checked in / Can't
	build on Mac OSX
Message-ID: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>

I just tried to build the latest CVS on a Macintosh OS X Macbook Pro.  
I did install swig 1.3.29 and had to run autogen.sh to get the  
configure files then did the configure line as recommended, configure  
ran without complaints, then when I tried to build Geos I get:

% make
Making all in source
Making all in algorithm
source='CGAlgorithms.cpp' object='CGAlgorithms.lo' libtool=yes \
depfile='.deps/CGAlgorithms.Plo' tmpdepfile='.deps/CGAlgorithms.TPlo' \
depmode=gcc3 /bin/sh ../../depcomp \
/bin/sh ../../libtool --mode=compile g++ -DHAVE_CONFIG_H -I. -I. - 
I../../source/headers -I../../source/headers/geos -I../../source/ 
headers     -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long  
-c -o CGAlgorithms.lo `test -f 'CGAlgorithms.cpp' || echo  
'./'`CGAlgorithms.cpp
../../libtool: ../../libtool: No such file or directory

I do have libtool, but its in /usr/bin/libtool Not sure why the  
makefile thinks its in the top_buildir.
??????????????????????????????
Robert J. Berger - Internet Bandwidth Development, LLC.
Voice: 408-882-4755 eFax: +1-408-490-2868
http://www.ibd.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060724/725c82e3/attachment.html
From cfis at savagexi.com  Tue Jul 25 02:53:29 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: New python/ruby SWIG bindings checked in / Can't
	build on Mac OSX
In-Reply-To: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>
References: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>
Message-ID: <44C5BFE9.8060709@savagexi.com>

Hi Robert,

On both Linux and Windows with msys, all the generated make files have 
this line:

LIBTOOL = $(SHELL) $(top_builddir)/libtool

This refers to the libtool file that should be in the top level GEOS 
directory.  Is that file missing for you?

Either way, I'm guessing this isn't a SWIG binding issue.  If you're 
missing the libtool file, does that mean you can't compile GEOS either?

I can't help much more on libtool/autoconf/automake etc., but would be 
interested in hearing about your progress with the SWIG bindings on the 
Mac since I don't have one I can test on.

Thanks,

Charlie



Robert J. Berger wrote:
> I just tried to build the latest CVS on a Macintosh OS X Macbook Pro. I 
> did install swig 1.3.29 and had to run autogen.sh to get the configure 
> files then did the configure line as recommended, configure ran without 
> complaints, then when I tried to build Geos I get:
> 
> % make
> Making all in source
> Making all in algorithm
> source='CGAlgorithms.cpp' object='CGAlgorithms.lo' libtool=yes \
> depfile='.deps/CGAlgorithms.Plo' tmpdepfile='.deps/CGAlgorithms.TPlo' \
> depmode=gcc3 /bin/sh ../../depcomp \
> /bin/sh ../../libtool --mode=compile g++ -DHAVE_CONFIG_H -I. -I. 
> -I../../source/headers -I../../source/headers/geos 
> -I../../source/headers     -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic 
> -Wno-long-long -c -o CGAlgorithms.lo `test -f 'CGAlgorithms.cpp' || echo 
> './'`CGAlgorithms.cpp
> ../../libtool: ../../libtool: No such file or directory
> 
> I do have libtool, but its in /usr/bin/libtool Not sure why the makefile 
> thinks its in the top_buildir.
> ??????????????????????????????
> Robert J. Berger - Internet Bandwidth Development, LLC.
> Voice: 408-882-4755 eFax: +1-408-490-2868 
> http://www.ibd.com
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060725/d9d39c4c/smime.bin
From rberger at ibd.com  Tue Jul 25 03:22:51 2006
From: rberger at ibd.com (Robert J. Berger)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: New python/ruby SWIG bindings checked in / Can't
	build on Mac OSX
In-Reply-To: <44C5BFE9.8060709@savagexi.com>
References: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>
	<44C5BFE9.8060709@savagexi.com>
Message-ID: <D6162580-B106-4760-9B64-999341DAF95A@ibd.com>

Yes, there is no libtool in the topdir from when I checked out from  
CVS, but then I downloaded the last tar file geos-2-1.2.3.tar.bz2 and  
ran configure (the configure files were all there already, which was  
not true when I got the CVS files) it built libtool and the compile  
went fine.

So using the geos-2-1.2.3.tar.bz2 distribution, everything built and  
installed fine, but the CVS build did not work.

The later is probably because I did something stupid.....

Like should I be able to just run autgen.sh to build the proper  
configure files?
Or did I not get all the CVS files? (I thought I followed the  
directions on the web page to get the CVS files.)

Thanks in any case!

Now I have to just learn how to use GEOS, POSTGIS, Ruby and Google  
Earth KML without any background in GIS :-)


On Jul 24, 2006, at 11:53 PM, Charlie Savage wrote:

> Hi Robert,
>
> On both Linux and Windows with msys, all the generated make files  
> have this line:
>
> LIBTOOL = $(SHELL) $(top_builddir)/libtool
>
> This refers to the libtool file that should be in the top level  
> GEOS directory.  Is that file missing for you?
>
> Either way, I'm guessing this isn't a SWIG binding issue.  If  
> you're missing the libtool file, does that mean you can't compile  
> GEOS either?
>
> I can't help much more on libtool/autoconf/automake etc., but would  
> be interested in hearing about your progress with the SWIG bindings  
> on the Mac since I don't have one I can test on.
>
> Thanks,
>
> Charlie
>
>
>
> Robert J. Berger wrote:
>> I just tried to build the latest CVS on a Macintosh OS X Macbook  
>> Pro. I did install swig 1.3.29 and had to run autogen.sh to get  
>> the configure files then did the configure line as recommended,  
>> configure ran without complaints, then when I tried to build Geos  
>> I get:
>> % make
>> Making all in source
>> Making all in algorithm
>> source='CGAlgorithms.cpp' object='CGAlgorithms.lo' libtool=yes \
>> depfile='.deps/CGAlgorithms.Plo' tmpdepfile='.deps/ 
>> CGAlgorithms.TPlo' \
>> depmode=gcc3 /bin/sh ../../depcomp \
>> /bin/sh ../../libtool --mode=compile g++ -DHAVE_CONFIG_H -I. -I. - 
>> I../../source/headers -I../../source/headers/geos -I../../source/ 
>> headers     -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long- 
>> long -c -o CGAlgorithms.lo `test -f 'CGAlgorithms.cpp' || echo  
>> './'`CGAlgorithms.cpp
>> ../../libtool: ../../libtool: No such file or directory
>> I do have libtool, but its in /usr/bin/libtool Not sure why the  
>> makefile thinks its in the top_buildir.
>> ??????????????????????????????
>> Robert J. Berger - Internet Bandwidth Development, LLC.
>> Voice: 408-882-4755 eFax: +1-408-490-2868 http://www.ibd.com
>> --------------------------------------------------------------------- 
>> ---
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@geos.refractions.net
>> http://geos.refractions.net/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

??????????????????????????????
Robert J. Berger - Internet Bandwidth Development, LLC.
Voice: 408-882-4755 eFax: +1-408-490-2868
http://www.ibd.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060725/48508695/attachment.html
From cfis at savagexi.com  Tue Jul 25 04:25:54 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: New python/ruby SWIG bindings checked in / Can't
	build on Mac OSX
In-Reply-To: <D6162580-B106-4760-9B64-999341DAF95A@ibd.com>
References: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>	<44C5BFE9.8060709@savagexi.com>
	<D6162580-B106-4760-9B64-999341DAF95A@ibd.com>
Message-ID: <44C5D592.4030608@savagexi.com>

> Like should I be able to just run autgen.sh to build the proper 
> configure files?

Yup, that should work:

./autogen.sh


  > Now I have to just learn how to use GEOS, POSTGIS, Ruby and Google 
Earth
> KML without any background in GIS :-)

Good luck.  Some ruby examples for GEOS are under swig/ruby/test, and a 
python example is under swig/python/test.

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060725/ee9f7f2c/smime.bin
From hobu at iastate.edu  Tue Jul 25 08:57:18 2006
From: hobu at iastate.edu (Howard Butler)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: New python/ruby SWIG bindings checked in /
	Can't 	build on Mac OSX
In-Reply-To: <44C5D592.4030608@savagexi.com>
References: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>
	<44C5BFE9.8060709@savagexi.com>
	<D6162580-B106-4760-9B64-999341DAF95A@ibd.com>
	<44C5D592.4030608@savagexi.com>
Message-ID: <p06230904c0ebc53bc147@[192.168.11.4]>

Robert,

Can you try using /usr/bin/glibtool instead of osx's?  The buildbot 
<http://geos.builds.hobu.net> currently configures with glibtool.  I 
have had much trouble with osx's libtool (to the point of symlinking 
glibtool in its place even).

Howard

At 2:25 AM -0600 7/25/06, Charlie Savage wrote:
>Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
>	micalg=sha1; boundary="------------ms080105020904040701090001"
>
>>Like should I be able to just run autgen.sh to build the proper 
>>configure files?
>
>Yup, that should work:
>
>./autogen.sh
>
>
>  > Now I have to just learn how to use GEOS, POSTGIS, Ruby and Google Earth
>>KML without any background in GIS :-)
>
>Good luck.  Some ruby examples for GEOS are under swig/ruby/test, 
>and a python example is under swig/python/test.
>
>Charlie
>
>
>Content-Type: application/x-pkcs7-signature; name="smime.p7s"
>Content-Disposition: attachment; filename="smime.p7s"
>Content-Description: S/MIME Cryptographic Signature
>
>Attachment converted: Macintosh HD:smime 186.p7s (    /    ) (00445870)
>_______________________________________________
>geos-devel mailing list
>geos-devel@geos.refractions.net
>http://geos.refractions.net/mailman/listinfo/geos-devel


From rberger at ibd.com  Tue Jul 25 10:53:30 2006
From: rberger at ibd.com (Robert J. Berger)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: New python/ruby SWIG bindings checked in / Can't
	build on Mac OSX
In-Reply-To: <p06230904c0ebc53bc147@[192.168.11.4]>
References: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>
	<44C5BFE9.8060709@savagexi.com>
	<D6162580-B106-4760-9B64-999341DAF95A@ibd.com>
	<44C5D592.4030608@savagexi.com>
	<p06230904c0ebc53bc147@[192.168.11.4]>
Message-ID: <E0EBF76F-6CC5-47FE-8439-64FAC369453F@ibd.com>


On Jul 25, 2006, at 5:57 AM, Howard Butler wrote:

> Robert,
>
> Can you try using /usr/bin/glibtool instead of osx's?  The buildbot  
> <http://geos.builds.hobu.net> currently configures with glibtool.   
> I have had much trouble with osx's libtool (to the point of  
> symlinking glibtool in its place even).
>
I can try that later today. Do you have a recommended way to do it?  
Do I need to modify autogen.sh?

> Howard
>
> At 2:25 AM -0600 7/25/06, Charlie Savage wrote:
>> Content-Type: multipart/signed; protocol="application/x-pkcs7- 
>> signature";
>> 	micalg=sha1; boundary="------------ms080105020904040701090001"
>>
>>> Like should I be able to just run autgen.sh to build the proper  
>>> configure files?
>>
>> Yup, that should work:
>>
>> ./autogen.sh
>>
>>
>>  > Now I have to just learn how to use GEOS, POSTGIS, Ruby and  
>> Google Earth
>>> KML without any background in GIS :-)
>>
>> Good luck.  Some ruby examples for GEOS are under swig/ruby/test,  
>> and a python example is under swig/python/test.
>>
>> Charlie
>>
>>
>> Content-Type: application/x-pkcs7-signature; name="smime.p7s"
>> Content-Disposition: attachment; filename="smime.p7s"
>> Content-Description: S/MIME Cryptographic Signature
>>
>> Attachment converted: Macintosh HD:smime 186.p7s (    /    )  
>> (00445870)
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@geos.refractions.net
>> http://geos.refractions.net/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

??????????????????????????????
Robert J. Berger - Internet Bandwidth Development, LLC.
Voice: 408-882-4755 eFax: +1-408-490-2868
http://www.ibd.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060725/db611911/attachment.html
From rberger at ibd.com  Tue Jul 25 13:04:26 2006
From: rberger at ibd.com (Robert J. Berger)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: New python/ruby SWIG bindings checked in / Can't
	build on Mac OSX
In-Reply-To: <p06230904c0ebc53bc147@[192.168.11.4]>
References: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>
	<44C5BFE9.8060709@savagexi.com>
	<D6162580-B106-4760-9B64-999341DAF95A@ibd.com>
	<44C5D592.4030608@savagexi.com>
	<p06230904c0ebc53bc147@[192.168.11.4]>
Message-ID: <CEEA4C2F-D7B5-480E-B8B0-D475DD4553CA@ibd.com>

Ok, what I needed to do was to modify autogen.sh in the top level  
directory to use
glibtoolize instead of libtoolize.

If I had been a bit more aware when I first ran autogen.sh I would  
have seen the error message:

./autogen.sh: line 16: libtoolize: command not found

Thanks for the help!

Rob

On Jul 25, 2006, at 5:57 AM, Howard Butler wrote:

> Robert,
>
> Can you try using /usr/bin/glibtool instead of osx's?  The buildbot  
> <http://geos.builds.hobu.net> currently configures with glibtool.   
> I have had much trouble with osx's libtool (to the point of  
> symlinking glibtool in its place even).
>
> Howard
>
> At 2:25 AM -0600 7/25/06, Charlie Savage wrote:
>> Content-Type: multipart/signed; protocol="application/x-pkcs7- 
>> signature";
>> 	micalg=sha1; boundary="------------ms080105020904040701090001"
>>
>>> Like should I be able to just run autgen.sh to build the proper  
>>> configure files?
>>
>> Yup, that should work:
>>
>> ./autogen.sh
>>
>>
>>  > Now I have to just learn how to use GEOS, POSTGIS, Ruby and  
>> Google Earth
>>> KML without any background in GIS :-)
>>
>> Good luck.  Some ruby examples for GEOS are under swig/ruby/test,  
>> and a python example is under swig/python/test.
>>
>> Charlie
>>
>>
>> Content-Type: application/x-pkcs7-signature; name="smime.p7s"
>> Content-Disposition: attachment; filename="smime.p7s"
>> Content-Description: S/MIME Cryptographic Signature
>>
>> Attachment converted: Macintosh HD:smime 186.p7s (    /    )  
>> (00445870)
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@geos.refractions.net
>> http://geos.refractions.net/mailman/listinfo/geos-devel
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

??????????????????????????????
Robert J. Berger - Internet Bandwidth Development, LLC.
Voice: 408-882-4755 eFax: +1-408-490-2868
http://www.ibd.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060725/112465f6/attachment.html
From rberger at ibd.com  Tue Jul 25 13:07:17 2006
From: rberger at ibd.com (Robert J. Berger)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Example code to build KML files (ideally in ruby)?
Message-ID: <F7FBA057-8BEA-47F0-8205-C65A4ED9547D@ibd.com>

So interestingly after scouring the Internet with google for many  
hours I have not been able to find any example ruby code for building  
Google Earth KML files. I've found a few for parsing KML into CSV  
files or into hashes, but nothing for going the other way around.

If by chance anyone has any examples of generating KML, particularly  
in conjunction with some Ruby GEOS examples, I would be most  
appreciative!

Thanks
Rob

??????????????????????????????
Robert J. Berger - Internet Bandwidth Development, LLC.
Voice: 408-882-4755 eFax: +1-408-490-2868
http://www.ibd.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20060725/0d0731df/attachment.html
From mateusz at loskot.net  Tue Jul 25 14:26:44 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Example code to build KML files (ideally in ruby)?
In-Reply-To: <F7FBA057-8BEA-47F0-8205-C65A4ED9547D@ibd.com>
References: <F7FBA057-8BEA-47F0-8205-C65A4ED9547D@ibd.com>
Message-ID: <44C66264.6040500@loskot.net>

Robert J. Berger wrote:
> If by chance anyone has any examples of generating KML, particularly in
> conjunction with some Ruby GEOS examples, I would be most appreciative!

I have no idea about examples in Ruby, but I'd say it should not be a
problem to create KML output in Ruby. First, I'd suggest to learn how to
construct XML tree in Ruby (I have no idea of this, because I'm not a
Ruby programmer, yet ;-)).
Then you can walk through the KML documentation and see what elements
you need to include in your output. KML is a dialect of XML.

FYI, the OGR library includes KML driver:
http://www.gdal.org/ogr/drv_kml.html


Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From cfis at savagexi.com  Tue Jul 25 15:14:57 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Example code to build KML files (ideally in ruby)?
In-Reply-To: <44C66264.6040500@loskot.net>
References: <F7FBA057-8BEA-47F0-8205-C65A4ED9547D@ibd.com>
	<44C66264.6040500@loskot.net>
Message-ID: <44C66DB1.4050505@savagexi.com>

REXML is usually the library people use for XML processing/output in 
Ruby.  Note there are also Ruby bindings for ogr, so you might want to 
give those a try.

Charlie

Mateusz Loskot wrote:
> Robert J. Berger wrote:
>> If by chance anyone has any examples of generating KML, particularly in
>> conjunction with some Ruby GEOS examples, I would be most appreciative!
> 
> I have no idea about examples in Ruby, but I'd say it should not be a
> problem to create KML output in Ruby. First, I'd suggest to learn how to
> construct XML tree in Ruby (I have no idea of this, because I'm not a
> Ruby programmer, yet ;-)).
> Then you can walk through the KML documentation and see what elements
> you need to include in your output. KML is a dialect of XML.
> 
> FYI, the OGR library includes KML driver:
> http://www.gdal.org/ogr/drv_kml.html
> 
> 
> Best regards
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060725/dc82b64e/smime.bin
From strk at refractions.net  Tue Jul 25 16:46:53 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: New python/ruby SWIG bindings checked in / Can't
	build on Mac OSX
In-Reply-To: <CEEA4C2F-D7B5-480E-B8B0-D475DD4553CA@ibd.com>
References: <A721C026-9498-4CEF-94EC-745B6274D48D@ibd.com>
	<44C5BFE9.8060709@savagexi.com>
	<D6162580-B106-4760-9B64-999341DAF95A@ibd.com>
	<44C5D592.4030608@savagexi.com>
	<p06230904c0ebc53bc147@[192.168.11.4]>
	<CEEA4C2F-D7B5-480E-B8B0-D475DD4553CA@ibd.com>
Message-ID: <20060725204653.GC36186@keybit.net>

On Tue, Jul 25, 2006 at 10:04:26AM -0700, Robert J. Berger wrote:

> If I had been a bit more aware when I first ran autogen.sh I would  
> have seen the error message:
> 
> ./autogen.sh: line 16: libtoolize: command not found

I made error messages more visible (in CVS).

--strk;

From pramsey at refractions.net  Wed Jul 26 13:33:47 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <20060726141701.GC39889@keybit.net>
References: <44C0A367.2080700@logix-tt.com>
	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>
	<20060726141701.GC39889@keybit.net>
Message-ID: <44C7A77B.2080406@refractions.net>

The deed is done.

http://svn.refractions.net/postgis
http://svn.refractions.net/geos



strk@refractions.net wrote:
> On Tue, Jul 25, 2006 at 10:35:59PM -0700, Paul Ramsey wrote:
> 
>> Which should go first, and when?
> 
> Please move PostGIS first, I've pending commits for GEOS.
> Today is ok to me :)
> 
> --strk;
> 
> _______________________________________________
> postgis-devel mailing list
> postgis-devel@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-devel


From strk at refractions.net  Wed Jul 26 13:54:36 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7A77B.2080406@refractions.net>
References: <44C0A367.2080700@logix-tt.com> <44C55DD7.7050402@refractions.net>
	<44C5C76C.1070607@logix-tt.com>
	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>
	<20060726141701.GC39889@keybit.net>
	<44C7A77B.2080406@refractions.net>
Message-ID: <20060726175436.GF48401@keybit.net>

On Wed, Jul 26, 2006 at 10:33:47AM -0700, Paul Ramsey wrote:
> The deed is done.
> 
> http://svn.refractions.net/postgis
> http://svn.refractions.net/geos

Excellent!
Please remember to drop CVS write privileges so nobody
would accidentally commit in the dead repository.

Also, I dunno who's responsible for it, but the irc bot
needs to be updated to listen SVN activity.

--strk;

From mateusz at loskot.net  Wed Jul 26 14:13:51 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7A77B.2080406@refractions.net>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>
	<44C7A77B.2080406@refractions.net>
Message-ID: <44C7B0DF.9040200@loskot.net>

Paul Ramsey wrote:
> The deed is done.
> 
> http://svn.refractions.net/postgis
> http://svn.refractions.net/geos

Great news! Thank you Paul.

Paul, if you don't mind, I'd bring a new idea related to SVN :-)
How about installing Trac?
If you're interested, you can see the QGIS Trac to get the idea.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From pramsey at refractions.net  Wed Jul 26 14:20:26 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7AE28.3090202@logix-tt.com>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>
	<44C7AE28.3090202@logix-tt.com>
Message-ID: <44C7B26A.1090209@refractions.net>

Yes, I just copied them over now.

Markus Schaber wrote:
> Hi, Paul,
> 
> Paul Ramsey wrote:
> 
>> http://svn.refractions.net/postgis
>> http://svn.refractions.net/geos
> 
> Thanks.
> 
> I assume that the old user/password combinations continue to work?
> 
> Markus
> 


From pramsey at refractions.net  Wed Jul 26 14:22:26 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] make dist
Message-ID: <44C7B2E2.5090304@refractions.net>

"make dist" seems to be broken on trunk.  This incidentally breaks 
snapshot builds.

P

From mateusz at loskot.net  Wed Jul 26 15:06:02 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7A77B.2080406@refractions.net>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>
	<44C7A77B.2080406@refractions.net>
Message-ID: <44C7BD1A.5030903@loskot.net>

Paul Ramsey wrote:
> The deed is done.
> 
> http://svn.refractions.net/postgis
> http://svn.refractions.net/geos

I'd like to confirm:
- clean checkout - works
- autogen.sh/configure - works
- make - works
- make check - works
- make dist - does not work

Here is the error message I get when running 'make dist':

make[2]: Entering directory `/home/mloskot/dev/geos/_svn/geos/swig/python'
make[2]: *** No rule to make target `geos.py', needed by `distdir'.  Stop.
make[2]: Leaving directory `/home/mloskot/dev/geos/_svn/geos/swig/python'
make[1]: *** [distdir] Error 1
make[1]: Leaving directory `/home/mloskot/dev/geos/_svn/geos/swig'
make: *** [distdir] Error 1


Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From strk at refractions.net  Wed Jul 26 15:07:21 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7AE09.2080903@logix-tt.com>
References: <44C0A367.2080700@logix-tt.com> <44C55DD7.7050402@refractions.net>
	<44C5C76C.1070607@logix-tt.com>
	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>
	<20060726141701.GC39889@keybit.net>
	<44C7A77B.2080406@refractions.net>
	<20060726175436.GF48401@keybit.net> <44C7AE09.2080903@logix-tt.com>
Message-ID: <20060726190721.GI48401@keybit.net>

On Wed, Jul 26, 2006 at 08:01:45PM +0200, Markus Schaber wrote:

> Which irc-bot? Just curious...

There's a lot of people on #postgis channel
of freenode network, talking about postgis and geos.

And, we have a bot that reports repository activity.

--strk;

From cfis at savagexi.com  Wed Jul 26 15:37:30 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7BD1A.5030903@loskot.net>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>
	<44C7BD1A.5030903@loskot.net>
Message-ID: <44C7C47A.6050208@savagexi.com>

Hmm...Looks like goes.py is not in SVN (probably wasn't in CVS).  Since 
it hasn't been generated (by building the SWIG bindings) it blow up on 
make dist.  Same is going to be true for the .cxx files.

A few choices, which have been discussed previously:

* make needs to build the SWIG bindings, then make dist would work

* these files get added to SVN, so make dist works whether or not you 
build the swig bindings.  It also means you could compile the SWIG 
binding without having SWIG.

* these files don't get added to SVN and don't get distributed, thereby 
forcing anyone who downloads GEOS to have SWIG in order to build the 
SWIG bindings.

I'd prefer the 2nd choice.  What do other think?

Charlie

Mateusz Loskot wrote:
> Paul Ramsey wrote:
>> The deed is done.
>>
>> http://svn.refractions.net/postgis
>> http://svn.refractions.net/geos
> 
> I'd like to confirm:
> - clean checkout - works
> - autogen.sh/configure - works
> - make - works
> - make check - works
> - make dist - does not work
> 
> Here is the error message I get when running 'make dist':
> 
> make[2]: Entering directory `/home/mloskot/dev/geos/_svn/geos/swig/python'
> make[2]: *** No rule to make target `geos.py', needed by `distdir'.  Stop.
> make[2]: Leaving directory `/home/mloskot/dev/geos/_svn/geos/swig/python'
> make[1]: *** [distdir] Error 1
> make[1]: Leaving directory `/home/mloskot/dev/geos/_svn/geos/swig'
> make: *** [distdir] Error 1
> 
> 
> Best regards
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060726/64b9fcb5/smime.bin
From pramsey at refractions.net  Wed Jul 26 15:53:04 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7C47A.6050208@savagexi.com>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>
	<44C7C47A.6050208@savagexi.com>
Message-ID: <44C7C820.4020602@refractions.net>

The usual issues apply to putting generated files into the repository: 
if different people with different swigs generate these files they will 
potentially clobber each other in the repository and even generate 
conflicts.

A checks out
B checks out
A generates and updates and commits
B generates and updates, conflict!

P

Charlie Savage wrote:
> Hmm...Looks like goes.py is not in SVN (probably wasn't in CVS).  Since 
> it hasn't been generated (by building the SWIG bindings) it blow up on 
> make dist.  Same is going to be true for the .cxx files.
> 
> A few choices, which have been discussed previously:
> 
> * make needs to build the SWIG bindings, then make dist would work
> 
> * these files get added to SVN, so make dist works whether or not you 
> build the swig bindings.  It also means you could compile the SWIG 
> binding without having SWIG.
> 
> * these files don't get added to SVN and don't get distributed, thereby 
> forcing anyone who downloads GEOS to have SWIG in order to build the 
> SWIG bindings.
> 
> I'd prefer the 2nd choice.  What do other think?
> 
> Charlie
> 
> Mateusz Loskot wrote:
>> Paul Ramsey wrote:
>>> The deed is done.
>>>
>>> http://svn.refractions.net/postgis
>>> http://svn.refractions.net/geos
>>
>> I'd like to confirm:
>> - clean checkout - works
>> - autogen.sh/configure - works
>> - make - works
>> - make check - works
>> - make dist - does not work
>>
>> Here is the error message I get when running 'make dist':
>>
>> make[2]: Entering directory 
>> `/home/mloskot/dev/geos/_svn/geos/swig/python'
>> make[2]: *** No rule to make target `geos.py', needed by `distdir'.  
>> Stop.
>> make[2]: Leaving directory `/home/mloskot/dev/geos/_svn/geos/swig/python'
>> make[1]: *** [distdir] Error 1
>> make[1]: Leaving directory `/home/mloskot/dev/geos/_svn/geos/swig'
>> make: *** [distdir] Error 1
>>
>>
>> Best regards
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From pramsey at refractions.net  Wed Jul 26 15:54:04 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7C820.4020602@refractions.net>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>	<44C7C47A.6050208@savagexi.com>
	<44C7C820.4020602@refractions.net>
Message-ID: <44C7C85C.7010301@refractions.net>

That said, option 2 is fine with me. If we find we are getting 
conflicts, we can always back out to option 1 later.

P

Paul Ramsey wrote:
> The usual issues apply to putting generated files into the repository: 
> if different people with different swigs generate these files they will 
> potentially clobber each other in the repository and even generate 
> conflicts.
> 
> A checks out
> B checks out
> A generates and updates and commits
> B generates and updates, conflict!
> 
> P
> 
> Charlie Savage wrote:
>> Hmm...Looks like goes.py is not in SVN (probably wasn't in CVS).  
>> Since it hasn't been generated (by building the SWIG bindings) it blow 
>> up on make dist.  Same is going to be true for the .cxx files.
>>
>> A few choices, which have been discussed previously:
>>
>> * make needs to build the SWIG bindings, then make dist would work
>>
>> * these files get added to SVN, so make dist works whether or not you 
>> build the swig bindings.  It also means you could compile the SWIG 
>> binding without having SWIG.
>>
>> * these files don't get added to SVN and don't get distributed, 
>> thereby forcing anyone who downloads GEOS to have SWIG in order to 
>> build the SWIG bindings.
>>
>> I'd prefer the 2nd choice.  What do other think?
>>
>> Charlie
>>
>> Mateusz Loskot wrote:
>>> Paul Ramsey wrote:
>>>> The deed is done.
>>>>
>>>> http://svn.refractions.net/postgis
>>>> http://svn.refractions.net/geos
>>>
>>> I'd like to confirm:
>>> - clean checkout - works
>>> - autogen.sh/configure - works
>>> - make - works
>>> - make check - works
>>> - make dist - does not work
>>>
>>> Here is the error message I get when running 'make dist':
>>>
>>> make[2]: Entering directory 
>>> `/home/mloskot/dev/geos/_svn/geos/swig/python'
>>> make[2]: *** No rule to make target `geos.py', needed by `distdir'.  
>>> Stop.
>>> make[2]: Leaving directory 
>>> `/home/mloskot/dev/geos/_svn/geos/swig/python'
>>> make[1]: *** [distdir] Error 1
>>> make[1]: Leaving directory `/home/mloskot/dev/geos/_svn/geos/swig'
>>> make: *** [distdir] Error 1
>>>
>>>
>>> Best regards
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel@geos.refractions.net
>> http://geos.refractions.net/mailman/listinfo/geos-devel
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From strk at refractions.net  Wed Jul 26 16:15:19 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7C47A.6050208@savagexi.com>
References: <44C0A367.2080700@logix-tt.com> <44C55DD7.7050402@refractions.net>
	<44C5C76C.1070607@logix-tt.com>
	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>
	<20060726141701.GC39889@keybit.net>
	<44C7A77B.2080406@refractions.net>
	<44C7BD1A.5030903@loskot.net> <44C7C47A.6050208@savagexi.com>
Message-ID: <20060726201519.GJ48401@keybit.net>

On Wed, Jul 26, 2006 at 01:37:30PM -0600, Charlie Savage wrote:

> * these files get added to SVN, so make dist works whether or not you 
> build the swig bindings.  It also means you could compile the SWIG 
> binding without having SWIG.

I'm for this choice. Best is if make maintainer-clean would
delete these files and a subsequent make would generated them again.

--strk;

From cfis at savagexi.com  Wed Jul 26 16:19:56 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <20060726201519.GJ48401@keybit.net>
References: <44C0A367.2080700@logix-tt.com>
	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>
	<44C7C47A.6050208@savagexi.com> <20060726201519.GJ48401@keybit.net>
Message-ID: <44C7CE6C.5030403@savagexi.com>

Thanks Paul and strk for the feedback.

I'll proceed with option 2, and update maintainer-clean.

Charlie

strk@refractions.net wrote:
> On Wed, Jul 26, 2006 at 01:37:30PM -0600, Charlie Savage wrote:
> 
>> * these files get added to SVN, so make dist works whether or not you 
>> build the swig bindings.  It also means you could compile the SWIG 
>> binding without having SWIG.
> 
> I'm for this choice. Best is if make maintainer-clean would
> delete these files and a subsequent make would generated them again.
> 
> --strk;
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060726/afdcc281/smime.bin
From mateusz at loskot.net  Wed Jul 26 20:19:31 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C7C820.4020602@refractions.net>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>	<44C7C47A.6050208@savagexi.com>
	<44C7C820.4020602@refractions.net>
Message-ID: <44C80693.6040207@loskot.net>

Paul Ramsey wrote:
> The usual issues apply to putting generated files into the repository:
> if different people with different swigs generate these files they will
> potentially clobber each other in the repository and even generate
> conflicts.
> 
> A checks out
> B checks out
> A generates and updates and commits
> B generates and updates, conflict!

Yes, this is the same situation as keeping ./configure script in the
repo and then every run of autogen.sh will introduce problems.

If geos.py is generated file, then 'make dist' could operate this
file optionally, depending on SWIG wrappers are build or not.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From cfis at savagexi.com  Wed Jul 26 21:07:49 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C80693.6040207@loskot.net>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>	<44C7C47A.6050208@savagexi.com>	<44C7C820.4020602@refractions.net>
	<44C80693.6040207@loskot.net>
Message-ID: <44C811E5.4010101@savagexi.com>

How would you do that in automake?

Here is where it is coming from:

SUBDIRS = \
	tests

EXTRA_DIST = \
	python.i \
	geos.pth

#MAINTAINERCLEANFILES = geos_wrap.cxx
#MOSTLYCLEANFILES = geos.py
CLEANFILES = geos_wrap.cxx geos.py

if ENABLE_PYTHON

BUILT_SOURCES = geos_wrap.cxx

python_DATA = geos.pth
pkgpython_PYTHON = geos.py
pkgpyexec_LTLIBRARIES = _geos.la


Charlie

Mateusz Loskot wrote:
> Paul Ramsey wrote:
>> The usual issues apply to putting generated files into the repository:
>> if different people with different swigs generate these files they will
>> potentially clobber each other in the repository and even generate
>> conflicts.
>>
>> A checks out
>> B checks out
>> A generates and updates and commits
>> B generates and updates, conflict!
> 
> Yes, this is the same situation as keeping ./configure script in the
> repo and then every run of autogen.sh will introduce problems.
> 
> If geos.py is generated file, then 'make dist' could operate this
> file optionally, depending on SWIG wrappers are build or not.
> 
> Best regards
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060726/de937717/smime.bin
From cfis at savagexi.com  Thu Jul 27 01:57:19 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] SVN Access failed - updating SWIG bindings
In-Reply-To: <44C80693.6040207@loskot.net>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>	<44C7C47A.6050208@savagexi.com>	<44C7C820.4020602@refractions.net>
	<44C80693.6040207@loskot.net>
Message-ID: <44C855BF.9060407@savagexi.com>

Okay, I have the swig generated wrapper files.  But it seems like I 
can't update the new SVN repository:

svn commit -m Added SWIG generated wrapper files for Ruby and Python 
python/geos.py python/geos_wrap.cxx ruby/geos_wrap.cxx --username 
csavage --password ****** --non-interactive

svn: Commit failed (details follow):
svn: CHECKOUT of '/geos/!svn/ver/1795/trunk/swig/python': authorization 
failed (http://svn.refractions.net)

Thanks,

Charlie


Mateusz Loskot wrote:
> Paul Ramsey wrote:
>> The usual issues apply to putting generated files into the repository:
>> if different people with different swigs generate these files they will
>> potentially clobber each other in the repository and even generate
>> conflicts.
>>
>> A checks out
>> B checks out
>> A generates and updates and commits
>> B generates and updates, conflict!
> 
> Yes, this is the same situation as keeping ./configure script in the
> repo and then every run of autogen.sh will introduce problems.
> 
> If geos.py is generated file, then 'make dist' could operate this
> file optionally, depending on SWIG wrappers are build or not.
> 
> Best regards
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060726/9fa888e5/smime.bin
From mateusz at loskot.net  Thu Jul 27 02:15:49 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C811E5.4010101@savagexi.com>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>	<44C7C47A.6050208@savagexi.com>	<44C7C820.4020602@refractions.net>	<44C80693.6040207@loskot.net>
	<44C811E5.4010101@savagexi.com>
Message-ID: <44C85A15.2040404@loskot.net>

Charlie Savage wrote:
> How would you do that in automake?

I think it should be possible to exclude swig directory in make targets
optionally. This ex/inclusion decision can be made up by ./configure,
depending on user's choice.

The idea is to exclude swig directory from SUBDIRS macro in the main
Makefile.am if user does not want to build SWIG wrappers.
It can be achieved using AM_CONDITIONAL macro or other techniques of
handling conditional subdirectories in automake:

http://sources.redhat.com/automake/automake.html#Conditional-Subdirectories

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Jul 27 02:20:15 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] SVN Access failed - updating SWIG bindings
In-Reply-To: <44C855BF.9060407@savagexi.com>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>	<44C7C47A.6050208@savagexi.com>	<44C7C820.4020602@refractions.net>	<44C80693.6040207@loskot.net>
	<44C855BF.9060407@savagexi.com>
Message-ID: <44C85B1F.8090806@loskot.net>

Charlie Savage wrote:
> Okay, I have the swig generated wrapper files.  But it seems like I
> can't update the new SVN repository:
> 
> svn commit -m Added SWIG generated wrapper files for Ruby and Python
> python/geos.py python/geos_wrap.cxx ruby/geos_wrap.cxx --username
> csavage --password ****** --non-interactive
> 
> svn: Commit failed (details follow):
> svn: CHECKOUT of '/geos/!svn/ver/1795/trunk/swig/python': authorization
> failed (http://svn.refractions.net)

Committing works for me (svn output in polish, below):

mloskot:~/dev/geos/_svn/geos$ svn commit -m "Added svn:ignore property
to ignore 'geos-3.0.0rc1' dir (testing commit access to SVN)."
--username mloskot
Wysylanie       .
Obszar identyfikacji: <http://svn.refractions.net:80> Subversion
Haslo 'mloskot':

Zatwierdzona wersja 1797.
mloskot:~/dev/geos/_svn/geos$

The last message "Zatwierdzona wersja 1797." means success and new
revision number is 1797 ;-)

Best regards

-- 
Mateusz Loskot
http://mateusz.loskot.net

From cfis at savagexi.com  Thu Jul 27 02:32:39 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C85A15.2040404@loskot.net>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>	<44C7C47A.6050208@savagexi.com>	<44C7C820.4020602@refractions.net>	<44C80693.6040207@loskot.net>	<44C811E5.4010101@savagexi.com>
	<44C85A15.2040404@loskot.net>
Message-ID: <44C85E07.4020803@savagexi.com>

Thanks for the link Mateusz.  Right now make does conditionally include 
or not include SWIG based on the ./configure parameters --enable-python 
--enable-ruby.  But make dist always seems to include the SWIG 
directories.  I'll investigate more tomorrow to see what's going on.

Charlie


Mateusz Loskot wrote:
> Charlie Savage wrote:
>> How would you do that in automake?
> 
> I think it should be possible to exclude swig directory in make targets
> optionally. This ex/inclusion decision can be made up by ./configure,
> depending on user's choice.
> 
> The idea is to exclude swig directory from SUBDIRS macro in the main
> Makefile.am if user does not want to build SWIG wrappers.
> It can be achieved using AM_CONDITIONAL macro or other techniques of
> handling conditional subdirectories in automake:
> 
> http://sources.redhat.com/automake/automake.html#Conditional-Subdirectories
> 
> Best regards
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060727/86b21b3f/smime.bin
From mateusz at loskot.net  Thu Jul 27 03:00:18 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C85E07.4020803@savagexi.com>
References: <44C0A367.2080700@logix-tt.com>	<44C55DD7.7050402@refractions.net>	<44C5C76C.1070607@logix-tt.com>	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>	<44C7C47A.6050208@savagexi.com>	<44C7C820.4020602@refractions.net>	<44C80693.6040207@loskot.net>	<44C811E5.4010101@savagexi.com>	<44C85A15.2040404@loskot.net>
	<44C85E07.4020803@savagexi.com>
Message-ID: <44C86482.9060703@loskot.net>

Charlie Savage wrote:
> Thanks for the link Mateusz.  Right now make does conditionally include
> or not include SWIG based on the ./configure parameters --enable-python
> --enable-ruby.  But make dist always seems to include the SWIG
> directories.  I'll investigate more tomorrow to see what's going on.

Charlie,

Yes, the ./configure includes building SWIG on user's request, but
even if user does not want it, the Makefile is generated.
My idea is to conditionally exclude swig directory from SUBDIRS and
AC_OUTPUT, so Makefile is not generated and 'make dist' won't try to
step into the swig. But I may be wrong :-)))

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Theuns at softsim.co.za  Thu Jul 27 04:40:21 2006
From: Theuns at softsim.co.za (Theuns Heydenrych)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] CVS checkout
Message-ID: <B18F07FB42F0D311BCB900105AC31EFC52DFB7@LTS1>

Hi 
i am a newby , can someone please give me the cvs command to checkout the
code for GEOS. 
I woulkd like to compile the code on a win32 system.
I have downloaded the geos-2.2.3.tar.bz2  file , but using nmake with the
makefile.vc , i get the following error.

Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0
Copyright (C) Microsoft Corp 1988-1998. All rights reserved.

NMAKE : fatal error U1073: don't know how to make 'capi/geos_c.h.vc'
Stop.

The version.h.vc file is also missing from the archive.

Could someone please advise.

thanks
Theuns Heydenrych 
Software Developer

CyberSim (Pty) Ltd
Simulation Software Technologies   
Direct Tel.	:        + (27) 12 346 9807
Direct Fax	:        + (27) 12 346 9384
SWB Tel.		:        + (27) 12 346 7575
SWB Fax		:        + (27) 12 346 0064
E-Mail		:         theuns@softsim.co.za
Internet		:         http://www.cybersim.co.za        
       
Disclaimer:
The information contained in this communication is private and confidential
and is intended solely for use by the individual/individuals or entity to
whom it is addressed.  Kindly notify the sender immediately by   e-mail if
you have received this communication by mistake and delete this e-mail from
your system.  Any unauthorized use or interception of this communication, or
the review, retransmission, dissemination or other use of, or taking any
action in reliance upon the contents, by individuals or entities other than
those intended, is strongly prohibited.  

Any views expressed in this communication are those of the individual
sender, except where the sender specifically states them to be those of
CyberSim, to whom no liability shall attach whatsoever. 

CyberSim is neither liable for the proper and complete transmission of the
information contained in this communication nor for any delay in its receipt
nor for any special, incidental or consequential damages of any nature
whatsoever resulting from receipt or use of this communication.


###########################################

This message has been scanned by F-Secure Anti-Virus for Microsoft Exchange.
For more information, connect to http://www.F-Secure.com/

From mateusz at loskot.net  Thu Jul 27 05:01:26 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] CVS checkout
In-Reply-To: <B18F07FB42F0D311BCB900105AC31EFC52DFB7@LTS1>
References: <B18F07FB42F0D311BCB900105AC31EFC52DFB7@LTS1>
Message-ID: <44C880E6.8040600@loskot.net>

Theuns Heydenrych wrote:
> Hi 
> i am a newby , can someone please give me the cvs command to checkout the
> code for GEOS. 

GEOS has just moved to Subversion:
http://mateusz.loskot.net/2006/07/27/geos-has-moved-to-subversion/

> I woulkd like to compile the code on a win32 system.
> I have downloaded the geos-2.2.3.tar.bz2  file , but using nmake with the
> makefile.vc , i get the following error.
> 
> Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0
> Copyright (C) Microsoft Corp 1988-1998. All rights reserved.
> 
> NMAKE : fatal error U1073: don't know how to make 'capi/geos_c.h.vc'

Hmm, I'm not sur but makefiles for Visual C++ may be out of date.
I can't check it now, so may be anyone will give details.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Theuns at softsim.co.za  Thu Jul 27 05:15:38 2006
From: Theuns at softsim.co.za (Theuns Heydenrych)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] CVS checkout
Message-ID: <B18F07FB42F0D311BCB900105AC31EFC52DFB9@LTS1>

Thanks Mateusz

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net]
Sent: 27 July 2006 11:01
To: GEOS Development List
Subject: Re: [geos-devel] CVS checkout


Theuns Heydenrych wrote:
> Hi 
> i am a newby , can someone please give me the cvs command to checkout the
> code for GEOS. 

GEOS has just moved to Subversion:
http://mateusz.loskot.net/2006/07/27/geos-has-moved-to-subversion/

> I woulkd like to compile the code on a win32 system.
> I have downloaded the geos-2.2.3.tar.bz2  file , but using nmake with the
> makefile.vc , i get the following error.
> 
> Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0
> Copyright (C) Microsoft Corp 1988-1998. All rights reserved.
> 
> NMAKE : fatal error U1073: don't know how to make 'capi/geos_c.h.vc'

Hmm, I'm not sur but makefiles for Visual C++ may be out of date.
I can't check it now, so may be anyone will give details.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
geos-devel mailing list
geos-devel@geos.refractions.net
http://geos.refractions.net/mailman/listinfo/geos-devel
###########################################

This message has been scanned by F-Secure Anti-Virus for Microsoft Exchange.
For more information, connect to http://www.F-Secure.com/

From strk at refractions.net  Thu Jul 27 06:44:13 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <44C85E07.4020803@savagexi.com>
References: <42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>
	<20060726141701.GC39889@keybit.net>
	<44C7A77B.2080406@refractions.net>
	<44C7BD1A.5030903@loskot.net> <44C7C47A.6050208@savagexi.com>
	<44C7C820.4020602@refractions.net>
	<44C80693.6040207@loskot.net> <44C811E5.4010101@savagexi.com>
	<44C85A15.2040404@loskot.net> <44C85E07.4020803@savagexi.com>
Message-ID: <20060727104413.GN48401@keybit.net>

On Thu, Jul 27, 2006 at 12:32:39AM -0600, Charlie Savage wrote:
> Thanks for the link Mateusz.  Right now make does conditionally include 
> or not include SWIG based on the ./configure parameters --enable-python 
> --enable-ruby.  But make dist always seems to include the SWIG 
> directories.  I'll investigate more tomorrow to see what's going on.

make dist *needs* to include the SWIG dirs.
they just don't have to built if not requested to do so.
There should be DIST_SUBDIRS for that.

--strk;

From mateusz at loskot.net  Thu Jul 27 06:45:40 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-devel] Re: CVS to SVN move
In-Reply-To: <20060727104413.GN48401@keybit.net>
References: <42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>	<20060726141701.GC39889@keybit.net>	<44C7A77B.2080406@refractions.net>	<44C7BD1A.5030903@loskot.net>
	<44C7C47A.6050208@savagexi.com>	<44C7C820.4020602@refractions.net>	<44C80693.6040207@loskot.net>
	<44C811E5.4010101@savagexi.com>	<44C85A15.2040404@loskot.net>
	<44C85E07.4020803@savagexi.com> <20060727104413.GN48401@keybit.net>
Message-ID: <44C89954.4000303@loskot.net>

strk@refractions.net wrote:
> On Thu, Jul 27, 2006 at 12:32:39AM -0600, Charlie Savage wrote:
>> Thanks for the link Mateusz.  Right now make does conditionally include 
>> or not include SWIG based on the ./configure parameters --enable-python 
>> --enable-ruby.  But make dist always seems to include the SWIG 
>> directories.  I'll investigate more tomorrow to see what's going on.
> 
> make dist *needs* to include the SWIG dirs.
> they just don't have to built if not requested to do so.
> There should be DIST_SUBDIRS for that.

OK, not it's clear. Thanks for explanation.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Theuns at softsim.co.za  Thu Jul 27 07:11:41 2006
From: Theuns at softsim.co.za (Theuns Heydenrych)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Compiling GEOS on win32
Message-ID: <B18F07FB42F0D311BCB900105AC31EFC52DFBA@LTS1>

hi
I am a newby with GEOS

I installed svn and downloaded the latest code with svn.
When compiling the source with nmake i get the following errors.

Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0
Copyright (C) Microsoft Corp 1988-1998. All rights reserved.

        copy ..\capi\geos_c.h.vc ..\capi\geos_c.h
        1 file(s) copied.
        cl -Iheaders /MD /GR /O2 /D "NDEBUG" /nologo  /D "NOMINMAX" /D
"WIN32_LE
AN_AND_MEAN" /D "NOGDI"  /GX /c algorithm\CGAlgorithms.cpp
/Foalgorithm\CGAlgori
thms.obj
CGAlgorithms.cpp
algorithm\CGAlgorithms.cpp(342) : error C2039: 'min' : is not a member of
'std'
algorithm\CGAlgorithms.cpp(342) : error C2065: 'min' : undeclared identifier
algorithm\CGAlgorithms.cpp(343) : error C2039: 'min' : is not a member of
'std'
algorithm\CGAlgorithms.cpp(344) : error C2039: 'min' : is not a member of
'std'
algorithm\CGAlgorithms.cpp(350) : error C2039: 'min' : is not a member of
'std'
algorithm\CGAlgorithms.cpp(351) : error C2039: 'min' : is not a member of
'std'
algorithm\CGAlgorithms.cpp(352) : error C2039: 'min' : is not a member of
'std'
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.


Is it posible to compile the code with Mingw32 and MSYS perhaps?


Thanks
Theuns Heydenrych 
Software Developer

###########################################

This message has been scanned by F-Secure Anti-Virus for Microsoft Exchange.
For more information, connect to http://www.F-Secure.com/

From mateusz at loskot.net  Thu Jul 27 07:58:11 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Compiling GEOS on win32
In-Reply-To: <B18F07FB42F0D311BCB900105AC31EFC52DFBA@LTS1>
References: <B18F07FB42F0D311BCB900105AC31EFC52DFBA@LTS1>
Message-ID: <44C8AA53.7050402@loskot.net>

Theuns Heydenrych wrote:
> hi I am a newby with GEOS
> 
> I installed svn and downloaded the latest code with svn. When
> compiling the source with nmake i get the following errors.
> 
> Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0 
> Copyright (C) Microsoft Corp 1988-1998. All rights reserved.
> 
> copy ..\capi\geos_c.h.vc ..\capi\geos_c.h 1 file(s) copied. cl
> -Iheaders /MD /GR /O2 /D "NDEBUG" /nologo  /D "NOMINMAX" /D "WIN32_LE
>  AN_AND_MEAN" /D "NOGDI"  /GX /c algorithm\CGAlgorithms.cpp 
> /Foalgorithm\CGAlgori thms.obj CGAlgorithms.cpp 
> algorithm\CGAlgorithms.cpp(342) : error C2039: 'min' : is not a
> member of 'std' algorithm\CGAlgorithms.cpp(342) : error C2065: 'min'
> : undeclared identifier algorithm\CGAlgorithms.cpp(343) : error
> C2039: 'min' : is not a member of 'std' 
> algorithm\CGAlgorithms.cpp(344) : error C2039: 'min' : is not a
> member of 'std' algorithm\CGAlgorithms.cpp(350) : error C2039: 'min'
> : is not a member of 'std' algorithm\CGAlgorithms.cpp(351) : error
> C2039: 'min' : is not a member of 'std' 
> algorithm\CGAlgorithms.cpp(352) : error C2039: 'min' : is not a
> member of 'std' NMAKE : fatal error U1077: 'cl' : return code '0x2' 
> Stop.
> 
> 
> Is it posible to compile the code with Mingw32 and MSYS perhaps?

But you're not compiling with MinGW, are you?

>From the output above I see you're using VC++ 6, which is broken.
Honestly, VC++ is an evil if you're playing with C++.

Back to the problem, here you have the explanation:
http://msdn.microsoft.com/library/en-us/vccore/html/vclrfminmaxdefinechange.asp
http://babbage.cs.qc.edu/STL_Docs/algorithm_min.htm

Simply, std::min and std::max simply don't exist in the VC6 version of
STL, because it's a very old and not ISO C++ Standard compliant STL.

AFAIR, you won't be able to build GEOS using Visual C++ 6.0.
For example, geos uses in-place initialization of static const integer
data members, what feature is not supported by VC++ < 7.1 (Visual C++ 2003).

FYI, Recommended version of C++ compiler from Microsoft starts from
Visual C++ 2003 (7.1).

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Theuns at softsim.co.za  Thu Jul 27 09:35:45 2006
From: Theuns at softsim.co.za (Theuns Heydenrych)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Compiling GEOS on win32
Message-ID: <B18F07FB42F0D311BCB900105AC31EFC52DFBD@LTS1>

HI Mateusz

Thanks a milion for this info , and saving me days of frustration and a lot
of hair.

Yes , i tried to compile it with VC++ 6.

But Could i compile it with mingw32 and msys with GCC?

You see i am actualy a delphi programmer and just need a win32 DLL of GEOS
to use in my app.

Thanks

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net]
Sent: 27 July 2006 01:58
To: GEOS Development List
Subject: Re: [geos-devel] Compiling GEOS on win32


Theuns Heydenrych wrote:
> hi I am a newby with GEOS
> 
> I installed svn and downloaded the latest code with svn. When
> compiling the source with nmake i get the following errors.
> 
> Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0 
> Copyright (C) Microsoft Corp 1988-1998. All rights reserved.
> 
> copy ..\capi\geos_c.h.vc ..\capi\geos_c.h 1 file(s) copied. cl
> -Iheaders /MD /GR /O2 /D "NDEBUG" /nologo  /D "NOMINMAX" /D "WIN32_LE
>  AN_AND_MEAN" /D "NOGDI"  /GX /c algorithm\CGAlgorithms.cpp 
> /Foalgorithm\CGAlgori thms.obj CGAlgorithms.cpp 
> algorithm\CGAlgorithms.cpp(342) : error C2039: 'min' : is not a
> member of 'std' algorithm\CGAlgorithms.cpp(342) : error C2065: 'min'
> : undeclared identifier algorithm\CGAlgorithms.cpp(343) : error
> C2039: 'min' : is not a member of 'std' 
> algorithm\CGAlgorithms.cpp(344) : error C2039: 'min' : is not a
> member of 'std' algorithm\CGAlgorithms.cpp(350) : error C2039: 'min'
> : is not a member of 'std' algorithm\CGAlgorithms.cpp(351) : error
> C2039: 'min' : is not a member of 'std' 
> algorithm\CGAlgorithms.cpp(352) : error C2039: 'min' : is not a
> member of 'std' NMAKE : fatal error U1077: 'cl' : return code '0x2' 
> Stop.
> 
> 
> Is it posible to compile the code with Mingw32 and MSYS perhaps?

But you're not compiling with MinGW, are you?

>From the output above I see you're using VC++ 6, which is broken.
Honestly, VC++ is an evil if you're playing with C++.

Back to the problem, here you have the explanation:
http://msdn.microsoft.com/library/en-us/vccore/html/vclrfminmaxdefinechange.
asp
http://babbage.cs.qc.edu/STL_Docs/algorithm_min.htm

Simply, std::min and std::max simply don't exist in the VC6 version of
STL, because it's a very old and not ISO C++ Standard compliant STL.

AFAIR, you won't be able to build GEOS using Visual C++ 6.0.
For example, geos uses in-place initialization of static const integer
data members, what feature is not supported by VC++ < 7.1 (Visual C++ 2003).

FYI, Recommended version of C++ compiler from Microsoft starts from
Visual C++ 2003 (7.1).

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
geos-devel mailing list
geos-devel@geos.refractions.net
http://geos.refractions.net/mailman/listinfo/geos-devel
###########################################

This message has been scanned by F-Secure Anti-Virus for Microsoft Exchange.
For more information, connect to http://www.F-Secure.com/

From pramsey at refractions.net  Thu Jul 27 11:00:48 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] SVN Access failed - updating SWIG bindings
In-Reply-To: <44C855BF.9060407@savagexi.com>
References: <44C0A367.2080700@logix-tt.com> <44C55DD7.7050402@refractions.net>
	<44C5C76C.1070607@logix-tt.com>
	<42F53FD9-7F45-4700-91D9-1ADAFAB237FE@refractions.net>
	<20060726141701.GC39889@keybit.net> <44C7A77B.2080406@refractions.net>
	<44C7BD1A.5030903@loskot.net> <44C7C47A.6050208@savagexi.com>
	<44C7C820.4020602@refractions.net> <44C80693.6040207@loskot.net>
	<44C855BF.9060407@savagexi.com>
Message-ID: <16498589-4417-4A5F-88AC-4218268B6F1B@refractions.net>

Found the problem. The postgis and geos developers are now managed in  
different lists, but I had the geos reposistory still using a postgis- 
developers access control list.

On 26-Jul-06, at 10:57 PM, Charlie Savage wrote:

> Okay, I have the swig generated wrapper files.  But it seems like I  
> can't update the new SVN repository:
>
> svn commit -m Added SWIG generated wrapper files for Ruby and  
> Python python/geos.py python/geos_wrap.cxx ruby/geos_wrap.cxx -- 
> username csavage --password ****** --non-interactive
>
> svn: Commit failed (details follow):
> svn: CHECKOUT of '/geos/!svn/ver/1795/trunk/swig/python':  
> authorization failed (http://svn.refractions.net)
>
> Thanks,
>
> Charlie
>
>
> Mateusz Loskot wrote:
>> Paul Ramsey wrote:
>>> The usual issues apply to putting generated files into the  
>>> repository:
>>> if different people with different swigs generate these files  
>>> they will
>>> potentially clobber each other in the repository and even generate
>>> conflicts.
>>>
>>> A checks out
>>> B checks out
>>> A generates and updates and commits
>>> B generates and updates, conflict!
>> Yes, this is the same situation as keeping ./configure script in the
>> repo and then every run of autogen.sh will introduce problems.
>> If geos.py is generated file, then 'make dist' could operate this
>> file optionally, depending on SWIG wrappers are build or not.
>> Best regards
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From cfis at savagexi.com  Thu Jul 27 12:15:00 2006
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Compiling GEOS on win32
In-Reply-To: <B18F07FB42F0D311BCB900105AC31EFC52DFBD@LTS1>
References: <B18F07FB42F0D311BCB900105AC31EFC52DFBD@LTS1>
Message-ID: <44C8E684.5000402@savagexi.com>

You can compile geos 2.x with mingw32 and msys.  3.0 does not work, 
there are various linking issues that still have to be resolved.

Charlie

Theuns Heydenrych wrote:
> HI Mateusz
> 
> Thanks a milion for this info , and saving me days of frustration and a lot
> of hair.
> 
> Yes , i tried to compile it with VC++ 6.
> 
> But Could i compile it with mingw32 and msys with GCC?
> 
> You see i am actualy a delphi programmer and just need a win32 DLL of GEOS
> to use in my app.
> 
> Thanks
> 
> -----Original Message-----
> From: Mateusz Loskot [mailto:mateusz@loskot.net]
> Sent: 27 July 2006 01:58
> To: GEOS Development List
> Subject: Re: [geos-devel] Compiling GEOS on win32
> 
> 
> Theuns Heydenrych wrote:
>> hi I am a newby with GEOS
>>
>> I installed svn and downloaded the latest code with svn. When
>> compiling the source with nmake i get the following errors.
>>
>> Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0 
>> Copyright (C) Microsoft Corp 1988-1998. All rights reserved.
>>
>> copy ..\capi\geos_c.h.vc ..\capi\geos_c.h 1 file(s) copied. cl
>> -Iheaders /MD /GR /O2 /D "NDEBUG" /nologo  /D "NOMINMAX" /D "WIN32_LE
>>  AN_AND_MEAN" /D "NOGDI"  /GX /c algorithm\CGAlgorithms.cpp 
>> /Foalgorithm\CGAlgori thms.obj CGAlgorithms.cpp 
>> algorithm\CGAlgorithms.cpp(342) : error C2039: 'min' : is not a
>> member of 'std' algorithm\CGAlgorithms.cpp(342) : error C2065: 'min'
>> : undeclared identifier algorithm\CGAlgorithms.cpp(343) : error
>> C2039: 'min' : is not a member of 'std' 
>> algorithm\CGAlgorithms.cpp(344) : error C2039: 'min' : is not a
>> member of 'std' algorithm\CGAlgorithms.cpp(350) : error C2039: 'min'
>> : is not a member of 'std' algorithm\CGAlgorithms.cpp(351) : error
>> C2039: 'min' : is not a member of 'std' 
>> algorithm\CGAlgorithms.cpp(352) : error C2039: 'min' : is not a
>> member of 'std' NMAKE : fatal error U1077: 'cl' : return code '0x2' 
>> Stop.
>>
>>
>> Is it posible to compile the code with Mingw32 and MSYS perhaps?
> 
> But you're not compiling with MinGW, are you?
> 
>>From the output above I see you're using VC++ 6, which is broken.
> Honestly, VC++ is an evil if you're playing with C++.
> 
> Back to the problem, here you have the explanation:
> http://msdn.microsoft.com/library/en-us/vccore/html/vclrfminmaxdefinechange.
> asp
> http://babbage.cs.qc.edu/STL_Docs/algorithm_min.htm
> 
> Simply, std::min and std::max simply don't exist in the VC6 version of
> STL, because it's a very old and not ISO C++ Standard compliant STL.
> 
> AFAIR, you won't be able to build GEOS using Visual C++ 6.0.
> For example, geos uses in-place initialization of static const integer
> data members, what feature is not supported by VC++ < 7.1 (Visual C++ 2003).
> 
> FYI, Recommended version of C++ compiler from Microsoft starts from
> Visual C++ 2003 (7.1).
> 
> Best regards
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060727/cc74dc6d/smime.bin
From mateusz at loskot.net  Thu Jul 27 12:49:02 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Compiling GEOS on win32
In-Reply-To: <B18F07FB42F0D311BCB900105AC31EFC52DFBD@LTS1>
References: <B18F07FB42F0D311BCB900105AC31EFC52DFBD@LTS1>
Message-ID: <44C8EE7E.6050504@loskot.net>

Theuns Heydenrych wrote:
> HI Mateusz
> 
> Thanks a milion for this info , and saving me days of frustration and a lot
> of hair.
> 
> Yes , i tried to compile it with VC++ 6.

One note about VC++ 6, as Norman remined me on
the #postgis channel (thanks Norman) you should be able to build
GEOS with STLport installed:
http://stlport.sourceforge.net/

I've forgot about STLport though I was always using it.
I'd strongly recommend to use STLport when you're usign VC++ 6
this is a very good and up to date implementation of STL.

> But Could i compile it with mingw32 and msys with GCC?

Yes, but I am not able to give you any further instructions because
I've never used GCC on Windows.

> You see i am actualy a delphi programmer and just need a win32 DLL of GEOS
> to use in my app.

So, if you need a GEOS dll + headers only, just download and install
FWTools made by Frank Warmerdam and you will get GEOS with other famos
Open Source GIS dev tools :-)

http://fwtools.maptools.org/

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From strk at refractions.net  Thu Jul 27 21:33:07 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] 2 proposed c-api additions
In-Reply-To: <44B5C6FB.9060407@savagexi.com>
References: <44B5C6FB.9060407@savagexi.com>
Message-ID: <20060728013307.GA48401@keybit.net>

[sorry for late answer]
Ok to add normalize() and equalsExact() to the C-API.
No problem with buffer.xml, it's not even run by 'make check'
(see xmltester/Makefile.am for a list of actually run tests)

--strk;

On Wed, Jul 12, 2006 at 10:07:23PM -0600, Charlie Savage wrote:
> Hi everyone,
> 
> Strk pointed me at the XML test suite as a good source of test data.  So 
>  using Ruby, I now load the xml test cases and can run them through the 
> SWIG bindings which use the c api.
> 
> To do this, however, requires adding 2 methods to the C API.
> 
> The first method is Geometry::normalize which converts a geometry to its 
> cannonincal form.  Without this method, the results from performing 
> operations (like buffer) will be in some undetermined order and thus the 
> test fails since the actual result does not match the expected result. 
> Since this seems to be a generally useful method I'd like to add in to 
> the C API.
> 
> The second method is one I mentioned the other day, equalsExact.  The 
> XMLTestRunner uses this method to verify that the expected and actual 
> results match.  Unfortunately, using equals does not work since it 
> returns false in some cases where equalsExact returns true (you can set 
> a tolerance with equalsExact).  Once again, this seems like a generally 
> useful method so I'd also like to add in to the C API.
> 
> On my local box I have added both of these methods to the C API, and the 
>  SWIG bindings now generate the same results as the C++ API (i've only 
> done some of the tests so far).
> 
> Note that a number of the XML test cases fail using either API.  For 
> example, in buffer.xml roughly half the tests fail.  Is this a problem?
> 
> Charlie
> 
> 
> 
> 
> 



> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


-- 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From strk at refractions.net  Thu Jul 27 21:47:29 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] c api feedback
In-Reply-To: <44B546AF.8000303@savagexi.com>
References: <44B546AF.8000303@savagexi.com>
Message-ID: <20060728014729.GB48401@keybit.net>

On Wed, Jul 12, 2006 at 12:59:59PM -0600, Charlie Savage wrote:
> For what its worth, now that I've gone through the c api for the SWIG 
> bindings, here is some feedback:
> 
> 1.  The methods GEOSCoordSeq_getSize and GEOSCoordSeq_getDimensions 
> return their results by updating a pointer to a size_t parameter.  Thus 
> like this:
> 
> GEOSCoordSeq_getSize(const GEOSCoordSeq s, size_t *size);
> 
> In contrast, these methods just return the result:
> 
> GEOSGeom_getDimensions returns value, not as a parameter
> GEOSGeom_getNumcoordinates
> GEOSGeom_getNumInteriorRings
> GEOSGeom_getNumGeometries
> 
> Seems like an unneeded inconsistency.

Agreed. Unfortunately we really do not want to change any signature.
The rationale for returning to a parameter was to handle exceptions,
since these are inspecting-only methods it seems like
GEOSCoordSeq_getSize and GEOSCoordSeq_getDimension are the weird ones

> 2.  The coordinate sequence api is extremely awkward to use.  Its 
> verbose and results in fairly unreadable code.  Like this:
...
> Could we please expose a simplified for coordinate sequences in the c 
> api?  Such as an "add" method, and while we are at it, shouldn't there 
> also be a remove method?

We're in C land, no overloads.
We might add addPoint2d(double, double) and
addPoint3d(double, double, double)

Yes, we can add  remove (return 0 on exception, 1 on success).

> 3.  A lot of methods, like GEOSDisjoint, return a char.  The char is 0 
> for false, 1 for true and 2 for an exception.  I took that to mean '0', 
> '1', '2'.  In fact its not, its like this:
> 
> (char)1
> 
> Thus if you look at the char is actually '%' (or some such thing).  You 
> of course need to get the int result back by a typecast
> 
> result = (int)GEOSDisjoint
> 
> Maybe this could be better documented?

It can be probably be changed to int w/out harm to existing code...
What do other people think ?

> 4.  Buffer operation now takes quadrant segments.  I had no idea what 
> that should be...hunting through the code it turns out to default to 8. 
>  Do people use the quadrant parameter much?  Seems like an unneeded bit 
> of complexity.  At a minimum, can the default value be exposed as a 
> constant?  That way the SWIG bindings can set a default value for the 
> buffer operation so users can just do geom.buffer(10) and can specify 
> the second parameter only if needed.

Take a circle and split it by a vertical and an horizontal line.
You get 4 quadrants.
How many segments you want to end up in each quadrant when approximating
a circle ?
I suggest you define the constant internally to SWIG, if possible.

> 5.  Two operations that used to be exposed via SWIG are no longer:
> 
> within_distance
> equal_exact

We can add equal_exact (see previous mail).
We do have GEOSDistance().

> 6.  Not very important, but the shape factory is not exposed via the c 
> api.  Not sure if anyone uses it - its used in example.cpp.

example.cpp is for C++ api, don't mess with it ! :)

> 7. The envelopes is not exposed.  I find that one quite useful when 
> dealing with bounding boxes - easier than having to work with a polygon 
> that represents a bounding box.

That would mean defining another abstract data type, and some ops to
manage it. Not a minor tweak. I'd postpone this to when we'll have
indexes exposed (if ever :P)

> Anyway, hope these comments are helpful.

Very much, thanks!
Will you also commit the missing bits ?

--strk;

From strk at refractions.net  Thu Jul 27 21:50:46 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] c api feedback
In-Reply-To: <44B56B6A.7030606@savagexi.com>
References: <44B546AF.8000303@savagexi.com> <44B56B6A.7030606@savagexi.com>
Message-ID: <20060728015046.GC48401@keybit.net>

On Wed, Jul 12, 2006 at 03:36:42PM -0600, Charlie Savage wrote:
> >1.  The methods GEOSCoordSeq_getSize and GEOSCoordSeq_getDimensions 
> >return their results by updating a pointer to a size_t parameter.  Thus 
> >like this:
> >
> >GEOSCoordSeq_getSize(const GEOSCoordSeq s, size_t *size);
> >
> >In contrast, these methods just return the result:
> >
> >GEOSGeom_getDimensions returns value, not as a parameter
> >GEOSGeom_getNumcoordinates
> >GEOSGeom_getNumInteriorRings
> >GEOSGeom_getNumGeometries
> >
> >Seems like an unneeded inconsistency.
> 
> A follow up to this.  The methods like GEOSGeom_genNumcoordinates are 
> defined like this:
> 
> /* Return -1 on exception */
> extern size_t GEOS_DLL GEOSGetNumCoordinates(const GEOSGeom g1);
> 
> However, size_t is defined as:
> 
> typedef unsigned int size_t
> 
> So returning -1 isn't such a good idea is it?  You'd have to type cast 
> to an int first to check the result.

We also don't want to be limited on CoordinateSequence size, I think.
-1 would just be UINT_MAX from limits.h (w/out typecast)
Maybe we should update docs.

--strk;



From strk at refractions.net  Thu Jul 27 21:54:39 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Union problem
In-Reply-To: <44B58488.8020401@savagexi.com>
References: <44B54137.4030508@savagexi.com> <20060712230507.GA42249@keybit.net>
	<44B58488.8020401@savagexi.com>
Message-ID: <20060728015439.GD48401@keybit.net>

On Wed, Jul 12, 2006 at 05:23:52PM -0600, Charlie Savage wrote:

> Why would the union of the same two geometries be different depending on 
>  whether you use the C API versus the C++ API?

The C-API uses a wrapper for binary operations that tries
to handle topology exceptions (usually due to robustness issues).

> >The unhappy messages you're seing are in fact very happy ones :)
> >It's the new code handling robustness problems by trying different
> >reduction or simplification. Your logs seems to reveal that a topology
> >preserving simplification with a tolerance of 0.04 did it.
> >Seems nice (you should look at results to actually tell if we like it)...
> 
> Sorry, don't understand.  Where is this tolerance set in doing a Union? 
>     How do I control it through the C API?

There's no way to control that, it's a "try all you can on topology exception"
approach. See geos/geom/BinaryOp.h for more info.

--strk;

From sungaoyong at gmail.com  Fri Jul 28 02:02:25 2006
From: sungaoyong at gmail.com (=?GB2312?B?y++439PC?=)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] a qt's qmake pro for geos
Message-ID: <82355fc90607272302h4fff008ew4aab85dd83092048@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: geos.pro
Type: application/octet-stream
Size: 8190 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20060728/fd48c4ae/geos.obj
From strk at refractions.net  Sat Jul 29 10:33:26 2006
From: strk at refractions.net (strk@refractions.net)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Re: [postgis-users] newbie GEOS install problem
In-Reply-To: <C9218AFE67211F40913B591EF1337D6B0153C3A5@servermail2.janus2.com>
References: <C9218AFE67211F40913B591EF1337D6B0153C3A5@servermail2.janus2.com>
Message-ID: <20060729143326.GT81842@keybit.net>

It seems a problem with libtool to me.
It doesn't have to do with the already installed PostGIS.

Actually, GEOS has nothing to do with postgis, it's the other
way around (so you should build PostGIS *after* GEOS to get its
functionalities in the database).

This discussion is better done on geos-devel mailing list, I
add it to the reply-to field (hopefully mailman won't replace it)

--strk;


On Fri, Jul 28, 2006 at 03:17:43PM +0100, Leif Isaksen wrote:
> Hello
> 
> I'm trying to install GEOS on Suse 10.0 (64-bit) having already installed PostGIS. I'm having the following problem - ./configure runs OK, but the make command doesn't generate a proper libgeos.so file under source/geom/.libs (or rather it's a link to libgeos.so.2.2.3 which doesn't exist) leading to the following output:
> 
> Making all in bigtest
> make[2]: Entering directory `/usr/local/geos-2.2.3/source/bigtest'
> /bin/sh ../..//libtool --mode=link --tag=CXX g++  -g -O2   -o TestSweepLineSpeed  TestSweepLineSpeed.o GeometryTestFactory.o ../..//source/geom/libgeos.la ../..//source/geom/libgeos.la
> g++ -g -O2 -o .libs/TestSweepLineSpeed TestSweepLineSpeed.o GeometryTestFactory.o  ../..//source/geom/.libs/libgeos.so
> g++: ../..//source/geom/.libs/libgeos.so: No such file or directory
> make[2]: *** [TestSweepLineSpeed] Error 1
> make[2]: Leaving directory `/usr/local/geos-2.2.3/source/bigtest'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/usr/local/geos-2.2.3/source'
> make: *** [all-recursive] Error 1
> leifsvm:/usr/local/geos-2.2.3 #
> 
> Is this because I already have PostGIS installed (and indeed, is it possible to install GEOS post-PostGIS)? I've tried to hunt down an RPM, as suggested on another email on the geos-devel mailing list, but there isn't one for Suse and the Fedora Core version seems to be a complete postGIS/GEOS package. I'm a little reluctant to reinstall PostGIS as I already have data stored in it, but will do so if necessary. Any help or suggestions on this issue would be gratefully received.
> 
> Best regards
> 
> Leif
> 
> 
> 
> This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-users

-- 

 /"\    ASCII Ribbon Campaign
 \ /    Respect for low technology.
  X     Keep e-mail messages readable by any computer system.
 / \    Keep it ASCII. 


From ari.jolma at tkk.fi  Sun Jul 30 15:55:19 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Fri Nov  2 20:53:25 2007
Subject: [geos-devel] Perl bindings via SWIG
Message-ID: <1154289319.44cd0ea74723f@webmail1.hut.fi>

Hello,

Here's a report on building Perl bindings for GEOS on MinGW using the 2.2.3
release. 

Configuration, compilation and installation of GEOS went without problems. Then
I created perl subdir under swig and tried building the bindings. After the
effort a simple test script runs ok. Here's what I did:

1. added 

#ifdef SWIGPERL
%include ../perl/perl.i
#endif

to geos.i

2. created perl.i with just one line (taken from ruby.i):

%rename(next_) geos::GeometryCollectionIterator::next();

3. ran swig (in msys) with arguments: -c++ -perl5 -o geos_wrap.cxx ../geos.i

The resulting geos_wrap.cxx had to be fixed by adding 

#ifdef select
  #undef select
#endif

Around "Workaround perl5 global namespace..."

4. created the test script test.pl (this is one of the python tests):

use Test::More qw(no_plan);

BEGIN{ use_ok( 'geos' ); }

$gf = geos::GeometryFactory->new();
$x = 492187.0;
$y = 4493034.0;
$z = 1500.0;
$c = geos::Coordinate->new($x, $y, $z);
$p = $gf->createPoint($c);
ok($p->{x} == $x);
ok($p->{y} == $y);

5. created very standard Makefile.PL:

use ExtUtils::MakeMaker;

WriteMakefile( 
	       NAME => 'geos',
	       LD => "g++",
	       LIBS => "-lgeos.dll",
	       INC => '-I../../source/headers',
	       OBJECT => 'geos_wrap.o'
	       );

and ran "perl Makefile.PL", which produces the Makefile. That I had to fix with
-Wl,--enable-runtime-pseudo-reloc in the dynamic_lib section in the $(LD)
commands (this could perhaps be fixed already in the Makefile.PL)

Then I just ran "dmake test", which builds the Perl module and runs the test script.

I'll probably do more tests with the module later, but this looks promising --
and the annoying things that I had to fix are assumably non-problems under
Linux. Thanks for Sean and Charlie for setting up the environment.

Regards,

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

