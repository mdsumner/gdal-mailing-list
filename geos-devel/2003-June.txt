From pramsey at refractions.net  Sun Jun  1 23:41:06 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] PostGIS Exception Catching
Message-ID: <0AB6EE84-94AC-11D7-B847-000393D33C2E@refractions.net>

Dave,
Now that we're catching exceptions (I just compiled the CVS postgis and 
geos, no problems, straight install) we should make the return text on 
the pgsql error more instructive.

pramsey=# select relate(g,g) from validtest ;
ERROR:  GEOS relate() threw an error!
pramsey=#

      Paul Ramsey
      Refractions Research
      Email: pramsey@refractions.net
      Phone: (250) 885-0632


From dblasby at refractions.net  Mon Jun  2 12:05:28 2003
From: dblasby at refractions.net (David Blasby)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] PostGIS Exception Catching
In-Reply-To: <0AB6EE84-94AC-11D7-B847-000393D33C2E@refractions.net>
References: <0AB6EE84-94AC-11D7-B847-000393D33C2E@refractions.net>
Message-ID: <3EDB75C8.9080802@refractions.net>

Paul Ramsey wrote:
> Dave,
> Now that we're catching exceptions (I just compiled the CVS postgis and 
> geos, no problems, straight install) we should make the return text on 
> the pgsql error more instructive.
> 
> pramsey=# select relate(g,g) from validtest ;
> ERROR:  GEOS relate() threw an error!
> pramsey=#

Its easy to change - what do you want it to say?

dave


From pramsey at refractions.net  Mon Jun  2 12:33:25 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] PostGIS Exception Catching
In-Reply-To: <3EDB75C8.9080802@refractions.net>
References: <0AB6EE84-94AC-11D7-B847-000393D33C2E@refractions.net>
	<3EDB75C8.9080802@refractions.net>
Message-ID: <3EDB7C55.40501@refractions.net>

Well, since the underlying GEOS code is throwing an exception which 
probably contains a little descriptive text, perhaps parrotting the GEOS 
information would be a good first step.

David Blasby wrote:
> Paul Ramsey wrote:
> 
>> Dave,
>> Now that we're catching exceptions (I just compiled the CVS postgis 
>> and geos, no problems, straight install) we should make the return 
>> text on the pgsql error more instructive.
>>
>> pramsey=# select relate(g,g) from validtest ;
>> ERROR:  GEOS relate() threw an error!
>> pramsey=#
> 
> 
> Its easy to change - what do you want it to say?
> 
> dave



From dblasby at refractions.net  Mon Jun  2 13:27:32 2003
From: dblasby at refractions.net (David Blasby)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] PostGIS Exception Catching
In-Reply-To: <3EDB7C55.40501@refractions.net>
References: <0AB6EE84-94AC-11D7-B847-000393D33C2E@refractions.net>
	<3EDB75C8.9080802@refractions.net> <3EDB7C55.40501@refractions.net>
Message-ID: <3EDB8904.2010906@refractions.net>

Paul Ramsey wrote:
> Well, since the underlying GEOS code is throwing an exception which 
> probably contains a little descriptive text, perhaps parrotting the GEOS 
> information would be a good first step.

As it stands now, there is no exception information comming out of geos.

I'm using

try
    {
      ....
    }
catch (...)
{
}

So I dont know what being thrown from geos.

I think Yuri's todo list has items to make sure that type-catchable 
exception are thrown.  Once that is done, I will have to re-write the 
exception thowing/catching/reporting code substantially.

dave


From pramsey at refractions.net  Mon Jun  2 13:35:40 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] PostGIS Exception Catching
In-Reply-To: <3EDB8904.2010906@refractions.net>
References: <0AB6EE84-94AC-11D7-B847-000393D33C2E@refractions.net>
	<3EDB75C8.9080802@refractions.net> <3EDB7C55.40501@refractions.net>
	<3EDB8904.2010906@refractions.net>
Message-ID: <3EDB8AEC.3040103@refractions.net>

Check the code, I think all exceptions are now explcit classes. I saw 
several new exception classes added in Yury's last pass.
P.


David Blasby wrote:
> Paul Ramsey wrote:
> 
>> Well, since the underlying GEOS code is throwing an exception which 
>> probably contains a little descriptive text, perhaps parrotting the 
>> GEOS information would be a good first step.
> 
> 
> As it stands now, there is no exception information comming out of geos.
> 
> I'm using
> 
> try
>    {
>      ....
>    }
> catch (...)
> {
> }
> 
> So I dont know what being thrown from geos.
> 
> I think Yuri's todo list has items to make sure that type-catchable 
> exception are thrown.  Once that is done, I will have to re-write the 
> exception thowing/catching/reporting code substantially.
> 
> dave
> 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel



From schut at sarvision.com  Wed Jun  4 10:24:59 2003
From: schut at sarvision.com (Vincent Schut)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] geos & gcc
Message-ID: <200306041624.59413.schut@sarvision.com>

Dear developers,

being one of the very brave, I just tried to compile geos/postgis/postgresql. 
I have followed the mailing list, I know about linking postgres with lstdc++ 
etc. etc.
However, on one system (mandrake 9.0) geos compiles, on my other system 
(debian woody) is doesn't. Actually I want to use it on my debian system...
Does geos need gcc >= 3.2 ?
Or any other dependencies for it to compile properly?

Cheers,
Vincent Schut.
-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From pramsey at refractions.net  Wed Jun  4 10:53:20 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] geos & gcc
In-Reply-To: <200306041624.59413.schut@sarvision.com>
Message-ID: <489D9824-969C-11D7-BE72-000393D33C2E@refractions.net>

That's not the problem... I have compiled it on our old Mandrake 8 
system, gcc 2.96.  Have you done the autogen.sh script to build the 
build files? For *that* you do need the latest versions of automake and 
autoconf.
P.

On Wednesday, June 4, 2003, at 07:24 AM, Vincent Schut wrote:

> Dear developers,
>
> being one of the very brave, I just tried to compile 
> geos/postgis/postgresql.
> I have followed the mailing list, I know about linking postgres with 
> lstdc++
> etc. etc.
> However, on one system (mandrake 9.0) geos compiles, on my other system
> (debian woody) is doesn't. Actually I want to use it on my debian 
> system...
> Does geos need gcc >= 3.2 ?
> Or any other dependencies for it to compile properly?
>
> Cheers,
> Vincent Schut.

      Paul Ramsey
      Refractions Research
      Email: pramsey@refractions.net
      Phone: (250) 885-0632


From schut at sarvision.com  Wed Jun  4 10:41:17 2003
From: schut at sarvision.com (Vincent Schut)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] geos & gcc
In-Reply-To: <489D9824-969C-11D7-BE72-000393D33C2E@refractions.net>
References: <489D9824-969C-11D7-BE72-000393D33C2E@refractions.net>
Message-ID: <200306041641.17886.schut@sarvision.com>

I did the autogen.sh, but I suppose debian woody won't have the latest version 
of automake/conf.
I'll try to upgrade them and try again.

Thanks!
Vincent.

On Wednesday 04 June 2003 16:53, Paul Ramsey wrote:
> That's not the problem... I have compiled it on our old Mandrake 8
> system, gcc 2.96.  Have you done the autogen.sh script to build the
> build files? For *that* you do need the latest versions of automake and
> autoconf.
> P.
>
> On Wednesday, June 4, 2003, at 07:24 AM, Vincent Schut wrote:
> > Dear developers,
> >
> > being one of the very brave, I just tried to compile
> > geos/postgis/postgresql.
> > I have followed the mailing list, I know about linking postgres with
> > lstdc++
> > etc. etc.
> > However, on one system (mandrake 9.0) geos compiles, on my other system
> > (debian woody) is doesn't. Actually I want to use it on my debian
> > system...
> > Does geos need gcc >= 3.2 ?
> > Or any other dependencies for it to compile properly?
> >
> > Cheers,
> > Vincent Schut.
>
>       Paul Ramsey
>       Refractions Research
>       Email: pramsey@refractions.net
>       Phone: (250) 885-0632
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From schut at sarvision.com  Wed Jun  4 11:02:02 2003
From: schut at sarvision.com (Vincent Schut)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] geos & gcc
In-Reply-To: <489D9824-969C-11D7-BE72-000393D33C2E@refractions.net>
References: <489D9824-969C-11D7-BE72-000393D33C2E@refractions.net>
Message-ID: <200306041702.02536.schut@sarvision.com>

That was it.
Thanks again.

Regards,
Vincent Schut.

On Wednesday 04 June 2003 16:53, Paul Ramsey wrote:
> That's not the problem... I have compiled it on our old Mandrake 8
> system, gcc 2.96.  Have you done the autogen.sh script to build the
> build files? For *that* you do need the latest versions of automake and
> autoconf.
> P.
>
> On Wednesday, June 4, 2003, at 07:24 AM, Vincent Schut wrote:
> > Dear developers,
> >
> > being one of the very brave, I just tried to compile
> > geos/postgis/postgresql.
> > I have followed the mailing list, I know about linking postgres with
> > lstdc++
> > etc. etc.
> > However, on one system (mandrake 9.0) geos compiles, on my other system
> > (debian woody) is doesn't. Actually I want to use it on my debian
> > system...
> > Does geos need gcc >= 3.2 ?
> > Or any other dependencies for it to compile properly?
> >
> > Cheers,
> > Vincent Schut.
>
>       Paul Ramsey
>       Refractions Research
>       Email: pramsey@refractions.net
>       Phone: (250) 885-0632
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From pramsey at refractions.net  Thu Jun  5 11:43:33 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] Memory Management Fixes
Message-ID: <3EDF6525.70902@refractions.net>

Yury,
What's the ETA on the memory management cleanup?
It would also be good to have the namespace fixes done before we release 
the first beta. Maybe someone other than Yury could volunteer for that one?
P.


From me at yury.ca  Thu Jun  5 14:02:37 2003
From: me at yury.ca (Yury A. Bychkov)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] Memory Management Fixes
References: <3EDF6525.70902@refractions.net>
Message-ID: <007001c32b8c$b93240c0$b9354d18@yury>

Right now I am porting "operation/buffer". That will probably be done sometime
next week.
Memory fixes are scheduled right after that. It's hard to predict how long it
will take me to fix all leaks, but probably about a week unless some complex
problem will appear.
As for the namespace issue: I can do it myself, but if someone else wants to
take it on, I'll not be against it :-). However, I'd like to postpone the
namespace fixes (regardless of whoever does them) until I commit the
"operation/buffer", so that it will not interfere with my current work.

Yury

----- Original Message ----- 
From: "Paul Ramsey" <pramsey@refractions.net>
To: "GEOS Development List" <geos-devel@geos.refractions.net>
Sent: Thursday, June 05, 2003 8:43 AM
Subject: [geos-devel] Memory Management Fixes


> Yury,
> What's the ETA on the memory management cleanup?
> It would also be good to have the namespace fixes done before we release
> the first beta. Maybe someone other than Yury could volunteer for that one?
> P.
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


From dblasby at refractions.net  Thu Jun 12 13:20:39 2003
From: dblasby at refractions.net (David Blasby)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] Valgrind to the rescue
In-Reply-To: <3EDB8AEC.3040103@refractions.net>
References: <0AB6EE84-94AC-11D7-B847-000393D33C2E@refractions.net>
	<3EDB75C8.9080802@refractions.net> <3EDB7C55.40501@refractions.net>
	<3EDB8904.2010906@refractions.net> <3EDB8AEC.3040103@refractions.net>
Message-ID: <3EE8B667.7020608@refractions.net>

Yuri,

I tried valgrind today - its really easy to use and works great!

I highly recommend using it on GEOS - it'll tell you exactly where you 
allocated memory that you didnt free.  It has a whole pile of other tools.

dave



From me at yury.ca  Thu Jun 12 13:32:56 2003
From: me at yury.ca (Yury A. Bychkov)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] Valgrind to the rescue
References: 
	<0AB6EE84-94AC-11D7-B847-000393D33C2E@refractions.net><3EDB75C8.9080802@refractions.net>
	<3EDB7C55.40501@refractions.net><3EDB8904.2010906@refractions.net>
	<3EDB8AEC.3040103@refractions.net> <3EE8B667.7020608@refractions.net>
Message-ID: <003c01c33108$c9bde2b0$b9354d18@yury>

Great. I'll give it a try.

Yury

----- Original Message ----- 
From: "David Blasby" <dblasby@refractions.net>
To: "GEOS Development List" <geos-devel@geos.refractions.net>
Sent: Thursday, June 12, 2003 10:20 AM
Subject: [geos-devel] Valgrind to the rescue


> Yuri,
> 
> I tried valgrind today - its really easy to use and works great!
> 
> I highly recommend using it on GEOS - it'll tell you exactly where you 
> allocated memory that you didnt free.  It has a whole pile of other tools.
> 
> dave
> 
> 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

From pramsey at refractions.net  Fri Jun 13 10:34:40 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] Re: AW: AW: [postgis-users] GEOS Download
In-Reply-To: <5B025B1F39D6D4119F5700508BEEEC66F94756@srsofaioi4546.ktso.ch>
Message-ID: <2AB8AD0D-9DAC-11D7-A069-000393D33C2E@refractions.net>

Horst,
At the time we did the first integration, those functions did not 
exist. :)
Even now buffer is still a work in progress. We are going to do the 
final integration when we have a GEOS cut which is Suitable for Public 
Viewing. IE, when the memory management bug is fixed, when the 
namespaces are in.
Paul

On Friday, June 13, 2003, at 08:27 AM, D?ster Horst wrote:

> OK I found them. But you didn't include the spatial operation 
> functions like
> intersection, union, buffer etc.???
>
> Horst
>
> -----Urspr?ngliche Nachricht-----
> Von: Paul Ramsey [mailto:pramsey@refractions.net]
> Gesendet am: Freitag, 13. Juni 2003 15:28
> An: PostGIS Users Discussion
> Betreff: Re: AW: [postgis-users] GEOS Download
>
> make clean?
> The CVS version really does include GEOS functions, just the predicates
> though, relate, within, etc.
> Paul
>
> On Friday, June 13, 2003, at 02:23 AM, D?ster Horst wrote:
>
>> Paul,
>>
>> I compiled GEOS and PostGIS with success. After compilation of PostGIS
>> with
>> Makefile option USE_GEOS=1 postgis.sql contains no definitions of the
>> GEOS
>> functions. How to integrate the GEOS functions??
>>
>> Horst
>>
>> -----Urspr?ngliche Nachricht-----
>> Von: Paul Ramsey [mailto:pramsey@refractions.net]
>> Gesendet am: Donnerstag, 12. Juni 2003 22:05
>> An: PostGIS Users Discussion
>> Betreff: Re: [postgis-users] GEOS Download
>>
>> Horst,
>> Here's the current CVS as a stop gap...
>> P.
>>
>> D?ster Horst wrote:
>>> I try to download the source of GEOS but due to our security manager
>>> I'm
>> not
>>> able to login the cvs repository. It would be great for me if it is
>> possible
>>> to place a nightly_build.tar.gz at the GEOS page.
>>>
>>>
>>> With best regards
>>>
>>> Dr. Horst D?ster
>>> Leiter
>>> Abteilung SO!GIS Koordination
>>> R?tihof
>>> 4500 Solothurn / Switzerland
>>>
>>> Tel.: 032 627 25 32
>>> Fax: 032 627 22 14
>>>
>>> horst.duester@bd.so.ch <mailto:horst.duester@bd.so.ch>
>>>  <http://www.sogis.so.ch/> www.sogis.so.ch
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> postgis-users mailing list
>>> postgis-users@postgis.refractions.net
>>> http://postgis.refractions.net/mailman/listinfo/postgis-users
>>
>>
>> -- 
>>        __
>>       /
>>       | Paul Ramsey
>>       | Refractions Research
>>       | Email: pramsey@refractions.net
>>       | Phone: (250) 885-0632
>>       \_
>>
>> _______________________________________________
>> postgis-users mailing list
>> postgis-users@postgis.refractions.net
>> http://postgis.refractions.net/mailman/listinfo/postgis-users
>>
>       Paul Ramsey
>       Refractions Research
>       Email: pramsey@refractions.net
>       Phone: (250) 885-0632
>
>
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-users
>
> _______________________________________________
> postgis-users mailing list
> postgis-users@postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-users
>
      Paul Ramsey
      Refractions Research
      Email: pramsey@refractions.net
      Phone: (250) 885-0632


From dblasby at refractions.net  Fri Jun 13 12:58:26 2003
From: dblasby at refractions.net (David Blasby)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] Re: AW: AW: [postgis-users] GEOS Download
In-Reply-To: <2AB8AD0D-9DAC-11D7-A069-000393D33C2E@refractions.net>
References: <2AB8AD0D-9DAC-11D7-A069-000393D33C2E@refractions.net>
Message-ID: <3EEA02B2.1060603@refractions.net>

Paul Ramsey wrote:
>> OK I found them. But you didn't include the spatial operation 
>> functions like
>> intersection, union, buffer etc.???

I'm waiting for GEOS to be finished - that means that buffer() and some 
memory management issues have been fixed.  I expect that to be done in 2 
weeks.

After this I need to write a GEOS geometry to PostGIS geometry 
converter.  The actually inclusion of the functions will only take an 
hour or so.

The GEOS-PostGIS bridge also needs some code refactoring.

dave


From MANUELPRIETOVILLEGAS at telefonica.net  Mon Jun 16 02:53:40 2003
From: MANUELPRIETOVILLEGAS at telefonica.net (MANUELPRIETOVILLEGAS@telefonica.net)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] License question
Message-ID: <a5b07a1d22.a1d22a5b07@teleline.es>

Under wich license (GPL, LGPL, BSD, etc) will GEOS be released?



From cdlee at ms16.url.com.tw  Thu Jun 19 06:11:05 2003
From: cdlee at ms16.url.com.tw (cdlee)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] It is slowly to read in the geometry from WKT
Message-ID: <000801c3364b$1ac6d030$7801a8c0@orange>

Hi all,
  i have a WKT file with 4M in size, it took GEOS 10 minutes to read the geometries in, by the other way, it took JTS less than 20 seconds, the following is my program, what is wrong?



#include<fstream>
#include<io.h>
#inlcude<geom.h>

using namespace std;

const int MAX_WKT_SIZE = 5000000;

int main(int argc, char** argv)
{
  char cWKT[MAX_WKT_SIZE];

  ifstream inFile("test.txt");
  WKTReader WKTRdr;

  while(inFile.getline(cWKT, MAX_WKT_SIZE) != NULL)
  {
    string sWKT(cWKT);
    Polygon* p = (Polygon*) WKTRdr.read(sWKT);
    cout << p->getArea() << endl;
    delete p;
  }

  return 0;
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20030619/ea35bb2a/attachment.html
From schut at sarvision.com  Thu Jun 19 06:18:17 2003
From: schut at sarvision.com (Vincent Schut)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] It is slowly to read in the geometry from WKT
In-Reply-To: <000801c3364b$1ac6d030$7801a8c0@orange>
References: <000801c3364b$1ac6d030$7801a8c0@orange>
Message-ID: <200306191218.17023.schut@sarvision.com>

I am experiencing the same while playing around with geos and am very curious 
about a solution... Anybody knows?

Cheers,
Vincent.

On Thursday 19 June 2003 12:11, cdlee wrote:
> Hi all,
>   i have a WKT file with 4M in size, it took GEOS 10 minutes to read the
> geometries in, by the other way, it took JTS less than 20 seconds, the
> following is my program, what is wrong?
>
>
>
> #include<fstream>
> #include<io.h>
> #inlcude<geom.h>
>
> using namespace std;
>
> const int MAX WKT SIZE = 5000000;
>
> int main(int argc, char** argv)
> {
>   char cWKT[MAX WKT SIZE];
>
>   ifstream inFile("test.txt");
>   WKTReader WKTRdr;
>
>   while(inFile.getline(cWKT, MAX WKT SIZE) != NULL)
>   {
>     string sWKT(cWKT);
>     Polygon* p = (Polygon*) WKTRdr.read(sWKT);
>     cout << p->getArea() << endl;
>     delete p;
>   }
>
>   return 0;
> }

-- 
______________________________________
Vincent Schut
Sarvision B.V.
Wageningen, The Netherlands
www.sarvision.com

From cdlee at ms16.url.com.tw  Thu Jun 19 06:24:16 2003
From: cdlee at ms16.url.com.tw (cdlee)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] ReSend "It is slowly to read in the geometry from WKT"
Message-ID: <003e01c3364c$f006fcb0$7801a8c0@orange>

Hi all,
  i have a WKT file with 4M in size, it took GEOS 10 minutes to read the
geometries in, by the other way, it took JTS less than 20 seconds, the
following is my program, what is wrong?



#include<fstream>
#include<io.h>
#inlcude<geom.h>

using namespace std;

const int MAX_WKT_SIZE = 5000000;

int main(int argc, char** argv)
{
  char cWKT[MAX_WKT_SIZE];

  ifstream inFile("test.txt");
  WKTReader WKTRdr;

  while(inFile.getline(cWKT, MAX_WKT_SIZE) != NULL)
  {
    string sWKT(cWKT);
    Polygon* p = (Polygon*) WKTRdr.read(sWKT);
    cout << p->getArea() << endl;
    delete p;
  }

  return 0;
}


From Kevin.Wiebe at safe.com  Sat Jun 21 02:27:15 2003
From: Kevin.Wiebe at safe.com (Kevin Wiebe)
Date: Fri Nov  2 20:52:07 2007
Subject: [geos-devel] GEOS robustness question
Message-ID: <CB8D74468A40754791B9F85EAE581CE501527CFE@van-e2k1.safe.internal>

Hi all,

<chit_chat>
I have been following JTS development from the beginning, and now also GEOS.

I have been primarily lurking, like many of us I presume, cheering on Yuri and others yet contributing little.

My interest has mostly been around robustness issues.  This is where I have plenty of experience.  I will be interested to do more testing once buffer is completed.
<\chit_chat>

A question I am hoping someone can quickly answer is if there is an isolated method in the code that compares two polylines (line strings with more than two points) to see if they cross over each other.  (Not if they "touch", but if they fully cross over.)

If so, where is this method located?  I would like to see how robust the algorithm, data structures, etc. is, especially with respect to finite precision math.

If you'd like, I'll post my thoughts after I look through it.

Thanks,
-Kevin-

p.s.  Here's my contribution today...
The Visual Studio projects that are in CVS are a bit out of date.  They need to include some of the newer exception files.  Also, the projects should include the /GR (RTTI) compiler option, as the code checks object types at runtime in several places.  (AbstractSTRtree.cpp line 122, for example.)  Without this option we will get "unpredictable behaviour".

-Kevin-

----------------------------------------------------------------
 Kevin Wiebe???? Safe Software Inc.???????email:kevinAtsafe.com
????? Senior???? Surrey, BC, CANADA?????? phone: (604) 501-9985
?? Developer???? http://www.safe.com??????? fax: (604) 501-9965
----------------------------------------------------------------



From nhv at cape.com  Sat Jun 21 15:15:08 2003
From: nhv at cape.com (Norman Vine)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] source/geom/Makefile.am
In-Reply-To: <CB8D74468A40754791B9F85EAE581CE501527CFE@van-e2k1.safe.internal>
Message-ID: <EKEJIKAILPONGGENMBGAOENPDMAA.nhv@cape.com>

for gcc users

Attached find replacement source/geom/Makefile.am
for current CVS files < 2003-06-19 13:54  ybychkov >

Yury

I realize change logs are a pain but if in the future you would 
annotate the log to at least denote 'new' or 'deleted' files,
it would make life easier  :-)

Cheers

Norman
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Makefile.am
Type: application/octet-stream
Size: 5967 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20030621/96816fbe/Makefile.obj
From pramsey at refractions.net  Sat Jun 21 18:26:49 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] source/geom/Makefile.am
In-Reply-To: <EKEJIKAILPONGGENMBGAOENPDMAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAOENPDMAA.nhv@cape.com>
Message-ID: <3EF4DBA9.6010403@refractions.net>

File applied to CVS.
P.

Norman Vine wrote:
> for gcc users
> 
> Attached find replacement source/geom/Makefile.am
> for current CVS files < 2003-06-19 13:54  ybychkov >
> 
> Yury
> 
> I realize change logs are a pain but if in the future you would 
> annotate the log to at least denote 'new' or 'deleted' files,
> it would make life easier  :-)
> 
> Cheers


-- 
       __
      /
      | Paul Ramsey
      | Refractions Research
      | Email: pramsey@refractions.net
      | Phone: (250) 885-0632
      \_


From pramsey at refractions.net  Sat Jun 21 18:32:53 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] GEOS robustness question
In-Reply-To: <CB8D74468A40754791B9F85EAE581CE501527CFE@van-e2k1.safe.internal>
References: <CB8D74468A40754791B9F85EAE581CE501527CFE@van-e2k1.safe.internal>
Message-ID: <3EF4DD15.5020805@refractions.net>

Kevin Wiebe wrote:

> A question I am hoping someone can quickly answer is if there is an
> isolated method in the code that compares two polylines (line strings
> with more than two points) to see if they cross over each other.
> (Not if they "touch", but if they fully cross over.)
> 
> If so, where is this method located?  I would like to see how robust
> the algorithm, data structures, etc. is, especially with respect to
> finite precision math.

I will risk showing my ignorance here:

Geometry->crosses() appears to be the thing.

-- 
       __
      /
      | Paul Ramsey
      | Refractions Research
      | Email: pramsey@refractions.net
      | Phone: (250) 885-0632
      \_


From mbdavis at VividSolutions.com  Mon Jun 23 13:10:34 2003
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] GEOS robustness question
Message-ID: <5A94289A9268514C8D6C0F1FF44BA0271DF7EA@venus.VividSolutions.com>

Paul is right, in that the crosses() predicate reports whether two lines strings properly cross or not.

In fact, all the named predicates are implemented in terms of the basic relate() method, which evaluates them all in the same way.  You will find that the implementation is fully robust, by virtue of using a robust line segment intersection test and carefully coding to evaluate all possible ways geometrys can interact.  This is documented in the JTS materials.

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.
Suite #1A-2328 Government Street   Victoria, B.C.   V8T 5G5
Phone: (250) 385 6040    Fax: (250) 385 6046
EMail: mbdavis@vividsolutions.com  Web: www.vividsolutions.com


> -----Original Message-----
> From: Kevin Wiebe [mailto:Kevin.Wiebe@safe.com]
> Sent: Friday, June 20, 2003 11:27 PM
> To: geos-devel@geos.refractions.net
> Subject: [geos-devel] GEOS robustness question
> 
> 
> Hi all,
> 
> <chit_chat>
> I have been following JTS development from the beginning, and 
> now also GEOS.
> 
> I have been primarily lurking, like many of us I presume, 
> cheering on Yuri and others yet contributing little.
> 
> My interest has mostly been around robustness issues.  This 
> is where I have plenty of experience.  I will be interested 
> to do more testing once buffer is completed.
> <\chit_chat>
> 
> A question I am hoping someone can quickly answer is if there 
> is an isolated method in the code that compares two polylines 
> (line strings with more than two points) to see if they cross 
> over each other.  (Not if they "touch", but if they fully cross over.)
> 
> If so, where is this method located?  I would like to see how 
> robust the algorithm, data structures, etc. is, especially 
> with respect to finite precision math.
> 
> If you'd like, I'll post my thoughts after I look through it.
> 
> Thanks,
> -Kevin-
> 
> p.s.  Here's my contribution today...
> The Visual Studio projects that are in CVS are a bit out of 
> date.  They need to include some of the newer exception 
> files.  Also, the projects should include the /GR (RTTI) 
> compiler option, as the code checks object types at runtime 
> in several places.  (AbstractSTRtree.cpp line 122, for 
> example.)  Without this option we will get "unpredictable behaviour".
> 
> -Kevin-
> 
> ----------------------------------------------------------------
>  Kevin Wiebe???? Safe Software Inc.???????email:kevinAtsafe.com
> ????? Senior???? Surrey, BC, CANADA?????? phone: (604) 501-9985
> ?? Developer???? http://www.safe.com??????? fax: (604) 501-9965
> ----------------------------------------------------------------
> 
> 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 

From Kevin.Wiebe at safe.com  Mon Jun 23 19:08:36 2003
From: Kevin.Wiebe at safe.com (Kevin Wiebe)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] GEOS robustness question
Message-ID: <CB8D74468A40754791B9F85EAE581CE501527D0D@van-e2k1.safe.internal>

> Paul is right, in that the crosses() predicate reports 
> whether two lines strings properly cross or not.
> 
> In fact, all the named predicates are implemented in terms 
> of the basic relate() method, which evaluates them all in 
> the same way.  You will find that the implementation is 
> fully robust, by virtue of using a robust line segment 
> intersection test and carefully coding to evaluate all 
> possible ways geometrys can interact.  This is documented 
> in the JTS materials.
> 
> Martin Davis, Senior Technical Architect
> Vivid Solutions Inc.
> Suite #1A-2328 Government Street   Victoria, B.C.   V8T 5G5
> Phone: (250) 385 6040    Fax: (250) 385 6046
> EMail: mbdavis@vividsolutions.com  Web: www.vividsolutions.com
 

Martin, your answer has taught me to ask a more intelligent question.

It appears obvious that the upper level calls on Geometry objects do not have a direct correspondence to underlying "core" algorithms.  I guess what I am looking for is some part of the core code, probably in the "algorithm" directory, where the lowest level computations are being done.

I may have to study many complex structures to understand how things are done, but I'm prepared.  I hope.

I think the previous "lines crossing" question was a bit too vague.  I'm not trying to hunt down a single algorithm; I am just looking for the core algorithms that do this "type" of thing.

Instead, maybe I can ask for the sections of code that would distinguish between a line that "meets" a polygon (stays outside, but touches the border) and a line that "cuts through" a polygon (part of the line inside, and part outside).  For argument's sake, let's say all the vertices on the line are outside the polygon.

Pointers to a file, a method, a line of code :), or a general walk through how this decision is done, internally, would be helpful.

-Kevin-

----------------------------------------------------------------
 Kevin Wiebe???? Safe Software Inc.???????email:kevinAtsafe.com
????? Senior???? Surrey, BC, CANADA?????? phone: (604) 501-9985
?? Developer???? http://www.safe.com??????? fax: (604) 501-9965
----------------------------------------------------------------



From mbdavis at VividSolutions.com  Mon Jun 23 19:09:34 2003
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] GEOS robustness question
Message-ID: <5A94289A9268514C8D6C0F1FF44BA0271DF7F4@venus.VividSolutions.com>

Kevin,  I'm afraid I don't have the time right now to provide a detailed explanation.  If you start browsing the relate classes you'll find the code you're looking for.  Best to look at JTS, I think - the algorithms are the same and the syntax is clearer.  Get an IDE which helps you drill down through the code.

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.
Suite #1A-2328 Government Street   Victoria, B.C.   V8T 5G5
Phone: (250) 385 6040    Fax: (250) 385 6046
EMail: mbdavis@vividsolutions.com  Web: www.vividsolutions.com


> -----Original Message-----
> From: Kevin Wiebe [mailto:Kevin.Wiebe@safe.com]
> Sent: Monday, June 23, 2003 4:09 PM
> To: geos-devel@geos.refractions.net
> Subject: [geos-devel] GEOS robustness question
> 
> 
> > Paul is right, in that the crosses() predicate reports 
> > whether two lines strings properly cross or not.
> > 
> > In fact, all the named predicates are implemented in terms 
> > of the basic relate() method, which evaluates them all in 
> > the same way.  You will find that the implementation is 
> > fully robust, by virtue of using a robust line segment 
> > intersection test and carefully coding to evaluate all 
> > possible ways geometrys can interact.  This is documented 
> > in the JTS materials.
> > 
> > Martin Davis, Senior Technical Architect
> > Vivid Solutions Inc.
> > Suite #1A-2328 Government Street   Victoria, B.C.   V8T 5G5
> > Phone: (250) 385 6040    Fax: (250) 385 6046
> > EMail: mbdavis@vividsolutions.com  Web: www.vividsolutions.com
>  
> 
> Martin, your answer has taught me to ask a more intelligent question.
> 
> It appears obvious that the upper level calls on Geometry 
> objects do not have a direct correspondence to underlying 
> "core" algorithms.  I guess what I am looking for is some 
> part of the core code, probably in the "algorithm" directory, 
> where the lowest level computations are being done.
> 
> I may have to study many complex structures to understand how 
> things are done, but I'm prepared.  I hope.
> 
> I think the previous "lines crossing" question was a bit too 
> vague.  I'm not trying to hunt down a single algorithm; I am 
> just looking for the core algorithms that do this "type" of thing.
> 
> Instead, maybe I can ask for the sections of code that would 
> distinguish between a line that "meets" a polygon (stays 
> outside, but touches the border) and a line that "cuts 
> through" a polygon (part of the line inside, and part 
> outside).  For argument's sake, let's say all the vertices on 
> the line are outside the polygon.
> 
> Pointers to a file, a method, a line of code :), or a general 
> walk through how this decision is done, internally, would be helpful.
> 
> -Kevin-
> 
> ----------------------------------------------------------------
>  Kevin Wiebe???? Safe Software Inc.???????email:kevinAtsafe.com
> ????? Senior???? Surrey, BC, CANADA?????? phone: (604) 501-9985
> ?? Developer???? http://www.safe.com??????? fax: (604) 501-9965
> ----------------------------------------------------------------
> 
> 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 

From pramsey at refractions.net  Tue Jun 24 11:21:34 2003
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] Almost Release Time
Message-ID: <3EF86C7E.1030805@refractions.net>


Now that namespaces are in, the only outstanding development issue which 
prevents me from bundling a beta release is the memory management 
problem. Until that is resolved, we cannot release a GEOS/PostGIS system 
(as PostGIS will leak like a sieve).

What is the ETA on the memory fix?

Paul

-- 
       __
      /
      | Paul Ramsey
      | Refractions Research
      | Email: pramsey@refractions.net
      | Phone: (250) 885-0632
      \_


From mbdavis at VividSolutions.com  Tue Jun 24 11:18:27 2003
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] Almost Release Time
Message-ID: <5A94289A9268514C8D6C0F1FF44BA0271DF7F7@venus.VividSolutions.com>

Yury is working on memory mngmt fixes right now (which we would all know if he'd posted a status report this week - Yury, could you please do that?).  Not sure what the ETA is - Yury, do you have an estimate?

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.
Suite #1A-2328 Government Street   Victoria, B.C.   V8T 5G5
Phone: (250) 385 6040    Fax: (250) 385 6046
EMail: mbdavis@vividsolutions.com  Web: www.vividsolutions.com


> -----Original Message-----
> From: Paul Ramsey [mailto:pramsey@refractions.net]
> Sent: Tuesday, June 24, 2003 8:22 AM
> To: GEOS Development List
> Subject: [geos-devel] Almost Release Time
> 
> 
> 
> Now that namespaces are in, the only outstanding development 
> issue which 
> prevents me from bundling a beta release is the memory management 
> problem. Until that is resolved, we cannot release a 
> GEOS/PostGIS system 
> (as PostGIS will leak like a sieve).
> 
> What is the ETA on the memory fix?
> 
> Paul
> 
> -- 
>        __
>       /
>       | Paul Ramsey
>       | Refractions Research
>       | Email: pramsey@refractions.net
>       | Phone: (250) 885-0632
>       \_
> 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 

From Kevin.Wiebe at safe.com  Tue Jun 24 15:45:56 2003
From: Kevin.Wiebe at safe.com (Kevin Wiebe)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] GEOS robustness question
Message-ID: <CB8D74468A40754791B9F85EAE581CE501527D1A@van-e2k1.safe.internal>

> Kevin,  I'm afraid I don't have the time right now to provide a
> detailed explanation.  If you start browsing the relate classes
> you'll find the code you're looking for.  Best to look at JTS,
> I think - the algorithms are the same and the syntax is clearer.
> Get an IDE which helps you drill down through the code.
> 
> Martin Davis, Senior Technical Architect
> Vivid Solutions Inc.
> Suite #1A-2328 Government Street   Victoria, B.C.   V8T 5G5
> Phone: (250) 385 6040    Fax: (250) 385 6046
> EMail: mbdavis@vividsolutions.com  Web: www.vividsolutions.com

Thanks, Martin.

I've drilled around for a while already and I guess I was just trying to get some confirmation on what I've seen.  It looks to me like fairly complex intersection/topology/graph structures are created and the entire matrix is correctly populated for every predicate call.  That is, it seems all of the squares in the matrix are determined even though the specific predicate called really doesn't care about some of the entries.  It also appears that intersection points are generated when one wants to know if two shapes cross or intersect.  It also appears that if I want to call a predicate on A&B, followed by one on A&C, it is not possible to cache any intermediate processing on A between calls, like the monotone chains, spatial indexes, and the like.

Don't take this to be criticism as much as the recognition that solutions to difficult operations such as these don't come with simple algorithms.

I'll keep digging, but feel free to correct me if my view so far is off.

-Kevin-

----------------------------------------------------------------
 Kevin Wiebe???? Safe Software Inc.???????email:kevinAtsafe.com
????? Senior???? Surrey, BC, CANADA?????? phone: (604) 501-9985
?? Developer???? http://www.safe.com??????? fax: (604) 501-9965
----------------------------------------------------------------


From mbdavis at VividSolutions.com  Tue Jun 24 15:48:45 2003
From: mbdavis at VividSolutions.com (Martin Davis)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] GEOS robustness question
Message-ID: <5A94289A9268514C8D6C0F1FF44BA0271DF804@venus.VividSolutions.com>

> It looks to me like fairly complex intersection/topology/graph structures are created

Um, yeah, it's complex processing

> the entire matrix is correctly populated for every predicate call.

Yep.  There is the chance to do some optimization if the predicate called for doesn't require all matrix entries.  For most preds however this won't make much time difference, I believe - the critical step is the intersection determination

> It also appears that intersection points are generated when one wants to know if two shapes cross or intersect.

Nope.  The intersection points are not generated explicitly - only the topology of the intersection is computed (e.g. proper or at endpoint of one or both

> It also appears that if I want to call a 
> predicate on A&B, followed by one on A&C, it is not possible 
> to cache any intermediate processing on A between calls, like 
> the monotone chains, spatial indexes, and the like.

Correct.  Would be nice to open this up so that intermediate results can be cached.  In the plans for JTS...

Thanks for the comments, Kevin.  

Martin Davis, Senior Technical Architect
Vivid Solutions Inc.
Suite #1A-2328 Government Street   Victoria, B.C.   V8T 5G5
Phone: (250) 385 6040    Fax: (250) 385 6046
EMail: mbdavis@vividsolutions.com  Web: www.vividsolutions.com


 

From me at yury.ca  Wed Jun 25 05:01:46 2003
From: me at yury.ca (Yury A. Bychkov)
Date: Fri Nov  2 20:52:08 2007
Subject: [geos-devel] Status
References: <3EF86C7E.1030805@refractions.net>
Message-ID: <00e701c33af8$6b1dee90$b9354d18@yury>

I am working on memory management fixes now. It's going well, so, unless
something goes wrong, I expect it to be finished in a week or so.

Yury
P.S. I found a bug in the operation/buffer today. I'll fix it after the memory
management is done, unless someone really needs 'buffer' to work ASAP.

----- Original Message ----- 
From: "Paul Ramsey" <pramsey@refractions.net>
To: "GEOS Development List" <geos-devel@geos.refractions.net>
Sent: Tuesday, June 24, 2003 8:21 AM
Subject: [geos-devel] Almost Release Time


>
> Now that namespaces are in, the only outstanding development issue which
> prevents me from bundling a beta release is the memory management
> problem. Until that is resolved, we cannot release a GEOS/PostGIS system
> (as PostGIS will leak like a sieve).
>
> What is the ETA on the memory fix?
>
> Paul
>
> -- 
>        __
>       /
>       | Paul Ramsey
>       | Refractions Research
>       | Email: pramsey@refractions.net
>       | Phone: (250) 885-0632
>       \_
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel


