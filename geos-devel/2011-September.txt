From mohammedrashadkm at gmail.com  Sat Sep  3 01:36:51 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sat Sep  3 03:53:04 2011
Subject: [geos-devel] open dataset
Message-ID: <CANNqv9fqUD3Nk_G63gY8wpWZjDcVNqwewMJCYuZP5V_TDP-hzg@mail.gmail.com>

Hi all,
I am new to GEOS. How to open ant vector data using GEOS

-- 
Regards,
   Mohammed Rashad K M
   M.S. (By Research) student
   Lab for Spatial Informatics
   Department of CSE
   International Institute of Information Technology
   Hyderabad, India
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20110903/f3bc828c/attachment.html
From warmerdam at pobox.com  Sat Sep  3 01:46:14 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Sep  3 04:02:16 2011
Subject: [geos-devel] open dataset
In-Reply-To: <CANNqv9fqUD3Nk_G63gY8wpWZjDcVNqwewMJCYuZP5V_TDP-hzg@mail.gmail.com>
References: <CANNqv9fqUD3Nk_G63gY8wpWZjDcVNqwewMJCYuZP5V_TDP-hzg@mail.gmail.com>
Message-ID: <4E61BF26.7020808@pobox.com>

On 11-09-02 10:36 PM, Mohammed Rashad wrote:
> Hi all,
> I am new to GEOS. How to open ant vector data using GEOS

Mohammed,

GEOS does not read GIS data.  It is only used to represent and operate
on geometries.  You can instantiate a geometry programatically, adding
points, lines, etc or you can instantiate a geometry from an OGC WKT
(Well Known Text) or WKB (Well Known Binary) format.

A rather abbreviated example can be seen in the C API unit tests
(from geos/tests/unit/capi/GEOSContainsTest.cpp):

#include <geos_c.h>

...

         GEOSGeometry* geom1_;
         GEOSGeometry* geom2_;

         geom1_ = GEOSGeomFromWKT("MULTIPOLYGON(((0 0,0 10,10 10,10 0,0 0)))");
         geom2_ = GEOSGeomFromWKT("POLYGON((1 1,1 2,2 2,2 1,1 1))");

         char const r1 = GEOSContains(geom1_, geom2_);

If you want to read traditional GIS vector formats you might find the OGR
portion of the GDAL/OGR library useful.  More details on it are available at

   http://www.gdal.org/

It can read GIS formats, and return the geometries of individual features
in WKT or WKB format for subsequent use with GEOS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From geos-trac at osgeo.org  Sun Sep  4 01:56:16 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sun Sep  4 05:32:44 2011
Subject: [geos-devel] [GEOS] #472: Can't compile under Windows mingw
Message-ID: <044.7204319141a6fdfd5a34c304981b32be@osgeo.org>

#472: Can't compile under Windows mingw
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Can't remember the last time I tried.  I can still compile 3.3 branch
 okay.

 I tried compiling r3463 and get below error:


 {{{
 XMLTester-SingleSidedBufferResultMatcher.o: In function
 `ZN4geos9xmltester30Sing
 leSidedBufferResultMatcher38isBoundaryHausdorffDistanceInToleranceERKNS_4geom8Ge
 ometryES5_d':
 C:/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_uni
 nitialized.h:1058: undefined reference to
 `geos::geom::Coordinate::~Coordinate()                         '
 XMLTester-SingleSidedBufferResultMatcher.o: In function
 `ZN4geos9xmltester30Sing
 leSidedBufferResultMatcher38isBoundaryHausdorffDistanceInToleranceERKNS_4geom8Ge
 ometryES5_d':
 C:/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_con
 struct.h:107: undefined reference to
 `geos::geom::Coordinate::~Coordinate()'
 C:/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_con
 struct.h:107: undefined reference to
 `geos::geom::Coordinate::~Coordinate()'
 C:/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/c++/3.4.5/bits/stl_con
 struct.h:107: undefined reference to
 `geos::geom::Coordinate::~Coordinate()'
 collect2: ld returned 1 exit status
 make[2]: *** [XMLTester.exe] Error 1
 make[2]: Leaving directory `/c/projects/geos/trunk/tests/xmltester'
 make[1]: *** [all-recursive] Error 1
 make[1]: Leaving directory `/c/projects/geos/trunk/tests'
 make: *** [all-recursive] Error 1
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/472>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sun Sep  4 13:48:02 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sun Sep  4 18:03:55 2011
Subject: [geos-devel] [GEOS] #473: RightmostEdgeFiner assertion killing
	postgres process
Message-ID: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>

#473: RightmostEdgeFiner assertion killing postgres process
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 I'm running 3.3.1 dev r3463 on windows (PostGIS 1.5.3)

 and I have an intensive process that is crashing my postgres process. I
 think this might have been an issue in 3.3.0 release too because I was
 hoping to halt my crashing by swapping the GEOS.

 The error log reads this before it kicks the bucket and then it kills all
 postgres processes and doesn't even automatically restart:

 {{{
 Assertion failed: checked>0, file RightmostEdgeFinder.cpp, line 77

 This application has requested the Runtime to terminate it in an unusual
 way.
 Please contact the application's support team for more information.
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/473>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sun Sep  4 13:48:13 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sun Sep  4 18:04:04 2011
Subject: [geos-devel] Re: [GEOS] #473: RightmostEdgeFinder assertion killing
 postgres
 process (was: RightmostEdgeFiner assertion killing postgres process)
In-Reply-To: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>
References: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>
Message-ID: <053.aa4980ff565a5d637c072b5550ac8a3f@osgeo.org>

#473: RightmostEdgeFinder assertion killing postgres process
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/473#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep  6 14:09:33 2011
From: geos-trac at osgeo.org (GEOS)
Date: Tue Sep  6 14:50:29 2011
Subject: [geos-devel] Re: [GEOS] #473: RightmostEdgeFinder assertion killing
 postgres process
In-Reply-To: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>
References: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>
Message-ID: <053.62e4e2e19ac7954992a2af038af2f6da@osgeo.org>

#473: RightmostEdgeFinder assertion killing postgres process
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Any way to isolate the offending operation and operands would be crucial

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/473#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From osm-lists at mazdermind.de  Tue Sep  6 16:07:10 2011
From: osm-lists at mazdermind.de (=?ISO-8859-1?Q?Peter_K=F6rner?=)
Date: Tue Sep  6 17:24:46 2011
Subject: [geos-devel] possible memory leak in InteriorPointArea
Message-ID: <4E667D6E.7070906@mazdermind.de>

Hi guys!

I guess I'm just using the InteriorPointArea wrong, but I get a 
memory-leak reported in valgrind:

==2887== 168 (48 direct, 120 indirect) bytes in 1 blocks are definitely 
lost in loss record 26 of 27
==2887==    at 0x4C28B42: operator new(unsigned long) 
(vg_replace_malloc.c:261)
==2887==    by 0x5BB3622: 
geos::geom::GeometryFactory::createLineString(geos::geom::CoordinateSequence*) 
const (in /usr/lib/libgeos-3.2.0.so)
==2887==    by 0x5B9DE12: 
geos::algorithm::InteriorPointArea::addPolygon(geos::geom::Geometry 
const*) (in /usr/lib/libgeos-3.2.0.so)
==2887==    by 0x5B9DFF9: 
geos::algorithm::InteriorPointArea::InteriorPointArea(geos::geom::Geometry 
const*) (in /usr/lib/libgeos-3.2.0.so)
==2887==    by 0x413F10: ImportHandler::write_way() (handler.hpp:397)
==2887==    by 0x414B0B: 
Osmium::Input::XML<ImportHandler>::end_element_wrapper(void*, char 
const*) (handler.hpp:328)
==2887==    by 0x4E398E4: ??? (in /lib/x86_64-linux-gnu/libexpat.so.1.5.2)
==2887==    by 0x4E3A77D: ??? (in /lib/x86_64-linux-gnu/libexpat.so.1.5.2)
==2887==    by 0x4E3C6E1: XML_ParseBuffer (in 
/lib/x86_64-linux-gnu/libexpat.so.1.5.2)
==2887==    by 0x414CB0: Osmium::Input::XML<ImportHandler>::parse() 
(xml.hpp:98)
==2887==    by 0x4121AF: void 
Osmium::OSMFile::read<ImportHandler>(ImportHandler&) (osmfile_impl.hpp:35)
==2887==    by 0x4071BB: main (importer.cpp:59)




The relevant code lines are as follows:

// calculate interior point
try {
	geos::geom::Coordinate center;
	geos::algorithm::InteriorPointArea interior_calculator(poly);
	interior_calculator.getInteriorPoint(center);

	// write interior point
	line << "SRID=900913;POINT(" << center.x << ' ' << center.x << ')';
} catch(geos::util::GEOSException e) {
	std::cerr << "error calculating interior point: " << e.what() << std::endl;
	line << "\\N";
}



Looking at InteriorPointArea.cpp I really don't see where an "operator 
new" could be called. Anyone some ideas what's happening here?

Peter

From strk at keybit.net  Wed Sep  7 10:35:55 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed Sep  7 12:24:28 2011
Subject: [geos-devel] possible memory leak in InteriorPointArea
In-Reply-To: <4E667D6E.7070906@mazdermind.de>
References: <4E667D6E.7070906@mazdermind.de>
Message-ID: <20110907143529.GA16353@gnash>

On Tue, Sep 06, 2011 at 10:07:10PM +0200, Peter K?rner wrote:
> Hi guys!
> 
> I guess I'm just using the InteriorPointArea wrong, but I get a
> memory-leak reported in valgrind:
> 
> ==2887== 168 (48 direct, 120 indirect) bytes in 1 blocks are
> definitely lost in loss record 26 of 27
> ==2887==    at 0x4C28B42: operator new(unsigned long)
> (vg_replace_malloc.c:261)
> ==2887==    by 0x5BB3622: geos::geom::GeometryFactory::createLineString(geos::geom::CoordinateSequence*)
> const (in /usr/lib/libgeos-3.2.0.so)
...

Build with debugging symbols on (-g option to GCC).

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Wed Sep  7 11:04:22 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep  7 12:53:37 2011
Subject: [geos-devel] Re: [GEOS] #447: Can't compile GEOS 3.3 under mingw-64
In-Reply-To: <044.6c8124652da0fa57525d1b4e0e26967e@osgeo.org>
References: <044.6c8124652da0fa57525d1b4e0e26967e@osgeo.org>
Message-ID: <053.17d2b170fc04d0614ee6c74cf202fb72@osgeo.org>

#447: Can't compile GEOS 3.3 under mingw-64
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  => 3.3.1


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/447#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed Sep  7 11:10:45 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep  7 13:00:25 2011
Subject: [geos-devel] Re: [GEOS] #365: build fails with mingw
In-Reply-To: <047.8f485dc450c93f1470166fc9792588b2@osgeo.org>
References: <047.8f485dc450c93f1470166fc9792588b2@osgeo.org>
Message-ID: <056.6234f165c9a92ef269c85604f900f13b@osgeo.org>

#365: build fails with mingw
------------------------+---------------------------------------------------
 Reporter:  nicklas     |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:                            
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:  mingw       |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 This should be fixed with r3160 and I see it fixed in 3.3 branch too.
 Feel free to reopen if it isn't.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/365#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed Sep  7 11:10:52 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep  7 13:00:34 2011
Subject: [geos-devel] Re: [GEOS] #365: build fails with mingw
In-Reply-To: <047.8f485dc450c93f1470166fc9792588b2@osgeo.org>
References: <047.8f485dc450c93f1470166fc9792588b2@osgeo.org>
Message-ID: <056.d68304e57cb780e23ff87746cabc8840@osgeo.org>

#365: build fails with mingw
------------------------+---------------------------------------------------
 Reporter:  nicklas     |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.3.1                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:  mingw       |  
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  => 3.3.1


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/365#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From osm-lists at mazdermind.de  Wed Sep  7 12:09:37 2011
From: osm-lists at mazdermind.de (=?ISO-8859-1?Q?Peter_K=F6rner?=)
Date: Wed Sep  7 14:02:26 2011
Subject: [geos-devel] possible memory leak in InteriorPointArea
In-Reply-To: <20110907143529.GA16353@gnash>
References: <4E667D6E.7070906@mazdermind.de> <20110907143529.GA16353@gnash>
Message-ID: <4E679741.1090102@mazdermind.de>

Am 07.09.2011 16:35, schrieb Sandro Santilli:
> On Tue, Sep 06, 2011 at 10:07:10PM +0200, Peter K?rner wrote:
>> Hi guys!
>>
>> I guess I'm just using the InteriorPointArea wrong, but I get a
>> memory-leak reported in valgrind:
>>
> Build with debugging symbols on (-g option to GCC).

This gives me that:

==18925== 168 (48 direct, 120 indirect) bytes in 1 blocks are definitely 
lost in loss record 26 of 27
==18925==    at 0x4C28B42: operator new(unsigned long) 
(vg_replace_malloc.c:261)
==18925==    by 0x5BC9DF2: 
geos::geom::GeometryFactory::createLineString(geos::geom::CoordinateSequence*) 
const (GeometryFactory.cpp:535)
==18925==    by 0x5BB5402: 
geos::algorithm::InteriorPointArea::addPolygon(geos::geom::Geometry 
const*) (InteriorPointArea.cpp:91)
==18925==    by 0x408A51: ImportHandler::write_way() (in 
/home/peter/osm-history-renderer/importer/osm-history-importer)

Digging little deeper it seems that it just happens when I pass a 
invalid polygon into the InteriorPointArea class. It throws an
   TopologyException: found non-noded intersection between ...

and exists the function before the pointer is freed. This makes me 
think, if I'm supposed to do additional checks before I pass my polygon 
to the InteriorPointArea class.

Peter
From strk at keybit.net  Wed Sep  7 12:19:27 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed Sep  7 14:12:49 2011
Subject: [geos-devel] possible memory leak in InteriorPointArea
In-Reply-To: <4E679741.1090102@mazdermind.de>
References: <4E667D6E.7070906@mazdermind.de> <20110907143529.GA16353@gnash>
	<4E679741.1090102@mazdermind.de>
Message-ID: <20110907161927.GD12032@gnash>

On Wed, Sep 07, 2011 at 06:09:37PM +0200, Peter K?rner wrote:
> Am 07.09.2011 16:35, schrieb Sandro Santilli:
> >On Tue, Sep 06, 2011 at 10:07:10PM +0200, Peter K?rner wrote:
> >>Hi guys!
> >>
> >>I guess I'm just using the InteriorPointArea wrong, but I get a
> >>memory-leak reported in valgrind:
> >>
> >Build with debugging symbols on (-g option to GCC).
> 
> This gives me that:
> 
> ==18925== 168 (48 direct, 120 indirect) bytes in 1 blocks are
> definitely lost in loss record 26 of 27
> ==18925==    at 0x4C28B42: operator new(unsigned long)
> (vg_replace_malloc.c:261)
> ==18925==    by 0x5BC9DF2: geos::geom::GeometryFactory::createLineString(geos::geom::CoordinateSequence*)
> const (GeometryFactory.cpp:535)
> ==18925==    by 0x5BB5402:
> geos::algorithm::InteriorPointArea::addPolygon(geos::geom::Geometry
> const*) (InteriorPointArea.cpp:91)
> ==18925==    by 0x408A51: ImportHandler::write_way() (in
> /home/peter/osm-history-renderer/importer/osm-history-importer)
> 
> Digging little deeper it seems that it just happens when I pass a
> invalid polygon into the InteriorPointArea class. It throws an
>   TopologyException: found non-noded intersection between ...
> 
> and exists the function before the pointer is freed. This makes me
> think, if I'm supposed to do additional checks before I pass my
> polygon to the InteriorPointArea class.

Well, if the object is created by the InteriorPointArea class it
should be deleted by it before throwing, so it _is_ a bug.
Could you please file a ticket for this ?
Best if with a very small example of an invalid polygon...

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From osm-lists at mazdermind.de  Wed Sep  7 17:01:41 2011
From: osm-lists at mazdermind.de (=?ISO-8859-1?Q?Peter_K=F6rner?=)
Date: Wed Sep  7 19:10:34 2011
Subject: [geos-devel] possible memory leak in InteriorPointArea
In-Reply-To: <20110907161927.GD12032@gnash>
References: <4E667D6E.7070906@mazdermind.de>
	<20110907143529.GA16353@gnash>	<4E679741.1090102@mazdermind.de>
	<20110907161927.GD12032@gnash>
Message-ID: <4E67DBB5.7060202@mazdermind.de>

Hi

>> Digging little deeper it seems that it just happens when I pass a
>> invalid polygon into the InteriorPointArea class. It throws an
>>    TopologyException: found non-noded intersection between ...
>>
>> and exists the function before the pointer is freed. This makes me
>> think, if I'm supposed to do additional checks before I pass my
>> polygon to the InteriorPointArea class.
>
> Well, if the object is created by the InteriorPointArea class it
> should be deleted by it before throwing, so it _is_ a bug.
> Could you please file a ticket for this ?
> Best if with a very small example of an invalid polygon...

I have a test case and am willing to file a bug report, but I'm unable 
to submit the form at https://www2.osgeo.org/cgi-bin/ldap_create_user.py 
- it always tells me that the "User Creation Failed" without giving a 
hint if my username does already exists or my password is too complex or 
.. whatever.

Thus I attached the testcase to that email. I ran it like that to see 
the memleak:

peter@spock:~/geos$ g++ -I./src/ -L./src/.libs/ -lgeos 
InteriorPointAreaMemleakTest.cpp -o InteriorPointAreaMemleakTest
peter@spock:~/geos$ LD_LIBRARY_PATH=./src/.libs/ valgrind 
--leak-check=full ./InteriorPointAreaMemleakTest



resulting in that leak log:

==7153== 184 (56 direct, 128 indirect) bytes in 1 blocks are definitely 
lost in loss record 5 of 5
==7153==    at 0x4C28B42: operator new(unsigned long) 
(vg_replace_malloc.c:261)
==7153==    by 0x4EE73F2: 
geos::geom::GeometryFactory::createLineString(geos::geom::CoordinateSequence*) 
const (GeometryFactory.cpp:561)
==7153==    by 0x4ECFBED: 
geos::algorithm::InteriorPointArea::addPolygon(geos::geom::Geometry 
const*) (InteriorPointArea.cpp:93)
==7153==    by 0x400FCE: main (in 
/home/peter/geos/InteriorPointAreaMemleakTest)
==7153==
==7153== LEAK SUMMARY:
==7153==    definitely lost: 56 bytes in 1 blocks
==7153==    indirectly lost: 128 bytes in 4 blocks
==7153==      possibly lost: 0 bytes in 0 blocks
==7153==    still reachable: 0 bytes in 0 blocks
==7153==         suppressed: 0 bytes in 0 blocks


Peter
-------------- next part --------------
A non-text attachment was scrubbed...
Name: InteriorPointAreaMemleakTest.cpp
Type: text/x-c++src
Size: 909 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20110907/1e243494/InteriorPointAreaMemleakTest.bin
From perrygeo at gmail.com  Thu Sep  8 20:01:50 2011
From: perrygeo at gmail.com (Matt Perry)
Date: Thu Sep  8 23:39:04 2011
Subject: [geos-devel] segfault against 3.3.0 C++
Message-ID: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>

Apologies in advance if this is due to my rusty C++ skills. I've got
some code (from the starspan project) which uses the C++ API to GEOS.
It worked fine against 3.2.2 but is now segfaulting against 3.3.0:

Program received signal SIGSEGV, Segmentation fault.
geos::geom::Polygon::getNumInteriorRing (this=0x66e0e8) at Polygon.cpp:194
194		return holes->size();
(gdb) backtrace
#0  geos::geom::Polygon::getNumInteriorRing (this=0x66e0e8) at Polygon.cpp:194
#1  0x0000000000427768 in Traverser::processPolygon
(this=0x7fffffffd7c0, poly=<value optimized out>) at
src/traverser/traverser.cc:425
...

In an attempt to debug, i tried to write the WKT to stderr... GEOS
segfaults at WKTWriter...
starspan2: WKTWriter.cpp:228: void
geos::io::WKTWriter::appendGeometryTaggedText(const
geos::geom::Geometry*, int, geos::io::Writer*): Assertion `0' failed.
( assert(0); // Unsupported Geometry implementation )

Program received signal SIGABRT, Aborted.
0x00007ffff64a7d05 in raise () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) backtrace
#0  0x00007ffff64a7d05 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ffff64abab6 in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007ffff64a07c5 in __assert_fail () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x00007ffff709dceb in
geos::io::WKTWriter::appendGeometryTaggedText (this=0x7fffffffd8f4,
geometry=0x66e0d0, level=0, writer=0x7fffffffd430) at
WKTWriter.cpp:228
...
#6  0x0000000000427697 in Traverser::processPolygon
(this=0x7fffffffd740, poly=<value optimized out>) at
src/traverser/traverser.cc:420


The relevant code from the starspan code that causes the geos segfaults is:

   405	void Traverser::processPolygon(OGRPolygon* poly) {
   406		Polygon* geos_poly = (Polygon*) poly->exportToGEOS();
   407		if ( geos_poly->isValid() ) {
...
   413		}
   414		else {
   415			summary.num_invalid_polys++;
   416			
   417			if ( globalOptions.skip_invalid_polys ) {
...
   420					cerr<< "geos_poly = " << wktWriter.write(geos_poly) << endl;
...
   422			}
   423			else {
   424				// try to explode this poly into smaller ones:
   425				if ( geos_poly->getNumInteriorRing() > 0 ) {
   426					cerr<< "--Invalid polygon has " <<geos_poly->getNumInteriorRing()
   427	                    << " interior rings: cannot explode it--" << endl;
   428					summary.num_polys_with_internal_ring++;
   429				}

So, as I understand it, geos_poly->getNumInteriorRing() and
wktWriter(geos_poly) are both segfaulting. Any ideas on the underlying
cause of the problem? I assumed a bad geometry but I have checked the
input geometery externally using python OGR on the same system (see
attached) and it is valid according to geos3.3 - maybe something to do
with the cast from OGRGeometery to GEOS Polygon or the exportToGeos()
?

How should I update this code for geos 3.3.0 and proceed with
debugging this issue?

-- 
???`?.?. , . .???`?.. ><((((?>`?.??.???`?.?.???`?...?><((((?>
"The best way to predict the future is to invent it."? -- Alan Kay
Matthew T. Perry
http://www.perrygeo.net
http://viedevelo.wordpress.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: geom_1315445112.59.json
Type: application/json
Size: 79409 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20110908/c703fa5a/geom_1315445112.59-0001.bin
From strk at keybit.net  Fri Sep  9 05:50:55 2011
From: strk at keybit.net (Sandro Santilli)
Date: Fri Sep  9 10:08:05 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
Message-ID: <CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>

On Fri, Sep 9, 2011 at 2:01 AM, Matt Perry <perrygeo@gmail.com> wrote:

> ? 406 ? ? ? ? ?Polygon* geos_poly = (Polygon*) poly->exportToGEOS();

Try dynamic_cast, and guard against 0.

--strk;

Free GIS & Flash consultant/developer
http://strk.keybit.net/services.html
From perrygeo at gmail.com  Fri Sep  9 13:21:08 2011
From: perrygeo at gmail.com (Matt Perry)
Date: Fri Sep  9 17:54:54 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
Message-ID: <CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>

On Fri, Sep 9, 2011 at 2:50 AM, Sandro Santilli <strk@keybit.net> wrote:
> On Fri, Sep 9, 2011 at 2:01 AM, Matt Perry <perrygeo@gmail.com> wrote:
>
>> ? 406 ? ? ? ? ?Polygon* geos_poly = (Polygon*) poly->exportToGEOS();
>
> Try dynamic_cast, and guard against 0.
>

Good idea. I tried the following:

>> ? 406 ? ? ? ? ?Polygon* geos_poly = dynamic_cast<Polygon*>( poly->exportToGEOS() );

but get a compile error...

src/traverser/traverser.cc: In member function ?void
Traverser::processPolygon(OGRPolygon*)?:
src/traverser/traverser.cc:407:71: error: cannot dynamic_cast
?poly->OGRPolygon::<anonymous>.OGRSurface::<anonymous>.OGRGeometry::exportToGEOS()?
(of type ?struct GEOSGeom_t*?) to type ?class geos::geom::Polygon*?
(source is a pointer to incomplete type)

- matt
From osm-lists at mazdermind.de  Fri Sep  9 13:46:26 2011
From: osm-lists at mazdermind.de (=?windows-1252?Q?Peter_K=F6rner?=)
Date: Fri Sep  9 18:21:39 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
	<CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
Message-ID: <4E6A50F2.30001@mazdermind.de>

> src/traverser/traverser.cc: In member function ?void
> Traverser::processPolygon(OGRPolygon*)?:
> src/traverser/traverser.cc:407:71: error: cannot dynamic_cast
> ?poly->OGRPolygon::<anonymous>.OGRSurface::<anonymous>.OGRGeometry::exportToGEOS()?
> (of type ?struct GEOSGeom_t*?) to type ?class geos::geom::Polygon*?
> (source is a pointer to incomplete type)

GEOSGeom_t is from the C-interface of GEOS while Polygon* is from the 
C++ interface.

Seems OGR's exportToGEOS() followed the recommendation* and implemented 
the C-wrapper instead of the C++ library.

Peter


*) the docs say, that the C-wrapper is recommended and the C++ interface 
is not, although I don't really know why.
From perrygeo at gmail.com  Fri Sep  9 13:54:01 2011
From: perrygeo at gmail.com (Matt Perry)
Date: Fri Sep  9 18:29:34 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <4E6A50F2.30001@mazdermind.de>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
	<CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
	<4E6A50F2.30001@mazdermind.de>
Message-ID: <CAG-GLBMngcVpKLL2Nvjo+Hm+_f5HXto2Mpnp=dORxQ0MSE+AcA@mail.gmail.com>

On Fri, Sep 9, 2011 at 10:46 AM, Peter K?rner <osm-lists@mazdermind.de> wrote:
>> src/traverser/traverser.cc: In member function ?void
>> Traverser::processPolygon(OGRPolygon*)?:
>> src/traverser/traverser.cc:407:71: error: cannot dynamic_cast
>>
>> ?poly->OGRPolygon::<anonymous>.OGRSurface::<anonymous>.OGRGeometry::exportToGEOS()?
>> (of type ?struct GEOSGeom_t*?) to type ?class geos::geom::Polygon*?
>> (source is a pointer to incomplete type)
>
> GEOSGeom_t is from the C-interface of GEOS while Polygon* is from the C++
> interface.
>
> Seems OGR's exportToGEOS() followed the recommendation* and implemented the
> C-wrapper instead of the C++ library.
>
> Peter
>
>
> *) the docs say, that the C-wrapper is recommended and the C++ interface is
> not, although I don't really know why.

Interesting. Well that likely explains it but I'm somewhat at a loss
as to why this changed from GEOS 3.2.2 to 3.3.0.

Any ideas on potential solutions?

-- 
???`?.?. , . .???`?.. ><((((?>`?.??.???`?.?.???`?...?><((((?>
"The best way to predict the future is to invent it."? -- Alan Kay
Matthew T. Perry
http://www.perrygeo.net
http://viedevelo.wordpress.com
From hobu.inc at gmail.com  Fri Sep  9 14:42:03 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Sep  9 19:28:35 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <4E6A50F2.30001@mazdermind.de>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
	<CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
	<4E6A50F2.30001@mazdermind.de>
Message-ID: <CEFB2F21-FCC1-4B62-9294-4CE516244CB0@gmail.com>


On Sep 9, 2011, at 12:46 PM, Peter K?rner wrote:

> *) the docs say, that the C-wrapper is recommended and the C++ interface is not, although I don't really know why.

Because the implied developer contract of GEOS, which you signed before you downloaded GEOS ;), is to do our best to preserve backward and binary compatibility in the C API through mostly additions-only, and reserve the right to change things drastically for the C++ API. There's one major technical reason for this -- ABI compatibility -- and it has a nice social benefit of saying to GEOS library users "if you want to write your code once and (practically) never worry about having to change it again in the face of continuing GEOS releases, use the C API". 

C++ users are simply expected to keep up with changes to the classes as the code progresses and moves forward.  If you don't want to bleed on this bleeding edge, use the C API.

Howard
From strk at keybit.net  Sat Sep 10 06:09:08 2011
From: strk at keybit.net (Sandro Santilli)
Date: Sat Sep 10 11:38:29 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <4E6A50F2.30001@mazdermind.de>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
	<CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
	<4E6A50F2.30001@mazdermind.de>
Message-ID: <20110910100908.GB3343@gnash>

On Fri, Sep 09, 2011 at 07:46:26PM +0200, Peter K?rner wrote:

> Seems OGR's exportToGEOS() followed the recommendation* and
> implemented the C-wrapper instead of the C++ library.

No wonder that statically casting to Polygon* triggered segfaults...
I'm surprised it didn't blow up the developer's machine :D

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Sat Sep 10 10:17:41 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sat Sep 10 16:00:19 2011
Subject: [geos-devel] [GEOS] #475: Memory leak in InteriorPointArea
Message-ID: <044.b21aa0582b44ed11a8d865a1f7e45337@osgeo.org>

#475: Memory leak in InteriorPointArea
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 When input polygon is invalid, the class leaks.
 See http://lists.osgeo.org/pipermail/geos-devel/2011-September/005418.html

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/475>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sat Sep 10 10:28:25 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sat Sep 10 16:11:29 2011
Subject: [geos-devel] Re: [GEOS] #475: Memory leak in InteriorPointArea
In-Reply-To: <044.b21aa0582b44ed11a8d865a1f7e45337@osgeo.org>
References: <044.b21aa0582b44ed11a8d865a1f7e45337@osgeo.org>
Message-ID: <053.cd8f50d2e5f477cde8c2f3bb987010f5@osgeo.org>

#475: Memory leak in InteriorPointArea
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

 * cc: osm-lists@? (added)


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/475#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Sat Sep 10 10:32:06 2011
From: strk at keybit.net (Sandro Santilli)
Date: Sat Sep 10 16:15:49 2011
Subject: [geos-devel] possible memory leak in InteriorPointArea
In-Reply-To: <4E67DBB5.7060202@mazdermind.de>
References: <4E667D6E.7070906@mazdermind.de> <20110907143529.GA16353@gnash>
	<4E679741.1090102@mazdermind.de> <20110907161927.GD12032@gnash>
	<4E67DBB5.7060202@mazdermind.de>
Message-ID: <20110910143206.GA5780@gnash>

On Wed, Sep 07, 2011 at 11:01:41PM +0200, Peter K?rner wrote:

> I have a test case and am willing to file a bug report, but I'm
> unable to submit the form at
> https://www2.osgeo.org/cgi-bin/ldap_create_user.py - it always tells
> me that the "User Creation Failed" without giving a hint if my
> username does already exists or my password is too complex or ..
> whatever.

I filed the ticket for you: http://trac.osgeo.org/geos/ticket/475
Hopefully Frank can take a look at the LDAP usability issue.

Thanks!

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From perrygeo at gmail.com  Sat Sep 10 11:15:01 2011
From: perrygeo at gmail.com (Matt Perry)
Date: Sat Sep 10 17:00:33 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <20110910100908.GB3343@gnash>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
	<CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
	<4E6A50F2.30001@mazdermind.de> <20110910100908.GB3343@gnash>
Message-ID: <CAG-GLBMRpv3qbNo0ma2FiiJUti26GpJBUO=jXXTgUGMnywrWvA@mail.gmail.com>

On Sat, Sep 10, 2011 at 3:09 AM, Sandro Santilli <strk@keybit.net> wrote:
> On Fri, Sep 09, 2011 at 07:46:26PM +0200, Peter K?rner wrote:
>
>> Seems OGR's exportToGEOS() followed the recommendation* and
>> implemented the C-wrapper instead of the C++ library.
>
> No wonder that statically casting to Polygon* triggered segfaults...
> I'm surprised it didn't blow up the developer's machine :D
>

On the contrary, this code has worked for years (the software was
written around 2006) without any apparent troubles. It was only until
I compiled against 3.3.0 that segfaults started showing up ... and now
looking at the code I wonder how it ever worked in the first place!?
One thing is clear though; prior to 3.3 this code worked flawlessly.
Just out of curiosity, I'd like to know what changed and why this
worked at all.

So the 'right' solution is to rewrite the vector handling portions of
the software to use the GEOS C API. That's too big a project at the
moment so we'll probably just downgrade to 3.2.2 until we can
eventually drum up the resources to do it the right way.

Thanks for the help.

-- 
???`?.?. , . .???`?.. ><((((?>`?.??.???`?.?.???`?...?><((((?>
"The best way to predict the future is to invent it."? -- Alan Kay
Matthew T. Perry
http://www.perrygeo.net
http://viedevelo.wordpress.com
From strk at keybit.net  Sat Sep 10 16:44:04 2011
From: strk at keybit.net (Sandro Santilli)
Date: Sat Sep 10 22:46:55 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <CAG-GLBMRpv3qbNo0ma2FiiJUti26GpJBUO=jXXTgUGMnywrWvA@mail.gmail.com>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
	<CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
	<4E6A50F2.30001@mazdermind.de> <20110910100908.GB3343@gnash>
	<CAG-GLBMRpv3qbNo0ma2FiiJUti26GpJBUO=jXXTgUGMnywrWvA@mail.gmail.com>
Message-ID: <20110910204404.GB5780@gnash>

On Sat, Sep 10, 2011 at 08:15:01AM -0700, Matt Perry wrote:
> On Sat, Sep 10, 2011 at 3:09 AM, Sandro Santilli <strk@keybit.net> wrote:
> > On Fri, Sep 09, 2011 at 07:46:26PM +0200, Peter K?rner wrote:
> >
> >> Seems OGR's exportToGEOS() followed the recommendation* and
> >> implemented the C-wrapper instead of the C++ library.
> >
> > No wonder that statically casting to Polygon* triggered segfaults...
> > I'm surprised it didn't blow up the developer's machine :D
> >
> 
> On the contrary, this code has worked for years (the software was
> written around 2006) without any apparent troubles. It was only until
> I compiled against 3.3.0 that segfaults started showing up ... and now
> looking at the code I wonder how it ever worked in the first place!?
> One thing is clear though; prior to 3.3 this code worked flawlessly.
> Just out of curiosity, I'd like to know what changed and why this
> worked at all.
> 
> So the 'right' solution is to rewrite the vector handling portions of
> the software to use the GEOS C API. That's too big a project at the
> moment so we'll probably just downgrade to 3.2.2 until we can
> eventually drum up the resources to do it the right way.

An alternative could be statically-cast to Geometry* and then
dynamic_cast to Polygon*. Try that and let us know.

What changed ?
 Polygon is both Areal and Geometry now (diamond inheritance).

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From perrygeo at gmail.com  Sat Sep 10 18:39:03 2011
From: perrygeo at gmail.com (Matt Perry)
Date: Sun Sep 11 00:48:07 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <20110910204404.GB5780@gnash>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
	<CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
	<4E6A50F2.30001@mazdermind.de> <20110910100908.GB3343@gnash>
	<CAG-GLBMRpv3qbNo0ma2FiiJUti26GpJBUO=jXXTgUGMnywrWvA@mail.gmail.com>
	<20110910204404.GB5780@gnash>
Message-ID: <CAG-GLBO9WEDuc9WA0ACwWuyUpHF90ySKtzhV=ckY0diOGP2Wcg@mail.gmail.com>

On Sat, Sep 10, 2011 at 1:44 PM, Sandro Santilli <strk@keybit.net> wrote:
> An alternative could be statically-cast to Geometry* and then
> dynamic_cast to Polygon*. Try that and let us know.

Beautiful. It compiles fine and no segfaults on our test cases. Still
makes me nervous that this can happen anywhere in the code since the
C++ API is a moving target - the long term solution is still a C API
port but this fix buys some time. Thanks!

+	Geometry* geos_geom = (Geometry*) poly->exportToGEOS();
+	Polygon* geos_poly = dynamic_cast<Polygon*>( geos_geom );


>
> What changed ?
> ?Polygon is both Areal and Geometry now (diamond inheritance).

Ahh very nice. thanks for the explanation!

-- 
???`?.?. , . .???`?.. ><((((?>`?.??.???`?.?.???`?...?><((((?>
"The best way to predict the future is to invent it."? -- Alan Kay
Matthew T. Perry
http://www.perrygeo.net
http://viedevelo.wordpress.com
From maxime at altribe.org  Mon Sep 12 03:39:47 2011
From: maxime at altribe.org (Maxime van Noppen)
Date: Mon Sep 12 11:33:50 2011
Subject: [geos-devel] segfault against 3.3.0 C++
In-Reply-To: <CAG-GLBO9WEDuc9WA0ACwWuyUpHF90ySKtzhV=ckY0diOGP2Wcg@mail.gmail.com>
References: <CAG-GLBNNatMGBpi_JEMZPz17ju1js-a=wM__HNTL4iHP9074GQ@mail.gmail.com>
	<CALbSccADpVgOdkKDDH=bkKvCcmRWX+87hoJhzYqF-SpamVLEiw@mail.gmail.com>
	<CAG-GLBMXJyLJY84guNfAKtNQD8zsY1Z7y6DWnqYaC+DvWwuF+Q@mail.gmail.com>
	<4E6A50F2.30001@mazdermind.de> <20110910100908.GB3343@gnash>
	<CAG-GLBMRpv3qbNo0ma2FiiJUti26GpJBUO=jXXTgUGMnywrWvA@mail.gmail.com>
	<20110910204404.GB5780@gnash>
	<CAG-GLBO9WEDuc9WA0ACwWuyUpHF90ySKtzhV=ckY0diOGP2Wcg@mail.gmail.com>
Message-ID: <4E6DB743.7010402@altribe.org>

On 09/11/2011 12:39 AM, Matt Perry wrote:
> Beautiful. It compiles fine and no segfaults on our test cases. Still
> makes me nervous that this can happen anywhere in the code since the
> C++ API is a moving target - the long term solution is still a C API
> port but this fix buys some time. Thanks!
>
> +	Geometry* geos_geom = (Geometry*) poly->exportToGEOS();
> +	Polygon* geos_poly = dynamic_cast<Polygon*>( geos_geom );

We encountered this some time ago (the thread is in the geos-devel 
list). As strk said, now the whole geos hierarchy is virtual, therefore 
forbidding static_cast. So you can crawl your code base and replace all 
the casts.

By the way, using the C-style cast in C++ is really asking for trouble, 
use the appropriate cast between static_cast, dynamic_cast, 
reinterpret_cast or const_cast.

-- 
Maxime
From geos-trac at osgeo.org  Wed Sep 14 21:34:42 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu Sep 15 09:10:21 2011
Subject: [geos-devel] Re: [GEOS] #461: geos-3.3.0 build fails on Solaris 10
 Sparc - Sun Studio 12.2
In-Reply-To: <049.d63ea81896a834f328d66e7c71777d51@osgeo.org>
References: <049.d63ea81896a834f328d66e7c71777d51@osgeo.org>
Message-ID: <058.61d9342f99a1b014bd6642c573b16cc1@osgeo.org>

#461: geos-3.3.0 build fails on Solaris 10 Sparc - Sun Studio 12.2
-------------------------+--------------------------------------------------
 Reporter:  sandy2010    |       Owner:  geos-devel@?              
     Type:  defect       |      Status:  new                       
 Priority:  minor        |   Milestone:  3.3.1                     
Component:  Default      |     Version:  3.3.0                     
 Severity:  Significant  |    Keywords:  SunOS, Solaris 10,        
-------------------------+--------------------------------------------------

Comment(by rroliver):

 Use the global isnan from math.h, see attached patch.

 From my fights with solaris (albeit using the old RW libCstd) this will be
 the least of your problems...

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/461#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sat Sep 17 11:54:20 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sun Sep 18 02:55:25 2011
Subject: [geos-devel] Re: [GEOS] #461: geos-3.3.0 build fails on Solaris 10
 Sparc - Sun Studio 12.2
In-Reply-To: <049.d63ea81896a834f328d66e7c71777d51@osgeo.org>
References: <049.d63ea81896a834f328d66e7c71777d51@osgeo.org>
Message-ID: <058.e12855de0b95ba3e99e027bc87c99e80@osgeo.org>

#461: geos-3.3.0 build fails on Solaris 10 Sparc - Sun Studio 12.2
--------------------------------+-------------------------------------------
 Reporter:  sandy2010           |        Owner:  geos-devel@?              
     Type:  defect              |       Status:  closed                    
 Priority:  minor               |    Milestone:  3.3.1                     
Component:  Default             |      Version:  3.3.0                     
 Severity:  Significant         |   Resolution:  fixed                     
 Keywords:  SunOS, Solaris 10,  |  
--------------------------------+-------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 Committed in r3467 for 3.3 branch and r3468 for trunk, thanks

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/461#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From hobu.inc at gmail.com  Sat Sep 17 13:59:21 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Sun Sep 18 05:07:31 2011
Subject: [geos-devel] Motion: Commit access for Oliver Tonnhofer
Message-ID: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>

All,

I am currently at the #foss4g code sprint in Denver, and I have been working with Oliver on a small patch to streamline setting CoordinateSequence via the C API, and it would much less hassle if Oliver simply had commit access to the GEOS repository to apply and work with patches of this type.  Oliver's imposm and MapProxy tools are heavy users of Shapely and therefore GEOS, and it would be advantageous to be able to work closely with both.

Howard
From pramsey at opengeo.org  Sat Sep 17 20:38:45 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Sun Sep 18 12:08:51 2011
Subject: [geos-devel] Motion: Commit access for Oliver Tonnhofer
In-Reply-To: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
Message-ID: <CACowWR3gDLG4_wME1R5RHXEZgEv+Bh8O5e+J6ANUmjuZ3uwVSw@mail.gmail.com>

Sounds great to me,
P.

On Sat, Sep 17, 2011 at 11:59 AM, Howard Butler <hobu.inc@gmail.com> wrote:
> All,
>
> I am currently at the #foss4g code sprint in Denver, and I have been working with Oliver on a small patch to streamline setting CoordinateSequence via the C API, and it would much less hassle if Oliver simply had commit access to the GEOS repository to apply and work with patches of this type. ?Oliver's imposm and MapProxy tools are heavy users of Shapely and therefore GEOS, and it would be advantageous to be able to work closely with both.
>
> Howard_______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From strk at keybit.net  Sun Sep 18 05:10:57 2011
From: strk at keybit.net (Sandro Santilli)
Date: Sun Sep 18 21:15:49 2011
Subject: [geos-devel] Motion: Commit access for Oliver Tonnhofer
In-Reply-To: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
Message-ID: <20110918091057.GA2562@gnash>

On Sat, Sep 17, 2011 at 12:59:21PM -0500, Howard Butler wrote:

> I am currently at the #foss4g code sprint in Denver, and I have
> been working with Oliver on a small patch to streamline setting
> CoordinateSequence via the C API, and it would much less hassle if Oliver
> simply had commit access to the GEOS repository to apply and work with
> patches of this type.  Oliver's imposm and MapProxy tools are heavy users
> of Shapely and therefore GEOS, and it would be advantageous to be able
> to work closely with both.

Oliver: are you aware of the git mirror ?
Does it make your contribution workflow easier ?

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From hobu.inc at gmail.com  Mon Sep 19 16:20:38 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Sep 20 10:14:59 2011
Subject: [geos-devel] OS X 10.7 Lion llvm problem
In-Reply-To: <20110731181808.GA2207@gnash>
References: <46D8FB5C-0BCC-4894-80DB-DA60A5DF1EFE@kyngchaos.com>
	<20110731181808.GA2207@gnash>
Message-ID: <04DAEB77-01A2-43D0-9498-6A8E80E83256@gmail.com>


On Jul 31, 2011, at 1:18 PM, Sandro Santilli wrote:

> On Sun, Jul 31, 2011 at 12:23:39PM -0500, William Kyngesburye wrote:
>> Lion's Xcode now defaults to the llvm compiler (symlink gcc and g++ to the llvm).  I get an error:
>> 
>> Linking CXX shared library ../lib/GEOS.framework/Versions/3/GEOS
>> Undefined symbols for architecture x86_64:
>>  "__ZNSt8auto_ptrIN4geos4geom8EnvelopeEEcvSt12auto_ptr_refIT_EIS2_EEv", referenced from:
>>      virtual thunk to geos::geom::GeometryCollection::computeEnvelopeInternal() constin GeometryCollection.cpp.o
>>  "std::auto_ptr<geos::geom::Envelope>::auto_ptr(std::auto_ptr_ref<geos::geom::Envelope>)", referenced from:
>>      virtual thunk to geos::geom::GeometryCollection::computeEnvelopeInternal() constin GeometryCollection.cpp.o
>> ld: symbol(s) not found for architecture x86_64
>> 
>> 
>> Is this worth a bug report?  
> 
> Probably, on OS X tracker.

I spent some time with this one today, and I got the clang side of it working, so this is a good solution for Lion users. If Sandro has no problem with the patch, I will apply it ASAP.

http://trac.osgeo.org/geos/ticket/463

I still don't understand what the heck is going on with the llvm-gcc linker though.

Howard
From olt at omniscale.de  Tue Sep 20 04:17:47 2011
From: olt at omniscale.de (Oliver Tonnhofer)
Date: Tue Sep 20 22:55:32 2011
Subject: [geos-devel] Motion: Commit access for Oliver Tonnhofer
In-Reply-To: <20110918091057.GA2562@gnash>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
	<20110918091057.GA2562@gnash>
Message-ID: <97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>


On 18.09.2011, at 11:10, Sandro Santilli wrote:
> Oliver: are you aware of the git mirror ?
> Does it make your contribution workflow easier ?

The one on your Github account? Isn't that read-only, will pull requests work? 


Regards,
Oliver

-- 
Oliver Tonnhofer    | Omniscale GmbH & Co KG    | http://omniscale.de
http://mapproxy.org | https://bitbucket.org/olt | @oltonn




From strk at keybit.net  Tue Sep 20 04:32:34 2011
From: strk at keybit.net (Sandro Santilli)
Date: Tue Sep 20 23:06:42 2011
Subject: [geos-devel] Motion: Commit access for Oliver Tonnhofer
In-Reply-To: <97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
	<20110918091057.GA2562@gnash>
	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
Message-ID: <20110920083234.GE2153@gnash>

On Tue, Sep 20, 2011 at 10:17:47AM +0200, Oliver Tonnhofer wrote:
> 
> On 18.09.2011, at 11:10, Sandro Santilli wrote:
> > Oliver: are you aware of the git mirror ?
> > Does it make your contribution workflow easier ?
> 
> The one on your Github account? Isn't that read-only, will pull requests work? 
Yes, that's automatically updated every hour.

Any pull requests (involving or not github) will do fine.
Just send your repo url so I set up a remote pointing at it :)

I'd have to create a "geos" organization and re-import the data
with proper author identification and all branches, but I'm kind
of lazy on that. Not a big deal as long as we have the SVN side of
things...

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From hobu.inc at gmail.com  Tue Sep 20 09:26:12 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Sep 21 04:16:20 2011
Subject: [geos-devel] Motion: Commit access for Oliver Tonnhofer
In-Reply-To: <20110920083234.GE2153@gnash>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
	<20110918091057.GA2562@gnash>
	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
	<20110920083234.GE2153@gnash>
Message-ID: <4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>


On Sep 20, 2011, at 3:32 AM, Sandro Santilli wrote:

> On Tue, Sep 20, 2011 at 10:17:47AM +0200, Oliver Tonnhofer wrote:
>> 
>> On 18.09.2011, at 11:10, Sandro Santilli wrote:
>>> Oliver: are you aware of the git mirror ?
>>> Does it make your contribution workflow easier ?
>> 
>> The one on your Github account? Isn't that read-only, will pull requests work? 
> Yes, that's automatically updated every hour.
> 
> Any pull requests (involving or not github) will do fine.
> Just send your repo url so I set up a remote pointing at it :)
> 
> I'd have to create a "geos" organization and re-import the data
> with proper author identification and all branches, but I'm kind
> of lazy on that. Not a big deal as long as we have the SVN side of
> things...

Having the GEOS organization be the owner of the master git tree on github and moving entirely to github for source control for the GEOS project would be perfectly fine with me :)

Howard
From mateusz at loskot.net  Tue Sep 20 09:28:10 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Sep 21 04:18:17 2011
Subject: [geos-devel] Motion: Commit access for Oliver Tonnhofer
In-Reply-To: <4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>	<20110918091057.GA2562@gnash>	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>	<20110920083234.GE2153@gnash>
	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
Message-ID: <4E7894EA.3040407@loskot.net>

On 20/09/11 14:26, Howard Butler wrote:
> On Sep 20, 2011, at 3:32 AM, Sandro Santilli wrote:
>> I'd have to create a "geos" organization and re-import the data
>> with proper author identification and all branches, but I'm kind of
>> lazy on that. Not a big deal as long as we have the SVN side of
>> things...
>
> Having the GEOS organization be the owner of the master git tree on
> github and moving entirely to github for source control for the GEOS
> project would be perfectly fine with me :)

+1

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From strk at keybit.net  Tue Sep 20 09:35:27 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed Sep 21 04:26:05 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
	<20110918091057.GA2562@gnash>
	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
	<20110920083234.GE2153@gnash>
	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
Message-ID: <20110920133527.GE19953@gnash>

On Tue, Sep 20, 2011 at 08:26:12AM -0500, Howard Butler wrote:
> On Sep 20, 2011, at 3:32 AM, Sandro Santilli wrote:

> > I'd have to create a "geos" organization and re-import the data
> > with proper author identification and all branches, but I'm kind
> > of lazy on that. Not a big deal as long as we have the SVN side of
> > things...
> 
> Having the GEOS organization be the owner of the master git tree on
> github and moving entirely to github for source control for the GEOS
> project would be perfectly fine with me :)

With no SVN backup, you mean ?
No more trac->changeset reference (r### won't be enough) ?
It's a pity to loose that kind of support.
I'd be happier with an OSGEO solution.

Anyway, if you are willing to spend some time on it, a GEOS organization
and a better imported history (with proper authorship and branches ?) would
be worth a try. 

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From hobu.inc at gmail.com  Tue Sep 20 09:48:03 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Sep 21 04:39:20 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <20110920133527.GE19953@gnash>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
	<20110918091057.GA2562@gnash>
	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
	<20110920083234.GE2153@gnash>
	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
	<20110920133527.GE19953@gnash>
Message-ID: <4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>


On Sep 20, 2011, at 8:35 AM, Sandro Santilli wrote:

> On Tue, Sep 20, 2011 at 08:26:12AM -0500, Howard Butler wrote:
>> On Sep 20, 2011, at 3:32 AM, Sandro Santilli wrote:
> 
>>> I'd have to create a "geos" organization and re-import the data
>>> with proper author identification and all branches, but I'm kind
>>> of lazy on that. Not a big deal as long as we have the SVN side of
>>> things...
>> 
>> Having the GEOS organization be the owner of the master git tree on
>> github and moving entirely to github for source control for the GEOS
>> project would be perfectly fine with me :)
> 
> With no SVN backup, you mean ?
> No more trac->changeset reference (r### won't be enough) ?
> It's a pity to loose that kind of support.
> I'd be happier with an OSGEO solution.
> 
> Anyway, if you are willing to spend some time on it, a GEOS organization
> and a better imported history (with proper authorship and branches ?) would
> be worth a try. 

OpenLayers is working on getting git+Trac working on the OSGeo instance. We could do that too when things become available, and I do not have a strong opinion either way. github's pull requests are a killer feature though.

Howard 
From strk at keybit.net  Tue Sep 20 09:51:37 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed Sep 21 04:43:04 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
	<20110918091057.GA2562@gnash>
	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
	<20110920083234.GE2153@gnash>
	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
	<20110920133527.GE19953@gnash>
	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>
Message-ID: <20110920135137.GF19953@gnash>

On Tue, Sep 20, 2011 at 08:48:03AM -0500, Howard Butler wrote:

> OpenLayers is working on getting git+Trac working on the OSGeo
> instance. We could do that too when things become available, and I do
> not have a strong opinion either way. github's pull requests are a killer
> feature though.

I stay away from that "feature" as it looks more like a trap to me.
"pull request" is nothing more than a formal request. You could obtain
the same effect by requesting the pull on a mailing list, irc or any
other mean.

Btw, take a look at git-request-pull(1) if you want to save time in
writing the text of such a request.

The killer feature of distributed version control systems is that, well,
they are _distributed_. Relying too much on a centralized service (like
github) goes against the intent ...

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Tue Sep 20 10:34:55 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 21 05:28:58 2011
Subject: [geos-devel] [GEOS] #478:
 GeometryCollection::computeEnvelopInternal and
 GeometryCollection::compareToSameClass are marked virtual
Message-ID: <044.cbf22f0af9eaa6a0389aa94971b68826@osgeo.org>

#478: GeometryCollection::computeEnvelopInternal and
GeometryCollection::compareToSameClass are marked virtual
------------------------+---------------------------------------------------
 Reporter:  hobu        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  trivial     |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 These methods are marked virtual, but their implementation actually lives
 in GeometryCollection.  These should not be marked virtual.  None of the
 Multi* underneath them implement either of these methods.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/478>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep 20 10:36:10 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 21 05:30:16 2011
Subject: [geos-devel] Re: [GEOS] #478:
 GeometryCollection::computeEnvelopInternal and
 GeometryCollection::compareToSameClass are marked virtual
In-Reply-To: <044.cbf22f0af9eaa6a0389aa94971b68826@osgeo.org>
References: <044.cbf22f0af9eaa6a0389aa94971b68826@osgeo.org>
Message-ID: <053.ae1c0ea3019321c3ab8fad55a52e1bd1@osgeo.org>

#478: GeometryCollection::computeEnvelopInternal and
GeometryCollection::compareToSameClass are marked virtual
------------------------+---------------------------------------------------
 Reporter:  hobu        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  trivial     |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by hobu):

 Added in r3472

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/478#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep 20 10:36:19 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 21 05:30:26 2011
Subject: [geos-devel] Re: [GEOS] #478:
 GeometryCollection::computeEnvelopInternal and
 GeometryCollection::compareToSameClass are marked virtual
In-Reply-To: <044.cbf22f0af9eaa6a0389aa94971b68826@osgeo.org>
References: <044.cbf22f0af9eaa6a0389aa94971b68826@osgeo.org>
Message-ID: <053.3519dc33298c8f1f3404a7cfefc2d833@osgeo.org>

#478: GeometryCollection::computeEnvelopInternal and
GeometryCollection::compareToSameClass are marked virtual
------------------------+---------------------------------------------------
 Reporter:  hobu        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  trivial     |   Milestone:  3.4.0                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by hobu):

  * milestone:  3.3.1 => 3.4.0


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/478#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep 20 10:41:30 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 21 05:35:52 2011
Subject: [geos-devel] [GEOS] #479: llvm-gcc on OS X Lion does not link
Message-ID: <044.244ad41005bc7af20d788062e086e40f@osgeo.org>

#479: llvm-gcc on OS X Lion does not link
------------------------+---------------------------------------------------
 Reporter:  hobu        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  minor       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 {{{
 Undefined symbols for architecture x86_64:
   "__ZNSt8auto_ptrIN4geos4geom8EnvelopeEEcvSt12auto_ptr_refIT_EIS2_EEv",
 referenced from:
       virtual thunk to
 geos::geom::GeometryCollection::computeEnvelopeInternal() constin
 GeometryCollection.o
 "std::auto_ptr<geos::geom::Envelope>::auto_ptr(std::auto_ptr_ref<geos::geom::Envelope>)",
 referenced from:
       virtual thunk to
 geos::geom::GeometryCollection::computeEnvelopeInternal() constin
 GeometryCollection.o
 ld: symbol(s) not found for architecture x86_64
 collect2: ld returned 1 exit status
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/479>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep 20 10:52:52 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 21 05:47:52 2011
Subject: [geos-devel] Re: [GEOS] #479: llvm-gcc on OS X Lion does not link
In-Reply-To: <044.244ad41005bc7af20d788062e086e40f@osgeo.org>
References: <044.244ad41005bc7af20d788062e086e40f@osgeo.org>
Message-ID: <053.10c412b12aa4d04a122025fbfa5c700b@osgeo.org>

#479: llvm-gcc on OS X Lion does not link
------------------------+---------------------------------------------------
 Reporter:  hobu        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  minor       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Sounds like a compiler bug to me (didn't instantiate
 std::auto_ptr<geos::geom::Envelope> class)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/479#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed Sep 21 04:56:50 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu Sep 22 00:52:11 2011
Subject: [geos-devel] Re: [GEOS] #353: LinearReferencing functions segfaults
In-Reply-To: <044.87a7db56b41fad30810cda6c20808710@osgeo.org>
References: <044.87a7db56b41fad30810cda6c20808710@osgeo.org>
Message-ID: <053.c8601881d3433b17dcf39acd0026f1ea@osgeo.org>

#353: LinearReferencing functions segfaults
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.2.3                     
Component:  Default     |     Version:  3.2.2                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 All ported to 3.2 branch with r3477

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/353#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed Sep 21 04:56:59 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu Sep 22 00:52:19 2011
Subject: [geos-devel] Re: [GEOS] #353: LinearReferencing functions segfaults
In-Reply-To: <044.87a7db56b41fad30810cda6c20808710@osgeo.org>
References: <044.87a7db56b41fad30810cda6c20808710@osgeo.org>
Message-ID: <053.d9cf0838b478c06bbe47cbd95a44dd8d@osgeo.org>

#353: LinearReferencing functions segfaults
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  blocker     |    Milestone:  3.2.3                     
Component:  Default     |      Version:  3.2.2                     
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/353#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Wed Sep 21 10:08:24 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu Sep 22 06:20:52 2011
Subject: [geos-devel] GeometrySnapper stability
Message-ID: <20110921140824.GH2224@gnash>

Martin, I've found that GeometrySnapper depends on the order
in which "snap points" are considered. Check this out:


 Tolerance:  1
  Input:     LINESTRING(0 0, 10 0)

  SnapGeom:  MULTIPOINT(5 0.8, 5 1.6)
    Result:  LINESTRING(0 0,5 1.6,5 0.8,10 0)

  SnapGeom:  MULTIPOINT(5 1.6, 5 0.8)
    Result:  LINESTRING(0 0,5 0.8,10 0)

It looks like in the first case the line was first snapped to the closest
point (0.8 units away) and then to the second point (1.6 away from the
original but 0.8 units away from the so-snapped geometry).

In the second case the code probably analyzed the further point first
(1.6 units away) and skipped it, subsequently only snapping to the one
within tolerance.

Another weird effect of that "incremental snapping" is that
multiple points close to each other can create back-and-forth
non-simple lines (thus non-valid polygons). Example:

 Tolerance:  1
  Input:     LINESTRING(0 0, 10 0)
  SnapGeom:  MULTIPOINT(10 0.2, 10 0.1, 10 0.3)
    Result:  LINESTRING(0 0,10 0.1,10 0.3,10 0.2)

So questions here are:

 1) Does JTS behave the same here ?
 2) Does JTS have XML based support for testing this ?
 3) Which of the above is the desired behavior ?

Thanks in advance.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

--

what comes below this line is just spam, dont bother scrolling...




















































    still here ?



























From strk at keybit.net  Wed Sep 21 11:05:16 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu Sep 22 07:20:59 2011
Subject: [geos-devel] 3.2.3 tagged, ready to be published
Message-ID: <20110921150516.GJ2224@gnash>

geos-3.2.3 is tagged in SVN repository.

Tarball could not be published due to osgeo host downtime:
http://trac.osgeo.org/osgeo/ticket/805

This in a bugfix only release:

  - ValidOp abort in presence of 2 touching holes forming an island (#449)
  - DistanceOp segfaults on MULTIPOLYGON with EMPTY elements (#367)
  - RobustDeterminant is not robust (#450)
  - Fix out-of-place build for python binding (#332)
  - Fix LinearReferencing functions segfault (#353)

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From strk at keybit.net  Wed Sep 21 11:25:03 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu Sep 22 07:41:45 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
	<20110918091057.GA2562@gnash>
	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
	<20110920083234.GE2153@gnash>
	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
	<20110920133527.GE19953@gnash>
	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>
Message-ID: <20110921152503.GK2224@gnash>

On Tue, Sep 20, 2011 at 08:48:03AM -0500, Howard Butler wrote:
> 
> On Sep 20, 2011, at 8:35 AM, Sandro Santilli wrote:
> 
> > On Tue, Sep 20, 2011 at 08:26:12AM -0500, Howard Butler wrote:
> >> On Sep 20, 2011, at 3:32 AM, Sandro Santilli wrote:
> >
> > I'd be happier with an OSGEO solution.
> 
> I do not have a strong opinion either way. 

For the time being, I've created a "libgeos" organization on github
("geos" was taken already) and added those who I could clearly
recognize already having an account on github as owners.
No repository was put there yet.

If anyone has time to do a proper import (with correct authorship
information) please go ahead. I can setup a new sync cronjob on 
the new import.

One of the good things about git is that it doesn't matter where 
the import is done, as you move the whole thing on every node so
moves w/out any effort to osgeo once it's ready.

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From mateusz at loskot.net  Wed Sep 21 11:44:28 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Sep 22 08:02:34 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <20110921152503.GK2224@gnash>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>	<20110918091057.GA2562@gnash>	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>	<20110920083234.GE2153@gnash>	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>	<20110920133527.GE19953@gnash>	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>
	<20110921152503.GK2224@gnash>
Message-ID: <4E7A065C.4050201@loskot.net>

On 21/09/11 16:25, Sandro Santilli wrote:
> On Tue, Sep 20, 2011 at 08:48:03AM -0500, Howard Butler wrote:
>>
>> On Sep 20, 2011, at 8:35 AM, Sandro Santilli wrote:
>>
>>> On Tue, Sep 20, 2011 at 08:26:12AM -0500, Howard Butler wrote:
>>>> On Sep 20, 2011, at 3:32 AM, Sandro Santilli wrote:
>>>
>>> I'd be happier with an OSGEO solution.
>>
>> I do not have a strong opinion either way.
>
> For the time being, I've created a "libgeos" organization on github
> ("geos" was taken already) and added those who I could clearly
> recognize already having an account on github as owners.

Great.

> If anyone has time to do a proper import (with correct authorship
> information) please go ahead. I can setup a new sync cronjob on
> the new import.

What is your preferred way?
I maintain GDAL at GitHub according to these:
http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow

IOW, how someone can make the import, so you can configure the cronjob 
on different machine/setup?

> One of the good things about git is that it doesn't matter where
> the import is done, as you move the whole thing on every node so
> moves w/out any effort to osgeo once it's ready.

Also, you can continue comitting to the SVN repo (see my notes above),
and it is easier to view code and to review code.


Cheers,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From strk at keybit.net  Wed Sep 21 12:08:34 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu Sep 22 08:27:50 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <4E7A065C.4050201@loskot.net>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>
	<20110918091057.GA2562@gnash>
	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
	<20110920083234.GE2153@gnash>
	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
	<20110920133527.GE19953@gnash>
	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>
	<20110921152503.GK2224@gnash> <4E7A065C.4050201@loskot.net>
Message-ID: <20110921160834.GL2224@gnash>

On Wed, Sep 21, 2011 at 04:44:28PM +0100, Mateusz Loskot wrote:
> On 21/09/11 16:25, Sandro Santilli wrote:
> >On Tue, Sep 20, 2011 at 08:48:03AM -0500, Howard Butler wrote:
> >>
> >>On Sep 20, 2011, at 8:35 AM, Sandro Santilli wrote:
> >>
> >>>On Tue, Sep 20, 2011 at 08:26:12AM -0500, Howard Butler wrote:
> >>>>On Sep 20, 2011, at 3:32 AM, Sandro Santilli wrote:
> >>>
> >>>I'd be happier with an OSGEO solution.
> >>
> >>I do not have a strong opinion either way.
> >
> >For the time being, I've created a "libgeos" organization on github
> >("geos" was taken already) and added those who I could clearly
> >recognize already having an account on github as owners.
> 
> Great.
> 
> >If anyone has time to do a proper import (with correct authorship
> >information) please go ahead. I can setup a new sync cronjob on
> >the new import.
> 
> What is your preferred way?
> I maintain GDAL at GitHub according to these:
> http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow
> 
> IOW, how someone can make the import, so you can configure the
> cronjob on different machine/setup?

Actually I don't know what's the best way to do this kind of things by
also including all branches. Neither my nor your setup did that, right ?

QuantumGIS did that recently, whoever is going to do the import might
ask them.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Thu Sep 22 12:39:35 2011
From: geos-trac at osgeo.org (GEOS)
Date: Fri Sep 23 10:19:09 2011
Subject: [geos-devel] Re: [GEOS] #383: huge memory cost and crash in buffer
 [JTS fails too] (was: huge memory cost and crash in buffer)
In-Reply-To: <046.617044d0ed8dc36f2f42036870494313@osgeo.org>
References: <046.617044d0ed8dc36f2f42036870494313@osgeo.org>
Message-ID: <055.c2a57e23cb1062777cfba5b5367c95ec@osgeo.org>

#383: huge memory cost and crash in buffer [JTS fails too]
------------------------+---------------------------------------------------
 Reporter:  atubar      |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  buffer                    
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  GEOS Future => 3.4.0


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/383#comment:10>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu Sep 22 19:23:14 2011
From: geos-trac at osgeo.org (GEOS)
Date: Fri Sep 23 17:24:45 2011
Subject: [geos-devel] [GEOS] #480: Cleaning Subversion svn:keywords
Message-ID: <047.18b329586d27561b8a762e0e5ee75f09@osgeo.org>

#480: Cleaning Subversion svn:keywords
------------------------+---------------------------------------------------
 Reporter:  mloskot     |       Owner:  geos-devel@?              
     Type:  task        |      Status:  new                       
 Priority:  major       |   Milestone:                            
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 This task follows the [http://lists.osgeo.org/pipermail/geos-
 devel/2011-September/005455.html motion of moving GEOS to GitHub].

 The Subversion keywords like $Id$ should be completely cleaned. Quoting
 the Git FAQ:

 {{{
 Does git have keyword expansion?

 Not recommended. Keyword expansion causes all sorts of strange problems
 and isn't really useful anyway, especially within the context of an SCM.
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/480>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Fri Sep 23 05:53:05 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sat Sep 24 04:29:31 2011
Subject: [geos-devel] Re: [GEOS] #473: RightmostEdgeFinder assertion killing
 postgres process
In-Reply-To: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>
References: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>
Message-ID: <053.03587434ca577fb12653425ccf954dbd@osgeo.org>

#473: RightmostEdgeFinder assertion killing postgres process
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Robe: any attempt at figuring out the offending input ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/473#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From mateusz at loskot.net  Fri Sep 23 06:46:23 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Sep 24 05:26:04 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <20110921160834.GL2224@gnash>
References: <6761B998-178B-4A67-A4B6-5C55406E0435@gmail.com>	<20110918091057.GA2562@gnash>	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>	<20110920083234.GE2153@gnash>	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>	<20110920133527.GE19953@gnash>	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>	<20110921152503.GK2224@gnash>
	<4E7A065C.4050201@loskot.net> <20110921160834.GL2224@gnash>
Message-ID: <4E7C637F.50009@loskot.net>

On 21/09/11 17:08, Sandro Santilli wrote:
> On Wed, Sep 21, 2011 at 04:44:28PM +0100, Mateusz Loskot wrote:
>> On 21/09/11 16:25, Sandro Santilli wrote:
>>> On Tue, Sep 20, 2011 at 08:48:03AM -0500, Howard Butler wrote:
>>>>
>>>> On Sep 20, 2011, at 8:35 AM, Sandro Santilli wrote:
>>>>
>>>>> On Tue, Sep 20, 2011 at 08:26:12AM -0500, Howard Butler wrote:
>>>>>> On Sep 20, 2011, at 3:32 AM, Sandro Santilli wrote:
>>>>>
>>>>> I'd be happier with an OSGEO solution.
>>>>
>>>> I do not have a strong opinion either way.
>>>
>>> For the time being, I've created a "libgeos" organization on github
>>> ("geos" was taken already) and added those who I could clearly
>>> recognize already having an account on github as owners.
>>
>> Great.
>>
>>> If anyone has time to do a proper import (with correct authorship
>>> information) please go ahead. I can setup a new sync cronjob on
>>> the new import.
>>
>> What is your preferred way?
>> I maintain GDAL at GitHub according to these:
>> http://trac.osgeo.org/gdal/wiki/UsingGitToMaintainGDALWorkflow
>>
>> IOW, how someone can make the import, so you can configure the
>> cronjob on different machine/setup?
>
> Actually I don't know what's the best way to do this kind of things by
> also including all branches. Neither my nor your setup did that, right ?

First issue to solve is to find a machine which is online 24/7 and can 
run the cronjob. Manual maintenance/update is unreliable.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From strk at keybit.net  Fri Sep 23 07:28:51 2011
From: strk at keybit.net (Sandro Santilli)
Date: Sat Sep 24 06:10:50 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <4E7C637F.50009@loskot.net>
References: <20110918091057.GA2562@gnash>
	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>
	<20110920083234.GE2153@gnash>
	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
	<20110920133527.GE19953@gnash>
	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>
	<20110921152503.GK2224@gnash> <4E7A065C.4050201@loskot.net>
	<20110921160834.GL2224@gnash> <4E7C637F.50009@loskot.net>
Message-ID: <20110923112851.GF2995@gnash>

On Fri, Sep 23, 2011 at 11:46:23AM +0100, Mateusz Loskot wrote:
> On 21/09/11 17:08, Sandro Santilli wrote:
> >On Wed, Sep 21, 2011 at 04:44:28PM +0100, Mateusz Loskot wrote:
> >>IOW, how someone can make the import, so you can configure the
> >>cronjob on different machine/setup?
> >
> >Actually I don't know what's the best way to do this kind of things by
> >also including all branches. Neither my nor your setup did that, right ?
> 
> First issue to solve is to find a machine which is online 24/7 and
> can run the cronjob. Manual maintenance/update is unreliable.

I have that, no problem there.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From mateusz at loskot.net  Sat Sep 24 18:45:40 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Sep 25 19:24:07 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <20110923112851.GF2995@gnash>
References: <20110918091057.GA2562@gnash>	<97681FE5-71E0-4162-971B-7C107B8F6AA2@omniscale.de>	<20110920083234.GE2153@gnash>	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>	<20110920133527.GE19953@gnash>	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>	<20110921152503.GK2224@gnash>
	<4E7A065C.4050201@loskot.net>	<20110921160834.GL2224@gnash>
	<4E7C637F.50009@loskot.net> <20110923112851.GF2995@gnash>
Message-ID: <4E7E5D94.9080005@loskot.net>

On 23/09/11 12:28, Sandro Santilli wrote:
> On Fri, Sep 23, 2011 at 11:46:23AM +0100, Mateusz Loskot wrote:
>> On 21/09/11 17:08, Sandro Santilli wrote:
>>> On Wed, Sep 21, 2011 at 04:44:28PM +0100, Mateusz Loskot wrote:
>>>> IOW, how someone can make the import, so you can configure the
>>>> cronjob on different machine/setup?
>>>
>>> Actually I don't know what's the best way to do this kind of things by
>>> also including all branches. Neither my nor your setup did that, right ?
>>
>> First issue to solve is to find a machine which is online 24/7 and
>> can run the cronjob. Manual maintenance/update is unreliable.
> 
> I have that, no problem there.

I have asked [1] QGIS folks about their experiences with SVN -> Git.
The big question is: are we going to migrate to Git or mirror SVN in Git?

According to what I have been told by Tim, the former is a good idea,
the latter is not.

Also, Alex (wildintellect) mentioned [1] OSGeo may introduce Git support
in near future.

...handing over to decision makers.

[1] http://logs.qgis.org/slogs/%23qgis.2011-09-24.log
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From woodbri at swoodbridge.com  Sat Sep 24 22:38:20 2011
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun Sep 25 23:36:43 2011
Subject: [geos-devel] Wondering about points3d into contours
Message-ID: <4E7E941C.30704@swoodbridge.com>

Hi all,

I wrote code years ago in C that would take a cloud of 3D points insert 
them into a Delaunay triangular surface, then slice the surface 
triangles with a plane(s) into intersecting edges and then composite 
rings from the edges. It seems like we are very close to being able to 
do this in PostGIS. I'm not sure if we have the Delaunay 
triangularization yet.

I'm thinking of something like:

select b.z, a.* from
   st_buildarea(
     st_collect(
       intersection(
         delaunay_triangles(
           select the_geom from points),
           st_translate(
             st_expand(select extents(the_geom) from points, 0.1),
             0.0, 0.0, b.z
           )
         )
       )
     )
   ) as a,
   (select 1.0 * generate_series(2, 10, 2) as z) as b
  group by b.z;

So I'm thinking of something like this is the use case, where this would 
create contour rings for Z at 2, 4, 6, 8, and 10 based on the 
triangulated surface created from the points. My SQL is probably broken, 
but it is only to present the idea.

So any ideas on how to do this now?
Or if Delaunay triangularization will get added to PostGIS or GEOS?

Thanks,
   -Steve
From strk at keybit.net  Sun Sep 25 02:56:11 2011
From: strk at keybit.net (Sandro Santilli)
Date: Mon Sep 26 04:01:43 2011
Subject: [geos-devel] Wondering about points3d into contours
In-Reply-To: <4E7E941C.30704@swoodbridge.com>
References: <4E7E941C.30704@swoodbridge.com>
Message-ID: <20110925065611.GA2176@xtp>

On Sat, Sep 24, 2011 at 10:38:20PM -0400, Stephen Woodbridge wrote:

> Or if Delaunay triangularization will get added to PostGIS or GEOS?

Delaunay triangularization is in JTS already.
Should be ported to GEOS first (3.4.0?) and then
PostGIS (2.1?) could use it.

There's been some interest for the first step but none of that ended
up turning into actual fundings. 

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Tue Sep 27 08:40:52 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 28 12:42:42 2011
Subject: [geos-devel] Re: [GEOS] #473: RightmostEdgeFinder assertion killing
 postgres process
In-Reply-To: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>
References: <044.366b5b6dcaef84b54797f6ad7aacaf94@osgeo.org>
Message-ID: <053.58c1e2db01de02741ffc11c5d5e13889@osgeo.org>

#473: RightmostEdgeFinder assertion killing postgres process
------------------------+---------------------------------------------------
 Reporter:  robe        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.3.1                     
Component:  Default     |      Version:  3.3.0                     
 Severity:  Unassigned  |   Resolution:  worksforme                
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by robe):

  * status:  new => closed
  * resolution:  => worksforme


Comment:

 I can't replicate this and can't remember what feature set I was using to
 cause this error.  I guess we can close out for now and I'll reopen if I
 can replicate it.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/473#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Tue Sep 27 08:45:26 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed Sep 28 12:47:40 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <4E7E5D94.9080005@loskot.net>
References: <20110920083234.GE2153@gnash>
	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>
	<20110920133527.GE19953@gnash>
	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>
	<20110921152503.GK2224@gnash> <4E7A065C.4050201@loskot.net>
	<20110921160834.GL2224@gnash> <4E7C637F.50009@loskot.net>
	<20110923112851.GF2995@gnash> <4E7E5D94.9080005@loskot.net>
Message-ID: <20110927124526.GA17136@gnash>

On Sat, Sep 24, 2011 at 11:45:40PM +0100, Mateusz Loskot wrote:
> On 23/09/11 12:28, Sandro Santilli wrote:
> > On Fri, Sep 23, 2011 at 11:46:23AM +0100, Mateusz Loskot wrote:
> >> On 21/09/11 17:08, Sandro Santilli wrote:
> >>> On Wed, Sep 21, 2011 at 04:44:28PM +0100, Mateusz Loskot wrote:
> >>>> IOW, how someone can make the import, so you can configure the
> >>>> cronjob on different machine/setup?
> >>>
> >>> Actually I don't know what's the best way to do this kind of things by
> >>> also including all branches. Neither my nor your setup did that, right ?
> >>
> >> First issue to solve is to find a machine which is online 24/7 and
> >> can run the cronjob. Manual maintenance/update is unreliable.
> > 
> > I have that, no problem there.
> 
> I have asked [1] QGIS folks about their experiences with SVN -> Git.
> The big question is: are we going to migrate to Git or mirror SVN in Git?
> 
> According to what I have been told by Tim, the former is a good idea,
> the latter is not.
> 
> Also, Alex (wildintellect) mentioned [1] OSGeo may introduce Git support
> in near future.
> 
> ...handing over to decision makers.
> 
> [1] http://logs.qgis.org/slogs/%23qgis.2011-09-24.log

I'd wait for Git support in OSGeo.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Tue Sep 27 08:51:18 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 28 12:53:43 2011
Subject: [geos-devel] Re: [GEOS] #479: llvm-gcc on OS X Lion does not link
In-Reply-To: <044.244ad41005bc7af20d788062e086e40f@osgeo.org>
References: <044.244ad41005bc7af20d788062e086e40f@osgeo.org>
Message-ID: <053.1cafa3b512b9483238f62db0b8671a71@osgeo.org>

#479: llvm-gcc on OS X Lion does not link
------------------------+---------------------------------------------------
 Reporter:  hobu        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  minor       |    Milestone:  3.3.1                     
Component:  Default     |      Version:  3.3.0                     
 Severity:  Unassigned  |   Resolution:  invalid                   
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => invalid


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/479#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep 27 08:52:06 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 28 12:54:34 2011
Subject: [geos-devel] Re: [GEOS] #459: Union fails to fully node input
	linework
In-Reply-To: <044.a0edbb62f48168614e309db04bc20760@osgeo.org>
References: <044.a0edbb62f48168614e309db04bc20760@osgeo.org>
Message-ID: <053.7a199689ee872b4a28f6d2c5c2e1e452@osgeo.org>

#459: Union fails to fully node input linework
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.1 => 3.4.0


Comment:

 This is a design limit, won't be handled in a bugfix release

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/459#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep 27 09:01:56 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 28 13:04:52 2011
Subject: [geos-devel] Re: [GEOS] #447: Can't compile GEOS 3.3 under mingw-64
In-Reply-To: <044.6c8124652da0fa57525d1b4e0e26967e@osgeo.org>
References: <044.6c8124652da0fa57525d1b4e0e26967e@osgeo.org>
Message-ID: <053.69006fbca82c8502948c18758043be7d@osgeo.org>

#447: Can't compile GEOS 3.3 under mingw-64
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Robe: this is last item to close for 3.3.1 -- anything to do here ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/447#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep 27 11:15:19 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 28 15:25:36 2011
Subject: [geos-devel] Re: [GEOS] #447: Can't compile GEOS 3.3 under mingw-64
In-Reply-To: <044.6c8124652da0fa57525d1b4e0e26967e@osgeo.org>
References: <044.6c8124652da0fa57525d1b4e0e26967e@osgeo.org>
Message-ID: <053.5cccb9607b5ae1d647d2b6743a3f4a43@osgeo.org>

#447: Can't compile GEOS 3.3 under mingw-64
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.1                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by robe):

 strk -- it still doesn't work.  I guess you can push it to 3.3.2 once you
 create that milestone since it probably won't be fixed anytime soon.  My
 next attempt is to try to building using cmake but having issue compiling
 cmake under mingw64 which I have to workout.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/447#comment:7>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue Sep 27 11:42:23 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed Sep 28 15:54:11 2011
Subject: [geos-devel] Re: [GEOS] #447: Can't compile GEOS 3.3 under mingw-64
In-Reply-To: <044.6c8124652da0fa57525d1b4e0e26967e@osgeo.org>
References: <044.6c8124652da0fa57525d1b4e0e26967e@osgeo.org>
Message-ID: <053.2ec5363d492b34097b936277686bcef8@osgeo.org>

#447: Can't compile GEOS 3.3 under mingw-64
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.2                     
Component:  Default     |     Version:  3.3.0                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.1 => 3.3.2


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/447#comment:8>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Tue Sep 27 11:46:38 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed Sep 28 15:58:41 2011
Subject: [geos-devel] GEOS 3.3.1 tagged
Message-ID: <20110927154638.GH17136@gnash>

First bugfix release in the 3.3 series is tagged and ready for upload

  http://trac.osgeo.org/geos/browser/tags/3.3.1

Changes in 3.3.1:

- Bug fixes / improvements
  - Fix memory leak on invalid geometry in InteriorPointArea (#475)
  - ValidOp abort in presence of 2 touching holes forming an island (#449)
  - Enable prepared intersects operation for points
  - Fortify suspicious code found by static analisys tools
  - Fix for SOLARIS build (#461)
  - Fix EMPTY result from GEOSOffsetCurve with distance 0 (#454)
  - Fix Geometry::clone to copy SRID (#464)
  - Fix for clang builds (#463)
  - Fix out-of-place builds for python binding (#332) and regress testing
  - Fix OS X framework cmake build (#385)


--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From mateusz at loskot.net  Tue Sep 27 16:11:20 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Sep 28 20:37:48 2011
Subject: [geos-devel] Moving to github
In-Reply-To: <20110927124526.GA17136@gnash>
References: <20110920083234.GE2153@gnash>	<4D3C3E88-10E6-427A-9D4D-DE3A734FBCD1@gmail.com>	<20110920133527.GE19953@gnash>	<4085E72E-DC5C-4DB3-AD52-28F51A453BB6@gmail.com>	<20110921152503.GK2224@gnash>
	<4E7A065C.4050201@loskot.net>	<20110921160834.GL2224@gnash>
	<4E7C637F.50009@loskot.net>	<20110923112851.GF2995@gnash>
	<4E7E5D94.9080005@loskot.net> <20110927124526.GA17136@gnash>
Message-ID: <4E822DE8.5070306@loskot.net>

On 27/09/11 13:45, Sandro Santilli wrote:
> On Sat, Sep 24, 2011 at 11:45:40PM +0100, Mateusz Loskot wrote:
>>
>> Also, Alex (wildintellect) mentioned [1] OSGeo may introduce Git support
>> in near future.
>>
>> ...handing over to decision makers.
>>
>> [1] http://logs.qgis.org/slogs/%23qgis.2011-09-24.log
> 
> I'd wait for Git support in OSGeo.

OK

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From strk at keybit.net  Wed Sep 28 11:15:27 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu Sep 29 16:45:56 2011
Subject: [geos-devel] MakeValid in GEOS/JTS ?
Message-ID: <20110928151527.GV18361@gnash>

Martin, I've heard you've been considering adding a MakeValid-like
routine to JTS. When asked to port it from postgis to GEOS I've been
recluctant to avoid diverging too much from JTS, so I'm interested
in knowing if you really plan to do that and how.

In particular the PostGIS MakeValid attempts to also fix 1-point
lines and non-closed polygon rings, which would be impossible in 
GEOS/JTS due to early catch of such malformities. I'm concerned
that allowing those constructions would open up a can of worms
all over the codebase being full of assumptions about that level
of validity.

So, questions in order are:
 1) Are you planning to provide a function capable to fix all the
    cases that the PostGIS MakeValid fixes ?
 2) What is the estimated time by which it would be released ?

TIA

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From mtnclimb at gmail.com  Wed Sep 28 12:53:30 2011
From: mtnclimb at gmail.com (Martin Davis)
Date: Thu Sep 29 20:46:59 2011
Subject: [geos-devel] Re: MakeValid in GEOS/JTS ?
In-Reply-To: <20110928151527.GV18361@gnash>
References: <20110928151527.GV18361@gnash>
Message-ID: <CAK2ens3bED6xVnNtovaDoo=0nfff=4PV=3q7hXOW7R4tdHLmrA@mail.gmail.com>

Sandro,

Yes,some sort of MakeValid function would be nice to have in JTS/GEOS.  I
actually have some code already for fixing polygons, but it's not
production-ready.  I don't have any timeline for doing this work - no
funding, for one thing!  And lots of other stuff lined up before it.

As for functionality, that's a good point about not being able to fix
1-point linestrings and non-closed rings.  So this would have to remain on
the boundary of JTS/GEOS - such as in the PostGIS MakeValid routine.

The main focus of the work for me would be to make an efficient, robust way
of creating valid polygons from bad data.

Martin



On Wed, Sep 28, 2011 at 8:15 AM, Sandro Santilli <strk@keybit.net> wrote:

> Martin, I've heard you've been considering adding a MakeValid-like
> routine to JTS. When asked to port it from postgis to GEOS I've been
> recluctant to avoid diverging too much from JTS, so I'm interested
> in knowing if you really plan to do that and how.
>
> In particular the PostGIS MakeValid attempts to also fix 1-point
> lines and non-closed polygon rings, which would be impossible in
> GEOS/JTS due to early catch of such malformities. I'm concerned
> that allowing those constructions would open up a can of worms
> all over the codebase being full of assumptions about that level
> of validity.
>
> So, questions in order are:
>  1) Are you planning to provide a function capable to fix all the
>    cases that the PostGIS MakeValid fixes ?
>  2) What is the estimated time by which it would be released ?
>
> TIA
>
> --strk;
>
>  ()   Free GIS & Flash consultant/developer
>  /\   http://strk.keybit.net/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20110928/e2c8b514/attachment.html
From strk at keybit.net  Thu Sep 29 04:35:21 2011
From: strk at keybit.net (Martin Davis)
Date: Fri Sep 30 11:02:18 2011
Subject: [geos-devel] Re: MakeValid in GEOS/JTS ?
In-Reply-To: <20110928151527.GV18361@gnash>
Message-ID: <20110929083521.GA2071@gnash>

Sandro,

Yes,some sort of MakeValid function would be nice to have in JTS/GEOS.  I
actually have some code already for fixing polygons, but it's not
production-ready.  I don't have any timeline for doing this work - no
funding, for one thing!  And lots of other stuff lined up before it.

As for functionality, that's a good point about not being able to fix
1-point linestrings and non-closed rings.  So this would have to remain on
the boundary of JTS/GEOS - such as in the PostGIS MakeValid routine.

The main focus of the work for me would be to make an efficient, robust way
of creating valid polygons from bad data.

Martin



On Wed, Sep 28, 2011 at 8:15 AM, Sandro Santilli <strk@keybit.net> wrote:

> Martin, I've heard you've been considering adding a MakeValid-like
> routine to JTS. When asked to port it from postgis to GEOS I've been
> recluctant to avoid diverging too much from JTS, so I'm interested
> in knowing if you really plan to do that and how.
>
> In particular the PostGIS MakeValid attempts to also fix 1-point
> lines and non-closed polygon rings, which would be impossible in
> GEOS/JTS due to early catch of such malformities. I'm concerned
> that allowing those constructions would open up a can of worms
> all over the codebase being full of assumptions about that level
> of validity.
>
> So, questions in order are:
>  1) Are you planning to provide a function capable to fix all the
>    cases that the PostGIS MakeValid fixes ?
>  2) What is the estimated time by which it would be released ?
>
> TIA
>
> --strk;
>
>  ()   Free GIS & Flash consultant/developer
>  /\   http://strk.keybit.net/services.html
>
From strk at keybit.net  Thu Sep 29 04:52:17 2011
From: strk at keybit.net (Sandro Santilli)
Date: Fri Sep 30 11:20:08 2011
Subject: [geos-devel] Re: MakeValid in GEOS/JTS ?
In-Reply-To: <20110929083521.GA2071@gnash>
References: <20110928151527.GV18361@gnash>
 <20110929083521.GA2071@gnash>
Message-ID: <20110929085217.GG2071@gnash>

You may have noticed this mail looks like forged.

It is a mail that Martin accidentally only sent to me and agreed
to bounce to the mailing list. Since the bounce didn't get trought
I tried simply editing the headers. It arrived this time, but my
MUA or any MTA in between rewrote the headers again so that it
looks the From is myself.

Sorry for the trouble.

On Thu, Sep 29, 2011 at 10:35:21AM +0200, Martin Davis wrote:
> Sandro,
> 
> Yes,some sort of MakeValid function would be nice to have in JTS/GEOS.  I
> actually have some code already for fixing polygons, but it's not
> production-ready.  I don't have any timeline for doing this work - no
> funding, for one thing!  And lots of other stuff lined up before it.
> 
> As for functionality, that's a good point about not being able to fix
> 1-point linestrings and non-closed rings.  So this would have to remain on
> the boundary of JTS/GEOS - such as in the PostGIS MakeValid routine.
> 
> The main focus of the work for me would be to make an efficient, robust way
> of creating valid polygons from bad data.
> 
> Martin
> 
> 
> 
> On Wed, Sep 28, 2011 at 8:15 AM, Sandro Santilli <strk@keybit.net> wrote:
> 
> > Martin, I've heard you've been considering adding a MakeValid-like
> > routine to JTS. When asked to port it from postgis to GEOS I've been
> > recluctant to avoid diverging too much from JTS, so I'm interested
> > in knowing if you really plan to do that and how.
> >
> > In particular the PostGIS MakeValid attempts to also fix 1-point
> > lines and non-closed polygon rings, which would be impossible in
> > GEOS/JTS due to early catch of such malformities. I'm concerned
> > that allowing those constructions would open up a can of worms
> > all over the codebase being full of assumptions about that level
> > of validity.
> >
> > So, questions in order are:
> >  1) Are you planning to provide a function capable to fix all the
> >    cases that the PostGIS MakeValid fixes ?
> >  2) What is the estimated time by which it would be released ?
> >
> > TIA
> >
> > --strk;
> >
> >  ()   Free GIS & Flash consultant/developer
> >  /\   http://strk.keybit.net/services.html
> >
