From geos-trac at osgeo.org  Fri May  8 09:52:23 2009
From: geos-trac at osgeo.org (GEOS)
Date: Fri May  8 09:52:24 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.f5a85c1c4fd5d0b5f8a53e6033615d96@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 Confirmed, still a problem. From 52 polygons to 48. Input is found to be
 valid.
 This is an ugly bug occasionally popping out in different situations.
 For example the geom in bug #219 also trigger a silent "eat-up" of a
 component (well, input is invalid in that case).

 Another case (giving more informations about how bad this bug is) is
 TestBufferExternal2.xml, which contain a test in which you get an EMPTY
 geometry
 from a buffer operation depending on -ffloat-store. Check buildbot for the
 history
 of this, or build w/out -ffloat-store on a 32bit system and run make
 check.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Fri May  8 10:47:11 2009
From: strk at keybit.net (strk)
Date: Fri May  8 10:47:15 2009
Subject: [geos-devel] Re: GEOS, Shapely, DLLs, and memory (Mateusz Loskot)
In-Reply-To: <738927440904301102v3efe527u43fcb92d10b37d2e@mail.gmail.com>
References: <738927440904301102v3efe527u43fcb92d10b37d2e@mail.gmail.com>
Message-ID: <20090508144711.GE98595@keybit.net>

On Thu, Apr 30, 2009 at 11:02:51AM -0700, Ragi Y. Burhum wrote:

> This shows my ignorance of the C-API :) I have been working exclusively with
> the C++ ABI

Don't!! :)
I'm changing more of the ABI, everytime something improves
it's an ABI (and sometimes API) change for C++.
C api is rock-solid !

--strk;

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From geos-trac at osgeo.org  Fri May  8 11:06:46 2009
From: geos-trac at osgeo.org (GEOS)
Date: Fri May  8 11:06:47 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.318b7ccde5b4a1cc0168c751c31ab076@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 I attach an XML tester, Martin any tip from your side ? How does JTS deal
 with that ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Fri May  8 12:00:30 2009
From: geos-trac at osgeo.org (GEOS)
Date: Fri May  8 12:00:30 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.8c02badedf8d0fb810a44a48251d2d5e@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 I've verified that all components of input geometry are Polygons with no
 holes.
 All are valid.
 All cleanly buffer(0)...

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Fri May  8 12:25:21 2009
From: geos-trac at osgeo.org (GEOS)
Date: Fri May  8 12:25:22 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.b175871f6bfced299137e9da5052c8d2@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 of the 52 polygons, 52 BufferSubgraphs are created and passed to
 PolygonBuilder
 which returns 48 polygons only.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From pramsey at opengeo.org  Fri May  8 12:35:22 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Fri May  8 12:35:24 2009
Subject: [geos-devel] Re: GEOS, Shapely, DLLs, and memory (Mateusz Loskot)
In-Reply-To: <20090508144711.GE98595@keybit.net>
References: <738927440904301102v3efe527u43fcb92d10b37d2e@mail.gmail.com>
	<20090508144711.GE98595@keybit.net>
Message-ID: <30fe546d0905080935x182a6f95mc94deca1acc3077b@mail.gmail.com>

Hopefully Ragi meant the C++ A*P*I. I'm pretty sure he re-compiles
regularly so the ABI issues shouldn't be a problem. The API changes
should be fun though :)

P

On Fri, May 8, 2009 at 7:47 AM, strk <strk@keybit.net> wrote:
> On Thu, Apr 30, 2009 at 11:02:51AM -0700, Ragi Y. Burhum wrote:
>
>> This shows my ignorance of the C-API :) I have been working exclusively with
>> the C++ ABI
>
> Don't!! :)
> I'm changing more of the ABI, everytime something improves
> it's an ABI (and sometimes API) change for C++.
> C api is rock-solid !
>
> --strk;
>
> ?Free GIS & Flash consultant/developer ? ? ?() ?ASCII Ribbon Campaign
> ?http://foo.keybit.net/~strk/services.html ?/\ ?Keep it simple!
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mbdavis at refractions.net  Fri May  8 17:09:11 2009
From: mbdavis at refractions.net (Martin Davis)
Date: Fri May  8 17:06:49 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements
	of	multpolygon
In-Reply-To: <056.318b7ccde5b4a1cc0168c751c31ab076@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
	<056.318b7ccde5b4a1cc0168c751c31ab076@osgeo.org>
Message-ID: <4A049F77.2010007@refractions.net>

Works fine in JTS. 

Input: [[ MULTIPOLYGON - 52 elements, 3038 pts ]]
Output: [[ MULTIPOLYGON - 52 elements, 3038 pts ]]

GEOS wrote:
> #244: Buffer fails to buffer elements of multpolygon
> ------------------------+---------------------------------------------------
>  Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
>      Type:  defect      |       Status:  new                       
>  Priority:  major       |    Milestone:  3.1.1                     
> Component:  Default     |      Version:  3.0.3                     
>  Severity:  Unassigned  |   Resolution:                            
>  Keywords:              |  
> ------------------------+---------------------------------------------------
> Comment (by strk):
>
>  I attach an XML tester, Martin any tip from your side ? How does JTS deal
>  with that ?
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022

From geos-trac at osgeo.org  Tue May 12 09:19:57 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 12 09:19:58 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.35baeae566c01184500aff83953d37cd@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 bug244-simp1.xml is a simplification of the testcases. The input
 multipolygon contains 5 polygons, none with holes. 2 are returned by
 buffer(0).

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 12 09:59:58 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 12 10:00:00 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.0de44aa3d7afd19e52fc6a3e168908aa@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 bug244-simp2.xml yet another simplification. This time it's 4 polygons
 input.
 Note that dropping any more polygon from input results in a correct
 output.
 Keeping all of 4 polygons results in a single polygon output

 orig     |
          : MultiPolygon[BS] with 3 elements
          :   Polygon[] with 1 rings
          :    ring 0 has 204 points
          :   Polygon[] with 1 rings
          :    ring 0 has 404 points
          :   Polygon[] with 1 rings
          :    ring 0 has 25 points
          :
 buffered |
          : Polygon[BS] with 1 rings
          :    ring 0 has 204 points
          :

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 12 10:28:12 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 12 10:28:13 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.ba0e7f5d9c0a019f2597a6640ad89287@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 Ehm, you may have noticed the input polygons are 3, not 4.
 The rest applies.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:7>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 12 10:35:04 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 12 10:35:06 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.18358016b1256667466960f7914661d4@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 This seems interesting. Of the 3 calls to ::buildMaximalEdgeRings, each
 for each polygon
 in input, only one returns a "maxEdgeRing":

 0x7fff2ad7da30] PolygonBuilder::buildMaximalEdgeRings got 2 dirEdges
 0x7fff2ad7da30] PolygonBuilder::buildMaximalEdgeRings returning 1
 maxEdgeRings

 0x7fff2ad7da30] PolygonBuilder::buildMaximalEdgeRings got 2 dirEdges
 0x7fff2ad7da30] PolygonBuilder::buildMaximalEdgeRings returning 0
 maxEdgeRings

 0x7fff2ad7da30] PolygonBuilder::buildMaximalEdgeRings got 2 dirEdges
 0x7fff2ad7da30] PolygonBuilder::buildMaximalEdgeRings returning 0
 maxEdgeRings

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:8>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 12 12:21:54 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 12 12:21:55 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.52e57786e9f3fb1acdf5a4dbecef2782@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

 * cc: mbdavis@refractions.net (added)

Comment:

 Alright, got to build JTS correctly and added debugging traces there.
 So far I'm in BufferBuilder, where depths are computed and result edges
 found.
 JTS and GEOS differ in the depths they compute:

 JTS goes like this:

  (1)
    dirEdge 0 inResult:false isArea:true leftDepth:1 rightDepth:0
    dirEdge 1 inResult:true isArea:true leftDepth:0 rightDepth:1
  (2)
    dirEdge 0 inResult:true isArea:true leftDepth:0 rightDepth:1
    dirEdge 1 inResult:false isArea:true leftDepth:1 rightDepth:0
  (3)
   dirEdge 0 inResult:false isArea:true leftDepth:1 rightDepth:0
   dirEdge 1 inResult:true isArea:true leftDepth:0 rightDepth:1

 GEOS, on the other hand, gets to compute depths > 1 for polygon 2 and 3
 (the ones
 that disappear from output):

  (1) <--- FINE
   dirEdge 0 inResult:0 isArea:1 leftDepth:1 rightDepth:0
   dirEdge 1 inResult:1 isArea:1 leftDepth:0 rightDepth:1
  (2) <--- BOGUS DEPTHS !
   dirEdge 0 inResult:0 isArea:1 leftDepth:1 rightDepth:2
   dirEdge 1 inResult:0 isArea:1 leftDepth:2 rightDepth:1
  (3) <--- BOGUS DEPTHS !
   dirEdge 0 inResult:0 isArea:1 leftDepth:2 rightDepth:1
   dirEdge 1 inResult:0 isArea:1 leftDepth:1 rightDepth:2


 Martin, I'll keep going, if anything rings a bell there please let me know
 :)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:9>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 12 12:31:43 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 12 12:31:45 2009
Subject: [geos-devel] Re: [GEOS] #244: Buffer fails to buffer elements of
	multpolygon
In-Reply-To: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
References: <047.7d69fea1e4d97eca1f8a695058329e23@osgeo.org>
Message-ID: <056.a923fe3999d79e289a1733db227d6a36@osgeo.org>

#244: Buffer fails to buffer elements of multpolygon
------------------------+---------------------------------------------------
 Reporter:  pramsey     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 In JTS, SubgraphDepthLocater finds outsideDepth=0 for all input polygons
 In GEOS, it finds outsideDepth=0 for the first, =1 for the second and
 third (the one not getting into the result)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/244#comment:10>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 12 13:28:47 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 12 13:28:48 2009
Subject: [geos-devel] Re: [GEOS] #241: GEOSBuffer produces an invalid
	geometry
In-Reply-To: <047.003a29a93fcb93c12eac3fa438961f2f@osgeo.org>
References: <047.003a29a93fcb93c12eac3fa438961f2f@osgeo.org>
Message-ID: <056.a55318ba2e4bda78b3f8f2a1f81fd4fb@osgeo.org>

#241: GEOSBuffer produces an invalid geometry
------------------------+---------------------------------------------------
 Reporter:  pleroux     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.0                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by strk):

 Please test r2504 or later. If the problem persist try providing an XML
 test case.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/241#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From warmerdam at pobox.com  Tue May 12 16:38:59 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 12 16:39:19 2009
Subject: [geos-devel] GEOS cross-heap problems
Message-ID: <4A09DE63.9020907@pobox.com>

Folks,

I had a serious problem reported by a client of mine. The issue turned out
to be that the OSGeo4W GEOS package was built with a different version of
visual studio than the OSGeo4W GDAL package.  The GDAL package calls:

     pabyBuf = GEOSGeomToWKB_buf( geosGeom, &nSize );
     ...
     free( pabyBuf );

The problem is that the buffer allocated by GEOS c-runtime is being freed
with the free() of the GDAL c-runtime resulting in heap corruption.

For things like geometry and coordinate sequences we have special
deallocators available as part of the GEOS C API.  However this is not
the case (as far as I know) for plain malloc()/free() type stuff.

So my questions are:

  1) Am I missing an existing GEOSFree() function?

  2) Shall I go ahead and add such a thing?

  3) If I do, are there objections to me incorporating it into the GEOS 3.0
     branch too?  This is what OSGeo4W depends on.

PS. I believe such a free function would also be appropriate to use for
the results of GEOSGeomType(), GEOSGeomToWKT(), and GEOSGeomtoHEX_buf().

PPS. I have to say, featuring the GEOS API docs so far down the main page
under "Other Information" seems cruel!

PPPS. Do we have C API docs?  Do we intend to?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue May 12 16:47:13 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 12 16:47:37 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <4A09DE63.9020907@pobox.com>
References: <4A09DE63.9020907@pobox.com>
Message-ID: <4A09E051.6020807@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> I had a serious problem reported by a client of mine. The issue turned out
> to be that the OSGeo4W GEOS package was built with a different version of
> visual studio than the OSGeo4W GDAL package.  The GDAL package calls:
> 
>     pabyBuf = GEOSGeomToWKB_buf( geosGeom, &nSize );
>     ...
>     free( pabyBuf );
> 
> The problem is that the buffer allocated by GEOS c-runtime is being freed
> with the free() of the GDAL c-runtime resulting in heap corruption.
> 
> For things like geometry and coordinate sequences we have special
> deallocators available as part of the GEOS C API.  However this is not
> the case (as far as I know) for plain malloc()/free() type stuff.
> 
> So my questions are:
> 
>  1) Am I missing an existing GEOSFree() function?

Folks,

Howard has pointed out that this is already a known issue, listed in:

   http://trac.osgeo.org/geos/ticket/249

I see Paul has "accepted" the ticket, but I don't see any sign that it
has been incorporated.  Also, what constraints do we have on backporting
an API *addition* like this?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at opengeo.org  Tue May 12 17:03:15 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Tue May 12 17:09:26 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <4A09E051.6020807@pobox.com>
References: <4A09DE63.9020907@pobox.com> <4A09E051.6020807@pobox.com>
Message-ID: <30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>

Frank,

Please feel free to add the patch into trunk.

Regarding API additions, I am feeling a little conservative. At a
minimum, once you start doing that, all the downstream packages have
to start testing for revision in order to know if they can call the
feature.

I'd like to hear from others on this.

On a related note, strk has completed a large run through upgrading
GEOS to the latest JTS, which has added some extra robustness to a
number of cases, and he's also tracked and killed some long-standing
bugs. A GEOS 3.2 would not be a bad thing to have, rather than letting
the functionality moulder in SVN. (This would also be a fine place for
API changes)

P.

On Tue, May 12, 2009 at 1:47 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Frank Warmerdam wrote:
>>
>> Folks,
>>
>> I had a serious problem reported by a client of mine. The issue turned out
>> to be that the OSGeo4W GEOS package was built with a different version of
>> visual studio than the OSGeo4W GDAL package. ?The GDAL package calls:
>>
>> ? ?pabyBuf = GEOSGeomToWKB_buf( geosGeom, &nSize );
>> ? ?...
>> ? ?free( pabyBuf );
>>
>> The problem is that the buffer allocated by GEOS c-runtime is being freed
>> with the free() of the GDAL c-runtime resulting in heap corruption.
>>
>> For things like geometry and coordinate sequences we have special
>> deallocators available as part of the GEOS C API. ?However this is not
>> the case (as far as I know) for plain malloc()/free() type stuff.
>>
>> So my questions are:
>>
>> ?1) Am I missing an existing GEOSFree() function?
>
> Folks,
>
> Howard has pointed out that this is already a known issue, listed in:
>
> ?http://trac.osgeo.org/geos/ticket/249
>
> I see Paul has "accepted" the ticket, but I don't see any sign that it
> has been incorporated. ?Also, what constraints do we have on backporting
> an API *addition* like this?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From warmerdam at pobox.com  Wed May 13 00:19:23 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 13 00:19:32 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>
References: <4A09DE63.9020907@pobox.com> <4A09E051.6020807@pobox.com>
	<30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>
Message-ID: <4A0A4A4B.6000508@pobox.com>

Paul Ramsey wrote:
> Frank,
> 
> Please feel free to add the patch into trunk.

Paul,

Done (r2506).  Details at:

   http://trac.osgeo.org/geos/ticket/249

> Regarding API additions, I am feeling a little conservative. At a
> minimum, once you start doing that, all the downstream packages have
> to start testing for revision in order to know if they can call the
> feature.
 >
> I'd like to hear from others on this.

OK - though I don't see the downside.  Downstream packages only need
to check for, and use GEOSFree() if they want.  We are just adding a
new option, not altering an existing one or removing anything.

> On a related note, strk has completed a large run through upgrading
> GEOS to the latest JTS, which has added some extra robustness to a
> number of cases, and he's also tracked and killed some long-standing
> bugs. A GEOS 3.2 would not be a bad thing to have, rather than letting
> the functionality moulder in SVN. (This would also be a fine place for
> API changes)

I'd be pleased to see GEOS 3.2 though for my purposes (OSGeo4W) I would
really like GEOSFree() in GEOS 3.0.4.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at opengeo.org  Wed May 13 00:43:13 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed May 13 00:43:15 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <4A0A4A4B.6000508@pobox.com>
References: <4A09DE63.9020907@pobox.com> <4A09E051.6020807@pobox.com>
	<30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>
	<4A0A4A4B.6000508@pobox.com>
Message-ID: <30fe546d0905122143i209e904ayfeaf4a9559306816@mail.gmail.com>

Other comments? I have only vague discomfort, so in the absence of
someone else having issues, I will subordinate my theoretical musing
to Frank's practical need.

P.

On Tue, May 12, 2009 at 9:19 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Paul Ramsey wrote:
>>
>> Frank,
>>
>> Please feel free to add the patch into trunk.
>
> Paul,
>
> Done (r2506). ?Details at:
>
> ?http://trac.osgeo.org/geos/ticket/249
>
>> Regarding API additions, I am feeling a little conservative. At a
>> minimum, once you start doing that, all the downstream packages have
>> to start testing for revision in order to know if they can call the
>> feature.
>
>>
>>
>> I'd like to hear from others on this.
>
> OK - though I don't see the downside. ?Downstream packages only need
> to check for, and use GEOSFree() if they want. ?We are just adding a
> new option, not altering an existing one or removing anything.
>
>> On a related note, strk has completed a large run through upgrading
>> GEOS to the latest JTS, which has added some extra robustness to a
>> number of cases, and he's also tracked and killed some long-standing
>> bugs. A GEOS 3.2 would not be a bad thing to have, rather than letting
>> the functionality moulder in SVN. (This would also be a fine place for
>> API changes)
>
> I'd be pleased to see GEOS 3.2 though for my purposes (OSGeo4W) I would
> really like GEOSFree() in GEOS 3.0.4.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From strk at keybit.net  Wed May 13 02:49:58 2009
From: strk at keybit.net (strk)
Date: Wed May 13 02:50:11 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <4A0A4A4B.6000508@pobox.com>
References: <4A09DE63.9020907@pobox.com> <4A09E051.6020807@pobox.com>
	<30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>
	<4A0A4A4B.6000508@pobox.com>
Message-ID: <20090513064958.GG575@keybit.net>

On Wed, May 13, 2009 at 12:19:23AM -0400, Frank Warmerdam wrote:
> Paul Ramsey wrote:

> >I'd like to hear from others on this.
> 
> OK - though I don't see the downside.  Downstream packages only need
> to check for, and use GEOSFree() if they want.  We are just adding a
> new option, not altering an existing one or removing anything.

Agreed, no compatibility problem adding a GEOSFree.
Only, it'll have to stay (I've read Mateusz suggesting using
type-specific destroyers).

Worth going throught the CAPI header files and properly document 
when to use GEOSFree on the return right above the function. 

PS: I've noticed Frank added a ChangeLog entry manually.
    Was that the way ? As I haven't touched it :(


--strk;

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From warmerdam at pobox.com  Wed May 13 08:43:35 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 13 08:43:44 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <20090513064958.GG575@keybit.net>
References: <4A09DE63.9020907@pobox.com> <4A09E051.6020807@pobox.com>
	<30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>
	<4A0A4A4B.6000508@pobox.com> <20090513064958.GG575@keybit.net>
Message-ID: <4A0AC077.3010602@pobox.com>

strk wrote:
> On Wed, May 13, 2009 at 12:19:23AM -0400, Frank Warmerdam wrote:
>> Paul Ramsey wrote:
> 
>>> I'd like to hear from others on this.
>> OK - though I don't see the downside.  Downstream packages only need
>> to check for, and use GEOSFree() if they want.  We are just adding a
>> new option, not altering an existing one or removing anything.
> 
> Agreed, no compatibility problem adding a GEOSFree.

Folks,

OK, I've back ported the GEOSFree() function into the 3.1 branch.

Note, it will be very important to ensure that the C API version
is upgraded for the 3.1.1 release.  I'm not sure how we remember
to do stuff like this.  I see there have been a few fixes in the 3.1
branch:

   http://trac.osgeo.org/geos/log/branches/3.1

Perhaps it would be appropriate for us to roll out a 3.1.1?

> Only, it'll have to stay (I've read Mateusz suggesting using
> type-specific destroyers).

I cannot imagine why a type specific destroyer would be needed
for simple malloc()/free() buffer allocations.

> Worth going throught the CAPI header files and properly document 
> when to use GEOSFree on the return right above the function. 

I have slightly modified the geos_c.h.in to reflect use of GEOSFree()
but I wonder if there is other documentation of the C API.

> PS: I've noticed Frank added a ChangeLog entry manually.
>     Was that the way ? As I haven't touched it :(

I assumed this was expected practice since the ChangeLog exists
and is updated by at least some developers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Wed May 13 09:42:25 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed May 13 09:42:15 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <4A0AC077.3010602@pobox.com>
References: <4A09DE63.9020907@pobox.com>
	<4A09E051.6020807@pobox.com>	<30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>	<4A0A4A4B.6000508@pobox.com>
	<20090513064958.GG575@keybit.net> <4A0AC077.3010602@pobox.com>
Message-ID: <4A0ACE41.1080108@loskot.net>

Frank Warmerdam wrote:
> strk wrote:
>> On Wed, May 13, 2009 at 12:19:23AM -0400, Frank Warmerdam wrote:
>> Only, it'll have to stay (I've read Mateusz suggesting using
>> type-specific destroyers).
> 
> I cannot imagine why a type specific destroyer would be needed
> for simple malloc()/free() buffer allocations.

Frank,

But GEOS user does not know what allocator is hidden behind 
GEOSGeomToWKT function and he does *not* need or want to know.

GEOSFree exposes all the meat that is supposed be encapsulated
and it makes GEOS C API not symmetric so confusing.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From sgillies at frii.com  Wed May 13 10:59:05 2009
From: sgillies at frii.com (Sean Gillies)
Date: Wed May 13 11:07:58 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <4A0ACE41.1080108@loskot.net>
References: <4A09DE63.9020907@pobox.com>
	<4A09E051.6020807@pobox.com>	<30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>	<4A0A4A4B.6000508@pobox.com>
	<20090513064958.GG575@keybit.net> <4A0AC077.3010602@pobox.com>
	<4A0ACE41.1080108@loskot.net>
Message-ID: <3D1A311A-8DA8-479E-9B44-00EB2B84807E@frii.com>


On May 13, 2009, at 7:42 AM, Mateusz Loskot wrote:

> Frank Warmerdam wrote:
>> strk wrote:
>>> On Wed, May 13, 2009 at 12:19:23AM -0400, Frank Warmerdam wrote:
>>> Only, it'll have to stay (I've read Mateusz suggesting using
>>> type-specific destroyers).
>> I cannot imagine why a type specific destroyer would be needed
>> for simple malloc()/free() buffer allocations.
>
> Frank,
>
> But GEOS user does not know what allocator is hidden behind  
> GEOSGeomToWKT function and he does *not* need or want to know.
>
> GEOSFree exposes all the meat that is supposed be encapsulated
> and it makes GEOS C API not symmetric so confusing.

Aren't we supposed to be using the reader/writer API now? Add  
GEOSWK*Writer_Free functions (if we must) to those interfaces and  
GEOSFree to address the problem with deprecated GeomToWKT?

Cheers,
Sean

From warmerdam at pobox.com  Wed May 13 11:29:38 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 13 11:30:42 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <3D1A311A-8DA8-479E-9B44-00EB2B84807E@frii.com>
References: <4A09DE63.9020907@pobox.com> <4A09E051.6020807@pobox.com>
	<30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>
	<4A0A4A4B.6000508@pobox.com> <20090513064958.GG575@keybit.net>
	<4A0AC077.3010602@pobox.com> <4A0ACE41.1080108@loskot.net>
	<3D1A311A-8DA8-479E-9B44-00EB2B84807E@frii.com>
Message-ID: <4A0AE762.2010304@pobox.com>

Sean Gillies wrote:
> 
> On May 13, 2009, at 7:42 AM, Mateusz Loskot wrote:
> 
>> Frank Warmerdam wrote:
>>> strk wrote:
>>>> On Wed, May 13, 2009 at 12:19:23AM -0400, Frank Warmerdam wrote:
>>>> Only, it'll have to stay (I've read Mateusz suggesting using
>>>> type-specific destroyers).
>>> I cannot imagine why a type specific destroyer would be needed
>>> for simple malloc()/free() buffer allocations.
>>
>> Frank,
>>
>> But GEOS user does not know what allocator is hidden behind 
>> GEOSGeomToWKT function and he does *not* need or want to know.
>>
>> GEOSFree exposes all the meat that is supposed be encapsulated
>> and it makes GEOS C API not symmetric so confusing.
> 
> Aren't we supposed to be using the reader/writer API now? Add 
> GEOSWK*Writer_Free functions (if we must) to those interfaces and 
> GEOSFree to address the problem with deprecated GeomToWKT?

Sean / Mateusz,

It is my personal opinion that since these buffers are just allocated
from the heap with malloc(), exposing a GEOS specific free - and making
it clear when it is suitable to use is a more than adequate solution.

If you guys feel strongly enough about type specific, or reader/writer
interface specific deallocators for these buffers then I'd suggest you
bring it to a motion to replace/override my implementation and I'll
then adapt GDAL appropriately.

I'm in a bad mood, and less receptive than normal to esoteric conceptual
correctness wanking.

Regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Wed May 13 12:47:23 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed May 13 12:47:13 2009
Subject: [geos-devel] GEOS cross-heap problems
In-Reply-To: <4A0AE762.2010304@pobox.com>
References: <4A09DE63.9020907@pobox.com>
	<4A09E051.6020807@pobox.com>	<30fe546d0905121403p42b8d399w6db44995ded7b15c@mail.gmail.com>	<4A0A4A4B.6000508@pobox.com>
	<20090513064958.GG575@keybit.net>	<4A0AC077.3010602@pobox.com>
	<4A0ACE41.1080108@loskot.net>	<3D1A311A-8DA8-479E-9B44-00EB2B84807E@frii.com>
	<4A0AE762.2010304@pobox.com>
Message-ID: <4A0AF99B.1020800@loskot.net>

Frank Warmerdam wrote:
> Sean Gillies wrote:
>>
>> On May 13, 2009, at 7:42 AM, Mateusz Loskot wrote:
>>
>>> Frank Warmerdam wrote:
>>>> strk wrote:
>>>>> On Wed, May 13, 2009 at 12:19:23AM -0400, Frank Warmerdam wrote:
>>>>> Only, it'll have to stay (I've read Mateusz suggesting using
>>>>> type-specific destroyers).
>>>> I cannot imagine why a type specific destroyer would be needed
>>>> for simple malloc()/free() buffer allocations.
>>>
>>> Frank,
>>>
>>> But GEOS user does not know what allocator is hidden behind 
>>> GEOSGeomToWKT function and he does *not* need or want to know.
>>>
>>> GEOSFree exposes all the meat that is supposed be encapsulated
>>> and it makes GEOS C API not symmetric so confusing.
>>
>> Aren't we supposed to be using the reader/writer API now? Add 
>> GEOSWK*Writer_Free functions (if we must) to those interfaces and 
>> GEOSFree to address the problem with deprecated GeomToWKT?
> 
> Sean / Mateusz,
> 
> It is my personal opinion that since these buffers are just allocated
> from the heap with malloc(), exposing a GEOS specific free - and making
> it clear when it is suitable to use is a more than adequate solution.
> 
> If you guys feel strongly enough about type specific, or reader/writer
> interface specific deallocators for these buffers then I'd suggest you
> bring it to a motion to replace/override my implementation and I'll
> then adapt GDAL appropriately.

I have no idea of GEOS C API design in terms of consistency vs entropy.

> I'm in a bad mood, and less receptive than normal to esoteric conceptual
> correctness wanking.

I'm not responsible for GEOS development, so please forget
about the mess I've caused here and there.

As usually, I probably shouldn't take the floor :-)

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From geos-trac at osgeo.org  Thu May 14 04:16:00 2009
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 14 04:16:02 2009
Subject: [geos-devel] Re: [GEOS] #241: GEOSBuffer produces an invalid
	geometry
In-Reply-To: <047.003a29a93fcb93c12eac3fa438961f2f@osgeo.org>
References: <047.003a29a93fcb93c12eac3fa438961f2f@osgeo.org>
Message-ID: <056.02e9c930425c4227b3b7146769ca3a71@osgeo.org>

#241: GEOSBuffer produces an invalid geometry
------------------------+---------------------------------------------------
 Reporter:  pleroux     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.0                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by pleroux):

 With r2509, the problem doesn't persist any more. "is_valid" attribute is
 True for the two buffers (see example code above) and, visually, the big
 hole that disappeared with older releases is correctly handled now.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/241#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu May 14 05:57:35 2009
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 14 05:57:37 2009
Subject: [geos-devel] Re: [GEOS] #241: GEOSBuffer produces an invalid
	geometry
In-Reply-To: <047.003a29a93fcb93c12eac3fa438961f2f@osgeo.org>
References: <047.003a29a93fcb93c12eac3fa438961f2f@osgeo.org>
Message-ID: <056.721eae5961d79ae96c9c480099b3c427@osgeo.org>

#241: GEOSBuffer produces an invalid geometry
------------------------+---------------------------------------------------
 Reporter:  pleroux     |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.0                     
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/241#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon May 18 19:17:54 2009
From: geos-trac at osgeo.org (GEOS)
Date: Mon May 18 19:17:55 2009
Subject: [geos-devel] [GEOS] #253: Unexpected "Self-intersection at or near
	point"
Message-ID: <048.feb8d305eb9149f40986898c5ccb1dd7@osgeo.org>

#253: Unexpected "Self-intersection at or near point"
------------------------+---------------------------------------------------
 Reporter:  wvereeck    |       Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |      Status:  new                       
 Priority:  minor       |   Milestone:  3.1.1                     
Component:  Core        |     Version:  3.1.0                     
 Severity:  Unassigned  |    Keywords:  self-intersection         
------------------------+---------------------------------------------------
 Hi All,

 I'm very new to GEOS (< 1 day), but I'm puzzled by what I think is a
 strange bug.
 Being particularly interested in the GEOSUnionCascaded() function to merge
 large sets (>50,000) of overlapping polygons, altering my dataset manually
 to avoid this bug(?) is not an option.

 I have narrowed down the problem to the following multipolygon, which
 represents a rectangle inside an octagon (see
 http://homes.esat.kuleuven.be/~wvereeck/rect_inside_oct.png)

 MULTIPOLYGON(((12.26 18.46, 11.76 18.46, 11.54 18.24, 11.54 17.34, 11.76
 17.12, 12.26 17.12, 12.48 17.34, 12.48 18.24, 12.26 18.46)),((12.37 18.35,
 11.65 18.35, 11.65 17.23, 12.37 17.23, 12.37 18.35)))

 I am using the c-interface. Running the GEOSisValid() test on this polygon
 set results in:
    NOTICE: Self-intersection at or near point 12.37 18.35
 Also, GEOSUnionCascaded() accordingly fails with:
    ERROR: TopologyException: found non-noded intersection between 11.65
 etc...

 However, when I slightly offset the x-position (+1e-8) of the two top
 vertices of the rectangle, everything works like a charm (i.e. GEOSisValid
 returns 'true' and GEOSUnionCascaded produces the correct output polygon):

 MULTIPOLYGON(((12.26 18.46, 11.76 18.46, 11.54 18.24, 11.54 17.34, 11.76
 17.12, 12.26 17.12, 12.48 17.34, 12.48 18.24, 12.26 18.46)), ((12.37000001
 18.35, 11.65000001 18.35, 11.65 17.23, 12.37 17.23, 12.37000001 18.35)))

 I apologize if I'm too much in a hurry here and should start to learn more
 about geos before submitting a complaint :) At least I hope this is the
 right place for this problem.

 Kind Regards,
 Wim Vereecken

 FWIW, I'm using geos-3.1.0.tar.bz2 (2009/03/17), libgeos-3.1.0 and Ubuntu
 8.04.2 (x86-64) with a 2.6.24-23-generic kernel.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/253>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 19 12:18:21 2009
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 19 12:18:22 2009
Subject: [geos-devel] Re: [GEOS] #253: Unexpected "Self-intersection at or
	near point"
In-Reply-To: <048.feb8d305eb9149f40986898c5ccb1dd7@osgeo.org>
References: <048.feb8d305eb9149f40986898c5ccb1dd7@osgeo.org>
Message-ID: <057.f32e6739a6de0495d07a63d2b81e850b@osgeo.org>

#253: Unexpected "Self-intersection at or near point"
-------------------------------+--------------------------------------------
 Reporter:  wvereeck           |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect             |       Status:  new                       
 Priority:  minor              |    Milestone:  3.1.1                     
Component:  Core               |      Version:  3.1.0                     
 Severity:  Unassigned         |   Resolution:                            
 Keywords:  self-intersection  |  
-------------------------------+--------------------------------------------
Old description:

> Hi All,
>
> I'm very new to GEOS (< 1 day), but I'm puzzled by what I think is a
> strange bug.
> Being particularly interested in the GEOSUnionCascaded() function to
> merge large sets (>50,000) of overlapping polygons, altering my dataset
> manually to avoid this bug(?) is not an option.
>
> I have narrowed down the problem to the following multipolygon, which
> represents a rectangle inside an octagon (see
> http://homes.esat.kuleuven.be/~wvereeck/rect_inside_oct.png)
>
> MULTIPOLYGON(((12.26 18.46, 11.76 18.46, 11.54 18.24, 11.54 17.34, 11.76
> 17.12, 12.26 17.12, 12.48 17.34, 12.48 18.24, 12.26 18.46)),((12.37
> 18.35, 11.65 18.35, 11.65 17.23, 12.37 17.23, 12.37 18.35)))
>
> I am using the c-interface. Running the GEOSisValid() test on this
> polygon set results in:
>    NOTICE: Self-intersection at or near point 12.37 18.35
> Also, GEOSUnionCascaded() accordingly fails with:
>    ERROR: TopologyException: found non-noded intersection between 11.65
> etc...
>
> However, when I slightly offset the x-position (+1e-8) of the two top
> vertices of the rectangle, everything works like a charm (i.e.
> GEOSisValid returns 'true' and GEOSUnionCascaded produces the correct
> output polygon):
>
> MULTIPOLYGON(((12.26 18.46, 11.76 18.46, 11.54 18.24, 11.54 17.34, 11.76
> 17.12, 12.26 17.12, 12.48 17.34, 12.48 18.24, 12.26 18.46)),
> ((12.37000001 18.35, 11.65000001 18.35, 11.65 17.23, 12.37 17.23,
> 12.37000001 18.35)))
>
> I apologize if I'm too much in a hurry here and should start to learn
> more about geos before submitting a complaint :) At least I hope this is
> the right place for this problem.
>
> Kind Regards,
> Wim Vereecken
>
> FWIW, I'm using geos-3.1.0.tar.bz2 (2009/03/17), libgeos-3.1.0 and Ubuntu
> 8.04.2 (x86-64) with a 2.6.24-23-generic kernel.

New description:

 Hi All,

 I'm very new to GEOS (< 1 day), but I'm puzzled by what I think is a
 strange bug.

 Being particularly interested in the GEOSUnionCascaded() function to merge
 large sets (>50,000) of overlapping polygons, altering my dataset manually
 to avoid this bug(?) is not an option.

 I have narrowed down the problem to the following multipolygon, which
 represents a rectangle inside an octagon (see
 http://homes.esat.kuleuven.be/~wvereeck/rect_inside_oct.png)

 {{{
 MULTIPOLYGON(((12.26 18.46, 11.76 18.46, 11.54 18.24, 11.54 17.34, 11.76
 17.12, 12.26 17.12, 12.48 17.34, 12.48 18.24, 12.26 18.46)),((12.37 18.35,
 11.65 18.35, 11.65 17.23, 12.37 17.23, 12.37 18.35)))
 }}}

 I am using the c-interface. Running the GEOSisValid() test on this polygon
 set results in:

 {{{
    NOTICE: Self-intersection at or near point 12.37 18.35
 }}}

 Also, GEOSUnionCascaded() accordingly fails with:

 {{{
    ERROR: TopologyException: found non-noded intersection between 11.65
 }}}

 etc.

 However, when I slightly offset the x-position (+1e-8) of the two top
 vertices of the rectangle, everything works like a charm (i.e. GEOSisValid
 returns 'true' and GEOSUnionCascaded produces the correct output polygon):

 {{{
 MULTIPOLYGON(((12.26 18.46, 11.76 18.46, 11.54 18.24, 11.54 17.34, 11.76
 17.12, 12.26 17.12, 12.48 17.34, 12.48 18.24, 12.26 18.46)), ((12.37000001
 18.35, 11.65000001 18.35, 11.65 17.23, 12.37 17.23, 12.37000001 18.35)))
 }}}

 I apologize if I'm too much in a hurry here and should start to learn more
 about geos before submitting a complaint :) At least I hope this is the
 right place for this problem.

 Kind Regards,
 Wim Vereecken

 FWIW, I'm using geos-3.1.0.tar.bz2 (2009/03/17), libgeos-3.1.0 and Ubuntu
 8.04.2 (x86-64) with a 2.6.24-23-generic kernel.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/253#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From sandro.santilli at gmail.com  Thu May 21 06:14:30 2009
From: sandro.santilli at gmail.com (Sandro Santilli)
Date: Thu May 21 06:14:32 2009
Subject: [geos-devel] Generated ChangeLog
Message-ID: <1af0b2b20905210314v2e59cbb1rff10e88de94c045d@mail.gmail.com>

I've committed a new 'ChangeLog.svn' rule in top-level Makefile which you can
use to generate a GNU-style ChangeLog file from SVN logs using the svn2cl tool.
On debian-based systems this tool is in the subversion-tools package.
The generated ChangeLog.svn was also added to the repository, so you don't need
svn2cl to see the results.

The advantage is you don't need to manually edit the ChangeLog, and helps
taking out a lot of information lost due to at least myself not having
edited it during
my last JTS sync work (sorry for that).

To avoid loosing any manual entry the generated file is now called
ChangeLog.svn,
so the ChangeLog file is the so-far-manually-edited one.

If you like the idea please take the time to add your details in the
authors.svn file, which is used to map
usernames to real names and email addresses. Ideally a server-side
hook could re-generate the ChangeLog.svn
on every commit, or on a daily basis.

PS: my keybit.net address is having bad problems, so please mail me @
gmail for any private communications.

--strk;

 Free GIS & Flash consultant/developer  ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple!
From nwjsmith at gmail.com  Thu May 21 12:16:09 2009
From: nwjsmith at gmail.com (Nathaniel Smith)
Date: Thu May 21 12:16:31 2009
Subject: [geos-devel] Ruby Bindings Build Problem
Message-ID: <6b66b4530905210916x3c0524f9o812795df681ac43a@mail.gmail.com>

When running "./configure --enable-ruby" I get the following:

Swig: false
Python: false
Ruby: true

and when I "make" I get:

Making all in swig
make[1]: Entering directory `/home/nate/geos-3.1.0/swig'
Making all in ruby
make[2]: Entering directory `/home/nate/geos-3.1.0/swig/ruby'
SWIG is disabled, can't build geos_wrap.cxx
false
make[2]: *** [geos_wrap.cxx] Error 1
make[2]: Leaving directory `/home/nate/geos-3.1.0/swig/ruby'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/nate/geos-3.1.0/swig'
make: *** [all-recursive] Error 1


Are there any dependencies for building GEOS with the Ruby bindings,
other than Ruby?
From cfis at savagexi.com  Thu May 21 16:02:05 2009
From: cfis at savagexi.com (Charlie Savage)
Date: Thu May 21 16:02:17 2009
Subject: [geos-devel] Ruby Bindings Build Problem
In-Reply-To: <6b66b4530905210916x3c0524f9o812795df681ac43a@mail.gmail.com>
References: <6b66b4530905210916x3c0524f9o812795df681ac43a@mail.gmail.com>
Message-ID: <4A15B33D.7010504@savagexi.com>


> When running "./configure --enable-ruby" I get the following:
> 
> Swig: false
> Python: false
> Ruby: true
> 
> and when I "make" I get:
> 
> Making all in swig
> make[1]: Entering directory `/home/nate/geos-3.1.0/swig'
> Making all in ruby
> make[2]: Entering directory `/home/nate/geos-3.1.0/swig/ruby'
> SWIG is disabled, can't build geos_wrap.cxx
> false
> make[2]: *** [geos_wrap.cxx] Error 1
> make[2]: Leaving directory `/home/nate/geos-3.1.0/swig/ruby'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/home/nate/geos-3.1.0/swig'
> make: *** [all-recursive] Error 1
> 
> 
> Are there any dependencies for building GEOS with the Ruby bindings,
> other than Ruby?
> _______________________________

No.  It means that the geos_wrap.cxx is older than the geos.i file and 
that swig is not installed on your machine (or not enabled).

The simple solution is to just do "touch geos_wrap.cxx" and then rebuild.

Charlie
From mateusz at loskot.net  Fri May 22 21:15:57 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri May 22 21:16:03 2009
Subject: [geos-devel] MonetDB uses GEOS
Message-ID: <4A174E4D.2@loskot.net>

Hi,

I've just came across GIS features in MonetDB and found they use
based on GEOS:

http://monetdb.cwi.nl/projects/monetdb/SQL/Documentation/SQL_002fGIS.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From pramsey at cleverelephant.ca  Mon May 25 13:53:29 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon May 25 13:53:31 2009
Subject: [geos-devel] FOSS4G 2009 : Abstract Submission Deadline
Message-ID: <30fe546d0905251053q161db06ega4ae4faa6a097775@mail.gmail.com>

All, the deadline for submitting talks to FOSS4G is approaching
rapidly! The call closes on June 8.

http://2009.foss4g.org/

Note that in addition to the general tracks, they have added an
academic track, for those of you who need refereed papers in your
professional resume.

Transmission follows:

---------------

=== Two weeks till abstracts due, workshops announced ===

Sydney, Australia. 25 May 2009.

The Academic community and FOSS4G organising committee are pleased to
add an academic track to the FOSS4G conference, and remind interested
presenters that there are only two weeks left for FOSS4G abstract
submissions! Abstract submission closes 8 June 2009. (Note the
deadline has been extended a week.)
http://2009.foss4g.org/presentations/

The Free and Open Source Software for Geospatial conference (FOSS4G),
is being held in Sydney, Australia October 20-23.
http://2009.foss4g.org

The academic track will act as an inventory of current research topics
and promote cooperative research between OSGeo developers and the
academia. The academic track is the right forum to highlight the most
important research challenges and trends in the domain, and let them
became the basis for an informal OSGeo research agenda. It will foster
interdisciplinary discussions in all aspects of the geospatial and
free and open source domains. It aims to promote networking between
participants, initiate and favour discussions regarding cutting-edge
technologies in the field, exchange research ideas and promote
international collaboration.

All submissions to the academic track must be original unpublished
work written in English that is currently not under review elsewhere.
The submitted papers will be thoroughly reviewed by two to three
members of the international scientific committee and refereed for
their quality, originality and relevance. For further information,
please read the full call for research papers.
http://wiki.osgeo.org/wiki/FOSS4G_2009_Call4papers.

=== Submit your Abstracts now ===

Only two weeks to submit your abstracts and secure your presentation
slot. Presentations are open to all and comprises a 30 minute slot
which includes hand-over, introductions and 5 minutes for questions.
Presentations will be selected which have a strong "Open Geospatial"
theme to them. We are keen to hear about your experiences, both
technical and non technical. While the technology is a key part of the
conference, in 2009 we are very keen to have a good selection of case
studies and business case type presentations.
Workshops and tutorials announced

Workshops and tutorials have been finalised and descriptions are now online at:

* http://2009.foss4g.org/workshops/
* http://2009.foss4g.org/tutorials/

Join the FOSS4G announcement email list:
http://lists.osgeo.org/mailman/listinfo/foss4g2009-announce or our
twitter feed. http://2009.foss4g.org/contacts/

=== Media Sponsors ===

* Position Magazine: http://www.positionmag.com.au/
* Asian Surveying and Mapping Newsletter: http://www.asmmag.com
* Geoconnexions Magazine: http://www.geoconnexion.com/
* Directions Magazine: http://directionsmag.com/
* GIS Development: http://gisdevelopment.net/
* Baliz Media: http://www.BALIZ-MEDIA.com/

More details at: http://2009.foss4g.org/contacts/
or contact:

Cameron Shorter, Chair of the FOSS4G Organising Committee and
Geospatial Systems Architect at LISAsoft
tel +61-2-8570-5050
c a m e r o n . s h o r t e r @ l i s a s o f t . c o m
From strk at keybit.net  Tue May 26 07:00:11 2009
From: strk at keybit.net (strk)
Date: Tue May 26 07:01:18 2009
Subject: [geos-devel] Release 3.2.0 plans ?
Message-ID: <20090526110011.GD41706@keybit.net>

Hello all,
I might have the chance to help with closing up release 3.2.0
so would like to ask you: is there a plan for that already ?

--strk; 

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From pramsey at cleverelephant.ca  Tue May 26 16:33:24 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue May 26 16:33:27 2009
Subject: [geos-devel] Release 3.2.0 plans ?
In-Reply-To: <20090526110011.GD41706@keybit.net>
References: <20090526110011.GD41706@keybit.net>
Message-ID: <30fe546d0905261333n81e3f23m130fec60574d5f38@mail.gmail.com>

No plan. Let's look over the bug list and start attaching things to
milestones. I do agree in principle that a 3.2.0 release should happen
sooner than later. I'd like to also roll out 3.1.1 and maybe even
3.0.x with some of the bug fixes you applied to trunk.

P

On Tue, May 26, 2009 at 4:00 AM, strk <strk@keybit.net> wrote:
> Hello all,
> I might have the chance to help with closing up release 3.2.0
> so would like to ask you: is there a plan for that already ?
>
> --strk;
>
> ?Free GIS & Flash consultant/developer ? ? ?() ?ASCII Ribbon Campaign
> ?http://foo.keybit.net/~strk/services.html ?/\ ?Keep it simple!
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at cleverelephant.ca  Tue May 26 16:33:24 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue May 26 16:34:29 2009
Subject: [geos-devel] Release 3.2.0 plans ?
In-Reply-To: <20090526110011.GD41706@keybit.net>
References: <20090526110011.GD41706@keybit.net>
Message-ID: <30fe546d0905261333n81e3f23m130fec60574d5f38@mail.gmail.com>

No plan. Let's look over the bug list and start attaching things to
milestones. I do agree in principle that a 3.2.0 release should happen
sooner than later. I'd like to also roll out 3.1.1 and maybe even
3.0.x with some of the bug fixes you applied to trunk.

P

On Tue, May 26, 2009 at 4:00 AM, strk <strk@keybit.net> wrote:
> Hello all,
> I might have the chance to help with closing up release 3.2.0
> so would like to ask you: is there a plan for that already ?
>
> --strk;
>
> ?Free GIS & Flash consultant/developer ? ? ?() ?ASCII Ribbon Campaign
> ?http://foo.keybit.net/~strk/services.html ?/\ ?Keep it simple!
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From geos-trac at osgeo.org  Wed May 27 12:17:25 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 27 12:17:26 2009
Subject: [geos-devel] [GEOS] #254: Geometry cleaning routine for Invalid
	Geometries
Message-ID: <047.bfe30eecfbedf03339275962a61259d6@osgeo.org>

#254: Geometry cleaning routine for Invalid Geometries
-------------------------+--------------------------------------------------
 Reporter:  pramsey      |       Owner:  geos-devel@lists.osgeo.org
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.3.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
 It is very common for people to report failures in routines that
 ultimately trace back to invalid inputs. Lots of inputs systems allow
 invalidity of various flavors and degrees. GEOS should allow for cleaning
 routines, preferably with some hints and tolerances about what pieces of
 geometry may be thrown away without concern.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/254>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 27 12:19:09 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 27 12:19:11 2009
Subject: [geos-devel] Re: [GEOS] #238: Internal error: 7 ERROR: GEOS union()
 threw an error!
In-Reply-To: <046.5cccd1bd54597b0be76bf312bcaa38e6@osgeo.org>
References: <046.5cccd1bd54597b0be76bf312bcaa38e6@osgeo.org>
Message-ID: <055.d8e61215ef77e76cefaea063c2625779@osgeo.org>

#238: Internal error: 7 ERROR:  GEOS union() threw an error!
------------------------+---------------------------------------------------
 Reporter:  julich      |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.1.1                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:  invalid                   
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by pramsey):

  * status:  new => closed
  * resolution:  => invalid

Comment:

 Invalid geometries => expected behavior. See #254 for eventual
 operationally useful fix.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/238#comment:7>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 27 12:21:05 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 27 12:21:05 2009
Subject: [geos-devel] Re: [GEOS] #253: Unexpected "Self-intersection at or
	near point"
In-Reply-To: <048.feb8d305eb9149f40986898c5ccb1dd7@osgeo.org>
References: <048.feb8d305eb9149f40986898c5ccb1dd7@osgeo.org>
Message-ID: <057.b9858487c56bc5a45ac47cf1ea6067ee@osgeo.org>

#253: Unexpected "Self-intersection at or near point"
-------------------------------+--------------------------------------------
 Reporter:  wvereeck           |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect             |       Status:  closed                    
 Priority:  minor              |    Milestone:  3.1.1                     
Component:  Core               |      Version:  3.1.0                     
 Severity:  Unassigned         |   Resolution:  invalid                   
 Keywords:  self-intersection  |  
-------------------------------+--------------------------------------------
Changes (by pramsey):

  * status:  new => closed
  * resolution:  => invalid

Comment:

 Invalid inputs don't generally produce correct results. A self-
 intersecting polygon ring is invalid. When you fix it, you make it valid.
 We need a way to automate that fixing. See #254.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/253#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 27 12:27:22 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 27 12:27:23 2009
Subject: [geos-devel] Re: [GEOS] #222: GEOS 3.0 won't link on ARM-EABI
	platform
In-Reply-To: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
References: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
Message-ID: <058.b1a593a3dc3cfe8cc0de362813574987@osgeo.org>

#222: GEOS 3.0 won't link on ARM-EABI platform
-----------------------+----------------------------------------------------
 Reporter:  jcrepetto  |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect     |       Status:  new                       
 Priority:  major      |    Milestone:  3.3.0                     
Component:  Default    |      Version:  3.0.0                     
 Severity:  Critical   |   Resolution:                            
 Keywords:             |  
-----------------------+----------------------------------------------------
Changes (by pramsey):

  * milestone:  3.2.0 => 3.3.0

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/222#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From pramsey at opengeo.org  Wed May 27 14:32:11 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed May 27 14:32:17 2009
Subject: [geos-devel] 3.1.1
Message-ID: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org>

I'd like to cut a 3.1.1, including Frank's GEOSFree in the CAPI and a  
handful of minor fixes I was able to cull from Sandro's comprehensive  
work on trunk.

http://trac.osgeo.org/geos/log/branches/3.1

Can I have a bit of cursory testing on the current SVN 3.1 branch?

Paul

--
Paul Ramsey
OpenGeo - http://opengeo.org
The PostGIS with the MostGIS.



From geos-trac at osgeo.org  Wed May 27 15:24:29 2009
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 27 15:24:30 2009
Subject: [geos-devel] Re: [GEOS] #232: Static string in WKBReader causes
 glibc errors when Geos is statically linked
In-Reply-To: <050.aefa73444722d937602daa5160f8caea@osgeo.org>
References: <050.aefa73444722d937602daa5160f8caea@osgeo.org>
Message-ID: <059.a03a7e9fc9ccbb396ef18b476ec81ac9@osgeo.org>

#232: Static string in WKBReader causes glibc errors when Geos is statically
linked
------------------------+---------------------------------------------------
 Reporter:  yvesdaemen  |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.0.4                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by pramsey):

 If I receive a patch, I will apply it.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/232#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From pramsey at opengeo.org  Wed May 27 15:26:01 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed May 27 15:26:05 2009
Subject: [geos-devel] 3.0.4
Message-ID: <127A8C4D-D50E-404E-9FA1-9B3DBEAAABC6@opengeo.org>

Similar to the 3.1 stream, I have applied a number of patches back  
from trunk that wouldn't hurt to go into a new minor release.

http://trac.osgeo.org/geos/log/branches/3.0

Can I have a bit of cursory testing on the current SVN 3.0 branch?

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS makes my breath minty fresh.

From pramsey at opengeo.org  Wed May 27 15:27:14 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Wed May 27 15:27:18 2009
Subject: [geos-devel] 3.2.0 Preparations
Message-ID: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>

I have triaged most of the bugs in the tracker now, and I think we  
have a reasonable working set to examine and either fix or defer now  
under the 3.2 milestone. Once that list has been worked, we can move  
to an RC1 release.

http://trac.osgeo.org/geos/report/3

Paul

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS topical ointment. Cures slow maps.

From mateusz at loskot.net  Thu May 28 07:40:56 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May 28 07:40:18 2009
Subject: [geos-devel] FreeBSD 7.2 and GCC 4.2.1 tested
Message-ID: <4A1E7848.4030904@loskot.net>

Hi,

I've compiled and successfully tested GEOS from SVN trunk
with GCC 4.2.1 on FreeBSD 7.2.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From robe.dnd at cityofboston.gov  Thu May 28 08:00:40 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Thu May 28 08:02:59 2009
Subject: [geos-devel] 3.1.1
In-Reply-To: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org>
References: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB20@ZDND.DND.boston.cob>

Paul,
I don't seem to be able to compile this under OpenSUSE 10.3.  Haven't
tried under my windows box yet.

To get to that point I did a fresh checkout 

svn checkout http://svn.osgeo.org/geos/branches/3.1 geos31
cd geos31
sh autogen.sh
./configure
make & make install

(Did I miss a step?)

The autogen looks a bit different than I recall -- gives this
sh autogen.sh
* Running /usr/bin/libtoolize (1.5.24)
\tOPTIONS = --force --copy
* Running /usr/bin/aclocal (1.10)
* Running /usr/bin/autoheader (2.61)
* Running /usr/bin/automake (1.10)
\tOPTIONS = --add-missing --copy
* Running /usr/bin/autoconf (2.61)

then make
everything before this point looks okay and then

I get this error
mv -f .deps/SimplePointInAreaLocator.Tpo
.deps/SimplePointInAreaLocator.Plo
/bin/sh ../../../libtool --tag=CXX   --mode=link g++  -g -O2
-DGEOS_INLINE  -pedantic -Wall -ansi -Wno-long-long   -o liblocation.la
IndexedPointInAreaLocator.lo PointOnGeometryLocator.lo
SimplePointInAreaLocator.lo  
libtool: link: `IndexedPointInAreaLocator.lo' is not a valid libtool
object
make[4]: *** [liblocation.la] Error 1
make[4]: Leaving directory `/projects/geos31/source/algorithm/locate'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/projects/geos31/source/algorithm/locate'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/projects/geos31/source/algorithm'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/projects/geos31/source'
make: *** [all-recursive] Error 1 

Thanks,
Regina

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Wednesday, May 27, 2009 2:32 PM
To: GEOS Development List
Subject: [geos-devel] 3.1.1

I'd like to cut a 3.1.1, including Frank's GEOSFree in the CAPI and a  
handful of minor fixes I was able to cull from Sandro's comprehensive  
work on trunk.

http://trac.osgeo.org/geos/log/branches/3.1

Can I have a bit of cursory testing on the current SVN 3.1 branch?

Paul

--
Paul Ramsey
OpenGeo - http://opengeo.org
The PostGIS with the MostGIS.



_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From robe.dnd at cityofboston.gov  Thu May 28 08:14:13 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Thu May 28 08:15:28 2009
Subject: [geos-devel] 3.0.
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB20@ZDND.DND.boston.cob>
References: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB20@ZDND.DND.boston.cob>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB30@ZDND.DND.boston.cob>

Paul,

Under OpenSUSE 10.3 -- I have similar issue with trying to compile geos
3.0 branch but with different file.


To get to that point I did a fresh checkout 

svn checkout http://svn.osgeo.org/geos/branches/3.0 geos30
cd geos30
sh autogen.sh
./configure
make & make install

The autogen looks fairly standard
sh autogen.sh
Running aclocal -I macros
Running autoheader
Running libtoolize
Running automake
configure.in:32: installing `./missing'
configure.in:32: installing `./install-sh'
capi/Makefile.am: installing `./depcomp'
swig/python/Makefile.am:15: installing `./py-compile'
Running autoconf

then make
everything before this point looks okay and then

I get this error
mv -f .deps/SimplePointInRing.Tpo .deps/SimplePointInRing.Plo
/bin/sh ../../libtool --tag=CXX   --mode=link g++  -g -O2 -DGEOS_INLINE
-Wall -ansi -pedantic -Wno-long-long   -o libalgorithm.la
CGAlgorithms.lo CentroidArea.lo CentroidLine.lo CentroidPoint.lo
ConvexHull.lo HCoordinate.lo InteriorPointArea.lo InteriorPointLine.lo
InteriorPointPoint.lo LineIntersector.lo MCPointInRing.lo
MinimumDiameter.lo NotRepresentableException.lo PointLocator.lo
RobustDeterminant.lo SIRtreePointInRing.lo SimplePointInAreaLocator.lo
SimplePointInRing.lo  
libtool: link: `CGAlgorithms.lo' is not a valid libtool object
make[2]: *** [libalgorithm.la] Error 1
make[2]: Leaving directory `/projects/geos30/source/algorithm'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/projects/geos30/source'
make: *** [all-recursive] Error 1

Thanks,
Regina
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From robe.dnd at cityofboston.gov  Thu May 28 08:20:35 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Thu May 28 08:21:46 2009
Subject: [geos-devel] 3.2.0 Preparations  - Failed under MingW
In-Reply-To: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>
References: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB36@ZDND.DND.boston.cob>

Paul,
Geos trunk doesn't compile for me under MingW. Haven't tried under VS
2008 yet.

I haven't done a clean checkout so will try that next, but this is what
I get under MingW, after doing an sh autogen.sh (maybe I need to upgrade
my auto conf again)

$ sh autogen.sh
* Running /mingw/bin/libtoolize (2.2.4)
\tOPTIONS = --force --copy
libtoolize: putting auxiliary files in `.'.
libtoolize: copying file `./ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIR, `macros'.
libtoolize: copying file `macros/libtool.m4'
libtoolize: copying file `macros/ltoptions.m4'
libtoolize: copying file `macros/ltsugar.m4'
libtoolize: copying file `macros/ltversion.m4'
libtoolize: copying file `macros/lt~obsolete.m4'
* Running /bin/aclocal (1.8.2)
/usr/share/aclocal/autoopts.m4:22: warning: underquoted definition of
AG_PATH_AU
TOOPTS
  run info '(automake)Extending aclocal'
  or see
http://sources.redhat.com/automake/automake.html#Extending%20aclocal
* Running /bin/autoheader (2.59)
* Running /bin/automake (1.8.2)
\tOPTIONS = --add-missing --copy
configure.in:10: installing `./config.guess'
configure.in:10: installing `./config.sub'
* Running /bin/autoconf (2.59)
======================================
Now you are ready to run './configure'

and then ./configure

-- make works for a while and then fails with below

libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I. -I../../../source/headers
-I../../../source/headers/geos -I../../../source/headers -g -O2
-DGEOS_INLINE -pedantic -Wall -ansi -Wno-long-long -ffloat-store -MT
SnapIfNeededOverlayOp.lo -MD -MP -MF .deps/SnapIfNeededOverlayOp.Tpo -c
snap/SnapIfNeededOverlayOp.cpp  -DDLL_EXPORT -DPIC -o
.libs/SnapIfNeededOverlayOp.o
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I. -I../../../source/headers
-I../../../source/headers/geos -I../../../source/headers -g -O2
-DGEOS_INLINE -pedantic -Wall -ansi -Wno-long-long -ffloat-store -MT
SnapIfNeededOverlayOp.lo -MD -MP -MF .deps/SnapIfNeededOverlayOp.Tpo -c
snap/SnapIfNeededOverlayOp.cpp -o SnapIfNeededOverlayOp.o >/dev/null
2>&1
make[4]: *** No rule to make target `FuzzyPointLocator.cpp', needed by
`FuzzyPointLocator.lo'.  Stop.
make[4]: Leaving directory
`/D/SVNProjects/geos/trunk/source/operation/overlay'
make[3]: *** [install-recursive] Error 1
make[3]: Leaving directory
`/D/SVNProjects/geos/trunk/source/operation/overlay'
make[2]: *** [install-recursive] Error 1
make[2]: Leaving directory `/D/SVNProjects/geos/trunk/source/operation'
make[1]: *** [install-recursive] Error 1
make[1]: Leaving directory `/D/SVNProjects/geos/trunk/source'
make: *** [install-recursive] Error 1 

Thanks,
Regina

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Wednesday, May 27, 2009 3:27 PM
To: GEOS Development List
Subject: [geos-devel] 3.2.0 Preparations

I have triaged most of the bugs in the tracker now, and I think we  
have a reasonable working set to examine and either fix or defer now  
under the 3.2 milestone. Once that list has been worked, we can move  
to an RC1 release.

http://trac.osgeo.org/geos/report/3

Paul

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS topical ointment. Cures slow maps.

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From robe.dnd at cityofboston.gov  Thu May 28 09:35:46 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Thu May 28 09:37:00 2009
Subject: [geos-devel] 3.2.0 Preparations - Failed under MingW - Compiles
	but make check fails
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB36@ZDND.DND.boston.cob>
References: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB36@ZDND.DND.boston.cob>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205D45785@ZDND.DND.boston.cob>

Paul,

Doing a fresh checkout of trunk and then repeating the below under MingW
makes things compile fine so I guess it was junk I had left over from
before.

However doing a 
make install 

followed by:

make check

gives lots of errors.  Everything is fine up thru xmltester, then start
getting errors in threadtest.c -- too many to list - hear is a sampling.
I presume its something wrong with my unistd.h or some include is being
included twice (but if someone else can confirm its not just my MingW
install).


In file included from ../../source/headers/geos/io/WKTReader.h:21,
                 from ../../source/headers/geos/io.h:56,
                 from
C:/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/unistd.h:10,
                 from capi/threadtest.c:20:
../../source/headers/geos/geom/CoordinateSequence.h:100: error:
conflicting types for 'Coordinate'
../../source/headers/geos/geom/Coordinate.h:85: error: previous
definition of 'Coordinate' was here
../../source/headers/geos/geom/CoordinateSequence.h:100: error: syntax
error before '&' token
../../source/headers/geos/geom/CoordinateSequence.h:154: error: syntax
error before ':' token
../../source/headers/geos/geom/CoordinateSequence.h:171: error: syntax
error before '*' token
../../source/headers/geos/geom/CoordinateSequence.h:172: error:
redefinition of parameter 'add'
../../source/headers/geos/geom/CoordinateSequence.h:154: error: previous
definition of 'add' was here
../../source/headers/geos/geom/CoordinateSequence.h:224: error:
redefinition of parameter 'Coordinate'
../../source/headers/geos/geom/CoordinateSequence.h:100: error: previous
definition of 'Coordinate' was here
../../source/headers/geos/geom/CoordinateSequence.h:224: error: syntax
error before '*' token
../../source/headers/geos/geom/CoordinateSequence.h:235: error: storage
class specified for parameter `CoordinateSequence'
../../source/headers/geos/geom/CoordinateSequence.h:235: error: syntax
error before '*' token
../../source/headers/geos/geom/CoordinateSequence.h:248: error: storage
class specified for parameter `bool'
../../source/headers/geos/geom/CoordinateSequence.h:248: error: syntax
error before "hasRepeatedPoints"
../../source/headers/geos/geom/CoordinateSequence.h:254: error: storage
class specified for parameter `CoordinateSequence'
../../source/headers/geos/geom/CoordinateSequence.h:254: error:
redefinition of parameter 'CoordinateSequence'
../../source/headers/geos/geom/CoordinateSequence.h:235: error: previous
definition of 'CoordinateSequence' was here
../../source/headers/geos/geom/CoordinateSequence.h:254: error: syntax
error before '*' token
../../source/headers/geos/geom/CoordinateSequence.h:262: error: storage
class specified for parameter `Coordinate'
../../source/headers/geos/geom/CoordinateSequence.h:262: error:
redefinition of parameter 'Coordinate'
../../source/headers/geos/geom/CoordinateSequence.h:224: error: previous
definition of 'Coordinate' was here
../../source/headers/geos/geom/CoordinateSequence.h:262: error: syntax
error before '*' token
../../source/headers/geos/geom/CoordinateSequence.h:269: error: syntax
error before '*' token
../../source/headers/geos/geom/CoordinateSequence.h:270: error: storage
class specified for parameter `indexOf'
../../source/headers/geos/geom/CoordinateSequence.h:277: error: storage
class specified for parameter `bool'
../../source/headers/geos/geom/CoordinateSequence.h:277: error:
redefinition of parameter 'bool'
../../source/headers/geos/geom/CoordinateSequence.h:248: error: previous
definition of 'bool' was here
../../source/headers/geos/geom/CoordinateSequence.h:277: error: syntax
error before "equals"
../../source/headers/geos/geom/CoordinateSequence.h:281: error: syntax
error before '*' token
../../source/headers/geos/geom/CoordinateSequence.h:281: error: storage
class specified for parameter `scroll'
../../source/headers/geos/geom/CoordinateSequence.h:300: error: syntax
error before '&' token
../../source/headers/geos/geom/CoordinateSequence.h:300: error: storage
class specified for parameter `increasingDirection'
../../source/headers/geos/geom/CoordinateSequence.h:303: error: syntax
error before '*' token
../../source/headers/geos/geom/CoordinateSequence.h:303: error: storage
class specified for parameter `reverse'
../../source/headers/geos/geom/CoordinateSequence.h:314: error: syntax
error before "virtual"
In file included from ../../source/headers/geos/io.h:56,

capi/threadtest.c:107: error: previous definition of 'GEOSGeometry' was
here
capi/threadtest.c:196: error: syntax error before '*' token
capi/threadtest.c:198: error: storage class specified for parameter
`wkt'
capi/threadtest.c:199: error: syntax error before "FILE"
capi/threadtest.c:202: error: syntax error before "size_t"
capi/threadtest.c:205: error: syntax error before "input"
capi/threadtest.c: At top level:
../../source/headers/geos/io/ByteOrderValues.h:40: warning: 'getInt'
declared `static' but never defined
../../source/headers/geos/io/ByteOrderValues.h:41: warning: 'putInt'
declared `static' but never defined
../../source/headers/geos/io/ByteOrderValues.h:43: warning: 'getLong'
declared `static' but never defined
../../source/headers/geos/io/ByteOrderValues.h:44: warning: 'putLong'
declared `static' but never defined
../../source/headers/geos/io/ByteOrderValues.h:46: warning: 'getDouble'
declared `static' but never defined
../../source/headers/geos/io/ByteOrderValues.h:47: warning: 'putDouble'
declared `static' but never defined

etc.




-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Obe, Regina
Sent: Thursday, May 28, 2009 8:21 AM
To: GEOS Development List
Subject: RE: [geos-devel] 3.2.0 Preparations - Failed under MingW

Paul,
Geos trunk doesn't compile for me under MingW. Haven't tried under VS
2008 yet.

I haven't done a clean checkout so will try that next, but this is what
I get under MingW, after doing an sh autogen.sh (maybe I need to upgrade
my auto conf again)

$ sh autogen.sh
* Running /mingw/bin/libtoolize (2.2.4)
\tOPTIONS = --force --copy
libtoolize: putting auxiliary files in `.'.
libtoolize: copying file `./ltmain.sh'
libtoolize: putting macros in AC_CONFIG_MACRO_DIR, `macros'.
libtoolize: copying file `macros/libtool.m4'
libtoolize: copying file `macros/ltoptions.m4'
libtoolize: copying file `macros/ltsugar.m4'
libtoolize: copying file `macros/ltversion.m4'
libtoolize: copying file `macros/lt~obsolete.m4'
* Running /bin/aclocal (1.8.2)
/usr/share/aclocal/autoopts.m4:22: warning: underquoted definition of
AG_PATH_AU
TOOPTS
  run info '(automake)Extending aclocal'
  or see
http://sources.redhat.com/automake/automake.html#Extending%20aclocal
* Running /bin/autoheader (2.59)
* Running /bin/automake (1.8.2)
\tOPTIONS = --add-missing --copy
configure.in:10: installing `./config.guess'
configure.in:10: installing `./config.sub'
* Running /bin/autoconf (2.59)
======================================
Now you are ready to run './configure'

and then ./configure

-- make works for a while and then fails with below

libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I. -I../../../source/headers
-I../../../source/headers/geos -I../../../source/headers -g -O2
-DGEOS_INLINE -pedantic -Wall -ansi -Wno-long-long -ffloat-store -MT
SnapIfNeededOverlayOp.lo -MD -MP -MF .deps/SnapIfNeededOverlayOp.Tpo -c
snap/SnapIfNeededOverlayOp.cpp  -DDLL_EXPORT -DPIC -o
.libs/SnapIfNeededOverlayOp.o
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I. -I../../../source/headers
-I../../../source/headers/geos -I../../../source/headers -g -O2
-DGEOS_INLINE -pedantic -Wall -ansi -Wno-long-long -ffloat-store -MT
SnapIfNeededOverlayOp.lo -MD -MP -MF .deps/SnapIfNeededOverlayOp.Tpo -c
snap/SnapIfNeededOverlayOp.cpp -o SnapIfNeededOverlayOp.o >/dev/null
2>&1
make[4]: *** No rule to make target `FuzzyPointLocator.cpp', needed by
`FuzzyPointLocator.lo'.  Stop.
make[4]: Leaving directory
`/D/SVNProjects/geos/trunk/source/operation/overlay'
make[3]: *** [install-recursive] Error 1
make[3]: Leaving directory
`/D/SVNProjects/geos/trunk/source/operation/overlay'
make[2]: *** [install-recursive] Error 1
make[2]: Leaving directory `/D/SVNProjects/geos/trunk/source/operation'
make[1]: *** [install-recursive] Error 1
make[1]: Leaving directory `/D/SVNProjects/geos/trunk/source'
make: *** [install-recursive] Error 1 

Thanks,
Regina

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Wednesday, May 27, 2009 3:27 PM
To: GEOS Development List
Subject: [geos-devel] 3.2.0 Preparations

I have triaged most of the bugs in the tracker now, and I think we  
have a reasonable working set to examine and either fix or defer now  
under the 3.2 milestone. Once that list has been worked, we can move  
to an RC1 release.

http://trac.osgeo.org/geos/report/3

Paul

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS topical ointment. Cures slow maps.

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From robe.dnd at cityofboston.gov  Thu May 28 10:12:51 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Thu May 28 10:14:01 2009
Subject: [geos-devel] 3.2.0 Preparations
In-Reply-To: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>
References: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205D4581E@ZDND.DND.boston.cob>


 geos trunk (3.2) seems to compile and pass check tests under OpenSUSE
10.3.

Thanks,
Regina

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Wednesday, May 27, 2009 3:27 PM
To: GEOS Development List
Subject: [geos-devel] 3.2.0 Preparations

I have triaged most of the bugs in the tracker now, and I think we  
have a reasonable working set to examine and either fix or defer now  
under the 3.2 milestone. Once that list has been worked, we can move  
to an RC1 release.

http://trac.osgeo.org/geos/report/3

Paul

--
Paul Ramsey
OpenGeo - http://opengeo.org
PostGIS topical ointment. Cures slow maps.

_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From pramsey at cleverelephant.ca  Thu May 28 10:24:30 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu May 28 10:24:33 2009
Subject: [geos-devel] 3.2.0 Preparations - Failed under MingW - Compiles 
	but make check fails
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D205D45785@ZDND.DND.boston.cob>
References: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB36@ZDND.DND.boston.cob>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205D45785@ZDND.DND.boston.cob>
Message-ID: <30fe546d0905280724u43ba8d9bm710ae9b6672408b6@mail.gmail.com>

Looks like MinGW is sensitive to doubly included headers.

On Thu, May 28, 2009 at 6:35 AM, Obe, Regina <robe.dnd@cityofboston.gov> wrote:
> Paul,
>
> Doing a fresh checkout of trunk and then repeating the below under MingW
> makes things compile fine so I guess it was junk I had left over from
> before.
>
> However doing a
> make install
>
> followed by:
>
> make check
>
> gives lots of errors. ?Everything is fine up thru xmltester, then start
> getting errors in threadtest.c -- too many to list - hear is a sampling.
> I presume its something wrong with my unistd.h or some include is being
> included twice (but if someone else can confirm its not just my MingW
> install).
>
>
> In file included from ../../source/headers/geos/io/WKTReader.h:21,
> ? ? ? ? ? ? ? ? from ../../source/headers/geos/io.h:56,
> ? ? ? ? ? ? ? ? from
> C:/MinGW/bin/../lib/gcc/mingw32/3.4.5/../../../../include/unistd.h:10,
> ? ? ? ? ? ? ? ? from capi/threadtest.c:20:
> ../../source/headers/geos/geom/CoordinateSequence.h:100: error:
> conflicting types for 'Coordinate'
> ../../source/headers/geos/geom/Coordinate.h:85: error: previous
> definition of 'Coordinate' was here
> ../../source/headers/geos/geom/CoordinateSequence.h:100: error: syntax
> error before '&' token
> ../../source/headers/geos/geom/CoordinateSequence.h:154: error: syntax
> error before ':' token
> ../../source/headers/geos/geom/CoordinateSequence.h:171: error: syntax
> error before '*' token
> ../../source/headers/geos/geom/CoordinateSequence.h:172: error:
> redefinition of parameter 'add'
> ../../source/headers/geos/geom/CoordinateSequence.h:154: error: previous
> definition of 'add' was here
> ../../source/headers/geos/geom/CoordinateSequence.h:224: error:
> redefinition of parameter 'Coordinate'
> ../../source/headers/geos/geom/CoordinateSequence.h:100: error: previous
> definition of 'Coordinate' was here
> ../../source/headers/geos/geom/CoordinateSequence.h:224: error: syntax
> error before '*' token
> ../../source/headers/geos/geom/CoordinateSequence.h:235: error: storage
> class specified for parameter `CoordinateSequence'
> ../../source/headers/geos/geom/CoordinateSequence.h:235: error: syntax
> error before '*' token
> ../../source/headers/geos/geom/CoordinateSequence.h:248: error: storage
> class specified for parameter `bool'
> ../../source/headers/geos/geom/CoordinateSequence.h:248: error: syntax
> error before "hasRepeatedPoints"
> ../../source/headers/geos/geom/CoordinateSequence.h:254: error: storage
> class specified for parameter `CoordinateSequence'
> ../../source/headers/geos/geom/CoordinateSequence.h:254: error:
> redefinition of parameter 'CoordinateSequence'
> ../../source/headers/geos/geom/CoordinateSequence.h:235: error: previous
> definition of 'CoordinateSequence' was here
> ../../source/headers/geos/geom/CoordinateSequence.h:254: error: syntax
> error before '*' token
> ../../source/headers/geos/geom/CoordinateSequence.h:262: error: storage
> class specified for parameter `Coordinate'
> ../../source/headers/geos/geom/CoordinateSequence.h:262: error:
> redefinition of parameter 'Coordinate'
> ../../source/headers/geos/geom/CoordinateSequence.h:224: error: previous
> definition of 'Coordinate' was here
> ../../source/headers/geos/geom/CoordinateSequence.h:262: error: syntax
> error before '*' token
> ../../source/headers/geos/geom/CoordinateSequence.h:269: error: syntax
> error before '*' token
> ../../source/headers/geos/geom/CoordinateSequence.h:270: error: storage
> class specified for parameter `indexOf'
> ../../source/headers/geos/geom/CoordinateSequence.h:277: error: storage
> class specified for parameter `bool'
> ../../source/headers/geos/geom/CoordinateSequence.h:277: error:
> redefinition of parameter 'bool'
> ../../source/headers/geos/geom/CoordinateSequence.h:248: error: previous
> definition of 'bool' was here
> ../../source/headers/geos/geom/CoordinateSequence.h:277: error: syntax
> error before "equals"
> ../../source/headers/geos/geom/CoordinateSequence.h:281: error: syntax
> error before '*' token
> ../../source/headers/geos/geom/CoordinateSequence.h:281: error: storage
> class specified for parameter `scroll'
> ../../source/headers/geos/geom/CoordinateSequence.h:300: error: syntax
> error before '&' token
> ../../source/headers/geos/geom/CoordinateSequence.h:300: error: storage
> class specified for parameter `increasingDirection'
> ../../source/headers/geos/geom/CoordinateSequence.h:303: error: syntax
> error before '*' token
> ../../source/headers/geos/geom/CoordinateSequence.h:303: error: storage
> class specified for parameter `reverse'
> ../../source/headers/geos/geom/CoordinateSequence.h:314: error: syntax
> error before "virtual"
> In file included from ../../source/headers/geos/io.h:56,
>
> capi/threadtest.c:107: error: previous definition of 'GEOSGeometry' was
> here
> capi/threadtest.c:196: error: syntax error before '*' token
> capi/threadtest.c:198: error: storage class specified for parameter
> `wkt'
> capi/threadtest.c:199: error: syntax error before "FILE"
> capi/threadtest.c:202: error: syntax error before "size_t"
> capi/threadtest.c:205: error: syntax error before "input"
> capi/threadtest.c: At top level:
> ../../source/headers/geos/io/ByteOrderValues.h:40: warning: 'getInt'
> declared `static' but never defined
> ../../source/headers/geos/io/ByteOrderValues.h:41: warning: 'putInt'
> declared `static' but never defined
> ../../source/headers/geos/io/ByteOrderValues.h:43: warning: 'getLong'
> declared `static' but never defined
> ../../source/headers/geos/io/ByteOrderValues.h:44: warning: 'putLong'
> declared `static' but never defined
> ../../source/headers/geos/io/ByteOrderValues.h:46: warning: 'getDouble'
> declared `static' but never defined
> ../../source/headers/geos/io/ByteOrderValues.h:47: warning: 'putDouble'
> declared `static' but never defined
>
> etc.
>
>
>
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Obe, Regina
> Sent: Thursday, May 28, 2009 8:21 AM
> To: GEOS Development List
> Subject: RE: [geos-devel] 3.2.0 Preparations - Failed under MingW
>
> Paul,
> Geos trunk doesn't compile for me under MingW. Haven't tried under VS
> 2008 yet.
>
> I haven't done a clean checkout so will try that next, but this is what
> I get under MingW, after doing an sh autogen.sh (maybe I need to upgrade
> my auto conf again)
>
> $ sh autogen.sh
> * Running /mingw/bin/libtoolize (2.2.4)
> \tOPTIONS = --force --copy
> libtoolize: putting auxiliary files in `.'.
> libtoolize: copying file `./ltmain.sh'
> libtoolize: putting macros in AC_CONFIG_MACRO_DIR, `macros'.
> libtoolize: copying file `macros/libtool.m4'
> libtoolize: copying file `macros/ltoptions.m4'
> libtoolize: copying file `macros/ltsugar.m4'
> libtoolize: copying file `macros/ltversion.m4'
> libtoolize: copying file `macros/lt~obsolete.m4'
> * Running /bin/aclocal (1.8.2)
> /usr/share/aclocal/autoopts.m4:22: warning: underquoted definition of
> AG_PATH_AU
> TOOPTS
> ?run info '(automake)Extending aclocal'
> ?or see
> http://sources.redhat.com/automake/automake.html#Extending%20aclocal
> * Running /bin/autoheader (2.59)
> * Running /bin/automake (1.8.2)
> \tOPTIONS = --add-missing --copy
> configure.in:10: installing `./config.guess'
> configure.in:10: installing `./config.sub'
> * Running /bin/autoconf (2.59)
> ======================================
> Now you are ready to run './configure'
>
> and then ./configure
>
> -- make works for a while and then fails with below
>
> libtool: compile: ?g++ -DHAVE_CONFIG_H -I. -I. -I../../../source/headers
> -I../../../source/headers/geos -I../../../source/headers -g -O2
> -DGEOS_INLINE -pedantic -Wall -ansi -Wno-long-long -ffloat-store -MT
> SnapIfNeededOverlayOp.lo -MD -MP -MF .deps/SnapIfNeededOverlayOp.Tpo -c
> snap/SnapIfNeededOverlayOp.cpp ?-DDLL_EXPORT -DPIC -o
> .libs/SnapIfNeededOverlayOp.o
> libtool: compile: ?g++ -DHAVE_CONFIG_H -I. -I. -I../../../source/headers
> -I../../../source/headers/geos -I../../../source/headers -g -O2
> -DGEOS_INLINE -pedantic -Wall -ansi -Wno-long-long -ffloat-store -MT
> SnapIfNeededOverlayOp.lo -MD -MP -MF .deps/SnapIfNeededOverlayOp.Tpo -c
> snap/SnapIfNeededOverlayOp.cpp -o SnapIfNeededOverlayOp.o >/dev/null
> 2>&1
> make[4]: *** No rule to make target `FuzzyPointLocator.cpp', needed by
> `FuzzyPointLocator.lo'. ?Stop.
> make[4]: Leaving directory
> `/D/SVNProjects/geos/trunk/source/operation/overlay'
> make[3]: *** [install-recursive] Error 1
> make[3]: Leaving directory
> `/D/SVNProjects/geos/trunk/source/operation/overlay'
> make[2]: *** [install-recursive] Error 1
> make[2]: Leaving directory `/D/SVNProjects/geos/trunk/source/operation'
> make[1]: *** [install-recursive] Error 1
> make[1]: Leaving directory `/D/SVNProjects/geos/trunk/source'
> make: *** [install-recursive] Error 1
>
> Thanks,
> Regina
>
> -----Original Message-----
> From: geos-devel-bounces@lists.osgeo.org
> [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
> Sent: Wednesday, May 27, 2009 3:27 PM
> To: GEOS Development List
> Subject: [geos-devel] 3.2.0 Preparations
>
> I have triaged most of the bugs in the tracker now, and I think we
> have a reasonable working set to examine and either fix or defer now
> under the 3.2 milestone. Once that list has been worked, we can move
> to an RC1 release.
>
> http://trac.osgeo.org/geos/report/3
>
> Paul
>
> --
> Paul Ramsey
> OpenGeo - http://opengeo.org
> PostGIS topical ointment. Cures slow maps.
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Thu May 28 11:00:00 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May 28 10:59:21 2009
Subject: [geos-devel] Ubuntu 9.04 and GCC 4.3.3 tested
Message-ID: <4A1EA6F0.8010802@loskot.net>

Hi,

Another small report, I've successfully tested current SVN trunk (r2533)
using GCC 4.3.3. Next, I followed with successful test of PostGIS SVN 
trunk (r4112).

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From pramsey at cleverelephant.ca  Thu May 28 11:31:54 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu May 28 11:31:55 2009
Subject: [geos-devel] 3.0.
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB30@ZDND.DND.boston.cob>
References: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB20@ZDND.DND.boston.cob>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB30@ZDND.DND.boston.cob>
Message-ID: <30fe546d0905280831m403d6feave9c9a5067fd8819d@mail.gmail.com>

I don't know what to say, you aren't getting a compile error, that's a
linking error. If you make clean, does the error recur in the same
exact place?

P

On Thu, May 28, 2009 at 5:14 AM, Obe, Regina <robe.dnd@cityofboston.gov> wrote:
> Paul,
>
> Under OpenSUSE 10.3 -- I have similar issue with trying to compile geos
> 3.0 branch but with different file.
>
>
> To get to that point I did a fresh checkout
>
> svn checkout http://svn.osgeo.org/geos/branches/3.0 geos30
> cd geos30
> sh autogen.sh
> ./configure
> make & make install
>
> The autogen looks fairly standard
> sh autogen.sh
> Running aclocal -I macros
> Running autoheader
> Running libtoolize
> Running automake
> configure.in:32: installing `./missing'
> configure.in:32: installing `./install-sh'
> capi/Makefile.am: installing `./depcomp'
> swig/python/Makefile.am:15: installing `./py-compile'
> Running autoconf
>
> then make
> everything before this point looks okay and then
>
> I get this error
> mv -f .deps/SimplePointInRing.Tpo .deps/SimplePointInRing.Plo
> /bin/sh ../../libtool --tag=CXX ? --mode=link g++ ?-g -O2 -DGEOS_INLINE
> -Wall -ansi -pedantic -Wno-long-long ? -o libalgorithm.la
> CGAlgorithms.lo CentroidArea.lo CentroidLine.lo CentroidPoint.lo
> ConvexHull.lo HCoordinate.lo InteriorPointArea.lo InteriorPointLine.lo
> InteriorPointPoint.lo LineIntersector.lo MCPointInRing.lo
> MinimumDiameter.lo NotRepresentableException.lo PointLocator.lo
> RobustDeterminant.lo SIRtreePointInRing.lo SimplePointInAreaLocator.lo
> SimplePointInRing.lo
> libtool: link: `CGAlgorithms.lo' is not a valid libtool object
> make[2]: *** [libalgorithm.la] Error 1
> make[2]: Leaving directory `/projects/geos30/source/algorithm'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/projects/geos30/source'
> make: *** [all-recursive] Error 1
>
> Thanks,
> Regina
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From pramsey at opengeo.org  Thu May 28 11:55:18 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu May 28 12:01:41 2009
Subject: [geos-devel] 3.0/3.1/3.2
Message-ID: <30fe546d0905280855q5fb97d28s589635838112ddf9@mail.gmail.com>

All versions compile and test clean on OS/X 10.5, GCC 4.0.1

P.
From robe.dnd at cityofboston.gov  Thu May 28 14:19:26 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Thu May 28 14:19:28 2009
Subject: [geos-devel] 3.0.
In-Reply-To: <30fe546d0905280831m403d6feave9c9a5067fd8819d@mail.gmail.com>
References: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org><53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB20@ZDND.DND.boston.cob><53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB30@ZDND.DND.boston.cob>
	<30fe546d0905280831m403d6feave9c9a5067fd8819d@mail.gmail.com>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205D45BCA@ZDND.DND.boston.cob>

Nevermind.  After make clean seems to compile cleanly and make check passes all tests.  I didn't think I needed to do that since I created a whole new folder.

I still have yet to retest geos 3.1 on this box (and retest geos 3.1 on my windows)
and then test against PostGIS.

Windows MingW is a sadder story -- I suppose it could be a similar thing, but make clean didn't help.  Trying to compile geos 3.0 on MingW - (but this could be my MingW is just a mess) (though why it works compiling the new geos beats me (except for make check)).

Seems something wrong with my libtool?

make[2]: Entering directory `/D/SVNProjects/geos/3.0/source/algorithm'
if /bin/sh ../../libtool --mode=compile g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers -I../../source/headers/geos -I../../source/headers     -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT CGAlgorithms.lo -MD -MP -MF ".deps/CGAlgorithms.Tpo" -c -o CGAlgorithms.lo CGAlgorithms.cpp; \
then mv -f ".deps/CGAlgorithms.Tpo" ".deps/CGAlgorithms.Plo"; else rm -f ".deps/CGAlgorithms.Tpo"; exit 1; fi
../../libtool: CDPATH: command not found
../../libtool: func_opt_split: command not found
libtool: Version mismatch error.  This is libtool 2.2.4, but the
libtool: definition of this LT_INIT comes from an older release.
libtool: You should recreate aclocal.m4 with macros from libtool 2.2.4
libtool: and run autoconf again.
make[2]: *** [CGAlgorithms.lo] Error 1
make[2]: Leaving directory `/D/SVNProjects/geos/3.0/source/algorithm'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/D/SVNProjects/geos/3.0/source'
make: *** [all-recursive] Error 1

-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org [mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Paul Ramsey
Sent: Thursday, May 28, 2009 11:32 AM
To: GEOS Development List
Subject: Re: [geos-devel] 3.0.

I don't know what to say, you aren't getting a compile error, that's a
linking error. If you make clean, does the error recur in the same
exact place?

P

On Thu, May 28, 2009 at 5:14 AM, Obe, Regina <robe.dnd@cityofboston.gov> wrote:
> Paul,
>
> Under OpenSUSE 10.3 -- I have similar issue with trying to compile geos
> 3.0 branch but with different file.
>
>
> To get to that point I did a fresh checkout
>
> svn checkout http://svn.osgeo.org/geos/branches/3.0 geos30
> cd geos30
> sh autogen.sh
> ./configure
> make & make install
>
> The autogen looks fairly standard
> sh autogen.sh
> Running aclocal -I macros
> Running autoheader
> Running libtoolize
> Running automake
> configure.in:32: installing `./missing'
> configure.in:32: installing `./install-sh'
> capi/Makefile.am: installing `./depcomp'
> swig/python/Makefile.am:15: installing `./py-compile'
> Running autoconf
>
> then make
> everything before this point looks okay and then
>
> I get this error
> mv -f .deps/SimplePointInRing.Tpo .deps/SimplePointInRing.Plo
> /bin/sh ../../libtool --tag=CXX ? --mode=link g++ ?-g -O2 -DGEOS_INLINE
> -Wall -ansi -pedantic -Wno-long-long ? -o libalgorithm.la
> CGAlgorithms.lo CentroidArea.lo CentroidLine.lo CentroidPoint.lo
> ConvexHull.lo HCoordinate.lo InteriorPointArea.lo InteriorPointLine.lo
> InteriorPointPoint.lo LineIntersector.lo MCPointInRing.lo
> MinimumDiameter.lo NotRepresentableException.lo PointLocator.lo
> RobustDeterminant.lo SIRtreePointInRing.lo SimplePointInAreaLocator.lo
> SimplePointInRing.lo
> libtool: link: `CGAlgorithms.lo' is not a valid libtool object
> make[2]: *** [libalgorithm.la] Error 1
> make[2]: Leaving directory `/projects/geos30/source/algorithm'
> make[1]: *** [all-recursive] Error 1
> make[1]: Leaving directory `/projects/geos30/source'
> make: *** [all-recursive] Error 1
>
> Thanks,
> Regina
> -----------------------------------------
> The substance of this message, including any attachments, may be
> confidential, legally privileged and/or exempt from disclosure
> pursuant to Massachusetts law. It is intended
> solely for the addressee. If you received this in error, please
> contact the sender and delete the material from any computer.
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
From mwtoews at sfu.ca  Thu May 28 21:14:38 2009
From: mwtoews at sfu.ca (Michael Toews)
Date: Thu May 28 21:30:27 2009
Subject: [geos-devel] python bindings in trunk
In-Reply-To: <1011047780.16461411243559530674.JavaMail.root@jaguar9.sfu.ca>
Message-ID: <874288314.16461891243559678549.JavaMail.root@jaguar9.sfu.ca>

Hi,

I've compiled geos from svn/trunk r2533 to (hopefully) use some new features ported from JTS 1.9 last month. I am using an Ubuntu 8.04 LTS server, which already has libgeos-c1 and libgeos2c2a from apt (I'm not sure if this matters or not).

I compiled r2533 using "./configure --enable-python", and the report said that both swig and python is enabled.

After "make"/"make install", I tried going into Python:

Python 2.5.2 (r252:60911, Jul 31 2008, 17:28:52)
[GCC 4.2.3 (Ubuntu 4.2.3-2ubuntu7)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import geos
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.5/site-packages/geos/geos.py", line 6, in <module>
    import _geos
ImportError: /usr/local/lib/python2.5/site-packages/geos/_geos.so: undefined symbol: GEOSWKTReader_create


Any idea why? Thanks in advance.

-Mike
From geos-trac at osgeo.org  Thu May 28 22:37:03 2009
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 28 22:37:04 2009
Subject: [geos-devel] Re: [GEOS] #232: Static string in WKBReader causes
 glibc errors when Geos is statically linked
In-Reply-To: <050.aefa73444722d937602daa5160f8caea@osgeo.org>
References: <050.aefa73444722d937602daa5160f8caea@osgeo.org>
Message-ID: <059.de07e51158aae41267baa0ca6b08bdd4@osgeo.org>

#232: Static string in WKBReader causes glibc errors when Geos is statically
linked
------------------------+---------------------------------------------------
 Reporter:  yvesdaemen  |        Owner:  geos-devel@lists.osgeo.org
     Type:  defect      |       Status:  new                       
 Priority:  major       |    Milestone:  3.0.4                     
Component:  Default     |      Version:  3.0.3                     
 Severity:  Unassigned  |   Resolution:                            
 Keywords:              |  
------------------------+---------------------------------------------------
Comment (by mwtoews):

 I think this bug also affects the python bindings. See:
 http://lists.osgeo.org/pipermail/geos-devel/2009-May/004174.html

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/232#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From sgillies at frii.com  Thu May 28 22:44:38 2009
From: sgillies at frii.com (Sean Gillies)
Date: Thu May 28 22:44:42 2009
Subject: [geos-devel] python bindings in trunk
In-Reply-To: <874288314.16461891243559678549.JavaMail.root@jaguar9.sfu.ca>
References: <874288314.16461891243559678549.JavaMail.root@jaguar9.sfu.ca>
Message-ID: <CF3D1E6F-0F47-4FAD-A4C0-AC4A617C5C42@frii.com>

Hi Michael, please see

http://trac.osgeo.org/geos/browser/trunk/swig/python/README.txt

Cheers,
Sean

On May 28, 2009, at 7:14 PM, Michael Toews wrote:

> Hi,
>
> I've compiled geos from svn/trunk r2533 to (hopefully) use some new  
> features ported from JTS 1.9 last month. I am using an Ubuntu 8.04  
> LTS server, which already has libgeos-c1 and libgeos2c2a from apt  
> (I'm not sure if this matters or not).
>
> I compiled r2533 using "./configure --enable-python", and the report  
> said that both swig and python is enabled.
>
> After "make"/"make install", I tried going into Python:
>
> Python 2.5.2 (r252:60911, Jul 31 2008, 17:28:52)
> [GCC 4.2.3 (Ubuntu 4.2.3-2ubuntu7)] on linux2
> Type "help", "copyright", "credits" or "license" for more information.
>>>> import geos
> Traceback (most recent call last):
>  File "<stdin>", line 1, in <module>
>  File "/usr/local/lib/python2.5/site-packages/geos/geos.py", line 6,  
> in <module>
>    import _geos
> ImportError: /usr/local/lib/python2.5/site-packages/geos/_geos.so:  
> undefined symbol: GEOSWKTReader_create
>
>
> Any idea why? Thanks in advance.
>
> -Mike
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

From strk at keybit.net  Fri May 29 04:06:56 2009
From: strk at keybit.net (strk)
Date: Fri May 29 04:07:00 2009
Subject: [geos-devel] 3.2.0 Preparations
In-Reply-To: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>
References: <AE0AED6C-282B-4374-8615-AEBF488893D9@opengeo.org>
Message-ID: <20090529080656.GJ38946@keybit.net>

On Wed, May 27, 2009 at 12:27:14PM -0700, Paul Ramsey wrote:
> I have triaged most of the bugs in the tracker now, and I think we  
> have a reasonable working set to examine and either fix or defer now  
> under the 3.2 milestone. Once that list has been worked, we can move  
> to an RC1 release.
> 
> http://trac.osgeo.org/geos/report/3

Thank you.
I got my involvement in the process approved, so I'm with you.

I'd give end of June as a release date target, so Safe (who is
sponsoring my recent developments) has time to properly test the
new code. Ok with all ?

If I have enough time I'll also give another pass at packages
port syncs so we can call 3.2.0 a JTS-1.10 port w/out being
embarassed :)

--strk; 

 Free GIS & Flash consultant/developer      ()  ASCII Ribbon Campaign
 http://foo.keybit.net/~strk/services.html  /\  Keep it simple! 
From mateusz at loskot.net  Fri May 29 06:08:03 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri May 29 06:07:26 2009
Subject: [geos-devel] 3.0.
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D205D45BCA@ZDND.DND.boston.cob>
References: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org><53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB20@ZDND.DND.boston.cob><53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB30@ZDND.DND.boston.cob>	<30fe546d0905280831m403d6feave9c9a5067fd8819d@mail.gmail.com>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205D45BCA@ZDND.DND.boston.cob>
Message-ID: <4A1FB403.9030202@loskot.net>

Obe, Regina wrote:
  > Windows MingW is a sadder story -- I suppose it could be a similar
> thing, but make clean didn't help.  Trying to compile geos 3.0 on
> MingW - (but this could be my MingW is just a mess) (though why it
> works compiling the new geos beats me (except for make check)).
> 
> Seems something wrong with my libtool?

Regina,

You may try to run ./autogen.sh first, and then run ./configure.

I don't know if it will help MinGW, but it may help to solve autotools
issues by generating scripts specific for your environment.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From robe.dnd at cityofboston.gov  Fri May 29 09:37:54 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Fri May 29 09:38:00 2009
Subject: [geos-devel] 3.0.
In-Reply-To: <4A1FB403.9030202@loskot.net>
References: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org><53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB20@ZDND.DND.boston.cob><53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB30@ZDND.DND.boston.cob>	<30fe546d0905280831m403d6feave9c9a5067fd8819d@mail.gmail.com><53F9CF533E1AA14EA1F8C5C08ABC08D205D45BCA@ZDND.DND.boston.cob>
	<4A1FB403.9030202@loskot.net>
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D205D45FF4@ZDND.DND.boston.cob>

Mateusz,
I'm pretty sure I did that before, but tried again followed by
./configure
make clean
make

and still same error. 
My autogen.sh call produces this

$ sh autogen.sh
Running aclocal -I macros
/usr/share/aclocal/autoopts.m4:22: warning: underquoted definition of
AG_PATH_AU
TOOPTS
  run info '(automake)Extending aclocal'
  or see
http://sources.redhat.com/automake/automake.html#Extending%20aclocal
Running autoheader
Running libtoolize
libtoolize: putting auxiliary files in `.'.
libtoolize: copying file `./ltmain.sh'
libtoolize: You should add the contents of the following files to
`aclocal.m4':
libtoolize:   `/c/mingw/share/aclocal/libtool.m4'
libtoolize:   `/c/mingw/share/aclocal/ltoptions.m4'
libtoolize:   `/c/mingw/share/aclocal/ltversion.m4'
libtoolize:   `/c/mingw/share/aclocal/ltsugar.m4'
libtoolize:   `/c/mingw/share/aclocal/lt~obsolete.m4'
libtoolize: Consider adding `AC_CONFIG_MACRO_DIR([m4])' to configure.in
and
libtoolize: rerunning libtoolize, to keep the correct libtool macros
in-tree.
libtoolize: Consider adding `-I m4' to ACLOCAL_AMFLAGS in Makefile.am.
Running automake
configure.in:6: installing `./config.guess'
configure.in:6: installing `./config.sub'
Running autoconf
======================================
Now you are ready to run './configure'
======================================


What is puzzling to me is why geos trunk compiles fine (its when I do
make check that I run into dupe includes with that one).  Which version
of libtool does 3.0 branch require? Mine gives this (though that CDPATH
thing is very troubling which makes me think I have a mess of libtool
versions) and I better look at that aclocal.m4 as the error and warning
suggests if only I understood what all that stuff means.

libtool --version
./libtool: CDPATH: command not found
ltmain.sh (GNU libtool) 2.2.4
Written by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996

-- make gives
Making all in source
make[1]: Entering directory `/D/SVNProjects/geos/3.0/source'
Making all in algorithm
make[2]: Entering directory `/D/SVNProjects/geos/3.0/source/algorithm'
if /bin/sh ../../libtool --mode=compile g++ -DHAVE_CONFIG_H -I. -I.
-I../../sour
ce/headers -I../../source/headers/geos -I../../source/headers     -g -O2
-DGEOS_
INLINE -Wall -ansi -pedantic -Wno-long-long -MT CGAlgorithms.lo -MD -MP
-MF ".de
ps/CGAlgorithms.Tpo" -c -o CGAlgorithms.lo CGAlgorithms.cpp; \
then mv -f ".deps/CGAlgorithms.Tpo" ".deps/CGAlgorithms.Plo"; else rm -f
".deps/
CGAlgorithms.Tpo"; exit 1; fi
../../libtool: CDPATH: command not found
../../libtool: func_opt_split: command not found
libtool: Version mismatch error.  This is libtool 2.2.4, but the
libtool: definition of this LT_INIT comes from an older release.
libtool: You should recreate aclocal.m4 with macros from libtool 2.2.4
libtool: and run autoconf again.
make[2]: *** [CGAlgorithms.lo] Error 1
make[2]: Leaving directory `/D/SVNProjects/geos/3.0/source/algorithm'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/D/SVNProjects/geos/3.0/source'
make: *** [all-recursive] Error 1




-----Original Message-----
From: geos-devel-bounces@lists.osgeo.org
[mailto:geos-devel-bounces@lists.osgeo.org] On Behalf Of Mateusz Loskot
Sent: Friday, May 29, 2009 6:08 AM
To: GEOS Development List
Subject: Re: [geos-devel] 3.0.

Obe, Regina wrote:
  > Windows MingW is a sadder story -- I suppose it could be a similar
> thing, but make clean didn't help.  Trying to compile geos 3.0 on
> MingW - (but this could be my MingW is just a mess) (though why it
> works compiling the new geos beats me (except for make check)).
> 
> Seems something wrong with my libtool?

Regina,

You may try to run ./autogen.sh first, and then run ./configure.

I don't know if it will help MinGW, but it may help to solve autotools
issues by generating scripts specific for your environment.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________
geos-devel mailing list
geos-devel@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel
-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
From pramsey at opengeo.org  Fri May 29 13:17:49 2009
From: pramsey at opengeo.org (Paul Ramsey)
Date: Fri May 29 13:17:51 2009
Subject: [geos-devel] DLL for MSVC
Message-ID: <30fe546d0905291017j5211f10eg7d42ba1dee5cc5f0@mail.gmail.com>

Ragi,

Any chance you could provide a patch against trunk for your C++ DLL exports?

Paul
From mateusz at loskot.net  Sat May 30 10:14:33 2009
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat May 30 10:14:39 2009
Subject: [geos-devel] 3.0.
In-Reply-To: <53F9CF533E1AA14EA1F8C5C08ABC08D205D45FF4@ZDND.DND.boston.cob>
References: <E2847351-F3D0-4503-AC37-BA896089DBF5@opengeo.org><53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB20@ZDND.DND.boston.cob><53F9CF533E1AA14EA1F8C5C08ABC08D205D1BB30@ZDND.DND.boston.cob>	<30fe546d0905280831m403d6feave9c9a5067fd8819d@mail.gmail.com><53F9CF533E1AA14EA1F8C5C08ABC08D205D45BCA@ZDND.DND.boston.cob>	<4A1FB403.9030202@loskot.net>
	<53F9CF533E1AA14EA1F8C5C08ABC08D205D45FF4@ZDND.DND.boston.cob>
Message-ID: <4A213F49.7090100@loskot.net>

Obe, Regina wrote:
> Mateusz,
> I'm pretty sure I did that before, but tried again followed by
> ./configure
> make clean
> make
> 
> and still same error. 

Regina,

I'm afraid I'm out of clue.

> My autogen.sh call produces this
> 
> $ sh autogen.sh
> Running aclocal -I macros
> /usr/share/aclocal/autoopts.m4:22: warning: underquoted definition of
> AG_PATH_AU
> TOOPTS
>   run info '(automake)Extending aclocal'
>   or see
> http://sources.redhat.com/automake/automake.html#Extending%20aclocal
> Running autoheader
> Running libtoolize
> libtoolize: putting auxiliary files in `.'.
> libtoolize: copying file `./ltmain.sh'
> libtoolize: You should add the contents of the following files to
> `aclocal.m4':
> libtoolize:   `/c/mingw/share/aclocal/libtool.m4'
> libtoolize:   `/c/mingw/share/aclocal/ltoptions.m4'
> libtoolize:   `/c/mingw/share/aclocal/ltversion.m4'
> libtoolize:   `/c/mingw/share/aclocal/ltsugar.m4'
> libtoolize:   `/c/mingw/share/aclocal/lt~obsolete.m4'
> libtoolize: Consider adding `AC_CONFIG_MACRO_DIR([m4])' to configure.in
> and
> libtoolize: rerunning libtoolize, to keep the correct libtool macros
> in-tree.
> libtoolize: Consider adding `-I m4' to ACLOCAL_AMFLAGS in Makefile.am.
> Running automake
> configure.in:6: installing `./config.guess'
> configure.in:6: installing `./config.sub'
> Running autoconf
> ======================================
> Now you are ready to run './configure'
> ======================================

Looks good.

> What is puzzling to me is why geos trunk compiles fine (its when I do
> make check that I run into dupe includes with that one).  Which version
> of libtool does 3.0 branch require?

I don't know which version is required.
What I can tell is that I can't remember I've ever had problems with
libtool version when using GEOS on Linux.

Here are tools I use on FreeBSD 7.2 to build GEOS with success:

autoconf 2.62
aclocal 1.9.6
automake 1.9.6
libtool 1.5.26
GCC  4.2.1

As you can see, the libtool here is pretty old.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From robe.dnd at cityofboston.gov  Sun May 31 21:28:26 2009
From: robe.dnd at cityofboston.gov (Obe, Regina)
Date: Sun May 31 21:28:33 2009
Subject: [geos-devel] tests\unit\capi\GEOSGeomFromWKBTest.cpp missing
Message-ID: <53F9CF533E1AA14EA1F8C5C08ABC08D204D7F349@ZDND.DND.boston.cob>


Was the tests\unit\capi\GEOSGeomFromWKBTest.cpp removed.  I'm trying to compile under visual studio 2008 with the msvc9 solution provided and this apparently has link to this and says it doesn't exist.

I don't see it in that folder so assume it should just be removed from the solution.



-----------------------------------------
The substance of this message, including any attachments, may be
confidential, legally privileged and/or exempt from disclosure
pursuant to Massachusetts law. It is intended
solely for the addressee. If you received this in error, please
contact the sender and delete the material from any computer.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20090531/09a04ce6/attachment.html
