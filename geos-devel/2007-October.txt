From pramsey at refractions.net  Tue Oct  2 14:54:56 2007
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] GEOS -> New Home / New Leadership
Message-ID: <47029400.2020808@refractions.net>

All,

At FOSS4G, I had a long discussion with folks from Safe, Ingres, and 
Autodesk about the future of GEOS. The bottom line is that they are all 
interested in investing more in extending and moving GEOS forwards.

In order to make those investments more effective and future-proof and 
give the companies a voice in the project going forward, I am proposing 
a number of measures:

(a) At a technical level, having a Trac infrastructure for bugs and wiki 
notes and code browsing would be nice. I can set that up myself, but 
OSGeo already has that infrastructure. So I propose migrating the code 
to the OSGeo infrastructure, if possible.
(b) At a steering level, taking the Project Steering Committee (PSC) 
role out of the explicit control of a single maintainer (historically 
funded by Refractions) and into a full PSC.
(c) A and B above are in aid of an eventual move into OSGeo Incubation 
and full OSGeo project membership. We know these will have to be done to 
enter OSGeo, so might as well start now.

I would like to get the PSC boot-strapped with representatives from the 
existing user/developer base of GEOS.

May I propose:

- Martin Davis, Refractions, who has an understanding of the architecture
- Representatives of Autodesk and Safe, who already have "skin in the 
game" and are gearing up for more development
- Howard Butler, who can navigate our passage into the OSGeo 
infrastructure world, and provide a viewpoint from build maintenance and 
script bindings

This PSC can serve for six months, adding whomever it sees fit, and then 
be re-formed based on the conditions in March 2008.

Thoughts?

Paul


-- 

   Paul Ramsey
   Refractions Research
   http://www.refractions.net
   pramsey@refractions.net
   Phone: 250-383-3022
   Cell: 250-885-0632

From cfis at savagexi.com  Tue Oct  2 16:45:06 2007
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] GEOS -> New Home / New Leadership
In-Reply-To: <47029400.2020808@refractions.net>
References: <47029400.2020808@refractions.net>
Message-ID: <4702ADD2.4020308@savagexi.com>


> May I propose:
> 
> - Martin Davis, Refractions, who has an understanding of the architecture
> - Representatives of Autodesk and Safe, who already have "skin in the 
> game" and are gearing up for more development
> - Howard Butler, who can navigate our passage into the OSGeo 
> infrastructure world, and provide a viewpoint from build maintenance and 
> script bindings
> 
> This PSC can serve for six months, adding whomever it sees fit, and then 
> be re-formed based on the conditions in March 2008.

Sounds good to me.

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20071002/7471e778/smime.bin
From sdlime at comcast.net  Tue Oct  2 21:50:15 2007
From: sdlime at comcast.net (Stephen Lime)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] GEOS -> New Home / New Leadership
In-Reply-To: <47029400.2020808@refractions.net>
References: <47029400.2020808@refractions.net>
Message-ID: <c6d90c3ecbb3e416bf4448593c7b2a3b@comcast.net>

Great news, congratulations. Your proposal sounds reasonable. Might it 
make sense to
add a 5th person to have a odd number to break "ties"? Perhaps an 
external developer
already contributing to the codebase?

Steve

On Oct 2, 2007, at 1:54 PM, Paul Ramsey wrote:

> All,
>
> At FOSS4G, I had a long discussion with folks from Safe, Ingres, and 
> Autodesk about the future of GEOS. The bottom line is that they are 
> all interested in investing more in extending and moving GEOS 
> forwards.
>
> In order to make those investments more effective and future-proof and 
> give the companies a voice in the project going forward, I am 
> proposing a number of measures:
>
> (a) At a technical level, having a Trac infrastructure for bugs and 
> wiki notes and code browsing would be nice. I can set that up myself, 
> but OSGeo already has that infrastructure. So I propose migrating the 
> code to the OSGeo infrastructure, if possible.
> (b) At a steering level, taking the Project Steering Committee (PSC) 
> role out of the explicit control of a single maintainer (historically 
> funded by Refractions) and into a full PSC.
> (c) A and B above are in aid of an eventual move into OSGeo Incubation 
> and full OSGeo project membership. We know these will have to be done 
> to enter OSGeo, so might as well start now.
>
> I would like to get the PSC boot-strapped with representatives from 
> the existing user/developer base of GEOS.
>
> May I propose:
>
> - Martin Davis, Refractions, who has an understanding of the 
> architecture
> - Representatives of Autodesk and Safe, who already have "skin in the 
> game" and are gearing up for more development
> - Howard Butler, who can navigate our passage into the OSGeo 
> infrastructure world, and provide a viewpoint from build maintenance 
> and script bindings
>
> This PSC can serve for six months, adding whomever it sees fit, and 
> then be re-formed based on the conditions in March 2008.
>
> Thoughts?
>
> Paul
>
>
> -- 
>
>   Paul Ramsey
>   Refractions Research
>   http://www.refractions.net
>   pramsey@refractions.net
>   Phone: 250-383-3022
>   Cell: 250-885-0632
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>


From geoionescu at hotmail.com  Wed Oct  3 02:38:37 2007
From: geoionescu at hotmail.com (George Ionescu)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] Map matching algorithm
Message-ID: <BAY121-F31C091F28357D72750DFE7CAAF0@phx.gbl>

Hello GEOS users,

we have a basic in-house developed GIS system which does only one thing for 
the moment: loads an ESRI shape file and a NMEA log (recorded by a DGPS 
corrected GPS) and draws them on the screen. We're not aiming (nor needing) 
a navigation system, but we do need to match the points from the NMEA log on 
the roads from the shape file.

Although the GPS is quite accurate (e.g. at most 3m HDOP), the 
field-collected points almost never match the roads (e.g. are not on the 
road).

I'm looking for a way to snap the points on the road, knowing that basic 
snapping (e.g. snap a point to the nearest line) won't do the trick.

Does such an algorithm exist out of the box in GEOS or do I have to code one 
myself? While searching I found out that Frechet distance may help a little 
but I can only figure that this would be the verification method, not the 
matching one.

I guess that the mathematics problem would be something like: given a known 
finite set of polylines SP and a known finite set of points P, find the 
subset of polylines which has the minimum Frechet distance from the polyline 
defined by P and the translation matrix for each point P to fit the 
polylines found.

I know that this is quite computationally intesive, but fortunately I don't 
need real-time calculations.

Any pointers, links, suggestions appreciated.
Thanks.
George Ionescu.

_________________________________________________________________
Don't just search. Find. Check out the new MSN Search! 
http://search.msn.com/


From sgillies at frii.com  Wed Oct  3 12:01:03 2007
From: sgillies at frii.com (Sean Gillies)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] GEOS -> New Home / New Leadership
In-Reply-To: <47029400.2020808@refractions.net>
References: <47029400.2020808@refractions.net>
Message-ID: <4703BCBF.9010605@frii.com>

Sounds good to me, Paul.

Sean

Paul Ramsey wrote:
> All,
> 
> At FOSS4G, I had a long discussion with folks from Safe, Ingres, and 
> Autodesk about the future of GEOS. The bottom line is that they are all 
> interested in investing more in extending and moving GEOS forwards.
> 
> In order to make those investments more effective and future-proof and 
> give the companies a voice in the project going forward, I am proposing 
> a number of measures:
> 
> (a) At a technical level, having a Trac infrastructure for bugs and wiki 
> notes and code browsing would be nice. I can set that up myself, but 
> OSGeo already has that infrastructure. So I propose migrating the code 
> to the OSGeo infrastructure, if possible.
> (b) At a steering level, taking the Project Steering Committee (PSC) 
> role out of the explicit control of a single maintainer (historically 
> funded by Refractions) and into a full PSC.
> (c) A and B above are in aid of an eventual move into OSGeo Incubation 
> and full OSGeo project membership. We know these will have to be done to 
> enter OSGeo, so might as well start now.
> 
> I would like to get the PSC boot-strapped with representatives from the 
> existing user/developer base of GEOS.
> 
> May I propose:
> 
> - Martin Davis, Refractions, who has an understanding of the architecture
> - Representatives of Autodesk and Safe, who already have "skin in the 
> game" and are gearing up for more development
> - Howard Butler, who can navigate our passage into the OSGeo 
> infrastructure world, and provide a viewpoint from build maintenance and 
> script bindings
> 
> This PSC can serve for six months, adding whomever it sees fit, and then 
> be re-formed based on the conditions in March 2008.
> 
> Thoughts?
> 
> Paul
> 

From Tom.Kralidis at ec.gc.ca  Wed Oct  3 12:03:36 2007
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] GEOS -> New Home / New Leadership
In-Reply-To: <4703BCBF.9010605@frii.com>
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F01059EEE@ecburexch1.ontario.int.ec.gc.ca>


Awesome, great to see geos heading in this direction. 

..Tom


> -----Original Message-----
> From: geos-devel-bounces@geos.refractions.net 
> [mailto:geos-devel-bounces@geos.refractions.net] On Behalf Of 
> Sean Gillies
> Sent: 03 October, 2007 12:01 PM
> To: GEOS Development List
> Subject: Re: [geos-devel] GEOS -> New Home / New Leadership
> 
> Sounds good to me, Paul.
> 
> Sean
> 
> Paul Ramsey wrote:
> > All,
> > 
> > At FOSS4G, I had a long discussion with folks from Safe, 
> Ingres, and 
> > Autodesk about the future of GEOS. The bottom line is that they are 
> > all interested in investing more in extending and moving 
> GEOS forwards.
> > 
> > In order to make those investments more effective and 
> future-proof and 
> > give the companies a voice in the project going forward, I am 
> > proposing a number of measures:
> > 
> > (a) At a technical level, having a Trac infrastructure for bugs and 
> > wiki notes and code browsing would be nice. I can set that 
> up myself, 
> > but OSGeo already has that infrastructure. So I propose 
> migrating the 
> > code to the OSGeo infrastructure, if possible.
> > (b) At a steering level, taking the Project Steering 
> Committee (PSC) 
> > role out of the explicit control of a single maintainer 
> (historically 
> > funded by Refractions) and into a full PSC.
> > (c) A and B above are in aid of an eventual move into OSGeo 
> Incubation 
> > and full OSGeo project membership. We know these will have 
> to be done 
> > to enter OSGeo, so might as well start now.
> > 
> > I would like to get the PSC boot-strapped with representatives from 
> > the existing user/developer base of GEOS.
> > 
> > May I propose:
> > 
> > - Martin Davis, Refractions, who has an understanding of the 
> > architecture
> > - Representatives of Autodesk and Safe, who already have 
> "skin in the 
> > game" and are gearing up for more development
> > - Howard Butler, who can navigate our passage into the OSGeo 
> > infrastructure world, and provide a viewpoint from build 
> maintenance 
> > and script bindings
> > 
> > This PSC can serve for six months, adding whomever it sees fit, and 
> > then be re-formed based on the conditions in March 2008.
> > 
> > Thoughts?
> > 
> > Paul
> > 
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 

From mbdavis at refractions.net  Wed Oct  3 12:01:30 2007
From: mbdavis at refractions.net (Martin Davis)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] Map matching algorithm
In-Reply-To: <BAY121-F31C091F28357D72750DFE7CAAF0@phx.gbl>
References: <BAY121-F31C091F28357D72750DFE7CAAF0@phx.gbl>
Message-ID: <4703BCDA.4040201@refractions.net>

You could try looking at RoadMatcher:  
http://www.jump-project.org/project.php?PID=RM&SID=OVER

Frechet distance is nice, but very computationally intensive (plus no 
available code that I've found).  I used a thing I call VertexHausdorff 
distance in RM - it's the Hausdorff distance computed at vertices only, 
to make it simple to code.  It works well.

You'd have to embed that in an algorithm to choose potential road 
candidates to test for matches.  I usually do this by simply loading the 
candidate roads into a spatial index, and just looking at all those 
within a given distance tolerance.  You can weed out non-candidates 
pretty quickly using various heuristics.

Once you have decide on a match, snapping is simply determining the 
closest point on the candidate road.

Of course, if you want to match across multiple road sections, the 
problem gets quite a bit harder.  At that point you might as well just 
use RoadMatcher. 


George Ionescu wrote:
> Hello GEOS users,
>
> we have a basic in-house developed GIS system which does only one 
> thing for the moment: loads an ESRI shape file and a NMEA log 
> (recorded by a DGPS corrected GPS) and draws them on the screen. We're 
> not aiming (nor needing) a navigation system, but we do need to match 
> the points from the NMEA log on the roads from the shape file.
>
> Although the GPS is quite accurate (e.g. at most 3m HDOP), the 
> field-collected points almost never match the roads (e.g. are not on 
> the road).
>
> I'm looking for a way to snap the points on the road, knowing that 
> basic snapping (e.g. snap a point to the nearest line) won't do the 
> trick.
>
> Does such an algorithm exist out of the box in GEOS or do I have to 
> code one myself? While searching I found out that Frechet distance may 
> help a little but I can only figure that this would be the 
> verification method, not the matching one.
>
> I guess that the mathematics problem would be something like: given a 
> known finite set of polylines SP and a known finite set of points P, 
> find the subset of polylines which has the minimum Frechet distance 
> from the polyline defined by P and the translation matrix for each 
> point P to fit the polylines found.
>
> I know that this is quite computationally intesive, but fortunately I 
> don't need real-time calculations.
>
> Any pointers, links, suggestions appreciated.
> Thanks.
> George Ionescu.
>
> _________________________________________________________________
> Don't just search. Find. Check out the new MSN Search! 
> http://search.msn.com/
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022


From pgerritson at adelphia.net  Fri Oct  5 11:33:08 2007
From: pgerritson at adelphia.net (Pete Gerritson)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] Bug in Intersection Routine
Message-ID: <000e01c80765$07f5f4f0$6401a8c0@PG64>

I found what I think to be a bug in the Intersection routine. 

I defined a polygon with the following wkt: POLYGON( (0 0, 1 0, 1 1, 0 1, 0 0), (.5 .1, 1 .5, .5 .9, .5 .1))  This polygon has an exterior ring that is a square, and one interior ring that is a triangle.  The interior ring touches the exterior ring in one point.  I believe this is considered a valid polygon.

When I call the GEOSIntersection method using this polygon for both parameters, I would expect to get back the same polygon.  Instead I get back a geometry collection of 8 linestrings and a polygon:

GEOMETRYCOLLECTION (LINESTRING (0.0000000000000000 0.0000000000000000, 1.0000000000000000 0.0000000000000000), LINESTRING (1.0000000000000000 0.0000000000000000, 1.0000000000000000 0.5000000000000000), LINESTRING (1.0000000000000000 0.5000000000000000, 1.0000000000000000 1.0000000000000000), LINESTRING (1.0000000000000000 1.0000000000000000, 0.0000000000000000 1.0000000000000000), LINESTRING (0.0000000000000000 1.0000000000000000, 0.0000000000000000 0.0000000000000000), LINESTRING (0.5000000000000000 0.1000000000000000, 1.0000000000000000 0.5000000000000000), LINESTRING (1.0000000000000000 0.5000000000000000, 0.5000000000000000 0.9000000000000000), LINESTRING (0.5000000000000000 0.9000000000000000, 0.5000000000000000 0.1000000000000000), POLYGON ((1.0000000000000000 0.0000000000000000, 0.0000000000000000 0.0000000000000000, 0.0000000000000000 1.0000000000000000, 1.0000000000000000 1.0000000000000000, 1.0000000000000000 0.5000000000000000, 1.0000000000000000 0.0000000000000000), (1.0000000000000000 0.5000000000000000, 0.5000000000000000 0.9000000000000000, 0.5000000000000000 0.1000000000000000, 1.0000000000000000 0.5000000000000000)))

The last polygon appears to be equivalent to my input, but with one extra point in the exterior ring.  The 8 linestrings appear to be the pieces of the boundary of the polygon.

I believe this is a bug. If I change the input polygon so that the interior ring doesn't touch the exterior ring, I get the expected result.

Thanks,

Pete Gerritson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20071005/9f6f82cb/attachment.html
From mbdavis at refractions.net  Fri Oct  5 11:38:13 2007
From: mbdavis at refractions.net (Martin Davis)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] Bug in Intersection Routine
In-Reply-To: <000e01c80765$07f5f4f0$6401a8c0@PG64>
References: <000e01c80765$07f5f4f0$6401a8c0@PG64>
Message-ID: <47065A65.9000309@refractions.net>

This looks like a bug, alright.  JTS returns the expected answer of 
POLYGON ((1 0, 0 0, 0 1, 1 1, 1 0.5, 1 0),
  (1 0.5, 0.5 0.9, 0.5 0.1, 1 0.5))

Martin

Pete Gerritson wrote:
>
> I found what I think to be a bug in the Intersection routine. 
>
> I defined a polygon with the following wkt: POLYGON( (0 0, 1 0, 1 1, 0 
> 1, 0 0), (.5 .1, 1 .5, .5 .9, .5 .1))  This polygon has an exterior 
> ring that is a square, and one interior ring that is a triangle.  The 
> interior ring touches the exterior ring in one point.  I believe this 
> is considered a valid polygon.
>
> When I call the GEOSIntersection method using this polygon for both 
> parameters, I would expect to get back the same polygon.  Instead I 
> get back a geometry collection of 8 linestrings and a polygon:
>
> GEOMETRYCOLLECTION (LINESTRING (0.0000000000000000 0.0000000000000000, 
> 1.0000000000000000 0.0000000000000000), LINESTRING (1.0000000000000000 
> 0.0000000000000000, 1.0000000000000000 0.5000000000000000), LINESTRING 
> (1.0000000000000000 0.5000000000000000, 1.0000000000000000 
> 1.0000000000000000), LINESTRING (1.0000000000000000 
> 1.0000000000000000, 0.0000000000000000 1.0000000000000000), LINESTRING 
> (0.0000000000000000 1.0000000000000000, 0.0000000000000000 
> 0.0000000000000000), LINESTRING (0.5000000000000000 
> 0.1000000000000000, 1.0000000000000000 0.5000000000000000), LINESTRING 
> (1.0000000000000000 0.5000000000000000, 0.5000000000000000 
> 0.9000000000000000), LINESTRING (0.5000000000000000 
> 0.9000000000000000, 0.5000000000000000 0.1000000000000000), POLYGON 
> ((1.0000000000000000 0.0000000000000000, 0.0000000000000000 
> 0.0000000000000000, 0.0000000000000000 1.0000000000000000, 
> 1.0000000000000000 1.0000000000000000, 1.0000000000000000 
> 0.5000000000000000, 1.0000000000000000 0.0000000000000000), 
> (1.0000000000000000 0.5000000000000000, 0.5000000000000000 
> 0.9000000000000000, 0.5000000000000000 0.1000000000000000, 
> 1.0000000000000000 0.5000000000000000)))
>
> The last polygon appears to be equivalent to my input, but with one 
> extra point in the exterior ring.  The 8 linestrings appear to be the 
> pieces of the boundary of the polygon.
>
> I believe this is a bug. If I change the input polygon so that the 
> interior ring doesn't touch the exterior ring, I get the expected result.
>
> Thanks,
>
> Pete Gerritson
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
>   

-- 
Martin Davis
Senior Technical Architect
Refractions Research, Inc.
(250) 383-3022


From pramsey at refractions.net  Fri Oct  5 15:54:07 2007
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] GEOS -> New Home / New Leadership
In-Reply-To: <47029400.2020808@refractions.net>
References: <47029400.2020808@refractions.net>
Message-ID: <4706965F.5030302@refractions.net>

Not hearing any objections, let's proceed. In the event of PSC ties, 
disputes shall be settled with a bout of Greco-Roman Wrestling.

Howard, can we work together to start the move to OSGeo infrastructure?

P

Paul Ramsey wrote:
> All,
> 
> At FOSS4G, I had a long discussion with folks from Safe, Ingres, and 
> Autodesk about the future of GEOS. The bottom line is that they are all 
> interested in investing more in extending and moving GEOS forwards.
> 
> In order to make those investments more effective and future-proof and 
> give the companies a voice in the project going forward, I am proposing 
> a number of measures:
> 
> (a) At a technical level, having a Trac infrastructure for bugs and wiki 
> notes and code browsing would be nice. I can set that up myself, but 
> OSGeo already has that infrastructure. So I propose migrating the code 
> to the OSGeo infrastructure, if possible.
> (b) At a steering level, taking the Project Steering Committee (PSC) 
> role out of the explicit control of a single maintainer (historically 
> funded by Refractions) and into a full PSC.
> (c) A and B above are in aid of an eventual move into OSGeo Incubation 
> and full OSGeo project membership. We know these will have to be done to 
> enter OSGeo, so might as well start now.
> 
> I would like to get the PSC boot-strapped with representatives from the 
> existing user/developer base of GEOS.
> 
> May I propose:
> 
> - Martin Davis, Refractions, who has an understanding of the architecture
> - Representatives of Autodesk and Safe, who already have "skin in the 
> game" and are gearing up for more development
> - Howard Butler, who can navigate our passage into the OSGeo 
> infrastructure world, and provide a viewpoint from build maintenance and 
> script bindings
> 
> This PSC can serve for six months, adding whomever it sees fit, and then 
> be re-formed based on the conditions in March 2008.
> 
> Thoughts?
> 
> Paul
> 
> 


-- 

   Paul Ramsey
   Refractions Research
   http://www.refractions.net
   pramsey@refractions.net
   Phone: 250-383-3022
   Cell: 250-885-0632

From Gregory.Williamson at digitalglobe.com  Fri Oct  5 16:54:28 2007
From: Gregory.Williamson at digitalglobe.com (Gregory Williamson)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] GEOS -> New Home / New Leadership
References: <47029400.2020808@refractions.net>
	<4706965F.5030302@refractions.net>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233015E2D56@COMAIL01.digitalglobe.com>

Let me know where to send the olive oil !

Best of luck and best wishes, 

Greg W.

-----Original Message-----
From: geos-devel-bounces@geos.refractions.net on behalf of Paul Ramsey
Sent: Fri 10/5/2007 1:54 PM
To: GEOS Development List
Subject: Re: [geos-devel] GEOS -> New Home / New Leadership
 
Not hearing any objections, let's proceed. In the event of PSC ties, 
disputes shall be settled with a bout of Greco-Roman Wrestling.

Howard, can we work together to start the move to OSGeo infrastructure?

P

Paul Ramsey wrote:
> All,
> 
> At FOSS4G, I had a long discussion with folks from Safe, Ingres, and 
> Autodesk about the future of GEOS. The bottom line is that they are all 
> interested in investing more in extending and moving GEOS forwards.
> 
> In order to make those investments more effective and future-proof and 
> give the companies a voice in the project going forward, I am proposing 
> a number of measures:
> 
> (a) At a technical level, having a Trac infrastructure for bugs and wiki 
> notes and code browsing would be nice. I can set that up myself, but 
> OSGeo already has that infrastructure. So I propose migrating the code 
> to the OSGeo infrastructure, if possible.
> (b) At a steering level, taking the Project Steering Committee (PSC) 
> role out of the explicit control of a single maintainer (historically 
> funded by Refractions) and into a full PSC.
> (c) A and B above are in aid of an eventual move into OSGeo Incubation 
> and full OSGeo project membership. We know these will have to be done to 
> enter OSGeo, so might as well start now.
> 
> I would like to get the PSC boot-strapped with representatives from the 
> existing user/developer base of GEOS.
> 
> May I propose:
> 
> - Martin Davis, Refractions, who has an understanding of the architecture
> - Representatives of Autodesk and Safe, who already have "skin in the 
> game" and are gearing up for more development
> - Howard Butler, who can navigate our passage into the OSGeo 
> infrastructure world, and provide a viewpoint from build maintenance and 
> script bindings
> 
> This PSC can serve for six months, adding whomever it sees fit, and then 
> be re-formed based on the conditions in March 2008.
> 
> Thoughts?
> 
> Paul
> 
> 


-- 

   Paul Ramsey
   Refractions Research
   http://www.refractions.net
   pramsey@refractions.net
   Phone: 250-383-3022
   Cell: 250-885-0632
_______________________________________________
geos-devel mailing list
geos-devel@geos.refractions.net
http://geos.refractions.net/mailman/listinfo/geos-devel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20071005/01d501f0/attachment.html
From mark.cave-ayland at ilande.co.uk  Mon Oct  8 02:50:51 2007
From: mark.cave-ayland at ilande.co.uk (Mark Cave-Ayland)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] Where did distancePointLine go?
In-Reply-To: <OF2034DEBA.4ED606AE-ON07257367.0012CFD3-07257367.0014ABD8@usgs.gov>
References: <OF2034DEBA.4ED606AE-ON07257367.0012CFD3-07257367.0014ABD8@usgs.gov>
Message-ID: <1191826251.5657.5.camel@mca-desktop>

On Sun, 2007-09-30 at 20:45 -0700, Stuart C Sides wrote:
> 
> GEOS devels, 
> 
> In code we wrote for 2.2.3, we used CGAlgorithms::distancePointLine. I
> can't seem to find it or a replacement for it in version 3.0.0*. Was
> this a bad thing, am I missing something...? Any help would be
> appreciated. 
> 
> Thanks
> Stuart


Hi Stuart,

Are you using GEOS 3.0.0rc4 compiled as a DLL under Win32? There was a
fix a while back for MingW DLLs that was causing functions not to be
exported which has been fixed in the SVN repository.


ATB,

Mark.

-- 
ILande - Open Source Consultancy
http://www.ilande.co.uk



From ssides at usgs.gov  Mon Oct  8 14:56:31 2007
From: ssides at usgs.gov (Stuart C Sides)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] Re: Where did distancePointLine go?
Message-ID: <OF88EE70B8.19E40463-ON0725736E.006468AC-0725736E.00680C58@usgs.gov>

Mark,

I am compiling on Linux x86_64 with only the --prefix option for 
configure. I have tested 3.0.0rc4 and several SVN versions. To make sure I 
had the latest I downloaded the SVN version again on Oct 8th. I continue 
to get the following:



> make FindImageOverlaps.o
FindImageOverlaps.cpp:2:41: error: geos/algorithm/CGAlgorithms.h: No such 
file or directory
In file included from FindImageOverlaps.cpp:3:
/XXXX/include/geos/geom/BinaryOp.h:54:44: error: 
geos/precision/GeometrySnapper.h: No such file or directory
In file included from /XXXX/geos/include/geos.h:27,
                 from /XXXX/autoseedAug2007/isis/inc/PolygonTools.h:26,
                 from FindImageOverlaps.cpp:9:
/XXXX/geos/include/geos/geom.h:145:2: warning: #warning *** FIXME: to be 
removed, temporarly set to allow a quick successful build
In file included from /XXXX/geos/include/geos.h:29,
                 from /XXXX/autoseedAug2007/isis/inc/PolygonTools.h:26,
                 from FindImageOverlaps.cpp:9:
/XXXX/geos/include/geos/io.h:61:2: warning: #warning *** FIXME: to be 
removed, temporarly set to allow a quick successful build
/XXXX/geos/include/geos/geom/BinaryOp.h: In function 
'std::auto_ptr<geos::geom::Geometry> geos::geom::SnapOp(const 
geos::geom::Geometry*, const geos::geom::Geometry*, BinOp)':
/XXXX/geos/include/geos/geom/BinaryOp.h:131: error: 
'geos::precision::GeometrySnapper' has not been declared
/XXXX/geos/include/geos/geom/BinaryOp.h:135: error: 'GeometrySnapper' has 
not been declared
/XXXX/geos/include/geos/geom/BinaryOp.h:157: error: 'GeometrySnapper' was 
not declared in this scope
/XXXX/geos/include/geos/geom/BinaryOp.h:157: error: expected `;' before 
'snapper0'
/XXXX/geos/include/geos/geom/BinaryOp.h:158: error: 'snapper0' was not 
declared in this scope
/XXXX/geos/include/geos/geom/BinaryOp.h:161: error: expected `;' before 
'snapper1'
/XXXX/geos/include/geos/geom/BinaryOp.h:162: error: 'snapper1' was not 
declared in this scope
FindImageOverlaps.cpp: In member function 'geos::geom::LinearRing* 
Isis::FindImageOverlaps::Despike(const geos::geom::LineString*)':
FindImageOverlaps.cpp:392: error: 'geos::algorithm::CGAlgorithms' has not 
been declared
FindImageOverlaps.cpp:400: error: 'geos::algorithm::CGAlgorithms' has not 
been declared
/XXXX/geos/include/geos/geom/BinaryOp.h: In function 
'std::auto_ptr<geos::geom::Geometry> geos::geom::SnapOp(const 
geos::geom::Geometry*, const geos::geom::Geometry*, BinOp) [with BinOp = 
geos::operation::overlay::overlayOp]':
/XXXX/geos/include/geos/geom/BinaryOp.h:271:   instantiated from 
'std::auto_ptr<geos::geom::Geometry> geos::geom::BinaryOp(const 
geos::geom::Geometry*, const geos::geom::Geometry*, BinOp) [with BinOp = 
geos::operation::overlay::overlayOp]'
FindImageOverlaps.cpp:152:   instantiated from here
/XXXX/geos/include/geos/geom/BinaryOp.h:150: warning: unused variable 
'operand0'
make: *** [FindImageOverlaps.o] Error 1



If I manually copy CGAlgorithms.h and GeometrySnapper.h from 
"source/headers/..." to their respective include areas everything works 
fine including the ld and execution. It seems odd that the object modules 
would be in the library but these two include files are not moved during 
the "make install".

Thanks
Stuart

On Sun, 2007-09-30 at 20:45 -0700, Stuart C Sides wrote:
> 
> GEOS devels, 
> 
> In code we wrote for 2.2.3, we used CGAlgorithms::distancePointLine. I
> can't seem to find it or a replacement for it in version 3.0.0*. Was
> this a bad thing, am I missing something...? Any help would be
> appreciated. 
> 
> Thanks
> Stuart


Hi Stuart,

Are you using GEOS 3.0.0rc4 compiled as a DLL under Win32? There was a
fix a while back for MingW DLLs that was causing functions not to be
exported which has been fixed in the SVN repository.


ATB,

Mark.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20071008/1938ea2d/attachment.html
From mark.cave-ayland at ilande.co.uk  Mon Oct  8 17:14:10 2007
From: mark.cave-ayland at ilande.co.uk (Mark Cave-Ayland)
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] Re: Where did distancePointLine go?
In-Reply-To: <OF88EE70B8.19E40463-ON0725736E.006468AC-0725736E.00680C58@usgs.gov>
References: <OF88EE70B8.19E40463-ON0725736E.006468AC-0725736E.00680C58@usgs.gov>
Message-ID: <1191878050.5630.14.camel@mca-desktop>

On Mon, 2007-10-08 at 11:56 -0700, Stuart C Sides wrote:

(cut)

> 
> If I manually copy CGAlgorithms.h and GeometrySnapper.h from
> "source/headers/..." to their respective include areas everything
> works fine including the ld and execution. It seems odd that the
> object modules would be in the library but these two include files are
> not moved during the "make install". 
> 
> Thanks 
> Stuart 


Ah I see now. Looking at GEOS head I see this:
http://svn.refractions.net/geos/trunk/source/headers/geos/algorithm/Makefile.am compared to GEOS 2 here: http://svn.refractions.net/geos/tags/2.2.3/source/headers/geos/Makefile.am. Since distancePointLine is in geosAlgorithm.h, it only gets installed with GEOS 2.2.x since the new header files are deliberately not installed. I do not know what the exact reasoning behind this is though.

I'm not fantastically familiar with GEOS, however I would suggest that
you will find the answers somewhere in the SVN changelog at
http://geos.refractions.net/ro/SVN.txt or by running "svn log" on a
machine with SVN installed to try and find the relevant commit.


HTH,

Mark.

-- 
ILande - Open Source Consultancy
http://www.ilande.co.uk



From bartvde at osgis.nl  Tue Oct  9 09:39:39 2007
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Fri Nov  2 20:53:44 2007
Subject: [geos-devel] clipping a line between 2 points
Message-ID: <80743d3899290950d3cc28f118a719db@145.50.39.11>

Hi list,

I am looking for a function which can do the following:

-clip a line between 2 points. So basically I want the line segment between
two points to be returned.

Is there such a thing in GEOS?

Another question, what if the points don't exactly lie on the line, is there
an algorithm for doing the same thing in that situation (i.e. first snap the
points to the line, and then clip)?

Best regards,
Bart

--
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl






From woodbri at swoodbridge.com  Tue Oct  9 09:55:10 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] clipping a line between 2 points
In-Reply-To: <80743d3899290950d3cc28f118a719db@145.50.39.11>
References: <80743d3899290950d3cc28f118a719db@145.50.39.11>
Message-ID: <470B883E.3040309@swoodbridge.com>

Bart van den Eijnden (OSGIS) wrote:
> Hi list,
> 
> I am looking for a function which can do the following:
> 
> -clip a line between 2 points. So basically I want the line segment between
> two points to be returned.
> 
> Is there such a thing in GEOS?
> 
> Another question, what if the points don't exactly lie on the line, is there
> an algorithm for doing the same thing in that situation (i.e. first snap the
> points to the line, and then clip)?

Bart,

I do not believe there is a function(s) that will do this in GEOS, but 
the algorithm would be something like:

1) get the polyline segments
2) drop a normal from the points onto each segment
3) if the point is off the segment (ie on the projection of the segment 
beyond the end points), pick the nearest endpoint.
4) remember the nearest point and what segment it is on
5) construct a new polyline starting at the first nearest point on the 
segments, pick up the intervening points and end with the last nearest 
point.

That about does it. There are some corner cases you might want to check 
for, like a point is at the center of a circle and multiple segments lay 
on the perimeter. I would take the first point found for the closest. 
There are probably others that are escaping my grasp at the moment.

Hope this helps,
   -Steve

From fabian.hohmuth at pixelgrammetry.com  Thu Oct 11 17:41:53 2007
From: fabian.hohmuth at pixelgrammetry.com (Fabian Hohmuth)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] speed difference between release and debug builds
Message-ID: <470E98A1.60207@pixelgrammetry.com>

Hi all,

we're using GEOS via the C API under Windows (doing unions on a number 
of complex polygons) and noticed that there is a major (3x) speed 
difference between the Release and Debug builds. I somehow can't believe 
that the compiler optimization is that good. The defined preprocessor 
symbols are the same between the two configurations. Any hints where 
this could come from?

Thanks,
- Fabian




From pgerritson at adelphia.net  Thu Oct 11 18:43:08 2007
From: pgerritson at adelphia.net (Pete Gerritson)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] speed difference between release and debug builds
References: <470E98A1.60207@pixelgrammetry.com>
Message-ID: <000a01c80c58$18989f90$6401a8c0@PG64>

I've noticed some large performance differences between debug and release 
builds using VC 8.0 when stl containers are used (not specifically with 
geos, but in general).  I believe iterator debugging is enabled by default 
in debug builds.  See 
http://msdn2.microsoft.com/en-us/library/Aa985939(VS.80).aspx for more info. 
You might try turning this off and see what effect it has.

Pete

----- Original Message ----- 
From: "Fabian Hohmuth" <fabian.hohmuth@pixelgrammetry.com>
To: "GEOS Development List" <geos-devel@geos.refractions.net>
Sent: Thursday, October 11, 2007 2:41 PM
Subject: [geos-devel] speed difference between release and debug builds


> Hi all,
>
> we're using GEOS via the C API under Windows (doing unions on a number of 
> complex polygons) and noticed that there is a major (3x) speed difference 
> between the Release and Debug builds. I somehow can't believe that the 
> compiler optimization is that good. The defined preprocessor symbols are 
> the same between the two configurations. Any hints where this could come 
> from?
>
> Thanks,
> - Fabian
>
>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel
> 


From rblatt at warmlyyours.com  Fri Oct 12 18:41:16 2007
From: rblatt at warmlyyours.com (Ramie Blatt)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac OS
Message-ID: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com>

Hi there,

I'm having quite a time of it trying to build geos with the ruby swig  
bindings on a MacBook Pro.

Any help on this issue would be appreciated.

When I try to build geos from any of the following releases  
(uninstalling between attempts):
[2006/12/14] geos-3.0.0rc3.tar.bz2
[2006/11/05] geos-3.0.0rc2.tar.bz2
[2006/09/09] geos-3.0.0rc1.tar.bz2

I get the following error at the make command:

----------------------------------------------
  g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers -I../../source/ 
headers/geos -I/usr/local/lib/ruby/1.8/i686-darwin8.9.1 -I../../capi - 
g -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT geos_la- 
geos_wrap.lo -MD -MP -MF .deps/geos_la-geos_wrap.Tpo -c  
geos_wrap.cxx  -fno-common -DPIC -o .libs/geos_la-geos_wrap.o
geos_wrap.cxx: In function 'void checkCoordSeqBounds(GEOSCoordSeq_t*,  
size_t)':
geos_wrap.cxx:1702: error: invalid conversion from 'size_t*' to  
'unsigned int*'
geos_wrap.cxx: In function 'int GeosCoordinateSequence_getSize 
(GeosCoordinateSequence*)':
geos_wrap.cxx:1844: error: invalid conversion from 'size_t*' to  
'unsigned int*'
geos_wrap.cxx: In function 'int GeosCoordinateSequence_getDimensions 
(GeosCoordinateSequence*)':
geos_wrap.cxx:1850: error: invalid conversion from 'size_t*' to  
'unsigned int*'
make[4]: *** [geos_la-geos_wrap.lo] Error 1
make[3]: *** [all-recursive] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all-recursive] Error 1
----------------------------------------------

When I try to build geos from the [2007/02/02] geos-3.0.0rc4.tar.bz2  
release, everything seems to work, but then I can't actually load the  
geos code in ruby, getting the following error whenever "require  
'geos'" is encountered, even though I can see the geos.a, geos.la,  
and geos.so  files in the /usr/local/lib/ruby/site_ruby/1.8/i686- 
darwin8.9.1/  directory:

----------------------------------------------
 >> require 'geos'
MissingSourceFile: no such file to load -- geos
         from /usr/local/lib/ruby/site_ruby/1.8/rubygems/ 
custom_require.rb:27:in `gem_original_require'
         from /usr/local/lib/ruby/site_ruby/1.8/rubygems/ 
custom_require.rb:27:in `require'
         from ./script/../config/../config/../vendor/rails/ 
activerecord/lib/../../activesupport/lib/active_support/ 
dependencies.rb:147:in `require'
         from (irb):5
         from :0
----------------------------------------------


My environment, below, seems to be a good sane environment, and I run  
several ruby on rails applications.

Mac OSX 10.4.10
gcc version 4.0.1 (Apple Computer, Inc. build 5250)
libtool Apple Computer, Inc. version cctools-590.23.2
ruby 1.8.6 (2007-03-13 patchlevel 0) [i686-darwin8.9.1]
rails 1.2.3


Any help on this issue would be appreciated.

Regards,
Ramie Blatt

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20071012/067806c6/attachment.html
From gilles.bassiere at makina-corpus.com  Thu Oct 18 07:38:19 2007
From: gilles.bassiere at makina-corpus.com (=?ISO-8859-15?Q?Gilles_Bassi=E8re?=)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] testrunner fail
Message-ID: <471745AB.9050705@makina-corpus.com>

Hi list,

I can't find a geos-users mailing list or any similar. If this message has nothing to do here, please redirect me. I tried to post on postgis-users but didn't get any answer.

A fatal error in PostGIS led me to investigate about my GEOS install. It seems broken but I can't find out why. Indeed, when I run a 'make check' in the build tree, I get:

[...]
Area of difference between obtained and expected: 4.98296e-05 - 
Tolerated diff: 495.66 (SUCCESS!)
Area of difference between obtained and expected: 0 - Tolerated diff: 
6.68967 (SUCCESS!)
Area of difference between obtained and expected: 0 - Tolerated diff: 
3.14191 (SUCCESS!)
./testrunner: line 1: 12017 Segmentation fault      (core dumped) 
./XMLTester -v ./testLeaksBig.xml ./hexwkb.xml ./test.xml 
./linemerge.xml ./TestInteriorPoint.xml ./TestCentroid.xml 
./TestIsValid.xml ./TestValid.xml ./TestValid2.xml ./TestValid2-big.xml 
./robustness.xml ./stmlf-cases-20061020.xml ./TestRobustOverlayFixed.xml 
./fme.xml ./TestBufferExternal.xml ./heisenbugs.xml 
./stmlf-cases-20070119.xml
FAIL: testrunner
[...]

I'm stuck now... How should I fix this ?

My config is:
- GEOS 3.0.0rc4
- Ubuntu Feisty (7.04)
- Proc AMD64 (though I use the i386 distro)

Geos is compiled with "--enable-python" and "--disable-inline" options, I also set a custom "--prefix". Python bindings are not so important to me, I could disable it if required but the inlining seems to be incompatible with QGIS.

Regards,

-- 
Gilles Bassiere
MAKINA CORPUS
30 rue des Jeuneurs
FR-75011 PARIS
http://www.makina-corpus.com


From mateusz at loskot.net  Mon Oct 22 13:15:06 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] testrunner fail
In-Reply-To: <471745AB.9050705@makina-corpus.com>
References: <471745AB.9050705@makina-corpus.com>
Message-ID: <471CDA9A.6020804@loskot.net>

Gilles Bassi?re wrote:
> [...]
> Geos is compiled with "--enable-python" and "--disable-inline" options,
> I also set a custom "--prefix".

Could you try to build without --disable-inline and see if it changes
anything?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From gilles.bassiere at makina-corpus.com  Tue Oct 23 09:11:49 2007
From: gilles.bassiere at makina-corpus.com (=?ISO-8859-15?Q?Gilles_Bassi=E8re?=)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] testrunner fail
In-Reply-To: <471CDA9A.6020804@loskot.net>
References: <471745AB.9050705@makina-corpus.com> <471CDA9A.6020804@loskot.net>
Message-ID: <471DF315.9080100@makina-corpus.com>

Mateusz Loskot wrote:
> Gilles Bassi?re wrote:
>   
>> [...]
>> Geos is compiled with "--enable-python" and "--disable-inline" options,
>> I also set a custom "--prefix".
>>     
>
> Could you try to build without --disable-inline and see if it changes
> anything?
>
> Cheers
>   
Hi Mateusz,

Thanks for help. I tried your solution and also dropped the Python 
option as I don't really need it. After compilation, Geos passed all 
tests ("make check" ok). I proceed with postgis upgrade :

make clean
make
make install
ldconfig
psql -d topo -f share/lwpostgis_upgrade.sql

Unfortunately, I still have a Fatal error in PostGIS when using 
LineMerge() :

topo=> SELECT nom_rue, astext(LineMerge(Collect(wkb_geometry)))
topo-> FROM route
topo-> GROUP BY nom_rue
topo-> HAVING nom_rue IS NOT NULL;
server closed the connection unexpectedly
        This probably means the server terminated abnormally
        before or while processing the request.
The connection to the server was lost. Attempting reset: Succeeded.

So, the only progress is the Postgres' "Attempting reset" success (with 
--disable-inline, the error message ended with "Attempting reset: Failed.")

Postgres' log give me the following error message:

al] SELECT: CoordinateArraySequence.cpp:105: virtual const 
geos::geom::Coordinate& 
geos::geom::CoordinateArraySequence::getAt(size_t) const: Assertion 
`pos<vect->size()' failed.

I'm wondering whether it's a good idea to rely on geos 3.0. On the one 
hand, I use GeoDjango which only works when linked against geos 3.0, on 
the other hand I use postgis, qgis and many others that require a stable 
background... Would it be possible to install geos 2.2.3 as the default 
geos and build the 3.0.0 RC version only for apps that really require 
it? Any hints?

-- 
Gilles Bassiere
MAKINA CORPUS
30 rue des Jeuneurs
FR-75011 PARIS
http://www.makina-corpus.com


From mateusz at loskot.net  Tue Oct 23 10:13:52 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] testrunner fail
In-Reply-To: <471DF315.9080100@makina-corpus.com>
References: <471745AB.9050705@makina-corpus.com> <471CDA9A.6020804@loskot.net>
	<471DF315.9080100@makina-corpus.com>
Message-ID: <471E01A0.6010205@loskot.net>

Gilles Bassi?re wrote:
> Mateusz Loskot wrote:
>> Gilles Bassi?re wrote:
>>  
>>> [...]
>>> Geos is compiled with "--enable-python" and "--disable-inline" options,
>>> I also set a custom "--prefix".
>>>     
>>
>> Could you try to build without --disable-inline and see if it changes
>> anything?
>>
>> Cheers
>>   
> Hi Mateusz,
> 
> Thanks for help. I tried your solution and also dropped the Python
> option as I don't really need it. After compilation, Geos passed all
> tests ("make check" ok). I proceed with postgis upgrade :
> 
> make clean
> make
> make install
> ldconfig
> psql -d topo -f share/lwpostgis_upgrade.sql
> 
> Unfortunately, I still have a Fatal error in PostGIS when using
> LineMerge() :
> 
> topo=> SELECT nom_rue, astext(LineMerge(Collect(wkb_geometry)))
> topo-> FROM route
> topo-> GROUP BY nom_rue
> topo-> HAVING nom_rue IS NOT NULL;
> server closed the connection unexpectedly
>        This probably means the server terminated abnormally
>        before or while processing the request.
> The connection to the server was lost. Attempting reset: Succeeded.
> 
> So, the only progress is the Postgres' "Attempting reset" success (with
> --disable-inline, the error message ended with "Attempting reset: Failed.")
> 
> Postgres' log give me the following error message:
> 
> al] SELECT: CoordinateArraySequence.cpp:105: virtual const
> geos::geom::Coordinate&
> geos::geom::CoordinateArraySequence::getAt(size_t) const: Assertion
> `pos<vect->size()' failed.

Hi,

Yes, this looks suspiciously. I will try to add LineMerge to unit tests
over this week and see if general test cases will work or not.

> I'm wondering whether it's a good idea to rely on geos 3.0. On the one
> hand, I use GeoDjango which only works when linked against geos 3.0, on
> the other hand I use postgis, qgis and many others that require a stable
> background... Would it be possible to install geos 2.2.3 as the default
> geos and build the 3.0.0 RC version only for apps that really require
> it? Any hints?

Yes, it would be possible, but you will need to configure environment
for applications separately by setting different value of LD_LIBRARY_PATH.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Oct 23 10:15:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] speed difference between release and debug builds
In-Reply-To: <000a01c80c58$18989f90$6401a8c0@PG64>
References: <470E98A1.60207@pixelgrammetry.com>
	<000a01c80c58$18989f90$6401a8c0@PG64>
Message-ID: <471E01F1.7020501@loskot.net>

Pete,

This shouldn't be any surprise.
Performance observations using non-optimized (debug) builds do not make
much sense. Debug builds are for debugging but not for benchmarking.

Cheers

Pete Gerritson wrote:
> I've noticed some large performance differences between debug and
> release builds using VC 8.0 when stl containers are used (not
> specifically with geos, but in general).  I believe iterator debugging
> is enabled by default in debug builds.  See
> http://msdn2.microsoft.com/en-us/library/Aa985939(VS.80).aspx for more
> info. You might try turning this off and see what effect it has.
> 
> Pete
> 
> ----- Original Message ----- From: "Fabian Hohmuth"
> <fabian.hohmuth@pixelgrammetry.com>
> To: "GEOS Development List" <geos-devel@geos.refractions.net>
> Sent: Thursday, October 11, 2007 2:41 PM
> Subject: [geos-devel] speed difference between release and debug builds
> 
> 
>> Hi all,
>>
>> we're using GEOS via the C API under Windows (doing unions on a number
>> of complex polygons) and noticed that there is a major (3x) speed
>> difference between the Release and Debug builds. I somehow can't
>> believe that the compiler optimization is that good. The defined
>> preprocessor symbols are the same between the two configurations. Any
>> hints where this could come from?
>>
>> Thanks,
>> - Fabian



-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Oct 23 10:20:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] GEOS -> New Home / New Leadership
In-Reply-To: <47029400.2020808@refractions.net>
References: <47029400.2020808@refractions.net>
Message-ID: <471E0314.5070507@loskot.net>

Paul Ramsey wrote:
> All,
> 
> At FOSS4G, I had a long discussion with folks from Safe, Ingres, and
> Autodesk about the future of GEOS. The bottom line is that they are all
> interested in investing more in extending and moving GEOS forwards.

Paul,

Great news!

> In order to make those investments more effective and future-proof and
> give the companies a voice in the project going forward, I am proposing
> a number of measures:
> 
> (a) At a technical level, having a Trac infrastructure for bugs and wiki
> notes and code browsing would be nice. I can set that up myself, but
> OSGeo already has that infrastructure. So I propose migrating the code
> to the OSGeo infrastructure, if possible.

Beautiful!

> (b) At a steering level, taking the Project Steering Committee (PSC)
> role out of the explicit control of a single maintainer (historically
> funded by Refractions) and into a full PSC.

and better...

> (c) A and B above are in aid of an eventual move into OSGeo Incubation
> and full OSGeo project membership. We know these will have to be done to
> enter OSGeo, so might as well start now.

and better again :-)

> I would like to get the PSC boot-strapped with representatives from the
> existing user/developer base of GEOS.
> 
> May I propose:

I've taken a liberty to vote as a member of GEOS developers..

> - Martin Davis, Refractions, who has an understanding of the architecture


+1

> - Representatives of Autodesk and Safe, who already have "skin in the
> game" and are gearing up for more development

+1

> - Howard Butler, who can navigate our passage into the OSGeo
> infrastructure world, and provide a viewpoint from build maintenance and
> script bindings

+1

> This PSC can serve for six months, adding whomever it sees fit, and then
> be re-formed based on the conditions in March 2008.
> 
> Thoughts?

Generally, I believe this motion will bring a lot of benefits to the
project and its community.

After the PSC is formed, project uses, developers and PSC could discuss
future plans in details, for now the "revitalization" plan looks very
good to me.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From rblatt at warmlyyours.com  Tue Oct 23 13:53:32 2007
From: rblatt at warmlyyours.com (Ramie Blatt)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac OS
In-Reply-To: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com>
References: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com>
Message-ID: <1CA34D1A-3EA8-4C07-81CD-58B304544148@warmlyyours.com>

I'm wondering if there's *anyone* out there who has successfully  
built GEOS 3 with swig and ruby on Mac OS?

I've spent a lot of time on this and keep coming up empty...

I tried building GEOS with ruby enabled using the hourly svn snapshot  
yesterday and get the same "make" issue I get with the  
geos-3.0.0rc1,2 and 3 tarballs, namely:
"geos_wrap.cxx:1702: error: invalid conversion from 'size_t*' to  
'unsigned int*"

Strangely, the geos-3.0.0rc4.tar.bz2 release builds fine, but then I  
can't access GEOS in ruby, getting a "MissingSourceFile: no such file  
to load -- geos" whenever 'require 'geos' is encountered (though the  
library files seem to be where they should).

Again, any help on this is great;y appreciated!

Best,
Ramie


On Oct 12, 2007, at 4:41 PM, Ramie Blatt wrote:

> Hi there,
>
> I'm having quite a time of it trying to build geos with the ruby  
> swig bindings on a MacBook Pro.
>
> Any help on this issue would be appreciated.
>
> When I try to build geos from any of the following releases  
> (uninstalling between attempts):
> [2006/12/14] geos-3.0.0rc3.tar.bz2
> [2006/11/05] geos-3.0.0rc2.tar.bz2
> [2006/09/09] geos-3.0.0rc1.tar.bz2
>
> I get the following error at the make command:
>
> ----------------------------------------------
>  g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers -I../../source/ 
> headers/geos -I/usr/local/lib/ruby/1.8/i686-darwin8.9.1 -I../../ 
> capi -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT  
> geos_la-geos_wrap.lo -MD -MP -MF .deps/geos_la-geos_wrap.Tpo -c  
> geos_wrap.cxx  -fno-common -DPIC -o .libs/geos_la-geos_wrap.o
> geos_wrap.cxx: In function 'void checkCoordSeqBounds 
> (GEOSCoordSeq_t*, size_t)':
> geos_wrap.cxx:1702: error: invalid conversion from 'size_t*' to  
> 'unsigned int*'
> geos_wrap.cxx: In function 'int GeosCoordinateSequence_getSize 
> (GeosCoordinateSequence*)':
> geos_wrap.cxx:1844: error: invalid conversion from 'size_t*' to  
> 'unsigned int*'
> geos_wrap.cxx: In function 'int GeosCoordinateSequence_getDimensions 
> (GeosCoordinateSequence*)':
> geos_wrap.cxx:1850: error: invalid conversion from 'size_t*' to  
> 'unsigned int*'
> make[4]: *** [geos_la-geos_wrap.lo] Error 1
> make[3]: *** [all-recursive] Error 1
> make[2]: *** [all] Error 2
> make[1]: *** [all-recursive] Error 1
> make: *** [all-recursive] Error 1
> ----------------------------------------------
>
> When I try to build geos from the [2007/02/02]  
> geos-3.0.0rc4.tar.bz2 release, everything seems to work, but then I  
> can't actually load the geos code in ruby, getting the following  
> error whenever "require 'geos'" is encountered, even though I can  
> see the geos.a, geos.la, and geos.so  files in the /usr/local/lib/ 
> ruby/site_ruby/1.8/i686-darwin8.9.1/  directory:
>
> ----------------------------------------------
> >> require 'geos'
> MissingSourceFile: no such file to load -- geos
>         from /usr/local/lib/ruby/site_ruby/1.8/rubygems/ 
> custom_require.rb:27:in `gem_original_require'
>         from /usr/local/lib/ruby/site_ruby/1.8/rubygems/ 
> custom_require.rb:27:in `require'
>         from ./script/../config/../config/../vendor/rails/ 
> activerecord/lib/../../activesupport/lib/active_support/ 
> dependencies.rb:147:in `require'
>         from (irb):5
>         from :0
> ----------------------------------------------
>
>
> My environment, below, seems to be a good sane environment, and I  
> run several ruby on rails applications.
>
> Mac OSX 10.4.10
> gcc version 4.0.1 (Apple Computer, Inc. build 5250)
> libtool Apple Computer, Inc. version cctools-590.23.2
> ruby 1.8.6 (2007-03-13 patchlevel 0) [i686-darwin8.9.1]
> rails 1.2.3
>
>
> Any help on this issue would be appreciated.
>
> Regards,
> Ramie Blatt
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

Ramie Blatt
rblatt@warmlyyours.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20071023/df1a8e41/attachment.html
From cfis at savagexi.com  Tue Oct 23 16:16:08 2007
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:45 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac
 OS
In-Reply-To: <1CA34D1A-3EA8-4C07-81CD-58B304544148@warmlyyours.com>
References: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com>
	<1CA34D1A-3EA8-4C07-81CD-58B304544148@warmlyyours.com>
Message-ID: <471E5688.3010906@savagexi.com>

> I tried building GEOS with ruby enabled using the hourly svn snapshot 
> yesterday and get the same "make" issue I get with the geos-3.0.0rc1,2 
> and 3 tarballs, namely:
> "geos_wrap.cxx:1702: error: invalid conversion from 'size_t*' to 
> 'unsigned int*"

What's the line of code?


> Strangely, the geos-3.0.0rc4.tar.bz2 release builds fine, but then I 
> can't access GEOS in ruby, getting a "MissingSourceFile: no such file to 
> load -- geos" whenever 'require 'geos' is encountered (though the 
> library files seem to be where they should).

Open a command line.  Go to that directory.  Type "irb"  Then try to 
load geos.  Does that work?

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20071023/c85180f7/smime.bin
From rblatt at warmlyyours.com  Tue Oct 23 20:59:21 2007
From: rblatt at warmlyyours.com (Ramie Blatt)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac OS
In-Reply-To: <471E5688.3010906@savagexi.com>
References: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com><1CA34D1A-3EA8-4C07-81
	CD-58B304544148@warmlyyours.com> <471E5688.3010906@savagexi.com>
Message-ID: <8D8AD871-ABB1-4573-801A-8189417E45FD@warmlyyours.com>

Hi Charlie,

After (a seemingly successful) build of geos-3.0.0rc4, I did cd to  
the both the "/usr/local/src/geos-3.0.0rc4/" build directory and the  
"/usr/local/lib/ruby/site_ruby/1.8/i686-darwin8.9.1/" directory  
(which contains the resulting geos.a, geos.la, and geos.so files) and  
try irb and got the "LoadError: no such file to load -- geos" error  
when I typed "require 'geos'" in the irb console.

I'm attaching a full terminal log of the rc4 build process and the  
irb sessions called "geos-3.0.0rc4_err.txt"

A partial trace for the make error on the geos-3.0.0rc1,2 and 3  
tarballs is below. and I attach a full terminal log for the build  
process on rc3 called "geos-3.0.0rc3_err.txt".

----------------------------------------------
  g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers -I../../source/ 
headers/geos -I/usr/local/lib/ruby/1.8/i686-darwin8.9.1 -I../../capi - 
g -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT geos_la- 
geos_wrap.lo -MD -MP -MF .deps/geos_la-geos_wrap.Tpo -c  
geos_wrap.cxx  -fno-common -DPIC -o .libs/geos_la-geos_wrap.o
geos_wrap.cxx: In function 'void checkCoordSeqBounds(GEOSCoordSeq_t*,  
size_t)':
geos_wrap.cxx:1702: error: invalid conversion from 'size_t*' to  
'unsigned int*'
geos_wrap.cxx: In function 'int GeosCoordinateSequence_getSize 
(GeosCoordinateSequence*)':
geos_wrap.cxx:1844: error: invalid conversion from 'size_t*' to  
'unsigned int*'
geos_wrap.cxx: In function 'int GeosCoordinateSequence_getDimensions 
(GeosCoordinateSequence*)':
geos_wrap.cxx:1850: error: invalid conversion from 'size_t*' to  
'unsigned int*'
make[4]: *** [geos_la-geos_wrap.lo] Error 1
make[3]: *** [all-recursive] Error 1
make[2]: *** [all] Error 2
make[1]: *** [all-recursive] Error 1
make: *** [all-recursive] Error 1
----------------------------------------------

Many thanks for your help!
Ramie

??

On Oct 23, 2007, at 2:16 PM, Charlie Savage wrote:

>> I tried building GEOS with ruby enabled using the hourly svn  
>> snapshot yesterday and get the same "make" issue I get with the  
>> geos-3.0.0rc1,2 and 3 tarballs, namely:
>> "geos_wrap.cxx:1702: error: invalid conversion from 'size_t*' to  
>> 'unsigned int*"
>
> What's the line of code?
>
>
>> Strangely, the geos-3.0.0rc4.tar.bz2 release builds fine, but then  
>> I can't access GEOS in ruby, getting a "MissingSourceFile: no such  
>> file to load -- geos" whenever 'require 'geos' is encountered  
>> (though the library files seem to be where they should).
>
> Open a command line.  Go to that directory.  Type "irb"  Then try  
> to load geos.  Does that work?
>
> Charlie
> _______________________________________________
> geos-devel mailing list
> geos-devel@geos.refractions.net
> http://geos.refractions.net/mailman/listinfo/geos-devel

Ramie Blatt
rblatt@warmlyyours.com



-------------- next part --------------
Skipped content of type multipart/mixed
From cfis at savagexi.com  Tue Oct 23 22:46:44 2007
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac
 OS
In-Reply-To: <8D8AD871-ABB1-4573-801A-8189417E45FD@warmlyyours.com>
References: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com><1CA34D1A-3EA8-4C07-81	CD-58B304544148@warmlyyours.com>
	<471E5688.3010906@savagexi.com>
	<8D8AD871-ABB1-4573-801A-8189417E45FD@warmlyyours.com>
Message-ID: <471EB214.5060400@savagexi.com>

Ramie,

 > Hi Charlie,
 >
 > After (a seemingly successful) build of geos-3.0.0rc4, I did cd to the
 > both the "/usr/local/src/geos-3.0.0rc4/" build directory and the
 > "/usr/local/lib/ruby/site_ruby/1.8/i686-darwin8.9.1/" directory (which
 > contains the resulting geos.a, geos.la, and geos.so files) and try irb
 > and got the "LoadError: no such file to load -- geos" error when I typed
 > "require 'geos'" in the irb console.
 >

Try using the head version from SVN or a snapshot build.  I made a large 
number of changes to the SWIG bindings after RC4 (see 
http://geos.refractions.net/ro/SVN.txt).

Charlie


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20071023/0dec6b7d/smime.bin
From rblatt at warmlyyours.com  Wed Oct 24 14:02:17 2007
From: rblatt at warmlyyours.com (Ramie Blatt)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac OS
In-Reply-To: <471EB214.5060400@savagexi.com>
References: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com><1CA34D1A-3EA8-4C07-81
	CD-58B304544148@warmlyyours.com><471E5688.3010906@savagexi.com><8D8AD871-AB
	B1-4573-801A-8189417E45FD@warmlyyours.com>
	<471EB214.5060400@savagexi.com>
Message-ID: <1A6EC12A-56CD-4CD5-936E-56C1A171CEC2@warmlyyours.com>

Hi Charlie,

I've built both from the hourly snapshot two days ago and from the  
HEAD svn version last night.

 From the hourly snapshot I get the same "geos_wrap.cxx: error:  
invalid conversion from 'size_t*' to 'unsigned int*'" error that I  
get with geos-3.0.0rc1,2 and 3.

 From the HEAD svn version (r2029) it won't build because it can't  
find "geos_c.h" in line 1612 of geos_wrap.cxx. After I remedied that,  
it built OK, but then again the *same* issue of "LoadError: no such  
file to load -- geos" error when I typed "require 'geos'" in the irb  
console. This acts just like the geos-3.0.0rc4 issue.

Charlie, have you (or anyone out there) successfully built a geos-3  
release with --enable-ruby set on Mac OS? If so, can you send me a  
log of the whole build process so I can troubleshoot my own issues?

Thanks,
Ramie


On Oct 23, 2007, at 8:46 PM, Charlie Savage wrote:

> Ramie,
>
> > Hi Charlie,
> >
> > After (a seemingly successful) build of geos-3.0.0rc4, I did cd  
> to the
> > both the "/usr/local/src/geos-3.0.0rc4/" build directory and the
> > "/usr/local/lib/ruby/site_ruby/1.8/i686-darwin8.9.1/" directory  
> (which
> > contains the resulting geos.a, geos.la, and geos.so files) and  
> try irb
> > and got the "LoadError: no such file to load -- geos" error when  
> I typed
> > "require 'geos'" in the irb console.
> >
>
> Try using the head version from SVN or a snapshot build.  I made a  
> large number of changes to the SWIG bindings after RC4 (see http:// 
> geos.refractions.net/ro/SVN.txt).
>
> Charlie
>
>

> From: Ramie Blatt
> Date: October 23, 2007 6:59:21 PM MDT
> Subject: Re: [geos-devel] Can't build geos with ruby swig bindings  
> on Mac OS
>
> Hi Charlie,
>
> After (a seemingly successful) build of geos-3.0.0rc4, I did cd to  
> the both the "/usr/local/src/geos-3.0.0rc4/" build directory and  
> the "/usr/local/lib/ruby/site_ruby/1.8/i686-darwin8.9.1/" directory  
> (which contains the resulting geos.a, geos.la, and geos.so files)  
> and try irb and got the "LoadError: no such file to load -- geos"  
> error when I typed "require 'geos'" in the irb console.
>
> I'm attaching a full terminal log of the rc4 build process and the  
> irb sessions called "geos-3.0.0rc4_err.txt"
>
> A partial trace for the make error on the geos-3.0.0rc1,2 and 3  
> tarballs is below. and I attach a full terminal log for the build  
> process on rc3 called "geos-3.0.0rc3_err.txt".
>
> ----------------------------------------------
>  g++ -DHAVE_CONFIG_H -I. -I. -I../../source/headers -I../../source/ 
> headers/geos -I/usr/local/lib/ruby/1.8/i686-darwin8.9.1 -I../../ 
> capi -g -O2 -DGEOS_INLINE -Wall -ansi -pedantic -Wno-long-long -MT  
> geos_la-geos_wrap.lo -MD -MP -MF .deps/geos_la-geos_wrap.Tpo -c  
> geos_wrap.cxx  -fno-common -DPIC -o .libs/geos_la-geos_wrap.o
> geos_wrap.cxx: In function 'void checkCoordSeqBounds 
> (GEOSCoordSeq_t*, size_t)':
> geos_wrap.cxx:1702: error: invalid conversion from 'size_t*' to  
> 'unsigned int*'
> geos_wrap.cxx: In function 'int GeosCoordinateSequence_getSize 
> (GeosCoordinateSequence*)':
> geos_wrap.cxx:1844: error: invalid conversion from 'size_t*' to  
> 'unsigned int*'
> geos_wrap.cxx: In function 'int GeosCoordinateSequence_getDimensions 
> (GeosCoordinateSequence*)':
> geos_wrap.cxx:1850: error: invalid conversion from 'size_t*' to  
> 'unsigned int*'
> make[4]: *** [geos_la-geos_wrap.lo] Error 1
> make[3]: *** [all-recursive] Error 1
> make[2]: *** [all] Error 2
> make[1]: *** [all-recursive] Error 1
> make: *** [all-recursive] Error 1
> ----------------------------------------------
>
> Many thanks for your help!
> Ramie




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20071024/e401e19e/attachment.html
From cfis at savagexi.com  Wed Oct 24 14:08:33 2007
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac
 OS
In-Reply-To: <1A6EC12A-56CD-4CD5-936E-56C1A171CEC2@warmlyyours.com>
References: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com><1CA34D1A-3EA8-4C07-81	CD-58B304544148@warmlyyours.com><471E5688.3010906@savagexi.com><8D8AD871-AB	B1-4573-801A-8189417E45FD@warmlyyours.com>	<471EB214.5060400@savagexi.com>
	<1A6EC12A-56CD-4CD5-936E-56C1A171CEC2@warmlyyours.com>
Message-ID: <471F8A21.1000800@savagexi.com>

>  From the HEAD svn version (r2029) it won't build because it can't find 
> "geos_c.h" in line 1612 of geos_wrap.cxx.

Hmm - that file is generated by the makefiles during ./configure.  If it 
doesn't exist, then you couldn't have built the capi library either.

  After I remedied that, it
> built OK, but then again the *same* issue of "LoadError: no such file to 
> load -- geos" error when I typed "require 'geos'" in the irb console. 

I'm not very familiar with Mac OS.  But it seems me there are 2 
possibilities. First, the error message is correct and Ruby can't find 
geos.so (the bindings).  Verify Ruby's load path is correct.

The other possibility is that Ruby is finding the geos.so (the bindings) 
but can't find the geos_c.so (the c library).  Does OS X have dependency 
checker of some sort so you can tell if that's the issue?

> Charlie, have you (or anyone out there) successfully built a geos-3 
> release with --enable-ruby set on Mac OS? If so, can you send me a log 
> of the whole build process so I can troubleshoot my own issues?

It sounds like you've built the Ruby bindings just fine.  I don't think 
that's the issue here.  It sounds much more like a load path issue.  I 
assume you did a make install on the geos c library?  I assume you've 
set various permissions correctly?  Etc.

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20071024/7d5a6c36/smime.bin
From cfis at savagexi.com  Wed Oct 24 14:10:56 2007
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac
 OS
In-Reply-To: <1A6EC12A-56CD-4CD5-936E-56C1A171CEC2@warmlyyours.com>
References: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com><1CA34D1A-3EA8-4C07-81	CD-58B304544148@warmlyyours.com><471E5688.3010906@savagexi.com><8D8AD871-AB	B1-4573-801A-8189417E45FD@warmlyyours.com>	<471EB214.5060400@savagexi.com>
	<1A6EC12A-56CD-4CD5-936E-56C1A171CEC2@warmlyyours.com>
Message-ID: <471F8AB0.90701@savagexi.com>

A couple other thoughts.

>  From the hourly snapshot I get the same "geos_wrap.cxx: error: invalid 
> conversion from 'size_t*' to 'unsigned int*'" error that I get with 
> geos-3.0.0rc1,2 and 3.
> 
>  From the HEAD svn version (r2029) it won't build because it can't find 
> "geos_c.h" in line 1612 of geos_wrap.cxx. 

So I'm confused.  SVN Head and the snapshot should be the same.

After I remedied that, it
> built OK, but then again the *same* issue of "LoadError: no such file to 
> load -- geos" error when I typed "require 'geos'" in the irb console. 

 > irb
irb(main):001:0> require 'foo'
LoadError: no such file to load -- foo from 
C:/Development/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in 
`gem_original_require' from 
C:/Development/ruby/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:27:in 
`require'

It just means it can't find the file - not that you can't build the 
bindings.

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20071024/6003960c/smime.bin
From pramsey at refractions.net  Wed Oct 24 16:26:10 2007
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] Can't build geos with ruby swig bindings on Mac OS
In-Reply-To: <471F8AB0.90701@savagexi.com>
References: <B836D52B-FF3D-4670-856B-F4809FD8B17D@warmlyyours.com>
	<"1CA34D1A-3EA8-4C07-81 CD-58B304544148"@warmlyyours.com>
	<471E5688.3010906@savagexi.com>
	<"8D8AD871-AB B1-4573-801A-8189417E45FD"@warmlyyours.com>
	<471EB214.5060400@savagexi.com>
	<1A6EC12A-56CD-4CD5-936E-56C1A171CEC2@warmlyyours.com>
	<471F8AB0.90701@savagexi.com>
Message-ID: <D7D03EA4-1167-459F-B478-60F820902A55@refractions.net>


On 24-Oct-07, at 11:10 AM, Charlie Savage wrote:

> So I'm confused.  SVN Head and the snapshot should be the same.

Snapshot is generated from 'make dist', so if someone has added files  
and not added them to the automake system they won't end up in  
snapshot.  Possible?

P

From jleslie at placebase.com  Wed Oct 24 20:51:31 2007
From: jleslie at placebase.com (John Leslie)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] Assertion failed during Buffer() on invalid geometry
Message-ID: <471FE893.7030305@placebase.com>

Hello,

So I was just trying to clean up some invalid geometries in a PostGIS 
database, using Buffer(the_geom, 0), when I had GEOS fail an assertion 
on me:

[local]:vmap0=# select IsValid(the_geom) from bad_geom;
NOTICE:  Ring Self-intersection at or near point -67.1954 44.9132
 isvalid
---------
 f
[local]:vmap0=# select Buffer(the_geom, 0) from bad_geom;
server closed the connection unexpectedly

The last line in the postgres serverlog before it went down was:

[local] SELECT: ../../source/headers/geos/noding/SegmentString.h:175: 
void geos::noding::SegmentString::testInvariant() const: Assertion 
`pts->size() > 1' failed.

The gdb backtrace:

#0  0x00002ae52f25107b in raise () from /lib/libc.so.6
#1  0x00002ae52f25284e in abort () from /lib/libc.so.6
#2  0x00002ae52f24aaf4 in __assert_fail () from /lib/libc.so.6
#3  0x00002ae531b18bcb in 
geos::noding::SegmentString::notifyCoordinatesChange (this=0x13b30a0)
    at ../../source/headers/geos/noding/SegmentString.h:175
#4  0x00002ae531b197d6 in geos::noding::ScaledNoder::scale (this=<value 
optimized out>, segStrings=<value optimized out>)
    at ScaledNoder.cpp:160
#5  0x00002ae531b198bf in geos::noding::ScaledNoder::computeNodes 
(this=0x7fff7bd57940, inputSegStr=0x7fff7bd57710)
    at ScaledNoder.cpp:205
#6  0x00002ae531b1f783 in 
geos::operation::buffer::BufferBuilder::computeNodedEdges 
(this=0x7fff7bd578d0,
    bufferSegStrList=@0x7fff7bd57710, precisionModel=<value optimized 
out>) at BufferBuilder.cpp:258
#7  0x00002ae531b1fa3e in geos::operation::buffer::BufferBuilder::buffer 
(this=0x7fff7bd578d0, g=0x976170, distance=0)
    at BufferBuilder.cpp:146
#8  0x00002ae531b21e6a in 
geos::operation::buffer::BufferOp::bufferFixedPrecision 
(this=0x7fff7bd57ab0,
    fixedPM=@0x7fff7bd57a30) at BufferOp.cpp:232
#9  0x00002ae531b21fe4 in 
geos::operation::buffer::BufferOp::bufferReducedPrecision 
(this=0x7fff7bd57ab0,
    precisionDigits=<value optimized out>) at BufferOp.cpp:196
#10 0x00002ae531b2203c in 
geos::operation::buffer::BufferOp::bufferReducedPrecision 
(this=0x7fff7bd57ab0) at BufferOp.cpp:145
#11 0x00002ae531b2243e in 
geos::operation::buffer::BufferOp::getResultGeometry (this=0x7b4a, 
nDistance=44494)
    at BufferOp.cpp:96
#12 0x00002ae531b2259b in geos::operation::buffer::BufferOp::bufferOp 
(g=<value optimized out>, distance=0,
    quadrantSegments=8, nEndCapStyle=0) at BufferOp.cpp:88
#13 0x00002ae531802f8a in GEOSBuffer (g1=0x7b4a, width=44494, 
quadrantsegments=31562) at geos_c.cpp:843
#14 0x00002ae5316bfa77 in buffer (fcinfo=0x7fff7bd57bf0) at 
lwgeom_geos_c.c:776
#15 0x00000000004fdf2d in ExecMakeFunctionResult ()

it looks like pts->size() was 1:

(gdb) print pts->getSize()
$2 = 1

If I run the query with GEOS compiled with NDEBUG, I get:

[local]:vmap0=# select Buffer(the_geom, 0) from bad_geom;
NOTICE:  IllegalArgumentException: Cannot compute the quadrant for two 
identical points -67528 44494
ERROR:  GEOS buffer() threw an error!

This occurs with both svn rev 2029 and 3.0.0r4 (with PostGIS 1.3.1 and 
PG 8.2.5).

A copy of the shapefile of the geometry that broke is at 
http://66.234.145.9/~jleslie/bad_geom.tgz .  FWIW, the invalid geometry 
in question is for the '046HH' boundary in tiger/line's 2004 zcta layer.

BTW, are there any other recommended ways of "fixing" this type of 
invalid geometry besides Buffer()?

Thanks,

John


From benjamin.chartier at cegetel.net  Fri Oct 26 08:13:02 2007
From: benjamin.chartier at cegetel.net (Benjamin Chartier)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] GEOS C API - WKB and WKT deprecated functions
Message-ID: <4721D9CE.503@cegetel.net>

Hi all,
I work on the Shapely project 
(http://trac.gispython.org/projects/PCL/wiki/Shapely). I have to make it 
support GEOS 3 on Windows.
I've seen that some functions of the GEOS 3.0 C API are deprecated (see 
http://geos.refractions.net/ro/doxygen_docs/html/geos__c_8h-source.html). 
This file suggests to use the "Reader and Writer APIs" instead of the 
old WKT and WKB functions. Unfortunately, the "Reader and Writer APIs" 
functions don't seem to be present in the GEOS release I use (which 
comes from the last Windows PostGIS installer - the version of GEOS CAPI 
I use is 3.0.0rc4-CAPI-1.3.3.): I looked at the exported functions by 
the libgeos_c-1.dll with a program called DLL Export Viewer and none of 
the "Reader and Writer APIs" functions were present.
My questions:
- do you have any idea why I can't use the "Reader and Writer APIs" 
functions with the GEOS C API?
- do you have any idea when the functions tagged as deprecated will be 
removed?
Thanks,

Benjamin Chartier

From jbronn at gmail.com  Fri Oct 26 09:52:33 2007
From: jbronn at gmail.com (Justin Bronn)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] GEOS C API - WKB and WKT deprecated functions
In-Reply-To: <4721D9CE.503@cegetel.net>
References: <4721D9CE.503@cegetel.net>
Message-ID: <4721F121.3040903@gmail.com>

Benjamin,
> - do you have any idea why I can't use the "Reader and Writer APIs" 
> functions with the GEOS C API?
Because the reader and writer APIs were only added recently -- 
specifically they were introduced in by Charlie Savage in r2027 on 
9/21/2007.  You should use the geos_c.h in the 3.0.0RC4 tarball as your 
reference.  To expose these APIs you would need to compile GEOS from SVN 
on Windows.

-Justin


From cfis at savagexi.com  Fri Oct 26 15:11:11 2007
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] GEOS C API - WKB and WKT deprecated functions
In-Reply-To: <4721D9CE.503@cegetel.net>
References: <4721D9CE.503@cegetel.net>
Message-ID: <47223BCF.8090501@savagexi.com>

> My questions:
> - do you have any idea why I can't use the "Reader and Writer APIs" 
> functions with the GEOS C API?

Yes - there are in SVN head now and will be part of the next upcoming 
GEOS release.

> - do you have any idea when the functions tagged as deprecated will be 
> removed?

Probably never.

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20071026/8c607175/smime.bin
From woklist at kyngchaos.com  Sun Oct 28 22:00:21 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] OSX 10.5 compile problem
Message-ID: <68274935-C319-4B23-8931-C3E9250538DF@kyngchaos.com>

When compiling on OSX 10.5, I get an error in HCoordinate.cpp:

HCoordinate.cpp: In member function 'long double  
geos::algorithm::HCoordinate::getX() const':
HCoordinate.cpp:197: error: 'finite' was not declared in this scope

If I use the 10.4u SDK it compiles (as it does in OSX 10.4).   
Something must have changed in <cmath>, but it's beyond me.


PS.  Is there something wrong with the bug tracker?  I registered with  
the postgis/geos tracker a year ago and haven't tried logging in until  
now.  It tells me the login is incorrect, even when I ask it to send  
my password.  I don't see any way to register.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect



From benjamin.chartier at cegetel.net  Mon Oct 29 04:04:11 2007
From: benjamin.chartier at cegetel.net (Benjamin Chartier)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] GEOS C API - WKB and WKT deprecated functions
In-Reply-To: <47223BCF.8090501@savagexi.com>
References: <4721D9CE.503@cegetel.net> <47223BCF.8090501@savagexi.com>
Message-ID: <472593FB.9050802@cegetel.net>

Justin and Charlie, many thanks for your answers.
By the way, is there a ggod reason why the Reader and Writer API should 
be used in stead of the deprecated functions? Is there any performance 
issue?

Benjamin


Charlie Savage a ?crit :
>> My questions:
>> - do you have any idea why I can't use the "Reader and Writer APIs" 
>> functions with the GEOS C API?
>
> Yes - there are in SVN head now and will be part of the next upcoming 
> GEOS release.
>
>> - do you have any idea when the functions tagged as deprecated will 
>> be removed?
>
> Probably never.
>
> Charlie

From robert.coup at onetrackmind.co.nz  Tue Oct 30 04:26:59 2007
From: robert.coup at onetrackmind.co.nz (Robert Coup)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] GEOS C API - WKB and WKT deprecated functions
In-Reply-To: <472593FB.9050802@cegetel.net>
References: <4721D9CE.503@cegetel.net> <47223BCF.8090501@savagexi.com>
	<472593FB.9050802@cegetel.net>
Message-ID: <c5097ac40710300126q3fcd00b8jb0adde08a3e6fe53@mail.gmail.com>

On 29/10/2007, Benjamin Chartier <benjamin.chartier@cegetel.net> wrote:
>
> Justin and Charlie, many thanks for your answers.
> By the way, is there a ggod reason why the Reader and Writer API should
> be used in stead of the deprecated functions? Is there any performance
> issue?


You can do things like write EWKT/EWKB which aren't possible using the old C
API.

For a start :)

Rob.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20071030/455cfd09/attachment.html
From cfis at savagexi.com  Tue Oct 30 19:19:23 2007
From: cfis at savagexi.com (Charlie Savage)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] GEOS C API - WKB and WKT deprecated functions
In-Reply-To: <c5097ac40710300126q3fcd00b8jb0adde08a3e6fe53@mail.gmail.com>
References: <4721D9CE.503@cegetel.net>
	<47223BCF.8090501@savagexi.com>	<472593FB.9050802@cegetel.net>
	<c5097ac40710300126q3fcd00b8jb0adde08a3e6fe53@mail.gmail.com>
Message-ID: <4727BBFB.9090005@savagexi.com>

> On 29/10/2007, *Benjamin Chartier* <benjamin.chartier@cegetel.net 
> <mailto:benjamin.chartier@cegetel.net>> wrote:
> 
>     Justin and Charlie, many thanks for your answers.
>     By the way, is there a ggod reason why the Reader and Writer API should
>     be used in stead of the deprecated functions? Is there any performance
>     issue?
> 
> 
> You can do things like write EWKT/EWKB which aren't possible using the 
> old C API.

That's the most important thing.  But also:

* the old api used global static variables for storing the byte order 
and output dimensions.  So on the off hand chance you wanted to write 
out 2d and 3d outputs in 2 different threads you couldn't do it.

* the old api forced a creation of a new reader/writer each time you 
called it.  Probably not a big deal, but the new api let's you control 
that so you can reuse the same reader/writer.

Hope that helps,

Charlie


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3237 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/geos-devel/attachments/20071030/24afcd53/smime.bin
From benjamin.chartier at cegetel.net  Wed Oct 31 02:44:59 2007
From: benjamin.chartier at cegetel.net (Benjamin Chartier)
Date: Fri Nov  2 20:53:49 2007
Subject: [geos-devel] GEOS C API - WKB and WKT deprecated functions
In-Reply-To: <4727BBFB.9090005@savagexi.com>
References: <4721D9CE.503@cegetel.net> <47223BCF.8090501@savagexi.com>
	<472593FB.9050802@cegetel.net>
	<c5097ac40710300126q3fcd00b8jb0adde08a3e6fe53@mail.gmail.com>
	<4727BBFB.9090005@savagexi.com>
Message-ID: <4728246B.1060007@cegetel.net>

Thank you Robert and Charlie for your responses.
This is much clearer for me now.

Benjamin


Charlie Savage a ?crit :
>> On 29/10/2007, *Benjamin Chartier* <benjamin.chartier@cegetel.net 
>> <mailto:benjamin.chartier@cegetel.net>> wrote:
>>
>>     Justin and Charlie, many thanks for your answers.
>>     By the way, is there a ggod reason why the Reader and Writer API 
>> should
>>     be used in stead of the deprecated functions? Is there any 
>> performance
>>     issue?
>>
>>
>> You can do things like write EWKT/EWKB which aren't possible using 
>> the old C API.
>
> That's the most important thing.  But also:
>
> * the old api used global static variables for storing the byte order 
> and output dimensions.  So on the off hand chance you wanted to write 
> out 2d and 3d outputs in 2 different threads you couldn't do it.
>
> * the old api forced a creation of a new reader/writer each time you 
> called it.  Probably not a big deal, but the new api let's you control 
> that so you can reuse the same reader/writer.
>
> Hope that helps,
>
> Charlie

