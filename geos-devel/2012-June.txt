From gdt at ir.bbn.com  Fri Jun  1 15:42:33 2012
From: gdt at ir.bbn.com (Greg Troxel)
Date: Fri, 01 Jun 2012 18:42:33 -0400
Subject: [geos-devel] 3.3.4 Released
In-Reply-To: <CACowWR0mGO5o5K9=vhuVbpEb2OwfBPfE=BgVDts_kEt0oCbm+w@mail.gmail.com>
	(Paul Ramsey's message of "Thu, 31 May 2012 12:20:53 -0700")
References: <CACowWR0mGO5o5K9=vhuVbpEb2OwfBPfE=BgVDts_kEt0oCbm+w@mail.gmail.com>
Message-ID: <rmi4nqu1wo6.fsf@fnord.ir.bbn.com>


Paul Ramsey <pramsey at opengeo.org> writes:

> http://download.osgeo.org/geos/geos-3.3.4.tar.bz2
>
> Changes in 3.3.4
> 2012-05-31

Missing from NEWS is that the shlib version changed in such a way that
programs linked against geos are broken by the update.  I updated pkgsrc
From 3.3.2 to 3.3.4 (there's no good reason the 3.3.3 update wasn't
done; I just never got to it), and rebuilt geos.  Then:

  $ gdal_translate 
  Shared object "libgeos-3.3.2.so" not found

This is unexpected, since the shlib version generally should not change
unless an interface was changed or withdrawn.  (That shouldn't happen in
a minor version and wasn't noted in NEWS - I don't think it actually did
change.)

I'm not sure what's going on; it seems geos puts the version in the
shlib name, and my impression is that best practices for shlib naming is
not to do that.  The libgeos_c library appears not to have this problem,
changing from (3.3.2 to 3.3.4):

  libgeos_c.so.1.7.2  (3.3.2)

to

  libgeos_c.so.1.7.3

with the libgeos_c.so.1 symlink repointed, so gdal_foo actually finds
that new shlib just fine.

This is being worked around in pkgsrc by marking everything that depends
on geos as unsuitable for working with 3.3.2, but it seems this issue
would affect any package system that allows replacing a package without
rebuiding or replacing anything that depends on it.

Basically, I think I'm saying "why is there -release in libgeos.la", per
  7.3 Updating library version information, and
  7.4 Managing release information
in the libtool info file.  I don't understand why intentionally breaking
binary compatibility is desired.

Sorry if I ranted about this 2 years ago and forgot the answer.

    Thanks,
    Greg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120601/662db6d8/attachment.pgp>

From strk at keybit.net  Mon Jun  4 03:02:20 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 4 Jun 2012 12:02:20 +0200
Subject: [geos-devel] 3.3.4 Released
In-Reply-To: <rmi4nqu1wo6.fsf@fnord.ir.bbn.com>
References: <CACowWR0mGO5o5K9=vhuVbpEb2OwfBPfE=BgVDts_kEt0oCbm+w@mail.gmail.com>
	<rmi4nqu1wo6.fsf@fnord.ir.bbn.com>
Message-ID: <20120604100220.GF28097@gnash>

On Fri, Jun 01, 2012 at 06:42:33PM -0400, Greg Troxel wrote:
> 
> Paul Ramsey <pramsey at opengeo.org> writes:
> 
> > http://download.osgeo.org/geos/geos-3.3.4.tar.bz2
> >
> > Changes in 3.3.4
> > 2012-05-31
> 
> Missing from NEWS is that the shlib version changed in such a way that
> programs linked against geos are broken by the update. 

This is no news.
C library clients are fine. C++ library clients are warned.

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'


From emree at mobiliz.com.tr  Mon Jun  4 09:31:38 2012
From: emree at mobiliz.com.tr (Emre Ersin)
Date: Mon, 4 Jun 2012 19:31:38 +0300
Subject: [geos-devel] compile on aix
Message-ID: <E3BF513AF070D741AE92D4780D6813A303BBE87E@www.mobiliz.com.tr>

Hello,

 

I am trying to compile GEOS 3.3.4 (I have also tried older versions) on
AIX 7.1 platform. I do not have any admin rights on that server so I
have to make all setup things in usermode by defining LIBPATH (other
than opt/freeware) and PATHs.  

 

During make  something gives segmentaion fault; 

 

./configure --prefix=/home/users/emre --disable-inline

...

make

...

libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I../../../include
-I../../../include/geos -I../../../include -pedantic -Wall -ansi
-Wno-long-long -ffloat-store -g -O2 -MT IndexedPointInAreaLocator.lo -MD
-MP -MF .deps/IndexedPointInAreaLocator.Tpo -c
IndexedPointInAreaLocator.cpp  -DPIC -o
.libs/IndexedPointInAreaLocator.o

g++: internal compiler error: Segmentation fault (program as)

 

(It says assembly command "as" gives the fault but I am not sure) 

 

geos-3.3.4:>as -version

as V7.1

 

geos-3.3.4:>g++ -v

Using built-in specs.

COLLECT_GCC=g++

COLLECT_LTO_WRAPPER=/home/users/emre/bin/../libexec/gcc/powerpc-ibm-aix7
.1.0.0/4.6.3/lto-wrapper

Target: powerpc-ibm-aix7.1.0.0

Configured with: ../gcc-4.6.3/configure --with-as=/usr/bin/as
--with-ld=/usr/bin/ld --enable-languages=c,c++,fortran
--prefix=/opt/freeware --mandir=/opt/freeware/man
--infodir=/opt/freeware/info --enable-threads
--enable-version-specific-runtime-libs --disable-nls
--enable-decimal-float=dpd --host=powerpc-ibm-aix7.1.0.0

Thread model: aix

gcc version 4.6.3 (GCC)

 

Does anyone have any clue? 

 

By the way; Postgresql 9.0.3 has been compiled successfully by using
this configuration. And it is working now.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120604/33dc90a7/attachment.html>

From gdt at ir.bbn.com  Mon Jun  4 13:06:20 2012
From: gdt at ir.bbn.com (Greg Troxel)
Date: Mon, 04 Jun 2012 16:06:20 -0400
Subject: [geos-devel] 3.3.4 Released
In-Reply-To: <20120604100220.GF28097@gnash> (Sandro Santilli's message of
	"Mon, 4 Jun 2012 12:02:20 +0200")
References: <CACowWR0mGO5o5K9=vhuVbpEb2OwfBPfE=BgVDts_kEt0oCbm+w@mail.gmail.com>
	<rmi4nqu1wo6.fsf@fnord.ir.bbn.com> <20120604100220.GF28097@gnash>
Message-ID: <rmi1ulukfk3.fsf@fnord.ir.bbn.com>


Sandro Santilli <strk at keybit.net> writes:

> On Fri, Jun 01, 2012 at 06:42:33PM -0400, Greg Troxel wrote:
>> 
>> Paul Ramsey <pramsey at opengeo.org> writes:
>> 
>> > http://download.osgeo.org/geos/geos-3.3.4.tar.bz2
>> >
>> > Changes in 3.3.4
>> > 2012-05-31
>> 
>> Missing from NEWS is that the shlib version changed in such a way that
>> programs linked against geos are broken by the update. 
>
> This is no news.
> C library clients are fine. C++ library clients are warned.

Do you mean the "using the C++ library is discouraged" in the docs?
That seems to be a hint that it's better to use the C API, not a warning
that the shlib name is unstable.

Is there a technical reason why it's good to change the library name
every release?  I can see fear about C++ APIs being unstable, but that
means one needs to rebuild when the compiler changes, which is different
From going from 3.3.3 to 3.3.4.

Is this part of a plan to make it difficult to use the C++ library?  If
so, I would say that it's not working, because it makes life difficult
for packagers rather than making it difficult for people who release
code that uses the C++ library (postgis and gdal both seem to do that,
or at least they are linked that way on my system - perhaps that's a
configure/packaging bug?).


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120604/20f0f37a/attachment.pgp>

From strk at keybit.net  Tue Jun  5 01:25:09 2012
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 5 Jun 2012 10:25:09 +0200
Subject: [geos-devel] 3.3.4 Released
In-Reply-To: <rmi1ulukfk3.fsf@fnord.ir.bbn.com>
References: <CACowWR0mGO5o5K9=vhuVbpEb2OwfBPfE=BgVDts_kEt0oCbm+w@mail.gmail.com>
	<rmi4nqu1wo6.fsf@fnord.ir.bbn.com> <20120604100220.GF28097@gnash>
	<rmi1ulukfk3.fsf@fnord.ir.bbn.com>
Message-ID: <20120605082509.GA23578@gnash>

On Mon, Jun 04, 2012 at 04:06:20PM -0400, Greg Troxel wrote:
> Sandro Santilli <strk at keybit.net> writes:
>
> > C library clients are fine. C++ library clients are warned.
> 
> Do you mean the "using the C++ library is discouraged" in the docs?

Yes.

> That seems to be a hint that it's better to use the C API, not a warning
> that the shlib name is unstable.

The warning could indeed be extended to mention that.
Feel like filing a ticket ? Best if with a patch.

> Is there a technical reason why it's good to change the library name
> every release?  I can see fear about C++ APIs being unstable, but that
> means one needs to rebuild when the compiler changes, which is different
> From going from 3.3.3 to 3.3.4.

It's also ABI being unstable. The technical reason is it being too hard
to maintain a stable C++ ABI. See how much it takes for you to tell us
if there have been an ABI change between 3.3.3 and 3.3.4. I can't tell.

If there's an easy tool to do that I could reconsider, but it would still
mean maintaining another set of versions, reaching 3 (one for release, one
for C lib, one for C++ lib).

> Is this part of a plan to make it difficult to use the C++ library?  If
> so, I would say that it's not working, because it makes life difficult
> for packagers rather than making it difficult for people who release
> code that uses the C++ library (postgis and gdal both seem to do that,
> or at least they are linked that way on my system - perhaps that's a
> configure/packaging bug?).

That's a packaging bug. Both PostGIS and GDAL only use the C-API, so they
should not be packaged as being dependent on the C++ one. So all clients
should depend on libgeos_c, and _only_ libgeos_c should depend on
libgeos-XYZ.

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'


From strk at keybit.net  Tue Jun  5 01:27:41 2012
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 5 Jun 2012 10:27:41 +0200
Subject: [geos-devel] compile on aix
In-Reply-To: <E3BF513AF070D741AE92D4780D6813A303BBE87E@www.mobiliz.com.tr>
References: <E3BF513AF070D741AE92D4780D6813A303BBE87E@www.mobiliz.com.tr>
Message-ID: <20120605082741.GB23578@gnash>

On Mon, Jun 04, 2012 at 07:31:38PM +0300, Emre Ersin wrote:

> g++: internal compiler error: Segmentation fault (program as)
...
> (It says assembly command "as" gives the fault but I am not sure) 

Yes, it does say that.

> Does anyone have any clue? 

Send a bug report to the GCC team.

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'


From gdt at ir.bbn.com  Tue Jun  5 07:56:33 2012
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue, 05 Jun 2012 10:56:33 -0400
Subject: [geos-devel] 3.3.4 Released
References: <CACowWR0mGO5o5K9=vhuVbpEb2OwfBPfE=BgVDts_kEt0oCbm+w@mail.gmail.com>
	<rmi4nqu1wo6.fsf@fnord.ir.bbn.com> <20120604100220.GF28097@gnash>
	<rmi1ulukfk3.fsf@fnord.ir.bbn.com> <20120605082509.GA23578@gnash>
Message-ID: <rmiaa0hn6xq.fsf@fnord.ir.bbn.com>


Sandro Santilli <strk at keybit.net> writes:

> On Mon, Jun 04, 2012 at 04:06:20PM -0400, Greg Troxel wrote:

OK, understood about ABI being unstable, and will try to send a patch.
It sounds like then that geos considers any direct use or linking of the
C++ library to be a bug on the part of the using package.

>> Is this part of a plan to make it difficult to use the C++ library?  If
>> so, I would say that it's not working, because it makes life difficult
>> for packagers rather than making it difficult for people who release
>> code that uses the C++ library (postgis and gdal both seem to do that,
>> or at least they are linked that way on my system - perhaps that's a
>> configure/packaging bug?).
>
> That's a packaging bug. Both PostGIS and GDAL only use the C-API, so they
> should not be packaged as being dependent on the C++ one. So all clients
> should depend on libgeos_c, and _only_ libgeos_c should depend on
> libgeos-XYZ.

Sorry, I was fooled by ldd's recursive listing (which is sort of right)
which for reasons I don't understand doesn't indent libraries required
by other libraries.  objdump -x shows that indeed postgis (1.5) depends
on geos_c only:

  Dynamic Section:
    NEEDED      libgeos_c.so.1
    NEEDED      libproj.so.0
    NEEDED      libxml2.so.2
    NEEDED      libz.so.1
    NEEDED      libm.so.0
    NEEDED      libc.so.12

But libgdal (1.9.1) has a NEEDED line for libgeos-3.3.4:

  Dynamic Section:
    NEEDED      libgeos_c.so.1
    NEEDED      libgeos-3.3.4.so
    NEEDED      libxerces-c-3.1.so
    NEEDED      libjasper.so.1
    NEEDED      libnetcdf.so.7
    ....

If anyone can run objdump -x on libgdal on some other system and tell me
if libgeos appears, I'd appreciate it.  During the build (under pkgsrc)
I see an explicit libgeos on the link line, but I haven't yet been able
to untangle the make variables to figure out why.  I read the packaging
control files for gdal-lib and I don't see anything that tries to mess
with how it finds geos, so my first guess is that whatever is happening
isn't a pkgsrc issue, but it's really hard to tell.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120605/e72f3ede/attachment.pgp>

From strk at keybit.net  Tue Jun  5 08:33:26 2012
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 5 Jun 2012 17:33:26 +0200
Subject: [geos-devel] 3.3.4 Released
In-Reply-To: <rmiaa0hn6xq.fsf@fnord.ir.bbn.com>
References: <CACowWR0mGO5o5K9=vhuVbpEb2OwfBPfE=BgVDts_kEt0oCbm+w@mail.gmail.com>
	<rmi4nqu1wo6.fsf@fnord.ir.bbn.com> <20120604100220.GF28097@gnash>
	<rmi1ulukfk3.fsf@fnord.ir.bbn.com> <20120605082509.GA23578@gnash>
	<rmiaa0hn6xq.fsf@fnord.ir.bbn.com>
Message-ID: <20120605153326.GA6567@gnash>

On Tue, Jun 05, 2012 at 10:56:33AM -0400, Greg Troxel wrote:
> 
> Sandro Santilli <strk at keybit.net> writes:
> 
> > On Mon, Jun 04, 2012 at 04:06:20PM -0400, Greg Troxel wrote:
> 
> OK, understood about ABI being unstable, and will try to send a patch.
> It sounds like then that geos considers any direct use or linking of the
> C++ library to be a bug on the part of the using package.
> 
> >> Is this part of a plan to make it difficult to use the C++ library?  If
> >> so, I would say that it's not working, because it makes life difficult
> >> for packagers rather than making it difficult for people who release
> >> code that uses the C++ library (postgis and gdal both seem to do that,
> >> or at least they are linked that way on my system - perhaps that's a
> >> configure/packaging bug?).
> >
> > That's a packaging bug. Both PostGIS and GDAL only use the C-API, so they
> > should not be packaged as being dependent on the C++ one. So all clients
> > should depend on libgeos_c, and _only_ libgeos_c should depend on
> > libgeos-XYZ.
> 
> Sorry, I was fooled by ldd's recursive listing (which is sort of right)
> which for reasons I don't understand doesn't indent libraries required
> by other libraries.  objdump -x shows that indeed postgis (1.5) depends
> on geos_c only:
> 
>   Dynamic Section:
>     NEEDED      libgeos_c.so.1
>     NEEDED      libproj.so.0
>     NEEDED      libxml2.so.2
>     NEEDED      libz.so.1
>     NEEDED      libm.so.0
>     NEEDED      libc.so.12
> 
> But libgdal (1.9.1) has a NEEDED line for libgeos-3.3.4:
> 
>   Dynamic Section:
>     NEEDED      libgeos_c.so.1
>     NEEDED      libgeos-3.3.4.so
>     NEEDED      libxerces-c-3.1.so
>     NEEDED      libjasper.so.1
>     NEEDED      libnetcdf.so.7
>     ....

I guess it is a bug in the GDAL build scripts.

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'


From geos-trac at osgeo.org  Tue Jun  5 13:37:41 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 05 Jun 2012 20:37:41 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.36fc20e8cf1c9be37ace4e2f7cf52769@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by blc56):

 I've attached a patch which implements enough of Delaunay Triangulation to
 get a functioning DelaunayTriangulationBuilder class. It includes the
 DelaunayTest testcase. The patch is also available in my libgeos fork on
 github: https://github.com/blc56/libgeos

 Comments and criticism are welcome.
 Thanks!

 Ben

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Tue Jun  5 13:39:31 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 05 Jun 2012 20:39:31 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.06293541f85a5620b88da7dd62b79597@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
Changes (by blc56):

 * cc: blc56 (added)


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Tue Jun  5 14:06:18 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 05 Jun 2012 21:06:18 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.c186ba3124332fbc3c1cb258e4ac87c3@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by strk):

 A couple of things I noticed:
  1. You assigned the copyright to Refractions Research in 2006
  2. The "Last port" line should contain the SVN revision id of the JTS
 file you ported

 didn't look at the actual code yet (will do as soon as I find a few hours)

 Thanks for contributing, btw :)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From gdt at ir.bbn.com  Tue Jun  5 16:21:09 2012
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue, 05 Jun 2012 19:21:09 -0400
Subject: [geos-devel] 3.3.4 Released
In-Reply-To: <20120605082509.GA23578@gnash> (Sandro Santilli's message of
	"Tue, 5 Jun 2012 10:25:09 +0200")
References: <CACowWR0mGO5o5K9=vhuVbpEb2OwfBPfE=BgVDts_kEt0oCbm+w@mail.gmail.com>
	<rmi4nqu1wo6.fsf@fnord.ir.bbn.com> <20120604100220.GF28097@gnash>
	<rmi1ulukfk3.fsf@fnord.ir.bbn.com> <20120605082509.GA23578@gnash>
Message-ID: <rmi62b5wdju.fsf@fnord.ir.bbn.com>


Sandro Santilli <strk at keybit.net> writes:

> On Mon, Jun 04, 2012 at 04:06:20PM -0400, Greg Troxel wrote:
>> Sandro Santilli <strk at keybit.net> writes:
>>
>> That seems to be a hint that it's better to use the C API, not a warning
>> that the shlib name is unstable.
>
> The warning could indeed be extended to mention that.
> Feel like filing a ticket ? Best if with a patch.

http://trac.osgeo.org/geos/ticket/553
(with patch)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120605/e11df9bb/attachment.pgp>

From geos-trac at osgeo.org  Tue Jun  5 17:29:46 2012
From: geos-trac at osgeo.org (GEOS)
Date: Wed, 06 Jun 2012 00:29:46 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.40832d21af75637e0ce5375abc3727fc@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
Changes (by woodbri):

 * cc: woodbri (added)


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:7>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From emree at mobiliz.com.tr  Tue Jun  5 23:32:59 2012
From: emree at mobiliz.com.tr (Emre Ersin)
Date: Wed, 6 Jun 2012 09:32:59 +0300
Subject: [geos-devel] compile on aix
In-Reply-To: <20120605082741.GB23578@gnash>
References: <E3BF513AF070D741AE92D4780D6813A303BBE87E@www.mobiliz.com.tr>
	<20120605082741.GB23578@gnash>
Message-ID: <E3BF513AF070D741AE92D4780D6813A303BBEA3C@www.mobiliz.com.tr>

Ok. I solved it. 

It was because of AIX's assembler command. We made a request to rename
temporarily /usr/bin/as into as_orig and it is solved (solution came
from nmap's documentation).

Now I have a memory exhaustion problem while linking libgeos.a (binutils
ar)


-----Original Message-----
From: geos-devel-bounces at lists.osgeo.org
[mailto:geos-devel-bounces at lists.osgeo.org] On Behalf Of Sandro Santilli
Sent: Tuesday, June 05, 2012 11:28 AM
To: GEOS Development List
Subject: Re: [geos-devel] compile on aix

On Mon, Jun 04, 2012 at 07:31:38PM +0300, Emre Ersin wrote:

> g++: internal compiler error: Segmentation fault (program as)
...
> (It says assembly command "as" gives the fault but I am not sure) 

Yes, it does say that.

> Does anyone have any clue? 

Send a bug report to the GCC team.

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'

_______________________________________________
geos-devel mailing list
geos-devel at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/geos-devel

From geos-trac at osgeo.org  Wed Jun  6 03:45:28 2012
From: geos-trac at osgeo.org (GEOS)
Date: Wed, 06 Jun 2012 10:45:28 -0000
Subject: [geos-devel] [GEOS] #554: Artifacts and limitations of
	bufferLineSingleSided
Message-ID: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>

#554: Artifacts and limitations of bufferLineSingleSided
------------------------+---------------------------------------------------
 Reporter:  ylan        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Recently I implemented an algorithm that involves single-sided buffering
 of LineStrings and LinearRings. With testing I have encountered some
 limitations of the current implementation of the bufferLineSingleSided()
 function.

 1) It does not accept LinearRings nor does it detect closeness of
 LineStrings. This may result in missing line segments in the buffered
 output, since it does not buffer the bit between the end and start point
 of the LineString. The advantage over buffering the LineString as a
 polygon (which sometimes gives the right result) is that this method can
 also give you an 'interior' buffer

 [[Image(http://share.ylan.nl/GEOS_bufferLineSingleSided.png)]]

 2) Certain concavities in the LineString may create unwanted disconnected
 LineStrings in the buffer output. To illustrate this see the screenshot
 above (where green is the input and red is the single-sided buffer with a
 radius of 3). The artifacts appear in the top right.

 A hex-encoded WKB of the corresponding input LineString is attached.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/554>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From dburken at comcast.net  Wed Jun  6 04:27:14 2012
From: dburken at comcast.net (David Burken)
Date: Wed, 06 Jun 2012 07:27:14 -0400
Subject: [geos-devel] build error...
Message-ID: <4FCF3E92.4030108@comcast.net>

Hi,

Get this error now from svn checkout / cmake build on both linux and Mac:

[ 83%] Building CXX object capi/CMakeFiles/geos_c.dir/geos_ts_c.cpp.o
/work/osgeo/geos/geos-svn/capi/geos_ts_c.cpp:96:34: fatal error: 
../geos_svn_revision.h: No such file or directory

I can fix by hacking geos_ts_c.cpp but is there a mechanism to generate 
geos_svn_revision.h that I'm missing?

Thanks in advance,
Dave


From strk at keybit.net  Wed Jun  6 04:53:33 2012
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 6 Jun 2012 13:53:33 +0200
Subject: [geos-devel] build error...
In-Reply-To: <4FCF3E92.4030108@comcast.net>
References: <4FCF3E92.4030108@comcast.net>
Message-ID: <20120606115333.GL15950@gnash>

On Wed, Jun 06, 2012 at 07:27:14AM -0400, David Burken wrote:
> Hi,
> 
> Get this error now from svn checkout / cmake build on both linux and Mac:
> 
> [ 83%] Building CXX object capi/CMakeFiles/geos_c.dir/geos_ts_c.cpp.o
> /work/osgeo/geos/geos-svn/capi/geos_ts_c.cpp:96:34: fatal error:
> ../geos_svn_revision.h: No such file or directory
> 
> I can fix by hacking geos_ts_c.cpp but is there a mechanism to
> generate geos_svn_revision.h that I'm missing?

sh tools/svn_repo_revision.sh geos_svn_revision.h

It is encoded in Makefiles, not in CMake (ticket [and patch] welcome)

--strk; 

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'


From dburken at comcast.net  Wed Jun  6 05:52:34 2012
From: dburken at comcast.net (David Burken)
Date: Wed, 06 Jun 2012 08:52:34 -0400
Subject: [geos-devel] build error...
In-Reply-To: <20120606115333.GL15950@gnash>
References: <4FCF3E92.4030108@comcast.net> <20120606115333.GL15950@gnash>
Message-ID: <4FCF5292.9020109@comcast.net>

Thanks Sandro!

After fixing that there's one more (Fedora 17 gcc version 4.7.0 )

CMakeFiles/geos_unit.dir/capi/GEOSConvexHullTest.cpp.o:(.bss+0x0): 
multiple definition of `tut::test_capigeoscontains_group'
CMakeFiles/geos_unit.dir/capi/GEOSContainsTest.cpp.o:(.bss+0x0): first 
defined here

Commenting one out fixes...

Here's a cmake macro you could use.  You can see this example at:
http://www.cmake.org/cmake/help/v2.8.8/cmake.html

This will initialize ${Project_WC_REVISION}:

#################################################################################
#  MACRO: GET_SVN_REVISION
#
#  DESCRIPTION:
#      MACRO FOR GETTING THE SVN revision for this build
#################################################################################
MACRO (GET_SVN_REVISION)
    FIND_PACKAGE(Subversion)
    IF(SUBVERSION_FOUND)
       Subversion_WC_INFO(${PROJECT_SOURCE_DIR} Project)
       MESSAGE("Current revision is ${Project_WC_REVISION}")
       Subversion_WC_LOG(${PROJECT_SOURCE_DIR} Project)
       MESSAGE("Last changed log is ${Project_LAST_CHANGED_LOG}")
    ENDIF()
ENDMACRO(GET_SVN_REVISION)

So if you call it in your CMakeList.txt:

GET_SVN_REVISION()

You'll have ${Project_WC_REVISION} set.  Tested in ossim code and get:

Current revision is 21080

Hope that helps some,
Dave


On 06/06/2012 07:53 AM, Sandro Santilli wrote:
> On Wed, Jun 06, 2012 at 07:27:14AM -0400, David Burken wrote:
>> Hi,
>>
>> Get this error now from svn checkout / cmake build on both linux and Mac:
>>
>> [ 83%] Building CXX object capi/CMakeFiles/geos_c.dir/geos_ts_c.cpp.o
>> /work/osgeo/geos/geos-svn/capi/geos_ts_c.cpp:96:34: fatal error:
>> ../geos_svn_revision.h: No such file or directory
>>
>> I can fix by hacking geos_ts_c.cpp but is there a mechanism to
>> generate geos_svn_revision.h that I'm missing?
> sh tools/svn_repo_revision.sh geos_svn_revision.h
>
> It is encoded in Makefiles, not in CMake (ticket [and patch] welcome)
>
> --strk;
>
>    ,------o-.
>    |   __/  |    Delivering high quality PostGIS 2.0 !
>    |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
>    `-o------'
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>

From strk at keybit.net  Wed Jun  6 06:17:24 2012
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 6 Jun 2012 15:17:24 +0200
Subject: [geos-devel] build error...
In-Reply-To: <4FCF5292.9020109@comcast.net>
References: <4FCF3E92.4030108@comcast.net> <20120606115333.GL15950@gnash>
	<4FCF5292.9020109@comcast.net>
Message-ID: <20120606131724.GM15950@gnash>

On Wed, Jun 06, 2012 at 08:52:34AM -0400, David Burken wrote:
> Thanks Sandro!
> 
> After fixing that there's one more (Fedora 17 gcc version 4.7.0 )
> 
> CMakeFiles/geos_unit.dir/capi/GEOSConvexHullTest.cpp.o:(.bss+0x0):
> multiple definition of `tut::test_capigeoscontains_group'
> CMakeFiles/geos_unit.dir/capi/GEOSContainsTest.cpp.o:(.bss+0x0):
> first defined here
> 
> Commenting one out fixes...

Could you please file a ticket for this ?

> Here's a cmake macro you could use.  You can see this example at:
> http://www.cmake.org/cmake/help/v2.8.8/cmake.html

What's wrong with using tools/svn_repo_revision.sh ?
I build from git so the cmake way won't work.
On the other hand, I don't build with cmake so this is a non-issue.

In any case a ticket for this would be useful.

--strk;

  ,------o-. 
  |   __/  |    Delivering high quality PostGIS 2.0 !
  |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
  `-o------'


From geos-trac at osgeo.org  Wed Jun  6 06:33:27 2012
From: geos-trac at osgeo.org (GEOS)
Date: Wed, 06 Jun 2012 13:33:27 -0000
Subject: [geos-devel] [GEOS] #555: Build error multiple definition of
 `tut::test_capigeoscontains_group'
Message-ID: <047.1f70699cc6ff6d725b4d40c4e157c10b@osgeo.org>

#555: Build error multiple definition of `tut::test_capigeoscontains_group'
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:  build error               
------------------------+---------------------------------------------------
 On Fedora 17 gcc version 4.7.0 getting build error:

 {{{
 CMakeFiles/geos_unit.dir/capi/GEOSConvexHullTest.cpp.o:(.bss+0x0):
 multiple definition of `tut::test_capigeoscontains_group'
 CMakeFiles/geos_unit.dir/capi/GEOSContainsTest.cpp.o:(.bss+0x0):
 first defined here
 }}}

 Commenting out line 56 of tests/unit/capi/GEOSContainsTest.cpp fixes but
 I'm not sure of the imapact.

 {{{
  // group test_capigeoscontains_group("capi::GEOSContains");
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/555>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Wed Jun  6 06:43:27 2012
From: geos-trac at osgeo.org (GEOS)
Date: Wed, 06 Jun 2012 13:43:27 -0000
Subject: [geos-devel] [GEOS] #556: Build error using cmake:
 ../geos_svn_revision.h: No such file or directory
Message-ID: <047.88b4a695977ec20e43c2302f49cb7277@osgeo.org>

#556: Build error using cmake: ../geos_svn_revision.h: No such file or directory
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 The cmake build is not auto-generating geos_svn_revision.h so you get
 error:

 {{{
 [ 83%] Building CXX object capi/CMakeFiles/geos_c.dir/geos_ts_c.cpp.o
 /work/osgeo/geos/geos-svn/capi/geos_ts_c.cpp:96:34: fatal error:
 ../geos_svn_revision.h: No such file or directory
 }}}

 Potential fix would be to change CMakeLists.txt to call existing:
 {{{
 sh tools/svn_repo_revision.sh geos_svn_revision.h
 }}}

 Or use cmake macro to generate file. Example of pulling revision in cmake:
 {{{
 This will initialize ${Project_WC_REVISION}:

 #################################################################################
 #  MACRO: GET_SVN_REVISION
 #
 #  DESCRIPTION:
 #      MACRO FOR GETTING THE SVN revision for this build
 #################################################################################
 MACRO (GET_SVN_REVISION)
    FIND_PACKAGE(Subversion)
    IF(SUBVERSION_FOUND)
       Subversion_WC_INFO(${PROJECT_SOURCE_DIR} Project)
       MESSAGE("Current revision is ${Project_WC_REVISION}")
       Subversion_WC_LOG(${PROJECT_SOURCE_DIR} Project)
       MESSAGE("Last changed log is ${Project_LAST_CHANGED_LOG}")
    ENDIF()
 ENDMACRO(GET_SVN_REVISION)
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/556>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From dburken at comcast.net  Wed Jun  6 06:44:17 2012
From: dburken at comcast.net (David Burken)
Date: Wed, 06 Jun 2012 09:44:17 -0400
Subject: [geos-devel] build error...
In-Reply-To: <20120606131724.GM15950@gnash>
References: <4FCF3E92.4030108@comcast.net> <20120606115333.GL15950@gnash>
	<4FCF5292.9020109@comcast.net> <20120606131724.GM15950@gnash>
Message-ID: <4FCF5EB1.5070809@comcast.net>

On 06/06/2012 09:17 AM, Sandro Santilli wrote:
> On Wed, Jun 06, 2012 at 08:52:34AM -0400, David Burken wrote:
>> Thanks Sandro!
>>
>> After fixing that there's one more (Fedora 17 gcc version 4.7.0 )
>>
>> CMakeFiles/geos_unit.dir/capi/GEOSConvexHullTest.cpp.o:(.bss+0x0):
>> multiple definition of `tut::test_capigeoscontains_group'
>> CMakeFiles/geos_unit.dir/capi/GEOSContainsTest.cpp.o:(.bss+0x0):
>> first defined here
>>
>> Commenting one out fixes...
> Could you please file a ticket for this ?
http://trac.osgeo.org/geos/ticket/555
>
>> Here's a cmake macro you could use.  You can see this example at:
>> http://www.cmake.org/cmake/help/v2.8.8/cmake.html
> What's wrong with using tools/svn_repo_revision.sh ?
It's fine with me.  I did know there was a tool to generate.  I was just 
letting you know.
> I build from git so the cmake way won't work.
> On the other hand, I don't build with cmake so this is a non-issue.
>
> In any case a ticket for this would be useful.
http://trac.osgeo.org/geos/ticket/556

Thanks for the help...
Dave


>
> --strk;
>
>    ,------o-.
>    |   __/  |    Delivering high quality PostGIS 2.0 !
>    |  / 2.0 |    http://strk.keybit.net - http://vizzuality.com
>    `-o------'
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>

From geos-trac at osgeo.org  Mon Jun 11 02:08:23 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 11 Jun 2012 09:08:23 -0000
Subject: [geos-devel] [GEOS] #472: Can't compile under Windows mingw
In-Reply-To: <044.7204319141a6fdfd5a34c304981b32be@osgeo.org>
References: <044.7204319141a6fdfd5a34c304981b32be@osgeo.org>
Message-ID: <053.38528d2696241868877e665d0f5e2a2a@osgeo.org>

#472: Can't compile under Windows mingw
------------------------+---------------------------------------------------
 Reporter:  robe        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.4.0                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  duplicate                 
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => duplicate


Comment:

 I belive this is the same as #319

-- 
Ticket URL: <https://trac.osgeo.org/geos/ticket/472#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Mon Jun 11 02:18:20 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 11 Jun 2012 09:18:20 -0000
Subject: [geos-devel] [GEOS] #472: Can't compile under Windows mingw
In-Reply-To: <044.7204319141a6fdfd5a34c304981b32be@osgeo.org>
References: <044.7204319141a6fdfd5a34c304981b32be@osgeo.org>
Message-ID: <053.a94c9d648dd88a33e4af92d7e1afc962@osgeo.org>

#472: Can't compile under Windows mingw
------------------------+---------------------------------------------------
 Reporter:  robe        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.4.0                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  duplicate                 
 Keywords:              |  
------------------------+---------------------------------------------------

Comment(by strk):

 r3673 should fix this

-- 
Ticket URL: <https://trac.osgeo.org/geos/ticket/472#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From dburken at comcast.net  Thu Jun 14 13:30:25 2012
From: dburken at comcast.net (David Burken)
Date: Thu, 14 Jun 2012 16:30:25 -0400
Subject: [geos-devel] build error on Mac
In-Reply-To: <20120606131724.GM15950@gnash>
References: <4FCF3E92.4030108@comcast.net> <20120606115333.GL15950@gnash>
	<4FCF5292.9020109@comcast.net> <20120606131724.GM15950@gnash>
Message-ID: <4FDA49E1.1060801@comcast.net>

Hi,

Latest error in svn.  I'll do a ticket....

Darwin Kernel Version 11.4.0
gcc version 4.2.1

n file included from /work/osgeo/geos/geos-svn/capi/geos_c.cpp:48:
/work/osgeo/geos/geos-svn/capi/geos_c.h:1196:9: warning: struct 
'WKTReader' was previously declared as a class
       [-Wmismatched-tags]
typedef struct GEOSWKTReader_t GEOSWKTReader;
         ^
/work/osgeo/geos/geos-svn/include/geos/io/WKTReader.h:58:16: note: 
previous use is here
class GEOS_DLL WKTReader {
                ^
/work/osgeo/geos/geos-svn/capi/geos_c.h:1196:9: note: did you mean class 
here?
typedef struct GEOSWKTReader_t GEOSWKTReader;
         ^~~~~~
         class
/work/osgeo/geos/geos-svn/capi/geos_c.h:1197:9: warning: struct 
'WKTWriter' was previously declared as a class
       [-Wmismatched-tags]
typedef struct GEOSWKTWriter_t GEOSWKTWriter;
         ^
/work/osgeo/geos/geos-svn/include/geos/io/WKTWriter.h:79:16: note: 
previous use is here
class GEOS_DLL WKTWriter {
                ^
/work/osgeo/geos/geos-svn/capi/geos_c.h:1197:9: note: did you mean class 
here?
typedef struct GEOSWKTWriter_t GEOSWKTWriter;
         ^~~~~~
         class
/work/osgeo/geos/geos-svn/capi/geos_c.h:1198:9: warning: struct 
'WKBReader' was previously declared as a class
       [-Wmismatched-tags]
typedef struct GEOSWKBReader_t GEOSWKBReader;
         ^
/work/osgeo/geos/geos-svn/include/geos/io/WKBReader.h:79:16: note: 
previous use is here
class GEOS_DLL WKBReader {
                ^
/work/osgeo/geos/geos-svn/capi/geos_c.h:1198:9: note: did you mean class 
here?
typedef struct GEOSWKBReader_t GEOSWKBReader;
         ^~~~~~
         class
/work/osgeo/geos/geos-svn/capi/geos_c.h:1199:9: warning: struct 
'WKBWriter' was previously declared as a class
       [-Wmismatched-tags]
typedef struct GEOSWKBWriter_t GEOSWKBWriter;
         ^
/work/osgeo/geos/geos-svn/include/geos/io/WKBWriter.h:72:16: note: 
previous use is here
class GEOS_DLL WKBWriter {
                ^
/work/osgeo/geos/geos-svn/capi/geos_c.h:1199:9: note: did you mean class 
here?
typedef struct GEOSWKBWriter_t GEOSWKBWriter;
         ^~~~~~
         class
/work/osgeo/geos/geos-svn/capi/geos_c.cpp:118:1: error: unknown type 
name 'GEOSInterruptCallback'; did you mean
       'GEOSQueryCallback'?
GEOSInterruptCallback*
^~~~~~~~~~~~~~~~~~~~~
GEOSQueryCallback
/work/osgeo/geos/geos-svn/capi/geos_c.h:138:16: note: 
'GEOSQueryCallback' declared here
typedef void (*GEOSQueryCallback)(void *item, void *userdata);
                ^
/work/osgeo/geos/geos-svn/capi/geos_c.cpp:119:32: error: use of 
undeclared identifier 'GEOSInterruptCallback'; did you mean
       'GEOSQueryCallback'?
GEOS_interruptRegisterCallback(GEOSInterruptCallback* cb)
                                ^
/work/osgeo/geos/geos-svn/capi/geos_c.cpp:119:55: error: use of 
undeclared identifier 'cb'
GEOS_interruptRegisterCallback(GEOSInterruptCallback* cb)
                                                       ^
/work/osgeo/geos/geos-svn/capi/geos_c.cpp:119:58: error: expected ';' 
after top level declarator
GEOS_interruptRegisterCallback(GEOSInterruptCallback* cb)

From geos-trac at osgeo.org  Thu Jun 14 13:34:35 2012
From: geos-trac at osgeo.org (GEOS)
Date: Thu, 14 Jun 2012 20:34:35 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
Message-ID: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Svn revision 3673

 Darwin Kernel Version 11.4.0

 gcc version 4.2.1

 {{{
 In file included from /work/osgeo/geos/geos-svn/capi/geos_c.cpp:48:
 /work/osgeo/geos/geos-svn/capi/geos_c.h:1196:9: warning: struct
 'WKTReader' was previously declared as a class
       [-Wmismatched-tags]
 typedef struct GEOSWKTReader_t GEOSWKTReader;
         ^
 /work/osgeo/geos/geos-svn/include/geos/io/WKTReader.h:58:16: note:
 previous use is here
 class GEOS_DLL WKTReader {
                ^
 /work/osgeo/geos/geos-svn/capi/geos_c.h:1196:9: note: did you mean class
 here?
 typedef struct GEOSWKTReader_t GEOSWKTReader;
         ^~~~~~
         class
 /work/osgeo/geos/geos-svn/capi/geos_c.h:1197:9: warning: struct
 'WKTWriter' was previously declared as a class
       [-Wmismatched-tags]
 typedef struct GEOSWKTWriter_t GEOSWKTWriter;
         ^
 /work/osgeo/geos/geos-svn/include/geos/io/WKTWriter.h:79:16: note:
 previous use is here
 class GEOS_DLL WKTWriter {
                ^
 /work/osgeo/geos/geos-svn/capi/geos_c.h:1197:9: note: did you mean class
 here?
 typedef struct GEOSWKTWriter_t GEOSWKTWriter;
         ^~~~~~
         class
 /work/osgeo/geos/geos-svn/capi/geos_c.h:1198:9: warning: struct
 'WKBReader' was previously declared as a class
       [-Wmismatched-tags]
 typedef struct GEOSWKBReader_t GEOSWKBReader;
         ^
 /work/osgeo/geos/geos-svn/include/geos/io/WKBReader.h:79:16: note:
 previous use is here
 class GEOS_DLL WKBReader {
                ^
 /work/osgeo/geos/geos-svn/capi/geos_c.h:1198:9: note: did you mean class
 here?
 typedef struct GEOSWKBReader_t GEOSWKBReader;
         ^~~~~~
         class
 /work/osgeo/geos/geos-svn/capi/geos_c.h:1199:9: warning: struct
 'WKBWriter' was previously declared as a class
       [-Wmismatched-tags]
 typedef struct GEOSWKBWriter_t GEOSWKBWriter;
         ^
 /work/osgeo/geos/geos-svn/include/geos/io/WKBWriter.h:72:16: note:
 previous use is here
 class GEOS_DLL WKBWriter {
                ^
 /work/osgeo/geos/geos-svn/capi/geos_c.h:1199:9: note: did you mean class
 here?
 typedef struct GEOSWKBWriter_t GEOSWKBWriter;
         ^~~~~~
         class
 /work/osgeo/geos/geos-svn/capi/geos_c.cpp:118:1: error: unknown type name
 'GEOSInterruptCallback'; did you mean
       'GEOSQueryCallback'?
 GEOSInterruptCallback*
 ^~~~~~~~~~~~~~~~~~~~~
 GEOSQueryCallback
 /work/osgeo/geos/geos-svn/capi/geos_c.h:138:16: note: 'GEOSQueryCallback'
 declared here
 typedef void (*GEOSQueryCallback)(void *item, void *userdata);
                ^
 /work/osgeo/geos/geos-svn/capi/geos_c.cpp:119:32: error: use of undeclared
 identifier 'GEOSInterruptCallback'; did you mean
       'GEOSQueryCallback'?
 GEOS_interruptRegisterCallback(GEOSInterruptCallback* cb)
                                ^
 /work/osgeo/geos/geos-svn/capi/geos_c.cpp:119:55: error: use of undeclared
 identifier 'cb'
 GEOS_interruptRegisterCallback(GEOSInterruptCallback* cb)
                                                       ^
 /work/osgeo/geos/geos-svn/capi/geos_c.cpp:119:58: error: expected ';'
 after top level declarator
 GEOS_interruptRegisterCallback(GEOSInterruptCallback* cb)
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Wed Jun 20 13:08:05 2012
From: geos-trac at osgeo.org (GEOS)
Date: Wed, 20 Jun 2012 20:08:05 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.91c502ee369afc97222376f20da217e3@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by blc56):

 Thanks! I've attached an patch with updated copyright attributions and JTS
 svn revisions. I can change the copyright attribution as necessary to
 facilitate inclusion.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:8>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From ld at galador.net  Thu Jun 21 08:13:31 2012
From: ld at galador.net (Lloyd Dupont)
Date: Fri, 22 Jun 2012 00:43:31 +0930
Subject: [geos-devel] newbie user and visual studio
Message-ID: <8F1D8592DD47433092CBC0B078248FF8@LloydSSD1>

HI,

I?m a Windows developer (and visual studio user) who is not very good with all those open source command line tools.
I?m also quite rusty with C++ but I want to give it a new go and port one of my C# app to C++ (WinRT / Metro C++ Cx to be exact)

For that I will need some geometry manipulating library, GEOS seems liked a good and simple enough candidate.

To facilitate this difficult entry in the C++ world (with a big open source library) it would be nice if there is a way to get a Visual Studio project to open which contains all the necessary GEOS file.

I even found a link which seems to indicate it does exists:
http://trac.osgeo.org/geos/wiki/BuildingOnWindowsWithVisualStudioIDE 

But I couldn?t find this VS project file.. they seem to be part of the build output.. :~
How to I generate get them??!?

Thanks for nay links / info / feedback!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120622/be879bd8/attachment.html>

From jmckenna at gatewaygeomatics.com  Thu Jun 21 09:55:47 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 21 Jun 2012 13:55:47 -0300
Subject: [geos-devel] newbie user and visual studio
In-Reply-To: <8F1D8592DD47433092CBC0B078248FF8@LloydSSD1>
References: <8F1D8592DD47433092CBC0B078248FF8@LloydSSD1>
Message-ID: <4FE35213.8050101@gatewaygeomatics.com>

On 12-06-21 12:13 PM, Lloyd Dupont wrote:
> HI,
>  
> I?m a Windows developer (and visual studio user) who is not very good
> with all those open source command line tools.
> I?m also quite rusty with C++ but I want to give it a new go and port
> one of my C# app to C++ (WinRT / Metro C++ Cx to be exact)
>  
> For that I will need some geometry manipulating library, GEOS seems
> liked a good and simple enough candidate.
>  
> To facilitate this difficult entry in the C++ world (with a big open
> source library) it would be nice if there is a way to get a Visual
> Studio project to open which contains all the necessary GEOS file.
>  
> I even found a link which seems to indicate it does exists:
> http://trac.osgeo.org/geos/wiki/BuildingOnWindowsWithVisualStudioIDE
>  
> But I couldn?t find this VS project file.. they seem to be part of the
> build output.. :~
> How to I generate get them??!?
>  
> Thanks for nay links / info / feedback!

Hello,

You can use the Visual Studio Command Prompt to compile GEOS (look for
the shortcut in your Start Menu).  Then a few commands will do the trick:

  autogen.bat
  nmake /f makefile.vc MSVC_VER=1500

(if you are using MSVC 2008)

I am not aware of a Visual Studio solution file that you ask for.

Have fun!

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From hobu.inc at gmail.com  Thu Jun 21 09:58:24 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu, 21 Jun 2012 11:58:24 -0500
Subject: [geos-devel] newbie user and visual studio
In-Reply-To: <4FE35213.8050101@gatewaygeomatics.com>
References: <8F1D8592DD47433092CBC0B078248FF8@LloydSSD1>
	<4FE35213.8050101@gatewaygeomatics.com>
Message-ID: <9DE81F30-379E-48E0-B6A4-91F0D60A3104@gmail.com>


On Jun 21, 2012, at 11:55 AM, Jeff McKenna wrote:
> I am not aware of a Visual Studio solution file that you ask for.

You can easily generate a Visual Studio solution of any vintage (2005, 2008, 2010) you want by issuing the appropriate command to cmake.

$ cmake -g "Visual Studio 10 Win64" ???..

See <http://www.cmake.org/cmake/help/v2.8.8/cmake.html#section_Generators> for more detail.

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120621/36763ca3/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120621/36763ca3/attachment.pgp>

From p.meems at topx-group.nl  Thu Jun 21 10:26:03 2012
From: p.meems at topx-group.nl (Paul Meems (Top-X))
Date: Thu, 21 Jun 2012 19:26:03 +0200
Subject: [geos-devel] newbie user and visual studio
In-Reply-To: <8F1D8592DD47433092CBC0B078248FF8@LloydSSD1>
References: <8F1D8592DD47433092CBC0B078248FF8@LloydSSD1>
Message-ID: <CAHNf2YSb0O7D6OZSwbTr2fyWVmD38Z-jWHy1KPSBT4Oymwb0ug@mail.gmail.com>

We have VS2008 solution files for GEOS, because we build it ourselves for
the MapWindow GIS application:
http://svn.mapwindow.org/svnroot/SupportLibraries/GDAL/Geos/


With regards


Paul

 *Paul Meems
*Senior GIS consultant

06-28542079
TopX Geo-ICT <http://www.topx-geo-ict.nl>

 <http://topx-group.nl/topx-geo-ict>Wij bieden ondersteuning

voor MapWindow GIS <http://www.mapwindow.org/>




2012/6/21 Lloyd Dupont <ld at galador.net>

>   HI,
>
> I?m a Windows developer (and visual studio user) who is not very good with
> all those open source command line tools.
> I?m also quite rusty with C++ but I want to give it a new go and port one
> of my C# app to C++ (WinRT / Metro C++ Cx to be exact)
>
> For that I will need some geometry manipulating library, GEOS seems liked
> a good and simple enough candidate.
>
> To facilitate this difficult entry in the C++ world (with a big open
> source library) it would be nice if there is a way to get a Visual Studio
> project to open which contains all the necessary GEOS file.
>
> I even found a link which seems to indicate it does exists:
> http://trac.osgeo.org/geos/wiki/BuildingOnWindowsWithVisualStudioIDE
>
> But I couldn?t find this VS project file.. they seem to be part of the
> build output.. :~
> How to I generate get them??!?
>
> Thanks for nay links / info / feedback!
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120621/a6d35749/attachment.html>

From geos-trac at osgeo.org  Fri Jun 22 04:27:11 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 11:27:11 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.b5e1b3c27732bca662bc01c50763b374@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Have a working patch ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From strk at keybit.net  Fri Jun 22 04:30:01 2012
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 22 Jun 2012 13:30:01 +0200
Subject: [geos-devel] Cutting a 3.3.5 release
Message-ID: <20120622113001.GA18993@gnash>

After figuring 3.3.4 was whipped with a CAPI library version
inferior to the one shipped with 3.3.3 [1] I think it's urgent
to release a 3.3.5 to fix the situation.

[1] http://trac.osgeo.org/geos/ticket/558

In addition to this specific bug there are other 6 items
targetting a 3.3.5, one of which related to the CMAKE build
system [2].

[2] http://trac.osgeo.org/geos/ticket/556

Given the push for this release has to do with build scripts
I think it would be nice to have the CMAKE bug also fixed,
so to possibly also set the version straight in it.

Mateusz: are you planning to close those within a week ?

--strk; 

 Sent from our free software
 http://www.gnu.org/philosophy/free-sw.html

From geos-trac at osgeo.org  Fri Jun 22 04:30:42 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 11:30:42 -0000
Subject: [geos-devel] [GEOS] #528: GEOS CMAKE Windows SDK x64 crashes
In-Reply-To: <044.e0d7814a7d7b2d349f9072b93cdc61d6@osgeo.org>
References: <044.e0d7814a7d7b2d349f9072b93cdc61d6@osgeo.org>
Message-ID: <053.c4282c04efef2e6ab2e6cd8855238e49@osgeo.org>

#528: GEOS CMAKE Windows SDK x64 crashes
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.6                     
Component:  Default     |     Version:  3.3.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.5 => 3.3.6


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/528#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 04:31:55 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 11:31:55 -0000
Subject: [geos-devel] [GEOS] #554: Artifacts and limitations of
	bufferLineSingleSided
In-Reply-To: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
References: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
Message-ID: <053.625855f57b86940d6fbd52f10ea3ec31@osgeo.org>

#554: Artifacts and limitations of bufferLineSingleSided
------------------------+---------------------------------------------------
 Reporter:  ylan        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.6                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.5 => 3.3.6


Comment:

 Was this with trunk or 3.3 branch ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/554#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 04:34:57 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 11:34:57 -0000
Subject: [geos-devel] [GEOS] #535: GeometryComponentFilter::filter_ro:
 Assertion `0' failed
In-Reply-To: <051.566b2f0491337d90efc9b35962a54a45@osgeo.org>
References: <051.566b2f0491337d90efc9b35962a54a45@osgeo.org>
Message-ID: <060.9685f5f4bf29b28191ed3d7cf5012cc7@osgeo.org>

#535: GeometryComponentFilter::filter_ro: Assertion `0' failed
-------------------------+--------------------------------------------------
 Reporter:  aaronharris  |       Owner:  geos-devel@?              
     Type:  defect       |      Status:  new                       
 Priority:  major        |   Milestone:  3.3.5                     
Component:  Default      |     Version:  3.3.3                     
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by strk):

 I wonder if this is related to the GEOS_INLINE switch.
 Did you set custom CXX flags while building ?
 Does the problem still occur with current 3.3 branch ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/535#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 04:37:15 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 11:37:15 -0000
Subject: [geos-devel] [GEOS] #517: GEOS Intersection() error w/ test
	case.
In-Reply-To: <047.2a0569822f315088cb3b0d28c1bf0831@osgeo.org>
References: <047.2a0569822f315088cb3b0d28c1bf0831@osgeo.org>
Message-ID: <056.87054ff68f2333942538ff160a5a120f@osgeo.org>

#517: GEOS Intersection() error w/ test case.
------------------------+---------------------------------------------------
 Reporter:  andrepl     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.6                     
Component:  Default     |     Version:  3.3.2                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.5 => 3.3.6


Comment:

 andrepl: I need help to reproduce this if you want it fixed. At least the
 crash error message. Also, was it the 3.3.3 version and not trunk ? I'll
 close after 1 week if there's no feedback here.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/517#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 04:46:48 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 11:46:48 -0000
Subject: [geos-devel] [GEOS] #554: Artifacts and limitations of
	bufferLineSingleSided
In-Reply-To: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
References: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
Message-ID: <053.65afc32fa97d045d80e68c3bc513ebcc@osgeo.org>

#554: Artifacts and limitations of bufferLineSingleSided
------------------------+---------------------------------------------------
 Reporter:  ylan        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.6                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by ylan):

 This was using trunk revision 3664.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/554#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 04:51:29 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 11:51:29 -0000
Subject: [geos-devel] [GEOS] #554: Artifacts and limitations of
	bufferLineSingleSided
In-Reply-To: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
References: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
Message-ID: <053.ab1f9e563a607213c008794440ef401b@osgeo.org>

#554: Artifacts and limitations of bufferLineSingleSided
------------------------+---------------------------------------------------
 Reporter:  ylan        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.3.6 => 3.4.0


Comment:

 I only find r3664 in the 3.3 branch. Could you try with current trunk as
 of r3673 ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/554#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 05:16:42 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 12:16:42 -0000
Subject: [geos-devel] [GEOS] #554: Artifacts and limitations of
	bufferLineSingleSided
In-Reply-To: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
References: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
Message-ID: <053.75e315da0c4f50156971ac95ee94c18e@osgeo.org>

#554: Artifacts and limitations of bufferLineSingleSided
------------------------+---------------------------------------------------
 Reporter:  ylan        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by ylan):

 I'm willing to try it with the current trunk (r3675). Unfortunately it
 fails to build on my system now. It breaks at:

 Scanning dependencies of target geos_c
 [ 83%] Building CXX object capi/CMakeFiles/geos_c.dir/geos_c.cpp.o
 /Volumes/macData/build/geos-svn/capi/geos_c.cpp:118: error: expected
 constructor, destructor, or type conversion before ?*? token

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/554#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 05:27:41 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 12:27:41 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.d97be2bf28bdbe90e4b4beb1a5f16e1f@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by dburken):

 In geos_c.cpp commenting out fixes first error.  Not sure of the effect
 this will have on other code:

 {{{
 #if 0
 GEOSInterruptCallback*
 GEOS_interruptRegisterCallback(GEOSInterruptCallback* cb)
 {
   return geos::util::Interrupt::registerCallback(cb);
 }
 #endif
 }}}

 Then getting:
 {{{
 bin/sh ../libtool --tag=CXX   --mode=link g++ -DGEOS_INLINE  -pedantic
 -Wall -ansi -Wno-long-long  -ffloat-store -g -O2 -release 3.4.0dev -no-
 undefined  -o libgeos.la -rpath /usr/local/lib inlines.lo
 algorithm/libalgorithm.la geom/libgeom.la geomgraph/libgeomgraph.la
 index/libindex.la io/libio.la linearref/liblinearref.la
 noding/libnoding.la operation/liboperation.la
 planargraph/libplanargraph.la precision/libprecision.la
 simplify/libsimplify.la util/libutil.la
 libtool: link: g++ -dynamiclib  -o .libs/libgeos-3.4.0dev.dylib
 .libs/inlines.o   -Wl,-force_load,algorithm/.libs/libalgorithm.a
 -Wl,-force_load,geom/.libs/libgeom.a
 -Wl,-force_load,geomgraph/.libs/libgeomgraph.a
 -Wl,-force_load,index/.libs/libindex.a -Wl,-force_load,io/.libs/libio.a
 -Wl,-force_load,linearref/.libs/liblinearref.a
 -Wl,-force_load,noding/.libs/libnoding.a
 -Wl,-force_load,operation/.libs/liboperation.a
 -Wl,-force_load,planargraph/.libs/libplanargraph.a
 -Wl,-force_load,precision/.libs/libprecision.a
 -Wl,-force_load,simplify/.libs/libsimplify.a
 -Wl,-force_load,util/.libs/libutil.a   -O2   -install_name
 /usr/local/lib/libgeos-3.4.0dev.dylib  -Wl,-single_module
 Undefined symbols for architecture x86_64:
   "__ZNSt8auto_ptrIN4geos4geom8EnvelopeEEcvSt12auto_ptr_refIT_EIS2_EEv",
 referenced from:
       virtual thunk to
 geos::geom::GeometryCollection::computeEnvelopeInternal() constin
 libgeom.a(GeometryCollection.o)
 "std::auto_ptr<geos::geom::Envelope>::auto_ptr(std::auto_ptr_ref<geos::geom::Envelope>)",
 referenced from:
       virtual thunk to
 geos::geom::GeometryCollection::computeEnvelopeInternal() constin
 libgeom.a(GeometryCollection.o)
 ld: symbol(s) not found for architecture x86_64
 collect2: ld returned 1 exit status
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 05:31:29 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 12:31:29 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.446bc6bcf8182483ba00cf0297dce3e5@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by hobu):

 The thunk error is a llvm-gcc bug.  Many others and I have only been able
 to get GEOS to compile on clang (faster too!) because of this weird
 interaction of GEOS' class arrangement.

 See #463 and #479 for more background.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 05:35:29 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 12:35:29 -0000
Subject: [geos-devel] [GEOS] #554: Artifacts and limitations of
	bufferLineSingleSided
In-Reply-To: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
References: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
Message-ID: <053.ef73b90dac85802f259c819ccc74d87d@osgeo.org>

#554: Artifacts and limitations of bufferLineSingleSided
------------------------+---------------------------------------------------
 Reporter:  ylan        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 You probably forgot to run ./configure again after updating (geos_c.h is
 generated from geos_c.h.in at configure time and contains the definition
 of GEOSInterruptCallback that line 118 is referencing)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/554#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 05:39:37 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 12:39:37 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.73f5c5628927b2bc2a13d5b3cc3dc24d@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Did you run ./configure again after updating ?
 It would explain your problem with GEOSInterruptCallback.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 05:46:25 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 12:46:25 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.247c952797fc33f958f275f16775ebbc@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by dburken):

 It was a fresh cmake build.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 05:56:20 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 12:56:20 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.98c00a76cb15e95e96fa475e675a5add@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Oh.. cmake.. that build kind is slower at being maintained. Worth a
 separate ticket, do you mind ?

 The thing is that GEOSInterruptCallback is typedefe'd in geos_c.h which is
 generated by geos_c.h.in at ./configure time. No idea what generates it
 with CMake (if any).

 All I know is that CMAKE is not the official build system. What prevents
 you to use the automake based build on mac OSX ? Is it not a POSIX system
 ? Does it intentionally try to be different ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 06:14:54 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 13:14:54 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.8999b52e5328d4801b50bb2a3ddbe4d0@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by dburken):

 I can't speak for OSX behaviour.  With automake build on OS X the first
 error goes away.  The virtual thunk error is still there. gcc version
 4.2.1.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:7>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 06:20:23 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 13:20:23 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.380629cfeae34d9c069921f5a57a558c@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 listen to Hobu in comment:3 for that one.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:8>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 06:28:48 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 13:28:48 -0000
Subject: [geos-devel] [GEOS] #559: EMPTY Centroid of tiny triangular polygon
Message-ID: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>

#559: EMPTY Centroid of tiny triangular polygon
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 The centroid of this polygon:
 {{{
 POLYGON((
 56.528666666700 25.2101666667,
 56.529000000001 25.2105000000,
 56.528833333300 25.2103333333,
 56.528666666700 25.2101666667))
 }}}

 Is computed as EMPTY.

 See http://trac.osgeo.org/postgis/ticket/1884 for origins of this

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/559>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 06:29:34 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 13:29:34 -0000
Subject: [geos-devel] [GEOS] #559: EMPTY Centroid of tiny triangular
	polygon
In-Reply-To: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
References: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
Message-ID: <053.2f748bc377c68d475f1f22aeddc632f0@osgeo.org>

#559: EMPTY Centroid of tiny triangular polygon
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 It is a _very_ tiny polygon, area: 3.30872245021211e-24
 ST_PointOnSurface works fine.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/559#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 06:33:47 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 13:33:47 -0000
Subject: [geos-devel] [GEOS] #554: Artifacts and limitations of
	bufferLineSingleSided
In-Reply-To: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
References: <044.262edb8eabef8716bd87579fea43d23d@osgeo.org>
Message-ID: <053.fd49f339de63ec1d9a33beeadf4352f3@osgeo.org>

#554: Artifacts and limitations of bufferLineSingleSided
------------------------+---------------------------------------------------
 Reporter:  ylan        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by ylan):

 You're right. I forgot to do that. Thanks for the hint.

 As for the single side buffering: the problem still exists in r3675.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/554#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 06:34:58 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 13:34:58 -0000
Subject: [geos-devel] [GEOS] #559: EMPTY Centroid of tiny triangular
	polygon
In-Reply-To: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
References: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
Message-ID: <053.937115c956c2f041dacf7b6285230172@osgeo.org>

#559: EMPTY Centroid of tiny triangular polygon
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Sorry, I had the wrong WKT. The one in the orginal post works, this one is
 the one that fails:
 {{{
 POLYGON((
 56.528666666700 25.2101666667,
 56.529000000000 25.2105000000,
 56.528833333300 25.2103333333,
 56.528666666700 25.2101666667))
 }}}

 The difference is in the least significant digit in the X ordinate of the
 second point.
 Both are valid. Area of the working one is 8.28966197710509e-17, area of
 the non-working one is 3.30872245021211e-24

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/559#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 06:37:08 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 13:37:08 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.4fe633ebc24d9849b44c6d60fa0820cb@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by kyngchaos):

 I'm not sure, but I think the framework build is only in Cmake.

 And as Howard says, clang is the way to go.  Add this to cmake configure:

 {{{
 -D CMAKE_CXX_COMPILER="/usr/bin/clang++" \
 -D CMAKE_C_COMPILER="/usr/bin/clang" \
 }}}

 It looks like cmake doesn't have a target to create geos_c.h, so this
 needs to be fixed for compiling from svn source.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:9>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 06:42:07 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 13:42:07 -0000
Subject: [geos-devel] [GEOS] #557: Build error on Mac
In-Reply-To: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
References: <047.b798a996957d36a1082f7e7b622cf6fe@osgeo.org>
Message-ID: <056.eaca06df0e57f50db769b9be0a242241@osgeo.org>

#557: Build error on Mac
------------------------+---------------------------------------------------
 Reporter:  dburken     |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 the geos_c.h generation actually also needs fixing for official releases,
 as I don't think we should be shipping it. But this is the subject for
 another ticket. Can we close this one ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/557#comment:10>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 07:01:17 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 14:01:17 -0000
Subject: [geos-devel] [GEOS] #559: EMPTY Centroid of tiny triangular
	polygon
In-Reply-To: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
References: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
Message-ID: <053.8359ad8b0be1cca574593e5a5f1f5527@osgeo.org>

#559: EMPTY Centroid of tiny triangular polygon
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 CentroidArea::area2 always returns 0 in the failing case, for all the
 involved triangles (3).

 Casting one of the vertices ordinate values to a long double (any of them)
 "fixes" the case.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/559#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 07:46:22 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 14:46:22 -0000
Subject: [geos-devel] [GEOS] #559: EMPTY Centroid of tiny triangular
	polygon
In-Reply-To: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
References: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
Message-ID: <053.1a17a71d8e2cf1afedfef8fa700ebb5d@osgeo.org>

#559: EMPTY Centroid of tiny triangular polygon
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 I found an unported handling for this case in JTS (degenerate area).
 Trying that out now.
 Mind you: an empty polygon seems still unhandled by JTS.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/559#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 08:04:28 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 15:04:28 -0000
Subject: [geos-devel] [GEOS] #559: EMPTY Centroid of tiny triangular
	polygon
In-Reply-To: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
References: <044.4bd7ed0c648f84f173437a8c133b0612@osgeo.org>
Message-ID: <053.15ec3e1b61b0b58606ee501e836f8bae@osgeo.org>

#559: EMPTY Centroid of tiny triangular polygon
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.3.5                     
Component:  Default     |      Version:  3.3.4                     
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 Fixed by r3676 in 3.3 branch (to be 3.3.5) and r3677 in trunk (to be
 3.4.0)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/559#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 08:14:16 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 15:14:16 -0000
Subject: [geos-devel] [GEOS] #560: GEOSGetCentroid EMPTY returns COLLECTION
 EMPTY rather than POINT EMPTY
Message-ID: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>

#560: GEOSGetCentroid EMPTY returns COLLECTION EMPTY rather than POINT EMPTY
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Not very important, but as ST_Buffer is guaranteed to return an areal
 geometry (POLYGON EMPTY in the empty case) I guess Centroid should also
 return a typed POINT no matter emptyness (for consistency)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/560>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 08:14:41 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 15:14:41 -0000
Subject: [geos-devel] [GEOS] #560: Centroid of EMPTY is a COLLECTION
 rather than POINT (was: GEOSGetCentroid EMPTY returns COLLECTION EMPTY
 rather than POINT EMPTY)
In-Reply-To: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
References: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
Message-ID: <053.da6fec2ad3b9fc4958b7c5adc5768df8@osgeo.org>

#560: Centroid of EMPTY is a COLLECTION rather than POINT
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.4.0                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/560#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 08:33:28 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 15:33:28 -0000
Subject: [geos-devel] [GEOS] #560: Centroid of EMPTY is a COLLECTION
	rather than POINT
In-Reply-To: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
References: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
Message-ID: <053.6e14292134536a57fdb1ca28079754ed@osgeo.org>

#560: Centroid of EMPTY is a COLLECTION rather than POINT
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.4.0                     
Component:  Default     |      Version:  3.3.4                     
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 r3678 in 3.3 branch (for 3.3.5) - r3679 in trunk (for 3.4.0)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/560#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 08:34:59 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 15:34:59 -0000
Subject: [geos-devel] [GEOS] #560: Centroid of EMPTY is a COLLECTION
	rather than POINT
In-Reply-To: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
References: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
Message-ID: <053.665c3e334335131a2d8d29e24bdd015e@osgeo.org>

#560: Centroid of EMPTY is a COLLECTION rather than POINT
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.3.5                     
Component:  Default     |      Version:  3.3.4                     
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * milestone:  3.4.0 => 3.3.5


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/560#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 22 08:45:35 2012
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 22 Jun 2012 15:45:35 -0000
Subject: [geos-devel] [GEOS] #532: Extend GEOSGetCentroid for Z dimension
In-Reply-To: <047.12dca32e8865b08fd6731bd85c1d47c4@osgeo.org>
References: <047.12dca32e8865b08fd6731bd85c1d47c4@osgeo.org>
Message-ID: <056.ba4ae75a76379886f4b2a3a21dfeae0e@osgeo.org>

#532: Extend GEOSGetCentroid for Z dimension
-------------------------+--------------------------------------------------
 Reporter:  mwtoews      |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
Changes (by strk):

  * type:  defect => enhancement


Comment:

 no, there's no co-planarity check in isValid. There's no support for real
 3D, only 2.5D.
 Extension requests would be better directed at JTS.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/532#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From mtnclimb at telus.net  Fri Jun 22 10:39:59 2012
From: mtnclimb at telus.net (Martin Davis)
Date: Fri, 22 Jun 2012 10:39:59 -0700
Subject: [geos-devel] [GEOS] #517: GEOS Intersection() error w/ test
	case.
In-Reply-To: <056.87054ff68f2333942538ff160a5a120f@osgeo.org>
References: <047.2a0569822f315088cb3b0d28c1bf0831@osgeo.org>
	<056.87054ff68f2333942538ff160a5a120f@osgeo.org>
Message-ID: <4FE4ADEF.3010106@telus.net>

You might want to try removing the FIXED(0) precision model from the 
test case.

I can reproduce this error in JTS.  Not sure yet what the problem is, 
though.

On 6/22/2012 4:37 AM, GEOS wrote:
> #517: GEOS Intersection() error w/ test case.
> ------------------------+---------------------------------------------------
>   Reporter:  andrepl     |       Owner:  geos-devel@?
>       Type:  defect      |      Status:  new
>   Priority:  major       |   Milestone:  3.3.6
> Component:  Default     |     Version:  3.3.2
>   Severity:  Unassigned  |    Keywords:
> ------------------------+---------------------------------------------------
> Changes (by strk):
>
>    * milestone:  3.3.5 =>  3.3.6
>
>
> Comment:
>
>   andrepl: I need help to reproduce this if you want it fixed. At least the
>   crash error message. Also, was it the 3.3.3 version and not trunk ? I'll
>   close after 1 week if there's no feedback here.
>

From mtnclimb at telus.net  Fri Jun 22 10:27:37 2012
From: mtnclimb at telus.net (Martin Davis)
Date: Fri, 22 Jun 2012 10:27:37 -0700
Subject: [geos-devel] [GEOS] #560: GEOSGetCentroid EMPTY returns
 COLLECTION EMPTY rather than POINT EMPTY
In-Reply-To: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
References: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
Message-ID: <4FE4AB09.1010309@telus.net>

Makes sense.  I've changed JTS to have this behaviour as well.  Also for 
interiorPoint.


On 6/22/2012 8:14 AM, GEOS wrote:
> #560: GEOSGetCentroid EMPTY returns COLLECTION EMPTY rather than POINT EMPTY
> ------------------------+---------------------------------------------------
>   Reporter:  strk        |       Owner:  geos-devel@?
>       Type:  defect      |      Status:  new
>   Priority:  major       |   Milestone:  3.4.0
> Component:  Default     |     Version:  3.3.4
>   Severity:  Unassigned  |    Keywords:
> ------------------------+---------------------------------------------------
>   Not very important, but as ST_Buffer is guaranteed to return an areal
>   geometry (POLYGON EMPTY in the empty case) I guess Centroid should also
>   return a typed POINT no matter emptyness (for consistency)
>

From mateusz at loskot.net  Fri Jun 22 14:42:11 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 22 Jun 2012 22:42:11 +0100
Subject: [geos-devel] Cutting a 3.3.5 release
In-Reply-To: <20120622113001.GA18993@gnash>
References: <20120622113001.GA18993@gnash>
Message-ID: <CABUeae-jQ2fyWrbzpagWNQ1O-ESN_obx-hPFBJetP0tJCi6eOA@mail.gmail.com>

Sandro,
I've been travelling in Poland with no solid connection.
I'll check what's there to be done and try to fix it within next few days.
-- 
Mateusz Loskot
(Sent from phone, apology for any top-posting or broken quoting)
On 22 Jun 2012 13:30, "Sandro Santilli" <strk at keybit.net> wrote:

> After figuring 3.3.4 was whipped with a CAPI library version
> inferior to the one shipped with 3.3.3 [1] I think it's urgent
> to release a 3.3.5 to fix the situation.
>
> [1] http://trac.osgeo.org/geos/ticket/558
>
> In addition to this specific bug there are other 6 items
> targetting a 3.3.5, one of which related to the CMAKE build
> system [2].
>
> [2] http://trac.osgeo.org/geos/ticket/556
>
> Given the push for this release has to do with build scripts
> I think it would be nice to have the CMAKE bug also fixed,
> so to possibly also set the version straight in it.
>
> Mateusz: are you planning to close those within a week ?
>
> --strk;
>
>  Sent from our free software
>  http://www.gnu.org/philosophy/free-sw.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20120622/bd158da3/attachment.html>

From strk at keybit.net  Mon Jun 25 02:53:28 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 25 Jun 2012 11:53:28 +0200
Subject: [geos-devel] [GEOS] #560: GEOSGetCentroid EMPTY returns
 COLLECTION EMPTY rather than POINT EMPTY
In-Reply-To: <4FE4AB09.1010309@telus.net>
References: <044.ab2f062f0f8b3a5d8215b78bbc4ede6f@osgeo.org>
	<4FE4AB09.1010309@telus.net>
Message-ID: <20120625095328.GB25133@gnash>

On Fri, Jun 22, 2012 at 10:27:37AM -0700, Martin Davis wrote:
> Makes sense.  I've changed JTS to have this behaviour as well.  Also
> for interiorPoint.

I saw the InteriorPointArea class still returns non-null from
getInteriorPoint, as it returns a newly created Coordinate with
values from result of centre(getEnvelopeInternal()).

Or maybe it's dereferencing NULL ?
In other words, what's supposed to be returned by EMPTY.getEnvelopeInternal ?

--strk;


> 
> 
> On 6/22/2012 8:14 AM, GEOS wrote:
> >#560: GEOSGetCentroid EMPTY returns COLLECTION EMPTY rather than POINT EMPTY
> >------------------------+---------------------------------------------------
> >  Reporter:  strk        |       Owner:  geos-devel@?
> >      Type:  defect      |      Status:  new
> >  Priority:  major       |   Milestone:  3.4.0
> >Component:  Default     |     Version:  3.3.4
> >  Severity:  Unassigned  |    Keywords:
> >------------------------+---------------------------------------------------
> >  Not very important, but as ST_Buffer is guaranteed to return an areal
> >  geometry (POLYGON EMPTY in the empty case) I guess Centroid should also
> >  return a typed POINT no matter emptyness (for consistency)
> >
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 

 Sent from our free software
 http://www.gnu.org/philosophy/free-sw.html

From geos-trac at osgeo.org  Mon Jun 25 03:10:26 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 25 Jun 2012 10:10:26 -0000
Subject: [geos-devel] [GEOS] #561: PointOnSurface of EMPTY is a COLLECTION
 rather than POINT
Message-ID: <044.3c88ff41b428740b4bdbf0a26ed5b77b@osgeo.org>

#561: PointOnSurface of EMPTY is a COLLECTION rather than POINT
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.5                     
Component:  Default     |     Version:  3.3.4                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 similar to #560, we also expect that "point on surface" is a point (even
 if empty)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/561>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Mon Jun 25 03:20:37 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 25 Jun 2012 10:20:37 -0000
Subject: [geos-devel] [GEOS] #561: PointOnSurface of EMPTY is a
 COLLECTION rather than POINT
In-Reply-To: <044.3c88ff41b428740b4bdbf0a26ed5b77b@osgeo.org>
References: <044.3c88ff41b428740b4bdbf0a26ed5b77b@osgeo.org>
Message-ID: <053.879f4c1d1071e699f4b1811651ef6efc@osgeo.org>

#561: PointOnSurface of EMPTY is a COLLECTION rather than POINT
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.3.5                     
Component:  Default     |      Version:  3.3.4                     
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

 * cc: history (added)
  * status:  new => closed
  * resolution:  => fixed


Comment:

 r3684 in trunk (3.4.0), r3685 in 3.3 branch (3.3.5)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/561#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Mon Jun 25 03:33:52 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 25 Jun 2012 10:33:52 -0000
Subject: [geos-devel] [GEOS] #535: GeometryComponentFilter::filter_ro:
 Assertion `0' failed
In-Reply-To: <051.566b2f0491337d90efc9b35962a54a45@osgeo.org>
References: <051.566b2f0491337d90efc9b35962a54a45@osgeo.org>
Message-ID: <060.470629de5e41606ed5648c68baf6c265@osgeo.org>

#535: GeometryComponentFilter::filter_ro: Assertion `0' failed
-------------------------+--------------------------------------------------
 Reporter:  aaronharris  |       Owner:  geos-devel@?              
     Type:  defect       |      Status:  new                       
 Priority:  major        |   Milestone:  3.3.6                     
Component:  Default      |     Version:  3.3.3                     
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
Changes (by strk):

  * milestone:  3.3.5 => 3.3.6


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/535#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From strk at keybit.net  Mon Jun 25 04:53:40 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 25 Jun 2012 13:53:40 +0200
Subject: [geos-devel] GEOS 3.3.5 released
Message-ID: <20120625115340.GA4276@gnash>

Due to an error in versioning of the C library shipped with GEOS-3.3.4
(which was inferior to the version of the one shipped with GEOS-3.3.3)
those one upgrading from 3.3.3 to 3.3.4 will have an hard time doing so.

To simplify things a new 3.3.5 release is out.
Just install the new one and things should automatically work.

Download link:
 http://download.osgeo.org/geos/geos-3.3.5.tar.bz2

Changes:
 http://trac.osgeo.org/geos/browser/tags/3.3.5/NEWS

MD5 sum of the tarball:
 e372dd5065b29f99febc7b0c03fce9cf 

--strk; 

 Sent from our free software
 http://www.gnu.org/philosophy/free-sw.html

From strk at keybit.net  Mon Jun 25 05:01:20 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 25 Jun 2012 14:01:20 +0200
Subject: [geos-devel] [GEOS] #556: Build error using cmake:
 ../geos_svn_revision.h: No such file or directory
In-Reply-To: <056.3410d77ab363d0b52f5182891a952c6a@osgeo.org>
References: <047.88b4a695977ec20e43c2302f49cb7277@osgeo.org>
	<056.3410d77ab363d0b52f5182891a952c6a@osgeo.org>
Message-ID: <20120625120120.GC4276@gnash>

On Mon, Jun 25, 2012 at 10:59:31AM -0000, GEOS wrote:

>  Simply, I'd suggest to avoid making the whole process unnecessarily obscure.

What's obscure about ./configure && make ?
The most obscure thing I see is "cmake" invocation, to be honest.

There's no need to explicitly invoke the svn file generator,
it's all taken care of by "make" ...

--strk; 

 Sent from our free software
 http://www.gnu.org/philosophy/free-sw.html

From mateusz at loskot.net  Mon Jun 25 05:05:59 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 25 Jun 2012 13:05:59 +0100
Subject: [geos-devel] [GEOS] #556: Build error using cmake:
 ../geos_svn_revision.h: No such file or directory
In-Reply-To: <20120625120120.GC4276@gnash>
References: <047.88b4a695977ec20e43c2302f49cb7277@osgeo.org>
	<056.3410d77ab363d0b52f5182891a952c6a@osgeo.org>
	<20120625120120.GC4276@gnash>
Message-ID: <CABUeae-Charj9ANq=NyFStfE1GD5JYGAEJFCnb7emvbNAa23-w@mail.gmail.com>

On 25 June 2012 13:01, Sandro Santilli <strk at keybit.net> wrote:
> On Mon, Jun 25, 2012 at 10:59:31AM -0000, GEOS wrote:
>
>> ?Simply, I'd suggest to avoid making the whole process unnecessarily obscure.
>
> What's obscure about ./configure && make ?

IMO, make should not generate intermediate env/platform/user-specific headers.
It's autoconf's job.

> The most obscure thing I see is "cmake" invocation, to be honest.

cmake invocation is equal to ./configure step.

> There's no need to explicitly invoke the svn file generator,
> it's all taken care of by "make" ...

I understand make can do it and make can (almost) do whatever you want,
but that is not the point.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From geos-trac at osgeo.org  Mon Jun 25 05:24:40 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 25 Jun 2012 12:24:40 -0000
Subject: [geos-devel] [GEOS] #562: install-sh missing in geos-3.3.5.tar.gz
	release
Message-ID: <044.96bbd79e2d8fbc19259754626ffbfa08@osgeo.org>

#562: install-sh missing in geos-3.3.5.tar.gz release
-------------------------+--------------------------------------------------
 Reporter:  nidi         |       Owner:  geos-devel@?              
     Type:  defect       |      Status:  new                       
 Priority:  major        |   Milestone:  3.3.5                     
Component:  Default      |     Version:  3.3.4                     
 Severity:  Significant  |    Keywords:                            
-------------------------+--------------------------------------------------
 The build distributed under
 `http://download.osgeo.org/geos/geos-3.3.5.tar.bz2` is lacking the
 `install-sh` file, `configure` thus fails:

 {{{
 $ ./configure
 configure: error: cannot find install-sh, install.sh, or shtool in "."
 "./.." "./../.."
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/562>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From strk at keybit.net  Mon Jun 25 07:08:56 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 25 Jun 2012 16:08:56 +0200
Subject: [geos-devel] [GEOS] #556: Build error using cmake:
 ../geos_svn_revision.h: No such file or directory
In-Reply-To: <CABUeae-Charj9ANq=NyFStfE1GD5JYGAEJFCnb7emvbNAa23-w@mail.gmail.com>
References: <047.88b4a695977ec20e43c2302f49cb7277@osgeo.org>
	<056.3410d77ab363d0b52f5182891a952c6a@osgeo.org>
	<20120625120120.GC4276@gnash>
	<CABUeae-Charj9ANq=NyFStfE1GD5JYGAEJFCnb7emvbNAa23-w@mail.gmail.com>
Message-ID: <20120625140742.GA20155@gnash>

On Mon, Jun 25, 2012 at 01:05:59PM +0100, Mateusz Loskot wrote:
> On 25 June 2012 13:01, Sandro Santilli <strk at keybit.net> wrote:
> > On Mon, Jun 25, 2012 at 10:59:31AM -0000, GEOS wrote:
> >
> >> ?Simply, I'd suggest to avoid making the whole process unnecessarily obscure.
> >
> > What's obscure about ./configure && make ?
> 
> IMO, make should not generate intermediate env/platform/user-specific headers.
> It's autoconf's job.
> 
> > The most obscure thing I see is "cmake" invocation, to be honest.
> 
> cmake invocation is equal to ./configure step.
> 
> > There's no need to explicitly invoke the svn file generator,
> > it's all taken care of by "make" ...
> 
> I understand make can do it and make can (almost) do whatever you want,
> but that is not the point.

My point is that the SVN revision string serves the purpose of knowing
which SVN revision you're actually using. It's very weak to depend on 
the discipline of the builder to always run ./configure (or cmake) after
each and every SVN update, so the result would often be an outdated
revision string in reported issues.

By having "make" do that we're guaranteed that the revision number is
always up to date. Special care is taken by the script to avoid overriding
the file if the revision didn't change, so you don't have to rebuild anything
until you commit or update.

May I suggest you just add the script invocation and if any compatibility 
problem arises we try to fix it ?

--strk; 

 Sent from our free software
 http://www.gnu.org/philosophy/free-sw.html

From geos-trac at osgeo.org  Mon Jun 25 07:15:04 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 25 Jun 2012 14:15:04 -0000
Subject: [geos-devel] [GEOS] #562: install-sh missing in
	geos-3.3.5.tar.gz release
In-Reply-To: <044.96bbd79e2d8fbc19259754626ffbfa08@osgeo.org>
References: <044.96bbd79e2d8fbc19259754626ffbfa08@osgeo.org>
Message-ID: <053.8bff10fecfdbe908d191995c34de0f19@osgeo.org>

#562: install-sh missing in geos-3.3.5.tar.gz release
-------------------------+--------------------------------------------------
 Reporter:  nidi         |       Owner:  geos-devel@?              
     Type:  defect       |      Status:  new                       
 Priority:  major        |   Milestone:  3.3.5                     
Component:  Default      |     Version:  3.3.4                     
 Severity:  Significant  |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by strk):

 Ouch, this was unexpected. I wonder why other releases didnt' have this
 problem.
 Paul: which version of automake do you use ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/562#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Mon Jun 25 07:23:42 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 25 Jun 2012 14:23:42 -0000
Subject: [geos-devel] [GEOS] #562: install-sh missing in
	geos-3.3.5.tar.gz release
In-Reply-To: <044.96bbd79e2d8fbc19259754626ffbfa08@osgeo.org>
References: <044.96bbd79e2d8fbc19259754626ffbfa08@osgeo.org>
Message-ID: <053.479d7f71c224ebb7da5ceb96a0e4e80c@osgeo.org>

#562: install-sh missing in geos-3.3.5.tar.gz release
-------------------------+--------------------------------------------------
 Reporter:  nidi         |       Owner:  geos-devel@?              
     Type:  defect       |      Status:  new                       
 Priority:  major        |   Milestone:  3.3.5                     
Component:  Default      |     Version:  3.3.4                     
 Severity:  Significant  |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by strk):

 I see that also config.guess, config.sub, depcomp, ltmain.sh, ...
 a lot more files missing :'(

 I swear I followed the HOWTO_RELEASE script, let's try again...

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/562#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Mon Jun 25 07:31:54 2012
From: geos-trac at osgeo.org (GEOS)
Date: Mon, 25 Jun 2012 14:31:54 -0000
Subject: [geos-devel] [GEOS] #562: install-sh missing in
	geos-3.3.5.tar.gz release
In-Reply-To: <044.96bbd79e2d8fbc19259754626ffbfa08@osgeo.org>
References: <044.96bbd79e2d8fbc19259754626ffbfa08@osgeo.org>
Message-ID: <053.491cbeeb71d63bb7367044e3507f32d1@osgeo.org>

#562: install-sh missing in geos-3.3.5.tar.gz release
-------------------------+--------------------------------------------------
 Reporter:  nidi         |        Owner:  geos-devel@?              
     Type:  defect       |       Status:  closed                    
 Priority:  major        |    Milestone:  3.3.5                     
Component:  Default      |      Version:  3.3.4                     
 Severity:  Significant  |   Resolution:  fixed                     
 Keywords:               |  
-------------------------+--------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 I re-run make dist-bzip2 and this time it seemed to work.
 No idea what happened.

 MD5 sum of the working package: 2ba61afb7fe2c5ddf642d82d7b16e75b

 Thanks for the timely report

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/562#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From strk at keybit.net  Mon Jun 25 07:34:12 2012
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 25 Jun 2012 16:34:12 +0200
Subject: [geos-devel] GEOS 3.3.5 released
In-Reply-To: <20120625115340.GA4276@gnash>
References: <20120625115340.GA4276@gnash>
Message-ID: <20120625143412.GB20155@gnash>

False start, the package was corrupted [1].
A working package is now online at the same URL
with MD5 sum 2ba61afb7fe2c5ddf642d82d7b16e75b

Sorry for the inconvenience.

[1] http://trac.osgeo.org/geos/ticket/562

--strk;


On Mon, Jun 25, 2012 at 01:53:40PM +0200, Sandro Santilli wrote:
> Due to an error in versioning of the C library shipped with GEOS-3.3.4
> (which was inferior to the version of the one shipped with GEOS-3.3.3)
> those one upgrading from 3.3.3 to 3.3.4 will have an hard time doing so.
> 
> To simplify things a new 3.3.5 release is out.
> Just install the new one and things should automatically work.
> 
> Download link:
>  http://download.osgeo.org/geos/geos-3.3.5.tar.bz2
> 
> Changes:
>  http://trac.osgeo.org/geos/browser/tags/3.3.5/NEWS
> 
> MD5 sum of the tarball:
>  e372dd5065b29f99febc7b0c03fce9cf 
> 
> --strk; 
> 
>  Sent from our free software
>  http://www.gnu.org/philosophy/free-sw.html

-- 

 Sent from our free software
 http://www.gnu.org/philosophy/free-sw.html

From mateusz at loskot.net  Mon Jun 25 08:34:28 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 25 Jun 2012 16:34:28 +0100
Subject: [geos-devel] [GEOS] #556: Build error using cmake:
 ../geos_svn_revision.h: No such file or directory
In-Reply-To: <20120625140742.GA20155@gnash>
References: <047.88b4a695977ec20e43c2302f49cb7277@osgeo.org>
	<056.3410d77ab363d0b52f5182891a952c6a@osgeo.org>
	<20120625120120.GC4276@gnash>
	<CABUeae-Charj9ANq=NyFStfE1GD5JYGAEJFCnb7emvbNAa23-w@mail.gmail.com>
	<20120625140742.GA20155@gnash>
Message-ID: <CABUeae86PsKqyZBBGgChUK2TgEA+BSdwtQ_MdYyZQJRbK10Q-g@mail.gmail.com>

On 25 June 2012 15:08, Sandro Santilli <strk at keybit.net> wrote:
> On Mon, Jun 25, 2012 at 01:05:59PM +0100, Mateusz Loskot wrote:
>> On 25 June 2012 13:01, Sandro Santilli <strk at keybit.net> wrote:
>> > On Mon, Jun 25, 2012 at 10:59:31AM -0000, GEOS wrote:
>> >
>> >> ?Simply, I'd suggest to avoid making the whole process unnecessarily obscure.
>> >
>> > What's obscure about ./configure && make ?
>>
>> IMO, make should not generate intermediate env/platform/user-specific headers.
>> It's autoconf's job.
>>
>> > The most obscure thing I see is "cmake" invocation, to be honest.
>>
>> cmake invocation is equal to ./configure step.
>>
>> > There's no need to explicitly invoke the svn file generator,
>> > it's all taken care of by "make" ...
>>
>> I understand make can do it and make can (almost) do whatever you want,
>> but that is not the point.
>
> My point is that the SVN revision string serves the purpose of knowing
> which SVN revision you're actually using

Yes, it's clear.

> It's very weak to depend on the discipline of the builder to always run ./configure (or cmake)
> after each and every SVN update, so the result would often be an outdated
> revision string in reported issues.

On the contrary, depending on the ./configure is actually the strength
of the solution.
Every svn update should be followed by ./configure, then make,
and skipping ./configure after svn update should not be supported whatsoever.

The svn update can bring lots of things changes at different levels
and users shall never
assume build configuration, templates of generated headers, and other
volatile stuff
will stay untouched. After svn update, all dangling headers, generated
by previous
calls to ./configure should be regenerated.

Any workflow within the development version of source code different than
svn update && ./configure && make
should neither be encouraged to follow, nor supported.

Also, geos/version.h should have something like
#define GEOS_REVISION  @GEOS_REVISION@
substituted during boostrap.

My 5 cents.

> By having "make" do that we're guaranteed that the revision number is
> always up to date.

This is not a solution, but obscure hack that interferes with typical
build steps.

My 2 cents.

> May I suggest you just add the script invocation and if any compatibility
> problem arises we try to fix it ?

Sure.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Mon Jun 25 13:27:58 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 25 Jun 2012 21:27:58 +0100
Subject: [geos-devel] [GEOS] #556: Build error using cmake:
 ../geos_svn_revision.h: No such file or directory
In-Reply-To: <CABUeae86PsKqyZBBGgChUK2TgEA+BSdwtQ_MdYyZQJRbK10Q-g@mail.gmail.com>
References: <047.88b4a695977ec20e43c2302f49cb7277@osgeo.org>
	<056.3410d77ab363d0b52f5182891a952c6a@osgeo.org>
	<20120625120120.GC4276@gnash>
	<CABUeae-Charj9ANq=NyFStfE1GD5JYGAEJFCnb7emvbNAa23-w@mail.gmail.com>
	<20120625140742.GA20155@gnash>
	<CABUeae86PsKqyZBBGgChUK2TgEA+BSdwtQ_MdYyZQJRbK10Q-g@mail.gmail.com>
Message-ID: <CABUeae9EUt55FBo671PxjEYf9EQc31pjq3f-ddFahaPHJY6qRA@mail.gmail.com>

On 25 June 2012 16:34, Mateusz Loskot <mateusz at loskot.net> wrote:
> On 25 June 2012 15:08, Sandro Santilli <strk at keybit.net> wrote:
>>
>> It's very weak to depend on the discipline of the builder to always run ./configure (or cmake)
>> after each and every SVN update, so the result would often be an outdated
>> revision string in reported issues.
>
> On the contrary, depending on the ./configure is actually the strength
> of the solution.
> Every svn update should be followed by ./configure, then make,
> and skipping ./configure after svn update should not be supported whatsoever.
> [...]

Sandro,

You may find this thread interesting:

http://lists.gnu.org/archive/html/automake/2009-05/msg00145.html

The GraphicsMagick's version.sh is interesting solution.

Simply, there are two cases where version info is used/generated:

1) Static version info stored currently in multiple places
(./configure, nmake.opt, CMakeLists.txt)
What about having such 'static' version info stored in plain text file
e.g. VERSION with number per line.

Then, this file could be parsed by ./configure, by cmake script and
even by NMAKE stuff too
so the general version info is consistent across all build configurations.

2) Volatile VCS-based version
In case of SVN/Git revision, version.sh could do this job as well for
./configure (see GraphicsMagick),
and native CMake scripting/modules could be used for CMake configuration.
For NMAKE, there could be simple .bat script.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From geos-trac at osgeo.org  Tue Jun 26 10:13:50 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 26 Jun 2012 17:13:50 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.f0005d7a0185ead6ad7b595b9a80b1ca@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by strk):

 Your patch is fully in as of r3693

 Next stop: C API exposure

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:9>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Tue Jun 26 10:23:51 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 26 Jun 2012 17:23:51 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.6534baa6c5597539caee6089eee63ec9@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by strk):

 Benjamin: very good job, I very much like the way you followed existing
 style and took care of memory leaks :)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:10>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Tue Jun 26 10:24:52 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 26 Jun 2012 17:24:52 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.e9ba19438d2bce09d8b5859aa5d4ced8@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by strk):

 and const correctness too !

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:11>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Tue Jun 26 10:28:12 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 26 Jun 2012 17:28:12 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.c9e36b19f9ea48259e2100ba2d8ce8f8@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |        Owner:  geos-devel@?              
     Type:  enhancement  |       Status:  closed                    
 Priority:  major        |    Milestone:  3.4.0                     
Component:  Default      |      Version:  svn-trunk                 
 Severity:  Unassigned   |   Resolution:  fixed                     
 Keywords:               |  
-------------------------+--------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:12>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Tue Jun 26 10:29:24 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 26 Jun 2012 17:29:24 -0000
Subject: [geos-devel] [GEOS] #565: Expose Delaunay triangulation to C-API
Message-ID: <044.8f881ba8cf26eca164b644bbc7962791@osgeo.org>

#565: Expose Delaunay triangulation to C-API
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
 After completion of #487 which ported the C++ side, this ticket is to
 expose it to the C-API

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/565>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Tue Jun 26 10:29:42 2012
From: geos-trac at osgeo.org (GEOS)
Date: Tue, 26 Jun 2012 17:29:42 -0000
Subject: [geos-devel] [GEOS] #487: Port Delaunay Triangulation API from
	JTS
In-Reply-To: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
References: <044.24fc48b0fe9e01f4b7a8f211dd4dcbf8@osgeo.org>
Message-ID: <053.7878568db23a63b431c9b527cbf0f6e8@osgeo.org>

#487: Port Delaunay Triangulation API from JTS
-------------------------+--------------------------------------------------
 Reporter:  strk         |        Owner:  geos-devel@?              
     Type:  enhancement  |       Status:  closed                    
 Priority:  major        |    Milestone:  3.4.0                     
Component:  Default      |      Version:  svn-trunk                 
 Severity:  Unassigned   |   Resolution:  fixed                     
 Keywords:               |  
-------------------------+--------------------------------------------------

Comment(by strk):

 #565 is about the C-API exposure

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/487#comment:13>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Wed Jun 27 03:47:47 2012
From: geos-trac at osgeo.org (GEOS)
Date: Wed, 27 Jun 2012 10:47:47 -0000
Subject: [geos-devel] [GEOS] #567: Expose Delaunay triangulation to PHP API
Message-ID: <044.f7d851eae35d1369dffc6015d42098c7@osgeo.org>

#567: Expose Delaunay triangulation to PHP API
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
 Once Delaunay is in C-API (#565) it'll need to be also exposed in PHP API

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/567>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Wed Jun 27 03:48:11 2012
From: geos-trac at osgeo.org (GEOS)
Date: Wed, 27 Jun 2012 10:48:11 -0000
Subject: [geos-devel] [GEOS] #565: Expose Delaunay triangulation to C-API
In-Reply-To: <044.8f881ba8cf26eca164b644bbc7962791@osgeo.org>
References: <044.8f881ba8cf26eca164b644bbc7962791@osgeo.org>
Message-ID: <053.3018d173203ce9b79ac03388319d7b08@osgeo.org>

#565: Expose Delaunay triangulation to C-API
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  3.4.0                     
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------

Comment(by strk):

 Done with r3702 -- see #567 for exposing to PHP api

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/565#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Wed Jun 27 03:48:24 2012
From: geos-trac at osgeo.org (GEOS)
Date: Wed, 27 Jun 2012 10:48:24 -0000
Subject: [geos-devel] [GEOS] #565: Expose Delaunay triangulation to C-API
In-Reply-To: <044.8f881ba8cf26eca164b644bbc7962791@osgeo.org>
References: <044.8f881ba8cf26eca164b644bbc7962791@osgeo.org>
Message-ID: <053.8b344677b26c1bf8c1e4edd973ec6c2a@osgeo.org>

#565: Expose Delaunay triangulation to C-API
-------------------------+--------------------------------------------------
 Reporter:  strk         |        Owner:  geos-devel@?              
     Type:  enhancement  |       Status:  closed                    
 Priority:  major        |    Milestone:  3.4.0                     
Component:  Default      |      Version:  svn-trunk                 
 Severity:  Unassigned   |   Resolution:  fixed                     
 Keywords:               |  
-------------------------+--------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/565#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

