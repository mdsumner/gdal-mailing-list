From sean.gillies at gmail.com  Mon May  2 12:41:35 2011
From: sean.gillies at gmail.com (Sean Gillies)
Date: Mon May  2 12:41:37 2011
Subject: [geos-devel] SVN commits failing
Message-ID: <BANLkTin-TB2f550NKi9qCM6ZXidPfyY+sw@mail.gmail.com>

I've got a fix for #436, my first commit in a while, and I'm getting
the following error message on a commit to
http://svn.osgeo.org/geos/trunk. Anybody know what's up? Svn update
works fine.

svn: Commit failed (details follow):
svn: Server sent unexpected return value (500 Internal Server Error)
in response to MKACTIVITY request for
'/geos/!svn/act/5f521cdf-6dec-43b1-ab2c-ceba246a71d3'

Additionally, there seems to be a header missing in the trunk:

error: geos/operation/buffer/OffsetCurveVertexList.h: No such file or directory

-- 
Sean
From strk at keybit.net  Tue May  3 03:42:30 2011
From: strk at keybit.net (Sandro Santilli)
Date: Tue May  3 03:42:36 2011
Subject: [geos-devel] SVN commits failing
In-Reply-To: <BANLkTin-TB2f550NKi9qCM6ZXidPfyY+sw@mail.gmail.com>
References: <BANLkTin-TB2f550NKi9qCM6ZXidPfyY+sw@mail.gmail.com>
Message-ID: <20110503074230.GF15919@keybit.net>

OSGeo had a problem with certificate renewals. Should be all fine now.

--strk;

On Mon, May 02, 2011 at 10:41:35AM -0600, Sean Gillies wrote:
> I've got a fix for #436, my first commit in a while, and I'm getting
> the following error message on a commit to
> http://svn.osgeo.org/geos/trunk. Anybody know what's up? Svn update
> works fine.
> 
> svn: Commit failed (details follow):
> svn: Server sent unexpected return value (500 Internal Server Error)
> in response to MKACTIVITY request for
> '/geos/!svn/act/5f521cdf-6dec-43b1-ab2c-ceba246a71d3'
> 
> Additionally, there seems to be a header missing in the trunk:
> 
> error: geos/operation/buffer/OffsetCurveVertexList.h: No such file or directory
> 
> -- 
> Sean
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-- 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From pramsey at opengeo.org  Fri May  6 19:02:53 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Fri May  6 23:23:07 2011
Subject: [geos-devel] SingleSidedBuffer and OffsetCurve
In-Reply-To: <20110427142231.GB87409@keybit.net>
References: <20110427142231.GB87409@keybit.net>
Message-ID: <BANLkTi=q_tCxibBe_pxSteuGBvG99n29iA@mail.gmail.com>

Hey an API break... that'll affect PostGIS perhaps (I think we had a
offset curve tied in?) and probably other folks, so we'll have to note
that change prominently in the release notes.

P.

On Wed, Apr 27, 2011 at 7:22 AM, Sandro Santilli <strk@keybit.net> wrote:
> As of r3306 GEOS supports both offset curves (lines)
> _and_ single-sided buffers (polygons).
>
> This was a bit of a pain to districate as a GEOSSingleSidedBuffer
> interface entered C-API as of GEOS-3.2.0 but had the lineal semantic
> (offset curve) rather than the areal one (buffer on one side only).
>
> So what we'll have in 3.3.0 is:
>
> ?1. A new GEOSOffsetCurve function deprecates GEOSSingleSidedBuffer
> ?2. A new GEOSBufferParams opaque type is introduced and serves the purpose
> ? ?of configuring operation of a new GEOSBufferWithParams function
>
> With GEOSBufferWithParams you can have proper (areal) single sided buffers.
>
> --strk;
>
> ?() ? Free GIS & Flash consultant/developer
> ?/\ ? http://strk.keybit.net/services.html
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From strk at keybit.net  Sat May  7 02:50:14 2011
From: strk at keybit.net (Sandro Santilli)
Date: Sat May  7 07:36:18 2011
Subject: [geos-devel] SingleSidedBuffer and OffsetCurve
In-Reply-To: <BANLkTi=q_tCxibBe_pxSteuGBvG99n29iA@mail.gmail.com>
References: <20110427142231.GB87409@keybit.net>
	<BANLkTi=q_tCxibBe_pxSteuGBvG99n29iA@mail.gmail.com>
Message-ID: <20110507065014.GM80538@keybit.net>

On Fri, May 06, 2011 at 04:02:53PM -0700, Paul Ramsey wrote:
> Hey an API break... that'll affect PostGIS perhaps (I think we had a
> offset curve tied in?) and probably other folks, so we'll have to note
> that change prominently in the release notes.

No C-API break. 
GEOSSingleSidedBuffer is still there, just "marked" as deprecated.
I'm pretty sure PostGIS isn't using that function. There's a ticket
on PostGIS trac containing a patch for ST_OffsetCurve (proper name)
internally calling GEOSSingleSidedBuffer, but wasn't committed
(lack of regress test or dox, undecided naming policy). I've updated
the ticket to notify the new opportunity of usin a properly named
GEOS API for offset curves.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From frederik at remote.org  Sun May  8 07:29:26 2011
From: frederik at remote.org (Frederik Ramm)
Date: Sun May  8 14:30:48 2011
Subject: [geos-devel] Polygon simplification
Message-ID: <4DC67E96.40809@remote.org>

Hi,

    I want to simplify a single, hole-less polygon so that the original 
polygon is guaranteed to still be completely covered by the simplified 
polygon, but the simplified polygon doesn't have too much extra area.

More formally, if O is the original polygon and S the simplified one, I 
want:

* S to contain O;
* S to have as little nodes as possible;
* area(S) - area(O) to be as small as possible.

It is clear that my optimising goals are contradictory - the simplified 
polygon with the smallest number of nodes would be a triangle with lots 
of extra area, and the simplified polygon with the smallest extra area 
would have the same, or almost the same, number of nodes as the 
original. I'm sort of looking for the sweet spot between the two extremes.

(My use case is taking a city or county or state boundary from 
OpenStreetMap then regularly cut out this area and make it available for 
download on download.geofabrik.de; the software that does the cutting 
needs simplified polygons else it takes too long.)

My current solution is a program using GEOS to first create a small 
buffer around the polygon and DP-simplify that with about 5 different 
grades of coarseness and check the results to see whether the "contains" 
requirement still holds. If no satisfactory results are achieved (still 
too many nodes), create a slightly larger buffer, etc, until you arrive 
at something that looks ok.

The disadvantage of this is that the resulting polygons are sometimes 
unnecessarily large. If you think of a typical US state that is bounded 
on one side by a straight line and on another side by a winding river, 
the above implementation will probably create a significant buffer to 
smoothe the river boundary (which is ok), but on the straight boundary 
the extra buffer is not necessary.

Does anyone have a suggestion for improvement? Maybe something that lets 
me find a middle line between the original polygon and the simplified 
surrounding polygon, which I would then apply several times or so...

Bye
Frederik

-- 
Frederik Ramm  ##  eMail frederik@remote.org  ##  N49?00'09" E008?23'33"
From woodbri at swoodbridge.com  Sun May  8 10:33:03 2011
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun May  8 17:06:54 2011
Subject: [geos-devel] Polygon simplification
In-Reply-To: <4DC67E96.40809@remote.org>
References: <4DC67E96.40809@remote.org>
Message-ID: <4DC6A99F.4050706@swoodbridge.com>

Hi Frederick,

First off your contains requirement means you have to start with a 
buffered polygon because all of the original boundary points will fail 
the contains test.

Idea 1:
So starting with your buffered polygon; It would seem that you could 
achieve this by adding and additional constraint to the Douglas-Peucker 
algorithm that only allow the removal of points where the new edges 
after removal of a point(s) does not cross the original boundary.

Also if you need to iterate, I would buffer the simplified polygon on 
the next iteration rather than starting with the original one again.

Idea 2:
Regarding the simplest polygon, granted that would be triangle but a 
more realistic polygon would be a convex hull around your original 
polygon with a slight buffer. Another idea might be to compute the 
convex hull and you could then iterate along the original polygon edge 
in steps and compute the distance from the edge to the nearest convex 
hull edge. Then find the largest distance and split that hull edge and 
move the new node on the split edge inbound until the adjacent edges to 
the point being moved intersect with the original edge and then save the 
last location. You want to find the largest gap and process that first, 
then recompute the gaps along that edge, and repeat with the next 
largest gap until you reach your number of points limit or some 
acceptable size delta between the polygons.

This is sort of building a concave hull, you might also look into 
algorithms for building concave hull.

-Steve

On 5/8/2011 7:29 AM, Frederik Ramm wrote:
> Hi,
>
> I want to simplify a single, hole-less polygon so that the original
> polygon is guaranteed to still be completely covered by the simplified
> polygon, but the simplified polygon doesn't have too much extra area.
>
> More formally, if O is the original polygon and S the simplified one, I
> want:
>
> * S to contain O;
> * S to have as little nodes as possible;
> * area(S) - area(O) to be as small as possible.
>
> It is clear that my optimising goals are contradictory - the simplified
> polygon with the smallest number of nodes would be a triangle with lots
> of extra area, and the simplified polygon with the smallest extra area
> would have the same, or almost the same, number of nodes as the
> original. I'm sort of looking for the sweet spot between the two extremes.
>
> (My use case is taking a city or county or state boundary from
> OpenStreetMap then regularly cut out this area and make it available for
> download on download.geofabrik.de; the software that does the cutting
> needs simplified polygons else it takes too long.)
>
> My current solution is a program using GEOS to first create a small
> buffer around the polygon and DP-simplify that with about 5 different
> grades of coarseness and check the results to see whether the "contains"
> requirement still holds. If no satisfactory results are achieved (still
> too many nodes), create a slightly larger buffer, etc, until you arrive
> at something that looks ok.
>
> The disadvantage of this is that the resulting polygons are sometimes
> unnecessarily large. If you think of a typical US state that is bounded
> on one side by a straight line and on another side by a winding river,
> the above implementation will probably create a significant buffer to
> smoothe the river boundary (which is ok), but on the straight boundary
> the extra buffer is not necessary.
>
> Does anyone have a suggestion for improvement? Maybe something that lets
> me find a middle line between the original polygon and the simplified
> surrounding polygon, which I would then apply several times or so...
>
> Bye
> Frederik
>

From mtnclimb at telus.net  Sun May  8 15:41:51 2011
From: mtnclimb at telus.net (Martin Davis)
Date: Sun May  8 22:56:34 2011
Subject: [geos-devel] Polygon simplification
In-Reply-To: <4DC6A99F.4050706@swoodbridge.com>
References: <4DC67E96.40809@remote.org> <4DC6A99F.4050706@swoodbridge.com>
Message-ID: <4DC6F1FF.7030209@telus.net>

Actually if you use the covers predicate instead of contains, you won't 
need to buffer.  (Covers is a much more useful predicate than contains, 
IMO).

have a look at BufferInputLineSimplifier in JTS (not sure if this has 
been ported to GEOS or not).  It does more or less exactly what you 
want.  The original goal was to simplify geometries for faster 
buffering, since small concavities are not significant to the buffer 
output.  I also had in mind creating a routine to do exactly what your 
use case is (called something like OuterSimplifier).  Sounds like that 
really would be useful.

Martin

On 5/8/2011 7:33 AM, Stephen Woodbridge wrote:
> Hi Frederick,
>
> First off your contains requirement means you have to start with a 
> buffered polygon because all of the original boundary points will fail 
> the contains test.
>
> Idea 1:
> So starting with your buffered polygon; It would seem that you could 
> achieve this by adding and additional constraint to the 
> Douglas-Peucker algorithm that only allow the removal of points where 
> the new edges after removal of a point(s) does not cross the original 
> boundary.
>
> Also if you need to iterate, I would buffer the simplified polygon on 
> the next iteration rather than starting with the original one again.
>
> Idea 2:
> Regarding the simplest polygon, granted that would be triangle but a 
> more realistic polygon would be a convex hull around your original 
> polygon with a slight buffer. Another idea might be to compute the 
> convex hull and you could then iterate along the original polygon edge 
> in steps and compute the distance from the edge to the nearest convex 
> hull edge. Then find the largest distance and split that hull edge and 
> move the new node on the split edge inbound until the adjacent edges 
> to the point being moved intersect with the original edge and then 
> save the last location. You want to find the largest gap and process 
> that first, then recompute the gaps along that edge, and repeat with 
> the next largest gap until you reach your number of points limit or 
> some acceptable size delta between the polygons.
>
> This is sort of building a concave hull, you might also look into 
> algorithms for building concave hull.
>
> -Steve
>
> On 5/8/2011 7:29 AM, Frederik Ramm wrote:
>> Hi,
>>
>> I want to simplify a single, hole-less polygon so that the original
>> polygon is guaranteed to still be completely covered by the simplified
>> polygon, but the simplified polygon doesn't have too much extra area.
>>
>> More formally, if O is the original polygon and S the simplified one, I
>> want:
>>
>> * S to contain O;
>> * S to have as little nodes as possible;
>> * area(S) - area(O) to be as small as possible.
>>
>> It is clear that my optimising goals are contradictory - the simplified
>> polygon with the smallest number of nodes would be a triangle with lots
>> of extra area, and the simplified polygon with the smallest extra area
>> would have the same, or almost the same, number of nodes as the
>> original. I'm sort of looking for the sweet spot between the two 
>> extremes.
>>
>> (My use case is taking a city or county or state boundary from
>> OpenStreetMap then regularly cut out this area and make it available for
>> download on download.geofabrik.de; the software that does the cutting
>> needs simplified polygons else it takes too long.)
>>
>> My current solution is a program using GEOS to first create a small
>> buffer around the polygon and DP-simplify that with about 5 different
>> grades of coarseness and check the results to see whether the "contains"
>> requirement still holds. If no satisfactory results are achieved (still
>> too many nodes), create a slightly larger buffer, etc, until you arrive
>> at something that looks ok.
>>
>> The disadvantage of this is that the resulting polygons are sometimes
>> unnecessarily large. If you think of a typical US state that is bounded
>> on one side by a straight line and on another side by a winding river,
>> the above implementation will probably create a significant buffer to
>> smoothe the river boundary (which is ok), but on the straight boundary
>> the extra buffer is not necessary.
>>
>> Does anyone have a suggestion for improvement? Maybe something that lets
>> me find a middle line between the original polygon and the simplified
>> surrounding polygon, which I would then apply several times or so...
>>
>> Bye
>> Frederik
>>
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> -----
> No virus found in this message.
> Checked by AVG - www.avg.com
> Version: 10.0.1325 / Virus Database: 1500/3624 - Release Date: 05/08/11
>
>
From geos-trac at osgeo.org  Mon May  9 09:01:46 2011
From: geos-trac at osgeo.org (GEOS)
Date: Mon May  9 16:47:21 2011
Subject: [geos-devel] Re: [GEOS] #401: LineMerger fails to extract linework
 from collection
In-Reply-To: <044.e63b6340736a8360cc8a146c9615157f@osgeo.org>
References: <044.e63b6340736a8360cc8a146c9615157f@osgeo.org>
Message-ID: <053.f16a112bc28d6deee10a041c6f5d341f@osgeo.org>

#401: LineMerger fails to extract linework from collection
-------------------------+--------------------------------------------------
 Reporter:  strk         |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  GEOS Future               
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
Changes (by strk):

  * type:  defect => enhancement
  * milestone:  => GEOS Future


Comment:

 JTS behaves the same...

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/401#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon May  9 16:24:01 2011
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 10 00:34:28 2011
Subject: [geos-devel] Re: [GEOS] #353: LinearReferencing functions segfaults
In-Reply-To: <044.87a7db56b41fad30810cda6c20808710@osgeo.org>
References: <044.87a7db56b41fad30810cda6c20808710@osgeo.org>
Message-ID: <053.ae0db9ee971aba89380363fa766b955c@osgeo.org>

#353: LinearReferencing functions segfaults
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.2.3                     
Component:  Default     |     Version:  3.2.2                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by strk):

  * version:  3.2.0 => 3.2.2
  * milestone:  3.2.1 => 3.2.3


Old description:

> When calling GEOSInterpolate against a POINT geometry (C-API), a segfault
> happens. See #283 for when that code was added.
>
> NOTE: milestone should be 3.2.3 but doesn't exist.
> Also, versions 3.2.1 and 3.2.2 should be added to trac.
>
> Also, r3012, r3013, r3014 and r3015 should be back-ported to 2.x branch.

New description:

 When calling GEOSInterpolate against a POINT geometry (C-API), a segfault
 happens. See #283 for when that code was added.

 Also, r3012, r3013, r3014 and r3015 should be back-ported to 3.2 branch.

--

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/353#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon May  9 16:24:46 2011
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 10 00:35:17 2011
Subject: [geos-devel] Re: [GEOS] #254: Geometry cleaning routine for Invalid
	Geometries
In-Reply-To: <047.bfe30eecfbedf03339275962a61259d6@osgeo.org>
References: <047.bfe30eecfbedf03339275962a61259d6@osgeo.org>
Message-ID: <056.60ebeaed73f055bbc89127d47213638d@osgeo.org>

#254: Geometry cleaning routine for Invalid Geometries
-------------------------+--------------------------------------------------
 Reporter:  pramsey      |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  major        |   Milestone:  GEOS Future               
Component:  Default      |     Version:  svn-trunk                 
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
Changes (by strk):

  * milestone:  => GEOS Future


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/254#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Mon May  9 16:29:16 2011
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 10 00:40:00 2011
Subject: [geos-devel] Re: [GEOS] #390: Cascade Union Static Methods & More
	Qualified util
In-Reply-To: <049.a4c5007dfdf8cb74e7568fe6632c8845@osgeo.org>
References: <049.a4c5007dfdf8cb74e7568fe6632c8845@osgeo.org>
Message-ID: <058.8eaa85b0a8c35308fddbf7a12a948270@osgeo.org>

#390: Cascade Union Static Methods & More Qualified util
-------------------------+--------------------------------------------------
 Reporter:  tomatsafe    |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  trivial      |   Milestone:  GEOS Future               
Component:  Default      |     Version:  3.0.3                     
 Severity:  Unassigned   |    Keywords:                            
-------------------------+--------------------------------------------------
Changes (by strk):

  * milestone:  => GEOS Future


Comment:

 cascaded union was also refactored to now be exposed in form of
 "unaryunion"
 do you still need/want something changed after that ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/390#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 10 03:40:25 2011
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 10 12:28:32 2011
Subject: [geos-devel] [GEOS] #438: ST_Equals(X,X) = false ??
Message-ID: <044.37dcdc3d5a88903277593e911785ca6c@osgeo.org>

#438: ST_Equals(X,X) = false ??
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 While producing the testcase for bug #368 I've got to a point where
 expected result doesn't match obtained result but they are really the
 same, in HEXWKB form.

 So I tried a relate and... they don't result as being the same !!!

 HEXWKB is this:

 {{{
 010300000001000000340000007711061EC4DE06C1B56E2A7A590F0F4124BB1E1EC4DE06C14E21D979590F0F410000000028E406C100000000900C0F410000000078EA06C10000000070090F410000000038ED06C10000000020080F4100000000C0F706C10000000050030F4100000000580C07C10000000048FB0E4100000000F03307C10000000010F10E4100000000306C07C10000000048EE0E410000000080AA07C10000000000FA0E4100000000B8FF07C100000000901E0F4100000000785208C10000000078510F41E4EE881B7A6908C1F437AB9BC6610F410A3CCF227A6908C108190F8EC6610F4129F772288E6908C129F77228AE610F4108190F8EA66908C10A3CCF229A610F41E6B79F63C26908C10A9F1D428B610F41EEF84F97E06908C12CD0BB1882610F4100000000006A08C1A887CB007F610F411207B0681F6A08C12CD0BB1882610F411A48609C3D6A08C10A9F1D428B610F41F8E6F071596A08C10A3CCF229A610F41D7088DD7716A08C129F77228AE610F41F6C330DD856A08C108190F8EC6610F41F660E2BD946A08C1E6B79F63E2610F41D42F44E79D6A08C1EEF84F9700620F41587834FFA06A08C10000000020620F41D42F44E79D6A08C11207B0683F620F41F660E2BD946A08C11A48609C5D620F41F6C330DD856A08C1F8E6F07179620F4191A6A830806A08C12024DB5B80620F4100000000E8A308C100000000308B0F4174C9FEC2BFF408C12FD8B0D3E7C50F4113C7FEC2BFF408C196D6B0D3E7C50F41E1D0D6FFE7A308C1FD4D3900308B0F41257C3830CC6A08C1FB85F738B6620F415C13F5C8046A08C10FAD4CF9CB620F419CFDB25F956908C12E4B3B1DA8620F4120CE9B206F6908C14C46985980620F41EE59F5B7566908C1C4681D0347620F41AB33315D526908C11519783FE5610F41A3915A77746908C1415A1B9CC2610F41BC295D36785208C1A5C6872678510F413F6E957FB8FF07C13FB57C4E901E0F41C8E5AACE80AA07C19F62AB5800FA0E410C8D11ED306C07C168B7952C48EE0E41CBC32D03F03307C12778E01410F10E41C4243C02580C07C16AC5ED0648FB0E411B9D2F36C0F706C1FA47DEEA4F030F412633850F38ED06C1EA5BE8F81F080F41CF5B10F027E406C137673D08900C0F417711061EC4DE06C1B56E2A7A590F0F41
 }}}

 Might be happening only in my development branch, so isn't confirmed yet.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/438>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 10 03:49:29 2011
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 10 12:38:03 2011
Subject: [geos-devel] Re: [GEOS] #438: ST_Equals(X,X) = false ??
In-Reply-To: <044.37dcdc3d5a88903277593e911785ca6c@osgeo.org>
References: <044.37dcdc3d5a88903277593e911785ca6c@osgeo.org>
Message-ID: <053.e9e879093cf31389be4ae9ac02be2629@osgeo.org>

#438: ST_Equals(X,X) = false ??
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 The polygon is invalid:
 NOTICE:  Self-intersection at or near point -199983 257080

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/438#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 10 03:56:08 2011
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 10 12:45:03 2011
Subject: [geos-devel] Re: [GEOS] #438: ST_Equals(X,X) = false ??
In-Reply-To: <044.37dcdc3d5a88903277593e911785ca6c@osgeo.org>
References: <044.37dcdc3d5a88903277593e911785ca6c@osgeo.org>
Message-ID: <053.656b5927c9614e1abb070d89b3e5c719@osgeo.org>

#438: ST_Equals(X,X) = false ??
------------------------+---------------------------------------------------
 Reporter:  strk        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by robe):

 Is this really a bug?  I would say its invalid.  ST_Equals is supposed to
 return false in this case is my understanding because the boundaries of
 the geometry are not well formed.

 Therefore you can't say it is or isn't spatially equal to itself. Is outer
 space = outer space?  I've always accepted this as a given.  Am I missing
 something?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/438#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 10 04:14:56 2011
From: geos-trac at osgeo.org (GEOS)
Date: Tue May 10 13:05:00 2011
Subject: [geos-devel] Re: [GEOS] #438: ST_Equals(X,X) = false ??
In-Reply-To: <044.37dcdc3d5a88903277593e911785ca6c@osgeo.org>
References: <044.37dcdc3d5a88903277593e911785ca6c@osgeo.org>
Message-ID: <053.32416a2a877ec6cd5c344bec4166157a@osgeo.org>

#438: ST_Equals(X,X) = false ??
------------------------+---------------------------------------------------
 Reporter:  strk        |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.3.0                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  invalid                   
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => invalid


Comment:

 No, I was missing the input was invalid at the time of bug filing.
 The input came out from a JTS union, so I expected it to be valid.
 It became a JTS bug then... reported on mailing list..

 NOTE: this is the output of the Union reported in bug #368.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/438#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Tue May 10 06:09:03 2011
From: strk at keybit.net (Sandro Santilli)
Date: Tue May 10 15:05:16 2011
Subject: [geos-devel] GEOS-3.0.0 ready to pack - Cmake cleanups ?
Message-ID: <20110510100903.GA39557@keybit.net>

I think GEOS is ready for packing, as far as automake
is concerned. Are there cmake builders around ?
Willing to take a look before shipping an RC1 ?

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From strk at keybit.net  Tue May 10 14:36:00 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed May 11 00:00:01 2011
Subject: [geos-devel] GEOS-3.3.0 ready to pack - cmake cleanups ?
In-Reply-To: <20110510100903.GA39557@keybit.net>
References: <20110510100903.GA39557@keybit.net>
Message-ID: <20110510183600.GT39557@keybit.net>

That's 3.3.0, ofc ...

On Tue, May 10, 2011 at 12:09:03PM +0200, Sandro Santilli wrote:
> I think GEOS is ready for packing, as far as automake
> is concerned. Are there cmake builders around ?
> Willing to take a look before shipping an RC1 ?

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From strk at keybit.net  Wed May 11 05:57:16 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed May 11 16:11:38 2011
Subject: [geos-devel] GEOS-3.3.0rc1 tagged in SVN, ready to be published
Message-ID: <20110511095715.GB39557@keybit.net>

http://trac.osgeo.org/geos/browser/tags/3.3.0rc1

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Wed May 11 10:32:27 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 11 21:02:22 2011
Subject: [geos-devel] [GEOS] #439: St9bad_alloc GEOS throws intersect error!
Message-ID: <050.968257fe0fb28231216c425dc91900a0@osgeo.org>

#439: St9bad_alloc GEOS throws intersect error!
------------------------+---------------------------------------------------
 Reporter:  marquis103  |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:                            
Component:  Default     |     Version:  3.2.0                     
 Severity:  Unassigned  |    Keywords:  ST9bad_alloc              
------------------------+---------------------------------------------------
 I have a huge repository of geospatial data (17M) data objects.  I'm
 attempting to build a view of the data by United States Command area.  I
 have a shapefile built that divides countries up by polygon and command
 area.  I can build all command areas except for northcom (United States,
 Puerto Rico, Canada, Mexico).  The rest of the entire world builds great.
 I can't attach the geometries because I can't see which ones are causing
 the errors.

 I just always get:
 NOTICE:  St9bad_alloc
 CONTEXT:  SQL statement "CREATE TABLE products_by_location_mv AS SELECT *
 FROM vw_products_by_location"
 PL/pgSQL function "create_matview" line 17 at EXECUTE statement
 ERROR:  GEOS intersects() threw an error!
 CONTEXT:  SQL statement "CREATE TABLE products_by_location_mv AS SELECT *
 FROM vw_products_by_location"
 PL/pgSQL function "create_matview" line 17 at EXECUTE statement

 but no real documentation on an error to see what the case may be.  All
 the polygons return valid.  Is there anything I can do to problem get an
 idea of what geometries are causing the errors?

 I'm on Windows 64 bit 2008
 32GB Memory
 Postgres 8.3
 Postgis 1.5.2
 GEOS 3.2

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/439>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 11 11:00:31 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 11 21:31:52 2011
Subject: [geos-devel] Re: [GEOS] #439: St9bad_alloc GEOS throws intersect
	error!
In-Reply-To: <050.968257fe0fb28231216c425dc91900a0@osgeo.org>
References: <050.968257fe0fb28231216c425dc91900a0@osgeo.org>
Message-ID: <059.43bc68b19009dd6b4f5bb82a8c4fb1ee@osgeo.org>

#439: St9bad_alloc GEOS throws intersect error!
------------------------+---------------------------------------------------
 Reporter:  marquis103  |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:                            
Component:  Default     |     Version:  3.2.0                     
 Severity:  Unassigned  |    Keywords:  ST9bad_alloc              
------------------------+---------------------------------------------------

Comment(by strk):

 GEOS-3.2.2 was released to fix a memory leak, see if it still happens
 there.
 Even better if you try with a development snapshot as of today, to become
 3.3.0 soon.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/439#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Wed May 11 17:09:23 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu May 12 04:00:53 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
Message-ID: <20110511210923.GL39557@keybit.net>

First release candidate of GEOS-3.3.0 is available for download:
http://download.osgeo.org/geos/geos-3.3.0rc1.tar.bz2

Please test the build system and all your client against it.
Note that C-API clients (like PostGIS) shouldn't need to be rebuilt,
and would automatically use the newly installed library.

This release brings many bug fixes and performance improvements,
as well as many new features that you may want to start hooking.
Check out the NEWS file for details.
http://trac.osgeo.org/geos/browser/tags/3.3.0rc1/NEWS

It'll go final in a week of silence,
so be noisy if anything goes wrong.

Have fun.

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From dark.panda+lists at gmail.com  Wed May 11 19:34:06 2011
From: dark.panda+lists at gmail.com (J Smith)
Date: Thu May 12 06:33:58 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
Message-ID: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>

G'day list.

To mark the occasion of the GEOS 3.3.0 release candidate, I've pushed
a new version of the ffi-geos gem to github and rubygems. Changes from
the first beta release include:

- a few new methods like Geos::LineString#offset_curve and the latest
relationship methods on Geos::PreparedGeometry.

- accordingly, I got rid of the Geos::LineString#buffer_single_sided
method since it's been deprecated in 3.3.0 and we want to use
offset_curve going forward.

- a move to more ruby-ish use of symbols for constants and enums for
things like geometry types. The older numeric constants should still
work to stay backwards compatible with the binary geos module.

- added the densify_frac argument to Geos::Geometry#hausdorff_distance.

- what were previously three buffer methods (buffer, buffer_with_style
and buffer_with_params) have become one buffer method that allow for
overloaded parameters that accomplish the same thing. No sense having
all three methods that are the same only different, right?

- marginally better documentation and more test coverage.

Things are looking good for a pretty decent stable release I hope.

Cheers
From strk at keybit.net  Thu May 12 02:19:41 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu May 12 13:41:21 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
Message-ID: <20110512061941.GM39557@keybit.net>

On Wed, May 11, 2011 at 07:34:06PM -0400, J Smith wrote:

> - what were previously three buffer methods (buffer, buffer_with_style
> and buffer_with_params) have become one buffer method that allow for
> overloaded parameters that accomplish the same thing. No sense having
> all three methods that are the same only different, right?

Right. In the PHP binding I've made a single function taking an associative
array for all the parameters (building a GEOSBufferParameter object).

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Thu May 12 03:18:55 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 12 14:43:36 2011
Subject: [geos-devel] [GEOS] #440: xmltester failures under MingW 32 bit
Message-ID: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------
 strk,

 Attached is the log file of my failures on geos 3.3.0 rc1 compilation of
 tar ball.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu May 12 03:32:02 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 12 14:57:22 2011
Subject: [geos-devel] Re: [GEOS] #440: xmltester failures under MingW 32 bit
In-Reply-To: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
References: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
Message-ID: <053.c376948846ec9f0727c109d16c1c32a4@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------

Comment(by strk):

 Failure for #350 is indeed the originally reported faiure. This is
 annoying. Are you sure you're building with -ffloat-store ? Could you
 retry that with r3338 or r3335 ? Or generally bisect to see if you got any
 success for it ?

 As per the #398 failure it does look like a minor coordinate drift. We're
 checking for exact equality (pointwise) which is the reason for the
 failure. Note that also JTS checks for pointwise equality, which is the
 reason why I've tried to track as closely as possible JTS as per
 operations precision, getting back from long doubles to single doubles...

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu May 12 03:36:12 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 12 15:01:42 2011
Subject: [geos-devel] Re: [GEOS] #440: xmltester failures under MingW 32 bit
In-Reply-To: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
References: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
Message-ID: <053.e5ec9185114fa36e91ea0e64942aa521@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------

Comment(by robe):

 nope not sure -- do I pass with --ffloat-store in the configure step?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu May 12 03:42:06 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 12 15:07:51 2011
Subject: [geos-devel] Re: [GEOS] #440: xmltester failures under MingW 32 bit
In-Reply-To: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
References: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
Message-ID: <053.db4d7312b8995ca4a226b0ab0f2183ab@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------

Comment(by strk):

 It'll be automatic if you're using automake and your compiler supports it.
 Check with:
 {{{
 grep AM_CXXFLAGS Makefile
 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Thu May 12 03:46:43 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 12 15:12:43 2011
Subject: [geos-devel] Re: [GEOS] #440: xmltester failures under MingW 32 bit
In-Reply-To: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
References: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
Message-ID: <053.c3d06a8ab2a38288207a95a446081db9@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------

Comment(by robe):

 Looks like it does


 AM_CXXFLAGS =  -DGEOS_INLINE  -pedantic -Wall -ansi -Wno-long-long
 -ffloat-store

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From dark.panda+lists at gmail.com  Thu May 12 11:16:19 2011
From: dark.panda+lists at gmail.com (J Smith)
Date: Thu May 12 23:06:48 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <20110512061941.GM39557@keybit.net>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
Message-ID: <BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>

On Thu, May 12, 2011 at 2:19 AM, Sandro Santilli <strk@keybit.net> wrote:
> Right. In the PHP binding I've made a single function taking an associative
> array for all the parameters (building a GEOSBufferParameter object).
>

Yeah, I noticed that and decided to follow suit. I'd like the two to
be reasonably close together in terms of their APIs and conventions
aside from the usual language quirks and conventions.

cheers
From strk at keybit.net  Thu May 12 11:28:27 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu May 12 23:19:24 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
Message-ID: <20110512152827.GE73302@keybit.net>

On Thu, May 12, 2011 at 11:16:19AM -0400, J Smith wrote:
> On Thu, May 12, 2011 at 2:19 AM, Sandro Santilli <strk@keybit.net> wrote:
> > Right. In the PHP binding I've made a single function taking an associative
> > array for all the parameters (building a GEOSBufferParameter object).
> >
> 
> Yeah, I noticed that and decided to follow suit. I'd like the two to
> be reasonably close together in terms of their APIs and conventions
> aside from the usual language quirks and conventions.

Speaking of which... how did you deal with prepared geoms ?
I didnt' make any use of those from the PHP binding. Dunno if I want
them to be transparent or explicit.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From dark.panda+lists at gmail.com  Thu May 12 11:40:29 2011
From: dark.panda+lists at gmail.com (J Smith)
Date: Thu May 12 23:32:28 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <20110512152827.GE73302@keybit.net>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
	<20110512152827.GE73302@keybit.net>
Message-ID: <BANLkTikH6RyfvN0U+wcMtQfWRKn_s4y_Lw@mail.gmail.com>

On Thu, May 12, 2011 at 11:28 AM, Sandro Santilli <strk@keybit.net> wrote:
>
> Speaking of which... how did you deal with prepared geoms ?
> I didnt' make any use of those from the PHP binding. Dunno if I want
> them to be transparent or explicit.
>

I implemented a to_prepared method on Geos::Geometry which produces a
Geos::PreparedGeometry instance that can be used to test
relationships, so it's rather explicit at the moment. I suppose that
functionality could also be hidden away and you'd have to handle
caching and stuff to detect for changes to the underlying geometry and
then update the prepared geometry accordingly and all that jazz. Worth
considering for sure, but at the moment it's just a simple
implementation.

cheers
From sean.gillies at gmail.com  Thu May 12 11:42:20 2011
From: sean.gillies at gmail.com (Sean Gillies)
Date: Thu May 12 23:34:01 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <20110512152827.GE73302@keybit.net>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
	<20110512152827.GE73302@keybit.net>
Message-ID: <BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>

On Thu, May 12, 2011 at 9:28 AM, Sandro Santilli <strk@keybit.net> wrote:
> On Thu, May 12, 2011 at 11:16:19AM -0400, J Smith wrote:
>> On Thu, May 12, 2011 at 2:19 AM, Sandro Santilli <strk@keybit.net> wrote:
>> > Right. In the PHP binding I've made a single function taking an associative
>> > array for all the parameters (building a GEOSBufferParameter object).
>> >
>>
>> Yeah, I noticed that and decided to follow suit. I'd like the two to
>> be reasonably close together in terms of their APIs and conventions
>> aside from the usual language quirks and conventions.
>
> Speaking of which... how did you deal with prepared geoms ?
> I didnt' make any use of those from the PHP binding. Dunno if I want
> them to be transparent or explicit.
>

FWIW, Shapely has a prep() function that prepares a geometry. The
result has a subset of the normal geometric object methods.

http://gispython.org/shapely/docs/1.2/manual.html#prepared-geometry-operations

-- 
Sean
From dark.panda+lists at gmail.com  Thu May 12 11:43:50 2011
From: dark.panda+lists at gmail.com (J Smith)
Date: Thu May 12 23:35:59 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
	<20110512152827.GE73302@keybit.net>
	<BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
Message-ID: <BANLkTimUALrxroik+1NXvYvoJVD+vhn+dg@mail.gmail.com>

On Thu, May 12, 2011 at 11:42 AM, Sean Gillies <sean.gillies@gmail.com> wrote:
>
> FWIW, Shapely has a prep() function that prepares a geometry. The
> result has a subset of the normal geometric object methods.
>
> http://gispython.org/shapely/docs/1.2/manual.html#prepared-geometry-operations
>

Now that you mention it, I think that's where I got my inspiration for
the to_prepared method. I seem to recall reading something similar to
that, a while back, so that might have been it.

cheers
From strk at keybit.net  Thu May 12 11:50:02 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu May 12 23:42:08 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
	<20110512152827.GE73302@keybit.net>
	<BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
Message-ID: <20110512155002.GF73302@keybit.net>

On Thu, May 12, 2011 at 09:42:20AM -0600, Sean Gillies wrote:
> On Thu, May 12, 2011 at 9:28 AM, Sandro Santilli <strk@keybit.net> wrote:
> > On Thu, May 12, 2011 at 11:16:19AM -0400, J Smith wrote:
> >> On Thu, May 12, 2011 at 2:19 AM, Sandro Santilli <strk@keybit.net> wrote:
> >> > Right. In the PHP binding I've made a single function taking an associative
> >> > array for all the parameters (building a GEOSBufferParameter object).
> >> >
> >>
> >> Yeah, I noticed that and decided to follow suit. I'd like the two to
> >> be reasonably close together in terms of their APIs and conventions
> >> aside from the usual language quirks and conventions.
> >
> > Speaking of which... how did you deal with prepared geoms ?
> > I didnt' make any use of those from the PHP binding. Dunno if I want
> > them to be transparent or explicit.
> >
> 
> FWIW, Shapely has a prep() function that prepares a geometry. The
> result has a subset of the normal geometric object methods.
> 
> http://gispython.org/shapely/docs/1.2/manual.html#prepared-geometry-operations

So both Python and Ruby made the "PreparedGeometry" type explicit.

I was thinking more of a .prep() function returning void and internally
holding a prepared version to transparently use in all prepared-aware
methods. This would kind of follow PostGIS use, where you actually don't
even explicitly call the "prepare" which happens based on an heuristic
(the second time you run a predicate on a geometry that geometry gets
prepared). The advantage of transparency would be there's no API change
but automatic performance improvement.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From dark.panda+lists at gmail.com  Thu May 12 11:57:55 2011
From: dark.panda+lists at gmail.com (J Smith)
Date: Thu May 12 23:50:45 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <20110512155002.GF73302@keybit.net>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
	<20110512152827.GE73302@keybit.net>
	<BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
	<20110512155002.GF73302@keybit.net>
Message-ID: <BANLkTinbp09z6p-zLz-Zjduc4-Qu+6=qKA@mail.gmail.com>

On Thu, May 12, 2011 at 11:50 AM, Sandro Santilli <strk@keybit.net> wrote:
>
> So both Python and Ruby made the "PreparedGeometry" type explicit.
>
> I was thinking more of a .prep() function returning void and internally
> holding a prepared version to transparently use in all prepared-aware
> methods. This would kind of follow PostGIS use, where you actually don't
> even explicitly call the "prepare" which happens based on an heuristic
> (the second time you run a predicate on a geometry that geometry gets
> prepared). The advantage of transparency would be there's no API change
> but automatic performance improvement.
>

I'd be open to that sort of thing. I'm still in beta after all.
From dazuma at alumni.caltech.edu  Thu May 12 12:46:00 2011
From: dazuma at alumni.caltech.edu (Daniel Azuma)
Date: Fri May 13 00:41:28 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <BANLkTinbp09z6p-zLz-Zjduc4-Qu+6=qKA@mail.gmail.com>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
	<20110512152827.GE73302@keybit.net>
	<BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
	<20110512155002.GF73302@keybit.net>
	<BANLkTinbp09z6p-zLz-Zjduc4-Qu+6=qKA@mail.gmail.com>
Message-ID: <F3F754C3-C702-4C1E-871D-62DF31A236FC@alumni.caltech.edu>

Just a little opinion on this, as I'm actually starting to use ffi-geos. If it is to be the de facto ruby binding for GEOS, it should expose the same flexibility that GEOS provides, including control over when and whether to produce a prepared geometry, so that clients that need that level of control can have it. A transparent implementation is very useful and could also be done, but it should be an optional API that can be turned on or off.

Daniel


On 12 May, 2011, at 08:57, J Smith wrote:

> On Thu, May 12, 2011 at 11:50 AM, Sandro Santilli <strk@keybit.net> wrote:
>> 
>> So both Python and Ruby made the "PreparedGeometry" type explicit.
>> 
>> I was thinking more of a .prep() function returning void and internally
>> holding a prepared version to transparently use in all prepared-aware
>> methods. This would kind of follow PostGIS use, where you actually don't
>> even explicitly call the "prepare" which happens based on an heuristic
>> (the second time you run a predicate on a geometry that geometry gets
>> prepared). The advantage of transparency would be there's no API change
>> but automatic performance improvement.
>> 
> 
> I'd be open to that sort of thing. I'm still in beta after all.

From strk at keybit.net  Thu May 12 12:48:22 2011
From: strk at keybit.net (Sandro Santilli)
Date: Fri May 13 00:43:56 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <F3F754C3-C702-4C1E-871D-62DF31A236FC@alumni.caltech.edu>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
	<20110512152827.GE73302@keybit.net>
	<BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
	<20110512155002.GF73302@keybit.net>
	<BANLkTinbp09z6p-zLz-Zjduc4-Qu+6=qKA@mail.gmail.com>
	<F3F754C3-C702-4C1E-871D-62DF31A236FC@alumni.caltech.edu>
Message-ID: <20110512164822.GJ73302@keybit.net>

On Thu, May 12, 2011 at 09:46:00AM -0700, Daniel Azuma wrote:
> Just a little opinion on this, as I'm actually starting to use ffi-geos. If it is to be the de facto ruby binding for GEOS, it should expose the same flexibility that GEOS provides, including control over when and whether to produce a prepared geometry, so that clients that need that level of control can have it. A transparent implementation is very useful and could also be done, but it should be an optional API that can be turned on or off.

So how do you like an explicit .prepare() on Geometry objects ?
And maybe an .unprepare() to release memory associated with the preparation.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From dark.panda+lists at gmail.com  Thu May 12 13:29:40 2011
From: dark.panda+lists at gmail.com (J Smith)
Date: Fri May 13 01:27:45 2011
Subject: [geos-devel] Second beta for ffi-geos extension now available
In-Reply-To: <20110512164822.GJ73302@keybit.net>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>
	<20110512061941.GM39557@keybit.net>
	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>
	<20110512152827.GE73302@keybit.net>
	<BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
	<20110512155002.GF73302@keybit.net>
	<BANLkTinbp09z6p-zLz-Zjduc4-Qu+6=qKA@mail.gmail.com>
	<F3F754C3-C702-4C1E-871D-62DF31A236FC@alumni.caltech.edu>
	<20110512164822.GJ73302@keybit.net>
Message-ID: <BANLkTi=Gvk7qpXfSJ1y7jQueCgRjmcCOLA@mail.gmail.com>

On Thu, May 12, 2011 at 12:48 PM, Sandro Santilli <strk@keybit.net> wrote:
> On Thu, May 12, 2011 at 09:46:00AM -0700, Daniel Azuma wrote:
>> Just a little opinion on this, as I'm actually starting to use ffi-geos. If it is to be the de facto ruby binding for GEOS, it should expose the same flexibility that GEOS provides, including control over when and whether to produce a prepared geometry, so that clients that need that level of control can have it. A transparent implementation is very useful and could also be done, but it should be an optional API that can be turned on or off.
>
> So how do you like an explicit .prepare() on Geometry objects ?
> And maybe an .unprepare() to release memory associated with the preparation.
>

Perhaps a combination of the two -- I could leave the current
to_prepared method in there that produces concrete PreparedGeometry
instances for those that want them but also allow for a transparent
mechanism if multiple calls to comparison methods are detected. To
enable or disable the transparent mechanism, we could add additional
options to the comparison methods so you could call something like
geom_a.crosses?(geom_b, :prepared => false) or something to that
effect. For those that really, really don't want prepared geometries
to be used transparently we could add something like
Geos.(disable|enable)_prepared_geometries! with the default being to
use prepared.

Just spit-balling here. I'm open to suggestions.

cheers
From mtnclimb at telus.net  Fri May 13 00:19:45 2011
From: mtnclimb at telus.net (Martin Davis)
Date: Fri May 13 12:55:02 2011
Subject: [geos-devel] JTS perspective on typing of prepared geometries
In-Reply-To: <20110512155002.GF73302@keybit.net>
References: <BANLkTinDpQKMUOsoGw1tS3+nbsP9CmLBew@mail.gmail.com>	<20110512061941.GM39557@keybit.net>	<BANLkTimwRU5=YsRo8FfZQ4Kqr2BHryQLtw@mail.gmail.com>	<20110512152827.GE73302@keybit.net>	<BANLkTinJPjUzBLHDTyCMhzvFfLmyBo4VZw@mail.gmail.com>
	<20110512155002.GF73302@keybit.net>
Message-ID: <4DCCB161.4030909@telus.net>

FWIW, if JTS Geometrys were based on interfaces rather than concrete 
classes, I would have defined PreparedGeometry to be an implementation 
of the Geometry interface.  This would have made all access uniform.

In practice I don't think it matters all *that* much, since you are 
usually using PreparedGeometrys in a very deliberate, narrow way.  
However, it could be useful for some forms of access - such as indexing 
based explicitly on Geometry objects.

Someday I hope to release a JTS 2, which will definitely be interface-based.

Martin

On 5/12/2011 8:50 AM, Sandro Santilli wrote:
>
> I was thinking more of a .prep() function returning void and internally
> holding a prepared version to transparently use in all prepared-aware
> methods. This would kind of follow PostGIS use, where you actually don't
> even explicitly call the "prepare" which happens based on an heuristic
> (the second time you run a predicate on a geometry that geometry gets
> prepared). The advantage of transparency would be there's no API change
> but automatic performance improvement.
>
>

>
From mateusz at loskot.net  Fri May 13 12:35:30 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat May 14 01:49:27 2011
Subject: [geos-devel] NaN as coordinate value
Message-ID: <4DCD5DD2.2080101@loskot.net>

Folks,

The following code comes from the GEOSisValidDetailTest unit:

geom_ = GEOSGeomFromWKT("LINESTRING(0 0, 10 0, NaN -5)");
ensure(0 != geom_);

Is this really supposed to construct geometry object?
Shouldn't it read ensure(0 == geom_); ?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From strk at keybit.net  Sat May 14 06:02:40 2011
From: strk at keybit.net (Sandro Santilli)
Date: Sat May 14 20:14:21 2011
Subject: [geos-devel] NaN as coordinate value
In-Reply-To: <4DCD5DD2.2080101@loskot.net>
References: <4DCD5DD2.2080101@loskot.net>
Message-ID: <20110514100240.GH92428@keybit.net>

On Fri, May 13, 2011 at 05:35:30PM +0100, Mateusz Loskot wrote:
> Folks,
> 
> The following code comes from the GEOSisValidDetailTest unit:
> 
> geom_ = GEOSGeomFromWKT("LINESTRING(0 0, 10 0, NaN -5)");
> ensure(0 != geom_);
> 
> Is this really supposed to construct geometry object?
> Shouldn't it read ensure(0 == geom_); ?

The IsValidOp class does check for NaN ordinate values, so there
must at least be a way to produce them to test the validity.

Moreover, in real world there might be cases in which you do end
up with NaN ordinate values in your data, due to bugs in geometry
processing software (a recent one was reported originating in PROJ4).

GEOS client code could be written to deal with those cases in some
way or another (for instance it might make up a value interpolating
previous and next valid one, or set to zero, or let the user specify
what to do based on parameters).
None of that is available in the core at the moment,
but might become available in 3.4.0, if it'll get some fundings.
See http://trac.osgeo.org/geos/ticket/254

I'd surely love to see this happen at the JTS side for a start.
PostGIS made some steps in that direction with the new ST_MakeValid,
but that one doesn't allow any parametrization/policy specification
and doesn't deal with NaN/Infinite values at all.
See http://trac.osgeo.org/postgis/ticket/399

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Sat May 14 16:20:57 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sun May 15 07:06:39 2011
Subject: [geos-devel] [GEOS] #442: isfinite not in scope using cmath on os x
Message-ID: <048.8ceda07856dfebe62c7e3abd1aaf918d@osgeo.org>

#442: isfinite not in scope using cmath on os x
------------------------+---------------------------------------------------
 Reporter:  jklowden    |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:                            
Component:  Default     |     Version:  3.0.3                     
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 The following patch allows compilation on a modern mac.

  Index: src/algorithm/RobustDeterminant.cpp
  ===================================================================
  --- src/algorithm/RobustDeterminant.cpp (revision 3364)
  +++ src/algorithm/RobustDeterminant.cpp (working copy)
  @@ -23,6 +23,7 @@
   #include <geos/util/IllegalArgumentException.h>

   #include <cmath>
  +using std::isfinite;

   #include <geos/platform.h> // for ISNAN, FINITE


 I know this line was removed a mere 28 hours ago.  I'm not sure how
 platform.h might be changed instead; it's very messy.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/442>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sat May 14 16:39:30 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sun May 15 07:26:13 2011
Subject: [geos-devel] Re: [GEOS] #442: isfinite not in scope using cmath on
	os x
In-Reply-To: <048.8ceda07856dfebe62c7e3abd1aaf918d@osgeo.org>
References: <048.8ceda07856dfebe62c7e3abd1aaf918d@osgeo.org>
Message-ID: <057.b9725ffe5c1c221eb586a9ba0f8b5461@osgeo.org>

#442: isfinite not in scope using cmath on os x
------------------------+---------------------------------------------------
 Reporter:  jklowden    |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:                            
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
Changes (by mloskot):

  * version:  3.0.3 => svn-trunk


Old description:

> The following patch allows compilation on a modern mac.
>
>  Index: src/algorithm/RobustDeterminant.cpp
>  ===================================================================
>  --- src/algorithm/RobustDeterminant.cpp (revision 3364)
>  +++ src/algorithm/RobustDeterminant.cpp (working copy)
>  @@ -23,6 +23,7 @@
>   #include <geos/util/IllegalArgumentException.h>
>
>   #include <cmath>
>  +using std::isfinite;
>
>   #include <geos/platform.h> // for ISNAN, FINITE
>

> I know this line was removed a mere 28 hours ago.  I'm not sure how
> platform.h might be changed instead; it's very messy.

New description:

 The following patch allows compilation on a modern mac.
 {{{
  Index: src/algorithm/RobustDeterminant.cpp
  ===================================================================
  --- src/algorithm/RobustDeterminant.cpp (revision 3364)
  +++ src/algorithm/RobustDeterminant.cpp (working copy)
  @@ -23,6 +23,7 @@
   #include <geos/util/IllegalArgumentException.h>

   #include <cmath>
  +using std::isfinite;

   #include <geos/platform.h> // for ISNAN, FINITE
 }}}

 I know this line was removed a mere 28 hours ago.  I'm not sure how
 platform.h might be changed instead; it's very messy.

--

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/442#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sat May 14 16:41:52 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sun May 15 07:28:45 2011
Subject: [geos-devel] Re: [GEOS] #442: isfinite not in scope using cmath on
	os x
In-Reply-To: <048.8ceda07856dfebe62c7e3abd1aaf918d@osgeo.org>
References: <048.8ceda07856dfebe62c7e3abd1aaf918d@osgeo.org>
Message-ID: <057.c8ca9de9245e8f8a51cb0b219dfe30e4@osgeo.org>

#442: isfinite not in scope using cmath on os x
------------------------+---------------------------------------------------
 Reporter:  jklowden    |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:                            
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by mloskot):

 Try this

 {{{
 #if defined(HAVE_STD_ISFINITE)
    using std::isfinite;
 #endif
 }}}

 or

 {{{
 #if defined(HAVE_STD_ISFINITE)
    using std::isfinite;
 #endif
 }}}

 It is very messy indeed.

 I would like to see solve it using/as in Boost.Math
 [http://www.boost.org/doc/libs/release/boost/math/special_functions/fpclassify.hpp
 fpclassify.hpp]

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/442#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From mk at di.uoa.gr  Mon May 16 08:22:31 2011
From: mk at di.uoa.gr (Manos Karpathiotakis)
Date: Tue May 17 01:45:21 2011
Subject: [geos-devel] Memory leaks (?) experienced with WKTReader and
	WKBWriter
Message-ID: <BANLkTikfxa85NFFyN7s8ivenMVxXPwtw0g@mail.gmail.com>

Hi all!!

I am currently using geos 3.2.0 in an implementation of mine. The classes I
am mainly using are Geometry, WKTReader and WKBWriter.

However, after examining my code with valgrind, it seems that I am
experiencing memory leaks from the two WKT classes.
The block of code that contains those is the following:

WKTReader* reader;
WKBWriter* writer;
for (unsigned i = 1; i <= 1000000000; i++) {
                //
                //create the wkt geometry...
                //

                string wkt = sObj.str();
Geometry* geom = (*reader).read(wkt);
                (*writer).writeHEX(*geom,geo_values);
 //reader->~WKTReader();
//(*geom).~Geometry();
 //free(geom);
//delete reader;
}

The lines commented at the end of the block are my attempts to perform
garbage collection manually.
So, my question is the following: Is there a specific way to destroy the
Geometry/WKTReader/WKBWriter??
Is it possible to avoid the leaks I am experiencing?


Thanks a lot,
Manos

-- 
===================================================
Manos Karpathiotakis
National & Kapodistrian University of Athens
Department of Informatics & Telecommunications, Office B25
Management of Data & Information Knowledge Group
Panepistimioupolis, Ilissia
GR-15784 Athens, Greece
Tel: +30.210.727.5159
Fax: +30.210.727.5214
e-mail: mk@di.uoa.gr
===================================================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20110516/4e24b099/attachment.html
From strk at keybit.net  Mon May 16 08:51:52 2011
From: strk at keybit.net (Sandro Santilli)
Date: Tue May 17 01:52:53 2011
Subject: [geos-devel] Memory leaks (?) experienced with WKTReader and
	WKBWriter
In-Reply-To: <BANLkTikfxa85NFFyN7s8ivenMVxXPwtw0g@mail.gmail.com>
References: <BANLkTikfxa85NFFyN7s8ivenMVxXPwtw0g@mail.gmail.com>
Message-ID: <20110516125152.GC26731@keybit.net>

On Mon, May 16, 2011 at 03:22:31PM +0300, Manos Karpathiotakis wrote:
> Hi all!!
> 
> I am currently using geos 3.2.0 in an implementation of mine. The classes I
> am mainly using are Geometry, WKTReader and WKBWriter.
> 
> However, after examining my code with valgrind, it seems that I am
> experiencing memory leaks from the two WKT classes.
> The block of code that contains those is the following:
> 
> WKTReader* reader;
> WKBWriter* writer;
> for (unsigned i = 1; i <= 1000000000; i++) {
>                 //
>                 //create the wkt geometry...
>                 //
> 
>                 string wkt = sObj.str();
> Geometry* geom = (*reader).read(wkt);
>                 (*writer).writeHEX(*geom,geo_values);
>  //reader->~WKTReader();
> //(*geom).~Geometry();
>  //free(geom);
> //delete reader;
> }
> 
> The lines commented at the end of the block are my attempts to perform
> garbage collection manually.
> So, my question is the following: Is there a specific way to destroy the
> Geometry/WKTReader/WKBWriter??
> Is it possible to avoid the leaks I am experiencing?

delete geom; // inside the loop
delete reader; delete writer; // outside the loop

-- strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From strk at keybit.net  Tue May 17 12:48:42 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed May 18 07:21:34 2011
Subject: [geos-devel] cmake maintainance and distribution
Message-ID: <20110517164842.GG38843@keybit.net>

It was noted in ticket [441] that CMake build scripts
are not being distributed.

Now, before distributing them I'd like to know if someone
is willing to maintain them, and in that case I'd ask this
someone to proceed at fixing the distribution bug as well.

So, anyone willing to maintain it ?

[441] http://trac.osgeo.org/geos/ticket/441

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Tue May 17 12:52:17 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 18 07:25:18 2011
Subject: [geos-devel] Re: [GEOS] #224: Need to compile the libGeos using Sun
 Studio12 on Solaris10
In-Reply-To: <049.909aa59ac32d43fdfa8bd453ff6587cb@osgeo.org>
References: <049.909aa59ac32d43fdfa8bd453ff6587cb@osgeo.org>
Message-ID: <058.bc964873c3d04451c81605c3d491501b@osgeo.org>

#224: Need to compile the libGeos using Sun Studio12 on Solaris10
-------------------------+--------------------------------------------------
 Reporter:  satyajitt    |       Owner:  geos-devel@?              
     Type:  enhancement  |      Status:  new                       
 Priority:  blocker      |   Milestone:  GEOS Future               
Component:  Core         |     Version:  svn-trunk                 
 Severity:  Significant  |    Keywords:  sun,solaris,sparc         
-------------------------+--------------------------------------------------
Changes (by strk):

  * milestone:  3.3.0 => GEOS Future


-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/224#comment:22>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Tue May 17 13:05:49 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 18 07:39:31 2011
Subject: [geos-devel] Re: [GEOS] #222: GEOS 3.0 won't link on ARM-EABI
	platform
In-Reply-To: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
References: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
Message-ID: <058.4379052833b4183c97ed4e757b3229ee@osgeo.org>

#222: GEOS 3.0 won't link on ARM-EABI platform
-----------------------+----------------------------------------------------
 Reporter:  jcrepetto  |       Owner:  geos-devel@?              
     Type:  defect     |      Status:  new                       
 Priority:  major      |   Milestone:  3.3.0                     
Component:  Default    |     Version:  3.1.1                     
 Severity:  Critical   |    Keywords:                            
-----------------------+----------------------------------------------------

Comment(by strk):

 wmark, jcrepetto: could you try building r3368 from trunk ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/222#comment:11>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From mateusz at loskot.net  Tue May 17 14:47:01 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed May 18 09:26:19 2011
Subject: [geos-devel] Re: cmake maintainance and distribution
In-Reply-To: <20110517164842.GG38843@keybit.net>
References: <20110517164842.GG38843@keybit.net>
Message-ID: <4DD2C2A5.3030202@loskot.net>

On 17/05/11 17:48, Sandro Santilli wrote:
> It was noted in ticket [441] that CMake build scripts
> are not being distributed.
> 
> Now, before distributing them I'd like to know if someone
> is willing to maintain them, and in that case I'd ask this
> someone to proceed at fixing the distribution bug as well.
> 
> So, anyone willing to maintain it ?
> 
> [441] http://trac.osgeo.org/geos/ticket/441

Sandro,

I aim to maintain CMake configuration.
Is this enough to fix 441 for now?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From bontepaarden at gmail.com  Tue May 17 16:32:38 2011
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed May 18 11:17:53 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <20110511210923.GL39557@keybit.net>
References: <20110511210923.GL39557@keybit.net>
Message-ID: <BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>

Hi list,

I've just downloaded GEOS-3.3.0RC1 and try to run nmake on a Win7 with
VS2008 Pro.
After a while processing I get this error:
NMAKE : fatal error U1073: don't know how to make
'geomgraph\EdgeIntersection.obj'
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio
9.0\VC\BIN\nmake.EXE"' : return code '0x2'

I've already Googled but didn't find anything useful.

This is the first output of nmake /f makefile.vc MSVC_VER=1500
Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
Copyright (C) Microsoft Corporation.  All rights reserved.

**********************************************************************
*** GEOS Build Configuration ***
*** Setting BUILD_DEBUG NO
*** Setting ENABLE_INLINE NO
*** Setting BUILD_BATCH NO
*** Using Microsoft NMAKE version 9.00.30729.01
*** Using Microsoft Visual C++ version 9.0
*** Using Microsoft C/C++ version 1500
*** Setting GEOS_INCLUDE -I..\include -I..\capi
*** Setting INCLUDE C:\Program Files (x86)\Microsoft Visual Studio
9.0\VC\ATLMFC
\INCLUDE;C:\Program Files (x86)\Microsoft Visual Studio
9.0\VC\INCLUDE;C:\Progra
m Files\Microsoft SDKs\Windows\v6.0A\include;
*** Using CFLAGS /nologo /MD /GR /O2 /W3 /EHs
*** Using CPPFLAGS /D "NDEBUG" /D "NOMINMAX" /D "WIN32_LEAN_AND_MEAN" /D
"NOGDI"
 /D "GEOS_DLL_EXPORT" /D "_CRT_SECURE_NO_DEPRECATE" /D
"_CRT_NONSTDC_NO_DEPRECAT
E" /D "_SCL_SECURE_NO_DEPRECATE"
**********************************************************************

Probably I'm doing something wrong. I'm no expert on compiling C++ projects
and/or using nmake.

Can anybody give me a hint?

Thanks,

Paul


*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2011/5/11 Sandro Santilli <strk@keybit.net>

> First release candidate of GEOS-3.3.0 is available for download:
> http://download.osgeo.org/geos/geos-3.3.0rc1.tar.bz2
>
> Please test the build system and all your client against it.
> Note that C-API clients (like PostGIS) shouldn't need to be rebuilt,
> and would automatically use the newly installed library.
>
> This release brings many bug fixes and performance improvements,
> as well as many new features that you may want to start hooking.
> Check out the NEWS file for details.
> http://trac.osgeo.org/geos/browser/tags/3.3.0rc1/NEWS
>
> It'll go final in a week of silence,
> so be noisy if anything goes wrong.
>
> Have fun.
>
> --strk;
>
>  ()   Free GIS & Flash consultant/developer
>  /\   http://strk.keybit.net/services.html
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20110517/922c182d/attachment.html
From strk at keybit.net  Tue May 17 16:46:54 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed May 18 11:32:37 2011
Subject: [geos-devel] Re: cmake maintainance and distribution
In-Reply-To: <4DD2C2A5.3030202@loskot.net>
References: <20110517164842.GG38843@keybit.net> <4DD2C2A5.3030202@loskot.net>
Message-ID: <20110517204654.GD46651@keybit.net>

On Tue, May 17, 2011 at 07:47:01PM +0100, Mateusz Loskot wrote:
> On 17/05/11 17:48, Sandro Santilli wrote:
> > It was noted in ticket [441] that CMake build scripts
> > are not being distributed.
> > 
> > Now, before distributing them I'd like to know if someone
> > is willing to maintain them, and in that case I'd ask this
> > someone to proceed at fixing the distribution bug as well.
> > 
> > So, anyone willing to maintain it ?
> > 
> > [441] http://trac.osgeo.org/geos/ticket/441
> 
> Sandro,
> 
> I aim to maintain CMake configuration.
> Is this enough to fix 441 for now?

Fixed in r3369.
Could you now fix the isfinite vs std::isfinite issue for cmake ?

src/algorithm/RobustDeterminant.cpp: In static member function 'static int geos::algorithm::RobustDeterminant::signOfDet2x2(double, double, double, double)':
src/algorithm/RobustDeterminant.cpp:48: error: 'isfinite' was not declared in this scope

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From woklist at kyngchaos.com  Tue May 17 22:54:29 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed May 18 18:00:17 2011
Subject: [geos-devel] Re: cmake maintainance and distribution
In-Reply-To: <4DD2C2A5.3030202@loskot.net>
References: <20110517164842.GG38843@keybit.net> <4DD2C2A5.3030202@loskot.net>
Message-ID: <9960E646-31AE-4E9E-8816-6960F5734233@kyngchaos.com>


On May 17, 2011, at 1:47 PM, Mateusz Loskot wrote:

> On 17/05/11 17:48, Sandro Santilli wrote:
>> It was noted in ticket [441] that CMake build scripts
>> are not being distributed.
>> 
>> Now, before distributing them I'd like to know if someone
>> is willing to maintain them, and in that case I'd ask this
>> someone to proceed at fixing the distribution bug as well.
>> 
>> So, anyone willing to maintain it ?
>> 
>> [441] http://trac.osgeo.org/geos/ticket/441
> 
> Sandro,
> 
> I aim to maintain CMake configuration.
> Is this enough to fix 441 for now?

I have a patch for an option to generate an OS X framework.  I was hoping to see this in the 3.3 release, it would make my OS X build a lot simpler.

http://trac.osgeo.org/geos/ticket/385

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From strk at keybit.net  Wed May 18 12:38:33 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu May 19 08:29:53 2011
Subject: [geos-devel] Re: cmake maintainance and distribution
In-Reply-To: <9960E646-31AE-4E9E-8816-6960F5734233@kyngchaos.com>
References: <20110517164842.GG38843@keybit.net> <4DD2C2A5.3030202@loskot.net>
	<9960E646-31AE-4E9E-8816-6960F5734233@kyngchaos.com>
Message-ID: <20110518163833.GB59045@keybit.net>

On Tue, May 17, 2011 at 09:54:29PM -0500, William Kyngesburye wrote:
> On May 17, 2011, at 1:47 PM, Mateusz Loskot wrote:
...
> > I aim to maintain CMake configuration.
> > Is this enough to fix 441 for now?
> 
> I have a patch for an option to generate an OS X framework. 
> I was hoping to see this in the 3.3 release, it would make my
> OS X build a lot simpler.
> 
> http://trac.osgeo.org/geos/ticket/385

Mat can you handle to check this out before monday ?
I'd like to release an RC2 when we're settled up with cmake.

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Wed May 18 15:08:31 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 19 11:07:48 2011
Subject: [geos-devel] [GEOS] #444: error compiling geos
Message-ID: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>

#444: error compiling geos
------------------------+---------------------------------------------------
 Reporter:  aperi2007   |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------
 Hi ,
 tryinig to compile geos trunck on debian 32bit
 I see this error:


 {{{
 ...
 mv -f .deps/ConvexHull.Tpo .deps/ConvexHull.Plo
 /bin/sh ../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.
 -I../../include -I../../include/geos -I../../include    -DGEOS_INLINE
 -pedantic -Wall -ansi -Wno-long-long  -ffloat-store -g -O2 -MT
 HCoordinate.lo -MD -MP -MF .deps/HCoordinate.Tpo -c -o HCoordinate.lo
 HCoordinate.cpp
  g++ -DHAVE_CONFIG_H -I. -I../../include -I../../include/geos
 -I../../include -DGEOS_INLINE -pedantic -Wall -ansi -Wno-long-long
 -ffloat-store -g -O2 -MT HCoordinate.lo -MD -MP -MF .deps/HCoordinate.Tpo
 -c HCoordinate.cpp  -fPIC -DPIC -o .libs/HCoordinate.o
 HCoordinate.cpp: In static member function ?static void
 geos::algorithm::HCoordinate::intersection(const geos::geom::Coordinate&,
 const geos::geom::Coordinate&, const geos::geom::Coordinate&, const
 geos::geom::Coordinate&, geos::geom::Coordinate&)?:
 HCoordinate.cpp:75: error: ?finite? is not a member of ?std?
 HCoordinate.cpp:75: error: ?finite? is not a member of ?std?
 HCoordinate.cpp: In member function ?double
 geos::algorithm::HCoordinate::getX() const?:
 HCoordinate.cpp:152: error: ?finite? is not a member of ?std?
 HCoordinate.cpp: In member function ?double
 geos::algorithm::HCoordinate::getY() const?:
 HCoordinate.cpp:163: error: ?finite? is not a member of ?std?
 make[3]: *** [HCoordinate.lo] Error 1
 make[3]: Leaving directory `/home/postgres/software/geos/geos-
 svn/src/algorithm'
 make[2]: *** [all-recursive] Error 1
 make[2]: Leaving directory `/home/postgres/software/geos/geos-
 svn/src/algorithm'
 make[1]: *** [all-recursive] Error 1

 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/444>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 18 15:36:11 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 19 11:37:01 2011
Subject: [geos-devel] Re: [GEOS] #444: error compiling geos
In-Reply-To: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
References: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
Message-ID: <058.3a33bab76d21ccd005abddbdf5b6b426@osgeo.org>

#444: error compiling geos
------------------------+---------------------------------------------------
 Reporter:  aperi2007   |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by aperi2007):

 I forget the geos trunk revision:
 r3369

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/444#comment:1>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 18 15:44:56 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 19 11:46:20 2011
Subject: [geos-devel] Re: [GEOS] #444: error compiling geos
In-Reply-To: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
References: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
Message-ID: <058.74bd5544a463d20afe14ff45189a7849@osgeo.org>

#444: error compiling geos
------------------------+---------------------------------------------------
 Reporter:  aperi2007   |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 which compiler on which environment ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/444#comment:2>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 18 15:47:47 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 19 11:49:24 2011
Subject: [geos-devel] Re: [GEOS] #444: error compiling geos
In-Reply-To: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
References: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
Message-ID: <058.5d531de9279369f62cbd223af3b012bc@osgeo.org>

#444: error compiling geos
------------------------+---------------------------------------------------
 Reporter:  aperi2007   |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by aperi2007):

 debian lenny 32bit

 gcc -v

 {{{
 Using built-in specs.
 Target: i486-linux-gnu
 Configured with: ../src/configure -v --with-pkgversion='Debian 4.3.2-1.1'
 --with-bugurl=file:///usr/share/doc/gcc-4.3/README.Bugs --enable-
 languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --enable-shared --with-
 system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-
 threads=posix --enable-nls --with-gxx-include-dir=/usr/include/c++/4.3
 --program-suffix=-4.3 --enable-clocale=gnu --enable-libstdcxx-debug
 --enable-objc-gc --enable-mpfr --enable-targets=all --enable-cld --enable-
 checking=release --build=i486-linux-gnu --host=i486-linux-gnu
 --target=i486-linux-gnu
 Thread model: posix
 gcc version 4.3.2 (Debian 4.3.2-1.1)

 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/444#comment:3>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 18 16:01:23 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 19 12:03:40 2011
Subject: [geos-devel] Re: [GEOS] #444: error compiling geos
In-Reply-To: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
References: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
Message-ID: <058.143c631adeb9ec5d98a3bf8747f12926@osgeo.org>

#444: error compiling geos
------------------------+---------------------------------------------------
 Reporter:  aperi2007   |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  blocker     |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:                            
------------------------+---------------------------------------------------

Comment(by strk):

 Should be fixed by r3370, please test

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/444#comment:4>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 18 16:26:18 2011
From: geos-trac at osgeo.org (GEOS)
Date: Thu May 19 12:29:47 2011
Subject: [geos-devel] Re: [GEOS] #444: error compiling geos
In-Reply-To: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
References: <049.2cb690e0c31849c0fbb3038251622f57@osgeo.org>
Message-ID: <058.cca5baf72464099cded8272198c9613f@osgeo.org>

#444: error compiling geos
------------------------+---------------------------------------------------
 Reporter:  aperi2007   |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  blocker     |    Milestone:  3.3.0                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:              |  
------------------------+---------------------------------------------------
Changes (by aperi2007):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 Tested.
 It compile now. :)

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/444#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From warmerdam at pobox.com  Thu May 19 13:03:57 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 19 13:14:16 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>
References: <20110511210923.GL39557@keybit.net>
	<BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>
Message-ID: <4DD54D7D.1010208@pobox.com>

On 11-05-17 04:32 PM, Paul Meems wrote:
> Hi list,
>
> I've just downloaded GEOS-3.3.0RC1 and try to run nmake on a Win7 with VS2008 Pro.
> After a while processing I get this error:
> NMAKE : fatal error U1073: don't know how to make 'geomgraph\EdgeIntersection.obj'
> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio
> 9.0\VC\BIN\nmake.EXE"' : return code '0x2'
>
> I've already Googled but didn't find anything useful.
>
> This is the first output of nmake /f makefile.vc <http://makefile.vc/>
> MSVC_VER=1500
> Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
> **********************************************************************
> *** GEOS Build Configuration ***
> *** Setting BUILD_DEBUG NO
> *** Setting ENABLE_INLINE NO
> *** Setting BUILD_BATCH NO
> *** Using Microsoft NMAKE version 9.00.30729.01
> *** Using Microsoft Visual C++ version 9.0
> *** Using Microsoft C/C++ version 1500
> *** Setting GEOS_INCLUDE -I..\include -I..\capi
> *** Setting INCLUDE C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\ATLMFC
> \INCLUDE;C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\INCLUDE;C:\Progra
> m Files\Microsoft SDKs\Windows\v6.0A\include;
> *** Using CFLAGS /nologo /MD /GR /O2 /W3 /EHs
> *** Using CPPFLAGS /D "NDEBUG" /D "NOMINMAX" /D "WIN32_LEAN_AND_MEAN" /D "NOGDI"
>   /D "GEOS_DLL_EXPORT" /D "_CRT_SECURE_NO_DEPRECATE" /D "_CRT_NONSTDC_NO_DEPRECAT
> E" /D "_SCL_SECURE_NO_DEPRECATE"
> **********************************************************************
>
> Probably I'm doing something wrong. I'm no expert on compiling C++ projects
> and/or using nmake.
>
> Can anybody give me a hint?

Paul,

I am working on fixing up the Makefile.vc.  I see it has fallen behind on
a number of points.  Hopefully an RC2 will be possible once I have the fix
in.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at opengeo.org  Thu May 19 14:35:03 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu May 19 14:38:17 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <4DD54D7D.1010208@pobox.com>
References: <20110511210923.GL39557@keybit.net>
	<BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>
	<4DD54D7D.1010208@pobox.com>
Message-ID: <BANLkTinysLaz2_y+pbPJB8aYfuk4Tsvf2w@mail.gmail.com>

Thanks Frank. Yep, we're working on a "no noise" protocol, so we'll
push out another RC with the CMake and VC updates and then see if we
get any error more error reports.
P.

On Thu, May 19, 2011 at 1:03 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 11-05-17 04:32 PM, Paul Meems wrote:
>>
>> Hi list,
>>
>> I've just downloaded GEOS-3.3.0RC1 and try to run nmake on a Win7 with
>> VS2008 Pro.
>> After a while processing I get this error:
>> NMAKE : fatal error U1073: don't know how to make
>> 'geomgraph\EdgeIntersection.obj'
>> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual
>> Studio
>> 9.0\VC\BIN\nmake.EXE"' : return code '0x2'
>>
>> I've already Googled but didn't find anything useful.
>>
>> This is the first output of nmake /f makefile.vc <http://makefile.vc/>
>> MSVC_VER=1500
>> Microsoft (R) Program Maintenance Utility Version 9.00.30729.01
>> Copyright (C) Microsoft Corporation. ?All rights reserved.
>>
>> **********************************************************************
>> *** GEOS Build Configuration ***
>> *** Setting BUILD_DEBUG NO
>> *** Setting ENABLE_INLINE NO
>> *** Setting BUILD_BATCH NO
>> *** Using Microsoft NMAKE version 9.00.30729.01
>> *** Using Microsoft Visual C++ version 9.0
>> *** Using Microsoft C/C++ version 1500
>> *** Setting GEOS_INCLUDE -I..\include -I..\capi
>> *** Setting INCLUDE C:\Program Files (x86)\Microsoft Visual Studio
>> 9.0\VC\ATLMFC
>> \INCLUDE;C:\Program Files (x86)\Microsoft Visual Studio
>> 9.0\VC\INCLUDE;C:\Progra
>> m Files\Microsoft SDKs\Windows\v6.0A\include;
>> *** Using CFLAGS /nologo /MD /GR /O2 /W3 /EHs
>> *** Using CPPFLAGS /D "NDEBUG" /D "NOMINMAX" /D "WIN32_LEAN_AND_MEAN" /D
>> "NOGDI"
>> ?/D "GEOS_DLL_EXPORT" /D "_CRT_SECURE_NO_DEPRECATE" /D
>> "_CRT_NONSTDC_NO_DEPRECAT
>> E" /D "_SCL_SECURE_NO_DEPRECATE"
>> **********************************************************************
>>
>> Probably I'm doing something wrong. I'm no expert on compiling C++
>> projects
>> and/or using nmake.
>>
>> Can anybody give me a hint?
>
> Paul,
>
> I am working on fixing up the Makefile.vc. ?I see it has fallen behind on
> a number of points. ?Hopefully an RC2 will be possible once I have the fix
> in.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From mateusz at loskot.net  Thu May 19 15:08:35 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May 19 15:13:46 2011
Subject: [geos-devel] Re: cmake maintainance and distribution
In-Reply-To: <20110518163833.GB59045@keybit.net>
References: <20110517164842.GG38843@keybit.net> <4DD2C2A5.3030202@loskot.net>
	<9960E646-31AE-4E9E-8816-6960F5734233@kyngchaos.com>
	<20110518163833.GB59045@keybit.net>
Message-ID: <4DD56AB3.3020706@loskot.net>

On 18/05/11 17:38, Sandro Santilli wrote:
> On Tue, May 17, 2011 at 09:54:29PM -0500, William Kyngesburye wrote:
>> On May 17, 2011, at 1:47 PM, Mateusz Loskot wrote:
> ...
>>> I aim to maintain CMake configuration.
>>> Is this enough to fix 441 for now?
>>
>> I have a patch for an option to generate an OS X framework. 
>> I was hoping to see this in the 3.3 release, it would make my
>> OS X build a lot simpler.
>>
>> http://trac.osgeo.org/geos/ticket/385
> 
> Mat can you handle to check this out before monday ?
> I'd like to release an RC2 when we're settled up with cmake.

I will apply the patch tonight, but I can only test if it does not break
anything on Linux and Windows. I'll need to ask William to keep an eye
on OSX support and report any issues noticed.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From warmerdam at pobox.com  Thu May 19 15:34:28 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 19 15:40:54 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <4DD54D7D.1010208@pobox.com>
References: <20110511210923.GL39557@keybit.net>
	<BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>
	<4DD54D7D.1010208@pobox.com>
Message-ID: <4DD570C4.7050002@pobox.com>

On 11-05-19 01:03 PM, Frank Warmerdam wrote:
> On 11-05-17 04:32 PM, Paul Meems wrote:
>> Hi list,
>>
>> I've just downloaded GEOS-3.3.0RC1 and try to run nmake on a Win7 with VS2008
>> Pro.
>> After a while processing I get this error:
>> NMAKE : fatal error U1073: don't know how to make
>> 'geomgraph\EdgeIntersection.obj'
>> NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio
>> 9.0\VC\BIN\nmake.EXE"' : return code '0x2'

Paul, others,

I have made a few fixes in trunk related to this:

   http://trac.osgeo.org/geos/changeset/3372

The changes to Makefile.vc are specific to this building approach.  But
the other changes could affect other builds.  One was declaring assert
for SegmentPointComparitor.h.  Another was a problem when GEOS_INLINE is
not defined and the last was a problem building with NDEBUG.

Hopefully we could issue an RC2?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From strk at keybit.net  Thu May 19 15:53:03 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu May 19 16:00:31 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <4DD570C4.7050002@pobox.com>
References: <20110511210923.GL39557@keybit.net>
	<BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>
	<4DD54D7D.1010208@pobox.com> <4DD570C4.7050002@pobox.com>
Message-ID: <20110519195303.GI69193@keybit.net>

On Thu, May 19, 2011 at 03:34:28PM -0400, Frank Warmerdam wrote:

> I have made a few fixes in trunk related to this:
> 
>   http://trac.osgeo.org/geos/changeset/3372
> 
> The changes to Makefile.vc are specific to this building approach.  But
> the other changes could affect other builds.  One was declaring assert
> for SegmentPointComparitor.h.  Another was a problem when GEOS_INLINE is
> not defined and the last was a problem building with NDEBUG.

The change in PolygonBuilder.cpp looks suspicious.
The "found two shells in MinimalEdgeRing" exception was even
triggered by a recently closed bug.

Could you reverse that and file a ticket explaining why you'd need
to disable it when building with NDEBUG ?

> Hopefully we could issue an RC2?

We're also waiting for Mat's CMake fixes

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From warmerdam at pobox.com  Thu May 19 16:15:57 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 19 16:16:39 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <20110519195303.GI69193@keybit.net>
References: <20110511210923.GL39557@keybit.net>
	<BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>
	<4DD54D7D.1010208@pobox.com> <4DD570C4.7050002@pobox.com>
	<20110519195303.GI69193@keybit.net>
Message-ID: <4DD57A7D.8020706@pobox.com>

On 11-05-19 03:53 PM, Sandro Santilli wrote:

> The change in PolygonBuilder.cpp looks suspicious.
> The "found two shells in MinimalEdgeRing" exception was even
> triggered by a recently closed bug.
>
> Could you reverse that and file a ticket explaining why you'd need
> to disable it when building with NDEBUG ?

Strk,

The definition of shellCount was already:

#ifndef NDEBUG
	int shellCount=0;
#endif

It seems clear, in context, that the shellCount related stuff was setup
to be a debug-only build check.  I have no idea why.  All I did was
extend things accordingly.  So I'm not really inclined to back it out,
and file a ticket.  But if you think that the shellCount checks and
corresponding exception should always be evaluated then I would suggest
filing a ticket to that effect and we can remove all the #ifndef NDEBUG
wrappers for shellCount stuff.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From strk at keybit.net  Thu May 19 16:28:23 2011
From: strk at keybit.net (Sandro Santilli)
Date: Thu May 19 16:29:47 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <4DD57A7D.8020706@pobox.com>
References: <20110511210923.GL39557@keybit.net>
	<BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>
	<4DD54D7D.1010208@pobox.com> <4DD570C4.7050002@pobox.com>
	<20110519195303.GI69193@keybit.net> <4DD57A7D.8020706@pobox.com>
Message-ID: <20110519202823.GM69193@keybit.net>

On Thu, May 19, 2011 at 04:15:57PM -0400, Frank Warmerdam wrote:
> On 11-05-19 03:53 PM, Sandro Santilli wrote:
> 
> >The change in PolygonBuilder.cpp looks suspicious.
> >The "found two shells in MinimalEdgeRing" exception was even
> >triggered by a recently closed bug.
> >
> >Could you reverse that and file a ticket explaining why you'd need
> >to disable it when building with NDEBUG ?
> 
> Strk,
> 
> The definition of shellCount was already:
> 
> #ifndef NDEBUG
> 	int shellCount=0;
> #endif
> 
> It seems clear, in context, that the shellCount related stuff was setup
> to be a debug-only build check.  I have no idea why. 

Ok, the correct fix is to remove the NDEBUG check around the declaration
of shellCount. It was like that because what is now an exception used
to be an assertion, but we found real world input data triggering it,
and Martin Davis agreed on turning that assertion into an exception
as it due to numerical stability and can thus be handled.

> All I did was
> extend things accordingly.  So I'm not really inclined to back it out,
> and file a ticket.  But if you think that the shellCount checks and
> corresponding exception should always be evaluated then I would suggest
> filing a ticket to that effect and we can remove all the #ifndef NDEBUG
> wrappers for shellCount stuff.

Yes, that's the way to go. 
We can avoid a ticket, but could you please commit the wrapper removal ?

NOTE: I know it's annoying to file tickets, but it is currently our
      only way to comment about changes in context. Maybe a commit mailing
      list would make that easier.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From warmerdam at pobox.com  Thu May 19 16:43:08 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 19 16:45:25 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <20110519202823.GM69193@keybit.net>
References: <20110511210923.GL39557@keybit.net>
	<BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>
	<4DD54D7D.1010208@pobox.com> <4DD570C4.7050002@pobox.com>
	<20110519195303.GI69193@keybit.net> <4DD57A7D.8020706@pobox.com>
	<20110519202823.GM69193@keybit.net>
Message-ID: <4DD580DC.3080800@pobox.com>

On 11-05-19 04:28 PM, Sandro Santilli wrote:
> Ok, the correct fix is to remove the NDEBUG check around the declaration
> of shellCount. It was like that because what is now an exception used
> to be an assertion, but we found real world input data triggering it,
> and Martin Davis agreed on turning that assertion into an exception
> as it due to numerical stability and can thus be handled.

Strk,

I have removed the #ifndef NDEBUG conditionals in the method (r3286)
and updated the existing ticket on the issue:

   http://trac.osgeo.org/geos/ticket/398

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Fri May 20 05:04:02 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri May 20 05:10:14 2011
Subject: [geos-devel] GEOS-3.3.0rc1 released
In-Reply-To: <20110519195303.GI69193@keybit.net>
References: <20110511210923.GL39557@keybit.net>	<BANLkTinFgP=C4CZeAehq-6Y81A0YnMiH0w@mail.gmail.com>	<4DD54D7D.1010208@pobox.com>
	<4DD570C4.7050002@pobox.com> <20110519195303.GI69193@keybit.net>
Message-ID: <4DD62E82.5050903@loskot.net>

On 19/05/11 20:53, Sandro Santilli wrote:
> On Thu, May 19, 2011 at 03:34:28PM -0400, Frank Warmerdam wrote:
>> Hopefully we could issue an RC2?
>
> We're also waiting for Mat's CMake fixes

I started merging outstanding patches last night, but I need to do it 
manually due to some parts rejected by patch util.
I'm completing it tonight.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From geos-trac at osgeo.org  Mon May 23 03:38:19 2011
From: geos-trac at osgeo.org (GEOS)
Date: Mon May 23 05:39:32 2011
Subject: [geos-devel] Re: [GEOS] #222: GEOS 3.0 won't link on ARM-EABI
	platform
In-Reply-To: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
References: <049.6e4246ab4b7f6c9a4effd3a2be850484@osgeo.org>
Message-ID: <058.c6c8f8cdf2ed538aaccb2d527cdc7800@osgeo.org>

#222: GEOS 3.0 won't link on ARM-EABI platform
-----------------------+----------------------------------------------------
 Reporter:  jcrepetto  |        Owner:  geos-devel@?              
     Type:  defect     |       Status:  closed                    
 Priority:  major      |    Milestone:  3.3.0                     
Component:  Default    |      Version:  3.1.1                     
 Severity:  Critical   |   Resolution:  fixed                     
 Keywords:             |  
-----------------------+----------------------------------------------------
Changes (by strk):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 r3372 should have fixed this. Feel free to reopen if not.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/222#comment:12>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Mon May 23 06:08:13 2011
From: strk at keybit.net (Sandro Santilli)
Date: Mon May 23 08:17:33 2011
Subject: [geos-devel] GEOS-3.3.0rc2 tagged in SVN, ready to publish
Message-ID: <20110523100813.GU85518@keybit.net>

Second release candidate for 3.3.0 tagged:
http://svn.osgeo.org/geos/tags/3.3.0rc2

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From bontepaarden at gmail.com  Mon May 23 07:41:29 2011
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon May 23 09:56:24 2011
Subject: [geos-devel] GEOS-3.3.0rc2 tagged in SVN, ready to publish
In-Reply-To: <20110523100813.GU85518@keybit.net>
References: <20110523100813.GU85518@keybit.net>
Message-ID: <BANLkTi=7-r1hU8x4G826P_wkmpz54NWQhQ@mail.gmail.com>

Hi all,

Unlike RC1 I can compile RC2 with VS2008 on Win7.
Thanks for that.
I do get 8 warnings, though.

BTW. I use makegdal_gen.bat from GDAL to create the VS2008 C++ project.

Now we can continue with upgrading MapWindow GIS.

Thanks,

Paul


*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2011/5/23 Sandro Santilli <strk@keybit.net>

> Second release candidate for 3.3.0 tagged:
> http://svn.osgeo.org/geos/tags/3.3.0rc2
>
> --strk;
>
>  ()   Free GIS & Flash consultant/developer
>  /\   http://strk.keybit.net/services.html
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/geos-devel/attachments/20110523/4b0a160f/attachment.html
From pramsey at opengeo.org  Tue May 24 16:46:09 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Tue May 24 20:50:07 2011
Subject: [geos-devel] GEOS-3.3.0rc2 tagged in SVN, ready to publish
In-Reply-To: <20110523100813.GU85518@keybit.net>
References: <20110523100813.GU85518@keybit.net>
Message-ID: <BANLkTik+tovif5r7hmc=srVFO6oBWK7qmw@mail.gmail.com>

Tarball available online

http://download.osgeo.org/geos/geos-3.3.0rc2.tar.bz2

P

On Mon, May 23, 2011 at 3:08 AM, Sandro Santilli <strk@keybit.net> wrote:
> Second release candidate for 3.3.0 tagged:
> http://svn.osgeo.org/geos/tags/3.3.0rc2
>
> --strk;
>
> ?() ? Free GIS & Flash consultant/developer
> ?/\ ? http://strk.keybit.net/services.html
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel
>
From strk at keybit.net  Wed May 25 04:01:46 2011
From: strk at keybit.net (Sandro Santilli)
Date: Wed May 25 08:42:39 2011
Subject: [geos-devel] GEOS-3.3.0rc2 call for test
Message-ID: <20110525080146.GA84453@keybit.net>

Second release candidate of GEOS-3.3.0 is available for download:
 http://download.osgeo.org/geos/geos-3.3.0rc2.tar.bz2

Fixes since rc1:
 - Reduced memory usage / leaks during prepared MultiPolygon operations 
 - Survive Inf/NaN ordinate values during overlay ops operations
 - Fix build on some platforms 
 - Fix bogus SineStarFactory::setNumArms
 - Include experimental CMake based build

Full list of changes since 3.2.x:
 http://trac.osgeo.org/geos/browser/tags/3.3.0rc2/NEWS

Again, a quiet week will make this final.
Please test and scream if you don't like it.

NOTE: positive feedback is not counted as "noise" :)

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From geos-trac at osgeo.org  Wed May 25 15:38:21 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 25 16:01:38 2011
Subject: [geos-devel] Re: [GEOS] #276: "make check" failed at geos_unit on
	mingw
In-Reply-To: <045.2a7367ebb36cc080bf31d34c4ead0fb6@osgeo.org>
References: <045.2a7367ebb36cc080bf31d34c4ead0fb6@osgeo.org>
Message-ID: <054.f39b29d280b61f8600cfc47ea9bec0ff@osgeo.org>

#276: "make check" failed at geos_unit on mingw
------------------------+---------------------------------------------------
 Reporter:  sanak       |        Owner:  geos-devel@?              
     Type:  defect      |       Status:  closed                    
 Priority:  major       |    Milestone:  3.3.0                     
Component:  Default     |      Version:  svn-trunk                 
 Severity:  Unassigned  |   Resolution:  fixed                     
 Keywords:  mingw       |  
------------------------+---------------------------------------------------
Changes (by robe):

  * status:  new => closed
  * resolution:  => fixed


Comment:

 This works for me, but my make check tests are failing on 4 tests.  I'll
 put as separate ticket.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/276#comment:8>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 25 15:40:17 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 25 16:03:42 2011
Subject: [geos-devel] Re: [GEOS] #440: xmltester failures under MingW 32 bit
In-Reply-To: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
References: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
Message-ID: <053.cbdb19589083bb0461ef2b3b22a91849@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------

Comment(by robe):

 With geos 3.3.0rc2 i still get 4 failures.  I'll attach my new log in case
 it's different.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440#comment:5>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Wed May 25 15:49:29 2011
From: geos-trac at osgeo.org (GEOS)
Date: Wed May 25 16:13:22 2011
Subject: [geos-devel] Re: [GEOS] #440: xmltester failures under MingW 32 bit
In-Reply-To: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
References: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
Message-ID: <053.109d6e7de9a98d26206120e3de7a3ae9@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------

Comment(by strk):

 Could you also check:

 {{{
 grep CXXFLAGS Makefile
 }}}

 I want to make sure -O2 is used. Also, which compiler version ?
 Both failing tests are very sensible to numeric robustness issues...

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440#comment:6>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Fri May 27 01:27:20 2011
From: geos-trac at osgeo.org (GEOS)
Date: Fri May 27 01:53:31 2011
Subject: [geos-devel] Re: [GEOS] #440: xmltester failures under MingW 32 bit
In-Reply-To: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
References: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
Message-ID: <053.2f95a3398cf9302e23123f9a1a98cf9a@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------

Comment(by robe):

 strk output is:


 {{{
 AM_CXXFLAGS =  -DGEOS_INLINE  -pedantic -Wall -ansi -Wno-long-long
 -ffloat-store
 CXXFLAGS = -g -O2

 }}}

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440#comment:7>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Fri May 27 03:09:05 2011
From: geos-trac at osgeo.org (GEOS)
Date: Fri May 27 03:40:38 2011
Subject: [geos-devel] Re: [GEOS] #440: xmltester failures under MingW 32 bit
In-Reply-To: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
References: <044.b5b5d7c77ab409e94004c3022f75d749@osgeo.org>
Message-ID: <053.4b02ceb41d0942619bca5cbeb54be06d@osgeo.org>

#440: xmltester failures under MingW 32 bit
------------------------+---------------------------------------------------
 Reporter:  robe        |       Owner:  geos-devel@?              
     Type:  defect      |      Status:  new                       
 Priority:  major       |   Milestone:  3.3.0                     
Component:  Default     |     Version:  svn-trunk                 
 Severity:  Unassigned  |    Keywords:  mingw                     
------------------------+---------------------------------------------------

Comment(by robe):

 Just for extra information:

 I'm running:
 gcc version 3.4.5 (mingw-vista special r3

 I'll try a newer one once I remember how I toggled back and forth between
 the 2 gccs before.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/440#comment:8>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From woklist at kyngchaos.com  Fri May 27 09:57:02 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri May 27 10:51:28 2011
Subject: [geos-devel] GEOS-3.3.0rc2 call for test
In-Reply-To: <20110525080146.GA84453@keybit.net>
References: <20110525080146.GA84453@keybit.net>
Message-ID: <E442CF82-C5AE-410C-9D10-C4ABADA0141F@kyngchaos.com>

The mac framework info.plist.in from r3376 didn't make it into the rc2 tarball.

On May 25, 2011, at 3:01 AM, Sandro Santilli wrote:

> Second release candidate of GEOS-3.3.0 is available for download:
> http://download.osgeo.org/geos/geos-3.3.0rc2.tar.bz2
> 
> Fixes since rc1:
> - Reduced memory usage / leaks during prepared MultiPolygon operations 
> - Survive Inf/NaN ordinate values during overlay ops operations
> - Fix build on some platforms 
> - Fix bogus SineStarFactory::setNumArms
> - Include experimental CMake based build
> 
> Full list of changes since 3.2.x:
> http://trac.osgeo.org/geos/browser/tags/3.3.0rc2/NEWS
> 
> Again, a quiet week will make this final.
> Please test and scream if you don't like it.
> 
> NOTE: positive feedback is not counted as "noise" :)
> 
> --strk;
> 
>  ()   Free GIS & Flash consultant/developer
>  /\   http://strk.keybit.net/services.html
> _______________________________________________
> geos-devel mailing list
> geos-devel@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/geos-devel

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what does that remind me of?  Ah, yes - life."

- Marvin


From strk at keybit.net  Fri May 27 10:23:56 2011
From: strk at keybit.net (Sandro Santilli)
Date: Fri May 27 11:19:52 2011
Subject: [geos-devel] GEOS-3.3.0rc2 call for test
In-Reply-To: <E442CF82-C5AE-410C-9D10-C4ABADA0141F@kyngchaos.com>
References: <20110525080146.GA84453@keybit.net>
	<E442CF82-C5AE-410C-9D10-C4ABADA0141F@kyngchaos.com>
Message-ID: <20110527142356.GE16715@keybit.net>

On Fri, May 27, 2011 at 08:57:02AM -0500, William Kyngesburye wrote:
> The mac framework info.plist.in from r3376 didn't make it into the
> rc2 tarball.

Fixed in trunk, thanks for noticing.
I hope this one Won't need another RC.
But you could test nightly snapshot tomorrow.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
From woklist at kyngchaos.com  Sat May 28 12:24:07 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat May 28 14:45:43 2011
Subject: [geos-devel] GEOS-3.3.0rc2 call for test
In-Reply-To: <20110527142356.GE16715@keybit.net>
References: <20110525080146.GA84453@keybit.net>
	<E442CF82-C5AE-410C-9D10-C4ABADA0141F@kyngchaos.com>
	<20110527142356.GE16715@keybit.net>
Message-ID: <9D51EB1A-38CF-46EF-8930-B6AFD2DF971B@kyngchaos.com>

On May 27, 2011, at 9:23 AM, Sandro Santilli wrote:

> On Fri, May 27, 2011 at 08:57:02AM -0500, William Kyngesburye wrote:
>> The mac framework info.plist.in from r3376 didn't make it into the
>> rc2 tarball.
> 
> Fixed in trunk, thanks for noticing.
> I hope this one Won't need another RC.
> But you could test nightly snapshot tomorrow.
> 
Yes, it's in the nightly.

Note: I added a patch for the framework build to fix the unit tests compilation.  Sorry for dragging out the release...

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From geos-trac at osgeo.org  Sat May 28 12:51:21 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sat May 28 15:14:26 2011
Subject: [geos-devel] Re: [GEOS] #299:
 geos::geom::CoordinateArraySequenceFactory unit test failing
In-Reply-To: <047.d99b68335c5950ad504ff227278ead4a@osgeo.org>
References: <047.d99b68335c5950ad504ff227278ead4a@osgeo.org>
Message-ID: <056.77d76e8c9de6d41467b1ea5b08482606@osgeo.org>

#299: geos::geom::CoordinateArraySequenceFactory unit test failing
----------------------------+-----------------------------------------------
 Reporter:  pramsey         |        Owner:  geos-devel@?              
     Type:  defect          |       Status:  new                       
 Priority:  major           |    Milestone:  3.3.0                     
Component:  Unit Tests      |      Version:  svn-trunk                 
 Severity:  Unassigned      |   Resolution:                            
 Keywords:  mac,macosx,osx  |  
----------------------------+-----------------------------------------------

Comment(by kyngchaos):

 ...as I suggested a while back, how about just add a note to compilation
 instructions to force GCC 4.0 when using Xcode 3.2 (on OS X 10.6)?  And
 it's really easy with the new cmake build in GEOS 3.3.

 I'm just too lazy to go any deeper into this (heck, I forgot about this
 bug until just now when getting ready for the 3.3 release).

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/299#comment:20>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From woklist at kyngchaos.com  Sat May 28 12:55:52 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat May 28 15:19:10 2011
Subject: [geos-devel] GEOS-3.3.0rc2 call for test
In-Reply-To: <9D51EB1A-38CF-46EF-8930-B6AFD2DF971B@kyngchaos.com>
References: <20110525080146.GA84453@keybit.net>
	<E442CF82-C5AE-410C-9D10-C4ABADA0141F@kyngchaos.com>
	<20110527142356.GE16715@keybit.net>
	<9D51EB1A-38CF-46EF-8930-B6AFD2DF971B@kyngchaos.com>
Message-ID: <D0F234EB-07AD-4AFF-9692-F08BAF2C3125@kyngchaos.com>

On May 28, 2011, at 11:24 AM, William Kyngesburye wrote:

> On May 27, 2011, at 9:23 AM, Sandro Santilli wrote:
> 
>> On Fri, May 27, 2011 at 08:57:02AM -0500, William Kyngesburye wrote:
>>> The mac framework info.plist.in from r3376 didn't make it into the
>>> rc2 tarball.
>> 
>> Fixed in trunk, thanks for noticing.
>> I hope this one Won't need another RC.
>> But you could test nightly snapshot tomorrow.
>> 
> Yes, it's in the nightly.
> 
> Note: I added a patch for the framework build to fix the unit tests compilation.  Sorry for dragging out the release...
> 

And, unit tests pass, after compiling with GCC 4.0 to work around http://trac.osgeo.org/geos/ticket/299.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no particular pleasure I shall kill every ___ I can until the war is over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of the allied nations devoted an entire year exclusively to hating the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war

From geos-trac at osgeo.org  Sat May 28 13:05:28 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sat May 28 15:29:13 2011
Subject: [geos-devel] Re: [GEOS] #299:
 geos::geom::CoordinateArraySequenceFactory unit test failing
In-Reply-To: <047.d99b68335c5950ad504ff227278ead4a@osgeo.org>
References: <047.d99b68335c5950ad504ff227278ead4a@osgeo.org>
Message-ID: <056.c631a19c6ff28906d6bea6e3f908d36f@osgeo.org>

#299: geos::geom::CoordinateArraySequenceFactory unit test failing
----------------------------+-----------------------------------------------
 Reporter:  pramsey         |        Owner:  geos-devel@?              
     Type:  defect          |       Status:  new                       
 Priority:  major           |    Milestone:  3.3.0                     
Component:  Unit Tests      |      Version:  svn-trunk                 
 Severity:  Unassigned      |   Resolution:                            
 Keywords:  mac,macosx,osx  |  
----------------------------+-----------------------------------------------

Comment(by strk):

 You mentioned on the mailing list that this bug is fixed by using GCC-4.0,
 right ?

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/299#comment:21>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From geos-trac at osgeo.org  Sat May 28 13:26:20 2011
From: geos-trac at osgeo.org (GEOS)
Date: Sat May 28 15:51:12 2011
Subject: [geos-devel] Re: [GEOS] #299:
 geos::geom::CoordinateArraySequenceFactory unit test failing
In-Reply-To: <047.d99b68335c5950ad504ff227278ead4a@osgeo.org>
References: <047.d99b68335c5950ad504ff227278ead4a@osgeo.org>
Message-ID: <056.0e9758ef14af7f8be774f1aaf5cf1fce@osgeo.org>

#299: geos::geom::CoordinateArraySequenceFactory unit test failing
----------------------------+-----------------------------------------------
 Reporter:  pramsey         |        Owner:  geos-devel@?              
     Type:  defect          |       Status:  new                       
 Priority:  major           |    Milestone:  3.3.0                     
Component:  Unit Tests      |      Version:  svn-trunk                 
 Severity:  Unassigned      |   Resolution:                            
 Keywords:  mac,macosx,osx  |  
----------------------------+-----------------------------------------------

Comment(by kyngchaos):

 As a workaround.  I still need to try it with QGIS compiled with GCC 4.2.
 Everything else (GDAL, MapServer, ...) uses the C API so they shouldn't
 have any problems with C++ version issues.

-- 
Ticket URL: <http://trac.osgeo.org/geos/ticket/299#comment:22>
GEOS <http://geos.refractions.net/>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).
From strk at keybit.net  Mon May 30 10:46:21 2011
From: strk at keybit.net (Sandro Santilli)
Date: Mon May 30 11:07:46 2011
Subject: [geos-devel] Announcing GEOS-3.3.0 and roadmap to 3.4.0
Message-ID: <20110530144621.GA62118@keybit.net>

GEOS 3.3.0 is out:
http://download.osgeo.org/geos/geos-3.3.0.tar.bz2

This release introduces a fair amount of new C-API interfaces
and a brand new PHP binding. Full details in the NEWS file:
http://trac.osgeo.org/geos/browser/tags/3.3.0/NEWS

As with any release since 3.0.0 there is complete binary
compatibility with clients linked against the C-API.
These include, but are not limited to, PostGIS.
For a list of known clients: http://trac.osgeo.org/geos/wiki/Applications
(add yours, if not already listed!)

GEOS is a C++ port of the JTS Topology Suite.
This release targets version 1.12 of the library, but doesn't reach full
feature parity yet. Missing JTS functionalities:

 From JTS-1.11

 - Densifier class
 - 'match' package, for geometric similarity detection
   (HausdorffSimilarityMeasure, AreaSimilarityMeasure)
 - MinimumDiameter.getMiminumRectangle()
 - Triangulation API
 - VoronoiDiagramBuilder
 - createSquircle and createSuperCircle in GeometricShapeFactory

 From JTS-1.12

 - MinimumClearance class
 - nearestNeighbours method to STRtree
 - RandomPointsBuilder / RandomPointsInGridBuilder
 - KochSnowflakeBuilder
 - SierpinksiCarpetBuilder

If you'd like to sponsor development of any of the above items (or others)
for next feature release of GEOS (3.4.0) please drop me a note.

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
