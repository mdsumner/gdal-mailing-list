From pramsey at cleverelephant.ca  Mon Jun  5 08:57:56 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon, 5 Jun 2023 08:57:56 -0700
Subject: [geos-devel] Release Time!
Message-ID: <CACowWR2f9Lspt6bMygDpn7DGqbd_VyPc8Njp-0akv75qABG-tA@mail.gmail.com>

I would like to get us to a 3.12 release state over the next few
weeks... are there tickets outstanding that anyone feels are critical
to release? Things you are working on that you'd like to complete?
Please call them out in this thread...

Thanks!

P

From pramsey at cleverelephant.ca  Wed Jun  7 09:10:38 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed, 7 Jun 2023 09:10:38 -0700
Subject: [geos-devel] Release Time!
In-Reply-To: <CACowWR2f9Lspt6bMygDpn7DGqbd_VyPc8Njp-0akv75qABG-tA@mail.gmail.com>
References: <CACowWR2f9Lspt6bMygDpn7DGqbd_VyPc8Njp-0akv75qABG-tA@mail.gmail.com>
Message-ID: <A8AAC92E-19DE-45AD-98D0-B8BCA2BD3EB9@cleverelephant.ca>

HotPixelIndex: Use STRtree instead of KdTree <https://github.com/libgeos/geos/pull/769>
CoordinateSequence: create using external buffer <https://github.com/libgeos/geos/pull/747>

These are both new-release worthy, but neither has generated much enthusiasm. Close? Dan?

P
 <https://github.com/libgeos/geos/pull/747#partial-pull-merging> <https://github.com/libgeos/geos/pull/747#partial-pull-merging>

> On Jun 5, 2023, at 8:57 AM, Paul Ramsey <pramsey at cleverelephant.ca> wrote:
> 
> I would like to get us to a 3.12 release state over the next few
> weeks... are there tickets outstanding that anyone feels are critical
> to release? Things you are working on that you'd like to complete?
> Please call them out in this thread...
> 
> Thanks!
> 
> P

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230607/4ad566b2/attachment.htm>

From pramsey at cleverelephant.ca  Wed Jun  7 09:12:13 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed, 7 Jun 2023 09:12:13 -0700
Subject: [geos-devel] Release Time!
In-Reply-To: <A8AAC92E-19DE-45AD-98D0-B8BCA2BD3EB9@cleverelephant.ca>
References: <CACowWR2f9Lspt6bMygDpn7DGqbd_VyPc8Njp-0akv75qABG-tA@mail.gmail.com>
 <A8AAC92E-19DE-45AD-98D0-B8BCA2BD3EB9@cleverelephant.ca>
Message-ID: <02367D38-6E63-4DC5-A3C8-C4A325D7FE71@cleverelephant.ca>

Nevermind, I see you?re way ahead of me pushing things into the 3.13 milestone, Dan :)

P

> On Jun 7, 2023, at 9:10 AM, Paul Ramsey <pramsey at cleverelephant.ca> wrote:
> 
> HotPixelIndex: Use STRtree instead of KdTree <https://github.com/libgeos/geos/pull/769>
> CoordinateSequence: create using external buffer <https://github.com/libgeos/geos/pull/747>
> 
> These are both new-release worthy, but neither has generated much enthusiasm. Close? Dan?
> 
> P
>  <https://github.com/libgeos/geos/pull/747#partial-pull-merging> <https://github.com/libgeos/geos/pull/747#partial-pull-merging>
> 
>> On Jun 5, 2023, at 8:57 AM, Paul Ramsey <pramsey at cleverelephant.ca> wrote:
>> 
>> I would like to get us to a 3.12 release state over the next few
>> weeks... are there tickets outstanding that anyone feels are critical
>> to release? Things you are working on that you'd like to complete?
>> Please call them out in this thread...
>> 
>> Thanks!
>> 
>> P
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230607/09978d4d/attachment.htm>

From pramsey at cleverelephant.ca  Wed Jun  7 10:52:42 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed, 7 Jun 2023 10:52:42 -0700
Subject: [geos-devel] 3.12.0beta1
Message-ID: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>

Any objections to my cutting a source release for packagers to play with?

P

From lr at pcorp.us  Wed Jun  7 11:00:53 2023
From: lr at pcorp.us (Regina Obe)
Date: Wed, 7 Jun 2023 14:00:53 -0400
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
Message-ID: <000501d9996a$00b0f340$0212d9c0$@pcorp.us>

No objection from me :)
Cut please

> -----Original Message-----
> From: geos-devel [mailto:geos-devel-bounces at lists.osgeo.org] On Behalf Of
> Paul Ramsey
> Sent: Wednesday, June 7, 2023 1:53 PM
> To: GEOS Development List <geos-devel at lists.osgeo.org>
> Subject: [geos-devel] 3.12.0beta1
> 
> Any objections to my cutting a source release for packagers to play with?
> 
> P
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From pramsey at cleverelephant.ca  Wed Jun  7 13:05:27 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed, 7 Jun 2023 13:05:27 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
Message-ID: <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>

First tagged release auto built and available at

https://github.com/libgeos/geos/releases/tag/3.12.0beta1

P.

> On Jun 7, 2023, at 11:00 AM, Regina Obe <lr at pcorp.us> wrote:
> 
> No objection from me :)
> Cut please
> 
>> -----Original Message-----
>> From: geos-devel [mailto:geos-devel-bounces at lists.osgeo.org] On Behalf Of
>> Paul Ramsey
>> Sent: Wednesday, June 7, 2023 1:53 PM
>> To: GEOS Development List <geos-devel at lists.osgeo.org>
>> Subject: [geos-devel] 3.12.0beta1
>> 
>> Any objections to my cutting a source release for packagers to play with?
>> 
>> P
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/geos-devel
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From gdt at lexort.com  Wed Jun  7 16:42:34 2023
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 07 Jun 2023 19:42:34 -0400
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca> (Paul
 Ramsey's message of "Wed, 7 Jun 2023 13:05:27 -0700")
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
Message-ID: <rmilegudel1.fsf@s1.lexort.com>

Paul Ramsey <pramsey at cleverelephant.ca> writes:

> First tagged release auto built and available at
>
> https://github.com/libgeos/geos/releases/tag/3.12.0beta1

distfile not found at standard release location but I fetched it
manually from github.

With the following changes, the package built.  The Makefile is just the
version change, and is of course fine.  The PLIST is basically about the
change in the set of installed files.  There are a surprising amount of
.h files coming and going.  I see some "new things" in NEWS, but the
withdrawals (mainly CoordinateArraySequenceFoo) are not really
explained.

Tests (netbsd 9 amd64) are a total train wreck, with nothign at all
passing, a sure sign of structural test issues.  I will try tests on the
most recent formal release.

Index: Makefile
===================================================================
RCS file: /cvsroot/pkgsrc/geography/geos/Makefile,v
retrieving revision 1.46
diff -u -p -r1.46 Makefile
--- Makefile	17 Mar 2023 15:16:47 -0000	1.46
+++ Makefile	7 Jun 2023 23:27:04 -0000
@@ -1,8 +1,8 @@
 # $NetBSD: Makefile,v 1.46 2023/03/17 15:16:47 gdt Exp $
 
-VERSION_BASE=	3.11.2
+VERSION_BASE=	3.12.0
 # Accomodate testing unreleased versions.
-#VERSION_RC=	rc0
+VERSION_RC=	beta1
 VERSION=	${VERSION_BASE}${VERSION_RC}
 DISTNAME=	geos-${VERSION}
 EXTRACT_SUFX=	.tar.bz2
Index: PLIST
===================================================================
RCS file: /cvsroot/pkgsrc/geography/geos/PLIST,v
retrieving revision 1.24
diff -u -p -r1.24 PLIST
--- PLIST	17 Mar 2023 15:16:47 -0000	1.24
+++ PLIST	7 Jun 2023 23:27:04 -0000
@@ -14,9 +14,11 @@ include/geos/algorithm/HCoordinate.h
 include/geos/algorithm/InteriorPointArea.h
 include/geos/algorithm/InteriorPointLine.h
 include/geos/algorithm/InteriorPointPoint.h
+include/geos/algorithm/Interpolate.h
 include/geos/algorithm/Intersection.h
 include/geos/algorithm/Length.h
 include/geos/algorithm/LineIntersector.h
+include/geos/algorithm/MinimumAreaRectangle.h
 include/geos/algorithm/MinimumBoundingCircle.h
 include/geos/algorithm/MinimumDiameter.h
 include/geos/algorithm/NotRepresentableException.h
@@ -26,7 +28,7 @@ include/geos/algorithm/PointLocation.h
 include/geos/algorithm/PointLocator.h
 include/geos/algorithm/PolygonNodeTopology.h
 include/geos/algorithm/RayCrossingCounter.h
-include/geos/algorithm/RayCrossingCounterDD.h
+include/geos/algorithm/Rectangle.h
 include/geos/algorithm/RobustDeterminant.h
 include/geos/algorithm/SimplePointInRing.h
 include/geos/algorithm/construct/LargestEmptyCircle.h
@@ -43,6 +45,19 @@ include/geos/algorithm/locate/IndexedPoi
 include/geos/algorithm/locate/PointOnGeometryLocator.h
 include/geos/algorithm/locate/SimplePointInAreaLocator.h
 include/geos/constants.h
+include/geos/coverage/Corner.h
+include/geos/coverage/CoverageBoundarySegmentFinder.h
+include/geos/coverage/CoverageEdge.h
+include/geos/coverage/CoverageGapFinder.h
+include/geos/coverage/CoveragePolygonValidator.h
+include/geos/coverage/CoverageRing.h
+include/geos/coverage/CoverageRingEdges.h
+include/geos/coverage/CoverageSimplifier.h
+include/geos/coverage/CoverageUnion.h
+include/geos/coverage/CoverageValidator.h
+include/geos/coverage/InvalidSegmentDetector.h
+include/geos/coverage/TPVWSimplifier.h
+include/geos/coverage/VertexRingCounter.h
 include/geos/edgegraph/EdgeGraph.h
 include/geos/edgegraph/EdgeGraphBuilder.h
 include/geos/edgegraph/HalfEdge.h
@@ -50,17 +65,14 @@ include/geos/edgegraph/MarkHalfEdge.h
 include/geos/export.h
 include/geos/geom.h
 include/geos/geom/Coordinate.h
-include/geos/geom/CoordinateArraySequence.h
-include/geos/geom/CoordinateArraySequenceFactory.h
 include/geos/geom/CoordinateFilter.h
 include/geos/geom/CoordinateList.h
 include/geos/geom/CoordinateSequence.h
-include/geos/geom/CoordinateSequenceFactory.h
 include/geos/geom/CoordinateSequenceFilter.h
-include/geos/geom/DefaultCoordinateSequenceFactory.h
+include/geos/geom/CoordinateSequenceIterator.h
+include/geos/geom/CoordinateSequences.h
 include/geos/geom/Dimension.h
 include/geos/geom/Envelope.h
-include/geos/geom/FixedSizeCoordinateSequence.h
 include/geos/geom/Geometry.h
 include/geos/geom/GeometryCollection.h
 include/geos/geom/GeometryComponentFilter.h
@@ -194,15 +206,20 @@ include/geos/index/sweepline/SweepLineOv
 include/geos/io/ByteOrderDataInStream.h
 include/geos/io/ByteOrderValues.h
 include/geos/io/CLocalizer.h
+include/geos/io/CheckOrdinatesFilter.h
 include/geos/io/GeoJSON.h
 include/geos/io/GeoJSONReader.h
 include/geos/io/GeoJSONWriter.h
+include/geos/io/OrdinateSet.h
 include/geos/io/ParseException.h
 include/geos/io/StringTokenizer.h
 include/geos/io/WKBConstants.h
 include/geos/io/WKBReader.h
+include/geos/io/WKBStreamReader.h
 include/geos/io/WKBWriter.h
+include/geos/io/WKTFileReader.h
 include/geos/io/WKTReader.h
+include/geos/io/WKTStreamReader.h
 include/geos/io/WKTWriter.h
 include/geos/io/Writer.h
 include/geos/linearref/ExtractLineByLocation.h
@@ -218,6 +235,7 @@ include/geos/linearref/LocationIndexedLi
 include/geos/math/DD.h
 include/geos/namespaces.h
 include/geos/noding/BasicSegmentString.h
+include/geos/noding/BoundaryChainNoder.h
 include/geos/noding/FastNodingValidator.h
 include/geos/noding/FastSegmentSetIntersectionFinder.h
 include/geos/noding/GeometryNoder.h
@@ -265,11 +283,22 @@ include/geos/operation/buffer/BufferPara
 include/geos/operation/buffer/BufferSubgraph.h
 include/geos/operation/buffer/OffsetCurve.h
 include/geos/operation/buffer/OffsetCurveBuilder.h
+include/geos/operation/buffer/OffsetCurveSection.h
 include/geos/operation/buffer/OffsetSegmentGenerator.h
 include/geos/operation/buffer/OffsetSegmentString.h
 include/geos/operation/buffer/RightmostEdgeFinder.h
 include/geos/operation/buffer/SegmentMCIndex.h
 include/geos/operation/buffer/SubgraphDepthLocater.h
+include/geos/operation/cluster/AbstractClusterFinder.h
+include/geos/operation/cluster/Clusters.h
+include/geos/operation/cluster/DBSCANClusterFinder.h
+include/geos/operation/cluster/DisjointOperation.h
+include/geos/operation/cluster/EnvelopeDistanceClusterFinder.h
+include/geos/operation/cluster/EnvelopeIntersectsClusterFinder.h
+include/geos/operation/cluster/GeometryDistanceClusterFinder.h
+include/geos/operation/cluster/GeometryFlattener.h
+include/geos/operation/cluster/GeometryIntersectsClusterFinder.h
+include/geos/operation/cluster/UnionFind.h
 include/geos/operation/distance/ConnectedElementLocationFilter.h
 include/geos/operation/distance/ConnectedElementPointFilter.h
 include/geos/operation/distance/DistanceOp.h
@@ -286,15 +315,9 @@ include/geos/operation/linemerge/LineMer
 include/geos/operation/linemerge/LineMergeGraph.h
 include/geos/operation/linemerge/LineMerger.h
 include/geos/operation/linemerge/LineSequencer.h
-include/geos/operation/overlay/EdgeSetNoder.h
-include/geos/operation/overlay/ElevationMatrix.h
-include/geos/operation/overlay/ElevationMatrixCell.h
-include/geos/operation/overlay/LineBuilder.h
 include/geos/operation/overlay/MaximalEdgeRing.h
 include/geos/operation/overlay/MinimalEdgeRing.h
 include/geos/operation/overlay/OverlayNodeFactory.h
-include/geos/operation/overlay/OverlayOp.h
-include/geos/operation/overlay/PointBuilder.h
 include/geos/operation/overlay/PolygonBuilder.h
 include/geos/operation/overlay/snap/GeometrySnapper.h
 include/geos/operation/overlay/snap/LineStringSnapper.h
@@ -352,6 +375,7 @@ include/geos/operation/relate/RelateOp.h
 include/geos/operation/sharedpaths/SharedPathsOp.h
 include/geos/operation/union/CascadedPolygonUnion.h
 include/geos/operation/union/CoverageUnion.h
+include/geos/operation/union/DisjointSubsetUnion.h
 include/geos/operation/union/OverlapUnion.h
 include/geos/operation/union/PointGeometryUnion.h
 include/geos/operation/union/UnaryUnionOp.h
@@ -363,7 +387,6 @@ include/geos/operation/valid/IsSimpleOp.
 include/geos/operation/valid/IsValidOp.h
 include/geos/operation/valid/MakeValid.h
 include/geos/operation/valid/PolygonIntersectionAnalyzer.h
-include/geos/operation/valid/PolygonNode.h
 include/geos/operation/valid/PolygonRing.h
 include/geos/operation/valid/PolygonRingSelfNode.h
 include/geos/operation/valid/PolygonRingTouch.h
@@ -397,6 +420,7 @@ include/geos/shape/fractal/MortonCode.h
 include/geos/simplify/DouglasPeuckerLineSimplifier.h
 include/geos/simplify/DouglasPeuckerSimplifier.h
 include/geos/simplify/LineSegmentIndex.h
+include/geos/simplify/LinkedLine.h
 include/geos/simplify/LinkedRing.h
 include/geos/simplify/PolygonHullSimplifier.h
 include/geos/simplify/RingHull.h
@@ -443,6 +467,7 @@ include/geos/util/TopologyException.h
 include/geos/util/UniqueCoordinateArrayFilter.h
 include/geos/util/UnsupportedOperationException.h
 include/geos/util/math.h
+include/geos/util/string.h
 include/geos/vend/include_nlohmann_json.hpp
 include/geos/vend/json.hpp
 include/geos/version.h
@@ -452,8 +477,8 @@ lib/cmake/GEOS/geos-config.cmake
 lib/cmake/GEOS/geos-targets-release.cmake
 lib/cmake/GEOS/geos-targets.cmake
 lib/libgeos.so
-lib/libgeos.so.${PKGVERSION}
+lib/libgeos.so.3.12.0
 lib/libgeos_c.so
 lib/libgeos_c.so.1
-lib/libgeos_c.so.1.17.2
+lib/libgeos_c.so.1.18.0
 lib/pkgconfig/geos.pc
Index: distinfo
===================================================================
RCS file: /cvsroot/pkgsrc/geography/geos/distinfo,v
retrieving revision 1.47
diff -u -p -r1.47 distinfo
--- distinfo	17 Mar 2023 15:16:47 -0000	1.47
+++ distinfo	7 Jun 2023 23:27:04 -0000
@@ -1,7 +1,7 @@
 $NetBSD: distinfo,v 1.47 2023/03/17 15:16:47 gdt Exp $
 
-BLAKE2s (geos-3.11.2.tar.bz2) = b77dc8b57196f9ed2cd2439ba32a9f19de8d895e57c007e3001914dcb500c49e
-SHA512 (geos-3.11.2.tar.bz2) = b5df5b773bef595335e1be6c6d3325f932f1577e2a4b8bdfa8cf26f09c7d41ed5e0695ca15826d1f95bc4a45b777839c2be8a96a8af5415c8bcf58cc804eb1ec
-Size (geos-3.11.2.tar.bz2) = 6774288 bytes
+BLAKE2s (geos-3.12.0beta1.tar.bz2) = ffce581f739e038571a795c042a07634b0a1c244acfb65440a9df77927b34a67
+SHA512 (geos-3.12.0beta1.tar.bz2) = e128e71cbfeb78a59649a808022ec110a7c65d90398982ba2619cd718a240059c94cc6249b84b18287b12e9ed9c9b65e1d05fd887735c4090c0aa954aafb4a54
+Size (geos-3.12.0beta1.tar.bz2) = 6718651 bytes
 SHA1 (patch-ae) = 253ae5cf5c2705a80d89d996507e3e94f2a11296
 SHA1 (patch-util_geosop_cxxopts.hpp) = 6da706852b026df7275be0a3caddadd1315f6e81

From gdt at lexort.com  Wed Jun  7 17:26:40 2023
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 07 Jun 2023 20:26:40 -0400
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca> (Paul
 Ramsey's message of "Wed, 7 Jun 2023 13:05:27 -0700")
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
Message-ID: <rmifs72dcjj.fsf@s1.lexort.com>

If I install the 3.12.0beta1 package, then the tests pass.  So there is
a bug, but it is that the tests appaprently refer to installed files,
rather than being controlled to use only files in the build tree.  This
requires alternate rpath processing, etc., and in the autoconf world is
usually handled by libtool relinking at install time.

Therefore, I have no reason to think 3.12.0beta1 is more troubled than
any previous release -- this is likely not a regression.

My only question then about 3.12.0beta1 is if the comings-and-goings
diff of .h files is what the authors intend.

I am kicking off a process to rebuild everything that depends on geos
(that I have installed, but that extends all the way to postis and
qgis).


From pramsey at cleverelephant.ca  Thu Jun  8 08:28:59 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 8 Jun 2023 08:28:59 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <rmifs72dcjj.fsf@s1.lexort.com>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <rmifs72dcjj.fsf@s1.lexort.com>
Message-ID: <1E212C02-B73C-44A9-8B4F-9C4B12D65BE8@cleverelephant.ca>



> On Jun 7, 2023, at 5:26 PM, Greg Troxel <gdt at lexort.com> wrote:
> 
> If I install the 3.12.0beta1 package, then the tests pass.  So there is
> a bug, but it is that the tests appaprently refer to installed files,
> rather than being controlled to use only files in the build tree.  

We had this out last release, it?s specific to a particular OS. Happy to look over a cmake patch.

https://lists.osgeo.org/pipermail/geos-devel/2022-June/010723.html


> This
> requires alternate rpath processing, etc., and in the autoconf world is
> usually handled by libtool relinking at install time.
> 
> Therefore, I have no reason to think 3.12.0beta1 is more troubled than
> any previous release -- this is likely not a regression.
> 
> My only question then about 3.12.0beta1 is if the comings-and-goings
> diff of .h files is what the authors intend.

Probably! I?ll look at that diff.

P

> 
> I am kicking off a process to rebuild everything that depends on geos
> (that I have installed, but that extends all the way to postis and
> qgis).
> 


From pramsey at cleverelephant.ca  Thu Jun  8 08:34:06 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 8 Jun 2023 08:34:06 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <1E212C02-B73C-44A9-8B4F-9C4B12D65BE8@cleverelephant.ca>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <rmifs72dcjj.fsf@s1.lexort.com>
 <1E212C02-B73C-44A9-8B4F-9C4B12D65BE8@cleverelephant.ca>
Message-ID: <68A0227C-29BB-417E-B1E6-D859215671C9@cleverelephant.ca>



> On Jun 8, 2023, at 8:28 AM, Paul Ramsey <pramsey at cleverelephant.ca> wrote:
> 
>> My only question then about 3.12.0beta1 is if the comings-and-goings
>> diff of .h files is what the authors intend.
> 
> Probably! I?ll look at that diff.

Yep, all changes confirmed. We?re a header-happy project.

P
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230608/3a75fec8/attachment-0001.htm>

From gdt at lexort.com  Thu Jun  8 08:42:00 2023
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 08 Jun 2023 11:42:00 -0400
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <1E212C02-B73C-44A9-8B4F-9C4B12D65BE8@cleverelephant.ca> (Paul
 Ramsey's message of "Thu, 8 Jun 2023 08:28:59 -0700")
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <rmifs72dcjj.fsf@s1.lexort.com>
 <1E212C02-B73C-44A9-8B4F-9C4B12D65BE8@cleverelephant.ca>
Message-ID: <rmicz269d13.fsf@s1.lexort.com>

Paul Ramsey <pramsey at cleverelephant.ca> writes:

>> On Jun 7, 2023, at 5:26 PM, Greg Troxel <gdt at lexort.com> wrote:
>> 
>> If I install the 3.12.0beta1 package, then the tests pass.  So there is
>> a bug, but it is that the tests appaprently refer to installed files,
>> rather than being controlled to use only files in the build tree.  
>
> We had this out last release, it?s specific to a particular OS. Happy to look over a cmake patch.
>
> https://lists.osgeo.org/pipermail/geos-devel/2022-June/010723.html

I didn't remember anything from the last release...

Are you saying that on every other OS, including some other BSD, that if
one has installed to a prefix not in the default search paths, and has
the old version installed, and runs the tests after building the new
version, that they succeed?  I did not absorb that from reading the
archives.

I am not particularly skilled at cmake, but I did find a note (that I
managed not to read this time) that the problem is misordering RPATH
args, so that the rpath passed in from a packaging system that says to
find any depending libs in $prefix/lib happens before the special test
rpath that says to get libs from something like builddir/lib.  If that's
true, this isn't OS specific (and is a regression from the autotools
build).

But I understand where you are coming from as ENOPATCH.


From pramsey at cleverelephant.ca  Thu Jun  8 08:45:51 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 8 Jun 2023 08:45:51 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <rmicz269d13.fsf@s1.lexort.com>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <rmifs72dcjj.fsf@s1.lexort.com>
 <1E212C02-B73C-44A9-8B4F-9C4B12D65BE8@cleverelephant.ca>
 <rmicz269d13.fsf@s1.lexort.com>
Message-ID: <98CECEC0-BC47-4499-962A-4120A187DDB5@cleverelephant.ca>



> On Jun 8, 2023, at 8:42 AM, Greg Troxel <gdt at lexort.com> wrote:
> 
> Paul Ramsey <pramsey at cleverelephant.ca> writes:
> 
>>> On Jun 7, 2023, at 5:26 PM, Greg Troxel <gdt at lexort.com> wrote:
>>> 
>>> If I install the 3.12.0beta1 package, then the tests pass.  So there is
>>> a bug, but it is that the tests appaprently refer to installed files,
>>> rather than being controlled to use only files in the build tree.  
>> 
>> We had this out last release, it?s specific to a particular OS. Happy to look over a cmake patch.
>> 
>> https://lists.osgeo.org/pipermail/geos-devel/2022-June/010723.html
> 
> I didn't remember anything from the last release...
> 
> Are you saying that on every other OS, including some other BSD, that if
> one has installed to a prefix not in the default search paths, and has
> the old version installed, and runs the tests after building the new
> version, that they succeed?  I did not absorb that from reading the
> archives.

This is what I?m saying, though I personally only sling MacOS and Linux regularly. You?re the only one I have heard complaints about our source tarballs from on this issue.

> I am not particularly skilled at cmake, but I did find a note (that I
> managed not to read this time) that the problem is misordering RPATH
> args, so that the rpath passed in from a packaging system that says to
> find any depending libs in $prefix/lib happens before the special test
> rpath that says to get libs from something like builddir/lib.  If that's
> true, this isn't OS specific (and is a regression from the autotools
> build).

> 
> But I understand where you are coming from as ENOPATCH.

Er, not sure what that means. If it means I think things are *mostly* fine, then yes. I?d like for you also to not have problems running build/check but I lack the visibility on the problem to attack it personally.

P.

From sebastic at xs4all.nl  Thu Jun  8 08:47:40 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 8 Jun 2023 17:47:40 +0200
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
Message-ID: <3e1753e1-17e0-b1be-73b9-12840da212b7@xs4all.nl>

On 6/7/23 22:05, Paul Ramsey wrote:
> First tagged release auto built and available at
> 
> https://github.com/libgeos/geos/releases/tag/3.12.0beta1
When can we expect the tarballs at:

  https://download.osgeo.org/geos/

?

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From pramsey at cleverelephant.ca  Thu Jun  8 08:59:15 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 8 Jun 2023 08:59:15 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <3e1753e1-17e0-b1be-73b9-12840da212b7@xs4all.nl>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <3e1753e1-17e0-b1be-73b9-12840da212b7@xs4all.nl>
Message-ID: <CACowWR0agKvjOrTgwwXZxkZbrU3WqSOGQHcLAFG8CZM8ODpDQQ@mail.gmail.com>

If that's required I can do that now...

On Thu, Jun 8, 2023 at 8:58?AM Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
>
> On 6/7/23 22:05, Paul Ramsey wrote:
> > First tagged release auto built and available at
> >
> > https://github.com/libgeos/geos/releases/tag/3.12.0beta1
> When can we expect the tarballs at:
>
>   https://download.osgeo.org/geos/
>
> ?
>
> --
>   GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel

From pramsey at cleverelephant.ca  Thu Jun  8 09:00:35 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 8 Jun 2023 09:00:35 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <CACowWR0agKvjOrTgwwXZxkZbrU3WqSOGQHcLAFG8CZM8ODpDQQ@mail.gmail.com>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <3e1753e1-17e0-b1be-73b9-12840da212b7@xs4all.nl>
 <CACowWR0agKvjOrTgwwXZxkZbrU3WqSOGQHcLAFG8CZM8ODpDQQ@mail.gmail.com>
Message-ID: <B458C734-E875-4E20-98F5-4F7EF2B18695@cleverelephant.ca>

done

curl -I https://download.osgeo.org/geos/geos-3.12.0beta1.tar.bz2

HTTP/2 200 
server: nginx/1.18.0 (Ubuntu)
date: Thu, 08 Jun 2023 16:00:18 GMT
content-type: application/octet-stream
content-length: 6718651
last-modified: Wed, 07 Jun 2023 19:24:17 GMT
etag: "6480d961-6684bb"
accept-ranges: bytes
front-end-https: on


> On Jun 8, 2023, at 8:59 AM, Paul Ramsey <pramsey at cleverelephant.ca> wrote:
> 
> If that's required I can do that now...
> 
> On Thu, Jun 8, 2023 at 8:58?AM Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
>> 
>> On 6/7/23 22:05, Paul Ramsey wrote:
>>> First tagged release auto built and available at
>>> 
>>> https://github.com/libgeos/geos/releases/tag/3.12.0beta1
>> When can we expect the tarballs at:
>> 
>>  https://download.osgeo.org/geos/
>> 
>> ?
>> 
>> --
>>  GPG Key ID: 4096R/6750F10AE88D4AF1
>> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
>> 
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/geos-devel


From sebastic at xs4all.nl  Thu Jun  8 09:16:38 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 8 Jun 2023 18:16:38 +0200
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <B458C734-E875-4E20-98F5-4F7EF2B18695@cleverelephant.ca>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <3e1753e1-17e0-b1be-73b9-12840da212b7@xs4all.nl>
 <CACowWR0agKvjOrTgwwXZxkZbrU3WqSOGQHcLAFG8CZM8ODpDQQ@mail.gmail.com>
 <B458C734-E875-4E20-98F5-4F7EF2B18695@cleverelephant.ca>
Message-ID: <bffed77e-1f05-0c91-6c10-b5029250db90@xs4all.nl>

On 6/8/23 18:00, Paul Ramsey wrote:
> done
Thanks.

Can src/coverage/CoverageBoundarySegmentFinder.cpp be relicensed to 
match the rest of GEOS instead of JTS? Or should we expect more EPL-2.0 
or EDL-1.0 licensed files to get incorporated from JTS?

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From pramsey at cleverelephant.ca  Thu Jun  8 09:18:41 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 8 Jun 2023 09:18:41 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <bffed77e-1f05-0c91-6c10-b5029250db90@xs4all.nl>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <3e1753e1-17e0-b1be-73b9-12840da212b7@xs4all.nl>
 <CACowWR0agKvjOrTgwwXZxkZbrU3WqSOGQHcLAFG8CZM8ODpDQQ@mail.gmail.com>
 <B458C734-E875-4E20-98F5-4F7EF2B18695@cleverelephant.ca>
 <bffed77e-1f05-0c91-6c10-b5029250db90@xs4all.nl>
Message-ID: <66240F81-136A-40FF-A832-AFD65A0487A8@cleverelephant.ca>


> On Jun 8, 2023, at 9:16 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
> 
> On 6/8/23 18:00, Paul Ramsey wrote:
>> done
> Thanks.
> 
> Can src/coverage/CoverageBoundarySegmentFinder.cpp be relicensed to match the rest of GEOS instead of JTS? Or should we expect more EPL-2.0 or EDL-1.0 licensed files to get incorporated from JTS?

Done. Just copy pasta.
Thanks,
P


From sebastic at xs4all.nl  Thu Jun  8 09:41:21 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 8 Jun 2023 18:41:21 +0200
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
Message-ID: <55e73043-b86d-1d9f-8caf-57eb49c25323@xs4all.nl>

test_docs fails:

  test 466
          Start 466: test_docs

  466: Test command: /usr/bin/cmake "-D" 
"DOXYGEN_LOGFILE="/build/geos-3.12.0~beta1/build/doxygen/doxygen.log"" 
"-P" "/build/geos-3.12.0~beta1/build/doxygen/check_doxygen_errors.cmake"
  466: Working Directory: /build/geos-3.12.0~beta1/build/doxygen
  466: Test timeout computed to be: 1500
  [...]
  466: -- Doxygen issued 2476 warning(s), see 
/build/geos-3.12.0~beta1/build/doxygen/doxygen.log
  [...]
  466: CMake Error at check_doxygen_errors.cmake:44 (message):
  466: 
/build/geos-3.12.0~beta1/include/geos/coverage/CoverageRingEdges.h:76:
  466:   warning: found documented return type for
  466:   geos::coverage::CoverageRingEdges::CoverageRingEdges that does 
not return
  466:   anything
  466:
  466:
  [...]
  464/466 Test #466: test_docs 
..................................................***Failed    0.08 sec
  -- Doxygen issued 2476 warning(s), see 
/build/geos-3.12.0~beta1/build/doxygen/doxygen.log
  CMake Error at check_doxygen_errors.cmake:44 (message):
    /build/geos-3.12.0~beta1/include/geos/coverage/CoverageRingEdges.h:76:
    warning: found documented return type for
    geos::coverage::CoverageRingEdges::CoverageRingEdges that does not 
return
    anything
  [...]
  99% tests passed, 1 tests failed out of 466

  Total Test time (real) =   9.26 sec

  The following tests FAILED:
          466 - test_docs (Failed)
  Errors while running CTest

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From pramsey at cleverelephant.ca  Thu Jun  8 14:30:06 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 8 Jun 2023 14:30:06 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <55e73043-b86d-1d9f-8caf-57eb49c25323@xs4all.nl>
References: <E958C745-29B2-4A45-A9C0-8894DFE3B784@cleverelephant.ca>
 <000501d9996a$00b0f340$0212d9c0$@pcorp.us>
 <EB37CB08-B3A2-485F-BBB9-B25C85DD1722@cleverelephant.ca>
 <55e73043-b86d-1d9f-8caf-57eb49c25323@xs4all.nl>
Message-ID: <CACowWR2Gkr1R9i5nX52HGpg9uOz0+7M+BWtUjKsVPiZbzgZRMw@mail.gmail.com>

>     /build/geos-3.12.0~beta1/include/geos/coverage/CoverageRingEdges.h:76:
>     warning: found documented return type for
>     geos::coverage::CoverageRingEdges::CoverageRingEdges that does not
> return
>     anything

Should be good now.

From Roger.Bivand at nhh.no  Mon Jun 12 05:03:16 2023
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Mon, 12 Jun 2023 12:03:16 +0000
Subject: [geos-devel] 3.12.0beta1
Message-ID: <SV0P279MB0475CC2F586DDA899E4CB386EE54A@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

An R packages built against GEOS is showing new test failures with 3.12.0beta1. The important terra package fails first at a union on a buffered object, other failures may occur later, but testing stops at first error. The error is:

Error: IllegalArgumentException: Overlay input is mixed-dimension

The abbreviated input in R is:

library(terra)
gdal(lib="geos")
# [1] "3.12.0beta1"
v <- vect(system.file("ex/lux.shp", package="terra"))
b <- buffer(v, 1000) # 1000m even though v are in degrees
u <- union(b)
# Error: IllegalArgumentException: Overlay input is mixed-dimension

The input shapefile may be found at https://github.com/rspatial/terra/tree/master/inst/ex/lux.*

I'm unsure whether this is change intentional, should I provide a WKT of the shapefile geometries, possibly planar?

Best wishes,

Roger

--
Roger Bivand
Emeritus Professor
Norwegian School of Economics
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
Roger.Bivand at nhh.no

From dbaston at gmail.com  Mon Jun 12 06:01:02 2023
From: dbaston at gmail.com (Daniel Baston)
Date: Mon, 12 Jun 2023 09:01:02 -0400
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <SV0P279MB0475CC2F586DDA899E4CB386EE54A@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
References: <SV0P279MB0475CC2F586DDA899E4CB386EE54A@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
Message-ID: <CA+K_q_q_y_AGUajaBQ-Sxudy8xEQVGrjBUo4evoSTitCGFDH3g@mail.gmail.com>

Thanks for raising this. There was some discussion of the issue at
https://github.com/libgeos/geos/issues/797 and other tickets linked from
there, but it was never really resolved.

Dan

On Mon, Jun 12, 2023 at 8:52?AM Roger Bivand <Roger.Bivand at nhh.no> wrote:

> An R packages built against GEOS is showing new test failures with
> 3.12.0beta1. The important terra package fails first at a union on a
> buffered object, other failures may occur later, but testing stops at first
> error. The error is:
>
> Error: IllegalArgumentException: Overlay input is mixed-dimension
>
> The abbreviated input in R is:
>
> library(terra)
> gdal(lib="geos")
> # [1] "3.12.0beta1"
> v <- vect(system.file("ex/lux.shp", package="terra"))
> b <- buffer(v, 1000) # 1000m even though v are in degrees
> u <- union(b)
> # Error: IllegalArgumentException: Overlay input is mixed-dimension
>
> The input shapefile may be found at
> https://github.com/rspatial/terra/tree/master/inst/ex/lux.*
>
> I'm unsure whether this is change intentional, should I provide a WKT of
> the shapefile geometries, possibly planar?
>
> Best wishes,
>
> Roger
>
> --
> Roger Bivand
> Emeritus Professor
> Norwegian School of Economics
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
> Roger.Bivand at nhh.no
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230612/cc2769a6/attachment.htm>

From pramsey at cleverelephant.ca  Tue Jun 13 09:00:29 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 13 Jun 2023 09:00:29 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <CA+K_q_q_y_AGUajaBQ-Sxudy8xEQVGrjBUo4evoSTitCGFDH3g@mail.gmail.com>
References: <SV0P279MB0475CC2F586DDA899E4CB386EE54A@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
 <CA+K_q_q_y_AGUajaBQ-Sxudy8xEQVGrjBUo4evoSTitCGFDH3g@mail.gmail.com>
Message-ID: <CDB59C1A-D10E-4087-AA45-E713CCF95190@cleverelephant.ca>

I have taken a swipe at it here.

https://github.com/libgeos/geos/pull/923



> On Jun 12, 2023, at 6:01 AM, Daniel Baston <dbaston at gmail.com> wrote:
> 
> Thanks for raising this. There was some discussion of the issue at https://github.com/libgeos/geos/issues/797 and other tickets linked from there, but it was never really resolved.
> 
> Dan
> 
> On Mon, Jun 12, 2023 at 8:52?AM Roger Bivand <Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>> wrote:
>> An R packages built against GEOS is showing new test failures with 3.12.0beta1. The important terra package fails first at a union on a buffered object, other failures may occur later, but testing stops at first error. The error is:
>> 
>> Error: IllegalArgumentException: Overlay input is mixed-dimension
>> 
>> The abbreviated input in R is:
>> 
>> library(terra)
>> gdal(lib="geos")
>> # [1] "3.12.0beta1"
>> v <- vect(system.file("ex/lux.shp", package="terra"))
>> b <- buffer(v, 1000) # 1000m even though v are in degrees
>> u <- union(b)
>> # Error: IllegalArgumentException: Overlay input is mixed-dimension
>> 
>> The input shapefile may be found at https://github.com/rspatial/terra/tree/master/inst/ex/lux.*
>> 
>> I'm unsure whether this is change intentional, should I provide a WKT of the shapefile geometries, possibly planar?
>> 
>> Best wishes,
>> 
>> Roger
>> 
>> --
>> Roger Bivand
>> Emeritus Professor
>> Norwegian School of Economics
>> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
>> Roger.Bivand at nhh.no <mailto:Roger.Bivand at nhh.no>
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org <mailto:geos-devel at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/geos-devel
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230613/cc123982/attachment.htm>

From Roger.Bivand at nhh.no  Wed Jun 14 01:26:11 2023
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 14 Jun 2023 08:26:11 +0000
Subject: [geos-devel] 3.12.0beta1
Message-ID: <SV0P279MB0475769872C331E60165FD64EE5AA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

Thanks, Paul, for responding so quickly.

Having built GEOS with https://github.com/pramsey/geos/tree/main-collection-overlay, the issues in released and development versions of R package terra appear resolved.

The sf package remains unaffected by 3.12.

Roger

--
Roger Bivand
Emeritus Professor
Norwegian School of Economics
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
Roger.Bivand at nhh.no

From pramsey at cleverelephant.ca  Wed Jun 14 11:56:49 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed, 14 Jun 2023 11:56:49 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <SV0P279MB0475769872C331E60165FD64EE5AA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
References: <SV0P279MB0475769872C331E60165FD64EE5AA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
Message-ID: <9350FCC3-1EC0-4CC8-B8BF-62580B1EF4F0@cleverelephant.ca>



> On Jun 14, 2023, at 1:26 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> Thanks, Paul, for responding so quickly.
> 
> Having built GEOS with https://github.com/pramsey/geos/tree/main-collection-overlay, the issues in released and development versions of R package terra appear resolved.

Super, thanks for testing. I have merged the PR.

P

> 
> The sf package remains unaffected by 3.12.
> 
> Roger
> 
> --
> Roger Bivand
> Emeritus Professor
> Norwegian School of Economics
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
> Roger.Bivand at nhh.no
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From pramsey at cleverelephant.ca  Wed Jun 14 12:57:52 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed, 14 Jun 2023 12:57:52 -0700
Subject: [geos-devel] 3.12.0beta2
Message-ID: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>

Thank you everyone who tested and gave feedback on the first beta
release. Having incorporated all the feedback thus far, the next beta
is available:

https://download.osgeo.org/geos/geos-3.12.0beta2.tar.bz2

Thanks again,
P

From gdt at lexort.com  Thu Jun 15 06:10:32 2023
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 15 Jun 2023 09:10:32 -0400
Subject: [geos-devel] 3.12.0beta2
In-Reply-To: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
 (Paul Ramsey's message of "Wed, 14 Jun 2023 12:57:52 -0700")
References: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
Message-ID: <rmipm5weurb.fsf@s1.lexort.com>

This is of course not a request to hold the release; just a comment on
something that I don't yet understand.  I am able to run tests by
installing the just built geos and then running them.


The plot thickens on the meta test issues.  I built on RPI3 under
NetBSD; geos had not been previously installed (because that CPU, 1 GB
RAM, and no monitor or keyboard makes for a poor qgis experience!).  The
tests all failed, which if the issue was rpath order should not be.  I
then looked into the build dir:

/usr/pkgsrc/geography/geos/work/geos-3.12.0beta2/bin $ ldd test_xmltester 
test_xmltester:
        -lgeos.3.12.0 => not found
        -lstdc++.9 => /usr/lib/libstdc++.so.9
        -lm.0 => /usr/lib/libm.so.0
        -lc.12 => /usr/lib/libc.so.12

objdump says

  NEEDED               libgeos.so.3.12.0
  NEEDED               libstdc++.so.9
  NEEDED               libm.so.0
  NEEDED               libc.so.12
  RPATH                /usr/pkg/lib

which is ok for an installed program, but not one that intends to use a
library from the build tree.

I see 'make test' runs ctest, but I can't follow how that is supposed to
set up LD_LIBRARY_PATH to pre-load from the built but not installed
library.  I can't find 'LD_LIBR' by grepping the source tree.  I know
autoconf/libtool links once in the tree and relinks at install time --
but I do not have the impression cmake does it that way.

I wonder if for others, tests work from a build, in the case of no geos
at all installed on the system, and what ldd/objdump says on
bin/test_xmltester after building.

Can anyone explain the theory of how the tests are run linking against
the just-built library instead of one that is (or is not) installed in
the system?

From gdt at lexort.com  Thu Jun 15 06:30:14 2023
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 15 Jun 2023 09:30:14 -0400
Subject: [geos-devel] 3.12.0beta2
References: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
Message-ID: <rmih6r8etuh.fsf@s1.lexort.com>

I have no clear memory of whether I ever tried to build geos or run
tests on RPI3 before.  I have a very very vague memory of having trouble
and never having chased it down.  So I am definitely not asking that the
release be held for this!

> https://download.osgeo.org/geos/geos-3.12.0beta2.tar.bz2

I am using

  gcc version 7.5.0 (nb4 20200810) 

On NetBSD 9 amd64, after installing it, tests all pass.

  [snip]
          Start 466: xml-validate-TestRelatePP
  466/466 Test #466: xml-validate-TestRelatePP ..................................   Passed    0.01 sec

  100% tests passed, 0 tests failed out of 466

  Total Test time (real) =  20.89 sec

On NetBSD 9 earmv7hf-el (RPI3 hardware, specifically), after installing
it, most but not all tests pass.   I ran it twice with the same results

  96% tests passed, 18 tests failed out of 465

  Total Test time (real) = 111.91 sec

  The following tests did not run:
          377 - xml-issue-issue-geos-837 (Disabled)

  The following tests FAILED:
           25 - unit-algorithm-construct-MaximumInscribedCircle (Subprocess aborted)
           32 - unit-capi-GEOSBuffer (Subprocess aborted)
           35 - unit-capi-GEOSClipByRect (Subprocess aborted)
           42 - unit-capi-GEOSCoordSeq (Subprocess aborted)
           62 - unit-capi-GEOSGeomGeoJSONRead (Subprocess aborted)
           94 - unit-capi-GEOSInterrupt (Subprocess aborted)
          104 - unit-capi-GEOSMaximumInscribedCircle (Subprocess aborted)
          140 - unit-capi-GEOSUnaryUnion (Subprocess aborted)
          143 - unit-capi-GEOSUnion (Subprocess aborted)
          168 - unit-geom-Dimension (Subprocess aborted)
          212 - unit-io-GeoJSONReader (Subprocess aborted)
          233 - unit-operation-buffer-BufferOp (Subprocess aborted)
          240 - unit-operation-distance-IndexedFacetDistance (Subprocess aborted)
          300 - xml-general-TestBuffer (Subprocess aborted)
          305 - xml-general-TestDensify (Subprocess aborted)
          361 - xml-issue-issue-geos-366 (Subprocess aborted)
          373 - xml-issue-issue-geos-605 (Subprocess aborted)
          399 - xml-misc-safe-TestBufferJagged (Subprocess aborted)
  Errors while running CTest
  Output from these tests are in: /d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/Testing/Temporary/LastTest.log
  Use "--rerun-failed --output-on-failure" to re-run the failed cases verbosely.
  gmake[4]: *** [Makefile:91: test] Error 8
  gmake[4]: Leaving directory '/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2'
  *** Error code 2

Looking at the logs (at end), overall this smells like either a
systematic issue where the floating point on my system is broken, or
there is some slight floating point difference from x86, and geos tests
are very sensitive to exact FP results.  But that's just guessing.

I'm building for NetBSD 9 i386 and will also try macOS x86_64.

FWIW, I ran paranoia and got:

  No failures, defects nor flaws have been discovered.
  Rounding appears to conform to the proposed IEEE standard P754.
  The arithmetic diagnosed appears to be Excellent!

I am curious if others have been running tests on CPUs other than x86,
and on those systems, if other than GNU/Linux.



Here's the output of "ctest --rerun-failed --output-on-failure":
----------------------------------------
Test project /usr/pkgsrc/geography/geos/work/geos-3.12.0beta2
      Start  25: unit-algorithm-construct-MaximumInscribedCircle
 1/18 Test  #25: unit-algorithm-construct-MaximumInscribedCircle ...Subprocess aborted***Exception:   0.40 sec
===============================
  GEOS Unit Test Suite
===============================

geos::algorithm::construct::MaximumInscribedCircle: .......terminate called after throwing an instance of 'geos::util::GEOSException'
  what():  Non-finite envelope encountered.

      Start  32: unit-capi-GEOSBuffer
 2/18 Test  #32: unit-capi-GEOSBuffer ..............................Subprocess aborted***Exception:   0.09 sec
===============================
  GEOS Unit Test Suite
===============================

capi::GEOSBuffer: .....................NOTICE: IllegalArgumentException: Invalid buffer endCap style
NOTICE: IllegalArgumentException: Invalid buffer join style
.terminate called after throwing an instance of 'geos::util::GEOSException'
  what():  Shell empty after removing invalid points

      Start  35: unit-capi-GEOSClipByRect
 3/18 Test  #35: unit-capi-GEOSClipByRect ..........................Subprocess aborted***Exception:   0.09 sec
===============================
  GEOS Unit Test Suite
===============================

capi::GEOSClipByRect: .............terminate called after throwing an instance of 'geos::util::IllegalArgumentException'
  what():  IllegalArgumentException: Invalid number of points in LinearRing found 3 - must be 0 or >= 4

      Start  42: unit-capi-GEOSCoordSeq
 4/18 Test  #42: unit-capi-GEOSCoordSeq ............................Subprocess aborted***Exception:   0.08 sec
===============================
  GEOS Unit Test Suite
===============================

capi::GEOSCoordSeq: ..terminate called after throwing an instance of 'geos::util::IllegalArgumentException'
  what():  IllegalArgumentException: Unknown ordinate index 37

      Start  62: unit-capi-GEOSGeomGeoJSONRead
 5/18 Test  #62: unit-capi-GEOSGeomGeoJSONRead .....................Subprocess aborted***Exception:   0.09 sec
===============================
  GEOS Unit Test Suite
===============================

capi::GEOSGeomGeoJSONRead: ..terminate called after throwing an instance of 'geos_nlohmann::detail::parse_error'
  what():  [json.exception.parse_error.101] parse error at line 1, column 1: syntax error while parsing value - invalid literal; last read: '<'

      Start  94: unit-capi-GEOSInterrupt
 6/18 Test  #94: unit-capi-GEOSInterrupt ...........................Subprocess aborted***Exception:   0.09 sec
===============================
  GEOS Unit Test Suite
===============================

capi::GEOSInterrupt: ...terminate called after throwing an instance of 'geos::util::InterruptedException'
  what():  InterruptedException: Interrupted!

      Start 104: unit-capi-GEOSMaximumInscribedCircle
 7/18 Test #104: unit-capi-GEOSMaximumInscribedCircle ..............Subprocess aborted***Exception:   0.09 sec
===============================
  GEOS Unit Test Suite
===============================

capi::GEOSMaximumInscribedCircle: ..terminate called after throwing an instance of 'geos::util::GEOSException'
  what():  Non-finite envelope encountered.

      Start 140: unit-capi-GEOSUnaryUnion
 8/18 Test #140: unit-capi-GEOSUnaryUnion ..........................Subprocess aborted***Exception:   0.09 sec
===============================
  GEOS Unit Test Suite
===============================

capi::GEOSUnaryUnion: ........terminate called after throwing an instance of 'geos::util::GEOSException'
  what():  Edge direction cannot be determined because endpoints are equal

      Start 143: unit-capi-GEOSUnion
 9/18 Test #143: unit-capi-GEOSUnion ...............................Subprocess aborted***Exception:   0.08 sec
===============================
  GEOS Unit Test Suite
===============================

capi::GEOSUnion: .terminate called after throwing an instance of 'geos::util::GEOSException'
  what():  Edge direction cannot be determined because endpoints are equal

      Start 168: unit-geom-Dimension
10/18 Test #168: unit-geom-Dimension ...............................Subprocess aborted***Exception:   0.08 sec
===============================
  GEOS Unit Test Suite
===============================

geos::geom::Dimension: ..terminate called after throwing an instance of 'geos::util::IllegalArgumentException'
  what():  IllegalArgumentException: Unknown dimension value: 101


      Start 212: unit-io-GeoJSONReader
11/18 Test #212: unit-io-GeoJSONReader .............................Subprocess aborted***Exception:   0.10 sec
===============================
  GEOS Unit Test Suite
===============================

geos::io::GeoJSONReader: ......................terminate called after throwing an instance of 'geos_nlohmann::detail::parse_error'
  what():  [json.exception.parse_error.101] parse error at line 1, column 1: syntax error while parsing value - invalid literal; last read: '<'

      Start 233: unit-operation-buffer-BufferOp
12/18 Test #233: unit-operation-buffer-BufferOp ....................Subprocess aborted***Exception:   0.15 sec
===============================
  GEOS Unit Test Suite
===============================

geos::operation::buffer::BufferOp: ..........terminate called after throwing an instance of 'geos::util::TopologyException'
  what():  TopologyException: assigned depths do not match at -22625.315179557714 130450.31702346609

      Start 240: unit-operation-distance-IndexedFacetDistance
13/18 Test #240: unit-operation-distance-IndexedFacetDistance ......Subprocess aborted***Exception:   3.01 sec
===============================
  GEOS Unit Test Suite
===============================

geos::operation::distance::IndexedFacetDistance: ..........terminate called after throwing an instance of 'geos::util::GEOSException'
  what():  Cannot calculate IndexedFacetDistance on empty geometries.

      Start 300: xml-general-TestBuffer
14/18 Test #300: xml-general-TestBuffer ............................Subprocess aborted***Exception:   0.12 sec
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case1: test1: buffer(A, -1.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case1: test2: buffer(A, 0.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case1: test3: buffer(A, 10.0): ok. (3 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case2: test1: buffer(A, -1.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case2: test2: buffer(A, 0.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case2: test3: buffer(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case3: test1: buffer(A, -100.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case3: test2: buffer(A, -10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case3: test3: buffer(A, 0.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case3: test4: buffer(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case3: test5: buffer(A, 20.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case3: test6: buffer(A, 100.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case4: test1: buffer(A, -100.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case4: test2: buffer(A, -10.0): ok. (1 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case4: test3: buffer(A, 0.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case4: test4: buffer(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case4: test5: buffer(A, 20.0): ok. (1 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestBuffer.xml: case4: test6: buffer(A, 100.0): ok. (0 ms)
terminate called after throwing an instance of 'geos::util::TopologyException'
  what():  TopologyException: assigned depths do not match at 1335583.1400354072 631780.66133557539

      Start 305: xml-general-TestDensify
15/18 Test #305: xml-general-TestDensify ...........................Subprocess aborted***Exception:   0.05 sec
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case1: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case2: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case3: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case4: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case5: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case6: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case7: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case8: test1: densify(A, 2.999999): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case9: test1: densify(A, 6): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case10: test1: densify(A, 6): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case11: test1: densify(A, 6): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case12: test1: densify(A, 3): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case13: test1: densify(A, 2.999999): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case14: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case15: test1: densify(A, 5.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case16: test1: densify(A, 2.999999): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case17: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case18: test1: densify(A, 5.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case19: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case20: test1: densify(A, 5.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case21: test1: densify(A, 2.999999): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case22: test1: densify(A, 10.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case23: test1: densify(A, 5.0): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case24: test1: densify(A, 2.999999): ok. (0 ms)
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/general/TestDensify.xml: case25: test1: densify(A, 0): ok. (0 ms)
terminate called after throwing an instance of 'geos::util::GEOSException'
  what():  Tolerance is too small compared to geometry length

      Start 361: xml-issue-issue-geos-366
16/18 Test #361: xml-issue-issue-geos-366 ..........................Subprocess aborted***Exception:   0.06 sec
terminate called after throwing an instance of 'geos::util::TopologyException'
  what():  TopologyException: unable to find edge to compute depths at at -200016.32214116989 249553.4006244911

      Start 373: xml-issue-issue-geos-605
17/18 Test #373: xml-issue-issue-geos-605 ..........................Subprocess aborted***Exception:   0.06 sec
terminate called after throwing an instance of 'geos::util::TopologyException'
  what():  TopologyException: assigned depths do not match at 374252.37027537922 6136822.6948443819

      Start 399: xml-misc-safe-TestBufferJagged
18/18 Test #399: xml-misc-safe-TestBufferJagged ....................Subprocess aborted***Exception:   2.04 sec
/d0/n0/pkgsrc/geography/geos/work/geos-3.12.0beta2/tests/xmltester/tests/misc/safe-TestBufferJagged.xml: case1: test1: buffer(a, 0.35): ok. (100 ms)
terminate called after throwing an instance of 'geos::util::TopologyException'
  what():  TopologyException: assigned depths do not match at 99725.701985377294 -2239208.6167892241


0% tests passed, 18 tests failed out of 18

Total Test time (real) =   6.94 sec

The following tests FAILED:
	 25 - unit-algorithm-construct-MaximumInscribedCircle (Subprocess aborted)
	 32 - unit-capi-GEOSBuffer (Subprocess aborted)
	 35 - unit-capi-GEOSClipByRect (Subprocess aborted)
	 42 - unit-capi-GEOSCoordSeq (Subprocess aborted)
	 62 - unit-capi-GEOSGeomGeoJSONRead (Subprocess aborted)
	 94 - unit-capi-GEOSInterrupt (Subprocess aborted)
	104 - unit-capi-GEOSMaximumInscribedCircle (Subprocess aborted)
	140 - unit-capi-GEOSUnaryUnion (Subprocess aborted)
	143 - unit-capi-GEOSUnion (Subprocess aborted)
	168 - unit-geom-Dimension (Subprocess aborted)
	212 - unit-io-GeoJSONReader (Subprocess aborted)
	233 - unit-operation-buffer-BufferOp (Subprocess aborted)
	240 - unit-operation-distance-IndexedFacetDistance (Subprocess aborted)
	300 - xml-general-TestBuffer (Subprocess aborted)
	305 - xml-general-TestDensify (Subprocess aborted)
	361 - xml-issue-issue-geos-366 (Subprocess aborted)
	373 - xml-issue-issue-geos-605 (Subprocess aborted)
	399 - xml-misc-safe-TestBufferJagged (Subprocess aborted)
Errors while running CTest

From pramsey at cleverelephant.ca  Thu Jun 15 07:48:49 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 15 Jun 2023 07:48:49 -0700
Subject: [geos-devel] 3.12.0beta2
In-Reply-To: <rmih6r8etuh.fsf@s1.lexort.com>
References: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
 <rmih6r8etuh.fsf@s1.lexort.com>
Message-ID: <CACowWR0H7a=_+Vij4skqHfYgASoL0iOrK90c1z8nW5+PN87ZPQ@mail.gmail.com>

On Thu, Jun 15, 2023 at 6:30?AM Greg Troxel <gdt at lexort.com> wrote:

> Looking at the logs (at end), overall this smells like either a
> systematic issue where the floating point on my system is broken, or
> there is some slight floating point difference from x86, and geos tests
> are very sensitive to exact FP results.  But that's just guessing.

In terms of CI, it's linux/windows/macos all on Intel. In terms of
development, there's me on MacOS AppleSilicon, so getting a little
Arm64 in there. It's possible there's something special about the
floating point in the RPI3, but there's also a failure in
unit-io-GeoJSONReader in there, which ... is not doing any heavy
lifting. So I duno. As with other fun platforms I'm always open to
patches. :)

P

From pramsey at cleverelephant.ca  Thu Jun 15 08:33:08 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 15 Jun 2023 08:33:08 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <9350FCC3-1EC0-4CC8-B8BF-62580B1EF4F0@cleverelephant.ca>
References: <SV0P279MB0475769872C331E60165FD64EE5AA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
 <9350FCC3-1EC0-4CC8-B8BF-62580B1EF4F0@cleverelephant.ca>
Message-ID: <CACowWR1-ns3ehe+CR8MxuNLH-TkX6WLbObgrWLc79Q4j2XHt4Q@mail.gmail.com>

Roger, if you could check the current 3.11 branch against your tests,
that would be very helpful.

https://github.com/libgeos/geos/tree/3.11

There is a patch in there for an issue that appeared in some very rare
cases in PostGIS that I think might be an issue in your use cases, and
I'd like to confirm that the change is benign for you.

P

On Wed, Jun 14, 2023 at 11:57?AM Paul Ramsey <pramsey at cleverelephant.ca> wrote:
>
>
>
> > On Jun 14, 2023, at 1:26 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> >
> > Thanks, Paul, for responding so quickly.
> >
> > Having built GEOS with https://github.com/pramsey/geos/tree/main-collection-overlay, the issues in released and development versions of R package terra appear resolved.
>
> Super, thanks for testing. I have merged the PR.
>
> P
>
> >
> > The sf package remains unaffected by 3.12.
> >
> > Roger
> >
> > --
> > Roger Bivand
> > Emeritus Professor
> > Norwegian School of Economics
> > Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
> > Roger.Bivand at nhh.no
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/geos-devel
>

From lr at pcorp.us  Thu Jun 15 08:46:50 2023
From: lr at pcorp.us (Regina Obe)
Date: Thu, 15 Jun 2023 11:46:50 -0400
Subject: [geos-devel] 3.12.0beta2
In-Reply-To: <CACowWR0H7a=_+Vij4skqHfYgASoL0iOrK90c1z8nW5+PN87ZPQ@mail.gmail.com>
References: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
 <rmih6r8etuh.fsf@s1.lexort.com>
 <CACowWR0H7a=_+Vij4skqHfYgASoL0iOrK90c1z8nW5+PN87ZPQ@mail.gmail.com>
Message-ID: <000901d99fa0$9a198dd0$ce4ca970$@pcorp.us>

> On Thu, Jun 15, 2023 at 6:30?AM Greg Troxel <gdt at lexort.com> wrote:
> 
> > Looking at the logs (at end), overall this smells like either a
> > systematic issue where the floating point on my system is broken, or
> > there is some slight floating point difference from x86, and geos
> > tests are very sensitive to exact FP results.  But that's just guessing.
> 
> In terms of CI, it's linux/windows/macos all on Intel. In terms of development,
> there's me on MacOS AppleSilicon, so getting a little
> Arm64 in there. It's possible there's something special about the floating point
> in the RPI3, but there's also a failure in unit-io-GeoJSONReader in there, which
> ... is not doing any heavy lifting. So I duno. As with other fun platforms I'm
> always open to patches. :)
> 
> P

We do have 2 rasberry Pis (Arm64 and Arm32) running debian bullseye testing - berrie and berrie64
And those look to be showing successes.  But not sure about the endian.

https://libgeos.org/project/development/ci_status/


I think we've had issues in past specific to big endian.


From gdt at lexort.com  Thu Jun 15 08:51:48 2023
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 15 Jun 2023 11:51:48 -0400
Subject: [geos-devel] 3.12.0beta2
In-Reply-To: <000901d99fa0$9a198dd0$ce4ca970$@pcorp.us> (Regina Obe's message
 of "Thu, 15 Jun 2023 11:46:50 -0400")
References: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
 <rmih6r8etuh.fsf@s1.lexort.com>
 <CACowWR0H7a=_+Vij4skqHfYgASoL0iOrK90c1z8nW5+PN87ZPQ@mail.gmail.com>
 <000901d99fa0$9a198dd0$ce4ca970$@pcorp.us>
Message-ID: <rmibkhgwwob.fsf@s1.lexort.com>

"Regina Obe" <lr at pcorp.us> writes:

>> On Thu, Jun 15, 2023 at 6:30?AM Greg Troxel <gdt at lexort.com> wrote:
>> 
>> > Looking at the logs (at end), overall this smells like either a
>> > systematic issue where the floating point on my system is broken, or
>> > there is some slight floating point difference from x86, and geos
>> > tests are very sensitive to exact FP results.  But that's just guessing.
>> 
>> In terms of CI, it's linux/windows/macos all on Intel. In terms of development,
>> there's me on MacOS AppleSilicon, so getting a little
>> Arm64 in there. It's possible there's something special about the floating point
>> in the RPI3, but there's also a failure in unit-io-GeoJSONReader in there, which
>> ... is not doing any heavy lifting. So I duno. As with other fun platforms I'm
>> always open to patches. :)
>
> We do have 2 rasberry Pis (Arm64 and Arm32) running debian bullseye testing - berrie and berrie64
> And those look to be showing successes.  But not sure about the endian.
>
> https://libgeos.org/project/development/ci_status/

Interesting.  Raspberry Pi culture is very much to run LE, and I have
never heard of Debian doing BE on RPI.  NetBSD people do occasionally,
just to be difficult, I mean to help with testing.

> I think we've had issues in past specific to big endian.

I would expect so absent testing.  Someday(tm) I will have an emulated
sparc64 to run tests on.

For now, I think the project should just keep my report in mind in case
there are similar, but I don't think it's reasonable to ask anyone to do
anything, mostly.

My only suggestion for the CI page is:

  Avoid using '32-bit' and '64-bit' as if that describes a CPU type,
  using i386/x86_64 for PCs and armv7/aarch64 (or some such) for
  RPI/ARM.

but that's just being picky about wording, not anything real.

From Roger.Bivand at nhh.no  Thu Jun 15 12:08:19 2023
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Jun 2023 19:08:19 +0000
Subject: [geos-devel] 3.12.0beta1
Message-ID: <SV0P279MB0475BB4E4B4092504F0EF282EE5BA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

Paul, will try tomorrow morning my time. Does this 3.11 contain the fix for gcc 13 - I had to switch to devel on upgrading to Fedora 38 so if that commit is also present here, it should be feasible, if not rather harder.

Roger

--
Roger Bivand
Emeritus Professor
Norwegian School of Economics
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
Roger.Bivand at nhh.no

From sean.gillies at gmail.com  Thu Jun 15 12:18:19 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Thu, 15 Jun 2023 13:18:19 -0600
Subject: [geos-devel] 3.12.0beta2
In-Reply-To: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
References: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
Message-ID: <CAOodmJptR1r4umAVXdn9+pjEmJO2tnZpDfTw2cY6Z5dP6Cp5zw@mail.gmail.com>

Hi Paul,

The GEOSMinimumRotatedEnvelope algorithm change affects some Shapely tests,
but I don't see any other problems. We're likely to change the tests to
match the new implementation.

Beta2 looks good from here!

On Wed, Jun 14, 2023 at 2:01?PM Paul Ramsey <pramsey at cleverelephant.ca>
wrote:

> Thank you everyone who tested and gave feedback on the first beta
> release. Having incorporated all the feedback thus far, the next beta
> is available:
>
> https://download.osgeo.org/geos/geos-3.12.0beta2.tar.bz2
>
> Thanks again,
> P
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230615/4a4b992d/attachment.htm>

From pramsey at cleverelephant.ca  Thu Jun 15 12:24:12 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 15 Jun 2023 12:24:12 -0700
Subject: [geos-devel] 3.12.0beta2
In-Reply-To: <CAOodmJptR1r4umAVXdn9+pjEmJO2tnZpDfTw2cY6Z5dP6Cp5zw@mail.gmail.com>
References: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
 <CAOodmJptR1r4umAVXdn9+pjEmJO2tnZpDfTw2cY6Z5dP6Cp5zw@mail.gmail.com>
Message-ID: <FB8A8F80-8E7A-4700-B093-555E669819B1@cleverelephant.ca>



> On Jun 15, 2023, at 12:18 PM, Sean Gillies <sean.gillies at gmail.com> wrote:
> 
> The GEOSMinimumRotatedEnvelope algorithm change affects some Shapely tests, but I don't see any other problems. We're likely to change the tests to match the new implementation.

Super! Yes, this new implementation is ?different but better? than the old one. We had some tickets that explicitly pointed out places the old one was wrong.

P


From pramsey at cleverelephant.ca  Thu Jun 15 12:26:54 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu, 15 Jun 2023 12:26:54 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <SV0P279MB0475BB4E4B4092504F0EF282EE5BA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
References: <SV0P279MB0475BB4E4B4092504F0EF282EE5BA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
Message-ID: <D3003DBB-6EA0-49FB-B944-F046116824BC@cleverelephant.ca>



> On Jun 15, 2023, at 12:08 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> Paul, will try tomorrow morning my time. Does this 3.11 contain the fix for gcc 13 - I had to switch to devel on upgrading to Fedora 38 so if that commit is also present here, it should be feasible, if not rather harder.

There are patches for gcc 13 in the head of the 3.11 branch, so hopefully will just Work.

P

> 
> Roger
> 
> --
> Roger Bivand
> Emeritus Professor
> Norwegian School of Economics
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
> Roger.Bivand at nhh.no


From andrew.d.hershberger at gmail.com  Thu Jun 15 17:42:04 2023
From: andrew.d.hershberger at gmail.com (Andrew Hershberger)
Date: Fri, 16 Jun 2023 00:42:04 +0000
Subject: [geos-devel] 3.12.0beta2
In-Reply-To: <FB8A8F80-8E7A-4700-B093-555E669819B1@cleverelephant.ca>
References: <CACowWR1qk4y6tQb11D4EO1xjOUbem2jJoh0_Jhq0+SOcOqF21Q@mail.gmail.com>
 <CAOodmJptR1r4umAVXdn9+pjEmJO2tnZpDfTw2cY6Z5dP6Cp5zw@mail.gmail.com>
 <FB8A8F80-8E7A-4700-B093-555E669819B1@cleverelephant.ca>
Message-ID: <lixuf19q.c3ee5426-2de9-4633-8139-24fdd0aa0cae@we.are.superhuman.com>

Beta 2 works as expected with GEOSwift.

Sent via Superhuman ( https://sprh.mn/?vip=andrew.d.hershberger at gmail.com )

On Thu, Jun 15, 2023 at 3:24 PM, Paul Ramsey < pramsey at cleverelephant.ca > wrote:

> 
> 
>> 
>> 
>> On Jun 15, 2023, at 12:18 PM, Sean Gillies < sean. gillies@ gmail. com (
>> sean.gillies at gmail.com ) > wrote:
>> 
>> 
>> 
>> The GEOSMinimumRotatedEnvelope algorithm change affects some Shapely
>> tests, but I don't see any other problems. We're likely to change the
>> tests to match the new implementation.
>> 
>> 
> 
> 
> 
> Super! Yes, this new implementation is ?different but better? than the old
> one. We had some tickets that explicitly pointed out places the old one
> was wrong.
> 
> 
> 
> P
> 
> 
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel@ lists. osgeo. org ( geos-devel at lists.osgeo.org )
> https:/ / lists. osgeo. org/ mailman/ listinfo/ geos-devel (
> https://lists.osgeo.org/mailman/listinfo/geos-devel )
> 
> 
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230616/e3f11ba1/attachment-0001.htm>

From Roger.Bivand at nhh.no  Fri Jun 16 08:03:15 2023
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 16 Jun 2023 15:03:15 +0000
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <D3003DBB-6EA0-49FB-B944-F046116824BC@cleverelephant.ca>
References: <SV0P279MB0475BB4E4B4092504F0EF282EE5BA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
 <D3003DBB-6EA0-49FB-B944-F046116824BC@cleverelephant.ca>
Message-ID: <SV0P279MB0475F4915C08AC97B35AC4A3EE58A@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

Using the https://github.com/libgeos/geos/tree/3.11 codebase, I'm afraid that the same issue was present with the R terra package as in 3.12.0beta1 reported earlier. Following defensive changes in the development version of terra, its current HEAD does however pass. 

Both released and development versions of terra pass with 3.12.0beta2. 

I think that this means that the 3.11 branch does not have the mitigations for the multiple dimension problem.

Roger

--
Roger Bivand
Emeritus Professor
Norwegian School of Economics
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
Roger.Bivand at nhh.no

________________________________________
From: Paul Ramsey <pramsey at cleverelephant.ca>
Sent: 15 June 2023 21:26
To: Roger Bivand
Cc: geos-devel at lists.osgeo.org; Robert Hijmans; Edzer Pebesma
Subject: Re: [geos-devel] 3.12.0beta1



> On Jun 15, 2023, at 12:08 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>
> Paul, will try tomorrow morning my time. Does this 3.11 contain the fix for gcc 13 - I had to switch to devel on upgrading to Fedora 38 so if that commit is also present here, it should be feasible, if not rather harder.

There are patches for gcc 13 in the head of the 3.11 branch, so hopefully will just Work.

P

>
> Roger
>
> --
> Roger Bivand
> Emeritus Professor
> Norwegian School of Economics
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
> Roger.Bivand at nhh.no


From pramsey at cleverelephant.ca  Fri Jun 16 08:13:29 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Fri, 16 Jun 2023 08:13:29 -0700
Subject: [geos-devel] 3.12.0beta1
In-Reply-To: <SV0P279MB0475F4915C08AC97B35AC4A3EE58A@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
References: <SV0P279MB0475BB4E4B4092504F0EF282EE5BA@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
 <D3003DBB-6EA0-49FB-B944-F046116824BC@cleverelephant.ca>
 <SV0P279MB0475F4915C08AC97B35AC4A3EE58A@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>
Message-ID: <40BC6CF7-3504-4100-A3D2-A50C514BCA8D@cleverelephant.ca>



> On Jun 16, 2023, at 8:03 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> Using the https://github.com/libgeos/geos/tree/3.11 codebase, I'm afraid that the same issue was present with the R terra package as in 3.12.0beta1 reported earlier. Following defensive changes in the development version of terra, its current HEAD does however pass. 
> 
> Both released and development versions of terra pass with 3.12.0beta2. 
> 
> I think that this means that the 3.11 branch does not have the mitigations for the multiple dimension problem.

Well, the fix for a separate problem brings this one up to visibility. Going to have to wriggle around to find an optimum compromise.
Thanks for confirming!

P


> 
> Roger
> 
> --
> Roger Bivand
> Emeritus Professor
> Norwegian School of Economics
> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
> Roger.Bivand at nhh.no
> 
> ________________________________________
> From: Paul Ramsey <pramsey at cleverelephant.ca>
> Sent: 15 June 2023 21:26
> To: Roger Bivand
> Cc: geos-devel at lists.osgeo.org; Robert Hijmans; Edzer Pebesma
> Subject: Re: [geos-devel] 3.12.0beta1
> 
> 
> 
>> On Jun 15, 2023, at 12:08 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
>> 
>> Paul, will try tomorrow morning my time. Does this 3.11 contain the fix for gcc 13 - I had to switch to devel on upgrading to Fedora 38 so if that commit is also present here, it should be feasible, if not rather harder.
> 
> There are patches for gcc 13 in the head of the 3.11 branch, so hopefully will just Work.
> 
> P
> 
>> 
>> Roger
>> 
>> --
>> Roger Bivand
>> Emeritus Professor
>> Norwegian School of Economics
>> Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
>> Roger.Bivand at nhh.no
> 


From pramsey at cleverelephant.ca  Mon Jun 19 15:04:17 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon, 19 Jun 2023 15:04:17 -0700
Subject: [geos-devel] 3.12 release warning
Message-ID: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>

Please, test 3.12beta2 and let us know if you?re finding any issues, I am planning to release 3.12 at the end of the week, if there are no reports of issues with the last beta release.

P.

From sebastic at xs4all.nl  Mon Jun 19 20:20:03 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 20 Jun 2023 05:20:03 +0200
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
Message-ID: <807be2ba-b97f-e352-4a8d-b14d6b849673@xs4all.nl>

On 6/20/23 00:04, Paul Ramsey wrote:
> Please, test 3.12beta2 and let us know if you?re finding any issues, I am planning to release 3.12 at the end of the week, if there are no reports of issues with the last beta release.

Going straight from beta to release without one or more RC in between?

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From pramsey at cleverelephant.ca  Tue Jun 20 08:49:16 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 20 Jun 2023 08:49:16 -0700
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <807be2ba-b97f-e352-4a8d-b14d6b849673@xs4all.nl>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
 <807be2ba-b97f-e352-4a8d-b14d6b849673@xs4all.nl>
Message-ID: <12C04064-73B9-4350-B74A-76AC79772E67@cleverelephant.ca>



> On Jun 19, 2023, at 8:20 PM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
> 
> On 6/20/23 00:04, Paul Ramsey wrote:
>> Please, test 3.12beta2 and let us know if you?re finding any issues, I am planning to release 3.12 at the end of the week, if there are no reports of issues with the last beta release.
> 
> Going straight from beta to release without one or more RC in between?

Yes, that?s just the kind of dirty mess I am.
As of now, there are zero (0) changes since beta2, so I?m not pushing any untested changes. If there are any changes, I?ll push another tarball, whether it be called ?rc1? or ?beta3? seems a second order concern.
ATB,
P.



> 
> Kind Regards,
> 
> Bas
> 
> -- 
> GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From sebastic at xs4all.nl  Tue Jun 20 08:55:25 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 20 Jun 2023 17:55:25 +0200
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
Message-ID: <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>

On 6/20/23 00:04, Paul Ramsey wrote:
> Please, test 3.12beta2 and let us know if you?re finding any issues, I am planning to release 3.12 at the end of the week, if there are no reports of issues with the last beta release.

r-cran-rgeos 0.6-1 is failing its test suite with beta2:

  https://qa.debian.org/excuses.php?experimental=1&package=geos

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From pramsey at cleverelephant.ca  Tue Jun 20 08:58:35 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 20 Jun 2023 08:58:35 -0700
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
 <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>
Message-ID: <2F53C836-754C-4F42-8170-FC0C839A9AB0@cleverelephant.ca>



> On Jun 20, 2023, at 8:55 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
> 
> On 6/20/23 00:04, Paul Ramsey wrote:
>> Please, test 3.12beta2 and let us know if you?re finding any issues, I am planning to release 3.12 at the end of the week, if there are no reports of issues with the last beta release.
> 
> r-cran-rgeos 0.6-1 is failing its test suite with beta2:
> 
> https://qa.debian.org/excuses.php?experimental=1&package=geos

Can you break this down for me? What GEOS function is failing on what inputs? I cannot do a lot with 
> run-unit-test        FAIL non-zero exit status 1
Thanks!

P


> 
> Kind Regards,
> 
> Bas
> 
> -- 
> GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From sebastic at xs4all.nl  Tue Jun 20 09:16:04 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 20 Jun 2023 18:16:04 +0200
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <2F53C836-754C-4F42-8170-FC0C839A9AB0@cleverelephant.ca>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
 <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>
 <2F53C836-754C-4F42-8170-FC0C839A9AB0@cleverelephant.ca>
Message-ID: <8fdae57c-34e8-4fb8-af3d-ad858a1b50b5@xs4all.nl>

On 6/20/23 17:58, Paul Ramsey wrote:
>> On Jun 20, 2023, at 8:55 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
>> On 6/20/23 00:04, Paul Ramsey wrote:
>>> Please, test 3.12beta2 and let us know if you?re finding any issues, I am planning to release 3.12 at the end of the week, if there are no reports of issues with the last beta release.
>>
>> r-cran-rgeos 0.6-1 is failing its test suite with beta2:
>>
>> https://qa.debian.org/excuses.php?experimental=1&package=geos
> 
> Can you break this down for me? What GEOS function is failing on what inputs? I cannot do a lot with
>> run-unit-test        FAIL non-zero exit status 1
> Thanks!

You need to scroll up for the output of the failing test:

autopkgtest [23:08:41]: test run-unit-test: [-----------------------

R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
Copyright (C) 2023 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

 > library(testthat)
 > library(rgeos)
Loading required package: sp
rgeos version: 0.6-1, (SVN revision 692)
  GEOS runtime version: 3.12.0beta2-CAPI-1.18.0
  Please note that rgeos will be retired during 2023,
plan transition to sf functions using GEOS at your earliest convenience.
  GEOS using OverlayNG
  Linking to sp version: 1.5-1
  Polygon checking: TRUE

Warning message:
In fun(libname, pkgname) :
   rgeos: versions of GEOS runtime 3.12.0beta2-CAPI-1.18.0
and GEOS at installation 3.11.1-CAPI-1.17.1differ
 >
 > set_do_poly_check(FALSE)
 > #test_dir(system.file("tests", package = "rgeos"), 
StopReporter)#SummaryByContextReporter)
 > #test_package("rgeos")
 > test_check("rgeos")
[ FAIL 1 | WARN 28 | SKIP 0 | PASS 116 ]

== Failed tests 
================================================================
-- Error ('test-misc.R:50'): gNearestPoints works with different 
geometries as inputs --
Error: Unable to parse: MULTIPOLYGON(((34 54, 60 34, 60 54, 34 54), 
                          (50 50, 52 50, 52 48, 50 48, 50 50)), 
                     ((100 100, 150 100, 150 150, 100 150, 100 100), 
                           (120 120, 120 130, 130 130, 130 120, 120 120))))
GEOS reported: "rgeos_readWKT: unable to read wkt"
Backtrace:
     x
  1. \-rgeos::readWKT("MULTIPOLYGON(((34 54, 60 34, 60 54, 34 54),\n 
                           (50 50, 52 50, 52 48, 50 48, 50 50)),\n 
                        ((100 100, 150 100, 150 150, 100 150, 100 
100),\n                               (120 120, 120 130, 130 130, 130 
120, 120 120))))") at test-misc.R:50:2
  2.   \-base::tryCatch(...)
  3.     \-base (local) tryCatchList(expr, classes, parentenv, handlers)
  4.       \-base (local) tryCatchOne(expr, names, parentenv, 
handlers[[1L]])
  5.         \-value[[3L]](cond)

[ FAIL 1 | WARN 28 | SKIP 0 | PASS 116 ]
Error: Test failures
Execution halted
autopkgtest [23:08:43]: test run-unit-test: -----------------------]
autopkgtest [23:08:43]: test run-unit-test:  - - - - - - - - - - results 
- - - - - - - - - -
run-unit-test        FAIL non-zero exit status 1


Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From pramsey at cleverelephant.ca  Tue Jun 20 09:18:25 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 20 Jun 2023 09:18:25 -0700
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <8fdae57c-34e8-4fb8-af3d-ad858a1b50b5@xs4all.nl>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
 <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>
 <2F53C836-754C-4F42-8170-FC0C839A9AB0@cleverelephant.ca>
 <8fdae57c-34e8-4fb8-af3d-ad858a1b50b5@xs4all.nl>
Message-ID: <CD98E429-555E-49DD-924C-BF829DA0857A@cleverelephant.ca>



> On Jun 20, 2023, at 9:16 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
> 
> On 6/20/23 17:58, Paul Ramsey wrote:
>>> On Jun 20, 2023, at 8:55 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
>>> On 6/20/23 00:04, Paul Ramsey wrote:
>>>> Please, test 3.12beta2 and let us know if you?re finding any issues, I am planning to release 3.12 at the end of the week, if there are no reports of issues with the last beta release.
>>> 
>>> r-cran-rgeos 0.6-1 is failing its test suite with beta2:
>>> 
>>> https://qa.debian.org/excuses.php?experimental=1&package=geos
>> Can you break this down for me? What GEOS function is failing on what inputs? I cannot do a lot with
>>> run-unit-test        FAIL non-zero exit status 1
>> Thanks!
> 
> You need to scroll up for the output of the failing test:
> 
> autopkgtest [23:08:41]: test run-unit-test: [-----------------------
> 
> R version 4.3.1 (2023-06-16) -- "Beagle Scouts"
> Copyright (C) 2023 The R Foundation for Statistical Computing
> Platform: x86_64-pc-linux-gnu (64-bit)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R or R packages in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for an HTML browser interface to help.
> Type 'q()' to quit R.
> 
> > library(testthat)
> > library(rgeos)
> Loading required package: sp
> rgeos version: 0.6-1, (SVN revision 692)
> GEOS runtime version: 3.12.0beta2-CAPI-1.18.0
> Please note that rgeos will be retired during 2023,
> plan transition to sf functions using GEOS at your earliest convenience.
> GEOS using OverlayNG
> Linking to sp version: 1.5-1
> Polygon checking: TRUE
> 
> Warning message:
> In fun(libname, pkgname) :
>  rgeos: versions of GEOS runtime 3.12.0beta2-CAPI-1.18.0
> and GEOS at installation 3.11.1-CAPI-1.17.1differ
> >
> > set_do_poly_check(FALSE)
> > #test_dir(system.file("tests", package = "rgeos"), StopReporter)#SummaryByContextReporter)
> > #test_package("rgeos")
> > test_check("rgeos")
> [ FAIL 1 | WARN 28 | SKIP 0 | PASS 116 ]
> 
> == Failed tests ================================================================
> -- Error ('test-misc.R:50'): gNearestPoints works with different geometries as inputs --
> Error: Unable to parse: MULTIPOLYGON(((34 54, 60 34, 60 54, 34 54),                          (50 50, 52 50, 52 48, 50 48, 50 50)),                     ((100 100, 150 100, 150 150, 100 150, 100 100),                           (120 120, 120 130, 130 130, 130 120, 120 120))))
> GEOS reported: "rgeos_readWKT: unable to read wkt"

There?s a typo in the test, there should only be three closing parens at the end. It is in fact invalid WKT.

P.


> Backtrace:
>    x
> 1. \-rgeos::readWKT("MULTIPOLYGON(((34 54, 60 34, 60 54, 34 54),\n                           (50 50, 52 50, 52 48, 50 48, 50 50)),\n                        ((100 100, 150 100, 150 150, 100 150, 100 100),\n                               (120 120, 120 130, 130 130, 130 120, 120 120))))") at test-misc.R:50:2
> 2.   \-base::tryCatch(...)
> 3.     \-base (local) tryCatchList(expr, classes, parentenv, handlers)
> 4.       \-base (local) tryCatchOne(expr, names, parentenv, handlers[[1L]])
> 5.         \-value[[3L]](cond)
> 
> [ FAIL 1 | WARN 28 | SKIP 0 | PASS 116 ]
> Error: Test failures
> Execution halted
> autopkgtest [23:08:43]: test run-unit-test: -----------------------]
> autopkgtest [23:08:43]: test run-unit-test:  - - - - - - - - - - results - - - - - - - - - -
> run-unit-test        FAIL non-zero exit status 1
> 
> 
> Kind Regards,
> 
> Bas
> 
> -- 
> GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From Roger.Bivand at nhh.no  Tue Jun 20 09:25:48 2023
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 20 Jun 2023 16:25:48 +0000
Subject: [geos-devel] 3.12 release warning
Message-ID: <OSWP279MB0471D3FC99D0359736FC5DECEE5CA@OSWP279MB0471.NORP279.PROD.OUTLOOK.COM>

Bas, thanks for watching my back!

rgeos current on CRAN is 0.6-3; development 0.6-4 on https://r-forge.r-project.org/R/?group_id=602 has resolved the problem (an extra parentheses in a WKT string in a test/example). I'll submit to CRAN shortly, not a blocker.

Roger

--
Roger Bivand
Emeritus Professor
Norwegian School of Economics
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
Roger.Bivand at nhh.no

From gdt at lexort.com  Tue Jun 20 09:29:13 2023
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 20 Jun 2023 12:29:13 -0400
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <8fdae57c-34e8-4fb8-af3d-ad858a1b50b5@xs4all.nl> (Sebastiaan
 Couwenberg's message of "Tue, 20 Jun 2023 18:16:04 +0200")
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
 <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>
 <2F53C836-754C-4F42-8170-FC0C839A9AB0@cleverelephant.ca>
 <8fdae57c-34e8-4fb8-af3d-ad858a1b50b5@xs4all.nl>
Message-ID: <rmi7cry9jxi.fsf@s1.lexort.com>

Sebastiaan Couwenberg <sebastic at xs4all.nl> writes:

> Warning message:
> In fun(libname, pkgname) :
>   rgeos: versions of GEOS runtime 3.12.0beta2-CAPI-1.18.0
> and GEOS at installation 3.11.1-CAPI-1.17.1differ

Also, I found that geoe does not use the just-built library when running
tests, due to inadequate RPATH/LD_LIBRARY_PATH, so if you are testing
3.12 on a system with 3.11 installed, the tests may be running 3.11
code.

From sebastic at xs4all.nl  Tue Jun 20 10:08:46 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 20 Jun 2023 19:08:46 +0200
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <CD98E429-555E-49DD-924C-BF829DA0857A@cleverelephant.ca>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
 <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>
 <2F53C836-754C-4F42-8170-FC0C839A9AB0@cleverelephant.ca>
 <8fdae57c-34e8-4fb8-af3d-ad858a1b50b5@xs4all.nl>
 <CD98E429-555E-49DD-924C-BF829DA0857A@cleverelephant.ca>
Message-ID: <bfeb4118-6f6e-160f-35e3-9d0c261b9ab6@xs4all.nl>

On 6/20/23 18:18, Paul Ramsey wrote:
> There?s a typo in the test, there should only be three closing parens at the end. It is in fact invalid WKT.
Patch submitted in https://bugs.debian.org/1038733

No further autopkgtest failures with that patch applied.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From pramsey at cleverelephant.ca  Tue Jun 20 10:28:23 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 20 Jun 2023 10:28:23 -0700
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <rmi7cry9jxi.fsf@s1.lexort.com>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
 <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>
 <2F53C836-754C-4F42-8170-FC0C839A9AB0@cleverelephant.ca>
 <8fdae57c-34e8-4fb8-af3d-ad858a1b50b5@xs4all.nl>
 <rmi7cry9jxi.fsf@s1.lexort.com>
Message-ID: <25498F26-5DA5-404B-B5B2-A54208E2ACCD@cleverelephant.ca>



> On Jun 20, 2023, at 9:29 AM, Greg Troxel <gdt at lexort.com> wrote:
> 
> Sebastiaan Couwenberg <sebastic at xs4all.nl> writes:
> 
>> Warning message:
>> In fun(libname, pkgname) :
>>  rgeos: versions of GEOS runtime 3.12.0beta2-CAPI-1.18.0
>> and GEOS at installation 3.11.1-CAPI-1.17.1differ
> 
> Also, I found that geoe does not use the just-built library when running
> tests, due to inadequate RPATH/LD_LIBRARY_PATH, so if you are testing
> 3.12 on a system with 3.11 installed, the tests may be running 3.11
> code.

It would be helpful if this finding were qualified with the particular platform it was found on, and the steps to reproduce, since I?ve never managed to make it happen myself, and my computer is chock full of different versions of GEOS in different places.

P


> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From pramsey at cleverelephant.ca  Tue Jun 20 11:34:02 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 20 Jun 2023 11:34:02 -0700
Subject: [geos-devel] 3.12 release warning
In-Reply-To: <25498F26-5DA5-404B-B5B2-A54208E2ACCD@cleverelephant.ca>
References: <3E5E6948-3D99-4313-9EAD-CDA3DFAC9E36@cleverelephant.ca>
 <694fe3c1-94ab-08a0-fe06-d8e53878f81a@xs4all.nl>
 <2F53C836-754C-4F42-8170-FC0C839A9AB0@cleverelephant.ca>
 <8fdae57c-34e8-4fb8-af3d-ad858a1b50b5@xs4all.nl>
 <rmi7cry9jxi.fsf@s1.lexort.com>
 <25498F26-5DA5-404B-B5B2-A54208E2ACCD@cleverelephant.ca>
Message-ID: <10E1B576-3148-4739-9415-C9266D36C742@cleverelephant.ca>



> On Jun 20, 2023, at 10:28 AM, Paul Ramsey <pramsey at cleverelephant.ca> wrote:
> 
> 
> 
>> On Jun 20, 2023, at 9:29 AM, Greg Troxel <gdt at lexort.com> wrote:
>> 
>> Sebastiaan Couwenberg <sebastic at xs4all.nl> writes:
>> 
>>> Warning message:
>>> In fun(libname, pkgname) :
>>> rgeos: versions of GEOS runtime 3.12.0beta2-CAPI-1.18.0
>>> and GEOS at installation 3.11.1-CAPI-1.17.1differ
>> 
>> Also, I found that geoe does not use the just-built library when running
>> tests, due to inadequate RPATH/LD_LIBRARY_PATH, so if you are testing
>> 3.12 on a system with 3.11 installed, the tests may be running 3.11
>> code.
> 
> It would be helpful if this finding were qualified with the particular platform it was found on, and the steps to reproduce, since I?ve never managed to make it happen myself, and my computer is chock full of different versions of GEOS in different places.

So what I have found in MacOS and just now trying out ArchLinux is that we are getting the default cmake behaviour, which is to set the rpath to the absolute path to the build library directory. So for example, here?s the output for ArchLinux

readelf -d ./bin/geosop | head -20

  Tag        Type                         Name/Value
 0x0000000000000001 (NEEDED)             Shared library: [libgeos_c.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libgeos.so.3.12.0]
 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
 0x000000000000001d (RUNPATH)            Library runpath: [/home/arch/geos/_build/lib]

And for MacOS

Load command 18
          cmd LC_RPATH
      cmdsize 56
         path /Users/pramsey/Code/geos-git/_build/lib (offset 12)

The internet concurs that this is the normal behaviour for cmake builds. 

With that runpath in place, I?ve never had a problem with builds getting confused when running testing. 

It is worth noting that on INSTALL, cmake will re-write the rpath for the installed binaries, so for example, after doing ?make install? on ArchLinux, the library info now has a path relative to ORIGIN.

readelf -d /usr/local/bin/geosop | head -20

Dynamic section at offset 0x75d50 contains 32 entries:
  Tag        Type                         Name/Value
 0x0000000000000001 (NEEDED)             Shared library: [libgeos_c.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libgeos.so.3.12.0]
 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
 0x000000000000001d (RUNPATH)            Library runpath: [$ORIGIN/../lib]

I can make the linker unhappy by doing a manual move of the build directory?

cd ..
mv _build _build2
cd _build2
./bin/geosop

Since the build rpath is absolute, the rpath no longer resolves, and yes, the binaries will resolve to linking any other geos it can find on linker path. Which if you have installed some other version or have an LD_LIBRARY_PATH set pointing to some other place, will result in you ?testing? something other than the contents of your ./lib directory.

So, the build directory is ?special?, and the library in the builddir/lib is not the same as one in installdir/lib
So, use an actual install to get an installed copy to test against, don?t manually move the build directory around and treat it as equivalent to an install, it is not.

P.


> 
> P
> 
> 
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org <mailto:geos-devel at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/geos-devel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230620/705f87e7/attachment-0001.htm>

From pramsey at cleverelephant.ca  Sun Jun 25 16:45:41 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Sun, 25 Jun 2023 16:45:41 -0700
Subject: [geos-devel] Vote on 3.12.0 Release
Message-ID: <231D22EA-A234-48CC-A92A-95D1BDAF0D07@cleverelephant.ca>

Does anyone object to a 3.12.0 release on Monday/Tuesday?

P.

From lr at pcorp.us  Mon Jun 26 00:57:54 2023
From: lr at pcorp.us (Regina Obe)
Date: Mon, 26 Jun 2023 03:57:54 -0400
Subject: [geos-devel] Vote on 3.12.0 Release
In-Reply-To: <231D22EA-A234-48CC-A92A-95D1BDAF0D07@cleverelephant.ca>
References: <231D22EA-A234-48CC-A92A-95D1BDAF0D07@cleverelephant.ca>
Message-ID: <001101d9a803$ea7f4d80$bf7de880$@pcorp.us>

> Paul Ramsey
> Sent: Sunday, June 25, 2023 7:46 PM
> To: GEOS Development List <geos-devel at lists.osgeo.org>
> Subject: [geos-devel] Vote on 3.12.0 Release
> 
> Does anyone object to a 3.12.0 release on Monday/Tuesday?
> 
> P.
I don't.  +1 to release.


From mtnclimb at gmail.com  Mon Jun 26 07:48:08 2023
From: mtnclimb at gmail.com (Martin Davis)
Date: Mon, 26 Jun 2023 07:48:08 -0700
Subject: [geos-devel] Vote on 3.12.0 Release
In-Reply-To: <231D22EA-A234-48CC-A92A-95D1BDAF0D07@cleverelephant.ca>
References: <231D22EA-A234-48CC-A92A-95D1BDAF0D07@cleverelephant.ca>
Message-ID: <CAK2ens1dfmr1VUNFkTTyfddB_uDkiQdtkZfR2ZDeN8x1vm_mcw@mail.gmail.com>

+1

On Sun, Jun 25, 2023 at 4:45?PM Paul Ramsey <pramsey at cleverelephant.ca>
wrote:

> Does anyone object to a 3.12.0 release on Monday/Tuesday?
>
> P.
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230626/34ba778f/attachment.htm>

From jmckenna at gatewaygeomatics.com  Mon Jun 26 08:17:17 2023
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 26 Jun 2023 12:17:17 -0300
Subject: [geos-devel] Vote on 3.12.0 Release
In-Reply-To: <231D22EA-A234-48CC-A92A-95D1BDAF0D07@cleverelephant.ca>
References: <231D22EA-A234-48CC-A92A-95D1BDAF0D07@cleverelephant.ca>
Message-ID: <0a71488a-59b2-1a19-7ce5-292a89ff0dfa@gatewaygeomatics.com>

+1

(sorry for my late testing: on Windows with Visual Studio, with beta2, 
all is well, but for the record, during compile of geosop.exe the 
following warnings are thrown, maybe this was reported/handled earlier :


\geos-3.12.0\util\geosop\GeometryOp.cpp(200): warning C4573: the usage 
of 'geos::precision::GeometryPrecisionReducer::reduce' requires the 
compiler to capture 'this' but the current default capture mode does not 
allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(527): warning C4573: the usage 
of 'geos::operation::distance::DistanceOp::nearestPoints' requires the 
compiler to capture 'this' but the current default capture mode does not 
allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(528): warning C4573: the usage 
of 'geos::operation::distance::DistanceOp::nearestPoints' requires the 
compiler to capture 'this' but the current default capture mode does not 
allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(529): warning C4573: the usage 
of 'geos::operation::distance::DistanceOp::nearestPoints' requires the 
compiler to capture 'this' but the current default capture mode does not 
allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(530): warning C4573: the usage 
of 'geos::operation::distance::DistanceOp::nearestPoints' requires the 
compiler to capture 'this' but the current default capture mode does not 
allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(538): warning C4573: the usage 
of 'geos::algorithm::distance::DiscreteFrechetDistance::distance' 
requires the compiler to capture 'this' but the current default capture 
mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(546): warning C4573: the usage 
of 'geos::algorithm::distance::DiscreteHausdorffDistance::distance' 
requires the compiler to capture 'this' but the current default capture 
mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(825): warning C4573: the usage 
of 'geos::operation::intersection::RectangleIntersection::clip' requires 
the compiler to capture 'this' but the current default capture mode does 
not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(885): warning C4573: the usage 
of 'geos::coverage::CoverageSimplifier::simplify' requires the compiler 
to capture 'this' but the current default capture mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(888): warning C4573: the usage 
of 'geos::coverage::CoverageSimplifier::simplify' requires the compiler 
to capture 'this' but the current default capture mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(889): warning C4573: the usage 
of 'geos::coverage::CoverageSimplifier::simplify' requires the compiler 
to capture 'this' but the current default capture mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(891): warning C4573: the usage 
of 'geos::coverage::CoverageSimplifier::simplify' requires the compiler 
to capture 'this' but the current default capture mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(911): warning C4573: the usage 
of 'geos::coverage::CoverageValidator::validate' requires the compiler 
to capture 'this' but the current default capture mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(915): warning C4573: the usage 
of 'geos::coverage::CoverageValidator::validate' requires the compiler 
to capture 'this' but the current default capture mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(916): warning C4573: the usage 
of 'geos::coverage::CoverageValidator::validate' requires the compiler 
to capture 'this' but the current default capture mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(917): warning C4573: the usage 
of 'geos::coverage::CoverageValidator::validate' requires the compiler 
to capture 'this' but the current default capture mode does not allow it
\geos-3.12.0\util\geosop\GeometryOp.cpp(920): warning C4573: the usage 
of 'geos::coverage::CoverageValidator::validate' requires the compiler 
to capture 'this' but the current default capture mode does not allow it


-jeff




-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/



On 2023-06-25 8:45 p.m., Paul Ramsey wrote:
> Does anyone object to a 3.12.0 release on Monday/Tuesday?
> 
> P.



From pramsey at cleverelephant.ca  Tue Jun 27 10:31:58 2023
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 27 Jun 2023 10:31:58 -0700
Subject: [geos-devel] GEOS 3.12.0 Released
Message-ID: <FAEEEAD3-ED7C-46FC-9C12-CD11ED59EC69@cleverelephant.ca>

Exciting news, geometry processors, the latest feature release of GEOS is now available.

http://libgeos.org/posts/2023-06-27-geos-3-12-released/

This release includes the following new features in the C API (and of course underlying changes to the C++ code to support these features):

* GEOSDisjointSubsetUnion, anptimized union algorithm for inputs that can be divided into subsets.
* GEOSLineSubstring, to clip a line using a start and end fractional length.
* GEOSEqualsIdentical, to test exact equality (with regards to order, structure, etc) of two geometries.
* GEOSOrientPolygons, to enforce a ring orientation on all polygonal elements in the input geometry.
* GEOSSTRtree_build, to force an immediate build of an STRtree.
* GEOSConcaveHullByLength, to build a concave hull by removing the longest outer edges of the Delaunay Triangulation of the space between the polygons, until the specified maximm edge length is reached
* GEOSGeomGetM, to read the M-dimensional value of a geometry.
* GEOSVoronoiDiagram, returns the Voronoi polygons or edges of the vertices of the given geometry.
* GEOSCoverageSimplifyVW, GEOSCoverageUnion, GEOSCoverageIsValid for working with ?polygonal coverages?, collections of polygons that follow coverage rules (no overlaps, exact vertex equivalence on shared edges).
* GEOSGeom_releaseCollection, to free a collection while leaving the sub-geometries intact.
* GEOSMinimumRotatedRectangle, a rework of the minimum rectangle code to be faster and more correct.

GEOS has been updated to read and write ?M? dimension. As with the ?Z? coordinate support, not all operations can preserve the ?M? dimension, but best efforts are made to retain it through calculations, input and output.

Much infrastructure work on GEOS this cycle was funded by a GDAL maintenance grant, and carried out by the amazing Dan Baston. Read a summary of the work accomplished here.

https://www.mail-archive.com/gdal-dev at lists.osgeo.org/msg39018.html 

Full news file for this release is available here.

https://github.com/libgeos/geos/blob/3.12.0/NEWS.md

For the very impatient, direct code download is here.

https://download.osgeo.org/geos/geos-3.12.0.tar.bz2


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/geos-devel/attachments/20230627/a40f4c66/attachment.htm>

From geos-trac at osgeo.org  Fri Jun 30 16:33:58 2023
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 30 Jun 2023 23:33:58 -0000
Subject: [geos-devel] [GEOS] #934: disable svn access from the web
In-Reply-To: <041.3585ac821e784290df2b0699cb2cde04@osgeo.org>
References: <041.3585ac821e784290df2b0699cb2cde04@osgeo.org>
Message-ID: <056.9f552a8a224fca8e5a6967d92264bd5e@osgeo.org>

#934: disable svn access from the web
-----------------------+---------------------------
 Reporter:  gdt        |       Owner:  geos-devel@?
     Type:  task       |      Status:  closed
 Priority:  minor      |   Milestone:  Management
Component:  Default    |     Version:  main
 Severity:  Annoyance  |  Resolution:  fixed
 Keywords:             |
-----------------------+---------------------------
Comment (by Paul Ramsey <pramsey@?>):

 In [changeset:"e93854317dd3130644891c73579e773859a12717/git" e938543/git]:
 {{{#!CommitTicketReference repository="git"
 revision="e93854317dd3130644891c73579e773859a12717"
 Explicitly set endianness for some tests so that output matches expected.
 Closes #934
 }}}
-- 
Ticket URL: <https://trac.osgeo.org/geos/ticket/934#comment:4>
GEOS <http://trac.osgeo.org/geos>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

From geos-trac at osgeo.org  Fri Jun 30 16:34:06 2023
From: geos-trac at osgeo.org (GEOS)
Date: Fri, 30 Jun 2023 23:34:06 -0000
Subject: [geos-devel] [GEOS] #934: disable svn access from the web
In-Reply-To: <041.3585ac821e784290df2b0699cb2cde04@osgeo.org>
References: <041.3585ac821e784290df2b0699cb2cde04@osgeo.org>
Message-ID: <056.c3c237e68e890b152203d49c88883ca6@osgeo.org>

#934: disable svn access from the web
-----------------------+---------------------------
 Reporter:  gdt        |       Owner:  geos-devel@?
     Type:  task       |      Status:  closed
 Priority:  minor      |   Milestone:  Management
Component:  Default    |     Version:  main
 Severity:  Annoyance  |  Resolution:  fixed
 Keywords:             |
-----------------------+---------------------------
Comment (by Paul Ramsey <pramsey@?>):

 In [changeset:"6bc91ff0f985abb96e44f1c8ef9cf010d9d2006c/git" 6bc91ff/git]:
 {{{#!CommitTicketReference repository="git"
 revision="6bc91ff0f985abb96e44f1c8ef9cf010d9d2006c"
 Explicitly set endianness for some tests so that output matches expected.
 Closes #934
 }}}
-- 
Ticket URL: <https://trac.osgeo.org/geos/ticket/934#comment:5>
GEOS <http://trac.osgeo.org/geos>
GEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).

