From marco.hugentobler at karto.baug.ethz.ch  Mon Apr  2 03:56:09 2007
From: marco.hugentobler at karto.baug.ethz.ch (Marco Hugentobler)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] API changes
In-Reply-To: <e8e7199c0703300902g1c18aadbw4d409e944295dd63@mail.gmail.com>
References: <e8e7199c0703241637o2c273b14q41a06fe7c172068f@mail.gmail.com>
	<200703301738.41428.marco.hugentobler@karto.baug.ethz.ch>
	<e8e7199c0703300902g1c18aadbw4d409e944295dd63@mail.gmail.com>
Message-ID: <200704020956.09840.marco.hugentobler@karto.baug.ethz.ch>

Ok, I changed the provider interface of the functions 'select' 
and 'getNextFeature' and also the related code of the qgis core and the 
individual providers.

I suggest to merge the branch back soon. This still leaves some time to test 
for new bugs.

Regards,
Marco

Am Freitag, 30. M?rz 2007 18:02 schrieb Martin Dobias:
> On 3/30/07, Marco Hugentobler <marco.hugentobler@karto.baug.ethz.ch> wrote:
> > Hi Martin,
> >
> > The interface looks good.
> >
> > It would be nice if getNextFeature could be const, but that would
> > probably require some members of providers declared as 'mutable'.
>
> I don't think this is possible: with every getNextFeature() provider
> changes its internal state as it must increase the counter (or
> delegate that to backend).
>
> > > Also it might be good to think about enabling concurrency as currently
> > > it's not possible to do more data retreivals at once with one
> > > provider. Iterator design pattern could solve this situation, the
> > > question is whether also provider backends support concurrency (e.g.
> > > OGR).
> >
> > This would be a very clean solution. However, it is probably a bit too
> > much for now. What are the use cases you have in mind for concurrency?
> > Something like multiple canvases sharing one data provider (and possibly
> > multithreaded)?
>
> One such scenario is a server application that does some processing
> (or rendering) in several threads. Another case is the one you've
> mentioned - in future we should do canvas rendering in a thread so
> that GUI won't freeze every render. And with more canvases we would
> get into troubles.
>
> But you're true that this would need some more time.
>
> Martin

From wonder.sk at gmail.com  Mon Apr  2 04:09:20 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] API changes
In-Reply-To: <200704020956.09840.marco.hugentobler@karto.baug.ethz.ch>
References: <e8e7199c0703241637o2c273b14q41a06fe7c172068f@mail.gmail.com>
	<200703301738.41428.marco.hugentobler@karto.baug.ethz.ch>
	<e8e7199c0703300902g1c18aadbw4d409e944295dd63@mail.gmail.com>
	<200704020956.09840.marco.hugentobler@karto.baug.ethz.ch>
Message-ID: <e8e7199c0704020109l44285fc0t21206ca82e868f91@mail.gmail.com>

Hi Marco,

great! I have just few comments:

- is it necessary to call reset() everytime after select() ? It would
be simpler if users could do just select() and then getNextFeature().
If provider needs to call reset() first, it could be done in select().

- getNextFeature has parameter featureQueueSize. I think this
parameter is quite misleading, unused by the code and most providers
don't use it. I would suggest removing it and let's use some
predefined value for postgres.

If you won't mind the proposed changes, I'll do them. Then we could merge.

Martin

On 4/2/07, Marco Hugentobler <marco.hugentobler@karto.baug.ethz.ch> wrote:
> Ok, I changed the provider interface of the functions 'select'
> and 'getNextFeature' and also the related code of the qgis core and the
> individual providers.
>
> I suggest to merge the branch back soon. This still leaves some time to test
> for new bugs.
>
> Regards,
> Marco
>
> Am Freitag, 30. M?rz 2007 18:02 schrieb Martin Dobias:
> > On 3/30/07, Marco Hugentobler <marco.hugentobler@karto.baug.ethz.ch> wrote:
> > > Hi Martin,
> > >
> > > The interface looks good.
> > >
> > > It would be nice if getNextFeature could be const, but that would
> > > probably require some members of providers declared as 'mutable'.
> >
> > I don't think this is possible: with every getNextFeature() provider
> > changes its internal state as it must increase the counter (or
> > delegate that to backend).
> >
> > > > Also it might be good to think about enabling concurrency as currently
> > > > it's not possible to do more data retreivals at once with one
> > > > provider. Iterator design pattern could solve this situation, the
> > > > question is whether also provider backends support concurrency (e.g.
> > > > OGR).
> > >
> > > This would be a very clean solution. However, it is probably a bit too
> > > much for now. What are the use cases you have in mind for concurrency?
> > > Something like multiple canvases sharing one data provider (and possibly
> > > multithreaded)?
> >
> > One such scenario is a server application that does some processing
> > (or rendering) in several threads. Another case is the one you've
> > mentioned - in future we should do canvas rendering in a thread so
> > that GUI won't freeze every render. And with more canvases we would
> > get into troubles.
> >
> > But you're true that this would need some more time.
> >
> > Martin
>

From frdcn at hotmail.com  Mon Apr  2 15:04:59 2007
From: frdcn at hotmail.com (godofredo contreras)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] Question about mysql provider
Message-ID: <BAY110-W18C550F519A89B3909D9EEB2600@phx.gbl>

Hi:
 
I have seen some code related to mysql provider in svn source, is this provider having some work on it?.
Also I have read about ogr support for mysql, could it be possible load mysql layer using ogr provider?
 
Regards
 
Godofredo Contreras 
   
_________________________________________________________________
Your friends are close to you.?Keep them that way.
http://spaces.live.com/signup.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070402/3d474860/attachment.html
From wonder.sk at gmail.com  Mon Apr  2 15:20:46 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] Question about mysql provider
In-Reply-To: <BAY110-W18C550F519A89B3909D9EEB2600@phx.gbl>
References: <BAY110-W18C550F519A89B3909D9EEB2600@phx.gbl>
Message-ID: <e8e7199c0704021220j5ca60104r8e4a49490e0a5ca8@mail.gmail.com>

Hi,

>  I have seen some code related to mysql provider in svn source, is this
> provider having some work on it?.

there's some code for mysql provider but it doesn't work and probably
should be rewritten from scratch since provider interface has changed
a lot from the last work being done there.

>  Also I have read about ogr support for mysql, could it be possible load
> mysql layer using ogr provider?

It should be possible to use OGR provider to use MySQL database, but
there is no UI for doing it automatically - but should be possible to
create a simple plugin that would provide such interface, AFAIK
someone's been already doing such a plugin for Oracle databases.

Martin

From wonder.sk at gmail.com  Tue Apr  3 08:09:33 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] postgresql code review
Message-ID: <e8e7199c0704030509l6523b577j129cf2ba88cd060a@mail.gmail.com>

Hi,

I've added getFeatureAtId() implementation for postgres provider in
revision 6873. Could someone with more postresql knowledge check
whether is it correct? It seemed to me that only way how to access WKB
geometry in binary (not text) format is to use binary cursor. Isn't
possible to retreive binary data only with a 'SELECT'?

Martin

From nhugent at hispeed.ch  Tue Apr  3 15:36:59 2007
From: nhugent at hispeed.ch (nhugent@hispeed.ch)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] API changes
Message-ID: <200704031936.l33JaxXQ007085@smtp.hispeed.ch>

Hi Martin,

>- getNextFeature has parameter featureQueueSize. I think this
>parameter is quite misleading, unused by the code and most providers
>don't use it. I would suggest removing it and let's use some
>predefined value for postgres.

Postgres seems to be the only provider using it. I don't know how important it is for performance there. The strange thing is that it is set from vectorlayer according to the value of mUpdateTreshold, which was originally introduced for screen refresh and not feature queue size. Removing is ok from my side.

>- is it necessary to call reset() everytime after select() ? It would
>be simpler if users could do just select() and then getNextFeature().
>If provider needs to call reset() first, it could be done in select().

That's right, it could be done directly in select().

After these changes, it would be good to have a few days to test before merging.

Regards,
Marco 

From wonder.sk at gmail.com  Tue Apr  3 16:25:33 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] API changes
In-Reply-To: <200704031936.l33JaxXQ007085@smtp.hispeed.ch>
References: <200704031936.l33JaxXQ007085@smtp.hispeed.ch>
Message-ID: <e8e7199c0704031325n2abcd920h1b4b66f0e2bfa360@mail.gmail.com>

On 4/3/07, nhugent@hispeed.ch <nhugent@hispeed.ch> wrote:
> Hi Martin,
>
> >- getNextFeature has parameter featureQueueSize. I think this
> >parameter is quite misleading, unused by the code and most providers
> >don't use it. I would suggest removing it and let's use some
> >predefined value for postgres.
>
> Postgres seems to be the only provider using it. I don't know how important it is for performance there. The strange thing is that it is set from vectorlayer according to the value of mUpdateTreshold, which was originally introduced for screen refresh and not feature queue size. Removing is ok from my side.

I've found out that it the impact can be quite big - when using a
layer with many features it took about 10 seconds to fetch all data
when fetching one feature at the time. When fetching e.g. 100 at once,
rendering time was 3-4 times lower. I've set feature queue size to
200, this should be okay.

> >- is it necessary to call reset() everytime after select() ? It would
> >be simpler if users could do just select() and then getNextFeature().
> >If provider needs to call reset() first, it could be done in select().
>
> That's right, it could be done directly in select().
>
> After these changes, it would be good to have a few days to test before merging.

I'm done with the changes I wanted to do. At last there were more of
them than I've thought but I'm quite happy with them:
- support for writing shapefiles (can be found in legend menu)
- geometry factories - it's possible to create geometry from QgsPoint,
QgsPolyline or QgsPolygon - to be used for saving to shapefile,
inserting to spatial index etc.
- highlighting of identified feature - often I didn't know what's the
feature that I've clicked on (or what is it's exact geometry) so now
it will highlight it with rubberband

If there won't be any big problems we can merge back to trunk during
the weekend.

Martin

From morb at beagle.com.au  Wed Apr  4 16:40:42 2007
From: morb at beagle.com.au (Brendan Morley)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] API changes
In-Reply-To: <200704031936.l33JaxXQ007085@smtp.hispeed.ch>
References: <200704031936.l33JaxXQ007085@smtp.hispeed.ch>
Message-ID: <1175719242.2777.1.camel@localhost.localdomain>

On Tue, 2007-04-03 at 21:36 +0200, nhugent@hispeed.ch wrote:
> Hi Martin,
> 
> >- getNextFeature has parameter featureQueueSize. I think this
> >parameter is quite misleading, unused by the code and most providers
> >don't use it. I would suggest removing it and let's use some
> >predefined value for postgres.
> 
> Postgres seems to be the only provider using it. I don't know how important it is for performance there. The strange thing is that it is set from vectorlayer according to the value of mUpdateTreshold, which was originally introduced for screen refresh and not feature queue size. Removing is ok from my side.

Hey, I remember doing that!

It was an optimisation feature.  The reason why it's linked to
mUpdateTreshold is that's most efficient to grab all the Postgres
features for a screen refresh all at once.


Brendan


From marco.hugentobler at karto.baug.ethz.ch  Thu Apr  5 03:44:55 2007
From: marco.hugentobler at karto.baug.ethz.ch (Marco Hugentobler)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] API changes
In-Reply-To: <1175719242.2777.1.camel@localhost.localdomain>
References: <200704031936.l33JaxXQ007085@smtp.hispeed.ch>
	<1175719242.2777.1.camel@localhost.localdomain>
Message-ID: <200704050944.56070.marco.hugentobler@karto.baug.ethz.ch>

Hi Brendan,

> It was an optimisation feature.  The reason why it's linked to
> mUpdateTreshold is that's most efficient to grab all the Postgres
> features for a screen refresh all at once.

Oh, I see.
mUpdateTreshold was just for making the background buffer visible after the 
specified number of features have been drawn in the background buffer. The 
buffer swapping is (or was since it does not work with qt4) a very fast 
action. So I'm not sure if the coupling with mUpdateTreshold enhanced 
performance.

But the idea to draw while feature fetching is in progress is quite good. 
Something similar is done in the GPX and WFS providers, where the expat 
parser already starts parsing the xml when the first data arrives.

Regards,
Marco
 

From cavallini at faunalia.it  Thu Apr  5 04:56:36 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] [Fwd: Re: [Quantum GIS] #54: label placement]
Message-ID: <4614B9C4.2010103@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

we are being spammed.
pc

- -------- Messaggio Originale  --------
Oggetto: Re: [Quantum GIS] #54: label placement
Data: Thu, 05 Apr 2007 08:51:08 -0000
Da: Quantum GIS <qgis@qgis.org>
Rispondi-a: qgis@qgis.org
CC: qgis-trac@lists.qgis.org
Referenze: <048.c4ec3d204fb4b237b278105363b8516b@qgis.org>

#54: label placement
-
------------------------------------------+---------------------------------
        Reporter:  cavallini@faunalia.it  |         Owner:  wonder
            Type:  enhancement            |        Status:  new
        Priority:  major                  |     Milestone:  Version 0.9
       Component:  Graphics               |       Version:  HEAD
      Resolution:                         |      Keywords:
Platform_version:                         |      Platform:  All
        Must_fix:  No                     |   Status_info:  0
-
------------------------------------------+---------------------------------
Changes (by anonymous):

  * status_info:  => 0
  * must_fix:  => No

Comment:

 fontanorgasm.info/hemaiseva-pornaccess.html
 http://sekreterare.info/brutal-videos-modne.html
 http://tunne-hentai.onani18.info
 http://sekreterare.info/porno-struttende-sexen.html
 http://hemmafruar.info/hore-sjuskete-bilder/hore-sjuskete-bilder.html
 http://bilde-fitte-pen.mjukporr.info
 http://jpg-lojlig-medelmattlig.gamlingar.info
 http://munnsex-barbering-bilder.mjukporr.info
 http://pillu-sperma-maksuton.onani18.info
 http://noveller-bilder-jpg.gamlingar.info
 http://naken-handjager-galleri.mjukporr.info
 http://fontanorgasm.info/tvingad-transvestit-anal.html
 http://videoer-dorte-skapel.mjukporr.info
 http://rar-arsle-mpg.gamlingar.info
 http://fontanorgasm.info/mieleinen-hetkellinen.html

- --
Ticket URL: <http://svn.qgis.org:8080/trac/ticket/54#comment:4>
Quantum GIS <http://qgis.org>
Quantum GIS is an Open Source GIS viewer/editor supporting OGR, PostGIS,
and GRASS formats
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGFLnE/NedwLUzIr4RAqexAKCoIv6CGA/HH9UYydZvgOIOhzFtCACZAd5e
OSlEPpG8nW9a+OSwHzIKPWM=
=WudU
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Thu Apr  5 13:47:07 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] postgis digitizing freezes 0.9
Message-ID: <4615361B.4010305@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
When digitizing in a postgis line layer, qgis (just compiled from trunk)
freezes and has to be killed. Is it worht the while to fill a bug, given
the amount of activity on the pgis provider these days?
All the best.
pc
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGFTYa/NedwLUzIr4RAuwgAJ9ilfu6IjoWz1IBRG7gBpI32UHwsQCdE7CY
J9KCCUOqgDyoTydt1Oe3+M8=
=a/oC
-----END PGP SIGNATURE-----

From wonder.sk at gmail.com  Thu Apr  5 13:54:06 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] postgis digitizing freezes 0.9
In-Reply-To: <4615361B.4010305@faunalia.it>
References: <4615361B.4010305@faunalia.it>
Message-ID: <e8e7199c0704051054j34c3bbe7i5b03631c4e42702c@mail.gmail.com>

Hi Paolo,

there's no more work planned now, it's possible that the bug persists
also in provider0_9-branch that we were working recently. You can
check whether it's there or wait until it's merged back to trunk and
then test again from trunk.

Martin

On 4/5/07, Paolo Cavallini <cavallini@faunalia.it> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi all.
> When digitizing in a postgis line layer, qgis (just compiled from trunk)
> freezes and has to be killed. Is it worht the while to fill a bug, given
> the amount of activity on the pgis provider these days?
> All the best.
> pc
> - --
> Paolo Cavallini
> http://www.faunalia.it/pc
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.6 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFGFTYa/NedwLUzIr4RAuwgAJ9ilfu6IjoWz1IBRG7gBpI32UHwsQCdE7CY
> J9KCCUOqgDyoTydt1Oe3+M8=
> =a/oC
> -----END PGP SIGNATURE-----
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer
>

From cavallini at faunalia.it  Thu Apr  5 14:09:02 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] postgis digitizing freezes 0.9
In-Reply-To: <e8e7199c0704051054j34c3bbe7i5b03631c4e42702c@mail.gmail.com>
References: <4615361B.4010305@faunalia.it>
	<e8e7199c0704051054j34c3bbe7i5b03631c4e42702c@mail.gmail.com>
Message-ID: <46153B3E.3060709@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Thanks.
I'll wait until merging, then I'll test it again.
All the best.
pc

Martin Dobias ha scritto:
> Hi Paolo,
> 
> there's no more work planned now, it's possible that the bug persists
> also in provider0_9-branch that we were working recently. You can
> check whether it's there or wait until it's merged back to trunk and
> then test again from trunk.
> 
> Martin
> 
> On 4/5/07, Paolo Cavallini <cavallini@faunalia.it> wrote:
> Hi all.
> When digitizing in a postgis line layer, qgis (just compiled from trunk)
> freezes and has to be killed. Is it worht the while to fill a bug, given
> the amount of activity on the pgis provider these days?
> All the best.
> pc
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGFTs+/NedwLUzIr4RAiUWAJ9k6DJqVGtvB6WENhvEjsLX71mzdwCdFeFa
oqsnGZOjHQCt642RKwcum0Y=
=OMaN
-----END PGP SIGNATURE-----

From sherman at mrcc.com  Thu Apr  5 17:18:28 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] Bug tracker changes
Message-ID: <CD323B7E-1687-44F9-88F6-217A2CC3424F@mrcc.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Well it took a year but the p0rn link farmers found our bug tracker.  
I have disabled anonymous ticket creation and comment submission.  
We'll be working on a new strategy over the weekend to address the  
issues. You may find offensive links in some of the bug comments.  
I'll be taking care of those later today.

- -gary
- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGFWel1zKuzV6goTgRApt3AJ4qICGygoJp86LH8z2GiaSuTYSacwCgjJib
6p9Zg0x2sLdVxj3wAXEgr90=
=3M6g
-----END PGP SIGNATURE-----

From sherman at mrcc.com  Fri Apr  6 00:51:40 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] Changes to Trac
Message-ID: <7F987787-A5E8-4D34-8138-4F302F5CC96B@mrcc.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Greetings,
Due to spam issues/abuse of the QGIS bug tracker (Trac), you are now  
required to have an account and login before you can submit a bug  
report or comment on an existing ticket.

To get an account, send an email to gsherman at mrcc.com and tim at  
linfiniti.com (make sure to include a copy to both of us).

I know this is an inconvenience. The bug tracker ran for over a year  
before it was discovered by the link farmers.

- -gary

- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGFdHc1zKuzV6goTgRAkRXAJ4kv8N+Q3EBEToqToL7vv3KClY+9ACfchTM
D/+UkuA3pEPDpUqBx0Yn5Ck=
=NidJ
-----END PGP SIGNATURE-----

From mcoletti at lychnobite.org  Fri Apr  6 17:00:58 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] Cmake cannot find FLEX problem building 6878
Message-ID: <20070406210058.GK3506@lychnobite.org>

Yes, I live, and am once again poking round Qgis.  8-)

I'm interested in getting the python bindings to work.  I understand,
perhaps incorrectly, that the 0_8_0 branch supports python bindings.
So, switched to that branch, configured via ccmake, and now get this
error:

mcoletti@mcolettib886:~/projects/qgis> cmake .
CMake Error: Error in cmake code at
/home/mcoletti/projects/qgis/CMakeLists.txt:47:
INCLUDE Could not find include file: Flex
Current CMake stack: /home/mcoletti/projects/qgis/CMakeLists.txt;/usr/local/share/cmake-2.4/Modules/CMakeCInformation.cmake;/usr/local/share/cmake-2.4/Modules/CMakeCXXInformation.cmake;/home/mcoletti/projects/qgis/Flex
CMake Error: Error in cmake code at
/home/mcoletti/projects/qgis/CMakeLists.txt:49:
Unknown CMake command "FIND_FLEX".
-- Configuring done


I didn't get this error under the main trunk.  What am I doing wrong?
I'm new to cmake, so I may have screwed up something during its
configuration.

Cheers,

Mark



From sherman at mrcc.com  Fri Apr  6 17:14:57 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] Cmake cannot find FLEX problem building 6878
In-Reply-To: <20070406210058.GK3506@lychnobite.org>
References: <20070406210058.GK3506@lychnobite.org>
Message-ID: <608B3421-65BB-4FA7-8721-BC37CF3D809F@mrcc.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


On Apr 6, 2007, at 1:00 PM, Mark Coletti wrote:

> Yes, I live, and am once again poking round Qgis.  8-)
>
Welcome back.

> I'm interested in getting the python bindings to work.  I understand,
> perhaps incorrectly, that the 0_8_0 branch supports python bindings.
>

The python bindings are in HEAD. So check it out and then you can  
post your new errors :)


- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGFrhS1zKuzV6goTgRAtgsAJ4ntejP7wIAocoXbuns+W4voKEr+gCdF9NJ
q2z/h2bJeYrimFBLwNcG3MY=
=aQq8
-----END PGP SIGNATURE-----

From sherman at mrcc.com  Fri Apr  6 17:16:08 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:05 2008
Subject: [Qgis-developer] Cmake cannot find FLEX problem building 6878
In-Reply-To: <20070406210058.GK3506@lychnobite.org>
References: <20070406210058.GK3506@lychnobite.org>
Message-ID: <A0CC43A8-10A1-4D90-9801-A008B14F956B@mrcc.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


On Apr 6, 2007, at 1:00 PM, Mark Coletti wrote:

> mcoletti@mcolettib886:~/projects/qgis> cmake .
> CMake Error: Error in cmake code at
> /home/mcoletti/projects/qgis/CMakeLists.txt:47:

Also see: http://wiki.qgis.org/qgiswiki/PythonBindings and http:// 
wiki.qgis.org/qgiswiki/Building_with_CMake

- -gary

- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGFriY1zKuzV6goTgRAhLEAKCo/71mhOT6iF9hT7meK13/nCe1OACfeexv
boeqtyTK99UqQmXiU5Bn9Ak=
=teGd
-----END PGP SIGNATURE-----

From mcoletti at lychnobite.org  Fri Apr  6 19:20:57 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build (was: cannot
	find FLEX problem ...)
In-Reply-To: <A0CC43A8-10A1-4D90-9801-A008B14F956B@mrcc.com>
References: <20070406210058.GK3506@lychnobite.org>
	<A0CC43A8-10A1-4D90-9801-A008B14F956B@mrcc.com>
Message-ID: <20070406232057.GM3506@lychnobite.org>

On Fri, Apr 06, 2007 at 01:16:08PM -0800, Gary Sherman wrote:
> On Apr 6, 2007, at 1:00 PM, Mark Coletti wrote:
> 
> >mcoletti@mcolettib886:~/projects/qgis> cmake .
> >CMake Error: Error in cmake code at
> >/home/mcoletti/projects/qgis/CMakeLists.txt:47:
> 
> Also see: http://wiki.qgis.org/qgiswiki/PythonBindings and http:// 
> wiki.qgis.org/qgiswiki/Building_with_CMake

  Yep, had been using those; thanks for the tip, anyhoo.

  And, now I'm getting this:

mcoletti@mcolettib886:~/projects/qgis> make
[  0%] Built target svnversion
[  9%] Built target ui
[ 27%] Built target qgis_core
[ 33%] Built target qgis_gui
[ 65%] Built target qgis
[ 69%] Built target translations
make[2]: *** No rule to make target `src/core/libqgis_core.so', needed by `python/core/Makefile'.  Stop.
make[1]: *** [python/CMakeFiles/python.dir/all] Error 2
make: *** [all] Error 2


According to the Wiki, it should find the qgis core libraries.  I've
set LD_LIBRARY_PATH:

mcoletti@mcolettib886:~/projects/qgis> echo $LD_LIBRARY_PATH
/home/mcoletti/lib


And that directory contains the qgis core library it's whining about:

mcoletti@mcolettib886:~/projects/qgis> ll $LD_LIBRARY_PATH/*core.so
-rwxr-xr-x 1 mcoletti users 15760584 2007-04-06 17:48 /home/mcoletti/lib/libqgis_core.so


Sooooo, what now?  I'm a little lost here.

Cheers,

Mark



From sploid at yandex.ru  Sat Apr  7 04:51:39 2007
From: sploid at yandex.ru (sploid)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] units per pixel
Message-ID: <000301c778f1$f54f12c0$0101a8c0@homeb6d939fc46>

Help me please.

 I need to change  factor ( units per pixel by Y)/(units per pixel by X).
 It is at the moment equal 1..

 Where it is necessary to make it?

QgsMapCanvas?
QgsMapRender?
QgsMapToPixel?

help please.


From morb at beagle.com.au  Sun Apr  8 23:23:18 2007
From: morb at beagle.com.au (Brendan Morley)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class fashion
	for QgsMapCanvas
Message-ID: <1176088999.2754.34.camel@localhost.localdomain>

Dear fellow developers,

I've been experimenting (in my personal code base) with the use of
QGraphicsScene / QGraphicsView / QGraphicsItem as I believe TrollTech
intended them.

My proof of concept seems to work (so far) and I now want to see if
there is any interest to collaborating on this further within the QGIS
dev team.


Here's what I have so far:

1. Current State of Trunk

a. QgsMapCanvas is now a QGraphicsView
b. The QGraphicsView is attached to a QGraphicsScene.
c. The QGraphicsScene is populated by a QGraphicsRectItem, 
d. The QGraphicsRectItem is the QgsMapCanvasMap.
e. The QgsMapCanvasMap renders itself by fetching the drawable features
and rendering onto its own QPixmap.
f. The QgsMapCanvasMap paints itself by painting its QPixmap. 
g. The QGraphicsScene coordinates are 1:1 with the QGraphicsView
coordinates.
h. The 1:1 mapping is maintained by a proprietary implementation.
e. Panning is handled in a proprietary implementation.

2. Design

a. All drawable features are represented by a corresponding
QGraphicsItem.
b. Vector features become QGraphicsItems with an attached Path
(using .addPath).
c. Vector features also have attached ToolTips if possible.
d. Raster layers would continue to be QGraphicsRectItems.
e. Incremental drawing to be restored.
f. Ability to halt a drawing operation to be restored.


3. Deprecations

a. The QgsMapToPixel object is obsolete, since Map coordinates are
equivalent to Scene coordinates and Pixel coordinates are equivalent to
View coordinates.
b. The QgsMapCanvasMap is obsolete, since vector features can be added
directly to the QGraphicsScene rather than being abstracted through the
QgsMapCanvasMap.

4. Probable Deprecations

a. The Pan tool should be refactored to exploit the built-in dragging of
the QGraphicsView.
b. The feature selection method should be refactored to exploit the
built-in selection functionality of the QGraphicsScene.


5. Benefits

a. I have already got incremental rendering working - this was broken
every since we ported to Qt4.
b. Ability to exploit ToolTips.
c. Ability to move features as a whole, rather than point by point.
d. Ability to rotate the map with only a little extra code.
e. Qt4.3 looks like having perspective transformations.  We can start
simulating those pseudo-3D road navigation devices!
(http://zrusin.blogspot.com/2006/09/perspective-transformations.html)
f. Let TrollTech worry about enhancing this code rather than us.


Thanks,
Brendan.


From sherman at mrcc.com  Sun Apr  8 23:44:57 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class
	fashion for QgsMapCanvas
In-Reply-To: <1176088999.2754.34.camel@localhost.localdomain>
References: <1176088999.2754.34.camel@localhost.localdomain>
Message-ID: <873DEED9-EB8B-479B-8A20-6FF86B563DA3@mrcc.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Apr 8, 2007, at 7:23 PM, Brendan Morley wrote:

> I've been experimenting (in my personal code base) with the use of
> QGraphicsScene / QGraphicsView / QGraphicsItem as I believe TrollTech
> intended them.
>
> My proof of concept seems to work (so far) and I now want to see if
> there is any interest to collaborating on this further within the QGIS
> dev team.

This sounds interesting to me. I wonder what impacts it will have on  
Python binding and current work being done in the various branches  
(diagram-branch, provider0_9-branch, raster_transparency_branch).

Perhaps we can get an opinion from Marco, Martin, Peter, Tim and  
anybody else working in those areas....

- -gary
- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
- -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (Darwin)

iD8DBQFGGba61zKuzV6goTgRAivwAJoCm8GKsKCGpuMV8a6oD2xE4UdgUQCfTZmD
ZpZXr16WbzZvMgb4IkpIrOw=
=6iPI
-----END PGP SIGNATURE-----

From wonder.sk at gmail.com  Mon Apr  9 11:53:40 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build (was: cannot
	find FLEX problem ...)
In-Reply-To: <20070406232057.GM3506@lychnobite.org>
References: <20070406210058.GK3506@lychnobite.org>
	<A0CC43A8-10A1-4D90-9801-A008B14F956B@mrcc.com>
	<20070406232057.GM3506@lychnobite.org>
Message-ID: <e8e7199c0704090853gc7f46f4p168c2698c2ccbe42@mail.gmail.com>

On 4/7/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
>
> mcoletti@mcolettib886:~/projects/qgis> make
> [  0%] Built target svnversion
> [  9%] Built target ui
> [ 27%] Built target qgis_core
> [ 33%] Built target qgis_gui
> [ 65%] Built target qgis
> [ 69%] Built target translations
> make[2]: *** No rule to make target `src/core/libqgis_core.so', needed by `python/core/Makefile'.  Stop.
> make[1]: *** [python/CMakeFiles/python.dir/all] Error 2
> make: *** [all] Error 2

Hi Mark,

let's explain a bit how does process of building python bindings work:
1. wrapper source files are generated from *.sip files (using sip utility)
2. custom makefiles are created for building the python modules (using
sip utility)
3. makefiles are run from cmake build system <-- here it comes to your problem

I'm wondering why it complains that src/core/libqgis_core.so library
is missing - what's the name of the output file which is built in
qgis_core target?

> According to the Wiki, it should find the qgis core libraries.  I've
> set LD_LIBRARY_PATH:
>
> mcoletti@mcolettib886:~/projects/qgis> echo $LD_LIBRARY_PATH
> /home/mcoletti/lib
>
>
> And that directory contains the qgis core library it's whining about:
>
> mcoletti@mcolettib886:~/projects/qgis> ll $LD_LIBRARY_PATH/*core.so
> -rwxr-xr-x 1 mcoletti users 15760584 2007-04-06 17:48 /home/mcoletti/lib/libqgis_core.so

Setting LD_LIBRARY_PATH won't help - it expects the library to be
directly in your build directory - the path is hardcoded in the
generated custom makefile.

Btw. preferred way how to build QGIS with cmake is to use out of
source builds. There should be no difference but it doesn't pollute
sources with any generated files and it's simpler to do a complete
clean or have more builds at once (Debug/Release, with/without GRASS
etc.)

Martin

From wonder.sk at gmail.com  Mon Apr  9 13:49:46 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] units per pixel
In-Reply-To: <000301c778f1$f54f12c0$0101a8c0@homeb6d939fc46>
References: <000301c778f1$f54f12c0$0101a8c0@homeb6d939fc46>
Message-ID: <e8e7199c0704091049w8ec510ajd8d3e3e79d018e28@mail.gmail.com>

>  I need to change  factor ( units per pixel by Y)/(units per pixel by X).
>  It is at the moment equal 1..
>
>  Where it is necessary to make it?
>
> QgsMapCanvas?
> QgsMapRender?
> QgsMapToPixel?

Hi,

the right place to do something like this is to modify QgsMapToPixel
as this is the class for conversion between screen and map coordinates
and is used by all other classes such as QgsMapRender or QgsMapCanvas.

Martin

From wonder.sk at gmail.com  Mon Apr  9 14:15:27 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class
	fashion for QgsMapCanvas
In-Reply-To: <1176088999.2754.34.camel@localhost.localdomain>
References: <1176088999.2754.34.camel@localhost.localdomain>
Message-ID: <e8e7199c0704091115m2039543cw14d6f061e837349@mail.gmail.com>

Hi Brendan

On 4/9/07, Brendan Morley <morb@beagle.com.au> wrote:
>
> 2. Design
>
> a. All drawable features are represented by a corresponding
> QGraphicsItem.
> b. Vector features become QGraphicsItems with an attached Path
> (using .addPath).
> c. Vector features also have attached ToolTips if possible.
> d. Raster layers would continue to be QGraphicsRectItems.
> e. Incremental drawing to be restored.
> f. Ability to halt a drawing operation to be restored.

Important question is the performance when representing features as
QGraphicsItems. Personally I'm in favour to use this implementation
but definitely we should find out first if this won't eat too much
processor time (and memory).

> 3. Deprecations
>
> a. The QgsMapToPixel object is obsolete, since Map coordinates are
> equivalent to Scene coordinates and Pixel coordinates are equivalent to
> View coordinates.
> b. The QgsMapCanvasMap is obsolete, since vector features can be added
> directly to the QGraphicsScene rather than being abstracted through the
> QgsMapCanvasMap.

I'm not sure whether QgsMapToPixel should be obsoleted - when you're
using only core libraries (no map canvas) there should be a simple way
how to convert between the coordinates when doing something with
rendered map.

I can imagine when QgsMapCanvasMap can be a good option - in case you
have many raster layers - each represented by one canvas item with a
pixmap, the memory overhead can be big. When layers are rendered to
one pixmap, you don't need a buffer for every layer.


> 4. Probable Deprecations
>
> a. The Pan tool should be refactored to exploit the built-in dragging of
> the QGraphicsView.
> b. The feature selection method should be refactored to exploit the
> built-in selection functionality of the QGraphicsScene.

a - Yes, panning would be better if done with default QGraphicsView
functionality.

> 5. Benefits
>
> a. I have already got incremental rendering working - this was broken
> every since we ported to Qt4.

What were the necessary changes?

> d. Ability to rotate the map with only a little extra code.
> e. Qt4.3 looks like having perspective transformations.  We can start
> simulating those pseudo-3D road navigation devices!
> (http://zrusin.blogspot.com/2006/09/perspective-transformations.html)

Perspective transformations look very good. I'm currently developing a
simple navigation and routing application (as a school project) based
on QGIS libs + python and this looks like a must have feature :-)


Martin

From mcoletti at lychnobite.org  Tue Apr 10 16:13:11 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build
In-Reply-To: <e8e7199c0704090853gc7f46f4p168c2698c2ccbe42@mail.gmail.com>
References: <20070406210058.GK3506@lychnobite.org>
	<A0CC43A8-10A1-4D90-9801-A008B14F956B@mrcc.com>
	<20070406232057.GM3506@lychnobite.org>
	<e8e7199c0704090853gc7f46f4p168c2698c2ccbe42@mail.gmail.com>
Message-ID: <20070410201311.GU3506@lychnobite.org>

On Mon, Apr 09, 2007 at 05:53:40PM +0200, Martin Dobias wrote:
> On 4/7/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
> >
> >mcoletti@mcolettib886:~/projects/qgis> make
> >[  0%] Built target svnversion
> >[  9%] Built target ui
> >[ 27%] Built target qgis_core
> >[ 33%] Built target qgis_gui
> >[ 65%] Built target qgis
> >[ 69%] Built target translations
> >make[2]: *** No rule to make target `src/core/libqgis_core.so', needed by 
> >`python/core/Makefile'.  Stop.
> >make[1]: *** [python/CMakeFiles/python.dir/all] Error 2
> >make: *** [all] Error 2
> 
> Hi Mark,
> 
> let's explain a bit how does process of building python bindings work:
> 1. wrapper source files are generated from *.sip files (using sip utility)
> 2. custom makefiles are created for building the python modules (using
> sip utility)
> 3. makefiles are run from cmake build system <-- here it comes to your 
> problem

  I'm curious to know whether the sip generated Makefiles will be
  clobbered by cmake.

  In any case, this is the only Makefile in the entire 'qgis/python'
  hierarchy:

mcoletti@mcolettib886:~/projects/qgis> find python/ -name "Makefile"
python/Makefile

  And it appears to be created via CMake:

mcoletti@mcolettib886:~/projects/qgis> head python/Makefile
# CMAKE generated file: DO NOT EDIT!
# Generated by "Unix Makefiles" Generator, CMake Version 2.4

  So there does not exist in that hierarchy any make files generated
  via sip.

> I'm wondering why it complains that src/core/libqgis_core.so library
> is missing - what's the name of the output file which is built in
> qgis_core target?

  Target from which Makefile?  Certainly not from the aforementioned
  CMake generated Makefile found in 'qgis/python':

mcoletti@mcolettib886:~/projects/qgis> grep qgis_core python/Makefile
mcoletti@mcolettib886:~/projects/qgis>

  I.e., ain't no such target in that Makefile.

  [...]

> Btw. preferred way how to build QGIS with cmake is to use out of
> source builds. There should be no difference but it doesn't pollute
> sources with any generated files and it's simpler to do a complete
> clean or have more builds at once (Debug/Release, with/without GRASS
> etc.)

  I'm confused by your phrase "out of source builds."  I'm using
  subversion to check out the latest source from HEAD and am building
  from that and not from source from a distribution tarball or from a
  non-HEAD subversion branch.  Is that to what you're referring?


Cheers,

Mark

From mcoletti at lychnobite.org  Tue Apr 10 16:51:09 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build]
Message-ID: <20070410205108.GX3506@lychnobite.org>

----- Forwarded message from Mark Coletti <mcoletti@lychnobite.org> -----

Date: Tue, 10 Apr 2007 16:13:11 -0400
From: Mark Coletti <mcoletti@lychnobite.org>
Cc: QGIS <qgis-developer@lists.qgis.org>
Subject: Re: [Qgis-developer] Cmake and the unhappy python build

On Mon, Apr 09, 2007 at 05:53:40PM +0200, Martin Dobias wrote:
> On 4/7/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
> >
> >mcoletti@mcolettib886:~/projects/qgis> make
> >[  0%] Built target svnversion
> >[  9%] Built target ui
> >[ 27%] Built target qgis_core
> >[ 33%] Built target qgis_gui
> >[ 65%] Built target qgis
> >[ 69%] Built target translations
> >make[2]: *** No rule to make target `src/core/libqgis_core.so', needed by 
> >`python/core/Makefile'.  Stop.
> >make[1]: *** [python/CMakeFiles/python.dir/all] Error 2
> >make: *** [all] Error 2

----- End forwarded message -----

  A temporary work around is to create symbolic links to the existing
  libraries for which the make file is looking.  Note that this will
  have to be done for both 'libqgis_core.so' and 'libqgis_gui.so', as
  so:

mcoletti@mcolettib886:~/projects/qgis> ln -s ~/lib/libqgis_core.so src/core/libqgis_core.so
mcoletti@mcolettib886:~/projects/qgis> ln -s ~/lib/libqgis_gui.so src/gui/libqgis_gui.so


  I suspect that the problem cause is because I want to install qgis
  and the python bindings in my home directory.  That is, some CMake
  settings might presume that global bindings and '/usr/local' as the
  default prefix.  I admit this is just a guess.  Maybe someone else
  can try to build and install everything into their home directory to
  possibly reproduce my errors?



Cheers,

Mark


From wonder.sk at gmail.com  Tue Apr 10 16:57:33 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build
In-Reply-To: <20070410201311.GU3506@lychnobite.org>
References: <20070406210058.GK3506@lychnobite.org>
	<A0CC43A8-10A1-4D90-9801-A008B14F956B@mrcc.com>
	<20070406232057.GM3506@lychnobite.org>
	<e8e7199c0704090853gc7f46f4p168c2698c2ccbe42@mail.gmail.com>
	<20070410201311.GU3506@lychnobite.org>
Message-ID: <e8e7199c0704101357t19a97b14s403f052b8e63c466@mail.gmail.com>

On 4/10/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
>
>   I'm curious to know whether the sip generated Makefiles will be
>   clobbered by cmake.
>
>   In any case, this is the only Makefile in the entire 'qgis/python'
>   hierarchy:
>
> mcoletti@mcolettib886:~/projects/qgis> find python/ -name "Makefile"
> python/Makefile
>
>   And it appears to be created via CMake:
>
> mcoletti@mcolettib886:~/projects/qgis> head python/Makefile
> # CMAKE generated file: DO NOT EDIT!
> # Generated by "Unix Makefiles" Generator, CMake Version 2.4
>
>   So there does not exist in that hierarchy any make files generated
>   via sip.

That's right - main makefile for python bindings (python/Makefile) is
generated from CMake. But makefiles which build python bindings should
be python/core/Makefile and python/gui/Makefile - something had to go
wrong if they don't exist. But then I don't understand this:

> > >make[2]: *** No rule to make target `src/core/libqgis_core.so', needed by
> > >`python/core/Makefile'.  Stop.

Which looks like python/core/Makefile exists...


> > I'm wondering why it complains that src/core/libqgis_core.so library
> > is missing - what's the name of the output file which is built in
> > qgis_core target?
>
>   Target from which Makefile?  Certainly not from the aforementioned
>   CMake generated Makefile found in 'qgis/python':
>
> mcoletti@mcolettib886:~/projects/qgis> grep qgis_core python/Makefile
> mcoletti@mcolettib886:~/projects/qgis>
>
>   I.e., ain't no such target in that Makefile.

libqgis_core.so is built by src/core/Makefile.


> > Btw. preferred way how to build QGIS with cmake is to use out of
> > source builds. There should be no difference but it doesn't pollute
> > sources with any generated files and it's simpler to do a complete
> > clean or have more builds at once (Debug/Release, with/without GRASS
> > etc.)
>
>   I'm confused by your phrase "out of source builds."  I'm using
>   subversion to check out the latest source from HEAD and am building
>   from that and not from source from a distribution tarball or from a
>   non-HEAD subversion branch.  Is that to what you're referring?

Out of source builds are mentioned on wiki:
http://wiki.qgis.org/qgiswiki/Building_with_CMake
Basically it means that all build related files (configuration,
makefiles, generated files, output files) are in a separate directory.

Martin

From wonder.sk at gmail.com  Tue Apr 10 17:43:06 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build]
In-Reply-To: <20070410205108.GX3506@lychnobite.org>
References: <20070410205108.GX3506@lychnobite.org>
Message-ID: <e8e7199c0704101443n1e188692o49256e19b1a1a290@mail.gmail.com>

On 4/10/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
>
> > >mcoletti@mcolettib886:~/projects/qgis> make
> > >[  0%] Built target svnversion
> > >[  9%] Built target ui
> > >[ 27%] Built target qgis_core
> > >[ 33%] Built target qgis_gui
> > >[ 65%] Built target qgis
> > >[ 69%] Built target translations
> > >make[2]: *** No rule to make target `src/core/libqgis_core.so', needed by
> > >`python/core/Makefile'.  Stop.
> > >make[1]: *** [python/CMakeFiles/python.dir/all] Error 2
> > >make: *** [all] Error 2
>
> ----- End forwarded message -----
>
>   A temporary work around is to create symbolic links to the existing
>   libraries for which the make file is looking.  Note that this will
>   have to be done for both 'libqgis_core.so' and 'libqgis_gui.so', as
>   so:
>
> mcoletti@mcolettib886:~/projects/qgis> ln -s ~/lib/libqgis_core.so src/core/libqgis_core.so
> mcoletti@mcolettib886:~/projects/qgis> ln -s ~/lib/libqgis_gui.so src/gui/libqgis_gui.so
>
>
>   I suspect that the problem cause is because I want to install qgis
>   and the python bindings in my home directory.  That is, some CMake
>   settings might presume that global bindings and '/usr/local' as the
>   default prefix.  I admit this is just a guess.  Maybe someone else
>   can try to build and install everything into their home directory to
>   possibly reproduce my errors?

libqgis_core.so and libqgis_gui.so must reside also in src/core/ resp.
src/gui/ subdirectory from where you build. I don't understand why
it's not there in your case... I build always to my home directory so
there shouldn't be any difference. Can you check from where are the
qgis_core and qgis_gui libraries copied on make install?

Martin

From mcoletti at lychnobite.org  Tue Apr 10 18:27:48 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build]
In-Reply-To: <e8e7199c0704101443n1e188692o49256e19b1a1a290@mail.gmail.com>
References: <20070410205108.GX3506@lychnobite.org>
	<e8e7199c0704101443n1e188692o49256e19b1a1a290@mail.gmail.com>
Message-ID: <20070410222747.GZ3506@lychnobite.org>

On Tue, Apr 10, 2007 at 11:43:06PM +0200, Martin Dobias wrote:
> On 4/10/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
[...]
> >mcoletti@mcolettib886:~/projects/qgis> ln -s ~/lib/libqgis_core.so 
> >src/core/libqgis_core.so
> >mcoletti@mcolettib886:~/projects/qgis> ln -s ~/lib/libqgis_gui.so 
> >src/gui/libqgis_gui.so

[...]

> libqgis_core.so and libqgis_gui.so must reside also in src/core/ resp.
> src/gui/ subdirectory from where you build. I don't understand why
> it's not there in your case... I build always to my home directory so
> there shouldn't be any difference. Can you check from where are the
> qgis_core and qgis_gui libraries copied on make install?

  As the quoted text suggests, both libraries are installed in
  $HOME/lib.  And, yes, they do exist:

mcoletti@mcolettib886:~/projects/qgis> ll ~/lib/libqgis*.so
lrwxrwxrwx 1 mcoletti users       25 2007-01-25 13:29 /home/mcoletti/lib/libqgis_composer.so -> libqgis_composer.so.1.0.0
-rw-r--r-- 1 mcoletti users 15760552 2007-04-10 17:35 /home/mcoletti/lib/libqgis_core.so
lrwxrwxrwx 1 mcoletti users       21 2006-10-16 15:10 /home/mcoletti/lib/libqgisgrass.so -> libqgisgrass.so.0.0.1
-rw-r--r-- 1 mcoletti users  4699076 2007-04-10 17:35 /home/mcoletti/lib/libqgis_gui.so
lrwxrwxrwx 1 mcoletti users       23 2007-01-25 13:29 /home/mcoletti/lib/libqgis_legend.so -> libqgis_legend.so.1.0.0
lrwxrwxrwx 1 mcoletti users       23 2007-01-25 13:29 /home/mcoletti/lib/libqgis_raster.so -> libqgis_raster.so.1.0.0


  And now when I run qgis, it core dumps.  Something is most unhappy.  :-\

  I'm going to make clean and try the build source directory.  I'm
  have a feeling that's not going to help.


Cheers,

Mark


From mcoletti at lychnobite.org  Tue Apr 10 18:31:29 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] CMake mystery option: LIB_PATH LIB_PATH-NOTFOUND
Message-ID: <20070410223129.GA3506@lychnobite.org>

So what does this CMake option do?

 LIB_PATH                         LIB_PATH-NOTFOUND

All the description says is "Path to a library."  Mmm'kay.  WHAT library?


Cheers,

Mark

From wonder.sk at gmail.com  Tue Apr 10 18:42:05 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build]
In-Reply-To: <20070410222747.GZ3506@lychnobite.org>
References: <20070410205108.GX3506@lychnobite.org>
	<e8e7199c0704101443n1e188692o49256e19b1a1a290@mail.gmail.com>
	<20070410222747.GZ3506@lychnobite.org>
Message-ID: <e8e7199c0704101542p7593565v409123679ca14392@mail.gmail.com>

On 4/11/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
> On Tue, Apr 10, 2007 at 11:43:06PM +0200, Martin Dobias wrote:
> > On 4/10/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
> [...]
> > >mcoletti@mcolettib886:~/projects/qgis> ln -s ~/lib/libqgis_core.so
> > >src/core/libqgis_core.so
> > >mcoletti@mcolettib886:~/projects/qgis> ln -s ~/lib/libqgis_gui.so
> > >src/gui/libqgis_gui.so
>
> [...]
>
> > libqgis_core.so and libqgis_gui.so must reside also in src/core/ resp.
> > src/gui/ subdirectory from where you build. I don't understand why
> > it's not there in your case... I build always to my home directory so
> > there shouldn't be any difference. Can you check from where are the
> > qgis_core and qgis_gui libraries copied on make install?
>
>   As the quoted text suggests, both libraries are installed in
>   $HOME/lib.  And, yes, they do exist:
>
> mcoletti@mcolettib886:~/projects/qgis> ll ~/lib/libqgis*.so
> lrwxrwxrwx 1 mcoletti users       25 2007-01-25 13:29 /home/mcoletti/lib/libqgis_composer.so -> libqgis_composer.so.1.0.0
> -rw-r--r-- 1 mcoletti users 15760552 2007-04-10 17:35 /home/mcoletti/lib/libqgis_core.so
> lrwxrwxrwx 1 mcoletti users       21 2006-10-16 15:10 /home/mcoletti/lib/libqgisgrass.so -> libqgisgrass.so.0.0.1
> -rw-r--r-- 1 mcoletti users  4699076 2007-04-10 17:35 /home/mcoletti/lib/libqgis_gui.so
> lrwxrwxrwx 1 mcoletti users       23 2007-01-25 13:29 /home/mcoletti/lib/libqgis_legend.so -> libqgis_legend.so.1.0.0
> lrwxrwxrwx 1 mcoletti users       23 2007-01-25 13:29 /home/mcoletti/lib/libqgis_raster.so -> libqgis_raster.so.1.0.0
>
>
>   And now when I run qgis, it core dumps.  Something is most unhappy.  :-\
>
>   I'm going to make clean and try the build source directory.  I'm
>   have a feeling that's not going to help.

But I haven't asked where are the libs installed (your $HOME/lib) - I
asked about their presence in qgis source tree: libqgis_core.so must
be created in BUILD_DIR/src/core directory - BUILD_DIR is
~/projects/qgis in your case. So ~/projects/qgis/src/core is the place
where makefiles for python bindings search for the library. Is
libqgis_core.so there or it isn't?

Btw. you have also files from old qgis installation in ~/lib (e.g.
qgis_composer, qgis_legend etc). While they shouldn't do any harm,
there's not much use for them.

Martin

From wonder.sk at gmail.com  Tue Apr 10 18:46:57 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] CMake mystery option: LIB_PATH LIB_PATH-NOTFOUND
In-Reply-To: <20070410223129.GA3506@lychnobite.org>
References: <20070410223129.GA3506@lychnobite.org>
Message-ID: <e8e7199c0704101546g5d43a241jb1587e02f152f04e@mail.gmail.com>

On 4/11/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
> So what does this CMake option do?
>
>  LIB_PATH                         LIB_PATH-NOTFOUND
>
> All the description says is "Path to a library."  Mmm'kay.  WHAT library?

That's just a temporary variable used when searching for GRASS (see
cmake/FindGRASS.cmake). It shouldn't be visible, I'll fix that later.
But it shouldn't have any impact on other build stuff.

Martin

From mcoletti at lychnobite.org  Tue Apr 10 18:46:55 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Out of source build not working
Message-ID: <20070410224655.GC3506@lychnobite.org>

I've followed the following Wiki instructions for an out of source
build found at http://wiki.qgis.org/qgiswiki/Building_with_CMake :

mkdir build
cd build
cmake ..
make
make install


And this happens:

mcoletti@mcolettib886:~/projects/qgis/build> make
make: *** No targets specified and no makefile found.  Stop.


Because:

mcoletti@mcolettib886:~/projects/qgis/build> ll
total 0


I'm, for the third time, going to nuke the entire source tree and to a
fresh checkout from subversion and try again.  Third time is the
charm, right?


Cheers,

Mark


From wonder.sk at gmail.com  Tue Apr 10 18:55:22 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Out of source build not working
In-Reply-To: <20070410224655.GC3506@lychnobite.org>
References: <20070410224655.GC3506@lychnobite.org>
Message-ID: <e8e7199c0704101555u5cd81f21j3c696f94021b9ddc@mail.gmail.com>

On 4/11/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
> I've followed the following Wiki instructions for an out of source
> build found at http://wiki.qgis.org/qgiswiki/Building_with_CMake :
>
> mkdir build
> cd build
> cmake ..
> make
> make install
>
>
> And this happens:
>
> mcoletti@mcolettib886:~/projects/qgis/build> make
> make: *** No targets specified and no makefile found.  Stop.

It seems that there was a problem when running "cmake .."
What does that command output for you?

Martin

From mcoletti at lychnobite.org  Tue Apr 10 18:59:44 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Out of source build not working
In-Reply-To: <20070410224655.GC3506@lychnobite.org>
References: <20070410224655.GC3506@lychnobite.org>
Message-ID: <20070410225944.GD3506@lychnobite.org>

On Tue, Apr 10, 2007 at 06:46:55PM -0400, Mark Coletti wrote:
> I've followed the following Wiki instructions for an out of source
> build found at http://wiki.qgis.org/qgiswiki/Building_with_CMake :

[...]

> And this happens:
> 
> mcoletti@mcolettib886:~/projects/qgis/build> make
> make: *** No targets specified and no makefile found.  Stop.
> 
> 
> Because:
> 
> mcoletti@mcolettib886:~/projects/qgis/build> ll
> total 0
> 
> 
> I'm, for the third time, going to nuke the entire source tree and to a
> fresh checkout from subversion and try again.

  The build now appears to be operating normally in a separate 'build'
  directory.  This suggests that if you have already done a
  configuration via cmake that the given instructions for doing
  subsequent builds in separate directory hierarchies won't work.
  Again, I'm not confident in that assertion since I'm new to cmake.



Cheers,

Mark


From sherman at mrcc.com  Tue Apr 10 21:33:54 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] FOSS4G 2007 Registration is Open
Message-ID: <04999602-64D4-479D-856F-16565F5A67C9@mrcc.com>

 From the Conference Committee:

=================================================================

Subject: FOSS4G 2007 Registration is Open

2007 Free and Open Source Software for Geospatial (FOSS4G) Conference  
September 24-27, Victoria Conference Centre, Victoria, BC.

ONLINE REGISTRATION IS NOW OPEN!

We are pleased to announce that online registration for the 2007 Free  
and Open Source Software for Geospatial conference (FOSS4G 2007) is  
now open. FOSS4G 2007 is the annual event bringing together the  
people and companies who create, use, and support open source  
geospatial software.

Register now by logging onto http://www.foss4g2007.org/register/

Register prior to the July 27th Early Bird Deadline to save on your  
registration fees! Take advantage of the opportunity FOSS4G 2007  
offers to network with fellow geospatial data professionals, renew  
old acquaintances and make new ones.

For up-to-date information, registration and/or to submit a  
presentation, please visit the conference website at http:// 
www.foss4g2007.org/.

EXHIBITOR AND SPONSORSHIP OPPORTUNITIES

For information on exhibitor and sponsorship opportunities, see  
http://foss4g2007.org/sponsors or contact Paul Ramsey, Conference  
Chair via email at pramsey@foss4g2007.org.

SUBMIT A PRESENTATION

Submit a presentation online at http://www.foss4g2007.org/ 
presentations/. The deadline for submissions is June 29th 2007.

FOSS4G presentations are 25 minute talks, with 5 minute question and  
answer sessions at the end. Presentations cover the use or  
development of open source geospatial software. Anyone can submit a  
presentation proposal and take part in the conference as a presenter.  
More information is available on the presentations page on the website.

We hope to see you in Victoria, Canada in September!

=================================================================
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-




From marco.hugentobler at karto.baug.ethz.ch  Wed Apr 11 02:25:59 2007
From: marco.hugentobler at karto.baug.ethz.ch (Marco Hugentobler)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class
	fashion for QgsMapCanvas
In-Reply-To: <1176088999.2754.34.camel@localhost.localdomain>
References: <1176088999.2754.34.camel@localhost.localdomain>
Message-ID: <200704110826.00064.marco.hugentobler@karto.baug.ethz.ch>

Hi Brendan,

This is very interesting. I have some questions:

What is your experience about performance and memory requirements of this 
solution?

Am I right that the changes do not affect libqgis_core and libqgis_gui, only 
the code on top of it?

 Could you make a .tgz available so that developers can test?

Regards,
Marco

Am Montag, 9. April 2007 05:23 schrieb Brendan Morley:
> Dear fellow developers,
>
> I've been experimenting (in my personal code base) with the use of
> QGraphicsScene / QGraphicsView / QGraphicsItem as I believe TrollTech
> intended them.
>
> My proof of concept seems to work (so far) and I now want to see if
> there is any interest to collaborating on this further within the QGIS
> dev team.
>
>
> Here's what I have so far:
>
> 1. Current State of Trunk
>
> a. QgsMapCanvas is now a QGraphicsView
> b. The QGraphicsView is attached to a QGraphicsScene.
> c. The QGraphicsScene is populated by a QGraphicsRectItem,
> d. The QGraphicsRectItem is the QgsMapCanvasMap.
> e. The QgsMapCanvasMap renders itself by fetching the drawable features
> and rendering onto its own QPixmap.
> f. The QgsMapCanvasMap paints itself by painting its QPixmap.
> g. The QGraphicsScene coordinates are 1:1 with the QGraphicsView
> coordinates.
> h. The 1:1 mapping is maintained by a proprietary implementation.
> e. Panning is handled in a proprietary implementation.
>
> 2. Design
>
> a. All drawable features are represented by a corresponding
> QGraphicsItem.
> b. Vector features become QGraphicsItems with an attached Path
> (using .addPath).
> c. Vector features also have attached ToolTips if possible.
> d. Raster layers would continue to be QGraphicsRectItems.
> e. Incremental drawing to be restored.
> f. Ability to halt a drawing operation to be restored.
>
>
> 3. Deprecations
>
> a. The QgsMapToPixel object is obsolete, since Map coordinates are
> equivalent to Scene coordinates and Pixel coordinates are equivalent to
> View coordinates.
> b. The QgsMapCanvasMap is obsolete, since vector features can be added
> directly to the QGraphicsScene rather than being abstracted through the
> QgsMapCanvasMap.
>
> 4. Probable Deprecations
>
> a. The Pan tool should be refactored to exploit the built-in dragging of
> the QGraphicsView.
> b. The feature selection method should be refactored to exploit the
> built-in selection functionality of the QGraphicsScene.
>
>
> 5. Benefits
>
> a. I have already got incremental rendering working - this was broken
> every since we ported to Qt4.
> b. Ability to exploit ToolTips.
> c. Ability to move features as a whole, rather than point by point.
> d. Ability to rotate the map with only a little extra code.
> e. Qt4.3 looks like having perspective transformations.  We can start
> simulating those pseudo-3D road navigation devices!
> (http://zrusin.blogspot.com/2006/09/perspective-transformations.html)
> f. Let TrollTech worry about enhancing this code rather than us.
>
>
> Thanks,
> Brendan.
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer

From wonder.sk at gmail.com  Wed Apr 11 09:24:14 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
Message-ID: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>

Hi all,

today I've merged provider0_9-branch we've been recently working on.
We hope that there are not any regressions but one never knows :-) All
changes are related to vector providers and vector data handling.

Changes visible for users:
- export to shapefile
- highlighting of currently identified feature

Main changes visible for developers:
- QgsVectorDataProvider
  - altered semantic of select(), getNextFeature(), reset()
  - removal of some deprecated functions
  - minValue() and maxValue() return QVariant
- QgsGeometry
  - added geometry factories: fromPoint, fromPolyline, fromPolygon, fromRect

Martin

From b.rowlingson at lancaster.ac.uk  Wed Apr 11 09:50:52 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Windows builds of 0.9 with python?
Message-ID: <461CE7BC.8050706@lancaster.ac.uk>

Has anyone got a build of Qgis with python plugin support for Windows 
that could be made available?

  I've been trying to compile it myself, but am running into various 
problems related to a) my ineptitude at compiling stuff for Windows, b) 
confusion between cygwin, msys, and minGW, c) trouble with various 
versions of python, sip, pyqt4, d) 'make' wanting double backslashes in 
paths whereas configure.py was generating single backslashes (this was 
for compiling PyQt4. This is probably related to b). *sigh*.

  Now my machine is probably so dirty with various versions of eveything 
that the process is no longer reproducible...

  On the plus side, I did get cmake working :)

  If anyone can help, please let me know!

Barry

From cavallini at faunalia.it  Wed Apr 11 10:59:42 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
In-Reply-To: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
References: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
Message-ID: <461CF7DE.3070908@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

First tests: I got an error while committing changes to postgis:
ERROR:  syntax error at or near "," at character 1689
pc

Martin Dobias ha scritto:
> Hi all,
> 
> today I've merged provider0_9-branch we've been recently working on.
> We hope that there are not any regressions but one never knows :-) All
> changes are related to vector providers and vector data handling.
> 
> Changes visible for users:
> - export to shapefile
> - highlighting of currently identified feature
> 
> Main changes visible for developers:
> - QgsVectorDataProvider
>  - altered semantic of select(), getNextFeature(), reset()
>  - removal of some deprecated functions
>  - minValue() and maxValue() return QVariant
> - QgsGeometry
>  - added geometry factories: fromPoint, fromPolyline, fromPolygon, fromRect
> 
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer
> 

- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGHPfe/NedwLUzIr4RAvxbAJ9yEXSz4+zLQug50O8Qm1KrGO10eQCfR+NU
QbGqOoGium7iHxpDf4F/Uw4=
=TCu2
-----END PGP SIGNATURE-----

From marco.hugentobler at karto.baug.ethz.ch  Wed Apr 11 11:45:32 2007
From: marco.hugentobler at karto.baug.ethz.ch (Marco Hugentobler)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
In-Reply-To: <461CF7DE.3070908@faunalia.it>
References: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
	<461CF7DE.3070908@faunalia.it>
Message-ID: <200704111745.33005.marco.hugentobler@karto.baug.ethz.ch>

Hi Paolo,

I'm going to have a look at this problem.

Regards,
Marco

Am Mittwoch, 11. April 2007 16:59 schrieb Paolo Cavallini:
> First tests: I got an error while committing changes to postgis:
> ERROR:  syntax error at or near "," at character 1689
> pc
>
> Martin Dobias ha scritto:
> > Hi all,
> >
> > today I've merged provider0_9-branch we've been recently working on.
> > We hope that there are not any regressions but one never knows :-) All
> > changes are related to vector providers and vector data handling.
> >
> > Changes visible for users:
> > - export to shapefile
> > - highlighting of currently identified feature
> >
> > Main changes visible for developers:
> > - QgsVectorDataProvider
> >  - altered semantic of select(), getNextFeature(), reset()
> >  - removal of some deprecated functions
> >  - minValue() and maxValue() return QVariant
> > - QgsGeometry
> >  - added geometry factories: fromPoint, fromPolyline, fromPolygon,
> > fromRect
> >
> > Martin
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer@lists.qgis.org
> > http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Wed Apr 11 11:42:39 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
In-Reply-To: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
References: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
Message-ID: <461D01EF.2070909@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

furthermore, there seem to be a performance problem: opening a dbf table
takes looong... And also opening large shp is very slow (90 seconds for
a 70 Mb shp).
pc

Martin Dobias ha scritto:
> Hi all,
> 
> today I've merged provider0_9-branch we've been recently working on.
> We hope that there are not any regressions but one never knows :-) All
> changes are related to vector providers and vector data handling.
> 
> Changes visible for users:
> - export to shapefile
> - highlighting of currently identified feature
> 
> Main changes visible for developers:
> - QgsVectorDataProvider
>  - altered semantic of select(), getNextFeature(), reset()
>  - removal of some deprecated functions
>  - minValue() and maxValue() return QVariant
> - QgsGeometry
>  - added geometry factories: fromPoint, fromPolyline, fromPolygon, fromRect

- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGHQHv/NedwLUzIr4RAjW8AJsFRSZ1sO4/FIj7mXqIoIf/b6MnqgCePpOm
sOilxwZqTM7F8LGa1YZS9FQ=
=nWN/
-----END PGP SIGNATURE-----

From mcoletti at lychnobite.org  Wed Apr 11 14:46:10 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Cmake and the unhappy python build]
In-Reply-To: <e8e7199c0704101542p7593565v409123679ca14392@mail.gmail.com>
References: <20070410205108.GX3506@lychnobite.org>
	<e8e7199c0704101443n1e188692o49256e19b1a1a290@mail.gmail.com>
	<20070410222747.GZ3506@lychnobite.org>
	<e8e7199c0704101542p7593565v409123679ca14392@mail.gmail.com>
Message-ID: <20070411184610.GG3506@lychnobite.org>

On Wed, Apr 11, 2007 at 12:42:05AM +0200, Martin Dobias wrote:

> But I haven't asked where are the libs installed (your $HOME/lib) - I
> asked about their presence in qgis source tree: libqgis_core.so must
> be created in BUILD_DIR/src/core directory - BUILD_DIR is
> ~/projects/qgis in your case. So ~/projects/qgis/src/core is the place
> where makefiles for python bindings search for the library. Is
> libqgis_core.so there or it isn't?

  I did a fresh checkout from subversion HEAD and was able to get a
  separate build directory sorted.  (Which implies that if one
  subsequently wants to create a separate build directory after
  already configuring via cmake for a different directory, that there
  must be a mechanism to convince cmake to work in the new hierarchy.
  At least I hope so, because my current work-around seems to be doing
  a fresh checkout from subversion.)

  In any case, after doing all that I'm back to the original error:

mcoletti@mcolettib886:~/projects/qgis/build> make
[  0%] Built target svnversion
[  9%] Built target ui
[ 27%] Built target qgis_core
[ 33%] Built target qgis_gui
[ 65%] Built target qgis
[ 69%] Built target translations
make[2]: *** No rule to make target `src/core/libqgis_core.so', needed by `python/core/Makefile'.  Stop.
make[1]: *** [python/CMakeFiles/python.dir/all] Error 2
make: *** [all] Error 2

  And no sign of that library in the build hierarchy:

mcoletti@mcolettib886:~/projects/qgis/build> find . -name libqgis_core.so
mcoletti@mcolettib886:~/projects/qgis/build>

  But it _is_ in the install directory:

mcoletti@mcolettib886:~/projects/qgis/build> find $QGIS_PREFIX/lib -name libqgis_core.so
/home/mcoletti/lib/libqgis_core.so

  Would it be helpful to post any CMake state info?  (And, if so, ummm
  where does CMake store that?)

> Btw. you have also files from old qgis installation in ~/lib (e.g.
> qgis_composer, qgis_legend etc). While they shouldn't do any harm,
> there's not much use for them.

  I deleted them.


Cheers,

Mark

From magnus at homann.se  Wed Apr 11 14:59:01 2007
From: magnus at homann.se (Magnus Homann)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Out of source build not working
In-Reply-To: <20070410225944.GD3506@lychnobite.org>
References: <20070410224655.GC3506@lychnobite.org>
	<20070410225944.GD3506@lychnobite.org>
Message-ID: <461D2FF5.1030704@homann.se>

Mark Coletti wrote:
> On Tue, Apr 10, 2007 at 06:46:55PM -0400, Mark Coletti wrote:
>> I'm, for the third time, going to nuke the entire source tree and to a
>> fresh checkout from subversion and try again.
> 
>   The build now appears to be operating normally in a separate 'build'
>   directory.  This suggests that if you have already done a
>   configuration via cmake that the given instructions for doing
>   subsequent builds in separate directory hierarchies won't work.
>   Again, I'm not confident in that assertion since I'm new to cmake.

Cmake discovers that the path that you point it to ('..') already 
contains a configured setup (I think it looks for CMakeCache.txt), and 
just reconfigures that build again.

If it does not fins a buidl where you point it to, it creates a new in 
the $CWD.

Not so inutitive.

That's why you should never build in-source... :-)

Magnus
-- 
Magnus Homann
magnus@homann.se
+46 702 399 558

From magnus at homann.se  Wed Apr 11 15:00:40 2007
From: magnus at homann.se (Magnus Homann)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Windows builds of 0.9 with python?
In-Reply-To: <461CE7BC.8050706@lancaster.ac.uk>
References: <461CE7BC.8050706@lancaster.ac.uk>
Message-ID: <461D3058.1010909@homann.se>

Barry Rowlingson wrote:
> Has anyone got a build of Qgis with python plugin support for Windows 
> that could be made available?
> 
>  I've been trying to compile it myself, but am running into various 
> problems related to a) my ineptitude at compiling stuff for Windows, b) 
> confusion between cygwin, msys, and minGW, c) trouble with various 
> versions of python, sip, pyqt4, d) 'make' wanting double backslashes in 
> paths whereas configure.py was generating single backslashes (this was 
> for compiling PyQt4. This is probably related to b). *sigh*.
> 
>  Now my machine is probably so dirty with various versions of eveything 
> that the process is no longer reproducible...
> 
>  On the plus side, I did get cmake working :)
> 
>  If anyone can help, please let me know!

Did you follow the instructions in README_windows.txt? Did it work?

Magnus
-- 
Magnus Homann
magnus@homann.se
+46 702 399 558

From mcoletti at lychnobite.org  Wed Apr 11 16:29:05 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] CMake and python build now happy
Message-ID: <20070411202905.GL3506@lychnobite.org>

I've discovered the cause of my build problem -- I had set the CMake
LIBRARY_OUTPUT_PATH to $HOME/lib, so all generated libraries were
being placed there instead of within the build directory hierarchy.
This is why make couldn't find the libraries.  qgis HEAD now builds
and runs properly.  (Including finding all plug-ins and icon files.
Huzzah!  Looks spiffy, too.  Now to play with the python bindings.
*squee*)

I'm wondering if maybe a little CMake refactoring would be useful?  I
inferred from previous threads on this topic that the CMake conversion
is still in flux.  Hopefully a CMake newbie such as myself will be
helpful in guiding such a refactoring.

So, given:

User-Agent: experienced software developer, familiar with make
            systems, but new to CMake (knows enough to be dangerous,
            and not enough to almost guarantee Bad Things Will Happen)

Use-Case: build and install system in a target directory; under
	  autoconf systems, this would be set via the configure
	  ``--prefix'' argument, in CMake use CMAKE_INSTALL_PREFIX

Here's a likely scenario (indeed the very one I fell in):         

The user-agent will likely skim TFM for basic CMake instructions and
peruse both the distribution based install instructions and those
found in ancillary sources, such as web sites.  (E.g., the useful
Wiki.)  The user-agent desires to set the install prefix, and notes
that the basic install instructions at
http://wiki.qgis.org/qgiswiki/Building_with_CMake describe the
environment variable CMAKE_INSTALL_PREFIX to set install target
hierarchy.  However the user-agent will _also_ note the ccmake curses
based command, and will use that just to see all the possible build
options.  There, the user-agent will see the shiny LIBRARY_OUTPUT_PATH
and set that, too, though will be puzzled at the redundancy.


				 ###

So there are two choices here:

1) Hide LIBRARY_OUTPUT_PATH from user configuration since it's use
   _will_ break builds.  I understand, perhaps mistakenly, that this
   is possible based on previous correspondence.  Essentially follow
   Scott Meyers' principle of making it impossible for a tool to be
   improperly used.

2) Keep it, but document it what it is for and possible use scenarios
   (e.g., maybe installing library binaries for different binary
   platforms); ensure that its settings are propagated properly
   throughout build process so that the correct modified library
   locations are used instead of defaults.

Which-ever path is selected, natch, make sure that the Wiki is
updated to deal with this scenario.

				 ###

I hope this helps!

And now off to learn more about the (hopefully happy) marriage of qgis
and python.

Cheers,

Mark


From jctull at gmail.com  Wed Apr 11 16:48:54 2007
From: jctull at gmail.com (John C. Tull)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Re: [Quantum GIS] #694: Text labels missing in
	postgis vector layer 0.9 trunk
In-Reply-To: <052.4e5041146897fcfb601e053a7f0eccf1@qgis.org>
References: <043.622fc09c7c0f97cf2e494168474f2c20@qgis.org>
	<052.4e5041146897fcfb601e053a7f0eccf1@qgis.org>
Message-ID: <33148760-8CFE-4274-9DB0-E9EBEE771B56@biodiversity.unr.edu>

I just built 0.9.0-Unstable (6881) from subversion and the labels  
still are not working.

OS X 10.4.9 build following Tim Sutton's cmake build instructions,  
etc., etc.

I will hold off on making a change to the bug tracker item until the  
problem can be confirmed or refuted by others.

Cheers,
John Tull

On Apr 11, 2007, at 7:08 AM, Quantum GIS wrote:

> #694: Text labels missing in postgis vector layer 0.9 trunk
> ------------------------------------- 
> +--------------------------------------
>         Reporter:  jctull@gmail.com  |         Owner:  nobody
>             Type:  bug               |        Status:  closed
>         Priority:  major             |     Milestone:  Version 0.9
>        Component:  Build/Install     |       Version:
>       Resolution:  fixed             |      Keywords:  labels  
> canvas postgis
> Platform_version:  10.4.9            |      Platform:  OS X
>         Must_fix:  Yes               |   Status_info:  0
> ------------------------------------- 
> +--------------------------------------
> Changes (by wonder):
>
>   * status:  reopened => closed
>   * resolution:  => fixed
>
> Comment:
>
>  Merged to trunk (r6879).
>
> -- 
> Ticket URL: <https://svn.qgis.org/trac/ticket/694#comment:5>
> Quantum GIS <http://qgis.org>
> Quantum GIS is an Open Source GIS viewer/editor supporting OGR,  
> PostGIS, and GRASS formats


From b.rowlingson at lancaster.ac.uk  Wed Apr 11 16:49:42 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Windows builds of 0.9 with python?
In-Reply-To: <461D3058.1010909@homann.se>
References: <461CE7BC.8050706@lancaster.ac.uk> <461D3058.1010909@homann.se>
Message-ID: <461D49E6.2030202@lancaster.ac.uk>

Magnus Homann wrote:

> Did you follow the instructions in README_windows.txt? Did it work?

  Ah, I was mainly going on what I read on the wiki. I'll have another 
go later, but that readme doesn't mention python, sip, or pyqt4...

  Perhaps I should try and make a simpler build without python first.

  Thanks,

Barry

From marco.hugentobler at karto.baug.ethz.ch  Thu Apr 12 04:01:55 2007
From: marco.hugentobler at karto.baug.ethz.ch (Marco Hugentobler)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
In-Reply-To: <461CF7DE.3070908@faunalia.it>
References: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
	<461CF7DE.3070908@faunalia.it>
Message-ID: <200704121001.55165.marco.hugentobler@karto.baug.ethz.ch>

Dear Paolo,

This is fixed now. Could you try if it works also with your db?

The problem was that postgis does not accept empty strings in the INSERT 
statement, so I replaced them with DEFAULT. Strange that it worked in earlier 
versions.

Regards,
Marco

Am Mittwoch, 11. April 2007 16:59 schrieb Paolo Cavallini:
> First tests: I got an error while committing changes to postgis:
> ERROR:  syntax error at or near "," at character 1689
> pc
>
> Martin Dobias ha scritto:
> > Hi all,
> >
> > today I've merged provider0_9-branch we've been recently working on.
> > We hope that there are not any regressions but one never knows :-) All
> > changes are related to vector providers and vector data handling.
> >
> > Changes visible for users:
> > - export to shapefile
> > - highlighting of currently identified feature
> >
> > Main changes visible for developers:
> > - QgsVectorDataProvider
> >  - altered semantic of select(), getNextFeature(), reset()
> >  - removal of some deprecated functions
> >  - minValue() and maxValue() return QVariant
> > - QgsGeometry
> >  - added geometry factories: fromPoint, fromPolyline, fromPolygon,
> > fromRect
> >
> > Martin
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer@lists.qgis.org
> > http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer

From geronik444 at gmail.com  Thu Apr 12 06:46:20 2007
From: geronik444 at gmail.com (Nikos Geronitidis)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Question about grass Integration
Message-ID: <2b0dc300704120346l791ee8a8te171720cd3e2cc48@mail.gmail.com>

Hello

    I have posted this question in order to contact with Radim Blazek who is
reported to have done a lot of work with the grass integration part, but
also to accept
advices from QGis Developers.
I am interested in adding new modules for Grass Tools that are part of the
GrassPlugin.
I have already red the instructions given at
http://wiki.qgis.org/qgiswiki/Adding_New_Tools_to_the_GRASS_Toolbox?highlight=%28grass%29
.
Is this neccessary when using this method reported on this link, to compile
the qgis source? Is there an alternative method? (e.g. is it possible to add
new modules on grass tools
in an already installed version of qgis?

-- 
Best Regards
Nikos Gerontidis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070412/c82505a6/attachment.html
From stephan.holl at intevation.de  Thu Apr 12 06:53:42 2007
From: stephan.holl at intevation.de (Stephan Holl)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Question about grass Integration
In-Reply-To: <2b0dc300704120346l791ee8a8te171720cd3e2cc48@mail.gmail.com>
References: <2b0dc300704120346l791ee8a8te171720cd3e2cc48@mail.gmail.com>
Message-ID: <20070412125342.1bd5659a@localhost>

Hello Nikos,

"Nikos Geronitidis" <geronik444@gmail.com>, [20070412-13:46:20]:

> Hello
> 
>     I have posted this question in order to contact with Radim Blazek
> who is reported to have done a lot of work with the grass integration
> part, but also to accept
> advices from QGis Developers.
> I am interested in adding new modules for Grass Tools that are part
> of the GrassPlugin.
> I have already red the instructions given at
> http://wiki.qgis.org/qgiswiki/Adding_New_Tools_to_the_GRASS_Toolbox?highlight=%28grass%29
> .
> Is this neccessary when using this method reported on this link, to
> compile the qgis source? Is there an alternative method? (e.g. is it
> possible to add new modules on grass tools
> in an already installed version of qgis?
> 

Yes, it is possible. You just need to copy the relevant XML and
image-files to the appropriate place in your already-installed
QGIS-installation.

QGIS will pick up the modules after a restart of QGIS AFAIK.

Perhaps we should a new paragraph to the wiki which describes how to
integrate new modules in a personal copy of QGIS for local use (and
later integration upstream).

Best

	Stephan


-- 
Stephan Holl <stephan.holl@intevation.de>, http://intevation.de/~stephan
Tel: +49 (0)541-33 50 8 32 | Intevation GmbH | AG Osnabr?ck - HR B 18998
Gesch?ftsf?hrer:  Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070412/62d2f101/signature.bin
From wonder.sk at gmail.com  Thu Apr 12 08:22:45 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] CMake and python build now happy
In-Reply-To: <20070411202905.GL3506@lychnobite.org>
References: <20070411202905.GL3506@lychnobite.org>
Message-ID: <e8e7199c0704120522w306ce3e3p859e9e05f79d9489@mail.gmail.com>

On 4/11/07, Mark Coletti <mcoletti@lychnobite.org> wrote:
> I've discovered the cause of my build problem -- I had set the CMake
> LIBRARY_OUTPUT_PATH to $HOME/lib, so all generated libraries were
> being placed there instead of within the build directory hierarchy.
> This is why make couldn't find the libraries.  qgis HEAD now builds
> and runs properly.  (Including finding all plug-ins and icon files.
> Huzzah!  Looks spiffy, too.  Now to play with the python bindings.
> *squee*)

Ouch! I think noone before tried to change that variable :-)

> [...]
>
> So there are two choices here:
>
> 1) Hide LIBRARY_OUTPUT_PATH from user configuration since it's use
>    _will_ break builds.  I understand, perhaps mistakenly, that this
>    is possible based on previous correspondence.  Essentially follow
>    Scott Meyers' principle of making it impossible for a tool to be
>    improperly used.
>
> 2) Keep it, but document it what it is for and possible use scenarios
>    (e.g., maybe installing library binaries for different binary
>    platforms); ensure that its settings are propagated properly
>    throughout build process so that the correct modified library
>    locations are used instead of defaults.

I've decided for option 1 - commited in r6883. Toggling a variable as
advanced (thus hidden by default) should be a good warning for average
user. In fact I don't know what is benefit of this variable
(LIBRARY_OUTPUT_FILE). I've hidden also that temporary LIB_PATH
variable so users should ever hit these ones.


> And now off to learn more about the (hopefully happy) marriage of qgis
> and python.

Good luck :-)

Martin

From cavallini at faunalia.it  Thu Apr 12 08:49:14 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Question about grass Integration
In-Reply-To: <20070412125342.1bd5659a@localhost>
References: <2b0dc300704120346l791ee8a8te171720cd3e2cc48@mail.gmail.com>
	<20070412125342.1bd5659a@localhost>
Message-ID: <461E2ACA.4000209@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Nikos.
We did this for a large number of modules, and it's quite easy.
pc

Stephan Holl ha scritto:
> Hello Nikos,
> 
> "Nikos Geronitidis" <geronik444@gmail.com>, [20070412-13:46:20]:
> 
>> Hello
>>
>>     I have posted this question in order to contact with Radim Blazek
>> who is reported to have done a lot of work with the grass integration
>> part, but also to accept
>> advices from QGis Developers.
>> I am interested in adding new modules for Grass Tools that are part
>> of the GrassPlugin.
>> I have already red the instructions given at
>> http://wiki.qgis.org/qgiswiki/Adding_New_Tools_to_the_GRASS_Toolbox?highlight=%28grass%29
>> .
>> Is this neccessary when using this method reported on this link, to
>> compile the qgis source? Is there an alternative method? (e.g. is it
>> possible to add new modules on grass tools
>> in an already installed version of qgis?
>>
> 
> Yes, it is possible. You just need to copy the relevant XML and
> image-files to the appropriate place in your already-installed
> QGIS-installation.
> 
> QGIS will pick up the modules after a restart of QGIS AFAIK.
> 
> Perhaps we should a new paragraph to the wiki which describes how to
> integrate new modules in a personal copy of QGIS for local use (and
> later integration upstream).
> 
> Best
> 
> 	Stephan
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer

- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGHirK/NedwLUzIr4RAmEsAJ9NO7lvw0bNRJpEqWhyybhTuGhyCgCgj7pv
t7TN8+WCaQ7zuDXCjW0yv5c=
=O9j+
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Thu Apr 12 09:49:43 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
In-Reply-To: <200704121001.55165.marco.hugentobler@karto.baug.ethz.ch>
References: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>	<461CF7DE.3070908@faunalia.it>
	<200704121001.55165.marco.hugentobler@karto.baug.ethz.ch>
Message-ID: <461E38F7.6020404@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Thanks, it works now.
However, when exporting from postgis to shp qgis crashes.
All the best.
pc

Marco Hugentobler ha scritto:
> Dear Paolo,
> 
> This is fixed now. Could you try if it works also with your db?
> 
> The problem was that postgis does not accept empty strings in the INSERT 
> statement, so I replaced them with DEFAULT. Strange that it worked in earlier 
> versions.
> 
> Regards,
> Marco
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGHjj3/NedwLUzIr4RAqmlAKCQNDQ+wC1OzVPqesRaDdMoZtoz4ACguW5W
VitsaEylS/pBDqPoqOo9p44=
=F7Jo
-----END PGP SIGNATURE-----

From telwertowski at comcast.net  Thu Apr 12 16:01:13 2007
From: telwertowski at comcast.net (Tom Elwertowski)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Re: [Quantum GIS] #694: Text labels missing
	in	postgis vector layer 0.9 trunk
In-Reply-To: <33148760-8CFE-4274-9DB0-E9EBEE771B56@biodiversity.unr.edu>
References: <043.622fc09c7c0f97cf2e494168474f2c20@qgis.org>	<052.4e5041146897fcfb601e053a7f0eccf1@qgis.org>
	<33148760-8CFE-4274-9DB0-E9EBEE771B56@biodiversity.unr.edu>
Message-ID: <461E9009.2020501@comcast.net>

John C. Tull wrote:
> I just built 0.9.0-Unstable (6881) from subversion and the labels still 
> are not working.
> 
> I will hold off on making a change to the bug tracker item until the 
> problem can be confirmed or refuted by others.

When I load a project containing a PostGIS layer with Display labels 
checked using 6883, I do not see labels even though Display labels is 
still checked in the Layer Properties Labels dialog. If I uncheck labels 
and click Ok, then check labels and click Ok, I still see no labels.

Tom

From cavallini at faunalia.it  Fri Apr 13 03:46:22 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
In-Reply-To: <200704111745.33005.marco.hugentobler@karto.baug.ethz.ch>
References: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
	<461CF7DE.3070908@faunalia.it>
	<200704111745.33005.marco.hugentobler@karto.baug.ethz.ch>
Message-ID: <461F354E.5010405@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Some more problems with postgis editing: removing points does not work
reliably; qgis complains of a wrong snapping level, but after adjusting
it it removes previously selected points.
All the best.
pc

Marco Hugentobler ha scritto:
> Hi Paolo,
> 
> I'm going to have a look at this problem.
> 
> Regards,
> Marco
> 
> Am Mittwoch, 11. April 2007 16:59 schrieb Paolo Cavallini:
>> First tests: I got an error while committing changes to postgis:
>> ERROR:  syntax error at or near "," at character 1689
>> pc
>>
>> Martin Dobias ha scritto:
>>> Hi all,
>>>
>>> today I've merged provider0_9-branch we've been recently working on.
>>> We hope that there are not any regressions but one never knows :-) All
>>> changes are related to vector providers and vector data handling.
>>>
>>> Changes visible for users:
>>> - export to shapefile
>>> - highlighting of currently identified feature
>>>
>>> Main changes visible for developers:
>>> - QgsVectorDataProvider
>>>  - altered semantic of select(), getNextFeature(), reset()
>>>  - removal of some deprecated functions
>>>  - minValue() and maxValue() return QVariant
>>> - QgsGeometry
>>>  - added geometry factories: fromPoint, fromPolyline, fromPolygon,
>>> fromRect
>>>
>>> Martin
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGHzVO/NedwLUzIr4RAqhVAJ94wCgbTFF0WxsVp0L44AkwN5fsBACeKJzs
wVrZWhOtMa+sgchRpPXO1BU=
=3doH
-----END PGP SIGNATURE-----

From morb at beagle.com.au  Fri Apr 13 06:58:27 2007
From: morb at beagle.com.au (Brendan Morley)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class
	fashion for QgsMapCanvas
In-Reply-To: <e8e7199c0704091115m2039543cw14d6f061e837349@mail.gmail.com>
References: <1176088999.2754.34.camel@localhost.localdomain>
	<e8e7199c0704091115m2039543cw14d6f061e837349@mail.gmail.com>
Message-ID: <1176461907.2858.15.camel@localhost.localdomain>

Martin,

On Mon, 2007-04-09 at 20:15 +0200, Martin Dobias wrote:
> On 4/9/07, Brendan Morley <morb@beagle.com.au> wrote:
> > 2. Design
> > a. All drawable features are represented by a corresponding
> > QGraphicsItem.

> Important question is the performance when representing features as
> QGraphicsItems. Personally I'm in favour to use this implementation
> but definitely we should find out first if this won't eat too much
> processor time (and memory).

I can submit the code as a patch in email or as a new subversion branch;
then you can contrast and compare to your heart's content.

You can probably tell that my bias is to favour programming agility over
runtime capacity, especially if it's only a minor tradeoff.

You can also check out the Qt demo "chip".

> > 3. Deprecations
> >
> > a. The QgsMapToPixel object is obsolete, since Map coordinates are
> > equivalent to Scene coordinates and Pixel coordinates are equivalent to
> > View coordinates.
> > b. The QgsMapCanvasMap is obsolete, since vector features can be added
> > directly to the QGraphicsScene rather than being abstracted through the
> > QgsMapCanvasMap.
> 
> I'm not sure whether QgsMapToPixel should be obsoleted - when you're
> using only core libraries (no map canvas) there should be a simple way
> how to convert between the coordinates when doing something with
> rendered map.

What use-case would necessitate only the core library?

I remember a conversation maybe 6-12 months ago where we may have wanted
to render a map scene directly to an image file.

In the new paradigm, you would add your items to the QGraphicsScene and
then call QGraphicsScene.render() or QGraphicsView.render() (probably
more the latter).

> I can imagine when QgsMapCanvasMap can be a good option - in case you
> have many raster layers - each represented by one canvas item with a
> pixmap, the memory overhead can be big. When layers are rendered to
> one pixmap, you don't need a buffer for every layer.

Good point.  Admittedly my bias is towards the vector eye candy (e.g.
tooltips) so this was a blind spot.  I haven't actually progressed the
raster side too much yet.

> > 5. Benefits
> >
> > a. I have already got incremental rendering working - this was broken
> > every since we ported to Qt4.
> 
> What were the necessary changes?

Just keep adding QGraphicsItems to the QGraphicsScene, then do a
processEvents() at the desired multiple of added QGraphicsItems. 

> > d. Ability to rotate the map with only a little extra code.
> > e. Qt4.3 looks like having perspective transformations.  We can start
> > simulating those pseudo-3D road navigation devices!
> > (http://zrusin.blogspot.com/2006/09/perspective-transformations.html)
> 
> Perspective transformations look very good. I'm currently developing a
> simple navigation and routing application (as a school project) based
> on QGIS libs + python and this looks like a must have feature :-)

Well we'll need to prepare the foundations then won't we? (-:


Brendan


From morb at beagle.com.au  Fri Apr 13 07:01:31 2007
From: morb at beagle.com.au (Brendan Morley)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class
	fashion for QgsMapCanvas
In-Reply-To: <e8e7199c0704091115m2039543cw14d6f061e837349@mail.gmail.com>
References: <1176088999.2754.34.camel@localhost.localdomain>
	<e8e7199c0704091115m2039543cw14d6f061e837349@mail.gmail.com>
Message-ID: <1176462091.23321.1.camel@localhost.localdomain>

Martin,

On Mon, 2007-04-09 at 20:15 +0200, Martin Dobias wrote: 
> On 4/9/07, Brendan Morley <morb@beagle.com.au> wrote:
> > 2. Design
> > a. All drawable features are represented by a corresponding
> > QGraphicsItem.

> Important question is the performance when representing features as
> QGraphicsItems. Personally I'm in favour to use this implementation
> but definitely we should find out first if this won't eat too much
> processor time (and memory).

I can submit the code as a patch in email or as a new subversion branch;
then you can contrast and compare to your heart's content.

You can probably tell that my bias is to favour programming agility over
runtime capacity, especially if it's only a minor tradeoff.

You can also check out the Qt demo "chip".

> > 3. Deprecations
> >
> > a. The QgsMapToPixel object is obsolete, since Map coordinates are
> > equivalent to Scene coordinates and Pixel coordinates are equivalent to
> > View coordinates.
> > b. The QgsMapCanvasMap is obsolete, since vector features can be added
> > directly to the QGraphicsScene rather than being abstracted through the
> > QgsMapCanvasMap.
> 
> I'm not sure whether QgsMapToPixel should be obsoleted - when you're
> using only core libraries (no map canvas) there should be a simple way
> how to convert between the coordinates when doing something with
> rendered map.

What use-case would necessitate only the core library?

I remember a conversation maybe 6-12 months ago where we may have wanted
to render a map scene directly to an image file.

In the new paradigm, you would add your items to the QGraphicsScene and
then call QGraphicsScene.render() or QGraphicsView.render() - probably
the latter.

> I can imagine when QgsMapCanvasMap can be a good option - in case you
> have many raster layers - each represented by one canvas item with a
> pixmap, the memory overhead can be big. When layers are rendered to
> one pixmap, you don't need a buffer for every layer.

Good point.  Admittedly my bias is towards the vector eye candy (e.g.
tooltips) so this was a blind spot.  I haven't actually progressed the
raster side too much yet.

> > 5. Benefits
> >
> > a. I have already got incremental rendering working - this was broken
> > every since we ported to Qt4.
> 
> What were the necessary changes?

Just keep adding QGraphicsItems to the QGraphicsScene, then do a
processEvents() at the desired multiple of added QGraphicsItems. 

> > d. Ability to rotate the map with only a little extra code.
> > e. Qt4.3 looks like having perspective transformations.  We can start
> > simulating those pseudo-3D road navigation devices!
> > (http://zrusin.blogspot.com/2006/09/perspective-transformations.html)
> 
> Perspective transformations look very good. I'm currently developing a
> simple navigation and routing application (as a school project) based
> on QGIS libs + python and this looks like a must have feature :-)

Well we'll need to prepare the foundations then won't we? (-:


Brendan


From morb at beagle.com.au  Fri Apr 13 07:34:56 2007
From: morb at beagle.com.au (Brendan Morley)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class
	fashion for QgsMapCanvas
In-Reply-To: <200704110826.00064.marco.hugentobler@karto.baug.ethz.ch>
References: <1176088999.2754.34.camel@localhost.localdomain>
	<200704110826.00064.marco.hugentobler@karto.baug.ethz.ch>
Message-ID: <1176464096.23321.15.camel@localhost.localdomain>

On Wed, 2007-04-11 at 08:25 +0200, Marco Hugentobler wrote:
> Hi Brendan,
> 
> This is very interesting. I have some questions:
> 
> What is your experience about performance and memory requirements of this 
> solution?

It works OK for me, but I probably don't ramp up the vertex count as
much as some (-:

> Am I right that the changes do not affect libqgis_core and libqgis_gui, only 
> the code on top of it?

Hmmm.  I've touched

QgsMapLayer and children
QgsRenderer and children
QgsComposerMap
QgsMarkerCatalogue
QgsSymbol
QgsLabel
QgsMapRender
QgsMapCanvas
QgsMapCanvasMap
QpsMapOverviewCanvas

My stupid question is, why does this matter to you?

>  Could you make a .tgz available so that developers can test?

Even better, try the attached diff against today's HEAD version.
Caution:
1. Try on a fresh checkout of r6883.
2. The only thing that really works is the Single Symbol render of
linestrings and polygons.  I haven't worked on anything else yet.


Good luck,
Brendan
-------------- next part --------------
A non-text attachment was scrubbed...
Name: qgis-qgraphicsscene-example.r6883.diff.txt
Type: text/x-patch
Size: 98446 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070413/2403b2c2/qgis-qgraphicsscene-example.r6883.diff.bin
From sherman at mrcc.com  Fri Apr 13 09:59:17 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] HEAD fails to compile
Message-ID: <D3316B27-891C-4E4C-AE05-A602B922E0FA@mrcc.com>

Has there been a change in the GEOS dependency?

/home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp: In  
static member function 'static QgsGeometry* QgsGeometry::fromPolyline 
(const QgsPolyline&)':
/home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp:91:  
error: no matching function for call to  
'geos::CoordinateSequenceFactory::create(int, int) const'
/usr/local/include/geos/geom.h:993: note: candidates are: virtual  
geos::CoordinateSequence* geos::CoordinateSequenceFactory::create 
(std::vector<geos::Coordinate, std::allocator<geos::Coordinate> >*)  
const
/home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp: In  
static member function 'static QgsGeometry* QgsGeometry::fromPolygon 
(const QgsPolygon&)':
/home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp:113:  
error: no matching function for call to  
'geos::CoordinateSequenceFactory::create(int, int) const'
/usr/local/include/geos/geom.h:993: note: candidates are: virtual  
geos::CoordinateSequence* geos::CoordinateSequenceFactory::create 
(std::vector<geos::Coordinate, std::allocator<geos::Coordinate> >*)  
const

-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-




From frdcn at hotmail.com  Fri Apr 13 15:42:49 2007
From: frdcn at hotmail.com (godofredo contreras)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] About ecw support
Message-ID: <BAY110-W14FEC2665A777031CF5417B25D0@phx.gbl>

Hi:
     I am involved in a project that needs a tool to make some compression using libecw library in windows platform. I have tried to build libecw using mingw with no success, also I made an import library using a dll compiled with msvc. I think that I can use the import library to compress and decompress to an from ecw files, but I?am a little concerned with showing ecw files through gdal in qgis, I tried to recompile gdal using the import library but I got some errors regarding wchar_t and unicode support in header files. Any ideas how can I solve the problem or somebody who could guide me to port libecw to mingw?
 
Regards
Godofredo Contreras
    
_________________________________________________________________
Take a break and play crossword puzzles - FREE!
http://games.msn.com/en/flexicon/default.htm?icid=flexicon_ wlmemailtaglinemarch07
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070413/ddc3e3b6/attachment.html
From telwertowski at comcast.net  Fri Apr 13 16:02:57 2007
From: telwertowski at comcast.net (Tom Elwertowski)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] HEAD fails to compile
In-Reply-To: <D3316B27-891C-4E4C-AE05-A602B922E0FA@mrcc.com>
References: <D3316B27-891C-4E4C-AE05-A602B922E0FA@mrcc.com>
Message-ID: <461FE1F1.70806@comcast.net>

Gary Sherman wrote:
> Has there been a change in the GEOS dependency?
> 
> /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp: In static 
> member function 'static QgsGeometry* QgsGeometry::fromPolyline(const 
> QgsPolyline&)':
> /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp:91: error: 
> no matching function for call to 
> 'geos::CoordinateSequenceFactory::create(int, int) const'
> /usr/local/include/geos/geom.h:993: note: candidates are: virtual 
> geos::CoordinateSequence* 
> geos::CoordinateSequenceFactory::create(std::vector<geos::Coordinate, 
> std::allocator<geos::Coordinate> >*) const

This appears to be new code but it does compile for me using geos/Ubuntu 
2.2.1, geos/Mac 2.2.3 and geos/Mac 3.0.0rc4.

Pehaps you have an older geos? Is
virtual CoordinateSequence *create(unsigned int size, unsigned int dims) 
const;
declared in geom.h?

Tom

From sherman at mrcc.com  Fri Apr 13 16:07:41 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] HEAD fails to compile
In-Reply-To: <D3316B27-891C-4E4C-AE05-A602B922E0FA@mrcc.com>
References: <D3316B27-891C-4E4C-AE05-A602B922E0FA@mrcc.com>
Message-ID: <2BC8CBE8-EFF2-41B1-91F3-B58D71849138@mrcc.com>

It appears that geos::CoordinateSequenceFactory::create(int, int)  
const is not present in geos 2.1.4 and that latest merge introduced  
its use into QGIS. I upgraded my geos to latest 2.x and that solved  
the problem.

-gary

On Apr 13, 2007, at 5:59 AM, Gary Sherman wrote:

> Has there been a change in the GEOS dependency?
>
> /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp: In  
> static member function 'static QgsGeometry*  
> QgsGeometry::fromPolyline(const QgsPolyline&)':
> /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp:91:  
> error: no matching function for call to  
> 'geos::CoordinateSequenceFactory::create(int, int) const'
> /usr/local/include/geos/geom.h:993: note: candidates are: virtual  
> geos::CoordinateSequence* geos::CoordinateSequenceFactory::create 
> (std::vector<geos::Coordinate, std::allocator<geos::Coordinate> >*)  
> const
> /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp: In  
> static member function 'static QgsGeometry* QgsGeometry::fromPolygon 
> (const QgsPolygon&)':
> /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp:113:  
> error: no matching function for call to  
> 'geos::CoordinateSequenceFactory::create(int, int) const'
> /usr/local/include/geos/geom.h:993: note: candidates are: virtual  
> geos::CoordinateSequence* geos::CoordinateSequenceFactory::create 
> (std::vector<geos::Coordinate, std::allocator<geos::Coordinate> >*)  
> const
>
> -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
> Gary Sherman
> Micro Resources: http://mrcc.com
>   *Geospatial Hosting
>   *Web Site Hosting
> "We work virtually everywhere"
> -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer

-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-




From geronik444 at gmail.com  Sat Apr 14 08:12:28 2007
From: geronik444 at gmail.com (Nikos Geronitidis)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Compiling Problems
Message-ID: <2b0dc300704140512q4b3501eaq5577f725fa11c4f2@mail.gmail.com>

Hello

  I am trying to build QGis-Titan on a Suse-10.2 64 bit platform. The
building process ends with the following messages shown below:

//a-qgshttptransaction.o libqgis_core_la-qgslabelattributes.olibqgis_core_la-
qgslgger.o libqgis_core_la-qgsmaptopixel.o libqgis_core_la-
qgsmarkercatalogue.o libqtlistviewitem.o
libqgis_core_la-qgspluginitem.olibqgis_core_la-
qgspluginregistrmbol.o
libqgis_core_la-qgsprojectproperty.olibqgis_core_la-qgsprovidercountcalcs_core_la-
qgsprovidermetadata.o
libqgis_core_la-qgsproviderregistry.olibqgis_covider.o
libqgis_core_la-
qgsrect.o libqgis_core_la-qgsrenderer.o libqgis_core_la-s_core_la-
qgssearchstring.o libqgis_core_la-qgssearchstringlexer.o libqgis_core_e.o
libqgis_core_la-qgssymbol.o
libqgis_core_la-qgssymbologyutils.olibqgis_coremoc.o libqgis_core_la-
qgsdataprovider.moc.o libqgis_core_la-qgshttptransaction.m
ranlib .libs/libqgis_core.a
creating libqgis_core.la
(cd .libs && rm -f libqgis_core.la && ln -s ../libqgis_core.la
libqgis_core.la)
gmake[4]: Leaving directory `/home/nick/qgis-0.8.0/src/core'
gmake[3]: Leaving directory `/home/nick/qgis-0.8.0/src/core'
Making all in ui
gmake[3]: Entering directory `/home/nick/qgis-0.8.0/src/ui'
gmake[3]: *** No rule to make target `ui_qgisappbase.h', needed by `all'.
Stop.
gmake[3]: Leaving directory `/home/nick/qgis-0.8.0/src/ui'
gmake[2]: *** [all-recursive] Error 1
gmake[2]: Leaving directory `/home/nick/qgis-0.8.0/src'
gmake[1]: *** [all-recursive] Error 1
gmake[1]: Leaving directory `/home/nick/qgis-0.8.0'
gmake: *** [all] Error 2//

Any advices?

-- 
Best Regards
Nikos Gerontidis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070414/2954b087/attachment.html
From geronik444 at gmail.com  Sat Apr 14 11:49:48 2007
From: geronik444 at gmail.com (Nikos Geronitidis)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Problem After Installation
Message-ID: <2b0dc300704140849j7639d37dga6bd4523cbe7483d@mail.gmail.com>

Hello

  I have posted a previous question related to the building process. I have
finally managed to install QGis on Suse-10.2 64bit version but
problems still exist.
The below message is shown on the terminal window :

"qgis: error while loading shared libraries: libqgis_raster.so.1: cannot
open shared object file: No such file or directory"

Any advices?


-- 
Best Regards
Nikos Gerontidis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070414/bf7fa6bf/attachment.html
From geronik444 at gmail.com  Sat Apr 14 13:48:48 2007
From: geronik444 at gmail.com (Nikos Geronitidis)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Problem After Installation
Message-ID: <2b0dc300704141048v70ed0243ie423bb661799c10c@mail.gmail.com>

   The problem solved unexpectedly after system's restarting..
I apologize for the mass mails.

-- 
Best Regards
Nikos Gerontidis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070414/6907513f/attachment.html
From wonder.sk at gmail.com  Sun Apr 15 06:12:51 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] HEAD fails to compile
In-Reply-To: <2BC8CBE8-EFF2-41B1-91F3-B58D71849138@mrcc.com>
References: <D3316B27-891C-4E4C-AE05-A602B922E0FA@mrcc.com>
	<2BC8CBE8-EFF2-41B1-91F3-B58D71849138@mrcc.com>
Message-ID: <e8e7199c0704150312t3672d21cq90dd9049cdee8999@mail.gmail.com>

I've added those calls to have the possibility to create geometries
also directly (without WKB). I was not aware of that geos 2.1.x
doesn't support it however I hope that it's okay to drop support of it
and support geos >= 2.2

Martin

On 4/13/07, Gary Sherman <sherman@mrcc.com> wrote:
> It appears that geos::CoordinateSequenceFactory::create(int, int)
> const is not present in geos 2.1.4 and that latest merge introduced
> its use into QGIS. I upgraded my geos to latest 2.x and that solved
> the problem.
>
> -gary
>
> On Apr 13, 2007, at 5:59 AM, Gary Sherman wrote:
>
> > Has there been a change in the GEOS dependency?
> >
> > /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp: In
> > static member function 'static QgsGeometry*
> > QgsGeometry::fromPolyline(const QgsPolyline&)':
> > /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp:91:
> > error: no matching function for call to
> > 'geos::CoordinateSequenceFactory::create(int, int) const'
> > /usr/local/include/geos/geom.h:993: note: candidates are: virtual
> > geos::CoordinateSequence* geos::CoordinateSequenceFactory::create
> > (std::vector<geos::Coordinate, std::allocator<geos::Coordinate> >*)
> > const
> > /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp: In
> > static member function 'static QgsGeometry* QgsGeometry::fromPolygon
> > (const QgsPolygon&)':
> > /home/gsherman/development/qgis_09/src/core/qgsgeometry.cpp:113:
> > error: no matching function for call to
> > 'geos::CoordinateSequenceFactory::create(int, int) const'
> > /usr/local/include/geos/geom.h:993: note: candidates are: virtual
> > geos::CoordinateSequence* geos::CoordinateSequenceFactory::create
> > (std::vector<geos::Coordinate, std::allocator<geos::Coordinate> >*)
> > const
> >
> > -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
> > Gary Sherman
> > Micro Resources: http://mrcc.com
> >   *Geospatial Hosting
> >   *Web Site Hosting
> > "We work virtually everywhere"
> > -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
> >
> >
> >
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer@lists.qgis.org
> > http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer
>
> -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
> Gary Sherman
> Micro Resources: http://mrcc.com
>    *Geospatial Hosting
>    *Web Site Hosting
> "We work virtually everywhere"
> -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer
>

From wonder.sk at gmail.com  Sun Apr 15 17:33:02 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class
	fashion for QgsMapCanvas
In-Reply-To: <1176461907.2858.15.camel@localhost.localdomain>
References: <1176088999.2754.34.camel@localhost.localdomain>
	<e8e7199c0704091115m2039543cw14d6f061e837349@mail.gmail.com>
	<1176461907.2858.15.camel@localhost.localdomain>
Message-ID: <e8e7199c0704151433h674f14d2g67e3977542d8403b@mail.gmail.com>

On 4/13/07, Brendan Morley <morb@beagle.com.au> wrote:
> > Important question is the performance when representing features as
> > QGraphicsItems. Personally I'm in favour to use this implementation
> > but definitely we should find out first if this won't eat too much
> > processor time (and memory).
>
> I can submit the code as a patch in email or as a new subversion branch;
> then you can contrast and compare to your heart's content.

I'll check the code later, these days I'm quite busy...


> You can probably tell that my bias is to favour programming agility over
> runtime capacity, especially if it's only a minor tradeoff.
>
> You can also check out the Qt demo "chip".

I know that chip demo, it's nice.
Of course if the tradeoff is minor, I'm interested.

> > I'm not sure whether QgsMapToPixel should be obsoleted - when you're
> > using only core libraries (no map canvas) there should be a simple way
> > how to convert between the coordinates when doing something with
> > rendered map.
>
> What use-case would necessitate only the core library?
>
> I remember a conversation maybe 6-12 months ago where we may have wanted
> to render a map scene directly to an image file.
>
> In the new paradigm, you would add your items to the QGraphicsScene and
> then call QGraphicsScene.render() or QGraphicsView.render() (probably
> more the latter).

Currently you can create an application which uses QGIS core library
and you don't need X11. QGraphicsView AFAIK needs running X server so
any rendering couldn't be done without X server.

My concern is that QGIS core library should provide enough
functionality to develop server side GIS/mapping applications. The
need for a running X server would degrade the library greatly.

> > Perspective transformations look very good. I'm currently developing a
> > simple navigation and routing application (as a school project) based
> > on QGIS libs + python and this looks like a must have feature :-)
>
> Well we'll need to prepare the foundations then won't we? (-:

Actually the transformations can be done also with the rendered map,
though that won't be much eyecandy.

As discussed on IRC, my opinion is that when doing such a big changes,
that new canvas design should be implemented as an alternative (and
possible replacement) for current canvas and not as an immediate
replacement.

Martin

From marco.hugentobler at karto.baug.ethz.ch  Mon Apr 16 04:06:52 2007
From: marco.hugentobler at karto.baug.ethz.ch (Marco Hugentobler)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Utilising QGraphicsScene in a first-class
	fashion for QgsMapCanvas
In-Reply-To: <1176464096.23321.15.camel@localhost.localdomain>
References: <1176088999.2754.34.camel@localhost.localdomain>
	<200704110826.00064.marco.hugentobler@karto.baug.ethz.ch>
	<1176464096.23321.15.camel@localhost.localdomain>
Message-ID: <200704161006.52347.marco.hugentobler@karto.baug.ethz.ch>

Hi Brendan,

Thank you for the patch. I have to admit that I did not find time to look in 
the details of the code. I compiled the changes on my computer and the 
rendering time increased by a factor of 20 or more. Is this only the case on 
my computer? I'm using qt 4.2.3 on ubuntu 6.10. Should I try it with qt4.3 
unstable?

> Hmmm.  I've touched
>
> QgsMapLayer and children
> QgsRenderer and children
> QgsComposerMap
> QgsMarkerCatalogue
> QgsSymbol
> QgsLabel
> QgsMapRender
> QgsMapCanvas
> QgsMapCanvasMap
> QpsMapOverviewCanvas
>
> My stupid question is, why does this matter to you?

It is important for my university project, a mapserver with qgis, that third 
party apps can use the qgis libs without a running X server. So my question 
is if this would still be possible with the proposed changes.


cheers,
Marco
  

From cavallini at faunalia.it  Tue Apr 17 14:12:52 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] cmake error
Message-ID: <46250E24.40401@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Current svn does not compile here:

[ 69%] Building CXX object
src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrass.o
/home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp: In static
member function ?static void QgsGrass::init()?:
/home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp:49: error:
invalid conversion from ?int (*)(char*, int)? to ?int (*)(const char*, int)?
/home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp:49: error:
initializing argument 1 of ?int G_set_error_routine(int (*)(const char*,
int))?
make[2]: *** [src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrass.o]
Error 1
make[1]: *** [src/providers/grass/CMakeFiles/qgisgrass.dir/all] Error 2

Any suggestion?
All the best.
pc
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGJQ4k/NedwLUzIr4RAlrqAJ9Qpxzi8bBxy1WtArgRWTgIVsCR2wCeI26j
Mb0zmi95piMvAtzWuJzNIfc=
=Mm73
-----END PGP SIGNATURE-----

From wonder.sk at gmail.com  Tue Apr 17 14:36:01 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] cmake error
In-Reply-To: <46250E24.40401@faunalia.it>
References: <46250E24.40401@faunalia.it>
Message-ID: <e8e7199c0704171136re4f95fegbf700bc369215cdd@mail.gmail.com>

I guess you're using GRASS from CVS and the API has changed - in my
installation (grass 6.0.2) everything compiles well.

Try this: qgsgrass.h, line 166 and qgsgrass.cpp, line 350 - change
'char *msg' to 'const char *msg'

If that works for you, we'll commit it.

Martin

On 4/17/07, Paolo Cavallini <cavallini@faunalia.it> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Current svn does not compile here:
>
> [ 69%] Building CXX object
> src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrass.o
> /home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp: In static
> member function 'static void QgsGrass::init()':
> /home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp:49: error:
> invalid conversion from 'int (*)(char*, int)' to 'int (*)(const char*, int)'
> /home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp:49: error:
> initializing argument 1 of 'int G_set_error_routine(int (*)(const char*,
> int))'
> make[2]: *** [src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrass.o]
> Error 1
> make[1]: *** [src/providers/grass/CMakeFiles/qgisgrass.dir/all] Error 2
>
> Any suggestion?
> All the best.
> pc
> - --
> Paolo Cavallini
> http://www.faunalia.it/pc
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.6 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFGJQ4k/NedwLUzIr4RAlrqAJ9Qpxzi8bBxy1WtArgRWTgIVsCR2wCeI26j
> Mb0zmi95piMvAtzWuJzNIfc=
> =Mm73
> -----END PGP SIGNATURE-----
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer
>

From cavallini at faunalia.it  Tue Apr 17 15:34:37 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] cmake error
In-Reply-To: <e8e7199c0704171136re4f95fegbf700bc369215cdd@mail.gmail.com>
References: <46250E24.40401@faunalia.it>
	<e8e7199c0704171136re4f95fegbf700bc369215cdd@mail.gmail.com>
Message-ID: <4625214D.6070309@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Yes, I'm using 6.3cvs.
With your modifications it works, thanks.
All the best.
pc

Martin Dobias ha scritto:
> I guess you're using GRASS from CVS and the API has changed - in my
> installation (grass 6.0.2) everything compiles well.
> 
> Try this: qgsgrass.h, line 166 and qgsgrass.cpp, line 350 - change
> 'char *msg' to 'const char *msg'
> 
> If that works for you, we'll commit it.
> 
> Martin
> 
> On 4/17/07, Paolo Cavallini <cavallini@faunalia.it> wrote:
> Current svn does not compile here:
> 
> [ 69%] Building CXX object
> src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrass.o
> /home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp: In static
> member function 'static void QgsGrass::init()':
> /home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp:49: error:
> invalid conversion from 'int (*)(char*, int)' to 'int (*)(const char*,
> int)'
> /home/buildpackage/qgis/src/providers/grass/qgsgrass.cpp:49: error:
> initializing argument 1 of 'int G_set_error_routine(int (*)(const char*,
> int))'
> make[2]: *** [src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrass.o]
> Error 1
> make[1]: *** [src/providers/grass/CMakeFiles/qgisgrass.dir/all] Error 2
> 
> Any suggestion?
> All the best.
> pc
_______________________________________________
Qgis-developer mailing list
Qgis-developer@lists.qgis.org
http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer
>>

- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGJSFM/NedwLUzIr4RAh5MAJ4m60wCJkkDo9u2LWNJudQezBpjmwCgp6IL
S58M/r0rUcijp95fkPAGHc8=
=mq6z
-----END PGP SIGNATURE-----

From tutey at o2.pl  Tue Apr 17 15:36:51 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] cmake error
In-Reply-To: <e8e7199c0704171136re4f95fegbf700bc369215cdd@mail.gmail.com>
References: <46250E24.40401@faunalia.it>
	<e8e7199c0704171136re4f95fegbf700bc369215cdd@mail.gmail.com>
Message-ID: <462521D3.5050400@o2.pl>

Martin Dobias wrote:
> I guess you're using GRASS from CVS and the API has changed - in my
> installation (grass 6.0.2) everything compiles well.

May I note that latest stable GRASS release is 6.2.1. 6.2.2 is on it's way.

Maciek

From cavallini at faunalia.it  Tue Apr 17 15:46:13 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] postgi hangs up
Message-ID: <46252405.8060307@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
Now qgis compiles, but when trying to add a PostGIS layer it hangs up,
until I have to kill it.
pc
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGJSQE/NedwLUzIr4RAoSyAJ9wUIRbM/15kE9mE8+Po+gCPKXimACePN9A
pcqi1j6IF5D115uHRe94TBY=
=UKV6
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Tue Apr 17 16:04:35 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] postgis hangs up
In-Reply-To: <46252405.8060307@faunalia.it>
References: <46252405.8060307@faunalia.it>
Message-ID: <46252853.7020600@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Further info: this happens only for layers I do not have privileges on.
In any case, I get a lot of warnings:
Debug: Accesso alla relazione buttare_superficie_notte_afv_2007 usando
sql;select GeometryType("wkb_geometry") from
"pi_cens"."buttare_superficie_notte_afv_2007" where "wkb_geometry" is
not null limit 1 ? fallito. Il database dice: ERROR:  permesso negato
per la relazione buttare_superficie_notte_afv_2007

Apparently it scans all geometry columns, which could explain the long
connection time.
All the best.
pc

Paolo Cavallini ha scritto:
> Hi all.
> Now qgis compiles, but when trying to add a PostGIS layer it hangs up,
> until I have to kill it.
> pc
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGJShT/NedwLUzIr4RAg9OAJ9ETosEQt7X/qWR++zPKkSSRLvZ0gCfVpvN
MSG+pD0rVvt8QaC1ZKu6w60=
=GGgs
-----END PGP SIGNATURE-----

From wonder.sk at gmail.com  Tue Apr 17 16:23:23 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] cmake error
In-Reply-To: <4625214D.6070309@faunalia.it>
References: <46250E24.40401@faunalia.it>
	<e8e7199c0704171136re4f95fegbf700bc369215cdd@mail.gmail.com>
	<4625214D.6070309@faunalia.it>
Message-ID: <e8e7199c0704171323l550ce05h6e963a4c2c3da34f@mail.gmail.com>

On 4/17/07, Paolo Cavallini <cavallini@faunalia.it> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Yes, I'm using 6.3cvs.
> With your modifications it works, thanks.

Commited in r6894. I had to change it a bit differently to keep other
versions of GRASS happy.

btw. Maciej > I know about newer versions of GRASS but since I don't
use it there's no need to upgrade from my stock ubuntu package.

Martin

From oleg at crista.uni-wuppertal.de  Tue Apr 17 17:45:56 2007
From: oleg at crista.uni-wuppertal.de (Oleg Gusev)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Connecting main canvas to a plugin window.
Message-ID: <200704172345.56404.oleg@crista.uni-wuppertal.de>


 Hi,

  i find it very incovenient and time consuming 
  to type GCP coordinates by hand in the georeferencer 
  plugin. Is it possible to connect a middle button click event
  on the main canvas to the data entry window slot ?

 Oleg.

From jctull at gmail.com  Tue Apr 17 19:24:17 2007
From: jctull at gmail.com (John C. Tull)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] 0.8 svn branch build in OS X 
Message-ID: <AA70034E-5AF6-46D8-B1C4-FE12509E00E6@biodiversity.unr.edu>

I tried building the 0.8 svn branch today with cmake on OS X.  
Building works fine from the 0.9 trunk using the newest unix  
frameworks supplied at www.kyngchaos.com, but you can only get things  
to work in the 0.8 branch using the older GEOS 2.2.3 and GDAL 1.3.2  
frameworks. The newer 3.0 and 1.4 frameworks, respectively, should be  
installed if you want the GRASS.app binary from CVS to work, but you  
will need to manually redirect the 'Current' symbolic link under  
'Versions' in the GEOS framework to 2.2 rather than 3.0.

Additionally, I had to modify the CMakeLists.txt file with cmake to  
reflect the postgresql and gdal libs as dynamic libraries (*.dylib)  
rather than static (*.so).

Alas, so close yet so far... The Mapserver plugin is failing with the  
following errors. This appears similar to the GRASS issue discussed  
earlier today. Any suggestions for getting around this problem?

Cheers,
John

[ 99%] Generating ui_qgsmapserverexportbase.h
[ 99%] Generating moc_qgsmapserverexport.cxx
[ 99%] Generating moc_ui_qgsmapserverexportbase.cxx
/Users/jctull/sources/qgis-8/Release-0_8_0/build/tools/ 
mapserver_export/ui_qgsmapserverexportbase.h:0: Warning: No relevant  
classes found. No output generated.
Scanning dependencies of target msexport
[ 99%] Building CXX object tools/mapserver_export/CMakeFiles/ 
msexport.dir/qgsmapserverexport.o
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
qgsmapserverexport.cpp: In member function 'QString  
QgsMapserverExport::fullPathName()':
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
qgsmapserverexport.cpp:214: warning: control reaches end of non-void  
function
[ 99%] Building CXX object tools/mapserver_export/CMakeFiles/ 
msexport.dir/ms_main.o
[100%] Building CXX object tools/mapserver_export/CMakeFiles/ 
msexport.dir/msexport_wrap.o
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx: In function 'int SWIG_Python_ConvertPtr(PyObject*,  
void**, swig_type_info*, int)':
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:1180: error: invalid conversion from 'const char*'  
to 'char*'
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx: In function 'void SWIG_Python_FixMethods 
(PyMethodDef*, swig_const_info*, swig_type_info**, swig_type_info**)':
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:2071: error: invalid conversion from 'const char*'  
to 'char*'
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx: At global scope:
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:231: warning: 'swig_type_info* SWIG_TypeDynamicCast 
(swig_type_info*, void**)' defined but not used
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:419: warning: 'const char* SWIG_UnpackDataName 
(const char*, void*, size_t, const char*)' defined but not used
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:483: warning: 'swig_type_info* SWIG_TypeQuery(const  
char*)' defined but not used
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:499: warning: 'void SWIG_PropagateClientData 
(swig_type_info*)' defined but not used
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:1202: warning: 'void* SWIG_Python_MustGetPtr 
(PyObject*, swig_type_info*, int, int)' defined but not used
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:1216: warning: 'int SWIG_Python_ConvertPacked 
(PyObject*, void*, size_t, swig_type_info*, int)' defined but not used
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:1389: warning: 'int SWIG_CheckLongInRange(long int,  
long int, long int, const char*)' defined but not used
/Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/ 
msexport_wrap.cxx:2002: warning: 'void SWIG_Python_addvarlink 
(PyObject*, char*, PyObject* (*)(), int (*)(PyObject*))' defined but  
not used
make[2]: *** [tools/mapserver_export/CMakeFiles/msexport.dir/ 
msexport_wrap.o] Error 1
make[1]: *** [tools/mapserver_export/CMakeFiles/msexport.dir/all]  
Error 2
make: *** [all] Error 2


From woklist at kyngchaos.com  Tue Apr 17 19:57:04 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] 0.8 svn branch build in OS X 
In-Reply-To: <AA70034E-5AF6-46D8-B1C4-FE12509E00E6@biodiversity.unr.edu>
References: <AA70034E-5AF6-46D8-B1C4-FE12509E00E6@biodiversity.unr.edu>
Message-ID: <D2B3A3D5-D20D-48BB-8900-8A64EAD1B114@kyngchaos.com>

On Apr 17, 2007, at 6:24 PM, John C. Tull wrote:

> I tried building the 0.8 svn branch today with cmake on OS X.  
> Building works fine from the 0.9 trunk using the newest unix  
> frameworks supplied at www.kyngchaos.com, but you can only get  
> things to work in the 0.8 branch using the older GEOS 2.2.3 and  
> GDAL 1.3.2 frameworks. The newer 3.0 and 1.4 frameworks,  
> respectively, should be installed if you want the GRASS.app binary  
> from CVS to work, but you will need to manually redirect the  
> 'Current' symbolic link under 'Versions' in the GEOS framework to  
> 2.2 rather than 3.0.
>
And redirect GDAL current to 1.3, or you'll have Qgis linking GEOS  
2.2 and GDAL linking GEOS 3.

I've been holding off on playing with Qgis for a while - waiting for  
that elusive 0.8.1 release.  But wasn't there a way to make 0.8 work  
with GEOS 3?  I can't find anything in my notes, but I remember  
seeing something about that.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From marco.hugentobler at karto.baug.ethz.ch  Wed Apr 18 12:11:47 2007
From: marco.hugentobler at karto.baug.ethz.ch (Marco Hugentobler)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
In-Reply-To: <461CF7DE.3070908@faunalia.it>
References: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
	<461CF7DE.3070908@faunalia.it>
Message-ID: <200704181811.47981.marco.hugentobler@karto.baug.ethz.ch>

It seems that another problem with the new postgis provider is that it returns 
also the index of the geometry column in the function allAttributesList(). 
The consequence is that the assertion in qgspostgresprovider.cpp:405 is hit.

I'm very busy the next two days and then in holydays for two weeks. I would be 
grateful if someone could fix this problem so that people using 0.9 don't 
have to wait this long time.

Thanks,
Marco



Am Mittwoch, 11. April 2007 16:59 schrieb Paolo Cavallini:
> First tests: I got an error while committing changes to postgis:
> ERROR:  syntax error at or near "," at character 1689
> pc
>
> Martin Dobias ha scritto:
> > Hi all,
> >
> > today I've merged provider0_9-branch we've been recently working on.
> > We hope that there are not any regressions but one never knows :-) All
> > changes are related to vector providers and vector data handling.
> >
> > Changes visible for users:
> > - export to shapefile
> > - highlighting of currently identified feature
> >
> > Main changes visible for developers:
> > - QgsVectorDataProvider
> >  - altered semantic of select(), getNextFeature(), reset()
> >  - removal of some deprecated functions
> >  - minValue() and maxValue() return QVariant
> > - QgsGeometry
> >  - added geometry factories: fromPoint, fromPolyline, fromPolygon,
> > fromRect
> >
> > Martin
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer@lists.qgis.org
> > http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer

-- 
Dr. Marco Hugentobler
Institut of Cartography
ETH Zurich
marco.hugentobler@karto.baug.ethz.ch

From mcoletti at lychnobite.org  Wed Apr 18 15:16:51 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Query building for rasters, too
Message-ID: <20070418191651.GC3506@lychnobite.org>

One of the great new features is the ability to create entirely new
vector layers from existing ones based on certain criteria.  I was
surprised that there didn't exist similar functionality for rasters.
E. g., it should be possible to create a new raster layer containing
specific themal values from an existing one that had categorized pixel
values, perhaps using the result of a call to
GDALRasterBand::GetCategoryNames() or GDALRasterAttributeTable
contents.  I did not see any plan for implementing such after
stumbling through the various qgis related web sites, including the
wiki and the trac site.  Is there a plan to implement such a feature?

Cheers,

Mark


From b.rowlingson at lancaster.ac.uk  Wed Apr 18 15:35:04 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Query building for rasters, too
In-Reply-To: <20070418191651.GC3506@lychnobite.org>
References: <20070418191651.GC3506@lychnobite.org>
Message-ID: <462672E8.4090604@lancaster.ac.uk>

Mark Coletti wrote:
> One of the great new features is the ability to create entirely new
> vector layers from existing ones based on certain criteria.  I was
> surprised that there didn't exist similar functionality for rasters.
> E. g., it should be possible to create a new raster layer containing
> specific themal values from an existing one that had categorized pixel
> values, perhaps using the result of a call to
> GDALRasterBand::GetCategoryNames() or GDALRasterAttributeTable
> contents.  I did not see any plan for implementing such after
> stumbling through the various qgis related web sites, including the
> wiki and the trac site.  Is there a plan to implement such a feature?

  Have you seen my RasterAlgebra plugin?

http://www.maths.lancs.ac.uk/~rowlings/Software/RasterAlgebra/

  I knocked it up pretty quickly in order to play with QtDesigner and 
python plugins. It only does simple algebra, but the code might serve as 
a useful starting point for any other raster processing.

Barry

From telwertowski at comcast.net  Wed Apr 18 15:57:33 2007
From: telwertowski at comcast.net (Tom Elwertowski)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] 0.8 svn branch build in OS X
In-Reply-To: <AA70034E-5AF6-46D8-B1C4-FE12509E00E6@biodiversity.unr.edu>
References: <AA70034E-5AF6-46D8-B1C4-FE12509E00E6@biodiversity.unr.edu>
Message-ID: <4626782D.80506@comcast.net>

John C. Tull wrote:
> I tried building the 0.8 svn branch today with cmake on OS X. Building 
> works fine from the 0.9 trunk using the newest unix frameworks supplied 
> at www.kyngchaos.com, but you can only get things to work in the 0.8 
> branch using the older GEOS 2.2.3 and GDAL 1.3.2 frameworks. The newer 
> 3.0 and 1.4 frameworks, respectively, should be installed if you want 
> the GRASS.app binary from CVS to work, but you will need to manually 
> redirect the 'Current' symbolic link under 'Versions' in the GEOS 
> framework to 2.2 rather than 3.0.

The Release-0_8_0 branch compiles for me as is. I am not using geos and 
gdal frameworks however. My geos and gdal are installed into 
/usr/local/geos-3.0.0rc4 and /usr/local/gdal-1.4.1-geos3. geos 2.2.3 and 
gdal 1.4.1 are also installed in /usr/local since I build with both 
versions of geos.

> The Mapserver plugin is failing with the following errors. This appears similar to the GRASS issue discussed 
> earlier today. Any suggestions for getting around this problem?
> 
> [100%] Building CXX object 
> tools/mapserver_export/CMakeFiles/msexport.dir/msexport_wrap.o
> /Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/msexport_wrap.cxx: 
> In function 'int SWIG_Python_ConvertPtr(PyObject*, void**, 
> swig_type_info*, int)':
> /Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/msexport_wrap.cxx:1180: 
> error: invalid conversion from 'const char*' to 'char*'
> /Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/msexport_wrap.cxx: 
> In function 'void SWIG_Python_FixMethods(PyMethodDef*, swig_const_info*, 
> swig_type_info**, swig_type_info**)':
> /Users/jctull/sources/qgis-8/Release-0_8_0/tools/mapserver_export/msexport_wrap.cxx:2071: 
> error: invalid conversion from 'const char*' to 'char*'

These errors may be caused by a different version of Python or SWIG (I 
have 2.3 and 1.3.31).

Try copying msexport_wrap.cxx from trunk to Release-0_8_0. The only 
differences between the files appear to address the errors above.

Tom

From jachym.cepicky at gmail.com  Thu Apr 19 11:57:43 2007
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] cmake error
In-Reply-To: <e8e7199c0704171323l550ce05h6e963a4c2c3da34f@mail.gmail.com>
References: <46250E24.40401@faunalia.it>
	<e8e7199c0704171136re4f95fegbf700bc369215cdd@mail.gmail.com>
	<4625214D.6070309@faunalia.it>
	<e8e7199c0704171323l550ce05h6e963a4c2c3da34f@mail.gmail.com>
Message-ID: <1176998263.8513.32.camel@mellon>

Hi,

Martin Dobias p??e v ?t 17. 04. 2007 v 22:23 +0200:
> On 4/17/07, Paolo Cavallini <cavallini@faunalia.it> wrote:
> > -----BEGIN PGP SIGNED MESSAGE-----
> > Hash: SHA1
> >
> > Yes, I'm using 6.3cvs.
> > With your modifications it works, thanks.
> 
> Commited in r6894. I had to change it a bit differently to keep other
> versions of GRASS happy.
> 
> btw. Maciej > I know about newer versions of GRASS but since I don't
> use it there's no need to upgrade from my stock ubuntu package.
> 
> Martin

http://les-ejk.cz/ubuntu

if it helps

jachym

> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer
-- 
Jachym Cepicky
e-mail: jachym.cepicky@gmail.com
URL: http://les-ejk.cz
GPG: http://www.les-ejk.cz/pgp/jachym_cepicky-gpg.pub



From marco.hugentobler at karto.baug.ethz.ch  Fri Apr 20 02:09:58 2007
From: marco.hugentobler at karto.baug.ethz.ch (Marco Hugentobler)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] provider0_9-branch merged
In-Reply-To: <200704181811.47981.marco.hugentobler@karto.baug.ethz.ch>
References: <e8e7199c0704110624v8fa3cbft860bccd887b9b37e@mail.gmail.com>
	<461CF7DE.3070908@faunalia.it>
	<200704181811.47981.marco.hugentobler@karto.baug.ethz.ch>
Message-ID: <200704200809.58656.marco.hugentobler@karto.baug.ethz.ch>

After more tests, it seems that this problem only occurs in special 
situations. r6900 tries to fix it.

Marco

Am Mittwoch, 18. April 2007 18:11 schrieb Marco Hugentobler:
> It seems that another problem with the new postgis provider is that it
> returns also the index of the geometry column in the function
> allAttributesList(). The consequence is that the assertion in
> qgspostgresprovider.cpp:405 is hit.
>
> I'm very busy the next two days and then in holydays for two weeks. I would
> be grateful if someone could fix this problem so that people using 0.9
> don't have to wait this long time.
>
> Thanks,
> Marco
>
> Am Mittwoch, 11. April 2007 16:59 schrieb Paolo Cavallini:
> > First tests: I got an error while committing changes to postgis:
> > ERROR:  syntax error at or near "," at character 1689
> > pc
> >


-- 
Dr. Marco Hugentobler
Institute of Cartography
ETH Zurich
marco.hugentobler@karto.baug.ethz.ch

From perrygeo at gmail.com  Fri Apr 20 02:46:00 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] save as shapefile has trouble with multi-geometry
	features
Message-ID: <5383fa5e0704192346w60ba462fl181aa6731d69a5a9@mail.gmail.com>

Hey folks,

 I've been putting this off for a while but decided to take the plunge
and learn the new cmake system to get at the latest goodies such as
python bindings and vector data output. I have to say kudos.. it works
beautifully and is much cleaner (and faster!) than the autoconf build
system.

 On to my question...  the export to shapefile works great for layers
with single-part geometries but all multi-geometry features seem to be
dropped from the output. (see attached screenshots). The console shows
the following error for each multi-geometry it enountered:

ERROR 1: Length of input WKB is too small

I'm not too familiar with the vector provider stuff .. is this an easy fix?

-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller
-------------- next part --------------
A non-text attachment was scrubbed...
Name: exported.png
Type: image/png
Size: 16553 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070419/8507713d/exported.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: original.png
Type: image/png
Size: 19763 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070419/8507713d/original.png
From wonder.sk at gmail.com  Fri Apr 20 05:45:04 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] save as shapefile has trouble with
	multi-geometry features
In-Reply-To: <5383fa5e0704192346w60ba462fl181aa6731d69a5a9@mail.gmail.com>
References: <5383fa5e0704192346w60ba462fl181aa6731d69a5a9@mail.gmail.com>
Message-ID: <e8e7199c0704200245l345ae63cicb0d105c78177717@mail.gmail.com>

On 4/20/07, Matthew Perry <perrygeo@gmail.com> wrote:
>  On to my question...  the export to shapefile works great for layers
> with single-part geometries but all multi-geometry features seem to be
> dropped from the output. (see attached screenshots). The console shows
> the following error for each multi-geometry it enountered:
>
> ERROR 1: Length of input WKB is too small
>
> I'm not too familiar with the vector provider stuff .. is this an easy fix?

Hi Matthews,

what data provider are the data from? I've found out that OGR can
return layer type of a shapefile as Polygon type even though there are
some Multipolygons. That's the cause why multipolygons are not handled
correctly. Is OGR the provider from which you've exported data or is
this a problem also in some other providers?

Regards,
Martin

From wonder.sk at gmail.com  Fri Apr 20 06:28:10 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] save as shapefile has trouble with
	multi-geometry features
In-Reply-To: <e8e7199c0704200245l345ae63cicb0d105c78177717@mail.gmail.com>
References: <5383fa5e0704192346w60ba462fl181aa6731d69a5a9@mail.gmail.com>
	<e8e7199c0704200245l345ae63cicb0d105c78177717@mail.gmail.com>
Message-ID: <e8e7199c0704200328s21cf6deeq3099f8d55c47d00e@mail.gmail.com>

On 4/20/07, Martin Dobias <wonder.sk@gmail.com> wrote:
> On 4/20/07, Matthew Perry <perrygeo@gmail.com> wrote:
> >  On to my question...  the export to shapefile works great for layers
> > with single-part geometries but all multi-geometry features seem to be
> > dropped from the output. (see attached screenshots). The console shows
> > the following error for each multi-geometry it enountered:
> >
> > ERROR 1: Length of input WKB is too small
> >
> > I'm not too familiar with the vector provider stuff .. is this an easy fix?
>

I've tried to address this issue in r6905 - check whether it's working now.

Martin

From perrygeo at gmail.com  Fri Apr 20 11:06:42 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] save as shapefile has trouble with
	multi-geometry features
In-Reply-To: <e8e7199c0704200245l345ae63cicb0d105c78177717@mail.gmail.com>
References: <5383fa5e0704192346w60ba462fl181aa6731d69a5a9@mail.gmail.com>
	<e8e7199c0704200245l345ae63cicb0d105c78177717@mail.gmail.com>
Message-ID: <5383fa5e0704200806s2396f553k2598f9cb4adf0d98@mail.gmail.com>

On 4/20/07, Martin Dobias <wonder.sk@gmail.com> wrote:
> what data provider are the data from? I've found out that OGR can
> return layer type of a shapefile as Polygon type even though there are
> some Multipolygons. That's the cause why multipolygons are not handled
> correctly. Is OGR the provider from which you've exported data or is
> this a problem also in some other providers?

I have only tested with OGR data and, yes, OGR does report polygon
data type when there are multi-polygons (for this dataset at least).

-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller

From perrygeo at gmail.com  Fri Apr 20 11:11:16 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] save as shapefile has trouble with
	multi-geometry features
In-Reply-To: <e8e7199c0704200328s21cf6deeq3099f8d55c47d00e@mail.gmail.com>
References: <5383fa5e0704192346w60ba462fl181aa6731d69a5a9@mail.gmail.com>
	<e8e7199c0704200245l345ae63cicb0d105c78177717@mail.gmail.com>
	<e8e7199c0704200328s21cf6deeq3099f8d55c47d00e@mail.gmail.com>
Message-ID: <5383fa5e0704200811i3e41108bua854521e9392e578@mail.gmail.com>

Martin,

On 4/20/07, Martin Dobias <wonder.sk@gmail.com> wrote:
> On 4/20/07, Martin Dobias <wonder.sk@gmail.com> wrote:
> > On 4/20/07, Matthew Perry <perrygeo@gmail.com> wrote:
> > >  On to my question...  the export to shapefile works great for layers
> > > with single-part geometries but all multi-geometry features seem to be
> > > dropped from the output. (see attached screenshots). The console shows
> > > the following error for each multi-geometry it enountered:
> I've tried to address this issue in r6905 - check whether it's working now.
>

Thanks Martin! Everything seems to be working great for OGR data
providers at least.


-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller

From mcoletti at lychnobite.org  Fri Apr 20 14:44:26 2007
From: mcoletti at lychnobite.org (Mark Coletti)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Query building for rasters, too
In-Reply-To: <462672E8.4090604@lancaster.ac.uk>
References: <20070418191651.GC3506@lychnobite.org>
	<462672E8.4090604@lancaster.ac.uk>
Message-ID: <20070420184426.GP3506@lychnobite.org>

On Wed, Apr 18, 2007 at 08:35:04PM +0100, Barry Rowlingson wrote:

> >One of the great new features is the ability to create entirely new
> >vector layers from existing ones based on certain criteria.  I was
> >surprised that there didn't exist similar functionality for rasters.
> >E. g., it should be possible to create a new raster layer containing
> >specific themal values from an existing one that had categorized pixel
> >values [...]
> 
>  Have you seen my RasterAlgebra plugin?
> 
> http://www.maths.lancs.ac.uk/~rowlings/Software/RasterAlgebra/

>  I knocked it up pretty quickly in order to play with QtDesigner and 
> python plugins. It only does simple algebra, but the code might serve as 
> a useful starting point for any other raster processing.

  It sounds exactly like the functionality I'm looking for.

  Unfortunately this happens when I apply it to a simple USGS DEM:

An error has occured while executing Python code:

Traceback (most recent call last):
 File "/home/mcoletti/share/qgis/python/plugins/rasteralgebra/rasteralgebra.py", line 90, in run
  rastercompute.createRaster(a.ui.outFileName.text(),formula)
 File "/home/mcoletti/share/qgis/python/plugins/rasteralgebra/rastercompute.py", line 120, in createRaster
  writeGeoTiff(result, extent, str(filePath))
 File "/home/mcoletti/share/qgis/python/plugins/rasteralgebra/rasterutils.py", line 92, in writeGeoTiff
  dst_ds.SetGeoTransform( [
AttributeError: 'NoneType' object has no attribute 'SetGeoTransform'


  I haven't RTFS, so I dunno if the problem is maybe that it is hard
  coded to expect all rasters to be GeoTIFFs.

  I was thinking that a more powerful implementation would be to have
  the GUI set up the variables and then let the user enter the body of
  a freeform python lambda function with those variables that would be
  used as a kind of raster filter.  Admittedly this is just an
  inchoate idea.

  Meanwhile, I'll poke through the python source to see if I can get
  it to play nicely with the USGS DEM.

Cheers,

Mark


From morb at beagle.com.au  Fri Apr 20 23:17:19 2007
From: morb at beagle.com.au (Brendan Morley)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] "Edit" Menu
Message-ID: <1177125440.2765.1.camel@localhost.localdomain>

Fellow programmers,

Another thing I want to do is add an Edit menu to the QGIS GUI.

The things I want to have on it are encapsulated in the following code
fragment:

mEditMenu = menuBar()->addMenu(tr("&Edit")); 
  mEditMenu->addAction(mActionEditCut);
  mEditMenu->addAction(mActionEditCopy);
  mEditMenu->addAction(mActionEditPaste);
  mEditMenu->addSeparator();
  mEditMenu->addAction(mActionAddVertex);
  mEditMenu->addAction(mActionMoveVertex);
  mEditMenu->addAction(mActionDeleteVertex);
  mEditMenu->addSeparator();
  mEditMenu->addAction(mActionPasteTransformations);
  mEditMenu->addSeparator();
  mEditMenu->addAction(mActionToggleSnapNearestVertex);

Also, I want to set up keyboard shortcuts for Cut, Copy and Paste as
encapsulated in the following code fragment:

  mActionEditCut->setShortcut(tr("Ctrl+X", "Cut selected objects to the clipboard"));
  mActionEditCopy->setShortcut(tr("Ctrl+C", "Copy selected objects to the clipboard"));
  mActionEditPaste->setShortcut(tr("Ctrl+V", "Paste objects from the clipboard"));


I've had this functionality on my local copy (the shortcuts are
particularly time-saving), and I have a feeling it ended up in one of
the subversion branches, but it is not in HEAD.

If there are no objections, I'll commit it to head in the next week or
so.



Brendan


From morb at beagle.com.au  Fri Apr 20 22:57:43 2007
From: morb at beagle.com.au (Brendan Morley)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] "Edit" Menu
Message-ID: <1177124265.3015.9.camel@localhost.localdomain>

Fellow programmers,

Another thing I want to do is add an Edit menu to the QGIS GUI.

The things I want to have on it are encapsulated in the following code
fragment:

  mEditMenu = menuBar()->addMenu(tr("&Edit"));
  mEditMenu->addAction(mActionEditCut);
  mEditMenu->addAction(mActionEditCopy);
  mEditMenu->addAction(mActionEditPaste);
  mEditMenu->addSeparator();
  mEditMenu->addAction(mActionAddVertex);
  mEditMenu->addAction(mActionMoveVertex);
  mEditMenu->addAction(mActionDeleteVertex);
  mEditMenu->addSeparator();
  mEditMenu->addAction(mActionPasteTransformations);
  mEditMenu->addSeparator();
  mEditMenu->addAction(mActionToggleSnapNearestVertex);

Also, I want to set up keyboard shortcuts for Cut, Copy and Paste as
encapsulated in the following code fragment:

  mActionEditCut->setShortcut(tr("Ctrl+X", "Cut selected objects to the clipboard"));
  mActionEditCopy->setShortcut(tr("Ctrl+C", "Copy selected objects to the clipboard"));
  mActionEditPaste->setShortcut(tr("Ctrl+V", "Paste objects from the clipboard"));


I've had this functionality on my local copy (the shortcuts are
particularly time-saving), and I have a feeling it ended up in one of
the subversion branches, but it is not in HEAD.

If there are no objections, I'll commit it to head in the next week or
so.



Brendan


From perrygeo at gmail.com  Sun Apr 22 18:24:55 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Geocoder plugin
Message-ID: <5383fa5e0704221524t5e0cefccm7c489959524d7e92@mail.gmail.com>

Hey everyone,

 It's been a rainy weekend here, a good time to learn the python qgis
bindings. I decided to implement a geocoder plugin which would use web
services to do all the tough work and the delimited text provider to
load the results into qgis. What started mostly as a learning
experiment turned into something that might actually be useful ;-)

 Right now it's built on top of the Yahoo geocoder which is, IMO, the
best out there.. very flexible about the input format (see the
attached screenshots). Geopy is used to interact with the geocoding
services so it could potentially support other engines such as
geocoder.us, virtual earth, google, etc.

 The user interface is very easy, enter list of addresses/placenames
seperated by a line break, pick an output file and go. To be
legitimate, you should also sign up for a yahoo api key, though the
'YahooDemo' key will work ok for testing purposes.

Here's the install process (assuming you already have python, pyqt4,
qgis bindings, etc. set up):
 svn checkout http://perrygeo.googlecode.com/svn/trunk/qgis/geocode
 cd geocode
 vi Makefile
 # change install directory if needed
 sudo make install

This is just a rough cut, alpha product so there are probably many
things that could go wrong ;-)  Enjoy.


-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dialog.jpg
Type: image/jpeg
Size: 88560 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070422/2c2898ad/dialog.jpg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: result.jpg
Type: image/jpeg
Size: 123424 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070422/2c2898ad/result.jpg
From frdcn at hotmail.com  Mon Apr 23 12:06:26 2007
From: frdcn at hotmail.com (godofredo contreras)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Plugin_builder.pl does not work in windows
Message-ID: <BAY110-W19D14C9809F5B4B07C36C0B24B0@phx.gbl>

Hi:
 
I have tried to create a c plugin using plugin builder but it fails to copy the files from template to the new created directory, I have run the perl script from msys, the weird thing is that it only copies readme file and png icon and anything else.
 
Is this a bug of perl from msys or it could be a problem with the script?
 
 
Regards
 
Godofredo Contreras
_________________________________________________________________
News, entertainment and everything you care about at Live.com. Get it now!
http://www.live.com/getstarted.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070423/b6a750a7/attachment.html
From b.rowlingson at lancaster.ac.uk  Tue Apr 24 13:04:01 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Pseudo-color raster drawing
Message-ID: <462E3881.9060009@lancaster.ac.uk>

At last I've found something I can't do with a python plugin[1]...

I've got an ESRI grid file with integer values 1, 2, and 3. I want to 
map this with specific colours for values 1, 2 and 3 (red, amber, green, 
for example).

BUT I can't set a colour table for a QgsRasterLayer (the system gets 
colour tables from the source, and this source doesn't have a colour 
table palette)

AND since sometimes my grid might only have one or two of the values in 
it, the pseudo colour drawing routine won't be consistent in its mapping 
of values to colours

BUT I discovered I could use the grayscale mapping, and use 
set{Min,Max}GrayDouble() to clamp the mapping of values to colours. I 
could draw value 1 as white, value 2 as gray, value 3 as black.

BUT I don't want to use gray scales! Red is danger!

So I patched QgsRasterLayer.cpp so that if userDefinedGrayMinMax is set 
then it maps the values to the pseudocolor palette using the set values. 
  Its about five lines.

Would this little patch be worth putting into Qgis? Or shall we wait 
until someone has completely rewritten the raster table pseudo colour 
mapping to be a bit more general and doesn't have 'FREAK_OUT' hard coded 
into the C++...

Barry

[1] I tried making a new class that inherited from QgsRasterLayer, but 
because the gdalDataset member is private I can't get to it from the 
over-ridden 'draw' method!

From sdubreton at gi-lemans.com  Wed Apr 25 11:37:13 2007
From: sdubreton at gi-lemans.com (=?iso-8859-1?Q?St=E9phane_Dubreton?=)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] trouble compiling qgis
Message-ID: <001a01c7874f$98beb670$4a69850a@gi.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 9128 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070425/d05eeda8/attachment.jpe
From cavallini at faunalia.it  Thu Apr 26 03:47:50 2007
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] error building #6914
Message-ID: <46305926.1050703@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
Today qgis does not compile:

[ 69%] Building CXX object
src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrassprovider.o
/home/paolo/Desktop/buildpackage/qgis/src/providers/grass/qgsgrass.h:166:
error: expected unqualified-id before ?<<? token
/home/paolo/Desktop/buildpackage/qgis/src/providers/grass/qgsgrass.h:168:
error: expected unqualified-id before ?==? token
/home/paolo/Desktop/buildpackage/qgis/src/providers/grass/qgsgrass.h:175:
error: expected unqualified-id before ?>>? token
make[2]: ***
[src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrassprovider.o] Error 1
make[1]: *** [src/providers/grass/CMakeFiles/qgisgrass.dir/all] Error 2

Any hints?
All the best.
pc
- --
Paolo Cavallini
http://www.faunalia.it/pc
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGMFkm/NedwLUzIr4RAgaeAKCa+VBIh8NGLahqLu7DykT9PkSCZgCggUbC
PMaVr/AMFWon+SMFjBoPmb4=
=eFmz
-----END PGP SIGNATURE-----

From wonder.sk at gmail.com  Thu Apr 26 03:56:28 2007
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] error building #6914
In-Reply-To: <46305926.1050703@faunalia.it>
References: <46305926.1050703@faunalia.it>
Message-ID: <e8e7199c0704260056m54f5ff2eh2679c410ad4c7144@mail.gmail.com>

Hi Paolo,

that's surely a conflict marked by SVN in your (modified) qgsgrass.h.
To remove the conflict, revert to original file from SVN:
svn revert qgsgrass.h

Martin

On 4/26/07, Paolo Cavallini <cavallini@faunalia.it> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi all.
> Today qgis does not compile:
>
> [ 69%] Building CXX object
> src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrassprovider.o
> /home/paolo/Desktop/buildpackage/qgis/src/providers/grass/qgsgrass.h:166:
> error: expected unqualified-id before '<<' token
> /home/paolo/Desktop/buildpackage/qgis/src/providers/grass/qgsgrass.h:168:
> error: expected unqualified-id before '==' token
> /home/paolo/Desktop/buildpackage/qgis/src/providers/grass/qgsgrass.h:175:
> error: expected unqualified-id before '>>' token
> make[2]: ***
> [src/providers/grass/CMakeFiles/qgisgrass.dir/qgsgrassprovider.o] Error 1
> make[1]: *** [src/providers/grass/CMakeFiles/qgisgrass.dir/all] Error 2
>
> Any hints?
> All the best.
> pc
> - --
> Paolo Cavallini
> http://www.faunalia.it/pc
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.6 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFGMFkm/NedwLUzIr4RAgaeAKCa+VBIh8NGLahqLu7DykT9PkSCZgCggUbC
> PMaVr/AMFWon+SMFjBoPmb4=
> =eFmz
> -----END PGP SIGNATURE-----
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer
>

From b.rowlingson at lancaster.ac.uk  Thu Apr 26 07:43:28 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Rejigging raster layer drawing
Message-ID: <46309060.80701@lancaster.ac.uk>

I've been digging deep into the raster layer draw code, and it seems to 
have a lot of cruft lying around. Exhibit A is the unused method, 
QgsRasterLayer::drawPalettedSingleBandColor, which I guess is related to 
the unused drawing style of 'PALETTED_COLOR' - these things are defined 
but not referenced anywhere...

The pseudo-color stuff is a bit crocky too, with colouring techniques 
hard coded into the draw methods. Pseudo-color just seems to be a 
modification of the paletted drawing methods.

I think this code could all be simplified into a more unified set of 
drawing methods, using user-defined colour palettes to produce colour or 
grayscale renderings based on single or multi-layers, or using palettes 
from the layer data itself, with optional scaling/stretching/clipping.

I am prepared to put some time into this since its a feature I dearly 
want in QGis, in fact I pretty much need it for a current project, and 
attempts to bodge it into shape have failed! What I think I need is some 
help from the more competent to make sure my plans are good plans (and 
not evil plans), and to see any other ramifications they may have - for 
example it will probably imply changes to the 'properties' dialog in the 
Qgis App code...

Anyone on board with this? I'd chat on #qgis but you lot are only there 
at 3am my time!

Barry


From sherman at mrcc.com  Fri Apr 27 10:45:35 2007
From: sherman at mrcc.com (Gary Sherman)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] trouble compiling qgis
In-Reply-To: <001a01c7874f$98beb670$4a69850a@gi.com>
References: <001a01c7874f$98beb670$4a69850a@gi.com>
Message-ID: <CA5457B8-EC79-4199-BB11-0AAFFDEE785A@mrcc.com>

Some people have had trouble compiling with geos 3.x but I'm not sure  
your problem is related to that.  GEOS  2.2.3 is known to work...

-gary

On Apr 25, 2007, at 7:37 AM, St?phane Dubreton wrote:

> make[3]: *** No rule to make target `ui_qgisappbase.h', needed by  
> `all'.>  Stop.
> I have read on the following link (http://geos.refractions.net/ 
> pipermail/geos-devel/2007-February/002824.html) that someone
> has the same problem by switching the version of geos between geos  
> 3.0.0rc4 and geos 3.0.0.rc3
>
> The version installed on my server for geos is the 2.2.1. Is this  
> the reason why I should I try to uninstall this version ?
>

-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Micro Resources: http://mrcc.com
   *Geospatial Hosting
   *Web Site Hosting
"We work virtually everywhere"
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-




From ersts at amnh.org  Fri Apr 27 12:46:09 2007
From: ersts at amnh.org (Peter Ersts)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Rejigging raster layer drawing
In-Reply-To: <46309060.80701@lancaster.ac.uk>
References: <46309060.80701@lancaster.ac.uk>
Message-ID: <463228D1.2010104@amnh.org>

Barry,

There is a separate branch on the SVN where a couple of people have been 
working on some raster issues (raster_transparency_branch)  
http://wiki.qgis.org/qgiswiki/RasterTransparencyBranch,

Thing specifically being addressed at this time are:
Stretching
Transparency
Color maps

I have been very delinquent on working on this  over the last month but 
hope to get back to it very soon.  The current line of thinking, Tim 
correct me if I am wrong or out-of-date, is to get the raster methods a 
bit more robust and filled out then at a later time split the different 
rendering routines for each layer type into their own classes and 
finally, eventually , integrate OSSIM into QGIS.

-pete

Barry Rowlingson wrote:
> I've been digging deep into the raster layer draw code, and it seems 
> to have a lot of cruft lying around. Exhibit A is the unused method, 
> QgsRasterLayer::drawPalettedSingleBandColor, which I guess is related 
> to the unused drawing style of 'PALETTED_COLOR' - these things are 
> defined but not referenced anywhere...
>
> The pseudo-color stuff is a bit crocky too, with colouring techniques 
> hard coded into the draw methods. Pseudo-color just seems to be a 
> modification of the paletted drawing methods.
>
> I think this code could all be simplified into a more unified set of 
> drawing methods, using user-defined colour palettes to produce colour 
> or grayscale renderings based on single or multi-layers, or using 
> palettes from the layer data itself, with optional 
> scaling/stretching/clipping.
>
> I am prepared to put some time into this since its a feature I dearly 
> want in QGis, in fact I pretty much need it for a current project, and 
> attempts to bodge it into shape have failed! What I think I need is 
> some help from the more competent to make sure my plans are good plans 
> (and not evil plans), and to see any other ramifications they may have 
> - for example it will probably imply changes to the 'properties' 
> dialog in the Qgis App code...
>
> Anyone on board with this? I'd chat on #qgis but you lot are only 
> there at 3am my time!
>
> Barry
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.qgis.org
> http://lists.qgis.org/cgi-bin/mailman/listinfo/qgis-developer


From b.rowlingson at lancaster.ac.uk  Fri Apr 27 13:54:48 2007
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] Rejigging raster layer drawing
In-Reply-To: <463228D1.2010104@amnh.org>
References: <46309060.80701@lancaster.ac.uk> <463228D1.2010104@amnh.org>
Message-ID: <463238E8.6010504@lancaster.ac.uk>


Peter Ersts wrote:

> Thing specifically being addressed at this time are:
> Stretching
> Transparency
> Color maps

  Here's what I've been thinking. A QgsRasterLayer is composed of a 
number of bands.  There's potentially a separate mapping for each band 
that converts band values to RGBA colours.  Only some bands are 'live'. 
Then the final colour is composed from the colours of the live bands.

  The mapping function can take into account stretching and scaling (and 
individually for each band) as well as colourmap rotation.

  This seems fully general (if slightly inefficent), since you can map 
single band layers to gray colour ramps, or red colour ramps, or complex 
palette-style colour ramps.

  Multi-band rasters can do just about anything. If you have four bands 
you could have red, blue, green and yellow ramps.  A fifth band could 
just set transparency.  You could just have one live band and do single 
band grayscale, or have three live bands and do RGB colour, or with 
three live bands each with grayscale ramps, get a full grayscale image.

  That last examples are where the inefficiency is - you're doing three 
colourmap lookups and then combining three colours rather than adding 
three numbers and doing one colourmap lookup - or with RGBA in four 
separate bands just constructing the colour from the band values with no 
lookups.  Perhaps there's a need for a more efficient rendering only 
when bands map directly to RGBA colours.

  Colourmap palettes could initially come from the dataset itself if it 
supplies one, or defined by the user (have you tried the Qt Gradient 
Editor?).

  A gui for this shouldn't be too bewildering, since there are plenty of 
opportunities for simple presets and then a big fat 'Advanced' button.

  Maybe I'm way off-beam on this, but in my mind, it should translate 
into quite simple and neat code...  But then most things that seem 
simple and neat in my mind never work out that way!

Barry

From evertg at telkomsa.net  Fri Apr 27 15:40:35 2007
From: evertg at telkomsa.net (Sanet Groenewald)
Date: Wed Feb  6 23:25:06 2008
Subject: [Qgis-developer] trouble compiling qgis
References: <001a01c7874f$98beb670$4a69850a@gi.com>
Message-ID: <463251B1.00002F.03712@SANET-XP>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 36179 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20070427/5981d705/attachment.gif
-------------- next part --------------
Skipped content of type multipart/alternative
