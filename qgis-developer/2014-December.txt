From a.neumann at carto.net  Mon Dec  1 02:25:24 2014
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 01 Dec 2014 11:25:24 +0100
Subject: [Qgis-developer] Core dump when starting QGIS
In-Reply-To: <CAL5Q673YVTZFx6d4g9muh3mw2cetdhSxE-aQiiav2hDR17T4ZA@mail.gmail.com>
References: <547C12E0.3070803@carto.net>
	<CAL5Q673YVTZFx6d4g9muh3mw2cetdhSxE-aQiiav2hDR17T4ZA@mail.gmail.com>
Message-ID: <547C4214.3040709@carto.net>

Hi,

With the newest commit it works fine. Apparently there was an issue with 
the browser dock startup which made QGIS crash on startup. Now it works 
fine.

Thanks,

Andreas

On 01.12.2014 08:50, Alessandro Pasotti wrote:
> Hi,
>
> the same happened to me yesterday when upgrading from 12.04 to 14.04.
>
> When I launched QGIS the second time it ran without errors.
>
>
>
>
> 2014-12-01 8:04 GMT+01:00 Andreas Neumann <a.neumann at carto.net>:
>> Hi,
>>
>> I recently upgraded from Kubuntu 14.04 to 14.10. With the current master I
>> get a core dump when starting QGIS. I removed the build directory and
>> recreated the settings with ccmake. The compile works fine but when I start
>> QGIS I get a core dump. Here are the startup messages:
>>
>> -------------------------------------
>>
>> Warning: loading of qt translation failed
>> [/usr/share/qt4/translations/qt_en_US]
>> Warning: Bus::open: Can not get ibus-daemon's address.
>> IBusInputContext::createInputContext: no connection to ibus-daemon
>> Warning: QGraphicsScene::addItem: item has already been added to this scene
>> QGIS died on signal 11Could not attach to process.  If your uid matches the
>> uid of the target
>> process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or try
>> again as the root user.  For more details, see /etc/sysctl.d/10-ptrace.conf
>> ptrace: Operation not permitted.
>> No thread selected
>> No stack.
>> gdb returned 0
>> Aborted (core dumped)
>>
>> ---------------------------
>>
>> I see the splash screen and immediately get a core dump. I don't even see
>> the main application window.
>>
>> I wonder if there is a library problem after my Ubuntu update?
>>
>> Thank you if you have any idea what I could do to solve my problem.
>>
>> Andreas
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>


From madmanwoo at gmail.com  Mon Dec  1 02:44:03 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Mon, 01 Dec 2014 10:44:03 +0000
Subject: [Qgis-developer] New layout for expression widget
Message-ID: <CAAi8Yg8iyF5VBG7eY6ihihVbddPe4bB09pdj+2L1L4+gxOp0_Q@mail.gmail.com>

Hey all,

Just a heads up as I'm sure people will notice pretty quick but hopefully
for the better.  I have done some tweaks to the expression widget to make
things a little easier to use and use the screen space better.

The new layout looks like this:

http://i.imgur.com/mGwJerN.png
http://i.imgur.com/7sDSxFp.png
http://i.imgur.com/97cTOs3.png

The old one always felt a bit squashed to me and I always found myself
adjusting the size of the dialog to make things fit right, which is
normally a good sign things are wrong. With the addition of the custom
functions section it just wasn't working. Matthias suggested this kind of
layout and I think it works really well.

- Nathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141201/53bea7de/attachment.html>

From skampus at gmail.com  Mon Dec  1 03:12:26 2014
From: skampus at gmail.com (skampus)
Date: Mon, 1 Dec 2014 03:12:26 -0800 (PST)
Subject: [Qgis-developer] [Processing] - error in "get models from
 on-line scripts collection"
In-Reply-To: <CAJsc-7znx0+TJgOChfOU-WyPPtWi6m=hafY5ybxtji1hgVWYrA@mail.gmail.com>
References: <1416226921917-5173288.post@n6.nabble.com>
	<CAJsc-7znx0+TJgOChfOU-WyPPtWi6m=hafY5ybxtji1hgVWYrA@mail.gmail.com>
Message-ID: <1417432346393-5175753.post@n6.nabble.com>

hi victor, 
i'm on win8 64 under proxy, but all operations that need internet connection
are working, like wms, plugins installations ecc.

qgis installation is 32

thank you 

s.





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Processing-error-in-get-models-from-on-line-scripts-collection-tp5173288p5175753.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From delazj at gmail.com  Mon Dec  1 03:30:16 2014
From: delazj at gmail.com (Junior Delaz)
Date: Mon, 1 Dec 2014 12:30:16 +0100
Subject: [Qgis-developer] Questions about Dialog for Select by Expression
In-Reply-To: <38497AD9CA059C42AA3451EFEFF0378E9DCA340A@P1KITMBX03WC02.unicph.domain>
References: <38497AD9CA059C42AA3451EFEFF0378E9DCA340A@P1KITMBX03WC02.unicph.domain>
Message-ID: <CAECJsSpuwRb2eYQjzoZPmQRUjWHBjUu1429VxUx0y-MhH-L3BQ@mail.gmail.com>

Hi All

Lene,

The height of the expression frame should indeed have a minimum value, to
avoid closing it. But this is not a new behaviour. In QGIS 2.4, you could
already close totally this frame if you drag down enough. I think it's a
bug and you can fill a ticket unless it's an intended behaviour (and it
would be nice if the dev can explain why such choice - thanks).

About syntax coloring, I have it work as expected here but I'm on 2.6.1
(haven't tried 2.6.0). Maybe, it's already fixed or it's an OS issue (I'm
on Windows 7  64bits, Osgeo4w advanced install).

For the last one, I agree with you, we should have kept "load unique
values" and "All" instead of "load  values" and "All unique". The first one
seems more comprehensive to me and everybody gets that the "unique" term
applies for "All" and "10 samples". It may be confusing now, having
"unique" only on "All" button. No?

2014-11-30 9:30 GMT+01:00 Lene Fischer <lfi at ign.ku.dk>:

>  Hi,
>
> In the dialog Select by expression there has been some changes in 2.6
>
>
>
> Window dragging in expressions must have a minimum vale so the express
> doesn?t disappear if you drag down.
>
> Secondly ? before there was a syntax coloring ? now it?s all the same
> color.
>
> At last ? why does buttons change name ? if there is no change in
> function? Here I refere to Load values.
>
>
>
> Please see the video http://screencast.com/t/VE4PvkT1 that explains the
> questions.
>
> Regards
>
>
>
>
>
>
>
>
>
> *Lene Fischer*
>
> Associate Professor
>
>
>
> *Department of Geosciences and Natural Resource Management*
>
> University of Copenhagen
>
>
>
> MOB +45 40115084
>
> lfi at ign.ku.dk
>
>
>
>
>
> [image: SCIENCE_bomaerke_UK]
>
>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141201/5b6109dc/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141201/5b6109dc/attachment-0001.jpg>

From K.Alberti at uu.nl  Mon Dec  1 05:10:09 2014
From: K.Alberti at uu.nl (Alberti, K. (Koko))
Date: Mon, 1 Dec 2014 13:10:09 +0000
Subject: [Qgis-developer] Saving a project using QGIS (Python) API loses
 mapcanvas and other XML nodes
Message-ID: <62DE033FEF5A8740AD4021902F26D3522DBFB3FC@ICTSC-W-S202.soliscom.uu.nl>

Hi qgis-dev,

Apologies for the crosspost (on GIS stackexchange [1]), but I'm hoping this is a more appropriate audience for my question. I'm trying to open, manipulate, and save a QGIS project file using a standalone python script. However, upon saving the project, the output file is missing the <mapcanvas> and <legend> XML nodes. Does anyone know why this happens and if it is the expected behaviour or that something else is going on? When these nodes are missing and the project is then served via QGIS server the GetProjectSettings request breaks.

Looking through the source code of QgsProject::write() at http://qgis.org/api/qgsproject_8cpp_source.html#l01090 it says "let map canvas and legend write their information", so it seems like something goes wrong at this point. Is the map canvas not available in a standalone python script or is nothing being done with the signal? I'm afraid I don't know enough of the details to be able to debug this any deeper, hence my question here. The script I'm using is at http://pastebin.com/Cphcywkx and on SE [1]. If it is indeed a bug I can file an issue in the tracker.

regards,
Koko

[1] http://gis.stackexchange.com/questions/122849/saving-a-qgis-project-using-the-api-loses-mapcanvas-and-other-xml-nodes

From rldhont at gmail.com  Mon Dec  1 05:55:07 2014
From: rldhont at gmail.com (=?UTF-8?B?UmVuw6ktTHVjIERob250?=)
Date: Mon, 01 Dec 2014 14:55:07 +0100
Subject: [Qgis-developer] [QGIS-Server] Enhance
 http://qgis.org/wms_1_3_0.xsd and WMS 1.3.0 compliance
Message-ID: <547C733B.4080407@gmail.com>

Hi dev,

I would like to update http://qgis.org/wms_1_3_0.xsd to enhance 
QGIS-Server compliance with WMS 1.3.0.

I didn't find where this file is stored and how to update it. Did 
someone know about its ?

Thanks,
Ren?-Luc

From rdmailings at duif.net  Mon Dec  1 06:34:33 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 01 Dec 2014 15:34:33 +0100
Subject: [Qgis-developer] [QGIS-Server] Enhance
 http://qgis.org/wms_1_3_0.xsd and WMS 1.3.0 compliance
In-Reply-To: <547C733B.4080407@gmail.com>
References: <547C733B.4080407@gmail.com>
Message-ID: <547C7C79.2030603@duif.net>

On 01-12-14 14:55, Ren?-Luc Dhont wrote:
> Hi dev,
> 
> I would like to update http://qgis.org/wms_1_3_0.xsd to enhance
> QGIS-Server compliance with WMS 1.3.0.
> 
> I didn't find where this file is stored and how to update it. Did
> someone know about its ?

Hi Ren?-Luc,

I had a look for it, and found it. It is in the web dir of the qgis.org
server. There is also a 'version.txt' there (used for the url
http://qgis.org/version.txt in QGIS).

For what I know it is not available somewhere else on github or so (if
anybody knows: plz let me know).

If you sent me/us a new version (and you are sure nothing breaks for
other people), I'm happy to put it on the server.

Maybe for future it is best to put those files in Github? So we make a
directory 'static' in https://github.com/qgis/QGIS-Website and copy the
content of that directory verbatim to the html root?

Regards,

Richard Duivenvoorde






From misha at mail.geometrics.com  Mon Dec  1 10:12:47 2014
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Mon, 1 Dec 2014 10:12:47 -0800
Subject: [Qgis-developer] Core dump when starting QGIS
In-Reply-To: <547C4214.3040709@carto.net>
References: <547C12E0.3070803@carto.net>	<CAL5Q673YVTZFx6d4g9muh3mw2cetdhSxE-aQiiav2hDR17T4ZA@mail.gmail.com>
	<547C4214.3040709@carto.net>
Message-ID: <547CAF9F.5040004@mail.geometrics.com>

Hi,

This has been reported as http://hub.qgis.org/issues/11716

Apparently there is not yet update for ubuntugis-nightly :(

But there is always hope :)

Best Regards
Mikhail


On 12/1/2014 2:25 AM, Andreas Neumann wrote:
> Hi,
>
> With the newest commit it works fine. Apparently there was an issue 
> with the browser dock startup which made QGIS crash on startup. Now it 
> works fine.
>
> Thanks,
>
> Andreas
>
> On 01.12.2014 08:50, Alessandro Pasotti wrote:
>> Hi,
>>
>> the same happened to me yesterday when upgrading from 12.04 to 14.04.
>>
>> When I launched QGIS the second time it ran without errors.
>>
>>
>>
>>
>> 2014-12-01 8:04 GMT+01:00 Andreas Neumann <a.neumann at carto.net>:
>>> Hi,
>>>
>>> I recently upgraded from Kubuntu 14.04 to 14.10. With the current 
>>> master I
>>> get a core dump when starting QGIS. I removed the build directory and
>>> recreated the settings with ccmake. The compile works fine but when 
>>> I start
>>> QGIS I get a core dump. Here are the startup messages:
>>>
>>> -------------------------------------
>>>
>>> Warning: loading of qt translation failed
>>> [/usr/share/qt4/translations/qt_en_US]
>>> Warning: Bus::open: Can not get ibus-daemon's address.
>>> IBusInputContext::createInputContext: no connection to ibus-daemon
>>> Warning: QGraphicsScene::addItem: item has already been added to 
>>> this scene
>>> QGIS died on signal 11Could not attach to process.  If your uid 
>>> matches the
>>> uid of the target
>>> process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or 
>>> try
>>> again as the root user.  For more details, see 
>>> /etc/sysctl.d/10-ptrace.conf
>>> ptrace: Operation not permitted.
>>> No thread selected
>>> No stack.
>>> gdb returned 0
>>> Aborted (core dumped)
>>>
>>> ---------------------------
>>>
>>> I see the splash screen and immediately get a core dump. I don't 
>>> even see
>>> the main application window.
>>>
>>> I wonder if there is a library problem after my Ubuntu update?
>>>
>>> Thank you if you have any idea what I could do to solve my problem.
>>>
>>> Andreas
>>>
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer




PLEASE NOTE: This message, including any attachments, may include privileged,
confidential and/or inside information. Any dissemination, distribution or copy
of this communication by   anyone other than the intended recipient is strictly
prohibited. If you are not the intended recipient, please notify the sender by
replying to this message and then delete it from your system. Information
provided via electronic media is not guaranteed against defects including
translation and transmission errors. The company accepts no liability for any
damage caused by any virus transmitted by this email.

Geometrics Inc. | 2190 Fortune Drive | San Jose, CA 95131 USA

From ccrook at linz.govt.nz  Mon Dec  1 13:19:24 2014
From: ccrook at linz.govt.nz (Chris Crook)
Date: Tue, 2 Dec 2014 10:19:24 +1300
Subject: [Qgis-developer] SIP and transfer of ownership
In-Reply-To: <CAC2XbFcdFUB_=8zx4y4RxfZs1QoKVwG-mriew69Qgc6=Bdpx7Q@mail.gmail.com>
References: <666FB8D75E95AE42965A0E76A5E5337E1383A201CB@prdlsmmsg01.ad.linz.govt.nz>
	<CAC2XbFcdFUB_=8zx4y4RxfZs1QoKVwG-mriew69Qgc6=Bdpx7Q@mail.gmail.com>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E14A23A2B17@prdlsmmsg01.ad.linz.govt.nz>

Hi Martin

Sorry for the equally long delay, and thanks for your response.   At the moment I don't have time to think about this in any case.

However I agree with your general point, better to address the issue at the C++ level rather than the SIP level, so that everyone benefits and the code base is more robust against ownership oversights.  It does make it a slightly bigger job!

I guess the ideal thing is to document a preferred pattern for implementing these types of objects which are generally copied and not modified (I'm not that familiar with code patterns or what is available in the Qt framework, though I think this sort of pattern is well used within it, eg strings?).

Thanks
Chris


> -----Original Message-----
> From: Martin Dobias [mailto:wonder.sk at gmail.com]
> Sent: Saturday, 8 November 2014 8:08 p.m.
> To: Chris Crook
> Cc: qgis-developer at lists.osgeo.org
> Subject: Re: [Qgis-developer] SIP and transfer of ownership
>
> Hi Chris
>
> (sorry for the long delay!)
>
> You are raising good points.
>
> On Sun, Oct 12, 2014 at 1:35 AM, Chris Crook <ccrook at linz.govt.nz> wrote:
> >
> >     void setSourceColorRamp( QgsVectorColorRampV2* ramp /Transfer/ );
> >
> > So this could be used from python with code something like
> >
> >     ramp=myColorRamp()
> >     renderer.setSourceColorRamp(ramp)
> >
> > However if you were using the same ramp in two places, then you'd need
> > to make sure that you didn't pass the same object to both, so you
> > might have something like
> >
> >    ramp=myColorRamp()
> >    renderer1.setSourceColorRamp(ramp.clone())
> >    renderer2.setSourceColorRamp(ramp.clone())
> >
> > Is this right?
>
> Yes. But you could as well do this:
>
>     renderer1.setSourceColorRamp(ramp.clone())
>     renderer2.setSourceColorRamp(ramp)
>
>
> > If so, then I wonder if having to pay attention to this sort of memory
> allocation/ownership issue is not very "pythonic".
>
> Indeed it is not very Pythonic. Qt library is able to avoid such issues much
> better. Why is that: when /Transfer/ is needed (e.g. in calls involving
> QObject-based classes), the classes explicitly remember their
> parents/children. So even if you try to assign one object to two different
> parents (like above), it will be actually moved from one parent to another.
> QGIS API does not handle it and that's why we have these issues. A solution
> would be to make internal copies of objects in functions like
> setSourceColorRamp(). That would solve the issue, but it will add an extra
> copy we didn't want. There is solution for that either - to use implicit sharing.
> If the color ramp class supported implicit sharing, the copy would be just
> shallow (no memory copying) - and it would be a win.
>
> I think for a future major release of QGIS we could go through the API and
> see where we have these problems - and ideally fix them as suggested
> above. However the implicit sharing has also its downsides - the
> implementation is slightly more complex and it adds a little bit of overhead.
> But it's nothing we couldn't handle :-)
>
>
> > Would it be better to set up the SIP so that it always used the clone()
> function, and so that a python coder didn't have think about whether they
> might have yielded ownership of a python object.  Presumably there is a way
> to write the SIP to do this?  And would this create issues in those
> environments (eg windows 64) where the transfer function doesn't seem to
> work reliably, and python subclassed objects need to be deliberately kept
> alive?
>
> I don't think that trying to solve this at SIP level would be good.
> Any deviation between C++ and Python API (in terms of some special code
> for SIP) is a pain, so if possible let's address that in C++ code (with
> improvements for both C++ and Python devs). Also from C++ developer's
> point of view, it is much nicer if you do not need to think how the ownership
> is handled in each such method.
>
> Cheers
> Martin

This message contains information, which may be in confidence and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From rldhont at gmail.com  Mon Dec  1 13:36:59 2014
From: rldhont at gmail.com (=?UTF-8?B?UmVuw6ktTHVjIERob250?=)
Date: Mon, 01 Dec 2014 22:36:59 +0100
Subject: [Qgis-developer] [QGIS-Server] Enhance
 http://qgis.org/wms_1_3_0.xsd and WMS 1.3.0 compliance
In-Reply-To: <547C7C79.2030603@duif.net>
References: <547C733B.4080407@gmail.com> <547C7C79.2030603@duif.net>
Message-ID: <547CDF7B.4080309@gmail.com>

Hi dev,

I proposed this pull request
https://github.com/qgis/QGIS/pull/1715
to fix the issue 'QGIS Server getcapabilites response is not WMS compliant'
http://hub.qgis.org/issues/10489

What do you think about it ?

Ren?-Luc

Le 01/12/2014 15:34, Richard Duivenvoorde a ?crit :
> On 01-12-14 14:55, Ren?-Luc Dhont wrote:
>> Hi dev,
>>
>> I would like to update http://qgis.org/wms_1_3_0.xsd to enhance
>> QGIS-Server compliance with WMS 1.3.0.
>>
>> I didn't find where this file is stored and how to update it. Did
>> someone know about its ?
> Hi Ren?-Luc,
>
> I had a look for it, and found it. It is in the web dir of the qgis.org
> server. There is also a 'version.txt' there (used for the url
> http://qgis.org/version.txt in QGIS).
>
> For what I know it is not available somewhere else on github or so (if
> anybody knows: plz let me know).
>
> If you sent me/us a new version (and you are sure nothing breaks for
> other people), I'm happy to put it on the server.
>
> Maybe for future it is best to put those files in Github? So we make a
> directory 'static' in https://github.com/qgis/QGIS-Website and copy the
> content of that directory verbatim to the html root?
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
>
>


From madmanwoo at gmail.com  Mon Dec  1 15:10:34 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Mon, 01 Dec 2014 23:10:34 +0000
Subject: [Qgis-developer] Questions about Dialog for Select by Expression
References: <38497AD9CA059C42AA3451EFEFF0378E9DCA340A@P1KITMBX03WC02.unicph.domain>
	<CAECJsSpuwRb2eYQjzoZPmQRUjWHBjUu1429VxUx0y-MhH-L3BQ@mail.gmail.com>
Message-ID: <CAAi8Yg_yM5y3gY3WjKkYm4Jds9++_75MBu8-GCrDd=c7esRL1w@mail.gmail.com>

Hey Lene and Junior,

> The height of the expression frame should indeed have a minimum value, to
avoid closing it. But this is not a new behaviour. In QGIS 2.4, you could
already close totally this frame if you drag down enough. I think it's a
bug and you can fill a ticket unless it's an intended behaviour (and it
would be nice if the dev can explain why such choice - thanks).

This isn't a issue anymore as the dialog has been redone in 2.8.  You can
see what it looks like in this
https://twitter.com/madmanwoo/status/539263306716811264

>> Secondly ? before there was a syntax coloring ? now it?s all the same
color.

We have changed to use a better code editor for the text box and are using
a built-in SQL lexer for the syntax. In SQL single and double quotes at the
same thing, at least the lexer likes to think so.  I'm looking into a fix
for 2.8

- Nathan

On Mon Dec 01 2014 at 9:30:24 PM Junior Delaz <delazj at gmail.com> wrote:

> Hi All
>
> Lene,
>
> The height of the expression frame should indeed have a minimum value, to
> avoid closing it. But this is not a new behaviour. In QGIS 2.4, you could
> already close totally this frame if you drag down enough. I think it's a
> bug and you can fill a ticket unless it's an intended behaviour (and it
> would be nice if the dev can explain why such choice - thanks).
>
> About syntax coloring, I have it work as expected here but I'm on 2.6.1
> (haven't tried 2.6.0). Maybe, it's already fixed or it's an OS issue (I'm
> on Windows 7  64bits, Osgeo4w advanced install).
>
> For the last one, I agree with you, we should have kept "load unique
> values" and "All" instead of "load  values" and "All unique". The first one
> seems more comprehensive to me and everybody gets that the "unique" term
> applies for "All" and "10 samples". It may be confusing now, having
> "unique" only on "All" button. No?
>
> 2014-11-30 9:30 GMT+01:00 Lene Fischer <lfi at ign.ku.dk>:
>
>>  Hi,
>>
>> In the dialog Select by expression there has been some changes in 2.6
>>
>>
>>
>> Window dragging in expressions must have a minimum vale so the express
>> doesn?t disappear if you drag down.
>>
>> Secondly ? before there was a syntax coloring ? now it?s all the same
>> color.
>>
>> At last ? why does buttons change name ? if there is no change in
>> function? Here I refere to Load values.
>>
>>
>>
>> Please see the video http://screencast.com/t/VE4PvkT1 that explains the
>> questions.
>>
>> Regards
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> *Lene Fischer*
>>
>> Associate Professor
>>
>>
>>
>> *Department of Geosciences and Natural Resource Management*
>>
>> University of Copenhagen
>>
>>
>>
>> MOB +45 40115084
>>
>> lfi at ign.ku.dk
>>
>>
>>
>>
>>
>> [image: SCIENCE_bomaerke_UK]
>>
>>
>>
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141201/c8fa53d8/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141201/c8fa53d8/attachment-0001.jpg>

From carlos.lopez at psig.es  Mon Dec  1 16:00:10 2014
From: carlos.lopez at psig.es (=?UTF-8?Q?Carlos_L=C3=B3pez_PSIG?=)
Date: Tue, 2 Dec 2014 01:00:10 +0100
Subject: [Qgis-developer] Enhance for Rubberband (polygon)
Message-ID: <CAGvsbY4VSMcECC-TzJ44W6EQUrjxJjQjEBefCa2AK-SQaEPgUg@mail.gmail.com>

Hi to everyone,
The last week, during a basic course of QGIS that I taught in Barcelona
Activa, an student suggested an improvement for the rubberband (Settings>>
Options >> Digitizing).
He suggested it would be interesting to change the type of drawing when a
new polygon is created, for example making the invisible filling (no brush).
IMHO would be interesting to change the following issues from the
rubberband:   border style, border width, fill style, color for fill and
color for border.

Is it on wiki?

Best regards,


* <http://www.psig.es>*

*Carlos L?pez Quintanilla*

www.psig.es
carlos.lopez at psig.es
+34 699.680.261
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/c14f975a/attachment.html>

From lfi at ign.ku.dk  Mon Dec  1 23:25:27 2014
From: lfi at ign.ku.dk (Lene Fischer)
Date: Tue, 2 Dec 2014 07:25:27 +0000
Subject: [Qgis-developer] Questions about Dialog for Select by Expression
In-Reply-To: <CAAi8Yg_yM5y3gY3WjKkYm4Jds9++_75MBu8-GCrDd=c7esRL1w@mail.gmail.com>
References: <38497AD9CA059C42AA3451EFEFF0378E9DCA340A@P1KITMBX03WC02.unicph.domain>
	<CAECJsSpuwRb2eYQjzoZPmQRUjWHBjUu1429VxUx0y-MhH-L3BQ@mail.gmail.com>
	<CAAi8Yg_yM5y3gY3WjKkYm4Jds9++_75MBu8-GCrDd=c7esRL1w@mail.gmail.com>
Message-ID: <38497AD9CA059C42AA3451EFEFF0378E9DCA3BC5@P1KITMBX03WC02.unicph.domain>

Hi Junior and Nathan,
Thanks for your reply-
Nathan: It looks good with the new box ? but where are the load unique values/sample.
It?s quite important for many users.
Regards


Lene Fischer
Associate Professor

Department of Geosciences and Natural Resource Management
University of Copenhagen

MOB +45 40115084
lfi at ign.ku.dk<mailto:lfi at ign.ku.dk>


[SCIENCE_bomaerke_UK]


Fra: Nathan Woodrow [mailto:madmanwoo at gmail.com]
Sendt: 2. december 2014 00:11
Til: Junior Delaz; Lene Fischer
Cc: qgis-developer
Emne: Re: [Qgis-developer] Questions about Dialog for Select by Expression

Hey Lene and Junior,

> The height of the expression frame should indeed have a minimum value, to avoid closing it. But this is not a new behaviour. In QGIS 2.4, you could already close totally this frame if you drag down enough. I think it's a bug and you can fill a ticket unless it's an intended behaviour (and it would be nice if the dev can explain why such choice - thanks).

This isn't a issue anymore as the dialog has been redone in 2.8.  You can see what it looks like in this https://twitter.com/madmanwoo/status/539263306716811264

>> Secondly ? before there was a syntax coloring ? now it?s all the same color.

We have changed to use a better code editor for the text box and are using a built-in SQL lexer for the syntax. In SQL single and double quotes at the same thing, at least the lexer likes to think so.  I'm looking into a fix for 2.8

- Nathan

On Mon Dec 01 2014 at 9:30:24 PM Junior Delaz <delazj at gmail.com<mailto:delazj at gmail.com>> wrote:
Hi All

Lene,
The height of the expression frame should indeed have a minimum value, to avoid closing it. But this is not a new behaviour. In QGIS 2.4, you could already close totally this frame if you drag down enough. I think it's a bug and you can fill a ticket unless it's an intended behaviour (and it would be nice if the dev can explain why such choice - thanks).

About syntax coloring, I have it work as expected here but I'm on 2.6.1 (haven't tried 2.6.0). Maybe, it's already fixed or it's an OS issue (I'm on Windows 7  64bits, Osgeo4w advanced install).
For the last one, I agree with you, we should have kept "load unique values" and "All" instead of "load  values" and "All unique". The first one seems more comprehensive to me and everybody gets that the "unique" term applies for "All" and "10 samples". It may be confusing now, having "unique" only on "All" button. No?

2014-11-30 9:30 GMT+01:00 Lene Fischer <lfi at ign.ku.dk<mailto:lfi at ign.ku.dk>>:
Hi,
In the dialog Select by expression there has been some changes in 2.6

Window dragging in expressions must have a minimum vale so the express doesn?t disappear if you drag down.
Secondly ? before there was a syntax coloring ? now it?s all the same color.
At last ? why does buttons change name ? if there is no change in function? Here I refere to Load values.

Please see the video http://screencast.com/t/VE4PvkT1 that explains the questions.
Regards




Lene Fischer
Associate Professor

Department of Geosciences and Natural Resource Management
University of Copenhagen

MOB +45 40115084<tel:%2B45%2040115084>
lfi at ign.ku.dk<mailto:lfi at ign.ku.dk>


[SCIENCE_bomaerke_UK]



_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org<mailto:Qgis-developer at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/qgis-developer

_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org<mailto:Qgis-developer at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/5362979a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/5362979a/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/5362979a/attachment-0003.jpg>

From marco.hugentobler at sourcepole.ch  Tue Dec  2 00:00:29 2014
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Tue, 02 Dec 2014 09:00:29 +0100
Subject: [Qgis-developer] [QGIS-Server] Enhance
 http://qgis.org/wms_1_3_0.xsd and WMS 1.3.0 compliance
In-Reply-To: <547CDF7B.4080309@gmail.com>
References: <547C733B.4080407@gmail.com> <547C7C79.2030603@duif.net>
	<547CDF7B.4080309@gmail.com>
Message-ID: <547D719D.4020604@sourcepole.ch>

Hi Ren?-Luc

Is the motivation behind the getSchemaExtension only to support the 
additional features of QGIS server? Or is the schema extension also 
important in other contexts (e.g. some inspire thing that I might not 
know about)? In case the former, I'm proposing to just remove those 
elements from the GetCapabilities response and only show in 
GetProjectSettings. The QGIS schema was good to give people more time to 
switch to newer webclient versions. However at some point there must be 
a switch.

Regards,
Marco

On 01.12.2014 22:36, Ren?-Luc Dhont wrote:
> Hi dev,
>
> I proposed this pull request
> https://github.com/qgis/QGIS/pull/1715
> to fix the issue 'QGIS Server getcapabilites response is not WMS 
> compliant'
> http://hub.qgis.org/issues/10489
>
> What do you think about it ?
>
> Ren?-Luc
>
> Le 01/12/2014 15:34, Richard Duivenvoorde a ?crit :
>> On 01-12-14 14:55, Ren?-Luc Dhont wrote:
>>> Hi dev,
>>>
>>> I would like to update http://qgis.org/wms_1_3_0.xsd to enhance
>>> QGIS-Server compliance with WMS 1.3.0.
>>>
>>> I didn't find where this file is stored and how to update it. Did
>>> someone know about its ?
>> Hi Ren?-Luc,
>>
>> I had a look for it, and found it. It is in the web dir of the qgis.org
>> server. There is also a 'version.txt' there (used for the url
>> http://qgis.org/version.txt in QGIS).
>>
>> For what I know it is not available somewhere else on github or so (if
>> anybody knows: plz let me know).
>>
>> If you sent me/us a new version (and you are sure nothing breaks for
>> other people), I'm happy to put it on the server.
>>
>> Maybe for future it is best to put those files in Github? So we make a
>> directory 'static' in https://github.com/qgis/QGIS-Website and copy the
>> content of that directory verbatim to the html root?
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>>
>>
>>
>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From manojateli at gmail.com  Tue Dec  2 00:05:53 2014
From: manojateli at gmail.com (Manoj)
Date: Tue, 2 Dec 2014 08:05:53 +0000
Subject: [Qgis-developer] Concurrent editing- postGIS/Oracle Spatial
Message-ID: <CABz6Ln2cWoSEkJF3mVxW_SRpaE4s2MqVxxYyeiyBfWFSHq_TtQ@mail.gmail.com>

Hello All,

unable to post from original id, so trying my luck with another.


I need a suggestion to implement a workflow in QGIS.

Requirement is that edits are not visible to other user until field work is
over which means edits for a user is stored in temp table or in the same
table differentiated by a attribute.


So say I have road layer which is visible to all.

Any user work on road layer, their edits are stored in road_temp table.
Only owner user is allowed to see the new edits. The entry in db is having
user?s job id to find out.


Once he marks the job completion then others can also see.

So how I can make QGIS to show a combined view of two tables based on the
job opened or just existing +job data  if stored in a same table?

For example-


Existing data is ? A, B, C, D

User A-  Job1- Created ? E, Deleted C

So he his map showing- A,B, D, E

UserB comes- He still sees A, B, C, D.

He created another job- and added F.
So userB in his map viewing- A,B, C, D, F

User A- marked his job to complete.

Now UserB  in his map should see- A,B, D,E, F

Or which library is rendering the feature by getting from db (postGIS or
oracle)?


Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/eee35f6d/attachment.html>

From rldhont at gmail.com  Tue Dec  2 00:31:38 2014
From: rldhont at gmail.com (=?UTF-8?B?UmVuw6ktTHVjIERob250?=)
Date: Tue, 02 Dec 2014 09:31:38 +0100
Subject: [Qgis-developer] [QGIS-Server] Enhance
 http://qgis.org/wms_1_3_0.xsd and WMS 1.3.0 compliance
In-Reply-To: <547D719D.4020604@sourcepole.ch>
References: <547C733B.4080407@gmail.com>
	<547C7C79.2030603@duif.net>	<547CDF7B.4080309@gmail.com>
	<547D719D.4020604@sourcepole.ch>
Message-ID: <547D78EA.4030806@gmail.com>

Hi Marco,

Firstly I would like to update WMS 1.3.0 GetCapabilities for properly 
declare the request GetLegendGraphic. This request is defined in 'Styled 
Layer Descriptor profile of the Web Map Service Implementation 
Specification'. One of my customer needs it to add his QGIS-Server WMS 
layers in a GeOrchestra application.

Then I think it will be useful to have GetStyles in WMS 1.3.0 and not 
only in WMS 1.1.1. GetStyles is the motivation behind 
getSchemaExtension. The Open Geospatial Consortium gives a way to 
declare extended request in WMS 1.3.0 and MapServer use it to add this 
request.

Finally I think GetCapabilities is the right place to declare extended 
request like GetLegendGraphic or GetStyles. GetPrint has probably to be 
simplified in GetCapabilities. The extended schema is not for add all 
the project settings in GetCapabilities but to decare request for 
clients and other interoperable applications like GeoServer, GeoSource, 
GeOrchestra, etc.
It's also a way to declare QGIS-Server extended request like : 
GetProjectSettings, GetContext, etc.

Regards,
Ren?-Luc D'Hont
3Liz

Le 02/12/2014 09:00, Marco Hugentobler a ?crit :
> Hi Ren?-Luc
>
> Is the motivation behind the getSchemaExtension only to support the 
> additional features of QGIS server? Or is the schema extension also 
> important in other contexts (e.g. some inspire thing that I might not 
> know about)? In case the former, I'm proposing to just remove those 
> elements from the GetCapabilities response and only show in 
> GetProjectSettings. The QGIS schema was good to give people more time 
> to switch to newer webclient versions. However at some point there 
> must be a switch.
>
> Regards,
> Marco
>
> On 01.12.2014 22:36, Ren?-Luc Dhont wrote:
>> Hi dev,
>>
>> I proposed this pull request
>> https://github.com/qgis/QGIS/pull/1715
>> to fix the issue 'QGIS Server getcapabilites response is not WMS 
>> compliant'
>> http://hub.qgis.org/issues/10489
>>
>> What do you think about it ?
>>
>> Ren?-Luc
>>
>> Le 01/12/2014 15:34, Richard Duivenvoorde a ?crit :
>>> On 01-12-14 14:55, Ren?-Luc Dhont wrote:
>>>> Hi dev,
>>>>
>>>> I would like to update http://qgis.org/wms_1_3_0.xsd to enhance
>>>> QGIS-Server compliance with WMS 1.3.0.
>>>>
>>>> I didn't find where this file is stored and how to update it. Did
>>>> someone know about its ?
>>> Hi Ren?-Luc,
>>>
>>> I had a look for it, and found it. It is in the web dir of the qgis.org
>>> server. There is also a 'version.txt' there (used for the url
>>> http://qgis.org/version.txt in QGIS).
>>>
>>> For what I know it is not available somewhere else on github or so (if
>>> anybody knows: plz let me know).
>>>
>>> If you sent me/us a new version (and you are sure nothing breaks for
>>> other people), I'm happy to put it on the server.
>>>
>>> Maybe for future it is best to put those files in Github? So we make a
>>> directory 'static' in https://github.com/qgis/QGIS-Website and copy the
>>> content of that directory verbatim to the html root?
>>>
>>> Regards,
>>>
>>> Richard Duivenvoorde
>>>
>>>
>>>
>>>
>>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>


From bernhard.stroebl at jena.de  Tue Dec  2 03:11:30 2014
From: bernhard.stroebl at jena.de (=?windows-1252?Q?Bernhard_Str=F6bl?=)
Date: Tue, 02 Dec 2014 12:11:30 +0100
Subject: [Qgis-developer] Concurrent editing- postGIS/Oracle Spatial
In-Reply-To: <CABz6Ln2cWoSEkJF3mVxW_SRpaE4s2MqVxxYyeiyBfWFSHq_TtQ@mail.gmail.com>
References: <CABz6Ln2cWoSEkJF3mVxW_SRpaE4s2MqVxxYyeiyBfWFSHq_TtQ@mail.gmail.com>
Message-ID: <547D9E62.6080401@jena.de>

Hi,

no solution but some thoughts. You could store all changes of each user 
into a separate table and create a dedicated view for each user 
combining the changed datasets in his/her user table and those unchanged 
by this user from the original table.
The user table would have a field user_action::char(1) with values i, u 
or d for (INSERT, UPDATE, DELETE)

CREATE VIEW userview AS
SELECT data FROM usertable
WHERE user_action != 'd'
UNION
SELECT data FROM originaltable
WHERE id not in (SELECT DISTINCT id FROM usertable);
--assuming id is the primary key

The user would edit this view and the view would be made editable 
through rules [1].

Once the job is completed the changes can be applied to the original 
table and deleted from the user table (by means of a DB function). You 
would have to make sure that deletes are executed first, then inserts 
and then updates. Maybe a timestamp of the change is useful to have only 
the last update executed for each dataset.

The main problem I see is concurrent editing of the same feature (e.g. 
user A changes feature 1 and in the meanwhile user B deletes it, then 
the application of A's changes has no effect). There used to be a plugin 
by Horst D?ster called "PG Version" to handle this but I could not just 
find it.

Hope this helps

Bernhard

[1] http://www.postgresql.org/docs/9.3/static/rules.html

Am 02.12.2014 09:05, schrieb Manoj:
> Hello All,
>
> unable to post from original id, so trying my luck with another.
>
>
> I need a suggestion to implement a workflow in QGIS.
>
> Requirement is that edits are not visible to other user until field work
> is over which means edits for a user is stored in temp table or in the
> same table differentiated by a attribute.
>
>
> So say I have road layer which is visible to all.
>
> Any user work on road layer, their edits are stored in road_temp table.
> Only owner user is allowed to see the new edits. The entry in db is
> having user?s job id to find out.
>
>
> Once he marks the job completion then others can also see.
>
> So how I can make QGIS to show a combined view of two tables based on
> the job opened or just existing +job data  if stored in a same table?
>
> For example-
>
>
> Existing data is ? A, B, C, D
>
> User A-  Job1- Created ? E, Deleted C
>
> So he his map showing- A,B, D, E
>
> UserB comes- He still sees A, B, C, D.
>
> He created another job- and added F.
> So userB in his map viewing- A,B, C, D, F
>
> User A- marked his job to complete.
>
> Now UserB  in his map should see- A,B, D,E, F
>
> Or which library is rendering the feature by getting from db (postGIS or
> oracle)?
>
>
> Thanks
>
>
>


__________ Information from ESET Mail Security, version of virus signature database 10811 (20141202) __________

The message was checked by ESET Mail Security.
http://www.eset.com



From madmanwoo at gmail.com  Tue Dec  2 05:51:53 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Tue, 02 Dec 2014 13:51:53 +0000
Subject: [Qgis-developer] Questions about Dialog for Select by Expression
References: <38497AD9CA059C42AA3451EFEFF0378E9DCA340A@P1KITMBX03WC02.unicph.domain>
	<CAECJsSpuwRb2eYQjzoZPmQRUjWHBjUu1429VxUx0y-MhH-L3BQ@mail.gmail.com>
	<CAAi8Yg_yM5y3gY3WjKkYm4Jds9++_75MBu8-GCrDd=c7esRL1w@mail.gmail.com>
	<38497AD9CA059C42AA3451EFEFF0378E9DCA3BC5@P1KITMBX03WC02.unicph.domain>
Message-ID: <CAAi8Yg9BZ+zsH77pqVNYE1qzPp6XJyN3wfazBj2+89V45V05RQ@mail.gmail.com>

Hey Lene,

>>Nathan: It looks good with the new box ? but where are the load unique
values/sample.

Still there, only shows up when you select a field like before.  It will
show up under the functions list.

- Nathan

On Tue Dec 02 2014 at 5:25:36 PM Lene Fischer <lfi at ign.ku.dk> wrote:

>  Hi Junior and Nathan,
>
> Thanks for your reply-
>
> Nathan: It looks good with the new box ? but where are the load unique
> values/sample.
>
> It?s quite important for many users.
>
> Regards
>
>
>
>
>
> *Lene Fischer*
>
> Associate Professor
>
>
>
> *Department of Geosciences and Natural Resource Management*
>
> University of Copenhagen
>
>
>
> MOB +45 40115084
>
> lfi at ign.ku.dk
>
>
>
>
>
> [image: SCIENCE_bomaerke_UK]
>
>
>
>
>
> *Fra:* Nathan Woodrow [mailto:madmanwoo at gmail.com]
> *Sendt:* 2. december 2014 00:11
> *Til:* Junior Delaz; Lene Fischer
> *Cc:* qgis-developer
> *Emne:* Re: [Qgis-developer] Questions about Dialog for Select by
> Expression
>
>
>
> Hey Lene and Junior,
>
>
>
> > The height of the expression frame should indeed have a minimum value,
> to avoid closing it. But this is not a new behaviour. In QGIS 2.4, you
> could already close totally this frame if you drag down enough. I think
> it's a bug and you can fill a ticket unless it's an intended behaviour (and
> it would be nice if the dev can explain why such choice - thanks).
>
>
>
> This isn't a issue anymore as the dialog has been redone in 2.8.  You can
> see what it looks like in this
> https://twitter.com/madmanwoo/status/539263306716811264
>
>
>
> >> Secondly ? before there was a syntax coloring ? now it?s all the same
> color.
>
>
>
> We have changed to use a better code editor for the text box and are using
> a built-in SQL lexer for the syntax. In SQL single and double quotes at the
> same thing, at least the lexer likes to think so.  I'm looking into a fix
> for 2.8
>
>
>
> - Nathan
>
>
>
> On Mon Dec 01 2014 at 9:30:24 PM Junior Delaz <delazj at gmail.com> wrote:
>
> Hi All
>
> Lene,
>
> The height of the expression frame should indeed have a minimum value, to
> avoid closing it. But this is not a new behaviour. In QGIS 2.4, you could
> already close totally this frame if you drag down enough. I think it's a
> bug and you can fill a ticket unless it's an intended behaviour (and it
> would be nice if the dev can explain why such choice - thanks).
>
> About syntax coloring, I have it work as expected here but I'm on 2.6.1
> (haven't tried 2.6.0). Maybe, it's already fixed or it's an OS issue (I'm
> on Windows 7  64bits, Osgeo4w advanced install).
>
> For the last one, I agree with you, we should have kept "load unique
> values" and "All" instead of "load  values" and "All unique". The first one
> seems more comprehensive to me and everybody gets that the "unique" term
> applies for "All" and "10 samples". It may be confusing now, having
> "unique" only on "All" button. No?
>
>
>
> 2014-11-30 9:30 GMT+01:00 Lene Fischer <lfi at ign.ku.dk>:
>
> Hi,
>
> In the dialog Select by expression there has been some changes in 2.6
>
>
>
> Window dragging in expressions must have a minimum vale so the express
> doesn?t disappear if you drag down.
>
> Secondly ? before there was a syntax coloring ? now it?s all the same
> color.
>
> At last ? why does buttons change name ? if there is no change in
> function? Here I refere to Load values.
>
>
>
> Please see the video http://screencast.com/t/VE4PvkT1 that explains the
> questions.
>
> Regards
>
>
>
>
>
>
>
>
>
> *Lene Fischer*
>
> Associate Professor
>
>
>
> *Department of Geosciences and Natural Resource Management*
>
> University of Copenhagen
>
>
>
> MOB +45 40115084
>
> lfi at ign.ku.dk
>
>
>
>
>
> [image: SCIENCE_bomaerke_UK]
>
>
>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/a982de85/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/a982de85/attachment-0004.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/a982de85/attachment-0005.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/a982de85/attachment-0006.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/a982de85/attachment-0007.jpg>

From strk at keybit.net  Tue Dec  2 08:15:22 2014
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 2 Dec 2014 17:15:22 +0100
Subject: [Qgis-developer] Saving map config, or the meaning of extent (again)
Message-ID: <20141202161522.GB9221@localhost>

I'm back to the "what's an extent?" question.
Right now only the "extent" is saved in the project file.
Such information encodes a center and a scale which is dependent
on the output size.

This is not the so-called "visible extent" (padded to retain aspect
ratio) but another "extent", supposedly the "extent of interest" ?

Once we also have rotation, what should we save ?

I'm still thinking that the triplet center,scale,rotation would be the
simplest to retain. The problem with that is that keeping the scale
might result in a different area being exposed depending on the
output size. On the other hand keeping the extent would result in
a different scale being used depending on output size.

What's more worth saving: scale of visible area ?
NOTE: currently the saved info is not the visible,
      but the "requested" extent.

--strk(confused_about_extent);

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From fsalas at pinar.geocuba.cu  Tue Dec  2 11:00:39 2014
From: fsalas at pinar.geocuba.cu (Francisco Salas Rosette)
Date: Tue, 2 Dec 2014 14:00:39 -0500
Subject: [Qgis-developer] Trouble with PostGis View in my Python plugin
Message-ID: <008401d00e62$485c5960$d9150c20$@pinar.geocuba.cu>

Hi, 

I have a problem when try to add one view in QGis with my python plugin ,
because do not have a key  , however if I use the postgis option in QGis the
view is ploted well.  

  

How I can resolve this , some listener can help me

 

 


----------------------------------------------------------------------------------------------------
?D?nde estoy? ?Qu? hay a m? alrededor? ?A d?nde quiero ir? ?D?nde est? lo que busco? ?C?mo llegar? ?C?mo anunciar mi negocio???
Si quiere solucionar todo esto visite y descargue la nueva aplicaci?n m?vil disponible en http://andariego.geocuba.cu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141202/72ce5d1d/attachment.html>

From siki at agt.bme.hu  Tue Dec  2 13:50:29 2014
From: siki at agt.bme.hu (Siki Zoltan)
Date: Tue, 2 Dec 2014 22:50:29 +0100 (CET)
Subject: [Qgis-developer] attribute index
Message-ID: <Pine.LNX.4.64.1412022244480.15627@bme-geod>

Dear List Members,

is there any chance to go through the features using an attribute index?
I would like to traverse sequentially the features in an order defined by 
an attribute (int).

Thanks,
Zoltan

From nyall.dawson at gmail.com  Tue Dec  2 14:18:51 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 3 Dec 2014 09:18:51 +1100
Subject: [Qgis-developer] Test coverage reports
Message-ID: <CAB28Asj_zMohe2SmvEWfmgWwK-2tKBPzifo2WSFGzMwYw4iyPg@mail.gmail.com>

Hi all,

I've sent through a pull request [1] which allows for generation of
unit test coverage reports via lcov.

A sample output from this process is available at
http://nyalldawson.net/qgis/coverage/

So, how well are we placed at the moment?.. Well, overall test
coverage (excluding ui_* and sip files) sits at 18% line coverage, 27%
function coverage, and 9% branch coverage. This is excluding the pal
labeling tests which currently fail in utopic. Unsurprisingly, there's
almost no test coverage of code in app (<2%) and plugins. Gui is also
mostly untested, with the exception of gui/attributetable (40%) and
gui/editorwidgets/core (41%).

Core is a mixed bag - there's a handful of classes with really good
test coverage, and a lot with zero test coverage.

Anyway, it makes for interesting reading, and should help with
directing efforts for creating new unit tests.

Nyall


[1] https://github.com/qgis/QGIS/pull/1712

From madmanwoo at gmail.com  Tue Dec  2 22:54:39 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 03 Dec 2014 06:54:39 +0000
Subject: [Qgis-developer] Installin IntraMaps Roam
References: <5461DA24.4010005@faunalia.it>
	<CAAi8Yg8=G-LG=n0GB19eq7dMKAn1d5b5yYTbPMG=DvuLoCXpzw@mail.gmail.com>
	<5464E8D6.3050604@faunalia.it>
Message-ID: <CAAi8Yg80ssS=h8RGePKahMCdx0fTRDuKN0VN8OSAnEQZ2YHhmw@mail.gmail.com>

>>OK, now I got it, thanks (I know, I should have RTFM first). After
config, the viewer
seems to run fine. Apparently the setup creates an older version of the
project (not
2.6).

Yeah I'm working on streamlining that process.

>> BTW: any plans for a long term support of this interesting app? Wouldn't
it be nice
to include it in QGIS master, to make it easily available to all QGIS users?
Ready to help with testing if necessary.

We (DMS) support the application as we develop it. We have a lot of clients
using it so we continue to support them or anyone else that is using it.
In fact I just made the latest release about an hour ago:
http://dms-aus.github.io/Roam/

- Nathan


On Fri Nov 14 2014 at 3:22:33 AM Paolo Cavallini <cavallini at faunalia.it>
wrote:

> Il 11/11/2014 11:30, Nathan Woodrow ha scritto:
>
> > Did you build a project using the config manager first?  Roam itself is
> just the
> > viewer there is a different application to make the projects.
>
> OK, now I got it, thanks (I know, I should have RTFM first). After config,
> the viewer
> seems to run fine. Apparently the setup creates an older version of the
> project (not
> 2.6).
> BTW: any plans for a long term support of this interesting app? Wouldn't
> it be nice
> to include it in QGIS master, to make it easily available to all QGIS
> users?
> Ready to help with testing if necessary.
> All the best, and thanks.
> --
> Paolo Cavallini - www.faunalia.eu
> Corsi QGIS e PostGIS: http://www.faunalia.eu/training.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141203/d4077ee8/attachment.html>

From denis.rouzaud at gmail.com  Tue Dec  2 23:01:38 2014
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Wed, 03 Dec 2014 08:01:38 +0100
Subject: [Qgis-developer] QEP: advanced digitizing tools (aka CAD tools)
Message-ID: <547EB552.6050908@gmail.com>

Hi all,

A QEP has been open for adding advanced digitizing tools (aka CAD tools) 
to QGIS application.
https://github.com/3nids/QGIS-Enhancement-Proposals/blob/cadtools/QEP-advanced-digitzing-tools.rst

To comment this QEP, please do so in the associated pull request
https://github.com/qgis/QGIS-Enhancement-Proposals/pull/8

Best wishes,

Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141203/bfc61147/attachment.html>

From matteo.ghetta at gmail.com  Wed Dec  3 06:41:57 2014
From: matteo.ghetta at gmail.com (Matteo Ghetta)
Date: Wed, 3 Dec 2014 15:41:57 +0100
Subject: [Qgis-developer] problem with VACUUM in DB Manager
Message-ID: <CAMMN2u2c3tQS3xYcfvmy5pxKrQQvQfeKPjXDS_2XmajdHoNTWQ@mail.gmail.com>

Hi all,
maybe a problem in QGIS 2.6 with VACUUM analyze on both database and
schemas but not on single tables.

This is the error:

Errore durante l'esecuzione di codice Python:

Traceback (most recent call last):
  File "/home/ma7730/lavori/QGIS-master/build26/output/python/plugins/db_manager/db_manager.py",
line 201, in
    invoke_callback = lambda x: self.invokeCallback( callback )
  File "/home/ma7730/lavori/QGIS-master/build26/output/python/plugins/db_manager/db_manager.py",
line 273, in invokeCallback
    callback( self.tree.currentItem(), self.sender(), self )
  File "/home/ma7730/lavori/QGIS-master/build26/output/python/plugins/db_manager/db_plugins/postgis/plugin.py",
line 172, in runVacuumAnalyzeActionSlot
    parent.infoBar().pushMessage(self.tr("Select a table for vacuum
analyze."), QgsMessageBar.INFO, parent.iface.messageTimeout())
TypeError: 'QgsMessageBar' object is not callable



QGIS 2.6 on Debian testing machine but confirmed also on windows and mac
computers.


Should I open a ticket?


Cheers


Matteo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141203/732a526a/attachment.html>

From matthias.kuhn at gmx.ch  Wed Dec  3 07:12:42 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Wed, 03 Dec 2014 16:12:42 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
Message-ID: <547F286A.6010903@gmx.ch>

Hi,

As of Qt5, QtXml is no longer actively maintained [1]
PyQt5 does not even support it.

It will be a reasonably big undertaking to migrate any occurrence of
QDomDocument etc. to QXMLStreamWriter and QXMLStreamReader (our whole
project saving and loading engine is based on this). And when we do this
we will likely have to increase the major version number of QGIS.

In order not to introduce more work, please consider using
QXMLStreamWriter and QXMLStreamReader for new code you write that
involves parsing or producing XML. That does not concern working on code
that is based on code that is currently based on QtXml methods.

Thank you,
Matthias

[1] http://qt-project.org/doc/qt-5/qtxml-module.html#details


From vincent.damoy at espaces-naturels.fr  Wed Dec  3 07:14:52 2014
From: vincent.damoy at espaces-naturels.fr (Vincent Damoy)
Date: Wed, 03 Dec 2014 16:14:52 +0100
Subject: [Qgis-developer] LoadFromTemplate  method broken?
Message-ID: <547F28EC.7090501@espaces-naturels.fr>

Hello all,

Since QGIS 2.6, the LoadFromTemplate method seems not work any more (or 
works differently?)

This is my code to add items in my composer from a template :

|self.composition=  self.composerView.composition()
file1=QtCore.QFile('ComposerTemplate.qpt')
doc=QtXml.QDomDocument()
doc.setContent(file1,  False)
self.composition.loadFromTemplate(doc,  substitutionMap=None,  addUndoCommands=False)|

Up to 2.4 version, this code worked great. But since the last QGIS 
update, nothing is imported from the template. I do not get either error 
messages.

I've readen in QGIS changelogs, that the "Load from template" button is 
replaced by a "softer" "Add items from template" one. But it's in the 
GUI... In the API doc, the LoadFromTemplate method is still present. And 
should still work?
Has anybody else encountered this problem?

Thanks
Vincent

--

Vincent Damoy - Responsable SIG
Conservatoire d'espaces naturels du Nord et du Pas-de-Calais
152 bd de Paris - 62190 Lillers
T?l : 03.21.54.75.00 - Fax : 03.21.54.56.07
/*Pour adh?rer au Conservatoire :* 
www.cen-npdc.org/nous-rejoindre/adherent.html/


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141203/85ab341d/attachment.html>

From marco.hugentobler at sourcepole.ch  Wed Dec  3 07:24:14 2014
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Wed, 03 Dec 2014 16:24:14 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <547F286A.6010903@gmx.ch>
References: <547F286A.6010903@gmx.ch>
Message-ID: <547F2B1E.5010909@sourcepole.ch>

Hi Matthias

>It will be a reasonably big undertaking to migrate any occurrence of
> QDomDocument etc. to QXMLStreamWriter and QXMLStreamReader


 From a quick look, it seems QXMLStreamReader is more like a SAX parser. 
If so, it is not a full replacement for the DOM classes.

Regards,
Marco

On 03.12.2014 16:12, Matthias Kuhn wrote:
> Hi,
>
> As of Qt5, QtXml is no longer actively maintained [1]
> PyQt5 does not even support it.
>
> It will be a reasonably big undertaking to migrate any occurrence of
> QDomDocument etc. to QXMLStreamWriter and QXMLStreamReader (our whole
> project saving and loading engine is based on this). And when we do this
> we will likely have to increase the major version number of QGIS.
>
> In order not to introduce more work, please consider using
> QXMLStreamWriter and QXMLStreamReader for new code you write that
> involves parsing or producing XML. That does not concern working on code
> that is based on code that is currently based on QtXml methods.
>
> Thank you,
> Matthias
>
> [1] http://qt-project.org/doc/qt-5/qtxml-module.html#details
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From lrssvtml at gmail.com  Wed Dec  3 07:38:13 2014
From: lrssvtml at gmail.com (Salvatore Larosa)
Date: Wed, 3 Dec 2014 16:38:13 +0100
Subject: [Qgis-developer] problem with VACUUM in DB Manager
In-Reply-To: <CAMMN2u2c3tQS3xYcfvmy5pxKrQQvQfeKPjXDS_2XmajdHoNTWQ@mail.gmail.com>
References: <CAMMN2u2c3tQS3xYcfvmy5pxKrQQvQfeKPjXDS_2XmajdHoNTWQ@mail.gmail.com>
Message-ID: <CANxjxarjEX+Hq2JWP-TfkZw=no9T2z10f5agzUoxx1H+06hg7A@mail.gmail.com>

Hi,

On Wed, Dec 3, 2014 at 3:41 PM, Matteo Ghetta <matteo.ghetta at gmail.com> wrote:
> Hi all,
> maybe a problem in QGIS 2.6 with VACUUM analyze on both database and schemas
> but not on single tables.
>
> This is the error:
>
> Errore durante l'esecuzione di codice Python:
>
> Traceback (most recent call last):
>   File
> "/home/ma7730/lavori/QGIS-master/build26/output/python/plugins/db_manager/db_manager.py",
> line 201, in
>     invoke_callback = lambda x: self.invokeCallback( callback )
>   File
> "/home/ma7730/lavori/QGIS-master/build26/output/python/plugins/db_manager/db_manager.py",
> line 273, in invokeCallback
>     callback( self.tree.currentItem(), self.sender(), self )
>   File
> "/home/ma7730/lavori/QGIS-master/build26/output/python/plugins/db_manager/db_plugins/postgis/plugin.py",
> line 172, in runVacuumAnalyzeActionSlot
>     parent.infoBar().pushMessage(self.tr("Select a table for vacuum
> analyze."), QgsMessageBar.INFO, parent.iface.messageTimeout())
> TypeError: 'QgsMessageBar' object is not callable

my fault when I introduced that changes, sorry.

> QGIS 2.6 on Debian testing machine but confirmed also on windows and mac
> computers.
>
>
> Should I open a ticket?

J?rgen has just fixed in master. so it is not necessary to file a ticket. thanks


-- 
Salvatore Larosa
linkedIn: http://linkedin.com/in/larosasalvatore
twitter: @lrssvt
skype: s.larosa
IRC: lrssvt on freenode

From matthias.kuhn at gmx.ch  Wed Dec  3 07:46:11 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Wed, 03 Dec 2014 16:46:11 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <547F2B1E.5010909@sourcepole.ch>
References: <547F286A.6010903@gmx.ch> <547F2B1E.5010909@sourcepole.ch>
Message-ID: <547F3043.9080806@gmx.ch>

Hi Marco,

I didn't look at it in detail and just based this recommendation on the
one from the QtXml documentation linked at the end of the original message.
Is there something in particular you think we will be missing? If so, it
might be good to start looking for alternative ways to go.

Regards,
Matthias

On 03.12.2014 16:24, Marco Hugentobler wrote:
> Hi Matthias
>
>> It will be a reasonably big undertaking to migrate any occurrence of
>> QDomDocument etc. to QXMLStreamWriter and QXMLStreamReader
>
>
> From a quick look, it seems QXMLStreamReader is more like a SAX
> parser. If so, it is not a full replacement for the DOM classes.
>
> Regards,
> Marco
>
> On 03.12.2014 16:12, Matthias Kuhn wrote:
>> Hi,
>>
>> As of Qt5, QtXml is no longer actively maintained [1]
>> PyQt5 does not even support it.
>>
>> It will be a reasonably big undertaking to migrate any occurrence of
>> QDomDocument etc. to QXMLStreamWriter and QXMLStreamReader (our whole
>> project saving and loading engine is based on this). And when we do this
>> we will likely have to increase the major version number of QGIS.
>>
>> In order not to introduce more work, please consider using
>> QXMLStreamWriter and QXMLStreamReader for new code you write that
>> involves parsing or producing XML. That does not concern working on code
>> that is based on code that is currently based on QtXml methods.
>>
>> Thank you,
>> Matthias
>>
>> [1] http://qt-project.org/doc/qt-5/qtxml-module.html#details
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>


From tom.chadwin at nnpa.org.uk  Wed Dec  3 09:32:36 2014
From: tom.chadwin at nnpa.org.uk (Tom Chadwin)
Date: Wed, 3 Dec 2014 09:32:36 -0800 (PST)
Subject: [Qgis-developer] Retrieve field name used as label
Message-ID: <1417627956164-5176293.post@n6.nabble.com>

Hello all

I'm trying to build labelling into qgis2leaf. How do I retrieve the name of
the field used as a layer's label? I've tried  QgsLabel::labelField  ( int 
attr ), but I don't understand what the argument attr is.

Thanks

Tom




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Retrieve-field-name-used-as-label-tp5176293.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From strk at keybit.net  Wed Dec  3 09:38:33 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 3 Dec 2014 18:38:33 +0100
Subject: [Qgis-developer] Rotation and raster renderer
Message-ID: <20141203173833.GE8170@localhost>

While vector rendering is now rotation-aware (in my branch), the same
is not true for raster renderer. For what I understand we need:

 - Adding rotation info in QgsRasterViewPort (degrees and center)
 - Adding rotation support in QgsRasterDrawer

Should that be enough ?
Should we encode rotation support in the block reader of rasters insted ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From cavallini at faunalia.it  Wed Dec  3 10:04:15 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 03 Dec 2014 19:04:15 +0100
Subject: [Qgis-developer] Installin IntraMaps Roam
In-Reply-To: <CAAi8Yg80ssS=h8RGePKahMCdx0fTRDuKN0VN8OSAnEQZ2YHhmw@mail.gmail.com>
References: <5461DA24.4010005@faunalia.it>
	<CAAi8Yg8=G-LG=n0GB19eq7dMKAn1d5b5yYTbPMG=DvuLoCXpzw@mail.gmail.com>
	<5464E8D6.3050604@faunalia.it>
	<CAAi8Yg80ssS=h8RGePKahMCdx0fTRDuKN0VN8OSAnEQZ2YHhmw@mail.gmail.com>
Message-ID: <547F509F.4050100@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 03/12/2014 07:54, Nathan Woodrow ha scritto:

> We (DMS) support the application as we develop it. We have a lot
> of clients using it so we continue to support them or anyone else
> that is using it.  In fact I just made the latest release about an
> hour ago: http://dms-aus.github.io/Roam/

happy to know this. any special reason not to include in qgis-master?
thanks.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlR/UJ4ACgkQ/NedwLUzIr6tUwCgrckWVR+yAn0KN5qj6GaQrbXO
7FwAn0mTQJOgvJjq5X1vj01R3ANnp6gM
=u0mV
-----END PGP SIGNATURE-----

From mikhailtchernychev at gmail.com  Wed Dec  3 11:29:45 2014
From: mikhailtchernychev at gmail.com (Mikhail Tchernychev)
Date: Wed, 03 Dec 2014 11:29:45 -0800
Subject: [Qgis-developer] Cannot load python after compiling master
In-Reply-To: <547CAF9F.5040004@mail.geometrics.com>
References: <547C12E0.3070803@carto.net>	<CAL5Q673YVTZFx6d4g9muh3mw2cetdhSxE-aQiiav2hDR17T4ZA@mail.gmail.com>	<547C4214.3040709@carto.net>
	<547CAF9F.5040004@mail.geometrics.com>
Message-ID: <547F64A9.1010001@mail.geometrics.com>

Hi,

I downloaded and compiled latest git snapshot.  However when I try to 
run qgis
I am getting:

ouldn't load PyQGIS.
Python support will be disabled.


Traceback (most recent call last):
   File "", line 1, in
   File "/home/misha/opt/qgis-dev/share/qgis/python/qgis/__init__.py", line 36, in
     from qgis.core import QgsFeature, QgsGeometry
   File "/home/misha/opt/qgis-dev/share/qgis/python/qgis/core/__init__.py", line 2, in
     from qgis._core import *
ImportError: /home/misha/opt/qgis-dev/share/qgis/python/qgis/_core.so: undefined symbol: _ZTI18QgsHeatmapRenderer

Python version:
2.7.6 (default, Mar 22 2014, 23:03:14)
[GCC 4.8.2]

QGIS version:
2.7.0-Master 'Master', exported

Python path:
['/home/misha/opt/qgis-dev/share/qgis/python', 
u'/home/misha/.qgis2/python', u'/home/misha/.qgis2/python/plugins', 
'/home/misha/opt/qgis-dev/share/qgis/python/plugins', 
'/usr/lib/python2.7', '/usr/lib/python2.7/plat-i386-linux-gnu', 
'/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', 
'/usr/lib/python2.7/lib-dynload', 
'/usr/local/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages/PILcompat', 
'/usr/lib/python2.7/dist-packages/gtk-2.0', 
'/usr/lib/pymodules/python2.7', 
'/usr/lib/python2.7/dist-packages/ubuntu-sso-client', 
'/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode']


I suppose this should be very simple. Is some package missing?

I have qgis installed from ubuntugis-nightly but it stopped working on 
Nov 20, and no new version
yet available.

This is for Ubuntu trusty 14.04

Thank you

Mikhail




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141203/346abd90/attachment.html>

From nyall.dawson at gmail.com  Wed Dec  3 15:02:19 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 4 Dec 2014 10:02:19 +1100
Subject: [Qgis-developer] LoadFromTemplate method broken?
In-Reply-To: <547F28EC.7090501@espaces-naturels.fr>
References: <547F28EC.7090501@espaces-naturels.fr>
Message-ID: <CAB28AsiNKAwpuQnqk3oNx7YKURzy-5jnY1iuYomOZhDNqOpWbQ@mail.gmail.com>

On 4 December 2014 at 02:14, Vincent Damoy
<vincent.damoy at espaces-naturels.fr> wrote:
>
> Hello all,
>
> Since QGIS 2.6, the LoadFromTemplate method seems not work any more (or works differently?)
>
> This is my code to add items in my composer from a template :
>
> self.composition = self.composerView.composition()
> file1=QtCore.QFile('ComposerTemplate.qpt')
> doc=QtXml.QDomDocument()
> doc.setContent(file1, False)
> self.composition.loadFromTemplate(doc, substitutionMap=None, addUndoCommands =False)
>

That code works fine for me... Have you tried with a different
template file, or with a template created in 2.6?

Nyall

From lby20102 at hotmail.com  Wed Dec  3 17:07:12 2014
From: lby20102 at hotmail.com (eliu1234)
Date: Wed, 3 Dec 2014 17:07:12 -0800 (PST)
Subject: [Qgis-developer] Fail to create raster layer in C++ but is able to
	do so in python
Message-ID: <1417655232181-5176356.post@n6.nabble.com>

I am trying to add a raster layer in c++ application with QtCreator and QGIS
2.6.0. I am currently trying to create a 32bit application under 64 bit
windows system. I am not sure if this would be the cause.

My code is as follows: 
QgsRasterLayer * layer = new
QgsRasterLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json&pretty=true","raster"); 
However, when I call layer.isValid(), it always return false.

I tried the python equivalent in qgis python console and it works fine. The
python code is as follows: layer =
QgsRasterLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer?f=json&pretty=true","raster");

Any help is appreciated.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Fail-to-create-raster-layer-in-C-but-is-able-to-do-so-in-python-tp5176356.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From jef at norbit.de  Thu Dec  4 00:25:18 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 4 Dec 2014 09:25:18 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <547F3043.9080806@gmx.ch>
References: <547F286A.6010903@gmx.ch> <547F2B1E.5010909@sourcepole.ch>
	<547F3043.9080806@gmx.ch>
Message-ID: <20141204082518.GA19006@norbit.de>

Hi Matthias,

On Wed, 03. Dec 2014 at 16:46:11 +0100, Matthias Kuhn wrote:
> I didn't look at it in detail and just based this recommendation on the
> one from the QtXml documentation linked at the end of the original message.
> Is there something in particular you think we will be missing? If so, it
> might be good to start looking for alternative ways to go.

We could just keep using it and fork it if need be.  Any idea why it was
discontinued?


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden             http://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode                         
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: Digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/74b34f65/attachment.pgp>

From nyall.dawson at gmail.com  Thu Dec  4 00:44:53 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 4 Dec 2014 19:44:53 +1100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <20141204082518.GA19006@norbit.de>
References: <547F286A.6010903@gmx.ch> <547F2B1E.5010909@sourcepole.ch>
	<547F3043.9080806@gmx.ch> <20141204082518.GA19006@norbit.de>
Message-ID: <CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>

On 4 December 2014 at 19:25, J?rgen E. <jef at norbit.de> wrote:
> Hi Matthias,
>
> On Wed, 03. Dec 2014 at 16:46:11 +0100, Matthias Kuhn wrote:
>> I didn't look at it in detail and just based this recommendation on the
>> one from the QtXml documentation linked at the end of the original message.
>> Is there something in particular you think we will be missing? If so, it
>> might be good to start looking for alternative ways to go.
>
> We could just keep using it and fork it if need be.  Any idea why it was
> discontinued?
>

This link [1] suggests that it hasn't been discontinued, it's just
unmaintained, and isn't scheduled for removal. That doesn't solve the
PyQt5 problem though... It's also worth noting that QtXml is very
slow, which is noticeable on project load/save.


Nyall

[1] https://bugreports.qt-project.org/browse/QTBUG-32926

From matthias.kuhn at gmx.ch  Thu Dec  4 01:01:48 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 04 Dec 2014 10:01:48 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
References: <547F286A.6010903@gmx.ch>
	<547F2B1E.5010909@sourcepole.ch>	<547F3043.9080806@gmx.ch>
	<20141204082518.GA19006@norbit.de>
	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
Message-ID: <548022FC.7060101@gmx.ch>

Thank you J?rgen and Nyall,


On 04.12.2014 09:44, Nyall Dawson wrote:
> On 4 December 2014 at 19:25, J?rgen E. <jef at norbit.de> wrote:
>> We could just keep using it and fork it if need be.  Any idea why it was
>> discontinued?
>>
> This link [1] suggests that it hasn't been discontinued, it's just
> unmaintained, and isn't scheduled for removal. That doesn't solve the
> PyQt5 problem though... It's also worth noting that QtXml is very
> slow, which is noticeable on project load/save.

I wrote a mail to the PyQt mailing list to ask about the status.

In general I think it is preferable to stay close to upstream as in the
long run mainenance effort is normally smaller.
But in this case a fork of QtXml (or its python bindings) may indeed be
a good option considering the amount of work and the API break involved.
For no apparent benefits and no clear migration path outlined.

Matthias


From giohappy at gmail.com  Thu Dec  4 01:04:44 2014
From: giohappy at gmail.com (G. Allegri)
Date: Thu, 4 Dec 2014 10:04:44 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
References: <547F286A.6010903@gmx.ch> <547F2B1E.5010909@sourcepole.ch>
	<547F3043.9080806@gmx.ch> <20141204082518.GA19006@norbit.de>
	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
Message-ID: <CAB4g1=yGeQa-_LQgan8fFq3z=1LoNf+7gVw0NUE=KCnLvzMYNg@mail.gmail.com>

QtXml is really, damn slow. PyQt with QtXml is worst then lxml, just to
make a comparison. Switching to a streamlined xml parser would be
advisable, but I know it would a deep refactoring for a lot of QGIS's code.
Maybe it should be considered within the next big refactorings (geometry,
composer, etc.), but it won't be easy to find a sponsor specifically for
this...

giovanni
Il 04/dic/2014 09:45 "Nyall Dawson" <nyall.dawson at gmail.com> ha scritto:

> On 4 December 2014 at 19:25, J?rgen E. <jef at norbit.de> wrote:
> > Hi Matthias,
> >
> > On Wed, 03. Dec 2014 at 16:46:11 +0100, Matthias Kuhn wrote:
> >> I didn't look at it in detail and just based this recommendation on the
> >> one from the QtXml documentation linked at the end of the original
> message.
> >> Is there something in particular you think we will be missing? If so, it
> >> might be good to start looking for alternative ways to go.
> >
> > We could just keep using it and fork it if need be.  Any idea why it was
> > discontinued?
> >
>
> This link [1] suggests that it hasn't been discontinued, it's just
> unmaintained, and isn't scheduled for removal. That doesn't solve the
> PyQt5 problem though... It's also worth noting that QtXml is very
> slow, which is noticeable on project load/save.
>
>
> Nyall
>
> [1] https://bugreports.qt-project.org/browse/QTBUG-32926
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/ee78c864/attachment.html>

From luca76 at gmail.com  Thu Dec  4 01:09:20 2014
From: luca76 at gmail.com (Luca Manganelli)
Date: Thu, 4 Dec 2014 10:09:20 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <CAB4g1=yGeQa-_LQgan8fFq3z=1LoNf+7gVw0NUE=KCnLvzMYNg@mail.gmail.com>
References: <547F286A.6010903@gmx.ch> <547F2B1E.5010909@sourcepole.ch>
	<547F3043.9080806@gmx.ch> <20141204082518.GA19006@norbit.de>
	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
	<CAB4g1=yGeQa-_LQgan8fFq3z=1LoNf+7gVw0NUE=KCnLvzMYNg@mail.gmail.com>
Message-ID: <CAMB2qw2qx2cziMEyudjRDQbf2TN06KvEUOqoCJo7fBTumcyrag@mail.gmail.com>

On Thu, Dec 4, 2014 at 10:04 AM, G. Allegri <giohappy at gmail.com> wrote:
> QtXml is really, damn slow. PyQt with QtXml is worst then lxml, just to make
> a comparison. Switching to a streamlined xml parser would be advisable, but
> I know it would a deep refactoring for a lot of QGIS's code.
> Maybe it should be considered within the next big refactorings (geometry,
> composer, etc.), but it won't be easy to find a sponsor specifically for
> this...

For a project at my organization, I used the standard python module
"XML.ElementTree" and it seems really good and fast. It's very easy to
read, modify, add elements...

From matthias.kuhn at gmx.ch  Thu Dec  4 01:11:36 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 04 Dec 2014 10:11:36 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <CAB4g1=yGeQa-_LQgan8fFq3z=1LoNf+7gVw0NUE=KCnLvzMYNg@mail.gmail.com>
References: <547F286A.6010903@gmx.ch>
	<547F2B1E.5010909@sourcepole.ch>	<547F3043.9080806@gmx.ch>
	<20141204082518.GA19006@norbit.de>	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
	<CAB4g1=yGeQa-_LQgan8fFq3z=1LoNf+7gVw0NUE=KCnLvzMYNg@mail.gmail.com>
Message-ID: <54802548.4050004@gmx.ch>

On 04.12.2014 10:04, G. Allegri wrote:
> QtXml is really, damn slow. PyQt with QtXml is worst then lxml, just to
> make a comparison. Switching to a streamlined xml parser would be
> advisable, but I know it would a deep refactoring for a lot of QGIS's code.
> Maybe it should be considered within the next big refactorings (geometry,
> composer, etc.), but it won't be easy to find a sponsor specifically for
> this...
>
Do we have a real-world example of where we hit this performance issue?

Considering a sponsor: it might be packaged in a proposal of a native
project file format that also supports storing layers. That requires an
abstraction of the project file and has a new feature that usually makes
it easier to find funds.

Matthias


From even.rouault at spatialys.com  Thu Dec  4 01:24:49 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Dec 2014 10:24:49 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <54802548.4050004@gmx.ch>
References: <547F286A.6010903@gmx.ch>
	<CAB4g1=yGeQa-_LQgan8fFq3z=1LoNf+7gVw0NUE=KCnLvzMYNg@mail.gmail.com>
	<54802548.4050004@gmx.ch>
Message-ID: <201412041024.49751.even.rouault@spatialys.com>

> Considering a sponsor: it might be packaged in a proposal of a native
> project file format that also supports storing layers. 

You could potentially consider using a GeoPackage container as a base for that 
:
- http://www.geopackage.org/spec/
- http://www.gdal.org/drv_geopackage.html

It would cover storing vector layers. The QGIS specific parts could be stored 
in extension tables.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From regis.haubourg at eau-adour-garonne.fr  Thu Dec  4 02:33:48 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 4 Dec 2014 02:33:48 -0800 (PST)
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <54802548.4050004@gmx.ch>
References: <547F286A.6010903@gmx.ch> <547F2B1E.5010909@sourcepole.ch>
	<547F3043.9080806@gmx.ch> <20141204082518.GA19006@norbit.de>
	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
	<CAB4g1=yGeQa-_LQgan8fFq3z=1LoNf+7gVw0NUE=KCnLvzMYNg@mail.gmail.com>
	<54802548.4050004@gmx.ch>
Message-ID: <1417689228776-5176425.post@n6.nabble.com>

Hi, 
agreed it's awfully slow on large project save (about 1 min sometimes for
about 200 layers)
+1 for refactoring qgs into a container able to store layers. That would
give us a storing solution for memory layers, discussed previously. 

Cheers
R?gis



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QtXml-is-no-longer-maintained-in-Qt5-tp5176248p5176425.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From etienne.trimaille at gmail.com  Thu Dec  4 03:11:58 2014
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Thu, 4 Dec 2014 12:11:58 +0100
Subject: [Qgis-developer] Cannot load python after compiling master
In-Reply-To: <547F64A9.1010001@mail.geometrics.com>
References: <547C12E0.3070803@carto.net>
	<CAL5Q673YVTZFx6d4g9muh3mw2cetdhSxE-aQiiav2hDR17T4ZA@mail.gmail.com>
	<547C4214.3040709@carto.net> <547CAF9F.5040004@mail.geometrics.com>
	<547F64A9.1010001@mail.geometrics.com>
Message-ID: <CAMtDFLKg9qP1CGcbu83+Dwj5-quZ3F=Etf_nP3WY60xK-Qvfbg@mail.gmail.com>

Hi,
I've nearly the same problem on master since this week-end (I believe) :

Couldn't load PyQGIS.
Python support will be disabled.


Traceback (most recent call last):
  File "", line 1, in
  File "/home/etienne/apps/share/qgis/python/qgis/__init__.py", line 36, in
    from qgis.core import QgsFeature, QgsGeometry
  File "/home/etienne/apps/share/qgis/python/qgis/core/__init__.py", line 2, in
    from qgis._core import *
ImportError: /home/etienne/apps/share/qgis/python/qgis/_core.so:
undefined symbol: _ZTV27QgsCoordinateTransformCache



2014-12-03 20:29 GMT+01:00 Mikhail Tchernychev <mikhailtchernychev at gmail.com
>:

>  Hi,
>
> I downloaded and compiled latest git snapshot.  However when I try to run
> qgis
> I am getting:
>
> ouldn't load PyQGIS.
> Python support will be disabled.
>
>
> Traceback (most recent call last):
>   File "", line 1, in
>   File "/home/misha/opt/qgis-dev/share/qgis/python/qgis/__init__.py", line 36, in
>     from qgis.core import QgsFeature, QgsGeometry
>   File "/home/misha/opt/qgis-dev/share/qgis/python/qgis/core/__init__.py", line 2, in
>     from qgis._core import *
> ImportError: /home/misha/opt/qgis-dev/share/qgis/python/qgis/_core.so: undefined symbol: _ZTI18QgsHeatmapRenderer
>
>
> Python version:
> 2.7.6 (default, Mar 22 2014, 23:03:14)
> [GCC 4.8.2]
>
> QGIS version:
> 2.7.0-Master 'Master', exported
>
> Python path:
> ['/home/misha/opt/qgis-dev/share/qgis/python',
> u'/home/misha/.qgis2/python', u'/home/misha/.qgis2/python/plugins',
> '/home/misha/opt/qgis-dev/share/qgis/python/plugins', '/usr/lib/python2.7',
> '/usr/lib/python2.7/plat-i386-linux-gnu', '/usr/lib/python2.7/lib-tk',
> '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload',
> '/usr/local/lib/python2.7/dist-packages',
> '/usr/lib/python2.7/dist-packages',
> '/usr/lib/python2.7/dist-packages/PILcompat',
> '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.7',
> '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
> '/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode']
>
> I suppose this should be very simple. Is some package missing?
>
> I have qgis installed from ubuntugis-nightly but it stopped working on Nov
> 20, and no new version
> yet available.
>
> This is for Ubuntu trusty 14.04
>
> Thank you
>
> Mikhail
>
>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/5730b283/attachment.html>

From marco.hugentobler at sourcepole.ch  Thu Dec  4 04:44:04 2014
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Thu, 04 Dec 2014 13:44:04 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
References: <547F286A.6010903@gmx.ch>
	<547F2B1E.5010909@sourcepole.ch>	<547F3043.9080806@gmx.ch>
	<20141204082518.GA19006@norbit.de>
	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
Message-ID: <54805714.9020107@sourcepole.ch>

>It's also worth noting that QtXml is very
>slow, which is noticeable on project load/save.


Is it really the xml parsing which is slow? I would have expected that 
xml parsing only is fast and the things QGIS is doing on project load 
are slow (e.g. restoring connections, creating print composers, ...). 
Did you do some profiling / testing related to xml parsing speed?

Regards,
Marco

On 04.12.2014 09:44, Nyall Dawson wrote:
> On 4 December 2014 at 19:25, J?rgen E. <jef at norbit.de> wrote:
>> Hi Matthias,
>>
>> On Wed, 03. Dec 2014 at 16:46:11 +0100, Matthias Kuhn wrote:
>>> I didn't look at it in detail and just based this recommendation on the
>>> one from the QtXml documentation linked at the end of the original message.
>>> Is there something in particular you think we will be missing? If so, it
>>> might be good to start looking for alternative ways to go.
>> We could just keep using it and fork it if need be.  Any idea why it was
>> discontinued?
>>
> This link [1] suggests that it hasn't been discontinued, it's just
> unmaintained, and isn't scheduled for removal. That doesn't solve the
> PyQt5 problem though... It's also worth noting that QtXml is very
> slow, which is noticeable on project load/save.
>
>
> Nyall
>
> [1] https://bugreports.qt-project.org/browse/QTBUG-32926
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From vincent.damoy at espaces-naturels.fr  Thu Dec  4 05:25:54 2014
From: vincent.damoy at espaces-naturels.fr (Vincent Damoy)
Date: Thu, 04 Dec 2014 14:25:54 +0100
Subject: [Qgis-developer] LoadFromTemplate method broken?
Message-ID: <548060E2.3020609@espaces-naturels.fr>

Hello Nyall,
Thank you for your answer.
I'm really ashamed : It was just a stupid path problem.
I had already tried to import new composers created with QGIS 2.6, but 
trying again put me on the path to the solution.
Thank you and really sorry for the noise.
Vincent

---------------------------

Vincent Damoy - Responsable SIG
Conservatoire d'espaces naturels du Nord et du Pas-de-Calais
152 bd de Paris - 62190 Lillers
T?l : 03.21.54.75.00 - Fax : 03.21.54.56.07
/*Pour adh?rer au Conservatoire :* 
www.cen-npdc.org/nous-rejoindre/adherent.html/


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/ce3a40e0/attachment.html>

From luca76 at gmail.com  Thu Dec  4 05:28:35 2014
From: luca76 at gmail.com (Luca Manganelli)
Date: Thu, 4 Dec 2014 14:28:35 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <54805714.9020107@sourcepole.ch>
References: <547F286A.6010903@gmx.ch> <547F2B1E.5010909@sourcepole.ch>
	<547F3043.9080806@gmx.ch> <20141204082518.GA19006@norbit.de>
	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
	<54805714.9020107@sourcepole.ch>
Message-ID: <CAMB2qw1HBVi8oDRMC25UEBCP_wHg5-QhqTHiROj0KbLfuYP4QQ@mail.gmail.com>

On Thu, Dec 4, 2014 at 1:44 PM, Marco Hugentobler
<marco.hugentobler at sourcepole.ch> wrote:
> Is it really the xml parsing which is slow? I would have expected that xml
> parsing only is fast and the things QGIS is doing on project load are slow
> (e.g. restoring connections, creating print composers, ...). Did you do some
> profiling / testing related to xml parsing speed?

I agree with Marco. The major slowdown here is when QGIS connects to
WMS/Postgis layers, not opening a simple XML file...

We could be very careful about false problems, as stated by Donald Knuth:

"We should forget about small efficiencies, say about 97% of the time:
premature optimization is the root of all evil"

From CABO at NIRAS.DK  Thu Dec  4 06:28:46 2014
From: CABO at NIRAS.DK (=?iso-8859-1?Q?Casper_B=F8rgesen_=28CABO=29?=)
Date: Thu, 4 Dec 2014 14:28:46 +0000
Subject: [Qgis-developer] QGIS Weekly
Message-ID: <BCF6B63AE0B25941A7F56567B58A28056B4F68EA@allkexa1.NIRAS.INT>

Hi.

I'm just wondering if the weekly release of QGIS for Windows has been stopped?

I haven't seen a new release since November 17.

Regards, Casper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/5ef75063/attachment.html>

From madmanwoo at gmail.com  Thu Dec  4 06:43:51 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Thu, 04 Dec 2014 14:43:51 +0000
Subject: [Qgis-developer] QGIS with Hy (Lisp with Python)
Message-ID: <CAAi8Yg8_bjRn2dwguydOMG5iTb+pNfd1B2ffnEykS1kmYcyCLQ@mail.gmail.com>

(aka LISP ALL THE THINGS)

Just posted something that I thought a few people might be interested in
http://nathanw.net/2014/12/04/using-hy-a-dialect-of-lisp-for-python-with-qgis/

- Nathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/8b4f0099/attachment-0001.html>

From bjorn.burr.nyberg at gmail.com  Thu Dec  4 07:12:07 2014
From: bjorn.burr.nyberg at gmail.com (Bjorn Nyberg)
Date: Thu, 4 Dec 2014 16:12:07 +0100
Subject: [Qgis-developer] Processing Tool Multiprocessing
Message-ID: <CALwGb1SOx8+ZRjEvV-ummxmfDRWg3DbOv6-+YeDiPEyvZOzNJQ@mail.gmail.com>

Hi,
I was wondering if the scripts built in the processing toolbox support the
use of the multiprocessing python module? I have a few standalone ArcGIS
scripts that use that module and therefore are quicker and would love to
see if I can implement them within QGIS.

Cheers,
Bjorn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/ca82a904/attachment.html>

From regis.haubourg at eau-adour-garonne.fr  Thu Dec  4 08:18:17 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 4 Dec 2014 08:18:17 -0800 (PST)
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <CAMB2qw1HBVi8oDRMC25UEBCP_wHg5-QhqTHiROj0KbLfuYP4QQ@mail.gmail.com>
References: <547F286A.6010903@gmx.ch> <547F2B1E.5010909@sourcepole.ch>
	<547F3043.9080806@gmx.ch> <20141204082518.GA19006@norbit.de>
	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>
	<54805714.9020107@sourcepole.ch>
	<CAMB2qw1HBVi8oDRMC25UEBCP_wHg5-QhqTHiROj0KbLfuYP4QQ@mail.gmail.com>
Message-ID: <1417709897391-5176498.post@n6.nabble.com>

Slowness is painfull also on project save, and I guess this is mainly the xml
issue there.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QtXml-is-no-longer-maintained-in-Qt5-tp5176248p5176498.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From misha at mail.geometrics.com  Thu Dec  4 08:49:52 2014
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Thu, 4 Dec 2014 08:49:52 -0800
Subject: [Qgis-developer] Cannot load python after compiling master
In-Reply-To: <CAMtDFLKg9qP1CGcbu83+Dwj5-quZ3F=Etf_nP3WY60xK-Qvfbg@mail.gmail.com>
References: <547C12E0.3070803@carto.net>	<CAL5Q673YVTZFx6d4g9muh3mw2cetdhSxE-aQiiav2hDR17T4ZA@mail.gmail.com>	<547C4214.3040709@carto.net>
	<547CAF9F.5040004@mail.geometrics.com>	<547F64A9.1010001@mail.geometrics.com>
	<CAMtDFLKg9qP1CGcbu83+Dwj5-quZ3F=Etf_nP3WY60xK-Qvfbg@mail.gmail.com>
Message-ID: <548090B0.3030207@mail.geometrics.com>

I was able to fix it by defining LD_LIBRARY_PATH to point to development 
libs.

like export LD_LIBRARY_PATH=/home/misha/opt/qgis-dev/lib

Aparently there qgis tries to load  libs from other places; in my case 
it is probably
because I have qgis installed from repository.


Mikhail



On 12/4/2014 3:11 AM, Etienne Trimaille wrote:
> Hi,
> I've nearly the same problem on master since this week-end (I believe) :
>
> Couldn't load PyQGIS.
> Python support will be disabled.
>
>
> Traceback (most recent call last):
>    File "", line 1, in
>    File "/home/etienne/apps/share/qgis/python/qgis/__init__.py", line 36, in
>      from qgis.core import QgsFeature, QgsGeometry
>    File "/home/etienne/apps/share/qgis/python/qgis/core/__init__.py", line 2, in
>      from qgis._core import *
> ImportError: /home/etienne/apps/share/qgis/python/qgis/_core.so: undefined symbol: _ZTV27QgsCoordinateTransformCache
>
>
> 2014-12-03 20:29 GMT+01:00 Mikhail Tchernychev 
> <mikhailtchernychev at gmail.com <mailto:mikhailtchernychev at gmail.com>>:
>
>     Hi,
>
>     I downloaded and compiled latest git snapshot.  However when I try
>     to run qgis
>     I am getting:
>
>     ouldn't load PyQGIS.
>     Python support will be disabled.
>
>
>     Traceback (most recent call last):
>        File "", line 1, in
>        File "/home/misha/opt/qgis-dev/share/qgis/python/qgis/__init__.py", line 36, in
>          from qgis.core import QgsFeature, QgsGeometry
>        File "/home/misha/opt/qgis-dev/share/qgis/python/qgis/core/__init__.py", line 2, in
>          from qgis._core import *
>     ImportError: /home/misha/opt/qgis-dev/share/qgis/python/qgis/_core.so: undefined symbol: _ZTI18QgsHeatmapRenderer
>
>     Python version:
>     2.7.6 (default, Mar 22 2014, 23:03:14)
>     [GCC 4.8.2]
>
>     QGIS version:
>     2.7.0-Master 'Master', exported
>
>     Python path:
>     ['/home/misha/opt/qgis-dev/share/qgis/python',
>     u'/home/misha/.qgis2/python',
>     u'/home/misha/.qgis2/python/plugins',
>     '/home/misha/opt/qgis-dev/share/qgis/python/plugins',
>     '/usr/lib/python2.7', '/usr/lib/python2.7/plat-i386-linux-gnu',
>     '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old',
>     '/usr/lib/python2.7/lib-dynload',
>     '/usr/local/lib/python2.7/dist-packages',
>     '/usr/lib/python2.7/dist-packages',
>     '/usr/lib/python2.7/dist-packages/PILcompat',
>     '/usr/lib/python2.7/dist-packages/gtk-2.0',
>     '/usr/lib/pymodules/python2.7',
>     '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
>     '/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode']
>
>
>     I suppose this should be very simple. Is some package missing?
>
>     I have qgis installed from ubuntugis-nightly but it stopped
>     working on Nov 20, and no new version
>     yet available.
>
>     This is for Ubuntu trusty 14.04
>
>     Thank you
>
>     Mikhail
>
>
>
>
>
>     _______________________________________________
>     Qgis-developer mailing list
>     Qgis-developer at lists.osgeo.org <mailto:Qgis-developer at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer




PLEASE NOTE: This message, including any attachments, may include privileged,
confidential and/or inside information. Any dissemination, distribution or copy
of this communication by   anyone other than the intended recipient is strictly
prohibited. If you are not the intended recipient, please notify the sender by
replying to this message and then delete it from your system. Information
provided via electronic media is not guaranteed against defects including
translation and transmission errors. The company accepts no liability for any
damage caused by any virus transmitted by this email.

Geometrics Inc. | 2190 Fortune Drive | San Jose, CA 95131 USA
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/fdb71423/attachment.html>

From strk at keybit.net  Thu Dec  4 10:42:34 2014
From: strk at keybit.net (Sandro Santilli)
Date: Thu, 4 Dec 2014 19:42:34 +0100
Subject: [Qgis-developer] Rotation support in raster renderer
Message-ID: <20141204184234.GA27300@localhost>

Hi all,
I've pushed a second step of support for rotation in raster renderer
but I'm missing something about the placement and scaling of it
as the raster gets bigger and offsetted when rotated.

Size is good at 0,90,180,270 but offset is still wrong in a way that's
probably due to only carring now meaningless "upper left" and "bottom right"
corners rather than a "center" (more useful for rotation).

Would it make more sense to move this rotation and translation earlier
in the rendering pipeline ? Can anyone point me to the right place for
it ? I'm guessing it must be somewhere around QgsRasterInterface
(the "block" method takes an extent and a size but not rotation).

The current code can be found here:
https://github.com/qgis/QGIS/pull/1716

Thanks in advance

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From tom.chadwin at nnpa.org.uk  Thu Dec  4 14:00:34 2014
From: tom.chadwin at nnpa.org.uk (Tom Chadwin)
Date: Thu, 4 Dec 2014 14:00:34 -0800 (PST)
Subject: [Qgis-developer] Retrieve field name used as label
In-Reply-To: <1417627956164-5176293.post@n6.nabble.com>
References: <1417627956164-5176293.post@n6.nabble.com>
Message-ID: <1417730434219-5176544.post@n6.nabble.com>

Can anyone help with this?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Retrieve-field-name-used-as-label-tp5176293p5176544.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From lby20102 at hotmail.com  Thu Dec  4 14:31:50 2014
From: lby20102 at hotmail.com (eliu1234)
Date: Thu, 4 Dec 2014 14:31:50 -0800 (PST)
Subject: [Qgis-developer] Handling event in overlap widget scenario in Qt
Message-ID: <1417732310741-5176549.post@n6.nabble.com>

Here is my problem:
    I am trying to develop a mobile application using Qt and QGIS. I am
trying to implement zoom action on qgsmapcanvas. Right now, I have a
qgsmapcanvas and a qwidget. I have developed the code for zoom action on the
qwidget. And I am considering to overlap the qgsmapcanvas and qwidget by
making one of them to be the parent of the other one. However, by doing
this, the qwidget is not able to receive any touch event anymore. Anyone has
an idea how to solve this problem?

Any help is appreciated.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Handling-event-in-overlap-widget-scenario-in-Qt-tp5176549.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From lrssvtml at gmail.com  Thu Dec  4 15:14:20 2014
From: lrssvtml at gmail.com (Salvatore Larosa)
Date: Fri, 5 Dec 2014 00:14:20 +0100
Subject: [Qgis-developer] Retrieve field name used as label
In-Reply-To: <1417730434219-5176544.post@n6.nabble.com>
References: <1417627956164-5176293.post@n6.nabble.com>
	<1417730434219-5176544.post@n6.nabble.com>
Message-ID: <CANxjxaqJ2MbDciATD5kSFtU48o_dWGasHhE4MGWNStTO6zrxTQ@mail.gmail.com>

Both should work:

QgsLabel(layer.pendingFields()).fields()[0].name()

layer.customProperty("labeling/fieldName")

Best Regards,
-SL

--
Sent from my mobile phone
Il 04/Dic/2014 23:00 "Tom Chadwin" <tom.chadwin at nnpa.org.uk> ha scritto:

> Can anyone help with this?
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Retrieve-field-name-used-as-label-tp5176293p5176544.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141205/f77dd5fb/attachment.html>

From tom.chadwin at nnpa.org.uk  Thu Dec  4 15:27:09 2014
From: tom.chadwin at nnpa.org.uk (Tom Chadwin)
Date: Thu, 4 Dec 2014 15:27:09 -0800 (PST)
Subject: [Qgis-developer] Retrieve field name used as label
In-Reply-To: <CANxjxaqJ2MbDciATD5kSFtU48o_dWGasHhE4MGWNStTO6zrxTQ@mail.gmail.com>
References: <1417627956164-5176293.post@n6.nabble.com>
	<1417730434219-5176544.post@n6.nabble.com>
	<CANxjxaqJ2MbDciATD5kSFtU48o_dWGasHhE4MGWNStTO6zrxTQ@mail.gmail.com>
Message-ID: <1417735629024-5176555.post@n6.nabble.com>

> QgsLabel(layer.pendingFields()).fields()[0].name()

That doesn't work - it gives the field at position 0, not the labelling
field.

> layer.customProperty("labeling/fieldName")

But this does work perfectly. Thank you so much.

Tom



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Retrieve-field-name-used-as-label-tp5176293p5176555.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From madmanwoo at gmail.com  Thu Dec  4 15:30:09 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Thu, 04 Dec 2014 23:30:09 +0000
Subject: [Qgis-developer] Retrieve field name used as label
References: <1417627956164-5176293.post@n6.nabble.com>
	<1417730434219-5176544.post@n6.nabble.com>
	<CANxjxaqJ2MbDciATD5kSFtU48o_dWGasHhE4MGWNStTO6zrxTQ@mail.gmail.com>
	<1417735629024-5176555.post@n6.nabble.com>
Message-ID: <CAAi8Yg9hL_mQjVw4ccsf14jnHvMLb0ud52n-MNA+xojfM4mmrA@mail.gmail.com>

Don't use QgsLabel it is the old label engine and will be removed in the
future.

- Nathan
On Fri Dec 05 2014 at 9:27:14 AM Tom Chadwin <tom.chadwin at nnpa.org.uk>
wrote:

> > QgsLabel(layer.pendingFields()).fields()[0].name()
>
> That doesn't work - it gives the field at position 0, not the labelling
> field.
>
> > layer.customProperty("labeling/fieldName")
>
> But this does work perfectly. Thank you so much.
>
> Tom
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.
> nabble.com/Retrieve-field-name-used-as-label-tp5176293p5176555.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141204/408094fa/attachment.html>

From tom.chadwin at nnpa.org.uk  Thu Dec  4 15:36:15 2014
From: tom.chadwin at nnpa.org.uk (Tom Chadwin)
Date: Thu, 4 Dec 2014 15:36:15 -0800 (PST)
Subject: [Qgis-developer] Retrieve field name used as label
In-Reply-To: <CAAi8Yg9hL_mQjVw4ccsf14jnHvMLb0ud52n-MNA+xojfM4mmrA@mail.gmail.com>
References: <1417627956164-5176293.post@n6.nabble.com>
	<1417730434219-5176544.post@n6.nabble.com>
	<CANxjxaqJ2MbDciATD5kSFtU48o_dWGasHhE4MGWNStTO6zrxTQ@mail.gmail.com>
	<1417735629024-5176555.post@n6.nabble.com>
	<CAAi8Yg9hL_mQjVw4ccsf14jnHvMLb0ud52n-MNA+xojfM4mmrA@mail.gmail.com>
Message-ID: <1417736175859-5176558.post@n6.nabble.com>

Noted. Thanks, Nathan.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Retrieve-field-name-used-as-label-tp5176293p5176558.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From lby20102 at hotmail.com  Thu Dec  4 16:48:55 2014
From: lby20102 at hotmail.com (eliu1234)
Date: Thu, 4 Dec 2014 16:48:55 -0800 (PST)
Subject: [Qgis-developer] Is there a python version of qTuio?
Message-ID: <1417740535299-5176563.post@n6.nabble.com>

Is there a python version of qTuio? qTuio is implemented in C++. However, I
am currently trying to use pyqgis due to problems with C++ environment (I
cannot even create a raster layer).

Any help is appreciated.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Is-there-a-python-version-of-qTuio-tp5176563.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From matthias.kuhn at gmx.ch  Fri Dec  5 01:55:34 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Fri, 05 Dec 2014 10:55:34 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <547F286A.6010903@gmx.ch>
References: <547F286A.6010903@gmx.ch>
Message-ID: <54818116.3040007@gmx.ch>

Hi all,

I'm happy to inform you that Phil (main PyQt maintainer) just announced
that QtXml is going to be reincluded in the PyQt5 bindings.
You may therefore happily continue to use QDomDocument and friends as
much as you like and ignore my original request.

Sorry for the noise
Matthias


On 12/03/2014 04:12 PM, Matthias Kuhn wrote:
> Hi,
>
> As of Qt5, QtXml is no longer actively maintained [1]
> PyQt5 does not even support it.
>
> It will be a reasonably big undertaking to migrate any occurrence of
> QDomDocument etc. to QXMLStreamWriter and QXMLStreamReader (our whole
> project saving and loading engine is based on this). And when we do this
> we will likely have to increase the major version number of QGIS.
>
> In order not to introduce more work, please consider using
> QXMLStreamWriter and QXMLStreamReader for new code you write that
> involves parsing or producing XML. That does not concern working on code
> that is based on code that is currently based on QtXml methods.
>
> Thank you,
> Matthias
>
> [1] http://qt-project.org/doc/qt-5/qtxml-module.html#details
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From matthias.kuhn at gmx.ch  Fri Dec  5 02:03:36 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Fri, 05 Dec 2014 11:03:36 +0100
Subject: [Qgis-developer] QtXml is no longer maintained in Qt5
In-Reply-To: <1417709897391-5176498.post@n6.nabble.com>
References: <547F286A.6010903@gmx.ch>
	<547F2B1E.5010909@sourcepole.ch>	<547F3043.9080806@gmx.ch>
	<20141204082518.GA19006@norbit.de>	<CAB28AsiX=t6Y6t0piTd3hEwnsxZBHfuPhWndDvV1deRHHgr-Tg@mail.gmail.com>	<54805714.9020107@sourcepole.ch>	<CAMB2qw1HBVi8oDRMC25UEBCP_wHg5-QhqTHiROj0KbLfuYP4QQ@mail.gmail.com>
	<1417709897391-5176498.post@n6.nabble.com>
Message-ID: <548182F8.4000104@gmx.ch>

Hi R?gis,

On 12/04/2014 05:18 PM, R?gis Haubourg wrote:
> Slowness is painfull also on project save, and I guess this is mainly the xml
> issue there.
>
>
I'm with Marco there. On project save there is also a lot of code
involved apart from XML and to attribute performance responsibility we
need good evidence first.

If there is a performance issue that you would like to tackle, I would
start with profiling this process and only after decide where the best
benefit can be achieved.

Matthias

From Stefan.Ziegler at bd.so.ch  Fri Dec  5 06:04:31 2014
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Fri, 5 Dec 2014 14:04:31 +0000
Subject: [Qgis-developer] Load zipped shapefiles with python
In-Reply-To: <547838DF.3040309@duif.net>
References: <96EAE7D042AAC14486D68EC70207B0C14AA87F5D@srsofaioi16255.verw.rootso.org>
	<547838DF.3040309@duif.net>
Message-ID: <96EAE7D042AAC14486D68EC70207B0C14AA8E4B3@srsofaioi16255.verw.rootso.org>

Thanks Richard. It was the missing second slash.

If you drag n drop a zipped shapefile into the map canvas a selection dialog appears with all the layers inside the zip file. Is this behaviour also possible out-of-the-box with python?

Regards
Stefan 

> -----Urspr?ngliche Nachricht-----
> Von: Richard Duivenvoorde [mailto:rdmailings at duif.net]
> Gesendet: Freitag, 28. November 2014 09:57
> An: Ziegler Stefan; 'qgis-developer at lists.osgeo.org'
> Betreff: Re: [Qgis-developer] Load zipped shapefiles with python
> 
> On 27-11-14 13:08, Ziegler Stefan wrote:
> > Hi
> >
> > Is it possible to load zipped shapefiles with python? I have some zip files with several
> shapefiles in it. I tried something like this:
> >
> > vlayer = QgsVectorLayer("/vsizip/home/stefan/Downloads/2546.zip/lfp3.shp", LFP3,
> "ogr")
> >
> > But the layer is not valid.
> 
> Hi Stefan,
> 
> maybe you already figured out?
> 
> qgis.utils.iface.addVectorLayer("/vsizip//data/disk/home/richard/geodata/nl/autowegen.
> zip",
> "wegen", "ogr")
> 
> loads a layer to me. Note though that you get the 'crs' popup in between.
> 
> vlayer =
> QgsVectorLayer("/vsizip//data/disk/home/richard/geodata/nl/autowegen.zip",
> "wegen", "ogr")
> 
> also works.
> 
> Note:
> - /vsizip//   <= double /
> - "ogr"  <= no capitals
> (second argument is a string)
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> 


From soerengebbert at googlemail.com  Fri Dec  5 09:57:16 2014
From: soerengebbert at googlemail.com (=?UTF-8?Q?S=C3=B6ren_Gebbert?=)
Date: Fri, 5 Dec 2014 18:57:16 +0100
Subject: [Qgis-developer] Map swipe tool in QGIS
In-Reply-To: <CAAi8Yg8reQp2GwXSmfXsVg6vt66iyqn0goMkZHeVs2hkXT-kDg@mail.gmail.com>
References: <CAPHDRe+BJU++8BPmrtMDd7kY5jQ=iXTucRRD5cKNYmWR7Ghfeg@mail.gmail.com>
	<09720500159380c4cecf0e96926b488b@mx1.faunalia.it>
	<CAAi8Yg8+++cNjKN7T4aWyhXydy+Q6U+s9WGgBsOmxp37hcG4uA@mail.gmail.com>
	<CAPHDReLU3-7tZTWD5ZCth8hOJUA1JEszTx0PrZOLNUpZKEAsNg@mail.gmail.com>
	<CAAi8Yg_-gCasfwKRgZTKEy1BPjyEBUYUjLeh8oDPPMCBanPoFA@mail.gmail.com>
	<CAPHDRe+oXdMvb2pBLWN=E+fihnfwcTA+++182XjTk5K95PYTpg@mail.gmail.com>
	<CAAi8Yg8reQp2GwXSmfXsVg6vt66iyqn0goMkZHeVs2hkXT-kDg@mail.gmail.com>
Message-ID: <CAPHDReKuw24vSiUsNeqx0ct2R33Du3RpbL-7De1KJj+JtBn10Q@mail.gmail.com>

Dear Nathan,
thank you very much for the link. I have started playing around a bit
with your code. In general it works fine. I removed the cause of an
exception by simply adding:

job.waitForFinished()

in updatebackmap(), since sometimes the job object was not valid in
the updatemap() function.

I have a question regarding the background color of the map overlay
(othermap). I tried to set the background to transparent, but my
attempt failed using this code:

alpha = QColor(255,255,255,0)
settings.setBackgroundColor(alpha)

So my question is:

Is my approach wrong or is transparency not support by QgsMapSettings?

I have attached you code including my tiny changes.

Best regards
Soeren

2014-10-06 15:03 GMT+02:00 Nathan Woodrow <madmanwoo at gmail.com>:
> Hey Soeren,
>
> The code that I was playing with is here.
> https://gist.github.com/NathanW2/dc1b665cbce627ce0350#file-sipe-py
>
> hopefully I will find some time soon to build the plugin correctly.
>
> - Nathan
>
> On Sun, Oct 5, 2014 at 8:37 PM, S?ren Gebbert <soerengebbert at googlemail.com>
> wrote:
>>
>> Dear Nathan,
>> have you found some time to work on the map swipe QGIS plugin?
>> I would be happy to help developing the plugin or testing it, if you like?
>> Do you have a public source code repository, so that i can start to
>> study your code?
>>
>>
>> Best regards
>> Soeren
>>
>> 2014-07-31 11:28 GMT+02:00 Nathan Woodrow <madmanwoo at gmail.com>:
>> > Hey Soeren,
>> >
>> > Nothing yet.  I might have some time next week for the plugin.
>> >
>> > - Nathan
>> >
>> >
>> > On Thu, Jul 31, 2014 at 7:26 PM, S?ren Gebbert
>> > <soerengebbert at googlemail.com> wrote:
>> >>
>> >> Hi Nathan,
>> >> that is exactly what i am looking for. Do you have any release date or
>> >> is the plugin already available?
>> >>
>> >> Many thanks and best regards
>> >> Soeren
>> >>
>> >> 2014-07-31 10:37 GMT+02:00 Nathan Woodrow <madmanwoo at gmail.com>:
>> >> > No something like this
>> >> >
>> >> > https://twitter.com/madmanwoo/status/478866023345426433
>> >> >
>> >> > On Jul 31, 2014 6:32 PM, "Paolo Cavallini" <cavallini at faunalia.it>
>> >> > wrote:
>> >> >>
>> >> >> On 2014-07-31 10:16, S?ren Gebbert wrote:
>> >> >>>
>> >> >>> Dear list,
>> >> >>> i would like to know if it is possible to implement a plugin in
>> >> >>> QGIS
>> >> >>> to overlay two map layer for interactive comparison, like the Map
>> >> >>> Swipe tool in GRASS GIS[1,2].
>> >> >>>
>> >> >>> If it is possible, what would be the best approach to implement it?
>> >> >>
>> >> >>
>> >> >> Hi.
>> >> >> You mean this?
>> >> >> http://plugins.qgis.org/plugins/DockableMirrorMap/
>> >> >> All the best.
>> >> >> --
>> >> >> Paolo Cavallini - Faunalia
>> >> >> www.faunalia.eu
>> >> >> Full contact details at www.faunalia.eu/pc
>> >> >> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>> >> >> _______________________________________________
>> >> >> Qgis-developer mailing list
>> >> >> Qgis-developer at lists.osgeo.org
>> >> >> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> >
>> >> >
>> >> > _______________________________________________
>> >> > Qgis-developer mailing list
>> >> > Qgis-developer at lists.osgeo.org
>> >> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >
>> >
>
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sipe.py
Type: text/x-python
Size: 2192 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141205/72b25d1a/attachment-0001.py>

From strk at keybit.net  Sun Dec  7 02:39:36 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sun, 7 Dec 2014 11:39:36 +0100
Subject: [Qgis-developer] How to debug failing python tests ?
Message-ID: <20141207103936.GA23586@localhost>

I'm trying to understand why PAL labelling tests fail on my machine
and for the nightlies but succeed on travis.

But if I run:

  /usr/bin/python tests/src/python/test_qgspallabeling_composer.py

All I get as a report are messages like this:

  ======================================================================
  FAIL: test_background_rect (__main__.TestComposerPdfPoint)
  ----------------------------------------------------------------------
  Traceback (most recent call last):
    File "tests/src/python/test_qgspallabeling_tests.py", line 77, in test_background_rect
      self.checkTest()
    File "tests/src/python/test_qgspallabeling_composer.py", line 305, in checkTest
      imgpath=self._TestImage))
  AssertionError:
  Render check failed for "sp_pdf_background_rect"

The message doesn't tell me the paths to the expected and obtained image
nor the used tolerance to compare the two. Is there a commandline switch
that I'm missing to get that info ?

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Sun Dec  7 05:22:43 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sun, 7 Dec 2014 14:22:43 +0100
Subject: [Qgis-developer] Duplicated expected images for pal tests
Message-ID: <20141207132243.GA12974@localhost>

It seems to me that the expected output images for PAL rendering
are duplicated, being present once for the "canvas" test and once
for the "composer" test. Example:


$ cd tests/testdata/control_images/
$ diff \
expected_pal_canvas/sp_background_rect/precise/sp_background_rect.png \
expected_pal_composer/sp_img_background_rect/precise/sp_img_background_rect.png

No difference there.

Would it make sense to use a symlink between the two directories,
to reduce size of working copies and maintainance cost ?

I noticed as I had to update the same images twice already:
https://github.com/strk/QGIS/commit/ec8dfd36572d445f9a11f27629c45494e82674be
https://github.com/strk/QGIS/commit/69e90f5b531cbaf5a4902a3b2654674cb8773f86

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Sun Dec  7 08:05:55 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sun, 7 Dec 2014 17:05:55 +0100
Subject: [Qgis-developer] Map rotation landed in master
Message-ID: <20141207160555.GB11017@localhost>

This mail to notify that the core map rotation support is now in master.

What changed in the outermost API (in order of exposition, I think):

  - The QgsMapCanvas class got new methods:

    double rotation() const;
    void setRotation( double degrees );
    QgsPoint center() const;
    void setCenter( const QgsPoint& center );

  - The QgsMapSetting class got new methods:

    double rotation() const;
    void setRotation( double degrees );

  - The QgsMapToPixel class got new methods:

    void setMapRotation( double degrees, double cx, double cy );
    double mapRotation() const;

Support in the renderers for vector and raster layers is included,
as well as a spinbox widget to set and see rotation from the GUI.

Not all parts of QGIS play nicely with rotation yet, but hopefully
this will be a good basis to continue development toward full support.

In particular, label placement is not fully rotation aware.
Horizontal labels are still horizontal, no matter map rotation, but
"parallel" ones are parallel to the original (not rotated) lines instead.
Placement of labels is also weird when rotation is present.

Also grid and north arrow are not respecting rotation, and the zoom-by-rect
rubberband (the zoom window) looks funny when the map is rotated.

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From larrys at dakotacarto.com  Sun Dec  7 18:37:18 2014
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Sun, 7 Dec 2014 19:37:18 -0700
Subject: [Qgis-developer] Duplicated expected images for pal tests
In-Reply-To: <20141207132243.GA12974@localhost>
References: <20141207132243.GA12974@localhost>
Message-ID: <CA+nQOR_BGX-bOWGXr8vtA2voewqm1pHSRb_AXpkbQLAEzmz4eg@mail.gmail.com>

Hi Sandro,

On Sun, Dec 7, 2014 at 6:22 AM, Sandro Santilli <strk at keybit.net> wrote:

> It seems to me that the expected output images for PAL rendering
> are duplicated, being present once for the "canvas" test and once
> for the "composer" test. Example:
>
>
> $ cd tests/testdata/control_images/
> $ diff \
> expected_pal_canvas/sp_background_rect/precise/sp_background_rect.png \
>
> expected_pal_composer/sp_img_background_rect/precise/sp_img_background_rect.png
>
> No difference there.
>

Those are not duplicate images. One is a control image for testing output
from canvas->image and the other when exporting from composer->image, which
are completely different processes. The fact that they are ostensibly
identical is a good thing.  :-)


> Would it make sense to use a symlink between the two directories,
> to reduce size of working copies and maintainance cost ?
>

When the tests incorporate other platforms, you may not see 'duplicates'
due to differences in font rendering. In fact, there are even tests to
compare those two images against each other; so, please do not symlink
anything (if only for the fact that symlinks are unsupported on Windows).

You can read about how I designed the tests here:
https://github.com/qgis/QGIS/tree/master/tests/testdata/labeling

Currently, there are very few base labeling tests, but am looking to
increase those to have considerably more coverage.

Regards,

Larry Shaffer
Dakota Cartography
Black Hills, South Dakota



>
> I noticed as I had to update the same images twice already:
>
> https://github.com/strk/QGIS/commit/ec8dfd36572d445f9a11f27629c45494e82674be
>
> https://github.com/strk/QGIS/commit/69e90f5b531cbaf5a4902a3b2654674cb8773f86
>
> --strk;
>
>  ()  ASCII ribbon campaign  --  Keep it simple !
>  /\  http://strk.keybit.net/rants/ascii_mails.txt
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141207/2ae19795/attachment.html>

From larrys at dakotacarto.com  Sun Dec  7 18:55:55 2014
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Sun, 7 Dec 2014 19:55:55 -0700
Subject: [Qgis-developer] How to debug failing python tests ?
In-Reply-To: <20141207103936.GA23586@localhost>
References: <20141207103936.GA23586@localhost>
Message-ID: <CA+nQOR9OAksLASZtJwjgRoX=ShGWbZh26P10thGbSJ45OsVVYQ@mail.gmail.com>

Hi Sandro,

On Sun, Dec 7, 2014 at 3:39 AM, Sandro Santilli <strk at keybit.net> wrote:

> I'm trying to understand why PAL labelling tests fail on my machine
> and for the nightlies but succeed on travis.
>
> But if I run:
>
>   /usr/bin/python tests/src/python/test_qgspallabeling_composer.py
>
> All I get as a report are messages like this:
>
>   ======================================================================
>   FAIL: test_background_rect (__main__.TestComposerPdfPoint)
>   ----------------------------------------------------------------------
>   Traceback (most recent call last):
>     File "tests/src/python/test_qgspallabeling_tests.py", line 77, in
> test_background_rect
>       self.checkTest()
>     File "tests/src/python/test_qgspallabeling_composer.py", line 305, in
> checkTest
>       imgpath=self._TestImage))
>   AssertionError:
>   Render check failed for "sp_pdf_background_rect"
>
> The message doesn't tell me the paths to the expected and obtained image
> nor the used tolerance to compare the two. Is there a commandline switch
> that I'm missing to get that info ?
>

I have added several environment variable controls for getting data out of
the labeling engine tests.

See: https://github.com/qgis/QGIS/tree/master/tests/testdata/labeling

You will want to turn on PAL_VERBOSE, PAL_REPORT, and PAL_SUITE, then edit
test_qgspallabeling_tests.py or other test_qgspallabeling_*.py files to
have full control over which test are run (if needed). Just remember not to
push upstream any session/debugging edits you have made to the
test_qgspallabeling_*.py files.

Specifically, PAL_REPORT will generate an HTML report, similar to that
which is uploaded to CDash, for all failed tests. You can use those images
from the report for any acceptable control image anomalies, if needed.

Regards,

Larry Shaffer
Dakota Cartography
Black Hills, South Dakota



>
> --strk;
>
>  ()  ASCII ribbon campaign  --  Keep it simple !
>  /\  http://strk.keybit.net/rants/ascii_mails.txt
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141207/94060625/attachment.html>

From wonder.sk at gmail.com  Sun Dec  7 20:31:23 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 8 Dec 2014 11:31:23 +0700
Subject: [Qgis-developer] Test coverage reports
In-Reply-To: <CAB28Asj_zMohe2SmvEWfmgWwK-2tKBPzifo2WSFGzMwYw4iyPg@mail.gmail.com>
References: <CAB28Asj_zMohe2SmvEWfmgWwK-2tKBPzifo2WSFGzMwYw4iyPg@mail.gmail.com>
Message-ID: <CAC2XbFeK6+UrjhcYvGdQ4_=uDEkTg3NCXFeVot45793DEN3KDg@mail.gmail.com>

Hi Nyall

On Wed, Dec 3, 2014 at 5:18 AM, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> Hi all,
>
> I've sent through a pull request [1] which allows for generation of
> unit test coverage reports via lcov.
>
> A sample output from this process is available at
> http://nyalldawson.net/qgis/coverage/

Great stuff! Thanks for adding the coverage report.

It seems like there are various classes which seem to be tested, but
they are just used by other higher level tests (e.g. rendering of
vector layers).

Now I'm looking forward to see the percentage rising :-)

Cheers
Martin

From wonder.sk at gmail.com  Sun Dec  7 20:51:15 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 8 Dec 2014 11:51:15 +0700
Subject: [Qgis-developer] Saving map config,
	or the meaning of extent (again)
In-Reply-To: <20141202161522.GB9221@localhost>
References: <20141202161522.GB9221@localhost>
Message-ID: <CAC2XbFfQYL7t575FURcH_oEnDnEGpyaGg20JgRjFuMgSX54qNQ@mail.gmail.com>

Hi Sandro

On Tue, Dec 2, 2014 at 11:15 PM, Sandro Santilli <strk at keybit.net> wrote:
>
> I'm still thinking that the triplet center,scale,rotation would be the
> simplest to retain. The problem with that is that keeping the scale
> might result in a different area being exposed depending on the
> output size. On the other hand keeping the extent would result in
> a different scale being used depending on output size.

Keeping just center+scale+rotation in QgsMapSettings seems like a
cleaner solution. Having to worry about various kinds of extent with
rotation in place will wear out our brains ("requested" extent,
"visible" extent, rotated "visible" extent). With your proposed
triplet we could at least get rid of the "requested" extent. (I still
find it a bit difficult to explain why both requested / visible extent
are needed - which is not a good sign!)


> What's more worth saving: scale of visible area ?

IMHO it does not really matter much.

One issue I could see by saving center+scale instead of extent is that
e.g. if you load a project with map extent to the whole project, in
differently shaped QGIS window some bits of data may be slightly
outside of the view. But even for this case the canvas could store its
original


Regards
Martin

From wonder.sk at gmail.com  Sun Dec  7 21:35:30 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 8 Dec 2014 12:35:30 +0700
Subject: [Qgis-developer] Saving a project using QGIS (Python) API loses
 mapcanvas and other XML nodes
In-Reply-To: <62DE033FEF5A8740AD4021902F26D3522DBFB3FC@ICTSC-W-S202.soliscom.uu.nl>
References: <62DE033FEF5A8740AD4021902F26D3522DBFB3FC@ICTSC-W-S202.soliscom.uu.nl>
Message-ID: <CAC2XbFdu27Sj25pxNc9Sui_sRB8FeXEPHMcYt+REFfH9KVCk6g@mail.gmail.com>

Hi

On Mon, Dec 1, 2014 at 8:10 PM, Alberti, K. (Koko) <K.Alberti at uu.nl> wrote:
> Hi qgis-dev,
>
> Apologies for the crosspost (on GIS stackexchange [1]), but I'm hoping this is a more appropriate audience for my question. I'm trying to open, manipulate, and save a QGIS project file using a standalone python script. However, upon saving the project, the output file is missing the <mapcanvas> and <legend> XML nodes. Does anyone know why this happens and if it is the expected behaviour or that something else is going on? When these nodes are missing and the project is then served via QGIS server the GetProjectSettings request breaks.

Yes this is indeed expected behavior (although not necessarily very
nice). In QGIS application environment there are various components
that are connected to readProject() and writeProject() signals from
QgsProject and they read/write their own configuration - map canvas is
one of them.

Regards
Martin

From madmanwoo at gmail.com  Sun Dec  7 22:26:44 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Mon, 08 Dec 2014 06:26:44 +0000
Subject: [Qgis-developer] Saving map config,
	or the meaning of extent (again)
References: <20141202161522.GB9221@localhost>
	<CAC2XbFfQYL7t575FURcH_oEnDnEGpyaGg20JgRjFuMgSX54qNQ@mail.gmail.com>
Message-ID: <CAAi8Yg91=7iijPhRDf73Lf8emfZROWhVQDf-ad9LcufR7mG5pA@mail.gmail.com>

> Keeping just center+scale+rotation in QgsMapSettings seems like a
cleaner solution.

Is it still possible to have the ability to set extents?  There are use
cases for setting it vs trying to work out the scale and center.

- Nathan

On Mon Dec 08 2014 at 2:51:21 PM Martin Dobias <wonder.sk at gmail.com> wrote:

> Hi Sandro
>
> On Tue, Dec 2, 2014 at 11:15 PM, Sandro Santilli <strk at keybit.net> wrote:
> >
> > I'm still thinking that the triplet center,scale,rotation would be the
> > simplest to retain. The problem with that is that keeping the scale
> > might result in a different area being exposed depending on the
> > output size. On the other hand keeping the extent would result in
> > a different scale being used depending on output size.
>
> Keeping just center+scale+rotation in QgsMapSettings seems like a
> cleaner solution. Having to worry about various kinds of extent with
> rotation in place will wear out our brains ("requested" extent,
> "visible" extent, rotated "visible" extent). With your proposed
> triplet we could at least get rid of the "requested" extent. (I still
> find it a bit difficult to explain why both requested / visible extent
> are needed - which is not a good sign!)
>
>
> > What's more worth saving: scale of visible area ?
>
> IMHO it does not really matter much.
>
> One issue I could see by saving center+scale instead of extent is that
> e.g. if you load a project with map extent to the whole project, in
> differently shaped QGIS window some bits of data may be slightly
> outside of the view. But even for this case the canvas could store its
> original
>
>
> Regards
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141208/e568f389/attachment-0001.html>

From wonder.sk at gmail.com  Sun Dec  7 22:42:05 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 8 Dec 2014 13:42:05 +0700
Subject: [Qgis-developer] Saving map config,
	or the meaning of extent (again)
In-Reply-To: <CAAi8Yg91=7iijPhRDf73Lf8emfZROWhVQDf-ad9LcufR7mG5pA@mail.gmail.com>
References: <20141202161522.GB9221@localhost>
	<CAC2XbFfQYL7t575FURcH_oEnDnEGpyaGg20JgRjFuMgSX54qNQ@mail.gmail.com>
	<CAAi8Yg91=7iijPhRDf73Lf8emfZROWhVQDf-ad9LcufR7mG5pA@mail.gmail.com>
Message-ID: <CAC2XbFdg7E3ZMTT5F9ksoyijsFPdXhJiSP+XY9MrTeqLAZu-Ww@mail.gmail.com>

On Mon, Dec 8, 2014 at 1:26 PM, Nathan Woodrow <madmanwoo at gmail.com> wrote:
>> Keeping just center+scale+rotation in QgsMapSettings seems like a
> cleaner solution.
>
> Is it still possible to have the ability to set extents?  There are use
> cases for setting it vs trying to work out the scale and center.

Yeah it would be still possible to set/get extents - this is just
about which pieces of information would be canonical and which would
be derived. Currently the center and map-units-per-pixel are derived
from the extent and image size, the idea is to have that reversed:
extent to be derived from center, map-units-per-pixel and image size.

Cheers
Martin

From rdmailings at duif.net  Mon Dec  8 00:10:26 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 08 Dec 2014 09:10:26 +0100
Subject: [Qgis-developer] Saving map config,
 or the meaning of extent (again)
In-Reply-To: <CAC2XbFfQYL7t575FURcH_oEnDnEGpyaGg20JgRjFuMgSX54qNQ@mail.gmail.com>
References: <20141202161522.GB9221@localhost>
	<CAC2XbFfQYL7t575FURcH_oEnDnEGpyaGg20JgRjFuMgSX54qNQ@mail.gmail.com>
Message-ID: <54855CF2.2030708@duif.net>

On 08-12-14 05:51, Martin Dobias wrote:
>> What's more worth saving: scale of visible area ?
> IMHO it does not really matter much.
> 
> One issue I could see by saving center+scale instead of extent is that
> e.g. if you load a project with map extent to the whole project, in
> differently shaped QGIS window some bits of data may be slightly
> outside of the view. But even for this case the canvas could store its
> original

I think this is a classical case for computer aided gis software :-)
Sometimes as a user you want to keep your area of interest exact when
you go from one size to another size of 'view', but (I think) most of
the times it is more intuitive to have the scale fixed (personal opinion).

There will allways be two camps in this, and several use-cases for both.
I think you draw the right conclusion that as soon as you start
rotating, the extent is not sufficient anymore and it is better to keep
scale+center to set your 'area of interest'.
As long as you can go from one to another (via a nice function), I'm in
favour of the center/scale option now.

Thanks for all the effort you put in this and rotation by the way.

Regards,

Richard Duivenvoorde

From arnaud.morvan at camptocamp.com  Mon Dec  8 05:21:24 2014
From: arnaud.morvan at camptocamp.com (Arnaud Morvan)
Date: Mon, 08 Dec 2014 14:21:24 +0100
Subject: [Qgis-developer] Add all geometry predicates in "XXX by location"
	processing algorithms
Message-ID: <5485A5D4.50906@camptocamp.com>


We want to make a pull request on this processing geoalgorithms:
"Select by location", "Extract by location" and "Join by location".

In "Select by location", we have actually three boolean parameters :
- Include input features that touch the selection features
- Include input features that overlap/cross the selection features
- Include input features completely within the selection features
treated in an boolean "or" combination.

Effective treatment depends on type of geometries :
   If layer to select from is a point layer : result = A.intersects(B)
   If one the two layers is a line layer : overlap/cross <=> A.crosses(B)
                                                   else : overlap/cross 
<=> A.overlap(B)

We want to propose all standard predicates to the user :
contains, crosses, disjoins, equals, intersects, overlaps, touches, within

Apparently we could not disable some parameter checkboxes based on 
geometry types without overiding the default generated dialog.

Note : For the disjoins predicate, we have to skip the spatial index filter.

Does anybody have some remarks/objections on this.

Arnaud


From lfi at ign.ku.dk  Mon Dec  8 06:39:34 2014
From: lfi at ign.ku.dk (Lene Fischer)
Date: Mon, 8 Dec 2014 14:39:34 +0000
Subject: [Qgis-developer] Huge TIFF files - problem
Message-ID: <38497AD9CA059C42AA3451EFEFF0378E9DCA5D97@P1KITMBX03WC02.unicph.domain>

Hi,
I have got a problem with TIFF files.
Today I was performing a rastercalculation ? two smaller files was suddenly 122 GB ? and my computer ran out of free space.
And this afternoon my students georeferenced a jpg, and ended up with 24 GB map.

What am I doing wrong?

Regards
Lene Fischer


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141208/fd48532a/attachment.html>

From sfkeller at gmail.com  Mon Dec  8 14:09:28 2014
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon, 8 Dec 2014 23:09:28 +0100
Subject: [Qgis-developer] Geopackage missing in "Vectorlayer save as...":
	Why?
Message-ID: <CAFcOn29GsOfMW_rBevw87AqsH+N1OD3V1-obahRtGADwP_cxpQ@mail.gmail.com>

Hi,

QGIS can read Geopackage (GPKG) with "Add Vectorlayer..." dialogue but
not save - although OGR supports this. Why is it missing in
"Vectorlayer save as..."?

Yours, S.

From giovanni.manghi at faunalia.pt  Mon Dec  8 16:39:14 2014
From: giovanni.manghi at faunalia.pt (Giovanni Manghi)
Date: Tue, 9 Dec 2014 00:39:14 +0000
Subject: [Qgis-developer] Huge TIFF files - problem
Message-ID: <CACfnYnTS44ruMT4ZCQaJTXhbjqUOJHSu18uQ=sNpdK3NdHueMw@mail.gmail.com>

> Hi,
> I have got a problem with TIFF files.
> Today I was performing a rastercalculation ? two smaller files was suddenly 122 GB ? and my computer ran out of free space.
> And this afternoon my students georeferenced a jpg, and ended up with 24 GB map.
>
> What am I doing wrong?


Hi Lene,
I'm not sure if it is enough to justify such huge output files, but
most of the tools in the "raster" menu just output always float64
tiffs, that certainly contribute to make often bigger than the
necessary. This has been fixed in Processing where most of the gdal
tools now have an option to choose the type of geotiff for the output.

cheers

-- 
Giovanni Manghi
Faunalia.pt
Sistemas de Informa??o Geogr?fica Open Source
Portugal

Web: http://www.faunalia.pt
Email & Jabber: giovanni.manghi at faunalia.pt
PGP Key available
Tel. + 351 96 7058216
--

From veigacamargo at gmail.com  Mon Dec  8 21:47:27 2014
From: veigacamargo at gmail.com (Pedro Camargo)
Date: Mon, 8 Dec 2014 22:47:27 -0700
Subject: [Qgis-developer] New add-in
Message-ID: <CAP=p+YthjVD2uvXP88r0aYa1G=xXWOtLwp6nm2hCy_vXDjgzTQ@mail.gmail.com>

Hi there.

               I am new to this list, and I'd like to ask for general
directions to distribute a plugin (the first version is ready, but there
are some caveats).

               This plugin is a set of transportation planning/modeling
tools that should get at least another 2 dozens of algorithms and
procedures added to it in the near future (as a sole developer with a
demanding day job it is hard to get this done).

               The main caveat is that the computationally intensive
portion of the plugin is written is Cython, which I have NO idea on how to
compile to different operation systems/versions.

               Right now it is compiled to windows 64 bits and it is
compatible with QGIS 2.2 or more recent, and I have the means to compile it
to 32 bits, but I guess doing it for every single operating system makes no
sense, so something automatic would have to be done.

                Is anybody in this list interested in a plugin like this?
I think assignment of demands to shortest paths is a problem of interest to
many, so I might change the code to make it easier when the user wants to
do only that, but aside this, I would like to know what do you guys think.

The page with the instructions is this one:  http://www.aequilibrae.com.
The zip file is still not there, but the link for it is:
http://www.xl-optim.com/site/AequilibraE/AequilibraE.zip


In the folder AequilibraE\SHP_test  there are files I used for testing.


Thanks a lot,

Pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141208/ebcedc7d/attachment.html>

From tech_dev at wildintellect.com  Mon Dec  8 23:43:06 2014
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Mon, 08 Dec 2014 23:43:06 -0800
Subject: [Qgis-developer] Huge TIFF files - problem
In-Reply-To: <CACfnYnTS44ruMT4ZCQaJTXhbjqUOJHSu18uQ=sNpdK3NdHueMw@mail.gmail.com>
References: <CACfnYnTS44ruMT4ZCQaJTXhbjqUOJHSu18uQ=sNpdK3NdHueMw@mail.gmail.com>
Message-ID: <5486A80A.1040403@wildintellect.com>

On 12/08/2014 04:39 PM, Giovanni Manghi wrote:
>> Hi,
>> I have got a problem with TIFF files.
>> Today I was performing a rastercalculation ? two smaller files was suddenly 122 GB ? and my computer ran out of free space.
>> And this afternoon my students georeferenced a jpg, and ended up with 24 GB map.
>>
>> What am I doing wrong?
> 
> 
> Hi Lene,
> I'm not sure if it is enough to justify such huge output files, but
> most of the tools in the "raster" menu just output always float64
> tiffs, that certainly contribute to make often bigger than the
> necessary. This has been fixed in Processing where most of the gdal
> tools now have an option to choose the type of geotiff for the output.
> 
> cheers
> 

That probably is the answer, not only float64 but no compression.
GeoTiff ideally would be a more appropriate storage based on the inputs
and calculation but also use Deflate or LZW compression. Seems to me a
reasonable default to use one of the lossless compression methods. Not
much to be done about the storage type though other than offer users
options when saving Tiffs where possible.

Thanks,
Alex

From cavallini at faunalia.it  Tue Dec  9 00:15:07 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 09 Dec 2014 09:15:07 +0100
Subject: [Qgis-developer] New add-in
In-Reply-To: <CAP=p+YthjVD2uvXP88r0aYa1G=xXWOtLwp6nm2hCy_vXDjgzTQ@mail.gmail.com>
References: <CAP=p+YthjVD2uvXP88r0aYa1G=xXWOtLwp6nm2hCy_vXDjgzTQ@mail.gmail.com>
Message-ID: <5486AF8B.4030402@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Pedro,

Il 09/12/2014 06:47, Pedro Camargo ha scritto:
> Hi there.
> 
>                I am new to this list, and I'd like to ask for general
> directions to distribute a plugin (the first version is ready, but there
> are some caveats).

your plugin is certainly interesting. We have other plugins that depend
on other software, and this is not a huge deal (although it is generally
strongly preferred if all the sw is available for all major platforms).
You just have to explain this clearly in the about, so people will not
install the plugin if they cannot get the necessary dependencies.
I have not checked it yet, but I would suggest you to verify if its
inclusion in the Processing framework is at all feasible: this will
greatly enhance its usability in more complex workflows, and require far
less work to develop the interfaces.
As fro the Cython part, have you thought of transforming your code in
standard libs, and distribute it with the usual packaging systems?
Looking forward to hear from you.
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSGr4oACgkQ/NedwLUzIr65sgCgh5djRdac9SUtrevIG3Hg/sqX
nI4AnjQqydBr30CUyT9D1s34jbVceQdy
=Zemd
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Tue Dec  9 00:56:30 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 09 Dec 2014 09:56:30 +0100
Subject: [Qgis-developer] Adding visual changelog entries to QGIS Tips
Message-ID: <5486B93E.8010408@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
I think QGIS tips are a nice idea, and have been a bit neglected so
far. What about making them richer by adding individual visual
changelog entries as separate tips? In this way, user will learn more
quickly about new features for each version, with mininal effort for all.
If agreed, I can open a ticket for this. A QEP seems overkil for such
a simple task, right?
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSGuTwACgkQ/NedwLUzIr7nwwCgt6G1gsZ+janloka+w1oHzALq
eucAn3Rq0jy7cIA7WxF1K+TcWUjCOpvc
=tdKZ
-----END PGP SIGNATURE-----

From senhor.neto at gmail.com  Tue Dec  9 01:12:29 2014
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 9 Dec 2014 09:12:29 +0000
Subject: [Qgis-developer] Huge TIFF files - problem
In-Reply-To: <5486A80A.1040403@wildintellect.com>
References: <CACfnYnTS44ruMT4ZCQaJTXhbjqUOJHSu18uQ=sNpdK3NdHueMw@mail.gmail.com>
	<5486A80A.1040403@wildintellect.com>
Message-ID: <CA+H0G_F1DrmcFGoUCKKVD30VUgAW3kPqX=19bLqiK+LzmPbpgw@mail.gmail.com>

Em 09/12/2014 07:43, "Alex Mandel" <tech_dev at wildintellect.com> escreveu:
> ... Seems to me a
> reasonable default to use one of the lossless compression methods. Not
> much to be done about the storage type though other than offer users

Could / should we make it default in gdal tools then? IMHO, a standard user
should not have to worry about that.

Best regards,
Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141209/65e2ef8c/attachment.html>

From lfi at ign.ku.dk  Tue Dec  9 01:56:10 2014
From: lfi at ign.ku.dk (Lene Fischer)
Date: Tue, 9 Dec 2014 09:56:10 +0000
Subject: [Qgis-developer] Huge TIFF files - problem
In-Reply-To: <CA+H0G_F1DrmcFGoUCKKVD30VUgAW3kPqX=19bLqiK+LzmPbpgw@mail.gmail.com>
References: <CACfnYnTS44ruMT4ZCQaJTXhbjqUOJHSu18uQ=sNpdK3NdHueMw@mail.gmail.com>
	<5486A80A.1040403@wildintellect.com>
	<CA+H0G_F1DrmcFGoUCKKVD30VUgAW3kPqX=19bLqiK+LzmPbpgw@mail.gmail.com>
Message-ID: <38497AD9CA059C42AA3451EFEFF0378E9DCA6172@P1KITMBX03WC02.unicph.domain>

I think this is a good idea.
It gives problems when I end up with data files on 122 GB. I know how to change, but not basic users.
Regards


Lene Fischer
Lektor

Skovskolen
K?benhavns Universitet

DIR 40115084
lfi at ign.ku.dk<mailto:lfi at ign.ku.dk>


[SCIENCE_bomaerke]


Fra: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] P? vegne af Alexandre Neto
Sendt: 9. december 2014 10:12
Til: tech at wildintellect.com
Cc: qgis-dev; Giovanni Manghi
Emne: Re: [Qgis-developer] Huge TIFF files - problem


Em 09/12/2014 07:43, "Alex Mandel" <tech_dev at wildintellect.com<mailto:tech_dev at wildintellect.com>> escreveu:
> ... Seems to me a
> reasonable default to use one of the lossless compression methods. Not
> much to be done about the storage type though other than offer users

Could / should we make it default in gdal tools then? IMHO, a standard user should not have to worry about that.

Best regards,
Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141209/d223a10b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 7450 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141209/d223a10b/attachment-0001.jpg>

From yjacolin at free.fr  Tue Dec  9 01:16:28 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue, 09 Dec 2014 10:16:28 +0100
Subject: [Qgis-developer] Adding visual changelog entries to QGIS Tips
In-Reply-To: <5486B93E.8010408@faunalia.it>
References: <5486B93E.8010408@faunalia.it>
Message-ID: <4237166.udzi9dfiEm@tatras>

On Tuesday, December 09, 2014 9:56:30 Paolo Cavallini wrote:
> Hi all.
> I think QGIS tips are a nice idea, and have been a bit neglected so
> far. What about making them richer by adding individual visual
> changelog entries as separate tips? In this way, user will learn more
> quickly about new features for each version, with mininal effort for all.
> If agreed, I can open a ticket for this. A QEP seems overkil for such
> a simple task, right?
> All the best.

That's a great idea!

Y.

From devquestions2 at gmail.com  Tue Dec  9 05:16:25 2014
From: devquestions2 at gmail.com (devquestions2 at gmail.com)
Date: Tue, 9 Dec 2014 05:16:25 -0800 (PST)
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
Message-ID: <1418130985178-5177029.post@n6.nabble.com>

I am seeing the error "cannot connect to X server" in a stand alone python
application at
"app = QgsApplication([], True)".

As suggested in the mailing archives I tried setting DISPLAY env variable to
"", but that does not resolve the problem. Would be a great help if you can
point me any references on the issue or have any suggestions on what i can
try.

Os Ubuntu

code :

import os
import sys

#qgisprefix = '/usr'
qgisprefix='/usr/share/qgis/resources'


os.environ['DISPLAY']=""
from qgis.core import *

from qgis.gui import *

# configure QGIS paths
QgsApplication.setPrefixPath(qgisprefix, True)

# initalise QGIS
QgsApplication.initQgis()

app = QgsApplication([], True) 

Thanks !



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-cannot-connect-to-X-server-on-Ubuntu-tp5177029.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From madmanwoo at gmail.com  Tue Dec  9 05:29:19 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Tue, 09 Dec 2014 13:29:19 +0000
Subject: [Qgis-developer] Adding visual changelog entries to QGIS Tips
References: <5486B93E.8010408@faunalia.it> <4237166.udzi9dfiEm@tatras>
Message-ID: <CAAi8Yg9LFBJn1NWrWeq3KLikZJhok+SH-ZSqpXAOg0646AG+ww@mail.gmail.com>

Yes no qep for something like this.

On Tue, 9 Dec 2014 10:55 pm Yves Jacolin <yjacolin at free.fr> wrote:

> On Tuesday, December 09, 2014 9:56:30 Paolo Cavallini wrote:
> > Hi all.
> > I think QGIS tips are a nice idea, and have been a bit neglected so
> > far. What about making them richer by adding individual visual
> > changelog entries as separate tips? In this way, user will learn more
> > quickly about new features for each version, with mininal effort for all.
> > If agreed, I can open a ticket for this. A QEP seems overkil for such
> > a simple task, right?
> > All the best.
>
> That's a great idea!
>
> Y.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141209/ecf6a3b0/attachment.html>

From rdmailings at duif.net  Tue Dec  9 05:47:01 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 09 Dec 2014 14:47:01 +0100
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <1418130985178-5177029.post@n6.nabble.com>
References: <1418130985178-5177029.post@n6.nabble.com>
Message-ID: <5486FD55.5020600@duif.net>

On 09-12-14 14:16, devquestions2 at gmail.com wrote:
> I am seeing the error "cannot connect to X server" in a stand alone python
> application at
> "app = QgsApplication([], True)".
> 
> As suggested in the mailing archives I tried setting DISPLAY env variable to
> "", but that does not resolve the problem. Would be a great help if you can
> point me any references on the issue or have any suggestions on what i can
> try.
> 
> Os Ubuntu
> 
> code :
> 
> import os
> import sys
> 
> #qgisprefix = '/usr'
> qgisprefix='/usr/share/qgis/resources'
> 
> 
> os.environ['DISPLAY']=""
> from qgis.core import *
> 
> from qgis.gui import *_
> 
> # configure QGIS paths
> QgsApplication.setPrefixPath(qgisprefix, True)
> 
> # initalise QGIS
> QgsApplication.initQgis()
> 
> app = QgsApplication([], True) 

I'm on Debian here, and (given the right PYTHONPATH and LD_LIBRARY path
are correct), your code works for me.

Here:
http://comments.gmane.org/gmane.comp.gis.qgis.devel/34478
Martin tells something about the differences between the inits of qgis.
Setting the DISPLAY to "" as you do is actually setting it to NONE!

If you are in a X-session you should not need to set this. If you are
running it on a headless server, then it is possible you do not have X.

Are you sure ubuntu is actually running X? Wasn't ubuntu busy with
trying to make something else instead of X, mir or so?
Can you try it on another machine?

Regards,

Richard Duivenvoorde


From rdmailings at duif.net  Tue Dec  9 06:04:10 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 09 Dec 2014 15:04:10 +0100
Subject: [Qgis-developer] Adding visual changelog entries to QGIS Tips
In-Reply-To: <5486B93E.8010408@faunalia.it>
References: <5486B93E.8010408@faunalia.it>
Message-ID: <5487015A.9030602@duif.net>

On 09-12-14 09:56, Paolo Cavallini wrote:
> Hi all.
> I think QGIS tips are a nice idea, and have been a bit neglected so
> far. What about making them richer by adding individual visual
> changelog entries as separate tips? In this way, user will learn more
> quickly about new features for each version, with mininal effort for all.
> If agreed, I can open a ticket for this. A QEP seems overkil for such
> a simple task, right?

Hi Paolo,

I like the idea, but it seems not so trivial to me.

Currently the tips are cpp source and images are part of the resources:

https://github.com/qgis/QGIS/blob/master/src/app/qgstipfactory.cpp#L162

visual changelog items can be exported to rst or html, but currently on
one page. Some hacking will be needed to do such automatically.

Off course copying the text into the ccp file by hand is always an option...

Another option would be (when user is online) to deeplink to the website
with url's like:

http://qgis.org/en/site/forusers/visualchangelog260/#feature-color-palettes

and show those in the tips? This would make efficient use of current
changelogs (with drawback that in that page all entries are into one
page too...)

anyway: it's worth a feature request

Regards,

Richard


From devquestions2 at gmail.com  Tue Dec  9 07:49:06 2014
From: devquestions2 at gmail.com (devquestions2 at gmail.com)
Date: Tue, 9 Dec 2014 07:49:06 -0800 (PST)
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <5486FD55.5020600@duif.net>
References: <1418130985178-5177029.post@n6.nabble.com>
	<5486FD55.5020600@duif.net>
Message-ID: <1418140146459-5177059.post@n6.nabble.com>

Hi Richard,

Thanks for the reply.

Can you please let me know what should be the values for

 PYTHONPATH and LD_LIBRARY .

Kindof new to this whole linux/unix world. Appreciate your help.

Thanks !



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-cannot-connect-to-X-server-on-Ubuntu-tp5177029p5177059.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From devquestions2 at gmail.com  Tue Dec  9 08:11:38 2014
From: devquestions2 at gmail.com (devquestions2 at gmail.com)
Date: Tue, 9 Dec 2014 08:11:38 -0800 (PST)
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <1418140146459-5177059.post@n6.nabble.com>
References: <1418130985178-5177029.post@n6.nabble.com>
	<5486FD55.5020600@duif.net>
	<1418140146459-5177059.post@n6.nabble.com>
Message-ID: <1418141498842-5177061.post@n6.nabble.com>

>>on X-server,

I want to run it in a headless mode i.e no GUI. I want to be able to invoke
in batch mode ( ie headless standalone)  a model developed via graphical
modelling tool of qgis.

So, ideally i dont want to connect to x-server

this is needed for automation purpose.

Cant really use python consol from qgis.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-cannot-connect-to-X-server-on-Ubuntu-tp5177029p5177061.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From Stefan.Ziegler at bd.so.ch  Tue Dec  9 08:23:02 2014
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Tue, 9 Dec 2014 16:23:02 +0000
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <1418141498842-5177061.post@n6.nabble.com>
References: <1418130985178-5177029.post@n6.nabble.com>
	<5486FD55.5020600@duif.net>	<1418140146459-5177059.post@n6.nabble.com>
	<1418141498842-5177061.post@n6.nabble.com>
Message-ID: <96EAE7D042AAC14486D68EC70207B0C14AA8F715@srsofaioi16255.verw.rootso.org>

Hi 

I think there are two approaches:

1) Install Xvfb and start it with the following command (and export DISPLAY): 

Xvfb :99 -ac -noreset &
export DISPLAY=:99
 

2) Try to use QCoreApplication instead of QApplication:

app = QApplication(sys.argv)
QgsApplication.setPrefixPath("/home/stefan/Apps/qgis_master", True)
QgsApplication.initQgis()

I don't know what the drawbacks are when using QCoreApplication.

Regards
Stefan 

> -----Urspr?ngliche Nachricht-----
> Von: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-
> bounces at lists.osgeo.org] Im Auftrag von devquestions2 at gmail.com
> Gesendet: Dienstag, 9. Dezember 2014 17:12
> An: qgis-developer at lists.osgeo.org
> Betreff: Re: [Qgis-developer] Error : cannot connect to X server on Ubuntu
> 
> >>on X-server,
> 
> I want to run it in a headless mode i.e no GUI. I want to be able to invoke in batch
> mode ( ie headless standalone)  a model developed via graphical modelling tool of qgis.
> 
> So, ideally i dont want to connect to x-server
> 
> this is needed for automation purpose.
> 
> Cant really use python consol from qgis.
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-cannot-
> connect-to-X-server-on-Ubuntu-tp5177029p5177061.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From mederic.ribreux at medspx.homenet.org  Tue Dec  9 08:47:19 2014
From: mederic.ribreux at medspx.homenet.org (mederic.ribreux)
Date: Tue, 09 Dec 2014 17:47:19 +0100
Subject: [Qgis-developer] Python Oracle getFeatures non working on
	non-geometric tables
Message-ID: <939d2f69250610dc80a4799a1b463bfd@medspx.homenet.org>

Hello,

I am trying to iterate over a non geographic table under PyQGis. The 
table is stored in an Oracle database and I use QGis Api to get the data 
(table is opened in a QGis project with Oracle provider). I have added 
primary key constraint to this table but I am not able to iterate 
through its features with the getFeatures() method. The following 
snippet always returns nothing:

layer = 
QgsMapLayerRegistry.instance().mapLayersByName('MY_ATTRIBUTE_TABLE')[0]
for f in layer.getFeatures():
   print f

I have tried with a geographic layer and there is no problem on this 
side because the above snippets prints a line for every feature in the 
table. I have also tried with opening the geographic table without 
geometry (geometry is "No Geometry"). In this configuration, I am not 
able to get access to the features...

I have tried to reproduce this on a PostgreSQL/PostGIS server and there 
is no bug: I am able to iterate over a non-geographic layer (even a 
geographic layer declared as non-geographic).

Is this a problem with the Oracle provider or just me having forgotten 
something in the table ?

Best regards

-- 
M?d?ric RIBREUX
http://medspx.homenet.org

From cavallini at faunalia.it  Tue Dec  9 10:12:17 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 09 Dec 2014 19:12:17 +0100
Subject: [Qgis-developer] Adding visual changelog entries to QGIS Tips
In-Reply-To: <5487015A.9030602@duif.net>
References: <5486B93E.8010408@faunalia.it> <5487015A.9030602@duif.net>
Message-ID: <54873B81.1050004@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 09/12/2014 15:04, Richard Duivenvoorde ha scritto:

> anyway: it's worth a feature request

done, thanks:
http://hub.qgis.org/issues/11828
with some suggestions and opinions.
all the best.

- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSHO4AACgkQ/NedwLUzIr4nugCgtbhP2DVDg9unCQh1MozQjt32
xN0AoKAyIHJwCI6jdLyLNaYDE9M3Wn04
=fcq9
-----END PGP SIGNATURE-----

From J.Moules at hrwallingford.com  Tue Dec  9 10:40:34 2014
From: J.Moules at hrwallingford.com (Jonathan Moules)
Date: Tue, 9 Dec 2014 18:40:34 +0000
Subject: [Qgis-developer] Huge TIFF files - problem
In-Reply-To: <38497AD9CA059C42AA3451EFEFF0378E9DCA6172@P1KITMBX03WC02.unicph.domain>
References: <CACfnYnTS44ruMT4ZCQaJTXhbjqUOJHSu18uQ=sNpdK3NdHueMw@mail.gmail.com>
	<5486A80A.1040403@wildintellect.com>
	<CA+H0G_F1DrmcFGoUCKKVD30VUgAW3kPqX=19bLqiK+LzmPbpgw@mail.gmail.com>
	<38497AD9CA059C42AA3451EFEFF0378E9DCA6172@P1KITMBX03WC02.unicph.domain>
Message-ID: <E6100A0537F18549AC8FCCB5D47FFE3561EE46@EXMBX1.hrw-uk.local>

Hi Lene,
What?s the GDALINFO for the 122GB image? That will confirm (or debunk) some of the theories posted here as to the cause. Figured it?s worth asking just in case there?s another cause too.

Cheers,
Jonathan


From: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] On Behalf Of Lene Fischer
Sent: Tuesday, December 09, 2014 9:56 AM
To: Alexandre Neto; tech at wildintellect.com
Cc: qgis-dev; Giovanni Manghi
Subject: Re: [Qgis-developer] Huge TIFF files - problem

I think this is a good idea.
It gives problems when I end up with data files on 122 GB. I know how to change, but not basic users.
Regards


Lene Fischer
Lektor

Skovskolen
K?benhavns Universitet

DIR 40115084
lfi at ign.ku.dk<mailto:lfi at ign.ku.dk>


[SCIENCE_bomaerke]


Fra: qgis-developer-bounces at lists.osgeo.org<mailto:qgis-developer-bounces at lists.osgeo.org> [mailto:qgis-developer-bounces at lists.osgeo.org] P? vegne af Alexandre Neto
Sendt: 9. december 2014 10:12
Til: tech at wildintellect.com<mailto:tech at wildintellect.com>
Cc: qgis-dev; Giovanni Manghi
Emne: Re: [Qgis-developer] Huge TIFF files - problem


Em 09/12/2014 07:43, "Alex Mandel" <tech_dev at wildintellect.com<mailto:tech_dev at wildintellect.com>> escreveu:
> ... Seems to me a
> reasonable default to use one of the lossless compression methods. Not
> much to be done about the storage type though other than offer users

Could / should we make it default in gdal tools then? IMHO, a standard user should not have to worry about that.

Best regards,
Alexandre Neto


This message has been scanned for viruses by MailControl<http://www.mailcontrol.com/>, a service from BlackSpider Technology

Click here<https://www.mailcontrol.com/sr/vl7MADbPXAvGX2PQPOmvUoRq5N+0kMbNpBLGRwvwJz4CR0U4bUTFeO2fvKRWDWKvYNcelilqCBKTKOxjbsImtQ==> to report this email as spam.



________________________________

HR Wallingford and its subsidiaries uses faxes and emails for confidential and legally privileged business communications. They do not of themselves create legal commitments. Disclosure to parties other than addressees requires our specific consent. We are not liable for unauthorised disclosures nor reliance upon them.
If you have received this message in error please advise us immediately and destroy all copies of it.

HR Wallingford Limited
Howbery Park, Wallingford, Oxfordshire, OX10 8BA, United Kingdom
Registered in England No. 02562099

________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141209/0112fcb9/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 7450 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141209/0112fcb9/attachment-0001.jpg>

From radim.blazek at gmail.com  Tue Dec  9 11:10:10 2014
From: radim.blazek at gmail.com (Radim Blazek)
Date: Tue, 9 Dec 2014 20:10:10 +0100
Subject: [Qgis-developer] Identify crash
Message-ID: <CAEMrtYpppX0LHzT6XL-zpbRS3F=h-MvJ_seKaqFOKyS0o4xrvA@mail.gmail.com>

I am getting immediate crash with current master when identify tool is
selected. I don't see anything obvious in backtrace (maybe
this=0x80000000 ?):

#0  0x00007fe9dd757475 in *__GI_raise (sig=<optimized out>) at
../nptl/sysdeps/unix/sysv/linux/raise.c:64
64      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
(gdb) bt
#0  0x00007fe9dd757475 in *__GI_raise (sig=<optimized out>) at
../nptl/sysdeps/unix/sysv/linux/raise.c:64
#1  0x00007fe9dd75a6f0 in *__GI_abort () at abort.c:92
#2  0x000000000059717b in qgisCrash (signal=11) at
/home/radim/devel/qgis/src/app/main.cpp:306
#3  <signal handler called>
#4  data (this=<optimized out>) at
../../include/QtCore/../../src/corelib/tools/qscopedpointer.h:135
#5  qGetPtrHelper<QScopedPointer<QObjectData> > (p=...) at
../../include/QtCore/../../src/corelib/global/qglobal.h:2436
#6  d_func (this=<optimized out>) at
../../include/QtGui/../../src/gui/kernel/qwidget.h:150
#7  QWidget::insertAction (this=0x80000000, before=0x0,
action=0x2613e70) at kernel/qwidget.cpp:3281
#8  0x00000000006cc769 in
QgsIdentifyResultsDialog::QgsIdentifyResultsDialog (this=0x6e1d0e0,
canvas=0x279cda0, parent=0x23f8f60, f=...)
    at /home/radim/devel/qgis/src/app/qgsidentifyresultsdialog.cpp:274
#9  0x0000000000758055 in QgsMapToolIdentifyAction::resultsDialog
(this=0x293e7f0)
    at /home/radim/devel/qgis/src/app/qgsmaptoolidentifyaction.cpp:75
#10 0x0000000000758da0 in QgsMapToolIdentifyAction::activate (this=0x293e7f0)
    at /home/radim/devel/qgis/src/app/qgsmaptoolidentifyaction.cpp:176
#11 0x00007fe9e170b620 in QgsMapCanvas::setMapTool (this=0x279cda0,
tool=0x293e7f0) at
/home/radim/devel/qgis/src/gui/qgsmapcanvas.cpp:1471
#12 0x00000000005c4027 in QgisApp::identify (this=0x23f8f60) at
/home/radim/devel/qgis/src/app/qgisapp.cpp:4598

Radim

From rdmailings at duif.net  Tue Dec  9 11:23:32 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 09 Dec 2014 20:23:32 +0100
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <1418140146459-5177059.post@n6.nabble.com>
References: <1418130985178-5177029.post@n6.nabble.com>	<5486FD55.5020600@duif.net>
	<1418140146459-5177059.post@n6.nabble.com>
Message-ID: <54874C34.8040506@duif.net>

On 09-12-14 16:49, devquestions2 at gmail.com wrote:
> Hi Richard,
> 
> Thanks for the reply.
> 
> Can you please let me know what should be the values for
> 
>  PYTHONPATH and LD_LIBRARY .

I compile QGIS master in debug mode and install it in
apps/qgis/master/debug

So then these are the paths I use

export PYTHONPATH=/home/richard/apps/qgis/master/debug/share/qgis/python/

export LD_LIBRARY_PATH=/home/richard/apps/qgis/master/debug/lib/

but if I understand correct you have an headless (without X-server)
config. That's a different beast.

Regards,

Richard

From lby20102 at hotmail.com  Tue Dec  9 14:47:36 2014
From: lby20102 at hotmail.com (eliu1234)
Date: Tue, 9 Dec 2014 14:47:36 -0800 (PST)
Subject: [Qgis-developer] Zoom in qt
Message-ID: <1418165256289-5177130.post@n6.nabble.com>

I am currently trying to use pyqt and qgis to write an application.
I am using zoomWithCenter method to do the zoom action. Is it possible to
make sure when I zoom out, the qgsmapcanvas is always at the center of the
qwindow? 
Also, is it possible to block all zoom in action if the zoom action applied
is not on the qgsmapcanvas but on a empty area?

Any help is appreciated.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Zoom-in-qt-tp5177130.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From denis.rouzaud at gmail.com  Tue Dec  9 23:04:15 2014
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Wed, 10 Dec 2014 08:04:15 +0100
Subject: [Qgis-developer] Identify crash
In-Reply-To: <CAEMrtYpppX0LHzT6XL-zpbRS3F=h-MvJ_seKaqFOKyS0o4xrvA@mail.gmail.com>
References: <CAEMrtYpppX0LHzT6XL-zpbRS3F=h-MvJ_seKaqFOKyS0o4xrvA@mail.gmail.com>
Message-ID: <5487F06F.1060507@gmail.com>

I'm not....
Can you give more details to reproduce?


On 09.12.2014 20:10, Radim Blazek wrote:
> I am getting immediate crash with current master when identify tool is
> selected. I don't see anything obvious in backtrace (maybe
> this=0x80000000 ?):
>
> #0  0x00007fe9dd757475 in *__GI_raise (sig=<optimized out>) at
> ../nptl/sysdeps/unix/sysv/linux/raise.c:64
> 64      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or directory.
> (gdb) bt
> #0  0x00007fe9dd757475 in *__GI_raise (sig=<optimized out>) at
> ../nptl/sysdeps/unix/sysv/linux/raise.c:64
> #1  0x00007fe9dd75a6f0 in *__GI_abort () at abort.c:92
> #2  0x000000000059717b in qgisCrash (signal=11) at
> /home/radim/devel/qgis/src/app/main.cpp:306
> #3  <signal handler called>
> #4  data (this=<optimized out>) at
> ../../include/QtCore/../../src/corelib/tools/qscopedpointer.h:135
> #5  qGetPtrHelper<QScopedPointer<QObjectData> > (p=...) at
> ../../include/QtCore/../../src/corelib/global/qglobal.h:2436
> #6  d_func (this=<optimized out>) at
> ../../include/QtGui/../../src/gui/kernel/qwidget.h:150
> #7  QWidget::insertAction (this=0x80000000, before=0x0,
> action=0x2613e70) at kernel/qwidget.cpp:3281
> #8  0x00000000006cc769 in
> QgsIdentifyResultsDialog::QgsIdentifyResultsDialog (this=0x6e1d0e0,
> canvas=0x279cda0, parent=0x23f8f60, f=...)
>      at /home/radim/devel/qgis/src/app/qgsidentifyresultsdialog.cpp:274
> #9  0x0000000000758055 in QgsMapToolIdentifyAction::resultsDialog
> (this=0x293e7f0)
>      at /home/radim/devel/qgis/src/app/qgsmaptoolidentifyaction.cpp:75
> #10 0x0000000000758da0 in QgsMapToolIdentifyAction::activate (this=0x293e7f0)
>      at /home/radim/devel/qgis/src/app/qgsmaptoolidentifyaction.cpp:176
> #11 0x00007fe9e170b620 in QgsMapCanvas::setMapTool (this=0x279cda0,
> tool=0x293e7f0) at
> /home/radim/devel/qgis/src/gui/qgsmapcanvas.cpp:1471
> #12 0x00000000005c4027 in QgisApp::identify (this=0x23f8f60) at
> /home/radim/devel/qgis/src/app/qgisapp.cpp:4598
>
> Radim
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From radim.blazek at gmail.com  Wed Dec 10 01:17:58 2014
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed, 10 Dec 2014 10:17:58 +0100
Subject: [Qgis-developer] Identify crash
In-Reply-To: <5487F06F.1060507@gmail.com>
References: <CAEMrtYpppX0LHzT6XL-zpbRS3F=h-MvJ_seKaqFOKyS0o4xrvA@mail.gmail.com>
	<5487F06F.1060507@gmail.com>
Message-ID: <CAEMrtYqY1NQyEDe4rL+Hv8pnSo1U0Utv19Jub4qfku4E1te5QQ@mail.gmail.com>

Solved by make clean, sorry for the noise.

Thanks
Radim

On Wed, Dec 10, 2014 at 8:04 AM, Denis Rouzaud <denis.rouzaud at gmail.com> wrote:
> I'm not....
> Can you give more details to reproduce?
>
>
>
> On 09.12.2014 20:10, Radim Blazek wrote:
>>
>> I am getting immediate crash with current master when identify tool is
>> selected. I don't see anything obvious in backtrace (maybe
>> this=0x80000000 ?):
>>
>> #0  0x00007fe9dd757475 in *__GI_raise (sig=<optimized out>) at
>> ../nptl/sysdeps/unix/sysv/linux/raise.c:64
>> 64      ../nptl/sysdeps/unix/sysv/linux/raise.c: No such file or
>> directory.
>> (gdb) bt
>> #0  0x00007fe9dd757475 in *__GI_raise (sig=<optimized out>) at
>> ../nptl/sysdeps/unix/sysv/linux/raise.c:64
>> #1  0x00007fe9dd75a6f0 in *__GI_abort () at abort.c:92
>> #2  0x000000000059717b in qgisCrash (signal=11) at
>> /home/radim/devel/qgis/src/app/main.cpp:306
>> #3  <signal handler called>
>> #4  data (this=<optimized out>) at
>> ../../include/QtCore/../../src/corelib/tools/qscopedpointer.h:135
>> #5  qGetPtrHelper<QScopedPointer<QObjectData> > (p=...) at
>> ../../include/QtCore/../../src/corelib/global/qglobal.h:2436
>> #6  d_func (this=<optimized out>) at
>> ../../include/QtGui/../../src/gui/kernel/qwidget.h:150
>> #7  QWidget::insertAction (this=0x80000000, before=0x0,
>> action=0x2613e70) at kernel/qwidget.cpp:3281
>> #8  0x00000000006cc769 in
>> QgsIdentifyResultsDialog::QgsIdentifyResultsDialog (this=0x6e1d0e0,
>> canvas=0x279cda0, parent=0x23f8f60, f=...)
>>      at /home/radim/devel/qgis/src/app/qgsidentifyresultsdialog.cpp:274
>> #9  0x0000000000758055 in QgsMapToolIdentifyAction::resultsDialog
>> (this=0x293e7f0)
>>      at /home/radim/devel/qgis/src/app/qgsmaptoolidentifyaction.cpp:75
>> #10 0x0000000000758da0 in QgsMapToolIdentifyAction::activate
>> (this=0x293e7f0)
>>      at /home/radim/devel/qgis/src/app/qgsmaptoolidentifyaction.cpp:176
>> #11 0x00007fe9e170b620 in QgsMapCanvas::setMapTool (this=0x279cda0,
>> tool=0x293e7f0) at
>> /home/radim/devel/qgis/src/gui/qgsmapcanvas.cpp:1471
>> #12 0x00000000005c4027 in QgisApp::identify (this=0x23f8f60) at
>> /home/radim/devel/qgis/src/app/qgisapp.cpp:4598
>>
>> Radim
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

From rdmailings at duif.net  Wed Dec 10 01:37:36 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 10 Dec 2014 10:37:36 +0100
Subject: [Qgis-developer] [Qgis-user] How load Postgis layer from
	command line?
In-Reply-To: <53EFB3B6FE87F844B61F7F30119B0BD0A2DA93F7@EXCSTD01.kristianstad.se>
References: <53EFB3B6FE87F844B61F7F30119B0BD0577D3581@EXCENT01.kristianstad.se>
	<53EFB3B6FE87F844B61F7F30119B0BD0577DA209@EXCENT01.kristianstad.se>
	<52A07D59.7040508@duif.net>
	<CANaz7mxmLyByXaNy0LS8NpTf1Gspn462Jeuf0fNYrZpDc23xcg@mail.gmail.com>
	<5486D6AC.3080503@duif.net>
	<CANaz7my68_2Fa1yGs7PhAVJv_1ALKj42dHpLm1Z6zcydo7OQRg@mail.gmail.com>
	<54875DE5.4040507@duif.net>
	<CA+nQOR-0XtXq_c+-MN_TbRXesVKQ8yRrnELMA-8hAceLtJqGiQ@mail.gmail.com>,
	<CANaz7mzeQWpgXH+adpLmUr5ZL0=uipv7hGgzA1VLrhVumE07TA@mail.gmail.com>
	<53EFB3B6FE87F844B61F7F30119B0BD0A2DA93F7@EXCSTD01.kristianstad.se>
Message-ID: <54881460.101@duif.net>

On 10-12-14 10:11, Uggla Henrik wrote:
> In Linux it is very easy to setup a ramdisk for fast temporal file storage.
> 
> --help really gives the impression that loading Qgis with PostGIS layers using the FILE parameter is a breeze. Also, I still doesn't get what this "PostGIS extension" mentioned in --help is.

cc'ing to dev list, original thread here:

http://lists.osgeo.org/pipermail/qgis-user/2014-December/030180.html


Me neither, best to bring this to the dev list then, to ask which this
extension is.

And IF we want a FILE parameter work for postgis we could come up with a
design for that file param and do a feature request to get this implemented?

For example, as this works:

l = iface.addVectorLayer('dbname=bag host=localhost port=5432 user=geo
password=xxx sslmode=disable key=gid estimatedmetadata=true srid=28992
type=MULTIPOLYGON table="bag8mrt2014"."provincie" (geovlak) sql=',
"test", "postgres")

this is the actual uri:

'dbname=bag host=localhost port=5432 user=geo
password=xxx sslmode=disable key=gid estimatedmetadata=true srid=28992
type=MULTIPOLYGON table="bag8mrt2014"."provincie" (geovlak) sql='

so maybe prepend that with the provider part:

postgres:'dbname=bag host=localhost port=5432 user=geo
password=xxx sslmode=disable key=gid estimatedmetadata=true srid=28992
type=MULTIPOLYGON table="bag8mrt2014"."provincie" (geovlak) sql='

and add a --uri option to QGIS?

qgis --uri postgres:'dbname=bag host=localhost port=5432 user=geo
password=xxx sslmode=disable key=gid estimatedmetadata=true srid=28992
type=MULTIPOLYGON table="bag8mrt2014"."provincie" (geovlak) sql='

or something like that?

Regards,

Richard Duivenvoorde

From cavallini at faunalia.it  Wed Dec 10 02:18:32 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 10 Dec 2014 11:18:32 +0100
Subject: [Qgis-developer] New raster calc in Processing?
Message-ID: <54881DF8.3060609@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
Anyone has plans to add this upcoming feature to standard Processing
framework?
http://blog.orfeo-toolbox.org/news/coming-soon-new-powerful-raster-
calculator-in-otb
Thanks.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSIHfcACgkQ/NedwLUzIr5vPQCeI2HG06gnlyuP/B3qSOayTYno
Zk8AoKg4JiOID0XIDnlV9SGrBBzd07qN
=g28P
-----END PGP SIGNATURE-----

From mederic.ribreux at medspx.homenet.org  Wed Dec 10 02:51:36 2014
From: mederic.ribreux at medspx.homenet.org (mederic.ribreux)
Date: Wed, 10 Dec 2014 11:51:36 +0100
Subject: [Qgis-developer] Python Oracle getFeatures non working on
	non-geometric tables
In-Reply-To: <939d2f69250610dc80a4799a1b463bfd@medspx.homenet.org>
References: <939d2f69250610dc80a4799a1b463bfd@medspx.homenet.org>
Message-ID: <4f0375a76a4510c9834310f519bc2d42@medspx.homenet.org>

Hello,

I've been further this morning... You just need to build a 
QgsFeatureRequest which grabs the NoGeometry features.

layer = 
QgsMapLayerRegistry.instance().mapLayersByName('MY_ATTRIBUTE_TABLE')[0]
for f in 
layer.getFeatures(QgsFeatureRequest().setFlags(QgsFeatureRequest.NoGeometry)):
   print f

This behavior seems to be specific to Oracle NoGeometry QgsVectorLayers. 
I have made tests under PostGIS and Spatialite and you can use the 
getFeatures() method without specifying a QgsFeatureRequest to grab all 
the features of the layer.

Should I file a bug report on Oracle provider ?

Best regards,

Le 2014-12-09 17:47, mederic.ribreux a ?crit?:
> Hello,
> 
> I am trying to iterate over a non geographic table under PyQGis. The
> table is stored in an Oracle database and I use QGis Api to get the
> data (table is opened in a QGis project with Oracle provider). I have
> added primary key constraint to this table but I am not able to
> iterate through its features with the getFeatures() method. The
> following snippet always returns nothing:
> 
> layer = 
> QgsMapLayerRegistry.instance().mapLayersByName('MY_ATTRIBUTE_TABLE')[0]
> for f in layer.getFeatures():
>   print f
> 
> I have tried with a geographic layer and there is no problem on this
> side because the above snippets prints a line for every feature in the
> table. I have also tried with opening the geographic table without
> geometry (geometry is "No Geometry"). In this configuration, I am not
> able to get access to the features...
> 
> I have tried to reproduce this on a PostgreSQL/PostGIS server and
> there is no bug: I am able to iterate over a non-geographic layer
> (even a geographic layer declared as non-geographic).
> 
> Is this a problem with the Oracle provider or just me having forgotten
> something in the table ?
> 
> Best regards

-- 
M?d?ric RIBREUX
http://medspx.homenet.org

From carrillo.german at gmail.com  Wed Dec 10 06:03:46 2014
From: carrillo.german at gmail.com (=?ISO-8859-1?Q?Germ=E1n_Carrillo?=)
Date: Wed, 10 Dec 2014 09:03:46 -0500
Subject: [Qgis-developer] [Qgis-user] How load Postgis layer from
	command line?
In-Reply-To: <54881460.101@duif.net>
References: <53EFB3B6FE87F844B61F7F30119B0BD0577D3581@EXCENT01.kristianstad.se>
	<53EFB3B6FE87F844B61F7F30119B0BD0577DA209@EXCENT01.kristianstad.se>
	<52A07D59.7040508@duif.net>
	<CANaz7mxmLyByXaNy0LS8NpTf1Gspn462Jeuf0fNYrZpDc23xcg@mail.gmail.com>
	<5486D6AC.3080503@duif.net>
	<CANaz7my68_2Fa1yGs7PhAVJv_1ALKj42dHpLm1Z6zcydo7OQRg@mail.gmail.com>
	<54875DE5.4040507@duif.net>
	<CA+nQOR-0XtXq_c+-MN_TbRXesVKQ8yRrnELMA-8hAceLtJqGiQ@mail.gmail.com>
	<CANaz7mzeQWpgXH+adpLmUr5ZL0=uipv7hGgzA1VLrhVumE07TA@mail.gmail.com>
	<53EFB3B6FE87F844B61F7F30119B0BD0A2DA93F7@EXCSTD01.kristianstad.se>
	<54881460.101@duif.net>
Message-ID: <CANaz7mxro06-qZ=6vKyFa0q5sqEaihp87n6mbDxC2R8jJqhL=g@mail.gmail.com>

Exactly Richard, that would be the expected behaviour.

Regards,

Germ?n

2014-12-10 4:37 GMT-05:00 Richard Duivenvoorde <rdmailings at duif.net>:

> On 10-12-14 10:11, Uggla Henrik wrote:
> > In Linux it is very easy to setup a ramdisk for fast temporal file
> storage.
> >
> > --help really gives the impression that loading Qgis with PostGIS layers
> using the FILE parameter is a breeze. Also, I still doesn't get what this
> "PostGIS extension" mentioned in --help is.
>
> cc'ing to dev list, original thread here:
>
> http://lists.osgeo.org/pipermail/qgis-user/2014-December/030180.html
>
>
> Me neither, best to bring this to the dev list then, to ask which this
> extension is.
>
> And IF we want a FILE parameter work for postgis we could come up with a
> design for that file param and do a feature request to get this
> implemented?
>
> For example, as this works:
>
> l = iface.addVectorLayer('dbname=bag host=localhost port=5432 user=geo
> password=xxx sslmode=disable key=gid estimatedmetadata=true srid=28992
> type=MULTIPOLYGON table="bag8mrt2014"."provincie" (geovlak) sql=',
> "test", "postgres")
>
> this is the actual uri:
>
> 'dbname=bag host=localhost port=5432 user=geo
> password=xxx sslmode=disable key=gid estimatedmetadata=true srid=28992
> type=MULTIPOLYGON table="bag8mrt2014"."provincie" (geovlak) sql='
>
> so maybe prepend that with the provider part:
>
> postgres:'dbname=bag host=localhost port=5432 user=geo
> password=xxx sslmode=disable key=gid estimatedmetadata=true srid=28992
> type=MULTIPOLYGON table="bag8mrt2014"."provincie" (geovlak) sql='
>
> and add a --uri option to QGIS?
>
> qgis --uri postgres:'dbname=bag host=localhost port=5432 user=geo
> password=xxx sslmode=disable key=gid estimatedmetadata=true srid=28992
> type=MULTIPOLYGON table="bag8mrt2014"."provincie" (geovlak) sql='
>
> or something like that?
>
> Regards,
>
> Richard Duivenvoorde
>



-- 
-----------
   |\__
(:>__)(
   |/

Soluciones Geoinform?ticas Libres
http://geotux.tuxfamily.org/
http://twitter.com/GeoTux2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141210/eddcf118/attachment.html>

From mandoluca at gmail.com  Wed Dec 10 09:03:07 2014
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Wed, 10 Dec 2014 18:03:07 +0100
Subject: [Qgis-developer] Problems with refresh canvas after upgrade to 2.6
Message-ID: <CAHmdnV6q1aEfpBX1fjP0Xwd0aby2EsFpzFMOH23QGNyxdr2HXw@mail.gmail.com>

Hi, someone knows why the method self.iface.mapCanvas().refresh() doesn't
work properly after QGis upgrade to 2.6?
I've lost some changelog?

Best regards
Luca
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141210/2753f7e1/attachment-0001.html>

From strk at keybit.net  Wed Dec 10 09:23:40 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 10 Dec 2014 18:23:40 +0100
Subject: [Qgis-developer] Problems with refresh canvas after upgrade to
 2.6
In-Reply-To: <CAHmdnV6q1aEfpBX1fjP0Xwd0aby2EsFpzFMOH23QGNyxdr2HXw@mail.gmail.com>
References: <CAHmdnV6q1aEfpBX1fjP0Xwd0aby2EsFpzFMOH23QGNyxdr2HXw@mail.gmail.com>
Message-ID: <20141210172340.GA1533@localhost>

On Wed, Dec 10, 2014 at 06:03:07PM +0100, Luca Mandolesi wrote:
> Hi, someone knows why the method self.iface.mapCanvas().refresh() doesn't
> work properly after QGis upgrade to 2.6?
> I've lost some changelog?

What do you mean by properly ?

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From wonder.sk at gmail.com  Wed Dec 10 09:41:24 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 11 Dec 2014 00:41:24 +0700
Subject: [Qgis-developer] Problems with refresh canvas after upgrade to
	2.6
In-Reply-To: <CAHmdnV6q1aEfpBX1fjP0Xwd0aby2EsFpzFMOH23QGNyxdr2HXw@mail.gmail.com>
References: <CAHmdnV6q1aEfpBX1fjP0Xwd0aby2EsFpzFMOH23QGNyxdr2HXw@mail.gmail.com>
Message-ID: <CAC2XbFf3P-Gwg=Lb9CQdtBmXM5CCoqAhuDyWTLdfhN9o5=q5Bw@mail.gmail.com>

Hi Luca

On Thu, Dec 11, 2014 at 12:03 AM, Luca Mandolesi <mandoluca at gmail.com> wrote:
> Hi, someone knows why the method self.iface.mapCanvas().refresh() doesn't
> work properly after QGis upgrade to 2.6?
> I've lost some changelog?

Upgrade from what version?

In QGIS 2.4 there were some changes:
http://qgis.org/api/api_break.html

Regards
Martin

From mandoluca at gmail.com  Wed Dec 10 09:42:52 2014
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Wed, 10 Dec 2014 18:42:52 +0100
Subject: [Qgis-developer] Problems with refresh canvas after upgrade to
	2.6
In-Reply-To: <20141210172340.GA1533@localhost>
References: <CAHmdnV6q1aEfpBX1fjP0Xwd0aby2EsFpzFMOH23QGNyxdr2HXw@mail.gmail.com>
	<20141210172340.GA1533@localhost>
Message-ID: <CAHmdnV6a_kYBE-Vn6WTpZEmiXdTWtf16tM7HQuh2E-t5vmfF6A@mail.gmail.com>

Sorry, you're right. The canvas has not been refreshed. I need every time
to do it manually with the refresh button.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141210/02124474/attachment.html>

From mandoluca at gmail.com  Wed Dec 10 09:45:40 2014
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Wed, 10 Dec 2014 18:45:40 +0100
Subject: [Qgis-developer] Problems with refresh canvas after upgrade to
	2.6
In-Reply-To: <CAC2XbFf3P-Gwg=Lb9CQdtBmXM5CCoqAhuDyWTLdfhN9o5=q5Bw@mail.gmail.com>
References: <CAHmdnV6q1aEfpBX1fjP0Xwd0aby2EsFpzFMOH23QGNyxdr2HXw@mail.gmail.com>
	<CAC2XbFf3P-Gwg=Lb9CQdtBmXM5CCoqAhuDyWTLdfhN9o5=q5Bw@mail.gmail.com>
Message-ID: <CAHmdnV7u=i5cKBfO7EwDfToPn8_Mx8avd65JvC3b3y5XSz+E6w@mail.gmail.com>

2014-12-10 18:41 GMT+01:00 Martin Dobias <wonder.sk at gmail.com>:

> Hi Luca
>
> On Thu, Dec 11, 2014 at 12:03 AM, Luca Mandolesi <mandoluca at gmail.com>
> wrote:
> > Hi, someone knows why the method self.iface.mapCanvas().refresh() doesn't
> > work properly after QGis upgrade to 2.6?
> > I've lost some changelog?
>
> Upgrade from what version?
>

>From 2.2 to 2.6.


>
> In QGIS 2.4 there were some changes:
> http://qgis.org/api/api_break.html



Oh,probably my mistake is here. Thanks a lot.

>
>
> Regards
> Martin
>

Luca
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141210/1f1a18dc/attachment.html>

From devquestions2 at gmail.com  Wed Dec 10 11:50:23 2014
From: devquestions2 at gmail.com (devquestions2 at gmail.com)
Date: Wed, 10 Dec 2014 11:50:23 -0800 (PST)
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <54874C34.8040506@duif.net>
References: <1418130985178-5177029.post@n6.nabble.com>
	<5486FD55.5020600@duif.net>
	<1418140146459-5177059.post@n6.nabble.com>
	<54874C34.8040506@duif.net>
Message-ID: <1418241023896-5177312.post@n6.nabble.com>

Yeah, I am trying to use headless application. I was able to overcome the
earlier error, but now i am stuck with a new error message.

"QPixmap: Cannot create a QPixmap when no GUI is being used"
"QPixmap: Cannot create a QPixmap when no GUI is being used"
"QPixmap: Cannot create a QPixmap when no GUI is being used"

Now I am creating QApplication by passing flase for ui mode.
>>app = QgsApplication([], False)

Here is the revised code.

I thought someone should figured this out before.  It is so painful to use
qgis in headless mode !!


import os
import sys

qgisprefix = '/usr'
#qgisprefix='/usr/share/qgis/resources'

# configure paths for QGIS
sys.path.insert(0, qgisprefix+'/share/qgis/python')
sys.path.insert(1, qgisprefix+'/share/qgis/python/plugins')

# disable QGIS debug messages
#os.environ['QGIS_DEBUG'] = '-1'
os.environ['DISPLAY']=""
# import QGIS modules
from qgis.core import *

#from qgis.gui import *

# configure QGIS paths
QgsApplication.setPrefixPath(qgisprefix, False)

# initalise QGIS
QgsApplication.initQgis()

app = QgsApplication([], False)

import processing



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-cannot-connect-to-X-server-on-Ubuntu-tp5177029p5177312.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From matthias.kuhn at gmx.ch  Wed Dec 10 11:52:57 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Wed, 10 Dec 2014 20:52:57 +0100
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <1418241023896-5177312.post@n6.nabble.com>
References: <1418130985178-5177029.post@n6.nabble.com>	<5486FD55.5020600@duif.net>	<1418140146459-5177059.post@n6.nabble.com>	<54874C34.8040506@duif.net>
	<1418241023896-5177312.post@n6.nabble.com>
Message-ID: <5488A499.8050808@gmx.ch>

The tests run on a headless server with xvfb.

So I assume that doing anything with

xvfb-run python yourapp.py

and no messing with display should work perfectly as well.

On 12/10/2014 08:50 PM, devquestions2 at gmail.com wrote:
> Yeah, I am trying to use headless application. I was able to overcome the
> earlier error, but now i am stuck with a new error message.
>
> "QPixmap: Cannot create a QPixmap when no GUI is being used"
> "QPixmap: Cannot create a QPixmap when no GUI is being used"
> "QPixmap: Cannot create a QPixmap when no GUI is being used"
>
> Now I am creating QApplication by passing flase for ui mode.
>>> app = QgsApplication([], False)
> Here is the revised code.
>
> I thought someone should figured this out before.  It is so painful to use
> qgis in headless mode !!
>
>
> import os
> import sys
>
> qgisprefix = '/usr'
> #qgisprefix='/usr/share/qgis/resources'
>
> # configure paths for QGIS
> sys.path.insert(0, qgisprefix+'/share/qgis/python')
> sys.path.insert(1, qgisprefix+'/share/qgis/python/plugins')
>
> # disable QGIS debug messages
> #os.environ['QGIS_DEBUG'] = '-1'
> os.environ['DISPLAY']=""
> # import QGIS modules
> from qgis.core import *
>
> #from qgis.gui import *
>
> # configure QGIS paths
> QgsApplication.setPrefixPath(qgisprefix, False)
>
> # initalise QGIS
> QgsApplication.initQgis()
>
> app = QgsApplication([], False)
>
> import processing
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-cannot-connect-to-X-server-on-Ubuntu-tp5177029p5177312.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From devquestions2 at gmail.com  Wed Dec 10 11:58:20 2014
From: devquestions2 at gmail.com (devquestions2 at gmail.com)
Date: Wed, 10 Dec 2014 11:58:20 -0800 (PST)
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <5488A499.8050808@gmx.ch>
References: <1418130985178-5177029.post@n6.nabble.com>
	<5486FD55.5020600@duif.net>
	<1418140146459-5177059.post@n6.nabble.com>
	<54874C34.8040506@duif.net>
	<1418241023896-5177312.post@n6.nabble.com>
	<5488A499.8050808@gmx.ch>
Message-ID: <1418241500024-5177316.post@n6.nabble.com>

thanks Matthias,

Actually this is what i am trying to do.

i need to calculate wetness index, so i have developed a model in qgis
graphical modeler that invokes grss-saga algorithsm to calculate slope,
wetness index etc.

all i want to do is to run that algorithm in a headless mode. 

So, using processing model is the only way here or there are any other
approaches ?

using xvfb-run  is an option, but it will complicate something else i.e i
want then invoke the scripts via hadoop-mapreduce for parallel execution.





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-cannot-connect-to-X-server-on-Ubuntu-tp5177029p5177316.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From matthias.kuhn at gmx.ch  Wed Dec 10 12:07:40 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Wed, 10 Dec 2014 21:07:40 +0100
Subject: [Qgis-developer] Error : cannot connect to X server on Ubuntu
In-Reply-To: <1418241500024-5177316.post@n6.nabble.com>
References: <1418130985178-5177029.post@n6.nabble.com>	<5486FD55.5020600@duif.net>	<1418140146459-5177059.post@n6.nabble.com>	<54874C34.8040506@duif.net>	<1418241023896-5177312.post@n6.nabble.com>	<5488A499.8050808@gmx.ch>
	<1418241500024-5177316.post@n6.nabble.com>
Message-ID: <5488A80C.8010701@gmx.ch>

I have never run a processing model standalone, so I cannot help there.
I don't know how closely tied this is to GUI related things. It may or
may not work without X. But if you have to create a QgsApplication which
is a QApplication I am pretty sure that you need to have some kind of X
running. So it would be a matter of getting processing to run without
QgsApplication.
How does hadoop-mapreduce work? Is it not possible to spawn one separate
xvfb-run process per map?


On 12/10/2014 08:58 PM, devquestions2 at gmail.com wrote:
> thanks Matthias,
>
> Actually this is what i am trying to do.
>
> i need to calculate wetness index, so i have developed a model in qgis
> graphical modeler that invokes grss-saga algorithsm to calculate slope,
> wetness index etc.
>
> all i want to do is to run that algorithm in a headless mode. 
>
> So, using processing model is the only way here or there are any other
> approaches ?
>
> using xvfb-run  is an option, but it will complicate something else i.e i
> want then invoke the scripts via hadoop-mapreduce for parallel execution.
>
>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Error-cannot-connect-to-X-server-on-Ubuntu-tp5177029p5177316.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From scholten at riseup.net  Wed Dec 10 23:51:43 2014
From: scholten at riseup.net (Daniel Scholten)
Date: Thu, 11 Dec 2014 08:51:43 +0100
Subject: [Qgis-developer] Documentation for QGIS server
In-Reply-To: <5488A80C.8010701@gmx.ch>
References: "\"<1418130985178-5177029.post@n6.nabble.com>	<5486FD55.5020600@duif.net>	<1418140146459-5177059.post@n6.nabble.com>	<54874C34.8040506@duif.net>"
	<1418241023896-5177312.post@n6.nabble.com>" <5488A499.8050808@gmx.ch>
	<1418241500024-5177316.post@n6.nabble.com> <5488A80C.8010701@gmx.ch>
Message-ID: <b0dec310a1c2ffa811a51c254a08e1f5@riseup.net>

Dear QGIS developers,

I want to use QGIS-Server to
* create a WMS and a WFS,
* perform some GIS analysis on-the-fly within my interactive online map 
to dynamically create new layers and
* enable users of my online map to manipulate some stored geodata.

I found some documentation [1,2,3,4,5], but did not achive to install 
QGIS-server successfully locally on my Windows 7 machine. I also did not 
found any API documentation. Can somebody give me a hint where to find 
some more documentation? I am also interested in book recommondations.

Best wishes
Daniel

[1] http://hub.qgis.org/wiki/quantum-gis/QGIS_Server_Tutorial
[2] 
http://qgis-documentation.readthedocs.org/en/latest/server/server.html
[3] http://live.osgeo.org/de/overview/qgis_mapserver_overview.html
[4] 
http://anitagraser.com/2012/04/06/qgis-server-on-windows7-step-by-step/
[5] 
http://linfiniti.com/2010/08/qgis-mapserver-a-wms-server-for-the-masses/

From giohappy at gmail.com  Thu Dec 11 00:44:24 2014
From: giohappy at gmail.com (G. Allegri)
Date: Thu, 11 Dec 2014 09:44:24 +0100
Subject: [Qgis-developer] Documentation for QGIS server
In-Reply-To: <b0dec310a1c2ffa811a51c254a08e1f5@riseup.net>
References: <1418130985178-5177029.post@n6.nabble.com>
	<5486FD55.5020600@duif.net>
	<1418140146459-5177059.post@n6.nabble.com>
	<54874C34.8040506@duif.net>
	<1418241023896-5177312.post@n6.nabble.com>
	<5488A499.8050808@gmx.ch>
	<1418241500024-5177316.post@n6.nabble.com>
	<5488A80C.8010701@gmx.ch>
	<b0dec310a1c2ffa811a51c254a08e1f5@riseup.net>
Message-ID: <CAB4g1=yZ-Amch8ky5XRLK_y_s=jhYObEossN6N-uTY325TUXXQ@mail.gmail.com>

Hi,
as far as I know there'n no more yhen what you already found. The "API" are
the WMS/WFS http requests (+ vendor params). It doesn't have an API like
UMN Mapserver.

What's going wrong with your setup?

giovanni
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141211/2bab4218/attachment.html>

From a.neumann at carto.net  Thu Dec 11 01:47:27 2014
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 11 Dec 2014 10:47:27 +0100
Subject: [Qgis-developer] Documentation for QGIS server
In-Reply-To: <b0dec310a1c2ffa811a51c254a08e1f5@riseup.net>
References: "\"\\\"\\\\\\\"<1418130985178-5177029.post@n6.nabble.com>	<5486FD55.5020600@duif.net>"
	<1418140146459-5177059.post@n6.nabble.com>"
	"<54874C34.8040506@duif.net>\"
	\"" <1418241023896-5177312.post@n6.nabble.com>\"
	<5488A499.8050808@gmx.ch>
	<1418241500024-5177316.post@n6.nabble.com>
	"<5488A80C.8010701@gmx.ch>\""
	<b0dec310a1c2ffa811a51c254a08e1f5@riseup.net>
Message-ID: <6ab9a8314cdcd4d8f703a3af7297dfee@carto.net>

Hi Daniel,

Am 2014-12-11 08:51, schrieb Daniel Scholten:
> Dear QGIS developers,
> 
> I want to use QGIS-Server to
> * create a WMS and a WFS,

This should be possible.

> * perform some GIS analysis on-the-fly within my interactive online
> map to dynamically create new layers and

This does not work out of the box. Will require some serverside 
scripting. QGIS server is not yet a WPS server.

> * enable users of my online map to manipulate some stored geodata.

This depends on your client. QGIS server support WFS edits, but the QGIS 
Web Client does not support editing. I heard that Lizmap supports it. Or 
maybe you have another client.

Andreas

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 02:28:54 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 02:28:54 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
Message-ID: <1418293734357-5177403.post@n6.nabble.com>

Hi all, 
I still try to understand why first QGIS startup is so slow on Windows
platforms, and why it is always slower compared to MacOsx or Linux. 

Process Monitor raises a first very strange behaviour:

qgis-bin.exe tries 172 765 times to do a 'Create File' action in
C:\Windows\CSC\v2.0.6\namespace\NAS01 (NAS01 is my Appdata centralized File
server where qgis profile is moved with --confipath).  Result is 'NAME NOT
FOUND'

Trying to explore  C:\Windows\CSC\v2.0.6\, I don't have access privileges on
that folder even if I am admin on my W7 station. 

That file location seems to be a storage place for offline informations .
See [0]

Any idea? 

I will keep posting tests here for the record. 

Cheers



[0]
https://social.technet.microsoft.com/Forums/windows/en-US/7579e193-d7ad-490e-99ce-9bd1adae0bed/cwindowscscv206temp-folder?forum=w7itprogeneral





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 02:58:44 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 02:58:44 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <1418293734357-5177403.post@n6.nabble.com>
References: <1418293734357-5177403.post@n6.nabble.com>
Message-ID: <1418295524742-5177406.post@n6.nabble.com>

I also have same messages with another location, where are stored other
python plugins (QGIS_PLUGINPATH), this might be related to python compile
process.. 
This startup was surprisingly long: 5 minutes... and not the first one..



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177406.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From wonder.sk at gmail.com  Thu Dec 11 03:09:22 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 11 Dec 2014 18:09:22 +0700
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <1418293734357-5177403.post@n6.nabble.com>
References: <1418293734357-5177403.post@n6.nabble.com>
Message-ID: <CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>

Hi Regis

On Thu, Dec 11, 2014 at 5:28 PM, R?gis Haubourg
<regis.haubourg at eau-adour-garonne.fr> wrote:
> Hi all,
> I still try to understand why first QGIS startup is so slow on Windows
> platforms, and why it is always slower compared to MacOsx or Linux.
>
> Process Monitor raises a first very strange behaviour:
>
> qgis-bin.exe tries 172 765 times to do a 'Create File' action in
> C:\Windows\CSC\v2.0.6\namespace\NAS01 (NAS01 is my Appdata centralized File
> server where qgis profile is moved with --confipath).  Result is 'NAME NOT
> FOUND'

So if I understand correctly, you store all the user-specific data
(what normally goes to ~/.qgis2) on a network drive, is that correct?

Does QGIS take long time to start even if the usual local directory is
used? Maybe the system is not configured well, resulting in long time
to read files from it.

Regards
Martin

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 03:16:06 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 03:16:06 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
References: <1418293734357-5177403.post@n6.nabble.com>
	<CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
Message-ID: <1418296566048-5177411.post@n6.nabble.com>

Hi Martin, 
Agreed, will test now, but I don't remember having had fast startup with
default profile settings.  
I'm uploading monitor logs in case that is usefull to you. Event properties
seem to say that plugins are involved.
Cheers



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177411.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 03:22:48 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 03:22:48 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <1418296566048-5177411.post@n6.nabble.com>
References: <1418293734357-5177403.post@n6.nabble.com>
	<CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
	<1418296566048-5177411.post@n6.nabble.com>
Message-ID: <1418296968885-5177412.post@n6.nabble.com>

Full monitor logs and events properties are uploaded here [0]. See first
event properties for one failed event here [1] and a screen capture (more
readable) here [2]

[0] https://drive.google.com/open?id=0BzatQbprJ-hjTVFRYWUwS2tpSDQ&authuser=0
[1]
https://drive.google.com/open?id=1BsfWFzSkAVSDXtVZxvr-JPbPtxeVdWeo8UJv9NT_xMQ&authuser=0
[2] https://drive.google.com/open?id=0BzatQbprJ-hjQjAzamZPSk1OWjg&authuser=0

Thanks for your help guys

R?gis



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177412.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From wonder.sk at gmail.com  Thu Dec 11 04:17:06 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 11 Dec 2014 19:17:06 +0700
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <1418296968885-5177412.post@n6.nabble.com>
References: <1418293734357-5177403.post@n6.nabble.com>
	<CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
	<1418296566048-5177411.post@n6.nabble.com>
	<1418296968885-5177412.post@n6.nabble.com>
Message-ID: <CAC2XbFcntk-vPLkRub8Sw5UKAysCbfEbORS99iPbKwY2jg8=Yg@mail.gmail.com>

Hi

the screenshot points to reading of QGIS configuration with Qt
routines - then it gets stuck in OS kernel waiting for some kind of
lock. No idea what exactly is going wrong.

Normally the configuration on windows is stored in registry, but the
--configpath option overrides it and uses an .ini file stored in the
given directory. Is that directory actually writable - can you create
files in it? can you see an .ini file there with QGIS configuration?

Again, first try running QGIS without --configpath

Cheers
Martin


On Thu, Dec 11, 2014 at 6:22 PM, R?gis Haubourg
<regis.haubourg at eau-adour-garonne.fr> wrote:
> Full monitor logs and events properties are uploaded here [0]. See first
> event properties for one failed event here [1] and a screen capture (more
> readable) here [2]
>
> [0] https://drive.google.com/open?id=0BzatQbprJ-hjTVFRYWUwS2tpSDQ&authuser=0
> [1]
> https://drive.google.com/open?id=1BsfWFzSkAVSDXtVZxvr-JPbPtxeVdWeo8UJv9NT_xMQ&authuser=0
> [2] https://drive.google.com/open?id=0BzatQbprJ-hjQjAzamZPSk1OWjg&authuser=0
>
> Thanks for your help guys
>
> R?gis
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177412.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From apasotti at gmail.com  Thu Dec 11 04:24:31 2014
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 11 Dec 2014 13:24:31 +0100
Subject: [Qgis-developer] Documentation for QGIS server
In-Reply-To: <6ab9a8314cdcd4d8f703a3af7297dfee@carto.net>
References: <1418130985178-5177029.post@n6.nabble.com>
	<5486FD55.5020600@duif.net>
	<1418140146459-5177059.post@n6.nabble.com>
	<54874C34.8040506@duif.net>
	<1418241023896-5177312.post@n6.nabble.com>
	<5488A499.8050808@gmx.ch>
	<1418241500024-5177316.post@n6.nabble.com>
	<5488A80C.8010701@gmx.ch>
	<b0dec310a1c2ffa811a51c254a08e1f5@riseup.net>
	<6ab9a8314cdcd4d8f703a3af7297dfee@carto.net>
Message-ID: <CAL5Q670TmoM=ahQe0rc4eyzvMPwJ6kY2C=V_C-RB-kf+AWpqBQ@mail.gmail.com>

2014-12-11 10:47 GMT+01:00 Andreas Neumann <a.neumann at carto.net>:
> Hi Daniel,
>
> Am 2014-12-11 08:51, schrieb Daniel Scholten:
>>
>> Dear QGIS developers,
>>
>> I want to use QGIS-Server to
>> * create a WMS and a WFS,
>
>
> This should be possible.
>
>> * perform some GIS analysis on-the-fly within my interactive online
>> map to dynamically create new layers and
>
>
> This does not work out of the box. Will require some serverside scripting.
> QGIS server is not yet a WPS server.
>
>> * enable users of my online map to manipulate some stored geodata.
>
>

Hi,

For server-side scripting, I would suggest you to check out the new
API for QGIS server Python plugins (I think it's only available in
master).

At the moment the documentation is still rare (I'm slowly working to
improve it).

By now you can start from here:

http://www.itopen.it/qgis/serverplugins/api/
https://github.com/elpaso/qgis-helloserver
http://www.itopen.it/2014/11/27/plugin-python-per-qgis-server/


-- 
Alessandro Pasotti
w3:   www.itopen.it

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 04:38:33 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 04:38:33 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <CAC2XbFcntk-vPLkRub8Sw5UKAysCbfEbORS99iPbKwY2jg8=Yg@mail.gmail.com>
References: <1418293734357-5177403.post@n6.nabble.com>
	<CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
	<1418296566048-5177411.post@n6.nabble.com>
	<1418296968885-5177412.post@n6.nabble.com>
	<CAC2XbFcntk-vPLkRub8Sw5UKAysCbfEbORS99iPbKwY2jg8=Yg@mail.gmail.com>
Message-ID: <1418301513526-5177429.post@n6.nabble.com>

Yes ini files are there and writeable, I manage them without any problem. 
I start tests with classical config now. 
 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177429.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 04:47:36 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 04:47:36 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <1418301513526-5177429.post@n6.nabble.com>
References: <1418293734357-5177403.post@n6.nabble.com>
	<CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
	<1418296566048-5177411.post@n6.nabble.com>
	<1418296968885-5177412.post@n6.nabble.com>
	<CAC2XbFcntk-vPLkRub8Sw5UKAysCbfEbORS99iPbKwY2jg8=Yg@mail.gmail.com>
	<1418301513526-5177429.post@n6.nabble.com>
Message-ID: <1418302056415-5177430.post@n6.nabble.com>

You're right Martin, 
not using --configpath option is fast (5 seconds). 
I tested also PLUGIN_PATH option, and there is no problem with it.

What can I do next to narrow down the issue?

R?gis



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177430.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 04:48:05 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 04:48:05 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <1418302056415-5177430.post@n6.nabble.com>
References: <1418293734357-5177403.post@n6.nabble.com>
	<CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
	<1418296566048-5177411.post@n6.nabble.com>
	<1418296968885-5177412.post@n6.nabble.com>
	<CAC2XbFcntk-vPLkRub8Sw5UKAysCbfEbORS99iPbKwY2jg8=Yg@mail.gmail.com>
	<1418301513526-5177429.post@n6.nabble.com>
	<1418302056415-5177430.post@n6.nabble.com>
Message-ID: <1418302085705-5177431.post@n6.nabble.com>

And I forgot, All creation file failing event disappeared..



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177431.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 05:06:26 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 05:06:26 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <1418302085705-5177431.post@n6.nabble.com>
References: <1418293734357-5177403.post@n6.nabble.com>
	<CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
	<1418296566048-5177411.post@n6.nabble.com>
	<1418296968885-5177412.post@n6.nabble.com>
	<CAC2XbFcntk-vPLkRub8Sw5UKAysCbfEbORS99iPbKwY2jg8=Yg@mail.gmail.com>
	<1418301513526-5177429.post@n6.nabble.com>
	<1418302056415-5177430.post@n6.nabble.com>
	<1418302085705-5177431.post@n6.nabble.com>
Message-ID: <1418303186298-5177440.post@n6.nabble.com>

Just in case I missed something, I copied all my plugins that where in remote
profiles and QGIS_PLUGINPATH folder. I have many plugins parsing xml datas..
No problem, that only take 10 seconds more to load. 

However, I noticed doing this that plugin installer tool is reactive, when
it is extremly slow with -- configpath options.  
It is slow to open, and slow each time I check a plugin or just try to read
plugin's informations. 

R?gis



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177440.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From regis.haubourg at eau-adour-garonne.fr  Thu Dec 11 06:30:40 2014
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 11 Dec 2014 06:30:40 -0800 (PST)
Subject: [Qgis-developer] QGIS slow startup on windows
In-Reply-To: <1418303186298-5177440.post@n6.nabble.com>
References: <1418293734357-5177403.post@n6.nabble.com>
	<CAC2XbFe6Fpr2j32xJCkYOKJTe49ceiDwWUbJPyg6L0eM3Vz5Og@mail.gmail.com>
	<1418296566048-5177411.post@n6.nabble.com>
	<1418296968885-5177412.post@n6.nabble.com>
	<CAC2XbFcntk-vPLkRub8Sw5UKAysCbfEbORS99iPbKwY2jg8=Yg@mail.gmail.com>
	<1418301513526-5177429.post@n6.nabble.com>
	<1418302056415-5177430.post@n6.nabble.com>
	<1418302085705-5177431.post@n6.nabble.com>
	<1418303186298-5177440.post@n6.nabble.com>
Message-ID: <1418308240456-5177457.post@n6.nabble.com>

ticket created here :http://hub.qgis.org/issues/11845
  http://hub.qgis.org/issues/11845 <http://hub.qgis.org/issues/11845>  



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/QGIS-slow-startup-on-windows-tp5177403p5177457.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From strk at keybit.net  Thu Dec 11 10:10:43 2014
From: strk at keybit.net (Sandro Santilli)
Date: Thu, 11 Dec 2014 19:10:43 +0100
Subject: [Qgis-developer] False failures in the testsuite
Message-ID: <20141211181043.GA7088@localhost>

Once again I'm facing testsuite failures from a branch with NOTHING
effectively changed. These are the changes in the branch:

  https://github.com/qgis/QGIS/pull/1729/files

Can you spot a real difference ?

And this is the corresponding travis build:

  https://travis-ci.org/qgis/QGIS/builds/43741928

Before orfeo dash was reset (does it happen daily?)
I could see one-pixel-border-line differences in some
labels test, which I've seen before while working on the
core rotation support.

As once again I cannot see what difference could my change introduce,
can it be that the tests are suffering from some code-independent
glitches making them unstable ? Could it maybe be threading ?
Or unclearn builds from travis ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From even.rouault at spatialys.com  Thu Dec 11 10:36:46 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 11 Dec 2014 19:36:46 +0100
Subject: [Qgis-developer] False failures in the testsuite
In-Reply-To: <20141211181043.GA7088@localhost>
References: <20141211181043.GA7088@localhost>
Message-ID: <201412111936.46544.even.rouault@spatialys.com>

> Or unclearn builds from travis ?

Travis starts a fresh snapshot of a VM for each build, so seems impossible.

What about uninitialized memory isssues. Does the test suite run cleanly under 
Valgrind ?

> 
> --strk;
> 
>  ()  ASCII ribbon campaign  --  Keep it simple !
>  /\  http://strk.keybit.net/rants/ascii_mails.txt
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nyall.dawson at gmail.com  Thu Dec 11 10:54:56 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 12 Dec 2014 05:54:56 +1100
Subject: [Qgis-developer] False failures in the testsuite
In-Reply-To: <20141211181043.GA7088@localhost>
References: <20141211181043.GA7088@localhost>
Message-ID: <CAB28AshxBnEQqCpQu62eX-uBxwAmvDcVOBt3=XQb3pq3TmBurA@mail.gmail.com>

On 12 Dec 2014 5:11 am, "Sandro Santilli" <strk at keybit.net> wrote:
>
> Once again I'm facing testsuite failures from a branch with NOTHING
> effectively changed. These are the changes in the branch:
>
>   https://github.com/qgis/QGIS/pull/1729/files
>
>
> As once again I cannot see what difference could my change introduce,
> can it be that the tests are suffering from some code-independent
> glitches making them unstable ? Could it maybe be threading ?
> Or unclearn builds from travis ?
>
>

Check the Travis build logs. The failure started with 7f8006f. The commit
message explains what is happening - a fix previously introduced was found
to cause some serious issues so was reverted. As a consequence the original
bug the test was designed to detect has stated failing again. It's a
correct failure, and is now waiting on me finding a better fix than the one
that was reverted...

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141212/52694100/attachment.html>

From tomkralidis at gmail.com  Thu Dec 11 11:06:02 2014
From: tomkralidis at gmail.com (Tom Kralidis)
Date: Thu, 11 Dec 2014 14:06:02 -0500
Subject: [Qgis-developer] MetaSearch core merge test failures
Message-ID: <CAFWXLWXCE+E79WUoii7vVkVbvkTu2ZYjzxBoYJZoAU7g6oZrMQ@mail.gmail.com>

As part of merging MetaSearch into core QGIS I have issued the following PR:

https://github.com/qgis/QGIS/pull/1711

As part of the PR there is a rudimentary test in
https://github.com/geopython/QGIS/blob/MetaSearch-merge-core/tests/src/python/test_qgsmetasearch.py
which serves as baseline.

You can see in https://github.com/geopython/QGIS/blob/MetaSearch-merge-core/tests/src/python/test_qgsmetasearch.py#L38-L43
that there is some brute force pathing to load the plugin.

When running locally (via xvfb-run ctest -V -R MetaSearch) I'm getting
errors like:

118: ERROR: test_plugin_metadata (__main__.TestQgsMetaSearch)
118: ----------------------------------------------------------------------
118: Traceback (most recent call last):
118:   File "/home/tkralidi/QGIS/QGIS/tests/src/python/test_qgsmetasearch.py",
line 43, in setUp
118:     self.plugin = MetaSearch.classFactory(IFACE)
118:   File "/home/tkralidi/QGIS/QGIS/build/output/python//plugins/MetaSearch/__init__.py",
line 32, in classFactory
118:     return MetaSearchPlugin(iface)
118:   File "/home/tkralidi/QGIS/QGIS/build/output/python//plugins/MetaSearch/plugin.py",
line 53, in __init__
118:     locale_name = QSettings().value("locale/userLocale")[0:2]
118: TypeError: 'QVariant' object has no attribute '__getitem__'
118:
118: ----------------------------------------------------------------------
118: Ran 1 test in 0.578s

At this point I am getting totally different errors on travis-ci
(https://travis-ci.org/qgis/QGIS/builds/43747908), so I'm not sure
which way to debug.

Are there any examples of how to successfully load a Python plugin
from within a test script?

Thanks

..Tom

From strk at keybit.net  Thu Dec 11 13:35:40 2014
From: strk at keybit.net (Sandro Santilli)
Date: Thu, 11 Dec 2014 22:35:40 +0100
Subject: [Qgis-developer] False failures in the testsuite
In-Reply-To: <CAB28AshxBnEQqCpQu62eX-uBxwAmvDcVOBt3=XQb3pq3TmBurA@mail.gmail.com>
References: <20141211181043.GA7088@localhost>
	<CAB28AshxBnEQqCpQu62eX-uBxwAmvDcVOBt3=XQb3pq3TmBurA@mail.gmail.com>
Message-ID: <20141211213540.GB4551@localhost>

On Fri, Dec 12, 2014 at 05:54:56AM +1100, Nyall Dawson wrote:
> On 12 Dec 2014 5:11 am, "Sandro Santilli" <strk at keybit.net> wrote:
> >
> > Once again I'm facing testsuite failures from a branch with NOTHING
> > effectively changed. These are the changes in the branch:
> >
> >   https://github.com/qgis/QGIS/pull/1729/files
> >
> >
> > As once again I cannot see what difference could my change introduce,
> > can it be that the tests are suffering from some code-independent
> > glitches making them unstable ? Could it maybe be threading ?
> > Or unclearn builds from travis ?
> 
> Check the Travis build logs. The failure started with 7f8006f. The commit

That commit is not in my branch, so shouldn't be that one.

> message explains what is happening - a fix previously introduced was found
> to cause some serious issues so was reverted. As a consequence the original
> bug the test was designed to detect has stated failing again. It's a
> correct failure, and is now waiting on me finding a better fix than the one
> that was reverted...

I hope that happens quickly as having a non-succeeding master causes
a lot of confusion for those willing to ensure changes do not introduce
regressions. Once master passes again I'll happily rebase there to try
again.

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Thu Dec 11 13:51:44 2014
From: strk at keybit.net (Sandro Santilli)
Date: Thu, 11 Dec 2014 22:51:44 +0100
Subject: [Qgis-developer] False failures in the testsuite
In-Reply-To: <201412111936.46544.even.rouault@spatialys.com>
References: <20141211181043.GA7088@localhost>
	<201412111936.46544.even.rouault@spatialys.com>
Message-ID: <20141211215144.GC4551@localhost>

On Thu, Dec 11, 2014 at 07:36:46PM +0100, Even Rouault wrote:
> > Or unclearn builds from travis ?
> 
> Travis starts a fresh snapshot of a VM for each build, so seems impossible.
> 
> What about uninitialized memory isssues. Does the test suite run cleanly under 
> Valgrind ?

Bingo.
Extract from valgrind output/bin/qgis_atlascompositiontest:

==8089== Conditional jump or move depends on uninitialised value(s)
==8089==    at 0x59319B6: QgsDistanceArea::computeAreaInit() (qgsdistancearea.cpp:810)
==8089==    by 0x592CC08: QgsDistanceArea::_copy(QgsDistanceArea const&) (qgsdistancearea.cpp:84)
==8089==    by 0x592CABD: QgsDistanceArea::QgsDistanceArea(QgsDistanceArea const&) (qgsdistancearea.cpp:54)
==8089==    by 0x594D391: QgsExpression::setGeomCalculator(QgsDistanceArea const&) (qgsexpression.cpp:1944)
==8089==    by 0x594DA7E: QgsExpression::replaceExpressionText(QString const&, QgsFeature const*, QgsVectorLayer*, QMap<QString, QVariant> const*, QgsDistanceArea const*) (qgsexpression.cpp:2042)
==8089==    by 0x5B05BEB: QgsComposerLabel::displayText() const (qgscomposerlabel.cpp:282)
==8089==    by 0x5B06082: QgsComposerLabel::adjustSizeToText() (qgscomposerlabel.cpp:336)
==8089==    by 0x40D6DD: TestQgsAtlasComposition::autoscale_render() (testqgsatlascomposition.cpp:220)
==8089==    by 0x40FBF6: TestQgsAtlasComposition::qt_static_metacall(QObject*, QMetaObject::Call, int, void**) (testqgsatlascomposition.moc:75)
==8089==    by 0x4FBC907: QMetaMethod::invoke(QObject*, Qt::ConnectionType, QGenericReturnArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument) const (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.6)
==8089==    by 0x4FBEDC1: QMetaObject::invokeMethod(QObject*, char const*, Qt::ConnectionType, QGenericReturnArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument, QGenericArgument) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.6)
==8089==    by 0x5327FBE: ??? (in /usr/lib/x86_64-linux-gnu/libQtTest.so.4.8.6)

Filed as a ticket here: http://hub.qgis.org/issues/11848

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From veigacamargo at gmail.com  Thu Dec 11 20:21:57 2014
From: veigacamargo at gmail.com (Pedro Camargo)
Date: Thu, 11 Dec 2014 21:21:57 -0700
Subject: [Qgis-developer] Reading a new type of file natively in QGIS
Message-ID: <CAP=p+Ysv=tkxB7Jo+xNunmoqNG3+9_2zi1USL0Ro9GQL7tfJGw@mail.gmail.com>

Hi group,
                During my discussions with people from the transportation
modeling world, some people pointed out a few features that would be nice
to have in order to use QGIS more intensively by our group.

                The most important issue, however, was the possibility of
open matrices in a very efficient way (reading matrices that are
10.000x10.000 in dbf format means reading 10e8 lines, which takes a VERY
long time and defeats the purpose of using QGIS for some things.

                A very good alternative would be using an open source
format from the project "open model data"  (
https://sites.google.com/site/openmodeldata/) which is based on HDF5.

                I see that QGIS can already open raster data in HDF5
format, but in this case, the data would be a matrix with indices and all.

               I regret to say that my programming skills, specially in
C/C++ are not nearly good enough to evaluate the effort that it would take
include such support and have, inside QGIS, a possibility of viewing such
matrices, which would allow people from the transportation world (and I am
the first volunteer) to develop the necessary plugins to manipulate the
matrices and generate the commonly used statistics.

              Can anybody tell me what type of effort it would take and if
it is at all of interest of the QGIS community?

Thanks a lot,

Pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141211/fb928a66/attachment.html>

From scholten at riseup.net  Fri Dec 12 01:16:00 2014
From: scholten at riseup.net (Daniel Scholten)
Date: Fri, 12 Dec 2014 10:16:00 +0100
Subject: [Qgis-developer] Documentation for QGIS server
In-Reply-To: <CAL5Q670TmoM=ahQe0rc4eyzvMPwJ6kY2C=V_C-RB-kf+AWpqBQ@mail.gmail.com>
References: <1418130985178-5177029.post@n6.nabble.com>
	<5486FD55.5020600@duif.net> <1418140146459-5177059.post@n6.nabble.com>
	<54874C34.8040506@duif.net> <1418241023896-5177312.post@n6.nabble.com>
	<5488A499.8050808@gmx.ch> <1418241500024-5177316.post@n6.nabble.com>
	<5488A80C.8010701@gmx.ch> <b0dec310a1c2ffa811a51c254a08e1f5@riseup.net>
	<6ab9a8314cdcd4d8f703a3af7297dfee@carto.net>
	<CAL5Q670TmoM=ahQe0rc4eyzvMPwJ6kY2C=V_C-RB-kf+AWpqBQ@mail.gmail.com>
Message-ID: <168d2869fb7df169d2e000bb7df06c82@riseup.net>

Thanks Giovanni, Andreas and Alessandro for your help!

I got the QGIS-Server working now and have an idea about how I can do 
what I want.

Best wishes
Daniel


On 2014-12-11 13:24, Alessandro Pasotti wrote:
> 2014-12-11 10:47 GMT+01:00 Andreas Neumann <a.neumann at carto.net>:
>> Hi Daniel,
>> 
>> Am 2014-12-11 08:51, schrieb Daniel Scholten:
>>> 
>>> Dear QGIS developers,
>>> 
>>> I want to use QGIS-Server to
>>> * create a WMS and a WFS,
>> 
>> 
>> This should be possible.
>> 
>>> * perform some GIS analysis on-the-fly within my interactive online
>>> map to dynamically create new layers and
>> 
>> 
>> This does not work out of the box. Will require some serverside 
>> scripting.
>> QGIS server is not yet a WPS server.
>> 
>>> * enable users of my online map to manipulate some stored geodata.
>> 
>> 
> 
> Hi,
> 
> For server-side scripting, I would suggest you to check out the new
> API for QGIS server Python plugins (I think it's only available in
> master).
> 
> At the moment the documentation is still rare (I'm slowly working to
> improve it).
> 
> By now you can start from here:
> 
> http://www.itopen.it/qgis/serverplugins/api/
> https://github.com/elpaso/qgis-helloserver
> http://www.itopen.it/2014/11/27/plugin-python-per-qgis-server/

From pi_ml at sourcepole.com  Fri Dec 12 02:30:36 2014
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Fri, 12 Dec 2014 11:30:36 +0100
Subject: [Qgis-developer] Map rotation landed in master
In-Reply-To: <20141207160555.GB11017@localhost>
References: <20141207160555.GB11017@localhost>
Message-ID: <177300274.HNPZIQQFSp@robbe2>

Hi Sandro,

Am Sonntag, 7. Dezember 2014, 17.05:55 schrieb Sandro Santilli:
> This mail to notify that the core map rotation support is now in master.
> 

Great addition!

> 
> Not all parts of QGIS play nicely with rotation yet, but hopefully
> this will be a good basis to continue development toward full support.
> 
> In particular, label placement is not fully rotation aware.
> Horizontal labels are still horizontal, no matter map rotation, but
> "parallel" ones are parallel to the original (not rotated) lines instead.
> Placement of labels is also weird when rotation is present.
> 
> Also grid and north arrow are not respecting rotation, and the zoom-by-rect
> rubberband (the zoom window) looks funny when the map is rotated.

How should PluginLayers handle map rotation? The OpenLayers plugin won't 
rotate Google Maps layers, because it's against Google's TOS. Will you 
automatically disable map rotation in presence of a PluginLayer or will there 
be a API method to disable it?
Will digitizing plugins ([1], [2]) still work with rotated maps? 
Or is there an architecture document (or a QEP) to understand the consequences 
for plugins and other parts of QGIS (e.g. globe)?

Regards
Pirmin

[1] http://plugins.qgis.org/plugins/tags/digitizing/
[2] http://plugins.qgis.org/plugins/tags/cad/

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com


From strk at keybit.net  Fri Dec 12 02:38:24 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 12 Dec 2014 11:38:24 +0100
Subject: [Qgis-developer] Map rotation landed in master
In-Reply-To: <177300274.HNPZIQQFSp@robbe2>
References: <20141207160555.GB11017@localhost>
 <177300274.HNPZIQQFSp@robbe2>
Message-ID: <20141212103824.GA6323@localhost>

On Fri, Dec 12, 2014 at 11:30:36AM +0100, Pirmin Kalberer wrote:
> Hi Sandro,
> 
> Am Sonntag, 7. Dezember 2014, 17.05:55 schrieb Sandro Santilli:
> > This mail to notify that the core map rotation support is now in master.
> > 
> 
> Great addition!
> 
> > 
> > Not all parts of QGIS play nicely with rotation yet, but hopefully
> > this will be a good basis to continue development toward full support.
> > 
> > In particular, label placement is not fully rotation aware.
> > Horizontal labels are still horizontal, no matter map rotation, but
> > "parallel" ones are parallel to the original (not rotated) lines instead.
> > Placement of labels is also weird when rotation is present.
> > 
> > Also grid and north arrow are not respecting rotation, and the zoom-by-rect
> > rubberband (the zoom window) looks funny when the map is rotated.
> 
> How should PluginLayers handle map rotation? The OpenLayers plugin won't 
> rotate Google Maps layers, because it's against Google's TOS. Will you 
> automatically disable map rotation in presence of a PluginLayer or will there 
> be a API method to disable it?

You can disable it with QgsMapCanvas::setRotation(0)
The rotationChanged signal is emitted for you to force 0

> Will digitizing plugins ([1], [2]) still work with rotated maps? 

Core editor work fine as far as I can tell. I hadn't tried external ones.

> Or is there an architecture document (or a QEP) to understand the consequences 
> for plugins and other parts of QGIS (e.g. globe)?

No QEP, sorry.

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From cavallini at faunalia.it  Fri Dec 12 03:14:53 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 12 Dec 2014 12:14:53 +0100
Subject: [Qgis-developer] Filtering and editing data
Message-ID: <548ACE2D.1010206@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
We noticed that when filtering shp, the layer is not editable, whereas
a spatialite can be edited if loaded through its native provider, and
only the records which are filtered in are actually edited (e.g. with
the field calculator). If a SL layer is loaded through GDAL, its
bahaviour is the same as shp.
Is this a known limitation of the GDAL provider?
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSKziwACgkQ/NedwLUzIr7gDgCfRYxgHrsYDudESU80szXpB3zn
XHIAn39b6N1tk8Y+cgMeLWMI+hrPRR+D
=LJmZ
-----END PGP SIGNATURE-----

From zoltans at geograph.co.za  Fri Dec 12 06:21:15 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri, 12 Dec 2014 16:21:15 +0200
Subject: [Qgis-developer] EPSG codes
Message-ID: <548AF9DB.1020109@geograph.co.za>

Hi,
I have a fresh install of QGIS 2.6 on ubuntu 14.04.1 desktop from the 
qgis.org/debian trusty main repository (installed a day or two ago)
When I set the 'filter' on Project->Properties->CRS to 6148 nothing 
comes up.

On my Windows based QGIS 2.6,   ETRS89 / NTM zone 8  EPSG:6148 comes up.

Where/how do I get the EPSG codes updated on the ubuntu install?


Thanks in advance,
Zoltan




-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From andre+joost at nurfuerspam.de  Fri Dec 12 07:28:36 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 12 Dec 2014 16:28:36 +0100
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548AF9DB.1020109@geograph.co.za>
References: <548AF9DB.1020109@geograph.co.za>
Message-ID: <548B09A4.30301@nurfuerspam.de>

Am 12.12.2014 um 15:21 schrieb Zoltan Szecsei:
> Hi,
> I have a fresh install of QGIS 2.6 on ubuntu 14.04.1 desktop from the
> qgis.org/debian trusty main repository (installed a day or two ago)
> When I set the 'filter' on Project->Properties->CRS to 6148 nothing
> comes up.
>
> On my Windows based QGIS 2.6,   ETRS89 / NTM zone 8  EPSG:6148 comes up.
>
> Where/how do I get the EPSG codes updated on the ubuntu install?

The CRS list should get synchronized at the end of the installation. If 
not, your installation is broken at some point. I remember that I had to 
install python-qgis manually when updating to 2.6.1 on Ubuntu, and the 
sync was done with that (and EPSG:6148 is present).

HTH,
Andr? Joost



From zoltans at geograph.co.za  Fri Dec 12 07:41:34 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri, 12 Dec 2014 17:41:34 +0200
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548B09A4.30301@nurfuerspam.de>
References: <548AF9DB.1020109@geograph.co.za> <548B09A4.30301@nurfuerspam.de>
Message-ID: <548B0CAE.8080202@geograph.co.za>

On 2014/12/12 17:28, Andre Joost wrote:
> Am 12.12.2014 um 15:21 schrieb Zoltan Szecsei:
>> Hi,
>> I have a fresh install of QGIS 2.6 on ubuntu 14.04.1 desktop from the
>> qgis.org/debian trusty main repository (installed a day or two ago)
>> When I set the 'filter' on Project->Properties->CRS to 6148 nothing
>> comes up.
>>
>> On my Windows based QGIS 2.6,   ETRS89 / NTM zone 8  EPSG:6148 comes up.
>>
>> Where/how do I get the EPSG codes updated on the ubuntu install?
>
> The CRS list should get synchronized at the end of the installation. 
> If not, your installation is broken at some point. I remember that I 
> had to install python-qgis manually when updating to 2.6.1 on Ubuntu, 
> and the sync was done with that (and EPSG:6148 is present).
>
> HTH,
> Andr? Joost

Hmmm... I remember I got and older version when I had the ubuntugis 
repository, so I uninstalled that and then apt-get installed from the 
qgis.org repository.

Is there a definitive list of what to install?
I think I just did:
python-software-properties
qgis
python-qgis

Thanks,
Z

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From andre+joost at nurfuerspam.de  Fri Dec 12 08:09:04 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 12 Dec 2014 17:09:04 +0100
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548B0CAE.8080202@geograph.co.za>
References: <548AF9DB.1020109@geograph.co.za> <548B09A4.30301@nurfuerspam.de>
	<548B0CAE.8080202@geograph.co.za>
Message-ID: <548B1320.3000608@nurfuerspam.de>

Am 12.12.2014 um 16:41 schrieb Zoltan Szecsei:
> On 2014/12/12 17:28, Andre Joost wrote:
>> Am 12.12.2014 um 15:21 schrieb Zoltan Szecsei:
>>> Hi,
>>> I have a fresh install of QGIS 2.6 on ubuntu 14.04.1 desktop from the
>>> qgis.org/debian trusty main repository (installed a day or two ago)
>>> When I set the 'filter' on Project->Properties->CRS to 6148 nothing
>>> comes up.
>>>
>>> On my Windows based QGIS 2.6,   ETRS89 / NTM zone 8  EPSG:6148 comes up.
>>>
>>> Where/how do I get the EPSG codes updated on the ubuntu install?
>>
>> The CRS list should get synchronized at the end of the installation.
>> If not, your installation is broken at some point. I remember that I
>> had to install python-qgis manually when updating to 2.6.1 on Ubuntu,
>> and the sync was done with that (and EPSG:6148 is present).
>>
>> HTH,
>> Andr? Joost
>
> Hmmm... I remember I got and older version when I had the ubuntugis
> repository, so I uninstalled that and then apt-get installed from the
> qgis.org repository.

You should look for ubuntugis-unstable, 2.6.1 is from Sun, 30 Nov 2014 
22:07:45 +0100

>
> Is there a definitive list of what to install?
> I think I just did:
> python-software-properties
> qgis
> python-qgis

I just did sudo apt-get update and apt-get upgrade, and saw that the 
qgis packages were held back. So I forced the install of qgis and 
python-qgis manually, and everything worked again.

In Windows I know where to find the postinstall.log, I'm not sure where 
it is logged on Ubuntu.

HTH,
Andr? Joost


From zoltans at geograph.co.za  Fri Dec 12 08:12:45 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri, 12 Dec 2014 18:12:45 +0200
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548B1320.3000608@nurfuerspam.de>
References: <548AF9DB.1020109@geograph.co.za>
	<548B09A4.30301@nurfuerspam.de>	<548B0CAE.8080202@geograph.co.za>
	<548B1320.3000608@nurfuerspam.de>
Message-ID: <548B13FD.9050709@geograph.co.za>

On 2014/12/12 18:09, Andre Joost wrote:
>
>> Hmmm... I remember I got and older version when I had the ubuntugis
>> repository, so I uninstalled that and then apt-get installed from the
>> qgis.org repository.
>
> You should look for ubuntugis-unstable, 2.6.1 is from Sun, 30 Nov 2014 
> 22:07:45 +0100

OK - cool - thanks.
Regards,
Zoltan
>
>>
>> Is there a definitive list of what to install?
>> I think I just did:
>> python-software-properties
>> qgis
>> python-qgis
>
> I just did sudo apt-get update and apt-get upgrade, and saw that the 
> qgis packages were held back. So I forced the install of qgis and 
> python-qgis manually, and everything worked again.
>
> In Windows I know where to find the postinstall.log, I'm not sure 
> where it is logged on Ubuntu.
>
> HTH,
> Andr? Joost
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From tsw.web at gmail.com  Fri Dec 12 09:05:47 2014
From: tsw.web at gmail.com (Trevor Wiens)
Date: Fri, 12 Dec 2014 10:05:47 -0700
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548B13FD.9050709@geograph.co.za>
References: <548AF9DB.1020109@geograph.co.za> <548B09A4.30301@nurfuerspam.de>
	<548B0CAE.8080202@geograph.co.za> <548B1320.3000608@nurfuerspam.de>
	<548B13FD.9050709@geograph.co.za>
Message-ID: <CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>

I have two debian Wheezy systems. One with 2.4 and the other with 2.6.1.

In the 2.4 instance 6148 is present and in the 2.6.1 instance it is not

Runing /usr/lib/qgis/crssync does not solve the issue. It updates various
files including

/usr/share/qgis/resources/srs.db

On the box with 2.4 there is a table called tbl_srs which has 5630 records
including one for EPSG:6148. On the 2.6.1 box this same table has 5325
records and no entry for EPSG:6148.

It is unclear which package provides this database that does seem to be the
source of the issue.

Hope that helps.

TSW


On Fri, Dec 12, 2014 at 9:12 AM, Zoltan Szecsei <zoltans at geograph.co.za>
wrote:
>
> On 2014/12/12 18:09, Andre Joost wrote:
>
>>
>>  Hmmm... I remember I got and older version when I had the ubuntugis
>>> repository, so I uninstalled that and then apt-get installed from the
>>> qgis.org repository.
>>>
>>
>> You should look for ubuntugis-unstable, 2.6.1 is from Sun, 30 Nov 2014
>> 22:07:45 +0100
>>
>
> OK - cool - thanks.
> Regards,
> Zoltan
>
>>
>>
>>> Is there a definitive list of what to install?
>>> I think I just did:
>>> python-software-properties
>>> qgis
>>> python-qgis
>>>
>>
>> I just did sudo apt-get update and apt-get upgrade, and saw that the qgis
>> packages were held back. So I forced the install of qgis and python-qgis
>> manually, and everything worked again.
>>
>> In Windows I know where to find the postinstall.log, I'm not sure where
>> it is logged on Ubuntu.
>>
>> HTH,
>> Andr? Joost
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> GIS and Photogrammetric Services
>
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> Mobile: +27-83-6004028
> Fax:    +27-86-6115323     www.geograph.co.za
> ===========================================
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Trevor Wiens
Apropos Information Systems
aproposinfosystems.com
Calgary, Alberta
Ph. 403-973-5901
Fax 780-666-4580
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141212/fedad844/attachment.html>

From andre+joost at nurfuerspam.de  Fri Dec 12 11:33:59 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 12 Dec 2014 20:33:59 +0100
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>
References: <548AF9DB.1020109@geograph.co.za>
	<548B09A4.30301@nurfuerspam.de>	<548B0CAE.8080202@geograph.co.za>
	<548B1320.3000608@nurfuerspam.de>	<548B13FD.9050709@geograph.co.za>
	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>
Message-ID: <548B4327.9000306@nurfuerspam.de>

Am 12.12.2014 um 18:05 schrieb Trevor Wiens:
> I have two debian Wheezy systems. One with 2.4 and the other with 2.6.1.
>
> In the 2.4 instance 6148 is present and in the 2.6.1 instance it is not
>
> Runing /usr/lib/qgis/crssync does not solve the issue. It updates various
> files including
>
> /usr/share/qgis/resources/srs.db
>
> On the box with 2.4 there is a table called tbl_srs which has 5630 records
> including one for EPSG:6148. On the 2.6.1 box this same table has 5325
> records and no entry for EPSG:6148.
>
> It is unclear which package provides this database that does seem to be the
> source of the issue.
>

On Windows, EPSG:6148 is defined originally in /share/gdal/compdcs.csv.
Under Ubuntu I find this file in /usr/share/gdal/1.11/.

If crssync finds this file, the definition should go into the srs.db as
well.

HTH,
Andr? Joost


From tsw.web at gmail.com  Fri Dec 12 12:29:19 2014
From: tsw.web at gmail.com (Trevor Wiens)
Date: Fri, 12 Dec 2014 13:29:19 -0700
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548B4327.9000306@nurfuerspam.de>
References: <548AF9DB.1020109@geograph.co.za> <548B09A4.30301@nurfuerspam.de>
	<548B0CAE.8080202@geograph.co.za> <548B1320.3000608@nurfuerspam.de>
	<548B13FD.9050709@geograph.co.za>
	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>
	<548B4327.9000306@nurfuerspam.de>
Message-ID: <CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>

On both boxes, the file compdcs.csv does not contain a record for
EPSG:6148. The gdal version is 1.9, not 1.11 for Wheezy and I assume the
same for Ubuntu.

EPSG:6148 is not listed on both boxes in any files in /usr/share/gdal/1.9/
on both of my machines (one with QGIS 2.4 listing 6148, one with QGIS 2.6
not listing 6148)

It would seem if crssync uses the files in  /usr/share/gdal/1.9/  to create
srs.db it accesses other files as well because on the box with 2.4 there is
a record for EPSG:6148 and on the box with 2.6.1 there isn't.

TSW

On Fri, Dec 12, 2014 at 12:33 PM, Andre Joost <andre+joost at nurfuerspam.de>
wrote:
>
> Am 12.12.2014 um 18:05 schrieb Trevor Wiens:
>
>> I have two debian Wheezy systems. One with 2.4 and the other with 2.6.1.
>>
>> In the 2.4 instance 6148 is present and in the 2.6.1 instance it is not
>>
>> Runing /usr/lib/qgis/crssync does not solve the issue. It updates various
>> files including
>>
>> /usr/share/qgis/resources/srs.db
>>
>> On the box with 2.4 there is a table called tbl_srs which has 5630 records
>> including one for EPSG:6148. On the 2.6.1 box this same table has 5325
>> records and no entry for EPSG:6148.
>>
>> It is unclear which package provides this database that does seem to be
>> the
>> source of the issue.
>>
>>
> On Windows, EPSG:6148 is defined originally in /share/gdal/compdcs.csv.
> Under Ubuntu I find this file in /usr/share/gdal/1.11/.
>
> If crssync finds this file, the definition should go into the srs.db as
> well.
>
> HTH,
> Andr? Joost
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Trevor Wiens
Apropos Information Systems
aproposinfosystems.com
Calgary, Alberta
Ph. 403-973-5901
Fax 780-666-4580
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141212/21e5e13a/attachment.html>

From andre+joost at nurfuerspam.de  Fri Dec 12 13:07:44 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 12 Dec 2014 22:07:44 +0100
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>
References: <548AF9DB.1020109@geograph.co.za>
	<548B09A4.30301@nurfuerspam.de>	<548B0CAE.8080202@geograph.co.za>
	<548B1320.3000608@nurfuerspam.de>	<548B13FD.9050709@geograph.co.za>	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>	<548B4327.9000306@nurfuerspam.de>
	<CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>
Message-ID: <548B5920.3040408@nurfuerspam.de>

Am 12.12.2014 um 21:29 schrieb Trevor Wiens:
> On both boxes, the file compdcs.csv does not contain a record for
> EPSG:6148. The gdal version is 1.9, not 1.11 for Wheezy and I assume the
> same for Ubuntu.
>

Installing from Ubuntugis-unstable for trusty 14.04 will give you gdal
1.11 with the desired EPSG:6148. For Ubuntu Utopic 14.10, there is
currently qgis, but no gdal package available.

The official debian and ubuntu packages might be outdated.

HTH,
Andr? Joost



From tsw.web at gmail.com  Fri Dec 12 13:14:31 2014
From: tsw.web at gmail.com (Trevor Wiens)
Date: Fri, 12 Dec 2014 14:14:31 -0700
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548B5920.3040408@nurfuerspam.de>
References: <548AF9DB.1020109@geograph.co.za> <548B09A4.30301@nurfuerspam.de>
	<548B0CAE.8080202@geograph.co.za> <548B1320.3000608@nurfuerspam.de>
	<548B13FD.9050709@geograph.co.za>
	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>
	<548B4327.9000306@nurfuerspam.de>
	<CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>
	<548B5920.3040408@nurfuerspam.de>
Message-ID: <CAHVp9XpOMdELVcgrHM+Xy25N6Zjw9o++S-MR5-4RY0hvgKGCZg@mail.gmail.com>

Andre I believe you misunderstood what I'm saying. The version of gdal does
not appear to affect the presence of EPSG:6148 in srs.db

Box 1:
debian wheezy
QGIS 2.4
gdal 1.9
ESPG:6148 in the srs.db
ESPG6148 NOT in gdal csv files

Box 2:
debian wheezy
QGIS 2.6.1
gdal 1.9
ESPG:6148 NOT in srs.db
ESPG:6148 NOT in gdal csv files

This issue is clearly more complex than the gdal version.

TSW

On Fri, Dec 12, 2014 at 2:07 PM, Andre Joost <andre+joost at nurfuerspam.de>
wrote:
>
> Am 12.12.2014 um 21:29 schrieb Trevor Wiens:
>
>> On both boxes, the file compdcs.csv does not contain a record for
>> EPSG:6148. The gdal version is 1.9, not 1.11 for Wheezy and I assume the
>> same for Ubuntu.
>>
>>
> Installing from Ubuntugis-unstable for trusty 14.04 will give you gdal
> 1.11 with the desired EPSG:6148. For Ubuntu Utopic 14.10, there is
> currently qgis, but no gdal package available.
>
> The official debian and ubuntu packages might be outdated.
>
> HTH,
> Andr? Joost
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Trevor Wiens
Apropos Information Systems
aproposinfosystems.com
Calgary, Alberta
Ph. 403-973-5901
Fax 780-666-4580
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141212/cc0cdf08/attachment.html>

From tech_dev at wildintellect.com  Fri Dec 12 13:46:44 2014
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Fri, 12 Dec 2014 13:46:44 -0800
Subject: [Qgis-developer] Reading a new type of file natively in QGIS
In-Reply-To: <CAP=p+Ysv=tkxB7Jo+xNunmoqNG3+9_2zi1USL0Ro9GQL7tfJGw@mail.gmail.com>
References: <CAP=p+Ysv=tkxB7Jo+xNunmoqNG3+9_2zi1USL0Ro9GQL7tfJGw@mail.gmail.com>
Message-ID: <548B6244.7090602@wildintellect.com>

On 12/11/2014 08:21 PM, Pedro Camargo wrote:
> Hi group,
>                 During my discussions with people from the transportation
> modeling world, some people pointed out a few features that would be nice
> to have in order to use QGIS more intensively by our group.
> 
>                 The most important issue, however, was the possibility of
> open matrices in a very efficient way (reading matrices that are
> 10.000x10.000 in dbf format means reading 10e8 lines, which takes a VERY
> long time and defeats the purpose of using QGIS for some things.
> 
>                 A very good alternative would be using an open source
> format from the project "open model data"  (
> https://sites.google.com/site/openmodeldata/) which is based on HDF5.
> 
>                 I see that QGIS can already open raster data in HDF5
> format, but in this case, the data would be a matrix with indices and all.
> 
>                I regret to say that my programming skills, specially in
> C/C++ are not nearly good enough to evaluate the effort that it would take
> include such support and have, inside QGIS, a possibility of viewing such
> matrices, which would allow people from the transportation world (and I am
> the first volunteer) to develop the necessary plugins to manipulate the
> matrices and generate the commonly used statistics.
> 
>               Can anybody tell me what type of effort it would take and if
> it is at all of interest of the QGIS community?
> 
> Thanks a lot,
> 
> Pedro

This is more a question for GDAL/OGR I think.
How do your matrix values relate to map objects? Is your matrix a vector
or a raster?
What do you want to do with the data inside QGIS?

Thanks,
Alex


From veigacamargo at gmail.com  Fri Dec 12 16:14:24 2014
From: veigacamargo at gmail.com (Pedro Camargo)
Date: Fri, 12 Dec 2014 17:14:24 -0700
Subject: [Qgis-developer] Reading a new type of file natively in QGIS
In-Reply-To: <548B6244.7090602@wildintellect.com>
References: <CAP=p+Ysv=tkxB7Jo+xNunmoqNG3+9_2zi1USL0Ro9GQL7tfJGw@mail.gmail.com>
	<548B6244.7090602@wildintellect.com>
Message-ID: <CAP=p+Yt-hB4+mVnQnrKp6zFZVjuQM2N+GS9isQvzgzqBc-CNdg@mail.gmail.com>

Hi Alex,
                 This matrix is a transportation demand matrix, where the
indices represent the node of origin and the node of destination in the
network. They could be interpreted as vectors, I think, if you think in the
sense that both the origin and the destination do have coordinates, but
representing them as lines do not make any physical sense.

   Did my explanation help at all?

THanks,

Pedro

On Fri, Dec 12, 2014 at 2:46 PM, Alex Mandel <tech_dev at wildintellect.com>
wrote:

> On 12/11/2014 08:21 PM, Pedro Camargo wrote:
> > Hi group,
> >                 During my discussions with people from the transportation
> > modeling world, some people pointed out a few features that would be nice
> > to have in order to use QGIS more intensively by our group.
> >
> >                 The most important issue, however, was the possibility of
> > open matrices in a very efficient way (reading matrices that are
> > 10.000x10.000 in dbf format means reading 10e8 lines, which takes a VERY
> > long time and defeats the purpose of using QGIS for some things.
> >
> >                 A very good alternative would be using an open source
> > format from the project "open model data"  (
> > https://sites.google.com/site/openmodeldata/) which is based on HDF5.
> >
> >                 I see that QGIS can already open raster data in HDF5
> > format, but in this case, the data would be a matrix with indices and
> all.
> >
> >                I regret to say that my programming skills, specially in
> > C/C++ are not nearly good enough to evaluate the effort that it would
> take
> > include such support and have, inside QGIS, a possibility of viewing such
> > matrices, which would allow people from the transportation world (and I
> am
> > the first volunteer) to develop the necessary plugins to manipulate the
> > matrices and generate the commonly used statistics.
> >
> >               Can anybody tell me what type of effort it would take and
> if
> > it is at all of interest of the QGIS community?
> >
> > Thanks a lot,
> >
> > Pedro
>
> This is more a question for GDAL/OGR I think.
> How do your matrix values relate to map objects? Is your matrix a vector
> or a raster?
> What do you want to do with the data inside QGIS?
>
> Thanks,
> Alex
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141212/e3242c60/attachment.html>

From tech_dev at wildintellect.com  Fri Dec 12 16:23:25 2014
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Fri, 12 Dec 2014 16:23:25 -0800
Subject: [Qgis-developer] Reading a new type of file natively in QGIS
In-Reply-To: <CAP=p+Yt-hB4+mVnQnrKp6zFZVjuQM2N+GS9isQvzgzqBc-CNdg@mail.gmail.com>
References: <CAP=p+Ysv=tkxB7Jo+xNunmoqNG3+9_2zi1USL0Ro9GQL7tfJGw@mail.gmail.com>	<548B6244.7090602@wildintellect.com>
	<CAP=p+Yt-hB4+mVnQnrKp6zFZVjuQM2N+GS9isQvzgzqBc-CNdg@mail.gmail.com>
Message-ID: <548B86FD.7080004@wildintellect.com>

Yes, that's not foreign to me.

I think for QGIS you would likely want to undo the matrix in to long
format rows.
Dest, Orig, Value

With data in that format in a db it would work fine to query out and
display the data in various ways. Also Dest and Origin could then be
joined to Points and you could do things like give me all end points
from Dest A where dist or time is less than x miles or 1 hour.

I could chat with my colleagues who do more transportation analysis to
see what they think.

Without understanding how you want to actually use the data it's hard to
know where to start. But the format you have is familiar to many of us
as a Distance Matrix (though the value can be anything).

Perhaps a plugin to transform it on the fly using Numpy?

Thanks,
Alex

On 12/12/2014 04:14 PM, Pedro Camargo wrote:
> Hi Alex,
>                  This matrix is a transportation demand matrix, where the
> indices represent the node of origin and the node of destination in the
> network. They could be interpreted as vectors, I think, if you think in the
> sense that both the origin and the destination do have coordinates, but
> representing them as lines do not make any physical sense.
> 
>    Did my explanation help at all?
> 
> THanks,
> 
> Pedro
> 
> On Fri, Dec 12, 2014 at 2:46 PM, Alex Mandel <tech_dev at wildintellect.com>
> wrote:
> 
>> On 12/11/2014 08:21 PM, Pedro Camargo wrote:
>>> Hi group,
>>>                 During my discussions with people from the transportation
>>> modeling world, some people pointed out a few features that would be nice
>>> to have in order to use QGIS more intensively by our group.
>>>
>>>                 The most important issue, however, was the possibility of
>>> open matrices in a very efficient way (reading matrices that are
>>> 10.000x10.000 in dbf format means reading 10e8 lines, which takes a VERY
>>> long time and defeats the purpose of using QGIS for some things.
>>>
>>>                 A very good alternative would be using an open source
>>> format from the project "open model data"  (
>>> https://sites.google.com/site/openmodeldata/) which is based on HDF5.
>>>
>>>                 I see that QGIS can already open raster data in HDF5
>>> format, but in this case, the data would be a matrix with indices and
>> all.
>>>
>>>                I regret to say that my programming skills, specially in
>>> C/C++ are not nearly good enough to evaluate the effort that it would
>> take
>>> include such support and have, inside QGIS, a possibility of viewing such
>>> matrices, which would allow people from the transportation world (and I
>> am
>>> the first volunteer) to develop the necessary plugins to manipulate the
>>> matrices and generate the commonly used statistics.
>>>
>>>               Can anybody tell me what type of effort it would take and
>> if
>>> it is at all of interest of the QGIS community?
>>>
>>> Thanks a lot,
>>>
>>> Pedro
>>
>> This is more a question for GDAL/OGR I think.
>> How do your matrix values relate to map objects? Is your matrix a vector
>> or a raster?
>> What do you want to do with the data inside QGIS?
>>
>> Thanks,
>> Alex
>>
>>
> 
> 
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From andre+joost at nurfuerspam.de  Fri Dec 12 21:52:03 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sat, 13 Dec 2014 06:52:03 +0100
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <CAHVp9XpOMdELVcgrHM+Xy25N6Zjw9o++S-MR5-4RY0hvgKGCZg@mail.gmail.com>
References: <548AF9DB.1020109@geograph.co.za>
	<548B09A4.30301@nurfuerspam.de>	<548B0CAE.8080202@geograph.co.za>
	<548B1320.3000608@nurfuerspam.de>	<548B13FD.9050709@geograph.co.za>	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>	<548B4327.9000306@nurfuerspam.de>	<CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>	<548B5920.3040408@nurfuerspam.de>
	<CAHVp9XpOMdELVcgrHM+Xy25N6Zjw9o++S-MR5-4RY0hvgKGCZg@mail.gmail.com>
Message-ID: <548BD403.90907@nurfuerspam.de>

Am 12.12.2014 um 22:14 schrieb Trevor Wiens:
> Andre I believe you misunderstood what I'm saying. The version of gdal does
> not appear to affect the presence of EPSG:6148 in srs.db
>
> Box 1:
> debian wheezy
> QGIS 2.4
> gdal 1.9
> ESPG:6148 in the srs.db
> ESPG6148 NOT in gdal csv files
>
> Box 2:
> debian wheezy
> QGIS 2.6.1
> gdal 1.9
> ESPG:6148 NOT in srs.db
> ESPG:6148 NOT in gdal csv files
>
> This issue is clearly more complex than the gdal version.
>

I don't understand your logic. Both Boxes have gdal 1.9, both missing 
EPSG:6148. It is crssync that pushes the GDAL definition into srs.db.

Looking at the Windows installations of gisinternals and QGIS 
standalone, I find the EPSG code inserted between
GDAL 1.10.1 and 1.11.0, published 05/2013 vs 04/2014
QGIS 2.2.0 and 2.4.0, published 02/2014 vs 06/2014

QGIS Linux packages don't include gdal, so it is up to you to get the 
recent GDAL version (unless it is updated as dependency).

Greetings,
Andr? Joost


From wonder.sk at gmail.com  Fri Dec 12 22:02:02 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sat, 13 Dec 2014 13:02:02 +0700
Subject: [Qgis-developer] Snapping tolerance
Message-ID: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>

Hi

Recently I have been working on some snapping improvements (more about that
later) and I have found one slightly surprising thing about the
configuration of tolerances: if the tolerance unit is set to "map units",
it actually means "layer units" - i.e. units in layer's CRS and not in
project's CRS. Recently there was even a bug report filed for that:
https://hub.qgis.org/issues/11634

I would like to change the behavior so that the "map units" in snapping
config dialog would mean units in project's CRS. Would there be any
objections?

Alternatively we could just rename "map units" to "layer units" to make it
less surprising (and eventually add a third option to use project's units).

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141213/1b987732/attachment.html>

From madmanwoo at gmail.com  Fri Dec 12 22:04:01 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Sat, 13 Dec 2014 06:04:01 +0000
Subject: [Qgis-developer] Snapping tolerance
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
Message-ID: <CAAi8Yg8AkLKX7jumm_C+9QSXbXTFWj4rr_oBt9uE2Er87dx99Q@mail.gmail.com>

I think using the projects units makes more sense, Using the layer units
makes things confusing I think, think of having one layer in degrees and
another in meters.

So +1 for swapping to mean project units.

On Sat Dec 13 2014 at 4:02:10 PM Martin Dobias <wonder.sk at gmail.com> wrote:

> Hi
>
> Recently I have been working on some snapping improvements (more about
> that later) and I have found one slightly surprising thing about the
> configuration of tolerances: if the tolerance unit is set to "map units",
> it actually means "layer units" - i.e. units in layer's CRS and not in
> project's CRS. Recently there was even a bug report filed for that:
> https://hub.qgis.org/issues/11634
>
> I would like to change the behavior so that the "map units" in snapping
> config dialog would mean units in project's CRS. Would there be any
> objections?
>
> Alternatively we could just rename "map units" to "layer units" to make it
> less surprising (and eventually add a third option to use project's units).
>
> Cheers
> Martin
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141213/75b36eed/attachment.html>

From tsw.web at gmail.com  Fri Dec 12 22:29:41 2014
From: tsw.web at gmail.com (Trevor Wiens)
Date: Fri, 12 Dec 2014 23:29:41 -0700
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548BD403.90907@nurfuerspam.de>
References: <548AF9DB.1020109@geograph.co.za> <548B09A4.30301@nurfuerspam.de>
	<548B0CAE.8080202@geograph.co.za> <548B1320.3000608@nurfuerspam.de>
	<548B13FD.9050709@geograph.co.za>
	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>
	<548B4327.9000306@nurfuerspam.de>
	<CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>
	<548B5920.3040408@nurfuerspam.de>
	<CAHVp9XpOMdELVcgrHM+Xy25N6Zjw9o++S-MR5-4RY0hvgKGCZg@mail.gmail.com>
	<548BD403.90907@nurfuerspam.de>
Message-ID: <CAHVp9XoGPnXNhzufYaKLPNXrbb+QNpwcYDwNxA3aWsDv67e1ZQ@mail.gmail.com>

I don't understand it either; I'm not in any way suggesting it makes sense.
I'm simply describing how it is.

The confusing state of my machines suggests that crssync may do other
things than just use the GDAL sources to populate srs.db. Is that mistaken?
I haven't looked at the source for crssync; do you know for certain that it
only scans the gdal csv files?

The point the original question poster made and which I verified was that
with QGIS 2.4 on Linux, EPSG:6148 was present and supported; an upgrade to
2.6.1 removes it. I don't how or why. Again, my machines suggests that this
is more than a GDAL library issue.

TSW

On Fri, Dec 12, 2014 at 10:52 PM, Andre Joost <andre+joost at nurfuerspam.de>
wrote:
>
> Am 12.12.2014 um 22:14 schrieb Trevor Wiens:
>
>> Andre I believe you misunderstood what I'm saying. The version of gdal
>> does
>> not appear to affect the presence of EPSG:6148 in srs.db
>>
>> Box 1:
>> debian wheezy
>> QGIS 2.4
>> gdal 1.9
>> ESPG:6148 in the srs.db
>> ESPG6148 NOT in gdal csv files
>>
>> Box 2:
>> debian wheezy
>> QGIS 2.6.1
>> gdal 1.9
>> ESPG:6148 NOT in srs.db
>> ESPG:6148 NOT in gdal csv files
>>
>> This issue is clearly more complex than the gdal version.
>>
>>
> I don't understand your logic. Both Boxes have gdal 1.9, both missing
> EPSG:6148. It is crssync that pushes the GDAL definition into srs.db.
>
> Looking at the Windows installations of gisinternals and QGIS standalone,
> I find the EPSG code inserted between
> GDAL 1.10.1 and 1.11.0, published 05/2013 vs 04/2014
> QGIS 2.2.0 and 2.4.0, published 02/2014 vs 06/2014
>
> QGIS Linux packages don't include gdal, so it is up to you to get the
> recent GDAL version (unless it is updated as dependency).
>
> Greetings,
> Andr? Joost
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Trevor Wiens
Apropos Information Systems
aproposinfosystems.com
Calgary, Alberta
Ph. 403-973-5901
Fax 780-666-4580
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141212/e1487dd1/attachment.html>

From matthias.kuhn at gmx.ch  Fri Dec 12 23:35:37 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Sat, 13 Dec 2014 08:35:37 +0100
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <CAAi8Yg8AkLKX7jumm_C+9QSXbXTFWj4rr_oBt9uE2Er87dx99Q@mail.gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
	<CAAi8Yg8AkLKX7jumm_C+9QSXbXTFWj4rr_oBt9uE2Er87dx99Q@mail.gmail.com>
Message-ID: <548BEC49.7090503@gmx.ch>

+1 for map units. Makes much more sense to me and should confuse less.


On 12/13/2014 07:04 AM, Nathan Woodrow wrote:
> I think using the projects units makes more sense, Using the layer
> units makes things confusing I think, think of having one layer in
> degrees and another in meters. 
>
> So +1 for swapping to mean project units.
>
> On Sat Dec 13 2014 at 4:02:10 PM Martin Dobias <wonder.sk at gmail.com
> <mailto:wonder.sk at gmail.com>> wrote:
>
>     Hi
>
>     Recently I have been working on some snapping improvements (more
>     about that later) and I have found one slightly surprising thing
>     about the configuration of tolerances: if the tolerance unit is
>     set to "map units", it actually means "layer units" - i.e. units
>     in layer's CRS and not in project's CRS. Recently there was even a
>     bug report filed for that: https://hub.qgis.org/issues/11634
>
>     I would like to change the behavior so that the "map units" in
>     snapping config dialog would mean units in project's CRS. Would
>     there be any objections?
>
>     Alternatively we could just rename "map units" to "layer units" to
>     make it less surprising (and eventually add a third option to use
>     project's units).
>
>     Cheers
>     Martin
>
>     _______________________________________________
>     Qgis-developer mailing list
>     Qgis-developer at lists.osgeo.org <mailto:Qgis-developer at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141213/014e08bb/attachment.html>

From alexander.bruy at gmail.com  Sat Dec 13 00:04:05 2014
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sat, 13 Dec 2014 10:04:05 +0200
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <548BEC49.7090503@gmx.ch>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
	<CAAi8Yg8AkLKX7jumm_C+9QSXbXTFWj4rr_oBt9uE2Er87dx99Q@mail.gmail.com>
	<548BEC49.7090503@gmx.ch>
Message-ID: <CALuHMPC1MjPZfrQKwToC+dW8_-v+FrstBC-WBBg184FN8jPDOA@mail.gmail.com>

+1 for map units, as this removes confusion

2014-12-13 9:35 GMT+02:00 Matthias Kuhn <matthias.kuhn at gmx.ch>:
> +1 for map units. Makes much more sense to me and should confuse less.
>
>
>
> On 12/13/2014 07:04 AM, Nathan Woodrow wrote:
>
> I think using the projects units makes more sense, Using the layer units
> makes things confusing I think, think of having one layer in degrees and
> another in meters.
>
> So +1 for swapping to mean project units.
>
> On Sat Dec 13 2014 at 4:02:10 PM Martin Dobias <wonder.sk at gmail.com> wrote:
>>
>> Hi
>>
>> Recently I have been working on some snapping improvements (more about
>> that later) and I have found one slightly surprising thing about the
>> configuration of tolerances: if the tolerance unit is set to "map units", it
>> actually means "layer units" - i.e. units in layer's CRS and not in
>> project's CRS. Recently there was even a bug report filed for that:
>> https://hub.qgis.org/issues/11634
>>
>> I would like to change the behavior so that the "map units" in snapping
>> config dialog would mean units in project's CRS. Would there be any
>> objections?
>>
>> Alternatively we could just rename "map units" to "layer units" to make it
>> less surprising (and eventually add a third option to use project's units).
>>
>> Cheers
>> Martin
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alexander Bruy

From aperi2007 at gmail.com  Sat Dec 13 00:39:03 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sat, 13 Dec 2014 09:39:03 +0100
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
Message-ID: <CABqTJk__pThfUE+jbdhK=d4Nq3oW_ZkaJAxNRtKxWQu_D+2z6Q@mail.gmail.com>

Hi,
perhaps I dont understand well what this mean.
Infact we usually editing always in native reference system, never
editing in reprojected SRS.

But I guess that using the project reference system instead of the
layer srs for snap operations
could cause the snap will affect from an error due to the reprojection
operation.
If this is true, this could mean that the editing result could change
moving from a PC where the precision in due to some local NTv2 data
(more precision in reporjection), to another pc where the NTv2 are not
available.
And also it could depend from the trasformation choose for the reprojection.

Im worng the mean of the snap question ?

Thx,

Andrea.


2014-12-13 7:02 GMT+01:00 Martin Dobias <wonder.sk at gmail.com>:
> Hi
>
> Recently I have been working on some snapping improvements (more about that
> later) and I have found one slightly surprising thing about the
> configuration of tolerances: if the tolerance unit is set to "map units", it
> actually means "layer units" - i.e. units in layer's CRS and not in
> project's CRS. Recently there was even a bug report filed for that:
> https://hub.qgis.org/issues/11634
>
> I would like to change the behavior so that the "map units" in snapping
> config dialog would mean units in project's CRS. Would there be any
> objections?
>
> Alternatively we could just rename "map units" to "layer units" to make it
> less surprising (and eventually add a third option to use project's units).
>
> Cheers
> Martin
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From zoltans at geograph.co.za  Sat Dec 13 03:23:45 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat, 13 Dec 2014 13:23:45 +0200
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
Message-ID: <548C21C1.8070009@geograph.co.za>

Hi,
+1 for renaming current snapping behaviour to "Layer Units" AND adding a 
global snapping-unit option, _perhaps_ as default option.

You very often want to snap in linear units regardless of layer CRS, so 
a possibility for doing that globally would be good.

Maybe if this option is chosen, it calls a subroutine to convert this 
linear unit into "Layer Units" and populates the "Snapping and 
Digitising Option" table for the user, in the layer units.

Regards,
Zoltan




On 2014/12/13 08:02, Martin Dobias wrote:
> Hi
>
> Recently I have been working on some snapping improvements (more about 
> that later) and I have found one slightly surprising thing about the 
> configuration of tolerances: if the tolerance unit is set to "map 
> units", it actually means "layer units" - i.e. units in layer's CRS 
> and not in project's CRS. Recently there was even a bug report filed 
> for that: https://hub.qgis.org/issues/11634
>
> I would like to change the behavior so that the "map units" in 
> snapping config dialog would mean units in project's CRS. Would there 
> be any objections?
>
> Alternatively we could just rename "map units" to "layer units" to 
> make it less surprising (and eventually add a third option to use 
> project's units).
>
> Cheers
> Martin
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141213/a7ae0294/attachment.html>

From strk at keybit.net  Sat Dec 13 06:15:50 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sat, 13 Dec 2014 15:15:50 +0100
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
Message-ID: <20141213141550.GC31398@localhost>

On Sat, Dec 13, 2014 at 08:42:40PM +0700, Martin Dobias wrote:
> On Sat, Dec 13, 2014 at 8:17 PM, Sandro Santilli <strk at keybit.net> wrote:
> 
> > I see how it is modified when map rendering has finished
> > [ by QgsMapCanvas::rendererJobFinished() ]
> > but what modifies it for the temporary result seems to be
> > QgsMapCanvas::updateCanvasItemPositions which is called
> > by QgsMapCanvas::setExtent. So the QgsMapCanvasMap extent
> > is also modified due to that call, isn't it ?
> >
> > Debugging prints tell me indeed that the "boundingRect"
> > of QgsMapCanvasItem grows as I zoom in (with rendering turned off)
> > and shrinks as I zoom out.
> 
> The extent of canvas items (in map units) stays the same, just the position
> and bounding rect (both in screen coordinates) change accordingly when
> zooming/panning.

What's exactly the "bounding rect" ? How's it different from rect" ?
Documentation doesn't say:
http://qgis.org/api/classQgsMapCanvasItem.html#a8be640ba5958ed63df3a17a9c9b9792a
http://qgis.org/api/classQgsMapCanvasItem.html#ad0cd631ace28e2feb63166d28b704364

>From QT documentation I understand "bounding rect" is the outer bounds
of the item: http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#boundingRect

>From QGIS code I see that the parameter passed to setRect() is in
map units and is used to set a mItemSize member which is then used to
compute the output from boundingRect(), thus effectively "setRect()"
involves changing the "bounding rect" too. But "rect()" returns a
different value than "boundingRect".

I'm confused. Probably due to the lack of documentation about what
"setRect" is expected to be called with.
Docs only say "sets canvas item rectangle".
Right now QgsMapCanvas::rendererJobFinished passes it the so-called
"visibleExtent", which is the extent of the visible pointset of the map,
in map (geographical) units.

> > Once rotation enters the picture a simple QgsRectangle is not enough
> > anymore to express what area is shown in the canvas item. That is,
> > the canvas item output rectangle is not a rectangle in map coordinate
> > space. Could the "rect" concept be changed to something different then ?
> > Like a triplet: center,resolution,rotation ?
> 
> I don't think such triplet would work here well - we need to know the exact
> bounds of canvas items (in screen coordinates) so that the underlying Qt
> framework knows when it needs to repaint the individual items.

Only the visible bounds or the full item bounds ?
In other words, are these "bounds" independent of canvas size in pixels ?

> Why should canvas items keep rotation? Lots of canvas items do not care
> about the rotation - and should not care, e.g. a cross marker should always
> have the same appearance regardless of any map rotation.
> 
> It is also worth noting that not all canvas items do need to have the
> position + bounding box calculated automatically from map coordinates. For
> example, annotations only have one point fixed to a map coordinate, the
> rest of the bounding rect is defined in screen coordinates (independent
> from map).

Good point. So then why do we have this function at all:

  void QgsMapCanvasItem::setRect( const QgsRectangle& rect )

Which seems to take the "rect" in map coordinates ?
(according to the internal use of toCanvasCoordinates method)

> > PS: should we discuss this on the mailing lit instead ?
> >
> 
> Yeah why not...
> 
> The map rotation functionality in the end is probably more complex than it
> seemed to be. QEP explaining all the implications would be quite useful.

Indeed, I greatly understimated it.
I'll try to draft a QEP.

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From wonder.sk at gmail.com  Sat Dec 13 07:40:44 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sat, 13 Dec 2014 22:40:44 +0700
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <20141213141550.GC31398@localhost>
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
	<20141213141550.GC31398@localhost>
Message-ID: <CAC2XbFcs4du6JpyLcRRs5hY=ZejsfpUaKnFDOKbNraBhJ-uEVw@mail.gmail.com>

On Sat, Dec 13, 2014 at 9:15 PM, Sandro Santilli <strk at keybit.net> wrote:

> On Sat, Dec 13, 2014 at 08:42:40PM +0700, Martin Dobias wrote:
> >
> > The extent of canvas items (in map units) stays the same, just the
> position
> > and bounding rect (both in screen coordinates) change accordingly when
> > zooming/panning.
>
> What's exactly the "bounding rect" ? How's it different from rect" ?
> Documentation doesn't say:
>
> http://qgis.org/api/classQgsMapCanvasItem.html#a8be640ba5958ed63df3a17a9c9b9792a
>
> http://qgis.org/api/classQgsMapCanvasItem.html#ad0cd631ace28e2feb63166d28b704364
>
> From QT documentation I understand "bounding rect" is the outer bounds
> of the item:
> http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#boundingRect
>
> From QGIS code I see that the parameter passed to setRect() is in
> map units and is used to set a mItemSize member which is then used to
> compute the output from boundingRect(), thus effectively "setRect()"
> involves changing the "bounding rect" too. But "rect()" returns a
> different value than "boundingRect".
>

The Qt framework uses pos() and boundingRect() to understand where the
items are located in the scene (QGraphicsScene). These are all screen
coordinates - one can tell from the use of QPointF instead of QgsPoint
(always used for map / layer coordinates).

The rect() and setRect() is just our added convenience functionality in
QgsMapCanvasItem. The idea was that you just use setRect() to specify the
item's position+size in map coordinates - and the pos() and boundingRect()
will be set according to that. In addition, calls to updatePosition() from
map canvas make sure that pos() and boundingRect() are kept in sync with
changes to the canvas.

Some canvas items use that functionality (e.g. QgsRubberBand or
QgsMapCanvasMap) and don't worry about the screen coordinates. For some
items this default behavior is not useful, so they do not use setRect() and
provide their own implementation of updatePosition() and boundingRect().
For example QgsVertexMarker, which is centered on a map coordinate, but its
bounding box is independent from map coordinates / scale.

The design a bit clumsy I know... It would make more sense to have base
class QgsMapCanvasItem without any setRect() and without default setPos()
calls and boundingRect() implementation. And then have a derived class e.g.
QgsMapCanvasMapCoordsItem with those extra facilities - so when someone
would be creating a new item, they could decide which base class is more
appropriate.


> > Once rotation enters the picture a simple QgsRectangle is not enough
> > > anymore to express what area is shown in the canvas item. That is,
> > > the canvas item output rectangle is not a rectangle in map coordinate
> > > space. Could the "rect" concept be changed to something different then
> ?
> > > Like a triplet: center,resolution,rotation ?
> >
> > I don't think such triplet would work here well - we need to know the
> exact
> > bounds of canvas items (in screen coordinates) so that the underlying Qt
> > framework knows when it needs to repaint the individual items.
>
> Only the visible bounds or the full item bounds ?
> In other words, are these "bounds" independent of canvas size in pixels ?
>

The bounds are in screen coordinates = pixels.


> Why should canvas items keep rotation? Lots of canvas items do not care
> > about the rotation - and should not care, e.g. a cross marker should
> always
> > have the same appearance regardless of any map rotation.
> >
> > It is also worth noting that not all canvas items do need to have the
> > position + bounding box calculated automatically from map coordinates.
> For
> > example, annotations only have one point fixed to a map coordinate, the
> > rest of the bounding rect is defined in screen coordinates (independent
> > from map).
>
> Good point. So then why do we have this function at all:
>
>   void QgsMapCanvasItem::setRect( const QgsRectangle& rect )
>
> Which seems to take the "rect" in map coordinates ?
> (according to the internal use of toCanvasCoordinates method)
>

Hopefully this is now clear from the notes above. The items that do not
depend on "rect" in map coordinates can just ignore the existance of
setRect() and provide their own implementation of updatePosition() and
boundingRect().



> >
> > The map rotation functionality in the end is probably more complex than
> it
> > seemed to be. QEP explaining all the implications would be quite useful.
>
> Indeed, I greatly understimated it.
> I'll try to draft a QEP.
>

Thanks.

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141213/fb1075cc/attachment-0001.html>

From marco.hugentobler at sourcepole.ch  Sat Dec 13 07:57:18 2014
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Sat, 13 Dec 2014 16:57:18 +0100
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
Message-ID: <548C61DE.8050203@sourcepole.ch>

Hi Martin

 >I would like to change the behavior so that the "map units" in 
snapping config dialog would mean units in project's CRS

The renaming is fine, however I think it needs all 3 modes. Sometimes 
people digitise against a background TMS, but have a feature model in 
layer units in mind (e.g. if two parcels are less than 50cm away, 
consider the boundaries as identical).

Regards,
Marco


On 13.12.2014 07:02, Martin Dobias wrote:
> Hi
>
> Recently I have been working on some snapping improvements (more about 
> that later) and I have found one slightly surprising thing about the 
> configuration of tolerances: if the tolerance unit is set to "map 
> units", it actually means "layer units" - i.e. units in layer's CRS 
> and not in project's CRS. Recently there was even a bug report filed 
> for that: https://hub.qgis.org/issues/11634
>
> I would like to change the behavior so that the "map units" in 
> snapping config dialog would mean units in project's CRS. Would there 
> be any objections?
>
> Alternatively we could just rename "map units" to "layer units" to 
> make it less surprising (and eventually add a third option to use 
> project's units).
>
> Cheers
> Martin
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141213/3e9feaee/attachment.html>

From tsw.web at gmail.com  Sat Dec 13 08:31:52 2014
From: tsw.web at gmail.com (Trevor Wiens)
Date: Sat, 13 Dec 2014 09:31:52 -0700
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <CAHVp9XoGPnXNhzufYaKLPNXrbb+QNpwcYDwNxA3aWsDv67e1ZQ@mail.gmail.com>
References: <548AF9DB.1020109@geograph.co.za> <548B09A4.30301@nurfuerspam.de>
	<548B0CAE.8080202@geograph.co.za> <548B1320.3000608@nurfuerspam.de>
	<548B13FD.9050709@geograph.co.za>
	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>
	<548B4327.9000306@nurfuerspam.de>
	<CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>
	<548B5920.3040408@nurfuerspam.de>
	<CAHVp9XpOMdELVcgrHM+Xy25N6Zjw9o++S-MR5-4RY0hvgKGCZg@mail.gmail.com>
	<548BD403.90907@nurfuerspam.de>
	<CAHVp9XoGPnXNhzufYaKLPNXrbb+QNpwcYDwNxA3aWsDv67e1ZQ@mail.gmail.com>
Message-ID: <CAHVp9XpFsJWMH0uN9_F+MDDQEc-_MNBFB1EtFD-nXqTXLfi+eg@mail.gmail.com>

I did check the code for crssync and it appears that only the gdal csv and
wkt files are what is checked. This makes the situation on my machines
confusing as the reference to ESPG:6148 is absent from the gdal 1.9 and yet
it is present in the srs.db on the same machine. How it got there is
baffling, but this would appear to be a distribution issue.

TSW

On Fri, Dec 12, 2014 at 11:29 PM, Trevor Wiens <tsw.web at gmail.com> wrote:
>
> I don't understand it either; I'm not in any way suggesting it makes
> sense. I'm simply describing how it is.
>
> The confusing state of my machines suggests that crssync may do other
> things than just use the GDAL sources to populate srs.db. Is that mistaken?
> I haven't looked at the source for crssync; do you know for certain that it
> only scans the gdal csv files?
>
> The point the original question poster made and which I verified was that
> with QGIS 2.4 on Linux, EPSG:6148 was present and supported; an upgrade to
> 2.6.1 removes it. I don't how or why. Again, my machines suggests that this
> is more than a GDAL library issue.
>
> TSW
>
> On Fri, Dec 12, 2014 at 10:52 PM, Andre Joost <andre+joost at nurfuerspam.de>
> wrote:
>>
>> Am 12.12.2014 um 22:14 schrieb Trevor Wiens:
>>
>>> Andre I believe you misunderstood what I'm saying. The version of gdal
>>> does
>>> not appear to affect the presence of EPSG:6148 in srs.db
>>>
>>> Box 1:
>>> debian wheezy
>>> QGIS 2.4
>>> gdal 1.9
>>> ESPG:6148 in the srs.db
>>> ESPG6148 NOT in gdal csv files
>>>
>>> Box 2:
>>> debian wheezy
>>> QGIS 2.6.1
>>> gdal 1.9
>>> ESPG:6148 NOT in srs.db
>>> ESPG:6148 NOT in gdal csv files
>>>
>>> This issue is clearly more complex than the gdal version.
>>>
>>>
>> I don't understand your logic. Both Boxes have gdal 1.9, both missing
>> EPSG:6148. It is crssync that pushes the GDAL definition into srs.db.
>>
>> Looking at the Windows installations of gisinternals and QGIS standalone,
>> I find the EPSG code inserted between
>> GDAL 1.10.1 and 1.11.0, published 05/2013 vs 04/2014
>> QGIS 2.2.0 and 2.4.0, published 02/2014 vs 06/2014
>>
>> QGIS Linux packages don't include gdal, so it is up to you to get the
>> recent GDAL version (unless it is updated as dependency).
>>
>> Greetings,
>> Andr? Joost
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> Trevor Wiens
> Apropos Information Systems
> aproposinfosystems.com
> Calgary, Alberta
> Ph. 403-973-5901
> Fax 780-666-4580
>


-- 
Trevor Wiens
Apropos Information Systems
aproposinfosystems.com
Calgary, Alberta
Ph. 403-973-5901
Fax 780-666-4580
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141213/8049d9c4/attachment.html>

From strk at keybit.net  Sat Dec 13 08:40:10 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sat, 13 Dec 2014 17:40:10 +0100
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <CAC2XbFcs4du6JpyLcRRs5hY=ZejsfpUaKnFDOKbNraBhJ-uEVw@mail.gmail.com>
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
	<20141213141550.GC31398@localhost>
	<CAC2XbFcs4du6JpyLcRRs5hY=ZejsfpUaKnFDOKbNraBhJ-uEVw@mail.gmail.com>
Message-ID: <20141213164010.GD31398@localhost>

On Sat, Dec 13, 2014 at 10:40:44PM +0700, Martin Dobias wrote:

> The Qt framework uses pos() and boundingRect() to understand where the
> items are located in the scene (QGraphicsScene). These are all screen
> coordinates - one can tell from the use of QPointF instead of QgsPoint
> (always used for map / layer coordinates).
> 
> The rect() and setRect() is just our added convenience functionality in
> QgsMapCanvasItem. The idea was that you just use setRect() to specify the
> item's position+size in map coordinates - and the pos() and boundingRect()
> will be set according to that. In addition, calls to updatePosition() from
> map canvas make sure that pos() and boundingRect() are kept in sync with
> changes to the canvas.

The problem with that, as you can see, is that it is assumed that
a single rectangle can fully express a map configuration, but that's
only true when there's no rotation.

This lack of information makes it impossible for updatePosition to
keep a rotated map position/size in sync with canvas changes.

> Some canvas items use that functionality (e.g. QgsRubberBand or
> QgsMapCanvasMap) and don't worry about the screen coordinates. For some
> items this default behavior is not useful, so they do not use setRect() and
> provide their own implementation of updatePosition() and boundingRect().
> For example QgsVertexMarker, which is centered on a map coordinate, but its
> bounding box is independent from map coordinates / scale.

Maybe the object passed via setRect (via QgsMapCanvasMap::setContent)
could possibly be syntetized as a rectangle having the map coordinate
corresponding to device position (0,0) as its upper-left corner and
width and height being the output device width and height scaled by the
current map resolution.  But we'd still be in the "workaround" side.

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Sat Dec 13 09:01:13 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sat, 13 Dec 2014 18:01:13 +0100
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <20141213164010.GD31398@localhost>
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
	<20141213141550.GC31398@localhost>
	<CAC2XbFcs4du6JpyLcRRs5hY=ZejsfpUaKnFDOKbNraBhJ-uEVw@mail.gmail.com>
	<20141213164010.GD31398@localhost>
Message-ID: <20141213170113.GE31398@localhost>

On Sat, Dec 13, 2014 at 05:40:10PM +0100, Sandro Santilli wrote:
> On Sat, Dec 13, 2014 at 10:40:44PM +0700, Martin Dobias wrote:

> > The rect() and setRect() is just our added convenience functionality in
> > QgsMapCanvasItem. The idea was that you just use setRect() to specify the
> > item's position+size in map coordinates - and the pos() and boundingRect()
> > will be set according to that. In addition, calls to updatePosition() from
> > map canvas make sure that pos() and boundingRect() are kept in sync with
> > changes to the canvas.
> 
> The problem with that, as you can see, is that it is assumed that
> a single rectangle can fully express a map configuration, but that's
> only true when there's no rotation.

Actually, worst than this, it is assumed that a rectangle in map units
can express a size in device units. And the (pre-rotation-commit) code
to compute that (size in device units) was transforming the upper-left
and lower-right corners of the rectangle to device coordinates and
computing their distance.

For a 90 degrees rotated extent that gives a size of 0 in one direction...

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Sat Dec 13 09:45:45 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sat, 13 Dec 2014 18:45:45 +0100
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <20141213170113.GE31398@localhost>
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
	<20141213141550.GC31398@localhost>
	<CAC2XbFcs4du6JpyLcRRs5hY=ZejsfpUaKnFDOKbNraBhJ-uEVw@mail.gmail.com>
	<20141213164010.GD31398@localhost>
	<20141213170113.GE31398@localhost>
Message-ID: <20141213174545.GG31398@localhost>

On Sat, Dec 13, 2014 at 06:01:13PM +0100, Sandro Santilli wrote:
> On Sat, Dec 13, 2014 at 05:40:10PM +0100, Sandro Santilli wrote:
> > On Sat, Dec 13, 2014 at 10:40:44PM +0700, Martin Dobias wrote:
> 
> > > The rect() and setRect() is just our added convenience functionality in
> > > QgsMapCanvasItem. The idea was that you just use setRect() to specify the
> > > item's position+size in map coordinates - and the pos() and boundingRect()
> > > will be set according to that. In addition, calls to updatePosition() from
> > > map canvas make sure that pos() and boundingRect() are kept in sync with
> > > changes to the canvas.
> > 
> > The problem with that, as you can see, is that it is assumed that
> > a single rectangle can fully express a map configuration, but that's
> > only true when there's no rotation.
> 
> Actually, worst than this, it is assumed that a rectangle in map units
> can express a size in device units. And the (pre-rotation-commit) code
> to compute that (size in device units) was transforming the upper-left
> and lower-right corners of the rectangle to device coordinates and
> computing their distance.
> 
> For a 90 degrees rotated extent that gives a size of 0 in one direction...

In my pull request https://github.com/qgis/QGIS/pull/1734 I've
now reverted the special rotation handling in QgsMapCanvasMap::paint
moving the handling up to pass QgsMapCanvasItem::setRect
(via QgsMapCanvasMap::setContent) what it expects: an encoding
of size and position only.

In that version the pre-rendering positioning of both rotated and
non-rotated map is correct on both zoom and pan.

The pre-rendering positioning on rotation change is still glitching as
the new code (like the old one) in QgsMapCanvasItem::setRect can not
look at a stored map _center_.

Revision/tests welcome.

I've started the QEP, but not having a clear plan other than what I did
already it isn't gone much far. Help there is welcome:
https://github.com/qgis/QGIS-Enhancement-Proposals/pull/14
https://github.com/strk/QGIS-Enhancement-Proposals/blob/maprotation/QEP-9-Map_Rotation.rst


--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Sat Dec 13 12:20:05 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sat, 13 Dec 2014 21:20:05 +0100
Subject: [Qgis-developer] map-filtered legend and possible memory error in
	composer
Message-ID: <20141213202005.GA9516@localhost>

I'm taking a code tour in preparation to a QEP about adding map-dependent
legends support in QGIS (see http://hub.qgis.org/issues/11859).

While looking around I found that the composer code contains something
that looks like aiming at the same thing, that is:

  QgsComposerLegend::updateFilterByMap()

... passes the map settings to the QgsLayerTreeModel via:

  void setLegendFilterByMap( const QgsMapSettings* settings );

Further, I saw that the application supposedly has a setting for that
in the project file:

        <Legend>
            <filterByMap type="bool">true</filterByMap>
        </Legend>

but I haven't found a way to set that graphically, does anyone know
where I set it ?
I've looked in Project Properties and in Settings->Options

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Sat Dec 13 12:23:03 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sat, 13 Dec 2014 21:23:03 +0100
Subject: [Qgis-developer] map-filtered legend and possible memory error
	in composer
In-Reply-To: <20141213202005.GA9516@localhost>
References: <20141213202005.GA9516@localhost>
Message-ID: <20141213202303.GB9516@localhost>

On Sat, Dec 13, 2014 at 09:20:05PM +0100, Sandro Santilli wrote:

>         <Legend>
>             <filterByMap type="bool">true</filterByMap>
>         </Legend>
> 
> but I haven't found a way to set that graphically, does anyone know
> where I set it ?
> I've looked in Project Properties and in Settings->Options

Found... it's toggled with the buttons on top of the layertree.
The small funnel icon...

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From custard at westnet.com.au  Sat Dec 13 13:25:11 2014
From: custard at westnet.com.au (=?iso-8859-1?Q?Ramon_Andi=F1ach?=)
Date: Sun, 14 Dec 2014 05:25:11 +0800
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
Message-ID: <8C559E92-6DD4-4077-A9DC-D36F01E6B2F1@westnet.com.au>


On 13/12/2014, at 14:02 , Martin Dobias wrote:

> Hi
> 
> Recently I have been working on some snapping improvements (more about that later) and I have found one slightly surprising thing about the configuration of tolerances: if the tolerance unit is set to "map units", it actually means "layer units" - i.e. units in layer's CRS and not in project's CRS. Recently there was even a bug report filed for that: https://hub.qgis.org/issues/11634
> 
> I would like to change the behavior so that the "map units" in snapping config dialog would mean units in project's CRS. Would there be any objections?
> 
> Alternatively we could just rename "map units" to "layer units" to make it less surprising (and eventually add a third option to use project's units).

Hi,

This explains many things, and probably a lot about why I've learnt not to entirely trust map unit snapping.

As someone that routinely works with layers in about 3 projections at the same time, could we have both "layer units" and "map units"?

-ramon.


From strk at keybit.net  Sat Dec 13 15:40:36 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sun, 14 Dec 2014 00:40:36 +0100
Subject: [Qgis-developer] should legends be shown for invisible layers ?
Message-ID: <20141213234036.GD9516@localhost>

Does it make sense to show a layer's legend while the layer visibility is off,
or should the legend nodes in the layertree really be removed ?

I'm wondering as I move steps toward optimization of WMS legend construction
for cases in which it is not needed: http://hub.qgis.org/issues/11860

You probably don't want to incur in the cost of new WMS GetLegendGraphics
requests as you pan and zoom while the layer is invisible, but then would
you still want the last fetched legend visible in that case ?

The same applies to vector layers too, except the cost is much much lower
there. Does it make sense for map dependent legends to update while their
corresponding layer is invisible ? And to show the legend at all ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From wonder.sk at gmail.com  Sat Dec 13 17:52:45 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 14 Dec 2014 08:52:45 +0700
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <20141213234036.GD9516@localhost>
References: <20141213234036.GD9516@localhost>
Message-ID: <CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>

Hi Sandro

On Sun, Dec 14, 2014 at 6:40 AM, Sandro Santilli <strk at keybit.net> wrote:

> Does it make sense to show a layer's legend while the layer visibility is
> off,
> or should the legend nodes in the layertree really be removed ?
>

When map-based filtering is enabled, the legend nodes for invisible layers
are not shown. Technically they are not deleted, they are just filtered out
inside the layer tree model.


I'm wondering as I move steps toward optimization of WMS legend construction
> for cases in which it is not needed: http://hub.qgis.org/issues/11860
>
> You probably don't want to incur in the cost of new WMS GetLegendGraphics
> requests as you pan and zoom while the layer is invisible, but then would
> you still want the last fetched legend visible in that case ?
>

Indeed you don't want such extra cost. But as I noted in the ticket, if a
legend node is filtered out or in a collapsed part of a tree, the model
will not ask about its data(), so if fetching is implemented there, it will
be done lazily only when required.


> The same applies to vector layers too, except the cost is much much lower
> there. Does it make sense for map dependent legends to update while their
> corresponding layer is invisible ? And to show the legend at all ?
>

Map dependent legends for each layer are not re-created completely on every
change of map extent: only the filtering part is applied - and when they
are invisible all legend nodes are filtered out.

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141214/cc6dbefa/attachment.html>

From alexander.bruy at gmail.com  Sat Dec 13 23:55:11 2014
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun, 14 Dec 2014 09:55:11 +0200
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <20141213141550.GC31398@localhost>
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
	<20141213141550.GC31398@localhost>
Message-ID: <CALuHMPAeyjtUpO-VBsXFAY45su-_Vz+1ONffDcsN=KsoQbK5Xg@mail.gmail.com>

2014-12-13 16:15 GMT+02:00 Sandro Santilli <strk at keybit.net>:
>> The map rotation functionality in the end is probably more complex than it
>> seemed to be. QEP explaining all the implications would be quite useful.
>
> Indeed, I greatly understimated it.
> I'll try to draft a QEP.

Maybe it is better revert this code and readd after finalizing QEP process?
Some things are broken now and this is not good, as we have about 1 month
to feature freeze.


-- 
Alexander Bruy

From nyall.dawson at gmail.com  Sun Dec 14 00:02:43 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sun, 14 Dec 2014 19:02:43 +1100
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <CALuHMPAeyjtUpO-VBsXFAY45su-_Vz+1ONffDcsN=KsoQbK5Xg@mail.gmail.com>
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
	<20141213141550.GC31398@localhost>
	<CALuHMPAeyjtUpO-VBsXFAY45su-_Vz+1ONffDcsN=KsoQbK5Xg@mail.gmail.com>
Message-ID: <CAB28AsjJdVhYVj7V3jw=jFSuwfRye5V=zb2FQt_sbuj0mHSZ3Q@mail.gmail.com>

On 14 December 2014 at 18:55, Alexander Bruy <alexander.bruy at gmail.com> wrote:
> 2014-12-13 16:15 GMT+02:00 Sandro Santilli <strk at keybit.net>:
>>> The map rotation functionality in the end is probably more complex than it
>>> seemed to be. QEP explaining all the implications would be quite useful.
>>
>> Indeed, I greatly understimated it.
>> I'll try to draft a QEP.
>
> Maybe it is better revert this code and readd after finalizing QEP process?
> Some things are broken now and this is not good, as we have about 1 month
> to feature freeze.

+1 to this. I'd feel much more comfortable if this work was
temporarily reverted and submitted as a completed pull request for
review in full. I think it's extremely important for us to keep master
free from work-in-progress type commits.

Nyall

From madmanwoo at gmail.com  Sun Dec 14 00:04:38 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Sun, 14 Dec 2014 08:04:38 +0000
Subject: [Qgis-developer] qgis pre-refresh rendering ?
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
	<20141213141550.GC31398@localhost>
	<CALuHMPAeyjtUpO-VBsXFAY45su-_Vz+1ONffDcsN=KsoQbK5Xg@mail.gmail.com>
	<CAB28AsjJdVhYVj7V3jw=jFSuwfRye5V=zb2FQt_sbuj0mHSZ3Q@mail.gmail.com>
Message-ID: <CAAi8Yg9ot5odkGKQxyg+WKYU+0wox2LV=AScTB83GAfezg2FQA@mail.gmail.com>

+1 as this has such a wide impact with a lot of other unknowns.

On Sun Dec 14 2014 at 18:02:54 Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On 14 December 2014 at 18:55, Alexander Bruy <alexander.bruy at gmail.com>
> wrote:
> > 2014-12-13 16:15 GMT+02:00 Sandro Santilli <strk at keybit.net>:
> >>> The map rotation functionality in the end is probably more complex
> than it
> >>> seemed to be. QEP explaining all the implications would be quite
> useful.
> >>
> >> Indeed, I greatly understimated it.
> >> I'll try to draft a QEP.
> >
> > Maybe it is better revert this code and readd after finalizing QEP
> process?
> > Some things are broken now and this is not good, as we have about 1 month
> > to feature freeze.
>
> +1 to this. I'd feel much more comfortable if this work was
> temporarily reverted and submitted as a completed pull request for
> review in full. I think it's extremely important for us to keep master
> free from work-in-progress type commits.
>
> Nyall
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141214/da57746a/attachment-0001.html>

From rdmailings at duif.net  Sun Dec 14 02:59:38 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 14 Dec 2014 11:59:38 +0100
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <CALuHMPAeyjtUpO-VBsXFAY45su-_Vz+1ONffDcsN=KsoQbK5Xg@mail.gmail.com>
References: <20141212113859.GB6323@localhost>	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>	<20141213104427.GA4769@localhost>	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>	<20141213131756.GA31398@localhost>	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>	<20141213141550.GC31398@localhost>
	<CALuHMPAeyjtUpO-VBsXFAY45su-_Vz+1ONffDcsN=KsoQbK5Xg@mail.gmail.com>
Message-ID: <548D6D9A.9070403@duif.net>

On 14-12-14 08:55, Alexander Bruy wrote:
> 2014-12-13 16:15 GMT+02:00 Sandro Santilli <strk at keybit.net>:
>>> The map rotation functionality in the end is probably more complex than it
>>> seemed to be. QEP explaining all the implications would be quite useful.
>>
>> Indeed, I greatly understimated it.
>> I'll try to draft a QEP.
> 
> Maybe it is better revert this code and readd after finalizing QEP process?
> Some things are broken now and this is not good, as we have about 1 month
> to feature freeze.

With our current release process, we never have more then a few months
to be in a more or less 'unstable' development version.

I'm not in a position to decide if it is wise to revert and do this work
in another branch now, but only thing that I want to note that from what
I see this work as a process has a lot of other changes/work/discussion
done which maybe would not have been seen/done when we only do work in
small steps and are afraid to refactor deeper then the outside code.

How difficult is it to do this kind of changes in a separate branch
(with some core changes), and is it then still possible to keep the
branch as stable as it was recently.

With a 'LTS' version upcoming(???)... though it is maybe better to
postpone these changes, but my point is that I like the 'proces' of
deeper changes that apparently is happening).

Anyway, core-devs should decide this... whatever decision is taken I'm
ok with it.

Regards,

Richard Duivenvoorde





From denis.rouzaud at gmail.com  Sun Dec 14 05:20:19 2014
From: denis.rouzaud at gmail.com (Rouzaud Denis)
Date: Sun, 14 Dec 2014 14:20:19 +0100
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
Message-ID: <B06F52D2-A643-4BDA-8F3B-51EEEB6DF80B@gmail.com>

Hi,

I would say +1 for map units.

Regarding Marco?s use case, using the 50cm limit should be equivalent in map units, no?

From my point of view, the settings of snapping are far too advanced for 95% of the usage. Let?s not make them even more complicated, just for a very specific use case.

My 2 ct.

Denis


> On 13 Dec 2014, at 07:02, Martin Dobias <wonder.sk at gmail.com> wrote:
> 
> Hi
> 
> Recently I have been working on some snapping improvements (more about that later) and I have found one slightly surprising thing about the configuration of tolerances: if the tolerance unit is set to "map units", it actually means "layer units" - i.e. units in layer's CRS and not in project's CRS. Recently there was even a bug report filed for that: https://hub.qgis.org/issues/11634 <https://hub.qgis.org/issues/11634>
> 
> I would like to change the behavior so that the "map units" in snapping config dialog would mean units in project's CRS. Would there be any objections?
> 
> Alternatively we could just rename "map units" to "layer units" to make it less surprising (and eventually add a third option to use project's units).
> 
> Cheers
> Martin
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141214/dfb39957/attachment.html>

From zoltans at geograph.co.za  Sun Dec 14 06:12:31 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sun, 14 Dec 2014 16:12:31 +0200
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <B06F52D2-A643-4BDA-8F3B-51EEEB6DF80B@gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
	<B06F52D2-A643-4BDA-8F3B-51EEEB6DF80B@gmail.com>
Message-ID: <548D9ACF.9010105@geograph.co.za>

On 2014/12/14 15:20, Rouzaud Denis wrote:
>
> From my point of view, the settings of snapping are far too advanced 
> for 95% of the usage. Let?s not make them even more complicated, just 
> for a very specific use case.

Hi Denis,
I have to disagree with you, as someone who does a fair amount of 
digitising.

To support Ramon, I too work with many map layers in many different 
projections, so we mustn't lose facilities that we (even by accident) have.

Some points:

  * Being able to set a global tolerance in linear units, and have QGIS
    convert that to the relevant layer CRS would be VERY useful.
    ie: I want a 10m snapping tolerance even if I am on a LatLong map layer.
  * QGIS only allows Snap Modes "To Vertex", "To Segment" or "To Vertex
    and Segment"
    What if both a Line-end and a Vertex on that same line is within
    tolerance?
    We really need to differentiate between Point (the Start & End
    Vertex of a Line or Polygon), Vertex and Segment AND be able to set
    the Snapping order between those three components of a graphical entity.
  * The snapping order between layers is currently set to the order of
    the maps in your Layer Tree. Depending on the features you are
    digitising, this is not optimal as one often needs to have a layer
    snapping order different from the viewing order.
  * It would be useful to set the layer snapping order in the Snapping
    Options table, and have the _option_ (and not enforced by the
    developer) to prioritise the current map being edited.
  * If I remember correctly, snapping returns a position from the first
    layer it finds anything in, and IIRC if there are multiple snaps on
    that layer, the closest is returned? What if there are still
    unsearched layers that might have something within tolerance?

The above is just a couple of walls I have hit when trying to digitise 
large volume jobs with multiple feature types and map layers.


My 2c

Regards,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141214/9bba23a9/attachment.html>

From simbamangu+osgeo at gmail.com  Sun Dec 14 09:05:47 2014
From: simbamangu+osgeo at gmail.com (simbamangu)
Date: Sun, 14 Dec 2014 09:05:47 -0800 (PST)
Subject: [Qgis-developer] Where are the .QGS project file specifications?
Message-ID: <1418576747635-5177818.post@n6.nabble.com>

Where is the structure and format of a .QGS project file detailed?

The header of a .QGS file indicates:

    <!DOCTYPE qgis PUBLIC 'http://mrcc.com/qgis.dtd' 'SYSTEM'>

... however, that link leads to a 'not found' page. Can't find anything in
the online documentation, either! 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Where-are-the-QGS-project-file-specifications-tp5177818.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From strk at keybit.net  Sun Dec 14 09:49:08 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sun, 14 Dec 2014 18:49:08 +0100
Subject: [Qgis-developer] qgis pre-refresh rendering ?
In-Reply-To: <CALuHMPAeyjtUpO-VBsXFAY45su-_Vz+1ONffDcsN=KsoQbK5Xg@mail.gmail.com>
References: <20141212113859.GB6323@localhost>
	<CAC2XbFe9qcp8A3PvULVmBcNDgHMViMu0ob0toEU+_3KomE4+Ag@mail.gmail.com>
	<20141213104427.GA4769@localhost>
	<CAC2XbFfMjt6X0q-AbMHZhbY_ho=6-WXUM0iiJ4WhNuAtCJaipA@mail.gmail.com>
	<20141213131756.GA31398@localhost>
	<CAC2XbFdsMdJY7v9PNyx=xbGWR4TuFyGp9cPFSTdep=GDwVySPA@mail.gmail.com>
	<20141213141550.GC31398@localhost>
	<CALuHMPAeyjtUpO-VBsXFAY45su-_Vz+1ONffDcsN=KsoQbK5Xg@mail.gmail.com>
Message-ID: <20141214174908.GA8666@localhost>

On Sun, Dec 14, 2014 at 09:55:11AM +0200, Alexander Bruy wrote:
> 2014-12-13 16:15 GMT+02:00 Sandro Santilli <strk at keybit.net>:
> >> The map rotation functionality in the end is probably more complex than it
> >> seemed to be. QEP explaining all the implications would be quite useful.
> >
> > Indeed, I greatly understimated it.
> > I'll try to draft a QEP.
> 
> Maybe it is better revert this code and readd after finalizing QEP process?
> Some things are broken now and this is not good, as we have about 1 month
> to feature freeze.

As far as I know only the pre-refresh rendering is broken and I've
tested that to be fixed by https://github.com/qgis/QGIS/pull/1734

The idea is that with no rotation activated nothing should change.
I'm confident we can get there if we're not there yet after merging 1734.
Could you help testing that ?

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Sun Dec 14 10:03:23 2014
From: strk at keybit.net (Sandro Santilli)
Date: Sun, 14 Dec 2014 19:03:23 +0100
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
References: <20141213234036.GD9516@localhost>
	<CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
Message-ID: <20141214180323.GB8666@localhost>

On Sun, Dec 14, 2014 at 08:52:45AM +0700, Martin Dobias wrote:
> Hi Sandro
> 
> On Sun, Dec 14, 2014 at 6:40 AM, Sandro Santilli <strk at keybit.net> wrote:
> 
> > Does it make sense to show a layer's legend while the layer visibility is
> > off,
> > or should the legend nodes in the layertree really be removed ?
> 
> When map-based filtering is enabled, the legend nodes for invisible layers
> are not shown. Technically they are not deleted, they are just filtered out
> inside the layer tree model.

I do see calls to QgsLayerTreeModel::refreshLayerLegend, which seems to
be _removing_ and _adding_ legends nodes:

https://github.com/qgis/QGIS/blob/master/src/core/layertree/qgslayertreemodel.cpp#L500-L518

By "invisible" I mean layers with the checkbox unchecked, not those
which are outside of the extent.

> > I'm wondering as I move steps toward optimization of WMS legend construction
> > for cases in which it is not needed: http://hub.qgis.org/issues/11860
> >
> > You probably don't want to incur in the cost of new WMS GetLegendGraphics
> > requests as you pan and zoom while the layer is invisible, but then would
> > you still want the last fetched legend visible in that case ?
> 
> Indeed you don't want such extra cost. But as I noted in the ticket, if a
> legend node is filtered out or in a collapsed part of a tree, the model
> will not ask about its data(), so if fetching is implemented there, it will
> be done lazily only when required.

I'm guessing ::refreshLayerLegend is called to _force_ re-asking for
the data() whenever the map extent changes. Anyway I'll follow your
suggestion about implementing lazy load of the legend.

> > The same applies to vector layers too, except the cost is much much lower
> > there. Does it make sense for map dependent legends to update while their
> > corresponding layer is invisible ? And to show the legend at all ?
> 
> Map dependent legends for each layer are not re-created completely on every
> change of map extent: only the filtering part is applied - and when they
> are invisible all legend nodes are filtered out.

Again, this is not what I'm seeing. And the implementation of
QgsLayerTreeModel::setLegendFilterByMap seem to confirm that
the layer legend is "refreshed":
https://github.com/qgis/QGIS/blob/master/src/core/layertree/qgslayertreemodel.cpp#L606-L609

There's also a comment suggesting:
"this could be later done in more efficient way by just updating active
 legend nodes, without refreshing original legend nodes"

What am I missing ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From veigacamargo at gmail.com  Sun Dec 14 10:29:00 2014
From: veigacamargo at gmail.com (Pedro Camargo)
Date: Sun, 14 Dec 2014 11:29:00 -0700
Subject: [Qgis-developer] Reading a new type of file natively in QGIS
Message-ID: <CAP=p+YsOFxsfMR+2dDJ=EngGDuM91HVekj4gLrBv8hEbYSjVmQ@mail.gmail.com>

Hi Alex,
               The idea is to use these matrices for a plugin I am
developing (www.aequilibrae.com) and in all related transportation
analysis.  As of now, I am using matrices in the format you mentioned, but
it is practice in the transportation modeling world to visualize matrices
as such.  It is not a deal breaker or anything. Just something nice to have.

Thanks,

Pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141214/fdba0d9a/attachment-0001.html>

From denis.rouzaud at gmail.com  Sun Dec 14 22:41:02 2014
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Mon, 15 Dec 2014 07:41:02 +0100
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <548D9ACF.9010105@geograph.co.za>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>	<B06F52D2-A643-4BDA-8F3B-51EEEB6DF80B@gmail.com>
	<548D9ACF.9010105@geograph.co.za>
Message-ID: <548E827E.4090105@gmail.com>

Hi,

On 14.12.2014 15:12, Zoltan Szecsei wrote:
> On 2014/12/14 15:20, Rouzaud Denis wrote:
>>
>> From my point of view, the settings of snapping are far too advanced 
>> for 95% of the usage. Let?s not make them even more complicated, just 
>> for a very specific use case.
>
> Hi Denis,
> I have to disagree with you, as someone who does a fair amount of 
> digitising.
>
> To support Ramon, I too work with many map layers in many different 
> projections, so we mustn't lose facilities that we (even by accident) 
> have.
>
> Some points:
>
>   * Being able to set a global tolerance in linear units, and have
>     QGIS convert that to the relevant layer CRS would be VERY useful.
>     ie: I want a 10m snapping tolerance even if I am on a LatLong map
>     layer.
>
well, the case you mention is not feasible today in QGIS and will be 
handled by my proposal of having the "map units" and dropping "layer units".
>
>  *
>
>
>   * QGIS only allows Snap Modes "To Vertex", "To Segment" or "To
>     Vertex and Segment"
>     What if both a Line-end and a Vertex on that same line is within
>     tolerance?
>     We really need to differentiate between Point (the Start & End
>     Vertex of a Line or Polygon), Vertex and Segment AND be able to
>     set the Snapping order between those three components of a
>     graphical entity.
>   * The snapping order between layers is currently set to the order of
>     the maps in your Layer Tree. Depending on the features you are
>     digitising, this is not optimal as one often needs to have a layer
>     snapping order different from the viewing order.
>   * It would be useful to set the layer snapping order in the Snapping
>     Options table, and have the _option_ (and not enforced by the
>     developer) to prioritise the current map being edited.
>   * If I remember correctly, snapping returns a position from the
>     first layer it finds anything in, and IIRC if there are multiple
>     snaps on that layer, the closest is returned? What if there are
>     still unsearched layers that might have something within tolerance?
>
I agree with these points but they are not related to the question of 
the units for the snapping.

We do a lot of digitizing too, and what I've noticed:
* 95% of the time, the precision is given in pixels because that's the 
most natural to work with (no scale dependency).
* for the rest, working in the project unit is ideal.

What is the chance of working with a layer with a projection on a 
project in geographic coordinates and do digitizing?

Maybe, there will be a very specific use-case for layer units.

But, for me the aim of QGIS is to stay the most intuitive possible and 
not to be weighed down under tons of configuration possibilities.

Also, I do believe it will make the code more complex (Martin?).

That's my main two reasons for not keeping the "layer units".

Best regards,

Denis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141215/6a2c8ece/attachment.html>

From zoltans at geograph.co.za  Sun Dec 14 23:13:41 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 15 Dec 2014 09:13:41 +0200
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <548E827E.4090105@gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>	<B06F52D2-A643-4BDA-8F3B-51EEEB6DF80B@gmail.com>
	<548D9ACF.9010105@geograph.co.za> <548E827E.4090105@gmail.com>
Message-ID: <548E8A25.4060107@geograph.co.za>

Hi Denis/All,

On 2014/12/15 08:41, Denis Rouzaud wrote:
>
>>   * Being able to set a global tolerance in linear units, and have
>>     QGIS convert that to the relevant layer CRS would be VERY useful.
>>     ie: I want a 10m snapping tolerance even if I am on a LatLong map
>>     layer.
>>
> well, the case you mention is not feasible today in QGIS and will be 
> handled by my proposal of having the "map units" and dropping "layer 
> units".
So I would have to (outside of QGIS) manually calculate the degrees (at 
my current latitude) I would have to insert into the Snapping options, 
for whatever linear snapping tolerance I want to set?
>>
>>  *
>>
>>
>>   * QGIS only allows Snap Modes "To Vertex", "To Segment" or "To
>>     Vertex and Segment"
>>     What if both a Line-end and a Vertex on that same line is within
>>     tolerance?
>>     We really need to differentiate between Point (the Start & End
>>     Vertex of a Line or Polygon), Vertex and Segment AND be able to
>>     set the Snapping order between those three components of a
>>     graphical entity.
>>   * The snapping order between layers is currently set to the order
>>     of the maps in your Layer Tree. Depending on the features you are
>>     digitising, this is not optimal as one often needs to have a
>>     layer snapping order different from the viewing order.
>>   * It would be useful to set the layer snapping order in the
>>     Snapping Options table, and have the _option_ (and not enforced
>>     by the developer) to prioritise the current map being edited.
>>   * If I remember correctly, snapping returns a position from the
>>     first layer it finds anything in, and IIRC if there are multiple
>>     snaps on that layer, the closest is returned? What if there are
>>     still unsearched layers that might have something within tolerance?
>>
> I agree with these points but they are not related to the question of 
> the units for the snapping.
Agreed - but whilst the developer/maintainer is busy in that part of 
QGIS, wouldn't it be nice to know what amendment requests might be 
coming up or doable at the same time? So the above list is not a formal 
request (QEP?) but rather a 'headsup' on what else might be worth 
considering.
>
> We do a lot of digitizing too, and what I've noticed:
> * 95% of the time, the precision is given in pixels because that's the 
> most natural to work with (no scale dependency).
Valid for manual digitising, but not for scripted testing if "minimum 
distance" rules have been adhered to by your digitising staff.
> * for the rest, working in the project unit is ideal.
Except if projects CRS is in LATLONG.
>
> What is the chance of working with a layer with a projection on a 
> project in geographic coordinates and do digitizing?
Thank you for asking :-)
South Africa is covered by 1920 'mapsheets' that are printed at 1:50K, 
but captured at closer to 1:10K details levels.
I have digitised/revised 1114 of these mapsheets. That's more than half 
of South Africa.
When working at a national level, the question here is/"What is the 
chance of working with a layer with a projection on a project that is 
NOT in geographic coordinates, and do digitizing?"/
>
> Maybe, there will be a very specific use-case for layer units.
>
> But, for me the aim of QGIS is to stay the most intuitive possible and 
> not to be weighed down under tons of configuration possibilities.
Intuitive use comes from sensible defaults, and not from removing wider 
options that a handful of people (handful in relation to the user base) 
deem not necessary.
>
> Also, I do believe it will make the code more complex (Martin?).
A programmer writes a piece of code FAAAR less often than that that 
piece of code gets used by the user, so the focus must always be on user 
friendliness (sensible defaults) and the user's ability to make that 
function work the way he needs it.

So, I am NOT meaning to be argumentative, but the work I have carried 
out over the years, does fit into the usage case that you are a 
proponent of removing, so I am highlighting the need for that case.

Kind regards,
Zoltan
>
> That's my main two reasons for not keeping the "layer units".
>
> Best regards,
>
> Denis
>


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141215/bf3647a4/attachment.html>

From wonder.sk at gmail.com  Sun Dec 14 23:46:42 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 15 Dec 2014 14:46:42 +0700
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <CABqTJk__pThfUE+jbdhK=d4Nq3oW_ZkaJAxNRtKxWQu_D+2z6Q@mail.gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
	<CABqTJk__pThfUE+jbdhK=d4Nq3oW_ZkaJAxNRtKxWQu_D+2z6Q@mail.gmail.com>
Message-ID: <CAC2XbFe03r+8O-Tqobs_Mwsjo7_NrVVWBhodXZEtusbEOeTJmA@mail.gmail.com>

Hi Andrea

On Sat, Dec 13, 2014 at 3:39 PM, Andrea Peri <aperi2007 at gmail.com> wrote:
>
> Hi,
> perhaps I dont understand well what this mean.
> Infact we usually editing always in native reference system, never
> editing in reprojected SRS.
>

Then you do not need to be worried :-)


But I guess that using the project reference system instead of the
> layer srs for snap operations
> could cause the snap will affect from an error due to the reprojection
> operation.
>

This has always happened in QGIS snapping: if you digitize in a different
CRS, the snapped coordinates may suffer from reprojection errors (snapped
coords are reprojected from layer coords to map coords and then eventually
again to layer coords). We are talking about numerical errors because of
the finite precision -


If this is true, this could mean that the editing result could change
> moving from a PC where the precision in due to some local NTv2 data
> (more precision in reporjection), to another pc where the NTv2 are not
> available.
> And also it could depend from the trasformation choose for the
> reprojection.
>

This problem is not really specific to snapping. If you misconfigure your
reprojection, you may digitize with incorrect coordinates regardless of any
snapping.

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141215/47f0c3c4/attachment.html>

From marco.hugentobler at sourcepole.ch  Mon Dec 15 00:07:50 2014
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Mon, 15 Dec 2014 09:07:50 +0100
Subject: [Qgis-developer] Snapping tolerance
In-Reply-To: <B06F52D2-A643-4BDA-8F3B-51EEEB6DF80B@gmail.com>
References: <CAC2XbFewwqR56-V9JhrAWMwr_CGAMYbxnrdJJO1D7cjNha+tGQ@mail.gmail.com>
	<B06F52D2-A643-4BDA-8F3B-51EEEB6DF80B@gmail.com>
Message-ID: <548E96D6.9060600@sourcepole.ch>

Hi Denis

 >Regarding Marco?s use case, using the 50cm limit should be equivalent 
in map units, no?

The map units can be degrees and the layer units meters. Morover, the 
distortion is not equal in x- and y- direction. So converting the 50cm 
to degrees will be a different number depending where you are on the map 
and in which direction. The same holds for conversions between meter 
systems (e.g. google mercator <-> swiss grid). So the only more or less 
accurate thing is to use layer units.

Regards,
Marco

On 14.12.2014 14:20, Rouzaud Denis wrote:
> Hi,
>
> I would say +1 for map units.
>
> Regarding Marco?s use case, using the 50cm limit should be equivalent 
> in map units, no?
>
> From my point of view, the settings of snapping are far too advanced 
> for 95% of the usage. Let?s not make them even more complicated, just 
> for a very specific use case.
>
> My 2 ct.
>
> Denis
>
>
>> On 13 Dec 2014, at 07:02, Martin Dobias <wonder.sk at gmail.com 
>> <mailto:wonder.sk at gmail.com>> wrote:
>>
>> Hi
>>
>> Recently I have been working on some snapping improvements (more 
>> about that later) and I have found one slightly surprising thing 
>> about the configuration of tolerances: if the tolerance unit is set 
>> to "map units", it actually means "layer units" - i.e. units in 
>> layer's CRS and not in project's CRS. Recently there was even a bug 
>> report filed for that: https://hub.qgis.org/issues/11634
>>
>> I would like to change the behavior so that the "map units" in 
>> snapping config dialog would mean units in project's CRS. Would there 
>> be any objections?
>>
>> Alternatively we could just rename "map units" to "layer units" to 
>> make it less surprising (and eventually add a third option to use 
>> project's units).
>>
>> Cheers
>> Martin
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org <mailto:Qgis-developer at lists.osgeo.org>
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141215/0c05945c/attachment-0001.html>

From wonder.sk at gmail.com  Mon Dec 15 00:21:15 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 15 Dec 2014 15:21:15 +0700
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <20141214180323.GB8666@localhost>
References: <20141213234036.GD9516@localhost>
	<CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
	<20141214180323.GB8666@localhost>
Message-ID: <CAC2XbFf3dezKH4WpvtrvOGPSR5OQoAoVTp5gkT7wG6--aW=_nQ@mail.gmail.com>

On Mon, Dec 15, 2014 at 1:03 AM, Sandro Santilli <strk at keybit.net> wrote:
>
>
> I'm guessing ::refreshLayerLegend is called to _force_ re-asking for
> the data() whenever the map extent changes. Anyway I'll follow your
> suggestion about implementing lazy load of the legend.
>

There is a softer way to ask to call legend node's data() again - the
legend node can emit dataChanged() signal. This is used e.g. for symbols
defined in map units - when the scale changes they will tell the model to
update (QgsSymbolV2LegendNode::invalidateMapBasedData()).


> > The same applies to vector layers too, except the cost is much much
> lower
> > > there. Does it make sense for map dependent legends to update while
> their
> > > corresponding layer is invisible ? And to show the legend at all ?
> >
> > Map dependent legends for each layer are not re-created completely on
> every
> > change of map extent: only the filtering part is applied - and when they
> > are invisible all legend nodes are filtered out.
>
> Again, this is not what I'm seeing. And the implementation of
> QgsLayerTreeModel::setLegendFilterByMap seem to confirm that
> the layer legend is "refreshed":
>
> https://github.com/qgis/QGIS/blob/master/src/core/layertree/qgslayertreemodel.cpp#L606-L609
>
> There's also a comment suggesting:
> "this could be later done in more efficient way by just updating active
>  legend nodes, without refreshing original legend nodes"
>

Oh sorry for adding confusion. In my previous mail I was writing what I
_thought_ I did instead of what I have actually done.

Indeed the filter-by-map removes all legend nodes and re-adds them - the
comment is valid that ideally we should do less work and not request all
legend nodes again from QgsMapLayerLegend. We already keep the legend nodes
in mOriginalLegendNodes, so it is mainly about writing a new function to
reuse them when filtering by map content. One could go even further and not
to do a bulk remove+insert rows operations - instead one could just compare
two lists "before" and "after" and insert/remove rows only where needed.

In the initial implementation I was not having any performance problems
with the simple approach - obviously it would be nicer not to recreate the
legend nodes when not necessary.

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141215/f1769f2b/attachment.html>

From strk at keybit.net  Mon Dec 15 03:32:48 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 15 Dec 2014 12:32:48 +0100
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <CAC2XbFf3dezKH4WpvtrvOGPSR5OQoAoVTp5gkT7wG6--aW=_nQ@mail.gmail.com>
References: <20141213234036.GD9516@localhost>
	<CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
	<20141214180323.GB8666@localhost>
	<CAC2XbFf3dezKH4WpvtrvOGPSR5OQoAoVTp5gkT7wG6--aW=_nQ@mail.gmail.com>
Message-ID: <20141215113248.GA6479@localhost>

On Mon, Dec 15, 2014 at 03:21:15PM +0700, Martin Dobias wrote:
> On Mon, Dec 15, 2014 at 1:03 AM, Sandro Santilli <strk at keybit.net> wrote:
> >
> >
> > I'm guessing ::refreshLayerLegend is called to _force_ re-asking for
> > the data() whenever the map extent changes. Anyway I'll follow your
> > suggestion about implementing lazy load of the legend.
> >
> 
> There is a softer way to ask to call legend node's data() again - the
> legend node can emit dataChanged() signal. This is used e.g. for symbols
> defined in map units - when the scale changes they will tell the model to
> update (QgsSymbolV2LegendNode::invalidateMapBasedData()).

Ah, interesting. But I see invalidateMapBasedData is invoked on all legend
nodes by QgsLayerTreeModel::setLegendMapViewData but not by
QgsLayerTreeModel::setLegendFilterByMap. Should the latter also invoke
the invalidation method ?

Another thing. The QgsMapLayerLegend object is currently independent
from a QgsMapCanvas, and thus from the settings of the map (extent).
In my PR (#1735) I've added an optional QgsMapSetting parameter to
the virtual QgsMapLayerLegend::createLayerTreeModelLegendNodes method.
That way the settings can be embedded in the nodes, but if we have to
rely on data() updating the legend, we'd need a way to pass the updated
map settings again, or keep the old settings by pointer.

Would it be inappropriate to store a pointer to the QgsLayerTreeModel
into a QgsLayerTreeModelLegendNode ? Or is there already such link ?

> Indeed the filter-by-map removes all legend nodes and re-adds them - the
> comment is valid that ideally we should do less work and not request all
> legend nodes again from QgsMapLayerLegend. We already keep the legend nodes
> in mOriginalLegendNodes, so it is mainly about writing a new function to
> reuse them when filtering by map content. One could go even further and not
> to do a bulk remove+insert rows operations - instead one could just compare
> two lists "before" and "after" and insert/remove rows only where needed.

Good idea, but also the "filtering" would need to be posibly done by
nodes themself. I mean there would be a "removing nodes" kind of filtering
and a "modify node contents" kind of filtering. Maybe there could be a
QgsLayerTreeModelLegendNode::filterByMap() method that would return
a value indicating if the node should be kept or removed, and would have
a chance to update its contents. What would you think about that ?

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From wonder.sk at gmail.com  Mon Dec 15 03:56:39 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 15 Dec 2014 18:56:39 +0700
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <20141215113248.GA6479@localhost>
References: <20141213234036.GD9516@localhost>
	<CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
	<20141214180323.GB8666@localhost>
	<CAC2XbFf3dezKH4WpvtrvOGPSR5OQoAoVTp5gkT7wG6--aW=_nQ@mail.gmail.com>
	<20141215113248.GA6479@localhost>
Message-ID: <CAC2XbFcr4_hOfv0dS2EPD=pht1iWU2UY8GEki360Qg+G4GxAZw@mail.gmail.com>

On Mon, Dec 15, 2014 at 6:32 PM, Sandro Santilli <strk at keybit.net> wrote:
>
> On Mon, Dec 15, 2014 at 03:21:15PM +0700, Martin Dobias wrote:
> > On Mon, Dec 15, 2014 at 1:03 AM, Sandro Santilli <strk at keybit.net>
> wrote:
> > >
> > >
> > > I'm guessing ::refreshLayerLegend is called to _force_ re-asking for
> > > the data() whenever the map extent changes. Anyway I'll follow your
> > > suggestion about implementing lazy load of the legend.
> > >
> >
> > There is a softer way to ask to call legend node's data() again - the
> > legend node can emit dataChanged() signal. This is used e.g. for symbols
> > defined in map units - when the scale changes they will tell the model to
> > update (QgsSymbolV2LegendNode::invalidateMapBasedData()).
>
> Ah, interesting. But I see invalidateMapBasedData is invoked on all legend
> nodes by QgsLayerTreeModel::setLegendMapViewData but not by
> QgsLayerTreeModel::setLegendFilterByMap. Should the latter also invoke
> the invalidation method ?
>

That sounds reasonably. The invalidateMapBasedData() could have optional
pointer to QgsMapSettings, so the WMS legend node would have a way to find
out about the details of the map view (bbox, dpi, etc).


Another thing. The QgsMapLayerLegend object is currently independent
> from a QgsMapCanvas, and thus from the settings of the map (extent).
> In my PR (#1735) I've added an optional QgsMapSetting parameter to
> the virtual QgsMapLayerLegend::createLayerTreeModelLegendNodes method.
> That way the settings can be embedded in the nodes, but if we have to
> rely on data() updating the legend, we'd need a way to pass the updated
> map settings again, or keep the old settings by pointer.
>

I'm not sure I like the fact that QgsMapSettings would be passed when
legend nodes are created. I guess with invalidateMapBasedData() having
QgsMapSettings pointer that would not be necessary.


Would it be inappropriate to store a pointer to the QgsLayerTreeModel
> into a QgsLayerTreeModelLegendNode ? Or is there already such link ?
>

Yes there is QgsLayerTreeModelLegendNode::model()



> > Indeed the filter-by-map removes all legend nodes and re-adds them - the
> > comment is valid that ideally we should do less work and not request all
> > legend nodes again from QgsMapLayerLegend. We already keep the legend
> nodes
> > in mOriginalLegendNodes, so it is mainly about writing a new function to
> > reuse them when filtering by map content. One could go even further and
> not
> > to do a bulk remove+insert rows operations - instead one could just
> compare
> > two lists "before" and "after" and insert/remove rows only where needed.
>
> Good idea, but also the "filtering" would need to be posibly done by
> nodes themself. I mean there would be a "removing nodes" kind of filtering
> and a "modify node contents" kind of filtering. Maybe there could be a
> QgsLayerTreeModelLegendNode::filterByMap() method that would return
> a value indicating if the node should be kept or removed, and would have
> a chance to update its contents. What would you think about that ?
>

That would be nice to have it directly inside legend nodes, but you would
still need something that would run QgsMapHitTest and then pass it to
individual nodes. So I am not sure if that would actually help.

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141215/24ba6787/attachment.html>

From zoltans at geograph.co.za  Mon Dec 15 04:17:28 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 15 Dec 2014 14:17:28 +0200
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548B5920.3040408@nurfuerspam.de>
References: <548AF9DB.1020109@geograph.co.za>	<548B09A4.30301@nurfuerspam.de>	<548B0CAE.8080202@geograph.co.za>	<548B1320.3000608@nurfuerspam.de>	<548B13FD.9050709@geograph.co.za>	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>	<548B4327.9000306@nurfuerspam.de>	<CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>
	<548B5920.3040408@nurfuerspam.de>
Message-ID: <548ED158.9060600@geograph.co.za>

On 2014/12/12 23:07, Andre Joost wrote:
>
> Installing from Ubuntugis-unstable for trusty 14.04 will give you gdal
> 1.11 with the desired EPSG:6148. For Ubuntu Utopic 14.10, there is
> currently qgis, but no gdal package available.

I'm hoping to get gdal-bin current/latest on my ubuntu  12.04 (lucid) 
box, but the ubuntugis unstable lucid repository comes up with IGN.
Presumably because there have been no backports to lucid?

I've tried to fool it by simply replacing 'lucid' with 'trusty' in the 
sources.list file, but that comes up IGN as well. (perhaps just as well 
:-) )

Is there any way I can do this?

TIA,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From strk at keybit.net  Mon Dec 15 05:24:27 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 15 Dec 2014 14:24:27 +0100
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <CAC2XbFcr4_hOfv0dS2EPD=pht1iWU2UY8GEki360Qg+G4GxAZw@mail.gmail.com>
References: <20141213234036.GD9516@localhost>
	<CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
	<20141214180323.GB8666@localhost>
	<CAC2XbFf3dezKH4WpvtrvOGPSR5OQoAoVTp5gkT7wG6--aW=_nQ@mail.gmail.com>
	<20141215113248.GA6479@localhost>
	<CAC2XbFcr4_hOfv0dS2EPD=pht1iWU2UY8GEki360Qg+G4GxAZw@mail.gmail.com>
Message-ID: <20141215132427.GB6479@localhost>

On Mon, Dec 15, 2014 at 06:56:39PM +0700, Martin Dobias wrote:
> On Mon, Dec 15, 2014 at 6:32 PM, Sandro Santilli <strk at keybit.net> wrote:
> > On Mon, Dec 15, 2014 at 03:21:15PM +0700, Martin Dobias wrote:

> > > There is a softer way to ask to call legend node's data() again - the
> > > legend node can emit dataChanged() signal. This is used e.g. for symbols
> > > defined in map units - when the scale changes they will tell the model to
> > > update (QgsSymbolV2LegendNode::invalidateMapBasedData()).
> >
> > Ah, interesting. But I see invalidateMapBasedData is invoked on all legend
> > nodes by QgsLayerTreeModel::setLegendMapViewData but not by
> > QgsLayerTreeModel::setLegendFilterByMap. Should the latter also invoke
> > the invalidation method ?
> 
> That sounds reasonably. The invalidateMapBasedData() could have optional
> pointer to QgsMapSettings, so the WMS legend node would have a way to find
> out about the details of the map view (bbox, dpi, etc).

Great, I'll look into that !

> I'm not sure I like the fact that QgsMapSettings would be passed when
> legend nodes are created. I guess with invalidateMapBasedData() having
> QgsMapSettings pointer that would not be necessary.

If we want ::data() to lazily load the legend, there will be a need to
store the "last used map settings" anyway. Unless we leave all the caching
to the single layer (rather than to each of the layertree nodes).

> > Would it be inappropriate to store a pointer to the QgsLayerTreeModel
> > into a QgsLayerTreeModelLegendNode ? Or is there already such link ?
> 
> Yes there is QgsLayerTreeModelLegendNode::model()

A-ha, thanks ! This should simplify the current PR.

> > Good idea, but also the "filtering" would need to be posibly done by
> > nodes themself. I mean there would be a "removing nodes" kind of filtering
> > and a "modify node contents" kind of filtering. Maybe there could be a
> > QgsLayerTreeModelLegendNode::filterByMap() method that would return
> > a value indicating if the node should be kept or removed, and would have
> > a chance to update its contents. What would you think about that ?
> 
> That would be nice to have it directly inside legend nodes, but you would
> still need something that would run QgsMapHitTest and then pass it to
> individual nodes. So I am not sure if that would actually help.

Got it.

--strk;

From Stefan.Ziegler at bd.so.ch  Mon Dec 15 06:04:52 2014
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Mon, 15 Dec 2014 14:04:52 +0000
Subject: [Qgis-developer] Ugly jumping maps while zooming
Message-ID: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>

Hi 

When I zoom in/out, the map contents is jumping to the upper left corner and then jumps back to the right place. I'm on Ubuntu 14.04. Does anybody sees the same effect?

Regards
Stefan 

Freundliche Gr?sse 
Stefan Ziegler 
Kantonsgeometer 

Amt f?r Geoinformation
Amtliche Vermessung 
R?tistrasse 4 
4500 Solothurn 

Telefon +41 32 627 75 96
Telefax +41 32 627 75 98 
stefan.ziegler at bd.so.ch
http://www.so.ch 



From matthias.kuhn at gmx.ch  Mon Dec 15 06:13:56 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Mon, 15 Dec 2014 15:13:56 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
Message-ID: <548EECA4.4010009@gmx.ch>

Hi Stefan,

Please see this issue:
http://hub.qgis.org/issues/11811
And there's a pull request to fix this:
https://github.com/qgis/QGIS/pull/1734

Best
Matthias

On 15.12.2014 15:04, Ziegler Stefan wrote:
> Hi 
>
> When I zoom in/out, the map contents is jumping to the upper left corner and then jumps back to the right place. I'm on Ubuntu 14.04. Does anybody sees the same effect?
>
> Regards
> Stefan 
>
> Freundliche Gr?sse 
> Stefan Ziegler 
> Kantonsgeometer 
>
> Amt f?r Geoinformation
> Amtliche Vermessung 
> R?tistrasse 4 
> 4500 Solothurn 
>
> Telefon +41 32 627 75 96
> Telefax +41 32 627 75 98 
> stefan.ziegler at bd.so.ch
> http://www.so.ch 
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From strk at keybit.net  Mon Dec 15 06:58:24 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 15 Dec 2014 15:58:24 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <548EECA4.4010009@gmx.ch>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch>
Message-ID: <20141215145824.GA7896@localhost>

On Mon, Dec 15, 2014 at 03:13:56PM +0100, Matthias Kuhn wrote:
> Hi Stefan,
> 
> Please see this issue:
> http://hub.qgis.org/issues/11811
> And there's a pull request to fix this:
> https://github.com/qgis/QGIS/pull/1734

Stefan, if you like the fix you see in the pull request 1734 please
report so. I'd like to merge it in master as soon as possible but
need more review :)

--strk;

From Stefan.Ziegler at bd.so.ch  Mon Dec 15 07:02:29 2014
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Mon, 15 Dec 2014 15:02:29 +0000
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <20141215145824.GA7896@localhost>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
Message-ID: <96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>

Hi Sandro

I just know git clone, push and pull :-) Is there a simple command to use this PR?

Regards
Stefan

> -----Urspr?ngliche Nachricht-----
> Von: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-
> bounces at lists.osgeo.org] Im Auftrag von Sandro Santilli
> Gesendet: Montag, 15. Dezember 2014 15:58
> An: Matthias Kuhn
> Cc: qgis-developer at lists.osgeo.org
> Betreff: Re: [Qgis-developer] Ugly jumping maps while zooming
> 
> On Mon, Dec 15, 2014 at 03:13:56PM +0100, Matthias Kuhn wrote:
> > Hi Stefan,
> >
> > Please see this issue:
> > http://hub.qgis.org/issues/11811
> > And there's a pull request to fix this:
> > https://github.com/qgis/QGIS/pull/1734
> 
> Stefan, if you like the fix you see in the pull request 1734 please report so. I'd like to
> merge it in master as soon as possible but need more review :)
> 
> --strk;
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From strk at keybit.net  Mon Dec 15 07:05:14 2014
From: strk at keybit.net ('Sandro Santilli')
Date: Mon, 15 Dec 2014 16:05:14 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
Message-ID: <20141215150514.GB7896@localhost>

On Mon, Dec 15, 2014 at 03:02:29PM +0000, Ziegler Stefan wrote:
> Hi Sandro
> 
> I just know git clone, push and pull :-) Is there a simple command to use this PR?

git pull git://github.com/strk/QGIS.git zoom-by-wheel-glitch2

--strk;

From strk at keybit.net  Mon Dec 15 07:21:46 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 15 Dec 2014 16:21:46 +0100
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <20141215132427.GB6479@localhost>
References: <20141213234036.GD9516@localhost>
	<CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
	<20141214180323.GB8666@localhost>
	<CAC2XbFf3dezKH4WpvtrvOGPSR5OQoAoVTp5gkT7wG6--aW=_nQ@mail.gmail.com>
	<20141215113248.GA6479@localhost>
	<CAC2XbFcr4_hOfv0dS2EPD=pht1iWU2UY8GEki360Qg+G4GxAZw@mail.gmail.com>
	<20141215132427.GB6479@localhost>
Message-ID: <20141215152146.GC7896@localhost>

On Mon, Dec 15, 2014 at 02:24:27PM +0100, Sandro Santilli wrote:
> On Mon, Dec 15, 2014 at 06:56:39PM +0700, Martin Dobias wrote:

> > I'm not sure I like the fact that QgsMapSettings would be passed when
> > legend nodes are created. I guess with invalidateMapBasedData() having
> > QgsMapSettings pointer that would not be necessary.
> 
> If we want ::data() to lazily load the legend, there will be a need to
> store the "last used map settings" anyway. Unless we leave all the caching
> to the single layer (rather than to each of the layertree nodes).

I'm testing this lazy load of legend from QgsWMSLegendNode::data but
experiencing memory errors due to what looks like fragility of the
QgsWmsProvider::getLegendGraphic method. In particular, calling that
method again while the old one did not get to a complete response
from server seems to put it in an unusable state, eventually getting
to segfaults. Does it make sense ?

In order words, shouldn't QgsWmsProvider::getLegendGraphic guard
after mGetLegendGraphicReply being already set and refuse to override
it ?

Also, what's the QImage returned by that function, if it is supposed to
be waiting for a response ?

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From cavallini at faunalia.it  Mon Dec 15 07:22:11 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 15 Dec 2014 16:22:11 +0100
Subject: [Qgis-developer] Loading layer from zip
Message-ID: <548EFCA3.8080808@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
Loading a shp form a zipfile works smoothly. On the contrary, a
MapInfo file (.tab) throws an error (Layer not valid).
Confirmed on Debian and Win, qgis 2.6.1.
Am I missing something, or should I open a ticket?
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSO/KIACgkQ/NedwLUzIr7BkQCgi6KwwJ3pkdhpY8cQ9FVNsbKb
2vEAn1i63bQxlKNifMrR+WMIjnl7awVc
=FBiT
-----END PGP SIGNATURE-----

From ijturton at gmail.com  Mon Dec 15 07:37:42 2014
From: ijturton at gmail.com (Ian Turton)
Date: Mon, 15 Dec 2014 15:37:42 +0000
Subject: [Qgis-developer] Make error - QGIS Latest (2.6.0)
References: <mailman.39.1414868404.7255.qgis-developer@lists.osgeo.org>
	<373A0C38-0FA9-4164-AC31-0948856932DD@dimensionaledge.com>
Message-ID: <CA+=cGJn6Fr+pPqz-OpC0JTvvjY4bvOV4EPxCNOG+fZi3cyqG8g@mail.gmail.com>

Was a solution found for this error? I'm trying to build 2.6.1 and it's
falling foul of the same error that Mark talks about here, but it's beyond
my limited python skills to work out how to fix it.

Cheers

Ian

On Mon Nov 03 2014 at 10:22:28 AM Mark Wynter <mark at dimensionaledge.com>
wrote:

> Thanks Jurgen  Yep, that was the problem.   Built with latest QScintilla2
> from source.   Successfully installed QGIS 2.7.0 (git master repository)
> on CentOS65.
>
> However, I get a ?processing' error message on starting QGIS2.7.0.  Didn?t
> have this problem two days ago with QGIS2.4.0.
>
> Couldn't load plugin 'processing' from ['/usr/local/share/qgis/python',
> '/home/mark/.qgis2/python', '/home/mark/.qgis2/python/plugins',
> '/usr/local/share/qgis/python/plugins', '/usr/lib64/python26.zip',
> '/usr/lib64/python2.6', '/usr/lib64/python2.6/plat-linux2',
> '/usr/lib64/python2.6/lib-tk', '/usr/lib64/python2.6/lib-old',
> '/usr/lib64/python2.6/lib-dynload', '/usr/lib64/python2.6/site-packages',
> '/usr/lib64/python2.6/site-packages/PIL',
> '/usr/lib64/python2.6/site-packages/gst-0.10',
> '/usr/lib64/python2.6/site-packages/gtk-2.0',
> '/usr/lib64/python2.6/site-packages/webkit-1.0',
> '/usr/lib64/python2.6/site-packages/wx-2.8-gtk2-unicode',
> '/usr/lib/python2.6/site-packages',
> '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info',
> '/usr/local/share/qgis/python/plugins/fTools/tools']
>
>
> Traceback (most recent call last):
>   File "/usr/local/share/qgis/python/qgis/utils.py", line 185, in
> loadPlugin
>     __import__(packageName)
>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
>   File "/usr/local/share/qgis/python/plugins/processing/__init__.py", line
> 29, in
>     from processing.tools.general import *
>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
>   File "/usr/local/share/qgis/python/plugins/processing/tools/general.py",
> line 29, in
>     from processing.core.Processing import Processing
>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
>   File
> "/usr/local/share/qgis/python/plugins/processing/core/Processing.py", line
> 47, in
>     from processing.modeler.ModelerAlgorithmProvider import \
>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
>   File
> "/usr/local/share/qgis/python/plugins/processing/modeler/ModelerAlgorithmProvider.py",
> line 35, in
>     from processing.modeler.ModelerAlgorithm import ModelerAlgorithm
>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
>   File
> "/usr/local/share/qgis/python/plugins/processing/modeler/ModelerAlgorithm.py",
> line 100
>     return {k:v for k,v in self.__dict__.iteritems() if  not
> k.startswith("_")}
>                   ^
> SyntaxError: invalid syntax
>
>
> Python version:
> 2.6.6 (r266:84292, Jan 22 2014, 09:42:36)
> [GCC 4.4.7 20120313 (Red Hat 4.4.7-4)]
>
>
> QGIS version:
> 2.7.0-Master Master, exported
>
> Python path: ['/usr/local/share/qgis/python', u'/home/mark/.qgis2/python',
> u'/home/mark/.qgis2/python/plugins',
> '/usr/local/share/qgis/python/plugins', '/usr/lib64/python26.zip',
> '/usr/lib64/python2.6', '/usr/lib64/python2.6/plat-linux2',
> '/usr/lib64/python2.6/lib-tk', '/usr/lib64/python2.6/lib-old',
> '/usr/lib64/python2.6/lib-dynload', '/usr/lib64/python2.6/site-packages',
> '/usr/lib64/python2.6/site-packages/PIL',
> '/usr/lib64/python2.6/site-packages/gst-0.10',
> '/usr/lib64/python2.6/site-packages/gtk-2.0',
> '/usr/lib64/python2.6/site-packages/webkit-1.0',
> '/usr/lib64/python2.6/site-packages/wx-2.8-gtk2-unicode',
> '/usr/lib/python2.6/site-packages',
> '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info',
> '/usr/local/share/qgis/python/plugins/fTools/tools']
>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141215/a9c8fff1/attachment-0001.html>

From andre+joost at nurfuerspam.de  Mon Dec 15 08:03:36 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 15 Dec 2014 17:03:36 +0100
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548ED158.9060600@geograph.co.za>
References: <548AF9DB.1020109@geograph.co.za>	<548B09A4.30301@nurfuerspam.de>	<548B0CAE.8080202@geograph.co.za>	<548B1320.3000608@nurfuerspam.de>	<548B13FD.9050709@geograph.co.za>	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>	<548B4327.9000306@nurfuerspam.de>	<CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>	<548B5920.3040408@nurfuerspam.de>
	<548ED158.9060600@geograph.co.za>
Message-ID: <548F0658.70607@nurfuerspam.de>

Am 15.12.2014 um 13:17 schrieb Zoltan Szecsei:
> On 2014/12/12 23:07, Andre Joost wrote:
>>
>> Installing from Ubuntugis-unstable for trusty 14.04 will give you gdal
>> 1.11 with the desired EPSG:6148. For Ubuntu Utopic 14.10, there is
>> currently qgis, but no gdal package available.
>
> I'm hoping to get gdal-bin current/latest on my ubuntu  12.04 (lucid)
> box, but the ubuntugis unstable lucid repository comes up with IGN.
> Presumably because there have been no backports to lucid?

lucid was 10.04, 12.04 is Precise.

For 10.04, gdal 1.11 is packaged, but qgis only 2.0.1 (and older than
the gdal package). This might bring some trouble, if the old qgis
package was compiled with gdal 1.10.

For 12.04, gdal 1.10.0 and QGIS 2.6.1 are packaged. My own 12.04 box
still has QGIS 2.2 installed, with no EPSG:6148 (as expected).

What do you mean by "comes up with IGN"?

>
> I've tried to fool it by simply replacing 'lucid' with 'trusty' in the
> sources.list file,


That trick was too easy ;-)

>
> Is there any way I can do this?
>

You can grab the source package from http://download.osgeo.org/gdal/CURRENT/

Look for the file compdcs.csv in /gdal-1.11.1/data/, and push it into
your /usr/share/gdal/1.10 folder. Then re-run /usr/lib/qgis/crssync. You
need root rights for both operations.

HTH,
Andr? Joost



From zoltans at geograph.co.za  Mon Dec 15 08:16:35 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 15 Dec 2014 18:16:35 +0200
Subject: [Qgis-developer] EPSG codes
In-Reply-To: <548F0658.70607@nurfuerspam.de>
References: <548AF9DB.1020109@geograph.co.za>	<548B09A4.30301@nurfuerspam.de>	<548B0CAE.8080202@geograph.co.za>	<548B1320.3000608@nurfuerspam.de>	<548B13FD.9050709@geograph.co.za>	<CAHVp9Xpimz-ogyPr7WCfM0od63XMpFBcxfW+zbOEdhsP_r-xeA@mail.gmail.com>	<548B4327.9000306@nurfuerspam.de>	<CAHVp9XpbjnURAnvbt3AR9MnNUyUYxthiGaNB+o7gwNUtL30SsA@mail.gmail.com>	<548B5920.3040408@nurfuerspam.de>	<548ED158.9060600@geograph.co.za>
	<548F0658.70607@nurfuerspam.de>
Message-ID: <548F0963.4030903@geograph.co.za>

On 2014/12/15 18:03, Andre Joost wrote:
> Am 15.12.2014 um 13:17 schrieb Zoltan Szecsei:
>> On 2014/12/12 23:07, Andre Joost wrote:
>>>
>>> Installing from Ubuntugis-unstable for trusty 14.04 will give you gdal
>>> 1.11 with the desired EPSG:6148. For Ubuntu Utopic 14.10, there is
>>> currently qgis, but no gdal package available.
>>
>> I'm hoping to get gdal-bin current/latest on my ubuntu  12.04 (lucid)
>> box, but the ubuntugis unstable lucid repository comes up with IGN.
>> Presumably because there have been no backports to lucid?
>
> lucid was 10.04, 12.04 is Precise.
Aaargh - sorry - I meant 10.04 (lucid is correct)
>
> For 10.04, gdal 1.11 is packaged, but qgis only 2.0.1 (and older than
> the gdal package). This might bring some trouble, if the old qgis
> package was compiled with gdal 1.10.
I wonder if that's how I messed it up some time back.
I normally don't use the server for "work", but I have 4TB of orthos to 
check/process, so was wanting to run my bash/awk scripts on the server 
instead of across the network.
>
> For 12.04, gdal 1.10.0 and QGIS 2.6.1 are packaged. My own 12.04 box
> still has QGIS 2.2 installed, with no EPSG:6148 (as expected).
This is not about the 6148 any more, but about gdal_edit.py and some 
newer gdal functionality that 1.9 does not have.
>
> What do you mean by "comes up with IGN"?
apt-get update lists the repositories as it scans them. 'Hit' means 
changes found, and 'IGN' means "same as on local system" ie: nothing to 
download.
See: 
http://askubuntu.com/questions/294525/what-does-ign-mean-when-running-an-apt-get-update

>
>>
>> I've tried to fool it by simply replacing 'lucid' with 'trusty' in the
>> sources.list file,
>
>
> That trick was too easy ;-)
>
>>
>> Is there any way I can do this?
>>
>
> You can grab the source package from 
> http://download.osgeo.org/gdal/CURRENT/
>
> Look for the file compdcs.csv in /gdal-1.11.1/data/, and push it into
> your /usr/share/gdal/1.10 folder. Then re-run /usr/lib/qgis/crssync. You
> need root rights for both operations.
I'll try the above if I am "pushed", but I'm loath to mass-change stuff 
on my server.
Reality is, is that I need to update the server to 14.04. Now, where was 
that round tuit I had .........
Thanks Andre.
Regards,
Zoltan
>
> HTH,
> Andr? Joost
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From strk at keybit.net  Mon Dec 15 09:07:24 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 15 Dec 2014 18:07:24 +0100
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <20141215152146.GC7896@localhost>
References: <20141213234036.GD9516@localhost>
	<CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
	<20141214180323.GB8666@localhost>
	<CAC2XbFf3dezKH4WpvtrvOGPSR5OQoAoVTp5gkT7wG6--aW=_nQ@mail.gmail.com>
	<20141215113248.GA6479@localhost>
	<CAC2XbFcr4_hOfv0dS2EPD=pht1iWU2UY8GEki360Qg+G4GxAZw@mail.gmail.com>
	<20141215132427.GB6479@localhost> <20141215152146.GC7896@localhost>
Message-ID: <20141215170724.GD7896@localhost>

On Mon, Dec 15, 2014 at 04:21:46PM +0100, Sandro Santilli wrote:
> On Mon, Dec 15, 2014 at 02:24:27PM +0100, Sandro Santilli wrote:
> > On Mon, Dec 15, 2014 at 06:56:39PM +0700, Martin Dobias wrote:
> 
> > > I'm not sure I like the fact that QgsMapSettings would be passed when
> > > legend nodes are created. I guess with invalidateMapBasedData() having
> > > QgsMapSettings pointer that would not be necessary.
> > 
> > If we want ::data() to lazily load the legend, there will be a need to
> > store the "last used map settings" anyway. Unless we leave all the caching
> > to the single layer (rather than to each of the layertree nodes).
> 
> I'm testing this lazy load of legend from QgsWMSLegendNode::data but
> experiencing memory errors due to what looks like fragility of the
> QgsWmsProvider::getLegendGraphic method. In particular, calling that
> method again while the old one did not get to a complete response
> from server seems to put it in an unusable state, eventually getting
> to segfaults. Does it make sense ?

In case you can/want take a look, I've pushed the lazy loading test code
here: https://github.com/strk/QGIS/tree/wmslegend-node

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Mon Dec 15 13:02:50 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 15 Dec 2014 22:02:50 +0100
Subject: [Qgis-developer] should legends be shown for invisible layers ?
In-Reply-To: <20141215152146.GC7896@localhost>
References: <20141213234036.GD9516@localhost>
	<CAC2XbFd0NNrxvegxe2V+CFYk7=Fo3syo6MDEGtw6o+rffaEhig@mail.gmail.com>
	<20141214180323.GB8666@localhost>
	<CAC2XbFf3dezKH4WpvtrvOGPSR5OQoAoVTp5gkT7wG6--aW=_nQ@mail.gmail.com>
	<20141215113248.GA6479@localhost>
	<CAC2XbFcr4_hOfv0dS2EPD=pht1iWU2UY8GEki360Qg+G4GxAZw@mail.gmail.com>
	<20141215132427.GB6479@localhost> <20141215152146.GC7896@localhost>
Message-ID: <20141215210249.GA4330@localhost>

On Mon, Dec 15, 2014 at 04:21:46PM +0100, Sandro Santilli wrote:
> On Mon, Dec 15, 2014 at 02:24:27PM +0100, Sandro Santilli wrote:
> > On Mon, Dec 15, 2014 at 06:56:39PM +0700, Martin Dobias wrote:
> 
> > > I'm not sure I like the fact that QgsMapSettings would be passed when
> > > legend nodes are created. I guess with invalidateMapBasedData() having
> > > QgsMapSettings pointer that would not be necessary.
> > 
> > If we want ::data() to lazily load the legend, there will be a need to
> > store the "last used map settings" anyway. Unless we leave all the caching
> > to the single layer (rather than to each of the layertree nodes).
> 
> I'm testing this lazy load of legend from QgsWMSLegendNode::data but
> experiencing memory errors due to what looks like fragility of the
> QgsWmsProvider::getLegendGraphic method. In particular, calling that
> method again while the old one did not get to a complete response
> from server seems to put it in an unusable state, eventually getting
> to segfaults. Does it make sense ?

To confirm the problem being in QgsWmsProvider::getLegendGraphic, this
implementation in ::data() removes any segfault:

#if 1
    QImage nImg( 256, 256, QImage::Format_ARGB32 );
    QPainter painter(&nImg);
    painter.drawText(QPointF(0,0), QString("provider is %1").arg((long)(layer->dataProvider())));
    mImage = nImg;
#else
    mImage = layer->dataProvider()->getLegendGraphic(0, false, extent);
#endif

Ginetto, you're the author of that function, can you think of a reason
why a call to that method can trigger a segfault originating from some qt
event ? See the backtrace here: http://strk.keybit.net/tmp/BT

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From mark at dimensionaledge.com  Mon Dec 15 14:28:30 2014
From: mark at dimensionaledge.com (Mark Wynter)
Date: Tue, 16 Dec 2014 08:58:30 +1030
Subject: [Qgis-developer] Make error - QGIS Latest (2.6.0)
In-Reply-To: <CA+=cGJn6Fr+pPqz-OpC0JTvvjY4bvOV4EPxCNOG+fZi3cyqG8g@mail.gmail.com>
References: <mailman.39.1414868404.7255.qgis-developer@lists.osgeo.org>
	<373A0C38-0FA9-4164-AC31-0948856932DD@dimensionaledge.com>
	<CA+=cGJn6Fr+pPqz-OpC0JTvvjY4bvOV4EPxCNOG+fZi3cyqG8g@mail.gmail.com>
Message-ID: <767314D3-F24B-487B-99B2-0D8AD97B1212@dimensionaledge.com>

Install Python 2.7 from source - not from yum. You will also need to compile qgis against Python 2.7

Sent from my iPhone

> On 16 Dec 2014, at 2:07 am, Ian Turton <ijturton at gmail.com> wrote:
> 
> Was a solution found for this error? I'm trying to build 2.6.1 and it's falling foul of the same error that Mark talks about here, but it's beyond my limited python skills to work out how to fix it.
> 
> Cheers
> 
> Ian
> 
>> On Mon Nov 03 2014 at 10:22:28 AM Mark Wynter <mark at dimensionaledge.com> wrote:
>> Thanks Jurgen  Yep, that was the problem.   Built with latest QScintilla2 from source.   Successfully installed QGIS 2.7.0 (git master repository)  on CentOS65.
>> 
>> However, I get a ?processing' error message on starting QGIS2.7.0.  Didn?t have this problem two days ago with QGIS2.4.0.  
>> 
>> Couldn't load plugin 'processing' from ['/usr/local/share/qgis/python', '/home/mark/.qgis2/python', '/home/mark/.qgis2/python/plugins', '/usr/local/share/qgis/python/plugins', '/usr/lib64/python26.zip', '/usr/lib64/python2.6', '/usr/lib64/python2.6/plat-linux2', '/usr/lib64/python2.6/lib-tk', '/usr/lib64/python2.6/lib-old', '/usr/lib64/python2.6/lib-dynload', '/usr/lib64/python2.6/site-packages', '/usr/lib64/python2.6/site-packages/PIL', '/usr/lib64/python2.6/site-packages/gst-0.10', '/usr/lib64/python2.6/site-packages/gtk-2.0', '/usr/lib64/python2.6/site-packages/webkit-1.0', '/usr/lib64/python2.6/site-packages/wx-2.8-gtk2-unicode', '/usr/lib/python2.6/site-packages', '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info', '/usr/local/share/qgis/python/plugins/fTools/tools']
>> 
>> 
>> Traceback (most recent call last):
>>   File "/usr/local/share/qgis/python/qgis/utils.py", line 185, in loadPlugin
>>     __import__(packageName)
>>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>   File "/usr/local/share/qgis/python/plugins/processing/__init__.py", line 29, in 
>>     from processing.tools.general import *
>>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>   File "/usr/local/share/qgis/python/plugins/processing/tools/general.py", line 29, in 
>>     from processing.core.Processing import Processing
>>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>   File "/usr/local/share/qgis/python/plugins/processing/core/Processing.py", line 47, in 
>>     from processing.modeler.ModelerAlgorithmProvider import \
>>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>   File "/usr/local/share/qgis/python/plugins/processing/modeler/ModelerAlgorithmProvider.py", line 35, in 
>>     from processing.modeler.ModelerAlgorithm import ModelerAlgorithm
>>   File "/usr/local/share/qgis/python/qgis/utils.py", line 460, in _import
>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>   File "/usr/local/share/qgis/python/plugins/processing/modeler/ModelerAlgorithm.py", line 100
>>     return {k:v for k,v in self.__dict__.iteritems() if  not k.startswith("_")}
>>                   ^
>> SyntaxError: invalid syntax
>> 
>> 
>> Python version:
>> 2.6.6 (r266:84292, Jan 22 2014, 09:42:36) 
>> [GCC 4.4.7 20120313 (Red Hat 4.4.7-4)]
>> 
>> 
>> QGIS version:
>> 2.7.0-Master Master, exported
>> 
>> Python path: ['/usr/local/share/qgis/python', u'/home/mark/.qgis2/python', u'/home/mark/.qgis2/python/plugins', '/usr/local/share/qgis/python/plugins', '/usr/lib64/python26.zip', '/usr/lib64/python2.6', '/usr/lib64/python2.6/plat-linux2', '/usr/lib64/python2.6/lib-tk', '/usr/lib64/python2.6/lib-old', '/usr/lib64/python2.6/lib-dynload', '/usr/lib64/python2.6/site-packages', '/usr/lib64/python2.6/site-packages/PIL', '/usr/lib64/python2.6/site-packages/gst-0.10', '/usr/lib64/python2.6/site-packages/gtk-2.0', '/usr/lib64/python2.6/site-packages/webkit-1.0', '/usr/lib64/python2.6/site-packages/wx-2.8-gtk2-unicode', '/usr/lib/python2.6/site-packages', '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info', '/usr/local/share/qgis/python/plugins/fTools/tools']
>> 
>> 
>> 
>> 
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141216/53e19b56/attachment.html>

From cavallini at faunalia.it  Mon Dec 15 23:11:31 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 16 Dec 2014 08:11:31 +0100
Subject: [Qgis-developer] hub issues?
Message-ID: <548FDB23.2090002@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
I'm told redmine temporarily throws an error
Application error
Rails application failed to start properly
(now it's ok, however).
BTW, do we have any plan to change the bug tracking system? After
years of use I still find it rather cumbersome, and especially the
search is inefficient, and encourages filing duplicate issues.
I believe this discourages newcomers from filing tickets, and adding
info to the existing ones.
Thougths?
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSP2yIACgkQ/NedwLUzIr5ohgCgrNQVN0hDXTGK9vNIQBwVcp0/
Kg4An2nCVzXwCQtPFndnYc5A/30iGneh
=35Ue
-----END PGP SIGNATURE-----

From strk at keybit.net  Tue Dec 16 03:01:59 2014
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 16 Dec 2014 12:01:59 +0100
Subject: [Qgis-developer] QgsRasterLayer legend interface, where is it gone ?
Message-ID: <20141216110159.GA14977@localhost>

According to documentation for the QgsRasterLayer class [1], a raster
layer can export its legend as a pixmap using a legendPixmap() method,
but the code doesn't not contain any such virtual method.

[1] http://qgis.org/api/classQgsRasterLayer.html

Instead, the class has a (non-virtual) method to retrieve a legend
in form of a list of name/color pairs.

A pure image legend is not accounted for in the raster interface
anymore.  Still, beside the documentation, there's also a LegendUrl
property under the "Metadata" tab of raster layer properties, which
does not seem to be used at all either.

Is there a plan to allow raster layers to expose their layer again
as an image ? I'm trying to figure out the best way to expose per-layer
WMS legend configuration, to complete the "WMS contextual legend" QEP [2]

[2] https://github.com/qgis/QGIS-Enhancement-Proposals/pull/15

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Tue Dec 16 03:09:07 2014
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 16 Dec 2014 12:09:07 +0100
Subject: [Qgis-developer] QgsRasterLayer legend interface,
	where is it gone ?
In-Reply-To: <20141216110159.GA14977@localhost>
References: <20141216110159.GA14977@localhost>
Message-ID: <20141216110907.GB14977@localhost>

Also, is the "temporary solution for WMS legend" in
QgisApp::layerTreeViewDoubleClicked still needed ?

(ie: showing the WMS legend in a popup window)

See https://github.com/qgis/QGIS/blob/master/src/app/qgisapp.cpp#L381

--strk;

On Tue, Dec 16, 2014 at 12:01:59PM +0100, Sandro Santilli wrote:
> According to documentation for the QgsRasterLayer class [1], a raster
> layer can export its legend as a pixmap using a legendPixmap() method,
> but the code doesn't not contain any such virtual method.
> 
> [1] http://qgis.org/api/classQgsRasterLayer.html
> 
> Instead, the class has a (non-virtual) method to retrieve a legend
> in form of a list of name/color pairs.
> 
> A pure image legend is not accounted for in the raster interface
> anymore.  Still, beside the documentation, there's also a LegendUrl
> property under the "Metadata" tab of raster layer properties, which
> does not seem to be used at all either.
> 
> Is there a plan to allow raster layers to expose their layer again
> as an image ? I'm trying to figure out the best way to expose per-layer
> WMS legend configuration, to complete the "WMS contextual legend" QEP [2]
> 
> [2] https://github.com/qgis/QGIS-Enhancement-Proposals/pull/15
> 
> --strk; 
> 
>  ()  ASCII ribbon campaign  --  Keep it simple !
>  /\  http://strk.keybit.net/rants/ascii_mails.txt  

-- 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From luipir at gmail.com  Tue Dec 16 05:10:36 2014
From: luipir at gmail.com (Luigi Pirelli)
Date: Tue, 16 Dec 2014 14:10:36 +0100
Subject: [Qgis-developer] QgsRasterLayer legend interface,
 where is it gone ?
In-Reply-To: <20141216110907.GB14977@localhost>
References: <20141216110159.GA14977@localhost>
	<20141216110907.GB14977@localhost>
Message-ID: <CAFO80_qMxeVJnYuQnaEzQO8heUKCBZ947dXFiN3cndNHwyF2zA@mail.gmail.com>

Hi --strk

I don't think it's useful having the ability to develop new LegendItem
types... before legend refactoring, pupup was introduced because
wasn't possibile to customize legend elements other than having a
little pixmap.

regards, Luigi Pirelli

On 16 December 2014 at 12:09, Sandro Santilli <strk at keybit.net> wrote:
> Also, is the "temporary solution for WMS legend" in
> QgisApp::layerTreeViewDoubleClicked still needed ?
>
> (ie: showing the WMS legend in a popup window)
>
> See https://github.com/qgis/QGIS/blob/master/src/app/qgisapp.cpp#L381
>
> --strk;
>
> On Tue, Dec 16, 2014 at 12:01:59PM +0100, Sandro Santilli wrote:
>> According to documentation for the QgsRasterLayer class [1], a raster
>> layer can export its legend as a pixmap using a legendPixmap() method,
>> but the code doesn't not contain any such virtual method.
>>
>> [1] http://qgis.org/api/classQgsRasterLayer.html
>>
>> Instead, the class has a (non-virtual) method to retrieve a legend
>> in form of a list of name/color pairs.
>>
>> A pure image legend is not accounted for in the raster interface
>> anymore.  Still, beside the documentation, there's also a LegendUrl
>> property under the "Metadata" tab of raster layer properties, which
>> does not seem to be used at all either.
>>
>> Is there a plan to allow raster layers to expose their layer again
>> as an image ? I'm trying to figure out the best way to expose per-layer
>> WMS legend configuration, to complete the "WMS contextual legend" QEP [2]
>>
>> [2] https://github.com/qgis/QGIS-Enhancement-Proposals/pull/15
>>
>> --strk;
>>
>>  ()  ASCII ribbon campaign  --  Keep it simple !
>>  /\  http://strk.keybit.net/rants/ascii_mails.txt
>
> --
>
>  ()  ASCII ribbon campaign  --  Keep it simple !
>  /\  http://strk.keybit.net/rants/ascii_mails.txt
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From strk at keybit.net  Tue Dec 16 07:56:08 2014
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 16 Dec 2014 16:56:08 +0100
Subject: [Qgis-developer] QGIS License, GPL2 or GPL2-or-later ?
Message-ID: <20141216155608.GF28150@localhost>

I've noticed that copyright headers in files say code is GPL2-or-later,
but the top-level README says GPL2 (w/out the "or later" part).

The COPYING file in top-level dir is the GPL2.

Should the README be updated, and maybe also the COPYING file ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Tue Dec 16 10:30:11 2014
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 16 Dec 2014 19:30:11 +0100
Subject: [Qgis-developer] Can qgis be started with python disabled ?
Message-ID: <20141216183011.GA19404@localhost>

Can I start qgis with no python support even if it is compiled in ?
I'd use it to reduce load while running under valgrind...

To the same extent, can it be started with no plugins from an environment
variable or similar?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From radim.blazek at gmail.com  Tue Dec 16 11:56:24 2014
From: radim.blazek at gmail.com (Radim Blazek)
Date: Tue, 16 Dec 2014 20:56:24 +0100
Subject: [Qgis-developer] Loading layer from zip
In-Reply-To: <548EFCA3.8080808@faunalia.it>
References: <548EFCA3.8080808@faunalia.it>
Message-ID: <CAEMrtYpqcce-vzBrRuhGJK4ZvSHOnZWNME4H0a-Z1ts=w=PVdg@mail.gmail.com>

It is not supported by OGR, see:
http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
http://lists.osgeo.org/pipermail/gdal-dev/2011-April/028384.html

If you are in doubts, you can right click on the item, open Properties
and try "Layer Source" with ogrinfo.

Radim

On Mon, Dec 15, 2014 at 4:22 PM, Paolo Cavallini <cavallini at faunalia.it> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi all.
> Loading a shp form a zipfile works smoothly. On the contrary, a
> MapInfo file (.tab) throws an error (Layer not valid).
> Confirmed on Debian and Win, qgis 2.6.1.
> Am I missing something, or should I open a ticket?
> All the best.
> - --
> Paolo Cavallini - www.faunalia.eu
> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1
>
> iEYEARECAAYFAlSO/KIACgkQ/NedwLUzIr7BkQCgi6KwwJ3pkdhpY8cQ9FVNsbKb
> 2vEAn1i63bQxlKNifMrR+WMIjnl7awVc
> =FBiT
> -----END PGP SIGNATURE-----
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From tech_dev at wildintellect.com  Tue Dec 16 15:00:38 2014
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Tue, 16 Dec 2014 15:00:38 -0800
Subject: [Qgis-developer] hub issues?
In-Reply-To: <548FDB23.2090002@faunalia.it>
References: <548FDB23.2090002@faunalia.it>
Message-ID: <5490B996.5060307@wildintellect.com>

On 12/15/2014 11:11 PM, Paolo Cavallini wrote:
> Hi all. I'm told redmine temporarily throws an error Application 
> error Rails application failed to start properly (now it's ok, 
> however). BTW, do we have any plan to change the bug tracking 
> system? After years of use I still find it rather cumbersome, and 
> especially the search is inefficient, and encourages filing 
> duplicate issues. I believe this discourages newcomers from filing
>  tickets, and adding info to the existing ones. Thougths? All the 
> best.


Change it to what?
Upgrading and perhaps tacking on Solr for searching?

Generally I think these discussions require someone having a
suggestion for something that will work better.

If you can get a screenshot or paste when the Rails error comes up
that would be helpful. I upgraded the part that connects apache and
ruby last year (Phusion) and it's behaved much better since then.

Thanks,
Alex

From even.rouault at spatialys.com  Wed Dec 17 01:42:42 2014
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Dec 2014 10:42:42 +0100
Subject: [Qgis-developer] Loading layer from zip
In-Reply-To: <CAEMrtYpqcce-vzBrRuhGJK4ZvSHOnZWNME4H0a-Z1ts=w=PVdg@mail.gmail.com>
References: <548EFCA3.8080808@faunalia.it>
	<CAEMrtYpqcce-vzBrRuhGJK4ZvSHOnZWNME4H0a-Z1ts=w=PVdg@mail.gmail.com>
Message-ID: <201412171042.42244.even.rouault@spatialys.com>

Le mardi 16 d?cembre 2014 20:56:24, Radim Blazek a ?crit :
> It is not supported by OGR, see:
> http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
> http://lists.osgeo.org/pipermail/gdal-dev/2011-April/028384.html
> 
> If you are in doubts, you can right click on the item, open Properties
> and try "Layer Source" with ogrinfo.

The MapInfo driver has been converted to the VSI*L API in GDAL trunk a few 
weeks ago, so opening a zipped .tab will be possible with GDAL 2.0

Even

> 
> Radim
> 
> On Mon, Dec 15, 2014 at 4:22 PM, Paolo Cavallini <cavallini at faunalia.it> 
wrote:
> > -----BEGIN PGP SIGNED MESSAGE-----
> > Hash: SHA1
> > 
> > Hi all.
> > Loading a shp form a zipfile works smoothly. On the contrary, a
> > MapInfo file (.tab) throws an error (Layer not valid).
> > Confirmed on Debian and Win, qgis 2.6.1.
> > Am I missing something, or should I open a ticket?
> > All the best.
> > - --
> > Paolo Cavallini - www.faunalia.eu
> > QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> > -----BEGIN PGP SIGNATURE-----
> > Version: GnuPG v1
> > 
> > iEYEARECAAYFAlSO/KIACgkQ/NedwLUzIr7BkQCgi6KwwJ3pkdhpY8cQ9FVNsbKb
> > 2vEAn1i63bQxlKNifMrR+WMIjnl7awVc
> > =FBiT
> > -----END PGP SIGNATURE-----
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From cavallini at faunalia.it  Wed Dec 17 02:28:16 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 17 Dec 2014 11:28:16 +0100
Subject: [Qgis-developer] Error in new Metasearch
Message-ID: <54915AC0.60105@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
Just upgraded Metasearch, I'm consistently getting this error:

Traceback (most recent call last):
  File
"/home/paolo/Desktop/geotec/qgis2/python/plugins/MetaSearch/dialogs/maindialog.py",
line 471, in search
    self.display_results()
  File
"/home/paolo/Desktop/geotec/qgis2/python/plugins/MetaSearch/dialogs/maindialog.py",
line 483, in display_results
    's'[self.catalog.results['matches'] == 1:])
TypeError: not all arguments converted during string formatting

All the best, and thanks.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSRWsAACgkQ/NedwLUzIr4GAwCfVXOsA7WWVt6fcDbBvi0MEsCH
6scAnjqrgTFMA2LUaXukgn2NcG9fZkGi
=qCCj
-----END PGP SIGNATURE-----

From sarra.sahbani at spaceyes3d.com  Wed Dec 17 02:41:09 2014
From: sarra.sahbani at spaceyes3d.com (Sahbani Sarra)
Date: Wed, 17 Dec 2014 11:41:09 +0100
Subject: [Qgis-developer] Reload the GDAL driver
Message-ID: <000c01d019e5$fa0f5b60$ee2e1220$@sahbani@spaceyes3d.com>

Hi,

I want to reload the GDAL driver in QGIS from :
%userprofile%\.qgis2\gdalplugins

I set reg key "qgis/customEnvVarsUse" to true and I add
%userprofile%\.qgis2\gdalplugins to  "qgis/customEnvVars"

Then I call GDALDriverManager::AutoLoadDrivers ()

Environment variables are updated but driver in
%userprofile%\.qgis2\gdalplugins are not loaded.

 

How to do ?

 

Best regards,

Sarrah

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141217/43cd83ad/attachment.html>

From strk at keybit.net  Wed Dec 17 04:13:31 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 17 Dec 2014 13:13:31 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
Message-ID: <20141217121331.GC17837@localhost>

In the "wmslegend" branch of my fork [1] I've a working wms legend node
that fetches the actual legend image lazily from the Model's data() method
when it is invoked with the role = Qt::DecorationRole.

But for some reason, if I also attempt to load the legend when data() method
is invoked with role = Qt::SizeHintRole, all kind of weird behavior happen,
like crashes or hangs.

Should I expect instances of QgsLayerTreeModel to contemporarly used by
different threads ?

[1] git://github.com/strk/QGIS.git
    https://github.com/qgis/QGIS/pull/1735

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From senhor.neto at gmail.com  Wed Dec 17 06:31:33 2014
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Wed, 17 Dec 2014 14:31:33 +0000
Subject: [Qgis-developer] CMYK implementation in QGIS?
Message-ID: <CA+H0G_HnqJ4TL0p1nD6ErnLTpzS-5dQtyjpdLchaX8GR5Kcr5w@mail.gmail.com>

Hello everyone,

Does anyone know if there are any plans for implementing CMYK color mode in
QGIS?

As you probably know, for offset printing controling the CMYK colors are a
must. Right now you need to export the map in rgb an then use some other
software to change the colors from rgb to cmyk.

If there are no plans for that, can someone give me anideia of what would
need to be done?

Thanks!

Best regards,

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141217/8c688e66/attachment.html>

From strk at keybit.net  Wed Dec 17 06:34:47 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 17 Dec 2014 15:34:47 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141217121331.GC17837@localhost>
References: <20141217121331.GC17837@localhost>
Message-ID: <20141217143447.GD17837@localhost>

On Wed, Dec 17, 2014 at 01:13:31PM +0100, Sandro Santilli wrote:
> In the "wmslegend" branch of my fork [1] I've a working wms legend node
> that fetches the actual legend image lazily from the Model's data() method
> when it is invoked with the role = Qt::DecorationRole.
> 
> But for some reason, if I also attempt to load the legend when data() method
> is invoked with role = Qt::SizeHintRole, all kind of weird behavior happen,
> like crashes or hangs.

Further analisys.

The internal QEventLoop used by QgsWmsCapabilitiesDownload
(in downloadCapabilities method) receives events from the LayerTree
QTreeView which gets to call the legend node's data() with SizeHintRole (13)

 #2  0x00007ffff4009c55 in QgsWMSLegendNode::data (this=0x3bd3b50, role=13)
 [..]
 #4  0x00007ffff24cd97c in QStyledItemDelegate::sizeHint(QStyleOptionViewItem const&, QModelIndex const&) const ()
 [..]
 #12 0x00007ffff2476e8a in QTreeView::timerEvent(QTimerEvent*) () from /usr/lib/x86_64-linux-gnu/libQtGui.so.4
 [..]
 #30 0x00007ffff2b9d3a5 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
 #31 0x00007fff7143d5ae in QgsWmsCapabilitiesDownload::downloadCapabilities (this=0x7fffffffabf0)

That first ::data() call, calls QgsWmsProvider::getLegendGraphic, for lazy
download. That call, in turn, creates a second QEventLoop, which gets
to process another event from the QTreeView timer event:

A second call to ::data() arrives from an event processed by the
loop started internally to QgsWmsProvider::getLegendGraphics, again
with SizeHint:

 #2  0x00007ffff4009c55 in QgsWMSLegendNode::data (this=0x3bd3b50, role=13)
 [..]
 #36 0x00007ffff2b9d3a5 in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
 #37 0x00007fff71472976 in QgsWmsProvider::getLegendGraphic (this=0x3b66ae0, scale=0, forceRefresh=true, visibleExtent=0x7fffffff9a80)

Then another arrives, with DecorationRole this time, from the same event.
Finally a new one arrives from main loop and triggers a segfault.

I'm wondering if we should avoid to use internal QEventLoops completely.
They do look like hacks meant to implement blocking operations, which
we'd better not have after all, right ?

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From a.neumann at carto.net  Wed Dec 17 06:50:47 2014
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed, 17 Dec 2014 15:50:47 +0100
Subject: [Qgis-developer] Localizing QGIS Server
Message-ID: <df716074f98dde456a798a973f7a3532@carto.net>

Hi,

I have a minor problem with QGIS Server. When printing, the numeric 
scale shows the thousand separator at the bottom with a comma (",") 
instead of at the top, like we use it normally in Switzerland ("'").

I tried setting the LC_NUMERIC variable to de_CH.utf8, but this did not 
help. Do you know which variable I need to set to influence the display 
of the thousand separator in QGIS?

I did my variable definition in /etc/apache2/mods-enabled/env.conf by 
adding the lines

SetEnv LC_NUMERIC "de_CH.utf8"
SetEnv LANGUAGE "de_CH.utf8"

Thank you in advance for any hints!

Andreas



From Stefan.Ziegler at bd.so.ch  Wed Dec 17 07:18:53 2014
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Wed, 17 Dec 2014 15:18:53 +0000
Subject: [Qgis-developer] Localizing QGIS Server
In-Reply-To: <df716074f98dde456a798a973f7a3532@carto.net>
References: <df716074f98dde456a798a973f7a3532@carto.net>
Message-ID: <96EAE7D042AAC14486D68EC70207B0C14AA9FE3A@srsofaioi16255.verw.rootso.org>

Hi Andi

I have mine (Ubuntu 10.04) in /etc/apache2/mod-enabled/fcgid.conf:

  FcgidInitialEnv LANG=de_CH.UTF-8

But this did not work on another Ubuntu 10.04 machine. We had set the variable per process:

  FcgidCmdOptions /opt/wwwroot/cgi-bin/qgis_mapserv.fcgi \
    InitialEnv LANG=de_CH \
    IOTimeout 180 \
    MinProcesses 6 \
    MaxProcesses 6


Best regards
Stefan

> -----Urspr?ngliche Nachricht-----
> Von: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-
> bounces at lists.osgeo.org] Im Auftrag von Andreas Neumann
> Gesendet: Mittwoch, 17. Dezember 2014 15:51
> An: qgis-developer
> Betreff: [Qgis-developer] Localizing QGIS Server
> 
> Hi,
> 
> I have a minor problem with QGIS Server. When printing, the numeric scale shows the
> thousand separator at the bottom with a comma (",") instead of at the top, like we use
> it normally in Switzerland ("'").
> 
> I tried setting the LC_NUMERIC variable to de_CH.utf8, but this did not help. Do you
> know which variable I need to set to influence the display of the thousand separator in
> QGIS?
> 
> I did my variable definition in /etc/apache2/mods-enabled/env.conf by adding the lines
> 
> SetEnv LC_NUMERIC "de_CH.utf8"
> SetEnv LANGUAGE "de_CH.utf8"
> 
> Thank you in advance for any hints!
> 
> Andreas
> 
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From hugo.mercier at oslandia.com  Wed Dec 17 07:28:25 2014
From: hugo.mercier at oslandia.com (Hugo Mercier)
Date: Wed, 17 Dec 2014 16:28:25 +0100
Subject: [Qgis-developer] Rendering cache and labeling
Message-ID: <5491A119.3010700@oslandia.com>

Hi,

When labeling is enabled on a layer, then the rendering cache is made
invalid and everything is computed for rendering.

I may be missing something obvious, but I don't understand why.
Is it because of a particular use case or because of some limitations in
the caching process ?


From a.neumann at carto.net  Wed Dec 17 07:40:38 2014
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed, 17 Dec 2014 16:40:38 +0100
Subject: [Qgis-developer] Localizing QGIS Server
In-Reply-To: <96EAE7D042AAC14486D68EC70207B0C14AA9FE3A@srsofaioi16255.verw.rootso.org>
References: <df716074f98dde456a798a973f7a3532@carto.net>
	<96EAE7D042AAC14486D68EC70207B0C14AA9FE3A@srsofaioi16255.verw.rootso.org>
Message-ID: <68b2e47a467627b3f29eacb88854bc27@carto.net>

Hi Stefan,

Thanks - setting it in /etc/apache2/mod-enabled/fcgid.conf

with

FcgidInitialEnv LC_NUMERIC=de_CH.utf8

worked fine.

I forgot about the separate location for environment variables for 
FCGID. It is quite strange that fcgi processes have their own env vars 
compared to the rest of Apache - but anyway. It worked.

Thanks again,
Andreas


Am 2014-12-17 16:18, schrieb Ziegler Stefan:
> Hi Andi
> 
> I have mine (Ubuntu 10.04) in /etc/apache2/mod-enabled/fcgid.conf:
> 
>   FcgidInitialEnv LANG=de_CH.UTF-8
> 
> But this did not work on another Ubuntu 10.04 machine. We had set the
> variable per process:
> 
>   FcgidCmdOptions /opt/wwwroot/cgi-bin/qgis_mapserv.fcgi \
>     InitialEnv LANG=de_CH \
>     IOTimeout 180 \
>     MinProcesses 6 \
>     MaxProcesses 6
> 
> 
> Best regards
> Stefan
> 
>> -----Urspr?ngliche Nachricht-----
>> Von: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-
>> bounces at lists.osgeo.org] Im Auftrag von Andreas Neumann
>> Gesendet: Mittwoch, 17. Dezember 2014 15:51
>> An: qgis-developer
>> Betreff: [Qgis-developer] Localizing QGIS Server
>> 
>> Hi,
>> 
>> I have a minor problem with QGIS Server. When printing, the numeric 
>> scale shows the
>> thousand separator at the bottom with a comma (",") instead of at the 
>> top, like we use
>> it normally in Switzerland ("'").
>> 
>> I tried setting the LC_NUMERIC variable to de_CH.utf8, but this did 
>> not help. Do you
>> know which variable I need to set to influence the display of the 
>> thousand separator in
>> QGIS?
>> 
>> I did my variable definition in /etc/apache2/mods-enabled/env.conf by 
>> adding the lines
>> 
>> SetEnv LC_NUMERIC "de_CH.utf8"
>> SetEnv LANGUAGE "de_CH.utf8"
>> 
>> Thank you in advance for any hints!
>> 
>> Andreas
>> 
>> 
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From jcavner at ku.edu  Wed Dec 17 11:45:43 2014
From: jcavner at ku.edu (Jeff Cavner)
Date: Wed, 17 Dec 2014 13:45:43 -0600
Subject: [Qgis-developer] minimumValue() in 2.6.x for Windows different than
	Linux for NULL
Message-ID: <CAEDzf3SEVSwm5_z-wrNR+_FnoHO65N5Q=R38c4Kj=FfU0VKrDg@mail.gmail.com>

minimumValue() against the dataprovider or a vector layer object in Windows
if a NULL value is present in the attributes for a field will return a 0
treating the NULL as the minimum value, instead of the minimum numeric
value in that field (which is my case is greater than 0).  In Linux for
2.6.x it works correctly and returns the minimum numeric value and does not
treat NULLs as numeric.  Any suggestions?

Much appreciated,
Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141217/c9e0dabd/attachment.html>

From tech_dev at wildintellect.com  Wed Dec 17 11:48:02 2014
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed, 17 Dec 2014 11:48:02 -0800
Subject: [Qgis-developer] Can qgis be started with python disabled ?
In-Reply-To: <20141216183011.GA19404@localhost>
References: <20141216183011.GA19404@localhost>
Message-ID: <5491DDF2.5070900@wildintellect.com>

On 12/16/2014 10:30 AM, Sandro Santilli wrote:
> Can I start qgis with no python support even if it is compiled in ?
> I'd use it to reduce load while running under valgrind...
> 
> To the same extent, can it be started with no plugins from an environment
> variable or similar?
> 
> --strk; 
> 
>  ()  ASCII ribbon campaign  --  Keep it simple !
>  /\  http://strk.keybit.net/rants/ascii_mails.txt  
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

qgis --no-plugins

Not exactly no python, but should load faster.

-Alex

From tech_dev at wildintellect.com  Wed Dec 17 11:49:39 2014
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed, 17 Dec 2014 11:49:39 -0800
Subject: [Qgis-developer] Can qgis be started with python disabled ?
In-Reply-To: <5491DDF2.5070900@wildintellect.com>
References: <20141216183011.GA19404@localhost>
	<5491DDF2.5070900@wildintellect.com>
Message-ID: <5491DE53.90802@wildintellect.com>

On 12/17/2014 11:48 AM, Alex Mandel wrote:
> On 12/16/2014 10:30 AM, Sandro Santilli wrote:
>> Can I start qgis with no python support even if it is compiled in ?
>> I'd use it to reduce load while running under valgrind...
>>
>> To the same extent, can it be started with no plugins from an environment
>> variable or similar?
>>
>> --strk; 
>>
>>  ()  ASCII ribbon campaign  --  Keep it simple !
>>  /\  http://strk.keybit.net/rants/ascii_mails.txt  
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> 
> qgis --no-plugins
> 
> Not exactly no python, but should load faster.
> 

--noplugins

Sorry typo no - in the middle

-Alex


From cavallini at faunalia.it  Wed Dec 17 12:20:58 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 17 Dec 2014 21:20:58 +0100
Subject: [Qgis-developer] Various issues
Message-ID: <5491E5AA.8060508@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
I noticed several issues, I'd appreciate a confirmation before opening
the relevant tickets:
* reprojecting a metric projection to 4326, choosing an ellipsoid and
a measurement unit in Project properties is not permanent (reopening
the dialog displays none/planimetric and degrees even if wg84 and
meters were selected beforehand)
* with the same reprojection, Decoration > Scalebar shows 1 meter
instead of 1 degree
* when using curved labels with a background, a separate background
(e.g. a rectangle) is drawn for each character, with rather ugly results
* what is the use of Settings > Composer options? It seems a
duplication of the mai sSetting menu, which seems mostly out of
context in the Layout (e.g. Digitizing, etc.).
Thanks for feedback.
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSR5akACgkQ/NedwLUzIr5t0ACgq6ISwxaJIDuCkCRTkhljzBoi
hqIAnj4ZvKQPsdt95DGhZDFSbBcOAo8A
=w8Th
-----END PGP SIGNATURE-----

From landa.martin at gmail.com  Wed Dec 17 12:35:30 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 17 Dec 2014 21:35:30 +0100
Subject: [Qgis-developer] transparency for all raster in the group
Message-ID: <CA+Ei1Od5YjSRSfHkXA3tzqa8XWxXehyOu5TjDLp4i0KJfKXs3A@mail.gmail.com>

Hi all,

is it possible in QGIS to change transparency for all rasters in the
group? Or is there any plugin for that?

Thanks, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa

From jcavner at ku.edu  Wed Dec 17 12:40:37 2014
From: jcavner at ku.edu (Jeff Cavner)
Date: Wed, 17 Dec 2014 14:40:37 -0600
Subject: [Qgis-developer] QgsVectorJoinInfo in Windows doesn't work but
	works fine in Linux
Message-ID: <CAEDzf3S8M4hiJ42pKGZVxvkeoGpuAX2pPs+qt=XpYPeTF6QAHw@mail.gmail.com>

A programmatic join in 2.6.x using the following:

joinIdx = joinLyr.fieldNameIndex('siteid')
targetIdx = pamLyr.fieldNameIndex('siteid')
joinLyrId = joinLyr.id()
joinInfo = QgsVectorJoinInfo()
joinInfo.memoryCache = True
joinInfo.joinField = joinIdx
joinInfo.joinLayerId = joinLyrId
joinInfo.targetField = targetIdx
pamLyr.addJoin(joinInfo)

Works fine in Linux, but not in Windows.  In windows if you look at the
join in properties on the layer, the targetField is missing.  The fields
from the joined layer show up in the attributes in the target layer but
have no values.

Any help would be greatly appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141217/77500d58/attachment.html>

From carrillo.german at gmail.com  Wed Dec 17 13:05:49 2014
From: carrillo.german at gmail.com (=?ISO-8859-1?Q?Germ=E1n_Carrillo?=)
Date: Wed, 17 Dec 2014 16:05:49 -0500
Subject: [Qgis-developer] Moving a layer with PyQGIS using the new layer tree
Message-ID: <CANaz7mx-9siACA=K4LSPnVqx9K=NCrYFFoz5e6Ge0XqfQVTMzQ@mail.gmail.com>

Hi all (and Martin D.),


I've been trying to reproduce the instructions given here [1] for moving
layers. It seems that the code doesn't work if the layer to be moved is
inside a group.

Specifically, trying to move a layer that is inside a group, I can add the
clonned layer to the layer tree but I cannot get the original layer
removed, i.e., the following command doesn't work:

   root.removeChildNode( originalLayer )

It doesn't throw any message nor change the map/ToC status.


Can you reproduce the problem? I'm using QGIS 2.6.1 on Ubuntu.


Regards,

Germ?n Carrillo
--
[1]
http://www.lutraconsulting.co.uk/blog/2014/07/25/qgis-layer-tree-api-part-2/


-- 
-----------
   |\__
(:>__)(
   |/

Soluciones Geoinform?ticas Libres
http://geotux.tuxfamily.org/
http://twitter.com/GeoTux2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141217/80dbb4ac/attachment.html>

From nyall.dawson at gmail.com  Wed Dec 17 13:18:34 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 18 Dec 2014 08:18:34 +1100
Subject: [Qgis-developer] Various issues
In-Reply-To: <5491E5AA.8060508@faunalia.it>
References: <5491E5AA.8060508@faunalia.it>
Message-ID: <CAB28AsizB8ujTnDgBk_fFjARmMXDvYpdSudaMMHwDDKAencgTQ@mail.gmail.com>

On 18 December 2014 at 07:20, Paolo Cavallini <cavallini at faunalia.it> wrote:


> * what is the use of Settings > Composer options? It seems a
> duplication of the mai sSetting menu, which seems mostly out of
> context in the Layout (e.g. Digitizing, etc.).

I don't really follow - there's a shortcut to the composer options tab
which is available through a composer window. But it's just a quick
shortcut, not a duplication of the panel. All the settings under this
tab apply solely to compositions, and have no relation to digitizing
or other QGIS functions...

Nyall

From nyall.dawson at gmail.com  Wed Dec 17 14:22:11 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 18 Dec 2014 09:22:11 +1100
Subject: [Qgis-developer] CMYK implementation in QGIS?
In-Reply-To: <CA+H0G_HnqJ4TL0p1nD6ErnLTpzS-5dQtyjpdLchaX8GR5Kcr5w@mail.gmail.com>
References: <CA+H0G_HnqJ4TL0p1nD6ErnLTpzS-5dQtyjpdLchaX8GR5Kcr5w@mail.gmail.com>
Message-ID: <CAB28AsiiDxqp=rL4b2b+yWQMZc=0snHnxmu_5L8LuL74XN=8Vg@mail.gmail.com>

On 18 December 2014 at 01:31, Alexandre Neto <senhor.neto at gmail.com> wrote:
>
> Hello everyone,
>
> Does anyone know if there are any plans for implementing CMYK color mode in
> QGIS?

I did a bit of research yesterday and it looks like we're out of luck
until the underlying Qt libraries (QPainter, QPrinter, QtSvg) gain
support for CMYK. We could add support for selecting CMYK colours into
the new colour picker, but currently all of the export options
available in Qt convert colours back to RGB prior to export.

> If there are no plans for that, can someone give me anideia of what would
> need to be done?

It would need to be implemented in Qt, but I can't find much
information about whether this is planned or not. Here's a couple of
relevant reports (with almost zero activity):
https://bugreports.qt-project.org/browse/QTBUG-896
https://bugreports.qt-project.org/browse/QTBUG-86
https://bugreports.qt-project.org/browse/QTBUG-21276

I'm also not sure if Qt has a culture of sponsored targeted
development, or who you could get to tackle this... I'm interested to
know any findings you have though, as there's a number of similar Qt
limitations which really hold us back:
https://bugreports.qt-project.org/browse/QTBUG-28636
https://bugreports.qt-project.org/browse/QTBUG-36302
https://bugreports.qt-project.org/browse/QTBUG-6582
(also there's a report that I can't find right now about allowing
editing of PDF metadata)

Nyall

From luipir at gmail.com  Wed Dec 17 14:39:45 2014
From: luipir at gmail.com (Luigi Pirelli)
Date: Wed, 17 Dec 2014 23:39:45 +0100
Subject: [Qgis-developer] Moving a layer with PyQGIS using the new layer
	tree
In-Reply-To: <CANaz7mx-9siACA=K4LSPnVqx9K=NCrYFFoz5e6Ge0XqfQVTMzQ@mail.gmail.com>
References: <CANaz7mx-9siACA=K4LSPnVqx9K=NCrYFFoz5e6Ge0XqfQVTMzQ@mail.gmail.com>
Message-ID: <CAFO80_rc7yTE4wAMd4Eg1Xxi7xZ5GWNzHDprRuyWPq3ERTUaUA@mail.gmail.com>

You have to refer to the group as root to remove his child

Regards Luigi Pirelli

On Wednesday, 17 December 2014, Germ?n Carrillo <carrillo.german at gmail.com>
wrote:

> Hi all (and Martin D.),
>
>
> I've been trying to reproduce the instructions given here [1] for moving
> layers. It seems that the code doesn't work if the layer to be moved is
> inside a group.
>
> Specifically, trying to move a layer that is inside a group, I can add the
> clonned layer to the layer tree but I cannot get the original layer
> removed, i.e., the following command doesn't work:
>
>    root.removeChildNode( originalLayer )
>
> It doesn't throw any message nor change the map/ToC status.
>
>
> Can you reproduce the problem? I'm using QGIS 2.6.1 on Ubuntu.
>
>
> Regards,
>
> Germ?n Carrillo
> --
> [1]
> http://www.lutraconsulting.co.uk/blog/2014/07/25/qgis-layer-tree-api-part-2/
>
>
> --
> -----------
>    |\__
> (:>__)(
>    |/
>
> Soluciones Geoinform?ticas Libres
> http://geotux.tuxfamily.org/
> http://twitter.com/GeoTux2
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141217/0241c8b4/attachment.html>

From senhor.neto at gmail.com  Wed Dec 17 14:54:02 2014
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Wed, 17 Dec 2014 22:54:02 +0000
Subject: [Qgis-developer] CMYK implementation in QGIS?
In-Reply-To: <CAB28AsiiDxqp=rL4b2b+yWQMZc=0snHnxmu_5L8LuL74XN=8Vg@mail.gmail.com>
References: <CA+H0G_HnqJ4TL0p1nD6ErnLTpzS-5dQtyjpdLchaX8GR5Kcr5w@mail.gmail.com>
	<CAB28AsiiDxqp=rL4b2b+yWQMZc=0snHnxmu_5L8LuL74XN=8Vg@mail.gmail.com>
Message-ID: <CA+H0G_ELwG7JXizm+4p7pyHgcobZHwrV+F3o_D84ci555-iPSw@mail.gmail.com>

Thank you Nyall.

I will report back to the interested folks in the qgis pt user group. And
we will try to see if it's possible to target sponsor qt to unblock those
limitations in the future.

Best regards,

Alexandre
Em 17/12/2014 22:22, "Nyall Dawson" <nyall.dawson at gmail.com> escreveu:

> On 18 December 2014 at 01:31, Alexandre Neto <senhor.neto at gmail.com>
> wrote:
> >
> > Hello everyone,
> >
> > Does anyone know if there are any plans for implementing CMYK color mode
> in
> > QGIS?
>
> I did a bit of research yesterday and it looks like we're out of luck
> until the underlying Qt libraries (QPainter, QPrinter, QtSvg) gain
> support for CMYK. We could add support for selecting CMYK colours into
> the new colour picker, but currently all of the export options
> available in Qt convert colours back to RGB prior to export.
>
> > If there are no plans for that, can someone give me anideia of what would
> > need to be done?
>
> It would need to be implemented in Qt, but I can't find much
> information about whether this is planned or not. Here's a couple of
> relevant reports (with almost zero activity):
> https://bugreports.qt-project.org/browse/QTBUG-896
> https://bugreports.qt-project.org/browse/QTBUG-86
> https://bugreports.qt-project.org/browse/QTBUG-21276
>
> I'm also not sure if Qt has a culture of sponsored targeted
> development, or who you could get to tackle this... I'm interested to
> know any findings you have though, as there's a number of similar Qt
> limitations which really hold us back:
> https://bugreports.qt-project.org/browse/QTBUG-28636
> https://bugreports.qt-project.org/browse/QTBUG-36302
> https://bugreports.qt-project.org/browse/QTBUG-6582
> (also there's a report that I can't find right now about allowing
> editing of PDF metadata)
>
> Nyall
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141217/050b81a3/attachment-0001.html>

From alexander.bruy at gmail.com  Wed Dec 17 22:06:13 2014
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu, 18 Dec 2014 08:06:13 +0200
Subject: [Qgis-developer] Various issues
In-Reply-To: <5491E5AA.8060508@faunalia.it>
References: <5491E5AA.8060508@faunalia.it>
Message-ID: <CALuHMPAiaem89_sJ03bQnAFF8-HFMac7KfeHMt6VtYhV1ABOZQ@mail.gmail.com>

Hi Paolo,

2014-12-17 22:20 GMT+02:00 Paolo Cavallini <cavallini at faunalia.it>:
> * reprojecting a metric projection to 4326, choosing an ellipsoid and
> a measurement unit in Project properties is not permanent (reopening
> the dialog displays none/planimetric and degrees even if wg84 and
> meters were selected beforehand)

If I understand correctly, this is known issue, see [0]. And this happens
only if you open project properties from menu. When project properties
open using CRS selector in bottom right corner of the QGIS main window
it works as expected. Also switching from CRS tab to any other tab and
back also fixes dispalying of wrong values.

Seems better solution for measurement configuration hangling should
be introduced.

[0] http://hub.qgis.org/issues/10392

From apasotti at gmail.com  Thu Dec 18 00:11:50 2014
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 18 Dec 2014 09:11:50 +0100
Subject: [Qgis-developer] QGIS server docs
Message-ID: <CAL5Q6700PKw90_9jHONYkfvAeLQdN259PhpLESZED9ba4vdNAQ@mail.gmail.com>

Hello,

where is the official documentation for QGIS Server?

It seems scattered in several places:

http://hub.qgis.org/projects/quantum-gis/wiki/QGIS_Server_Tutorial
http://docs.qgis.org/testing/en/docs/user_manual/preamble/whats_new.html#qgis-server

I would like to add to the official QGIS Server docs the informations
I wrote in my blog:

http://www.itopen.it/2014/11/27/plugin-python-per-qgis-server/
http://www.itopen.it/2014/12/12/qgis-server-python-plugins-tutorial/

It would be really helpful if somebody familiar with the manual
organization could create the skeleton chapters for the docs.



-- 
Alessandro Pasotti
w3:   www.itopen.it

From marco.hugentobler at sourcepole.ch  Thu Dec 18 00:19:31 2014
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Thu, 18 Dec 2014 09:19:31 +0100
Subject: [Qgis-developer] QGIS server docs
In-Reply-To: <CAL5Q6700PKw90_9jHONYkfvAeLQdN259PhpLESZED9ba4vdNAQ@mail.gmail.com>
References: <CAL5Q6700PKw90_9jHONYkfvAeLQdN259PhpLESZED9ba4vdNAQ@mail.gmail.com>
Message-ID: <54928E13.5010102@sourcepole.ch>

Hi Alessandro

Please add it to

http://hub.qgis.org/projects/quantum-gis/wiki/QGIS_Server_Tutorial


This is the most complete and up-to-date documentation.

Regards,
Marco

On 18.12.2014 09:11, Alessandro Pasotti wrote:
> Hello,
>
> where is the official documentation for QGIS Server?
>
> It seems scattered in several places:
>
> http://hub.qgis.org/projects/quantum-gis/wiki/QGIS_Server_Tutorial
> http://docs.qgis.org/testing/en/docs/user_manual/preamble/whats_new.html#qgis-server
>
> I would like to add to the official QGIS Server docs the informations
> I wrote in my blog:
>
> http://www.itopen.it/2014/11/27/plugin-python-per-qgis-server/
> http://www.itopen.it/2014/12/12/qgis-server-python-plugins-tutorial/
>
> It would be really helpful if somebody familiar with the manual
> organization could create the skeleton chapters for the docs.
>
>
>


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From yjacolin at free.fr  Thu Dec 18 00:20:47 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Thu, 18 Dec 2014 09:20:47 +0100
Subject: [Qgis-developer] QGIS server docs
In-Reply-To: <54928E13.5010102@sourcepole.ch>
References: <CAL5Q6700PKw90_9jHONYkfvAeLQdN259PhpLESZED9ba4vdNAQ@mail.gmail.com>
	<54928E13.5010102@sourcepole.ch>
Message-ID: <2738008.KKVzdmEHMh@tatras>

hello,

Don't we need to move this wiki page to the doc also?

Y.
On Thursday, December 18, 2014 9:19:31 Marco Hugentobler wrote:
> Hi Alessandro
> 
> Please add it to
> 
> http://hub.qgis.org/projects/quantum-gis/wiki/QGIS_Server_Tutorial
> 
> 
> This is the most complete and up-to-date documentation.
> 
> Regards,
> Marco
> 
> On 18.12.2014 09:11, Alessandro Pasotti wrote:
> > Hello,
> > 
> > where is the official documentation for QGIS Server?
> > 
> > It seems scattered in several places:
> > 
> > http://hub.qgis.org/projects/quantum-gis/wiki/QGIS_Server_Tutorial
> > http://docs.qgis.org/testing/en/docs/user_manual/preamble/whats_new.html#q
> > gis-server
> > 
> > I would like to add to the official QGIS Server docs the informations
> > I wrote in my blog:
> > 
> > http://www.itopen.it/2014/11/27/plugin-python-per-qgis-server/
> > http://www.itopen.it/2014/12/12/qgis-server-python-plugins-tutorial/
> > 
> > It would be really helpful if somebody familiar with the manual
> > organization could create the skeleton chapters for the docs.


From rdmailings at duif.net  Thu Dec 18 00:39:29 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 18 Dec 2014 09:39:29 +0100
Subject: [Qgis-developer] QGIS server docs
In-Reply-To: <2738008.KKVzdmEHMh@tatras>
References: <CAL5Q6700PKw90_9jHONYkfvAeLQdN259PhpLESZED9ba4vdNAQ@mail.gmail.com>	<54928E13.5010102@sourcepole.ch>
	<2738008.KKVzdmEHMh@tatras>
Message-ID: <549292C1.7030409@duif.net>

On 18-12-14 09:20, Yves Jacolin wrote:
> hello,
> 
> Don't we need to move this wiki page to the doc also?

IF Marco is OK with it (as he creates the most updated info I think), I
would also prefer to move all info from the wiki page into documentation
(and update the wikipage to link to the docs then).

I think QGIS server deserves a thorough Chapter in the docs nowadays.

Regards,

Richard Duivenvoorde


From wonder.sk at gmail.com  Thu Dec 18 01:02:50 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 18 Dec 2014 16:02:50 +0700
Subject: [Qgis-developer] Improved snapping QEP
Message-ID: <CAC2XbFfxz3yw2_8YF7AVcq88NL4adirHcMOW8vWEKNysUF-xRQ@mail.gmail.com>

Hi everyone

Recently I have been working on improvements for snapping in QGIS. Here is
a QEP describing the proposed changes:

https://github.com/wonder-sk/QGIS-Enhancement-Proposals/blob/master/qep-x-efficient-snapping-and-geometry-queries.rst

Those interested in the code see my branch:
https://github.com/wonder-sk/QGIS/tree/snapping-improved

I would be happy to hear your feedback!

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141218/77dddec4/attachment.html>

From luca76 at gmail.com  Thu Dec 18 01:03:33 2014
From: luca76 at gmail.com (Luca Manganelli)
Date: Thu, 18 Dec 2014 10:03:33 +0100
Subject: [Qgis-developer] QGIS Server and Embed Layers from another project
Message-ID: <CAMB2qw0X9QGMCfe_0BvNFY-NozseoORpxpc6XVFp+qU3LQvULw@mail.gmail.com>

Hi to all,

does QGIS Server support Embed  Layers from another project?

When I use them in QGIS Web Client, I see a 500 error from QGIS Server
in the network log.

Thank you in advance

Luca

From rldhont at gmail.com  Thu Dec 18 01:09:02 2014
From: rldhont at gmail.com (=?windows-1252?Q?Ren=E9-Luc_Dhont?=)
Date: Thu, 18 Dec 2014 10:09:02 +0100
Subject: [Qgis-developer] QGIS Server and Embed Layers from another
	project
In-Reply-To: <CAMB2qw0X9QGMCfe_0BvNFY-NozseoORpxpc6XVFp+qU3LQvULw@mail.gmail.com>
References: <CAMB2qw0X9QGMCfe_0BvNFY-NozseoORpxpc6XVFp+qU3LQvULw@mail.gmail.com>
Message-ID: <549299AE.7040308@gmail.com>

Hi luca,

Which QGIS version do you use ? master, 2.6 or 2.4 ?

Ren?-Luc

Le 18/12/2014 10:03, Luca Manganelli a ?crit :
> Hi to all,
>
> does QGIS Server support Embed  Layers from another project?
>
> When I use them in QGIS Web Client, I see a 500 error from QGIS Server
> in the network log.
>
> Thank you in advance
>
> Luca
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From luca76 at gmail.com  Thu Dec 18 01:09:43 2014
From: luca76 at gmail.com (Luca Manganelli)
Date: Thu, 18 Dec 2014 10:09:43 +0100
Subject: [Qgis-developer] QGIS Server and Embed Layers from another
	project
In-Reply-To: <549299AE.7040308@gmail.com>
References: <CAMB2qw0X9QGMCfe_0BvNFY-NozseoORpxpc6XVFp+qU3LQvULw@mail.gmail.com>
	<549299AE.7040308@gmail.com>
Message-ID: <CAMB2qw2uPw-9aoNkBR4uwg=vdyUVt9MJfZwJ_c=Wb=x_f-P=mQ@mail.gmail.com>

On Thu, Dec 18, 2014 at 10:09 AM, Ren?-Luc Dhont <rldhont at gmail.com> wrote:
> Hi luca,
>
> Which QGIS version do you use ? master, 2.6 or 2.4 ?

2.6.0

From luca76 at gmail.com  Thu Dec 18 01:19:28 2014
From: luca76 at gmail.com (Luca Manganelli)
Date: Thu, 18 Dec 2014 10:19:28 +0100
Subject: [Qgis-developer] QGIS Server and Embed Layers from another
	project
In-Reply-To: <549299AE.7040308@gmail.com>
References: <CAMB2qw0X9QGMCfe_0BvNFY-NozseoORpxpc6XVFp+qU3LQvULw@mail.gmail.com>
	<549299AE.7040308@gmail.com>
Message-ID: <CAMB2qw3-DpS36Fmca0vjy-ZPVPYzQ+-BcsWyt64tY=rHOTi+YQ@mail.gmail.com>

On Thu, Dec 18, 2014 at 10:09 AM, Ren?-Luc Dhont <rldhont at gmail.com> wrote:
> Hi luca,
>
> Which QGIS version do you use ? master, 2.6 or 2.4 ?


Maybe I've found a bug:

if the project contains ONLY embedded layers, it returns 500 error.

I've added a non-embedded layer, and it worked.

should I file a bug?

From rldhont at gmail.com  Thu Dec 18 01:21:24 2014
From: rldhont at gmail.com (=?UTF-8?B?UmVuw6ktTHVjIERob250?=)
Date: Thu, 18 Dec 2014 10:21:24 +0100
Subject: [Qgis-developer] QGIS Server and Embed Layers from another
	project
In-Reply-To: <CAMB2qw3-DpS36Fmca0vjy-ZPVPYzQ+-BcsWyt64tY=rHOTi+YQ@mail.gmail.com>
References: <CAMB2qw0X9QGMCfe_0BvNFY-NozseoORpxpc6XVFp+qU3LQvULw@mail.gmail.com>
	<549299AE.7040308@gmail.com>
	<CAMB2qw3-DpS36Fmca0vjy-ZPVPYzQ+-BcsWyt64tY=rHOTi+YQ@mail.gmail.com>
Message-ID: <54929C94.3080304@gmail.com>

Thanks Luca to find this issue.

I think you can open a bug.

Ren?-Luc

Le 18/12/2014 10:19, Luca Manganelli a ?crit :
> On Thu, Dec 18, 2014 at 10:09 AM, Ren?-Luc Dhont <rldhont at gmail.com> wrote:
>> Hi luca,
>>
>> Which QGIS version do you use ? master, 2.6 or 2.4 ?
>
> Maybe I've found a bug:
>
> if the project contains ONLY embedded layers, it returns 500 error.
>
> I've added a non-embedded layer, and it worked.
>
> should I file a bug?


From marco.hugentobler at sourcepole.ch  Thu Dec 18 01:23:04 2014
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Thu, 18 Dec 2014 10:23:04 +0100
Subject: [Qgis-developer] QGIS server docs
In-Reply-To: <549292C1.7030409@duif.net>
References: <CAL5Q6700PKw90_9jHONYkfvAeLQdN259PhpLESZED9ba4vdNAQ@mail.gmail.com>	<54928E13.5010102@sourcepole.ch>
	<2738008.KKVzdmEHMh@tatras> <549292C1.7030409@duif.net>
Message-ID: <54929CF8.2010103@sourcepole.ch>

Hi all

Ok from me to move the server documentation to the doc. Could someone 
from the documentation team import the current content?

Regards,
Marco

On 18.12.2014 09:39, Richard Duivenvoorde wrote:
> On 18-12-14 09:20, Yves Jacolin wrote:
>> hello,
>>
>> Don't we need to move this wiki page to the doc also?
> IF Marco is OK with it (as he creates the most updated info I think), I
> would also prefer to move all info from the wiki page into documentation
> (and update the wikipage to link to the docs then).
>
> I think QGIS server deserves a thorough Chapter in the docs nowadays.
>
> Regards,
>
> Richard Duivenvoorde
>


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From luca76 at gmail.com  Thu Dec 18 01:30:02 2014
From: luca76 at gmail.com (Luca Manganelli)
Date: Thu, 18 Dec 2014 10:30:02 +0100
Subject: [Qgis-developer] QGIS Server and Embed Layers from another
	project
In-Reply-To: <54929C94.3080304@gmail.com>
References: <CAMB2qw0X9QGMCfe_0BvNFY-NozseoORpxpc6XVFp+qU3LQvULw@mail.gmail.com>
	<549299AE.7040308@gmail.com>
	<CAMB2qw3-DpS36Fmca0vjy-ZPVPYzQ+-BcsWyt64tY=rHOTi+YQ@mail.gmail.com>
	<54929C94.3080304@gmail.com>
Message-ID: <CAMB2qw06X_OYe-VK3OX5s=raRPc6ikaFMwxqhrM7ZhYT+QSK6A@mail.gmail.com>

On Thu, Dec 18, 2014 at 10:21 AM, Ren?-Luc Dhont <rldhont at gmail.com> wrote:
> Thanks Luca to find this issue.

Another issue (?) I found, this is a QGIS general.

Checkbox state of embedded layers is always ignored, QGIS considers
their state of the original project.

Are you aware of this problem?

From a.neumann at carto.net  Thu Dec 18 01:43:42 2014
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 18 Dec 2014 10:43:42 +0100
Subject: [Qgis-developer] QGIS Server and Embed Layers from another
 project
In-Reply-To: <CAMB2qw06X_OYe-VK3OX5s=raRPc6ikaFMwxqhrM7ZhYT+QSK6A@mail.gmail.com>
References: <CAMB2qw0X9QGMCfe_0BvNFY-NozseoORpxpc6XVFp+qU3LQvULw@mail.gmail.com>
	<549299AE.7040308@gmail.com>
	<CAMB2qw3-DpS36Fmca0vjy-ZPVPYzQ+-BcsWyt64tY=rHOTi+YQ@mail.gmail.com>
	<54929C94.3080304@gmail.com>
	<CAMB2qw06X_OYe-VK3OX5s=raRPc6ikaFMwxqhrM7ZhYT+QSK6A@mail.gmail.com>
Message-ID: <e7bd20a40e3d27c251ae41b50437c951@carto.net>

Hi,

I can confirm this issue. I have reported this several years ago: 
http://hub.qgis.org/issues/4097

This bug - though minor - annoys me a lot. Because many of my projects 
contain embedded groups which should be off by default and only on by 
demand.

I would be very grateful if someone could fix this or finance the fix.

Andreas

Am 2014-12-18 10:30, schrieb Luca Manganelli:
> On Thu, Dec 18, 2014 at 10:21 AM, Ren?-Luc Dhont <rldhont at gmail.com> 
> wrote:
>> Thanks Luca to find this issue.
> 
> Another issue (?) I found, this is a QGIS general.
> 
> Checkbox state of embedded layers is always ignored, QGIS considers
> their state of the original project.
> 
> Are you aware of this problem?
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From giovanni.manghi at gmail.com  Thu Dec 18 02:15:27 2014
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Thu, 18 Dec 2014 10:15:27 +0000
Subject: [Qgis-developer] Various issues
Message-ID: <CACfnYnQR1Za_t6DKEU+RTUBR+LSwoo51Pod2mZPSz_ksuux2ug@mail.gmail.com>

> * reprojecting a metric projection to 4326, choosing an ellipsoid and
> a measurement unit in Project properties is not permanent (reopening
> the dialog displays none/planimetric and degrees even if wg84 and
> meters were selected beforehand)



it is messy as already said by Alexander, and that ticket should be reopened.

sometimes seems to follow a pattern like:

If you open the project properties from the menus the ellipsoid changes, but not
the canvas units.

If you open the project properties from the bottom right icon/shortcut
the ellipsoid
does not change, but units do.

other times it seems it just messes up everything regardless of what
you have choosen and
how you open the project properties.

This to me is a major issue because the user never knows how reliable
are the measurements being done
(with the field calculator) and if numbers can be compared with the
ones computed previously.



> * with the same reprojection, Decoration > Scalebar shows 1 meter
> instead of 1 degree


cannot confirm here, it shows degrees






> * when using curved labels with a background, a separate background
> (e.g. a rectangle) is drawn for each character, with rather ugly results


for better results
the "size type" of the background must be set to "fixed" (and then
give it the proper size).

From luipir at gmail.com  Thu Dec 18 04:27:04 2014
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 18 Dec 2014 13:27:04 +0100
Subject: [Qgis-developer] Setting Environment vars regression in master...
	look for confirmation
Message-ID: <CAFO80_p77nfhpp-08h3JAJ3ZeH2tsr-JCzrf_vBWBh_2U0YMXw@mail.gmail.com>

Hi

I set the env variable QGIS_LOG_FILE in Options|System|Envoronment

but on master (win or debian), running QgsLogger.logFile() return ""

in 2.4 return the correct env vars value

it's a regression,? I didn't test on 2.6.1
dev on debian is compiled... and on windows is the osgeo4w install

please can someone check? I didn't find issues about this

regards, Luigi Pirelli

From luipir at gmail.com  Thu Dec 18 04:35:28 2014
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 18 Dec 2014 13:35:28 +0100
Subject: [Qgis-developer] Setting Environment vars regression in
	master... look for confirmation
In-Reply-To: <CAFO80_p77nfhpp-08h3JAJ3ZeH2tsr-JCzrf_vBWBh_2U0YMXw@mail.gmail.com>
References: <CAFO80_p77nfhpp-08h3JAJ3ZeH2tsr-JCzrf_vBWBh_2U0YMXw@mail.gmail.com>
Message-ID: <CAFO80_owt9X9q-qpmerK_MoKjOSJxNHuRw5gaSh4aJYjKL2NRQ@mail.gmail.com>

works on win 2.6.1... but fail on Master

On 18 December 2014 at 13:27, Luigi Pirelli <luipir at gmail.com> wrote:
> Hi
>
> I set the env variable QGIS_LOG_FILE in Options|System|Envoronment
>
> but on master (win or debian), running QgsLogger.logFile() return ""
>
> in 2.4 return the correct env vars value
>
> it's a regression,? I didn't test on 2.6.1
> dev on debian is compiled... and on windows is the osgeo4w install
>
> please can someone check? I didn't find issues about this
>
> regards, Luigi Pirelli

From strk at keybit.net  Thu Dec 18 04:46:21 2014
From: strk at keybit.net (Sandro Santilli)
Date: Thu, 18 Dec 2014 13:46:21 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141217143447.GD17837@localhost>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
Message-ID: <20141218124621.GD24598@localhost>

On Wed, Dec 17, 2014 at 03:34:47PM +0100, Sandro Santilli wrote:
> On Wed, Dec 17, 2014 at 01:13:31PM +0100, Sandro Santilli wrote:
> > In the "wmslegend" branch of my fork [1] I've a working wms legend node
> > that fetches the actual legend image lazily from the Model's data() method
> > when it is invoked with the role = Qt::DecorationRole.
> > 
> > But for some reason, if I also attempt to load the legend when data() method
> > is invoked with role = Qt::SizeHintRole, all kind of weird behavior happen,
> > like crashes or hangs.
[...]
> I'm wondering if we should avoid to use internal QEventLoops completely.
> They do look like hacks meant to implement blocking operations, which
> we'd better not have after all, right ?

I've a local version of the WMSLegendNode that uses async loading, so
that basically dataChanged is emitted later rather than immediately.

I confirm in that case there's no more crash.

But to my surprise the rendering of the legend fails to redraw on
dataChanged. This is a log of what happens:

 (data) [925ms] XXX data called with role 13 -- mImage size is 0x0
 (getLegendGraphicFinished) [0ms] XXX legend graphic finished, image is 462x113
 (getLegendGraphicFinished) [0ms] XXX emitting dataChanged
 (data) [1ms] XXX data called with role 13 -- mImage size is 462x113

The first call to data (13 is SizeHint) returns 0x0 but queues loading
of the legend graphic, which completes and emits dataChanged again, then
a new data() call arrives and this time gets the correct image size.

BUT the rendered layertree looks weird correct until I trigger a redraw
by moving the mouse over it or changing the focus.

The weird looking aspect seems to be due to a discrepancy between
the actual legend image size and the space reserved for it.
In practice I have 2 layers and the layer node for second one gets
rendered right below the first one, with the legend of the first one
being printed _over_ the layer node of the second, which moves down
to the correct place on next redraw.

Could this be a bug in the QgsLayerTreeView ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From carrillo.german at gmail.com  Thu Dec 18 06:50:18 2014
From: carrillo.german at gmail.com (=?ISO-8859-1?Q?Germ=E1n_Carrillo?=)
Date: Thu, 18 Dec 2014 09:50:18 -0500
Subject: [Qgis-developer] Moving a layer with PyQGIS using the new layer
	tree
In-Reply-To: <CAFO80_rc7yTE4wAMd4Eg1Xxi7xZ5GWNzHDprRuyWPq3ERTUaUA@mail.gmail.com>
References: <CANaz7mx-9siACA=K4LSPnVqx9K=NCrYFFoz5e6Ge0XqfQVTMzQ@mail.gmail.com>
	<CAFO80_rc7yTE4wAMd4Eg1Xxi7xZ5GWNzHDprRuyWPq3ERTUaUA@mail.gmail.com>
Message-ID: <CANaz7myrMakFNquLBKBODrr23Hf-LEJU-V3=Yw_O1_gWPYfwsg@mail.gmail.com>

Thank you Luigi.

So, I guess the following code would be enough to make the example given in
[1] much more generic:

#######
cloned_group1 = node_group1.clone()
root.insertChildNode(0, cloned_group1)

parent = node_group1.parent()                   # new code

parent.removeChildNode(node_group1)     # replace root by parent
#######


Wouldn't make sense to post such modified example instead?

Regards,

Germ?n
---
[1]
http://www.lutraconsulting.co.uk/blog/2014/07/25/qgis-layer-tree-api-part-2/




2014-12-17 17:39 GMT-05:00 Luigi Pirelli <luipir at gmail.com>:
>
> You have to refer to the group as root to remove his child
>
> Regards Luigi Pirelli
>
> On Wednesday, 17 December 2014, Germ?n Carrillo <carrillo.german at gmail.com>
> wrote:
>
>> Hi all (and Martin D.),
>>
>>
>> I've been trying to reproduce the instructions given here [1] for moving
>> layers. It seems that the code doesn't work if the layer to be moved is
>> inside a group.
>>
>> Specifically, trying to move a layer that is inside a group, I can add
>> the clonned layer to the layer tree but I cannot get the original layer
>> removed, i.e., the following command doesn't work:
>>
>>    root.removeChildNode( originalLayer )
>>
>> It doesn't throw any message nor change the map/ToC status.
>>
>>
>> Can you reproduce the problem? I'm using QGIS 2.6.1 on Ubuntu.
>>
>>
>> Regards,
>>
>> Germ?n Carrillo
>> --
>> [1]
>> http://www.lutraconsulting.co.uk/blog/2014/07/25/qgis-layer-tree-api-part-2/
>>
>>
>> --
>> -----------
>>    |\__
>> (:>__)(
>>    |/
>>
>> Soluciones Geoinform?ticas Libres
>> http://geotux.tuxfamily.org/
>> http://twitter.com/GeoTux2
>>
>

-- 
-----------
   |\__
(:>__)(
   |/

Soluciones Geoinform?ticas Libres
http://geotux.tuxfamily.org/
http://twitter.com/GeoTux2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141218/ecad4966/attachment-0001.html>

From strk at keybit.net  Thu Dec 18 09:37:26 2014
From: strk at keybit.net (Sandro Santilli)
Date: Thu, 18 Dec 2014 18:37:26 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141218124621.GD24598@localhost>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
Message-ID: <20141218173726.GC27408@localhost>

On Thu, Dec 18, 2014 at 01:46:21PM +0100, Sandro Santilli wrote:

> The weird looking aspect seems to be due to a discrepancy between
> the actual legend image size and the space reserved for it.
> In practice I have 2 layers and the layer node for second one gets
> rendered right below the first one, with the legend of the first one
> being printed _over_ the layer node of the second, which moves down
> to the correct place on next redraw.
> 
> Could this be a bug in the QgsLayerTreeView ?

I've tried calling recursivelyEmitDataChanged() from
QgsLayerTreeModel::legendNodeDataChanged() and it effectively
fixes that problem. Is is overkill to always force redraw of the
whole layertree ? Sounds pretty fast to me...

But maybe there's a bug that'd be better fixed ?
I guess it's currently not exposed because no legend item updates
by changing its size ?

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From kari.salovaara at pp1.inet.fi  Thu Dec 18 09:35:32 2014
From: kari.salovaara at pp1.inet.fi (Kari Salovaara)
Date: Thu, 18 Dec 2014 19:35:32 +0200
Subject: [Qgis-developer] Unexpected change in ESPG codes from shapefiles
	(in stable and dev)
Message-ID: <54931064.2030806@pp1.inet.fi>

Hi,

in Finland we have map datasets free of charge to download from The 
National Land Survey of Finland (NLS). See 
http://www.maanmittauslaitos.fi/en/opendata
 From Topographic Database You can download in ESRI shape format any 
Finnish map area. In each area You'll get a number of shapefiles related 
to category and each category has also a *.prj file.

The problem arises when You make a layer from any of these shapefiles in 
following example;
1. set project CRS to Finnish ESPG:3067 ( which is on the list EPSG:3067 
- ETRS89 / ETRS-TM35FIN)
2. make a layer from shapefile, as it has *.prj which starts like 
PROJCS["ETRF89_ETRS_TM35FIN",GEOGCS["GCS_ETRS89",DATUM["D_ETRS_1989"....
You expect the layer CRS to be 3067 but when You look to layer 
properties it shows 3047 (in the dialog list EPSG:3047 - ETRS89 / 
ETRS-TM35)
(which means, I think, 
PROJCS["ETRF89_ETRS_TM35",GEOGCS["GCS_ETRS89",DATUM["D_ETRS_1989")... 
small but nasty difference.

This problem can cause difficulties when creating scripts for automation 
etc.
And very odd is that when You have created an empty project with CRS set 
to 3067 and create a shapefile its *.prj file starts 
PROJCS["ETRS89_TM35FIN_E_N",GEOGCS["GCS_ETRS_1989",DATUM["D_ETRS_1989",
but in this case the EPSG is 3067.

For  my knowledge ETRS-TM35FIN is always and only EPSG:3067.

Could someone explain is this failure in QGIS or GDAL/OGR or PROJ.4?
This problem has been tested in 2.6.1 (latest update in OpenSuse12.3) 
and 2.7.0 (nightly) versions and both linux and win 7 environments.
Finnish QGIS society are waiting this Christmas Question answer with 
interest. ;)

With warm and kind regards,
Kari

PS. This has been discussed here locally without any final 
understanding. Some guess has been that program only looks and takes 
first some nearly suitable code and uses it.

-- 
Kari Salovaara
Hanko, Finland

"Volunteers do not necessarily have the time; they just have the heart."
  ~ Elizabeth Andrew


From davejohansen at gmail.com  Thu Dec 18 10:30:33 2014
From: davejohansen at gmail.com (Dave Johansen)
Date: Thu, 18 Dec 2014 11:30:33 -0700
Subject: [Qgis-developer] Fwd: QwtPolar 1.0.0
In-Reply-To: <201108082229.39831.volker27@gmx.at>
References: <201108081710.11522.volker27@gmx.at>
	<201108082229.39831.volker27@gmx.at>
Message-ID: <CAAcYxUeS7KZAQEDEB-VxXhjkv83JO=gqwSQA0J_sWBVbaDtNqA@mail.gmail.com>

On Mon, Aug 8, 2011 at 1:29 PM, Volker Fr?hlich <volker27 at gmx.at> wrote:
>
> Following up to this:
>
> http://sourceforge.net/mailarchive/message.php?msg_id=27535681
>
> According to this message, the developer is not going to develop a PyQwt 6.
>
> We already had some discussion about Qwt 6 here:
> http://hub.qgis.org/issues/3562
>

Has any more thought gone into this? I'm working on packing QGIS for
RHEL/EPEL 7 but the issue is that it has qwt 6.1.1 and no PyQwt because
there's no support for it. Is the only solution to just turn off the Python
bindings?

Thanks,
Dave
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141218/efbc700a/attachment.html>

From ouyang.leyan.ml at hotmail.com  Thu Dec 18 12:23:41 2014
From: ouyang.leyan.ml at hotmail.com (Leyan)
Date: Thu, 18 Dec 2014 21:23:41 +0100
Subject: [Qgis-developer] Unexpected change in ESPG codes from
 shapefiles (in stable and dev)
In-Reply-To: <54931064.2030806@pp1.inet.fi>
References: <54931064.2030806@pp1.inet.fi>
Message-ID: <BLU436-SMTP181AF0372C30CFBE17F2353BA6A0@phx.gbl>

On 12/18/2014 06:35 PM, Kari Salovaara wrote:
> Hi,
>
> in Finland we have map datasets free of charge to download from The 
> National Land Survey of Finland (NLS). See 
> http://www.maanmittauslaitos.fi/en/opendata
> From Topographic Database You can download in ESRI shape format any 
> Finnish map area. In each area You'll get a number of shapefiles 
> related to category and each category has also a *.prj file.
>
> The problem arises when You make a layer from any of these shapefiles 
> in following example;
> 1. set project CRS to Finnish ESPG:3067 ( which is on the list 
> EPSG:3067 - ETRS89 / ETRS-TM35FIN)
> 2. make a layer from shapefile, as it has *.prj which starts like 
> PROJCS["ETRF89_ETRS_TM35FIN",GEOGCS["GCS_ETRS89",DATUM["D_ETRS_1989"....
> You expect the layer CRS to be 3067 but when You look to layer 
> properties it shows 3047 (in the dialog list EPSG:3047 - ETRS89 / 
> ETRS-TM35)
> (which means, I think, 
> PROJCS["ETRF89_ETRS_TM35",GEOGCS["GCS_ETRS89",DATUM["D_ETRS_1989")... 
> small but nasty difference.
>
> This problem can cause difficulties when creating scripts for 
> automation etc.
> And very odd is that when You have created an empty project with CRS 
> set to 3067 and create a shapefile its *.prj file starts 
> PROJCS["ETRS89_TM35FIN_E_N",GEOGCS["GCS_ETRS_1989",DATUM["D_ETRS_1989",
> but in this case the EPSG is 3067.
>
> For  my knowledge ETRS-TM35FIN is always and only EPSG:3067.
>
> Could someone explain is this failure in QGIS or GDAL/OGR or PROJ.4?
> This problem has been tested in 2.6.1 (latest update in OpenSuse12.3) 
> and 2.7.0 (nightly) versions and both linux and win 7 environments.
> Finnish QGIS society are waiting this Christmas Question answer with 
> interest. ;)
>
> With warm and kind regards,
> Kari
>
> PS. This has been discussed here locally without any final 
> understanding. Some guess has been that program only looks and takes 
> first some nearly suitable code and uses it.
>
It seems the proj4 string for both CRS is the same in my local 
installation. Is it the same for you ? In that case, they are exactly 
equivalent for QGis. When QGis finds a dataset without a clear CRS code, 
it will parse the proj4 string to find the coordinate system and stop at 
the first corresponding one.

Regards,

Leyan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141218/56f831fd/attachment.html>

From rdmailings at duif.net  Thu Dec 18 13:06:25 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 18 Dec 2014 22:06:25 +0100
Subject: [Qgis-developer] create (sub)lines from line between two points
Message-ID: <549341D1.6090707@duif.net>

Hi List,

anybody a simple (python) solution for following problem:

- given a line with 5 vertices (say W-shaped) of total 100 meter
- starting from point 0 on this line I want a set of 10 meter lines
(following the original) and x meter in between.
- the result should be y lines which follow the W

On a straight part of the line it is easy, using the interpolate
function of QgsGeometry: just find the start and end of each 10m part
and create a line in between.

BUT that fails in parts where there is a vertex in this part, the new
line will be created between the start and end, taking a 'shortcut' on
the parts of the original line where there is a vertex/hook in the line.

How can I make the 10m lines follow the original line.
I've been looking into the 'findNextVertex'-functions, but fail to
create good use of these.
Another idea I had was to 'grow' the 10m line in a lot of smaller steps,
checking everytime if there is a vertex from the original line ON the
new create one.

Anybody has a better idea?
The use case is a plugin creating trenches in longer line-segments:
after creating the 10m line, that line is buffered, so create a 'trench'.

Regards,

Richard Duivenvoorde

From bjorn.burr.nyberg at gmail.com  Thu Dec 18 13:13:47 2014
From: bjorn.burr.nyberg at gmail.com (Bjorn Nyberg)
Date: Thu, 18 Dec 2014 22:13:47 +0100
Subject: [Qgis-developer] create (sub)lines from line between two points
In-Reply-To: <549341D1.6090707@duif.net>
References: <549341D1.6090707@duif.net>
Message-ID: <CALwGb1RTWCcXph=bSONy2GNeVCJVy8ws_u4KbJJwhBmS9PaBqQ@mail.gmail.com>

Try grass tool v.splitlines.

Cheers
Bj?rn
On Dec 18, 2014 10:06 PM, "Richard Duivenvoorde" <rdmailings at duif.net>
wrote:

> Hi List,
>
> anybody a simple (python) solution for following problem:
>
> - given a line with 5 vertices (say W-shaped) of total 100 meter
> - starting from point 0 on this line I want a set of 10 meter lines
> (following the original) and x meter in between.
> - the result should be y lines which follow the W
>
> On a straight part of the line it is easy, using the interpolate
> function of QgsGeometry: just find the start and end of each 10m part
> and create a line in between.
>
> BUT that fails in parts where there is a vertex in this part, the new
> line will be created between the start and end, taking a 'shortcut' on
> the parts of the original line where there is a vertex/hook in the line.
>
> How can I make the 10m lines follow the original line.
> I've been looking into the 'findNextVertex'-functions, but fail to
> create good use of these.
> Another idea I had was to 'grow' the 10m line in a lot of smaller steps,
> checking everytime if there is a vertex from the original line ON the
> new create one.
>
> Anybody has a better idea?
> The use case is a plugin creating trenches in longer line-segments:
> after creating the 10m line, that line is buffered, so create a 'trench'.
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141218/e6438982/attachment.html>

From rdmailings at duif.net  Thu Dec 18 13:19:21 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 18 Dec 2014 22:19:21 +0100
Subject: [Qgis-developer] create (sub)lines from line between two points
In-Reply-To: <CALwGb1RTWCcXph=bSONy2GNeVCJVy8ws_u4KbJJwhBmS9PaBqQ@mail.gmail.com>
References: <549341D1.6090707@duif.net>
	<CALwGb1RTWCcXph=bSONy2GNeVCJVy8ws_u4KbJJwhBmS9PaBqQ@mail.gmail.com>
Message-ID: <549344D9.9000609@duif.net>

On 18-12-14 22:13, Bjorn Nyberg wrote:
> Try grass tool v.splitlines.

Thanks for the quick answer, but as I wrote, it is to be used in a
python plugin.
Would you use grass in a plugin for the average QGIS user? (myself for
example have a broken grass plugin here....)

Regards,

Richard


From carlos.lopez at psig.es  Thu Dec 18 14:12:43 2014
From: carlos.lopez at psig.es (=?UTF-8?Q?Carlos_L=C3=B3pez_PSIG?=)
Date: Thu, 18 Dec 2014 23:12:43 +0100
Subject: [Qgis-developer] Improved snapping QEP
In-Reply-To: <CAC2XbFfxz3yw2_8YF7AVcq88NL4adirHcMOW8vWEKNysUF-xRQ@mail.gmail.com>
References: <CAC2XbFfxz3yw2_8YF7AVcq88NL4adirHcMOW8vWEKNysUF-xRQ@mail.gmail.com>
Message-ID: <CAGvsbY4oA6-DMRhkNAUTZM7dQW6Z8+cp3qRJ6nqZKGyOsZkkYA@mail.gmail.com>

Hi Martin,
I'm thinking about some changes to the snapping tools...
IMHO I think that it's really help to digitizing that the pointer show
differences symbol when you approach to a vertex and show another kind of
simbol when you approach to a segment!! like gvSIG or ArcGIS!
Is it possible in your plans???

Best regards,


* <http://www.psig.es>*

*Carlos L?pez Quintanilla*

www.psig.es
carlos.lopez at psig.es
+34 699.680.261



2014-12-18 10:02 GMT+01:00 Martin Dobias <wonder.sk at gmail.com>:
>
> Hi everyone
>
> Recently I have been working on improvements for snapping in QGIS. Here is
> a QEP describing the proposed changes:
>
>
> https://github.com/wonder-sk/QGIS-Enhancement-Proposals/blob/master/qep-x-efficient-snapping-and-geometry-queries.rst
>
> Those interested in the code see my branch:
> https://github.com/wonder-sk/QGIS/tree/snapping-improved
>
> I would be happy to hear your feedback!
>
> Cheers
> Martin
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141218/4f8c73e1/attachment.html>

From cavallini at faunalia.it  Thu Dec 18 23:02:36 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 19 Dec 2014 08:02:36 +0100
Subject: [Qgis-developer] QGIS Android crash on startup
Message-ID: <5493CD8C.1070209@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.
On my Nexus 5, running Android 5.0, latest build from
http://qgis.org/downloads/android/ always crashes on startup, see
logcat below.
Should I open a ticket?
All the best.

===
E/AndroidRuntime( 6073): FATAL EXCEPTION: main
E/AndroidRuntime( 6073): Process: org.qgis.qgis, PID: 6073
E/AndroidRuntime( 6073): java.lang.UnsatisfiedLinkError: JNI_ERR
returned from JNI_OnLoad in "/data/app/org.qgis.qgis-1/lib/arm/libqgis.so"
E/AndroidRuntime( 6073): at
java.lang.Runtime.loadLibrary(Runtime.java:371)
E/AndroidRuntime( 6073): at java.lang.System.loadLibrary(System.java:989)
E/AndroidRuntime( 6073): at
org.qtproject.qt5.android.bindings.QtActivity.loadApplication(QtActivity.java:255)
E/AndroidRuntime( 6073): at
org.qtproject.qt5.android.bindings.QtActivity.access$400(QtActivity.java:99)
E/AndroidRuntime( 6073): at
org.qtproject.qt5.android.bindings.QtActivity$3$1$1.run(QtActivity.java:314)
E/AndroidRuntime( 6073): at
android.os.Handler.handleCallback(Handler.java:739)
E/AndroidRuntime( 6073): at
android.os.Handler.dispatchMessage(Handler.java:95)
E/AndroidRuntime( 6073): at android.os.Looper.loop(Looper.java:135)
E/AndroidRuntime( 6073): at
android.app.ActivityThread.main(ActivityThread.java:5221)
E/AndroidRuntime( 6073): at java.lang.reflect.Method.invoke(Native Method)
E/AndroidRuntime( 6073): at
java.lang.reflect.Method.invoke(Method.java:372)
E/AndroidRuntime( 6073): at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
E/AndroidRuntime( 6073): at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)
E/ActivityManager(  741): Invalid thumbnail dimensions: 576x576


Completo:


D/OpenGLRenderer( 6073): Render dirty regions requested: true
D/Atlas   ( 6073): Validating map...
I/MinistroService( 5529): refreshLibraries took 56 ms
I/MinistroService( 5529): checkModulesImpl took 2 ms
I/Adreno-EGL( 6073): <qeglDrvAPI_eglInitialize:410>: QUALCOMM Build:
10/24/14, 167c270, I68fa98814b
I/OpenGLRenderer( 6073): Initialized EGL, version 1.4
D/OpenGLRenderer( 6073): Enabling debug mode 0
I/Qt      ( 6073): qt start
I/Qt      ( 6073): Sensors start
I/QtPositioning( 6073): Positioning start
D/AndroidRuntime( 6073): Shutting down VM
E/AndroidRuntime( 6073): FATAL EXCEPTION: main
E/AndroidRuntime( 6073): Process: org.qgis.qgis, PID: 6073
E/AndroidRuntime( 6073): java.lang.UnsatisfiedLinkError: JNI_ERR
returned from JNI_OnLoad in "/data/app/org.qgis.qgis-1/lib/arm/libqgis.so"
E/AndroidRuntime( 6073): at
java.lang.Runtime.loadLibrary(Runtime.java:371)
E/AndroidRuntime( 6073): at java.lang.System.loadLibrary(System.java:989)
E/AndroidRuntime( 6073): at
org.qtproject.qt5.android.bindings.QtActivity.loadApplication(QtActivity.java:255)
E/AndroidRuntime( 6073): at
org.qtproject.qt5.android.bindings.QtActivity.access$400(QtActivity.java:99)
E/AndroidRuntime( 6073): at
org.qtproject.qt5.android.bindings.QtActivity$3$1$1.run(QtActivity.java:314)
E/AndroidRuntime( 6073): at
android.os.Handler.handleCallback(Handler.java:739)
E/AndroidRuntime( 6073): at
android.os.Handler.dispatchMessage(Handler.java:95)
E/AndroidRuntime( 6073): at android.os.Looper.loop(Looper.java:135)
E/AndroidRuntime( 6073): at
android.app.ActivityThread.main(ActivityThread.java:5221)
E/AndroidRuntime( 6073): at java.lang.reflect.Method.invoke(Native Method)
E/AndroidRuntime( 6073): at
java.lang.reflect.Method.invoke(Method.java:372)
E/AndroidRuntime( 6073): at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
E/AndroidRuntime( 6073): at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)
W/ActivityManager(  741):   Force finishing activity
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity
I/WindowManager(  741): Screen frozen for +1s199ms due to
Window{1a443fd6 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity}
I/WindowManager(  741): Screenshot max retries 4 of Token{28a56480
ActivityRecord{3979cd03 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity t2087 f}}
appWin=Window{1a443fd6 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity} drawState=1
E/ActivityManager(  741): Invalid thumbnail dimensions: 576x576
I/OpenGLRenderer(  741): Initialized EGL, version 1.4
W/ActivityManager(  741): Activity pause timeout for
ActivityRecord{3979cd03 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity t2087 f}
V/ActivityManager(  741): Display changed displayId=0
I/ActivityManager(  741): Config changes=480 {1.0 222mcc99mnc it_IT
ldltr sw360dp w360dp h567dp 480dpi nrml port finger -keyb/v/h -nav/h
s.132}
I/InputReader(  741): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  741): Device reconfigured: id=4, name='touch_dev',
size 1080x1920, orientation 0, mode 1, display id 0
I/ActivityManager(  741): Process com.google.android.apps.plus (pid
5249) has died
I/ActivityManager(  741): Process com.google.android.calendar (pid
5910) has died
I/ActivityManager(  741): Process com.android.providers.calendar (pid
5865) has died
I/ActivityManager(  741): Process com.google.android.partnersetup (pid
6022) has died
I/ActivityManager(  741): Process org.kde.necessitas.ministro (pid
5529) has died
I/WindowState(  741): WIN DEATH: Window{d644fa9 u0
com.google.android.GoogleCamera/com.android.camera.CameraLauncher}
I/WindowState(  741): WIN DEATH: Window{1a443fd6 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity}
I/Choreographer(  887): Skipped 34 frames!  The application may be
doing too much work on its main thread.
D/audio_hw_primary(  184): disable_audio_route: reset and update mixer
path: low-latency-playback
D/audio_hw_primary(  184): disable_snd_device: snd_device(2: speaker)
I/ActivityManager(  741): Process com.google.android.GoogleCamera (pid
27826) has died
I/WindowManager(  741): Screen frozen for +1s36ms due to
Window{2d8a0096 u0 com.android.systemui.ImageWallpaper}
I/ActivityManager(  741): Process org.qgis.qgis (pid 6073) has died
W/WindowManager(  741): Failed looking up window
W/WindowManager(  741): java.lang.IllegalArgumentException: Requested
window android.view.ViewRootImpl$W at 31708167 does not exist
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:8412)
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:8403)
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.removeWindow(WindowManagerService.java:2558)
W/WindowManager(  741): at
com.android.server.wm.Session.remove(Session.java:186)
W/WindowManager(  741): at
android.view.ViewRootImpl.dispatchDetachedFromWindow(ViewRootImpl.java:2920)
W/WindowManager(  741): at
android.view.ViewRootImpl.doDie(ViewRootImpl.java:5390)
W/WindowManager(  741): at
android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:3223)
W/WindowManager(  741): at
android.os.Handler.dispatchMessage(Handler.java:102)
W/WindowManager(  741): at android.os.Looper.loop(Looper.java:135)
W/WindowManager(  741): at
android.os.HandlerThread.run(HandlerThread.java:61)
W/WindowManager(  741): at
com.android.server.ServiceThread.run(ServiceThread.java:46)
W/InputMethodManagerService(  741): Window already focused, ignoring
focus gain of:
com.android.internal.view.IInputMethodClient$Stub$Proxy at fef0410
attribute=null, token = android.os.BinderProxy at 3d29753d
D/ConnectivityService(  741): updateNetworkScore for NetworkAgentInfo
[WIFI () - 161] to 56
D/ConnectivityService(  741): rematching NetworkAgentInfo [WIFI () - 161]
D/ConnectivityService(  741): Network NetworkAgentInfo [WIFI () - 161]
was already satisfying request 1. No change.
D/ConnectivityService(  741): notifyType AVAILABLE for
NetworkAgentInfo [WIFI () - 161]
D/ConnectivityManager.CallbackHandler(  887): CM callback handler got
msg 524290
D/TaskPersister(  741): removeObsoleteFile: deleting file=2085_task.xml
D/TaskPersister(  741): removeObsoleteFile: deleting file=2087_task.xml
D/TaskPersister(  741): removeObsoleteFile: deleting
file=2085_task_thumbnail.png
I/ActivityManager(  741): Start proc com.google.android.apps.plus for
service
com.google.android.apps.plus/com.google.android.apps.moviemaker.service.PluggedInAnalyzerService:
pid=6197 uid=10063 gids={50063, 9997, 3003, 3002, 1028, 1015}
abi=armeabi-v7a
W/ResourcesManager( 6197): Asset path
'/system/framework/com.google.android.maps.jar' does not exist or
contains no resources.
I/art     (  741): Explicit concurrent mark sweep GC freed 201324(8MB)
AllocSpace objects, 12(2MB) LOS objects, 26% free, 44MB/60MB, paused
1.658ms total 210.596ms
I/Adreno-EGL( 6197): <qeglDrvAPI_eglInitialize:410>: QUALCOMM Build:
10/24/14, 167c270, I68fa98814b
I/GLSActivity( 5724): [ad] getting account id
I/GLSUser ( 5724): [p] Fetched account id for
paolo.cavallini at gmail.com : 113285634206889120929
D/WifiService(  741): acquireWifiLockLocked: WifiLock{NlpWifiLock
type=2 binder=android.os.BinderProxy at 265bcdb1}
D/ConnectivityService(  741): updateNetworkScore for NetworkAgentInfo
[WIFI () - 161] to 60
D/ConnectivityService(  741): rematching NetworkAgentInfo [WIFI () - 161]
D/ConnectivityService(  741): Network NetworkAgentInfo [WIFI () - 161]
was already satisfying request 1. No change.
D/ConnectivityService(  741): notifyType AVAILABLE for
NetworkAgentInfo [WIFI () - 161]
D/ConnectivityManager.CallbackHandler(  887): CM callback handler got
msg 524290
I/art     ( 6062): Explicit concurrent mark sweep GC freed 101688(5MB)
AllocSpace objects, 2(32KB) LOS objects, 39% free, 22MB/38MB, paused
860us total 66.273ms
D/WifiService(  741): releaseWifiLockLocked: WifiLock{NlpWifiLock
type=2 binder=android.os.BinderProxy at 265bcdb1}
I/GCoreUlr( 6062): Successfully inserted location
I/GCoreUlr( 6062): Not calling LocationReporter, hasMoved: false,
elapsed millis: 331046, request: Stationary(3600000)
I/GAV2    ( 6197): Thread[GAThread,5,main]: No campaign data found.
D/ConnectivityService(  741): updateNetworkScore for NetworkAgentInfo
[WIFI () - 161] to 56
D/ConnectivityService(  741): rematching NetworkAgentInfo [WIFI () - 161]
D/ConnectivityService(  741): Network NetworkAgentInfo [WIFI () - 161]
was already satisfying request 1. No change.
D/ConnectivityService(  741): notifyType AVAILABLE for
NetworkAgentInfo [WIFI () - 161]
D/ConnectivityManager.CallbackHandler(  887): CM callback handler got
msg 524290
E/WifiStateMachine(  741): WifiStateMachine CMD_START_SCAN source -2
txSuccessRate=4,47 rxSuccessRate=3,99
targetRoamBSSID=a4:b1:e9:c8:69:7e RSSI=-78
E/WifiStateMachine(  741): WifiStateMachine starting scan for
"Telecom-64129150"WPA_PSK with 2452
I/wpa_supplicant(  852): wlan0: CTRL-EVENT-SCAN-STARTED
E/WifiStateMachine(  741): WifiStateMachine CMD_START_SCAN source -2
txSuccessRate=0,07 rxSuccessRate=0,06
targetRoamBSSID=a4:b1:e9:c8:69:7e RSSI=-79
E/WifiStateMachine(  741): WifiStateMachine starting scan for
"Telecom-64129150"WPA_PSK with 2452
I/wpa_supplicant(  852): wlan0: CTRL-EVENT-SCAN-STARTED
I/art     ( 1955): Note: end time exceeds epoch:
E/WifiStateMachine(  741): WifiStateMachine CMD_START_SCAN source -2
txSuccessRate=0,30 rxSuccessRate=0,24
targetRoamBSSID=a4:b1:e9:c8:69:7e RSSI=-81
I/wpa_supplicant(  852): wlan0: CTRL-EVENT-SCAN-STARTED
D/WifiService(  741): acquireWifiLockLocked: WifiLock{NlpWifiLock
type=2 binder=android.os.BinderProxy at 265bcdb1}
E/WifiStateMachine(  741): WifiStateMachine CMD_START_SCAN source
10007 txSuccessRate=0,15 rxSuccessRate=0,12
targetRoamBSSID=a4:b1:e9:c8:69:7e RSSI=-82
W/PropertyValuesHolder( 1266): Method setBrightness() with type int
not found on target class class us
W/PropertyValuesHolder( 1266): Method getBrightness() with type null
not found on target class class us
I/ActivityManager(  741): START u0 {act=android.intent.action.MAIN
cat=[android.intent.category.LAUNCHER] flg=0x10200000
cmp=org.qgis.qgis/org.qgis.QgisActivity (has extras)} from uid 10019
on display 0
D/audio_hw_primary(  184): out_set_parameters: enter: usecase(1:
low-latency-playback) kvpairs: routing=2
D/audio_hw_primary(  184): select_devices: out_snd_device(2: speaker)
in_snd_device(0: none)
D/msm8974_platform(  184): platform_send_audio_calibration: sending
audio calibration for snd_device(2) acdb_id(15)
D/audio_hw_primary(  184): enable_snd_device: snd_device(2: speaker)
D/audio_hw_primary(  184): enable_audio_route: apply and update mixer
path: low-latency-playback
I/ActivityManager(  741): Start proc org.qgis.qgis for activity
org.qgis.qgis/org.qgis.QgisActivity: pid=6385 uid=10065 gids={50065,
9997, 3003, 1028, 1015} abi=armeabi-v7a
I/art     ( 6385): Late-enabling -Xcheck:jni
V/ActivityManager(  741): Display changed displayId=0
I/ActivityManager(  741): Config changes=480 {1.0 222mcc99mnc it_IT
ldltr sw360dp w598dp h335dp 480dpi nrml land finger -keyb/v/h -nav/h
s.133}
I/InputReader(  741): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  741): Device reconfigured: id=4, name='touch_dev',
size 1080x1920, orientation 1, mode 1, display id 0
I/FirstRun JAVA( 6385): last
git_rev:cfef6a8bfb03cac23e598d116310e90193db047f
I/FirstRun JAVA( 6385): this
git_rev:cfef6a8bfb03cac23e598d116310e90193db047f
I/FirstRun JAVA( 6385): not first run, forwarding to QGIS
I/ActivityManager(  741): START u0
{cmp=org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity} from
uid 10065 on display 0
W/ContextImpl( 6385): Implicit intents with startService are not safe:
Intent { act=org.kde.necessitas.ministro.IMinistro }
android.content.ContextWrapper.bindService:538
org.qtproject.qt5.android.bindings.QtActivity.startApp:654
org.qtproject.qt5.android.bindings.QtActivity.onCreate:880
I/ActivityManager(  741): Start proc org.kde.necessitas.ministro for
service org.kde.necessitas.ministro/.MinistroService: pid=6420
uid=10138 gids={50138, 9997, 3003} abi=armeabi-v7a
D/WifiService(  741): releaseWifiLockLocked: WifiLock{NlpWifiLock
type=2 binder=android.os.BinderProxy at 265bcdb1}
D/OpenGLRenderer( 6385): Render dirty regions requested: true
D/Atlas   ( 6385): Validating map...
I/Adreno-EGL( 6385): <qeglDrvAPI_eglInitialize:410>: QUALCOMM Build:
10/24/14, 167c270, I68fa98814b
I/OpenGLRenderer( 6385): Initialized EGL, version 1.4
D/OpenGLRenderer( 6385): Enabling debug mode 0
W/IInputConnectionWrapper( 1266): showStatusIcon on inactive
InputConnection
I/MinistroService( 6420): refreshLibraries took 58 ms
I/GCoreUlr( 6062): Successfully inserted location
I/GCoreUlr( 6062): Not calling LocationReporter, hasMoved: false,
elapsed millis: 395432, request: Stationary(3600000)
I/MinistroService( 6420): checkModulesImpl took 12 ms
I/ActivityManager(  741): Displayed
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity: +321ms
(total +2m38s369ms)
I/WindowManager(  741): Screen frozen for +490ms due to
Window{109840b4 u0 StatusBar}
I/Qt      ( 6385): qt start
I/Qt      ( 6385): Sensors start
I/QtPositioning( 6385): Positioning start
D/AndroidRuntime( 6385): Shutting down VM
E/AndroidRuntime( 6385): FATAL EXCEPTION: main
E/AndroidRuntime( 6385): Process: org.qgis.qgis, PID: 6385
E/AndroidRuntime( 6385): java.lang.UnsatisfiedLinkError: JNI_ERR
returned from JNI_OnLoad in "/data/app/org.qgis.qgis-1/lib/arm/libqgis.so"
E/AndroidRuntime( 6385): at
java.lang.Runtime.loadLibrary(Runtime.java:371)
E/AndroidRuntime( 6385): at java.lang.System.loadLibrary(System.java:989)
E/AndroidRuntime( 6385): at
org.qtproject.qt5.android.bindings.QtActivity.loadApplication(QtActivity.java:255)
E/AndroidRuntime( 6385): at
org.qtproject.qt5.android.bindings.QtActivity.access$400(QtActivity.java:99)
E/AndroidRuntime( 6385): at
org.qtproject.qt5.android.bindings.QtActivity$3$1$1.run(QtActivity.java:314)
E/AndroidRuntime( 6385): at
android.os.Handler.handleCallback(Handler.java:739)
E/AndroidRuntime( 6385): at
android.os.Handler.dispatchMessage(Handler.java:95)
E/AndroidRuntime( 6385): at android.os.Looper.loop(Looper.java:135)
E/AndroidRuntime( 6385): at
android.app.ActivityThread.main(ActivityThread.java:5221)
E/AndroidRuntime( 6385): at java.lang.reflect.Method.invoke(Native Method)
E/AndroidRuntime( 6385): at
java.lang.reflect.Method.invoke(Method.java:372)
E/AndroidRuntime( 6385): at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
E/AndroidRuntime( 6385): at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)
W/ActivityManager(  741):   Force finishing activity
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity
I/OpenGLRenderer(  741): Initialized EGL, version 1.4
W/ActivityManager(  741): Activity pause timeout for
ActivityRecord{354df891 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity t2088 f}
I/ActivityManager(  741): Config changes=480 {1.0 222mcc99mnc it_IT
ldltr sw360dp w360dp h567dp 480dpi nrml port finger -keyb/v/h -nav/h
s.134}
V/ActivityManager(  741): Display changed displayId=0
I/InputReader(  741): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  741): Device reconfigured: id=4, name='touch_dev',
size 1080x1920, orientation 0, mode 1, display id 0
I/art     (  741): Explicit concurrent mark sweep GC freed 143345(6MB)
AllocSpace objects, 9(209KB) LOS objects, 25% free, 47MB/63MB, paused
1.303ms total 130.321ms
I/WindowManager(  741): Screen frozen for +595ms due to
Window{2d8a0096 u0 com.android.systemui.ImageWallpaper}
D/audio_hw_primary(  184): disable_audio_route: reset and update mixer
path: low-latency-playback
D/audio_hw_primary(  184): disable_snd_device: snd_device(2: speaker)
I/Process ( 6385): Sending signal. PID: 6385 SIG: 9
D/audio_hw_primary(  184): out_set_parameters: enter: usecase(1:
low-latency-playback) kvpairs: routing=2
D/audio_hw_primary(  184): select_devices: out_snd_device(2: speaker)
in_snd_device(0: none)
D/msm8974_platform(  184): platform_send_audio_calibration: sending
audio calibration for snd_device(2) acdb_id(15)
D/audio_hw_primary(  184): enable_snd_device: snd_device(2: speaker)
D/audio_hw_primary(  184): enable_audio_route: apply and update mixer
path: low-latency-playback
I/WindowState(  741): WIN DEATH: Window{3b2f99fc u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity}
I/ActivityManager(  741): Process org.qgis.qgis (pid 6385) has died
W/WindowManager(  741): Failed looking up window
W/WindowManager(  741): java.lang.IllegalArgumentException: Requested
window android.view.ViewRootImpl$W at 38edb759 does not exist
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:8412)
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:8403)
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.removeWindow(WindowManagerService.java:2558)
W/WindowManager(  741): at
com.android.server.wm.Session.remove(Session.java:186)
W/WindowManager(  741): at
android.view.ViewRootImpl.dispatchDetachedFromWindow(ViewRootImpl.java:2920)
W/WindowManager(  741): at
android.view.ViewRootImpl.doDie(ViewRootImpl.java:5390)
W/WindowManager(  741): at
android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:3223)
W/WindowManager(  741): at
android.os.Handler.dispatchMessage(Handler.java:102)
W/WindowManager(  741): at android.os.Looper.loop(Looper.java:135)
W/WindowManager(  741): at
android.os.HandlerThread.run(HandlerThread.java:61)
W/WindowManager(  741): at
com.android.server.ServiceThread.run(ServiceThread.java:46)
I/art     (  741): Explicit concurrent mark sweep GC freed 72690(3MB)
AllocSpace objects, 2(32KB) LOS objects, 26% free, 44MB/60MB, paused
1.459ms total 75.474ms
E/WifiStateMachine(  741): WifiStateMachine CMD_START_SCAN source -2
txSuccessRate=0,04 rxSuccessRate=0,28
targetRoamBSSID=a4:b1:e9:c8:69:7e RSSI=-80
E/WifiStateMachine(  741): WifiStateMachine starting scan for
"Telecom-64129150"WPA_PSK with 2452
I/wpa_supplicant(  852): wlan0: CTRL-EVENT-SCAN-STARTED
D/audio_hw_primary(  184): disable_audio_route: reset and update mixer
path: low-latency-playback
D/audio_hw_primary(  184): disable_snd_device: snd_device(2: speaker)
W/PropertyValuesHolder( 1266): Method setBrightness() with type int
not found on target class class us
W/PropertyValuesHolder( 1266): Method getBrightness() with type null
not found on target class class us
I/ActivityManager(  741): START u0 {act=android.intent.action.MAIN
cat=[android.intent.category.LAUNCHER] flg=0x10200000
cmp=org.qgis.qgis/org.qgis.QgisActivity (has extras)} from uid 10019
on display 0
D/audio_hw_primary(  184): out_set_parameters: enter: usecase(1:
low-latency-playback) kvpairs: routing=2
D/audio_hw_primary(  184): select_devices: out_snd_device(2: speaker)
in_snd_device(0: none)
D/msm8974_platform(  184): platform_send_audio_calibration: sending
audio calibration for snd_device(2) acdb_id(15)
D/audio_hw_primary(  184): enable_snd_device: snd_device(2: speaker)
D/audio_hw_primary(  184): enable_audio_route: apply and update mixer
path: low-latency-playback
I/ActivityManager(  741): Start proc org.qgis.qgis for activity
org.qgis.qgis/org.qgis.QgisActivity: pid=6529 uid=10065 gids={50065,
9997, 3003, 1028, 1015} abi=armeabi-v7a
I/art     ( 6529): Late-enabling -Xcheck:jni
V/ActivityManager(  741): Display changed displayId=0
I/ActivityManager(  741): Config changes=480 {1.0 222mcc99mnc it_IT
ldltr sw360dp w598dp h335dp 480dpi nrml land finger -keyb/v/h -nav/h
s.135}
I/InputReader(  741): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  741): Device reconfigured: id=4, name='touch_dev',
size 1080x1920, orientation 1, mode 1, display id 0
I/FirstRun JAVA( 6529): last
git_rev:cfef6a8bfb03cac23e598d116310e90193db047f
I/FirstRun JAVA( 6529): this
git_rev:cfef6a8bfb03cac23e598d116310e90193db047f
I/FirstRun JAVA( 6529): not first run, forwarding to QGIS
I/ActivityManager(  741): START u0
{cmp=org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity} from
uid 10065 on display 0
W/ContextImpl( 6529): Implicit intents with startService are not safe:
Intent { act=org.kde.necessitas.ministro.IMinistro }
android.content.ContextWrapper.bindService:538
org.qtproject.qt5.android.bindings.QtActivity.startApp:654
org.qtproject.qt5.android.bindings.QtActivity.onCreate:880
D/OpenGLRenderer( 6529): Render dirty regions requested: true
D/Atlas   ( 6529): Validating map...
I/MinistroService( 6420): refreshLibraries took 43 ms
I/MinistroService( 6420): checkModulesImpl took 3 ms
I/Adreno-EGL( 6529): <qeglDrvAPI_eglInitialize:410>: QUALCOMM Build:
10/24/14, 167c270, I68fa98814b
I/OpenGLRenderer( 6529): Initialized EGL, version 1.4
D/OpenGLRenderer( 6529): Enabling debug mode 0
I/Qt      ( 6529): qt start
I/Qt      ( 6529): Sensors start
I/QtPositioning( 6529): Positioning start
D/AndroidRuntime( 6529): Shutting down VM
E/AndroidRuntime( 6529): FATAL EXCEPTION: main
E/AndroidRuntime( 6529): Process: org.qgis.qgis, PID: 6529
E/AndroidRuntime( 6529): java.lang.UnsatisfiedLinkError: JNI_ERR
returned from JNI_OnLoad in "/data/app/org.qgis.qgis-1/lib/arm/libqgis.so"
E/AndroidRuntime( 6529): at
java.lang.Runtime.loadLibrary(Runtime.java:371)
E/AndroidRuntime( 6529): at java.lang.System.loadLibrary(System.java:989)
E/AndroidRuntime( 6529): at
org.qtproject.qt5.android.bindings.QtActivity.loadApplication(QtActivity.java:255)
E/AndroidRuntime( 6529): at
org.qtproject.qt5.android.bindings.QtActivity.access$400(QtActivity.java:99)
E/AndroidRuntime( 6529): at
org.qtproject.qt5.android.bindings.QtActivity$3$1$1.run(QtActivity.java:314)
E/AndroidRuntime( 6529): at
android.os.Handler.handleCallback(Handler.java:739)
E/AndroidRuntime( 6529): at
android.os.Handler.dispatchMessage(Handler.java:95)
E/AndroidRuntime( 6529): at android.os.Looper.loop(Looper.java:135)
E/AndroidRuntime( 6529): at
android.app.ActivityThread.main(ActivityThread.java:5221)
E/AndroidRuntime( 6529): at java.lang.reflect.Method.invoke(Native Method)
E/AndroidRuntime( 6529): at
java.lang.reflect.Method.invoke(Method.java:372)
E/AndroidRuntime( 6529): at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
E/AndroidRuntime( 6529): at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)
W/ActivityManager(  741):   Force finishing activity
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity
I/WindowManager(  741): Screen frozen for +633ms due to Window{6d0ed9a
u0 org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity}
I/WindowManager(  741): Screenshot max retries 4 of Token{2e0d1324
ActivityRecord{35363fb7 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity t2089 f}}
appWin=Window{6d0ed9a u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity} drawState=1
E/ActivityManager(  741): Invalid thumbnail dimensions: 576x576
I/OpenGLRenderer(  741): Initialized EGL, version 1.4
W/ActivityManager(  741): Activity pause timeout for
ActivityRecord{35363fb7 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity t2089 f}
V/ActivityManager(  741): Display changed displayId=0
I/ActivityManager(  741): Config changes=480 {1.0 222mcc99mnc it_IT
ldltr sw360dp w360dp h567dp 480dpi nrml port finger -keyb/v/h -nav/h
s.136}
I/InputReader(  741): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  741): Device reconfigured: id=4, name='touch_dev',
size 1080x1920, orientation 0, mode 1, display id 0
I/WindowManager(  741): Screen frozen for +399ms due to
Window{109840b4 u0 StatusBar}
D/audio_hw_primary(  184): disable_audio_route: reset and update mixer
path: low-latency-playback
D/audio_hw_primary(  184): disable_snd_device: snd_device(2: speaker)
D/TaskPersister(  741): removeObsoleteFile: deleting file=2088_task.xml
D/TaskPersister(  741): removeObsoleteFile: deleting
file=2088_task_thumbnail.png
I/art     (  741): Explicit concurrent mark sweep GC freed
29648(1448KB) AllocSpace objects, 10(2MB) LOS objects, 27% free,
42MB/58MB, paused 1.420ms total 150.414ms
E/WifiStateMachine(  741): WifiStateMachine CMD_START_SCAN source -2
txSuccessRate=0,00 rxSuccessRate=0,00
targetRoamBSSID=a4:b1:e9:c8:69:7e RSSI=-79
E/WifiStateMachine(  741): WifiStateMachine starting scan for
"Telecom-64129150"WPA_PSK with 2452
I/wpa_supplicant(  852): wlan0: CTRL-EVENT-SCAN-STARTED
W/ActivityManager(  741): Activity destroy timeout for
ActivityRecord{2e87ca3a u0 org.qgis.qgis/org.qgis.QgisActivity t2089 f}
W/WindowManager(  741): Failed looking up window
W/WindowManager(  741): java.lang.IllegalArgumentException: Requested
window android.view.ViewRootImpl$W at 12317bf does not exist
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:8412)
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:8403)
W/WindowManager(  741): at
com.android.server.wm.WindowManagerService.removeWindow(WindowManagerService.java:2558)
W/WindowManager(  741): at
com.android.server.wm.Session.remove(Session.java:186)
W/WindowManager(  741): at
android.view.ViewRootImpl.dispatchDetachedFromWindow(ViewRootImpl.java:2920)
W/WindowManager(  741): at
android.view.ViewRootImpl.doDie(ViewRootImpl.java:5390)
W/WindowManager(  741): at
android.view.ViewRootImpl$ViewRootHandler.handleMessage(ViewRootImpl.java:3223)
W/WindowManager(  741): at
android.os.Handler.dispatchMessage(Handler.java:102)
W/WindowManager(  741): at android.os.Looper.loop(Looper.java:135)
W/WindowManager(  741): at
android.os.HandlerThread.run(HandlerThread.java:61)
W/WindowManager(  741): at
com.android.server.ServiceThread.run(ServiceThread.java:46)
W/ActivityManager(  741): Activity destroy timeout for
ActivityRecord{35363fb7 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity t2089 f}
D/ConnectivityService(  741): updateNetworkScore for NetworkAgentInfo
[WIFI () - 161] to 55
D/ConnectivityService(  741): rematching NetworkAgentInfo [WIFI () - 161]
D/ConnectivityService(  741): Network NetworkAgentInfo [WIFI () - 161]
was already satisfying request 1. No change.
D/ConnectivityService(  741): notifyType AVAILABLE for
NetworkAgentInfo [WIFI () - 161]
D/ConnectivityManager.CallbackHandler(  887): CM callback handler got
msg 524290
D/TaskPersister(  741): removeObsoleteFile: deleting file=2089_task.xml
D/ConnectivityService(  741): updateNetworkScore for NetworkAgentInfo
[WIFI () - 161] to 56
D/ConnectivityService(  741): rematching NetworkAgentInfo [WIFI () - 161]
D/ConnectivityService(  741): Network NetworkAgentInfo [WIFI () - 161]
was already satisfying request 1. No change.
D/ConnectivityService(  741): notifyType AVAILABLE for
NetworkAgentInfo [WIFI () - 161]
D/ConnectivityManager.CallbackHandler(  887): CM callback handler got
msg 524290
I/Process ( 6529): Sending signal. PID: 6529 SIG: 9
D/audio_hw_primary(  184): out_set_parameters: enter: usecase(1:
low-latency-playback) kvpairs: routing=2
D/audio_hw_primary(  184): select_devices: out_snd_device(2: speaker)
in_snd_device(0: none)
D/msm8974_platform(  184): platform_send_audio_calibration: sending
audio calibration for snd_device(2) acdb_id(15)
W/InputMethodManagerService(  741): Window already focused, ignoring
focus gain of:
com.android.internal.view.IInputMethodClient$Stub$Proxy at 3cc706ab
attribute=null, token = android.os.BinderProxy at 3d29753d
D/audio_hw_primary(  184): enable_snd_device: snd_device(2: speaker)
D/audio_hw_primary(  184): enable_audio_route: apply and update mixer
path: low-latency-playback
I/ActivityManager(  741): Process org.qgis.qgis (pid 6529) has died
D/audio_hw_primary(  184): disable_audio_route: reset and update mixer
path: low-latency-playback
D/audio_hw_primary(  184): disable_snd_device: snd_device(2: speaker)
I/art     ( 1955): Note: end time exceeds epoch:
W/PropertyValuesHolder( 1266): Method setBrightness() with type int
not found on target class class us
W/PropertyValuesHolder( 1266): Method getBrightness() with type null
not found on target class class us
I/ActivityManager(  741): START u0 {act=android.intent.action.MAIN
cat=[android.intent.category.LAUNCHER] flg=0x10200000
cmp=org.qgis.qgis/org.qgis.QgisActivity (has extras)} from uid 10019
on display 0
D/audio_hw_primary(  184): out_set_parameters: enter: usecase(1:
low-latency-playback) kvpairs: routing=2
D/audio_hw_primary(  184): select_devices: out_snd_device(2: speaker)
in_snd_device(0: none)
D/msm8974_platform(  184): platform_send_audio_calibration: sending
audio calibration for snd_device(2) acdb_id(15)
D/audio_hw_primary(  184): enable_snd_device: snd_device(2: speaker)
D/audio_hw_primary(  184): enable_audio_route: apply and update mixer
path: low-latency-playback
I/ActivityManager(  741): Start proc org.qgis.qgis for activity
org.qgis.qgis/org.qgis.QgisActivity: pid=6666 uid=10065 gids={50065,
9997, 3003, 1028, 1015} abi=armeabi-v7a
I/art     ( 6666): Late-enabling -Xcheck:jni
V/ActivityManager(  741): Display changed displayId=0
I/ActivityManager(  741): Config changes=480 {1.0 222mcc99mnc it_IT
ldltr sw360dp w598dp h335dp 480dpi nrml land finger -keyb/v/h -nav/h
s.137}
I/InputReader(  741): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  741): Device reconfigured: id=4, name='touch_dev',
size 1080x1920, orientation 1, mode 1, display id 0
I/FirstRun JAVA( 6666): last
git_rev:cfef6a8bfb03cac23e598d116310e90193db047f
I/FirstRun JAVA( 6666): this
git_rev:cfef6a8bfb03cac23e598d116310e90193db047f
I/FirstRun JAVA( 6666): not first run, forwarding to QGIS
I/UsageStatsService(  741): User[0] Flushing usage stats to disk
I/ActivityManager(  741): START u0
{cmp=org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity} from
uid 10065 on display 0
W/ContextImpl( 6666): Implicit intents with startService are not safe:
Intent { act=org.kde.necessitas.ministro.IMinistro }
android.content.ContextWrapper.bindService:538
org.qtproject.qt5.android.bindings.QtActivity.startApp:654
org.qtproject.qt5.android.bindings.QtActivity.onCreate:880
D/OpenGLRenderer( 6666): Render dirty regions requested: true
D/Atlas   ( 6666): Validating map...
I/MinistroService( 6420): refreshLibraries took 48 ms
I/MinistroService( 6420): checkModulesImpl took 1 ms
I/Adreno-EGL( 6666): <qeglDrvAPI_eglInitialize:410>: QUALCOMM Build:
10/24/14, 167c270, I68fa98814b
I/OpenGLRenderer( 6666): Initialized EGL, version 1.4
D/OpenGLRenderer( 6666): Enabling debug mode 0
I/Qt      ( 6666): qt start
I/Qt      ( 6666): Sensors start
I/QtPositioning( 6666): Positioning start
D/AndroidRuntime( 6666): Shutting down VM
E/AndroidRuntime( 6666): FATAL EXCEPTION: main
E/AndroidRuntime( 6666): Process: org.qgis.qgis, PID: 6666
E/AndroidRuntime( 6666): java.lang.UnsatisfiedLinkError: JNI_ERR
returned from JNI_OnLoad in "/data/app/org.qgis.qgis-1/lib/arm/libqgis.so"
E/AndroidRuntime( 6666): at
java.lang.Runtime.loadLibrary(Runtime.java:371)
E/AndroidRuntime( 6666): at java.lang.System.loadLibrary(System.java:989)
E/AndroidRuntime( 6666): at
org.qtproject.qt5.android.bindings.QtActivity.loadApplication(QtActivity.java:255)
E/AndroidRuntime( 6666): at
org.qtproject.qt5.android.bindings.QtActivity.access$400(QtActivity.java:99)
E/AndroidRuntime( 6666): at
org.qtproject.qt5.android.bindings.QtActivity$3$1$1.run(QtActivity.java:314)
E/AndroidRuntime( 6666): at
android.os.Handler.handleCallback(Handler.java:739)
E/AndroidRuntime( 6666): at
android.os.Handler.dispatchMessage(Handler.java:95)
E/AndroidRuntime( 6666): at android.os.Looper.loop(Looper.java:135)
E/AndroidRuntime( 6666): at
android.app.ActivityThread.main(ActivityThread.java:5221)
E/AndroidRuntime( 6666): at java.lang.reflect.Method.invoke(Native Method)
E/AndroidRuntime( 6666): at
java.lang.reflect.Method.invoke(Method.java:372)
E/AndroidRuntime( 6666): at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:899)
E/AndroidRuntime( 6666): at
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:694)
W/ActivityManager(  741):   Force finishing activity
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity
I/WindowManager(  741): Screen frozen for +617ms due to
Window{2910cc26 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity}
I/WindowManager(  741): Screenshot max retries 4 of Token{90ffa50
ActivityRecord{3e5cd813 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity t2090 f}}
appWin=Window{2910cc26 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity} drawState=1
E/ActivityManager(  741): Invalid thumbnail dimensions: 576x576
I/OpenGLRenderer(  741): Initialized EGL, version 1.4
W/ActivityManager(  741): Activity pause timeout for
ActivityRecord{3e5cd813 u0
org.qgis.qgis/org.qtproject.qt5.android.bindings.QtActivity t2090 f}
V/ActivityManager(  741): Display changed displayId=0
I/ActivityManager(  741): Config changes=480 {1.0 222mcc99mnc it_IT
ldltr sw360dp w360dp h567dp 480dpi nrml port finger -keyb/v/h -nav/h
s.138}
I/InputReader(  741): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  741): Device reconfigured: id=4, name='touch_dev',
size 1080x1920, orientation 0, mode 1, display id 0
I/WindowManager(  741): Screen frozen for +417ms due to
Window{109840b4 u0 StatusBar}
D/ConnectivityService(  741): updateNetworkScore for NetworkAgentInfo
[WIFI () - 161] to 55
D/ConnectivityService(  741): rematching NetworkAgentInfo [WIFI () - 161]
D/ConnectivityService(  741): Network NetworkAgentInfo [WIFI () - 161]
was already satisfying request 1. No change.
D/ConnectivityService(  741): notifyType AVAILABLE for
NetworkAgentInfo [WIFI () - 161]
D/ConnectivityManager.CallbackHandler(  887): CM callback handler got
msg 524290
D/audio_hw_primary(  184): disable_audio_route: reset and update mixer
path: low-latency-playback
D/audio_hw_primary(  184): disable_snd_device: snd_device(2: speaker)
I/art     (  741): Explicit concurrent mark sweep GC freed 58648(2MB)
AllocSpace objects, 8(128KB) LOS objects, 27% free, 42MB/58MB, paused
1.458ms total 134.111ms


- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSTzTUACgkQ/NedwLUzIr6o8gCgs64NUx4jdeNxxcYnvgmOgsmT
mA4AoIBgkgyMFA4no7z18xG2PX4yqiyH
=CdWN
-----END PGP SIGNATURE-----

From kari.salovaara at pp1.inet.fi  Thu Dec 18 23:05:30 2014
From: kari.salovaara at pp1.inet.fi (Kari Salovaara)
Date: Fri, 19 Dec 2014 09:05:30 +0200
Subject: [Qgis-developer] Unexpected change in ESPG codes from
 shapefiles (in stable and dev)
In-Reply-To: <BLU436-SMTP181AF0372C30CFBE17F2353BA6A0@phx.gbl>
References: <54931064.2030806@pp1.inet.fi>
	<BLU436-SMTP181AF0372C30CFBE17F2353BA6A0@phx.gbl>
Message-ID: <5493CE3A.5070207@pp1.inet.fi>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141219/89fb157d/attachment.html>

From geodrinx at gmail.com  Thu Dec 18 23:09:50 2014
From: geodrinx at gmail.com (Geo DrinX)
Date: Fri, 19 Dec 2014 08:09:50 +0100
Subject: [Qgis-developer] About how to insert the new RasMover plugin in
	QGIS repository
Message-ID: <CAFF9ZhuB2DKx7qJxq2pjK7Ng7X9jvBiLY9E8bZdGDQeL_h48AA@mail.gmail.com>

Hello all,


I am trying to update a new version of my plugin "rasmover" in QGIS
repository,
but I receive the message:


"This field is required."

without any other info.   :(

My plugin can be downloaded also from here:

https://github.com/geodrinx/rasmover

and this is my  metadata file:

https://github.com/geodrinx/rasmover/blob/master/metadata.txt


Could you please help me to understand what I need to do to succesfully
insert my ZIP ?


Thank you in advance

Roberto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141219/01fb785b/attachment.html>

From cavallini at faunalia.it  Thu Dec 18 23:20:38 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 19 Dec 2014 08:20:38 +0100
Subject: [Qgis-developer] create (sub)lines from line between two points
In-Reply-To: <549344D9.9000609@duif.net>
References: <549341D1.6090707@duif.net>	<CALwGb1RTWCcXph=bSONy2GNeVCJVy8ws_u4KbJJwhBmS9PaBqQ@mail.gmail.com>
	<549344D9.9000609@duif.net>
Message-ID: <5493D1C6.8000807@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Richard,

Il 18/12/2014 22:19, Richard Duivenvoorde ha scritto:
> On 18-12-14 22:13, Bjorn Nyberg wrote:
>> Try grass tool v.splitlines.
> 
> Thanks for the quick answer, but as I wrote, it is to be used in a 
> python plugin. Would you use grass in a plugin for the average QGIS
> user? (myself for example have a broken grass plugin here....)

you do not need to use the grass plugin for this; grass commands can
be used easily through Processing.
Please have a look also to the QChainage plugin, that does something
similar; IMHO an extension of this would be preferable than having
another plugin.
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlST0cYACgkQ/NedwLUzIr5IHwCfXzMKcBanJiSwKcfCZ/9M7Tsc
KecAn2G22GL8GJM5DO3qlq6FYZtvI012
=O1Kb
-----END PGP SIGNATURE-----

From wonder.sk at gmail.com  Fri Dec 19 00:26:09 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 19 Dec 2014 15:26:09 +0700
Subject: [Qgis-developer] Rendering cache and labeling
In-Reply-To: <5491A119.3010700@oslandia.com>
References: <5491A119.3010700@oslandia.com>
Message-ID: <CAC2XbFfF42zBoRANBP=9M84HhCpkCFnShx24MegZO1jTu0ce2g@mail.gmail.com>

Hi Hugo

On Wed, Dec 17, 2014 at 10:28 PM, Hugo Mercier <hugo.mercier at oslandia.com>
wrote:
>
> Hi,
>
> When labeling is enabled on a layer, then the rendering cache is made
> invalid and everything is computed for rendering.
>
> I may be missing something obvious, but I don't understand why.
> Is it because of a particular use case or because of some limitations in
> the caching process ?
>

If we used cached layer image, the features for labeling from that layer
would not be registered and therefore they would not appear. A smarter
solution would be to keep the layer cached and just iterate over layer's
features to register them (if they would get rendered).

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141219/e6fae101/attachment.html>

From hugo.mercier at oslandia.com  Fri Dec 19 00:32:38 2014
From: hugo.mercier at oslandia.com (Hugo Mercier)
Date: Fri, 19 Dec 2014 09:32:38 +0100
Subject: [Qgis-developer] Rendering cache and labeling
In-Reply-To: <CAC2XbFfF42zBoRANBP=9M84HhCpkCFnShx24MegZO1jTu0ce2g@mail.gmail.com>
References: <5491A119.3010700@oslandia.com>
	<CAC2XbFfF42zBoRANBP=9M84HhCpkCFnShx24MegZO1jTu0ce2g@mail.gmail.com>
Message-ID: <5493E2A6.5090708@oslandia.com>

Hi Martin,

Le 19/12/2014 09:26, Martin Dobias a ?crit :
> Hi Hugo
> 
> On Wed, Dec 17, 2014 at 10:28 PM, Hugo Mercier
> <hugo.mercier at oslandia.com <mailto:hugo.mercier at oslandia.com>> wrote:
> 
>     Hi,
> 
>     When labeling is enabled on a layer, then the rendering cache is made
>     invalid and everything is computed for rendering.
> 
>     I may be missing something obvious, but I don't understand why.
>     Is it because of a particular use case or because of some limitations in
>     the caching process ?
> 
> 
> If we used cached layer image, the features for labeling from that layer
> would not be registered and therefore they would not appear. A smarter
> solution would be to keep the layer cached and just iterate over layer's
> features to register them (if they would get rendered).
> 

Thanks for your answer.

But, I'm not sure to follow :)

Suppose I have an uncached layer with labeling switched on.
During the first rendering, everything is drawn, including labels.
During the second rendering (same extent), the cache could be reused and
it would include labels previously drawn during the first rendering. No ?

From wonder.sk at gmail.com  Fri Dec 19 00:35:39 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 19 Dec 2014 15:35:39 +0700
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141218173726.GC27408@localhost>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
	<20141218173726.GC27408@localhost>
Message-ID: <CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>

Hi Sandro

On Fri, Dec 19, 2014 at 12:37 AM, Sandro Santilli <strk at keybit.net> wrote:
>
> On Thu, Dec 18, 2014 at 01:46:21PM +0100, Sandro Santilli wrote:
>
> > The weird looking aspect seems to be due to a discrepancy between
> > the actual legend image size and the space reserved for it.
> > In practice I have 2 layers and the layer node for second one gets
> > rendered right below the first one, with the legend of the first one
> > being printed _over_ the layer node of the second, which moves down
> > to the correct place on next redraw.
> >
> > Could this be a bug in the QgsLayerTreeView ?
>

Most likely you just do not emit dataChanged() where it should be (I have
seen this kind of errors in various models and this was a common problem).
You can try using the model with plain QTreeView - it will most likely have
the same issue.


> I've tried calling recursivelyEmitDataChanged() from
> QgsLayerTreeModel::legendNodeDataChanged() and it effectively
> fixes that problem. Is is overkill to always force redraw of the
> whole layertree ? Sounds pretty fast to me...
>

That does not look right, it looks like fixing the problem in a wrong way.
That call was made to really force reload of all items when font settings
have changed.


But maybe there's a bug that'd be better fixed ?
> I guess it's currently not exposed because no legend item updates
> by changing its size ?
>

Maybe a missing emit dataChanged() in
QgsWMSLegendNode::invalidateMapBasedData() ? Just guessing...

Cheers
Martin

<http://strk.keybit.net/rants/ascii_mails.txt>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141219/1339561f/attachment.html>

From wonder.sk at gmail.com  Fri Dec 19 00:42:01 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 19 Dec 2014 15:42:01 +0700
Subject: [Qgis-developer] Rendering cache and labeling
In-Reply-To: <5493E2A6.5090708@oslandia.com>
References: <5491A119.3010700@oslandia.com>
	<CAC2XbFfF42zBoRANBP=9M84HhCpkCFnShx24MegZO1jTu0ce2g@mail.gmail.com>
	<5493E2A6.5090708@oslandia.com>
Message-ID: <CAC2XbFfwM3uMoUwBxVfAs9_dK7juC5V9j=5DFxFatK3ULpVB-g@mail.gmail.com>

On Fri, Dec 19, 2014 at 3:32 PM, Hugo Mercier <hugo.mercier at oslandia.com>
wrote:
>
>
> Suppose I have an uncached layer with labeling switched on.
> During the first rendering, everything is drawn, including labels.
> During the second rendering (same extent), the cache could be reused and
> it would include labels previously drawn during the first rendering. No ?
>

No... the labeling is not cached anywhere. Therefore in every rendering job
it is necessary to register all features that may have labels again in
order to be considered in the labeling.

Also think about this case: there is one layer with labeling, it gets
cached. Then user adds another layer with labels - it is necessary to
recalculate the labeling again as the new layer may require some existing
labels to be hidden or moved to a different position to fit labels from the
new layer. Hopefully that makes sense :-)

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141219/30878b23/attachment-0001.html>

From hugo.mercier at oslandia.com  Fri Dec 19 01:15:06 2014
From: hugo.mercier at oslandia.com (Hugo Mercier)
Date: Fri, 19 Dec 2014 10:15:06 +0100
Subject: [Qgis-developer] Rendering cache and labeling
In-Reply-To: <CAC2XbFfwM3uMoUwBxVfAs9_dK7juC5V9j=5DFxFatK3ULpVB-g@mail.gmail.com>
References: <5491A119.3010700@oslandia.com>	<CAC2XbFfF42zBoRANBP=9M84HhCpkCFnShx24MegZO1jTu0ce2g@mail.gmail.com>	<5493E2A6.5090708@oslandia.com>
	<CAC2XbFfwM3uMoUwBxVfAs9_dK7juC5V9j=5DFxFatK3ULpVB-g@mail.gmail.com>
Message-ID: <5493EC9A.7070509@oslandia.com>



Le 19/12/2014 09:42, Martin Dobias a ?crit :
> 
> On Fri, Dec 19, 2014 at 3:32 PM, Hugo Mercier <hugo.mercier at oslandia.com
> <mailto:hugo.mercier at oslandia.com>> wrote:
> 
> 
>     Suppose I have an uncached layer with labeling switched on.
>     During the first rendering, everything is drawn, including labels.
>     During the second rendering (same extent), the cache could be reused and
>     it would include labels previously drawn during the first rendering.
>     No ?
> 
> 
> No... the labeling is not cached anywhere. Therefore in every rendering
> job it is necessary to register all features that may have labels again
> in order to be considered in the labeling.
> 
> Also think about this case: there is one layer with labeling, it gets
> cached. Then user adds another layer with labels - it is necessary to
> recalculate the labeling again as the new layer may require some
> existing labels to be hidden or moved to a different position to fit
> labels from the new layer. Hopefully that makes sense :-)
> 

Ah right ... now I see.
That is because the cache is local to each layer, but the labeling
depends on all the layers.
Thanks.

From strk at keybit.net  Fri Dec 19 01:34:34 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 19 Dec 2014 10:34:34 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
	<20141218173726.GC27408@localhost>
	<CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>
Message-ID: <20141219093434.GE5983@localhost>

On Fri, Dec 19, 2014 at 03:35:39PM +0700, Martin Dobias wrote:
> On Fri, Dec 19, 2014 at 12:37 AM, Sandro Santilli <strk at keybit.net> wrote:
> >
> > On Thu, Dec 18, 2014 at 01:46:21PM +0100, Sandro Santilli wrote:
> >
> > > The weird looking aspect seems to be due to a discrepancy between
> > > the actual legend image size and the space reserved for it.
> > > In practice I have 2 layers and the layer node for second one gets
> > > rendered right below the first one, with the legend of the first one
> > > being printed _over_ the layer node of the second, which moves down
> > > to the correct place on next redraw.
> > >
> > > Could this be a bug in the QgsLayerTreeView ?
> 
> Most likely you just do not emit dataChanged() where it should be (I have
> seen this kind of errors in various models and this was a common problem).
> You can try using the model with plain QTreeView - it will most likely have
> the same issue.
>
> Maybe a missing emit dataChanged() in
> QgsWMSLegendNode::invalidateMapBasedData() ? Just guessing...

I've added logging calls and I do see the dataChanged being emitted.
Also, the _legend_ does get refreshed, so I see the new image.
Only, the position of the following layer did not move.
As if the View got the new content (decoration) but not the new size.

I'm not sure the explanation is clear.
Did you try building my branch to see ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From giovanni.manghi at gmail.com  Fri Dec 19 02:50:14 2014
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Fri, 19 Dec 2014 10:50:14 +0000
Subject: [Qgis-developer] Qgis-developer] Rendering cache and labeling
Message-ID: <CACfnYnSKUfTCAW1tdL-KnDE1a0FTBc5esDQkEyu5mbSMNm909A@mail.gmail.com>

Hi,


>> Suppose I have an uncached layer with labeling switched on.
>> During the first rendering, everything is drawn, including labels.
>> During the second rendering (same extent), the cache could be reused and
>> it would include labels previously drawn during the first rendering. No ?
>>
>
> No... the labeling is not cached anywhere. Therefore in every rendering job
> it is necessary to register all features that may have labels again in
> order to be considered in the labeling.
>
> Also think about this case: there is one layer with labeling, it gets
> cached. Then user adds another layer with labels - it is necessary to
> recalculate the labeling again as the new layer may require some existing
> labels to be hidden or moved to a different position to fit labels from the
> new layer. Hopefully that makes sense :-)


is this the explanation for this?

http://hub.qgis.org/issues/10441


cheers!

-- Giovanni --

From strk at keybit.net  Fri Dec 19 03:55:11 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 19 Dec 2014 12:55:11 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141219093434.GE5983@localhost>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
	<20141218173726.GC27408@localhost>
	<CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>
	<20141219093434.GE5983@localhost>
Message-ID: <20141219115511.GD10200@localhost>

On Fri, Dec 19, 2014 at 10:34:34AM +0100, Sandro Santilli wrote:
> On Fri, Dec 19, 2014 at 03:35:39PM +0700, Martin Dobias wrote:
> > On Fri, Dec 19, 2014 at 12:37 AM, Sandro Santilli <strk at keybit.net> wrote:
> > >
> > > On Thu, Dec 18, 2014 at 01:46:21PM +0100, Sandro Santilli wrote:
> > >
> > > > The weird looking aspect seems to be due to a discrepancy between
> > > > the actual legend image size and the space reserved for it.
> > > > In practice I have 2 layers and the layer node for second one gets
> > > > rendered right below the first one, with the legend of the first one
> > > > being printed _over_ the layer node of the second, which moves down
> > > > to the correct place on next redraw.
> > > >
> > > > Could this be a bug in the QgsLayerTreeView ?
> > 
> > Most likely you just do not emit dataChanged() where it should be (I have
> > seen this kind of errors in various models and this was a common problem).
> > You can try using the model with plain QTreeView - it will most likely have
> > the same issue.
> >
> > Maybe a missing emit dataChanged() in
> > QgsWMSLegendNode::invalidateMapBasedData() ? Just guessing...
> 
> I've added logging calls and I do see the dataChanged being emitted.
> Also, the _legend_ does get refreshed, so I see the new image.
> Only, the position of the following layer did not move.
> As if the View got the new content (decoration) but not the new size.
> 
> I'm not sure the explanation is clear.
> Did you try building my branch to see ?

On Nyall suggestion I've added support for testing models with
the QT Model Tester: http://qt-project.org/wiki/Model_Test

The test fail this assertion in ModelTest::nonDestructiveBasicTest():

  Qt::ItemFlags flags = model->flags( QModelIndex() );
  Q_ASSERT( flags == Qt::ItemIsDropEnabled || flags == 0 );

The test checks that the flag for an invalid index can only
be 0 or Qt::ItemIsDropEnabled. Instead QgsLayerTreeModel includes
ItemIsSelectable and ItemIsEnabled in the flags:

  if ( !index.isValid() )
  {
    Qt::ItemFlags rootFlags = Qt::ItemIsEnabled | Qt::ItemIsSelectable;
    if ( testFlag( AllowNodeReorder ) )
      rootFlags |= Qt::ItemIsDropEnabled;
    return rootFlags;
  }

What's the rationale for adding those two flags ?
I've tested that initializing ti to 0 and adding the dropEnabled
based on AllowNodeReorder passes the test.

Also reverting the change that switched to recursivelyEmitDataChanged()
did not trigger an error report from ModelTester, which leaves the
view as the more likely culprit for the placement issue. How would
you suggest to go for quickly trying use of a vanilla QTreeView ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From tomkralidis at gmail.com  Fri Dec 19 05:45:15 2014
From: tomkralidis at gmail.com (Tom Kralidis)
Date: Fri, 19 Dec 2014 08:45:15 -0500
Subject: [Qgis-developer] Error in new Metasearch
In-Reply-To: <54915AC0.60105@faunalia.it>
References: <54915AC0.60105@faunalia.it>
Message-ID: <CAFWXLWUy-cEGO4RSqAH86WdOv1+Kj0Btgq2wQjMdCuwoemX-xA@mail.gmail.com>

Hi Paolo: FYI we have now merged MetaSearch into QGIS core.  Can you
try now from there?

Thanks

..Tom


On Wed, Dec 17, 2014 at 5:28 AM, Paolo Cavallini <cavallini at faunalia.it> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi all.
> Just upgraded Metasearch, I'm consistently getting this error:
>
> Traceback (most recent call last):
>   File
> "/home/paolo/Desktop/geotec/qgis2/python/plugins/MetaSearch/dialogs/maindialog.py",
> line 471, in search
>     self.display_results()
>   File
> "/home/paolo/Desktop/geotec/qgis2/python/plugins/MetaSearch/dialogs/maindialog.py",
> line 483, in display_results
>     's'[self.catalog.results['matches'] == 1:])
> TypeError: not all arguments converted during string formatting
>
> All the best, and thanks.
> - --
> Paolo Cavallini - www.faunalia.eu
> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1
>
> iEYEARECAAYFAlSRWsAACgkQ/NedwLUzIr4GAwCfVXOsA7WWVt6fcDbBvi0MEsCH
> 6scAnjqrgTFMA2LUaXukgn2NcG9fZkGi
> =qCCj
> -----END PGP SIGNATURE-----
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From andre+joost at nurfuerspam.de  Fri Dec 19 07:22:48 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 19 Dec 2014 16:22:48 +0100
Subject: [Qgis-developer] Unexpected change in ESPG codes from
 shapefiles (in stable and dev)
In-Reply-To: <5493CE3A.5070207@pp1.inet.fi>
References: <54931064.2030806@pp1.inet.fi>	<BLU436-SMTP181AF0372C30CFBE17F2353BA6A0@phx.gbl>
	<5493CE3A.5070207@pp1.inet.fi>
Message-ID: <549442C8.5050408@nurfuerspam.de>

Am 19.12.2014 um 08:05 schrieb Kari Salovaara:
> Hi,
>
> thanks Leyan.
> Unfortunately that knowledge doesn't help to solve rhe problem.
> I looked proj tables and I noticed that there is four different codes with same
> parsed items.
> And further, why QGIS makes its own variant of the name which is not used
> anywhere in Finland. I know there is no standard for those names but...
>
> I'm continuing to find  some solution for this "niche".
>

You can always make use of .qpj files to force a specific EPSG code. The 
.prj file normally does not have EPSG codes inside (especially if they 
are from the Arcgis world), therefore the .qpj file was invented.
QGIS always creates .qpj files, so when you have set the CRS once 
correct, you can copy that semi-automated to any shapefile you get from 
outside.

By the way, the EPSG database states for EPSG:3067:

"Remarks:
Identical to ETRS89 / UTM zone 35N (code 25835) except for area of use. 
See ETRS89 / TM35FIN(N,E) (code 5048) for more usually used alternative 
with axis order reversed. "

And for EPSG:5048:

"Remarks:
Identical to ETRS89 / UTM zone 35N (N,E) (code 3047) except for area of 
use. Used in preference to ETRS89 / TM35FIN(E,N) (CRS code 3067) in 
which coordinate axes are in order easting-northing.

So the axis sorting is different, but that is not part of the proj 
definition.

HTH,
Andr? Joost


From strk at keybit.net  Fri Dec 19 07:58:43 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 19 Dec 2014 16:58:43 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141219115511.GD10200@localhost>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
	<20141218173726.GC27408@localhost>
	<CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>
	<20141219093434.GE5983@localhost>
	<20141219115511.GD10200@localhost>
Message-ID: <20141219155843.GB27216@localhost>

On Fri, Dec 19, 2014 at 12:55:11PM +0100, Sandro Santilli wrote:
> On Fri, Dec 19, 2014 at 10:34:34AM +0100, Sandro Santilli wrote:
> > On Fri, Dec 19, 2014 at 03:35:39PM +0700, Martin Dobias wrote:
> > > On Fri, Dec 19, 2014 at 12:37 AM, Sandro Santilli <strk at keybit.net> wrote:
> > > >
> > > > On Thu, Dec 18, 2014 at 01:46:21PM +0100, Sandro Santilli wrote:
> > > >
> > > > > The weird looking aspect seems to be due to a discrepancy between
> > > > > the actual legend image size and the space reserved for it.
> > > > > In practice I have 2 layers and the layer node for second one gets
> > > > > rendered right below the first one, with the legend of the first one
> > > > > being printed _over_ the layer node of the second, which moves down
> > > > > to the correct place on next redraw.
> > > > >
> > > > > Could this be a bug in the QgsLayerTreeView ?
> > > 
> > > Most likely you just do not emit dataChanged() where it should be (I have
> > > seen this kind of errors in various models and this was a common problem).
> > > You can try using the model with plain QTreeView - it will most likely have
> > > the same issue.

Confirmed. I've added a QTreeView and it has the same issue.
Unfortunately, the model tester did not catch any issue, beside the
already-reported one which I fixed in master already.

--strk;

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From strk at keybit.net  Fri Dec 19 09:14:54 2014
From: strk at keybit.net (Sandro Santilli)
Date: Fri, 19 Dec 2014 18:14:54 +0100
Subject: [Qgis-developer] Contextual WMS legend QEP
Message-ID: <20141219171454.GA362@localhost>

I've completed an enhancement proposal for adding support for contextual
WMS legends: https://github.com/qgis/QGIS-Enhancement-Proposals/pull/15
(to read online: Files changed -> View)

The code reflecting the QEP as a single commit is ready here:
https://github.com/strk/qgis/tree/wmslegend
https://github.com/qgis/QGIS/pull/1735

Do I need a vote on the QEP before merging the code to master ?

--strk; 

 ()  ASCII ribbon campaign  --  Keep it simple !
 /\  http://strk.keybit.net/rants/ascii_mails.txt  

From cavallini at faunalia.it  Fri Dec 19 09:25:57 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 19 Dec 2014 18:25:57 +0100
Subject: [Qgis-developer] Contextual WMS legend QEP
In-Reply-To: <20141219171454.GA362@localhost>
References: <20141219171454.GA362@localhost>
Message-ID: <54945FA5.9020508@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.

Il 19/12/2014 18:14, Sandro Santilli ha scritto:
> I've completed an enhancement proposal for adding support for
> contextual WMS legends:
> https://github.com/qgis/QGIS-Enhancement-Proposals/pull/15 (to read
> online: Files changed -> View)
> 
> The code reflecting the QEP as a single commit is ready here: 
> https://github.com/strk/qgis/tree/wmslegend 
> https://github.com/qgis/QGIS/pull/1735
> 
> Do I need a vote on the QEP before merging the code to master ?

I think we decided to always vote QEPs. If so, it's a +1 from me.
I'd appreciate if others could vote in a reasonable time frame.

All the best, and thanks.

- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSUX6QACgkQ/NedwLUzIr7l/gCfei5J3vfnhKiS3UbeuZ8NAl35
PmQAn0CISaUi7I/oBKT/VSlpN0zNDctB
=iMAf
-----END PGP SIGNATURE-----

From luipir at gmail.com  Sat Dec 20 02:57:32 2014
From: luipir at gmail.com (Luigi Pirelli)
Date: Sat, 20 Dec 2014 11:57:32 +0100
Subject: [Qgis-developer] QgsFeatureRerquest filters are mutually exclusive?
	why?
Message-ID: <CAFO80_o5Dt5cLfdOVj4kjNJ7KWd1ANO1umdPno3Jn7P1Xeo31Q@mail.gmail.com>

Hi,

I realised that some filter in QgsFeatureRequest are mutually exclusive

the following gist on alaska.shp (in alaska crs)
https://gist.github.com/luipir/fcbc318304944962dfec#file-gistfile1-py

return 283 Elements

but uncomment spatial filter request.setFilterRect( rect ) return only
10 records

seems that the mutual exclusivity is coded here
http://qgis.org/api/qgsvectorlayerfeatureiterator_8cpp_source.html#l00126

and mFilter in QgsFeatureRequest is NOT managed in OR during setting
in http://qgis.org/api/qgsfeaturerequest_8cpp_source.html

it's a bug or a feature or not implemented or my fault in using filtering?

regards, Luigi Pirelli

From luipir at gmail.com  Sat Dec 20 03:34:28 2014
From: luipir at gmail.com (Luigi Pirelli)
Date: Sat, 20 Dec 2014 12:34:28 +0100
Subject: [Qgis-developer] QgsFeatureRerquest filters are mutually
	exclusive? why?
In-Reply-To: <CAFO80_o5Dt5cLfdOVj4kjNJ7KWd1ANO1umdPno3Jn7P1Xeo31Q@mail.gmail.com>
References: <CAFO80_o5Dt5cLfdOVj4kjNJ7KWd1ANO1umdPno3Jn7P1Xeo31Q@mail.gmail.com>
Message-ID: <CAFO80_qO3ew-pK2mRfoxZh5BeN1apMtGHi=LWKPDOFf7f47WzA@mail.gmail.com>

filter combination works only if setting attribute filter with

http://qgis.org/api/classQgsVectorLayer.html#a6ad141dfa9a0243c0c1c9fa422379e40

a snippet that works is

# iteration getting only selected features
rect = QgsRectangle(  1223070.695,  2293653.357 , 9046974.211,  4184988.662)

request =  QgsFeatureRequest()
request.setSubsetOfAttributes([0, 2])
myVector.setSubsetString('"AREA_MI" > 1000') <--------------------
request.setFilterRect( rect )

#request.setFlags(QgsFeatureRequest.ExactIntersect or
QgsFeatureRequest.SubsetOfAttributes)

for index, feature in enumerate( myVector.getFeatures( request ) ):
    print "The record %d has ID %d" % ( index, feature.id() )

regards Luigi Pirelli


On 20 December 2014 at 11:57, Luigi Pirelli <luipir at gmail.com> wrote:
> Hi,
>
> I realised that some filter in QgsFeatureRequest are mutually exclusive
>
> the following gist on alaska.shp (in alaska crs)
> https://gist.github.com/luipir/fcbc318304944962dfec#file-gistfile1-py
>
> return 283 Elements
>
> but uncomment spatial filter request.setFilterRect( rect ) return only
> 10 records
>
> seems that the mutual exclusivity is coded here
> http://qgis.org/api/qgsvectorlayerfeatureiterator_8cpp_source.html#l00126
>
> and mFilter in QgsFeatureRequest is NOT managed in OR during setting
> in http://qgis.org/api/qgsfeaturerequest_8cpp_source.html
>
> it's a bug or a feature or not implemented or my fault in using filtering?
>
> regards, Luigi Pirelli

From luipir at gmail.com  Sat Dec 20 03:38:01 2014
From: luipir at gmail.com (Luigi Pirelli)
Date: Sat, 20 Dec 2014 12:38:01 +0100
Subject: [Qgis-developer] QgsFeatureRerquest filters are mutually
	exclusive? why?
In-Reply-To: <CAFO80_qO3ew-pK2mRfoxZh5BeN1apMtGHi=LWKPDOFf7f47WzA@mail.gmail.com>
References: <CAFO80_o5Dt5cLfdOVj4kjNJ7KWd1ANO1umdPno3Jn7P1Xeo31Q@mail.gmail.com>
	<CAFO80_qO3ew-pK2mRfoxZh5BeN1apMtGHi=LWKPDOFf7f47WzA@mail.gmail.com>
Message-ID: <CAFO80_rurU0zmD3xeEG58AXO60qv3ivY9Y9gsUs5CN1U3ukMaQ@mail.gmail.com>

remain the question... why filters are mutually exclusive.

regards, Luigi Pirelli

On 20 December 2014 at 12:34, Luigi Pirelli <luipir at gmail.com> wrote:
> filter combination works only if setting attribute filter with
>
> http://qgis.org/api/classQgsVectorLayer.html#a6ad141dfa9a0243c0c1c9fa422379e40
>
> a snippet that works is
>
> # iteration getting only selected features
> rect = QgsRectangle(  1223070.695,  2293653.357 , 9046974.211,  4184988.662)
>
> request =  QgsFeatureRequest()
> request.setSubsetOfAttributes([0, 2])
> myVector.setSubsetString('"AREA_MI" > 1000') <--------------------
> request.setFilterRect( rect )
>
> #request.setFlags(QgsFeatureRequest.ExactIntersect or
> QgsFeatureRequest.SubsetOfAttributes)
>
> for index, feature in enumerate( myVector.getFeatures( request ) ):
>     print "The record %d has ID %d" % ( index, feature.id() )
>
> regards Luigi Pirelli
>
>
> On 20 December 2014 at 11:57, Luigi Pirelli <luipir at gmail.com> wrote:
>> Hi,
>>
>> I realised that some filter in QgsFeatureRequest are mutually exclusive
>>
>> the following gist on alaska.shp (in alaska crs)
>> https://gist.github.com/luipir/fcbc318304944962dfec#file-gistfile1-py
>>
>> return 283 Elements
>>
>> but uncomment spatial filter request.setFilterRect( rect ) return only
>> 10 records
>>
>> seems that the mutual exclusivity is coded here
>> http://qgis.org/api/qgsvectorlayerfeatureiterator_8cpp_source.html#l00126
>>
>> and mFilter in QgsFeatureRequest is NOT managed in OR during setting
>> in http://qgis.org/api/qgsfeaturerequest_8cpp_source.html
>>
>> it's a bug or a feature or not implemented or my fault in using filtering?
>>
>> regards, Luigi Pirelli

From wonder.sk at gmail.com  Sun Dec 21 05:41:06 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 21 Dec 2014 20:41:06 +0700
Subject: [Qgis-developer] QgsFeatureRerquest filters are mutually
 exclusive? why?
In-Reply-To: <CAFO80_o5Dt5cLfdOVj4kjNJ7KWd1ANO1umdPno3Jn7P1Xeo31Q@mail.gmail.com>
References: <CAFO80_o5Dt5cLfdOVj4kjNJ7KWd1ANO1umdPno3Jn7P1Xeo31Q@mail.gmail.com>
Message-ID: <CAC2XbFcnUK9U-5SBbYBiBdeZ+3wjKMQMykBR7G-ubhYrVoubnA@mail.gmail.com>

Hi Luigi

On Sat, Dec 20, 2014 at 5:57 PM, Luigi Pirelli <luipir at gmail.com> wrote:
>
> Hi,
>
> I realised that some filter in QgsFeatureRequest are mutually exclusive
> [...]
> it's a bug or a feature or not implemented or my fault in using filtering?
>

It is not a bug - and neither a feature. It is simply a limitation from the
design. Originally feature request supported: 1. no filter, 2. filter by
rect, 3. filter by fid. Those options were used in mutually exclusive way
so there was no reason to make the code more complex and allow their
combinations. Now with more filtering options this would be useful - maybe
in the future someone will find time and implement support for multiple
filters at once....

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/e324fc53/attachment.html>

From wonder.sk at gmail.com  Sun Dec 21 05:46:01 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 21 Dec 2014 20:46:01 +0700
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141219155843.GB27216@localhost>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
	<20141218173726.GC27408@localhost>
	<CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>
	<20141219093434.GE5983@localhost>
	<20141219115511.GD10200@localhost>
	<20141219155843.GB27216@localhost>
Message-ID: <CAC2XbFd0+FaUBa+OW9CpHYg-==xLLB+9dOvpYngPTpmogWCoeA@mail.gmail.com>

On Fri, Dec 19, 2014 at 10:58 PM, Sandro Santilli <strk at keybit.net> wrote:
>
>
> Confirmed. I've added a QTreeView and it has the same issue.
> Unfortunately, the model tester did not catch any issue, beside the
> already-reported one which I fixed in master already.
>

AFAIK model tester is not meant to discover this kind of issues. It is
mainly used to confirm that model implements the virtual methods like
index(), parent() according to the expectations of views. Your problem just
seems to be related to a missing dataChanged() signal when there should be
one...

Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/09556b7a/attachment.html>

From wonder.sk at gmail.com  Sun Dec 21 05:49:53 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 21 Dec 2014 20:49:53 +0700
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141219115511.GD10200@localhost>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
	<20141218173726.GC27408@localhost>
	<CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>
	<20141219093434.GE5983@localhost>
	<20141219115511.GD10200@localhost>
Message-ID: <CAC2XbFeu2ceN1zB4J_ekFG2Cduoh8wuRX-rCfJWc0gLf=5-jTw@mail.gmail.com>

On Fri, Dec 19, 2014 at 6:55 PM, Sandro Santilli <strk at keybit.net> wrote:
>
>
>   Qt::ItemFlags flags = model->flags( QModelIndex() );
>   Q_ASSERT( flags == Qt::ItemIsDropEnabled || flags == 0 );
>
> The test checks that the flag for an invalid index can only
> be 0 or Qt::ItemIsDropEnabled. Instead QgsLayerTreeModel includes
> ItemIsSelectable and ItemIsEnabled in the flags:
>
>   if ( !index.isValid() )
>   {
>     Qt::ItemFlags rootFlags = Qt::ItemIsEnabled | Qt::ItemIsSelectable;
>     if ( testFlag( AllowNodeReorder ) )
>       rootFlags |= Qt::ItemIsDropEnabled;
>     return rootFlags;
>   }
>
> What's the rationale for adding those two flags ?
> I've tested that initializing ti to 0 and adding the dropEnabled
> based on AllowNodeReorder passes the test.


I don't think there was any particular reason for that - just an omission I
would say (adding those flags for invalid index obviously does not make any
harm besides not being 100% correct).

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/23deeca8/attachment.html>

From wonder.sk at gmail.com  Sun Dec 21 05:55:08 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 21 Dec 2014 20:55:08 +0700
Subject: [Qgis-developer] Moving a layer with PyQGIS using the new layer
	tree
In-Reply-To: <CANaz7myrMakFNquLBKBODrr23Hf-LEJU-V3=Yw_O1_gWPYfwsg@mail.gmail.com>
References: <CANaz7mx-9siACA=K4LSPnVqx9K=NCrYFFoz5e6Ge0XqfQVTMzQ@mail.gmail.com>
	<CAFO80_rc7yTE4wAMd4Eg1Xxi7xZ5GWNzHDprRuyWPq3ERTUaUA@mail.gmail.com>
	<CANaz7myrMakFNquLBKBODrr23Hf-LEJU-V3=Yw_O1_gWPYfwsg@mail.gmail.com>
Message-ID: <CAC2XbFcPEJ1hbNo_dfoYfpuby8cWrK21KbMWT5qA-Bibc=m9hA@mail.gmail.com>

Hi

On Thu, Dec 18, 2014 at 9:50 PM, Germ?n Carrillo <carrillo.german at gmail.com>
wrote:
>
> Thank you Luigi.
>
> So, I guess the following code would be enough to make the example given
> in [1] much more generic:
>
> #######
> cloned_group1 = node_group1.clone()
> root.insertChildNode(0, cloned_group1)
>
> parent = node_group1.parent()                   # new code
>
> parent.removeChildNode(node_group1)     # replace root by parent
> #######
>

 Luigi is right - you need to call removeChildNode() on the parent node.
When I will find some time I will add a note to the example.

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/7d77ba29/attachment.html>

From wonder.sk at gmail.com  Sun Dec 21 06:10:43 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 21 Dec 2014 21:10:43 +0700
Subject: [Qgis-developer] transparency for all raster in the group
In-Reply-To: <CA+Ei1Od5YjSRSfHkXA3tzqa8XWxXehyOu5TjDLp4i0KJfKXs3A@mail.gmail.com>
References: <CA+Ei1Od5YjSRSfHkXA3tzqa8XWxXehyOu5TjDLp4i0KJfKXs3A@mail.gmail.com>
Message-ID: <CAC2XbFfEyRSuQL8B4StJF3kbKuFMLMfLdwvw2woTe6uf9Pvjug@mail.gmail.com>

Hi Martin

On Thu, Dec 18, 2014 at 3:35 AM, Martin Landa <landa.martin at gmail.com>
wrote:
>
>
> is it possible in QGIS to change transparency for all rasters in the
> group? Or is there any plugin for that?


Not sure if there is any plugin for that - but the code to do it is simple
(in QGIS >= 2.4).

Assuming your group is the first item in the layer tree:

root = QgsProject.instance().layerTreeRoot()
group = root.children()[0]

for ch in group.children():
  if isinstance(ch, QgsLayerTreeLayer) and isinstance(ch.layer(),
QgsRasterLayer):
    ch.layer().pipe().renderer().setOpacity(0.3)

(opacity should be in range 0-1)

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/0d461c7d/attachment.html>

From wonder.sk at gmail.com  Sun Dec 21 06:12:49 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 21 Dec 2014 21:12:49 +0700
Subject: [Qgis-developer] Can qgis be started with python disabled ?
In-Reply-To: <20141216183011.GA19404@localhost>
References: <20141216183011.GA19404@localhost>
Message-ID: <CAC2XbFe---d+0m5R+G5kCbhpfuGdVUQ64EdnKj+thdysRvn98A@mail.gmail.com>

On Wed, Dec 17, 2014 at 1:30 AM, Sandro Santilli <strk at keybit.net> wrote:
>
> Can I start qgis with no python support even if it is compiled in ?
> I'd use it to reduce load while running under valgrind...
>
> To the same extent, can it be started with no plugins from an environment
> variable or similar?
>

A bit more hard-core, but you can e.g. rename libqgispython.so to something
else - it is loaded on demand and if the load fails QGIS will just run
without python.

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/5fc70a2b/attachment.html>

From wonder.sk at gmail.com  Sun Dec 21 06:16:27 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 21 Dec 2014 21:16:27 +0700
Subject: [Qgis-developer] QgsRasterLayer legend interface,
	where is it gone ?
In-Reply-To: <20141216110159.GA14977@localhost>
References: <20141216110159.GA14977@localhost>
Message-ID: <CAC2XbFcMC0OSh7D=j0WbF4dnQ5gxV+mdyaN9cGNoQU7Q5a_S9w@mail.gmail.com>

On Tue, Dec 16, 2014 at 6:01 PM, Sandro Santilli <strk at keybit.net> wrote:
>
> According to documentation for the QgsRasterLayer class [1], a raster
> layer can export its legend as a pixmap using a legendPixmap() method,
> but the code doesn't not contain any such virtual method.
>
> [1] http://qgis.org/api/classQgsRasterLayer.html
>
> Instead, the class has a (non-virtual) method to retrieve a legend
> in form of a list of name/color pairs.
>
> A pure image legend is not accounted for in the raster interface
> anymore.  Still, beside the documentation, there's also a LegendUrl
> property under the "Metadata" tab of raster layer properties, which
> does not seem to be used at all either.
>

Looks like an ancient artifact in the API documentation. I would guess such
method was removed even before QGIS 1.0)


Is there a plan to allow raster layers to expose their layer again
> as an image ?
>

No. If someone wants legend image for a layer (or more of them), there is
now QgsLegendRenderer class for rendering it.

Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/7f654408/attachment-0001.html>

From wonder.sk at gmail.com  Sun Dec 21 06:36:50 2014
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 21 Dec 2014 21:36:50 +0700
Subject: [Qgis-developer] Qgis-developer] Rendering cache and labeling
In-Reply-To: <CACfnYnSKUfTCAW1tdL-KnDE1a0FTBc5esDQkEyu5mbSMNm909A@mail.gmail.com>
References: <CACfnYnSKUfTCAW1tdL-KnDE1a0FTBc5esDQkEyu5mbSMNm909A@mail.gmail.com>
Message-ID: <CAC2XbFe962pqQD8TR=hnwgL-tnD5snDvpz6J+nPthkHiwE5EVQ@mail.gmail.com>

Hi Giovanni

On Fri, Dec 19, 2014 at 5:50 PM, Giovanni Manghi <giovanni.manghi at gmail.com>
wrote:
>
> >
> > Also think about this case: there is one layer with labeling, it gets
> > cached. Then user adds another layer with labels - it is necessary to
> > recalculate the labeling again as the new layer may require some existing
> > labels to be hidden or moved to a different position to fit labels from
> the
> > new layer. Hopefully that makes sense :-)
>
>
> is this the explanation for this?
>
> http://hub.qgis.org/issues/10441


Indeed - that's the explanation for it.

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/e8d5f0c9/attachment.html>

From carrillo.german at gmail.com  Sun Dec 21 08:31:33 2014
From: carrillo.german at gmail.com (=?ISO-8859-1?Q?Germ=E1n_Carrillo?=)
Date: Sun, 21 Dec 2014 11:31:33 -0500
Subject: [Qgis-developer] Moving a layer with PyQGIS using the new layer
	tree
In-Reply-To: <CAC2XbFcPEJ1hbNo_dfoYfpuby8cWrK21KbMWT5qA-Bibc=m9hA@mail.gmail.com>
References: <CANaz7mx-9siACA=K4LSPnVqx9K=NCrYFFoz5e6Ge0XqfQVTMzQ@mail.gmail.com>
	<CAFO80_rc7yTE4wAMd4Eg1Xxi7xZ5GWNzHDprRuyWPq3ERTUaUA@mail.gmail.com>
	<CANaz7myrMakFNquLBKBODrr23Hf-LEJU-V3=Yw_O1_gWPYfwsg@mail.gmail.com>
	<CAC2XbFcPEJ1hbNo_dfoYfpuby8cWrK21KbMWT5qA-Bibc=m9hA@mail.gmail.com>
Message-ID: <CANaz7mxDU0M3FeSvyLSV4eEtjyB+5uJdP51H1JsYgZwwjm=XJA@mail.gmail.com>

Nobody said he wasn't :)

Please also modify the last Python line in the "Removing nodes" section
from [1].

Instead of:

QgsMapLayerRegistry.instance().addMapLayer(layer1)

It should be:

QgsMapLayerRegistry.instance().removeMapLayers([layer1.id()])


Thanks for your work!

Regards,

Germ?n
---
[1]
http://www.lutraconsulting.co.uk/blog/2014/07/25/qgis-layer-tree-api-part-2/

2014-12-21 8:55 GMT-05:00 Martin Dobias <wonder.sk at gmail.com>:

> Hi
>
> On Thu, Dec 18, 2014 at 9:50 PM, Germ?n Carrillo <
> carrillo.german at gmail.com> wrote:
>>
>> Thank you Luigi.
>>
>> So, I guess the following code would be enough to make the example given
>> in [1] much more generic:
>>
>> #######
>> cloned_group1 = node_group1.clone()
>> root.insertChildNode(0, cloned_group1)
>>
>> parent = node_group1.parent()                   # new code
>>
>> parent.removeChildNode(node_group1)     # replace root by parent
>> #######
>>
>
>  Luigi is right - you need to call removeChildNode() on the parent node.
> When I will find some time I will add a note to the example.
>
> Cheers
> Martin
>
>


-- 
-----------
   |\__
(:>__)(
   |/

Soluciones Geoinform?ticas Libres
http://geotux.tuxfamily.org/
http://twitter.com/GeoTux2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/2939e32f/attachment.html>

From luipir at gmail.com  Sun Dec 21 11:20:19 2014
From: luipir at gmail.com (Luigi Pirelli)
Date: Sun, 21 Dec 2014 20:20:19 +0100
Subject: [Qgis-developer] QgsFeatureRerquest filters are mutually
 exclusive? why?
In-Reply-To: <CAC2XbFcnUK9U-5SBbYBiBdeZ+3wjKMQMykBR7G-ubhYrVoubnA@mail.gmail.com>
References: <CAFO80_o5Dt5cLfdOVj4kjNJ7KWd1ANO1umdPno3Jn7P1Xeo31Q@mail.gmail.com>
	<CAC2XbFcnUK9U-5SBbYBiBdeZ+3wjKMQMykBR7G-ubhYrVoubnA@mail.gmail.com>
Message-ID: <CAFO80_ou8Q-bO5P=7RGis0nxj7nmzDe9CNVh+eQUFDD-8QoTfg@mail.gmail.com>

thanks, Martin

regards, Luigi Pirelli

On 21 December 2014 at 14:41, Martin Dobias <wonder.sk at gmail.com> wrote:
> Hi Luigi
>
> On Sat, Dec 20, 2014 at 5:57 PM, Luigi Pirelli <luipir at gmail.com> wrote:
>>
>> Hi,
>>
>> I realised that some filter in QgsFeatureRequest are mutually exclusive
>> [...]
>> it's a bug or a feature or not implemented or my fault in using filtering?
>
>
> It is not a bug - and neither a feature. It is simply a limitation from the
> design. Originally feature request supported: 1. no filter, 2. filter by
> rect, 3. filter by fid. Those options were used in mutually exclusive way so
> there was no reason to make the code more complex and allow their
> combinations. Now with more filtering options this would be useful - maybe
> in the future someone will find time and implement support for multiple
> filters at once....
>
> Cheers
> Martin
>

From geodrinx at gmail.com  Sun Dec 21 14:33:27 2014
From: geodrinx at gmail.com (Geo DrinX)
Date: Sun, 21 Dec 2014 23:33:27 +0100
Subject: [Qgis-developer] Can qgis be started with python disabled ?
In-Reply-To: <CAC2XbFe---d+0m5R+G5kCbhpfuGdVUQ64EdnKj+thdysRvn98A@mail.gmail.com>
References: <20141216183011.GA19404@localhost>
	<CAC2XbFe---d+0m5R+G5kCbhpfuGdVUQ64EdnKj+thdysRvn98A@mail.gmail.com>
Message-ID: <CAFF9ZhvB=JRzibPKDitKynSEE9a_r2NV5wDbpzk0v+avmxqM2g@mail.gmail.com>

2014-12-21 15:12 GMT+01:00 Martin Dobias <wonder.sk at gmail.com>:

>
> On Wed, Dec 17, 2014 at 1:30 AM, Sandro Santilli <strk at keybit.net> wrote:
>>
>> Can I start qgis with no python support even if it is compiled in ?
>> I'd use it to reduce load while running under valgrind...
>>
>> To the same extent, can it be started with no plugins from an environment
>> variable or similar?
>>
>
> A bit more hard-core, but you can e.g. rename libqgispython.so to
> something else - it is loaded on demand and if the load fails QGIS will
> just run without python.
>
>
Good info.   So we can use it to discover finally if plugins are
responsible of QGIS 2.6 crashes.

:)

Thank you

Roberto




> Cheers
> Martin
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/066b63d5/attachment.html>

From madmanwoo at gmail.com  Sun Dec 21 14:45:40 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Sun, 21 Dec 2014 22:45:40 +0000
Subject: [Qgis-developer] 500 login into plugins
Message-ID: <CAAi8Yg8z77H+Fm3vSP2XhH4tmQfgNAi7g_vKba0sYEY8PP8kHg@mail.gmail.com>

Hey all,

Can anyone else confirm they are getting a 500 when logging into the
;plugins site?

- Nathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/9174f0e5/attachment.html>

From gsherman at geoapt.com  Sun Dec 21 14:55:25 2014
From: gsherman at geoapt.com (Gary Sherman)
Date: Sun, 21 Dec 2014 13:55:25 -0900
Subject: [Qgis-developer] 500 login into plugins
In-Reply-To: <CAAi8Yg8z77H+Fm3vSP2XhH4tmQfgNAi7g_vKba0sYEY8PP8kHg@mail.gmail.com>
References: <CAAi8Yg8z77H+Fm3vSP2XhH4tmQfgNAi7g_vKba0sYEY8PP8kHg@mail.gmail.com>
Message-ID: <54974FDD.5010108@geoapt.com>


On 12/21/14 1:45 PM, Nathan Woodrow wrote:
> Hey all,
>
> Can anyone else confirm they are getting a 500 when logging into the 
> ;plugins site?
>

Works for me...

-gary

> - Nathan
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Gary Sherman

Founder, QGIS Project
Consulting: geoapt.com
Publishing: locatepress.com

We work virtually anywhere
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/c1872086/attachment.html>

From mikhailtchernychev at gmail.com  Sun Dec 21 18:26:31 2014
From: mikhailtchernychev at gmail.com (Mikhail Tchernychev)
Date: Sun, 21 Dec 2014 18:26:31 -0800
Subject: [Qgis-developer] 500 login into plugins
In-Reply-To: <54974FDD.5010108@geoapt.com>
References: <CAAi8Yg8z77H+Fm3vSP2XhH4tmQfgNAi7g_vKba0sYEY8PP8kHg@mail.gmail.com>
	<54974FDD.5010108@geoapt.com>
Message-ID: <54978157.5010006@mail.geometrics.com>

Yes, I got it this morning too, but then it worked.

Mikhail

On 12/21/2014 02:55 PM, Gary Sherman wrote:
>
> On 12/21/14 1:45 PM, Nathan Woodrow wrote:
>> Hey all,
>>
>> Can anyone else confirm they are getting a 500 when logging into the 
>> ;plugins site?
>>
>
> Works for me...
>
> -gary
>
>> - Nathan
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> -- 
> =-=-=-=-=-=-=-=-=-=-=-=-=-=-=
> Gary Sherman
>
> Founder, QGIS Project
> Consulting: geoapt.com
> Publishing: locatepress.com
>
> We work virtually anywhere
> =-=-=-=-=-=-=-=-=-=-=-=-=-=-=
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141221/5e9abe2b/attachment.html>

From p-l.auclair at velourbain.qc.ca  Sun Dec 21 20:09:31 2014
From: p-l.auclair at velourbain.qc.ca (Pierre-Luc Auclair)
Date: Sun, 21 Dec 2014 23:09:31 -0500
Subject: [Qgis-developer] Taking over Space syntax analysis plugin
Message-ID: <1A31F1BE-BAE1-4578-A8AD-DE4A2574BF23@velourbain.qc.ca>

Hi Alessandro,

Nathan W asked me to write to you (and CC dev list) regarding taking over development of the Space syntax analysis plugin which is currently abandoned (I tried to contact the original owner a few times in the last months, but got no answer). Nathan tried to change the owner yesterday but apparently ran into problems (error500 on the platform). My user name is ? plauclair ?.

Thanks for your help,

Pierre-Luc

From lfi at ign.ku.dk  Sun Dec 21 23:14:25 2014
From: lfi at ign.ku.dk (Lene Fischer)
Date: Mon, 22 Dec 2014 07:14:25 +0000
Subject: [Qgis-developer] Various issues
In-Reply-To: <CACfnYnQR1Za_t6DKEU+RTUBR+LSwoo51Pod2mZPSz_ksuux2ug@mail.gmail.com>
References: <CACfnYnQR1Za_t6DKEU+RTUBR+LSwoo51Pod2mZPSz_ksuux2ug@mail.gmail.com>
Message-ID: <38497AD9CA059C42AA3451EFEFF0378E9DCA8EB8@P1KITMBX03WC02.unicph.domain>

Hi,

I have just found the same error.

Starting to show my students the difference between calculating an area with planimetric /ellipsoide difference.

We use EPSG 25832  (UTM32 N EUREF 89)

In the Project properties the Measure tool are set to CRS  ON  and Ellipsoide None /Planimetric ??? Strange when I have choosen a CRS with an Ellipsoide

Then I change the Ellipsoide to WGS84 - Click on CRS - and sometimes it is set back to None or Clark 1866.



When I try to calculate an area - without any changes in the None /Planimetric - and secondly change the ellipsoide to WGS84 and recalculate - the area gets smaller!!!!!!!



There is a Bug report #11713 on the same issue from November - still open set to normal....This must be a blocker

Regards

Lene Fischer
Associate Professor

Department of Geosciences and Natural Resource Management
University of Copenhagen

MOB +45 40115084
lfi at ign.ku.dk<mailto:lfi at ign.ku.dk>


[SCIENCE_bomaerke_UK]


 -----Oprindelig meddelelse-----
Fra: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] P? vegne af Giovanni Manghi
Sendt: 18. december 2014 11:15
Til: qgis-developer at lists.osgeo.org
Emne: Re: [Qgis-developer] Various issues



> * reprojecting a metric projection to 4326, choosing an ellipsoid and

> a measurement unit in Project properties is not permanent (reopening

> the dialog displays none/planimetric and degrees even if wg84 and

> meters were selected beforehand)







it is messy as already said by Alexander, and that ticket should be reopened.



sometimes seems to follow a pattern like:



If you open the project properties from the menus the ellipsoid changes, but not the canvas units.



If you open the project properties from the bottom right icon/shortcut the ellipsoid does not change, but units do.



other times it seems it just messes up everything regardless of what you have choosen and how you open the project properties.



This to me is a major issue because the user never knows how reliable are the measurements being done (with the field calculator) and if numbers can be compared with the ones computed previously.







> * with the same reprojection, Decoration > Scalebar shows 1 meter

> instead of 1 degree





cannot confirm here, it shows degrees













> * when using curved labels with a background, a separate background

> (e.g. a rectangle) is drawn for each character, with rather ugly

> results





for better results

the "size type" of the background must be set to "fixed" (and then give it the proper size).

_______________________________________________

Qgis-developer mailing list

Qgis-developer at lists.osgeo.org<mailto:Qgis-developer at lists.osgeo.org>

http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141222/41e4821d/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 5594 bytes
Desc: image003.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141222/41e4821d/attachment-0001.jpg>

From matthias.kuhn at gmx.ch  Sun Dec 21 23:43:58 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Mon, 22 Dec 2014 08:43:58 +0100
Subject: [Qgis-developer] QgsFeatureRerquest filters are mutually
 exclusive? why?
In-Reply-To: <CAFO80_ou8Q-bO5P=7RGis0nxj7nmzDe9CNVh+eQUFDD-8QoTfg@mail.gmail.com>
References: <CAFO80_o5Dt5cLfdOVj4kjNJ7KWd1ANO1umdPno3Jn7P1Xeo31Q@mail.gmail.com>
	<CAC2XbFcnUK9U-5SBbYBiBdeZ+3wjKMQMykBR7G-ubhYrVoubnA@mail.gmail.com>
	<CAFO80_ou8Q-bO5P=7RGis0nxj7nmzDe9CNVh+eQUFDD-8QoTfg@mail.gmail.com>
Message-ID: <5497CBBE.3020408@gmx.ch>

you may already currently filter with the help of a QgsExpression which
lets you combine different filters/where-clauses in the desired way.
That works for some situations but has some limitations (e.g. filtering
cannot be done server-side yet, while setting other filters like rect or
fid are often evaluated server-side).

Matthias

On 21.12.2014 20:20, Luigi Pirelli wrote:
> thanks, Martin
>
> regards, Luigi Pirelli
>
> On 21 December 2014 at 14:41, Martin Dobias <wonder.sk at gmail.com> wrote:
>> Hi Luigi
>>
>> On Sat, Dec 20, 2014 at 5:57 PM, Luigi Pirelli <luipir at gmail.com> wrote:
>>> Hi,
>>>
>>> I realised that some filter in QgsFeatureRequest are mutually exclusive
>>> [...]
>>> it's a bug or a feature or not implemented or my fault in using filtering?
>>
>> It is not a bug - and neither a feature. It is simply a limitation from the
>> design. Originally feature request supported: 1. no filter, 2. filter by
>> rect, 3. filter by fid. Those options were used in mutually exclusive way so
>> there was no reason to make the code more complex and allow their
>> combinations. Now with more filtering options this would be useful - maybe
>> in the future someone will find time and implement support for multiple
>> filters at once....
>>
>> Cheers
>> Martin
>>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From apasotti at gmail.com  Mon Dec 22 00:11:52 2014
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 22 Dec 2014 09:11:52 +0100
Subject: [Qgis-developer] Taking over Space syntax analysis plugin
In-Reply-To: <1A31F1BE-BAE1-4578-A8AD-DE4A2574BF23@velourbain.qc.ca>
References: <1A31F1BE-BAE1-4578-A8AD-DE4A2574BF23@velourbain.qc.ca>
Message-ID: <CAL5Q673R89oboOY8ucfxOyZO5q5mVn17Vs6OgbREBoGn4jc=Ww@mail.gmail.com>

2014-12-22 5:09 GMT+01:00 Pierre-Luc Auclair <p-l.auclair at velourbain.qc.ca>:
> Hi Alessandro,
>
> Nathan W asked me to write to you (and CC dev list) regarding taking over development of the Space syntax analysis plugin which is currently abandoned (I tried to contact the original owner a few times in the last months, but got no answer). Nathan tried to change the owner yesterday but apparently ran into problems (error500 on the platform). My user name is ? plauclair ?.
>
> Thanks for your help,
>
> Pierre-Luc

Hello Pierre-Luc,

It was probably a temporary issue, since when we moved to docker they
are happening quite often.

You are now an "owner" of that plugin.

Best regards

-- 
Alessandro Pasotti
w3:   www.itopen.it

From strk at keybit.net  Mon Dec 22 03:02:14 2014
From: strk at keybit.net ('Sandro Santilli')
Date: Mon, 22 Dec 2014 12:02:14 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
Message-ID: <20141222110214.GB5320@localhost>

On Mon, Dec 22, 2014 at 09:07:32AM +0000, Ziegler Stefan wrote:

> The jumping is gone when there is no rotation.

Thanks for testing. Martin merged the fix into master.

> But it has some strange behaviour when drawing the zooming rectangle
> with a rotated map (see attached image).

Known (by me) issue. I thought I also filed a ticket for this but could
not find it now, can you do that yourself ? Please add the "rotation"
tag in the report.

Generally speaking, there are many places that need to learn about core
rotation. Searching the tracker for issues with "rotation" tag is a good
starting point.

I've only had enough fundings to add the core support. I'll work on fixing
any regression in absence of rotation (like the "jumping" one) but will not
approach further enhancements until I either have some spare time or find 
more sponsors.

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

From madmanwoo at gmail.com  Mon Dec 22 03:09:06 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Mon, 22 Dec 2014 11:09:06 +0000
Subject: [Qgis-developer] Ugly jumping maps while zooming
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
Message-ID: <CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>

Sandro,

Am I reading this as you are not doing any more rotation work? Are you
planning on fixing the bugs opened against the feature?

On Mon, 22 Dec 2014 9:02 pm Sandro Santilli <strk at keybit.net> wrote:

> On Mon, Dec 22, 2014 at 09:07:32AM +0000, Ziegler Stefan wrote:
>
> > The jumping is gone when there is no rotation.
>
> Thanks for testing. Martin merged the fix into master.
>
> > But it has some strange behaviour when drawing the zooming rectangle
> > with a rotated map (see attached image).
>
> Known (by me) issue. I thought I also filed a ticket for this but could
> not find it now, can you do that yourself ? Please add the "rotation"
> tag in the report.
>
> Generally speaking, there are many places that need to learn about core
> rotation. Searching the tracker for issues with "rotation" tag is a good
> starting point.
>
> I've only had enough fundings to add the core support. I'll work on fixing
> any regression in absence of rotation (like the "jumping" one) but will not
> approach further enhancements until I either have some spare time or find
> more sponsors.
>
> --strk;
>
>   ()   Free GIS & Flash consultant/developer
>   /\   http://strk.keybit.net/services.html
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141222/c63e2c99/attachment.html>

From strk at keybit.net  Mon Dec 22 03:37:46 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 22 Dec 2014 12:37:46 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
Message-ID: <20141222113746.GA16687@localhost>

On Mon, Dec 22, 2014 at 11:09:06AM +0000, Nathan Woodrow wrote:

> Am I reading this as you are not doing any more rotation work?

Right now I'm doing work on contextual WMS legend, which is funded.
Will get back to rotation later. Probably first or second week of January.

> Are you planning on fixing the bugs opened against the feature?

I plan to make a call for funding to work on those bugs, but need to
find the time for that too. Maybe during christmas holidays.

If the feature is not ready for feature freeze, it could maybe just be
hidden from the GUI as suggested in http://hub.qgis.org/issues/11829

--strk;

> On Mon, 22 Dec 2014 9:02 pm Sandro Santilli <strk at keybit.net> wrote:
> 
> > On Mon, Dec 22, 2014 at 09:07:32AM +0000, Ziegler Stefan wrote:
> >
> > > The jumping is gone when there is no rotation.
> >
> > Thanks for testing. Martin merged the fix into master.
> >
> > > But it has some strange behaviour when drawing the zooming rectangle
> > > with a rotated map (see attached image).
> >
> > Known (by me) issue. I thought I also filed a ticket for this but could
> > not find it now, can you do that yourself ? Please add the "rotation"
> > tag in the report.
> >
> > Generally speaking, there are many places that need to learn about core
> > rotation. Searching the tracker for issues with "rotation" tag is a good
> > starting point.
> >
> > I've only had enough fundings to add the core support. I'll work on fixing
> > any regression in absence of rotation (like the "jumping" one) but will not
> > approach further enhancements until I either have some spare time or find
> > more sponsors.
> >
> > --strk;
> >
> >   ()   Free GIS & Flash consultant/developer
> >   /\   http://strk.keybit.net/services.html
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >

> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

From nirvn.asia at gmail.com  Mon Dec 22 04:14:26 2014
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Mon, 22 Dec 2014 19:14:26 +0700
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <20141222110214.GB5320@localhost>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
Message-ID: <CAC_qv=o4E8Xvap38iZZkhpVPXOpqKMfhhcmAn-1PY3E86_1Mww@mail.gmail.com>

Thanks for fixing the jumping issue for non-rotated canvas.

That said, I'm wondering whether the rotation feature should be exposed in
the status bar unless all of the basic canvas interactions are "taught" how
to deal with rotation (which inc. flawless zoom / pan experience and
probably  north arrow decoration as it really doesn't look good for qgis to
have rotated map with a broken north arrow).

Maybe if you believe you can't commit more time n energy on this for 2.8,
the status bar item can be moved to project settings? I'm a fan of the
feature, so hoping it'll stay n improve.

M
On Mon, Dec 22, 2014 at 09:07:32AM +0000, Ziegler Stefan wrote:

> The jumping is gone when there is no rotation.

Thanks for testing. Martin merged the fix into master.

> But it has some strange behaviour when drawing the zooming rectangle
> with a rotated map (see attached image).

Known (by me) issue. I thought I also filed a ticket for this but could
not find it now, can you do that yourself ? Please add the "rotation"
tag in the report.

Generally speaking, there are many places that need to learn about core
rotation. Searching the tracker for issues with "rotation" tag is a good
starting point.

I've only had enough fundings to add the core support. I'll work on fixing
any regression in absence of rotation (like the "jumping" one) but will not
approach further enhancements until I either have some spare time or find
more sponsors.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html
_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141222/5626a982/attachment.html>

From rdmailings at duif.net  Mon Dec 22 05:18:05 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 22 Dec 2014 14:18:05 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <20141222113746.GA16687@localhost>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>	<548EECA4.4010009@gmx.ch>
	<20141215145824.GA7896@localhost>	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>	<20141215150514.GB7896@localhost>	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>	<20141222110214.GB5320@localhost>	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost>
Message-ID: <54981A0D.9000704@duif.net>

On 22-12-14 12:37, Sandro Santilli wrote:
> On Mon, Dec 22, 2014 at 11:09:06AM +0000, Nathan Woodrow wrote:
> 
>> Am I reading this as you are not doing any more rotation work?
> 
> Right now I'm doing work on contextual WMS legend, which is funded.
> Will get back to rotation later. Probably first or second week of January.
> 
>> Are you planning on fixing the bugs opened against the feature?
> 
> I plan to make a call for funding to work on those bugs, but need to
> find the time for that too. Maybe during christmas holidays.
> 
> If the feature is not ready for feature freeze, it could maybe just be
> hidden from the GUI as suggested in http://hub.qgis.org/issues/11829

Hi Sandro,

are you sure 'hiding' will be enough for a stable ('LTS'(?)) QGIS version?

from the remarks and questions here on the list I get the feeling that
there is some more work/discussion to do ( besides the little gui
glitches already mentioned, also bigger issues need more thorough
discussion: for example the composer and the openlayers plugin
consequences ).

while I appreciate the functionality, AND the benefits of some
side-effects of the 'map rotation'-work: eg the fixing of tests, the
discussion about how to keep the state of the map etc, my gut-feeling is
that the actual rotation work has too much consequences on other
code/behaviour.

What do you think?

Regards,

Richard Duivenvoorde


From strk at keybit.net  Mon Dec 22 06:04:17 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 22 Dec 2014 15:04:17 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <54981A0D.9000704@duif.net>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
Message-ID: <20141222140417.GA2732@localhost>

On Mon, Dec 22, 2014 at 02:18:05PM +0100, Richard Duivenvoorde wrote:
> On 22-12-14 12:37, Sandro Santilli wrote:

> > I plan to make a call for funding to work on those bugs, but need to
> > find the time for that too. Maybe during christmas holidays.
> > 
> > If the feature is not ready for feature freeze, it could maybe just be
> > hidden from the GUI as suggested in http://hub.qgis.org/issues/11829
> 
> are you sure 'hiding' will be enough for a stable ('LTS'(?)) QGIS version?
> 
> from the remarks and questions here on the list I get the feeling that
> there is some more work/discussion to do ( besides the little gui
> glitches already mentioned, also bigger issues need more thorough
> discussion: for example the composer and the openlayers plugin
> consequences ).
> 
> while I appreciate the functionality, AND the benefits of some
> side-effects of the 'map rotation'-work: eg the fixing of tests, the
> discussion about how to keep the state of the map etc, my gut-feeling is
> that the actual rotation work has too much consequences on other
> code/behaviour.
> 
> What do you think?

I think that such a big change needs time to be introduced.
And unless anyone comes up with enough fundings to pay the whole development
at once we need a way to allow for an incremental approach. I'm basically
just trying to find a compromise allowing for further development to happen
w/out it being relegated in a PR which would be harder to share among
developers or test on the field.

Having the functionality available, but hidden in a preference, would allow
more consequences to be spotted. I've seen many reports taking place which
took over 2 weeks to be found. These issues would not be found if the code
was not in master for people to play with.

The rotation functionality might be reported as not being complete in
the GUI allowing for enabling it.

Of course I'd prefer having all things working, but I just could not
raise enough funding for everything, and delegating the work done so
far in a PR might make it hard for anyone else (not just me) to find
more to build upon what we have now.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

From strk at keybit.net  Mon Dec 22 06:21:31 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 22 Dec 2014 15:21:31 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <CAC2XbFd0+FaUBa+OW9CpHYg-==xLLB+9dOvpYngPTpmogWCoeA@mail.gmail.com>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
	<20141218173726.GC27408@localhost>
	<CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>
	<20141219093434.GE5983@localhost>
	<20141219115511.GD10200@localhost>
	<20141219155843.GB27216@localhost>
	<CAC2XbFd0+FaUBa+OW9CpHYg-==xLLB+9dOvpYngPTpmogWCoeA@mail.gmail.com>
Message-ID: <20141222142131.GC2732@localhost>

On Sun, Dec 21, 2014 at 08:46:01PM +0700, Martin Dobias wrote:
> On Fri, Dec 19, 2014 at 10:58 PM, Sandro Santilli <strk at keybit.net> wrote:
> >
> >
> > Confirmed. I've added a QTreeView and it has the same issue.
> > Unfortunately, the model tester did not catch any issue, beside the
> > already-reported one which I fixed in master already.
> >
> 
> AFAIK model tester is not meant to discover this kind of issues. It is
> mainly used to confirm that model implements the virtual methods like
> index(), parent() according to the expectations of views. Your problem just
> seems to be related to a missing dataChanged() signal when there should be
> one...

I've actually just got a report from the ModelTester in master, which seems
related to rows insertion notification:

#0  0x00007fdce1855bb9 in __GI_raise (sig=sig at entry=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:56
#1  0x00007fdce1858fc8 in __GI_abort () at abort.c:89
#2  0x000000000057bb47 in qgisCrash (signal=-1) at /usr/src/qgis/qgis-master/src/app/main.cpp:306
#3  0x000000000057bd0a in myMessageOutput (type=QtFatalMsg, msg=0x5b8fd68 "ASSERT: \"QTest::testLogger\" in file qtestlog.cpp, line 266")
    at /usr/src/qgis/qgis-master/src/app/main.cpp:359
#4  0x00007fdce48e7bb1 in qt_message_output(QtMsgType, char const*) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#5  0x00007fdce48e7ff9 in ?? () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#6  0x00007fdce48e8804 in qFatal(char const*, ...) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#7  0x00007fdcdd166ef0 in QTestLog::addFail(char const*, char const*, int) () from /usr/lib/x86_64-linux-gnu/libQtTest.so.4
#8  0x00007fdcdd168170 in QTestResult::addFailure(char const*, char const*, int) () from /usr/lib/x86_64-linux-gnu/libQtTest.so.4
#9  0x00007fdcdd168394 in ?? () from /usr/lib/x86_64-linux-gnu/libQtTest.so.4
#10 0x00007fdcdd168485 in QTestResult::verify(bool, char const*, char const*, char const*, int) () from /usr/lib/x86_64-linux-gnu/libQtTest.so.4
#11 0x00007fdce61c9d0c in ModelTest::rowsInserted (this=0x30574e0, parent=..., start=0, end=0)
    at /usr/src/qgis/qgis-master/tests/qt_modeltest/modeltest.cpp:530
#12 0x00007fdce61d0269 in ModelTest::qt_static_metacall (_o=0x30574e0, _c=QMetaObject::InvokeMetaMethod, _id=11, _a=0x7fff1c3fb4d0)
    at /usr/src/qgis/build/master/src/core/__/__/tests/qt_modeltest/moc_modeltest.cxx:80
#13 0x00007fdce4a0887a in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#14 0x00007fdce4a52664 in QAbstractItemModel::rowsInserted(QModelIndex const&, int, int) () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4
#15 0x00007fdce49ee5ce in QAbstractItemModel::endInsertRows() () from /usr/lib/x86_64-linux-gnu/libQtCore.so.4

The test (modeltest.cpp:530) is about:

    Confirm that what was said was going to happen actually did

A problem with rows (inserted/deleted) seems actually likely in that
as I mentioned the _data_ is really rendered correctly, with proper size,
but the next row is not moved enough to allow for the row with new content
to be shown, like if the view did not know about a row being inserted.

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

From strk at keybit.net  Mon Dec 22 07:14:41 2014
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 22 Dec 2014 16:14:41 +0100
Subject: [Qgis-developer] Need help with LayerTreeModel (legend node)
In-Reply-To: <20141222142131.GC2732@localhost>
References: <20141217121331.GC17837@localhost>
	<20141217143447.GD17837@localhost>
	<20141218124621.GD24598@localhost>
	<20141218173726.GC27408@localhost>
	<CAC2XbFefG9syJjwOq6mjXWn0+r=6rNWweazqZth=yVVbBxBpoQ@mail.gmail.com>
	<20141219093434.GE5983@localhost>
	<20141219115511.GD10200@localhost>
	<20141219155843.GB27216@localhost>
	<CAC2XbFd0+FaUBa+OW9CpHYg-==xLLB+9dOvpYngPTpmogWCoeA@mail.gmail.com>
	<20141222142131.GC2732@localhost>
Message-ID: <20141222151441.GA29626@localhost>

On Mon, Dec 22, 2014 at 03:21:31PM +0100, Sandro Santilli wrote:
> On Sun, Dec 21, 2014 at 08:46:01PM +0700, Martin Dobias wrote:
> > On Fri, Dec 19, 2014 at 10:58 PM, Sandro Santilli <strk at keybit.net> wrote:
> > >
> > >
> > > Confirmed. I've added a QTreeView and it has the same issue.
> > > Unfortunately, the model tester did not catch any issue, beside the
> > > already-reported one which I fixed in master already.
> > >
> > 
> > AFAIK model tester is not meant to discover this kind of issues. It is
> > mainly used to confirm that model implements the virtual methods like
> > index(), parent() according to the expectations of views. Your problem just
> > seems to be related to a missing dataChanged() signal when there should be
> > one...
> 
> I've actually just got a report from the ModelTester in master, which seems
> related to rows insertion notification:

For the record, I filed a ticket about this here:
http://hub.qgis.org/issues/11905

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

From cavallini at faunalia.it  Mon Dec 22 10:10:57 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 22 Dec 2014 19:10:57 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <20141222140417.GA2732@localhost>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost>
Message-ID: <54985EB1.3000304@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.

Il 22/12/2014 15:04, Sandro Santilli ha scritto:

> The rotation functionality might be reported as not being complete
> in the GUI allowing for enabling it.
> 
> Of course I'd prefer having all things working, but I just could
> not raise enough funding for everything, and delegating the work
> done so far in a PR might make it hard for anyone else (not just
> me) to find more to build upon what we have now.

IMHO removing the function will make much more difficult to attract
interest and funding to complete the necessary features. My proposal:
add an option to add the rotation spinbox, deactivated by default, and
clearly marked as experimental/incomplete. In this way, only
interested and conscious people will activate it, if they are ready to
bear the missing parts.
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSYXrEACgkQ/NedwLUzIr62iACffTFHwWi6/vBzRnLPLLGAwXms
x6UAn1ubmi/36Fk6KxMyWysfdjqdXSga
=Jaoy
-----END PGP SIGNATURE-----

From nyall.dawson at gmail.com  Mon Dec 22 14:40:59 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 23 Dec 2014 09:40:59 +1100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <54985EB1.3000304@faunalia.it>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
Message-ID: <CAB28Ash2KOeVAVJJsJR9KX7we75Ggc+giefvws-m5dfOqUC9Zw@mail.gmail.com>

On 23 Dec 2014 5:11 am, "Paolo Cavallini" <cavallini at faunalia.it> wrote:
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hi all.
>
> Il 22/12/2014 15:04, Sandro Santilli ha scritto:
>
> > The rotation functionality might be reported as not being complete
> > in the GUI allowing for enabling it.
> >
> > Of course I'd prefer having all things working, but I just could
> > not raise enough funding for everything, and delegating the work
> > done so far in a PR might make it hard for anyone else (not just
> > me) to find more to build upon what we have now.
>
> IMHO removing the function will make much more difficult to attract
> interest and funding to complete the necessary features. My proposal:
> add an option to add the rotation spinbox, deactivated by default, and
> clearly marked as experimental/incomplete. In this way, only
> interested and conscious people will activate it, if they are ready to
> bear the missing parts.

I disagree - while there may be an issue with the difficulty of getting
wide testing of pull requests, the solution isn't to allow broken code into
master.

We've recently made great progress in showing that we are a serious
enterprise ready alternative, with the introduction of CI testing and the
proposals for LTS releases. We now need to show that we are serious about
the quality of our code and product by not allowing broken or beta features
into releases. Adding a checkbox to unlock such features isn't a good
solution - it just looks amateurish and hacky!

As it stands right now, what is the use of this feature? It can't be used
for presentation (no composer support) nor for analysis or querying use
(broken selection and info tools). Without addressing these issues this
feature has no current use case (I may be missing something here, feel free
to fill me in if I am). Sandro has made it clear that he currently has no
plans for tackling these issues before our next release - meaning either:
1. Our first LTS release will be left with a broken, buggy feature, which
is not a good impression at all for users and sponsors.
Or,
2. Someone else will have to volunteer their time to fix this code before
release.

This is a big decision, as it has the potential to set the precedence for
how QGIS is developed. Do we allow work-in-progress and incomplete features
in master, or should they be left in branches and pull requests until they
are complete and largely bug free?

Personally, I'm strongly in favour of the second option.

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141223/8ef468ee/attachment.html>

From nyall.dawson at gmail.com  Mon Dec 22 14:47:35 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 23 Dec 2014 09:47:35 +1100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <54985EB1.3000304@faunalia.it>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
Message-ID: <CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>

Sorry, gmail messed up my original reply:

On 23 Dec 2014 5:11 am, "Paolo Cavallini" <cavallini at faunalia.it> wrote:
>
> IMHO removing the function will make much more difficult to attract
> interest and funding to complete the necessary features. My proposal:
> add an option to add the rotation spinbox, deactivated by default, and
> clearly marked as experimental/incomplete. In this way, only
> interested and conscious people will activate it, if they are ready to
> bear the missing parts.

I disagree - while there may be an issue with the difficulty of getting
wide testing of pull requests, the solution isn't to allow broken code into
master.

We've recently made great progress in showing that we are a serious
enterprise ready alternative, with the introduction of CI testing and the
proposals for LTS releases. We now need to show that we are serious about
the quality of our code and product by not allowing broken or beta features
into releases. Adding a checkbox to unlock such features isn't a good
solution - it just looks amateurish and hacky!

As it stands right now, what is the use of this feature? It can't be used
for presentation (no composer support) nor for analysis or querying use
(broken selection and info tools). Without addressing these issues this
feature has no current use case (I may be missing something here, feel free
to fill me in if I am). Sandro has made it clear that he currently has no
plans for tackling these issues before our next release - meaning either:
1. Our first LTS release will be left with a broken, buggy feature, which
is not a good impression at all for users and sponsors.
Or,
2. Someone else will have to volunteer their time to fix this code before
release.

This is a big decision, as it has the potential to set the precedence for
how QGIS is developed. Do we allow work-in-progress and incomplete features
in master, or should they be left in branches and pull requests until they
are complete and largely bug free?

Personally, I'm strongly in favour of the second option.

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141223/339e29d4/attachment.html>

From giohappy at gmail.com  Mon Dec 22 14:57:04 2014
From: giohappy at gmail.com (G. Allegri)
Date: Mon, 22 Dec 2014 23:57:04 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
Message-ID: <CAB4g1=z7mbHWa8wTiRAfHMBYhjjLOqCxPR4A9yt4B+r2rsVFGA@mail.gmail.com>

I agree with Nyall. I think putting hidden "proof of concepts" within an
official release doesn't put QGIS in a good light. It could be ok some time
ago, when QGIS was a niche, but not today. If a sponsorship campagin is
required to complete the development we should pursue different marketing
strategies (e.g. blogs, videos showing the upcoming features).

giovanni

2014-12-22 23:47 GMT+01:00 Nyall Dawson <nyall.dawson at gmail.com>:

> Sorry, gmail messed up my original reply:
>
> On 23 Dec 2014 5:11 am, "Paolo Cavallini" <cavallini at faunalia.it> wrote:
> >
> > IMHO removing the function will make much more difficult to attract
> > interest and funding to complete the necessary features. My proposal:
> > add an option to add the rotation spinbox, deactivated by default, and
> > clearly marked as experimental/incomplete. In this way, only
> > interested and conscious people will activate it, if they are ready to
> > bear the missing parts.
>
> I disagree - while there may be an issue with the difficulty of getting
> wide testing of pull requests, the solution isn't to allow broken code into
> master.
>
> We've recently made great progress in showing that we are a serious
> enterprise ready alternative, with the introduction of CI testing and the
> proposals for LTS releases. We now need to show that we are serious about
> the quality of our code and product by not allowing broken or beta features
> into releases. Adding a checkbox to unlock such features isn't a good
> solution - it just looks amateurish and hacky!
>
> As it stands right now, what is the use of this feature? It can't be used
> for presentation (no composer support) nor for analysis or querying use
> (broken selection and info tools). Without addressing these issues this
> feature has no current use case (I may be missing something here, feel free
> to fill me in if I am). Sandro has made it clear that he currently has no
> plans for tackling these issues before our next release - meaning either:
> 1. Our first LTS release will be left with a broken, buggy feature, which
> is not a good impression at all for users and sponsors.
> Or,
> 2. Someone else will have to volunteer their time to fix this code before
> release.
>
> This is a big decision, as it has the potential to set the precedence for
> how QGIS is developed. Do we allow work-in-progress and incomplete features
> in master, or should they be left in branches and pull requests until they
> are complete and largely bug free?
>
> Personally, I'm strongly in favour of the second option.
>
> Nyall
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141222/1ad93b6e/attachment.html>

From madmanwoo at gmail.com  Mon Dec 22 15:31:31 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Mon, 22 Dec 2014 23:31:31 +0000
Subject: [Qgis-developer] Ugly jumping maps while zooming
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
	<CAB4g1=z7mbHWa8wTiRAfHMBYhjjLOqCxPR4A9yt4B+r2rsVFGA@mail.gmail.com>
Message-ID: <CAAi8Yg-MBLtdp+shM2PHzES7etDJor5ZoQKri+iUHSPpSVDzDw@mail.gmail.com>

On Tue Dec 23 2014 at 8:57:26 AM G. Allegri <giohappy at gmail.com> wrote:

> I agree with Nyall. I think putting hidden "proof of concepts" within an
> official release doesn't put QGIS in a good light. It could be ok some time
> ago, when QGIS was a niche, but not today. If a sponsorship campagin is
> required to complete the development we should pursue different marketing
> strategies (e.g. blogs, videos showing the upcoming features).
>
> giovanni
>
> 2014-12-22 23:47 GMT+01:00 Nyall Dawson <nyall.dawson at gmail.com>:
>
>> Sorry, gmail messed up my original reply:
>>
>> On 23 Dec 2014 5:11 am, "Paolo Cavallini" <cavallini at faunalia.it> wrote:
>> >
>> > IMHO removing the function will make much more difficult to attract
>> > interest and funding to complete the necessary features. My proposal:
>> > add an option to add the rotation spinbox, deactivated by default, and
>> > clearly marked as experimental/incomplete. In this way, only
>> > interested and conscious people will activate it, if they are ready to
>> > bear the missing parts.
>>
>> I disagree - while there may be an issue with the difficulty of getting
>> wide testing of pull requests, the solution isn't to allow broken code into
>> master.
>>
>> We've recently made great progress in showing that we are a serious
>> enterprise ready alternative, with the introduction of CI testing and the
>> proposals for LTS releases. We now need to show that we are serious about
>> the quality of our code and product by not allowing broken or beta features
>> into releases. Adding a checkbox to unlock such features isn't a good
>> solution - it just looks amateurish and hacky!
>>
>> As it stands right now, what is the use of this feature? It can't be used
>> for presentation (no composer support) nor for analysis or querying use
>> (broken selection and info tools). Without addressing these issues this
>> feature has no current use case (I may be missing something here, feel free
>> to fill me in if I am). Sandro has made it clear that he currently has no
>> plans for tackling these issues before our next release - meaning either:
>> 1. Our first LTS release will be left with a broken, buggy feature, which
>> is not a good impression at all for users and sponsors.
>> Or,
>> 2. Someone else will have to volunteer their time to fix this code before
>> release.
>>
>> This is a big decision, as it has the potential to set the precedence for
>> how QGIS is developed. Do we allow work-in-progress and incomplete features
>> in master, or should they be left in branches and pull requests until they
>> are complete and largely bug free?
>>
>> Personally, I'm strongly in favour of the second option.
>>
>> Nyall
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
>
> --
> Giovanni Allegri
> http://about.me/giovanniallegri
> Twitter: https://twitter.com/_giohappy_
> blog: http://blog.spaziogis.it
> GEO+ geomatica in Italia http://bit.ly/GEOplus
>  _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141222/bc6e1743/attachment-0001.html>

From madmanwoo at gmail.com  Mon Dec 22 16:00:49 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Tue, 23 Dec 2014 00:00:49 +0000
Subject: [Qgis-developer] Ugly jumping maps while zooming
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
	<CAB4g1=z7mbHWa8wTiRAfHMBYhjjLOqCxPR4A9yt4B+r2rsVFGA@mail.gmail.com>
	<CAAi8Yg-MBLtdp+shM2PHzES7etDJor5ZoQKri+iUHSPpSVDzDw@mail.gmail.com>
Message-ID: <CAAi8Yg_Rb2pYU9KZzsMTzakh0TM_dE8mrZRoHmMFnOsJoKcCPw@mail.gmail.com>

Sorry about that blank email.  Hit ctrl enter really early.

On Tue Dec 23 2014 at 9:31:30 AM Nathan Woodrow <madmanwoo at gmail.com> wrote:

>
>
> On Tue Dec 23 2014 at 8:57:26 AM G. Allegri <giohappy at gmail.com> wrote:
>
>> I agree with Nyall. I think putting hidden "proof of concepts" within an
>> official release doesn't put QGIS in a good light. It could be ok some time
>> ago, when QGIS was a niche, but not today. If a sponsorship campagin is
>> required to complete the development we should pursue different marketing
>> strategies (e.g. blogs, videos showing the upcoming features).
>>
>> giovanni
>>
>> 2014-12-22 23:47 GMT+01:00 Nyall Dawson <nyall.dawson at gmail.com>:
>>
>>> Sorry, gmail messed up my original reply:
>>>
>>> On 23 Dec 2014 5:11 am, "Paolo Cavallini" <cavallini at faunalia.it> wrote:
>>> >
>>> > IMHO removing the function will make much more difficult to attract
>>> > interest and funding to complete the necessary features. My proposal:
>>> > add an option to add the rotation spinbox, deactivated by default, and
>>> > clearly marked as experimental/incomplete. In this way, only
>>> > interested and conscious people will activate it, if they are ready to
>>> > bear the missing parts.
>>>
>>> I disagree - while there may be an issue with the difficulty of getting
>>> wide testing of pull requests, the solution isn't to allow broken code into
>>> master.
>>>
>>> We've recently made great progress in showing that we are a serious
>>> enterprise ready alternative, with the introduction of CI testing and the
>>> proposals for LTS releases. We now need to show that we are serious about
>>> the quality of our code and product by not allowing broken or beta features
>>> into releases. Adding a checkbox to unlock such features isn't a good
>>> solution - it just looks amateurish and hacky!
>>>
>>> As it stands right now, what is the use of this feature? It can't be
>>> used for presentation (no composer support) nor for analysis or querying
>>> use (broken selection and info tools). Without addressing these issues this
>>> feature has no current use case (I may be missing something here, feel free
>>> to fill me in if I am). Sandro has made it clear that he currently has no
>>> plans for tackling these issues before our next release - meaning either:
>>> 1. Our first LTS release will be left with a broken, buggy feature,
>>> which is not a good impression at all for users and sponsors.
>>> Or,
>>> 2. Someone else will have to volunteer their time to fix this code
>>> before release.
>>>
>>> This is a big decision, as it has the potential to set the precedence
>>> for how QGIS is developed. Do we allow work-in-progress and incomplete
>>> features in master, or should they be left in branches and pull requests
>>> until they are complete and largely bug free?
>>>
>>> Personally, I'm strongly in favour of the second option.
>>>
>>> Nyall
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>>
>> --
>> Giovanni Allegri
>> http://about.me/giovanniallegri
>> Twitter: https://twitter.com/_giohappy_
>> blog: http://blog.spaziogis.it
>> GEO+ geomatica in Italia http://bit.ly/GEOplus
>>  _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141223/b37e4c6a/attachment.html>

From a.neumann at carto.net  Mon Dec 22 22:35:16 2014
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 23 Dec 2014 07:35:16 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
Message-ID: <5cb2e6fe8a7822eb1c464c3c960c1ebb@carto.net>

Hi,

I agree with Nyall. We need to be more strict with new features - if 
they break other functionality. That's why we added the testing 
integration. I value the work Sandro has done - but if it can't be 
finished we need to roll it back and develop in a separate branch. There 
are too many side effects - and combined with the fact that there is not 
enough time/funding it seems too risky for me to include it in master.

If we don't stick to a stricter QA and LTS we will loose credibility and 
organizations who already use QGIS in a production environment will run 
into troubles.

Andreas



Am 2014-12-22 23:47, schrieb Nyall Dawson:
> Sorry, gmail messed up my original reply:
> 
> On 23 Dec 2014 5:11 am, "Paolo Cavallini" <cavallini at faunalia.it>
> wrote:
>  >
>  > IMHO removing the function will make much more difficult to attract
>  > interest and funding to complete the necessary features. My
> proposal:
>  > add an option to add the rotation spinbox, deactivated by default,
> and
>  > clearly marked as experimental/incomplete. In this way, only
>  > interested and conscious people will activate it, if they are ready
> to
>  > bear the missing parts.
> 
> I disagree - while there may be an issue with the difficulty of
> getting wide testing of pull requests, the solution isn't to allow
> broken code into master.
> 
> We've recently made great progress in showing that we are a serious
> enterprise ready alternative, with the introduction of CI testing and
> the proposals for LTS releases. We now need to show that we are
> serious about the quality of our code and product by not allowing
> broken or beta features into releases. Adding a checkbox to unlock
> such features isn't a good solution - it just looks amateurish and
> hacky!
> 
> As it stands right now, what is the use of this feature? It can't be
> used for presentation (no composer support) nor for analysis or
> querying use (broken selection and info tools). Without addressing
> these issues this feature has no current use case (I may be missing
> something here, feel free to fill me in if I am). Sandro has made it
> clear that he currently has no plans for tackling these issues before
> our next release - meaning either:
>  1. Our first LTS release will be left with a broken, buggy feature,
> which is not a good impression at all for users and sponsors.
>  Or,
>  2. Someone else will have to volunteer their time to fix this code
> before release.
> 
> This is a big decision, as it has the potential to set the precedence
> for how QGIS is developed. Do we allow work-in-progress and incomplete
> features in master, or should they be left in branches and pull
> requests until they are complete and largely bug free?
> 
> Personally, I'm strongly in favour of the second option.
> 
> Nyall
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Mon Dec 22 23:06:31 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 23 Dec 2014 08:06:31 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>	<548EECA4.4010009@gmx.ch>	<20141215145824.GA7896@localhost>	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>	<20141215150514.GB7896@localhost>	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>	<20141222110214.GB5320@localhost>	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>	<20141222113746.GA16687@localhost>	<54981A0D.9000704@duif.net>	<20141222140417.GA2732@localhost>	<54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
Message-ID: <54991477.1090003@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Nyall,

Il 22/12/2014 23:47, Nyall Dawson ha scritto:

> I disagree - while there may be an issue with the difficulty of getting
> wide testing of pull requests, the solution isn't to allow broken code
> into master.

You're right, we're big boys now, must behave. However:
* the code is in good shape, not broken; works smoothly in a variety of
situations
* it opens a whole set of new and exciting applications, e.g. live
tracking, drone monitoring, etc.
* there are unsupported functions, as pointed out
* if we remove it from master, it will soon become unmergeable, and will
probably get lost; it happened several times in the past that what we
left out of the door was never recovered.
Overall, I still believe keeping it, but letting conscious users
activate it when necessary, is a good compromise.
In the meantime, we can start raising funds to complete the set of
necessary features (I do not think it's a huge amount of work, once the
money is found we have time to implement these for 2.8).
All the best, and thanks for your thoughts.

- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSZFHcACgkQ/NedwLUzIr5FYwCcDkjcK175nE10t/u6yhE1hC1H
XHUAn1pPEvfDIBMwdQYu+GpW9Pk3CbiD
=cSp7
-----END PGP SIGNATURE-----

From strk at keybit.net  Tue Dec 23 01:36:09 2014
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 23 Dec 2014 10:36:09 +0100
Subject: [Qgis-developer] Minimal rotation support (was: Ugly jumping maps
	while zooming)
In-Reply-To: <CAB28Ash2KOeVAVJJsJR9KX7we75Ggc+giefvws-m5dfOqUC9Zw@mail.gmail.com>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Ash2KOeVAVJJsJR9KX7we75Ggc+giefvws-m5dfOqUC9Zw@mail.gmail.com>
Message-ID: <20141223093609.GA4868@localhost>

On Tue, Dec 23, 2014 at 09:40:59AM +1100, Nyall Dawson wrote:

> As it stands right now, what is the use of this feature? It can't be used
> for presentation (no composer support) nor for analysis or querying use
> (broken selection and info tools). Without addressing these issues this
> feature has no current use case (I may be missing something here, feel free
> to fill me in if I am). 

In order to plan for fundraising we need a clear view on what's the
minimal support state for the feature in order to be accepted in the
2.8 release.

I've tried to tag all rotation-related issues with the "rotation" tag
so it's easier to see them (sorry but I don't see the URL with embedded
query from hub to include here). Could you please help adding the missing
tickets (for example I see nothing about composer nor info tool) and
mark those you think are extremely necessary as "blocker" ?

Right now a single one is marked as such, and is about the rotation value
being retained when starting a new project.

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

From rdmailings at duif.net  Tue Dec 23 02:10:06 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 23 Dec 2014 11:10:06 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <54991477.1090003@faunalia.it>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>	<548EECA4.4010009@gmx.ch>	<20141215145824.GA7896@localhost>	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>	<20141215150514.GB7896@localhost>	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>	<20141222110214.GB5320@localhost>	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>	<20141222113746.GA16687@localhost>	<54981A0D.9000704@duif.net>	<20141222140417.GA2732@localhost>	<54985EB1.3000304@faunalia.it>	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
	<54991477.1090003@faunalia.it>
Message-ID: <54993F7E.8030601@duif.net>

On 23-12-14 08:06, Paolo Cavallini wrote:
> Hi Nyall,
> 
> Il 22/12/2014 23:47, Nyall Dawson ha scritto:
> 
>> I disagree - while there may be an issue with the difficulty of getting
>> wide testing of pull requests, the solution isn't to allow broken code
>> into master.
> 
> You're right, we're big boys now, must behave. However:
> * the code is in good shape, not broken; works smoothly in a variety of
> situations
> * it opens a whole set of new and exciting applications, e.g. live
> tracking, drone monitoring, etc.
> * there are unsupported functions, as pointed out
> * if we remove it from master, it will soon become unmergeable, and will
> probably get lost; it happened several times in the past that what we
> left out of the door was never recovered.
> Overall, I still believe keeping it, but letting conscious users
> activate it when necessary, is a good compromise.
> In the meantime, we can start raising funds to complete the set of
> necessary features (I do not think it's a huge amount of work, once the
> money is found we have time to implement these for 2.8).
> All the best, and thanks for your thoughts.

I agree with Paolo, and also see the value of Sandro's argument that
developing such functionality in a branch get's much less
testing/viewing and is very hard to merge back. Myself I only had a
serious look at it when it was in master...

So as long as we can hide it for normal users (even without tickbox, we
can make a cli-option for it :-) ), AND nothing is broken I'm in favour
of letting it in master.

I think Sandro should hide the spinbox in the statusbar for now, and
nay-sayers should now try to find bugs related to rotation work?

There is a PSC-meeting on 2th januari, let's make the final decision there.

Regards,

Richard Duivenvoorde

From madmanwoo at gmail.com  Tue Dec 23 04:06:00 2014
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Tue, 23 Dec 2014 12:06:00 +0000
Subject: [Qgis-developer] Ugly jumping maps while zooming
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
	<54991477.1090003@faunalia.it> <54993F7E.8030601@duif.net>
Message-ID: <CAAi8Yg86U5OopYx6NXQ-oPStvR6a_vZiLXTNnonakd=5GGOqyw@mail.gmail.com>

>> I agree with Paolo, and also see the value of Sandro's argument that
developing such functionality in a branch get's much less
testing/viewing and is very hard to merge back. Myself I only had a
serious look at it when it was in master...

Sometimes it's not about other people testing, sometimes it's about having
time for other developers to review the code, even just by eyeing it over,
before it is merged in.  Other people might be able to pick up things that
you might miss and save you the effort of bug fixing it later, or you might
be doing it completely wrong to start with.

Sometimes it is also about not having a feature until it is ready, some
things just need to wait until they are ready.

I also understand that sometimes things seem simple but lead to more issues
then you expect, we have all been there, however that is why we have
testing branches  It makes the user experience in QGIS a lot nicer.

I am in no way against the feature, it is a good one, in fact I have a use
for it in Roam, and I do not wish to undermine Sandro's efforts rotation is
a big task, however as it has the possibility of introducing regressions it
should be treated with care - also merging a feature in and then trying to
get more funding for bugs is IMO not a cool move.

If you write code that has small impact, import/export bookmarks for
example, I don't care if something like that is merged right in, small foot
print, small use case, easy fix, but for something that touches a major
core part of the code I think reviews should be done.

- Nathan

On Tue Dec 23 2014 at 8:10:18 PM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 23-12-14 08:06, Paolo Cavallini wrote:
> > Hi Nyall,
> >
> > Il 22/12/2014 23:47, Nyall Dawson ha scritto:
> >
> >> I disagree - while there may be an issue with the difficulty of getting
> >> wide testing of pull requests, the solution isn't to allow broken code
> >> into master.
> >
> > You're right, we're big boys now, must behave. However:
> > * the code is in good shape, not broken; works smoothly in a variety of
> > situations
> > * it opens a whole set of new and exciting applications, e.g. live
> > tracking, drone monitoring, etc.
> > * there are unsupported functions, as pointed out
> > * if we remove it from master, it will soon become unmergeable, and will
> > probably get lost; it happened several times in the past that what we
> > left out of the door was never recovered.
> > Overall, I still believe keeping it, but letting conscious users
> > activate it when necessary, is a good compromise.
> > In the meantime, we can start raising funds to complete the set of
> > necessary features (I do not think it's a huge amount of work, once the
> > money is found we have time to implement these for 2.8).
> > All the best, and thanks for your thoughts.
>
> I agree with Paolo, and also see the value of Sandro's argument that
> developing such functionality in a branch get's much less
> testing/viewing and is very hard to merge back. Myself I only had a
> serious look at it when it was in master...
>
> So as long as we can hide it for normal users (even without tickbox, we
> can make a cli-option for it :-) ), AND nothing is broken I'm in favour
> of letting it in master.
>
> I think Sandro should hide the spinbox in the statusbar for now, and
> nay-sayers should now try to find bugs related to rotation work?
>
> There is a PSC-meeting on 2th januari, let's make the final decision there.
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141223/1bc434ca/attachment-0001.html>

From nirvn.asia at gmail.com  Tue Dec 23 04:21:24 2014
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Tue, 23 Dec 2014 19:21:24 +0700
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <CAAi8Yg86U5OopYx6NXQ-oPStvR6a_vZiLXTNnonakd=5GGOqyw@mail.gmail.com>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
	<54991477.1090003@faunalia.it> <54993F7E.8030601@duif.net>
	<CAAi8Yg86U5OopYx6NXQ-oPStvR6a_vZiLXTNnonakd=5GGOqyw@mail.gmail.com>
Message-ID: <CAC_qv=oz_2DyWsd0ckAxOOYL1NdBMnJo5MvySUpevCr9+=Jgyw@mail.gmail.com>

To be fair to all, there should probably be an agreed upon understanding on
what would need fixing/implementing for the rotation feature to sticik
prior to 2.8, and if it can't be achieved by then revert the commits until
next dev cycle?

I can't be the judge of that, senior devs needed :)
On 23 Dec 2014 19:06, "Nathan Woodrow" <madmanwoo at gmail.com> wrote:

> >> I agree with Paolo, and also see the value of Sandro's argument that
> developing such functionality in a branch get's much less
> testing/viewing and is very hard to merge back. Myself I only had a
> serious look at it when it was in master...
>
> Sometimes it's not about other people testing, sometimes it's about having
> time for other developers to review the code, even just by eyeing it over,
> before it is merged in.  Other people might be able to pick up things that
> you might miss and save you the effort of bug fixing it later, or you might
> be doing it completely wrong to start with.
>
> Sometimes it is also about not having a feature until it is ready, some
> things just need to wait until they are ready.
>
> I also understand that sometimes things seem simple but lead to more
> issues then you expect, we have all been there, however that is why we have
> testing branches  It makes the user experience in QGIS a lot nicer.
>
> I am in no way against the feature, it is a good one, in fact I have a use
> for it in Roam, and I do not wish to undermine Sandro's efforts rotation is
> a big task, however as it has the possibility of introducing regressions it
> should be treated with care - also merging a feature in and then trying to
> get more funding for bugs is IMO not a cool move.
>
> If you write code that has small impact, import/export bookmarks for
> example, I don't care if something like that is merged right in, small foot
> print, small use case, easy fix, but for something that touches a major
> core part of the code I think reviews should be done.
>
> - Nathan
>
> On Tue Dec 23 2014 at 8:10:18 PM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
>> On 23-12-14 08:06, Paolo Cavallini wrote:
>> > Hi Nyall,
>> >
>> > Il 22/12/2014 23:47, Nyall Dawson ha scritto:
>> >
>> >> I disagree - while there may be an issue with the difficulty of getting
>> >> wide testing of pull requests, the solution isn't to allow broken code
>> >> into master.
>> >
>> > You're right, we're big boys now, must behave. However:
>> > * the code is in good shape, not broken; works smoothly in a variety of
>> > situations
>> > * it opens a whole set of new and exciting applications, e.g. live
>> > tracking, drone monitoring, etc.
>> > * there are unsupported functions, as pointed out
>> > * if we remove it from master, it will soon become unmergeable, and will
>> > probably get lost; it happened several times in the past that what we
>> > left out of the door was never recovered.
>> > Overall, I still believe keeping it, but letting conscious users
>> > activate it when necessary, is a good compromise.
>> > In the meantime, we can start raising funds to complete the set of
>> > necessary features (I do not think it's a huge amount of work, once the
>> > money is found we have time to implement these for 2.8).
>> > All the best, and thanks for your thoughts.
>>
>> I agree with Paolo, and also see the value of Sandro's argument that
>> developing such functionality in a branch get's much less
>> testing/viewing and is very hard to merge back. Myself I only had a
>> serious look at it when it was in master...
>>
>> So as long as we can hide it for normal users (even without tickbox, we
>> can make a cli-option for it :-) ), AND nothing is broken I'm in favour
>> of letting it in master.
>>
>> I think Sandro should hide the spinbox in the statusbar for now, and
>> nay-sayers should now try to find bugs related to rotation work?
>>
>> There is a PSC-meeting on 2th januari, let's make the final decision
>> there.
>>
>> Regards,
>>
>> Richard Duivenvoorde
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141223/45386bf1/attachment.html>

From matthias.kuhn at gmx.ch  Tue Dec 23 05:12:48 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 23 Dec 2014 14:12:48 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <CAC_qv=oz_2DyWsd0ckAxOOYL1NdBMnJo5MvySUpevCr9+=Jgyw@mail.gmail.com>
References: <96EAE7D042AAC14486D68EC70207B0C14AA9BD37@srsofaioi16255.verw.rootso.org>
	<548EECA4.4010009@gmx.ch> <20141215145824.GA7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AA9CDA3@srsofaioi16255.verw.rootso.org>
	<20141215150514.GB7896@localhost>
	<96EAE7D042AAC14486D68EC70207B0C14AAA1A8A@srsofaioi16255.verw.rootso.org>
	<20141222110214.GB5320@localhost>
	<CAAi8Yg-uw-Miz8fwg6f+Lx1P9HKf2Pk4dxQTEEJwbNNy1zWVMQ@mail.gmail.com>
	<20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
	<54991477.1090003@faunalia.it> <54993F7E.8030601@duif.net>
	<CAAi8Yg86U5OopYx6NXQ-oPStvR6a_vZiLXTNnonakd=5GGOqyw@mail.gmail.com>
	<CAC_qv=oz_2DyWsd0ckAxOOYL1NdBMnJo5MvySUpevCr9+=Jgyw@mail.gmail.com>
Message-ID: <54996A50.9040800@gmx.ch>

Hi all,

I think we need to distinguish a bit more in several categories of bugs
and features.

*Regression bugs*
These are the bugs that affect previously working functionality. Like
the "ugly jumping maps while zooming". If something like this happens
it's normally tagged as blocker and a good reason to revert a commit
(unless fixed in a timely manner). The "ugly jumping..." has been fixed
(although in a way that I understood is not "perfect" but seems to be
"good enough"). Are there other bugs like this left?

*New-feature-not-yet-polished-enough bugs*
Like the one "rotation not reset after loading new project". They do not
affect users that don't touch the new features. IMO such bugs should not
keep a feature out of master but could justify an "experimental" tag and
explicit turning on the feature (we should get the config dialog to not
clutter the options with it). E.g. firefox has a number of features that
are only available via "about:config".

*Feature does things the wrong way*
That is, a new feature takes code-wise or usability-wise an approach
that is not desirable. Such a thing should normally be spotted by the
reviewer but we cannot guarantee that the reviewer spots it so it should
also be possible to come up with this after merging. However, reasons
for this have to be stated so a developer can understand either _how_ he
can improve the code or _why_ it is not desirable at all. Are there
things that fall into this category with the rotation feature?

All the best,
Matthias

From darth.naihil at gmail.com  Tue Dec 23 05:34:30 2014
From: darth.naihil at gmail.com (Anatoliy Golubev)
Date: Tue, 23 Dec 2014 16:34:30 +0300
Subject: [Qgis-developer] Compilation qgis2.7.0 with VS2010 and Qt 5.3.2
Message-ID: <CAL1Jat8rRXnud9m5U7kt9w15BUaN6myH_rKQyJFASZhptLQYRg@mail.gmail.com>

Hi list!
Im trying to compile qgis 2.7.0 with Qt 5.3.2. After applying PR #1743
all compiles fine (except qspatialite), but linking executables failed
with errors like this:

       Link:
         C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\link.exe
/ERRORREPORT:PROMPT
/OUT:"D:\Projects\other\qgis\qt5\build-debug\output\Debug\qgis_help.exe"
/INCREMENTAL /NOLOGO
/LIBPATH:"D:/Projects/other/qgis/qt5/build-debug/src/core"
/LIBPATH:"D:/Projects/other/qgis/qt5/build-debug/src/core/Debug"
/LIBPATH:"D:/Projects/other/qgis/qt5/build-debug/src/gui"
/LIBPATH:"D:/Projects/other/qgis/qt5/build-debug/src/gui/Debug"
kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib
oleaut32.lib uuid.lib comdlg32.lib advapi32.lib
..\core\Debug\qgis_core.lib d:\OSGeo4w\root\lib\sqlite3_i.lib
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Concurrentd.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5PrintSupportd.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Svgd.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Xmld.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5WebKitWidgetsd.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Widgetsd.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5WebKitd.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Guid.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Networkd.lib"
"C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Cored.lib" wsock32.lib
"C:\Program Files\Microsoft SDKs\Windows\v7.0A\Lib\SetupAPI.Lib"
"C:\Qt\QScintilla-2.8.4\build-vs2010-qt5.3.2-debug\lib\qscintilla2d.lib"
d:\OSGeo4w\root\lib\proj_i.lib d:\OSGeo4w\root\lib\geos_c.lib
d:\OSGeo4w\root\lib\gdal_i.lib d:\OSGeo4w\root\lib\spatialindex_i.lib
d:\OSGeo4w\root\lib\libexpat.lib d:\OSGeo4w\root\lib\sqlite3_i.lib
d:\OSGeo4w\root\lib\spatialite_i.lib /MANIFEST
/ManifestFile:"qgis_help.dir\Debug\qgis_help.exe.intermediate.manifest"
/MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG
/PDB:"D:/Projects/other/qgis/qt5/build-debug/output/Debug/qgis_help.pdb"
/SUBSYSTEM:WINDOWS /TLBID:1 /DYNAMICBASE /NXCOMPAT
/IMPLIB:"D:/Projects/other/qgis/qt5/build-debug/src/helpviewer/Debug/qgis_help.lib"
/MACHINE:X86 qgis_help.dir\Debug\qgis_win32.res
         qgis_help.dir\Debug\qgis_help.exe.embed.manifest.res
         qgis_help.dir\Debug\main.obj
         qgis_help.dir\Debug\qgshelpviewer.obj
         qgis_help.dir\Debug\moc_qgshelpviewer.obj
         qgis_help.dir\Debug\qrc_images.obj  /machine:X86 /debug
     1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external
symbol _WinMain at 16 referenced in function ___tmainCRTStartup
     1>D:\Projects\other\qgis\qt5\build-debug\output\Debug\qgis_help.exe
: fatal error LNK1120: 1 unresolved externals
     1>Done Building Project
"D:\Projects\other\qgis\qt5\build-debug\src\helpviewer\qgis_help.vcxproj"
(build target(s)) -- FAILED.

After some googling i find suggestion to change /SUBSYSTEM to CONSOLE,
but i dont think that this can help.
Any thoughts?

System: Win 7 x86, VS2010, CMake 3.1.0, Qwt 6.1.1, Qwtpolar 1.1.1,
QScintilla 2.8.4, other libs from OSGeo4w

From luca76 at gmail.com  Tue Dec 23 06:57:19 2014
From: luca76 at gmail.com (Luca Manganelli)
Date: Tue, 23 Dec 2014 15:57:19 +0100
Subject: [Qgis-developer] QGIS Server and external WMS through Proxy
Message-ID: <CAMB2qw3tQ0JSnFTZBAJbC25eWQw0kGXJ+d7xYLquJ4TDmp69Yg@mail.gmail.com>

Hi,

I have a external WMS server, that I can access with user/password,
but I can access to it only with our proxy server.

It seems that I cannot configure QGIS Server to use proxy, is it right?

From matthias.kuhn at gmx.ch  Tue Dec 23 07:22:33 2014
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 23 Dec 2014 16:22:33 +0100
Subject: [Qgis-developer] Compilation qgis2.7.0 with VS2010 and Qt 5.3.2
In-Reply-To: <CAL1Jat8rRXnud9m5U7kt9w15BUaN6myH_rKQyJFASZhptLQYRg@mail.gmail.com>
References: <CAL1Jat8rRXnud9m5U7kt9w15BUaN6myH_rKQyJFASZhptLQYRg@mail.gmail.com>
Message-ID: <549988B9.6000406@gmx.ch>

Hi Anatoliy,

Does that mean that it worked fine before PR #1743?
In general Qt5 support is still pretty new and did not receive much
testing. I don't know how many people have run such a setup on Windows.
It requires to also link dependencies like qwt, qwtpolar and qscintilla
against Qt5.
That said, it is very welcome if people test and improve Qt5 support.
But if you want to stay out of the way of problems you are better off if
you stick to the well-tested Qt4.

Anyway, the problem you have here looks like a linker problem to the
MSVCRT, so Windows specific and not Qt5 specific. As I seldom use
Windows I can't offer more help than this hint, sorry.

Regards,
Matthias

On 12/23/2014 02:34 PM, Anatoliy Golubev wrote:
> Hi list!
> Im trying to compile qgis 2.7.0 with Qt 5.3.2. After applying PR #1743
> all compiles fine (except qspatialite), but linking executables failed
> with errors like this:
>
>        Link:
>          C:\Program Files\Microsoft Visual Studio 10.0\VC\bin\link.exe
> /ERRORREPORT:PROMPT
> /OUT:"D:\Projects\other\qgis\qt5\build-debug\output\Debug\qgis_help.exe"
> /INCREMENTAL /NOLOGO
> /LIBPATH:"D:/Projects/other/qgis/qt5/build-debug/src/core"
> /LIBPATH:"D:/Projects/other/qgis/qt5/build-debug/src/core/Debug"
> /LIBPATH:"D:/Projects/other/qgis/qt5/build-debug/src/gui"
> /LIBPATH:"D:/Projects/other/qgis/qt5/build-debug/src/gui/Debug"
> kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib
> oleaut32.lib uuid.lib comdlg32.lib advapi32.lib
> ..\core\Debug\qgis_core.lib d:\OSGeo4w\root\lib\sqlite3_i.lib
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Concurrentd.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5PrintSupportd.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Svgd.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Xmld.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5WebKitWidgetsd.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Widgetsd.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5WebKitd.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Guid.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Networkd.lib"
> "C:\Qt\Qt-online\5.3\msvc2010_opengl\lib\Qt5Cored.lib" wsock32.lib
> "C:\Program Files\Microsoft SDKs\Windows\v7.0A\Lib\SetupAPI.Lib"
> "C:\Qt\QScintilla-2.8.4\build-vs2010-qt5.3.2-debug\lib\qscintilla2d.lib"
> d:\OSGeo4w\root\lib\proj_i.lib d:\OSGeo4w\root\lib\geos_c.lib
> d:\OSGeo4w\root\lib\gdal_i.lib d:\OSGeo4w\root\lib\spatialindex_i.lib
> d:\OSGeo4w\root\lib\libexpat.lib d:\OSGeo4w\root\lib\sqlite3_i.lib
> d:\OSGeo4w\root\lib\spatialite_i.lib /MANIFEST
> /ManifestFile:"qgis_help.dir\Debug\qgis_help.exe.intermediate.manifest"
> /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG
> /PDB:"D:/Projects/other/qgis/qt5/build-debug/output/Debug/qgis_help.pdb"
> /SUBSYSTEM:WINDOWS /TLBID:1 /DYNAMICBASE /NXCOMPAT
> /IMPLIB:"D:/Projects/other/qgis/qt5/build-debug/src/helpviewer/Debug/qgis_help.lib"
> /MACHINE:X86 qgis_help.dir\Debug\qgis_win32.res
>          qgis_help.dir\Debug\qgis_help.exe.embed.manifest.res
>          qgis_help.dir\Debug\main.obj
>          qgis_help.dir\Debug\qgshelpviewer.obj
>          qgis_help.dir\Debug\moc_qgshelpviewer.obj
>          qgis_help.dir\Debug\qrc_images.obj  /machine:X86 /debug
>      1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external
> symbol _WinMain at 16 referenced in function ___tmainCRTStartup
>      1>D:\Projects\other\qgis\qt5\build-debug\output\Debug\qgis_help.exe
> : fatal error LNK1120: 1 unresolved externals
>      1>Done Building Project
> "D:\Projects\other\qgis\qt5\build-debug\src\helpviewer\qgis_help.vcxproj"
> (build target(s)) -- FAILED.
>
> After some googling i find suggestion to change /SUBSYSTEM to CONSOLE,
> but i dont think that this can help.
> Any thoughts?
>
> System: Win 7 x86, VS2010, CMake 3.1.0, Qwt 6.1.1, Qwtpolar 1.1.1,
> QScintilla 2.8.4, other libs from OSGeo4w
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From info at s-m-ernst.de  Tue Dec 23 09:50:02 2014
From: info at s-m-ernst.de (Sebastian M. Ernst)
Date: Tue, 23 Dec 2014 18:50:02 +0100
Subject: [Qgis-developer] qgis 2.6.1 does not compile - error related to
	Python
Message-ID: <5499AB4A.9020302@s-m-ernst.de>

Hi all,

I am running into some odd error related to Python while trying to
compile QGIS 2.6.1 from source on Linux-x86 using GCC 4.5.0. I can only
guess that I made a mistake of some sort when I compiled and installed
Python 2.7.9 in parallel to my Linux distribution's original Python
2.6.5 previously, though it works as far as I can tell. Any pointers
towards what I am looking at exactly are greatly appreciated.

Thanks, regards,
Sebastian


user at computer:~/Desktop/qgis-2.6.1/build-master> ccmake -D
PYTHON_EXECUTABLE=/usr/local/bin/python2.7 -D
PYTHON_INCLUDE_PATH=/usr/local/include/python2.7/ -D
PYTHON_LIBRARY=/usr/local/lib/libpython2.7.a ..
[...]
user at computer:~/Desktop/qgis-2.6.1/build-master> make
[...]
[ 85%] Built target offlineeditingplugin
[ 85%] Built target heatmapplugin
[ 85%] Built target spitplugin
Linking CXX shared library ../../output/lib/libqgispython.so
/usr/local/lib/libpython2.7.a(dynload_shlib.o): In function
`_PyImport_GetDynLoadFunc':

/home/user/Desktop/Python-2.7.9/Python/dynload_shlib.c:94: undefined
reference to `dlsym'
/home/user/Desktop/Python-2.7.9/Python/dynload_shlib.c:130: undefined
reference to `dlopen'
/home/user/Desktop/Python-2.7.9/Python/dynload_shlib.c:141: undefined
reference to `dlsym'
/home/user/Desktop/Python-2.7.9/Python/dynload_shlib.c:133: undefined
reference to `dlerror'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_acquire_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:324: undefined
reference to `sem_wait'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_release_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:350: undefined
reference to `sem_post'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_start_new_thread':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:184: undefined
reference to `pthread_attr_setstacksize'
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:194: undefined
reference to `pthread_create'
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:210: undefined
reference to `pthread_detach'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_allocate_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:269: undefined
reference to `sem_init'
/usr/local/lib/libpython2.7.a(thread.o): In function `PyThread_free_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:294: undefined
reference to `sem_destroy'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_acquire_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:326: undefined
reference to `sem_trywait'
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:324: undefined
reference to `sem_wait'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_release_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:350: undefined
reference to `sem_post'
/usr/local/lib/libpython2.7.a(thread.o): In function
`_pythread_pthread_set_stacksize':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:497: undefined
reference to `pthread_attr_setstacksize'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_allocate_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:269: undefined
reference to `sem_init'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_acquire_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:324: undefined
reference to `sem_wait'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_release_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:350: undefined
reference to `sem_post'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_acquire_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:324: undefined
reference to `sem_wait'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_release_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:350: undefined
reference to `sem_post'
/usr/local/lib/libpython2.7.a(thread.o): In function
`PyThread_allocate_lock':
/home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:269: undefined
reference to `sem_init'
collect2: ld returned 1 exit status
make[2]: *** [output/lib/libqgispython.so.2.6.1] Fehler 1
make[1]: *** [src/python/CMakeFiles/qgispython.dir/all] Fehler 2
make: *** [all] Fehler 2
user at computer:~/Desktop/qgis-2.6.1/build-master>

From info at s-m-ernst.de  Tue Dec 23 10:37:12 2014
From: info at s-m-ernst.de (Sebastian M. Ernst)
Date: Tue, 23 Dec 2014 19:37:12 +0100
Subject: [Qgis-developer] qgis 2.6.1 does not compile - error related to
 Python
In-Reply-To: <5499AB4A.9020302@s-m-ernst.de>
References: <5499AB4A.9020302@s-m-ernst.de>
Message-ID: <5499B658.2020508@s-m-ernst.de>

Hi all (again),

strike my last email. Python sources must be configured with

./configure --enable-shared

I re-built Python eventually and a shared object file was generated.
Correspondingly, I had to configure qgis with the following command
instead:

ccmake -D PYTHON_EXECUTABLE=/usr/local/bin/python2.7 -D
PYTHON_INCLUDE_PATH=/usr/local/include/python2.7/ -D
PYTHON_LIBRARY=/usr/local/lib/libpython2.7.so ..

Regards,
Sebastian


Am 23.12.2014 um 18:50 schrieb Sebastian M. Ernst:
> Hi all,
> 
> I am running into some odd error related to Python while trying to
> compile QGIS 2.6.1 from source on Linux-x86 using GCC 4.5.0. I can only
> guess that I made a mistake of some sort when I compiled and installed
> Python 2.7.9 in parallel to my Linux distribution's original Python
> 2.6.5 previously, though it works as far as I can tell. Any pointers
> towards what I am looking at exactly are greatly appreciated.
> 
> Thanks, regards,
> Sebastian
> 
> 
> user at computer:~/Desktop/qgis-2.6.1/build-master> ccmake -D
> PYTHON_EXECUTABLE=/usr/local/bin/python2.7 -D
> PYTHON_INCLUDE_PATH=/usr/local/include/python2.7/ -D
> PYTHON_LIBRARY=/usr/local/lib/libpython2.7.a ..
> [...]
> user at computer:~/Desktop/qgis-2.6.1/build-master> make
> [...]
> [ 85%] Built target offlineeditingplugin
> [ 85%] Built target heatmapplugin
> [ 85%] Built target spitplugin
> Linking CXX shared library ../../output/lib/libqgispython.so
> /usr/local/lib/libpython2.7.a(dynload_shlib.o): In function
> `_PyImport_GetDynLoadFunc':
> 
> /home/user/Desktop/Python-2.7.9/Python/dynload_shlib.c:94: undefined
> reference to `dlsym'
> /home/user/Desktop/Python-2.7.9/Python/dynload_shlib.c:130: undefined
> reference to `dlopen'
> /home/user/Desktop/Python-2.7.9/Python/dynload_shlib.c:141: undefined
> reference to `dlsym'
> /home/user/Desktop/Python-2.7.9/Python/dynload_shlib.c:133: undefined
> reference to `dlerror'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_acquire_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:324: undefined
> reference to `sem_wait'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_release_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:350: undefined
> reference to `sem_post'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_start_new_thread':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:184: undefined
> reference to `pthread_attr_setstacksize'
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:194: undefined
> reference to `pthread_create'
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:210: undefined
> reference to `pthread_detach'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_allocate_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:269: undefined
> reference to `sem_init'
> /usr/local/lib/libpython2.7.a(thread.o): In function `PyThread_free_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:294: undefined
> reference to `sem_destroy'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_acquire_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:326: undefined
> reference to `sem_trywait'
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:324: undefined
> reference to `sem_wait'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_release_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:350: undefined
> reference to `sem_post'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `_pythread_pthread_set_stacksize':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:497: undefined
> reference to `pthread_attr_setstacksize'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_allocate_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:269: undefined
> reference to `sem_init'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_acquire_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:324: undefined
> reference to `sem_wait'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_release_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:350: undefined
> reference to `sem_post'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_acquire_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:324: undefined
> reference to `sem_wait'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_release_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:350: undefined
> reference to `sem_post'
> /usr/local/lib/libpython2.7.a(thread.o): In function
> `PyThread_allocate_lock':
> /home/user/Desktop/Python-2.7.9/Python/thread_pthread.h:269: undefined
> reference to `sem_init'
> collect2: ld returned 1 exit status
> make[2]: *** [output/lib/libqgispython.so.2.6.1] Fehler 1
> make[1]: *** [src/python/CMakeFiles/qgispython.dir/all] Fehler 2
> make: *** [all] Fehler 2
> user at computer:~/Desktop/qgis-2.6.1/build-master>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

From cavallini at faunalia.it  Tue Dec 23 11:18:34 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 23 Dec 2014 20:18:34 +0100
Subject: [Qgis-developer] Error in new Metasearch
In-Reply-To: <CAFWXLWUy-cEGO4RSqAH86WdOv1+Kj0Btgq2wQjMdCuwoemX-xA@mail.gmail.com>
References: <54915AC0.60105@faunalia.it>
	<CAFWXLWUy-cEGO4RSqAH86WdOv1+Kj0Btgq2wQjMdCuwoemX-xA@mail.gmail.com>
Message-ID: <5499C00A.1020206@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 19/12/2014 14:45, Tom Kralidis ha scritto:
> Hi Paolo: FYI we have now merged MetaSearch into QGIS core.  Can
> you try now from there?

Hi Tom,
just upgraded to nightly; I get the service info, but I cannot get any
result from the search. With plain 2.6.1 it was working fine.
All the best, and thanks.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSZwAkACgkQ/NedwLUzIr7bGQCfdIf67mzXrplY1tIP8FzMXDHj
s2UAoK2//6ar9pdqf9p9/eCEGoKi+R6m
=pP6y
-----END PGP SIGNATURE-----

From strk at keybit.net  Tue Dec 23 15:14:58 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 24 Dec 2014 00:14:58 +0100
Subject: [Qgis-developer] Ugly jumping maps while zooming
In-Reply-To: <54996A50.9040800@gmx.ch>
References: <20141222113746.GA16687@localhost> <54981A0D.9000704@duif.net>
	<20141222140417.GA2732@localhost> <54985EB1.3000304@faunalia.it>
	<CAB28Asg3pMf3LArqRO6a2xrdw_1=2GiJn_-OgMDDp3ee93jurQ@mail.gmail.com>
	<54991477.1090003@faunalia.it> <54993F7E.8030601@duif.net>
	<CAAi8Yg86U5OopYx6NXQ-oPStvR6a_vZiLXTNnonakd=5GGOqyw@mail.gmail.com>
	<CAC_qv=oz_2DyWsd0ckAxOOYL1NdBMnJo5MvySUpevCr9+=Jgyw@mail.gmail.com>
	<54996A50.9040800@gmx.ch>
Message-ID: <20141223231458.GD4603@localhost>

On Tue, Dec 23, 2014 at 02:12:48PM +0100, Matthias Kuhn wrote:

> I think we need to distinguish a bit more in several categories of bugs
> and features.
> 
> *Regression bugs*
> These are the bugs that affect previously working functionality. Like
> the "ugly jumping maps while zooming". If something like this happens
> it's normally tagged as blocker and a good reason to revert a commit
> (unless fixed in a timely manner). The "ugly jumping..." has been fixed
> (although in a way that I understood is not "perfect" but seems to be
> "good enough"). Are there other bugs like this left?

None that I know of. Nothing like this filed on hub.

> *New-feature-not-yet-polished-enough bugs*
> Like the one "rotation not reset after loading new project". They do not
> affect users that don't touch the new features. IMO such bugs should not
> keep a feature out of master but could justify an "experimental" tag and
> explicit turning on the feature (we should get the config dialog to not
> clutter the options with it). E.g. firefox has a number of features that
> are only available via "about:config".

I'm ready to work on implementing such configuration as next step.
Someone suggested a command-line only way to enable it.
I'd go further suggesting an environment variable.

> *Feature does things the wrong way*
> That is, a new feature takes code-wise or usability-wise an approach
> that is not desirable. Such a thing should normally be spotted by the
> reviewer but we cannot guarantee that the reviewer spots it so it should
> also be possible to come up with this after merging. However, reasons
> for this have to be stated so a developer can understand either _how_ he
> can improve the code or _why_ it is not desirable at all. Are there
> things that fall into this category with the rotation feature?

I think a couple of issues could fall in this category:

 - PAL labeling support for rotation.
   Larry suggested to pre-rotate vectors before labeling,
   which makes sense to me. This is tracked here:
   http://hub.qgis.org/issues/11814

 - MapCanvasItem size and position tracking
   Martin suggested a way to add knowledge about rotation
   which is currently missing. This is tracked here:
   http://hub.qgis.org/issues/11909

--strk;

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

From cavallini at faunalia.it  Wed Dec 24 05:37:04 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 24 Dec 2014 14:37:04 +0100
Subject: [Qgis-developer] Wrong $length
Message-ID: <549AC180.10802@faunalia.it>

Hi all.
The calculation of $length on the attached file returns weird results:
when calculated as virtual field is ok, whereas when updating an
existing field a negative result is given. I assume this is related to
topological errors in the line, but nevertheless the diff between the
two methods is unexpected.
Furthermore, "Update all" does not seem to work on a column where
sorting is applied (by clicking on column head).
Anyone confirms? Should I open two tickets?
Thanks.
-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_length.tar.gz
Type: application/gzip
Size: 3547 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141224/f23e57a1/attachment.bin>

From darth.naihil at gmail.com  Wed Dec 24 05:52:41 2014
From: darth.naihil at gmail.com (Anatoliy Golubev)
Date: Wed, 24 Dec 2014 16:52:41 +0300
Subject: [Qgis-developer] Compilation qgis2.7.0 with VS2010 and Qt 5.3.2
In-Reply-To: <549988B9.6000406@gmx.ch>
References: <CAL1Jat8rRXnud9m5U7kt9w15BUaN6myH_rKQyJFASZhptLQYRg@mail.gmail.com>
	<549988B9.6000406@gmx.ch>
Message-ID: <CAL1Jat_=FZH-7-6RDZ1FjJ=4ifg+YFxeKAJ2yvvk5QYc2t-z2Q@mail.gmail.com>

Hi Matthias! Thanks for reply!

I know that Qt5 support was merged recently and want to test it.

Before PR#1743 there were errors with linux-specific includes, such as
netinet/in.h.
Im compile qwt, qwtpolar and qscintilla with Qt5.

It may be CMake rules that generate improper configuration for Qt5
windows build, coz compilation with Qt4 with same environment works
fine.

2014-12-23 18:22 GMT+03:00 Matthias Kuhn <matthias.kuhn at gmx.ch>:
> Hi Anatoliy,
>
> Does that mean that it worked fine before PR #1743?
> In general Qt5 support is still pretty new and did not receive much
> testing. I don't know how many people have run such a setup on Windows.
> It requires to also link dependencies like qwt, qwtpolar and qscintilla
> against Qt5.
> That said, it is very welcome if people test and improve Qt5 support.
> But if you want to stay out of the way of problems you are better off if
> you stick to the well-tested Qt4.
>
> Anyway, the problem you have here looks like a linker problem to the
> MSVCRT, so Windows specific and not Qt5 specific. As I seldom use
> Windows I can't offer more help than this hint, sorry.
>
> Regards,
> Matthias
>

From strk at keybit.net  Wed Dec 24 08:09:55 2014
From: strk at keybit.net (Sandro Santilli)
Date: Wed, 24 Dec 2014 17:09:55 +0100
Subject: [Qgis-developer] Rotation support disabled by default
Message-ID: <20141224160955.GA24980@localhost>

As of commit 68743f9b8a95b7fa8ddc582cec507b6ac7788789 the rotation
support is disabled unless you export the QGIS_ENABLE_CANVAS_ROTATION
variable in the environment (with any value).

Hopefully this will help focusing on any regression that may be
introduced in an attempt to enhance rotation support.

Those willing to use or test rotation can still do so via the env
variable and report issues in the "new feature not yet polished enough"
category.

Happy holidays !

--strk; 

  ()   Free GIS & Flash consultant/developer
  /\   http://strk.keybit.net/services.html

From werner.macho at gmail.com  Wed Dec 24 09:26:19 2014
From: werner.macho at gmail.com (Werner Macho)
Date: Wed, 24 Dec 2014 18:26:19 +0100
Subject: [Qgis-developer] Wrong $length
In-Reply-To: <549AC180.10802@faunalia.it>
References: <549AC180.10802@faunalia.it>
Message-ID: <549AF73B.1060400@gmail.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Paolo!
I confirm the behavior with negative and positive value.
But I also expired some kind of infinite loop when updating existing
or creating new (not virtual) field.
Seem to be some kind of error when _not_ using virtual field.
Which is the correct length? Do you know? Probably both results are
wrong (which would be ok if the line has an error inside anyway, but
in that case it should also throw an error to a popup window).

kind regards
Werner



On 12/24/2014 02:37 PM, Paolo Cavallini wrote:
> Hi all. The calculation of $length on the attached file returns
> weird results: when calculated as virtual field is ok, whereas when
> updating an existing field a negative result is given. I assume
> this is related to topological errors in the line, but nevertheless
> the diff between the two methods is unexpected. Furthermore,
> "Update all" does not seem to work on a column where sorting is
> applied (by clicking on column head). Anyone confirms? Should I
> open two tickets? Thanks.
> 
> 
> 
> _______________________________________________ Qgis-developer
> mailing list Qgis-developer at lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.15 (GNU/Linux)

iEYEARECAAYFAlSa9zsACgkQDAH1YiCxBglfFACeIW3Ry5oEiNfNVSb7mtSV4mQc
GCEAn3NcpDOF0Ou+Sk1A68dvP15e5fSW
=CTF5
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Wed Dec 24 09:43:24 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 24 Dec 2014 18:43:24 +0100
Subject: [Qgis-developer] Processing: error with lwgeom
Message-ID: <549AFB3C.2070607@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all.

I'm getting this error when running make valid from the plugin
http://plugins.qgis.org/plugins/processinglwgeomprovider/

Traceback (most recent call last):
  File
"/usr/share/qgis/python/plugins/processing/gui/AlgorithmDialog.py",
line 180, in accept
    if runalg(self.alg, self):
  File
"/usr/share/qgis/python/plugins/processing/gui/AlgorithmExecutor.py",
line 51, in runalg
    alg.execute(progress)
  File
"/usr/share/qgis/python/plugins/processing/core/GeoAlgorithm.py", line
254, in execute
    + self.tr('\nSee log for more details'))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position
48: ordinal not in range(128)

QGIS nightly on Debian Jessie.

Also, some help on how to setup automatically the path to liblwgeom
(/usr/bin/ on Deb) would help a lot new users, and would be much welcome.

All the best.

- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSa+zsACgkQ/NedwLUzIr6HKACeJyxkvtfHxbDCkSJD88dHC6Ya
nGkAoJpAGksBjIEY0BkEJRVuxG6mhIk2
=Io4p
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Wed Dec 24 10:04:07 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 24 Dec 2014 19:04:07 +0100
Subject: [Qgis-developer] Wrong $length
In-Reply-To: <549AF73B.1060400@gmail.com>
References: <549AC180.10802@faunalia.it> <549AF73B.1060400@gmail.com>
Message-ID: <549B0017.2040007@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 24/12/2014 18:26, Werner Macho ha scritto:
> Hi Paolo! I confirm the behavior with negative and positive value. 
> But I also expired some kind of infinite loop when updating
> existing or creating new (not virtual) field. Seem to be some kind
> of error when _not_ using virtual field. Which is the correct
> length? Do you know? Probably both results are wrong (which would
> be ok if the line has an error inside anyway, but in that case it
> should also throw an error to a popup window).

Hi Werner,
thanks for help. Further tests, more puzzling results:
* contrary to expectations, GRASS v.clean does not lean up the vector
* the length in the virtual field appears correct
* cleaning up the vector by hand (removing duplicates) does not change
the results
* the topology checker plugin does not find topo errors, nor
duplicates, in both layers (the original and the cleaned up).
All the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSbABYACgkQ/NedwLUzIr5dTACfYH8Y/6euUpmmf/C75kLhjbO9
n4wAn1UD3BoZdrzWCREQKIaDElrMvTOG
=8iCd
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Wed Dec 24 10:06:36 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 24 Dec 2014 19:06:36 +0100
Subject: [Qgis-developer] Rotation support disabled by default
In-Reply-To: <20141224160955.GA24980@localhost>
References: <20141224160955.GA24980@localhost>
Message-ID: <549B00AC.8090108@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 24/12/2014 17:09, Sandro Santilli ha scritto:
> As of commit 68743f9b8a95b7fa8ddc582cec507b6ac7788789 the rotation 
> support is disabled unless you export the
> QGIS_ENABLE_CANVAS_ROTATION variable in the environment (with any
> value).
> 
> Hopefully this will help focusing on any regression that may be 
> introduced in an attempt to enhance rotation support.
> 
> Those willing to use or test rotation can still do so via the env 
> variable and report issues in the "new feature not yet polished
> enough" category.

IMHO in this way only a bunch of nerds like us will test the feature.
Much better if it's an option in the Settings menu.
We could leave it on during the development phase, and switch it to
off in case it is not ready at feature freeze.
All the best.

- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlSbAKsACgkQ/NedwLUzIr4yqACfSSxfAAPxkb+ZmnJ9ZKfu36X3
9OkAoK+P/QwJjbV68v9i/s1vclGHdwUR
=f0KE
-----END PGP SIGNATURE-----

From nyall.dawson at gmail.com  Wed Dec 24 11:18:01 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 25 Dec 2014 06:18:01 +1100
Subject: [Qgis-developer] Wrong $length
In-Reply-To: <549AC180.10802@faunalia.it>
References: <549AC180.10802@faunalia.it>
Message-ID: <CAB28AshjY2pRp_xPdV=ApeKHuhRLwf57NnVzPL__gi0cb+c2og@mail.gmail.com>

On 25 Dec 2014 12:37 am, "Paolo Cavallini" <cavallini at faunalia.it> wrote:
>
> Hi all.
> The calculation of $length on the attached file returns weird results:
> when calculated as virtual field is ok, whereas when updating an
> existing field a negative result is given. I assume this is related to
> topological errors in the line, but nevertheless the diff between the
> two methods is unexpected.
> Furthermore, "Update all" does not seem to work on a column where
> sorting is applied (by clicking on column head).

I can't test right now, but this sounds like possibly the column isn't
large enough to hold the length values, and they are overflowing into
negative values. Could this be the case?

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141225/e7ad05bd/attachment.html>

From nyall.dawson at gmail.com  Thu Dec 25 01:54:14 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 25 Dec 2014 20:54:14 +1100
Subject: [Qgis-developer] Crowdfunding for a Christmas gift to QGIS - live
	layer effects!
Message-ID: <CAB28AshgGb+-=OfCQLoZo2n6T7eQcoo9EiWKLe1N2PHJZ06PVA@mail.gmail.com>

Hey all,

Just letting everyone know about a new crowdfunding project I've just launched:

https://www.kickstarter.com/projects/41633306/a-christmas-gift-for-qgis-live-layer-effects-for-q

This project aims to add live layer effects to QGIS which can be
applied to symbols. Some examples include live blur effects, drop
shadows, and outer glows. Think Photoshop style layer effects but
available directly within QGIS.

Initially this will be just for symbol layers, but the code will be
flexible enough to allow these effects to apply to composer items,
labelling, etc. Effects will also be stackable, eg, you can apply a
blur to a symbol and then a subsequent drop shadow effect.

Why crowdfund? Well, there's a lot of work left to get this to a
mergeable stage. It's not a sponsored project, and will take a lot of
time to complete. I think crowdfunding will be the best way of raising
the amount to fund my development time on this valuable feature.

So, please share the word!

Merry Christmas to all,
Nyall

From darth.naihil at gmail.com  Fri Dec 26 06:16:55 2014
From: darth.naihil at gmail.com (Anatoliy Golubev)
Date: Fri, 26 Dec 2014 17:16:55 +0300
Subject: [Qgis-developer] Compilation qgis2.7.0 with VS2010 and Qt 5.3.2
Message-ID: <CAL1Jat8DjsFuty3TDpJb1CoXYiv+8ZbKZstHaSGPYGa_EaVxCA@mail.gmail.com>

Hi list!

I am successfully build QGIS-dev with Qt5 in windows. Here are some notes:

1. PR#1743 is necessary for windows build, without it compilation
fails trying to include linux headers (netinet/in.h);

2. CMake 3.1 throws many warnings like this:
    CMake Warning (dev) in src/core/CMakeLists.txt:
        Policy CMP0020 is not set: Automatically link Qt executables to qtmain
        target on Windows.  Run "cmake --help-policy CMP0020" for
policy details.
    Use the cmake_policy command to set the policy and suppress this warning.

With these warnings compilation fails at linking executables with
errors like this:
1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external symbol
_WinMain at 16 referenced in function ___tmainCRTStartup
1>D:\Projects\other\qgis\qt5\build-debug\output\Debug\qgis_help.exe :
fatal error LNK1120: 1 unresolved externals

There is post at SO about this warning
(http://stackoverflow.com/questions/14115024/how-to-link-qtmain-in-cmake-with-qt5):
    > As of CMake 2.8.11 and Qt 5.1, linking to Qt5::WinMain is
automatic/implicit if you specify WIN32 in your add_executable call,
or otherwise set the WIN32_EXECUTABLE target property. ? steveire
    >> Note that the automatic adding of Qt5::WinMain target is
subject to the POLICY CMP0020 cmake policy. Default is the old
behavior (not to add it). ? codeling
    >>> Your comment is misleading. The default behavior is NEW if the
minimum required cmake version is 2.8.11. ? steveire

Changing CMAKE_MINIMUM_REQUIRED to 2.8.11 solved problems with
linking, maybe setting this policy is better way, dont know.

3. There are some other warnings:
CMake Warning (dev) at CMakeLists.txt:389 (IF):
CMake Warning (dev) at src/core/CMakeLists.txt:294 (IF):
CMake Warning (dev) at src/analysis/CMakeLists.txt:80 (IF):
    Policy CMP0054 is not set: Only interpret if() arguments as variables or
    keywords when unquoted.  Run "cmake --help-policy CMP0054" for policy
    details.  Use the cmake_policy command to set the policy and suppress this
    warning.

    Quoted variables like "MSVC" will no longer be dereferenced when the policy
    is set to NEW.  Since the policy is not set the OLD behavior will be used.

But they dont break anything for now.

I dont work with CMake before, cant create patches for these, maybe
someone more experienced can take a look.

4. QSpatiaLite driver compilation fails, coz there was some
refactoring of sql-drivers in qt5. I can try fix it when have more
free time, i think its not hard.

From tomkralidis at gmail.com  Fri Dec 26 07:15:12 2014
From: tomkralidis at gmail.com (Tom Kralidis)
Date: Fri, 26 Dec 2014 10:15:12 -0500
Subject: [Qgis-developer] Error in new Metasearch
In-Reply-To: <5499C00A.1020206@faunalia.it>
References: <54915AC0.60105@faunalia.it>
	<CAFWXLWUy-cEGO4RSqAH86WdOv1+Kj0Btgq2wQjMdCuwoemX-xA@mail.gmail.com>
	<5499C00A.1020206@faunalia.it>
Message-ID: <CAFWXLWVjPN3Rjo0gbGQrmK-6895R9q8h3ZHs8b6oSTHr9YpzOQ@mail.gmail.com>

Hi Paolo: master works for me.  Can you provide a usecase/workflow I
can try to reproduce?

Thanks

..Tom


On Tue, Dec 23, 2014 at 2:18 PM, Paolo Cavallini <cavallini at faunalia.it> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Il 19/12/2014 14:45, Tom Kralidis ha scritto:
>> Hi Paolo: FYI we have now merged MetaSearch into QGIS core.  Can
>> you try now from there?
>
> Hi Tom,
> just upgraded to nightly; I get the service info, but I cannot get any
> result from the search. With plain 2.6.1 it was working fine.
> All the best, and thanks.
> - --
> Paolo Cavallini - www.faunalia.eu
> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1
>
> iEYEARECAAYFAlSZwAkACgkQ/NedwLUzIr7bGQCfdIf67mzXrplY1tIP8FzMXDHj
> s2UAoK2//6ar9pdqf9p9/eCEGoKi+R6m
> =pP6y
> -----END PGP SIGNATURE-----

From bernd.vogelgesang at gmx.de  Sun Dec 28 03:55:16 2014
From: bernd.vogelgesang at gmx.de (Bernd Vogelgesang)
Date: Sun, 28 Dec 2014 12:55:16 +0100
Subject: [Qgis-developer] Crowdfunding for a Christmas gift to QGIS -
 live layer effects!
In-Reply-To: <CAB28AshgGb+-=OfCQLoZo2n6T7eQcoo9EiWKLe1N2PHJZ06PVA@mail.gmail.com>
References: <CAB28AshgGb+-=OfCQLoZo2n6T7eQcoo9EiWKLe1N2PHJZ06PVA@mail.gmail.com>
Message-ID: <op.xrkt2ejll2i25i@bernd-terra-pc>

Hi Nyall,
I tried to donate, but my credit card was refused without any hints why.  
Its still valid till 08/15. Any experience with that already or other ways  
to contribute?

Cheers
Bernd


Am 25.12.2014, 10:54 Uhr, schrieb Nyall Dawson <nyall.dawson at gmail.com>:

> Hey all,
>
> Just letting everyone know about a new crowdfunding project I've just  
> launched:
>
> https://www.kickstarter.com/projects/41633306/a-christmas-gift-for-qgis-live-layer-effects-for-q
>
> This project aims to add live layer effects to QGIS which can be
> applied to symbols. Some examples include live blur effects, drop
> shadows, and outer glows. Think Photoshop style layer effects but
> available directly within QGIS.
>
> Initially this will be just for symbol layers, but the code will be
> flexible enough to allow these effects to apply to composer items,
> labelling, etc. Effects will also be stackable, eg, you can apply a
> blur to a symbol and then a subsequent drop shadow effect.
>
> Why crowdfund? Well, there's a lot of work left to get this to a
> mergeable stage. It's not a sponsored project, and will take a lot of
> time to complete. I think crowdfunding will be the best way of raising
> the amount to fund my development time on this valuable feature.
>
> So, please share the word!
>
> Merry Christmas to all,
> Nyall
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Bernd Vogelgesang
Siedlerstra?e 2
91083 Baiersdorf/Igelsdorf
Tel: 09133-825374

From baltix at gmail.com  Sun Dec 28 04:36:38 2014
From: baltix at gmail.com (Baltix Linux)
Date: Sun, 28 Dec 2014 14:36:38 +0200
Subject: [Qgis-developer] What is the status of new "QGIS-Mobile"
 (https://github.com/opengisch/QGIS-Mobile ) project? Could I test it on
 Android?
Message-ID: <CAF0myXbANfE5bqB1w_Z0xNFrL0Cn=8TOcXa0pRPfL258uPSmfw@mail.gmail.com>

Hi Matthias and other QGIS developers,

Merry Christmas and a Happy New Year :)
I've noticed a new "QGIS-Mobile" (simplified touch optimized interface
for QGIS - https://github.com/opengisch/QGIS-Mobile ) project. It's
very important to have a simple QGIS for Android tablets for me and my
friends, because currently we are using old and not touch-friendly
QGIS 2.0 for Android.
We can't use newer QGIS for Android releases because of these 2 bugs:
 http://hub.qgis.org/issues/11164
 http://hub.qgis.org/issues/11813
(also there are some other, not critical bugs, see
http://hub.qgis.org/projects/android-qgis/issues )

Matthias, could you tell us what is the status of new "QGIS-Mobile"
(https://github.com/opengisch/QGIS-Mobile ) project?
Could we test it on Android? I have some experience in compiling QT
and other Linux applications, so, if there are no apk file but you can
give some instructions how to build apk - please give something :)

Thanks for improving QGIS and other libre software,

Mantas

-- 
Prekyba kompiuteriais su Linux OS - http://tinklas.eu/prekyba
Naudokite laisv? Linux operacin? sistem? savo kompiuteryje -
http://baltix.akl.lt
Use Baltix GNU/Linux OS !

From cavallini at faunalia.it  Mon Dec 29 01:01:36 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 29 Dec 2014 10:01:36 +0100
Subject: [Qgis-developer] Wrong $length
In-Reply-To: <CAB28AshjY2pRp_xPdV=ApeKHuhRLwf57NnVzPL__gi0cb+c2og@mail.gmail.com>
References: <549AC180.10802@faunalia.it>
	<CAB28AshjY2pRp_xPdV=ApeKHuhRLwf57NnVzPL__gi0cb+c2og@mail.gmail.com>
Message-ID: <54A11870.1070806@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 24/12/2014 20:18, Nyall Dawson ha scritto:

> I can't test right now, but this sounds like possibly the column
> isn't large enough to hold the length values, and they are
> overflowing into negative values. Could this be the case?

nope: real, length 24, decimals 15, calculated results in the 10,000
order of magnitude.
anyway, the behaviour you describe would be a bug in itself IMHO.
all the best.
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlShGHAACgkQ/NedwLUzIr78PQCguAMhQYfFqA+msR1c0QnYgsWO
olwAnjjvQdZEElnHJbISi3VZQy88XQqP
=ngq9
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Mon Dec 29 01:09:40 2014
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 29 Dec 2014 10:09:40 +0100
Subject: [Qgis-developer] Error in new Metasearch
In-Reply-To: <CAFWXLWVjPN3Rjo0gbGQrmK-6895R9q8h3ZHs8b6oSTHr9YpzOQ@mail.gmail.com>
References: <54915AC0.60105@faunalia.it>	<CAFWXLWUy-cEGO4RSqAH86WdOv1+Kj0Btgq2wQjMdCuwoemX-xA@mail.gmail.com>	<5499C00A.1020206@faunalia.it>
	<CAFWXLWVjPN3Rjo0gbGQrmK-6895R9q8h3ZHs8b6oSTHr9YpzOQ@mail.gmail.com>
Message-ID: <54A11A54.80303@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 26/12/2014 16:15, Tom Kralidis ha scritto:
> Hi Paolo: master works for me.  Can you provide a usecase/workflow
> I can try to reproduce?

Hi Tom,
just tested again: searching for "land", global extent, on all default
servers returns no results (sometimes a timeout, sometimes an error
'NoneType' object has no attribute 'find' (for UNEP), sometimes just
blank.
Also "province" (a valid keyword, I believe) for the two Italian
servers returns nothing.
Can't see anything on the log.
Thanks!
- -- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iEYEARECAAYFAlShGlMACgkQ/NedwLUzIr5fzQCfbfil1xSAzDb4XOYZXFY0kNhk
Z5IAnitF0v3gWl0pKYJMoyJ2/NTpOUn1
=Hy7A
-----END PGP SIGNATURE-----

From rdmailings at duif.net  Mon Dec 29 01:29:49 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 29 Dec 2014 10:29:49 +0100
Subject: [Qgis-developer] Error in new Metasearch
In-Reply-To: <54A11A54.80303@faunalia.it>
References: <54915AC0.60105@faunalia.it>	<CAFWXLWUy-cEGO4RSqAH86WdOv1+Kj0Btgq2wQjMdCuwoemX-xA@mail.gmail.com>	<5499C00A.1020206@faunalia.it>	<CAFWXLWVjPN3Rjo0gbGQrmK-6895R9q8h3ZHs8b6oSTHr9YpzOQ@mail.gmail.com>
	<54A11A54.80303@faunalia.it>
Message-ID: <54A11F0D.4000400@duif.net>

On 29-12-14 10:09, Paolo Cavallini wrote:
> Il 26/12/2014 16:15, Tom Kralidis ha scritto:
>> Hi Paolo: master works for me.  Can you provide a usecase/workflow
>> I can try to reproduce?
> 
> Hi Tom,
> just tested again: searching for "land", global extent, on all default
> servers returns no results (sometimes a timeout, sometimes an error
> 'NoneType' object has no attribute 'find' (for UNEP), sometimes just
> blank.
> Also "province" (a valid keyword, I believe) for the two Italian
> servers returns nothing.
> Can't see anything on the log.

Hi Paolo,

with me it is also working fine. The plugin manager shows me:

Installed version: 0.3.2 (in /home/richard/.qgis2/python/plugins/MetaSearch)

But I'm on Linux here...

You can check what the plugin is sending to the service.
If you select the service (eg the RNDT one), after the results, you are
able to see the request- and response-XML
@TOM: mmm, if you do NOT have results, you cannot see the request either
because the button is disabled then...

You can do this request yourself, eg by using the 'POSTER'-plugin in
Firefox.

do a POST to the following url:
http://www.rndt.gov.it/RNDT/CSW

and this as Request:
<?xml version="1.0" ?>
<csw:GetRecords maxRecords="10" outputFormat="application/xml"
outputSchema="http://www.opengis.net/cat/csw/2.0.2" resultType="results"
service="CSW" version="2.0.2"
xmlns:csw="http://www.opengis.net/cat/csw/2.0.2"
xmlns:ogc="http://www.opengis.net/ogc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.opengis.net/cat/csw/2.0.2
http://schemas.opengis.net/csw/2.0.2/CSW-discovery.xsd">
	<csw:Query typeNames="csw:Record">
		<csw:ElementSetName>full</csw:ElementSetName>
		<csw:Constraint version="1.1.0">
			<ogc:Filter>
				<ogc:PropertyIsLike escapeChar="\" singleChar="_" wildCard="%">
					<ogc:PropertyName>csw:AnyText</ogc:PropertyName>
					<ogc:Literal>province</ogc:Literal>
				</ogc:PropertyIsLike>
			</ogc:Filter>
		</csw:Constraint>
	</csw:Query>
</csw:GetRecords>

But maybe it is a Windows only problem, will check that too...

Regards,

Richard


From geodrinx at gmail.com  Mon Dec 29 02:02:42 2014
From: geodrinx at gmail.com (Geo DrinX)
Date: Mon, 29 Dec 2014 11:02:42 +0100
Subject: [Qgis-developer] Problem inserting a new version of plugin
Message-ID: <CAFF9ZhsGTh9n5SKgK4gRxtOmhQmGd7uiFc6AsGKq3s5rTbj-Ng@mail.gmail.com>

Hello,


I am trying to insert a new version of  "rasmover" plugin, but I had errors
from the page:

 http://plugins.qgis.org/plugins/rasmover/version/add/


This is the ZIP  that I am inserting:

https://github.com/geodrinx/rasmover/archive/master.zip


The error I receive is:

"There wer errors reading plugin package (please check also your plugin's
metadata).
The 'experimental' flag in the form does not match the 'experimental' flag
in the plugin package metadata' "


and then (also after set the experiemntal flag) I had:

"This field is required"

without other indication.


Could someone help me ?

Thank you

Roberto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141229/3982c668/attachment.html>

From geodrinx at gmail.com  Mon Dec 29 02:15:28 2014
From: geodrinx at gmail.com (Geo DrinX)
Date: Mon, 29 Dec 2014 11:15:28 +0100
Subject: [Qgis-developer] Problem inserting a new version of plugin
In-Reply-To: <CA+3oMjtcWVqXO2KLD8k1XScmunUWfjqT8qSReeqQ8hwnFyu9eQ@mail.gmail.com>
References: <CAFF9ZhsGTh9n5SKgK4gRxtOmhQmGd7uiFc6AsGKq3s5rTbj-Ng@mail.gmail.com>
	<CA+3oMjtcWVqXO2KLD8k1XScmunUWfjqT8qSReeqQ8hwnFyu9eQ@mail.gmail.com>
Message-ID: <CAFF9ZhvR_Yg=u4T_sV1p7FKp+fZPC9PVgQSuqADEUeLJD=f_Bw@mail.gmail.com>

Great !    You have right !   I dropped all spaces around the "=" and it
works !!!

Thank you Werner !   And Happy New Year !!!!


Roberto

2014-12-29 11:07 GMT+01:00 Werner Macho <werner.macho at gmail.com>:

> Hi!
>
> I had a short look into my plugin and found
> experimental=True
>
> I am not sure but probably its the space in front and after the = sign?
> I guess it's worth a try ;)
>
> regards
> Werner
>
> On Mon, Dec 29, 2014 at 11:02 AM, Geo DrinX <geodrinx at gmail.com> wrote:
> > Hello,
> >
> >
> > I am trying to insert a new version of  "rasmover" plugin, but I had
> errors
> > from the page:
> >
> >  http://plugins.qgis.org/plugins/rasmover/version/add/
> >
> >
> > This is the ZIP  that I am inserting:
> >
> > https://github.com/geodrinx/rasmover/archive/master.zip
> >
> >
> > The error I receive is:
> >
> > "There wer errors reading plugin package (please check also your plugin's
> > metadata).
> > The 'experimental' flag in the form does not match the 'experimental'
> flag
> > in the plugin package metadata' "
> >
> >
> > and then (also after set the experiemntal flag) I had:
> >
> > "This field is required"
> >
> > without other indication.
> >
> >
> > Could someone help me ?
> >
> > Thank you
> >
> > Roberto
> >
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141229/55ec845a/attachment.html>

From werner.macho at gmail.com  Mon Dec 29 02:19:52 2014
From: werner.macho at gmail.com (Werner Macho)
Date: Mon, 29 Dec 2014 11:19:52 +0100
Subject: [Qgis-developer] Problem inserting a new version of plugin
In-Reply-To: <CAFF9ZhvR_Yg=u4T_sV1p7FKp+fZPC9PVgQSuqADEUeLJD=f_Bw@mail.gmail.com>
References: <CAFF9ZhsGTh9n5SKgK4gRxtOmhQmGd7uiFc6AsGKq3s5rTbj-Ng@mail.gmail.com>
	<CA+3oMjtcWVqXO2KLD8k1XScmunUWfjqT8qSReeqQ8hwnFyu9eQ@mail.gmail.com>
	<CAFF9ZhvR_Yg=u4T_sV1p7FKp+fZPC9PVgQSuqADEUeLJD=f_Bw@mail.gmail.com>
Message-ID: <CA+3oMjsejWQwdfKHe9fJf1_rDwMnnYZOtRkrT_pbNCjPc1_=pg@mail.gmail.com>

Glad that it worked!

Happy new year to you too!

regards
Werner

On Mon, Dec 29, 2014 at 11:15 AM, Geo DrinX <geodrinx at gmail.com> wrote:
> Great !    You have right !   I dropped all spaces around the "=" and it
> works !!!
>
> Thank you Werner !   And Happy New Year !!!!
>
>
> Roberto
>
> 2014-12-29 11:07 GMT+01:00 Werner Macho <werner.macho at gmail.com>:
>>
>> Hi!
>>
>> I had a short look into my plugin and found
>> experimental=True
>>
>> I am not sure but probably its the space in front and after the = sign?
>> I guess it's worth a try ;)
>>
>> regards
>> Werner
>>
>> On Mon, Dec 29, 2014 at 11:02 AM, Geo DrinX <geodrinx at gmail.com> wrote:
>> > Hello,
>> >
>> >
>> > I am trying to insert a new version of  "rasmover" plugin, but I had
>> > errors
>> > from the page:
>> >
>> >  http://plugins.qgis.org/plugins/rasmover/version/add/
>> >
>> >
>> > This is the ZIP  that I am inserting:
>> >
>> > https://github.com/geodrinx/rasmover/archive/master.zip
>> >
>> >
>> > The error I receive is:
>> >
>> > "There wer errors reading plugin package (please check also your
>> > plugin's
>> > metadata).
>> > The 'experimental' flag in the form does not match the 'experimental'
>> > flag
>> > in the plugin package metadata' "
>> >
>> >
>> > and then (also after set the experiemntal flag) I had:
>> >
>> > "This field is required"
>> >
>> > without other indication.
>> >
>> >
>> > Could someone help me ?
>> >
>> > Thank you
>> >
>> > Roberto
>> >
>> > _______________________________________________
>> > Qgis-developer mailing list
>> > Qgis-developer at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

From rdmailings at duif.net  Mon Dec 29 03:49:19 2014
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 29 Dec 2014 12:49:19 +0100
Subject: [Qgis-developer] Error in new Metasearch
In-Reply-To: <54A11F0D.4000400@duif.net>
References: <54915AC0.60105@faunalia.it>	<CAFWXLWUy-cEGO4RSqAH86WdOv1+Kj0Btgq2wQjMdCuwoemX-xA@mail.gmail.com>	<5499C00A.1020206@faunalia.it>	<CAFWXLWVjPN3Rjo0gbGQrmK-6895R9q8h3ZHs8b6oSTHr9YpzOQ@mail.gmail.com>	<54A11A54.80303@faunalia.it>
	<54A11F0D.4000400@duif.net>
Message-ID: <54A13FBF.4030309@duif.net>

On 29-12-14 10:29, Richard Duivenvoorde wrote:
> On 29-12-14 10:09, Paolo Cavallini wrote:
>> Il 26/12/2014 16:15, Tom Kralidis ha scritto:
>>> Hi Paolo: master works for me.  Can you provide a usecase/workflow
>>> I can try to reproduce?
>>
>> Hi Tom,
>> just tested again: searching for "land", global extent, on all default
>> servers returns no results (sometimes a timeout, sometimes an error
>> 'NoneType' object has no attribute 'find' (for UNEP), sometimes just
>> blank.
>> Also "province" (a valid keyword, I believe) for the two Italian
>> servers returns nothing.
>> Can't see anything on the log.
> 
> Hi Paolo,
> 
> with me it is also working fine. The plugin manager shows me:
> 
> Installed version: 0.3.2 (in /home/richard/.qgis2/python/plugins/MetaSearch)
> 
> But I'm on Linux here...

Ok, some further investigation:

- an excisting osgeo4w install, after upgrading the dev version,
starting in english is ok
- switching to italian gives you the old 'not all arguments converted'
error... (Python path at that moment is FIRST giving the .qgis2 and then
the core plugins path)
- removing the plugin from the .qgis2 directory then ends up in a
jinja2-not found error

- doing a full clean install of osgeo4w installation
- english again ok
- italian again the same error
- removing the plugin from the qgis2 directory (both places state that
they have 0.3.2 version??)
- italian WORKING !!!
- reinstalling the plugin from plugins.qgis.org (both stating 0.3.2):
problem is back again.

So though I cannot confirm Paolo's problem, I can get a working italian
version, BUT it looks like the version 0.3.2 on the plugin site is
another version then the 0.3.2 version that is part of core?

Regards,

Richard


From mp_surv at yahoo.com  Mon Dec 29 19:43:42 2014
From: mp_surv at yahoo.com (mp_surv)
Date: Mon, 30 Dec 2014 03:43:42 +0000
Subject: [Qgis-developer] =?iso-8859-1?q?FW=3A=09pmapper_users_request?=
Message-ID: <98E58D6B5F1B7D3C2F80D0817940D06F@smtp.synchrone.be>


 http://newinvestin.investin.pl/oygky/adiakdjopfevxwu.kvtwiojudmhcgskeifncbdxazkkkedq 



































  mp_surv at yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141230/891ea1a0/attachment.html>

From nyall.dawson at gmail.com  Tue Dec 30 19:21:10 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 31 Dec 2014 14:21:10 +1100
Subject: [Qgis-developer] Crowdfunding for a Christmas gift to QGIS -
 live layer effects!
In-Reply-To: <op.xrkt2ejll2i25i@bernd-terra-pc>
References: <CAB28AshgGb+-=OfCQLoZo2n6T7eQcoo9EiWKLe1N2PHJZ06PVA@mail.gmail.com>
	<op.xrkt2ejll2i25i@bernd-terra-pc>
Message-ID: <CAB28AsiNhe5PViSTS4nYcJiOSXeionuCoPc2wP3puROLmY4BDQ@mail.gmail.com>

On 28 Dec 2014 10:55 pm, "Bernd Vogelgesang" <bernd.vogelgesang at gmx.de>
wrote:
>
> Hi Nyall,
> I tried to donate, but my credit card was refused without any hints why.
Its still valid till 08/15. Any experience with that already or other ways
to contribute?
>

Hmmm - I can't explain that. I was hoping that by going through Kickstarter
all the payment handling would be easier!

Do you mind contacting Kickstarter support and see if they can help?

Thanks,
Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141231/d3019b6e/attachment.html>

From nyall.dawson at gmail.com  Tue Dec 30 19:25:04 2014
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 31 Dec 2014 14:25:04 +1100
Subject: [Qgis-developer] Crowdfunding for a Christmas gift to QGIS -
	live layer effects!
In-Reply-To: <CAB28AshgGb+-=OfCQLoZo2n6T7eQcoo9EiWKLe1N2PHJZ06PVA@mail.gmail.com>
References: <CAB28AshgGb+-=OfCQLoZo2n6T7eQcoo9EiWKLe1N2PHJZ06PVA@mail.gmail.com>
Message-ID: <CAB28AshKGXyuCGxeqDhq=bWuzaK_dGVrb7ibMTkXT-9bQ==j2w@mail.gmail.com>

On 25 Dec 2014 8:54 pm, "Nyall Dawson" <nyall.dawson at gmail.com> wrote:
>
> Hey all,
>
> Just letting everyone know about a new crowdfunding project I've just
launched:
>
>
https://www.kickstarter.com/projects/41633306/a-christmas-gift-for-qgis-live-layer-effects-for-q
>
> This project aims to add live layer effects to QGIS which can be
> applied to symbols. Some examples include live blur effects, drop
> shadows, and outer glows. Think Photoshop style layer effects but
> available directly within QGIS.

Many thanks to everyone who's donated so far!

I've just posted a video which demonstrates the operation of this feature
and the type of possibilities it will unlock:
http://www.youtube.com/watch?v=z7WjqqZKsBU

Please help spread the word if you'd like to see this land in QGIS!

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20141231/4e887679/attachment.html>

