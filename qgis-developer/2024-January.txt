From afernandez at odyhpc.com  Mon Jan  1 09:17:43 2024
From: afernandez at odyhpc.com (afernandez)
Date: Mon, 01 Jan 2024 17:17:43 +0000
Subject: [QGIS-Developer] Loading netCDF4 seems to crash QGISv3.34
Message-ID: <ff005df1e8c08.16e25d74a5711@odyhpc.com>

Hello,
I'm upgrading from v3.30 to 3.34. However, QGISv3.34 keeps crashing when 
trying to import the netCDF4 module (never had this issue with v3.30). More 
specifically, the log reads:
Fatal Python error: Segmentation fault
Current thread 0x0000ffff7dada020 (most recent call first):
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 1184 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 
in _import
File 
"/home/ubuntu/.local/lib/python3.10/site-packages/netCDF4/__init__.py", 
line 3 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 
in _import
File 
"/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/plugin/pingere.py", 
line 11 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 
in _import
File 
"/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/plugin/mainPlugin.py", 
line 12 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 
in _import
File 
"/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/__init__.py", 
line 13 in classFactory
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 423 
in _startPlugin
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 443 
in startPlugin
File "<string>", line 1 in <module>
Extension modules: PyQt5.QtCore, PyQt5.QtGui, PyQt5.QtWidgets, 
PyQt5.QtPrintSupport, PyQt5.Qsci, PyQt5.QtNetwork, PyQt5.QtMultimedia, 
PyQt5.QtXml, PyQt5.QtPositioning, PyQt5.QtSql, qgis._core, qgis._gui, 
netCDF4._netCDF4, numpy.core._multiarray_umath, 
numpy.core._multiarray_tests, numpy.linalg.lapack_lite, 
numpy.linalg._umath_linalg, numpy.fft._pocketfft_internal, 
numpy.random._common, numpy.random.bit_generator, 
numpy.random._bounded_integers, numpy.random._mt19937, numpy.random.mtrand, 
numpy.random._philox, numpy.random._pcg64, numpy.random._sfc64, 
numpy.random._generator, cftime._cftime (total: 28)
and the referenced line reads import netCDF4 as nc. I've tried 2 different 
plugins but both crash QGIS. Just for completeness, netCDF4 had previously 
installed:
$ Successfully installed cftime-1.6.3 netCDF4-1.6.5
Thanks and happy New Year.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240101/6d701d01/attachment-0001.htm>

From simon at sgroe.at  Mon Jan  1 22:34:49 2024
From: simon at sgroe.at (=?UTF-8?Q?Simon_Gr=C3=B6chenig?=)
Date: Tue, 02 Jan 2024 06:34:49 +0000
Subject: [QGIS-Developer] Short freezes during panning map
Message-ID: <1704176767615.3233052578.2463194107@sgroe.at>

Hi developers,

happy New Year!


A customer is working with a QGIS project (which I cannot share in public) 
with many layers. Panning/Moving to an location outside the current extent 
triggers short (0,5-1 sec) freezes.

Using the project with the old 3.16 version is working without freezes 
during panning the map.

Using the project with a current version (3.30 or greater) results in short 
freezes.

I would like to ask for some ideas on what could trigger those short 
freezes during panning the map? I guess reading the map data and painting 
the map is done in a background thread.

Best regards
Simon

From andreaerdna at libero.it  Tue Jan  2 05:58:14 2024
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 2 Jan 2024 14:58:14 +0100
Subject: [QGIS-Developer] Latest Plugin Version Timestamp
Message-ID: <9c825d2b-9937-4c03-aa0a-d18da07d10e2@libero.it>

> Andrea Giudiceandrea andreaerdna at libero.it
> Thu Dec 28 08:05:09 PST 2023

> Anyway the current displayed version format is not the intended one.
> Please see 
> https://github.com/qgis/QGIS-Django/pull/315#issuecomment-1869307984 and 
> https://github.com/qgis/QGIS-Django/pull/315#issuecomment-1869422268
> 
> It seems to me a cloudflare caching issue.

Hi Calvin,
a patch [1] has been recently submitted by Lova Andriarimalala in order 
to fix the issue.

Best regards.

Andrea


[1] https://github.com/qgis/QGIS-Django/pull/335

From contact at bchartier.net  Wed Jan  3 09:13:35 2024
From: contact at bchartier.net (Benjamin Chartier - Pro)
Date: Wed, 3 Jan 2024 18:13:35 +0100
Subject: [QGIS-Developer] Plugin python library installation
In-Reply-To: <mailman.25.1700078402.20732.qgis-developer@lists.osgeo.org>
References: <mailman.25.1700078402.20732.qgis-developer@lists.osgeo.org>
Message-ID: <009a4a8e-ed03-4960-ba6f-c091c5697b89@bchartier.net>

Hi,

I created a simple QGIS plugin in order to install non standard Python 
modules in QGIS:
https://github.com/bchartier/gecosat-gms-python-modules-installer

It is not supposed to work on any other OS than Windows. I created it 
for one a my client which only uses Windows.

The list of Python modules to be installed is there:
https://github.com/bchartier/gecosat-gms-python-modules-installer/blob/main/gms_install_python_modules/config/requirements.txt

This is experimental. I hope this could help.

Regards,

Benjamin

Le 15/11/2023 ? 21:00, qgis-developer-request at lists.osgeo.org a ?crit?:
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Wed, 15 Nov 2023 09:40:31 +0100
> From: Giacomo Titti<giacomotitti at gmail.com>
> To:qgis-developer at lists.osgeo.org
> Subject: [QGIS-Developer] Plugin python library installation
> Message-ID:
> 	<CAO7kFnFgR19x221Vg2bz9FpdRd6qJCLX4pXE5b1RHQivCv7MiQ at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Hi all,
> I would install python libraries when the plugin that I'm developing Is
> installed.
> I read something about the possibility to list the required libraries in
> the metadati.txt but I don't think there Is not an installer already
> available in QGIS for the libraries, Am I correct? Is there any way to do
> so? Has someone a code example for a solution?
> I'm trying to run a subprocess to install libraries via PIP but I think It
> Is not the proper way to do so.
> Thanks
> Best
>
> Giacomo
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:<http://lists.osgeo.org/pipermail/qgis-developer/attachments/20231115/b812c594/attachment-0001.htm>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240103/aa04ad9a/attachment.htm>

From strk at kbt.io  Wed Jan  3 11:24:14 2024
From: strk at kbt.io (Sandro Santilli)
Date: Wed, 3 Jan 2024 20:24:14 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS grant report: Improve test
 result handling on QGIS CI
In-Reply-To: <CAB28Asini_Tw9S36h_WnpTe1E2ZAxXETLUMsjXASOD4+idQKYQ@mail.gmail.com>
References: <CAB28AsjA_ZEYmKyXWiDwT-wTEJ2iOgFyB-b9WeWNGf+NXnLWSQ@mail.gmail.com>
 <CAL5Q673GOpJzeTicXk2xPvOOXi4fubHOMTUXysmJxye++0njGg@mail.gmail.com>
 <CAB28Asini_Tw9S36h_WnpTe1E2ZAxXETLUMsjXASOD4+idQKYQ@mail.gmail.com>
Message-ID: <ZZW0XpZ+RwHR4t9R@c19>

On Mon, Nov 27, 2023 at 05:09:07PM +1000, Nyall Dawson via QGIS-PSC wrote:
> On Mon, 27 Nov 2023, 4:56?pm Alessandro Pasotti, <apasotti at gmail.com> wrote:
> 
> > https://github.com/qgis/QGIS/pull/55417#issuecomment-1826995755
> > comment the instructions say:
> >
> > "The full test report (included comparison of rendered vs expected
> > images) can be found under the 'Checks' tab - 'QGIS tests',
> > 'Artifacts' section as test-results-5."
> >
> > But I couldn't find any test-results-5 in the artifacts section
> 
> That's caused by a limitation in GitHub API.

Would it be possible for that comment to contain instruction about how
to run that test locally ? Helping developers running failing tests
locally would reduce load on shared infrastructure.

--strk;

From strk at kbt.io  Wed Jan  3 11:28:12 2024
From: strk at kbt.io (Sandro Santilli)
Date: Wed, 3 Jan 2024 20:28:12 +0100
Subject: [QGIS-Developer] [Qgis-psc] Regular paid positions for PR
 reviews
In-Reply-To: <CAL5Q671bjaR-bRHZTwOyU8MSUiG==MSeY5ua-RvOevZz3Zs+-A@mail.gmail.com>
References: <CAL5Q673tpxVN-7DCUo_rxMH2EWUfaHS--hdLRiMsS+WjfcGKRw@mail.gmail.com>
 <CAB2Z92C0a=15FC-R++mfVytuCjPKQ0d1N0wex2vx4tYJiNc7yg@mail.gmail.com>
 <CAL5Q671bjaR-bRHZTwOyU8MSUiG==MSeY5ua-RvOevZz3Zs+-A@mail.gmail.com>
Message-ID: <ZZW1TJina/TCcjBH@c19>

On Fri, Dec 08, 2023 at 09:35:32AM +0100, Alessandro Pasotti via QGIS-PSC wrote:
> On Fri, Dec 8, 2023 at 9:22?AM Andreas Neumann <andreas at qgis.org> wrote:

> > Another idea is to merge the budgets for bug fixing and code reviewing
> 
> No, I would say we keep it separate, I agree that during the
> bug-fixing time the participants can spend their time doing both
> bugfixing and PR reviews provided that the reviews are oriented to
> bug fixing/chores and not to new features.

I agree on the advantage of having separated roles.

I expect the selected reviewers to be able to also take trust in
consideration when reviewing work in areas they are not too familiar
with.

--strk;

From nyall.dawson at gmail.com  Wed Jan  3 12:54:57 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 4 Jan 2024 06:54:57 +1000
Subject: [QGIS-Developer] [Qgis-psc] QGIS grant report: Improve test
 result handling on QGIS CI
In-Reply-To: <ZZW0XpZ+RwHR4t9R@c19>
References: <CAB28AsjA_ZEYmKyXWiDwT-wTEJ2iOgFyB-b9WeWNGf+NXnLWSQ@mail.gmail.com>
 <CAL5Q673GOpJzeTicXk2xPvOOXi4fubHOMTUXysmJxye++0njGg@mail.gmail.com>
 <CAB28Asini_Tw9S36h_WnpTe1E2ZAxXETLUMsjXASOD4+idQKYQ@mail.gmail.com>
 <ZZW0XpZ+RwHR4t9R@c19>
Message-ID: <CAB28AsgkxCb2efLZS12J1Pk6yGVttDJi4MvJHOcvh-zz1rOo3Q@mail.gmail.com>

On Thu, 4 Jan 2024, 5:23?am Sandro Santilli, <strk at kbt.io> wrote:

> On Mon, Nov 27, 2023 at 05:09:07PM +1000, Nyall Dawson via QGIS-PSC wrote:
> > On Mon, 27 Nov 2023, 4:56?pm Alessandro Pasotti, <apasotti at gmail.com>
> wrote:
> >
> > > https://github.com/qgis/QGIS/pull/55417#issuecomment-1826995755
> > > comment the instructions say:
> > >
> > > "The full test report (included comparison of rendered vs expected
> > > images) can be found under the 'Checks' tab - 'QGIS tests',
> > > 'Artifacts' section as test-results-5."
> > >
> > > But I couldn't find any test-results-5 in the artifacts section
> >
> > That's caused by a limitation in GitHub API.
>
> Would it be possible for that comment to contain instruction about how
> to run that test locally ? Helping developers running failing tests
> locally would reduce load on shared infrastructure.
>

Good idea, but unfortunately non trivial to execute ??

Obstacles are:

- We need the ctest name for the test so that associated ctest -R
"^testname\$" command can be determined to run just one test file.

- We don't have access to the ctest name for the current test being
executed during the test.  So we'd have to **hardcode** these into each
test individually. (There's unfortunately no fixed pattern used to specify
the ctest test name from the actual test source file name, so we can't use
qtest methods or macros which give us the source file name here)

- If we want to generate a command which will run just ONE function from
the test, then we hit against
https://gitlab.kitware.com/cmake/cmake/issues/20470 . (This could possibly
be worked around using a variation on https://stackoverflow.com/a/77084304)

So not impossible to do, but also a considerable amount of work. If someone
else takes this on I'm happy to review. ?

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240104/b61bff99/attachment.htm>

From mrvelle at gmail.com  Wed Jan  3 14:11:17 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Wed, 3 Jan 2024 23:11:17 +0100
Subject: [QGIS-Developer] QgsLayerTreeLayer source vs. QgsMapLayer source?
Message-ID: <CAKKm1vE8pc9K6O3gedWetMKJkYcvT2P7JeBbMi8WEAz-DQUxMQ@mail.gmail.com>

*QgsLayerTreeLayer*
https://qgis.org/pyqgis/3.34/core/QgsLayerTreeLayer.html
No setters or getters for source, but the constructor does take a source,
and the XML export has a "source" attribute.

*QgsMapLayer*
https://qgis.org/pyqgis/3.34/core/QgsMapLayer.html
Constructor takes a source, and there are several getters / setters for
source. The XML export has a "datasource" element.

*Isnt the source redundant? Or can they have different values? *
Are there situations where the QgsLayerTreeLayer source and the QgsMapLayer
source (for corresponding pairs) have different values?

It seems to me like the source should reside only in one of the two
objects, and it should be serialized only for that object, and not in two
places. Am I missing something?

*Is the following a bug?*
I have observed the following behavior. I have a Qgz file created with QGIS
v. 3.34, where the two source values for a layer are identical (as I would
expect, though it seems redundant to have two values in the first place). I
move the folder with the Qgz file and a Shapefile (using relative link) to
a different location.

Now I run a pyqgis standalone script, that simply opens the Qgz file, does
absolutely nothing, and write the data back to the Qgz file.


print(Qgis.version()) # '3.22.4-Bia?owie?a'
QgsApplication.setPrefixPath("/usr", True)
project = QgsProject.instance()
qgs = QgsApplication([], False)
qgs.initQgis()
project.read('test.qgz')

project.write('test.qgz')


Now the two source values are no longer the same. The QgsMapLayer source
has been changed to point to the old location of the Shapefile (before
moving the project).

I have not been able to make the same thing happen by opening and saving
using the QGIS GUI.

Relevant excerpts from XML after running script. The two paths are no
longer identical:
* <layer-tree-layer source="./shapefiles/skab/skab.shp" (...)>
* <datasource>../shapefiles/skab/skab.shp</datasource>

Sincerely, Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240103/b380dd10/attachment.htm>

From mrvelle at gmail.com  Thu Jan  4 01:08:45 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Thu, 4 Jan 2024 10:08:45 +0100
Subject: [QGIS-Developer] Details about the Grant Program?
Message-ID: <CAKKm1vFcx9V5iKsomV=YQZPFpq-MvFazoD4VsUT4imYuR2orNA@mail.gmail.com>

I keep seeing mentions of the grant program related to various fixes /
improvements. How does that work? I looked in the QGIS charter, but there
is nothing there. There must be a framework / set of regulations for this
grant program?

This is not because I plan to apply for any grants, and unfortunately also
not because I plan to fund any :) (except for small occasional donations).
I am simply very curious about how an open source project like QGIS is
somehow governed / steered.

Sincerely, Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240104/86d871c0/attachment.htm>

From anitagraser at gmx.at  Thu Jan  4 01:14:50 2024
From: anitagraser at gmx.at (Anita Graser)
Date: Thu, 4 Jan 2024 10:14:50 +0100 (GMT+01:00)
Subject: [QGIS-Developer] Details about the Grant Program?
In-Reply-To: <CAKKm1vFcx9V5iKsomV=YQZPFpq-MvFazoD4VsUT4imYuR2orNA@mail.gmail.com>
References: <CAKKm1vFcx9V5iKsomV=YQZPFpq-MvFazoD4VsUT4imYuR2orNA@mail.gmail.com>
Message-ID: <c12aa549-0a18-4e94-8657-1b7ab20d70f5@gmx.at>

Hi Thomas,

Please have a look at last years round for all the steps involved: https://github.com/qgis/PSC/issues/58

Regards
Anita
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240104/45d900f9/attachment.htm>

From mrvelle at gmail.com  Thu Jan  4 02:07:50 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Thu, 4 Jan 2024 11:07:50 +0100
Subject: [QGIS-Developer] Details about the Grant Program?
In-Reply-To: <c12aa549-0a18-4e94-8657-1b7ab20d70f5@gmx.at>
References: <CAKKm1vFcx9V5iKsomV=YQZPFpq-MvFazoD4VsUT4imYuR2orNA@mail.gmail.com>
 <c12aa549-0a18-4e94-8657-1b7ab20d70f5@gmx.at>
Message-ID: <CAKKm1vH8M0tRcnS28H7yL2DhfY4Npd=M2J96FOeR_Nb6vQXjfA@mail.gmail.com>

The information under "Submission form intro text" at
https://docs.google.com/document/d/1CNmSJxztrHrqLfillDH8v1zWaMzxFUyYSPT3sut55eQ/
is exactly what I was looking for. Thanks :)

When I google for the Grant Programme, I find plenty about actual proposals
and grants, but I was never able to find a description of the programme
itself.

I would suggest adding a page somewhere under the "Get Involved" section (
https://www.qgis.org/en/site/getinvolved/index.html). This page should
describe the more static information of the grant programme. It could be
simply taking all the static information from the google doc linked above.
That should be the top result on Google or "QGIS Grant Programme". And then
it could furthermore describe where to find the related news, updates,
discussions, votes, etc.

But thats just a suggestion :)

On Thu, Jan 4, 2024 at 10:20?AM Anita Graser via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi Thomas,
>
> Please have a look at last years round for all the steps involved:
> https://github.com/qgis/PSC/issues/58
>
> Regards
> Anita
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240104/ae4fd24b/attachment-0001.htm>

From senhor.neto at gmail.com  Thu Jan  4 02:16:00 2024
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 4 Jan 2024 10:16:00 +0000
Subject: [QGIS-Developer] QGIS freezes when saving table with AFTER INSERT
 or UPDATE
Message-ID: <a178b918-55da-41dc-b0d0-985d892dbfc7@mail.shortwave.com>

Sorry for the cross posting.

I have a table with the following trigger

CREATE TRIGGER tr_base_cont_trocos_ai AFTER
INSERT OR UPDATE ON base.cont_troco
FOR EACH STATEMENT
EXECUTE FUNCTION tr_gerar_outputs();

Now, the tr_gerar_outputs() takes some time to process, as it generates new tables and updates a few materialized views.

In QGIS, when I add or update one or more features and press save, I would expect it to be immediate, but it seems that QGIS hangs waiting for the function to finish before considering the save operation complete. If the function fails, it even prevent the feature to be commit.

Is this expected for a AFTER INSERT OR UPDATE trigger? Shouldn't PostgreSQL commit the changes, inform QGIS that the operation was successful and only then execute the trigger?

Thanks,

Alexandre Neto

Sent with Shortwave <https://www.shortwave.com?utm_medium=email&utm_content=signature&utm_source=c2VuaG9yLm5ldG9AZ21haWwuY29t>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240104/24231f4e/attachment.htm>

From senhor.neto at gmail.com  Thu Jan  4 03:59:05 2024
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 4 Jan 2024 11:59:05 +0000
Subject: [QGIS-Developer] [postgis-users] QGIS freezes when saving table
 with AFTER INSERT or UPDATE
In-Reply-To: <CAGAwT=1yPaAvEaXsY6JFh5=4ASG4vhvx0BowwU88pdaB1LG6Gw@mail.gmail.com>
References: <a178b918-55da-41dc-b0d0-985d892dbfc7@mail.shortwave.com>
 <CAGAwT=1yPaAvEaXsY6JFh5=4ASG4vhvx0BowwU88pdaB1LG6Gw@mail.gmail.com>
Message-ID: <9d338032-d6b3-492f-b70a-f638ffd29d68@mail.shortwave.com>

Uhmm... Thanks.

So there's no way to avoid hanging QGIS while the trigger function(s) is running. I am guessing that if I have another trigger function in a table that is automatically populated by the first trigger, it will also be executed in the QGIS transaction, right?

Thanks Again,

Alexandre Neto

Sent with Shortwave <https://www.shortwave.com?utm_medium=email&utm_content=signature&utm_source=c2VuaG9yLm5ldG9AZ21haWwuY29t>

On Thu Jan 4, 2024, 11:45 AM GMT, Nicolas Ribot <mailto:nicolas.ribot at gmail.com> wrote:
> Hello,
>
> A trigger is executed in a single transaction: "The execution of an AFTER trigger can be deferred to the end of the transaction, rather than the end of the statement, if it was defined as a constraint trigger. In all cases, a trigger is executed as part of the same transaction as the statement that triggered it, so if either the statement or the trigger causes an error, the effects of both will be rolled back." (https://www.postgresql.org/docs/16/trigger-definition.html <https://www.postgresql.org/docs/16/trigger-definition.html>)
>
> So QGIS has to wait for it to finish.
>
> Nicolas
>
> On Thu, 4 Jan 2024 at 11:16, Alexandre Neto via postgis-users <postgis-users at lists.osgeo.org <mailto:postgis-users at lists.osgeo.org>> wrote:
>> Sorry for the cross posting.
>>
>> I have a table with the following trigger
>>
>> CREATE TRIGGER tr_base_cont_trocos_ai AFTER
>> INSERT OR UPDATE ON base.cont_troco
>> FOR EACH STATEMENT
>> EXECUTE FUNCTION tr_gerar_outputs();
>>
>> Now, the tr_gerar_outputs() takes some time to process, as it generates new tables and updates a few materialized views.
>>
>> In QGIS, when I add or update one or more features and press save, I would expect it to be immediate, but it seems that QGIS hangs waiting for the function to finish before considering the save operation complete. If the function fails, it even prevent the feature to be commit.
>>
>> Is this expected for a AFTER INSERT OR UPDATE trigger? Shouldn't PostgreSQL commit the changes, inform QGIS that the operation was successful and only then execute the trigger?
>>
>> Thanks,
>>
>> Alexandre Neto
>>
>> Sent with Shortwave <https://www.shortwave.com?utm_medium=email&utm_content=signature&utm_source=c2VuaG9yLm5ldG9AZ21haWwuY29t>
>> _______________________________________________
>> postgis-users mailing list
>> postgis-users at lists.osgeo.org <mailto:postgis-users at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/postgis-users <https://lists.osgeo.org/mailman/listinfo/postgis-users>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240104/a2fd744b/attachment.htm>

From johannes.kroeger at wheregroup.com  Thu Jan  4 07:47:15 2024
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=C3=B6ger_=28WhereGroup=29?=)
Date: Thu, 4 Jan 2024 16:47:15 +0100
Subject: [QGIS-Developer] Changing attributes of a newly created feature in
 Python form init code
Message-ID: <e34a1900-2650-40bf-a3bd-27528d36d99b@wheregroup.com>

Hey guys,

I feel really dumb and I guess I am missing some basic concept...:

  * I have a layer with two attributes: "text" (string) and "int" (integer).
  * I used drag'n'drop form design to have a form with just the "text"
    attribute in it.
  * I added Python Init Code:

```
from functools import partial

def on_ok(layer, feature):
 ??? field_idx = layer.fields().indexOf("int")
 ??? attribute_changed = layer.changeAttributeValue(feature.id(), 
field_idx, 12345)
 ??? if not attribute_changed:
 ??????? raise Exception("Attribute value could not be changed!")

def my_form_open(dialog, layer, feature):
 ??? ok_button = dialog.findChild(QPushButton)
 ??? ok_button.clicked.connect(partial(on_ok, layer, feature))
```

So the form does not show an input widget for the "int" field. But when 
pressing OK, the code should change the edited feature's "int" value to 
12345.

This works if I edit existing features.

But if I create a new feature, the "int" value will be empty/NULL 
instead of 12345.

Any pointers on how to properly update a new feature's attribute fields, 
that exist on a layer but are not shown the user with the QGIS' widgets 
in the attribute form?

Cheers, Hannes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240104/f56f16fd/attachment.htm>

From lova at kartoza.com  Fri Jan  5 04:28:13 2024
From: lova at kartoza.com (Lova Andriarimalala)
Date: Fri, 5 Jan 2024 12:28:13 +0000
Subject: [QGIS-Developer] QGIS Full Stack Web Developer Report
In-Reply-To: <AM8P190MB0865FED1D56723C8EB89BEA2FB94A@AM8P190MB0865.EURP190.PROD.OUTLOOK.COM>
References: <CAMLC-sCj14+7cPvJG07O4P=FPQMp29L7N8T69tdGcBsfSLoDFA@mail.gmail.com>
 <DU2PR02MB75580AD6955C69CCF8CD72BCFB81A@DU2PR02MB7558.eurprd02.prod.outlook.com>
 <AM8P190MB08650CBDC3CB38A6C0DF202AFB8AA@AM8P190MB0865.EURP190.PROD.OUTLOOK.COM>
 <AM8P190MB0865EFA43EDFF7553825A346FB93A@AM8P190MB0865.EURP190.PROD.OUTLOOK.COM>
 <AM8P190MB0865FED1D56723C8EB89BEA2FB94A@AM8P190MB0865.EURP190.PROD.OUTLOOK.COM>
Message-ID: <DBAP190MB0872D9E0590C51833C7BCB2AFB662@DBAP190MB0872.EURP190.PROD.OUTLOOK.COM>

Hello everyone and Happy New Year,

I've included a report below which details the progress made this week and last week on the development of the plugin and feed website.

PRs open:

  1.  QGIS-Django (plugins.qgis.org):

?         Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

?         Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>

?         Add token based authentication feature<https://github.com/qgis/QGIS-Django/pull/326>: some improvements have been made according to the latest comments

?         Add an aggregate stats to the plugin manager's view<https://github.com/qgis/QGIS-Django/pull/331>


  1.  QGIS-Feed (feed.qgis.org):

?         Add a field to specify reviewers when submitting a new feed item<https://github.com/qgis/qgis-feed/pull/62>

PRs merged:

  1.  QGIS-Django (plugins.qgis.org):

?         Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>

?         Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>

?         Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>

?         Keep approve status when updating style<https://github.com/qgis/QGIS-Django/pull/329>

?         Disable matomo cookies tracking<https://github.com/qgis/QGIS-Django/pull/333>


  1.  QGIS-Feed (feed.qgis.org):

?         Add characters counter, improve invalid form handling<https://github.com/qgis/qgis-feed/pull/59>

?         Upgrade to Django 4 to fix OL map<https://github.com/qgis/qgis-feed/pull/61>

?         Show a raw version of the feeds<https://github.com/qgis/qgis-feed/pull/60>

Still working on:

  *   No image preview for models and 3D models and they are not downloadable<https://github.com/qgis/QGIS-Django/issues/298>

Recently, I have closed some issues that seem resolved to me. Please feel free to discuss them if you have any concerns.

Have a great weekend,
Lova

?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>





From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 22 December 2023 at 3:08?PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone,

I've included a report below which details the progress made this week on the development of the plugin and feed website.

PRs open:

  1.  QGIS-Django (plugins.qgis.org):

?         Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>

?         Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>

?         Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

?         Hide login button when logged out<https://github.com/qgis/QGIS-Django/pull/324>

?         Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>

?         Add token based authentication feature<https://github.com/qgis/QGIS-Django/pull/326>: some improvements have been made according to the latest comments

?         Add command to organize old plugin version packages<https://github.com/qgis/QGIS-Django/pull/328>

?         Keep approve status when updating style<https://github.com/qgis/QGIS-Django/pull/329>

?         Add an aggregate stats to the plugin manager's view<https://github.com/qgis/QGIS-Django/pull/331>

?         Disable matomo cookies tracking<https://github.com/qgis/QGIS-Django/pull/333>


  1.  QGIS-Feed (feed.qgis.org):

?         Add characters counter, improve invalid form handling<https://github.com/qgis/qgis-feed/pull/59>

?         Upgrade to Django 4 to fix OL map<https://github.com/qgis/qgis-feed/pull/61>

?         Show a raw version of the feeds<https://github.com/qgis/qgis-feed/pull/60>

?         Add a field to specify reviewers when submitting a new feed item<https://github.com/qgis/qgis-feed/pull/62>

PR merged for QGIS-Feed (feed.qgis.org):

?         Configure makefile, update README for docker usage<https://github.com/qgis/qgis-feed/pull/63>

Just to inform you, the QEP<https://github.com/qgis/QGIS-Enhancement-Proposals/issues/279> concerning the license requirements is now closed.

Wishing you a joyful holiday season and a fantastic New Year!

Lova
?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>





From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 15 December 2023 at 7:23?PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone,
I've included below a report detailing this week's progress on developing the plugin and the feed website.

PRs open:

?         Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>

?         Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>

?         Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

?         Hide login button when logged out<https://github.com/qgis/QGIS-Django/pull/324>

?         Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>

?         Add token based authentication feature<https://github.com/qgis/QGIS-Django/pull/326>: some changes have been made to this PR. Please find the updated description at: https://github.com/qgis/QGIS-Django/pull/326#issuecomment-1853678895

?         Add command to organize old plugin version packages<https://github.com/qgis/QGIS-Django/pull/328>

?         Keep approve status when updating style<https://github.com/qgis/QGIS-Django/pull/329>

?         Add an aggregate stats to the plugin manager's view<https://github.com/qgis/QGIS-Django/pull/331>

?         Add characters counter, improve invalid form handling<https://github.com/qgis/qgis-feed/pull/59>

Still working on:

  *   Expose somewhere the xml feed address in the QGIS feed admin backend<https://github.com/qgis/qgis-feed/issues/58>

Just to inform you, the QEP<https://github.com/qgis/QGIS-Enhancement-Proposals/issues/279> concerning the license requirements is currently open. The deadline for submitting comments and making a decision about it is scheduled for 22 December 2023.

Have a great weekend,
Lova



From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 8 December 2023 at 3:48 PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone,
I've included below a report detailing the progress made on developing the plugin and the feed website for this week.
Please note that the QEP<https://github.com/qgis/QGIS-Enhancement-Proposals/issues/279> concerning the license requirements is currently open. The deadline for submitting comments and making a decision about it is scheduled for 22 December 2023.
PRs open:

  *   Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>
  *   Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>
  *   Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>
  *   Hide login button when logged out<https://github.com/qgis/QGIS-Django/pull/324>
  *   Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>
  *   Add token based authentication feature<https://github.com/qgis/QGIS-Django/pull/326>
  *   Add command to organize old plugin version packages<https://github.com/qgis/QGIS-Django/pull/328>
  *   Keep approve status when updating style<https://github.com/qgis/QGIS-Django/pull/329>
  *   Add characters counter, improve invalid form handling<https://github.com/qgis/qgis-feed/pull/59>

PR merged:

  *   Fix errors in GH action coverage test<https://github.com/qgis/QGIS-Django/pull/323>

Still working on:

  *   Design/Approach for updating site branding to match feed.qgis.org<https://github.com/qgis/QGIS-Django/issues/319>. I?ve made a proposed approach for it. Please don't hesitate to share your comments or ask any questions you may have.
  *   Testing model upload on plugins.qgis.org

Have a great weekend,
Lova

?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>




From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 1 December 2023 at 4:20 PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone,
Please find below a report detailing the progress made on the development of the plugin website for this week.
QEP Open:

  *   License requirements for plugins on plugins.qgis.org<https://github.com/qgis/QGIS-Enhancement-Proposals/issues/279>

PRs open:

  *   Fix errors in GH action coverage test<https://github.com/qgis/QGIS-Django/pull/323>
  *   Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>
  *   Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>
  *   Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

PR merged:

  *   Add links to plugin details tabs<https://github.com/qgis/QGIS-Django/pull/317>
  *   Making license file not required for now<https://github.com/qgis/QGIS-Django/pull/314>

Still working on:

  *   Hide logout button when logged out<https://github.com/qgis/QGIS-Django/issues/318>

Have a great weekend,
Lova

?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>



From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 24 November 2023 at 4:06 PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: QGIS Full Stack Web Developer Report
Hello everyone,

Please find below a report detailing the progress made on the development of the feed and plugins website for this week.
I'm writing in a new email object because of the ongoing discussion about the plugin LICENSE requirements and the management changes: https://lists.osgeo.org/pipermail/qgis-developer/2023-November/066257.html

PRs open:

  *   Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

     *   This PR is based on an existing PR: Upgrade stacks and docker compose #257<https://github.com/qgis/QGIS-Django/pull/257>
     *   Upgrade Django package according to this issue: Upgrade project to Django 4/Python 3.7+? #54<https://github.com/qgis/QGIS-Django/issues/54>
PR merged:

  *   Add support for changing the plugin name<https://github.com/qgis/QGIS-Django/pull/302>
  *   Add command to fix none in search results<https://github.com/qgis/QGIS-Django/pull/304>
  *   Show more records, records items per page<https://github.com/qgis/QGIS-Django/pull/306>
  *   Specify tag page title and other plugin page title<https://github.com/qgis/QGIS-Django/pull/308>
  *   Make LICENSE file as required in the plugin package<https://github.com/qgis/QGIS-Django/pull/309>
  *   Fix license requirement<https://github.com/qgis/QGIS-Django/pull/311>
  *   Remove lat&long filters on the home page<https://github.com/qgis/qgis-feed/pull/53>
Still working on:

  *   No image preview for models and 3D models and they are not downloadable<https://github.com/qgis/QGIS-Django/issues/298>

     *   Each creator that has an issue with the model was notified.
Have a great weekend,
Lova

--


[cid:ii_lpcmfwoi0]



Lova Andriarimalala

QGIS Full Stack Developer

Visit http://kartoza.com<http://kartoza.com/> to find out about open source:

* Desktop GIS programming services

* Geospatial web development

* GIS Training

* Consulting Services

Office: +261(0)34 09 524 73<tel:+261340952473>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240105/d93a11ff/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 16340 bytes
Desc: image.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240105/d93a11ff/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 6123 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240105/d93a11ff/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 419 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240105/d93a11ff/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 6123 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240105/d93a11ff/attachment-0003.jpg>

From eliska at drdecibel.cz  Fri Jan  5 07:45:06 2024
From: eliska at drdecibel.cz (=?UTF-8?B?RWxpxaFrYSBaZXp1bG92w6E=?=)
Date: Fri, 5 Jan 2024 16:45:06 +0100
Subject: [QGIS-Developer] QGIS not working
Message-ID: <e1fbf45f-bfbb-4a02-bddd-d9ca46ae2a0c@drdecibel.cz>

Hello,


I have a problem with QGIS, it's not working when I want to load data. 
What should I do?


Eli?ka Zezula


From bas at rdgland.com  Fri Jan  5 08:12:37 2024
From: bas at rdgland.com (Sebastian Gutwein)
Date: Fri, 5 Jan 2024 11:12:37 -0500
Subject: [QGIS-Developer] QGIS not working
In-Reply-To: <e1fbf45f-bfbb-4a02-bddd-d9ca46ae2a0c@drdecibel.cz>
References: <e1fbf45f-bfbb-4a02-bddd-d9ca46ae2a0c@drdecibel.cz>
Message-ID: <CAED_52ra__k7HKNJan7Mz4X=7diF5_Mi5ObjvB5X86Sqy+9rzQ@mail.gmail.com>

Eli?ka,
Sorry to hear about your troubles.
First I would try asking on the QGIS User group list instead of this one.
qgis-user at lists.osgeo.org
But for anyone to be able to help you they will need a lot more information
such as: what kind of data you are trying to load and how you are trying to
load it and what you have tried to do.
Thanks
-Bas

On Fri, Jan 5, 2024 at 11:06?AM Eli?ka Zezulov? via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hello,
>
>
> I have a problem with QGIS, it's not working when I want to load data.
> What should I do?
>
>
> Eli?ka Zezula
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
___________________________
Sebastian "Bas* " Gutwein
*rhymes with Josh

Regenerative Design Group
1 Chevalier Ave
Greenfield, Ma 01301
Web: regenerativedesigngroup.com
(631) 241-1018

*Look close, think big, make change. *
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240105/9753b977/attachment.htm>

From selma at kartoza.com  Fri Jan  5 08:19:42 2024
From: selma at kartoza.com (Selma Vidimlic)
Date: Fri, 5 Jan 2024 17:19:42 +0100
Subject: [QGIS-Developer] QGIS Documentation Writer
In-Reply-To: <CALarpe6AxofhCC1CPx4-5hOsaWdRc3Hb+GCooZ4jNiAzT6L2pA@mail.gmail.com>
References: <CALarpe7r1o22ejnty1yxbfu5f03E8o+OS2M9igLtMs+nKZ=woA@mail.gmail.com>
 <CALarpe5N8e+-daXHPaec3Y0gXhu1TCtb513uSuYq0ZA1i6vNdA@mail.gmail.com>
 <CALarpe7AB9Vb8j_QudqPmNmdJrfC6KcevWBZ5f7W9murWKZwHQ@mail.gmail.com>
 <CALarpe6AxofhCC1CPx4-5hOsaWdRc3Hb+GCooZ4jNiAzT6L2pA@mail.gmail.com>
Message-ID: <CALarpe6EWK8adxhnJdPgX8jQasVnZQxLf4h4CQkPXPqiAYhwDg@mail.gmail.com>

Hello all and happy new year,

Documentation writer report:

Merged pull requests:

   - https://github.com/qgis/QGIS-Documentation/pull/8713
   - https://github.com/qgis/QGIS-Documentation/pull/8721
   - https://github.com/qgis/QGIS-Documentation/pull/8723

Open pull requests:

   - https://github.com/qgis/QGIS-Documentation/pull/8764
   - https://github.com/qgis/QGIS-Documentation/pull/8765

Working on:

   - https://github.com/qgis/QGIS-Documentation/issues/7545
   - Georeferencer chapter

Have a nice weekend,
Selma.

On Fri, 15 Dec 2023 at 16:51, Selma Vidimlic <selma at kartoza.com> wrote:

> Hello all,
>
> Here is the report for this week:
>
> Merged pull requests:
>
>    - https://github.com/qgis/QGIS-Documentation/pull/8701
>    - https://github.com/qgis/QGIS-Documentation/pull/8702
>    - https://github.com/qgis/QGIS-Documentation/pull/8708
>
> Open pull requests:
>
>    - https://github.com/qgis/QGIS-Documentation/pull/8713
>
> Still working on:
>
>    - https://github.com/qgis/QGIS-Documentation/issues/7568
>    - https://github.com/qgis/QGIS-Documentation/issues/7545
>
>
> Have a great weekend,
> Selma.
>
>
> On Fri, 8 Dec 2023 at 17:19, Selma Vidimlic <selma at kartoza.com> wrote:
>
>> Hello all,
>>
>> Merged pull requests from this week:
>>
>>    - 3D Tiles Chapter
>>    <https://github.com/qgis/QGIS-Documentation/pull/8657> with two
>>    commits from this week:
>>
>>
>>    1. fixes after review and update opening_data file
>>    <https://github.com/qgis/QGIS-Documentation/pull/8657/commits/f6fe29198c5a21096e1927dcbf3716f8350d2dbc>
>>    2. cross references
>>    <https://github.com/qgis/QGIS-Documentation/pull/8657/commits/303b7ae487faacb5959d1b535f3bedf500767ee5>
>>
>>
>>    - Identify tool update
>>    <https://github.com/qgis/QGIS-Documentation/pull/8692>
>>
>> Open pull requests from this week:
>>
>>    - Topology checker update
>>    <https://github.com/qgis/QGIS-Documentation/pull/8701>
>>    - Auto-open options for exported layout
>>    <https://github.com/qgis/QGIS-Documentation/pull/8702>
>>
>> Regards,
>> Selma.
>>
>> On Fri, 24 Nov 2023 at 19:48, Selma Vidimlic <selma at kartoza.com> wrote:
>>
>>> Hi all,
>>>
>>> Merged PR from this week:
>>>
>>>    - Vector tiles update
>>>    <https://github.com/qgis/QGIS-Documentation/pull/8639>
>>>
>>> Open PR:
>>>
>>>    - 3d tiles <https://github.com/qgis/QGIS-Documentation/pull/8657> -
>>>    so, here I need to additionally describe properties (symbology, 3d view,
>>>    elevation menu), also the second section now is called *Scene, *but
>>>    I believe this will be changed. I'm looking forward to your feedback
>>>    (review).
>>>
>>> Still working on:
>>>
>>>    - geometry expressions
>>>    <https://github.com/qgis/QGIS-Documentation/issues/8547>
>>>
>>> Have a nice weekend,
>>> Selma.
>>>
>>> On Fri, 17 Nov 2023 at 17:15, Selma Vidimlic <selma at kartoza.com> wrote:
>>>
>>>> Hello everyone,
>>>>
>>>> This week (and last week at the OSGeo meeting Vienna) I was working on
>>>> documentation for 3D Tiles in QGIS. I used blog posts from Lutra Consulting
>>>> and North Road websites as the main source for the documentation, also I
>>>> followed video tutorials and Martin Dobias explained 3D tiles to me while
>>>> we were in Vienna. I'm planning to create a draft version in my GitHub
>>>> repository (I will send you a link) so you can check it out. This is my
>>>> first time creating a whole new chapter for documentation so I'm trying to
>>>> be as detailed as possible. I also prepared screenshots for other chapters
>>>> updates related to 3D tiles/Scene (browser, data source management etc.).
>>>>
>>>> PR from this week:
>>>> Vector tiles properties
>>>> <https://github.com/qgis/QGIS-Documentation/pull/8639>
>>>> In this PR I updated chapter with Source and Rendering properties, but
>>>> I wasn't able to recreate OpenStreetMap landuse layer with all rules (like
>>>> image that is in the docs now), so if someone has advice on how to do that,
>>>> please let me know. I was using tiles from
>>>> https://cloud.maptiler.com/tiles/.
>>>>
>>>> Have a nice weekend,
>>>> Selma.
>>>>
>>>> --
>>>> Selma Vidimlic Husic
>>>> QGIS Documentation Writer
>>>> Visit http://kartoza.com to find out about open source:
>>>> * Desktop GIS programming services
>>>> * Geospatial web development
>>>> * GIS Training
>>>> * Consulting Services
>>>> Phone: +387 61 933 651
>>>>
>>>
>>>
>>> --
>>> Selma Vidimlic Husic
>>> QGIS Documentation Writer
>>> Visit http://kartoza.com to find out about open source:
>>> * Desktop GIS programming services
>>> * Geospatial web development
>>> * GIS Training
>>> * Consulting Services
>>> Phone: +387 61 933 651
>>>
>>
>>
>> --
>> Selma Vidimlic Husic
>> QGIS Documentation Writer
>> Visit http://kartoza.com to find out about open source:
>> * Desktop GIS programming services
>> * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Phone: +387 61 933 651
>>
>
>
> --
> Selma Vidimlic Husic
> QGIS Documentation Writer
> Visit http://kartoza.com to find out about open source:
> * Desktop GIS programming services
> * Geospatial web development
> * GIS Training
> * Consulting Services
> Phone: +387 61 933 651
>


-- 
Selma Vidimlic Husic
QGIS Documentation Writer
Visit http://kartoza.com to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Phone: +387 61 933 651
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240105/93a285ed/attachment-0001.htm>

From afernandez at odyhpc.com  Mon Jan  8 07:30:14 2024
From: afernandez at odyhpc.com (afernandez)
Date: Mon, 08 Jan 2024 15:30:14 +0000
Subject: [QGIS-Developer] Loading netCDF4 seems to crash QGISv3.34
References: <ff005df1e8c08.16e25d74a5711@odyhpc.com>
Message-ID: <2216f4dd6e213.69d2c69675be9@odyhpc.com>

Hello QGIS Developers,
This problem still persists with v3.34 and it's easily reproducible by simply opening the python console and typing:
import netCDF4 as nc
I opened a new ticket QGIS crashes when importing netCDF4 ? Issue #55787 ? qgis/QGIS (github.com) <https://github.com/qgis/QGIS/issues/55787> . In the meantime, I'll also try installing v3.32 and checking whether the crash also happens or not.
Thank you. 

afernandez via QGIS-Developer wrote:
Hello,
I'm upgrading from v3.30 to 3.34. However, QGISv3.34 keeps crashing when trying to import the netCDF4 module (never had this issue with v3.30). More specifically, the log reads:
Fatal Python error: Segmentation fault
Current thread 0x0000ffff7dada020 (most recent call first):
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 1184 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 in _import
File "/home/ubuntu/.local/lib/python3.10/site-packages/netCDF4/__init__.py", line 3 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 in _import
File "/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/plugin/pingere.py", line 11 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 in _import
File "/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/plugin/mainPlugin.py", line 12 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 in _import
File "/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/__init__.py", line 13 in classFactory
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 423 in _startPlugin
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 443 in startPlugin
File "<string>", line 1 in <module>
Extension modules: PyQt5.QtCore, PyQt5.QtGui, PyQt5.QtWidgets, PyQt5.QtPrintSupport, PyQt5.Qsci, PyQt5.QtNetwork, PyQt5.QtMultimedia, PyQt5.QtXml, PyQt5.QtPositioning, PyQt5.QtSql, qgis._core, qgis._gui, netCDF4._netCDF4, numpy.core._multiarray_umath, numpy.core._multiarray_tests, numpy.linalg.lapack_lite, numpy.linalg._umath_linalg, numpy.fft._pocketfft_internal, numpy.random._common, numpy.random.bit_generator, numpy.random._bounded_integers, numpy.random._mt19937, numpy.random.mtrand, numpy.random._philox, numpy.random._pcg64, numpy.random._sfc64, numpy.random._generator, cftime._cftime (total: 28)
and the referenced line reads import netCDF4 as nc. I've tried 2 different plugins but both crash QGIS. Just for completeness, netCDF4 had previously installed:
$ Successfully installed cftime-1.6.3 netCDF4-1.6.5
Thanks and happy New Year.
Hello,
I'm upgrading from v3.30 to 3.34. However, QGISv3.34 keeps crashing when trying to import the netCDF4 module (never had this issue with v3.30). More specifically, the log reads:
Fatal Python error: Segmentation fault
Current thread 0x0000ffff7dada020 (most recent call first):
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 1184 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 in _import
File "/home/ubuntu/.local/lib/python3.10/site-packages/netCDF4/__init__.py", line 3 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 in _import
File "/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/plugin/pingere.py", line 11 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 in _import
File "/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/plugin/mainPlugin.py", line 12 in <module>
File "<frozen importlib._bootstrap>", line 241 in _call_with_frames_removed
File "<frozen importlib._bootstrap_external>", line 883 in exec_module
File "<frozen importlib._bootstrap>", line 688 in _load_unlocked
File "<frozen importlib._bootstrap>", line 1006 in _find_and_load_unlocked
File "<frozen importlib._bootstrap>", line 1027 in _find_and_load
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 888 in _import
File "/home/ubuntu/.local/share/QGIS/QGIS3/profiles/default/python/plugins/TABULA/__init__.py", line 13 in classFactory
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 423 in _startPlugin
File "/opt/atrium/QGIS/build-master/output/python/qgis/utils.py", line 443 in startPlugin
File "<string>", line 1 in <module>
Extension modules: PyQt5.QtCore, PyQt5.QtGui, PyQt5.QtWidgets, PyQt5.QtPrintSupport, PyQt5.Qsci, PyQt5.QtNetwork, PyQt5.QtMultimedia, PyQt5.QtXml, PyQt5.QtPositioning, PyQt5.QtSql, qgis._core, qgis._gui, netCDF4._netCDF4, numpy.core._multiarray_umath, numpy.core._multiarray_tests, numpy.linalg.lapack_lite, numpy.linalg._umath_linalg, numpy.fft._pocketfft_internal, numpy.random._common, numpy.random.bit_generator, numpy.random._bounded_integers, numpy.random._mt19937, numpy.random.mtrand, numpy.random._philox, numpy.random._pcg64, numpy.random._sfc64, numpy.random._generator, cftime._cftime (total: 28)
and the referenced line reads import netCDF4 as nc. I've tried 2 different plugins but both crash QGIS. Just for completeness, netCDF4 had previously installed:
$ Successfully installed cftime-1.6.3 netCDF4-1.6.5
Thanks and happy New Year.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240108/fb4af60f/attachment.htm>

From johannes.kroeger at wheregroup.com  Wed Jan 10 01:48:24 2024
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=C3=B6ger_=28WhereGroup=29?=)
Date: Wed, 10 Jan 2024 10:48:24 +0100
Subject: [QGIS-Developer] Changing attributes of a newly created feature
 in Python form init code
In-Reply-To: <e34a1900-2650-40bf-a3bd-27528d36d99b@wheregroup.com>
References: <e34a1900-2650-40bf-a3bd-27528d36d99b@wheregroup.com>
Message-ID: <bcf10a9d-f6bc-4afc-b67c-d9c3bfdad5d7@wheregroup.com>

Still stumped with this, now cross-posted to 
https://gis.stackexchange.com/questions/474014/changing-attributes-of-a-newly-created-feature-in-python-form-init-code

I noticed that the both the `id(feature)` is always different when I 
look at it in either function which suggests the object got copied (by 
the `partial()` call?). The same is true for `feature.id()`. As a hack I 
tried using a global instead of passing the feature to `on_ok()`. 
[insert confused emoji here]

Probably I am blind to something really basic.

Cheers, Hannes

On 04.01.24 16:47, Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
>
> Hey guys,
>
> I feel really dumb and I guess I am missing some basic concept...:
>
>   * I have a layer with two attributes: "text" (string) and "int"
>     (integer).
>   * I used drag'n'drop form design to have a form with just the "text"
>     attribute in it.
>   * I added Python Init Code:
>
> ```
> from functools import partial
>
> def on_ok(layer, feature):
> ??? field_idx = layer.fields().indexOf("int")
> ??? attribute_changed = layer.changeAttributeValue(feature.id(), 
> field_idx, 12345)
> ??? if not attribute_changed:
> ??????? raise Exception("Attribute value could not be changed!")
>
> def my_form_open(dialog, layer, feature):
> ??? ok_button = dialog.findChild(QPushButton)
> ??? ok_button.clicked.connect(partial(on_ok, layer, feature))
> ```
>
> So the form does not show an input widget for the "int" field. But 
> when pressing OK, the code should change the edited feature's "int" 
> value to 12345.
>
> This works if I edit existing features.
>
> But if I create a new feature, the "int" value will be empty/NULL 
> instead of 12345.
>
> Any pointers on how to properly update a new feature's attribute 
> fields, that exist on a layer but are not shown the user with the 
> QGIS' widgets in the attribute form?
>
> Cheers, Hannes
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240110/781a5cbc/attachment.htm>

From broniewski at a-a.lu  Wed Jan 10 06:40:32 2024
From: broniewski at a-a.lu (Frank Broniewski)
Date: Wed, 10 Jan 2024 14:40:32 +0000
Subject: [QGIS-Developer] Changing attributes of a newly created feature
 in Python form init code
In-Reply-To: <e34a1900-2650-40bf-a3bd-27528d36d99b@wheregroup.com>
References: <e34a1900-2650-40bf-a3bd-27528d36d99b@wheregroup.com>
Message-ID: <GV1PR05MB11313C46EB340DF6E3D3939AFFB692@GV1PR05MB11313.eurprd05.prod.outlook.com>

Hi Hannes,

i can unfortunately only confirm that this does not work, one can't seem to be able to set any field value (tried "text" as well). If you have the feature you can usually just do `feature["int"] = 12345` or feature.setAtrtribute("int", 12345), but that does not have any effect on this particular feature - and it does not raise an error either.

I checked the feature's field map, also the value in "text", all seems right. One thing I noticed is that all newly created features in my test had the same feature.id() of -9223372036854775808 which seems rather high, usually, unsaved features have negative values, but counting downwards from 0 - at least from my last experience with PostGIS layers ... mayby memory layers behave different here.

I wonder if the feature you get from the event is the real feature that is added to the layer or some kind of read-only copy of it ...

Gr??e
Frank
________________________________
Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> im Auftrag von Johannes Kr?ger (WhereGroup) via QGIS-Developer <qgis-developer at lists.osgeo.org>
Gesendet: Donnerstag, 4. Januar 2024 16:47
An: qgis-developer <qgis-developer at lists.osgeo.org>
Betreff: [QGIS-Developer] Changing attributes of a newly created feature in Python form init code


Hey guys,

I feel really dumb and I guess I am missing some basic concept...:

  *   I have a layer with two attributes: "text" (string) and "int" (integer).
  *   I used drag'n'drop form design to have a form with just the "text" attribute in it.
  *   I added Python Init Code:

```
from functools import partial

def on_ok(layer, feature):
    field_idx = layer.fields().indexOf("int")
    attribute_changed = layer.changeAttributeValue(feature.id(), field_idx, 12345)
    if not attribute_changed:
        raise Exception("Attribute value could not be changed!")

def my_form_open(dialog, layer, feature):
    ok_button = dialog.findChild(QPushButton)
    ok_button.clicked.connect(partial(on_ok, layer, feature))
```

So the form does not show an input widget for the "int" field. But when pressing OK, the code should change the edited feature's "int" value to 12345.

This works if I edit existing features.

But if I create a new feature, the "int" value will be empty/NULL instead of 12345.

Any pointers on how to properly update a new feature's attribute fields, that exist on a layer but are not shown the user with the QGIS' widgets in the attribute form?

Cheers, Hannes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240110/713c2491/attachment.htm>

From uclaros at gmail.com  Wed Jan 10 12:06:04 2024
From: uclaros at gmail.com (Stefanos Natsis)
Date: Wed, 10 Jan 2024 22:06:04 +0200
Subject: [QGIS-Developer] Changing attributes of a newly created feature
 in Python form init code
Message-ID: <CADBCwLaXcpBfYBiOCqNVbPnn=c0pmgLBq+qTU_LSFz55Fdv=5Q@mail.gmail.com>

Hi Hannes

This looks like an XY problem case!

If your actual goal is to:
> Any pointers on how to properly update a new feature's attribute fields,
> that exist on a layer but are not shown the user with the QGIS' widgets
> in the attribute form?

then you simply need to set a Default Value for the field widget but not
add it to the drag and drop form designer. :)

If you really want to do this using form init code, you cannot do it using
the form's feature object as it is actually copied by QgsAttributeForm
before being saved to the layer.
You could connect to QgsAttributeForm::featureSaved() signal instead, that
emits the actual feature, but apparently the my_form_open function is
called twice: once when the form is loaded and once after OK is clicked
(bug??), so that would create the connection twice!
To avoid this you could connect to QgsAttributeForm::featureSaved() only
after OK is clicked!

Best
Stefanos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240110/66776eee/attachment.htm>

From joana at doublebyte.net  Thu Jan 11 03:59:05 2024
From: joana at doublebyte.net (Joana Simoes)
Date: Thu, 11 Jan 2024 11:59:05 +0000
Subject: [QGIS-Developer] =?utf-8?q?Announcing_the_OGC_-_ASF_-_OSGeo_Code?=
 =?utf-8?b?IFNwcmludCDwn5qA?=
Message-ID: <609e535f-0cba-44aa-95cf-8d3e5db6a424@doublebyte.net>

*Good day,* *
**
*

*The Open Geospatial Consortium (OGC) is hosting a code sprint along 
with OSGeo and the Apache Software Foundation, from the 26th through the 
28th of February. The focus of the sprint will be standards for 
geospatial information, and their support in various Free and Open 
Source projects. OSGeo projects can register their interest in 
participating through the sprint wiki page: 
<https://github.com/opengeospatial/developer-events/wiki/2024-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint#which-osgeo-projects-are-going-to-participate 
<https://github.com/opengeospatial/developer-events/wiki/2024-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint#which-osgeo-projects-are-going-to-participate>>*

*

A Code Sprint is a three day hybrid event, where dozens of 
developers?from around the world come together to code and share their 
ideas?regarding sharing geospatial information. Even if you are not 
a?developer, there are lots of ways to be involved in the code 
sprint,?without actually writing code; e.g.: testing, documentation, 
issues.?As in previous code sprints, this sprint will include a mentor 
stream targeted at newcomers, which includes an onboarding day with lots 
of introductory tutorials.


The sprint will run on an hybrid format, with the face to face component 
taking place in the beautiful city of ?vora (Portugal), a UNESCO World 
Heritage Site, which will become the European capital of culture in 
2027: <https://en.wikipedia.org/wiki/%C3%89vora 
<https://en.wikipedia.org/wiki/%C3%89vora>>


*You can find more information about the sprint, including a 
registration link in the

code sprint website: <https://developer.ogc.org/sprints/23/ 
<https://developer.ogc.org/sprints/23/>> *


*We thank our hosts and catering supporters

<https://github.com/opengeospatial/developer-events/wiki/2024-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint#hosted-by 
<https://github.com/opengeospatial/developer-events/wiki/2024-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint#hosted-by>>. 
Some sponsoring opportunities are still available, for those who wish to 
contribute: 
<https://github.com/opengeospatial/developer-events/wiki/2024-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint#call-for-sponsors-mega 
<https://github.com/opengeospatial/developer-events/wiki/2024-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint#call-for-sponsors-mega>>


Hope to see you at the code sprint,


All the Best,


Joana

*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240111/a0b9a832/attachment.htm>

From johannes.kroeger at wheregroup.com  Fri Jan 12 05:04:18 2024
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=C3=B6ger_=28WhereGroup=29?=)
Date: Fri, 12 Jan 2024 14:04:18 +0100
Subject: [QGIS-Developer] Changing attributes of a newly created feature
 in Python form init code
In-Reply-To: <CADBCwLaXcpBfYBiOCqNVbPnn=c0pmgLBq+qTU_LSFz55Fdv=5Q@mail.gmail.com>
References: <CADBCwLaXcpBfYBiOCqNVbPnn=c0pmgLBq+qTU_LSFz55Fdv=5Q@mail.gmail.com>
Message-ID: <25dbcaf3-bcce-49ca-ab7a-19ea3b8230de@wheregroup.com>

It kinda was...

I have custom widgets on another tab of the form for letting the user 
set up some things and I calculate values for attributes from that. So 
it is not solvable with default values. Very good idea though, I wish it 
would have been such an easy solution :))

When I posted also did not realise that it is not just about newly added 
features but different for:

a) A newly added feature
b) A feature was added but not yet committed to the data source
c) An existing feature

In the end I solved it by looking at the feature ID differently:

```
 ??? feature_id = feature.id()
 ??? if feature_id == -9223372036854775808:
 ??????? # this feature was newly added in this "form session"
 ??????? edit_buffer = layer.editBuffer()
 ??????? added_feats = edit_buffer.addedFeatures()
 ??????? # get the id of the most recently added feature in the edit buffer
 ??????? feature_id = min(list(added_feats.keys()))
 ??? # otherwise we are looking at an existing feature, committed or not
 ??? ... # layer.changeAttributeValue(feature_id, ...)
```

This works fine even if multiple forms are opened at the same time and 
OK is pressed on them in a random order.

I wonder if there is a named constant(?) or enum for that 
-9223372036854775808 (-2**63) somewhere. It is used by any new feature 
at that point in time.
https://github.com/qgis/QGIS/blob/a3413a9a9365fbd52ba6b0e2a6b9e55acc634cd4/tests/src/python/test_qgsvectorlayereditbuffer.py#L470 
says "ID is NULL (-9223372036854775808)" but I bet there is a better way 
in PyQt of saying "minimal INT64 value" instead of pasting the full 
value into the code like I did?

Many thanks to Stefanos and Frank for their thoughts!
I had cross-posted to 
https://gis.stackexchange.com/questions/474014/changing-attributes-of-a-newly-created-feature-in-python-form-init-code 
and the user Matt gave me pointers into the right direction.

Feels super ugly and probably not the intended way to do this kind of 
thing but WORKSFORME, done ;)

Cheers, Hannes

On 10.01.24 21:06, Stefanos Natsis via QGIS-Developer wrote:
> Hi Hannes
>
> This looks like an XY problem case!
>
> If your actual goal is to:
> > Any pointers on how to properly update a new feature's attribute 
> fields,
> > that exist on a layer but are not shown the user with the QGIS' widgets
> > in the attribute form?
>
> then you simply need to set a Default Value for the field widget but 
> not add it to the drag and drop form designer. :)
>
> If you really want to do this using form init code, you cannot do it 
> using the form's feature object as it is actually copied 
> by?QgsAttributeForm before being saved to the layer.
> You could connect to QgsAttributeForm::featureSaved() signal instead, 
> that emits the actual feature, but apparently the my_form_open 
> function is called twice: once when the form is loaded and once after 
> OK is clicked (bug??), so that would create the connection twice!
> To avoid this you could connect to QgsAttributeForm::featureSaved() 
> only after OK is clicked!
>
> Best
> Stefanos
>

From lova at kartoza.com  Fri Jan 12 04:38:49 2024
From: lova at kartoza.com (Lova Andriarimalala)
Date: Fri, 12 Jan 2024 12:38:49 +0000
Subject: [QGIS-Developer] QGIS Full Stack Web Developer Report
In-Reply-To: <DBAP190MB0872D9E0590C51833C7BCB2AFB662@DBAP190MB0872.EURP190.PROD.OUTLOOK.COM>
References: <CAMLC-sCj14+7cPvJG07O4P=FPQMp29L7N8T69tdGcBsfSLoDFA@mail.gmail.com>
 <DU2PR02MB75580AD6955C69CCF8CD72BCFB81A@DU2PR02MB7558.eurprd02.prod.outlook.com>
 <AM8P190MB08650CBDC3CB38A6C0DF202AFB8AA@AM8P190MB0865.EURP190.PROD.OUTLOOK.COM>
 <AM8P190MB0865EFA43EDFF7553825A346FB93A@AM8P190MB0865.EURP190.PROD.OUTLOOK.COM>
 <AM8P190MB0865FED1D56723C8EB89BEA2FB94A@AM8P190MB0865.EURP190.PROD.OUTLOOK.COM>
 <DBAP190MB0872D9E0590C51833C7BCB2AFB662@DBAP190MB0872.EURP190.PROD.OUTLOOK.COM>
Message-ID: <AM8P190MB086504C2064C4C3968278C9CFB6F2@AM8P190MB0865.EURP190.PROD.OUTLOOK.COM>

Hello everyone,

Please find below a report which details the progress made this week on the development of the plugin and feed website. Please note that the current report is an extension of the previous one.

PRs open:

  *   Split media and static folders<https://github.com/qgis/QGIS-Django/pull/340>
  *   Preserve non-ASCII characters when downloading a zip<https://github.com/qgis/QGIS-Django/pull/342>
  *   Add dbbackups service to docker-compose<https://github.com/qgis/qgis-feed/pull/66>

Still working on:

  *   Improve security for each server<https://github.com/qgis/qgis-feed/issues/65>

Have a great weekend,
Lova

From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 5 January 2024 at 3:28?PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone and Happy New Year,

I've included a report below which details the progress made this week and last week on the development of the plugin and feed website.

PRs open:

  1.  QGIS-Django (plugins.qgis.org):

Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>

Add token based authentication feature<https://github.com/qgis/QGIS-Django/pull/326>: some improvements have been made according to the latest comments

Add an aggregate stats to the plugin manager's view<https://github.com/qgis/QGIS-Django/pull/331>


  1.  QGIS-Feed (feed.qgis.org):

Add a field to specify reviewers when submitting a new feed item<https://github.com/qgis/qgis-feed/pull/62>

PRs merged:

  1.  QGIS-Django (plugins.qgis.org):

Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>

Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>

Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>

Keep approve status when updating style<https://github.com/qgis/QGIS-Django/pull/329>

Disable matomo cookies tracking<https://github.com/qgis/QGIS-Django/pull/333>


  1.  QGIS-Feed (feed.qgis.org):

Add characters counter, improve invalid form handling<https://github.com/qgis/qgis-feed/pull/59>

Upgrade to Django 4 to fix OL map<https://github.com/qgis/qgis-feed/pull/61>

Show a raw version of the feeds<https://github.com/qgis/qgis-feed/pull/60>

Still working on:

  *   No image preview for models and 3D models and they are not downloadable<https://github.com/qgis/QGIS-Django/issues/298>

Recently, I have closed some issues that seem resolved to me. Please feel free to discuss them if you have any concerns.

Have a great weekend,
Lova

?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>





From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 22 December 2023 at 3:08?PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone,

I've included a report below which details the progress made this week on the development of the plugin and feed website.

PRs open:

  1.  QGIS-Django (plugins.qgis.org):

Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>

Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>

Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

Hide login button when logged out<https://github.com/qgis/QGIS-Django/pull/324>

Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>

Add token based authentication feature<https://github.com/qgis/QGIS-Django/pull/326>: some improvements have been made according to the latest comments

Add command to organize old plugin version packages<https://github.com/qgis/QGIS-Django/pull/328>

Keep approve status when updating style<https://github.com/qgis/QGIS-Django/pull/329>

Add an aggregate stats to the plugin manager's view<https://github.com/qgis/QGIS-Django/pull/331>

Disable matomo cookies tracking<https://github.com/qgis/QGIS-Django/pull/333>


  1.  QGIS-Feed (feed.qgis.org):

Add characters counter, improve invalid form handling<https://github.com/qgis/qgis-feed/pull/59>

Upgrade to Django 4 to fix OL map<https://github.com/qgis/qgis-feed/pull/61>

Show a raw version of the feeds<https://github.com/qgis/qgis-feed/pull/60>

Add a field to specify reviewers when submitting a new feed item<https://github.com/qgis/qgis-feed/pull/62>

PR merged for QGIS-Feed (feed.qgis.org):

Configure makefile, update README for docker usage<https://github.com/qgis/qgis-feed/pull/63>

Just to inform you, the QEP<https://github.com/qgis/QGIS-Enhancement-Proposals/issues/279> concerning the license requirements is now closed.

Wishing you a joyful holiday season and a fantastic New Year!

Lova
?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>





From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 15 December 2023 at 7:23?PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone,
I've included below a report detailing this week's progress on developing the plugin and the feed website.

PRs open:

Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>

Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>

Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

Hide login button when logged out<https://github.com/qgis/QGIS-Django/pull/324>

Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>

Add token based authentication feature<https://github.com/qgis/QGIS-Django/pull/326>: some changes have been made to this PR. Please find the updated description at: https://github.com/qgis/QGIS-Django/pull/326#issuecomment-1853678895

Add command to organize old plugin version packages<https://github.com/qgis/QGIS-Django/pull/328>

Keep approve status when updating style<https://github.com/qgis/QGIS-Django/pull/329>

Add an aggregate stats to the plugin manager's view<https://github.com/qgis/QGIS-Django/pull/331>

Add characters counter, improve invalid form handling<https://github.com/qgis/qgis-feed/pull/59>

Still working on:

  *   Expose somewhere the xml feed address in the QGIS feed admin backend<https://github.com/qgis/qgis-feed/issues/58>

Just to inform you, the QEP<https://github.com/qgis/QGIS-Enhancement-Proposals/issues/279> concerning the license requirements is currently open. The deadline for submitting comments and making a decision about it is scheduled for 22 December 2023.

Have a great weekend,
Lova



From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 8 December 2023 at 3:48 PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone,
I've included below a report detailing the progress made on developing the plugin and the feed website for this week.
Please note that the QEP<https://github.com/qgis/QGIS-Enhancement-Proposals/issues/279> concerning the license requirements is currently open. The deadline for submitting comments and making a decision about it is scheduled for 22 December 2023.
PRs open:

  *   Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>
  *   Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>
  *   Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>
  *   Hide login button when logged out<https://github.com/qgis/QGIS-Django/pull/324>
  *   Show plugins with patch versions in plugin list<https://github.com/qgis/QGIS-Django/pull/325>
  *   Add token based authentication feature<https://github.com/qgis/QGIS-Django/pull/326>
  *   Add command to organize old plugin version packages<https://github.com/qgis/QGIS-Django/pull/328>
  *   Keep approve status when updating style<https://github.com/qgis/QGIS-Django/pull/329>
  *   Add characters counter, improve invalid form handling<https://github.com/qgis/qgis-feed/pull/59>

PR merged:

  *   Fix errors in GH action coverage test<https://github.com/qgis/QGIS-Django/pull/323>

Still working on:

  *   Design/Approach for updating site branding to match feed.qgis.org<https://github.com/qgis/QGIS-Django/issues/319>. I?ve made a proposed approach for it. Please don't hesitate to share your comments or ask any questions you may have.
  *   Testing model upload on plugins.qgis.org

Have a great weekend,
Lova

?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>




From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 1 December 2023 at 4:20 PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: QGIS Full Stack Web Developer Report
Hello everyone,
Please find below a report detailing the progress made on the development of the plugin website for this week.
QEP Open:

  *   License requirements for plugins on plugins.qgis.org<https://github.com/qgis/QGIS-Enhancement-Proposals/issues/279>

PRs open:

  *   Fix errors in GH action coverage test<https://github.com/qgis/QGIS-Django/pull/323>
  *   Add maintainer field to plugin update<https://github.com/qgis/QGIS-Django/pull/316>
  *   Fix different displayed date<https://github.com/qgis/QGIS-Django/pull/315>
  *   Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

PR merged:

  *   Add links to plugin details tabs<https://github.com/qgis/QGIS-Django/pull/317>
  *   Making license file not required for now<https://github.com/qgis/QGIS-Django/pull/314>

Still working on:

  *   Hide logout button when logged out<https://github.com/qgis/QGIS-Django/issues/318>

Have a great weekend,
Lova

?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>



From: Lova Andriarimalala <lova at kartoza.com>
Date: Friday, 24 November 2023 at 4:06 PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: QGIS Full Stack Web Developer Report
Hello everyone,

Please find below a report detailing the progress made on the development of the feed and plugins website for this week.
I'm writing in a new email object because of the ongoing discussion about the plugin LICENSE requirements and the management changes: https://lists.osgeo.org/pipermail/qgis-developer/2023-November/066257.html

PRs open:

  *   Upgrade project to Django 3/Python 3.7<https://github.com/qgis/QGIS-Django/pull/310>

     *   This PR is based on an existing PR: Upgrade stacks and docker compose #257<https://github.com/qgis/QGIS-Django/pull/257>
     *   Upgrade Django package according to this issue: Upgrade project to Django 4/Python 3.7+? #54<https://github.com/qgis/QGIS-Django/issues/54>
PR merged:

  *   Add support for changing the plugin name<https://github.com/qgis/QGIS-Django/pull/302>
  *   Add command to fix none in search results<https://github.com/qgis/QGIS-Django/pull/304>
  *   Show more records, records items per page<https://github.com/qgis/QGIS-Django/pull/306>
  *   Specify tag page title and other plugin page title<https://github.com/qgis/QGIS-Django/pull/308>
  *   Make LICENSE file as required in the plugin package<https://github.com/qgis/QGIS-Django/pull/309>
  *   Fix license requirement<https://github.com/qgis/QGIS-Django/pull/311>
  *   Remove lat&long filters on the home page<https://github.com/qgis/qgis-feed/pull/53>
Still working on:

  *   No image preview for models and 3D models and they are not downloadable<https://github.com/qgis/QGIS-Django/issues/298>

     *   Each creator that has an issue with the model was notified.
Have a great weekend,
Lova

--


[cid:ii_lpcmfwoi0]



Lova Andriarimalala

QGIS Full Stack Developer

Visit http://kartoza.com<http://kartoza.com/> to find out about open source:

* Desktop GIS programming services

* Geospatial web development

* GIS Training

* Consulting Services

Office: +261(0)34 09 524 73<tel:+261340952473>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/96d9f668/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 16340 bytes
Desc: image.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/96d9f668/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 6123 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/96d9f668/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 419 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/96d9f668/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 419 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/96d9f668/attachment-0005.png>

From rdmailings at duif.net  Fri Jan 12 06:06:45 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 12 Jan 2024 15:06:45 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
Message-ID: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>

Hi Devs,

I was contacted by a company who after upgrading their db and QGIS did NOT see the points anymore.

Note that 'all worked' when they used QGIS 3.10 (and an older mysql db)
After a MySQL database upgrade, QGIS 3.10 was not able to connect anymore (apparently TLS issues), so they have to use 3.28 or higher.

A small export loaded in my local db was OK in QGIS.

So in a online meeting, sharing their screen I tried:

- opening the db with ogrinfo: all data is visible (POINT(.....)) showing correct coords and attributes
- loading the table (25000 records) in QGIS: data: EPSG:31370 project EPSG:31370 :
	- attribute table shows all records
	- mapcanvas empty!
	- able to 'zoom to' records (Belgium), but NO points visible/selectable
- creating a tiny table with only id and geom column of 3 records: mapcanvas emtpy
- export the loaded (but invisible) layer to a geopackage: points AND attributes VISIBLE!
- loading the data in dbeaver: all data is shown in the spatial tab

There was an encoding issue when exporting to gpkg, but we tried to create a smaller table (very few columns): nothing.

Anybody familiar with QGIS and Mysql has an idea what this not showing of any point/geom could be?

Any hint appreciated, I plan to try to get a connection to the db myself, but hoping I just miss something obvious...

Regards,

Richard Duivenvoorde

From aurelie.tisson at bastaprint.com  Fri Jan 12 08:11:29 2024
From: aurelie.tisson at bastaprint.com (=?utf-8?Q?Aur=C3=A9lie_Tisson_=28BastaPrint=29?=)
Date: Fri, 12 Jan 2024 17:11:29 +0100 (CET)
Subject: [QGIS-Developer] Shapefile not correctly shown in some areas
In-Reply-To: <876347355.684582394.1705075726058.JavaMail.root@zimbra60-e10.priv.proxad.net>
Message-ID: <1902750373.684597130.1705075889654.JavaMail.root@zimbra60-e10.priv.proxad.net>






Hello, 
To make things short, I have a device which gathers data in the fields (hundreds of data per second), and gets the position through a GPS (every second). 

Between 2 GPS positions, I triangulate the positions, so the points are aligned. 

Sometimes, the device "writes" the data so it spends some time doing so, and it does not gather anything, so I have a "hole". 



Then, to visualize the data, I create a Shapefile, only with Points. 



In one Shapefile, I had some strange points: points that appear on the map, but are not clickable and disappear when I zoom in too much. I attach the files ; they can be downloaded here, too: https://www.grosfichiers.com/sjNC3yx7Kvi 


For instance, in the file I join, the position number 1613 and further are problematic. If my viewing area includes the point 1612, I see all the points, well aligned, but I cannot click points 1613 and further. 

If I zoom in, or if I move the area and the point 1612 is out of the area, I see nothing anymore. 

The code to generate the Shapefile has a systematic approach: it takes the points one after the other, and writes their position by incrementing the values. So I suspect there is no bug. 
In a previous test, the same problem occured BEFORE point 1217 : I could only see the first points if the area included point 1217. 


Questions: 
- can anyone try to see my shapefile and confirm the problem? 

- does this bug ring a bell to anyone? 
- what may be the problem? 



Thank you very much! 

My versions are detailled below. I just updated to the LTR to try to solve the problem, but the bug exists with the 3.22.7-Bia?owie?a and 3.28.14-Firenze versions. 




Aur?lie 





	
Version de QGIS 	
3.28.14-Firenze 	
R?vision du code 	
b09131c512 
	
Version de Qt 	
5.15.3 
	
Version de Python 	
3.9.5 
	
Version de GDAL/OGR 	
3.8.2 
	
Version de Proj 	
9.3.1 
	
Version de la base de donn?es du registre EPSG 	
v10.098 (2023-11-24) 
	
Version de GEOS 	
3.12.1-CAPI-1.18.1 
	
Version de SQLite 	
3.41.1 
	
Version de PDAL 	
2.6.0 
	
Version du client PostgreSQL 	
unknown 
	
Version de SpatiaLite 	
5.1.0 
	
Version de QWT 	
6.1.6 
	
Version de QScintilla2 	
2.13.4 
	
Version de l'OS 	
Windows 10 Version 2009 
	
	
	
	

	
Extensions Python actives 
	
QGeoloGIS 	
1.9.0 
	
db_manager 	
0.1.20 
	
grassprovider 	
2.12.99 
	
MetaSearch 	
0.3.6 
	
processing 	
2.12.99 
	
sagaprovider 	
2.12.99 




======= Previously ========= 



	
Version de QGIS 	
3.22.7-Bia?owie?a 	
R?vision du code 	
5a65627a 
	
Version de Qt 	
5.15.3 
	
Version de Python 	
3.9.5 
	
Version de GDAL/OGR 	
3.4.3 
	
Version de Proj 	
9.0.0 
	
Version de la base de donn?es du registre EPSG 	
v10.054 (2022-02-13) 
	
Version de GEOS 	
3.10.2-CAPI-1.16.0 
	
Version de SQLite 	
3.38.1 
	
Version de PDAL 	
2.3.0 
	
Version du client PostgreSQL 	
13.0 
	
Version de SpatiaLite 	
5.0.1 
	
Version de QWT 	
6.1.6 
	
Version de QScintilla2 	
2.13.1 
	
Version de l'OS 	
Windows 10 Version 2009 
	
	
	
	

	


	


	


	


	


	


	





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/ffac5388/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 20240110-153600.prj
Type: application/octet-stream
Size: 453 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/ffac5388/attachment-0004.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 20240110-153600.cpg
Type: application/octet-stream
Size: 5 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/ffac5388/attachment-0005.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 20240110-153600.shp
Type: application/octet-stream
Size: 56128 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/ffac5388/attachment-0006.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 20240110-153600.shx
Type: application/octet-stream
Size: 16108 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/ffac5388/attachment-0007.obj>

From selma at kartoza.com  Fri Jan 12 08:51:25 2024
From: selma at kartoza.com (Selma Vidimlic)
Date: Fri, 12 Jan 2024 17:51:25 +0100
Subject: [QGIS-Developer] QGIS Documentation Writer
In-Reply-To: <CALarpe6EWK8adxhnJdPgX8jQasVnZQxLf4h4CQkPXPqiAYhwDg@mail.gmail.com>
References: <CALarpe7r1o22ejnty1yxbfu5f03E8o+OS2M9igLtMs+nKZ=woA@mail.gmail.com>
 <CALarpe5N8e+-daXHPaec3Y0gXhu1TCtb513uSuYq0ZA1i6vNdA@mail.gmail.com>
 <CALarpe7AB9Vb8j_QudqPmNmdJrfC6KcevWBZ5f7W9murWKZwHQ@mail.gmail.com>
 <CALarpe6AxofhCC1CPx4-5hOsaWdRc3Hb+GCooZ4jNiAzT6L2pA@mail.gmail.com>
 <CALarpe6EWK8adxhnJdPgX8jQasVnZQxLf4h4CQkPXPqiAYhwDg@mail.gmail.com>
Message-ID: <CALarpe53HNh0RwD5XF2r3t3n2F7DuhBDiW29N+G4KxjMv+hjbQ@mail.gmail.com>

Hello all,
Here is the report for this week.

Open pull requests:
Raster image symbol <https://github.com/qgis/QGIS-Documentation/pull/8779>
MS SQL Server connection details
<https://github.com/qgis/QGIS-Documentation/pull/8780> - this PR fixes
three issues:

   - #6443 <https://github.com/qgis/QGIS-Documentation/issues/6443>
   - #6644 <https://github.com/qgis/QGIS-Documentation/issues/6644>
   - #3063 <https://github.com/qgis/QGIS-Documentation/issues/3063>

Style database <https://github.com/qgis/QGIS-Documentation/pull/8765> -
still open and it needs some fixes after review
Raster identify results
<https://github.com/qgis/QGIS-Documentation/pull/8764> - also still open,
but requires some bigger changes in the Working with raster chapter
<https://docs.qgis.org/testing/en/docs/user_manual/working_with_raster/index.html>

This week, I dedicated some time to investigating older issues, attempting
to determine whether they still need to remain open. During this process, I
came across the issue titled Add a check box in the sublayer selection
dialog to control whether system and internal tables should be shown
<https://github.com/qgis/QGIS-Documentation/issues/6908>, it seems like a
small change (in documentation), but I'm having trouble finding the
"sublayer selection dialog." If someone could explain what that means and
how I can access it, I would appreciate it.

Have a nice weekend,
Selma.


On Fri, 5 Jan 2024 at 17:19, Selma Vidimlic <selma at kartoza.com> wrote:

> Hello all and happy new year,
>
> Documentation writer report:
>
> Merged pull requests:
>
>    - https://github.com/qgis/QGIS-Documentation/pull/8713
>    - https://github.com/qgis/QGIS-Documentation/pull/8721
>    - https://github.com/qgis/QGIS-Documentation/pull/8723
>
> Open pull requests:
>
>    - https://github.com/qgis/QGIS-Documentation/pull/8764
>    - https://github.com/qgis/QGIS-Documentation/pull/8765
>
> Working on:
>
>    - https://github.com/qgis/QGIS-Documentation/issues/7545
>    - Georeferencer chapter
>
> Have a nice weekend,
> Selma.
>
> On Fri, 15 Dec 2023 at 16:51, Selma Vidimlic <selma at kartoza.com> wrote:
>
>> Hello all,
>>
>> Here is the report for this week:
>>
>> Merged pull requests:
>>
>>    - https://github.com/qgis/QGIS-Documentation/pull/8701
>>    - https://github.com/qgis/QGIS-Documentation/pull/8702
>>    - https://github.com/qgis/QGIS-Documentation/pull/8708
>>
>> Open pull requests:
>>
>>    - https://github.com/qgis/QGIS-Documentation/pull/8713
>>
>> Still working on:
>>
>>    - https://github.com/qgis/QGIS-Documentation/issues/7568
>>    - https://github.com/qgis/QGIS-Documentation/issues/7545
>>
>>
>> Have a great weekend,
>> Selma.
>>
>>
>> On Fri, 8 Dec 2023 at 17:19, Selma Vidimlic <selma at kartoza.com> wrote:
>>
>>> Hello all,
>>>
>>> Merged pull requests from this week:
>>>
>>>    - 3D Tiles Chapter
>>>    <https://github.com/qgis/QGIS-Documentation/pull/8657> with two
>>>    commits from this week:
>>>
>>>
>>>    1. fixes after review and update opening_data file
>>>    <https://github.com/qgis/QGIS-Documentation/pull/8657/commits/f6fe29198c5a21096e1927dcbf3716f8350d2dbc>
>>>    2. cross references
>>>    <https://github.com/qgis/QGIS-Documentation/pull/8657/commits/303b7ae487faacb5959d1b535f3bedf500767ee5>
>>>
>>>
>>>    - Identify tool update
>>>    <https://github.com/qgis/QGIS-Documentation/pull/8692>
>>>
>>> Open pull requests from this week:
>>>
>>>    - Topology checker update
>>>    <https://github.com/qgis/QGIS-Documentation/pull/8701>
>>>    - Auto-open options for exported layout
>>>    <https://github.com/qgis/QGIS-Documentation/pull/8702>
>>>
>>> Regards,
>>> Selma.
>>>
>>> On Fri, 24 Nov 2023 at 19:48, Selma Vidimlic <selma at kartoza.com> wrote:
>>>
>>>> Hi all,
>>>>
>>>> Merged PR from this week:
>>>>
>>>>    - Vector tiles update
>>>>    <https://github.com/qgis/QGIS-Documentation/pull/8639>
>>>>
>>>> Open PR:
>>>>
>>>>    - 3d tiles <https://github.com/qgis/QGIS-Documentation/pull/8657> -
>>>>    so, here I need to additionally describe properties (symbology, 3d view,
>>>>    elevation menu), also the second section now is called *Scene, *but
>>>>    I believe this will be changed. I'm looking forward to your feedback
>>>>    (review).
>>>>
>>>> Still working on:
>>>>
>>>>    - geometry expressions
>>>>    <https://github.com/qgis/QGIS-Documentation/issues/8547>
>>>>
>>>> Have a nice weekend,
>>>> Selma.
>>>>
>>>> On Fri, 17 Nov 2023 at 17:15, Selma Vidimlic <selma at kartoza.com> wrote:
>>>>
>>>>> Hello everyone,
>>>>>
>>>>> This week (and last week at the OSGeo meeting Vienna) I was working on
>>>>> documentation for 3D Tiles in QGIS. I used blog posts from Lutra Consulting
>>>>> and North Road websites as the main source for the documentation, also I
>>>>> followed video tutorials and Martin Dobias explained 3D tiles to me while
>>>>> we were in Vienna. I'm planning to create a draft version in my GitHub
>>>>> repository (I will send you a link) so you can check it out. This is my
>>>>> first time creating a whole new chapter for documentation so I'm trying to
>>>>> be as detailed as possible. I also prepared screenshots for other chapters
>>>>> updates related to 3D tiles/Scene (browser, data source management etc.).
>>>>>
>>>>> PR from this week:
>>>>> Vector tiles properties
>>>>> <https://github.com/qgis/QGIS-Documentation/pull/8639>
>>>>> In this PR I updated chapter with Source and Rendering properties, but
>>>>> I wasn't able to recreate OpenStreetMap landuse layer with all rules (like
>>>>> image that is in the docs now), so if someone has advice on how to do that,
>>>>> please let me know. I was using tiles from
>>>>> https://cloud.maptiler.com/tiles/.
>>>>>
>>>>> Have a nice weekend,
>>>>> Selma.
>>>>>
>>>>> --
>>>>> Selma Vidimlic Husic
>>>>> QGIS Documentation Writer
>>>>> Visit http://kartoza.com to find out about open source:
>>>>> * Desktop GIS programming services
>>>>> * Geospatial web development
>>>>> * GIS Training
>>>>> * Consulting Services
>>>>> Phone: +387 61 933 651
>>>>>
>>>>
>>>>
>>>> --
>>>> Selma Vidimlic Husic
>>>> QGIS Documentation Writer
>>>> Visit http://kartoza.com to find out about open source:
>>>> * Desktop GIS programming services
>>>> * Geospatial web development
>>>> * GIS Training
>>>> * Consulting Services
>>>> Phone: +387 61 933 651
>>>>
>>>
>>>
>>> --
>>> Selma Vidimlic Husic
>>> QGIS Documentation Writer
>>> Visit http://kartoza.com to find out about open source:
>>> * Desktop GIS programming services
>>> * Geospatial web development
>>> * GIS Training
>>> * Consulting Services
>>> Phone: +387 61 933 651
>>>
>>
>>
>> --
>> Selma Vidimlic Husic
>> QGIS Documentation Writer
>> Visit http://kartoza.com to find out about open source:
>> * Desktop GIS programming services
>> * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Phone: +387 61 933 651
>>
>
>
> --
> Selma Vidimlic Husic
> QGIS Documentation Writer
> Visit http://kartoza.com to find out about open source:
> * Desktop GIS programming services
> * Geospatial web development
> * GIS Training
> * Consulting Services
> Phone: +387 61 933 651
>


-- 
Selma Vidimlic Husic
QGIS Documentation Writer
Visit http://kartoza.com to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Phone: +387 61 933 651
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/d4279168/attachment.htm>

From andreaerdna at libero.it  Fri Jan 12 08:36:21 2024
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 12 Jan 2024 17:36:21 +0100
Subject: [QGIS-Developer] QGIS Documentation Writer
Message-ID: <ee422978-de26-465c-9269-4d0bf118ed18@libero.it>

Il 12/01/2024 17:51, Selma Vidimlic via QGIS-Developer ha scritto:

> This week, I dedicated some time to investigating older issues, 
> attempting to determine whether they still need to remain open. During 
> this process, I came across the issue titled Add a check box in the 
> sublayer selection dialog to control whether system and internal tables 
> should be shown 
> <https://github.com/qgis/QGIS-Documentation/issues/6908>, it seems like 
> a small change (in documentation), but I'm having trouble finding the 
> "sublayer selection dialog." If someone could explain what that means 
> and how I can access it, I would appreciate it.

Hi Selma,
the "Show system and internal tables" checkbox is visible in the "Select 
Items to Add" dialog windows displayed when the vector dataset contains 
multiple layers, e.g. when adding a GeoPackage layer.

Best regards.

Andrea
-------------- next part --------------
A non-text attachment was scrubbed...
Name: selectitems.png
Type: image/png
Size: 34124 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240112/47bf2592/attachment-0001.png>

From colin.saresoar at terrashape.co.uk  Fri Jan 12 19:21:21 2024
From: colin.saresoar at terrashape.co.uk (Colin Sare-Soar)
Date: Sat, 13 Jan 2024 10:21:21 +0700 (ICT)
Subject: [QGIS-Developer] Shapefile not correctly shown in some areas.
In-Reply-To: <mailman.170197.1705075957.32175.qgis-developer@lists.osgeo.org>
References: <mailman.170197.1705075957.32175.qgis-developer@lists.osgeo.org>
Message-ID: <603858443.437185.1705116081776@email.ionos.co.uk>

I loaded the shapefile and found some weird behaviour.
I saw a line of points, with a break (presumably your 'hole') but the same as you, I couldn't click on any of them and they disappear.
I cannot see the point numbers or any info. The table is blank.
I can see from the properties that there are 2001 points but nothing else. I can see the coordinates of the points by right clicking.
One problem that I have is that all my tooltips have disappeared. A small window opens but it is blank, so that doesn't help.

I could see the line in Google Earth but the points disappeared there also, if I zoomed in too much.

My system is:

QGIS version
3.34.2-Prizren
QGIS code revision
7d199797fcc
Qt version
5.15.3
Python version
3.10.12
GDAL/OGR version
3.4.1
PROJ version
8.2.1
EPSG Registry database version
v10.041 (2021-12-03)
GEOS version
3.10.2-CAPI-1.16.0
SQLite version
3.37.2
PDAL version
2.3.0
PostgreSQL client version
14.10 (Ubuntu 14.10-0ubuntu0.22.04.1)
SpatiaLite version
5.0.1
QWT version
6.1.4
QScintilla2 version
2.11.6
OS version
Linux Mint 21.2

Active Python plugins
grassprovider
2.12.99
db_manager
0.1.20
MetaSearch
0.3.6
processing
2.12.99

Regards
Colin Sare-Soar

> Hello,
> To make things short, I have a device which gathers data in the fields (hundreds of data per second), and gets the position through a GPS (every second).
> Between 2 GPS positions, I triangulate the positions, so the points are aligned.
> Sometimes, the device "writes" the data so it spends some time doing so, and it does not gather anything, so I have a "hole".
> 
> Then, to visualize the data, I create a Shapefile, only with Points.
> 
> In one Shapefile, I had some strange points: points that appear on the map, but are not clickable and disappear when I zoom in too much. I attach the files ; they can be downloaded here, too:   https://www.grosfichiers.com/sjNC3yx7Kvi  
> 
> For instance, in the file I join, the position number 1613 and further are problematic. If my viewing area includes the point 1612, I see all the points, well aligned, but I cannot click points 1613 and further.
> If I zoom in, or if I move the area and the point 1612 is out of the area, I see nothing anymore.
> 
> The code to generate the Shapefile has a systematic approach: it takes the points one after the other, and writes their position by incrementing the values. So I suspect there is no bug.
> In a previous test, the same problem occured BEFORE point 1217 : I could only see the first points if the area included point 1217.
> 
> Questions:
> - can anyone try to see my shapefile and confirm the problem?
> - does this bug ring a bell to anyone?
> - what may be the problem?
> 
> Thank you very much!
> My versions are detailled below. I just updated to the LTR to try to solve the problem, but the bug exists with the 3.22.7-Bia?owie?a  and 3.28.14-Firenze versions.
> 
> 
> Aur?lie
> 
> 
> Version de QGIS
> 3.28.14-Firenze
> R?vision du code
> b09131c512
> Version de Qt
> 5.15.3
> Version de Python
> 3.9.5
> Version de GDAL/OGR
> 3.8.2
> Version de Proj
> 9.3.1
> Version de la base de donn?es du registre EPSG
> v10.098 (2023-11-24)
> Version de GEOS
> 3.12.1-CAPI-1.18.1
> Version de SQLite
> 3.41.1
> Version de PDAL
> 2.6.0
> Version du client PostgreSQL
> unknown
> Version de SpatiaLite
> 5.1.0
> Version de QWT
> 6.1.6
> Version de QScintilla2
> 2.13.4
> Version de l'OS
> Windows 10 Version 2009
> 
> 
> 
> 
> Extensions Python actives
> QGeoloGIS
> 1.9.0
> db_manager
> 0.1.20
> grassprovider
> 2.12.99
> MetaSearch
> 0.3.6
> processing
> 2.12.99
> sagaprovider
> 2.12.99
> 
> 
> ======= Previously  =========
> 
> Version de QGIS
> 3.22.7-Bia?owie?a
> R?vision du code
> 5a65627a
> Version de Qt
> 5.15.3
> Version de Python
> 3.9.5
> Version de GDAL/OGR
> 3.4.3
> Version de Proj
> 9.0.0
> Version de la base de donn?es du registre EPSG
> v10.054 (2022-02-13)
> Version de GEOS
> 3.10.2-CAPI-1.16.0
> Version de SQLite
> 3.38.1
> Version de PDAL
> 2.3.0
> Version du client PostgreSQL
> 13.0
> Version de SpatiaLite
> 5.0.1
> Version de QWT
> 6.1.6
> Version de QScintilla2
> 2.13.1
> Version de l'OS
> Windows 10 Version 2009

From rdmailings at duif.net  Sat Jan 13 01:27:55 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 13 Jan 2024 10:27:55 +0100
Subject: [QGIS-Developer] Shapefile not correctly shown in some areas
In-Reply-To: <1902750373.684597130.1705075889654.JavaMail.root@zimbra60-e10.priv.proxad.net>
References: <1902750373.684597130.1705075889654.JavaMail.root@zimbra60-e10.priv.proxad.net>
Message-ID: <71ea4525-9e17-4cf7-8f81-a89c3847e123@duif.net>

Hi Aur?lie,

I can reproduce your findings.

I'm not an expert on shapefile format, but how do you create the shapefile?

Is it possible that the shx file is not in line anymore with the shp/dbf file?
If I'm correct the shx is the shape-index file, probably used by QGIS or other tools to quickly find points within a bbox etc.
See: https://gis.stackexchange.com/questions/294868/explaining-difference-between-shx-and-shp-files-of-shapefile

I think your shp and shx file are not in line with each other anymore.

As a test, I exported your shapefile in QGIS to another shp file, and THAT copy works fine.

So I think you have to dive into your shp file creation software, and make sure it also update the shx OR (re)create the shx after creating shp and dbf

Regards & hth,

Richard Duivenvoorde

On 1/12/24 17:11, Aur?lie Tisson (BastaPrint) via QGIS-Developer wrote:
> Hello,
> To make things short, I have a device which gathers data in the fields (hundreds of data per second), and gets the position through a GPS (every second).
> Between 2 GPS positions, I triangulate the positions, so the points are aligned.
> Sometimes, the device "writes" the data so it spends some time doing so, and it does not gather anything, so I have a "hole".
> 
> Then, to visualize the data, I create a Shapefile, only with Points.
> 
> In one Shapefile, I had some strange points: points that appear on the map, but are not clickable and disappear when I zoom in too much. I attach the files ; they can be downloaded here, too:?? https://www.grosfichiers.com/sjNC3yx7Kvi
> 
> For instance, in the file I join, the position number 1613 and further are problematic. If my viewing area includes the point 1612, I see all the points, well aligned, but I cannot click points 1613 and further.
> If I zoom in, or if I move the area and the point 1612 is out of the area, I see nothing anymore.
> 
> The code to generate the Shapefile has a systematic approach: it takes the points one after the other, and writes their position by incrementing the values. So I suspect there is no bug.
> In a previous test, the same problem occured BEFORE point 1217 : I could only see the first points if the area included point 1217.
> 
> Questions:
> - can anyone try to see my shapefile and confirm the problem?
> - does this bug ring a bell to anyone?
> - what may be the problem?
> 
> Thank you very much!
> My versions are detailled below. I just updated to the LTR to try to solve the problem, but the bug exists with the 3.22.7-Bia?owie?a? and 3.28.14-Firenze versions.
> 
> 
> Aur?lie
> 
> 
> Version de QGIS
> 
> 	
> 
> 3.28.14-Firenze
> 
> 	
> 
> R?vision du code
> 
> 	
> 
> b09131c512 <https://github.com/qgis/QGIS/commit/b09131c512>
> 
> Version de Qt
> 
> 	
> 
> 5.15.3
> 
> Version de Python
> 
> 	
> 
> 3.9.5
> 
> Version de GDAL/OGR
> 
> 	
> 
> 3.8.2
> 
> Version de Proj
> 
> 	
> 
> 9.3.1
> 
> Version de la base de donn?es du registre EPSG
> 
> 	
> 
> v10.098 (2023-11-24)
> 
> Version de GEOS
> 
> 	
> 
> 3.12.1-CAPI-1.18.1
> 
> Version de SQLite
> 
> 	
> 
> 3.41.1
> 
> Version de PDAL
> 
> 	
> 
> 2.6.0
> 
> Version du client PostgreSQL
> 
> 	
> 
> unknown
> 
> Version de SpatiaLite
> 
> 	
> 
> 5.1.0
> 
> Version de QWT
> 
> 	
> 
> 6.1.6
> 
> Version de QScintilla2
> 
> 	
> 
> 2.13.4
> 
> Version de l'OS
> 
> 	
> 
> Windows 10 Version 2009
> 
> 
> 	
> 	
> 	
> 
> Extensions Python actives
> 
> QGeoloGIS
> 
> 	
> 
> 1.9.0
> 
> db_manager
> 
> 	
> 
> 0.1.20
> 
> grassprovider
> 
> 	
> 
> 2.12.99
> 
> MetaSearch
> 
> 	
> 
> 0.3.6
> 
> processing
> 
> 	
> 
> 2.12.99
> 
> sagaprovider
> 
> 	
> 
> 2.12.99
> 
> 
> 
> ======= Previously? =========
> 
> Version de QGIS
> 
> 	
> 
> 3.22.7-Bia?owie?a
> 
> 	
> 
> R?vision du code
> 
> 	
> 
> 5a65627a <https://github.com/qgis/QGIS/commit/5a65627a>
> 
> Version de Qt
> 
> 	
> 
> 5.15.3
> 
> Version de Python
> 
> 	
> 
> 3.9.5
> 
> Version de GDAL/OGR
> 
> 	
> 
> 3.4.3
> 
> Version de Proj
> 
> 	
> 
> 9.0.0
> 
> Version de la base de donn?es du registre EPSG
> 
> 	
> 
> v10.054 (2022-02-13)
> 
> Version de GEOS
> 
> 	
> 
> 3.10.2-CAPI-1.16.0
> 
> Version de SQLite
> 
> 	
> 
> 3.38.1
> 
> Version de PDAL
> 
> 	
> 
> 2.3.0
> 
> Version du client PostgreSQL
> 
> 	
> 
> 13.0
> 
> Version de SpatiaLite
> 
> 	
> 
> 5.0.1
> 
> Version de QWT
> 
> 	
> 
> 6.1.6
> 
> Version de QScintilla2
> 
> 	
> 
> 2.13.1
> 
> Version de l'OS
> 
> 	
> 
> Windows 10 Version 2009
> 
> 
> 	
> 	
> 	
> 
> 
> 	
> 
> 	
> 
> 	
> 
> 	
> 
> 	
> 
> 	
> 
> 
> 
> 
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From andreaerdna at libero.it  Sat Jan 13 02:47:33 2024
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Sat, 13 Jan 2024 11:47:33 +0100
Subject: [QGIS-Developer] Shapefile not correctly shown in some areas
Message-ID: <40d10a2c-8b49-4ed7-ab33-99a59c29f710@libero.it>

Hi all,


 > Colin Sare-Soar colin.saresoar at terrashape.co.uk
 > Fri Jan 12 19:21:21 PST 2024
 > I cannot see the point numbers or any info. The table is blank.

This is due to the fact the the .dbf sidecar file which stores the 
fields names and values has not been provided or has not been created at 
all.


 > Il 12/01/2024 17:11, Aur?lie Tisson (BastaPrint) via QGIS-Developer 
ha scritto:
> If my viewing area includes the point 1612, I see all 
> the points, well aligned, but I cannot click points 1613 and further.
> If I zoom in, or if I move the area and the point 1612 is out of the 
> area, I see nothing anymore.

It looks like this issue is due to the fact that the extent stored in 
the .shp and in the .shx files is incorrect.

As you can see in the Layer Properties / Information dialog window, the 
extent stored for such layer is:

645765.5000000000000000,6860847.0000000000000000 :
645766.3750000000000000,6860852.0000000000000000

The points with Feature ID from 0 to 34 and from 1613 to 2000 are 
outside such extent.

As suggested by Richard, just exporting the layer in a new ESRI 
Shapefile layer will write the right extent in the .shp and .shx files 
and the issue will not occur using the new layer.

While I guess there is an issue in the code used to create the ESRI 
Shapefile layer, which not correctly updates the extent of the created 
layer, I also see some issue in QGIS itself and or in the GDAL/OGR library:

- QGIS should be less strict and also display the features outside the 
stored extent and or warn the user about the incorrect extent
- the "Updade extent" functionality in the Layer Properties / Source 
dialog window seems not working, at least for ESRI Shapefile layers
- the "Repair Shapefile" processing algorithm (based on GDAL/OGR 
functionality) doesn't repair the incorrect extent stored in the .shx file.

Best regards.

Andrea

From aurelie.tisson at bastaprint.com  Sat Jan 13 08:44:18 2024
From: aurelie.tisson at bastaprint.com (=?utf-8?Q?Aur=C3=A9lie_Tisson_=28BastaPrint=29?=)
Date: Sat, 13 Jan 2024 17:44:18 +0100 (CET)
Subject: [QGIS-Developer] Shapefile not correctly shown in some areas
In-Reply-To: <40d10a2c-8b49-4ed7-ab33-99a59c29f710@libero.it>
Message-ID: <371727585.691963470.1705164258181.JavaMail.root@zimbra60-e10.priv.proxad.net>


Thanks a lot Andrea, you found the reason! 
The extent was wrong, and if I calculate & write it correctly, the file works. 
(Basically, I calculated it on the GPS points themselves, and not on the interpolated points, and it makes a difference because I interpolate points "before any GPS info" or "after the last GPS point"). 





To answer to other suggestions: 
- indeed, writing the file again from QGIS saves the new file in the right format 
- the .dbf file was not fautly. I had the same symptoms with or without it, so I did not mention it / send it. 

- I write the shapefiles "by hand", using the ESRI norm, playing around with the Little Endian and Big Endian formats (why did they make it so complex?). 



Thanks again ! 
Aur?lie 


----- Mail original -----

De: "Andrea Giudiceandrea via QGIS-Developer" <qgis-developer at lists.osgeo.org> 
?: qgis-developer at lists.osgeo.org 
Envoy?: Samedi 13 Janvier 2024 11:47:33 
Objet: Re: [QGIS-Developer] Shapefile not correctly shown in some areas 

Hi all, 


> Colin Sare-Soar colin.saresoar at terrashape.co.uk 
> Fri Jan 12 19:21:21 PST 2024 
> I cannot see the point numbers or any info. The table is blank. 

This is due to the fact the the .dbf sidecar file which stores the 
fields names and values has not been provided or has not been created at 
all. 


> Il 12/01/2024 17:11, Aur?lie Tisson (BastaPrint) via QGIS-Developer 
ha scritto: 
> If my viewing area includes the point 1612, I see all 
> the points, well aligned, but I cannot click points 1613 and further. 
> If I zoom in, or if I move the area and the point 1612 is out of the 
> area, I see nothing anymore. 

It looks like this issue is due to the fact that the extent stored in 
the .shp and in the .shx files is incorrect. 

As you can see in the Layer Properties / Information dialog window, the 
extent stored for such layer is: 

645765.5000000000000000,6860847.0000000000000000 : 
645766.3750000000000000,6860852.0000000000000000 


The points with Feature ID from 0 to 34 and from 1613 to 2000 are 
outside such extent. 

As suggested by Richard, just exporting the layer in a new ESRI 
Shapefile layer will write the right extent in the .shp and .shx files 
and the issue will not occur using the new layer. 

While I guess there is an issue in the code used to create the ESRI 
Shapefile layer, which not correctly updates the extent of the created 
layer, I also see some issue in QGIS itself and or in the GDAL/OGR library: 

- QGIS should be less strict and also display the features outside the 
stored extent and or warn the user about the incorrect extent 
- the "Updade extent" functionality in the Layer Properties / Source 
dialog window seems not working, at least for ESRI Shapefile layers 
- the "Repair Shapefile" processing algorithm (based on GDAL/OGR 
functionality) doesn't repair the incorrect extent stored in the .shx file. 

Best regards. 

Andrea 
_______________________________________________ 
QGIS-Developer mailing list 
QGIS-Developer at lists.osgeo.org 
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer 
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240113/f802c749/attachment.htm>

From colin.saresoar at terrashape.co.uk  Sat Jan 13 19:56:34 2024
From: colin.saresoar at terrashape.co.uk (Colin Sare-Soar)
Date: Sun, 14 Jan 2024 10:56:34 +0700 (ICT)
Subject: [QGIS-Developer] Shapefile not shown correctly in some areas
In-Reply-To: <mailman.12.1705176002.17132.qgis-developer@lists.osgeo.org>
References: <mailman.12.1705176002.17132.qgis-developer@lists.osgeo.org>
Message-ID: <1798084905.487369.1705204594164@email.ionos.co.uk>

Thanks Andrea for clearing the shapefile question up.
I also write my own shapefiles programatically but haven't fallen foul of this particular item.
Regarding my post on this subject, I mentioned that I had no tooltips on any of the toolbar icons. I have searched the documantation but can't find any mention of tooltips. Do they go by another name in QGIS?
I tried the Settings/Interface customization menu item to see if there was a setting in there but the window just freezes. I cannot scroll down or click on anything.
I have only noticed this in the latest version that I have.

My system:

QGIS version  3.34.2-Prizren
QGIS code revision  7d199797fcc
Qt version  5.15.3
Python version  3.10.12
GDAL/OGR version  3.4.1
PROJ version  8.2.1
EPSG Registry database version  v10.041 (2021-12-03)
GEOS version  3.10.2-CAPI-1.16.0
SQLite version  3.37.2
PDAL version  2.3.0
PostgreSQL client version  14.10 (Ubuntu 14.10-0ubuntu0.22.04.1)
SpatiaLite version  5.0.1
QWT version  6.1.4
QScintilla2 version  2.11.6
OS version  Linux Mint 21.2

Active Python plugins
grassprovider  2.12.99
db_manager  0.1.20
MetaSearch  0.3.6
processing  2.12.99

Regards
Colin


>  > Colin Sare-Soar colin.saresoar at terrashape.co.uk
>  > Fri Jan 12 19:21:21 PST 2024
>  > I cannot see the point numbers or any info. The table is blank.
> 
> This is due to the fact the the .dbf sidecar file which stores the
> fields names and values has not been provided or has not been created at
> all.
> 
> 
>  > Il 12/01/2024 17:11, Aur?lie Tisson (BastaPrint) via QGIS-Developer
> ha scritto:
> > If my viewing area includes the point 1612, I see all
> > the points, well aligned, but I cannot click points 1613 and further.
> > If I zoom in, or if I move the area and the point 1612 is out of the
> > area, I see nothing anymore.
> 
> It looks like this issue is due to the fact that the extent stored in
> the .shp and in the .shx files is incorrect.
> 
> As you can see in the Layer Properties / Information dialog window, the
> extent stored for such layer is:
> 
> 645765.5000000000000000,6860847.0000000000000000 :
> 645766.3750000000000000,6860852.0000000000000000
> 
> The points with Feature ID from 0 to 34 and from 1613 to 2000 are
> outside such extent.
> 
> As suggested by Richard, just exporting the layer in a new ESRI
> Shapefile layer will write the right extent in the .shp and .shx files
> and the issue will not occur using the new layer.
> 
> While I guess there is an issue in the code used to create the ESRI
> Shapefile layer, which not correctly updates the extent of the created
> layer, I also see some issue in QGIS itself and or in the GDAL/OGR library:
> 
> - QGIS should be less strict and also display the features outside the
> stored extent and or warn the user about the incorrect extent
> - the "Updade extent" functionality in the Layer Properties / Source
> dialog window seems not working, at least for ESRI Shapefile layers
> - the "Repair Shapefile" processing algorithm (based on GDAL/OGR
> functionality) doesn't repair the incorrect extent stored in the .shx file.
> 
> Best regards.
> 
> Andrea
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rbenet71 at gmail.com  Sun Jan 14 00:35:26 2024
From: rbenet71 at gmail.com (rbenet71 at gmail.com)
Date: Sun, 14 Jan 2024 09:35:26 +0100
Subject: [QGIS-Developer] RV: PyQGIS QgsLayoutExporter gives error
 "QPen::setWidthF: Setting a pen width that is out of range"
In-Reply-To: <000201da460f$20a3f240$61ebd6c0$@gmail.com>
References: <004401da25d5$155c8e60$4015ab20$@gmail.com>	<CAPGg4HDg9gng2k=jYFwJgxvSKPN5MGJWNGCw9QFzh3AcOpxHdw@mail.gmail.com>
 <CAPGg4HBkZ6DMLyKxez0t43fUrZ56gYRtc=sn=cwx=Ze7NoJ=Gw@mail.gmail.com>
 <000201da460f$20a3f240$61ebd6c0$@gmail.com>
Message-ID: <000701da46c4$a030ad90$e09208b0$@gmail.com>

Hello,
I have a PyQGIS app, that generates a PDFs from an Atlas.
If I generate the PDF directly from QGIS Desktop all PDF generate correctly.
But If I generate the PDF with my PyQGIS app, some PDF don't generate properly (some elements do not appear) and give error "QPen::setWidthF: Setting a pen width that is out of range".
The first PDF contains all the elements, the other PDF are parts of first PDF, so the elements are missing in some PDFs that are in the first.
One year ago, this app works perfect.
I have tried to change all PDF export options, but the error continues.
I make this question in Gis StackExchange, and no one give any answer:
 <https://gis.stackexchange.com/questions/469644/pyqgis-qgslayoutexporter-gives-error-qpensetwidthf-setting-a-pen-width-that> https://gis.stackexchange.com/questions/469644/pyqgis-qgslayoutexporter-gives-error-qpensetwidthf-setting-a-pen-width-that
Here is a part of my code:
# Generate atlas
# Es una QgsLayoutAtlas
myAtlas.beginRender()
myAtlas.next()
for i in range(0, myAtlas.count()):
 
    exporter = QgsLayoutExporter(myAtlas.layout())
file_name=os.path.join(dir_destiny,'Individuals')+'/'+myAtlas.currentFilename()+".pdf"   
 
    pdf_settings=QgsLayoutExporter.PdfExportSettings()
    pdf_settings.forceVectorOutput=False
    pdf_settings.exportMetadata = False
    pdf_settings.appendGeoreference = False
    
    #pdf_settings.textRenderFormat = QgsRenderContext.TextFormatAlwaysOutlines  # For "Always Export Text as Paths"
    pdf_settings.textRenderFormat = QgsRenderContext.TextFormatAlwaysText # For "Always Export Text as Text Objects"
 
    pdf_settings.rasterizeWholeImage = True # For "Disable tiled raster layer exports" Hace que ocupe menos si es TRUE
    pdf_settings.simplifyGeometries = False
 
    exporter.exportToPdf(file_name,pdf_settings)
 
Thank you In advance for your attention and help.
 
Kind regards,
 
Robert Benet
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240114/170d95f4/attachment-0001.htm>

From andreaerdna at libero.it  Sun Jan 14 00:05:16 2024
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Sun, 14 Jan 2024 09:05:16 +0100
Subject: [QGIS-Developer] Shapefile not shown correctly in some areas
Message-ID: <19234f91-c1e9-428b-888f-3e64d83988c8@libero.it>

Il 14/01/2024 04:56, Colin Sare-Soar via QGIS-Developer ha scritto:
> Regarding my post on this subject, I mentioned that I had no tooltips on any of the toolbar icons.
 > I tried the Settings/Interface customization menu item to see if 
there was a setting in there but the window just freezes.

Hi Colin,
try if the issue also occurs using a new QGIS user profile [1].
If the issue also occurs using a new QGIS user profile, then please file 
an issue report on the GitHub QGIS source code repository [2].

Best regards.

Andrea


[1] 
https://docs.qgis.org/latest/en/docs/user_manual/introduction/qgis_configuration.html#working-with-user-profiles
[2] https://github.com/qgis/QGIS/issues

From colin.saresoar at terrashape.co.uk  Sun Jan 14 18:38:56 2024
From: colin.saresoar at terrashape.co.uk (Colin Sare-Soar)
Date: Mon, 15 Jan 2024 09:38:56 +0700 (ICT)
Subject: [QGIS-Developer] Shapefile not shown correctly in some areas
In-Reply-To: <mailman.16.1705262402.18769.qgis-developer@lists.osgeo.org>
References: <mailman.16.1705262402.18769.qgis-developer@lists.osgeo.org>
Message-ID: <516187340.550052.1705286336666@email.ionos.co.uk>

Hi Andrea,

Unfortunately, creating and using a new profile did not affect the issues I mentioned. I will file a report on Github.

Kind regards
Colin

> On 15/01/2024 03:00 +07 qgis-developer-request at lists.osgeo.org wrote:
> 
>  
> Send QGIS-Developer mailing list submissions to
> 	qgis-developer at lists.osgeo.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> 	https://lists.osgeo.org/mailman/listinfo/qgis-developer
> or, via email, send a message with subject or body 'help' to
> 	qgis-developer-request at lists.osgeo.org
> 
> You can reach the person managing the list at
> 	qgis-developer-owner at lists.osgeo.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of QGIS-Developer digest..."
> Today's Topics:
> 
>    1. Re: Shapefile not shown correctly in some areas
>       (Andrea Giudiceandrea)
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Il 14/01/2024 04:56, Colin Sare-Soar via QGIS-Developer ha scritto:
> > Regarding my post on this subject, I mentioned that I had no tooltips on any of the toolbar icons.
>  > I tried the Settings/Interface customization menu item to see if 
> there was a setting in there but the window just freezes.
> 
> Hi Colin,
> try if the issue also occurs using a new QGIS user profile [1].
> If the issue also occurs using a new QGIS user profile, then please file 
> an issue report on the GitHub QGIS source code repository [2].
> 
> Best regards.
> 
> Andrea
> 
> 
> [1] 
> https://docs.qgis.org/latest/en/docs/user_manual/introduction/qgis_configuration.html#working-with-user-profiles
> [2] https://github.com/qgis/QGIS/issues

From mrvelle at gmail.com  Sun Jan 14 21:42:01 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Mon, 15 Jan 2024 06:42:01 +0100
Subject: [QGIS-Developer] Running unit tests without "make install"
In-Reply-To: <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
References: <CAKKm1vHTgTNfW4=iPoC9bOenHA3mEC4ssAzNgzSnSUMrhWoBSQ@mail.gmail.com>
 <CAB28AsjwAqWkORV40j8ub9JGKGddpZAapyw_9tNV8a+u-HNBMA@mail.gmail.com>
 <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
Message-ID: <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>

When you guys run these tests locally, do they all pass?

After some fiddling I have removed some errors, caused by incorrect build
setup. But I still have  19 failing tests.

2 - checkGitStatus (Failed)
22 - ProcessingGrass7AlgorithmsRasterTestPt2 (Failed)
24 - ProcessingOtbAlgorithmsTest (Failed)
46 - test_core_compositionconverter (Failed)
108 - test_core_layoutpicture (Failed)
177 - test_core_settingsentry (Failed)
280 - test_gui_filedownloader (Subprocess aborted)
288 - test_gui_featurelistcombobox (Subprocess aborted)
298 - test_gui_queryresultwidget (Subprocess aborted)
302 - test_3d_3drendering (Failed)
309 - test_3d_mesh3drendering (Failed)
332 - test_provider_wcsprovider (Failed)
413 - PyQgsAnnotation (Failed)
489 - PyQgsExternalStorageWebDav (Failed)
490 - PyQgsExternalStorageAwsS3 (Failed)
600 - PyQgsMapCanvas (Failed)
601 - PyQgsMapCanvasAnnotationItem (Failed)
672 - PyQgsProcessExecutablePt1 (Failed)
673 - PyQgsProcessExecutablePt2 (Failed)

I think I understand checkGitStatus and can safely ignore that one. But
what about the rest? Is it "normal" that so many tests fail when running
tests locally?

Would any of these tests give a different result if I first ran "make
install"?

Im running Ubuntu 22.04, and installed all dependencies via APT as advised
in the qgis build docs. I built QGIS release-3_34 from source and am now
trying to test that build, by running "ctest".


On Mon, Jan 1, 2024 at 12:34?AM Thomas Larsen Wessel <mrvelle at gmail.com>
wrote:

> Thanks both of you :) And happy new year.
>
> On Sun, Dec 31, 2023 at 11:38?PM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
>
>>
>>
>> On Mon, 1 Jan 2024, 6:36?am Thomas Larsen Wessel via QGIS-Developer, <
>> qgis-developer at lists.osgeo.org> wrote:
>>
>>> The docs (
>>> https://docs.qgis.org/3.28/en/docs/developers_guide/unittesting.html#run-your-tests)
>>> specify: *make && make install && make test*.
>>>
>>> I would rather not run make install, since I have another instance of
>>> QGIS installed via APT, and I worry running make install will somehow make
>>> a mess and leave me without a working instance.
>>>
>>> But is it really necessary to run make install before make run? In fact
>>> it seems more natural to me to test before installing!
>>>
>>
>> Try running "ctest" from your build directory. There's no need to install
>> if doing it this way. (It's how I do all of my development)
>>
>> Nyall
>>
>>>
>>> Sincerely
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/efe4e7b9/attachment.htm>

From nyall.dawson at gmail.com  Sun Jan 14 22:53:59 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 15 Jan 2024 16:53:59 +1000
Subject: [QGIS-Developer] Running unit tests without "make install"
In-Reply-To: <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>
References: <CAKKm1vHTgTNfW4=iPoC9bOenHA3mEC4ssAzNgzSnSUMrhWoBSQ@mail.gmail.com>
 <CAB28AsjwAqWkORV40j8ub9JGKGddpZAapyw_9tNV8a+u-HNBMA@mail.gmail.com>
 <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
 <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>
Message-ID: <CAB28Asg8tuTAW_8hghxrM-fnCbqSSet39oDaROd55ECQqFB49A@mail.gmail.com>

On Mon, 15 Jan 2024, 3:42?pm Thomas Larsen Wessel, <mrvelle at gmail.com>
wrote:

> When you guys run these tests locally, do they all pass?
>
> After some fiddling I have removed some errors, caused by incorrect build
> setup. But I still have  19 failing tests.
>
> 2 - checkGitStatus (Failed)
> 22 - ProcessingGrass7AlgorithmsRasterTestPt2 (Failed)
> 24 - ProcessingOtbAlgorithmsTest (Failed)
> 46 - test_core_compositionconverter (Failed)
> 108 - test_core_layoutpicture (Failed)
> 177 - test_core_settingsentry (Failed)
> 280 - test_gui_filedownloader (Subprocess aborted)
> 288 - test_gui_featurelistcombobox (Subprocess aborted)
> 298 - test_gui_queryresultwidget (Subprocess aborted)
> 302 - test_3d_3drendering (Failed)
> 309 - test_3d_mesh3drendering (Failed)
> 332 - test_provider_wcsprovider (Failed)
> 413 - PyQgsAnnotation (Failed)
> 489 - PyQgsExternalStorageWebDav (Failed)
> 490 - PyQgsExternalStorageAwsS3 (Failed)
> 600 - PyQgsMapCanvas (Failed)
> 601 - PyQgsMapCanvasAnnotationItem (Failed)
> 672 - PyQgsProcessExecutablePt1 (Failed)
> 673 - PyQgsProcessExecutablePt2 (Failed)
>
> I think I understand checkGitStatus and can safely ignore that one. But
> what about the rest? Is it "normal" that so many tests fail when running
> tests locally?
>

That's more than I'd expect to fail on 22.04 -- at least, the main qgis ci
workflow uses 22.04 and most of these are passing !

(See https://github.com/qgis/QGIS/blob/master/.ci/test_flaky.txt and
https://github.com/qgis/QGIS/blob/master/.ci/test_blocklist_qt5.txt for
lists of the tests skipped on the GitHub workflows)


> Would any of these tests give a different result if I first ran "make
> install"?
>

Unlikely.

I'd be interested to see a full log of the failures if you want to upload
it to a gist/Pastebin/ somewhere.

Nyall


> Im running Ubuntu 22.04, and installed all dependencies via APT as advised
> in the qgis build docs. I built QGIS release-3_34 from source and am now
> trying to test that build, by running "ctest".
>
>
> On Mon, Jan 1, 2024 at 12:34?AM Thomas Larsen Wessel <mrvelle at gmail.com>
> wrote:
>
>> Thanks both of you :) And happy new year.
>>
>> On Sun, Dec 31, 2023 at 11:38?PM Nyall Dawson <nyall.dawson at gmail.com>
>> wrote:
>>
>>>
>>>
>>> On Mon, 1 Jan 2024, 6:36?am Thomas Larsen Wessel via QGIS-Developer, <
>>> qgis-developer at lists.osgeo.org> wrote:
>>>
>>>> The docs (
>>>> https://docs.qgis.org/3.28/en/docs/developers_guide/unittesting.html#run-your-tests)
>>>> specify: *make && make install && make test*.
>>>>
>>>> I would rather not run make install, since I have another instance of
>>>> QGIS installed via APT, and I worry running make install will somehow make
>>>> a mess and leave me without a working instance.
>>>>
>>>> But is it really necessary to run make install before make run? In fact
>>>> it seems more natural to me to test before installing!
>>>>
>>>
>>> Try running "ctest" from your build directory. There's no need to
>>> install if doing it this way. (It's how I do all of my development)
>>>
>>> Nyall
>>>
>>>>
>>>> Sincerely
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/b3b49137/attachment.htm>

From nyall.dawson at gmail.com  Sun Jan 14 22:56:39 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 15 Jan 2024 16:56:39 +1000
Subject: [QGIS-Developer] RV: PyQGIS QgsLayoutExporter gives error
 "QPen::setWidthF: Setting a pen width that is out of range"
In-Reply-To: <000701da46c4$a030ad90$e09208b0$@gmail.com>
References: <004401da25d5$155c8e60$4015ab20$@gmail.com>
 <CAPGg4HDg9gng2k=jYFwJgxvSKPN5MGJWNGCw9QFzh3AcOpxHdw@mail.gmail.com>
 <CAPGg4HBkZ6DMLyKxez0t43fUrZ56gYRtc=sn=cwx=Ze7NoJ=Gw@mail.gmail.com>
 <000201da460f$20a3f240$61ebd6c0$@gmail.com>
 <000701da46c4$a030ad90$e09208b0$@gmail.com>
Message-ID: <CAB28Asgx5OdE36wd4isTV1gFtcqVromM-m=+Y+oiExPGYb0+_w@mail.gmail.com>

On Sun, 14 Jan 2024, 6:35?pm Robert via QGIS-Developer, <
qgis-developer at lists.osgeo.org> wrote:

> # Generate atlas
>
> # Es una QgsLayoutAtlas
>
> myAtlas.beginRender()
>
> myAtlas.next()
>
> for i in range(0, myAtlas.count()):
>
>
>
>     exporter = QgsLayoutExporter(myAtlas.layout())
>
> file_name=os.path.join(dir_destiny,'Individuals')+'/'+myAtlas.currentFilename()+".pdf"
>
>
>
>     pdf_settings=QgsLayoutExporter.PdfExportSettings()
>
>     pdf_settings.forceVectorOutput=False
>
>     pdf_settings.exportMetadata = False
>
>     pdf_settings.appendGeoreference = False
>
>
>
>     #pdf_settings.textRenderFormat = QgsRenderContext.TextFormatAlwaysOutlines  # For "Always Export Text as Paths"
>
>     pdf_settings.textRenderFormat = QgsRenderContext.TextFormatAlwaysText # For "Always Export Text as Text Objects"
>
>
>
>     pdf_settings.rasterizeWholeImage = True # For "Disable tiled raster layer exports" Hace que ocupe menos si es TRUE
>
>     pdf_settings.simplifyGeometries = False
>
>
>
>     exporter.exportToPdf(file_name,pdf_settings)
>
>
>
> Thank you In advance for your attention and help.
>

Have you stripped code out of this loop? Eg I can't see any call to
atlas.next() within the loop.

In any case what you have looks generally ok. You'd need to share more of
your code or project to diagnose further.

Nyall

>
>
> Kind regards,
>
>
>
> Robert Benet
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/a160d8b1/attachment-0001.htm>

From mrvelle at gmail.com  Mon Jan 15 13:28:19 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Mon, 15 Jan 2024 22:28:19 +0100
Subject: [QGIS-Developer] Running unit tests without "make install"
In-Reply-To: <CAB28Asg8tuTAW_8hghxrM-fnCbqSSet39oDaROd55ECQqFB49A@mail.gmail.com>
References: <CAKKm1vHTgTNfW4=iPoC9bOenHA3mEC4ssAzNgzSnSUMrhWoBSQ@mail.gmail.com>
 <CAB28AsjwAqWkORV40j8ub9JGKGddpZAapyw_9tNV8a+u-HNBMA@mail.gmail.com>
 <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
 <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>
 <CAB28Asg8tuTAW_8hghxrM-fnCbqSSet39oDaROd55ECQqFB49A@mail.gmail.com>
Message-ID: <CAKKm1vGxh9RytPh_4=MgYyTRsuyn1=WVxP5b3VPchp3HZ5OXAw@mail.gmail.com>

Thanks for having a look at it :) I ran a complete test and saved the test
output to this gist. Is that what you were looking for? Please tell me what
other info you need.

https://gist.github.com/velle/b195bee9a5d63e95ea7aa600b7833be1

On Mon, Jan 15, 2024 at 7:54?AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

>
>
> On Mon, 15 Jan 2024, 3:42?pm Thomas Larsen Wessel, <mrvelle at gmail.com>
> wrote:
>
>> When you guys run these tests locally, do they all pass?
>>
>> After some fiddling I have removed some errors, caused by incorrect build
>> setup. But I still have  19 failing tests.
>>
>> 2 - checkGitStatus (Failed)
>> 22 - ProcessingGrass7AlgorithmsRasterTestPt2 (Failed)
>> 24 - ProcessingOtbAlgorithmsTest (Failed)
>> 46 - test_core_compositionconverter (Failed)
>> 108 - test_core_layoutpicture (Failed)
>> 177 - test_core_settingsentry (Failed)
>> 280 - test_gui_filedownloader (Subprocess aborted)
>> 288 - test_gui_featurelistcombobox (Subprocess aborted)
>> 298 - test_gui_queryresultwidget (Subprocess aborted)
>> 302 - test_3d_3drendering (Failed)
>> 309 - test_3d_mesh3drendering (Failed)
>> 332 - test_provider_wcsprovider (Failed)
>> 413 - PyQgsAnnotation (Failed)
>> 489 - PyQgsExternalStorageWebDav (Failed)
>> 490 - PyQgsExternalStorageAwsS3 (Failed)
>> 600 - PyQgsMapCanvas (Failed)
>> 601 - PyQgsMapCanvasAnnotationItem (Failed)
>> 672 - PyQgsProcessExecutablePt1 (Failed)
>> 673 - PyQgsProcessExecutablePt2 (Failed)
>>
>> I think I understand checkGitStatus and can safely ignore that one. But
>> what about the rest? Is it "normal" that so many tests fail when running
>> tests locally?
>>
>
> That's more than I'd expect to fail on 22.04 -- at least, the main qgis ci
> workflow uses 22.04 and most of these are passing !
>
> (See https://github.com/qgis/QGIS/blob/master/.ci/test_flaky.txt and
> https://github.com/qgis/QGIS/blob/master/.ci/test_blocklist_qt5.txt for
> lists of the tests skipped on the GitHub workflows)
>
>
>> Would any of these tests give a different result if I first ran "make
>> install"?
>>
>
> Unlikely.
>
> I'd be interested to see a full log of the failures if you want to upload
> it to a gist/Pastebin/ somewhere.
>
> Nyall
>
>
>> Im running Ubuntu 22.04, and installed all dependencies via APT as
>> advised in the qgis build docs. I built QGIS release-3_34 from source and
>> am now trying to test that build, by running "ctest".
>>
>>
>> On Mon, Jan 1, 2024 at 12:34?AM Thomas Larsen Wessel <mrvelle at gmail.com>
>> wrote:
>>
>>> Thanks both of you :) And happy new year.
>>>
>>> On Sun, Dec 31, 2023 at 11:38?PM Nyall Dawson <nyall.dawson at gmail.com>
>>> wrote:
>>>
>>>>
>>>>
>>>> On Mon, 1 Jan 2024, 6:36?am Thomas Larsen Wessel via QGIS-Developer, <
>>>> qgis-developer at lists.osgeo.org> wrote:
>>>>
>>>>> The docs (
>>>>> https://docs.qgis.org/3.28/en/docs/developers_guide/unittesting.html#run-your-tests)
>>>>> specify: *make && make install && make test*.
>>>>>
>>>>> I would rather not run make install, since I have another instance of
>>>>> QGIS installed via APT, and I worry running make install will somehow make
>>>>> a mess and leave me without a working instance.
>>>>>
>>>>> But is it really necessary to run make install before make run? In
>>>>> fact it seems more natural to me to test before installing!
>>>>>
>>>>
>>>> Try running "ctest" from your build directory. There's no need to
>>>> install if doing it this way. (It's how I do all of my development)
>>>>
>>>> Nyall
>>>>
>>>>>
>>>>> Sincerely
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/26df9e0c/attachment.htm>

From nyall.dawson at gmail.com  Mon Jan 15 13:31:29 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 16 Jan 2024 07:31:29 +1000
Subject: [QGIS-Developer] Running unit tests without "make install"
In-Reply-To: <CAKKm1vGxh9RytPh_4=MgYyTRsuyn1=WVxP5b3VPchp3HZ5OXAw@mail.gmail.com>
References: <CAKKm1vHTgTNfW4=iPoC9bOenHA3mEC4ssAzNgzSnSUMrhWoBSQ@mail.gmail.com>
 <CAB28AsjwAqWkORV40j8ub9JGKGddpZAapyw_9tNV8a+u-HNBMA@mail.gmail.com>
 <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
 <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>
 <CAB28Asg8tuTAW_8hghxrM-fnCbqSSet39oDaROd55ECQqFB49A@mail.gmail.com>
 <CAKKm1vGxh9RytPh_4=MgYyTRsuyn1=WVxP5b3VPchp3HZ5OXAw@mail.gmail.com>
Message-ID: <CAB28AsioW_XU_sm64DfzONO2g9-23cEJ4GkjNmeg7o=cftOm+w@mail.gmail.com>

On Tue, 16 Jan 2024, 7:28?am Thomas Larsen Wessel, <mrvelle at gmail.com>
wrote:

> Thanks for having a look at it :) I ran a complete test and saved the test
> output to this gist. Is that what you were looking for? Please tell me what
> other info you need.
>
> https://gist.github.com/velle/b195bee9a5d63e95ea7aa600b7833be1
>

Try with "ctest -v" to get the full log of the tests

Nyall



>
> On Mon, Jan 15, 2024 at 7:54?AM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
>
>>
>>
>> On Mon, 15 Jan 2024, 3:42?pm Thomas Larsen Wessel, <mrvelle at gmail.com>
>> wrote:
>>
>>> When you guys run these tests locally, do they all pass?
>>>
>>> After some fiddling I have removed some errors, caused by incorrect
>>> build setup. But I still have  19 failing tests.
>>>
>>> 2 - checkGitStatus (Failed)
>>> 22 - ProcessingGrass7AlgorithmsRasterTestPt2 (Failed)
>>> 24 - ProcessingOtbAlgorithmsTest (Failed)
>>> 46 - test_core_compositionconverter (Failed)
>>> 108 - test_core_layoutpicture (Failed)
>>> 177 - test_core_settingsentry (Failed)
>>> 280 - test_gui_filedownloader (Subprocess aborted)
>>> 288 - test_gui_featurelistcombobox (Subprocess aborted)
>>> 298 - test_gui_queryresultwidget (Subprocess aborted)
>>> 302 - test_3d_3drendering (Failed)
>>> 309 - test_3d_mesh3drendering (Failed)
>>> 332 - test_provider_wcsprovider (Failed)
>>> 413 - PyQgsAnnotation (Failed)
>>> 489 - PyQgsExternalStorageWebDav (Failed)
>>> 490 - PyQgsExternalStorageAwsS3 (Failed)
>>> 600 - PyQgsMapCanvas (Failed)
>>> 601 - PyQgsMapCanvasAnnotationItem (Failed)
>>> 672 - PyQgsProcessExecutablePt1 (Failed)
>>> 673 - PyQgsProcessExecutablePt2 (Failed)
>>>
>>> I think I understand checkGitStatus and can safely ignore that one. But
>>> what about the rest? Is it "normal" that so many tests fail when running
>>> tests locally?
>>>
>>
>> That's more than I'd expect to fail on 22.04 -- at least, the main qgis
>> ci workflow uses 22.04 and most of these are passing !
>>
>> (See https://github.com/qgis/QGIS/blob/master/.ci/test_flaky.txt and
>> https://github.com/qgis/QGIS/blob/master/.ci/test_blocklist_qt5.txt for
>> lists of the tests skipped on the GitHub workflows)
>>
>>
>>> Would any of these tests give a different result if I first ran "make
>>> install"?
>>>
>>
>> Unlikely.
>>
>> I'd be interested to see a full log of the failures if you want to upload
>> it to a gist/Pastebin/ somewhere.
>>
>> Nyall
>>
>>
>>> Im running Ubuntu 22.04, and installed all dependencies via APT as
>>> advised in the qgis build docs. I built QGIS release-3_34 from source and
>>> am now trying to test that build, by running "ctest".
>>>
>>>
>>> On Mon, Jan 1, 2024 at 12:34?AM Thomas Larsen Wessel <mrvelle at gmail.com>
>>> wrote:
>>>
>>>> Thanks both of you :) And happy new year.
>>>>
>>>> On Sun, Dec 31, 2023 at 11:38?PM Nyall Dawson <nyall.dawson at gmail.com>
>>>> wrote:
>>>>
>>>>>
>>>>>
>>>>> On Mon, 1 Jan 2024, 6:36?am Thomas Larsen Wessel via QGIS-Developer, <
>>>>> qgis-developer at lists.osgeo.org> wrote:
>>>>>
>>>>>> The docs (
>>>>>> https://docs.qgis.org/3.28/en/docs/developers_guide/unittesting.html#run-your-tests)
>>>>>> specify: *make && make install && make test*.
>>>>>>
>>>>>> I would rather not run make install, since I have another instance of
>>>>>> QGIS installed via APT, and I worry running make install will somehow make
>>>>>> a mess and leave me without a working instance.
>>>>>>
>>>>>> But is it really necessary to run make install before make run? In
>>>>>> fact it seems more natural to me to test before installing!
>>>>>>
>>>>>
>>>>> Try running "ctest" from your build directory. There's no need to
>>>>> install if doing it this way. (It's how I do all of my development)
>>>>>
>>>>> Nyall
>>>>>
>>>>>>
>>>>>> Sincerely
>>>>>> _______________________________________________
>>>>>> QGIS-Developer mailing list
>>>>>> QGIS-Developer at lists.osgeo.org
>>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240116/3dd2d179/attachment-0001.htm>

From mrvelle at gmail.com  Mon Jan 15 15:14:21 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Tue, 16 Jan 2024 00:14:21 +0100
Subject: [QGIS-Developer] Running unit tests without "make install"
In-Reply-To: <CAB28AsioW_XU_sm64DfzONO2g9-23cEJ4GkjNmeg7o=cftOm+w@mail.gmail.com>
References: <CAKKm1vHTgTNfW4=iPoC9bOenHA3mEC4ssAzNgzSnSUMrhWoBSQ@mail.gmail.com>
 <CAB28AsjwAqWkORV40j8ub9JGKGddpZAapyw_9tNV8a+u-HNBMA@mail.gmail.com>
 <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
 <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>
 <CAB28Asg8tuTAW_8hghxrM-fnCbqSSet39oDaROd55ECQqFB49A@mail.gmail.com>
 <CAKKm1vGxh9RytPh_4=MgYyTRsuyn1=WVxP5b3VPchp3HZ5OXAw@mail.gmail.com>
 <CAB28AsioW_XU_sm64DfzONO2g9-23cEJ4GkjNmeg7o=cftOm+w@mail.gmail.com>
Message-ID: <CAKKm1vHM2-f4bLbiiVLYWiPkvknH+=tyuLWSbEd4uEaXj_fCyQ@mail.gmail.com>

I mistakenly forgot to post the corresponding log (LastTest.log) before,
but here it is:
https://gist.github.com/velle/023e0cc6c3b5f134cdab3219cb9a8863

Its running the test with the verbose flag now, but that will take an hour
or so. And as far as I can tell it does not contain more information than
the above, though it may be formatted in a more helpful way.

On Mon, Jan 15, 2024 at 10:31?PM Nyall Dawson <nyall.dawson at gmail.com>
wrote:

>
>
> On Tue, 16 Jan 2024, 7:28?am Thomas Larsen Wessel, <mrvelle at gmail.com>
> wrote:
>
>> Thanks for having a look at it :) I ran a complete test and saved the
>> test output to this gist. Is that what you were looking for? Please tell me
>> what other info you need.
>>
>> https://gist.github.com/velle/b195bee9a5d63e95ea7aa600b7833be1
>>
>
> Try with "ctest -v" to get the full log of the tests
>
> Nyall
>
>
>
>>
>> On Mon, Jan 15, 2024 at 7:54?AM Nyall Dawson <nyall.dawson at gmail.com>
>> wrote:
>>
>>>
>>>
>>> On Mon, 15 Jan 2024, 3:42?pm Thomas Larsen Wessel, <mrvelle at gmail.com>
>>> wrote:
>>>
>>>> When you guys run these tests locally, do they all pass?
>>>>
>>>> After some fiddling I have removed some errors, caused by incorrect
>>>> build setup. But I still have  19 failing tests.
>>>>
>>>> 2 - checkGitStatus (Failed)
>>>> 22 - ProcessingGrass7AlgorithmsRasterTestPt2 (Failed)
>>>> 24 - ProcessingOtbAlgorithmsTest (Failed)
>>>> 46 - test_core_compositionconverter (Failed)
>>>> 108 - test_core_layoutpicture (Failed)
>>>> 177 - test_core_settingsentry (Failed)
>>>> 280 - test_gui_filedownloader (Subprocess aborted)
>>>> 288 - test_gui_featurelistcombobox (Subprocess aborted)
>>>> 298 - test_gui_queryresultwidget (Subprocess aborted)
>>>> 302 - test_3d_3drendering (Failed)
>>>> 309 - test_3d_mesh3drendering (Failed)
>>>> 332 - test_provider_wcsprovider (Failed)
>>>> 413 - PyQgsAnnotation (Failed)
>>>> 489 - PyQgsExternalStorageWebDav (Failed)
>>>> 490 - PyQgsExternalStorageAwsS3 (Failed)
>>>> 600 - PyQgsMapCanvas (Failed)
>>>> 601 - PyQgsMapCanvasAnnotationItem (Failed)
>>>> 672 - PyQgsProcessExecutablePt1 (Failed)
>>>> 673 - PyQgsProcessExecutablePt2 (Failed)
>>>>
>>>> I think I understand checkGitStatus and can safely ignore that one. But
>>>> what about the rest? Is it "normal" that so many tests fail when running
>>>> tests locally?
>>>>
>>>
>>> That's more than I'd expect to fail on 22.04 -- at least, the main qgis
>>> ci workflow uses 22.04 and most of these are passing !
>>>
>>> (See https://github.com/qgis/QGIS/blob/master/.ci/test_flaky.txt and
>>> https://github.com/qgis/QGIS/blob/master/.ci/test_blocklist_qt5.txt for
>>> lists of the tests skipped on the GitHub workflows)
>>>
>>>
>>>> Would any of these tests give a different result if I first ran "make
>>>> install"?
>>>>
>>>
>>> Unlikely.
>>>
>>> I'd be interested to see a full log of the failures if you want to
>>> upload it to a gist/Pastebin/ somewhere.
>>>
>>> Nyall
>>>
>>>
>>>> Im running Ubuntu 22.04, and installed all dependencies via APT as
>>>> advised in the qgis build docs. I built QGIS release-3_34 from source and
>>>> am now trying to test that build, by running "ctest".
>>>>
>>>>
>>>> On Mon, Jan 1, 2024 at 12:34?AM Thomas Larsen Wessel <mrvelle at gmail.com>
>>>> wrote:
>>>>
>>>>> Thanks both of you :) And happy new year.
>>>>>
>>>>> On Sun, Dec 31, 2023 at 11:38?PM Nyall Dawson <nyall.dawson at gmail.com>
>>>>> wrote:
>>>>>
>>>>>>
>>>>>>
>>>>>> On Mon, 1 Jan 2024, 6:36?am Thomas Larsen Wessel via QGIS-Developer, <
>>>>>> qgis-developer at lists.osgeo.org> wrote:
>>>>>>
>>>>>>> The docs (
>>>>>>> https://docs.qgis.org/3.28/en/docs/developers_guide/unittesting.html#run-your-tests)
>>>>>>> specify: *make && make install && make test*.
>>>>>>>
>>>>>>> I would rather not run make install, since I have another instance
>>>>>>> of QGIS installed via APT, and I worry running make install will somehow
>>>>>>> make a mess and leave me without a working instance.
>>>>>>>
>>>>>>> But is it really necessary to run make install before make run? In
>>>>>>> fact it seems more natural to me to test before installing!
>>>>>>>
>>>>>>
>>>>>> Try running "ctest" from your build directory. There's no need to
>>>>>> install if doing it this way. (It's how I do all of my development)
>>>>>>
>>>>>> Nyall
>>>>>>
>>>>>>>
>>>>>>> Sincerely
>>>>>>> _______________________________________________
>>>>>>> QGIS-Developer mailing list
>>>>>>> QGIS-Developer at lists.osgeo.org
>>>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>>
>>>>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240116/913edcfd/attachment.htm>

From rbenet71 at gmail.com  Mon Jan 15 14:59:53 2024
From: rbenet71 at gmail.com (rbenet71 at gmail.com)
Date: Mon, 15 Jan 2024 23:59:53 +0100
Subject: [QGIS-Developer] RV: PyQGIS QgsLayoutExporter gives error
 "QPen::setWidthF: Setting a pen width that is out of range"
In-Reply-To: <CAB28Asgx5OdE36wd4isTV1gFtcqVromM-m=+Y+oiExPGYb0+_w@mail.gmail.com>
References: <004401da25d5$155c8e60$4015ab20$@gmail.com>
 <CAPGg4HDg9gng2k=jYFwJgxvSKPN5MGJWNGCw9QFzh3AcOpxHdw@mail.gmail.com>
 <CAPGg4HBkZ6DMLyKxez0t43fUrZ56gYRtc=sn=cwx=Ze7NoJ=Gw@mail.gmail.com>
 <000201da460f$20a3f240$61ebd6c0$@gmail.com>
 <000701da46c4$a030ad90$e09208b0$@gmail.com>
 <CAB28Asgx5OdE36wd4isTV1gFtcqVromM-m=+Y+oiExPGYb0+_w@mail.gmail.com>
Message-ID: <00af01da4806$8d534820$a7f9d860$@gmail.com>

Hi Nyall,
 
                Thank you so much for your answer.
 
                    I put in yellow myAtlas.beginRender()
                 myAtlas.next()
 
                In my app there are more code obviously, but not affect, to generate the picture/PDF.
 
                For mi the problem is inside this order:
exporter.exportToPdf(file_name,pdf_settings)
 
                Something inside this order give the error.
 
                If I generate the picture with Qgis desktop program all works perfect, but if I do with ?exporter.exportToPdf(file_name,pdf_settings)? then some elements not appear.
 
                Here you have and example.
 
                General Map have a lot of elements, I write a box where I make zoom.

                In Zoon_Map, you can see elements. Some of this elements not appear if I create the map with my code.
 

                I write a circle around and element.
 
                Thank you so much for your attention in advance.
 
Kind regards,
 
 
Robert Benet
De: Nyall Dawson <nyall.dawson at gmail.com> 
Enviado el: lunes, 15 de enero de 2024 7:57
Para: Roberto Benet <rbenet71 at gmail.com>
CC: qgis-developer <qgis-developer at lists.osgeo.org>
Asunto: Re: [QGIS-Developer] RV: PyQGIS QgsLayoutExporter gives error "QPen::setWidthF: Setting a pen width that is out of range"
 
 
On Sun, 14 Jan 2024, 6:35?pm Robert via QGIS-Developer, <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org> > wrote:
 
# Generate atlas
# Es una QgsLayoutAtlas
myAtlas.beginRender()
myAtlas.next()
for i in range(0, myAtlas.count()):
 
    exporter = QgsLayoutExporter(myAtlas.layout())
file_name=os.path.join(dir_destiny,'Individuals')+'/'+myAtlas.currentFilename()+".pdf"   
 
    pdf_settings=QgsLayoutExporter.PdfExportSettings()
    pdf_settings.forceVectorOutput=False
    pdf_settings.exportMetadata = False
    pdf_settings.appendGeoreference = False
    
    #pdf_settings.textRenderFormat = QgsRenderContext.TextFormatAlwaysOutlines  # For "Always Export Text as Paths"
    pdf_settings.textRenderFormat = QgsRenderContext.TextFormatAlwaysText # For "Always Export Text as Text Objects"
 
    pdf_settings.rasterizeWholeImage = True # For "Disable tiled raster layer exports" Hace que ocupe menos si es TRUE
    pdf_settings.simplifyGeometries = False
 
    exporter.exportToPdf(file_name,pdf_settings)
 
Thank you In advance for your attention and help.
 
Have you stripped code out of this loop? Eg I can't see any call to atlas.next() within the loop.
 
In any case what you have looks generally ok. You'd need to share more of your code or project to diagnose further.
 
Nyall
 
Kind regards,
 
Robert Benet
 
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> 
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/4c21acb8/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 692698 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/4c21acb8/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 1677794 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/4c21acb8/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: General_Map.PNG
Type: image/png
Size: 692698 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/4c21acb8/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Zoom_Map.PNG
Type: image/png
Size: 1677794 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240115/4c21acb8/attachment-0007.png>

From mrvelle at gmail.com  Tue Jan 16 03:42:02 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Tue, 16 Jan 2024 12:42:02 +0100
Subject: [QGIS-Developer] Running unit tests without "make install"
In-Reply-To: <CAKKm1vHM2-f4bLbiiVLYWiPkvknH+=tyuLWSbEd4uEaXj_fCyQ@mail.gmail.com>
References: <CAKKm1vHTgTNfW4=iPoC9bOenHA3mEC4ssAzNgzSnSUMrhWoBSQ@mail.gmail.com>
 <CAB28AsjwAqWkORV40j8ub9JGKGddpZAapyw_9tNV8a+u-HNBMA@mail.gmail.com>
 <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
 <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>
 <CAB28Asg8tuTAW_8hghxrM-fnCbqSSet39oDaROd55ECQqFB49A@mail.gmail.com>
 <CAKKm1vGxh9RytPh_4=MgYyTRsuyn1=WVxP5b3VPchp3HZ5OXAw@mail.gmail.com>
 <CAB28AsioW_XU_sm64DfzONO2g9-23cEJ4GkjNmeg7o=cftOm+w@mail.gmail.com>
 <CAKKm1vHM2-f4bLbiiVLYWiPkvknH+=tyuLWSbEd4uEaXj_fCyQ@mail.gmail.com>
Message-ID: <CAKKm1vGu00Q2HN0ufpq2OAxgX2m_uWZ=_=B0VVPrXSK+1KQxKA@mail.gmail.com>

And a related question: I see that some of the tests create/show some
GUI-elements, even if just for fractions of a second. I have been both
typing and browsing while the tests have been running. Is that safe, or am
I potentially causing tests to fail?

On Tue, Jan 16, 2024 at 12:14?AM Thomas Larsen Wessel <mrvelle at gmail.com>
wrote:

> I mistakenly forgot to post the corresponding log (LastTest.log) before,
> but here it is:
> https://gist.github.com/velle/023e0cc6c3b5f134cdab3219cb9a8863
>
> Its running the test with the verbose flag now, but that will take an hour
> or so. And as far as I can tell it does not contain more information than
> the above, though it may be formatted in a more helpful way.
>
> On Mon, Jan 15, 2024 at 10:31?PM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
>
>>
>>
>> On Tue, 16 Jan 2024, 7:28?am Thomas Larsen Wessel, <mrvelle at gmail.com>
>> wrote:
>>
>>> Thanks for having a look at it :) I ran a complete test and saved the
>>> test output to this gist. Is that what you were looking for? Please tell me
>>> what other info you need.
>>>
>>> https://gist.github.com/velle/b195bee9a5d63e95ea7aa600b7833be1
>>>
>>
>> Try with "ctest -v" to get the full log of the tests
>>
>> Nyall
>>
>>
>>
>>>
>>> On Mon, Jan 15, 2024 at 7:54?AM Nyall Dawson <nyall.dawson at gmail.com>
>>> wrote:
>>>
>>>>
>>>>
>>>> On Mon, 15 Jan 2024, 3:42?pm Thomas Larsen Wessel, <mrvelle at gmail.com>
>>>> wrote:
>>>>
>>>>> When you guys run these tests locally, do they all pass?
>>>>>
>>>>> After some fiddling I have removed some errors, caused by incorrect
>>>>> build setup. But I still have  19 failing tests.
>>>>>
>>>>> 2 - checkGitStatus (Failed)
>>>>> 22 - ProcessingGrass7AlgorithmsRasterTestPt2 (Failed)
>>>>> 24 - ProcessingOtbAlgorithmsTest (Failed)
>>>>> 46 - test_core_compositionconverter (Failed)
>>>>> 108 - test_core_layoutpicture (Failed)
>>>>> 177 - test_core_settingsentry (Failed)
>>>>> 280 - test_gui_filedownloader (Subprocess aborted)
>>>>> 288 - test_gui_featurelistcombobox (Subprocess aborted)
>>>>> 298 - test_gui_queryresultwidget (Subprocess aborted)
>>>>> 302 - test_3d_3drendering (Failed)
>>>>> 309 - test_3d_mesh3drendering (Failed)
>>>>> 332 - test_provider_wcsprovider (Failed)
>>>>> 413 - PyQgsAnnotation (Failed)
>>>>> 489 - PyQgsExternalStorageWebDav (Failed)
>>>>> 490 - PyQgsExternalStorageAwsS3 (Failed)
>>>>> 600 - PyQgsMapCanvas (Failed)
>>>>> 601 - PyQgsMapCanvasAnnotationItem (Failed)
>>>>> 672 - PyQgsProcessExecutablePt1 (Failed)
>>>>> 673 - PyQgsProcessExecutablePt2 (Failed)
>>>>>
>>>>> I think I understand checkGitStatus and can safely ignore that one.
>>>>> But what about the rest? Is it "normal" that so many tests fail when
>>>>> running tests locally?
>>>>>
>>>>
>>>> That's more than I'd expect to fail on 22.04 -- at least, the main qgis
>>>> ci workflow uses 22.04 and most of these are passing !
>>>>
>>>> (See https://github.com/qgis/QGIS/blob/master/.ci/test_flaky.txt and
>>>> https://github.com/qgis/QGIS/blob/master/.ci/test_blocklist_qt5.txt
>>>> for lists of the tests skipped on the GitHub workflows)
>>>>
>>>>
>>>>> Would any of these tests give a different result if I first ran "make
>>>>> install"?
>>>>>
>>>>
>>>> Unlikely.
>>>>
>>>> I'd be interested to see a full log of the failures if you want to
>>>> upload it to a gist/Pastebin/ somewhere.
>>>>
>>>> Nyall
>>>>
>>>>
>>>>> Im running Ubuntu 22.04, and installed all dependencies via APT as
>>>>> advised in the qgis build docs. I built QGIS release-3_34 from source and
>>>>> am now trying to test that build, by running "ctest".
>>>>>
>>>>>
>>>>> On Mon, Jan 1, 2024 at 12:34?AM Thomas Larsen Wessel <
>>>>> mrvelle at gmail.com> wrote:
>>>>>
>>>>>> Thanks both of you :) And happy new year.
>>>>>>
>>>>>> On Sun, Dec 31, 2023 at 11:38?PM Nyall Dawson <nyall.dawson at gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> On Mon, 1 Jan 2024, 6:36?am Thomas Larsen Wessel via QGIS-Developer,
>>>>>>> <qgis-developer at lists.osgeo.org> wrote:
>>>>>>>
>>>>>>>> The docs (
>>>>>>>> https://docs.qgis.org/3.28/en/docs/developers_guide/unittesting.html#run-your-tests)
>>>>>>>> specify: *make && make install && make test*.
>>>>>>>>
>>>>>>>> I would rather not run make install, since I have another instance
>>>>>>>> of QGIS installed via APT, and I worry running make install will somehow
>>>>>>>> make a mess and leave me without a working instance.
>>>>>>>>
>>>>>>>> But is it really necessary to run make install before make run? In
>>>>>>>> fact it seems more natural to me to test before installing!
>>>>>>>>
>>>>>>>
>>>>>>> Try running "ctest" from your build directory. There's no need to
>>>>>>> install if doing it this way. (It's how I do all of my development)
>>>>>>>
>>>>>>> Nyall
>>>>>>>
>>>>>>>>
>>>>>>>> Sincerely
>>>>>>>> _______________________________________________
>>>>>>>> QGIS-Developer mailing list
>>>>>>>> QGIS-Developer at lists.osgeo.org
>>>>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>>> Unsubscribe:
>>>>>>>> https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>>>
>>>>>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240116/4f35e68f/attachment.htm>

From strk at kbt.io  Tue Jan 16 09:14:45 2024
From: strk at kbt.io (Sandro Santilli)
Date: Tue, 16 Jan 2024 18:14:45 +0100
Subject: [QGIS-Developer] Running unit tests without "make install"
In-Reply-To: <CAKKm1vGxh9RytPh_4=MgYyTRsuyn1=WVxP5b3VPchp3HZ5OXAw@mail.gmail.com>
References: <CAKKm1vHTgTNfW4=iPoC9bOenHA3mEC4ssAzNgzSnSUMrhWoBSQ@mail.gmail.com>
 <CAB28AsjwAqWkORV40j8ub9JGKGddpZAapyw_9tNV8a+u-HNBMA@mail.gmail.com>
 <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
 <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>
 <CAB28Asg8tuTAW_8hghxrM-fnCbqSSet39oDaROd55ECQqFB49A@mail.gmail.com>
 <CAKKm1vGxh9RytPh_4=MgYyTRsuyn1=WVxP5b3VPchp3HZ5OXAw@mail.gmail.com>
Message-ID: <Zaa5hTqXGbfMDfx5@c23>

On Mon, Jan 15, 2024 at 10:28:19PM +0100, Thomas Larsen Wessel via QGIS-Developer wrote:
> Thanks for having a look at it :) I ran a complete test and saved the test
> output to this gist. Is that what you were looking for? Please tell me what
> other info you need.
> 
> https://gist.github.com/velle/b195bee9a5d63e95ea7aa600b7833be1

May I suggest to file a ticket for each of those failures ?
Thee's a "testsuite" label that can be used for them, at the moment
there are 13 open tickets with that label, but only a few are failures
in tests:

  https://github.com/qgis/qgis/issues?q=is%3Aopen+is%3Aissue+label%3Atestsuite

Having them all will hopefully help improving the ability of
developers to run those tests successfully.

--strk;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 659 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240116/2a03db5a/attachment.sig>

From rhea.moubarak at gmail.com  Tue Jan 16 09:17:17 2024
From: rhea.moubarak at gmail.com (Rhea)
Date: Tue, 16 Jan 2024 18:17:17 +0100
Subject: [QGIS-Developer] unsubscribing is unsuccessful
Message-ID: <41173FE4-6A07-43AC-BA07-A1C29E8BA28E@gmail.com>

Hello,

I?ve been trying to unsubscribe its been months now and it?s not working, i keep on receiving emails as if im still part of the list.

I followed this link : https://lists.osgeo.org/mailman/listinfo/qgis-developer and i wrote my email, clicked unsubscribe, got and email and still it?s not working.

Please help.

Thank you.

From even.rouault at spatialys.com  Tue Jan 16 09:20:22 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Jan 2024 18:20:22 +0100
Subject: [QGIS-Developer] unsubscribing is unsuccessful
In-Reply-To: <41173FE4-6A07-43AC-BA07-A1C29E8BA28E@gmail.com>
References: <41173FE4-6A07-43AC-BA07-A1C29E8BA28E@gmail.com>
Message-ID: <1bd09d31-c1ab-4a93-a110-a0694708f9d3@spatialys.com>

Rhea,

I've just unsubscribed you (from the admin interface)

Even

Le 16/01/2024 ? 18:17, Rhea via QGIS-Developer a ?crit?:
> Hello,
>
> I?ve been trying to unsubscribe its been months now and it?s not working, i keep on receiving emails as if im still part of the list.
>
> I followed this link : https://lists.osgeo.org/mailman/listinfo/qgis-developer and i wrote my email, clicked unsubscribe, got and email and still it?s not working.
>
> Please help.
>
> Thank you.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From rdmailings at duif.net  Tue Jan 16 11:07:48 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 16 Jan 2024 20:07:48 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
Message-ID: <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>

No hints :-) ?

I now have a live connection to the db, and can reproduce the issue here in master on Linux too.

It's really strange: have a local db, I can even copy features from the attribute table to my local table, and THEN they show up

ogrinfo shows exactly the same information of the db ( using -so).

coordinates are fine too:

select coord, ST_AsWKT(coord) from tblQgisProjecten tqp limit 1

coord                                    |ST_AsWKT(coord)                         |
-----------------------------------------+----------------------------------------+
POINT (168937.186906043 175180.302889316)|POINT(168937.186906043 175180.302889316)|

could it be in char encoding, or in a strange attribute value? We already tried to create a simple view with only coord and ID, but that did not show something either.

As I cannot share the connection info, I'm happy to share my screen or so to show this.

SELECT version();
version()|
---------+
8.0.34-26|

but is an upgraded db, not sure where it came from

Regards,

Richard Duivenvoorde


On 1/12/24 15:06, Richard Duivenvoorde via QGIS-Developer wrote:
> Hi Devs,
> 
> I was contacted by a company who after upgrading their db and QGIS did NOT see the points anymore.
> 
> Note that 'all worked' when they used QGIS 3.10 (and an older mysql db)
> After a MySQL database upgrade, QGIS 3.10 was not able to connect anymore (apparently TLS issues), so they have to use 3.28 or higher.
> 
> A small export loaded in my local db was OK in QGIS.
> 
> So in a online meeting, sharing their screen I tried:
> 
> - opening the db with ogrinfo: all data is visible (POINT(.....)) showing correct coords and attributes
> - loading the table (25000 records) in QGIS: data: EPSG:31370 project EPSG:31370 :
>  ????- attribute table shows all records
>  ????- mapcanvas empty!
>  ????- able to 'zoom to' records (Belgium), but NO points visible/selectable
> - creating a tiny table with only id and geom column of 3 records: mapcanvas emtpy
> - export the loaded (but invisible) layer to a geopackage: points AND attributes VISIBLE!
> - loading the data in dbeaver: all data is shown in the spatial tab
> 
> There was an encoding issue when exporting to gpkg, but we tried to create a smaller table (very few columns): nothing.
> 
> Anybody familiar with QGIS and Mysql has an idea what this not showing of any point/geom could be?
> 
> Any hint appreciated, I plan to try to get a connection to the db myself, but hoping I just miss something obvious...
> 
> Regards,
> 
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From apasotti at gmail.com  Tue Jan 16 12:14:50 2024
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 16 Jan 2024 21:14:50 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
Message-ID: <CAL5Q672=bpTtTCd5iuC0OrSrEAtz9vuoKEpy_wb4iS8BJwmb-Q@mail.gmail.com>

Hi Richard,

sorry, no hints except to check the logs and the QGIS dev tools query
logger: is there anything suspicious?

On Tue, Jan 16, 2024 at 8:08?PM Richard Duivenvoorde via
QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
>
> No hints :-) ?
>
> I now have a live connection to the db, and can reproduce the issue here in master on Linux too.
>
> It's really strange: have a local db, I can even copy features from the attribute table to my local table, and THEN they show up
>
> ogrinfo shows exactly the same information of the db ( using -so).
>
> coordinates are fine too:
>
> select coord, ST_AsWKT(coord) from tblQgisProjecten tqp limit 1
>
> coord                                    |ST_AsWKT(coord)                         |
> -----------------------------------------+----------------------------------------+
> POINT (168937.186906043 175180.302889316)|POINT(168937.186906043 175180.302889316)|
>
> could it be in char encoding, or in a strange attribute value? We already tried to create a simple view with only coord and ID, but that did not show something either.
>
> As I cannot share the connection info, I'm happy to share my screen or so to show this.
>
> SELECT version();
> version()|
> ---------+
> 8.0.34-26|
>
> but is an upgraded db, not sure where it came from
>
> Regards,
>
> Richard Duivenvoorde
>
>
> On 1/12/24 15:06, Richard Duivenvoorde via QGIS-Developer wrote:
> > Hi Devs,
> >
> > I was contacted by a company who after upgrading their db and QGIS did NOT see the points anymore.
> >
> > Note that 'all worked' when they used QGIS 3.10 (and an older mysql db)
> > After a MySQL database upgrade, QGIS 3.10 was not able to connect anymore (apparently TLS issues), so they have to use 3.28 or higher.
> >
> > A small export loaded in my local db was OK in QGIS.
> >
> > So in a online meeting, sharing their screen I tried:
> >
> > - opening the db with ogrinfo: all data is visible (POINT(.....)) showing correct coords and attributes
> > - loading the table (25000 records) in QGIS: data: EPSG:31370 project EPSG:31370 :
> >      - attribute table shows all records
> >      - mapcanvas empty!
> >      - able to 'zoom to' records (Belgium), but NO points visible/selectable
> > - creating a tiny table with only id and geom column of 3 records: mapcanvas emtpy
> > - export the loaded (but invisible) layer to a geopackage: points AND attributes VISIBLE!
> > - loading the data in dbeaver: all data is shown in the spatial tab
> >
> > There was an encoding issue when exporting to gpkg, but we tried to create a smaller table (very few columns): nothing.
> >
> > Anybody familiar with QGIS and Mysql has an idea what this not showing of any point/geom could be?
> >
> > Any hint appreciated, I plan to try to get a connection to the db myself, but hoping I just miss something obvious...
> >
> > Regards,
> >
> > Richard Duivenvoorde
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From nyall.dawson at gmail.com  Tue Jan 16 15:04:44 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 17 Jan 2024 09:04:44 +1000
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <CAL5Q672=bpTtTCd5iuC0OrSrEAtz9vuoKEpy_wb4iS8BJwmb-Q@mail.gmail.com>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <CAL5Q672=bpTtTCd5iuC0OrSrEAtz9vuoKEpy_wb4iS8BJwmb-Q@mail.gmail.com>
Message-ID: <CAB28AsgE9vxirfyeKa9KaybEdSZ2FJSJWJtuTw4tS7USHgcHsQ@mail.gmail.com>

On Wed, 17 Jan 2024 at 06:15, Alessandro Pasotti via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi Richard,
>
> sorry, no hints except to check the logs and the QGIS dev tools query
> logger: is there anything suspicious?
>

There's a LOT of open bugs relating to mysql data -- eg
https://github.com/qgis/QGIS/issues/34170 . I suspect it's very rarely
used, and there's either a bug in GDAL or some special handling which needs
adding to QGIS to get this to work.

Perhaps something we could focus on during the upcoming 3.36 bug fix sprint?

Nyall



>
> On Tue, Jan 16, 2024 at 8:08?PM Richard Duivenvoorde via
> QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
> >
> > No hints :-) ?
> >
> > I now have a live connection to the db, and can reproduce the issue here
> in master on Linux too.
> >
> > It's really strange: have a local db, I can even copy features from the
> attribute table to my local table, and THEN they show up
> >
> > ogrinfo shows exactly the same information of the db ( using -so).
> >
> > coordinates are fine too:
> >
> > select coord, ST_AsWKT(coord) from tblQgisProjecten tqp limit 1
> >
> > coord                                    |ST_AsWKT(coord)
>          |
> >
> -----------------------------------------+----------------------------------------+
> > POINT (168937.186906043 175180.302889316)|POINT(168937.186906043
> 175180.302889316)|
> >
> > could it be in char encoding, or in a strange attribute value? We
> already tried to create a simple view with only coord and ID, but that did
> not show something either.
> >
> > As I cannot share the connection info, I'm happy to share my screen or
> so to show this.
> >
> > SELECT version();
> > version()|
> > ---------+
> > 8.0.34-26|
> >
> > but is an upgraded db, not sure where it came from
> >
> > Regards,
> >
> > Richard Duivenvoorde
> >
> >
> > On 1/12/24 15:06, Richard Duivenvoorde via QGIS-Developer wrote:
> > > Hi Devs,
> > >
> > > I was contacted by a company who after upgrading their db and QGIS did
> NOT see the points anymore.
> > >
> > > Note that 'all worked' when they used QGIS 3.10 (and an older mysql db)
> > > After a MySQL database upgrade, QGIS 3.10 was not able to connect
> anymore (apparently TLS issues), so they have to use 3.28 or higher.
> > >
> > > A small export loaded in my local db was OK in QGIS.
> > >
> > > So in a online meeting, sharing their screen I tried:
> > >
> > > - opening the db with ogrinfo: all data is visible (POINT(.....))
> showing correct coords and attributes
> > > - loading the table (25000 records) in QGIS: data: EPSG:31370 project
> EPSG:31370 :
> > >      - attribute table shows all records
> > >      - mapcanvas empty!
> > >      - able to 'zoom to' records (Belgium), but NO points
> visible/selectable
> > > - creating a tiny table with only id and geom column of 3 records:
> mapcanvas emtpy
> > > - export the loaded (but invisible) layer to a geopackage: points AND
> attributes VISIBLE!
> > > - loading the data in dbeaver: all data is shown in the spatial tab
> > >
> > > There was an encoding issue when exporting to gpkg, but we tried to
> create a smaller table (very few columns): nothing.
> > >
> > > Anybody familiar with QGIS and Mysql has an idea what this not showing
> of any point/geom could be?
> > >
> > > Any hint appreciated, I plan to try to get a connection to the db
> myself, but hoping I just miss something obvious...
> > >
> > > Regards,
> > >
> > > Richard Duivenvoorde
> > > _______________________________________________
> > > QGIS-Developer mailing list
> > > QGIS-Developer at lists.osgeo.org
> > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240117/da4fbd45/attachment.htm>

From mrvelle at gmail.com  Tue Jan 16 15:46:47 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Wed, 17 Jan 2024 00:46:47 +0100
Subject: [QGIS-Developer] Running unit tests without "make install"
In-Reply-To: <Zaa5hTqXGbfMDfx5@c23>
References: <CAKKm1vHTgTNfW4=iPoC9bOenHA3mEC4ssAzNgzSnSUMrhWoBSQ@mail.gmail.com>
 <CAB28AsjwAqWkORV40j8ub9JGKGddpZAapyw_9tNV8a+u-HNBMA@mail.gmail.com>
 <CAKKm1vF42s2mKgGnPojXdGa0b_cFSgptEnUgKrQ-de1TbBNR0w@mail.gmail.com>
 <CAKKm1vHp6QwUHouOQ4-ane9=F_2sd50yzGgPbpp1EQyd8VjuiA@mail.gmail.com>
 <CAB28Asg8tuTAW_8hghxrM-fnCbqSSet39oDaROd55ECQqFB49A@mail.gmail.com>
 <CAKKm1vGxh9RytPh_4=MgYyTRsuyn1=WVxP5b3VPchp3HZ5OXAw@mail.gmail.com>
 <Zaa5hTqXGbfMDfx5@c23>
Message-ID: <CAKKm1vF_FQQFL6Z7Qh-g=6CtGK7HzRvn7XYwUofFUohsw=07vw@mail.gmail.com>

@Sandro: Sure :) I will gladly create a ticket for each of those.

@Nyall: Anything you want to comment (regarding the log I uploaded) before
I start creating those tickets? Otherwise, I will start tomorrow.


On Tue, Jan 16, 2024 at 6:14?PM Sandro Santilli <strk at kbt.io> wrote:

> On Mon, Jan 15, 2024 at 10:28:19PM +0100, Thomas Larsen Wessel via
> QGIS-Developer wrote:
> > Thanks for having a look at it :) I ran a complete test and saved the
> test
> > output to this gist. Is that what you were looking for? Please tell me
> what
> > other info you need.
> >
> > https://gist.github.com/velle/b195bee9a5d63e95ea7aa600b7833be1
>
> May I suggest to file a ticket for each of those failures ?
> Thee's a "testsuite" label that can be used for them, at the moment
> there are 13 open tickets with that label, but only a few are failures
> in tests:
>
>
> https://github.com/qgis/qgis/issues?q=is%3Aopen+is%3Aissue+label%3Atestsuite
>
> Having them all will hopefully help improving the ability of
> developers to run those tests successfully.
>
> --strk;
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240117/96df5fa1/attachment.htm>

From nyall.dawson at gmail.com  Wed Jan 17 02:41:47 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 17 Jan 2024 20:41:47 +1000
Subject: [QGIS-Developer] Adding a "solution proposed" label?
Message-ID: <CAB28AsiFjznNjJTfjRzSaoSsy1Dpo0PWmg-9f09504bwb1svyQ@mail.gmail.com>

Hey all,

What do we think about adding a new label for GitHub tickets for "solution
proposed"? This could be used for tickets like
https://github.com/qgis/QGIS/issues/55871 where the issue is likely a user
error and a potential solution has been suggested.

Stale bot could auto close these like it does with feedback tickets.

It seems wrong to just close that issue without giving the reporter time to
reply, but at the same time it's highly likely to become just another
invalid open ticket if it's not actively managed in some way...

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240117/09782b4e/attachment-0001.htm>

From uclaros at gmail.com  Wed Jan 17 04:50:01 2024
From: uclaros at gmail.com (Stefanos Natsis)
Date: Wed, 17 Jan 2024 14:50:01 +0200
Subject: [QGIS-Developer] Adding a "solution proposed" label?
Message-ID: <CADBCwLa+QyDmWeMjWQZGbtDyjyFY5VuGjq=1Hpk7o292N4Vk8A@mail.gmail.com>

Hi Nyall,

How about a 'Not a bug' one instead? 'Solution proposed' kind of implies a
way to avoid a valid bug.

Stefanos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240117/42e23dc5/attachment.htm>

From julien.cabieces at oslandia.com  Wed Jan 17 05:01:28 2024
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Wed, 17 Jan 2024 14:01:28 +0100
Subject: [QGIS-Developer] Adding a "solution proposed" label?
In-Reply-To: <CAB28AsiFjznNjJTfjRzSaoSsy1Dpo0PWmg-9f09504bwb1svyQ@mail.gmail.com>
References: <CAB28AsiFjznNjJTfjRzSaoSsy1Dpo0PWmg-9f09504bwb1svyQ@mail.gmail.com>
Message-ID: <878r4oqfha.fsf@julienlaptop.home>


Hi,

Why not using simply "Feedback" label in this kind of situation ?

Regards,
Julien

> Hey all,
>
> What do we think about adding a new label for GitHub tickets for "solution proposed"? This could be used for tickets like
> https://github.com/qgis/QGIS/issues/55871 where the issue is likely a user error and a potential solution has been suggested.
>
> Stale bot could auto close these like it does with feedback tickets.
>
> It seems wrong to just close that issue without giving the reporter time to reply, but at the same time it's highly likely to become just another
> invalid open ticket if it's not actively managed in some way...
>
> Nyall
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 

Julien Cabieces
Senior Developer at Oslandia
julien.cabieces at oslandia.com

From gdt at lexort.com  Wed Jan 17 05:57:33 2024
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 17 Jan 2024 08:57:33 -0500
Subject: [QGIS-Developer] Adding a "solution proposed" label?
In-Reply-To: <CAB28AsiFjznNjJTfjRzSaoSsy1Dpo0PWmg-9f09504bwb1svyQ@mail.gmail.com>
 (Nyall Dawson via's message of "Wed, 17 Jan 2024 20:41:47 +1000")
References: <CAB28AsiFjznNjJTfjRzSaoSsy1Dpo0PWmg-9f09504bwb1svyQ@mail.gmail.com>
Message-ID: <rmi34uwawqa.fsf@s1.lexort.com>

Nyall Dawson via QGIS-Developer <qgis-developer at lists.osgeo.org> writes:

> What do we think about adding a new label for GitHub tickets for "solution
> proposed"? This could be used for tickets like
> https://github.com/qgis/QGIS/issues/55871 where the issue is likely a user
> error and a potential solution has been suggested.
>
> Stale bot could auto close these like it does with feedback tickets.
>
> It seems wrong to just close that issue without giving the reporter time to
> reply, but at the same time it's highly likely to become just another
> invalid open ticket if it's not actively managed in some way...

My comments are based on my experience maintaining unison (file sync,
not geo), which is also on github.  I find that some combination of
forum culture and github leads to people treating issue trackers as
places to ask for help.  This is not how Free Software used to be.  I
spent a lot of time cleaning up unison issues down to a manageable
number (300 to 75ish), and adopted a strict policy that the issue
tracker is only for

  - things that are bugs in the source code, with evidence

  - well-articulated feature requests that are likely of interest to
    many (fringe ones I file on a wiki page and close the ticket)

That leaves out a lot of what gets put in issues.  One of the issues is
that new issues are typically seen by maintainers while there is a
larger community on a mailinglist.

It also leaves out "random packaging system X doesn't have the version I
want".  Those should of course be filed in X's tracker.

Questions and support requests I close with a pointer to the
mailinglist.

I am entirely ok with hitting close once it is established that there is
not a bug.  I am especially ok when it was a question.  The submitter
can read it while it is closed, and even comment.  It's just that it
doesn't show up in the open ticket list.

In the case of the ticket you referenced, it's clearly not a bug.  So
once that's established, if the user needs help to do what they want,
they should seek help in a help channel, from whoever wants to help
them, rather than it being the obligation of the maintainers who garden
the tracker trying to keep it useful.  You were already more than
gracious and hitting close when you did seems 100% fine.

So I would say:

  Establish a policy that questions are not allowed in the issue
  tracker.  Follow it strictly.

  Close tickets as soon as you can tell that they are not a defect in
  the source code.  If you are wrong  and the person follows up with
  evidence, hit reopen - no big deal.

  Use feedback when it is not clear and you have asked for better
  testing and more log data, but only when you think there could be a bug.

  When there isn't feedback, maybe leave it open if you feel that there
  is a real bug lurking that ought to be addressed, and just close it if
  you don't feel it's over that line.

  For feature requests that are fuzzy, ask that they get shaken out on
  some other forum and then refiled, when they can say with some
  precision what the new feature should do.


From mariaelena.alfano at polito.it  Wed Jan 17 06:57:42 2024
From: mariaelena.alfano at polito.it (Maria Elena  Alfano)
Date: Wed, 17 Jan 2024 14:57:42 +0000
Subject: [QGIS-Developer] Setting up PyCharm for PyQGIS and Qt
Message-ID: <DBBPR05MB6505769E87FB44F540CA88A7F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>

Good morning everyone :) I wanted to ask if anyone knows how to run Python files, which run in QGIS, directly from PyCharm. I tried using this tutorial

https://plugins.qgis.org/planet/tag/pycharm/#:~:text=Setting%20up%20PyCharm%20for%20PyQGIS%20and%20Qt&text=The%20first%20thing%20we%20need,to%20tell%20PyCharm%20about%20it.

 making the necessary modifications specific to my files, and using the Python interpreter from QGIS. However, when I try to use the command 'from qgis.core import QgsRasterLayer, QgsProject,' it tells me that I don't have the qgis.core module.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240117/cb9a360c/attachment.htm>

From johannes.kroeger at wheregroup.com  Wed Jan 17 07:02:34 2024
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=C3=B6ger_=28WhereGroup=29?=)
Date: Wed, 17 Jan 2024 16:02:34 +0100
Subject: [QGIS-Developer] Setting up PyCharm for PyQGIS and Qt
In-Reply-To: <DBBPR05MB6505769E87FB44F540CA88A7F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>
References: <DBBPR05MB6505769E87FB44F540CA88A7F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>
Message-ID: <44006a6b-1b6c-4b36-af88-8878a68ae805@wheregroup.com>

That blogpost is almost 10 years old, things are much easier nowadays :)


Selecting the correct *existing* .bat-file as interpreter is all you 
need to do. See https://gis.stackexchange.com/a/428577/51035


If you are not on Windows, the approach would be different of course.


Cheers, Hannes



On 17.01.24 15:57, Maria Elena Alfano via QGIS-Developer wrote:
> Good morning everyone :) I wanted to ask if anyone knows how to run 
> Python files, which run in QGIS, directly from PyCharm. I tried using 
> this tutorial
>
> https://plugins.qgis.org/planet/tag/pycharm/#:~:text=Setting%20up%20PyCharm%20for%20PyQGIS%20and%20Qt&text=The%20first%20thing%20we%20need,to%20tell%20PyCharm%20about%20it. 
> <https://plugins.qgis.org/planet/tag/pycharm/#:~:text=Setting%20up%20PyCharm%20for%20PyQGIS%20and%20Qt&text=The%20first%20thing%20we%20need,to%20tell%20PyCharm%20about%20it.>
>
> ?making the necessary modifications specific to my files, and using 
> the Python interpreter from QGIS. However, when I try to use the 
> command 'from qgis.core import QgsRasterLayer, QgsProject,' it tells 
> me that I don't have the qgis.core module.
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei derwww.foss-academy.com
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240117/a64f8c7d/attachment-0001.htm>

From mariaelena.alfano at polito.it  Wed Jan 17 07:59:28 2024
From: mariaelena.alfano at polito.it (Maria Elena  Alfano)
Date: Wed, 17 Jan 2024 15:59:28 +0000
Subject: [QGIS-Developer] Setting up PyCharm for PyQGIS and Qt
In-Reply-To: <44006a6b-1b6c-4b36-af88-8878a68ae805@wheregroup.com>
References: <DBBPR05MB6505769E87FB44F540CA88A7F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>
 <44006a6b-1b6c-4b36-af88-8878a68ae805@wheregroup.com>
Message-ID: <DBBPR05MB65057AE57AF482430FC65150F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>

Thank you very much!
But when I select the above *existing.bat file, pycharm tells me "An invalid Python interpreter name 'qgis_process-qgis.bat'!".
Do you have any ideas?


________________________________
From: Johannes Kr?ger (WhereGroup) <johannes.kroeger at wheregroup.com>
Sent: Wednesday, January 17, 2024 4:02 PM
To: Maria Elena Alfano <mariaelena.alfano at polito.it>; qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Setting up PyCharm for PyQGIS and Qt


That blogpost is almost 10 years old, things are much easier nowadays :)

Selecting the correct *existing* .bat-file as interpreter is all you need to do. See https://gis.stackexchange.com/a/428577/51035


If you are not on Windows, the approach would be different of course.


Cheers, Hannes



On 17.01.24 15:57, Maria Elena Alfano via QGIS-Developer wrote:
Good morning everyone :) I wanted to ask if anyone knows how to run Python files, which run in QGIS, directly from PyCharm. I tried using this tutorial

https://plugins.qgis.org/planet/tag/pycharm/#:~:text=Setting%20up%20PyCharm%20for%20PyQGIS%20and%20Qt&text=The%20first%20thing%20we%20need,to%20tell%20PyCharm%20about%20it.

 making the necessary modifications specific to my files, and using the Python interpreter from QGIS. However, when I try to use the command 'from qgis.core import QgsRasterLayer, QgsProject,' it tells me that I don't have the qgis.core module.



_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


--
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei der www.foss-academy.com<http://www.foss-academy.com>
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com<mailto:johannes.kroeger at wheregroup.com>
www.wheregroup.com<http://www.wheregroup.com>
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240117/28e97035/attachment.htm>

From jef at norbit.de  Wed Jan 17 08:12:46 2024
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Wed, 17 Jan 2024 17:12:46 +0100
Subject: [QGIS-Developer] Setting up PyCharm for PyQGIS and Qt
In-Reply-To: <DBBPR05MB65057AE57AF482430FC65150F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>
References: <DBBPR05MB6505769E87FB44F540CA88A7F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>
 <44006a6b-1b6c-4b36-af88-8878a68ae805@wheregroup.com>
 <DBBPR05MB65057AE57AF482430FC65150F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>
Message-ID: <20240117161246.s2twxno7jfs5y33z@norbit.de>

Hi Maria,

On Wed, 17. Jan 2024 at 15:59:28 +0000, Maria Elena Alfano via QGIS-Developer wrote:
> Thank you very much!
> But when I select the above *existing.bat file, pycharm tells me "An invalid Python interpreter name 'qgis_process-qgis.bat'!".
> Do you have any ideas?

python-qgis.bat not qgis_process-qgis.bat.

J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240117/8af1b825/attachment.sig>

From strk at kbt.io  Thu Jan 18 13:01:26 2024
From: strk at kbt.io (Sandro Santilli)
Date: Thu, 18 Jan 2024 22:01:26 +0100
Subject: [QGIS-Developer] Adding a "solution proposed" label?
In-Reply-To: <rmi34uwawqa.fsf@s1.lexort.com>
References: <CAB28AsiFjznNjJTfjRzSaoSsy1Dpo0PWmg-9f09504bwb1svyQ@mail.gmail.com>
 <rmi34uwawqa.fsf@s1.lexort.com>
Message-ID: <ZamRpnUU9p--r9-d@c23>

On Wed, Jan 17, 2024 at 08:57:33AM -0500, Greg Troxel via QGIS-Developer wrote:

> So I would say:
> 
>   Establish a policy that questions are not allowed in the issue
>   tracker.  Follow it strictly.

+1 and there's now an experimental Discourse service of OSGeo that
could be used for questions: https://discourse.osgeo.org
(an appropriate category could be added, on request)

--strk;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 659 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240118/7d0cba31/attachment.sig>

From mrvelle at gmail.com  Fri Jan 19 00:43:12 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Fri, 19 Jan 2024 09:43:12 +0100
Subject: [QGIS-Developer] Adding a "solution proposed" label?
In-Reply-To: <ZamRpnUU9p--r9-d@c23>
References: <CAB28AsiFjznNjJTfjRzSaoSsy1Dpo0PWmg-9f09504bwb1svyQ@mail.gmail.com>
 <rmi34uwawqa.fsf@s1.lexort.com> <ZamRpnUU9p--r9-d@c23>
Message-ID: <CAKKm1vEQ6kYsqMMw51U36Htc5GdwYbu+MJ9ZDww6Uf-pgYX6iA@mail.gmail.com>

Nyall wrote: " It seems wrong to just close that issue without giving the
reporter time to reply  "

If a user spends a long time (for me it sometimes takes as much as a few
hours, believe it or not) to write an issue, believing it actually is a bug
or at least an issue with the docs that ought to be corrected, it will like
seem unappreciated if the issue is closed in the very first
response, specially if that response is very brief and does not contain any
appreciation. Even if that is not how it is intended.

When I report issues it's not always because its a real problem for me; it
is often simply because I believe it's in the interest of the project, and
it's my tiny contribution to that project.

Tickets that are obviously just questions, should IMO be closed
immediately, with advice on where to ask such questions. But when people
report what to them seems like a bug, I would encourage a friendly response
that signals that even if their effort was in vain because it was not a
bug, it actually is appreciated. Especially if it's a well written issue.
I'm afraid that "closed" signals very little appreciation; a lot less
appreciation than "not a bug" and then closing a few days later. Having an
issue closed like that seems/feels almost like having a forum thread
deleted, does it not?

Apropos of appreciation, I really appreciate the work that all of you are
doing for QGIS and other FOSS. Have a nice weekend :)

Sincerely, Thomas


On Thu, Jan 18, 2024 at 10:01?PM Sandro Santilli via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> On Wed, Jan 17, 2024 at 08:57:33AM -0500, Greg Troxel via QGIS-Developer
> wrote:
>
> > So I would say:
> >
> >   Establish a policy that questions are not allowed in the issue
> >   tracker.  Follow it strictly.
>
> +1 and there's now an experimental Discourse service of OSGeo that
> could be used for questions: https://discourse.osgeo.org
> (an appropriate category could be added, on request)
>
> --strk;
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/c87e5fa0/attachment.htm>

From gam17 at riseup.net  Fri Jan 19 01:31:07 2024
From: gam17 at riseup.net (gam17 at riseup.net)
Date: Fri, 19 Jan 2024 09:31:07 +0000
Subject: [QGIS-Developer] sponsored plugin
Message-ID: <18acf45c109a79d5cffcb6a506ce8fae@riseup.net>

Hi everyone,
    like many of you, I have developed and maintained a plugin for many
years completely free of charge.
I have never received any donation or compensation of any kind and now I
would like to find a solution.
Has anyone already found a way to receive donations?
I was thinking of asking for a sponsor that would be displayed during
execution, for example in the window titles or through a specific menu
item like QGIS does (in this way the sponsor would be much less
visible).
What do you think ?
gam17

From jlindsay at uoguelph.ca  Fri Jan 19 07:00:40 2024
From: jlindsay at uoguelph.ca (John Lindsay)
Date: Fri, 19 Jan 2024 15:00:40 +0000
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
Message-ID: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>

Hello everyone,

I am developing a new QGIS plugin (https://plugins.qgis.org/plugins/whitebox_workflows_for_qgis/#plugin-manage) that serves as a frontend for a Python geospatial analysis library called Whitebox Workflows for Python (WbW). The plugin seems to work well with on major exception, it requires that the user have WbW installed. It can be installed quite easily using pip (pip install whitebox-workflows), however, I know that QGIS uses its own localized version of Python, which seems to lack a terminal app access (at least on MacOS). Besides, a better solution would be for the plugin to install this package via pip when it is itself first installed and launched. I tried to accomplish this with the following code:

https://github.com/jblindsay/whitebox_workflows_for_qgis/blob/4e463262f6cfd1987afa2f3f7e0e79656eb8d27e/whitebox_workflows_for_qgis_provider.py#L56

This code, which runs whenever the plugin is launched, first checks to see if whitebox_workflows can be imported and if not, it runs pip from the Python script to install it. Unfortunately, some users have reported issues with this not working correctly:

https://github.com/jblindsay/whitebox_workflows_for_qgis/issues/1
?
[https://opengraph.githubassets.com/a248a1a51b43baa531f4fdf47f85868a01c5785c3dded22234ce269d2c64c9e4/jblindsay/whitebox_workflows_for_qgis/issues/1]<https://github.com/jblindsay/whitebox_workflows_for_qgis/issues/1>
Installation in QGis fails ? Issue #1 ? jblindsay/whitebox_workflows_for_qgis<https://github.com/jblindsay/whitebox_workflows_for_qgis/issues/1>
AttributeError: 'NoneType' object has no attribute 'write' Traceback (most recent call last): File "C:\\Users/thomas.struller/AppData/Roaming/QGIS/QGIS3\\profiles\\default/python/plugins\\whitebox_work...
github.com

So now I'm left trying to figure out what the recommended approach to installing QGIS plugin dependencies is. Any advice from anyone that has successfully dealt with this problem previously? Thanks.

Regards,

John Lindsay



Prof. John Lindsay

Dept. of Geography, Environment & Geomatics,

The University of Guelph,

Room 122, Hutt Building,

E-mail: jlindsay at uoguelph.ca

Phone: (519) 824-4120 ext. 56074

Web: https://geg.uoguelph.ca/faculty/lindsay-john

Research page: https://jblindsay.github.io/ghrg/index.html

WhiteboxTools GIS project: https://www.whiteboxgeo.com/

Twitter: https://twitter.com/whiteboxgeo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/e1c073f7/attachment-0001.htm>

From gdt at lexort.com  Fri Jan 19 09:13:16 2024
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 19 Jan 2024 12:13:16 -0500
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 (John Lindsay via's message of "Fri, 19 Jan 2024 15:00:40 +0000")
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <rmi7ck5xn4j.fsf@s1.lexort.com>

John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org> writes:

> Besides, a better solution would be for the plugin to install this
> package via pip when it is itself first installed and launched. I
> tried to accomplish this with the following code:
>
> https://github.com/jblindsay/whitebox_workflows_for_qgis/blob/4e463262f6cfd1987afa2f3f7e0e79656eb8d27e/whitebox_workflows_for_qgis_provider.py#L56
>
> This code, which runs whenever the plugin is launched, first checks to
> see if whitebox_workflows can be imported and if not, it runs pip from
> the Python script to install it. Unfortunately, some users have
> reported issues with this not working correctly:

(Writing from the UNIX perspective.) 

Perhaps biased by my packaing background, I view any code that downloads
other code at runtime (without an explicit user request) as a security
bug.   This is especially true if it isn't getting sources pinned to a
version and validated by checksum.

That said, there's a lot of interesting questions about how to deal with
dependencies of plugins.   For qgis itself, dependencies are properly
dealt with by a packaging system and that seems ok.

For plugins, I could see treating them as python modules and packaging
them, but qgis wants to have its own package management system.

qgis is usually installed, via packaging, globally (/usr or /usr/pkg, or
similar).  The immediate question is where plugins go.  I'd expect them
to be in the user's file area vs system, unless installing them in some
administrator role.  The next question is, if they depend on something,
what prefixes and install methods are expected for those things, both
regular packages (programs and shlibs) and python modules.  Which is
partly/mostly about what the search paths are in the plugin execution
environment.

Overall, I'd rather see plugins fail with a message and leave
installation as a manual decision than have plugins run pip install.
But I get it that most people probably don't see it that way.

From matthias at opengis.ch  Fri Jan 19 09:20:56 2024
From: matthias at opengis.ch (Matthias Kuhn)
Date: Fri, 19 Jan 2024 18:20:56 +0100
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <rmi7ck5xn4j.fsf@s1.lexort.com>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
Message-ID: <CAC7zN972nWEyj7339+RPw+LJ2wTZTzFnu3vaMBzqqs-Etp54bA@mail.gmail.com>

Hi John,

A former colleague of mine developed "qpip".
This is meant as a pip dependency manager for plugins and will install any
additional dependencies from a supplied requirements.txt in a controlled
way into the user profile folder.

There has never been any big announcement done regarding this plugin, but
it's the best "pip"-like integration into QGIS which I am aware of.

https://github.com/opengisch/qpip

Kind regards
Matthias

On Fri, Jan 19, 2024 at 6:13?PM Greg Troxel via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org> writes:
>
> > Besides, a better solution would be for the plugin to install this
> > package via pip when it is itself first installed and launched. I
> > tried to accomplish this with the following code:
> >
> >
> https://github.com/jblindsay/whitebox_workflows_for_qgis/blob/4e463262f6cfd1987afa2f3f7e0e79656eb8d27e/whitebox_workflows_for_qgis_provider.py#L56
> >
> > This code, which runs whenever the plugin is launched, first checks to
> > see if whitebox_workflows can be imported and if not, it runs pip from
> > the Python script to install it. Unfortunately, some users have
> > reported issues with this not working correctly:
>
> (Writing from the UNIX perspective.)
>
> Perhaps biased by my packaing background, I view any code that downloads
> other code at runtime (without an explicit user request) as a security
> bug.   This is especially true if it isn't getting sources pinned to a
> version and validated by checksum.
>
> That said, there's a lot of interesting questions about how to deal with
> dependencies of plugins.   For qgis itself, dependencies are properly
> dealt with by a packaging system and that seems ok.
>
> For plugins, I could see treating them as python modules and packaging
> them, but qgis wants to have its own package management system.
>
> qgis is usually installed, via packaging, globally (/usr or /usr/pkg, or
> similar).  The immediate question is where plugins go.  I'd expect them
> to be in the user's file area vs system, unless installing them in some
> administrator role.  The next question is, if they depend on something,
> what prefixes and install methods are expected for those things, both
> regular packages (programs and shlibs) and python modules.  Which is
> partly/mostly about what the search paths are in the plugin execution
> environment.
>
> Overall, I'd rather see plugins fail with a message and leave
> installation as a manual decision than have plugins run pip install.
> But I get it that most people probably don't see it that way.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/9c634bc1/attachment.htm>

From jlindsay at uoguelph.ca  Fri Jan 19 09:41:35 2024
From: jlindsay at uoguelph.ca (John Lindsay)
Date: Fri, 19 Jan 2024 17:41:35 +0000
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <rmi7ck5xn4j.fsf@s1.lexort.com>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
Message-ID: <YQBPR0101MB424243B6AD5BF433E6754598C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>

Hello Greg,

Thank you for your reply.

"Overall, I'd rather see plugins fail with a message and leave installation as a manual decision than have plugins run pip install."

I would be fine with asking users to manually install the dependency after installing the plugin however, the problem is that QGIS seems to use its own version of Python, rather than the system Python. Opening a terminal and running 'pip install whitebox-workflows' is going to install the package in a place that my QGIS plugin is unable to run. And the process for manually pip installing within QGIS does not seem that straight-forward to me (at least on MacOS). This would be a big ask for my potential users. If Whitebox Worfklows were pure Python code, then the simplest solution would be just to package that code along with my plugin. However, this isn't the case. WbW is actually a native Rust-based library that I have used PyO3 to base a Python extension on. And so, that native library needs to be compiled for the user's OS and that means pip-based installation is the best option. Based on your answer though, I'm wondering if this frontend is even possible given what I have in mind. It's unfortunate if it can't work because the plugin has many hundred very useful tools for geospatial data processing that would be great to access from QGIS for users that are perhaps less interested in Python scripting. Anyhow, thanks very much for taking the time to reply.

Regards,

John



Prof. John Lindsay

Dept. of Geography, Environment & Geomatics,

The University of Guelph,

Room 122, Hutt Building,

E-mail: jlindsay at uoguelph.ca

Phone: (519) 824-4120 ext. 56074

Web: https://geg.uoguelph.ca/faculty/lindsay-john

Research page: https://jblindsay.github.io/ghrg/index.html

WhiteboxTools GIS project: https://www.whiteboxgeo.com/

Twitter: https://twitter.com/whiteboxgeo

________________________________
From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> on behalf of Greg Troxel via QGIS-Developer <qgis-developer at lists.osgeo.org>
Sent: Friday, January 19, 2024 12:13 PM
To: John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS plugin depends on pypi package

CAUTION: This email originated from outside of the University of Guelph. Do not click links or open attachments unless you recognize the sender and know the content is safe. If in doubt, forward suspicious emails to IThelp at uoguelph.ca.


John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org> writes:

> Besides, a better solution would be for the plugin to install this
> package via pip when it is itself first installed and launched. I
> tried to accomplish this with the following code:
>
> https://github.com/jblindsay/whitebox_workflows_for_qgis/blob/4e463262f6cfd1987afa2f3f7e0e79656eb8d27e/whitebox_workflows_for_qgis_provider.py#L56
>
> This code, which runs whenever the plugin is launched, first checks to
> see if whitebox_workflows can be imported and if not, it runs pip from
> the Python script to install it. Unfortunately, some users have
> reported issues with this not working correctly:

(Writing from the UNIX perspective.)

Perhaps biased by my packaing background, I view any code that downloads
other code at runtime (without an explicit user request) as a security
bug.   This is especially true if it isn't getting sources pinned to a
version and validated by checksum.

That said, there's a lot of interesting questions about how to deal with
dependencies of plugins.   For qgis itself, dependencies are properly
dealt with by a packaging system and that seems ok.

For plugins, I could see treating them as python modules and packaging
them, but qgis wants to have its own package management system.

qgis is usually installed, via packaging, globally (/usr or /usr/pkg, or
similar).  The immediate question is where plugins go.  I'd expect them
to be in the user's file area vs system, unless installing them in some
administrator role.  The next question is, if they depend on something,
what prefixes and install methods are expected for those things, both
regular packages (programs and shlibs) and python modules.  Which is
partly/mostly about what the search paths are in the plugin execution
environment.

Overall, I'd rather see plugins fail with a message and leave
installation as a manual decision than have plugins run pip install.
But I get it that most people probably don't see it that way.
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/889b04b2/attachment-0001.htm>

From jlindsay at uoguelph.ca  Fri Jan 19 09:46:01 2024
From: jlindsay at uoguelph.ca (John Lindsay)
Date: Fri, 19 Jan 2024 17:46:01 +0000
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <CAC7zN972nWEyj7339+RPw+LJ2wTZTzFnu3vaMBzqqs-Etp54bA@mail.gmail.com>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
 <CAC7zN972nWEyj7339+RPw+LJ2wTZTzFnu3vaMBzqqs-Etp54bA@mail.gmail.com>
Message-ID: <YQBPR0101MB4242D2899C979F870F0FF3E2C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>

Hello Matthias,

This is very interesting and I'll certainly take a closer look at it as an option. Do you know if the plugin is stable yet? I can find it listed in the online QGIS plugin repository, but not yet from the search inside QGIS itself. Thanks.

Regards,

John



Prof. John Lindsay

Dept. of Geography, Environment & Geomatics,

The University of Guelph,

Room 122, Hutt Building,

E-mail: jlindsay at uoguelph.ca

Phone: (519) 824-4120 ext. 56074

Web: https://geg.uoguelph.ca/faculty/lindsay-john

Research page: https://jblindsay.github.io/ghrg/index.html

WhiteboxTools GIS project: https://www.whiteboxgeo.com/

Twitter: https://twitter.com/whiteboxgeo

________________________________
From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> on behalf of Matthias Kuhn via QGIS-Developer <qgis-developer at lists.osgeo.org>
Sent: Friday, January 19, 2024 12:20 PM
To: Greg Troxel <gdt at lexort.com>
Cc: John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS plugin depends on pypi package


CAUTION: This email originated from outside of the University of Guelph. Do not click links or open attachments unless you recognize the sender and know the content is safe. If in doubt, forward suspicious emails to IThelp at uoguelph.ca.


Hi John,

A former colleague of mine developed "qpip".
This is meant as a pip dependency manager for plugins and will install any additional dependencies from a supplied requirements.txt in a controlled way into the user profile folder.

There has never been any big announcement done regarding this plugin, but it's the best "pip"-like integration into QGIS which I am aware of.

https://github.com/opengisch/qpip

Kind regards
Matthias

On Fri, Jan 19, 2024 at 6:13?PM Greg Troxel via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> wrote:
John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> writes:

> Besides, a better solution would be for the plugin to install this
> package via pip when it is itself first installed and launched. I
> tried to accomplish this with the following code:
>
> https://github.com/jblindsay/whitebox_workflows_for_qgis/blob/4e463262f6cfd1987afa2f3f7e0e79656eb8d27e/whitebox_workflows_for_qgis_provider.py#L56
>
> This code, which runs whenever the plugin is launched, first checks to
> see if whitebox_workflows can be imported and if not, it runs pip from
> the Python script to install it. Unfortunately, some users have
> reported issues with this not working correctly:

(Writing from the UNIX perspective.)

Perhaps biased by my packaing background, I view any code that downloads
other code at runtime (without an explicit user request) as a security
bug.   This is especially true if it isn't getting sources pinned to a
version and validated by checksum.

That said, there's a lot of interesting questions about how to deal with
dependencies of plugins.   For qgis itself, dependencies are properly
dealt with by a packaging system and that seems ok.

For plugins, I could see treating them as python modules and packaging
them, but qgis wants to have its own package management system.

qgis is usually installed, via packaging, globally (/usr or /usr/pkg, or
similar).  The immediate question is where plugins go.  I'd expect them
to be in the user's file area vs system, unless installing them in some
administrator role.  The next question is, if they depend on something,
what prefixes and install methods are expected for those things, both
regular packages (programs and shlibs) and python modules.  Which is
partly/mostly about what the search paths are in the plugin execution
environment.

Overall, I'd rather see plugins fail with a message and leave
installation as a manual decision than have plugins run pip install.
But I get it that most people probably don't see it that way.
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/cac58c38/attachment.htm>

From gdt at lexort.com  Fri Jan 19 09:59:46 2024
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 19 Jan 2024 12:59:46 -0500
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <YQBPR0101MB424243B6AD5BF433E6754598C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 (John Lindsay's message of "Fri, 19 Jan 2024 17:41:35 +0000")
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
 <YQBPR0101MB424243B6AD5BF433E6754598C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <rmiy1clw6el.fsf@s1.lexort.com>

John Lindsay <jlindsay at uoguelph.ca> writes:

> I would be fine with asking users to manually install the dependency
> after installing the plugin however, the problem is that QGIS seems to
> use its own version of Python, rather than the system Python.

I think it would be good to really understand this, and for it to be
documented as part of "how to write plugins".  In pkgsrc, where I am the
maintainer for the qgis package, it is definitely built against the
system python.  However, pip is its own package, and qgis does not
depend on pip.

The real issue is that pip does not play well with the packaging system
world, as pip is itself a package manager and doesn't seem to expect the
packaging system to reserve a namespace under pip for installs.   As a
result of this, I have a practice of deciding to take one of two paths:

  use the packaging system.  Install packages for anything needed.
  Package them if need be.

  create a venv and run pip in that.

When you say "qgis seems to use its own version", I wonder if that is in
the context of particular binary distribution.  And if there really is a
full extra copy of libs, or if it's about a per-user site-packages
directory.

> Opening
> a terminal and running 'pip install whitebox-workflows' is going to
> install the package in a place that my QGIS plugin is unable to
> run.

Which place does it install to?  The system site-packages?

> And the process for manually pip installing within QGIS does not seem
> that straight-forward to me (at least on MacOS).

It sounds like the qpip tool that you were just pointed to likely has
resolved a lot of these things.  I would suggest that trying to really
understand the details of what goes where, what the paths are, and the
boundary between system install, per-user, venv, would help a lot in
ending up with a sound approach.


From qgis-dev at stripfamily.net  Fri Jan 19 10:10:40 2024
From: qgis-dev at stripfamily.net (David Strip)
Date: Fri, 19 Jan 2024 11:10:40 -0700
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <rmiy1clw6el.fsf@s1.lexort.com>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
 <YQBPR0101MB424243B6AD5BF433E6754598C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmiy1clw6el.fsf@s1.lexort.com>
Message-ID: <c3388f50-960e-44c3-82cc-7034da29e467@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/40add04d/attachment.htm>

From jlindsay at uoguelph.ca  Fri Jan 19 10:16:15 2024
From: jlindsay at uoguelph.ca (John Lindsay)
Date: Fri, 19 Jan 2024 18:16:15 +0000
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <c3388f50-960e-44c3-82cc-7034da29e467@stripfamily.net>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
 <YQBPR0101MB424243B6AD5BF433E6754598C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmiy1clw6el.fsf@s1.lexort.com>
 <c3388f50-960e-44c3-82cc-7034da29e467@stripfamily.net>
Message-ID: <YQBPR0101MB4242C40E651324966C9587E9C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>

Agreed, when I 'print(sys.executable)' from within the QGIS Python Console (on my MacBook Pro), I see:


/Applications/QGIS.app/Contents/MacOS/QGIS


But from my system terminal, I see:


/Library/Frameworks/Python.framework/Versions/3.11/bin/python3

So QGIS, at least on a Mac, does seem to have it's own version of Python installed. And there is not clear way, again on a Mac at least, to pip install to the QGIS Python such that a plugin will be able to see a package. Now, this said, on my Linux machine, installing my Whitebox Workflows plugin did not run into an error at all and so I'm left wondering if this is perhaps, as Greg suggested, a particular binary distribution issue related to QGIS on MacOS. Could be.

Regards,

John


Prof. John Lindsay

Dept. of Geography, Environment & Geomatics,

The University of Guelph,

Room 122, Hutt Building,

E-mail: jlindsay at uoguelph.ca

Phone: (519) 824-4120 ext. 56074

Web: https://geg.uoguelph.ca/faculty/lindsay-john

Research page: https://jblindsay.github.io/ghrg/index.html

WhiteboxTools GIS project: https://www.whiteboxgeo.com/

Twitter: https://twitter.com/whiteboxgeo

________________________________
From: David Strip <qgis-dev at stripfamily.net>
Sent: Friday, January 19, 2024 1:10 PM
To: Greg Troxel <gdt at lexort.com>; John Lindsay <jlindsay at uoguelph.ca>
Cc: John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS plugin depends on pypi package


CAUTION: This email originated from outside of the University of Guelph. Do not click links or open attachments unless you recognize the sender and know the content is safe. If in doubt, forward suspicious emails to IThelp at uoguelph.ca.


On 1/19/2024 10:59 AM, Greg Troxel via QGIS-Developer wrote:

When you say "qgis seems to use its own version", I wonder if that is in
the context of particular binary distribution.  And if there really is a
full extra copy of libs, or if it's about a per-user site-packages
directory.

The OS4Geo binary distribution contains a Python39 directory which is a full python installation including python.exe, a Lib directory which in turn contains a site-packages directory. As least in my case, this is installed system-wide, not per-user
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/b0f244f1/attachment.htm>

From julien.moura at oslandia.com  Fri Jan 19 08:48:02 2024
From: julien.moura at oslandia.com (Julien Moura)
Date: Fri, 19 Jan 2024 17:48:02 +0100
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <385976d7-f9a0-49f7-aa71-3aa799659520@oslandia.com>

Hello John,


It's a recurring issue/question since QGIS does not support pip 
dependencies and that PyQGIS plugins are not following the official 
Python packaging standards from PEPs and related formats (typically 
metadata.txt instead of setup.cfg, pyproject.toml). You will find some 
unsuccessful QEPs about this. For example: 
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/202.


Shortly, here come 3 workarounds:

  * basic: run pip install in a rough subcommand. Not so elegant but
    still efficient.
  * re-wheeling: implement a minimalist (or complete) 3rd party packages
    managers, miming pip through QgsNetwork tooling. Best example I know
    until today: ENMap-Box plugin (see attached screenshot or try it
    yourself).
  * YAML addicts: run your pip install during your plugin's packaging
    job in CI and include external dependencies in a subfolder before
    deploying it to your favorite plugins repository. Then, manage
    install loading from your plugin with try/except ImportError and
    'site' module. This is the way I prefer and use for years now. Main
    downside: for dependencies requiring a specific compilation on an
    operating system, you need to include various outputs. See Roof
    Classify <https://github.com/DINFO-UniFI/RoofClassify> (GitHub
    Workflow), Thyrsis <https://gitlab.com/Oslandia/qgis/thyrsis>
    (GitLab CI), QSoccer <https://gitlab.com/Oslandia/qgis/QSoccer/>
    (GitLab CI), QDuckDB <https://gitlab.com/Oslandia/qgis/qduckdb>
    (GitLab CI)... If you're interested, let me know. It could motivate
    me to write a tutorial detailing this method.
  * bravehearts: working on packaging your dependencies into osgeo4w;
    but they probably won't be included in default QGIS packages (.msi)

Just a quick advice: if you do some pip install within your plugin, 
during the packaging or during the run, make it under a custom folder 
related only to your plugin and use site to load extra dependencies in 
the QGIS Python environment to avoid issues.


Good luck!

Regards

Julien


Le 19/01/2024 ? 16:00, John Lindsay via QGIS-Developer a ?crit?:
> Hello everyone,
>
> I am developing a new QGIS plugin 
> (https://plugins.qgis.org/plugins/whitebox_workflows_for_qgis/#plugin-manage) 
> that serves as a frontend for a Python geospatial analysis library 
> called Whitebox Workflows for Python (WbW). The plugin seems to work 
> well with on major exception, it requires that the user have WbW 
> installed. It can be installed quite easily using pip (pip install 
> whitebox-workflows), however, I know that QGIS uses its own localized 
> version of Python, which seems to lack a terminal app access (at least 
> on MacOS). Besides, a better solution would be for the plugin to 
> install this package via pip when it is itself first installed and 
> launched. I tried to accomplish this with the following code:
>
> https://github.com/jblindsay/whitebox_workflows_for_qgis/blob/4e463262f6cfd1987afa2f3f7e0e79656eb8d27e/whitebox_workflows_for_qgis_provider.py#L56 
> <https://github.com/jblindsay/whitebox_workflows_for_qgis/blob/4e463262f6cfd1987afa2f3f7e0e79656eb8d27e/whitebox_workflows_for_qgis_provider.py#L56>
>
> This code, which runs whenever the plugin is launched, first checks to 
> see if whitebox_workflows can be imported and if not, it runs pip from 
> the Python script to install it. Unfortunately, some users have 
> reported issues with this not working correctly:
>
> https://github.com/jblindsay/whitebox_workflows_for_qgis/issues/1 
> <https://github.com/jblindsay/whitebox_workflows_for_qgis/issues/1>
> ?
> <https://github.com/jblindsay/whitebox_workflows_for_qgis/issues/1>
> 	
> Installation in QGis fails ? Issue #1 ? 
> jblindsay/whitebox_workflows_for_qgis 
> <https://github.com/jblindsay/whitebox_workflows_for_qgis/issues/1>
> AttributeError: 'NoneType' object has no attribute 'write' Traceback 
> (most recent call last): File 
> "C:\\Users/thomas.struller/AppData/Roaming/QGIS/QGIS3\\profiles\\default/python/plugins\\whitebox_work...
> github.com
>
>
> So now I'm left trying to figure out what the recommended approach to 
> installing QGIS plugin dependencies is. Any advice from anyone that 
> has successfully dealt with this problem previously? Thanks.
>
> Regards,
>
> John Lindsay
>
>
> Prof. John Lindsay
>
> Dept. of Geography, Environment & Geomatics,
>
> The University of Guelph,
>
> Room 122, Hutt Building,
>
> E-mail: jlindsay at uoguelph.ca
>
> Phone: (519) 824-4120 ext. 56074
>
> Web: https://geg.uoguelph.ca/faculty/lindsay-john
>
> Research page: https://jblindsay.github.io/ghrg/index.html
>
> WhiteboxTools GIS project: https://www.whiteboxgeo.com/
>
> Twitter: https://twitter.com/whiteboxgeo
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/858449bd/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Capture d??cran du 2024-01-19 17-39-26.png
Type: image/png
Size: 267116 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/858449bd/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: julien_moura.vcf
Type: text/vcard
Size: 351 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/858449bd/attachment-0001.vcf>

From rdmailings at duif.net  Fri Jan 19 11:25:31 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 19 Jan 2024 20:25:31 +0100
Subject: [QGIS-Developer] Settings/Data Source Handling/Prompt: 'never',
 loads nothing?
Message-ID: <365070b2-07cc-4b9c-ab6d-e28c33aa6422@duif.net>

Hi,

Creating some gpkg dumps from postgis tables to mail to somebody, I thought to tell them: "just throw them in QGIS to show them"

Then I got the (functional, but slighty annoying) prompt/dialog to select (the one!) layer in it, first.

So reached to settings to find "Prompt for sublayers when opening" and tested the different options.

One thing which strikes me, is that if you choose the "Never" option, and try to load a gpkg via the browser, or via dragging the gpkg on the canvas, NOTHING happens. Nothing is loaded.

Is this intended?

Can others reproduce?

Regards,

Richard Duivenvoorde

From julien.moura at oslandia.com  Fri Jan 19 12:49:41 2024
From: julien.moura at oslandia.com (Julien Moura)
Date: Fri, 19 Jan 2024 21:49:41 +0100
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <YQBPR0101MB4242C40E651324966C9587E9C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
 <YQBPR0101MB424243B6AD5BF433E6754598C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmiy1clw6el.fsf@s1.lexort.com>
 <c3388f50-960e-44c3-82cc-7034da29e467@stripfamily.net>
 <YQBPR0101MB4242C40E651324966C9587E9C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <bf07ea2a-81ad-4d17-9444-9fc15e035775@oslandia.com>

Hello John,


It's a recurring issue/question since QGIS does not support pip 
dependencies and that PyQGIS plugins are not following the official 
Python packaging standards from PEPs and related formats (typically 
metadata.txt instead of setup.cfg, pyproject.toml). You will find some 
unsuccessful QEPs about this. For example: 
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/202.


Shortly, here come 3 workarounds:

  * basic: run pip install in a rough subcommand. Not so elegant but
    still efficient.
  * re-wheeling: implement a minimalist (or complete) 3rd party packages
    managers, miming pip through QgsNetwork tooling. Best example I know
    until today: ENMap-Box plugin (see attached screenshot or try it
    yourself).
  * YAML addicts: run your pip install during your plugin's packaging
    job in CI and include external dependencies in a subfolder before
    deploying it to your favorite plugins repository. Then, manage
    install loading from your plugin with try/except ImportError and
    'site' module. This is the way I prefer and use for years now. Main
    downside: for dependencies requiring a specific compilation on an
    operating system, you need to include various outputs. See Roof
    Classify <https://github.com/DINFO-UniFI/RoofClassify> (GitHub
    Workflow), Thyrsis <https://gitlab.com/Oslandia/qgis/thyrsis>
    (GitLab CI), QSoccer <https://gitlab.com/Oslandia/qgis/QSoccer/>
    (GitLab CI), QDuckDB <https://gitlab.com/Oslandia/qgis/qduckdb>
    (GitLab CI)... If you're interested, let me know. It could motivate
    me to write a tutorial detailing this method.
  * bravehearts: working on packaging your dependencies into osgeo4w;
    but they probably won't be included in default QGIS packages (.msi)

Just a quick advice: if you do some pip install within your plugin, 
during the packaging or during the run, make it under a custom folder 
related only to your plugin and use site to load extra dependencies in 
the QGIS Python environment to avoid issues.


Good luck!

Regards

Julien


Le 19/01/2024 ? 19:16, John Lindsay via QGIS-Developer a ?crit?:
>
> Agreed, when I 'print(sys.executable)' from within the QGIS Python 
> Console (on my MacBook Pro), I see:
>
>
> /Applications/QGIS.app/Contents/MacOS/QGIS
>
>
> But from my system terminal, I see:
>
> /Library/Frameworks/Python.framework/Versions/3.11/bin/python3
>
>
> So QGIS, at least on a Mac, does seem to have it's own version of 
> Python installed. And there is not clear way, again on a Mac at least, 
> to pip install to the QGIS Python such that a plugin will be able to 
> see a package. Now, this said, on my Linux machine, installing my 
> Whitebox Workflows plugin did not run into an error at all and so I'm 
> left wondering if this is perhaps, as Greg suggested, a particular 
> binary distribution issue related to QGIS on MacOS. Could be.
>
> Regards,
>
> John
>
> Prof. John Lindsay
>
> Dept. of Geography, Environment & Geomatics,
>
> The University of Guelph,
>
> Room 122, Hutt Building,
>
> E-mail: jlindsay at uoguelph.ca
>
> Phone: (519) 824-4120 ext. 56074
>
> Web: https://geg.uoguelph.ca/faculty/lindsay-john
>
> Research page: https://jblindsay.github.io/ghrg/index.html
>
> WhiteboxTools GIS project: https://www.whiteboxgeo.com/
>
> Twitter: https://twitter.com/whiteboxgeo
>
> ------------------------------------------------------------------------
> *From:* David Strip <qgis-dev at stripfamily.net>
> *Sent:* Friday, January 19, 2024 1:10 PM
> *To:* Greg Troxel <gdt at lexort.com>; John Lindsay <jlindsay at uoguelph.ca>
> *Cc:* John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] QGIS plugin depends on pypi package
> CAUTION: This email originated from outside of the University of 
> Guelph. Do not click links or open attachments unless you recognize 
> the sender and know the content is safe. If in doubt, forward 
> suspicious emails to IThelp at uoguelph.ca.
>
> On 1/19/2024 10:59 AM, Greg Troxel via QGIS-Developer wrote:
>> When you say "qgis seems to use its own version", I wonder if that is in
>> the context of particular binary distribution.  And if there really is a
>> full extra copy of libs, or if it's about a per-user site-packages
>> directory.
> The OS4Geo binary distribution contains a Python39 directory which is 
> a full python installation including python.exe, a Lib directory which 
> in turn contains a site-packages directory. As least in my case, this 
> is installed system-wide, not per-user
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/40c872c8/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: julien_moura.vcf
Type: text/vcard
Size: 351 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/40c872c8/attachment.vcf>

From jlindsay at uoguelph.ca  Fri Jan 19 13:16:30 2024
From: jlindsay at uoguelph.ca (John Lindsay)
Date: Fri, 19 Jan 2024 21:16:30 +0000
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <bf07ea2a-81ad-4d17-9444-9fc15e035775@oslandia.com>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
 <YQBPR0101MB424243B6AD5BF433E6754598C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmiy1clw6el.fsf@s1.lexort.com>
 <c3388f50-960e-44c3-82cc-7034da29e467@stripfamily.net>
 <YQBPR0101MB4242C40E651324966C9587E9C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <bf07ea2a-81ad-4d17-9444-9fc15e035775@oslandia.com>
Message-ID: <YQBPR0101MB4242C515EE26D5085506962FC1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>

Hi Julien,

Thank you for your detailed answer:

"If you're interested, let me know. It could motivate me to write a tutorial detailing this method."

Yes, I would be very interested in that tutorial if you managed to find the time.

Regards,

John



Prof. John Lindsay

Dept. of Geography, Environment & Geomatics,

The University of Guelph,

Room 122, Hutt Building,

E-mail: jlindsay at uoguelph.ca

Phone: (519) 824-4120 ext. 56074

Web: https://geg.uoguelph.ca/faculty/lindsay-john

Research page: https://jblindsay.github.io/ghrg/index.html

WhiteboxTools GIS project: https://www.whiteboxgeo.com/

Twitter: https://twitter.com/whiteboxgeo

________________________________
From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> on behalf of Julien Moura via QGIS-Developer <qgis-developer at lists.osgeo.org>
Sent: Friday, January 19, 2024 3:49 PM
To: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS plugin depends on pypi package


CAUTION: This email originated from outside of the University of Guelph. Do not click links or open attachments unless you recognize the sender and know the content is safe. If in doubt, forward suspicious emails to IThelp at uoguelph.ca.


Hello John,


It's a recurring issue/question since QGIS does not support pip dependencies and that PyQGIS plugins are not following the official Python packaging standards from PEPs and related formats (typically metadata.txt instead of setup.cfg, pyproject.toml). You will find some unsuccessful QEPs about this. For example: https://github.com/qgis/QGIS-Enhancement-Proposals/issues/202.


Shortly, here come 3 workarounds:

  *   basic: run pip install in a rough subcommand. Not so elegant but still efficient.
  *   re-wheeling: implement a minimalist (or complete) 3rd party packages managers, miming pip through QgsNetwork tooling. Best example I know until today: ENMap-Box plugin (see attached screenshot or try it yourself).
  *   YAML addicts: run your pip install during your plugin's packaging job in CI and include external dependencies in a subfolder before deploying it to your favorite plugins repository. Then, manage install loading from your plugin with try/except ImportError and 'site' module. This is the way I prefer and use for years now. Main downside: for dependencies requiring a specific compilation on an operating system, you need to include various outputs. See Roof Classify<https://github.com/DINFO-UniFI/RoofClassify> (GitHub Workflow), Thyrsis<https://gitlab.com/Oslandia/qgis/thyrsis> (GitLab CI), QSoccer<https://gitlab.com/Oslandia/qgis/QSoccer/> (GitLab CI), QDuckDB<https://gitlab.com/Oslandia/qgis/qduckdb> (GitLab CI)... If you're interested, let me know. It could motivate me to write a tutorial detailing this method.
  *   bravehearts: working on packaging your dependencies into osgeo4w; but they probably won't be included in default QGIS packages (.msi)

Just a quick advice: if you do some pip install within your plugin, during the packaging or during the run, make it under a custom folder related only to your plugin and use site to load extra dependencies in the QGIS Python environment to avoid issues.


Good luck!

Regards

Julien


Le 19/01/2024 ? 19:16, John Lindsay via QGIS-Developer a ?crit :

Agreed, when I 'print(sys.executable)' from within the QGIS Python Console (on my MacBook Pro), I see:


/Applications/QGIS.app/Contents/MacOS/QGIS


But from my system terminal, I see:


/Library/Frameworks/Python.framework/Versions/3.11/bin/python3

So QGIS, at least on a Mac, does seem to have it's own version of Python installed. And there is not clear way, again on a Mac at least, to pip install to the QGIS Python such that a plugin will be able to see a package. Now, this said, on my Linux machine, installing my Whitebox Workflows plugin did not run into an error at all and so I'm left wondering if this is perhaps, as Greg suggested, a particular binary distribution issue related to QGIS on MacOS. Could be.

Regards,

John


Prof. John Lindsay

Dept. of Geography, Environment & Geomatics,

The University of Guelph,

Room 122, Hutt Building,

E-mail: jlindsay at uoguelph.ca<mailto:jlindsay at uoguelph.ca>

Phone: (519) 824-4120 ext. 56074

Web: https://geg.uoguelph.ca/faculty/lindsay-john

Research page: https://jblindsay.github.io/ghrg/index.html

WhiteboxTools GIS project: https://www.whiteboxgeo.com/

Twitter: https://twitter.com/whiteboxgeo

________________________________
From: David Strip <qgis-dev at stripfamily.net><mailto:qgis-dev at stripfamily.net>
Sent: Friday, January 19, 2024 1:10 PM
To: Greg Troxel <gdt at lexort.com><mailto:gdt at lexort.com>; John Lindsay <jlindsay at uoguelph.ca><mailto:jlindsay at uoguelph.ca>
Cc: John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org><mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS plugin depends on pypi package

CAUTION: This email originated from outside of the University of Guelph. Do not click links or open attachments unless you recognize the sender and know the content is safe. If in doubt, forward suspicious emails to IThelp at uoguelph.ca<mailto:IThelp at uoguelph.ca>.

On 1/19/2024 10:59 AM, Greg Troxel via QGIS-Developer wrote:

When you say "qgis seems to use its own version", I wonder if that is in
the context of particular binary distribution.  And if there really is a
full extra copy of libs, or if it's about a per-user site-packages
directory.

The OS4Geo binary distribution contains a Python39 directory which is a full python installation including python.exe, a Lib directory which in turn contains a site-packages directory. As least in my case, this is installed system-wide, not per-user



_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240119/d6f2ad86/attachment-0001.htm>

From mrvelle at gmail.com  Sat Jan 20 08:12:05 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Sat, 20 Jan 2024 17:12:05 +0100
Subject: [QGIS-Developer] Understanding the QgsLogger levels
Message-ID: <CAKKm1vE323mV5Af7_dedSBC8=D42OCAGtqqBoZGGj1kJZNO7Rg@mail.gmail.com>

Studying: https://qgis.org/pyqgis/master/core/QgsLogger.html

There seems to be four levels. And if their values are taken from Qt, their
values are as listed below:
- debug 0
- warning 1
- critical 2
- fatal 3

Is this correct?

The page says: "*If the debug level of a message is <= QGIS_DEBUG, the
message is written to the console. *"

If that is true, that is not a very meaningful behavior. When would anyone
want to have all debug and warning messages logged, but not critical and
fatal messages? And conversely, if one wants only the messages above some
criticality threshold, that is not possible.

Or have I misunderstood?

/Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240120/c4507190/attachment.htm>

From matthias at opengis.ch  Sat Jan 20 21:59:01 2024
From: matthias at opengis.ch (Matthias Kuhn)
Date: Sun, 21 Jan 2024 06:59:01 +0100
Subject: [QGIS-Developer] QGIS plugin depends on pypi package
In-Reply-To: <YQBPR0101MB4242D2899C979F870F0FF3E2C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
References: <YQBPR0101MB4242A832B53713D30AE228A0C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
 <rmi7ck5xn4j.fsf@s1.lexort.com>
 <CAC7zN972nWEyj7339+RPw+LJ2wTZTzFnu3vaMBzqqs-Etp54bA@mail.gmail.com>
 <YQBPR0101MB4242D2899C979F870F0FF3E2C1702@YQBPR0101MB4242.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAC7zN95d=3uEw++3d-jS6XgV2hndbk7DedE46XVeoDXMqkXS+A@mail.gmail.com>

Hi John,

It is still listed under "experimental" plugins, so you have to enable
support for experimental plugins in the plugin manager.
If you can give feedback if it works for you, this will help to move
forward with this concept.

Kind regards
Matthias


On Fri, Jan 19, 2024, 18:46 John Lindsay <jlindsay at uoguelph.ca> wrote:

> Hello Matthias,
>
> This is very interesting and I'll certainly take a closer look at it as an
> option. Do you know if the plugin is stable yet? I can find it listed in
> the online QGIS plugin repository, but not yet from the search inside QGIS
> itself. Thanks.
>
> Regards,
>
> John
>
>
> Prof. John Lindsay
>
> Dept. of Geography, Environment & Geomatics,
>
> The University of Guelph,
>
> Room 122, Hutt Building,
>
> E-mail: jlindsay at uoguelph.ca
>
> Phone: (519) 824-4120 ext. 56074
>
> Web: https://geg.uoguelph.ca/faculty/lindsay-john
>
> Research page: https://jblindsay.github.io/ghrg/index.html
>
> WhiteboxTools GIS project: https://www.whiteboxgeo.com/
>
> Twitter: https://twitter.com/whiteboxgeo
> ------------------------------
> *From:* QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> on behalf
> of Matthias Kuhn via QGIS-Developer <qgis-developer at lists.osgeo.org>
> *Sent:* Friday, January 19, 2024 12:20 PM
> *To:* Greg Troxel <gdt at lexort.com>
> *Cc:* John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] QGIS plugin depends on pypi package
>
>
> CAUTION: This email originated from outside of the University of Guelph.
> Do not click links or open attachments unless you recognize the sender and
> know the content is safe. If in doubt, forward suspicious emails to
> IThelp at uoguelph.ca.
>
> Hi John,
>
> A former colleague of mine developed "qpip".
> This is meant as a pip dependency manager for plugins and will install any
> additional dependencies from a supplied requirements.txt in a controlled
> way into the user profile folder.
>
> There has never been any big announcement done regarding this plugin, but
> it's the best "pip"-like integration into QGIS which I am aware of.
>
> https://github.com/opengisch/qpip
>
> Kind regards
> Matthias
>
> On Fri, Jan 19, 2024 at 6:13?PM Greg Troxel via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
> John Lindsay via QGIS-Developer <qgis-developer at lists.osgeo.org> writes:
>
> > Besides, a better solution would be for the plugin to install this
> > package via pip when it is itself first installed and launched. I
> > tried to accomplish this with the following code:
> >
> >
> https://github.com/jblindsay/whitebox_workflows_for_qgis/blob/4e463262f6cfd1987afa2f3f7e0e79656eb8d27e/whitebox_workflows_for_qgis_provider.py#L56
> >
> > This code, which runs whenever the plugin is launched, first checks to
> > see if whitebox_workflows can be imported and if not, it runs pip from
> > the Python script to install it. Unfortunately, some users have
> > reported issues with this not working correctly:
>
> (Writing from the UNIX perspective.)
>
> Perhaps biased by my packaing background, I view any code that downloads
> other code at runtime (without an explicit user request) as a security
> bug.   This is especially true if it isn't getting sources pinned to a
> version and validated by checksum.
>
> That said, there's a lot of interesting questions about how to deal with
> dependencies of plugins.   For qgis itself, dependencies are properly
> dealt with by a packaging system and that seems ok.
>
> For plugins, I could see treating them as python modules and packaging
> them, but qgis wants to have its own package management system.
>
> qgis is usually installed, via packaging, globally (/usr or /usr/pkg, or
> similar).  The immediate question is where plugins go.  I'd expect them
> to be in the user's file area vs system, unless installing them in some
> administrator role.  The next question is, if they depend on something,
> what prefixes and install methods are expected for those things, both
> regular packages (programs and shlibs) and python modules.  Which is
> partly/mostly about what the search paths are in the plugin execution
> environment.
>
> Overall, I'd rather see plugins fail with a message and leave
> installation as a manual decision than have plugins run pip install.
> But I get it that most people probably don't see it that way.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240121/d1dc0d66/attachment.htm>

From lbartoletti at tuxfamily.org  Sun Jan 21 22:38:43 2024
From: lbartoletti at tuxfamily.org (=?UTF-8?Q?Lo=C3=AFc_Bartoletti?=)
Date: Mon, 22 Jan 2024 07:38:43 +0100
Subject: [QGIS-Developer] 
 =?utf-8?q?=5BFR=5D_Code_Sprint_avant_Rencontres?=
 =?utf-8?q?_Utilisateurs_Francophones_de_QGIS_=C3=A0_Grenoble_-_26_mars_20?=
 =?utf-8?q?24?=
In-Reply-To: <CABgOYCc_D4Oy1QJ-5pjWxQQsCaLLsNZW4a8Ds3jPa3VZthmaiA@mail.gmail.com>
References: <af9c4b11-85b6-4790-ac0e-b327a24a8e9d@tuxfamily.org>
 <CABgOYCc_D4Oy1QJ-5pjWxQQsCaLLsNZW4a8Ds3jPa3VZthmaiA@mail.gmail.com>
Message-ID: <d2f92cdc-59a0-41b8-8a68-16c1df73d898@tuxfamily.org>

Bonjour ? tous,

Petit rappel, la rencontre sera le 26 mars 2024 [1].

Pour l'organisation, nous vous prions de bien vouloir vous inscrire sur 
la page d?di? : 
https://github.com/qgis/QGIS/wiki/Code-Sprint-QGIS-Grenoble,-March-2024

Si vous n'avez pas possibilit? d'?diter le wiki, n'h?sitez pas ? nous 
envoyer un messagesur regis at qgis.org ou par r?ponse ? ce mail.

Restant ? votre disposition et comptant sur votre participation.

Bien ? vous,

Lo?c

[1] et non 2023 comme c'?tait ?crit dans le titre du mail ...

Le 12/12/2023 ? 13:23, R?gis Haubourg a ?crit?:
> Hi, very good news Lo?c!
>
> I suggest you use the existing wiki to reference the event and let 
> participants edit it to centralize the information in one place.
>
>
> Le?mar. 12 d?c. 2023 ??10:56, Lo?c Bartoletti via QGIS-Developer 
> <qgis-developer at lists.osgeo.org> a ?crit?:
>
>     Disclaimer: This message is in French as it pertains to a Francophone
>     event. However, all "local" and/or interested individuals are
>     welcome to
>     join.
>
>     Hi Devs,
>
>     Salut, les d?v' de QGIS,
>
>     Je voulais simplement vous informer qu'avant les Rencontres
>     Utilisateurs
>     Francophones de QGIS pr?vues les 27 et 28 mars 2024 ? Grenoble
>     (locaux
>     de l'Institut d'Urbanisme et de G?ographie Alpine), un code sprint
>     aura
>     lieu le 26 mars ? Grenoble.
>
>     Ce sera l'occasion de nous retrouver et collaborer, ?changer des
>     id?es
>     et contribuer ? QGIS durant ce temps. Votre participation serait tr?s
>     appr?ci?e.
>
>     Plus de d?tails sur l'organisation du code sprint suivront. Tous les
>     d?veloppeurs int?ress?s sont invit?s ? se joindre ? nous le 26 mars.
>
>     Pour des questions logistiques, merci de bien vouloir m'envoyer un
>     message pour m'informer de votre participation.
>
>     Bien ? vous,
>
>     Lo?c
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240122/2383c4a8/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Mon Jan 22 19:37:28 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Tue, 23 Jan 2024 03:37:28 +0000
Subject: [QGIS-Developer] Form Annotation not working in QGIS 3.16.16 or
 3.28.14
Message-ID: <ed40cffeb04e4a0f811079b34f9effdb@erdc.dren.mil>

I am using QGIS 3.16.16 as that is what my plugin fully works in but  I am in the process of updating it to a new version of QGIS.

I also tried the form annotation in 3.28.14 with no success.

I followed the video in the help document.

https://www.youtube.com/watch?v=0pDBuSbQ02o&t=145s  which is a bit outdated based on it being demoed in QGIS 2, but since the link in given in the QGIS 3.16.16 document I assume nothing has changed.

I create the form and do the name binding naming my lineedit the same name as my attribute field, but when adding the annotation the lineedit is blank.

Any tips on how to get this to work?

Luke


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240123/6c85b42b/attachment.htm>

From roger at spatialtapestry.com.au  Mon Jan 22 22:11:02 2024
From: roger at spatialtapestry.com.au (Roger Merritt)
Date: Tue, 23 Jan 2024 14:11:02 +0800
Subject: [QGIS-Developer] A problem with the python oracledb connector
Message-ID: <CAMFBa1Xfb9AZMY6TcsQgg-JDpbVWERLVM02aC26MZoNC5WRn9A@mail.gmail.com>

Hi everyone,

I can get oracledb to work well under Ubuntu22 and Lubunt22, but not
Windows 10, Windows 11 or Ubuntu 20.04.

When I look at the code in Visual Code on Windows there are no errors:

import oracledb

Any clues how to sort this out? Perhaps an Environment Variable???

Regards
Roger
[image: image.png]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240123/7fea1f7e/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 65307 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240123/7fea1f7e/attachment-0001.png>

From julien.cabieces at oslandia.com  Tue Jan 23 01:04:14 2024
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Tue, 23 Jan 2024 10:04:14 +0100
Subject: [QGIS-Developer] A problem with the python oracledb connector
In-Reply-To: <CAMFBa1Xfb9AZMY6TcsQgg-JDpbVWERLVM02aC26MZoNC5WRn9A@mail.gmail.com>
References: <CAMFBa1Xfb9AZMY6TcsQgg-JDpbVWERLVM02aC26MZoNC5WRn9A@mail.gmail.com>
Message-ID: <87jzo0jtx5.fsf@julienlaptop.home>


Hi,

It's an issue from your plugin "vectortodbloader" which use a 3rd party
library "oracledb" not an issue in QGIS.

You have to install the python dependency "oracledb" on your system. I
fail to find the plugin on QGIS plugins plateform, so I fail to find
information on how you could install such dependency.

Regards,
Julien




> Hi everyone,
>
> I can get oracledb to work well under Ubuntu22 and Lubunt22, but not Windows 10, Windows 11 or Ubuntu 20.04.
>
> When I look at the code in Visual Code on Windows there are no errors:
>
> import oracledb
>
> Any clues how to sort this out? Perhaps an Environment Variable???
>
> Regards
> Roger
> image.png
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 

Julien Cabieces
Senior Developer at Oslandia
julien.cabieces at oslandia.com

From even.rouault at spatialys.com  Tue Jan 23 04:40:22 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jan 2024 13:40:22 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
Message-ID: <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>

Richard,

I've failed to reproduce. Here's my testing procedure:

docker run --name gdal-mysql1 -e MYSQL_ROOT_PASSWORD=passwd -e 
"MYSQL_ROOT_HOST=%" -p 33060:3306 -d mysql:8.0.34 mysqld 
--default-authentication-plugin=mysql_native_password
docker exec gdal-mysql1 sh -c "echo 'CREATE DATABASE test; SELECT 
Version()' | mysql -uroot -ppasswd"
printf 'id,WKT\n1,"POINT(168937.186906043 175180.302889316)"\n' > test.csv
ogr2ogr -update 
"mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" 
test.csv -select id -nlt point -a_srs EPSG:31370

then opening it with QGIS displays the point on the canvas and the 
attribute table. I can also add other points.

Even

Le 16/01/2024 ? 20:07, Richard Duivenvoorde via QGIS-Developer a ?crit?:
> No hints :-) ?
>
> I now have a live connection to the db, and can reproduce the issue 
> here in master on Linux too.
>
> It's really strange: have a local db, I can even copy features from 
> the attribute table to my local table, and THEN they show up
>
> ogrinfo shows exactly the same information of the db ( using -so).
>
> coordinates are fine too:
>
> select coord, ST_AsWKT(coord) from tblQgisProjecten tqp limit 1
>
> coord |ST_AsWKT(coord)???????????????????????? |
> -----------------------------------------+----------------------------------------+ 
>
> POINT (168937.186906043 175180.302889316)|POINT(168937.186906043 
> 175180.302889316)|
>
> could it be in char encoding, or in a strange attribute value? We 
> already tried to create a simple view with only coord and ID, but that 
> did not show something either.
>
> As I cannot share the connection info, I'm happy to share my screen or 
> so to show this.
>
> SELECT version();
> version()|
> ---------+
> 8.0.34-26|
>
> but is an upgraded db, not sure where it came from
>
> Regards,
>
> Richard Duivenvoorde
>
>
> On 1/12/24 15:06, Richard Duivenvoorde via QGIS-Developer wrote:
>> Hi Devs,
>>
>> I was contacted by a company who after upgrading their db and QGIS 
>> did NOT see the points anymore.
>>
>> Note that 'all worked' when they used QGIS 3.10 (and an older mysql db)
>> After a MySQL database upgrade, QGIS 3.10 was not able to connect 
>> anymore (apparently TLS issues), so they have to use 3.28 or higher.
>>
>> A small export loaded in my local db was OK in QGIS.
>>
>> So in a online meeting, sharing their screen I tried:
>>
>> - opening the db with ogrinfo: all data is visible (POINT(.....)) 
>> showing correct coords and attributes
>> - loading the table (25000 records) in QGIS: data: EPSG:31370 project 
>> EPSG:31370 :
>> ?????- attribute table shows all records
>> ?????- mapcanvas empty!
>> ?????- able to 'zoom to' records (Belgium), but NO points 
>> visible/selectable
>> - creating a tiny table with only id and geom column of 3 records: 
>> mapcanvas emtpy
>> - export the loaded (but invisible) layer to a geopackage: points AND 
>> attributes VISIBLE!
>> - loading the data in dbeaver: all data is shown in the spatial tab
>>
>> There was an encoding issue when exporting to gpkg, but we tried to 
>> create a smaller table (very few columns): nothing.
>>
>> Anybody familiar with QGIS and Mysql has an idea what this not 
>> showing of any point/geom could be?
>>
>> Any hint appreciated, I plan to try to get a connection to the db 
>> myself, but hoping I just miss something obvious...
>>
>> Regards,
>>
>> Richard Duivenvoorde
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From djes1975 at gmail.com  Tue Jan 23 05:22:37 2024
From: djes1975 at gmail.com (=?UTF-8?Q?J=C3=A9sahel_Benoist?=)
Date: Tue, 23 Jan 2024 14:22:37 +0100
Subject: [QGIS-Developer] Setting up PyCharm for PyQGIS and Qt
In-Reply-To: <20240117161246.s2twxno7jfs5y33z@norbit.de>
References: <DBBPR05MB6505769E87FB44F540CA88A7F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>
 <44006a6b-1b6c-4b36-af88-8878a68ae805@wheregroup.com>
 <DBBPR05MB65057AE57AF482430FC65150F8722@DBBPR05MB6505.eurprd05.prod.outlook.com>
 <20240117161246.s2twxno7jfs5y33z@norbit.de>
Message-ID: <CAOSu6ZG2_is--ruNHXbvnggpqg2sGj6wmqfzvmKbAnAqtOnAmw@mail.gmail.com>

Hi Maria,

Did you succeed ? As I've struggled a lot on this subject these past days I
could help a bit. Most of the online documentation is outdated.

Regards,

J. B.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240123/758de67e/attachment.htm>

From rdmailings at duif.net  Tue Jan 23 11:19:08 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 23 Jan 2024 20:19:08 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
Message-ID: <6ae86a04-1ecf-4ca7-a653-3d55434693ba@duif.net>

Thanks Even for checking Even!
I replayed your test, and with me it was fine too

My gut feeling is that it is something in the ogr - gdal bridge.
OR there is a (?wkt) issue because of the move from an older mysql to a newer version?
Is is actually exact the same issue as
https://github.com/qgis/QGIS/issues/34170 :

Ogr shows all, attributes shown ok, it is just QGIS that is not showing the points.

I'll try to debug the current db, and I've asked the people to create a test db (which hopefully then has the same issue :-) )

Regards & Thanks,

Richard

On 1/23/24 13:40, Even Rouault wrote:
> Richard,
> 
> I've failed to reproduce. Here's my testing procedure:
> 
> docker run --name gdal-mysql1 -e MYSQL_ROOT_PASSWORD=passwd -e "MYSQL_ROOT_HOST=%" -p 33060:3306 -d mysql:8.0.34 mysqld --default-authentication-plugin=mysql_native_password
> docker exec gdal-mysql1 sh -c "echo 'CREATE DATABASE test; SELECT Version()' | mysql -uroot -ppasswd"
> printf 'id,WKT\n1,"POINT(168937.186906043 175180.302889316)"\n' > test.csv
> ogr2ogr -update "mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" test.csv -select id -nlt point -a_srs EPSG:31370
> 
> then opening it with QGIS displays the point on the canvas and the attribute table. I can also add other points.
> 
> Even
> 
> Le 16/01/2024 ? 20:07, Richard Duivenvoorde via QGIS-Developer a ?crit?:
>> No hints :-) ?
>>
>> I now have a live connection to the db, and can reproduce the issue here in master on Linux too.
>>
>> It's really strange: have a local db, I can even copy features from the attribute table to my local table, and THEN they show up
>>
>> ogrinfo shows exactly the same information of the db ( using -so).
>>
>> coordinates are fine too:
>>
>> select coord, ST_AsWKT(coord) from tblQgisProjecten tqp limit 1
>>
>> coord |ST_AsWKT(coord)???????????????????????? |
>> -----------------------------------------+----------------------------------------+
>> POINT (168937.186906043 175180.302889316)|POINT(168937.186906043 175180.302889316)|
>>
>> could it be in char encoding, or in a strange attribute value? We already tried to create a simple view with only coord and ID, but that did not show something either.
>>
>> As I cannot share the connection info, I'm happy to share my screen or so to show this.
>>
>> SELECT version();
>> version()|
>> ---------+
>> 8.0.34-26|
>>
>> but is an upgraded db, not sure where it came from
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>>
>> On 1/12/24 15:06, Richard Duivenvoorde via QGIS-Developer wrote:
>>> Hi Devs,
>>>
>>> I was contacted by a company who after upgrading their db and QGIS did NOT see the points anymore.
>>>
>>> Note that 'all worked' when they used QGIS 3.10 (and an older mysql db)
>>> After a MySQL database upgrade, QGIS 3.10 was not able to connect anymore (apparently TLS issues), so they have to use 3.28 or higher.
>>>
>>> A small export loaded in my local db was OK in QGIS.
>>>
>>> So in a online meeting, sharing their screen I tried:
>>>
>>> - opening the db with ogrinfo: all data is visible (POINT(.....)) showing correct coords and attributes
>>> - loading the table (25000 records) in QGIS: data: EPSG:31370 project EPSG:31370 :
>>> ?????- attribute table shows all records
>>> ?????- mapcanvas empty!
>>> ?????- able to 'zoom to' records (Belgium), but NO points visible/selectable
>>> - creating a tiny table with only id and geom column of 3 records: mapcanvas emtpy
>>> - export the loaded (but invisible) layer to a geopackage: points AND attributes VISIBLE!
>>> - loading the data in dbeaver: all data is shown in the spatial tab
>>>
>>> There was an encoding issue when exporting to gpkg, but we tried to create a smaller table (very few columns): nothing.
>>>
>>> Anybody familiar with QGIS and Mysql has an idea what this not showing of any point/geom could be?
>>>
>>> Any hint appreciated, I plan to try to get a connection to the db myself, but hoping I just miss something obvious...
>>>
>>> Regards,
>>>
>>> Richard Duivenvoorde
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From even.rouault at spatialys.com  Tue Jan 23 11:34:51 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jan 2024 20:34:51 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <6ae86a04-1ecf-4ca7-a653-3d55434693ba@duif.net>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
 <6ae86a04-1ecf-4ca7-a653-3d55434693ba@duif.net>
Message-ID: <3b92201b-f7b9-43d7-a28c-c131ccdcd1e4@spatialys.com>


>
> I'll try to debug the current db, and I've asked the people to create 
> a test db (which hopefully then has the same issue :-) )

I'm not familiar with MySQL but I guess there must be some dump & 
restore commands that could be used to exactly replicate a setup where 
the bug triggers?


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From rdmailings at duif.net  Tue Jan 23 11:43:29 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 23 Jan 2024 20:43:29 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
Message-ID: <ff3d0e00-d2c1-4ae3-9427-da3961d04e13@duif.net>

Ah, oo :-)

I can reproduce now in the docker!

After seeing

src/core/providers/ogr/qgsogrprovider.cpp:3236 : (crs) [0ms] no spatial reference found

in the debug info of that other db, I thought to try to load the data WITHOUT telling it EPSG:31370:

So instead of:

ogr2ogr -update "mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" test.csv -select id -nlt point -a_srs EPSG:31370

I removed the test table and did

ogr2ogr -update "mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" test.csv -select id -nlt point

THEN I see exact the behaviour you see in the db with the issue:

- QGIS loads the layer (using 31370 project!), without crs (seeing the little globe with ? in it in the layer manager-
- BUT if you do 'zoom to data' you zoom the the right place in the world
- you can see the attributes in the attribute table
- and even after assigning EPSG:31370 to the layer: NO point visible in Belgium!

Note that loading the layer in a EPSG:4326 table, and assigning 31370 to the layer, QGIS does not zoom to Belgium...

Is this helpfull?
Or is this just a data issue?

Regards,

Richard Duivenvoorde

On 1/23/24 13:40, Even Rouault wrote:
> Richard,
> 
> I've failed to reproduce. Here's my testing procedure:
> 
> docker run --name gdal-mysql1 -e MYSQL_ROOT_PASSWORD=passwd -e "MYSQL_ROOT_HOST=%" -p 33060:3306 -d mysql:8.0.34 mysqld --default-authentication-plugin=mysql_native_password
> docker exec gdal-mysql1 sh -c "echo 'CREATE DATABASE test; SELECT Version()' | mysql -uroot -ppasswd"
> printf 'id,WKT\n1,"POINT(168937.186906043 175180.302889316)"\n' > test.csv
> ogr2ogr -update "mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" test.csv -select id -nlt point -a_srs EPSG:31370
> 
> then opening it with QGIS displays the point on the canvas and the attribute table. I can also add other points.
> 
> Even
> 
> Le 16/01/2024 ? 20:07, Richard Duivenvoorde via QGIS-Developer a ?crit?:
>> No hints :-) ?
>>
>> I now have a live connection to the db, and can reproduce the issue here in master on Linux too.
>>
>> It's really strange: have a local db, I can even copy features from the attribute table to my local table, and THEN they show up
>>
>> ogrinfo shows exactly the same information of the db ( using -so).
>>
>> coordinates are fine too:
>>
>> select coord, ST_AsWKT(coord) from tblQgisProjecten tqp limit 1
>>
>> coord |ST_AsWKT(coord)???????????????????????? |
>> -----------------------------------------+----------------------------------------+
>> POINT (168937.186906043 175180.302889316)|POINT(168937.186906043 175180.302889316)|
>>
>> could it be in char encoding, or in a strange attribute value? We already tried to create a simple view with only coord and ID, but that did not show something either.
>>
>> As I cannot share the connection info, I'm happy to share my screen or so to show this.
>>
>> SELECT version();
>> version()|
>> ---------+
>> 8.0.34-26|
>>
>> but is an upgraded db, not sure where it came from
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>>
>> On 1/12/24 15:06, Richard Duivenvoorde via QGIS-Developer wrote:
>>> Hi Devs,
>>>
>>> I was contacted by a company who after upgrading their db and QGIS did NOT see the points anymore.
>>>
>>> Note that 'all worked' when they used QGIS 3.10 (and an older mysql db)
>>> After a MySQL database upgrade, QGIS 3.10 was not able to connect anymore (apparently TLS issues), so they have to use 3.28 or higher.
>>>
>>> A small export loaded in my local db was OK in QGIS.
>>>
>>> So in a online meeting, sharing their screen I tried:
>>>
>>> - opening the db with ogrinfo: all data is visible (POINT(.....)) showing correct coords and attributes
>>> - loading the table (25000 records) in QGIS: data: EPSG:31370 project EPSG:31370 :
>>> ?????- attribute table shows all records
>>> ?????- mapcanvas empty!
>>> ?????- able to 'zoom to' records (Belgium), but NO points visible/selectable
>>> - creating a tiny table with only id and geom column of 3 records: mapcanvas emtpy
>>> - export the loaded (but invisible) layer to a geopackage: points AND attributes VISIBLE!
>>> - loading the data in dbeaver: all data is shown in the spatial tab
>>>
>>> There was an encoding issue when exporting to gpkg, but we tried to create a smaller table (very few columns): nothing.
>>>
>>> Anybody familiar with QGIS and Mysql has an idea what this not showing of any point/geom could be?
>>>
>>> Any hint appreciated, I plan to try to get a connection to the db myself, but hoping I just miss something obvious...
>>>
>>> Regards,
>>>
>>> Richard Duivenvoorde
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From even.rouault at spatialys.com  Tue Jan 23 14:21:05 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jan 2024 23:21:05 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <ff3d0e00-d2c1-4ae3-9427-da3961d04e13@duif.net>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
 <ff3d0e00-d2c1-4ae3-9427-da3961d04e13@duif.net>
Message-ID: <17748957-c3cb-4a0c-b4fe-742297e9e044@spatialys.com>


Le 23/01/2024 ? 20:43, Richard Duivenvoorde a ?crit?:
> Ah, oo :-)
>
> I can reproduce now in the docker!
>
> After seeing
>
> src/core/providers/ogr/qgsogrprovider.cpp:3236 : (crs) [0ms] no 
> spatial reference found
>
> in the debug info of that other db, I thought to try to load the data 
> WITHOUT telling it EPSG:31370:
>
> So instead of:
>
> ogr2ogr -update 
> "mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" 
> test.csv -select id -nlt point -a_srs EPSG:31370
>
> I removed the test table and did
>
> ogr2ogr -update 
> "mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" 
> test.csv -select id -nlt point

This fails for me with:

ERROR 1: MySQL error message:Longitude 168937.186906 is out of range in 
function st_geomfromtext. It must be within (-180.000000, 180.000000]. 
Description: INSERT INTO `test` (`SHAPE` , `id`) VALUES 
(ST_GeomFromText('POINT (168937.186906043 175180.302889316)',32767, 
'axis-order=long-lat') , '1')
ERROR 1: Unable to write feature 1 from layer test.
ERROR 1: Terminating translation prematurely after failed
translation of layer test (use -skipfailures to skip errors)

If you don't specify a SRS at layer creation time, the CreateLayer() 
logic in the MySQL driver assigns to it a "Undefined_geographic_SRS", 
and thus you must set longitude, latitude in range.


If trying with a point in range for geographic coordinates, ogr2ogr 
works and QGIS also happily displays it (with unknown CRS as expected)

printf 'id,WKT\n1,"POINT(2 49)"\n' > test.csv


So all in all, no issues on my side...

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From uclaros at gmail.com  Wed Jan 24 00:04:02 2024
From: uclaros at gmail.com (Stefanos Natsis)
Date: Wed, 24 Jan 2024 10:04:02 +0200
Subject: [QGIS-Developer] Settings/Data Source Handling/Prompt: 'never',
 loads nothing?
Message-ID: <CADBCwLZQ0mNsxXqnLdn=_WApYkgPwGqPrREWTeHe97QqG9ED3A@mail.gmail.com>

Hi Richard,

This is intentional. The actual enum and docstrings are quite explicit,
however I can't think of the use case for NeverAskSkip:
```
  AlwaysAsk, //!< Always ask users to select from available sublayers, if
sublayers are present
  AskExcludingRasterBands, //!< Ask users to select from available
sublayers, unless only raster bands are present
  NeverAskSkip, //!< Never ask users to select sublayers, instead don't
load anything
  NeverAskLoadAll, //!< Never ask users to select sublayers, instead
automatically load all available sublayers
```
I believe this info should be added to a tooltip to avoid user confusion.

However, for the case of single layer geopackage, I never get a sublayers
dialog regardless of this setting. The layer is always loaded as I believe
you need to have more than one Layer for it to be considered a SubLayer.

Best
Stefanos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240124/e7faf96e/attachment.htm>

From strk at kbt.io  Thu Jan 25 01:27:28 2024
From: strk at kbt.io (Sandro Santilli)
Date: Thu, 25 Jan 2024 10:27:28 +0100
Subject: [QGIS-Developer] QGIS-Website write permissions
Message-ID: <ZbIpgNeMR4rJIzKs@c19>

I've noticed a change request I submitted for the QGIS Website [1]
has gone unnoticed for 1 week now and thus I wondered what's
the contribution policy is for that repo and didn't find an answer
in the top-level README.md file [2].

I went looking for other PRs and found one by Harrissou Sant-anna 
which is from November 2023 and also only commented by himself [3].
His PR seems good to me but I cannot merge it. I've approved it
by review but still it's not mergeable by myself.

GitHub UI tells me that only those "with write access to this
repository" can merge pull requests but the "write acces" link
points to a generic page [4] which doesn't tell me who they are.

Moving to the organization level I see there are 3 "teams" [5]
called "Community", "QGIS Developers" and "QGIS security". I belong
to the "QGIS Developers" team, which lets me merge PRs in the QGIS
application repository [6] if they are reviewed.

So to the point: is there a document which fully describe the
governance rules of the various repositories ? I'd think such
document would be good to be more easily accessible from the README
files of each repository to simplify onboarding of new (and life
of old) contributors.

Thank you for any pointer to help me improve the transparency
of the project.

[1] https://github.com/qgis/QGIS-Website/pull/1218
[2] https://github.com/qgis/QGIS-Website/blob/master/README.md
[3] https://github.com/qgis/QGIS-Website/pull/1208
[4] https://docs.github.com/articles/what-are-the-different-access-permissions
[5] https://github.com/orgs/qgis/teams
[6] https://github.com/qgis/QGIS

--strk;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 659 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240125/f6ac767b/attachment.sig>

From rdmailings at duif.net  Thu Jan 25 02:39:54 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 25 Jan 2024 11:39:54 +0100
Subject: [QGIS-Developer] QGIS-Website write permissions
In-Reply-To: <ZbIpgNeMR4rJIzKs@c19>
References: <ZbIpgNeMR4rJIzKs@c19>
Message-ID: <899412c9-514d-4dcc-97fc-9607cbc7b2e6@duif.net>

Hi Sandro,

Looking at the last 10 merged PR's I can see at least 5 people
apparently able to merge:

Marco, Andreas, Juergen, Andrea, Harrisou and myself

I think our 'rule' was to do PR's and if you want them to be
merged, and they are not picked up by the dev's, you can ask
here (which you do :-) ).

Isn't that OK? Instead of writing a doc, which probably get's
stale etc?

Regards,

Richard Duivenvoorde

PS about PR of Harrissou, we (he and I) discussed this online, but
I did not put any comment in the PR (I did now).

PS2 isn't https://github.com/orgs/qgis/teams more helpfull for names?


On 1/25/24 10:27, Sandro Santilli via QGIS-Developer wrote:
> I've noticed a change request I submitted for the QGIS Website [1]
> has gone unnoticed for 1 week now and thus I wondered what's
> the contribution policy is for that repo and didn't find an answer
> in the top-level README.md file [2].
> 
> I went looking for other PRs and found one by Harrissou Sant-anna
> which is from November 2023 and also only commented by himself [3].
> His PR seems good to me but I cannot merge it. I've approved it
> by review but still it's not mergeable by myself.
>> GitHub UI tells me that only those "with write access to this
> repository" can merge pull requests but the "write acces" link
> points to a generic page [4] which doesn't tell me who they are.
> 
> Moving to the organization level I see there are 3 "teams" [5]
> called "Community", "QGIS Developers" and "QGIS security". I belong
> to the "QGIS Developers" team, which lets me merge PRs in the QGIS
> application repository [6] if they are reviewed.
> 
> So to the point: is there a document which fully describe the
> governance rules of the various repositories ? I'd think such
> document would be good to be more easily accessible from the README
> files of each repository to simplify onboarding of new (and life
> of old) contributors.
> 
> Thank you for any pointer to help me improve the transparency
> of the project.
> 
> [1] https://github.com/qgis/QGIS-Website/pull/1218
> [2] https://github.com/qgis/QGIS-Website/blob/master/README.md
> [3] https://github.com/qgis/QGIS-Website/pull/1208
> [4] https://docs.github.com/articles/what-are-the-different-access-permissions
> [5] https://github.com/orgs/qgis/teams
> [6] https://github.com/qgis/QGIS
> 
> --strk;
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From nyall.dawson at gmail.com  Thu Jan 25 13:58:27 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 26 Jan 2024 07:58:27 +1000
Subject: [QGIS-Developer] Qt6 builds and plugins -- ready for testing!
Message-ID: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>

Hi list,

With some excellent work recently completed by Julien, we're now at a stage
where there's no *major* roadblocks preventing plugins from functioning
under the Qt6 builds!

In fact, the first plugin has already been ported to be compatible with
these (First Aid Plugin) -- see
https://github.com/wonder-sk/qgis-first-aid-plugin/commits/master/ .

I think we're now at a stage where wider testing of the Qt6 builds and
feedback via bug reports are valuable. A couple of notes:

- We're up to roughly 2/3rd of the existing Python tests passing on Qt 6
builds. That's obviously not everything, so we aren't finished with this
work yet ?

- There's a script available in the repo for automatically upgrading QGIS
plugins/scripts to Qt 6 compatibility WITHOUT BREAKING compatibility with
older releases/qt5 based releases. It's here:
https://github.com/qgis/QGIS/blob/master/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py

- After running the script, you'll also need to add "supportsQt6=yes" to
your plugins metadata configuration. Otherwise the Qt6 builds will just
ignore your plugin and will refuse to load it. See eg
https://github.com/wonder-sk/qgis-first-aid-plugin/commit/3687be7d9e026c59c9b775caaf5ee18cf8639886

- You'll need to compile your own Qt 6 build. There's no nightlies or any
prepackaged versions available.

- There are still some known issues with enum handling, but please open bug
reports when you encounter these!

- The plugin manager is currently broken in the Qt6 builds. Use a Qt5 build
to enable plugins
?

Again, to reiterate, there's NO plans for moving to QGIS 4.0 on the
horizon. The plan is to allow plugins to add Qt6 support without breaking
any compatibility with Qt5/older releases, so that the effort required by
plugin authors is extremely minimal. And with any luck,
the pyqt5_to_pyqt6.py script will do 99% of the work for you. Qt 6 builds
of QGIS 3.x will become available at some stage in a "preview release"
capacity, and likely some platforms will move to Qt6 only releases when
necessary for that platform (eg MacOS, wayland only linux systems). Read
more about the plan at
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/198

This work has ONLY been possible thanks to funding from qgis.org, ie it's
possible only because of the users and organisations sponsoring QGIS!

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/98c04624/attachment.htm>

From rdmailings at duif.net  Fri Jan 26 01:05:40 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 26 Jan 2024 10:05:40 +0100
Subject: [QGIS-Developer] Qt6 builds and plugins -- ready for testing!
In-Reply-To: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
References: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
Message-ID: <1cb73a15-f71c-4af4-b316-a980f9bbd9fe@duif.net>

Whow! Cool!

Thanks to all peeps/sponsors making this happen!

Eager to try to build. Is
https://lists.osgeo.org/pipermail/qgis-developer/2022-August/065012.html
more or less the status of dependencies you also have to get/build yourself on Debian?

Ok searched and tried to configure.

Following seem to be OK:

- qca  (I see libqca-qt6-dev/testing 2.3.8-1 in Debian testing)
- qtkeychain  (I see qtkeychain-qt6-dev/testing 0.14.2-1 in Debian testing)
- QScintilla  (I see libqscintilla2-qt6-dev/testing,now 2.14.1+dfsg-1 in Debian testing)

- qwt  (cannot find qt6 mention in Debian testing)

So: need to compile QWT myself?
Like mentioned in dev list mail from 2022?


For debianista's willing to try:
- on Debian testing, on which I also compile QGIS-qt5, I (via trial and error) installed:

sudo apt install libqca-qt6-dev qtkeychain-qt6-dev libqscintilla2-qt6-dev qt6-serialport-dev qt6-svg-dev qt6-positioning-dev libqt6core5compat6 qt6-5compat-dev python3-pyqt6 python3-pyqt6.qsci pyqt6-dev-tools python3-pyqt6.qtmultimedia qml6-module-qtmultimedia qt6-multimedia-dev qt6-tools-dev

mkdir build;cd build;ccmake -GNinja -DBUILD_TESTING=FALSE -DENABLE_TESTS=OFF -DWITH_SERVER=FALSE -DWITH_3D=FALSE -DCMAKE_INSTALL_PREFIX=~/bin/qgis_/qt6/debug -DWITH_QWTPOLAR=OFF -DCMAKE_BUILD_TYPE=Debug -DWITH_GRASS=FALSE -DBUILD_WITH_QT6=TRUE -DWITH_OAUTH2_PLUGIN=FALSE -DWITH_WITH_SERVER_PLUGINS=OFF -DWITH_STAGED_PLUGINS=OFF -DWITH_PDAL=OFF -DWITH_QTWEBKIT=OFF ..

Then configuring goes without errors.
But on generating, I get

  CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
  Please set them or make sure they are set and tested correctly in the CMake files:
  QWT_LIBRARY
      linked by target "qgis_gui" in directory /home/richard/git/qgisqt6/src/gui
      linked by target "qgis_app" in directory /home/richard/git/qgisqt6/src/app
  Generating done (0.5s)

So probably need to get QWT compiled for qt6?
Found https://packages.debian.org/experimental/libqwt-qt6-6.2 but dare not to pull that into my testing machine?


Anyway, Thanks all!

Regards,

Richard Duivenvoorde


For debianista's willing to try:
- on Debian testing, on which I also compile QGIS-qt5, I (via trial and error) installed:

sudo apt install libqca-qt6-dev qtkeychain-qt6-dev libqscintilla2-qt6-dev qt6-serialport-dev qt6-svg-dev qt6-positioning-dev libqt6core5compat6 qt6-5compat-dev python3-pyqt6 python3-pyqt6.qsci pyqt6-dev-tools python3-pyqt6.qtmultimedia qml6-module-qtmultimedia qt6-multimedia-dev Qt6UiToolsConfig.cmake

mkdir build;cd build;ccmake -GNinja -DBUILD_TESTING=FALSE -DENABLE_TESTS=OFF -DWITH_SERVER=FALSE -DWITH_3D=FALSE -DCMAKE_INSTALL_PREFIX=~/bin/qgis_/qt6/debug -DWITH_QWTPOLAR=OFF -DCMAKE_BUILD_TYPE=Debug -DWITH_GRASS=FALSE -DBUILD_WITH_QT6=TRUE -DWITH_OAUTH2_PLUGIN=FALSE -DWITH_WITH_SERVER_PLUGINS=OFF -DWITH_STAGED_PLUGINS=OFF -DWITH_PDAL=OFF -DWITH_QTWEBKIT=OFF ..



On 1/25/24 22:58, Nyall Dawson via QGIS-Developer wrote:
> Hi list,
> 
> With some excellent work recently completed by Julien, we're now at a stage where there's no *major* roadblocks preventing plugins from functioning under the Qt6 builds!
> 
> In fact, the first plugin has already been ported to be compatible with these (First Aid Plugin) -- see https://github.com/wonder-sk/qgis-first-aid-plugin/commits/master/ <https://github.com/wonder-sk/qgis-first-aid-plugin/commits/master/> .
> 
> I think we're now at a stage where wider testing of the Qt6 builds and feedback via bug reports are valuable. A couple of notes:
> 
> - We're up to roughly?2/3rd of the existing Python tests passing on Qt 6 builds. That's obviously not everything, so we aren't finished with this work yet??
> 
> - There's a script available in the repo for automatically upgrading QGIS plugins/scripts to Qt 6 compatibility WITHOUT BREAKING compatibility with older releases/qt5 based releases. It's here: https://github.com/qgis/QGIS/blob/master/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py <https://github.com/qgis/QGIS/blob/master/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py>
> 
> - After running the script, you'll also need to add "supportsQt6=yes" to your plugins metadata configuration. Otherwise the Qt6 builds will just ignore your plugin and will refuse to load it. See eg https://github.com/wonder-sk/qgis-first-aid-plugin/commit/3687be7d9e026c59c9b775caaf5ee18cf8639886 <https://github.com/wonder-sk/qgis-first-aid-plugin/commit/3687be7d9e026c59c9b775caaf5ee18cf8639886>
> 
> - You'll need to compile your own Qt 6 build. There's no nightlies or any prepackaged versions available.
> 
> - There are still some known issues with enum handling, but please open bug reports when you encounter these!
> 
> - The plugin manager is currently broken in the Qt6 builds. Use a Qt5 build to enable plugins
> ?
> 
> Again, to reiterate, there's NO plans for moving to QGIS 4.0 on the horizon. The plan is to allow plugins to add Qt6 support without breaking any compatibility with Qt5/older releases, so that the effort required by plugin authors is extremely minimal. And with any luck, the?pyqt5_to_pyqt6.py script will do 99% of the work for you. Qt 6 builds of QGIS 3.x will become available at some stage in a "preview release" capacity, and likely some platforms will move to Qt6 only releases when necessary for that platform (eg MacOS, wayland only linux systems). Read more about the plan at https://github.com/qgis/QGIS-Enhancement-Proposals/issues/198 <https://github.com/qgis/QGIS-Enhancement-Proposals/issues/198>
> 
> This work has ONLY been possible thanks to funding from qgis.org <http://qgis.org>, ie it's possible only because of the users and organisations sponsoring QGIS!
> 
> Nyall
> 
> 
> 
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From landa.martin at gmail.com  Fri Jan 26 02:28:46 2024
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 26 Jan 2024 11:28:46 +0100
Subject: [QGIS-Developer] plugins: pip dependecies
Message-ID: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>

Hi,

I would like to ask regarding QGIS plugin publishing which has pip
dependency.

In metadata.txt I added:

plugin_dependencies=smoderp2d

When trying to install a plugin from ZIP created by pb_tool unfortunately
smoderp2d dependency is not installed. The Plugin Dependencies Manager is
shown, the dialog just hangs with Action -> Fix manually. No error message
is displayed.

[image: image.png]

How can I fix this issue? Thanks in advance for your help. Regards, Martin

PS: I tried to install smodep2d manually by pip and it worked fine.

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/16d5244a/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 43589 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/16d5244a/attachment-0001.png>

From r.nijssen at terglobo.nl  Fri Jan 26 01:03:06 2024
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Fri, 26 Jan 2024 10:03:06 +0100
Subject: [QGIS-Developer] Code repository link not updated in Plugin manager
 and plugin website
Message-ID: <e1a32918-998a-48e6-a045-a04d3fc6b932@terglobo.nl>

Dear developers,

I found some unexpected behaviour in the plugin management.

I changed the the plugin source code to another github repository and 
wanted to update the links in the plugin metadata.

1. When updating the metadata localy, and running the plugin from local 
code, the metadata changelog is updated (so I know QGIS has read the 
metadata.txt) but the links to the code, homepage and tracker are still 
pointing to the old repository.

2. After uploading the new version of the plugin to the QGIS plugin 
repository, the links to homepage and tracker are updated but the link 
to the code keeps pointing to the old location. (See screenshot)

Is this a bug? If so, where should I file it?

Kind regards and happy QGIS Open Day! :)

Raymond
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot from 2024-01-26 08-47-23.png
Type: image/png
Size: 468648 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/8f5ee8b1/attachment-0001.png>

From apasotti at gmail.com  Fri Jan 26 02:38:07 2024
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 26 Jan 2024 11:38:07 +0100
Subject: [QGIS-Developer] plugins: pip dependecies
In-Reply-To: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>
References: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>
Message-ID: <CAL5Q673a4sruyzgUP91=GVDDNieoGm7j7_v-d4M=5EX=4QsirQ@mail.gmail.com>

Hi Martin,

plugin dependencies are for plugin dependent on other plugins, it has
nothing to do with python packages.

See:
https://docs.qgis.org/3.28/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#metadata-txt



On Fri, Jan 26, 2024 at 11:29?AM Martin Landa via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi,
>
> I would like to ask regarding QGIS plugin publishing which has pip
> dependency.
>
> In metadata.txt I added:
>
> plugin_dependencies=smoderp2d
>
> When trying to install a plugin from ZIP created by pb_tool unfortunately
> smoderp2d dependency is not installed. The Plugin Dependencies Manager is
> shown, the dialog just hangs with Action -> Fix manually. No error message
> is displayed.
>
> [image: image.png]
>
> How can I fix this issue? Thanks in advance for your help. Regards, Martin
>
> PS: I tried to install smodep2d manually by pip and it worked fine.
>
> --
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/fb4dd6d4/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 43589 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/fb4dd6d4/attachment-0001.png>

From matthias at opengis.ch  Fri Jan 26 02:43:44 2024
From: matthias at opengis.ch (Matthias Kuhn)
Date: Fri, 26 Jan 2024 11:43:44 +0100
Subject: [QGIS-Developer] plugins: pip dependecies
In-Reply-To: <CAL5Q673a4sruyzgUP91=GVDDNieoGm7j7_v-d4M=5EX=4QsirQ@mail.gmail.com>
References: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>
 <CAL5Q673a4sruyzgUP91=GVDDNieoGm7j7_v-d4M=5EX=4QsirQ@mail.gmail.com>
Message-ID: <CAC7zN97W-qsYvAQas3csucaTatwe0yyZ6fJaTqdGUgchyUAHrQ@mail.gmail.com>

Hi Martin,

You might try qpip, it's designed for exactly this purpose:
https://github.com/opengisch/qpip

Kind regards
Matthias

On Fri, Jan 26, 2024 at 11:38?AM Alessandro Pasotti via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi Martin,
>
> plugin dependencies are for plugin dependent on other plugins, it has
> nothing to do with python packages.
>
> See:
> https://docs.qgis.org/3.28/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#metadata-txt
>
>
>
> On Fri, Jan 26, 2024 at 11:29?AM Martin Landa via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hi,
>>
>> I would like to ask regarding QGIS plugin publishing which has pip
>> dependency.
>>
>> In metadata.txt I added:
>>
>> plugin_dependencies=smoderp2d
>>
>> When trying to install a plugin from ZIP created by pb_tool unfortunately
>> smoderp2d dependency is not installed. The Plugin Dependencies Manager is
>> shown, the dialog just hangs with Action -> Fix manually. No error message
>> is displayed.
>>
>> [image: image.png]
>>
>> How can I fix this issue? Thanks in advance for your help. Regards, Martin
>>
>> PS: I tried to install smodep2d manually by pip and it worked fine.
>>
>> --
>> Martin Landa
>> http://geo.fsv.cvut.cz/gwiki/Landa
>> http://gismentors.cz/mentors/landa
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/2df31b81/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 43589 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/2df31b81/attachment-0001.png>

From johannes.kroeger at wheregroup.com  Fri Jan 26 02:45:12 2024
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=C3=B6ger_=28WhereGroup=29?=)
Date: Fri, 26 Jan 2024 11:45:12 +0100
Subject: [QGIS-Developer] plugins: pip dependecies
In-Reply-To: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>
References: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>
Message-ID: <38c1acbe-40bb-4ba4-980d-fc0b8091f530@wheregroup.com>

Hi Martin,

try this thread from last week: 
https://lists.osgeo.org/pipermail/qgis-developer/2024-January/066390.html

In it Julien and Matthias shared lots of information on this topic.

Cheers, Hannes

On 26.01.24 11:28, Martin Landa via QGIS-Developer wrote:
> Hi,
>
> I would like to ask regarding QGIS plugin publishing which has pip 
> dependency.
>
> In metadata.txt I added:
>
> plugin_dependencies=smoderp2d
>
> When?trying to install a plugin from ZIP created by pb_tool 
> unfortunately smoderp2d dependency?is not installed. The Plugin 
> Dependencies?Manager is shown, the dialog just hangs with Action -> 
> Fix manually. No error message is displayed.
>
> image.png
>
> How can I fix this?issue? Thanks in?advance for your help. Regards, Martin
>
> PS: I tried to install smodep2d manually by pip and it worked fine.
>
> -- 
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/c20e898b/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 43589 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/c20e898b/attachment-0001.png>

From gdt at lexort.com  Fri Jan 26 06:06:05 2024
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 26 Jan 2024 09:06:05 -0500
Subject: [QGIS-Developer] bare isnan -- why isn't CI catching this?
Message-ID: <rmia5osdwaa.fsf@s1.lexort.com>

I am in the process of building 3.34.3 for pkgsrc.  (We've been on 3.28.x,
and I am just now getting to jumping to the new LTR.)

I am using gcc 7.5.0 on NetBSD 10 amd64.

I found a case of bare isnan in a source file.  It's easy for me to
patch to std::isnan.  I see that there are a large number of std::isnan
in the sources.  I am guessing that formally bare isnan is an error, but
have not passed the bar to be a practicing C++ Language Lawyer.   I see
an include of cmath, but not "use that scope as if here" decl.

My question is:

  Is it in fact invalid code to use bare isnan instead of std::isnan, vs
  would someone claim my compiler is wrong?

  Assuming bare isnan is wrong, why isn't qgis's CI catching this?  I
  would think the CI environment should have the equivalent of
  POSIXLY_CORRECT to try to reject as much as possible in terms of using
  extensions not required by standards.

[ 56%] Building CXX object src/core/CMakeFiles/qgis_core.dir/raster/qgsrasterattributetable.cpp.o
/tmp/work/wip/qgis/work/qgis-3.34.3/src/core/raster/qgsrasterattributetable.cpp: In member function 'QgsGradientColorRamp QgsRasterAttributeTable::colorRamp(QStringList&, int) const':
/tmp/work/wip/qgis/work/qgis-3.34.3/src/core/raster/qgsrasterattributetable.cpp:1362:16: error: 'isnan' was not declared in this scope; did you mean 'std::isnan'?
 1362 |         if ( ! isnan( min ) && ! isnan( max ) )
      |                ^~~~~
      |                std::isnan
In file included from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/qgis.h:25,
                 from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/qgsfield.h:25,
                 from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/qgsfields.h:22,
                 from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/raster/qgsrasterattributetable.h:19,
                 from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/raster/qgsrasterattributetable.cpp:17:
/usr/include/g++/cmath:632:5: note: 'std::isnan' declared here
  632 |     isnan(_Tp __x)
      |     ^~~~~
gmake[2]: *** [src/core/CMakeFiles/qgis_core.dir/build.make:10842: src/core/CMakeFiles/qgis_core.dir/raster/qgsrasterattributetable.cpp.o] Error 1
gmake[2]: Target 'src/core/CMakeFiles/qgis_core.dir/build' not remade because of errors.
gmake[1]: *** [CMakeFiles/Makefile2:4912: src/core/CMakeFiles/qgis_core.dir/all] Error 2
gmake[1]: Target 'all' not remade because of errors.
gmake: *** [Makefile:166: all] Error 2


From apasotti at gmail.com  Fri Jan 26 06:51:00 2024
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 26 Jan 2024 15:51:00 +0100
Subject: [QGIS-Developer] bare isnan -- why isn't CI catching this?
In-Reply-To: <rmia5osdwaa.fsf@s1.lexort.com>
References: <rmia5osdwaa.fsf@s1.lexort.com>
Message-ID: <CAL5Q672yb2q=KdZh3=z15Lk1qq0Z+=LChJ-PLXZsQwzDnNaLKQ@mail.gmail.com>

I think the answer is here (emphasis on "an implementation is allowed
but not required to bring those functions into the global namespace")
: https://stackoverflow.com/questions/18128899/is-isnan-in-the-std-namespace-more-in-general-when-is-std-necessary-optio

In other words, it should be prefixed with std::, I agree this should
be tested in CI (but I don't know how).


On Fri, Jan 26, 2024 at 3:06?PM Greg Troxel via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> I am in the process of building 3.34.3 for pkgsrc.  (We've been on 3.28.x,
> and I am just now getting to jumping to the new LTR.)
>
> I am using gcc 7.5.0 on NetBSD 10 amd64.
>
> I found a case of bare isnan in a source file.  It's easy for me to
> patch to std::isnan.  I see that there are a large number of std::isnan
> in the sources.  I am guessing that formally bare isnan is an error, but
> have not passed the bar to be a practicing C++ Language Lawyer.   I see
> an include of cmath, but not "use that scope as if here" decl.
>
> My question is:
>
>   Is it in fact invalid code to use bare isnan instead of std::isnan, vs
>   would someone claim my compiler is wrong?
>
>   Assuming bare isnan is wrong, why isn't qgis's CI catching this?  I
>   would think the CI environment should have the equivalent of
>   POSIXLY_CORRECT to try to reject as much as possible in terms of using
>   extensions not required by standards.
>
> [ 56%] Building CXX object src/core/CMakeFiles/qgis_core.dir/raster/qgsrasterattributetable.cpp.o
> /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/raster/qgsrasterattributetable.cpp: In member function 'QgsGradientColorRamp QgsRasterAttributeTable::colorRamp(QStringList&, int) const':
> /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/raster/qgsrasterattributetable.cpp:1362:16: error: 'isnan' was not declared in this scope; did you mean 'std::isnan'?
>  1362 |         if ( ! isnan( min ) && ! isnan( max ) )
>       |                ^~~~~
>       |                std::isnan
> In file included from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/qgis.h:25,
>                  from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/qgsfield.h:25,
>                  from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/qgsfields.h:22,
>                  from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/raster/qgsrasterattributetable.h:19,
>                  from /tmp/work/wip/qgis/work/qgis-3.34.3/src/core/raster/qgsrasterattributetable.cpp:17:
> /usr/include/g++/cmath:632:5: note: 'std::isnan' declared here
>   632 |     isnan(_Tp __x)
>       |     ^~~~~
> gmake[2]: *** [src/core/CMakeFiles/qgis_core.dir/build.make:10842: src/core/CMakeFiles/qgis_core.dir/raster/qgsrasterattributetable.cpp.o] Error 1
> gmake[2]: Target 'src/core/CMakeFiles/qgis_core.dir/build' not remade because of errors.
> gmake[1]: *** [CMakeFiles/Makefile2:4912: src/core/CMakeFiles/qgis_core.dir/all] Error 2
> gmake[1]: Target 'all' not remade because of errors.
> gmake: *** [Makefile:166: all] Error 2
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From selma at kartoza.com  Fri Jan 26 08:44:31 2024
From: selma at kartoza.com (Selma Vidimlic)
Date: Fri, 26 Jan 2024 17:44:31 +0100
Subject: [QGIS-Developer] QGIS Documentation Writer
In-Reply-To: <CALarpe53HNh0RwD5XF2r3t3n2F7DuhBDiW29N+G4KxjMv+hjbQ@mail.gmail.com>
References: <CALarpe7r1o22ejnty1yxbfu5f03E8o+OS2M9igLtMs+nKZ=woA@mail.gmail.com>
 <CALarpe5N8e+-daXHPaec3Y0gXhu1TCtb513uSuYq0ZA1i6vNdA@mail.gmail.com>
 <CALarpe7AB9Vb8j_QudqPmNmdJrfC6KcevWBZ5f7W9murWKZwHQ@mail.gmail.com>
 <CALarpe6AxofhCC1CPx4-5hOsaWdRc3Hb+GCooZ4jNiAzT6L2pA@mail.gmail.com>
 <CALarpe6EWK8adxhnJdPgX8jQasVnZQxLf4h4CQkPXPqiAYhwDg@mail.gmail.com>
 <CALarpe53HNh0RwD5XF2r3t3n2F7DuhBDiW29N+G4KxjMv+hjbQ@mail.gmail.com>
Message-ID: <CALarpe4AyaWHVDpcaViTXEA3fgL0xg9XxPEs9Md+wcGTtpYqfQ@mail.gmail.com>

Hi all,

Here is the new report.

Open pull requests:


   - MS SQL Server Connection (second PR)
   <https://github.com/qgis/QGIS-Documentation/pull/8804> - If someone
   could provide more information about the purpose of the 'Test Connection'
   button in the 'Create New MS SQL Server Connection' dialog, it would be
   appreciated.
   - Field properties (comments and alias)
   <https://github.com/qgis/QGIS-Documentation/pull/8795>
   - Sublayer selection checkboxes added
   <https://github.com/qgis/QGIS-Documentation/pull/8790> (thanks Andrea
   Giudiceandrea)
   - New commit to Style database
   <https://github.com/qgis/QGIS-Documentation/pull/8765/commits/d291ab6320447d728fb28a16319013d3ba137e02>

Merged pull requests:


   - Local XYZ tiles options
   <https://github.com/qgis/QGIS-Documentation/pull/8800>
   - MS SQL Server Connection (first PR)
   <https://github.com/qgis/QGIS-Documentation/pull/8780>
   - Raster fill symbol layer type
   <https://github.com/qgis/QGIS-Documentation/pull/8779>

Have a nice weekend,
Selma.

On Fri, 12 Jan 2024 at 17:51, Selma Vidimlic <selma at kartoza.com> wrote:

> Hello all,
> Here is the report for this week.
>
> Open pull requests:
> Raster image symbol <https://github.com/qgis/QGIS-Documentation/pull/8779>
> MS SQL Server connection details
> <https://github.com/qgis/QGIS-Documentation/pull/8780> - this PR fixes
> three issues:
>
>    - #6443 <https://github.com/qgis/QGIS-Documentation/issues/6443>
>    - #6644 <https://github.com/qgis/QGIS-Documentation/issues/6644>
>    - #3063 <https://github.com/qgis/QGIS-Documentation/issues/3063>
>
> Style database <https://github.com/qgis/QGIS-Documentation/pull/8765> -
> still open and it needs some fixes after review
> Raster identify results
> <https://github.com/qgis/QGIS-Documentation/pull/8764> - also still open,
> but requires some bigger changes in the Working with raster chapter
> <https://docs.qgis.org/testing/en/docs/user_manual/working_with_raster/index.html>
>
> This week, I dedicated some time to investigating older issues, attempting
> to determine whether they still need to remain open. During this process, I
> came across the issue titled Add a check box in the sublayer selection
> dialog to control whether system and internal tables should be shown
> <https://github.com/qgis/QGIS-Documentation/issues/6908>, it seems like a
> small change (in documentation), but I'm having trouble finding the
> "sublayer selection dialog." If someone could explain what that means and
> how I can access it, I would appreciate it.
>
> Have a nice weekend,
> Selma.
>
>
> On Fri, 5 Jan 2024 at 17:19, Selma Vidimlic <selma at kartoza.com> wrote:
>
>> Hello all and happy new year,
>>
>> Documentation writer report:
>>
>> Merged pull requests:
>>
>>    - https://github.com/qgis/QGIS-Documentation/pull/8713
>>    - https://github.com/qgis/QGIS-Documentation/pull/8721
>>    - https://github.com/qgis/QGIS-Documentation/pull/8723
>>
>> Open pull requests:
>>
>>    - https://github.com/qgis/QGIS-Documentation/pull/8764
>>    - https://github.com/qgis/QGIS-Documentation/pull/8765
>>
>> Working on:
>>
>>    - https://github.com/qgis/QGIS-Documentation/issues/7545
>>    - Georeferencer chapter
>>
>> Have a nice weekend,
>> Selma.
>>
>> On Fri, 15 Dec 2023 at 16:51, Selma Vidimlic <selma at kartoza.com> wrote:
>>
>>> Hello all,
>>>
>>> Here is the report for this week:
>>>
>>> Merged pull requests:
>>>
>>>    - https://github.com/qgis/QGIS-Documentation/pull/8701
>>>    - https://github.com/qgis/QGIS-Documentation/pull/8702
>>>    - https://github.com/qgis/QGIS-Documentation/pull/8708
>>>
>>> Open pull requests:
>>>
>>>    - https://github.com/qgis/QGIS-Documentation/pull/8713
>>>
>>> Still working on:
>>>
>>>    - https://github.com/qgis/QGIS-Documentation/issues/7568
>>>    - https://github.com/qgis/QGIS-Documentation/issues/7545
>>>
>>>
>>> Have a great weekend,
>>> Selma.
>>>
>>>
>>> On Fri, 8 Dec 2023 at 17:19, Selma Vidimlic <selma at kartoza.com> wrote:
>>>
>>>> Hello all,
>>>>
>>>> Merged pull requests from this week:
>>>>
>>>>    - 3D Tiles Chapter
>>>>    <https://github.com/qgis/QGIS-Documentation/pull/8657> with two
>>>>    commits from this week:
>>>>
>>>>
>>>>    1. fixes after review and update opening_data file
>>>>    <https://github.com/qgis/QGIS-Documentation/pull/8657/commits/f6fe29198c5a21096e1927dcbf3716f8350d2dbc>
>>>>    2. cross references
>>>>    <https://github.com/qgis/QGIS-Documentation/pull/8657/commits/303b7ae487faacb5959d1b535f3bedf500767ee5>
>>>>
>>>>
>>>>    - Identify tool update
>>>>    <https://github.com/qgis/QGIS-Documentation/pull/8692>
>>>>
>>>> Open pull requests from this week:
>>>>
>>>>    - Topology checker update
>>>>    <https://github.com/qgis/QGIS-Documentation/pull/8701>
>>>>    - Auto-open options for exported layout
>>>>    <https://github.com/qgis/QGIS-Documentation/pull/8702>
>>>>
>>>> Regards,
>>>> Selma.
>>>>
>>>> On Fri, 24 Nov 2023 at 19:48, Selma Vidimlic <selma at kartoza.com> wrote:
>>>>
>>>>> Hi all,
>>>>>
>>>>> Merged PR from this week:
>>>>>
>>>>>    - Vector tiles update
>>>>>    <https://github.com/qgis/QGIS-Documentation/pull/8639>
>>>>>
>>>>> Open PR:
>>>>>
>>>>>    - 3d tiles <https://github.com/qgis/QGIS-Documentation/pull/8657> -
>>>>>    so, here I need to additionally describe properties (symbology, 3d view,
>>>>>    elevation menu), also the second section now is called *Scene, *but
>>>>>    I believe this will be changed. I'm looking forward to your feedback
>>>>>    (review).
>>>>>
>>>>> Still working on:
>>>>>
>>>>>    - geometry expressions
>>>>>    <https://github.com/qgis/QGIS-Documentation/issues/8547>
>>>>>
>>>>> Have a nice weekend,
>>>>> Selma.
>>>>>
>>>>> On Fri, 17 Nov 2023 at 17:15, Selma Vidimlic <selma at kartoza.com>
>>>>> wrote:
>>>>>
>>>>>> Hello everyone,
>>>>>>
>>>>>> This week (and last week at the OSGeo meeting Vienna) I was working
>>>>>> on documentation for 3D Tiles in QGIS. I used blog posts from Lutra
>>>>>> Consulting and North Road websites as the main source for the
>>>>>> documentation, also I followed video tutorials and Martin Dobias explained
>>>>>> 3D tiles to me while we were in Vienna. I'm planning to create a draft
>>>>>> version in my GitHub repository (I will send you a link) so you can
>>>>>> check it out. This is my first time creating a whole new chapter for
>>>>>> documentation so I'm trying to be as detailed as possible. I also prepared
>>>>>> screenshots for other chapters updates related to 3D tiles/Scene (browser,
>>>>>> data source management etc.).
>>>>>>
>>>>>> PR from this week:
>>>>>> Vector tiles properties
>>>>>> <https://github.com/qgis/QGIS-Documentation/pull/8639>
>>>>>> In this PR I updated chapter with Source and Rendering properties,
>>>>>> but I wasn't able to recreate OpenStreetMap landuse layer with all rules
>>>>>> (like image that is in the docs now), so if someone has advice on how to do
>>>>>> that, please let me know. I was using tiles from
>>>>>> https://cloud.maptiler.com/tiles/.
>>>>>>
>>>>>> Have a nice weekend,
>>>>>> Selma.
>>>>>>
>>>>>> --
>>>>>> Selma Vidimlic Husic
>>>>>> QGIS Documentation Writer
>>>>>> Visit http://kartoza.com to find out about open source:
>>>>>> * Desktop GIS programming services
>>>>>> * Geospatial web development
>>>>>> * GIS Training
>>>>>> * Consulting Services
>>>>>> Phone: +387 61 933 651
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Selma Vidimlic Husic
>>>>> QGIS Documentation Writer
>>>>> Visit http://kartoza.com to find out about open source:
>>>>> * Desktop GIS programming services
>>>>> * Geospatial web development
>>>>> * GIS Training
>>>>> * Consulting Services
>>>>> Phone: +387 61 933 651
>>>>>
>>>>
>>>>
>>>> --
>>>> Selma Vidimlic Husic
>>>> QGIS Documentation Writer
>>>> Visit http://kartoza.com to find out about open source:
>>>> * Desktop GIS programming services
>>>> * Geospatial web development
>>>> * GIS Training
>>>> * Consulting Services
>>>> Phone: +387 61 933 651
>>>>
>>>
>>>
>>> --
>>> Selma Vidimlic Husic
>>> QGIS Documentation Writer
>>> Visit http://kartoza.com to find out about open source:
>>> * Desktop GIS programming services
>>> * Geospatial web development
>>> * GIS Training
>>> * Consulting Services
>>> Phone: +387 61 933 651
>>>
>>
>>
>> --
>> Selma Vidimlic Husic
>> QGIS Documentation Writer
>> Visit http://kartoza.com to find out about open source:
>> * Desktop GIS programming services
>> * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Phone: +387 61 933 651
>>
>
>
> --
> Selma Vidimlic Husic
> QGIS Documentation Writer
> Visit http://kartoza.com to find out about open source:
> * Desktop GIS programming services
> * Geospatial web development
> * GIS Training
> * Consulting Services
> Phone: +387 61 933 651
>


-- 
Selma Vidimlic Husic
QGIS Documentation Writer
Visit http://kartoza.com to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Phone: +387 61 933 651
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/6ea32713/attachment-0001.htm>

From landa.martin at gmail.com  Fri Jan 26 12:58:11 2024
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 26 Jan 2024 21:58:11 +0100
Subject: [QGIS-Developer] plugins: pip dependecies
In-Reply-To: <CAL5Q673a4sruyzgUP91=GVDDNieoGm7j7_v-d4M=5EX=4QsirQ@mail.gmail.com>
References: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>
 <CAL5Q673a4sruyzgUP91=GVDDNieoGm7j7_v-d4M=5EX=4QsirQ@mail.gmail.com>
Message-ID: <CA+Ei1OcDrntMOfX_f=RG97R9m7-hyTKt5fptkOyqwdLXubf-rQ@mail.gmail.com>

Hi Alessandro,

p? 26. 1. 2024 v 11:38 odes?latel Alessandro Pasotti <apasotti at gmail.com>
napsal:

> Hi Martin,
>
> plugin dependencies are for plugin dependent on other plugins, it has
> nothing to do with python packages.
>
> See:
> https://docs.qgis.org/3.28/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#metadata-txt
>

ops, I was confused by "PIP-like". I read it as PIP dependencies. Thanks
for clarifying. Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/bb0219f0/attachment.htm>

From landa.martin at gmail.com  Fri Jan 26 13:01:56 2024
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 26 Jan 2024 22:01:56 +0100
Subject: [QGIS-Developer] plugins: pip dependecies
In-Reply-To: <CAC7zN97W-qsYvAQas3csucaTatwe0yyZ6fJaTqdGUgchyUAHrQ@mail.gmail.com>
References: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>
 <CAL5Q673a4sruyzgUP91=GVDDNieoGm7j7_v-d4M=5EX=4QsirQ@mail.gmail.com>
 <CAC7zN97W-qsYvAQas3csucaTatwe0yyZ6fJaTqdGUgchyUAHrQ@mail.gmail.com>
Message-ID: <CA+Ei1Ocji=mUtATvFoxJ6pueePS19zXe3dJ+4_8suBSyj_PV=A@mail.gmail.com>

Hi Matthias,

p? 26. 1. 2024 v 11:43 odes?latel Matthias Kuhn <matthias at opengis.ch>
napsal:

> You might try qpip, it's designed for exactly this purpose:
> https://github.com/opengisch/qpip
>

Thanks for the tip. I will try it out.

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/891f31eb/attachment.htm>

From landa.martin at gmail.com  Fri Jan 26 13:02:32 2024
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 26 Jan 2024 22:02:32 +0100
Subject: [QGIS-Developer] plugins: pip dependecies
In-Reply-To: <38c1acbe-40bb-4ba4-980d-fc0b8091f530@wheregroup.com>
References: <CA+Ei1OcpN3y8MWUc75eEfXu12foPKeJmuP03hR6qGVgFvXs2sA@mail.gmail.com>
 <38c1acbe-40bb-4ba4-980d-fc0b8091f530@wheregroup.com>
Message-ID: <CA+Ei1OcnH9uedkiw4Ri2KKj26A5o8enZfQ_+AQV9hP-ZR-LYow@mail.gmail.com>

Hi Hannes,

p? 26. 1. 2024 v 11:45 odes?latel Johannes Kr?ger (WhereGroup) <
johannes.kroeger at wheregroup.com> napsal:

> try this thread from last week:
> https://lists.osgeo.org/pipermail/qgis-developer/2024-January/066390.html
>
> In it Julien and Matthias shared lots of information on this topic.
>
great, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240126/c2a483f1/attachment.htm>

From rdmailings at duif.net  Fri Jan 26 13:52:20 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 26 Jan 2024 22:52:20 +0100
Subject: [QGIS-Developer] Qt6 builds and plugins -- ready for testing!
In-Reply-To: <1cb73a15-f71c-4af4-b316-a980f9bbd9fe@duif.net>
References: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
 <1cb73a15-f71c-4af4-b316-a980f9bbd9fe@duif.net>
Message-ID: <79a04469-323e-4f03-8db3-19813c55e77b@duif.net>

Ok, installed qwt by downloading deb file from testing...

configure: ok
generate: ok

compiling: stopped at
build/python/gui/gui.sip: line 11: column 9: 'QtCore/QtCoremod.sip' could not be found
seems to be able to fix this using the fix from Thomas from
https://github.com/qgis/QGIS/issues/54184#issuecomment-1795204001
(NOTE: had to do this for my own build in Trixie too!)

compile again: stop at:

[423/2971] Building CXX object src/core/CMakeFiles/qgis_core.dir/qgsvariantutils.cpp.o
FAILED: src/core/CMakeFiles/qgis_core.dir/qgsvariantutils.cpp.o
...
home/richard/git/qgisqt6/src/core/qgsvariantutils.cpp: In static member function ?static QVariant::Type QgsVariantUtils::metaTypeToVariantType(QMetaType::Type)?:
/home/richard/git/qgisqt6/src/core/qgsvariantutils.cpp:489:21: error: ?Float16? is not a member of ?QMetaType?
   489 |     case QMetaType::Float16:
       |                     ^~~~~~~
[440/2971] Building CXX object src/core/CMakeFiles/qgis_core.dir/qgsvectorfilewriter.cpp.o

Anybody a hint?

Regards,

Richard Duivenvoorde


On 1/26/24 10:05, Richard Duivenvoorde via QGIS-Developer wrote:
> Whow! Cool!
> 
> Thanks to all peeps/sponsors making this happen!
> 
> Eager to try to build. Is
> https://lists.osgeo.org/pipermail/qgis-developer/2022-August/065012.html
> more or less the status of dependencies you also have to get/build yourself on Debian?
> 
> Ok searched and tried to configure.
> 
> Following seem to be OK:
> 
> - qca? (I see libqca-qt6-dev/testing 2.3.8-1 in Debian testing)
> - qtkeychain? (I see qtkeychain-qt6-dev/testing 0.14.2-1 in Debian testing)
> - QScintilla? (I see libqscintilla2-qt6-dev/testing,now 2.14.1+dfsg-1 in Debian testing)
> 
> - qwt? (cannot find qt6 mention in Debian testing)
> 
> So: need to compile QWT myself?
> Like mentioned in dev list mail from 2022?
> 
> 
> For debianista's willing to try:
> - on Debian testing, on which I also compile QGIS-qt5, I (via trial and error) installed:
> 
> sudo apt install libqca-qt6-dev qtkeychain-qt6-dev libqscintilla2-qt6-dev qt6-serialport-dev qt6-svg-dev qt6-positioning-dev libqt6core5compat6 qt6-5compat-dev python3-pyqt6 python3-pyqt6.qsci pyqt6-dev-tools python3-pyqt6.qtmultimedia qml6-module-qtmultimedia qt6-multimedia-dev qt6-tools-dev
> 
> mkdir build;cd build;ccmake -GNinja -DBUILD_TESTING=FALSE -DENABLE_TESTS=OFF -DWITH_SERVER=FALSE -DWITH_3D=FALSE -DCMAKE_INSTALL_PREFIX=~/bin/qgis_/qt6/debug -DWITH_QWTPOLAR=OFF -DCMAKE_BUILD_TYPE=Debug -DWITH_GRASS=FALSE -DBUILD_WITH_QT6=TRUE -DWITH_OAUTH2_PLUGIN=FALSE -DWITH_WITH_SERVER_PLUGINS=OFF -DWITH_STAGED_PLUGINS=OFF -DWITH_PDAL=OFF -DWITH_QTWEBKIT=OFF ..
> 
> Then configuring goes without errors.
> But on generating, I get
> 
>  ?CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
>  ?Please set them or make sure they are set and tested correctly in the CMake files:
>  ?QWT_LIBRARY
>  ???? linked by target "qgis_gui" in directory /home/richard/git/qgisqt6/src/gui
>  ???? linked by target "qgis_app" in directory /home/richard/git/qgisqt6/src/app
>  ?Generating done (0.5s)
> 
> So probably need to get QWT compiled for qt6?
> Found https://packages.debian.org/experimental/libqwt-qt6-6.2 but dare not to pull that into my testing machine?
> 
> 
> Anyway, Thanks all!
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> 
> For debianista's willing to try:
> - on Debian testing, on which I also compile QGIS-qt5, I (via trial and error) installed:
> 
> sudo apt install libqca-qt6-dev qtkeychain-qt6-dev libqscintilla2-qt6-dev qt6-serialport-dev qt6-svg-dev qt6-positioning-dev libqt6core5compat6 qt6-5compat-dev python3-pyqt6 python3-pyqt6.qsci pyqt6-dev-tools python3-pyqt6.qtmultimedia qml6-module-qtmultimedia qt6-multimedia-dev Qt6UiToolsConfig.cmake
> 
> mkdir build;cd build;ccmake -GNinja -DBUILD_TESTING=FALSE -DENABLE_TESTS=OFF -DWITH_SERVER=FALSE -DWITH_3D=FALSE -DCMAKE_INSTALL_PREFIX=~/bin/qgis_/qt6/debug -DWITH_QWTPOLAR=OFF -DCMAKE_BUILD_TYPE=Debug -DWITH_GRASS=FALSE -DBUILD_WITH_QT6=TRUE -DWITH_OAUTH2_PLUGIN=FALSE -DWITH_WITH_SERVER_PLUGINS=OFF -DWITH_STAGED_PLUGINS=OFF -DWITH_PDAL=OFF -DWITH_QTWEBKIT=OFF ..
> 
> 
> 
> On 1/25/24 22:58, Nyall Dawson via QGIS-Developer wrote:
>> Hi list,
>>
>> With some excellent work recently completed by Julien, we're now at a stage where there's no *major* roadblocks preventing plugins from functioning under the Qt6 builds!
>>
>> In fact, the first plugin has already been ported to be compatible with these (First Aid Plugin) -- see https://github.com/wonder-sk/qgis-first-aid-plugin/commits/master/ <https://github.com/wonder-sk/qgis-first-aid-plugin/commits/master/> .
>>
>> I think we're now at a stage where wider testing of the Qt6 builds and feedback via bug reports are valuable. A couple of notes:
>>
>> - We're up to roughly?2/3rd of the existing Python tests passing on Qt 6 builds. That's obviously not everything, so we aren't finished with this work yet??
>>
>> - There's a script available in the repo for automatically upgrading QGIS plugins/scripts to Qt 6 compatibility WITHOUT BREAKING compatibility with older releases/qt5 based releases. It's here: https://github.com/qgis/QGIS/blob/master/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py <https://github.com/qgis/QGIS/blob/master/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py>
>>
>> - After running the script, you'll also need to add "supportsQt6=yes" to your plugins metadata configuration. Otherwise the Qt6 builds will just ignore your plugin and will refuse to load it. See eg https://github.com/wonder-sk/qgis-first-aid-plugin/commit/3687be7d9e026c59c9b775caaf5ee18cf8639886 <https://github.com/wonder-sk/qgis-first-aid-plugin/commit/3687be7d9e026c59c9b775caaf5ee18cf8639886>
>>
>> - You'll need to compile your own Qt 6 build. There's no nightlies or any prepackaged versions available.
>>
>> - There are still some known issues with enum handling, but please open bug reports when you encounter these!
>>
>> - The plugin manager is currently broken in the Qt6 builds. Use a Qt5 build to enable plugins
>> ?
>>
>> Again, to reiterate, there's NO plans for moving to QGIS 4.0 on the horizon. The plan is to allow plugins to add Qt6 support without breaking any compatibility with Qt5/older releases, so that the effort required by plugin authors is extremely minimal. And with any luck, the?pyqt5_to_pyqt6.py script will do 99% of the work for you. Qt 6 builds of QGIS 3.x will become available at some stage in a "preview release" capacity, and likely some platforms will move to Qt6 only releases when necessary for that platform (eg MacOS, wayland only linux systems). Read more about the plan at https://github.com/qgis/QGIS-Enhancement-Proposals/issues/198 <https://github.com/qgis/QGIS-Enhancement-Proposals/issues/198>
>>
>> This work has ONLY been possible thanks to funding from qgis.org <http://qgis.org>, ie it's possible only because of the users and organisations sponsoring QGIS!
>>
>> Nyall
>>
>>
>>
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From nyall.dawson at gmail.com  Fri Jan 26 15:31:49 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 27 Jan 2024 09:31:49 +1000
Subject: [QGIS-Developer] Qt6 builds and plugins -- ready for testing!
In-Reply-To: <79a04469-323e-4f03-8db3-19813c55e77b@duif.net>
References: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
 <1cb73a15-f71c-4af4-b316-a980f9bbd9fe@duif.net>
 <79a04469-323e-4f03-8db3-19813c55e77b@duif.net>
Message-ID: <CAB28AsiWHSA9tGDd8Ec9LBitD5igBWLx7GMEKkNDbxtbgT+ASg@mail.gmail.com>

On Sat, 27 Jan 2024 at 07:53, Richard Duivenvoorde via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> Ok, installed qwt by downloading deb file from testing...
>
> configure: ok
> generate: ok
>
> compiling: stopped at
> build/python/gui/gui.sip: line 11: column 9: 'QtCore/QtCoremod.sip' could not be found
> seems to be able to fix this using the fix from Thomas from
> https://github.com/qgis/QGIS/issues/54184#issuecomment-1795204001
> (NOTE: had to do this for my own build in Trixie too!)
>
> compile again: stop at:
>
> [423/2971] Building CXX object src/core/CMakeFiles/qgis_core.dir/qgsvariantutils.cpp.o
> FAILED: src/core/CMakeFiles/qgis_core.dir/qgsvariantutils.cpp.o
> ...
> home/richard/git/qgisqt6/src/core/qgsvariantutils.cpp: In static member function ?static QVariant::Type QgsVariantUtils::metaTypeToVariantType(QMetaType::Type)?:
> /home/richard/git/qgisqt6/src/core/qgsvariantutils.cpp:489:21: error: ?Float16? is not a member of ?QMetaType?
>    489 |     case QMetaType::Float16:
>        |                     ^~~~~~~
> [440/2971] Building CXX object src/core/CMakeFiles/qgis_core.dir/qgsvectorfilewriter.cpp.o
>
> Anybody a hint?

Looks like you'll need https://github.com/qgis/QGIS/pull/56033 too.
Try removing that line for now.

Nyall

>
> Regards,
>
> Richard Duivenvoorde
>
>
> On 1/26/24 10:05, Richard Duivenvoorde via QGIS-Developer wrote:
> > Whow! Cool!
> >
> > Thanks to all peeps/sponsors making this happen!
> >
> > Eager to try to build. Is
> > https://lists.osgeo.org/pipermail/qgis-developer/2022-August/065012.html
> > more or less the status of dependencies you also have to get/build yourself on Debian?
> >
> > Ok searched and tried to configure.
> >
> > Following seem to be OK:
> >
> > - qca  (I see libqca-qt6-dev/testing 2.3.8-1 in Debian testing)
> > - qtkeychain  (I see qtkeychain-qt6-dev/testing 0.14.2-1 in Debian testing)
> > - QScintilla  (I see libqscintilla2-qt6-dev/testing,now 2.14.1+dfsg-1 in Debian testing)
> >
> > - qwt  (cannot find qt6 mention in Debian testing)
> >
> > So: need to compile QWT myself?
> > Like mentioned in dev list mail from 2022?
> >
> >
> > For debianista's willing to try:
> > - on Debian testing, on which I also compile QGIS-qt5, I (via trial and error) installed:
> >
> > sudo apt install libqca-qt6-dev qtkeychain-qt6-dev libqscintilla2-qt6-dev qt6-serialport-dev qt6-svg-dev qt6-positioning-dev libqt6core5compat6 qt6-5compat-dev python3-pyqt6 python3-pyqt6.qsci pyqt6-dev-tools python3-pyqt6.qtmultimedia qml6-module-qtmultimedia qt6-multimedia-dev qt6-tools-dev
> >
> > mkdir build;cd build;ccmake -GNinja -DBUILD_TESTING=FALSE -DENABLE_TESTS=OFF -DWITH_SERVER=FALSE -DWITH_3D=FALSE -DCMAKE_INSTALL_PREFIX=~/bin/qgis_/qt6/debug -DWITH_QWTPOLAR=OFF -DCMAKE_BUILD_TYPE=Debug -DWITH_GRASS=FALSE -DBUILD_WITH_QT6=TRUE -DWITH_OAUTH2_PLUGIN=FALSE -DWITH_WITH_SERVER_PLUGINS=OFF -DWITH_STAGED_PLUGINS=OFF -DWITH_PDAL=OFF -DWITH_QTWEBKIT=OFF ..
> >
> > Then configuring goes without errors.
> > But on generating, I get
> >
> >   CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
> >   Please set them or make sure they are set and tested correctly in the CMake files:
> >   QWT_LIBRARY
> >       linked by target "qgis_gui" in directory /home/richard/git/qgisqt6/src/gui
> >       linked by target "qgis_app" in directory /home/richard/git/qgisqt6/src/app
> >   Generating done (0.5s)
> >
> > So probably need to get QWT compiled for qt6?
> > Found https://packages.debian.org/experimental/libqwt-qt6-6.2 but dare not to pull that into my testing machine?
> >
> >
> > Anyway, Thanks all!
> >
> > Regards,
> >
> > Richard Duivenvoorde
> >
> >
> > For debianista's willing to try:
> > - on Debian testing, on which I also compile QGIS-qt5, I (via trial and error) installed:
> >
> > sudo apt install libqca-qt6-dev qtkeychain-qt6-dev libqscintilla2-qt6-dev qt6-serialport-dev qt6-svg-dev qt6-positioning-dev libqt6core5compat6 qt6-5compat-dev python3-pyqt6 python3-pyqt6.qsci pyqt6-dev-tools python3-pyqt6.qtmultimedia qml6-module-qtmultimedia qt6-multimedia-dev Qt6UiToolsConfig.cmake
> >
> > mkdir build;cd build;ccmake -GNinja -DBUILD_TESTING=FALSE -DENABLE_TESTS=OFF -DWITH_SERVER=FALSE -DWITH_3D=FALSE -DCMAKE_INSTALL_PREFIX=~/bin/qgis_/qt6/debug -DWITH_QWTPOLAR=OFF -DCMAKE_BUILD_TYPE=Debug -DWITH_GRASS=FALSE -DBUILD_WITH_QT6=TRUE -DWITH_OAUTH2_PLUGIN=FALSE -DWITH_WITH_SERVER_PLUGINS=OFF -DWITH_STAGED_PLUGINS=OFF -DWITH_PDAL=OFF -DWITH_QTWEBKIT=OFF ..
> >
> >
> >
> > On 1/25/24 22:58, Nyall Dawson via QGIS-Developer wrote:
> >> Hi list,
> >>
> >> With some excellent work recently completed by Julien, we're now at a stage where there's no *major* roadblocks preventing plugins from functioning under the Qt6 builds!
> >>
> >> In fact, the first plugin has already been ported to be compatible with these (First Aid Plugin) -- see https://github.com/wonder-sk/qgis-first-aid-plugin/commits/master/ <https://github.com/wonder-sk/qgis-first-aid-plugin/commits/master/> .
> >>
> >> I think we're now at a stage where wider testing of the Qt6 builds and feedback via bug reports are valuable. A couple of notes:
> >>
> >> - We're up to roughly 2/3rd of the existing Python tests passing on Qt 6 builds. That's obviously not everything, so we aren't finished with this work yet ?
> >>
> >> - There's a script available in the repo for automatically upgrading QGIS plugins/scripts to Qt 6 compatibility WITHOUT BREAKING compatibility with older releases/qt5 based releases. It's here: https://github.com/qgis/QGIS/blob/master/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py <https://github.com/qgis/QGIS/blob/master/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py>
> >>
> >> - After running the script, you'll also need to add "supportsQt6=yes" to your plugins metadata configuration. Otherwise the Qt6 builds will just ignore your plugin and will refuse to load it. See eg https://github.com/wonder-sk/qgis-first-aid-plugin/commit/3687be7d9e026c59c9b775caaf5ee18cf8639886 <https://github.com/wonder-sk/qgis-first-aid-plugin/commit/3687be7d9e026c59c9b775caaf5ee18cf8639886>
> >>
> >> - You'll need to compile your own Qt 6 build. There's no nightlies or any prepackaged versions available.
> >>
> >> - There are still some known issues with enum handling, but please open bug reports when you encounter these!
> >>
> >> - The plugin manager is currently broken in the Qt6 builds. Use a Qt5 build to enable plugins
> >> ?
> >>
> >> Again, to reiterate, there's NO plans for moving to QGIS 4.0 on the horizon. The plan is to allow plugins to add Qt6 support without breaking any compatibility with Qt5/older releases, so that the effort required by plugin authors is extremely minimal. And with any luck, the pyqt5_to_pyqt6.py script will do 99% of the work for you. Qt 6 builds of QGIS 3.x will become available at some stage in a "preview release" capacity, and likely some platforms will move to Qt6 only releases when necessary for that platform (eg MacOS, wayland only linux systems). Read more about the plan at https://github.com/qgis/QGIS-Enhancement-Proposals/issues/198 <https://github.com/qgis/QGIS-Enhancement-Proposals/issues/198>
> >>
> >> This work has ONLY been possible thanks to funding from qgis.org <http://qgis.org>, ie it's possible only because of the users and organisations sponsoring QGIS!
> >>
> >> Nyall
> >>
> >>
> >>
> >>
> >>
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Sat Jan 27 01:39:26 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 27 Jan 2024 10:39:26 +0100
Subject: [QGIS-Developer] Qt6 builds and plugins -- ready for testing!
In-Reply-To: <CAB28AsiWHSA9tGDd8Ec9LBitD5igBWLx7GMEKkNDbxtbgT+ASg@mail.gmail.com>
References: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
 <1cb73a15-f71c-4af4-b316-a980f9bbd9fe@duif.net>
 <79a04469-323e-4f03-8db3-19813c55e77b@duif.net>
 <CAB28AsiWHSA9tGDd8Ec9LBitD5igBWLx7GMEKkNDbxtbgT+ASg@mail.gmail.com>
Message-ID: <f5b61c5b-9c45-4353-95d1-ced20b10f919@duif.net>

On 1/27/24 00:31, Nyall Dawson wrote:
> Looks like you'll need https://github.com/qgis/QGIS/pull/56033 too.
> Try removing that line for now.

Yep, thanks. Merged/fixed now apparently.

Next issue with qwt:

FAILED: src/gui/CMakeFiles/qgis_gui.dir/raster/qgsrasterhistogramwidget.cpp.o
...
In file included from /home/richard/git/qgisqt6/src/gui/raster/qgsrasterhistogramwidget.cpp:45:
/usr/include/qwt/qwt_plot_layout.h:84:51: error: invalid conversion from ?int? to ?QwtPlotLayout::Option? [-fpermissive]
    84 |         const QRectF &plotRect, Options options = 0x00 );
       |                                                   ^~~~
       |                                                   |
       |                                                   int
In file included from /usr/include/x86_64-linux-gnu/qt6/QtCore/qglobal.h:1401,
                  from /usr/include/x86_64-linux-gnu/qt6/QtGui/qtguiglobal.h:7,
                  from /usr/include/x86_64-linux-gnu/qt6/QtWidgets/qtwidgetsglobal.h:7,
                  from /usr/include/x86_64-linux-gnu/qt6/QtWidgets/qapplication.h:7,
                  from /usr/include/x86_64-linux-gnu/qt6/QtWidgets/QApplication:1,
                  from /home/richard/git/qgisqt6/src/core/qgsapplication.h:19,
                  from /home/richard/git/qgisqt6/src/gui/raster/qgsrasterhistogramwidget.cpp:18:
/usr/include/x86_64-linux-gnu/qt6/QtCore/qflags.h:74:45: note:   initializing argument 1 of ?constexpr QFlags<T>::QFlags(Enum) [with Enum = QwtPlotLayout::Option]?
    74 |     constexpr inline Q_IMPLICIT QFlags(Enum flags) noexcept : i(Int(flags)) {}
       |                                        ~~~~~^~~~~
[344/2107] Building CXX object src/gui/CMakeFiles/qgis_gui.dir/qgis_gui_autogen/mocs_compilation.cpp.o

Not sure if this has something to do with my qwt install from experimental/sid:

libqwt-qt6-6.2/now 6.2.0-1 amd64 [installed,local]
   Qt widgets library for technical applications (runtime, qt6)

I think the version is more or less in line with my qt6 from testing/trixie?

pyqt6-dev/testing,now 6.6.1-2 all [installed]
   development files for PyQt6
libqt6core6/testing,now 6.4.2+dfsg-21 amd64 [installed,automatic]
   Qt 6 core module

Any hint to overcome this one?

Regards,

Richard Duivenvoorde

PS: let me know if this is totally not helpful, I'm just eager to know if QGIS-qt6 is building (or I can make it build) on Debian testing/trixie


From even.rouault at spatialys.com  Sat Jan 27 03:42:05 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Jan 2024 12:42:05 +0100
Subject: [QGIS-Developer] Qt6 builds and plugins -- ready for testing!
In-Reply-To: <f5b61c5b-9c45-4353-95d1-ced20b10f919@duif.net>
References: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
 <1cb73a15-f71c-4af4-b316-a980f9bbd9fe@duif.net>
 <79a04469-323e-4f03-8db3-19813c55e77b@duif.net>
 <CAB28AsiWHSA9tGDd8Ec9LBitD5igBWLx7GMEKkNDbxtbgT+ASg@mail.gmail.com>
 <f5b61c5b-9c45-4353-95d1-ced20b10f919@duif.net>
Message-ID: <c21103b6-95e2-4cb4-abe7-53bfb303598f@spatialys.com>

Richard,

There's something weird with your installation. According to 
https://salsa.debian.org/qt-kde-team/extras/qwt/-/blob/debian/master/src/qwt_plot_layout.h?ref_type=heads#L84, 
this should be

|constQRectF& plotRect, Options options = Options());|

According to 
https://packages.debian.org/experimental/amd64/libqwt-headers/filelist , 
this file is provided by the libqwt-header package. Check that it is at 
version 6.2.0-1

The version you have is presumably 6.1.4-2: 
https://salsa.debian.org/qt-kde-team/extras/qwt/-/blob/debian/6.1.4-2/src/qwt_plot_layout.h?ref_type=tags#L84

Even

Le 27/01/2024 ? 10:39, Richard Duivenvoorde via QGIS-Developer a ?crit?:
> On 1/27/24 00:31, Nyall Dawson wrote:
>> Looks like you'll need https://github.com/qgis/QGIS/pull/56033 too.
>> Try removing that line for now.
>
> Yep, thanks. Merged/fixed now apparently.
>
> Next issue with qwt:
>
> FAILED: 
> src/gui/CMakeFiles/qgis_gui.dir/raster/qgsrasterhistogramwidget.cpp.o
> ...
> In file included from 
> /home/richard/git/qgisqt6/src/gui/raster/qgsrasterhistogramwidget.cpp:45:
> /usr/include/qwt/qwt_plot_layout.h:84:51: error: invalid conversion 
> from ?int? to ?QwtPlotLayout::Option? [-fpermissive]
> ?? 84 |???????? const QRectF &plotRect, Options options = 0x00 );
> ????? |?????????????????????????????????????????????????? ^~~~
> ????? |?????????????????????????????????????????????????? |
> ????? |?????????????????????????????????????????????????? int
> In file included from 
> /usr/include/x86_64-linux-gnu/qt6/QtCore/qglobal.h:1401,
> ???????????????? from 
> /usr/include/x86_64-linux-gnu/qt6/QtGui/qtguiglobal.h:7,
> ???????????????? from 
> /usr/include/x86_64-linux-gnu/qt6/QtWidgets/qtwidgetsglobal.h:7,
> ???????????????? from 
> /usr/include/x86_64-linux-gnu/qt6/QtWidgets/qapplication.h:7,
> ???????????????? from 
> /usr/include/x86_64-linux-gnu/qt6/QtWidgets/QApplication:1,
> ???????????????? from 
> /home/richard/git/qgisqt6/src/core/qgsapplication.h:19,
> ???????????????? from 
> /home/richard/git/qgisqt6/src/gui/raster/qgsrasterhistogramwidget.cpp:18:
> /usr/include/x86_64-linux-gnu/qt6/QtCore/qflags.h:74:45: note: 
> initializing argument 1 of ?constexpr QFlags<T>::QFlags(Enum) [with 
> Enum = QwtPlotLayout::Option]?
> ?? 74 |???? constexpr inline Q_IMPLICIT QFlags(Enum flags) noexcept : 
> i(Int(flags)) {}
> ????? |??????????????????????????????????????? ~~~~~^~~~~
> [344/2107] Building CXX object 
> src/gui/CMakeFiles/qgis_gui.dir/qgis_gui_autogen/mocs_compilation.cpp.o
>
> Not sure if this has something to do with my qwt install from 
> experimental/sid:
>
> libqwt-qt6-6.2/now 6.2.0-1 amd64 [installed,local]
> ? Qt widgets library for technical applications (runtime, qt6)
>
> I think the version is more or less in line with my qt6 from 
> testing/trixie?
>
> pyqt6-dev/testing,now 6.6.1-2 all [installed]
> ? development files for PyQt6
> libqt6core6/testing,now 6.4.2+dfsg-21 amd64 [installed,automatic]
> ? Qt 6 core module
>
> Any hint to overcome this one?
>
> Regards,
>
> Richard Duivenvoorde
>
> PS: let me know if this is totally not helpful, I'm just eager to know 
> if QGIS-qt6 is building (or I can make it build) on Debian testing/trixie
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240127/19603d6b/attachment.htm>

From rdmailings at duif.net  Sun Jan 28 03:32:27 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 28 Jan 2024 12:32:27 +0100
Subject: [QGIS-Developer] Qt6 builds and plugins -- ready for testing!
In-Reply-To: <c21103b6-95e2-4cb4-abe7-53bfb303598f@spatialys.com>
References: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
 <1cb73a15-f71c-4af4-b316-a980f9bbd9fe@duif.net>
 <79a04469-323e-4f03-8db3-19813c55e77b@duif.net>
 <CAB28AsiWHSA9tGDd8Ec9LBitD5igBWLx7GMEKkNDbxtbgT+ASg@mail.gmail.com>
 <f5b61c5b-9c45-4353-95d1-ced20b10f919@duif.net>
 <c21103b6-95e2-4cb4-abe7-53bfb303598f@spatialys.com>
Message-ID: <26a802d2-372d-4d6a-b62f-425167d16dea@duif.net>

Ok, lift off :-) See screenie.

Thank Even, I had mixed version qwt headers and libs.

So on Debian Trixie, there seems no libqwt for qt6 available yet?
Had to pull these from experimental:

libqwt-headers_6.2.0-1_amd64.deb
libqwt-qt6-6.2_6.2.0-1_amd64.deb
libqwt-qt6-dev_6.2.0-1_amd64.deb

Then QGIS-qt6 compiles and I can run it, without python though, because creation of the bindings fails.

Not sure if this is because of the libqwt in my setup or something else.
Also not sure if these are warnings, or the actual cause of stopping:

pyproject.toml: line 7: using '[tool.sip.metadata]' to specify the project metadata is deprecated and will be removed in SIP v7.0.0, use '[project]' instead
Querying qmake about your Qt installation...
These bindings will be built: gui.
Generating the gui bindings...
sip-build: /home/richard/git/qgisqt6/build/python/core/auto_generated/qgsspatialindex.sip: line 148: column 5: 'QgsSpatialIndex::intersects' has an unsupported return type - provide %MethodCode and a C++ signature
/home/richard/git/qgisqt6/build/python/core/auto_generated/qgsspatialindex.sip: line 159: column 5: 'QgsSpatialIndex::nearestNeighbor' has an unsupported return type - provide %MethodCode and a C++ signature
/home/richard/git/qgisqt6/build/python/core/auto_generated/qgsspatialindex.sip: line 179: column 5: 'QgsSpatialIndex::nearestNeighbor' has an unsupported return type - provide %MethodCode and a C++ signature
/home/richard/git/qgisqt6/build/python/gui/auto_generated/attributetable/qgsattributetableview.sip: line 63: column 5: 'QgsAttributeTableView::selectedFeaturesIds' has an unsupported return type - provide %MethodCode and a C++ signature
ninja: build stopped: subcommand failed.

Regards & Thanks,

Richard Duivenvoorde

PS: slightly disappointed because QGIS looks exactly the same in qt6 :-) Was hoping that... don't know, would look very shiny now ;-)



On 1/27/24 12:42, Even Rouault wrote:
> Richard,
> 
> There's something weird with your installation. According to https://salsa.debian.org/qt-kde-team/extras/qwt/-/blob/debian/master/src/qwt_plot_layout.h?ref_type=heads#L84, this should be
> 
> |constQRectF& plotRect, Options options = Options());|
> 
> According to https://packages.debian.org/experimental/amd64/libqwt-headers/filelist , this file is provided by the libqwt-header package. Check that it is at version 6.2.0-1
> 
> The version you have is presumably 6.1.4-2: https://salsa.debian.org/qt-kde-team/extras/qwt/-/blob/debian/6.1.4-2/src/qwt_plot_layout.h?ref_type=tags#L84
> 
> Even
> 
> Le 27/01/2024 ? 10:39, Richard Duivenvoorde via QGIS-Developer a ?crit?:
>> On 1/27/24 00:31, Nyall Dawson wrote:
>>> Looks like you'll need https://github.com/qgis/QGIS/pull/56033 too.
>>> Try removing that line for now.
>>
>> Yep, thanks. Merged/fixed now apparently.
>>
>> Next issue with qwt:
>>
>> FAILED: src/gui/CMakeFiles/qgis_gui.dir/raster/qgsrasterhistogramwidget.cpp.o
>> ...
>> In file included from /home/richard/git/qgisqt6/src/gui/raster/qgsrasterhistogramwidget.cpp:45:
>> /usr/include/qwt/qwt_plot_layout.h:84:51: error: invalid conversion from ?int? to ?QwtPlotLayout::Option? [-fpermissive]
>> ?? 84 |???????? const QRectF &plotRect, Options options = 0x00 );
>> ????? |?????????????????????????????????????????????????? ^~~~
>> ????? |?????????????????????????????????????????????????? |
>> ????? |?????????????????????????????????????????????????? int
>> In file included from /usr/include/x86_64-linux-gnu/qt6/QtCore/qglobal.h:1401,
>> ???????????????? from /usr/include/x86_64-linux-gnu/qt6/QtGui/qtguiglobal.h:7,
>> ???????????????? from /usr/include/x86_64-linux-gnu/qt6/QtWidgets/qtwidgetsglobal.h:7,
>> ???????????????? from /usr/include/x86_64-linux-gnu/qt6/QtWidgets/qapplication.h:7,
>> ???????????????? from /usr/include/x86_64-linux-gnu/qt6/QtWidgets/QApplication:1,
>> ???????????????? from /home/richard/git/qgisqt6/src/core/qgsapplication.h:19,
>> ???????????????? from /home/richard/git/qgisqt6/src/gui/raster/qgsrasterhistogramwidget.cpp:18:
>> /usr/include/x86_64-linux-gnu/qt6/QtCore/qflags.h:74:45: note: initializing argument 1 of ?constexpr QFlags<T>::QFlags(Enum) [with Enum = QwtPlotLayout::Option]?
>> ?? 74 |???? constexpr inline Q_IMPLICIT QFlags(Enum flags) noexcept : i(Int(flags)) {}
>> ????? |??????????????????????????????????????? ~~~~~^~~~~
>> [344/2107] Building CXX object src/gui/CMakeFiles/qgis_gui.dir/qgis_gui_autogen/mocs_compilation.cpp.o
>>
>> Not sure if this has something to do with my qwt install from experimental/sid:
>>
>> libqwt-qt6-6.2/now 6.2.0-1 amd64 [installed,local]
>> ? Qt widgets library for technical applications (runtime, qt6)
>>
>> I think the version is more or less in line with my qt6 from testing/trixie?
>>
>> pyqt6-dev/testing,now 6.6.1-2 all [installed]
>> ? development files for PyQt6
>> libqt6core6/testing,now 6.4.2+dfsg-21 amd64 [installed,automatic]
>> ? Qt 6 core module
>>
>> Any hint to overcome this one?
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>> PS: let me know if this is totally not helpful, I'm just eager to know if QGIS-qt6 is building (or I can make it build) on Debian testing/trixie
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: qt6-about.jpg
Type: image/jpeg
Size: 57041 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240128/3a47b96b/attachment-0001.jpg>

From rdmailings at duif.net  Sun Jan 28 05:52:17 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 28 Jan 2024 14:52:17 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <17748957-c3cb-4a0c-b4fe-742297e9e044@spatialys.com>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
 <ff3d0e00-d2c1-4ae3-9427-da3961d04e13@duif.net>
 <17748957-c3cb-4a0c-b4fe-742297e9e044@spatialys.com>
Message-ID: <1bcc0a38-1805-4717-ab02-ee21351bc994@duif.net>


On 1/23/24 23:21, Even Rouault wrote:
> So all in all, no issues on my side...

You were off course right :-)

I found out how to fix the missing crs in mysql and wrote some info (for future reference) in a comment:

https://github.com/qgis/QGIS/issues/55463#issuecomment-1913602140

One thing I'm curious for, is why QGIS even after setting the right crs, is not able to show the geom (but IS able to show the attributes). Apparently the features are retrieved. If you receive features from a shp file without crs, after setting it on the layer, all is fine. So myql is different?

Did a short try to debug this, but this is above my c++ skills :-)

Anyway thanks! And I hope the comment is helpful to mysql peeps

Regards,

Richard Duivenvoorde
  


From even.rouault at spatialys.com  Sun Jan 28 10:04:51 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Jan 2024 19:04:51 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <1bcc0a38-1805-4717-ab02-ee21351bc994@duif.net>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
 <ff3d0e00-d2c1-4ae3-9427-da3961d04e13@duif.net>
 <17748957-c3cb-4a0c-b4fe-742297e9e044@spatialys.com>
 <1bcc0a38-1805-4717-ab02-ee21351bc994@duif.net>
Message-ID: <8dce99f0-9bda-450d-9ac5-861a255df1fa@spatialys.com>

Richard,

what I don't understand is how you manage to create with ogr2ogr a table 
without explicit SRS with features whose coordinates are not compatible 
of geographic coordinates. As mentioned previously, I do get a hard 
error from ogr2ogr when trying that. Which GDAL version do you use?

The reason for which QGIS doesn't display features is likely it calls 
OGR with SetSpatialFilter() , which the mySQL driver turns into a? WHERE 
MBRIntersects(ST_GeomFromText('POLYGON((.....))', 
'axis-order=long-lat'), `geom_colum_name`) filter. The 
'axis-order=long-lat' qualifier is because OGR (perhaps mistakenly?) 
identifies the layer as with a geographic SRS, and if the extents of the 
layer aren't compatible of geographic coordinates, that probably causes 
the filter to fail.

Actually trying the following on a layer without explicit CRS, which 
then causes a undefined geographic CRS to be assigned to the layer

$ ogrinfo 
"mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" test 
-spat -180 -90 180 90

I do get:

ERROR 1: MySQL error message:Longitude -180.000000 is out of range in 
function st_geomfromtext. It must be within (-180.000000, 180.000000]. 
Description: SELECT `OGR_FID`, `SHAPE` `SHAPE`, `id` FROM `test` WHERE 
MBRIntersects(ST_GeomFromText('POLYGON((-180 -90, 180 -90, 180 90, -180 
90, -180 -90))', 32767, 'axis-order=long-lat'), `SHAPE`)

So MySQL is super picky on the range of values for spatial filters. OK, 
fair enough, easy to fix by clamping values on the driver side.

But!!! I also discovered what is to me a MySQL non-sense. It seems 
spatial predicates are totally broken when using geographic SRS.

select MBRIntersects(ST_GeomFromText('POLYGON((-90 -90, 90 -90, 90 90, 
-90 90, -90 -90))', 4326), ST_GeomFromText('POINT(0 0)', 4326));

returns true as expected

But enlarging that extent to almost the whole world with

select MBRIntersects(ST_GeomFromText('POLYGON((-179 -89, 179 -89, 179 
89, -179 89, -179 -89))', 4326, 'axis-order=long-lat'), 
ST_GeomFromText('POINT(0 0)', 4326));

or (to test if winding order has some importance)

select MBRIntersects(ST_GeomFromText('POLYGON((-179 -89, -179 89, 179 
89, 179 -89, -179 -89))', 4326, 'axis-order=long-lat'), 
ST_GeomFromText('POINT(0 0)', 4326));

returns false !!!! (I've also verified with mysql:8.3.0 image)

And

select MBRIntersects(ST_GeomFromText('POLYGON((-179 -89, 179 -89, 179 
89, -179 89, -179 -89))', 32631), ST_GeomFromText('POINT(0 0)', 32631));

returns true as expected

Consequence, it seems safer to disable spatial filtering on layers with 
geographic coordinates with MySQL...

That's just what I've done in https://github.com/OSGeo/gdal/pull/9152 . 
Hopefully that will fix those issues with geometries not appearing. 
Obviously performance will not be optimal as spatial filtering will be 
done on OGR client side...

Even

Le 28/01/2024 ? 14:52, Richard Duivenvoorde a ?crit?:
>
> On 1/23/24 23:21, Even Rouault wrote:
>> So all in all, no issues on my side...
>
> You were off course right :-)
>
> I found out how to fix the missing crs in mysql and wrote some info 
> (for future reference) in a comment:
>
> https://github.com/qgis/QGIS/issues/55463#issuecomment-1913602140
>
> One thing I'm curious for, is why QGIS even after setting the right 
> crs, is not able to show the geom (but IS able to show the 
> attributes). Apparently the features are retrieved. If you receive 
> features from a shp file without crs, after setting it on the layer, 
> all is fine. So myql is different?
>
> Did a short try to debug this, but this is above my c++ skills :-)
>
> Anyway thanks! And I hope the comment is helpful to mysql peeps
>
> Regards,
>
> Richard Duivenvoorde
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From rdmailings at duif.net  Sun Jan 28 10:41:31 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 28 Jan 2024 19:41:31 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <8dce99f0-9bda-450d-9ac5-861a255df1fa@spatialys.com>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
 <ff3d0e00-d2c1-4ae3-9427-da3961d04e13@duif.net>
 <17748957-c3cb-4a0c-b4fe-742297e9e044@spatialys.com>
 <1bcc0a38-1805-4717-ab02-ee21351bc994@duif.net>
 <8dce99f0-9bda-450d-9ac5-861a255df1fa@spatialys.com>
Message-ID: <310024a5-fddc-4b60-87bb-2dcb223babc9@duif.net>

On 1/28/24 19:04, Even Rouault wrote:

> what I don't understand is how you manage to create with ogr2ogr a table without explicit SRS with features whose coordinates are not compatible of geographic coordinates. As mentioned previously, I do get a hard error from ogr2ogr when trying that. Which GDAL version do you use?

I'm doing this on a Debian 12/Bookworm machine.

$ ogr2ogr --version
GDAL 3.6.2, released 2023/01/02

But the people who contacted me (today I found out, of https://github.com/qgis/QGIS/issues/55463) actually create this table theirselves, I think, without explicitly setting a crs on a column when creating a table. Which if I understand from https://ant.burnett.com.au/adding-spatial-column-to-existing-mysql-table/ is the issue.

> The reason for which QGIS doesn't display features is likely it calls OGR with SetSpatialFilter() , which the mySQL driver turns into a? WHERE MBRIntersects(ST_GeomFromText('POLYGON((.....))', 'axis-order=long-lat'), `geom_colum_name`) filter. The 'axis-order=long-lat' qualifier is because OGR (perhaps mistakenly?) identifies the layer as with a geographic SRS, and if the extents of the layer aren't compatible of geographic coordinates, that probably causes the filter to fail.

But, my point: why can QGIS apparently show attributes, while not showing a geom.. Apparently the features were fully retrieved.

I could even copy the features from the attribute-table (when not seeing them on the MapCanvas), and copy them in another table (with made the geoms visisble).

My hope is people, still using mysql, will learn from the comments to create proper tables/columns.

Thanks for the fix!

Regards,

Richard Duivenvoorde


From even.rouault at spatialys.com  Sun Jan 28 10:44:52 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Jan 2024 19:44:52 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <310024a5-fddc-4b60-87bb-2dcb223babc9@duif.net>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
 <ff3d0e00-d2c1-4ae3-9427-da3961d04e13@duif.net>
 <17748957-c3cb-4a0c-b4fe-742297e9e044@spatialys.com>
 <1bcc0a38-1805-4717-ab02-ee21351bc994@duif.net>
 <8dce99f0-9bda-450d-9ac5-861a255df1fa@spatialys.com>
 <310024a5-fddc-4b60-87bb-2dcb223babc9@duif.net>
Message-ID: <40fa6a85-6d19-43cd-b80d-dc92d8fb598a@spatialys.com>


> But, my point: why can QGIS apparently show attributes, while not 
> showing a geom.. Apparently the features were fully retrieved.

When displaying the attribute table, QGIS doesn't apply a spatial 
filter. Whereas when displaying features on the canvas, it does. And as 
I found out, something's weird (broken?) on MySQL side regarding spatial 
filtering on layers without CRS (or with the implied undefined 
geographic SRS)


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Sun Jan 28 13:14:23 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Jan 2024 22:14:23 +0100
Subject: [QGIS-Developer] Strange Mysql (spatial) behaviour: no points
 visible
In-Reply-To: <8dce99f0-9bda-450d-9ac5-861a255df1fa@spatialys.com>
References: <2afbd3c3-b2b7-460e-8075-7c7c203b4a23@duif.net>
 <54e9dd47-a23d-49a0-9614-be61442e5ec6@duif.net>
 <58707c74-39f4-4602-8962-38990464c5c1@spatialys.com>
 <ff3d0e00-d2c1-4ae3-9427-da3961d04e13@duif.net>
 <17748957-c3cb-4a0c-b4fe-742297e9e044@spatialys.com>
 <1bcc0a38-1805-4717-ab02-ee21351bc994@duif.net>
 <8dce99f0-9bda-450d-9ac5-861a255df1fa@spatialys.com>
Message-ID: <d5e93324-8659-4770-883b-f6a33563160f@spatialys.com>

Update: actually, instead of completely disabling server side spatial 
filtering with geographic SRS, I just found a hack... One can use 
ST_SRID() to hack a "random" projected CRS, and then things work

So now the OGR mySQL driver will do things like:

select MBRIntersects(ST_GeomFromText('POLYGON((-179 -89, 179 -89, 179 
89, -179 89, -179 -89))', 32631), ST_SRID(geometry_column, 32631));

Not pretty but probably a bit better than just client side filtering.

On reflection, I suspect that in MySQL the geometry in geographic SRS 
are actually what is called a geography in PostGIS, that is a shape on 
the ellipsoid/sphere, where the smallest polygon is selected. And thus 
the following request actually returns true:

select?MBRIntersects(ST_GeomFromText('POLYGON((-179 -89, 179 -89, 179 
89, -179 89, -179 -89))', 4326, 'axis-order=long-lat'), 
ST_GeomFromText('POINT(-179.5 0)', 4326, 'axis-order=long-lat'));


Le 28/01/2024 ? 19:04, Even Rouault via QGIS-Developer a ?crit?:
> Richard,
>
> what I don't understand is how you manage to create with ogr2ogr a 
> table without explicit SRS with features whose coordinates are not 
> compatible of geographic coordinates. As mentioned previously, I do 
> get a hard error from ogr2ogr when trying that. Which GDAL version do 
> you use?
>
> The reason for which QGIS doesn't display features is likely it calls 
> OGR with SetSpatialFilter() , which the mySQL driver turns into a? 
> WHERE MBRIntersects(ST_GeomFromText('POLYGON((.....))', 
> 'axis-order=long-lat'), `geom_colum_name`) filter. The 
> 'axis-order=long-lat' qualifier is because OGR (perhaps mistakenly?) 
> identifies the layer as with a geographic SRS, and if the extents of 
> the layer aren't compatible of geographic coordinates, that probably 
> causes the filter to fail.
>
> Actually trying the following on a layer without explicit CRS, which 
> then causes a undefined geographic CRS to be assigned to the layer
>
> $ ogrinfo 
> "mysql:test,user=root,password=passwd,port=33060,host=127.0.0.1" test 
> -spat -180 -90 180 90
>
> I do get:
>
> ERROR 1: MySQL error message:Longitude -180.000000 is out of range in 
> function st_geomfromtext. It must be within (-180.000000, 180.000000]. 
> Description: SELECT `OGR_FID`, `SHAPE` `SHAPE`, `id` FROM `test` WHERE 
> MBRIntersects(ST_GeomFromText('POLYGON((-180 -90, 180 -90, 180 90, 
> -180 90, -180 -90))', 32767, 'axis-order=long-lat'), `SHAPE`)
>
> So MySQL is super picky on the range of values for spatial filters. 
> OK, fair enough, easy to fix by clamping values on the driver side.
>
> But!!! I also discovered what is to me a MySQL non-sense. It seems 
> spatial predicates are totally broken when using geographic SRS.
>
> select MBRIntersects(ST_GeomFromText('POLYGON((-90 -90, 90 -90, 90 90, 
> -90 90, -90 -90))', 4326), ST_GeomFromText('POINT(0 0)', 4326));
>
> returns true as expected
>
> But enlarging that extent to almost the whole world with
>
> select MBRIntersects(ST_GeomFromText('POLYGON((-179 -89, 179 -89, 179 
> 89, -179 89, -179 -89))', 4326, 'axis-order=long-lat'), 
> ST_GeomFromText('POINT(0 0)', 4326));
>
> or (to test if winding order has some importance)
>
> select MBRIntersects(ST_GeomFromText('POLYGON((-179 -89, -179 89, 179 
> 89, 179 -89, -179 -89))', 4326, 'axis-order=long-lat'), 
> ST_GeomFromText('POINT(0 0)', 4326));
>
> returns false !!!! (I've also verified with mysql:8.3.0 image)
>
> And
>
> select MBRIntersects(ST_GeomFromText('POLYGON((-179 -89, 179 -89, 179 
> 89, -179 89, -179 -89))', 32631), ST_GeomFromText('POINT(0 0)', 32631));
>
> returns true as expected
>
> Consequence, it seems safer to disable spatial filtering on layers 
> with geographic coordinates with MySQL...
>
> That's just what I've done in https://github.com/OSGeo/gdal/pull/9152 
> . Hopefully that will fix those issues with geometries not appearing. 
> Obviously performance will not be optimal as spatial filtering will be 
> done on OGR client side...
>
> Even
>
> Le 28/01/2024 ? 14:52, Richard Duivenvoorde a ?crit?:
>>
>> On 1/23/24 23:21, Even Rouault wrote:
>>> So all in all, no issues on my side...
>>
>> You were off course right :-)
>>
>> I found out how to fix the missing crs in mysql and wrote some info 
>> (for future reference) in a comment:
>>
>> https://github.com/qgis/QGIS/issues/55463#issuecomment-1913602140
>>
>> One thing I'm curious for, is why QGIS even after setting the right 
>> crs, is not able to show the geom (but IS able to show the 
>> attributes). Apparently the features are retrieved. If you receive 
>> features from a shp file without crs, after setting it on the layer, 
>> all is fine. So myql is different?
>>
>> Did a short try to debug this, but this is above my c++ skills :-)
>>
>> Anyway thanks! And I hope the comment is helpful to mysql peeps
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From r.nijssen at terglobo.nl  Sun Jan 28 23:45:22 2024
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Mon, 29 Jan 2024 08:45:22 +0100
Subject: [QGIS-Developer] Code repository link not updated in Plugin
 manager and plugin website
In-Reply-To: <e1a32918-998a-48e6-a045-a04d3fc6b932@terglobo.nl>
References: <e1a32918-998a-48e6-a045-a04d3fc6b932@terglobo.nl>
Message-ID: <7f0e9521-ce46-4dca-92d6-7107046b4487@terglobo.nl>

Diving in the code I found a few suspicious lines.

1. In the Django code, there's no mention of "repository" in this list:

https://github.com/qgis/QGIS-Django/blob/6d03c8428abe9df7634bbf810bbcb63709b11d45/qgis-app/plugins/views.py#L908

2. In the QGIS code, the PluginManager seems to look for 
"code_repository" and not "repository".

https://github.com/qgis/QGIS/blob/4293d4f1c57614e0a4d3835b7d9f18b3a78bcbd1/src/app/pluginmanager/qgspluginmanager.cpp#L991

Hope this helps fixing it. I currently don't have time to setup the 
Django environment and and try fixing it myself.

Raymond


On 26-01-2024 10:03, Raymond Nijssen via QGIS-Developer wrote:
> Dear developers,
> 
> I found some unexpected behaviour in the plugin management.
> 
> I changed the the plugin source code to another github repository and 
> wanted to update the links in the plugin metadata.
> 
> 1. When updating the metadata localy, and running the plugin from local 
> code, the metadata changelog is updated (so I know QGIS has read the 
> metadata.txt) but the links to the code, homepage and tracker are still 
> pointing to the old repository.
> 
> 2. After uploading the new version of the plugin to the QGIS plugin 
> repository, the links to homepage and tracker are updated but the link 
> to the code keeps pointing to the old location. (See screenshot)
> 
> Is this a bug? If so, where should I file it?
> 
> Kind regards and happy QGIS Open Day! :)
> 
> Raymond
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From matthias at opengis.ch  Sun Jan 28 23:53:51 2024
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 29 Jan 2024 08:53:51 +0100
Subject: [QGIS-Developer] Code repository link not updated in Plugin
 manager and plugin website
In-Reply-To: <7f0e9521-ce46-4dca-92d6-7107046b4487@terglobo.nl>
References: <e1a32918-998a-48e6-a045-a04d3fc6b932@terglobo.nl>
 <7f0e9521-ce46-4dca-92d6-7107046b4487@terglobo.nl>
Message-ID: <CAC7zN96vZ4vNwVOXzu1D8j-9aefXC2O638P7U4ui=WREJPPwoQ@mail.gmail.com>

Hi Raymond

Lova is doing some excellent work on the plugin repository recently.
Maybe he will find the time to look into this?
In any case, I think it would be worth opening an issue with your research
on https://github.com/qgis/QGIS-Django/issues to not forget about it and
have a contextualized discussion.

Kind regards
Matthias

On Mon, Jan 29, 2024 at 8:45?AM Raymond Nijssen via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Diving in the code I found a few suspicious lines.
>
> 1. In the Django code, there's no mention of "repository" in this list:
>
>
> https://github.com/qgis/QGIS-Django/blob/6d03c8428abe9df7634bbf810bbcb63709b11d45/qgis-app/plugins/views.py#L908
>
> 2. In the QGIS code, the PluginManager seems to look for
> "code_repository" and not "repository".
>
>
> https://github.com/qgis/QGIS/blob/4293d4f1c57614e0a4d3835b7d9f18b3a78bcbd1/src/app/pluginmanager/qgspluginmanager.cpp#L991
>
> Hope this helps fixing it. I currently don't have time to setup the
> Django environment and and try fixing it myself.
>
> Raymond
>
>
> On 26-01-2024 10:03, Raymond Nijssen via QGIS-Developer wrote:
> > Dear developers,
> >
> > I found some unexpected behaviour in the plugin management.
> >
> > I changed the the plugin source code to another github repository and
> > wanted to update the links in the plugin metadata.
> >
> > 1. When updating the metadata localy, and running the plugin from local
> > code, the metadata changelog is updated (so I know QGIS has read the
> > metadata.txt) but the links to the code, homepage and tracker are still
> > pointing to the old repository.
> >
> > 2. After uploading the new version of the plugin to the QGIS plugin
> > repository, the links to homepage and tracker are updated but the link
> > to the code keeps pointing to the old location. (See screenshot)
> >
> > Is this a bug? If so, where should I file it?
> >
> > Kind regards and happy QGIS Open Day! :)
> >
> > Raymond
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240129/c6d4d904/attachment.htm>

From r.nijssen at terglobo.nl  Mon Jan 29 00:16:53 2024
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Mon, 29 Jan 2024 09:16:53 +0100
Subject: [QGIS-Developer] Code repository link not updated in Plugin
 manager and plugin website
In-Reply-To: <CAC7zN96vZ4vNwVOXzu1D8j-9aefXC2O638P7U4ui=WREJPPwoQ@mail.gmail.com>
References: <e1a32918-998a-48e6-a045-a04d3fc6b932@terglobo.nl>
 <7f0e9521-ce46-4dca-92d6-7107046b4487@terglobo.nl>
 <CAC7zN96vZ4vNwVOXzu1D8j-9aefXC2O638P7U4ui=WREJPPwoQ@mail.gmail.com>
Message-ID: <80ed4ea0-9cc8-418a-960d-fa5f0640b356@terglobo.nl>

Thanks for replying Matthias. Done:

https://github.com/qgis/QGIS-Django/issues/350

Lova, let me know if I can help you with testing or something else.

This is the plugin that should get updated:
https://plugins.qgis.org/plugins/wfs_styler/#plugin-versions

Raymond


On 29-01-2024 08:53, Matthias Kuhn wrote:
> Hi Raymond
> 
> Lova is doing some excellent work on the plugin repository recently.
> Maybe he will find the time to look into this?
> In any case, I think it would be worth opening an issue with your 
> research on https://github.com/qgis/QGIS-Django/issues 
> <https://github.com/qgis/QGIS-Django/issues> to not forget about it and 
> have a contextualized discussion.
> 
> Kind regards
> Matthias
> 
> On Mon, Jan 29, 2024 at 8:45?AM Raymond Nijssen via QGIS-Developer 
> <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>> 
> wrote:
> 
>     Diving in the code I found a few suspicious lines.
> 
>     1. In the Django code, there's no mention of "repository" in this list:
> 
>     https://github.com/qgis/QGIS-Django/blob/6d03c8428abe9df7634bbf810bbcb63709b11d45/qgis-app/plugins/views.py#L908 <https://github.com/qgis/QGIS-Django/blob/6d03c8428abe9df7634bbf810bbcb63709b11d45/qgis-app/plugins/views.py#L908>
> 
>     2. In the QGIS code, the PluginManager seems to look for
>     "code_repository" and not "repository".
> 
>     https://github.com/qgis/QGIS/blob/4293d4f1c57614e0a4d3835b7d9f18b3a78bcbd1/src/app/pluginmanager/qgspluginmanager.cpp#L991 <https://github.com/qgis/QGIS/blob/4293d4f1c57614e0a4d3835b7d9f18b3a78bcbd1/src/app/pluginmanager/qgspluginmanager.cpp#L991>
> 
>     Hope this helps fixing it. I currently don't have time to setup the
>     Django environment and and try fixing it myself.
> 
>     Raymond
> 
> 
>     On 26-01-2024 10:03, Raymond Nijssen via QGIS-Developer wrote:
>      > Dear developers,
>      >
>      > I found some unexpected behaviour in the plugin management.
>      >
>      > I changed the the plugin source code to another github repository
>     and
>      > wanted to update the links in the plugin metadata.
>      >
>      > 1. When updating the metadata localy, and running the plugin from
>     local
>      > code, the metadata changelog is updated (so I know QGIS has read the
>      > metadata.txt) but the links to the code, homepage and tracker are
>     still
>      > pointing to the old repository.
>      >
>      > 2. After uploading the new version of the plugin to the QGIS plugin
>      > repository, the links to homepage and tracker are updated but the
>     link
>      > to the code keeps pointing to the old location. (See screenshot)
>      >
>      > Is this a bug? If so, where should I file it?
>      >
>      > Kind regards and happy QGIS Open Day! :)
>      >
>      > Raymond
>      >
>      > _______________________________________________
>      > QGIS-Developer mailing list
>      > QGIS-Developer at lists.osgeo.org
>     <mailto:QGIS-Developer at lists.osgeo.org>
>      > List info:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>      > Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 

From lova at kartoza.com  Mon Jan 29 00:24:54 2024
From: lova at kartoza.com (Lova Andriarimalala)
Date: Mon, 29 Jan 2024 08:24:54 +0000
Subject: [QGIS-Developer] Code repository link not updated in Plugin
 manager and plugin website
In-Reply-To: <80ed4ea0-9cc8-418a-960d-fa5f0640b356@terglobo.nl>
References: <e1a32918-998a-48e6-a045-a04d3fc6b932@terglobo.nl>
 <7f0e9521-ce46-4dca-92d6-7107046b4487@terglobo.nl>
 <CAC7zN96vZ4vNwVOXzu1D8j-9aefXC2O638P7U4ui=WREJPPwoQ@mail.gmail.com>
 <80ed4ea0-9cc8-418a-960d-fa5f0640b356@terglobo.nl>
Message-ID: <PR3P190MB087465510E93102610E61A8CFB7E2@PR3P190MB0874.EURP190.PROD.OUTLOOK.COM>

Dear Raymond and Matthias,

Thank you, Raymond, for the help in fixing the issue.
Thank you also Matthias for the compliment.

I will add the issue to my work planning, take a look at it and let you know.
For now, if it helps, the plugin repo URL can be updated manually from the Edit page in the plugin Manage tab.

Best regards,
Lova

?
[Image]

Lova Andriarimalala
QGIS Full Stack Developer
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
* Desktop GIS programming services
* Geospatial web development
* GIS Training
* Consulting Services
Office: +261(0)34 09 524 73<tel:+261340952473>




From: Raymond Nijssen <r.nijssen at terglobo.nl>
Date: Monday, 29 January 2024 at 11:16?AM
To: Matthias Kuhn <matthias at opengis.ch>
Cc: qgis-developer at lists.osgeo.org <qgis-developer at lists.osgeo.org>, Lova Andriarimalala <lova at kartoza.com>
Subject: Re: [QGIS-Developer] Code repository link not updated in Plugin manager and plugin website
Thanks for replying Matthias. Done:

https://github.com/qgis/QGIS-Django/issues/350

Lova, let me know if I can help you with testing or something else.

This is the plugin that should get updated:
https://plugins.qgis.org/plugins/wfs_styler/#plugin-versions

Raymond


On 29-01-2024 08:53, Matthias Kuhn wrote:
> Hi Raymond
>
> Lova is doing some excellent work on the plugin repository recently.
> Maybe he will find the time to look into this?
> In any case, I think it would be worth opening an issue with your
> research on https://github.com/qgis/QGIS-Django/issues
> <https://github.com/qgis/QGIS-Django/issues> to not forget about it and
> have a contextualized discussion.
>
> Kind regards
> Matthias
>
> On Mon, Jan 29, 2024 at 8:45?AM Raymond Nijssen via QGIS-Developer
> <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>>
> wrote:
>
>     Diving in the code I found a few suspicious lines.
>
>     1. In the Django code, there's no mention of "repository" in this list:
>
>     https://github.com/qgis/QGIS-Django/blob/6d03c8428abe9df7634bbf810bbcb63709b11d45/qgis-app/plugins/views.py#L908 <https://github.com/qgis/QGIS-Django/blob/6d03c8428abe9df7634bbf810bbcb63709b11d45/qgis-app/plugins/views.py#L908>
>
>     2. In the QGIS code, the PluginManager seems to look for
>     "code_repository" and not "repository".
>
>     https://github.com/qgis/QGIS/blob/4293d4f1c57614e0a4d3835b7d9f18b3a78bcbd1/src/app/pluginmanager/qgspluginmanager.cpp#L991 <https://github.com/qgis/QGIS/blob/4293d4f1c57614e0a4d3835b7d9f18b3a78bcbd1/src/app/pluginmanager/qgspluginmanager.cpp#L991>
>
>     Hope this helps fixing it. I currently don't have time to setup the
>     Django environment and and try fixing it myself.
>
>     Raymond
>
>
>     On 26-01-2024 10:03, Raymond Nijssen via QGIS-Developer wrote:
>      > Dear developers,
>      >
>      > I found some unexpected behaviour in the plugin management.
>      >
>      > I changed the the plugin source code to another github repository
>     and
>      > wanted to update the links in the plugin metadata.
>      >
>      > 1. When updating the metadata localy, and running the plugin from
>     local
>      > code, the metadata changelog is updated (so I know QGIS has read the
>      > metadata.txt) but the links to the code, homepage and tracker are
>     still
>      > pointing to the old repository.
>      >
>      > 2. After uploading the new version of the plugin to the QGIS plugin
>      > repository, the links to homepage and tracker are updated but the
>     link
>      > to the code keeps pointing to the old location. (See screenshot)
>      >
>      > Is this a bug? If so, where should I file it?
>      >
>      > Kind regards and happy QGIS Open Day! :)
>      >
>      > Raymond
>      >
>      > _______________________________________________
>      > QGIS-Developer mailing list
>      > QGIS-Developer at lists.osgeo.org
>     <mailto:QGIS-Developer at lists.osgeo.org>
>      > List info:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>      > Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240129/b7d3e302/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 6123 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240129/b7d3e302/attachment-0001.jpg>

From julien.cabieces at oslandia.com  Mon Jan 29 01:31:58 2024
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Mon, 29 Jan 2024 10:31:58 +0100
Subject: [QGIS-Developer] Qt6 builds and plugins -- ready for testing!
In-Reply-To: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
References: <CAB28AsgdD3q1-fKW0-V9sdjEXet2Kh4eGnbKBD3PSm-eKMDmsg@mail.gmail.com>
Message-ID: <8734ug8okd.fsf@julienlaptop.home>


Hi,

Thank you Nyall for continuing this work and all the recent pull
requests that have fixed so many things.

Be aware that my initial work was funded by Oslandia, my employer. And
then, QGIS.org funded me to do the needed work to push cleanly on QGIS repository.

Many thanks to both of them and all people involved in this work.

Regards,
Julien


> Hi list,
>
> With some excellent work recently completed by Julien, we're now at a stage where there's no *major* roadblocks preventing plugins from
> functioning under the Qt6 builds!
>
> In fact, the first plugin has already been ported to be compatible with these (First Aid Plugin) -- see
> https://github.com/wonder-sk/qgis-first-aid-plugin/commits/master/ . 
>
> I think we're now at a stage where wider testing of the Qt6 builds and feedback via bug reports are valuable. A couple of notes:
>
> - We're up to roughly 2/3rd of the existing Python tests passing on Qt 6 builds. That's obviously not everything, so we aren't finished with this
> work yet ?
>
> - There's a script available in the repo for automatically upgrading QGIS plugins/scripts to Qt 6 compatibility WITHOUT BREAKING compatibility
> with older releases/qt5 based releases. It's here: https://github.com/qgis/QGIS/blob/master/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py
>
> - After running the script, you'll also need to add "supportsQt6=yes" to your plugins metadata configuration. Otherwise the Qt6 builds will just
> ignore your plugin and will refuse to load it. See eg
> https://github.com/wonder-sk/qgis-first-aid-plugin/commit/3687be7d9e026c59c9b775caaf5ee18cf8639886
>
> - You'll need to compile your own Qt 6 build. There's no nightlies or any prepackaged versions available.
>
> - There are still some known issues with enum handling, but please open bug reports when you encounter these!
>
> - The plugin manager is currently broken in the Qt6 builds. Use a Qt5 build to enable plugins 
> ?
>
> Again, to reiterate, there's NO plans for moving to QGIS 4.0 on the horizon. The plan is to allow plugins to add Qt6 support without breaking
> any compatibility with Qt5/older releases, so that the effort required by plugin authors is extremely minimal. And with any luck, the
> pyqt5_to_pyqt6.py script will do 99% of the work for you. Qt 6 builds of QGIS 3.x will become available at some stage in a "preview release"
> capacity, and likely some platforms will move to Qt6 only releases when necessary for that platform (eg MacOS, wayland only linux systems).
> Read more about the plan at https://github.com/qgis/QGIS-Enhancement-Proposals/issues/198
>
> This work has ONLY been possible thanks to funding from qgis.org, ie it's possible only because of the users and organisations sponsoring
> QGIS!  
>
> Nyall 
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 

Julien Cabieces
Senior Developer at Oslandia
julien.cabieces at oslandia.com

From emma at north-road.com  Mon Jan 29 16:16:48 2024
From: emma at north-road.com (Emma Hain)
Date: Tue, 30 Jan 2024 10:16:48 +1000
Subject: [QGIS-Developer] Adding a "solution proposed" label?
In-Reply-To: <CAKKm1vEQ6kYsqMMw51U36Htc5GdwYbu+MJ9ZDww6Uf-pgYX6iA@mail.gmail.com>
References: <CAB28AsiFjznNjJTfjRzSaoSsy1Dpo0PWmg-9f09504bwb1svyQ@mail.gmail.com>
 <rmi34uwawqa.fsf@s1.lexort.com> <ZamRpnUU9p--r9-d@c23>
 <CAKKm1vEQ6kYsqMMw51U36Htc5GdwYbu+MJ9ZDww6Uf-pgYX6iA@mail.gmail.com>
Message-ID: <CACGKw0Yz=sZ696OhwaCHeb45fxLSZVBrJtER+qG8v60ez=5giA@mail.gmail.com>

HI All
I think we need to be kind here so I support a new label 'solution
proposed' with the added automations in closing it. Whilst I agree with
some sentiments in that users need to understand how a lot of info can get
unmanageable and taxing on resources, we need to educate users on how this
stuff works and how we need them to keep on bringing their input to the
project.

So I think on the side of the developer (I am assuming here - please
correct if wrong), when researching the issue, you have found a solution
already and thus it's not too taxing to paste a link to the solution and
label it 'solution proposed' - therefore no more work done.

On the side of the user reporting the issue (which I identify with more),
you are providing an education on how to contribute to the project through
this feedback. Once it is closed, an automatic message could include some
of the following guidelines:

> ...tell that they are not a defect in
>   the source code.  If you are wrong  and the person follows up with
>   evidence, hit reopen - no big deal.
>
>   For feature requests that are fuzzy, ask that they get shaken out on
>   some other forum and then refiled, when they can say with some
>   precision what the new feature should do.



Cheers
Em

On Fri, 19 Jan 2024 at 18:43, Thomas Larsen Wessel via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Nyall wrote: " It seems wrong to just close that issue without giving the
> reporter time to reply  "
>
> If a user spends a long time (for me it sometimes takes as much as a few
> hours, believe it or not) to write an issue, believing it actually is a bug
> or at least an issue with the docs that ought to be corrected, it will like
> seem unappreciated if the issue is closed in the very first
> response, specially if that response is very brief and does not contain any
> appreciation. Even if that is not how it is intended.
>
> When I report issues it's not always because its a real problem for me; it
> is often simply because I believe it's in the interest of the project, and
> it's my tiny contribution to that project.
>
> Tickets that are obviously just questions, should IMO be closed
> immediately, with advice on where to ask such questions. But when people
> report what to them seems like a bug, I would encourage a friendly response
> that signals that even if their effort was in vain because it was not a
> bug, it actually is appreciated. Especially if it's a well written issue.
> I'm afraid that "closed" signals very little appreciation; a lot less
> appreciation than "not a bug" and then closing a few days later. Having an
> issue closed like that seems/feels almost like having a forum thread
> deleted, does it not?
>
> Apropos of appreciation, I really appreciate the work that all of you are
> doing for QGIS and other FOSS. Have a nice weekend :)
>
> Sincerely, Thomas
>
>
> On Thu, Jan 18, 2024 at 10:01?PM Sandro Santilli via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> On Wed, Jan 17, 2024 at 08:57:33AM -0500, Greg Troxel via QGIS-Developer
>> wrote:
>>
>> > So I would say:
>> >
>> >   Establish a policy that questions are not allowed in the issue
>> >   tracker.  Follow it strictly.
>>
>> +1 and there's now an experimental Discourse service of OSGeo that
>> could be used for questions: https://discourse.osgeo.org
>> (an appropriate category could be added, on request)
>>
>> --strk;
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Emma Hain ? Product Manager/Senior GIS Analyst
emma at north-road.com
[image: https://north-road.com]
*North Road*
Cartography ? Development ? Spatial Analysis
------------------------------
*north-road.com* <http://north-road.com>
<https://twitter.com/northroadgeo>
<https://www.linkedin.com/company/north-road-studios>
<https://www.facebook.com/North-Road-997236690392419/home>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240130/e5fa3066/attachment.htm>

From lauri.kajan at gmail.com  Tue Jan 30 23:57:40 2024
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Wed, 31 Jan 2024 09:57:40 +0200
Subject: [QGIS-Developer] Python regression in the latest patch release
 3.34.3
Message-ID: <CAKWoFML5TS5i0z+4riEehK3_UdmhXZTriihX=OL3g9yAudr0tw@mail.gmail.com>

Hi all,

This might be more of an OSGeo4W issue, but I wanted to bring it to your
attention.

Unfortunately, something has changed in the latest patch release 3.34.3 on
Windows regarding Python.
The logic of how Python finds its DLLs has changed somehow. I know that
Python has upgraded to 3.9.18 to get necessary security updates.

We have relied on the process where we create a virtual environment for
plugin development. We have previously created it with command
`C:\Program Files\QGIS 3.34.3\apps\Python39\python.exe -m venv
--system-site-packages .venv`
We have then set the needed module lookup path with a `pth`-file and dll
paths with the `sitecustomize.py` in the virtual environment.

This has worked great previously but now fails.
The first error I got is that `zlib.dll` was not found. This can be ?fixed?
by copying it to `C:\Program Files\QGIS 3.34.3\apps\Python39` (which I
would prefer not to do since our training clients don?t necessarily have
permissions for that on their computers).
The second problem comes when `pip` is tried to be installed to the venv by
`ensurepip`. This step fails because python.exe won?t find its
`python39.dll`.
The venv can be created with `--without-pip` flag but after activating the
vevn and calling python.exe, it also fails to start and gives an error
`python39.dll` is not found. How come python.exe can't find the DLL file
from `apps\Python39` which is correctly set as `home` in the `pyvenv.cfg`?
If the `C:\Program Files\QGIS 3.34.3\apps\Python39` folder is added to
`PATH`, then python39.dll can be found. This is also a step I would prefer
not to be necessary.


Is this something that was expected in the Python upgrade?
Has this changed in Python itself or has something changed in OSGeo4W
packaging?
Is it expected that the previous mode of operation will be restored?

Does anyone have any ideas on how to overcome this?


Regards,

Lauri
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240131/0265a03b/attachment.htm>

From johannes.kroeger at wheregroup.com  Wed Jan 31 00:38:36 2024
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=C3=B6ger_=28WhereGroup=29?=)
Date: Wed, 31 Jan 2024 09:38:36 +0100
Subject: [QGIS-Developer] Python regression in the latest patch release
 3.34.3
In-Reply-To: <CAKWoFML5TS5i0z+4riEehK3_UdmhXZTriihX=OL3g9yAudr0tw@mail.gmail.com>
References: <CAKWoFML5TS5i0z+4riEehK3_UdmhXZTriihX=OL3g9yAudr0tw@mail.gmail.com>
Message-ID: <80f673e6-40c8-4ede-a819-4b7e9ce037bc@wheregroup.com>

Hi Lauri,

have you considered using the python-qgis.bat/python-qgis-ltr.bat 
instead? That should set all PATHs etc correctly.

Cheers, Hannes

On 31.01.24 08:57, Lauri Kajan via QGIS-Developer wrote:
> Hi all,
>
> This might be more of an OSGeo4W issue, but I wanted to bring it to 
> your attention.
>
> Unfortunately, something has changed in the latest patch release 
> 3.34.3 on Windows regarding Python.
> The logic of how Python finds its DLLs has changed somehow. I know 
> that Python has upgraded to 3.9.18 to get necessary security updates.
>
> We have relied on the process where we create a virtual environment 
> for plugin development. We have previously created it with command
> `C:\Program Files\QGIS 3.34.3\apps\Python39\python.exe -m venv 
> --system-site-packages .venv`
> We have then set the needed module lookup path with a `pth`-file and 
> dll paths with the `sitecustomize.py` in the virtual environment.
>
> This has worked great previously but now fails.
> The first error I got is that `zlib.dll` was not found. This can be 
> ?fixed? by copying it to `C:\Program Files\QGIS 3.34.3\apps\Python39` 
> (which I would prefer not to do since our training clients don?t 
> necessarily have permissions for that on their computers).
> The second problem comes when `pip` is tried to be installed to the 
> venv by `ensurepip`. This step fails because python.exe won?t find its 
> `python39.dll`.
> The venv can be created with `--without-pip` flag but after activating 
> the vevn and calling python.exe, it also fails to start and gives an 
> error `python39.dll` is not found. How come python.exe can't find the 
> DLL file from `apps\Python39` which is correctly set as `home` in the 
> `pyvenv.cfg`?
> If the `C:\Program Files\QGIS 3.34.3\apps\Python39` folder is added to 
> `PATH`, then python39.dll can be found. This is also a step I would 
> prefer not to be necessary.
>
>
> Is this something that was expected in the Python upgrade?
> Has this changed in Python itself or has something changed in OSGeo4W 
> packaging?
> Is it expected that the previous mode of operation will be restored?
>
> Does anyone have any ideas on how to overcome this?
>
>
> Regards,
>
> Lauri
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei der www.foss-academy.com
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------


From lauri.kajan at gmail.com  Wed Jan 31 00:51:44 2024
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Wed, 31 Jan 2024 10:51:44 +0200
Subject: [QGIS-Developer] Python regression in the latest patch release
 3.34.3
In-Reply-To: <80f673e6-40c8-4ede-a819-4b7e9ce037bc@wheregroup.com>
References: <CAKWoFML5TS5i0z+4riEehK3_UdmhXZTriihX=OL3g9yAudr0tw@mail.gmail.com>
 <80f673e6-40c8-4ede-a819-4b7e9ce037bc@wheregroup.com>
Message-ID: <CAKWoFM+2MW1zQjBEnchn=40JoEL7igdWBQSvkNcE_j7G7mVzGQ@mail.gmail.com>

Hi Johannes,

I have tried and that has not worked even before. The python-qgis.bat sets
PYTHONHOME to `apps/Python39` runs `bin/python.exe`. When the `ensurepip`
module is installing pip it installs it in isolated (`python.exe -I -m
ensurepip`) mode that clears all the python related environment variables.
So it is expected that bin/python.exe won't find standard libraries.


-Lauri
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240131/b8fb60fb/attachment.htm>

From rdmailings at duif.net  Wed Jan 31 06:11:16 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 31 Jan 2024 15:11:16 +0100
Subject: [QGIS-Developer] Qt6: qgsspatialindex.sip: line 148: column 5:
 'QgsSpatialIndex::intersects' has an unsupported return type
Message-ID: <e09877b5-69e8-440f-a3c9-1723bfd231b4@duif.net>

Hi,

My Qt6 (test) build stops with the following:

Generating the gui bindings...
sip-build: /home/richard/git/qgisqt6/build/python/core/auto_generated/qgsspatialindex.sip: line 148: column 5: 'QgsSpatialIndex::intersects' has an unsupported return type - provide %MethodCode and a C++ signature
/home/richard/git/qgisqt6/build/python/core/auto_generated/qgsspatialindex.sip: line 159: column 5: 'QgsSpatialIndex::nearestNeighbor' has an unsupported return type - provide %MethodCode and a C++ signature
/home/richard/git/qgisqt6/build/python/core/auto_generated/qgsspatialindex.sip: line 179: column 5: 'QgsSpatialIndex::nearestNeighbor' has an unsupported return type - provide %MethodCode and a C++ signature
/home/richard/git/qgisqt6/build/python/gui/auto_generated/attributetable/qgsattributetableview.sip: line 63: column 5: 'QgsAttributeTableView::selectedFeaturesIds' has an unsupported return type - provide %MethodCode and a C++ signature
ninja: build stopped: subcommand failed.

Is this my setup?
Do others succeed in creating the python bindings?

python3-sip/testing,now 4.19.25+dfsg-5+b2 amd64 [installed]
python3-pyqt6.sip/testing,now 13.6.0-1+b1 amd64 [installed,automatic]
python3-sipbuild/testing,now 6.8.1+dfsg-1 all [installed,automatic]

Regards,

Richard Duivenvoorde

From strk at kbt.io  Wed Jan 31 09:45:39 2024
From: strk at kbt.io (Sandro Santilli)
Date: Wed, 31 Jan 2024 18:45:39 +0100
Subject: [QGIS-Developer] QGIS-Website write permissions
In-Reply-To: <899412c9-514d-4dcc-97fc-9607cbc7b2e6@duif.net>
References: <ZbIpgNeMR4rJIzKs@c19>
 <899412c9-514d-4dcc-97fc-9607cbc7b2e6@duif.net>
Message-ID: <ZbqHQ7lO2WgQeVyT@c19>

On Thu, Jan 25, 2024 at 11:39:54AM +0100, Richard Duivenvoorde via QGIS-Developer wrote:

> Looking at the last 10 merged PR's I can see at least 5 people
> apparently able to merge:
> 
> Marco, Andreas, Juergen, Andrea, Harrisou and myself

I think the need to "guess" isn't the most transparent way of
dealing with permissions.

> PS2 isn't https://github.com/orgs/qgis/teams more helpfull for names?

As I mention, that page shows (to me) 3 teams:

  - Community
  - QGIS Developers
  - QGIS security

I'm part of the "QGIS Developers" (which is "secret", dunno why) and
cannot merge PRs against the website repo.

Maybe we could have additional teams to make things more clear, like:

  - QGIS PSC: write access to all repos, access to settings of all repos
  - QGIS Website Maintainers: write access to the website

I still think the best approach would be for the PSC to keep the
governance page up to date. At the moment that page references the
list of contributors given by GitHub as if it was the list of
maintainers of the projects, but that's clearly not the case:

  https://www.qgis.org/en/site/getinvolved/governance/governance.html#team

The list given by GitHub is the list of commit authors, but those authors
don't necessarely have the ability to accept PRs so cannot be referenced
to as "maintainers" for sure.

--strk;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 659 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240131/1664e4f5/attachment.sig>

From nyall.dawson at gmail.com  Wed Jan 31 17:28:02 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 1 Feb 2024 11:28:02 +1000
Subject: [QGIS-Developer] Theoretical discussion: A QGIS paid plugin
 marketplace? (was: sponsored plugin)
In-Reply-To: <18acf45c109a79d5cffcb6a506ce8fae@riseup.net>
References: <18acf45c109a79d5cffcb6a506ce8fae@riseup.net>
Message-ID: <CAB28AshdzhusmTLVr_jAguY+H4vwTvHVYRJSHwnzDWjZWBEneA@mail.gmail.com>

Hi lists!

I wanted to kick start a (hopefully!) civil, THEORETICAL discussion about
the role of a paid plugin marketplace for QGIS plugins.

This has been on my mind for a while, and recently was bumped by this email
to the list:

On Fri, 19 Jan 2024 at 19:38, gam17--- via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:
>
> Hi everyone,
>     like many of you, I have developed and maintained a plugin for many
> years completely free of charge.
> I have never received any donation or compensation of any kind and now I
> would like to find a solution.
> Has anyone already found a way to receive donations?
> I was thinking of asking for a sponsor that would be displayed during
> execution, for example in the window titles or through a specific menu
> item like QGIS does (in this way the sponsor would be much less
> visible).

So again, stressing that this is a THEORETICAL discussion, I'm interested
in hearing people's thoughts on the potential role of a paid plugin
marketplace for QGIS.

Here's a bullet point dump of where I'm currently sitting:

- Yes, I'm aware that plugins must be GPL, and that this makes paid plugins
a little trickier in that they're obviously still subject to the GPL.
- The GPL does NOT prevent charging for software, or mandate making it
public to non-paying customers. We could potentially have GPL plugins which
are only available to paid users, and only make these plugins available
privately to those users. YES, the GPL **DOES** mean that those paying
customers can redistribute the plugin publicly and freely without issue if
they want (and regardless of whether the original developer wants!)
- In fact, there's already likely thousands of private, paid for plugins
out there! I'm talking here of plugins made specifically for internal use
by one organisation only. Yep, that organisation COULD make the plugin
public/freely available, but in many cases they are specific to that one
organisation's needs or contain organisation sensitive logic/data. These
plugins are completely compliant with the GPL, despite being private and
paid for by that organisation.
- There's nothing preventing a public GPL QGIS plugin from depending on a
subscription based back-end, and offering zero value to anyone not paying
for that backend. And there's a growing number of these plugins, which
depend on users paying xxx large corporate entity regular high fees to
access the backend service. The GPL doesn't (and arguably
shouldn't) prevent these large entities from making money off QGIS plugins.
- But this means that the current situation is unfairly weighted toward
these large entities! A one-person team making an excellent plugin and
providing an awesome tool for use in QGIS has a MUCH MUCH harder time
finding ANY financial compensation for their efforts! I don't like this
situation at all, and I'd say it goes against the "spirit" of why QGIS was
made under the GPL in the first place. The big corporate entities win, the
smaller community focused developers lose out. ?
- Despite the fact that a paid user could freely re-distribute a paid-for
plugin, there's still potential financial gain for the developer in making
a plugin available for a charge on a theoretical QGIS plugin marketplace.
- The blender market is a great example of this. There's LOTS of GPL
blender add ons available there at charge. Eg
https://blendermarket.com/products/hard-ops--boxcutter-ultimate-bundle?num=2&src=top
as one example. If those numbers are accurate, that developer has sold >35k
copies of a GPL licensed add on at $39 each. I'm going to go out on a limb
here and guess that that developer's motivation to make their add-on
excellent is considerably higher than the developer of an equivalent QGIS
plugin ? (not to mention that their time investment is much more
justifiable). And any ONE of those 35k paid users could have made the
plugin freely available for everyone else... but that hasn't stopped the
sales.

So what does everyone else think? Would there be a THEORETICAL place for a
THEORETICAL paid QGIS plugin marketplace somewhere in the future? Or is
there a better model we could (theoretically ?) follow to financially
reward plugin developers?

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240201/6dc60bc1/attachment.htm>

From roger at spatialtapestry.com.au  Wed Jan 31 17:58:06 2024
From: roger at spatialtapestry.com.au (Roger Merritt)
Date: Thu, 1 Feb 2024 09:58:06 +0800
Subject: [QGIS-Developer] Theoretical discussion: A QGIS paid plugin
 marketplace? (was: sponsored plugin)
In-Reply-To: <CAB28AshdzhusmTLVr_jAguY+H4vwTvHVYRJSHwnzDWjZWBEneA@mail.gmail.com>
References: <18acf45c109a79d5cffcb6a506ce8fae@riseup.net>
 <CAB28AshdzhusmTLVr_jAguY+H4vwTvHVYRJSHwnzDWjZWBEneA@mail.gmail.com>
Message-ID: <CAMFBa1UFm1pykZj3jKOHm=pA5yEVWdXQA9r9RziWgQ9oSkd0Mg@mail.gmail.com>

Hi everyone,
I sit back and love things like QGIS, Postgres/PostGIS and VirtualBox. All
developed by major software shops where many people get an income in some
way.
I sit back and have released a Plugin to load Vector Themes to Databases,
and have asked for donations. I have been told that receiving $10 in any
one year will be a good year, lol.
I have been involved in Spatial Upgrades for 30 years now, and have a very
capable Windows Desktop Application, and I estimate it would take 3-5 years
effort to port it to a QGIS Plugin. Spatial Upgrades are like Rubber
Sheeting but with enhancements like Rigid Objects (eg buildings) and
Straight Lines (eg power lines).
My fundamental issue is why would I invest so much time porting my
expertise to QGIS when remuneration is a fantasy?
Essentially the QGIS community will miss out on what I could offer because
there is not a paid plugin marketplace.
My 2 cents worth...
Roger



On Thu, Feb 1, 2024 at 9:28?AM Nyall Dawson via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi lists!
>
> I wanted to kick start a (hopefully!) civil, THEORETICAL discussion about
> the role of a paid plugin marketplace for QGIS plugins.
>
> This has been on my mind for a while, and recently was bumped by this
> email to the list:
>
> On Fri, 19 Jan 2024 at 19:38, gam17--- via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
> >
> > Hi everyone,
> >     like many of you, I have developed and maintained a plugin for many
> > years completely free of charge.
> > I have never received any donation or compensation of any kind and now I
> > would like to find a solution.
> > Has anyone already found a way to receive donations?
> > I was thinking of asking for a sponsor that would be displayed during
> > execution, for example in the window titles or through a specific menu
> > item like QGIS does (in this way the sponsor would be much less
> > visible).
>
> So again, stressing that this is a THEORETICAL discussion, I'm interested
> in hearing people's thoughts on the potential role of a paid plugin
> marketplace for QGIS.
>
> Here's a bullet point dump of where I'm currently sitting:
>
> - Yes, I'm aware that plugins must be GPL, and that this makes paid
> plugins a little trickier in that they're obviously still subject to the
> GPL.
> - The GPL does NOT prevent charging for software, or mandate making it
> public to non-paying customers. We could potentially have GPL plugins which
> are only available to paid users, and only make these plugins available
> privately to those users. YES, the GPL **DOES** mean that those paying
> customers can redistribute the plugin publicly and freely without issue if
> they want (and regardless of whether the original developer wants!)
> - In fact, there's already likely thousands of private, paid for plugins
> out there! I'm talking here of plugins made specifically for internal use
> by one organisation only. Yep, that organisation COULD make the plugin
> public/freely available, but in many cases they are specific to that one
> organisation's needs or contain organisation sensitive logic/data. These
> plugins are completely compliant with the GPL, despite being private and
> paid for by that organisation.
> - There's nothing preventing a public GPL QGIS plugin from depending on a
> subscription based back-end, and offering zero value to anyone not paying
> for that backend. And there's a growing number of these plugins, which
> depend on users paying xxx large corporate entity regular high fees to
> access the backend service. The GPL doesn't (and arguably
> shouldn't) prevent these large entities from making money off QGIS plugins.
> - But this means that the current situation is unfairly weighted toward
> these large entities! A one-person team making an excellent plugin and
> providing an awesome tool for use in QGIS has a MUCH MUCH harder time
> finding ANY financial compensation for their efforts! I don't like this
> situation at all, and I'd say it goes against the "spirit" of why QGIS was
> made under the GPL in the first place. The big corporate entities win, the
> smaller community focused developers lose out. ?
> - Despite the fact that a paid user could freely re-distribute a paid-for
> plugin, there's still potential financial gain for the developer in making
> a plugin available for a charge on a theoretical QGIS plugin marketplace.
> - The blender market is a great example of this. There's LOTS of GPL
> blender add ons available there at charge. Eg
> https://blendermarket.com/products/hard-ops--boxcutter-ultimate-bundle?num=2&src=top
> as one example. If those numbers are accurate, that developer has sold >35k
> copies of a GPL licensed add on at $39 each. I'm going to go out on a limb
> here and guess that that developer's motivation to make their add-on
> excellent is considerably higher than the developer of an equivalent QGIS
> plugin ? (not to mention that their time investment is much more
> justifiable). And any ONE of those 35k paid users could have made the
> plugin freely available for everyone else... but that hasn't stopped the
> sales.
>
> So what does everyone else think? Would there be a THEORETICAL place for a
> THEORETICAL paid QGIS plugin marketplace somewhere in the future? Or is
> there a better model we could (theoretically ?) follow to financially
> reward plugin developers?
>
> Nyall
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240201/89a22cfa/attachment.htm>

From even.rouault at spatialys.com  Wed Jan 31 18:26:19 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 1 Feb 2024 03:26:19 +0100
Subject: [QGIS-Developer] Theoretical discussion: A QGIS paid plugin
 marketplace?
In-Reply-To: <CAB28AshdzhusmTLVr_jAguY+H4vwTvHVYRJSHwnzDWjZWBEneA@mail.gmail.com>
References: <18acf45c109a79d5cffcb6a506ce8fae@riseup.net>
 <CAB28AshdzhusmTLVr_jAguY+H4vwTvHVYRJSHwnzDWjZWBEneA@mail.gmail.com>
Message-ID: <91a8e995-9d2f-4b10-aa5e-ddbbfc070e0f@spatialys.com>

Hi Nyall,

<THEORETICALLY>

It would seem tricky that qgis.org both offers/promotes a gratis & FOSS 
"market place" (the current official plugin repository), and a paid one. 
That could be conceived, but if qgis.org would promote in some way the 
paid market place, this would create some expectation on the quality of 
the plugins proposed for a fee, and QGIS itself, which could create some 
tensions with users.

The theoretical question of someone buying a paid (GPL) plugin (or maybe 
just finding its source code somewhere) and making it a gratis plugin 
once it has obtained its source code would be quite untainable if 
qgis.org managed both market places. The spirit & letter of the GPL is 
that anyone can improve existing code and share it with others, so it 
would be a hard take to prevent someone from distributing an 
improved/modified version of a paid GPL plugin in the gratis repository, 
and obviously having the same entity managing both market places would 
be a conflict of interest.

I'm not sure if the non-profit status of qgis.org would allow it to 
manage a paid marketplace.

I was wondering about the connection between Blender Market, LLC the 
private company behind blendermarket.com, and Blender.org the OSS 
organization, since that could be an interesting situation with respect 
to trademark.

https://blendermarket.com/page/about brings interesting clues about why 
it's working:

- "The Blender Market is independently owned and operated and has no 
affiliation with The Blender Foundation."

but:

- "The Blender Market is a proud Corporate Gold member of the Blender 
Development Fund"

I don't know if blender.org has some sort of gratis plugin repo, or if 
not, more generally how they would welcome a code contribution in their 
software coming from OSS code from the paid market place... I assume 
they must have some policy on how to handle such situation.

All in all, I believe that such organization, with a clear separation of 
the .org and the .com as different legal entities, with a "win-win" 
relationship, would probably be the best solution if one wanted to 
implement that.

</THEORETICALLY>

Even

Le 01/02/2024 ? 02:28, Nyall Dawson via QGIS-Developer a ?crit?:
> Hi lists!
>
> I wanted to kick start a (hopefully!) civil, THEORETICAL discussion 
> about the role of a paid plugin marketplace for QGIS plugins.
>
> This has been on my mind for a while, and recently was bumped by this 
> email to the list:
>
> On Fri, 19 Jan 2024 at 19:38, gam17--- via QGIS-Developer 
> <qgis-developer at lists.osgeo.org> wrote:
> >
> > Hi everyone,
> > ? ? like many of you, I have developed and maintained a plugin for many
> > years completely free of charge.
> > I have never received any donation or compensation of any kind and now I
> > would like to find a solution.
> > Has anyone already found a way to receive donations?
> > I was thinking of asking for a sponsor that would be displayed during
> > execution, for example in the window titles or through a specific menu
> > item like QGIS does (in this way the sponsor would be much less
> > visible).
>
> So again, stressing that this is a THEORETICAL discussion, I'm 
> interested in hearing people's thoughts on the potential role of a 
> paid plugin marketplace for QGIS.
>
> Here's a bullet point dump of where I'm currently sitting:
>
> - Yes, I'm aware that plugins must be GPL, and that this makes paid 
> plugins a little trickier in that they're obviously still subject to 
> the GPL.
> - The GPL does NOT prevent charging for software, or mandate making it 
> public to non-paying customers. We could potentially have GPL plugins 
> which are only available to paid users, and only make these plugins 
> available privately to those users. YES, the GPL **DOES** mean that 
> those paying customers can redistribute the plugin publicly and freely 
> without issue if they want (and regardless of whether the original 
> developer wants!)
> - In fact, there's already likely thousands of private, paid for 
> plugins out there! I'm talking here of plugins made specifically for 
> internal use by one organisation only. Yep, that organisation COULD 
> make the plugin public/freely available, but in many cases they are 
> specific to that one organisation's needs or contain organisation 
> sensitive logic/data. These plugins are completely compliant with the 
> GPL, despite being private and paid for by that organisation.
> - There's nothing preventing a public GPL QGIS plugin from depending 
> on a subscription based back-end, and offering zero value to anyone 
> not paying for that backend. And there's a growing number of these 
> plugins, which depend on users paying xxx large corporate 
> entity?regular high fees to access the backend service. The GPL 
> doesn't (and arguably shouldn't)?prevent these large entities from 
> making money off QGIS plugins.
> - But this means that the current situation is unfairly weighted 
> toward these large entities! A one-person team making an excellent 
> plugin and providing an awesome tool for use in QGIS has a MUCH MUCH 
> harder time finding ANY financial compensation for their efforts! I 
> don't like this situation at all, and I'd say it goes against the 
> "spirit" of why QGIS was made under the GPL in the first place. The 
> big corporate entities win, the smaller community focused developers 
> lose out.??
> - Despite the fact that a paid user could freely re-distribute a 
> paid-for plugin, there's still potential financial gain for the 
> developer in making a plugin available for a charge on a theoretical 
> QGIS plugin marketplace.
> - The blender market is a great example of this. There's LOTS of GPL 
> blender add ons available there at charge. Eg 
> https://blendermarket.com/products/hard-ops--boxcutter-ultimate-bundle?num=2&src=top 
> <https://blendermarket.com/products/hard-ops--boxcutter-ultimate-bundle?num=2&src=top> 
> as one example. If those numbers are accurate, that developer has sold 
> >35k copies of a GPL licensed add on at $39 each. I'm going to go out 
> on a limb here and guess that that developer's motivation to make 
> their add-on excellent is considerably higher than the developer of an 
> equivalent QGIS plugin???(not to mention that their time investment 
> is much more justifiable). And any ONE of those 35k paid users could 
> have made the plugin freely available for everyone else... but that 
> hasn't stopped the sales.
>
> So what does everyone else think? Would there be a THEORETICAL place 
> for a THEORETICAL paid QGIS plugin marketplace somewhere in the 
> future? Or is there a better model we could (theoretically ?) follow 
> to financially reward plugin developers?
>
> Nyall
>
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From adam.d.steer at gmail.com  Wed Jan 31 22:56:20 2024
From: adam.d.steer at gmail.com (Adam Steer)
Date: Thu, 1 Feb 2024 17:56:20 +1100
Subject: [QGIS-Developer] Theoretical discussion: A QGIS paid plugin
 marketplace? (was: sponsored plugin)
In-Reply-To: <CAMFBa1UFm1pykZj3jKOHm=pA5yEVWdXQA9r9RziWgQ9oSkd0Mg@mail.gmail.com>
References: <18acf45c109a79d5cffcb6a506ce8fae@riseup.net>
 <CAB28AshdzhusmTLVr_jAguY+H4vwTvHVYRJSHwnzDWjZWBEneA@mail.gmail.com>
 <CAMFBa1UFm1pykZj3jKOHm=pA5yEVWdXQA9r9RziWgQ9oSkd0Mg@mail.gmail.com>
Message-ID: <CAFORoyjXVSj=B+WqgH2jQ3qPiTmNgTsX672u8cs3mMenb=onVQ@mail.gmail.com>

Hi Nyall, everyone

I think two things. First, knock yourselves out - everyone deserves reward
for their work, and I know better than many about the hard work -> void
ratio,

Second, think deeply about what the ask is. Asking to be paid to make a
plugin is effectively 'I was given a vast infrastructure for nothing, and I
expect to be paid exactly for any tiny part I add to it'.

Where should we stop in a pay-per-use system? Should committee members and
board members and other community supporters expect payment for the system
maintenance they do? In the end, that road leads to being another ... money
focussed geospatial system. I personally don't have the resources for that,
and therefore will be locked out of a pay-per-thing QGIS.

At FOSS4G 2019 I stood in front of a global audience and said 'at GIS
conferences people come and sell you stuff. At science conferences people
try to get things from you for free, at FOSS4G people as "what can we give
you?"'. I haven't made it to a FOSS4G since then, maybe those words are no
longer true. I hope not.

Summary: It's your community, do what you want. I understand wanting to get
paid for work, I also deeply feel being a small shop who ends up working
for free. Just think hard about what got us to here and how - and then
where the road of expecting a fee for everything ends, and where it sits in
terms of the FOSS4G mission around software and technology inclusivity. For
me, that road ends with being locked out of geospatial things - so I would
not use a paid plugin marketplace.

Thanks for listening,

Adam

--
Dr Adam Steer - currently searching for new clients / a new role
me: https://iamadamsteer.com
work: https://spatialised.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240201/38f1aca2/attachment.htm>

From apasotti at gmail.com  Wed Jan 31 23:40:34 2024
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 1 Feb 2024 08:40:34 +0100
Subject: [QGIS-Developer] Theoretical discussion: A QGIS paid plugin
 marketplace? (was: sponsored plugin)
In-Reply-To: <CAB28AshdzhusmTLVr_jAguY+H4vwTvHVYRJSHwnzDWjZWBEneA@mail.gmail.com>
References: <18acf45c109a79d5cffcb6a506ce8fae@riseup.net>
 <CAB28AshdzhusmTLVr_jAguY+H4vwTvHVYRJSHwnzDWjZWBEneA@mail.gmail.com>
Message-ID: <CAL5Q671RbtqhYab5Jg34_J2m2rSnrgyE_nwmMAGvy4QNjS+M1Q@mail.gmail.com>

Hi Nyall,

Thank you for resuming this topic, I remember when I made a similar
proposal some 10 years back and I felt like it was blasphemy in the
church.

Perhaps now times are more mature and I am very much in favour of
opening the official plugin space to various forms of paid plugins.

In a previous life, I have had  a very good experience and revenue by
selling my PHP plugins on the Joomla marketplace (they maintained a
plugin listing, integrated with the Joomla CMS admin panel, plugins
were hosted elsewhere and they didn't manage the payments directly).

All the plugins I was selling were GPL or AGPL, source code was
publicly available on sourceforge/github and (to my surprise) I've
never had anyone re-selling or publishing or offering downloads of my
plugins in the wild.

The Joomla marketplace was (I don't know if it still is nowaday) IMHO
a great success story: there were many large/complex paid or freemium
plugins with a flourishing ecosystem of small/middle software houses
behind them, they typically also contributed to Joomla core
development.

So, my experience is that GPL is not a problem and people does
understand that some developers have bills to pay and children to feed
and they are generally happy to contribute to a sustainable software
ecosystem.

Cheers

On Thu, Feb 1, 2024 at 2:28?AM Nyall Dawson via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> Hi lists!
>
> I wanted to kick start a (hopefully!) civil, THEORETICAL discussion about the role of a paid plugin marketplace for QGIS plugins.
>
> This has been on my mind for a while, and recently was bumped by this email to the list:
>
> On Fri, 19 Jan 2024 at 19:38, gam17--- via QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
> >
> > Hi everyone,
> >     like many of you, I have developed and maintained a plugin for many
> > years completely free of charge.
> > I have never received any donation or compensation of any kind and now I
> > would like to find a solution.
> > Has anyone already found a way to receive donations?
> > I was thinking of asking for a sponsor that would be displayed during
> > execution, for example in the window titles or through a specific menu
> > item like QGIS does (in this way the sponsor would be much less
> > visible).
>
> So again, stressing that this is a THEORETICAL discussion, I'm interested in hearing people's thoughts on the potential role of a paid plugin marketplace for QGIS.
>
> Here's a bullet point dump of where I'm currently sitting:
>
> - Yes, I'm aware that plugins must be GPL, and that this makes paid plugins a little trickier in that they're obviously still subject to the GPL.
> - The GPL does NOT prevent charging for software, or mandate making it public to non-paying customers. We could potentially have GPL plugins which are only available to paid users, and only make these plugins available privately to those users. YES, the GPL **DOES** mean that those paying customers can redistribute the plugin publicly and freely without issue if they want (and regardless of whether the original developer wants!)
> - In fact, there's already likely thousands of private, paid for plugins out there! I'm talking here of plugins made specifically for internal use by one organisation only. Yep, that organisation COULD make the plugin public/freely available, but in many cases they are specific to that one organisation's needs or contain organisation sensitive logic/data. These plugins are completely compliant with the GPL, despite being private and paid for by that organisation.
> - There's nothing preventing a public GPL QGIS plugin from depending on a subscription based back-end, and offering zero value to anyone not paying for that backend. And there's a growing number of these plugins, which depend on users paying xxx large corporate entity regular high fees to access the backend service. The GPL doesn't (and arguably shouldn't) prevent these large entities from making money off QGIS plugins.
> - But this means that the current situation is unfairly weighted toward these large entities! A one-person team making an excellent plugin and providing an awesome tool for use in QGIS has a MUCH MUCH harder time finding ANY financial compensation for their efforts! I don't like this situation at all, and I'd say it goes against the "spirit" of why QGIS was made under the GPL in the first place. The big corporate entities win, the smaller community focused developers lose out. ?
> - Despite the fact that a paid user could freely re-distribute a paid-for plugin, there's still potential financial gain for the developer in making a plugin available for a charge on a theoretical QGIS plugin marketplace.
> - The blender market is a great example of this. There's LOTS of GPL blender add ons available there at charge. Eg https://blendermarket.com/products/hard-ops--boxcutter-ultimate-bundle?num=2&src=top as one example. If those numbers are accurate, that developer has sold >35k copies of a GPL licensed add on at $39 each. I'm going to go out on a limb here and guess that that developer's motivation to make their add-on excellent is considerably higher than the developer of an equivalent QGIS plugin ? (not to mention that their time investment is much more justifiable). And any ONE of those 35k paid users could have made the plugin freely available for everyone else... but that hasn't stopped the sales.
>
> So what does everyone else think? Would there be a THEORETICAL place for a THEORETICAL paid QGIS plugin marketplace somewhere in the future? Or is there a better model we could (theoretically ?) follow to financially reward plugin developers?
>
> Nyall
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

