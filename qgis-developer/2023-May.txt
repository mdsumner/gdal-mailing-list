From c at margo.co  Mon May  1 01:11:08 2023
From: c at margo.co (Pedro Camargo)
Date: Mon, 01 May 2023 18:11:08 +1000
Subject: [QGIS-Developer] Plugin folder disambiguation
Message-ID: <187d65d9109.8515cb4c12630.1735841292738088094@margo.co>

Hello people,



I have a little question, stemming from a mistake I made many years ago related to the AequilibraE QGIS plugin.



So.... When I released the plugin, I gave it the exact same name of the Python library (aequilibrae) and went through some pretty tortuous roads to make it all work. Now that we are cleaning everything with proper software dev practices (linting, tests, etc), we renamed the QGIS plugin to qaequilibrae, which disambiguates everything and allows us to have imports for both the plugin and the library.



However, as you all probably know, there is a restriction on changing the name of the folder that holds the plugin (understandable, as we want to avoid conflicts with other plugins).



AequilibraE is garnering a healthy number of users both inside QGIS and for its Python library, and we don't want to do anything to loose momentum. So my question is: What is the best path here?



Thanks for your thoughts,

Pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/318a3695/attachment.htm>

From adenaculture at gmail.com  Mon May  1 07:27:58 2023
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 1 May 2023 10:27:58 -0400
Subject: [QGIS-Developer] QDateEdit and QgsProcessingParameterDateTime
 showing only 2 digit year
Message-ID: <CABPxTTrSoTj-4Ltzk9exCnR0auqR6mviDyOLuUMJsJFXGSDZgg@mail.gmail.com>

It used to be that the QDateEdit and QgsProcessingParameterDateTime would
show a 4 digit year. That has changed to a 2 digit year. My opinion is that
it should, by default, remain a 4 digit year. Since it has changed, is
there any way to set it back to be a 4 digit year?

Thanks,
Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/c9735562/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Mon May  1 09:00:39 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Mon, 1 May 2023 16:00:39 +0000
Subject: [QGIS-Developer] Digitizing with Edit Menu
In-Reply-To: <CAJfCvRkhEBAidTN==cKXqCebeeWC73=dscq3BWeVH0T7tgc1tw@mail.gmail.com>
References: <d0ec9cbf412043d4968b1aaf6fa5ec5a@erdc.dren.mil>
 <CAJfCvRkhEBAidTN==cKXqCebeeWC73=dscq3BWeVH0T7tgc1tw@mail.gmail.com>
Message-ID: <1218f832d2534830a32a4732389c88dd@erdc.dren.mil>

Thanks for taking the time to code that.  I originally coded with the featureAdded method.  When I first found it I was pretty happy with the solution, but then since the user does not get informed until after they draw the shape and it is already added to the layer and so the feature then needs to be deleted so they can try again.  This can go a few iterations.

The previous version of the software I am working on which did not use QGIS but custom developed using R and Leaflet had this dynamic cursor that indicated the size and users miss that, so then I came across the eventFilter and applied that to the map canvas  and while still using the shapes from the edit menu basically used the mouse location to handle dynamically updating the cursor the a QLabel calculating the area bases on the shape being drawn.  It added more code, but out trainers are excited about this new feature..

[cid:image002.png at 01D97C23.A1C08A70]

[cid:image003.png at 01D97C24.87ED6810]

From: Yoann Quenach de Quivillic <yoann.quenach at gmail.com>
Sent: Sunday, April 30, 2023 5:48 PM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil>
Cc: qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] Digitizing with Edit Menu

Have you considered listening to the featureAdded signal instead?
The digitizing shape (aka rubberband) you see while digitizing is not really accessible. In fact, it isn't guaranteed to be the geometry of the feature being created. It could even not exist at all ; this is all dependent on the current QgsMapTool used.

Rather than monitoring clicks, or accessing the rubberband, you could listen to the featureAdded signal. This signal is emitted when a new feature is added to the layer. You can then perform your check (e;g area validation), and delete the feature if the check fails. It won't even appear on screen.

Here is a possible implementation. Note that I split the AreaValidator into three classes for genericity, but you could merge these three classes in a single one.

LayerConnector : this is used to automatically connect all map layers to a function
FeatureValidator: Specialization, connects all QgsVectorLayer featureAdded signal to a function that takes the layer and the feature being added as parameters
AreaValidator: Contains the actual area computation, and possible deletion of the feature


class LayerConnector(QObject):
    """Generic class to connect to all QgsMapLayer"""

    def __init__(self):
        super().__init__()
        QgsProject.instance().layerWasAdded.connect(self.connect_layer)
        self.connect_layers()

    def __del__(self):
        QgsProject.instance().layerWasAdded.disconnect(self.connect_layer)
        self.disconnect_layers()

    def connect_layers(self):
        print("Connecting")
        for layer in QgsProject.instance().mapLayers().values():
            self.connect_layer(layer)

    def disconnect_layers(self):
        print("DisConnecting")
        for layer in QgsProject.instance().mapLayers().values():
            self.disconnect_layer(layer)

    def connect_layer(self, layer):
        pass

    def disconnect_layer(self, layer):
        pass

class FeatureValidator(LayerConnector):
    """Connect all QgsVectorLayer to a process_feature method when a feature is added"""

    def connect_layer(self, layer):
        if not isinstance(layer, QgsVectorLayer):
            return
        layer.featureAdded.connect(self.on_feature_added)

    def disconnect_layer(self, layer):
        if not isinstance(layer, QgsVectorLayer):
            return
        layer.featureAdded.disconnect(self.on_feature_added)

    def on_feature_added(self, id):
        layer = self.sender()
        feat = layer.getFeature(id)
        self.process_feature(layer, feat)

    def process_feature(self, layer, feature):
        print(f"Feature {feature.id()} added to layer {layer.name()}")

class AreaValidator(FeatureValidator):
    def __init__(self, max_area):
        super().__init__()
        self.max_area = max_area

    def process_feature(self, layer, feature):
        geom = feature.geometry()
        if not geom:
            return

        # Here you should handle CRS transformation
        # before computing the feature area
        area = geom.area()

        if area > self.max_area:
            iface.messageBar().pushWarning("Cannot add feature", f"Area too big : {round(area, 2)}")
            layer.deleteFeature(feature.id())

validator = AreaValidator(500)

Le dim. 30 avr. 2023 ? 18:42, Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> a ?crit :
When you digitize a shape using the Edit menu in QGIS is the shape accessible?  I am looking to get he area of the shape as it is drawn.  I have added an event filter to my code to capture the coordinates and calculate it by creating a QgsGeometry, but my code is getting complicated as there are many shapes that a user can draw from this menu so if I can get access to this shape if it is temporary in memory, then I can just calculate the area on the shape and not have to capture all the positions of the mouse when clicked and moved.

[cid:image001.png at 01D97C20.131018C0]
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked
Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/760b71cf/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 82922 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/760b71cf/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 728686 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/760b71cf/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 855843 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/760b71cf/attachment-0005.png>

From yoann.quenach at gmail.com  Mon May  1 13:17:18 2023
From: yoann.quenach at gmail.com (Yoann Quenach de Quivillic)
Date: Mon, 1 May 2023 22:17:18 +0200
Subject: [QGIS-Developer] Digitizing with Edit Menu
In-Reply-To: <1218f832d2534830a32a4732389c88dd@erdc.dren.mil>
References: <d0ec9cbf412043d4968b1aaf6fa5ec5a@erdc.dren.mil>
 <CAJfCvRkhEBAidTN==cKXqCebeeWC73=dscq3BWeVH0T7tgc1tw@mail.gmail.com>
 <1218f832d2534830a32a4732389c88dd@erdc.dren.mil>
Message-ID: <CAJfCvRmUoe1zAg7e7BVanWq7yupxO4-a0hQGPvuyYAkkiC2QSg@mail.gmail.com>

In that case, you could try the following to get the temp geometry being
drawn on the map.
*Note that this is kind of hackish, may not work for every tool, and might
break at any QGIS update*.

def getTempGeom():

    # Iter over map canvas items, starting from the end (most recent)
    for item in iface.mapCanvas().items()[::-1]:
        # If it is a valid QgsGeometryRubberBand, return its geometry
        if isinstance(item, QgsGeometryRubberBand):
            geom = item.geometry()
            if geom.area() > 0:
                return geom

        # If it is a valid QgsRubberBand, return its geometry
        if isinstance(item, QgsRubberBand):
            geom = item.asGeometry()
            if geom.area() > 0:
                return geom

In your eventFilter, you could just use getTempGeom, perform the area
computation, and display a tooltip with the current area.

Le lun. 1 mai 2023 ? 18:00, Catania, Luke A ERDC-RDE-GRL-VA CIV <
Luke.A.Catania at erdc.dren.mil> a ?crit :

> Thanks for taking the time to code that.  I originally coded with the
> featureAdded method.  When I first found it I was pretty happy with the
> solution, but then since the user does not get informed until after they
> draw the shape and it is already added to the layer and so the feature then
> needs to be deleted so they can try again.  This can go a few iterations.
>
>
>
> The previous version of the software I am working on which did not use
> QGIS but custom developed using R and Leaflet had this dynamic cursor that
> indicated the size and users miss that, so then I came across the
> eventFilter and applied that to the map canvas  and while still using the
> shapes from the edit menu basically used the mouse location to handle
> dynamically updating the cursor the a QLabel calculating the area bases on
> the shape being drawn.  It added more code, but out trainers are excited
> about this new feature..
>
>
>
>
>
>
>
> *From:* Yoann Quenach de Quivillic <yoann.quenach at gmail.com>
> *Sent:* Sunday, April 30, 2023 5:48 PM
> *To:* Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil>
> *Cc:* qgis-developer at lists.osgeo.org
> *Subject:* Re: [QGIS-Developer] Digitizing with Edit Menu
>
>
>
> Have you considered listening to the featureAdded signal instead?
>
> The digitizing shape (aka rubberband) you see while digitizing is not
> really accessible. In fact, it isn't guaranteed to be the geometry of the
> feature being created. It could even not exist at all ; this is all
> dependent on the current QgsMapTool used.
>
>
>
> Rather than monitoring clicks, or accessing the rubberband, you could
> listen to the featureAdded signal. This signal is emitted when a new
> feature is added to the layer. You can then perform your check (e;g area
> validation), and delete the feature if the check fails. It won't even
> appear on screen.
>
>
>
> Here is a possible implementation. Note that I split the AreaValidator
> into three classes for genericity, but you could merge these three classes
> in a single one.
>
>
>
> LayerConnector : this is used to automatically connect all map layers to a
> function
>
> FeatureValidator: Specialization, connects all QgsVectorLayer featureAdded
> signal to a function that takes the layer and the feature being added as
> parameters
>
> AreaValidator: Contains the actual area computation, and possible deletion
> of the feature
>
>
>
>
>
> class LayerConnector(QObject):
>
>     """Generic class to connect to all QgsMapLayer"""
>
>
>
>     def __init__(self):
>
>         super().__init__()
>
>         QgsProject.instance().layerWasAdded.connect(self.connect_layer)
>
>         self.connect_layers()
>
>
>
>     def __del__(self):
>
>         QgsProject.instance().layerWasAdded.disconnect(self.connect_layer)
>
>         self.disconnect_layers()
>
>
>
>     def connect_layers(self):
>
>         print("Connecting")
>
>         for layer in QgsProject.instance().mapLayers().values():
>
>             self.connect_layer(layer)
>
>
>
>     def disconnect_layers(self):
>
>         print("DisConnecting")
>
>         for layer in QgsProject.instance().mapLayers().values():
>
>             self.disconnect_layer(layer)
>
>
>
>     def connect_layer(self, layer):
>
>         pass
>
>
>
>     def disconnect_layer(self, layer):
>
>         pass
>
>
>
> class FeatureValidator(LayerConnector):
>
>     """Connect all QgsVectorLayer to a process_feature method when a
> feature is added"""
>
>
>
>     def connect_layer(self, layer):
>
>         if not isinstance(layer, QgsVectorLayer):
>
>             return
>
>         layer.featureAdded.connect(self.on_feature_added)
>
>
>
>     def disconnect_layer(self, layer):
>
>         if not isinstance(layer, QgsVectorLayer):
>
>             return
>
>         layer.featureAdded.disconnect(self.on_feature_added)
>
>
>
>     def on_feature_added(self, id):
>
>         layer = self.sender()
>
>         feat = layer.getFeature(id)
>
>         self.process_feature(layer, feat)
>
>
>
>     def process_feature(self, layer, feature):
>
>         print(f"Feature {feature.id()} added to layer {layer.name()}")
>
>
>
> class AreaValidator(FeatureValidator):
>
>     def __init__(self, max_area):
>
>         super().__init__()
>
>         self.max_area = max_area
>
>
>
>     def process_feature(self, layer, feature):
>
>         geom = feature.geometry()
>
>         if not geom:
>
>             return
>
>
>
>         # Here you should handle CRS transformation
>
>         # before computing the feature area
>
>         area = geom.area()
>
>
>
>         if area > self.max_area:
>
>             iface.messageBar().pushWarning("Cannot add feature", f"Area
> too big : {round(area, 2)}")
>
>             layer.deleteFeature(feature.id())
>
>
>
> validator = AreaValidator(500)
>
>
>
> Le dim. 30 avr. 2023 ? 18:42, Catania, Luke A ERDC-RDE-GRL-VA CIV via
> QGIS-Developer <qgis-developer at lists.osgeo.org> a ?crit :
>
> When you digitize a shape using the Edit menu in QGIS is the shape
> accessible?  I am looking to get he area of the shape as it is drawn.  I
> have added an event filter to my code to capture the coordinates and
> calculate it by creating a QgsGeometry, but my code is getting complicated
> as there are many shapes that a user can draw from this menu so if I can
> get access to this shape if it is temporary in memory, then I can just
> calculate the area on the shape and not have to capture all the positions
> of the mouse when clicked and moved.
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:
> Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked
> Unsubscribe:
> Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/7cc052ed/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 82922 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/7cc052ed/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 728686 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/7cc052ed/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 855843 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230501/7cc052ed/attachment-0005.png>

From prakritishetty02 at gmail.com  Mon May  1 20:05:42 2023
From: prakritishetty02 at gmail.com (Prakriti Shetty)
Date: Tue, 2 May 2023 08:35:42 +0530
Subject: [QGIS-Developer] Python Plugin for Fuzzy Inference Systems in QGIS
Message-ID: <CANhWpER-tOQrzVWaHJVFukZygNnmkjyGY0EfxWy-mCEw_VeBpQ@mail.gmail.com>

Dear QGIS developers and maintainers,

I'm Prakriti Shetty, a third year undergraduate at the Indian Institute of
Technology Bombay, India.

I have developed a simplistic version of a plugin for Fuzzy Logic that can
be incorporated into QGIS as part of my course project, under the guidance
of Prof Alok Porwal and his ex-PhD student, Ms Bijal Chudasama.

I'm sharing the link to my code and my project report, where I mention the
work done so far, alongwith screenshots of the developed plugin and what
needs to be implemented further to get it up and running.
Please let me know if I can raise a PR for the same.

Code Link: https://github.com/PrakritiShetty/GNR633Project_QGISPlugin.git
(I don't mind a star to the repo in case you liked it?)

Thanks and regards
Prakriti Shetty
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/aa9c518e/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GNR633 Project Documentation.pdf
Type: application/pdf
Size: 454441 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/aa9c518e/attachment-0001.pdf>

From tomasstraupis at gmail.com  Mon May  1 23:40:38 2023
From: tomasstraupis at gmail.com (Tomas Straupis)
Date: Tue, 2 May 2023 09:40:38 +0300
Subject: [QGIS-Developer] WMS GetCapabilities NAME tag for groups
Message-ID: <CA+f=8=rH1HvzBOBzKU-t7unqPebhmTsyq_8E=h6+vpOnXi=4bg@mail.gmail.com>

Hello

  QGIS Server is providing a GetCapabilities document for a service.
This document besides different stuff describes all layers provided.
Layer description includes NAME and TITLE tags. These layers can then
later be specified in GetMap LAYERS parameter by the value provided in
layers NAME tag (not TITLE, as that could have spaces, national
characters etc.).

 Now if we have a group of layers in QGIS project, say:
  G1
  * L1
  * L2

  GetCapabilities would list all three, which is fine. But all of them
would have a NAME tag meaning that then we could request G1 in a
LAYERS parameter together with L1 and L2 (like LAYERS=G1,L1,L2) which
would produce doubles of layer L1 and L2 (f.e. double labels, but I
assume this would also mean double symbology).

  OGC WMS standard states* that if we do not want some layer - for
example a group - to be specified in a LAYERS parameter, we should not
be providing NAME tag for that layer (only TITLE, so that group can be
displayed in a tree).

  QGIS has a specific possibility to specify detailed parameters for a
group (different name, title, description).

  QUESTION: what should be the right direction for QGIS here?
  a) project level setting of name tag for groups: provide / not
provide name tag
  b) group level setting (extending existing group details dialog) to
control name tag behaviour

  What should be the default behaviour:
  a) provide NAME tag for groups (this would be consistent the with
current behaviour, but to me this is not what most users would want?)
  b) not provide NAME tag for groups

  Thank you

* OGC WMS: Part 7.2.4.6.3 in this document:
https://portal.ogc.org/files/?artifact_id=14416

-- 
Tomas

From paolo.tormene at globalquakemodel.org  Mon May  1 23:43:42 2023
From: paolo.tormene at globalquakemodel.org (Paolo Tormene)
Date: Tue, 2 May 2023 08:43:42 +0200
Subject: [QGIS-Developer] No module named 'qgslayoutchecker' using
 "qgis/qgis:latest"
Message-ID: <CADQ4pmD=prb+a4ksrR0Gg3LYpMu=FgPokLJUFnZfpHXDDH5fYQ@mail.gmail.com>

Dear QGIS people,
I am running continuous integration tests for a plugin using the
'qgis/qgis:latest' docker and, since 4 days ago, I am getting the following
error:

from qgis.testing import start_app
usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
usr/lib/python3/dist-packages/qgis/testing/__init__.py:56: in <module>
    from qgslayoutchecker import QgsLayoutChecker
usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
E   ModuleNotFoundError: No module named 'qgslayoutchecker'

Please note that the same tests run without issues using the
'qgis/qgis:release-3_22' docker instead.
Has anyone experienced the same problem?

Thank you and best regards,
Paolo

-- 

*PAOLO TORMENE* senior software developer +39 0382 5169882

*GLOBAL EARTHQUAKE MODEL * working together to assess risk

*GEM -* globalquakemodel.org <http://www.globalquakemodel.org> *T -*
@GEMwrld <http://twitter.com/GEMwrld> *F -* GEMwrld
<http://www.facebook.com/GEMwrld>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/71ae749d/attachment.htm>

From alain.ferraton at developpement-durable.gouv.fr  Tue May  2 00:38:47 2023
From: alain.ferraton at developpement-durable.gouv.fr (=?ISO-8859-15?Q?FERRATON_Alain_=28Adjoint_au_chef_de_groupe=29_=2D_SG=2F?= =?ISO-8859-15?Q?DNUM=2FMSP=2FDS=2FGSG?=)
Date: Tue, 02 May 2023 09:38:47 +0200
Subject: [QGIS-Developer] Backward compatibility for style in project
 files between QGIS versions
In-Reply-To: <CAMtsY+aHYO-Ongiq-RLR8x39eDzbuXCHV4U3A5r7ZkgGqRnhyQ@mail.gmail.com>
References: <af57d224bdb3922e7f687364c08a0856@developpement-durable.gouv.fr>
 <CAMtsY+aHYO-Ongiq-RLR8x39eDzbuXCHV4U3A5r7ZkgGqRnhyQ@mail.gmail.com>
Message-ID: <c71eacadf6bb47b3d9f80e646c36f5ae@developpement-durable.gouv.fr>

Hi Denis, 

Thanks for your feedback. 

I think that re-introducing backwards compatibility in QGIS 3.28 would
be valuable for our services. The size of the project files is not too
critical in my opinion compared to the size of the data files, which are
usually much larger. 

Is this possible for QGIS 3.28.7? 

Alain

---
Alain FERRATON

Adjoint au chef de groupe
MSP/DS/GSG
Direction du num?rique | Secr?tariat g?n?ral 

MAN 7, rue Ren? Viviani 44200 NANTES
Bureau : MAN ?tage 1 plateau B
Tel : +33 240128408 - Mobile : +33 671794593
www.ecologie.gouv.fr [1]

 		Secr?tariat g?n?ral

 MINIST?RES
TRANSITION ?COLOGIQUE
COH?SION DES TERRITOIRES
TRANSITION ?NERG?TIQUE
MER 

Le 28/04/2023 10:02, > denis.rouzaud a ?crit :

> Hi Alain, 
> 
> Yes, the backward compatibility to 3.16 has been removed in 3.28, considering there was a LTR in between and that 3.16 was not maintained for more than a year. 
> 
> The PR is here https://github.com/qgis/QGIS/pull/45143 
> 
> I am not sure if it's possible to do it with a plugin. 
> An approach would be to revert this in the 3.28 branch to give more time. I have no strong opinion here. The main motivation to drop compatibility was the size of the project file and redundancy of information (manually editing the file gets harder). 
> 
> Denis 
> 
> Le jeu. 27 avr. 2023, 09:08, FERRATON Alain (Adjoint au chef de groupe) - SG/DNUM/MSP/DS/GSG via QGIS-Developer <qgis-developer at lists.osgeo.org> a ?crit : 
> 
>> Hi 
>> 
>> A polygon layer saved in a project file with QGIS 3.28 is systematically opened in blue in QGIS 3.16 (the style is lost). 
>> 
>> There has been a change in the storage of style in project files introduced in QGIS 3.22. 
>> 
>> QGIS 3.22 save the style in both formats (<Option.../> 
>> 
>> and <prop k=.../> 
>> 
>> (see the attachment) 
>> 
>> This is no longer the case in QGIS 3.28 
>> 
>> We have a heterogeneous QGIS version park. The non backward compatibility of style is an important brake to migrate progressively our services to QGIS 3.28 
>> 
>> We could consider developing or having developed a plugin to ensure this backward compatibility.
>> Is this possible? What would be the best way to proceed? Can we find documentation on the storage of styles in QGIS project files and on its evolution?
>> (I didn't find anything relevant by searching on the internet). 
>> 
>> Sincerely,
>> 
>> -- 
>> Alain FERRATON
>> 
>> Adjoint au chef de groupe
>> MSP/DS/GSG
>> Direction du num?rique | Secr?tariat g?n?ral 
>> 
>> MAN 7, rue Ren? Viviani 44200 NANTES
>> Bureau : MAN ?tage 1 plateau B
>> Tel : +33 240128408 - Mobile : +33 671794593
>> www.ecologie.gouv.fr [1]
>> 
>> Secr?tariat g?n?ral
>> 
>> MINIST?RES
>> TRANSITION ?COLOGIQUE
>> COH?SION DES TERRITOIRES
>> TRANSITION ?NERG?TIQUE
>> MER 
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
 

Links:
------
[1] https://www.ecologie.gouv.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/a26fbd45/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: f30d6c6d.gif
Type: image/gif
Size: 305 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/a26fbd45/attachment.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 546dad11.gif
Type: image/gif
Size: 350 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/a26fbd45/attachment-0001.gif>

From delazj at gmail.com  Tue May  2 01:02:06 2023
From: delazj at gmail.com (DelazJ)
Date: Tue, 2 May 2023 10:02:06 +0200
Subject: [QGIS-Developer] No module named 'qgslayoutchecker' using
 "qgis/qgis:latest"
In-Reply-To: <CADQ4pmD=prb+a4ksrR0Gg3LYpMu=FgPokLJUFnZfpHXDDH5fYQ@mail.gmail.com>
References: <CADQ4pmD=prb+a4ksrR0Gg3LYpMu=FgPokLJUFnZfpHXDDH5fYQ@mail.gmail.com>
Message-ID: <CAECJsSpLnbfC_TykfCD8KLbT_O2hD5VtXzC6NUMnht34VYoDSg@mail.gmail.com>

Hi Paolo,
Yes, we do have the same problems with testing in QGIS-Documentation
repository, for everything related to master branch (
https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml?query=branch%3Amaster).
3.28 is fine.

Regards,
Harrissou

Le mar. 2 mai 2023 ? 08:44, Paolo Tormene via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Dear QGIS people,
> I am running continuous integration tests for a plugin using the
> 'qgis/qgis:latest' docker and, since 4 days ago, I am getting the following
> error:
>
> from qgis.testing import start_app
> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
> usr/lib/python3/dist-packages/qgis/testing/__init__.py:56: in <module>
>     from qgslayoutchecker import QgsLayoutChecker
> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
> E   ModuleNotFoundError: No module named 'qgslayoutchecker'
>
> Please note that the same tests run without issues using the
> 'qgis/qgis:release-3_22' docker instead.
> Has anyone experienced the same problem?
>
> Thank you and best regards,
> Paolo
>
> --
>
> *PAOLO TORMENE* senior software developer +39 0382 5169882
>
> *GLOBAL EARTHQUAKE MODEL * working together to assess risk
>
> *GEM -* globalquakemodel.org <http://www.globalquakemodel.org> *T -*
> @GEMwrld <http://twitter.com/GEMwrld> *F -* GEMwrld
> <http://www.facebook.com/GEMwrld>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/9dba2681/attachment-0001.htm>

From anitagraser at gmx.at  Tue May  2 10:41:07 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Tue, 02 May 2023 17:41:07 +0000
Subject: [QGIS-Developer] Call for Grant Proposals 2023
In-Reply-To: <trinity-1b66abaf-0bfe-40f2-87e8-e40b4a98d3cd-1682164745716@3c-app-gmx-bap24>
References: <trinity-1b66abaf-0bfe-40f2-87e8-e40b4a98d3cd-1682164745716@3c-app-gmx-bap24>
Message-ID: <1683049105008.951775997.2939087606@gmx.at>

Dear developers,


This is the final call for submissions. The form will close today, by end of day, anywhere in the world. 


Regards,
Anita

On Saturday, 22. April 2023 13:59:05 (+02:00), Anita Graser wrote:


Dear developers,
 
This is a friendly reminder that we'll soon reach the deadline for applications to the grant programme on Tuesday 2023-05-02. 
Please get your ideas in: https://blog.qgis.org/2023/04/04/qgis-grants-8-call-for-grant-proposals-2023/
 
Regards,
Anita
 
 
Gesendet: Mittwoch, 05. April 2023 um 08:50 Uhr
Von: "Anita Graser" <anitagraser at gmx.at>
An: qgis-developer at lists.osgeo.org
Betreff: Call for Grant Proposals 2023
Dear QGIS Community,
 
Our previous rounds of grant proposals have always been a great success. We are very pleased to announce that this year?s round of grants is now available. The call is open to anybody who wants to make a funded contribution to QGIS, subject to the call conditions outlined in the application form. The deadline for this round is on Tuesday 2023-05-02. 
 
For more details, please read: 
 
https://blog.qgis.org/2023/04/04/qgis-grants-8-call-for-grant-proposals-2023/
 
We look forward to seeing all your great ideas for improving QGIS!
 
Regards,
Anita

 

-- 
Anita Graser
Home: http://anitagraser.com
Twitter: @underdarkgis
Mastodon: @underdarkgis at fosstodon.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/9cbee1a4/attachment.htm>

From jacky.volpes at oslandia.com  Tue May  2 00:26:23 2023
From: jacky.volpes at oslandia.com (Jacky Volpes)
Date: Tue, 2 May 2023 09:26:23 +0200
Subject: [QGIS-Developer] Digitizing with Edit Menu
In-Reply-To: <d0ec9cbf412043d4968b1aaf6fa5ec5a@erdc.dren.mil>
References: <d0ec9cbf412043d4968b1aaf6fa5ec5a@erdc.dren.mil>
Message-ID: <4070184a-75af-5686-fddd-dbddd31892a4@oslandia.com>

Hello,

Have you tried this following code? Using 
iface.mapCanvas().mapTool().pointsZM() is good for me with any 
digitizing tool, while drawing.


# Measurement object (adapt with crs/transform context/ellipsoid)
da = QgsDistanceArea()
da.setSourceCrs(QgsProject.instance().crs(), 
QgsProject.instance().transformContext())
# If distance measurement must use ellipsoid
da.setEllipsoid(QgsProject.instance().ellipsoid())

# This is a demonstration function to adapt with your needs
def showArea(current_point):
 ??? if not isinstance(iface.mapCanvas().mapTool(), 
QgsMapToolDigitizeFeature):
 ??????? return

 ??? # Snapping
 ??? snapped_point = 
iface.mapCanvas().snappingUtils().snapToMap(current_point).point()
 ??? if not snapped_point.isEmpty():
 ??????? current_point = snapped_point

 ??? # Coordinates of currently drawn points in map coordinates
 ??? points = [QgsPointXY(point) for point in 
iface.mapCanvas().mapTool().pointsZM()]
 ??? points.append(current_point)

 ??? # Get area
 ??? print(da.measurePolygon(points))

# Must be handled correctly in the final code, but here is for testing
iface.mapCanvas().xyCoordinates.connect(showArea)



Le 29/04/2023 ? 01:45, Catania, Luke A ERDC-RDE-GRL-VA CIV via 
QGIS-Developer a ?crit?:
>
> When you digitize a shape using the Edit menu in QGIS is the shape 
> accessible?? I am looking to get he area of the shape as it is drawn.? 
> I have added an event filter to my code to capture the coordinates and 
> calculate it by creating a QgsGeometry, but my code is getting 
> complicated as there are many shapes that a user can draw from this 
> menu so if I can get access to this shape if it is temporary in 
> memory, then I can just calculate the area on the shape and not have 
> to capture all the positions of the mouse when clicked and moved.
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Jacky Volpes

Ing?nieur SIG - Oslandia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/b12f758a/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 82922 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/b12f758a/attachment-0001.png>

From joana at doublebyte.net  Tue May  2 11:17:49 2023
From: joana at doublebyte.net (Joana Simoes)
Date: Tue, 2 May 2023 19:17:49 +0100
Subject: [QGIS-Developer] Upcoming Tiling Interfaces Code Sprint
Message-ID: <11c7fbd8-070f-06a1-c814-750dc2317c66@doublebyte.net>

*Hello,*

*

The Tiling Interfaces Code Sprint, hosted by the Open Geospatial 
Consortium (OGC) and the National Geospatial-Intelligence Agency (NGA)? 
will run from the 12th to the 14th of June at the Moonshot Labs 
<https://www.nga.mil/resources/Moonshot_Labs.html> (St. Louis, MO, US)


A Code Sprint is a three day hybrid event, where dozens of developers 
from around the world come together to code and share their ideas 
regarding sharing geospatial information. Even if you are not a 
developer, there are lots of ways to be involved in the code sprint, 
without actually writing code; e.g.: testing, documentation, issues. 
This code sprint will include a mentor stream targeted at newcomers, 
which includes an onboarding day with lots of introductory tutorials.

*

*You can find more information, including a registration link in the 
code sprint website: https://developer.ogc.org/sprints/21/ 
<https://developer.ogc.org/sprints/21/>
*

*If you plan to attend in-person, be aware that in-person registrations 
close very soon (on the 10th of May).
*

*Hope to see you at the code sprint,*

*All the Best,*

*Joana*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230502/b87582fd/attachment.htm>

From etienne.trimaille at gmail.com  Wed May  3 01:33:25 2023
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Wed, 3 May 2023 10:33:25 +0200
Subject: [QGIS-Developer] Backward compatibility for style in project
 files between QGIS versions
In-Reply-To: <c71eacadf6bb47b3d9f80e646c36f5ae@developpement-durable.gouv.fr>
References: <af57d224bdb3922e7f687364c08a0856@developpement-durable.gouv.fr>
 <CAMtsY+aHYO-Ongiq-RLR8x39eDzbuXCHV4U3A5r7ZkgGqRnhyQ@mail.gmail.com>
 <c71eacadf6bb47b3d9f80e646c36f5ae@developpement-durable.gouv.fr>
Message-ID: <CAMtDFL+k=y-0XQ_E23B2EbDusiQ26HC91wCDxgZHEoccNXN_HQ@mail.gmail.com>

This PR was about the symbology, but we noticed there are many other parts
of the QGS file which are not backward compatible.
If I'm not wrong :
- a WMS shortname on a group made with QGIS 3.20 can not be read with QGIS
3.18.
- field server configuration made with QGIS 3.16 can not be read with QGIS
3.14
- ...

These settings, (which are way older in the QGIS development, i.e already
present in QGIS 2), are just lost when read with a lower version of QGIS.
And obviously, all new features, options, checkbox etc are lost as well.

I understand, it's not easy to migrate a lot of softwares and to follow all
their versions in a big organization.
But using a QGIS recent version to write a file and then ask a lower
version QGIS to read is, anyway, leading to some reading issues I would
say. The PR was indeed trying to keep some backward compatibility about
symbology, which was nice, but there are other settings which are lost
already, so I would be careful with other settings in general ;-)

Just for your information, but I noticed these other settings as well ;-)



Le mar. 2 mai 2023 ? 09:38, FERRATON Alain (Adjoint au chef de groupe) -
SG/DNUM/MSP/DS/GSG via QGIS-Developer <qgis-developer at lists.osgeo.org> a
?crit :

> Hi Denis,
>
> Thanks for your feedback.
>
> I think that re-introducing backwards compatibility in QGIS 3.28 would be
> valuable for our services. The size of the project files is not too
> critical in my opinion compared to the size of the data files, which are
> usually much larger.
>
> Is this possible for QGIS 3.28.7?
>
> Alain
> ---
>
> *Alain FERRATON*
> Adjoint au chef de groupe
> MSP/DS/GSG
> Direction du num?rique | Secr?tariat g?n?ral
>
> MAN 7, rue Ren? Viviani 44200 NANTES
> Bureau : MAN ?tage 1 plateau B
> Tel : +33 240128408 - Mobile : +33 671794593
> www.ecologie.gouv.fr
> [image: Marianne] Secr?tariat g?n?ral
> MINIST?RES
> TRANSITION ?COLOGIQUE
> COH?SION DES TERRITOIRES
> TRANSITION ?NERG?TIQUE
> MER
> [image: libert?, ?galit?, fraternit?]
>
>
> Le 28/04/2023 10:02, > denis.rouzaud a ?crit :
>
> Hi Alain,
>
> Yes, the backward compatibility to 3.16 has been removed in 3.28,
> considering there was a LTR in between and that 3.16 was not maintained for
> more than a year.
>
> The PR is here https://github.com/qgis/QGIS/pull/45143
>
> I am not sure if it's possible to do it with a plugin.
> An approach would be to revert this in the 3.28 branch to give more time.
> I have no strong opinion here. The main motivation to drop compatibility
> was the size of the project file and redundancy of information (manually
> editing the file gets harder).
>
> Denis
>
>
> Le jeu. 27 avr. 2023, 09:08, FERRATON Alain (Adjoint au chef de groupe) -
> SG/DNUM/MSP/DS/GSG via QGIS-Developer <qgis-developer at lists.osgeo.org> a
> ?crit :
>
>> Hi
>>
>> A polygon layer saved in a project file with QGIS 3.28 is systematically
>> opened in blue in QGIS 3.16 (the style is lost).
>>
>> There has been a change in the storage of style in project files
>> introduced in QGIS 3.22.
>>
>> QGIS 3.22 save the style in both formats (<Option.../>
>>
>> and <prop k=.../>
>>
>> (see the attachment)
>>
>> This is no longer the case in QGIS 3.28
>>
>> We have a heterogeneous QGIS version park. The non backward compatibility
>> of style is an important brake to migrate progressively our services to
>> QGIS 3.28
>>
>> We could consider developing or having developed a plugin to ensure this
>> backward compatibility.
>> Is this possible? What would be the best way to proceed? Can we find
>> documentation on the storage of styles in QGIS project files and on its
>> evolution?
>> (I didn't find anything relevant by searching on the internet).
>>
>> Sincerely,
>> --
>>
>> *Alain FERRATON*
>> Adjoint au chef de groupe
>> MSP/DS/GSG
>> Direction du num?rique | Secr?tariat g?n?ral
>>
>> MAN 7, rue Ren? Viviani 44200 NANTES
>> Bureau : MAN ?tage 1 plateau B
>> Tel : +33 240128408 - Mobile : +33 671794593
>> www.ecologie.gouv.fr
>> [image: Marianne] Secr?tariat g?n?ral
>> MINIST?RES
>> TRANSITION ?COLOGIQUE
>> COH?SION DES TERRITOIRES
>> TRANSITION ?NERG?TIQUE
>> MER
>> [image: libert?, ?galit?, fraternit?]
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230503/41d09f34/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: f30d6c6d.gif
Type: image/gif
Size: 305 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230503/41d09f34/attachment.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 546dad11.gif
Type: image/gif
Size: 350 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230503/41d09f34/attachment-0001.gif>

From alain.ferraton at developpement-durable.gouv.fr  Wed May  3 01:53:44 2023
From: alain.ferraton at developpement-durable.gouv.fr (=?ISO-8859-15?Q?FERRATON_Alain_=28Adjoint_au_chef_de_groupe=29_=2D_SG=2F?= =?ISO-8859-15?Q?DNUM=2FMSP=2FDS=2FGSG?=)
Date: Wed, 03 May 2023 10:53:44 +0200
Subject: [QGIS-Developer] Backward compatibility for style in project
 files between QGIS versions
In-Reply-To: <CAMtDFL+k=y-0XQ_E23B2EbDusiQ26HC91wCDxgZHEoccNXN_HQ@mail.gmail.com>
References: <af57d224bdb3922e7f687364c08a0856@developpement-durable.gouv.fr>
 <CAMtsY+aHYO-Ongiq-RLR8x39eDzbuXCHV4U3A5r7ZkgGqRnhyQ@mail.gmail.com>
 <c71eacadf6bb47b3d9f80e646c36f5ae@developpement-durable.gouv.fr>
 <CAMtDFL+k=y-0XQ_E23B2EbDusiQ26HC91wCDxgZHEoccNXN_HQ@mail.gmail.com>
Message-ID: <f3aa016224d99f9ee439f10d2f9eb722@developpement-durable.gouv.fr>

Hi Etienne, 

It is normal that backwards compatibility of projects is generally not
guaranteed. 

However, if it can be done with little effort, especially for highly
visible functionalities such as style, it can be an important advantage
to motivate our services to migrate to the latest LTR version in a
progressive manner (and thus with a temporarily heterogeneous version
park).

Alain 
---
Alain FERRATON

Adjoint au chef de groupe
MSP/DS/GSG
Direction du num?rique | Secr?tariat g?n?ral 

MAN 7, rue Ren? Viviani 44200 NANTES
Bureau : MAN ?tage 1 plateau B
Tel : +33 240128408 - Mobile : +33 671794593
www.ecologie.gouv.fr [1]

 		Secr?tariat g?n?ral

 MINIST?RES
TRANSITION ?COLOGIQUE
COH?SION DES TERRITOIRES
TRANSITION ?NERG?TIQUE
MER 

Le 03/05/2023 10:33, > etienne.trimaille a ?crit :

> This PR was about the symbology, but we noticed there are many other parts of the QGS file which are not backward compatible. 
> If I'm not wrong : 
> - a WMS shortname on a group made with QGIS 3.20 can not be read with QGIS 3.18. 
> - field server configuration made with QGIS 3.16 can not be read with QGIS 3.14 
> - ... 
> 
> These settings, (which are way older in the QGIS development, i.e already present in QGIS 2), are just lost when read with a lower version of QGIS. And obviously, all new features, options, checkbox etc are lost as well.
> 
> I understand, it's not easy to migrate a lot of softwares and to follow all their versions in a big organization. 
> But using a QGIS recent version to write a file and then ask a lower version QGIS to read is, anyway, leading to some reading issues I would say. The PR was indeed trying to keep some backward compatibility about symbology, which was nice, but there are other settings which are lost already, so I would be careful with other settings in general ;-) 
> 
> Just for your information, but I noticed these other settings as well ;-) 
> 
> Le mar. 2 mai 2023 ? 09:38, FERRATON Alain (Adjoint au chef de groupe) - SG/DNUM/MSP/DS/GSG via QGIS-Developer <qgis-developer at lists.osgeo.org> a ?crit : 
> 
> Hi Denis, 
> 
> Thanks for your feedback. 
> 
> I think that re-introducing backwards compatibility in QGIS 3.28 would be valuable for our services. The size of the project files is not too critical in my opinion compared to the size of the data files, which are usually much larger. 
> 
> Is this possible for QGIS 3.28.7? 
> 
> Alain
> 
> ---
> Alain FERRATON
> 
> Adjoint au chef de groupe
> MSP/DS/GSG
> Direction du num?rique | Secr?tariat g?n?ral 
> 
> MAN 7, rue Ren? Viviani 44200 NANTES
> Bureau : MAN ?tage 1 plateau B
> Tel : +33 240128408 - Mobile : +33 671794593
> www.ecologie.gouv.fr [1]
> 
> Secr?tariat g?n?ral
> 
> MINIST?RES
> TRANSITION ?COLOGIQUE
> COH?SION DES TERRITOIRES
> TRANSITION ?NERG?TIQUE
> MER 
> 
> Le 28/04/2023 10:02, > denis.rouzaud a ?crit : 
> 
> Hi Alain, 
> 
> Yes, the backward compatibility to 3.16 has been removed in 3.28, considering there was a LTR in between and that 3.16 was not maintained for more than a year. 
> 
> The PR is here https://github.com/qgis/QGIS/pull/45143 
> 
> I am not sure if it's possible to do it with a plugin. 
> An approach would be to revert this in the 3.28 branch to give more time. I have no strong opinion here. The main motivation to drop compatibility was the size of the project file and redundancy of information (manually editing the file gets harder). 
> 
> Denis 
> 
> Le jeu. 27 avr. 2023, 09:08, FERRATON Alain (Adjoint au chef de groupe) - SG/DNUM/MSP/DS/GSG via QGIS-Developer <qgis-developer at lists.osgeo.org> a ?crit : 
> 
> Hi 
> 
> A polygon layer saved in a project file with QGIS 3.28 is systematically opened in blue in QGIS 3.16 (the style is lost). 
> 
> There has been a change in the storage of style in project files introduced in QGIS 3.22. 
> 
> QGIS 3.22 save the style in both formats (<Option.../> 
> 
> and <prop k=.../> 
> 
> (see the attachment) 
> 
> This is no longer the case in QGIS 3.28 
> 
> We have a heterogeneous QGIS version park. The non backward compatibility of style is an important brake to migrate progressively our services to QGIS 3.28 
> 
> We could consider developing or having developed a plugin to ensure this backward compatibility.
> Is this possible? What would be the best way to proceed? Can we find documentation on the storage of styles in QGIS project files and on its evolution?
> (I didn't find anything relevant by searching on the internet). 
> 
> Sincerely,
> 
> -- 
> Alain FERRATON
> 
> Adjoint au chef de groupe
> MSP/DS/GSG
> Direction du num?rique | Secr?tariat g?n?ral 
> 
> MAN 7, rue Ren? Viviani 44200 NANTES
> Bureau : MAN ?tage 1 plateau B
> Tel : +33 240128408 - Mobile : +33 671794593
> www.ecologie.gouv.fr [1]
> 
> Secr?tariat g?n?ral
> 
> MINIST?RES
> TRANSITION ?COLOGIQUE
> COH?SION DES TERRITOIRES
> TRANSITION ?NERG?TIQUE
> MER 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
 _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer 

Links:
------
[1] https://www.ecologie.gouv.fr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230503/42838063/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: f30d6c6d.gif
Type: image/gif
Size: 305 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230503/42838063/attachment-0002.gif>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 546dad11.gif
Type: image/gif
Size: 350 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230503/42838063/attachment-0003.gif>

From anitagraser at gmx.at  Wed May  3 03:21:25 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Wed, 3 May 2023 12:21:25 +0200
Subject: [QGIS-Developer] Call for Grant Proposals 2023
In-Reply-To: <1683049105008.951775997.2939087606@gmx.at>
References: <trinity-1b66abaf-0bfe-40f2-87e8-e40b4a98d3cd-1682164745716@3c-app-gmx-bap24>
 <1683049105008.951775997.2939087606@gmx.at>
Message-ID: <trinity-2ed979a9-fd96-430b-a95b-04c8ec2330a4-1683109285881@3c-app-gmx-bap01>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230503/91737cf2/attachment.htm>

From maplabs at light42.com  Wed May  3 07:38:41 2023
From: maplabs at light42.com (Brian M Hamlin)
Date: Wed, 3 May 2023 07:38:41 -0700
Subject: [QGIS-Developer] QGIS Plugin rescue?
In-Reply-To: <76102a9a-b826-1b87-cfc6-9004844453f8@light42.com>
References: <76102a9a-b826-1b87-cfc6-9004844453f8@light42.com>
Message-ID: <956ed767-cdba-1549-a38a-1f4abd44f81b@light42.com>


Hi QGIS-dev

 ??? What are the chances of testing

https://datacube-qgis.readthedocs.io/en/latest/installation.html#prerequisites 


for #osgeolive Kosovo ?

possibly short work for someone who is familiar with QGIS plugins and 
compatibility..

test environment is *QGIS 3.28* + python 3.10 + datacube 1.8.9 [1]

YOU can make a difference !? please forward or let me know how to find 
the right people


update: this is work-in-progress to integrate Open Data Cube locally; 
steps to test

 ? * obtain and boot the project ISO image via the link below
 ? * in a terminal,$cd gisvm/bin ; sudo ./install_datacube.sh? ;? source 
~/.bashrc
 ? * launch QGIS 3.28
 ? * examine, build and install the Open Data Cube plugin, link above


 ? best regards from Berkeley, California? --Brian M Hamlin??? / 
MAPLABS? /? OSGeoLive PSC

--

[1] 
http://download.osgeo.org/livedvd/releases/16.0/osgeolive-16.0alpha3-amd64.iso
[2] https://trac.osgeo.org/osgeolive/report/10
[3] https://github.com/OSGeo/OSGeoLive/blob/master/CHANGES.txt#L4
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230503/2166eb99/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Wed May  3 19:46:39 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Thu, 4 May 2023 02:46:39 +0000
Subject: [QGIS-Developer] RuntimeError: wrapped C/C++ object of type
 QgsVectorLayer has been deleted
Message-ID: <a116a2ef643d475eba5e19c4e1028025@erdc.dren.mil>

I am trying to understand the general meaning of the message below.

RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted

I step through my code in the debugger and at some point my variable, aoi_layer, is longer assigned to a specific vector layer, though the value comes back as QgsVectorLayer since I have a watch on it.  I though maybe somehow it got set to "None", but it's not None.

I'd like to post code, but I'd have way to much code to post.  I am basically trying to override the map canvas events with an eventFIlter while I go through a drawing process.  I want a particular action to occur when I right click on the map canvas.  I am trying to override the map canvas from completing a drawing of a shape if the shape is too small, but it does not seem to override it. The shape is completed when I right click, so it seems like I have not overridden the event even though I capture the event using the code below:

    def eventFilter(self, source, event):
          if event.type() == QEvent.MouseButtonPress and event.button() == Qt.RightButton:
                        if self.valid_size(self.aoi_area):
                            aoi_layer_data_provider = self.aoi_layer.dataProvider()
                            self.aoi_feature.setGeometry(self.aoi_geometry)
                            aoi_layer_data_provider.addFeatures([self.aoi_feature])
                            self.aoi_layer.commitChanges()

                            self.aoi_layer.setExtent(self.aoi_feature.geometry().boundingBox())

                            self.add_area_perimeter()

                            self._refresh_and_zoom_to_layer(True)

                            self.AOI_SIZE_VALIDATOR_LABEL.close()
                            self.track_cursor = False
                            iface.mapCanvas().viewport().removeEventFilter(self)

    Return False

I initially had the return to be "return super().eventFilter(source, event)"

So the shape is completed and it adds it to the layer that is open for editing.  My function allows the drawing to continue because my check indicates the shape is not large enough so the commit should not happen unless the size is valid.

I can continue drawing but I right click on the map canvas it completes the drawing a second time, so now I have two rectangles, both with the same start position, but one larger than the other.  It is when I create a second layer to draw that I get the runtime error.

So I have two problems.  I don't seem to be completely overriding the build in event handler and QGIS is still completing the drawing when I right click. And somehow this may be contributing to the runtime error.

If I can understand in general how my object is deleted when I don't have any statement that deletes the object maybe I can figure it out the second issue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230504/c1d981fa/attachment.htm>

From r.nijssen at terglobo.nl  Wed May  3 23:34:02 2023
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Thu, 4 May 2023 08:34:02 +0200
Subject: [QGIS-Developer] Multiple python scripts in python console?
Message-ID: <8e2dfba5-a1cf-3529-97b9-85c565365c81@terglobo.nl>

Hi developers,

While writing a python script in the QGIS python console editor I needed 
to write a new class and for convenience I put that in its own python file.

Both files are in the same directory, but I cannot import my class in 
the other script.

Here's an example:


# script_1.py

from .script_2 import TestClass
obj1 = TestClass('Ray')
print(obj1)




# script_2.py:

class TestClass():

     def __init__(self, name):
         self.name = name

     def __str__(self):
         return f'TestClass[{self.name}]'



It all works properly if I put my class definition in script_1 but as 
the code is growing (and a customer of mine needs to understand this 
too) it would really be nice to split the code over multiple files.
Is there a way? Or another approach?

Kind regards,
Raymond

From benjamin.jakimow at geo.hu-berlin.de  Thu May  4 00:21:04 2023
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Thu, 4 May 2023 09:21:04 +0200
Subject: [QGIS-Developer] RuntimeError: wrapped C/C++ object of type
 QgsVectorLayer has been deleted
In-Reply-To: <a116a2ef643d475eba5e19c4e1028025@erdc.dren.mil>
References: <a116a2ef643d475eba5e19c4e1028025@erdc.dren.mil>
Message-ID: <b3f7fd1e-7abd-21cd-6e98-ffbb3f808ae9@geo.hu-berlin.de>

Hi Luke,

to my experience the "RuntimeError: wrapped C/C++ object of type 
QgsVectorLayer has been deleted" is raised when the C++ QgsVectorLayer 
has been deleted by a parent class.
This is often a QgsMapLayerStore, for example the 
QgsProject.instance().mapLayerStore(), from which a layer gets removed 
when it is removed from the layer tree.

In that case your self.aoi_layer python reference still exists, but not 
the underlying C++ object.

You could ensure that the aoi_layer is not removed from the layer store 
it is stored in, for example using QgsLayerStore::takeMapLayer(layer) 
instead QgsLayerStore::removeMapLayer(layer).
Or save the aoi_layer_id and test in your eventFilter, if the aoi_layer 
instance still exists:

aoi_layer = self.project().mapLayers().get(self.aoi_layer_id)

if isinstance(aoi_layer, QgsMapLayer):
 ?? aoi_layer_data_provider = aoi_layer.dataProvider()

 ? ...


Greetings,

Benjamin

Am 04.05.2023 um 04:46 schrieb Catania, Luke A ERDC-RDE-GRL-VA CIV via 
QGIS-Developer:
>
> I am trying to understand the general meaning of the message below.
>
> RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted
>
> I step through my code in the debugger and at some point my variable, 
> aoi_layer, is longer assigned to a specific vector layer, though the 
> value comes back as QgsVectorLayer since I have a watch on it.? I 
> though maybe somehow it got set to ?None?, but it?s not None.
>
> I?d like to post code, but I?d have way to much code to post.? I am 
> basically trying to override the map canvas events with an eventFIlter 
> while I go through a drawing process.? I want a particular action to 
> occur when I right click on the map canvas.? I am trying to override 
> the map canvas from completing a drawing of a shape if the shape is 
> too small, but it does not seem to override it. The shape is completed 
> when I right click, so it seems like I have not overridden the event 
> even though I capture the event using the code below:
>
> ? ? def eventFilter(self, source, event):
>
> ? ? ? ? ? if event.type() == QEvent.MouseButtonPress and 
> event.button() == Qt.RightButton:
>
> ? ? ? ? ? ? ? ? ? ? ? ? if self.valid_size(self.aoi_area):
>
> aoi_layer_data_provider = self.aoi_layer.dataProvider()
>
> self.aoi_feature.setGeometry(self.aoi_geometry)
>
> aoi_layer_data_provider.addFeatures([self.aoi_feature])
>
> self.aoi_layer.commitChanges()
>
> self.aoi_layer.setExtent(self.aoi_feature.geometry().boundingBox())
>
> self.add_area_perimeter()
>
> self._refresh_and_zoom_to_layer(True)
>
> self.AOI_SIZE_VALIDATOR_LABEL.close()
>
> self.track_cursor = False
>
> iface.mapCanvas().viewport().removeEventFilter(self)
>
> ??? Return False
>
> I initially had the return to be ?return super().eventFilter(source, 
> event)?
>
> So the shape is completed and it adds it to the layer that is open for 
> editing.? My function allows the drawing to continue because my check 
> indicates the shape is not large enough so the commit should not 
> happen unless the size is valid.
>
> I can continue drawing but I right click on the map canvas it 
> completes the drawing a second time, so now I have two rectangles, 
> both with the same start position, but one larger than the other.? It 
> is when I create a second layer to draw that I get the runtime error.
>
> So I have two problems.? I don?t seem to be completely overriding the 
> build in event handler and QGIS is still completing the drawing when I 
> right click. And somehow this may be contributing to the runtime error.
>
> If I can understand in general how my object is deleted when I don?t 
> have any statement that deletes the object maybe I can figure it out 
> the second issue.
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Dr. Benjamin Jakimow
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu Berlin

e-mail:benjamin.jakimow at geo.hu-berlin.de
web:https://hu-berlin.de/eo-lab
phone:  +49 (0) 30 2093 6846
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'211
linkedin:https://www.linkedin.com/in/benjamin-jakimow
matrix: @jakimowb:hu-berlin.de
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230504/42da30c7/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4745 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230504/42da30c7/attachment-0001.bin>

From etienne.trimaille at gmail.com  Thu May  4 02:29:17 2023
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Thu, 4 May 2023 11:29:17 +0200
Subject: [QGIS-Developer] Multiple python scripts in python console?
In-Reply-To: <8e2dfba5-a1cf-3529-97b9-85c565365c81@terglobo.nl>
References: <8e2dfba5-a1cf-3529-97b9-85c565365c81@terglobo.nl>
Message-ID: <CAMtDFLJNGaThX2H3=uWrDSanew7XUx+5RAKp-R2gE0sDQXRO=w@mail.gmail.com>

If you are talking about the simple Python console panel, and loading
Python files from there, then you can skip the " from .script_2 import
TestClass".

If you notice, when you launch the script_2.py, you have a generated line
similar to :
exec(Path('/tmp/tmp5g244g4w.py').read_text())

So it's reading and executing all the content of file 2 in the console
context already.
So then, when file 1 will be executed, there will already be the class
TestClass in the console context.

But, then to manage multiple files, it's not convenient. You should think
about the smallest plugin, for instance
https://github.com/wonder-sk/qgis-minimal-plugin Otherwise, it's difficult
to manage IMHO.

Le jeu. 4 mai 2023 ? 08:59, Raymond Nijssen via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hi developers,
>
> While writing a python script in the QGIS python console editor I needed
> to write a new class and for convenience I put that in its own python file.
>
> Both files are in the same directory, but I cannot import my class in
> the other script.
>
> Here's an example:
>
>
> # script_1.py
>
> from .script_2 import TestClass
> obj1 = TestClass('Ray')
> print(obj1)
>
>
>
>
> # script_2.py:
>
> class TestClass():
>
>      def __init__(self, name):
>          self.name = name
>
>      def __str__(self):
>          return f'TestClass[{self.name}]'
>
>
>
> It all works properly if I put my class definition in script_1 but as
> the code is growing (and a customer of mine needs to understand this
> too) it would really be nice to split the code over multiple files.
> Is there a way? Or another approach?
>
> Kind regards,
> Raymond
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230504/0cf83382/attachment.htm>

From r.nijssen at terglobo.nl  Thu May  4 07:02:18 2023
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Thu, 4 May 2023 16:02:18 +0200
Subject: [QGIS-Developer] Multiple python scripts in python console?
In-Reply-To: <CAMtDFLJNGaThX2H3=uWrDSanew7XUx+5RAKp-R2gE0sDQXRO=w@mail.gmail.com>
References: <8e2dfba5-a1cf-3529-97b9-85c565365c81@terglobo.nl>
 <CAMtDFLJNGaThX2H3=uWrDSanew7XUx+5RAKp-R2gE0sDQXRO=w@mail.gmail.com>
Message-ID: <7cdffc30-1e57-d920-f60f-ef17d442739a@terglobo.nl>

Hi Etienne,

Already tried what you are describing. Indeed it's inconvenient, and 
sometimes the changes in the class code did not end up in the class 
definition. For example, a newly defined function on the class was 
unknown in script_1. Might be a bug, but I'm not even sure.

So the best way should be to tell QGIS to run another python script in 
the console. Or go the plugin way.

Thanks and kind regards,

Raymond


On 04-05-2023 11:29, Etienne Trimaille wrote:
> If you are talking about the simple Python console panel, and loading 
> Python files from there, then you can skip the " from .script_2 import 
> TestClass".
> 
> If you notice, when you launch the script_2.py, you have a generated 
> line similar to :
> exec(Path('/tmp/tmp5g244g4w.py').read_text())
> 
> So it's reading and executing all the content of file 2 in the console 
> context already.
> So then, when file 1 will be executed, there will already be the class 
> TestClass in the console context.
> 
> But, then to manage multiple files, it's not convenient. You should 
> think about the smallest plugin, for instance 
> https://github.com/wonder-sk/qgis-minimal-plugin 
> <https://github.com/wonder-sk/qgis-minimal-plugin> Otherwise, it's 
> difficult to manage IMHO.
> 
> Le?jeu. 4 mai 2023 ??08:59, Raymond Nijssen via QGIS-Developer 
> <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>> 
> a ?crit?:
> 
>     Hi developers,
> 
>     While writing a python script in the QGIS python console editor I
>     needed
>     to write a new class and for convenience I put that in its own
>     python file.
> 
>     Both files are in the same directory, but I cannot import my class in
>     the other script.
> 
>     Here's an example:
> 
> 
>     # script_1.py
> 
>     from .script_2 import TestClass
>     obj1 = TestClass('Ray')
>     print(obj1)
> 
> 
> 
> 
>     # script_2.py:
> 
>     class TestClass():
> 
>      ? ? ?def __init__(self, name):
>     self.name <http://self.name> = name
> 
>      ? ? ?def __str__(self):
>      ? ? ? ? ?return f'TestClass[{self.name <http://self.name>}]'
> 
> 
> 
>     It all works properly if I put my class definition in script_1 but as
>     the code is growing (and a customer of mine needs to understand this
>     too) it would really be nice to split the code over multiple files.
>     Is there a way? Or another approach?
> 
>     Kind regards,
>     Raymond
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 

From etienne.trimaille at gmail.com  Thu May  4 08:21:32 2023
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Thu, 4 May 2023 17:21:32 +0200
Subject: [QGIS-Developer] Multiple python scripts in python console?
In-Reply-To: <7cdffc30-1e57-d920-f60f-ef17d442739a@terglobo.nl>
References: <8e2dfba5-a1cf-3529-97b9-85c565365c81@terglobo.nl>
 <CAMtDFLJNGaThX2H3=uWrDSanew7XUx+5RAKp-R2gE0sDQXRO=w@mail.gmail.com>
 <7cdffc30-1e57-d920-f60f-ef17d442739a@terglobo.nl>
Message-ID: <CAMtDFLLmhYzNfzPgzS5u+kZQ6JtSR+bm_WUTdnLwRfgdBBLJyw@mail.gmail.com>

> For example, a newly defined function on the class was
> unknown in script_1. Might be a bug, but I'm not even sure.

Well, for me it works without any issue.
But you need to re-execute the script_2.py in the Python console, it will
refresh the class definition in the Python console context then you can
execute script_1 again.

But indeed, you are reaching the limit of using the Python console like
this ...


Le jeu. 4 mai 2023 ? 16:02, Raymond Nijssen <r.nijssen at terglobo.nl> a
?crit :

> Hi Etienne,
>
> Already tried what you are describing. Indeed it's inconvenient, and
> sometimes the changes in the class code did not end up in the class
> definition. For example, a newly defined function on the class was
> unknown in script_1. Might be a bug, but I'm not even sure.
>
> So the best way should be to tell QGIS to run another python script in
> the console. Or go the plugin way.
>
> Thanks and kind regards,
>
> Raymond
>
>
> On 04-05-2023 11:29, Etienne Trimaille wrote:
> > If you are talking about the simple Python console panel, and loading
> > Python files from there, then you can skip the " from .script_2 import
> > TestClass".
> >
> > If you notice, when you launch the script_2.py, you have a generated
> > line similar to :
> > exec(Path('/tmp/tmp5g244g4w.py').read_text())
> >
> > So it's reading and executing all the content of file 2 in the console
> > context already.
> > So then, when file 1 will be executed, there will already be the class
> > TestClass in the console context.
> >
> > But, then to manage multiple files, it's not convenient. You should
> > think about the smallest plugin, for instance
> > https://github.com/wonder-sk/qgis-minimal-plugin
> > <https://github.com/wonder-sk/qgis-minimal-plugin> Otherwise, it's
> > difficult to manage IMHO.
> >
> > Le jeu. 4 mai 2023 ? 08:59, Raymond Nijssen via QGIS-Developer
> > <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>>
>
> > a ?crit :
> >
> >     Hi developers,
> >
> >     While writing a python script in the QGIS python console editor I
> >     needed
> >     to write a new class and for convenience I put that in its own
> >     python file.
> >
> >     Both files are in the same directory, but I cannot import my class in
> >     the other script.
> >
> >     Here's an example:
> >
> >
> >     # script_1.py
> >
> >     from .script_2 import TestClass
> >     obj1 = TestClass('Ray')
> >     print(obj1)
> >
> >
> >
> >
> >     # script_2.py:
> >
> >     class TestClass():
> >
> >           def __init__(self, name):
> >     self.name <http://self.name> = name
> >
> >           def __str__(self):
> >               return f'TestClass[{self.name <http://self.name>}]'
> >
> >
> >
> >     It all works properly if I put my class definition in script_1 but as
> >     the code is growing (and a customer of mine needs to understand this
> >     too) it would really be nice to split the code over multiple files.
> >     Is there a way? Or another approach?
> >
> >     Kind regards,
> >     Raymond
> >     _______________________________________________
> >     QGIS-Developer mailing list
> >     QGIS-Developer at lists.osgeo.org <mailto:
> QGIS-Developer at lists.osgeo.org>
> >     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> >     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230504/7238518b/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Thu May  4 11:05:08 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Thu, 4 May 2023 18:05:08 +0000
Subject: [QGIS-Developer] RuntimeError: wrapped C/C++ object of type
 QgsVectorLayer has been deleted
In-Reply-To: <b3f7fd1e-7abd-21cd-6e98-ffbb3f808ae9@geo.hu-berlin.de>
References: <a116a2ef643d475eba5e19c4e1028025@erdc.dren.mil>
 <b3f7fd1e-7abd-21cd-6e98-ffbb3f808ae9@geo.hu-berlin.de>
Message-ID: <44846bb0f93841d6871f4f38fe835cc1@erdc.dren.mil>

Thanks.  I?m just trying to figure out how this happens because I don?t remove the layer from the map.  It?s actually initially added as an empty layer and then the geometry is added and then the changes are committed, so I never remove it.  I?ll review my code again to see if I do anything odd.

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of Benjamin Jakimow via QGIS-Developer
Sent: Thursday, May 4, 2023 3:21 AM
To: qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted


Hi Luke,

to my experience the "RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted" is raised when the C++ QgsVectorLayer has been deleted by a parent class.
This is often a QgsMapLayerStore, for example the QgsProject.instance().mapLayerStore(), from which a layer gets removed when it is removed from the layer tree.

In that case your self.aoi_layer python reference still exists, but not the underlying C++ object.

You could ensure that the aoi_layer is not removed from the layer store it is stored in, for example using QgsLayerStore::takeMapLayer(layer) instead QgsLayerStore::removeMapLayer(layer).
Or save the aoi_layer_id and test in your eventFilter, if the aoi_layer instance still exists:

aoi_layer = self.project().mapLayers().get(self.aoi_layer_id)

if isinstance(aoi_layer, QgsMapLayer):
   aoi_layer_data_provider = aoi_layer.dataProvider()

  ...



Greetings,

Benjamin
Am 04.05.2023 um 04:46 schrieb Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer:
I am trying to understand the general meaning of the message below.

RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted

I step through my code in the debugger and at some point my variable, aoi_layer, is longer assigned to a specific vector layer, though the value comes back as QgsVectorLayer since I have a watch on it.  I though maybe somehow it got set to ?None?, but it?s not None.

I?d like to post code, but I?d have way to much code to post.  I am basically trying to override the map canvas events with an eventFIlter while I go through a drawing process.  I want a particular action to occur when I right click on the map canvas.  I am trying to override the map canvas from completing a drawing of a shape if the shape is too small, but it does not seem to override it. The shape is completed when I right click, so it seems like I have not overridden the event even though I capture the event using the code below:

    def eventFilter(self, source, event):
          if event.type() == QEvent.MouseButtonPress and event.button() == Qt.RightButton:
                        if self.valid_size(self.aoi_area):
                            aoi_layer_data_provider = self.aoi_layer.dataProvider()
                            self.aoi_feature.setGeometry(self.aoi_geometry)
                            aoi_layer_data_provider.addFeatures([self.aoi_feature])
                            self.aoi_layer.commitChanges()

                            self.aoi_layer.setExtent(self.aoi_feature.geometry().boundingBox())

                            self.add_area_perimeter()

                            self._refresh_and_zoom_to_layer(True)

                            self.AOI_SIZE_VALIDATOR_LABEL.close()
                            self.track_cursor = False
                            iface.mapCanvas().viewport().removeEventFilter(self)

    Return False

I initially had the return to be ?return super().eventFilter(source, event)?

So the shape is completed and it adds it to the layer that is open for editing.  My function allows the drawing to continue because my check indicates the shape is not large enough so the commit should not happen unless the size is valid.

I can continue drawing but I right click on the map canvas it completes the drawing a second time, so now I have two rectangles, both with the same start position, but one larger than the other.  It is when I create a second layer to draw that I get the runtime error.

So I have two problems.  I don?t seem to be completely overriding the build in event handler and QGIS is still completing the drawing when I right click. And somehow this may be contributing to the runtime error.

If I can understand in general how my object is deleted when I don?t have any statement that deletes the object maybe I can figure it out the second issue.



_______________________________________________

QGIS-Developer mailing list

QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>

List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

--

Dr. Benjamin Jakimow

Earth Observation Lab | Geography Department | Humboldt-Universit?t zu Berlin



e-mail: benjamin.jakimow at geo.hu-berlin.de<mailto:benjamin.jakimow at geo.hu-berlin.de>

web:    Blockedhttps://hu-berlin.de/eo-labBlocked

phone:  +49 (0) 30 2093 6846

mobile: +49 (0) 157 5656 8477

fax:    +49 (0) 30 2093 6848

mail:   Unter den Linden 6 | 10099 Berlin | Germany

room: 2'211

linkedin: Blockedhttps://www.linkedin.com/in/benjamin-jakimowBlocked

matrix: @jakimowb:hu-berlin.de
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230504/0086854d/attachment-0001.htm>

From anitagraser at gmx.at  Thu May  4 11:44:30 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Thu, 4 May 2023 20:44:30 +0200
Subject: [QGIS-Developer] 2023 grant applications are now closed
References: <trinity-1b66abaf-0bfe-40f2-87e8-e40b4a98d3cd-1682164745716@3c-app-gmx-bap24>
 <1683049105008.951775997.2939087606@gmx.at>
 <trinity-2ed979a9-fd96-430b-a95b-04c8ec2330a4-1683109285881@3c-app-gmx-bap01>
Message-ID: <trinity-7a78fdc5-6c55-4957-8f24-7acc92dce802-1683225870026@3c-app-gmx-bs19>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230504/7c745db0/attachment.htm>

From nyall.dawson at gmail.com  Thu May  4 13:08:08 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 5 May 2023 06:08:08 +1000
Subject: [QGIS-Developer] 2023 grant applications are now closed
In-Reply-To: <trinity-7a78fdc5-6c55-4957-8f24-7acc92dce802-1683225870026@3c-app-gmx-bs19>
References: <trinity-1b66abaf-0bfe-40f2-87e8-e40b4a98d3cd-1682164745716@3c-app-gmx-bap24>
 <1683049105008.951775997.2939087606@gmx.at>
 <trinity-2ed979a9-fd96-430b-a95b-04c8ec2330a4-1683109285881@3c-app-gmx-bap01>
 <trinity-7a78fdc5-6c55-4957-8f24-7acc92dce802-1683225870026@3c-app-gmx-bs19>
Message-ID: <CAB28Ash29WTnD8OhZ-At02ZeNA0zTDW3VCStJbyjL0vYqFJ1Zw@mail.gmail.com>

Thanks Anita!

On Fri, 5 May 2023, 4:44 am Anita Graser via QGIS-Developer, <
qgis-developer at lists.osgeo.org> wrote:

>
> 8. Unify the geometric and topological verification and correction
> features in QGIS -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/262
>

This link points to a different proposal, and I can't work out which is the
correct one. Was a qep submitted for this grant?

Nyall

>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/2f4e7042/attachment.htm>

From huyminh.nguyen at here.com  Thu May  4 13:38:48 2023
From: huyminh.nguyen at here.com (Nguyen, Huy Minh)
Date: Thu, 4 May 2023 20:38:48 +0000
Subject: [QGIS-Developer] [EXTERNAL] Re: Outdated WebKit engine version
 in QGIS
In-Reply-To: <CAJfCvR=CFLB_M0zgUiZGDAbYffvMKM8EVo=MT7CBMDYpOGp_Tg@mail.gmail.com>
References: <AS1PR04MB95823B43884FAD5E74475AADE9629@AS1PR04MB9582.eurprd04.prod.outlook.com>
 <CAB28Asi-PErekmjoidBdEdtw4PhtXqGYe1gJQ=QN68ZUVR0Tfw@mail.gmail.com>
 <PA4PR04MB95902878813CA71B1F027812E9629@PA4PR04MB9590.eurprd04.prod.outlook.com>
 <CAB28AsjWqr4XDmGpptrVCiTXn2PeyPQkDj8zTJ_St1E3fjgH1g@mail.gmail.com>
 <CAJfCvR=CFLB_M0zgUiZGDAbYffvMKM8EVo=MT7CBMDYpOGp_Tg@mail.gmail.com>
Message-ID: <PA4PR04MB959012A12360A9DCFF5B78B0E96D9@PA4PR04MB9590.eurprd04.prod.outlook.com>

Thanks for the infos.

After some trial and error, I am able to use QtWebEngine as Qt QML component in python in QGIS 3.26.3 and QGIS 3.30.1 out-of-the-box. Example from Qt docs works as expected https://doc.qt.io/qt-5/qml-qtwebengine-webengineview.html

This approach doesn't work on macOS however. It shows QML errors module "QtWebEngine" is not installed, module "QtQuick.Window" is not installed . I think that this is due to lack of certain library in the QGIS bundle in macOS, similar to https://github.com/qgis/QGIS-Mac-Packager/issues/122. If this could be addressed for macOS, I think that using QtWebEngine as QML component in QGIS could be a notable alternative.


Regards,
Minh


From: Yoann Quenach de Quivillic <yoann.quenach at gmail.com>
Sent: Thursday, April 20, 2023 9:17 AM
To: Nyall Dawson <nyall.dawson at gmail.com>
Cc: Nguyen, Huy Minh <huyminh.nguyen at here.com>; qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] [EXTERNAL] Re: Outdated WebKit engine version in QGIS

Sie erhalten nicht oft eine E-Mail von yoann.quenach at gmail.com<mailto:yoann.quenach at gmail.com>. Erfahren Sie, warum dies wichtig ist<https://aka.ms/LearnAboutSenderIdentification>
FYI, here's a (probably) related Qt bug report, but unfortunately it has not seen much activity lately: https://bugreports.qt.io/plugins/servlet/mobile#issue/QTBUG-85492.

Le jeu. 20 avr. 2023 ? 00:31, Nyall Dawson via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> a ?crit :
On Wed, 19 Apr 2023 at 16:55, Nguyen, Huy Minh <huyminh.nguyen at here.com<mailto:huyminh.nguyen at here.com>> wrote:
>
> Hi,
>
> If Qt Webengine is in QGIS why it cannot be used ? Is there maybe any Qgs class that uses Qt Webengine internally and can be reused ?

It's not in QGIS. It's in Qt, but can't be used from QGIS. QtWebengine
requires some initialization steps before construction of the
QApplication used by QGIS, and unfortunately these steps introduce an
incompatibility in OpenGL handling which breaks the QGIS 3D
functionality.

Pending an upstream Qt / Webengine fix we can't resolve this
situation, and Qt Webengine is not a possibility for use in QGIS.

Nyall


>
> Minh
>
>
> -----Original Message-----
> From: Nyall Dawson <nyall.dawson at gmail.com<mailto:nyall.dawson at gmail.com>>
> Sent: Wednesday, April 19, 2023 7:28 AM
> To: Nguyen, Huy Minh <huyminh.nguyen at here.com<mailto:huyminh.nguyen at here.com>>
> Cc: qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
> Subject: [EXTERNAL] Re: [QGIS-Developer] Outdated WebKit engine version in QGIS
>
>
> On Wed, 19 Apr 2023 at 15:24, Nguyen, Huy Minh via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> wrote:
> >
> > Hi,
> >
> >
> >
> > I have been using WebKit engine from the PyQt library built in QGIS 3.30 when developing QGIS plugin in Python to load web pages directly in QGIS. The Webkit engine used seems to be very outdated and not possible to render modern web pages. For example, the engine used in QGIS 3.30 dated back to 2016: AppleWebKit/602.1 (KHTML, like Gecko) QGIS3 Version/10.0 Safari/602.1.
> >
> >
> >
> > Is there any chance to update the built-in Webkit engine version in next release of QGIS ?
> >
> > Otherwise, can the WebKit engine be updated locally and provided to the application ?
> >
> > Does QGIS offer any other built-in alternatives, like the Qt WebEngine or other web engine with python bindings ?
>
> It's an extremely messy and painful situation, but ultimately the answer is NO. There's no alternative, no way of updating the webkit version used by QtWebkit, and Qt Webengine CANNOT be used as it stands in QGIS.
>
> Nyall
>
> >
> >
> >
> > Thank you,
> >
> > Minh
> >
> >
> >
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
> > List info:
> > https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flist<https://list/>
> > s.osgeo.org<http://s.osgeo.org/>%2Fmailman%2Flistinfo%2Fqgis-developer&data=05%7C01%7Chuymi
> > nh.nguyen%40here.com<http://40here.com/>%7C83865261759a4e94b02808db4096e273%7C6d4034cd7225
> > 4f72b85391feaea64919%7C0%7C0%7C638174789008955324%7CUnknown%7CTWFpbGZs
> > b3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D
> > %7C3000%7C%7C%7C&sdata=zsajlNbGjcZdZMAp%2BnBCgSAP1Tap5O6Ni8WbFSvKsuE%3
> > D&reserved=0
> > Unsubscribe:
> > https://eur02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flist<https://list/>
> > s.osgeo.org<http://s.osgeo.org/>%2Fmailman%2Flistinfo%2Fqgis-developer&data=05%7C01%7Chuymi
> > nh.nguyen%40here.com<http://40here.com/>%7C83865261759a4e94b02808db4096e273%7C6d4034cd7225
> > 4f72b85391feaea64919%7C0%7C0%7C638174789008955324%7CUnknown%7CTWFpbGZs
> > b3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D
> > %7C3000%7C%7C%7C&sdata=zsajlNbGjcZdZMAp%2BnBCgSAP1Tap5O6Ni8WbFSvKsuE%3
> > D&reserved=0
> LEARN FAST: This email originated outside of HERE.
> Please do not click on links or open attachments unless you recognize the sender and know the content is safe. Thank you.
>
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230504/d52f7198/attachment-0001.htm>

From Luke.A.Catania at erdc.dren.mil  Thu May  4 17:14:39 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Fri, 5 May 2023 00:14:39 +0000
Subject: [QGIS-Developer] RuntimeError: wrapped C/C++ object of type
 QgsVectorLayer has been deleted
In-Reply-To: <44846bb0f93841d6871f4f38fe835cc1@erdc.dren.mil>
References: <a116a2ef643d475eba5e19c4e1028025@erdc.dren.mil>
 <b3f7fd1e-7abd-21cd-6e98-ffbb3f808ae9@geo.hu-berlin.de>
 <44846bb0f93841d6871f4f38fe835cc1@erdc.dren.mil>
Message-ID: <3e719e5ec02245e2a8d1a7c2eadb8dd6@erdc.dren.mil>

So I discarded my changes and started over and I also changed the event to end the drawing from the left mouse button to the middle and managed to avoid the deleted object error.  I tested a multitude of shape drawings and clicking the middle button to end my edit session when the size is not large enough and it ignores ending the edit session and completing the polygon until I middle click and the size is valid.

If I change the event to the right mouse button I get the error again, so this is making me believe that I am not fully overriding the event for the right mouse button and it works for the middle button because the map canvas does not use the middle mouse button for any event when a feature is being drawn.

While this great that it works with middle mouse button, I want the edit session to stop when the user clicks right not middle as that is the way QGIS works for completing an edit session.

This is vert frustrating. ?

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer
Sent: Thursday, May 4, 2023 2:05 PM
To: Benjamin Jakimow <benjamin.jakimow at geo.hu-berlin.de>; qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted

Thanks.  I?m just trying to figure out how this happens because I don?t remove the layer from the map.  It?s actually initially added as an empty layer and then the geometry is added and then the changes are committed, so I never remove it.  I?ll review my code again to see if I do anything odd.

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org<mailto:qgis-developer-bounces at lists.osgeo.org>> On Behalf Of Benjamin Jakimow via QGIS-Developer
Sent: Thursday, May 4, 2023 3:21 AM
To: qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted


Hi Luke,

to my experience the "RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted" is raised when the C++ QgsVectorLayer has been deleted by a parent class.
This is often a QgsMapLayerStore, for example the QgsProject.instance().mapLayerStore(), from which a layer gets removed when it is removed from the layer tree.

In that case your self.aoi_layer python reference still exists, but not the underlying C++ object.

You could ensure that the aoi_layer is not removed from the layer store it is stored in, for example using QgsLayerStore::takeMapLayer(layer) instead QgsLayerStore::removeMapLayer(layer).
Or save the aoi_layer_id and test in your eventFilter, if the aoi_layer instance still exists:

aoi_layer = self.project().mapLayers().get(self.aoi_layer_id)

if isinstance(aoi_layer, QgsMapLayer):
   aoi_layer_data_provider = aoi_layer.dataProvider()

  ...



Greetings,

Benjamin
Am 04.05.2023 um 04:46 schrieb Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer:
I am trying to understand the general meaning of the message below.

RuntimeError: wrapped C/C++ object of type QgsVectorLayer has been deleted

I step through my code in the debugger and at some point my variable, aoi_layer, is longer assigned to a specific vector layer, though the value comes back as QgsVectorLayer since I have a watch on it.  I though maybe somehow it got set to ?None?, but it?s not None.

I?d like to post code, but I?d have way to much code to post.  I am basically trying to override the map canvas events with an eventFIlter while I go through a drawing process.  I want a particular action to occur when I right click on the map canvas.  I am trying to override the map canvas from completing a drawing of a shape if the shape is too small, but it does not seem to override it. The shape is completed when I right click, so it seems like I have not overridden the event even though I capture the event using the code below:

    def eventFilter(self, source, event):
          if event.type() == QEvent.MouseButtonPress and event.button() == Qt.RightButton:
                        if self.valid_size(self.aoi_area):
                            aoi_layer_data_provider = self.aoi_layer.dataProvider()
                            self.aoi_feature.setGeometry(self.aoi_geometry)
                            aoi_layer_data_provider.addFeatures([self.aoi_feature])
                            self.aoi_layer.commitChanges()

                            self.aoi_layer.setExtent(self.aoi_feature.geometry().boundingBox())

                            self.add_area_perimeter()

                            self._refresh_and_zoom_to_layer(True)

                            self.AOI_SIZE_VALIDATOR_LABEL.close()
                            self.track_cursor = False
                            iface.mapCanvas().viewport().removeEventFilter(self)

    Return False

I initially had the return to be ?return super().eventFilter(source, event)?

So the shape is completed and it adds it to the layer that is open for editing.  My function allows the drawing to continue because my check indicates the shape is not large enough so the commit should not happen unless the size is valid.

I can continue drawing but I right click on the map canvas it completes the drawing a second time, so now I have two rectangles, both with the same start position, but one larger than the other.  It is when I create a second layer to draw that I get the runtime error.

So I have two problems.  I don?t seem to be completely overriding the build in event handler and QGIS is still completing the drawing when I right click. And somehow this may be contributing to the runtime error.

If I can understand in general how my object is deleted when I don?t have any statement that deletes the object maybe I can figure it out the second issue.


_______________________________________________

QGIS-Developer mailing list

QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>

List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

--

Dr. Benjamin Jakimow

Earth Observation Lab | Geography Department | Humboldt-Universit?t zu Berlin



e-mail: benjamin.jakimow at geo.hu-berlin.de<mailto:benjamin.jakimow at geo.hu-berlin.de>

web:    Blockedhttps://hu-berlin.de/eo-labBlocked

phone:  +49 (0) 30 2093 6846

mobile: +49 (0) 157 5656 8477

fax:    +49 (0) 30 2093 6848

mail:   Unter den Linden 6 | 10099 Berlin | Germany

room: 2'211

linkedin: Blockedhttps://Blockedwww.linkedin.com/in/benjamin-jakimowBlockedBlocked

matrix: @jakimowb:hu-berlin.de
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/e4744340/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Thu May  4 20:17:20 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Fri, 5 May 2023 03:17:20 +0000
Subject: [QGIS-Developer] Override mouse events in Shape Digitizing Toolbar
Message-ID: <2699016255de4e90b06e700b547e778a@erdc.dren.mil>

I have made a few posts here, so this might sound a bit repetitive, but specifies the specific QGIS tool I am using.

I want to override the right mouse click when using the Shape Digitizing Toolbar to end an edit session. I don't want it to end the session unless the shape is if of a specific size.  I tried getting the items on the canvas as the simplest way to get the shape as it is being drawn before becoming a permanent layer based on response to another post I made but I can only get rectangles.  Circles don't seem to return the geometry when getting the canvas QgsGeometryRubberband objects.

I also have installed an event filter on the canvas that handles getting the size of the object being drawn.  It's become a bit of a monster of code, but it works other than when right clicking to end the edit session.  I want to end it on my terms not the terms of what is the Shape Digitizing Toolbar which is just close the edit session and complete the shape.  I can get it to work with a middle mouse click, but I want it to work with the Right mouse and it does not seem my event filter will stop the Shape Digitizing Toolbar from firing it's own end edit session.

Thanks again for the support.  Luke
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/967db29d/attachment-0001.htm>

From lbartoletti at tuxfamily.org  Thu May  4 21:30:51 2023
From: lbartoletti at tuxfamily.org (=?UTF-8?Q?Lo=c3=afc_Bartoletti?=)
Date: Fri, 5 May 2023 06:30:51 +0200
Subject: [QGIS-Developer] 2023 grant applications are now closed
In-Reply-To: <CAB28Ash29WTnD8OhZ-At02ZeNA0zTDW3VCStJbyjL0vYqFJ1Zw@mail.gmail.com>
References: <trinity-1b66abaf-0bfe-40f2-87e8-e40b4a98d3cd-1682164745716@3c-app-gmx-bap24>
 <1683049105008.951775997.2939087606@gmx.at>
 <trinity-2ed979a9-fd96-430b-a95b-04c8ec2330a4-1683109285881@3c-app-gmx-bap01>
 <trinity-7a78fdc5-6c55-4957-8f24-7acc92dce802-1683225870026@3c-app-gmx-bs19>
 <CAB28Ash29WTnD8OhZ-At02ZeNA0zTDW3VCStJbyjL0vYqFJ1Zw@mail.gmail.com>
Message-ID: <64494f62-1603-de92-7022-7cb15fa34ae3@tuxfamily.org>

Hi,

On 04/05/2023 22:08, Nyall Dawson via QGIS-Developer wrote:
> Thanks Anita!
>
> On Fri, 5 May 2023, 4:44 am Anita Graser via QGIS-Developer, 
> <qgis-developer at lists.osgeo.org> wrote:
>
>
>     8. Unify the geometric and topological verification and correction
>     features in QGIS -
>     https://github.com/qgis/QGIS-Enhancement-Proposals/issues/262
>
>
> This link points to a different proposal, and I can't work out which 
> is the correct one. Was a qep submitted for this grant?
>
It's https://github.com/qgis/QGIS-Enhancement-Proposals/issues/236

Sorry, if I miscopied the link :/

> Nyall
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/9649e286/attachment.htm>

From michel.stuyts at edegem.be  Fri May  5 01:21:17 2023
From: michel.stuyts at edegem.be (Michel Stuyts)
Date: Fri, 5 May 2023 08:21:17 +0000
Subject: [QGIS-Developer] Profiler times in Python
Message-ID: <DB9PR01MB924746041D9F89145EFC0F92FC729@DB9PR01MB9247.eurprd01.prod.exchangelabs.com>

I want to use the data on plugins from the Profiler.  In the "Debugging/Development Tools" Panel I can see both the total time for all plugins and the individual time per plugin.  With the following Python code, I want to get the same data in Python:

profiler = QgsApplication.profiler()
for child in profiler.childGroups():
    childGroup = profiler.childGroups(child)
    if child == 'Load plugins':
        print(child, profiler.profileTime(child))
        for subGroup in childGroup:
            print(subGroup, profiler.profileTime(subGroup))

It shows the total time for all plugins just fine as "Load plugins" with the same number of seconds as in the Panel, but for the individual plugins I get 0.0 as time for all plugins.  What do I do wrong or is it a bug?


Michel Stuyts
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/1d03c6d9/attachment.htm>

From etienne.trimaille at gmail.com  Fri May  5 05:03:23 2023
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Fri, 5 May 2023 14:03:23 +0200
Subject: [QGIS-Developer] Profiler times in Python
In-Reply-To: <DB9PR01MB924746041D9F89145EFC0F92FC729@DB9PR01MB9247.eurprd01.prod.exchangelabs.com>
References: <DB9PR01MB924746041D9F89145EFC0F92FC729@DB9PR01MB9247.eurprd01.prod.exchangelabs.com>
Message-ID: <CAMtDFLLP6ZG0uBjFFx_B677Hb0F9RAj-ymDyERR-8wRA11LtCw@mail.gmail.com>

One line I know, maybe this is enough :

>>> from qgis.utils import plugin_times
>>> plugin_times

It's not using the profiler. Values are different from the Profiler, after
a quick look...

Le ven. 5 mai 2023 ? 10:21, Michel Stuyts via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> I want to use the data on plugins from the Profiler.  In the
> ?Debugging/Development Tools? Panel I can see both the total time for all
> plugins and the individual time per plugin.  With the following Python
> code, I want to get the same data in Python:
>
>
>
> profiler = QgsApplication.profiler()
>
> for child in profiler.childGroups():
>
>     childGroup = profiler.childGroups(child)
>
>     if child == 'Load plugins':
>
>         print(child, profiler.profileTime(child))
>
>         for subGroup in childGroup:
>
>             print(subGroup, profiler.profileTime(subGroup))
>
>
>
> It shows the total time for all plugins just fine as ?Load plugins? with
> the same number of seconds as in the Panel, but for the individual plugins
> I get 0.0 as time for all plugins.  What do I do wrong or is it a bug?
>
>
>
>
>
> Michel Stuyts
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/6c4f31a6/attachment.htm>

From michel.stuyts at edegem.be  Fri May  5 05:47:15 2023
From: michel.stuyts at edegem.be (Michel Stuyts)
Date: Fri, 5 May 2023 12:47:15 +0000
Subject: [QGIS-Developer] Profiler times in Python
In-Reply-To: <CAMtDFLLP6ZG0uBjFFx_B677Hb0F9RAj-ymDyERR-8wRA11LtCw@mail.gmail.com>
References: <DB9PR01MB924746041D9F89145EFC0F92FC729@DB9PR01MB9247.eurprd01.prod.exchangelabs.com>
 <CAMtDFLLP6ZG0uBjFFx_B677Hb0F9RAj-ymDyERR-8wRA11LtCw@mail.gmail.com>
Message-ID: <DB9PR01MB9247FD7B2B42CFC7D0110453FC729@DB9PR01MB9247.eurprd01.prod.exchangelabs.com>

Until now I always used qgis.utils.plugin_times, but I noticed the different values between this variable and the ?Debugging/Development Tools? Panel. That?s the reason I wanted the profiler values.  The qgis.utils.plugin_times variable has 0 loading time as value for some plugins, which is also very unlikely.

Does anyone know the difference these two sources of plugin loading times?


Michel

Van: Etienne Trimaille <etienne.trimaille at gmail.com>
Verzonden: vrijdag 5 mei 2023 14:03
Aan: Michel Stuyts <michel.stuyts at edegem.be>
CC: qgis-developer <qgis-developer at lists.osgeo.org>
Onderwerp: Re: [QGIS-Developer] Profiler times in Python

U ontvangt niet vaak e-mail van etienne.trimaille at gmail.com<mailto:etienne.trimaille at gmail.com>. Meer informatie over waarom dit belangrijk is<https://aka.ms/LearnAboutSenderIdentification>
One line I know, maybe this is enough :

>>> from qgis.utils import plugin_times
>>> plugin_times

It's not using the profiler. Values are different from the Profiler, after a quick look...

Le ven. 5 mai 2023 ? 10:21, Michel Stuyts via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> a ?crit :
I want to use the data on plugins from the Profiler.  In the ?Debugging/Development Tools? Panel I can see both the total time for all plugins and the individual time per plugin.  With the following Python code, I want to get the same data in Python:

profiler = QgsApplication.profiler()
for child in profiler.childGroups():
    childGroup = profiler.childGroups(child)
    if child == 'Load plugins':
        print(child, profiler.profileTime(child))
        for subGroup in childGroup:
            print(subGroup, profiler.profileTime(subGroup))

It shows the total time for all plugins just fine as ?Load plugins? with the same number of seconds as in the Panel, but for the individual plugins I get 0.0 as time for all plugins.  What do I do wrong or is it a bug?


Michel Stuyts
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/6cd9536a/attachment-0001.htm>

From r.nijssen at terglobo.nl  Fri May  5 05:24:47 2023
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Fri, 5 May 2023 14:24:47 +0200
Subject: [QGIS-Developer] Multiple python scripts in python console?
In-Reply-To: <6aaeb1964e334e9c8a23e0f26329c76e@ansperger.de>
References: <6aaeb1964e334e9c8a23e0f26329c76e@ansperger.de>
Message-ID: <3de0f91e-1f65-6f7b-8d9c-cb07fc5bad40@terglobo.nl>

Hi Klaus,

Thank you so much, it works!!

Replying to you and the dev list, hoping this solution will end up in 
the same thread.

Kind regards,

Raymond


On 05-05-2023 12:52, Klaus Affeldt wrote:
> Hi Raymond,
> 
> can't write to the list yet, so i answer you directly:
> 
> The python console has a different working directory then the called script.
> You have to find out the path of the script and append it to the python search path.
> 
> 
> # script_1.py
> 
> import os
> from console.console import _console
> 
> # name and path of this script
> script_path = _console.console.tabEditorWidget.currentWidget().path
> 
> # only the path
> path=(os.path.dirname(script_path))+"/"
> print (path)
> 
> # append python search path
> import sys
> sys.path.append(path)
> 
> from script_2 import TestClass
> 
> obj1 = TestClass('Ray')
> print(obj1)
> 
> 
> # to dynamicly reload changes on script_2.py
> import imp
> 
> import script_2
> 
> imp.reload(script_2)
> obj1 = script_2.TestClass('Ray')
> print(obj1)
> 
> 
> 
> Mit freundlichen Gr??en
> 
> Ihre PV ANSPERGER mbH
> 
> Klaus Affeldt
> 
> Zentrale Kamp-Lintfort
> S?dstra?e 25
> 47475 Kamp-Lintfort
> Tel. +49 2842 9635-14
> Fax: +49 2842 9635-99
> https://www.ansperger.de
> 
> 
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
> 
> Hi developers,
> 
> While writing a python script in the QGIS python console editor I needed
> to write a new class and for convenience I put that in its own python file.
> 
> Both files are in the same directory, but I cannot import my class in
> the other script.
> 
> Here's an example:
> 
> 
> # script_1.py
> 
> from .script_2 import TestClass
> obj1 = TestClass('Ray')
> print(obj1)
> 
> 
> 
> 
> # script_2.py:
> 
> class TestClass():
> 
>       def __init__(self, name):
>           self.name = name
> 
>       def __str__(self):
>           return f'TestClass[{self.name}]'
> 
> 
> 
> It all works properly if I put my class definition in script_1 but as
> the code is growing (and a customer of mine needs to understand this
> too) it would really be nice to split the code over multiple files.
> Is there a way? Or another approach?
> 
> Kind regards,
> Raymond

From anitagraser at gmx.at  Fri May  5 10:18:06 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Fri, 5 May 2023 19:18:06 +0200 (GMT+02:00)
Subject: [QGIS-Developer] 2023 grant applications are now closed
In-Reply-To: <64494f62-1603-de92-7022-7cb15fa34ae3@tuxfamily.org>
References: <trinity-1b66abaf-0bfe-40f2-87e8-e40b4a98d3cd-1682164745716@3c-app-gmx-bap24>
 <1683049105008.951775997.2939087606@gmx.at>
 <trinity-2ed979a9-fd96-430b-a95b-04c8ec2330a4-1683109285881@3c-app-gmx-bap01>
 <trinity-7a78fdc5-6c55-4957-8f24-7acc92dce802-1683225870026@3c-app-gmx-bs19>
 <CAB28Ash29WTnD8OhZ-At02ZeNA0zTDW3VCStJbyjL0vYqFJ1Zw@mail.gmail.com>
 <64494f62-1603-de92-7022-7cb15fa34ae3@tuxfamily.org>
Message-ID: <61ced095-5548-47bc-b67a-d5ed59e11a5c@gmx.at>

Hi,

May 5, 2023 06:31:02 Lo?c Bartoletti via QGIS-Developer <qgis-developer at lists.osgeo.org>:

Snip

>>> 8. Unify the geometric and topological verification and correction features in QGIS - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/262
>>
>> This link points to a different proposal, and I can't work out which is the correct one. Was a qep submitted for this grant?
>>
> It's https://github.com/qgis/QGIS-Enhancement-Proposals/issues/236
>
> Sorry, if I miscopied the link :/

No worries. I'll update the link in the response sheet.

Regards
Anita






-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/ea082f34/attachment.htm>

From yoann.quenach at gmail.com  Fri May  5 11:46:31 2023
From: yoann.quenach at gmail.com (Yoann Quenach de Quivillic)
Date: Fri, 5 May 2023 20:46:31 +0200
Subject: [QGIS-Developer] Multiple python scripts in python console?
In-Reply-To: <3de0f91e-1f65-6f7b-8d9c-cb07fc5bad40@terglobo.nl>
References: <6aaeb1964e334e9c8a23e0f26329c76e@ansperger.de>
 <3de0f91e-1f65-6f7b-8d9c-cb07fc5bad40@terglobo.nl>
Message-ID: <CAJfCvR=+A3H9h8kuisWKZ_YtggA2MpWr_Ws9jMhBTdaBbYGkKg@mail.gmail.com>

Hi Raymond

Note that this should work "out of the box" starting from QGIS 3.32 (cf
https://github.com/qgis/QGIS/pull/51912)




Le ven. 5 mai 2023 ? 14:50, Raymond Nijssen via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hi Klaus,
>
> Thank you so much, it works!!
>
> Replying to you and the dev list, hoping this solution will end up in
> the same thread.
>
> Kind regards,
>
> Raymond
>
>
> On 05-05-2023 12:52, Klaus Affeldt wrote:
> > Hi Raymond,
> >
> > can't write to the list yet, so i answer you directly:
> >
> > The python console has a different working directory then the called
> script.
> > You have to find out the path of the script and append it to the python
> search path.
> >
> >
> > # script_1.py
> >
> > import os
> > from console.console import _console
> >
> > # name and path of this script
> > script_path = _console.console.tabEditorWidget.currentWidget().path
> >
> > # only the path
> > path=(os.path.dirname(script_path))+"/"
> > print (path)
> >
> > # append python search path
> > import sys
> > sys.path.append(path)
> >
> > from script_2 import TestClass
> >
> > obj1 = TestClass('Ray')
> > print(obj1)
> >
> >
> > # to dynamicly reload changes on script_2.py
> > import imp
> >
> > import script_2
> >
> > imp.reload(script_2)
> > obj1 = script_2.TestClass('Ray')
> > print(obj1)
> >
> >
> >
> > Mit freundlichen Gr??en
> >
> > Ihre PV ANSPERGER mbH
> >
> > Klaus Affeldt
> >
> > Zentrale Kamp-Lintfort
> > S?dstra?e 25
> > 47475 Kamp-Lintfort
> > Tel. +49 2842 9635-14
> > Fax: +49 2842 9635-99
> > https://www.ansperger.de
> >
> >
>
> >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
> >
> > Hi developers,
> >
> > While writing a python script in the QGIS python console editor I needed
> > to write a new class and for convenience I put that in its own python
> file.
> >
> > Both files are in the same directory, but I cannot import my class in
> > the other script.
> >
> > Here's an example:
> >
> >
> > # script_1.py
> >
> > from .script_2 import TestClass
> > obj1 = TestClass('Ray')
> > print(obj1)
> >
> >
> >
> >
> > # script_2.py:
> >
> > class TestClass():
> >
> >       def __init__(self, name):
> >           self.name = name
> >
> >       def __str__(self):
> >           return f'TestClass[{self.name}]'
> >
> >
> >
> > It all works properly if I put my class definition in script_1 but as
> > the code is growing (and a customer of mine needs to understand this
> > too) it would really be nice to split the code over multiple files.
> > Is there a way? Or another approach?
> >
> > Kind regards,
> > Raymond
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230505/7024cc1c/attachment.htm>

From suleiman at terrestris.de  Mon May  8 01:53:42 2023
From: suleiman at terrestris.de (Jan Suleiman)
Date: Mon, 8 May 2023 10:53:42 +0200
Subject: [QGIS-Developer] QML Style Specification
Message-ID: <d9a84ceb-22f0-0698-7cd6-392d4c5e5b45@terrestris.de>

Hi everyone,

is there a style specification document for QML and its different 
versions? I could not find anything online.

We are working on a converter that enables converting between different 
styling formats, e.g. QML, SLD, Mapbox and having an official 
specification would be quite helpful for that.

Thanks a lot and kind regards
Jan

-- 

   M.Sc. Geoinformatics Jan Suleiman
   - Anwendungsentwickler -

   terrestris GmbH & Co. KG
   K?lnstra?e 99
   53111 Bonn

   Tel: +49 (0)228 / 96 28 99 -543
   Fax: +49 (0)228 / 96 28 99 -57

   Email: suleiman at terrestris.de
   Web: http://www.terrestris.de

   Komplement?rin: terrestris Verwaltungsgesellschaft mbH vertreten durch:
   Torsten Brassat, Marc Jansen

   Informationen ?ber Ihre gespeicherten Daten finden Sie auf
   unserer Homepage unter folgendem Link:
   https://www.terrestris.de/datenschutzerklaerung/


From apasotti at gmail.com  Tue May  9 02:11:02 2023
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 9 May 2023 11:11:02 +0200
Subject: [QGIS-Developer] Next QGIS QT6 update meeting
In-Reply-To: <CAL5Q6729m=U9x0Qygujq7aUWzWBO8TRVDhTex-+LJgUQWtQcTQ@mail.gmail.com>
References: <CAL5Q6729m=U9x0Qygujq7aUWzWBO8TRVDhTex-+LJgUQWtQcTQ@mail.gmail.com>
Message-ID: <CAL5Q671rAxd9vfYzkYO133fqDiGc9nGetcjHGxg7oh6ScgQkvw@mail.gmail.com>

Hi,

Gentle reminder to pick your favorite date/time for the next QT6
meeting so we can settle the date:

https://doodle.com/meeting/participate/id/bYyqoG9b/

Thank you. Regards

On Fri, Apr 21, 2023 at 12:10?PM Alessandro Pasotti <apasotti at gmail.com> wrote:
>
> Hi,
>
> Thank you for attending the meeting.
>
> As agreed, pick your date:
>
> https://doodle.com/meeting/participate/id/bYyqoG9b
>
> Kind regards.
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From delazj at gmail.com  Tue May  9 03:06:48 2023
From: delazj at gmail.com (DelazJ)
Date: Tue, 9 May 2023 12:06:48 +0200
Subject: [QGIS-Developer] No module named 'qgslayoutchecker' using
 "qgis/qgis:latest"
In-Reply-To: <CAECJsSpLnbfC_TykfCD8KLbT_O2hD5VtXzC6NUMnht34VYoDSg@mail.gmail.com>
References: <CADQ4pmD=prb+a4ksrR0Gg3LYpMu=FgPokLJUFnZfpHXDDH5fYQ@mail.gmail.com>
 <CAECJsSpLnbfC_TykfCD8KLbT_O2hD5VtXzC6NUMnht34VYoDSg@mail.gmail.com>
Message-ID: <CAECJsSo+JCfJ3BWjrHtWUQyVyQHQ=oAiPwxP1Ef8NDe9iKNP1A@mail.gmail.com>

Hi devs,

Can someone please give it a look. Having every single commit report a
failure for no (valid) reason is quite noisy and annoying. (issue report at
https://github.com/qgis/QGIS/issues/53051)

Thanks,
Harrissou

Le mar. 2 mai 2023 ? 10:02, DelazJ <delazj at gmail.com> a ?crit :

> Hi Paolo,
> Yes, we do have the same problems with testing in QGIS-Documentation
> repository, for everything related to master branch (
> https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml?query=branch%3Amaster).
> 3.28 is fine.
>
> Regards,
> Harrissou
>
> Le mar. 2 mai 2023 ? 08:44, Paolo Tormene via QGIS-Developer <
> qgis-developer at lists.osgeo.org> a ?crit :
>
>> Dear QGIS people,
>> I am running continuous integration tests for a plugin using the
>> 'qgis/qgis:latest' docker and, since 4 days ago, I am getting the following
>> error:
>>
>> from qgis.testing import start_app
>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>> usr/lib/python3/dist-packages/qgis/testing/__init__.py:56: in <module>
>>     from qgslayoutchecker import QgsLayoutChecker
>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>> E   ModuleNotFoundError: No module named 'qgslayoutchecker'
>>
>> Please note that the same tests run without issues using the
>> 'qgis/qgis:release-3_22' docker instead.
>> Has anyone experienced the same problem?
>>
>> Thank you and best regards,
>> Paolo
>>
>> --
>>
>> *PAOLO TORMENE* senior software developer +39 0382 5169882
>>
>> *GLOBAL EARTHQUAKE MODEL * working together to assess risk
>>
>> *GEM -* globalquakemodel.org <http://www.globalquakemodel.org> *T -*
>> @GEMwrld <http://twitter.com/GEMwrld> *F -* GEMwrld
>> <http://www.facebook.com/GEMwrld>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230509/f1bcac4a/attachment.htm>

From matthias at opengis.ch  Tue May  9 04:52:17 2023
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 9 May 2023 13:52:17 +0200
Subject: [QGIS-Developer] No module named 'qgslayoutchecker' using
 "qgis/qgis:latest"
In-Reply-To: <CAECJsSo+JCfJ3BWjrHtWUQyVyQHQ=oAiPwxP1Ef8NDe9iKNP1A@mail.gmail.com>
References: <CADQ4pmD=prb+a4ksrR0Gg3LYpMu=FgPokLJUFnZfpHXDDH5fYQ@mail.gmail.com>
 <CAECJsSpLnbfC_TykfCD8KLbT_O2hD5VtXzC6NUMnht34VYoDSg@mail.gmail.com>
 <CAECJsSo+JCfJ3BWjrHtWUQyVyQHQ=oAiPwxP1Ef8NDe9iKNP1A@mail.gmail.com>
Message-ID: <CAC7zN95oA3G3Q0cCDbnHsboKxbLxF=Ldwp6=VUyr+2YwnBjq=Q@mail.gmail.com>

Hi Harrissou,

I have a branch ready but github errors with 500 at the moment. As soon as
they got their services under control again, the PR will be opened

Matthias

On Tue, May 9, 2023 at 12:07?PM DelazJ via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi devs,
>
> Can someone please give it a look. Having every single commit report a
> failure for no (valid) reason is quite noisy and annoying. (issue report at
> https://github.com/qgis/QGIS/issues/53051)
>
> Thanks,
> Harrissou
>
> Le mar. 2 mai 2023 ? 10:02, DelazJ <delazj at gmail.com> a ?crit :
>
>> Hi Paolo,
>> Yes, we do have the same problems with testing in QGIS-Documentation
>> repository, for everything related to master branch (
>> https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml?query=branch%3Amaster).
>> 3.28 is fine.
>>
>> Regards,
>> Harrissou
>>
>> Le mar. 2 mai 2023 ? 08:44, Paolo Tormene via QGIS-Developer <
>> qgis-developer at lists.osgeo.org> a ?crit :
>>
>>> Dear QGIS people,
>>> I am running continuous integration tests for a plugin using the
>>> 'qgis/qgis:latest' docker and, since 4 days ago, I am getting the following
>>> error:
>>>
>>> from qgis.testing import start_app
>>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>> usr/lib/python3/dist-packages/qgis/testing/__init__.py:56: in <module>
>>>     from qgslayoutchecker import QgsLayoutChecker
>>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>> E   ModuleNotFoundError: No module named 'qgslayoutchecker'
>>>
>>> Please note that the same tests run without issues using the
>>> 'qgis/qgis:release-3_22' docker instead.
>>> Has anyone experienced the same problem?
>>>
>>> Thank you and best regards,
>>> Paolo
>>>
>>> --
>>>
>>> *PAOLO TORMENE* senior software developer +39 0382 5169882
>>>
>>> *GLOBAL EARTHQUAKE MODEL * working together to assess risk
>>>
>>> *GEM -* globalquakemodel.org <http://www.globalquakemodel.org> *T -*
>>> @GEMwrld <http://twitter.com/GEMwrld> *F -* GEMwrld
>>> <http://www.facebook.com/GEMwrld>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230509/4a6191ec/attachment.htm>

From matthias at opengis.ch  Tue May  9 05:43:31 2023
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 9 May 2023 14:43:31 +0200
Subject: [QGIS-Developer] No module named 'qgslayoutchecker' using
 "qgis/qgis:latest"
In-Reply-To: <CAC7zN95oA3G3Q0cCDbnHsboKxbLxF=Ldwp6=VUyr+2YwnBjq=Q@mail.gmail.com>
References: <CADQ4pmD=prb+a4ksrR0Gg3LYpMu=FgPokLJUFnZfpHXDDH5fYQ@mail.gmail.com>
 <CAECJsSpLnbfC_TykfCD8KLbT_O2hD5VtXzC6NUMnht34VYoDSg@mail.gmail.com>
 <CAECJsSo+JCfJ3BWjrHtWUQyVyQHQ=oAiPwxP1Ef8NDe9iKNP1A@mail.gmail.com>
 <CAC7zN95oA3G3Q0cCDbnHsboKxbLxF=Ldwp6=VUyr+2YwnBjq=Q@mail.gmail.com>
Message-ID: <CAC7zN97OOtKXDpdqELTq3W1XVK2mLCCcvOR-bsDvUadr4Q6Jkg@mail.gmail.com>

And it's open https://github.com/qgis/QGIS/pull/53053

Thanks Paolo, thanks Harrissou

On Tue, May 9, 2023 at 1:52?PM Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Harrissou,
>
> I have a branch ready but github errors with 500 at the moment. As soon as
> they got their services under control again, the PR will be opened
>
> Matthias
>
> On Tue, May 9, 2023 at 12:07?PM DelazJ via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hi devs,
>>
>> Can someone please give it a look. Having every single commit report a
>> failure for no (valid) reason is quite noisy and annoying. (issue report at
>> https://github.com/qgis/QGIS/issues/53051)
>>
>> Thanks,
>> Harrissou
>>
>> Le mar. 2 mai 2023 ? 10:02, DelazJ <delazj at gmail.com> a ?crit :
>>
>>> Hi Paolo,
>>> Yes, we do have the same problems with testing in QGIS-Documentation
>>> repository, for everything related to master branch (
>>> https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml?query=branch%3Amaster).
>>> 3.28 is fine.
>>>
>>> Regards,
>>> Harrissou
>>>
>>> Le mar. 2 mai 2023 ? 08:44, Paolo Tormene via QGIS-Developer <
>>> qgis-developer at lists.osgeo.org> a ?crit :
>>>
>>>> Dear QGIS people,
>>>> I am running continuous integration tests for a plugin using the
>>>> 'qgis/qgis:latest' docker and, since 4 days ago, I am getting the following
>>>> error:
>>>>
>>>> from qgis.testing import start_app
>>>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>>> usr/lib/python3/dist-packages/qgis/testing/__init__.py:56: in <module>
>>>>     from qgslayoutchecker import QgsLayoutChecker
>>>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>>> E   ModuleNotFoundError: No module named 'qgslayoutchecker'
>>>>
>>>> Please note that the same tests run without issues using the
>>>> 'qgis/qgis:release-3_22' docker instead.
>>>> Has anyone experienced the same problem?
>>>>
>>>> Thank you and best regards,
>>>> Paolo
>>>>
>>>> --
>>>>
>>>> *PAOLO TORMENE* senior software developer +39 0382 5169882
>>>>
>>>> *GLOBAL EARTHQUAKE MODEL * working together to assess risk
>>>>
>>>> *GEM -* globalquakemodel.org <http://www.globalquakemodel.org> *T -*
>>>> @GEMwrld <http://twitter.com/GEMwrld> *F -* GEMwrld
>>>> <http://www.facebook.com/GEMwrld>
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230509/d1986568/attachment-0001.htm>

From Luke.A.Catania at erdc.dren.mil  Tue May  9 08:44:54 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Tue, 9 May 2023 15:44:54 +0000
Subject: [QGIS-Developer] QtWebEngineView crashes QT Designer
Message-ID: <556c5db7d8a34fa1b7c4c64058d39abf@erdc.dren.mil>

Every time I click on the widget to start dragging it to the widget canvas, QT Designer crashes.

About menu says it uses QT 5.15.2.  I am using it to support development in QGIS 3.16.16.  I have to stick with 3.16.16 for our upcoming plugin release due to time limited time constraints for testing.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230509/5fcb62c2/attachment.htm>

From giulio.fattori at tin.it  Wed May 10 22:21:30 2023
From: giulio.fattori at tin.it (Giulio Fattori)
Date: Thu, 11 May 2023 07:21:30 +0200
Subject: [QGIS-Developer] Load Style and Save Style forms from python code
Message-ID: <0de5433c-efb3-2b45-62c1-a8aba63cca28@tin.it>

Good morning
how can I recall and use the Load Style and Save Style forms from python 
code ?

Many thanks for any support

Giulio


From jacky.volpes at oslandia.com  Thu May 11 02:05:41 2023
From: jacky.volpes at oslandia.com (Jacky Volpes)
Date: Thu, 11 May 2023 11:05:41 +0200
Subject: [QGIS-Developer] Load Style and Save Style forms from python
 code
In-Reply-To: <0de5433c-efb3-2b45-62c1-a8aba63cca28@tin.it>
References: <0de5433c-efb3-2b45-62c1-a8aba63cca28@tin.it>
Message-ID: <6a2e0bcb-b782-3026-3b91-404c5291bc1a@oslandia.com>

Hello,

You can try this method 
<https://api.qgis.org/api/classQgsVectorLayerProperties.html#ae4fe88fd37cdac13ee710bfcc7812799>, 
available in python bindings from 3.30:

props = QgsVectorLayerProperties(iface.mapCanvas(), iface.messageBar(), 
iface.activeLayer())
props.loadStyle() or props.saveStyleAs()

Regards,
Jacky Volpes



Le 11/05/2023 ? 07:21, Giulio Fattori via QGIS-Developer a ?crit?:
> Good morning
> how can I recall and use the Load Style and Save Style forms from 
> python code ?
>
> Many thanks for any support
>
> Giulio
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Jacky Volpes

Ing?nieur SIG - Oslandia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230511/b06ec4eb/attachment.htm>

From giulio.fattori at tin.it  Thu May 11 02:36:43 2023
From: giulio.fattori at tin.it (Giulio Fattori)
Date: Thu, 11 May 2023 11:36:43 +0200
Subject: [QGIS-Developer] Load Style and Save Style forms from python
 code
In-Reply-To: <6a2e0bcb-b782-3026-3b91-404c5291bc1a@oslandia.com>
References: <0de5433c-efb3-2b45-62c1-a8aba63cca28@tin.it>
 <6a2e0bcb-b782-3026-3b91-404c5291bc1a@oslandia.com>
Message-ID: <2bfee976-be16-150a-35d6-dcbde683f19d@tin.it>

Il 11/05/2023 11:05, Jacky Volpes via QGIS-Developer ha scritto:
> Hello,
>
> You can try this method 
> <https://api.qgis.org/api/classQgsVectorLayerProperties.html#ae4fe88fd37cdac13ee710bfcc7812799>, 
> available in python bindings from 3.30:
>
> props = QgsVectorLayerProperties(iface.mapCanvas(), 
> iface.messageBar(), iface.activeLayer())
> props.loadStyle() or props.saveStyleAs()
>
> Regards,
> Jacky Volpes
>
>
>
> Le 11/05/2023 ? 07:21, Giulio Fattori via QGIS-Developer a ?crit?:
>> Good morning
>> how can I recall and use the Load Style and Save Style forms from 
>> python code ?
>>
>> Many thanks for any support
>>
>> Giulio
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> -- 
> Jacky Volpes
>
> Ing?nieur SIG - Oslandia
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

Exactly what I was looking for

Regards,

Giulio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230511/4c9b399d/attachment.htm>

From apasotti at gmail.com  Fri May 12 02:44:08 2023
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 12 May 2023 11:44:08 +0200
Subject: [QGIS-Developer] QGIS Server and OGC API - Processes
Message-ID: <CAL5Q672+JGCUOTSf2q0vM9cQTTBtdyDb3cYi3bnKS2heq+vFtg@mail.gmail.com>

Hi,

Is anybody working or planning to work on an implementation of OGC API
- Processes [1] for QGIS Server?

[1] https://ogcapi.ogc.org/processes/overview.html

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rldhont at gmail.com  Fri May 12 03:59:35 2023
From: rldhont at gmail.com (=?UTF-8?Q?Ren=c3=a9-Luc_Dhont?=)
Date: Fri, 12 May 2023 12:59:35 +0200
Subject: [QGIS-Developer] QGIS Server and OGC API - Processes
In-Reply-To: <CAL5Q672+JGCUOTSf2q0vM9cQTTBtdyDb3cYi3bnKS2heq+vFtg@mail.gmail.com>
References: <CAL5Q672+JGCUOTSf2q0vM9cQTTBtdyDb3cYi3bnKS2heq+vFtg@mail.gmail.com>
Message-ID: <19c69f9b-836d-773a-c131-47a751d7ce9b@gmail.com>

Hi Alessandro,

It is implemented in Py-QGIS-WPS https://github.com/3liz/py-qgis-wps

Regards,

Le 12/05/2023 ? 11:44, Alessandro Pasotti via QGIS-Developer a ?crit?:
> Hi,
>
> Is anybody working or planning to work on an implementation of OGC API
> - Processes [1] for QGIS Server?
>
> [1]https://ogcapi.ogc.org/processes/overview.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230512/d1a8d6bc/attachment.htm>

From dmarteau at 3liz.com  Fri May 12 04:10:57 2023
From: dmarteau at 3liz.com (David Marteau)
Date: Fri, 12 May 2023 13:10:57 +0200
Subject: [QGIS-Developer] QGIS Server and OGC API - Processes
In-Reply-To: <CAL5Q672+JGCUOTSf2q0vM9cQTTBtdyDb3cYi3bnKS2heq+vFtg@mail.gmail.com>
References: <CAL5Q672+JGCUOTSf2q0vM9cQTTBtdyDb3cYi3bnKS2heq+vFtg@mail.gmail.com>
Message-ID: <bc888b64-acea-816b-5a39-3737b6d80cec@3liz.com>

Hi,

There is an implementation of OGC API processes on top of Qgis 
Processing here: https://github.com/3liz/py-qgis-wps that supports Qgis 
algorithms as processes out of the box.


Le 12/05/2023 ? 11:44, Alessandro Pasotti via QGIS-Developer a ?crit?:
> Hi,
>
> Is anybody working or planning to work on an implementation of OGC API
> - Processes [1] for QGIS Server?
>
> [1] https://ogcapi.ogc.org/processes/overview.html
>

From apasotti at gmail.com  Fri May 12 04:24:35 2023
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 12 May 2023 13:24:35 +0200
Subject: [QGIS-Developer] QGIS Server and OGC API - Processes
In-Reply-To: <bc888b64-acea-816b-5a39-3737b6d80cec@3liz.com>
References: <CAL5Q672+JGCUOTSf2q0vM9cQTTBtdyDb3cYi3bnKS2heq+vFtg@mail.gmail.com>
 <bc888b64-acea-816b-5a39-3737b6d80cec@3liz.com>
Message-ID: <CAL5Q672+MtKTy7yUcmmJUp4eJHRc+vX1E7bVcHqd0+gXifgv=g@mail.gmail.com>

Cool, thanks!

I was actually thinking of a core implementation but that's a very good start!

On Fri, May 12, 2023 at 1:10?PM David Marteau <dmarteau at 3liz.com> wrote:
>
> Hi,
>
> There is an implementation of OGC API processes on top of Qgis
> Processing here: https://github.com/3liz/py-qgis-wps that supports Qgis
> algorithms as processes out of the box.
>
>
> Le 12/05/2023 ? 11:44, Alessandro Pasotti via QGIS-Developer a ?crit :
> > Hi,
> >
> > Is anybody working or planning to work on an implementation of OGC API
> > - Processes [1] for QGIS Server?
> >
> > [1] https://ogcapi.ogc.org/processes/overview.html
> >



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From senhor.neto at gmail.com  Fri May 12 17:22:34 2023
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Sat, 13 May 2023 01:22:34 +0100
Subject: [QGIS-Developer] PyQGIS read project from postgresql database
Message-ID: <CA+H0G_HAwMTZSzxyyKidM_UnpXNywCj63mM539as4Cd1iXwT9w@mail.gmail.com>

Hi,

I am trying to read a project that is stored in a postgreSQL/PostGIS
database, but I am struggling with getting it correctly. I am using the
following code

project = QgsProject.instance()
uri = 'postgresql://my_user:my_pass at localhost
:5432?sslmode=disable&dbname=my_database&schema=my_schema&project=my_project_name'
project.read(uri)

The last command always return false, and no project is loaded

The documentation of QgsProject.read() only mentions filenames, not uri,
but this answer seems to propose this uri format that would work:

https://gis.stackexchange.com/a/354615/6191

Any suggestions on how to solve or debug this? I get no error messages from
the read method.

Thanks,

Aleandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230513/79544a44/attachment.htm>

From carrillo.german at gmail.com  Fri May 12 19:23:03 2023
From: carrillo.german at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Carrillo?=)
Date: Fri, 12 May 2023 21:23:03 -0500
Subject: [QGIS-Developer] PyQGIS read project from postgresql database
In-Reply-To: <CA+H0G_HAwMTZSzxyyKidM_UnpXNywCj63mM539as4Cd1iXwT9w@mail.gmail.com>
References: <CA+H0G_HAwMTZSzxyyKidM_UnpXNywCj63mM539as4Cd1iXwT9w@mail.gmail.com>
Message-ID: <CANaz7mx3vXs80Q3Ux6SmqnN1_QyerSQ1uhvOTn3S2AVSj7czUg@mail.gmail.com>

Hi,

what do you get if you run the following line on your QGIS Python console
in a QGIS session where your project (the one stored in PG) is loaded?

QgsProject.instance().fileName()

Regards,

Germ?n


El vie, 12 may 2023 a las 19:22, Alexandre Neto via QGIS-Developer (<
qgis-developer at lists.osgeo.org>) escribi?:

> Hi,
>
> I am trying to read a project that is stored in a postgreSQL/PostGIS
> database, but I am struggling with getting it correctly. I am using the
> following code
>
> project = QgsProject.instance()
> uri = 'postgresql://my_user:my_pass at localhost
> :5432?sslmode=disable&dbname=my_database&schema=my_schema&project=my_project_name'
> project.read(uri)
>
> The last command always return false, and no project is loaded
>
> The documentation of QgsProject.read() only mentions filenames, not uri,
> but this answer seems to propose this uri format that would work:
>
> https://gis.stackexchange.com/a/354615/6191
>
> Any suggestions on how to solve or debug this? I get no error messages
> from the read method.
>
> Thanks,
>
> Aleandre Neto
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
-----------
   |\__
(:>__)(
   |/
Soluciones Geoinform?ticas Libres
http://geotux.tuxfamily.org/
https://twitter.com/GeoTux2 <http://twitter.com/GeoTux2>


<http://gis.stackexchange.com/users/4972/germ%c3%a1n-carrillo>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230512/55774d87/attachment.htm>

From senhor.neto at gmail.com  Sat May 13 02:16:37 2023
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Sat, 13 May 2023 09:16:37 +0000
Subject: [QGIS-Developer] PyQGIS read project from postgresql database
In-Reply-To: <CANaz7mx3vXs80Q3Ux6SmqnN1_QyerSQ1uhvOTn3S2AVSj7czUg@mail.gmail.com>
References: <CA+H0G_HAwMTZSzxyyKidM_UnpXNywCj63mM539as4Cd1iXwT9w@mail.gmail.com>
 <CANaz7mx3vXs80Q3Ux6SmqnN1_QyerSQ1uhvOTn3S2AVSj7czUg@mail.gmail.com>
Message-ID: <db6d6bc0-3fe4-425b-b420-2faf334c10d0@mail.shortwave.com>

Hi,

Actually, after I turned off the computer, I saw the fileName() method in documentation.

I tried it and I realised that both my password and project name needed percent encoding some characters.

So I have parsed my uri string with urllob.parse.quote to make it work correctly.

Not sure if there's a more convenient way to do it.

Thanks for the help German.

Alex Neto

On Sat May 13, 2023, 02:23 AM GMT, Germ?n Carrillo <mailto:carrillo.german at gmail.com> wrote:
> Hi,
>
> what do you get if you run the following line on your QGIS Python console in a QGIS session where your project (the one stored in PG) is loaded?
>
> QgsProject.instance().fileName()
>
> Regards,
>
> Germ?n
>
>
> El vie, 12 may 2023 a las 19:22, Alexandre Neto via QGIS-Developer (<qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>>) escribi?:
>> Hi,
>>
>> I am trying to read a project that is stored in a postgreSQL/PostGIS database, but I am struggling with getting it correctly. I am using the following code
>>
>> project = QgsProject.instance()
>> uri = 'postgresql://my_user:my_pass at localhost:5432?sslmode=disable&dbname=my_database&schema=my_schema&project=my_project_name'
>> project.read(uri)
>>
>> The last command always return false, and no project is loaded
>>
>> The documentation of QgsProject.read() only mentions filenames, not uri, but this answer seems to propose this uri format that would work:
>>
>> https://gis.stackexchange.com/a/354615/6191 <https://gis.stackexchange.com/a/354615/6191>
>>
>> Any suggestions on how to solve or debug this? I get no error messages from the read method.
>>
>> Thanks,
>>
>> Aleandre Neto
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>
> --
> -----------
> |\__
> (:>__)(
> |/
> Soluciones Geoinform?ticas Libres
> http://geotux.tuxfamily.org/ <http://geotux.tuxfamily.org/>
> https://twitter.com/GeoTux2 <http://twitter.com/GeoTux2>
>
>
[image] <http://gis.stackexchange.com/users/4972/germ%c3%a1n-carrillo>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230513/6424371d/attachment.htm>

From michel.nzikou at alumni.uleth.ca  Sat May 13 02:47:44 2023
From: michel.nzikou at alumni.uleth.ca (Nzikou, Michel)
Date: Sat, 13 May 2023 17:47:44 +0800
Subject: [QGIS-Developer] QGIS WebSocket
Message-ID: <CALG-VUQfT9e93PaRt2YORt2Ws9Wj968VMJcB+f=Su9MF+C6HnA@mail.gmail.com>

Hi dev folks,

I am working on creating a connection between my exp plugin and server via
a WebSocket connection for data transferring. So my question is about
whether QGIS has a WebSocket feature/ connect algorithm.

Thanks


*Michel Nzikou, Ph.D.*
ASEG WA - President
*-----*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230513/1c99ceb7/attachment.htm>

From madmanwoo at gmail.com  Sat May 13 02:58:18 2023
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Sat, 13 May 2023 19:58:18 +1000
Subject: [QGIS-Developer] QGIS WebSocket
In-Reply-To: <CALG-VUQfT9e93PaRt2YORt2Ws9Wj968VMJcB+f=Su9MF+C6HnA@mail.gmail.com>
References: <CALG-VUQfT9e93PaRt2YORt2Ws9Wj968VMJcB+f=Su9MF+C6HnA@mail.gmail.com>
Message-ID: <CAAi8Yg_y-CA56=Sq2a_nRZkgY7y_ANY+6f+X8UhY_Tvw1E5RVw@mail.gmail.com>

Hi,

You can use the QWebSocket (https://doc.qt.io/qt-6/qwebsocket.html) object
to do this.  Ships with Qt and QGIS.  I did some R&D with it a while ago
and it worked well.

- Nathan

On Sat, 13 May 2023 at 19:48, Nzikou, Michel via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi dev folks,
>
> I am working on creating a connection between my exp plugin and server via
> a WebSocket connection for data transferring. So my question is about
> whether QGIS has a WebSocket feature/ connect algorithm.
>
> Thanks
>
>
> *Michel Nzikou, Ph.D.*
> ASEG WA - President
> *-----*
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230513/c2cd68f2/attachment-0001.htm>

From szymonsleczka7 at gmail.com  Mon May 15 01:37:29 2023
From: szymonsleczka7 at gmail.com (=?UTF-8?B?U3p5bW9uIMWabMSZY3prYQ==?=)
Date: Mon, 15 May 2023 10:37:29 +0200
Subject: [QGIS-Developer] Plugin approve
Message-ID: <CAEvoHPcZ661iToU21nS=yhPdUdbMhUkFKdSE9WDd-TZvFhoO9Q@mail.gmail.com>

Dear QGIS Developers,
How long we should wait to accept our new version of the QMapa GML 2021
plugin? We uploaded it on Thursday 11 May.
Could anyone tell us what's the meantime of approving, not to write again?

Best regards,
Szymon and the team
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230515/2dcd59a6/attachment.htm>

From alister.hood at gmail.com  Mon May 15 18:19:50 2023
From: alister.hood at gmail.com (Alister Hood)
Date: Tue, 16 May 2023 13:19:50 +1200
Subject: [QGIS-Developer] Best practice for plugins including processing
 models
In-Reply-To: <CAF6hL+W2fbWRHcwJZ7Z9_-G1PhK+pwpYJPLDRdXeti0skP27MQ@mail.gmail.com>
References: <CAF6hL+W2fbWRHcwJZ7Z9_-G1PhK+pwpYJPLDRdXeti0skP27MQ@mail.gmail.com>
Message-ID: <CAF6hL+VbLjr0QM2jCrArivAWyQR2GKDRX4eD4ojdgedB692gBw@mail.gmail.com>

Further to this, I am now using the following code to load the models
directly from the plugin folder, rather than copying them into
%AppData%\Roaming\QGIS\QGIS3\profiles\default\processing\models


    def loadModels(self):
            modelsFolders=ModelerUtils.modelsFolders()
            if self.modelsPath not in modelsFolders:
                modelsFolders.append(self.modelsPath)

ProcessingConfig.setSettingValue(ModelerUtils.MODELS_FOLDER,
';'.join(modelsFolders))

QgsApplication.processingRegistry().providerById('model').refreshAlgorithms()

    def unloadModels(self):
            modelsFolders=ModelerUtils.modelsFolders()
            if self.modelsPath in modelsFolders:
                modelsFolders.remove(self.modelsPath)

ProcessingConfig.setSettingValue(ModelerUtils.MODELS_FOLDER,
';'.join(modelsFolders))

QgsApplication.processingRegistry().providerById('model').refreshAlgorithms()


On Fri, 28 Apr 2023 at 15:07, Alister Hood <alister.hood at gmail.com> wrote:

> Hi, I maintain an in-house plugin for our team of civil engineers, who
> apart from myself are not very advanced GIS users.
> It does things like set useful defaults and install a set of useful
> plugins.  It also includes some processing models, which are loaded with
> the code below, which seems to be the conventional way models are loaded in
> publicly available plugins which ship processing models.  This code copies
> the model files included in the plugin to the default folder for processing
> models - somewhere like
> %AppData%\Roaming\QGIS\QGIS3\profiles\default\processing\models
>
> One of my colleagues did some QGIS training and created a processing
> model, which coincidentally had the same filename as a model I created on
> the same day, so his model got overwritten when my plugin was updated.
> This is not a problem for us as we are a small team and can be careful what
> we do going forward.  But it highlights that the way plugin authors are
> loading model files is what seems to me to be pretty poor practice, for two
> reasons.
>
> Firstly models are available in qgis even when the plugin is unloaded or
> uninstalled, which is probably not desirable.
> It is trivial to implement an unloadModels function to rectify this, and I
> have done so in my in-house plugin.  I'm wondering - should plugin authors
> be encouraged to do the same?
>
> Secondly, loading the plugin will silently overwrite any existing models
> with the same filename, as occurred here.  Plugins generally contain models
> with fairly special filenames, so hopefully this is unlikely to occur,
> unless:
> - someone produces a plugin that is a fork of another one, or
> - someone ships a plugin with a model that is previously publicly
> available somewhere else, or that was created by following an online
> tutorial, or
> - a user edits a model provided by a plugin.
> In any case, would it be a good idea to encourage plugin authors to load
> models another way, without copying them into
> %AppData%\Roaming\QGIS\QGIS3\profiles\default\processing\models?
> I realise that to change an existing plugin there is the added
> complication of what to do when updating from an old version - the only
> safeish way I can think of to automatically clean up obsolete model files
> would be to check for them and then use a checksum to verify whether they
> should be deleted.
> For what it's worth, I note that when a user tries to manually "add model
> to toolbox", QGIS refuses if there is an existing model with the same
> filename.
>
> Thanks.
>
>
>     def loadModels(self):
>             '''Register models present in models folder of the plugin.'''
>             try:
>                 iface.initializationCompleted.disconnect(self.loadModels)
>             except:
>                 pass
>
>             #QgsMessageLog.logMessage(self.tr('testing'),
> self.messageTag, Qgis.Warning)
>             modelsFiles = glob.glob(os.path.join(self.modelsPath,
> '*.model3'))
>
>             for modelFileName in modelsFiles:
>                 alg = QgsProcessingModelAlgorithm()
>                 if not alg.fromFile(modelFileName):
>                     QgsMessageLog.logMessage(self.tr('Not well formed
> model: {}'.format(modelFileName)), self.messageTag, Qgis.Warning)
>                     continue
>
>                 destFilename =
> os.path.join(ModelerUtils.modelsFolders()[0],
> os.path.basename(modelFileName))
>                 try:
>                     if os.path.exists(destFilename):
>                         os.remove(destFilename)
>
>                     if isWindows():
>                         copyfile(modelFileName, destFilename)
>                     else:
>                         os.symlink(modelFileName, destFilename)
>                 except Exception as ex:
>                     QgsMessageLog.logMessage(self.tr('Failed to install
> model: {} - {}'.format(modelFileName, str(ex))), self.messageTag,
> Qgis.Warning)
>                     continue
>
>
> QgsApplication.processingRegistry().providerById('model').refreshAlgorithms()
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230516/54cd78ae/attachment.htm>

From alister.hood at gmail.com  Mon May 15 19:09:38 2023
From: alister.hood at gmail.com (Alister Hood)
Date: Tue, 16 May 2023 14:09:38 +1200
Subject: [QGIS-Developer] Best practice for plugins including processing
 models
In-Reply-To: <CAF6hL+VbLjr0QM2jCrArivAWyQR2GKDRX4eD4ojdgedB692gBw@mail.gmail.com>
References: <CAF6hL+W2fbWRHcwJZ7Z9_-G1PhK+pwpYJPLDRdXeti0skP27MQ@mail.gmail.com>
 <CAF6hL+VbLjr0QM2jCrArivAWyQR2GKDRX4eD4ojdgedB692gBw@mail.gmail.com>
Message-ID: <CAF6hL+UJG7OuyBeJA+mL1+5fSGg_gugFsTchpp-HQT1gcSeR5Q@mail.gmail.com>

And including this in loadModels() is a fairly safe way to remove the
copied model files from previous versions:

            modelsFiles = glob.glob(os.path.join(self.modelsPath,
'*.model3'))

            for modelFileName in modelsFiles:
                destFilename =
os.path.join(ModelerUtils.defaultModelsFolder(),
os.path.basename(modelFileName))
                try:
                    if os.path.exists(destFilename):
                        move(destFilename, destFilename + '.bak')
                except Exception as ex:
                    QgsMessageLog.logMessage(self.tr('Failed to rename
existing model: {} - {}'.format(destFilename, str(ex))), self.messageTag,
Qgis.Warning)
                    continue

It does mean that if someone happens to have a model with the same name as
one provided by the plugin, it will disappear, but at least it will still
be there as a *.bak file, rather than just being overwritten.

On Tue, 16 May 2023 at 13:19, Alister Hood <alister.hood at gmail.com> wrote:

> Further to this, I am now using the following code to load the models
> directly from the plugin folder, rather than copying them into
> %AppData%\Roaming\QGIS\QGIS3\profiles\default\processing\models
>
>
>     def loadModels(self):
>             modelsFolders=ModelerUtils.modelsFolders()
>             if self.modelsPath not in modelsFolders:
>                 modelsFolders.append(self.modelsPath)
>
> ProcessingConfig.setSettingValue(ModelerUtils.MODELS_FOLDER,
> ';'.join(modelsFolders))
>
> QgsApplication.processingRegistry().providerById('model').refreshAlgorithms()
>
>     def unloadModels(self):
>             modelsFolders=ModelerUtils.modelsFolders()
>             if self.modelsPath in modelsFolders:
>                 modelsFolders.remove(self.modelsPath)
>
> ProcessingConfig.setSettingValue(ModelerUtils.MODELS_FOLDER,
> ';'.join(modelsFolders))
>
> QgsApplication.processingRegistry().providerById('model').refreshAlgorithms()
>
>
> On Fri, 28 Apr 2023 at 15:07, Alister Hood <alister.hood at gmail.com> wrote:
>
>> Hi, I maintain an in-house plugin for our team of civil engineers, who
>> apart from myself are not very advanced GIS users.
>> It does things like set useful defaults and install a set of useful
>> plugins.  It also includes some processing models, which are loaded with
>> the code below, which seems to be the conventional way models are loaded in
>> publicly available plugins which ship processing models.  This code copies
>> the model files included in the plugin to the default folder for processing
>> models - somewhere like
>> %AppData%\Roaming\QGIS\QGIS3\profiles\default\processing\models
>>
>> One of my colleagues did some QGIS training and created a processing
>> model, which coincidentally had the same filename as a model I created on
>> the same day, so his model got overwritten when my plugin was updated.
>> This is not a problem for us as we are a small team and can be careful what
>> we do going forward.  But it highlights that the way plugin authors are
>> loading model files is what seems to me to be pretty poor practice, for two
>> reasons.
>>
>> Firstly models are available in qgis even when the plugin is unloaded or
>> uninstalled, which is probably not desirable.
>> It is trivial to implement an unloadModels function to rectify this, and
>> I have done so in my in-house plugin.  I'm wondering - should plugin
>> authors be encouraged to do the same?
>>
>> Secondly, loading the plugin will silently overwrite any existing models
>> with the same filename, as occurred here.  Plugins generally contain models
>> with fairly special filenames, so hopefully this is unlikely to occur,
>> unless:
>> - someone produces a plugin that is a fork of another one, or
>> - someone ships a plugin with a model that is previously publicly
>> available somewhere else, or that was created by following an online
>> tutorial, or
>> - a user edits a model provided by a plugin.
>> In any case, would it be a good idea to encourage plugin authors to load
>> models another way, without copying them into
>> %AppData%\Roaming\QGIS\QGIS3\profiles\default\processing\models?
>> I realise that to change an existing plugin there is the added
>> complication of what to do when updating from an old version - the only
>> safeish way I can think of to automatically clean up obsolete model files
>> would be to check for them and then use a checksum to verify whether they
>> should be deleted.
>> For what it's worth, I note that when a user tries to manually "add model
>> to toolbox", QGIS refuses if there is an existing model with the same
>> filename.
>>
>> Thanks.
>>
>>
>>     def loadModels(self):
>>             '''Register models present in models folder of the plugin.'''
>>             try:
>>                 iface.initializationCompleted.disconnect(self.loadModels)
>>             except:
>>                 pass
>>
>>             #QgsMessageLog.logMessage(self.tr('testing'),
>> self.messageTag, Qgis.Warning)
>>             modelsFiles = glob.glob(os.path.join(self.modelsPath,
>> '*.model3'))
>>
>>             for modelFileName in modelsFiles:
>>                 alg = QgsProcessingModelAlgorithm()
>>                 if not alg.fromFile(modelFileName):
>>                     QgsMessageLog.logMessage(self.tr('Not well formed
>> model: {}'.format(modelFileName)), self.messageTag, Qgis.Warning)
>>                     continue
>>
>>                 destFilename =
>> os.path.join(ModelerUtils.modelsFolders()[0],
>> os.path.basename(modelFileName))
>>                 try:
>>                     if os.path.exists(destFilename):
>>                         os.remove(destFilename)
>>
>>                     if isWindows():
>>                         copyfile(modelFileName, destFilename)
>>                     else:
>>                         os.symlink(modelFileName, destFilename)
>>                 except Exception as ex:
>>                     QgsMessageLog.logMessage(self.tr('Failed to install
>> model: {} - {}'.format(modelFileName, str(ex))), self.messageTag,
>> Qgis.Warning)
>>                     continue
>>
>>
>> QgsApplication.processingRegistry().providerById('model').refreshAlgorithms()
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230516/c3934f68/attachment-0001.htm>

From anitagraser at gmx.at  Tue May 16 05:29:59 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Tue, 16 May 2023 12:29:59 +0000
Subject: [QGIS-Developer] 2023 grant applications are now closed
In-Reply-To: <trinity-7a78fdc5-6c55-4957-8f24-7acc92dce802-1683225870026@3c-app-gmx-bs19>
References: <trinity-7a78fdc5-6c55-4957-8f24-7acc92dce802-1683225870026@3c-app-gmx-bs19>
Message-ID: <1684239928357.2491390025.3682622868@gmx.at>

Dear QGIS community,


This is a friendly reminder that today is the last day of the QEP discussion phase. Please wrap up the discussions.


In the next week, the discussion summaries will be prepared.


Regards,
Anita




On Thursday, 04. May 2023 20:44:30 (+02:00), Anita Graser wrote:


Dear QGIS Community,
 
This is to let you know that the form for grant applications is now closed and that we have received 9 complete applications totalling ? 103,600.
 
As a quick teaser, here are the proposals:
 
1. QGIS Bug Tracker cleanup - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/266
2. Switch to clang-format for C++ code and implement pre-commit hooks - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/264 and https://github.com/qgis/QGIS-Enhancement-Proposals/issues/265
3. Add vertical CRS handling to QGIS - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/267
4. Improve test result handling on QGIS CI - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/268
5. Update older annotation items to new framework - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/269
6. QGIS Project Loading Performance - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/261
7. Conda Installer for macOS - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/270
8. Unify the geometric and topological verification and correction features in QGIS - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/262
9. Porting to C++ and harmonization of Processing algorithms - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/271
 
We are now in the QEP discussion phase. Please tag all proposals with the Grant-2023 tag:
 
https://github.com/qgis/QGIS-Enhancement-Proposals/issues?q=is%3Aissue+is%3Aopen+label%3AGrant-2023
 
The QEP discussion phase takes two weeks and ends on Tuesday, 2023-05-16.
Afterwards, we will proceed to writing discussion summaries (by 2023-05-23),
followed by the voting phase with expected publication of voting results on 2023-06-06.
 
Thank you to everyone who submitted project proposals!

Regards,
Anita
 

-- 
Anita Graser
Home: http://anitagraser.com
Twitter: @underdarkgis
Mastodon: @underdarkgis at fosstodon.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230516/b5d1d77d/attachment.htm>

From wonder.sk at gmail.com  Tue May 16 09:14:12 2023
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue, 16 May 2023 18:14:12 +0200
Subject: [QGIS-Developer] 2023 grant applications are now closed
In-Reply-To: <1684239928357.2491390025.3682622868@gmx.at>
References: <trinity-7a78fdc5-6c55-4957-8f24-7acc92dce802-1683225870026@3c-app-gmx-bs19>
 <1684239928357.2491390025.3682622868@gmx.at>
Message-ID: <CAC2XbFdN9FS05HiMzzV8Cxf8jAbsiYW2mtLcSAB0H_BWqWOorw@mail.gmail.com>

Hi Anita

Are the requested EUR amounts of individual grant proposals also available
anywhere? It would be useful to know the amounts as this is an important
factor to consider. For me, it is a combination of proposal quality,
overall impact and cost - what determines my personal ordering of proposals.

Cheers
Martin


On Tue, May 16, 2023 at 2:30?PM Anita Graser via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Dear QGIS community,
>
> This is a friendly reminder that today is the last day of the QEP
> discussion phase. Please wrap up the discussions.
>
> In the next week, the discussion summaries will be prepared.
>
> Regards,
> Anita
>
>
>
> On Thursday, 04. May 2023 20:44:30 (+02:00), Anita Graser wrote:
>
> Dear QGIS Community,
>
> This is to let you know that the form for grant applications is now closed
> and that we have received 9 complete applications totalling ? 103,600.
>
> As a quick teaser, here are the proposals:
>
> 1. QGIS Bug Tracker cleanup -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/266
> 2. Switch to clang-format for C++ code and implement pre-commit hooks -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/264 and
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/265
> 3. Add vertical CRS handling to QGIS -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/267
> 4. Improve test result handling on QGIS CI -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/268
> 5. Update older annotation items to new framework -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/269
> 6. QGIS Project Loading Performance -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/261
> 7. Conda Installer for macOS -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/270
> 8. Unify the geometric and topological verification and correction
> features in QGIS -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/262
> 9. Porting to C++ and harmonization of Processing algorithms -
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/271
>
> We are now in the QEP discussion phase. Please tag all proposals with the
> Grant-2023 tag:
>
>
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues?q=is%3Aissue+is%3Aopen+label%3AGrant-2023
>
> The QEP discussion phase takes two weeks and ends on Tuesday, 2023-05-16.
> Afterwards, we will proceed to writing discussion summaries (by
> 2023-05-23),
> followed by the voting phase with expected publication of voting results
> on 2023-06-06.
>
> Thank you to everyone who submitted project proposals!
>
> Regards,
> Anita
>
>
>
> --
> Anita Graser
> Home: http://anitagraser.com
> Twitter: @underdarkgis
> Mastodon: @underdarkgis at fosstodon.org
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230516/f18e05d6/attachment.htm>

From rdmailings at duif.net  Wed May 17 00:47:53 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 17 May 2023 09:47:53 +0200
Subject: [QGIS-Developer] Proposal? Set 'Use Proxy for Web Access' default
 ON to 'DefaultProxy'
Message-ID: <9f29a7a5-6f0d-7859-f519-848a04dc39cf@duif.net>

Hi All,

Currently a fresh install/profile has 'Use Proxy for Web Access' UNchecked.

I propose to set it CHECKED and then 'Proxy type' to DefaultProxy (all see Network Settings)

This means that if you are in an environment without proxy, it will not be in your system environment, so will not be used.
While if the admins setup the proper proxy, it will also 'just work'.

Anybody aware of a reason to NOT do this?

Background: working at institutions/companies which often have some kind of proxy enabled, I often have the hassle of making the users aware on how to set the web proxy... (because they often want WMS/WFS layers from outside the local network)...

If we would set it by default to "use system proxy" (for what I know that is also how most browsers are working), that would solve a lot of 'web issues', while (for what I know) would not affect normal use without proxies?

Anybody would have or see an issue with that?

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Thu May 18 00:38:18 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 18 May 2023 09:38:18 +0200
Subject: [QGIS-Developer] Open/position Python console panel not remembered
 between QGIS sessions
Message-ID: <16fa9b55-b568-e31d-1f23-3d403e5aca88@duif.net>

Hi,

Testing something in which I have to run a script in the console several times after a QGIS request, it appeared that the position of the Python console is not remembered.

I have to open it every time myself, even if I dock it in the upper part, together with Temporal Controller and Log Messages. Even then after reopening both Temporal Controller and Log Messages are there, but the Python Console vanished...

Is there a reasoning for this behaviour? Or is it just not saved...

Regards,

Richard Duivenvoorde

From anitagraser at gmx.at  Thu May 18 04:13:45 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Thu, 18 May 2023 11:13:45 +0000
Subject: [QGIS-Developer] 2023 grant applications are now closed
In-Reply-To: <CAC2XbFdN9FS05HiMzzV8Cxf8jAbsiYW2mtLcSAB0H_BWqWOorw@mail.gmail.com>
References: <CAC2XbFdN9FS05HiMzzV8Cxf8jAbsiYW2mtLcSAB0H_BWqWOorw@mail.gmail.com>
Message-ID: <1684407745793.3012780257.4146769726@gmx.at>

Hi Martin,


Thank you for asking. The discussion summaries (including requested budgets) will be prepared for voting members so they can make their decisions. In the meantime, here are the requested amounts per proposal:


Proposal title	Budget	QEP link
QGIS Bug Tracker cleanup	?6,000.00	https://github.com/qgis/QGIS-Enhancement-Proposals/issues/266
Switch to clang-format for C++ code and implement pre-commit hooks	?5,000.00	
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/264 and https://github.com/qgis/QGIS-Enhancement-Proposals/issues/265

Add vertical CRS handling to QGIS	?20,000.00	https://github.com/qgis/QGIS-Enhancement-Proposals/issues/267
Improve test result handling on QGIS CI	?1,000.00	https://github.com/qgis/QGIS-Enhancement-Proposals/issues/268
Update older annotation items to new framework	?8,000.00	https://github.com/qgis/QGIS-Enhancement-Proposals/issues/269
QGIS Project Loading Performance	?16,500.00	https://github.com/qgis/QGIS-Enhancement-Proposals/issues/261
Conda Installer for macOS	?12,100.00	https://github.com/qgis/QGIS-Enhancement-Proposals/issues/270
Unify the geometric and topological verification and correction features in QGIS	?25,000.00	https://github.com/qgis/QGIS-Enhancement-Proposals/issues/236
Porting to C++ and harmonization of Processing algorithms	?10,000.00	https://github.com/qgis/QGIS-Enhancement-Proposals/issues/271

Regards,
Anita


On Tuesday, 16. May 2023 18:14:12 (+02:00), Martin Dobias wrote:


Hi Anita


Are the requested EUR amounts of individual grant proposals also available anywhere? It would be useful to know the amounts as this is an important factor to consider. For me, it is a combination of proposal quality, overall impact and cost - what determines my personal ordering of proposals.


Cheers
Martin




On Tue, May 16, 2023 at 2:30?PM Anita Graser via QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:

Dear QGIS community,


This is a friendly reminder that today is the last day of the QEP discussion phase. Please wrap up the discussions.


In the next week, the discussion summaries will be prepared.


Regards,
Anita




On Thursday, 04. May 2023 20:44:30 (+02:00), Anita Graser wrote:


Dear QGIS Community,
 
This is to let you know that the form for grant applications is now closed and that we have received 9 complete applications totalling ? 103,600.
 
As a quick teaser, here are the proposals:
 
1. QGIS Bug Tracker cleanup - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/266
2. Switch to clang-format for C++ code and implement pre-commit hooks - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/264 and https://github.com/qgis/QGIS-Enhancement-Proposals/issues/265
3. Add vertical CRS handling to QGIS - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/267
4. Improve test result handling on QGIS CI - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/268
5. Update older annotation items to new framework - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/269
6. QGIS Project Loading Performance - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/261
7. Conda Installer for macOS - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/270
8. Unify the geometric and topological verification and correction features in QGIS - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/262
9. Porting to C++ and harmonization of Processing algorithms - https://github.com/qgis/QGIS-Enhancement-Proposals/issues/271
 
We are now in the QEP discussion phase. Please tag all proposals with the Grant-2023 tag:
 
https://github.com/qgis/QGIS-Enhancement-Proposals/issues?q=is%3Aissue+is%3Aopen+label%3AGrant-2023
 
The QEP discussion phase takes two weeks and ends on Tuesday, 2023-05-16.
Afterwards, we will proceed to writing discussion summaries (by 2023-05-23),
followed by the voting phase with expected publication of voting results on 2023-06-06.
 
Thank you to everyone who submitted project proposals!

Regards,
Anita
 

-- 
Anita Graser
Home: http://anitagraser.com
Twitter: @underdarkgis
Mastodon: @underdarkgis at fosstodon.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230518/a9800726/attachment.htm>

From senhor.neto at gmail.com  Fri May 19 06:51:36 2023
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Fri, 19 May 2023 14:51:36 +0100
Subject: [QGIS-Developer] Slow Joins on Virtual Layers
Message-ID: <CA+H0G_Ebt6YRPfOE2R5BC-1ujHyOtMsHzV_EukrHuWYkoJDZXA@mail.gmail.com>

Hi,

I am trying to create a virtual layer that involves an attributes join
between two layers.
something like this:

SELECT
  l.seg_via_rodov_id,
  l.via_rodov_id,
  vr.nome
FROM lig_segviarodov_viarodov as l,
  "Via rodovi?ria" as vr
where vr.identificador = l.via_rodov_id;

These two layer are saved in postgreSQL \ PostGIS and have and there's
actually a foreign key constraint on .via_rodov_id referencing the
vr.identificador.

As a virtual layer, this is painfully slow. Slow to the point of waiting 1
or 2 minutes to get the answer, while the same query on postgresql takes
less than one second.

Not sure if this is expected or not or if it's a bug.

The reason I want to make this query as a virtual layer, instead of loading
it as a postgresql query directly, is because I want to use this relation
information in labels, and I wanted those labels to get updated before I
save the data in the database (to help the editor to understand if a
certain object is already updated or not)

I wonder if there's some workaround to help me with this.

Thanks

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230519/cf4a10fe/attachment.htm>

From pablogabrieldeluca at gmail.com  Sat May 20 12:19:43 2023
From: pablogabrieldeluca at gmail.com (Gabriel De Luca)
Date: Sat, 20 May 2023 16:19:43 -0300
Subject: [QGIS-Developer] Slow Joins on Virtual Layers
In-Reply-To: <CA+H0G_Ebt6YRPfOE2R5BC-1ujHyOtMsHzV_EukrHuWYkoJDZXA@mail.gmail.com>
References: <CA+H0G_Ebt6YRPfOE2R5BC-1ujHyOtMsHzV_EukrHuWYkoJDZXA@mail.gmail.com>
Message-ID: <CAB-dfs3rFWVHoKxKwa_EFGc6z-od76R0szYFGt-siCvP9v59EA@mail.gmail.com>

Hi,

  What I have noticed is that the virtual layer performance drop occurs
only joining spatial tables in PostGIS. If the original tables do not
contain geometry, or if they are stored in another format (I tried
spatialite and shapefile) the performance is normal (a few seconds for an
attributes join, output of 10,000 rows without geometry).

  It also depends on the number of vertices of the source geometries (one
second or less for an attributes join of PostGIS spatial tables, if the
source geometries has only ten vertices). I have not yet tried trimming the
decimal places of the vertex coordinates of the original geometries.

  Despite the fact that the selection does not include the geometry of the
original tables, a minute or more of high network traffic with the server
and cpu usage is observed, as if the geometries resulting from the join of
the features were fully scanned.


Regards,
Gabriel

El vie, 19 may 2023 a la(s) 11:45, Alexandre Neto via QGIS-Developer (
qgis-developer at lists.osgeo.org) escribi?:

> Hi,
>
> I am trying to create a virtual layer that involves an attributes join
> between two layers.
> something like this:
>
> SELECT
>   l.seg_via_rodov_id,
>   l.via_rodov_id,
>   vr.nome
> FROM lig_segviarodov_viarodov as l,
>   "Via rodovi?ria" as vr
> where vr.identificador = l.via_rodov_id;
>
> These two layer are saved in postgreSQL \ PostGIS and have and there's
> actually a foreign key constraint on .via_rodov_id referencing the
> vr.identificador.
>
> As a virtual layer, this is painfully slow. Slow to the point of waiting 1
> or 2 minutes to get the answer, while the same query on postgresql takes
> less than one second.
>
> Not sure if this is expected or not or if it's a bug.
>
> The reason I want to make this query as a virtual layer, instead of
> loading it as a postgresql query directly, is because I want to use this
> relation information in labels, and I wanted those labels to get updated
> before I save the data in the database (to help the editor to understand if
> a certain object is already updated or not)
>
> I wonder if there's some workaround to help me with this.
>
> Thanks
>
> Alexandre Neto
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230520/3d3a13e3/attachment.htm>

From senhor.neto at gmail.com  Sat May 20 16:00:08 2023
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Sat, 20 May 2023 23:00:08 +0000
Subject: [QGIS-Developer] Slow Joins on Virtual Layers
In-Reply-To: <CAB-dfs3rFWVHoKxKwa_EFGc6z-od76R0szYFGt-siCvP9v59EA@mail.gmail.com>
References: <CA+H0G_Ebt6YRPfOE2R5BC-1ujHyOtMsHzV_EukrHuWYkoJDZXA@mail.gmail.com>
 <CAB-dfs3rFWVHoKxKwa_EFGc6z-od76R0szYFGt-siCvP9v59EA@mail.gmail.com>
Message-ID: <d884fb6e-55d6-4d2c-8d94-3c32ab4e0b1d@mail.shortwave.com>

Uhmm... That's good to know.

In this case both layers are non-spatial. I will try saving them in shp and geopackage to test their performance. If the performance is worst with postgis tables, It might be worth opening a ticket.

Alexandre Neto

On Sat May 20, 2023, 07:19 PM GMT, Gabriel De Luca <mailto:pablogabrieldeluca at gmail.com> wrote:
> Hi,
>
> What I have noticed is that the virtual layer performance drop occurs only joining spatial tables in PostGIS. If the original tables do not contain geometry, or if they are stored in another format (I tried spatialite and shapefile) the performance is normal (a few seconds for an attributes join, output of 10,000 rows without geometry).
>
> It also depends on the number of vertices of the source geometries (one second or less for an attributes join of PostGIS spatial tables, if the source geometries has only ten vertices). I have not yet tried trimming the decimal places of the vertex coordinates of the original geometries.
>
> Despite the fact that the selection does not include the geometry of the original tables, a minute or more of high network traffic with the server and cpu usage is observed, as if the geometries resulting from the join of the features were fully scanned.
>
> Regards,
> Gabriel
>
> El vie, 19 may 2023 a la(s) 11:45, Alexandre Neto via QGIS-Developer (qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>) escribi?:
>> Hi,
>>
>> I am trying to create a virtual layer that involves an attributes join between two layers.
>> something like this:
>>
>> SELECT
>> l.seg_via_rodov_id,
>> l.via_rodov_id,
>> vr.nome
>> FROM lig_segviarodov_viarodov as l,
>> "Via rodovi?ria" as vr
>> where vr.identificador = l.via_rodov_id;
>>
>> These two layer are saved in postgreSQL \ PostGIS and have and there's actually a foreign key constraint on .via_rodov_id referencing the vr.identificador.
>>
>> As a virtual layer, this is painfully slow. Slow to the point of waiting 1 or 2 minutes to get the answer, while the same query on postgresql takes less than one second.
>>
>> Not sure if this is expected or not or if it's a bug.
>>
>> The reason I want to make this query as a virtual layer, instead of loading it as a postgresql query directly, is because I want to use this relation information in labels, and I wanted those labels to get updated before I save the data in the database (to help the editor to understand if a certain object is already updated or not)
>>
>> I wonder if there's some workaround to help me with this.
>>
>> Thanks
>>
>> Alexandre Neto
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230520/85d855f3/attachment.htm>

From apasotti at gmail.com  Mon May 22 00:23:24 2023
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 22 May 2023 09:23:24 +0200
Subject: [QGIS-Developer] Next QGIS QT6 update meeting
In-Reply-To: <CAL5Q671rAxd9vfYzkYO133fqDiGc9nGetcjHGxg7oh6ScgQkvw@mail.gmail.com>
References: <CAL5Q6729m=U9x0Qygujq7aUWzWBO8TRVDhTex-+LJgUQWtQcTQ@mail.gmail.com>
 <CAL5Q671rAxd9vfYzkYO133fqDiGc9nGetcjHGxg7oh6ScgQkvw@mail.gmail.com>
Message-ID: <CAL5Q671R-V1i6D1sTc6Rt-R6R9j-+J6NTkN45BCYM1j4wes35Q@mail.gmail.com>

Hi,

for everybody interested, the next QT6 QGIS meeting will be Wednesday
24th may at 11.00am CET time.

Join on https://meet.jit.si/QGIS-QT6

Talk to you soon!


On Tue, May 9, 2023 at 11:11?AM Alessandro Pasotti <apasotti at gmail.com> wrote:
>
> Hi,
>
> Gentle reminder to pick your favorite date/time for the next QT6
> meeting so we can settle the date:
>
> https://doodle.com/meeting/participate/id/bYyqoG9b/
>
> Thank you. Regards
>
> On Fri, Apr 21, 2023 at 12:10?PM Alessandro Pasotti <apasotti at gmail.com> wrote:
> >
> > Hi,
> >
> > Thank you for attending the meeting.
> >
> > As agreed, pick your date:
> >
> > https://doodle.com/meeting/participate/id/bYyqoG9b
> >
> > Kind regards.
> >
> > --
> > Alessandro Pasotti
> > QCooperative:  www.qcooperative.net
> > ItOpen:   www.itopen.it
>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From alroyliz0 at gmail.com  Wed May 24 17:25:31 2023
From: alroyliz0 at gmail.com (Alexis R.L.)
Date: Wed, 24 May 2023 20:25:31 -0400
Subject: [QGIS-Developer] Non-cartesian buffering
Message-ID: <CAOM0XWAHnPxOEZtd8EEWHjMoURp7-rxTMCwLJKjjMiYAC96n_g@mail.gmail.com>

Greetings,

I was looking into buffers and noticed that arc could do geoid buffering
but it's not something qgis could do yet.

Now I'm going to assume that such a thing would usually need to be
implemented in geos and in one of the ticket asking about this, another
repository was pointed to ( https://github.com/libgeos/geos/issues/820).

That repository being https://github.com/google/s2geometry now I don't know
how important generating things based on non-cartesian distance is and if
such tools are to be made if they should be made in QGIS instead of relying
on external libs.

As more and more global and 3D things are added,I assume that those will be
more important.

Thanks,

Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230524/39a495b4/attachment.htm>

From nyall.dawson at gmail.com  Wed May 24 17:47:17 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 25 May 2023 10:47:17 +1000
Subject: [QGIS-Developer] Non-cartesian buffering
In-Reply-To: <CAOM0XWAHnPxOEZtd8EEWHjMoURp7-rxTMCwLJKjjMiYAC96n_g@mail.gmail.com>
References: <CAOM0XWAHnPxOEZtd8EEWHjMoURp7-rxTMCwLJKjjMiYAC96n_g@mail.gmail.com>
Message-ID: <CAB28AsibYUm3-AP4rcWELzkCxFJ5nkPj9WDN4pBjN6hF10pXow@mail.gmail.com>

On Thu, 25 May 2023 at 10:27, Alexis R.L. via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> Greetings,
>
> I was looking into buffers and noticed that arc could do geoid buffering but it's not something qgis could do yet.
>
> Now I'm going to assume that such a thing would usually need to be implemented in geos and in one of the ticket asking about this, another repository was pointed to ( https://github.com/libgeos/geos/issues/820).
>
> That repository being https://github.com/google/s2geometry now I don't know how important generating things based on non-cartesian distance is and if such tools are to be made if they should be made in QGIS instead of relying on external libs.

Unfortunately S2 isn't a sufficiently generic approach in my opinion.
It is designed completely around a spherical earth assumption, so
doesn't work for situations where an ellipsoidal model is required
(and definitely doesn't work for non-earth bodies).

What we need is a library which can perform geographic buffering using
an ellipsoid. Which doesn't exist yet, but
https://geographiclib.sourceforge.io/ would be a good place for this
to exist...

Nyall




>
> As more and more global and 3D things are added,I assume that those will be more important.
>
> Thanks,
>
> Alex
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From patrycja.tatar at wp.pl  Thu May 25 11:04:08 2023
From: patrycja.tatar at wp.pl (=?UTF-8?Q?patrycja=2Etatar=40wp=2Epl?=)
Date: Thu, 25 May 2023 20:04:08 +0200
Subject: [QGIS-Developer] =?utf-8?q?Problem_with_copying_layout=27s_items?=
 =?utf-8?q?_from_a_printlayout_template_to_another_printlayout_template_in?=
 =?utf-8?q?_python?=
Message-ID: <726426835b104af1a74ac62fe24cf02f@grupawp.pl>

Hi, I&#39;m trying to create a qgis plugin in python. And I have a problem with coping layout&#39;s items from one printlayout template to another printlayout template.   When I execute this code:   ? composition.loadFromTemplate(doc, QgsReadWriteContext(), True)  ??????? composition.setName(layoutName)   ??????? layout_model_name = &#34;LayoutNameModel&#34;  ??????? layout_model = project.layoutManager().layoutByName(layout_model_name)   ??????? if layout_model is not None:  ??????????? all_items = layout_wzor.items()  ??????????? for item in all_items:  ??????????????? if isinstance(item, QgsLayoutItemPolyline) or isinstance(item, QgsLayoutItemPicture) or isinstance(item, QgsLayoutItemMap) or isinstance(item, QgsLayoutItemLegend):  ??????????????????? composition.addItem(item_new)    I lose map&#39;s focus during exporting to pdf.   And when I execute this code:   ??????? layout_name1 = &#39;Name_First_Layout&#39;  ??????? layout1 = project.layoutManager().layoutByName(layout_name1)   ??????? layout_name2 = &#39;Name_Second_Layout&#39;  ??????? layout2 = project.layoutManager().layoutByName(layout_name2)   ??????? item_name = &#39;Map 1&#39;  ??????? item1 = layout1.itemById(item_name)    ??????? if item1 and isinstance(item1, QgsLayoutItemMap):  ??????????? item2 = QgsLayoutItemMap(layout2)  ??????????? item2.setRect(item1.rect())   ??????????? item2.setLayers(item1.layers())  ??????????? item2.setExtent(item1.extent())  ??????????? item2.setScale(item1.scale())   ??????????? layout2.addLayoutItem(item2)    The map suddenly disappears from the printlayout during export and is not visible in the pdf file. Although it is visible on list of objects on the right side of the layout.   Maybe you have some idea how to solve this problem?   Thank you for your help ;)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230525/53fc960b/attachment.htm>

From alroyliz0 at gmail.com  Thu May 25 12:38:02 2023
From: alroyliz0 at gmail.com (Alexis R.L.)
Date: Thu, 25 May 2023 15:38:02 -0400
Subject: [QGIS-Developer] Non-cartesian buffering
In-Reply-To: <CAB28AsibYUm3-AP4rcWELzkCxFJ5nkPj9WDN4pBjN6hF10pXow@mail.gmail.com>
References: <CAOM0XWAHnPxOEZtd8EEWHjMoURp7-rxTMCwLJKjjMiYAC96n_g@mail.gmail.com>
 <CAB28AsibYUm3-AP4rcWELzkCxFJ5nkPj9WDN4pBjN6hF10pXow@mail.gmail.com>
Message-ID: <CAOM0XWBqKHCFWB+0d0UgA6_zZOKCDKF=wYp547uGYBemrps4EA@mail.gmail.com>

Greetings,

I've reached out to the author and it seems doable for a point by using
this method (
https://geographiclib.sourceforge.io/Python/doc/code.html#geographiclib.geodesic.Geodesic.Direct
) and using the azimuth to generate the vertices.

My guess would be that for more complex geometries you'd need to find the
angle to the next node, and only generate vertices that are on the outside.
I'll continue to look into it and do some trials.

Thanks for the pointer.

Alex


Le mer. 24 mai 2023 ? 20:47, Nyall Dawson <nyall.dawson at gmail.com> a ?crit :

> On Thu, 25 May 2023 at 10:27, Alexis R.L. via QGIS-Developer
> <qgis-developer at lists.osgeo.org> wrote:
> >
> > Greetings,
> >
> > I was looking into buffers and noticed that arc could do geoid buffering
> but it's not something qgis could do yet.
> >
> > Now I'm going to assume that such a thing would usually need to be
> implemented in geos and in one of the ticket asking about this, another
> repository was pointed to ( https://github.com/libgeos/geos/issues/820).
> >
> > That repository being https://github.com/google/s2geometry now I don't
> know how important generating things based on non-cartesian distance is and
> if such tools are to be made if they should be made in QGIS instead of
> relying on external libs.
>
> Unfortunately S2 isn't a sufficiently generic approach in my opinion.
> It is designed completely around a spherical earth assumption, so
> doesn't work for situations where an ellipsoidal model is required
> (and definitely doesn't work for non-earth bodies).
>
> What we need is a library which can perform geographic buffering using
> an ellipsoid. Which doesn't exist yet, but
> https://geographiclib.sourceforge.io/ would be a good place for this
> to exist...
>
> Nyall
>
>
>
>
> >
> > As more and more global and 3D things are added,I assume that those will
> be more important.
> >
> > Thanks,
> >
> > Alex
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230525/26452b52/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Thu May 25 20:17:58 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Fri, 26 May 2023 03:17:58 +0000
Subject: [QGIS-Developer] core.QgsProcessingException: An error occurred
 while performing the calculation
Message-ID: <5aac16a47c7c4786935cab3d55088157@erdc.dren.mil>

I am trying to run a rastercalculator through a call to its python method and I get the error message core.QgsProcessingException: An error occurred while performing the calculation.  Not a very intuitive message.

The variable _cutfill_nodata_file used in the code below is a path to a result from a previous geoprocessing call and the file does exist, but the call to rastercalculator  seems to have an issue with that file.  If I replace _cutfill_nodata_file with self._elevation_layer.dataProvider().dataSourceUri()}@1 it works.  Not what I want to do, but just wanted to test nothing odd about my expression.  Do that basically adds the same layer to itself so I am doubling the cell values.  I want to add the values in the file _cutfill_nodata_file, but when I use that file, I get the error below. I tried using just the layer name and band which is what is used in the GUI raster calculator, but that does not work and I expect it to not as I think it only works if the layers are in the layer panel which they are not, they are in a temp folder, so I am calling the method using the file names.

elevation_30m_cutfill_file = os.path.join(self._temp_dir.name, f"{self._elevation_layer.name()}_{self.cutfill_layer.name()}.tif")
elevation_30m_cutfill_name = os.path.splitext(os.path.basename(elevation_30m_cutfill_file))[0]
expression = f'\"{self._elevation_layer.dataProvider().dataSourceUri()}@1\" + \"{_cutfill_nodata_file}@1\"'
processing.run(
            "qgis:rastercalculator",
            {
                'EXPRESSION':expression,
                'LAYERS':[self._elevation_layer.dataProvider().dataSourceUri()],
                'CELLSIZE':0,
                'EXTENT':None,
                'CRS':None,
                'OUTPUT':elevation_30m_cutfill_file
            }
        )

  File "C:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\cutfill\cutfill_dialog.py", line 745, in _calculate_cutfill_elevation_layer
              processing.run(
              File "C:\PROGRA~1/QGIS31~1.16/apps/qgis-ltr/./python/plugins\processing\tools\general.py", line 108, in run
              return Processing.runAlgorithm(algOrName, parameters, onFinish, feedback, context)
              File "C:\PROGRA~1/QGIS31~1.16/apps/qgis-ltr/./python/plugins\processing\core\Processing.py", line 174, in runAlgorithm
              ret, results = execute(alg, parameters, context, feedback, catch_exceptions=False)
              File "C:\PROGRA~1/QGIS31~1.16/apps/qgis-ltr/./python/plugins\processing\gui\AlgorithmExecutor.py", line 71, in execute
              results, ok = alg.run(parameters, context, feedback, {}, False)
             _core.QgsProcessingException: An error occurred while performing the calculation
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/7706dd53/attachment.htm>

From julien.moura at oslandia.com  Fri May 26 01:57:48 2023
From: julien.moura at oslandia.com (Julien Moura)
Date: Fri, 26 May 2023 10:57:48 +0200
Subject: [QGIS-Developer] Structured list of QGIS versions with flags?
Message-ID: <c99a6494-8616-a435-ebc7-8e42327fec10@oslandia.com>

Hello QGIS dev community,

Is there a publicly accessible structured file (JSON, CSV, etc.) that 
lists QGIS versions and their status: deprecated, development, LTR, etc.?

Regards,
Julien
-------------- next part --------------
A non-text attachment was scrubbed...
Name: julien_moura.vcf
Type: text/vcard
Size: 351 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/6fb18e44/attachment.vcf>

From regis.haubourg at gmail.com  Fri May 26 03:37:49 2023
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Fri, 26 May 2023 12:37:49 +0200
Subject: [QGIS-Developer] Structured list of QGIS versions with flags?
In-Reply-To: <c99a6494-8616-a435-ebc7-8e42327fec10@oslandia.com>
References: <c99a6494-8616-a435-ebc7-8e42327fec10@oslandia.com>
Message-ID: <CABgOYCeVzTGmoP=caQjbVMVv_YwLj5o3NdNbLb_BryFaxZVJzQ@mail.gmail.com>

Hi Julien,
not sure if this is the real source of truth, but the git history of this
file seems pretty structured :
https://github.com/qgis/QGIS-Website/blob/master/source/schedule.py

OIherwise git tags of main repo may do the trick.
Ciao


Le ven. 26 mai 2023 ? 10:58, Julien Moura via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hello QGIS dev community,
>
> Is there a publicly accessible structured file (JSON, CSV, etc.) that
> lists QGIS versions and their status: deprecated, development, LTR, etc.?
>
> Regards,
> Julien
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/5fc422b6/attachment-0001.htm>

From bo.victor.thomsen at gmail.com  Fri May 26 03:52:56 2023
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Fri, 26 May 2023 12:52:56 +0200
Subject: [QGIS-Developer] Lazy question about using views in GeoPackages
Message-ID: <b77b1fec-a82b-9d64-d47e-2fe2bda1986b@gmail.com>

Hi list -

Recently, I've begun experimenting with creating spatial view's of 
base-tables inside GeoPackages. A Geopackage is basically a SQLite file 
containing? spatial data- and meta-tables with specific structures of 
information about the spatial tables.

So it's possible to create a permanent view of a table (or tables) in 
the GeoPackage by making a functioning SQL select statement and 
prefixing it with "CREATE VIEW /view_name/ AS .. /the select statement/ 
.. (This is database 101 knowledge)

However, if you want to expose those views as "read-only" tables/layers 
for "non-sql-using" QGIS users? you have to update several meta-tables 
in the GeoPackage: /gpkg_contents/, /gpkg_geometry_columns/ and maybe 
/gpkg_ogr_contents/.

I'm brainstorming with myself about making some kind of automated 
updating of the meta-tables with information about the views created. 
Maybe some python code and maybe creating triggers for the base table to 
handle data changes regarding the extend of the data.

And now (at last !!) my question: I haven't been able to find very much 
information about this subject using Google or StackExchange. So.. Is 
there some existing code / plugin / information so I don't have to 
"reinvent the wheel" ?


-- 
Med venlig hilsen / Best regards

Bo Victor Thomsen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/b29f1266/attachment.htm>

From SSchmidt at gfi-gis.de  Fri May 26 03:56:32 2023
From: SSchmidt at gfi-gis.de (SSchmidt at gfi-gis.de)
Date: Fri, 26 May 2023 12:56:32 +0200
Subject: [QGIS-Developer] no default value in style.qml
Message-ID: <OFCFD9DA1A.045EBC00-ONC12589BB.003A7648-C12589BB.003D57CC@gfi-gis.de>

Hello,

I want to setup a formular for a vectorlayer. For a field(text or number) 
I want to have a default value. I assumed to achieve this with 
QgsEditorWidgetSetup. 

To learn how the notation should be, I tried to save an example in 
QGIS(3.16, 3.22.16, master) directly in a style.qml file. But there is no 
entry for a default value. If I load the style.qml to a new layer, QGIS 
doesn't show my default values.

So is this an error or? Or is it unmeant to save default values in a 
style? If so, how can I set a default value to a field in c++?

Freundliche Gr??e aus Leipzig
Susann Schmidt
Softwareentwicklung 

**************************************************************

GFI - Gesellschaft f?r Informationstechnologie mbH
Philipp-Rosenthal-Stra?e 9
D-04103 Leipzig
Gesch?ftsf?hrer: Andreas Richter
Amtsgericht Leipzig HRB 12054
USt.-IdNr.: DE179049354     Steuer-Nr.: 231/109/06412
Tel. 0341 961 3310    Fax 0341 961 3311   Mail info at gfi-gis.de
Web  www.gfi-gis.de
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/3e56206a/attachment.htm>

From julien.moura at oslandia.com  Fri May 26 04:23:33 2023
From: julien.moura at oslandia.com (Julien Moura)
Date: Fri, 26 May 2023 13:23:33 +0200
Subject: [QGIS-Developer] Structured list of QGIS versions with flags?
In-Reply-To: <CABgOYCeVzTGmoP=caQjbVMVv_YwLj5o3NdNbLb_BryFaxZVJzQ@mail.gmail.com>
References: <c99a6494-8616-a435-ebc7-8e42327fec10@oslandia.com>
 <CABgOYCeVzTGmoP=caQjbVMVv_YwLj5o3NdNbLb_BryFaxZVJzQ@mail.gmail.com>
Message-ID: <ee09bcf6-60a9-9e8e-8217-0f05627c199f@oslandia.com>

Hi R?gis,

So, the answer is no but good news: the information is publicly 
available! Thanks for your answer and point me to these files :). I was 
looking to the schedule.ics but it's incomplete (no flags).

I'm going to work with it (github tags) and see if I can automatically 
generate a JSON file.

Regards

Le 26/05/2023 ? 12:37, R?gis Haubourg a ?crit?:
> Hi Julien,
> not sure if this is the real source of truth, but the git history of 
> this file seems pretty structured : 
> https://github.com/qgis/QGIS-Website/blob/master/source/schedule.py
>
> OIherwise git tags of main repo may do the trick.
> Ciao
>
>
> Le?ven. 26 mai 2023 ??10:58, Julien Moura via QGIS-Developer 
> <qgis-developer at lists.osgeo.org> a ?crit?:
>
>     Hello QGIS dev community,
>
>     Is there a publicly accessible structured file (JSON, CSV, etc.) that
>     lists QGIS versions and their status: deprecated, development,
>     LTR, etc.?
>
>     Regards,
>     Julien
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/16453b89/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: julien_moura.vcf
Type: text/vcard
Size: 351 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/16453b89/attachment.vcf>

From regis.haubourg at gmail.com  Fri May 26 04:41:57 2023
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Fri, 26 May 2023 13:41:57 +0200
Subject: [QGIS-Developer] Structured list of QGIS versions with flags?
In-Reply-To: <ee09bcf6-60a9-9e8e-8217-0f05627c199f@oslandia.com>
References: <c99a6494-8616-a435-ebc7-8e42327fec10@oslandia.com>
 <CABgOYCeVzTGmoP=caQjbVMVv_YwLj5o3NdNbLb_BryFaxZVJzQ@mail.gmail.com>
 <ee09bcf6-60a9-9e8e-8217-0f05627c199f@oslandia.com>
Message-ID: <CABgOYCdWQL+RUQgzAdEzToJicLGryB=ec9XCUEc8ibBBiAUKjQ@mail.gmail.com>

Okay, what's your need in the end? Having such a file / webservice could be
discussed for sure. I'm pretty sure an archive page would be nice in QGIS
website.
All the best


Le ven. 26 mai 2023 ? 13:23, Julien Moura <julien.moura at oslandia.com> a
?crit :

> Hi R?gis,
>
> So, the answer is no but good news: the information is publicly available!
> Thanks for your answer and point me to these files :). I was looking to the
> schedule.ics but it's incomplete (no flags).
>
> I'm going to work with it (github tags) and see if I can automatically
> generate a JSON file.
>
> Regards
> Le 26/05/2023 ? 12:37, R?gis Haubourg a ?crit :
>
> Hi Julien,
> not sure if this is the real source of truth, but the git history of this
> file seems pretty structured :
> https://github.com/qgis/QGIS-Website/blob/master/source/schedule.py
>
> OIherwise git tags of main repo may do the trick.
> Ciao
>
>
> Le ven. 26 mai 2023 ? 10:58, Julien Moura via QGIS-Developer <
> qgis-developer at lists.osgeo.org> a ?crit :
>
>> Hello QGIS dev community,
>>
>> Is there a publicly accessible structured file (JSON, CSV, etc.) that
>> lists QGIS versions and their status: deprecated, development, LTR, etc.?
>>
>> Regards,
>> Julien
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/16b21d0d/attachment.htm>

From afernandez at odyhpc.com  Fri May 26 14:00:25 2023
From: afernandez at odyhpc.com (afernandez)
Date: Fri, 26 May 2023 21:00:25 +0000
Subject: [QGIS-Developer] How to speed up rendering
Message-ID: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>

Hello,
One of my project would greatly benefit from a much faster rendering. After 
some testing, the bulk (>99%) of the time is spent at rendering the layer 
with QgsRasterLayer(...,...). What I have also noticed is that rendering 
time does not change with the number of cores, which suggests that the 
renderer might be using a single thread. I checked the API documentation 
but couldn't find anything about multithreading or some other procedure to 
accelerate rendering. I was wondering if anyone has any suggestion or has 
faced a similar difficulty. 
Thanks. 
(Note: The data provider is 'gdal' and I'm using QGIS-3.30) 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230526/4276bf1d/attachment.htm>

From bernd.vogelgesang at gmx.de  Sat May 27 05:12:22 2023
From: bernd.vogelgesang at gmx.de (Bernd Vogelgesang)
Date: Sat, 27 May 2023 14:12:22 +0200
Subject: [QGIS-Developer] Lazy question about using views in GeoPackages
In-Reply-To: <b77b1fec-a82b-9d64-d47e-2fe2bda1986b@gmail.com>
References: <b77b1fec-a82b-9d64-d47e-2fe2bda1986b@gmail.com>
Message-ID: <b53a9969-7429-1970-3290-ac27feece317@gmx.de>

Hi,

no first-hand experiences myself, but a friend once tried to do those
views with Geopackage.
Coming from views with Spatialite, it felt like a pita for him, so he
reverted to Spatialite and can not recommend a Geopackage approach.
So, seems you will indeed have to reinvent the wheel.

Cheers,
Bernd

Am 26.05.23 um 12:52 schrieb Bo Victor Thomsen via QGIS-Developer:
> Hi list -
>
> Recently, I've begun experimenting with creating spatial view's of
> base-tables inside GeoPackages. A Geopackage is basically a SQLite file
> containing? spatial data- and meta-tables with specific structures of
> information about the spatial tables.
>
> So it's possible to create a permanent view of a table (or tables) in
> the GeoPackage by making a functioning SQL select statement and
> prefixing it with "CREATE VIEW /view_name/ AS .. /the select statement/
> .. (This is database 101 knowledge)
>
> However, if you want to expose those views as "read-only" tables/layers
> for "non-sql-using" QGIS users? you have to update several meta-tables
> in the GeoPackage: /gpkg_contents/, /gpkg_geometry_columns/ and maybe
> /gpkg_ogr_contents/.
>
> I'm brainstorming with myself about making some kind of automated
> updating of the meta-tables with information about the views created.
> Maybe some python code and maybe creating triggers for the base table to
> handle data changes regarding the extend of the data.
>
> And now (at last !!) my question: I haven't been able to find very much
> information about this subject using Google or StackExchange. So.. Is
> there some existing code / plugin / information so I don't have to
> "reinvent the wheel" ?
>
>
> --
> Med venlig hilsen / Best regards
>
> Bo Victor Thomsen
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Sun May 28 21:01:08 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 29 May 2023 14:01:08 +1000
Subject: [QGIS-Developer] Call of testing of nightlies on hi-dpi displays
Message-ID: <CAB28AshVeSS_KY28+BzK0cMpLf+G1YiXs6VkdbMBV1v5Cejf1Q@mail.gmail.com>

Hi lists,

For the upcoming QGIS 3.32 release a change has been made in how QGIS
handles high dpi (and retina) displays. This should ultimately make
QGIS behave MUCH better on these displays, but there's likely some
short-term fallout and regressions caused by the change.

If you've access to a high-dpi display, please test out the nightly
releases and file bug reports on github for any regressions you spot
-- in particular we are looking for widgets and places where the QGIS
interface is now looking pixelated or where the scale / sizes of
objects are incorrect.

(Currently there's known regressions for the icons shown in the layer
tree panel, and for pixelated icons in the style manager dialog.)

Thanks in advance!
Nyall

From rdmailings at duif.net  Mon May 29 02:23:32 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 29 May 2023 11:23:32 +0200
Subject: [QGIS-Developer] Call of testing of nightlies on hi-dpi displays
In-Reply-To: <CAB28AshVeSS_KY28+BzK0cMpLf+G1YiXs6VkdbMBV1v5Cejf1Q@mail.gmail.com>
References: <CAB28AshVeSS_KY28+BzK0cMpLf+G1YiXs6VkdbMBV1v5Cejf1Q@mail.gmail.com>
Message-ID: <291ced80-de93-1194-7ec8-e9f59322c678@duif.net>

Hi Nyall,

Happy to do some testing, I do have a (dual boot) laptop/tablet with 3000x2000 screen (that's high-dpi, yes?), but in Gnome I set the Display 'Scale' on 200% to have proper applications (an to me readable text :-) ).

Is there some test plan/idea's?
Is my setup something you want to test (200%), or is is preferred to use the 100% scale?
I'm not sure what is supposed to be the 'normal' way of scaling (like what does a mac do)?
Or is it more to try to see if the icons/widgets scale up/down when fidling with scale (or what it is called in Windows)?

Regards,

Richard Duivenvoorde

On 5/29/23 06:01, Nyall Dawson via QGIS-Developer wrote:
> Hi lists,
> 
> For the upcoming QGIS 3.32 release a change has been made in how QGIS
> handles high dpi (and retina) displays. This should ultimately make
> QGIS behave MUCH better on these displays, but there's likely some
> short-term fallout and regressions caused by the change.
> 
> If you've access to a high-dpi display, please test out the nightly
> releases and file bug reports on github for any regressions you spot
> -- in particular we are looking for widgets and places where the QGIS
> interface is now looking pixelated or where the scale / sizes of
> objects are incorrect.
> 
> (Currently there's known regressions for the icons shown in the layer
> tree panel, and for pixelated icons in the style manager dialog.)
> 
> Thanks in advance!
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From wonder.sk at gmail.com  Mon May 29 02:43:46 2023
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 29 May 2023 11:43:46 +0200
Subject: [QGIS-Developer] How to speed up rendering
In-Reply-To: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
References: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
Message-ID: <CAC2XbFdWLu-0VKRWYK-YF0XSN5FSoFHfX8Ztm6R6HTfcPa4MNw@mail.gmail.com>

Hi

On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hello,
> One of my project would greatly benefit from a much faster rendering.
> After some testing, the bulk (>99%) of the time is spent at rendering the
> layer with QgsRasterLayer(...,...). What I have also noticed is that
> rendering time does not change with the number of cores, which suggests
> that the renderer might be using a single thread. I checked the API
> documentation but couldn't find anything about multithreading or some other
> procedure to accelerate rendering. I was wondering if anyone has any
> suggestion or has faced a similar difficulty.
>

Multi-threaded rendering is done at the granularity of whole map layers, so
a single layer is rendered by a single CPU core. Therefore if you have just
one layer that is slow to render, the multi-threading is not going to help.
It is best to do some testing how you can improve the layer's rendering -
for example, it could be that you are using some sub-optimal raster format,
or there are overviews missing, or something else... one would need more
details.

Regards
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230529/cfc08099/attachment.htm>

From qgis-dev at stripfamily.net  Mon May 29 05:46:36 2023
From: qgis-dev at stripfamily.net (David Strip)
Date: Mon, 29 May 2023 06:46:36 -0600
Subject: [QGIS-Developer] Call of testing of nightlies on hi-dpi displays
In-Reply-To: <291ced80-de93-1194-7ec8-e9f59322c678@duif.net>
References: <CAB28AshVeSS_KY28+BzK0cMpLf+G1YiXs6VkdbMBV1v5Cejf1Q@mail.gmail.com>
 <291ced80-de93-1194-7ec8-e9f59322c678@duif.net>
Message-ID: <4c5c1e01-1ce7-1f8d-426f-1d7bddbd89ed@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230529/31e7a08b/attachment.htm>

From nyall.dawson at gmail.com  Mon May 29 16:10:51 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 30 May 2023 09:10:51 +1000
Subject: [QGIS-Developer] Call of testing of nightlies on hi-dpi displays
In-Reply-To: <291ced80-de93-1194-7ec8-e9f59322c678@duif.net>
References: <CAB28AshVeSS_KY28+BzK0cMpLf+G1YiXs6VkdbMBV1v5Cejf1Q@mail.gmail.com>
 <291ced80-de93-1194-7ec8-e9f59322c678@duif.net>
Message-ID: <CAB28AsjS-RvvMNwtZy-6Ae3FXu5=u=-rCcnan993pZ4AbOFabw@mail.gmail.com>

On Mon, 29 May 2023 at 19:23, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> Hi Nyall,
>
> Happy to do some testing, I do have a (dual boot) laptop/tablet with 3000x2000 screen (that's high-dpi, yes?), but in Gnome I set the Display 'Scale' on 200% to have proper applications (an to me readable text :-) ).
>
> Is there some test plan/idea's?

There's a few things in particular we need to identify:

- Widgets which are now showing as pixelated. Basically just hunt
through the UI looking for things which look pixelated! This might be
icons, graphics, or even just the drawing of the widget itself. You'll
spot them immediately, as they clearly stand out. But there's a LOT of
different dialogs/tabs/widgets/pages/... in QGIS and it will take some
time to hunt through them all.
- Icons/images which look the wrong size. Eg the marker symbols shown
in the layer tree right now are incorrectly sized and will be half the
size of the actual symbol shown on the map. That's a known regression,
but there's likely others like this hiding around the place.
- Text which is the wrong size. If something has a hard-coded sizing
it's possible that we'll get fonts scaled badly, so if you spot any
text which noticably looks incorrectly sized vs other UI elements then
that's also something we need to fix.

> Is my setup something you want to test (200%), or is is preferred to use the 100% scale?

This is EXACTLY the kind of setup we need testing on! If the display
scaling is set to 100% (in Windows, or Linux), then you'll see no
difference between the old approach vs new. The new logic only kicks
in when display scaling is present.

> I'm not sure what is supposed to be the 'normal' way of scaling (like what does a mac do)?

Things should just look perfect, regardless of whether or not display
scaling is active :)

Nyall

> Or is it more to try to see if the icons/widgets scale up/down when fidling with scale (or what it is called in Windows)?
>
> Regards,
>
> Richard Duivenvoorde
>
> On 5/29/23 06:01, Nyall Dawson via QGIS-Developer wrote:
> > Hi lists,
> >
> > For the upcoming QGIS 3.32 release a change has been made in how QGIS
> > handles high dpi (and retina) displays. This should ultimately make
> > QGIS behave MUCH better on these displays, but there's likely some
> > short-term fallout and regressions caused by the change.
> >
> > If you've access to a high-dpi display, please test out the nightly
> > releases and file bug reports on github for any regressions you spot
> > -- in particular we are looking for widgets and places where the QGIS
> > interface is now looking pixelated or where the scale / sizes of
> > objects are incorrect.
> >
> > (Currently there's known regressions for the icons shown in the layer
> > tree panel, and for pixelated icons in the style manager dialog.)
> >
> > Thanks in advance!
> > Nyall
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

From afernandez at odyhpc.com  Mon May 29 19:35:53 2023
From: afernandez at odyhpc.com (afernandez)
Date: Tue, 30 May 2023 02:35:53 +0000
Subject: [QGIS-Developer] How to speed up rendering
References: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
 <CAC2XbFdWLu-0VKRWYK-YF0XSN5FSoFHfX8Ztm6R6HTfcPa4MNw@mail.gmail.com>
Message-ID: <e4867467c3728.ad83e8afff7c4@odyhpc.com>

Hello Martin,
I'm trying to understand what you're saying but my background is in numerical methods where tasks are split into threads for acceleration purposes. If a single layer is rendered by a single core (as you write and I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? (However, you want to define 'too long'). 
As far as more details about the process, the tensor 'var' (n x m x index where I have tried different combinations but let's say n x m is 100 x 200) of floating point numbers is manipulated according to the following pseudo-code:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This procedure seems to work well and takes a reasonable amount of time. Then, the time is consumed when doing the rendering itself. I'm not entirely sure what you mean by 'sub-optimal raster format' or 'thre are overviews missing' so I cannot address them specifically.
Thanks,
Arturo
Martin Dobias wrote:
Hi
On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org> > wrote:
Hello,
One of my project would greatly benefit from a much faster rendering. After some testing, the bulk (>99%) of the time is spent at rendering the layer with QgsRasterLayer(...,...). What I have also noticed is that rendering time does not change with the number of cores, which suggests that the renderer might be using a single thread. I checked the API documentation but couldn't find anything about multithreading or some other procedure to accelerate rendering. I was wondering if anyone has any suggestion or has faced a similar difficulty. 
Multi-threaded rendering is done at the granularity of whole map layers, so a single layer is rendered by a single CPU core. Therefore if you have just one layer that is slow to render, the multi-threading is not going to help. It is best to do some testing how you can improve the layer's rendering - for example, it could be that you are using some sub-optimal raster format, or there are overviews missing, or something else... one would need more details.
Regards
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230530/f1d5c678/attachment.htm>

From johannes.kroeger at wheregroup.com  Tue May 30 01:00:42 2023
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Tue, 30 May 2023 10:00:42 +0200
Subject: [QGIS-Developer] How to speed up rendering
In-Reply-To: <e4867467c3728.ad83e8afff7c4@odyhpc.com>
References: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
 <CAC2XbFdWLu-0VKRWYK-YF0XSN5FSoFHfX8Ztm6R6HTfcPa4MNw@mail.gmail.com>
 <e4867467c3728.ad83e8afff7c4@odyhpc.com>
Message-ID: <3ea1f315-669a-6d32-e5c6-7bbbc74e153f@wheregroup.com>

Hi Arturo,

make sure you create overviews on your big rasters or QGIS will re-read 
the whole file all the time to render an appropriate representation in 
the map.

Cheers, Hannes

Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
> Hello Martin,
> I'm trying to understand what you're saying but my background is in 
> numerical methods where tasks are split into threads for acceleration 
> purposes. If a single layer is rendered by a single core (as you write 
> and I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) 
> layer be handled? Wouldn't it take too long? (However, you want to 
> define 'too long').
> As far as more details about the process, the tensor 'var' (n x m x 
> index where I have tried different combinations but let's say n x m is 
> 100 x 200) of floating point numbers is manipulated according to the 
> following pseudo-code:
> # Initial manipulations
> ? ? ? ? ? ? dims = var.dimensions
> ? ? ? ? ? ? shape = var.shape
> ? ? ? ? ? ? driver_name = 'GTIFF'
> ? ? ? ? ? ? driver = gdal.GetDriverByName(driver_name)
> ? ? ? ? ? ? np_dtype = var.dtype
> ? ? ? ? ? ? type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
> ? ? ? ? ? ? gdal_ds = driver.Create(_my_path_, cols, rows, 1, 
> gdal.GDT_UInt16)
> gdal_ds.SetProjection(_my_projection_)
> gdal_ds.SetGeoTransform(_my_transformation_)
> # Creation of the bands and scaled matrix
> ? ? ? ? ? ? band = gdal_ds.GetRasterBand(1)
> ? ? ? ? ? ? data = var[_chosen_index_]
> ? ? ? ? ? ? data = ma.getdata(data)
> ? ? ? ? ? ? data_scaled =? np.interp(data, (data.min(), data.max()), 
> (0, 255))
> ? ? ? ? ? ? data_scaled2 = data_scaled.astype(int) # This is to 
> rescale into integers so that it can color the layer
> # *** Lines to set up the color palette ***
> # Write the array to band once everything has been rescaled
> ? ? ? ? ? ? band.WriteArray(data_scaled2)
> ? ? ? ? ? ? gdal_ds.FlushCache()
>
> This procedure seems to work well and takes a reasonable amount of 
> time. Then, the time is consumed when doing the rendering itself. I'm 
> not entirely sure what you mean by 'sub-optimal raster format' or 
> 'thre are overviews missing' so I cannot address them specifically.
> Thanks,
> Arturo
>
>
>
>
> Martin Dobias wrote:
>
>
>> Hi
>>
>> On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer 
>> <qgis-developer at lists.osgeo.org> wrote:
>>
>>     Hello,
>>     One of my project would greatly benefit from a much faster
>>     rendering. After some testing, the bulk (>99%) of the time is
>>     spent at rendering the layer with QgsRasterLayer(...,...). What I
>>     have also noticed is that rendering time does not change with the
>>     number of cores, which suggests that the renderer might be using
>>     a single thread. I checked the API documentation but couldn't
>>     find anything about multithreading or some other procedure to
>>     accelerate rendering. I was wondering if anyone has any
>>     suggestion or has faced a similar difficulty.
>>
>>
>> Multi-threaded rendering is done at the granularity of whole map 
>> layers, so a single layer is rendered by a single CPU core. Therefore 
>> if you have just one layer that is slow to render, the 
>> multi-threading is not going to help. It is best to do some testing 
>> how you can improve the layer's rendering - for example, it could be 
>> that you are using some sub-optimal raster format, or there are 
>> overviews missing, or something else... one would need more details.
>>
>> Regards
>> Martin
>>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei derwww.foss-academy.com
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230530/428520ac/attachment-0001.htm>

From afernandez at odyhpc.com  Tue May 30 05:37:34 2023
From: afernandez at odyhpc.com (afernandez)
Date: Tue, 30 May 2023 12:37:34 +0000
Subject: [QGIS-Developer] How to speed up rendering
References: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
 <CAC2XbFdWLu-0VKRWYK-YF0XSN5FSoFHfX8Ztm6R6HTfcPa4MNw@mail.gmail.com>
 <e4867467c3728.ad83e8afff7c4@odyhpc.com>
 <3ea1f315-669a-6d32-e5c6-7bbbc74e153f@wheregroup.com>
Message-ID: <94f0f2109f8d9.1cf2e804640c7@odyhpc.com>

Hello Hannes,
Sorry to say that I'm at a loss here. I had not previously heard of 'overviews' and am having a hard time finding much information. I couldn't find anything in the PyQGIS (v3.28) developer cookbook, which is my main reference in this QGIS journey. The found information is at https://docs.qgis.org/3.28/en/docs/user_manual/processing_algs/gdal/rastermiscellaneous.html but didn't exactly clarify how to implement overviews with a script or why this would sidestep reading the file several times. I don't quite understand this last point either, as the file is large but the size of the band (after everything is prepped and before rendering) is relatively small, and should fit amply into the available memory.
Thanks,
Arturo
Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
Hi Arturo,
make sure you create overviews on your big rasters or QGIS will re-read the whole file all the time to render an appropriate representation in the map.
Cheers, Hannes
Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
Hello Martin,
I'm trying to understand what you're saying but my background is in numerical methods where tasks are split into threads for acceleration purposes. If a single layer is rendered by a single core (as you write and I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? (However, you want to define 'too long'). 
As far as more details about the process, the tensor 'var' (n x m x index where I have tried different combinations but let's say n x m is 100 x 200) of floating point numbers is manipulated according to the following pseudo-code:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This procedure seems to work well and takes a reasonable amount of time. Then, the time is consumed when doing the rendering itself. I'm not entirely sure what you mean by 'sub-optimal raster format' or 'thre are overviews missing' so I cannot address them specifically.
Thanks,
Arturo
Martin Dobias wrote:
Hi
On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org> > wrote:
Hello,
One of my project would greatly benefit from a much faster rendering. After some testing, the bulk (>99%) of the time is spent at rendering the layer with QgsRasterLayer(...,...). What I have also noticed is that rendering time does not change with the number of cores, which suggests that the renderer might be using a single thread. I checked the API documentation but couldn't find anything about multithreading or some other procedure to accelerate rendering. I was wondering if anyone has any suggestion or has faced a similar difficulty. 
Multi-threaded rendering is done at the granularity of whole map layers, so a single layer is rendered by a single CPU core. Therefore if you have just one layer that is slow to render, the multi-threading is not going to help. It is best to do some testing how you can improve the layer's rendering - for example, it could be that you are using some sub-optimal raster format, or there are overviews missing, or something else... one would need more details.
Regards
Martin
_______________________________________________ QGIS-Developer mailing list QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> -- Johannes Kr?ger / GIS-Entwickler/-Berater --------------------------------------------- Aufwind durch Wissen! Web-Seminare und Online-Schulungen bei der www.foss-academy.com <http://www.foss-academy.com> --------------------------------------------- WhereGroup GmbH c/o KK03 GmbH Lange Reihe 29 20099 Hamburg Germany Tel: +49 (0)228 / 90 90 38 - 36 Fax: +49 (0)228 / 90 90 38 - 11 johannes.kroeger at wheregroup.com <mailto:johannes.kroeger at wheregroup.com> www.wheregroup.com <http://www.wheregroup.com> Gesch?ftsf?hrer: Olaf Knopp, Peter Stamm Amtsgericht Bonn, HRB 9885 ------------------------------- 
Hi Arturo,
make sure you create overviews on your big rasters or QGIS will re-read the whole file all the time to render an appropriate representation in the map.
Cheers, Hannes
Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
Hello Martin,
I'm trying to understand what you're saying but my background is in numerical methods where tasks are split into threads for acceleration purposes. If a single layer is rendered by a single core (as you write and I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? (However, you want to define 'too long'). 
As far as more details about the process, the tensor 'var' (n x m x index where I have tried different combinations but let's say n x m is 100 x 200) of floating point numbers is manipulated according to the following pseudo-code:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This procedure seems to work well and takes a reasonable amount of time. Then, the time is consumed when doing the rendering itself. I'm not entirely sure what you mean by 'sub-optimal raster format' or 'thre are overviews missing' so I cannot address them specifically.
Thanks,
Arturo
Martin Dobias wrote:
Hi
On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org> > wrote:
Hello,
One of my project would greatly benefit from a much faster rendering. After some testing, the bulk (>99%) of the time is spent at rendering the layer with QgsRasterLayer(...,...). What I have also noticed is that rendering time does not change with the number of cores, which suggests that the renderer might be using a single thread. I checked the API documentation but couldn't find anything about multithreading or some other procedure to accelerate rendering. I was wondering if anyone has any suggestion or has faced a similar difficulty. 
Multi-threaded rendering is done at the granularity of whole map layers, so a single layer is rendered by a single CPU core. Therefore if you have just one layer that is slow to render, the multi-threading is not going to help. It is best to do some testing how you can improve the layer's rendering - for example, it could be that you are using some sub-optimal raster format, or there are overviews missing, or something else... one would need more details.
Regards
Martin
_______________________________________________ QGIS-Developer mailing list QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> -- Johannes Kr?ger / GIS-Entwickler/-Berater --------------------------------------------- Aufwind durch Wissen! Web-Seminare und Online-Schulungen bei der www.foss-academy.com <http://www.foss-academy.com> --------------------------------------------- WhereGroup GmbH c/o KK03 GmbH Lange Reihe 29 20099 Hamburg Germany Tel: +49 (0)228 / 90 90 38 - 36 Fax: +49 (0)228 / 90 90 38 - 11 johannes.kroeger at wheregroup.com <mailto:johannes.kroeger at wheregroup.com> www.wheregroup.com <http://www.wheregroup.com> Gesch?ftsf?hrer: Olaf Knopp, Peter Stamm Amtsgericht Bonn, HRB 9885 ------------------------------- 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230530/48c434ed/attachment-0001.htm>

From andreas at qgis.org  Tue May 30 07:15:15 2023
From: andreas at qgis.org (Andreas Neumann)
Date: Tue, 30 May 2023 16:15:15 +0200
Subject: [QGIS-Developer] How to speed up rendering
In-Reply-To: <94f0f2109f8d9.1cf2e804640c7@odyhpc.com>
References: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
 <CAC2XbFdWLu-0VKRWYK-YF0XSN5FSoFHfX8Ztm6R6HTfcPa4MNw@mail.gmail.com>
 <e4867467c3728.ad83e8afff7c4@odyhpc.com>
 <3ea1f315-669a-6d32-e5c6-7bbbc74e153f@wheregroup.com>
 <94f0f2109f8d9.1cf2e804640c7@odyhpc.com>
Message-ID: <CAB2Z92C7Wsy+q8KMMxp+G3cZQDEhjz+uCukxow4V5Tog14U52g@mail.gmail.com>

Hi,

See
https://docs.qgis.org/3.28/en/docs/user_manual/working_with_raster/raster_properties.html#pyramids-properties
(for a QGIS based solution)
or https://gdal.org/programs/gdaladdo.html (for a command line or python
version).

Andreas

On Tue, 30 May 2023 at 16:00, afernandez via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hello Hannes,
> Sorry to say that I'm at a loss here. I had not previously heard of
> 'overviews' and am having a hard time finding much information. I couldn't
> find anything in the PyQGIS (v3.28) developer cookbook, which is my main
> reference in this QGIS journey. The found information is at
> https://docs.qgis.org/3.28/en/docs/user_manual/processing_algs/gdal/rastermiscellaneous.html
> but didn't exactly clarify how to implement overviews with a script or why
> this would sidestep reading the file several times. I don't quite
> understand this last point either, as the file is large but the size of the
> band (after everything is prepped and before rendering) is relatively
> small, and should fit amply into the available memory.
> Thanks,
> Arturo
>
>
> Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
>
>
> Hi Arturo,
>
> make sure you create overviews on your big rasters or QGIS will re-read
> the whole file all the time to render an appropriate representation in the
> map.
>
> Cheers, Hannes
> Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
>
> Hello Martin,
> I'm trying to understand what you're saying but my background is in
> numerical methods where tasks are split into threads for acceleration
> purposes. If a single layer is rendered by a single core (as you write and
> I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be
> handled? Wouldn't it take too long? (However, you want to define 'too
> long').
> As far as more details about the process, the tensor 'var' (n x m x index
> where I have tried different combinations but let's say n x m is 100 x 200)
> of floating point numbers is manipulated according to the following
> pseudo-code:
> # Initial manipulations
>             dims = var.dimensions
>             shape = var.shape
>             driver_name = 'GTIFF'
>             driver = gdal.GetDriverByName(driver_name)
>             np_dtype = var.dtype
>             type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>             gdal_ds = driver.Create(_my_path_, cols, rows, 1,
> gdal.GDT_UInt16)
>             gdal_ds.SetProjection(_my_projection_)
>             gdal_ds.SetGeoTransform(_my_transformation_)
> # Creation of the bands and scaled matrix
>             band = gdal_ds.GetRasterBand(1)
>             data = var[_chosen_index_]
>             data = ma.getdata(data)
>             data_scaled =  np.interp(data, (data.min(), data.max()), (0,
> 255))
>             data_scaled2 = data_scaled.astype(int) # This is to rescale
> into integers so that it can color the layer
> # *** Lines to set up the color palette ***
> # Write the array to band once everything has been rescaled
>             band.WriteArray(data_scaled2)
>             gdal_ds.FlushCache()
>
> This procedure seems to work well and takes a reasonable amount of time.
> Then, the time is consumed when doing the rendering itself. I'm not
> entirely sure what you mean by 'sub-optimal raster format' or 'thre are
> overviews missing' so I cannot address them specifically.
> Thanks,
> Arturo
>
>
>
>
> Martin Dobias wrote:
>
>
> Hi
>
> On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hello,
>> One of my project would greatly benefit from a much faster rendering.
>> After some testing, the bulk (>99%) of the time is spent at rendering the
>> layer with QgsRasterLayer(...,...). What I have also noticed is that
>> rendering time does not change with the number of cores, which suggests
>> that the renderer might be using a single thread. I checked the API
>> documentation but couldn't find anything about multithreading or some other
>> procedure to accelerate rendering. I was wondering if anyone has any
>> suggestion or has faced a similar difficulty.
>>
>
> Multi-threaded rendering is done at the granularity of whole map layers,
> so a single layer is rendered by a single CPU core. Therefore if you have
> just one layer that is slow to render, the multi-threading is not going to
> help. It is best to do some testing how you can improve the layer's
> rendering - for example, it could be that you are using some sub-optimal
> raster format, or there are overviews missing, or something else... one
> would need more details.
>
> Regards
> Martin
>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> --
> Johannes Kr?ger / GIS-Entwickler/-Berater
>
> ---------------------------------------------
> Aufwind durch Wissen!
> Web-Seminare und Online-Schulungen
> bei der www.foss-academy.com
> ---------------------------------------------
>
> WhereGroup GmbH
> c/o KK03 GmbH
> Lange Reihe 29
> 20099 Hamburg
> Germany
>
> Tel: +49 (0)228 / 90 90 38 - 36
> Fax: +49 (0)228 / 90 90 38 - 11
> johannes.kroeger at wheregroup.comwww.wheregroup.com
> Gesch?ftsf?hrer:
> Olaf Knopp, Peter Stamm
> Amtsgericht Bonn, HRB 9885
> -------------------------------
>
> Hi Arturo,
>
> make sure you create overviews on your big rasters or QGIS will re-read
> the whole file all the time to render an appropriate representation in the
> map.
>
> Cheers, Hannes
> Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
>
> Hello Martin,
> I'm trying to understand what you're saying but my background is in
> numerical methods where tasks are split into threads for acceleration
> purposes. If a single layer is rendered by a single core (as you write and
> I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be
> handled? Wouldn't it take too long? (However, you want to define 'too
> long').
> As far as more details about the process, the tensor 'var' (n x m x index
> where I have tried different combinations but let's say n x m is 100 x 200)
> of floating point numbers is manipulated according to the following
> pseudo-code:
> # Initial manipulations
>             dims = var.dimensions
>             shape = var.shape
>             driver_name = 'GTIFF'
>             driver = gdal.GetDriverByName(driver_name)
>             np_dtype = var.dtype
>             type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>             gdal_ds = driver.Create(_my_path_, cols, rows, 1,
> gdal.GDT_UInt16)
>             gdal_ds.SetProjection(_my_projection_)
>             gdal_ds.SetGeoTransform(_my_transformation_)
> # Creation of the bands and scaled matrix
>             band = gdal_ds.GetRasterBand(1)
>             data = var[_chosen_index_]
>             data = ma.getdata(data)
>             data_scaled =  np.interp(data, (data.min(), data.max()), (0,
> 255))
>             data_scaled2 = data_scaled.astype(int) # This is to rescale
> into integers so that it can color the layer
> # *** Lines to set up the color palette ***
> # Write the array to band once everything has been rescaled
>             band.WriteArray(data_scaled2)
>             gdal_ds.FlushCache()
>
> This procedure seems to work well and takes a reasonable amount of time.
> Then, the time is consumed when doing the rendering itself. I'm not
> entirely sure what you mean by 'sub-optimal raster format' or 'thre are
> overviews missing' so I cannot address them specifically.
> Thanks,
> Arturo
>
>
>
>
> Martin Dobias wrote:
>
>
> Hi
>
> On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hello,
>> One of my project would greatly benefit from a much faster rendering.
>> After some testing, the bulk (>99%) of the time is spent at rendering the
>> layer with QgsRasterLayer(...,...). What I have also noticed is that
>> rendering time does not change with the number of cores, which suggests
>> that the renderer might be using a single thread. I checked the API
>> documentation but couldn't find anything about multithreading or some other
>> procedure to accelerate rendering. I was wondering if anyone has any
>> suggestion or has faced a similar difficulty.
>>
>
> Multi-threaded rendering is done at the granularity of whole map layers,
> so a single layer is rendered by a single CPU core. Therefore if you have
> just one layer that is slow to render, the multi-threading is not going to
> help. It is best to do some testing how you can improve the layer's
> rendering - for example, it could be that you are using some sub-optimal
> raster format, or there are overviews missing, or something else... one
> would need more details.
>
> Regards
> Martin
>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> --
> Johannes Kr?ger / GIS-Entwickler/-Berater
>
> ---------------------------------------------
> Aufwind durch Wissen!
> Web-Seminare und Online-Schulungen
> bei der www.foss-academy.com
> ---------------------------------------------
>
> WhereGroup GmbH
> c/o KK03 GmbH
> Lange Reihe 29
> 20099 Hamburg
> Germany
>
> Tel: +49 (0)228 / 90 90 38 - 36
> Fax: +49 (0)228 / 90 90 38 - 11
> johannes.kroeger at wheregroup.comwww.wheregroup.com
> Gesch?ftsf?hrer:
> Olaf Knopp, Peter Stamm
> Amtsgericht Bonn, HRB 9885
> -------------------------------
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230530/5fee4c6e/attachment-0001.htm>

From anitagraser at gmx.at  Tue May 30 12:47:15 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Tue, 30 May 2023 19:47:15 +0000
Subject: [QGIS-Developer] Update on the 2023 grant programme
Message-ID: <1685474741422.146930744.215168198@gmx.at>


Dear QGIS Community,

We have now compiled the 2023 grant applications summary which is available
at https://github.com/qgis/PSC/issues/58#issuecomment-1567892412

As a quick reminder, here are the proposal titles:


1. QGIS Bug Tracker cleanup
2. Switch to clang-format for C++ code and implement pre-commit hooks
3. Add vertical CRS handling to QGIS
4. Improve test result handling on QGIS CI
5. Update older annotation items to new framework
6. QGIS Project Loading Performance
7. Conda Installer for macOS
8. Unify the geometric and topological verification and correction features
in QGIS
9. Porting to C++ and harmonization of Processing algorithms

The next step will be to set up the voting form and email our voting
members to review the proposals and cast their vote.

Regards,
Anita
--
Anita Graser
Home: http://anitagraser.com
Twitter: @underdarkgis
Mastodon: @underdarkgis at fosstodon.org

From johannes.kroeger at wheregroup.com  Wed May 31 00:46:51 2023
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Wed, 31 May 2023 09:46:51 +0200
Subject: [QGIS-Developer] How to speed up rendering
In-Reply-To: <94f0f2109f8d9.1cf2e804640c7@odyhpc.com>
References: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
 <CAC2XbFdWLu-0VKRWYK-YF0XSN5FSoFHfX8Ztm6R6HTfcPa4MNw@mail.gmail.com>
 <e4867467c3728.ad83e8afff7c4@odyhpc.com>
 <3ea1f315-669a-6d32-e5c6-7bbbc74e153f@wheregroup.com>
 <94f0f2109f8d9.1cf2e804640c7@odyhpc.com>
Message-ID: <30fa9644-162b-8e44-b26c-54049d63c86a@wheregroup.com>

Sorry Arturo,

I totally missed that Martin had already recommended it and that you 
said you didn't know about it. I didn't mean to come across pushy or 
anything :))

Andreas' links are great to see how to create them. Here is a nice post 
that explains the concept: 
https://developers.planet.com/docs/planetschool/an-introduction-to-cloud-optimized-geotiffs-cogs-part-1-overview/

As you can see there you probably also want to created "tiled" TIFFs, 
where the data internal to the TIFF is arranged in a way that fits 
spatial queries better.

If you can, simply specify that you want "cloud-optimized geotiffs", 
those have all these optimisations and are also "typical spatial 
analysis optimized geotiffs".

Cheers, Hannes

Am 30.05.23 um 14:37 schrieb afernandez via QGIS-Developer:
> Hello Hannes,
> Sorry to say that I'm at a loss here. I had not previously heard of 
> 'overviews' and am having a hard time finding much information. I 
> couldn't find anything in the PyQGIS (v3.28) developer cookbook, which 
> is my main reference in this QGIS journey. The found information is at 
> https://docs.qgis.org/3.28/en/docs/user_manual/processing_algs/gdal/rastermiscellaneous.html 
> but didn't exactly clarify how to implement overviews with a script or 
> why this would sidestep reading the file several times. I don't quite 
> understand this last point either, as the file is large but the size 
> of the band (after everything is prepped and before rendering) is 
> relatively small, and should fit amply into the available memory.
> Thanks,
> Arturo
>
>
> Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
>
>
>> Hi Arturo,
>>
>> make sure you create overviews on your big rasters or QGIS will 
>> re-read the whole file all the time to render an appropriate 
>> representation in the map.
>>
>> Cheers, Hannes
>>
>> Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
>>> Hello Martin,
>>> I'm trying to understand what you're saying but my background is in 
>>> numerical methods where tasks are split into threads for 
>>> acceleration purposes. If a single layer is rendered by a single 
>>> core (as you write and I was observing), how would a 1,000 x 1,000 
>>> (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? 
>>> (However, you want to define 'too long').
>>> As far as more details about the process, the tensor 'var' (n x m x 
>>> index where I have tried different combinations but let's say n x m 
>>> is 100 x 200) of floating point numbers is manipulated according to 
>>> the following pseudo-code:
>>> # Initial manipulations
>>> ? ? ? ? ? ? dims = var.dimensions
>>> ? ? ? ? ? ? shape = var.shape
>>> ? ? ? ? ? ? driver_name = 'GTIFF'
>>> ? ? ? ? ? ? driver = gdal.GetDriverByName(driver_name)
>>> ? ? ? ? ? ? np_dtype = var.dtype
>>> ? ? ? ? ? ? type_code = 
>>> gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>>> ? ? ? ? ? ? gdal_ds = driver.Create(_my_path_, cols, rows, 1, 
>>> gdal.GDT_UInt16)
>>> gdal_ds.SetProjection(_my_projection_)
>>> gdal_ds.SetGeoTransform(_my_transformation_)
>>> # Creation of the bands and scaled matrix
>>> ? ? ? ? ? ? band = gdal_ds.GetRasterBand(1)
>>> ? ? ? ? ? ? data = var[_chosen_index_]
>>> ? ? ? ? ? ? data = ma.getdata(data)
>>> ? ? ? ? ? ? data_scaled = np.interp(data, (data.min(), data.max()), 
>>> (0, 255))
>>> ? ? ? ? ? ? data_scaled2 = data_scaled.astype(int) # This is to 
>>> rescale into integers so that it can color the layer
>>> # *** Lines to set up the color palette ***
>>> # Write the array to band once everything has been rescaled
>>> band.WriteArray(data_scaled2)
>>> ? ? ? ? ? ? gdal_ds.FlushCache()
>>>
>>> This procedure seems to work well and takes a reasonable amount of 
>>> time. Then, the time is consumed when doing the rendering itself. 
>>> I'm not entirely sure what you mean by 'sub-optimal raster format' 
>>> or 'thre are overviews missing' so I cannot address them specifically.
>>> Thanks,
>>> Arturo
>>>
>>>
>>>
>>>
>>> Martin Dobias wrote:
>>>
>>>
>>>> Hi
>>>>
>>>> On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer 
>>>> <qgis-developer at lists.osgeo.org> wrote:
>>>>
>>>>     Hello,
>>>>     One of my project would greatly benefit from a much faster
>>>>     rendering. After some testing, the bulk (>99%) of the time is
>>>>     spent at rendering the layer with QgsRasterLayer(...,...). What
>>>>     I have also noticed is that rendering time does not change with
>>>>     the number of cores, which suggests that the renderer might be
>>>>     using a single thread. I checked the API documentation but
>>>>     couldn't find anything about multithreading or some other
>>>>     procedure to accelerate rendering. I was wondering if anyone
>>>>     has any suggestion or has faced a similar difficulty.
>>>>
>>>>
>>>> Multi-threaded rendering is done at the granularity of whole map 
>>>> layers, so a single layer is rendered by a single CPU core. 
>>>> Therefore if you have just one layer that is slow to render, the 
>>>> multi-threading is not going to help. It is best to do some testing 
>>>> how you can improve the layer's rendering - for example, it could 
>>>> be that you are using some sub-optimal raster format, or there are 
>>>> overviews missing, or something else... one would need more details.
>>>>
>>>> Regards
>>>> Martin
>>>>
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> -- 
>> Johannes Kr?ger / GIS-Entwickler/-Berater
>>
>> ---------------------------------------------
>> Aufwind durch Wissen!
>> Web-Seminare und Online-Schulungen
>> bei derwww.foss-academy.com
>> ---------------------------------------------
>>
>> WhereGroup GmbH
>> c/o KK03 GmbH
>> Lange Reihe 29
>> 20099 Hamburg
>> Germany
>>
>> Tel: +49 (0)228 / 90 90 38 - 36
>> Fax: +49 (0)228 / 90 90 38 - 11
>>
>> johannes.kroeger at wheregroup.com
>> www.wheregroup.com
>> Gesch?ftsf?hrer:
>> Olaf Knopp, Peter Stamm
>> Amtsgericht Bonn, HRB 9885
>> -------------------------------
>>
>> Hi Arturo,
>>
>> make sure you create overviews on your big rasters or QGIS will 
>> re-read the whole file all the time to render an appropriate 
>> representation in the map.
>>
>> Cheers, Hannes
>>
>> Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
>>> Hello Martin,
>>> I'm trying to understand what you're saying but my background is in 
>>> numerical methods where tasks are split into threads for 
>>> acceleration purposes. If a single layer is rendered by a single 
>>> core (as you write and I was observing), how would a 1,000 x 1,000 
>>> (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? 
>>> (However, you want to define 'too long').
>>> As far as more details about the process, the tensor 'var' (n x m x 
>>> index where I have tried different combinations but let's say n x m 
>>> is 100 x 200) of floating point numbers is manipulated according to 
>>> the following pseudo-code:
>>> # Initial manipulations
>>> ? ? ? ? ? ? dims = var.dimensions
>>> ? ? ? ? ? ? shape = var.shape
>>> ? ? ? ? ? ? driver_name = 'GTIFF'
>>> ? ? ? ? ? ? driver = gdal.GetDriverByName(driver_name)
>>> ? ? ? ? ? ? np_dtype = var.dtype
>>> ? ? ? ? ? ? type_code = 
>>> gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>>> ? ? ? ? ? ? gdal_ds = driver.Create(_my_path_, cols, rows, 1, 
>>> gdal.GDT_UInt16)
>>> gdal_ds.SetProjection(_my_projection_)
>>> gdal_ds.SetGeoTransform(_my_transformation_)
>>> # Creation of the bands and scaled matrix
>>> ? ? ? ? ? ? band = gdal_ds.GetRasterBand(1)
>>> ? ? ? ? ? ? data = var[_chosen_index_]
>>> ? ? ? ? ? ? data = ma.getdata(data)
>>> ? ? ? ? ? ? data_scaled = np.interp(data, (data.min(), data.max()), 
>>> (0, 255))
>>> ? ? ? ? ? ? data_scaled2 = data_scaled.astype(int) # This is to 
>>> rescale into integers so that it can color the layer
>>> # *** Lines to set up the color palette ***
>>> # Write the array to band once everything has been rescaled
>>> band.WriteArray(data_scaled2)
>>> ? ? ? ? ? ? gdal_ds.FlushCache()
>>>
>>> This procedure seems to work well and takes a reasonable amount of 
>>> time. Then, the time is consumed when doing the rendering itself. 
>>> I'm not entirely sure what you mean by 'sub-optimal raster format' 
>>> or 'thre are overviews missing' so I cannot address them specifically.
>>> Thanks,
>>> Arturo
>>>
>>>
>>>
>>>
>>> Martin Dobias wrote:
>>>
>>>
>>>> Hi
>>>>
>>>> On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer 
>>>> <qgis-developer at lists.osgeo.org> wrote:
>>>>
>>>>     Hello,
>>>>     One of my project would greatly benefit from a much faster
>>>>     rendering. After some testing, the bulk (>99%) of the time is
>>>>     spent at rendering the layer with QgsRasterLayer(...,...). What
>>>>     I have also noticed is that rendering time does not change with
>>>>     the number of cores, which suggests that the renderer might be
>>>>     using a single thread. I checked the API documentation but
>>>>     couldn't find anything about multithreading or some other
>>>>     procedure to accelerate rendering. I was wondering if anyone
>>>>     has any suggestion or has faced a similar difficulty.
>>>>
>>>>
>>>> Multi-threaded rendering is done at the granularity of whole map 
>>>> layers, so a single layer is rendered by a single CPU core. 
>>>> Therefore if you have just one layer that is slow to render, the 
>>>> multi-threading is not going to help. It is best to do some testing 
>>>> how you can improve the layer's rendering - for example, it could 
>>>> be that you are using some sub-optimal raster format, or there are 
>>>> overviews missing, or something else... one would need more details.
>>>>
>>>> Regards
>>>> Martin
>>>>
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> -- 
>> Johannes Kr?ger / GIS-Entwickler/-Berater
>>
>> ---------------------------------------------
>> Aufwind durch Wissen!
>> Web-Seminare und Online-Schulungen
>> bei derwww.foss-academy.com
>> ---------------------------------------------
>>
>> WhereGroup GmbH
>> c/o KK03 GmbH
>> Lange Reihe 29
>> 20099 Hamburg
>> Germany
>>
>> Tel: +49 (0)228 / 90 90 38 - 36
>> Fax: +49 (0)228 / 90 90 38 - 11
>>
>> johannes.kroeger at wheregroup.com
>> www.wheregroup.com
>> Gesch?ftsf?hrer:
>> Olaf Knopp, Peter Stamm
>> Amtsgericht Bonn, HRB 9885
>> -------------------------------
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei derwww.foss-academy.com
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230531/89f03225/attachment-0001.htm>

From ijturton at gmail.com  Wed May 31 01:17:11 2023
From: ijturton at gmail.com (Ian Turton)
Date: Wed, 31 May 2023 09:17:11 +0100
Subject: [QGIS-Developer] How to speed up rendering
In-Reply-To: <30fa9644-162b-8e44-b26c-54049d63c86a@wheregroup.com>
References: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
 <CAC2XbFdWLu-0VKRWYK-YF0XSN5FSoFHfX8Ztm6R6HTfcPa4MNw@mail.gmail.com>
 <e4867467c3728.ad83e8afff7c4@odyhpc.com>
 <3ea1f315-669a-6d32-e5c6-7bbbc74e153f@wheregroup.com>
 <94f0f2109f8d9.1cf2e804640c7@odyhpc.com>
 <30fa9644-162b-8e44-b26c-54049d63c86a@wheregroup.com>
Message-ID: <CA+=cGJkcPAagTWaUAr2XwpnLbwaevQXL5t97ZaEXj2cGNsfMnw@mail.gmail.com>

A good introduction to fast rasters is Paul Ramsey's GeoTiff compression
for dummies blog post -
https://blog.cleverelephant.ca/2015/02/geotiff-compression-for-dummies.html
it takes you through all the steps needed using gdal.

Ian

On Wed, 31 May 2023 at 08:47, Johannes Kr?ger (WhereGroup) via
QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:

> Sorry Arturo,
>
> I totally missed that Martin had already recommended it and that you said
> you didn't know about it. I didn't mean to come across pushy or anything :))
>
> Andreas' links are great to see how to create them. Here is a nice post
> that explains the concept:
> https://developers.planet.com/docs/planetschool/an-introduction-to-cloud-optimized-geotiffs-cogs-part-1-overview/
>
> As you can see there you probably also want to created "tiled" TIFFs,
> where the data internal to the TIFF is arranged in a way that fits spatial
> queries better.
>
> If you can, simply specify that you want "cloud-optimized geotiffs", those
> have all these optimisations and are also "typical spatial analysis
> optimized geotiffs".
>
> Cheers, Hannes
> Am 30.05.23 um 14:37 schrieb afernandez via QGIS-Developer:
>
> Hello Hannes,
> Sorry to say that I'm at a loss here. I had not previously heard of
> 'overviews' and am having a hard time finding much information. I couldn't
> find anything in the PyQGIS (v3.28) developer cookbook, which is my main
> reference in this QGIS journey. The found information is at
> https://docs.qgis.org/3.28/en/docs/user_manual/processing_algs/gdal/rastermiscellaneous.html
> but didn't exactly clarify how to implement overviews with a script or why
> this would sidestep reading the file several times. I don't quite
> understand this last point either, as the file is large but the size of the
> band (after everything is prepped and before rendering) is relatively
> small, and should fit amply into the available memory.
> Thanks,
> Arturo
>
>
> Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
>
>
> Hi Arturo,
>
> make sure you create overviews on your big rasters or QGIS will re-read
> the whole file all the time to render an appropriate representation in the
> map.
>
> Cheers, Hannes
> Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
>
> Hello Martin,
> I'm trying to understand what you're saying but my background is in
> numerical methods where tasks are split into threads for acceleration
> purposes. If a single layer is rendered by a single core (as you write and
> I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be
> handled? Wouldn't it take too long? (However, you want to define 'too
> long').
> As far as more details about the process, the tensor 'var' (n x m x index
> where I have tried different combinations but let's say n x m is 100 x 200)
> of floating point numbers is manipulated according to the following
> pseudo-code:
> # Initial manipulations
>             dims = var.dimensions
>             shape = var.shape
>             driver_name = 'GTIFF'
>             driver = gdal.GetDriverByName(driver_name)
>             np_dtype = var.dtype
>             type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>             gdal_ds = driver.Create(_my_path_, cols, rows, 1,
> gdal.GDT_UInt16)
>             gdal_ds.SetProjection(_my_projection_)
>             gdal_ds.SetGeoTransform(_my_transformation_)
> # Creation of the bands and scaled matrix
>             band = gdal_ds.GetRasterBand(1)
>             data = var[_chosen_index_]
>             data = ma.getdata(data)
>             data_scaled =  np.interp(data, (data.min(), data.max()), (0,
> 255))
>             data_scaled2 = data_scaled.astype(int) # This is to rescale
> into integers so that it can color the layer
> # *** Lines to set up the color palette ***
> # Write the array to band once everything has been rescaled
>             band.WriteArray(data_scaled2)
>             gdal_ds.FlushCache()
>
> This procedure seems to work well and takes a reasonable amount of time.
> Then, the time is consumed when doing the rendering itself. I'm not
> entirely sure what you mean by 'sub-optimal raster format' or 'thre are
> overviews missing' so I cannot address them specifically.
> Thanks,
> Arturo
>
>
>
>
> Martin Dobias wrote:
>
>
> Hi
>
> On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hello,
>> One of my project would greatly benefit from a much faster rendering.
>> After some testing, the bulk (>99%) of the time is spent at rendering the
>> layer with QgsRasterLayer(...,...). What I have also noticed is that
>> rendering time does not change with the number of cores, which suggests
>> that the renderer might be using a single thread. I checked the API
>> documentation but couldn't find anything about multithreading or some other
>> procedure to accelerate rendering. I was wondering if anyone has any
>> suggestion or has faced a similar difficulty.
>>
>
> Multi-threaded rendering is done at the granularity of whole map layers,
> so a single layer is rendered by a single CPU core. Therefore if you have
> just one layer that is slow to render, the multi-threading is not going to
> help. It is best to do some testing how you can improve the layer's
> rendering - for example, it could be that you are using some sub-optimal
> raster format, or there are overviews missing, or something else... one
> would need more details.
>
> Regards
> Martin
>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> --
> Johannes Kr?ger / GIS-Entwickler/-Berater
>
> ---------------------------------------------
> Aufwind durch Wissen!
> Web-Seminare und Online-Schulungen
> bei der www.foss-academy.com
> ---------------------------------------------
>
> WhereGroup GmbH
> c/o KK03 GmbH
> Lange Reihe 29
> 20099 Hamburg
> Germany
>
> Tel: +49 (0)228 / 90 90 38 - 36
> Fax: +49 (0)228 / 90 90 38 - 11
> johannes.kroeger at wheregroup.comwww.wheregroup.com
> Gesch?ftsf?hrer:
> Olaf Knopp, Peter Stamm
> Amtsgericht Bonn, HRB 9885
> -------------------------------
>
> Hi Arturo,
>
> make sure you create overviews on your big rasters or QGIS will re-read
> the whole file all the time to render an appropriate representation in the
> map.
>
> Cheers, Hannes
> Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
>
> Hello Martin,
> I'm trying to understand what you're saying but my background is in
> numerical methods where tasks are split into threads for acceleration
> purposes. If a single layer is rendered by a single core (as you write and
> I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be
> handled? Wouldn't it take too long? (However, you want to define 'too
> long').
> As far as more details about the process, the tensor 'var' (n x m x index
> where I have tried different combinations but let's say n x m is 100 x 200)
> of floating point numbers is manipulated according to the following
> pseudo-code:
> # Initial manipulations
>             dims = var.dimensions
>             shape = var.shape
>             driver_name = 'GTIFF'
>             driver = gdal.GetDriverByName(driver_name)
>             np_dtype = var.dtype
>             type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
>             gdal_ds = driver.Create(_my_path_, cols, rows, 1,
> gdal.GDT_UInt16)
>             gdal_ds.SetProjection(_my_projection_)
>             gdal_ds.SetGeoTransform(_my_transformation_)
> # Creation of the bands and scaled matrix
>             band = gdal_ds.GetRasterBand(1)
>             data = var[_chosen_index_]
>             data = ma.getdata(data)
>             data_scaled =  np.interp(data, (data.min(), data.max()), (0,
> 255))
>             data_scaled2 = data_scaled.astype(int) # This is to rescale
> into integers so that it can color the layer
> # *** Lines to set up the color palette ***
> # Write the array to band once everything has been rescaled
>             band.WriteArray(data_scaled2)
>             gdal_ds.FlushCache()
>
> This procedure seems to work well and takes a reasonable amount of time.
> Then, the time is consumed when doing the rendering itself. I'm not
> entirely sure what you mean by 'sub-optimal raster format' or 'thre are
> overviews missing' so I cannot address them specifically.
> Thanks,
> Arturo
>
>
>
>
> Martin Dobias wrote:
>
>
> Hi
>
> On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hello,
>> One of my project would greatly benefit from a much faster rendering.
>> After some testing, the bulk (>99%) of the time is spent at rendering the
>> layer with QgsRasterLayer(...,...). What I have also noticed is that
>> rendering time does not change with the number of cores, which suggests
>> that the renderer might be using a single thread. I checked the API
>> documentation but couldn't find anything about multithreading or some other
>> procedure to accelerate rendering. I was wondering if anyone has any
>> suggestion or has faced a similar difficulty.
>>
>
> Multi-threaded rendering is done at the granularity of whole map layers,
> so a single layer is rendered by a single CPU core. Therefore if you have
> just one layer that is slow to render, the multi-threading is not going to
> help. It is best to do some testing how you can improve the layer's
> rendering - for example, it could be that you are using some sub-optimal
> raster format, or there are overviews missing, or something else... one
> would need more details.
>
> Regards
> Martin
>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> --
> Johannes Kr?ger / GIS-Entwickler/-Berater
>
> ---------------------------------------------
> Aufwind durch Wissen!
> Web-Seminare und Online-Schulungen
> bei der www.foss-academy.com
> ---------------------------------------------
>
> WhereGroup GmbH
> c/o KK03 GmbH
> Lange Reihe 29
> 20099 Hamburg
> Germany
>
> Tel: +49 (0)228 / 90 90 38 - 36
> Fax: +49 (0)228 / 90 90 38 - 11
> johannes.kroeger at wheregroup.comwww.wheregroup.com
> Gesch?ftsf?hrer:
> Olaf Knopp, Peter Stamm
> Amtsgericht Bonn, HRB 9885
> -------------------------------
>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> --
> Johannes Kr?ger / GIS-Entwickler/-Berater
>
> ---------------------------------------------
> Aufwind durch Wissen!
> Web-Seminare und Online-Schulungen
> bei der www.foss-academy.com
> ---------------------------------------------
>
> WhereGroup GmbH
> c/o KK03 GmbH
> Lange Reihe 29
> 20099 Hamburg
> Germany
>
> Tel: +49 (0)228 / 90 90 38 - 36
> Fax: +49 (0)228 / 90 90 38 - 11
> johannes.kroeger at wheregroup.comwww.wheregroup.com
> Gesch?ftsf?hrer:
> Olaf Knopp, Peter Stamm
> Amtsgericht Bonn, HRB 9885
> -------------------------------
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Ian Turton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230531/49715286/attachment-0001.htm>

From SSchmidt at gfi-gis.de  Wed May 31 05:28:23 2023
From: SSchmidt at gfi-gis.de (SSchmidt at gfi-gis.de)
Date: Wed, 31 May 2023 14:28:23 +0200
Subject: [QGIS-Developer] Antwort: Re:  no default value in style.qml
In-Reply-To: <CAD3koGnS+OoOLLu+LJFCDKxvgT5E-VgGXHQP2=iceYdDTzTksg@mail.gmail.com>
References: <OFCFD9DA1A.045EBC00-ONC12589BB.003A7648-C12589BB.003D57CC@gfi-gis.de>
 <CAD3koGnS+OoOLLu+LJFCDKxvgT5E-VgGXHQP2=iceYdDTzTksg@mail.gmail.com>
Message-ID: <OF659B17B2.75C4FDA4-ONC12589C0.00447461-C12589C0.0045C0A3@gfi-gis.de>

Hallo und vielen Dank,

der Hinweis hat mich in die richtige Spur gebracht.

Ich hatte nur "Formulare" angehakt. Die Default-Werte werden aber 
offensichtlich unter "Felder" gemerkt.

Danke :)
Freundliche Gr??e aus Leipzig
Susann Schmidt
Softwareentwicklung 

**************************************************************

GFI - Gesellschaft f?r Informationstechnologie mbH
Philipp-Rosenthal-Stra?e 9
D-04103 Leipzig
Gesch?ftsf?hrer: Andreas Richter
Amtsgericht Leipzig HRB 12054
USt.-IdNr.: DE179049354     Steuer-Nr.: 231/109/06412
Tel. 0341 961 3310    Fax 0341 961 3311   Mail info at gfi-gis.de
Web  www.gfi-gis.de




Von:    "Thomas B" <rdbath.regiodata at gmail.com>
An:     SSchmidt at gfi-gis.de
Datum:  30.05.2023 08:30
Betreff:        Re: [QGIS-Developer] no default value in style.qml



Hallo,
kurzer Hinweis zur Frage auf der QGIS-Developer-Liste.
Kann es sein, dass beim Speichern des Stils der Punkt "Formulare" nicht 
angehakt war? Ich hab das kurz getestet in QGIS 3.28 und da funktioniert 
es, dass die Default-Werte in die QML geschrieben werden und auch beim 
Reinladen des Layers wieder ziehen.
Beim Speichern der QML war allerdings der Punkt "Formulare" nicht 
angehakt, obwohl es was zu speichern gab....den musste ich erst noch von 
Hand aktivieren.


Im QML gibt es dann einen derartigen Abschnitt:

  <defaults>
    <default field="full_id" applyOnUpdate="1" expression="@id"/>
    <default field="osm_id" applyOnUpdate="0" expression=""/>
    <default field="osm_type" applyOnUpdate="0" 
expression="'testeintrag'"/>
    <default field="building" applyOnUpdate="0" expression=""/>
    <default field="name" applyOnUpdate="0" expression=""/>
    <default field="amenity" applyOnUpdate="0" expression=""/>
    <default field="brand" applyOnUpdate="0" expression=""/>
    <default field="wheelchair" applyOnUpdate="0" expression=""/>
  </defaults>

VG
Thomas

Am Fr., 26. Mai 2023 um 13:01 Uhr schrieb SSchmidt--- via QGIS-Developer <
qgis-developer at lists.osgeo.org>:
Hello, 

I want to setup a formular for a vectorlayer. For a field(text or number) 
I want to have a default value. I assumed to achieve this with 
QgsEditorWidgetSetup. 

To learn how the notation should be, I tried to save an example in 
QGIS(3.16, 3.22.16, master) directly in a style.qml file. But there is no 
entry for a default value. If I load the style.qml to a new layer, QGIS 
doesn't show my default values. 

So is this an error or? Or is it unmeant to save default values in a 
style? If so, how can I set a default value to a field in c++? 

Freundliche Gr??e aus Leipzig
Susann Schmidt
Softwareentwicklung 

**************************************************************

GFI - Gesellschaft f?r Informationstechnologie mbH
Philipp-Rosenthal-Stra?e 9
D-04103 Leipzig
Gesch?ftsf?hrer: Andreas Richter
Amtsgericht Leipzig HRB 12054
USt.-IdNr.: DE179049354     Steuer-Nr.: 231/109/06412
Tel. 0341 961 3310    Fax 0341 961 3311   Mail info at gfi-gis.de
Web  www.gfi-gis.de
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230531/f73bcb4d/attachment.htm>

From lorenzetti at gis3w.it  Wed May 31 05:59:03 2023
From: lorenzetti at gis3w.it (Walter Lorenzetti)
Date: Wed, 31 May 2023 14:59:03 +0200
Subject: [QGIS-Developer] GeoFerver canno't read QGIS server WFS Services
Message-ID: <8e77c290-9600-5c17-5b47-02d52dd1f67c@gis3w.it>

Hi,

when I try to add a WFS service layer to a GeoServer instance I get an 
exception like this:

```

...

Caused by: java.lang.RuntimeException: 
org.geotools.data.DataSourceException: No XSDElementDeclaration found 
for {http://www.opengis.net/wfs}Particelle_terreni_e_fabbricati
 ?? ?at 
org.geotools.data.store.ContentFeatureSource.getAbsoluteSchema(ContentFeatureSource.java:329)
 ?? ?at 
org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:296)
 ?? ?at 
org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:105)
 ?? ?at 
org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:342)
 ?? ?at 
org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:325)
 ?? ?at 
org.geoserver.web.data.layer.NewLayerPage.buildLayerInfo(NewLayerPage.java:409)

...

```

Any idea about this issue? It seams a XML error validation..

Thanks in advance.

W


-- 

Walter Lorenzetti phD
email: lorenzetti at gis3w.it
site: gis3w.it <https://gis3w.it>
twitter: w_lorenzetti
Tel/Cell: (+39) 347-6597931
Viale Verdi 24 - 51016 Montecatini Terme (PT)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230531/eda6e990/attachment.htm>

From rldhont at gmail.com  Wed May 31 06:28:47 2023
From: rldhont at gmail.com (=?UTF-8?Q?Ren=c3=a9-Luc_Dhont?=)
Date: Wed, 31 May 2023 15:28:47 +0200
Subject: [QGIS-Developer] GeoFerver canno't read QGIS server WFS Services
In-Reply-To: <8e77c290-9600-5c17-5b47-02d52dd1f67c@gis3w.it>
References: <8e77c290-9600-5c17-5b47-02d52dd1f67c@gis3w.it>
Message-ID: <ea9005ef-10bb-7a2f-af25-7fe8a7304b18@gmail.com>

Hi Walter,

You have to check the result of DescribeFeatureType WFS Request.
This request has to provide the XSD to validate the GML.

Regards,
Ren?-Luc

Le 31/05/2023 ? 14:59, Walter Lorenzetti via QGIS-Developer a ?crit?:
>
> Hi,
>
> when I try to add a WFS service layer to a GeoServer instance I get an 
> exception like this:
>
> ```
>
> ...
>
> Caused by: java.lang.RuntimeException: 
> org.geotools.data.DataSourceException: No XSDElementDeclaration found 
> for {http://www.opengis.net/wfs}Particelle_terreni_e_fabbricati
> ?? ?at 
> org.geotools.data.store.ContentFeatureSource.getAbsoluteSchema(ContentFeatureSource.java:329)
> ?? ?at 
> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:296)
> ?? ?at 
> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:105)
> ?? ?at 
> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:342)
> ?? ?at 
> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:325)
> ?? ?at 
> org.geoserver.web.data.layer.NewLayerPage.buildLayerInfo(NewLayerPage.java:409)
>
> ...
>
> ```
>
> Any idea about this issue? It seams a XML error validation..
>
> Thanks in advance.
>
> W
>
>
> -- 
>
> Walter Lorenzetti phD
> email: lorenzetti at gis3w.it
> site: gis3w.it <https://gis3w.it>
> twitter: w_lorenzetti
> Tel/Cell: (+39) 347-6597931
> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230531/313cc849/attachment.htm>

