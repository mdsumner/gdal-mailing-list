From ernst at pleiszenburg.de  Sat Aug  1 07:56:18 2020
From: ernst at pleiszenburg.de (Sebastian M. Ernst)
Date: Sat, 1 Aug 2020 16:56:18 +0200
Subject: [QGIS-Developer] Interpretation of qgisMaximumVersion in
 metadata.txt
In-Reply-To: <2018002.LQSFDNh4yM@debian>
References: <71b277d6-835f-27ff-8f3f-961b60691d6c@pleiszenburg.de>
 <2018002.LQSFDNh4yM@debian>
Message-ID: <0671d37f-47a4-f71a-ad7a-9d0e7c81baeb@pleiszenburg.de>

Hi Borys, all,

> Actually it was never properly synchronized between the installer and
> the repo.

which adds another question ... how is the repo (i.e. QGIS-Django?)
handling it?

> For the installer, both lower and upper boudary are included, so it makes 
> more sense to set it to 3.98 rather than 3.99. 

Ok, thanks.

> By the way - putting 0 to the third 
> position makes yet less sense ;) If you put just 3.98, it will be 
> automatically extended to 3.98.99 [1]. 

It's my parser that fills in the zeros. I need to refine this logic.

> The key thing is even setting the maximum to 3.99 will work, because the 
> current "pyQgisVersion" of QGIS 3.99 is recognized as 4.0! See [2].

This was raising my initial question in the first place.

Best regards,
Sebastian

From lists at borysjurgiel.pl  Sat Aug  1 07:27:25 2020
From: lists at borysjurgiel.pl (lists at borysjurgiel.pl)
Date: Sat, 01 Aug 2020 16:27:25 +0200
Subject: [QGIS-Developer] Interpretation of qgisMaximumVersion in
	metadata.txt
In-Reply-To: <71b277d6-835f-27ff-8f3f-961b60691d6c@pleiszenburg.de>
References: <71b277d6-835f-27ff-8f3f-961b60691d6c@pleiszenburg.de>
Message-ID: <2018002.LQSFDNh4yM@debian>

Hi!

Actually it was never properly synchronized between the installer and the 
repo.

For the installer, both lower and upper boudary are included, so it makes more 
sense to set it to 3.98 rather than 3.99. By the way - putting 0 to the third 
position makes yet less sense ;) If you put just 3.98, it will be 
automatically extended to 3.98.99 [1]. 

The key thing is even setting the maximum to 3.99 will work, because the 
current "pyQgisVersion" of QGIS 3.99 is recognized as 4.0! See [2].

[1] https://github.com/qgis/QGIS/blob/master/python/pyplugin_installer/
version_compare.py#L196

[2] https://github.com/qgis/QGIS/blob/master/python/pyplugin_installer/
version_compare.py#L206

Regards,
Borys



Dnia piątek, 31 lipca 2020 16:01:03 CEST Sebastian M. Ernst pisze:
> Hi all,
> 
> (hopefully) simple question: Is the version of QGIS indicated by
> `qgisMaximumVersion` in plugins' metadata assumed to be compatible? Or
> is it (under certain circumstances perhaps) an excluded upper boundary
> as in `[qgisMinimumVersion,qgisMaximumVersion)` in mathematical terms?
> 
> For further context information, see below.
> 
> Best regards,
> Sebastian
> 
> 
> ---
> 
> `qgisMaximumVersion` values reported for plugins compatible to QGIS 3.X:
> 
> - QGIS 3.0: 3.4.0, 3.6.99, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.1: 3.4.0, 3.6.99, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.2: 3.4.0, 3.6.99, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.3: 3.4.0, 3.6.99, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.4: 3.4.0, 3.6.99, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.5: 3.6.99, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.6: 3.12.0, 3.6.99, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.7: 3.12.0, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.8: 3.12.0, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.9: 3.12.0, 3.9.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.10: 3.12.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.11: 3.12.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.12: 3.12.0, 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.13: 3.98.0, 3.99.0, 4.0.0, 9.99.0
> - QGIS 3.14: 3.98.0, 3.99.0, 4.0.0, 9.99.0
> 
> "3.99.0" is what QGIS-Django assumes by default (if no value is provided
> by a plugin). Applies to about 94% of all contemporary plugins.
> 
> Based on QGIS' current implementation, "3.99.*" is assumed to be a
> precursor to "4.0.0" at some point in distant future, i.e. not part of
> the "3.X" branch. QGIS itself actually translates "3.99.*" to "4.0.0"
> internally.
> 
> 6 plugins set the value to "4.0.0" directly (1%).
> 
> "3.98.0" appears to be a value for indicating that the plugin is only
> compatible with QGIS 3.X (and not 4.0 or any of its precursors). It is
> used by exactly 31 plugins (4%).
> 
> The "WKTBulkLoader" plugin assumes to be compatible almost indefinitely
> by setting the value to "9.99.0" :)
> 
> The "anomalies" from the above are:
> 
> - tiles_xyz==0.8.1 -> QGIS 3.6.99
> - geopec==1.0 -> QGIS 3.9.0
> - shoguneditor==0.2 -> QGIS 3.4.0
> - qgisnetworklogger==0.3.0 -> QGIS 3.12.0
> 
> Values like "3.12.0" as found in qgisnetworklogger==0.3.0 for instance
> appear to indicate that it is an included upper boundary.
> 
> On the other hand side, values like "3.99.0" or "4.0.0" indicate that
> the value is interpreted as an excluded upper boundary. It's much more
> unlikely that current plugins will actually run with QGIS 4.0 (but not
> with 4.2).
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer





From lists at borysjurgiel.pl  Sat Aug  1 08:10:38 2020
From: lists at borysjurgiel.pl (Borys Jurgiel)
Date: Sat, 01 Aug 2020 17:10:38 +0200
Subject: [QGIS-Developer] Interpretation of qgisMaximumVersion in
	metadata.txt
In-Reply-To: <0671d37f-47a4-f71a-ad7a-9d0e7c81baeb@pleiszenburg.de>
References: <71b277d6-835f-27ff-8f3f-961b60691d6c@pleiszenburg.de>
 <2018002.LQSFDNh4yM@debian>
 <0671d37f-47a4-f71a-ad7a-9d0e7c81baeb@pleiszenburg.de>
Message-ID: <1807204.bAJerQlTJS@debian>

Dnia sobota, 1 sierpnia 2020 16:56:18 CEST Sebastian M. Ernst pisze:
> Hi Borys, all,
> 
> > Actually it was never properly synchronized between the installer and
> > the repo.
> 
> which adds another question ... how is the repo (i.e. QGIS-Django?)
> handling it?

It's the problem I never had time to contribute to the repo (yes, the django 
app), so I'm not familiar with it. Alessandro knows best.

> > The key thing is even setting the maximum to 3.99 will work, because the
> > current "pyQgisVersion" of QGIS 3.99 is recognized as 4.0! See [2].
> 
> This was raising my initial question in the first place.

It looks messy, indeed, but I believe we can say QGIS 3.99 has API of 4.0.

Regards, 
Borys





From ari.meyer at gmail.com  Sat Aug  1 18:02:58 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Sat, 1 Aug 2020 20:02:58 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
Message-ID: <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>

Matthias, WADR, your statement seems, at least on the surface, to indicate
an incredibly fragile process.  How can you possibly maintain stability and
reproducibility if the dependencies can be changed at will?

On Fri, Jul 31, 2020 at 2:27 AM Matthias Kuhn <matthias at opengis.ch> wrote:

> One thing to keep in mind is that even the main qgis
> installers/distributions do not have fixed dependency versions. Using
> downloaded macOS QGIS will have different dependencies than Windows and so
> will all the linux/*nix flavors.
>
> On 7/31/20 7:14 AM, Ari Meyer wrote:
>
> @Nyall, that proposal appears to be specific to plugins -- not sure if
> that's the best place to discuss this issue.
> @Greg: I found that many of the exact dependencies were not even available
> through the main channels.  So if the QGIS devs compile/build against such
> versions, I'm not sure there's an easy way to even specify such a conda
> recipe, unless all those dependencies are also made available somehow.  I
> didn't expect that those versions would not even be there with the others
> for the various libraries.  Could this imply that the library developers
> don't want those versions to be used?  Not sure.
>
> As a user and developer, I just want to be sure that if I pull down
> conda-forge qgis version X that I will get the same effective distribution
> as contained in downloadable installer version X.  Right now, we are
> getting a very different set of dependencies.
>
> Thanks,
> Ari
>
> On Thu, Jul 30, 2020 at 6:44 PM Greg Troxel <gdt at lexort.com> wrote:
>
>> Nyall Dawson <nyall.dawson at gmail.com> writes:
>>
>> > There's a related proposal at
>> > https://github.com/qgis/QGIS-Enhancement-Proposals/issues/179 --
>> > probably best to keep the discussion on that page.
>>
>> Not really about the details of using conda but about the concept:
>>
>>   conda's documentation says it runs on "Windows, macOS and Linux" but
>>   qgis also runs on at least NetBSD and almost certainly other BSDs.
>>
>>   it seems that to build something, including qgis the requirement is
>>   that the things it depends on are present in some way that is found by
>>   the build.  People can choose to do that however they want, and it
>>   seems funny to me to impose a requirement.   If this is really "let's
>>   publish a conda config file so that people who want to do that can do
>>   less work", that's of course fine, but if it's more "if you don't have
>>   conda then you can't build qgis", that's something else.
>>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200801/1bd3fe85/attachment.html>

From gdt at lexort.com  Sat Aug  1 18:09:19 2020
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 01 Aug 2020 21:09:19 -0400
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 (Ari Meyer's message of "Sat, 1 Aug 2020 20:02:58 -0500")
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
Message-ID: <rmir1sphn0g.fsf@s1.lexort.com>

Ari Meyer <ari.meyer at gmail.com> writes:

> Matthias, WADR, your statement seems, at least on the surface, to indicate
> an incredibly fragile process.  How can you possibly maintain stability and
> reproducibility if the dependencies can be changed at will?

I can understand how you would say this, but I find your statement odd
from an open source development norms viewpoint.   It is entirely
typical for a project to specify a list of dependencies with a miniumu
version (because of API changes), with the notion that if built against
that version or later, all will be ok.  That leads to the application
being judged buggy, if it doesn't cope, and the dependency being judged
buggy, if it doesn't meet the interface specification.   Certainly
hard-core testing will be against particular versions.  The history of
open source projects is that usually things are ok with this fuzzy >=
binding.

In my little corner, qgis makes releases, and they are built within
pkgsrc, which means against whatever version is in pkgsrc that minute.
Aside from upstream instability of some packages, this is mostly ok.

I have only been using qgis the last month or two, but have been lurking
and thinking about packaging for much longer.  I am curious how many
documented cases of incompatibilitiies due to versions of something --
when the qgis build says both are acceptable -- there have been, and if
in hindsight the bug is in qgis or the dependency.

From nyall.dawson at gmail.com  Sat Aug  1 22:51:33 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sun, 2 Aug 2020 15:51:33 +1000
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
Message-ID: <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>

On Sun, 2 Aug 2020 at 11:02, Ari Meyer <ari.meyer at gmail.com> wrote:
>
> Matthias, WADR, your statement seems, at least on the surface, to indicate an incredibly fragile process.  How can you possibly maintain stability and reproducibility if the dependencies can be changed at will?

And that's the big concern with approaches like conda. Past experience
with using homebrew for the mac builds suffered this very issue
constantly. It's only since the QGIS mac os build was seperated away
from the homebrew dependancy nightmare that we're seeing stability in
the macos builds... *

Nyall

* William's system packages use a different approach, so aren't
subject to this comment!

>
> On Fri, Jul 31, 2020 at 2:27 AM Matthias Kuhn <matthias at opengis.ch> wrote:
>>
>> One thing to keep in mind is that even the main qgis installers/distributions do not have fixed dependency versions. Using downloaded macOS QGIS will have different dependencies than Windows and so will all the linux/*nix flavors.
>>
>> On 7/31/20 7:14 AM, Ari Meyer wrote:
>>
>> @Nyall, that proposal appears to be specific to plugins -- not sure if that's the best place to discuss this issue.
>> @Greg: I found that many of the exact dependencies were not even available through the main channels.  So if the QGIS devs compile/build against such versions, I'm not sure there's an easy way to even specify such a conda recipe, unless all those dependencies are also made available somehow.  I didn't expect that those versions would not even be there with the others for the various libraries.  Could this imply that the library developers don't want those versions to be used?  Not sure.
>>
>> As a user and developer, I just want to be sure that if I pull down conda-forge qgis version X that I will get the same effective distribution as contained in downloadable installer version X.  Right now, we are getting a very different set of dependencies.
>>
>> Thanks,
>> Ari
>>
>> On Thu, Jul 30, 2020 at 6:44 PM Greg Troxel <gdt at lexort.com> wrote:
>>>
>>> Nyall Dawson <nyall.dawson at gmail.com> writes:
>>>
>>> > There's a related proposal at
>>> > https://github.com/qgis/QGIS-Enhancement-Proposals/issues/179 --
>>> > probably best to keep the discussion on that page.
>>>
>>> Not really about the details of using conda but about the concept:
>>>
>>>   conda's documentation says it runs on "Windows, macOS and Linux" but
>>>   qgis also runs on at least NetBSD and almost certainly other BSDs.
>>>
>>>   it seems that to build something, including qgis the requirement is
>>>   that the things it depends on are present in some way that is found by
>>>   the build.  People can choose to do that however they want, and it
>>>   seems funny to me to impose a requirement.   If this is really "let's
>>>   publish a conda config file so that people who want to do that can do
>>>   less work", that's of course fine, but if it's more "if you don't have
>>>   conda then you can't build qgis", that's something else.
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From ari.meyer at gmail.com  Sat Aug  1 23:12:19 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Sun, 2 Aug 2020 01:12:19 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <rmir1sphn0g.fsf@s1.lexort.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 <rmir1sphn0g.fsf@s1.lexort.com>
Message-ID: <CAFC3uChNTaMNxkXM-u6fp-vM129VzhpHhOf=3_0JoF7MgCZfpg@mail.gmail.com>

Yes, Greg, it would be interesting to know if this resulted in many actual
incompatibilities or QGIS has managed to just be lucky.  Even if there are
no API changes, implementation changes can certainly result in
regressions.  I'm not sure what percentage of open-source projects still
follow a ">= version X" policy for dependencies.  In the Java world, I
haven't seen many specify Maven or Gradle dependencies like that (or even
range-bound versioning), although they can.  The general policy that I've
seen is to always specify precise dependency versions.

On Sat, Aug 1, 2020 at 8:09 PM Greg Troxel <gdt at lexort.com> wrote:

> Ari Meyer <ari.meyer at gmail.com> writes:
>
> > Matthias, WADR, your statement seems, at least on the surface, to
> indicate
> > an incredibly fragile process.  How can you possibly maintain stability
> and
> > reproducibility if the dependencies can be changed at will?
>
> I can understand how you would say this, but I find your statement odd
> from an open source development norms viewpoint.   It is entirely
> typical for a project to specify a list of dependencies with a miniumu
> version (because of API changes), with the notion that if built against
> that version or later, all will be ok.  That leads to the application
> being judged buggy, if it doesn't cope, and the dependency being judged
> buggy, if it doesn't meet the interface specification.   Certainly
> hard-core testing will be against particular versions.  The history of
> open source projects is that usually things are ok with this fuzzy >=
> binding.
>
> In my little corner, qgis makes releases, and they are built within
> pkgsrc, which means against whatever version is in pkgsrc that minute.
> Aside from upstream instability of some packages, this is mostly ok.
>
> I have only been using qgis the last month or two, but have been lurking
> and thinking about packaging for much longer.  I am curious how many
> documented cases of incompatibilitiies due to versions of something --
> when the qgis build says both are acceptable -- there have been, and if
> in hindsight the bug is in qgis or the dependency.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200802/56980a2f/attachment-0001.html>

From ari.meyer at gmail.com  Sat Aug  1 23:25:55 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Sun, 2 Aug 2020 01:25:55 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>
Message-ID: <CAFC3uCgwQGY=fDfV_N6KfGgp3iNdKrrDOBSr2FO1oKkHEcQyzw@mail.gmail.com>

Nyall, is the issue here multi-platform builds?  I have experienced
problems with conda where the Windows port of a native library was faulty
(I distinctly remember netcdf4/xarray last year). It seemed like Windows
was the ugly stepchild -- always neglected.  I think it will always be a
problem for conda, as opposed to pip, due to the native libraries.  So I
think it's fair to document problems with dependency versions on particular
platforms and provide workable substitutions, but to trust the latest
release seems really dangerous to me.  All of the discrepancies I noted in
the above issue had differing minor or even major versions, implying API
breakages:

Dependency diffs versus the downloadable Windows desktop versions 3.14.0
and 3.14.1:
a) gdal:
Windows desktop: 3.0.4
conda-forge: 3.1.1
b) qt:
Windows desktop: 5.11.2
conda-forge: 5.12.5
c) sqlite:
Windows desktop: 3.29.0
conda-forge: 3.32.3
d) postgresql:
Windows desktop: 11.5
conda-forge: 12.3
e) qwt:
Windows desktop: 6.3.2
conda-forge: 7.0.0
f) pyqt:
Windows desktop: 5.11.3
conda-forge: 5.12.3

Given that, it would be interesting to know if one distribution was
significantly more buggy than another.

On Sun, Aug 2, 2020 at 12:51 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Sun, 2 Aug 2020 at 11:02, Ari Meyer <ari.meyer at gmail.com> wrote:
> >
> > Matthias, WADR, your statement seems, at least on the surface, to
> indicate an incredibly fragile process.  How can you possibly maintain
> stability and reproducibility if the dependencies can be changed at will?
>
> And that's the big concern with approaches like conda. Past experience
> with using homebrew for the mac builds suffered this very issue
> constantly. It's only since the QGIS mac os build was seperated away
> from the homebrew dependancy nightmare that we're seeing stability in
> the macos builds... *
>
> Nyall
>
> * William's system packages use a different approach, so aren't
> subject to this comment!
>
> >
> > On Fri, Jul 31, 2020 at 2:27 AM Matthias Kuhn <matthias at opengis.ch>
> wrote:
> >>
> >> One thing to keep in mind is that even the main qgis
> installers/distributions do not have fixed dependency versions. Using
> downloaded macOS QGIS will have different dependencies than Windows and so
> will all the linux/*nix flavors.
> >>
> >> On 7/31/20 7:14 AM, Ari Meyer wrote:
> >>
> >> @Nyall, that proposal appears to be specific to plugins -- not sure if
> that's the best place to discuss this issue.
> >> @Greg: I found that many of the exact dependencies were not even
> available through the main channels.  So if the QGIS devs compile/build
> against such versions, I'm not sure there's an easy way to even specify
> such a conda recipe, unless all those dependencies are also made available
> somehow.  I didn't expect that those versions would not even be there with
> the others for the various libraries.  Could this imply that the library
> developers don't want those versions to be used?  Not sure.
> >>
> >> As a user and developer, I just want to be sure that if I pull down
> conda-forge qgis version X that I will get the same effective distribution
> as contained in downloadable installer version X.  Right now, we are
> getting a very different set of dependencies.
> >>
> >> Thanks,
> >> Ari
> >>
> >> On Thu, Jul 30, 2020 at 6:44 PM Greg Troxel <gdt at lexort.com> wrote:
> >>>
> >>> Nyall Dawson <nyall.dawson at gmail.com> writes:
> >>>
> >>> > There's a related proposal at
> >>> > https://github.com/qgis/QGIS-Enhancement-Proposals/issues/179 --
> >>> > probably best to keep the discussion on that page.
> >>>
> >>> Not really about the details of using conda but about the concept:
> >>>
> >>>   conda's documentation says it runs on "Windows, macOS and Linux" but
> >>>   qgis also runs on at least NetBSD and almost certainly other BSDs.
> >>>
> >>>   it seems that to build something, including qgis the requirement is
> >>>   that the things it depends on are present in some way that is found
> by
> >>>   the build.  People can choose to do that however they want, and it
> >>>   seems funny to me to impose a requirement.   If this is really "let's
> >>>   publish a conda config file so that people who want to do that can do
> >>>   less work", that's of course fine, but if it's more "if you don't
> have
> >>>   conda then you can't build qgis", that's something else.
> >>
> >>
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200802/6bd49978/attachment.html>

From ari.meyer at gmail.com  Sat Aug  1 23:49:48 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Sun, 2 Aug 2020 01:49:48 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CA+H0G_FEo-fuefdxAWScdqJkfr8HNTeTKC6dzr-JsmXsKW-1iQ@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <CA+H0G_FEo-fuefdxAWScdqJkfr8HNTeTKC6dzr-JsmXsKW-1iQ@mail.gmail.com>
Message-ID: <CAFC3uCjtTDGzdghjbbUdreinpaREU1U47w2kdTFN97yjXoMpmA@mail.gmail.com>

Obrigado, Alexandre, for all the details. :-)  I guess I'm still baffled
by, "Conda-forge community always tries to use the most recent version of
all dependencies."  It just seems like a "recipe" for disaster -- just
built on assumptions.  Maybe you get lucky and everything just happens to
work.  Or maybe you get slightly less lucky and encounter breakages
immediately, forcing you to fiddle with the build until you find some
combination that seems to work, if you can't pin the versions.  Or maybe
you get unlucky and everything builds and *seems* to work based on the
extent of your testing, but your testing may have important gaps.

In my previous contract I was using PyViz, which was rebranded as HoloViz.
As that set of libraries was immature and constantly in flux, and we wanted
to take advantage of new features/fixes, our policy was to go with the
latest releases.  I wasn't comfortable with this, esp. after enduring many
problems, but we just dealt with bugs and regressions as they came up.
QGIS, though, is much more mature, after more than a decade since 1.0 was
released (2009 according to Wiki).  I assumed, therefore, that they
wouldn't trust such a hit-or-miss strategy with dependencies.  But maybe
I'm just being a worry wart. ;-)  In any case, I'm going to be hard-pressed
to sell conda to my team if the dependencies are out of sync with those of
the installers.

On Fri, Jul 31, 2020 at 8:49 AM Alexandre Neto <senhor.neto at gmail.com>
wrote:

> Hi,
>
> I will take this opportunity to give a brief explanation of how conda /
> conda-forge works. At least what I was able to understand so far.
>
> Full disclaimer: I know very little about building and maintaining
> packages and installers, including the QGIS ones, but I try to trigger the
> update of QGIS versions on Conda-forge.
>
> *Conda* - an open source package management system and environment
> management system developed mainly by anaconda. It provides tools to build,
> install and run packages, and setup environments. One interesting feature
> is that, in conda, the same building recipe can be used to build the
> packages for Windows, Mac and Linux. Normally, to build a package, you use
> prebuild packages of its dependencies which are available in conda online
> channels. This doesn't mean that the same versions of the dependencies are
> used for all platforms, as some dependency may not be available or doesn't
> work for a specific platform.
>
> *Conda-forge* - a community that maintains a big amount of conda recipes
> for many open source packages, which are stored in github repositories.
> Those are called feedstocks. Among them, there is a qgis-feedstock and also
> feedstocks for almost all of its dependencies. Collaboration to keep those
> recipes is normally very welcome.
>
> https://conda-forge.org/feedstocks/
>
> https://github.com/conda-forge/qgis-feedstock
>
> All conda-forge recipes (each feedstock github branch) are built
> automatically using Azure Pipelines and uploaded to the conda-forge channel
> in Anaconda cloud, making it easily deployed for installation. QGIS has a
> master (stable) and a LTR branch.
>
> *Anaconda cloud* is a repository of prebuilt packages, which is organized
> in channels.  Anyone can have a channel and upload their locally built
> packages so that others can use them. If you search for QGIS in Anaconda
> cloud you will find several channels with several versions available.
>
> Answering Ari question:
>
> On Fri, Jul 31, 2020 at 6:15 AM Ari Meyer <ari.meyer at gmail.com> wrote:
>
>> @Greg: I found that many of the exact dependencies were not even
>> available through the main channels.  So if the QGIS devs compile/build
>> against such versions, I'm not sure there's an easy way to even specify
>> such a conda recipe, unless all those dependencies are also made available
>> somehow.  I didn't expect that those versions would not even be there with
>> the others for the various libraries.  Could this imply that the library
>> developers don't want those versions to be used?  Not sure.
>>
>
> I can only speak for Conda Forge and mainly QGIS feedstock. I normally try
> to keep the recipes updated for every single new version of QGIS and QGIS
> LTR, but I may forget to do so. Then, sometimes the recipes don't work out
> of the box for a certain patch release of QGIS, the conda-forge folks try
> to fix them, but meanwhile, a new patch release is out, so we may just
> abandon that version recipe and move on. I expect the same may happen with
> other packages... There is no intention of excluding versions for any
> reason.
>
> Regarding the version of the dependencies. Conda-forge community always
> tries to use the most recent version of all dependencies. Sometimes that
> doesn't work, and one needs to pin the version of a dependency. Also, my
> idea was to keep the LTR main dependencies pinned during all its lifecycle,
> to avoid regressions.
>
> *Cool things about QGIS on conda (and conda-forge):*
> - One single transparent recipe to build QGIS in all three main platforms;
> - As users, to install one or several packages for a certain workflow, you
> normally create an environment to isolate the install, which allows having
> several versions of the same software in parallel in your machine.
> Nevertheless, the packages shared by different environments/QGIS versions
> are only downloaded once and don't take more space in the disk. Symbolic
> links are used.
> - Once set, you can share an environment with others, making it perfect
> for collaborative development.
> - Updating QGIS is like osfeo4w in all platforms, only the necessary
> packages are downloads and install.
> - Using Conda-forge infrastructure, you only need to update the recipe,
> the build and upload to anaconda cloud are done in azure pipelines
> "automagically".
> - It's a great way to use QGIS PyQGIS and the command line tools (the
> reason why I try to update QGIS versions in conda-forge)
>
> *Caveats of  conda-forge:*
> - As QGIS project, we have no direct control over dependencies used on the
> master version, as the community has the goal of using the most recent
> dependency versions that is possible. The same is not necessarily true for
> LTR, where I feel we would be allowed to control and pin the dependencies
> - Currently, there are some dependencies missing. For example, QtWebkit,
> which limits QGIS functionality, including some nice plugins like
> DataPlotly, and resource sharing plugin.
>
> It seems to me that, if the QGIS project wanted to use conda as their main
> building/packaging system, we would need to:
> - Keep a fork of conda-forge recipes, and upload the result to a dedicated
> channel, probably even outside anaconda cloud.
> - We could use dependencies available on conda-forge or other channels,
> but we would need to be ready to maintain abandoned packages that greatly
> impact QGIS, like QtWebkit;
> - Recreate the installers (at least Windows and Mac) to use conda tools
> for downloading, installing, and updating packages.
>
> Last bit, when I was working for Boundless, Larry Shaffer was trying to do
> all this mentioned above, but then the company was bought by Planet... Not
> sure what is the status of this work now.
>
> https://github.com/osgeo-forge
>
> Thanks, Sorry for the long post.
>
> Alexandre Neto
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200802/a6a38cb0/attachment-0001.html>

From matthias at opengis.ch  Sun Aug  2 02:04:22 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Sun, 2 Aug 2020 11:04:22 +0200
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CAFC3uCjtTDGzdghjbbUdreinpaREU1U47w2kdTFN97yjXoMpmA@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <CA+H0G_FEo-fuefdxAWScdqJkfr8HNTeTKC6dzr-JsmXsKW-1iQ@mail.gmail.com>
 <CAFC3uCjtTDGzdghjbbUdreinpaREU1U47w2kdTFN97yjXoMpmA@mail.gmail.com>
Message-ID: <b22ac650-042b-e5f2-87b4-be71f40a5dfa@opengis.ch>

Hi Ari, all

I can follow your reasoning. Various discussions have taken place about 
this already.

Currently it's also a question of feasibility. Windows and macOS have 
completely different dependency build chains / repositories. 
Synchronizing those within their current completely separate frameworks 
will be hard to achieve. (other OS'es come with their own set of 
dependencies already, so we only can ignore them - or could build 
complete packages including all deps in the future if we do have a 
standard set).

I had a look at conda-forge in the past months to evaluate if it could 
be considered fit for a reference build system. One precaution I had 
from the start was the rolling release dependency hell we had 
experienced with homebrew. It still needs to be proven if we get away 
with pinning. The major roadblock I hit was already updating Qt. I tried 
to lift it to the latest version with no success (and nobody else 
succeeded either despite constant efforts in the last 4 months since 
that -- because of CI limitations / build issues). If we would have a 
proposal how to continue here (custom hosted CI with a responsible 
person taking care of it?), I am open to explore this further.

In summary, the current process we have works good enough, with the 
occasional troubles of varying dependency versions you mention. Changing 
it would be risky but possible and it is a major effort for which we 
currently lack a widely accepted plan, resources and/or (long-term 
committed) volunteers to do so.

For your particular case here, since there are no standard versions of 
dependencies, conda might be as good as any other guess. Or you go for 
the installer of your main target platform instead.

Best regards

Matthias


On 8/2/20 8:49 AM, Ari Meyer wrote:
> Obrigado, Alexandre, for all the details. :-)  I guess I'm still 
> baffled by, "Conda-forge community always tries to use the most recent 
> version of all dependencies."  It just seems like a "recipe" for 
> disaster -- just built on assumptions. Maybe you get lucky and 
> everything just happens to work.  Or maybe you get slightly less lucky 
> and encounter breakages immediately, forcing you to fiddle with the 
> build until you find some combination that seems to work, if you can't 
> pin the versions.  Or maybe you get unlucky and everything builds and 
> *seems* to work based on the extent of your testing, but your testing 
> may have important gaps.
>
> In my previous contract I was using PyViz, which was rebranded as 
> HoloViz.  As that set of libraries was immature and constantly in 
> flux, and we wanted to take advantage of new features/fixes, our 
> policy was to go with the latest releases.  I wasn't comfortable with 
> this, esp. after enduring many problems, but we just dealt with bugs 
> and regressions as they came up.  QGIS, though, is much more mature, 
> after more than a decade since 1.0 was released (2009 according to 
> Wiki).  I assumed, therefore, that they wouldn't trust such a 
> hit-or-miss strategy with dependencies.  But maybe I'm just being a 
> worry wart. ;-)  In any case, I'm going to be hard-pressed to sell 
> conda to my team if the dependencies are out of sync with those of the 
> installers.
>
> On Fri, Jul 31, 2020 at 8:49 AM Alexandre Neto <senhor.neto at gmail.com 
> <mailto:senhor.neto at gmail.com>> wrote:
>
>     Hi,
>
>     I will take this opportunity to give a brief explanation of how
>     conda / conda-forge works. At least what I was able to understand
>     so far.
>
>     Full disclaimer: I know very little about building and maintaining
>     packages and installers, including the QGIS ones, but I try to
>     trigger the update of QGIS versions on Conda-forge.
>
>     *Conda* - an open source package management system and environment
>     management system developed mainly by anaconda. It provides tools
>     to build, install and run packages, and setup environments. One
>     interesting feature is that, in conda, the same building recipe
>     can be used to build the packages for Windows, Mac and Linux.
>     Normally, to build a package, you use prebuild packages of its
>     dependencies which are available in conda online channels. This
>     doesn't mean that the same versions of the dependencies are used
>     for all platforms, as some dependency may not be available or
>     doesn't work for a specific platform.
>
>     *Conda-forge* - a community that maintains a big amount of conda
>     recipes for many open source packages, which are stored in github
>     repositories. Those are called feedstocks. Among them, there is a
>     qgis-feedstock and also feedstocks for almost all of
>     its dependencies. Collaboration to keep those recipes is normally
>     very welcome.
>
>     https://conda-forge.org/feedstocks/
>
>     https://github.com/conda-forge/qgis-feedstock
>
>     All conda-forge recipes (each feedstock github branch) are built
>     automatically using Azure Pipelines and uploaded to the
>     conda-forge channel in Anaconda cloud, making it easily deployed
>     for installation. QGIS has a master (stable) and a LTR branch.
>
>     *Anaconda cloud* is a repository of prebuilt packages, which is
>     organized in channels.  Anyone can have a channel and upload their
>     locally built packages so that others can use them. If you search
>     for QGIS in Anaconda cloud you will find several channels with
>     several versions available.
>
>     Answering Ari question:
>
>     On Fri, Jul 31, 2020 at 6:15 AM Ari Meyer <ari.meyer at gmail.com
>     <mailto:ari.meyer at gmail.com>> wrote:
>
>         @Greg: I found that many of the exact dependencies were not
>         even available through the main channels.  So if the QGIS devs
>         compile/build against such versions, I'm not sure there's an
>         easy way to even specify such a conda recipe, unless all those
>         dependencies are also made available somehow.  I didn't expect
>         that those versions would not even be there with the others
>         for the various libraries.  Could this imply that the library
>         developers don't want those versions to be used?  Not sure.
>
>
>     I can only speak for Conda Forge and mainly QGIS feedstock. I
>     normally try to keep the recipes updated for every single new
>     version of QGIS and QGIS LTR, but I may forget to do so. Then,
>     sometimes the recipes don't work out of the box for a certain
>     patch release of QGIS, the conda-forge folks try to fix them, but
>     meanwhile, a new patch release is out, so we may just abandon that
>     version recipe and move on. I expect the same may happen with
>     other packages... There is no intention of excluding versions for
>     any reason.
>
>     Regarding the version of the dependencies. Conda-forge community
>     always tries to use the most recent version of all dependencies.
>     Sometimes that doesn't work, and one needs to pin the version of a
>     dependency. Also, my idea was to keep the LTR main dependencies
>     pinned during all its lifecycle, to avoid regressions.
>
>     *Cool things about QGIS on conda (and conda-forge):*
>     - One single transparent recipe to build QGIS in all three main
>     platforms;
>     - As users, to install one or several packages for a certain
>     workflow, you normally create an environment to isolate the
>     install, which allows having several versions of the same software
>     in parallel in your machine. Nevertheless, the packages shared by
>     different environments/QGIS versions are only downloaded once and
>     don't take more space in the disk. Symbolic links are used.
>     - Once set, you can share an environment with others, making it
>     perfect for collaborative development.
>     - Updating QGIS is like osfeo4w in all platforms, only the
>     necessary packages are downloads and install.
>     - Using Conda-forge infrastructure, you only need to update the
>     recipe, the build and upload to anaconda cloud are done in azure
>     pipelines "automagically".
>     - It's a great way to use QGIS PyQGIS and the command line tools
>     (the reason why I try to update QGIS versions in conda-forge)
>
>     *Caveats of  conda-forge:*
>     - As QGIS project, we have no direct control over dependencies
>     used on the master version, as the community has the goal of using
>     the most recent dependency versions that is possible. The same is
>     not necessarily true for LTR, where I feel we would be allowed to
>     control and pin the dependencies
>     - Currently, there are some dependencies missing. For example,
>     QtWebkit, which limits QGIS functionality, including some nice
>     plugins like DataPlotly, and resource sharing plugin.
>
>     It seems to me that, if the QGIS project wanted to use conda as
>     their main building/packaging system, we would need to:
>     - Keep a fork of conda-forge recipes, and upload the result to a
>     dedicated channel, probably even outside anaconda cloud.
>     - We could use dependencies available on conda-forge or other
>     channels, but we would need to be ready to maintain abandoned
>     packages that greatly impact QGIS, like QtWebkit;
>     - Recreate the installers (at least Windows and Mac) to use conda
>     tools for downloading, installing, and updating packages.
>
>     Last bit, when I was working for Boundless, Larry Shaffer was
>     trying to do all this mentioned above, but then the company was
>     bought by Planet... Not sure what is the status of this work now.
>
>     https://github.com/osgeo-forge
>
>     Thanks, Sorry for the long post.
>
>     Alexandre Neto
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200802/283561fb/attachment.html>

From gb_nedjima at esi.dz  Sun Aug  2 14:26:23 2020
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Sun, 2 Aug 2020 22:26:23 +0100
Subject: [QGIS-Developer] [SoC] GSoC 2020 - Coding Period Week 9 Report
Message-ID: <CAGiKOuh+nSU=KJC=qgP9ExCURtf11FbV_NwvV14_eYfxi9sALA@mail.gmail.com>

Hi all,
Last week the scene export feature was pushed into master and now anyone
can experiment with it. If you experimented with the feature and had any
issues don't hesitate to let me know about it.
Here is my report for this week:

   -
   - Tasks done:
      - The scene export feature is merged with the master branch and
      contributors can check the scene export export feature.
      - Read the code Qt3DExtras::QSkyboxEntity from the Qt3D source files
      and found a bug that prevented textures from loading correctly.
      - Implement QqgSkyboxEntity class based on Qt3DExtras::QSkyboxEntity
      implementation.
      - Implement rendering of skyboxes using either a collection of
      textures in the same directory or 6 images for each cube face.
      - Implement rendering of skyboxes using a single 360 image (I tested
      .hdr images from HDRI-haven <https://hdrihaven.com>and it worked
      well).
      - Make QgsSkyboxSettings class and necessary UI for the skybox
      configuration.
      - Added documentations and some refactoring.
      - Made a pull request you can check at github
      <https://github.com/qgis/QGIS/pull/38087>.
   - Screenshots:
      - skybox1 <https://i.imgur.com/OSRXYRh.gif>
      - skybox2 <https://i.imgur.com/bvrdgul.gif>
   - Tasks to be done:
      - Fix github checks and address reviews.
      - Work on wire frames rendering.
   - Blocking issues: None

Any suggestion or feedback is always welcome.
Best wishes,


-- 
Belgacem Nedjima
4th year computer science and engineering student.
https://github.com/NEDJIMAbelgacem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200802/7302a530/attachment.html>

From senhor.neto at gmail.com  Sun Aug  2 15:12:57 2020
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Sun, 2 Aug 2020 23:12:57 +0100
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <b22ac650-042b-e5f2-87b4-be71f40a5dfa@opengis.ch>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <CA+H0G_FEo-fuefdxAWScdqJkfr8HNTeTKC6dzr-JsmXsKW-1iQ@mail.gmail.com>
 <CAFC3uCjtTDGzdghjbbUdreinpaREU1U47w2kdTFN97yjXoMpmA@mail.gmail.com>
 <b22ac650-042b-e5f2-87b4-be71f40a5dfa@opengis.ch>
Message-ID: <CA+H0G_FdMaQ6ku9GaCv2Lv9eMmL7AS0qfsiPEZMARPhov3W02Q@mail.gmail.com>

Hi,

Following the discussion on QGIS dependencies on conda-forge, I had a chat
with one of conda-forge most active maintainers.

It seems that the conda-forge community is aware of the dangers of building
only bleeding edge versions of the packages. There's a CFEP (same as our
QEP) to improve the situation.

https://hackmd.io/N1hoJGJBSqGTFd83pxCyYA

Nevertheless, regarding the QGIS packages, and because they are not
dependencies of any other packages, I was told that it would be ok to
create local pinning configuration files for both our stable and LTR
branches. This means we could have the control of the most important
dependencies. I will try to mimic osgeo4w for 3.16 onwards, and make sure
the pinning is not changed during the LTR life cycle.

This does not fix the issue with no one maintaining the QtWebKit package,
but I don't think no one really worked actively on it.

My intentions are not to replace our packaging system (poor me), that, like
Mathias said, works fine for now. I will just try to keep QGIS available on
conda, as it seems useful for some folks, and it doesn't really take me too
much time.

Thanks,

Alexandre Neto

A domingo, 2/08/2020, 10:04, Matthias Kuhn <matthias at opengis.ch> escreveu:

> Hi Ari, all
>
> I can follow your reasoning. Various discussions have taken place about
> this already.
>
> Currently it's also a question of feasibility. Windows and macOS have
> completely different dependency build chains / repositories. Synchronizing
> those within their current completely separate frameworks will be hard to
> achieve. (other OS'es come with their own set of dependencies already, so
> we only can ignore them - or could build complete packages including all
> deps in the future if we do have a standard set).
>
> I had a look at conda-forge in the past months to evaluate if it could be
> considered fit for a reference build system. One precaution I had from the
> start was the rolling release dependency hell we had experienced with
> homebrew. It still needs to be proven if we get away with pinning. The
> major roadblock I hit was already updating Qt. I tried to lift it to the
> latest version with no success (and nobody else succeeded either despite
> constant efforts in the last 4 months since that -- because of CI
> limitations / build issues). If we would have a proposal how to continue
> here (custom hosted CI with a responsible person taking care of it?), I am
> open to explore this further.
>
> In summary, the current process we have works good enough, with the
> occasional troubles of varying dependency versions you mention. Changing it
> would be risky but possible and it is a major effort for which we currently
> lack a widely accepted plan, resources and/or (long-term committed)
> volunteers to do so.
>
> For your particular case here, since there are no standard versions of
> dependencies, conda might be as good as any other guess. Or you go for the
> installer of your main target platform instead.
>
> Best regards
>
> Matthias
>
>
> On 8/2/20 8:49 AM, Ari Meyer wrote:
>
> Obrigado, Alexandre, for all the details. :-)  I guess I'm still baffled
> by, "Conda-forge community always tries to use the most recent version of
> all dependencies."  It just seems like a "recipe" for disaster -- just
> built on assumptions.  Maybe you get lucky and everything just happens to
> work.  Or maybe you get slightly less lucky and encounter breakages
> immediately, forcing you to fiddle with the build until you find some
> combination that seems to work, if you can't pin the versions.  Or maybe
> you get unlucky and everything builds and *seems* to work based on the
> extent of your testing, but your testing may have important gaps.
>
> In my previous contract I was using PyViz, which was rebranded as
> HoloViz.  As that set of libraries was immature and constantly in flux, and
> we wanted to take advantage of new features/fixes, our policy was to go
> with the latest releases.  I wasn't comfortable with this, esp. after
> enduring many problems, but we just dealt with bugs and regressions as they
> came up.  QGIS, though, is much more mature, after more than a decade since
> 1.0 was released (2009 according to Wiki).  I assumed, therefore, that they
> wouldn't trust such a hit-or-miss strategy with dependencies.  But maybe
> I'm just being a worry wart. ;-)  In any case, I'm going to be hard-pressed
> to sell conda to my team if the dependencies are out of sync with those of
> the installers.
>
> On Fri, Jul 31, 2020 at 8:49 AM Alexandre Neto <senhor.neto at gmail.com>
> wrote:
>
>> Hi,
>>
>> I will take this opportunity to give a brief explanation of how conda /
>> conda-forge works. At least what I was able to understand so far.
>>
>> Full disclaimer: I know very little about building and maintaining
>> packages and installers, including the QGIS ones, but I try to trigger the
>> update of QGIS versions on Conda-forge.
>>
>> *Conda* - an open source package management system and environment
>> management system developed mainly by anaconda. It provides tools to build,
>> install and run packages, and setup environments. One interesting feature
>> is that, in conda, the same building recipe can be used to build the
>> packages for Windows, Mac and Linux. Normally, to build a package, you use
>> prebuild packages of its dependencies which are available in conda online
>> channels. This doesn't mean that the same versions of the dependencies are
>> used for all platforms, as some dependency may not be available or doesn't
>> work for a specific platform.
>>
>> *Conda-forge* - a community that maintains a big amount of conda recipes
>> for many open source packages, which are stored in github repositories.
>> Those are called feedstocks. Among them, there is a qgis-feedstock and also
>> feedstocks for almost all of its dependencies. Collaboration to keep those
>> recipes is normally very welcome.
>>
>> https://conda-forge.org/feedstocks/
>>
>> https://github.com/conda-forge/qgis-feedstock
>>
>> All conda-forge recipes (each feedstock github branch) are built
>> automatically using Azure Pipelines and uploaded to the conda-forge channel
>> in Anaconda cloud, making it easily deployed for installation. QGIS has a
>> master (stable) and a LTR branch.
>>
>> *Anaconda cloud* is a repository of prebuilt packages, which is
>> organized in channels.  Anyone can have a channel and upload their locally
>> built packages so that others can use them. If you search for QGIS in
>> Anaconda cloud you will find several channels with several versions
>> available.
>>
>> Answering Ari question:
>>
>> On Fri, Jul 31, 2020 at 6:15 AM Ari Meyer <ari.meyer at gmail.com> wrote:
>>
>>> @Greg: I found that many of the exact dependencies were not even
>>> available through the main channels.  So if the QGIS devs compile/build
>>> against such versions, I'm not sure there's an easy way to even specify
>>> such a conda recipe, unless all those dependencies are also made available
>>> somehow.  I didn't expect that those versions would not even be there with
>>> the others for the various libraries.  Could this imply that the library
>>> developers don't want those versions to be used?  Not sure.
>>>
>>
>> I can only speak for Conda Forge and mainly QGIS feedstock. I normally
>> try to keep the recipes updated for every single new version of QGIS and
>> QGIS LTR, but I may forget to do so. Then, sometimes the recipes don't work
>> out of the box for a certain patch release of QGIS, the conda-forge folks
>> try to fix them, but meanwhile, a new patch release is out, so we may just
>> abandon that version recipe and move on. I expect the same may happen with
>> other packages... There is no intention of excluding versions for any
>> reason.
>>
>> Regarding the version of the dependencies. Conda-forge community always
>> tries to use the most recent version of all dependencies. Sometimes that
>> doesn't work, and one needs to pin the version of a dependency. Also, my
>> idea was to keep the LTR main dependencies pinned during all its lifecycle,
>> to avoid regressions.
>>
>> *Cool things about QGIS on conda (and conda-forge):*
>> - One single transparent recipe to build QGIS in all three main platforms;
>> - As users, to install one or several packages for a certain workflow,
>> you normally create an environment to isolate the install, which allows
>> having several versions of the same software in parallel in your machine.
>> Nevertheless, the packages shared by different environments/QGIS versions
>> are only downloaded once and don't take more space in the disk. Symbolic
>> links are used.
>> - Once set, you can share an environment with others, making it perfect
>> for collaborative development.
>> - Updating QGIS is like osfeo4w in all platforms, only the necessary
>> packages are downloads and install.
>> - Using Conda-forge infrastructure, you only need to update the recipe,
>> the build and upload to anaconda cloud are done in azure pipelines
>> "automagically".
>> - It's a great way to use QGIS PyQGIS and the command line tools (the
>> reason why I try to update QGIS versions in conda-forge)
>>
>> *Caveats of  conda-forge:*
>> - As QGIS project, we have no direct control over dependencies used on
>> the master version, as the community has the goal of using the most recent
>> dependency versions that is possible. The same is not necessarily true for
>> LTR, where I feel we would be allowed to control and pin the dependencies
>> - Currently, there are some dependencies missing. For example, QtWebkit,
>> which limits QGIS functionality, including some nice plugins like
>> DataPlotly, and resource sharing plugin.
>>
>> It seems to me that, if the QGIS project wanted to use conda as their
>> main building/packaging system, we would need to:
>> - Keep a fork of conda-forge recipes, and upload the result to a
>> dedicated channel, probably even outside anaconda cloud.
>> - We could use dependencies available on conda-forge or other channels,
>> but we would need to be ready to maintain abandoned packages that greatly
>> impact QGIS, like QtWebkit;
>> - Recreate the installers (at least Windows and Mac) to use conda tools
>> for downloading, installing, and updating packages.
>>
>> Last bit, when I was working for Boundless, Larry Shaffer was trying to
>> do all this mentioned above, but then the company was bought by Planet...
>> Not sure what is the status of this work now.
>>
>> https://github.com/osgeo-forge
>>
>> Thanks, Sorry for the long post.
>>
>> Alexandre Neto
>>
>>
>>
>>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200802/11b30f00/attachment-0001.html>

From nyall.dawson at gmail.com  Sun Aug  2 15:27:57 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 3 Aug 2020 08:27:57 +1000
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CAFC3uCgwQGY=fDfV_N6KfGgp3iNdKrrDOBSr2FO1oKkHEcQyzw@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>
 <CAFC3uCgwQGY=fDfV_N6KfGgp3iNdKrrDOBSr2FO1oKkHEcQyzw@mail.gmail.com>
Message-ID: <CAB28AsjGuQO0SQkGUv3Uk7uq2GJ5On0XHuNThxHkuAr9Qp9B9g@mail.gmail.com>

On Sun, 2 Aug 2020 at 16:25, Ari Meyer <ari.meyer at gmail.com> wrote:
>
> Nyall, is the issue here multi-platform builds?  I have experienced problems with conda where the Windows port of a native library was faulty (I distinctly remember netcdf4/xarray last year). It seemed like Windows was the ugly stepchild -- always neglected.  I think it will always be a problem for conda, as opposed to pip, due to the native libraries.  So I think it's fair to document problems with dependency versions on particular platforms and provide workable substitutions, but to trust the latest release seems really dangerous to me.

Ari -- I think you misunderstood my argument. We're arguing for the
same things, as I also agree that having external agencies who are
completely unaware of the needs of QGIS dictate our dependencies is
dangerous!

I'm ok with this on the Linux side, because Linux distros have used
this approach forever and have very robust structures in place for
handling these. But in my experience conda and homebrew are really
just "wild west" style proving grounds where anything goes and things
are constantly breaking.

Nyall



 All of the discrepancies I noted in the above issue had differing
minor or even major versions, implying API breakages:
>
> Dependency diffs versus the downloadable Windows desktop versions 3.14.0 and 3.14.1:
> a) gdal:
> Windows desktop: 3.0.4
> conda-forge: 3.1.1
> b) qt:
> Windows desktop: 5.11.2
> conda-forge: 5.12.5
> c) sqlite:
> Windows desktop: 3.29.0
> conda-forge: 3.32.3
> d) postgresql:
> Windows desktop: 11.5
> conda-forge: 12.3
> e) qwt:
> Windows desktop: 6.3.2
> conda-forge: 7.0.0
> f) pyqt:
> Windows desktop: 5.11.3
> conda-forge: 5.12.3
>
> Given that, it would be interesting to know if one distribution was significantly more buggy than another.
>
> On Sun, Aug 2, 2020 at 12:51 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Sun, 2 Aug 2020 at 11:02, Ari Meyer <ari.meyer at gmail.com> wrote:
>> >
>> > Matthias, WADR, your statement seems, at least on the surface, to indicate an incredibly fragile process.  How can you possibly maintain stability and reproducibility if the dependencies can be changed at will?
>>
>> And that's the big concern with approaches like conda. Past experience
>> with using homebrew for the mac builds suffered this very issue
>> constantly. It's only since the QGIS mac os build was seperated away
>> from the homebrew dependancy nightmare that we're seeing stability in
>> the macos builds... *
>>
>> Nyall
>>
>> * William's system packages use a different approach, so aren't
>> subject to this comment!
>>
>> >
>> > On Fri, Jul 31, 2020 at 2:27 AM Matthias Kuhn <matthias at opengis.ch> wrote:
>> >>
>> >> One thing to keep in mind is that even the main qgis installers/distributions do not have fixed dependency versions. Using downloaded macOS QGIS will have different dependencies than Windows and so will all the linux/*nix flavors.
>> >>
>> >> On 7/31/20 7:14 AM, Ari Meyer wrote:
>> >>
>> >> @Nyall, that proposal appears to be specific to plugins -- not sure if that's the best place to discuss this issue.
>> >> @Greg: I found that many of the exact dependencies were not even available through the main channels.  So if the QGIS devs compile/build against such versions, I'm not sure there's an easy way to even specify such a conda recipe, unless all those dependencies are also made available somehow.  I didn't expect that those versions would not even be there with the others for the various libraries.  Could this imply that the library developers don't want those versions to be used?  Not sure.
>> >>
>> >> As a user and developer, I just want to be sure that if I pull down conda-forge qgis version X that I will get the same effective distribution as contained in downloadable installer version X.  Right now, we are getting a very different set of dependencies.
>> >>
>> >> Thanks,
>> >> Ari
>> >>
>> >> On Thu, Jul 30, 2020 at 6:44 PM Greg Troxel <gdt at lexort.com> wrote:
>> >>>
>> >>> Nyall Dawson <nyall.dawson at gmail.com> writes:
>> >>>
>> >>> > There's a related proposal at
>> >>> > https://github.com/qgis/QGIS-Enhancement-Proposals/issues/179 --
>> >>> > probably best to keep the discussion on that page.
>> >>>
>> >>> Not really about the details of using conda but about the concept:
>> >>>
>> >>>   conda's documentation says it runs on "Windows, macOS and Linux" but
>> >>>   qgis also runs on at least NetBSD and almost certainly other BSDs.
>> >>>
>> >>>   it seems that to build something, including qgis the requirement is
>> >>>   that the things it depends on are present in some way that is found by
>> >>>   the build.  People can choose to do that however they want, and it
>> >>>   seems funny to me to impose a requirement.   If this is really "let's
>> >>>   publish a conda config file so that people who want to do that can do
>> >>>   less work", that's of course fine, but if it's more "if you don't have
>> >>>   conda then you can't build qgis", that's something else.
>> >>
>> >>
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From ari.meyer at gmail.com  Sun Aug  2 22:40:37 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Mon, 3 Aug 2020 00:40:37 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <b22ac650-042b-e5f2-87b4-be71f40a5dfa@opengis.ch>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <CA+H0G_FEo-fuefdxAWScdqJkfr8HNTeTKC6dzr-JsmXsKW-1iQ@mail.gmail.com>
 <CAFC3uCjtTDGzdghjbbUdreinpaREU1U47w2kdTFN97yjXoMpmA@mail.gmail.com>
 <b22ac650-042b-e5f2-87b4-be71f40a5dfa@opengis.ch>
Message-ID: <CAFC3uCje=fQd6eJDpf8ZN-EyEuXP=1buBLoL8YgDJ+W-mOw7sw@mail.gmail.com>

Thanks for explaining, Matthias.  That's particularly concerning with Qt,
as it's core to so many projects and prides itself on being
cross-platform.  I still think conda (using pinned versions) is worth
trying.

Cheers!
Ari

On Sun, Aug 2, 2020 at 4:04 AM Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Ari, all
>
> I can follow your reasoning. Various discussions have taken place about
> this already.
>
> Currently it's also a question of feasibility. Windows and macOS have
> completely different dependency build chains / repositories. Synchronizing
> those within their current completely separate frameworks will be hard to
> achieve. (other OS'es come with their own set of dependencies already, so
> we only can ignore them - or could build complete packages including all
> deps in the future if we do have a standard set).
>
> I had a look at conda-forge in the past months to evaluate if it could be
> considered fit for a reference build system. One precaution I had from the
> start was the rolling release dependency hell we had experienced with
> homebrew. It still needs to be proven if we get away with pinning. The
> major roadblock I hit was already updating Qt. I tried to lift it to the
> latest version with no success (and nobody else succeeded either despite
> constant efforts in the last 4 months since that -- because of CI
> limitations / build issues). If we would have a proposal how to continue
> here (custom hosted CI with a responsible person taking care of it?), I am
> open to explore this further.
>
> In summary, the current process we have works good enough, with the
> occasional troubles of varying dependency versions you mention. Changing it
> would be risky but possible and it is a major effort for which we currently
> lack a widely accepted plan, resources and/or (long-term committed)
> volunteers to do so.
>
> For your particular case here, since there are no standard versions of
> dependencies, conda might be as good as any other guess. Or you go for the
> installer of your main target platform instead.
>
> Best regards
>
> Matthias
>
>
> On 8/2/20 8:49 AM, Ari Meyer wrote:
>
> Obrigado, Alexandre, for all the details. :-)  I guess I'm still baffled
> by, "Conda-forge community always tries to use the most recent version of
> all dependencies."  It just seems like a "recipe" for disaster -- just
> built on assumptions.  Maybe you get lucky and everything just happens to
> work.  Or maybe you get slightly less lucky and encounter breakages
> immediately, forcing you to fiddle with the build until you find some
> combination that seems to work, if you can't pin the versions.  Or maybe
> you get unlucky and everything builds and *seems* to work based on the
> extent of your testing, but your testing may have important gaps.
>
> In my previous contract I was using PyViz, which was rebranded as
> HoloViz.  As that set of libraries was immature and constantly in flux, and
> we wanted to take advantage of new features/fixes, our policy was to go
> with the latest releases.  I wasn't comfortable with this, esp. after
> enduring many problems, but we just dealt with bugs and regressions as they
> came up.  QGIS, though, is much more mature, after more than a decade since
> 1.0 was released (2009 according to Wiki).  I assumed, therefore, that they
> wouldn't trust such a hit-or-miss strategy with dependencies.  But maybe
> I'm just being a worry wart. ;-)  In any case, I'm going to be hard-pressed
> to sell conda to my team if the dependencies are out of sync with those of
> the installers.
>
> On Fri, Jul 31, 2020 at 8:49 AM Alexandre Neto <senhor.neto at gmail.com>
> wrote:
>
>> Hi,
>>
>> I will take this opportunity to give a brief explanation of how conda /
>> conda-forge works. At least what I was able to understand so far.
>>
>> Full disclaimer: I know very little about building and maintaining
>> packages and installers, including the QGIS ones, but I try to trigger the
>> update of QGIS versions on Conda-forge.
>>
>> *Conda* - an open source package management system and environment
>> management system developed mainly by anaconda. It provides tools to build,
>> install and run packages, and setup environments. One interesting feature
>> is that, in conda, the same building recipe can be used to build the
>> packages for Windows, Mac and Linux. Normally, to build a package, you use
>> prebuild packages of its dependencies which are available in conda online
>> channels. This doesn't mean that the same versions of the dependencies are
>> used for all platforms, as some dependency may not be available or doesn't
>> work for a specific platform.
>>
>> *Conda-forge* - a community that maintains a big amount of conda recipes
>> for many open source packages, which are stored in github repositories.
>> Those are called feedstocks. Among them, there is a qgis-feedstock and also
>> feedstocks for almost all of its dependencies. Collaboration to keep those
>> recipes is normally very welcome.
>>
>> https://conda-forge.org/feedstocks/
>>
>> https://github.com/conda-forge/qgis-feedstock
>>
>> All conda-forge recipes (each feedstock github branch) are built
>> automatically using Azure Pipelines and uploaded to the conda-forge channel
>> in Anaconda cloud, making it easily deployed for installation. QGIS has a
>> master (stable) and a LTR branch.
>>
>> *Anaconda cloud* is a repository of prebuilt packages, which is
>> organized in channels.  Anyone can have a channel and upload their locally
>> built packages so that others can use them. If you search for QGIS in
>> Anaconda cloud you will find several channels with several versions
>> available.
>>
>> Answering Ari question:
>>
>> On Fri, Jul 31, 2020 at 6:15 AM Ari Meyer <ari.meyer at gmail.com> wrote:
>>
>>> @Greg: I found that many of the exact dependencies were not even
>>> available through the main channels.  So if the QGIS devs compile/build
>>> against such versions, I'm not sure there's an easy way to even specify
>>> such a conda recipe, unless all those dependencies are also made available
>>> somehow.  I didn't expect that those versions would not even be there with
>>> the others for the various libraries.  Could this imply that the library
>>> developers don't want those versions to be used?  Not sure.
>>>
>>
>> I can only speak for Conda Forge and mainly QGIS feedstock. I normally
>> try to keep the recipes updated for every single new version of QGIS and
>> QGIS LTR, but I may forget to do so. Then, sometimes the recipes don't work
>> out of the box for a certain patch release of QGIS, the conda-forge folks
>> try to fix them, but meanwhile, a new patch release is out, so we may just
>> abandon that version recipe and move on. I expect the same may happen with
>> other packages... There is no intention of excluding versions for any
>> reason.
>>
>> Regarding the version of the dependencies. Conda-forge community always
>> tries to use the most recent version of all dependencies. Sometimes that
>> doesn't work, and one needs to pin the version of a dependency. Also, my
>> idea was to keep the LTR main dependencies pinned during all its lifecycle,
>> to avoid regressions.
>>
>> *Cool things about QGIS on conda (and conda-forge):*
>> - One single transparent recipe to build QGIS in all three main platforms;
>> - As users, to install one or several packages for a certain workflow,
>> you normally create an environment to isolate the install, which allows
>> having several versions of the same software in parallel in your machine.
>> Nevertheless, the packages shared by different environments/QGIS versions
>> are only downloaded once and don't take more space in the disk. Symbolic
>> links are used.
>> - Once set, you can share an environment with others, making it perfect
>> for collaborative development.
>> - Updating QGIS is like osfeo4w in all platforms, only the necessary
>> packages are downloads and install.
>> - Using Conda-forge infrastructure, you only need to update the recipe,
>> the build and upload to anaconda cloud are done in azure pipelines
>> "automagically".
>> - It's a great way to use QGIS PyQGIS and the command line tools (the
>> reason why I try to update QGIS versions in conda-forge)
>>
>> *Caveats of  conda-forge:*
>> - As QGIS project, we have no direct control over dependencies used on
>> the master version, as the community has the goal of using the most recent
>> dependency versions that is possible. The same is not necessarily true for
>> LTR, where I feel we would be allowed to control and pin the dependencies
>> - Currently, there are some dependencies missing. For example, QtWebkit,
>> which limits QGIS functionality, including some nice plugins like
>> DataPlotly, and resource sharing plugin.
>>
>> It seems to me that, if the QGIS project wanted to use conda as their
>> main building/packaging system, we would need to:
>> - Keep a fork of conda-forge recipes, and upload the result to a
>> dedicated channel, probably even outside anaconda cloud.
>> - We could use dependencies available on conda-forge or other channels,
>> but we would need to be ready to maintain abandoned packages that greatly
>> impact QGIS, like QtWebkit;
>> - Recreate the installers (at least Windows and Mac) to use conda tools
>> for downloading, installing, and updating packages.
>>
>> Last bit, when I was working for Boundless, Larry Shaffer was trying to
>> do all this mentioned above, but then the company was bought by Planet...
>> Not sure what is the status of this work now.
>>
>> https://github.com/osgeo-forge
>>
>> Thanks, Sorry for the long post.
>>
>> Alexandre Neto
>>
>>
>>
>>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/91e7f1c3/attachment-0001.html>

From ari.meyer at gmail.com  Sun Aug  2 22:41:37 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Mon, 3 Aug 2020 00:41:37 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CA+H0G_FdMaQ6ku9GaCv2Lv9eMmL7AS0qfsiPEZMARPhov3W02Q@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <CA+H0G_FEo-fuefdxAWScdqJkfr8HNTeTKC6dzr-JsmXsKW-1iQ@mail.gmail.com>
 <CAFC3uCjtTDGzdghjbbUdreinpaREU1U47w2kdTFN97yjXoMpmA@mail.gmail.com>
 <b22ac650-042b-e5f2-87b4-be71f40a5dfa@opengis.ch>
 <CA+H0G_FdMaQ6ku9GaCv2Lv9eMmL7AS0qfsiPEZMARPhov3W02Q@mail.gmail.com>
Message-ID: <CAFC3uCizZoK9JCoakV1Mx-aabD6hUj1NvEDLjAQ=c4_ENj4d6g@mail.gmail.com>

Good to hear, Alexandre.  Your efforts are much appreciated!
Ari

On Sun, Aug 2, 2020 at 5:13 PM Alexandre Neto <senhor.neto at gmail.com> wrote:

> Hi,
>
> Following the discussion on QGIS dependencies on conda-forge, I had a chat
> with one of conda-forge most active maintainers.
>
> It seems that the conda-forge community is aware of the dangers of
> building only bleeding edge versions of the packages. There's a CFEP (same
> as our QEP) to improve the situation.
>
> https://hackmd.io/N1hoJGJBSqGTFd83pxCyYA
>
> Nevertheless, regarding the QGIS packages, and because they are not
> dependencies of any other packages, I was told that it would be ok to
> create local pinning configuration files for both our stable and LTR
> branches. This means we could have the control of the most important
> dependencies. I will try to mimic osgeo4w for 3.16 onwards, and make sure
> the pinning is not changed during the LTR life cycle.
>
> This does not fix the issue with no one maintaining the QtWebKit package,
> but I don't think no one really worked actively on it.
>
> My intentions are not to replace our packaging system (poor me), that,
> like Mathias said, works fine for now. I will just try to keep QGIS
> available on conda, as it seems useful for some folks, and it doesn't
> really take me too much time.
>
> Thanks,
>
> Alexandre Neto
>
> A domingo, 2/08/2020, 10:04, Matthias Kuhn <matthias at opengis.ch> escreveu:
>
>> Hi Ari, all
>>
>> I can follow your reasoning. Various discussions have taken place about
>> this already.
>>
>> Currently it's also a question of feasibility. Windows and macOS have
>> completely different dependency build chains / repositories. Synchronizing
>> those within their current completely separate frameworks will be hard to
>> achieve. (other OS'es come with their own set of dependencies already, so
>> we only can ignore them - or could build complete packages including all
>> deps in the future if we do have a standard set).
>>
>> I had a look at conda-forge in the past months to evaluate if it could be
>> considered fit for a reference build system. One precaution I had from the
>> start was the rolling release dependency hell we had experienced with
>> homebrew. It still needs to be proven if we get away with pinning. The
>> major roadblock I hit was already updating Qt. I tried to lift it to the
>> latest version with no success (and nobody else succeeded either despite
>> constant efforts in the last 4 months since that -- because of CI
>> limitations / build issues). If we would have a proposal how to continue
>> here (custom hosted CI with a responsible person taking care of it?), I am
>> open to explore this further.
>>
>> In summary, the current process we have works good enough, with the
>> occasional troubles of varying dependency versions you mention. Changing it
>> would be risky but possible and it is a major effort for which we currently
>> lack a widely accepted plan, resources and/or (long-term committed)
>> volunteers to do so.
>>
>> For your particular case here, since there are no standard versions of
>> dependencies, conda might be as good as any other guess. Or you go for the
>> installer of your main target platform instead.
>>
>> Best regards
>>
>> Matthias
>>
>>
>> On 8/2/20 8:49 AM, Ari Meyer wrote:
>>
>> Obrigado, Alexandre, for all the details. :-)  I guess I'm still baffled
>> by, "Conda-forge community always tries to use the most recent version of
>> all dependencies."  It just seems like a "recipe" for disaster -- just
>> built on assumptions.  Maybe you get lucky and everything just happens to
>> work.  Or maybe you get slightly less lucky and encounter breakages
>> immediately, forcing you to fiddle with the build until you find some
>> combination that seems to work, if you can't pin the versions.  Or maybe
>> you get unlucky and everything builds and *seems* to work based on the
>> extent of your testing, but your testing may have important gaps.
>>
>> In my previous contract I was using PyViz, which was rebranded as
>> HoloViz.  As that set of libraries was immature and constantly in flux, and
>> we wanted to take advantage of new features/fixes, our policy was to go
>> with the latest releases.  I wasn't comfortable with this, esp. after
>> enduring many problems, but we just dealt with bugs and regressions as they
>> came up.  QGIS, though, is much more mature, after more than a decade since
>> 1.0 was released (2009 according to Wiki).  I assumed, therefore, that they
>> wouldn't trust such a hit-or-miss strategy with dependencies.  But maybe
>> I'm just being a worry wart. ;-)  In any case, I'm going to be hard-pressed
>> to sell conda to my team if the dependencies are out of sync with those of
>> the installers.
>>
>> On Fri, Jul 31, 2020 at 8:49 AM Alexandre Neto <senhor.neto at gmail.com>
>> wrote:
>>
>>> Hi,
>>>
>>> I will take this opportunity to give a brief explanation of how conda /
>>> conda-forge works. At least what I was able to understand so far.
>>>
>>> Full disclaimer: I know very little about building and maintaining
>>> packages and installers, including the QGIS ones, but I try to trigger the
>>> update of QGIS versions on Conda-forge.
>>>
>>> *Conda* - an open source package management system and environment
>>> management system developed mainly by anaconda. It provides tools to build,
>>> install and run packages, and setup environments. One interesting feature
>>> is that, in conda, the same building recipe can be used to build the
>>> packages for Windows, Mac and Linux. Normally, to build a package, you use
>>> prebuild packages of its dependencies which are available in conda online
>>> channels. This doesn't mean that the same versions of the dependencies are
>>> used for all platforms, as some dependency may not be available or doesn't
>>> work for a specific platform.
>>>
>>> *Conda-forge* - a community that maintains a big amount of conda
>>> recipes for many open source packages, which are stored in github
>>> repositories. Those are called feedstocks. Among them, there is a
>>> qgis-feedstock and also feedstocks for almost all of its dependencies.
>>> Collaboration to keep those recipes is normally very welcome.
>>>
>>> https://conda-forge.org/feedstocks/
>>>
>>> https://github.com/conda-forge/qgis-feedstock
>>>
>>> All conda-forge recipes (each feedstock github branch) are built
>>> automatically using Azure Pipelines and uploaded to the conda-forge channel
>>> in Anaconda cloud, making it easily deployed for installation. QGIS has a
>>> master (stable) and a LTR branch.
>>>
>>> *Anaconda cloud* is a repository of prebuilt packages, which is
>>> organized in channels.  Anyone can have a channel and upload their locally
>>> built packages so that others can use them. If you search for QGIS in
>>> Anaconda cloud you will find several channels with several versions
>>> available.
>>>
>>> Answering Ari question:
>>>
>>> On Fri, Jul 31, 2020 at 6:15 AM Ari Meyer <ari.meyer at gmail.com> wrote:
>>>
>>>> @Greg: I found that many of the exact dependencies were not even
>>>> available through the main channels.  So if the QGIS devs compile/build
>>>> against such versions, I'm not sure there's an easy way to even specify
>>>> such a conda recipe, unless all those dependencies are also made available
>>>> somehow.  I didn't expect that those versions would not even be there with
>>>> the others for the various libraries.  Could this imply that the library
>>>> developers don't want those versions to be used?  Not sure.
>>>>
>>>
>>> I can only speak for Conda Forge and mainly QGIS feedstock. I normally
>>> try to keep the recipes updated for every single new version of QGIS and
>>> QGIS LTR, but I may forget to do so. Then, sometimes the recipes don't work
>>> out of the box for a certain patch release of QGIS, the conda-forge folks
>>> try to fix them, but meanwhile, a new patch release is out, so we may just
>>> abandon that version recipe and move on. I expect the same may happen with
>>> other packages... There is no intention of excluding versions for any
>>> reason.
>>>
>>> Regarding the version of the dependencies. Conda-forge community always
>>> tries to use the most recent version of all dependencies. Sometimes that
>>> doesn't work, and one needs to pin the version of a dependency. Also, my
>>> idea was to keep the LTR main dependencies pinned during all its lifecycle,
>>> to avoid regressions.
>>>
>>> *Cool things about QGIS on conda (and conda-forge):*
>>> - One single transparent recipe to build QGIS in all three main
>>> platforms;
>>> - As users, to install one or several packages for a certain workflow,
>>> you normally create an environment to isolate the install, which allows
>>> having several versions of the same software in parallel in your machine.
>>> Nevertheless, the packages shared by different environments/QGIS versions
>>> are only downloaded once and don't take more space in the disk. Symbolic
>>> links are used.
>>> - Once set, you can share an environment with others, making it perfect
>>> for collaborative development.
>>> - Updating QGIS is like osfeo4w in all platforms, only the necessary
>>> packages are downloads and install.
>>> - Using Conda-forge infrastructure, you only need to update the recipe,
>>> the build and upload to anaconda cloud are done in azure pipelines
>>> "automagically".
>>> - It's a great way to use QGIS PyQGIS and the command line tools (the
>>> reason why I try to update QGIS versions in conda-forge)
>>>
>>> *Caveats of  conda-forge:*
>>> - As QGIS project, we have no direct control over dependencies used on
>>> the master version, as the community has the goal of using the most recent
>>> dependency versions that is possible. The same is not necessarily true for
>>> LTR, where I feel we would be allowed to control and pin the dependencies
>>> - Currently, there are some dependencies missing. For example, QtWebkit,
>>> which limits QGIS functionality, including some nice plugins like
>>> DataPlotly, and resource sharing plugin.
>>>
>>> It seems to me that, if the QGIS project wanted to use conda as their
>>> main building/packaging system, we would need to:
>>> - Keep a fork of conda-forge recipes, and upload the result to a
>>> dedicated channel, probably even outside anaconda cloud.
>>> - We could use dependencies available on conda-forge or other channels,
>>> but we would need to be ready to maintain abandoned packages that greatly
>>> impact QGIS, like QtWebkit;
>>> - Recreate the installers (at least Windows and Mac) to use conda tools
>>> for downloading, installing, and updating packages.
>>>
>>> Last bit, when I was working for Boundless, Larry Shaffer was trying to
>>> do all this mentioned above, but then the company was bought by Planet...
>>> Not sure what is the status of this work now.
>>>
>>> https://github.com/osgeo-forge
>>>
>>> Thanks, Sorry for the long post.
>>>
>>> Alexandre Neto
>>>
>>>
>>>
>>>
>> _______________________________________________
>> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/e4ed5cba/attachment-0001.html>

From ari.meyer at gmail.com  Sun Aug  2 22:51:43 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Mon, 3 Aug 2020 00:51:43 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CAB28AsjGuQO0SQkGUv3Uk7uq2GJ5On0XHuNThxHkuAr9Qp9B9g@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>
 <CAFC3uCgwQGY=fDfV_N6KfGgp3iNdKrrDOBSr2FO1oKkHEcQyzw@mail.gmail.com>
 <CAB28AsjGuQO0SQkGUv3Uk7uq2GJ5On0XHuNThxHkuAr9Qp9B9g@mail.gmail.com>
Message-ID: <CAFC3uCini39nTCv8Qt=im+icHTK5OaKkz9i-DvxzaO4n7PeMug@mail.gmail.com>

Thanks, Nyall.  When you said:

And that's the big concern with approaches like conda. Past experience
with using homebrew for the mac builds suffered this very issue
constantly. It's only since the QGIS mac os build was seperated away
from the homebrew dependancy nightmare that we're seeing stability in
the macos builds... *

I thought you were implying that MacOS was a special case that we can't use
conda for (I'm not a Mac user, and don't have experience with homebrew).
In general, I think if we avoid following a "use the latest" policy, conda
is a stable tool for multi-platform builds.  The platform-specific problems
I ran into involved trying to use the latest and greatest.  Did you
experience problems trying conda, or just homebrew?

I guess from Matthias' comments, though, your multi-platform build
requirements are beyond the scope of what conda can deliver?
Ari

On Sun, Aug 2, 2020 at 5:28 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Sun, 2 Aug 2020 at 16:25, Ari Meyer <ari.meyer at gmail.com> wrote:
> >
> > Nyall, is the issue here multi-platform builds?  I have experienced
> problems with conda where the Windows port of a native library was faulty
> (I distinctly remember netcdf4/xarray last year). It seemed like Windows
> was the ugly stepchild -- always neglected.  I think it will always be a
> problem for conda, as opposed to pip, due to the native libraries.  So I
> think it's fair to document problems with dependency versions on particular
> platforms and provide workable substitutions, but to trust the latest
> release seems really dangerous to me.
>
> Ari -- I think you misunderstood my argument. We're arguing for the
> same things, as I also agree that having external agencies who are
> completely unaware of the needs of QGIS dictate our dependencies is
> dangerous!
>
> I'm ok with this on the Linux side, because Linux distros have used
> this approach forever and have very robust structures in place for
> handling these. But in my experience conda and homebrew are really
> just "wild west" style proving grounds where anything goes and things
> are constantly breaking.
>
> Nyall
>
>
>
>  All of the discrepancies I noted in the above issue had differing
> minor or even major versions, implying API breakages:
> >
> > Dependency diffs versus the downloadable Windows desktop versions 3.14.0
> and 3.14.1:
> > a) gdal:
> > Windows desktop: 3.0.4
> > conda-forge: 3.1.1
> > b) qt:
> > Windows desktop: 5.11.2
> > conda-forge: 5.12.5
> > c) sqlite:
> > Windows desktop: 3.29.0
> > conda-forge: 3.32.3
> > d) postgresql:
> > Windows desktop: 11.5
> > conda-forge: 12.3
> > e) qwt:
> > Windows desktop: 6.3.2
> > conda-forge: 7.0.0
> > f) pyqt:
> > Windows desktop: 5.11.3
> > conda-forge: 5.12.3
> >
> > Given that, it would be interesting to know if one distribution was
> significantly more buggy than another.
> >
> > On Sun, Aug 2, 2020 at 12:51 AM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> >>
> >> On Sun, 2 Aug 2020 at 11:02, Ari Meyer <ari.meyer at gmail.com> wrote:
> >> >
> >> > Matthias, WADR, your statement seems, at least on the surface, to
> indicate an incredibly fragile process.  How can you possibly maintain
> stability and reproducibility if the dependencies can be changed at will?
> >>
> >> And that's the big concern with approaches like conda. Past experience
> >> with using homebrew for the mac builds suffered this very issue
> >> constantly. It's only since the QGIS mac os build was seperated away
> >> from the homebrew dependancy nightmare that we're seeing stability in
> >> the macos builds... *
> >>
> >> Nyall
> >>
> >> * William's system packages use a different approach, so aren't
> >> subject to this comment!
> >>
> >> >
> >> > On Fri, Jul 31, 2020 at 2:27 AM Matthias Kuhn <matthias at opengis.ch>
> wrote:
> >> >>
> >> >> One thing to keep in mind is that even the main qgis
> installers/distributions do not have fixed dependency versions. Using
> downloaded macOS QGIS will have different dependencies than Windows and so
> will all the linux/*nix flavors.
> >> >>
> >> >> On 7/31/20 7:14 AM, Ari Meyer wrote:
> >> >>
> >> >> @Nyall, that proposal appears to be specific to plugins -- not sure
> if that's the best place to discuss this issue.
> >> >> @Greg: I found that many of the exact dependencies were not even
> available through the main channels.  So if the QGIS devs compile/build
> against such versions, I'm not sure there's an easy way to even specify
> such a conda recipe, unless all those dependencies are also made available
> somehow.  I didn't expect that those versions would not even be there with
> the others for the various libraries.  Could this imply that the library
> developers don't want those versions to be used?  Not sure.
> >> >>
> >> >> As a user and developer, I just want to be sure that if I pull down
> conda-forge qgis version X that I will get the same effective distribution
> as contained in downloadable installer version X.  Right now, we are
> getting a very different set of dependencies.
> >> >>
> >> >> Thanks,
> >> >> Ari
> >> >>
> >> >> On Thu, Jul 30, 2020 at 6:44 PM Greg Troxel <gdt at lexort.com> wrote:
> >> >>>
> >> >>> Nyall Dawson <nyall.dawson at gmail.com> writes:
> >> >>>
> >> >>> > There's a related proposal at
> >> >>> > https://github.com/qgis/QGIS-Enhancement-Proposals/issues/179 --
> >> >>> > probably best to keep the discussion on that page.
> >> >>>
> >> >>> Not really about the details of using conda but about the concept:
> >> >>>
> >> >>>   conda's documentation says it runs on "Windows, macOS and Linux"
> but
> >> >>>   qgis also runs on at least NetBSD and almost certainly other BSDs.
> >> >>>
> >> >>>   it seems that to build something, including qgis the requirement
> is
> >> >>>   that the things it depends on are present in some way that is
> found by
> >> >>>   the build.  People can choose to do that however they want, and it
> >> >>>   seems funny to me to impose a requirement.   If this is really
> "let's
> >> >>>   publish a conda config file so that people who want to do that
> can do
> >> >>>   less work", that's of course fine, but if it's more "if you don't
> have
> >> >>>   conda then you can't build qgis", that's something else.
> >> >>
> >> >>
> >> >> _______________________________________________
> >> >> QGIS-Developer mailing list
> >> >> QGIS-Developer at lists.osgeo.org
> >> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> >
> >> > _______________________________________________
> >> > QGIS-Developer mailing list
> >> > QGIS-Developer at lists.osgeo.org
> >> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/4a0d35f3/attachment.html>

From senhor.neto at gmail.com  Mon Aug  3 00:55:44 2020
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Mon, 3 Aug 2020 08:55:44 +0100
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CAFC3uCini39nTCv8Qt=im+icHTK5OaKkz9i-DvxzaO4n7PeMug@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>
 <CAFC3uCgwQGY=fDfV_N6KfGgp3iNdKrrDOBSr2FO1oKkHEcQyzw@mail.gmail.com>
 <CAB28AsjGuQO0SQkGUv3Uk7uq2GJ5On0XHuNThxHkuAr9Qp9B9g@mail.gmail.com>
 <CAFC3uCini39nTCv8Qt=im+icHTK5OaKkz9i-DvxzaO4n7PeMug@mail.gmail.com>
Message-ID: <CA+H0G_FzkTLRTx40ZqmY8jp155Q8tL0ydqm4EUxnAsbYGnQekw@mail.gmail.com>

Hello Ari,

A segunda, 3/08/2020, 06:51, Ari Meyer <ari.meyer at gmail.com> escreveu:

>
> I guess from Matthias' comments, though, your multi-platform build
> requirements are beyond the scope of what conda can deliver?
> Ari
>
>>
I think that what Mathias said is that what we have now, without depending
on others, just works. Moving to anything else, conda or not, would involve
a huge amount of work. Besides, there will always be cross platform
dependencies divergences anyway, whatever the system is used.

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/b63cae47/attachment.html>

From ari.meyer at gmail.com  Mon Aug  3 02:17:33 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Mon, 3 Aug 2020 04:17:33 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CA+H0G_FzkTLRTx40ZqmY8jp155Q8tL0ydqm4EUxnAsbYGnQekw@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>
 <CAFC3uCgwQGY=fDfV_N6KfGgp3iNdKrrDOBSr2FO1oKkHEcQyzw@mail.gmail.com>
 <CAB28AsjGuQO0SQkGUv3Uk7uq2GJ5On0XHuNThxHkuAr9Qp9B9g@mail.gmail.com>
 <CAFC3uCini39nTCv8Qt=im+icHTK5OaKkz9i-DvxzaO4n7PeMug@mail.gmail.com>
 <CA+H0G_FzkTLRTx40ZqmY8jp155Q8tL0ydqm4EUxnAsbYGnQekw@mail.gmail.com>
Message-ID: <CAFC3uCiA+-ARkgZUf7F1xDE5ZoaqKSBk_o2_hd_FJueDwP-DyA@mail.gmail.com>

Gotcha, Alexandre.  As long as the process is working, all good.

On Mon, Aug 3, 2020 at 2:55 AM Alexandre Neto <senhor.neto at gmail.com> wrote:

> Hello Ari,
>
> A segunda, 3/08/2020, 06:51, Ari Meyer <ari.meyer at gmail.com> escreveu:
>
>>
>> I guess from Matthias' comments, though, your multi-platform build
>> requirements are beyond the scope of what conda can deliver?
>> Ari
>>
>>>
> I think that what Mathias said is that what we have now, without depending
> on others, just works. Moving to anything else, conda or not, would involve
> a huge amount of work. Besides, there will always be cross platform
> dependencies divergences anyway, whatever the system is used.
>
> Alexandre Neto
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/34a7a005/attachment-0001.html>

From matthias at opengis.ch  Mon Aug  3 04:45:55 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 3 Aug 2020 13:45:55 +0200
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <CA+H0G_FzkTLRTx40ZqmY8jp155Q8tL0ydqm4EUxnAsbYGnQekw@mail.gmail.com>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>
 <CAFC3uCgwQGY=fDfV_N6KfGgp3iNdKrrDOBSr2FO1oKkHEcQyzw@mail.gmail.com>
 <CAB28AsjGuQO0SQkGUv3Uk7uq2GJ5On0XHuNThxHkuAr9Qp9B9g@mail.gmail.com>
 <CAFC3uCini39nTCv8Qt=im+icHTK5OaKkz9i-DvxzaO4n7PeMug@mail.gmail.com>
 <CA+H0G_FzkTLRTx40ZqmY8jp155Q8tL0ydqm4EUxnAsbYGnQekw@mail.gmail.com>
Message-ID: <5c7eb65b-5b0f-f717-e944-4444c6cfbd60@opengis.ch>

Hi Alexandre

On 8/3/20 9:55 AM, Alexandre Neto wrote:
> Hello Ari,
>
> A segunda, 3/08/2020, 06:51, Ari Meyer <ari.meyer at gmail.com 
> <mailto:ari.meyer at gmail.com>> escreveu:
>
>
>     I guess from Matthias' comments, though, your multi-platform build
>     requirements are beyond the scope of what conda can deliver?
>     Ari
>
>
> I think that what Mathias said is that what we have now, without 
> depending on others, just works. Moving to anything else, conda or 
> not, would involve a huge amount of work. Besides, there will always 
> be cross platform dependencies divergences anyway, whatever the system 
> is used.

Thanks for clarifying. I'd like to add that even if we will always have 
diverging dependencies, there is a lot of room for improvement. And we 
shouldn't take the impossible target as an excuse for making the gap 
smaller.

It's also very nice to see all the evolution around conda I'm looking 
forward to the findings about pinning. One thing that I'd be interested 
in is knowing what it takes to setup our own version of conda forge 
(where we could possibly also install Qt from upstream packages to spare 
the troubles). Happy to discuss this further.

Matthias


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/de14971d/attachment.html>

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Mon Aug  3 07:42:56 2020
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Mon, 3 Aug 2020 14:42:56 +0000
Subject: [QGIS-Developer] writeAsVectorFormatV2 fails in loop
Message-ID: <YT1PR01MB316447CC5E84C3786DFEED68B34D0@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>

Hi all,

I have strange a bug when using QgsVectorFileWriter.writeAsVectorFormatV2() inside a lengthy loop (30 minutes between each cycle). The first run inside the loop goes well but it crashes at the second run when trying to write a GPKG with the error below:

options.driverName = "GPKG"
RuntimeError: wrapped C/C++ object of type SaveVectorOptions has been deleted

I tried with a much shorter loop and it has no problem at all writing the GPKG at each cycle. I'll try with the now deprecated QgsVectorFileWriter.writeAsVectorFormat() to see if it makes any differences. Any idea why it could happen? By the way, I'm defining   options = QgsVectorFileWriter.SaveVectorOptions()   just before   options.driverName = "GPKG"  each time.

Thanks

Jean-François Bourdon, ing.f.
Analyste en télédétection
Direction des inventaires forestiers
Ministère des Forêts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Québec (Québec) G1H 6R1
Téléphone : 418 627-8669, poste 4304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/3f50b518/attachment.html>

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Mon Aug  3 09:57:36 2020
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Mon, 3 Aug 2020 16:57:36 +0000
Subject: [QGIS-Developer] writeAsVectorFormatV2 fails in loop
In-Reply-To: <YT1PR01MB316447CC5E84C3786DFEED68B34D0@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
References: <YT1PR01MB316447CC5E84C3786DFEED68B34D0@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <YT1PR01MB316421EEBE060F368BFEE2DAB34D0@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>

Update. Using the deprecated QgsVectorFileWriter.writeAsVectorFormat() instead of QgsVectorFileWriter.writeAsVectorFormatV2() solves the issue. So I suppose there is a bug somewhere in the new implementation.

Jean-François Bourdon, ing.f.
Analyste en télédétection
Direction des inventaires forestiers
Ministère des Forêts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Québec (Québec) G1H 6R1
Téléphone : 418 627-8669, poste 4304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

De : QGIS-Developer [mailto:qgis-developer-bounces at lists.osgeo.org] De la part de Bourdon, Jean-François (DIF)
Envoyé : 3 août 2020 10:43
À : qgis-developer at lists.osgeo.org
Objet : [QGIS-Developer] writeAsVectorFormatV2 fails in loop

Hi all,

I have strange a bug when using QgsVectorFileWriter.writeAsVectorFormatV2() inside a lengthy loop (30 minutes between each cycle). The first run inside the loop goes well but it crashes at the second run when trying to write a GPKG with the error below:

options.driverName = "GPKG"
RuntimeError: wrapped C/C++ object of type SaveVectorOptions has been deleted

I tried with a much shorter loop and it has no problem at all writing the GPKG at each cycle. I'll try with the now deprecated QgsVectorFileWriter.writeAsVectorFormat() to see if it makes any differences. Any idea why it could happen? By the way, I'm defining   options = QgsVectorFileWriter.SaveVectorOptions()   just before   options.driverName = "GPKG"  each time.

Thanks

Jean-François Bourdon, ing.f.
Analyste en télédétection
Direction des inventaires forestiers
Ministère des Forêts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Québec (Québec) G1H 6R1
Téléphone : 418 627-8669, poste 4304
jean-francois.bourdon at mffp.gouv.qc.ca<mailto:jean-francois.bourdon at mffp.gouv.qc.ca>
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/eb76f0a7/attachment-0001.html>

From jmckenna at gatewaygeomatics.com  Mon Aug  3 14:36:11 2020
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 3 Aug 2020 18:36:11 -0300
Subject: [QGIS-Developer] Fwd: NEXTGEN new release: SpatiaLite 5.0.0 RC1
In-Reply-To: <7440b6ba-0731-46fa-875d-34d85f556b12o@googlegroups.com>
References: <7440b6ba-0731-46fa-875d-34d85f556b12o@googlegroups.com>
Message-ID: <cf656445-5dce-dc32-4855-d59da40af285@gatewaygeomatics.com>

Forwarding this great news to the QGIS dev team...


-------- Forwarded Message --------




Hi list,

I'm glad to announce that after a very long pause of about two years
a new Relase Candidate is finally available.

The wait was not in vain;this is certainly the most advanced and 
sophisticated
SpatiaLite version ever been released and supports many cool new features:
1. full rasterlite2 integration
2. ISO Topology support
3. supporting new PROJ 6/7
4. supporting Stored Procedures
... and many others

please check the documentation about 5.0 from here:
https://www.gaia-gis.it/fossil/libspatialite/wiki?name=5.0.0-doc

full documentation about all SQL functions supported by 5.0 is here:
http://www.gaia-gis.it/gaia-sins/spatialite-sql-5.0.0.html

source tarballs can be downloaded from here:
http://www.gaia-gis.it/gaia-sins/libspatialite-sources/libspatialite-5.0.0-RC1.tar.gz
http://www.gaia-gis.it/gaia-sins/libspatialite-sources/libspatialite-5.0.0-RC1.zip

http://www.gaia-gis.it/gaia-sins/spatialite-tools-5.0.0-RC1.tar.gz
http://www.gaia-gis.it/gaia-sins/spatialite-tools-5.0.0-RC1.zip

pre-built binaries for Windows are here:
http://www.gaia-gis.it/gaia-sins/windows-bin-NEXTGEN-x86
http://www.gaia-gis.it/gaia-sins/windows-bin-NEXTGEN-amd64

I'll give in a following post further detailed infos about the
current state of all other members of the family (freexl,
readosm, rasterlite2, virtualPG and the GUI tool).

Happy testing,
Sandro





From tomjan at gmx.com  Mon Aug  3 14:44:34 2020
From: tomjan at gmx.com (tomjan at gmx.com)
Date: Mon, 3 Aug 2020 23:44:34 +0200
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment for
 QGIS C++ development?
Message-ID: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/723bd1ee/attachment.html>

From imajimatika at gmail.com  Mon Aug  3 15:22:49 2020
From: imajimatika at gmail.com (Ismail Sunni)
Date: Tue, 4 Aug 2020 00:22:49 +0200
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
Message-ID: <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>

Hi Tomjan,

Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102 for
your question.

Best regards

On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com> wrote:

> I would be interested in learning to contribute to QGIS.
> My previous C++ experience is that about 20 years ago I did some (for a
> couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
> Now I think I could refresh my C++ skills and also learn QT which I have
> never programmed with so far.
>
> However, I am not a Linux user, but always have been using Windows
> (currently Windows 10).
> It seems to be a complicated obstacle to get started running QGIS through
> Visual Studio 2019.
>
> I think it would be great with a tutorial (webpage or youtube video
> tutorial) about how to get started with an example showing how to do all
> necessary installations/configurations/setup until you can compile and run
> QGIS with a breakpoint in Visual Studio 2019.
>
> I have seen that the "INSTALL" file in the repository refers to Visual
> Studio 2015, but it seems awkward if it really would be necessary to use
> such an ancient version?
> Is nobody of the QGIS developers using Visual Studio 2019?
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200804/04ffa10c/attachment.html>

From ari.meyer at gmail.com  Mon Aug  3 16:02:56 2020
From: ari.meyer at gmail.com (Ari Meyer)
Date: Mon, 3 Aug 2020 18:02:56 -0500
Subject: [QGIS-Developer] using conda for development
In-Reply-To: <5c7eb65b-5b0f-f717-e944-4444c6cfbd60@opengis.ch>
References: <CAFC3uCgXwCSTMQGZknk07G4QV6nsPv3K+eugPBFYYVHTk5n1qw@mail.gmail.com>
 <CAB28AshDdrhDzMCz4TKXgeVr81pwL4NY+42_=teRju64GDEn4Q@mail.gmail.com>
 <rmipn8csh3b.fsf@s1.lexort.com>
 <CAFC3uCh5OzLoyaiciQLeZm-+FyUUo51YGK0HOouYE9S=nqH3fg@mail.gmail.com>
 <c1b1b107-fbd2-cd3a-7633-b3d23134ee20@opengis.ch>
 <CAFC3uCjtcp=QEeswwsnLUSC9yUZjgdwTno7a8d1pa4pTxSoqfA@mail.gmail.com>
 <CAB28AsihBktsS6yf22Zy4-q5PMzFWY5dPuoQGfP9dwcvdBC=Bg@mail.gmail.com>
 <CAFC3uCgwQGY=fDfV_N6KfGgp3iNdKrrDOBSr2FO1oKkHEcQyzw@mail.gmail.com>
 <CAB28AsjGuQO0SQkGUv3Uk7uq2GJ5On0XHuNThxHkuAr9Qp9B9g@mail.gmail.com>
 <CAFC3uCini39nTCv8Qt=im+icHTK5OaKkz9i-DvxzaO4n7PeMug@mail.gmail.com>
 <CA+H0G_FzkTLRTx40ZqmY8jp155Q8tL0ydqm4EUxnAsbYGnQekw@mail.gmail.com>
 <5c7eb65b-5b0f-f717-e944-4444c6cfbd60@opengis.ch>
Message-ID: <CAFC3uCi=gQ0X3rc=hfxoc7OdakcQw-P-0BAkxdsM-Dq8uWLdgQ@mail.gmail.com>

Good to hear.  Thanks, Matthias!

On Mon, Aug 3, 2020 at 6:45 AM Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Alexandre
> On 8/3/20 9:55 AM, Alexandre Neto wrote:
>
> Hello Ari,
>
> A segunda, 3/08/2020, 06:51, Ari Meyer <ari.meyer at gmail.com> escreveu:
>
>>
>> I guess from Matthias' comments, though, your multi-platform build
>> requirements are beyond the scope of what conda can deliver?
>> Ari
>>
>
> I think that what Mathias said is that what we have now, without depending
> on others, just works. Moving to anything else, conda or not, would involve
> a huge amount of work. Besides, there will always be cross platform
> dependencies divergences anyway, whatever the system is used.
>
> Thanks for clarifying. I'd like to add that even if we will always have
> diverging dependencies, there is a lot of room for improvement. And we
> shouldn't take the impossible target as an excuse for making the gap
> smaller.
>
> It's also very nice to see all the evolution around conda I'm looking
> forward to the findings about pinning. One thing that I'd be interested in
> is knowing what it takes to setup our own version of conda forge (where we
> could possibly also install Qt from upstream packages to spare the
> troubles). Happy to discuss this further.
>
> Matthias
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200803/6649b99d/attachment.html>

From rdmailings at duif.net  Tue Aug  4 07:37:39 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 4 Aug 2020 16:37:39 +0200
Subject: [QGIS-Developer] QGIS not following 302/redirects
Message-ID: <769bb7a2-d7c7-a5e1-c19c-f0d97fa9bb3d@duif.net>

Hi Devs,

See https://github.com/qgis/QGIS/issues/37956

According to that user QGIS is not following http 302 redirects.
Some googling reveals that Qt-networking is not doing that automatically.

I'm wondering IF it would be easy to add,
OR should not be added as redirection can be tricky/mis-used...?

I know Ale's python networkaccessmanager class did have some lines to add it:
https://github.com/planetfederal/lib-qgis-commons/blob/master/qgiscommons2/network/networkaccessmanager.py#L326

Regards,

Richard Duivenvoorde




From rdmailings at duif.net  Tue Aug  4 07:58:44 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 4 Aug 2020 16:58:44 +0200
Subject: [QGIS-Developer] QGIS not following 302/redirects
In-Reply-To: <769bb7a2-d7c7-a5e1-c19c-f0d97fa9bb3d@duif.net>
References: <769bb7a2-d7c7-a5e1-c19c-f0d97fa9bb3d@duif.net>
Message-ID: <f2d8751a-a429-e1b5-1ce4-270fe5ac13ca@duif.net>

On 8/4/20 4:37 PM, Richard Duivenvoorde wrote:
> Hi Devs,
> 
> See https://github.com/qgis/QGIS/issues/37956
> 
> According to that user QGIS is not following http 302 redirects.
> Some googling reveals that Qt-networking is not doing that automatically.
> 
> I'm wondering IF it would be easy to add,
> OR should not be added as redirection can be tricky/mis-used...?

Found this Qt example in which explicitly is warned for the https -> http insecure redirect...

https://git.sailfishos.org/mer-core/qtbase/commit/d815de8c26ccee33713e37a0fec2982755dcfe1f

(but I do not feel confident enough to introduce this myself ...)

Regards,

Richard Duivenvoorde




From tomjan at gmx.com  Tue Aug  4 14:43:00 2020
From: tomjan at gmx.com (tomjan at gmx.com)
Date: Tue, 4 Aug 2020 23:43:00 +0200
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
Message-ID: <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>

Hi Ismail and thank you for your link to the pull request.
Currently that PR has not been accepted, because of some checks not being successful.

I do not really know exactly what that pull request is trying to do (but as many as 42 files seem to be involved in the PR) but as far as I can see it does not include a ".sln" file (Visual Studio solution file) nor any ".vcxproj" files (Visual C++ project files) nor a file "packages.config" (for NuGet managed libraries).

I think I read somewhere here in the QGIS developer list archive that someone estimated that 90% percent of the QGIS developers are using Linux.
If that is true then I believe the reason might be that Windows developers (which are used to NuGet and Visual Studio solutions files and project files) may choose to give up when they feel it seems difficult to even get started with the development environment for QGIS with Windows.

Can anyone answer this question:
Would it, for some reason, be impossible to provide a Visual Studio solution file (and .vcxproj files) that can simply be opened, and then the required dependencies would be retrieved automatically with NuGet (according to NuGet references in the ".vcxproj" files or "packages.config") ?
One obvious reason could be that there may be some required libraries which are not available through NuGet but those kind of files therefore really will need a manual installation.
But I mean is it possible to provide easy instructions with only very FEW manual installations for Windows, and then the majority of the dependencies would be retrieved through NuGet when you open a Visual Studio solution file which hopefully would be available from the github repository?

The only kind of libraries I myself have used with NuGet is .NET libraries but as far as I understand, NuGet can also be used for native C++ libraries:
https://devblogs.microsoft.com/nuget/native-support/

I believe that the QGIS project would get more contributors if you can provide a development environment that are EASY to GET STARTED WITH for potential newcomers using Windows Visual Studio.
 
  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  
 

Sent: Tuesday, August 04, 2020 at 12:22 AM
From: "Ismail Sunni" <imajimatika at gmail.com>
To: tomjan at gmx.com
Cc: "QGIS Developer List" <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?

Hi Tomjan,
 
Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102 for your question.
 Best regards
 

On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com[mailto:tomjan at gmx.com]> wrote:

I would be interested in learning to contribute to QGIS.
My previous C++ experience is that about 20 years ago I did some (for a couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
Now I think I could refresh my C++ skills and also learn QT which I have never programmed with so far.
 
However, I am not a Linux user, but always have been using Windows (currently Windows 10).
It seems to be a complicated obstacle to get started running QGIS through Visual Studio 2019.
 
I think it would be great with a tutorial (webpage or youtube video tutorial) about how to get started with an example showing how to do all necessary installations/configurations/setup until you can compile and run QGIS with a breakpoint in Visual Studio 2019.
 
I have seen that the "INSTALL" file in the repository refers to Visual Studio 2015, but it seems awkward if it really would be necessary to use such an ancient version?
Is nobody of the QGIS developers using Visual Studio 2019?
 _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org[mailto:QGIS-Developer at lists.osgeo.org]
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]

From james at shaeffer.co  Tue Aug  4 15:02:19 2020
From: james at shaeffer.co (james at shaeffer.co)
Date: Tue, 4 Aug 2020 15:02:19 -0700
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
	for QGIS C++ development?
In-Reply-To: <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
 <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
Message-ID: <02df01d66aaa$eda0c7d0$c8e25770$@shaeffer.co>

Tomjan,

Here is a tutorial I put together on my blog to compile QGIS from source on Windows, https://www.shaeffer.co/compiling-qgis-on-windows/. It is current and will generate a .sln file to open in Visual Studio 2015.

The work that Jürgen is putting in (https://github.com/qgis/QGIS/pull/38102/) will move us "Windows folks" to VS 2019. There is a lot more to the project than just a simple .sln file (this coming from my personal endeavors into compiling QGIS on Windows).

--
James

-----Original Message-----
From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of tomjan at gmx.com
Sent: Tuesday, August 4, 2020 2:43 PM
To: qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?

Hi Ismail and thank you for your link to the pull request.
Currently that PR has not been accepted, because of some checks not being successful.

I do not really know exactly what that pull request is trying to do (but as many as 42 files seem to be involved in the PR) but as far as I can see it does not include a ".sln" file (Visual Studio solution file) nor any ".vcxproj" files (Visual C++ project files) nor a file "packages.config" (for NuGet managed libraries).

I think I read somewhere here in the QGIS developer list archive that someone estimated that 90% percent of the QGIS developers are using Linux.
If that is true then I believe the reason might be that Windows developers (which are used to NuGet and Visual Studio solutions files and project files) may choose to give up when they feel it seems difficult to even get started with the development environment for QGIS with Windows.

Can anyone answer this question:
Would it, for some reason, be impossible to provide a Visual Studio solution file (and .vcxproj files) that can simply be opened, and then the required dependencies would be retrieved automatically with NuGet (according to NuGet references in the ".vcxproj" files or "packages.config") ?
One obvious reason could be that there may be some required libraries which are not available through NuGet but those kind of files therefore really will need a manual installation.
But I mean is it possible to provide easy instructions with only very FEW manual installations for Windows, and then the majority of the dependencies would be retrieved through NuGet when you open a Visual Studio solution file which hopefully would be available from the github repository?

The only kind of libraries I myself have used with NuGet is .NET libraries but as far as I understand, NuGet can also be used for native C++ libraries:
https://devblogs.microsoft.com/nuget/native-support/

I believe that the QGIS project would get more contributors if you can provide a development environment that are EASY to GET STARTED WITH for potential newcomers using Windows Visual Studio.
 
  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  
 

Sent: Tuesday, August 04, 2020 at 12:22 AM
From: "Ismail Sunni" <imajimatika at gmail.com>
To: tomjan at gmx.com
Cc: "QGIS Developer List" <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?

Hi Tomjan,
 
Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102 for your question.
 Best regards
 

On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com[mailto:tomjan at gmx.com]> wrote:

I would be interested in learning to contribute to QGIS.
My previous C++ experience is that about 20 years ago I did some (for a couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
Now I think I could refresh my C++ skills and also learn QT which I have never programmed with so far.
 
However, I am not a Linux user, but always have been using Windows (currently Windows 10).
It seems to be a complicated obstacle to get started running QGIS through Visual Studio 2019.
 
I think it would be great with a tutorial (webpage or youtube video tutorial) about how to get started with an example showing how to do all necessary installations/configurations/setup until you can compile and run QGIS with a breakpoint in Visual Studio 2019.
 
I have seen that the "INSTALL" file in the repository refers to Visual Studio 2015, but it seems awkward if it really would be necessary to use such an ancient version?
Is nobody of the QGIS developers using Visual Studio 2019?
 _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org[mailto:QGIS-Developer at lists.osgeo.org]
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From tomjan at gmx.com  Tue Aug  4 15:45:57 2020
From: tomjan at gmx.com (tomjan at gmx.com)
Date: Wed, 5 Aug 2020 00:45:57 +0200
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <02df01d66aaa$eda0c7d0$c8e25770$@shaeffer.co>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
 <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
 <02df01d66aaa$eda0c7d0$c8e25770$@shaeffer.co>
Message-ID: <trinity-df3edd81-9bf4-4b63-ad8c-cd06b483fe29-1596581157828@3c-app-mailcom-bs13>

Thank you James, but since your tutorial (last updated 12/03/2019) does not mention anything about VS 2017 or VS 2019, then I guess it is useful only for those who are having VS 2015 installed.
(which I uninstalled about three years ago when installing VS 2017... but when I later installed VS 2019 I actually kept VS 2017)
Maybe later when the pull request has been finished, you will maybe update your tutorial for VS 2019.

 -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  

> Sent: Wednesday, August 05, 2020 at 12:02 AM
> From: james at shaeffer.co
> To: tomjan at gmx.com, qgis-developer at lists.osgeo.org
> Subject: RE: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?
>
> Tomjan,
> 
> Here is a tutorial I put together on my blog to compile QGIS from source on Windows, https://www.shaeffer.co/compiling-qgis-on-windows/. It is current and will generate a .sln file to open in Visual Studio 2015.
> 
> The work that Jürgen is putting in (https://github.com/qgis/QGIS/pull/38102/) will move us "Windows folks" to VS 2019. There is a lot more to the project than just a simple .sln file (this coming from my personal endeavors into compiling QGIS on Windows).
> 
> --
> James
> 
> -----Original Message-----
> From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of tomjan at gmx.com
> Sent: Tuesday, August 4, 2020 2:43 PM
> To: qgis-developer at lists.osgeo.org
> Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?
> 
> Hi Ismail and thank you for your link to the pull request.
> Currently that PR has not been accepted, because of some checks not being successful.
> 
> I do not really know exactly what that pull request is trying to do (but as many as 42 files seem to be involved in the PR) but as far as I can see it does not include a ".sln" file (Visual Studio solution file) nor any ".vcxproj" files (Visual C++ project files) nor a file "packages.config" (for NuGet managed libraries).
> 
> I think I read somewhere here in the QGIS developer list archive that someone estimated that 90% percent of the QGIS developers are using Linux.
> If that is true then I believe the reason might be that Windows developers (which are used to NuGet and Visual Studio solutions files and project files) may choose to give up when they feel it seems difficult to even get started with the development environment for QGIS with Windows.
> 
> Can anyone answer this question:
> Would it, for some reason, be impossible to provide a Visual Studio solution file (and .vcxproj files) that can simply be opened, and then the required dependencies would be retrieved automatically with NuGet (according to NuGet references in the ".vcxproj" files or "packages.config") ?
> One obvious reason could be that there may be some required libraries which are not available through NuGet but those kind of files therefore really will need a manual installation.
> But I mean is it possible to provide easy instructions with only very FEW manual installations for Windows, and then the majority of the dependencies would be retrieved through NuGet when you open a Visual Studio solution file which hopefully would be available from the github repository?
> 
> The only kind of libraries I myself have used with NuGet is .NET libraries but as far as I understand, NuGet can also be used for native C++ libraries:
> https://devblogs.microsoft.com/nuget/native-support/
> 
> I believe that the QGIS project would get more contributors if you can provide a development environment that are EASY to GET STARTED WITH for potential newcomers using Windows Visual Studio.
>  
>   -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  
>  
> 
> Sent: Tuesday, August 04, 2020 at 12:22 AM
> From: "Ismail Sunni" <imajimatika at gmail.com>
> To: tomjan at gmx.com
> Cc: "QGIS Developer List" <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?
> 
> Hi Tomjan,
>  
> Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102 for your question.
>  Best regards
>  
> 
> On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com[mailto:tomjan at gmx.com]> wrote:
> 
> I would be interested in learning to contribute to QGIS.
> My previous C++ experience is that about 20 years ago I did some (for a couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
> Now I think I could refresh my C++ skills and also learn QT which I have never programmed with so far.
>  
> However, I am not a Linux user, but always have been using Windows (currently Windows 10).
> It seems to be a complicated obstacle to get started running QGIS through Visual Studio 2019.
>  
> I think it would be great with a tutorial (webpage or youtube video tutorial) about how to get started with an example showing how to do all necessary installations/configurations/setup until you can compile and run QGIS with a breakpoint in Visual Studio 2019.
>  
> I have seen that the "INSTALL" file in the repository refers to Visual Studio 2015, but it seems awkward if it really would be necessary to use such an ancient version?
> Is nobody of the QGIS developers using Visual Studio 2019?
>  _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org[mailto:QGIS-Developer at lists.osgeo.org]
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
>

From nyall.dawson at gmail.com  Tue Aug  4 15:49:33 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 5 Aug 2020 08:49:33 +1000
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <trinity-df3edd81-9bf4-4b63-ad8c-cd06b483fe29-1596581157828@3c-app-mailcom-bs13>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
 <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
 <02df01d66aaa$eda0c7d0$c8e25770$@shaeffer.co>
 <trinity-df3edd81-9bf4-4b63-ad8c-cd06b483fe29-1596581157828@3c-app-mailcom-bs13>
Message-ID: <CAB28AsgWOKT+DtqAvAt-ybr_kWjo69=J2PKga3hptPenP=7f-Q@mail.gmail.com>

On Wed, 5 Aug 2020 at 08:46, <tomjan at gmx.com> wrote:
>
> Thank you James, but since your tutorial (last updated 12/03/2019) does not mention anything about VS 2017 or VS 2019, then I guess it is useful only for those who are having VS 2015 installed.
> (which I uninstalled about three years ago when installing VS 2017... but when I later installed VS 2019 I actually kept VS 2017)
> Maybe later when the pull request has been finished, you will maybe update your tutorial for VS 2019.

If you're set on only building with VS 2019, I'm sure Jurgen would
love it if you checked out his draft PR and gave it a test run and
gave feedback on how it worked!

Nyall

>
>  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
>
> > Sent: Wednesday, August 05, 2020 at 12:02 AM
> > From: james at shaeffer.co
> > To: tomjan at gmx.com, qgis-developer at lists.osgeo.org
> > Subject: RE: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?
> >
> > Tomjan,
> >
> > Here is a tutorial I put together on my blog to compile QGIS from source on Windows, https://www.shaeffer.co/compiling-qgis-on-windows/. It is current and will generate a .sln file to open in Visual Studio 2015.
> >
> > The work that Jürgen is putting in (https://github.com/qgis/QGIS/pull/38102/) will move us "Windows folks" to VS 2019. There is a lot more to the project than just a simple .sln file (this coming from my personal endeavors into compiling QGIS on Windows).
> >
> > --
> > James
> >
> > -----Original Message-----
> > From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of tomjan at gmx.com
> > Sent: Tuesday, August 4, 2020 2:43 PM
> > To: qgis-developer at lists.osgeo.org
> > Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?
> >
> > Hi Ismail and thank you for your link to the pull request.
> > Currently that PR has not been accepted, because of some checks not being successful.
> >
> > I do not really know exactly what that pull request is trying to do (but as many as 42 files seem to be involved in the PR) but as far as I can see it does not include a ".sln" file (Visual Studio solution file) nor any ".vcxproj" files (Visual C++ project files) nor a file "packages.config" (for NuGet managed libraries).
> >
> > I think I read somewhere here in the QGIS developer list archive that someone estimated that 90% percent of the QGIS developers are using Linux.
> > If that is true then I believe the reason might be that Windows developers (which are used to NuGet and Visual Studio solutions files and project files) may choose to give up when they feel it seems difficult to even get started with the development environment for QGIS with Windows.
> >
> > Can anyone answer this question:
> > Would it, for some reason, be impossible to provide a Visual Studio solution file (and .vcxproj files) that can simply be opened, and then the required dependencies would be retrieved automatically with NuGet (according to NuGet references in the ".vcxproj" files or "packages.config") ?
> > One obvious reason could be that there may be some required libraries which are not available through NuGet but those kind of files therefore really will need a manual installation.
> > But I mean is it possible to provide easy instructions with only very FEW manual installations for Windows, and then the majority of the dependencies would be retrieved through NuGet when you open a Visual Studio solution file which hopefully would be available from the github repository?
> >
> > The only kind of libraries I myself have used with NuGet is .NET libraries but as far as I understand, NuGet can also be used for native C++ libraries:
> > https://devblogs.microsoft.com/nuget/native-support/
> >
> > I believe that the QGIS project would get more contributors if you can provide a development environment that are EASY to GET STARTED WITH for potential newcomers using Windows Visual Studio.
> >
> >   -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
> >
> >
> > Sent: Tuesday, August 04, 2020 at 12:22 AM
> > From: "Ismail Sunni" <imajimatika at gmail.com>
> > To: tomjan at gmx.com
> > Cc: "QGIS Developer List" <qgis-developer at lists.osgeo.org>
> > Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment for QGIS C++ development?
> >
> > Hi Tomjan,
> >
> > Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102 for your question.
> >  Best regards
> >
> >
> > On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com[mailto:tomjan at gmx.com]> wrote:
> >
> > I would be interested in learning to contribute to QGIS.
> > My previous C++ experience is that about 20 years ago I did some (for a couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
> > Now I think I could refresh my C++ skills and also learn QT which I have never programmed with so far.
> >
> > However, I am not a Linux user, but always have been using Windows (currently Windows 10).
> > It seems to be a complicated obstacle to get started running QGIS through Visual Studio 2019.
> >
> > I think it would be great with a tutorial (webpage or youtube video tutorial) about how to get started with an example showing how to do all necessary installations/configurations/setup until you can compile and run QGIS with a breakpoint in Visual Studio 2019.
> >
> > I have seen that the "INSTALL" file in the repository refers to Visual Studio 2015, but it seems awkward if it really would be necessary to use such an ancient version?
> > Is nobody of the QGIS developers using Visual Studio 2019?
> >  _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org[mailto:QGIS-Developer at lists.osgeo.org]
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> >
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From gb_nedjima at esi.dz  Tue Aug  4 16:49:56 2020
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Wed, 5 Aug 2020 00:49:56 +0100
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
 <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
Message-ID: <CAGiKOuj2MqDXEUxRZtzpSBtPzekcHkVDSH0YPQFn=pgBq5ULMQ@mail.gmail.com>

Hi,
Here is some explanation about making .sln files for QGIS project.
QGIS uses CMake to generate the .sln file. Ideally in a simple CMake
project you run CMake where the CMakeFiles.txt is located (usually at the
root of the source tree) and provide paths to the external libraries you
use the you generate .sln files and build the project normally but since
QGIS uses a lots of libraries some of them don't support Visual Studio well
and you end up having some really complicated error messages.
About 3 months ago I tried to use visual studio 2019 and changed somethings
in the build script. I managed to generate solution files but QGIS couldn't
compile. I ended up having to switch to linux.
I hope you find a solution soon.


On Tue, Aug 4, 2020, 10:48 PM <tomjan at gmx.com> wrote:

> Hi Ismail and thank you for your link to the pull request.
> Currently that PR has not been accepted, because of some checks not being
> successful.
>
> I do not really know exactly what that pull request is trying to do (but
> as many as 42 files seem to be involved in the PR) but as far as I can see
> it does not include a ".sln" file (Visual Studio solution file) nor any
> ".vcxproj" files (Visual C++ project files) nor a file "packages.config"
> (for NuGet managed libraries).
>
> I think I read somewhere here in the QGIS developer list archive that
> someone estimated that 90% percent of the QGIS developers are using Linux.
> If that is true then I believe the reason might be that Windows developers
> (which are used to NuGet and Visual Studio solutions files and project
> files) may choose to give up when they feel it seems difficult to even get
> started with the development environment for QGIS with Windows.
>
> Can anyone answer this question:
> Would it, for some reason, be impossible to provide a Visual Studio
> solution file (and .vcxproj files) that can simply be opened, and then the
> required dependencies would be retrieved automatically with NuGet
> (according to NuGet references in the ".vcxproj" files or
> "packages.config") ?
> One obvious reason could be that there may be some required libraries
> which are not available through NuGet but those kind of files therefore
> really will need a manual installation.
> But I mean is it possible to provide easy instructions with only very FEW
> manual installations for Windows, and then the majority of the dependencies
> would be retrieved through NuGet when you open a Visual Studio solution
> file which hopefully would be available from the github repository?
>
> The only kind of libraries I myself have used with NuGet is .NET libraries
> but as far as I understand, NuGet can also be used for native C++ libraries:
> https://devblogs.microsoft.com/nuget/native-support/
>
> I believe that the QGIS project would get more contributors if you can
> provide a development environment that are EASY to GET STARTED WITH for
> potential newcomers using Windows Visual Studio.
>
>   -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
>
>
> Sent: Tuesday, August 04, 2020 at 12:22 AM
> From: "Ismail Sunni" <imajimatika at gmail.com>
> To: tomjan at gmx.com
> Cc: "QGIS Developer List" <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment
> for QGIS C++ development?
>
> Hi Tomjan,
>
> Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102
> for your question.
>  Best regards
>
>
> On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com[mailto:tomjan at gmx.com]> wrote:
>
> I would be interested in learning to contribute to QGIS.
> My previous C++ experience is that about 20 years ago I did some (for a
> couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
> Now I think I could refresh my C++ skills and also learn QT which I have
> never programmed with so far.
>
> However, I am not a Linux user, but always have been using Windows
> (currently Windows 10).
> It seems to be a complicated obstacle to get started running QGIS through
> Visual Studio 2019.
>
> I think it would be great with a tutorial (webpage or youtube video
> tutorial) about how to get started with an example showing how to do all
> necessary installations/configurations/setup until you can compile and run
> QGIS with a breakpoint in Visual Studio 2019.
>
> I have seen that the "INSTALL" file in the repository refers to Visual
> Studio 2015, but it seems awkward if it really would be necessary to use
> such an ancient version?
> Is nobody of the QGIS developers using Visual Studio 2019?
>  _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org[mailto:QGIS-Developer at lists.osgeo.org]
> List info:
> https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
> Unsubscribe:
> https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200805/ffe041dd/attachment.html>

From charles at kartoza.com  Wed Aug  5 00:20:32 2020
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Wed, 5 Aug 2020 09:20:32 +0200
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <CAGiKOuj2MqDXEUxRZtzpSBtPzekcHkVDSH0YPQFn=pgBq5ULMQ@mail.gmail.com>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
 <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
 <CAGiKOuj2MqDXEUxRZtzpSBtPzekcHkVDSH0YPQFn=pgBq5ULMQ@mail.gmail.com>
Message-ID: <CAK2KqidsUsM_=3838688zi9_Z1TNA_twGzfmUyUg=Mj+KsmDPA@mail.gmail.com>

If you are wanting to use Linux functionality directly within Windows 10,
Microsoft has introduced Windows Subsystem for Linux. If you're having
trouble with Visual Studio but want to stick with Windows it's perhaps a
feasible solution.

https://docs.microsoft.com/en-us/windows/wsl/about

Regards

On Wed, 5 Aug 2020 at 01:50, BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:

> Hi,
> Here is some explanation about making .sln files for QGIS project.
> QGIS uses CMake to generate the .sln file. Ideally in a simple CMake
> project you run CMake where the CMakeFiles.txt is located (usually at the
> root of the source tree) and provide paths to the external libraries you
> use the you generate .sln files and build the project normally but since
> QGIS uses a lots of libraries some of them don't support Visual Studio well
> and you end up having some really complicated error messages.
> About 3 months ago I tried to use visual studio 2019 and changed
> somethings in the build script. I managed to generate solution files but
> QGIS couldn't compile. I ended up having to switch to linux.
> I hope you find a solution soon.
>
>
> On Tue, Aug 4, 2020, 10:48 PM <tomjan at gmx.com> wrote:
>
>> Hi Ismail and thank you for your link to the pull request.
>> Currently that PR has not been accepted, because of some checks not being
>> successful.
>>
>> I do not really know exactly what that pull request is trying to do (but
>> as many as 42 files seem to be involved in the PR) but as far as I can see
>> it does not include a ".sln" file (Visual Studio solution file) nor any
>> ".vcxproj" files (Visual C++ project files) nor a file "packages.config"
>> (for NuGet managed libraries).
>>
>> I think I read somewhere here in the QGIS developer list archive that
>> someone estimated that 90% percent of the QGIS developers are using Linux.
>> If that is true then I believe the reason might be that Windows
>> developers (which are used to NuGet and Visual Studio solutions files and
>> project files) may choose to give up when they feel it seems difficult to
>> even get started with the development environment for QGIS with Windows.
>>
>> Can anyone answer this question:
>> Would it, for some reason, be impossible to provide a Visual Studio
>> solution file (and .vcxproj files) that can simply be opened, and then the
>> required dependencies would be retrieved automatically with NuGet
>> (according to NuGet references in the ".vcxproj" files or
>> "packages.config") ?
>> One obvious reason could be that there may be some required libraries
>> which are not available through NuGet but those kind of files therefore
>> really will need a manual installation.
>> But I mean is it possible to provide easy instructions with only very FEW
>> manual installations for Windows, and then the majority of the dependencies
>> would be retrieved through NuGet when you open a Visual Studio solution
>> file which hopefully would be available from the github repository?
>>
>> The only kind of libraries I myself have used with NuGet is .NET
>> libraries but as far as I understand, NuGet can also be used for native C++
>> libraries:
>> https://devblogs.microsoft.com/nuget/native-support/
>>
>> I believe that the QGIS project would get more contributors if you can
>> provide a development environment that are EASY to GET STARTED WITH for
>> potential newcomers using Windows Visual Studio.
>>
>>   -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
>>
>>
>> Sent: Tuesday, August 04, 2020 at 12:22 AM
>> From: "Ismail Sunni" <imajimatika at gmail.com>
>> To: tomjan at gmx.com
>> Cc: "QGIS Developer List" <qgis-developer at lists.osgeo.org>
>> Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019 environment
>> for QGIS C++ development?
>>
>> Hi Tomjan,
>>
>> Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102
>> for your question.
>>  Best regards
>>
>>
>> On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com[mailto:tomjan at gmx.com]> wrote:
>>
>> I would be interested in learning to contribute to QGIS.
>> My previous C++ experience is that about 20 years ago I did some (for a
>> couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
>> Now I think I could refresh my C++ skills and also learn QT which I have
>> never programmed with so far.
>>
>> However, I am not a Linux user, but always have been using Windows
>> (currently Windows 10).
>> It seems to be a complicated obstacle to get started running QGIS through
>> Visual Studio 2019.
>>
>> I think it would be great with a tutorial (webpage or youtube video
>> tutorial) about how to get started with an example showing how to do all
>> necessary installations/configurations/setup until you can compile and run
>> QGIS with a breakpoint in Visual Studio 2019.
>>
>> I have seen that the "INSTALL" file in the repository refers to Visual
>> Studio 2015, but it seems awkward if it really would be necessary to use
>> such an ancient version?
>> Is nobody of the QGIS developers using Visual Studio 2019?
>>  _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org[mailto:QGIS-Developer at lists.osgeo.org]
>> List info:
>> https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
>> Unsubscribe:
>> https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200805/dd4082a7/attachment-0001.html>

From gb_nedjima at esi.dz  Wed Aug  5 00:41:59 2020
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Wed, 5 Aug 2020 08:41:59 +0100
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <CAK2KqidsUsM_=3838688zi9_Z1TNA_twGzfmUyUg=Mj+KsmDPA@mail.gmail.com>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
 <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
 <CAGiKOuj2MqDXEUxRZtzpSBtPzekcHkVDSH0YPQFn=pgBq5ULMQ@mail.gmail.com>
 <CAK2KqidsUsM_=3838688zi9_Z1TNA_twGzfmUyUg=Mj+KsmDPA@mail.gmail.com>
Message-ID: <CAGiKOuhzJ_CSN5t=Rk_VzFkOZ4DQQSsYD1h7Taqq4aHJw7VdJw@mail.gmail.com>

I actually looked into WSL and WSL2 but its intended use is command line
executables which is not the case for QGIS. I read somewhere that you can
run GUI apps from WSL by using a third party X server (you can think of it
as a remote display application) but it's kinda inefficient and I think it
will require more work than what you'll need if you just switch to linux.

If after trying you didn't get anything working on Windows and ended up
having to switch to linux. I recommend KDE environment (I'm using Kubuntu).
I was using windows for everything until 3 months ago and KDE UI made the
transition much easier for me.

Best wishes,


On Wed, Aug 5, 2020, 8:20 AM Charles Dixon-Paver <charles at kartoza.com>
wrote:

> If you are wanting to use Linux functionality directly within Windows 10,
> Microsoft has introduced Windows Subsystem for Linux. If you're having
> trouble with Visual Studio but want to stick with Windows it's perhaps a
> feasible solution.
>
> https://docs.microsoft.com/en-us/windows/wsl/about
>
> Regards
>
> On Wed, 5 Aug 2020 at 01:50, BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:
>
>> Hi,
>> Here is some explanation about making .sln files for QGIS project.
>> QGIS uses CMake to generate the .sln file. Ideally in a simple CMake
>> project you run CMake where the CMakeFiles.txt is located (usually at the
>> root of the source tree) and provide paths to the external libraries you
>> use the you generate .sln files and build the project normally but since
>> QGIS uses a lots of libraries some of them don't support Visual Studio well
>> and you end up having some really complicated error messages.
>> About 3 months ago I tried to use visual studio 2019 and changed
>> somethings in the build script. I managed to generate solution files but
>> QGIS couldn't compile. I ended up having to switch to linux.
>> I hope you find a solution soon.
>>
>>
>> On Tue, Aug 4, 2020, 10:48 PM <tomjan at gmx.com> wrote:
>>
>>> Hi Ismail and thank you for your link to the pull request.
>>> Currently that PR has not been accepted, because of some checks not
>>> being successful.
>>>
>>> I do not really know exactly what that pull request is trying to do (but
>>> as many as 42 files seem to be involved in the PR) but as far as I can see
>>> it does not include a ".sln" file (Visual Studio solution file) nor any
>>> ".vcxproj" files (Visual C++ project files) nor a file "packages.config"
>>> (for NuGet managed libraries).
>>>
>>> I think I read somewhere here in the QGIS developer list archive that
>>> someone estimated that 90% percent of the QGIS developers are using Linux.
>>> If that is true then I believe the reason might be that Windows
>>> developers (which are used to NuGet and Visual Studio solutions files and
>>> project files) may choose to give up when they feel it seems difficult to
>>> even get started with the development environment for QGIS with Windows.
>>>
>>> Can anyone answer this question:
>>> Would it, for some reason, be impossible to provide a Visual Studio
>>> solution file (and .vcxproj files) that can simply be opened, and then the
>>> required dependencies would be retrieved automatically with NuGet
>>> (according to NuGet references in the ".vcxproj" files or
>>> "packages.config") ?
>>> One obvious reason could be that there may be some required libraries
>>> which are not available through NuGet but those kind of files therefore
>>> really will need a manual installation.
>>> But I mean is it possible to provide easy instructions with only very
>>> FEW manual installations for Windows, and then the majority of the
>>> dependencies would be retrieved through NuGet when you open a Visual Studio
>>> solution file which hopefully would be available from the github repository?
>>>
>>> The only kind of libraries I myself have used with NuGet is .NET
>>> libraries but as far as I understand, NuGet can also be used for native C++
>>> libraries:
>>> https://devblogs.microsoft.com/nuget/native-support/
>>>
>>> I believe that the QGIS project would get more contributors if you can
>>> provide a development environment that are EASY to GET STARTED WITH for
>>> potential newcomers using Windows Visual Studio.
>>>
>>>   -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
>>>
>>>
>>> Sent: Tuesday, August 04, 2020 at 12:22 AM
>>> From: "Ismail Sunni" <imajimatika at gmail.com>
>>> To: tomjan at gmx.com
>>> Cc: "QGIS Developer List" <qgis-developer at lists.osgeo.org>
>>> Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019
>>> environment for QGIS C++ development?
>>>
>>> Hi Tomjan,
>>>
>>> Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102
>>> for your question.
>>>  Best regards
>>>
>>>
>>> On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com[mailto:tomjan at gmx.com]>
>>> wrote:
>>>
>>> I would be interested in learning to contribute to QGIS.
>>> My previous C++ experience is that about 20 years ago I did some (for a
>>> couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
>>> Now I think I could refresh my C++ skills and also learn QT which I have
>>> never programmed with so far.
>>>
>>> However, I am not a Linux user, but always have been using Windows
>>> (currently Windows 10).
>>> It seems to be a complicated obstacle to get started running QGIS
>>> through Visual Studio 2019.
>>>
>>> I think it would be great with a tutorial (webpage or youtube video
>>> tutorial) about how to get started with an example showing how to do all
>>> necessary installations/configurations/setup until you can compile and run
>>> QGIS with a breakpoint in Visual Studio 2019.
>>>
>>> I have seen that the "INSTALL" file in the repository refers to Visual
>>> Studio 2015, but it seems awkward if it really would be necessary to use
>>> such an ancient version?
>>> Is nobody of the QGIS developers using Visual Studio 2019?
>>>  _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org[mailto:QGIS-Developer at lists.osgeo.org]
>>> List info:
>>> https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
>>> Unsubscribe:
>>> https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200805/bae60dbe/attachment.html>

From imajimatika at gmail.com  Wed Aug  5 01:08:37 2020
From: imajimatika at gmail.com (Ismail Sunni)
Date: Wed, 5 Aug 2020 10:08:37 +0200
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <CAGiKOuhzJ_CSN5t=Rk_VzFkOZ4DQQSsYD1h7Taqq4aHJw7VdJw@mail.gmail.com>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
 <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
 <CAGiKOuj2MqDXEUxRZtzpSBtPzekcHkVDSH0YPQFn=pgBq5ULMQ@mail.gmail.com>
 <CAK2KqidsUsM_=3838688zi9_Z1TNA_twGzfmUyUg=Mj+KsmDPA@mail.gmail.com>
 <CAGiKOuhzJ_CSN5t=Rk_VzFkOZ4DQQSsYD1h7Taqq4aHJw7VdJw@mail.gmail.com>
Message-ID: <CAEh5jtFXWCCtKLBRJ7DJ93SNh_uDSg9gd6B-4EwwChA6AG8W=A@mail.gmail.com>

Yes, it's possible to run QGIS using WSL2. I have it running in my Windows.

My colleague, Rizky, writes a note about it here
https://github.com/lucernae/wsl2-qgis

Perhaps, it also possible to develop QGIS by using WSL2 on Windows

Best regards.

On Wed, Aug 5, 2020 at 9:42 AM BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:

> I actually looked into WSL and WSL2 but its intended use is command line
> executables which is not the case for QGIS. I read somewhere that you can
> run GUI apps from WSL by using a third party X server (you can think of it
> as a remote display application) but it's kinda inefficient and I think it
> will require more work than what you'll need if you just switch to linux.
>
> If after trying you didn't get anything working on Windows and ended up
> having to switch to linux. I recommend KDE environment (I'm using Kubuntu).
> I was using windows for everything until 3 months ago and KDE UI made the
> transition much easier for me.
>
> Best wishes,
>
>
> On Wed, Aug 5, 2020, 8:20 AM Charles Dixon-Paver <charles at kartoza.com>
> wrote:
>
>> If you are wanting to use Linux functionality directly within Windows 10,
>> Microsoft has introduced Windows Subsystem for Linux. If you're having
>> trouble with Visual Studio but want to stick with Windows it's perhaps a
>> feasible solution.
>>
>> https://docs.microsoft.com/en-us/windows/wsl/about
>>
>> Regards
>>
>> On Wed, 5 Aug 2020 at 01:50, BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:
>>
>>> Hi,
>>> Here is some explanation about making .sln files for QGIS project.
>>> QGIS uses CMake to generate the .sln file. Ideally in a simple CMake
>>> project you run CMake where the CMakeFiles.txt is located (usually at the
>>> root of the source tree) and provide paths to the external libraries you
>>> use the you generate .sln files and build the project normally but since
>>> QGIS uses a lots of libraries some of them don't support Visual Studio well
>>> and you end up having some really complicated error messages.
>>> About 3 months ago I tried to use visual studio 2019 and changed
>>> somethings in the build script. I managed to generate solution files but
>>> QGIS couldn't compile. I ended up having to switch to linux.
>>> I hope you find a solution soon.
>>>
>>>
>>> On Tue, Aug 4, 2020, 10:48 PM <tomjan at gmx.com> wrote:
>>>
>>>> Hi Ismail and thank you for your link to the pull request.
>>>> Currently that PR has not been accepted, because of some checks not
>>>> being successful.
>>>>
>>>> I do not really know exactly what that pull request is trying to do
>>>> (but as many as 42 files seem to be involved in the PR) but as far as I can
>>>> see it does not include a ".sln" file (Visual Studio solution file) nor any
>>>> ".vcxproj" files (Visual C++ project files) nor a file "packages.config"
>>>> (for NuGet managed libraries).
>>>>
>>>> I think I read somewhere here in the QGIS developer list archive that
>>>> someone estimated that 90% percent of the QGIS developers are using Linux.
>>>> If that is true then I believe the reason might be that Windows
>>>> developers (which are used to NuGet and Visual Studio solutions files and
>>>> project files) may choose to give up when they feel it seems difficult to
>>>> even get started with the development environment for QGIS with Windows.
>>>>
>>>> Can anyone answer this question:
>>>> Would it, for some reason, be impossible to provide a Visual Studio
>>>> solution file (and .vcxproj files) that can simply be opened, and then the
>>>> required dependencies would be retrieved automatically with NuGet
>>>> (according to NuGet references in the ".vcxproj" files or
>>>> "packages.config") ?
>>>> One obvious reason could be that there may be some required libraries
>>>> which are not available through NuGet but those kind of files therefore
>>>> really will need a manual installation.
>>>> But I mean is it possible to provide easy instructions with only very
>>>> FEW manual installations for Windows, and then the majority of the
>>>> dependencies would be retrieved through NuGet when you open a Visual Studio
>>>> solution file which hopefully would be available from the github repository?
>>>>
>>>> The only kind of libraries I myself have used with NuGet is .NET
>>>> libraries but as far as I understand, NuGet can also be used for native C++
>>>> libraries:
>>>> https://devblogs.microsoft.com/nuget/native-support/
>>>>
>>>> I believe that the QGIS project would get more contributors if you can
>>>> provide a development environment that are EASY to GET STARTED WITH for
>>>> potential newcomers using Windows Visual Studio.
>>>>
>>>>   -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -
>>>>
>>>>
>>>> Sent: Tuesday, August 04, 2020 at 12:22 AM
>>>> From: "Ismail Sunni" <imajimatika at gmail.com>
>>>> To: tomjan at gmx.com
>>>> Cc: "QGIS Developer List" <qgis-developer at lists.osgeo.org>
>>>> Subject: Re: [QGIS-Developer] How to setup Visual Studio 2019
>>>> environment for QGIS C++ development?
>>>>
>>>> Hi Tomjan,
>>>>
>>>> Perhaps you want to see this PR https://github.com/qgis/QGIS/pull/38102
>>>> for your question.
>>>>  Best regards
>>>>
>>>>
>>>> On Mon, Aug 3, 2020, 23:44 <tomjan at gmx.com[mailto:tomjan at gmx.com]>
>>>> wrote:
>>>>
>>>> I would be interested in learning to contribute to QGIS.
>>>> My previous C++ experience is that about 20 years ago I did some (for a
>>>> couple of years) Visual C++ programming with Microsoft's MFC as the GUI.
>>>> Now I think I could refresh my C++ skills and also learn QT which I
>>>> have never programmed with so far.
>>>>
>>>> However, I am not a Linux user, but always have been using Windows
>>>> (currently Windows 10).
>>>> It seems to be a complicated obstacle to get started running QGIS
>>>> through Visual Studio 2019.
>>>>
>>>> I think it would be great with a tutorial (webpage or youtube video
>>>> tutorial) about how to get started with an example showing how to do all
>>>> necessary installations/configurations/setup until you can compile and run
>>>> QGIS with a breakpoint in Visual Studio 2019.
>>>>
>>>> I have seen that the "INSTALL" file in the repository refers to Visual
>>>> Studio 2015, but it seems awkward if it really would be necessary to use
>>>> such an ancient version?
>>>> Is nobody of the QGIS developers using Visual Studio 2019?
>>>>  _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org[mailto:QGIS-Developer at lists.osgeo.org]
>>>> List info:
>>>> https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
>>>> Unsubscribe:
>>>> https://lists.osgeo.org/mailman/listinfo/qgis-developer[https://lists.osgeo.org/mailman/listinfo/qgis-developer]
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Ismail Sunni
Software Engineer
ismailsunni.id
ismailsunni.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200805/2ccff0d5/attachment-0001.html>

From qgis at ag99.de  Wed Aug  5 01:23:02 2020
From: qgis at ag99.de (Jonas)
Date: Wed, 5 Aug 2020 01:23:02 -0700 (MST)
Subject: [QGIS-Developer] How to setup Visual Studio 2019 environment
 for QGIS C++ development?
In-Reply-To: <CAEh5jtFXWCCtKLBRJ7DJ93SNh_uDSg9gd6B-4EwwChA6AG8W=A@mail.gmail.com>
References: <trinity-26711291-e44d-454a-887f-e3dc2584c257-1596491074763@3c-app-mailcom-bs09>
 <CAEh5jtFQm91-Qpw7jXjf2-JmQU5NSZzTbdg-MPmZwoxU5eYTaQ@mail.gmail.com>
 <trinity-097c97ac-a418-4261-94ab-89fbf21b2099-1596577380222@3c-app-mailcom-bs13>
 <CAGiKOuj2MqDXEUxRZtzpSBtPzekcHkVDSH0YPQFn=pgBq5ULMQ@mail.gmail.com>
 <CAK2KqidsUsM_=3838688zi9_Z1TNA_twGzfmUyUg=Mj+KsmDPA@mail.gmail.com>
 <CAGiKOuhzJ_CSN5t=Rk_VzFkOZ4DQQSsYD1h7Taqq4aHJw7VdJw@mail.gmail.com>
 <CAEh5jtFXWCCtKLBRJ7DJ93SNh_uDSg9gd6B-4EwwChA6AG8W=A@mail.gmail.com>
Message-ID: <1596615782865-0.post@n6.nabble.com>

i managed to create a working dev environment including debugging in
QtCreator with the OSGEO4W libraries. It was quite a hassle to set up though
- but thats maybe because i am totally new to C++/CMake building. Probably
not the OneClick(TM) solution the OP craves for. 

That being said i tried the "open CMake in VS 2017 combined with OSGEO4W
libraries"-solution which still does not really work for me (strange
permission denied and file not found errors).



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rldhont at gmail.com  Wed Aug  5 06:32:02 2020
From: rldhont at gmail.com (=?UTF-8?Q?Ren=c3=a9-Luc_Dhont?=)
Date: Wed, 5 Aug 2020 15:32:02 +0200
Subject: [QGIS-Developer] Using task to run multiple processes in an
	algorithm
Message-ID: <5b73c958-5fb1-51b0-3c95-bf154d7622d9@gmail.com>

Hi dev,

I have a little question : Is it possible to run multiple processes with 
QgsProcessingAlgRunnerTask in QgsProcessingAlgorithm::processAlgorithm ?

Once a QgsProcessingAlgRunnerTask instanciated and configured it has to 
be passed to the QgsTaskManager available through QgsApplication. Is 
QgsApplication available in QgsProcessingAlgorithm::processAlgorithm and 
thread safe ?

Regards,
René-Luc

From adenaculture at gmail.com  Thu Aug  6 09:56:28 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 6 Aug 2020 12:56:28 -0400
Subject: [QGIS-Developer] How to Access Renderer Style Info in Processing
	Algorithms
Message-ID: <CABPxTTp-LPpFMohoyW6LK+TjCwPFwBm-qoQw+_UzmJFGAhCFtw@mail.gmail.com>

How do I access a layer's style information in the processing algorithm. If
it was outside processing it would be layer.renderer(). As far as I can
tell I cannot access it from a QgsProcessingParameterFeatureSource.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200806/d08d9e8f/attachment.html>

From nilsnolde at gmail.com  Thu Aug  6 10:26:40 2020
From: nilsnolde at gmail.com (Nils Nolde)
Date: Thu, 6 Aug 2020 19:26:40 +0200
Subject: [QGIS-Developer] Buffer of lines results in "random" vertex order
	in buffer polygon
Message-ID: <b74b606d-c12b-fbe7-306b-f0ab0bf42bad@gmail.com>

Dear devs,

I have a fairly complex geometry-(and mind-)bending workflow where I'd 
ideally depend on the fact that buffering a line (regular buffer, flat 
cap, miter join with almost infinite limit) would result in a 
reproducible pattern for the vertex order in the resulting buffer 
polygon (s. [1] for details).

I found that in 99% of the cases the first vertex of the buffered 
polygon will be on the left side of the original line feature's second 
vertex (which is great). That's confusing, not sure how else to put it, 
but see this image for viz: https://i.imgur.com/RwvYA0g.png, showing the 
vertex order of the original line features and the resulting polygon 
features.

However, on a few occasions this assumption doesn't seem to hold and the 
first vertex of the buffer polygon will be anywhere with respect to the 
original line feature's first vertex and does not follow any pattern at 
all, s. [2] for a WKT example in EPSG:25832 and buffered with 0.3 m 
(it's too long for an image). On this feature, vertex 0 of the polygon 
feature is on the left side of vertex 14 of the line feature, not next 
to vertex 2 as for all other line features I buffered.

My question is: is that expected behavior that buffer feature vertices 
can start at a sorta random place with respect to the line feature's 
first vertex? Or can this be considered a minor bug?

Many thanks
Nils

[1] I want only one side of the buffered geometry and need to somehow 
rotate the buffer vertex list so that the first vertex is related to the 
first vertex of the line feature. I can't use singleSidedBuffer() 
because that is much more likely to produce weird artifacts on sharp 
kinks in the line geometry.

[2] The WKT of a feature where it's not working as I'd expect (in 
EPSG:25832, buffered with 30 centimeters, flat cap, miter join and 100m 
miter limit): LineString (567128.05779425 5674382.50117657, 
567124.28299077 5674385.77951107, 567121.44049412 5674387.67067814, 
567113.39428435 5674393.02397452, 567089.71334818 5674408.77935169, 
567075.32187873 5674418.35427, 567048.09794292 5674433.92388853, 
567047.26883028 5674434.39806565, 567046.22311791 5674435.0838905, 
567043.6035418 5674436.80192543, 567006.05562972 5674453.08412973, 
566973.94524544 5674467.01295346, 566941.83486115 5674480.9417772, 
566930.00051817 5674486.07016386, 566929.97872742 5674486.07960683, 
566929.33462488 5674485.86262721, 566904.04808487 5674477.3443191, 
566871.1140052 5674462.85053673, 566838.17992554 5674448.35675436, 
566797.46760646 5674431.84405364, 566756.75528738 5674415.33135292, 
566716.04296829 5674398.8186522, 566675.33064921 5674382.30595149)



From luipir at gmail.com  Thu Aug  6 13:59:50 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 6 Aug 2020 22:59:50 +0200
Subject: [QGIS-Developer] How to Access Renderer Style Info in
	Processing Algorithms
In-Reply-To: <CABPxTTp-LPpFMohoyW6LK+TjCwPFwBm-qoQw+_UzmJFGAhCFtw@mail.gmail.com>
References: <CABPxTTp-LPpFMohoyW6LK+TjCwPFwBm-qoQw+_UzmJFGAhCFtw@mail.gmail.com>
Message-ID: <CAFO80_oRNHVx367rCvSqgM6oj9zTQYungiVQ6JN7nKRvMNb3kg@mail.gmail.com>

maybe after get it source (QgsProcessingAlgorithm.asSource =>
https://qgis.org/api/classQgsProcessingFeatureSource.html and from there
with layer name you can find registered layer that not necessarily is a
rendered layer.

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 6 Aug 2020 at 18:56, C Hamilton <adenaculture at gmail.com> wrote:

> How do I access a layer's style information in the processing
> algorithm. If it was outside processing it would be layer.renderer(). As
> far as I can tell I cannot access it from a
> QgsProcessingParameterFeatureSource.
>
> Thanks,
>
> Calvin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200806/b4c2bafc/attachment.html>

From enzo.ccc at gmail.com  Thu Aug  6 15:32:07 2020
From: enzo.ccc at gmail.com (Enzo Cocca)
Date: Fri, 7 Aug 2020 00:32:07 +0200
Subject: [QGIS-Developer] Create View spatialite in qgis 3.14
Message-ID: <CAC_+zuoY13Vst0K=nFZKGzbCZmhwTYRTCQyEeMgS1-RJ-1ATNg@mail.gmail.com>

Hi guys,
I have a problem in qgis 3.14. When I try to create a spatial view via sql
in dbmanager or via python code I can create just a view.

Do you know if a bug?

Thanks
E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200807/b53c035d/attachment.html>

From nyall.dawson at gmail.com  Thu Aug  6 16:04:47 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 7 Aug 2020 09:04:47 +1000
Subject: [QGIS-Developer] How to Access Renderer Style Info in
	Processing Algorithms
In-Reply-To: <CABPxTTp-LPpFMohoyW6LK+TjCwPFwBm-qoQw+_UzmJFGAhCFtw@mail.gmail.com>
References: <CABPxTTp-LPpFMohoyW6LK+TjCwPFwBm-qoQw+_UzmJFGAhCFtw@mail.gmail.com>
Message-ID: <CAB28AshQybpUSkv3MzSec6E9f=cfOiKVDLR9oXdTCXkwubD4jA@mail.gmail.com>

On Fri, 7 Aug 2020 at 02:57, C Hamilton <adenaculture at gmail.com> wrote:
>
> How do I access a layer's style information in the processing algorithm. If it was outside processing it would be layer.renderer(). As far as I can tell I cannot access it from a QgsProcessingParameterFeatureSource.

You can't, if it's a feature source. A feature source isn't
necessarily a vector layer, and accordingly doesn't have a renderer.
If you want to write an algorithm which modifies a renderer then the
algorithm should defined a QgsProcessingParameterVectorLayer instead.

Nyall

From franciscocamellon at gmail.com  Fri Aug  7 05:41:52 2020
From: franciscocamellon at gmail.com (Francisco Camello)
Date: Fri, 7 Aug 2020 09:41:52 -0300
Subject: [QGIS-Developer] Filtering QgsFeature
Message-ID: <CAPGdMdWkc36FvGXT6XD55-FFGZduW3_OkVa6OO00CVsT0YZzUQ@mail.gmail.com>

Hi all,

     I'm developing a processing algorithm that filters a QgsVectorLayer by
expressions provided via QgsFeatureRequest, till this point it's ok. But, I
must give to the users an option to run the algorithm only on selected
features. In this case, the type of object received change from
QgsVectorLayer to a list of QgsFeature, therefore, and I'm stuck here
because I can't make any requests through QgsFeatureRequest() or selection
using the selectByExpression() method, to filtering QgsFeature. Follow the
code below.

def checkedFeatures(self, rules, layerList, onlySelected, returnIterator=True):
        """
        Select features by conditional rules stored in the rules JSON file.
        :param (dict) rules: dictionary from conditional rules;
        :param (QgsVectorLayer) layerList: list from all loaded layers;
        :param (bool) onlySelected: boolean.
        """
        failedDict = {}
        for ruleName in rules:
            failedList = []
            for lyr in layerList:
                loadedLyrName = lyr.name()
                if loadedLyrName in rules[ruleName]:
                    allRules = rules[ruleName][loadedLyrName]['allRules']
                    for rule in allRules:
                        request = QgsFeatureRequest().setFilterExpression(rule)
                        if onlySelected:
                            selected = lyr.selectedFeatures()
                            # this FOR block below receives a
QgsFeature list from lyr.selectedFeatures()
                            # and so I can't make any requests through
QgsFeatureRequest()
                            # or selection using the selectByExpression() method
                            for feat in selected: # I cant do the selection here
                                feat.selectByExpression(rule)
                                failedList+=[feat for feat in
lyr.selectedFeatures()]
                        else:
                            for feat in lyr.getFeatures(request):
                                failedList.append(feat)
            failedDict[ruleName] = failedList
        return failedDict

The expressions provided do verifications in one attribute or in a set of
attributes. It looks like to this:
{ "Incorrect attribute": { "hid_island_a": { "allRules":
[ "\"geometriaaproximada\" not in  (1,2)" ] } },
  "Ortographic error": { " hid_island_a ": { "allRules": [ "(regexp_match (
"\"name" , '^ ' ) or regexp_match ( ""name"" , '  ' ) or regexp_match (
""name"" , ' $' ) or regexp_match ( ""name"" , '^[a-z]' ))"]}}
}
May I do this by QgsFeatureFilterProvider.filterFeatures()? Or there is
another way to filter QgsFeatures?

Best regards,
__________________________________________________________________________________
Francisco Alves Camello Neto
GIS Consultant
+55 021 96987 9945  +55 021 98122 4645
franciscocamellon at gmail.com
* Even recycled paper takes energy to make. Do you really need to print
this e-mail?*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200807/7b4a541a/attachment-0001.html>

From spencergardner at gmail.com  Fri Aug  7 10:04:32 2020
From: spencergardner at gmail.com (Spencer Gardner)
Date: Fri, 7 Aug 2020 10:04:32 -0700
Subject: [QGIS-Developer] Custom label placement per layout
Message-ID: <CAHCHdbKuYcXHRZJiwQ062o6k5aTi_hvYRva-h3ipkPUi_B80=Q@mail.gmail.com>

I've loved the improved functionality for custom label placement in QGIS 3
but I've come across one issue that I assume is common to many users. When
a label is manually placed on the map, that placement applies to every map
layout regardless of scale or extent. This can create problems if, for
example, I'm working with a map document with layouts at different scales.

I'm wondering if there's a trick that would allow me to place labels
specific to a certain Composer layout so that I can vary the placement for
each layout.

If this is impossible currently, does it make sense to consider as a QEP? I
think there are some major technical challenges, not least of which is
figuring out how to allow a user to tweak label placement inside the
Composer window, but the improvement in label quality would be immense (for
me, at least).

Thanks for any thoughts,
Spencer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200807/bbb186fc/attachment.html>

From nyall.dawson at gmail.com  Fri Aug  7 18:26:25 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 8 Aug 2020 11:26:25 +1000
Subject: [QGIS-Developer] Custom label placement per layout
In-Reply-To: <CAHCHdbKuYcXHRZJiwQ062o6k5aTi_hvYRva-h3ipkPUi_B80=Q@mail.gmail.com>
References: <CAHCHdbKuYcXHRZJiwQ062o6k5aTi_hvYRva-h3ipkPUi_B80=Q@mail.gmail.com>
Message-ID: <CAB28Ash3p_=gdGjFGiPftyGfBGCmjgv1JCS-53aU_Wa3EFJ1tA@mail.gmail.com>

On Sat, 8 Aug 2020 at 03:05, Spencer Gardner <spencergardner at gmail.com> wrote:
>
> I've loved the improved functionality for custom label placement in QGIS 3 but I've come across one issue that I assume is common to many users. When a label is manually placed on the map, that placement applies to every map layout regardless of scale or extent. This can create problems if, for example, I'm working with a map document with layouts at different scales.
>
> I'm wondering if there's a trick that would allow me to place labels specific to a certain Composer layout so that I can vary the placement for each layout.
>
> If this is impossible currently, does it make sense to consider as a QEP? I think there are some major technical challenges, not least of which is figuring out how to allow a user to tweak label placement inside the Composer window, but the improvement in label quality would be immense (for me, at least).

It's a horrible workflow, but I usually end up:

1. manually adding additional auxilliary fields to the table, e.g.
"label_x_layout_1", "label_y_layout_1"
2. switching the data defined x/y for the label to use one particular
set of these fields, and using the move label tool to get the
placement right. Repeat.
3. change the data defined x/y from fields to expressions like

case when @layout_name = 'xxxxxx' then @aux_field_label_x_layout1
    when @layout_name = 'yyyy' then @aux_field_label_x_layout2
end

etc.

I warned you it was horrible! So yeah, QGIS is capable of handling
this situation, but we need a much nicer workflow for exposing it.
Ideas welcome!

Nyall


>
> Thanks for any thoughts,
> Spencer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From pedrongvenancio at gmail.com  Sun Aug  9 16:33:25 2020
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Mon, 10 Aug 2020 00:33:25 +0100
Subject: [QGIS-Developer] qgis_process-qgis-rel-dev System Error - Missing
	gdal302 and proj_7_2 dlls
Message-ID: <CAMCJChtLTyhQ6rO9ADbBeedmoSH2C0ws31NqVXJh39tGVEqerw@mail.gmail.com>

Hi all,

I'm trying to set up qgis_process on a Windows machine with QGIS 3.14.1
installed with OSGeo4W (qgis-rel-dev 3.14.1-14).

When I do qgis_process-qgis-rel-dev in the OSGeo4W Shell, I get several
System Errors, about missing gdal302.dll and proj_7_2.dll.

qgis_process-qgis-rel-dev.bat is present and has:

@echo off
call "%~dp0\o4w_env.bat"
call qt5_env.bat
call py3_env.bat
@echo off
path %OSGEO4W_ROOT%\apps\qgis-rel-dev\bin;%PATH%
set QGIS_PREFIX_PATH=%OSGEO4W_ROOT:\=/%/apps/qgis-rel-dev
set GDAL_FILENAME_IS_UTF8=YES
rem Set VSI cache to be used as buffer, see #6448
set VSI_CACHE=TRUE
set VSI_CACHE_SIZE=1000000
set
QT_PLUGIN_PATH=%OSGEO4W_ROOT%\apps\qgis-rel-dev\qtplugins;%OSGEO4W_ROOT%\apps\qt5\plugins
set PYTHONPATH=%OSGEO4W_ROOT%\apps\qgis-rel-dev\python;%PYTHONPATH%
"%OSGEO4W_ROOT%\apps\qgis-rel-dev\bin\qgis_process.exe" %*

So, can it be missing paths to:
%OSGEO4W_ROOT% \apps\proj-dev\bin\proj_7_2.dll
%OSGEO4W_ROOT% \apps\gdal-dev\bin\gdal302.dll
?

Thanks!

Best regards,
Pedro Venâncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200810/5b63c430/attachment.html>

From gb_nedjima at esi.dz  Sun Aug  9 16:47:33 2020
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Mon, 10 Aug 2020 00:47:33 +0100
Subject: [QGIS-Developer] [SoC] GSoC 2020 - Coding Period Week 10 Report
Message-ID: <CAGiKOuirCaY9=QdUi1iQjRAZaaBpT3x8We8-p9CccJrATKayMA@mail.gmail.com>

Hi,
This is my report for this week:

   - Tasks done:
      - Fix skybox rendering pull request github checks.
      - Address skybox pull request reviews.
      - The Skybox rendering feature was merged into the master QGIS branch.
      - Experiment with how the wireframe rendering can be done.
      - Found that we were able to display buildings wireframes by
      disabling facades rendering and it was already implemented for mesh
      terrains.
      - Discussed wireframe rendering with mentors and we concluded that
      global wireframes rendering will take much more work than it deserves for
      now so I needed to work on the next remaining features.
      - Discussed shadow rendering with mentors and we decided to use
      shadow mapping technique.
      - Started converting Qt3D shadow mapping tutorial code from QML to
      pure C++.
   - Tasks to be done:
      - Finish converting the Qt3D shadow mapping tutorial code to pure C++.
      - Make separate classes for the frame graph used by the 3D view.
      - Try to complete the shadow rendering feature.
   - Blocking issues: None

Any suggestion or feedback is always welcome.
Best wishes,

-- 
Belgacem Nedjima
4th year computer science and engineering student.
https://github.com/NEDJIMAbelgacem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200810/6e7f106c/attachment.html>

From nyall.dawson at gmail.com  Sun Aug  9 17:19:14 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 10 Aug 2020 10:19:14 +1000
Subject: [QGIS-Developer] [SoC] GSoC 2020 - Coding Period Week 10 Report
In-Reply-To: <CAGiKOuirCaY9=QdUi1iQjRAZaaBpT3x8We8-p9CccJrATKayMA@mail.gmail.com>
References: <CAGiKOuirCaY9=QdUi1iQjRAZaaBpT3x8We8-p9CccJrATKayMA@mail.gmail.com>
Message-ID: <CAB28AsgdEJwq5nwSnZYLCQNQiufX0KsqLgdNHrxeAWjojrAPXA@mail.gmail.com>

On Mon, 10 Aug 2020 at 09:48, BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:
>
> Hi,
> This is my report for this week:
>
> Tasks done:
>
> Fix skybox rendering pull request github checks.
> Address skybox pull request reviews.
> The Skybox rendering feature was merged into the master QGIS branch.
> Experiment with how the wireframe rendering can be done.
> Found that we were able to display buildings wireframes by disabling facades rendering and it was already implemented for mesh terrains.
> Discussed wireframe rendering with mentors and we concluded that global wireframes rendering will take much more work than it deserves for now so I needed to work on the next remaining features.
> Discussed shadow rendering with mentors and we decided to use shadow mapping technique.
> Started converting Qt3D shadow mapping tutorial code from QML to pure C++.

Exciting -- I'm really looking forward to this part!

Nyall

>
> Tasks to be done:
>
> Finish converting the Qt3D shadow mapping tutorial code to pure C++.
> Make separate classes for the frame graph used by the 3D view.
> Try to complete the shadow rendering feature.
>
> Blocking issues: None
>
> Any suggestion or feedback is always welcome.
> Best wishes,
>
> --
> Belgacem Nedjima
> 4th year computer science and engineering student.
> https://github.com/NEDJIMAbelgacem
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From andreaerdna at libero.it  Sun Aug  9 18:54:09 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Sun, 9 Aug 2020 18:54:09 -0700 (MST)
Subject: [QGIS-Developer] qgis_process-qgis-rel-dev System Error -
 Missing gdal302 and proj_7_2 dlls
In-Reply-To: <CAMCJChtLTyhQ6rO9ADbBeedmoSH2C0ws31NqVXJh39tGVEqerw@mail.gmail.com>
References: <CAMCJChtLTyhQ6rO9ADbBeedmoSH2C0ws31NqVXJh39tGVEqerw@mail.gmail.com>
Message-ID: <1597024449008-0.post@n6.nabble.com>

Pedro Venâncio-2 wrote
> Hi all,
> 
> I'm trying to set up qgis_process on a Windows machine with QGIS 3.14.1
> installed with OSGeo4W (qgis-rel-dev 3.14.1-14).
> 
> When I do qgis_process-qgis-rel-dev in the OSGeo4W Shell, I get several
> System Errors, about missing gdal302.dll and proj_7_2.dll.
> 
> qgis_process-qgis-rel-dev.bat is present and has:
> 
> @echo off
> call "%~dp0\o4w_env.bat"
> call qt5_env.bat
> call py3_env.bat
> @echo off
> path %OSGEO4W_ROOT%\apps\qgis-rel-dev\bin;%PATH%
> set QGIS_PREFIX_PATH=%OSGEO4W_ROOT:\=/%/apps/qgis-rel-dev
> set GDAL_FILENAME_IS_UTF8=YES
> rem Set VSI cache to be used as buffer, see #6448
> set VSI_CACHE=TRUE
> set VSI_CACHE_SIZE=1000000
> set
> QT_PLUGIN_PATH=%OSGEO4W_ROOT%\apps\qgis-rel-dev\qtplugins;%OSGEO4W_ROOT%\apps\qt5\plugins
> set PYTHONPATH=%OSGEO4W_ROOT%\apps\qgis-rel-dev\python;%PYTHONPATH%
> "%OSGEO4W_ROOT%\apps\qgis-rel-dev\bin\qgis_process.exe" %*
> 
> So, can it be missing paths to:
> %OSGEO4W_ROOT% \apps\proj-dev\bin\proj_7_2.dll
> %OSGEO4W_ROOT% \apps\gdal-dev\bin\gdal302.dll
> ?
> 
> Thanks!
> 
> Best regards,
> Pedro Venâncio
> 
> _______________________________________________
> QGIS-Developer mailing list

> QGIS-Developer at .osgeo

> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

Hi Pedro Venâncio,
try to substitute

call py3_env.bat

with

call gdal-dev-py3-env.bat

in qgis_process-qgis-rel-dev.bat


Regards.

Andrea Giudiceandrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From andreaerdna at libero.it  Mon Aug 10 00:28:03 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Mon, 10 Aug 2020 00:28:03 -0700 (MST)
Subject: [QGIS-Developer] qgis_process-qgis-rel-dev System Error -
 Missing gdal302 and proj_7_2 dlls
In-Reply-To: <1597024449008-0.post@n6.nabble.com>
References: <CAMCJChtLTyhQ6rO9ADbBeedmoSH2C0ws31NqVXJh39tGVEqerw@mail.gmail.com>
 <1597024449008-0.post@n6.nabble.com>
Message-ID: <1597044483861-0.post@n6.nabble.com>

I apologize for inadvertently quoting the whole original message...

In the meantime, the issue was fixed by Jürgen Fischer [1], so you can wait
for the next rel-dev build or use my workaround until then.

Regards.

Andrea

[1]
https://github.com/qgis/QGIS/commit/b3147bc8b6a841d9a5e20fb43d41288e9b841ecf



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From pedrongvenancio at gmail.com  Mon Aug 10 01:52:19 2020
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Mon, 10 Aug 2020 09:52:19 +0100
Subject: [QGIS-Developer] qgis_process-qgis-rel-dev System Error -
 Missing gdal302 and proj_7_2 dlls
In-Reply-To: <1597044483861-0.post@n6.nabble.com>
References: <CAMCJChtLTyhQ6rO9ADbBeedmoSH2C0ws31NqVXJh39tGVEqerw@mail.gmail.com>
 <1597024449008-0.post@n6.nabble.com> <1597044483861-0.post@n6.nabble.com>
Message-ID: <CAMCJChtiGN7CDQBhXoiCDw2KX7eYXu9V_b_b-38qmaN=xVZOjA@mail.gmail.com>

Hi Andrea,

Thank you very much! And also thanks to Jurgen!

I've done the replace and then run qgis_process-qgis-rel-dev.bat
--postinstall and it works!

Thanks again!

Best regards,
Pedro


Andrea Giudiceandrea <andreaerdna at libero.it> escreveu no dia segunda,
10/08/2020 à(s) 08:28:

> I apologize for inadvertently quoting the whole original message...
>
> In the meantime, the issue was fixed by Jürgen Fischer [1], so you can wait
> for the next rel-dev build or use my workaround until then.
>
> Regards.
>
> Andrea
>
> [1]
>
> https://github.com/qgis/QGIS/commit/b3147bc8b6a841d9a5e20fb43d41288e9b841ecf
>
>
>
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200810/e9893169/attachment.html>

From uclaros at gmail.com  Mon Aug 10 03:43:13 2020
From: uclaros at gmail.com (uclaros)
Date: Mon, 10 Aug 2020 03:43:13 -0700 (MST)
Subject: [QGIS-Developer] Move GCP in georeferencer on hidpi display
Message-ID: <1597056193753-0.post@n6.nabble.com>

Hi list,
the move GCP tool in the georeferencer is a little pita to use, needing
pixel perfect aiming. I tried to remedy this with PR
https://github.com/qgis/QGIS/pull/37256 but Nyall raised the issue regarding
hidpi displays with this approach.
Since I don't have a hidpi display to test, can someone test and give some
feedback? I'd be interested on the following:
- What's the current usability compared to low vs hidpi on that tool?
- What's the usability with the PR as is on hidpi?
- What's a good value for
https://github.com/qgis/QGIS/blob/976e624a762d5713f753a2cdf6e2b6338a179e71/src/app/georeferencer/qgsgeorefmainwindow.cpp#L512
on a hidpi setup?

Thanks!



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From wonder.sk at gmail.com  Mon Aug 10 06:25:29 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 10 Aug 2020 15:25:29 +0200
Subject: [QGIS-Developer] New QEP: Point clouds in QGIS
Message-ID: <CAC2XbFc47Ow2hpiq-s_Fn_y02A5TfHEhfnABaBvYwQbMfMiehg@mail.gmail.com>

Hi all

I have just published a draft of the proposal for introduction of
point cloud visualization in QGIS:
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/194

Any feedback would be highly appreciated!

We will be soon launching a crowdfunding campaign for the
implementation - stay tuned!

Regards
Martin

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Mon Aug 10 13:37:44 2020
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Mon, 10 Aug 2020 20:37:44 +0000
Subject: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer
Message-ID: <YT1PR01MB3164180B48CDF1704A806495B3440@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>

Hi list,

I have a very simple problem: I can't delete a file after loading it with QgsVectorLayer() or QgsRasterLayer() within a script (custom Processing Provider) as I get the error saying the file is still in use. My code to replicate:

path_raster = "C:/temp/raster.tif"
rlayer = QgsRasterLayer(path_raster, "flow")
QgsProject.instance().addMapLayer(rlayer, False)
QgsProject.instance().removeMapLayer(rlayer.id())
os.remove(path_raster)

However, the same code directly put inside the Python Console within QGIS works, but it won't if used inside a Processing Provider plugin. I also tried using del rlayer without success. There is several questions about releasing QGIS' lock on files on GIS StackExchange (e.g. here<https://gis.stackexchange.com/questions/243520/deleting-raster-file-after-doing-some-processing-in-qgis> and here<https://gis.stackexchange.com/questions/77218/releasing-pyqgis-file-locks>) but it doesn't seem to work for everyone. Maybe it was working in version 2.X, but it fails on 3.12 (Windows 10).

Many thanks

Jean-François Bourdon, ing.f.
Analyste en télédétection
Direction des inventaires forestiers
Ministère des Forêts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Québec (Québec) G1H 6R1
Téléphone : 418 627-8669, poste 4304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200810/34da67d5/attachment.html>

From nyall.dawson at gmail.com  Mon Aug 10 15:45:34 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 11 Aug 2020 08:45:34 +1000
Subject: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer
In-Reply-To: <YT1PR01MB3164180B48CDF1704A806495B3440@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
References: <YT1PR01MB3164180B48CDF1704A806495B3440@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAB28AsiHgNghP0jVydJpKZ4h3S9o-zWoY03+UR3BvzikBvPyUg@mail.gmail.com>

On Tue, 11 Aug 2020 at 06:37, Bourdon, Jean-François (DIF)
<Jean-Francois.Bourdon at mffp.gouv.qc.ca> wrote:
>
> Hi list,
>
>
>
> I have a very simple problem: I can’t delete a file after loading it with QgsVectorLayer() or QgsRasterLayer() within a script (custom Processing Provider) as I get the error saying the file is still in use. My code to replicate:
>
>
>
> path_raster = "C:/temp/raster.tif"
>
> rlayer = QgsRasterLayer(path_raster, "flow")
>
> QgsProject.instance().addMapLayer(rlayer, False)
>
> QgsProject.instance().removeMapLayer(rlayer.id())
>
> os.remove(path_raster)
>
>
>
> However, the same code directly put inside the Python Console within QGIS works, but it won’t if used inside a Processing Provider plugin. I also tried using del rlayer without success. There is several questions about releasing QGIS’ lock on files on GIS StackExchange (e.g. here and here) but it doesn’t seem to work for everyone. Maybe it was working in version 2.X, but it fails on 3.12 (Windows 10).

I suspect your algorithm is incorrectly running in a thread. You CAN'T
do this if your algorithm directly access the project instance -- it's
not thread safe and the layers are likely not getting deleted at all.
Try returning the FlagNoThreading flag from your algorithm's flags()
override.

Nyall


>
>
>
> Many thanks
>
>
>
> Jean-François Bourdon, ing.f.
>
> Analyste en télédétection
> Direction des inventaires forestiers
> Ministère des Forêts, de la Faune et des Parcs
> 5700, 4e Avenue Ouest, local A-108
> Québec (Québec) G1H 6R1
> Téléphone : 418 627-8669, poste 4304
> jean-francois.bourdon at mffp.gouv.qc.ca
> mffp.gouv.qc.ca
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From a.neumann at carto.net  Tue Aug 11 00:53:41 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 11 Aug 2020 09:53:41 +0200
Subject: [QGIS-Developer] QGIS processing model: extract specific attribute
 of a single feature to a string
Message-ID: <4b661cc011dd8423736b2375a7ac8560@carto.net>

Hi, 

In a model I aggregate values to a single feature. Then I would like to
extract a specific aggregated attribute to a string so I can use it as
the input parameter of another algorithm. 

I fail to find a way to do that. Aggregation works fine, string
concatenation as well, but I fail to find a way to extract an attribute
of a single feature to a string. 

Any ideas? 

I'm on QGIS 3.10, but if necessary I could also use a newer QGIS
version. 

Thanks, 

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200811/e4dfdbae/attachment.html>

From ujaval at spatialthoughts.com  Tue Aug 11 01:15:43 2020
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Tue, 11 Aug 2020 13:45:43 +0530
Subject: [QGIS-Developer] QGIS processing model: extract specific
 attribute of a single feature to a string
In-Reply-To: <4b661cc011dd8423736b2375a7ac8560@carto.net>
References: <4b661cc011dd8423736b2375a7ac8560@carto.net>
Message-ID: <CALymcQCszkwWKkNLOFCgYDLeuXRRq22TEXcgFCey15DohmCYNw@mail.gmail.com>

I can think of a slightly hacky way. Use the 'Basic Statistics for Field'
algorithm, and since your field will have a single value, use either the
Minimum or Maximum value output from it (works for string fields too) as
the parameter for another algorithm.
[image: Logo] <https://spatialthoughts.com/>
Ujaval Gandhi
Spatial Thoughts
mobile: +91-8095684687
email: ujaval at spatialthoughts.com
[image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
Twitter icon] <https://twitter.com/spatialthoughts>
Subscribe to our newsletter http://bit.ly/spatialthoughts-newsletter


On Tue, Aug 11, 2020 at 1:23 PM Andreas Neumann <a.neumann at carto.net> wrote:

> Hi,
>
> In a model I aggregate values to a single feature. Then I would like to
> extract a specific aggregated attribute to a string so I can use it as the
> input parameter of another algorithm.
>
> I fail to find a way to do that. Aggregation works fine, string
> concatenation as well, but I fail to find a way to extract an attribute of
> a single feature to a string.
>
> Any ideas?
>
> I'm on QGIS 3.10, but if necessary I could also use a newer QGIS version.
>
> Thanks,
>
> Andreas
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200811/18bc07ec/attachment-0001.html>

From sciurusurbanus at hotmail.it  Tue Aug 11 01:23:56 2020
From: sciurusurbanus at hotmail.it (=?Windows-1252?Q?Niccol=F2_Marchi?=)
Date: Tue, 11 Aug 2020 08:23:56 +0000
Subject: [QGIS-Developer] R: New QEP: Point clouds in QGIS (Martin Dobias)
In-Reply-To: <mailman.19.1597086001.21699.qgis-developer@lists.osgeo.org>
References: <mailman.19.1597086001.21699.qgis-developer@lists.osgeo.org>
Message-ID: <VI1PR0202MB3551B65164A3533F0A8A3FA8A7450@VI1PR0202MB3551.eurprd02.prod.outlook.com>

Hi Martin,
great news: I’m craving for such an enhancement!

Reading the description of the QEP I didn’t see great considerations about LAS & LASlib.
>From my experience, LAS format is almost a standard for ALS LiDAR data sharing and, even if LAZ is still not well known, the size can be shrinked to 1/10 thanks to it. It has a 2D index that can be easily created through the open source tools of LAStools and it’s definitely well exploited using the streaming filters provided by LASlib (at least in IO operations). For what concerns the visualization, here<https://github.com/Jean-Romain/PointCloudViewer> you can find how it has been solved for the R language (horrible for memory handling) making use of OpenGL.

BTW, I’m just a user and not a programmer…just curious why the above choices :)
All the best and keep up the great work!

Niccolò





Da: qgis-developer-request at lists.osgeo.org<mailto:qgis-developer-request at lists.osgeo.org>
Inviato: lunedì 10 agosto 2020 21:00
A: qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
Oggetto: QGIS-Developer Digest, Vol 178, Issue 20


Message: 1
Date: Mon, 10 Aug 2020 15:25:29 +0200
From: Martin Dobias <wonder.sk at gmail.com>
To: qgis-dev <qgis-developer at lists.osgeo.org>
Subject: [QGIS-Developer] New QEP: Point clouds in QGIS
Message-ID:
        <CAC2XbFc47Ow2hpiq-s_Fn_y02A5TfHEhfnABaBvYwQbMfMiehg at mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"

Hi all

I have just published a draft of the proposal for introduction of
point cloud visualization in QGIS:
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/194

Any feedback would be highly appreciated!

We will be soon launching a crowdfunding campaign for the
implementation - stay tuned!

Regards
Martin


------------------------------

Subject: Digest Footer

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

------------------------------

End of QGIS-Developer Digest, Vol 178, Issue 20
***********************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200811/859a44f2/attachment.html>

From a.neumann at carto.net  Tue Aug 11 01:47:45 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 11 Aug 2020 10:47:45 +0200
Subject: [QGIS-Developer] QGIS processing model: extract specific
 attribute of a single feature to a string
In-Reply-To: <CALymcQCszkwWKkNLOFCgYDLeuXRRq22TEXcgFCey15DohmCYNw@mail.gmail.com>
References: <4b661cc011dd8423736b2375a7ac8560@carto.net>
 <CALymcQCszkwWKkNLOFCgYDLeuXRRq22TEXcgFCey15DohmCYNw@mail.gmail.com>
Message-ID: <a017e0e87b317b60ab722c7b6c90a78f@carto.net>

Hi Ujaval, 

Thanks for the "hacky" idea ;-) 

I am happy to report that it worked for me. 

For the long run, it would be good to have an algorithm to extract a
string from an attribute of a selected feature (something like
attribute(get_feature(expression_to_get_feature),attribute) ) or at
least an "Expression Executor" that outputs a string. Expressions can do
a lot, but getting a string output from an Expression seems to be
impossible. 

Anyway, I can progress now with the rest of my model. 

Thanks again, 

Andreas 

On 2020-08-11 10:15, Ujaval Gandhi wrote:

> I can think of a slightly hacky way. Use the 'Basic Statistics for Field' algorithm, and since your field will have a single value, use either the Minimum or Maximum value output from it (works for string fields too) as the parameter for another algorithm.
> 
> [1]
> 
> Ujaval Gandhi
> 
> Spatial Thoughts
> 
> mobile: +91-8095684687
> 
> email: ujaval at spatialthoughts.com
> 
> [2]   [3]  
> 
> Subscribe to our newsletter http://bit.ly/spatialthoughts-newsletter
> 
> On Tue, Aug 11, 2020 at 1:23 PM Andreas Neumann <a.neumann at carto.net> wrote: 
> 
>> Hi, 
>> 
>> In a model I aggregate values to a single feature. Then I would like to extract a specific aggregated attribute to a string so I can use it as the input parameter of another algorithm. 
>> 
>> I fail to find a way to do that. Aggregation works fine, string concatenation as well, but I fail to find a way to extract an attribute of a single feature to a string. 
>> 
>> Any ideas? 
>> 
>> I'm on QGIS 3.10, but if necessary I could also use a newer QGIS version. 
>> 
>> Thanks, 
>> 
>> Andreas _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

 

Links:
------
[1] https://spatialthoughts.com/
[2] https://www.linkedin.com/in/spatialthoughts/
[3] https://twitter.com/spatialthoughts
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200811/afe18e7e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blocked.gif
Type: image/gif
Size: 118 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200811/afe18e7e/attachment.gif>

From wonder.sk at gmail.com  Tue Aug 11 02:40:44 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue, 11 Aug 2020 11:40:44 +0200
Subject: [QGIS-Developer] R: New QEP: Point clouds in QGIS (Martin
	Dobias)
In-Reply-To: <VI1PR0202MB3551B65164A3533F0A8A3FA8A7450@VI1PR0202MB3551.eurprd02.prod.outlook.com>
References: <mailman.19.1597086001.21699.qgis-developer@lists.osgeo.org>
 <VI1PR0202MB3551B65164A3533F0A8A3FA8A7450@VI1PR0202MB3551.eurprd02.prod.outlook.com>
Message-ID: <CAC2XbFdQRZaj1_k_J2g6S=gRxFZvWy52aZqwr+nbMfA6LuTapw@mail.gmail.com>

Hi Niccolò

On Tue, Aug 11, 2020 at 10:24 AM Niccolò Marchi
<sciurusurbanus at hotmail.it> wrote:
>
> Reading the description of the QEP I didn’t see great considerations about LAS & LASlib.
>
> From my experience, LAS format is almost a standard for ALS LiDAR data sharing and, even if LAZ is still not well known, the size can be shrinked to 1/10 thanks to it. It has a 2D index that can be easily created through the open source tools of LAStools and it’s definitely well exploited using the streaming filters provided by LASlib (at least in IO operations). For what concerns the visualization, here you can find how it has been solved for the R language (horrible for memory handling) making use of OpenGL.

I have considered LASlib library as well, but for our use case, PDAL
is a superior choice for multiple reasons:
- PDAL supports various different formats and protocols (like e.g.
GDAL does) while LASlib only deals with LAS/LAZ and maybe three more
file-based formats
- PDAL comes with plenty of algorithms for processing of point cloud
data while LASlib does not
- PDAL is being developed as an open community effort while LASlib is
mostly a single-person project

Regarding format support, both LAS & LAZ (among other formats) are of
course going to be supported as PDAL already supports them.

The 2D index from LAStools is useful for processing of data, but not
so much for visualization: if you are rendering point cloud data, you
often need to show the whole extent of the dataset but only using a
small fraction of the dataset. This is where that index from LASlib
does not help as far as I can tell: you want to have a different index
structure where you have data stored in internal nodes so you can
fetch those points quickly without having to traverse large parts of
the dataset.

Thanks for the pointer to PointCloudViewer app - I have not known it before.

Regards
Martin

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Tue Aug 11 09:28:09 2020
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?utf-8?B?Qm91cmRvbiwgSmVhbi1GcmFuw6dvaXMgKERJRik=?=)
Date: Tue, 11 Aug 2020 16:28:09 +0000
Subject: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer
In-Reply-To: <CAB28AsiHgNghP0jVydJpKZ4h3S9o-zWoY03+UR3BvzikBvPyUg@mail.gmail.com>
References: <YT1PR01MB3164180B48CDF1704A806495B3440@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
 <CAB28AsiHgNghP0jVydJpKZ4h3S9o-zWoY03+UR3BvzikBvPyUg@mail.gmail.com>
Message-ID: <YT1PR01MB3164F974AAD490D008500378B3450@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>

Thanks a lot Nyall!
I must say that it's not obvious for a newcomer to see where the problem is and how to fix it. With you pointer, I ended up to one of your answer on GIS SE<https://gis.stackexchange.com/a/312884/109610> to learn how to return FlagNoThreading flag. So it closes my issue with the raster file deletion, but it now causes the same problem elsewhere with the deletion of a shapefile. It's like if QgsVectorFileWriter is now keeping a lock on the shapefile (if a remove this line, the shapefile gets deleted). However, if I use the Package layers tool, I can delete the shapefile without any itch.

# Convert Shapefile to Geopackage with error without threading
path_SHP = "C:/temp/vector.shp"
vlayer_SHP = QgsVectorLayer(path_SHP)
options_GPKG = QgsVectorFileWriter.SaveVectorOptions()
options_GPKG.driverName = "GPKG"
options_GPKG.layerName = "streams"
QgsVectorFileWriter.writeAsVectorFormatV2(vlayer_SHP, "C:/temp/vector_package.gpkg", QgsCoordinateTransformContext(), options_GPKG)

QgsProject.instance().addMapLayer(vlayer_SHP, False)
QgsProject.instance().removeMapLayer(vlayer_SHP.id())
QgsVectorFileWriter.deleteShapeFile(path_SHP)



# Convert Shapefile to Geopackage without error and without threading
path_streams_SHP = "C:/temp/vector.shp"
processing.run("native:package", {'LAYERS':[path_streams_SHP],'OUTPUT':"C:/temp/vector_package.gpkg",'OVERWRITE':True,'SAVE_STYLES':False})
QgsVectorFileWriter.deleteShapeFile(path_streams_SHP)




Jean-François Bourdon, ing.f.
Analyste en télédétection
Direction des inventaires forestiers
Ministère des Forêts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Québec (Québec) G1H 6R1
Téléphone : 418 627-8669, poste 4304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca

-----Message d'origine-----
De : Nyall Dawson [mailto:nyall.dawson at gmail.com]
Envoyé : 10 août 2020 18:46
À : Bourdon, Jean-François (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca>
Cc : qgis-developer at lists.osgeo.org
Objet : Re: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer

On Tue, 11 Aug 2020 at 06:37, Bourdon, Jean-François (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca<mailto:Jean-Francois.Bourdon at mffp.gouv.qc.ca>> wrote:
>
> Hi list,
>
>
>
> I have a very simple problem: I can’t delete a file after loading it with QgsVectorLayer() or QgsRasterLayer() within a script (custom Processing Provider) as I get the error saying the file is still in use. My code to replicate:
>
>
>
> path_raster = "C:/temp/raster.tif"
>
> rlayer = QgsRasterLayer(path_raster, "flow")
>
> QgsProject.instance().addMapLayer(rlayer, False)
>
> QgsProject.instance().removeMapLayer(rlayer.id())
>
> os.remove(path_raster)
>
>
>
> However, the same code directly put inside the Python Console within QGIS works, but it won’t if used inside a Processing Provider plugin. I also tried using del rlayer without success. There is several questions about releasing QGIS’ lock on files on GIS StackExchange (e.g. here and here) but it doesn’t seem to work for everyone. Maybe it was working in version 2.X, but it fails on 3.12 (Windows 10).

I suspect your algorithm is incorrectly running in a thread. You CAN'T do this if your algorithm directly access the project instance -- it's not thread safe and the layers are likely not getting deleted at all.
Try returning the FlagNoThreading flag from your algorithm's flags() override.

Nyall


>
>
>
> Many thanks
>
>
>
> Jean-François Bourdon, ing.f.
>
> Analyste en télédétection
> Direction des inventaires forestiers
> Ministère des Forêts, de la Faune et des Parcs 5700, 4e Avenue Ouest,
> local A-108 Québec (Québec) G1H 6R1 Téléphone : 418 627-8669, poste
> 4304 jean-francois.bourdon at mffp.gouv.qc.ca<mailto:jean-francois.bourdon at mffp.gouv.qc.ca>
> mffp.gouv.qc.ca
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
> List info: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&amp;data=02%7C01%7C%7C72ed7712914543cfa40908d83d7f1f60%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637326963481150210&amp;sdata=6%2FDPX0W3P6BHnYAdJ9%2BX%2FTdD%2BhYQIzeuM5gbMayTEOo%3D&amp;reserved=0
> Unsubscribe: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&amp;data=02%7C01%7C%7C72ed7712914543cfa40908d83d7f1f60%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637326963481150210&amp;sdata=6%2FDPX0W3P6BHnYAdJ9%2BX%2FTdD%2BhYQIzeuM5gbMayTEOo%3D&amp;reserved=0

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200811/79d6c41e/attachment-0001.html>

From azvoleff at conservation.org  Tue Aug 11 14:34:33 2020
From: azvoleff at conservation.org (Alex Zvoleff)
Date: Tue, 11 Aug 2020 21:34:33 +0000
Subject: [QGIS-Developer] Technology competition to support land use
	planning, linked to QGIS
Message-ID: <DM6PR08MB5673E1B4EB3918C00826137AA8450@DM6PR08MB5673.namprd08.prod.outlook.com>

Hi all,

Given it relates to development of open source geospatial tools (with a preference for QGIS, and an explicit requirement to link with a QGIS plugin - Trends.Earth) I thought there might be interest from some on this list in an international technology innovation competition recently announced by the Group on Earth Observations Land Degradation Neutrality (GEO-LDN) Initiative<https://www.geo-ldn.org/competition-overview> to design and build a software analytics solution to support more transparent and well-informed land use decisions at the local to national level.

Proposals are due August 31. If you are interested feel free to reach out to me, or to info at geo-ldn.org<mailto:info at geo-ldn.org> with any questions.

Winning solutions will be promoted by the GEO-LDN Initiative and the UNCCD for use by all countries committed to set voluntary LDN targets and to monitor and report on SDG Indicator 15.3.1  "Proportion of land that is degraded over total land area". The winner(s) of the competition will also benefit from financial and technical support valued at USD 100,000 for the transformation of the prototype into an operational and scalable tool, and a 2-year license for free access to use Google Earth Engine (GEE) as part of their solution.

Best,
Alex

--
Alex Zvoleff, PhD
Senior Director, Resilience Science
Betty and Gordon Moore Center for Science
Conservation International
2011 Crystal Dr. Suite 600, Arlington, Virginia 22202, USA
Tel: +1-703-341-2749, Skype: azvoleff, http://www.conservation.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200811/d9634302/attachment.html>

From nyall.dawson at gmail.com  Tue Aug 11 16:11:01 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 12 Aug 2020 09:11:01 +1000
Subject: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer
In-Reply-To: <YT1PR01MB3164F974AAD490D008500378B3450@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
References: <YT1PR01MB3164180B48CDF1704A806495B3440@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
 <CAB28AsiHgNghP0jVydJpKZ4h3S9o-zWoY03+UR3BvzikBvPyUg@mail.gmail.com>
 <YT1PR01MB3164F974AAD490D008500378B3450@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAB28AsgPeo1yHYX4A87soVhi+5zqcrdDgt69RUqjPSJRdCS=KA@mail.gmail.com>

On Wed, 12 Aug 2020 at 02:28, Bourdon, Jean-François (DIF)
<Jean-Francois.Bourdon at mffp.gouv.qc.ca> wrote:
>
> Thanks a lot Nyall!
> I must say that it's not obvious for a newcomer to see where the problem is and how to fix it. With you pointer, I ended up to one of your answer on GIS SE to learn how to return FlagNoThreading flag. So it closes my issue with the raster file deletion, but it now causes the same problem elsewhere with the deletion of a shapefile.

This one was fixed in recent versions -- either upgrade to 3.14, or
downgrade to the most recent LTR. 3.12 is EOLed and didn't get this
fix.

Nyall


>
> # Convert Shapefile to Geopackage with error without threading
> path_SHP = "C:/temp/vector.shp"
> vlayer_SHP = QgsVectorLayer(path_SHP)
> options_GPKG = QgsVectorFileWriter.SaveVectorOptions()
> options_GPKG.driverName = "GPKG"
> options_GPKG.layerName = "streams"
> QgsVectorFileWriter.writeAsVectorFormatV2(vlayer_SHP, "C:/temp/vector_package.gpkg", QgsCoordinateTransformContext(), options_GPKG)
>
> QgsProject.instance().addMapLayer(vlayer_SHP, False)
> QgsProject.instance().removeMapLayer(vlayer_SHP.id())
> QgsVectorFileWriter.deleteShapeFile(path_SHP)
>
>
>
> # Convert Shapefile to Geopackage without error and without threading
> path_streams_SHP = "C:/temp/vector.shp"
> processing.run("native:package", {'LAYERS':[path_streams_SHP],'OUTPUT':"C:/temp/vector_package.gpkg",'OVERWRITE':True,'SAVE_STYLES':False})
> QgsVectorFileWriter.deleteShapeFile(path_streams_SHP)
>
>
>
>
> Jean-François Bourdon, ing.f.
> Analyste en télédétection
> Direction des inventaires forestiers
> Ministère des Forêts, de la Faune et des Parcs
> 5700, 4e Avenue Ouest, local A-108
> Québec (Québec) G1H 6R1
> Téléphone : 418 627-8669, poste 4304
> jean-francois.bourdon at mffp.gouv.qc.ca
> mffp.gouv.qc.ca
>
> -----Message d'origine-----
> De : Nyall Dawson [mailto:nyall.dawson at gmail.com]
> Envoyé : 10 août 2020 18:46
> À : Bourdon, Jean-François (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca>
> Cc : qgis-developer at lists.osgeo.org
> Objet : Re: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer
>
> On Tue, 11 Aug 2020 at 06:37, Bourdon, Jean-François (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca> wrote:
> >
> > Hi list,
> >
> >
> >
> > I have a very simple problem: I can’t delete a file after loading it with QgsVectorLayer() or QgsRasterLayer() within a script (custom Processing Provider) as I get the error saying the file is still in use. My code to replicate:
> >
> >
> >
> > path_raster = "C:/temp/raster.tif"
> >
> > rlayer = QgsRasterLayer(path_raster, "flow")
> >
> > QgsProject.instance().addMapLayer(rlayer, False)
> >
> > QgsProject.instance().removeMapLayer(rlayer.id())
> >
> > os.remove(path_raster)
> >
> >
> >
> > However, the same code directly put inside the Python Console within QGIS works, but it won’t if used inside a Processing Provider plugin. I also tried using del rlayer without success. There is several questions about releasing QGIS’ lock on files on GIS StackExchange (e.g. here and here) but it doesn’t seem to work for everyone. Maybe it was working in version 2.X, but it fails on 3.12 (Windows 10).
>
> I suspect your algorithm is incorrectly running in a thread. You CAN'T do this if your algorithm directly access the project instance -- it's not thread safe and the layers are likely not getting deleted at all.
> Try returning the FlagNoThreading flag from your algorithm's flags() override.
>
> Nyall
>
>
> >
> >
> >
> > Many thanks
> >
> >
> >
> > Jean-François Bourdon, ing.f.
> >
> > Analyste en télédétection
> > Direction des inventaires forestiers
> > Ministère des Forêts, de la Faune et des Parcs 5700, 4e Avenue Ouest,
> > local A-108 Québec (Québec) G1H 6R1 Téléphone : 418 627-8669, poste
> > 4304 jean-francois.bourdon at mffp.gouv.qc.ca
> > mffp.gouv.qc.ca
> >
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&amp;data=02%7C01%7C%7C72ed7712914543cfa40908d83d7f1f60%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637326963481150210&amp;sdata=6%2FDPX0W3P6BHnYAdJ9%2BX%2FTdD%2BhYQIzeuM5gbMayTEOo%3D&amp;reserved=0
> > Unsubscribe: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&amp;data=02%7C01%7C%7C72ed7712914543cfa40908d83d7f1f60%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637326963481150210&amp;sdata=6%2FDPX0W3P6BHnYAdJ9%2BX%2FTdD%2BhYQIzeuM5gbMayTEOo%3D&amp;reserved=0
>

From nyall.dawson at gmail.com  Tue Aug 11 16:13:39 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 12 Aug 2020 09:13:39 +1000
Subject: [QGIS-Developer] QGIS processing model: extract specific
 attribute of a single feature to a string
In-Reply-To: <a017e0e87b317b60ab722c7b6c90a78f@carto.net>
References: <4b661cc011dd8423736b2375a7ac8560@carto.net>
 <CALymcQCszkwWKkNLOFCgYDLeuXRRq22TEXcgFCey15DohmCYNw@mail.gmail.com>
 <a017e0e87b317b60ab722c7b6c90a78f@carto.net>
Message-ID: <CAB28AsiweXgBvQxBuA-rkpwWJyeqRGVGi2RdacB2Om=_DfWT=Q@mail.gmail.com>

On Tue, 11 Aug 2020 at 18:48, Andreas Neumann <a.neumann at carto.net> wrote:
>
> Hi Ujaval,
>
> Thanks for the "hacky" idea ;-)
>
> I am happy to report that it worked for me.
>
> For the long run, it would be good to have an algorithm to extract a string from an attribute of a selected feature (something like attribute(get_feature(expression_to_get_feature),attribute) ) or at least an "Expression Executor" that outputs a string. Expressions can do a lot, but getting a string output from an Expression seems to be impossible.

This is true -- a number of expressions which work fine in QGIS itself
fail in the modeler. Specifically, any which reference layers directly
which have been created as a result of previous steps in the model
won't work (aggregates, get_feature, etc). Would be good to resolve
this at some stage, but it's not a 5 minute fix (closer to 0.5-1 day).

Given this, I think a simple "get attribute for first feature"
algorithm for use in models could be useful...

Nyall





>
> Anyway, I can progress now with the rest of my model.
>
> Thanks again,
>
> Andreas
>
> On 2020-08-11 10:15, Ujaval Gandhi wrote:
>
> I can think of a slightly hacky way. Use the 'Basic Statistics for Field' algorithm, and since your field will have a single value, use either the Minimum or Maximum value output from it (works for string fields too) as the parameter for another algorithm.
>
> Ujaval Gandhi
> Spatial Thoughts
> mobile: +91-8095684687
> email: ujaval at spatialthoughts.com
>
> Subscribe to our newsletter http://bit.ly/spatialthoughts-newsletter
>
> On Tue, Aug 11, 2020 at 1:23 PM Andreas Neumann <a.neumann at carto.net> wrote:
>
> Hi,
>
> In a model I aggregate values to a single feature. Then I would like to extract a specific aggregated attribute to a string so I can use it as the input parameter of another algorithm.
>
> I fail to find a way to do that. Aggregation works fine, string concatenation as well, but I fail to find a way to extract an attribute of a single feature to a string.
>
> Any ideas?
>
> I'm on QGIS 3.10, but if necessary I could also use a newer QGIS version.
>
> Thanks,
>
> Andreas
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Wed Aug 12 09:52:19 2020
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?utf-8?B?Qm91cmRvbiwgSmVhbi1GcmFuw6dvaXMgKERJRik=?=)
Date: Wed, 12 Aug 2020 16:52:19 +0000
Subject: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer
In-Reply-To: <CAB28AsgPeo1yHYX4A87soVhi+5zqcrdDgt69RUqjPSJRdCS=KA@mail.gmail.com>
References: <YT1PR01MB3164180B48CDF1704A806495B3440@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
 <CAB28AsiHgNghP0jVydJpKZ4h3S9o-zWoY03+UR3BvzikBvPyUg@mail.gmail.com>
 <YT1PR01MB3164F974AAD490D008500378B3450@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>
 <CAB28AsgPeo1yHYX4A87soVhi+5zqcrdDgt69RUqjPSJRdCS=KA@mail.gmail.com>
Message-ID: <YT1PR01MB3164B6CB053F034C4FB57F88B3420@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>

Sorry to come back at this, but it doesn't to be fixed in 3.14 either, at least maybe not completely. I upgraded and got the same problem of sticky lock with algorithms native:fixgeometries() and native:buffer() but it doesn't do it with native:polygonfromlayerextent() or qgis:definecurrentprojection() for exemple. Each time, my input is a path to a Shapefile or Geopackage (not previously loaded) with the output being a path to a new file.


Jean-François Bourdon, ing.f.
Analyste en télédétection
Direction des inventaires forestiers
Ministère des Forêts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Québec (Québec) G1H 6R1
Téléphone : 418 627-8669, poste 4304
jean-francois.bourdon at mffp.gouv.qc.ca 
mffp.gouv.qc.ca

-----Message d'origine-----
De : Nyall Dawson [mailto:nyall.dawson at gmail.com] 
Envoyé : 11 août 2020 19:11
À : Bourdon, Jean-François (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca>
Cc : qgis-developer at lists.osgeo.org
Objet : Re: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer

On Wed, 12 Aug 2020 at 02:28, Bourdon, Jean-François (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca> wrote:
>
> Thanks a lot Nyall!
> I must say that it's not obvious for a newcomer to see where the problem is and how to fix it. With you pointer, I ended up to one of your answer on GIS SE to learn how to return FlagNoThreading flag. So it closes my issue with the raster file deletion, but it now causes the same problem elsewhere with the deletion of a shapefile.

This one was fixed in recent versions -- either upgrade to 3.14, or downgrade to the most recent LTR. 3.12 is EOLed and didn't get this fix.

Nyall


>
> # Convert Shapefile to Geopackage with error without threading 
> path_SHP = "C:/temp/vector.shp"
> vlayer_SHP = QgsVectorLayer(path_SHP)
> options_GPKG = QgsVectorFileWriter.SaveVectorOptions()
> options_GPKG.driverName = "GPKG"
> options_GPKG.layerName = "streams"
> QgsVectorFileWriter.writeAsVectorFormatV2(vlayer_SHP, 
> "C:/temp/vector_package.gpkg", QgsCoordinateTransformContext(), 
> options_GPKG)
>
> QgsProject.instance().addMapLayer(vlayer_SHP, False)
> QgsProject.instance().removeMapLayer(vlayer_SHP.id())
> QgsVectorFileWriter.deleteShapeFile(path_SHP)
>
>
>
> # Convert Shapefile to Geopackage without error and without threading 
> path_streams_SHP = "C:/temp/vector.shp"
> processing.run("native:package", 
> {'LAYERS':[path_streams_SHP],'OUTPUT':"C:/temp/vector_package.gpkg",'O
> VERWRITE':True,'SAVE_STYLES':False})
> QgsVectorFileWriter.deleteShapeFile(path_streams_SHP)
>
>
>
>
> Jean-François Bourdon, ing.f.
> Analyste en télédétection
> Direction des inventaires forestiers
> Ministère des Forêts, de la Faune et des Parcs 5700, 4e Avenue Ouest, 
> local A-108 Québec (Québec) G1H 6R1 Téléphone : 418 627-8669, poste 
> 4304 jean-francois.bourdon at mffp.gouv.qc.ca
> mffp.gouv.qc.ca
>
> -----Message d'origine-----
> De : Nyall Dawson [mailto:nyall.dawson at gmail.com] Envoyé : 10 août 
> 2020 18:46 À : Bourdon, Jean-François (DIF) 
> <Jean-Francois.Bourdon at mffp.gouv.qc.ca>
> Cc : qgis-developer at lists.osgeo.org
> Objet : Re: [QGIS-Developer] Unload QgsVectorLayer/QgsrasterLayer
>
> On Tue, 11 Aug 2020 at 06:37, Bourdon, Jean-François (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca> wrote:
> >
> > Hi list,
> >
> >
> >
> > I have a very simple problem: I can’t delete a file after loading it with QgsVectorLayer() or QgsRasterLayer() within a script (custom Processing Provider) as I get the error saying the file is still in use. My code to replicate:
> >
> >
> >
> > path_raster = "C:/temp/raster.tif"
> >
> > rlayer = QgsRasterLayer(path_raster, "flow")
> >
> > QgsProject.instance().addMapLayer(rlayer, False)
> >
> > QgsProject.instance().removeMapLayer(rlayer.id())
> >
> > os.remove(path_raster)
> >
> >
> >
> > However, the same code directly put inside the Python Console within QGIS works, but it won’t if used inside a Processing Provider plugin. I also tried using del rlayer without success. There is several questions about releasing QGIS’ lock on files on GIS StackExchange (e.g. here and here) but it doesn’t seem to work for everyone. Maybe it was working in version 2.X, but it fails on 3.12 (Windows 10).
>
> I suspect your algorithm is incorrectly running in a thread. You CAN'T do this if your algorithm directly access the project instance -- it's not thread safe and the layers are likely not getting deleted at all.
> Try returning the FlagNoThreading flag from your algorithm's flags() override.
>
> Nyall
>
>
> >
> >
> >
> > Many thanks
> >
> >
> >
> > Jean-François Bourdon, ing.f.
> >
> > Analyste en télédétection
> > Direction des inventaires forestiers Ministère des Forêts, de la 
> > Faune et des Parcs 5700, 4e Avenue Ouest, local A-108 Québec 
> > (Québec) G1H 6R1 Téléphone : 418 627-8669, poste
> > 4304 jean-francois.bourdon at mffp.gouv.qc.ca
> > mffp.gouv.qc.ca
> >
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: 
> > https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fli
> > sts.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&amp;data=02%7C01
> > %7C%7C33604bf340634ac62fc908d83e4bd7d5%7C8705e97737814f4790e1c84c8b8
> > 84da1%7C0%7C0%7C637327842748771566&amp;sdata=1aRkbmsxY9V3jp47oTeLKCP
> > PnURK0PLDs8axqhhraKQ%3D&amp;reserved=0
> > Unsubscribe: 
> > https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fli
> > sts.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&amp;data=02%7C01
> > %7C%7C33604bf340634ac62fc908d83e4bd7d5%7C8705e97737814f4790e1c84c8b8
> > 84da1%7C0%7C0%7C637327842748771566&amp;sdata=1aRkbmsxY9V3jp47oTeLKCP
> > PnURK0PLDs8axqhhraKQ%3D&amp;reserved=0
>

From Mike.Elstermann at itc-halle.de  Wed Aug 12 23:21:33 2020
From: Mike.Elstermann at itc-halle.de (Elstermann, Mike)
Date: Thu, 13 Aug 2020 06:21:33 +0000
Subject: [QGIS-Developer] "convex envelope" obsolete?
Message-ID: <8E7677B1-E7E6-4275-877A-3AD39B646364@itc-halle.de>

Hello everyone,

it may be that the "convex hull" function is out of date. With me it throws errors (in 3.4 at win, 3.14 at win, 3.14 at mac). In the new collection "Minimal Limiting Geometry" the convex hull works perfectly. Can the old function get out then?
See also: https://geoobserver.wordpress.com/2020/08/12/qgis-tipp-umhuellende-geometrien/

Best regards,
mikeE.

From a.neumann at carto.net  Thu Aug 13 00:59:25 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 13 Aug 2020 09:59:25 +0200
Subject: [QGIS-Developer] Cancelling a running processing model
Message-ID: <f091704b06af819005dae843b204ba9c@carto.net>

Hi, 

I am working with processing models these days - and depending on the
data amounts, the algorithms run quite long. 

I noticed that although there is a "Cancel" button, this button has no
effect during the execution of one single algorithm that takes a long
time. Only after the execution of this single algorithm, then the
subsequent algorithms are cancelled. So if, e.g. a buffer algorithm
takes 5 minutes to execute and it is just one part of the whole model,
then if the user presses cancel during the execution of this buffer
algorithm, then he has to wait until the buffer algorithm finishes. Is
this observation correct? 

Note that I am using 3.10, not 3.14 or the latest master - maybe
something has improved in this respect in later versions? 

If nothing was improved in this respect - is there a chance to improve
the situation in the future? 

Thanks for the discussion, 

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200813/f2ca5c1d/attachment.html>

From julien.cabieces at oslandia.com  Thu Aug 13 02:21:24 2020
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Thu, 13 Aug 2020 11:21:24 +0200
Subject: [QGIS-Developer] Cancelling a running processing model
In-Reply-To: <f091704b06af819005dae843b204ba9c@carto.net>
References: <f091704b06af819005dae843b204ba9c@carto.net>
Message-ID: <874kp63nqj.fsf@julien-laptop.home>


Hi

> Hi, 
>
> I am working with processing models these days - and depending on the
> data amounts, the algorithms run quite long. 
>
> I noticed that although there is a "Cancel" button, this button has no
> effect during the execution of one single algorithm that takes a long
> time. Only after the execution of this single algorithm, then the
> subsequent algorithms are cancelled. So if, e.g. a buffer algorithm
> takes 5 minutes to execute and it is just one part of the whole model,
> then if the user presses cancel during the execution of this buffer
> algorithm, then he has to wait until the buffer algorithm finishes. Is
> this observation correct?

No, you can interrupt an algorithm during its execution, but each algorithm
has to check if the user has canceled regularly during the
execution (here for the buffer algorithm for instance:
https://github.com/qgis/QGIS/blob/master/src/analysis/processing/qgsalgorithmbuffer.cpp#L122)

So the time you'll have to wait to finish once you have clicked on the Cancel
button depends on the algorithm itself.

Regarding the buffer algorithm, it could be that the processing is
taking a long time to make the final unaryUnion (in cas of dissolve) at
the end of the processing where isCanceled is not checked.

>
> Note that I am using 3.10, not 3.14 or the latest master - maybe
> something has improved in this respect in later versions? 
>
> If nothing was improved in this respect - is there a chance to improve
> the situation in the future? 
>

I don't think there's a magic solution, it depends on which algorithm
you estimate too slow to interrupt.

> Thanks for the discussion, 
>
> Andreas_______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From nyall.dawson at gmail.com  Thu Aug 13 02:40:41 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 13 Aug 2020 19:40:41 +1000
Subject: [QGIS-Developer] Cancelling a running processing model
In-Reply-To: <874kp63nqj.fsf@julien-laptop.home>
References: <f091704b06af819005dae843b204ba9c@carto.net>
 <874kp63nqj.fsf@julien-laptop.home>
Message-ID: <CAB28Asi3HmJeqvST-FHpNajmjM7w3xayXLj8xiLaCjN+GX=NPg@mail.gmail.com>

On Thu, 13 Aug 2020 at 19:28, Julien Cabieces
<julien.cabieces at oslandia.com> wrote:
>
>
> Hi
>
> > Hi,
> >
> > I am working with processing models these days - and depending on the
> > data amounts, the algorithms run quite long.
> >
> > I noticed that although there is a "Cancel" button, this button has no
> > effect during the execution of one single algorithm that takes a long
> > time. Only after the execution of this single algorithm, then the
> > subsequent algorithms are cancelled. So if, e.g. a buffer algorithm
> > takes 5 minutes to execute and it is just one part of the whole model,
> > then if the user presses cancel during the execution of this buffer
> > algorithm, then he has to wait until the buffer algorithm finishes. Is
> > this observation correct?
>
> No, you can interrupt an algorithm during its execution, but each algorithm
> has to check if the user has canceled regularly during the
> execution (here for the buffer algorithm for instance:
> https://github.com/qgis/QGIS/blob/master/src/analysis/processing/qgsalgorithmbuffer.cpp#L122)
>
> So the time you'll have to wait to finish once you have clicked on the Cancel
> button depends on the algorithm itself.
>
> Regarding the buffer algorithm, it could be that the processing is
> taking a long time to make the final unaryUnion (in cas of dissolve) at
> the end of the processing where isCanceled is not checked.
>
> >
> > Note that I am using 3.10, not 3.14 or the latest master - maybe
> > something has improved in this respect in later versions?
> >
> > If nothing was improved in this respect - is there a chance to improve
> > the situation in the future?
> >
>
> I don't think there's a magic solution, it depends on which algorithm
> you estimate too slow to interrupt.

Just to add to this comprehensive answer -- some providers don't have
any support for canceling algorithms mid-way. The GDAL algorithms
especially are a problem with this, because you can easily fire off a
process which will take hours to complete and have no way to cancel it
apart from killing the qgis session.

(It's totally fixable, just a matter of finding time!)

Nyall

>
> > Thanks for the discussion,
> >
> > Andreas_______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From a.neumann at carto.net  Thu Aug 13 02:57:26 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 13 Aug 2020 11:57:26 +0200
Subject: [QGIS-Developer] Cancelling a running processing model
In-Reply-To: <CAB28Asi3HmJeqvST-FHpNajmjM7w3xayXLj8xiLaCjN+GX=NPg@mail.gmail.com>
References: <f091704b06af819005dae843b204ba9c@carto.net>
 <874kp63nqj.fsf@julien-laptop.home>
 <CAB28Asi3HmJeqvST-FHpNajmjM7w3xayXLj8xiLaCjN+GX=NPg@mail.gmail.com>
Message-ID: <dde369fa7d6eb430a4eea19fa0253ef4@carto.net>

Hi, 

Thank you both Julien and Nyall for your comprehensive replies. 

Yes - I also have the impression that the buffer algorithm isn't
interruptible during dissolving. 

My model contains a number of complex buffer, dissolve and difference
algorithms that take quite some time to execute. 

Good to hear from Nyall that the situation could be improved, if there
would be funding. I'll think about it, but I fear it is not yet on the
top of the priority list of my employer. So far, the processing models
haven't been used much. 

Thanks to both of you, 

Andreas 

On 2020-08-13 11:40, Nyall Dawson wrote:

> On Thu, 13 Aug 2020 at 19:28, Julien Cabieces
> <julien.cabieces at oslandia.com> wrote: 
> 
> Hi
> 
> Hi,
> 
> I am working with processing models these days - and depending on the
> data amounts, the algorithms run quite long.
> 
> I noticed that although there is a "Cancel" button, this button has no
> effect during the execution of one single algorithm that takes a long
> time. Only after the execution of this single algorithm, then the
> subsequent algorithms are cancelled. So if, e.g. a buffer algorithm
> takes 5 minutes to execute and it is just one part of the whole model,
> then if the user presses cancel during the execution of this buffer
> algorithm, then he has to wait until the buffer algorithm finishes. Is
> this observation correct? 
> No, you can interrupt an algorithm during its execution, but each algorithm
> has to check if the user has canceled regularly during the
> execution (here for the buffer algorithm for instance:
> https://github.com/qgis/QGIS/blob/master/src/analysis/processing/qgsalgorithmbuffer.cpp#L122)
> 
> So the time you'll have to wait to finish once you have clicked on the Cancel
> button depends on the algorithm itself.
> 
> Regarding the buffer algorithm, it could be that the processing is
> taking a long time to make the final unaryUnion (in cas of dissolve) at
> the end of the processing where isCanceled is not checked.
> 
> Note that I am using 3.10, not 3.14 or the latest master - maybe
> something has improved in this respect in later versions?
> 
> If nothing was improved in this respect - is there a chance to improve
> the situation in the future?
> 
> I don't think there's a magic solution, it depends on which algorithm
> you estimate too slow to interrupt.

Just to add to this comprehensive answer -- some providers don't have
any support for canceling algorithms mid-way. The GDAL algorithms
especially are a problem with this, because you can easily fire off a
process which will take hours to complete and have no way to cancel it
apart from killing the qgis session.

(It's totally fixable, just a matter of finding time!)

Nyall

>> Thanks for the discussion,
>> 
>> Andreas_______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
 _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200813/f027b155/attachment-0001.html>

From adenaculture at gmail.com  Thu Aug 13 11:40:32 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 13 Aug 2020 14:40:32 -0400
Subject: [QGIS-Developer] Exporting point symbols from processing algorithm
Message-ID: <CABPxTTpee-g03W4hjyXLrTfS1cQGDebPqTWVPQ5ZfeO2Rt-V5A@mail.gmail.com>

I am trying to figure out how to get the proper size to export a point
icon. From a processing algorithm that accepts a vector point layer I have
been able to get the renderer and each symbol.

rnd = layer.renderer()
symbol = rnd.symbol()

The symbol size as listed in the symbology size is

size = symbol.size()

Then I can export the symbol image with.

symbol.exportImage(path,"png", QSize(icon_size, icon_size))

How do I figure out what size QSize needs to be to properly draw the icon?
I am guessing that since the size is in mm or some other unit, there needs
to be a conversion from the symbol size to the icon size. How do I make
that conversion?

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200813/59c9f22b/attachment.html>

From luis3176 at yahoo.com  Thu Aug 13 12:35:44 2020
From: luis3176 at yahoo.com (Luis Eduardo)
Date: Thu, 13 Aug 2020 19:35:44 +0000 (UTC)
Subject: [QGIS-Developer] Working with QgsHistogram seems to be slower than
	Gdal-numpy
References: <1436327486.1347632.1597347344668.ref@mail.yahoo.com>
Message-ID: <1436327486.1347632.1597347344668@mail.yahoo.com>

Greetings, my name is Luis Eduardo, I'm working on a plugin for QGis for general use. The function of the plugin is to create an interface (widget) that displays the histogram of the raster files present and facilitates the analysis of their statistics. Here is a sample (in Spanish)
https://www.linkedin.com/pulse/desarrollo-de-una-interfaz-para-el-an%25C3%25A1lisis-capas-en-perez-graterol
The first version uses Gdal and numpy for data handling, but I was recommended to ensure stability and compatibility to replace Gdal with PyQGis. My doubts:1.- I'm doing it, but, I notice that with only PyQGis, it's slower!2.- The histogram, generated with QgsRasterHistogram and with gdal-numpy-matplotlib, seems to differ in frequencies (I have to check this, it could be because of the non data)
It's my first Plugin, I have several other questions, I'll put them gradually :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200813/d5928d49/attachment.html>

From kalam1993 at gmail.com  Fri Aug 14 04:23:12 2020
From: kalam1993 at gmail.com (Karthikeyan M)
Date: Fri, 14 Aug 2020 16:53:12 +0530
Subject: [QGIS-Developer] SQL in graphic modeller - Reg
Message-ID: <CAAG9oAiHnKYxCquY4+UamWOQ8c8-_4R2X5WwV+aYz+fEyRwx=g@mail.gmail.com>

Hi ,

I'm learning graphic modeller in QGis3. Earlier I used to select only 3
columns ( from 73 coloumn) of attributes by using sql query in DB manager.
I want to create a  model for that. Is there anyway I can use that sql
query to extract particular coloumn from shape files using Graphic modeller
?

Expecting your reply

Regards,
Karthikeyan M
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200814/61b53b10/attachment.html>

From sebastic at xs4all.nl  Fri Aug 14 05:46:50 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 14 Aug 2020 14:46:50 +0200
Subject: [QGIS-Developer] Latest sources jump from 3.14.1 to 3.14.15
Message-ID: <fcb66c67-d3a8-dc33-83d2-e4b3cda37d25@xs4all.nl>

It seems that something is wrong with the new point release, it jumps
from 3.14.1 to 3.14.15.

Shouldn't that be 3.14.2?

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From etienne.trimaille at gmail.com  Fri Aug 14 05:49:25 2020
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Fri, 14 Aug 2020 14:49:25 +0200
Subject: [QGIS-Developer] Latest sources jump from 3.14.1 to 3.14.15
In-Reply-To: <fcb66c67-d3a8-dc33-83d2-e4b3cda37d25@xs4all.nl>
References: <fcb66c67-d3a8-dc33-83d2-e4b3cda37d25@xs4all.nl>
Message-ID: <CAMtDFLKTcQpZnM=TkA2-QTe6iXemQO0XJoqv=UucCNP7w28V7A@mail.gmail.com>

You should follow the roadmap ;-)

https://www.qgis.org/en/site/getinvolved/development/roadmap.html#release-schedule


Le ven. 14 août 2020 à 14:46, Sebastiaan Couwenberg <sebastic at xs4all.nl> a
écrit :

> It seems that something is wrong with the new point release, it jumps
> from 3.14.1 to 3.14.15.
>
> Shouldn't that be 3.14.2?
>
> Kind Regards,
>
> Bas
>
> --
>  GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200814/f2a9f19e/attachment.html>

From sebastic at xs4all.nl  Fri Aug 14 06:03:07 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 14 Aug 2020 15:03:07 +0200
Subject: [QGIS-Developer] Latest sources jump from 3.14.1 to 3.14.15
In-Reply-To: <CAMtDFLKTcQpZnM=TkA2-QTe6iXemQO0XJoqv=UucCNP7w28V7A@mail.gmail.com>
References: <fcb66c67-d3a8-dc33-83d2-e4b3cda37d25@xs4all.nl>
 <CAMtDFLKTcQpZnM=TkA2-QTe6iXemQO0XJoqv=UucCNP7w28V7A@mail.gmail.com>
Message-ID: <2c2bbad7-d03c-5895-c3c2-bc0f9c2ef29b@xs4all.nl>

On 8/14/20 2:49 PM, Etienne Trimaille wrote:
> You should follow the roadmap ;-)

I did, I copied it to my calendar quite some time ago. :-)

> https://www.qgis.org/en/site/getinvolved/development/roadmap.html#release-schedule

So that's a relatively recent change to have the version approximate Pi.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From r.nijssen at terglobo.nl  Fri Aug 14 06:04:27 2020
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Fri, 14 Aug 2020 15:04:27 +0200
Subject: [QGIS-Developer] Latest sources jump from 3.14.1 to 3.14.15
In-Reply-To: <CAMtDFLKTcQpZnM=TkA2-QTe6iXemQO0XJoqv=UucCNP7w28V7A@mail.gmail.com>
References: <fcb66c67-d3a8-dc33-83d2-e4b3cda37d25@xs4all.nl>
 <CAMtDFLKTcQpZnM=TkA2-QTe6iXemQO0XJoqv=UucCNP7w28V7A@mail.gmail.com>
Message-ID: <dc88fe77-c7ba-6293-56c1-8be3db67a478@terglobo.nl>

Are we sure that this is not going to hurt at the next point release??

Looking at things like this:

Qgis.QGIS_VERSION_INT >= 20200


Raymond

On 14-08-2020 14:49, Etienne Trimaille wrote:
> You should follow the roadmap ;-)
> 
> https://www.qgis.org/en/site/getinvolved/development/roadmap.html#release-schedule
> 
> 
> Le ven. 14 août 2020 à 14:46, Sebastiaan Couwenberg <sebastic at xs4all.nl 
> <mailto:sebastic at xs4all.nl>> a écrit :
> 
>     It seems that something is wrong with the new point release, it jumps
>     from 3.14.1 to 3.14.15.
> 
>     Shouldn't that be 3.14.2?
> 
>     Kind Regards,
> 
>     Bas
> 
>     -- 
>       GPG Key ID: 4096R/6750F10AE88D4AF1
>     Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

From senhor.neto at gmail.com  Fri Aug 14 06:26:46 2020
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Fri, 14 Aug 2020 14:26:46 +0100
Subject: [QGIS-Developer] SQL in graphic modeller - Reg
In-Reply-To: <CAAG9oAiHnKYxCquY4+UamWOQ8c8-_4R2X5WwV+aYz+fEyRwx=g@mail.gmail.com>
References: <CAAG9oAiHnKYxCquY4+UamWOQ8c8-_4R2X5WwV+aYz+fEyRwx=g@mail.gmail.com>
Message-ID: <CA+H0G_Fqt90YtfUbkGsrxqic4cpJi9Ox_SqmNhrqCa7FrTuaXA@mail.gmail.com>

Hello,

Have you tried to use the PostgreSQL execute and load algorithm from the
Processing toolbox?

https://docs.qgis.org/testing/en/docs/user_manual/processing_algs/qgis/database.html#postgresql-execute-and-load-sql

Another alternative is to use the Refactor fields tool, where you can
select the columns you want to keep and in which order.

https://docs.qgis.org/testing/en/docs/user_manual/processing_algs/qgis/vectortable.html#refactor-fields

Best regards,

Alexandre Neto
QGIS Support
www.qcooperative.net

A sexta, 14/08/2020, 12:23, Karthikeyan M <kalam1993 at gmail.com> escreveu:

> Hi ,
>
> I'm learning graphic modeller in QGis3. Earlier I used to select only 3
> columns ( from 73 coloumn) of attributes by using sql query in DB manager.
> I want to create a  model for that. Is there anyway I can use that sql
> query to extract particular coloumn from shape files using Graphic modeller
> ?
>
> Expecting your reply
>
> Regards,
> Karthikeyan M
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200814/01b45c58/attachment.html>

From a.neumann at carto.net  Fri Aug 14 06:35:18 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 14 Aug 2020 15:35:18 +0200
Subject: [QGIS-Developer] Model accidentally saved in higher QGIS version
Message-ID: <244a23d2d25188ad8ae81a67ac708c6c@carto.net>

Hi, 

I worked on a rather complex processing model. I normally work in
version 3.10, but once I accidentally (without realizing) opened the
model in 3.15 master and saved it. 

Now I can't open the model accidentally saved in 3.15 in 3.10 anymore. 

I get this error message: 

-------- 

Traceback (most recent call last):
  File
"C:/PROGRA~1/QGIS3~1.10/apps/qgis-ltr/./python/plugins\processing\modeler\ModelerDialog.py",
line 759, in openModel
    self.loadModel(filename)
  File
"C:/PROGRA~1/QGIS3~1.10/apps/qgis-ltr/./python/plugins\processing\modeler\ModelerDialog.py",
line 768, in loadModel
    self.repaintModel()
  File
"C:/PROGRA~1/QGIS3~1.10/apps/qgis-ltr/./python/plugins\processing\modeler\ModelerDialog.py",
line 786, in repaintModel
    self.scene.paintModel(self.model, controls)
  File
"C:/PROGRA~1/QGIS3~1.10/apps/qgis-ltr/./python/plugins\processing\modeler\ModelerScene.py",
line 122, in paintModel
    item = ModelerGraphicItem(alg, model, controls, scene=self)
  File
"C:/PROGRA~1/QGIS3~1.10/apps/qgis-ltr/./python/plugins\processing\modeler\ModelerGraphicItem.py",
line 84, in __init__
    if element.algorithm().svgIconPath():
AttributeError: 'NoneType' object has no attribute 'svgIconPath' 

------------- 

Any chance that I could open my model (a lot of work went into it) in
3.10 again? Some things I would have to strip out in some text editor? 

Thanks for any ideas, 

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200814/da379ba4/attachment.html>

From neviljose at gmail.com  Fri Aug 14 10:47:17 2020
From: neviljose at gmail.com (nevil jose)
Date: Fri, 14 Aug 2020 19:47:17 +0200
Subject: [QGIS-Developer] Attribute value labels for pie chart diagrams
Message-ID: <CAP+CrD=nCr=z7qp0R6j=dRXawmvxZSgAHjYjXQQh4o_Qe6MOgA@mail.gmail.com>

Hi everyone,

I'm using a pie diagram symbology to visualize data on a layer. Is there a
way to display the actual attribute value within each sector of the pie
diagram using PyQGIS?

Thanks,
Nevil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200814/c2246450/attachment.html>

From jef at norbit.de  Fri Aug 14 11:33:48 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 14 Aug 2020 20:33:48 +0200
Subject: [QGIS-Developer] Latest sources jump from 3.14.1 to 3.14.15
In-Reply-To: <dc88fe77-c7ba-6293-56c1-8be3db67a478@terglobo.nl>
References: <fcb66c67-d3a8-dc33-83d2-e4b3cda37d25@xs4all.nl>
 <CAMtDFLKTcQpZnM=TkA2-QTe6iXemQO0XJoqv=UucCNP7w28V7A@mail.gmail.com>
 <dc88fe77-c7ba-6293-56c1-8be3db67a478@terglobo.nl>
Message-ID: <20200814183348.or2fbnqruun22upt@norbit.de>

Hi Raymond,

On Fri, 14. Aug 2020 at 15:04:27 +0200, Raymond Nijssen wrote:
> Are we sure that this is not going to hurt at the next point release??

> Looking at things like this:
 
> Qgis.QGIS_VERSION_INT >= 20200

Ouch.  Yes, I guess we have to round the next one 159 to 16.  I should have
remembered that we already had to change 2.999 to 2.99 for a similar reason.



Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200814/0f982714/attachment.sig>

From r.nijssen at terglobo.nl  Fri Aug 14 23:25:18 2020
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Sat, 15 Aug 2020 08:25:18 +0200
Subject: [QGIS-Developer] Latest sources jump from 3.14.1 to 3.14.15
In-Reply-To: <20200814183348.or2fbnqruun22upt@norbit.de>
References: <fcb66c67-d3a8-dc33-83d2-e4b3cda37d25@xs4all.nl>
 <CAMtDFLKTcQpZnM=TkA2-QTe6iXemQO0XJoqv=UucCNP7w28V7A@mail.gmail.com>
 <dc88fe77-c7ba-6293-56c1-8be3db67a478@terglobo.nl>
 <20200814183348.or2fbnqruun22upt@norbit.de>
Message-ID: <2b2ca31c-9257-e669-d91b-b179ad649e40@terglobo.nl>

Well, luckily pi is not 3.149915... :)

Raymond
(Sorry for being the party pooper)



On 14-08-2020 20:33, Jürgen E. Fischer wrote:
> Hi Raymond,
> 
> On Fri, 14. Aug 2020 at 15:04:27 +0200, Raymond Nijssen wrote:
>> Are we sure that this is not going to hurt at the next point release??
> 
>> Looking at things like this:
>   
>> Qgis.QGIS_VERSION_INT >= 20200
> 
> Ouch.  Yes, I guess we have to round the next one 159 to 16.  I should have
> remembered that we already had to change 2.999 to 2.99 for a similar reason.
> 
> 
> 
> Jürgen
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

From enzedrailmaps at gmail.com  Sat Aug 15 11:44:42 2020
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Sun, 16 Aug 2020 06:44:42 +1200
Subject: [QGIS-Developer] Deploying 3.10.8 LTR on Debian 10
In-Reply-To: <2d0b6c04-e612-b7b8-cc41-7021ca08f571@gmail.com>
References: <60eb76c1-8e11-2035-ec85-77fe40d3b73c@gmail.com>
 <9fdc8ad0-fd42-2bc1-cebc-56037f6fcf38@xs4all.nl>
 <CAKf=SAfnzvh2mtB8Cn4cvaFnGo+5jjRtdL-JiX5-EBPxeCm3gg@mail.gmail.com>
 <b1705759-1151-98d8-32de-e5568a9ca18d@xs4all.nl>
 <8ed17879-51f9-ae29-a6ba-f2593a6d7fea@gmail.com>
 <2d0b6c04-e612-b7b8-cc41-7021ca08f571@gmail.com>
Message-ID: <77451f1a-c458-ccba-a2b3-a082591496c5@gmail.com>

Good day

The issue seems to be resolved fo both stable and LTR since new builds 
appeared on the Qgis server on August 8.



From tim at kartoza.com  Sun Aug 16 01:28:25 2020
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 16 Aug 2020 09:28:25 +0100
Subject: [QGIS-Developer] Inconsistencies in QGIS ini path
Message-ID: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>

Hi all

I have been busy migrating my machine from macOS to Linux / PopOS and I
noticed some strange behaviour with how paths for .ini files are stored
when restoring my QGIS settings folder from macOSy. I installed both a
flatpack version of QGIS (which gets you 3.14 on Pop) and the deb version
(gets you 3.10 on Pop). Here is where the various installations put the
.ini file:

PopOS Flatpack prefix:

~/.var/app/org.qgis.qgis/data

PopOS Flatpack ini:

<PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/*QGIS*/QGIS3.ini

PopOS Deb prefix:

~/.local/share/

PopOS deb ini:

<PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/*QGIS*/QGIS3.ini

macOS all in one DMG prefix:

~/Library/Application\ Support

macOS all in one DMG ini:

<PREFIX>/QGIS3/profiles/<PROFILE NAME>/*qgis.org <http://qgis.org>*/QGIS3.ini


It is a minor difference between QGIS and qgis.org for the ini directory
but it does mean that you cannot just copy profiles between machines and
users and they 'just work' Does anyone know why we use different paths on
different platforms?


BTW has anyone had any contact with the person making flatpack recipes? I
have some other flatpack install related issues to share...

Regards

Tim


-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200816/a606be31/attachment.html>

From nyall.dawson at gmail.com  Sun Aug 16 15:20:14 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 17 Aug 2020 08:20:14 +1000
Subject: [QGIS-Developer] Inconsistencies in QGIS ini path
In-Reply-To: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>
References: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>
Message-ID: <CAB28Asi7fahOThjWHE8=0326jKLZRuptAGxjLzP5r6nhwEB8Mw@mail.gmail.com>

On Sun, 16 Aug 2020 at 18:28, Tim Sutton <tim at kartoza.com> wrote:
>
> PopOS Flatpack ini:
>
> <PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/QGIS/QGIS3.ini

> PopOS deb ini:
>
> <PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/QGIS/QGIS3.ini
>
> macOS all in one DMG ini:
>
> <PREFIX>/QGIS3/profiles/<PROFILE NAME>/qgis.org/QGIS3.ini
>

These ones are all following the operating system's guidance for
storing local configuration. Is this an issue? I'd expect most of the
configuration inside the user profile to be storing relative paths to
the profile folder, not absolute. If not, do you have examples of
settings which store absolute paths?

> PopOS Deb prefix:
>
> ~/.local/share/
>
> macOS all in one DMG prefix:
>
> ~/Library/Application\ Support

Can you elaborate again on why this change break things? Do some
settings have these paths hardcoded in?

> BTW has anyone had any contact with the person making flatpack recipes? I have some other flatpack install related issues to share...

I'll forward you Aleix Pol's email off-list. He's very responsive and
extremely knowledgeable about flatpack!

Nyall



>
> Regards
>
> Tim
>
>
> --
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Sun Aug 16 15:21:28 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 17 Aug 2020 08:21:28 +1000
Subject: [QGIS-Developer] Attribute value labels for pie chart diagrams
In-Reply-To: <CAP+CrD=nCr=z7qp0R6j=dRXawmvxZSgAHjYjXQQh4o_Qe6MOgA@mail.gmail.com>
References: <CAP+CrD=nCr=z7qp0R6j=dRXawmvxZSgAHjYjXQQh4o_Qe6MOgA@mail.gmail.com>
Message-ID: <CAB28AsgLh6DcC8oKC6oGjNBYLJwkXTGZaz-RJ+C2Bj_a7CkbBQ@mail.gmail.com>

On Sat, 15 Aug 2020 at 03:47, nevil jose <neviljose at gmail.com> wrote:
>
> Hi everyone,
>
> I'm using a pie diagram symbology to visualize data on a layer. Is there a way to display the actual attribute value within each sector of the pie diagram using PyQGIS?

Not currently. Would be a great feature to add though if you feel like
jumping into QGIS development. I'd happily mentor this one.

Nyall

>
> Thanks,
> Nevil
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Sun Aug 16 15:26:25 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 17 Aug 2020 08:26:25 +1000
Subject: [QGIS-Developer] Exporting point symbols from processing
	algorithm
In-Reply-To: <CABPxTTpee-g03W4hjyXLrTfS1cQGDebPqTWVPQ5ZfeO2Rt-V5A@mail.gmail.com>
References: <CABPxTTpee-g03W4hjyXLrTfS1cQGDebPqTWVPQ5ZfeO2Rt-V5A@mail.gmail.com>
Message-ID: <CAB28AsgoYnyWpKE-3jLkvQdxUQaHaU4cE5FH4-nUtr1hBgKxBA@mail.gmail.com>

On Fri, 14 Aug 2020 at 04:40, C Hamilton <adenaculture at gmail.com> wrote:
>
> I am trying to figure out how to get the proper size to export a point icon. From a processing algorithm that accepts a vector point layer I have been able to get the renderer and each symbol.
>
> rnd = layer.renderer()
> symbol = rnd.symbol()
>
> The symbol size as listed in the symbology size is
>
> size = symbol.size()
>
> Then I can export the symbol image with.
>
> symbol.exportImage(path,"png", QSize(icon_size, icon_size))
>
> How do I figure out what size QSize needs to be to properly draw the icon? I am guessing that since the size is in mm or some other unit, there needs to be a conversion from the symbol size to the icon size. How do I make that conversion?

Correct -- you also need to check sizeUnit and sizeMapUnitScale in
order to get all the information about the marker's size. This gets
evaluated for a particular rendering operation through the
QgsRenderContext class. Specifically, the
QgsRenderContext::convertToPainterUnits() method.

Typical code looks like this:

    scaled_size_in_pixels = context.convertToPainterUnits(
marker_symbol_layer.size(), marker_symbol_layer.sizeUnit(),
marker_symbol_layer.sizeMapUnitScale() )


As far as creating a render context goes -- the easiest way is via
QgsRenderContext.fromMapSettings(). You create a QgsMapSettings
object, set it all up with the desired map scale and extent, etc, and
then convert it to a render context. This ensures that regardless of
the size units used by the symbol (e.g. if it's in map units) it will
be correctly sized...

Nyall


>
> Thanks,
>
> Calvin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From gb_nedjima at esi.dz  Sun Aug 16 23:27:04 2020
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Mon, 17 Aug 2020 07:27:04 +0100
Subject: [QGIS-Developer] [SoC] GSoC 2020 - Coding Period Week 11 Report
Message-ID: <CAGiKOuiQy2stT6uk4_0uTkA=ZOQpb0MezN2pKg5qH=55gr2QXQ@mail.gmail.com>

Hi,
This is my report for this week:

   - Tasks done:
      - Finished converting Qt3D shadow mapping tutorial code to pure
C++ (github
      repository <https://github.com/NEDJIMAbelgacem/Qt3D-shadow-maps-CPP>).
      - Implemented the custom frame graph for a post processing effect
      with a shader for QGIS (which will eventually be for shadows).
      - Test post processing pass with some kernels from wikipedia (kernels
      wikipedia page
      <https://en.wikipedia.org/wiki/Kernel_(image_processing)>).
   - Screenshots:
      - Shadow rendering using Qt3D C++ only
      <https://i.imgur.com/lTK4PTy.png>
      - edge detection kernel running as post processing render pass in QGIS
      <https://i.imgur.com/UwaqIt3.png>
   - Tasks to be done:
      - Finish the shadow rendering in QGIS 3D view.
      - Experiment with some techniques to improve or parametrize the
      shadows quality.
      - Make a pull request to the QGIS repository.
   - Blocking issues: None

Any suggestion or feedback is always welcome.
Best wishes,


-- 
Belgacem Nedjima
4th year computer science and engineering student.
https://github.com/NEDJIMAbelgacem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200817/7850c9e7/attachment.html>

From tim at kartoza.com  Mon Aug 17 00:23:06 2020
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 17 Aug 2020 08:23:06 +0100
Subject: [QGIS-Developer] Inconsistencies in QGIS ini path
In-Reply-To: <CAB28Asi7fahOThjWHE8=0326jKLZRuptAGxjLzP5r6nhwEB8Mw@mail.gmail.com>
References: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>
 <CAB28Asi7fahOThjWHE8=0326jKLZRuptAGxjLzP5r6nhwEB8Mw@mail.gmail.com>
Message-ID: <CAES-DZSQ_ttu+GPX9H_2enVOHF8iPMHzaM8uJDJaQwMO8V1PfQ@mail.gmail.com>

HI

On Sun, Aug 16, 2020 at 11:20 PM Nyall Dawson <nyall.dawson at gmail.com>
wrote:

> On Sun, 16 Aug 2020 at 18:28, Tim Sutton <tim at kartoza.com> wrote:
> >
> > PopOS Flatpack ini:
> >
> > <PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/QGIS/QGIS3.ini
>
> > PopOS deb ini:
> >
> > <PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/QGIS/QGIS3.ini
> >
> > macOS all in one DMG ini:
> >
> > <PREFIX>/QGIS3/profiles/<PROFILE NAME>/qgis.org/QGIS3.ini
> >
>
> These ones are all following the operating system's guidance for
> storing local configuration. Is this an issue? I'd expect most of the
> configuration inside the user profile to be storing relative paths to
> the profile folder, not absolute. If not, do you have examples of
> settings which store absolute paths?
>


> > PopOS Deb prefix:
> >
> > ~/.local/share/
> >
> > macOS all in one DMG prefix:
> >
> > ~/Library/Application\ Support
>
> Can you elaborate again on why this change break things? Do some
> settings have these paths hardcoded in?
>
>
Oh sorry I didnt state my issue very well! Absolutely no issue having
different prefixes, my concern are the parts after the profile name that
differ between linux and macOS. Isnt that something defined by ourselves?
Assuming I drop my config folder (everything after prefix) onto another OS
I was expecting everything to 'just work', but because of path differences
within a profile it doesn't.



> > BTW has anyone had any contact with the person making flatpack recipes?
> I have some other flatpack install related issues to share...
>
> I'll forward you Aleix Pol's email off-list. He's very responsive and
> extremely knowledgeable about flatpack!
>

Awesome, thanks!

Regards

Tim




>
> Nyall
>
>
>
> >
> > Regards
> >
> > Tim
> >
> >
> > --
> >
> ------------------------------------------------------------------------------------------
> >
> > Tim Sutton
> > Visit http://kartoza.com to find out about open source:
> >  * Desktop GIS programming services
> >  * Geospatial web development
> > * GIS Training
> > * Consulting Services
> > Skype: timlinux Irc: timlinux on #qgis at freenode.net
> > Tim is a member of the QGIS Project Steering Committee
> >
> -------------------------------------------------------------------------------------------
> > Kartoza is a merger between Linfiniti and Afrispatial
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200817/b69cd126/attachment-0001.html>

From rdmailings at duif.net  Mon Aug 17 04:32:20 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 17 Aug 2020 13:32:20 +0200
Subject: [QGIS-Developer] Inconsistencies in QGIS ini path
In-Reply-To: <CAES-DZSQ_ttu+GPX9H_2enVOHF8iPMHzaM8uJDJaQwMO8V1PfQ@mail.gmail.com>
References: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>
 <CAB28Asi7fahOThjWHE8=0326jKLZRuptAGxjLzP5r6nhwEB8Mw@mail.gmail.com>
 <CAES-DZSQ_ttu+GPX9H_2enVOHF8iPMHzaM8uJDJaQwMO8V1PfQ@mail.gmail.com>
Message-ID: <c9b0806b-7fdb-7b6a-3bc0-a8c68f67b1f1@duif.net>

On 8/17/20 9:23 AM, Tim Sutton wrote:
> 
> On Sun, Aug 16, 2020 at 11:20 PM Nyall Dawson <nyall.dawson at gmail.com <mailto:nyall.dawson at gmail.com>> wrote:
> 
>     On Sun, 16 Aug 2020 at 18:28, Tim Sutton <tim at kartoza.com <mailto:tim at kartoza.com>> wrote:
>     >
>     > PopOS Flatpack ini:
>     >
>     > <PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/QGIS/QGIS3.ini
> 
>     > PopOS deb ini:
>     >
>     > <PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/QGIS/QGIS3.ini
>     >
>     > macOS all in one DMG ini:
>     >
>     > <PREFIX>/QGIS3/profiles/<PROFILE NAME>/qgis.org/QGIS3.ini <http://qgis.org/QGIS3.ini>
>     >
> 
>     These ones are all following the operating system's guidance for
>     storing local configuration. Is this an issue? I'd expect most of the
>     configuration inside the user profile to be storing relative paths to
>     the profile folder, not absolute. If not, do you have examples of
>     settings which store absolute paths?

Hi Tim,

Only 'difference' I see is between the macOS and the other ones?
One thing to know it that because of the 'sandboxing' flatpack does not store it's stuff in the same place as a Linux distro does (in ~/.local/share).

Maybe there is some 'APPLICATION' name in the path's? And that differs on macOS dmg's?
Although:
https://github.com/qgis/QGIS/blob/master/src/core/qgsapplication.cpp#L204
looks like it is a Qt thing:

 QStandardPaths::standardLocations( QStandardPaths::AppDataLocation ).value( 0 );

With me here (having both my own builds AND flatpaks), running:

QStandardPaths.standardLocations(QStandardPaths.AppDataLocation)
in the pythonconsole shows:
[
 '/home/richard/.local/share/QGIS/QGIS3', 
 '/usr/share/gnome/QGIS/QGIS3',
 '/home/richard/.local/share/flatpak/exports/share/QGIS/QGIS3',
 '/var/lib/flatpak/exports/share/QGIS/QGIS3',
 '/usr/local/share/QGIS/QGIS3',
 '/usr/share/QGIS/QGIS3'
]

Can you test this on a mac?

IF it is different, I think it is better to adhere to Qt-standards then to build those path's ourselves?

Regards,

Richard Duivenvoorde

From tim at kartoza.com  Mon Aug 17 07:56:37 2020
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 17 Aug 2020 15:56:37 +0100
Subject: [QGIS-Developer] Inconsistencies in QGIS ini path
In-Reply-To: <c9b0806b-7fdb-7b6a-3bc0-a8c68f67b1f1@duif.net>
References: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>
 <CAB28Asi7fahOThjWHE8=0326jKLZRuptAGxjLzP5r6nhwEB8Mw@mail.gmail.com>
 <CAES-DZSQ_ttu+GPX9H_2enVOHF8iPMHzaM8uJDJaQwMO8V1PfQ@mail.gmail.com>
 <c9b0806b-7fdb-7b6a-3bc0-a8c68f67b1f1@duif.net>
Message-ID: <CAES-DZRpQ+xEvQPdXG18sYJH5S+hzg8JdzXMheqhec+0kt=naw@mail.gmail.com>

Hi Richard

Thanks for your reply - see below for inline responses:

On Mon, Aug 17, 2020 at 12:32 PM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 8/17/20 9:23 AM, Tim Sutton wrote:
> >
> > On Sun, Aug 16, 2020 at 11:20 PM Nyall Dawson <nyall.dawson at gmail.com
> <mailto:nyall.dawson at gmail.com>> wrote:
> >
> >     On Sun, 16 Aug 2020 at 18:28, Tim Sutton <tim at kartoza.com <mailto:
> tim at kartoza.com>> wrote:
> >     >
> >     > PopOS Flatpack ini:
> >     >
> >     > <PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/QGIS/QGIS3.ini
> >
> >     > PopOS deb ini:
> >     >
> >     > <PREFIX>/QGIS/QGIS3/profiles/<PROFILE NAME>/QGIS/QGIS3.ini
> >     >
> >     > macOS all in one DMG ini:
> >     >
> >     > <PREFIX>/QGIS3/profiles/<PROFILE NAME>/qgis.org/QGIS3.ini <
> http://qgis.org/QGIS3.ini>
> >     >
> >
> >     These ones are all following the operating system's guidance for
> >     storing local configuration. Is this an issue? I'd expect most of the
> >     configuration inside the user profile to be storing relative paths to
> >     the profile folder, not absolute. If not, do you have examples of
> >     settings which store absolute paths?
>
> Hi Tim,
>
> Only 'difference' I see is between the macOS and the other ones?
>

Correct - I put the two different linux based packages in to show they are
consistent.



> One thing to know it that because of the 'sandboxing' flatpack does not
> store it's stuff in the same place as a Linux distro does (in
> ~/.local/share).
>

Yup




>
> Maybe there is some 'APPLICATION' name in the path's? And that differs on
> macOS dmg's?
> Although:
> https://github.com/qgis/QGIS/blob/master/src/core/qgsapplication.cpp#L204
> looks like it is a Qt thing:
>
>  QStandardPaths::standardLocations( QStandardPaths::AppDataLocation
> ).value( 0 );
>
> With me here (having both my own builds AND flatpaks), running:
>
> QStandardPaths.standardLocations(QStandardPaths.AppDataLocation)
> in the pythonconsole shows:
> [
>  '/home/richard/.local/share/QGIS/QGIS3',
>  '/usr/share/gnome/QGIS/QGIS3',
>  '/home/richard/.local/share/flatpak/exports/share/QGIS/QGIS3',
>  '/var/lib/flatpak/exports/share/QGIS/QGIS3',
>  '/usr/local/share/QGIS/QGIS3',
>  '/usr/share/QGIS/QGIS3'
> ]
>
> Can you test this on a mac?
>

Heheh once you leave mac, you can never go back :-) Hopefully someone
looking in from macOSland on the list here if they can test.



>
> IF it is different, I think it is better to adhere to Qt-standards then to
> build those path's ourselves?
>

Well the issue I am trying to highlight is that the config folder as
currently implemented is not portable. I thought it was part of the design
intent of switching to ini based configs way back that there was a
homogenous system for managing configurations. Currently having <PROFILE
NAME>/qgis.org/QGIS3.ini on a mac and <PROFILE NAME>/QGIS/QGIS3.ini on
linux (curious to know what Windows does) breaks the principle of least
surprise and means that your settings folder isn't portable between
machines when it easily could be,

Regards

Tim




>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200817/ee458730/attachment.html>

From rdmailings at duif.net  Mon Aug 17 08:44:45 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 17 Aug 2020 17:44:45 +0200
Subject: [QGIS-Developer] Inconsistencies in QGIS ini path
In-Reply-To: <CAES-DZRpQ+xEvQPdXG18sYJH5S+hzg8JdzXMheqhec+0kt=naw@mail.gmail.com>
References: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>
 <CAB28Asi7fahOThjWHE8=0326jKLZRuptAGxjLzP5r6nhwEB8Mw@mail.gmail.com>
 <CAES-DZSQ_ttu+GPX9H_2enVOHF8iPMHzaM8uJDJaQwMO8V1PfQ@mail.gmail.com>
 <c9b0806b-7fdb-7b6a-3bc0-a8c68f67b1f1@duif.net>
 <CAES-DZRpQ+xEvQPdXG18sYJH5S+hzg8JdzXMheqhec+0kt=naw@mail.gmail.com>
Message-ID: <ec362922-21be-469e-c2dd-e31d1c357f66@duif.net>

On 8/17/20 4:56 PM, Tim Sutton wrote:
> 
>     IF it is different, I think it is better to adhere to Qt-standards then to build those path's ourselves?
> 
> 
> Well the issue I am trying to highlight is that the config folder as currently implemented is not portable. I thought it was part of the design intent of switching to ini based configs way back that there was a homogenous system for managing configurations. Currently having <PROFILE NAME>/qgis.org/QGIS3.ini <http://qgis.org/QGIS3.ini> on a mac and <PROFILE NAME>/QGIS/QGIS3.ini on linux (curious to know what Windows does) breaks the principle of least surprise and means that your settings folder isn't portable between machines when it easily could be,

Searching for the "qgis.org' string in:

https://github.com/qgis/QGIS-Mac-Packager/

There is:
cp scripts/org.qgis.build.plist ~/Library/LaunchAgents/
plutil ~/Library/LaunchAgents/org.qgis.build.plist 
launchctl load ~/Library/LaunchAgents/org.qgis.build.plist

maybe that determiines the app-name? (org.qgis), so maybe we can make that QGIS ?

Would that help?

Regards,

Richard


From delazj at gmail.com  Mon Aug 17 08:54:40 2020
From: delazj at gmail.com (DelazJ)
Date: Mon, 17 Aug 2020 17:54:40 +0200
Subject: [QGIS-Developer] Inconsistencies in QGIS ini path
In-Reply-To: <CAES-DZRpQ+xEvQPdXG18sYJH5S+hzg8JdzXMheqhec+0kt=naw@mail.gmail.com>
References: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>
 <CAB28Asi7fahOThjWHE8=0326jKLZRuptAGxjLzP5r6nhwEB8Mw@mail.gmail.com>
 <CAES-DZSQ_ttu+GPX9H_2enVOHF8iPMHzaM8uJDJaQwMO8V1PfQ@mail.gmail.com>
 <c9b0806b-7fdb-7b6a-3bc0-a8c68f67b1f1@duif.net>
 <CAES-DZRpQ+xEvQPdXG18sYJH5S+hzg8JdzXMheqhec+0kt=naw@mail.gmail.com>
Message-ID: <CAECJsSo2frC5mWxucp2WBBViawRJWrgYQVPfTKFuLTv9rKM0eA@mail.gmail.com>

Hi,


Le lun. 17 août 2020 à 16:56, Tim Sutton <tim at kartoza.com> a écrit :

> Hi Richard
>
> Thanks for your reply - see below for inline responses:
>
> On Mon, Aug 17, 2020 at 12:32 PM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
>> On 8/17/20 9:23 AM, Tim Sutton wrote:
>>
> [...]

QStandardPaths.standardLocations(QStandardPaths.AppDataLocation)
>> in the pythonconsole shows:
>> [
>>  '/home/richard/.local/share/QGIS/QGIS3',
>>  '/usr/share/gnome/QGIS/QGIS3',
>>  '/home/richard/.local/share/flatpak/exports/share/QGIS/QGIS3',
>>  '/var/lib/flatpak/exports/share/QGIS/QGIS3',
>>  '/usr/local/share/QGIS/QGIS3',
>>  '/usr/share/QGIS/QGIS3'
>> ]
>>
>> Can you test this on a mac?
>>
>
> Heheh once you leave mac, you can never go back :-) Hopefully someone
> looking in from macOSland on the list here if they can test.
>
> On a mac, I get (using 3.10 from the all-in-one installer)
>> QStandardPaths.standardLocations(QStandardPaths.AppDataLocation)
['/Users/harrissou/Library/Application Support/QGIS/QGIS3',
'/Library/Application Support/QGIS/QGIS3',
'/Applications/QGIS3.10.app/Contents/Resources']

On Windows, using an osgeo4w advanced install, with master:
['C:/Users/harrissou/AppData/Roaming/QGIS/QGIS3',
'C:/ProgramData/QGIS/QGIS3',
'C:/OSGEO4W64/bin',
'C:/OSGEO4W64/bin/data',
'C:/OSGEO4W64/bin/data/QGIS/QGIS3']

HTH,
Harrissou

>
>
>>
>> IF it is different, I think it is better to adhere to Qt-standards then
>> to build those path's ourselves?
>>
>
> Well the issue I am trying to highlight is that the config folder as
> currently implemented is not portable. I thought it was part of the design
> intent of switching to ini based configs way back that there was a
> homogenous system for managing configurations. Currently having <PROFILE
> NAME>/qgis.org/QGIS3.ini on a mac and <PROFILE NAME>/QGIS/QGIS3.ini on
> linux (curious to know what Windows does) breaks the principle of least
> surprise and means that your settings folder isn't portable between
> machines when it easily could be,
>
> Regards
>
> Tim
>
>
>
>
>>
>> Regards,
>>
>> Richard Duivenvoorde
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
>
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200817/211f86d6/attachment-0001.html>

From adenaculture at gmail.com  Mon Aug 17 08:59:46 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 17 Aug 2020 11:59:46 -0400
Subject: [QGIS-Developer] Exporting point symbols from processing
	algorithm
In-Reply-To: <CAB28AsgoYnyWpKE-3jLkvQdxUQaHaU4cE5FH4-nUtr1hBgKxBA@mail.gmail.com>
References: <CABPxTTpee-g03W4hjyXLrTfS1cQGDebPqTWVPQ5ZfeO2Rt-V5A@mail.gmail.com>
 <CAB28AsgoYnyWpKE-3jLkvQdxUQaHaU4cE5FH4-nUtr1hBgKxBA@mail.gmail.com>
Message-ID: <CABPxTToQJ4-UuxvNe3wBv8Z7s+kdZR17BNsnWWbO55bXFhMGQw@mail.gmail.com>

Nyall,

As usual thank you so much for your answers. I have one further question
with this. You said I need to set SqgMapSettings with the map scale and
extent. I probably want the map scale and extent from the canvas, but in a
processing algorithm I don't know how to get that information.

Thanks,

Calvin

As far as creating a render context goes -- the easiest way is via
> QgsRenderContext.fromMapSettings(). You create a QgsMapSettings
> object, set it all up with the desired map scale and extent, etc, and
> then convert it to a render context. This ensures that regardless of
> the size units used by the symbol (e.g. if it's in map units) it will
> be correctly sized...
>
> Nyall
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200817/f2fe2d6b/attachment.html>

From jason at joines.org  Mon Aug 17 14:12:20 2020
From: jason at joines.org (Jason Paul Joines)
Date: Mon, 17 Aug 2020 17:12:20 -0400 (EDT)
Subject: [QGIS-Developer] libqt5core5a and qtbase-abi dependencies in qgis
 3.14.5 deb package
Message-ID: <alpine.DEB.2.22.394.2008171643400.28091@joines.org>

QGIS Devs,

         The Debian/Ubuntu DEB package of QGIS 3.14.15 from https://qgis.org/debian has a dependencie of libqt5core5a (>= 5.12.2).  However, when I try to install it on a system with libqt5core5a 5.14.2, it fails when it pulls in qgis-providers.  qgis-providers, in addition to depending on "libqt5core5a (>= 5.12.2)", also depends on "qtbase-abi-5-12-8".  qtbase-abi-5-12-8 is provided by libqt5core5a 5.12.8, so the effective dependency is libqt5core5a between 5.12.2 and 5.12.8.  Would it cause any problems to change the dependency of qgis-providers to eliminate qtbase-abi-5-12-8, since that can be handled by dependency on the ABI provider, libqt5core5a?

         I'm using KDE neon User Edition 5.19 (Ubuntu 20.04 with rolling updates of KDE).  Modifying libqt5core5a to claim it provides both qtbase-abi-5-14-2 and qtbase-abi-5-12-8, and installing that, resulted in QGIS installing and running just fine.


Jason
===========

From regis.haubourg at gmail.com  Tue Aug 18 01:31:25 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Tue, 18 Aug 2020 10:31:25 +0200
Subject: [QGIS-Developer] focal eoan on
	https://qgis.org/ubuntugis-ltr/dists/ ?
Message-ID: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>

Hi all, (Hi Jürgen),

I'm looking at the ubuntugis builds for ubuntu/ debian. Currently we only
have builds for the following


   - bionic
   - precise
   - trusty
   - xenial

They look a bit old especially regarding Qt versions.

Having a look to
http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu/dists/ they
seem to support also focal.
How could we have our builds supporting focal with ubuntugis dependencies?

Best regards

Régis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/95747e57/attachment.html>

From denis.rouzaud at gmail.com  Tue Aug 18 01:36:03 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Tue, 18 Aug 2020 10:36:03 +0200
Subject: [QGIS-Developer] focal eoan on
 https://qgis.org/ubuntugis-ltr/dists/ ?
In-Reply-To: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>
References: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>
Message-ID: <CAMtsY+bs1g18y4qxda71f=FSG6dvoecfeGO=TqyYr2DnEivq5A@mail.gmail.com>

The PPAs were renamed:
https://qgis.org/ubuntu-ltr/dists/
https://qgis.org/ubuntu/dists/ <https://qgis.org/ubuntu-ltr/dists/>

Focal is here :)

Le mar. 18 août 2020 à 10:32, Régis Haubourg <regis.haubourg at gmail.com> a
écrit :

> Hi all, (Hi Jürgen),
>
> I'm looking at the ubuntugis builds for ubuntu/ debian. Currently we only
> have builds for the following
>
>
>    - bionic
>    - precise
>    - trusty
>    - xenial
>
> They look a bit old especially regarding Qt versions.
>
> Having a look to
> http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu/dists/ they
> seem to support also focal.
> How could we have our builds supporting focal with ubuntugis dependencies?
>
> Best regards
>
> Régis
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/2c29f66f/attachment.html>

From sebastic at xs4all.nl  Tue Aug 18 01:41:12 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 18 Aug 2020 10:41:12 +0200
Subject: [QGIS-Developer] focal eoan on
 https://qgis.org/ubuntugis-ltr/dists/ ?
In-Reply-To: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>
References: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>
Message-ID: <2ac1e5cb-c242-968d-79e0-1c22fa722004@xs4all.nl>

On 8/18/20 10:31 AM, Régis Haubourg wrote:
> Having a look to
> http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu/dists/ they
> seem to support also focal.

Note that only grass is currently available for focal in the
ubuntugis-unstable PPA:

 https://launchpad.net/~ubuntugis/+archive/ubuntu/ubuntugis-unstable/+packages?field.status_filter=published&field.series_filter=focal

> How could we have our builds supporting focal with ubuntugis dependencies?

That added value of focal builds with UbuntuGIS dependencies is very
little at time of writing.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From regis.haubourg at gmail.com  Tue Aug 18 01:42:30 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Tue, 18 Aug 2020 10:42:30 +0200
Subject: [QGIS-Developer] focal eoan on
 https://qgis.org/ubuntugis-ltr/dists/ ?
In-Reply-To: <CAMtsY+bs1g18y4qxda71f=FSG6dvoecfeGO=TqyYr2DnEivq5A@mail.gmail.com>
References: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>
 <CAMtsY+bs1g18y4qxda71f=FSG6dvoecfeGO=TqyYr2DnEivq5A@mail.gmail.com>
Message-ID: <CABgOYCdwmSvPUo5_WKUoxc9dumG=NsG=wu0fMbeSoZ2B652vCw@mail.gmail.com>

Hi Denis,
wait, I miss something, probably due to too long vacations :).
  https://qgis.org/ubuntu/dists/ <https://qgis.org/ubuntu-ltr/dists/> is
for release version right? That's what our website indicates. I would like
to have ubuntugis for LTR (current 3.10).


Le mar. 18 août 2020 à 10:36, Denis Rouzaud <denis.rouzaud at gmail.com> a
écrit :

> The PPAs were renamed:
> https://qgis.org/ubuntu-ltr/dists/
> https://qgis.org/ubuntu/dists/ <https://qgis.org/ubuntu-ltr/dists/>
>
> Focal is here :)
>
> Le mar. 18 août 2020 à 10:32, Régis Haubourg <regis.haubourg at gmail.com> a
> écrit :
>
>> Hi all, (Hi Jürgen),
>>
>> I'm looking at the ubuntugis builds for ubuntu/ debian. Currently we only
>> have builds for the following
>>
>>
>>    - bionic
>>    - precise
>>    - trusty
>>    - xenial
>>
>> They look a bit old especially regarding Qt versions.
>>
>> Having a look to
>> http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu/dists/ they
>> seem to support also focal.
>> How could we have our builds supporting focal with ubuntugis
>> dependencies?
>>
>> Best regards
>>
>> Régis
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/d7302e05/attachment.html>

From regis.haubourg at gmail.com  Tue Aug 18 01:46:01 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Tue, 18 Aug 2020 10:46:01 +0200
Subject: [QGIS-Developer] focal eoan on
 https://qgis.org/ubuntugis-ltr/dists/ ?
In-Reply-To: <2ac1e5cb-c242-968d-79e0-1c22fa722004@xs4all.nl>
References: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>
 <2ac1e5cb-c242-968d-79e0-1c22fa722004@xs4all.nl>
Message-ID: <CABgOYCfGbbqHyamGKvdZWgcJOwDXYRjJanG1RYSgpPGJ1Afrtg@mail.gmail.com>

Thanks Sebastiaan,
this makes sense indeed, given that GDAL is already 3.0.2 on focal. Sorry
for the noise!

Régis

Le mar. 18 août 2020 à 10:41, Sebastiaan Couwenberg <sebastic at xs4all.nl> a
écrit :

> On 8/18/20 10:31 AM, Régis Haubourg wrote:
> > Having a look to
> > http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu/dists/ they
> > seem to support also focal.
>
> Note that only grass is currently available for focal in the
> ubuntugis-unstable PPA:
>
>
> https://launchpad.net/~ubuntugis/+archive/ubuntu/ubuntugis-unstable/+packages?field.status_filter=published&field.series_filter=focal
>
> > How could we have our builds supporting focal with ubuntugis
> dependencies?
>
> That added value of focal builds with UbuntuGIS dependencies is very
> little at time of writing.
>
> Kind Regards,
>
> Bas
>
> --
>  GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/60d25f9e/attachment-0001.html>

From jef at norbit.de  Tue Aug 18 02:07:06 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 18 Aug 2020 11:07:06 +0200
Subject: [QGIS-Developer] focal eoan on
 https://qgis.org/ubuntugis-ltr/dists/ ?
In-Reply-To: <2ac1e5cb-c242-968d-79e0-1c22fa722004@xs4all.nl>
References: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>
 <2ac1e5cb-c242-968d-79e0-1c22fa722004@xs4all.nl>
Message-ID: <20200818090706.avmegqnzmojlccvh@norbit.de>

Hi Bas,

On Tue, 18. Aug 2020 at 10:41:12 +0200, Sebastiaan Couwenberg wrote:
> > How could we have our builds supporting focal with ubuntugis dependencies?
 
> That added value of focal builds with UbuntuGIS dependencies is very
> little at time of writing.

Last time I checked there was nothing at all.  Next round will have
focal-ubuntugis too.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/7427ff53/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/7427ff53/attachment.ksh>

From sebastic at xs4all.nl  Tue Aug 18 02:26:23 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 18 Aug 2020 11:26:23 +0200
Subject: [QGIS-Developer] focal eoan on
 https://qgis.org/ubuntugis-ltr/dists/ ?
In-Reply-To: <CABgOYCfGbbqHyamGKvdZWgcJOwDXYRjJanG1RYSgpPGJ1Afrtg@mail.gmail.com>
References: <CABgOYCeqze1OXB==FQY=MVuxDedmyYmWZZj1zjpsrF=JyVUzOA@mail.gmail.com>
 <2ac1e5cb-c242-968d-79e0-1c22fa722004@xs4all.nl>
 <CABgOYCfGbbqHyamGKvdZWgcJOwDXYRjJanG1RYSgpPGJ1Afrtg@mail.gmail.com>
Message-ID: <aba714fa-8366-45db-c447-0c9d2a74f131@xs4all.nl>

On 8/18/20 10:46 AM, Régis Haubourg wrote:
> this makes sense indeed, given that GDAL is already 3.0.2 on focal. Sorry
> for the noise!

The proj, libgeotiff, geos & gdal packages could be backported for focal
to have more added value for QGIS.

Angelos intended to add packages for focal back in May [0], but has
clearly not gotten around to that.

Helping hands are likely welcome.

[0] https://lists.osgeo.org/pipermail/ubuntu/2020-May/001956.html

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From matteo.ghetta at gmail.com  Tue Aug 18 02:26:23 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Tue, 18 Aug 2020 11:26:23 +0200
Subject: [QGIS-Developer] Documentation tests failing on local machine
Message-ID: <90f9bf3d-89f7-9001-0479-c93063d94560@gmail.com>

Hi all,

I don't know what I'm doing wrong but when I run documentation tests on
my local machine I always get messages like:

**********************************************************************
Line 6, in geometry (setup code)
Failed example:
    iface = start_qgis()

    from qgis.core import (
      QgsProject,
      QgsVectorLayer,
    )

    # Load the countries layer
    if not QgsProject.instance().mapLayersByName("countries"):
        vlayer =
QgsVectorLayer("/usr/share/qgis/resources/data/world_map.gpkg|layerName=countries",
"countries", "ogr")
        assert vlayer.isValid()
        QgsProject.instance().addMapLayers([vlayer])
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib/python3.8/doctest.py", line 1336, in __run
        exec(compile(example.source, filename, "single",
      File "<doctest geometry (setup code)[1]>", line 1, in <module>
        iface = start_qgis()
    NameError: name 'start_qgis' is not defined
**********************************************************************
1 items had failures:
   2 of   2 in geometry (setup code)
***Test Failed*** 2 failures.



I've QGIS compiled and I've added this lines in the user.mk file (in
order to run test with a compiled version of QGIS instead of the default
installation):

# Root installation folder
QGIS_PREFIX_PATH = /home/matteo/dev/qgis-master/output

include venv.mk

and run the following code

make -f user.mk doctest

I followed exactly the documentation
(https://docs.qgis.org/testing/en/docs/documentation_guidelines/cookbook_guidelines.html#how-to-test-snippets-on-your-local-machine).

I get the same exact errors also with the local installation of QGIS
when running:

make -f venv.mk doctest

Some suggestions?

Cheers and thanks!

Matteo



From tim at kartoza.com  Tue Aug 18 05:46:25 2020
From: tim at kartoza.com (Tim Sutton)
Date: Tue, 18 Aug 2020 13:46:25 +0100
Subject: [QGIS-Developer] Inconsistencies in QGIS ini path
In-Reply-To: <CAECJsSo2frC5mWxucp2WBBViawRJWrgYQVPfTKFuLTv9rKM0eA@mail.gmail.com>
References: <CAES-DZStjEKuh0ZnoU8VVSV552PWT6XQu-Uv3oZ13BG7LQWMgQ@mail.gmail.com>
 <CAB28Asi7fahOThjWHE8=0326jKLZRuptAGxjLzP5r6nhwEB8Mw@mail.gmail.com>
 <CAES-DZSQ_ttu+GPX9H_2enVOHF8iPMHzaM8uJDJaQwMO8V1PfQ@mail.gmail.com>
 <c9b0806b-7fdb-7b6a-3bc0-a8c68f67b1f1@duif.net>
 <CAES-DZRpQ+xEvQPdXG18sYJH5S+hzg8JdzXMheqhec+0kt=naw@mail.gmail.com>
 <CAECJsSo2frC5mWxucp2WBBViawRJWrgYQVPfTKFuLTv9rKM0eA@mail.gmail.com>
Message-ID: <CAES-DZRXtCghBqTSH5xaYX3z4PwfSb5ZUfKhPnUPuhy5LigxsQ@mail.gmail.com>

Thank you for testing on mac Harissou!

Regards

Tim

On Mon, Aug 17, 2020 at 4:54 PM DelazJ <delazj at gmail.com> wrote:

> Hi,
>
>
> Le lun. 17 août 2020 à 16:56, Tim Sutton <tim at kartoza.com> a écrit :
>
>> Hi Richard
>>
>> Thanks for your reply - see below for inline responses:
>>
>> On Mon, Aug 17, 2020 at 12:32 PM Richard Duivenvoorde <
>> rdmailings at duif.net> wrote:
>>
>>> On 8/17/20 9:23 AM, Tim Sutton wrote:
>>>
>> [...]
>
> QStandardPaths.standardLocations(QStandardPaths.AppDataLocation)
>>> in the pythonconsole shows:
>>> [
>>>  '/home/richard/.local/share/QGIS/QGIS3',
>>>  '/usr/share/gnome/QGIS/QGIS3',
>>>  '/home/richard/.local/share/flatpak/exports/share/QGIS/QGIS3',
>>>  '/var/lib/flatpak/exports/share/QGIS/QGIS3',
>>>  '/usr/local/share/QGIS/QGIS3',
>>>  '/usr/share/QGIS/QGIS3'
>>> ]
>>>
>>> Can you test this on a mac?
>>>
>>
>> Heheh once you leave mac, you can never go back :-) Hopefully someone
>> looking in from macOSland on the list here if they can test.
>>
>> On a mac, I get (using 3.10 from the all-in-one installer)
> >> QStandardPaths.standardLocations(QStandardPaths.AppDataLocation)
> ['/Users/harrissou/Library/Application Support/QGIS/QGIS3',
> '/Library/Application Support/QGIS/QGIS3',
> '/Applications/QGIS3.10.app/Contents/Resources']
>
> On Windows, using an osgeo4w advanced install, with master:
> ['C:/Users/harrissou/AppData/Roaming/QGIS/QGIS3',
> 'C:/ProgramData/QGIS/QGIS3',
> 'C:/OSGEO4W64/bin',
> 'C:/OSGEO4W64/bin/data',
> 'C:/OSGEO4W64/bin/data/QGIS/QGIS3']
>
> HTH,
> Harrissou
>
>>
>>
>>>
>>> IF it is different, I think it is better to adhere to Qt-standards then
>>> to build those path's ourselves?
>>>
>>
>> Well the issue I am trying to highlight is that the config folder as
>> currently implemented is not portable. I thought it was part of the design
>> intent of switching to ini based configs way back that there was a
>> homogenous system for managing configurations. Currently having <PROFILE
>> NAME>/qgis.org/QGIS3.ini on a mac and <PROFILE NAME>/QGIS/QGIS3.ini on
>> linux (curious to know what Windows does) breaks the principle of least
>> surprise and means that your settings folder isn't portable between
>> machines when it easily could be,
>>
>> Regards
>>
>> Tim
>>
>>
>>
>>
>>>
>>> Regards,
>>>
>>> Richard Duivenvoorde
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>> --
>>
>> ------------------------------------------------------------------------------------------
>>
>> Tim Sutton
>> Visit http://kartoza.com to find out about open source:
>>  * Desktop GIS programming services
>>  * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Skype: timlinux Irc: timlinux on #qgis at freenode.net
>> Tim is a member of the QGIS Project Steering Committee
>>
>> -------------------------------------------------------------------------------------------
>> Kartoza is a merger between Linfiniti and Afrispatial
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/3f65db3b/attachment-0001.html>

From kalam1993 at gmail.com  Tue Aug 18 06:12:07 2020
From: kalam1993 at gmail.com (Karthikeyan M)
Date: Tue, 18 Aug 2020 18:42:07 +0530
Subject: [QGIS-Developer] SQL in graphic modeller - Reg
In-Reply-To: <CA+H0G_Fqt90YtfUbkGsrxqic4cpJi9Ox_SqmNhrqCa7FrTuaXA@mail.gmail.com>
References: <CAAG9oAiHnKYxCquY4+UamWOQ8c8-_4R2X5WwV+aYz+fEyRwx=g@mail.gmail.com>
 <CA+H0G_Fqt90YtfUbkGsrxqic4cpJi9Ox_SqmNhrqCa7FrTuaXA@mail.gmail.com>
Message-ID: <CAAG9oAjuekdr6M8gNgn2bpHp5Ddstu=Krj2j-U=5ODy41qHprw@mail.gmail.com>

Hi Alexandre,

Thank you for your reply. It worked for me.

Thanks and Regards,
Karthikeyan M

On Fri, Aug 14, 2020 at 6:56 PM Alexandre Neto <senhor.neto at gmail.com>
wrote:

> Hello,
>
> Have you tried to use the PostgreSQL execute and load algorithm from the
> Processing toolbox?
>
>
> https://docs.qgis.org/testing/en/docs/user_manual/processing_algs/qgis/database.html#postgresql-execute-and-load-sql
>
> Another alternative is to use the Refactor fields tool, where you can
> select the columns you want to keep and in which order.
>
>
> https://docs.qgis.org/testing/en/docs/user_manual/processing_algs/qgis/vectortable.html#refactor-fields
>
> Best regards,
>
> Alexandre Neto
> QGIS Support
> www.qcooperative.net
>
> A sexta, 14/08/2020, 12:23, Karthikeyan M <kalam1993 at gmail.com> escreveu:
>
>> Hi ,
>>
>> I'm learning graphic modeller in QGis3. Earlier I used to select only 3
>> columns ( from 73 coloumn) of attributes by using sql query in DB manager.
>> I want to create a  model for that. Is there anyway I can use that sql
>> query to extract particular coloumn from shape files using Graphic modeller
>> ?
>>
>> Expecting your reply
>>
>> Regards,
>> Karthikeyan M
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/cfb2327c/attachment.html>

From rdmailings at duif.net  Tue Aug 18 07:58:42 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 18 Aug 2020 16:58:42 +0200
Subject: [QGIS-Developer] Documentation tests failing on local machine
In-Reply-To: <90f9bf3d-89f7-9001-0479-c93063d94560@gmail.com>
References: <90f9bf3d-89f7-9001-0479-c93063d94560@gmail.com>
Message-ID: <3d37287b-24e0-555a-0f9e-d08d81f7ef7f@duif.net>


Hi Matteo,

I have/had the same issue

Failed example:
    iface = start_qgis()
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib/python3.8/doctest.py", line 1336, in __run
        exec(compile(example.source, filename, "single",
      File "<doctest composer (setup code)[1]>", line 1, in <module>
        iface = start_qgis()
    NameError: name 'start_qgis' is not defined
**********************************************************************
1 items had failures:
   2 of   2 in composer (setup code)
***Test Failed*** 2 failures.

Exception occurred:
  File "<string>", line 22, in <module>
ModuleNotFoundError: No module named 'qgis.testing'

But after A LOT of fiddling with my user.mk:
- adding a PYTHONPATH and a LD_LIBRARY_PATH
- adding my pythondir to the conf.py path: https://github.com/qgis/QGIS-Documentation/blob/master/conf.py#L317
it seemed I was able to run the tests... but fail:

Document: docs/pyqgis_developer_cookbook/network_analysis
---------------------------------------------------------
Logged warning: Duplicate provider native registered
ASSERT failure in QVector<T>::operator[]: "index out of range", file /usr/include/x86_64-linux-gnu/qt5/QtCore/qvector.h, line 459
make: *** [Makefile:43: doctest] Aborted

I see that the start_qgis is defined in the conf.py:
https://github.com/qgis/QGIS-Documentation/blob/1ec02b91b3321ae80a179b80a1a0a8508babcd9b/conf.py#L259

AND that Travis is still doing the tests, BUT using the docker image:
https://github.com/qgis/QGIS-Documentation/blob/1ec02b91b3321ae80a179b80a1a0a8508babcd9b/.travis.yml#L56

which is fine as it apparently is still (travis)happy...

So I think it is just a hell of a job to get your personal testing environment in place (especially if you have custom install dirs etc etc)..

Maybe best to use the docker test?
make -f docker.mk doctest
THAT one was running fine with me in the end...

Doctest summary
===============
  306 tests
    2 failures in tests
    0 failures in setup code
    0 failures in cleanup code
build finished with problems, 1 warning.
Makefile:43: recipe for target 'doctest' failed
make: *** [doctest] Error 1
make: *** [docker.mk:5: doctest] Error 2


So not sure what to do with this:
- tell everybody to use docker for this (easiest)
- create better documentation for everybody to setup it's environment (hard)...

Regards,

Richard Duivenvoorde


On 8/18/20 11:26 AM, matteo wrote:
> Hi all,
> 
> I don't know what I'm doing wrong but when I run documentation tests on
> my local machine I always get messages like:
> 
> **********************************************************************
> Line 6, in geometry (setup code)
> Failed example:
>     iface = start_qgis()
> 
>     from qgis.core import (
>       QgsProject,
>       QgsVectorLayer,
>     )
> 
>     # Load the countries layer
>     if not QgsProject.instance().mapLayersByName("countries"):
>         vlayer =
> QgsVectorLayer("/usr/share/qgis/resources/data/world_map.gpkg|layerName=countries",
> "countries", "ogr")
>         assert vlayer.isValid()
>         QgsProject.instance().addMapLayers([vlayer])
> Exception raised:
>     Traceback (most recent call last):
>       File "/usr/lib/python3.8/doctest.py", line 1336, in __run
>         exec(compile(example.source, filename, "single",
>       File "<doctest geometry (setup code)[1]>", line 1, in <module>
>         iface = start_qgis()
>     NameError: name 'start_qgis' is not defined
> **********************************************************************
> 1 items had failures:
>    2 of   2 in geometry (setup code)
> ***Test Failed*** 2 failures.
> 
> 
> 
> I've QGIS compiled and I've added this lines in the user.mk file (in
> order to run test with a compiled version of QGIS instead of the default
> installation):
> 
> # Root installation folder
> QGIS_PREFIX_PATH = /home/matteo/dev/qgis-master/output
> 
> include venv.mk
> 
> and run the following code
> 
> make -f user.mk doctest
> 
> I followed exactly the documentation
> (https://docs.qgis.org/testing/en/docs/documentation_guidelines/cookbook_guidelines.html#how-to-test-snippets-on-your-local-machine).
> 
> I get the same exact errors also with the local installation of QGIS
> when running:
> 
> make -f venv.mk doctest
> 
> Some suggestions?
> 
> Cheers and thanks!
> 
> Matteo
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From delazj at gmail.com  Tue Aug 18 12:57:19 2020
From: delazj at gmail.com (DelazJ)
Date: Tue, 18 Aug 2020 21:57:19 +0200
Subject: [QGIS-Developer] No PyQGIS documentation build since mid july
Message-ID: <CAECJsSoxVbmzqANCC78Qs5MXiiMfj-cWx_-Tqvqt8fKf1ts1SA@mail.gmail.com>

Hi,
Just to mention that pyqgis doc last update indicates for master 9th july
and for 3.14 22nd july. Something is broken in the build process.

https://qgis.org/pyqgis/master/

Regards,
Harrissou
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200818/f65e6604/attachment.html>

From denis.rouzaud at gmail.com  Tue Aug 18 21:40:49 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Wed, 19 Aug 2020 06:40:49 +0200
Subject: [QGIS-Developer] No PyQGIS documentation build since mid july
In-Reply-To: <CAECJsSoxVbmzqANCC78Qs5MXiiMfj-cWx_-Tqvqt8fKf1ts1SA@mail.gmail.com>
References: <CAECJsSoxVbmzqANCC78Qs5MXiiMfj-cWx_-Tqvqt8fKf1ts1SA@mail.gmail.com>
Message-ID: <CAMtsY+aFUja8n4LByHCRrjP8QF6s-Geoddfn4AmXBZecnKhSVQ@mail.gmail.com>

Hi Harissou,

This is expected for 3.14 as point releases docs are built only when a new
release is published.
But it looks like cron jobs are disabled for master on Travis (qgis/pyqgis).

Once more, it looks like I lost access to settings on the repo. Can anyone
grant me access again?

Cheers,
Denis

Le mar. 18 août 2020 à 21:57, DelazJ <delazj at gmail.com> a écrit :

> Hi,
> Just to mention that pyqgis doc last update indicates for master 9th july
> and for 3.14 22nd july. Something is broken in the build process.
>
> https://qgis.org/pyqgis/master/
>
> Regards,
> Harrissou
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200819/c349ceca/attachment.html>

From matteo.ghetta at gmail.com  Tue Aug 18 23:31:07 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Wed, 19 Aug 2020 08:31:07 +0200
Subject: [QGIS-Developer] Documentation tests failing on local machine
In-Reply-To: <3d37287b-24e0-555a-0f9e-d08d81f7ef7f@duif.net>
References: <90f9bf3d-89f7-9001-0479-c93063d94560@gmail.com>
 <3d37287b-24e0-555a-0f9e-d08d81f7ef7f@duif.net>
Message-ID: <90f9ba14-0a78-e89e-5023-875f2dc5756f@gmail.com>

Hi Richard,

thanks for the answer!

> So not sure what to do with this:
> - tell everybody to use docker for this (easiest)
> - create better documentation for everybody to setup it's environment (hard)...

IMHO if we want to keep all the chances to run the tests (standard
installation, custom installation and docker) than we should document
all methods, even if the custom installation is more difficult.

I'm -1 to keep only the docker solution, I think that being able to run
on the local installation is super important.

I would be happy to update the doc guidelines in order to share the
solution.

@Arnaud do you have some suggestions and/or guidelines I can add to the
documentation?

Cheers and thanks!

Matteo


From Patrick.Palmier at cerema.fr  Wed Aug 19 04:28:27 2020
From: Patrick.Palmier at cerema.fr (=?ISO-8859-15?Q?PALMIER_Patrick_=28Responsable_de_groupe=29_=2D_CEREMA?= =?ISO-8859-15?Q?=2FDTerNP=2FDATHa=2FMT?=)
Date: Wed, 19 Aug 2020 13:28:27 +0200
Subject: [QGIS-Developer] Processing parameterAsDate() problem
Message-ID: <524a53eb-c452-f50e-29f3-e44fc2a33c57@cerema.fr>



Hello,

I'm using Qgis 3.1415 46bits on Windows 10 and I try to use the new 
processing parameters controls in processing algorithms

I've used a QgsProcessingParameterDateTime. It wroks well. I have access 
to the calendar form

/code below:

//       self.addParameter( //
//            QgsProcessingParameterDateTime(//
//                self.DEBUT_PERIODE,//
//                self.tr('Calendar start'),//
//                type=1//
////
//            )//
//        )//
/
bus when I try to get the date chosen, I"v got the following error message

Traceback (most recent call last):
File 
"C:/Users/patrick.palmier/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\networks\import_gtfs.py", 
line 175, in processAlgorithm
debut_periode=self.parameterAsDate(parameters,self.DEBUT_PERIODE,context)
AttributeError: 'ImportGTFS' object has no attribute 'parameterAsDate'

Échec d'exécution au bout de 0.04 secondes


code below:

/debut_periode=self.parameterAsDate(parameters,self.DEBUT_PERIODE,context)
/

/
/Do you what is wrong?


Thanks in advance


Patrick Palmier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200819/fe6019d5/attachment.html>

From luipir at gmail.com  Wed Aug 19 04:48:07 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Wed, 19 Aug 2020 13:48:07 +0200
Subject: [QGIS-Developer] Processing parameterAsDate() problem
In-Reply-To: <524a53eb-c452-f50e-29f3-e44fc2a33c57@cerema.fr>
References: <524a53eb-c452-f50e-29f3-e44fc2a33c57@cerema.fr>
Message-ID: <CAFO80_q-S-m5Jgk3ZMKosce1k_0Z4c=ep0jcPHXEWhF3rq99nA@mail.gmail.com>

https://qgis.org/api/classQgsProcessingAlgorithm.html#ae39324c4140aa810c290acdd794c5e7f

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Wed, 19 Aug 2020 at 13:28, PALMIER Patrick (Responsable de groupe) -
CEREMA/DTerNP/DATHa/MT <Patrick.Palmier at cerema.fr> wrote:

>
>
> Hello,
>
> I'm using Qgis 3.1415 46bits on Windows 10 and I try to use the new
> processing parameters controls in processing algorithms
>
> I've used a QgsProcessingParameterDateTime. It wroks well. I have access
> to the calendar form
>
>
>
> *code below:  **       self.addParameter( *
> *            QgsProcessingParameterDateTime(*
> *                self.DEBUT_PERIODE,*
> *                self.tr <http://self.tr>('Calendar start'),*
> *                type=1*
>
> *            )*
> *        )*
>
> bus when I try to get the date chosen, I"v got the following error message
>
> Traceback (most recent call last):
> File
> "C:/Users/patrick.palmier/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\networks\import_gtfs.py",
> line 175, in processAlgorithm
> debut_periode=self.parameterAsDate(parameters,self.DEBUT_PERIODE,context)
> AttributeError: 'ImportGTFS' object has no attribute 'parameterAsDate'
>
> Échec d'exécution au bout de 0.04 secondes
>
>
> code below:
>
>
> *debut_periode=self.parameterAsDate(parameters,self.DEBUT_PERIODE,context)
> *
>
>
> Do you what is wrong?
>
>
> Thanks in advance
>
> Patrick Palmier
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200819/4ab94bbb/attachment-0001.html>

From delazj at gmail.com  Wed Aug 19 14:58:43 2020
From: delazj at gmail.com (DelazJ)
Date: Wed, 19 Aug 2020 23:58:43 +0200
Subject: [QGIS-Developer] No PyQGIS documentation build since mid july
In-Reply-To: <CAMtsY+aFUja8n4LByHCRrjP8QF6s-Geoddfn4AmXBZecnKhSVQ@mail.gmail.com>
References: <CAECJsSoxVbmzqANCC78Qs5MXiiMfj-cWx_-Tqvqt8fKf1ts1SA@mail.gmail.com>
 <CAMtsY+aFUja8n4LByHCRrjP8QF6s-Geoddfn4AmXBZecnKhSVQ@mail.gmail.com>
Message-ID: <CAECJsSq0TJG=qb5M=SAqjzYAAY-unDqYmNG0vu2GXrFkXK8c9Q@mail.gmail.com>

Hi Denis,


Le mer. 19 août 2020 à 06:41, Denis Rouzaud <denis.rouzaud at gmail.com> a
écrit :

> Hi Harissou,
>
> This is expected for 3.14 as point releases docs are built only when a new
> release is published.
>
Makes sense indeed.

Thanks for the update. The date is now from today but I'm not sure the
content is. Taking eg https://qgis.org/pyqgis/3.14/core/QgsVectorLayer.html
and https://qgis.org/pyqgis/master/core/QgsVectorLayer.html, you will
notice that:
- the first code sample is in Python in 3.14 and c++ in master: they all
should be Python (
https://github.com/qgis/QGIS/blob/master/src/core/qgsvectorlayer.h#L104 and
https://github.com/qgis/QGIS/blob/master/python/core/auto_generated/qgsvectorlayer.sip.in#L37
)
- the sections and subsections are supposed to have a special formatting (
https://github.com/qgis/QGIS/blob/master/python/core/auto_generated/qgsvectorlayer.sip.in#L44):
they are not in master, and the text is absent in 3.14. I don't know if
this is a code issue or a build issue but there's one.

Greetings,
Harrissou


But it looks like cron jobs are disabled for master on Travis (qgis/pyqgis).
>
> Once more, it looks like I lost access to settings on the repo. Can anyone
> grant me access again?
>
> Cheers,
> Denis
>
> Le mar. 18 août 2020 à 21:57, DelazJ <delazj at gmail.com> a écrit :
>
>> Hi,
>> Just to mention that pyqgis doc last update indicates for master 9th july
>> and for 3.14 22nd july. Something is broken in the build process.
>>
>> https://qgis.org/pyqgis/master/
>>
>> Regards,
>> Harrissou
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200819/55e1c7e9/attachment.html>

From denis.rouzaud at gmail.com  Wed Aug 19 21:06:15 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 20 Aug 2020 06:06:15 +0200
Subject: [QGIS-Developer] No PyQGIS documentation build since mid july
In-Reply-To: <CAECJsSq0TJG=qb5M=SAqjzYAAY-unDqYmNG0vu2GXrFkXK8c9Q@mail.gmail.com>
References: <CAECJsSoxVbmzqANCC78Qs5MXiiMfj-cWx_-Tqvqt8fKf1ts1SA@mail.gmail.com>
 <CAMtsY+aFUja8n4LByHCRrjP8QF6s-Geoddfn4AmXBZecnKhSVQ@mail.gmail.com>
 <CAECJsSq0TJG=qb5M=SAqjzYAAY-unDqYmNG0vu2GXrFkXK8c9Q@mail.gmail.com>
Message-ID: <CAMtsY+bMNpvOvHbbzuNNpLd1xB7YWGEYJHhigxoQ3Sane65BTQ@mail.gmail.com>

Hi Harissou,

I am currently upgrading CI to use Github workflows, as soon as it's done I
will have a look at these issues.

The date of the PyQGIS build might not reflect the date of the sources: if
the Docker image CI is broken, then the PyQGIS will be built using an old
source.
This might explain the issue you mention, I will also check the QGIS images.

Cheers,
Denis

Le mer. 19 août 2020 à 23:58, DelazJ <delazj at gmail.com> a écrit :

> Hi Denis,
>
>
> Le mer. 19 août 2020 à 06:41, Denis Rouzaud <denis.rouzaud at gmail.com> a
> écrit :
>
>> Hi Harissou,
>>
>> This is expected for 3.14 as point releases docs are built only when a
>> new release is published.
>>
> Makes sense indeed.
>
> Thanks for the update. The date is now from today but I'm not sure the
> content is. Taking eg
> https://qgis.org/pyqgis/3.14/core/QgsVectorLayer.html and
> https://qgis.org/pyqgis/master/core/QgsVectorLayer.html, you will notice
> that:
> - the first code sample is in Python in 3.14 and c++ in master: they all
> should be Python (
> https://github.com/qgis/QGIS/blob/master/src/core/qgsvectorlayer.h#L104
> and
> https://github.com/qgis/QGIS/blob/master/python/core/auto_generated/qgsvectorlayer.sip.in#L37
> )
> - the sections and subsections are supposed to have a special formatting (
> https://github.com/qgis/QGIS/blob/master/python/core/auto_generated/qgsvectorlayer.sip.in#L44):
> they are not in master, and the text is absent in 3.14. I don't know if
> this is a code issue or a build issue but there's one.
>
> Greetings,
> Harrissou
>
>
> But it looks like cron jobs are disabled for master on Travis
>> (qgis/pyqgis).
>>
>> Once more, it looks like I lost access to settings on the repo. Can
>> anyone grant me access again?
>>
>> Cheers,
>> Denis
>>
>> Le mar. 18 août 2020 à 21:57, DelazJ <delazj at gmail.com> a écrit :
>>
>>> Hi,
>>> Just to mention that pyqgis doc last update indicates for master 9th
>>> july and for 3.14 22nd july. Something is broken in the build process.
>>>
>>> https://qgis.org/pyqgis/master/
>>>
>>> Regards,
>>> Harrissou
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200820/09b36b95/attachment.html>

From denis.rouzaud at gmail.com  Wed Aug 19 22:59:27 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 20 Aug 2020 07:59:27 +0200
Subject: [QGIS-Developer] ImportError: /lib/x86_64-linux-gnu/libstdc++.so.6:
 cannot allocate memory in static TLS block
Message-ID: <CAMtsY+Y_cHNyuFMueeVitzB06Bv1-7ZZe6NF=0Gm1DvsKR4ALg@mail.gmail.com>

Hi all,

While checking the PyQGIS build, I realized that there was an error when
running any PyQGIS code on Ubuntu Focal:
ImportError: /lib/x86_64-linux-gnu/libstdc++.so.6: cannot allocate memory
in static TLS block
https://github.com/qgis/pyqgis/runs/1006224259?check_suite_focus=true#step:3:228

I found this reference:
https://bugs.launchpad.net/ubuntu/+source/opencv/+bug/1890170?comments=all

Without really understanding the meaning of this, I gave a try at:

export LD_PRELOAD=/lib/x86_64-linux-gnu/libstdc++.so.6

Which seems to solve the problem.

>From a comment on Launchpad, this could be related to mysql-server being
compiled with faster TLS model (-ftls-model=initial-exec)
https://github.com/mysql/mysql-server/commit/735bd2a53834266c7256830c8d34672ea55fe17b

This could well explain why it was not raised very loudly before (Ubuntu
Focal + mssql server combination)

I am writing here to leave a reference to this.
But if anybody has any suggestions, additions or corrections to my
statements...please let me/us know.

Cheers,
Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200820/6c58c426/attachment.html>

From marco at qgis.org  Fri Aug 21 10:49:05 2020
From: marco at qgis.org (Marco Bernasocchi)
Date: Fri, 21 Aug 2020 19:49:05 +0200
Subject: [QGIS-Developer] Informal online virtual meeting to hack - AKA
	QHackFriday
Message-ID: <CAB2ZMRB+to26ye4JUa12acqV75wvCGevkOJcZ+SyrX=_J=gE=A@mail.gmail.com>

Dear Community,

2020, as we all know, has been a special year and among plenty other issues
we had to cancel all our beloved hackfests. Since we first started holding
bi-annual hackfests in 2009, it will be the first time without an event
where our friendly community can meet.



That can’t be! We are a modern and thriving community based on exchange,
discussion and collaboration and should foster this even when physical
meetings are not possible.

I’m super excited to announce that after some very motivating discussions
on the HackFest telegram channel [2] and in the PSC, starting from next
week on every last Friday of each month we will hold an informal online
virtual meeting to hack around, document, discuss and in general meet the
awesome QGIS community.


There will normally be no formal agenda, no fixed schedule nor moderators,
simply join the QHackFriday (pronounced KwakFriday) on jitsi [0] and say
hi!

I added a page to the wiki [1], so if you have topics that you like to
discuss/present you can put them there and others might join you.

Stay safe and see you next Friday!


[0] https://meet.jit.si/QHackFriday

[1] https://github.com/qgis/QGIS/wiki/QHackFriday

[2] https://t.me/joinchat/Aq2V5RPoxYYhXqUPoxRWPQ

Picture 1: https://www.umwelt.uni-hannover.de/qgis.html
<https://www.umwelt.uni-hannover.de/qgis.html?&L=1>

Picture 2: https://qgis2015.wordpress.com


-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200821/2ed70c6f/attachment.html>

From r.nijssen at terglobo.nl  Mon Aug 24 06:28:43 2020
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Mon, 24 Aug 2020 15:28:43 +0200
Subject: [QGIS-Developer] DB-manager and large query results (for time
	manager)
Message-ID: <cf934eba-c2ed-e52e-d835-362868e3ed9d@terglobo.nl>

There's a question on a Dutch geo forum about a join query in DB-Manager 
that does not return data, but an error without message instead. PG 
Admin runs the query with he expected results, so it seems ok.

People have been trying to reproduce this with different results.

The query is joining a layer with 355 detailed polygons (municipalities) 
to a table with timestamps and values for every day (covid numbers). The 
result multiplies the polygon data for every day, copying the polygons 
over 50k times.

Questions:

1
Does the DB-Manager or QGIS or something else kill the query because the 
results (can) get too large?

2.
Is there a more efficient way to use time manager in combination with 
large geometries, in a case where only the time values change and not 
the geometries?

Here's the link to the Dutch thread:
https://geoforum.nl/t/lege-foutmelding-db-manager-na-join/4667


Thanks for any help!

Raymond

PS In my 3.15 opening the DB-manager crashes my QGIS instandly, so I 
could only test the query in 3.12 without the time manager.

From rdmailings at duif.net  Mon Aug 24 06:41:14 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 24 Aug 2020 15:41:14 +0200
Subject: [QGIS-Developer] DB-manager and large query results (for time
 manager)
In-Reply-To: <cf934eba-c2ed-e52e-d835-362868e3ed9d@terglobo.nl>
References: <cf934eba-c2ed-e52e-d835-362868e3ed9d@terglobo.nl>
Message-ID: <434b40bb-e593-5799-05cd-a17efcea73ae@duif.net>

On 8/24/20 3:28 PM, Raymond Nijssen wrote:
> PS In my 3.15 opening the DB-manager crashes my QGIS instandly, so I could only test the query in 3.12 without the time manager.

Issue created for that some days ago https://github.com/qgis/QGIS/issues/38393
But I cannot reproduce it on Windows..

Regards,

Richard Duivenvoorde



From matteo.ghetta at gmail.com  Tue Aug 25 00:53:05 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Tue, 25 Aug 2020 09:53:05 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
Message-ID: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>

Hi all,

sorry for cross posting and sorry if I missed some existing discussion
on this topic.

I don't think anybody introduced some strange commit but it seems that
the Travis check is always failing even with PR that don't code snippet
at all.

The error seems related directly with the environment:

https://travis-ci.org/github/qgis/QGIS-Documentation/builds/720902932#L694


Exception raised:

    Traceback (most recent call last):

      File "/usr/lib/python3.8/doctest.py", line 1329, in __run

        exec(compile(example.source, filename, "single",

      File "<doctest geometry (setup code)[0]>", line 22, in <module>

        from qgis.testing import start_app

    ModuleNotFoundError: No module named 'qgis'




Any Travis guru out here? :)

Cheers and thanks

Matteo

From denis.rouzaud at gmail.com  Tue Aug 25 01:12:13 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Tue, 25 Aug 2020 10:12:13 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
Message-ID: <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>

Hi,

Sorry, I am somehow responsible for the failure of the recent Docker images
on master (release branches were apparently not affected).

The images were apparently not updated for a bit (which I didn't notice).
I moved the Docker images creation from Travis to Github actions, and due
to a missing check in the job, the image was pushed without QGIS built in
it.
There was apparently a new way of defining where the Qt 3D extras headers
are located:
https://github.com/qgis/QGIS/commit/46acc34e6a8263218c5c494096f3182a05c704e7#diff-6987645362d6f81263fd0a8623dacbb9R52

This is now fixed, the image is currently building
https://github.com/qgis/QGIS/runs/1025298753?check_suite_focus=true
If no stupid error is present further in the job, it should be pushed still
this morning.

Sorry for the mess.

Denis


Le mar. 25 août 2020 à 09:53, matteo <matteo.ghetta at gmail.com> a écrit :

> Hi all,
>
> sorry for cross posting and sorry if I missed some existing discussion
> on this topic.
>
> I don't think anybody introduced some strange commit but it seems that
> the Travis check is always failing even with PR that don't code snippet
> at all.
>
> The error seems related directly with the environment:
>
> https://travis-ci.org/github/qgis/QGIS-Documentation/builds/720902932#L694
>
>
> Exception raised:
>
>     Traceback (most recent call last):
>
>       File "/usr/lib/python3.8/doctest.py", line 1329, in __run
>
>         exec(compile(example.source, filename, "single",
>
>       File "<doctest geometry (setup code)[0]>", line 22, in <module>
>
>         from qgis.testing import start_app
>
>     ModuleNotFoundError: No module named 'qgis'
>
>
>
>
> Any Travis guru out here? :)
>
> Cheers and thanks
>
> Matteo
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200825/8188a789/attachment.html>

From nirvn.asia at gmail.com  Tue Aug 25 01:15:19 2020
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Tue, 25 Aug 2020 15:15:19 +0700
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
Message-ID: <CAC_qv=oc7ag41dj7FaRj0xvg15GO=0o01WbUT_mFO0TFuEzg5Q@mail.gmail.com>

Denis,

Thanks for all the work improving and fixing this.

Math

On Tue, Aug 25, 2020 at 3:12 PM Denis Rouzaud <denis.rouzaud at gmail.com>
wrote:

> Hi,
>
> Sorry, I am somehow responsible for the failure of the recent Docker
> images on master (release branches were apparently not affected).
>
> The images were apparently not updated for a bit (which I didn't notice).
> I moved the Docker images creation from Travis to Github actions, and due
> to a missing check in the job, the image was pushed without QGIS built in
> it.
> There was apparently a new way of defining where the Qt 3D extras headers
> are located:
>
> https://github.com/qgis/QGIS/commit/46acc34e6a8263218c5c494096f3182a05c704e7#diff-6987645362d6f81263fd0a8623dacbb9R52
>
> This is now fixed, the image is currently building
> https://github.com/qgis/QGIS/runs/1025298753?check_suite_focus=true
> If no stupid error is present further in the job, it should be pushed
> still this morning.
>
> Sorry for the mess.
>
> Denis
>
>
> Le mar. 25 août 2020 à 09:53, matteo <matteo.ghetta at gmail.com> a écrit :
>
>> Hi all,
>>
>> sorry for cross posting and sorry if I missed some existing discussion
>> on this topic.
>>
>> I don't think anybody introduced some strange commit but it seems that
>> the Travis check is always failing even with PR that don't code snippet
>> at all.
>>
>> The error seems related directly with the environment:
>>
>> https://travis-ci.org/github/qgis/QGIS-Documentation/builds/720902932#L694
>>
>>
>> Exception raised:
>>
>>     Traceback (most recent call last):
>>
>>       File "/usr/lib/python3.8/doctest.py", line 1329, in __run
>>
>>         exec(compile(example.source, filename, "single",
>>
>>       File "<doctest geometry (setup code)[0]>", line 22, in <module>
>>
>>         from qgis.testing import start_app
>>
>>     ModuleNotFoundError: No module named 'qgis'
>>
>>
>>
>>
>> Any Travis guru out here? :)
>>
>> Cheers and thanks
>>
>> Matteo
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200825/f44589ff/attachment.html>

From matteo.ghetta at gmail.com  Tue Aug 25 01:18:00 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Tue, 25 Aug 2020 10:18:00 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
Message-ID: <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>

Hi Denis,

thanks for the update and for the fix. Will restart the checks during
the afternoon when the fix is pushed

Cheers

Matteo

From giovanni.manghi at gmail.com  Tue Aug 25 01:27:07 2020
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Tue, 25 Aug 2020 09:27:07 +0100
Subject: [QGIS-Developer] DB-manager and large query results (for time
	manager)
In-Reply-To: <mailman.33.1598295602.3437.qgis-developer@lists.osgeo.org>
References: <mailman.33.1598295602.3437.qgis-developer@lists.osgeo.org>
Message-ID: <CACfnYnQfHP5dGMZb6m8=mY6xBLB-Jp_BwPx2k4s5aiMnSxjK0w@mail.gmail.com>

Hi Raymond,

> There's a question on a Dutch geo forum about a join query in DB-Manager
> that does not return data, but an error without message instead. PG
> Admin runs the query with he expected results, so it seems ok.

I have seen this type of problem in the past, but now I can't recall
the exact details of my use case, can you post somewhere the data and
the query?. More recently there was a similar issue, DB Manager
running a query and returning 0 results, while actually the query
returned more than that, but I think this is fixed. Recently seems
also that DB Manager is very slow running queries that on other
programs (i.e. pgadmin or dbeaver) take much less time.

cheers!

-- G --

From r.nijssen at terglobo.nl  Tue Aug 25 02:31:53 2020
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Tue, 25 Aug 2020 11:31:53 +0200
Subject: [QGIS-Developer] DB-manager and large query results (for time
 manager)
In-Reply-To: <CACfnYnQfHP5dGMZb6m8=mY6xBLB-Jp_BwPx2k4s5aiMnSxjK0w@mail.gmail.com>
References: <mailman.33.1598295602.3437.qgis-developer@lists.osgeo.org>
 <CACfnYnQfHP5dGMZb6m8=mY6xBLB-Jp_BwPx2k4s5aiMnSxjK0w@mail.gmail.com>
Message-ID: <a7d0132c-0f32-c747-7440-35b1de795f54@terglobo.nl>


On 25-08-2020 10:27, Giovanni Manghi wrote:
> Hi Raymond,
> 
>> There's a question on a Dutch geo forum about a join query in DB-Manager
>> that does not return data, but an error without message instead. PG
>> Admin runs the query with he expected results, so it seems ok.
> 
> I have seen this type of problem in the past, but now I can't recall
> the exact details of my use case, can you post somewhere the data and
> the query?. More recently there was a similar issue, DB Manager
> running a query and returning 0 results, while actually the query
> returned more than that, but I think this is fixed. Recently seems
> also that DB Manager is very slow running queries that on other
> programs (i.e. pgadmin or dbeaver) take much less time.
> 
> cheers!
> 
> -- G --
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
Hi Giovanni,

Thanks for your reply.

The queries and data can be found in the tread and I added the link. But 
as this is all in Dutch it might be hard for you to figure it out.


The data sources are these:

https://geodata.rivm.nl/covid-19/COVID-19_aantallen_gemeente_cumulatief.csv3

https://geodata.nationaalgeoregister.nl/wijkenbuurten2019/wfs?service=WFS2
(layer: gemeenten2019)


and the query:

select c.*, g.geom, g.inwoners
from covid19 as c
join gemeenten_bewerkt as g
on c.municipality_code=g.code;


I'm not used to the DB-manager as I prefer writing queries in DBeaver 
for creating new tables or views. When they seem right I open them in 
QGIS. DB-manager always feels a bit like a black box in between the DB 
and QGIS.

Raymond

From giovanni.manghi at gmail.com  Wed Aug 26 03:16:16 2020
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Wed, 26 Aug 2020 11:16:16 +0100
Subject: [QGIS-Developer] DB-manager and large query results (for time
	manager)
In-Reply-To: <mailman.31.1598382002.27037.qgis-developer@lists.osgeo.org>
References: <mailman.31.1598382002.27037.qgis-developer@lists.osgeo.org>
Message-ID: <CACfnYnTUNi_=7exdT4=Eetu9OH_eWMqvYoo-05F+x_uUyB6XfQ@mail.gmail.com>

Hi Raymond,

> The data sources are these:
>
> https://geodata.rivm.nl/covid-19/COVID-19_aantallen_gemeente_cumulatief.csv3
>
> https://geodata.nationaalgeoregister.nl/wijkenbuurten2019/wfs?service=WFS2
> (layer: gemeenten2019)
>
>
> and the query:
>
> select c.*, g.geom, g.inwoners
> from covid19 as c
> join gemeenten_bewerkt as g
> on c.municipality_code=g.code;

I was able to successfully run the query (with the data on PostgreSQL)
on both DBeaver and DB Manager.


> I'm not used to the DB-manager as I prefer writing queries in DBeaver
> for creating new tables or views. When they seem right I open them in
> QGIS. DB-manager always feels a bit like a black box in between the DB
> and QGIS.

I do not feel the same, actually DB Manager is/should be the perfect
tool to interact with DBs. Unfortunately there are quite some
issues... for example I noticed that long running queries should be
stoppable but actually they are not.

cheers!

-- G --

From michal.wloga at envirosolutions.pl  Wed Aug 26 02:45:52 2020
From: michal.wloga at envirosolutions.pl (michal.wloga at envirosolutions.pl)
Date: Wed, 26 Aug 2020 11:45:52 +0200
Subject: [QGIS-Developer] plugin verification
Message-ID: <00ac01d67b8d$aff36f20$0fda4d60$@envirosolutions.pl>

Hello,

Is there a way to speed up plugin verification of
<https://plugins.qgis.org/plugins/pobieracz_danych_gugik/>
https://plugins.qgis.org/plugins/pobieracz_danych_gugik/ (version update)?

Regards,

EnviroSolutions Sp. z o. o.
Michał Włoga
tel: +48 607 059 157
 <mailto:coo at envirosolutions.pl> coo at envirosolutions.pl
www.envirosolutions.pl

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200826/0bc2b64f/attachment.html>

From matteo.ghetta at gmail.com  Wed Aug 26 05:50:59 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Wed, 26 Aug 2020 14:50:59 +0200
Subject: [QGIS-Developer] Travis restart build button missing
Message-ID: <e81690df-20b9-123e-8e8b-beac2996525a@gmail.com>

Hi all,

I noticed that (for me) the "Restart Build" button was missing in Travis
and I discovered that you just have to log out and log in to make it
appear again.

So just a small trick if someone is missing the button too

Cheers

Matteo

From jgr at di.uminho.pt  Wed Aug 26 05:58:04 2020
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Wed, 26 Aug 2020 13:58:04 +0100
Subject: [QGIS-Developer] Travis restart build button missing
In-Reply-To: <e81690df-20b9-123e-8e8b-beac2996525a@gmail.com>
References: <e81690df-20b9-123e-8e8b-beac2996525a@gmail.com>
Message-ID: <b7bf9c08-48e9-86a7-35b5-e639ee34fa8a@di.uminho.pt>

Hi Matteo,

Alternatively, you can close and reopen your PR, if using the GH interface.

On the command line, on the client side, you can force a CI rebuild with
an empty commit:
git commit --amend --no-edit
git push -f

Regards from home,

Jorge Gustavo

On 26/08/20 13:50, matteo wrote:
> Hi all,
> 
> I noticed that (for me) the "Restart Build" button was missing in Travis
> and I discovered that you just have to log out and log in to make it
> appear again.
> 
> So just a small trick if someone is missing the button too
> 
> Cheers
> 
> Matteo
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Informática
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
Móvel: +351 910333888
skype: nabocudnosor

From matteo.ghetta at gmail.com  Wed Aug 26 06:15:36 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Wed, 26 Aug 2020 15:15:36 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
Message-ID: <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>

Hi Denis,

I restarted a build but it is still failing do due a segmentation fault:

https://travis-ci.org/github/qgis/QGIS-Documentation/builds/720594748#L1128

Is it sill work in progress?

Cheers and thanks

Matteo

From matteo.ghetta at gmail.com  Wed Aug 26 06:16:40 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Wed, 26 Aug 2020 15:16:40 +0200
Subject: [QGIS-Developer] Travis restart build button missing
In-Reply-To: <b7bf9c08-48e9-86a7-35b5-e639ee34fa8a@di.uminho.pt>
References: <e81690df-20b9-123e-8e8b-beac2996525a@gmail.com>
 <b7bf9c08-48e9-86a7-35b5-e639ee34fa8a@di.uminho.pt>
Message-ID: <764c7b86-d8f4-6b28-707a-5c46e9f108a4@gmail.com>

Hi Jorge,

> Alternatively, you can close and reopen your PR, if using the GH interface.

yep I knew that but I was wondering why the button was not there anymore

> On the command line, on the client side, you can force a CI rebuild with
> an empty commit:
> git commit --amend --no-edit
> git push -f

I didn't know this :)

Cheers and thanks

Matteo

From delazj at gmail.com  Wed Aug 26 08:39:46 2020
From: delazj at gmail.com (DelazJ)
Date: Wed, 26 Aug 2020 17:39:46 +0200
Subject: [QGIS-Developer] Travis restart build button missing
In-Reply-To: <764c7b86-d8f4-6b28-707a-5c46e9f108a4@gmail.com>
References: <e81690df-20b9-123e-8e8b-beac2996525a@gmail.com>
 <b7bf9c08-48e9-86a7-35b5-e639ee34fa8a@di.uminho.pt>
 <764c7b86-d8f4-6b28-707a-5c46e9f108a4@gmail.com>
Message-ID: <CAECJsSqFMt16ccHoDR=7_MfeHeW_xT9gaVhurQ9PD0hZxyYVSQ@mail.gmail.com>

HI Matteo,

I had this problem months ago. Richard, also if I recall correctly.
I recently had to log out from travis and when I logged in later, I
realized that the button was back. worth a try.

Cheers,
Harrissou

Le mer. 26 août 2020 à 15:16, matteo <matteo.ghetta at gmail.com> a écrit :

> Hi Jorge,
>
> > Alternatively, you can close and reopen your PR, if using the GH
> interface.
>
> yep I knew that but I was wondering why the button was not there anymore
>
> > On the command line, on the client side, you can force a CI rebuild with
> > an empty commit:
> > git commit --amend --no-edit
> > git push -f
>
> I didn't know this :)
>
> Cheers and thanks
>
> Matteo
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200826/98e69a6a/attachment.html>

From pigrecoinfinito at gmail.com  Wed Aug 26 08:44:42 2020
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2?=)
Date: Wed, 26 Aug 2020 08:44:42 -0700 (MST)
Subject: [QGIS-Developer] support for SpatiaLite >= 4.5
In-Reply-To: <20190201141510.ytfyem543uqva7f6@norbit.de>
References: <1549029520934-0.post@n6.nabble.com>
 <20190201141510.ytfyem543uqva7f6@norbit.de>
Message-ID: <1598456682380-0.post@n6.nabble.com>

Hi everyone,
finally we have the stable version 5.0.0

here announcement:
https://groups.google.com/g/spatialite-users/c/K3gcP9_C1Zo

thank you all for the great job



-----
https://pigrecoinfinito.wordpress.com/
--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rdmailings at duif.net  Wed Aug 26 08:54:23 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 26 Aug 2020 17:54:23 +0200
Subject: [QGIS-Developer] Temporal ranges,
	default to 'include' both beginning and end?
Message-ID: <bf692451-2252-7591-4420-a2f47b33616b@duif.net>

Hi Devs,

I want to talk about how the 'filter'-range is calculated for data.

I'm working with 'time based model output' in which for every hour a value is calculated (via some math model).

So it is 'hourly' data, which you can either see as:

id    start     data
1     10:00     10
2     11:00     13
3     12:00     11
etc

or

id    start     end     data
1     10:00     11:00   10
2     11:00     12:00   13
3     12:00     13:00   11

Attached a 6 points dataset which should load in QGIS via CSV-loader as a dataset with 2 datetime fields and 6 features

In the Anita's timemanager using a timeframe of 1 hour you would see 1 point per frame.
With current new TimeController (both for 'Single Field with dt' and 'Separate Fields for Start and End') will show MORE then one point (using a duration/timeframe of 1 hour).

Searching in the code:
https://github.com/qgis/QGIS/blob/master/src/core/qgsrange.h#L228-L238
it looks like both limits are taken into account by default.
Which in my case does not reflect my intention...

So I am not sure what a good default is.
In most ranges (for example in style rules, the starting limit/border is taken into account, and the upper limit is NOT)
if I would do a PR in which for example the default is like that:
 QgsTemporalRange( const T &begin, const T &end, bool includeBeginning = true, bool includeEnd = false );
But I am not sure if this would break things.

I am aware that (for example in your code) you can SET these params, but in my experience (try the data) the are both included.
Mmm,
https://github.com/qgis/QGIS/blob/master/src/core/qgsvectorlayertemporalproperties.cpp#L427-L448
shows that (at least for accumulated features) it should work like this...

Please test with attached mini dataset, you will see several dots at once.

Is this a bug, or do I make a mistake somewhere?

Regards,

Richard Duivenvoorde

PS 
I'm currently trying to 'registre' a layer programmatically as a temporal layer, and then want to start the control in a python plugin.
I could not find example code, so I am heavily looking at
https://github.com/qgis/QGIS/blob/master/src/gui/qgsvectorlayertemporalpropertieswidget.cpp#L101
but if somebody knows a better example, please let me know






-------------- next part --------------
A non-text attachment was scrubbed...
Name: 6dots.csv
Type: text/csv
Size: 527 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200826/d0b46ba7/attachment.csv>

From adenaculture at gmail.com  Wed Aug 26 11:49:31 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 26 Aug 2020 14:49:31 -0400
Subject: [QGIS-Developer] Processing Question: How to Select All with
	QgsProcessingParameterField
Message-ID: <CABPxTTqjssygGHrP2GgpSDVnqByTJGHLwh=oda472KpHVLpL7Q@mail.gmail.com>

The default operation of a QgsProcessingParameterField in a processing
algorithm with allowMuliple set to True is to have none of the attribute
fields selected. Is it possible to have all fields selected by default when
a layer is selected. The field names are not known ahead of time until the
layer is selected.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200826/e8231914/attachment.html>

From nyall.dawson at gmail.com  Wed Aug 26 15:58:27 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 27 Aug 2020 08:58:27 +1000
Subject: [QGIS-Developer] Processing Question: How to Select All with
	QgsProcessingParameterField
In-Reply-To: <CABPxTTqjssygGHrP2GgpSDVnqByTJGHLwh=oda472KpHVLpL7Q@mail.gmail.com>
References: <CABPxTTqjssygGHrP2GgpSDVnqByTJGHLwh=oda472KpHVLpL7Q@mail.gmail.com>
Message-ID: <CAB28AsiTGvUdinwCG1-YjB35UUUu4Tup_CO1kBEjwkSmnLXbAg@mail.gmail.com>

On Thu, 27 Aug 2020 at 04:49, C Hamilton <adenaculture at gmail.com> wrote:
>
> The default operation of a QgsProcessingParameterField in a processing algorithm with allowMuliple set to True is to have none of the attribute fields selected. Is it possible to have all fields selected by default when a layer is selected. The field names are not known ahead of time until the layer is selected.

Set "defaultToAllFields" in the QgsProcessingParameterField constructor to True.

Nyall

From nyall.dawson at gmail.com  Wed Aug 26 16:00:53 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 27 Aug 2020 09:00:53 +1000
Subject: [QGIS-Developer] Temporal ranges,
 default to 'include' both beginning and end?
In-Reply-To: <bf692451-2252-7591-4420-a2f47b33616b@duif.net>
References: <bf692451-2252-7591-4420-a2f47b33616b@duif.net>
Message-ID: <CAB28Asj2dNp0F-KBkRq8g-whN=EObWConsmKWdoV1QyGW4d3nA@mail.gmail.com>

On Thu, 27 Aug 2020 at 01:54, Richard Duivenvoorde <rdmailings at duif.net> wrote:

> Searching in the code:
> https://github.com/qgis/QGIS/blob/master/src/core/qgsrange.h#L228-L238
> it looks like both limits are taken into account by default.
> Which in my case does not reflect my intention...

Actually it doesn't -- the ranges for an individual frame are
constructed so that they include the start, but not the end.

See qgstemporalnavigationobject.cpp:102 :

   return QgsDateTimeRange( frameStart, end, true, false );

The "false" argument on the end indicates that the "end" time of the
frame is not included in the range.

If you're seeing duplicate points, then something else is at play...

Nyall



>
> So I am not sure what a good default is.
> In most ranges (for example in style rules, the starting limit/border is taken into account, and the upper limit is NOT)
> if I would do a PR in which for example the default is like that:
>  QgsTemporalRange( const T &begin, const T &end, bool includeBeginning = true, bool includeEnd = false );
> But I am not sure if this would break things.
>
> I am aware that (for example in your code) you can SET these params, but in my experience (try the data) the are both included.
> Mmm,
> https://github.com/qgis/QGIS/blob/master/src/core/qgsvectorlayertemporalproperties.cpp#L427-L448
> shows that (at least for accumulated features) it should work like this...
>
> Please test with attached mini dataset, you will see several dots at once.
>
> Is this a bug, or do I make a mistake somewhere?
>
> Regards,
>
> Richard Duivenvoorde
>
> PS
> I'm currently trying to 'registre' a layer programmatically as a temporal layer, and then want to start the control in a python plugin.
> I could not find example code, so I am heavily looking at
> https://github.com/qgis/QGIS/blob/master/src/gui/qgsvectorlayertemporalpropertieswidget.cpp#L101
> but if somebody knows a better example, please let me know
>
>
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From smwltwesa6 at gmail.com  Wed Aug 26 18:21:48 2020
From: smwltwesa6 at gmail.com (Samweli)
Date: Wed, 26 Aug 2020 18:21:48 -0700 (MST)
Subject: [QGIS-Developer] Temporal ranges,
 default to 'include' both beginning and end?
In-Reply-To: <bf692451-2252-7591-4420-a2f47b33616b@duif.net>
References: <bf692451-2252-7591-4420-a2f47b33616b@duif.net>
Message-ID: <1598491308903-0.post@n6.nabble.com>

Hi Richard, Nyall,

I had a quick look and it seems updating the filtering logic from
https://github.com/qgis/QGIS/blob/cb51326eb5585363078ee97fa0406a1ea341e2a8/src/core/qgsvectorlayertemporalproperties.cpp#L513
can fix the issue. I have played around with it, see image below showing one
point per frame.

<http://osgeo-org.1560.x6.nabble.com/file/t385313/dots_temporal.gif> 


Best,
Samweli



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From denis.rouzaud at gmail.com  Wed Aug 26 21:41:22 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 27 Aug 2020 06:41:22 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
 <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
Message-ID: <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>

Hi Matteo,

The Docker has indeed been fixed for about 2 days (and PyQGIS API docs are
being built again since this morning).

Regarding the segmentation you mention, I don't see this is related to the
Docker image.
It's a bit hard to know from this what is happening from the log.

Can you run it locally?

Cheers,
Denis


Le mer. 26 août 2020 à 15:15, matteo <matteo.ghetta at gmail.com> a écrit :

> Hi Denis,
>
> I restarted a build but it is still failing do due a segmentation fault:
>
> https://travis-ci.org/github/qgis/QGIS-Documentation/builds/720594748#L1128
>
> Is it sill work in progress?
>
> Cheers and thanks
>
> Matteo
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/70483ccf/attachment.html>

From rdmailings at duif.net  Thu Aug 27 00:43:45 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 27 Aug 2020 09:43:45 +0200
Subject: [QGIS-Developer] Temporal ranges,
 default to 'include' both beginning and end?
In-Reply-To: <1598491308903-0.post@n6.nabble.com>
References: <bf692451-2252-7591-4420-a2f47b33616b@duif.net>
 <1598491308903-0.post@n6.nabble.com>
Message-ID: <52916371-7b64-da94-cdee-da90980a0045@duif.net>

Hi Samweli,

Thanks for looking into this, I created an issue:

https://github.com/qgis/QGIS/issues/38468

with more clear example data and project, AND a movie in which you can see the problem

I do think it *is* an issue.

Regards,

Richard Duivenvoorde


On 8/27/20 3:21 AM, Samweli wrote:
> Hi Richard, Nyall,
> 
> I had a quick look and it seems updating the filtering logic from
> https://github.com/qgis/QGIS/blob/cb51326eb5585363078ee97fa0406a1ea341e2a8/src/core/qgsvectorlayertemporalproperties.cpp#L513
> can fix the issue. I have played around with it, see image below showing one
> point per frame.
> 
> <http://osgeo-org.1560.x6.nabble.com/file/t385313/dots_temporal.gif> 
> 
> 
> Best,
> Samweli
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From rdmailings at duif.net  Thu Aug 27 03:45:12 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 27 Aug 2020 12:45:12 +0200
Subject: [QGIS-Developer] PyQGIS: how to start the Temporal Animation?
Message-ID: <365202e6-95f5-769f-6429-503c22fa9bfa@duif.net>

Hi,

I'm registring a Temporal Layer fine now, but want to start the 'Temporal Controller' to start via PyQGIS (in a plugin).

This class: QgsTemporalNavigationObject has the 'play()' methods etc.

The QgsTemporalControllerWidget returns a temporalController..

So I was guessing I need to ask current Temporal Widget to hand me it's controller or navigation object to be able to start to 'play'.

But I fail to find out how.

Am I missing something, or is it not there yet?

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Thu Aug 27 04:47:56 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 27 Aug 2020 13:47:56 +0200
Subject: [QGIS-Developer] PyQGIS: how to start the Temporal Animation?
In-Reply-To: <365202e6-95f5-769f-6429-503c22fa9bfa@duif.net>
References: <365202e6-95f5-769f-6429-503c22fa9bfa@duif.net>
Message-ID: <3b643111-3407-0b74-1887-62a48d6dcbde@duif.net>

On 8/27/20 12:45 PM, Richard Duivenvoorde wrote:
> Hi,
> 
> I'm registring a Temporal Layer fine now, but want to start the 'Temporal Controller' to start via PyQGIS (in a plugin).
> 
> This class: QgsTemporalNavigationObject has the 'play()' methods etc.
> 
> The QgsTemporalControllerWidget returns a temporalController..
> 
> So I was guessing I need to ask current Temporal Widget to hand me it's controller or navigation object to be able to start to 'play'.

Ok, just found out that I can get the temporalController of the MapCanvas, and then at least play and stop the animations:

c = iface.mapCanvas().temporalController()
c.setFrameDuration(2)
c.rewindToStart()
#c.skipToEnd()
#c.next()
#c.previous()
c.playForward()

But on this instance of QgsTemporalController, I can NOT 
see https://qgis.org/pyqgis/master/core/QgsTemporalNavigationObject.html
use 
c.setTemporalExtents(range)
or ask for the extents
c.setTemporalExtents()
or set the framerate 
c.setFramesPerSecond(2.0)
etc:

anybody can enlighten me?

Regards,

Richard 

From peter.petrik at lutraconsulting.co.uk  Thu Aug 27 04:58:32 2020
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Thu, 27 Aug 2020 13:58:32 +0200
Subject: [QGIS-Developer] use qt 5.10 for CI tests
Message-ID: <CA+T_MsLe7SdZU5wi20Dr-HEbqFerGTYEdk3FRHc+a5PcuKjvOQ@mail.gmail.com>

Hi,

CI on travis runs with qt 5.9 and for
https://github.com/qgis/QGIS/pull/38448 we need to have qt 5.10+. In 5.9
the 3d shadow rendering does not work correctly and since Windows, Mac and
latest Linux distributions run on newer qt's I do not see a reason to spend
considerable time to fix the 3d shadows for qt 5.9. I was thinking to
disable this feature for builds with qt 5.9.I see the qt5.14 build in the
repository, but that one is without tests.

I am wondering how to best approach this?

Thanks,
Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/c01214de/attachment-0001.html>

From radim.blazek at gmail.com  Thu Aug 27 05:07:22 2020
From: radim.blazek at gmail.com (Radim Blazek)
Date: Thu, 27 Aug 2020 14:07:22 +0200
Subject: [QGIS-Developer] Vector data provider in Python problem
Message-ID: <CAEMrtYrjZGXZTeshuzFTuNhs2YKhS0Wy9PMCKm+nfOYGo08bjA@mail.gmail.com>

Hi,
I found that our Django vector provider written in Python does not
work anymore with QGIS 3.12.2
and Python 3.7.

I found that the problem is in QgsAbstractFeatureSource
implementation, this does not work anymore:

def getFeatures(self, request):
    return QgsFeatureIterator(MyFeatureIterator(self))

It works if I keep reference to either MyFeatureIterator or
QgsFeatureIterator, both work:

def getFeatures(self, request):
    self.iterator = MyFeatureIterator(self)
    return QgsFeatureIterator(self.iterator )

def getFeatures(self, request):
    self.iterator = QgsFeatureIterator(MyFeatureIterator(self))
    return self.iterator

Any idea why it is not working and how to implement it without keeping
reference to every new iterator?

Provider source code: https://github.com/MPASolutions/django-provider

Radim

From osgeo.mailinglist at gmail.com  Thu Aug 27 05:38:23 2020
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Thu, 27 Aug 2020 14:38:23 +0200
Subject: [QGIS-Developer] PyQGIS: how to start the Temporal Animation?
In-Reply-To: <3b643111-3407-0b74-1887-62a48d6dcbde@duif.net>
References: <365202e6-95f5-769f-6429-503c22fa9bfa@duif.net>
 <3b643111-3407-0b74-1887-62a48d6dcbde@duif.net>
Message-ID: <CACPZzQ1XsAW_CLZx2t9QmW+bMkmGi2FWBr4-ZC80BWdm4bjFtw@mail.gmail.com>

Hi,

Could be wrong but you may need to "sync" canvas with your
QgsTemporalController e.g below method

iface.mapCanvas().setTemporalController(yourTemporalControllerInstance)


Regards

Thomas


Le jeu. 27 août 2020 à 13:48, Richard Duivenvoorde <rdmailings at duif.net> a
écrit :

> On 8/27/20 12:45 PM, Richard Duivenvoorde wrote:
> > Hi,
> >
> > I'm registring a Temporal Layer fine now, but want to start the
> 'Temporal Controller' to start via PyQGIS (in a plugin).
> >
> > This class: QgsTemporalNavigationObject has the 'play()' methods etc.
> >
> > The QgsTemporalControllerWidget returns a temporalController..
> >
> > So I was guessing I need to ask current Temporal Widget to hand me it's
> controller or navigation object to be able to start to 'play'.
>
> Ok, just found out that I can get the temporalController of the MapCanvas,
> and then at least play and stop the animations:
>
> c = iface.mapCanvas().temporalController()
> c.setFrameDuration(2)
> c.rewindToStart()
> #c.skipToEnd()
> #c.next()
> #c.previous()
> c.playForward()
>
> But on this instance of QgsTemporalController, I can NOT
> see https://qgis.org/pyqgis/master/core/QgsTemporalNavigationObject.html
> use
> c.setTemporalExtents(range)
> or ask for the extents
> c.setTemporalExtents()
> or set the framerate
> c.setFramesPerSecond(2.0)
> etc:
>
> anybody can enlighten me?
>
> Regards,
>
> Richard
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/c977da50/attachment.html>

From matthias at opengis.ch  Thu Aug 27 05:45:07 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Thu, 27 Aug 2020 14:45:07 +0200
Subject: [QGIS-Developer] use qt 5.10 for CI tests
In-Reply-To: <CA+T_MsLe7SdZU5wi20Dr-HEbqFerGTYEdk3FRHc+a5PcuKjvOQ@mail.gmail.com>
References: <CA+T_MsLe7SdZU5wi20Dr-HEbqFerGTYEdk3FRHc+a5PcuKjvOQ@mail.gmail.com>
Message-ID: <CAC7zN97WyWvvPG8Mu9-YCq16Dw1eYRwAn3eXCx17Mfd9MezATw@mail.gmail.com>

Hi Peter,

I don't see a problem to conditionally disable shadows for Qt <= 5.10, we
also have other conditions depending on the Qt version in other parts of
the codebase.
Is there a hidden question how to go about testing this in CI? If yes, I'd
say the best approach would indeed be to enable tests for Qt 5.14.

Best regards
Matthias

On Thu, Aug 27, 2020 at 1:58 PM Peter Petrik <
peter.petrik at lutraconsulting.co.uk> wrote:

> Hi,
>
> CI on travis runs with qt 5.9 and for
> https://github.com/qgis/QGIS/pull/38448 we need to have qt 5.10+. In 5.9
> the 3d shadow rendering does not work correctly and since Windows, Mac and
> latest Linux distributions run on newer qt's I do not see a reason to spend
> considerable time to fix the 3d shadows for qt 5.9. I was thinking to
> disable this feature for builds with qt 5.9.I see the qt5.14 build in the
> repository, but that one is without tests.
>
> I am wondering how to best approach this?
>
> Thanks,
> Peter
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/4bedc0ea/attachment.html>

From gb_nedjima at esi.dz  Thu Aug 27 06:12:48 2020
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Thu, 27 Aug 2020 14:12:48 +0100
Subject: [QGIS-Developer] use qt 5.10 for CI tests
In-Reply-To: <CAC7zN97WyWvvPG8Mu9-YCq16Dw1eYRwAn3eXCx17Mfd9MezATw@mail.gmail.com>
References: <CA+T_MsLe7SdZU5wi20Dr-HEbqFerGTYEdk3FRHc+a5PcuKjvOQ@mail.gmail.com>
 <CAC7zN97WyWvvPG8Mu9-YCq16Dw1eYRwAn3eXCx17Mfd9MezATw@mail.gmail.com>
Message-ID: <CAGiKOuh33vcq4zthvK_VsEObUrhM825JKTfowrAe5MzMnXDZdQ@mail.gmail.com>

Hi Matthias,
Yes, I wanted to run the CI tests on a version >= Qt5.10 because if I
disable shadow rendering for <=Qt5.9, it will bypass all the tests and may
add some bugs into the codebase.


On Thu, Aug 27, 2020, 1:45 PM Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Peter,
>
> I don't see a problem to conditionally disable shadows for Qt <= 5.10, we
> also have other conditions depending on the Qt version in other parts of
> the codebase.
> Is there a hidden question how to go about testing this in CI? If yes, I'd
> say the best approach would indeed be to enable tests for Qt 5.14.
>
> Best regards
> Matthias
>
> On Thu, Aug 27, 2020 at 1:58 PM Peter Petrik <
> peter.petrik at lutraconsulting.co.uk> wrote:
>
>> Hi,
>>
>> CI on travis runs with qt 5.9 and for
>> https://github.com/qgis/QGIS/pull/38448 we need to have qt 5.10+. In 5.9
>> the 3d shadow rendering does not work correctly and since Windows, Mac and
>> latest Linux distributions run on newer qt's I do not see a reason to spend
>> considerable time to fix the 3d shadows for qt 5.9. I was thinking to
>> disable this feature for builds with qt 5.9.I see the qt5.14 build in the
>> repository, but that one is without tests.
>>
>> I am wondering how to best approach this?
>>
>> Thanks,
>> Peter
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/fdec66de/attachment.html>

From denis.rouzaud at gmail.com  Thu Aug 27 06:58:30 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 27 Aug 2020 15:58:30 +0200
Subject: [QGIS-Developer] use qt 5.10 for CI tests
In-Reply-To: <CAC7zN97WyWvvPG8Mu9-YCq16Dw1eYRwAn3eXCx17Mfd9MezATw@mail.gmail.com>
References: <CA+T_MsLe7SdZU5wi20Dr-HEbqFerGTYEdk3FRHc+a5PcuKjvOQ@mail.gmail.com>
 <CAC7zN97WyWvvPG8Mu9-YCq16Dw1eYRwAn3eXCx17Mfd9MezATw@mail.gmail.com>
Message-ID: <CAMtsY+Z4wjMgJoJkVBuTcSmrYwJJwH5vTJ6uJVfFMckRLfuvxg@mail.gmail.com>

Hi all,

It would also be time to bump Qt minimum version, SIP, and maybe C++ to 14
or 17.
There is quite some work on the CI part to make the unit tests pass again a
newer OS and/or Qt version, but this should be addressed at some point.
Doing this just after the next release which will become LTR sounds like
the right time to do this bump.

So you could leave without tests until the next release, and bump version
after the release and enable your test.
Ubuntu focal has 5.12 (LTS), Debian Buster has 5.11 (released actually
after Qt 5.12 release).

Denis



Le jeu. 27 août 2020 à 14:45, Matthias Kuhn <matthias at opengis.ch> a écrit :

> Hi Peter,
>
> I don't see a problem to conditionally disable shadows for Qt <= 5.10, we
> also have other conditions depending on the Qt version in other parts of
> the codebase.
> Is there a hidden question how to go about testing this in CI? If yes, I'd
> say the best approach would indeed be to enable tests for Qt 5.14.
>
> Best regards
> Matthias
>
> On Thu, Aug 27, 2020 at 1:58 PM Peter Petrik <
> peter.petrik at lutraconsulting.co.uk> wrote:
>
>> Hi,
>>
>> CI on travis runs with qt 5.9 and for
>> https://github.com/qgis/QGIS/pull/38448 we need to have qt 5.10+. In 5.9
>> the 3d shadow rendering does not work correctly and since Windows, Mac and
>> latest Linux distributions run on newer qt's I do not see a reason to spend
>> considerable time to fix the 3d shadows for qt 5.9. I was thinking to
>> disable this feature for builds with qt 5.9.I see the qt5.14 build in the
>> repository, but that one is without tests.
>>
>> I am wondering how to best approach this?
>>
>> Thanks,
>> Peter
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/5f8a09dd/attachment-0001.html>

From charles at kartoza.com  Thu Aug 27 07:11:30 2020
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Thu, 27 Aug 2020 16:11:30 +0200
Subject: [QGIS-Developer] [Qgis-user] Informal online virtual meeting to
	hack - AKA QHackFriday
In-Reply-To: <78d671a0-4de7-975d-a824-d3c12deaea6c@gatewaygeomatics.com>
References: <CAB2ZMRB+to26ye4JUa12acqV75wvCGevkOJcZ+SyrX=_J=gE=A@mail.gmail.com>
 <78d671a0-4de7-975d-a824-d3c12deaea6c@gatewaygeomatics.com>
Message-ID: <CAK2Kqie9n-n2uucBGR2HPtgsacEvmMuQsuVHeGNgGruc-NFnEg@mail.gmail.com>

Hello all,

Please note that I will be running a session which goes through the
changelog management process as part of the QHackFriday tomorrow
(28/08/2020) . It is a great opportunity for those who wish to contribute
to the QGIS project but do not know where to begin. No special technical
knowledge is required in order to become a part of the changelog
maintenance team.

More info on the (informal) agenda and topics we will cover is available on
the wiki at:
https://github.com/qgis/QGIS/wiki/QHF-August-2020
<https://github.com/qgis/QGIS/wiki/QHF-August-2020#qgis-changelog---how-to-help-make-the-next-release-the-most-awesome-one-ever>

You may register as a participant on the wiki, or join us by simply
connecting to https://meet.jit.si/QHackFriday at 12h00 UTC.

Looking forward to seeing everyone there.

Regards

On Thu, 27 Aug 2020 at 15:24, Jeff McKenna <jmckenna at gatewaygeomatics.com>
wrote:

> Note that tomorrow's QHackFriday event page is:
> https://github.com/qgis/QGIS/wiki/QHF-August-2020
>
> (it took some clicking to find it)
>
> -jeff
>
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> co-founder of FOSS4G
> http://gatewaygeo.com/
>
>
>
>
> On 2020-08-21 2:49 p.m., Marco Bernasocchi wrote:
> > Dear Community,
> >
> >
> > 2020, as we all know, has been a special year and among plenty other
> > issues we had to cancel all our beloved hackfests. Since we first
> > started holding bi-annual hackfests in 2009, it will be the first time
> > without an event where our friendly community can meet.
> >
> >
> >
> > That can’t be! We are a modern and thriving community based on exchange,
> > discussion and collaboration and should foster this even when physical
> > meetings are not possible.
> >
> >
> > I’m super excited to announce that after some very motivating
> > discussions on the HackFest telegram channel [2] and in the PSC,
> > starting from next week on every last Friday of each monthwe will hold
> > an informal online virtual meeting to hack around, document, discuss and
> > in general meet the awesome QGIS community.
> >
> >
> > There will normally be no formal agenda, no fixed schedule nor
> > moderators, simply join the QHackFriday(pronounced KwakFriday) on jitsi
> > [0] and say hi!
> >
> >
> > I added a page to the wiki [1], so if you have topics that you like to
> > discuss/present you can put them there and others might join you.
> >
> >
> > Stay safe and see you next Friday!
> >
> >
> >
> > [0] https://meet.jit.si/QHackFriday
> >
> > [1] https://github.com/qgis/QGIS/wiki/QHackFriday
> >
> > [2] https://t.me/joinchat/Aq2V5RPoxYYhXqUPoxRWPQ
> >
> > Picture 1: https://www.umwelt.uni-hannover.de/qgis.html
> > <https://www.umwelt.uni-hannover.de/qgis.html?&L=1>
> >
> > Picture 2: https://qgis2015.wordpress.com <
> https://qgis2015.wordpress.com/>
> >
> >
> >
> > --
> > Marco Bernasocchi
> >
> > QGIS.org Chair
> > OPENGIS.ch CEO
> > http://berna.io <http://berna.io/>
>
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/4b87c3c7/attachment.html>

From delazj at gmail.com  Thu Aug 27 07:27:23 2020
From: delazj at gmail.com (DelazJ)
Date: Thu, 27 Aug 2020 16:27:23 +0200
Subject: [QGIS-Developer] Why are only 5 entries now displayed on the
 plugin pages?
In-Reply-To: <CABPxTTrj8VXFzvnJ9wUH0WcFpNwDNOo84Ge1b=psZsDzFwsfig@mail.gmail.com>
References: <CABPxTTrOkcVn4h0sbZ2jsYnK=DuRm7LrkU47YRUrHuqqwG1cvg@mail.gmail.com>
 <3ACA5EB6-FE0E-43EF-8817-D978D734FDCA@me.com>
 <CABPxTTrj8VXFzvnJ9wUH0WcFpNwDNOo84Ge1b=psZsDzFwsfig@mail.gmail.com>
Message-ID: <CAECJsSrQOUVknqr=h2K-SXonTaFUQ9xvx-bvynb+jM9piTZG9g@mail.gmail.com>

Hi,

I share Calvin feelings here. 5 items per page are too short and do not
help when you want to browse the repository. Any chance we raise the
default value to 10 or 20?

Thanks,
Harrissou

Le ven. 17 juil. 2020 à 18:03, C Hamilton <adenaculture at gmail.com> a écrit :

> I liked it better when the default setting was showing 20 entries.
>
> Thanks,
> CH
>
> On Wed, Jul 15, 2020 at 3:14 PM F. Shah <insar at me.com> wrote:
>
>> Hi Hamilton,
>> These are default settings for generating/pagination of those pages. You
>> can add a parameter per_page to Change the view. For example use this link
>> for 20 plugins per page.
>>
>> https://plugins.qgis.org/plugins/fresh?per_page=20
>> <https://plugins.qgis.org/plugins/fresh/?per_page=20>
>>
>> You can use the same approach for other features e.g. stable, popular,
>> featured and etc.
>>
>> Hope this helps.
>>
>> Regards
>> FS
>>
>> On 15. Jul 2020, at 19:13, C Hamilton <adenaculture at gmail.com> wrote:
>>
>>
>> ﻿
>> I was wondering why only 5 plugins are being shown on pages such as:
>>
>> https://plugins.qgis.org/plugins/fresh/
>>
>> I really prefer seeing more such as 20 at a time.
>>
>> Thanks,
>>
>> Calvin
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/d9ecfac6/attachment.html>

From jlindsay at uoguelph.ca  Thu Aug 27 08:43:44 2020
From: jlindsay at uoguelph.ca (John Lindsay)
Date: Thu, 27 Aug 2020 15:43:44 +0000
Subject: [QGIS-Developer] Point cloud processing
Message-ID: <YTXPR0101MB1102C083FCEB06818254CC99C1550@YTXPR0101MB1102.CANPRD01.PROD.OUTLOOK.COM>

Hello all,


This is one of the first times that I've posted to this list-serv, so I hope you'll forgive my ignorance if this is an inappropriate venue for this. I've noticed from a Twitter announcement that QGIS is pursuing native point cloud capabilities. I thought that this would be a good time that at the moment there is a substantial amount of LiDAR data processing capability that can be derived by using the WhiteboxTools QGIS front-end, and in particular the LiDAR processing toolbox<https://jblindsay.github.io/wbt_book/available_tools/lidar_tools.html>. The QGIS front-end is maintained by Alex Bruy, and I know that there has been interest in the past in including this in the main QGIS development branch such that WBT could be a standard toolset, much like how the SAGA and GRASS tools are now. I'm wondering, as you are thinking about enhancing QGIS's point cloud capabilities, if this is an opportune time to have that broader discussion of inclusion of WBT. While I have developed WBT to be front-end agnostic, and there are other front-ends for ArcGIS, Python, and R, the QGIS front-end is personally the most important of these to me. I would be very pleased for these tools to be distributed as a core component of QGIS if there is a willingness to do so among this members of this group.


Regards,


Dr. John Lindsay, Associate Professor

Dept. of Geography, Environment & Geomatics,

The University of Guelph,

Room 346, Hutt Building,
E-mail: jlindsay at uoguelph.ca

Phone: (519) 824-4120 ext. 56074

Web: https://geg.uoguelph.ca/faculty/lindsay-john

Research page: https://jblindsay.github.io/ghrg/index.html

WhiteboxTools OS GIS project: https://jblindsay.github.io/ghrg/WhiteboxTools/index.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/9ed3d98e/attachment-0001.html>

From luis3176 at yahoo.com  Thu Aug 27 10:12:06 2020
From: luis3176 at yahoo.com (Luis Eduardo)
Date: Thu, 27 Aug 2020 17:12:06 +0000 (UTC)
Subject: [QGIS-Developer] Error in raster histogram in QGIS3.0 with PyQGIS
References: <1344668458.310358.1598548326264.ref@mail.yahoo.com>
Message-ID: <1344668458.310358.1598548326264@mail.yahoo.com>


I am working on a plugin, one of its functions is to create the raster layer histogram. I generate the histogram using the histogram method of QgsRasterInterface and graph it well, without problems in QGis3.4. But in QGis3.0 it does not allow to generate the histogram. This is a recognized error? when creating the histogram in QGis3.0?

Details:
   
   - If I get correctly the statistics with bandStatistics
   - The values of histogram.minimum and histogram.maximum do not coincide with the maximum and minimum of the statistics.
   - Try assigning the maximum, minimum and extension parameters. As well as placing None,None, but I still did not get a result

Thank you, I look forward to your help
Luis Eduardo PerezVenezuelaDeveloper in formation :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/8af0b6bf/attachment.html>

From adenaculture at gmail.com  Thu Aug 27 10:32:43 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 27 Aug 2020 13:32:43 -0400
Subject: [QGIS-Developer] Processing Question: How to Select All with
	QgsProcessingParameterField
In-Reply-To: <CAB28AsiTGvUdinwCG1-YjB35UUUu4Tup_CO1kBEjwkSmnLXbAg@mail.gmail.com>
References: <CABPxTTqjssygGHrP2GgpSDVnqByTJGHLwh=oda472KpHVLpL7Q@mail.gmail.com>
 <CAB28AsiTGvUdinwCG1-YjB35UUUu4Tup_CO1kBEjwkSmnLXbAg@mail.gmail.com>
Message-ID: <CABPxTTq5XMQibnm=1U=kngcFJYTmP+RfPGA3Yrip+38MALUvMw@mail.gmail.com>

Nyall,

Thanks! That is exactly what I was looking for.

Calvin

On Wed, Aug 26, 2020 at 6:58 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Thu, 27 Aug 2020 at 04:49, C Hamilton <adenaculture at gmail.com> wrote:
> >
> > The default operation of a QgsProcessingParameterField in a processing
> algorithm with allowMuliple set to True is to have none of the attribute
> fields selected. Is it possible to have all fields selected by default when
> a layer is selected. The field names are not known ahead of time until the
> layer is selected.
>
> Set "defaultToAllFields" in the QgsProcessingParameterField constructor to
> True.
>
> Nyall
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/df833b33/attachment.html>

From matthias at opengis.ch  Thu Aug 27 10:44:07 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Thu, 27 Aug 2020 19:44:07 +0200
Subject: [QGIS-Developer] use qt 5.10 for CI tests
In-Reply-To: <CAGiKOuh33vcq4zthvK_VsEObUrhM825JKTfowrAe5MzMnXDZdQ@mail.gmail.com>
References: <CA+T_MsLe7SdZU5wi20Dr-HEbqFerGTYEdk3FRHc+a5PcuKjvOQ@mail.gmail.com>
 <CAC7zN97WyWvvPG8Mu9-YCq16Dw1eYRwAn3eXCx17Mfd9MezATw@mail.gmail.com>
 <CAGiKOuh33vcq4zthvK_VsEObUrhM825JKTfowrAe5MzMnXDZdQ@mail.gmail.com>
Message-ID: <CAC7zN94F0cRPNU8xe8=3JibRuKrwQFSRxqZq_oBdtmhM-v0Nnw@mail.gmail.com>

Hi Belgacem,

It would be very good to have tests indeed !
If you have them ready, it should be straightforward to enable these on the
qt 5.14 build.

Best regards
Matthias

On Thu, Aug 27, 2020 at 3:13 PM BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:

> Hi Matthias,
> Yes, I wanted to run the CI tests on a version >= Qt5.10 because if I
> disable shadow rendering for <=Qt5.9, it will bypass all the tests and may
> add some bugs into the codebase.
>
>
> On Thu, Aug 27, 2020, 1:45 PM Matthias Kuhn <matthias at opengis.ch> wrote:
>
>> Hi Peter,
>>
>> I don't see a problem to conditionally disable shadows for Qt <= 5.10, we
>> also have other conditions depending on the Qt version in other parts of
>> the codebase.
>> Is there a hidden question how to go about testing this in CI? If yes,
>> I'd say the best approach would indeed be to enable tests for Qt 5.14.
>>
>> Best regards
>> Matthias
>>
>> On Thu, Aug 27, 2020 at 1:58 PM Peter Petrik <
>> peter.petrik at lutraconsulting.co.uk> wrote:
>>
>>> Hi,
>>>
>>> CI on travis runs with qt 5.9 and for
>>> https://github.com/qgis/QGIS/pull/38448 we need to have qt 5.10+. In
>>> 5.9 the 3d shadow rendering does not work correctly and since Windows, Mac
>>> and latest Linux distributions run on newer qt's I do not see a reason to
>>> spend considerable time to fix the 3d shadows for qt 5.9. I was thinking to
>>> disable this feature for builds with qt 5.9.I see the qt5.14 build in the
>>> repository, but that one is without tests.
>>>
>>> I am wondering how to best approach this?
>>>
>>> Thanks,
>>> Peter
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/a69de0b1/attachment.html>

From jvenegasperu at gmail.com  Thu Aug 27 20:35:27 2020
From: jvenegasperu at gmail.com (Jose Mercedes Venegas Acevedo)
Date: Thu, 27 Aug 2020 22:35:27 -0500
Subject: [QGIS-Developer] Compile QGIS
Message-ID: <CA+KjtGdAmJCteEwcG2ZaKHS-0Eo8V-DGuMDf5LhE4KB6t7C+1g@mail.gmail.com>

Buen dia busco a alguien que me brinde soporte de pago para compilar QGIS
en español.

Aclaró que el instalador que quiero hacer es para Windows

He intentado compilar QGIS con Visual Studio y no he podido lograrlo así
que busco alguien que pueda brindarme soporte para lograr compilar y
generar un instalador propio.

Aclaro no es mi intención tener un qgis personalizado con otras funciones
no llegó a tanto jeje.

lo que quiero hacer mas bien es un instalador ligero de qgis ajustado a mis
necesidades por ejemplo quiero retirar todo los proveedores de datos y
quedarme solo con 3 archivo de texto, shape y postgres, los demas SQL
Server y demas no los necesito.

igual quiero hacer con las barras de herramientas pienso que simplemente
podría comentar las lineas de codigo de los botones que no necesito.

hacer lo mismo con los menus etc etc.

qgis hace muchísimas cosas yo quiero quedarme solo con lo estrictamente
necesario para mi trabajo

saludos espero que la oferta que puedan darme por brindarme ese servicio
este a mi alcance que tengan buen dia.

-- 
José Mercedes Venegas Acevedo
cel Mov RPC 955725384
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200827/251f098a/attachment.html>

From saber.razmjooei at lutraconsulting.co.uk  Thu Aug 27 22:46:26 2020
From: saber.razmjooei at lutraconsulting.co.uk (Saber Razmjooei)
Date: Fri, 28 Aug 2020 06:46:26 +0100
Subject: [QGIS-Developer] Point cloud processing
In-Reply-To: <YTXPR0101MB1102C083FCEB06818254CC99C1550@YTXPR0101MB1102.CANPRD01.PROD.OUTLOOK.COM>
References: <YTXPR0101MB1102C083FCEB06818254CC99C1550@YTXPR0101MB1102.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAH=WbRCEGspcWEDK6seRN5hUC7kzJRjHQ+8Wjo2mOjq46a_4Hg@mail.gmail.com>

Hi John,

Many thanks for pointing to the WhiteboxTools. I was not personally aware
of this.

A general note about the plan for supporting point cloud data in QGIS: for
the first phase (the one we are currently running a crowdfunding campaign
for) the idea is to add a new data provider (similar to vector, raster,
mesh) to handle point cloud data. This will allow users to visualise and
style the data. It will also be the first and necessary step towards
opening up the rest of QGIS (e.g. the processing toolbox) to make use of
the new data provider.

In terms of shipping WhiteboxTool with QGIS, I will leave it to others to
comment on, but I know there has been some efforts to discourage shipping
extra tools with QGIS and instead working with developers of other
processing providers to integrate their tools as a Processing plugin.

Kind regards
Saber

On Thu, 27 Aug 2020 at 16:43, John Lindsay <jlindsay at uoguelph.ca> wrote:

> Hello all,
>
>
> This is one of the first times that I've posted to this list-serv, so I
> hope you'll forgive my ignorance if this is an inappropriate venue for
> this. I've noticed from a Twitter announcement that QGIS is pursuing native
> point cloud capabilities. I thought that this would be a good time that at
> the moment there is a substantial amount of LiDAR data processing
> capability that can be derived by using the WhiteboxTools QGIS front-end,
> and in particular the LiDAR processing toolbox
> <https://jblindsay.github.io/wbt_book/available_tools/lidar_tools.html>.
> The QGIS front-end is maintained by Alex Bruy, and I know that there has
> been interest in the past in including this in the main QGIS development
> branch such that WBT could be a standard toolset, much like how the SAGA
> and GRASS tools are now. I'm wondering, as you are thinking about enhancing
> QGIS's point cloud capabilities, if this is an opportune time to have that
> broader discussion of inclusion of WBT. While I have developed WBT to be
> front-end agnostic, and there are other front-ends for ArcGIS, Python, and
> R, the QGIS front-end is personally the most important of these to me. I
> would be very pleased for these tools to be distributed as a core component
> of QGIS if there is a willingness to do so among this members of this group.
>
>
> Regards,
>
> Dr. John Lindsay, Associate Professor
>
> Dept. of Geography, Environment & Geomatics,
>
> The University of Guelph,
> Room 346, Hutt Building,
> E-mail: jlindsay at uoguelph.ca
>
> Phone: (519) 824-4120 ext. 56074
>
> Web: https://geg.uoguelph.ca/faculty/lindsay-john
>
> Research page: https://jblindsay.github.io/ghrg/index.html
>
> WhiteboxTools OS GIS project:
> https://jblindsay.github.io/ghrg/WhiteboxTools/index.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Saber Razmjooei
www.lutraconsulting.co.uk
+44 (0)7568 129733
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200828/f9cfd3d3/attachment.html>

From matteo.ghetta at gmail.com  Fri Aug 28 00:12:32 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Fri, 28 Aug 2020 09:12:32 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
 <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
 <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>
Message-ID: <57643f60-8d41-e17e-b647-c2c4b7ea6a58@gmail.com>

Hi Denis,

> The Docker has indeed been fixed for about 2 days (and PyQGIS API docs
> are being built again since this morning).
> 
> Regarding the segmentation you mention, I don't see this is related to
> the Docker image.
> It's a bit hard to know from this what is happening from the log.
> 
> Can you run it locally?

I get some problems running tests locally, see

https://lists.osgeo.org/pipermail/qgis-developer/2020-August/062037.html

I also noticed that the docker is almost 10GB, is this size normal?

If you have some suggestion to solve this problem I'll update also the
documentation (that is right now outdated except for the docker part).

Cheers and thanks

Matteo

From denis.rouzaud at gmail.com  Fri Aug 28 00:26:54 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Fri, 28 Aug 2020 09:26:54 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <57643f60-8d41-e17e-b647-c2c4b7ea6a58@gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
 <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
 <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>
 <57643f60-8d41-e17e-b647-c2c4b7ea6a58@gmail.com>
Message-ID: <CAMtsY+bBz=RsodFdrdHxexb8DBTqVe-q=vhHe+KHz1mPABkFaA@mail.gmail.com>

Le ven. 28 août 2020 à 09:12, matteo <matteo.ghetta at gmail.com> a écrit :

> Hi Denis,
>
> > The Docker has indeed been fixed for about 2 days (and PyQGIS API docs
> > are being built again since this morning).
> >
> > Regarding the segmentation you mention, I don't see this is related to
> > the Docker image.
> > It's a bit hard to know from this what is happening from the log.
> >
> > Can you run it locally?
>
> I get some problems running tests locally, see
>
> https://lists.osgeo.org/pipermail/qgis-developer/2020-August/062037.html


where is start_qgis defined? I don't find it in QGIS sources.

>
>
> I also noticed that the docker is almost 10GB, is this size normal?
>

No. Looking on docker hub, the image is around 1.8gb (still a lot though)
https://hub.docker.com/repository/docker/qgis/qgis/tags?page=1


>
> If you have some suggestion to solve this problem I'll update also the
> documentation (that is right now outdated except for the docker part).
>
> Cheers and thanks
>
> Matteo
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200828/e620d5fe/attachment-0001.html>

From carlo.bertelli at gmail.com  Fri Aug 28 00:33:42 2020
From: carlo.bertelli at gmail.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Fri, 28 Aug 2020 09:33:42 +0200
Subject: [QGIS-Developer] What about AsincPg?
Message-ID: <CALc8-V+cP9oAb4qY=qVHH0hUwma=v2sTs9hcOR2iQKN+-8Bucw@mail.gmail.com>

Maybe AsyncPg (https://github.com/MagicStack/asyncpg) could be the answer
for the slow pace of psycopg.
What do you think?
Using database introspection that was introduced since version 9.2, AsincPg
is not compatible with version 8.4 that is still widely used, but declared
speed gains seem worth trying.
c

-- 
--------------------------------------------------------------------------
Carlo A. Bertelli
   Charta servizi e sistemi per il territorio e la storia ambientale srl
          Dipendenze del palazzo Doria,
          vc. alla Chiesa della Maddalena 9/2 16124      Genova (Italy)
          tel./fax +39(0)10 2475439  +39 0108566195  mobile:+39 393 1590711
   e-mail: bertelli at chartasrl.eu      http://www.chartasrl.eu
--------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200828/85fdb0e3/attachment.html>

From matteo.ghetta at gmail.com  Fri Aug 28 01:35:23 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Fri, 28 Aug 2020 10:35:23 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <CAMtsY+bBz=RsodFdrdHxexb8DBTqVe-q=vhHe+KHz1mPABkFaA@mail.gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
 <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
 <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>
 <57643f60-8d41-e17e-b647-c2c4b7ea6a58@gmail.com>
 <CAMtsY+bBz=RsodFdrdHxexb8DBTqVe-q=vhHe+KHz1mPABkFaA@mail.gmail.com>
Message-ID: <6c61f3e6-7e89-8a30-5d74-cc3573e4a0d1@gmail.com>

> where is start_qgis defined? I don't find it in QGIS sources. 

I thought it is in the output folder (QGIS_PREFIX_PATH =
/home/matteo/dev/qgis-master/output)

do you have any hint where it is or should be?

> No. Looking on docker hub, the image is around 1.8gb (still a lot though)
> https://hub.docker.com/repository/docker/qgis/qgis/tags?page=1

well this is what I have on my disk:

REPOSITORY           TAG                 IMAGE ID            CREATED
         SIZE
qgis/documentation   latest              71ede4e335e9        4 minutes
ago       5.4GB
qgis/qgis            latest              0b3f9be7572e        5 hours ago
        5.32GB

p.s. testing with docker is also not working....

docker run --rm \
	--env=QGIS_PREFIX_PATH=/usr \
	--user=0 \
	--volume=:/documentation \
	qgis/documentation:latest
make: *** No rule to make target 'doctest'.  Stop.
make: *** [docker.mk:5: doctest] Error 2


Matteo

From rdmailings at duif.net  Fri Aug 28 01:43:39 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 28 Aug 2020 10:43:39 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <6c61f3e6-7e89-8a30-5d74-cc3573e4a0d1@gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
 <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
 <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>
 <57643f60-8d41-e17e-b647-c2c4b7ea6a58@gmail.com>
 <CAMtsY+bBz=RsodFdrdHxexb8DBTqVe-q=vhHe+KHz1mPABkFaA@mail.gmail.com>
 <6c61f3e6-7e89-8a30-5d74-cc3573e4a0d1@gmail.com>
Message-ID: <8318b1bb-c45e-afbf-800e-8d73ca7b37e6@duif.net>

On 8/28/20 10:35 AM, matteo wrote:
>> where is start_qgis defined? I don't find it in QGIS sources. 
> I thought it is in the output folder (QGIS_PREFIX_PATH =
> /home/matteo/dev/qgis-master/output)
> 
> do you have any hint where it is or should be?

in is in the conf.py:

https://github.com/qgis/QGIS-Documentation/blob/master/conf.py#L343

Regards,

Richard Duivenvoorde


From matteo.ghetta at gmail.com  Fri Aug 28 01:51:00 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Fri, 28 Aug 2020 10:51:00 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <8318b1bb-c45e-afbf-800e-8d73ca7b37e6@duif.net>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
 <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
 <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>
 <57643f60-8d41-e17e-b647-c2c4b7ea6a58@gmail.com>
 <CAMtsY+bBz=RsodFdrdHxexb8DBTqVe-q=vhHe+KHz1mPABkFaA@mail.gmail.com>
 <6c61f3e6-7e89-8a30-5d74-cc3573e4a0d1@gmail.com>
 <8318b1bb-c45e-afbf-800e-8d73ca7b37e6@duif.net>
Message-ID: <b5a28bcd-6d49-5442-2cd7-7fa96e53a5c0@gmail.com>

Hi Richard,

> in is in the conf.py:
> 
> https://github.com/qgis/QGIS-Documentation/blob/master/conf.py#L343
> 

oh right.... my fault.. but tests are still failing with a compiled
version of QGIS. Can I ask you how you user.mk file looks like?

Cheers and thanks

Matteo

From adenaculture at gmail.com  Fri Aug 28 09:37:33 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 28 Aug 2020 12:37:33 -0400
Subject: [QGIS-Developer] Please show 15-20 plugin entries per page by
	default
Message-ID: <CABPxTTpjNP0sPMpAkES68m5Gw4kQBEsBt-PB-H2t0TAKd__Kmw@mail.gmail.com>

I have raised this issue before, but I want to raise it again. Can we
please have at least 15-20 plugins displayed by default on
https://plugins.qgis.org/plugins/ and all of the other lists. This is what
it used to be, but was changed fairly recently. Only showing 5 plugins is
not very useful for browsing. I know there is a way to manually increase
that number, but I can never remember how to do it without looking it up
which means I usually am stuck with 5 at a time. I think that previous to
this change it was showing 20 entries.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200828/62ffd9e5/attachment.html>

From Matthias.Heckmann at gmx.net  Fri Aug 28 10:08:37 2020
From: Matthias.Heckmann at gmx.net (Matthias Heckmann)
Date: Fri, 28 Aug 2020 19:08:37 +0200
Subject: [QGIS-Developer] Blocking of SAGA & GRASS batch files by MS
	AppLocker
Message-ID: <22e2a841-353a-30b0-cd5a-dc521d23fe8a@gmx.net>

Dear QGIS Developers,

due to recent security measures of my organization, execution of
programs (exe, bat, etc…) is only possible in a certified folder e.g.
C:/Programs/...

The SAGA integration in QGIS is based on the creation and execution of a
temporal .bat file (“SAGA_batch_job.bat”) createt in
%OSDRIVE%\USERNAME\AppData\QGIS\QGIS3\PROFILES\DEFAULT\PROCESSING\SAGA_BATCH_JOB.BAT
calling SAGA from the command prompt with the individual parameters of
the respective tool.

Similarly GRASS uses a .bat file (Grass_Batch_job.cmd) for some tools
and OTB and others also use executable files in folders outside the QGIS
programm folder structure.

These batch files/executable files get blocked by the Microsoft Windows
AppLocker
Is there a possibility to relocate these batch files within the
C/Programs/QGIS3.xx/somewhere… folder to avoid blocking by infamous
applocker? Certifcation and excemption of these files by my organisation
is apparently not possible.

Thank for your help!

Matthias


--
Diese E-Mail wurde von AVG auf Viren geprüft.
http://www.avg.com


From gb_nedjima at esi.dz  Fri Aug 28 12:02:38 2020
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Fri, 28 Aug 2020 20:02:38 +0100
Subject: [QGIS-Developer] GSoC 2020 Final report
Message-ID: <CAGiKOuiL2qwSUx-tGS-T8LeSa=wu51WjgrZ4EG8C3UnrnzSO+w@mail.gmail.com>

Hi all,

With the Google summer of code project coding period coming to an end, I
have my final report here: final report document
<https://docs.google.com/document/d/1z7mNqrIhtgouOrdttNVQAr-yHJwFF55ry1KBts5-A8g/edit>
.
I have my weekly reports also collected here on: OSGEO wiki page
<https://wiki.osgeo.org/wiki/Improving_qgis_3d>.
I'm looking forward to making more contributions in the future :)
Best regards,
-- 
Belgacem Nedjima
4th year computer science and engineering student.
https://github.com/NEDJIMAbelgacem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200828/19fef4de/attachment.html>

From imajimatika at gmail.com  Fri Aug 28 22:14:01 2020
From: imajimatika at gmail.com (Ismail Sunni)
Date: Sat, 29 Aug 2020 07:14:01 +0200
Subject: [QGIS-Developer] GSoC 2020 Final report
In-Reply-To: <CAGiKOuiL2qwSUx-tGS-T8LeSa=wu51WjgrZ4EG8C3UnrnzSO+w@mail.gmail.com>
References: <CAGiKOuiL2qwSUx-tGS-T8LeSa=wu51WjgrZ4EG8C3UnrnzSO+w@mail.gmail.com>
Message-ID: <CAEh5jtEB0+d-dsbKTeHeYYhEaPgVQx89pc_cKPWBTn96_xL1gg@mail.gmail.com>

Amazing work Belgacem, congratulations!

Best regards.

On Fri, Aug 28, 2020 at 9:03 PM BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:

> Hi all,
>
> With the Google summer of code project coding period coming to an end, I
> have my final report here: final report document
> <https://docs.google.com/document/d/1z7mNqrIhtgouOrdttNVQAr-yHJwFF55ry1KBts5-A8g/edit>
> .
> I have my weekly reports also collected here on: OSGEO wiki page
> <https://wiki.osgeo.org/wiki/Improving_qgis_3d>.
> I'm looking forward to making more contributions in the future :)
> Best regards,
> --
> Belgacem Nedjima
> 4th year computer science and engineering student.
> https://github.com/NEDJIMAbelgacem
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Ismail Sunni
Software Engineer
ismailsunni.id
ismailsunni.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200829/d5c9d14d/attachment.html>

From matthias at opengis.ch  Sun Aug 30 08:14:03 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Sun, 30 Aug 2020 17:14:03 +0200
Subject: [QGIS-Developer] GSoC 2020 Final report
In-Reply-To: <CAGiKOuiL2qwSUx-tGS-T8LeSa=wu51WjgrZ4EG8C3UnrnzSO+w@mail.gmail.com>
References: <CAGiKOuiL2qwSUx-tGS-T8LeSa=wu51WjgrZ4EG8C3UnrnzSO+w@mail.gmail.com>
Message-ID: <CAC7zN955nk1GGOPm644tRgx3-3xaJPb-GxJ0YBJSBKTJv1m3rQ@mail.gmail.com>

Hi Belgacem,

Thanks for the report and all the work done during this GSOC. It was a
great pleasure seeing your regular updates.
You have done an amazing job.

Many thanks, looking forward to more contributions to come !
Matthias

On Fri, Aug 28, 2020 at 9:03 PM BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:

> Hi all,
>
> With the Google summer of code project coding period coming to an end, I
> have my final report here: final report document
> <https://docs.google.com/document/d/1z7mNqrIhtgouOrdttNVQAr-yHJwFF55ry1KBts5-A8g/edit>
> .
> I have my weekly reports also collected here on: OSGEO wiki page
> <https://wiki.osgeo.org/wiki/Improving_qgis_3d>.
> I'm looking forward to making more contributions in the future :)
> Best regards,
> --
> Belgacem Nedjima
> 4th year computer science and engineering student.
> https://github.com/NEDJIMAbelgacem
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200830/5ea96883/attachment.html>

From jvenegasperu at gmail.com  Sun Aug 30 08:22:46 2020
From: jvenegasperu at gmail.com (Jose Mercedes Venegas Acevedo)
Date: Sun, 30 Aug 2020 10:22:46 -0500
Subject: [QGIS-Developer] Develop of o speak spanish
Message-ID: <CA+KjtGeuofPqmPxAdDBL-Yb-yh_YRF8PfXpwDqJ3==7-k9RD3g@mail.gmail.com>

Buen dia

Alguien que pueda cotizarme el desarrollo de dos plugins
1.- Uno para el inicio de sesión en un servidor web para usar esos datos en
los orígenes de datos

2.- Un Plugin para soportar otros resultados además del número de objetos
en la capa así como la actualización de este valor en lugar de mantenerse
fijo a pesar de que ya cambio la BD en este caso lo requerimos para Postgres

Alguien por aquí que entienda español que pueda cotizarme estos dos plugins?

Saludos a todos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200830/f459d446/attachment.html>

From bernd.vogelgesang at gmx.de  Sun Aug 30 08:39:59 2020
From: bernd.vogelgesang at gmx.de (Bernd Vogelgesang)
Date: Sun, 30 Aug 2020 17:39:59 +0200
Subject: [QGIS-Developer] Develop of o speak spanish
In-Reply-To: <CA+KjtGeuofPqmPxAdDBL-Yb-yh_YRF8PfXpwDqJ3==7-k9RD3g@mail.gmail.com>
References: <CA+KjtGeuofPqmPxAdDBL-Yb-yh_YRF8PfXpwDqJ3==7-k9RD3g@mail.gmail.com>
Message-ID: <03ac8b05-f6bf-e081-5e20-9756f4277180@gmx.de>

On 30.08.20 17:22, Jose Mercedes Venegas Acevedo wrote:
> Buen dia
>
> Alguien que pueda cotizarme el desarrollo de dos plugins
> 1.- Uno para el inicio de sesión en un servidor web para usar esos
> datos en los orígenes de datos
>
> 2.- Un Plugin para soportar otros resultados además del número de
> objetos en la capa así como la actualización de este valor en lugar de
> mantenerse fijo a pesar de que ya cambio la BD en este caso lo
> requerimos para Postgres
>
> Alguien por aquí que entienda español que pueda cotizarme estos dos
> plugins?
>
> Saludos a todos
Good day

Someone who can quote me the development of two plugins
1.- One for logging into a web server to use that data in the data sources

2.- A Plugin to support other results besides the number of objects in
the layer as well as the update of this value instead of keeping it
fixed even though we already changed the DB in this case we require it
for Postgres

Anyone around here who understands Spanish who can quote me these two
plugins?

Greetings to all

Translated with www.DeepL.com/Translator (free version)

From luis3176 at yahoo.com  Sun Aug 30 09:02:09 2020
From: luis3176 at yahoo.com (Luis Eduardo)
Date: Sun, 30 Aug 2020 16:02:09 +0000 (UTC)
Subject: [QGIS-Developer] QgsRasterBandStats returns nan for mean and sum of
 squares in QGIS3.4
References: <933406623.362294.1598803329295.ref@mail.yahoo.com>
Message-ID: <933406623.362294.1598803329295@mail.yahoo.com>

Greetings, I would greatly appreciate your help.
I have a problem with certain raster files in QGIS 3.4. When requesting statistics via QgsRasterBandStats the average, the sum returns nan.The other statistics minimum, maximum, sum of squares and standard deviation if they return expected values, float.
I think, that the error could be that the method considers the nan in the calculation, in the mean and sum.
How can I solve it? What alternative is there?
I want to avoid the alternative of reading the raster with Gdal again directly. In that case it would be better to redo all my code and work directly with GDal and numpy

Thank you for your attention
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200830/76426c5e/attachment.html>

From tim at kartoza.com  Sun Aug 30 13:18:56 2020
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 30 Aug 2020 21:18:56 +0100
Subject: [QGIS-Developer] GSoC 2020 Final report
In-Reply-To: <CAC7zN955nk1GGOPm644tRgx3-3xaJPb-GxJ0YBJSBKTJv1m3rQ@mail.gmail.com>
References: <CAGiKOuiL2qwSUx-tGS-T8LeSa=wu51WjgrZ4EG8C3UnrnzSO+w@mail.gmail.com>
 <CAC7zN955nk1GGOPm644tRgx3-3xaJPb-GxJ0YBJSBKTJv1m3rQ@mail.gmail.com>
Message-ID: <CAES-DZQHYPy3gCweRL1uonZ32yfm9z8Z8ucv3xXZyvLpgiDeHg@mail.gmail.com>

>From me too:  thank you for all your hard work, and the great contribution
you have made to QGIS. I hope you will stick around and become part of our
friendly community!

Regards

Tim

On Sun, Aug 30, 2020 at 4:14 PM Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Belgacem,
>
> Thanks for the report and all the work done during this GSOC. It was a
> great pleasure seeing your regular updates.
> You have done an amazing job.
>
> Many thanks, looking forward to more contributions to come !
> Matthias
>
> On Fri, Aug 28, 2020 at 9:03 PM BELGACEM NEDJIMA <gb_nedjima at esi.dz>
> wrote:
>
>> Hi all,
>>
>> With the Google summer of code project coding period coming to an end, I
>> have my final report here: final report document
>> <https://docs.google.com/document/d/1z7mNqrIhtgouOrdttNVQAr-yHJwFF55ry1KBts5-A8g/edit>
>> .
>> I have my weekly reports also collected here on: OSGEO wiki page
>> <https://wiki.osgeo.org/wiki/Improving_qgis_3d>.
>> I'm looking forward to making more contributions in the future :)
>> Best regards,
>> --
>> Belgacem Nedjima
>> 4th year computer science and engineering student.
>> https://github.com/NEDJIMAbelgacem
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200830/a76a4ff2/attachment.html>

From tim at kartoza.com  Sun Aug 30 14:17:05 2020
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 30 Aug 2020 22:17:05 +0100
Subject: [QGIS-Developer] Please show 15-20 plugin entries per page by
	default
In-Reply-To: <CABPxTTpjNP0sPMpAkES68m5Gw4kQBEsBt-PB-H2t0TAKd__Kmw@mail.gmail.com>
References: <CABPxTTpjNP0sPMpAkES68m5Gw4kQBEsBt-PB-H2t0TAKd__Kmw@mail.gmail.com>
Message-ID: <CAES-DZQkFn2vmQS9zRjPnh_k1V=8dwL=Pd_O5Bra+tspR7Vv9g@mail.gmail.com>

Hi

On Fri, Aug 28, 2020 at 5:38 PM C Hamilton <adenaculture at gmail.com> wrote:

> I have raised this issue before, but I want to raise it again. Can we
> please have at least 15-20 plugins displayed by default on
> https://plugins.qgis.org/plugins/ and all of the other lists. This is
> what it used to be, but was changed fairly recently. Only showing 5 plugins
> is not very useful for browsing. I know there is a way to manually increase
> that number, but I can never remember how to do it without looking it up
> which means I usually am stuck with 5 at a time. I think that previous to
> this change it was showing 20 entries.
>

See https://github.com/qgis/QGIS-Django/pull/83

Please use https://github.com/qgis/QGIS-Django/issues for plugin repo
issues (with a nudge here if your issue hasn't received attention after
some time).

Regards

Tim



>
> Thanks,
>
> Calvin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200830/90dd3015/attachment.html>

From gb_nedjima at esi.dz  Sun Aug 30 15:05:38 2020
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Sun, 30 Aug 2020 23:05:38 +0100
Subject: [QGIS-Developer] GSoC 2020 Final report
In-Reply-To: <CAES-DZQHYPy3gCweRL1uonZ32yfm9z8Z8ucv3xXZyvLpgiDeHg@mail.gmail.com>
References: <CAGiKOuiL2qwSUx-tGS-T8LeSa=wu51WjgrZ4EG8C3UnrnzSO+w@mail.gmail.com>
 <CAC7zN955nk1GGOPm644tRgx3-3xaJPb-GxJ0YBJSBKTJv1m3rQ@mail.gmail.com>
 <CAES-DZQHYPy3gCweRL1uonZ32yfm9z8Z8ucv3xXZyvLpgiDeHg@mail.gmail.com>
Message-ID: <CAGiKOug=otpBfZv_pAPZOpi5MaEySK+wQVUrtCGfrpzOUCPvAA@mail.gmail.com>

Glad I could help, I will try to contribute more whenever I have the time
to.
I love the QGIS community and I'm looking forward to do more in the future.

On Sun, Aug 30, 2020 at 9:19 PM Tim Sutton <tim at kartoza.com> wrote:

> From me too:  thank you for all your hard work, and the great contribution
> you have made to QGIS. I hope you will stick around and become part of our
> friendly community!
>
> Regards
>
> Tim
>
> On Sun, Aug 30, 2020 at 4:14 PM Matthias Kuhn <matthias at opengis.ch> wrote:
>
>> Hi Belgacem,
>>
>> Thanks for the report and all the work done during this GSOC. It was a
>> great pleasure seeing your regular updates.
>> You have done an amazing job.
>>
>> Many thanks, looking forward to more contributions to come !
>> Matthias
>>
>> On Fri, Aug 28, 2020 at 9:03 PM BELGACEM NEDJIMA <gb_nedjima at esi.dz>
>> wrote:
>>
>>> Hi all,
>>>
>>> With the Google summer of code project coding period coming to an end, I
>>> have my final report here: final report document
>>> <https://docs.google.com/document/d/1z7mNqrIhtgouOrdttNVQAr-yHJwFF55ry1KBts5-A8g/edit>
>>> .
>>> I have my weekly reports also collected here on: OSGEO wiki page
>>> <https://wiki.osgeo.org/wiki/Improving_qgis_3d>.
>>> I'm looking forward to making more contributions in the future :)
>>> Best regards,
>>> --
>>> Belgacem Nedjima
>>> 4th year computer science and engineering student.
>>> https://github.com/NEDJIMAbelgacem
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
>
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
>


-- 
Belgacem Nedjima
4th year computer science and engineering student.
https://github.com/NEDJIMAbelgacem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200830/6a99bd02/attachment-0001.html>

From nyall.dawson at gmail.com  Sun Aug 30 20:39:56 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 31 Aug 2020 13:39:56 +1000
Subject: [QGIS-Developer] Blocking of SAGA & GRASS batch files by MS
	AppLocker
In-Reply-To: <22e2a841-353a-30b0-cd5a-dc521d23fe8a@gmx.net>
References: <22e2a841-353a-30b0-cd5a-dc521d23fe8a@gmx.net>
Message-ID: <CAB28AshTL6Sg9hXwQsuudqDzYqT-4QbW2dCppwdwqFp1wtOaeA@mail.gmail.com>

On Sat, 29 Aug 2020 at 03:09, Matthias Heckmann
<Matthias.Heckmann at gmx.net> wrote:
>
> Dear QGIS Developers,
>
> due to recent security measures of my organization, execution of
> programs (exe, bat, etc…) is only possible in a certified folder e.g.
> C:/Programs/...
>
> The SAGA integration in QGIS is based on the creation and execution of a
> temporal .bat file (“SAGA_batch_job.bat”) createt in
> %OSDRIVE%\USERNAME\AppData\QGIS\QGIS3\PROFILES\DEFAULT\PROCESSING\SAGA_BATCH_JOB.BAT
> calling SAGA from the command prompt with the individual parameters of
> the respective tool.
>
> Similarly GRASS uses a .bat file (Grass_Batch_job.cmd) for some tools
> and OTB and others also use executable files in folders outside the QGIS
> programm folder structure.
>
> These batch files/executable files get blocked by the Microsoft Windows
> AppLocker
> Is there a possibility to relocate these batch files within the
> C/Programs/QGIS3.xx/somewhere… folder to avoid blocking by infamous
> applocker? Certifcation and excemption of these files by my organisation
> is apparently not possible.

Unfortunately these batch files are created dynamically, with contents
which vary depending on how algorithm's parameters. Accordingly, they
HAVE to be placed somewhere which is user-writable, and can't be
placed in a location like c:\program files where administrative user
rights are required in order to modify files.

Perhaps you could ask your IT staff which user-writable folders would
be acceptable for them.

Nyall


>
> Thank for your help!
>
> Matthias
>
>
> --
> Diese E-Mail wurde von AVG auf Viren geprüft.
> http://www.avg.com
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From tim at kartoza.com  Mon Aug 31 00:35:31 2020
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 31 Aug 2020 08:35:31 +0100
Subject: [QGIS-Developer] What about AsincPg?
In-Reply-To: <CALc8-V+cP9oAb4qY=qVHH0hUwma=v2sTs9hcOR2iQKN+-8Bucw@mail.gmail.com>
References: <CALc8-V+cP9oAb4qY=qVHH0hUwma=v2sTs9hcOR2iQKN+-8Bucw@mail.gmail.com>
Message-ID: <CAES-DZRwfAP-wsB=CC4ZwQUCwUo2cRsEXJEGxMtmv97t8qO3Fw@mail.gmail.com>

Hi Carlo

In what context are you proposing this? We do not use python for the
Postgres provider, but rather C++. If you are experiencing slowness using
QGIS to connect to postgres it may well be your local configuration rather
than postgresql. You would need to share a bit more detail before someone
can help you resolve it though.

Regards

Tim


On Fri, Aug 28, 2020 at 8:33 AM Carlo A. Bertelli (Charta s.r.l.) <
carlo.bertelli at gmail.com> wrote:

> Maybe AsyncPg (https://github.com/MagicStack/asyncpg) could be the answer
> for the slow pace of psycopg.
> What do you think?
> Using database introspection that was introduced since version 9.2,
> AsincPg is not compatible with version 8.4 that is still widely used, but
> declared speed gains seem worth trying.
> c
>
> --
> --------------------------------------------------------------------------
> Carlo A. Bertelli
>    Charta servizi e sistemi per il territorio e la storia ambientale srl
>           Dipendenze del palazzo Doria,
>           vc. alla Chiesa della Maddalena 9/2 16124      Genova (Italy)
>           tel./fax +39(0)10 2475439  +39 0108566195  mobile:+39 393 1590711
>    e-mail: bertelli at chartasrl.eu      http://www.chartasrl.eu
> --------------------------------------------------------------------------
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200831/c62f0cb5/attachment.html>

From rdmailings at duif.net  Mon Aug 31 02:27:15 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 31 Aug 2020 11:27:15 +0200
Subject: [QGIS-Developer] Can we check for "wrapped C/C++ object of type
 QgsLayerTreeGroup has been deleted"
Message-ID: <f24d4ca9c303b74f50c16a2ce3e93ecf@duif.net>

Hi Devs,

In a python plugin I had an issue in which somebody had created a 'group 
layer' (in a Python plugin), and saved it in 'the default project'.
BUT when the plugin did 'find' that group layer (via it's name) and 
tries do call a method on it you get the dreaded:

"wrapped C/C++ object of type QgsLayerTreeGroup has been deleted" 
message.

So my question: is there a proper way in Python, to check if the 
'underlaying' c++ object is still alive/available?
( other then in a try/except clause try to call a method :-) )
I'm gooing for the try/except hack now, but maybe it is an idea to add 
an 'isValid' or so to all PyObjects?

OR is this specific case a QGIS issue, as creating a GroupLayer maybe 
should also create a c++ grouplayer?

Regards,

Richard Duivenvoorde

PS this is NOT garbage collecting related, it is not that I can save an 
'handle' to the object: it is an (empty) grouplayer saved in a project.

From tim at kartoza.com  Mon Aug 31 02:59:58 2020
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 31 Aug 2020 10:59:58 +0100
Subject: [QGIS-Developer] Why are only 5 entries now displayed on the
 plugin pages?
In-Reply-To: <CAECJsSrQOUVknqr=h2K-SXonTaFUQ9xvx-bvynb+jM9piTZG9g@mail.gmail.com>
References: <CABPxTTrOkcVn4h0sbZ2jsYnK=DuRm7LrkU47YRUrHuqqwG1cvg@mail.gmail.com>
 <3ACA5EB6-FE0E-43EF-8817-D978D734FDCA@me.com>
 <CABPxTTrj8VXFzvnJ9wUH0WcFpNwDNOo84Ge1b=psZsDzFwsfig@mail.gmail.com>
 <CAECJsSrQOUVknqr=h2K-SXonTaFUQ9xvx-bvynb+jM9piTZG9g@mail.gmail.com>
Message-ID: <CAES-DZSaF7n=8aWTX-8By9YSCx62XTQ+1te9KmbUCY32fgJwyQ@mail.gmail.com>

Hi

It is already fixed (set at 20).

Thanks

Regards

Tim

On Thu, Aug 27, 2020 at 3:27 PM DelazJ <delazj at gmail.com> wrote:

> Hi,
>
> I share Calvin feelings here. 5 items per page are too short and do not
> help when you want to browse the repository. Any chance we raise the
> default value to 10 or 20?
>
> Thanks,
> Harrissou
>
> Le ven. 17 juil. 2020 à 18:03, C Hamilton <adenaculture at gmail.com> a
> écrit :
>
>> I liked it better when the default setting was showing 20 entries.
>>
>> Thanks,
>> CH
>>
>> On Wed, Jul 15, 2020 at 3:14 PM F. Shah <insar at me.com> wrote:
>>
>>> Hi Hamilton,
>>> These are default settings for generating/pagination of those pages. You
>>> can add a parameter per_page to Change the view. For example use this link
>>> for 20 plugins per page.
>>>
>>> https://plugins.qgis.org/plugins/fresh?per_page=20
>>> <https://plugins.qgis.org/plugins/fresh/?per_page=20>
>>>
>>> You can use the same approach for other features e.g. stable, popular,
>>> featured and etc.
>>>
>>> Hope this helps.
>>>
>>> Regards
>>> FS
>>>
>>> On 15. Jul 2020, at 19:13, C Hamilton <adenaculture at gmail.com> wrote:
>>>
>>>
>>> ﻿
>>> I was wondering why only 5 plugins are being shown on pages such as:
>>>
>>> https://plugins.qgis.org/plugins/fresh/
>>>
>>> I really prefer seeing more such as 20 at a time.
>>>
>>> Thanks,
>>>
>>> Calvin
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200831/1e4d732c/attachment-0001.html>

From rdmailings at duif.net  Mon Aug 31 03:43:15 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 31 Aug 2020 12:43:15 +0200
Subject: [QGIS-Developer] Can we check for "wrapped C/C++ object of type
 QgsLayerTreeGroup has been deleted"
In-Reply-To: <f24d4ca9c303b74f50c16a2ce3e93ecf@duif.net>
References: <f24d4ca9c303b74f50c16a2ce3e93ecf@duif.net>
Message-ID: <9dbbdac64bd9a5791d46e877994d337e@duif.net>

On 2020-08-31 11:27, Richard Duivenvoorde wrote:

> OR is this specific case a QGIS issue, as creating a GroupLayer maybe
> should also create a c++ grouplayer?

Forget this part: there IS a c++ grouplayer...

Regards,

Richard

From adenaculture at gmail.com  Mon Aug 31 07:59:33 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 31 Aug 2020 10:59:33 -0400
Subject: [QGIS-Developer] Why are only 5 entries now displayed on the
 plugin pages?
In-Reply-To: <CAES-DZSaF7n=8aWTX-8By9YSCx62XTQ+1te9KmbUCY32fgJwyQ@mail.gmail.com>
References: <CABPxTTrOkcVn4h0sbZ2jsYnK=DuRm7LrkU47YRUrHuqqwG1cvg@mail.gmail.com>
 <3ACA5EB6-FE0E-43EF-8817-D978D734FDCA@me.com>
 <CABPxTTrj8VXFzvnJ9wUH0WcFpNwDNOo84Ge1b=psZsDzFwsfig@mail.gmail.com>
 <CAECJsSrQOUVknqr=h2K-SXonTaFUQ9xvx-bvynb+jM9piTZG9g@mail.gmail.com>
 <CAES-DZSaF7n=8aWTX-8By9YSCx62XTQ+1te9KmbUCY32fgJwyQ@mail.gmail.com>
Message-ID: <CABPxTTryHQ8Py_VkCZ7xtfJtBxmQ-YOpybsJ9BfqM8dktqmg-w@mail.gmail.com>

Thanks!!!

On Mon, Aug 31, 2020 at 6:00 AM Tim Sutton <tim at kartoza.com> wrote:

> Hi
>
> It is already fixed (set at 20).
>
> Thanks
>
> Regards
>
> Tim
>
> On Thu, Aug 27, 2020 at 3:27 PM DelazJ <delazj at gmail.com> wrote:
>
>> Hi,
>>
>> I share Calvin feelings here. 5 items per page are too short and do not
>> help when you want to browse the repository. Any chance we raise the
>> default value to 10 or 20?
>>
>> Thanks,
>> Harrissou
>>
>> Le ven. 17 juil. 2020 à 18:03, C Hamilton <adenaculture at gmail.com> a
>> écrit :
>>
>>> I liked it better when the default setting was showing 20 entries.
>>>
>>> Thanks,
>>> CH
>>>
>>> On Wed, Jul 15, 2020 at 3:14 PM F. Shah <insar at me.com> wrote:
>>>
>>>> Hi Hamilton,
>>>> These are default settings for generating/pagination of those pages.
>>>> You can add a parameter per_page to Change the view. For example use this
>>>> link for 20 plugins per page.
>>>>
>>>> https://plugins.qgis.org/plugins/fresh?per_page=20
>>>> <https://plugins.qgis.org/plugins/fresh/?per_page=20>
>>>>
>>>> You can use the same approach for other features e.g. stable, popular,
>>>> featured and etc.
>>>>
>>>> Hope this helps.
>>>>
>>>> Regards
>>>> FS
>>>>
>>>> On 15. Jul 2020, at 19:13, C Hamilton <adenaculture at gmail.com> wrote:
>>>>
>>>>
>>>> ﻿
>>>> I was wondering why only 5 plugins are being shown on pages such as:
>>>>
>>>> https://plugins.qgis.org/plugins/fresh/
>>>>
>>>> I really prefer seeing more such as 20 at a time.
>>>>
>>>> Thanks,
>>>>
>>>> Calvin
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
>
> ------------------------------------------------------------------------------------------
> ​
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200831/59234fe9/attachment.html>

From daviderill79 at gmail.com  Mon Aug 31 09:15:01 2020
From: daviderill79 at gmail.com (David Erill)
Date: Mon, 31 Aug 2020 19:15:01 +0300
Subject: [QGIS-Developer] Can we check for "wrapped C/C++ object of type
 QgsLayerTreeGroup has been deleted"
In-Reply-To: <9dbbdac64bd9a5791d46e877994d337e@duif.net>
References: <f24d4ca9c303b74f50c16a2ce3e93ecf@duif.net>
 <9dbbdac64bd9a5791d46e877994d337e@duif.net>
Message-ID: <CAPnckXSmOaVPB_h3+vpi15aDUPWv0z73ktG3hVg27S-foRQ1_w@mail.gmail.com>

Hi Richard,
Actually we have a similar issue with one of our plugins, so if anyone can
give feedback about how to handle this situation, it would be great.
I'm talking about any kind of Qgs class, not only about QgsLayerTreeGroup:
"wrapped C/C++ object of type QgsXXX has been deleted"

Missatge de Richard Duivenvoorde <rdmailings at duif.net> del dia dl., 31
d’ag. 2020 a les 13:43:

> On 2020-08-31 11:27, Richard Duivenvoorde wrote:
>
> > OR is this specific case a QGIS issue, as creating a GroupLayer maybe
> > should also create a c++ grouplayer?
>
> Forget this part: there IS a c++ grouplayer...
>
> Regards,
>
> Richard
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200831/abe1a964/attachment.html>

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Mon Aug 31 09:35:32 2020
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?utf-8?B?Qm91cmRvbiwgSmVhbi1GcmFuw6dvaXMgKERJRik=?=)
Date: Mon, 31 Aug 2020 16:35:32 +0000
Subject: [QGIS-Developer] Can we check for "wrapped C/C++ object of type
 QgsLayerTreeGroup has been deleted"
In-Reply-To: <CAPnckXSmOaVPB_h3+vpi15aDUPWv0z73ktG3hVg27S-foRQ1_w@mail.gmail.com>
References: <f24d4ca9c303b74f50c16a2ce3e93ecf@duif.net>
 <9dbbdac64bd9a5791d46e877994d337e@duif.net>
 <CAPnckXSmOaVPB_h3+vpi15aDUPWv0z73ktG3hVg27S-foRQ1_w@mail.gmail.com>
Message-ID: <YT1PR01MB31649742BE01551EC8C9B9DEB3510@YT1PR01MB3164.CANPRD01.PROD.OUTLOOK.COM>

Hi,
Well, I also get the same message, but with QgsVectorFileWriter.SaveVectorOptions() where the object it creates seem to sometime just vanish (in my case, inside a long loop).

Jean-François Bourdon, ing.f.
Analyste en télédétection
Direction des inventaires forestiers
Ministère des Forêts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Québec (Québec) G1H 6R1
Téléphone : 418 627-8669, poste 4304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

De : QGIS-Developer [mailto:qgis-developer-bounces at lists.osgeo.org] De la part de David Erill
Envoyé : 31 août 2020 12:15
À : Richard Duivenvoorde <rdmailings at duif.net>
Cc : qgis-developer <qgis-developer at lists.osgeo.org>
Objet : Re: [QGIS-Developer] Can we check for "wrapped C/C++ object of type QgsLayerTreeGroup has been deleted"

Hi Richard,
Actually we have a similar issue with one of our plugins, so if anyone can give feedback about how to handle this situation, it would be great.
I'm talking about any kind of Qgs class, not only about QgsLayerTreeGroup:
"wrapped C/C++ object of type QgsXXX has been deleted"

Missatge de Richard Duivenvoorde <rdmailings at duif.net<mailto:rdmailings at duif.net>> del dia dl., 31 d’ag. 2020 a les 13:43:
On 2020-08-31 11:27, Richard Duivenvoorde wrote:

> OR is this specific case a QGIS issue, as creating a GroupLayer maybe
> should also create a c++ grouplayer?

Forget this part: there IS a c++ grouplayer...

Regards,

Richard
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=02%7C01%7C%7Cdfd585565f4a4e92753c08d84dc90f38%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637344873220222711&sdata=EjA4V68%2BTV03%2FYTp%2BvxWgrqrAmZUUIGCWpZtHxZfCec%3D&reserved=0>
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=02%7C01%7C%7Cdfd585565f4a4e92753c08d84dc90f38%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637344873220222711&sdata=EjA4V68%2BTV03%2FYTp%2BvxWgrqrAmZUUIGCWpZtHxZfCec%3D&reserved=0>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200831/c1786332/attachment-0001.html>

From fas.millan at gmail.com  Mon Aug 31 10:57:22 2020
From: fas.millan at gmail.com (=?UTF-8?B?TWlndWVsLcOBbmdlbCBGYXMtTWlsbMOhbg==?=)
Date: Mon, 31 Aug 2020 19:57:22 +0200
Subject: [QGIS-Developer] Coordinates of a pixel
Message-ID: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>

Hi all,
New around here and as a QGIS user. I need to find something in the code, I
hope you can help me.
When you open a DSM and place the mouse on any pixel, you can see the
coordinates of that point. Could someone tell me where in the code is made
the calculation of those coordinates?

Regards,

Angel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200831/157ec0eb/attachment.html>

From qgis at ag99.de  Mon Aug 31 11:07:59 2020
From: qgis at ag99.de (qgis at ag99.de)
Date: Mon, 31 Aug 2020 20:07:59 +0200
Subject: [QGIS-Developer] Can we check for "wrapped C/C++ object of type
 QgsLayerTreeGroup has been deleted"
In-Reply-To: <CAPnckXSmOaVPB_h3+vpi15aDUPWv0z73ktG3hVg27S-foRQ1_w@mail.gmail.com>
References: <f24d4ca9c303b74f50c16a2ce3e93ecf@duif.net>
 <9dbbdac64bd9a5791d46e877994d337e@duif.net>
 <CAPnckXSmOaVPB_h3+vpi15aDUPWv0z73ktG3hVg27S-foRQ1_w@mail.gmail.com>
Message-ID: <4265a99d-2a86-57b4-b823-7a1cb1cd7664@carvedworks.de>

i used to check if the C++ object is gone during runtime with 
sip.isdeleted(object)... it's no silver bullet and i don't know if this 
helps you, though.

see: 
https://www.riverbankcomputing.com/static/Docs/PyQt5/api/sip/sip-module.html?highlight=isdeleted#isdeleted

Cheers

Jonas

On 31.08.2020 18:15, David Erill wrote:
> Hi Richard,
> Actually we have a similar issue with one of our plugins, so if anyone 
> can give feedback about how to handle this situation, it would be great.
> I'm talking about any kind of Qgs class, not only about QgsLayerTreeGroup:
> "wrapped C/C++ object of type QgsXXX has been deleted"
>
> Missatge de Richard Duivenvoorde <rdmailings at duif.net 
> <mailto:rdmailings at duif.net>> del dia dl., 31 d’ag. 2020 a les 13:43:
>
>     On 2020-08-31 11:27, Richard Duivenvoorde wrote:
>
>     > OR is this specific case a QGIS issue, as creating a GroupLayer
>     maybe
>     > should also create a c++ grouplayer?
>
>     Forget this part: there IS a c++ grouplayer...
>
>     Regards,
>
>     Richard
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200831/7e5d8750/attachment.html>

From charles at kartoza.com  Mon Aug 31 15:01:47 2020
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Tue, 1 Sep 2020 00:01:47 +0200
Subject: [QGIS-Developer] Coordinates of a pixel
In-Reply-To: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
References: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
Message-ID: <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>

Someone can correct me if I'm wrong, but I think there's a misunderstanding
here of how this raster data is handled in a GIS. From my understanding of
the question, I don't know that what you're asking for is available "in the
code" the way you expect.

The coordinates are showing the position of the cursor relative to the
origin of the assigned coordinate reference system. The raster data is
"projected" onto that reference system, which assigns positions to some
points on the image and stretches, rotates or distorts the image in
accordance with the images affine parameters that ensure all the different
parts of the image remain spatially correct. How the GIS knows where to get
these parameters varies between data types and file formats.

Playing around with the georeferencer tool in QGIS should give you a pretty
clear understanding of how this "projection" works.

There are ways to get the coordinates of a position or pixel within an
image programmatically, the easiest of which that I can think of is using
values from a world file [1] with an xy position (in pixels) of the pixel
of interest. The code required for achieving this, however, is probably
going to be dependant on a wide variety of factors (not least of all the
CRS units and pixel size). Alternatively, you could likely grab the
coordinate position of a pixel from within a QGIS project, but that doesn't
seem to be what you're after. Perhaps a developer familiar with the GDAL or
QGIS code bases can point you in the direction of some wizardry that will
achieve what it is you are looking for without a clearer understanding of
your use case though.

[1] https://en.wikipedia.org/wiki/World_file

On Mon, 31 Aug 2020 at 19:57, Miguel-Ángel Fas-Millán <fas.millan at gmail.com>
wrote:

> Hi all,
> New around here and as a QGIS user. I need to find something in the
> code, I hope you can help me.
> When you open a DSM and place the mouse on any pixel, you can see the
> coordinates of that point. Could someone tell me where in the code is made
> the calculation of those coordinates?
>
> Regards,
>
> Angel
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/2fb0477a/attachment.html>

From fas.millan at gmail.com  Mon Aug 31 18:30:57 2020
From: fas.millan at gmail.com (=?UTF-8?B?TWlndWVsLcOBbmdlbCBGYXMtTWlsbMOhbg==?=)
Date: Tue, 1 Sep 2020 03:30:57 +0200
Subject: [QGIS-Developer] Coordinates of a pixel
In-Reply-To: <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>
References: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
 <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>
Message-ID: <CAHR++tPYm8bmbFFVSiPmS-L0W17z1z3QgCysEamD-c=UfV3bFQ@mail.gmail.com>

Thanks for your reply. Well, let me provide more details to explain why I
was asking that.
I have a DSM, with its xllcenter/yllcenter coordinates and I need to know
the coordinates of the (in this case) center of any of the squares/cells
(which, maybe wrongly, I called pixels) represented by this dataset. To
that I've been using a function equivalent to the provided by this
calculator: https://geodesy.noaa.gov/cgi-bin/Inv_Fwd/forward2.prl , which
takes as parameters the starting point, azimuth, distance, and returns the
ending coordinates.

For instance, I want to calculate the coordinates of the first cell of the
dataset (top left of the matrix). So I do:

calculateEndingGlobalCoordinates(Ellipsoid.*WGS84*, start_coords, 0.0,
nrows*cellsize) //0.0 for north

The problem is that it returns a value with a latitude that seems ok, but a
wrong longitude. When I place that coordinate in QGIS, it is out of the
image, quite at left of the top left corner.

Unsurprisingly, if I place the coordinates obtained with this method (or
with the online calculator mentioned) in google maps, to check if it makes
sense looking at what's there in the satellite images, they make no sense
at all.

However, if I take the coordinates appearing in QGIS when I hover one of
the cells, and place them in google maps, it makes perfect sense. With a
few meters of difference, but well, at least it is on the right track. (I
am that sure because I took as reference a ATC tower, which is the highest
element in a wide area).

That's why I wanted to check what's the difference between the mentioned
method I was using and whatever is made in the code to return those quite
correct coordinates.




El mar., 1 sept. 2020 a las 0:01, Charles Dixon-Paver (<charles at kartoza.com>)
escribió:

> Someone can correct me if I'm wrong, but I think there's a
> misunderstanding here of how this raster data is handled in a GIS. From my
> understanding of the question, I don't know that what you're asking for is
> available "in the code" the way you expect.
>
> The coordinates are showing the position of the cursor relative to the
> origin of the assigned coordinate reference system. The raster data is
> "projected" onto that reference system, which assigns positions to some
> points on the image and stretches, rotates or distorts the image in
> accordance with the images affine parameters that ensure all the different
> parts of the image remain spatially correct. How the GIS knows where to get
> these parameters varies between data types and file formats.
>
> Playing around with the georeferencer tool in QGIS should give you a
> pretty clear understanding of how this "projection" works.
>
> There are ways to get the coordinates of a position or pixel within an
> image programmatically, the easiest of which that I can think of is using
> values from a world file [1] with an xy position (in pixels) of the pixel
> of interest. The code required for achieving this, however, is probably
> going to be dependant on a wide variety of factors (not least of all the
> CRS units and pixel size). Alternatively, you could likely grab the
> coordinate position of a pixel from within a QGIS project, but that doesn't
> seem to be what you're after. Perhaps a developer familiar with the GDAL or
> QGIS code bases can point you in the direction of some wizardry that will
> achieve what it is you are looking for without a clearer understanding of
> your use case though.
>
> [1] https://en.wikipedia.org/wiki/World_file
>
> On Mon, 31 Aug 2020 at 19:57, Miguel-Ángel Fas-Millán <
> fas.millan at gmail.com> wrote:
>
>> Hi all,
>> New around here and as a QGIS user. I need to find something in the
>> code, I hope you can help me.
>> When you open a DSM and place the mouse on any pixel, you can see the
>> coordinates of that point. Could someone tell me where in the code is made
>> the calculation of those coordinates?
>>
>> Regards,
>>
>> Angel
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/b325092b/attachment.html>

