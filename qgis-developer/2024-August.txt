From alister.hood at gmail.com  Thu Aug  1 04:23:05 2024
From: alister.hood at gmail.com (Alister Hood)
Date: Thu, 1 Aug 2024 23:23:05 +1200
Subject: [QGIS-Developer] QGIS project maintainability, forms and styles,
 xml verbosity (Nyall Dawson)
In-Reply-To: <mailman.21.1722452402.26191.qgis-developer@lists.osgeo.org>
References: <mailman.21.1722452402.26191.qgis-developer@lists.osgeo.org>
Message-ID: <CAF6hL+WJMbnBo_qL9UR4hNO0PUJxST=yETn7_t6tSZQ1oY_M2Q@mail.gmail.com>

Hi, at least a couple of other ideas have been suggested that could help
reduce the amount of project xml in many cases:
Live linked layer styles ? Issue #17898 ? qgis/QGIS (github.com)
<https://github.com/qgis/QGIS/issues/17898>
"Embedded styling" option for paletted raster layers ? Issue #53453 ?
qgis/QGIS (github.com) <https://github.com/qgis/QGIS/issues/53453>

Regards,
Alister
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240801/ca2caf7a/attachment.htm>

From julien.moura at oslandia.com  Thu Aug  1 05:17:14 2024
From: julien.moura at oslandia.com (Julien Moura (Oslandia))
Date: Thu, 1 Aug 2024 14:17:14 +0200
Subject: [QGIS-Developer] Transition from QtWebKit to QtWebEngine in
 qgis2web (QGIS plugin)
In-Reply-To: <SHFJOH$C9007176CFEFAC359F6643EDAF4628C5@opengis.it>
References: <SHFJOH$C9007176CFEFAC359F6643EDAF4628C5@opengis.it>
Message-ID: <838b6abf-e688-43ec-99b0-3480cc1100d0@oslandia.com>

Hi Andrea,

We're currently working on this question on QTribu 
(https://github.com/geotribu/qtribu/pull/186).

> What is the correct way to have users install the qtwebengine dependency?
On Debian and derived: |sudo apt install python3-pyqt5.qtwebengine|

On Windows, it seems that it's already included in the MSI package and 
standard QGIS installation with OSGeo4W.|
|

Hope it helps,
Julien

Le 30/07/2024 ? 11:29, Info O.GIS via QGIS-Developer a ?crit?:
> Good morning developers,
> I managed to get qtwebengine working in qgis2web.
> For some reason qtwebkit didn't need to set a window width while 
> qtwebengine did, so with this code I solved it
>
>     self.preview.setMinimumWidth(650)
>
> *Request:*
> What is the correct way to have users install the qtwebengine dependency?
> I wrote this code and it works fine but I only tested it on 
> windows.?Is this the correct way?
>
>     try:
>     ? ? ? ? if system == 'Windows':
>     ? ? ? ? ? ? pip_exec = os.path.join(sysconfig.get_path("scripts"),
>     "pip3")
>     ? ? ? ? ? ? env = os.environ.copy()
>     ? ? ? ? ? ? if full_proxy_url:
>     ? ? ? ? ? ? ? ? env['http_proxy'] = full_proxy_url
>     ? ? ? ? ? ? ? ? env['https_proxy'] = full_proxy_url
>     ? ? ? ? ? ? subprocess.check_call([pip_exec, "install",
>     "--upgrade", "PyQtWebEngine==5.15.6"], env=env)
>     ? ? ? ? elif system == 'Linux':
>     ? ? ? ? ? ? subprocess.check_call(["sudo", "apt-get", "install",
>     "python3-pyqt5.qtwebengine"])
>     ? ? ? ? elif system == 'Darwin':? # macOS
>     ? ? ? ? ? ? subprocess.check_call(["brew", "install", "pyqt5"])
>
>
>
> Many thanks
>
> *Andrea Ordonselli*
> *O.GIS - **opengis.it*
>
>
> Dainfo at opengis.it
> Ajan at dalheimer.de
> Ccqgis-developer at lists.osgeo.org
> DataTue, 9 Jul 2024 17:46:39 +0200
> OggettoRe: [QGIS-Developer] Transition from QtWebKit to QtWebEngine in 
> qgis2web (QGIS plugin)
>
> Thanks Jan Dalheimer
> Thanks Jean-Baptiste Peter
>
> From your answers I understood many things.
>
> I tried both to use QGIS 3.38.0 installed in win10 via .msi and the 
> version via OSGeo4W setup;?In the first case I added qtwebengine via 
> "pip install qtwebengine", in the second case I installed the 
> "python3-pyqtwebengine" package via OsGeo4w setup
>
> In both installations I get the same result: QtWebEngine?it does not 
> work well
>
> I also tried to create a new test plugin and I get the same result, I 
> can't even view a web page. Is there an example of a basic plugin that 
> I can see? Or can someone create it?
>
> *The clue:*
> If I use qt designer to insert a QtWebEngineView into the plugin 
> graphics it works well, even when setting a static web page.
> But if I open QGIS that plugin won't work, why does this happen? I 
> would therefore think that it is just a question of dependency .
>
> For now I noticed this:
>
> 1) From QGIS version 3.38.0 I can use "from 
> qgis.PyQt.QtWebEngineWidgets import *" instead of "from 
> PyQt5.QtWebEngineWidgets import *"
>
>
> 2) with qgis 3.38.0 .msi installation this dependency is missing:
>
>
>     qt5-devel (5.15.13-1)
>     Qt5 headers and libraries (Development)
>     Required by: python3-pyqtwebengine
>
>
>
> 3) with OSGeo4W setup these dependencies are required:
>
>     python3-core (3.12.4-1)
>     Python core interpreter and runtime
>     Required by: python3-pyqtwebengine, python3-pyqt5, python3-pyqt5-sip
>
>
>     python3-pyqt5 (5.15.10-1)
>     Python bindings for the Qt cross platform application toolkit
>     Required by: python3-pyqtwebengine
>
>
>     python3-pyqt5-sip (12.13.0-1)
>     The sip module support for PyQt5
>     Required by: python3-pyqtwebengine, python3-pyqt5
>
>
>     qt5-devel (5.15.13-1)
>     Qt5 headers and libraries (Development)
>     Required by: python3-pyqtwebengine
>
>
>     qt5-libs (5.15.13-1)
>     Qt5 runtime libraries
>     Required by: python3-pyqtwebengine, python3-pyqt5, qt5-devel,
>     qtwebkit-libs
>
>
> Thank you all
>
> *Andrea Ordonselli*
> *OpenGIS.it*
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-- 
Oslandia 
<https://geotribu.fr/?utm_source=email&utm_campaign=signature_oslandia&utm_medium=email>- 
Geotribu 
<https://geotribu.fr/?utm_source=email&utm_campaign=signature_oslandia&utm_medium=email>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240801/15f965a1/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0x5375CD81333F311E.asc
Type: application/pgp-keys
Size: 3154 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240801/15f965a1/attachment-0001.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: julien_moura.vcf
Type: text/vcard
Size: 273 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240801/15f965a1/attachment-0001.vcf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature.asc
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240801/15f965a1/attachment-0001.sig>

From jacky.volpes at oslandia.com  Thu Aug  1 05:26:26 2024
From: jacky.volpes at oslandia.com (Jacky Volpes)
Date: Thu, 1 Aug 2024 14:26:26 +0200
Subject: [QGIS-Developer] Rotating selected features programmatically
In-Reply-To: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
References: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
Message-ID: <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>

Hi Luke,

Please provide a PyQGIS code snippet to reproduce. It will be more 
convenient to comment and suggest modifications.
Thanks,

--
Jacky Volpes

Ing?nieur d?veloppeur SIG - Oslandia


Le 26/07/2024 ? 22:06, Catania, Luke A ERDC-RDE-GRL-VA CIV via 
QGIS-Developer a ?crit?:
>
> I am using the select by expression tool through python to select my 
> features and then I trigger rotation through python I see both 
> selected features rotating, but when I click to end the rotation, it 
> only rotated one of the features and left the other one as is.? If I 
> do this through the QGIS using the selection by expression in the 
> selection toolbar and the rotate in the advanced digitizing tool bar 
> rotating both features works fine.
>
> Any Ideas?
>
> Luke
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240801/27e70cac/attachment.htm>

From uclaros at gmail.com  Thu Aug  1 08:16:31 2024
From: uclaros at gmail.com (Stefanos Natsis)
Date: Thu, 1 Aug 2024 18:16:31 +0300
Subject: [QGIS-Developer] QEP 300: STAC client in QGIS core
Message-ID: <CADBCwLZ3n_d1NYYOcPGpPHzj6ybKNUWmXD9TnwZH0m8SXirVDA@mail.gmail.com>

Hi list!

I have just filed a QEP for our upcoming work regarding building a STAC
client in QGIS core.

To anyone interested, please feel free to comment or open discussion on the
following QEP issue:
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/300

Best
Stefanos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240801/40f2b00f/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Thu Aug  1 11:29:59 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Thu, 1 Aug 2024 18:29:59 +0000
Subject: [QGIS-Developer] Rotating selected features programmatically
In-Reply-To: <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>
References: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
 <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>
Message-ID: <03b73cd41cdd4ea39f6a4eddca16689a@erdc.dren.mil>

def rotateFeature(self):
        """Find the rotate feature action in QGIS toolbar and trigger it so the user can rotate the element.
        """

        # We want to detect when the rotation is complete with a geometryChanged signal so we can commit the changes and
        # end the edit session.
        self.vector_layer.editBuffer().geometryChanged.connect(self.element_layer_rotated)

        # Get all actions so we can search for the mActionRotateFeature action.
        actions = iface.mainWindow().findChildren(QAction)
        action = [x for x in actions if x.objectName()=='mActionRotateFeature'][0]

        expression = '"Element_Nb" = '
        expression = expression + "\'" + f'{self.element_number}' + "\'"
        QgsMessageLog.logMessage(f"expression: {expression}", "StandoffLayers", Qgis.Info)

        processing.run("qgis:selectbyexpression",
                       {'INPUT':self.vector_layer,
                        'EXPRESSION': expression,
                        'METHOD':0
                        }
        )
        # Inititates rotate feature action allowing to select a snap to value.
        action.trigger()

        QgsMessageLog.logMessage(f"Rotate Feature Action Triggered", "ElementPlacementTool", Qgis.Info)

def element_layer_rotated(self):
        """When the rotate action is triggered it seems to ignore the ElementPlacementTool events, so in order to end the edit session
        we need to detect a geometryChanged event after the rotation is complete.
        """
        QgsMessageLog.logMessage(f"Element Layer Rotated: {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)

        # Disconnect from the signal so we can just commit the changes.
        self.vector_layer.editBuffer().geometryChanged.disconnect()

        # Save changes and end edit mode
        self.vector_layer.commitChanges()
        self.vector_layer.endEditCommand()
        self.deactivate()

From: Jacky Volpes <jacky.volpes at oslandia.com>
Sent: Thursday, August 1, 2024 8:26 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

Please provide a PyQGIS code snippet to reproduce. It will be more convenient to comment and suggest modifications.
Thanks,


--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia

Le 26/07/2024 ? 22:06, Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer a ?crit :
I am using the select by expression tool through python to select my features and then I trigger rotation through python I see both selected features rotating, but when I click to end the rotation, it only rotated one of the features and left the other one as is.  If I do this through the QGIS using the selection by expression in the selection toolbar and the rotate in the advanced digitizing tool bar rotating both features works fine.

Any Ideas?

Luke



_______________________________________________

QGIS-Developer mailing list

QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>

List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240801/45b553b6/attachment-0001.htm>

From lova at kartoza.com  Fri Aug  2 04:42:40 2024
From: lova at kartoza.com (Lova Andriarimalala)
Date: Fri, 2 Aug 2024 14:42:40 +0300
Subject: [QGIS-Developer] QGIS Full Stack Web Developer Report
In-Reply-To: <AM6PR08MB39916950D01F09B24F1EFF52FBB42@AM6PR08MB3991.eurprd08.prod.outlook.com>
References: <AM6PR08MB39916950D01F09B24F1EFF52FBB42@AM6PR08MB3991.eurprd08.prod.outlook.com>
Message-ID: <CAMLC-sDvceW7XVvT9XhO37kNG0dCLWW2S_1L6Q8E1=hZ1za7xw@mail.gmail.com>

Hello everyone,

Please find below the report regarding the development and maintenance of
the QGIS-related websites for this week:

*Overview:*

I mainly focused on resolving issues related to the QGIS website and plugin
website. I also worked on some maintenance tasks.


*Deployed PRs on the QGIS Website:*


   - Add links to metabase analytics
   <https://github.com/qgis/QGIS-Website/pull/376>
   - Change repo to qgis website
   <https://github.com/qgis/QGIS-Website/pull/380>
   - Fix prebuilt get commit command
   <https://github.com/qgis/QGIS-Website/pull/382>
   - Add sustaining member links in the visual changelog page
   <https://github.com/qgis/QGIS-Website/pull/385>

*Deployed PRs on the QGIS Plugin Website:*

   - Specify the dockerhub repo for docker image push
   <https://github.com/qgis/QGIS-Django/pull/443>
   - Add command to run uwsgi in docker-compose.yml
   <https://github.com/qgis/QGIS-Django/pull/445>
   - Get sustaining members logo from old website repo
   <https://github.com/qgis/QGIS-Django/pull/446>
   - Add sustaining members logo to static files
   <https://github.com/qgis/QGIS-Django/pull/451>


*New PRs on the QGIS Website:*

   - Optimize sponsors logo <https://github.com/qgis/QGIS-Website/pull/388>
   - Add qgis 1st conference image to the thank-you page
   <https://github.com/qgis/QGIS-Website/pull/389>

*New PR on the QGIS Plugin Website:*

   - Feedback clarification <https://github.com/qgis/QGIS-Django/pull/452>

*Merged PR on QGIS Feed:*

   -  Update the design to match QGIS.org
   <https://github.com/qgis/qgis-feed/pull/72>


Next week, I will continue to work on some of the issues on the QGIS
website and will also deploy the latest changes on the plugin and the feed
website.

Have a nice weekend,

Best regards,


Lova Andriarimalala


*QGIS Full Stack Developer   *
*T *: +27(0) 87 809 2702          *E *: lova at kartoza.com          *W* :
kartoza.com



*This email and any attachments are confidential and intended solely for
the use of the individual or entity to whom they are addressed. If you *
*have received this email in error, please notify the sender immediately
and delete it from your system. Unauthorised use, disclosure, or copying*
*of the contents is prohibited.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240802/4f9d0e76/attachment.htm>

From selma at kartoza.com  Fri Aug  2 07:57:14 2024
From: selma at kartoza.com (Selma Vidimlic)
Date: Fri, 2 Aug 2024 16:57:14 +0200
Subject: [QGIS-Developer] QGIS Documentation writer - Report
Message-ID: <CALarpe7oBgEd_NhMX=dsNjfbVFNkmwdkVUBDftG+To-hA3HunA@mail.gmail.com>

Hello all,

There is a new Documentation report:

Pull Requests that have been merged:
Raster Temporal Properties
<https://github.com/qgis/QGIS-Documentation/pull/9160>
Custom properties <https://github.com/qgis/QGIS-Documentation/pull/9078>
More screenshots for the Custom properties
<https://github.com/qgis/QGIS-Documentation/pull/9174>
OGC API Source type for vector and raster
<https://github.com/qgis/QGIS-Documentation/pull/9133>

Open Pull Requests:
Processing algorithm dialog title - changes in User Manual
<https://github.com/qgis/QGIS-Documentation/pull/9185>
(This one will include changes across every chapter in User manual that
mentions this dialog)
Data Filtering - Elevation Controller
<https://github.com/qgis/QGIS-Documentation/pull/9129>
<https://github.com/qgis/QGIS-Documentation/pull/9129>(There is a conflict
in this PR that I will resolve on Monday)

I will continue to work on changes regarding the processing algorithm
dialog title in the User and Training Manual, and focus on the 3.38
features.


Selma Vidimlic Husic
*QGIS Documentation writer*

*E:* selma at kartoza.com         * W:* kartoza.com



*This email and any attachments are confidential and intended solely for
the use of the individual or entity to whom they are addressed. If you *
*have received this email in error, please notify the sender immediately
and delete it from your system. Unauthorised use, disclosure, or copying *
*of the contents is prohibited.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240802/e4edf529/attachment.htm>

From wonder.sk at gmail.com  Sun Aug  4 09:20:08 2024
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 4 Aug 2024 18:20:08 +0200
Subject: [QGIS-Developer] QEP 301: Large scenes and globe in QGIS 3D
Message-ID: <CAC2XbFdr5QrxR65u7+rLN_4X_0F4RCFOg3u957D1VbYQK0Jy-w@mail.gmail.com>

Hi all!

I have added a new QEP that promises support of large scenes in QGIS 3D,
and addition of globe view:
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/301

Looking forward to your comments!

Regards
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240804/824cd508/attachment.htm>

From jacky.volpes at oslandia.com  Mon Aug  5 02:14:17 2024
From: jacky.volpes at oslandia.com (Jacky Volpes)
Date: Mon, 5 Aug 2024 11:14:17 +0200
Subject: [QGIS-Developer] Rotating selected features programmatically
In-Reply-To: <03b73cd41cdd4ea39f6a4eddca16689a@erdc.dren.mil>
References: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
 <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>
 <03b73cd41cdd4ea39f6a4eddca16689a@erdc.dren.mil>
Message-ID: <61e06a63-c75e-4414-9320-0789b50a5dd2@oslandia.com>

Hi Luke,

My guess is that when more than one feature is selected, and the 
rotation is ended, geometryChanged signal is emitted for each rotated 
feature.

element_layer_rotated() is run when the first geometryChanged signal is 
emitted, and is disconnected, and the layer is saved, and the other 
geometryChanged signals don't trigger anything.

NB: self.vector_layer.editBuffer().geometryChanged.disconnect() is 
risky, if other slots are connected, prefer 
self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)

Regards,

--
Jacky Volpes

Ing?nieur d?veloppeur SIG - Oslandia

Le 01/08/2024 ? 20:29, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit?:
>
> def rotateFeature(self):
>
> ??????? """Find the rotate feature action in QGIS toolbar and trigger 
> it so the user can rotate the element.
>
> ??????? """
>
> ??????? # We want to detect when the rotation is complete with a 
> geometryChanged signal so we can commit the changes and
>
> ??????? # end the edit session.
>
> self.vector_layer.editBuffer().geometryChanged.connect(self.element_layer_rotated)
>
> ??????? # Get all actions so we can search for the 
> mActionRotateFeature action.
>
> ??????? actions = iface.mainWindow().findChildren(QAction)
>
> ??????? action = [x for x in actions if 
> x.objectName()=='mActionRotateFeature'][0]
>
> ??????? expression = '"Element_Nb" = '
>
> ??????? expression = expression + "\'" + f'{self.element_number}' + "\'"
>
> QgsMessageLog.logMessage(f"expression: {expression}", 
> "StandoffLayers", Qgis.Info)
>
> processing.run("qgis:selectbyexpression",
>
> ???????????????????????{'INPUT':self.vector_layer,
>
> ??????????????????????? 'EXPRESSION': expression,
>
> ??????????????????????? 'METHOD':0
>
> ??????????????????????? }
>
> ??????? )
>
> ??????? # Inititates rotate feature action allowing to select a snap 
> to value.
>
> ??????? action.trigger()
>
> ??????? QgsMessageLog.logMessage(f"Rotate Feature Action Triggered", 
> "ElementPlacementTool", Qgis.Info)
>
> def element_layer_rotated(self):
>
> ??????? """When the rotate action is triggered it seems to ignore the 
> ElementPlacementTool events, so in order to end the edit session
>
> ??????? we need to detect a geometryChanged event after the rotation 
> is complete.
>
> ??????? """
>
> ??????? QgsMessageLog.logMessage(f"Element Layer Rotated: 
> {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)
>
> ??????? # Disconnect from the signal so we can just commit the changes.
>
> self.vector_layer.editBuffer().geometryChanged.disconnect()
>
> ??????? # Save changes and end edit mode
>
> ??????? self.vector_layer.commitChanges()
>
> ??????? self.vector_layer.endEditCommand()
>
> ??????? self.deactivate()
>
> *From:*Jacky Volpes <jacky.volpes at oslandia.com>
> *Sent:* Thursday, August 1, 2024 8:26 AM
> *To:* Catania, Luke A ERDC-RDE-GRL-VA CIV 
> <Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' 
> <qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] Rotating selected features 
> programmatically
>
> Hi Luke,
>
> Please provide a PyQGIS code snippet to reproduce. It will be more 
> convenient to comment and suggest modifications.
> Thanks,
>
> --
> Jacky Volpes
> Ing?nieur d?veloppeur SIG - Oslandia
>
>
> Le 26/07/2024 ? 22:06, Catania, Luke A ERDC-RDE-GRL-VA CIV via 
> QGIS-Developer a ?crit?:
>
>     I am using the select by expression tool through python to select
>     my features and then I trigger rotation through python I see both
>     selected features rotating, but when I click to end the rotation,
>     it only rotated one of the features and left the other one as is.
>     If I do this through the QGIS using the selection by expression in
>     the selection toolbar and the rotate in the advanced digitizing
>     tool bar rotating both features works fine.
>
>     Any Ideas?
>
>     Luke
>
>
>
>     _______________________________________________
>
>     QGIS-Developer mailing list
>
>     QGIS-Developer at lists.osgeo.org
>
>     List info:Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked  <Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked>
>
>     Unsubscribe:Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked  <Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240805/da530513/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Mon Aug  5 10:22:28 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Mon, 5 Aug 2024 17:22:28 +0000
Subject: [QGIS-Developer] Rotating selected features programmatically
In-Reply-To: <61e06a63-c75e-4414-9320-0789b50a5dd2@oslandia.com>
References: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
 <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>
 <03b73cd41cdd4ea39f6a4eddca16689a@erdc.dren.mil>
 <61e06a63-c75e-4414-9320-0789b50a5dd2@oslandia.com>
Message-ID: <0e229cb1bedb44bda37626654936e12c@erdc.dren.mil>

Well.  Now for some reason my select by expression tool is not selecting any features, so need to figure out why that is happening before implementing this change. I did not make any changes that I can see that would have caused this.

From: Jacky Volpes <jacky.volpes at oslandia.com>
Sent: Monday, August 5, 2024 5:14 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

My guess is that when more than one feature is selected, and the rotation is ended, geometryChanged signal is emitted for each rotated feature.

element_layer_rotated() is run when the first geometryChanged signal is emitted, and is disconnected, and the layer is saved, and the other geometryChanged signals don't trigger anything.

NB: self.vector_layer.editBuffer().geometryChanged.disconnect()       is risky, if other slots are connected, prefer      self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)

Regards,


--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia
Le 01/08/2024 ? 20:29, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit :
def rotateFeature(self):
        """Find the rotate feature action in QGIS toolbar and trigger it so the user can rotate the element.
        """

        # We want to detect when the rotation is complete with a geometryChanged signal so we can commit the changes and
        # end the edit session.
        self.vector_layer.editBuffer().geometryChanged.connect(self.element_layer_rotated)

        # Get all actions so we can search for the mActionRotateFeature action.
        actions = iface.mainWindow().findChildren(QAction)
        action = [x for x in actions if x.objectName()=='mActionRotateFeature'][0]

        expression = '"Element_Nb" = '
        expression = expression + "\'" + f'{self.element_number}' + "\'"
        QgsMessageLog.logMessage(f"expression: {expression}", "StandoffLayers", Qgis.Info)

        processing.run("qgis:selectbyexpression",
                       {'INPUT':self.vector_layer,
                        'EXPRESSION': expression,
                        'METHOD':0
                        }
        )
        # Inititates rotate feature action allowing to select a snap to value.
        action.trigger()

        QgsMessageLog.logMessage(f"Rotate Feature Action Triggered", "ElementPlacementTool", Qgis.Info)

def element_layer_rotated(self):
        """When the rotate action is triggered it seems to ignore the ElementPlacementTool events, so in order to end the edit session
        we need to detect a geometryChanged event after the rotation is complete.
        """
        QgsMessageLog.logMessage(f"Element Layer Rotated: {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)

        # Disconnect from the signal so we can just commit the changes.
        self.vector_layer.editBuffer().geometryChanged.disconnect()

        # Save changes and end edit mode
        self.vector_layer.commitChanges()
        self.vector_layer.endEditCommand()
        self.deactivate()

From: Jacky Volpes <jacky.volpes at oslandia.com><mailto:jacky.volpes at oslandia.com>
Sent: Thursday, August 1, 2024 8:26 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil><mailto:Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' <qgis-developer at lists.osgeo.org><mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

Please provide a PyQGIS code snippet to reproduce. It will be more convenient to comment and suggest modifications.
Thanks,



--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia

Le 26/07/2024 ? 22:06, Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer a ?crit :
I am using the select by expression tool through python to select my features and then I trigger rotation through python I see both selected features rotating, but when I click to end the rotation, it only rotated one of the features and left the other one as is.  If I do this through the QGIS using the selection by expression in the selection toolbar and the rotate in the advanced digitizing tool bar rotating both features works fine.

Any Ideas?

Luke




_______________________________________________

QGIS-Developer mailing list

QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>

List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240805/2c1edd24/attachment-0001.htm>

From Luke.A.Catania at erdc.dren.mil  Mon Aug  5 10:44:54 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Mon, 5 Aug 2024 17:44:54 +0000
Subject: [QGIS-Developer] Rotating selected features programmatically
In-Reply-To: <0e229cb1bedb44bda37626654936e12c@erdc.dren.mil>
References: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
 <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>
 <03b73cd41cdd4ea39f6a4eddca16689a@erdc.dren.mil>
 <61e06a63-c75e-4414-9320-0789b50a5dd2@oslandia.com>
 <0e229cb1bedb44bda37626654936e12c@erdc.dren.mil>
Message-ID: <84cfe16886c54fedbdeeadacec5bb41e@erdc.dren.mil>

So I found that I could use a selectAll() method on the layer directly rather than use the processing tool, but when I call the trigger on the rotate action it unselects all the features and only rotates the inner most one.

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer
Sent: Monday, August 5, 2024 1:22 PM
To: Jacky Volpes <jacky.volpes at oslandia.com>; 'qgis-developer' <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Well.  Now for some reason my select by expression tool is not selecting any features, so need to figure out why that is happening before implementing this change. I did not make any changes that I can see that would have caused this.

From: Jacky Volpes <jacky.volpes at oslandia.com<mailto:jacky.volpes at oslandia.com>>
Sent: Monday, August 5, 2024 5:14 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil<mailto:Luke.A.Catania at erdc.dren.mil>>; 'qgis-developer' <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

My guess is that when more than one feature is selected, and the rotation is ended, geometryChanged signal is emitted for each rotated feature.

element_layer_rotated() is run when the first geometryChanged signal is emitted, and is disconnected, and the layer is saved, and the other geometryChanged signals don't trigger anything.

NB: self.vector_layer.editBuffer().geometryChanged.disconnect()       is risky, if other slots are connected, prefer      self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)

Regards,

--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia
Le 01/08/2024 ? 20:29, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit :
def rotateFeature(self):
        """Find the rotate feature action in QGIS toolbar and trigger it so the user can rotate the element.
        """

        # We want to detect when the rotation is complete with a geometryChanged signal so we can commit the changes and
        # end the edit session.
        self.vector_layer.editBuffer().geometryChanged.connect(self.element_layer_rotated)

        # Get all actions so we can search for the mActionRotateFeature action.
        actions = iface.mainWindow().findChildren(QAction)
        action = [x for x in actions if x.objectName()=='mActionRotateFeature'][0]

        expression = '"Element_Nb" = '
        expression = expression + "\'" + f'{self.element_number}' + "\'"
        QgsMessageLog.logMessage(f"expression: {expression}", "StandoffLayers", Qgis.Info)

        processing.run("qgis:selectbyexpression",
                       {'INPUT':self.vector_layer,
                        'EXPRESSION': expression,
                        'METHOD':0
                        }
        )
        # Inititates rotate feature action allowing to select a snap to value.
        action.trigger()

        QgsMessageLog.logMessage(f"Rotate Feature Action Triggered", "ElementPlacementTool", Qgis.Info)

def element_layer_rotated(self):
        """When the rotate action is triggered it seems to ignore the ElementPlacementTool events, so in order to end the edit session
        we need to detect a geometryChanged event after the rotation is complete.
        """
        QgsMessageLog.logMessage(f"Element Layer Rotated: {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)

        # Disconnect from the signal so we can just commit the changes.
        self.vector_layer.editBuffer().geometryChanged.disconnect()

        # Save changes and end edit mode
        self.vector_layer.commitChanges()
        self.vector_layer.endEditCommand()
        self.deactivate()

From: Jacky Volpes <jacky.volpes at oslandia.com><mailto:jacky.volpes at oslandia.com>
Sent: Thursday, August 1, 2024 8:26 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil><mailto:Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' <qgis-developer at lists.osgeo.org><mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

Please provide a PyQGIS code snippet to reproduce. It will be more convenient to comment and suggest modifications.
Thanks,


--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia

Le 26/07/2024 ? 22:06, Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer a ?crit :
I am using the select by expression tool through python to select my features and then I trigger rotation through python I see both selected features rotating, but when I click to end the rotation, it only rotated one of the features and left the other one as is.  If I do this through the QGIS using the selection by expression in the selection toolbar and the rotate in the advanced digitizing tool bar rotating both features works fine.

Any Ideas?

Luke



_______________________________________________

QGIS-Developer mailing list

QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>

List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240805/eb2de06e/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Mon Aug  5 14:29:39 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Mon, 5 Aug 2024 21:29:39 +0000
Subject: [QGIS-Developer] Processing history window is blank
Message-ID: <e139441375dc468fa2c0f4fb2dcfdd75@erdc.dren.mil>

I am using QGIS 3.34.4.  My processing history window is blank. It was there at one point.

It's as if the widget for the list of processes has it's visibility set to False.  I can perform a Save As and it will save to a text file, but I want to see it listed.

Luke
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240805/2af1a926/attachment.htm>

From brunos at mailbox.org  Tue Aug  6 03:36:09 2024
From: brunos at mailbox.org (Bruno Streit)
Date: Tue, 6 Aug 2024 12:36:09 +0200 (CEST)
Subject: [QGIS-Developer] change the datasource of a vector layer in pyqgis
Message-ID: <1555214134.241706.1722940569235@office.mailbox.org>

Dear list
 
I want to change the datasource of some layers with a qgis plugin. It is a change from gdb to postgres. I am checking the new source in a testlayer:
 
print(layer.source()) returns:
old: //zihl/grundlagen/1_GeodatenLV95/2_Kanton_Bern/AGI/A_AV_admin/MOPUBE/data/MOPUBE.gdb|layername=MOPUBE_LIF
 
print(testlayer.source()) returns:
dbname='be' service='be' key='id' checkPrimaryKeyUnicity='1' table="AGI-MOPUBE"."MOPUBE_LIF" (geom)
 
How can I set the datasource of layer to the one of testlayer?
Do i need layer.setDatasource() or layer.setDataProvider() ?
 
Could anyone provide an example?
Any help is apprecaited.
Thanks
Bruno
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240806/a5c30719/attachment.htm>

From jacky.volpes at oslandia.com  Tue Aug  6 07:06:02 2024
From: jacky.volpes at oslandia.com (Jacky Volpes)
Date: Tue, 6 Aug 2024 16:06:02 +0200
Subject: [QGIS-Developer] Rotating selected features programmatically
In-Reply-To: <84cfe16886c54fedbdeeadacec5bb41e@erdc.dren.mil>
References: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
 <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>
 <03b73cd41cdd4ea39f6a4eddca16689a@erdc.dren.mil>
 <61e06a63-c75e-4414-9320-0789b50a5dd2@oslandia.com>
 <0e229cb1bedb44bda37626654936e12c@erdc.dren.mil>
 <84cfe16886c54fedbdeeadacec5bb41e@erdc.dren.mil>
Message-ID: <325263b3-1793-4fb2-acbb-2c7eb5b22811@oslandia.com>

Hi Luke,

 >? and only rotates the inner most one.

Like I guessed, it's because element_layer_rotated() commits and ends 
the edition of the layer (and disconnects signal) as soon as the first 
feature geometry has been changed, so all other change won't follow.

Here is a way to wait for every selected feature to be rotated (feel 
free to adapt):



def element_layer_rotated(self):
 ??????? """When the rotate action is triggered it seems to ignore the 
ElementPlacementTool events, so in order to end the edit session
 ??????? we need to detect a geometryChanged event after the rotation is 
complete.
 ??????? """

# Do nothing if all the selected features have not been rotated
 ??????? if set(self.vector_layer.selectedFeatureIds()) != 
set(self.vector_layer.editBuffer().changedGeometries().keys()):
 ??????????????? return

QgsMessageLog.logMessage(f"Element Layer Rotated: 
{self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)

 ??????? # Disconnect from the signal so we can just commit the changes.
 ??????? 
self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)

 ??????? # Save changes and end edit mode
 ??????? self.vector_layer.commitChanges()
 ??????? self.vector_layer.endEditCommand()
 ??????? self.deactivate()


Regards,

--
Jacky Volpes

Ing?nieur d?veloppeur SIG - Oslandia

Le 05/08/2024 ? 19:44, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit?:
>
> So I found that I could use a selectAll() method on the layer directly 
> rather than use the processing tool, but when I call the trigger on 
> the rotate action it unselects all the features and only rotates the 
> inner most one.
>
> *From:*QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> *On 
> Behalf Of *Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer
> *Sent:* Monday, August 5, 2024 1:22 PM
> *To:* Jacky Volpes <jacky.volpes at oslandia.com>; 'qgis-developer' 
> <qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] Rotating selected features 
> programmatically
>
> Well.? Now for some reason my select by expression tool is not 
> selecting any features, so need to figure out why that is happening 
> before implementing this change. I did not make any changes that I can 
> see that would have caused this.
>
> *From:*Jacky Volpes <jacky.volpes at oslandia.com>
> *Sent:* Monday, August 5, 2024 5:14 AM
> *To:* Catania, Luke A ERDC-RDE-GRL-VA CIV 
> <Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' 
> <qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] Rotating selected features 
> programmatically
>
> Hi Luke,
>
> My guess is that when more than one feature is selected, and the 
> rotation is ended, geometryChanged signal is emitted for each rotated 
> feature.
>
> element_layer_rotated() is run when the first geometryChanged signal 
> is emitted, and is disconnected, and the layer is saved, and the other 
> geometryChanged signals don't trigger anything.
>
> NB: self.vector_layer.editBuffer().geometryChanged.disconnect() is 
> risky, if other slots are connected, prefer 
> self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)
>
> Regards,
>
> --
> Jacky Volpes
> Ing?nieur d?veloppeur SIG - Oslandia
>
> Le 01/08/2024 ? 20:29, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit?:
>
>     def rotateFeature(self):
>
>     ??????? """Find the rotate feature action in QGIS toolbar and
>     trigger it so the user can rotate the element.
>
>     ??????? """
>
>     ??????? # We want to detect when the rotation is complete with a
>     geometryChanged signal so we can commit the changes and
>
>     ??????? # end the edit session.
>
>     self.vector_layer.editBuffer().geometryChanged.connect(self.element_layer_rotated)
>
>     ??????? # Get all actions so we can search for the
>     mActionRotateFeature action.
>
>     ??????? actions = iface.mainWindow().findChildren(QAction)
>
>     ??????? action = [x for x in actions if
>     x.objectName()=='mActionRotateFeature'][0]
>
>     ??????? expression = '"Element_Nb" = '
>
>     ??????? expression = expression + "\'" + f'{self.element_number}'
>     + "\'"
>
>     QgsMessageLog.logMessage(f"expression: {expression}",
>     "StandoffLayers", Qgis.Info)
>
>     processing.run("qgis:selectbyexpression",
>
>     ???????????????????????{'INPUT':self.vector_layer,
>
>     ??????????????????????? 'EXPRESSION': expression,
>
>     ??????????????????????? 'METHOD':0
>
>     ??????????????????????? }
>
>     ??????? )
>
>     ??????? # Inititates rotate feature action allowing to select a
>     snap to value.
>
>     ??????? action.trigger()
>
>     ??????? QgsMessageLog.logMessage(f"Rotate Feature Action
>     Triggered", "ElementPlacementTool", Qgis.Info)
>
>     def element_layer_rotated(self):
>
>     ??????? """When the rotate action is triggered it seems to ignore
>     the ElementPlacementTool events, so in order to end the edit session
>
>     ??????? we need to detect a geometryChanged event after the
>     rotation is complete.
>
>     ??????? """
>
>     QgsMessageLog.logMessage(f"Element Layer Rotated:
>     {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)
>
>     ??????? # Disconnect from the signal so we can just commit the
>     changes.
>
>     self.vector_layer.editBuffer().geometryChanged.disconnect()
>
>     ??????? # Save changes and end edit mode
>
>     ??????? self.vector_layer.commitChanges()
>
>     self.vector_layer.endEditCommand()
>
>     ??????? self.deactivate()
>
>     *From:*Jacky Volpes <jacky.volpes at oslandia.com>
>     <mailto:jacky.volpes at oslandia.com>
>     *Sent:* Thursday, August 1, 2024 8:26 AM
>     *To:* Catania, Luke A ERDC-RDE-GRL-VA CIV
>     <Luke.A.Catania at erdc.dren.mil>
>     <mailto:Luke.A.Catania at erdc.dren.mil>; 'qgis-developer'
>     <qgis-developer at lists.osgeo.org>
>     <mailto:qgis-developer at lists.osgeo.org>
>     *Subject:* Re: [QGIS-Developer] Rotating selected features
>     programmatically
>
>     Hi Luke,
>
>     Please provide a PyQGIS code snippet to reproduce. It will be more
>     convenient to comment and suggest modifications.
>     Thanks,
>
>     --
>
>     Jacky Volpes
>
>       
>
>     Ing?nieur d?veloppeur SIG - Oslandia
>
>
>     Le 26/07/2024 ? 22:06, Catania, Luke A ERDC-RDE-GRL-VA CIV via
>     QGIS-Developer a ?crit?:
>
>         I am using the select by expression tool through python to
>         select my features and then I trigger rotation through python
>         I see both selected features rotating, but when I click to end
>         the rotation, it only rotated one of the features and left the
>         other one as is.? If I do this through the QGIS using the
>         selection by expression in the selection toolbar and the
>         rotate in the advanced digitizing tool bar rotating both
>         features works fine.
>
>         Any Ideas?
>
>         Luke
>
>
>
>         _______________________________________________
>
>         QGIS-Developer mailing list
>
>         QGIS-Developer at lists.osgeo.org
>
>         List info:Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked  <Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked>
>
>         Unsubscribe:Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked  <Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240806/8f6fd73c/attachment-0001.htm>

From Luke.A.Catania at erdc.dren.mil  Tue Aug  6 08:56:05 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Tue, 6 Aug 2024 15:56:05 +0000
Subject: [QGIS-Developer] Rotating selected features programmatically
In-Reply-To: <325263b3-1793-4fb2-acbb-2c7eb5b22811@oslandia.com>
References: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
 <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>
 <03b73cd41cdd4ea39f6a4eddca16689a@erdc.dren.mil>
 <61e06a63-c75e-4414-9320-0789b50a5dd2@oslandia.com>
 <0e229cb1bedb44bda37626654936e12c@erdc.dren.mil>
 <84cfe16886c54fedbdeeadacec5bb41e@erdc.dren.mil>
 <325263b3-1793-4fb2-acbb-2c7eb5b22811@oslandia.com>
Message-ID: <0558aed76dd544f2800ea5fa342d9632@erdc.dren.mil>

So it seems that when I select all the features, triggering the rotation action deselects them all when I click the left mouse button to rotate and so I am left again with just rotating the center feature.

I thought well maybe select the features after triggering the rotation and that somewhat works in that the features are all still selected when the rotation is triggered, but the rotation then appear not to be centered around the object because when I move the mouse all of the features move across the map and the rotation just changes by hundreds of degrees.  Its like the rotation is happening around some far object rather than the center point.

From: Jacky Volpes <jacky.volpes at oslandia.com>
Sent: Tuesday, August 6, 2024 10:06 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

>  and only rotates the inner most one.

Like I guessed, it's because element_layer_rotated() commits and ends the edition of the layer (and disconnects signal) as soon as the first feature geometry has been changed, so all other change won't follow.

Here is a way to wait for every selected feature to be rotated (feel free to adapt):



def element_layer_rotated(self):
        """When the rotate action is triggered it seems to ignore the ElementPlacementTool events, so in order to end the edit session
        we need to detect a geometryChanged event after the rotation is complete.
        """

        # Do nothing if all the selected features have not been rotated
        if set(self.vector_layer.selectedFeatureIds()) != set(self.vector_layer.editBuffer().changedGeometries().keys()):
                return

        QgsMessageLog.logMessage(f"Element Layer Rotated: {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)

        # Disconnect from the signal so we can just commit the changes.
        self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)

        # Save changes and end edit mode
        self.vector_layer.commitChanges()
        self.vector_layer.endEditCommand()
        self.deactivate()


Regards,


--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia
Le 05/08/2024 ? 19:44, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit :
So I found that I could use a selectAll() method on the layer directly rather than use the processing tool, but when I call the trigger on the rotate action it unselects all the features and only rotates the inner most one.

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org><mailto:qgis-developer-bounces at lists.osgeo.org> On Behalf Of Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer
Sent: Monday, August 5, 2024 1:22 PM
To: Jacky Volpes <jacky.volpes at oslandia.com><mailto:jacky.volpes at oslandia.com>; 'qgis-developer' <qgis-developer at lists.osgeo.org><mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Well.  Now for some reason my select by expression tool is not selecting any features, so need to figure out why that is happening before implementing this change. I did not make any changes that I can see that would have caused this.

From: Jacky Volpes <jacky.volpes at oslandia.com<mailto:jacky.volpes at oslandia.com>>
Sent: Monday, August 5, 2024 5:14 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil<mailto:Luke.A.Catania at erdc.dren.mil>>; 'qgis-developer' <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

My guess is that when more than one feature is selected, and the rotation is ended, geometryChanged signal is emitted for each rotated feature.

element_layer_rotated() is run when the first geometryChanged signal is emitted, and is disconnected, and the layer is saved, and the other geometryChanged signals don't trigger anything.

NB: self.vector_layer.editBuffer().geometryChanged.disconnect()       is risky, if other slots are connected, prefer      self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)

Regards,

--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia
Le 01/08/2024 ? 20:29, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit :
def rotateFeature(self):
        """Find the rotate feature action in QGIS toolbar and trigger it so the user can rotate the element.
        """

        # We want to detect when the rotation is complete with a geometryChanged signal so we can commit the changes and
        # end the edit session.
        self.vector_layer.editBuffer().geometryChanged.connect(self.element_layer_rotated)

        # Get all actions so we can search for the mActionRotateFeature action.
        actions = iface.mainWindow().findChildren(QAction)
        action = [x for x in actions if x.objectName()=='mActionRotateFeature'][0]

        expression = '"Element_Nb" = '
        expression = expression + "\'" + f'{self.element_number}' + "\'"
        QgsMessageLog.logMessage(f"expression: {expression}", "StandoffLayers", Qgis.Info)

        processing.run("qgis:selectbyexpression",
                       {'INPUT':self.vector_layer,
                        'EXPRESSION': expression,
                        'METHOD':0
                        }
        )
        # Inititates rotate feature action allowing to select a snap to value.
        action.trigger()

        QgsMessageLog.logMessage(f"Rotate Feature Action Triggered", "ElementPlacementTool", Qgis.Info)

def element_layer_rotated(self):
        """When the rotate action is triggered it seems to ignore the ElementPlacementTool events, so in order to end the edit session
        we need to detect a geometryChanged event after the rotation is complete.
        """
        QgsMessageLog.logMessage(f"Element Layer Rotated: {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)

        # Disconnect from the signal so we can just commit the changes.
        self.vector_layer.editBuffer().geometryChanged.disconnect()

        # Save changes and end edit mode
        self.vector_layer.commitChanges()
        self.vector_layer.endEditCommand()
        self.deactivate()

From: Jacky Volpes <jacky.volpes at oslandia.com><mailto:jacky.volpes at oslandia.com>
Sent: Thursday, August 1, 2024 8:26 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil><mailto:Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' <qgis-developer at lists.osgeo.org><mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

Please provide a PyQGIS code snippet to reproduce. It will be more convenient to comment and suggest modifications.
Thanks,



--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia

Le 26/07/2024 ? 22:06, Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer a ?crit :
I am using the select by expression tool through python to select my features and then I trigger rotation through python I see both selected features rotating, but when I click to end the rotation, it only rotated one of the features and left the other one as is.  If I do this through the QGIS using the selection by expression in the selection toolbar and the rotate in the advanced digitizing tool bar rotating both features works fine.

Any Ideas?

Luke




_______________________________________________

QGIS-Developer mailing list

QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>

List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240806/a2b49b05/attachment-0001.htm>

From tasha at groundtruthforestry.com  Wed Aug  7 07:31:59 2024
From: tasha at groundtruthforestry.com (Tasha Anstey)
Date: Wed, 7 Aug 2024 14:31:59 +0000
Subject: [QGIS-Developer] Polygons disappearing bug
Message-ID: <LO2P265MB57743EFFD59B214D7A5C69F8A2B82@LO2P265MB5774.GBRP265.PROD.OUTLOOK.COM>

Hi,

Myself and my business partner are daily users of QGIS, and we have notices recently that we have been having problems with polygons disappearing when splitting polygons or editing vertices. Sometimes a seemingly random number and distribution of polygons disappear from the layer being edited. The polygons still exist in the attribute layer but they have a NULL geometry and area. We haven't been able to recover them.

Kind regards,

Tasha

Tasha Anstey
Ground Truth Forestry
tasha at groundtruthforestry.com | 07553 790460

[cid:22dfb90e-c7d2-43c3-9649-60f0d47910a8]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240807/689eab86/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Outlook-jcfmostj.png
Type: image/png
Size: 224598 bytes
Desc: Outlook-jcfmostj.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240807/689eab86/attachment-0001.png>

From Luke.A.Catania at erdc.dren.mil  Wed Aug  7 13:28:49 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Wed, 7 Aug 2024 20:28:49 +0000
Subject: [QGIS-Developer] Rotating selected features programmatically
In-Reply-To: <0558aed76dd544f2800ea5fa342d9632@erdc.dren.mil>
References: <8c3d600a00d446768d74f269667b3847@erdc.dren.mil>
 <7dee496b-14a1-40ee-add6-8485c77dc238@oslandia.com>
 <03b73cd41cdd4ea39f6a4eddca16689a@erdc.dren.mil>
 <61e06a63-c75e-4414-9320-0789b50a5dd2@oslandia.com>
 <0e229cb1bedb44bda37626654936e12c@erdc.dren.mil>
 <84cfe16886c54fedbdeeadacec5bb41e@erdc.dren.mil>
 <325263b3-1793-4fb2-acbb-2c7eb5b22811@oslandia.com>
 <0558aed76dd544f2800ea5fa342d9632@erdc.dren.mil>
Message-ID: <03de0b9bb77f475199d72df5a7af2565@erdc.dren.mil>

I made some progress to get the layer successfully rotated. I tracked my issue to commitChanges.

If I don?t call commitChanges() on the layer the layer is successfully rotated, but as soon as I call commitChanges the layers outer feature goes back to being unrotated but the inner one stays rotated..

If I don?t call it, then I need to manually toggle editing off by right clicking on the layer in the QGIS Layer Panel.  I don?t want the user to have to do that.

If I call commitChanges in the QGIS python console it successfully commits the change and toggles ending off.

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer
Sent: Tuesday, August 6, 2024 11:56 AM
To: Jacky Volpes <jacky.volpes at oslandia.com>; 'qgis-developer' <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

So it seems that when I select all the features, triggering the rotation action deselects them all when I click the left mouse button to rotate and so I am left again with just rotating the center feature.

I thought well maybe select the features after triggering the rotation and that somewhat works in that the features are all still selected when the rotation is triggered, but the rotation then appear not to be centered around the object because when I move the mouse all of the features move across the map and the rotation just changes by hundreds of degrees.  Its like the rotation is happening around some far object rather than the center point.

From: Jacky Volpes <jacky.volpes at oslandia.com<mailto:jacky.volpes at oslandia.com>>
Sent: Tuesday, August 6, 2024 10:06 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil<mailto:Luke.A.Catania at erdc.dren.mil>>; 'qgis-developer' <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

>  and only rotates the inner most one.

Like I guessed, it's because element_layer_rotated() commits and ends the edition of the layer (and disconnects signal) as soon as the first feature geometry has been changed, so all other change won't follow.

Here is a way to wait for every selected feature to be rotated (feel free to adapt):



def element_layer_rotated(self):
        """When the rotate action is triggered it seems to ignore the ElementPlacementTool events, so in order to end the edit session
        we need to detect a geometryChanged event after the rotation is complete.
        """

        # Do nothing if all the selected features have not been rotated
        if set(self.vector_layer.selectedFeatureIds()) != set(self.vector_layer.editBuffer().changedGeometries().keys()):
                return

        QgsMessageLog.logMessage(f"Element Layer Rotated: {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)

        # Disconnect from the signal so we can just commit the changes.
        self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)

        # Save changes and end edit mode
        self.vector_layer.commitChanges()
        self.vector_layer.endEditCommand()
        self.deactivate()


Regards,

--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia
Le 05/08/2024 ? 19:44, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit :
So I found that I could use a selectAll() method on the layer directly rather than use the processing tool, but when I call the trigger on the rotate action it unselects all the features and only rotates the inner most one.

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org><mailto:qgis-developer-bounces at lists.osgeo.org> On Behalf Of Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer
Sent: Monday, August 5, 2024 1:22 PM
To: Jacky Volpes <jacky.volpes at oslandia.com><mailto:jacky.volpes at oslandia.com>; 'qgis-developer' <qgis-developer at lists.osgeo.org><mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Well.  Now for some reason my select by expression tool is not selecting any features, so need to figure out why that is happening before implementing this change. I did not make any changes that I can see that would have caused this.

From: Jacky Volpes <jacky.volpes at oslandia.com<mailto:jacky.volpes at oslandia.com>>
Sent: Monday, August 5, 2024 5:14 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil<mailto:Luke.A.Catania at erdc.dren.mil>>; 'qgis-developer' <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

My guess is that when more than one feature is selected, and the rotation is ended, geometryChanged signal is emitted for each rotated feature.

element_layer_rotated() is run when the first geometryChanged signal is emitted, and is disconnected, and the layer is saved, and the other geometryChanged signals don't trigger anything.

NB: self.vector_layer.editBuffer().geometryChanged.disconnect()       is risky, if other slots are connected, prefer      self.vector_layer.editBuffer().geometryChanged.disconnect(self.element_layer_rotated)

Regards,

--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia
Le 01/08/2024 ? 20:29, Catania, Luke A ERDC-RDE-GRL-VA CIV a ?crit :
def rotateFeature(self):
        """Find the rotate feature action in QGIS toolbar and trigger it so the user can rotate the element.
        """

        # We want to detect when the rotation is complete with a geometryChanged signal so we can commit the changes and
        # end the edit session.
        self.vector_layer.editBuffer().geometryChanged.connect(self.element_layer_rotated)

        # Get all actions so we can search for the mActionRotateFeature action.
        actions = iface.mainWindow().findChildren(QAction)
        action = [x for x in actions if x.objectName()=='mActionRotateFeature'][0]

        expression = '"Element_Nb" = '
        expression = expression + "\'" + f'{self.element_number}' + "\'"
        QgsMessageLog.logMessage(f"expression: {expression}", "StandoffLayers", Qgis.Info)

        processing.run("qgis:selectbyexpression",
                       {'INPUT':self.vector_layer,
                        'EXPRESSION': expression,
                        'METHOD':0
                        }
        )
        # Inititates rotate feature action allowing to select a snap to value.
        action.trigger()

        QgsMessageLog.logMessage(f"Rotate Feature Action Triggered", "ElementPlacementTool", Qgis.Info)

def element_layer_rotated(self):
        """When the rotate action is triggered it seems to ignore the ElementPlacementTool events, so in order to end the edit session
        we need to detect a geometryChanged event after the rotation is complete.
        """
        QgsMessageLog.logMessage(f"Element Layer Rotated: {self.vector_layer.name()}", "ElementPlacementTool", Qgis.Info)

        # Disconnect from the signal so we can just commit the changes.
        self.vector_layer.editBuffer().geometryChanged.disconnect()

        # Save changes and end edit mode
        self.vector_layer.commitChanges()
        self.vector_layer.endEditCommand()
        self.deactivate()

From: Jacky Volpes <jacky.volpes at oslandia.com><mailto:jacky.volpes at oslandia.com>
Sent: Thursday, August 1, 2024 8:26 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil><mailto:Luke.A.Catania at erdc.dren.mil>; 'qgis-developer' <qgis-developer at lists.osgeo.org><mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Rotating selected features programmatically

Hi Luke,

Please provide a PyQGIS code snippet to reproduce. It will be more convenient to comment and suggest modifications.
Thanks,


--

Jacky Volpes



Ing?nieur d?veloppeur SIG - Oslandia

Le 26/07/2024 ? 22:06, Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer a ?crit :
I am using the select by expression tool through python to select my features and then I trigger rotation through python I see both selected features rotating, but when I click to end the rotation, it only rotated one of the features and left the other one as is.  If I do this through the QGIS using the selection by expression in the selection toolbar and the rotate in the advanced digitizing tool bar rotating both features works fine.

Any Ideas?

Luke



_______________________________________________

QGIS-Developer mailing list

QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>

List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked

Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240807/798d092f/attachment-0001.htm>

From nyall.dawson at gmail.com  Wed Aug  7 19:31:51 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 8 Aug 2024 12:31:51 +1000
Subject: [QGIS-Developer] Polygons disappearing bug
In-Reply-To: <LO2P265MB57743EFFD59B214D7A5C69F8A2B82@LO2P265MB5774.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB57743EFFD59B214D7A5C69F8A2B82@LO2P265MB5774.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CAB28AsjJWw5cMYn-iYLFcjrxkuRHPFTK9kjj4_sZBQmktqBhtg@mail.gmail.com>

On Thu, 8 Aug 2024 at 03:01, Tasha Anstey via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> Hi,
>
> Myself and my business partner are daily users of QGIS, and we have notices recently that we have been having problems with polygons disappearing when splitting polygons or editing vertices. Sometimes a seemingly random number and distribution of polygons disappear from the layer being edited. The polygons still exist in the attribute layer but they have a NULL geometry and area. We haven't been able to recover them.

This kind of behaviour is generally a symptom of a corrupted spatial
index in a dataset. Depending on the format the fix will differ, but
you should try either re-creating just the spatial index or (better)
saving the problematic datasets to a new file so that the entire
dataset is re-written from scratch.

I'd also strongly suggest starting a new QGIS user profile and testing
without ANY plugins installed. Plugins are another common cause of
issues like this.

Nyall


>
> Kind regards,
>
> Tasha
>
> Tasha Anstey
> Ground Truth Forestry
> tasha at groundtruthforestry.com | 07553 790460
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From lova at kartoza.com  Fri Aug  9 06:46:24 2024
From: lova at kartoza.com (Lova Andriarimalala)
Date: Fri, 9 Aug 2024 16:46:24 +0300
Subject: [QGIS-Developer] QGIS Full Stack Web Developer Report
In-Reply-To: <CAMLC-sDvceW7XVvT9XhO37kNG0dCLWW2S_1L6Q8E1=hZ1za7xw@mail.gmail.com>
References: <AM6PR08MB39916950D01F09B24F1EFF52FBB42@AM6PR08MB3991.eurprd08.prod.outlook.com>
 <CAMLC-sDvceW7XVvT9XhO37kNG0dCLWW2S_1L6Q8E1=hZ1za7xw@mail.gmail.com>
Message-ID: <CAMLC-sBTZPfFrd5UPpeNSKGCdwpa2C8ot6Hyrv7iu06uHyheFQ@mail.gmail.com>

Hello everyone,

Please find below this week's report for the maintenance and development of
the QGIS and related websites:

*Overview:*

I mainly focused on deploying the latest changes on the QGIS website, the
QGIS Feed Website and the QGIS Plugins Website. I also worked on some
issues for them.


*Deployed PRs on the QGIS Website:*









* - Optimise sponsors logo <https://github.com/qgis/QGIS-Website/pull/388>
- Add qgis 1st conference image to the thank-you page
<https://github.com/qgis/QGIS-Website/pull/389> - Limit roadmap schedule
table width to 100% <https://github.com/qgis/QGIS-Website/pull/396> - Add a
select menu to choose a language for documentation
<https://github.com/qgis/QGIS-Website/pull/391> - Optimise sponsors logo
<https://github.com/qgis/QGIS-Website/pull/388> - Fixes for the playwright
test and the commit hash link
<https://github.com/qgis/QGIS-Website/pull/390> *
*Deployed PRs on the QGIS Plugin Website:*

   - <https://github.com/qgis/QGIS-Django/pull/452>Feedback clarification
   <https://github.com/qgis/QGIS-Django/pull/452>

*Deployed PRs on the QGIS Feed Website:*

   - Allow xx_XX lang in the parameter
   <https://github.com/qgis/qgis-feed/pull/93>
   - Update the design to match the new website
   <https://github.com/qgis/qgis-feed/pull/72>

*New PRs on the QGIS Website:*


   - Fix language name <https://github.com/qgis/QGIS-Website/pull/398>
   - Remove the inexistent roadmap page
   <https://github.com/qgis/QGIS-Website/pull/397>
   - Replace QGIS 3.38 docs links with QGIS testing
   <https://github.com/qgis/QGIS-Website/pull/395>

*Ongoing task:*

   - Split the website of the plugin to plugins, planet and hub
   <https://github.com/qgis/QGIS-Django/issues/454>

*Question/feedback needed:*
About the licensing for a plugin when uploading it to plugins.qgis.org, I
was wondering if we could allow the COPYING as a valid license file apart
from the LICENSE file. This is related to an ongoing discussion at
https://github.com/qgis/QGIS-Django/issues/453.

Lova Andriarimalala


*QGIS Full Stack Developer   *
*T *: +27(0) 87 809 2702          *E *: lova at kartoza.com          *W* :
kartoza.com



*This email and any attachments are confidential and intended solely for
the use of the individual or entity to whom they are addressed. If you *
*have received this email in error, please notify the sender immediately
and delete it from your system. Unauthorised use, disclosure, or copying*
*of the contents is prohibited.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240809/0b89f8fc/attachment.htm>

From rdmailings at duif.net  Sun Aug 11 10:52:39 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 11 Aug 2024 19:52:39 +0200
Subject: [QGIS-Developer] plz help: build of docs pyqgis cookbook fails
Message-ID: <f916927a-2958-4834-8edb-1008ac89505d@duif.net>

Hi Devs,

Anybody has an idea why the pyqgis docs fail to build?

The errors:

https://github.com/qgis/QGIS-Documentation/actions/runs/10340908334/job/28622112228#step:7:675

tell us that certain methods would not be available:

writing output... [100%] docs/user_manual/working_with_vector_tiles/vector_tiles
/home/runner/work/QGIS-Documentation/QGIS-Documentation/docs/pyqgis_developer_cookbook/vector.rst:412: WARNING: py:meth reference target not found: qgis.core.QgsVectorDataProvider.addFeatures

/home/runner/work/QGIS-Documentation/QGIS-Documentation/docs/pyqgis_developer_cookbook/vector.rst:733: WARNING: py:meth reference target not found: qgis.core.QgsVectorFileWriter.addFeature
generating indices... genindex done
writing additional pages... search done

Anybody an idea how to fix this?

Regards,

Richard Duivenvoorde

From Peter.Drexel at vorarlberg.at  Mon Aug 12 06:35:06 2024
From: Peter.Drexel at vorarlberg.at (Drexel Peter)
Date: Mon, 12 Aug 2024 13:35:06 +0000
Subject: [QGIS-Developer] Refreshing Elevation Profile View after Loading
 Data using .loadLayerDefinition
Message-ID: <62893518559c428aa138fcb7dfe49ea1@vorarlberg.at>

Dear list,
I am using QgsLayerDefinition().loadLayerDefinition() to load a QGIS-Layer into QGIS 3.38.

Using "Log = QgsLayerDefinition().loadLayerDefinition("pathtofile/xxx.qlr", QgsProject.instance(),QgsProject.instance().layerTreeRoot())" in a Script or in the Python-Console works well to open some elevation data into the layer table and the main view.
But if I want to see the same Data in an Elevation-Profile-View the dataset does not show up in an already opened Elevation-Profile-View. I have to close and reopen the Elevation Profile View to see the loaded Dataset.

To reproduce:
*	Start QGIS
*	Load any Elevation Data and export a qlr-file for the Elevation-Dataset. Unload (Close) the Dataset again.
*	Load another Elevation Dataset
*	Open an Elevation-Profile-View  (View - Elevation-Profile) and draw a Line - you can see the profile plot for the loaded dataset.
*	Keep the Elevation-Profile-View opened and Run "Log = QgsLayerDefinition().loadLayerDefinition("pathtofile/xxx.qlr", QgsProject.instance(),QgsProject.instance().layerTreeRoot())" in the python console - adjust the path to your saved .qlr-File). The Elevation-Dataset is loaded to the Layer-List und to the Main Map-View but not loaded to the Elevation-Profile-View and not to the Layer-List of the Elevation-Profile.

Is there anything I can do to "refresh" the Elevation-Profile-View and the Layer List of the Elevation Profile?

Thanks
Best regards
Peter








From mrvelle at gmail.com  Mon Aug 12 22:13:09 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Tue, 13 Aug 2024 07:13:09 +0200
Subject: [QGIS-Developer] Writing a test that creates qgz and then inspects
 xml
Message-ID: <CAKKm1vE2gAB88XyhpLtCdg0s2UbSyskkOBsu-BHQF0OcTvEGFQ@mail.gmail.com>

I want to write a test that does this, but Im not too experienced with
pytest, make, etc. I might be able to actually do it, but I suspect it
would not be pretty, and it would be far from best practice.

I tried to look at the unit tests that are already there, but its
overwhelming. Could someone recommend a few tests that I should look at?

Sincerely, Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240813/4067e88f/attachment.htm>

From denis.rouzaud at gmail.com  Tue Aug 13 05:20:45 2024
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Tue, 13 Aug 2024 14:20:45 +0200
Subject: [QGIS-Developer] auto sipify and sipify checks on PR
Message-ID: <CAMtsY+bYaZcScA4ra-v-E0Nc_6GL3d9oURdQd_tLrco=UAoYGg@mail.gmail.com>

Dear list,

There is now an auto-sipify bot running after each push on any active
branches in Github (master + release-*).
We have disabled the requirement for the sip-check test to succeed
(checking that the sip files are up to date) for the PRs.

This means that if you have a trivial change to a header, it is not
strictly required to update the sip files: you can merge and the bot will
update them afterwards.

Just use this with caution as this might lead to merging code which would
make the compilation fail.

Kind regards,
Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240813/649266d0/attachment.htm>

From rdmailings at duif.net  Fri Aug 16 02:59:46 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 16 Aug 2024 11:59:46 +0200
Subject: [QGIS-Developer] Did polygon winding order changed in QGIS or GDAL
 recently?
Message-ID: <dbdaf250-44a3-4ce7-873f-6cfb458b5c8e@duif.net>

Recently there was a question on the user list, about the winding order of polygons in json export, which seemed/(was thought to have) changed in time:

https://lists.osgeo.org/pipermail/qgis-user/2024-August/054721.html

And now the open data vector tiles of the Netherlands, do not work anymore in QGIS (in dutch):
https://geoforum.nl/t/bgt-vectortiles-in-qgis-zijn-niet-meer-compleet/9731

Their conclusion is: in the standards the OGC winding order is different from the MVT winding order, that is why QGIS (thinking QGIS choose for OGC), is not rendering the MVT tiles anymore...

So my question is:

- anybody aware of changes of the winding order?
- or do we do things 'better' now, breaking older functionality?
- or are the pdok mvt tiles wrongly ordered?

In the case of MVT tiles (haven't looked into the specs though), but it seems that the reader of the data would respect ordering differences between standards?

If you want to checkout the pdok/dutch open data:

https://api.pdok.nl/lv/bgt/ogc/v1/tiles/WebMercatorQuad/{z}/{y}/{x}?f=mvt
CRS: EPSG:3857
Max Zoom Level: 17
Styling:
https://api.pdok.nl/lv/bgt/ogc/v1/styles/bgt_achtergrondvisualisatie__webmercatorquad?f=mapbox

In favour of QGIS, an older Esri osm dataset, is still visible/working:

https://basemaps.arcgis.com/arcgis/rest/services/OpenStreetMap_v2/VectorTileServer
Max Zoom Level: 19
https://www.arcgis.com/sharing/rest/content/items/3e1a00aeae81496587988075fe529f71/resources/styles/root.json?f=pjson

Thanks for any pointers!

Regards,

Richard Duivenvoorde













From denis.rouzaud at gmail.com  Fri Aug 16 05:14:39 2024
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Fri, 16 Aug 2024 14:14:39 +0200
Subject: [QGIS-Developer] Did polygon winding order changed in QGIS or
 GDAL recently?
In-Reply-To: <dbdaf250-44a3-4ce7-873f-6cfb458b5c8e@duif.net>
References: <dbdaf250-44a3-4ce7-873f-6cfb458b5c8e@duif.net>
Message-ID: <CAMtsY+ZERK0rHK-9DjCMTW_yTiTq4Ugs-bAL-3Yt0mOdYr+oDg@mail.gmail.com>

Some related tickets/PR:
https://github.com/qgis/QGIS/issues/58333
https://github.com/qgis/QGIS/pull/55306

Le ven. 16 ao?t 2024 ? 12:09, Richard Duivenvoorde via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Recently there was a question on the user list, about the winding order of
> polygons in json export, which seemed/(was thought to have) changed in time:
>
> https://lists.osgeo.org/pipermail/qgis-user/2024-August/054721.html
>
> And now the open data vector tiles of the Netherlands, do not work anymore
> in QGIS (in dutch):
> https://geoforum.nl/t/bgt-vectortiles-in-qgis-zijn-niet-meer-compleet/9731
>
> Their conclusion is: in the standards the OGC winding order is different
> from the MVT winding order, that is why QGIS (thinking QGIS choose for
> OGC), is not rendering the MVT tiles anymore...
>
> So my question is:
>
> - anybody aware of changes of the winding order?
> - or do we do things 'better' now, breaking older functionality?
> - or are the pdok mvt tiles wrongly ordered?
>
> In the case of MVT tiles (haven't looked into the specs though), but it
> seems that the reader of the data would respect ordering differences
> between standards?
>
> If you want to checkout the pdok/dutch open data:
>
> https://api.pdok.nl/lv/bgt/ogc/v1/tiles/WebMercatorQuad/{z}/{y}/{x}?f=mvt
> CRS: EPSG:3857
> Max Zoom Level: 17
> Styling:
>
> https://api.pdok.nl/lv/bgt/ogc/v1/styles/bgt_achtergrondvisualisatie__webmercatorquad?f=mapbox
>
> In favour of QGIS, an older Esri osm dataset, is still visible/working:
>
>
> https://basemaps.arcgis.com/arcgis/rest/services/OpenStreetMap_v2/VectorTileServer
> Max Zoom Level: 19
>
> https://www.arcgis.com/sharing/rest/content/items/3e1a00aeae81496587988075fe529f71/resources/styles/root.json?f=pjson
>
> Thanks for any pointers!
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
>
>
>
>
>
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240816/dac971bb/attachment.htm>

From nyall.dawson at gmail.com  Fri Aug 16 06:01:10 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 16 Aug 2024 23:01:10 +1000
Subject: [QGIS-Developer] Did polygon winding order changed in QGIS or
 GDAL recently?
In-Reply-To: <CAMtsY+ZERK0rHK-9DjCMTW_yTiTq4Ugs-bAL-3Yt0mOdYr+oDg@mail.gmail.com>
References: <dbdaf250-44a3-4ce7-873f-6cfb458b5c8e@duif.net>
 <CAMtsY+ZERK0rHK-9DjCMTW_yTiTq4Ugs-bAL-3Yt0mOdYr+oDg@mail.gmail.com>
Message-ID: <CAB28Asj4URjV6w0ZFJ5B64_0RWZTO1PyWpRb9uf6E=cZzcV8QQ@mail.gmail.com>

On Fri, 16 Aug 2024, 10:15?pm Denis Rouzaud via QGIS-Developer, <
qgis-developer at lists.osgeo.org> wrote:

> Some related tickets/PR:
> https://github.com/qgis/QGIS/issues/58333
> https://github.com/qgis/QGIS/pull/55306
>


Those tickets only relate to digitising, they won't affect vector tile
rendering.

Nyall


>
> Le ven. 16 ao?t 2024 ? 12:09, Richard Duivenvoorde via QGIS-Developer <
> qgis-developer at lists.osgeo.org> a ?crit :
>
>> Recently there was a question on the user list, about the winding order
>> of polygons in json export, which seemed/(was thought to have) changed in
>> time:
>>
>> https://lists.osgeo.org/pipermail/qgis-user/2024-August/054721.html
>>
>> And now the open data vector tiles of the Netherlands, do not work
>> anymore in QGIS (in dutch):
>> https://geoforum.nl/t/bgt-vectortiles-in-qgis-zijn-niet-meer-compleet/9731
>>
>> Their conclusion is: in the standards the OGC winding order is different
>> from the MVT winding order, that is why QGIS (thinking QGIS choose for
>> OGC), is not rendering the MVT tiles anymore...
>>
>> So my question is:
>>
>> - anybody aware of changes of the winding order?
>> - or do we do things 'better' now, breaking older functionality?
>> - or are the pdok mvt tiles wrongly ordered?
>>
>> In the case of MVT tiles (haven't looked into the specs though), but it
>> seems that the reader of the data would respect ordering differences
>> between standards?
>>
>> If you want to checkout the pdok/dutch open data:
>>
>> https://api.pdok.nl/lv/bgt/ogc/v1/tiles/WebMercatorQuad/{z}/{y}/{x}?f=mvt
>> CRS: EPSG:3857
>> Max Zoom Level: 17
>> Styling:
>>
>> https://api.pdok.nl/lv/bgt/ogc/v1/styles/bgt_achtergrondvisualisatie__webmercatorquad?f=mapbox
>>
>> In favour of QGIS, an older Esri osm dataset, is still visible/working:
>>
>>
>> https://basemaps.arcgis.com/arcgis/rest/services/OpenStreetMap_v2/VectorTileServer
>> Max Zoom Level: 19
>>
>> https://www.arcgis.com/sharing/rest/content/items/3e1a00aeae81496587988075fe529f71/resources/styles/root.json?f=pjson
>>
>> Thanks for any pointers!
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240816/d0eadd98/attachment.htm>

From selma at kartoza.com  Fri Aug 16 09:37:11 2024
From: selma at kartoza.com (Selma Vidimlic)
Date: Fri, 16 Aug 2024 18:37:11 +0200
Subject: [QGIS-Developer] QGIS Documentation writer - Report
In-Reply-To: <CALarpe7oBgEd_NhMX=dsNjfbVFNkmwdkVUBDftG+To-hA3HunA@mail.gmail.com>
References: <CALarpe7oBgEd_NhMX=dsNjfbVFNkmwdkVUBDftG+To-hA3HunA@mail.gmail.com>
Message-ID: <CALarpe49Nw8kqchNazLdJzwXfvrdw6WYWBbk_bCN81AhLZ2xEw@mail.gmail.com>

Hello all,

Below, you can find a new documentation report.

Merged PR's:
Single color renderer <https://github.com/qgis/QGIS-Documentation/pull/9200>
Data Filtering - Elevation Controller
<https://github.com/qgis/QGIS-Documentation/pull/9129>
<https://github.com/qgis/QGIS-Documentation/pull/9129>SQL Results Window
Clipboard <https://github.com/qgis/QGIS-Documentation/pull/9137>
Legend Items <https://github.com/qgis/QGIS-Documentation/pull/9197>

<https://github.com/qgis/QGIS-Documentation/pull/9197>New open pull
requests (Raster properties 3.38):
Elevation properties <https://github.com/qgis/QGIS-Documentation/pull/9204>

Have a nice weekend,
Selma Vidimlic Husic
*QGIS Documentation writer*

*E:* selma at kartoza.com         * W:* kartoza.com



*This email and any attachments are confidential and intended solely for
the use of the individual or entity to whom they are addressed. If you *
*have received this email in error, please notify the sender immediately
and delete it from your system. Unauthorised use, disclosure, or copying *
*of the contents is prohibited.*


On Fri, 2 Aug 2024 at 16:57, Selma Vidimlic <selma at kartoza.com> wrote:

> Hello all,
>
> There is a new Documentation report:
>
> Pull Requests that have been merged:
> Raster Temporal Properties
> <https://github.com/qgis/QGIS-Documentation/pull/9160>
> Custom properties <https://github.com/qgis/QGIS-Documentation/pull/9078>
> More screenshots for the Custom properties
> <https://github.com/qgis/QGIS-Documentation/pull/9174>
> OGC API Source type for vector and raster
> <https://github.com/qgis/QGIS-Documentation/pull/9133>
>
> Open Pull Requests:
> Processing algorithm dialog title - changes in User Manual
> <https://github.com/qgis/QGIS-Documentation/pull/9185>
> (This one will include changes across every chapter in User manual that
> mentions this dialog)
> Data Filtering - Elevation Controller
> <https://github.com/qgis/QGIS-Documentation/pull/9129>
> <https://github.com/qgis/QGIS-Documentation/pull/9129>(There is a
> conflict in this PR that I will resolve on Monday)
>
> I will continue to work on changes regarding the processing algorithm
> dialog title in the User and Training Manual, and focus on the 3.38
> features.
>
>
> Selma Vidimlic Husic
> *QGIS Documentation writer*
>
> *E:* selma at kartoza.com         * W:* kartoza.com
>
>
>
> *This email and any attachments are confidential and intended solely for
> the use of the individual or entity to whom they are addressed. If you *
> *have received this email in error, please notify the sender immediately
> and delete it from your system. Unauthorised use, disclosure, or copying *
> *of the contents is prohibited.*
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240816/13964bb5/attachment-0001.htm>

From rdmailings at duif.net  Mon Aug 19 09:00:49 2024
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 19 Aug 2024 18:00:49 +0200
Subject: [QGIS-Developer] Did polygon winding order changed in QGIS or
 GDAL recently?
In-Reply-To: <CAB28Asj4URjV6w0ZFJ5B64_0RWZTO1PyWpRb9uf6E=cZzcV8QQ@mail.gmail.com>
References: <dbdaf250-44a3-4ce7-873f-6cfb458b5c8e@duif.net>
 <CAMtsY+ZERK0rHK-9DjCMTW_yTiTq4Ugs-bAL-3Yt0mOdYr+oDg@mail.gmail.com>
 <CAB28Asj4URjV6w0ZFJ5B64_0RWZTO1PyWpRb9uf6E=cZzcV8QQ@mail.gmail.com>
Message-ID: <eb4ea0e7-405a-4544-91cc-597fed811767@duif.net>

On 8/16/24 15:01, Nyall Dawson wrote:

>         - or are the pdok mvt tiles wrongly ordered?

FYI This was the case !

So QGIS was fine in this case: the server served wrong tiles

Regards,

Richard


From mrvelle at gmail.com  Mon Aug 19 14:50:20 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Mon, 19 Aug 2024 23:50:20 +0200
Subject: [QGIS-Developer] QGIS project maintainability, forms and styles,
 xml verbosity
In-Reply-To: <CAB28AshrvoObX+wT+_q2J9KvizpH3FsZLwcMaPgwJwDo96YfvQ@mail.gmail.com>
References: <42a7b143-3474-4aca-85f7-fc2ab62d052f@gmail.com>
 <CAB28AshrvoObX+wT+_q2J9KvizpH3FsZLwcMaPgwJwDo96YfvQ@mail.gmail.com>
Message-ID: <CAKKm1vFUV1HogQHkjN2cFo=5KG=OSXbvvn9G0ZV5jptoMVWmEw@mail.gmail.com>

>
> It's an absolute PAIN to synchronize form configuration across styles!
>

So true. I have tried various approaches in order to do it right (not
missing anything and not accidentally making other mistakes) and doing it
relatively quick, but I haven't found a way that's tolerable. I have gotten
to a point where I go a long way to avoid editing forms :)

I have built a few scripts that can help me manipulate some things, and I
use these before committing/distributing qgz files. But I often make some
kind of error. I have tried to catch these errors by using text diff on the
xml, but the output of diffing is totally overwhelming and my brain
cant handle it :) Tools like xmldiff might provide a comparison that is
easier to read, but in most cases it takes hours or days to complete
because the XML file is so large.

The file size itself has never bothered me, but I would really appreciate
every initiative that could make the project files easier to
read/understand/compare/verify :)

Sincerely, Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240819/9eeeb551/attachment.htm>

From mrvelle at gmail.com  Mon Aug 19 15:35:37 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Tue, 20 Aug 2024 00:35:37 +0200
Subject: [QGIS-Developer] QGIS project maintainability, forms and styles,
 xml verbosity
In-Reply-To: <CAKKm1vFUV1HogQHkjN2cFo=5KG=OSXbvvn9G0ZV5jptoMVWmEw@mail.gmail.com>
References: <42a7b143-3474-4aca-85f7-fc2ab62d052f@gmail.com>
 <CAB28AshrvoObX+wT+_q2J9KvizpH3FsZLwcMaPgwJwDo96YfvQ@mail.gmail.com>
 <CAKKm1vFUV1HogQHkjN2cFo=5KG=OSXbvvn9G0ZV5jptoMVWmEw@mail.gmail.com>
Message-ID: <CAKKm1vFzWeo4radDC-5ne=e7aSOVeNJfr1OmBe-nO=rOUGxUiQ@mail.gmail.com>

I forgot an important detail, that explains why it gets intolerable for me.
The qgis project I maintain has several layers that are close to identical,
but covering different municipalities. So when I change a form, I need to
make that change to several layers (each having several styles).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240820/34d02322/attachment.htm>

From emma at north-road.com  Mon Aug 19 18:47:35 2024
From: emma at north-road.com (Emma Hain)
Date: Tue, 20 Aug 2024 11:47:35 +1000
Subject: [QGIS-Developer] QGIS project maintainability, forms and styles,
 xml verbosity
In-Reply-To: <CAKKm1vFzWeo4radDC-5ne=e7aSOVeNJfr1OmBe-nO=rOUGxUiQ@mail.gmail.com>
References: <42a7b143-3474-4aca-85f7-fc2ab62d052f@gmail.com>
 <CAB28AshrvoObX+wT+_q2J9KvizpH3FsZLwcMaPgwJwDo96YfvQ@mail.gmail.com>
 <CAKKm1vFUV1HogQHkjN2cFo=5KG=OSXbvvn9G0ZV5jptoMVWmEw@mail.gmail.com>
 <CAKKm1vFzWeo4radDC-5ne=e7aSOVeNJfr1OmBe-nO=rOUGxUiQ@mail.gmail.com>
Message-ID: <CACGKw0bnhATous6FD=a075NjXff7_jEwW-3GGQzmHL5+stDHEA@mail.gmail.com>

Thanks Thomas
I have put that into the notes for us to prepare if it is submitted into a
grant.

Let us know if there are any more aspects to add,

Cheers
Em

On Tue, 20 Aug 2024 at 08:35, Thomas Larsen Wessel via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> I forgot an important detail, that explains why it gets intolerable for
> me. The qgis project I maintain has several layers that are close to
> identical, but covering different municipalities. So when I change a form,
> I need to make that change to several layers (each having several styles).
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Emma Hain ? Product Manager/Senior GIS Analyst
emma at north-road.com
[image: https://north-road.com]
*North Road*
Cartography ? Development ? Spatial Analysis
------------------------------
*north-road.com* <http://north-road.com>
<https://twitter.com/northroadgeo>
<https://www.linkedin.com/company/north-road-studios>
<https://www.facebook.com/North-Road-997236690392419/home>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240820/f1693c39/attachment.htm>

From schut at satelligence.com  Tue Aug 20 02:34:50 2024
From: schut at satelligence.com (Vincent Schut)
Date: Tue, 20 Aug 2024 11:34:50 +0200
Subject: [QGIS-Developer] qt6-compatible plugins status
Message-ID: <3d1f3e4b-3acd-4cb4-9cd5-f1e0ab545f35@satelligence.com>

Hi, I successfully built and toyed with a qt6 qgis, and I loved it (I'm 
on fedora). I would love to use it for my day-to-day work, however, I 
really depend on a few plugins for that, and almost no plugin appeared 
to be compatible with qt6.
Now I assume that was to be expected, and I don't want to rush any 
plugin developers, but what I'd love is if there is a way to check qt6 
compatibility for all plugins. Is there an overview page or another way 
to check which plugins are already compatible with a qt6 build? So that 
I know when again it makes sense to do another qt6 build and try to use 
that instead of the qt5 build?

Thanks!
-- 

	

Vincent Schut

Remote Sensing Software Engineer

+31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands

Linkedin <https://www.linkedin.com/company/satelligence/>~ 
satelligence.com <http://www.satelligence.com><http://www.satelligence.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240820/e16c0e3c/attachment.htm>

From jostev at bgs.ac.uk  Tue Aug 20 04:22:09 2024
From: jostev at bgs.ac.uk (John Stevenson - BGS)
Date: Tue, 20 Aug 2024 11:22:09 +0000
Subject: [QGIS-Developer] QGIS project maintainability, forms and styles,
 xml verbosity
In-Reply-To: <CACGKw0bnhATous6FD=a075NjXff7_jEwW-3GGQzmHL5+stDHEA@mail.gmail.com>
References: <42a7b143-3474-4aca-85f7-fc2ab62d052f@gmail.com>
 <CAB28AshrvoObX+wT+_q2J9KvizpH3FsZLwcMaPgwJwDo96YfvQ@mail.gmail.com>
 <CAKKm1vFUV1HogQHkjN2cFo=5KG=OSXbvvn9G0ZV5jptoMVWmEw@mail.gmail.com>
 <CAKKm1vFzWeo4radDC-5ne=e7aSOVeNJfr1OmBe-nO=rOUGxUiQ@mail.gmail.com>
 <CACGKw0bnhATous6FD=a075NjXff7_jEwW-3GGQzmHL5+stDHEA@mail.gmail.com>
Message-ID: <LO0P123MB54224C863DFA9FF0ACD220F0818D2@LO0P123MB5422.GBRP123.PROD.OUTLOOK.COM>

We have a QGIS plugin that we use locally that stores layer styles as .qml files.  We also had the issues with the order of the fields and sections in the XML changing.  This meant that a diff between two files was useless.

The code below uses `canonicalize` to fix the ordering issue, and now we can see the actual changes between files in our GitLab repo.

```python
from pathlib import Path
from xml.etree.ElementTree import canonicalize

# Save the style of the current layer
layer_style_path = Path(?my_layer_style.qml?)
layer = QgsProject.instance().mapLayersByName(table_name)[0]
layer.saveNamedStyle(
    str(layer_style_path),
    categories=QgsMapLayer.Symbology | QgsMapLayer.Labeling | QgsMapLayer.Fields | QgsMapLayer.Forms | QgsMapLayer.MapTips
    )

# Read the newly created XML file
raw_xml = layer_style_path.read_text()
# Canonicalize the XML data and save back to the same file
# Set the newline manually to force LF line endings
with open(layer_style_path, "w", newline="\n") as qml_file:
    canonicalize(xml_data=raw_xml, out=qml_file)

```

Cheers
John

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of Emma Hain via QGIS-Developer
Sent: Tuesday, August 20, 2024 2:48 AM
To: Thomas Larsen Wessel <mrvelle at gmail.com>
Cc: qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] QGIS project maintainability, forms and styles, xml verbosity

Thanks Thomas
I have put that into the notes for us to prepare if it is submitted into a grant.

Let us know if there are any more aspects to add,

Cheers
Em

On Tue, 20 Aug 2024 at 08:35, Thomas Larsen Wessel via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> wrote:
I forgot an important detail, that explains why it gets intolerable for me. The qgis project I maintain has several layers that are close to identical, but covering different municipalities. So when I change a form, I need to make that change to several layers (each having several styles).
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


--
Emma Hain ? Product Manager/Senior GIS Analyst
emma at north-road.com<mailto:emma at north-road.com>
[https://ci3.googleusercontent.com/mail-sig/AIorK4z-QyPD9kQRyEtpg0YHp_bVoq466HfPMkJXDWxnwTf1qCIBS8c19W29po6b7akLq2btEedEMKg]
North Road
Cartography ? Development ? Spatial Analysis
________________________________
north-road.com<http://north-road.com>
[https://ci3.googleusercontent.com/mail-sig/AIorK4xbsQ72BNIM2cWMZcuEKVer1Bwaq_gqYkdbtrjK2ifrqv-4o7aWjcvilgYXtNGpXLNgD00xgmQ]<https://twitter.com/northroadgeo>[https://ci3.googleusercontent.com/mail-sig/AIorK4zEBWGJKio8gqmFT0h_51t4ZnmoGgbmV7SeL-4FKvwWApFWDWyK7p-c0-cSskUe7pjQzjEZj9Q]<https://www.linkedin.com/company/north-road-studios>[https://ci3.googleusercontent.com/mail-sig/AIorK4wlMciFPm8hqQZB_Qi57PUCv1dJqUC1A2i9qEMzWRFLcJ7Jil30YnULdJLxT6-qMfI6J4kcac4]<https://www.facebook.com/North-Road-997236690392419/home>



This email and any attachments are intended solely for the use of the named recipients. If you are not the intended recipient you must not use, disclose, copy or distribute this email or any of its attachments and should notify the sender immediately and delete this email from your system. UK Research and Innovation (UKRI) has taken every reasonable precaution to minimise risk of this email or any attachments containing viruses or malware but the recipient should carry out its own virus and malware checks before opening the attachments. UKRI does not accept any liability for any losses or damages which the recipient may sustain due to presence of any viruses.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240820/044415c1/attachment-0001.htm>

From gdt at lexort.com  Tue Aug 20 04:28:20 2024
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 20 Aug 2024 07:28:20 -0400
Subject: [QGIS-Developer] QGIS project maintainability, forms and styles,
 xml verbosity
In-Reply-To: <LO0P123MB54224C863DFA9FF0ACD220F0818D2@LO0P123MB5422.GBRP123.PROD.OUTLOOK.COM>
 (John Stevenson's message of "Tue, 20 Aug 2024 11:22:09 +0000")
References: <42a7b143-3474-4aca-85f7-fc2ab62d052f@gmail.com>
 <CAB28AshrvoObX+wT+_q2J9KvizpH3FsZLwcMaPgwJwDo96YfvQ@mail.gmail.com>
 <CAKKm1vFUV1HogQHkjN2cFo=5KG=OSXbvvn9G0ZV5jptoMVWmEw@mail.gmail.com>
 <CAKKm1vFzWeo4radDC-5ne=e7aSOVeNJfr1OmBe-nO=rOUGxUiQ@mail.gmail.com>
 <CACGKw0bnhATous6FD=a075NjXff7_jEwW-3GGQzmHL5+stDHEA@mail.gmail.com>
 <LO0P123MB54224C863DFA9FF0ACD220F0818D2@LO0P123MB5422.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <rmia5h7o2ln.fsf@s1.lexort.com>

John Stevenson - BGS via QGIS-Developer <qgis-developer at lists.osgeo.org>
writes:

> The code below uses `canonicalize` to fix the ordering issue, and now
> we can see the actual changes between files in our GitLab repo.

I have run into similar issues with another project that outputs to
json.

I think it's a bug for the same semantic value to have a varying text
representation, and (not relevant here I think) that it's a bug for the
output not to have nice whitespace formatting.  It should be diffable
and nerd readable (even if not "human readable").

I would therefore be in favor of qgis itself sorting things into some
canonical order.


From julien.cabieces at oslandia.com  Tue Aug 20 05:46:57 2024
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Tue, 20 Aug 2024 14:46:57 +0200
Subject: [QGIS-Developer] qt6-compatible plugins status
In-Reply-To: <3d1f3e4b-3acd-4cb4-9cd5-f1e0ab545f35@satelligence.com> (Vincent
 Schut via's message of "Tue, 20 Aug 2024 11:34:50 +0200")
References: <3d1f3e4b-3acd-4cb4-9cd5-f1e0ab545f35@satelligence.com>
Message-ID: <87h6bfcqf2.fsf@julienlaptop.home>


Hi,

There is a plugin metadata which have been added [0] so the Qt 6 QGIS
version would not allow you to load non Qt6 compatible plugin.

Except if you set the variable QGIS_DISABLE_SUPPORTS_QT6_CHECK [1]

And to be complete about that matter, there is a script [2] that help
to migrate a plugin from pyqt5 to pyqt6

Regards,
Julien


[0] https://github.com/qgis/QGIS/pull/55912
[1] https://github.com/qgis/QGIS/pull/56579
[2] https://github.com/qgis/QGIS/blob/bcdf85abb767bdaa967c3eaff433eb43e0a50988/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py


> Hi, I successfully built and toyed with a qt6 qgis, and I loved it (I'm on fedora). I would love to use it for my day-to-day work, however, I really
> depend on a few plugins for that, and almost no plugin appeared to be compatible with qt6.
> Now I assume that was to be expected, and I don't want to rush any plugin developers, but what I'd love is if there is a way to check qt6
> compatibility for all plugins. Is there an overview page or another way to check which plugins are already compatible with a qt6 build? So that I
> know when again it makes sense to do another qt6 build and try to use that instead of the qt5 build?
>
> Thanks!

-- 

Julien Cabieces
Senior Developer at Oslandia
julien.cabieces at oslandia.com

From emma at north-road.com  Tue Aug 20 18:00:02 2024
From: emma at north-road.com (Emma Hain)
Date: Wed, 21 Aug 2024 11:00:02 +1000
Subject: [QGIS-Developer] QGIS project maintainability, forms and styles,
 xml verbosity
In-Reply-To: <rmia5h7o2ln.fsf@s1.lexort.com>
References: <42a7b143-3474-4aca-85f7-fc2ab62d052f@gmail.com>
 <CAB28AshrvoObX+wT+_q2J9KvizpH3FsZLwcMaPgwJwDo96YfvQ@mail.gmail.com>
 <CAKKm1vFUV1HogQHkjN2cFo=5KG=OSXbvvn9G0ZV5jptoMVWmEw@mail.gmail.com>
 <CAKKm1vFzWeo4radDC-5ne=e7aSOVeNJfr1OmBe-nO=rOUGxUiQ@mail.gmail.com>
 <CACGKw0bnhATous6FD=a075NjXff7_jEwW-3GGQzmHL5+stDHEA@mail.gmail.com>
 <LO0P123MB54224C863DFA9FF0ACD220F0818D2@LO0P123MB5422.GBRP123.PROD.OUTLOOK.COM>
 <rmia5h7o2ln.fsf@s1.lexort.com>
Message-ID: <CACGKw0ba+MfyA11FC9JgGt8byMp5nsMT7F0-bN+rHD_mrY3=3g@mail.gmail.com>

Thanks John, Thomas and Greg
Sorry for the mix-up in thanks John lol
I have noted this in our files

On Tue, 20 Aug 2024 at 21:28, Greg Troxel <gdt at lexort.com> wrote:

> John Stevenson - BGS via QGIS-Developer <qgis-developer at lists.osgeo.org>
> writes:
>
> > The code below uses `canonicalize` to fix the ordering issue, and now
> > we can see the actual changes between files in our GitLab repo.
>
> I have run into similar issues with another project that outputs to
> json.
>
> I think it's a bug for the same semantic value to have a varying text
> representation, and (not relevant here I think) that it's a bug for the
> output not to have nice whitespace formatting.  It should be diffable
> and nerd readable (even if not "human readable").
>
> I would therefore be in favor of qgis itself sorting things into some
> canonical order.
>
>

-- 
Emma Hain ? Product Manager/Senior GIS Analyst
emma at north-road.com
[image: https://north-road.com]
*North Road*
Cartography ? Development ? Spatial Analysis
------------------------------
*north-road.com* <http://north-road.com>
<https://twitter.com/northroadgeo>
<https://www.linkedin.com/company/north-road-studios>
<https://www.facebook.com/North-Road-997236690392419/home>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240821/e7559eea/attachment.htm>

From mrvelle at gmail.com  Wed Aug 21 00:44:24 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Wed, 21 Aug 2024 09:44:24 +0200
Subject: [QGIS-Developer] No rule to make target
 'src/core/qgis_core_autogen/mocs_compilation.cpp'
Message-ID: <CAKKm1vEgsMFXVhLv9NWTx1VQ5JKk0ma-hzJ75X3_QhwC_FbOFg@mail.gmail.com>

Even when doing a dry run (the -n flag):

cd ~/b/QGIS
git switch release-3_36
git pull
git status -s # yep, its up to date
mkdir build-dry-3_36
cd build-dry-3_36
cmake .. > log_cmake.txt 2>&1
make -n > log_make.txt 2>&1

make fails with the following error:

(...)
cd /home/velle/b/QGIS/build-dry-3_36 && /usr/bin/cmake -E cmake_depends
"Unix Makefiles" /home/velle/b/QGIS /home/velle/b/QGIS/src/core
/home/velle/b/QGIS/build-dry-3_36
/home/velle/b/QGIS/build-dry-3_36/src/core
/home/velle/b/QGIS/build-dry-3_36/src/core/CMakeFiles/qgis_core.dir/DependInfo.cmake
--color=
make -s -f src/core/CMakeFiles/qgis_core.dir/build.make
src/core/CMakeFiles/qgis_core.dir/build
make[2]: *** No rule to make target
'src/core/qgis_core_autogen/mocs_compilation.cpp', needed by
'src/core/CMakeFiles/qgis_core.dir/qgis_core_autogen/mocs_compilation.cpp.o'.
Stop.
make[1]: *** [CMakeFiles/Makefile2:4401:
src/core/CMakeFiles/qgis_core.dir/all] Error 2
make: *** [Makefile:166: all] Error 2

This happens with both release-3_34, release-3_36 and master.
Using: Ubuntu 22.04, cmake 3.22.1, make 4.3.

I first set it up to run a non-dry, which also failed (after a few hours),
but unfortunately I discarded the error message. But I expect that if this
error arises in a dry run it will also arise in a non-dry run.

The odd thing is that I have compiled 3_36 before, and it feels like its no
more than a month ago, without any issues. I don't understand what changed,
if anything. But maybe I just forgot some detail this time?

log files here:
https://gist.github.com/velle/a9300a3e6d1a22f87ebbf913029efb6e

Any advice on what to do? Sincerely, Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240821/20328a33/attachment.htm>

From schut at satelligence.com  Wed Aug 21 01:01:17 2024
From: schut at satelligence.com (Vincent Schut)
Date: Wed, 21 Aug 2024 10:01:17 +0200
Subject: [QGIS-Developer] qt6-compatible plugins status
In-Reply-To: <87h6bfcqf2.fsf@julienlaptop.home>
References: <3d1f3e4b-3acd-4cb4-9cd5-f1e0ab545f35@satelligence.com>
 <87h6bfcqf2.fsf@julienlaptop.home>
Message-ID: <9810e6cb-d1b8-4110-abc8-f0057338ce36@satelligence.com>

On 20/08/2024 14:46, Julien Cabieces wrote:
> Hi,
>
> There is a plugin metadata which have been added [0] so the Qt 6 QGIS
> version would not allow you to load non Qt6 compatible plugin.
>
> Except if you set the variable QGIS_DISABLE_SUPPORTS_QT6_CHECK [1]
>
> And to be complete about that matter, there is a script [2] that help
> to migrate a plugin from pyqt5 to pyqt6
>
> Regards,
> Julien
>
>
> [0]https://github.com/qgis/QGIS/pull/55912
> [1]https://github.com/qgis/QGIS/pull/56579
> [2]https://github.com/qgis/QGIS/blob/bcdf85abb767bdaa967c3eaff433eb43e0a50988/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py
Thanks Julien, I'll try the QGIS_DISABLE_SUPPORTS_QT6_CHECK variable to 
see if the plugins that I depend on actually work.
>
>
>> Hi, I successfully built and toyed with a qt6 qgis, and I loved it (I'm on fedora). I would love to use it for my day-to-day work, however, I really
>> depend on a few plugins for that, and almost no plugin appeared to be compatible with qt6.
>> Now I assume that was to be expected, and I don't want to rush any plugin developers, but what I'd love is if there is a way to check qt6
>> compatibility for all plugins. Is there an overview page or another way to check which plugins are already compatible with a qt6 build? So that I
>> know when again it makes sense to do another qt6 build and try to use that instead of the qt5 build?
>>
>> Thanks!

-- 

	

Vincent Schut

Remote Sensing Software Engineer

+31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands

Linkedin <https://www.linkedin.com/company/satelligence/>~ 
satelligence.com <http://www.satelligence.com><http://www.satelligence.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240821/2ba0c3aa/attachment.htm>

From mrvelle at gmail.com  Wed Aug 21 06:43:30 2024
From: mrvelle at gmail.com (Thomas Larsen Wessel)
Date: Wed, 21 Aug 2024 15:43:30 +0200
Subject: [QGIS-Developer] No rule to make target
 'src/core/qgis_core_autogen/mocs_compilation.cpp'
In-Reply-To: <CAKKm1vEgsMFXVhLv9NWTx1VQ5JKk0ma-hzJ75X3_QhwC_FbOFg@mail.gmail.com>
References: <CAKKm1vEgsMFXVhLv9NWTx1VQ5JKk0ma-hzJ75X3_QhwC_FbOFg@mail.gmail.com>
Message-ID: <CAKKm1vF5NenZKG4VJjhsw_2V9fXUbDVjbLMqH9GPmP-NOJZd5w@mail.gmail.com>

I have solved my problem. Doing a clean dry run of make on QGIS will fail,
even when the non-dry run would succeed. If first running a successful
"make", and dry running "make -n", the dry run will succeed.

Is that "normal"? I would consider it a kind of bug in the QGIS build code,
but my understanding/experience is limited.

I suspect that adding a '+' character to all the $(CMAKE_COMMAND) lines,
and maybe to more lines as well, would fix this problem.


On Wed, Aug 21, 2024 at 9:44?AM Thomas Larsen Wessel <mrvelle at gmail.com>
wrote:

> Even when doing a dry run (the -n flag):
>
> cd ~/b/QGIS
> git switch release-3_36
> git pull
> git status -s # yep, its up to date
> mkdir build-dry-3_36
> cd build-dry-3_36
> cmake .. > log_cmake.txt 2>&1
> make -n > log_make.txt 2>&1
>
> make fails with the following error:
>
> (...)
> cd /home/velle/b/QGIS/build-dry-3_36 && /usr/bin/cmake -E cmake_depends
> "Unix Makefiles" /home/velle/b/QGIS /home/velle/b/QGIS/src/core
> /home/velle/b/QGIS/build-dry-3_36
> /home/velle/b/QGIS/build-dry-3_36/src/core
> /home/velle/b/QGIS/build-dry-3_36/src/core/CMakeFiles/qgis_core.dir/DependInfo.cmake
> --color=
> make -s -f src/core/CMakeFiles/qgis_core.dir/build.make
> src/core/CMakeFiles/qgis_core.dir/build
> make[2]: *** No rule to make target
> 'src/core/qgis_core_autogen/mocs_compilation.cpp', needed by
> 'src/core/CMakeFiles/qgis_core.dir/qgis_core_autogen/mocs_compilation.cpp.o'.
> Stop.
> make[1]: *** [CMakeFiles/Makefile2:4401:
> src/core/CMakeFiles/qgis_core.dir/all] Error 2
> make: *** [Makefile:166: all] Error 2
>
> This happens with both release-3_34, release-3_36 and master.
> Using: Ubuntu 22.04, cmake 3.22.1, make 4.3.
>
> I first set it up to run a non-dry, which also failed (after a few hours),
> but unfortunately I discarded the error message. But I expect that if this
> error arises in a dry run it will also arise in a non-dry run.
>
> The odd thing is that I have compiled 3_36 before, and it feels like
> its no more than a month ago, without any issues. I don't understand what
> changed, if anything. But maybe I just forgot some detail this time?
>
> log files here:
> https://gist.github.com/velle/a9300a3e6d1a22f87ebbf913029efb6e
>
> Any advice on what to do? Sincerely, Thomas
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240821/5bf2c04d/attachment-0001.htm>

From wonder.sk at gmail.com  Thu Aug 22 03:31:57 2024
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 22 Aug 2024 12:31:57 +0200
Subject: [QGIS-Developer] QGIS contributor meeting in Bratislava
Message-ID: <CAC2XbFfbPxfnPqJ=EN-mxyvChgszTBj+Lv80jcAJXdC8F4T--A@mail.gmail.com>

Hi everyone!

If you are planning to attend the QGIS contributor meeting in Bratislava
(11-13 September), please make sure you have added your name in the wiki:
https://github.com/qgis/QGIS/wiki/27th%E2%80%90Contributor%E2%80%90Meeting%E2%80%90in%E2%80%90Bratislava

This will help us a lot to plan for the capacity of the space... and those
who sign up late risk that they won't get a fancy T-shirt ;-)

We are looking forward to see many of you in Bratislava!

Regards
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240822/d94b84ae/attachment.htm>

From etienne.trimaille at gmail.com  Thu Aug 22 05:29:54 2024
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Thu, 22 Aug 2024 14:29:54 +0200
Subject: [QGIS-Developer] qt6-compatible plugins status
In-Reply-To: <9810e6cb-d1b8-4110-abc8-f0057338ce36@satelligence.com>
References: <3d1f3e4b-3acd-4cb4-9cd5-f1e0ab545f35@satelligence.com>
 <87h6bfcqf2.fsf@julienlaptop.home>
 <9810e6cb-d1b8-4110-abc8-f0057338ce36@satelligence.com>
Message-ID: <CAMtDFL+bW3N+X39gfXxj4D3kkU8LrLVQXiYpuoqPNNomn4tbTQ@mail.gmail.com>

Hi,

Using the metadata flag on github.com will give you a "quick" overview of
plugins : https://github.com/search?q=supportsQt6&type=code
But this excludes plugins which are hosted on another website.

Side note, is there a readme to know how to compile with Qt6 ? I saw the
flag when compiling, but about required packages for instance ? (Ubuntu
24.04)

Le mer. 21 ao?t 2024 ? 10:01, Vincent Schut via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> On 20/08/2024 14:46, Julien Cabieces wrote:
>
> Hi,
>
> There is a plugin metadata which have been added [0] so the Qt 6 QGIS
> version would not allow you to load non Qt6 compatible plugin.
>
> Except if you set the variable QGIS_DISABLE_SUPPORTS_QT6_CHECK [1]
>
> And to be complete about that matter, there is a script [2] that help
> to migrate a plugin from pyqt5 to pyqt6
>
> Regards,
> Julien
>
>
> [0] https://github.com/qgis/QGIS/pull/55912
> [1] https://github.com/qgis/QGIS/pull/56579
> [2] https://github.com/qgis/QGIS/blob/bcdf85abb767bdaa967c3eaff433eb43e0a50988/scripts/pyqt5_to_pyqt6/pyqt5_to_pyqt6.py
>
> Thanks Julien, I'll try the QGIS_DISABLE_SUPPORTS_QT6_CHECK variable to
> see if the plugins that I depend on actually work.
>
> Hi, I successfully built and toyed with a qt6 qgis, and I loved it (I'm on fedora). I would love to use it for my day-to-day work, however, I really
> depend on a few plugins for that, and almost no plugin appeared to be compatible with qt6.
> Now I assume that was to be expected, and I don't want to rush any plugin developers, but what I'd love is if there is a way to check qt6
> compatibility for all plugins. Is there an overview page or another way to check which plugins are already compatible with a qt6 build? So that I
> know when again it makes sense to do another qt6 build and try to use that instead of the qt5 build?
>
> Thanks!
>
>
> --
>
> Vincent Schut
>
> Remote Sensing Software Engineer
>
> +31 302272679 ~ Maliebaan 22 | 3581CP | Utrecht | Netherlands
> Linkedin <https://www.linkedin.com/company/satelligence/> ~
> satelligence.com <http://www.satelligence.com>
> <http://www.satelligence.com>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240822/1f3606d8/attachment.htm>

From lova at kartoza.com  Fri Aug 23 05:49:14 2024
From: lova at kartoza.com (Lova Andriarimalala)
Date: Fri, 23 Aug 2024 15:49:14 +0300
Subject: [QGIS-Developer] QGIS Full Stack Web Developer Report
In-Reply-To: <CAMLC-sBTZPfFrd5UPpeNSKGCdwpa2C8ot6Hyrv7iu06uHyheFQ@mail.gmail.com>
References: <AM6PR08MB39916950D01F09B24F1EFF52FBB42@AM6PR08MB3991.eurprd08.prod.outlook.com>
 <CAMLC-sDvceW7XVvT9XhO37kNG0dCLWW2S_1L6Q8E1=hZ1za7xw@mail.gmail.com>
 <CAMLC-sBTZPfFrd5UPpeNSKGCdwpa2C8ot6Hyrv7iu06uHyheFQ@mail.gmail.com>
Message-ID: <CAMLC-sBnvf52q8rAi_uFP4xaemD74dx0W8kV2kdp1q52DH5uGA@mail.gmail.com>

Hello everyone,

Please find below the report for this week's maintenance and development of
the QGIS and related websites:

*Overview:*

I mainly focused on splitting the website of the plugin into 3 parts which
are: plugins, planet and the resource hub.


*Ongoing task:*

I have set new repos on my GH account for the plugin website, planet
website and resource hub. :


   - Plugins: https://github.com/Xpirix/QGIS-Plugins-Website
   - Resources hub: https://github.com/Xpirix/QGIS-Hub-Website
   - Planet: https://github.com/Xpirix/QGIS-Planet-Website

For the Planet website, I tried to match the branding with the QGIS.org
website using Bulma, React and Django Rest Framework. Please feel free to
check the progress at: https://github.com/Xpirix/QGIS-Planet-Website/pull/4

*Deployed PRs on the QGIS Website:*

   - Replace QGIS 3.38 docs links with QGIS testing
   <https://github.com/qgis/QGIS-Website/pull/395>
   - Add issues report links for plugins, feed, changelog
   <https://github.com/qgis/QGIS-Website/pull/412>
   - Fix language name <https://github.com/qgis/QGIS-Website/pull/398>
   - Remove inexistent roadmap page
   <https://github.com/qgis/QGIS-Website/pull/397>
   - Use latest for docs links in get involved and thank you pages
   <https://github.com/qgis/QGIS-Website/pull/404>
   - Some fixes for the GH issue template
   <https://github.com/qgis/QGIS-Website/pull/405>


Have a nice weekend,

Best regards,


Lova Andriarimalala


*QGIS Full Stack Developer   *
*T *: +27(0) 87 809 2702          *E *: lova at kartoza.com          *W* :
kartoza.com



*This email and any attachments are confidential and intended solely for
the use of the individual or entity to whom they are addressed. If you *
*have received this email in error, please notify the sender immediately
and delete it from your system. Unauthorised use, disclosure, or copying*
*of the contents is prohibited.*


On Fri, 9 Aug 2024 at 16:46, Lova Andriarimalala <lova at kartoza.com> wrote:

> Hello everyone,
>
> Please find below this week's report for the maintenance and development
> of the QGIS and related websites:
>
> *Overview:*
>
> I mainly focused on deploying the latest changes on the QGIS website, the
> QGIS Feed Website and the QGIS Plugins Website. I also worked on some
> issues for them.
>
>
> *Deployed PRs on the QGIS Website:*
>
>
>
>
>
>
>
>
>
> * - Optimise sponsors logo <https://github.com/qgis/QGIS-Website/pull/388>
> - Add qgis 1st conference image to the thank-you page
> <https://github.com/qgis/QGIS-Website/pull/389> - Limit roadmap schedule
> table width to 100% <https://github.com/qgis/QGIS-Website/pull/396> - Add a
> select menu to choose a language for documentation
> <https://github.com/qgis/QGIS-Website/pull/391> - Optimise sponsors logo
> <https://github.com/qgis/QGIS-Website/pull/388> - Fixes for the playwright
> test and the commit hash link
> <https://github.com/qgis/QGIS-Website/pull/390> *
> *Deployed PRs on the QGIS Plugin Website:*
>
>    - <https://github.com/qgis/QGIS-Django/pull/452>Feedback clarification
>    <https://github.com/qgis/QGIS-Django/pull/452>
>
> *Deployed PRs on the QGIS Feed Website:*
>
>    - Allow xx_XX lang in the parameter
>    <https://github.com/qgis/qgis-feed/pull/93>
>    - Update the design to match the new website
>    <https://github.com/qgis/qgis-feed/pull/72>
>
> *New PRs on the QGIS Website:*
>
>
>    - Fix language name <https://github.com/qgis/QGIS-Website/pull/398>
>    - Remove the inexistent roadmap page
>    <https://github.com/qgis/QGIS-Website/pull/397>
>    - Replace QGIS 3.38 docs links with QGIS testing
>    <https://github.com/qgis/QGIS-Website/pull/395>
>
> *Ongoing task:*
>
>    - Split the website of the plugin to plugins, planet and hub
>    <https://github.com/qgis/QGIS-Django/issues/454>
>
> *Question/feedback needed:*
> About the licensing for a plugin when uploading it to plugins.qgis.org, I
> was wondering if we could allow the COPYING as a valid license file apart
> from the LICENSE file. This is related to an ongoing discussion at
> https://github.com/qgis/QGIS-Django/issues/453.
>
> Lova Andriarimalala
>
>
> *QGIS Full Stack Developer   *
> *T *: +27(0) 87 809 2702          *E *: lova at kartoza.com          *W* :
> kartoza.com
>
>
>
> *This email and any attachments are confidential and intended solely for
> the use of the individual or entity to whom they are addressed. If you *
> *have received this email in error, please notify the sender immediately
> and delete it from your system. Unauthorised use, disclosure, or copying*
> *of the contents is prohibited.*
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240823/f36b033a/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Sat Aug 24 19:51:07 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Sun, 25 Aug 2024 02:51:07 +0000
Subject: [QGIS-Developer] QGIS Unexpectedly Crashing
Message-ID: <a0455a05612b4880a7dc4d2be962f43e@erdc.dren.mil>

What causes an access violation intermittently?  Once it happens sometimes it continues to happen, and I have to delete the QGIS directory in AppData\Roaming\ which is annoying because I have my plugin there and I need to copy it to another directory and then copy it back after running QGIS for first time to have the directory recreated.

It seems to be happening with pyqtgraph\Qt.py which is not my code.

Python Stack Trace
Windows fatal exception: access violation

Current thread 0x00003b98 (most recent call first):
  File "C:\PROGRA~1\QGIS33~1.4\apps\Python39\lib\site-packages\pyqtgraph\Qt.py", line 285 in setResizeMode
    self.setSectionResizeMode(*args)
  File "C:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\design_palette_ui.py", line 470 in create_project_view_layout_ui
    self.DESIGN_PALETTE_DIALOG.projectViewQTreeView.header().setResizeMode(5, QHeaderView.ResizeToContents)
  File "C:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\design_palette_ui.py", line 117 in init_ui_parameters
    self.create_project_view_layout_ui()
  File "C:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\design_palette_ui.py", line 90 in load
    self.init_ui_parameters()
  File "C:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\app\gui.py", line 198 in run_mp
    master_planning_dialog.load()


Stack Trace

QHeaderView::count :
QHeaderView::setSectionResizeMode :
PyInit_QtWidgets :
PyObject_Str :
PyObject_Call :
PyObject_Call :
PyEval_EvalFrameDefault :
PyFunction_Vectorcall :
PyObject_GC_Del :
PyEval_EvalFrameDefault :
PyEval_EvalFrameDefault :
PyFunction_Vectorcall :
PyEval_EvalFrameDefault :
PyEval_EvalFrameDefault :
PyFunction_Vectorcall :
PyObject_GC_Del :
PyVectorcall_Call :
PyObject_Call :
PyInit_QtCore :
PyInit_QtCore :
PyInit_QtCore :
PyInit_QtCore :
QObject::qt_static_metacall :
QAction::activate :
QAbstractButton::click :
QAbstractButton::mouseReleaseEvent :
QToolButton::mouseReleaseEvent :
QWidget::event :
QApplicationPrivate::notify_helper :
QApplication::notify :
QgsApplication::notify :
QCoreApplication::notifyInternal2 :
QApplicationPrivate::sendMouseEvent :
QSizePolicy::QSizePolicy :
QSizePolicy::QSizePolicy :
QApplicationPrivate::notify_helper :
QApplication::notify :
QgsApplication::notify :
QCoreApplication::notifyInternal2 :
QGuiApplicationPrivate::processMouseEvent :
QWindowSystemInterface::sendWindowSystemEvents :
QEventDispatcherWin32::processEvents :
qt_plugin_query_metadata :
QEventLoop::exec :
QCoreApplication::exec :
main :
BaseThreadInitThunk :
RtlUserThreadStart :



QGIS Info
QGIS Version: 3.34.4-Prizren
QGIS code revision: decd43dc
Compiled against Qt: 5.15.3
Running against Qt: 5.15.3
Compiled against GDAL: 3.8.4
Running against GDAL: 3.8.4



System Info
CPU Type: x86_64
Kernel Type: winnt
Kernel Version: 10.0.19045
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240825/3d04466f/attachment.htm>

From gdt at lexort.com  Sun Aug 25 06:32:23 2024
From: gdt at lexort.com (Greg Troxel)
Date: Sun, 25 Aug 2024 09:32:23 -0400
Subject: [QGIS-Developer] QGIS Unexpectedly Crashing
In-Reply-To: <a0455a05612b4880a7dc4d2be962f43e@erdc.dren.mil> (Luke
 A. Catania's message of "Sun, 25 Aug 2024 02:51:07 +0000")
References: <a0455a05612b4880a7dc4d2be962f43e@erdc.dren.mil>
Message-ID: <rmi5xro6848.fsf@s1.lexort.com>

"Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer"
<qgis-developer at lists.osgeo.org> writes:

> What causes an access violation intermittently?  Once it happens
> sometimes it continues to happen, and I have to delete the QGIS
> directory in AppData\Roaming\ which is annoying because I have my
> plugin there and I need to copy it to another directory and then copy
> it back after running QGIS for first time to have the directory
> recreated.
>
> It seems to be happening with pyqtgraph\Qt.py which is not my code.

What do you mean "have to delete"?  Are you saying that after you see
this error once, then even if you exit qgis, shutdown the OS and power
down the computer and then restart, you will immediately get it again?

I suspect one of several things:

  - your computer has a hardware problem.  I'd suggest running memory
    diagnostics.

  - there's a bug someplace in the C code that python calls.  this seems
    unlikely as you are the first to report that I know of, but OTOH
    every reported bug has a first reporter

  - you are running out of RAM and some malloc call is failing and
    returning NULL and this is not caught

  - as always, something else

From nyall.dawson at gmail.com  Sun Aug 25 15:30:41 2024
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 26 Aug 2024 08:30:41 +1000
Subject: [QGIS-Developer] QGIS Unexpectedly Crashing
In-Reply-To: <a0455a05612b4880a7dc4d2be962f43e@erdc.dren.mil>
References: <a0455a05612b4880a7dc4d2be962f43e@erdc.dren.mil>
Message-ID: <CAB28Asi8TO-rJydUChXTsX=B+18xFUFfbuGKdJR+BkgozS9seg@mail.gmail.com>

On Sun, 25 Aug 2024 at 12:51, Catania, Luke A ERDC-RDE-GRL-VA CIV via
QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
>
> What causes an access violation intermittently?  Once it happens sometimes it continues to happen, and I have to delete the QGIS directory in AppData\Roaming\ which is annoying because I have my plugin there and I need to copy it to another directory and then copy it back after running QGIS for first time to have the directory recreated.
>
>
>
> It seems to be happening with pyqtgraph\Qt.py which is not my code.

My guess: You've installed pyqtgraph via pip or some binary wheel, and
it's using a different Qt library vs what QGIS is bundled with.

Nyall

From sander.schaminee at geocat.net  Mon Aug 26 07:23:53 2024
From: sander.schaminee at geocat.net (Sander Schaminee)
Date: Mon, 26 Aug 2024 16:23:53 +0200
Subject: [QGIS-Developer] Overview of QGIS 3 and (Py)Qt versions
Message-ID: <1918f1267fc.ddd7a0d1220361.3211356421400621202@geocat.net>

Hi everyone,

I am looking for an overview of all (stable) 3.x QGIS versions and their (Py)Qt versions. Does that exist?

Thanks,

Sander
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240826/e3f62376/attachment.htm>

From gdt at lexort.com  Mon Aug 26 07:45:26 2024
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 26 Aug 2024 10:45:26 -0400
Subject: [QGIS-Developer] Overview of QGIS 3 and (Py)Qt versions
In-Reply-To: <1918f1267fc.ddd7a0d1220361.3211356421400621202@geocat.net>
 (Sander Schaminee via's message of "Mon, 26 Aug 2024 16:23:53 +0200")
References: <1918f1267fc.ddd7a0d1220361.3211356421400621202@geocat.net>
Message-ID: <rmiwmk3z6k9.fsf@s1.lexort.com>

Sander Schaminee via QGIS-Developer <qgis-developer at lists.osgeo.org>
writes:

> I am looking for an overview of all (stable) 3.x QGIS versions and
> their (Py)Qt versions. Does that exist?

I suspect your question is making assumptions that you aren't listing.

First, I would say there are only two stable versions usually: the most
recent release and the most recent LTR.  That would be 3.34.10 and
3.38.2.  (The website is really awkward in terms of finding sources with
version numbers, vs getting something labeled -latest.)

With qgis built from pkgsrc, I have

  qgis-3.34.10
  py312-qt5-5.15.11

but if I were to update pkgsrc to 3.38.2, I'd have the same py-qt
version.

I suspect you are asking about packaging distributions of not just qgis
but qgis+dependencies.  Ther are N of those and probably N answers.

From Luke.A.Catania at erdc.dren.mil  Mon Aug 26 09:40:32 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Mon, 26 Aug 2024 16:40:32 +0000
Subject: [QGIS-Developer] QGIS Unexpectedly Crashing
In-Reply-To: <rmi5xro6848.fsf@s1.lexort.com>
References: <a0455a05612b4880a7dc4d2be962f43e@erdc.dren.mil>
 <rmi5xro6848.fsf@s1.lexort.com>
Message-ID: <c7f94736a9764181a5752c2dc3b4a919@erdc.dren.mil>

I delete C:\Users\RDTECLAC\AppData\Roaming\QGIS and let QGIS recreate it when it starts up again.

I didn't exit qgis, shutdown the OS and power down the computer and then restart.  That would be even worse.

Oddly while pyqtgraph is used on other parts of the code, it is not used in any part of this UI.

-----Original Message-----
From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of Greg Troxel via QGIS-Developer
Sent: Sunday, August 25, 2024 9:32 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS Unexpectedly Crashing

"Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer"
<qgis-developer at lists.osgeo.org> writes:

> What causes an access violation intermittently?  Once it happens 
> sometimes it continues to happen, and I have to delete the QGIS 
> directory in AppData\Roaming\ which is annoying because I have my 
> plugin there and I need to copy it to another directory and then copy 
> it back after running QGIS for first time to have the directory 
> recreated.
>
> It seems to be happening with pyqtgraph\Qt.py which is not my code.

What do you mean "have to delete"?  Are you saying that after you see this error once, then even if you exit qgis, shutdown the OS and power down the computer and then restart, you will immediately get it again?

I suspect one of several things:

  - your computer has a hardware problem.  I'd suggest running memory
    diagnostics.

  - there's a bug someplace in the C code that python calls.  this seems
    unlikely as you are the first to report that I know of, but OTOH
    every reported bug has a first reporter

  - you are running out of RAM and some malloc call is failing and
    returning NULL and this is not caught

  - as always, something else
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked
Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked


From Luke.A.Catania at erdc.dren.mil  Mon Aug 26 09:42:09 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Mon, 26 Aug 2024 16:42:09 +0000
Subject: [QGIS-Developer] QGIS Unexpectedly Crashing
In-Reply-To: <CAB28Asi8TO-rJydUChXTsX=B+18xFUFfbuGKdJR+BkgozS9seg@mail.gmail.com>
References: <a0455a05612b4880a7dc4d2be962f43e@erdc.dren.mil>
 <CAB28Asi8TO-rJydUChXTsX=B+18xFUFfbuGKdJR+BkgozS9seg@mail.gmail.com>
Message-ID: <8ad2824328644e17a1864fdd12de5fc1@erdc.dren.mil>

Oddly while pyqtgraph is pip installed and used in other parts of the pluign, it is not used in any part of this UI, so wondering how it is being referenced.

-----Original Message-----
From: Nyall Dawson <nyall.dawson at gmail.com> 
Sent: Sunday, August 25, 2024 6:31 PM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS Unexpectedly Crashing

On Sun, 25 Aug 2024 at 12:51, Catania, Luke A ERDC-RDE-GRL-VA CIV via QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
>
> What causes an access violation intermittently?  Once it happens sometimes it continues to happen, and I have to delete the QGIS directory in AppData\Roaming\ which is annoying because I have my plugin there and I need to copy it to another directory and then copy it back after running QGIS for first time to have the directory recreated.
>
>
>
> It seems to be happening with pyqtgraph\Qt.py which is not my code.

My guess: You've installed pyqtgraph via pip or some binary wheel, and it's using a different Qt library vs what QGIS is bundled with.

Nyall

From sander.schaminee at geocat.net  Mon Aug 26 13:03:55 2024
From: sander.schaminee at geocat.net (Sander Schaminee)
Date: Mon, 26 Aug 2024 22:03:55 +0200
Subject: [QGIS-Developer] Overview of QGIS 3 and (Py)Qt versions
Message-ID: <1919049b435.c9f4890b240451.5412873583369367414@geocat.net>

Thanks Greg.

To elaborate, I am actually interested in one thing only: 
I am looking for the QGIS version at which PyQt 5.6 (or higher) was introduced and/or the QGIS version at which PyQt 5.5 (or lower) could no longer be used.
The reason is that there's a breaking change in the PyQt API from 5.6 on.

If this question cannot be answered due to the complex nature of dependency management in QGIS/OSGeo4W, then that's also an answer.
In that case, I will have to do a dual implementation.

Thanks,
Sander




From gdt at lexort.com  Mon Aug 26 14:45:16 2024
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 26 Aug 2024 17:45:16 -0400
Subject: [QGIS-Developer] Overview of QGIS 3 and (Py)Qt versions
In-Reply-To: <1919049b435.c9f4890b240451.5412873583369367414@geocat.net>
 (Sander Schaminee via's message of "Mon, 26 Aug 2024 22:03:55 +0200")
References: <1919049b435.c9f4890b240451.5412873583369367414@geocat.net>
Message-ID: <rmied6byn4j.fsf@s1.lexort.com>

Sander Schaminee via QGIS-Developer <qgis-developer at lists.osgeo.org>
writes:


I am seeing the version I have installed as 5.15.11.  Looking at:

  https://pypi.org/project/PyQt5/#history

I see that 5.6 was released on April 28, 2016.


> To elaborate, I am actually interested in one thing only: 
> I am looking for the QGIS version at which PyQt 5.6 (or higher) was introduced and/or the QGIS version at which PyQt 5.5 (or lower) could no longer be used.
> The reason is that there's a breaking change in the PyQt API from 5.6 on.

That's quite a different question!  I would suspect that if you clone
the git repo, and search for the removed function, you might find out
something.  Or check out the release that was current on April 1, 2016
and grep there, and then see what happened to that file.

I would be very surprised if you found anything other than

  qgis trunk, and soon qgis active release branches, got support for
  working with 5.6 sometimes in 2015 or 2016

  there is still an ifdef/configure test for compliing with 5.5, or more
  likely it was removed several years later.
  
Or just unpacked 3.34.10 and search Changelog for 5.6.  There's a lot.

> If this question cannot be answered due to the complex nature of dependency management in QGIS/OSGeo4W, then that's also an answer.
> In that case, I will have to do a dual implementation.

Are you really having to deal with installs that have code that is more
than 8 years old?

Perhaps relevant:
  https://github.com/qgis/QGIS/issues/33924


From Luke.A.Catania at erdc.dren.mil  Tue Aug 27 11:55:18 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Tue, 27 Aug 2024 18:55:18 +0000
Subject: [QGIS-Developer] Ordering Rule Based Symbology
Message-ID: <dc87e5eefa914989bc5f169aa24d491e@erdc.dren.mil>

I am using some code I found online to add rule-based symbology to my layer.

https://gis.stackexchange.com/questions/250869/managing-rule-based-renderer-in-pyqgis

I want to put layers of the same category in one vector layer rather than making them separate layers and congesting my layer panel.  So as I add the layer to the map canvase, I perform a merge to merge it into the category layer adding data of the same type to its category layer.  This is polygon data and each polygon also has one or more buffers associated with it.

When I use the code I found at the ling above my layers are not shown in the order they are added.  They are properly ordered in the attribute table of the category layer, so wondering why the rules do not get applied based on that order.

Wondering if there is a sort method or how I can get it to create the rules in an order I prefer.  I can go to the properties of the layer and reorder the rules that get created by the code but want to do this in code.

Luke Catania
US Army ERDC-GRL
JCMS Site Planning Developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240827/a7d3b955/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Wed Aug 28 20:33:23 2024
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Thu, 29 Aug 2024 03:33:23 +0000
Subject: [QGIS-Developer] Rule-based Symbology Categories
Message-ID: <3b3fdf7b08344a848d5b7c3de8776b84@erdc.dren.mil>

I have a layer that contains multiple polygons, and each polygon has one or more buffers around it.  I am creating a rule and categories under the rule and when I click to test the expression of the category it returns what I expect that there are two features that satisfy the expression, yet nothing is displayed.  If I just create it as a rule using the same expression, it works fine.

What I want to see in the QGIS layer panel is below and I use the rule based symbology to color the buildings and buffers differently.

Main Layer
- Building1
      - Buffer 1
      - Buffer 2
- Building 2
      - Buffer 1
      - Buffer 2


I am actually trying to do this in code, but I wanted to see how I needed to implement it first, so I am setting  it first in the layer properties.

Luke Catania
US Army ERDC-GRL
JCMS Site Planning Developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240829/bab81568/attachment.htm>

From sander.schaminee at geocat.net  Thu Aug 29 12:50:51 2024
From: sander.schaminee at geocat.net (Sander Schaminee)
Date: Thu, 29 Aug 2024 21:50:51 +0200
Subject: [QGIS-Developer] Overview of QGIS 3 and (Py)Qt versions
In-Reply-To: <1919049b435.c9f4890b240451.5412873583369367414@geocat.net>
References: <1919049b435.c9f4890b240451.5412873583369367414@geocat.net>
Message-ID: <1919fb0d3c6.11f662ad3572415.7751870957285999477@geocat.net>

Thanks again Greg. Those are some good suggestions.
And yes, your are right: I probably should not bother anymore with 8 year old installs.

Your "perhaps relevant" link at the end was spot-on actually: my issue is exactly related to QtWebKit(Widgets).
I had a user report that it wasn't supported anymore, but he did not include any specifics (version, OS, etc.).
I am on Windows myself and I'm running the latest LTS (3.34) with PyQt 5.15.13 and QtWebKit is still supported.
PyQt doesn't even raise a deprecation warning or anything.

So this stuff is complicated...

Either way, it seems to be better to refactor my code to use QtWebEngine instead.
Then I might still get complaints from that one user that still uses a 9 year old version of QGIS, but that complaint would be easier to ignore ;)


From lova at kartoza.com  Fri Aug 30 05:14:09 2024
From: lova at kartoza.com (Lova Andriarimalala)
Date: Fri, 30 Aug 2024 15:14:09 +0300
Subject: [QGIS-Developer] QGIS Full Stack Web Developer Report
In-Reply-To: <CAMLC-sBnvf52q8rAi_uFP4xaemD74dx0W8kV2kdp1q52DH5uGA@mail.gmail.com>
References: <AM6PR08MB39916950D01F09B24F1EFF52FBB42@AM6PR08MB3991.eurprd08.prod.outlook.com>
 <CAMLC-sDvceW7XVvT9XhO37kNG0dCLWW2S_1L6Q8E1=hZ1za7xw@mail.gmail.com>
 <CAMLC-sBTZPfFrd5UPpeNSKGCdwpa2C8ot6Hyrv7iu06uHyheFQ@mail.gmail.com>
 <CAMLC-sBnvf52q8rAi_uFP4xaemD74dx0W8kV2kdp1q52DH5uGA@mail.gmail.com>
Message-ID: <CAMLC-sAjQB+FprsDnJFpPDV7Tj6+jsOywCOvBj0+RwT5nmW3og@mail.gmail.com>

Hello everyone,

Please find below the report for this week's maintenance and development of
the QGIS and related websites:

This week, I focused on updating the branding of the plugin's website to
match the current QGIS.org and Feed. Please find my progress at
https://github.com/Xpirix/QGIS-Plugins-Website/pull/5.
These changes are based on the issue QGIS-Django #319
<https://github.com/qgis/QGIS-Django/issues/319> and are split into smaller
issues at https://github.com/Xpirix/QGIS-Plugins-Website/issues.

Next week, I will continue working on this update and probably do some
maintenance tasks.

Have a nice weekend,
Best regards,

Lova Andriarimalala


*QGIS Full Stack Developer   *
*T *: +27(0) 87 809 2702          *E *: lova at kartoza.com          *W* :
kartoza.com



*This email and any attachments are confidential and intended solely for
the use of the individual or entity to whom they are addressed. If you *
*have received this email in error, please notify the sender immediately
and delete it from your system. Unauthorised use, disclosure, or copying*
*of the contents is prohibited.*


On Fri, 23 Aug 2024 at 15:49, Lova Andriarimalala <lova at kartoza.com> wrote:

> Hello everyone,
>
> Please find below the report for this week's maintenance and development
> of the QGIS and related websites:
>
> *Overview:*
>
> I mainly focused on splitting the website of the plugin into 3 parts which
> are: plugins, planet and the resource hub.
>
>
> *Ongoing task:*
>
> I have set new repos on my GH account for the plugin website, planet
> website and resource hub. :
>
>
>    - Plugins: https://github.com/Xpirix/QGIS-Plugins-Website
>    - Resources hub: https://github.com/Xpirix/QGIS-Hub-Website
>    - Planet: https://github.com/Xpirix/QGIS-Planet-Website
>
> For the Planet website, I tried to match the branding with the QGIS.org
> website using Bulma, React and Django Rest Framework. Please feel free to
> check the progress at:
> https://github.com/Xpirix/QGIS-Planet-Website/pull/4
>
> *Deployed PRs on the QGIS Website:*
>
>    - Replace QGIS 3.38 docs links with QGIS testing
>    <https://github.com/qgis/QGIS-Website/pull/395>
>    - Add issues report links for plugins, feed, changelog
>    <https://github.com/qgis/QGIS-Website/pull/412>
>    - Fix language name <https://github.com/qgis/QGIS-Website/pull/398>
>    - Remove inexistent roadmap page
>    <https://github.com/qgis/QGIS-Website/pull/397>
>    - Use latest for docs links in get involved and thank you pages
>    <https://github.com/qgis/QGIS-Website/pull/404>
>    - Some fixes for the GH issue template
>    <https://github.com/qgis/QGIS-Website/pull/405>
>
>
> Have a nice weekend,
>
> Best regards,
>
>
> Lova Andriarimalala
>
>
> *QGIS Full Stack Developer   *
> *T *: +27(0) 87 809 2702          *E *: lova at kartoza.com          *W* :
> kartoza.com
>
>
>
> *This email and any attachments are confidential and intended solely for
> the use of the individual or entity to whom they are addressed. If you *
> *have received this email in error, please notify the sender immediately
> and delete it from your system. Unauthorised use, disclosure, or copying*
> *of the contents is prohibited.*
>
>
> On Fri, 9 Aug 2024 at 16:46, Lova Andriarimalala <lova at kartoza.com> wrote:
>
>> Hello everyone,
>>
>> Please find below this week's report for the maintenance and development
>> of the QGIS and related websites:
>>
>> *Overview:*
>>
>> I mainly focused on deploying the latest changes on the QGIS website, the
>> QGIS Feed Website and the QGIS Plugins Website. I also worked on some
>> issues for them.
>>
>>
>> *Deployed PRs on the QGIS Website:*
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> * - Optimise sponsors logo
>> <https://github.com/qgis/QGIS-Website/pull/388> - Add qgis 1st conference
>> image to the thank-you page <https://github.com/qgis/QGIS-Website/pull/389>
>> - Limit roadmap schedule table width to 100%
>> <https://github.com/qgis/QGIS-Website/pull/396> - Add a select menu to
>> choose a language for documentation
>> <https://github.com/qgis/QGIS-Website/pull/391> - Optimise sponsors logo
>> <https://github.com/qgis/QGIS-Website/pull/388> - Fixes for the playwright
>> test and the commit hash link
>> <https://github.com/qgis/QGIS-Website/pull/390> *
>> *Deployed PRs on the QGIS Plugin Website:*
>>
>>    - <https://github.com/qgis/QGIS-Django/pull/452>Feedback clarification
>>    <https://github.com/qgis/QGIS-Django/pull/452>
>>
>> *Deployed PRs on the QGIS Feed Website:*
>>
>>    - Allow xx_XX lang in the parameter
>>    <https://github.com/qgis/qgis-feed/pull/93>
>>    - Update the design to match the new website
>>    <https://github.com/qgis/qgis-feed/pull/72>
>>
>> *New PRs on the QGIS Website:*
>>
>>
>>    - Fix language name <https://github.com/qgis/QGIS-Website/pull/398>
>>    - Remove the inexistent roadmap page
>>    <https://github.com/qgis/QGIS-Website/pull/397>
>>    - Replace QGIS 3.38 docs links with QGIS testing
>>    <https://github.com/qgis/QGIS-Website/pull/395>
>>
>> *Ongoing task:*
>>
>>    - Split the website of the plugin to plugins, planet and hub
>>    <https://github.com/qgis/QGIS-Django/issues/454>
>>
>> *Question/feedback needed:*
>> About the licensing for a plugin when uploading it to plugins.qgis.org,
>> I was wondering if we could allow the COPYING as a valid license file apart
>> from the LICENSE file. This is related to an ongoing discussion at
>> https://github.com/qgis/QGIS-Django/issues/453.
>>
>> Lova Andriarimalala
>>
>>
>> *QGIS Full Stack Developer   *
>> *T *: +27(0) 87 809 2702          *E *: lova at kartoza.com          *W* :
>> kartoza.com
>>
>>
>>
>> *This email and any attachments are confidential and intended solely for
>> the use of the individual or entity to whom they are addressed. If you *
>> *have received this email in error, please notify the sender immediately
>> and delete it from your system. Unauthorised use, disclosure, or copying*
>> *of the contents is prohibited.*
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20240830/e53f2aec/attachment.htm>

