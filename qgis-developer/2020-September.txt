From charles at kartoza.com  Tue Sep  1 01:51:10 2020
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Tue, 1 Sep 2020 10:51:10 +0200
Subject: [QGIS-Developer] Coordinates of a pixel
In-Reply-To: <CAHR++tPYm8bmbFFVSiPmS-L0W17z1z3QgCysEamD-c=UfV3bFQ@mail.gmail.com>
References: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
 <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>
 <CAHR++tPYm8bmbFFVSiPmS-L0W17z1z3QgCysEamD-c=UfV3bFQ@mail.gmail.com>
Message-ID: <CAK2Kqicb1sahY=zTp=ANwVtKdJ2UwXdP6OeQgeepZN+WS9_8hQ@mail.gmail.com>

I took a cursory glance at the calculator you used and the description
you've given, and I think there's a possibility you're simply using an
easting value in the calculator. You could try multiplying your input
longitude by -1 for a quick fix (although I haven't tested this will work
at all).

On Tue, 1 Sep 2020 at 03:31, Miguel-Ángel Fas-Millán <fas.millan at gmail.com>
wrote:

> Thanks for your reply. Well, let me provide more details to explain why I
> was asking that.
> I have a DSM, with its xllcenter/yllcenter coordinates and I need to know
> the coordinates of the (in this case) center of any of the squares/cells
> (which, maybe wrongly, I called pixels) represented by this dataset. To
> that I've been using a function equivalent to the provided by this
> calculator: https://geodesy.noaa.gov/cgi-bin/Inv_Fwd/forward2.prl , which
> takes as parameters the starting point, azimuth, distance, and returns the
> ending coordinates.
>
> For instance, I want to calculate the coordinates of the first cell of the
> dataset (top left of the matrix). So I do:
>
> calculateEndingGlobalCoordinates(Ellipsoid.*WGS84*, start_coords, 0.0,
> nrows*cellsize) //0.0 for north
>
> The problem is that it returns a value with a latitude that seems ok, but
> a wrong longitude. When I place that coordinate in QGIS, it is out of the
> image, quite at left of the top left corner.
>
> Unsurprisingly, if I place the coordinates obtained with this method (or
> with the online calculator mentioned) in google maps, to check if it makes
> sense looking at what's there in the satellite images, they make no sense
> at all.
>
> However, if I take the coordinates appearing in QGIS when I hover one of
> the cells, and place them in google maps, it makes perfect sense. With a
> few meters of difference, but well, at least it is on the right track. (I
> am that sure because I took as reference a ATC tower, which is the highest
> element in a wide area).
>
> That's why I wanted to check what's the difference between the mentioned
> method I was using and whatever is made in the code to return those quite
> correct coordinates.
>
>
>
>
> El mar., 1 sept. 2020 a las 0:01, Charles Dixon-Paver (<
> charles at kartoza.com>) escribió:
>
>> Someone can correct me if I'm wrong, but I think there's a
>> misunderstanding here of how this raster data is handled in a GIS. From my
>> understanding of the question, I don't know that what you're asking for is
>> available "in the code" the way you expect.
>>
>> The coordinates are showing the position of the cursor relative to the
>> origin of the assigned coordinate reference system. The raster data is
>> "projected" onto that reference system, which assigns positions to some
>> points on the image and stretches, rotates or distorts the image in
>> accordance with the images affine parameters that ensure all the different
>> parts of the image remain spatially correct. How the GIS knows where to get
>> these parameters varies between data types and file formats.
>>
>> Playing around with the georeferencer tool in QGIS should give you a
>> pretty clear understanding of how this "projection" works.
>>
>> There are ways to get the coordinates of a position or pixel within an
>> image programmatically, the easiest of which that I can think of is using
>> values from a world file [1] with an xy position (in pixels) of the pixel
>> of interest. The code required for achieving this, however, is probably
>> going to be dependant on a wide variety of factors (not least of all the
>> CRS units and pixel size). Alternatively, you could likely grab the
>> coordinate position of a pixel from within a QGIS project, but that doesn't
>> seem to be what you're after. Perhaps a developer familiar with the GDAL or
>> QGIS code bases can point you in the direction of some wizardry that will
>> achieve what it is you are looking for without a clearer understanding of
>> your use case though.
>>
>> [1] https://en.wikipedia.org/wiki/World_file
>>
>> On Mon, 31 Aug 2020 at 19:57, Miguel-Ángel Fas-Millán <
>> fas.millan at gmail.com> wrote:
>>
>>> Hi all,
>>> New around here and as a QGIS user. I need to find something in the
>>> code, I hope you can help me.
>>> When you open a DSM and place the mouse on any pixel, you can see the
>>> coordinates of that point. Could someone tell me where in the code is made
>>> the calculation of those coordinates?
>>>
>>> Regards,
>>>
>>> Angel
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/4b381eaa/attachment-0001.html>

From carlo.bertelli at gmail.com  Tue Sep  1 02:29:27 2020
From: carlo.bertelli at gmail.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Tue, 1 Sep 2020 11:29:27 +0200
Subject: [QGIS-Developer] What about AsincPg?
In-Reply-To: <CAES-DZRwfAP-wsB=CC4ZwQUCwUo2cRsEXJEGxMtmv97t8qO3Fw@mail.gmail.com>
References: <CALc8-V+cP9oAb4qY=qVHH0hUwma=v2sTs9hcOR2iQKN+-8Bucw@mail.gmail.com>
 <CAES-DZRwfAP-wsB=CC4ZwQUCwUo2cRsEXJEGxMtmv97t8qO3Fw@mail.gmail.com>
Message-ID: <CALc8-VLW9sACZNiUxMsZOWo5KDXo4_eH=16HHEoPEoNHag5SUQ@mail.gmail.com>

Sorry for the noise!
c

On Mon, Aug 31, 2020 at 9:35 AM Tim Sutton <tim at kartoza.com> wrote:

> Hi Carlo
>
> In what context are you proposing this? We do not use python for the
> Postgres provider, but rather C++. If you are experiencing slowness using
> QGIS to connect to postgres it may well be your local configuration rather
> than postgresql. You would need to share a bit more detail before someone
> can help you resolve it though.
>
> Regards
>
> Tim
>
>
> On Fri, Aug 28, 2020 at 8:33 AM Carlo A. Bertelli (Charta s.r.l.) <
> carlo.bertelli at gmail.com> wrote:
>
>> Maybe AsyncPg (https://github.com/MagicStack/asyncpg) could be the
>> answer for the slow pace of psycopg.
>> What do you think?
>> Using database introspection that was introduced since version 9.2,
>> AsincPg is not compatible with version 8.4 that is still widely used, but
>> declared speed gains seem worth trying.
>> c
>>
>> --
>> --------------------------------------------------------------------------
>> Carlo A. Bertelli
>>    Charta servizi e sistemi per il territorio e la storia ambientale srl
>>           Dipendenze del palazzo Doria,
>>           vc. alla Chiesa della Maddalena 9/2 16124      Genova (Italy)
>>           tel./fax +39(0)10 2475439  +39 0108566195  mobile:+39 393
>> 1590711
>>    e-mail: bertelli at chartasrl.eu      http://www.chartasrl.eu
>> --------------------------------------------------------------------------
>>
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
>
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/218e4d6c/attachment.html>

From delazj at gmail.com  Tue Sep  1 04:11:53 2020
From: delazj at gmail.com (DelazJ)
Date: Tue, 1 Sep 2020 13:11:53 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <b5a28bcd-6d49-5442-2cd7-7fa96e53a5c0@gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
 <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
 <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>
 <57643f60-8d41-e17e-b647-c2c4b7ea6a58@gmail.com>
 <CAMtsY+bBz=RsodFdrdHxexb8DBTqVe-q=vhHe+KHz1mPABkFaA@mail.gmail.com>
 <6c61f3e6-7e89-8a30-5d74-cc3573e4a0d1@gmail.com>
 <8318b1bb-c45e-afbf-800e-8d73ca7b37e6@duif.net>
 <b5a28bcd-6d49-5442-2cd7-7fa96e53a5c0@gmail.com>
Message-ID: <CAECJsSpTcsN2J2tgw4rk7nnmZ0TLkWLc06L-OQntTzxwDrgbEQ@mail.gmail.com>

Hi,

Like Matteo, I can't locally test the doctest build so travis/docker are
the masters and last resort here.
I gave a look to the travis reports and the code testing parts of the docs
are the reasons for failure. But I'm not sure the recent broken master
docker is the only reason. I tried to fix some obvious issues in our code
samples pointed by the various and changing reports of travis but there are
a bunch of feedback I do not understand (or don't know where to look for a
fix) so would be grateful if someone can give it a look. A single small PR
ending with the red cross from Travis is making me crazy. I have summarized
some of the issues at
https://github.com/qgis/QGIS-Documentation/labels/build%2Fdoctest%2Ftravis

Thanks in advance,
Harrissou



Le ven. 28 août 2020 à 10:51, matteo <matteo.ghetta at gmail.com> a écrit :

> Hi Richard,
>
> > in is in the conf.py:
> >
> > https://github.com/qgis/QGIS-Documentation/blob/master/conf.py#L343
> >
>
> oh right.... my fault.. but tests are still failing with a compiled
> version of QGIS. Can I ask you how you user.mk file looks like?
>
> Cheers and thanks
>
> Matteo
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/1ef2ed70/attachment.html>

From tim at kartoza.com  Tue Sep  1 06:32:41 2020
From: tim at kartoza.com (Tim Sutton)
Date: Tue, 1 Sep 2020 14:32:41 +0100
Subject: [QGIS-Developer] Coordinates of a pixel
In-Reply-To: <CAK2Kqicb1sahY=zTp=ANwVtKdJ2UwXdP6OeQgeepZN+WS9_8hQ@mail.gmail.com>
References: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
 <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>
 <CAHR++tPYm8bmbFFVSiPmS-L0W17z1z3QgCysEamD-c=UfV3bFQ@mail.gmail.com>
 <CAK2Kqicb1sahY=zTp=ANwVtKdJ2UwXdP6OeQgeepZN+WS9_8hQ@mail.gmail.com>
Message-ID: <CAES-DZTpWz7x+u7tJoohm6dtynB926xYAd=w_HYtSVAdW2ABBQ@mail.gmail.com>

Hi

Also you can get the extents of the layer in the layer properties ->
Information tab e.g.:


Name DEM_10m
Path /home/timlinux/gisdata/Rwanda/DEM_10m.tif
CRS EPSG:4326 - WGS 84 - Geographic
Extent 28.9592194665249139,-2.8404830825979692 :
30.8994723851809887,-1.0469841014800894
Unit degrees
Width 21524
Height 19896
Data type Int16 - Sixteen bit signed integer
GDAL Driver Description GTiff
GDAL Driver Metadata GeoTIFF
Dataset Description /home/timlinux/gisdata/Rwanda/DEM_10m.tif
Compression
Band 1
RepresentationType=THEMATIC
STATISTICS_APPROXIMATE=YES
STATISTICS_MAXIMUM=3821
STATISTICS_MEAN=1697.9520539082
STATISTICS_MINIMUM=15
STATISTICS_STDDEV=341.19933119234
STATISTICS_VALID_PERCENT=56.38
More information
AREA_OR_POINT=Area
DataType=Generic
Dimensions X: 21524 Y: 19896 Bands: 1
Origin 28.9592,-1.04698
Pixel Size 9.01436962765319623e-05,-9.01436962765319623e-05

Regards

Tim


On Tue, Sep 1, 2020 at 9:51 AM Charles Dixon-Paver <charles at kartoza.com>
wrote:

> I took a cursory glance at the calculator you used and the description
> you've given, and I think there's a possibility you're simply using an
> easting value in the calculator. You could try multiplying your input
> longitude by -1 for a quick fix (although I haven't tested this will work
> at all).
>
> On Tue, 1 Sep 2020 at 03:31, Miguel-Ángel Fas-Millán <fas.millan at gmail.com>
> wrote:
>
>> Thanks for your reply. Well, let me provide more details to explain why I
>> was asking that.
>> I have a DSM, with its xllcenter/yllcenter coordinates and I need to know
>> the coordinates of the (in this case) center of any of the squares/cells
>> (which, maybe wrongly, I called pixels) represented by this dataset. To
>> that I've been using a function equivalent to the provided by this
>> calculator: https://geodesy.noaa.gov/cgi-bin/Inv_Fwd/forward2.prl ,
>> which takes as parameters the starting point, azimuth, distance, and
>> returns the ending coordinates.
>>
>> For instance, I want to calculate the coordinates of the first cell of
>> the dataset (top left of the matrix). So I do:
>>
>> calculateEndingGlobalCoordinates(Ellipsoid.*WGS84*, start_coords, 0.0,
>> nrows*cellsize) //0.0 for north
>>
>> The problem is that it returns a value with a latitude that seems ok, but
>> a wrong longitude. When I place that coordinate in QGIS, it is out of the
>> image, quite at left of the top left corner.
>>
>> Unsurprisingly, if I place the coordinates obtained with this method (or
>> with the online calculator mentioned) in google maps, to check if it makes
>> sense looking at what's there in the satellite images, they make no
>> sense at all.
>>
>> However, if I take the coordinates appearing in QGIS when I hover one of
>> the cells, and place them in google maps, it makes perfect sense. With a
>> few meters of difference, but well, at least it is on the right track. (I
>> am that sure because I took as reference a ATC tower, which is the highest
>> element in a wide area).
>>
>> That's why I wanted to check what's the difference between the mentioned
>> method I was using and whatever is made in the code to return those quite
>> correct coordinates.
>>
>>
>>
>>
>> El mar., 1 sept. 2020 a las 0:01, Charles Dixon-Paver (<
>> charles at kartoza.com>) escribió:
>>
>>> Someone can correct me if I'm wrong, but I think there's a
>>> misunderstanding here of how this raster data is handled in a GIS. From my
>>> understanding of the question, I don't know that what you're asking for is
>>> available "in the code" the way you expect.
>>>
>>> The coordinates are showing the position of the cursor relative to the
>>> origin of the assigned coordinate reference system. The raster data is
>>> "projected" onto that reference system, which assigns positions to some
>>> points on the image and stretches, rotates or distorts the image in
>>> accordance with the images affine parameters that ensure all the different
>>> parts of the image remain spatially correct. How the GIS knows where to get
>>> these parameters varies between data types and file formats.
>>>
>>> Playing around with the georeferencer tool in QGIS should give you a
>>> pretty clear understanding of how this "projection" works.
>>>
>>> There are ways to get the coordinates of a position or pixel within an
>>> image programmatically, the easiest of which that I can think of is using
>>> values from a world file [1] with an xy position (in pixels) of the pixel
>>> of interest. The code required for achieving this, however, is probably
>>> going to be dependant on a wide variety of factors (not least of all
>>> the CRS units and pixel size). Alternatively, you could likely grab the
>>> coordinate position of a pixel from within a QGIS project, but that doesn't
>>> seem to be what you're after. Perhaps a developer familiar with the GDAL or
>>> QGIS code bases can point you in the direction of some wizardry that will
>>> achieve what it is you are looking for without a clearer understanding of
>>> your use case though.
>>>
>>> [1] https://en.wikipedia.org/wiki/World_file
>>>
>>> On Mon, 31 Aug 2020 at 19:57, Miguel-Ángel Fas-Millán <
>>> fas.millan at gmail.com> wrote:
>>>
>>>> Hi all,
>>>> New around here and as a QGIS user. I need to find something in the
>>>> code, I hope you can help me.
>>>> When you open a DSM and place the mouse on any pixel, you can see the
>>>> coordinates of that point. Could someone tell me where in the code is made
>>>> the calculation of those coordinates?
>>>>
>>>> Regards,
>>>>
>>>> Angel
>>>>
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/a1284403/attachment-0001.html>

From fas.millan at gmail.com  Tue Sep  1 08:59:10 2020
From: fas.millan at gmail.com (=?UTF-8?B?TWlndWVsLcOBbmdlbCBGYXMtTWlsbMOhbg==?=)
Date: Tue, 1 Sep 2020 17:59:10 +0200
Subject: [QGIS-Developer] Coordinates of a pixel
In-Reply-To: <CAES-DZTpWz7x+u7tJoohm6dtynB926xYAd=w_HYtSVAdW2ABBQ@mail.gmail.com>
References: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
 <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>
 <CAHR++tPYm8bmbFFVSiPmS-L0W17z1z3QgCysEamD-c=UfV3bFQ@mail.gmail.com>
 <CAK2Kqicb1sahY=zTp=ANwVtKdJ2UwXdP6OeQgeepZN+WS9_8hQ@mail.gmail.com>
 <CAES-DZTpWz7x+u7tJoohm6dtynB926xYAd=w_HYtSVAdW2ABBQ@mail.gmail.com>
Message-ID: <CAHR++tN0eVG3dMJA_s8CBOyLNbqhVPqau5vDPSZNty8yN6LpkQ@mail.gmail.com>

Hi again,

Charles > I checked that, but no. The deviation is not so high. I suspect
that the way it's calculated in QGIS is taking something into account that
the function I'm using (and the web, both return same result) is not.
Maybe this? My DSM is in ETRS89: "*Note that the World Geodetic System
WGS84 and the European Reference System ETRS89 are virtually identical and
that coordinate transformation between the two systems in practical
navigation is unnecessary. However, for high-precision surveying work - be
aware that the two systems deviates more than half a meter.*"
But I don't know how to take that deviation into account in the function or
why it seems to affect only  the longitude.

Code of the calculateEndingGlobalCoordinates that I'm using:
https://github.com/mgavaghan/geodesy/blob/master/src/main/java/org/gavaghan/geodesy/GeodeticCalculator.java

Tim > Good to know. Not sure how could I leverage those data. I called
pixels  to the DSM cells but really I'm not interested in the graphical
part, just in how is calculating the coordinates of those cells from the
xllcenter and yllcenter correctly.




El mar., 1 sept. 2020 a las 15:32, Tim Sutton (<tim at kartoza.com>) escribió:

> Hi
>
> Also you can get the extents of the layer in the layer properties ->
> Information tab e.g.:
>
>
> Name DEM_10m
> Path /home/timlinux/gisdata/Rwanda/DEM_10m.tif
> CRS EPSG:4326 - WGS 84 - Geographic
> Extent 28.9592194665249139,-2.8404830825979692 :
> 30.8994723851809887,-1.0469841014800894
> Unit degrees
> Width 21524
> Height 19896
> Data type Int16 - Sixteen bit signed integer
> GDAL Driver Description GTiff
> GDAL Driver Metadata GeoTIFF
> Dataset Description /home/timlinux/gisdata/Rwanda/DEM_10m.tif
> Compression
> Band 1
> RepresentationType=THEMATIC
> STATISTICS_APPROXIMATE=YES
> STATISTICS_MAXIMUM=3821
> STATISTICS_MEAN=1697.9520539082
> STATISTICS_MINIMUM=15
> STATISTICS_STDDEV=341.19933119234
> STATISTICS_VALID_PERCENT=56.38
> More information
> AREA_OR_POINT=Area
> DataType=Generic
> Dimensions X: 21524 Y: 19896 Bands: 1
> Origin 28.9592,-1.04698
> Pixel Size 9.01436962765319623e-05,-9.01436962765319623e-05
>
> Regards
>
> Tim
>
>
> On Tue, Sep 1, 2020 at 9:51 AM Charles Dixon-Paver <charles at kartoza.com>
> wrote:
>
>> I took a cursory glance at the calculator you used and the description
>> you've given, and I think there's a possibility you're simply using an
>> easting value in the calculator. You could try multiplying your input
>> longitude by -1 for a quick fix (although I haven't tested this will work
>> at all).
>>
>> On Tue, 1 Sep 2020 at 03:31, Miguel-Ángel Fas-Millán <
>> fas.millan at gmail.com> wrote:
>>
>>> Thanks for your reply. Well, let me provide more details to explain why
>>> I was asking that.
>>> I have a DSM, with its xllcenter/yllcenter coordinates and I need to
>>> know the coordinates of the (in this case) center of any of the
>>> squares/cells (which, maybe wrongly, I called pixels) represented by this
>>> dataset. To that I've been using a function equivalent to the provided by
>>> this calculator: https://geodesy.noaa.gov/cgi-bin/Inv_Fwd/forward2.prl ,
>>> which takes as parameters the starting point, azimuth, distance, and
>>> returns the ending coordinates.
>>>
>>> For instance, I want to calculate the coordinates of the first cell of
>>> the dataset (top left of the matrix). So I do:
>>>
>>> calculateEndingGlobalCoordinates(Ellipsoid.*WGS84*, start_coords, 0.0,
>>> nrows*cellsize) //0.0 for north
>>>
>>> The problem is that it returns a value with a latitude that seems ok,
>>> but a wrong longitude. When I place that coordinate in QGIS, it is out of
>>> the image, quite at left of the top left corner.
>>>
>>> Unsurprisingly, if I place the coordinates obtained with this method (or
>>> with the online calculator mentioned) in google maps, to check if it makes
>>> sense looking at what's there in the satellite images, they make no
>>> sense at all.
>>>
>>> However, if I take the coordinates appearing in QGIS when I hover one of
>>> the cells, and place them in google maps, it makes perfect sense. With a
>>> few meters of difference, but well, at least it is on the right track. (I
>>> am that sure because I took as reference a ATC tower, which is the highest
>>> element in a wide area).
>>>
>>> That's why I wanted to check what's the difference between the mentioned
>>> method I was using and whatever is made in the code to return those quite
>>> correct coordinates.
>>>
>>>
>>>
>>>
>>> El mar., 1 sept. 2020 a las 0:01, Charles Dixon-Paver (<
>>> charles at kartoza.com>) escribió:
>>>
>>>> Someone can correct me if I'm wrong, but I think there's a
>>>> misunderstanding here of how this raster data is handled in a GIS. From my
>>>> understanding of the question, I don't know that what you're asking for is
>>>> available "in the code" the way you expect.
>>>>
>>>> The coordinates are showing the position of the cursor relative to the
>>>> origin of the assigned coordinate reference system. The raster data is
>>>> "projected" onto that reference system, which assigns positions to some
>>>> points on the image and stretches, rotates or distorts the image in
>>>> accordance with the images affine parameters that ensure all the different
>>>> parts of the image remain spatially correct. How the GIS knows where to get
>>>> these parameters varies between data types and file formats.
>>>>
>>>> Playing around with the georeferencer tool in QGIS should give you a
>>>> pretty clear understanding of how this "projection" works.
>>>>
>>>> There are ways to get the coordinates of a position or pixel within an
>>>> image programmatically, the easiest of which that I can think of is using
>>>> values from a world file [1] with an xy position (in pixels) of the pixel
>>>> of interest. The code required for achieving this, however, is probably
>>>> going to be dependant on a wide variety of factors (not least of all
>>>> the CRS units and pixel size). Alternatively, you could likely grab the
>>>> coordinate position of a pixel from within a QGIS project, but that doesn't
>>>> seem to be what you're after. Perhaps a developer familiar with the GDAL or
>>>> QGIS code bases can point you in the direction of some wizardry that will
>>>> achieve what it is you are looking for without a clearer understanding of
>>>> your use case though.
>>>>
>>>> [1] https://en.wikipedia.org/wiki/World_file
>>>>
>>>> On Mon, 31 Aug 2020 at 19:57, Miguel-Ángel Fas-Millán <
>>>> fas.millan at gmail.com> wrote:
>>>>
>>>>> Hi all,
>>>>> New around here and as a QGIS user. I need to find something in the
>>>>> code, I hope you can help me.
>>>>> When you open a DSM and place the mouse on any pixel, you can see the
>>>>> coordinates of that point. Could someone tell me where in the code is made
>>>>> the calculation of those coordinates?
>>>>>
>>>>> Regards,
>>>>>
>>>>> Angel
>>>>>
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
>
> ------------------------------------------------------------------------------------------
> ​
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/11cdbba2/attachment.html>

From adenaculture at gmail.com  Tue Sep  1 10:39:13 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 1 Sep 2020 13:39:13 -0400
Subject: [QGIS-Developer] Issue with determining Symbol size - Bug?
Message-ID: <CABPxTTp=gNDLQDHpL2WSk5WU5wQPCfDfXXp5=rS62v2RneZvgw@mail.gmail.com>

I am trying to calculate the size of a single symbol in pixels using:

canvas = iface.mapCanvas()
context = QgsRenderContext.fromMapSettings(canvas.mapSettings())
layer = iface.activeLayer()
rnd = layer.renderer()
sym = rnd.symbol()
scaled_size_in_pixels = context.convertToPainterUnits(
    sym.size(),
    sym.sizeUnit(),
    sym.sizeMapUnitScale() )

The last line can also be calculated by:

  scaled_size_in_pixels = sym.size(context)

I am finding that this is returning the size of the filled area of the
symbol, but it does not include the border. Is this a bug or do I need to
add something additional to include the border?

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/c08f5eb1/attachment-0001.html>

From charles at kartoza.com  Tue Sep  1 10:59:02 2020
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Tue, 1 Sep 2020 19:59:02 +0200
Subject: [QGIS-Developer] Coordinates of a pixel
In-Reply-To: <CAHR++tN0eVG3dMJA_s8CBOyLNbqhVPqau5vDPSZNty8yN6LpkQ@mail.gmail.com>
References: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
 <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>
 <CAHR++tPYm8bmbFFVSiPmS-L0W17z1z3QgCysEamD-c=UfV3bFQ@mail.gmail.com>
 <CAK2Kqicb1sahY=zTp=ANwVtKdJ2UwXdP6OeQgeepZN+WS9_8hQ@mail.gmail.com>
 <CAES-DZTpWz7x+u7tJoohm6dtynB926xYAd=w_HYtSVAdW2ABBQ@mail.gmail.com>
 <CAHR++tN0eVG3dMJA_s8CBOyLNbqhVPqau5vDPSZNty8yN6LpkQ@mail.gmail.com>
Message-ID: <CAK2KqieRDhvqQeECd=S1K+dW8yy3ots-vPrJ5+Y1BcpZRWVZuQ@mail.gmail.com>

I would wager that those deviations between WGS and ETRS are unlikely to be
the cause of this discrepancy, unless your implementation somehow
compounds the inaccuracies between them. The way it's "calculated" in a GIS
is by referencing the image to a coordinate system and then returning the
coordinates at a specified location (a process which is totally abstract
from image pixels).

I haven't tested the code you're using, but from what I can see the most
likely culprit is some abstract issue with the implementation which is
difficult for us to resolve here (although a bug is certainly possible).
For example, if you are using a DSM that is in geographic coordinates, the
pixel sizes/ cell resolution are geographic units. That means that each
cell is not a uniform distance (in meters) in size, yet the function you
link to seems to require an input distance parameter in meters.
Transforming units between coordinate systems is not trivial and likely
requires expert advice. This may not be the case though, as I may be
misunderstanding your requirements entirely.

I believe Tims response was merely an example of how to get the details of
an image which has been imported into QGIS in a similar manner as what I
suggested with a world file. Depending on the usage and accuracy required,
you can quite easily use the pixel size and the raster extents/ origin to
calculate a pixel position (although not very robust,  I find it is often
useful).

I hope that helps somewhat rather than confusing the issue further. As I
stated before, perhaps someone has an idea of where to point you in the
codebase (in either QGIS or upstream projects like proj and GDAL), but I
don't think you're entirely on the right path here...

On Tue, 1 Sep 2020 at 17:59, Miguel-Ángel Fas-Millán <fas.millan at gmail.com>
wrote:

> Hi again,
>
> Charles > I checked that, but no. The deviation is not so high. I suspect
> that the way it's calculated in QGIS is taking something into account that
> the function I'm using (and the web, both return same result) is not.
> Maybe this? My DSM is in ETRS89: "*Note that the World Geodetic System
> WGS84 and the European Reference System ETRS89 are virtually identical and
> that coordinate transformation between the two systems in practical
> navigation is unnecessary. However, for high-precision surveying work - be
> aware that the two systems deviates more than half a meter.*"
> But I don't know how to take that deviation into account in the function
> or why it seems to affect only  the longitude.
>
> Code of the calculateEndingGlobalCoordinates that I'm using:
> https://github.com/mgavaghan/geodesy/blob/master/src/main/java/org/gavaghan/geodesy/GeodeticCalculator.java
>
> Tim > Good to know. Not sure how could I leverage those data. I called
> pixels  to the DSM cells but really I'm not interested in the graphical
> part, just in how is calculating the coordinates of those cells from the
> xllcenter and yllcenter correctly.
>
>
>
>
> El mar., 1 sept. 2020 a las 15:32, Tim Sutton (<tim at kartoza.com>)
> escribió:
>
>> Hi
>>
>> Also you can get the extents of the layer in the layer properties ->
>> Information tab e.g.:
>>
>>
>> Name DEM_10m
>> Path /home/timlinux/gisdata/Rwanda/DEM_10m.tif
>> CRS EPSG:4326 - WGS 84 - Geographic
>> Extent 28.9592194665249139,-2.8404830825979692 :
>> 30.8994723851809887,-1.0469841014800894
>> Unit degrees
>> Width 21524
>> Height 19896
>> Data type Int16 - Sixteen bit signed integer
>> GDAL Driver Description GTiff
>> GDAL Driver Metadata GeoTIFF
>> Dataset Description /home/timlinux/gisdata/Rwanda/DEM_10m.tif
>> Compression
>> Band 1
>> RepresentationType=THEMATIC
>> STATISTICS_APPROXIMATE=YES
>> STATISTICS_MAXIMUM=3821
>> STATISTICS_MEAN=1697.9520539082
>> STATISTICS_MINIMUM=15
>> STATISTICS_STDDEV=341.19933119234
>> STATISTICS_VALID_PERCENT=56.38
>> More information
>> AREA_OR_POINT=Area
>> DataType=Generic
>> Dimensions X: 21524 Y: 19896 Bands: 1
>> Origin 28.9592,-1.04698
>> Pixel Size 9.01436962765319623e-05,-9.01436962765319623e-05
>>
>> Regards
>>
>> Tim
>>
>>
>> On Tue, Sep 1, 2020 at 9:51 AM Charles Dixon-Paver <charles at kartoza.com>
>> wrote:
>>
>>> I took a cursory glance at the calculator you used and the description
>>> you've given, and I think there's a possibility you're simply using an
>>> easting value in the calculator. You could try multiplying your input
>>> longitude by -1 for a quick fix (although I haven't tested this will work
>>> at all).
>>>
>>> On Tue, 1 Sep 2020 at 03:31, Miguel-Ángel Fas-Millán <
>>> fas.millan at gmail.com> wrote:
>>>
>>>> Thanks for your reply. Well, let me provide more details to explain why
>>>> I was asking that.
>>>> I have a DSM, with its xllcenter/yllcenter coordinates and I need to
>>>> know the coordinates of the (in this case) center of any of the
>>>> squares/cells (which, maybe wrongly, I called pixels) represented by this
>>>> dataset. To that I've been using a function equivalent to the provided by
>>>> this calculator: https://geodesy.noaa.gov/cgi-bin/Inv_Fwd/forward2.prl ,
>>>> which takes as parameters the starting point, azimuth, distance, and
>>>> returns the ending coordinates.
>>>>
>>>> For instance, I want to calculate the coordinates of the first cell of
>>>> the dataset (top left of the matrix). So I do:
>>>>
>>>> calculateEndingGlobalCoordinates(Ellipsoid.*WGS84*, start_coords, 0.0,
>>>> nrows*cellsize) //0.0 for north
>>>>
>>>> The problem is that it returns a value with a latitude that seems ok,
>>>> but a wrong longitude. When I place that coordinate in QGIS, it is out of
>>>> the image, quite at left of the top left corner.
>>>>
>>>> Unsurprisingly, if I place the coordinates obtained with this method
>>>> (or with the online calculator mentioned) in google maps, to check if it
>>>> makes sense looking at what's there in the satellite images, they make
>>>> no sense at all.
>>>>
>>>> However, if I take the coordinates appearing in QGIS when I hover one
>>>> of the cells, and place them in google maps, it makes perfect sense. With a
>>>> few meters of difference, but well, at least it is on the right track. (I
>>>> am that sure because I took as reference a ATC tower, which is the highest
>>>> element in a wide area).
>>>>
>>>> That's why I wanted to check what's the difference between the
>>>> mentioned method I was using and whatever is made in the code to return
>>>> those quite correct coordinates.
>>>>
>>>>
>>>>
>>>>
>>>> El mar., 1 sept. 2020 a las 0:01, Charles Dixon-Paver (<
>>>> charles at kartoza.com>) escribió:
>>>>
>>>>> Someone can correct me if I'm wrong, but I think there's a
>>>>> misunderstanding here of how this raster data is handled in a GIS. From my
>>>>> understanding of the question, I don't know that what you're asking for is
>>>>> available "in the code" the way you expect.
>>>>>
>>>>> The coordinates are showing the position of the cursor relative to the
>>>>> origin of the assigned coordinate reference system. The raster data is
>>>>> "projected" onto that reference system, which assigns positions to some
>>>>> points on the image and stretches, rotates or distorts the image in
>>>>> accordance with the images affine parameters that ensure all the different
>>>>> parts of the image remain spatially correct. How the GIS knows where to get
>>>>> these parameters varies between data types and file formats.
>>>>>
>>>>> Playing around with the georeferencer tool in QGIS should give you a
>>>>> pretty clear understanding of how this "projection" works.
>>>>>
>>>>> There are ways to get the coordinates of a position or pixel within an
>>>>> image programmatically, the easiest of which that I can think of is using
>>>>> values from a world file [1] with an xy position (in pixels) of the pixel
>>>>> of interest. The code required for achieving this, however, is probably
>>>>> going to be dependant on a wide variety of factors (not least of all
>>>>> the CRS units and pixel size). Alternatively, you could likely grab the
>>>>> coordinate position of a pixel from within a QGIS project, but that doesn't
>>>>> seem to be what you're after. Perhaps a developer familiar with the GDAL or
>>>>> QGIS code bases can point you in the direction of some wizardry that will
>>>>> achieve what it is you are looking for without a clearer understanding of
>>>>> your use case though.
>>>>>
>>>>> [1] https://en.wikipedia.org/wiki/World_file
>>>>>
>>>>> On Mon, 31 Aug 2020 at 19:57, Miguel-Ángel Fas-Millán <
>>>>> fas.millan at gmail.com> wrote:
>>>>>
>>>>>> Hi all,
>>>>>> New around here and as a QGIS user. I need to find something in the
>>>>>> code, I hope you can help me.
>>>>>> When you open a DSM and place the mouse on any pixel, you can see the
>>>>>> coordinates of that point. Could someone tell me where in the code is made
>>>>>> the calculation of those coordinates?
>>>>>>
>>>>>> Regards,
>>>>>>
>>>>>> Angel
>>>>>>
>>>>>> _______________________________________________
>>>>>> QGIS-Developer mailing list
>>>>>> QGIS-Developer at lists.osgeo.org
>>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>> --
>>
>> ------------------------------------------------------------------------------------------
>> ​
>>
>> Tim Sutton
>> Visit http://kartoza.com to find out about open source:
>>  * Desktop GIS programming services
>>  * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Skype: timlinux Irc: timlinux on #qgis at freenode.net
>> Tim is a member of the QGIS Project Steering Committee
>>
>> -------------------------------------------------------------------------------------------
>> Kartoza is a merger between Linfiniti and Afrispatial
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200901/dcd48bb6/attachment-0001.html>

From nyall.dawson at gmail.com  Tue Sep  1 15:39:14 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 2 Sep 2020 08:39:14 +1000
Subject: [QGIS-Developer] Issue with determining Symbol size - Bug?
In-Reply-To: <CABPxTTp=gNDLQDHpL2WSk5WU5wQPCfDfXXp5=rS62v2RneZvgw@mail.gmail.com>
References: <CABPxTTp=gNDLQDHpL2WSk5WU5wQPCfDfXXp5=rS62v2RneZvgw@mail.gmail.com>
Message-ID: <CAB28AsgenkxAt5f3b2-DJO-Yd=C+F6-8NN7pNqhRhTAocXbRRg@mail.gmail.com>

On Wed, 2 Sep 2020 at 03:39, C Hamilton <adenaculture at gmail.com> wrote:
>
> I am trying to calculate the size of a single symbol in pixels using:
>
> canvas = iface.mapCanvas()
> context = QgsRenderContext.fromMapSettings(canvas.mapSettings())
> layer = iface.activeLayer()
> rnd = layer.renderer()
> sym = rnd.symbol()
> scaled_size_in_pixels = context.convertToPainterUnits(
>     sym.size(),
>     sym.sizeUnit(),
>     sym.sizeMapUnitScale() )
>
> The last line can also be calculated by:
>
>   scaled_size_in_pixels = sym.size(context)
>
> I am finding that this is returning the size of the filled area of the symbol, but it does not include the border. Is this a bug or do I need to add something additional to include the border?

You can use  QgsSymbolLayerUtils::estimateMaxSymbolBleed if you're
wanting to calculate the "maximum" bounding box of a rendered symbol.
That includes any stroke/offset/other settings which also affect the
rendered bounds.

There's also QgsMarkerSymbol::bounds which returns an approximate
bounding box of a marker symbol, which also accounts for things like
the stroke and offset.

Nyall


>
> Thanks,
>
> Calvin
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Wed Sep  2 02:33:04 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 2 Sep 2020 11:33:04 +0200
Subject: [QGIS-Developer] PR to add a baseclass to python console classes
Message-ID: <96a9c75c-10d4-8834-6209-06935e09742c@duif.net>

Hi Devs,

If somebody is interested and has time; I created a Pull Request to add BaseClass to the Python Console classes, so all three editors there (line input, output and editor input) share the same baseclass, so can share the same code and lexer colors etc etc.

For this I also merged the (untill now) split-up settings of Console and Editor in the GUI.

Nyall proposed to even go further and (now) move functionality from this BaseClass to the c++ QgsCodeEditorPython class, but I would be in favour if people first had a look (and test) into this changes, if they see any issues with it.

PR is https://github.com/qgis/QGIS/pull/37602
( I added some screenies to make it more fun :-) )

Regards,

Richard Duivenvoorde

From adenaculture at gmail.com  Wed Sep  2 07:06:15 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 2 Sep 2020 10:06:15 -0400
Subject: [QGIS-Developer] Issue with determining Symbol size - Bug?
In-Reply-To: <CAB28AsgenkxAt5f3b2-DJO-Yd=C+F6-8NN7pNqhRhTAocXbRRg@mail.gmail.com>
References: <CABPxTTp=gNDLQDHpL2WSk5WU5wQPCfDfXXp5=rS62v2RneZvgw@mail.gmail.com>
 <CAB28AsgenkxAt5f3b2-DJO-Yd=C+F6-8NN7pNqhRhTAocXbRRg@mail.gmail.com>
Message-ID: <CABPxTTr40Wn9+9dAj7Cr4ZpEeTK9rSWTazc3rwjKZaJu_mVfEQ@mail.gmail.com>

Nyall,

Thanks. This almost gets the right answer.
QgsSymbolLayerUtils::estimateMaxSymbolBleed is returning 0 as its value.
I'm not sure what the problem is with it. bounds() seems to work for small
symbols which is probably all I'll need, but if the symbol is very large
with a large border and join style set to miter, the bounding box it
returns is a little too small. My example used an excessively large icon
and large border which probably would not be used in any real project.

Calvin

On Tue, Sep 1, 2020 at 6:39 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Wed, 2 Sep 2020 at 03:39, C Hamilton <adenaculture at gmail.com> wrote:
> >
> > I am trying to calculate the size of a single symbol in pixels using:
> >
> > canvas = iface.mapCanvas()
> > context = QgsRenderContext.fromMapSettings(canvas.mapSettings())
> > layer = iface.activeLayer()
> > rnd = layer.renderer()
> > sym = rnd.symbol()
> > scaled_size_in_pixels = context.convertToPainterUnits(
> >     sym.size(),
> >     sym.sizeUnit(),
> >     sym.sizeMapUnitScale() )
> >
> > The last line can also be calculated by:
> >
> >   scaled_size_in_pixels = sym.size(context)
> >
> > I am finding that this is returning the size of the filled area of the
> symbol, but it does not include the border. Is this a bug or do I need to
> add something additional to include the border?
>
> You can use  QgsSymbolLayerUtils::estimateMaxSymbolBleed if you're
> wanting to calculate the "maximum" bounding box of a rendered symbol.
> That includes any stroke/offset/other settings which also affect the
> rendered bounds.
>
> There's also QgsMarkerSymbol::bounds which returns an approximate
> bounding box of a marker symbol, which also accounts for things like
> the stroke and offset.
>
> Nyall
>
>
> >
> > Thanks,
> >
> > Calvin
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200902/80eeb9bc/attachment.html>

From matteo.ghetta at gmail.com  Thu Sep  3 02:29:34 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Thu, 3 Sep 2020 11:29:34 +0200
Subject: [QGIS-Developer] DB Manager makes QGSI crashing
Message-ID: <5db92270-2f50-6b93-9513-b3e6179dd6e3@gmail.com>

Hi all,

with a fresh new compiled version of QGIS on Debian, I can open DB
Manager but when I try to expand a PostGIS DB, QGIS crashes with this error:

QGIS died on signal 11[New LWP 48502]
[New LWP 48503]
[New LWP 48504]
[New LWP 48505]
[New LWP 48507]
[New LWP 48508]
[New LWP 48509]
[New LWP 48510]
[New LWP 48511]
[New LWP 48512]
[New LWP 48513]
[New LWP 48514]
[New LWP 48515]
[New LWP 48516]
[New LWP 48517]
[New LWP 48518]
[New LWP 48519]
[New LWP 48520]
[New LWP 48521]
[New LWP 48522]
[New LWP 48523]
[New LWP 48524]
[New LWP 48525]
[New LWP 48526]
[New LWP 48528]
[New LWP 48535]
[New LWP 48536]
[New LWP 48537]
[New LWP 48538]
[New LWP 48539]
[New LWP 48540]
[New LWP 48541]
[New LWP 48542]
[New LWP 48543]
[New LWP 48544]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
0x00007f6e13e942c7 in __GI___wait4 (pid=48546, stat_loc=0x7ffd9cf84e54,
options=0, usage=0x0) at ../sysdeps/unix/sysv/linux/wait4.c:27
27	../sysdeps/unix/sysv/linux/wait4.c: No such file or directory.
[Current thread is 1 (Thread 0x7f6e04fa6f40 (LWP 48501))]
#0  0x00007f6e13e942c7 in __GI___wait4 (pid=48546,
stat_loc=0x7ffd9cf84e54, options=0, usage=0x0) at
../sysdeps/unix/sysv/linux/wait4.c:27
#1  0x000055f30925affb in qgisCrash(int) ()
#2  0x00007f6e13e04e30 in <signal handler called> () at
/lib/x86_64-linux-gnu/libc.so.6
#3  __strlen_avx2 () at ../sysdeps/x86_64/multiarch/strlen-avx2.S:65
#4  0x00007f6d495053b9 in  () at
/usr/lib/python3/dist-packages/PyQt5/QtCore.cpython-38-x86_64-linux-gnu.so
#5  0x00007f6d497589c7 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#6  0x00007f6d49759817 in _PyObject_MakeTpCall () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#7  0x00007f6d49734cd3 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#8  0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#9  0x00007f6d49831ebf in _PyEval_EvalCodeWithName () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#10 0x00007f6d49758b61 in _PyFunction_Vectorcall () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#11 0x00007f6d4975a79a in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#12 0x00007f6d49734c4d in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#13 0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#14 0x00007f6d49831ebf in _PyEval_EvalCodeWithName () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#15 0x00007f6d49758b61 in _PyFunction_Vectorcall () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#16 0x00007f6d4975a79a in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#17 0x00007f6d49734c4d in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#18 0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#19 0x00007f6d4972a073 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#20 0x00007f6d4975a79a in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#21 0x00007f6d49734c4d in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#22 0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#23 0x00007f6d49831ebf in _PyEval_EvalCodeWithName () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#24 0x00007f6d49758b61 in _PyFunction_Vectorcall () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#25 0x00007f6d4975a79a in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#26 0x00007f6d49734c4d in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#27 0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#28 0x00007f6d4972a073 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#29 0x00007f6d4975a713 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
#30 0x00007f6d4975913c in PyVectorcall_Call () at
/lib/x86_64-linux-gnu/libpython3.8.so.1.0
#31 0x00007f6d8be67dda in  () at
/usr/lib/python3/dist-packages/sip.cpython-38-x86_64-linux-gnu.so
#32 0x00007f6d8be68009 in  () at
/usr/lib/python3/dist-packages/sip.cpython-38-x86_64-linux-gnu.so
#33 0x00007f6d494608bf in  () at
/usr/lib/python3/dist-packages/PyQt5/QtCore.cpython-38-x86_64-linux-gnu.so
#34 0x00007f6d4957ca60 in  () at
/usr/lib/python3/dist-packages/PyQt5/QtCore.cpython-38-x86_64-linux-gnu.so
#35 0x00007f6e1726d92a in QTreeViewPrivate::layout(int, bool, bool) ()
at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
#36 0x00007f6e17270504 in QTreeViewPrivate::expand(int, bool) () at
/lib/x86_64-linux-gnu/libQt5Widgets.so.5
#37 0x00007f6e17271dc6 in
QTreeViewPrivate::expandOrCollapseItemAtPos(QPoint const&) () at
/lib/x86_64-linux-gnu/libQt5Widgets.so.5
#38 0x00007f6e172745ad in QTreeView::mousePressEvent(QMouseEvent*) () at
/lib/x86_64-linux-gnu/libQt5Widgets.so.5
#39 0x00007f6d46ccf003 in  () at
/usr/lib/python3/dist-packages/PyQt5/QtWidgets.cpython-38-x86_64-linux-gnu.so
#40 0x00007f6e16fe852e in QWidget::event(QEvent*) () at
/lib/x86_64-linux-gnu/libQt5Widgets.so.5
#41 0x00007f6e1708fd4e in QFrame::event(QEvent*) () at
/lib/x86_64-linux-gnu/libQt5Widgets.so.5
#42 0x00007f6d46cd0ec3 in  () at
/usr/lib/python3/dist-packages/PyQt5/QtWidgets.cpython-38-x86_64-linux-gnu.so
#43 0x00007f6e1650d87b in
QCoreApplicationPrivate::sendThroughObjectEventFilters(QObject*,
QEvent*) () at /lib/x86_64-linux-gnu/libQt5Core.so.5
#44 0x00007f6e16fa802e in QApplicationPrivate::notify_helper(QObject*,
QEvent*) () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
#45 0x00007f6e16fad781 in QApplication::notify(QObject*, QEvent*) () at
/lib/x86_64-linux-gnu/libQt5Widgets.so.5
#46 0x00007f6e14ce67fb in QgsApplication::notify(QObject*, QEvent*) ()
at /home/matteo/dev/qgis-master/output/lib/libqgis_core.so.3.15.0
#47 0x00007f6e1650db62 in QCoreApplication::notifyInternal2(QObject*,
QEvent*) () at /lib/x86_64-linux-gnu/libQt5Core.so.5
#48 0x00007f6e16fac696 in QApplicationPrivate::sendMouseEvent(QWidget*,
QMouseEvent*, QWidget*, QWidget*, QWidget**, QPointer<QWidget>&, bool,
bool) () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
#49 0x00007f6e1700095e in  () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
#50 0x00007f6e170037ae in  () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
#51 0x00007f6e16fa803f in QApplicationPrivate::notify_helper(QObject*,
QEvent*) () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
#52 0x00007f6e14ce67fb in QgsApplication::notify(QObject*, QEvent*) ()
at /home/matteo/dev/qgis-master/output/lib/libqgis_core.so.3.15.0
#53 0x00007f6e1650db62 in QCoreApplication::notifyInternal2(QObject*,
QEvent*) () at /lib/x86_64-linux-gnu/libQt5Core.so.5
#54 0x00007f6e168d545b in
QGuiApplicationPrivate::processMouseEvent(QWindowSystemInterfacePrivate::MouseEvent*)
() at /lib/x86_64-linux-gnu/libQt5Gui.so.5
#55 0x00007f6e168abc0b in
QWindowSystemInterface::sendWindowSystemEvents(QFlags<QEventLoop::ProcessEventsFlag>)
() at /lib/x86_64-linux-gnu/libQt5Gui.so.5
#56 0x00007f6e04b50b6a in  () at /lib/x86_64-linux-gnu/libQt5XcbQpa.so.5
#57 0x00007f6e0c3855fd in g_main_context_dispatch () at
/lib/x86_64-linux-gnu/libglib-2.0.so.0
#58 0x00007f6e0c385880 in  () at /lib/x86_64-linux-gnu/libglib-2.0.so.0
#59 0x00007f6e0c38590f in g_main_context_iteration () at
/lib/x86_64-linux-gnu/libglib-2.0.so.0
#60 0x00007f6e165632ff in
QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>)
() at /lib/x86_64-linux-gnu/libQt5Core.so.5
#61 0x00007f6e1650c4db in
QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () at
/lib/x86_64-linux-gnu/libQt5Core.so.5
#62 0x00007f6e16514782 in QCoreApplication::exec() () at
/lib/x86_64-linux-gnu/libQt5Core.so.5
#63 0x000055f309261555 in main ()
[Inferior 1 (process 48501) detached]
gdb returned 0
Aborted


Any suggestion?

Cheers and thanks

Matteo


From rdmailings at duif.net  Thu Sep  3 04:01:12 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 3 Sep 2020 13:01:12 +0200
Subject: [QGIS-Developer] DB Manager makes QGSI crashing
In-Reply-To: <5db92270-2f50-6b93-9513-b3e6179dd6e3@gmail.com>
References: <5db92270-2f50-6b93-9513-b3e6179dd6e3@gmail.com>
Message-ID: <6d347417-dbfa-0790-9cfd-9cc94293d027@duif.net>

Hi Matteo,

see https://github.com/qgis/QGIS/issues/38393

Regards,

Richard Duivenvoorde

On 9/3/20 11:29 AM, matteo wrote:
> Hi all,
> 
> with a fresh new compiled version of QGIS on Debian, I can open DB
> Manager but when I try to expand a PostGIS DB, QGIS crashes with this error:
> 
> QGIS died on signal 11[New LWP 48502]
> [New LWP 48503]
> [New LWP 48504]
> [New LWP 48505]
> [New LWP 48507]
> [New LWP 48508]
> [New LWP 48509]
> [New LWP 48510]
> [New LWP 48511]
> [New LWP 48512]
> [New LWP 48513]
> [New LWP 48514]
> [New LWP 48515]
> [New LWP 48516]
> [New LWP 48517]
> [New LWP 48518]
> [New LWP 48519]
> [New LWP 48520]
> [New LWP 48521]
> [New LWP 48522]
> [New LWP 48523]
> [New LWP 48524]
> [New LWP 48525]
> [New LWP 48526]
> [New LWP 48528]
> [New LWP 48535]
> [New LWP 48536]
> [New LWP 48537]
> [New LWP 48538]
> [New LWP 48539]
> [New LWP 48540]
> [New LWP 48541]
> [New LWP 48542]
> [New LWP 48543]
> [New LWP 48544]
> [Thread debugging using libthread_db enabled]
> Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
> 0x00007f6e13e942c7 in __GI___wait4 (pid=48546, stat_loc=0x7ffd9cf84e54,
> options=0, usage=0x0) at ../sysdeps/unix/sysv/linux/wait4.c:27
> 27	../sysdeps/unix/sysv/linux/wait4.c: No such file or directory.
> [Current thread is 1 (Thread 0x7f6e04fa6f40 (LWP 48501))]
> #0  0x00007f6e13e942c7 in __GI___wait4 (pid=48546,
> stat_loc=0x7ffd9cf84e54, options=0, usage=0x0) at
> ../sysdeps/unix/sysv/linux/wait4.c:27
> #1  0x000055f30925affb in qgisCrash(int) ()
> #2  0x00007f6e13e04e30 in <signal handler called> () at
> /lib/x86_64-linux-gnu/libc.so.6
> #3  __strlen_avx2 () at ../sysdeps/x86_64/multiarch/strlen-avx2.S:65
> #4  0x00007f6d495053b9 in  () at
> /usr/lib/python3/dist-packages/PyQt5/QtCore.cpython-38-x86_64-linux-gnu.so
> #5  0x00007f6d497589c7 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #6  0x00007f6d49759817 in _PyObject_MakeTpCall () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #7  0x00007f6d49734cd3 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #8  0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #9  0x00007f6d49831ebf in _PyEval_EvalCodeWithName () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #10 0x00007f6d49758b61 in _PyFunction_Vectorcall () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #11 0x00007f6d4975a79a in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #12 0x00007f6d49734c4d in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #13 0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #14 0x00007f6d49831ebf in _PyEval_EvalCodeWithName () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #15 0x00007f6d49758b61 in _PyFunction_Vectorcall () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #16 0x00007f6d4975a79a in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #17 0x00007f6d49734c4d in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #18 0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #19 0x00007f6d4972a073 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #20 0x00007f6d4975a79a in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #21 0x00007f6d49734c4d in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #22 0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #23 0x00007f6d49831ebf in _PyEval_EvalCodeWithName () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #24 0x00007f6d49758b61 in _PyFunction_Vectorcall () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #25 0x00007f6d4975a79a in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #26 0x00007f6d49734c4d in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #27 0x00007f6d497328f9 in _PyEval_EvalFrameDefault () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #28 0x00007f6d4972a073 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #29 0x00007f6d4975a713 in  () at /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #30 0x00007f6d4975913c in PyVectorcall_Call () at
> /lib/x86_64-linux-gnu/libpython3.8.so.1.0
> #31 0x00007f6d8be67dda in  () at
> /usr/lib/python3/dist-packages/sip.cpython-38-x86_64-linux-gnu.so
> #32 0x00007f6d8be68009 in  () at
> /usr/lib/python3/dist-packages/sip.cpython-38-x86_64-linux-gnu.so
> #33 0x00007f6d494608bf in  () at
> /usr/lib/python3/dist-packages/PyQt5/QtCore.cpython-38-x86_64-linux-gnu.so
> #34 0x00007f6d4957ca60 in  () at
> /usr/lib/python3/dist-packages/PyQt5/QtCore.cpython-38-x86_64-linux-gnu.so
> #35 0x00007f6e1726d92a in QTreeViewPrivate::layout(int, bool, bool) ()
> at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #36 0x00007f6e17270504 in QTreeViewPrivate::expand(int, bool) () at
> /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #37 0x00007f6e17271dc6 in
> QTreeViewPrivate::expandOrCollapseItemAtPos(QPoint const&) () at
> /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #38 0x00007f6e172745ad in QTreeView::mousePressEvent(QMouseEvent*) () at
> /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #39 0x00007f6d46ccf003 in  () at
> /usr/lib/python3/dist-packages/PyQt5/QtWidgets.cpython-38-x86_64-linux-gnu.so
> #40 0x00007f6e16fe852e in QWidget::event(QEvent*) () at
> /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #41 0x00007f6e1708fd4e in QFrame::event(QEvent*) () at
> /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #42 0x00007f6d46cd0ec3 in  () at
> /usr/lib/python3/dist-packages/PyQt5/QtWidgets.cpython-38-x86_64-linux-gnu.so
> #43 0x00007f6e1650d87b in
> QCoreApplicationPrivate::sendThroughObjectEventFilters(QObject*,
> QEvent*) () at /lib/x86_64-linux-gnu/libQt5Core.so.5
> #44 0x00007f6e16fa802e in QApplicationPrivate::notify_helper(QObject*,
> QEvent*) () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #45 0x00007f6e16fad781 in QApplication::notify(QObject*, QEvent*) () at
> /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #46 0x00007f6e14ce67fb in QgsApplication::notify(QObject*, QEvent*) ()
> at /home/matteo/dev/qgis-master/output/lib/libqgis_core.so.3.15.0
> #47 0x00007f6e1650db62 in QCoreApplication::notifyInternal2(QObject*,
> QEvent*) () at /lib/x86_64-linux-gnu/libQt5Core.so.5
> #48 0x00007f6e16fac696 in QApplicationPrivate::sendMouseEvent(QWidget*,
> QMouseEvent*, QWidget*, QWidget*, QWidget**, QPointer<QWidget>&, bool,
> bool) () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #49 0x00007f6e1700095e in  () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #50 0x00007f6e170037ae in  () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #51 0x00007f6e16fa803f in QApplicationPrivate::notify_helper(QObject*,
> QEvent*) () at /lib/x86_64-linux-gnu/libQt5Widgets.so.5
> #52 0x00007f6e14ce67fb in QgsApplication::notify(QObject*, QEvent*) ()
> at /home/matteo/dev/qgis-master/output/lib/libqgis_core.so.3.15.0
> #53 0x00007f6e1650db62 in QCoreApplication::notifyInternal2(QObject*,
> QEvent*) () at /lib/x86_64-linux-gnu/libQt5Core.so.5
> #54 0x00007f6e168d545b in
> QGuiApplicationPrivate::processMouseEvent(QWindowSystemInterfacePrivate::MouseEvent*)
> () at /lib/x86_64-linux-gnu/libQt5Gui.so.5
> #55 0x00007f6e168abc0b in
> QWindowSystemInterface::sendWindowSystemEvents(QFlags<QEventLoop::ProcessEventsFlag>)
> () at /lib/x86_64-linux-gnu/libQt5Gui.so.5
> #56 0x00007f6e04b50b6a in  () at /lib/x86_64-linux-gnu/libQt5XcbQpa.so.5
> #57 0x00007f6e0c3855fd in g_main_context_dispatch () at
> /lib/x86_64-linux-gnu/libglib-2.0.so.0
> #58 0x00007f6e0c385880 in  () at /lib/x86_64-linux-gnu/libglib-2.0.so.0
> #59 0x00007f6e0c38590f in g_main_context_iteration () at
> /lib/x86_64-linux-gnu/libglib-2.0.so.0
> #60 0x00007f6e165632ff in
> QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>)
> () at /lib/x86_64-linux-gnu/libQt5Core.so.5
> #61 0x00007f6e1650c4db in
> QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () at
> /lib/x86_64-linux-gnu/libQt5Core.so.5
> #62 0x00007f6e16514782 in QCoreApplication::exec() () at
> /lib/x86_64-linux-gnu/libQt5Core.so.5
> #63 0x000055f309261555 in main ()
> [Inferior 1 (process 48501) detached]
> gdb returned 0
> Aborted
> 
> 
> Any suggestion?
> 
> Cheers and thanks
> 
> Matteo
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From matteo.ghetta at gmail.com  Thu Sep  3 04:15:12 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Thu, 3 Sep 2020 13:15:12 +0200
Subject: [QGIS-Developer] DB Manager makes QGSI crashing
In-Reply-To: <6d347417-dbfa-0790-9cfd-9cc94293d027@duif.net>
References: <5db92270-2f50-6b93-9513-b3e6179dd6e3@gmail.com>
 <6d347417-dbfa-0790-9cfd-9cc94293d027@duif.net>
Message-ID: <76d1b0b6-ff9b-b187-b104-47c726f4bb18@gmail.com>

thanks Richard, exact same issue

Cheers and sorry for the noise

Matteo

From tim at kartoza.com  Thu Sep  3 14:02:12 2020
From: tim at kartoza.com (Tim Sutton)
Date: Thu, 3 Sep 2020 22:02:12 +0100
Subject: [QGIS-Developer] QGIS Debug build fails to launch in QtCreator
Message-ID: <CAES-DZSkwzfi60bia0rsjgb5YCZ+UQHCr8aspA+0c3UiGBtm0A@mail.gmail.com>

Dear QGIS Developers

I am trying to run QGIS in debug mode in Qt-Creator. When I launch the QGIS
executable from QtCreator, I can see the application starting up but then
after a short time it crashes out. This happens both when I press the green
'Run' triangle icon and when I press the green 'Start Debugging of Target
Project' triangle icon.

I am building on pop_os! (essentially Ubuntu 20.04, 64 bit) using GCC
without CCache and I have CMAKE_BUILD_TYPE set to Debug.

After starting QGIS it thinks for a while and then dies with the following
(full log of messages here [1]).

21:21:14: Debugging starts
src/app/main.cpp:505 : (main) [0ms] Starting qgis main
src/core/qgsmessagelog.cpp:29 : (logMessage) [379ms] 2020-09-03T21:21:45
[1] Successfully loaded globalsettingsfile path:
/home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/qgis_global_settings.ini
src/core/qgscolorramp.cpp:732 : (loadFile) [103ms] filename=
/home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/cpt-city-qgis-min/grass/elevation.svg
loaded=0
QGIS died on signal 11Could not attach to process.  If your uid matches the
uid of the target
process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or try
again as the root user.  For more details, see /etc/sysctl.d/10-ptrace.conf
warning: process 223467 is already traced by process 223447
ptrace: Operation not permitted.
No thread selected
No stack.
gdb returned 256
21:30:39: Debugging has finished



When I googled the ptrace error message above I found this StackOverflow
post[2] which seems to address the same issue. However, even after trying
all the various hints listed there, I still have the crash whenever I try
to launch QGIS in debug mode, or outside of a debugger.

Has anyone else experienced this? Can you help me fix it?

Many thanks!

Regards

Tim


[1] https://gist.github.com/timlinux/ac7468675e08f18428e3fe60d7e9633c
[2]
https://stackoverflow.com/questions/22120711/qt-creator-ptrace-operation-not-permitted-what-is-the-permanent-solution/30486572



-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200903/51cc3b22/attachment.html>

From tim at kartoza.com  Thu Sep  3 15:48:25 2020
From: tim at kartoza.com (Tim Sutton)
Date: Thu, 3 Sep 2020 23:48:25 +0100
Subject: [QGIS-Developer] QGIS Debug build fails to launch in QtCreator
In-Reply-To: <CAES-DZSkwzfi60bia0rsjgb5YCZ+UQHCr8aspA+0c3UiGBtm0A@mail.gmail.com>
References: <CAES-DZSkwzfi60bia0rsjgb5YCZ+UQHCr8aspA+0c3UiGBtm0A@mail.gmail.com>
Message-ID: <CAES-DZQmN7v9sVdg+Fh=fX1Ody4XCMqV97bpO7bVr7Vum+cfmg@mail.gmail.com>

Hi

By the way poking around with it a bit more it seems to be crashing on this
line @Nyal:

39fbc2ac331 src/core/qgsproject.cpp (Nyall Dawson               2020-08-31
10:30:20 +1000)   mMainAnnotationLayer->setTransformContext( context );

Regards

Tim


On Thu, Sep 3, 2020 at 10:02 PM Tim Sutton <tim at kartoza.com> wrote:

> Dear QGIS Developers
>
> I am trying to run QGIS in debug mode in Qt-Creator. When I launch the
> QGIS executable from QtCreator, I can see the application starting up but
> then after a short time it crashes out. This happens both when I press the
> green 'Run' triangle icon and when I press the green 'Start Debugging of
> Target Project' triangle icon.
>
> I am building on pop_os! (essentially Ubuntu 20.04, 64 bit) using GCC
> without CCache and I have CMAKE_BUILD_TYPE set to Debug.
>
> After starting QGIS it thinks for a while and then dies with the following
> (full log of messages here [1]).
>
> 21:21:14: Debugging starts
> src/app/main.cpp:505 : (main) [0ms] Starting qgis main
> src/core/qgsmessagelog.cpp:29 : (logMessage) [379ms] 2020-09-03T21:21:45
> [1] Successfully loaded globalsettingsfile path:
> /home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/qgis_global_settings.ini
> src/core/qgscolorramp.cpp:732 : (loadFile) [103ms] filename=
> /home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/cpt-city-qgis-min/grass/elevation.svg
> loaded=0
> QGIS died on signal 11Could not attach to process.  If your uid matches
> the uid of the target
> process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or try
> again as the root user.  For more details, see /etc/sysctl.d/10-ptrace.conf
> warning: process 223467 is already traced by process 223447
> ptrace: Operation not permitted.
> No thread selected
> No stack.
> gdb returned 256
> 21:30:39: Debugging has finished
>
>
>
> When I googled the ptrace error message above I found this StackOverflow
> post[2] which seems to address the same issue. However, even after trying
> all the various hints listed there, I still have the crash whenever I try
> to launch QGIS in debug mode, or outside of a debugger.
>
> Has anyone else experienced this? Can you help me fix it?
>
> Many thanks!
>
> Regards
>
> Tim
>
>
> [1] https://gist.github.com/timlinux/ac7468675e08f18428e3fe60d7e9633c
> [2]
> https://stackoverflow.com/questions/22120711/qt-creator-ptrace-operation-not-permitted-what-is-the-permanent-solution/30486572
>
>
>
> --
>
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
>


-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200903/f03a067e/attachment.html>

From nyall.dawson at gmail.com  Thu Sep  3 16:13:14 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 4 Sep 2020 09:13:14 +1000
Subject: [QGIS-Developer] Issue with determining Symbol size - Bug?
In-Reply-To: <CABPxTTr40Wn9+9dAj7Cr4ZpEeTK9rSWTazc3rwjKZaJu_mVfEQ@mail.gmail.com>
References: <CABPxTTp=gNDLQDHpL2WSk5WU5wQPCfDfXXp5=rS62v2RneZvgw@mail.gmail.com>
 <CAB28AsgenkxAt5f3b2-DJO-Yd=C+F6-8NN7pNqhRhTAocXbRRg@mail.gmail.com>
 <CABPxTTr40Wn9+9dAj7Cr4ZpEeTK9rSWTazc3rwjKZaJu_mVfEQ@mail.gmail.com>
Message-ID: <CAB28AsgWe62gLekKTFBO8rYR7k28rSnPj4YvGZW2kZRy4Uiexg@mail.gmail.com>

On Thu, 3 Sep 2020 at 00:06, C Hamilton <adenaculture at gmail.com> wrote:
>
> Nyall,
>
> Thanks. This almost gets the right answer. QgsSymbolLayerUtils::estimateMaxSymbolBleed is returning 0 as its value.  I'm not sure what the problem is with it. bounds() seems to work for small symbols which is probably all I'll need, but if the symbol is very large with a large border and join style set to miter, the bounding box it returns is a little too small. My example used an excessively large icon and large border which probably would not be used in any real project.

Hm - not sure what your issue with estimateMaxSymbolBleed is. Are you
using data defined properties at all?

Regarding the miter question -- that's something which none of the
symbol bounds checking functions currently available account for.

Nyall

>
> Calvin
>
> On Tue, Sep 1, 2020 at 6:39 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Wed, 2 Sep 2020 at 03:39, C Hamilton <adenaculture at gmail.com> wrote:
>> >
>> > I am trying to calculate the size of a single symbol in pixels using:
>> >
>> > canvas = iface.mapCanvas()
>> > context = QgsRenderContext.fromMapSettings(canvas.mapSettings())
>> > layer = iface.activeLayer()
>> > rnd = layer.renderer()
>> > sym = rnd.symbol()
>> > scaled_size_in_pixels = context.convertToPainterUnits(
>> >     sym.size(),
>> >     sym.sizeUnit(),
>> >     sym.sizeMapUnitScale() )
>> >
>> > The last line can also be calculated by:
>> >
>> >   scaled_size_in_pixels = sym.size(context)
>> >
>> > I am finding that this is returning the size of the filled area of the symbol, but it does not include the border. Is this a bug or do I need to add something additional to include the border?
>>
>> You can use  QgsSymbolLayerUtils::estimateMaxSymbolBleed if you're
>> wanting to calculate the "maximum" bounding box of a rendered symbol.
>> That includes any stroke/offset/other settings which also affect the
>> rendered bounds.
>>
>> There's also QgsMarkerSymbol::bounds which returns an approximate
>> bounding box of a marker symbol, which also accounts for things like
>> the stroke and offset.
>>
>> Nyall
>>
>>
>> >
>> > Thanks,
>> >
>> > Calvin
>> >
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From tim at kartoza.com  Thu Sep  3 16:43:03 2020
From: tim at kartoza.com (Tim Sutton)
Date: Fri, 4 Sep 2020 00:43:03 +0100
Subject: [QGIS-Developer] QGIS Debug build fails to launch in QtCreator
In-Reply-To: <CAES-DZQmN7v9sVdg+Fh=fX1Ody4XCMqV97bpO7bVr7Vum+cfmg@mail.gmail.com>
References: <CAES-DZSkwzfi60bia0rsjgb5YCZ+UQHCr8aspA+0c3UiGBtm0A@mail.gmail.com>
 <CAES-DZQmN7v9sVdg+Fh=fX1Ody4XCMqV97bpO7bVr7Vum+cfmg@mail.gmail.com>
Message-ID: <CAES-DZT_UO4Cy+cZs1hBHmx_ZF=PE-+s-azxOE6urp7jO-TAAw@mail.gmail.com>

Sorry my second message on this thread was probably a red herring - if I
run as sudo QGIS starts fine....

Regards

Tim

On Thu, Sep 3, 2020 at 11:48 PM Tim Sutton <tim at kartoza.com> wrote:

> Hi
>
> By the way poking around with it a bit more it seems to be crashing on
> this line @Nyal:
>
> 39fbc2ac331 src/core/qgsproject.cpp (Nyall Dawson               2020-08-31
> 10:30:20 +1000)   mMainAnnotationLayer->setTransformContext( context );
>
> Regards
>
> Tim
>
>
> On Thu, Sep 3, 2020 at 10:02 PM Tim Sutton <tim at kartoza.com> wrote:
>
>> Dear QGIS Developers
>>
>> I am trying to run QGIS in debug mode in Qt-Creator. When I launch the
>> QGIS executable from QtCreator, I can see the application starting up but
>> then after a short time it crashes out. This happens both when I press the
>> green 'Run' triangle icon and when I press the green 'Start Debugging of
>> Target Project' triangle icon.
>>
>> I am building on pop_os! (essentially Ubuntu 20.04, 64 bit) using GCC
>> without CCache and I have CMAKE_BUILD_TYPE set to Debug.
>>
>> After starting QGIS it thinks for a while and then dies with the
>> following (full log of messages here [1]).
>>
>> 21:21:14: Debugging starts
>> src/app/main.cpp:505 : (main) [0ms] Starting qgis main
>> src/core/qgsmessagelog.cpp:29 : (logMessage) [379ms] 2020-09-03T21:21:45
>> [1] Successfully loaded globalsettingsfile path:
>> /home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/qgis_global_settings.ini
>> src/core/qgscolorramp.cpp:732 : (loadFile) [103ms] filename=
>> /home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/cpt-city-qgis-min/grass/elevation.svg
>> loaded=0
>> QGIS died on signal 11Could not attach to process.  If your uid matches
>> the uid of the target
>> process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or try
>> again as the root user.  For more details, see
>> /etc/sysctl.d/10-ptrace.conf
>> warning: process 223467 is already traced by process 223447
>> ptrace: Operation not permitted.
>> No thread selected
>> No stack.
>> gdb returned 256
>> 21:30:39: Debugging has finished
>>
>>
>>
>> When I googled the ptrace error message above I found this StackOverflow
>> post[2] which seems to address the same issue. However, even after trying
>> all the various hints listed there, I still have the crash whenever I try
>> to launch QGIS in debug mode, or outside of a debugger.
>>
>> Has anyone else experienced this? Can you help me fix it?
>>
>> Many thanks!
>>
>> Regards
>>
>> Tim
>>
>>
>> [1] https://gist.github.com/timlinux/ac7468675e08f18428e3fe60d7e9633c
>> [2]
>> https://stackoverflow.com/questions/22120711/qt-creator-ptrace-operation-not-permitted-what-is-the-permanent-solution/30486572
>>
>>
>>
>> --
>>
>> ------------------------------------------------------------------------------------------
>>
>> Tim Sutton
>> Visit http://kartoza.com to find out about open source:
>>  * Desktop GIS programming services
>>  * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Skype: timlinux Irc: timlinux on #qgis at freenode.net
>> Tim is a member of the QGIS Project Steering Committee
>>
>> -------------------------------------------------------------------------------------------
>> Kartoza is a merger between Linfiniti and Afrispatial
>>
>
>
> --
>
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
>


-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/d8e5e6fd/attachment.html>

From nyall.dawson at gmail.com  Thu Sep  3 16:45:39 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 4 Sep 2020 09:45:39 +1000
Subject: [QGIS-Developer] QGIS Debug build fails to launch in QtCreator
In-Reply-To: <CAES-DZT_UO4Cy+cZs1hBHmx_ZF=PE-+s-azxOE6urp7jO-TAAw@mail.gmail.com>
References: <CAES-DZSkwzfi60bia0rsjgb5YCZ+UQHCr8aspA+0c3UiGBtm0A@mail.gmail.com>
 <CAES-DZQmN7v9sVdg+Fh=fX1Ody4XCMqV97bpO7bVr7Vum+cfmg@mail.gmail.com>
 <CAES-DZT_UO4Cy+cZs1hBHmx_ZF=PE-+s-azxOE6urp7jO-TAAw@mail.gmail.com>
Message-ID: <CAB28AsjL60MzKZ5kJQwzLGAmCk5ZJ35qEKG4j_3yHqFF03YtTQ@mail.gmail.com>

On Fri, 4 Sep 2020 at 09:43, Tim Sutton <tim at kartoza.com> wrote:
>
> Sorry my second message on this thread was probably a red herring - if I run as sudo QGIS starts fine....

Grab this fix: https://github.com/qgis/QGIS/pull/38593

Nyall

>
> Regards
>
> Tim
>
> On Thu, Sep 3, 2020 at 11:48 PM Tim Sutton <tim at kartoza.com> wrote:
>>
>> Hi
>>
>> By the way poking around with it a bit more it seems to be crashing on this line @Nyal:
>>
>> 39fbc2ac331 src/core/qgsproject.cpp (Nyall Dawson               2020-08-31 10:30:20 +1000)   mMainAnnotationLayer->setTransformContext( context );
>>
>> Regards
>>
>> Tim
>>
>>
>> On Thu, Sep 3, 2020 at 10:02 PM Tim Sutton <tim at kartoza.com> wrote:
>>>
>>> Dear QGIS Developers
>>>
>>> I am trying to run QGIS in debug mode in Qt-Creator. When I launch the QGIS executable from QtCreator, I can see the application starting up but then after a short time it crashes out. This happens both when I press the green 'Run' triangle icon and when I press the green 'Start Debugging of Target Project' triangle icon.
>>>
>>> I am building on pop_os! (essentially Ubuntu 20.04, 64 bit) using GCC without CCache and I have CMAKE_BUILD_TYPE set to Debug.
>>>
>>> After starting QGIS it thinks for a while and then dies with the following (full log of messages here [1]).
>>>
>>> 21:21:14: Debugging starts
>>> src/app/main.cpp:505 : (main) [0ms] Starting qgis main
>>> src/core/qgsmessagelog.cpp:29 : (logMessage) [379ms] 2020-09-03T21:21:45 [1] Successfully loaded globalsettingsfile path: /home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/qgis_global_settings.ini
>>> src/core/qgscolorramp.cpp:732 : (loadFile) [103ms] filename= /home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/cpt-city-qgis-min/grass/elevation.svg loaded=0
>>> QGIS died on signal 11Could not attach to process.  If your uid matches the uid of the target
>>> process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or try
>>> again as the root user.  For more details, see /etc/sysctl.d/10-ptrace.conf
>>> warning: process 223467 is already traced by process 223447
>>> ptrace: Operation not permitted.
>>> No thread selected
>>> No stack.
>>> gdb returned 256
>>> 21:30:39: Debugging has finished
>>>
>>>
>>>
>>> When I googled the ptrace error message above I found this StackOverflow post[2] which seems to address the same issue. However, even after trying all the various hints listed there, I still have the crash whenever I try to launch QGIS in debug mode, or outside of a debugger.
>>>
>>> Has anyone else experienced this? Can you help me fix it?
>>>
>>> Many thanks!
>>>
>>> Regards
>>>
>>> Tim
>>>
>>>
>>> [1] https://gist.github.com/timlinux/ac7468675e08f18428e3fe60d7e9633c
>>> [2]https://stackoverflow.com/questions/22120711/qt-creator-ptrace-operation-not-permitted-what-is-the-permanent-solution/30486572
>>>
>>>
>>>
>>> --
>>> ------------------------------------------------------------------------------------------
>>>
>>> Tim Sutton
>>> Visit http://kartoza.com to find out about open source:
>>>  * Desktop GIS programming services
>>>  * Geospatial web development
>>> * GIS Training
>>> * Consulting Services
>>> Skype: timlinux Irc: timlinux on #qgis at freenode.net
>>> Tim is a member of the QGIS Project Steering Committee
>>> -------------------------------------------------------------------------------------------
>>> Kartoza is a merger between Linfiniti and Afrispatial
>>
>>
>>
>> --
>> ------------------------------------------------------------------------------------------
>>
>> Tim Sutton
>> Visit http://kartoza.com to find out about open source:
>>  * Desktop GIS programming services
>>  * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Skype: timlinux Irc: timlinux on #qgis at freenode.net
>> Tim is a member of the QGIS Project Steering Committee
>> -------------------------------------------------------------------------------------------
>> Kartoza is a merger between Linfiniti and Afrispatial
>
>
>
> --
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From sohini.goswami at rpsg.in  Fri Sep  4 01:33:59 2020
From: sohini.goswami at rpsg.in (SOHINI GOSWAMI)
Date: Fri, 4 Sep 2020 14:03:59 +0530
Subject: [QGIS-Developer] Plugin Development for accessing PostgresSQL
 Database in a QtableWidget in QT Designer
Message-ID: <CAKG1rmVvzmNF1_Gz5TOXfAu7FgJriyuSv2RvqOZw5EZ4+OphHQ@mail.gmail.com>

Dear Developers,
I would request to kindly help me with building a plugin using Qtablewidget
in QT designer. The table would retrieve a postgresql using a query
[Depending on the date of the date] . I have created the UI file in QT
designer but unable to fetch the data from the buttons click triggers in my
main python plugin file. It would be great if I could get a complete guide
of writing methods on onclick -buttons and retrive the data from Postgres
database.
*Sample  Image of the plugin attempted :*

[image: image.png]

-- 
*Sohini Goswami*
*Executive ,GIS Cell*
*Ph: +918169824459*
*CESC Ventures.*


[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
Sender
notified by
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
09/04/20,
02:03:36 PM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/5a849bbf/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 28311 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/5a849bbf/attachment-0001.png>

From tim at kartoza.com  Fri Sep  4 02:30:34 2020
From: tim at kartoza.com (Tim Sutton)
Date: Fri, 4 Sep 2020 10:30:34 +0100
Subject: [QGIS-Developer] QGIS Debug build fails to launch in QtCreator
In-Reply-To: <CAB28AsjL60MzKZ5kJQwzLGAmCk5ZJ35qEKG4j_3yHqFF03YtTQ@mail.gmail.com>
References: <CAES-DZSkwzfi60bia0rsjgb5YCZ+UQHCr8aspA+0c3UiGBtm0A@mail.gmail.com>
 <CAES-DZQmN7v9sVdg+Fh=fX1Ody4XCMqV97bpO7bVr7Vum+cfmg@mail.gmail.com>
 <CAES-DZT_UO4Cy+cZs1hBHmx_ZF=PE-+s-azxOE6urp7jO-TAAw@mail.gmail.com>
 <CAB28AsjL60MzKZ5kJQwzLGAmCk5ZJ35qEKG4j_3yHqFF03YtTQ@mail.gmail.com>
Message-ID: <CAES-DZSp_4pwsvs48d4xYojoFoqbFJPJ6MGXijuFSU9JVyACFQ@mail.gmail.com>

Hi

Thanks for the fix Nyall. Ok cool, thanks for the fix! Now I can run in non
debug mode. In debug mode I get a bunch of these popping up:

The inferior stopped because it received a signal from the operating system.


Signal name :

SIG33

Signal meaning :

Real-time event 33

The execution pointer is just pointing at some disassembled code like:

0x7fffeaf9e376  <+  534>        48 3d 00 f0 ff ff           cmp
 $0xfffffffffffff000,%rax

Which looks like it is a futex wait cancel something or other. If I click
OK then continue the debugger a bunch of times, eventually QGIS starts up.
Any idea how to make it move smoothly past those? I have disabled all
plugins and I still get the issue.












On Fri, Sep 4, 2020 at 12:45 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Fri, 4 Sep 2020 at 09:43, Tim Sutton <tim at kartoza.com> wrote:
> >
> > Sorry my second message on this thread was probably a red herring - if I
> run as sudo QGIS starts fine....
>
> Grab this fix: https://github.com/qgis/QGIS/pull/38593
>
> Nyall
>
> >
> > Regards
> >
> > Tim
> >
> > On Thu, Sep 3, 2020 at 11:48 PM Tim Sutton <tim at kartoza.com> wrote:
> >>
> >> Hi
> >>
> >> By the way poking around with it a bit more it seems to be crashing on
> this line @Nyal:
> >>
> >> 39fbc2ac331 src/core/qgsproject.cpp (Nyall Dawson
>  2020-08-31 10:30:20 +1000)   mMainAnnotationLayer->setTransformContext(
> context );
> >>
> >> Regards
> >>
> >> Tim
> >>
> >>
> >> On Thu, Sep 3, 2020 at 10:02 PM Tim Sutton <tim at kartoza.com> wrote:
> >>>
> >>> Dear QGIS Developers
> >>>
> >>> I am trying to run QGIS in debug mode in Qt-Creator. When I launch the
> QGIS executable from QtCreator, I can see the application starting up but
> then after a short time it crashes out. This happens both when I press the
> green 'Run' triangle icon and when I press the green 'Start Debugging of
> Target Project' triangle icon.
> >>>
> >>> I am building on pop_os! (essentially Ubuntu 20.04, 64 bit) using GCC
> without CCache and I have CMAKE_BUILD_TYPE set to Debug.
> >>>
> >>> After starting QGIS it thinks for a while and then dies with the
> following (full log of messages here [1]).
> >>>
> >>> 21:21:14: Debugging starts
> >>> src/app/main.cpp:505 : (main) [0ms] Starting qgis main
> >>> src/core/qgsmessagelog.cpp:29 : (logMessage) [379ms]
> 2020-09-03T21:21:45 [1] Successfully loaded globalsettingsfile path:
> /home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/qgis_global_settings.ini
> >>> src/core/qgscolorramp.cpp:732 : (loadFile) [103ms] filename=
> /home/timlinux/dev/cpp/QGIS-Debug-Build/output/data/resources/cpt-city-qgis-min/grass/elevation.svg
> loaded=0
> >>> QGIS died on signal 11Could not attach to process.  If your uid
> matches the uid of the target
> >>> process, check the setting of /proc/sys/kernel/yama/ptrace_scope, or
> try
> >>> again as the root user.  For more details, see
> /etc/sysctl.d/10-ptrace.conf
> >>> warning: process 223467 is already traced by process 223447
> >>> ptrace: Operation not permitted.
> >>> No thread selected
> >>> No stack.
> >>> gdb returned 256
> >>> 21:30:39: Debugging has finished
> >>>
> >>>
> >>>
> >>> When I googled the ptrace error message above I found this
> StackOverflow post[2] which seems to address the same issue. However, even
> after trying all the various hints listed there, I still have the crash
> whenever I try to launch QGIS in debug mode, or outside of a debugger.
> >>>
> >>> Has anyone else experienced this? Can you help me fix it?
> >>>
> >>> Many thanks!
> >>>
> >>> Regards
> >>>
> >>> Tim
> >>>
> >>>
> >>> [1] https://gist.github.com/timlinux/ac7468675e08f18428e3fe60d7e9633c
> >>> [2]
> https://stackoverflow.com/questions/22120711/qt-creator-ptrace-operation-not-permitted-what-is-the-permanent-solution/30486572
> >>>
> >>>
> >>>
> >>> --
> >>>
> ------------------------------------------------------------------------------------------
> >>>
> >>> Tim Sutton
> >>> Visit http://kartoza.com to find out about open source:
> >>>  * Desktop GIS programming services
> >>>  * Geospatial web development
> >>> * GIS Training
> >>> * Consulting Services
> >>> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> >>> Tim is a member of the QGIS Project Steering Committee
> >>>
> -------------------------------------------------------------------------------------------
> >>> Kartoza is a merger between Linfiniti and Afrispatial
> >>
> >>
> >>
> >> --
> >>
> ------------------------------------------------------------------------------------------
> >>
> >> Tim Sutton
> >> Visit http://kartoza.com to find out about open source:
> >>  * Desktop GIS programming services
> >>  * Geospatial web development
> >> * GIS Training
> >> * Consulting Services
> >> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> >> Tim is a member of the QGIS Project Steering Committee
> >>
> -------------------------------------------------------------------------------------------
> >> Kartoza is a merger between Linfiniti and Afrispatial
> >
> >
> >
> > --
> >
> ------------------------------------------------------------------------------------------
> >
> > Tim Sutton
> > Visit http://kartoza.com to find out about open source:
> >  * Desktop GIS programming services
> >  * Geospatial web development
> > * GIS Training
> > * Consulting Services
> > Skype: timlinux Irc: timlinux on #qgis at freenode.net
> > Tim is a member of the QGIS Project Steering Committee
> >
> -------------------------------------------------------------------------------------------
> > Kartoza is a merger between Linfiniti and Afrispatial
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/2349b1be/attachment.html>

From uclaros at gmail.com  Fri Sep  4 02:45:29 2020
From: uclaros at gmail.com (uclaros)
Date: Fri, 4 Sep 2020 02:45:29 -0700 (MST)
Subject: [QGIS-Developer] QGIS Debug build fails to launch in QtCreator
In-Reply-To: <CAES-DZSp_4pwsvs48d4xYojoFoqbFJPJ6MGXijuFSU9JVyACFQ@mail.gmail.com>
References: <CAES-DZSkwzfi60bia0rsjgb5YCZ+UQHCr8aspA+0c3UiGBtm0A@mail.gmail.com>
 <CAES-DZQmN7v9sVdg+Fh=fX1Ody4XCMqV97bpO7bVr7Vum+cfmg@mail.gmail.com>
 <CAES-DZT_UO4Cy+cZs1hBHmx_ZF=PE-+s-azxOE6urp7jO-TAAw@mail.gmail.com>
 <CAB28AsjL60MzKZ5kJQwzLGAmCk5ZJ35qEKG4j_3yHqFF03YtTQ@mail.gmail.com>
 <CAES-DZSp_4pwsvs48d4xYojoFoqbFJPJ6MGXijuFSU9JVyACFQ@mail.gmail.com>
Message-ID: <1599212729304-0.post@n6.nabble.com>

Hi Tim,
have a look at
http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-Qtcreator-debug-issues-td5389889.html
for a workaround.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From tim at kartoza.com  Fri Sep  4 04:09:33 2020
From: tim at kartoza.com (Tim Sutton)
Date: Fri, 4 Sep 2020 12:09:33 +0100
Subject: [QGIS-Developer] QGIS Debug build fails to launch in QtCreator
In-Reply-To: <1599212729304-0.post@n6.nabble.com>
References: <CAES-DZSkwzfi60bia0rsjgb5YCZ+UQHCr8aspA+0c3UiGBtm0A@mail.gmail.com>
 <CAES-DZQmN7v9sVdg+Fh=fX1Ody4XCMqV97bpO7bVr7Vum+cfmg@mail.gmail.com>
 <CAES-DZT_UO4Cy+cZs1hBHmx_ZF=PE-+s-azxOE6urp7jO-TAAw@mail.gmail.com>
 <CAB28AsjL60MzKZ5kJQwzLGAmCk5ZJ35qEKG4j_3yHqFF03YtTQ@mail.gmail.com>
 <CAES-DZSp_4pwsvs48d4xYojoFoqbFJPJ6MGXijuFSU9JVyACFQ@mail.gmail.com>
 <1599212729304-0.post@n6.nabble.com>
Message-ID: <CAES-DZTZWnoBhsyL_0NRtRO-sDVUFiq3hNAkdKhyWqguN3H2cQ@mail.gmail.com>

Ah Brilliant, thank you very much!

Regards

Tim

On Fri, Sep 4, 2020 at 10:45 AM uclaros <uclaros at gmail.com> wrote:

> Hi Tim,
> have a look at
>
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-Qtcreator-debug-issues-td5389889.html
> for a workaround.
>
>
>
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/6cfa8e59/attachment-0001.html>

From jesdial at gmail.com  Fri Sep  4 05:38:20 2020
From: jesdial at gmail.com (=?UTF-8?B?SmVzw7pzIGRlIERpZWdvIEFsYXJjw7Nu?=)
Date: Fri, 4 Sep 2020 14:38:20 +0200
Subject: [QGIS-Developer] Library for importing dwg
Message-ID: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>

Dear all

I would like to know which library is using QGIS for importing dwg files
(this functionality is accessible in *File >  Import/Export > Importing a
DXF or DWG file *).

I had supposed that this functionality was using the newly-developed OGR
CAD driver... But I have tried with ogr2ogr both command line and Python
console and dwg files are not supported (at least the same dwf file I am
able to import with the mentioned functionality).

Any help will be appreciated. Thank you in advance

Jesús de Diego

-- 
Jesús de Diego Alarcón
jesdial at gmail.com

"La vida es linda, lo malo es que muchos confunden lindo con fácil."
Mafalda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/3dc2127a/attachment.html>

From a.neumann at carto.net  Fri Sep  4 05:48:18 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 04 Sep 2020 14:48:18 +0200
Subject: [QGIS-Developer] Library for importing dwg
In-Reply-To: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
References: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
Message-ID: <a725be597ac66688a92267dfed4a7a16@carto.net>

Hi, 

It is using the libdxfrw library. 

Jürgen might have forked/patched it though, because activity in the
original project is basically stalled -  I think you can find our
version here: https://github.com/qgis/QGIS/tree/master/external/libdxfrw


Greetings, 

Andreas 

On 2020-09-04 14:38, Jesús de Diego Alarcón wrote:

> Dear all 
> 
> I would like to know which library is using QGIS for importing dwg files (this functionality is accessible in _File >  Import/Export > Importing a DXF or DWG file _). 
> 
> I had supposed that this functionality was using the newly-developed OGR CAD driver... But I have tried with ogr2ogr both command line and Python console and dwg files are not supported (at least the same dwf file I am able to import with the mentioned functionality). 
> 
> Any help will be appreciated. Thank you in advance 
> 
> Jesús de Diego
> -- 
> Jesús de Diego Alarcón
> jesdial at gmail.com
> 
> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
> Mafalda 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/3abbc02f/attachment.html>

From jef at norbit.de  Fri Sep  4 05:48:35 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 4 Sep 2020 14:48:35 +0200
Subject: [QGIS-Developer] Library for importing dwg
In-Reply-To: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
References: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
Message-ID: <20200904124835.qpchirxc63gsizr7@norbit.de>

Hi Jesús,

On Fri, 04. Sep 2020 at 14:38:20 +0200, Jesús de Diego Alarcón wrote:
> I had supposed that this functionality was using the newly-developed OGR
> CAD driver... But I have tried with ogr2ogr both command line and Python
> console and dwg files are not supported (at least the same dwf file I am
> able to import with the mentioned functionality).

libdxfrw [0]


Jürgen


[0] https://github.com/qgis/QGIS/tree/master/external/libdxfrw

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/c9979352/attachment.sig>

From jesdial at gmail.com  Fri Sep  4 08:43:10 2020
From: jesdial at gmail.com (=?UTF-8?B?SmVzw7pzIGRlIERpZWdvIEFsYXJjw7Nu?=)
Date: Fri, 4 Sep 2020 17:43:10 +0200
Subject: [QGIS-Developer] Library for importing dwg
In-Reply-To: <a725be597ac66688a92267dfed4a7a16@carto.net>
References: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
 <a725be597ac66688a92267dfed4a7a16@carto.net>
Message-ID: <CAE_OVyRFLmShYcqfFpR5RWmLu5_z4-dBZj6=DCjxktj8hqz_Hw@mail.gmail.com>

Hi Andreas

First of all, thank you so much for your (quick) answer. I will take a look
but it seems that libdxfrw is working for *dxf files, not dwg*...Any case I
will take a look.

Thanks again

Jesús de Diego

El vie., 4 sept. 2020 a las 14:48, Andreas Neumann (<a.neumann at carto.net>)
escribió:

> Hi,
>
> It is using the libdxfrw library.
>
> Jürgen might have forked/patched it though, because activity in the
> original project is basically stalled -  I think you can find our version
> here: https://github.com/qgis/QGIS/tree/master/external/libdxfrw
>
> Greetings,
>
> Andreas
>
> On 2020-09-04 14:38, Jesús de Diego Alarcón wrote:
>
> Dear all
>
> I would like to know which library is using QGIS for importing dwg files
> (this functionality is accessible in *File >  Import/Export > Importing a
> DXF or DWG file *).
>
> I had supposed that this functionality was using the newly-developed OGR
> CAD driver... But I have tried with ogr2ogr both command line and Python
> console and dwg files are not supported (at least the same dwf file I am
> able to import with the mentioned functionality).
>
> Any help will be appreciated. Thank you in advance
>
> Jesús de Diego
>
> --
> Jesús de Diego Alarcón
> jesdial at gmail.com
>
> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
> Mafalda
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>

-- 
Jesús de Diego Alarcón
jesdial at gmail.com

"La vida es linda, lo malo es que muchos confunden lindo con fácil."
Mafalda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/a16834d2/attachment.html>

From adenaculture at gmail.com  Fri Sep  4 09:16:26 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 4 Sep 2020 12:16:26 -0400
Subject: [QGIS-Developer] Issue with determining Symbol size - Bug?
In-Reply-To: <CAB28AsgWe62gLekKTFBO8rYR7k28rSnPj4YvGZW2kZRy4Uiexg@mail.gmail.com>
References: <CABPxTTp=gNDLQDHpL2WSk5WU5wQPCfDfXXp5=rS62v2RneZvgw@mail.gmail.com>
 <CAB28AsgenkxAt5f3b2-DJO-Yd=C+F6-8NN7pNqhRhTAocXbRRg@mail.gmail.com>
 <CABPxTTr40Wn9+9dAj7Cr4ZpEeTK9rSWTazc3rwjKZaJu_mVfEQ@mail.gmail.com>
 <CAB28AsgWe62gLekKTFBO8rYR7k28rSnPj4YvGZW2kZRy4Uiexg@mail.gmail.com>
Message-ID: <CABPxTTp8mbFbMAx42aWiROKUnnU_upbaTXXTzGeEQYAWg-6Gsg@mail.gmail.com>

Try running this code. Make sure you have a point layer selected that is
using single symbol symbology. The value that is returned is 0. In my case
the units for the symbol are millimeters and a value of 5. I am using QGIS
3.14.15 on windows.

canvas = iface.mapCanvas()
context = QgsRenderContext.fromMapSettings(canvas.mapSettings())
lyr = iface.activeLayer()
rnd = lyr.renderer()
sym = rnd.symbol()
sym_size = QgsSymbolLayerUtils.estimateMaxSymbolBleed(sym, context)
print(sym_size)

I am not sure what estimateMaxSymbolBleed really does, but it doesn't seem
to represent symbol size.

Thanks,

Calvin



On Thu, Sep 3, 2020 at 7:13 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Thu, 3 Sep 2020 at 00:06, C Hamilton <adenaculture at gmail.com> wrote:
> >
> > Nyall,
> >
> > Thanks. This almost gets the right answer.
> QgsSymbolLayerUtils::estimateMaxSymbolBleed is returning 0 as its value.
> I'm not sure what the problem is with it. bounds() seems to work for small
> symbols which is probably all I'll need, but if the symbol is very large
> with a large border and join style set to miter, the bounding box it
> returns is a little too small. My example used an excessively large icon
> and large border which probably would not be used in any real project.
>
> Hm - not sure what your issue with estimateMaxSymbolBleed is. Are you
> using data defined properties at all?
>
> Regarding the miter question -- that's something which none of the
> symbol bounds checking functions currently available account for.
>
> Nyall
>
> >
> > Calvin
> >
> > On Tue, Sep 1, 2020 at 6:39 PM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> >>
> >> On Wed, 2 Sep 2020 at 03:39, C Hamilton <adenaculture at gmail.com> wrote:
> >> >
> >> > I am trying to calculate the size of a single symbol in pixels using:
> >> >
> >> > canvas = iface.mapCanvas()
> >> > context = QgsRenderContext.fromMapSettings(canvas.mapSettings())
> >> > layer = iface.activeLayer()
> >> > rnd = layer.renderer()
> >> > sym = rnd.symbol()
> >> > scaled_size_in_pixels = context.convertToPainterUnits(
> >> >     sym.size(),
> >> >     sym.sizeUnit(),
> >> >     sym.sizeMapUnitScale() )
> >> >
> >> > The last line can also be calculated by:
> >> >
> >> >   scaled_size_in_pixels = sym.size(context)
> >> >
> >> > I am finding that this is returning the size of the filled area of
> the symbol, but it does not include the border. Is this a bug or do I need
> to add something additional to include the border?
> >>
> >> You can use  QgsSymbolLayerUtils::estimateMaxSymbolBleed if you're
> >> wanting to calculate the "maximum" bounding box of a rendered symbol.
> >> That includes any stroke/offset/other settings which also affect the
> >> rendered bounds.
> >>
> >> There's also QgsMarkerSymbol::bounds which returns an approximate
> >> bounding box of a marker symbol, which also accounts for things like
> >> the stroke and offset.
> >>
> >> Nyall
> >>
> >>
> >> >
> >> > Thanks,
> >> >
> >> > Calvin
> >> >
> >> > _______________________________________________
> >> > QGIS-Developer mailing list
> >> > QGIS-Developer at lists.osgeo.org
> >> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/0da4be7d/attachment-0001.html>

From a.neumann at carto.net  Fri Sep  4 11:10:11 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 4 Sep 2020 20:10:11 +0200
Subject: [QGIS-Developer] Library for importing dwg
In-Reply-To: <CAE_OVyRFLmShYcqfFpR5RWmLu5_z4-dBZj6=DCjxktj8hqz_Hw@mail.gmail.com>
References: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
 <a725be597ac66688a92267dfed4a7a16@carto.net>
 <CAE_OVyRFLmShYcqfFpR5RWmLu5_z4-dBZj6=DCjxktj8hqz_Hw@mail.gmail.com>
Message-ID: <b5652c7d-f166-39f1-dfa6-cbfb02cf0cb1@carto.net>

Hi Jesús,

No - that's a misconception. Despite the name of the library it also 
reads DWG files. It's not perfect, but it reads DWG ;-)

Greetings,

Andreas

Am 04.09.20 um 17:43 schrieb Jesús de Diego Alarcón:
> Hi Andreas
>
> First of all, thank you so much for your (quick) answer. I will take a 
> look but it seems that libdxfrw is working for *dxf files, not 
> dwg*...Any case I will take a look.
>
> Thanks again
>
> Jesús de Diego
>
> El vie., 4 sept. 2020 a las 14:48, Andreas Neumann 
> (<a.neumann at carto.net <mailto:a.neumann at carto.net>>) escribió:
>
>     Hi,
>
>     It is using the libdxfrw library.
>
>     Jürgen might have forked/patched it though, because activity in
>     the original project is basically stalled -  I think you can find
>     our version here:
>     https://github.com/qgis/QGIS/tree/master/external/libdxfrw
>
>     Greetings,
>
>     Andreas
>
>     On 2020-09-04 14:38, Jesús de Diego Alarcón wrote:
>
>>     Dear all
>>     I would like to know which library is using QGIS for importing
>>     dwg files (this functionality is accessible in /File > 
>>     Import/Export > Importing a DXF or DWG file /).
>>     I had supposed that this functionality was using the
>>     newly-developed OGR CAD driver... But I have tried with ogr2ogr
>>     both command line and Python console and dwg files are not
>>     supported (at least the same dwf file I am able to import with
>>     the mentioned functionality).
>>     Any help will be appreciated. Thank you in advance
>>     Jesús de Diego
>>     -- 
>>     Jesús de Diego Alarcón
>>     jesdial at gmail.com <mailto:jesdial at gmail.com>
>>
>>     "La vida es linda, lo malo es que muchos confunden lindo con fácil."
>>     Mafalda
>>
>>     _______________________________________________
>>     QGIS-Developer mailing list
>>     QGIS-Developer at lists.osgeo.org
>>     <mailto:QGIS-Developer at lists.osgeo.org>
>>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
>
> -- 
> Jesús de Diego Alarcón
> jesdial at gmail.com <mailto:jesdial at gmail.com>
>
> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
> Mafalda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/140e1550/attachment.html>

From jesdial at gmail.com  Fri Sep  4 13:10:42 2020
From: jesdial at gmail.com (=?UTF-8?B?SmVzw7pzIGRlIERpZWdvIEFsYXJjw7Nu?=)
Date: Fri, 4 Sep 2020 22:10:42 +0200
Subject: [QGIS-Developer] Library for importing dwg
In-Reply-To: <b5652c7d-f166-39f1-dfa6-cbfb02cf0cb1@carto.net>
References: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
 <a725be597ac66688a92267dfed4a7a16@carto.net>
 <CAE_OVyRFLmShYcqfFpR5RWmLu5_z4-dBZj6=DCjxktj8hqz_Hw@mail.gmail.com>
 <b5652c7d-f166-39f1-dfa6-cbfb02cf0cb1@carto.net>
Message-ID: <CAE_OVyRz9-Kk-SCFva_5HyO+VVA3_5iTtnwpikHjqDs-S7euOg@mail.gmail.com>

OK Let's try then

Thanks a lot

Jesús de Diego

El vie., 4 sept. 2020 a las 20:10, Andreas Neumann (<a.neumann at carto.net>)
escribió:

> Hi Jesús,
>
> No - that's a misconception. Despite the name of the library it also reads
> DWG files. It's not perfect, but it reads DWG ;-)
>
> Greetings,
>
> Andreas
> Am 04.09.20 um 17:43 schrieb Jesús de Diego Alarcón:
>
> Hi Andreas
>
> First of all, thank you so much for your (quick) answer. I will take a
> look but it seems that libdxfrw is working for *dxf files, not dwg*...Any
> case I will take a look.
>
> Thanks again
>
> Jesús de Diego
>
> El vie., 4 sept. 2020 a las 14:48, Andreas Neumann (<a.neumann at carto.net>)
> escribió:
>
>> Hi,
>>
>> It is using the libdxfrw library.
>>
>> Jürgen might have forked/patched it though, because activity in the
>> original project is basically stalled -  I think you can find our version
>> here: https://github.com/qgis/QGIS/tree/master/external/libdxfrw
>>
>> Greetings,
>>
>> Andreas
>>
>> On 2020-09-04 14:38, Jesús de Diego Alarcón wrote:
>>
>> Dear all
>>
>> I would like to know which library is using QGIS for importing dwg files
>> (this functionality is accessible in *File >  Import/Export > Importing
>> a DXF or DWG file *).
>>
>> I had supposed that this functionality was using the newly-developed OGR
>> CAD driver... But I have tried with ogr2ogr both command line and Python
>> console and dwg files are not supported (at least the same dwf file I am
>> able to import with the mentioned functionality).
>>
>> Any help will be appreciated. Thank you in advance
>>
>> Jesús de Diego
>>
>> --
>> Jesús de Diego Alarcón
>> jesdial at gmail.com
>>
>> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
>> Mafalda
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>
> --
> Jesús de Diego Alarcón
> jesdial at gmail.com
>
> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
> Mafalda
>
>

-- 
Jesús de Diego Alarcón
jesdial at gmail.com

"La vida es linda, lo malo es que muchos confunden lindo con fácil."
Mafalda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200904/506ec75a/attachment.html>

From fas.millan at gmail.com  Fri Sep  4 17:58:13 2020
From: fas.millan at gmail.com (=?UTF-8?B?TWlndWVsLcOBbmdlbCBGYXMtTWlsbMOhbg==?=)
Date: Sat, 5 Sep 2020 02:58:13 +0200
Subject: [QGIS-Developer] Coordinates of a pixel
In-Reply-To: <CAK2KqieRDhvqQeECd=S1K+dW8yy3ots-vPrJ5+Y1BcpZRWVZuQ@mail.gmail.com>
References: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
 <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>
 <CAHR++tPYm8bmbFFVSiPmS-L0W17z1z3QgCysEamD-c=UfV3bFQ@mail.gmail.com>
 <CAK2Kqicb1sahY=zTp=ANwVtKdJ2UwXdP6OeQgeepZN+WS9_8hQ@mail.gmail.com>
 <CAES-DZTpWz7x+u7tJoohm6dtynB926xYAd=w_HYtSVAdW2ABBQ@mail.gmail.com>
 <CAHR++tN0eVG3dMJA_s8CBOyLNbqhVPqau5vDPSZNty8yN6LpkQ@mail.gmail.com>
 <CAK2KqieRDhvqQeECd=S1K+dW8yy3ots-vPrJ5+Y1BcpZRWVZuQ@mail.gmail.com>
Message-ID: <CAHR++tNcoPuXTMxTuktkmJNoF9hSHKgxHuDTZNce+fNV3sN1jA@mail.gmail.com>

Hi again,
Thanks for your replies. Charles was right, the deviation between WGS and
ETRS was not the problem. Finally I'm using UTM while moving through the
dataset and only convert to geographic coordinates when I arrive at the
point of interest. The previous way of doing it was quite more complex and
it seems it added inaccuracies here and there.

Thanks again for your time,

Miguel

El mar., 1 sept. 2020 a las 19:59, Charles Dixon-Paver (<charles at kartoza.com>)
escribió:

> I would wager that those deviations between WGS and ETRS are unlikely to
> be the cause of this discrepancy, unless your implementation somehow
> compounds the inaccuracies between them. The way it's "calculated" in a GIS
> is by referencing the image to a coordinate system and then returning the
> coordinates at a specified location (a process which is totally abstract
> from image pixels).
>
> I haven't tested the code you're using, but from what I can see the most
> likely culprit is some abstract issue with the implementation which is
> difficult for us to resolve here (although a bug is certainly possible).
> For example, if you are using a DSM that is in geographic coordinates, the
> pixel sizes/ cell resolution are geographic units. That means that each
> cell is not a uniform distance (in meters) in size, yet the function you
> link to seems to require an input distance parameter in meters.
> Transforming units between coordinate systems is not trivial and likely
> requires expert advice. This may not be the case though, as I may be
> misunderstanding your requirements entirely.
>
> I believe Tims response was merely an example of how to get the details of
> an image which has been imported into QGIS in a similar manner as what I
> suggested with a world file. Depending on the usage and accuracy required,
> you can quite easily use the pixel size and the raster extents/ origin to
> calculate a pixel position (although not very robust,  I find it is often
> useful).
>
> I hope that helps somewhat rather than confusing the issue further. As I
> stated before, perhaps someone has an idea of where to point you in the
> codebase (in either QGIS or upstream projects like proj and GDAL), but I
> don't think you're entirely on the right path here...
>
> On Tue, 1 Sep 2020 at 17:59, Miguel-Ángel Fas-Millán <fas.millan at gmail.com>
> wrote:
>
>> Hi again,
>>
>> Charles > I checked that, but no. The deviation is not so high. I suspect
>> that the way it's calculated in QGIS is taking something into account that
>> the function I'm using (and the web, both return same result) is not.
>> Maybe this? My DSM is in ETRS89: "*Note that the World Geodetic System
>> WGS84 and the European Reference System ETRS89 are virtually identical and
>> that coordinate transformation between the two systems in practical
>> navigation is unnecessary. However, for high-precision surveying work - be
>> aware that the two systems deviates more than half a meter.*"
>> But I don't know how to take that deviation into account in the function
>> or why it seems to affect only  the longitude.
>>
>> Code of the calculateEndingGlobalCoordinates that I'm using:
>> https://github.com/mgavaghan/geodesy/blob/master/src/main/java/org/gavaghan/geodesy/GeodeticCalculator.java
>>
>> Tim > Good to know. Not sure how could I leverage those data. I called
>> pixels  to the DSM cells but really I'm not interested in the graphical
>> part, just in how is calculating the coordinates of those cells from the
>> xllcenter and yllcenter correctly.
>>
>>
>>
>>
>> El mar., 1 sept. 2020 a las 15:32, Tim Sutton (<tim at kartoza.com>)
>> escribió:
>>
>>> Hi
>>>
>>> Also you can get the extents of the layer in the layer properties ->
>>> Information tab e.g.:
>>>
>>>
>>> Name DEM_10m
>>> Path /home/timlinux/gisdata/Rwanda/DEM_10m.tif
>>> CRS EPSG:4326 - WGS 84 - Geographic
>>> Extent 28.9592194665249139,-2.8404830825979692 :
>>> 30.8994723851809887,-1.0469841014800894
>>> Unit degrees
>>> Width 21524
>>> Height 19896
>>> Data type Int16 - Sixteen bit signed integer
>>> GDAL Driver Description GTiff
>>> GDAL Driver Metadata GeoTIFF
>>> Dataset Description /home/timlinux/gisdata/Rwanda/DEM_10m.tif
>>> Compression
>>> Band 1
>>> RepresentationType=THEMATIC
>>> STATISTICS_APPROXIMATE=YES
>>> STATISTICS_MAXIMUM=3821
>>> STATISTICS_MEAN=1697.9520539082
>>> STATISTICS_MINIMUM=15
>>> STATISTICS_STDDEV=341.19933119234
>>> STATISTICS_VALID_PERCENT=56.38
>>> More information
>>> AREA_OR_POINT=Area
>>> DataType=Generic
>>> Dimensions X: 21524 Y: 19896 Bands: 1
>>> Origin 28.9592,-1.04698
>>> Pixel Size 9.01436962765319623e-05,-9.01436962765319623e-05
>>>
>>> Regards
>>>
>>> Tim
>>>
>>>
>>> On Tue, Sep 1, 2020 at 9:51 AM Charles Dixon-Paver <charles at kartoza.com>
>>> wrote:
>>>
>>>> I took a cursory glance at the calculator you used and the description
>>>> you've given, and I think there's a possibility you're simply using an
>>>> easting value in the calculator. You could try multiplying your input
>>>> longitude by -1 for a quick fix (although I haven't tested this will work
>>>> at all).
>>>>
>>>> On Tue, 1 Sep 2020 at 03:31, Miguel-Ángel Fas-Millán <
>>>> fas.millan at gmail.com> wrote:
>>>>
>>>>> Thanks for your reply. Well, let me provide more details to explain
>>>>> why I was asking that.
>>>>> I have a DSM, with its xllcenter/yllcenter coordinates and I need to
>>>>> know the coordinates of the (in this case) center of any of the
>>>>> squares/cells (which, maybe wrongly, I called pixels) represented by this
>>>>> dataset. To that I've been using a function equivalent to the provided by
>>>>> this calculator: https://geodesy.noaa.gov/cgi-bin/Inv_Fwd/forward2.prl ,
>>>>> which takes as parameters the starting point, azimuth, distance, and
>>>>> returns the ending coordinates.
>>>>>
>>>>> For instance, I want to calculate the coordinates of the first cell of
>>>>> the dataset (top left of the matrix). So I do:
>>>>>
>>>>> calculateEndingGlobalCoordinates(Ellipsoid.*WGS84*, start_coords, 0.0,
>>>>> nrows*cellsize) //0.0 for north
>>>>>
>>>>> The problem is that it returns a value with a latitude that seems ok,
>>>>> but a wrong longitude. When I place that coordinate in QGIS, it is out of
>>>>> the image, quite at left of the top left corner.
>>>>>
>>>>> Unsurprisingly, if I place the coordinates obtained with this method
>>>>> (or with the online calculator mentioned) in google maps, to check if it
>>>>> makes sense looking at what's there in the satellite images, they
>>>>> make no sense at all.
>>>>>
>>>>> However, if I take the coordinates appearing in QGIS when I hover one
>>>>> of the cells, and place them in google maps, it makes perfect sense. With a
>>>>> few meters of difference, but well, at least it is on the right track. (I
>>>>> am that sure because I took as reference a ATC tower, which is the highest
>>>>> element in a wide area).
>>>>>
>>>>> That's why I wanted to check what's the difference between the
>>>>> mentioned method I was using and whatever is made in the code to return
>>>>> those quite correct coordinates.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> El mar., 1 sept. 2020 a las 0:01, Charles Dixon-Paver (<
>>>>> charles at kartoza.com>) escribió:
>>>>>
>>>>>> Someone can correct me if I'm wrong, but I think there's a
>>>>>> misunderstanding here of how this raster data is handled in a GIS. From my
>>>>>> understanding of the question, I don't know that what you're asking for is
>>>>>> available "in the code" the way you expect.
>>>>>>
>>>>>> The coordinates are showing the position of the cursor relative to
>>>>>> the origin of the assigned coordinate reference system. The raster data is
>>>>>> "projected" onto that reference system, which assigns positions to some
>>>>>> points on the image and stretches, rotates or distorts the image in
>>>>>> accordance with the images affine parameters that ensure all the different
>>>>>> parts of the image remain spatially correct. How the GIS knows where to get
>>>>>> these parameters varies between data types and file formats.
>>>>>>
>>>>>> Playing around with the georeferencer tool in QGIS should give you a
>>>>>> pretty clear understanding of how this "projection" works.
>>>>>>
>>>>>> There are ways to get the coordinates of a position or pixel within
>>>>>> an image programmatically, the easiest of which that I can think of is
>>>>>> using values from a world file [1] with an xy position (in pixels) of the
>>>>>> pixel of interest. The code required for achieving this, however, is
>>>>>> probably going to be dependant on a wide variety of factors (not
>>>>>> least of all the CRS units and pixel size). Alternatively, you could likely
>>>>>> grab the coordinate position of a pixel from within a QGIS project, but
>>>>>> that doesn't seem to be what you're after. Perhaps a developer familiar
>>>>>> with the GDAL or QGIS code bases can point you in the direction of some
>>>>>> wizardry that will achieve what it is you are looking for without a clearer
>>>>>> understanding of your use case though.
>>>>>>
>>>>>> [1] https://en.wikipedia.org/wiki/World_file
>>>>>>
>>>>>> On Mon, 31 Aug 2020 at 19:57, Miguel-Ángel Fas-Millán <
>>>>>> fas.millan at gmail.com> wrote:
>>>>>>
>>>>>>> Hi all,
>>>>>>> New around here and as a QGIS user. I need to find something in the
>>>>>>> code, I hope you can help me.
>>>>>>> When you open a DSM and place the mouse on any pixel, you can see
>>>>>>> the coordinates of that point. Could someone tell me where in the code is
>>>>>>> made the calculation of those coordinates?
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Angel
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> QGIS-Developer mailing list
>>>>>>> QGIS-Developer at lists.osgeo.org
>>>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>>
>>> --
>>>
>>> ------------------------------------------------------------------------------------------
>>> ​
>>>
>>> Tim Sutton
>>> Visit http://kartoza.com to find out about open source:
>>>  * Desktop GIS programming services
>>>  * Geospatial web development
>>> * GIS Training
>>> * Consulting Services
>>> Skype: timlinux Irc: timlinux on #qgis at freenode.net
>>> Tim is a member of the QGIS Project Steering Committee
>>>
>>> -------------------------------------------------------------------------------------------
>>> Kartoza is a merger between Linfiniti and Afrispatial
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200905/05adbb62/attachment-0001.html>

From charles at kartoza.com  Sat Sep  5 03:14:46 2020
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Sat, 5 Sep 2020 12:14:46 +0200
Subject: [QGIS-Developer] Coordinates of a pixel
In-Reply-To: <CAHR++tNcoPuXTMxTuktkmJNoF9hSHKgxHuDTZNce+fNV3sN1jA@mail.gmail.com>
References: <CAHR++tO8fGR+zCpQCrn5k4v=KU=EML3vnYt9PkXJRrM4zRFCPQ@mail.gmail.com>
 <CAK2KqidTxujr+i-wYz8aR3dGSx3q8ERDwyzoK4JW893f8zthFA@mail.gmail.com>
 <CAHR++tPYm8bmbFFVSiPmS-L0W17z1z3QgCysEamD-c=UfV3bFQ@mail.gmail.com>
 <CAK2Kqicb1sahY=zTp=ANwVtKdJ2UwXdP6OeQgeepZN+WS9_8hQ@mail.gmail.com>
 <CAES-DZTpWz7x+u7tJoohm6dtynB926xYAd=w_HYtSVAdW2ABBQ@mail.gmail.com>
 <CAHR++tN0eVG3dMJA_s8CBOyLNbqhVPqau5vDPSZNty8yN6LpkQ@mail.gmail.com>
 <CAK2KqieRDhvqQeECd=S1K+dW8yy3ots-vPrJ5+Y1BcpZRWVZuQ@mail.gmail.com>
 <CAHR++tNcoPuXTMxTuktkmJNoF9hSHKgxHuDTZNce+fNV3sN1jA@mail.gmail.com>
Message-ID: <CAK2KqidnrqG-jB5qKe3catHndnr93S0yPU=bw92MoRx-7O=PeQ@mail.gmail.com>

Glad to hear you found a solution. In general, I usually favour the
approach of developing a solution which works in a local coordinate system
and projecting after the fact. It's usually a lot simpler and allows me to
leave the "rocket science" to the rocket scientists...

One caveat you should be aware of though is that calculating positions on
systems that are not cylindrical (e.g. a conical projection like albers
ea), working at very high latitudes (where cylindrical projections probably
aren't suitable anyway) or using images that have some sort of rotation
applied etc may make things considerably more complex and even totally
break your localised implementation (depending on how intelligent the
solution is). I usually try to build things that are dynamic by somehow
binding units/ CRS to the current map frame or similar logic, but in an
instance like this it's probably better to have a hard-coded
"all-or-nothing" solution.

There may also be other situations where things get a bit fuzzy, but I
think as long as you're using UTM and images aren't rotated you should be
OK (just be aware of these limitations if you plan on implementing this for
users in other regions).

Regards

On Sat, 5 Sep 2020 at 02:58, Miguel-Ángel Fas-Millán <fas.millan at gmail.com>
wrote:

> Hi again,
> Thanks for your replies. Charles was right, the deviation between WGS and
> ETRS was not the problem. Finally I'm using UTM while moving through the
> dataset and only convert to geographic coordinates when I arrive at the
> point of interest. The previous way of doing it was quite more complex and
> it seems it added inaccuracies here and there.
>
> Thanks again for your time,
>
> Miguel
>
> El mar., 1 sept. 2020 a las 19:59, Charles Dixon-Paver (<
> charles at kartoza.com>) escribió:
>
>> I would wager that those deviations between WGS and ETRS are unlikely to
>> be the cause of this discrepancy, unless your implementation somehow
>> compounds the inaccuracies between them. The way it's "calculated" in a GIS
>> is by referencing the image to a coordinate system and then returning the
>> coordinates at a specified location (a process which is totally abstract
>> from image pixels).
>>
>> I haven't tested the code you're using, but from what I can see the most
>> likely culprit is some abstract issue with the implementation which is
>> difficult for us to resolve here (although a bug is certainly possible).
>> For example, if you are using a DSM that is in geographic coordinates, the
>> pixel sizes/ cell resolution are geographic units. That means that each
>> cell is not a uniform distance (in meters) in size, yet the function you
>> link to seems to require an input distance parameter in meters.
>> Transforming units between coordinate systems is not trivial and likely
>> requires expert advice. This may not be the case though, as I may be
>> misunderstanding your requirements entirely.
>>
>> I believe Tims response was merely an example of how to get the details
>> of an image which has been imported into QGIS in a similar manner as what I
>> suggested with a world file. Depending on the usage and accuracy required,
>> you can quite easily use the pixel size and the raster extents/ origin to
>> calculate a pixel position (although not very robust,  I find it is often
>> useful).
>>
>> I hope that helps somewhat rather than confusing the issue further. As I
>> stated before, perhaps someone has an idea of where to point you in the
>> codebase (in either QGIS or upstream projects like proj and GDAL), but I
>> don't think you're entirely on the right path here...
>>
>> On Tue, 1 Sep 2020 at 17:59, Miguel-Ángel Fas-Millán <
>> fas.millan at gmail.com> wrote:
>>
>>> Hi again,
>>>
>>> Charles > I checked that, but no. The deviation is not so high. I
>>> suspect that the way it's calculated in QGIS is taking something into
>>> account that the function I'm using (and the web, both return same result)
>>> is not.  Maybe this? My DSM is in ETRS89: "*Note that the World
>>> Geodetic System WGS84 and the European Reference System ETRS89 are
>>> virtually identical and that coordinate transformation between the two
>>> systems in practical navigation is unnecessary. However, for high-precision
>>> surveying work - be aware that the two systems deviates more than half a
>>> meter.*"
>>> But I don't know how to take that deviation into account in the function
>>> or why it seems to affect only  the longitude.
>>>
>>> Code of the calculateEndingGlobalCoordinates that I'm using:
>>> https://github.com/mgavaghan/geodesy/blob/master/src/main/java/org/gavaghan/geodesy/GeodeticCalculator.java
>>>
>>> Tim > Good to know. Not sure how could I leverage those data. I called
>>> pixels  to the DSM cells but really I'm not interested in the graphical
>>> part, just in how is calculating the coordinates of those cells from the
>>> xllcenter and yllcenter correctly.
>>>
>>>
>>>
>>>
>>> El mar., 1 sept. 2020 a las 15:32, Tim Sutton (<tim at kartoza.com>)
>>> escribió:
>>>
>>>> Hi
>>>>
>>>> Also you can get the extents of the layer in the layer properties ->
>>>> Information tab e.g.:
>>>>
>>>>
>>>> Name DEM_10m
>>>> Path /home/timlinux/gisdata/Rwanda/DEM_10m.tif
>>>> CRS EPSG:4326 - WGS 84 - Geographic
>>>> Extent 28.9592194665249139,-2.8404830825979692 :
>>>> 30.8994723851809887,-1.0469841014800894
>>>> Unit degrees
>>>> Width 21524
>>>> Height 19896
>>>> Data type Int16 - Sixteen bit signed integer
>>>> GDAL Driver Description GTiff
>>>> GDAL Driver Metadata GeoTIFF
>>>> Dataset Description /home/timlinux/gisdata/Rwanda/DEM_10m.tif
>>>> Compression
>>>> Band 1
>>>> RepresentationType=THEMATIC
>>>> STATISTICS_APPROXIMATE=YES
>>>> STATISTICS_MAXIMUM=3821
>>>> STATISTICS_MEAN=1697.9520539082
>>>> STATISTICS_MINIMUM=15
>>>> STATISTICS_STDDEV=341.19933119234
>>>> STATISTICS_VALID_PERCENT=56.38
>>>> More information
>>>> AREA_OR_POINT=Area
>>>> DataType=Generic
>>>> Dimensions X: 21524 Y: 19896 Bands: 1
>>>> Origin 28.9592,-1.04698
>>>> Pixel Size 9.01436962765319623e-05,-9.01436962765319623e-05
>>>>
>>>> Regards
>>>>
>>>> Tim
>>>>
>>>>
>>>> On Tue, Sep 1, 2020 at 9:51 AM Charles Dixon-Paver <charles at kartoza.com>
>>>> wrote:
>>>>
>>>>> I took a cursory glance at the calculator you used and the description
>>>>> you've given, and I think there's a possibility you're simply using an
>>>>> easting value in the calculator. You could try multiplying your input
>>>>> longitude by -1 for a quick fix (although I haven't tested this will work
>>>>> at all).
>>>>>
>>>>> On Tue, 1 Sep 2020 at 03:31, Miguel-Ángel Fas-Millán <
>>>>> fas.millan at gmail.com> wrote:
>>>>>
>>>>>> Thanks for your reply. Well, let me provide more details to explain
>>>>>> why I was asking that.
>>>>>> I have a DSM, with its xllcenter/yllcenter coordinates and I need to
>>>>>> know the coordinates of the (in this case) center of any of the
>>>>>> squares/cells (which, maybe wrongly, I called pixels) represented by this
>>>>>> dataset. To that I've been using a function equivalent to the provided by
>>>>>> this calculator:
>>>>>> https://geodesy.noaa.gov/cgi-bin/Inv_Fwd/forward2.prl , which takes
>>>>>> as parameters the starting point, azimuth, distance, and returns the ending
>>>>>> coordinates.
>>>>>>
>>>>>> For instance, I want to calculate the coordinates of the first cell
>>>>>> of the dataset (top left of the matrix). So I do:
>>>>>>
>>>>>> calculateEndingGlobalCoordinates(Ellipsoid.*WGS84*, start_coords, 0.0,
>>>>>> nrows*cellsize) //0.0 for north
>>>>>>
>>>>>> The problem is that it returns a value with a latitude that seems ok,
>>>>>> but a wrong longitude. When I place that coordinate in QGIS, it is out of
>>>>>> the image, quite at left of the top left corner.
>>>>>>
>>>>>> Unsurprisingly, if I place the coordinates obtained with this method
>>>>>> (or with the online calculator mentioned) in google maps, to check if it
>>>>>> makes sense looking at what's there in the satellite images, they
>>>>>> make no sense at all.
>>>>>>
>>>>>> However, if I take the coordinates appearing in QGIS when I hover one
>>>>>> of the cells, and place them in google maps, it makes perfect sense. With a
>>>>>> few meters of difference, but well, at least it is on the right track. (I
>>>>>> am that sure because I took as reference a ATC tower, which is the highest
>>>>>> element in a wide area).
>>>>>>
>>>>>> That's why I wanted to check what's the difference between the
>>>>>> mentioned method I was using and whatever is made in the code to return
>>>>>> those quite correct coordinates.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> El mar., 1 sept. 2020 a las 0:01, Charles Dixon-Paver (<
>>>>>> charles at kartoza.com>) escribió:
>>>>>>
>>>>>>> Someone can correct me if I'm wrong, but I think there's a
>>>>>>> misunderstanding here of how this raster data is handled in a GIS. >From my
>>>>>>> understanding of the question, I don't know that what you're asking for is
>>>>>>> available "in the code" the way you expect.
>>>>>>>
>>>>>>> The coordinates are showing the position of the cursor relative to
>>>>>>> the origin of the assigned coordinate reference system. The raster data is
>>>>>>> "projected" onto that reference system, which assigns positions to some
>>>>>>> points on the image and stretches, rotates or distorts the image in
>>>>>>> accordance with the images affine parameters that ensure all the different
>>>>>>> parts of the image remain spatially correct. How the GIS knows where to get
>>>>>>> these parameters varies between data types and file formats.
>>>>>>>
>>>>>>> Playing around with the georeferencer tool in QGIS should give you a
>>>>>>> pretty clear understanding of how this "projection" works.
>>>>>>>
>>>>>>> There are ways to get the coordinates of a position or pixel within
>>>>>>> an image programmatically, the easiest of which that I can think of is
>>>>>>> using values from a world file [1] with an xy position (in pixels) of the
>>>>>>> pixel of interest. The code required for achieving this, however, is
>>>>>>> probably going to be dependant on a wide variety of factors (not
>>>>>>> least of all the CRS units and pixel size). Alternatively, you could likely
>>>>>>> grab the coordinate position of a pixel from within a QGIS project, but
>>>>>>> that doesn't seem to be what you're after. Perhaps a developer familiar
>>>>>>> with the GDAL or QGIS code bases can point you in the direction of some
>>>>>>> wizardry that will achieve what it is you are looking for without a clearer
>>>>>>> understanding of your use case though.
>>>>>>>
>>>>>>> [1] https://en.wikipedia.org/wiki/World_file
>>>>>>>
>>>>>>> On Mon, 31 Aug 2020 at 19:57, Miguel-Ángel Fas-Millán <
>>>>>>> fas.millan at gmail.com> wrote:
>>>>>>>
>>>>>>>> Hi all,
>>>>>>>> New around here and as a QGIS user. I need to find something in the
>>>>>>>> code, I hope you can help me.
>>>>>>>> When you open a DSM and place the mouse on any pixel, you can see
>>>>>>>> the coordinates of that point. Could someone tell me where in the code is
>>>>>>>> made the calculation of those coordinates?
>>>>>>>>
>>>>>>>> Regards,
>>>>>>>>
>>>>>>>> Angel
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> QGIS-Developer mailing list
>>>>>>>> QGIS-Developer at lists.osgeo.org
>>>>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>>> Unsubscribe:
>>>>>>>> https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>>
>>>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>>>
>>>> --
>>>>
>>>> ------------------------------------------------------------------------------------------
>>>> ​
>>>>
>>>> Tim Sutton
>>>> Visit http://kartoza.com to find out about open source:
>>>>  * Desktop GIS programming services
>>>>  * Geospatial web development
>>>> * GIS Training
>>>> * Consulting Services
>>>> Skype: timlinux Irc: timlinux on #qgis at freenode.net
>>>> Tim is a member of the QGIS Project Steering Committee
>>>>
>>>> -------------------------------------------------------------------------------------------
>>>> Kartoza is a merger between Linfiniti and Afrispatial
>>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200905/1851a899/attachment-0001.html>

From giovanni.manghi at gmail.com  Sat Sep  5 14:38:03 2020
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sat, 5 Sep 2020 22:38:03 +0100
Subject: [QGIS-Developer] bug or feature? layer_styles table created not in
	the public schema
Message-ID: <CACfnYnSed0h+tEkrHb86G4QWjaQfT-C3A55BBtZLbRF2otjOkg@mail.gmail.com>

Hi all,
by chance I noticed the following:

If in a PostgreSQL DB exists a schema that has the same name as a user
that has full permissions on that schema, then if the user saves a
style to the DB this is saved in a  "layer_styles" table in this
schema, not public.

Moreover if the user tries to load a style from the DB it only sees
the styles in this "secondary" layer_styles table, not the one in
public.

Feature or bug?

Seems strange it is by chance, anyway if it is implemented so by
design I think that in the "load style from DB" menu is missing the
option to choose in what schema look for, like the similar menu for
loading projects from DB.

Opinions?

cheers

-- G --

From cavallini at faunalia.it  Sat Sep  5 15:05:33 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun, 06 Sep 2020 00:05:33 +0200
Subject: [QGIS-Developer] bug or feature? layer_styles table created not
	in	the public schema
In-Reply-To: <CACfnYnSed0h+tEkrHb86G4QWjaQfT-C3A55BBtZLbRF2otjOkg@mail.gmail.com>
References: <CACfnYnSed0h+tEkrHb86G4QWjaQfT-C3A55BBtZLbRF2otjOkg@mail.gmail.com>
Message-ID: <C927D156-48CE-46E8-A07D-AF67C82F2D34@faunalia.it>

This follows the search_path setting.
Cheers.

On 5 September 2020 23:38:03 CEST, Giovanni Manghi <giovanni.manghi at gmail.com> wrote:
>Hi all,
>by chance I noticed the following:
>
>If in a PostgreSQL DB exists a schema that has the same name as a user
>that has full permissions on that schema, then if the user saves a
>style to the DB this is saved in a  "layer_styles" table in this
>schema, not public.
>
>Moreover if the user tries to load a style from the DB it only sees
>the styles in this "secondary" layer_styles table, not the one in
>public.
>
>Feature or bug?
>
>Seems strange it is by chance, anyway if it is implemented so by
>design I think that in the "load style from DB" menu is missing the
>option to choose in what schema look for, like the similar menu for
>loading projects from DB.
>
>Opinions?
>
>cheers
>
>-- G --
>_______________________________________________
>QGIS-Developer mailing list
>QGIS-Developer at lists.osgeo.org
>List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Please excuse my brevity.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200906/3def305d/attachment.html>

From giovanni.manghi at gmail.com  Sun Sep  6 09:26:01 2020
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sun, 6 Sep 2020 17:26:01 +0100
Subject: [QGIS-Developer] bug or feature? layer_styles table created not
 in the public schema
In-Reply-To: <C927D156-48CE-46E8-A07D-AF67C82F2D34@faunalia.it>
References: <CACfnYnSed0h+tEkrHb86G4QWjaQfT-C3A55BBtZLbRF2otjOkg@mail.gmail.com>
 <C927D156-48CE-46E8-A07D-AF67C82F2D34@faunalia.it>
Message-ID: <CACfnYnS+C9YFF7tJN9Cn=MWgaRbUgKQOObND4eVTJmcdHq_Z_A@mail.gmail.com>

Hi all,

On Sat, Sep 5, 2020 at 11:05 PM Paolo Cavallini <cavallini at faunalia.it> wrote:
>
> This follows the search_path setting.

oh I see. Anyway this case seems possible (even if uncommon), and when
it happens it leads a user to being cut off from accessing styles
stored in public.
So my question stands, should this be considered a bug (considered
that the QGIS does not allows to choose the schema where to look for
styles)?

-- G --

From regis.haubourg at gmail.com  Sun Sep  6 10:18:26 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Sun, 6 Sep 2020 19:18:26 +0200
Subject: [QGIS-Developer] bug or feature? layer_styles table created not
 in the public schema
In-Reply-To: <CACfnYnS+C9YFF7tJN9Cn=MWgaRbUgKQOObND4eVTJmcdHq_Z_A@mail.gmail.com>
References: <CACfnYnSed0h+tEkrHb86G4QWjaQfT-C3A55BBtZLbRF2otjOkg@mail.gmail.com>
 <C927D156-48CE-46E8-A07D-AF67C82F2D34@faunalia.it>
 <CACfnYnS+C9YFF7tJN9Cn=MWgaRbUgKQOObND4eVTJmcdHq_Z_A@mail.gmail.com>
Message-ID: <CABgOYCcJG99YF5NVyEa5y4UJT68OzLa2q93CAasWAQUnMo00ig@mail.gmail.com>

Hi,
I'm my opinion, we should add a dialog to let the user choose the
destination schema. Public schema should really be left untouched by
default.
Cheers
Regis

Le dim. 6 sept. 2020 à 18:26, Giovanni Manghi <giovanni.manghi at gmail.com> a
écrit :

> Hi all,
>
> On Sat, Sep 5, 2020 at 11:05 PM Paolo Cavallini <cavallini at faunalia.it>
> wrote:
> >
> > This follows the search_path setting.
>
> oh I see. Anyway this case seems possible (even if uncommon), and when
> it happens it leads a user to being cut off from accessing styles
> stored in public.
> So my question stands, should this be considered a bug (considered
> that the QGIS does not allows to choose the schema where to look for
> styles)?
>
> -- G --
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200906/c885d79c/attachment.html>

From sohini.goswami at rpsg.in  Sun Sep  6 11:08:36 2020
From: sohini.goswami at rpsg.in (SOHINI GOSWAMI)
Date: Sun, 6 Sep 2020 23:38:36 +0530
Subject: [QGIS-Developer] Fwd: Plugin Development for accessing PostgresSQL
 Database in a QtableWidget in QT Designer
In-Reply-To: <CAKG1rmVvzmNF1_Gz5TOXfAu7FgJriyuSv2RvqOZw5EZ4+OphHQ@mail.gmail.com>
References: <CAKG1rmVvzmNF1_Gz5TOXfAu7FgJriyuSv2RvqOZw5EZ4+OphHQ@mail.gmail.com>
Message-ID: <CAKG1rmXGCPBaZnxqG=QqiYMidgo85gbgB75uh9YYL_VPeTsHTQ@mail.gmail.com>

Dear Developers,
I would request to kindly help me with building a plugin using Qtablewidget
in QT designer. The table would retrieve a postgresql using a query
[Depending on the date of the date] . I have created the UI file in QT
designer but unable to fetch the data from the buttons click triggers in my
main python plugin file. It would be great if I could get a complete guide
of writing methods on onclick -buttons and retrive the data from Postgres
database.
*Sample  Image of the plugin attempted :*

[image: image.png]

-- 
*Sohini Goswami*
*Executive ,GIS Cell*
*Ph: +918169824459*
*CESC Ventures.*


[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
Sender
notified by
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
09/04/20,
02:03:36 PM


-- 
*Sohini Goswami*
*Executive ,GIS Cell*
*Ph: +918169824459*
*CESC Ventures.*

[image: Mailtrack]
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
Sender
notified by
Mailtrack
<https://mailtrack.io?utm_source=gmail&utm_medium=signature&utm_campaign=signaturevirality5&>
09/06/20,
11:38:01 PM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200906/3d62e2f7/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 28311 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200906/3d62e2f7/attachment-0001.png>

From cavallini at faunalia.it  Sun Sep  6 11:09:05 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun, 06 Sep 2020 20:09:05 +0200
Subject: [QGIS-Developer] bug or feature? layer_styles table created not
	in the public schema
In-Reply-To: <CABgOYCcJG99YF5NVyEa5y4UJT68OzLa2q93CAasWAQUnMo00ig@mail.gmail.com>
References: <CACfnYnSed0h+tEkrHb86G4QWjaQfT-C3A55BBtZLbRF2otjOkg@mail.gmail.com>
 <C927D156-48CE-46E8-A07D-AF67C82F2D34@faunalia.it>
 <CACfnYnS+C9YFF7tJN9Cn=MWgaRbUgKQOObND4eVTJmcdHq_Z_A@mail.gmail.com>
 <CABgOYCcJG99YF5NVyEa5y4UJT68OzLa2q93CAasWAQUnMo00ig@mail.gmail.com>
Message-ID: <8FBC363A-E33C-458D-8507-F61EF37CD7C6@faunalia.it>

+1
Cheers

On 6 September 2020 19:18:26 CEST, "Régis Haubourg" <regis.haubourg at gmail.com> wrote:
>Hi,
>I'm my opinion, we should add a dialog to let the user choose the
>destination schema. Public schema should really be left untouched by
>default.
>Cheers
>Regis
>
>Le dim. 6 sept. 2020 à 18:26, Giovanni Manghi
><giovanni.manghi at gmail.com> a
>écrit :
>
>> Hi all,
>>
>> On Sat, Sep 5, 2020 at 11:05 PM Paolo Cavallini
><cavallini at faunalia.it>
>> wrote:
>> >
>> > This follows the search_path setting.
>>
>> oh I see. Anyway this case seems possible (even if uncommon), and
>when
>> it happens it leads a user to being cut off from accessing styles
>> stored in public.
>> So my question stands, should this be considered a bug (considered
>> that the QGIS does not allows to choose the schema where to look for
>> styles)?
>>
>> -- G --
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Please excuse my brevity.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200906/5aa8b677/attachment.html>

From andreaerdna at libero.it  Sun Sep  6 11:15:35 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Sun, 6 Sep 2020 11:15:35 -0700 (MST)
Subject: [QGIS-Developer] Processing Question: How to Select All with
 QgsProcessingParameterField
In-Reply-To: <CABPxTTq5XMQibnm=1U=kngcFJYTmP+RfPGA3Yrip+38MALUvMw@mail.gmail.com>
References: <CABPxTTqjssygGHrP2GgpSDVnqByTJGHLwh=oda472KpHVLpL7Q@mail.gmail.com>
 <CAB28AsiTGvUdinwCG1-YjB35UUUu4Tup_CO1kBEjwkSmnLXbAg@mail.gmail.com>
 <CABPxTTq5XMQibnm=1U=kngcFJYTmP+RfPGA3Yrip+38MALUvMw@mail.gmail.com>
Message-ID: <1599416135890-0.post@n6.nabble.com>

Please keep in mind that defaultToAllFields was introduced with QGIS 3.12, so
it's not available in previous versions.

KML Tools plugin 3.1.0 (declared minimum QGIS version: 3.4.0) with QGIS
3.10:

WARNING Traceback (most recent call last):
File
"C:/Users/io/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\kmltools\exportKmz.py",
line 87, in initAlgorithm
defaultToAllFields=True
TypeError: 'defaultToAllFields' is an unknown keyword argument


Regards.

Andrea Giudiceandrea



C Hamilton wrote
> Nyall,
> 
> Thanks! That is exactly what I was looking for.
> 
> Calvin





--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From luis3176 at yahoo.com  Sun Sep  6 14:38:55 2020
From: luis3176 at yahoo.com (Luis Eduardo)
Date: Sun, 6 Sep 2020 21:38:55 +0000 (UTC)
Subject: [QGIS-Developer] Is a plugin for QGIS3 with the user interface
 defined by code acceptable for the repository?
References: <84811867.887249.1599428335626.ref@mail.yahoo.com>
Message-ID: <84811867.887249.1599428335626@mail.yahoo.com>

Hello everyone
I am working on a plugin, I have created a minimal Plugin, the user interface (dialog) I have defined by code. Without using Qt Designer.If I would like to upload this plugin to the QGIS repository, for the community in general, would it be acceptable?
In that case, how can I handle the translation of the interface into different languages. Can I do it by code?
I explain, get QSettings by knowing the language uploading the plugin this way. Is this acceptable too?
If not, how can I implement QTranslator in this case?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200906/0e5fa275/attachment.html>

From nyall.dawson at gmail.com  Sun Sep  6 16:22:15 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 7 Sep 2020 09:22:15 +1000
Subject: [QGIS-Developer] Library for importing dwg
In-Reply-To: <CAE_OVyRz9-Kk-SCFva_5HyO+VVA3_5iTtnwpikHjqDs-S7euOg@mail.gmail.com>
References: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
 <a725be597ac66688a92267dfed4a7a16@carto.net>
 <CAE_OVyRFLmShYcqfFpR5RWmLu5_z4-dBZj6=DCjxktj8hqz_Hw@mail.gmail.com>
 <b5652c7d-f166-39f1-dfa6-cbfb02cf0cb1@carto.net>
 <CAE_OVyRz9-Kk-SCFva_5HyO+VVA3_5iTtnwpikHjqDs-S7euOg@mail.gmail.com>
Message-ID: <CAB28AsgRk_-EmWvkn0kTXC1=9C8y=rt+wtyuwYqnENKhQY7Grw@mail.gmail.com>

On Sat, 5 Sep 2020 at 06:11, Jesús de Diego Alarcón <jesdial at gmail.com> wrote:
>
> OK Let's try then

FYI there's also libredwg -- https://github.com/LibreDWG/libredwg ,
which is seeing a lot of development focus recently (maybe at some
stage we should abstract out the backend dwg library in qgis to give
users a choice of backend to use for conversion...)

Nyall

>
> Thanks a lot
>
> Jesús de Diego
>
> El vie., 4 sept. 2020 a las 20:10, Andreas Neumann (<a.neumann at carto.net>) escribió:
>>
>> Hi Jesús,
>>
>> No - that's a misconception. Despite the name of the library it also reads DWG files. It's not perfect, but it reads DWG ;-)
>>
>> Greetings,
>>
>> Andreas
>>
>> Am 04.09.20 um 17:43 schrieb Jesús de Diego Alarcón:
>>
>> Hi Andreas
>>
>> First of all, thank you so much for your (quick) answer. I will take a look but it seems that libdxfrw is working for dxf files, not dwg...Any case I will take a look.
>>
>> Thanks again
>>
>> Jesús de Diego
>>
>> El vie., 4 sept. 2020 a las 14:48, Andreas Neumann (<a.neumann at carto.net>) escribió:
>>>
>>> Hi,
>>>
>>> It is using the libdxfrw library.
>>>
>>> Jürgen might have forked/patched it though, because activity in the original project is basically stalled -  I think you can find our version here: https://github.com/qgis/QGIS/tree/master/external/libdxfrw
>>>
>>> Greetings,
>>>
>>> Andreas
>>>
>>> On 2020-09-04 14:38, Jesús de Diego Alarcón wrote:
>>>
>>> Dear all
>>>
>>> I would like to know which library is using QGIS for importing dwg files (this functionality is accessible in File >  Import/Export > Importing a DXF or DWG file ).
>>>
>>> I had supposed that this functionality was using the newly-developed OGR CAD driver... But I have tried with ogr2ogr both command line and Python console and dwg files are not supported (at least the same dwf file I am able to import with the mentioned functionality).
>>>
>>> Any help will be appreciated. Thank you in advance
>>>
>>> Jesús de Diego
>>>
>>> --
>>> Jesús de Diego Alarcón
>>> jesdial at gmail.com
>>>
>>> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
>>> Mafalda
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>
>>
>> --
>> Jesús de Diego Alarcón
>> jesdial at gmail.com
>>
>> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
>> Mafalda
>
>
>
> --
> Jesús de Diego Alarcón
> jesdial at gmail.com
>
> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
> Mafalda
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Sun Sep  6 16:24:56 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 7 Sep 2020 09:24:56 +1000
Subject: [QGIS-Developer] Issue with determining Symbol size - Bug?
In-Reply-To: <CABPxTTp8mbFbMAx42aWiROKUnnU_upbaTXXTzGeEQYAWg-6Gsg@mail.gmail.com>
References: <CABPxTTp=gNDLQDHpL2WSk5WU5wQPCfDfXXp5=rS62v2RneZvgw@mail.gmail.com>
 <CAB28AsgenkxAt5f3b2-DJO-Yd=C+F6-8NN7pNqhRhTAocXbRRg@mail.gmail.com>
 <CABPxTTr40Wn9+9dAj7Cr4ZpEeTK9rSWTazc3rwjKZaJu_mVfEQ@mail.gmail.com>
 <CAB28AsgWe62gLekKTFBO8rYR7k28rSnPj4YvGZW2kZRy4Uiexg@mail.gmail.com>
 <CABPxTTp8mbFbMAx42aWiROKUnnU_upbaTXXTzGeEQYAWg-6Gsg@mail.gmail.com>
Message-ID: <CAB28AsgEx+B97SjwknZX=y5QrCct1PUxUY3xG2_zU_X3UifD-Q@mail.gmail.com>

On Sat, 5 Sep 2020 at 02:16, C Hamilton <adenaculture at gmail.com> wrote:
>
> Try running this code. Make sure you have a point layer selected that is using single symbol symbology. The value that is returned is 0. In my case the units for the symbol are millimeters and a value of 5. I am using QGIS 3.14.15 on windows.
>
> canvas = iface.mapCanvas()
> context = QgsRenderContext.fromMapSettings(canvas.mapSettings())
> lyr = iface.activeLayer()
> rnd = lyr.renderer()
> sym = rnd.symbol()
> sym_size = QgsSymbolLayerUtils.estimateMaxSymbolBleed(sym, context)
> print(sym_size)
>
> I am not sure what estimateMaxSymbolBleed really does, but it doesn't seem to represent symbol size.

Hm - good catch. Turns out it's not implemented for most marker symbol
layer types, only line/polygons. That's simply a result of the
function only being used by core qgis code for line/polygon symbols
currently. We should fix that sometime (PR welcome, ping me if you'd
like assistance!)

Nyall


>
> Thanks,
>
> Calvin
>
>
>
> On Thu, Sep 3, 2020 at 7:13 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Thu, 3 Sep 2020 at 00:06, C Hamilton <adenaculture at gmail.com> wrote:
>> >
>> > Nyall,
>> >
>> > Thanks. This almost gets the right answer. QgsSymbolLayerUtils::estimateMaxSymbolBleed is returning 0 as its value.  I'm not sure what the problem is with it. bounds() seems to work for small symbols which is probably all I'll need, but if the symbol is very large with a large border and join style set to miter, the bounding box it returns is a little too small. My example used an excessively large icon and large border which probably would not be used in any real project.
>>
>> Hm - not sure what your issue with estimateMaxSymbolBleed is. Are you
>> using data defined properties at all?
>>
>> Regarding the miter question -- that's something which none of the
>> symbol bounds checking functions currently available account for.
>>
>> Nyall
>>
>> >
>> > Calvin
>> >
>> > On Tue, Sep 1, 2020 at 6:39 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>> >>
>> >> On Wed, 2 Sep 2020 at 03:39, C Hamilton <adenaculture at gmail.com> wrote:
>> >> >
>> >> > I am trying to calculate the size of a single symbol in pixels using:
>> >> >
>> >> > canvas = iface.mapCanvas()
>> >> > context = QgsRenderContext.fromMapSettings(canvas.mapSettings())
>> >> > layer = iface.activeLayer()
>> >> > rnd = layer.renderer()
>> >> > sym = rnd.symbol()
>> >> > scaled_size_in_pixels = context.convertToPainterUnits(
>> >> >     sym.size(),
>> >> >     sym.sizeUnit(),
>> >> >     sym.sizeMapUnitScale() )
>> >> >
>> >> > The last line can also be calculated by:
>> >> >
>> >> >   scaled_size_in_pixels = sym.size(context)
>> >> >
>> >> > I am finding that this is returning the size of the filled area of the symbol, but it does not include the border. Is this a bug or do I need to add something additional to include the border?
>> >>
>> >> You can use  QgsSymbolLayerUtils::estimateMaxSymbolBleed if you're
>> >> wanting to calculate the "maximum" bounding box of a rendered symbol.
>> >> That includes any stroke/offset/other settings which also affect the
>> >> rendered bounds.
>> >>
>> >> There's also QgsMarkerSymbol::bounds which returns an approximate
>> >> bounding box of a marker symbol, which also accounts for things like
>> >> the stroke and offset.
>> >>
>> >> Nyall
>> >>
>> >>
>> >> >
>> >> > Thanks,
>> >> >
>> >> > Calvin
>> >> >
>> >> > _______________________________________________
>> >> > QGIS-Developer mailing list
>> >> > QGIS-Developer at lists.osgeo.org
>> >> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From harmandeep at bel.co.in  Sun Sep  6 22:43:28 2020
From: harmandeep at bel.co.in (harmandeep)
Date: Mon, 07 Sep 2020 11:13:28 +0530
Subject: [QGIS-Developer] qgis-rhel 8.2
Message-ID: <469a0a8fc7d17abdaa523747df75ae28@bel.co.in>

Hi All, 

I need to install QGIS  in RHEL 8.2 but it shows some depenedencies for
el6 package of QGIS from ELGIS repo. 

Can any body help me out. 

Regards 

Harmandeep Singh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200907/706c3e7e/attachment.html>

From rdmailings at duif.net  Mon Sep  7 01:21:28 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 7 Sep 2020 10:21:28 +0200
Subject: [QGIS-Developer] Is a plugin for QGIS3 with the user interface
 defined by code acceptable for the repository?
In-Reply-To: <84811867.887249.1599428335626@mail.yahoo.com>
References: <84811867.887249.1599428335626.ref@mail.yahoo.com>
 <84811867.887249.1599428335626@mail.yahoo.com>
Message-ID: <7817c597-27db-4a51-3dc5-7a8504a2adde@duif.net>

On 9/6/20 11:38 PM, Luis Eduardo wrote:
> Hello everyone
> 
> I am working on a plugin, I have created a minimal Plugin, the user interface (dialog) I have defined by code. Without using Qt Designer.
> If I would like to upload this plugin to the QGIS repository, for the community in general, would it be acceptable?
> 
> In that case, how can I handle the translation of the interface into different languages. Can I do it by code?
> 
> I explain, get QSettings by knowing the language uploading the plugin this way. Is this acceptable too?
> 
> If not, how can I implement QTranslator in this case?

Hi Luis,

Yes, plugins is fine, there is rule that you only can uploade .ui files based plugins.

Yes you can do translation by code.
If you create a test plugin using the Plugin Builder plugin, you get the idea how that is using the Qt translation framework.

See for example here: https://doc.qt.io/qt-5/i18n-source-translation.html
and https://doc.qt.io/qt-5/qtlinguist-hellotr-example.html

So using the 'tr' function instead of hard coded labels for your widgets you should be able to create a <yourlanguage>.ts file (source) and then using Linguist translate those to <otherlanguage>.ts files which you then compile to <otherlanguage.qm> files which should be picked up by your plugin (by pointing to the dir where they are in your plugin. See plugin builder example for that)

HTH

Regards,

Richard Duivenvoorde



From rdmailings at duif.net  Mon Sep  7 01:45:00 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 7 Sep 2020 10:45:00 +0200
Subject: [QGIS-Developer] Fwd: Plugin Development for accessing
 PostgresSQL Database in a QtableWidget in QT Designer
In-Reply-To: <CAKG1rmXGCPBaZnxqG=QqiYMidgo85gbgB75uh9YYL_VPeTsHTQ@mail.gmail.com>
References: <CAKG1rmVvzmNF1_Gz5TOXfAu7FgJriyuSv2RvqOZw5EZ4+OphHQ@mail.gmail.com>
 <CAKG1rmXGCPBaZnxqG=QqiYMidgo85gbgB75uh9YYL_VPeTsHTQ@mail.gmail.com>
Message-ID: <008daee7-217a-f5e8-359a-3e5a6c2ef245@duif.net>

On 9/6/20 8:08 PM, SOHINI GOSWAMI wrote:
> Dear Developers,
> I would request to kindly help me with building a plugin using Qtablewidget in QT designer. The table would retrieve a postgresql using a query [Depending on the date of the date] . I have created the UI file in QT designer but unable to fetch the data from the buttons click triggers in my main python plugin file. It would be great if I could get a complete guide of writing methods on onclick -buttons and retrive the data from Postgres database.

Hi SOHINI GOSWAMI,

I think you really have to dive a little into PyQt coding.

It is hard to help without seeing what you already did. Do you maybe have your code on github/gitlab somewhere?

Maybe try to download some plugins and have a look into their code to get an idea what is needed to get a working QGIS Python plugin.

If you want to retrieve 'data' from a postgis plugin, you have to decide if you do that via QGIS (Features, if you can make that query into a filter) or directly from Postgres (you need to fetch table data yourself then using the psycopg2 module.

Regards,

Richard Duivenvoorde


From jesdial at gmail.com  Mon Sep  7 04:28:19 2020
From: jesdial at gmail.com (=?UTF-8?B?SmVzw7pzIGRlIERpZWdvIEFsYXJjw7Nu?=)
Date: Mon, 7 Sep 2020 13:28:19 +0200
Subject: [QGIS-Developer] Library for importing dwg
In-Reply-To: <CAB28AsgRk_-EmWvkn0kTXC1=9C8y=rt+wtyuwYqnENKhQY7Grw@mail.gmail.com>
References: <CAE_OVyQkT6nMGKxaZQ7Q3poOboiTGYciUVS4jQNGzUUFtSxh2g@mail.gmail.com>
 <a725be597ac66688a92267dfed4a7a16@carto.net>
 <CAE_OVyRFLmShYcqfFpR5RWmLu5_z4-dBZj6=DCjxktj8hqz_Hw@mail.gmail.com>
 <b5652c7d-f166-39f1-dfa6-cbfb02cf0cb1@carto.net>
 <CAE_OVyRz9-Kk-SCFva_5HyO+VVA3_5iTtnwpikHjqDs-S7euOg@mail.gmail.com>
 <CAB28AsgRk_-EmWvkn0kTXC1=9C8y=rt+wtyuwYqnENKhQY7Grw@mail.gmail.com>
Message-ID: <CAE_OVyTeSEOwkFkMqhYnDOKZFPs5rDdLiq89aC2Aag1C=Z-K3Q@mail.gmail.com>

OK Nyall

I will also take a look

Thanks

Jesús

El lun., 7 sept. 2020 a las 1:22, Nyall Dawson (<nyall.dawson at gmail.com>)
escribió:

> On Sat, 5 Sep 2020 at 06:11, Jesús de Diego Alarcón <jesdial at gmail.com>
> wrote:
> >
> > OK Let's try then
>
> FYI there's also libredwg -- https://github.com/LibreDWG/libredwg ,
> which is seeing a lot of development focus recently (maybe at some
> stage we should abstract out the backend dwg library in qgis to give
> users a choice of backend to use for conversion...)
>
> Nyall
>
> >
> > Thanks a lot
> >
> > Jesús de Diego
> >
> > El vie., 4 sept. 2020 a las 20:10, Andreas Neumann (<a.neumann at carto.net>)
> escribió:
> >>
> >> Hi Jesús,
> >>
> >> No - that's a misconception. Despite the name of the library it also
> reads DWG files. It's not perfect, but it reads DWG ;-)
> >>
> >> Greetings,
> >>
> >> Andreas
> >>
> >> Am 04.09.20 um 17:43 schrieb Jesús de Diego Alarcón:
> >>
> >> Hi Andreas
> >>
> >> First of all, thank you so much for your (quick) answer. I will take a
> look but it seems that libdxfrw is working for dxf files, not dwg...Any
> case I will take a look.
> >>
> >> Thanks again
> >>
> >> Jesús de Diego
> >>
> >> El vie., 4 sept. 2020 a las 14:48, Andreas Neumann (<
> a.neumann at carto.net>) escribió:
> >>>
> >>> Hi,
> >>>
> >>> It is using the libdxfrw library.
> >>>
> >>> Jürgen might have forked/patched it though, because activity in the
> original project is basically stalled -  I think you can find our version
> here: https://github.com/qgis/QGIS/tree/master/external/libdxfrw
> >>>
> >>> Greetings,
> >>>
> >>> Andreas
> >>>
> >>> On 2020-09-04 14:38, Jesús de Diego Alarcón wrote:
> >>>
> >>> Dear all
> >>>
> >>> I would like to know which library is using QGIS for importing dwg
> files (this functionality is accessible in File >  Import/Export >
> Importing a DXF or DWG file ).
> >>>
> >>> I had supposed that this functionality was using the newly-developed
> OGR CAD driver... But I have tried with ogr2ogr both command line and
> Python console and dwg files are not supported (at least the same dwf file
> I am able to import with the mentioned functionality).
> >>>
> >>> Any help will be appreciated. Thank you in advance
> >>>
> >>> Jesús de Diego
> >>>
> >>> --
> >>> Jesús de Diego Alarcón
> >>> jesdial at gmail.com
> >>>
> >>> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
> >>> Mafalda
> >>>
> >>> _______________________________________________
> >>> QGIS-Developer mailing list
> >>> QGIS-Developer at lists.osgeo.org
> >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>>
> >>>
> >>
> >>
> >> --
> >> Jesús de Diego Alarcón
> >> jesdial at gmail.com
> >>
> >> "La vida es linda, lo malo es que muchos confunden lindo con fácil."
> >> Mafalda
> >
> >
> >
> > --
> > Jesús de Diego Alarcón
> > jesdial at gmail.com
> >
> > "La vida es linda, lo malo es que muchos confunden lindo con fácil."
> > Mafalda
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Jesús de Diego Alarcón
jesdial at gmail.com

"La vida es linda, lo malo es que muchos confunden lindo con fácil."
Mafalda
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200907/adaf717e/attachment.html>

From rdmailings at duif.net  Mon Sep  7 05:56:02 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 7 Sep 2020 14:56:02 +0200
Subject: [QGIS-Developer] Is a plugin for QGIS3 with the user interface
 defined by code acceptable for the repository?
In-Reply-To: <1001363358.1043401.1599481095266@mail.yahoo.com>
References: <84811867.887249.1599428335626.ref@mail.yahoo.com>
 <84811867.887249.1599428335626@mail.yahoo.com>
 <7817c597-27db-4a51-3dc5-7a8504a2adde@duif.net>
 <1001363358.1043401.1599481095266@mail.yahoo.com>
Message-ID: <5ae6aaad-d6de-2c65-d29b-a33ad96d248d@duif.net>

On 9/7/20 2:18 PM, Luis Eduardo wrote:
> Thank you very much for responding. 
> Excuse me, for insisting, could you please clarify the answer to the first question.
> 
> Would a plugin with the user interface defined only by code (no .ui file) be acceptable for the QGIS repository? 

Yes, why should it not be?

A ui file is (via compiling with uic(?)) also converted to (python) code, so I do not see a reason why if you do this (laborious) work yourself, it would not be acceptable?

Or do (do you, or others, think) I miss something here?

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Mon Sep  7 06:01:46 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 7 Sep 2020 15:01:46 +0200
Subject: [QGIS-Developer] Is a plugin for QGIS3 with the user interface
 defined by code acceptable for the repository?
In-Reply-To: <5ae6aaad-d6de-2c65-d29b-a33ad96d248d@duif.net>
References: <84811867.887249.1599428335626.ref@mail.yahoo.com>
 <84811867.887249.1599428335626@mail.yahoo.com>
 <7817c597-27db-4a51-3dc5-7a8504a2adde@duif.net>
 <1001363358.1043401.1599481095266@mail.yahoo.com>
 <5ae6aaad-d6de-2c65-d29b-a33ad96d248d@duif.net>
Message-ID: <4cffdbe5-4bf6-5dc0-5d6f-5697003ba036@duif.net>

On 9/7/20 2:56 PM, Richard Duivenvoorde wrote:
> On 9/7/20 2:18 PM, Luis Eduardo wrote:
>> Thank you very much for responding. 
>> Excuse me, for insisting, could you please clarify the answer to the first question.
>>
>> Would a plugin with the user interface defined only by code (no .ui file) be acceptable for the QGIS repository? 

Ah, sorry. Now I see the confusion in my first answer:

"Yes, plugins is fine, there is rule that you only can uploade .ui files based plugins."
Should be:
"Yes, plugins is fine, there is *NO* rule that you only can uploade .ui files based plugins."

Sorry for the confusion.

Regards,

Richard Duivenvoorde


From delazj at gmail.com  Mon Sep  7 07:05:46 2020
From: delazj at gmail.com (DelazJ)
Date: Mon, 7 Sep 2020 16:05:46 +0200
Subject: [QGIS-Developer] Travis failing in QGIS-Documentation
In-Reply-To: <CAECJsSpTcsN2J2tgw4rk7nnmZ0TLkWLc06L-OQntTzxwDrgbEQ@mail.gmail.com>
References: <4edda8fa-8a8a-2b6f-7917-57da1859f500@gmail.com>
 <CAMtsY+ZCK_GuRu_=CfLBpC7-YfeTxAeDc=Ux+4L4OddNJmXSrg@mail.gmail.com>
 <a0f8823e-6b81-e66f-1f87-80e2e5c33178@gmail.com>
 <4e041167-402d-1c85-0752-e308be009bdf@gmail.com>
 <CAMtsY+bT0XWjVQJhM5KXT7vjB=NUC-KPy95H86xt+w-VmrBgLw@mail.gmail.com>
 <57643f60-8d41-e17e-b647-c2c4b7ea6a58@gmail.com>
 <CAMtsY+bBz=RsodFdrdHxexb8DBTqVe-q=vhHe+KHz1mPABkFaA@mail.gmail.com>
 <6c61f3e6-7e89-8a30-5d74-cc3573e4a0d1@gmail.com>
 <8318b1bb-c45e-afbf-800e-8d73ca7b37e6@duif.net>
 <b5a28bcd-6d49-5442-2cd7-7fa96e53a5c0@gmail.com>
 <CAECJsSpTcsN2J2tgw4rk7nnmZ0TLkWLc06L-OQntTzxwDrgbEQ@mail.gmail.com>
Message-ID: <CAECJsSq+aEp4GdKEeyXXDV5DMkTmFHZG_rjz-_8kcqfV=SWZxw@mail.gmail.com>

Hi devs,

A gentle ping to help us fix doc travis reports (actually PyQGIS Cookbook
tests infrastructure in). Unless there's some ongoing efforts I'm not aware
of.
Thanks.

Harrissou

Le mar. 1 sept. 2020 à 13:11, DelazJ <delazj at gmail.com> a écrit :

> Hi,
>
> Like Matteo, I can't locally test the doctest build so travis/docker are
> the masters and last resort here.
> I gave a look to the travis reports and the code testing parts of the docs
> are the reasons for failure. But I'm not sure the recent broken master
> docker is the only reason. I tried to fix some obvious issues in our code
> samples pointed by the various and changing reports of travis but there are
> a bunch of feedback I do not understand (or don't know where to look for a
> fix) so would be grateful if someone can give it a look. A single small PR
> ending with the red cross from Travis is making me crazy. I have summarized
> some of the issues at
> https://github.com/qgis/QGIS-Documentation/labels/build%2Fdoctest%2Ftravis
>
> Thanks in advance,
> Harrissou
>
>
>
> Le ven. 28 août 2020 à 10:51, matteo <matteo.ghetta at gmail.com> a écrit :
>
>> Hi Richard,
>>
>> > in is in the conf.py:
>> >
>> > https://github.com/qgis/QGIS-Documentation/blob/master/conf.py#L343
>> >
>>
>> oh right.... my fault.. but tests are still failing with a compiled
>> version of QGIS. Can I ask you how you user.mk file looks like?
>>
>> Cheers and thanks
>>
>> Matteo
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200907/3e57bd8b/attachment-0001.html>

From adenaculture at gmail.com  Mon Sep  7 11:20:08 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 7 Sep 2020 14:20:08 -0400
Subject: [QGIS-Developer] Processing Question: How to Select All with
	QgsProcessingParameterField
In-Reply-To: <1599416135890-0.post@n6.nabble.com>
References: <CABPxTTqjssygGHrP2GgpSDVnqByTJGHLwh=oda472KpHVLpL7Q@mail.gmail.com>
 <CAB28AsiTGvUdinwCG1-YjB35UUUu4Tup_CO1kBEjwkSmnLXbAg@mail.gmail.com>
 <CABPxTTq5XMQibnm=1U=kngcFJYTmP+RfPGA3Yrip+38MALUvMw@mail.gmail.com>
 <1599416135890-0.post@n6.nabble.com>
Message-ID: <CABPxTToxX=x1eTiruJQemFs64L59TqDYcKRLYidf2Hme8zB+uQ@mail.gmail.com>

Andrea,

Thanks for alerting me about this. I am now checking the QGIS version
number so that it will work with 3.4.

Calvin

On Sun, Sep 6, 2020 at 2:15 PM Andrea Giudiceandrea <andreaerdna at libero.it>
wrote:

> Please keep in mind that defaultToAllFields was introduced with QGIS 3.12,
> so
> it's not available in previous versions.
>
> KML Tools plugin 3.1.0 (declared minimum QGIS version: 3.4.0) with QGIS
> 3.10:
>
> WARNING Traceback (most recent call last):
> File
>
> "C:/Users/io/AppData/Roaming/QGIS/QGIS3\profiles\default/python/plugins\kmltools\exportKmz.py",
> line 87, in initAlgorithm
> defaultToAllFields=True
> TypeError: 'defaultToAllFields' is an unknown keyword argument
>
>
> Regards.
>
> Andrea Giudiceandrea
>
>
>
> C Hamilton wrote
> > Nyall,
> >
> > Thanks! That is exactly what I was looking for.
> >
> > Calvin
>
>
>
>
>
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200907/66d86015/attachment.html>

From rdmailings at duif.net  Tue Sep  8 00:05:05 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 8 Sep 2020 09:05:05 +0200
Subject: [QGIS-Developer] py3_env in Windows installers
Message-ID: <39a50eb0-229f-5825-4959-bec5b5f0359d@duif.net>

Hi Devs,

If you start the osgeo4w command prompt, both in standalone and osgeo4w version, you have to run py3_env before being able to use (the QGIS used) python there (or am I wrong. I tested by running osgeo4w.bat within a 3.14 standalone install)

I know this was to be able to handle both py2 and py3, but I do not think we need to use python2 anymore is it?

In that case I would propose to make py3_env part of the osgeo4w.bat file so we can instruct people to just go to the osgeo4w bat file to eventually pip install modules usable in QGIS?

Regards,

Richard Duivenvoorde

ps I'm planning to write a blog post about using the command lines from withing QGIS installers, as I think it can be very helpfull for a lot of people..

From rdmailings at duif.net  Tue Sep  8 01:07:27 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 8 Sep 2020 10:07:27 +0200
Subject: [QGIS-Developer] Fwd: [Qgis-user] Latest runtime version (2008?)
In-Reply-To: <trinity-fcf20107-d571-400d-93ac-abc932f6086c-1599551837436@3c-app-gmx-bap40>
References: <trinity-fcf20107-d571-400d-93ac-abc932f6086c-1599551837436@3c-app-gmx-bap40>
Message-ID: <b378976c-0769-0347-2e96-0e4edd0e533d@duif.net>

Hi Lukas,

I am forwarding your message to the Developers list 
https://lists.osgeo.org/mailman/listinfo/qgis-developer

I'm not sure if the 2008 runtime is actually being used (for 3.10), I hope Juergen can maybe answer this question.

Regards,

Richard Duivenvoorde




-------- Forwarded Message --------
Subject: 	[Qgis-user] Latest runtime version
Date: 	Tue, 8 Sep 2020 09:57:17 +0200
From: 	Lukas Fiddrich <l.fiddrich at gmx.de>
To: 	qgis-user at lists.osgeo.org



Dear QGIS Community,
 
Can you help me with the runtime version of QGIS 3? 
As For using QGIS at my workplace, it need to get permitted by the IT-Department. They figured out, that QGIS 3.10.9 has an outdated C++ runtime environment (Microsoft Visual C++ 2008 Redistributable - x64 9.0.30729.17). Is there any newer or older QGIS 3 version with a still supported C++ runtime environment?
 
If I am wrong here with this question, could you give me a hint where I can adress this question correctly?
 
Kind regards
Lukas
-------------- next part --------------
_______________________________________________
Qgis-user mailing list
Qgis-user at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user

From jef at norbit.de  Tue Sep  8 01:32:00 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 8 Sep 2020 10:32:00 +0200
Subject: [QGIS-Developer] py3_env in Windows installers
In-Reply-To: <39a50eb0-229f-5825-4959-bec5b5f0359d@duif.net>
References: <39a50eb0-229f-5825-4959-bec5b5f0359d@duif.net>
Message-ID: <20200908083200.pximcov4f3u7uod7@norbit.de>

Hi Richard,

On Tue, 08. Sep 2020 at 09:05:05 +0200, Richard Duivenvoorde wrote:
> If you start the osgeo4w command prompt, both in standalone and osgeo4w
> version, you have to run py3_env before being able to use (the QGIS used)
> python there (or am I wrong. I tested by running osgeo4w.bat within a 3.14
> standalone install)

> I know this was to be able to handle both py2 and py3, but I do not think we
> need to use python2 anymore is it?

py2 is still available in osgeo4w - although we don't use it anymore for QGIS.


> In that case I would propose to make py3_env part of the osgeo4w.bat file so
> we can instruct people to just go to the osgeo4w bat file to eventually pip
> install modules usable in QGIS?

You could also just move py3_env.bat to etc\ini\python3-core.bat and create an
empty py3_env.bat.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200908/59b284aa/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200908/59b284aa/attachment.ksh>

From rdmailings at duif.net  Tue Sep  8 01:45:21 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 8 Sep 2020 10:45:21 +0200
Subject: [QGIS-Developer] py3_env in Windows installers
In-Reply-To: <20200908083200.pximcov4f3u7uod7@norbit.de>
References: <39a50eb0-229f-5825-4959-bec5b5f0359d@duif.net>
 <20200908083200.pximcov4f3u7uod7@norbit.de>
Message-ID: <91cabf1c-c1af-d816-71a5-bc9b66293f89@duif.net>

On 9/8/20 10:32 AM, Jürgen E. Fischer wrote:
>> I know this was to be able to handle both py2 and py3, but I do not think we
>> need to use python2 anymore is it?
> 
> py2 is still available in osgeo4w - although we don't use it anymore for QGIS.

IS it still used by other osgeo4w components? Would be nice to clean it out if that was possible (as py2 not supported etc etc)?

>> In that case I would propose to make py3_env part of the osgeo4w.bat file so
>> we can instruct people to just go to the osgeo4w bat file to eventually pip
>> install modules usable in QGIS?
> 
> You could also just move py3_env.bat to etc\ini\python3-core.bat and create an
> empty py3_env.bat.

That is for this user yes? Or are you talking about in the sources?

I was searching for those files (py3_env etc) in sources:

https://github.com/qgis/QGIS/tree/master/ms-windows
also googled
https://trac.osgeo.org/osgeo4w

but could not find it.

Regards,

Richard Duivenvoorde





From jef at norbit.de  Tue Sep  8 05:33:55 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 8 Sep 2020 14:33:55 +0200
Subject: [QGIS-Developer] py3_env in Windows installers
In-Reply-To: <91cabf1c-c1af-d816-71a5-bc9b66293f89@duif.net>
References: <39a50eb0-229f-5825-4959-bec5b5f0359d@duif.net>
 <20200908083200.pximcov4f3u7uod7@norbit.de>
 <91cabf1c-c1af-d816-71a5-bc9b66293f89@duif.net>
Message-ID: <20200908123355.mc5bopxspnhn352e@norbit.de>

Hi Richard,

On Tue, 08. Sep 2020 at 10:45:21 +0200, Richard Duivenvoorde wrote:
> On 9/8/20 10:32 AM, Jürgen E. Fischer wrote:
> > > I know this was to be able to handle both py2 and py3, but I do not think
> > > we need to use python2 anymore is it?

> > py2 is still available in osgeo4w - although we don't use it anymore for QGIS.
 
> IS it still used by other osgeo4w components? Would be nice to clean it out
> if that was possible (as py2 not supported etc etc)?

None non-obsolete components at least.  That probably also applies to the VC
2008 runtime.

> > > In that case I would propose to make py3_env part of the osgeo4w.bat file
> > > so we can instruct people to just go to the osgeo4w bat file to eventually
> > > pip install modules usable in QGIS?

> > You could also just move py3_env.bat to etc\ini\python3-core.bat and create an
> > empty py3_env.bat.
 
> That is for this user yes? Or are you talking about in the sources?

Which user?    I'm talking about osgeo4w.   There's a etc/ini/python-core.bat
in python-core (2) that makes python2 default if it's installed and that used
to be the default installed python.  py3_env.bat was added to switch from there
to python3.  If we were going to change that, the contents of py3_env.bat
should be moved to etc/ini - so that it's sourced by o4w_env.bat, which all the
batch files that start applications source.   The osgeo4w shell itself doesn't
use any python.

All of the above is osgeo4w and not QGIS.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200908/9550211c/attachment.sig>

From rdmailings at duif.net  Tue Sep  8 06:40:24 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 8 Sep 2020 15:40:24 +0200
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
Message-ID: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>

Hi Devs,

I was hitting some timezone issues when I received some csv data in which there are timestamps like:
"2020-07-25 20:21:38 UTC"
Apparently if you read this into QGIS, the UTC IS interpreted, and you get a DateTime in your data which is (in my case) -2 hours(CET) off (well in some parts of QGIS)

This plays havoc if you for example are going to use this data in the timecontroller or expressions, see
https://github.com/qgis/QGIS/issues/38647

So I think that now the TimeController is part of QGIS, and people will start to play with Time-based data more and more (from TimeZone aware datasets like csv and postgres) we will run into issues like above.

Is there something we can do to make QGIS timezone aware?
OR should we stay far away from it (timezones are hell)...
OR should we wait with it after QGIS 4 

Regards,

Richard Duivenvoorde




From adenaculture at gmail.com  Tue Sep  8 08:00:46 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 8 Sep 2020 11:00:46 -0400
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
Message-ID: <CABPxTTrO=bbiLbNKfAhgRUv92EmLKRL-9g=a2nxFsTS+PYwV1g@mail.gmail.com>

Richard,

I would second the desire to make QGIS more timezone aware. QDateTime
supports time zones so QGIS does support it, but not much effort has gone
into really supporting it. I currently have a task to do a QGIS date/time
conversion tool with algorithms to convert between different time formats
including EPOCH time. This was something that I was planning on starting
soon. Like you said though time zones are going to be a real pain
especially if you want to take a coordinate and convert it to a time zone.
There are some python libraries I have been investigating to help with the
task.

Calvin

On Tue, Sep 8, 2020 at 9:40 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi Devs,
>
> I was hitting some timezone issues when I received some csv data in which
> there are timestamps like:
> "2020-07-25 20:21:38 UTC"
> Apparently if you read this into QGIS, the UTC IS interpreted, and you get
> a DateTime in your data which is (in my case) -2 hours(CET) off (well in
> some parts of QGIS)
>
> This plays havoc if you for example are going to use this data in the
> timecontroller or expressions, see
> https://github.com/qgis/QGIS/issues/38647
>
> So I think that now the TimeController is part of QGIS, and people will
> start to play with Time-based data more and more (from TimeZone aware
> datasets like csv and postgres) we will run into issues like above.
>
> Is there something we can do to make QGIS timezone aware?
> OR should we stay far away from it (timezones are hell)...
> OR should we wait with it after QGIS 4
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200908/8c90384f/attachment-0001.html>

From bernd.vogelgesang at gmx.de  Tue Sep  8 13:46:16 2020
From: bernd.vogelgesang at gmx.de (Bernd Vogelgesang)
Date: Tue, 8 Sep 2020 22:46:16 +0200
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
Message-ID: <2a5230c5-c845-8e30-847e-a37145da3d08@gmx.de>

I recently had some issues concerning datetimes.
Like in real life, I had to merge data from different sources, csv and
gpx, with some duplicate entries.
After a while I wondered why I couldn't find those duplicates. For some
reasons, the time values where interpreted differently while merging,
depending on the source and formatting, so I got an offset of 2 hours
for values which should have been identical.

So there seems to be some black magic going on under the hood which I
can't influence when I would not want to change all entries by hand to
make them behave consistently.

Just my 2 cents

Bernd



On 08.09.20 15:40, Richard Duivenvoorde wrote:
> Hi Devs,
>
> I was hitting some timezone issues when I received some csv data in which there are timestamps like:
> "2020-07-25 20:21:38 UTC"
> Apparently if you read this into QGIS, the UTC IS interpreted, and you get a DateTime in your data which is (in my case) -2 hours(CET) off (well in some parts of QGIS)
>
> This plays havoc if you for example are going to use this data in the timecontroller or expressions, see
> https://github.com/qgis/QGIS/issues/38647
>
> So I think that now the TimeController is part of QGIS, and people will start to play with Time-based data more and more (from TimeZone aware datasets like csv and postgres) we will run into issues like above.
>
> Is there something we can do to make QGIS timezone aware?
> OR should we stay far away from it (timezones are hell)...
> OR should we wait with it after QGIS 4
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Tue Sep  8 17:19:59 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 9 Sep 2020 10:19:59 +1000
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
Message-ID: <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>

On Tue, 8 Sep 2020 at 23:40, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> Hi Devs,
>
> I was hitting some timezone issues when I received some csv data in which there are timestamps like:
> "2020-07-25 20:21:38 UTC"
> Apparently if you read this into QGIS, the UTC IS interpreted, and you get a DateTime in your data which is (in my case) -2 hours(CET) off (well in some parts of QGIS)
>
> This plays havoc if you for example are going to use this data in the timecontroller or expressions, see
> https://github.com/qgis/QGIS/issues/38647
>
> So I think that now the TimeController is part of QGIS, and people will start to play with Time-based data more and more (from TimeZone aware datasets like csv and postgres) we will run into issues like above.
>
> Is there something we can do to make QGIS timezone aware?
> OR should we stay far away from it (timezones are hell)...
> OR should we wait with it after QGIS 4

This is a good discussion, and a very complex issue.

Here's some summary points from a recent off-list discussion I had
regarding this very topic:

-  we don't expose time zones anywhere in qgis. while the underlying
QDateTime class has good support for timezone handling, there's
no-where in QGIS you can "see " the time zone for a datetime value,
and there's no functionality present in -the expression engine or
processing to work with time zones/manipulate them.
- different data providers are handling time zones differently, but
most are just giving date time values as a "local time"/"no time zone
available" value. As described above, this inconsistency leads to
issues when you compare values from different sources. Even though the
look the same in QGIS, they aren't!!
- some underlying data sources just don't have any time zone
capabilities, or have limited capabilities. E.g. GDAL has a flag if a
datetime is UTC or "not utc/unknown", and that's it.

I think we have no choice but to start exposing time zone information
to users everywhere we have dates, and move to treating dates without
a timezone as being in "local time" (which may cause issues if
projects + data are shared between users in different time zones). We
should add timezone functionality to the expression engine, and
algorithms for converting time zones to processing. We'd also need to
add a "manual time zone override" option to temporal enabled layers --
so for those sources with ambiguous time zone information the user has
some capacity to manually pick the correct time zone.

It's definitely achievable, but it's not a trivial amount of work. I'd
estimate we're looking at ~5-7 days to do this properly (and it needs
to be done properly, covering all uses of datetime values all
throughout QGIS and the different data providers! Hacking in
one-by-one fixes in individual data providers will just make the
situation worse)...

Nyall






>
> Regards,
>
> Richard Duivenvoorde
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Wed Sep  9 02:19:27 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 9 Sep 2020 11:19:27 +0200
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
Message-ID: <4c295624-8c1e-ff45-1f55-00fb37d1da2b@duif.net>

On 9/9/20 2:19 AM, Nyall Dawson wrote:
> I think we have no choice but to start exposing time zone information
> to users everywhere we have dates, and move to treating dates without
> a timezone as being in "local time" (which may cause issues if
> projects + data are shared between users in different time zones). We
> should add timezone functionality to the expression engine, and
> algorithms for converting time zones to processing. We'd also need to
> add a "manual time zone override" option to temporal enabled layers --
> so for those sources with ambiguous time zone information the user has
> some capacity to manually pick the correct time zone.
> 
> It's definitely achievable, but it's not a trivial amount of work. I'd
> estimate we're looking at ~5-7 days to do this properly (and it needs
> to be done properly, covering all uses of datetime values all
> throughout QGIS and the different data providers! Hacking in
> one-by-one fixes in individual data providers will just make the
> situation worse)...

Well, I'm in :-)

It is probably not wise to push that in 3.16 (upcoming LTR...)  ;-)

But after that I'm happy to chip in at least one day of your (or others) time.
Others? Or is this something that can be project funded?

ALthough as said, I'm also afraid we are opening a can of worms.. date and timezones, grrr...

Regards,

Richard Duivenvoorde

From even.rouault at spatialys.com  Wed Sep  9 02:55:11 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 Sep 2020 11:55:11 +0200
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
Message-ID: <1903296.YJrTmFTrMe@even-i700>

> E.g. GDAL has a flag if a
> datetime is UTC or "not utc/unknown", and that's it.

Small precision: it also has support for explicit timezones 
(like UTC+0200)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200909/5d1052e0/attachment.html>

From ernst at pleiszenburg.de  Wed Sep  9 05:28:25 2020
From: ernst at pleiszenburg.de (Sebastian M. Ernst)
Date: Wed, 9 Sep 2020 14:28:25 +0200
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <1903296.YJrTmFTrMe@even-i700>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
 <1903296.YJrTmFTrMe@even-i700>
Message-ID: <de3fa088-6eb4-5e20-bf84-5246388b2948@pleiszenburg.de>

Hi all,

if you're going down the path of adding support for time zone
information, there is one thing that is not clear to me: If you are
planning to rely on "QDateTime" (i.e. Qt) for this purpose, you're
getting time zones based on UTC, but you're lacking support for UT1,
i.e. leap seconds and related issues. I know this is another huge can of
worms, but bear with me: For satellite imagery it actually matters. A
lot more imagery is taken from very low orbits nowadays, so a time
difference of a single second can - theoretically - account for up to
roughly 7 km. On the one hand side, most providers calibrate the imagery
and provide it with proper UTC time stamps. On the other hand side, the
way UTC is "smoothed" over UT1, i.e. how UT1 is correctly converted to
UTC and vice-versa, is not perfectly standardized. From practical
experience, too many people handle it in too many slightly different
ways. So when dealing with longer time series, going back to the
original UT1 time stamps (if available) is always the better and much
more accurate option. Having said that, if you want a future-proof
solution, you should definitely go beyond what Qt offers. I'd suggest to
look for a battle-tested library in this field with some astronomical
background. I guess you're going to try to solve this in C++, which
makes sense, but just as a reference, I'd suggest to have a look at
astropy's implementation of `Time`. It has saved me from serious trouble
a lot recently and serves as some sort of reference implementation for
many projects.

https://docs.astropy.org/en/stable/time/index.html

By the way, ArcGIS does not support this level of accuracy yet, too, if
you need another selling point. And since a lot of you are running on
PostgreSQL or supporting PostgreSQL-based setups, a little excerpt from
its manual: "Technically, PostgreSQL does not use UTC because leap
seconds are not handled." In older versions it ironically stated
"Technically, PostgreSQL uses UT1 because leap seconds are not handled."
It's a common theme across a lot of GIS software, which is more and more
becoming a thing.

Best regards,
Sebastian

From rdmailings at duif.net  Wed Sep  9 07:54:52 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 9 Sep 2020 16:54:52 +0200
Subject: [QGIS-Developer] Python editors: codepad.org, remove or alternative?
Message-ID: <50431f93-b46a-bd04-9b25-1c7cb4e02759@duif.net>

Hi Devs,

while working on the Python Console editors:

( can https://github.com/qgis/QGIS/pull/37602 be merged plz ? )

I found that the "Share on Codepad.org" menu option was throwing a stacktrace:

https://github.com/qgis/QGIS/issues/37574

I've looked into the code (it looks like a python2 version of an old version or codepad.org.
To me it looks like the site has changed so it is harder to use simple POST's to post something.
I mailed the creator of codepad.org but did not get a reply (yet).

Anybody aware of a pastebin/codepad like alternative which does NOT need a key?

Or should we just remove that menu item ("Share on Codepad.org") from the context menu in the Python Editor?

Regards,

Richard Duivenvoorde

From Chris_Peterson at Verizon.net  Wed Sep  9 11:59:43 2020
From: Chris_Peterson at Verizon.net (Chris Peterson)
Date: Wed, 9 Sep 2020 14:59:43 -0400
Subject: [QGIS-Developer] Unable to build 3.15 on CentOS 7 using GCC 9.2.0
References: <000201d686db$61e5d3a0$25b17ae0$.ref@Verizon.net>
Message-ID: <000201d686db$61e5d3a0$25b17ae0$@Verizon.net>

Developers:

I would like some help building 3.15 on CentOS 7 using GCC 9.2.0. I use
-D_GLIBCXX_USE_CXX11_ABI=0 to avoid many other errors relating to CXX11.

Is there something wrong with basic_stringstream in both
qgsbasicnumericformat.cpp and qgsfractionnumericformat.cpp?

 

[ 50%] Linking CXX shared library ../../output/lib/libqgis_core.so
CMakeFiles/qgis_core.dir/numericformats/qgsbasicnumericformat.cpp.o: In
function QgsBasicNumericFormat::formatDouble(double, QgsNumericFormatContext
const&) const': qgsbasicnumericformat.cpp:(.text+0x19d): undefined reference
to std::basic_stringstream<wchar_t, std::char_traits<wchar_t>,
std::allocator<wchar_t> >::basic_stringstream()'
CMakeFiles/qgis_core.dir/numericformats/qgsfractionnumericformat.cpp.o: In
function QgsFractionNumericFormat::formatDouble(double,
QgsNumericFormatContext const&) const':
qgsfractionnumericformat.cpp:(.text+0x1b6): undefined reference to
std::basic_stringstream<wchar_t, std::char_traits<wchar_t>,
std::allocator<wchar_t> >::basic_stringstream()'
collect2: error: ld returned 1 exit status
make[2]: *** [output/lib/libqgis_core.so.3.15.0] Error 1
make[1]: *** [src/core/CMakeFiles/qgis_core.dir/all] Error 2
make: *** [all] Error 2

 

I initially opened this as issue #38242 about a month ago.  I have been
attempting to register for this developers' list that entire time. I finally
was able to subscribe using my personal email, and only if I did NOT specify
a password on the form.

 

Regards,

Chris

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200909/19329062/attachment.html>

From denis.rouzaud at gmail.com  Thu Sep 10 23:48:34 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Fri, 11 Sep 2020 08:48:34 +0200
Subject: [QGIS-Developer] QgsLocatorAutomaticModel usage
Message-ID: <CAMtsY+bAaA2ecVD9Oo4=3kaWsyXFQ22MnDtS1EyXe7CCy_Bq7w@mail.gmail.com>

Hi list,

I see in the source code that we have a QgsLocatorAutomaticModel
https://qgis.org/api/classQgsLocatorAutomaticModel.html#details

I don't see it used anywhere in the source code.

What is the use case for this? Is this meant for plugins?

Cheers,
Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200911/6a4144bd/attachment.html>

From vcloarec at gmail.com  Fri Sep 11 18:24:54 2020
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Fri, 11 Sep 2020 21:24:54 -0400
Subject: [QGIS-Developer] API export and ui files
Message-ID: <CAHaTM5XKKbuqU-2KpeOxivniBDSo8cPQ9x9ewFJ_cq8HLWz__Q@mail.gmail.com>

Hi devs,

I wonder about gui API and installed ui files. There are a lot of inclusion
of "ui_*.h" in the export GUI header files  that are not in the installed
include dir.
So when using the API for standalone applications with only the installed
header files, there are issues because missing files.
Maybe I have missed something, but maybe all "ui_*.h" files that are in the
export headers have to be also in the installed include dir, no?

Vincent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200911/8e9b3c5a/attachment.html>

From matthias at opengis.ch  Fri Sep 11 22:57:07 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Sat, 12 Sep 2020 07:57:07 +0200
Subject: [QGIS-Developer] API export and ui files
In-Reply-To: <CAHaTM5XKKbuqU-2KpeOxivniBDSo8cPQ9x9ewFJ_cq8HLWz__Q@mail.gmail.com>
References: <CAHaTM5XKKbuqU-2KpeOxivniBDSo8cPQ9x9ewFJ_cq8HLWz__Q@mail.gmail.com>
Message-ID: <CAC7zN94n4DhzPhFyNcpU8R5U2ObdnbF+M23tEDSQogdCUzt60g@mail.gmail.com>

Hi Vincent,

Your observation sounds correct to me, without these files it will not be
possible to use gui classes in 3rd party applications.
Looks like these have not been used that often in the past years :-D

Matthias

On Sat, Sep 12, 2020 at 3:25 AM Vincent Cloarec <vcloarec at gmail.com> wrote:

> Hi devs,
>
> I wonder about gui API and installed ui files. There are a lot of
> inclusion of "ui_*.h" in the export GUI header files  that are not in the
> installed include dir.
> So when using the API for standalone applications with only the installed
> header files, there are issues because missing files.
> Maybe I have missed something, but maybe all "ui_*.h" files that are in
> the export headers have to be also in the installed include dir, no?
>
> Vincent
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200912/0fa52893/attachment.html>

From l.fiddrich at gmx.de  Sat Sep 12 01:27:29 2020
From: l.fiddrich at gmx.de (l.fiddrich at gmx.de)
Date: Sat, 12 Sep 2020 10:27:29 +0200
Subject: [QGIS-Developer] =?utf-8?b?V2c6wqBGd2Q6IFtRZ2lzLXVzZXJdIExhdGVz?=
	=?utf-8?q?t_runtime_version_QGIS_3?=
Message-ID: <trinity-a8d309cf-2027-4485-8421-cc419a9998b1-1599899249680@msvc-mesg-gmx023>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200912/d6e45ed9/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Attached Message Part
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200912/d6e45ed9/attachment.ksh>

From andreaerdna at libero.it  Sat Sep 12 08:22:51 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Sat, 12 Sep 2020 08:22:51 -0700 (MST)
Subject: [QGIS-Developer] The build of weekly snapshots stopped in
	February
In-Reply-To: <1593099658965-0.post@n6.nabble.com>
References: <1584573519660-0.post@n6.nabble.com>
 <1593099658965-0.post@n6.nabble.com>
Message-ID: <1599924171374-0.post@n6.nabble.com>

Andrea Giudiceandrea wrote
> Since the latest weekly OSGeo4W snapshots is still QGIS-OSGeo4W-3.11.0-8
> 25-Feb-2020, wouldn't it be appropriate to remove the information of the
> weekly snapshot availability from the Website?

I accidentally noticed that the OSGeo4W weekly snapshots are available again
in https://qgis.org/downloads/weekly/ starting a couple of months ago.

If the snapshots creation will be stable, I would suggest to revert
https://github.com/qgis/QGIS-Website/commit/8a444defa0ab60a029de18b65907caa131be2f4a
in order to let users be aware of and use them again.

Regards.

Andrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From gdt at lexort.com  Sat Sep 12 10:17:11 2020
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 12 Sep 2020 13:17:11 -0400
Subject: [QGIS-Developer] qgis build fails with cmake 3.18.2, NetBSD,
	quoting of $
Message-ID: <rmift7m52zs.fsf@s1.lexort.com>


I co-maintain the pkgsrc entry for qgis (and also look after proj, gdal,
postgis).

pkgsrc uses gmake because there are file names with spaces (json help),
and there is some quoting problem with BSD make.  (Also because of the
present issue with $ quoting.)

pkgsrc currently has 3.10.7 (yes, I know I should update to 3.10.10),
which builds fine with cmake 3.17.3 on NetBSD, when qgis is built with
gmake.

With our current cmake 3.18.2 (or .1), the build fails because a
generated makefile:

  work/qgis-3.10.7/build/src/core/CMakeFiles/qgis_core.dir/build.make

escapes e.g. resources/function_help/json/$area to have four dollar signs:

  src/core/qgsexpression_texts.cpp: ../resources/function_help/json/$$$$area

rather than the two $ that gmake expects.  (However, BSD make, which we
don't use, wants 4, for complicated and perhaps not valid reasons.)

My working (but unsupported by reality) theory is that cmake is trying
to accomodate BSD make and overquoting $, but is doing so because it is
running on NetBSD, rather than because it knows BSD make will be used to
build.  However, I don't see this in the release notes.

So far there have not been reports of other programs not building, but
qgis is unusual in that it has files with $ in them.

I am looking for a minimal fix to patch qgis or cmake to make this
build.

Hints would be appreciated on the following subjects:

  cmake really did or didn't change quoting of $

  The extra quoting is or isn't something somehow done by qgis.

  The questions I really should have asked, if I understtood this
  better.

  This is fixed in 3.10.10 :-)

Thanks,
Greg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200912/ad6bf548/attachment.sig>

From peter.petrik at lutraconsulting.co.uk  Sat Sep 12 12:24:01 2020
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Sat, 12 Sep 2020 21:24:01 +0200
Subject: [QGIS-Developer] qgis build fails with cmake 3.18.2, NetBSD,
 quoting of $
In-Reply-To: <rmift7m52zs.fsf@s1.lexort.com>
References: <rmift7m52zs.fsf@s1.lexort.com>
Message-ID: <CA+T_MsLLm3LGi9yCaaE6LDPvgpkM-Z_Ts32HWGTbSQ8NX8gmtQ@mail.gmail.com>

Hi,
looks like duplicate  of https://github.com/qgis/QGIS/pull/38103
I fixed it by using of ninja instead of make

P.

On Sat, Sep 12, 2020 at 7:17 PM Greg Troxel <gdt at lexort.com> wrote:

>
> I co-maintain the pkgsrc entry for qgis (and also look after proj, gdal,
> postgis).
>
> pkgsrc uses gmake because there are file names with spaces (json help),
> and there is some quoting problem with BSD make.  (Also because of the
> present issue with $ quoting.)
>
> pkgsrc currently has 3.10.7 (yes, I know I should update to 3.10.10),
> which builds fine with cmake 3.17.3 on NetBSD, when qgis is built with
> gmake.
>
> With our current cmake 3.18.2 (or .1), the build fails because a
> generated makefile:
>
>   work/qgis-3.10.7/build/src/core/CMakeFiles/qgis_core.dir/build.make
>
> escapes e.g. resources/function_help/json/$area to have four dollar signs:
>
>   src/core/qgsexpression_texts.cpp:
> ../resources/function_help/json/$$$$area
>
> rather than the two $ that gmake expects.  (However, BSD make, which we
> don't use, wants 4, for complicated and perhaps not valid reasons.)
>
> My working (but unsupported by reality) theory is that cmake is trying
> to accomodate BSD make and overquoting $, but is doing so because it is
> running on NetBSD, rather than because it knows BSD make will be used to
> build.  However, I don't see this in the release notes.
>
> So far there have not been reports of other programs not building, but
> qgis is unusual in that it has files with $ in them.
>
> I am looking for a minimal fix to patch qgis or cmake to make this
> build.
>
> Hints would be appreciated on the following subjects:
>
>   cmake really did or didn't change quoting of $
>
>   The extra quoting is or isn't something somehow done by qgis.
>
>   The questions I really should have asked, if I understtood this
>   better.
>
>   This is fixed in 3.10.10 :-)
>
> Thanks,
> Greg
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200912/73284d6c/attachment.html>

From gdt at lexort.com  Sat Sep 12 12:28:46 2020
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 12 Sep 2020 15:28:46 -0400
Subject: [QGIS-Developer] qgis build fails with cmake 3.18.2, NetBSD,
	quoting of $
In-Reply-To: <CA+T_MsLLm3LGi9yCaaE6LDPvgpkM-Z_Ts32HWGTbSQ8NX8gmtQ@mail.gmail.com>
 (Peter Petrik's message of "Sat, 12 Sep 2020 21:24:01 +0200")
References: <rmift7m52zs.fsf@s1.lexort.com>
 <CA+T_MsLLm3LGi9yCaaE6LDPvgpkM-Z_Ts32HWGTbSQ8NX8gmtQ@mail.gmail.com>
Message-ID: <rmi7dsy4wwh.fsf@s1.lexort.com>


Peter Petrik <peter.petrik at lutraconsulting.co.uk> writes:

> Hi,
> looks like duplicate  of https://github.com/qgis/QGIS/pull/38103
> I fixed it by using of ninja instead of make

Are you saying:

  qgis has code to change $ to $$ for quoting, and has for a long time

  cmake 3.18 now quotes $ to $$, and thus we end up with $$$$area

  This has nothing to do with NetBSD or BSD make

?

If so, then I suppose that should be merged to LTR, and/or I should
basically cherry-pick it into pkgsrc.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200912/5e25a28f/attachment.sig>

From gdt at lexort.com  Sun Sep 13 06:43:33 2020
From: gdt at lexort.com (Greg Troxel)
Date: Sun, 13 Sep 2020 09:43:33 -0400
Subject: [QGIS-Developer] qgis build fails with cmake 3.18.2, NetBSD,
	quoting of $
In-Reply-To: <rmi7dsy4wwh.fsf@s1.lexort.com> (Greg Troxel's message of "Sat,
 12 Sep 2020 15:28:46 -0400")
References: <rmift7m52zs.fsf@s1.lexort.com>
 <CA+T_MsLLm3LGi9yCaaE6LDPvgpkM-Z_Ts32HWGTbSQ8NX8gmtQ@mail.gmail.com>
 <rmi7dsy4wwh.fsf@s1.lexort.com>
Message-ID: <rmik0wx23ne.fsf@s1.lexort.com>


Greg Troxel <gdt at lexort.com> writes:

> Peter Petrik <peter.petrik at lutraconsulting.co.uk> writes:
>
>> Hi,
>> looks like duplicate  of https://github.com/qgis/QGIS/pull/38103
>> I fixed it by using of ninja instead of make
>
> Are you saying:
>
>   qgis has code to change $ to $$ for quoting, and has for a long time
>
>   cmake 3.18 now quotes $ to $$, and thus we end up with $$$$area
>
>   This has nothing to do with NetBSD or BSD make
>
> ?
>
> If so, then I suppose that should be merged to LTR, and/or I should
> basically cherry-pick it into pkgsrc.

I commented in the PR, but after reading more, including some cmake
sources, I believe my three statements above are correct, that the
change in the PR is in 3.10.10.  3.10.10 builds  find in NetBSD/pkgsrc
with cmake 3.18.2.

Thanks again for the hint/pointer - that saved me a tremendous amount of
time.


  
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200913/3c379a54/attachment.sig>

From nyall.dawson at gmail.com  Sun Sep 13 14:39:04 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 14 Sep 2020 07:39:04 +1000
Subject: [QGIS-Developer] URGENT: please hold off on releasing new windows
	packages for 3.10/3.14
Message-ID: <CAB28AsgFEnzWJ5Xo68d+XB+e3U04ixbNPb0ubKp31PjszD=VAA@mail.gmail.com>

Hi lists,

Can I please ask that we put a temporary hold on releasing the new
Windows binaries for the latest patch releases?

https://github.com/qgis/QGIS/issues/38720 is an extremely serious
issue which breaks QGIS installs, and I've seen this one reported a
number of times via different channels.

Given the seriousness of this, I would ask that we do NOT release the
patch releases yet until someone has had time to investigate and
resolve this issue.

Thanks!
Nyall

From marco at qgis.org  Sun Sep 13 23:22:21 2020
From: marco at qgis.org (Marco Bernasocchi)
Date: Mon, 14 Sep 2020 08:22:21 +0200
Subject: [QGIS-Developer] [Qgis-psc] URGENT: please hold off on
 releasing new windows packages for 3.10/3.14
In-Reply-To: <CAB28AsgFEnzWJ5Xo68d+XB+e3U04ixbNPb0ubKp31PjszD=VAA@mail.gmail.com>
References: <CAB28AsgFEnzWJ5Xo68d+XB+e3U04ixbNPb0ubKp31PjszD=VAA@mail.gmail.com>
Message-ID: <CAB2ZMRAj=-KF2ofr+oj27WqeGLN1eRVec2Dg7p25Xr0DonHCEQ@mail.gmail.com>

Hi Nyall, I clearly trust you judgment here so for me +1

@Jurgen?

@Nyall is there someone already looking into this? as part of the bug
fixing round?

cheers Marco

On Sun, 13 Sep 2020, 23:39 Nyall Dawson, <nyall.dawson at gmail.com> wrote:

> Hi lists,
>
> Can I please ask that we put a temporary hold on releasing the new
> Windows binaries for the latest patch releases?
>
> https://github.com/qgis/QGIS/issues/38720 is an extremely serious
> issue which breaks QGIS installs, and I've seen this one reported a
> number of times via different channels.
>
> Given the seriousness of this, I would ask that we do NOT release the
> patch releases yet until someone has had time to investigate and
> resolve this issue.
>
> Thanks!
> Nyall
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200914/ee674d5b/attachment.html>

From nyall.dawson at gmail.com  Sun Sep 13 23:27:06 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 14 Sep 2020 16:27:06 +1000
Subject: [QGIS-Developer] [Qgis-psc] URGENT: please hold off on
 releasing new windows packages for 3.10/3.14
In-Reply-To: <CAB2ZMRAj=-KF2ofr+oj27WqeGLN1eRVec2Dg7p25Xr0DonHCEQ@mail.gmail.com>
References: <CAB28AsgFEnzWJ5Xo68d+XB+e3U04ixbNPb0ubKp31PjszD=VAA@mail.gmail.com>
 <CAB2ZMRAj=-KF2ofr+oj27WqeGLN1eRVec2Dg7p25Xr0DonHCEQ@mail.gmail.com>
Message-ID: <CAB28AsgX_Y9jS7vv_QPYe5oWmsKpi-X_J68Yh+hgmr+GrVapEg@mail.gmail.com>

On Mon, 14 Sep 2020 at 16:22, Marco Bernasocchi <marco at qgis.org> wrote:
>
> Hi Nyall, I clearly trust you judgment here so for me +1
>
> @Jurgen?
>
> @Nyall is there someone already looking into this? as part of the bug fixing round?

I'm 90% sure it's come from https://github.com/qgis/QGIS/pull/38420 --
but I don't have any understanding behind how that change works.
Hopefully Jurgen can clarify!

Nyall

>
> cheers Marco
>
> On Sun, 13 Sep 2020, 23:39 Nyall Dawson, <nyall.dawson at gmail.com> wrote:
>>
>> Hi lists,
>>
>> Can I please ask that we put a temporary hold on releasing the new
>> Windows binaries for the latest patch releases?
>>
>> https://github.com/qgis/QGIS/issues/38720 is an extremely serious
>> issue which breaks QGIS installs, and I've seen this one reported a
>> number of times via different channels.
>>
>> Given the seriousness of this, I would ask that we do NOT release the
>> patch releases yet until someone has had time to investigate and
>> resolve this issue.
>>
>> Thanks!
>> Nyall
>> _______________________________________________
>> Qgis-psc mailing list
>> Qgis-psc at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/qgis-psc

From jef at norbit.de  Mon Sep 14 00:52:02 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Mon, 14 Sep 2020 09:52:02 +0200
Subject: [QGIS-Developer] [Qgis-psc] URGENT: please hold off on
 releasing new windows packages for 3.10/3.14
In-Reply-To: <CAB28AsgX_Y9jS7vv_QPYe5oWmsKpi-X_J68Yh+hgmr+GrVapEg@mail.gmail.com>
References: <CAB28AsgFEnzWJ5Xo68d+XB+e3U04ixbNPb0ubKp31PjszD=VAA@mail.gmail.com>
 <CAB2ZMRAj=-KF2ofr+oj27WqeGLN1eRVec2Dg7p25Xr0DonHCEQ@mail.gmail.com>
 <CAB28AsgX_Y9jS7vv_QPYe5oWmsKpi-X_J68Yh+hgmr+GrVapEg@mail.gmail.com>
Message-ID: <20200914075202.xc5wnvmlkwcssdjy@norbit.de>

Hi,

On Mon, 14. Sep 2020 at 16:27:06 +1000, Nyall Dawson wrote:
> On Mon, 14 Sep 2020 at 16:22, Marco Bernasocchi <marco at qgis.org> wrote:
> > @Jurgen?

> > @Nyall is there someone already looking into this? as part of the bug fixing round?
> 
> I'm 90% sure it's come from https://github.com/qgis/QGIS/pull/38420 --
> but I don't have any understanding behind how that change works.
> Hopefully Jurgen can clarify!

It's a followup to f17097b1, which makes QGIS use the expected pathes to load
DLLs - so a Qt/OpenSSL etc. in system32 is no longer an issue.   Unfortunately
there are also python extension that load DLLs from pathes that the add upfront
so d411d66b3d is need to cover for that.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200914/e72f30b2/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200914/e72f30b2/attachment.ksh>

From adam.rousell at heigit.org  Mon Sep 14 04:28:37 2020
From: adam.rousell at heigit.org (Adam Rousell)
Date: Mon, 14 Sep 2020 13:28:37 +0200
Subject: [QGIS-Developer] Transferring ownership of QGIS plugin
Message-ID: <a73556f3-bd71-b154-d9a3-99bd7ef94f53@heigit.org>

Hi there,

is there any information somewhere about how I can transfer the 
ownership of a QGIS plugin from one OSGeo ID to another?

Thanks

Adam


From rdmailings at duif.net  Mon Sep 14 04:38:16 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 14 Sep 2020 13:38:16 +0200
Subject: [QGIS-Developer] Transferring ownership of QGIS plugin
In-Reply-To: <a73556f3-bd71-b154-d9a3-99bd7ef94f53@heigit.org>
References: <a73556f3-bd71-b154-d9a3-99bd7ef94f53@heigit.org>
Message-ID: <783d41f5-40d4-fe3c-49d8-8eaee95bcf88@duif.net>

On 9/14/20 1:28 PM, Adam Rousell wrote:
> Hi there,
> 
> is there any information somewhere about how I can transfer the ownership of a QGIS plugin from one OSGeo ID to another?

Hi Adam,

Yes, you can just ask on this list:
- which plugin
- reason, why you want to transfer ownership (to you or from you)
- parties in it (from and to)
- are both ok with it?
- maybe some prove for that...

Then one of the maintainers of the plugins repo will be able to 'transfer' maintainership OR ownership.

Regards,

Richard Duivenvoorde

PS if you sent me the info, I can have a look

From r.nijssen at terglobo.nl  Mon Sep 14 07:26:05 2020
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Mon, 14 Sep 2020 16:26:05 +0200
Subject: [QGIS-Developer] CRS Selector: Specify CRS for layer Annotations ?
Message-ID: <32126dda-8e2c-3bbe-709f-01d8cc2328fa@terglobo.nl>

For a few weeks in QGIS master, when I start the application, when I 
start a new empty project or (even) when I close the application, the 
CRS Selector Dialog pops up with the question:

Specify CRS for layer Annotations

It only happens when my CRS settings are set to: "Prompt for CRS" for 
new layers without CRS info.

So I guess something is creating a layer called "Annotations" in the 
background. Tried to find it in the source code but I failed.

Anyone a clue?

Thanks!
Raymond


From rdmailings at duif.net  Mon Sep 14 07:36:28 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 14 Sep 2020 16:36:28 +0200
Subject: [QGIS-Developer] CRS Selector: Specify CRS for layer
 Annotations ?
In-Reply-To: <32126dda-8e2c-3bbe-709f-01d8cc2328fa@terglobo.nl>
References: <32126dda-8e2c-3bbe-709f-01d8cc2328fa@terglobo.nl>
Message-ID: <2b5f2703-9be2-dc14-02b4-82251ac972e2@duif.net>

On 9/14/20 4:26 PM, Raymond Nijssen wrote:
> For a few weeks in QGIS master, when I start the application, when I start a new empty project or (even) when I close the application, the CRS Selector Dialog pops up with the question:
> 
> Specify CRS for layer Annotations
> 
> It only happens when my CRS settings are set to: "Prompt for CRS" for new layers without CRS info.
> 
> So I guess something is creating a layer called "Annotations" in the background. Tried to find it in the source code but I failed.
> 
> Anyone a clue?

Mmm, I can confirm here on latest master of today...

I had never seen it before, but as soon as I checked 'Prompt for CRS' in Settings/CRS/CRS for layers, it popped up for 'Annotations'...

Regards,

Richard Duivenvoorde

From werner.macho at gmail.com  Mon Sep 14 07:51:31 2020
From: werner.macho at gmail.com (Werner Macho)
Date: Mon, 14 Sep 2020 16:51:31 +0200
Subject: [QGIS-Developer] CRS Selector: Specify CRS for layer
 Annotations ?
In-Reply-To: <32126dda-8e2c-3bbe-709f-01d8cc2328fa@terglobo.nl>
References: <32126dda-8e2c-3bbe-709f-01d8cc2328fa@terglobo.nl>
Message-ID: <38bc8af14731988133ac1978eff6d40d332f18fa.camel@gmail.com>

Hi Raymond,

Have you checked if it is probably a plugin causing this?

regards
Werner

On Mon, 2020-09-14 at 16:26 +0200, Raymond Nijssen wrote:
> For a few weeks in QGIS master, when I start the application, when I 
> start a new empty project or (even) when I close the application,
> the 
> CRS Selector Dialog pops up with the question:
> 
> Specify CRS for layer Annotations
> 
> It only happens when my CRS settings are set to: "Prompt for CRS"
> for 
> new layers without CRS info.
> 
> So I guess something is creating a layer called "Annotations" in the 
> background. Tried to find it in the source code but I failed.
> 
> Anyone a clue?
> 
> Thanks!
> Raymond
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From delazj at gmail.com  Mon Sep 14 07:52:33 2020
From: delazj at gmail.com (DelazJ)
Date: Mon, 14 Sep 2020 16:52:33 +0200
Subject: [QGIS-Developer] CRS Selector: Specify CRS for layer
	Annotations ?
In-Reply-To: <38bc8af14731988133ac1978eff6d40d332f18fa.camel@gmail.com>
References: <32126dda-8e2c-3bbe-709f-01d8cc2328fa@terglobo.nl>
 <38bc8af14731988133ac1978eff6d40d332f18fa.camel@gmail.com>
Message-ID: <CAECJsSrGEd4M4ibYd9ao=on80=_gU5h+NmtZY5X8=yL=QgEW9g@mail.gmail.com>

Hi,

Something to do with the annotation layer
https://github.com/qgis/QGIS/pull/38021?

Harrissou

Le lun. 14 sept. 2020 à 16:51, Werner Macho <werner.macho at gmail.com> a
écrit :

> Hi Raymond,
>
> Have you checked if it is probably a plugin causing this?
>
> regards
> Werner
>
> On Mon, 2020-09-14 at 16:26 +0200, Raymond Nijssen wrote:
> > For a few weeks in QGIS master, when I start the application, when I
> > start a new empty project or (even) when I close the application,
> > the
> > CRS Selector Dialog pops up with the question:
> >
> > Specify CRS for layer Annotations
> >
> > It only happens when my CRS settings are set to: "Prompt for CRS"
> > for
> > new layers without CRS info.
> >
> > So I guess something is creating a layer called "Annotations" in the
> > background. Tried to find it in the source code but I failed.
> >
> > Anyone a clue?
> >
> > Thanks!
> > Raymond
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200914/1ba7a8e1/attachment.html>

From r.nijssen at terglobo.nl  Mon Sep 14 08:38:08 2020
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Mon, 14 Sep 2020 17:38:08 +0200
Subject: [QGIS-Developer] CRS Selector: Specify CRS for layer
 Annotations ?
In-Reply-To: <CAECJsSrGEd4M4ibYd9ao=on80=_gU5h+NmtZY5X8=yL=QgEW9g@mail.gmail.com>
References: <32126dda-8e2c-3bbe-709f-01d8cc2328fa@terglobo.nl>
 <38bc8af14731988133ac1978eff6d40d332f18fa.camel@gmail.com>
 <CAECJsSrGEd4M4ibYd9ao=on80=_gU5h+NmtZY5X8=yL=QgEW9g@mail.gmail.com>
Message-ID: <ea725dad-9c7a-4dab-cde8-2e0cbbda5256@terglobo.nl>

Just filed the bug:
https://github.com/qgis/QGIS/issues/38739

@Werner
No, I tried with a new clean profile without plugins.

@Harrissou
Quite likely! :+1:

Raymond


On 14-09-2020 16:52, DelazJ wrote:
> Hi,
> 
> Something to do with the annotation layer 
> https://github.com/qgis/QGIS/pull/38021?
> 
> Harrissou
> 
> Le lun. 14 sept. 2020 à 16:51, Werner Macho <werner.macho at gmail.com 
> <mailto:werner.macho at gmail.com>> a écrit :
> 
>     Hi Raymond,
> 
>     Have you checked if it is probably a plugin causing this?
> 
>     regards
>     Werner
> 
>     On Mon, 2020-09-14 at 16:26 +0200, Raymond Nijssen wrote:
>      > For a few weeks in QGIS master, when I start the application, when I
>      > start a new empty project or (even) when I close the application,
>      > the
>      > CRS Selector Dialog pops up with the question:
>      >
>      > Specify CRS for layer Annotations
>      >
>      > It only happens when my CRS settings are set to: "Prompt for CRS"
>      > for
>      > new layers without CRS info.
>      >
>      > So I guess something is creating a layer called "Annotations" in the
>      > background. Tried to find it in the source code but I failed.
>      >
>      > Anyone a clue?
>      >
>      > Thanks!
>      > Raymond
>      >
>      > _______________________________________________
>      > QGIS-Developer mailing list
>      > QGIS-Developer at lists.osgeo.org
>     <mailto:QGIS-Developer at lists.osgeo.org>
>      > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>      > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

From cavallini at faunalia.it  Mon Sep 14 09:27:20 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 14 Sep 2020 18:27:20 +0200
Subject: [QGIS-Developer] Invisible, unloadable Postgresql FDW
Message-ID: <11153365-bc0c-4a15-c985-fa34536bf730@faunalia.it>

Hi all,
I noticed that tables imported in PostgreSQL as foreign data wrapper are
not visible, neither from file browser nor from DB Manager. They can be
listed smoothly from psql with the usual `\detr` command.
Is this a known limit (possibly a bug)?
Cheers.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From cavallini at faunalia.it  Mon Sep 14 23:41:40 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 15 Sep 2020 08:41:40 +0200
Subject: [QGIS-Developer] Invisible, unloadable Postgresql FDW
In-Reply-To: <11153365-bc0c-4a15-c985-fa34536bf730@faunalia.it>
References: <11153365-bc0c-4a15-c985-fa34536bf730@faunalia.it>
Message-ID: <b3d9b187-5f5f-ea43-4151-d1a712af0465@faunalia.it>

Ticket opened:
https://github.com/qgis/QGIS/issues/38757
I'm available for tests and help if anyoone is interested.
Cheers.

Il 14/09/20 18:27, Paolo Cavallini ha scritto:
> Hi all,
> I noticed that tables imported in PostgreSQL as foreign data wrapper are
> not visible, neither from file browser nor from DB Manager. They can be
> listed smoothly from psql with the usual `\detr` command.
> Is this a known limit (possibly a bug)?
> Cheers.
> 

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From imajimatika at gmail.com  Tue Sep 15 04:00:29 2020
From: imajimatika at gmail.com (Ismail Sunni)
Date: Tue, 15 Sep 2020 13:00:29 +0200
Subject: [QGIS-Developer] Building QGIS using Qt 5.14.2
Message-ID: <CAEh5jtH6nhHu-2eXEqV0xc_iRMDdFtzBz7qpfQH4diq5P9DU7Q@mail.gmail.com>

Dear QGIS developers,

I am trying to build QGIS using Qt 5.14.2. I have installed the Qt 5.14.2.
I have also set the CMake configuration (all Qt5*_Dir parameter) to their
respective directory under Qt 5.14.2 director. For example
Qt5Core_DIR:PATH=/home/isunni/Qt/5.14.2/gcc_64/lib/cmake/Qt5Core.

Unfortunately, when I run the build command (e.g. ninja -j6) I got some
error like this below:

In file included from
> /home/isunni/Qt/5.14.2/gcc_64/include/QtCore/qcalendar.h:48:0,
>                  from
> /home/isunni/Qt/5.14.2/gcc_64/include/QtCore/QtCore:37,
>                  from /home/isunni/dev/cpp/QGIS/src/gui/qgshelp.h:19,
>                  from
> /home/isunni/dev/cpp/QGIS/src/providers/postgres/qgspgnewconnection.h:21,
>                  from
> /home/isunni/dev/cpp/QGIS/src/providers/postgres/qgspgnewconnection.cpp:22:
> /home/isunni/Qt/5.14.2/gcc_64/include/QtCore/qstringview.h: In
> instantiation of ‘constexpr QStringView::QStringView(const Pointer&) [with
> Pointer = const char16_t*; typename
> std::enable_if<QtPrivate::IsCompatiblePointer<Pointer>::value, bool>::type
> <anonymous> = 1]’:
> /home/isunni/Qt/5.14.2/gcc_64/include/QtCore/qstringbuilder.h:378:71:
> required from here
> /home/isunni/Qt/5.14.2/gcc_64/include/QtCore/qstringview.h:201:53: error:
> ‘lengthHelperPointer’ was not declared in this scope
>          : QStringView(str, str ? lengthHelperPointer(str) : 0) {}
>                                   ~~~~~~~~~~~~~~~~~~~^~~~~


It seems, it still refers to the system installed Qt (5.9), but I am not
sure which one since I already set the Qt5*_Dir to QT 5.14.2 and the
CMAKE_PREFIX_PATH is also set to /home/isunni/Qt/5.14.2/gcc_64 (where my Qt
5.14.2 located)

Is there a parameter that I should update beside the Qt5*_Dir to make it
work? Or is there any library or package that I need to install
additionally?

I am using Ubuntu 18.04 and can build QGIS using the system installed Qt
(5.9) fine.

Thanks!

NB: Here is my CMakeCache:
https://gist.github.com/ismailsunni/c61b6b51c83753df39fea67b5e848b80

-- 
Ismail Sunni
Software Engineer
ismailsunni.id
ismailsunni.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200915/463a7e5d/attachment.html>

From a.neumann at carto.net  Tue Sep 15 07:52:17 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 15 Sep 2020 16:52:17 +0200
Subject: [QGIS-Developer] PG loading broken in master
Message-ID: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>

Hi, 

Some recent commit broke all my projects that load PG layers with a
datasource like: 

<datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056
type=Point checkPrimaryKeyUnicity='1' table="schema"."table" (geometrie)
sql=</datasource> 

Means a combination of PG service name and auth config. None of the PG
layers in the project can be loaded. 

Any idea what recent commit might be the culprit? 

The same project loads fine in a recent 3.10 build. 

Thanks and greetings, 

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200915/00b949dc/attachment.html>

From apasotti at gmail.com  Tue Sep 15 08:02:58 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 15 Sep 2020 17:02:58 +0200
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
Message-ID: <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>

On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net> wrote:
>
> Hi,
>
> Some recent commit broke all my projects that load PG layers with a datasource like:
>
> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056 type=Point checkPrimaryKeyUnicity='1' table="schema"."table" (geometrie) sql=</datasource>
>
> Means a combination of PG service name and auth config. None of the PG layers in the project can be loaded.
>
> Any idea what recent commit might be the culprit?


Sorry I don't, but I'm in bug fixing mode right now and working on
other PG issues, if you have any chance to let me debug your project
please let me know.

Cheers

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From a.neumann at carto.net  Tue Sep 15 08:05:29 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 15 Sep 2020 17:05:29 +0200
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
Message-ID: <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>

Ok -  

I am currently building older versions of master to find out which
commit still worked. 

Will let you know, if I know more. 

Thanks, 

Andreas 

On 2020-09-15 17:02, Alessandro Pasotti wrote:

> On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net> wrote: 
> 
>> Hi,
>> 
>> Some recent commit broke all my projects that load PG layers with a datasource like:
>> 
>> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056 type=Point checkPrimaryKeyUnicity='1' table="schema"."table" (geometrie) sql=</datasource>
>> 
>> Means a combination of PG service name and auth config. None of the PG layers in the project can be loaded.
>> 
>> Any idea what recent commit might be the culprit?
> 
> Sorry I don't, but I'm in bug fixing mode right now and working on
> other PG issues, if you have any chance to let me debug your project
> please let me know.
> 
> Cheers
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200915/d7f79d64/attachment.html>

From jgr at di.uminho.pt  Tue Sep 15 08:40:59 2020
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Tue, 15 Sep 2020 16:40:59 +0100
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
 <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
Message-ID: <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>

Hi Andreas,

Just a quick question: if both are present, should one be ignored? Which
auth configuration should be used in that case?

Regards,

Jorge

On 15/09/20 16:05, Andreas Neumann wrote:
> Ok - 
> 
> I am currently building older versions of master to find out which
> commit still worked.
> 
> Will let you know, if I know more.
> 
> Thanks,
> 
> Andreas
> 
> On 2020-09-15 17:02, Alessandro Pasotti wrote:
> 
>> On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net
>> <mailto:a.neumann at carto.net>> wrote:
>>>
>>> Hi,
>>>
>>> Some recent commit broke all my projects that load PG layers with a
>>> datasource like:
>>>
>>> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056
>>> type=Point checkPrimaryKeyUnicity='1' table="schema"."table"
>>> (geometrie) sql=</datasource>
>>>
>>> Means a combination of PG service name and auth config. None of the
>>> PG layers in the project can be loaded.
>>>
>>> Any idea what recent commit might be the culprit?
>>
>>
>> Sorry I don't, but I'm in bug fixing mode right now and working on
>> other PG issues, if you have any chance to let me debug your project
>> please let me know.
>>
>> Cheers
> 
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Informática
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
Móvel: +351 910333888
skype: nabocudnosor

From a.neumann at carto.net  Tue Sep 15 08:46:23 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 15 Sep 2020 17:46:23 +0200
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
 <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
 <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>
Message-ID: <ba853dda274f2fde2d899bef3cf9af80@carto.net>

Hi Jorge, 

There is only one authcfg. The service configuration doesn't contain
auth information - just host, port and db. It is quite normal that you
have a service name and an authcfg in the same data source. 

I am currently compiling older commits to find out which commit still
worked. 

Probably I know more tomorrow. 

Greetings, 

Andreas 

On 2020-09-15 17:40, Jorge Gustavo Rocha wrote:

> Hi Andreas,
> 
> Just a quick question: if both are present, should one be ignored? Which
> auth configuration should be used in that case?
> 
> Regards,
> 
> Jorge
> 
> On 15/09/20 16:05, Andreas Neumann wrote: Ok - 
> 
> I am currently building older versions of master to find out which
> commit still worked.
> 
> Will let you know, if I know more.
> 
> Thanks,
> 
> Andreas
> 
> On 2020-09-15 17:02, Alessandro Pasotti wrote:
> 
> On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net
> <mailto:a.neumann at carto.net>> wrote: 
> Hi,
> 
> Some recent commit broke all my projects that load PG layers with a
> datasource like:
> 
> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056
> type=Point checkPrimaryKeyUnicity='1' table="schema"."table"
> (geometrie) sql=</datasource>
> 
> Means a combination of PG service name and auth config. None of the
> PG layers in the project can be loaded.
> 
> Any idea what recent commit might be the culprit? 
> 
> Sorry I don't, but I'm in bug fixing mode right now and working on
> other PG issues, if you have any chance to let me debug your project
> please let me know.
> 
> Cheers

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

J. Gustavo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200915/16fd67be/attachment.html>

From tim at kartoza.com  Tue Sep 15 14:35:12 2020
From: tim at kartoza.com (Tim Sutton)
Date: Tue, 15 Sep 2020 22:35:12 +0100
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <ba853dda274f2fde2d899bef3cf9af80@carto.net>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
 <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
 <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>
 <ba853dda274f2fde2d899bef3cf9af80@carto.net>
Message-ID: <CAES-DZTj0x3sL9XeVSFL2JQYS7E5rQx5kT01UkvWkspyOHg=0g@mail.gmail.com>

Hi Andreas


If you are not already aware of it, check out git bisect, which helps you
to isolate a breaking commit quickly.

https://www.metaltoad.com/blog/beginners-guide-git-bisect-process-elimination

Regards

Tim

On Tue, 15 Sep 2020, 16:46 Andreas Neumann, <a.neumann at carto.net> wrote:

> Hi Jorge,
>
> There is only one authcfg. The service configuration doesn't contain auth
> information - just host, port and db. It is quite normal that you have a
> service name and an authcfg in the same data source.
>
> I am currently compiling older commits to find out which commit still
> worked.
>
> Probably I know more tomorrow.
>
> Greetings,
>
> Andreas
>
> On 2020-09-15 17:40, Jorge Gustavo Rocha wrote:
>
> Hi Andreas,
>
> Just a quick question: if both are present, should one be ignored? Which
> auth configuration should be used in that case?
>
> Regards,
>
> Jorge
>
> On 15/09/20 16:05, Andreas Neumann wrote:
>
> Ok -
>
> I am currently building older versions of master to find out which
> commit still worked.
>
> Will let you know, if I know more.
>
> Thanks,
>
> Andreas
>
> On 2020-09-15 17:02, Alessandro Pasotti wrote:
>
> On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net
> <mailto:a.neumann at carto.net>> wrote:
>
>
> Hi,
>
> Some recent commit broke all my projects that load PG layers with a
> datasource like:
>
> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056
> type=Point checkPrimaryKeyUnicity='1' table="schema"."table"
> (geometrie) sql=</datasource>
>
> Means a combination of PG service name and auth config. None of the
> PG layers in the project can be loaded.
>
> Any idea what recent commit might be the culprit?
>
>
>
> Sorry I don't, but I'm in bug fixing mode right now and working on
> other PG issues, if you have any chance to let me debug your project
> please let me know.
>
> Cheers
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> J. Gustavo
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200915/3d9c18c5/attachment.html>

From a.neumann at carto.net  Wed Sep 16 00:40:33 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed, 16 Sep 2020 09:40:33 +0200
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <CAES-DZTj0x3sL9XeVSFL2JQYS7E5rQx5kT01UkvWkspyOHg=0g@mail.gmail.com>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
 <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
 <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>
 <ba853dda274f2fde2d899bef3cf9af80@carto.net>
 <CAES-DZTj0x3sL9XeVSFL2JQYS7E5rQx5kT01UkvWkspyOHg=0g@mail.gmail.com>
Message-ID: <d1357d122da904a495a666294054acc7@carto.net>

Ok - I am trying to learn git bisect, but I'm really confused to how it
works: 

Here is what I did: 

$ git bisect start                                                      
                                                                        
                                                                        
                           
$ git bisect good c6e28828dd3c9d0459033643ced4ba8994d7bc92              
                                                                        
                      
$ git bisect bad 1c2b4ae2b0f3add7767d473f2b4137d7de9afd24 
Bisecting: 18 revisions left to test after this (roughly 4 steps) 
[89e4d4925a7ff26561acde84a861986cb30af961] enable QgsMeshTriangulation
with SIP and change SIP_CONCAT_PARTS 

Why on earth is git bisect checking out something older than the good
commit? Really strange ... 

I would have expected that git bisect would check out something between
the good and the bad commit. 

Confused ... 

Andreas                                                                 
                                                                        
                        

On 2020-09-15 23:35, Tim Sutton wrote:

> Hi Andreas 
> 
> If you are not already aware of it, check out git bisect, which helps you to isolate a breaking commit quickly. 
> 
> https://www.metaltoad.com/blog/beginners-guide-git-bisect-process-elimination 
> 
> Regards 
> 
> Tim 
> 
> On Tue, 15 Sep 2020, 16:46 Andreas Neumann, <a.neumann at carto.net> wrote: 
> 
> Hi Jorge, 
> 
> There is only one authcfg. The service configuration doesn't contain auth information - just host, port and db. It is quite normal that you have a service name and an authcfg in the same data source. 
> 
> I am currently compiling older commits to find out which commit still worked. 
> 
> Probably I know more tomorrow. 
> 
> Greetings, 
> 
> Andreas 
> 
> On 2020-09-15 17:40, Jorge Gustavo Rocha wrote: 
> Hi Andreas,
> 
> Just a quick question: if both are present, should one be ignored? Which
> auth configuration should be used in that case?
> 
> Regards,
> 
> Jorge
> 
> On 15/09/20 16:05, Andreas Neumann wrote: Ok - 
> 
> I am currently building older versions of master to find out which
> commit still worked.
> 
> Will let you know, if I know more.
> 
> Thanks,
> 
> Andreas
> 
> On 2020-09-15 17:02, Alessandro Pasotti wrote:
> 
> On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net
> <mailto:a.neumann at carto.net>> wrote: 
> Hi,
> 
> Some recent commit broke all my projects that load PG layers with a
> datasource like:
> 
> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056
> type=Point checkPrimaryKeyUnicity='1' table="schema"."table"
> (geometrie) sql=</datasource>
> 
> Means a combination of PG service name and auth config. None of the
> PG layers in the project can be loaded.
> 
> Any idea what recent commit might be the culprit? 
> 
> Sorry I don't, but I'm in bug fixing mode right now and working on
> other PG issues, if you have any chance to let me debug your project
> please let me know.
> 
> Cheers

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

J. Gustavo 

 _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/ed33af8d/attachment.html>

From tim at kartoza.com  Wed Sep 16 01:28:43 2020
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 16 Sep 2020 09:28:43 +0100
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <d1357d122da904a495a666294054acc7@carto.net>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
 <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
 <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>
 <ba853dda274f2fde2d899bef3cf9af80@carto.net>
 <CAES-DZTj0x3sL9XeVSFL2JQYS7E5rQx5kT01UkvWkspyOHg=0g@mail.gmail.com>
 <d1357d122da904a495a666294054acc7@carto.net>
Message-ID: <CAES-DZQsNHi5CLwdoovTGYNfAFEWEbQmaOm0qyaSJgp8GV_fmw@mail.gmail.com>

Hi

Hmm I never had that problem - I just googled for a tutorial for you though
so I didnt test to see if the tutorial was doing things correctly - you may
want to try another source of info e.g.

https://git-scm.com/docs/git-bisect

Regards

Tim

On Wed, Sep 16, 2020 at 8:40 AM Andreas Neumann <a.neumann at carto.net> wrote:

> Ok - I am trying to learn git bisect, but I'm really confused to how it
> works:
>
> Here is what I did:
>
> $ git bisect start
>
> $ git bisect good c6e28828dd3c9d0459033643ced4ba8994d7bc92
>
> $ git bisect bad 1c2b4ae2b0f3add7767d473f2b4137d7de9afd24
> Bisecting: 18 revisions left to test after this (roughly 4 steps)
> [89e4d4925a7ff26561acde84a861986cb30af961] enable QgsMeshTriangulation
> with SIP and change SIP_CONCAT_PARTS
>
> Why on earth is git bisect checking out something older than the good
> commit? Really strange ...
>
> I would have expected that git bisect would check out something between
> the good and the bad commit.
>
> Confused ...
>
> Andreas
>
>
>
> On 2020-09-15 23:35, Tim Sutton wrote:
>
> Hi Andreas
>
>
> If you are not already aware of it, check out git bisect, which helps you
> to isolate a breaking commit quickly.
>
>
> https://www.metaltoad.com/blog/beginners-guide-git-bisect-process-elimination
>
> Regards
>
> Tim
>
> On Tue, 15 Sep 2020, 16:46 Andreas Neumann, <a.neumann at carto.net> wrote:
>
> Hi Jorge,
>
> There is only one authcfg. The service configuration doesn't contain auth
> information - just host, port and db. It is quite normal that you have a
> service name and an authcfg in the same data source.
>
> I am currently compiling older commits to find out which commit still
> worked.
>
> Probably I know more tomorrow.
>
> Greetings,
>
> Andreas
>
> On 2020-09-15 17:40, Jorge Gustavo Rocha wrote:
>
> Hi Andreas,
>
> Just a quick question: if both are present, should one be ignored? Which
> auth configuration should be used in that case?
>
> Regards,
>
> Jorge
>
> On 15/09/20 16:05, Andreas Neumann wrote:
>
> Ok -
>
> I am currently building older versions of master to find out which
> commit still worked.
>
> Will let you know, if I know more.
>
> Thanks,
>
> Andreas
>
> On 2020-09-15 17:02, Alessandro Pasotti wrote:
>
> On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net
> <mailto:a.neumann at carto.net>> wrote:
>
>
> Hi,
>
> Some recent commit broke all my projects that load PG layers with a
> datasource like:
>
> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056
> type=Point checkPrimaryKeyUnicity='1' table="schema"."table"
> (geometrie) sql=</datasource>
>
> Means a combination of PG service name and auth config. None of the
> PG layers in the project can be loaded.
>
> Any idea what recent commit might be the culprit?
>
>
>
> Sorry I don't, but I'm in bug fixing mode right now and working on
> other PG issues, if you have any chance to let me debug your project
> please let me know.
>
> Cheers
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> J. Gustavo
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>

-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/c8460555/attachment-0001.html>

From a.neumann at carto.net  Wed Sep 16 01:38:28 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed, 16 Sep 2020 10:38:28 +0200
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <CAES-DZQsNHi5CLwdoovTGYNfAFEWEbQmaOm0qyaSJgp8GV_fmw@mail.gmail.com>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
 <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
 <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>
 <ba853dda274f2fde2d899bef3cf9af80@carto.net>
 <CAES-DZTj0x3sL9XeVSFL2JQYS7E5rQx5kT01UkvWkspyOHg=0g@mail.gmail.com>
 <d1357d122da904a495a666294054acc7@carto.net>
 <CAES-DZQsNHi5CLwdoovTGYNfAFEWEbQmaOm0qyaSJgp8GV_fmw@mail.gmail.com>
Message-ID: <1a681525313a965d922137bc0400b167@carto.net>

It seems like the second and third checkout from git bisect is now
between the good old start and the bad commit. So apparently only the
first checkout from git bisect was outside the range, the next one
inside. Perhaps this has to do with the fact that the checkouts need to
be dividable by a certain number? 

Anyway - I'm getting closer to the culprit ;-) 

Andreas 

On 2020-09-16 10:28, Tim Sutton wrote:

> Hi 
> 
> Hmm I never had that problem - I just googled for a tutorial for you though so I didnt test to see if the tutorial was doing things correctly - you may want to try another source of info e.g. 
> 
> https://git-scm.com/docs/git-bisect 
> 
> Regards 
> 
> Tim 
> 
> On Wed, Sep 16, 2020 at 8:40 AM Andreas Neumann <a.neumann at carto.net> wrote: 
> 
> Ok - I am trying to learn git bisect, but I'm really confused to how it works: 
> 
> Here is what I did: 
> 
> $ git bisect start                                                                                                                                                                                                                                    
> $ git bisect good c6e28828dd3c9d0459033643ced4ba8994d7bc92                                                                                                              
> $ git bisect bad 1c2b4ae2b0f3add7767d473f2b4137d7de9afd24 
> Bisecting: 18 revisions left to test after this (roughly 4 steps) 
> [89e4d4925a7ff26561acde84a861986cb30af961] enable QgsMeshTriangulation with SIP and change SIP_CONCAT_PARTS 
> 
> Why on earth is git bisect checking out something older than the good commit? Really strange ... 
> 
> I would have expected that git bisect would check out something between the good and the bad commit. 
> 
> Confused ... 
> 
> Andreas                                                                                                                                                                   
> 
> On 2020-09-15 23:35, Tim Sutton wrote: 
> 
> Hi Andreas 
> 
> If you are not already aware of it, check out git bisect, which helps you to isolate a breaking commit quickly. 
> 
> https://www.metaltoad.com/blog/beginners-guide-git-bisect-process-elimination 
> 
> Regards 
> 
> Tim 
> 
> On Tue, 15 Sep 2020, 16:46 Andreas Neumann, <a.neumann at carto.net> wrote: 
> 
> Hi Jorge, 
> 
> There is only one authcfg. The service configuration doesn't contain auth information - just host, port and db. It is quite normal that you have a service name and an authcfg in the same data source. 
> 
> I am currently compiling older commits to find out which commit still worked. 
> 
> Probably I know more tomorrow. 
> 
> Greetings, 
> 
> Andreas 
> 
> On 2020-09-15 17:40, Jorge Gustavo Rocha wrote: 
> Hi Andreas,
> 
> Just a quick question: if both are present, should one be ignored? Which
> auth configuration should be used in that case?
> 
> Regards,
> 
> Jorge
> 
> On 15/09/20 16:05, Andreas Neumann wrote: Ok - 
> 
> I am currently building older versions of master to find out which
> commit still worked.
> 
> Will let you know, if I know more.
> 
> Thanks,
> 
> Andreas
> 
> On 2020-09-15 17:02, Alessandro Pasotti wrote:
> 
> On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net
> <mailto:a.neumann at carto.net>> wrote: 
> Hi,
> 
> Some recent commit broke all my projects that load PG layers with a
> datasource like:
> 
> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056
> type=Point checkPrimaryKeyUnicity='1' table="schema"."table"
> (geometrie) sql=</datasource>
> 
> Means a combination of PG service name and auth config. None of the
> PG layers in the project can be loaded.
> 
> Any idea what recent commit might be the culprit? 
> 
> Sorry I don't, but I'm in bug fixing mode right now and working on
> other PG issues, if you have any chance to let me debug your project
> please let me know.
> 
> Cheers

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

J. Gustavo 

 _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer 

-- 

------------------------------------------------------------------------------------------


​ 
Tim Sutton 
Visit http://kartoza.com [1] to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development 
* GIS Training 
* Consulting Services 

Skype: timlinux Irc: timlinux on #qgis at freenode.net [2] 

Tim is a member of the QGIS Project Steering Committee 
-------------------------------------------------------------------------------------------

Kartoza is a merger between Linfiniti and Afrispatial 

 

Links:
------
[1] http://kartoza.com/
[2] http://freenode.net/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/ad230b82/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blocked.gif
Type: image/gif
Size: 118 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/ad230b82/attachment.gif>

From tim at kartoza.com  Wed Sep 16 01:39:08 2020
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 16 Sep 2020 09:39:08 +0100
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <1a681525313a965d922137bc0400b167@carto.net>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
 <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
 <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>
 <ba853dda274f2fde2d899bef3cf9af80@carto.net>
 <CAES-DZTj0x3sL9XeVSFL2JQYS7E5rQx5kT01UkvWkspyOHg=0g@mail.gmail.com>
 <d1357d122da904a495a666294054acc7@carto.net>
 <CAES-DZQsNHi5CLwdoovTGYNfAFEWEbQmaOm0qyaSJgp8GV_fmw@mail.gmail.com>
 <1a681525313a965d922137bc0400b167@carto.net>
Message-ID: <CAES-DZQPgwYanrQ98WCg2C1Yx-rqHbj2JZ6CNbbtLHC_shcHbA@mail.gmail.com>

Glad to hear it!

On Wed, Sep 16, 2020 at 9:38 AM Andreas Neumann <a.neumann at carto.net> wrote:

> It seems like the second and third checkout from git bisect is now between
> the good old start and the bad commit. So apparently only the first
> checkout from git bisect was outside the range, the next one inside.
> Perhaps this has to do with the fact that the checkouts need to be
> dividable by a certain number?
>
> Anyway - I'm getting closer to the culprit ;-)
>
> Andreas
>
> On 2020-09-16 10:28, Tim Sutton wrote:
>
> Hi
>
> Hmm I never had that problem - I just googled for a tutorial for you
> though so I didnt test to see if the tutorial was doing things correctly -
> you may want to try another source of info e.g.
>
> https://git-scm.com/docs/git-bisect
>
> Regards
>
> Tim
>
> On Wed, Sep 16, 2020 at 8:40 AM Andreas Neumann <a.neumann at carto.net>
> wrote:
>
> Ok - I am trying to learn git bisect, but I'm really confused to how it
> works:
>
> Here is what I did:
>
> $ git bisect start
>
> $ git bisect good c6e28828dd3c9d0459033643ced4ba8994d7bc92
>
> $ git bisect bad 1c2b4ae2b0f3add7767d473f2b4137d7de9afd24
> Bisecting: 18 revisions left to test after this (roughly 4 steps)
> [89e4d4925a7ff26561acde84a861986cb30af961] enable QgsMeshTriangulation
> with SIP and change SIP_CONCAT_PARTS
>
> Why on earth is git bisect checking out something older than the good
> commit? Really strange ...
>
> I would have expected that git bisect would check out something between
> the good and the bad commit.
>
> Confused ...
>
> Andreas
>
>
>
> On 2020-09-15 23:35, Tim Sutton wrote:
>
> Hi Andreas
>
>
> If you are not already aware of it, check out git bisect, which helps you
> to isolate a breaking commit quickly.
>
>
> https://www.metaltoad.com/blog/beginners-guide-git-bisect-process-elimination
>
> Regards
>
> Tim
>
> On Tue, 15 Sep 2020, 16:46 Andreas Neumann, <a.neumann at carto.net> wrote:
>
> Hi Jorge,
>
> There is only one authcfg. The service configuration doesn't contain auth
> information - just host, port and db. It is quite normal that you have a
> service name and an authcfg in the same data source.
>
> I am currently compiling older commits to find out which commit still
> worked.
>
> Probably I know more tomorrow.
>
> Greetings,
>
> Andreas
>
> On 2020-09-15 17:40, Jorge Gustavo Rocha wrote:
>
> Hi Andreas,
>
> Just a quick question: if both are present, should one be ignored? Which
> auth configuration should be used in that case?
>
> Regards,
>
> Jorge
>
> On 15/09/20 16:05, Andreas Neumann wrote:
>
> Ok -
>
> I am currently building older versions of master to find out which
> commit still worked.
>
> Will let you know, if I know more.
>
> Thanks,
>
> Andreas
>
> On 2020-09-15 17:02, Alessandro Pasotti wrote:
>
> On Tue, Sep 15, 2020 at 4:52 PM Andreas Neumann <a.neumann at carto.net
> <mailto:a.neumann at carto.net>> wrote:
>
>
> Hi,
>
> Some recent commit broke all my projects that load PG layers with a
> datasource like:
>
> <datasource>service='pub' authcfg=sogis00 key='t_id' srid=2056
> type=Point checkPrimaryKeyUnicity='1' table="schema"."table"
> (geometrie) sql=</datasource>
>
> Means a combination of PG service name and auth config. None of the
> PG layers in the project can be loaded.
>
> Any idea what recent commit might be the culprit?
>
>
>
> Sorry I don't, but I'm in bug fixing mode right now and working on
> other PG issues, if you have any chance to let me debug your project
> please let me know.
>
> Cheers
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> J. Gustavo
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
>
> --
>
> ------------------------------------------------------------------------------------------
> ​
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Skype: timlinux Irc: timlinux on #qgis at freenode.net
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> Kartoza is a merger between Linfiniti and Afrispatial
>
>
>

-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/565a3608/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blocked.gif
Type: image/gif
Size: 118 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/565a3608/attachment-0001.gif>

From cavallini at faunalia.it  Wed Sep 16 08:13:52 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 16 Sep 2020 17:13:52 +0200
Subject: [QGIS-Developer] Which qgis-dev in osgeo4w?
Message-ID: <0aaf2b43-2ad6-0114-3781-3654f262bb01@faunalia.it>

Hi all,
I see from
https://www.qgis.org/en/site/forusers/download.html
that the nightly is called qgis-dev-full
whereas in
http://download.osgeo.org/osgeo4w/x86_64/versions.html
it is called qgis-full-dev, but it does not seem up to date (2.99.0-2);
qgis-dev, 3.15.0-54 might be the correct one. Should the website be updated?
BTW, how can an user know which revision has been compiled, before
actually installing it?
Cheers.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From strk at kbt.io  Wed Sep 16 08:29:05 2020
From: strk at kbt.io (Sandro Santilli)
Date: Wed, 16 Sep 2020 17:29:05 +0200
Subject: [QGIS-Developer] PG loading broken in master
In-Reply-To: <1a681525313a965d922137bc0400b167@carto.net>
References: <40d3f96e01cf04b3c7432f4670ad724c@carto.net>
 <CAL5Q673-o8fhrBwR6itPQZ12=L0zmixdnKOxue2_z0HuWOMitQ@mail.gmail.com>
 <ba806cacfbe1332d3a8e3b2dbeb09421@carto.net>
 <45b91647-c2d8-1e0c-8426-5ed1ab077b05@di.uminho.pt>
 <ba853dda274f2fde2d899bef3cf9af80@carto.net>
 <CAES-DZTj0x3sL9XeVSFL2JQYS7E5rQx5kT01UkvWkspyOHg=0g@mail.gmail.com>
 <d1357d122da904a495a666294054acc7@carto.net>
 <CAES-DZQsNHi5CLwdoovTGYNfAFEWEbQmaOm0qyaSJgp8GV_fmw@mail.gmail.com>
 <1a681525313a965d922137bc0400b167@carto.net>
Message-ID: <20200916152905.GA4756@lif>

On Wed, Sep 16, 2020 at 10:38:28AM +0200, Andreas Neumann wrote:
> It seems like the second and third checkout from git bisect is now
> between the good old start and the bad commit. So apparently only the
> first checkout from git bisect was outside the range, the next one
> inside. Perhaps this has to do with the fact that the checkouts need to
> be dividable by a certain number?

Just a guess: merges with a parent _before_ the good commit were
present in the history from the bad commit ?

--strk;

From jef at norbit.de  Wed Sep 16 08:46:39 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Wed, 16 Sep 2020 17:46:39 +0200
Subject: [QGIS-Developer] Which qgis-dev in osgeo4w?
Message-ID: <20200916154639.zpipyayxcl3i3jas@norbit.de>

Hi Paolo,

On Wed, 16. Sep 2020 at 17:13:52 +0200, Paolo Cavallini wrote:
> https://www.qgis.org/en/site/forusers/download.html
> that the nightly is called qgis-dev-full
> whereas in
> http://download.osgeo.org/osgeo4w/x86_64/versions.html
> it is called qgis-full-dev, but it does not seem up to date (2.99.0-2);
> qgis-dev, 3.15.0-54 might be the correct one. Should the website be updated?
> BTW, how can an user know which revision has been compiled, before
> actually installing it?

qgis-full-dev doesn't contain files.  It's just a list of useful, but not
required qgis dependencies (eg. python extensions for plugins or gdal-ecw).
And it doesn't necessarily change which each release.

The result of the nightly builds is qgis-dev / qgis-rel-dev / qgis-ltr-dev.
And https://www.qgis.org/en/site/forusers/alldownloads.html has the SHAs of
those builds.

The standalone installers are made from the "full" packages, ie. contain more
packages than the bare minimum.


Jürgen


PS: the ongoing master build is for 8929e74a57, so it will have 1e715580af69.

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/e28834ef/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/e28834ef/attachment.ksh>

From adenaculture at gmail.com  Wed Sep 16 08:55:14 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 16 Sep 2020 11:55:14 -0400
Subject: [QGIS-Developer] Adding Field Calculator Functions - Best Practices
	/ Avoiding Name Conflicts
Message-ID: <CABPxTTrKYdPCsrQzVJhimfz8U-_41NzrGxtT9KOrsbH-akEpvw@mail.gmail.com>

Greetings,

Because of a user request I have been starting to expose Lat Lon Tools
coordinate format conversion functions. I found out today that if you
accidentally call one of your functions the same name as one of the
existing functions, it causes QGIS to crash immediately. It got me thinking
about the best practices for releasing field calculator functions. As other
developers create their own field calculator functions there is the
potential for major problems. I would say that if there is a name conflict
it shouldn't crash QGIS.

These are the function names I currently have in Lat Lon Tools.

mgrs, mgrs_100km, mgrs_east, mgrs_north, mgrs_to_point

Here are additional function names I have added that have not yet been
uploaded to the QGIS plugin repo and more are on the way

utm, utm_epsg, utm_hemisphere, utm_to_point, utm_zone, dms, ddmmss

I like simple function names, but because of concerns that there could be
name conflicts with other QGIS plugin developers I am wondering if a plugin
name prefix should be added such as ll_mgrs for the Lat Lon Tools mgrs
conversion function.

What are your thoughts?

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/8ccee3d2/attachment.html>

From cavallini at faunalia.it  Wed Sep 16 09:14:48 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 16 Sep 2020 18:14:48 +0200
Subject: [QGIS-Developer] Which qgis-dev in osgeo4w?
In-Reply-To: <20200916154639.zpipyayxcl3i3jas@norbit.de>
References: <20200916154639.zpipyayxcl3i3jas@norbit.de>
Message-ID: <bd2cdab4-14a1-331a-3c3b-01e64bad728b@faunalia.it>

Thanks a lot Juergen. So apparently the website is slightly wrong.
Cheers.

Il 16/09/20 17:46, Jürgen E. Fischer ha scritto:
> Hi Paolo,
> 
> On Wed, 16. Sep 2020 at 17:13:52 +0200, Paolo Cavallini wrote:
>> https://www.qgis.org/en/site/forusers/download.html
>> that the nightly is called qgis-dev-full
>> whereas in
>> http://download.osgeo.org/osgeo4w/x86_64/versions.html
>> it is called qgis-full-dev, but it does not seem up to date (2.99.0-2);
>> qgis-dev, 3.15.0-54 might be the correct one. Should the website be updated?
>> BTW, how can an user know which revision has been compiled, before
>> actually installing it?
> 
> qgis-full-dev doesn't contain files.  It's just a list of useful, but not
> required qgis dependencies (eg. python extensions for plugins or gdal-ecw).
> And it doesn't necessarily change which each release.
> 
> The result of the nightly builds is qgis-dev / qgis-rel-dev / qgis-ltr-dev.
> And https://www.qgis.org/en/site/forusers/alldownloads.html has the SHAs of
> those builds.
> 
> The standalone installers are made from the "full" packages, ie. contain more
> packages than the bare minimum.
> 
> 
> Jürgen
> 
> 
> PS: the ongoing master build is for 8929e74a57, so it will have 1e715580af69.
> 

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200916/db0cd0e2/attachment.sig>

From nyall.dawson at gmail.com  Wed Sep 16 15:44:45 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 17 Sep 2020 08:44:45 +1000
Subject: [QGIS-Developer] Adding Field Calculator Functions - Best
 Practices / Avoiding Name Conflicts
In-Reply-To: <CABPxTTrKYdPCsrQzVJhimfz8U-_41NzrGxtT9KOrsbH-akEpvw@mail.gmail.com>
References: <CABPxTTrKYdPCsrQzVJhimfz8U-_41NzrGxtT9KOrsbH-akEpvw@mail.gmail.com>
Message-ID: <CAB28AsjTSH8NSpGft8j7yeQvyUANG-i9m-jfvr5VCdAJ0apA9Q@mail.gmail.com>

On Thu, 17 Sep 2020 at 01:55, C Hamilton <adenaculture at gmail.com> wrote:
>
> Greetings,
>
> Because of a user request I have been starting to expose Lat Lon Tools coordinate format conversion functions. I found out today that if you accidentally call one of your functions the same name as one of the existing functions, it causes QGIS to crash immediately. It got me thinking about the best practices for releasing field calculator functions. As other developers create their own field calculator functions there is the potential for major problems. I would say that if there is a name conflict it shouldn't crash QGIS.
>
> These are the function names I currently have in Lat Lon Tools.
>
> mgrs, mgrs_100km, mgrs_east, mgrs_north, mgrs_to_point
>
> Here are additional function names I have added that have not yet been uploaded to the QGIS plugin repo and more are on the way
>
> utm, utm_epsg, utm_hemisphere, utm_to_point, utm_zone, dms, ddmmss
>
> I like simple function names, but because of concerns that there could be name conflicts with other QGIS plugin developers I am wondering if a plugin name prefix should be added such as ll_mgrs for the Lat Lon Tools mgrs conversion function.
>
> What are your thoughts?

These sound like really useful functions of widespread appeal. Have
you considered implementing them in QGIS itself? I'd be happy to
assist!

Nyall



>
> Thanks,
>
> Calvin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Wed Sep 16 16:21:05 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 17 Sep 2020 09:21:05 +1000
Subject: [QGIS-Developer] Backporting and 3.10 -- a reminder
Message-ID: <CAB28AsgfDxcZOSC+_2JKan31O0jCZ8Fw-mQDQgDNWjhg+7YDkw@mail.gmail.com>

Hi list,

Some quick reminders about how the current 3.10 LTR should be handled
during the 3.16 bug fixing round. My apologies in advance about the
tone here, but I feel strong language IS required in order to
reinforce the severity of this message!

1. At this point in time, the 3.10 LTR is mature and we need to take
EXTREME care when backporting fixes to it. Only low risk, high-impact
bug fixes should be backported at this stage. Minor bug fixes or high
risk changes should NOT be backported, and instead should be included
in 3.16 only. !!!!!!!!!!!!!!!!!!!THE RISK OF REPUTATION HARM TO QGIS
CAUSED BY INTRODUCING REGRESSIONS IN 3.10 CANNOT BE
UNDERSTATED!!!!!!!!!!!!!

2. If I wasn't clear enough in (1): DON'T BE SELFISH!. It doesn't
matter how important a minor/high risk bug fix is to YOU/YOUR customer
-- think of all the other millions of users of QGIS who will be
impacted if you introduce a regression!!

3. Matthias Kuhn and I are the acting gatekeepers to the LTR branch.
PSC haven't yet made these roles official, but they DID give us
direction to act in this role for the present. DO NOT MERGE TO LTR
WITHOUT MATTHIAS OR MY APPROVAL. (If you disagree with this, PLEASE
raise objections on the PSC list. But until further direction from PSC
this is the status quo and we'll both be carrying out this role).

4. In order to protect the stability of LTR, Matthias and I introduced
the one-month-delay for backport inclusion policy a few cycles ago.
This has proved very valuable, and has prevented numerous serious
regressions from ever touching the LTR branch. (win!) We'll manage
this process by tagging 3.10 backports with a "NOT FOR MERGE" label,
and then as soon as the backport is approved by someone (which
**doesn't** have to be Matthias or me, it just has to be someone who
isn't the original developer) then the backport will be moved to the
"collected pending backports PR" (eg
https://github.com/qgis/QGIS/pull/38748). We're doing all the hard
work here to keep things easy for you and to keep the PR queue
flowing.

5. The only exceptions to the one-month-delay policy are:
- crash fixes or serious data corruption fixes
- fixes which repair regressions which have been introduced in an LTR
patch release
Backports meeting these criteria can be merged immediately without the
time delay, but again, Matthias and I will manage this.

(and now for the carrot): IMO 3.10 is a great release, and in a very
good state. I'm proud of how mature and stable 3.10 is, and how stable
it is. Let's keep it that way :D

Nyall

From peter.petrik at lutraconsulting.co.uk  Wed Sep 16 22:31:51 2020
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Thu, 17 Sep 2020 07:31:51 +0200
Subject: [QGIS-Developer] Backporting and 3.10 -- a reminder
In-Reply-To: <CAB28AsgfDxcZOSC+_2JKan31O0jCZ8Fw-mQDQgDNWjhg+7YDkw@mail.gmail.com>
References: <CAB28AsgfDxcZOSC+_2JKan31O0jCZ8Fw-mQDQgDNWjhg+7YDkw@mail.gmail.com>
Message-ID: <CA+T_MsKSqTah_pZB5WCSCDx+yhQ4Y_aS-TOz97FM0nMCaDm6Pg@mail.gmail.com>

Understood, thanks for (re-)clarification and doing the hard work there.
P.

On Thu, Sep 17, 2020 at 1:21 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> Hi list,
>
> Some quick reminders about how the current 3.10 LTR should be handled
> during the 3.16 bug fixing round. My apologies in advance about the
> tone here, but I feel strong language IS required in order to
> reinforce the severity of this message!
>
> 1. At this point in time, the 3.10 LTR is mature and we need to take
> EXTREME care when backporting fixes to it. Only low risk, high-impact
> bug fixes should be backported at this stage. Minor bug fixes or high
> risk changes should NOT be backported, and instead should be included
> in 3.16 only. !!!!!!!!!!!!!!!!!!!THE RISK OF REPUTATION HARM TO QGIS
> CAUSED BY INTRODUCING REGRESSIONS IN 3.10 CANNOT BE
> UNDERSTATED!!!!!!!!!!!!!
>
> 2. If I wasn't clear enough in (1): DON'T BE SELFISH!. It doesn't
> matter how important a minor/high risk bug fix is to YOU/YOUR customer
> -- think of all the other millions of users of QGIS who will be
> impacted if you introduce a regression!!
>
> 3. Matthias Kuhn and I are the acting gatekeepers to the LTR branch.
> PSC haven't yet made these roles official, but they DID give us
> direction to act in this role for the present. DO NOT MERGE TO LTR
> WITHOUT MATTHIAS OR MY APPROVAL. (If you disagree with this, PLEASE
> raise objections on the PSC list. But until further direction from PSC
> this is the status quo and we'll both be carrying out this role).
>
> 4. In order to protect the stability of LTR, Matthias and I introduced
> the one-month-delay for backport inclusion policy a few cycles ago.
> This has proved very valuable, and has prevented numerous serious
> regressions from ever touching the LTR branch. (win!) We'll manage
> this process by tagging 3.10 backports with a "NOT FOR MERGE" label,
> and then as soon as the backport is approved by someone (which
> **doesn't** have to be Matthias or me, it just has to be someone who
> isn't the original developer) then the backport will be moved to the
> "collected pending backports PR" (eg
> https://github.com/qgis/QGIS/pull/38748). We're doing all the hard
> work here to keep things easy for you and to keep the PR queue
> flowing.
>
> 5. The only exceptions to the one-month-delay policy are:
> - crash fixes or serious data corruption fixes
> - fixes which repair regressions which have been introduced in an LTR
> patch release
> Backports meeting these criteria can be merged immediately without the
> time delay, but again, Matthias and I will manage this.
>
> (and now for the carrot): IMO 3.10 is a great release, and in a very
> good state. I'm proud of how mature and stable 3.10 is, and how stable
> it is. Let's keep it that way :D
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/62679bc7/attachment.html>

From rdmailings at duif.net  Wed Sep 16 23:46:34 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 17 Sep 2020 08:46:34 +0200
Subject: [QGIS-Developer] Which qgis-dev in osgeo4w?
In-Reply-To: <bd2cdab4-14a1-331a-3c3b-01e64bad728b@faunalia.it>
References: <20200916154639.zpipyayxcl3i3jas@norbit.de>
 <bd2cdab4-14a1-331a-3c3b-01e64bad728b@faunalia.it>
Message-ID: <a6d1bb78-b262-c086-d803-711a11e6edea@duif.net>

On 9/16/20 6:14 PM, Paolo Cavallini wrote:
> Thanks a lot Juergen. So apparently the website is slightly wrong.

And meanwhile fixed:
https://github.com/qgis/QGIS-Website/pull/807

Thanks Andrea/Juergen :-)

Regards,

Richard Duivenvoorde


From regis.haubourg at gmail.com  Thu Sep 17 00:33:34 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 17 Sep 2020 09:33:34 +0200
Subject: [QGIS-Developer] Heads up on GEOS Overlay New Generation
Message-ID: <CABgOYCcmjvuCEa22hrnL-pNXZr7x9cLfVADusWtnafudMxGj-g@mail.gmail.com>

Hi there,
I'm forwarding a call [0] from Paul Ramsey and the JTS-GEOS teams.
I've been following this closely for 3 years now and we have been providing
testing and test datasets to try to help here.


In short, GEOS provides most of the geometry computations tools to PostGIS
QGIS & al. The intersection, difference etc.. (overlay operations) suffered
from using full numeric precision and lacked snapping and rounding
operations.

Thus our libraries were slow, and prone to topology errors due to those
numeric precision issues. Most of us have seen intersections or union
operations failing from time to time.

The new overlay operation implements snap rounding operations (which is
implemented in ESRI tools for instance) and will provide fast and robust
operations.

Now it is available in the 3.9 branch of GEOS.

As QGIS uses GEOS extensively in editing, displaying and algorithms, we
have to take a look seriously at the positive impacts and potential
regressions.

Paul warns that they spotted no regression in Z handling, which probably
means the test coverage is very low in GEOS CI, and we might expect
regressions on the Z handling here, especially for snapping I bet.

Anyhow this is GREAT news for the OSGEO community because this was one
major glass ceiling for us. We sometimes had no choice than switching to
GRASS topological operation to do some very basic operations. Hopefully
these times are gone :)

And combined with subdividing features, we should gain a massive order of
magnitude in speed for overlay.

Time to test this big win!

Best regards

Régis

[0] https://lists.osgeo.org/pipermail/geos-devel/2020-September/009670.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/1721d07e/attachment-0001.html>

From mmirra at mcgr.fr  Thu Sep 17 01:17:42 2020
From: mmirra at mcgr.fr (Mathias MIRRA)
Date: Thu, 17 Sep 2020 08:17:42 +0000
Subject: [QGIS-Developer] Openstreemap pyqgis error
In-Reply-To: <MRXP264MB05016985CEEE56D5364F764BD33E0@MRXP264MB0501.FRAP264.PROD.OUTLOOK.COM>
References: <MRXP264MB0501FCC218B9522A68DC9154D33E0@MRXP264MB0501.FRAP264.PROD.OUTLOOK.COM>
 <MRXP264MB05016985CEEE56D5364F764BD33E0@MRXP264MB0501.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <MRXP264MB0501AD799B1A4D5FC926958FD33E0@MRXP264MB0501.FRAP264.PROD.OUTLOOK.COM>



De : Mathias MIRRA
Envoyé : jeudi 17 septembre 2020 10:10
À : 'qgis-developer at lists.osgeo.org' <qgis-developer at lists.osgeo.org>
Objet : Openstreemap pyqgis error


Hello, I have a problem on the development of a python plugin, I'm trying to display the openstreemap map behind layers, only the map is not synchronized with the layers, it can't find it or even the location.
the geographical position of the map does not correspond to that of my layers
/
Bonjour, j'ai un problème sur le développement d'un plugin en python ,j'essaye de faire afficher la carte openstreemap derrière des layers .Seulement la carte n'est pas synchroniser avec les layers ,elle ce trouve pas ou même endroit.
la position géographique de la carte ne correspond pas à celle de mes couches

#Vlayer is defined above the code / Vlayer est définie au-dessus du code

urlWithParams = 'type=xyz&url=http://a.tile.openstreetmap.org/%7Bz%7D/%7Bx%7D/%7By%7D.png&zmax=19&zmin=0&crs=EPSG3857'
maplayer = QgsRasterLayer(urlWithParams, 'OpenStreetMap', 'wms')
settings = QgsMapSettings()
settings.setLayers([vlayer,maplayer])
settings.setBackgroundColor(QColor(255, 255, 255))
settings.setOutputSize(QSize(800, 690))

settings.setExtent(vlayer.extent())


render = QgsMapRendererParallelJob(settings)

render.start()
render.waitForFinished()

img = render.renderedImage()
img.save(QgsApplication.qgisSettingsDirPath()+"python/plugins/nro_print/img/render.png", "png")



merci bonne continuation

Mathias Mirra
Développeur

Tel. : 06 29 70 41 92 | Mail. : mmirra at mcgr.fr<mailto:mmirra at mcgr.fr>

[cid:image002.png at 01D68CD8.307F1DF0]
281 Route d'Espagne,
31100 Toulouse

05 32 09 38 71 | www.mcgr.fr<http://www.mcgr.fr/>

  [cid:image004.png at 01D68CD8.307F1DF0] <https://www.facebook.com/groupemcgr/>      [cid:image006.png at 01D68CD8.307F1DF0] <https://fr.linkedin.com/company/groupemcgr>      [cid:image008.png at 01D68CD8.307F1DF0] <https://www.youtube.com/channel/UCahBf8ogJuyGlzAczTTtC9w>

[Une image contenant plane, lumière, blanc, grand  Description générée automatiquement]


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/72a280b3/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 10961 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/72a280b3/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 1682 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/72a280b3/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 1830 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/72a280b3/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 1721 bytes
Desc: image008.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/72a280b3/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image010.png
Type: image/png
Size: 18243 bytes
Desc: image010.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/72a280b3/attachment-0009.png>

From a.neumann at carto.net  Thu Sep 17 02:31:36 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 17 Sep 2020 11:31:36 +0200
Subject: [QGIS-Developer] Heads up on GEOS Overlay New Generation
In-Reply-To: <CABgOYCcmjvuCEa22hrnL-pNXZr7x9cLfVADusWtnafudMxGj-g@mail.gmail.com>
References: <CABgOYCcmjvuCEa22hrnL-pNXZr7x9cLfVADusWtnafudMxGj-g@mail.gmail.com>
Message-ID: <a3aeb7b7418f53a1af8b5dcbfcf6c148@carto.net>

Hi Régis, 

Indeed interesting. 

Is there evidence that it will also be faster than previous versions? If
yes - for certain operations or generally faster? 

We had issues in the past with the "Geometry checks" that you could
define on a layer (Layer Properties --> Digitizing settings) - tests
about overlays and gaps. It was always slow and not so reliable. Once
you tried to fix one error you would get even more errors through the
fix and then you would end up with even more errors when trying to fix
the error ... Hopefully, this will work better then ... 

Greetings, 

Andreas 

On 2020-09-17 09:33, Régis Haubourg wrote:

> Hi there, 
> I'm forwarding a call [0] from Paul Ramsey and the JTS-GEOS teams. 
> I've been following this closely for 3 years now and we have been providing testing and test datasets to try to help here. 
> 
> In short, GEOS provides most of the geometry computations tools to PostGIS QGIS & al. The intersection, difference etc.. (overlay operations) suffered from using full numeric precision and lacked snapping and rounding operations. 
> 
> Thus our libraries were slow, and prone to topology errors due to those numeric precision issues. Most of us have seen intersections or union operations failing from time to time. 
> 
> The new overlay operation implements snap rounding operations (which is implemented in ESRI tools for instance) and will provide fast and robust operations. 
> 
> Now it is available in the 3.9 branch of GEOS. 
> 
> As QGIS uses GEOS extensively in editing, displaying and algorithms, we have to take a look seriously at the positive impacts and potential regressions. 
> 
> Paul warns that they spotted no regression in Z handling, which probably means the test coverage is very low in GEOS CI, and we might expect regressions on the Z handling here, especially for snapping I bet. 
> 
> Anyhow this is GREAT news for the OSGEO community because this was one major glass ceiling for us. We sometimes had no choice than switching to GRASS topological operation to do some very basic operations. Hopefully these times are gone :) 
> 
> And combined with subdividing features, we should gain a massive order of magnitude in speed for overlay. 
> 
> Time to test this big win! 
> 
> Best regards 
> 
> Régis 
> 
> [0] https://lists.osgeo.org/pipermail/geos-devel/2020-September/009670.html 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/cb649bf4/attachment.html>

From regis.haubourg at gmail.com  Thu Sep 17 02:52:56 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Thu, 17 Sep 2020 11:52:56 +0200
Subject: [QGIS-Developer] Heads up on GEOS Overlay New Generation
In-Reply-To: <a3aeb7b7418f53a1af8b5dcbfcf6c148@carto.net>
References: <CABgOYCcmjvuCEa22hrnL-pNXZr7x9cLfVADusWtnafudMxGj-g@mail.gmail.com>
 <a3aeb7b7418f53a1af8b5dcbfcf6c148@carto.net>
Message-ID: <CABgOYCfP=6qZF4Q8qXE7HL4CffDd3e=Lo6T0Yr3dT9WoWw6Ltw@mail.gmail.com>

Hi

Le jeu. 17 sept. 2020 à 11:31, Andreas Neumann <a.neumann at carto.net> a
écrit :

> Hi Régis,
>
> Indeed interesting.
>
> Is there evidence that it will also be faster than previous versions? If
> yes - for certain operations or generally faster?
>
Well not yet, and this will depend a lot on the type of features, vertex
density and so on. I we trust some unit tests, and compare with ESRI on big
datasets (France 4G antennas intersect with municipalities), we could
expect something between twice and four times faster. That's a hope a that
point not a measured fact.

> We had issues in the past with the "Geometry checks" that you could define
> on a layer (Layer Properties --> Digitizing settings) - tests about
> overlays and gaps. It was always slow and not so reliable. Once you tried
> to fix one error you would get even more errors through the fix and then
> you would end up with even more errors when trying to fix the error ...
> Hopefully, this will work better then ...
>
I think this should help indeep.
Bye

> Greetings,
>
> Andreas
>
> On 2020-09-17 09:33, Régis Haubourg wrote:
>
> Hi there,
> I'm forwarding a call [0] from Paul Ramsey and the JTS-GEOS teams.
> I've been following this closely for 3 years now and we have been
> providing testing and test datasets to try to help here.
>
>
>
> In short, GEOS provides most of the geometry computations tools to PostGIS
> QGIS & al. The intersection, difference etc.. (overlay operations) suffered
> from using full numeric precision and lacked snapping and rounding
> operations.
>
> Thus our libraries were slow, and prone to topology errors due to those
> numeric precision issues. Most of us have seen intersections or union
> operations failing from time to time.
>
> The new overlay operation implements snap rounding operations (which is
> implemented in ESRI tools for instance) and will provide fast and robust
> operations.
>
> Now it is available in the 3.9 branch of GEOS.
>
> As QGIS uses GEOS extensively in editing, displaying and algorithms, we
> have to take a look seriously at the positive impacts and potential
> regressions.
>
> Paul warns that they spotted no regression in Z handling, which probably
> means the test coverage is very low in GEOS CI, and we might expect
> regressions on the Z handling here, especially for snapping I bet.
>
> Anyhow this is GREAT news for the OSGEO community because this was one
> major glass ceiling for us. We sometimes had no choice than switching to
> GRASS topological operation to do some very basic operations. Hopefully
> these times are gone :)
>
> And combined with subdividing features, we should gain a massive order of
> magnitude in speed for overlay.
>
> Time to test this big win!
>
> Best regards
>
> Régis
>
> [0]
> https://lists.osgeo.org/pipermail/geos-devel/2020-September/009670.html
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/48d48cf3/attachment.html>

From strk at kbt.io  Thu Sep 17 03:11:26 2020
From: strk at kbt.io (Sandro Santilli)
Date: Thu, 17 Sep 2020 12:11:26 +0200
Subject: [QGIS-Developer] Heads up on GEOS Overlay New Generation
In-Reply-To: <a3aeb7b7418f53a1af8b5dcbfcf6c148@carto.net>
References: <CABgOYCcmjvuCEa22hrnL-pNXZr7x9cLfVADusWtnafudMxGj-g@mail.gmail.com>
 <a3aeb7b7418f53a1af8b5dcbfcf6c148@carto.net>
Message-ID: <20200917101126.GD5550@lif>

On Thu, Sep 17, 2020 at 11:31:36AM +0200, Andreas Neumann wrote:
> Hi Régis,
> 
> Indeed interesting.
> 
> Is there evidence that it will also be faster than previous versions? If
> yes - for certain operations or generally faster?

When the slow operation is due to multiple heuristics kicking in
(implemented in GEOS when getting a TopologyException, before
giving up) then YES, OverlayNG will be faster as it would reach
the goal earlier. On-par speed comparison has not been performed yet.

--strk;

From rdmailings at duif.net  Thu Sep 17 04:29:33 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 17 Sep 2020 13:29:33 +0200
Subject: [QGIS-Developer] Master build (landingPage?) issue
Message-ID: <9040486c-f379-b751-7eee-d4f7138da1bb@duif.net>

I'm building current maste (also clean build), but it stops with:

[3342/4611] Building CXX object src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o
FAILED: src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o 
ccache /usr/bin/c++  -DPROJ_VERSION_MAJOR=7 -DQGSMSDEBUG=1 -DQT_CONCURRENT_LIB -DQT_CORE_LIB -DQT_DEPRECATED_WARNINGS -DQT_DISABLE_DEPRECATED_BEFORE=0x050800 -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_NO_CAST_TO_ASCII -DQT_POSITIONING_LIB -DQT_PRINTSUPPORT_LIB -DQT_SERIALPORT_LIB -DQT_SQL_LIB -DQT_SVG_LIB -DQT_WEBKITWIDGETS_LIB -DQT_WEBKIT_LIB -DQT_WIDGETS_LIB -DQT_XML_LIB -DSIP_VERSION=0x041318 -DWITH_BINDINGS -DWITH_QTWEBKIT -Dlandingpage_EXPORTS -Isrc/server/services/landingpage/landingpage_autogen/include -I. -I../external -I../external/nlohmann -I../src/core -I../src/core/geometry -I../src/core/expression -I../src/core/symbology -I../src/core/metadata -I../src/core/layertree -I../src/server -I../src/server/services -I../src/server/services/landingpage -Isrc/core -Isrc/python -Isrc/server -Isrc/server/services/landingpage -isystem /usr/include/x86_64-linux-gnu/qt5 -isystem /usr/include/x86_64-linux-gnu/qt5/QtXml -isystem /usr/include/x86_64-linux-gnu/qt5/QtCore -isystem /usr/lib/x86_64-linux-gnu/qt5/mkspecs/linux-g++ -isystem /usr/include/x86_64-linux-gnu/qt5/QtGui -isystem /usr/include/x86_64-linux-gnu/qt5/QtWidgets -isystem /usr/include/x86_64-linux-gnu/qt5/QtSvg -isystem /usr/include/x86_64-linux-gnu/qt5/QtPrintSupport -isystem /usr/include/x86_64-linux-gnu/qt5/QtNetwork -isystem /usr/include/x86_64-linux-gnu/qt5/QtWebKitWidgets -isystem /usr/include/x86_64-linux-gnu/qt5/QtWebKit -isystem /usr/include/x86_64-linux-gnu/qt5/QtSql -isystem /usr/include/x86_64-linux-gnu/qt5/QtConcurrent -isystem /usr/include/x86_64-linux-gnu/qt5/QtSerialPort -isystem /usr/include/x86_64-linux-gnu/qt5/QtPositioning -Wall -Wextra -Wno-long-long -Wformat-security -Wno-strict-aliasing -Wnon-virtual-dtor -Wno-redundant-move -Wno-deprecated-copy -fvisibility=hidden -fvisibility-inlines-hidden -g -fPIC -fvisibility=hidden   -fPIC -std=gnu++11 -MD -MT src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o -MF src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o.d -o src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o -c ../src/server/services/landingpage/qgslandingpageutils.cpp
../src/server/services/landingpage/qgslandingpageutils.cpp: In static member function ‘static nlohmann::json QgsLandingPageUtils::projectInfo(const QString&)’:
../src/server/services/landingpage/qgslandingpageutils.cpp:459:85: error: ‘ExposeViaWfs’ is not a member of ‘QgsField::ConfigurationFlag’
  459 |             if ( !field.configurationFlags().testFlag( QgsField::ConfigurationFlag::ExposeViaWfs ) )
      |                                                                                     ^~~~~~~~~~~~
[3351/4611] Automatic MOC for target qgis_gui

Anybody a hint? I tried 'ninja clean' and a fresh build...
Or is the build currently borken?

Regards,

Richard Duivenvoorde

From denis.rouzaud at gmail.com  Thu Sep 17 05:03:34 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 17 Sep 2020 14:03:34 +0200
Subject: [QGIS-Developer] Master build (landingPage?) issue
In-Reply-To: <9040486c-f379-b751-7eee-d4f7138da1bb@duif.net>
References: <9040486c-f379-b751-7eee-d4f7138da1bb@duif.net>
Message-ID: <CAMtsY+b-nRyD6bukPWU7oqBqyBuwS41OZcO137Hn2AcY5cUyxA@mail.gmail.com>

A refactoring and a fix have been merged at the same time.
Fix is here: https://github.com/qgis/QGIS/pull/38835



Le jeu. 17 sept. 2020 à 13:29, Richard Duivenvoorde <rdmailings at duif.net> a
écrit :

> I'm building current maste (also clean build), but it stops with:
>
> [3342/4611] Building CXX object
> src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o
> FAILED:
> src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o
>
> ccache /usr/bin/c++  -DPROJ_VERSION_MAJOR=7 -DQGSMSDEBUG=1
> -DQT_CONCURRENT_LIB -DQT_CORE_LIB -DQT_DEPRECATED_WARNINGS
> -DQT_DISABLE_DEPRECATED_BEFORE=0x050800 -DQT_GUI_LIB -DQT_NETWORK_LIB
> -DQT_NO_CAST_TO_ASCII -DQT_POSITIONING_LIB -DQT_PRINTSUPPORT_LIB
> -DQT_SERIALPORT_LIB -DQT_SQL_LIB -DQT_SVG_LIB -DQT_WEBKITWIDGETS_LIB
> -DQT_WEBKIT_LIB -DQT_WIDGETS_LIB -DQT_XML_LIB -DSIP_VERSION=0x041318
> -DWITH_BINDINGS -DWITH_QTWEBKIT -Dlandingpage_EXPORTS
> -Isrc/server/services/landingpage/landingpage_autogen/include -I.
> -I../external -I../external/nlohmann -I../src/core -I../src/core/geometry
> -I../src/core/expression -I../src/core/symbology -I../src/core/metadata
> -I../src/core/layertree -I../src/server -I../src/server/services
> -I../src/server/services/landingpage -Isrc/core -Isrc/python -Isrc/server
> -Isrc/server/services/landingpage -isystem
> /usr/include/x86_64-linux-gnu/qt5 -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtXml -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtCore -isystem
> /usr/lib/x86_64-linux-gnu/qt5/mkspecs/linux-g++ -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtGui -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtWidgets -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtSvg -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtPrintSupport -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtNetwork -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtWebKitWidgets -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtWebKit -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtSql -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtConcurrent -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtSerialPort -isystem
> /usr/include/x86_64-linux-gnu/qt5/QtPositioning -Wall -Wextra
> -Wno-long-long -Wformat-security -Wno-strict-aliasing -Wnon-virtual-dtor
> -Wno-redundant-move -Wno-deprecated-copy -fvisibility=hidden
> -fvisibility-inlines-hidden -g -fPIC -fvisibility=hidden   -fPIC
> -std=gnu++11 -MD -MT
> src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o
> -MF
> src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o.d
> -o
> src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o
> -c ../src/server/services/landingpage/qgslandingpageutils.cpp
> ../src/server/services/landingpage/qgslandingpageutils.cpp: In static
> member function ‘static nlohmann::json
> QgsLandingPageUtils::projectInfo(const QString&)’:
> ../src/server/services/landingpage/qgslandingpageutils.cpp:459:85: error:
> ‘ExposeViaWfs’ is not a member of ‘QgsField::ConfigurationFlag’
>   459 |             if ( !field.configurationFlags().testFlag(
> QgsField::ConfigurationFlag::ExposeViaWfs ) )
>       |
>                  ^~~~~~~~~~~~
> [3351/4611] Automatic MOC for target qgis_gui
>
> Anybody a hint? I tried 'ninja clean' and a fresh build...
> Or is the build currently borken?
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/02c3b6ca/attachment.html>

From rdmailings at duif.net  Thu Sep 17 05:35:37 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 17 Sep 2020 14:35:37 +0200
Subject: [QGIS-Developer] Master build (landingPage?) issue
In-Reply-To: <CAMtsY+b-nRyD6bukPWU7oqBqyBuwS41OZcO137Hn2AcY5cUyxA@mail.gmail.com>
References: <9040486c-f379-b751-7eee-d4f7138da1bb@duif.net>
 <CAMtsY+b-nRyD6bukPWU7oqBqyBuwS41OZcO137Hn2AcY5cUyxA@mail.gmail.com>
Message-ID: <f15bdef1-c869-de0d-be55-41b5ec164a8c@duif.net>

Yep thanks, working again!

Richard

On 9/17/20 2:03 PM, Denis Rouzaud wrote:
> A refactoring and a fix have been merged at the same time.
> Fix is here: https://github.com/qgis/QGIS/pull/38835
> 
> 
> 
> Le jeu. 17 sept. 2020 à 13:29, Richard Duivenvoorde <rdmailings at duif.net <mailto:rdmailings at duif.net>> a écrit :
> 
>     I'm building current maste (also clean build), but it stops with:
> 
>     [3342/4611] Building CXX object src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o
>     FAILED: src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o
>     ccache /usr/bin/c++  -DPROJ_VERSION_MAJOR=7 -DQGSMSDEBUG=1 -DQT_CONCURRENT_LIB -DQT_CORE_LIB -DQT_DEPRECATED_WARNINGS -DQT_DISABLE_DEPRECATED_BEFORE=0x050800 -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_NO_CAST_TO_ASCII -DQT_POSITIONING_LIB -DQT_PRINTSUPPORT_LIB -DQT_SERIALPORT_LIB -DQT_SQL_LIB -DQT_SVG_LIB -DQT_WEBKITWIDGETS_LIB -DQT_WEBKIT_LIB -DQT_WIDGETS_LIB -DQT_XML_LIB -DSIP_VERSION=0x041318 -DWITH_BINDINGS -DWITH_QTWEBKIT -Dlandingpage_EXPORTS -Isrc/server/services/landingpage/landingpage_autogen/include -I. -I../external -I../external/nlohmann -I../src/core -I../src/core/geometry -I../src/core/expression -I../src/core/symbology -I../src/core/metadata -I../src/core/layertree -I../src/server -I../src/server/services -I../src/server/services/landingpage -Isrc/core -Isrc/python -Isrc/server -Isrc/server/services/landingpage -isystem /usr/include/x86_64-linux-gnu/qt5 -isystem /usr/include/x86_64-linux-gnu/qt5/QtXml -isystem /usr/include/x86_64-linux-gnu/qt5/QtCore -isystem
>     /usr/lib/x86_64-linux-gnu/qt5/mkspecs/linux-g++ -isystem /usr/include/x86_64-linux-gnu/qt5/QtGui -isystem /usr/include/x86_64-linux-gnu/qt5/QtWidgets -isystem /usr/include/x86_64-linux-gnu/qt5/QtSvg -isystem /usr/include/x86_64-linux-gnu/qt5/QtPrintSupport -isystem /usr/include/x86_64-linux-gnu/qt5/QtNetwork -isystem /usr/include/x86_64-linux-gnu/qt5/QtWebKitWidgets -isystem /usr/include/x86_64-linux-gnu/qt5/QtWebKit -isystem /usr/include/x86_64-linux-gnu/qt5/QtSql -isystem /usr/include/x86_64-linux-gnu/qt5/QtConcurrent -isystem /usr/include/x86_64-linux-gnu/qt5/QtSerialPort -isystem /usr/include/x86_64-linux-gnu/qt5/QtPositioning -Wall -Wextra -Wno-long-long -Wformat-security -Wno-strict-aliasing -Wnon-virtual-dtor -Wno-redundant-move -Wno-deprecated-copy -fvisibility=hidden -fvisibility-inlines-hidden -g -fPIC -fvisibility=hidden   -fPIC -std=gnu++11 -MD -MT src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o -MF
>     src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o.d -o src/server/services/landingpage/CMakeFiles/landingpage.dir/qgslandingpageutils.cpp.o -c ../src/server/services/landingpage/qgslandingpageutils.cpp
>     ../src/server/services/landingpage/qgslandingpageutils.cpp: In static member function ‘static nlohmann::json QgsLandingPageUtils::projectInfo(const QString&)’:
>     ../src/server/services/landingpage/qgslandingpageutils.cpp:459:85: error: ‘ExposeViaWfs’ is not a member of ‘QgsField::ConfigurationFlag’
>       459 |             if ( !field.configurationFlags().testFlag( QgsField::ConfigurationFlag::ExposeViaWfs ) )
>           |                                                                                     ^~~~~~~~~~~~
>     [3351/4611] Automatic MOC for target qgis_gui
> 
>     Anybody a hint? I tried 'ninja clean' and a fresh build...
>     Or is the build currently borken?
> 
>     Regards,
> 
>     Richard Duivenvoorde
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From adenaculture at gmail.com  Thu Sep 17 06:05:58 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 17 Sep 2020 09:05:58 -0400
Subject: [QGIS-Developer] Adding Field Calculator Functions - Best
 Practices / Avoiding Name Conflicts
In-Reply-To: <CAB28AsjTSH8NSpGft8j7yeQvyUANG-i9m-jfvr5VCdAJ0apA9Q@mail.gmail.com>
References: <CABPxTTrKYdPCsrQzVJhimfz8U-_41NzrGxtT9KOrsbH-akEpvw@mail.gmail.com>
 <CAB28AsjTSH8NSpGft8j7yeQvyUANG-i9m-jfvr5VCdAJ0apA9Q@mail.gmail.com>
Message-ID: <CABPxTTrMsiGSTpSGKOmXuWMH42SKcoE5pp5D+o3SX3SM-bsw3A@mail.gmail.com>

Nyall,

I really should get into some core development, but I have been hesitant
since my C++ programming skills are 10 years out of date. How time flies.

Where is the best place to start if I were to try to start porting some of
the functions into the core QGIS. Some of this would require incorporating
additional C modules/libraries such as MGRS, Plus Codes, etc into the code
base.

Thanks,

Calvin

On Wed, Sep 16, 2020 at 6:44 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Thu, 17 Sep 2020 at 01:55, C Hamilton <adenaculture at gmail.com> wrote:
> >
> > Greetings,
> >
> > Because of a user request I have been starting to expose Lat Lon Tools
> coordinate format conversion functions. I found out today that if you
> accidentally call one of your functions the same name as one of the
> existing functions, it causes QGIS to crash immediately. It got me thinking
> about the best practices for releasing field calculator functions. As other
> developers create their own field calculator functions there is the
> potential for major problems. I would say that if there is a name conflict
> it shouldn't crash QGIS.
> >
> > These are the function names I currently have in Lat Lon Tools.
> >
> > mgrs, mgrs_100km, mgrs_east, mgrs_north, mgrs_to_point
> >
> > Here are additional function names I have added that have not yet been
> uploaded to the QGIS plugin repo and more are on the way
> >
> > utm, utm_epsg, utm_hemisphere, utm_to_point, utm_zone, dms, ddmmss
> >
> > I like simple function names, but because of concerns that there could
> be name conflicts with other QGIS plugin developers I am wondering if a
> plugin name prefix should be added such as ll_mgrs for the Lat Lon Tools
> mgrs conversion function.
> >
> > What are your thoughts?
>
> These sound like really useful functions of widespread appeal. Have
> you considered implementing them in QGIS itself? I'd be happy to
> assist!
>
> Nyall
>
>
>
> >
> > Thanks,
> >
> > Calvin
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/448e8eab/attachment.html>

From maxim.rylov at sap.com  Thu Sep 17 06:22:56 2020
From: maxim.rylov at sap.com (Rylov, Maxim)
Date: Thu, 17 Sep 2020 13:22:56 +0000
Subject: [QGIS-Developer] In which QGIS release can the HANA provider be
	included?
Message-ID: <AM4PR02MB3123FF3FFFDBBC07CF67A2C6F73E0@AM4PR02MB3123.eurprd02.prod.outlook.com>

Dear QGIS community,

We have finished working on the HANA provider. For more details, see our latest comment in the HANA pull request (https://github.com/qgis/QGIS/pull/34988#issuecomment-694212442).

If the reviewers will be prompt enough and will not have any big concerns about our implementation,
in which QGIS release can the HANA provider be potentially included?

Thank you and best regards,
Maxim

on behalf of the HANA Spatial Team
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/0c39e0ad/attachment-0001.html>

From jef at norbit.de  Thu Sep 17 08:39:28 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Thu, 17 Sep 2020 17:39:28 +0200
Subject: [QGIS-Developer] In which QGIS release can the HANA provider be
 included?
In-Reply-To: <AM4PR02MB3123FF3FFFDBBC07CF67A2C6F73E0@AM4PR02MB3123.eurprd02.prod.outlook.com>
References: <AM4PR02MB3123FF3FFFDBBC07CF67A2C6F73E0@AM4PR02MB3123.eurprd02.prod.outlook.com>
Message-ID: <20200917153928.sxwwnhl72vkpwixc@norbit.de>

Hi Maxim,

On Thu, 17. Sep 2020 at 13:22:56 +0000, Rylov, Maxim wrote:
> We have finished working on the HANA provider. For more details, see our
> latest comment in the HANA pull request
> (https://github.com/qgis/QGIS/pull/34988#issuecomment-694212442).
 
> If the reviewers will be prompt enough and will not have any big concerns
> about our implementation, in which QGIS release can the HANA provider be
> potentially included?

Unfortunately a little bit too late for 3.16.  It's feature freeze started last
friday.  So it can be included in master after the release of 3.16 (scheduled
for Oct 23rd) for 3.18 (scheduled for Feb 19th 2021).  See also [0]


Jürgen

[0] https://qgis.org/en/site/getinvolved/development/roadmap.html#release-schedule

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/3e27fa9b/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200917/3e27fa9b/attachment.ksh>

From nyall.dawson at gmail.com  Thu Sep 17 15:58:45 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 18 Sep 2020 08:58:45 +1000
Subject: [QGIS-Developer] Adding Field Calculator Functions - Best
 Practices / Avoiding Name Conflicts
In-Reply-To: <CABPxTTrMsiGSTpSGKOmXuWMH42SKcoE5pp5D+o3SX3SM-bsw3A@mail.gmail.com>
References: <CABPxTTrKYdPCsrQzVJhimfz8U-_41NzrGxtT9KOrsbH-akEpvw@mail.gmail.com>
 <CAB28AsjTSH8NSpGft8j7yeQvyUANG-i9m-jfvr5VCdAJ0apA9Q@mail.gmail.com>
 <CABPxTTrMsiGSTpSGKOmXuWMH42SKcoE5pp5D+o3SX3SM-bsw3A@mail.gmail.com>
Message-ID: <CAB28AsiGj0w6S1HcwF6_doD2+Q6J+sPAU6WDOc2ZrWnjfTjW=g@mail.gmail.com>

On Thu, 17 Sep 2020 at 23:06, C Hamilton <adenaculture at gmail.com> wrote:
>
> Nyall,
>
> I really should get into some core development, but I have been hesitant since my C++ programming skills are 10 years out of date. How time flies.

Adding expression functions like this is actually a great place to
start, because the changes are very self-contained and isolated to
basically one file
(https://github.com/qgis/QGIS/blob/master/src/core/expression/qgsexpressionfunction.cpp)

It's usually possible to find an existing function which does a
similar thing as your new function and copy/paste the other function's
code. E.g. you could look at something like the to_dm function, which
is basically just two changes:

Registering the function to the expression engine:
https://github.com/qgis/QGIS/blob/master/src/core/expression/qgsexpressionfunction.cpp#L6031

and

The function implementation:
https://github.com/qgis/QGIS/blob/master/src/core/expression/qgsexpressionfunction.cpp#L2096
(calls a function defined here
https://github.com/qgis/QGIS/blob/master/src/core/expression/qgsexpressionfunction.cpp#L2056).

> Where is the best place to start if I were to try to start porting some of the functions into the core QGIS. Some of this would require incorporating additional C modules/libraries such as MGRS, Plus Codes, etc into the code base.

I'd start with the easiest one first. Is there a function which is
self-contained and which doesn't require external libraries? That
would be the best starting point, as you'd use it to learn the QGIS
build system and PR submission/review process.

Might be worth your time dropping in on a QHackDay
(http://blog.qgis.org/2020/08/21/say-hello-to-the-qhackfriday/) if
you'd like to discuss face-to-face (virtually)!)

Nyall

>
> Thanks,
>
> Calvin
>
> On Wed, Sep 16, 2020 at 6:44 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Thu, 17 Sep 2020 at 01:55, C Hamilton <adenaculture at gmail.com> wrote:
>> >
>> > Greetings,
>> >
>> > Because of a user request I have been starting to expose Lat Lon Tools coordinate format conversion functions. I found out today that if you accidentally call one of your functions the same name as one of the existing functions, it causes QGIS to crash immediately. It got me thinking about the best practices for releasing field calculator functions. As other developers create their own field calculator functions there is the potential for major problems. I would say that if there is a name conflict it shouldn't crash QGIS.
>> >
>> > These are the function names I currently have in Lat Lon Tools.
>> >
>> > mgrs, mgrs_100km, mgrs_east, mgrs_north, mgrs_to_point
>> >
>> > Here are additional function names I have added that have not yet been uploaded to the QGIS plugin repo and more are on the way
>> >
>> > utm, utm_epsg, utm_hemisphere, utm_to_point, utm_zone, dms, ddmmss
>> >
>> > I like simple function names, but because of concerns that there could be name conflicts with other QGIS plugin developers I am wondering if a plugin name prefix should be added such as ll_mgrs for the Lat Lon Tools mgrs conversion function.
>> >
>> > What are your thoughts?
>>
>> These sound like really useful functions of widespread appeal. Have
>> you considered implementing them in QGIS itself? I'd be happy to
>> assist!
>>
>> Nyall
>>
>>
>>
>> >
>> > Thanks,
>> >
>> > Calvin
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Fri Sep 18 00:18:12 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 18 Sep 2020 09:18:12 +0200
Subject: [QGIS-Developer] Python console starting up very slow in master?
Message-ID: <5eb0e983-3bfa-6694-6870-5eb1110ef89d@duif.net>

Hi Devs,

I have the impression that the startup of the Python console in current master is very slow.

In 3.10 and 3.14 if I click the little python button, the Python Console panel is there within a snap.

In Master it takes at least 5 seconds...
And again if you open the 'Editor' pane in it

Same/Clean profiles

Others see the same?

(I know myself I added a baseclass to the edit-panes [0], 
but that should not make stuff start slower...?)

Regards,

Richard Duivenvoorde

[0] https://github.com/qgis/QGIS/pull/37602



QGIS version
3.15.0-Master
QGIS code revision
527a08ca5e
Compiled against Qt
5.14.2
Running against Qt
5.14.2
Compiled against GDAL/OGR
3.1.3
Running against GDAL/OGR
3.1.3
Compiled against GEOS
3.8.1-CAPI-1.13.3
Running against GEOS
3.8.1-CAPI-1.13.3
Compiled against SQLite
3.33.0
Running against SQLite
3.33.0
PostgreSQL Client Version
12.4 (Debian 12.4-1)
SpatiaLite Version
5.0.0
QWT Version
6.1.4
QScintilla2 Version
2.11.2
Compiled against PROJ
7.1.1
Running against PROJ
Rel. 7.1.1, September 1st, 2020
OS Version
Debian GNU/Linux bullseye/sid
This copy of QGIS writes debugging output.
Active python plugins
MetaSearch; 
processing; 
db_manager


From stephenknox73 at gmail.com  Fri Sep 18 01:37:52 2020
From: stephenknox73 at gmail.com (Stephen Knox)
Date: Fri, 18 Sep 2020 09:37:52 +0100
Subject: [QGIS-Developer] OGC tests failing
Message-ID: <CAFkojsZWA_+9PucsLQRLk7k4Wy7bhjsZ1iVQhDQ8gMOk-FAmWA@mail.gmail.com>

Since about 12 hours ago the OGC tests seem to be failing with:

 File "./pyogctest/pyogctest.py", line 127, in <module>
    data.download()
zipfile.BadZipFile: File is not a zip file

 Stephen Knox
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200918/c9806712/attachment.html>

From jef at norbit.de  Fri Sep 18 02:03:45 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 18 Sep 2020 11:03:45 +0200
Subject: [QGIS-Developer] OGC tests failing
In-Reply-To: <CAFkojsZWA_+9PucsLQRLk7k4Wy7bhjsZ1iVQhDQ8gMOk-FAmWA@mail.gmail.com>
References: <CAFkojsZWA_+9PucsLQRLk7k4Wy7bhjsZ1iVQhDQ8gMOk-FAmWA@mail.gmail.com>
Message-ID: <20200918090345.d3ocr34wujsrejaj@norbit.de>

Hi,


more helpful bits:

2020-09-18T02:47:08.4954446Z Traceback (most recent call last):
2020-09-18T02:47:08.4955021Z   File "./pyogctest/pyogctest.py", line 127, in <module>
2020-09-18T02:47:08.4955585Z     data.download()
2020-09-18T02:47:08.4956080Z   File "/home/runner/work/QGIS/QGIS/pyogctest/pyogctest/data/data.py", line 31, in download
2020-09-18T02:47:08.4956657Z     with zipfile.ZipFile(WMS130_ZIP, "r") as zip_ref:
2020-09-18T02:47:08.4957130Z   File "/usr/lib/python3.6/zipfile.py", line 1131, in __init__
2020-09-18T02:47:08.4957550Z     self._RealGetContents()
2020-09-18T02:47:08.4958310Z   File "/usr/lib/python3.6/zipfile.py", line 1198, in _RealGetContents
2020-09-18T02:47:08.4959042Z     raise BadZipFile("File is not a zip file")
2020-09-18T02:47:08.4959480Z zipfile.BadZipFile: File is not a zip file

data.py is from https://github.com/pblottiere/pyogctest/blob/master/pyogctest/data/data.py

WMS130_ZIP is downloaded from http://cite.opengeospatial.org/teamengine/about/wms/1.3.0/site/data-wms-1.3.0.zip

which is 404.  So it's apparently not a QGIS issue.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200918/d25f906a/attachment.sig>

From blottiere.paul at gmail.com  Fri Sep 18 02:17:57 2020
From: blottiere.paul at gmail.com (Paul Blottiere)
Date: Fri, 18 Sep 2020 11:17:57 +0200
Subject: [QGIS-Developer] OGC tests failing
In-Reply-To: <20200918090345.d3ocr34wujsrejaj@norbit.de>
References: <CAFkojsZWA_+9PucsLQRLk7k4Wy7bhjsZ1iVQhDQ8gMOk-FAmWA@mail.gmail.com>
 <20200918090345.d3ocr34wujsrejaj@norbit.de>
Message-ID: <CAOWtUUMBDvqg3q=GanQqtw5o9W9F2b4HiG1PQzZGC+tzV6bmww@mail.gmail.com>

Hello,

> WMS130_ZIP is downloaded from
http://cite.opengeospatial.org/teamengine/about/wms/1.3.0/site/data-wms-1.3.0.zip
> which is 404.  So it's apparently not a QGIS issue.

Indeed it seems that the OGC web page about the WMS 1.3.0 service is down
since last night.

I'm going to embed the data directly in pyogctest to avoid this kind of
drawback.

Regards.
-- 
Paul Blottiere
QCooperative: https://www.qcooperative.net/
Hytech Imaging: https://hytech-imaging.fr/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200918/8464b422/attachment.html>

From andreaerdna at libero.it  Fri Sep 18 02:27:39 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 18 Sep 2020 02:27:39 -0700 (MST)
Subject: [QGIS-Developer] OGC tests failing
In-Reply-To: <CAOWtUUMBDvqg3q=GanQqtw5o9W9F2b4HiG1PQzZGC+tzV6bmww@mail.gmail.com>
References: <CAFkojsZWA_+9PucsLQRLk7k4Wy7bhjsZ1iVQhDQ8gMOk-FAmWA@mail.gmail.com>
 <20200918090345.d3ocr34wujsrejaj@norbit.de>
 <CAOWtUUMBDvqg3q=GanQqtw5o9W9F2b4HiG1PQzZGC+tzV6bmww@mail.gmail.com>
Message-ID: <1600421259222-0.post@n6.nabble.com>

pblottiere wrote
> Hello,
> 
>> WMS130_ZIP is downloaded from
> http://cite.opengeospatial.org/teamengine/about/wms/1.3.0/site/data-wms-1.3.0.zip
>> which is 404.  So it's apparently not a QGIS issue.
> 
> Indeed it seems that the OGC web page about the WMS 1.3.0 service is down
> since last night.

New URL for the test dataset
https://cite.opengeospatial.org/teamengine/about/wms13/1.3.0/site/data-wms-1.3.0.zip

Regards.

Andrea Giudiceandrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From blottiere.paul at gmail.com  Fri Sep 18 04:15:14 2020
From: blottiere.paul at gmail.com (Paul Blottiere)
Date: Fri, 18 Sep 2020 13:15:14 +0200
Subject: [QGIS-Developer] OGC tests failing
In-Reply-To: <1600421259222-0.post@n6.nabble.com>
References: <CAFkojsZWA_+9PucsLQRLk7k4Wy7bhjsZ1iVQhDQ8gMOk-FAmWA@mail.gmail.com>
 <20200918090345.d3ocr34wujsrejaj@norbit.de>
 <CAOWtUUMBDvqg3q=GanQqtw5o9W9F2b4HiG1PQzZGC+tzV6bmww@mail.gmail.com>
 <1600421259222-0.post@n6.nabble.com>
Message-ID: <CAOWtUUO04uSd+Xg7nYZdMtcovGk1Zjk8kfngvgeXrwo5Nc9Zsw@mail.gmail.com>

> New URL for the test dataset
>
https://cite.opengeospatial.org/teamengine/about/wms13/1.3.0/site/data-wms-1.3.0.zip

Thanks Andrea. pyogctest has been updated accordingly and QGIS CI should be
fixed now.

Regards.
-- 
Paul Blottiere
QCooperative: https://www.qcooperative.net/
Hytech Imaging: https://hytech-imaging.fr/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200918/3841ed22/attachment-0001.html>

From maxim.rylov at sap.com  Fri Sep 18 04:27:26 2020
From: maxim.rylov at sap.com (Rylov, Maxim)
Date: Fri, 18 Sep 2020 11:27:26 +0000
Subject: [QGIS-Developer] In which QGIS release can the HANA provider be
 included?
In-Reply-To: <20200917153928.sxwwnhl72vkpwixc@norbit.de>
References: <AM4PR02MB3123FF3FFFDBBC07CF67A2C6F73E0@AM4PR02MB3123.eurprd02.prod.outlook.com>
 <20200917153928.sxwwnhl72vkpwixc@norbit.de>
Message-ID: <AM4PR02MB31235F46FE7F94C562CE2172F73F0@AM4PR02MB3123.eurprd02.prod.outlook.com>

Hi Jürgen,

Thank you for your prompt reply.
We will do our best that the HANA provider is included in the release 3.18.

Maxim

-----Original Message-----
From: Jürgen E. Fischer <jef at norbit.de> 
Sent: Thursday, September 17, 2020 5:39 PM
To: Rylov, Maxim <maxim.rylov at sap.com>
Cc: qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] In which QGIS release can the HANA provider be included?

Hi Maxim,

On Thu, 17. Sep 2020 at 13:22:56 +0000, Rylov, Maxim wrote:
> We have finished working on the HANA provider. For more details, see our
> latest comment in the HANA pull request
> (https://github.com/qgis/QGIS/pull/34988#issuecomment-694212442).
 
> If the reviewers will be prompt enough and will not have any big concerns
> about our implementation, in which QGIS release can the HANA provider be
> potentially included?

Unfortunately a little bit too late for 3.16.  It's feature freeze started last
friday.  So it can be included in master after the release of 3.16 (scheduled
for Oct 23rd) for 3.18 (scheduled for Feb 19th 2021).  See also [0]


Jürgen

[0] https://qgis.org/en/site/getinvolved/development/roadmap.html#release-schedule

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode

From tim at kartoza.com  Fri Sep 18 08:43:51 2020
From: tim at kartoza.com (Tim Sutton)
Date: Fri, 18 Sep 2020 16:43:51 +0100
Subject: [QGIS-Developer] Master build crashing
Message-ID: <CAES-DZTewwjEBYimCfdcPUQ96X21C6ObWnAcMfG6C7vDGeU6+w@mail.gmail.com>

Hi Folks


I am trying to run master from my local build here and it crashes[1] -
anyone know what could be the cause? I did a clean build and still get the
issue.

I am running 4113fdc58c880187abf53ed284796b7050585803

Regards

Tim

[1] https://gist.github.com/timlinux/a1c6093d824e8c92bd8bfb50c48b20c3

-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200918/ccf03b53/attachment.html>

From jef at norbit.de  Fri Sep 18 10:23:55 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 18 Sep 2020 19:23:55 +0200
Subject: [QGIS-Developer] Master build crashing
In-Reply-To: <CAES-DZTewwjEBYimCfdcPUQ96X21C6ObWnAcMfG6C7vDGeU6+w@mail.gmail.com>
References: <CAES-DZTewwjEBYimCfdcPUQ96X21C6ObWnAcMfG6C7vDGeU6+w@mail.gmail.com>
Message-ID: <20200918172355.tncbmm32jqpxjgje@norbit.de>

Hi Tim,

On Fri, 18. Sep 2020 at 16:43:51 +0100, Tim Sutton wrote:
> I am trying to run master from my local build here and it crashes[1] -
> anyone know what could be the cause? I did a clean build and still get the
> issue.
 
> I am running 4113fdc58c880187abf53ed284796b7050585803

Is libmdalprovider.so missing in your build?


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200918/6903b36a/attachment.sig>

From vcloarec at gmail.com  Fri Sep 18 11:13:42 2020
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Fri, 18 Sep 2020 14:13:42 -0400
Subject: [QGIS-Developer] Master build crashing
In-Reply-To: <20200918172355.tncbmm32jqpxjgje@norbit.de>
References: <CAES-DZTewwjEBYimCfdcPUQ96X21C6ObWnAcMfG6C7vDGeU6+w@mail.gmail.com>
 <20200918172355.tncbmm32jqpxjgje@norbit.de>
Message-ID: <CAHaTM5UuQOzFuHZkZ=OjSnQnsO5tj1GZKAPAcvsm9rMaqk6hNg@mail.gmail.com>

Hi,

Indeed QGIS could crash if MDAL is not present with new TIN mesh creation
algorithm. My bad...
This PR fixes that : https://github.com/qgis/QGIS/pull/38864

Vincent

Le ven. 18 sept. 2020 à 13:24, Jürgen E. Fischer <jef at norbit.de> a écrit :

> Hi Tim,
>
> On Fri, 18. Sep 2020 at 16:43:51 +0100, Tim Sutton wrote:
> > I am trying to run master from my local build here and it crashes[1] -
> > anyone know what could be the cause? I did a clean build and still get
> the
> > issue.
>
> > I am running 4113fdc58c880187abf53ed284796b7050585803
>
> Is libmdalprovider.so missing in your build?
>
>
> Jürgen
>
> --
> Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200918/fca77584/attachment.html>

From tim at kartoza.com  Fri Sep 18 11:43:35 2020
From: tim at kartoza.com (Tim Sutton)
Date: Fri, 18 Sep 2020 19:43:35 +0100
Subject: [QGIS-Developer] Master build crashing
In-Reply-To: <CAHaTM5UuQOzFuHZkZ=OjSnQnsO5tj1GZKAPAcvsm9rMaqk6hNg@mail.gmail.com>
References: <CAES-DZTewwjEBYimCfdcPUQ96X21C6ObWnAcMfG6C7vDGeU6+w@mail.gmail.com>
 <20200918172355.tncbmm32jqpxjgje@norbit.de>
 <CAHaTM5UuQOzFuHZkZ=OjSnQnsO5tj1GZKAPAcvsm9rMaqk6hNg@mail.gmail.com>
Message-ID: <CAES-DZRcRHzVCUQg2uZvk_viOVDOFJX21ADdkRDYTrbVt+hhHw@mail.gmail.com>

Thanks Juergen and Vincent!

Regards

Tim

On Fri, 18 Sep 2020, 19:13 Vincent Cloarec, <vcloarec at gmail.com> wrote:

> Hi,
>
> Indeed QGIS could crash if MDAL is not present with new TIN mesh creation
> algorithm. My bad...
> This PR fixes that : https://github.com/qgis/QGIS/pull/38864
>
> Vincent
>
> Le ven. 18 sept. 2020 à 13:24, Jürgen E. Fischer <jef at norbit.de> a écrit :
>
>> Hi Tim,
>>
>> On Fri, 18. Sep 2020 at 16:43:51 +0100, Tim Sutton wrote:
>> > I am trying to run master from my local build here and it crashes[1] -
>> > anyone know what could be the cause? I did a clean build and still get
>> the
>> > issue.
>>
>> > I am running 4113fdc58c880187abf53ed284796b7050585803
>>
>> Is libmdalprovider.so missing in your build?
>>
>>
>> Jürgen
>>
>> --
>> Jürgen E. Fischer           norBIT GmbH             Tel.
>> +49-4931-918175-31
>> Dipl.-Inf. (FH)             Rheinstraße 13          Fax.
>> +49-4931-918175-50
>> Software Engineer           D-26506 Norden
>> https://www.norbit.de
>> QGIS release manager (PSC)  Germany                    IRC: jef on
>> FreeNode
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200918/398b0c37/attachment-0001.html>

From chirag8cd at gmail.com  Fri Sep 18 22:54:22 2020
From: chirag8cd at gmail.com (Chirag Dasannacharya)
Date: Sat, 19 Sep 2020 11:24:22 +0530
Subject: [QGIS-Developer] Publishing new plugin gives 'you cannot modify'
Message-ID: <CAEnc2yFvgTskpBK4zLnSeY7A=r+c5x8x9yDJ+yybkcTv=kotmg@mail.gmail.com>

Hi all,

I'm a new developer, I'm trying to publish a plugin for the first time.
Apologies if this is trivial. On uploading the zip file and clicking the
upload button, I get a message saying
'You cannot modifiy this plugin.' (sic)

Am I missing something?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200919/3d49cb3f/attachment.html>

From etienne.trimaille at gmail.com  Fri Sep 18 23:43:35 2020
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Sat, 19 Sep 2020 08:43:35 +0200
Subject: [QGIS-Developer] Publishing new plugin gives 'you cannot modify'
In-Reply-To: <CAEnc2yFvgTskpBK4zLnSeY7A=r+c5x8x9yDJ+yybkcTv=kotmg@mail.gmail.com>
References: <CAEnc2yFvgTskpBK4zLnSeY7A=r+c5x8x9yDJ+yybkcTv=kotmg@mail.gmail.com>
Message-ID: <CAMtDFLJHnkkScaDy2JiprvKK1Dy1EG_CKgt8Yo1zHdT6iAxthg@mail.gmail.com>

What is the name of the plugin? Maybe there is already a plugin with the
same package/folder name? (So you don't own this plugin)

Le sam. 19 sept. 2020 à 07:54, Chirag Dasannacharya <chirag8cd at gmail.com> a
écrit :

> Hi all,
>
> I'm a new developer, I'm trying to publish a plugin for the first time.
> Apologies if this is trivial. On uploading the zip file and clicking the
> upload button, I get a message saying
> 'You cannot modifiy this plugin.' (sic)
>
> Am I missing something?
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200919/50f0eb53/attachment.html>

From chirag8cd at gmail.com  Sat Sep 19 00:52:56 2020
From: chirag8cd at gmail.com (Chirag Dasannacharya)
Date: Sat, 19 Sep 2020 13:22:56 +0530
Subject: [QGIS-Developer] Publishing new plugin gives 'you cannot modify'
In-Reply-To: <CAMtDFLJHnkkScaDy2JiprvKK1Dy1EG_CKgt8Yo1zHdT6iAxthg@mail.gmail.com>
References: <CAEnc2yFvgTskpBK4zLnSeY7A=r+c5x8x9yDJ+yybkcTv=kotmg@mail.gmail.com>
 <CAMtDFLJHnkkScaDy2JiprvKK1Dy1EG_CKgt8Yo1zHdT6iAxthg@mail.gmail.com>
Message-ID: <CAEnc2yEK87BVXh9=yPSTypAsFVVB72JvcMOajVvChTNKy5yUXA@mail.gmail.com>

Hi Etienne,

It's named 'LandSurfaceTemperature', packaged in
'LandSurfaceTemperature.zip'.
Last I checked, I don't think there was another plugin with the exact same
name. There
is a 'Land Surface Temperature' with the same purpose, but incompatible with
QGIS 3+. Do you think this might be the issue?

On Sat, 19 Sep 2020 at 12:13, Etienne Trimaille <etienne.trimaille at gmail.com>
wrote:

> What is the name of the plugin? Maybe there is already a plugin with the
> same package/folder name? (So you don't own this plugin)
>
> Le sam. 19 sept. 2020 à 07:54, Chirag Dasannacharya <chirag8cd at gmail.com>
> a écrit :
>
>> Hi all,
>>
>> I'm a new developer, I'm trying to publish a plugin for the first time.
>> Apologies if this is trivial. On uploading the zip file and clicking the
>> upload button, I get a message saying
>> 'You cannot modifiy this plugin.' (sic)
>>
>> Am I missing something?
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200919/0def5ba7/attachment.html>

From etienne.trimaille at gmail.com  Sat Sep 19 02:18:14 2020
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Sat, 19 Sep 2020 11:18:14 +0200
Subject: [QGIS-Developer] Publishing new plugin gives 'you cannot modify'
In-Reply-To: <CAEnc2yEK87BVXh9=yPSTypAsFVVB72JvcMOajVvChTNKy5yUXA@mail.gmail.com>
References: <CAEnc2yFvgTskpBK4zLnSeY7A=r+c5x8x9yDJ+yybkcTv=kotmg@mail.gmail.com>
 <CAMtDFLJHnkkScaDy2JiprvKK1Dy1EG_CKgt8Yo1zHdT6iAxthg@mail.gmail.com>
 <CAEnc2yEK87BVXh9=yPSTypAsFVVB72JvcMOajVvChTNKy5yUXA@mail.gmail.com>
Message-ID: <CAMtDFLJ9GtndfdSS4eWnW3DcgnAeH7zMz3YL+UTuiNN+ZgC+wA@mail.gmail.com>

I have checked this other plugin. The folder inside the zip is called
"LandSurfaceTemperature". So your folder in the zip can't be called with
this name.

Le sam. 19 sept. 2020 à 09:53, Chirag Dasannacharya <chirag8cd at gmail.com> a
écrit :

> Hi Etienne,
>
> It's named 'LandSurfaceTemperature', packaged in
> 'LandSurfaceTemperature.zip'.
> Last I checked, I don't think there was another plugin with the exact same
> name. There
> is a 'Land Surface Temperature' with the same purpose, but incompatible
> with
> QGIS 3+. Do you think this might be the issue?
>
> On Sat, 19 Sep 2020 at 12:13, Etienne Trimaille <
> etienne.trimaille at gmail.com> wrote:
>
>> What is the name of the plugin? Maybe there is already a plugin with the
>> same package/folder name? (So you don't own this plugin)
>>
>> Le sam. 19 sept. 2020 à 07:54, Chirag Dasannacharya <chirag8cd at gmail.com>
>> a écrit :
>>
>>> Hi all,
>>>
>>> I'm a new developer, I'm trying to publish a plugin for the first time.
>>> Apologies if this is trivial. On uploading the zip file and clicking the
>>> upload button, I get a message saying
>>> 'You cannot modifiy this plugin.' (sic)
>>>
>>> Am I missing something?
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200919/a589036f/attachment.html>

From lrssvtml at gmail.com  Sat Sep 19 03:53:15 2020
From: lrssvtml at gmail.com (Salvatore Larosa)
Date: Sat, 19 Sep 2020 12:53:15 +0200
Subject: [QGIS-Developer] Python console starting up very slow in master?
In-Reply-To: <5eb0e983-3bfa-6694-6870-5eb1110ef89d@duif.net>
References: <5eb0e983-3bfa-6694-6870-5eb1110ef89d@duif.net>
Message-ID: <CANxjxappDQne5g4n0s6uxZJu4dgZuASvY8hEWYuvMCRyu9EpAQ@mail.gmail.com>

Hi Richard,

I can confirm, please file a ticket. I am on it right now!

Thanks,
-SL

On Fri, Sep 18, 2020 at 9:18 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi Devs,
>
> I have the impression that the startup of the Python console in current
> master is very slow.
>
> In 3.10 and 3.14 if I click the little python button, the Python Console
> panel is there within a snap.
>
> In Master it takes at least 5 seconds...
> And again if you open the 'Editor' pane in it
>
> Same/Clean profiles
>
> Others see the same?
>
> (I know myself I added a baseclass to the edit-panes [0],
> but that should not make stuff start slower...?)
>
> Regards,
>
> Richard Duivenvoorde
>
> [0] https://github.com/qgis/QGIS/pull/37602
>
>
>
> QGIS version
> 3.15.0-Master
> QGIS code revision
> 527a08ca5e
> Compiled against Qt
> 5.14.2
> Running against Qt
> 5.14.2
> Compiled against GDAL/OGR
> 3.1.3
> Running against GDAL/OGR
> 3.1.3
> Compiled against GEOS
> 3.8.1-CAPI-1.13.3
> Running against GEOS
> 3.8.1-CAPI-1.13.3
> Compiled against SQLite
> 3.33.0
> Running against SQLite
> 3.33.0
> PostgreSQL Client Version
> 12.4 (Debian 12.4-1)
> SpatiaLite Version
> 5.0.0
> QWT Version
> 6.1.4
> QScintilla2 Version
> 2.11.2
> Compiled against PROJ
> 7.1.1
> Running against PROJ
> Rel. 7.1.1, September 1st, 2020
> OS Version
> Debian GNU/Linux bullseye/sid
> This copy of QGIS writes debugging output.
> Active python plugins
> MetaSearch;
> processing;
> db_manager
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Salvatore Larosa
linkedIn: http://linkedin.com/in/larosasalvatore
twitter: @lrssvt
skype: s.larosa
IRC: lrssvt on freenode
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200919/b0c2930f/attachment-0001.html>

From chirag8cd at gmail.com  Sat Sep 19 04:11:28 2020
From: chirag8cd at gmail.com (Chirag Dasannacharya)
Date: Sat, 19 Sep 2020 16:41:28 +0530
Subject: [QGIS-Developer] Publishing new plugin gives 'you cannot modify'
In-Reply-To: <CAMtDFLJ9GtndfdSS4eWnW3DcgnAeH7zMz3YL+UTuiNN+ZgC+wA@mail.gmail.com>
References: <CAEnc2yFvgTskpBK4zLnSeY7A=r+c5x8x9yDJ+yybkcTv=kotmg@mail.gmail.com>
 <CAMtDFLJHnkkScaDy2JiprvKK1Dy1EG_CKgt8Yo1zHdT6iAxthg@mail.gmail.com>
 <CAEnc2yEK87BVXh9=yPSTypAsFVVB72JvcMOajVvChTNKy5yUXA@mail.gmail.com>
 <CAMtDFLJ9GtndfdSS4eWnW3DcgnAeH7zMz3YL+UTuiNN+ZgC+wA@mail.gmail.com>
Message-ID: <CAEnc2yGZYd37PRUyx9mzZDg4c6n21uUDvBcmdCAEvZoh=SwP-g@mail.gmail.com>

Thank you very much for your input! Turns out that was the
problem, I was able to upload the plugin under a different
name, LandSurfaceTemperatureV3 (sounds a little weird),
and it works just fine. Again, thanks a lot!

On Sat, 19 Sep 2020 at 14:48, Etienne Trimaille <etienne.trimaille at gmail.com>
wrote:

> I have checked this other plugin. The folder inside the zip is called
> "LandSurfaceTemperature". So your folder in the zip can't be called with
> this name.
>
> Le sam. 19 sept. 2020 à 09:53, Chirag Dasannacharya <chirag8cd at gmail.com>
> a écrit :
>
>> Hi Etienne,
>>
>> It's named 'LandSurfaceTemperature', packaged in
>> 'LandSurfaceTemperature.zip'.
>> Last I checked, I don't think there was another plugin with the exact
>> same name. There
>> is a 'Land Surface Temperature' with the same purpose, but incompatible
>> with
>> QGIS 3+. Do you think this might be the issue?
>>
>> On Sat, 19 Sep 2020 at 12:13, Etienne Trimaille <
>> etienne.trimaille at gmail.com> wrote:
>>
>>> What is the name of the plugin? Maybe there is already a plugin with the
>>> same package/folder name? (So you don't own this plugin)
>>>
>>> Le sam. 19 sept. 2020 à 07:54, Chirag Dasannacharya <chirag8cd at gmail.com>
>>> a écrit :
>>>
>>>> Hi all,
>>>>
>>>> I'm a new developer, I'm trying to publish a plugin for the first time.
>>>> Apologies if this is trivial. On uploading the zip file and clicking the
>>>> upload button, I get a message saying
>>>> 'You cannot modifiy this plugin.' (sic)
>>>>
>>>> Am I missing something?
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200919/8c437143/attachment.html>

From lrssvtml at gmail.com  Sat Sep 19 04:32:17 2020
From: lrssvtml at gmail.com (Salvatore Larosa)
Date: Sat, 19 Sep 2020 13:32:17 +0200
Subject: [QGIS-Developer] Python console starting up very slow in master?
In-Reply-To: <CANxjxappDQne5g4n0s6uxZJu4dgZuASvY8hEWYuvMCRyu9EpAQ@mail.gmail.com>
References: <5eb0e983-3bfa-6694-6870-5eb1110ef89d@duif.net>
 <CANxjxappDQne5g4n0s6uxZJu4dgZuASvY8hEWYuvMCRyu9EpAQ@mail.gmail.com>
Message-ID: <CANxjxaqQxQcNCUseryZFb10i=a0aAA1ZUCbnc15cx=-6opTBXg@mail.gmail.com>

Hi Richard,

I managed to catch the problem [0] quickly, no need to file a ticket.

Cheers,
-SL

[0] - https://github.com/qgis/QGIS/pull/38873

On Sat, Sep 19, 2020 at 12:53 PM Salvatore Larosa <lrssvtml at gmail.com>
wrote:

> Hi Richard,
>
> I can confirm, please file a ticket. I am on it right now!
>
> Thanks,
> -SL
>
> On Fri, Sep 18, 2020 at 9:18 AM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
>> Hi Devs,
>>
>> I have the impression that the startup of the Python console in current
>> master is very slow.
>>
>> In 3.10 and 3.14 if I click the little python button, the Python Console
>> panel is there within a snap.
>>
>> In Master it takes at least 5 seconds...
>> And again if you open the 'Editor' pane in it
>>
>> Same/Clean profiles
>>
>> Others see the same?
>>
>> (I know myself I added a baseclass to the edit-panes [0],
>> but that should not make stuff start slower...?)
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>> [0] https://github.com/qgis/QGIS/pull/37602
>>
>>
>>
>> QGIS version
>> 3.15.0-Master
>> QGIS code revision
>> 527a08ca5e
>> Compiled against Qt
>> 5.14.2
>> Running against Qt
>> 5.14.2
>> Compiled against GDAL/OGR
>> 3.1.3
>> Running against GDAL/OGR
>> 3.1.3
>> Compiled against GEOS
>> 3.8.1-CAPI-1.13.3
>> Running against GEOS
>> 3.8.1-CAPI-1.13.3
>> Compiled against SQLite
>> 3.33.0
>> Running against SQLite
>> 3.33.0
>> PostgreSQL Client Version
>> 12.4 (Debian 12.4-1)
>> SpatiaLite Version
>> 5.0.0
>> QWT Version
>> 6.1.4
>> QScintilla2 Version
>> 2.11.2
>> Compiled against PROJ
>> 7.1.1
>> Running against PROJ
>> Rel. 7.1.1, September 1st, 2020
>> OS Version
>> Debian GNU/Linux bullseye/sid
>> This copy of QGIS writes debugging output.
>> Active python plugins
>> MetaSearch;
>> processing;
>> db_manager
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
> Salvatore Larosa
> linkedIn: http://linkedin.com/in/larosasalvatore
> twitter: @lrssvt
> skype: s.larosa
> IRC: lrssvt on freenode
>


-- 
Salvatore Larosa
linkedIn: http://linkedin.com/in/larosasalvatore
twitter: @lrssvt
skype: s.larosa
IRC: lrssvt on freenode
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200919/04842ee6/attachment.html>

From paul.wittle at dorsetcouncil.gov.uk  Tue Sep 22 01:01:55 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Tue, 22 Sep 2020 08:01:55 +0000
Subject: [QGIS-Developer] Remove all rubberbands from the canvas
Message-ID: <CWXP265MB162369F95299E8A780C20D4EC83B0@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Hi,

I’m having an issue with the documentation this morning. I’m writing a small python plugin and adding rubberbands to the canvas which is fine but for some reason I can’t seem to remove them from the canvas at the end.

To start with, this is because I’d not put anything in to remove them but now I’m using the iface.mapCanvas.scene().removeItem() function and they still are present.

I have two questions really:

  1.  I can’t see scene defined in the documentation for QgsMapCanvas; is this something that should be there?
  2.  Is there a way to simply remove all scenes from the canvas?

Any help would be great 😊
Thanks,

Paul Wittle
[cid:image001.jpg at 01D690BF.042E8840]<https://www.dorsetcouncil.gov.uk/>
Business Solutions Analyst (GIS)
ICT Operations
Dorset Council
01305 228473 <tel:01305%20228473%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20>
dorsetcouncil.gov.uk<https://www.dorsetcouncil.gov.uk>

[cid:image002.png at 01D690BF.042E8840]<https://www.facebook.com/DorsetCouncilUK>
[cid:image003.png at 01D690BF.042E8840]<https://instagram.com/DorsetCouncilUK>
[cid:image004.png at 01D690BF.042E8840]<https://twitter.com/DorsetCouncilUK>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/e4c169b6/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 5772 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/e4c169b6/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 3147 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/e4c169b6/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 6146 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/e4c169b6/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 2536 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/e4c169b6/attachment-0005.png>

From tim at kartoza.com  Tue Sep 22 02:19:58 2020
From: tim at kartoza.com (Tim Sutton)
Date: Tue, 22 Sep 2020 10:19:58 +0100
Subject: [QGIS-Developer] Remove all rubberbands from the canvas
In-Reply-To: <CWXP265MB162369F95299E8A780C20D4EC83B0@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
References: <CWXP265MB162369F95299E8A780C20D4EC83B0@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CAES-DZS0ZknGKkokOuK0FLuA8352Cd-CfFsaNC1FKFs45r-RMg@mail.gmail.com>

Hi Paul

AFAIK you need to keep track of all the rubber bands you add and then reset
them when you want to clean them up. See some example code here:

https://github.com/inasafe/inasafe/blob/develop/safe/gui/tools/rectangle_map_tool.py#L56

Regards

Tim

On Tue, Sep 22, 2020 at 9:02 AM Paul Wittle <
paul.wittle at dorsetcouncil.gov.uk> wrote:

> Hi,
>
>
>
> I’m having an issue with the documentation this morning. I’m writing a
> small python plugin and adding rubberbands to the canvas which is fine but
> for some reason I can’t seem to remove them from the canvas at the end.
>
>
>
> To start with, this is because I’d not put anything in to remove them but
> now I’m using the iface.mapCanvas.scene().removeItem() function and they
> still are present.
>
>
>
> I have two questions really:
>
>    1. I can’t see scene defined in the documentation for QgsMapCanvas; is
>    this something that should be there?
>    2. Is there a way to simply remove all scenes from the canvas?
>
>
>
> Any help would be great 😊
>
> Thanks,
>
>
>
> *Paul Wittle *
>
> <https://www.dorsetcouncil.gov.uk/>
>
> *Business Solutions Analyst (GIS)*
>
> *ICT Operations *
>
> *Dorset Council*
>
> 01305 228473
> <01305%20228473%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20>
>
> dorsetcouncil.gov.uk <https://www.dorsetcouncil.gov.uk>
>
>
>
> <https://www.facebook.com/DorsetCouncilUK>
>
> <https://instagram.com/DorsetCouncilUK>
>
> <https://twitter.com/DorsetCouncilUK>
>
>
> This e-mail and any files transmitted with it are intended solely for the
> use of the individual or entity to whom they are addressed. It may contain
> unclassified but sensitive or protectively marked material and should be
> handled accordingly. Unless you are the named addressee (or authorised to
> receive it for the addressee) you may not copy or use it, or disclose it to
> anyone else. If you have received this transmission in error please notify
> the sender immediately. All traffic may be subject to recording and/or
> monitoring in accordance with relevant legislation. Any views expressed in
> this message are those of the individual sender, except where the sender
> specifies and with authority, states them to be the views of Dorset
> Council. Dorset Council does not accept service of documents by fax or
> other electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its attachments
> whether encoded, encrypted or otherwise supplied are free from computer
> viruses, Dorset Council accepts no liability in respect of any loss, cost,
> damage or expense suffered as a result of accessing this message or any of
> its attachments. For information on how Dorset Council processes your
> information, please see www.dorsetcouncil.gov.uk/416433
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/3cdb99b5/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 5772 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/3cdb99b5/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 3147 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/3cdb99b5/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 6146 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/3cdb99b5/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 2536 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/3cdb99b5/attachment-0005.png>

From paul.wittle at dorsetcouncil.gov.uk  Tue Sep 22 04:34:51 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Tue, 22 Sep 2020 11:34:51 +0000
Subject: [QGIS-Developer] Remove all rubberbands from the canvas
Message-ID: <CWXP265MB16233690225AD111288843ABC83B0@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Hi Tim,

Thanks for getting back to me. That is a shame because I've already got various versions of what you suggest in my script so I guess I will just have to keep looking for the line that is wrong.

The reason I'm struggling is because I'm using it for drawing polygons and all the examples I find seem to be for rectangles or points. Is there a polygon example anywhere?

It does seem slightly odd that rubber bands can't be removed once the script has lost references to them though. The only way seems to be to close and reopen QGIS but I'm surprised there is not a clear method on canvas().

Thanks,
Paul

---

Hi Paul

AFAIK you need to keep track of all the rubber bands you add and then reset them when you want to clean them up. See some example code here:

https://github.com/inasafe/inasafe/blob/develop/safe/gui/tools/rectangle_map_tool.py#L56

Regards

Tim

On Tue, Sep 22, 2020 at 9:02 AM Paul Wittle < paul.wittle at dorsetcouncil.gov.uk> wrote:

> Hi,
>
>
>
> I’m having an issue with the documentation this morning. I’m writing a
> small python plugin and adding rubberbands to the canvas which is fine
> but for some reason I can’t seem to remove them from the canvas at the end.
>
>
>
> To start with, this is because I’d not put anything in to remove them
> but now I’m using the iface.mapCanvas.scene().removeItem() function
> and they still are present.
>
>
>
> I have two questions really:
>
>    1. I can’t see scene defined in the documentation for QgsMapCanvas; is
>    this something that should be there?
>    2. Is there a way to simply remove all scenes from the canvas?
>
>
>
> Any help would be great 😊
>
> Thanks,
>
>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433

From tim at kartoza.com  Tue Sep 22 04:42:49 2020
From: tim at kartoza.com (Tim Sutton)
Date: Tue, 22 Sep 2020 12:42:49 +0100
Subject: [QGIS-Developer] QGIS AMA with Giovanni Manghi this Kwakfest Friday
	- and more?
Message-ID: <CAES-DZRohdRH-AO8AfYcYqKc7EMo4Zw6jvDvVu1G-R5iubHNfg@mail.gmail.com>

Dear Users of our beloved QGIS Project

This Friday is KwakFriday! What is KwakFriday you may be wondering to
yourself? It is an initiative to replace the wonderful community meetups we
used to hold every six months when times were different. Like our in-person
meetings, the event is organised on a principle of self-organisation and
community participation.

Giovanni Manghi (world renowned QGIS expert) and I will be hosting a 2 hour
AMA (ask me anything) session on friday morning WET. You can find out more
about it here:

https://github.com/qgis/QGIS/wiki/QHF-September-2020

The session will be recorded so if you can't watch live, you can still feel
free to submit your QGIS brain teasers and burning questions for Giovanni
to answer.

We really encourage others to follow our initiative, using the above wiki
page to organise your plans (just add a section below our AMA one). You can
host virtual meetups in the Jitsi room, plan your next steps to take QGIS
further down the road to world domination and much much more. We encourage
language and region specific huddles, documentation improvement sessions,
bug fixing, making beautiful maps, and working together to do amazing
things with QGIS.

Participants are kindly reminded to please read and observe our QGIS Code
of Conduct and Diversity Statement to make these events a great experience
for everyone!

https://www.qgis.org/en/site/getinvolved/governance/codeofconduct/codeofconduct.html
https://www.qgis.org/en/site/getinvolved/governance/codeofconduct/diversitystatement.html

We look forward to seeing you there!

Regards

Tim

-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Skype: timlinux Irc: timlinux on #qgis at freenode.net
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
Kartoza is a merger between Linfiniti and Afrispatial
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/b9994aad/attachment.html>

From mmirra at mcgr.fr  Tue Sep 22 05:59:14 2020
From: mmirra at mcgr.fr (Mathias MIRRA)
Date: Tue, 22 Sep 2020 12:59:14 +0000
Subject: [QGIS-Developer] Delete unnecessary PyQGIS attributes
Message-ID: <MRXP264MB05015A94C95D699244623828D33B0@MRXP264MB0501.FRAP264.PROD.OUTLOOK.COM>

Here is my problem: I have 3 layers only I would like to remove all the attributes that are not on layer 1, no table of layers will provide a foreign key or link. So delete the layer 2 and 3 attributes that are not on layer 1.


Screen : https://i.stack.imgur.com/nnOxd.png

https://gis.stackexchange.com/questions/374754/delete-unnecessary-pyqgis-attributes?noredirect=1#comment612308_374754

Mathias Mirra
Développeur

Tel. : 06 29 70 41 92 | Mail. : mmirra at mcgr.fr<mailto:mmirra at mcgr.fr>

[cid:image001.png at 01D690F0.EE773970]
281 Route d'Espagne,
31100 Toulouse

05 32 09 38 71 | www.mcgr.fr<http://www.mcgr.fr/>

  [cid:image002.png at 01D690F0.EE773970] <https://www.facebook.com/groupemcgr/>      [cid:image003.png at 01D690F0.EE773970] <https://fr.linkedin.com/company/groupemcgr>      [cid:image004.png at 01D690F0.EE773970] <https://www.youtube.com/channel/UCahBf8ogJuyGlzAczTTtC9w>

[Une image contenant plane, lumière, blanc, grand  Description générée automatiquement]


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/4d84a54d/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 10961 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/4d84a54d/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 1682 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/4d84a54d/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 1832 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/4d84a54d/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 1721 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/4d84a54d/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 18243 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/4d84a54d/attachment-0009.png>

From apasotti at gmail.com  Tue Sep 22 07:16:05 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 22 Sep 2020 16:16:05 +0200
Subject: [QGIS-Developer] void QgsMapSettings::setExtent( const QgsRectangle
 &rect, bool magnified = true ); 
Message-ID: <CAL5Q671QB18p9joTxbr_rUJkL-w_NngDFHHTc8HzYEJuCsBhOw@mail.gmail.com>

Hi,

Does this make sense to anyone?

We have the documentation for
void QgsMapCanvas::setExtent( const QgsRectangle &r, bool magnified =
false ); that clearly states The \a magnified argument dictates
whether existing canvas constraints such
     * as a scale lock should be respected or not during the
operation. If \a magnified is
     * TRUE then an existing scale lock constraint will be applied.

But then we call the homonymous (and underdocumented) method in
QgsMapSettings https://github.com/qgis/QGIS/blob/master/src/gui/qgsmapcanvas.cpp#L1089
and... here is were we break our promise
https://github.com/qgis/QGIS/blob/master/src/core/qgsmapsettings.cpp#L83

We do nothing about locked scale (which is ok because the scale lock
belongs to the canvas) and we change the semantics of "magnified" and
apply the magnification factor when that one is FALSE (!).

I really don't understand the logic behind it, can someone please shed
some light on this?

I'm going to fix the issue (about scale locked) in the canvas method
but I still think that we should clear this API unless I totally
misunderstood it.

Thanks

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From paul.wittle at dorsetcouncil.gov.uk  Tue Sep 22 09:07:16 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Tue, 22 Sep 2020 16:07:16 +0000
Subject: [QGIS-Developer] Remove all rubberbands from the canvas
In-Reply-To: <CWXP265MB162394F60EDA0032451A5F45C83B0@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
References: <CWXP265MB162369F95299E8A780C20D4EC83B0@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CAEMjq0iKSS0WGXsLRJBtOLX1AUit0JmOM+4HxgLTyHHPn4BzSw@mail.gmail.com>
 <CWXP265MB162394F60EDA0032451A5F45C83B0@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CWXP265MB162382022E52650F99EA1C88C83B0@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

I have eventually worked out the issue.

As I thought the use of .addGeometry() meant I was adding new polygons and the previous ones were not being deleted. This was because the object self.rubberband in my script was not persisting through my code and so I replaced it with an variable defined at a higher level (i.e. rubberbandList = {}) and that allowed me to use the scene().removeItem() successfully.

Hope that is helpful to others.
Paul


From: Paul Wittle
Sent: 22 September 2020 14:52
To: Florian Heyder <Florian.J.Heyder at gmail.com>
Subject: RE: [QGIS-Developer] Remove all rubberbands from the canvas

Hi,

Thanks for the tip; I have indeed tried that and whilst it doesn’t error the rubber band is not removed either.

The scene() object is really odd as well as it is barely in any documentation, I certainly can’t find it in the API reference.

A bit of a mystery really but I suspect I’m accidentally adding the rubber band multiple times and then only removing one of them…but I can’t see why at the moment.

Cheers,
Paul


From: Florian Heyder <Florian.J.Heyder at gmail.com<mailto:Florian.J.Heyder at gmail.com>>
Sent: 22 September 2020 10:59
To: Paul Wittle <P.Wittle at dorsetcc.gov.uk<mailto:P.Wittle at dorsetcc.gov.uk>>
Subject: Re: [QGIS-Developer] Remove all rubberbands from the canvas

Try this, you have to remove from scene:
https://webgeodatavore.github.io/pyqgis-samples/gui-group/QgsRubberBand.html

On Tue, Sep 22, 2020 at 4:01 AM Paul Wittle <paul.wittle at dorsetcouncil.gov.uk<mailto:paul.wittle at dorsetcouncil.gov.uk>> wrote:
Hi,

I’m having an issue with the documentation this morning. I’m writing a small python plugin and adding rubberbands to the canvas which is fine but for some reason I can’t seem to remove them from the canvas at the end.

To start with, this is because I’d not put anything in to remove them but now I’m using the iface.mapCanvas.scene().removeItem() function and they still are present.

I have two questions really:

1.      I can’t see scene defined in the documentation for QgsMapCanvas; is this something that should be there?

2.      Is there a way to simply remove all scenes from the canvas?

Any help would be great 😊
Thanks,

Paul Wittle
[cid:image005.jpg at 01D69102.D1AB60C0]<https://www.dorsetcouncil.gov.uk/>
Business Solutions Analyst (GIS)
ICT Operations
Dorset Council
01305 228473 <tel:01305%20228473%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20>
dorsetcouncil.gov.uk<https://www.dorsetcouncil.gov.uk>

[cid:image006.png at 01D69102.D1AB60C0]<https://www.facebook.com/DorsetCouncilUK>
[cid:image007.png at 01D69102.D1AB60C0]<https://instagram.com/DorsetCouncilUK>
[cid:image008.png at 01D69102.D1AB60C0]<https://twitter.com/DorsetCouncilUK>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433<http://www.dorsetcouncil.gov.uk/416433>
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/aeee8eda/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.jpg
Type: image/jpeg
Size: 5729 bytes
Desc: image005.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/aeee8eda/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 4194 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/aeee8eda/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.png
Type: image/png
Size: 6142 bytes
Desc: image007.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/aeee8eda/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 2536 bytes
Desc: image008.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200922/aeee8eda/attachment-0005.png>

From nyall.dawson at gmail.com  Wed Sep 23 15:24:29 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 24 Sep 2020 08:24:29 +1000
Subject: [QGIS-Developer] Heads-up: PyQt6 removes pyrcc
Message-ID: <CAB28Asi4iBxJ4Pso_TcsDAApBgjpH3msOdSL5jaP+0KstFqQGA@mail.gmail.com>

Hi list,

Just a quick heads up that PyQt6 is REMOVING the pyrcc tool (see
download page at
https://riverbankcomputing.com/software/pyqt/download).

While this will take some time to impact QGIS, if you're a plugin
developer and still using this legacy tool then it's something to be
aware of, and start adapting for!

You can (and should!) already remove the use of this tool from your
plugins. There's better approaches to achieve everything that the tool
used to do, and moving to these will make your plugins more portable
and easier to develop.

More related discussion on the PyQt list:
https://www.riverbankcomputing.com/pipermail/pyqt/2020-September/043209.html

Nyall

From cavallini at faunalia.it  Wed Sep 23 23:12:54 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 24 Sep 2020 08:12:54 +0200
Subject: [QGIS-Developer] DB Manager crash in master
Message-ID: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>

Hi all,
I just compiled master, to test the patch on DB Manager from yesterday,
but now qgis crashes systematically when I try to open a connection from
DB Manager. No problem when opening from the browser.
Does anyone confirm, or is it a local effect?
Thanks.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From apasotti at gmail.com  Wed Sep 23 23:49:01 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 24 Sep 2020 08:49:01 +0200
Subject: [QGIS-Developer] DB Manager crash in master
In-Reply-To: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>
References: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>
Message-ID: <CAL5Q672i3YXdXwDc4B9hD6btZo0EjgJADx3Q+WNEdf5w9R+6tQ@mail.gmail.com>

On Thu, Sep 24, 2020 at 8:10 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
>
> Hi all,
> I just compiled master, to test the patch on DB Manager from yesterday,
> but now qgis crashes systematically when I try to open a connection from
> DB Manager. No problem when opening from the browser.
> Does anyone confirm, or is it a local effect?

Hi Paolo,

You may be hitting this unresolved bug:
https://github.com/qgis/QGIS/issues/38393


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From cavallini at faunalia.it  Wed Sep 23 23:53:13 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 24 Sep 2020 08:53:13 +0200
Subject: [QGIS-Developer] DB Manager crash in master
In-Reply-To: <CAL5Q672i3YXdXwDc4B9hD6btZo0EjgJADx3Q+WNEdf5w9R+6tQ@mail.gmail.com>
References: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>
 <CAL5Q672i3YXdXwDc4B9hD6btZo0EjgJADx3Q+WNEdf5w9R+6tQ@mail.gmail.com>
Message-ID: <a56813ef-f256-941f-f7e3-c11f630428d0@faunalia.it>

it looks like, thanks.
maybe it is worth the while to discuss about the future of integration
pg-qgis?
cheers.

Il 24/09/20 08:49, Alessandro Pasotti ha scritto:
> On Thu, Sep 24, 2020 at 8:10 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
>>
>> Hi all,
>> I just compiled master, to test the patch on DB Manager from yesterday,
>> but now qgis crashes systematically when I try to open a connection from
>> DB Manager. No problem when opening from the browser.
>> Does anyone confirm, or is it a local effect?
> 
> Hi Paolo,
> 
> You may be hitting this unresolved bug:
> https://github.com/qgis/QGIS/issues/38393
> 
> 

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From apasotti at gmail.com  Wed Sep 23 23:53:58 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 24 Sep 2020 08:53:58 +0200
Subject: [QGIS-Developer] DB Manager crash in master
In-Reply-To: <a56813ef-f256-941f-f7e3-c11f630428d0@faunalia.it>
References: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>
 <CAL5Q672i3YXdXwDc4B9hD6btZo0EjgJADx3Q+WNEdf5w9R+6tQ@mail.gmail.com>
 <a56813ef-f256-941f-f7e3-c11f630428d0@faunalia.it>
Message-ID: <CAL5Q672RCVpi0jYd7u4BWPbboUjx=MpPBceVBqQexG8FkF=p-A@mail.gmail.com>

On Thu, Sep 24, 2020 at 8:50 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
>
> it looks like, thanks.
> maybe it is worth the while to discuss about the future of integration
> pg-qgis?

Which is what?

This bug is about PyQGIS bindings in general and it is probably
upstream in SIP, it's not related  to PG or DB-manager.


> cheers.
>
> Il 24/09/20 08:49, Alessandro Pasotti ha scritto:
> > On Thu, Sep 24, 2020 at 8:10 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
> >>
> >> Hi all,
> >> I just compiled master, to test the patch on DB Manager from yesterday,
> >> but now qgis crashes systematically when I try to open a connection from
> >> DB Manager. No problem when opening from the browser.
> >> Does anyone confirm, or is it a local effect?
> >
> > Hi Paolo,
> >
> > You may be hitting this unresolved bug:
> > https://github.com/qgis/QGIS/issues/38393
> >
> >
>
> --
> Paolo Cavallini
> www.faunalia.eu - QGIS.org
> training, support, development on QGIS, PostGIS and more



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Thu Sep 24 00:29:25 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 24 Sep 2020 09:29:25 +0200
Subject: [QGIS-Developer] Heads-up: PyQt6 removes pyrcc
In-Reply-To: <CAB28Asi4iBxJ4Pso_TcsDAApBgjpH3msOdSL5jaP+0KstFqQGA@mail.gmail.com>
References: <CAB28Asi4iBxJ4Pso_TcsDAApBgjpH3msOdSL5jaP+0KstFqQGA@mail.gmail.com>
Message-ID: <74cb20e7-b27e-b2b5-da66-db80200b2e68@duif.net>

Hi Nyall and python devs,

I had to lookup what pyrcc was doing, because apparently I did not use it anymore...

I think this is the most clear:
https://www.riverbankcomputing.com/static/Docs/pyqtdeploy/pyrcc.html

It is/was a way to bundle several resources (images etc) into ONE (in our case python) file.

According to the "discussion on the PyQt list", there is actually not so much benefit for python (for C++ it is) and it is just easier to load images itself in a python way (and create QIcons with the image directly instead of using a 'resource path'), see link above about how.

Thanks Nyall for looking into the future :-)

Regards,

Richard Duivenvoorde

PS I create a Feature Request in Plugin Builder plugin to remove pyrcc in future, as in my experience a lot of people start of their first plugin with the Plugin Builder, and it is/was actually using pyrcc.


On 9/24/20 12:24 AM, Nyall Dawson wrote:
> Hi list,
> 
> Just a quick heads up that PyQt6 is REMOVING the pyrcc tool (see
> download page at
> https://riverbankcomputing.com/software/pyqt/download).
> 
> While this will take some time to impact QGIS, if you're a plugin
> developer and still using this legacy tool then it's something to be
> aware of, and start adapting for!
> 
> You can (and should!) already remove the use of this tool from your
> plugins. There's better approaches to achieve everything that the tool
> used to do, and moving to these will make your plugins more portable
> and easier to develop.
> 
> More related discussion on the PyQt list:
> https://www.riverbankcomputing.com/pipermail/pyqt/2020-September/043209.html

From thomas at qgis.de  Thu Sep 24 02:39:15 2020
From: thomas at qgis.de (=?UTF-8?Q?Thomas_Sch=C3=BCttenberg?=)
Date: Thu, 24 Sep 2020 11:39:15 +0200 (CEST)
Subject: [QGIS-Developer] numeric values in text edit widget (forms)
Message-ID: <881013405.53044.1600940355494@office.mailbox.org>

Hi!

I just realized that numeric values (from a PostGIS table) are not displayed by a text edit widget in an attribute form, everything that is instead shown is 0 [zero]. 

I switched from the default range widget to text edit widget, because I just want to show the attributes, read only, and this way it looks nicer to me. (BTW, the min/max values of the randfe widget are quite tremendous, see https://github.com/qgis/QGIS/issues/24725)

To me this seems to be a bug and I suspect it to be related to localization (de_DE) issues which are themselves numerous. Therefore I wanted to check if anybody here knows an already existing/open bug report on this, because I did not find something exactly fitting. - Otherwise I will file a new one.

I tested on Windows with QGIS 3.4.12, 3.10.9 and 3.14.1.

Cheers
Thomas

From apasotti at gmail.com  Thu Sep 24 03:08:27 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 24 Sep 2020 12:08:27 +0200
Subject: [QGIS-Developer] numeric values in text edit widget (forms)
In-Reply-To: <881013405.53044.1600940355494@office.mailbox.org>
References: <881013405.53044.1600940355494@office.mailbox.org>
Message-ID: <CAL5Q673d=LriaWomn-Ew9fmsH9v5P5FRLDWxr8Tes_bSGMX0Wg@mail.gmail.com>

On Thu, Sep 24, 2020 at 12:01 PM Thomas Schüttenberg <thomas at qgis.de> wrote:
>
> Hi!
>
> I just realized that numeric values (from a PostGIS table) are not displayed by a text edit widget in an attribute form, everything that is instead shown is 0 [zero].
>
> I switched from the default range widget to text edit widget, because I just want to show the attributes, read only, and this way it looks nicer to me. (BTW, the min/max values of the randfe widget are quite tremendous, see https://github.com/qgis/QGIS/issues/24725)
>
> To me this seems to be a bug and I suspect it to be related to localization (de_DE) issues which are themselves numerous. Therefore I wanted to check if anybody here knows an already existing/open bug report on this, because I did not find something exactly fitting. - Otherwise I will file a new one.

Please file a new ticket, can you also check if with en_US locale the
issue is still there?


>
> I tested on Windows with QGIS 3.4.12, 3.10.9 and 3.14.1.
>
> Cheers
> Thomas
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From peter.petrik at lutraconsulting.co.uk  Thu Sep 24 03:31:41 2020
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Thu, 24 Sep 2020 12:31:41 +0200
Subject: [QGIS-Developer] (QGIS 2020 Grant Report) QGIS MacOS Package
	Improvements
Message-ID: <CA+T_MsK9j8=R_XPb9fzDRQEQVMU+jdRaieJy8VU1Y0xoLw4ZMg@mail.gmail.com>

Hi PSC, devs,

I want to announce a detailed report for MacOS packages described in
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/177

We have addressed the tasks from the proposal except the notarization
process. We underestimated the work to be done in the grant and therefore
we spent all time (and much more) to address critical bugs in projection,
grass, saga, gdal, python and other parts of the MacOS packages. It looks
like the internal testing and tests by power users are becoming finally
positive, so I hope QGIS 3.16 MacOS package will be really stable and
useful. We added the note to the QGIS.org webpage about the workaround for
notarization for now.

The work resulted in these improvements for users coming in QGIS 3.16 MacOS
Packages:
 - Refactored and finalized the QGIS-Mac-Packager to work without homebrew
dependencies.
 - Update to GDAL3, PROJ6, GRASS 7.8.2
 - Fix Grass, Saga, GDAL providers loading
 - Fix the bundle relocation. User would be able to move the installed QGIS
bundle to an alternative location (e.g. ~/Applications instead of root
/Application folder)
 - Fix issues related to _iconv library symbols when running GDAL
processing or other
 - Add QtDesigner executable into bundle, so users would be able to design
QGIS forms
- Inclusion of pip in the bundled python environment so users could easily
install additional Python packages into the bundled Python environment

On top of the grant tasks, we have added to the all-in-one bundle
 - qgis_process
 - qgis_mapserver (QGIS server)

The QGIS nightly builds are from today (
qgis_nightly_master_20200924_035824.dmg
<https://qgis.org/downloads/macos/nightly/qgis_nightly_master_20200924_035824.dmg>)
based
on the qgis-deps, as described in the grant proposal. Also QGIS 3.16 PR
will be released with this new system, so please test the nightly builds
and report any issues in the QGIS bug tracker, so we can address them
before the official release date.

Kind regards,
Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200924/56c2027f/attachment.html>

From cavallini at faunalia.it  Thu Sep 24 06:42:48 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 24 Sep 2020 15:42:48 +0200
Subject: [QGIS-Developer] DB Manager crash in master
In-Reply-To: <CAL5Q672RCVpi0jYd7u4BWPbboUjx=MpPBceVBqQexG8FkF=p-A@mail.gmail.com>
References: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>
 <CAL5Q672i3YXdXwDc4B9hD6btZo0EjgJADx3Q+WNEdf5w9R+6tQ@mail.gmail.com>
 <a56813ef-f256-941f-f7e3-c11f630428d0@faunalia.it>
 <CAL5Q672RCVpi0jYd7u4BWPbboUjx=MpPBceVBqQexG8FkF=p-A@mail.gmail.com>
Message-ID: <13556a91-e9bb-5cdd-10cd-56030858d115@faunalia.it>

Hi Ale,
I see in the ticket it is taken for granted that DB Manager is endo of
life. IMHO there is a considerable number of functions without which
users will suffer. I believe it would be good to have a minimum set of
functions to be ported, and a roadmap for it. Perhaps a QEP would be
good here.
Cheers.

Il 24/09/20 08:53, Alessandro Pasotti ha scritto:
> On Thu, Sep 24, 2020 at 8:50 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
>>
>> it looks like, thanks.
>> maybe it is worth the while to discuss about the future of integration
>> pg-qgis?
> 
> Which is what?
> 
> This bug is about PyQGIS bindings in general and it is probably
> upstream in SIP, it's not related  to PG or DB-manager.
> 
> 
>> cheers.
>>
>> Il 24/09/20 08:49, Alessandro Pasotti ha scritto:
>>> On Thu, Sep 24, 2020 at 8:10 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
>>>>
>>>> Hi all,
>>>> I just compiled master, to test the patch on DB Manager from yesterday,
>>>> but now qgis crashes systematically when I try to open a connection from
>>>> DB Manager. No problem when opening from the browser.
>>>> Does anyone confirm, or is it a local effect?
>>>
>>> Hi Paolo,
>>>
>>> You may be hitting this unresolved bug:
>>> https://github.com/qgis/QGIS/issues/38393
>>>
>>>
>>
>> --
>> Paolo Cavallini
>> www.faunalia.eu - QGIS.org
>> training, support, development on QGIS, PostGIS and more
> 
> 
> 

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From apasotti at gmail.com  Thu Sep 24 07:02:03 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 24 Sep 2020 16:02:03 +0200
Subject: [QGIS-Developer] DB Manager crash in master
In-Reply-To: <13556a91-e9bb-5cdd-10cd-56030858d115@faunalia.it>
References: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>
 <CAL5Q672i3YXdXwDc4B9hD6btZo0EjgJADx3Q+WNEdf5w9R+6tQ@mail.gmail.com>
 <a56813ef-f256-941f-f7e3-c11f630428d0@faunalia.it>
 <CAL5Q672RCVpi0jYd7u4BWPbboUjx=MpPBceVBqQexG8FkF=p-A@mail.gmail.com>
 <13556a91-e9bb-5cdd-10cd-56030858d115@faunalia.it>
Message-ID: <CAL5Q673wUYUgnK_fMFxmLeJ1uviaVEM1kOnQNH9LUVLFUfvgrA@mail.gmail.com>

On Thu, Sep 24, 2020 at 3:40 PM Paolo Cavallini <cavallini at faunalia.it> wrote:
>
> Hi Ale,
> I see in the ticket it is taken for granted that DB Manager is endo of
> life.

Don't worry, it will be maintained until we get feature parity.

> IMHO there is a considerable number of functions without which
> users will suffer. I believe it would be good to have a minimum set of
> functions to be ported, and a roadmap for it. Perhaps a QEP would be
> good here.

It was discussed several times during the last years, but here is at least one:
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/171

Then we have n. 3 here:
http://blog.qgis.org/2020/02/23/reports-from-the-winning-grant-proposals-2019/

There is no roadmap because the work is long but here is a list of DB
manager features that are already available today in QGIS master in
the browser tree context menus:

- create a new schema
- delete a schema
- rename a schema
- create a new table/layer
- rename table/layer
- delete a table/layer
- truncate a table/layer
- refresh a materialized view
- list fields for a table/view
- add a new field
- delete a field

Also, some parts of DB-manager are using the new core QGIS connections
API instead of relying on Python packages, this is another important
step for the porting to C++.

Kind regards.


> Cheers.
>
> Il 24/09/20 08:53, Alessandro Pasotti ha scritto:
> > On Thu, Sep 24, 2020 at 8:50 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
> >>
> >> it looks like, thanks.
> >> maybe it is worth the while to discuss about the future of integration
> >> pg-qgis?
> >
> > Which is what?
> >
> > This bug is about PyQGIS bindings in general and it is probably
> > upstream in SIP, it's not related  to PG or DB-manager.
> >
> >
> >> cheers.
> >>
> >> Il 24/09/20 08:49, Alessandro Pasotti ha scritto:
> >>> On Thu, Sep 24, 2020 at 8:10 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
> >>>>
> >>>> Hi all,
> >>>> I just compiled master, to test the patch on DB Manager from yesterday,
> >>>> but now qgis crashes systematically when I try to open a connection from
> >>>> DB Manager. No problem when opening from the browser.
> >>>> Does anyone confirm, or is it a local effect?
> >>>
> >>> Hi Paolo,
> >>>
> >>> You may be hitting this unresolved bug:
> >>> https://github.com/qgis/QGIS/issues/38393
> >>>
> >>>
> >>
> >> --
> >> Paolo Cavallini
> >> www.faunalia.eu - QGIS.org
> >> training, support, development on QGIS, PostGIS and more
> >
> >
> >
>
> --
> Paolo Cavallini
> www.faunalia.eu - QGIS.org
> training, support, development on QGIS, PostGIS and more
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From cavallini at faunalia.it  Thu Sep 24 07:09:52 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 24 Sep 2020 16:09:52 +0200
Subject: [QGIS-Developer] DB Manager crash in master
In-Reply-To: <CAL5Q673wUYUgnK_fMFxmLeJ1uviaVEM1kOnQNH9LUVLFUfvgrA@mail.gmail.com>
References: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>
 <CAL5Q672i3YXdXwDc4B9hD6btZo0EjgJADx3Q+WNEdf5w9R+6tQ@mail.gmail.com>
 <a56813ef-f256-941f-f7e3-c11f630428d0@faunalia.it>
 <CAL5Q672RCVpi0jYd7u4BWPbboUjx=MpPBceVBqQexG8FkF=p-A@mail.gmail.com>
 <13556a91-e9bb-5cdd-10cd-56030858d115@faunalia.it>
 <CAL5Q673wUYUgnK_fMFxmLeJ1uviaVEM1kOnQNH9LUVLFUfvgrA@mail.gmail.com>
Message-ID: <e784614c-8735-ea63-bc85-ab7b356cad45@faunalia.it>

Fine, thanks a lot Alessandro. I use DB Manager quite extensively, both
for training and for real work, so probably I can offer a reasonable
user POV; I'm available for testing and discussion as needed.
Cheers.

Il 24/09/20 16:02, Alessandro Pasotti ha scritto:
> On Thu, Sep 24, 2020 at 3:40 PM Paolo Cavallini <cavallini at faunalia.it> wrote:
>>
>> Hi Ale,
>> I see in the ticket it is taken for granted that DB Manager is endo of
>> life.
> 
> Don't worry, it will be maintained until we get feature parity.
> 
>> IMHO there is a considerable number of functions without which
>> users will suffer. I believe it would be good to have a minimum set of
>> functions to be ported, and a roadmap for it. Perhaps a QEP would be
>> good here.
> 
> It was discussed several times during the last years, but here is at least one:
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/171
> 
> Then we have n. 3 here:
> http://blog.qgis.org/2020/02/23/reports-from-the-winning-grant-proposals-2019/
> 
> There is no roadmap because the work is long but here is a list of DB
> manager features that are already available today in QGIS master in
> the browser tree context menus:
> 
> - create a new schema
> - delete a schema
> - rename a schema
> - create a new table/layer
> - rename table/layer
> - delete a table/layer
> - truncate a table/layer
> - refresh a materialized view
> - list fields for a table/view
> - add a new field
> - delete a field
> 
> Also, some parts of DB-manager are using the new core QGIS connections
> API instead of relying on Python packages, this is another important
> step for the porting to C++.
> 
> Kind regards.
> 
> 
>> Cheers.
>>
>> Il 24/09/20 08:53, Alessandro Pasotti ha scritto:
>>> On Thu, Sep 24, 2020 at 8:50 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
>>>>
>>>> it looks like, thanks.
>>>> maybe it is worth the while to discuss about the future of integration
>>>> pg-qgis?
>>>
>>> Which is what?
>>>
>>> This bug is about PyQGIS bindings in general and it is probably
>>> upstream in SIP, it's not related  to PG or DB-manager.
>>>
>>>
>>>> cheers.
>>>>
>>>> Il 24/09/20 08:49, Alessandro Pasotti ha scritto:
>>>>> On Thu, Sep 24, 2020 at 8:10 AM Paolo Cavallini <cavallini at faunalia.it> wrote:
>>>>>>
>>>>>> Hi all,
>>>>>> I just compiled master, to test the patch on DB Manager from yesterday,
>>>>>> but now qgis crashes systematically when I try to open a connection from
>>>>>> DB Manager. No problem when opening from the browser.
>>>>>> Does anyone confirm, or is it a local effect?
>>>>>
>>>>> Hi Paolo,
>>>>>
>>>>> You may be hitting this unresolved bug:
>>>>> https://github.com/qgis/QGIS/issues/38393
>>>>>
>>>>>
>>>>
>>>> --
>>>> Paolo Cavallini
>>>> www.faunalia.eu - QGIS.org
>>>> training, support, development on QGIS, PostGIS and more
>>>
>>>
>>>
>>
>> --
>> Paolo Cavallini
>> www.faunalia.eu - QGIS.org
>> training, support, development on QGIS, PostGIS and more
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> 

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From strk at kbt.io  Thu Sep 24 10:20:11 2020
From: strk at kbt.io (Sandro Santilli)
Date: Thu, 24 Sep 2020 19:20:11 +0200
Subject: [QGIS-Developer] DB Manager crash in master
In-Reply-To: <e784614c-8735-ea63-bc85-ab7b356cad45@faunalia.it>
References: <0830d3b9-4887-552a-6a85-b39e5f3bac5b@faunalia.it>
 <CAL5Q672i3YXdXwDc4B9hD6btZo0EjgJADx3Q+WNEdf5w9R+6tQ@mail.gmail.com>
 <a56813ef-f256-941f-f7e3-c11f630428d0@faunalia.it>
 <CAL5Q672RCVpi0jYd7u4BWPbboUjx=MpPBceVBqQexG8FkF=p-A@mail.gmail.com>
 <13556a91-e9bb-5cdd-10cd-56030858d115@faunalia.it>
 <CAL5Q673wUYUgnK_fMFxmLeJ1uviaVEM1kOnQNH9LUVLFUfvgrA@mail.gmail.com>
 <e784614c-8735-ea63-bc85-ab7b356cad45@faunalia.it>
Message-ID: <20200924172011.GC39059@lif>

On Thu, Sep 24, 2020 at 04:09:52PM +0200, Paolo Cavallini wrote:
> Fine, thanks a lot Alessandro. I use DB Manager quite extensively, both
> for training and for real work, so probably I can offer a reasonable
> user POV; I'm available for testing and discussion as needed.

I thought I'd mention: I'm using DBManager for its TopoViewer plugin.
Not sure where would that belong (does browser support plugins?)

--strk;

From redistricting at stattosoftware.com  Thu Sep 24 13:02:38 2020
From: redistricting at stattosoftware.com (Statto Redistricting)
Date: Thu, 24 Sep 2020 14:02:38 -0600
Subject: [QGIS-Developer] Plugin approval question
Message-ID: <49564564aaf107c152ee82e4ddc4136e.squirrel@webmail-box5929.bluehost.com>

Sorry if this isn't the best place to ask this, but I've been waiting on
approval for a plugin for a week now and haven't heard anything - is there
a way to check the plugin approval backlog to see how long it will take?

Plugin is located here if anyone is interested:
https://plugins.qgis.org/plugins/qgis3redistricter-master/version/2.1/

Thank you
John Holden

From guido.haefliger at vogelwarte.ch  Thu Sep 24 23:11:56 2020
From: guido.haefliger at vogelwarte.ch (=?iso-8859-1?Q?H=E4fliger_Guido?=)
Date: Fri, 25 Sep 2020 06:11:56 +0000
Subject: [QGIS-Developer] refresh conditional formatting in attribute table
	by pyqgis
Message-ID: <D2417C80A342B246BEAF2C90A301E0AF77294246@MailNT.vogelwarte.ch>

Hi all

I'm developing a plugin which executes some updates of attributes on a loaded layer where are conditional formatting rules (full row) in the attribute table defined. I want to apply the conditional formatting rules after the table-updates by pyqgis. It works if I close and open the attribute table by pyqgis but I only manage to close the attribute table in dock view. My questions:


-          Is it possible to apply the conditional formatting rules by pyqgis without closing and opening the attribute table (loop over all rules and apply them)?

-          How can I close an attribute table which is not in docked view by pyqgis?

Thanks for your help in advance

____________________________________________________

Dipl. Ing. ETH Guido Häfliger
EDV/GIS-Spezialist
Tel. ++41 41 462 97 60
guido.haefliger at vogelwarte.ch<mailto:guido.haefliger at vogelwarte.ch>
www.vogelwarte.ch<http://www.vogelwarte.ch/>

Schweizerische Vogelwarte | Seerose 1 | CH-6204 Sempach | Schweiz
Station ornithologique suisse | Seerose 1 | CH-6204 Sempach | Suisse
Stazione ornitologica svizzera | Seerose 1 | CH-6204 Sempach | Svizzera
Swiss Ornithological Institute | Seerose 1 | CH-6204 Sempach | Switzerland

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200925/3246b35a/attachment.html>

From etienne.trimaille at gmail.com  Thu Sep 24 23:18:54 2020
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Fri, 25 Sep 2020 08:18:54 +0200
Subject: [QGIS-Developer] Plugin approval question
In-Reply-To: <49564564aaf107c152ee82e4ddc4136e.squirrel@webmail-box5929.bluehost.com>
References: <49564564aaf107c152ee82e4ddc4136e.squirrel@webmail-box5929.bluehost.com>
Message-ID: <CAMtDFLJ8hKyr5==e53us4QpT5vkYKoLi+HkR6aYt6kuFO0ZeEQ@mail.gmail.com>

I have just checked quickly.

https://plugins.qgis.org/plugins/qgis3redistricter-master/ in the "Details"
tabs.
Clicking on :
* on the issue tracker link, it leads to your website, so we can't create
issues. It must be an issue tracker.
* on the code repository, it leads to a 404

So it makes the task difficult about the approval, we couldn't contact you.


Le jeu. 24 sept. 2020 à 22:26, Statto Redistricting <
redistricting at stattosoftware.com> a écrit :

> Sorry if this isn't the best place to ask this, but I've been waiting on
> approval for a plugin for a week now and haven't heard anything - is there
> a way to check the plugin approval backlog to see how long it will take?
>
> Plugin is located here if anyone is interested:
> https://plugins.qgis.org/plugins/qgis3redistricter-master/version/2.1/
>
> Thank you
> John Holden
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200925/83306f59/attachment.html>

From rdmailings at duif.net  Thu Sep 24 23:46:14 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 25 Sep 2020 08:46:14 +0200
Subject: [QGIS-Developer] PR34358 any Oracle guru reviewers available?
Message-ID: <33f06282-03f2-1955-0b70-2e8ce28624f8@duif.net>

Hi,

Going over current pull requests I see
https://github.com/qgis/QGIS/pull/34358
which should fix 
https://github.com/qgis/QGIS/issues/32521

Any Oracle Guru/Reviewer available to review it (Oslandia?) ?

The 'stale-robot' has been coming several times (and sent away by the author....) :-)

IF it is helpfull I can try to install an oracle Locator DB on my laptop, to see if I can build this PR
But it it is much easier to test for people who have Oracle db's around and always build QGIS with Oracle support...
Still a hassle though, I agree. But it looks like a nice fix to me...

Regards,

Richard Duivenvoorde


From julien.cabieces at oslandia.com  Fri Sep 25 01:18:37 2020
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Fri, 25 Sep 2020 10:18:37 +0200
Subject: [QGIS-Developer] PR34358 any Oracle guru reviewers available?
In-Reply-To: <33f06282-03f2-1955-0b70-2e8ce28624f8@duif.net>
References: <33f06282-03f2-1955-0b70-2e8ce28624f8@duif.net>
Message-ID: <87wo0iz2ua.fsf@julien-laptop.home>


Hi,

The PR needs to be rebased as there is some conflicts and I'm pretty sure that the filter request
needs to improved to not decrease performances.

Sebastien (PR author) and I will take a look and try to make it
mergeable in the days (maybe today?) to come. 

Regards,
Julien


> Hi,
>
> Going over current pull requests I see
> https://github.com/qgis/QGIS/pull/34358
> which should fix 
> https://github.com/qgis/QGIS/issues/32521
>
> Any Oracle Guru/Reviewer available to review it (Oslandia?) ?
>
> The 'stale-robot' has been coming several times (and sent away by the author....) :-)
>
> IF it is helpfull I can try to install an oracle Locator DB on my laptop, to see if I can build this PR
> But it it is much easier to test for people who have Oracle db's around and always build QGIS with Oracle support...
> Still a hassle though, I agree. But it looks like a nice fix to me...
>
> Regards,
>
> Richard Duivenvoorde
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From thomas at qgis.de  Sat Sep 26 05:23:30 2020
From: thomas at qgis.de (thomas)
Date: Sat, 26 Sep 2020 14:23:30 +0200
Subject: [QGIS-Developer] numeric values in text edit widget (forms)
In-Reply-To: <CAL5Q673d=LriaWomn-Ew9fmsH9v5P5FRLDWxr8Tes_bSGMX0Wg@mail.gmail.com>
References: <881013405.53044.1600940355494@office.mailbox.org>
 <CAL5Q673d=LriaWomn-Ew9fmsH9v5P5FRLDWxr8Tes_bSGMX0Wg@mail.gmail.com>
Message-ID: <42f3ee21-efa2-1ded-c7b2-3cae2fb87bde@qgis.de>

Hi!

In order to be able to give a proper report I tested again with my tables from scratch and, guess 
what, I was not able to reproduce the strange and inconsistent behavior of the form.

In the end it seems like it is caused (only) by my broken qml/layer style code.

During the long development history of my huge and complex form there was quite a lot of clicking 
and copying style parts back and forth, between layers and possibly across versions of QGIS.... At 
some time it broke without been noticed at first. - I found no way of repairing it, so will have to 
rebuild the form. m(

Sorry for the noise, all the best
Thomas



Am 24.09.20 um 12:08 schrieb Alessandro Pasotti:
> On Thu, Sep 24, 2020 at 12:01 PM Thomas Schüttenberg <thomas at qgis.de> wrote:
>>
>> Hi!
>>
>> I just realized that numeric values (from a PostGIS table) are not displayed by a text edit widget in an attribute form, everything that is instead shown is 0 [zero].
>>
>> I switched from the default range widget to text edit widget, because I just want to show the attributes, read only, and this way it looks nicer to me. (BTW, the min/max values of the randfe widget are quite tremendous, see https://github.com/qgis/QGIS/issues/24725)
>>
>> To me this seems to be a bug and I suspect it to be related to localization (de_DE) issues which are themselves numerous. Therefore I wanted to check if anybody here knows an already existing/open bug report on this, because I did not find something exactly fitting. - Otherwise I will file a new one.
> 
> Please file a new ticket, can you also check if with en_US locale the
> issue is still there?
> 
> 
>>
>> I tested on Windows with QGIS 3.4.12, 3.10.9 and 3.14.1.
>>
>> Cheers
>> Thomas
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> 

From apasotti at gmail.com  Sat Sep 26 06:33:32 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Sat, 26 Sep 2020 15:33:32 +0200
Subject: [QGIS-Developer] numeric values in text edit widget (forms)
In-Reply-To: <42f3ee21-efa2-1ded-c7b2-3cae2fb87bde@qgis.de>
References: <881013405.53044.1600940355494@office.mailbox.org>
 <CAL5Q673d=LriaWomn-Ew9fmsH9v5P5FRLDWxr8Tes_bSGMX0Wg@mail.gmail.com>
 <42f3ee21-efa2-1ded-c7b2-3cae2fb87bde@qgis.de>
Message-ID: <CAL5Q670ots=LtWFX_P9nArPaGaaVEZBOBTgSeikH55y-biz2Kw@mail.gmail.com>

No worries, thanks for the update!

On Sat, Sep 26, 2020, 14:23 thomas <thomas at qgis.de> wrote:

> Hi!
>
> In order to be able to give a proper report I tested again with my tables
> from scratch and, guess
> what, I was not able to reproduce the strange and inconsistent behavior of
> the form.
>
> In the end it seems like it is caused (only) by my broken qml/layer style
> code.
>
> During the long development history of my huge and complex form there was
> quite a lot of clicking
> and copying style parts back and forth, between layers and possibly across
> versions of QGIS.... At
> some time it broke without been noticed at first. - I found no way of
> repairing it, so will have to
> rebuild the form. m(
>
> Sorry for the noise, all the best
> Thomas
>
>
>
> Am 24.09.20 um 12:08 schrieb Alessandro Pasotti:
> > On Thu, Sep 24, 2020 at 12:01 PM Thomas Schüttenberg <thomas at qgis.de>
> wrote:
> >>
> >> Hi!
> >>
> >> I just realized that numeric values (from a PostGIS table) are not
> displayed by a text edit widget in an attribute form, everything that is
> instead shown is 0 [zero].
> >>
> >> I switched from the default range widget to text edit widget, because I
> just want to show the attributes, read only, and this way it looks nicer to
> me. (BTW, the min/max values of the randfe widget are quite tremendous, see
> https://github.com/qgis/QGIS/issues/24725)
> >>
> >> To me this seems to be a bug and I suspect it to be related to
> localization (de_DE) issues which are themselves numerous. Therefore I
> wanted to check if anybody here knows an already existing/open bug report
> on this, because I did not find something exactly fitting. - Otherwise I
> will file a new one.
> >
> > Please file a new ticket, can you also check if with en_US locale the
> > issue is still there?
> >
> >
> >>
> >> I tested on Windows with QGIS 3.4.12, 3.10.9 and 3.14.1.
> >>
> >> Cheers
> >> Thomas
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200926/7302b05e/attachment.html>

From hoettges at fh-aachen.de  Sat Sep 26 08:40:04 2020
From: hoettges at fh-aachen.de (=?UTF-8?B?UHJvZi4gRHIuIErDtnJnIEjDtnR0Z2Vz?=)
Date: Sat, 26 Sep 2020 17:40:04 +0200
Subject: [QGIS-Developer] SpatiaLite: SpatialIndex broken after trigger
Message-ID: <76d6d1cf-3778-d820-1e58-bf6ddb3fcbb1@fh-aachen.de>

Hi,

There is a problem with the SpatialIndex and Triggers in SpatiaLite:

I have defined a trigger, that automaticly creates two geometry objects (geop: point object, geom: circle as multiline 
object), when a new dataset with attribute data is added to a table "schaechte".

After execution of an INSERT command you can see in QGIS the geometry objects only when no Spatial Index is created (see 
code below).

If I activate the CREATESPATIALINDEX command by uncommenting the respective line(s), the objects are not displayed in 
QGIS and the Spatial Index is broken after the insert executed by the trigger
SELECT CheckSpatialIndex('schaechte', 'geom') -->  0.

You can make them visible with:
SELECT RecoverSpatialIndex()

Does anybody know, why the SpatialIndex is broken after the INSERT command?

Here is the SQL-Code to be executed in the database window of QGIS or in SpatiaLiteGUI:

CREATE TABLE schaechte (
     pk INTEGER PRIMARY KEY,
     schnam TEXT,
     xsch REAL,
     ysch REAL,
     sohlhoehe REAL,
     deckelhoehe REAL,
     durchm REAL
);
SELECT AddGeometryColumn('schaechte','geop',25832,'POINT',2);
SELECT AddGeometryColumn('schaechte','geom',25832,'MULTIPOLYGON',2);
-- SELECT CreateSpatialIndex('schaechte', 'geop');-- geop objects are visible
SELECT CreateSpatialIndex('schaechte', 'geom');-- geom objects are not visible
CREATE TRIGGER IF NOT EXISTS create_missing_geoobject_schaechte
            AFTER INSERT ON schaechte FOR EACH ROW
         WHEN
             new.geom IS NULL AND
             new.geop IS NULL
         BEGIN
             UPDATE schaechte SET geop =
                 MakePoint(new.xsch, new.ysch, 25832)
             WHERE schaechte.pk = new.pk;
             UPDATE schaechte SET geom =
CastToMultiPolygon(MakePolygon(MakeCircle(new.xsch, new.ysch,
                     coalesce(new.durchm / 1000, 1), 25832)))
             WHERE schaechte.pk = new.pk;
         END;
INSERT INTO schaechte (schnam, xsch, ysch, sohlhoehe, deckelhoehe) VALUES
('D110036', 388798.830197, 5709945.16474, 79.51, 82.56),
('D110073', 388749.988968, 5709812.89315, 82.77, 85.47),
('D110074', 388709.61619, 5709930.66496, 80.82, 83.49),
('D110075', 388813.978304, 5709854.59264, 81.16, 84.09),
('D110076', 388809.473765, 5709888.00614, 80.49, 83.61);


Regards,

Jörg Höttges


From a.furieri at lqt.it  Sat Sep 26 23:30:52 2020
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Sun, 27 Sep 2020 08:30:52 +0200
Subject: [QGIS-Developer] SpatiaLite: SpatialIndex broken after trigger
In-Reply-To: <76d6d1cf-3778-d820-1e58-bf6ddb3fcbb1@fh-aachen.de>
References: <76d6d1cf-3778-d820-1e58-bf6ddb3fcbb1@fh-aachen.de>
Message-ID: <40888509de9c3fbb1e24bccf2a13746d@lqt.it>

On Sat, 26 Sep 2020 17:40:04 +0200, Prof. Dr. Jörg Höttges wrote:
> Hi,
>
> There is a problem with the SpatialIndex and Triggers in SpatiaLite:
>
> I have defined a trigger, that automaticly creates two geometry
> objects (geop: point object, geom: circle as multiline object), when 
> a
> new dataset with attribute data is added to a table "schaechte".
>
> After execution of an INSERT command you can see in QGIS the geometry
> objects only when no Spatial Index is created (see code below).
>
> If I activate the CREATESPATIALINDEX command by uncommenting the
> respective line(s), the objects are not displayed in QGIS and the
> Spatial Index is broken after the insert executed by the trigger
> SELECT CheckSpatialIndex('schaechte', 'geom') -->  0.
>
> You can make them visible with:
> SELECT RecoverSpatialIndex()
>
> Does anybody know, why the SpatialIndex is broken after the INSERT 
> command?
>
> Here is the SQL-Code to be executed in the database window of QGIS or
> in SpatiaLiteGUI:
>
> ------------------------- <Snip> -----------------------
>

Short reply: you are attempting to push SQLite/SpatiaLite
far beyond their intended limits.

Long reply: on SQLite / SpatiaLite a Spatial Index is not
really an _INDEX_, it's just another independent table of
the very special R*Tree type, and the SQL engine itself
hasn't the sligthtests idea that the two tables are
linked together.

the implementation of Spatial Index on SpatiaLite
critically depends on AFTER INSERT and AFTER UPDATE
Triggers that are responsible for keeping the two
tables in the expected synchonized state.

adding a further AFTER INSERT Trigger that introduces
so heavy manipulation on the Geometry itself simply
causes chaos (I strongly suspect because there is
nothing ensuring that all Triggers will fire in a
logically consistent sequence).

-------------------------------------

a possible workaround for circumventing this issue
could be using the intermediation of a writable view.

--
-- creating the main table
--
CREATE TABLE schaechte (
     pk INTEGER PRIMARY KEY,
     schnam TEXT,
     xsch REAL,
     ysch REAL,
     sohlhoehe REAL,
     deckelhoehe REAL,
     durchm REAL
);

--
-- adding Geometries and Spatial Indices
--
SELECT AddGeometryColumn('schaechte','geop',25832,'POINT',2);
SELECT AddGeometryColumn('schaechte','geom',25832,'MULTIPOLYGON',2);
SELECT CreateSpatialIndex('schaechte', 'geop');
SELECT CreateSpatialIndex('schaechte', 'geom');

--
-- creating the convenience View
--
CREATE VIEW schaechte_vw AS SELECT * FROM schaechte;

--
-- transforming the View into a Writable View
--
CREATE TRIGGER IF NOT EXISTS create_missing_geoobject_schaechte
            INSTEAD OF INSERT ON schaechte_vw FOR EACH ROW
   WHEN
     new.geom IS NULL AND
     new.geop IS NULL
   BEGIN
     INSERT INTO schaechte
       (pk, schnam, xsch, ysch, sohlhoehe, deckelhoehe, durchm, geop, 
geom)
     VALUES (
       new.pk, new.schnam, new.xsch, new.ysch, new.sohlhoehe,
       new.deckelhoehe, new.durchm, MakePoint(new.xsch, new.ysch, 
25832),
       CastToMultiPolygon(MakePolygon(MakeCircle(new.xsch, new.ysch,
         coalesce(new.durchm / 1000, 1), 25832)))
     );
   END;

--
-- populating the convenience View
--
INSERT INTO schaechte_vw (schnam, xsch, ysch, sohlhoehe, deckelhoehe) 
VALUES
('D110036', 388798.830197, 5709945.16474, 79.51, 82.56),
('D110073', 388749.988968, 5709812.89315, 82.77, 85.47),
('D110074', 388709.61619, 5709930.66496, 80.82, 83.49),
('D110075', 388813.978304, 5709854.59264, 81.16, 84.09),
('D110076', 388809.473765, 5709888.00614, 80.49, 83.61);


As you can easily check this time the Spatial Indices
are correctly synchronized as expected.

final remark: the QGIS-devel mailing list seems to be a
very odd place for posting questions about SQLite and
SpatiaLite that obviously have nothing to do with
QGIS itself; I've read your post just by pure chance.
next time please send your posts about SpatiaLite on
the appropriate discussion group:
https://groups.google.com/forum/#!forum/spatialite-users

Best regards,
Sandro Furieri
(creator and maintainer of SpatiaLite)


From msel.mobicom at gmail.com  Mon Sep 28 05:11:11 2020
From: msel.mobicom at gmail.com (M S.)
Date: Mon, 28 Sep 2020 15:11:11 +0300
Subject: [QGIS-Developer] Generate legend and export as Image
Message-ID: <CA+KsEp8pWXf-tyYqDh7R_JB_vDKJX58g+YdgccdD2pTUjS7sWw@mail.gmail.com>

hi all.
i was able to generate a legend when i was using  QGIS 2.18  by
QgsComposerLegend().Then i used to export it with help of QImage().
But now i use QGIS 3.10 and i have to use QgsPrintLayout() and
QgsLayoutItemLegend() to generate legend  and i export it  via
QgsLayoutExporter(). But i have some issue with that:
1. it exceeds or crops legend content.
2. i got below error message when i create more than one object of my class
which has QgsPrintLayout() object : "RuntimeError: wrapped C/C++ object of
type QgsPrintLayout has been deleted"

can you please guide me about this?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200928/9cf2b908/attachment.html>

From apasotti at gmail.com  Mon Sep 28 08:10:56 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 28 Sep 2020 17:10:56 +0200
Subject: [QGIS-Developer] Is the spellcheck too greedy?
Message-ID: <CAL5Q6712kiwSEuh5bDgFMhiPC=Tb4+1ddqtQ-=amd6KCyHwHsQ@mail.gmail.com>

Hi,

I appreciate all the efforts to make and keep our source code clean
and tidy and the spell check has been a great improvement but
sometimes it just steps in your way resulting in a waste of precious
time and an annoying source of frustration.

I think that we should skip the spell check on a  a list of file
formats under the testdata directory:

- xml
- sql
- json
- html

note that these are all under "tests/testdata" and they are not actual
released or source code this means that there will be no consequences
on the quality of our releases.

Is that possible?

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From jef at norbit.de  Mon Sep 28 08:41:08 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Mon, 28 Sep 2020 17:41:08 +0200
Subject: [QGIS-Developer] Is the spellcheck too greedy?
In-Reply-To: <CAL5Q6712kiwSEuh5bDgFMhiPC=Tb4+1ddqtQ-=amd6KCyHwHsQ@mail.gmail.com>
References: <CAL5Q6712kiwSEuh5bDgFMhiPC=Tb4+1ddqtQ-=amd6KCyHwHsQ@mail.gmail.com>
Message-ID: <20200928154108.wmawocwgqf4i4i7d@norbit.de>

Hi Alessandro,

On Mon, 28. Sep 2020 at 17:10:56 +0200, Alessandro Pasotti wrote:
> I think that we should skip the spell check on a  a list of file
> formats under the testdata directory:
> 
> - xml
> - sql
> - json
> - html
> 
> note that these are all under "tests/testdata" and they are not actual
> released or source code this means that there will be no consequences
> on the quality of our releases.

Remember ef1497faaa0dac55b1511c9aa06738c02b24884c ? ;)



Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200928/8727fa9a/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200928/8727fa9a/attachment.ksh>

From apasotti at gmail.com  Mon Sep 28 08:47:43 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 28 Sep 2020 17:47:43 +0200
Subject: [QGIS-Developer] Is the spellcheck too greedy?
In-Reply-To: <20200928154108.wmawocwgqf4i4i7d@norbit.de>
References: <CAL5Q6712kiwSEuh5bDgFMhiPC=Tb4+1ddqtQ-=amd6KCyHwHsQ@mail.gmail.com>
 <20200928154108.wmawocwgqf4i4i7d@norbit.de>
Message-ID: <CAL5Q671nyOmefrr1jfh1Minws49ZP7KW8E140hBGmD=+6A+7xA@mail.gmail.com>

On Mon, Sep 28, 2020 at 5:41 PM Jürgen E. Fischer <jef at norbit.de> wrote:
>
> Hi Alessandro,
>
> On Mon, 28. Sep 2020 at 17:10:56 +0200, Alessandro Pasotti wrote:
> > I think that we should skip the spell check on a  a list of file
> > formats under the testdata directory:
> >
> > - xml
> > - sql
> > - json
> > - html
> >
> > note that these are all under "tests/testdata" and they are not actual
> > released or source code this means that there will be no consequences
> > on the quality of our releases.
>
> Remember ef1497faaa0dac55b1511c9aa06738c02b24884c ? ;)


No, I've been bitten so many times by the spell check (and most of
them for a reason) that I can't remember :)

Anyway that commit does not exclude all SQL files, it actually
excludes all files under the postgres raster testdata folder (which
are all sql files btw).



>
>
>
> Jürgen
>
> --
> Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden            https://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From even.rouault at spatialys.com  Mon Sep 28 13:29:02 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Sep 2020 22:29:02 +0200
Subject: [QGIS-Developer] (QGIS 2020 Grant Report) Use of FileGeodatabase
	spatial index in OpenFileGDB driver
Message-ID: <4958827.ogkld8rfHU@even-i700>

Hi,

I want to report about the outcome of
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/172
"Use of FileGeodatabase spatial index in OpenFileGDB driver"

This work has been successfully completed into GDAL master (for upcoming GDAL 3.2) per 
https://github.com/OSGeo/gdal/pull/2771 , and automatically benefits to QGIS when it uses 
the OpenFileGDB driver.

Some figures on a version from of few years ago of the dataset at
https://data.linz.govt.nz/layer/50772-nz-primary-parcels/, featuring 2 484 646 polygons, 773 
MB:"ogrinfo -spat 174.949909 -41.143842 175.684529 -40.594600 -al -so -noextent" (thus 
counting the number of features intersecting the spatial filter), which returns 81 046 
polygons, nows runs in 400 ms with GDAL 3.2dev and the OpenFileGDB driver, versus 6.7 s 
before (full scan), vs 890 ms with the FileGDB driver (with FileGDB SDK 1.5).
All figures given with debug builds, and on a hot run (so with most pages cached by the OS).

Interactive display of this dataset in QGIS with the OpenFileGDB driver is as fluid as with the 
FileGDB one. Comparing behaviour of OpenFileGDB and FileGDB drivers with strace shows 
that they read a similar amount of data in the .spx file, which confirms it is uses correctly.

The filegdb reverse engineered specification was also updated in
https://github.com/rouault/dump_gdbtable/wiki/FGDB-Spec#specification-of-spx-files

Thanks to qgis.org grant program for making this improvement possible.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200928/1def096f/attachment.html>

From tim at kartoza.com  Mon Sep 28 15:14:51 2020
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 28 Sep 2020 23:14:51 +0100
Subject: [QGIS-Developer] (QGIS 2020 Grant Report) Use of
 FileGeodatabase spatial index in OpenFileGDB driver
In-Reply-To: <4958827.ogkld8rfHU@even-i700>
References: <4958827.ogkld8rfHU@even-i700>
Message-ID: <CAES-DZS=OPW7R0Mx=Dk8LT1VH2WJ1BWBLBuZ-_iQg4L4dof2vg@mail.gmail.com>

Wow, thank you for the update, great work!

@Andreas do you think it would be possible to accummulate the paid bugfix
and grant work in the changelog a week or so before we release?  We want to
try for the first time to have the visual changelog go out at the same time
as the release...

Regards

Tim

On Mon, 28 Sep 2020, 21:29 Even Rouault, <even.rouault at spatialys.com> wrote:

> Hi,
>
>
>
> I want to report about the outcome of
>
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/172
>
> "Use of FileGeodatabase spatial index in OpenFileGDB driver"
>
>
>
> This work has been successfully completed into GDAL master (for upcoming
> GDAL 3.2) per https://github.com/OSGeo/gdal/pull/2771 , and automatically
> benefits to QGIS when it uses the OpenFileGDB driver.
>
>
>
> Some figures on a version from of few years ago of the dataset at
>
> https://data.linz.govt.nz/layer/50772-nz-primary-parcels/, featuring 2
> 484 646 polygons, 773 MB:
> "ogrinfo -spat 174.949909 -41.143842 175.684529 -40.594600 -al -so
> -noextent" (thus counting the number of features intersecting the spatial
> filter), which returns 81 046 polygons, nows runs in 400 ms with GDAL
> 3.2dev and the OpenFileGDB driver, versus 6.7 s before (full scan), vs 890
> ms with the FileGDB driver (with FileGDB SDK 1.5).
>
> All figures given with debug builds, and on a hot run (so with most pages
> cached by the OS).
>
>
>
> Interactive display of this dataset in QGIS with the OpenFileGDB driver is
> as fluid as with the FileGDB one. Comparing behaviour of OpenFileGDB and
> FileGDB drivers with strace shows that they read a similar amount of data
> in the .spx file, which confirms it is uses correctly.
>
>
>
> The filegdb reverse engineered specification was also updated in
>
>
> https://github.com/rouault/dump_gdbtable/wiki/FGDB-Spec#specification-of-spx-files
>
>
>
> Thanks to qgis.org grant program for making this improvement possible.
>
>
>
> Best regards,
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200928/ac79ce5d/attachment.html>

From senhor.neto at gmail.com  Mon Sep 28 17:27:17 2020
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 29 Sep 2020 01:27:17 +0100
Subject: [QGIS-Developer] Is the spellcheck too greedy?
In-Reply-To: <CAL5Q671nyOmefrr1jfh1Minws49ZP7KW8E140hBGmD=+6A+7xA@mail.gmail.com>
References: <CAL5Q6712kiwSEuh5bDgFMhiPC=Tb4+1ddqtQ-=amd6KCyHwHsQ@mail.gmail.com>
 <20200928154108.wmawocwgqf4i4i7d@norbit.de>
 <CAL5Q671nyOmefrr1jfh1Minws49ZP7KW8E140hBGmD=+6A+7xA@mail.gmail.com>
Message-ID: <CA+H0G_FY6vacZXyHxWZJxunH3NfDgobEK5N=mySrhVXhy+MX-g@mail.gmail.com>

Hi Alessandro,

FYI, there's some json files that provide expressions functions help.
Therefore, if a white list is created, those should not be included.

Cheers,
Alexandre Neto

A segunda, 28/09/2020, 16:48, Alessandro Pasotti <apasotti at gmail.com>
escreveu:

> On Mon, Sep 28, 2020 at 5:41 PM Jürgen E. Fischer <jef at norbit.de> wrote:
> >
> > Hi Alessandro,
> >
> > On Mon, 28. Sep 2020 at 17:10:56 +0200, Alessandro Pasotti wrote:
> > > I think that we should skip the spell check on a  a list of file
> > > formats under the testdata directory:
> > >
> > > - xml
> > > - sql
> > > - json
> > > - html
> > >
> > > note that these are all under "tests/testdata" and they are not actual
> > > released or source code this means that there will be no consequences
> > > on the quality of our releases.
> >
> > Remember ef1497faaa0dac55b1511c9aa06738c02b24884c ? ;)
>
>
> No, I've been bitten so many times by the spell check (and most of
> them for a reason) that I can't remember :)
>
> Anyway that commit does not exclude all SQL files, it actually
> excludes all files under the postgres raster testdata folder (which
> are all sql files btw).
>
>
>
> >
> >
> >
> > Jürgen
> >
> > --
> > Jürgen E. Fischer           norBIT GmbH             Tel.
> +49-4931-918175-31
> > Dipl.-Inf. (FH)             Rheinstraße 13          Fax.
> +49-4931-918175-50
> > Software Engineer           D-26506 Norden
> https://www.norbit.de
> > QGIS release manager (PSC)  Germany                    IRC: jef on
> FreeNode
>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/0c54ee54/attachment.html>

From matthias at opengis.ch  Mon Sep 28 23:58:15 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 29 Sep 2020 08:58:15 +0200
Subject: [QGIS-Developer] (QGIS 2020 Grant Report) Use of
 FileGeodatabase spatial index in OpenFileGDB driver
In-Reply-To: <4958827.ogkld8rfHU@even-i700>
References: <4958827.ogkld8rfHU@even-i700>
Message-ID: <CAC7zN96tHxYni9E2pWqHC-oDVe9ep4O5=nW=ttzbHxraNtr75Q@mail.gmail.com>

Impressive numbers.
Thanks for the work, Even!

Matthias

On Mon, Sep 28, 2020 at 10:29 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
>
>
> I want to report about the outcome of
>
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/172
>
> "Use of FileGeodatabase spatial index in OpenFileGDB driver"
>
>
>
> This work has been successfully completed into GDAL master (for upcoming
> GDAL 3.2) per https://github.com/OSGeo/gdal/pull/2771 , and automatically
> benefits to QGIS when it uses the OpenFileGDB driver.
>
>
>
> Some figures on a version from of few years ago of the dataset at
>
> https://data.linz.govt.nz/layer/50772-nz-primary-parcels/, featuring 2
> 484 646 polygons, 773 MB:
> "ogrinfo -spat 174.949909 -41.143842 175.684529 -40.594600 -al -so
> -noextent" (thus counting the number of features intersecting the spatial
> filter), which returns 81 046 polygons, nows runs in 400 ms with GDAL
> 3.2dev and the OpenFileGDB driver, versus 6.7 s before (full scan), vs 890
> ms with the FileGDB driver (with FileGDB SDK 1.5).
>
> All figures given with debug builds, and on a hot run (so with most pages
> cached by the OS).
>
>
>
> Interactive display of this dataset in QGIS with the OpenFileGDB driver is
> as fluid as with the FileGDB one. Comparing behaviour of OpenFileGDB and
> FileGDB drivers with strace shows that they read a similar amount of data
> in the .spx file, which confirms it is uses correctly.
>
>
>
> The filegdb reverse engineered specification was also updated in
>
>
> https://github.com/rouault/dump_gdbtable/wiki/FGDB-Spec#specification-of-spx-files
>
>
>
> Thanks to qgis.org grant program for making this improvement possible.
>
>
>
> Best regards,
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/1d843a69/attachment-0001.html>

From apasotti at gmail.com  Tue Sep 29 00:14:31 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Sep 2020 09:14:31 +0200
Subject: [QGIS-Developer] (QGIS 2020 Grant Report) Port DB Manager Table
 Management Functionalities to Browser (part 2)
Message-ID: <CAL5Q6726y5gGY5XcmXbABS2maHPZtjoSB0HUfXxtu6L3Fwk-EA@mail.gmail.com>

Hi,

this is the final report about the implementation of the QEP
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/171

The QGIS browser now exposes a new "Fields" item for vector layers
that can be expanded to show the underlying fields, an icon identifies
the base field type.

A context menu is available at the fields root level and allows you to
create a new field.
A context menu is available at the individual fields level and allows
you to delete the selected field.

At the connection level a new context menu item is available and
allows you to create a new table for all DB connections that support
the Connections API:
- PG
- Spatialite
- GPKG
- MSSQL

All the new functions are implemented using the new connections API
and exposed to Python for plugins/scripts.

There have been many other small improvements in the API and in the
browser as part of this work such as homogenization of the
error/warning/success reporting (now using the message bar if
available and falling back to a dialog if it is not available) and new
context menu entries.

The following functions are now available in the browser tree using a
common abstraction API:

- create a new schema
- delete a schema
- rename a schema
- create a new table/layer
- rename table/layer
- delete a table/layer
- truncate a table/layer
- refresh a materialized view
- list fields for a table/view
- add a new field
- delete a field

Thank you to the QGIS project and to all QGIS sponsors and donors that
made this possible, a special thank goes to Nyall Dawson who helped in
the design of the API and reviewed the code.

Kind regards.

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Tue Sep 29 01:54:10 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 29 Sep 2020 10:54:10 +0200
Subject: [QGIS-Developer] QGIS-server WMTS non 3857 Tilematrix France/NL/IGN
Message-ID: <7fa07310-d785-0e92-ef50-8c85fc5e3643@duif.net>

Hi Devs/Users,

(sorry for crossposting)

We were trying to setup QGIS-server as a WMTS server with a Tilematrix different from the generic EPSG:3857/Popular Mercator one.

In The Netherlands we have a custom tile schema, and while I'm able to setup such a WMTS, it looks like there is a shift in the data in my setup:
https://github.com/qgis/QGIS/issues/39040

As I am not sure if this is a data or configuration issue from my side, I thought to double check with another TileSchema, and found the french one: EPSG:2154 here:

https://geoservices.ign.fr/documentation/geoservices/wmts.html

Q: Any french who is using this schema with QGIS server WMTS and NOT seeing the shift?

Q: Any french who knows what the upper left corner is of the "Résolutions et échelles en Lambert 93 (EPSG:2154)" schema? Then I can try to setup this myself and see if it also has a shift.

Thanks for any pointers (preferably English as my french is very very rusty  :-)  ).

Regards,

Richard Duivenvoorde

From apasotti at gmail.com  Tue Sep 29 02:55:40 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Sep 2020 11:55:40 +0200
Subject: [QGIS-Developer] cppcheck false positive
Message-ID: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>

Looks like cppcheck is not smart enough...

const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };

https://github.com/qgis/QGIS/pull/39079/checks?check_run_id=1181360827#step:4:1693

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From even.rouault at spatialys.com  Tue Sep 29 03:11:33 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Sep 2020 12:11:33 +0200
Subject: [QGIS-Developer] cppcheck false positive
In-Reply-To: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
References: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
Message-ID: <35602562.zW023Mxjyd@even-i700>

On mardi 29 septembre 2020 11:55:40 CEST Alessandro Pasotti wrote:
> Looks like cppcheck is not smart enough...

Yeah, it hardly understands C++ (it doesn't need to be able to fully compile a file to analyze it, 
if I remember correctly)

> 
> const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };

I noticed this too. It is easily confused by curly initializer list, when used in a method body. It 
might also have sometimes issues with lambdas and variable scope.

> const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };

Using ( ) or = should fix it

const double factor (std::pow( 10, - mPrecisionSpinBox->value() ));
const double factor = std::pow( 10, - mPrecisionSpinBox->value() );

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/1db0861d/attachment.html>

From apasotti at gmail.com  Tue Sep 29 03:15:41 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Sep 2020 12:15:41 +0200
Subject: [QGIS-Developer] cppcheck false positive
In-Reply-To: <35602562.zW023Mxjyd@even-i700>
References: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
 <35602562.zW023Mxjyd@even-i700>
Message-ID: <CAL5Q6739JKUmJg6-Ar-7YMZgiODAB=cM4N64n8TFWLaGRz1d8g@mail.gmail.com>

Hi Even,

Thank you, I knew how to fix it but I was wondering if it is possible
to reduce the false positives (see my other thread about spellchek on
testdata), life is too short to be wasted in fighting with a dumb
software :)
Maybe a more recent version of cppcheck does nor have this issue?


On Tue, Sep 29, 2020 at 12:11 PM Even Rouault
<even.rouault at spatialys.com> wrote:
>
> On mardi 29 septembre 2020 11:55:40 CEST Alessandro Pasotti wrote:
>
> > Looks like cppcheck is not smart enough...
>
>
>
> Yeah, it hardly understands C++ (it doesn't need to be able to fully compile a file to analyze it, if I remember correctly)
>
>
>
> >
>
> > const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };
>
>
>
> I noticed this too. It is easily confused by curly initializer list, when used in a method body. It might also have sometimes issues with lambdas and variable scope.
>
>
>
> > const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };
>
>
>
> Using ( ) or = should fix it
>
>
>
> const double factor (std::pow( 10, - mPrecisionSpinBox->value() ));
>
> const double factor = std::pow( 10, - mPrecisionSpinBox->value() );
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From even.rouault at spatialys.com  Tue Sep 29 03:30:30 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Sep 2020 12:30:30 +0200
Subject: [QGIS-Developer] cppcheck false positive
In-Reply-To: <CAL5Q6739JKUmJg6-Ar-7YMZgiODAB=cM4N64n8TFWLaGRz1d8g@mail.gmail.com>
References: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
 <35602562.zW023Mxjyd@even-i700>
 <CAL5Q6739JKUmJg6-Ar-7YMZgiODAB=cM4N64n8TFWLaGRz1d8g@mail.gmail.com>
Message-ID: <4464732.K3cnmD1Y3I@even-i700>

On mardi 29 septembre 2020 12:15:41 CEST Alessandro Pasotti wrote:
> Hi Even,
> 
> Thank you, I knew how to fix it but I was wondering if it is possible
> to reduce the false positives (see my other thread about spellchek on
> testdata), life is too short to be wasted in fighting with a dumb
> software :)
> Maybe a more recent version of cppcheck does nor have this issue?

I'm afraid not. my latest attempts with recent cppcheck HEAD lead to number of  new false 
positives on GDAL that weren't reported before.
The cppcheck version of ubuntu18.04 is not so bad actually.

When things go bad you can add a suppression

// cppcheck-suppress {name_of_cppcheck_diagnostic}

Or we can disable a category in scripts/cppcheck.sh if it is too unreliable

Even

> 
> 
> On Tue, Sep 29, 2020 at 12:11 PM Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > On mardi 29 septembre 2020 11:55:40 CEST Alessandro Pasotti wrote:
> > > Looks like cppcheck is not smart enough...
> > 
> > Yeah, it hardly understands C++ (it doesn't need to be able to fully
> > compile a file to analyze it, if I remember correctly)> 
> > > const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };
> > 
> > I noticed this too. It is easily confused by curly initializer list, when
> > used in a method body. It might also have sometimes issues with lambdas
> > and variable scope.> 
> > > const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };
> > 
> > Using ( ) or = should fix it
> > 
> > 
> > 
> > const double factor (std::pow( 10, - mPrecisionSpinBox->value() ));
> > 
> > const double factor = std::pow( 10, - mPrecisionSpinBox->value() );
> > 
> > 
> > 
> > Even
> > 
> > 
> > 
> > --
> > 
> > Spatialys - Geospatial professional services
> > 
> > http://www.spatialys.com


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/1f14a550/attachment-0001.html>

From denis.rouzaud at gmail.com  Tue Sep 29 03:56:56 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Tue, 29 Sep 2020 12:56:56 +0200
Subject: [QGIS-Developer] cppcheck false positive
In-Reply-To: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
References: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
Message-ID: <CAMtsY+bFGqC8YPKzQvTYj3codMjQQ5EArGLEErXU+=X8jdnQNg@mail.gmail.com>

Side question, is there a technical reason to prefer this syntax over the =
one?

The = is more readable to me, but that's a matter of experience I guess.
More generally, it would be nice to decide for one syntax and have a
coherence over the source code.

Cheers,
Denis

Le mar. 29 sept. 2020 à 11:55, Alessandro Pasotti <apasotti at gmail.com> a
écrit :

> Looks like cppcheck is not smart enough...
>
> const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };
>
>
> https://github.com/qgis/QGIS/pull/39079/checks?check_run_id=1181360827#step:4:1693
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/74f7215e/attachment.html>

From apasotti at gmail.com  Tue Sep 29 04:07:26 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Sep 2020 13:07:26 +0200
Subject: [QGIS-Developer] cppcheck false positive
In-Reply-To: <CAMtsY+bFGqC8YPKzQvTYj3codMjQQ5EArGLEErXU+=X8jdnQNg@mail.gmail.com>
References: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
 <CAMtsY+bFGqC8YPKzQvTYj3codMjQQ5EArGLEErXU+=X8jdnQNg@mail.gmail.com>
Message-ID: <CAL5Q6711mwmJ3Z7N5oJSNW34B1ST7NgfyTmNikXsRBYB3be+-w@mail.gmail.com>

On Tue, Sep 29, 2020 at 12:57 PM Denis Rouzaud <denis.rouzaud at gmail.com> wrote:
>
> Side question, is there a technical reason to prefer this syntax over the = one?
>
> The = is more readable to me, but that's a matter of experience I guess.
> More generally, it would be nice to decide for one syntax and have a coherence over the source code.
>
> Cheers,
> Denis
>

Hi Denis,

I agree about the need for coherence, we currently have a mix of = ()
and {} initialization.

I'm not such an expert to tell you which is the best, but I've found
this explanations quite convincing:

https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#es23-prefer-the--initializer-syntax
https://stackoverflow.com/questions/18222926/why-is-list-initialization-using-curly-braces-better-than-the-alternatives

That is the reason why I switched to {} as my preferred method.

Cheers

> Le mar. 29 sept. 2020 à 11:55, Alessandro Pasotti <apasotti at gmail.com> a écrit :
>>
>> Looks like cppcheck is not smart enough...
>>
>> const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };
>>
>> https://github.com/qgis/QGIS/pull/39079/checks?check_run_id=1181360827#step:4:1693
>>
>> --
>> Alessandro Pasotti
>> QCooperative:  www.qcooperative.net
>> ItOpen:   www.itopen.it
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Tue Sep 29 05:05:02 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 29 Sep 2020 14:05:02 +0200
Subject: [QGIS-Developer] PyQt QtXmlPatters and QXmlQuery ?
Message-ID: <1865747e-1776-d59a-3d37-5ada1e92b493@duif.net>

Hi,

Trying to port a plugin here from py2 to py3 the devs have used:

from PyQt4.QtXmlPatterns import QXmlQuery
then use:
QXmlQuery(QXmlQuery.XSLT20)

but.. in QGIS3 we tried to get rid of Qt-version dependency, so we encourage to use
from qgis.PyQt.QtCore import xxxx
etc

but (looking into my installs and trying in the python console

from qgis.PyQt.QtXmlPatterns import QXmlQuery
returns me a 
ModuleNotFoundError: No module named 'qgis.PyQt.QtXmlPatterns'

BUT: if I do 

from PyQt5.QtXmlPatterns import QXmlQuery
the class is successfully loaded

Should/Can I include QtXmlPatterns.py here:

https://github.com/qgis/QGIS/tree/master/python/PyQt/PyQt5

without issues? Or am I creating a new dependency then?

Regards,

Richard Duivenvoorde

From apasotti at gmail.com  Tue Sep 29 05:16:11 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Sep 2020 14:16:11 +0200
Subject: [QGIS-Developer] PyQt QtXmlPatters and QXmlQuery ?
In-Reply-To: <1865747e-1776-d59a-3d37-5ada1e92b493@duif.net>
References: <1865747e-1776-d59a-3d37-5ada1e92b493@duif.net>
Message-ID: <CAL5Q672-GLv+Nbdf6aNh-ghSGC_KN8DzamXChfGSsbsxjFdCcQ@mail.gmail.com>

On Tue, Sep 29, 2020 at 2:05 PM Richard Duivenvoorde
<rdmailings at duif.net> wrote:
>
> Hi,
>
> Trying to port a plugin here from py2 to py3 the devs have used:
>
> from PyQt4.QtXmlPatterns import QXmlQuery
> then use:
> QXmlQuery(QXmlQuery.XSLT20)
>
> but.. in QGIS3 we tried to get rid of Qt-version dependency, so we encourage to use
> from qgis.PyQt.QtCore import xxxx
> etc
>
> but (looking into my installs and trying in the python console
>
> from qgis.PyQt.QtXmlPatterns import QXmlQuery
> returns me a
> ModuleNotFoundError: No module named 'qgis.PyQt.QtXmlPatterns'
>
> BUT: if I do
>
> from PyQt5.QtXmlPatterns import QXmlQuery
> the class is successfully loaded
>
> Should/Can I include QtXmlPatterns.py here:
>
> https://github.com/qgis/QGIS/tree/master/python/PyQt/PyQt5
>
> without issues? Or am I creating a new dependency then?
>

Hi Richard,

from what I can see here the module has been deprecated since QT 5.13:
https://doc.qt.io/qt-5/qtxmlpatterns-index.html


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Tue Sep 29 05:30:16 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 29 Sep 2020 14:30:16 +0200
Subject: [QGIS-Developer] PyQt QtXmlPatters and QXmlQuery ?
In-Reply-To: <CAL5Q672-GLv+Nbdf6aNh-ghSGC_KN8DzamXChfGSsbsxjFdCcQ@mail.gmail.com>
References: <1865747e-1776-d59a-3d37-5ada1e92b493@duif.net>
 <CAL5Q672-GLv+Nbdf6aNh-ghSGC_KN8DzamXChfGSsbsxjFdCcQ@mail.gmail.com>
Message-ID: <1f675d9b-1521-e8a1-7376-0c190a10028e@duif.net>

On 9/29/20 2:16 PM, Alessandro Pasotti wrote:

> from what I can see here the module has been deprecated since QT 5.13:
> https://doc.qt.io/qt-5/qtxmlpatterns-index.html

Mmm, bummer...  but...

https://forum.qt.io/topic/104748/qt-xml-patterns-deprecated-since-qt-5-13-how-to-port-away-from-it/7

https://forum.qt.io/topic/102834/proper-successor-for-qxmlschemavalidator/6

it will be around for some time, at least in Qt5?

If I read correctly, the alternative would be to use some external class (in my case to pull xml through a xsl from qt resources to show an error ...)

Regards,

Richard




From matthias at opengis.ch  Tue Sep 29 08:54:36 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 29 Sep 2020 17:54:36 +0200
Subject: [QGIS-Developer] cppcheck false positive
In-Reply-To: <CAL5Q6711mwmJ3Z7N5oJSNW34B1ST7NgfyTmNikXsRBYB3be+-w@mail.gmail.com>
References: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
 <CAMtsY+bFGqC8YPKzQvTYj3codMjQQ5EArGLEErXU+=X8jdnQNg@mail.gmail.com>
 <CAL5Q6711mwmJ3Z7N5oJSNW34B1ST7NgfyTmNikXsRBYB3be+-w@mail.gmail.com>
Message-ID: <CAC7zN96X-DRnAKgL+g4mifsvxRq9e4Jtu5pUFzpMNCqagX5t_g@mail.gmail.com>

On Tue, Sep 29, 2020 at 1:07 PM Alessandro Pasotti <apasotti at gmail.com>
wrote:

> On Tue, Sep 29, 2020 at 12:57 PM Denis Rouzaud <denis.rouzaud at gmail.com>
> wrote:
> >
> > Side question, is there a technical reason to prefer this syntax over
> the = one?
> >
> > The = is more readable to me, but that's a matter of experience I guess.
> > More generally, it would be nice to decide for one syntax and have a
> coherence over the source code.
> >
> > Cheers,
> > Denis
> >
>
> Hi Denis,
>
> I agree about the need for coherence, we currently have a mix of = ()
> and {} initialization.
>
> I'm not such an expert to tell you which is the best, but I've found
> this explanations quite convincing:
>
>
> https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#es23-prefer-the--initializer-syntax
>
> https://stackoverflow.com/questions/18222926/why-is-list-initialization-using-curly-braces-better-than-the-alternatives
>
> That is the reason why I switched to {} as my preferred method.
>
> Cheers
>
> > Le mar. 29 sept. 2020 à 11:55, Alessandro Pasotti <apasotti at gmail.com>
> a écrit :
> >>
> >> Looks like cppcheck is not smart enough...
> >>
> >> const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };
> >>
> >>
> https://github.com/qgis/QGIS/pull/39079/checks?check_run_id=1181360827#step:4:1693
> >>
> >> --
> >> Alessandro Pasotti
> >> QCooperative:  www.qcooperative.net
> >> ItOpen:   www.itopen.it
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> There are certainly some advantages of {} (guessing since it wouldn't have
been added to the standard otherwise).

However... We have been bitten by incompatibilities (compiler and/or c++
version) more than once. And the more I read about it, the more I am
convinced that proper and conscious usage is not a simple task. See also
the controversial discussion in the stackoverflow link Alessandro posted.
So far it has failed to convince me as an adequate mitigation for the
problems it tries to solve.

Matthias
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/61e20e50/attachment-0001.html>

From apasotti at gmail.com  Tue Sep 29 09:15:07 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Sep 2020 18:15:07 +0200
Subject: [QGIS-Developer] cppcheck false positive
In-Reply-To: <CAC7zN96X-DRnAKgL+g4mifsvxRq9e4Jtu5pUFzpMNCqagX5t_g@mail.gmail.com>
References: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
 <CAMtsY+bFGqC8YPKzQvTYj3codMjQQ5EArGLEErXU+=X8jdnQNg@mail.gmail.com>
 <CAL5Q6711mwmJ3Z7N5oJSNW34B1ST7NgfyTmNikXsRBYB3be+-w@mail.gmail.com>
 <CAC7zN96X-DRnAKgL+g4mifsvxRq9e4Jtu5pUFzpMNCqagX5t_g@mail.gmail.com>
Message-ID: <CAL5Q673rNoG7PaCGhPUM1VV=n8jPXUvaqkHfak+T-64bc1H=uw@mail.gmail.com>

On Tue, Sep 29, 2020 at 5:54 PM Matthias Kuhn <matthias at opengis.ch> wrote:
>
>
> On Tue, Sep 29, 2020 at 1:07 PM Alessandro Pasotti <apasotti at gmail.com> wrote:
>>
>> On Tue, Sep 29, 2020 at 12:57 PM Denis Rouzaud <denis.rouzaud at gmail.com> wrote:
>> >
>> > Side question, is there a technical reason to prefer this syntax over the = one?
>> >
>> > The = is more readable to me, but that's a matter of experience I guess.
>> > More generally, it would be nice to decide for one syntax and have a coherence over the source code.
>> >
>> > Cheers,
>> > Denis
>> >
>>
>> Hi Denis,
>>
>> I agree about the need for coherence, we currently have a mix of = ()
>> and {} initialization.
>>
>> I'm not such an expert to tell you which is the best, but I've found
>> this explanations quite convincing:
>>
>> https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#es23-prefer-the--initializer-syntax
>> https://stackoverflow.com/questions/18222926/why-is-list-initialization-using-curly-braces-better-than-the-alternatives
>>
>> That is the reason why I switched to {} as my preferred method.
>>
>> Cheers
>>
>> > Le mar. 29 sept. 2020 à 11:55, Alessandro Pasotti <apasotti at gmail.com> a écrit :
>> >>
>> >> Looks like cppcheck is not smart enough...
>> >>
>> >> const double factor { std::pow( 10, - mPrecisionSpinBox->value() ) };
>> >>
>> >> https://github.com/qgis/QGIS/pull/39079/checks?check_run_id=1181360827#step:4:1693
>> >>
>> >> --
>> >> Alessandro Pasotti
>> >> QCooperative:  www.qcooperative.net
>> >> ItOpen:   www.itopen.it
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
> There are certainly some advantages of {} (guessing since it wouldn't have been added to the standard otherwise).
>
> However... We have been bitten by incompatibilities (compiler and/or c++ version) more than once. And the more I read about it, the more I am convinced that proper and conscious usage is not a simple task. See also the controversial discussion in the stackoverflow link Alessandro posted.
> So far it has failed to convince me as an adequate mitigation for the problems it tries to solve.
>
> Matthias
>

Hi Matthias,

I agree with you, I hope the compilers will catch up sooner or later,
but I must also say that especially when working on the providers or
other "low" level parts of the code I appreciated the fact that
narrowcasting is prohibited with brace initializers and it made my
code a little more robust and type safe.

OTOH when working with templates and list initializers (like the json
library) things can go south pretty fast.

Anyway, the sad truth is that C++ initialization totally sucks, this
is an interesting reading about that:
http://mikelui.io/2019/01/03/seriously-bonkers.html

Cheers

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From matthias at opengis.ch  Tue Sep 29 09:47:31 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 29 Sep 2020 18:47:31 +0200
Subject: [QGIS-Developer] cppcheck false positive
In-Reply-To: <CAL5Q673rNoG7PaCGhPUM1VV=n8jPXUvaqkHfak+T-64bc1H=uw@mail.gmail.com>
References: <CAL5Q673Ew9cNApUhWyjZeJEXKB-a6x08ZhLO5FpjezD54cg2kQ@mail.gmail.com>
 <CAMtsY+bFGqC8YPKzQvTYj3codMjQQ5EArGLEErXU+=X8jdnQNg@mail.gmail.com>
 <CAL5Q6711mwmJ3Z7N5oJSNW34B1ST7NgfyTmNikXsRBYB3be+-w@mail.gmail.com>
 <CAC7zN96X-DRnAKgL+g4mifsvxRq9e4Jtu5pUFzpMNCqagX5t_g@mail.gmail.com>
 <CAL5Q673rNoG7PaCGhPUM1VV=n8jPXUvaqkHfak+T-64bc1H=uw@mail.gmail.com>
Message-ID: <CAC7zN95OHrR5weARpho_0=EDoVpPQ4_i6sSe_JNUndHChNqErQ@mail.gmail.com>

On Tue, Sep 29, 2020 at 6:15 PM Alessandro Pasotti <apasotti at gmail.com>
wrote:

>
>
> Hi Matthias,
>
> I agree with you, I hope the compilers will catch up sooner or later,
>
but I must also say that especially when working on the providers or
> other "low" level parts of the code I appreciated the fact that
> narrowcasting is prohibited with brace initializers and it made my
> code a little more robust and type safe.
>

Maybe it made it more safe.
Maybe it will suddenly start to behave differently with a different
compiler. Or a new constructor in a library that is being used.

Cheers
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/b64b1e12/attachment.html>

From a.neumann at carto.net  Tue Sep 29 09:48:11 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 29 Sep 2020 18:48:11 +0200
Subject: [QGIS-Developer] Make QGIS-Server more modular and specialized?
Message-ID: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>

Dear QGIS (Server) devs, 

I wonder if it would be possible to make QGIS server more "modular" in a
future version? I mean that at compile time you could decide which
services should be enabled and which not? Example: if you are only
interested in WMS, could you switch off all the other services? 

Another usage scenario: a larger installation of QGIS server might want
to separate server instances for WMS, WFS or other services and assign
different resources to it. 

Also, would it be possible to make QGIS Server a bit
leaner/smaller/faster that way - or is the stuff the makes QGIS Server
"fat" mainly the qt dependencies? 

Thanks for the discussion, 

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/81ac9a94/attachment.html>

From a.neumann at carto.net  Tue Sep 29 10:02:32 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 29 Sep 2020 19:02:32 +0200
Subject: [QGIS-Developer] Make QGIS-Server more modular and specialized?
In-Reply-To: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>
References: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>
Message-ID: <5a282dbcfcb92819d15b67e171a13766@carto.net>

Another scenario would be to have a specialized server only for GetPrint
requests. Those are often quite resource intensive (because of higher
dpi requests) and it would make sense, at a larger  installation - to
have dedicated instances for GetPrint only. 

Andreas 

On 2020-09-29 18:48, Andreas Neumann wrote:

> Dear QGIS (Server) devs, 
> 
> I wonder if it would be possible to make QGIS server more "modular" in a future version? I mean that at compile time you could decide which services should be enabled and which not? Example: if you are only interested in WMS, could you switch off all the other services? 
> 
> Another usage scenario: a larger installation of QGIS server might want to separate server instances for WMS, WFS or other services and assign different resources to it. 
> 
> Also, would it be possible to make QGIS Server a bit leaner/smaller/faster that way - or is the stuff the makes QGIS Server "fat" mainly the qt dependencies? 
> 
> Thanks for the discussion, 
> 
> Andreas 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/63d55f71/attachment.html>

From apasotti at gmail.com  Tue Sep 29 10:17:19 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Sep 2020 19:17:19 +0200
Subject: [QGIS-Developer] Make QGIS-Server more modular and specialized?
In-Reply-To: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>
References: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>
Message-ID: <CAL5Q670nPO2y5xTojd4bwL817+DTT+cFXSuQH9EiQ1DRP82ZGg@mail.gmail.com>

On Tue, Sep 29, 2020 at 6:48 PM Andreas Neumann <a.neumann at carto.net> wrote:
>
> Dear QGIS (Server) devs,
>
> I wonder if it would be possible to make QGIS server more "modular" in a future version? I mean that at compile time you could decide which services should be enabled and which not? Example: if you are only interested in WMS, could you switch off all the other services?

Hi Andreas,

It is already possible, at the service level, we now have separate
packages for the different services so you can actually install only
what you want.

See: https://github.com/qgis/QGIS/pull/37682

But I doubt that you will gain any speed: the part of the code that
decides what service is invoked is really fast compared to the rest of
the processing.

Another simple thing I was thinking about is to have a service
"badlist" or a "goodlist" where we list in an environment variable the
services that we want to be loaded (or not loaded)

Cheers


>
> Another usage scenario: a larger installation of QGIS server might want to separate server instances for WMS, WFS or other services and assign different resources to it.
>
> Also, would it be possible to make QGIS Server a bit leaner/smaller/faster that way - or is the stuff the makes QGIS Server "fat" mainly the qt dependencies?
>
> Thanks for the discussion,
>
> Andreas
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From apasotti at gmail.com  Tue Sep 29 10:20:01 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Sep 2020 19:20:01 +0200
Subject: [QGIS-Developer] Make QGIS-Server more modular and specialized?
In-Reply-To: <5a282dbcfcb92819d15b67e171a13766@carto.net>
References: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>
 <5a282dbcfcb92819d15b67e171a13766@carto.net>
Message-ID: <CAL5Q67312wstRGvO8cKkNF8pgAcSEwv6D=XBW_rs4LkhXx8vRw@mail.gmail.com>

On Tue, Sep 29, 2020 at 7:02 PM Andreas Neumann <a.neumann at carto.net> wrote:
>
> Another scenario would be to have a specialized server only for GetPrint requests. Those are often quite resource intensive (because of higher dpi requests) and it would make sense, at a larger  installation - to have dedicated instances for GetPrint only.

This is a different story, because GetPrint is not a service by itself
but is part of a WMS request.

I don't think we want to have that granularity, but in case you need
it, a simple filter Python plugin is perfectly capable of
denying/allowing a request based on the incoming URL.

Cheers

>
> Andreas
>
> On 2020-09-29 18:48, Andreas Neumann wrote:
>
> Dear QGIS (Server) devs,
>
> I wonder if it would be possible to make QGIS server more "modular" in a future version? I mean that at compile time you could decide which services should be enabled and which not? Example: if you are only interested in WMS, could you switch off all the other services?
>
> Another usage scenario: a larger installation of QGIS server might want to separate server instances for WMS, WFS or other services and assign different resources to it.
>
> Also, would it be possible to make QGIS Server a bit leaner/smaller/faster that way - or is the stuff the makes QGIS Server "fat" mainly the qt dependencies?
>
> Thanks for the discussion,
>
> Andreas
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From matthias at opengis.ch  Tue Sep 29 10:35:44 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 29 Sep 2020 19:35:44 +0200
Subject: [QGIS-Developer] Make QGIS-Server more modular and specialized?
In-Reply-To: <CAL5Q67312wstRGvO8cKkNF8pgAcSEwv6D=XBW_rs4LkhXx8vRw@mail.gmail.com>
References: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>
 <5a282dbcfcb92819d15b67e171a13766@carto.net>
 <CAL5Q67312wstRGvO8cKkNF8pgAcSEwv6D=XBW_rs4LkhXx8vRw@mail.gmail.com>
Message-ID: <CAC7zN94_0Kzifom9UybpCc9oWXOwc2jQ2hPaAFr3zfOHvz0=4w@mail.gmail.com>

On Tue, Sep 29, 2020 at 7:20 PM Alessandro Pasotti <apasotti at gmail.com>
wrote:

> On Tue, Sep 29, 2020 at 7:02 PM Andreas Neumann <a.neumann at carto.net>
> wrote:
> >
> > Another scenario would be to have a specialized server only for GetPrint
> requests. Those are often quite resource intensive (because of higher dpi
> requests) and it would make sense, at a larger  installation - to have
> dedicated instances for GetPrint only.
>
> This is a different story, because GetPrint is not a service by itself
> but is part of a WMS request.
>
> I don't think we want to have that granularity, but in case you need
> it, a simple filter Python plugin is perfectly capable of
> denying/allowing a request based on the incoming URL.
>

to add to what Alessandro proposed, for a case like this you could also
consider a reverse proxy to delegate this to a dedicated print server so if
intense printing is going on, other servers still have resources for
regular map requests.

Matthias
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/21ddb514/attachment.html>

From tim at kartoza.com  Tue Sep 29 12:01:44 2020
From: tim at kartoza.com (Tim Sutton)
Date: Tue, 29 Sep 2020 20:01:44 +0100
Subject: [QGIS-Developer] (QGIS 2020 Grant Report) Port DB Manager Table
 Management Functionalities to Browser (part 2)
In-Reply-To: <CAL5Q6726y5gGY5XcmXbABS2maHPZtjoSB0HUfXxtu6L3Fwk-EA@mail.gmail.com>
References: <CAL5Q6726y5gGY5XcmXbABS2maHPZtjoSB0HUfXxtu6L3Fwk-EA@mail.gmail.com>
Message-ID: <CAES-DZS7zecpau6vg5gg3VMSoLo7nrTqu8nmwmaP8zuyWe98ag@mail.gmail.com>

Ah wow that is such nice work, thank you for this Ale!

Regards

Tim

On Tue, 29 Sep 2020, 08:14 Alessandro Pasotti, <apasotti at gmail.com> wrote:

> Hi,
>
> this is the final report about the implementation of the QEP
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/171
>
> The QGIS browser now exposes a new "Fields" item for vector layers
> that can be expanded to show the underlying fields, an icon identifies
> the base field type.
>
> A context menu is available at the fields root level and allows you to
> create a new field.
> A context menu is available at the individual fields level and allows
> you to delete the selected field.
>
> At the connection level a new context menu item is available and
> allows you to create a new table for all DB connections that support
> the Connections API:
> - PG
> - Spatialite
> - GPKG
> - MSSQL
>
> All the new functions are implemented using the new connections API
> and exposed to Python for plugins/scripts.
>
> There have been many other small improvements in the API and in the
> browser as part of this work such as homogenization of the
> error/warning/success reporting (now using the message bar if
> available and falling back to a dialog if it is not available) and new
> context menu entries.
>
> The following functions are now available in the browser tree using a
> common abstraction API:
>
> - create a new schema
> - delete a schema
> - rename a schema
> - create a new table/layer
> - rename table/layer
> - delete a table/layer
> - truncate a table/layer
> - refresh a materialized view
> - list fields for a table/view
> - add a new field
> - delete a field
>
> Thank you to the QGIS project and to all QGIS sponsors and donors that
> made this possible, a special thank goes to Nyall Dawson who helped in
> the design of the API and reviewed the code.
>
> Kind regards.
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/7bca1043/attachment.html>

From a.neumann at carto.net  Tue Sep 29 12:37:30 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 29 Sep 2020 21:37:30 +0200
Subject: [QGIS-Developer] Make QGIS-Server more modular and specialized?
In-Reply-To: <CAL5Q670nPO2y5xTojd4bwL817+DTT+cFXSuQH9EiQ1DRP82ZGg@mail.gmail.com>
References: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>
 <CAL5Q670nPO2y5xTojd4bwL817+DTT+cFXSuQH9EiQ1DRP82ZGg@mail.gmail.com>
Message-ID: <66087898-592b-7763-a2a5-cc9d18c015b4@carto.net>

Hi Alessandro and Matthias,

Oh - I did not know about https://github.com/qgis/QGIS/pull/37682

How do I use this if I compile QGIS Server from source? How can I 
disable/enable the components?

And yes - a "bad list" or "good list" would also be interesting to have.

Yes - probably as you say - not a speed gain to expect from it - and 
probably size of qgis_mapserv.fcgi and memory consumption wouldn't 
shrink much either?

About GetPrint: yes, we could reroute requests with a reverse proxy to 
different instances, depending on the URL containing GetPrint commands 
or not.

Thanks to both of you for your replies,

Andreas

Am 29.09.20 um 19:17 schrieb Alessandro Pasotti:
> On Tue, Sep 29, 2020 at 6:48 PM Andreas Neumann <a.neumann at carto.net> wrote:
>> Dear QGIS (Server) devs,
>>
>> I wonder if it would be possible to make QGIS server more "modular" in a future version? I mean that at compile time you could decide which services should be enabled and which not? Example: if you are only interested in WMS, could you switch off all the other services?
> Hi Andreas,
>
> It is already possible, at the service level, we now have separate
> packages for the different services so you can actually install only
> what you want.
>
> See: https://github.com/qgis/QGIS/pull/37682
>
> But I doubt that you will gain any speed: the part of the code that
> decides what service is invoked is really fast compared to the rest of
> the processing.
>
> Another simple thing I was thinking about is to have a service
> "badlist" or a "goodlist" where we list in an environment variable the
> services that we want to be loaded (or not loaded)
>
> Cheers
>
>
>> Another usage scenario: a larger installation of QGIS server might want to separate server instances for WMS, WFS or other services and assign different resources to it.
>>
>> Also, would it be possible to make QGIS Server a bit leaner/smaller/faster that way - or is the stuff the makes QGIS Server "fat" mainly the qt dependencies?
>>
>> Thanks for the discussion,
>>
>> Andreas
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

From apasotti at gmail.com  Tue Sep 29 22:42:09 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 30 Sep 2020 07:42:09 +0200
Subject: [QGIS-Developer] Make QGIS-Server more modular and specialized?
In-Reply-To: <66087898-592b-7763-a2a5-cc9d18c015b4@carto.net>
References: <8f54adb5d0d9c8c748ae6636876ae3f2@carto.net>
 <CAL5Q670nPO2y5xTojd4bwL817+DTT+cFXSuQH9EiQ1DRP82ZGg@mail.gmail.com>
 <66087898-592b-7763-a2a5-cc9d18c015b4@carto.net>
Message-ID: <CAL5Q670Ldgqh64oXPh4JfKxCe-iBDD4BcDBCaYWceBJ6mYm1Sw@mail.gmail.com>

On Tue, Sep 29, 2020 at 9:37 PM Andreas Neumann <a.neumann at carto.net> wrote:
>
> Hi Alessandro and Matthias,
>
> Oh - I did not know about https://github.com/qgis/QGIS/pull/37682
>
> How do I use this if I compile QGIS Server from source? How can I
> disable/enable the components?

Hi Andreas,

If you don't want some services you can just delete the generated
".so"  and they won't be loaded.

>
> And yes - a "bad list" or "good list" would also be interesting to have.
>

That isn't difficult to do, I've already sketched it to be able to run
some CI tests.

> Yes - probably as you say - not a speed gain to expect from it - and
> probably size of qgis_mapserv.fcgi and memory consumption wouldn't
> shrink much either?
>

Not probably, certainly you'll gain:

- a very small amount of memory, just for the executable shared
objects ".so" memory storage
- 0 speed or something so close to 0 that would be not measurable anyway
- 0 size of the fcgi or of the standalone development server, because
all services are already modules (shared objects ".so") and they are
dynamically loaded as "plugins" at runtime (which accounts for the
memory).

> About GetPrint: yes, we could reroute requests with a reverse proxy to
> different instances, depending on the URL containing GetPrint commands
> or not.

Yeah, that's probably the best/easiest way.

Kind regards

>
> Thanks to both of you for your replies,
>
> Andreas
>
> Am 29.09.20 um 19:17 schrieb Alessandro Pasotti:
> > On Tue, Sep 29, 2020 at 6:48 PM Andreas Neumann <a.neumann at carto.net> wrote:
> >> Dear QGIS (Server) devs,
> >>
> >> I wonder if it would be possible to make QGIS server more "modular" in a future version? I mean that at compile time you could decide which services should be enabled and which not? Example: if you are only interested in WMS, could you switch off all the other services?
> > Hi Andreas,
> >
> > It is already possible, at the service level, we now have separate
> > packages for the different services so you can actually install only
> > what you want.
> >
> > See: https://github.com/qgis/QGIS/pull/37682
> >
> > But I doubt that you will gain any speed: the part of the code that
> > decides what service is invoked is really fast compared to the rest of
> > the processing.
> >
> > Another simple thing I was thinking about is to have a service
> > "badlist" or a "goodlist" where we list in an environment variable the
> > services that we want to be loaded (or not loaded)
> >
> > Cheers
> >
> >
> >> Another usage scenario: a larger installation of QGIS server might want to separate server instances for WMS, WFS or other services and assign different resources to it.
> >>
> >> Also, would it be possible to make QGIS Server a bit leaner/smaller/faster that way - or is the stuff the makes QGIS Server "fat" mainly the qt dependencies?
> >>
> >> Thanks for the discussion,
> >>
> >> Andreas
> >>
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> >



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Tue Sep 29 22:45:53 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 30 Sep 2020 07:45:53 +0200
Subject: [QGIS-Developer] (QGIS 2020 Grant Report) Port DB Manager Table
 Management Functionalities to Browser (part 2)
In-Reply-To: <CAL5Q6726y5gGY5XcmXbABS2maHPZtjoSB0HUfXxtu6L3Fwk-EA@mail.gmail.com>
References: <CAL5Q6726y5gGY5XcmXbABS2maHPZtjoSB0HUfXxtu6L3Fwk-EA@mail.gmail.com>
Message-ID: <a89232a2-d8b2-12e8-04ae-b8c1dadb1162@duif.net>

Nice Alessandro!

Just tested and work flawlessly on Postgres and Gpkg (others I did not test yet...).
(one issue, see below)

As the DB Manager plugin has issues with me, I am wondering what the 'future' is of that part of QGIS? (in certain combi's of sip/qt it kills QGIS [0])

In another DB Manager related thread this month [1], Sandro mentioned he used it in a plugin, and Paolo said he used it in trainings.
So I'm wondering what others think we should do with it...

Which functionalities are still missing/wanted/needed? 
Most important one is the sql window?
And you can delete and create triggers and indexes?
Maybe the 'load data' button?

Although I really like the sql window for quick demo's :-), I'm ok with 'whatever', AS it is a plugin I will just disable it for now.

ISSUE: One (potential) issue I found in using the context menu in the 'DataSource Manager -- Browser' dialog:
- if you select 'Layer Properties' in the Browser dialog for a db, those Layer Properties (with me) popup *behind* the modal 'DataSource Manager -- Browser' window. So then you cannot use/close it, only AFTER you close the DataSource Manager. I created an issue [2]

Regards & Thanks for this work!

Richard Duivenvoorde

[0] https://github.com/qgis/QGIS/issues/38393
[1] https://lists.osgeo.org/pipermail/qgis-developer/2020-September/062261.html
[2] https://github.com/qgis/QGIS/issues/39094


On 9/29/20 9:14 AM, Alessandro Pasotti wrote:
> Hi,
> 
> this is the final report about the implementation of the QEP
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/171
> 
> The QGIS browser now exposes a new "Fields" item for vector layers
> that can be expanded to show the underlying fields, an icon identifies
> the base field type.
> 
> A context menu is available at the fields root level and allows you to
> create a new field.
> A context menu is available at the individual fields level and allows
> you to delete the selected field.
> 
> At the connection level a new context menu item is available and
> allows you to create a new table for all DB connections that support
> the Connections API:
> - PG
> - Spatialite
> - GPKG
> - MSSQL
> 
> All the new functions are implemented using the new connections API
> and exposed to Python for plugins/scripts.
> 
> There have been many other small improvements in the API and in the
> browser as part of this work such as homogenization of the
> error/warning/success reporting (now using the message bar if
> available and falling back to a dialog if it is not available) and new
> context menu entries.
> 
> The following functions are now available in the browser tree using a
> common abstraction API:
> 
> - create a new schema
> - delete a schema
> - rename a schema
> - create a new table/layer
> - rename table/layer
> - delete a table/layer
> - truncate a table/layer
> - refresh a materialized view
> - list fields for a table/view
> - add a new field
> - delete a field
> 
> Thank you to the QGIS project and to all QGIS sponsors and donors that
> made this possible, a special thank goes to Nyall Dawson who helped in
> the design of the API and reviewed the code.
> 
> Kind regards.
> 


From redistricting at stattosoftware.com  Wed Sep 30 02:16:22 2020
From: redistricting at stattosoftware.com (Statto Redistricting)
Date: Wed, 30 Sep 2020 03:16:22 -0600
Subject: [QGIS-Developer] Plugin approval question
In-Reply-To: <CAMtDFLJ8hKyr5==e53us4QpT5vkYKoLi+HkR6aYt6kuFO0ZeEQ@mail.gmail.com>
References: <49564564aaf107c152ee82e4ddc4136e.squirrel@webmail-box5929.bluehost.com>
 <CAMtDFLJ8hKyr5==e53us4QpT5vkYKoLi+HkR6aYt6kuFO0ZeEQ@mail.gmail.com>
Message-ID: <6bdc1478b62fa6df7601bdb2dbb6bdd2.squirrel@webmail-box5929.bluehost.com>

I fixed these issues and then noticed there was a typo in the email, a
total mess on my end. Everything should be fixed now.

How does the plugin approval process work? I think it would be worthwhile
to add a paragraph to the website in case you don't get it right the first
time, as I don't know if I need to upload a new version of the plugin to
fix the errors I introduced the first time, or if someone who approves
plugins gets notified whenever I change information on the plugin.

I would be happy to write up a short resource if someone could walk me
through the process.

Cheers
John

On Fri, September 25, 2020 12:18 am, Etienne Trimaille wrote:
> I have just checked quickly.
>
>
> https://plugins.qgis.org/plugins/qgis3redistricter-master/ in the
> "Details"
> tabs. Clicking on :
> * on the issue tracker link, it leads to your website, so we can't create
> issues. It must be an issue tracker. * on the code repository, it leads to
> a 404
>
> So it makes the task difficult about the approval, we couldn't contact
> you.
>
>
> Le jeu. 24 sept. 2020 Ã  22:26, Statto Redistricting <
> redistricting at stattosoftware.com> a Ã©crit :
>
>> Sorry if this isn't the best place to ask this, but I've been waiting
>> on approval for a plugin for a week now and haven't heard anything - is
>> there a way to check the plugin approval backlog to see how long it will
>> take?
>>
>> Plugin is located here if anyone is interested:
>> https://plugins.qgis.org/plugins/qgis3redistricter-master/version/2.1/
>>
>>
>> Thank you
>> John Holden
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>


From cavallini at faunalia.it  Wed Sep 30 06:16:53 2020
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 30 Sep 2020 15:16:53 +0200
Subject: [QGIS-Developer] Osgeo4w mirrors
Message-ID: <43d8508e-6061-b092-997e-52ed70f2be71@faunalia.it>

Hi all,
apparently the Oslandia osgeo4w mirror is out of sync (3.13 instead of
3.15), whereas e.g. the Norbit oe is updated.
Cheers.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From rdmailings at duif.net  Wed Sep 30 07:35:32 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 30 Sep 2020 16:35:32 +0200
Subject: [QGIS-Developer] Plugin approval question
In-Reply-To: <6bdc1478b62fa6df7601bdb2dbb6bdd2.squirrel@webmail-box5929.bluehost.com>
References: <49564564aaf107c152ee82e4ddc4136e.squirrel@webmail-box5929.bluehost.com>
 <CAMtDFLJ8hKyr5==e53us4QpT5vkYKoLi+HkR6aYt6kuFO0ZeEQ@mail.gmail.com>
 <6bdc1478b62fa6df7601bdb2dbb6bdd2.squirrel@webmail-box5929.bluehost.com>
Message-ID: <1789fc80-16f5-9ccd-1672-f5f58efbadef@duif.net>

On 9/30/20 11:16 AM, Statto Redistricting wrote:
> I fixed these issues and then noticed there was a typo in the email, a
> total mess on my end. Everything should be fixed now.
> 
> How does the plugin approval process work? I think it would be worthwhile
> to add a paragraph to the website in case you don't get it right the first
> time, as I don't know if I need to upload a new version of the plugin to
> fix the errors I introduced the first time, or if someone who approves
> plugins gets notified whenever I change information on the plugin.
> 
> I would be happy to write up a short resource if someone could walk me
> through the process.

Hi Statto,

When I google 'qgis plugin approval' I get:

https://plugins.qgis.org/publish/

If you want to add something there, I think(!) this is a static page in the plugins application, so admins should be able to do this. If you sent me better text (or admin at qgis.org) then we can add a paragraph or so...

Another page talking about the release process is:

https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/plugins/releasing.html

which can be edited via a Github pull request (or by sending me better text).

Personally I think it is better to change the page 
https://plugins.qgis.org/publish/
to a shorter version with a link to 
https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/plugins/releasing.html

because the latter is/can be translated, AND is easier to fix/edit by the community?

Hope this is clear, if not just ping me.

Regards,

Richard Duivenvoorde

From espinafre at gmail.com  Wed Sep 30 10:03:17 2020
From: espinafre at gmail.com (=?UTF-8?Q?Jos=C3=A9_de_Paula_Rodrigues?=)
Date: Wed, 30 Sep 2020 14:03:17 -0300
Subject: [QGIS-Developer] Tests failing with PostgreSQL 12
Message-ID: <CAEvhHDnVskdqDbhYV4+e+5h9wBUZkFhyWBQoz-J6k8wGNrZC5Q@mail.gmail.com>

Hi folks,

Have any of you run tests against PostgreSQL 12/PostGIS 3.0.x lately?
They have been failing on me, on my local system, more specifically
the one called PyQgsPostgresProvider .  I've sent the logs earlier to
this list, but it didn't come through, perhaps due to message size.

-- 
... et cognoscetis veritatem et veritas liberabit vos.

From espinafre at gmail.com  Tue Sep 29 06:42:01 2020
From: espinafre at gmail.com (=?UTF-8?Q?Jos=C3=A9_de_Paula_Rodrigues?=)
Date: Tue, 29 Sep 2020 13:42:01 -0000
Subject: [QGIS-Developer] Tests failing with PostgreSQL 12/PostGIS 3.0
Message-ID: <CAEvhHD=Ba4EQJXVSNXtRGC7iEE82eL0_MqvqMDtdzMR=g-8tPQ@mail.gmail.com>

Hi all,

I've tried running some test cases locally against PostgreSQL 12 and
PostGIS 3.0.0 ~ 3.0.2. These tests are consistently failing here,
whereas they run successfully on Travis. Attached are the logs of
running

ctest --progress --output-on-failure -R '(PyQgsPostgresProvider)'

against the latest master commit
(a0ec11948b561029b5d838dee89dc7ea4c8d115b, 2020-09-29 08:52+0200),
with QGIS_DEBUG=5 environment variable. The file unpacks to a 18M
plaintext log.

The failure found on line 167545 doesn't bother me much, it looks like
a rounding error which can be easily corrected by applying round() to
both sides of the test comparison.

What worries me is the failure reported on line 167554. From what I
could figure, it comes from the SQL statement printed on line 17136:

DECLARE qgis_745 BINARY CURSOR FOR SELECT
st_asbinary("geom",'NDR'),ctid,"pk"::text FROM
"qgis_test"."some_poly_data" WHERE
ST_Overlaps(ST_Buffer("geom",1,'8'),ST_GeomFromText('Polygon ((-75.1
76.1, -75.1 81.6, -68.8 81.6, -68.8 76.1, -75.1 76.1))',4326))

This makes the database report the following error: "Missing value for
buffer parameter 8"

As I said, however, these tests run flawlessly on Travis, and they
used to run flawlessly on my local PostgreSQL 12/PostGIS 3.0.2
environment; I'm at a loss to pinpoint what changed, and maybe this is
one more reason to upgrade the CI to test against newer PostgreSQL
versions.

Thank you very much for any insights!

-- 
... et cognoscetis veritatem et veritas liberabit vos.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logtest.gz
Type: application/gzip
Size: 480147 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/bbf0e5e8/attachment-0002.gz>

From espinafre at gmail.com  Tue Sep 29 06:42:01 2020
From: espinafre at gmail.com (=?UTF-8?Q?Jos=C3=A9_de_Paula_Rodrigues?=)
Date: Tue, 29 Sep 2020 13:42:01 -0000
Subject: [QGIS-Developer] Tests failing with PostgreSQL 12/PostGIS 3.0
Message-ID: <CAEvhHD=Ba4EQJXVSNXtRGC7iEE82eL0_MqvqMDtdzMR=g-8tPQ@mail.gmail.com>

Hi all,

I've tried running some test cases locally against PostgreSQL 12 and
PostGIS 3.0.0 ~ 3.0.2. These tests are consistently failing here,
whereas they run successfully on Travis. Attached are the logs of
running

ctest --progress --output-on-failure -R '(PyQgsPostgresProvider)'

against the latest master commit
(a0ec11948b561029b5d838dee89dc7ea4c8d115b, 2020-09-29 08:52+0200),
with QGIS_DEBUG=5 environment variable. The file unpacks to a 18M
plaintext log.

The failure found on line 167545 doesn't bother me much, it looks like
a rounding error which can be easily corrected by applying round() to
both sides of the test comparison.

What worries me is the failure reported on line 167554. From what I
could figure, it comes from the SQL statement printed on line 17136:

DECLARE qgis_745 BINARY CURSOR FOR SELECT
st_asbinary("geom",'NDR'),ctid,"pk"::text FROM
"qgis_test"."some_poly_data" WHERE
ST_Overlaps(ST_Buffer("geom",1,'8'),ST_GeomFromText('Polygon ((-75.1
76.1, -75.1 81.6, -68.8 81.6, -68.8 76.1, -75.1 76.1))',4326))

This makes the database report the following error: "Missing value for
buffer parameter 8"

As I said, however, these tests run flawlessly on Travis, and they
used to run flawlessly on my local PostgreSQL 12/PostGIS 3.0.2
environment; I'm at a loss to pinpoint what changed, and maybe this is
one more reason to upgrade the CI to test against newer PostgreSQL
versions.

Thank you very much for any insights!

-- 
... et cognoscetis veritatem et veritas liberabit vos.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logtest.gz
Type: application/gzip
Size: 480147 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20200929/bbf0e5e8/attachment-0003.gz>

