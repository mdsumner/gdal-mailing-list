From jgr at di.uminho.pt  Tue Jan  1 03:39:05 2013
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Tue, 1 Jan 2013 03:39:05 -0800 (PST)
Subject: [Qgis-developer] API cleanup
In-Reply-To: <20121223112933.164a1e1cc4d5d11dddd14f45@gmail.com>
References: <20121219140008.d00350e35734894adc9f2091@gmail.com>
	<50D44202.9080804@sourcepole.ch>
	<20121223112933.164a1e1cc4d5d11dddd14f45@gmail.com>
Message-ID: <1357040345773-5025210.post@n6.nabble.com>

Hi,

Apparently, some plugins are broken after the clean up (as expected...).
See:
http://hub.qgis.org/issues/6915
http://hub.qgis.org/issues/6916

Regards,

Jorge




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/API-cleanup-tp5023896p5025210.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From jef at norbit.de  Tue Jan  1 08:00:05 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Tue, 1 Jan 2013 17:00:05 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <e5fd4cbf-fb1f-455e-a7d5-cef49c77562b@email.android.com>
References: <ixcr7ujwmhhkiaaf0qt00qek.1356790818176@email.android.com>
	<e5fd4cbf-fb1f-455e-a7d5-cef49c77562b@email.android.com>
Message-ID: <20130101160004.GA20431@norbit.de>

Hi Paolo,

On Sat, 29. Dec 2012 at 18:38:26 +0100, Paolo Cavallini wrote:
> Why not releasing a beta before merging?

What for?

Either we want that stuff in the release, then we need to merge it before the
release and releasing a beta now of stuff that we're probably going to break
IMHO doesn't make any sense.

Then again I don't see a big point in releasing betas at all.  We have nightly
builds.  And given that we have a feature freeze before a release those will
also settle.  If that isn't enough we could also schedule switch from nightly
to weekly builds before a release to have an easier target for testing.

Doing extra betas (and we like won't get away with just one) would just imply
more work and extra infrastructure.


J?rgen 

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From werner.macho at gmail.com  Tue Jan  1 11:41:06 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Tue, 1 Jan 2013 20:41:06 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <20130101160004.GA20431@norbit.de>
References: <ixcr7ujwmhhkiaaf0qt00qek.1356790818176@email.android.com>
	<e5fd4cbf-fb1f-455e-a7d5-cef49c77562b@email.android.com>
	<20130101160004.GA20431@norbit.de>
Message-ID: <CA+3oMjv6p3hr6buqzCYcR4LE4Q8EGuStfVpTXDF3i0kg5Rav7Q@mail.gmail.com>

Hi!

Just for the logs .. I agree with J?rgen in that case..
It does not make any sense to release a beta now - with some new
implemented things and some not ..
>From my point of view - the only last thing we are all waiting for is
Martins threading implementation ..
After merging his branch I'd vote for a feature freeze and a longer
stabilization phase ..
And then .. Lets' do the 2.0 ;)

regards
Werner



On Tue, Jan 1, 2013 at 5:00 PM, J?rgen E. <jef at norbit.de> wrote:

> Hi Paolo,
>
> On Sat, 29. Dec 2012 at 18:38:26 +0100, Paolo Cavallini wrote:
> > Why not releasing a beta before merging?
>
> What for?
>
> Either we want that stuff in the release, then we need to merge it before
> the
> release and releasing a beta now of stuff that we're probably going to
> break
> IMHO doesn't make any sense.
>
> Then again I don't see a big point in releasing betas at all.  We have
> nightly
> builds.  And given that we have a feature freeze before a release those
> will
> also settle.  If that isn't enough we could also schedule switch from
> nightly
> to weekly builds before a release to have an easier target for testing.
>
> Doing extra betas (and we like won't get away with just one) would just
> imply
> more work and extra infrastructure.
>
>
> J?rgen
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden
> http://www.norbit.de
> committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode
>
> --
> norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
> Rheinstrasse 13, 26506 Norden
> GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130101/da58ede1/attachment.html>

From cavallini at faunalia.it  Tue Jan  1 11:50:32 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 01 Jan 2013 20:50:32 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CA+3oMjv6p3hr6buqzCYcR4LE4Q8EGuStfVpTXDF3i0kg5Rav7Q@mail.gmail.com>
References: <ixcr7ujwmhhkiaaf0qt00qek.1356790818176@email.android.com>
	<e5fd4cbf-fb1f-455e-a7d5-cef49c77562b@email.android.com>
	<20130101160004.GA20431@norbit.de>
	<CA+3oMjv6p3hr6buqzCYcR4LE4Q8EGuStfVpTXDF3i0kg5Rav7Q@mail.gmail.com>
Message-ID: <50E33E08.5030105@faunalia.it>

Il 01/01/2013 20:41, Werner Macho ha scritto:
> Hi!
> 
> Just for the logs .. I agree with J?rgen in that case..
> It does not make any sense to release a beta now - with some new implemented things
> and some not ..
> From my point of view - the only last thing we are all waiting for is Martins
> threading implementation ..


Of course I agree with you to avoid useless work. I'm just worried that if we keep on
adding new features and breaking the API the 2.0 release will take too long.
AFAIK the blocking factors we agreed upon are:

  * Symbology overhaul
  * Labelling overhaul
  * New web site and docs
  * SEXTANTE integration
  * Interface cleanup and consistency
  * Plugins migration

I think there is still work to be done on most of these, if not all.

All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From siki at agt.bme.hu  Tue Jan  1 13:03:48 2013
From: siki at agt.bme.hu (Siki Zoltan)
Date: Tue, 1 Jan 2013 22:03:48 +0100 (CET)
Subject: [Qgis-developer] join table
Message-ID: <Pine.LNX.4.64.1301012203070.14968@bme-geod>

Dear QGIS DEvelopoers,

I'm writing a python plugin where I would like to handle the values in a dbf 
table which is joined to a shape file. I could join the table to the shape file 
using VectorLayer.addJoin, but I can't find any way to get the joined 
attributes of a feature. After joining the dataProvider.attributeIndexes 
returns only the original columns of the shape file. The fieldNameIndex returns 
-1 for all joined column names.
Any advice to get the values in joined columns in Python?

Thanks,
Zoltan

From lutfioduncuoglu at gmail.com  Tue Jan  1 22:54:08 2013
From: lutfioduncuoglu at gmail.com (Lutfi Oduncuoglu)
Date: Wed, 2 Jan 2013 08:54:08 +0200
Subject: [Qgis-developer] DTclassifier does not install
In-Reply-To: <CALVUytPOiFE=Y7QYUD16nHmkucX7f8rPe-FiEiOUXE8EjErtGA@mail.gmail.com>
References: <CALVUytPOiFE=Y7QYUD16nHmkucX7f8rPe-FiEiOUXE8EjErtGA@mail.gmail.com>
Message-ID: <CALVUytMj8RZ=72=-hpKt6FKttZ=tjpoCabsZBcLBDcGfsoJWZg@mail.gmail.com>

Hi,

I've installed the openCV but it still does not work.

On Sat, Dec 29, 2012 at 11:45 PM, Lutfi Oduncuoglu <
lutfioduncuoglu at gmail.com> wrote:

> Hi,
>
> I am trying working aroun *DTclassifier, **I installed the plug-in as
> usual (copying the .dll files to program path) however it does not work, do
> you have any idea?*
>
> *OS:Windows 7 64bit*
> *QGIS 1.8 Lisboa *
> *
> *
> *Thanks*
> *
> *
> *Lutfi*
> *
> *
> *
> *
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130102/95e79f9a/attachment.html>

From anitagraser at gmx.at  Wed Jan  2 06:59:46 2013
From: anitagraser at gmx.at (Anita Graser)
Date: Wed, 2 Jan 2013 15:59:46 +0100
Subject: [Qgis-developer] Why do I get an empty attribute map when using
	featureAtId()
Message-ID: <CAFFV8Fj+kX=5GN79RM1hvBJ0s17i5cJm7v7gLpGQi2xJ26bj1g@mail.gmail.com>

Hi,

I'm working on an extended version of Sextante Ftools "Sum lines"
where I want to calculate line length sum for different classes.
When trying to get the classification value from the line features, I
run into the problem that the attribute map is empty. Is this because
of my usage of featureAtId() method? Or am I missing something else
here?

Thanks
Anita

Script here:


import os.path

from PyQt4 import QtGui
from PyQt4.QtCore import *

from qgis.core import *

from sextante.core.GeoAlgorithm import GeoAlgorithm
from sextante.core.QGisLayers import QGisLayers
from sextante.core.SextanteLog import SextanteLog

from sextante.parameters.ParameterVector import ParameterVector
from sextante.parameters.ParameterString import ParameterString
from sextante.parameters.ParameterTableField import ParameterTableField
from sextante.outputs.OutputVector import OutputVector

from sextante.ftools import FToolsUtils as utils

class SumLinesClassified(GeoAlgorithm):

    LINES = "LINES"
    POLYGONS = "POLYGONS"
    CLASS_FIELD = "CLASS_FIELD"
    LEN_FIELD = "LEN_FIELD"
    COUNT_FIELD = "COUNT_FIELD"
    OUTPUT = "OUTPUT"

    def getIcon(self):
        return QtGui.QIcon(os.path.dirname(__file__) + "/icons/sum_lines.png")

    def defineCharacteristics(self):
        self.name = "Sum line lengths by class"
        self.group = "Analysis tools"

        self.addParameter(ParameterVector(self.LINES, "Lines",
ParameterVector.VECTOR_TYPE_LINE))
        self.addParameter(ParameterVector(self.POLYGONS, "Polygons",
ParameterVector.VECTOR_TYPE_POLYGON))
        self.addParameter(ParameterTableField(self.CLASS_FIELD,
"Unique ID field",self.LINES ))
        #self.addParameter(ParameterString(self.LEN_FIELD, "Lines
length field name", "LENGTH"))
        #self.addParameter(ParameterString(self.COUNT_FIELD, "Lines
count field name", "COUNT"))

        self.addOutput(OutputVector(self.OUTPUT, "Result"))

    def processAlgorithm(self, progress):
        lineLayer =
QGisLayers.getObjectFromUri(self.getParameterValue(self.LINES))
        polyLayer =
QGisLayers.getObjectFromUri(self.getParameterValue(self.POLYGONS))
        classFieldName = self.getParameterValue(self.CLASS_FIELD)

        #lengthFieldName = self.getParameterValue(self.LEN_FIELD)
        #countFieldName = self.getParameterValue(self.COUNT_FIELD)

        output = self.getOutputValue(self.OUTPUT)

        polyProvider = polyLayer.dataProvider()
        lineProvider = lineLayer.dataProvider()
        allLineAttrs = lineProvider.attributeIndexes()

        classFieldIndex = lineProvider.fieldNameIndex(classFieldName)
        if polyProvider.crs() != lineProvider.crs():
            SextanteLog.addToLog(SextanteLog.LOG_WARNING,
                                 "CRS warning: Input layers have
non-matching CRS. This may cause unexpected results.")

        # get unique classification values and create a field for each
one of them
        classValues = lineLayer.uniqueValues(classFieldIndex)
        fieldIndizes = []
        lengthValues = []
        fieldList = polyLayer.pendingFields()
        for value in classValues:
            index, fieldList = utils.findOrCreateField(polyLayer,
fieldList, 'LEN_'+value.toString())
            fieldIndizes.append(index)
            lengthValues.append(0)

        writer =
self.getOutputFromName(self.OUTPUT).getVectorWriter(fieldList,
polyProvider.geometryType(), polyProvider.crs())

        spatialIndex = utils.createSpatialIndex(lineProvider)



        allAttrs = polyLayer.pendingAllAttributesList()
        polyLayer.select(allAttrs)

        ftLine = QgsFeature()
        ftPoly = QgsFeature()
        outFeat = QgsFeature()
        inGeom = QgsGeometry()
        outGeom = QgsGeometry()
        distArea = QgsDistanceArea()

        current = 0
        total = 100.0 / float(polyProvider.featureCount())
        hasIntersections = False

        while polyLayer.nextFeature(ftPoly):
            inGeom = QgsGeometry(ftPoly.geometry())
            atMap = ftPoly.attributeMap()
            #count = 0
            #length = 0
            hasIntersections = False
            lines = spatialIndex.intersects(inGeom.boundingBox())

            lineProvider.rewind()
            lineProvider.select( allLineAttrs )

            if len(lines) > 0:
                hasIntersections = True

            if hasIntersections:
                # sum up line lengths per classification value
                for i in lines:
                    lineProvider.featureAtId(int(i), ftLine)
                    SextanteLog.addToLog(SextanteLog.LOG_INFO, 'len of
attribute map: '+str(len(ftLine.attributeMap())))

                    tmpGeom = QgsGeometry(ftLine.geometry())
                    if inGeom.intersects(tmpGeom):
                        outGeom = inGeom.intersection(tmpGeom)
                        classValue =
ftLine.attributeMap()[classFieldIndex].toString()
                        lengthValues[classValues.index(classValue)] +=
distArea.measure(outGeom)
                        #count += 1

            outFeat.setGeometry(inGeom)
            outFeat.setAttributeMap(atMap)
            for newFieldIndex in fieldIndizes:
                outFeat.addAttribute(newFieldIndex,
QVariant(lengthValues[fieldIndizes.index(newFieldIndex)]))
            #outFeat.addAttribute(idxLength, QVariant(length))
            #outFeat.addAttribute(idxCount, QVariant(count))
            writer.addFeature(outFeat)

            current += 1
            progress.setPercentage(int(current * total))

        del writer

From madmanwoo at gmail.com  Wed Jan  2 07:15:06 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Thu, 3 Jan 2013 01:15:06 +1000
Subject: [Qgis-developer] Why do I get an empty attribute map when using
	featureAtId()
In-Reply-To: <CAFFV8Fj+kX=5GN79RM1hvBJ0s17i5cJm7v7gLpGQi2xJ26bj1g@mail.gmail.com>
References: <CAFFV8Fj+kX=5GN79RM1hvBJ0s17i5cJm7v7gLpGQi2xJ26bj1g@mail.gmail.com>
Message-ID: <CAAi8Yg_RSX+QUo1b5tYo=Uy527Mdu+jLpJ4oT7ag3Q6_NeQwSQ@mail.gmail.com>

The data provider takes a list of ints as the last argument to tell which
attributes you want to return:
http://www.qgis.org/api/classQgsVectorDataProvider.html#a62ffd8535cf91556e0e5acdcc93a6d11

You should need something like this: lineProvider.featureAtId(int(i),
ftLine, True, allLineAttrs )

- Nathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130103/3e8ee9bd/attachment.html>

From anitagraser at gmx.at  Wed Jan  2 08:59:32 2013
From: anitagraser at gmx.at (Anita Graser)
Date: Wed, 2 Jan 2013 17:59:32 +0100
Subject: [Qgis-developer] Why do I get an empty attribute map when using
	featureAtId()
In-Reply-To: <CAAi8Yg_RSX+QUo1b5tYo=Uy527Mdu+jLpJ4oT7ag3Q6_NeQwSQ@mail.gmail.com>
References: <CAFFV8Fj+kX=5GN79RM1hvBJ0s17i5cJm7v7gLpGQi2xJ26bj1g@mail.gmail.com>
	<CAAi8Yg_RSX+QUo1b5tYo=Uy527Mdu+jLpJ4oT7ag3Q6_NeQwSQ@mail.gmail.com>
Message-ID: <CAFFV8FgAtqTZHyMZMC1W8j1jF9BKnOuhxkT=Z5VcH6W7g7qgog@mail.gmail.com>

On Wed, Jan 2, 2013 at 4:15 PM, Nathan Woodrow <madmanwoo at gmail.com> wrote:
> The data provider takes a list of ints as the last argument to tell which
> attributes you want to return:
> http://www.qgis.org/api/classQgsVectorDataProvider.html#a62ffd8535cf91556e0e5acdcc93a6d11
>
> You should need something like this: lineProvider.featureAtId(int(i),
> ftLine, True, allLineAttrs )

Thanks Nathan!
And sorry for not reading the docs ;)

Best wishes
Anita

From matthias.kuhn at gmx.ch  Thu Jan  3 01:37:17 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 03 Jan 2013 10:37:17 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
Message-ID: <50E5514D.600@gmx.ch>

Hi Martin,

Thank you for your work.

I really appreciate these features. Some of them will allow me to 
simplify my code drastically.
I'm updating the plugin I'm working on right now and will let you know 
about any problems which occur.

You've been talking about updating to PyQt4 SIP version 2. I noticed 
this change did not yet happen. What are your plans regarding this update?

I'm also looking forward to seeing QgsFeatureRequest support 
QgsExpression, I think this is not yet supported?

Cheers

PS:
I've just been able to segfault:

a = dataProvider.getFeatures( QgsFeatureRequest().setFilterFid( 
featureId ) )
a.rewind()
a.next()

I'm not sure if the featureId existed or not ( I think it did )

PPS:
Another strange thing (maybe related), calling next() directly on a fid 
filter returns a feature, storing into a QgsFeatureIterator and calling 
next on this throws a StopIteration:

dataProvider.getFeatures(QgsFeatureRequest().setFilterFid( featureId ) 
).next()
<qgis.core.QgsFeature object at 0xaa027a0>

features = dataProvider.getFeatures(QgsFeatureRequest().setFilterFid( 
featureId ) )
f = features.next()
Traceback (most recent call last):
   File 
"/home/kk/.qgis//python/plugins/remotedebug/pysrc/pydevd_exec.py", line 
2, in Exec
     exec exp in global_vars, local_vars
   File "<console>", line 1, in <module>
StopIteration


On 12/28/2012 05:03 PM, Martin Dobias wrote:
> Hi everyone,
>
> it seems that now it is a good time to ask for a broader review of the
> work I have been doing during recent months: essentially making QGIS
> vector API more flexible and more ready for introduction of threading
> for rendering. That resulted in a greater refactoring of some parts of
> QgsVectorLayer class and QgsVectorDataProvider implementations.
> Everything is in new_vector_api branch in QGIS repository on GitHub
> [1].
>
> There are few things that are not finished, but should not take too
> much work to sort out:
> - disabled providers - mssql, osm, sqlanywhere, wfs - not yet updated to new API
> - disabled mapserver - there are few things to update
>
> If no serious problems will be found, I would like to merge the branch
> to master and continue working on that on master branch to avoid the
> possibility to drift (again) too much from the quick development that
> happens on master. In short term I plan to do some polishing and
> fixing bugs, then eventually start looking at the threading again.
>
> For more details about what happened in the branch, see the text below
> (long read!). A great help from early testers would be to compile the
> branch, try to do some "usual" stuff with vectors and see if things
> break apart (crashes? data corruption?).
>
> Looking forward to your comments!
>
> Regards
> Martin
>
> [1] https://github.com/qgis/Quantum-GIS/tree/new_vector_api
>
>
>
> QGIS VECTOR API CHANGES
>
> 1. QgsFeature (changes)
>
> a) access to attributes by name. Vector data providers and vector
> layer assign pointer to the fields in QgsFeature, so it is possible to
> set/get attributes by their name. This is not as efficient as with
> direct access by index, but often this convenience is useful for
> users.
>
> b) attributes are stored in a QVector container rather than a QMap.
> The major advantage is simplification of logic related to handling of
> attributes: it's not possible to have "holes" in the array of
> fields/attributes. Currently it is possible that for example layer
> with three fields returns indexes 0,1,3 - but it is not so common nor
> obvious, so it's a common source of errors. After refactoring there
> must not be any holes, so a layer with three fields always returns
> indexes 0,1,2. When iterating over layer's features, QgsFeature always
> contains a vector of all layer's attributes. In case the client has
> not requested attributes to be fetched, the attributes contain invalid
> values.
>
>
> 2. QgsFields (new class)
>
> Just like attributes within a feature are stored in a vector instead
> of map, also layer's fields are now stored in a vector. QgsFields is a
> new class that mimics QVector API and adds two more pieces of
> functionality:
>
> a) fast lookup of field index from name. When QgsFields is populated
> with fields, it creates a map of fields that facilitates fast lookups
>
> b) detection of field origin. When working with a vector layer, it is
> sometimes useful to find out origin of the field - whether it comes
> from provider, from a join or whether it is a newly added field (not
> committed). In the future we could add also expression-based fields,
> creating a field calculator that calculates the values on the fly.
>
>
> 3. QgsFeatureRequest (new class)
>
> Class that encapsulates requests for features to a vector layer or
> vector data provider. Right now in master branch, the request is
> defined by arguments to select() method. That's not very flexible nor
> simple to use. Feature request class allows easier extensibility in
> future (support generic expression filter, native provider's SQL
> filter...).
>
> Without any customization, the request will ask for all features with
> geometries and attributes - somehow better default that the current
> one that does not fetch attributes if their list is not explicitly
> given.
>
> (I'm not yet completely happy with the API of this class, so it may be
> changed to some degree. Suggestions are welcome.)
>
> Examples:
> - fetch all features:
>      QgsFeatureRequest()
> - fetch all features, only one attribute
>      QgsFeatureRequest().setSubsetOfAttributes(QStringList("myfield"),
> provider->fields())
> - fetch all features, without geometries
>      QgsFeatureRequest().setFlags(QgsFeatureRequest::NoGeometry)
> - fetch only features from particular extent
>      QgsFeatureRequest().setFilterRect(QgsRectangle(0,0,1,1))
> - fetch only one feature
>      QgsFeatureRequest().setFilterFid(45)
>
>
>
> 4. QgsFeatureIterator (new class)
>
> The iterator class allows iteration over features of a vector layer or
> a provider. It contains the usual nextFeature() method that fills
> given QgsFeature class with data.
>
> Internally, this class is a wrapper around QgsAbstractFeatureIterator
> interface that is implemented by each vector data provider and by
> vector layer. In theory we could use directly
> QgsAbstractFeatureIterator pointers, but this wrapper allows us to use
> it as a local variable, so it gets destroyed automatically when it
> gets out of scope, not requiring an explicit "delete" call that would
> be necessary with a pointer (easy to forget, right?)
>
>
> 5. Access to features
>
> Vector layer and providers implement one important method call:
> getFeatures(). It takes single argument (QgsFeatureRequest) and
> returns QgsFeatureIterator. This replaces select(), nextFeature(),
> rewind() and featureAtId() methods.
>
> This approach allows users to create multiple iterators over a vector
> layer (or a vector data provider). But currently that's not supported
> because this needs support in the providers. At some point, we could
> add support for simultaneous iterators - something that old API does
> not allow at all.
>
> When QgsFeatureIterator instance of a particular layer is closed (by
> calling close() or destructed), then a new getFeatures() call may be
> issued.
>
>
> 6. QgsVectorLayerEditBuffer (new class)
>
> All editing functionality of vector layer has been moved out of
> QgsVectorLayer into a new class that stores everything related to
> editing: added features, removed features, changed geometries, changed
> attribute values, added attributes, removed attributes. This class is
> accessible from QgsVectorLayer, but it exists only when the layer is
> in editing mode - it is deleted once features are rolled back or
> committed.
>
> The undo/redo support has been completely rewritten and greatly
> simplified: instead of one undo command that gathers changes within
> the edit buffer, there is now one undo command implementation for each
> action. The undo commands can be grouped together with QUndoStack
> macros. The new implementation ensures that the undo stack does not
> get out of sync, because all editing changes are stored onto undo
> stack (unlike current implementation in master branch where
> begin/end-UndoCommand() methods must be called before/after edit
> operations to ensure correct behavior of undo).
>
>
> 7. QgsVectorLayerEditUtils (new class)
>
> Advanced editing operations that operate on vector layers (e.g. add
> part) that can be composed from one or more simple edit operations
> have been moved out of QgsVectorLayer and its edit buffer, so that the
> vector layer API is not polluted by methods that do not need access to
> its private members.
>
>
> 8. QgsVectorLayerCache (new class)
>
> To speed up geometry editing, QGIS keeps a cache of geometries
> currently shown in map canvas. This cache has been decoupled from
> editing operations and moved to a separate class to keep things tidy.
> In the future we should be able to add more general caching scheme to
> allow faster rendering of vectors. Also, this might be a good place to
> store index of feature ID -> row number that is calculated every time
> when attribute table is opened.
>
>
> 9. Python
>
> Python API has been updated to support functionality from the points
> above, that is access by attribute name and support for python
> iterators, e.g.:
>
> for feature in layer.getFeatures(request):
>    print feature["road_id"]
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From cavallini at faunalia.it  Thu Jan  3 08:22:57 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 03 Jan 2013 17:22:57 +0100
Subject: [Qgis-developer] Plugins bugtracker
Message-ID: <50E5B061.4020704@faunalia.it>

Hi all.
Several plugins do not have a bugtracker. This is quite annoying, and does not look
good for the project. Shouldn't we enforce this as a requirement for accepting plugins?
I do not think devs have any objection in setting up a redmine instance, they
probably do not know how to do, or are lazy to do it.
All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From info at locatepress.com  Thu Jan  3 09:42:06 2013
From: info at locatepress.com (Tyler Mitchell)
Date: Thu, 3 Jan 2013 09:42:06 -0800
Subject: [Qgis-developer] Plugins bugtracker
In-Reply-To: <50E5B061.4020704@faunalia.it>
References: <50E5B061.4020704@faunalia.it>
Message-ID: <E4885282-4314-48C2-940C-F47EB89CCE93@locatepress.com>

From my end user perspective it would sure be helpful to know where/how to report
bugs against them.  Not sure how to recommend making it happen, but if I saw two
similar plugins and one had a start beside it saying it was "supported" with a bug
tracker, I'd choose it first :)

On 2013-01-03, at 8:22 AM, Paolo Cavallini wrote:

> Hi all.
> Several plugins do not have a bugtracker. This is quite annoying, and does not look
> good for the project. Shouldn't we enforce this as a requirement for accepting plugins?
> I do not think devs have any objection in setting up a redmine instance, they
> probably do not know how to do, or are lazy to do it.
> All the best.
> -- 
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From alobolistas at gmail.com  Thu Jan  3 11:34:11 2013
From: alobolistas at gmail.com (Agustin Lobo)
Date: Thu, 3 Jan 2013 20:34:11 +0100
Subject: [Qgis-developer] Fwd: kml file does not open with ogrinfo but works
	with GE
In-Reply-To: <CAG4NReJTvxt_d6ZcJV8Yz0uzRfffvSOff7gdRYgwwfd=caZmaQ@mail.gmail.com>
References: <CAG4NReKNr+rPWNpJBx+r1onb=Y0mnkh-gpJR8qDGBdBXHS7p1w@mail.gmail.com>
	<CAG4NReJTvxt_d6ZcJV8Yz0uzRfffvSOff7gdRYgwwfd=caZmaQ@mail.gmail.com>
Message-ID: <CAG4NReK5wvp6MBpODP+JuuBxkEwnggrynGpv4HCf+JNYuYz-Cg@mail.gmail.com>

Happy 2013 to everyone!

I send here copy of my message to the gdal list and will keep this
list informed in case gdal-dev suggests a solution
Agus
---------- Forwarded message ----------
From: Agustin Lobo <alobolistas at gmail.com>
Date: Thu, Jan 3, 2013 at 12:17 PM
Subject: kml file does not open with ogrinfo but works with GE
To: gdal-dev at lists.osgeo.org


A program (Mission Planner for Ardupilot)
http://code.google.com/p/ardupilot-mega/wiki/MPTlog
produces kml files
with track information that can be represented with the same program
and GE, but I cannot open them with ogrinfo:
$ ogrinfo test.kml
FAILURE:
Unable to open datasource `test.kml' with the following drivers.
$ ogrinfo --version
GDAL 1.9.2, released 2012/10/08

I cannot open it with QGIS or R (readOGR()) either.

Is there a newer kml format that is recognized by GE but not by the OGR library?
Any help with this?
I've uploaded test.kml in case someone could help:
http://dl.dropbox.com/u/3180464/test.kml

Thanks!
Agus

From siki at agt.bme.hu  Thu Jan  3 12:25:03 2013
From: siki at agt.bme.hu (Siki Zoltan)
Date: Thu, 3 Jan 2013 21:25:03 +0100 (CET)
Subject: [Qgis-developer] join table [SOLVED]
In-Reply-To: <Pine.LNX.4.64.1301012203070.14968@bme-geod>
References: <Pine.LNX.4.64.1301012203070.14968@bme-geod>
Message-ID: <Pine.LNX.4.64.1301032110280.24044@bme-geod>

Dear Developers,

the solution to my problem is not to use the dataProvider's methods, those 
handle only the columns of the original layer. The layers' methods should 
be used instead.
So if you would like get joined column values
use layer.pendingAllAttributesList() instead of dataProvider.attributeIndexes()
use layer.pendingFieldList() instead of dataProvider.fields()
use layer.featureAtId(...) instead of dataProvider.featureAtId(...)

The answer was found in qgisvectorfilewriter.cpp.

Best regards

On Tue, 1 Jan 2013, Siki Zoltan wrote:

> Dear QGIS DEvelopoers,
>
> I'm writing a python plugin where I would like to handle the values in a dbf 
> table which is joined to a shape file. I could join the table to the shape 
> file using VectorLayer.addJoin, but I can't find any way to get the joined 
> attributes of a feature. After joining the dataProvider.attributeIndexes 
> returns only the original columns of the shape file. The fieldNameIndex 
> returns -1 for all joined column names.
> Any advice to get the values in joined columns in Python?
>
> Thanks,
> Zoltan
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>

From benedict.m.holland at gmail.com  Thu Jan  3 20:40:51 2013
From: benedict.m.holland at gmail.com (Benedict Holland)
Date: Thu, 3 Jan 2013 23:40:51 -0500
Subject: [Qgis-developer] Hello, my name is Benedict Holland
Message-ID: <CAD+mzowoFg8B2ZNPciYadsmUjKnzHvfAa3EyvwjmCuW05BBM6Q@mail.gmail.com>

Hello all,

I am currently a graduate student in economics at Clark University but in a
former life I worked as a Sen. Software Engineer and Release Engineer. I am
more or less an expert in python and I have used c++ but not for a long
time. I am very impressed by the code I am looking at currently. If you
need help with stuff that you think would match my skills (release, code
verification, QA, whatever...) I have some free time and I need an
application better than ArcGIS because I loath toolboxes and you all have
shown me a much better UI. I am going to try to pick off bugs as I seem
them and perhaps start in on some blockers. If you need help with releases,
let me know. I have managed some very large ones (which was the main cause
for me to go back to school). Volunteering is so much more fun.

If you have some urgent stuff that needs to get done, let me know where to
look and I will start tackling problems when I have time.

Thanks all,
~Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130103/984c7e47/attachment.html>

From matthias.kuhn at gmx.ch  Thu Jan  3 23:51:14 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Fri, 04 Jan 2013 08:51:14 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
Message-ID: <50E689F2.2010505@gmx.ch>

Hi Larry,

What is the status of the vertical tabs? Do you still have a branch with 
them ready?

I noticed, that the new labelling dialog in the vector layer settings 
has two columns of tabs, which look a bit uncommon, and I'd see vertical 
tabs as a good replacement for either the first or the second level of 
tabs in this dialog.

Cheers,

Matthias

On 09/05/2012 09:10 PM, Larry Shaffer wrote:
> Hi,
>
> I've been working on reducing overall clutter and excess space, and
> trying to increase efficiency and extensibility, with options dialogs.
>
> Problems with current option dialogs' parent QTabWidget approach:
>
> * Tab widget uses unnecessary vertical space (bad for small screens).
> * Tab widget limits the use of reasonably needed tabs for option
> sections (avoiding tabs-within-tabs unfortunately trumps useability).
> * Horizontal parent tabs limit how many option sections can be offered
> (already too wide, without text truncation, on Mac).
> * Horizontal parent tabs dictate the width of the dialog, causing form
> layout elements to optically stretch too far apart.
>
>
> Possible solution: Move 'tabs' to simple list widget on left side of a
> splitter and have option sections loaded on right.
>
> I have done mockups for the app and vector layer options [0], which
> show the following advantages:
>
> * Vertical height is maximized without sacrificing layout of option
> section form elements (good for smaller screens).
> * Number of option sections is not graphically limited.
> * Number of option sections no longer dictates width of option section
> forms (forms look much better).
> * List item widget can have its splitter section collapsed to a set
> size to show only icons for sections.
> * Consistent look across platforms, with larger icons for sections.
> * More current 'look' for v 2.0 without too much work.
>
> Other than making the dialogs clearer and less cluttered IMHO, the
> full useability of the dialogs at smaller sizes helps the user see
> more map canvas when testing options with Apply.
>
> Any comments or suggestions?
>
> [0] https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
>
> Regards,
>
> Larry
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From cavallini at faunalia.it  Fri Jan  4 00:10:01 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 04 Jan 2013 09:10:01 +0100
Subject: [Qgis-developer] Hello, my name is Benedict Holland
In-Reply-To: <CAD+mzowoFg8B2ZNPciYadsmUjKnzHvfAa3EyvwjmCuW05BBM6Q@mail.gmail.com>
References: <CAD+mzowoFg8B2ZNPciYadsmUjKnzHvfAa3EyvwjmCuW05BBM6Q@mail.gmail.com>
Message-ID: <50E68E59.5070105@faunalia.it>

Il 04/01/2013 05:40, Benedict Holland ha scritto:

> If you have some urgent stuff that needs to get done, let me know where to look and I
> will start tackling problems when I have time. 

Hi Benedict,
thanks for your offer. I can suggest you to:
* have a look to our bugtracker http://hub.qgis.org/projects/quantum-gis/issues and
choose one of the issue that needs love
* when fixed, you can issue a pull request via GitHub, that will be revised by the
core team.
Our main issue for releasing QGIS 2.0 are:
  * Symbology: fix all major issues, remove the old implementation
  * Labelling: fix all major issues, remove the old implementation
  * New web site and docs: migrate fully to an rst-based system
  * SEXTANTE integration: test suite, bugx, stabilization
  * Interface cleanup and consistency
  * Plugins migration from old to new repo, and to the new API.
Please keep us updated on your progresses.
All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From madmanwoo at gmail.com  Fri Jan  4 06:12:23 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Sat, 5 Jan 2013 00:12:23 +1000
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <50E689F2.2010505@gmx.ch>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
Message-ID: <CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>

Larry,

If you do have time for this I too would really like to see this added. The
tabs situation is becoming a mess and is only going to get worse as we move
forward.  If you need some help I can lend a hand.

- Nathan


On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:

> Hi Larry,
>
> What is the status of the vertical tabs? Do you still have a branch with
> them ready?
>
> I noticed, that the new labelling dialog in the vector layer settings has
> two columns of tabs, which look a bit uncommon, and I'd see vertical tabs
> as a good replacement for either the first or the second level of tabs in
> this dialog.
>
> Cheers,
>
> Matthias
>
>
> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
>
>> Hi,
>>
>> I've been working on reducing overall clutter and excess space, and
>> trying to increase efficiency and extensibility, with options dialogs.
>>
>> Problems with current option dialogs' parent QTabWidget approach:
>>
>> * Tab widget uses unnecessary vertical space (bad for small screens).
>> * Tab widget limits the use of reasonably needed tabs for option
>> sections (avoiding tabs-within-tabs unfortunately trumps useability).
>> * Horizontal parent tabs limit how many option sections can be offered
>> (already too wide, without text truncation, on Mac).
>> * Horizontal parent tabs dictate the width of the dialog, causing form
>> layout elements to optically stretch too far apart.
>>
>>
>> Possible solution: Move 'tabs' to simple list widget on left side of a
>> splitter and have option sections loaded on right.
>>
>> I have done mockups for the app and vector layer options [0], which
>> show the following advantages:
>>
>> * Vertical height is maximized without sacrificing layout of option
>> section form elements (good for smaller screens).
>> * Number of option sections is not graphically limited.
>> * Number of option sections no longer dictates width of option section
>> forms (forms look much better).
>> * List item widget can have its splitter section collapsed to a set
>> size to show only icons for sections.
>> * Consistent look across platforms, with larger icons for sections.
>> * More current 'look' for v 2.0 without too much work.
>>
>> Other than making the dialogs clearer and less cluttered IMHO, the
>> full useability of the dialogs at smaller sizes helps the user see
>> more map canvas when testing options with Apply.
>>
>> Any comments or suggestions?
>>
>> [0] https://www.dropbox.com/sh/**yy0j3mmg4l4kw7x/Ar_S-eYqCv/**
>> qgis/options-dlgs?lst<https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst>
>>
>> Regards,
>>
>> Larry
>> ______________________________**_________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>
>
> ______________________________**_________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130105/221e4b76/attachment.html>

From dassau at gbd-consult.de  Fri Jan  4 06:51:46 2013
From: dassau at gbd-consult.de (Otto Dassau)
Date: Fri, 4 Jan 2013 15:51:46 +0100
Subject: [Qgis-developer] New case study about the Fundy Footpath Trail
Message-ID: <20130104155146.1335051e@nature.speedport.ip>

Dear Community,

I am pleased to announce a new case study, this time from the Fundy coast of
New Brunswick, Canada. 

There is a wonderful trail created, maintained, and promoted by a group of
volunteers known as the Fundy Hiking Trail Association Inc. (FHTA)(1975). As
a non-profit organization the FHTA raises funds for its activities through
the sale of guidebooks that include a trail map.

The case study is about creating the Fundy Footpath Trail Map with Quantum
GIS. Author is Jarrett Totton. He is a GIS Technologist living in Alberta,
Canada.

You find the case study here:
http://www.qgis.org/en/community/qgis-case-studies/new-brunswick-canada.html

Thank you very much for this contribution!

Kind Regards
Otto


From larrys at dakotacarto.com  Fri Jan  4 09:47:34 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Fri, 4 Jan 2013 10:47:34 -0700
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
Message-ID: <CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>

Hi Matthias and Nathan,

I was just about to bring this topic back up myself. :^) Yes, I can
work on this next (probably this weekend). I'll start with the main
app options dialog, cause it's the simplest.

Option dialog candidates to switch to vertical tabs (for
useability/consistency):
* App options
* Project options
* Vector and Raster layer properties


Matthias, do you think the new diagram options setup can be moved to
horizontal tabs, instead of a toolbox, once there are vertical tabs
for the vector dialog?


Nathan,
> ...  If you need some help I can lend a hand.

Remember that little custom toolbutton widget we chatted about for
data defined option overrides? (to the right of labeling options in
redesign [0]) I think you mentioned some kind of abstracted data
binding class that widgets like that could use or inherit. Such a
class, that worked with the new vector API, would be very handy and
greatly help with the labeling dialog redesign (and elsewhere). Do you
have some time to work on that?

See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at (14:44:28)

[0] http://drive.dakotacarto.com/qgis/labeling-redesign.png

Regards,

Larry


On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com> wrote:
> Larry,
>
> If you do have time for this I too would really like to see this added. The
> tabs situation is becoming a mess and is only going to get worse as we move
> forward.  If you need some help I can lend a hand.
>
> - Nathan
>
>
> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>>
>> Hi Larry,
>>
>> What is the status of the vertical tabs? Do you still have a branch with
>> them ready?
>>
>> I noticed, that the new labelling dialog in the vector layer settings has
>> two columns of tabs, which look a bit uncommon, and I'd see vertical tabs as
>> a good replacement for either the first or the second level of tabs in this
>> dialog.
>>
>> Cheers,
>>
>> Matthias
>>
>>
>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
>>>
>>> Hi,
>>>
>>> I've been working on reducing overall clutter and excess space, and
>>> trying to increase efficiency and extensibility, with options dialogs.
>>>
>>> Problems with current option dialogs' parent QTabWidget approach:
>>>
>>> * Tab widget uses unnecessary vertical space (bad for small screens).
>>> * Tab widget limits the use of reasonably needed tabs for option
>>> sections (avoiding tabs-within-tabs unfortunately trumps useability).
>>> * Horizontal parent tabs limit how many option sections can be offered
>>> (already too wide, without text truncation, on Mac).
>>> * Horizontal parent tabs dictate the width of the dialog, causing form
>>> layout elements to optically stretch too far apart.
>>>
>>>
>>> Possible solution: Move 'tabs' to simple list widget on left side of a
>>> splitter and have option sections loaded on right.
>>>
>>> I have done mockups for the app and vector layer options [0], which
>>> show the following advantages:
>>>
>>> * Vertical height is maximized without sacrificing layout of option
>>> section form elements (good for smaller screens).
>>> * Number of option sections is not graphically limited.
>>> * Number of option sections no longer dictates width of option section
>>> forms (forms look much better).
>>> * List item widget can have its splitter section collapsed to a set
>>> size to show only icons for sections.
>>> * Consistent look across platforms, with larger icons for sections.
>>> * More current 'look' for v 2.0 without too much work.
>>>
>>> Other than making the dialogs clearer and less cluttered IMHO, the
>>> full useability of the dialogs at smaller sizes helps the user see
>>> more map canvas when testing options with Apply.
>>>
>>> Any comments or suggestions?
>>>
>>> [0]
>>> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
>>>
>>> Regards,
>>>
>>> Larry
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>

From matthias.kuhn at gmx.ch  Fri Jan  4 09:50:16 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Fri, 04 Jan 2013 18:50:16 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
Message-ID: <50E71658.7020903@gmx.ch>

Hi Larry,

On 01/04/2013 06:47 PM, Larry Shaffer wrote:
> Hi Matthias and Nathan,
>
> I was just about to bring this topic back up myself. :^) Yes, I can
> work on this next (probably this weekend). I'll start with the main
> app options dialog, cause it's the simplest.
>
> Option dialog candidates to switch to vertical tabs (for
> useability/consistency):
> * App options
> * Project options
> * Vector and Raster layer properties
>
>
> Matthias, do you think the new diagram options setup can be moved to
> horizontal tabs, instead of a toolbox, once there are vertical tabs
> for the vector dialog?
This would be the preferred layout of this dialog for me. If you need me 
to do anything, please let me know.

Regards

>
>
> Nathan,
>> ...  If you need some help I can lend a hand.
> Remember that little custom toolbutton widget we chatted about for
> data defined option overrides? (to the right of labeling options in
> redesign [0]) I think you mentioned some kind of abstracted data
> binding class that widgets like that could use or inherit. Such a
> class, that worked with the new vector API, would be very handy and
> greatly help with the labeling dialog redesign (and elsewhere). Do you
> have some time to work on that?
>
> See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at (14:44:28)
>
> [0] http://drive.dakotacarto.com/qgis/labeling-redesign.png
>
> Regards,
>
> Larry
>
>
> On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com> wrote:
>> Larry,
>>
>> If you do have time for this I too would really like to see this added. The
>> tabs situation is becoming a mess and is only going to get worse as we move
>> forward.  If you need some help I can lend a hand.
>>
>> - Nathan
>>
>>
>> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>>> Hi Larry,
>>>
>>> What is the status of the vertical tabs? Do you still have a branch with
>>> them ready?
>>>
>>> I noticed, that the new labelling dialog in the vector layer settings has
>>> two columns of tabs, which look a bit uncommon, and I'd see vertical tabs as
>>> a good replacement for either the first or the second level of tabs in this
>>> dialog.
>>>
>>> Cheers,
>>>
>>> Matthias
>>>
>>>
>>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
>>>> Hi,
>>>>
>>>> I've been working on reducing overall clutter and excess space, and
>>>> trying to increase efficiency and extensibility, with options dialogs.
>>>>
>>>> Problems with current option dialogs' parent QTabWidget approach:
>>>>
>>>> * Tab widget uses unnecessary vertical space (bad for small screens).
>>>> * Tab widget limits the use of reasonably needed tabs for option
>>>> sections (avoiding tabs-within-tabs unfortunately trumps useability).
>>>> * Horizontal parent tabs limit how many option sections can be offered
>>>> (already too wide, without text truncation, on Mac).
>>>> * Horizontal parent tabs dictate the width of the dialog, causing form
>>>> layout elements to optically stretch too far apart.
>>>>
>>>>
>>>> Possible solution: Move 'tabs' to simple list widget on left side of a
>>>> splitter and have option sections loaded on right.
>>>>
>>>> I have done mockups for the app and vector layer options [0], which
>>>> show the following advantages:
>>>>
>>>> * Vertical height is maximized without sacrificing layout of option
>>>> section form elements (good for smaller screens).
>>>> * Number of option sections is not graphically limited.
>>>> * Number of option sections no longer dictates width of option section
>>>> forms (forms look much better).
>>>> * List item widget can have its splitter section collapsed to a set
>>>> size to show only icons for sections.
>>>> * Consistent look across platforms, with larger icons for sections.
>>>> * More current 'look' for v 2.0 without too much work.
>>>>
>>>> Other than making the dialogs clearer and less cluttered IMHO, the
>>>> full useability of the dialogs at smaller sizes helps the user see
>>>> more map canvas when testing options with Apply.
>>>>
>>>> Any comments or suggestions?
>>>>
>>>> [0]
>>>> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
>>>>
>>>> Regards,
>>>>
>>>> Larry
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>


From larrys at dakotacarto.com  Fri Jan  4 10:24:29 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Fri, 4 Jan 2013 11:24:29 -0700
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <50E71658.7020903@gmx.ch>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<50E71658.7020903@gmx.ch>
Message-ID: <CA+nQOR-TkXBdW6S1nSHbL09Awfux4Dx+2rH3nrbX0bh1Qb=RcA@mail.gmail.com>

On Fri, Jan 4, 2013 at 10:50 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
> Hi Larry,
>
> On 01/04/2013 06:47 PM, Larry Shaffer wrote:
>>
>> Hi Matthias and Nathan,
>>
>> I was just about to bring this topic back up myself. :^) Yes, I can
>> work on this next (probably this weekend). I'll start with the main
>> app options dialog, cause it's the simplest.
>>
>> Option dialog candidates to switch to vertical tabs (for
>> useability/consistency):
>> * App options
>> * Project options
>> * Vector and Raster layer properties
>>
>>
>> Matthias, do you think the new diagram options setup can be moved to
>> horizontal tabs, instead of a toolbox, once there are vertical tabs
>> for the vector dialog?
>
> This would be the preferred layout of this dialog for me. If you need me to
> do anything, please let me know.

I suppose you could switch that dialog to horz. tabs whenever, since
it is in a separate .ui file. It'll just be tabs-under-tabs until the
vector layer dialog is switched to vert. tabs (which IMO should
happen, unless there is serious objection to the results of the app
options dialog's switch). Unless, you want to wait until everyone is
OK with the switch, to keep from doing unnecessary work.

Regards,

Larry

> Regards
>
>>
>>
>> Nathan,
>>>
>>> ...  If you need some help I can lend a hand.
>>
>> Remember that little custom toolbutton widget we chatted about for
>> data defined option overrides? (to the right of labeling options in
>> redesign [0]) I think you mentioned some kind of abstracted data
>> binding class that widgets like that could use or inherit. Such a
>> class, that worked with the new vector API, would be very handy and
>> greatly help with the labeling dialog redesign (and elsewhere). Do you
>> have some time to work on that?
>>
>> See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at
>> (14:44:28)
>>
>> [0] http://drive.dakotacarto.com/qgis/labeling-redesign.png
>>
>> Regards,
>>
>> Larry
>>
>>
>> On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com>
>> wrote:
>>>
>>> Larry,
>>>
>>> If you do have time for this I too would really like to see this added.
>>> The
>>> tabs situation is becoming a mess and is only going to get worse as we
>>> move
>>> forward.  If you need some help I can lend a hand.
>>>
>>> - Nathan
>>>
>>>
>>> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch>
>>> wrote:
>>>>
>>>> Hi Larry,
>>>>
>>>> What is the status of the vertical tabs? Do you still have a branch with
>>>> them ready?
>>>>
>>>> I noticed, that the new labelling dialog in the vector layer settings
>>>> has
>>>> two columns of tabs, which look a bit uncommon, and I'd see vertical
>>>> tabs as
>>>> a good replacement for either the first or the second level of tabs in
>>>> this
>>>> dialog.
>>>>
>>>> Cheers,
>>>>
>>>> Matthias
>>>>
>>>>
>>>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
>>>>>
>>>>> Hi,
>>>>>
>>>>> I've been working on reducing overall clutter and excess space, and
>>>>> trying to increase efficiency and extensibility, with options dialogs.
>>>>>
>>>>> Problems with current option dialogs' parent QTabWidget approach:
>>>>>
>>>>> * Tab widget uses unnecessary vertical space (bad for small screens).
>>>>> * Tab widget limits the use of reasonably needed tabs for option
>>>>> sections (avoiding tabs-within-tabs unfortunately trumps useability).
>>>>> * Horizontal parent tabs limit how many option sections can be offered
>>>>> (already too wide, without text truncation, on Mac).
>>>>> * Horizontal parent tabs dictate the width of the dialog, causing form
>>>>> layout elements to optically stretch too far apart.
>>>>>
>>>>>
>>>>> Possible solution: Move 'tabs' to simple list widget on left side of a
>>>>> splitter and have option sections loaded on right.
>>>>>
>>>>> I have done mockups for the app and vector layer options [0], which
>>>>> show the following advantages:
>>>>>
>>>>> * Vertical height is maximized without sacrificing layout of option
>>>>> section form elements (good for smaller screens).
>>>>> * Number of option sections is not graphically limited.
>>>>> * Number of option sections no longer dictates width of option section
>>>>> forms (forms look much better).
>>>>> * List item widget can have its splitter section collapsed to a set
>>>>> size to show only icons for sections.
>>>>> * Consistent look across platforms, with larger icons for sections.
>>>>> * More current 'look' for v 2.0 without too much work.
>>>>>
>>>>> Other than making the dialogs clearer and less cluttered IMHO, the
>>>>> full useability of the dialogs at smaller sizes helps the user see
>>>>> more map canvas when testing options with Apply.
>>>>>
>>>>> Any comments or suggestions?
>>>>>
>>>>> [0]
>>>>>
>>>>> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
>>>>>
>>>>> Regards,
>>>>>
>>>>> Larry
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>

From wonder.sk at gmail.com  Fri Jan  4 12:52:42 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 4 Jan 2013 21:52:42 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
Message-ID: <CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>

Hi Larry

On Fri, Jan 4, 2013 at 6:47 PM, Larry Shaffer <larrys at dakotacarto.com> wrote:
> Hi Matthias and Nathan,
>
> I was just about to bring this topic back up myself. :^) Yes, I can
> work on this next (probably this weekend). I'll start with the main
> app options dialog, cause it's the simplest.

Great to hear that ;-)

I just wanted to add that I would also appreciate (for options dialog)
what Tim has already mentioned: the "advanced" tab with a property
list widget (something like [1]): we have lots of settings that are
very rarely used (and some of them are even hard to decipher for
developers!), so moving such clutter outside of regular tabs would
bring some fresh air to the options dialog. Of course this can be done
completely separately from what you're going to implement, just wanted
to point out that this would a welcome addition, too :-)

[1] http://www.myvirtualdisplay.com/wp/wp-content/uploads/2008/11/firefox_config.png

Regards
Martin

From wonder.sk at gmail.com  Fri Jan  4 13:19:57 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 4 Jan 2013 22:19:57 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <50E5514D.600@gmx.ch>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
Message-ID: <CAC2XbFd-38=DcFVSvvBG9XFMgAapOm5KndVBCMfjob9XdS23ag@mail.gmail.com>

Hi Matthias

thanks for your mail.

On Thu, Jan 3, 2013 at 10:37 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>
> You've been talking about updating to PyQt4 SIP version 2. I noticed this
> change did not yet happen. What are your plans regarding this update?

Yes, the plans are still there. I'm only wondering what would be the
best time to switch - right now within the branch or a bit later once
the branch is merged and the new code settles down a bit? I can see a
slight advantage of the latter approach of having a greater chance of
separating problems caused by the merge and problems caused by the SIP
API change, but I do not have a strong opinion here.


> I'm also looking forward to seeing QgsFeatureRequest support QgsExpression,
> I think this is not yet supported?

No, it's not yet supported. It should be possible to add features like
this one easily even later without breaking any API. It is not my
priority now, of course any contributions in that direction are
welcome! (and also for support of native expressions for postgres,
spatialite and other DBMSs)


> PS:
> I've just been able to segfault:
>
> a = dataProvider.getFeatures( QgsFeatureRequest().setFilterFid( featureId )
> )
> a.rewind()
> a.next()

Which provider was that? Just tried with OGR and memory providers and it worked.


> PPS:
> Another strange thing (maybe related), calling next() directly on a fid
> filter returns a feature, storing into a QgsFeatureIterator and calling next
> on this throws a StopIteration:
>
> dataProvider.getFeatures(QgsFeatureRequest().setFilterFid( featureId )
> ).next()
> <qgis.core.QgsFeature object at 0xaa027a0>
>
> features = dataProvider.getFeatures(QgsFeatureRequest().setFilterFid(
> featureId ) )
> f = features.next()
> Traceback (most recent call last):
>   File "/home/kk/.qgis//python/plugins/remotedebug/pysrc/pydevd_exec.py",
> line 2, in Exec
>     exec exp in global_vars, local_vars
>   File "<console>", line 1, in <module>
> StopIteration

Again, works for me correctly with OGR and memory provider - maybe
some provider other has that problem.


Regards
Martin

From matthias.kuhn at gmx.ch  Fri Jan  4 15:07:33 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Sat, 05 Jan 2013 00:07:33 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFd-38=DcFVSvvBG9XFMgAapOm5KndVBCMfjob9XdS23ag@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFd-38=DcFVSvvBG9XFMgAapOm5KndVBCMfjob9XdS23ag@mail.gmail.com>
Message-ID: <50E760B5.8020602@gmx.ch>

Hi Martin,

On 01/04/2013 10:19 PM, Martin Dobias wrote:
> Hi Matthias
>
> thanks for your mail.
>
> On Thu, Jan 3, 2013 at 10:37 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>> You've been talking about updating to PyQt4 SIP version 2. I noticed this
>> change did not yet happen. What are your plans regarding this update?
> Yes, the plans are still there. I'm only wondering what would be the
> best time to switch - right now within the branch or a bit later once
> the branch is merged and the new code settles down a bit? I can see a
> slight advantage of the latter approach of having a greater chance of
> separating problems caused by the merge and problems caused by the SIP
> API change, but I do not have a strong opinion here.
I think doing it now would be the best time, as the API is already and 
is even more going to be broken. For plugin devs it will probably be the 
easiest to take care only once. No strong opinion here either.
>> I'm also looking forward to seeing QgsFeatureRequest support QgsExpression,
>> I think this is not yet supported?
> No, it's not yet supported. It should be possible to add features like
> this one easily even later without breaking any API. It is not my
> priority now, of course any contributions in that direction are
> welcome! (and also for support of native expressions for postgres,
> spatialite and other DBMSs)
Maybe I find the time to take care of this.
What I would like to see (but I think that's a rather tough one): to 
make the providers translate QgsExpression to native backend commands. 
Although this can lead to some nasty side-effects.

>> PS:
>> I've just been able to segfault:
>>
>> a = dataProvider.getFeatures( QgsFeatureRequest().setFilterFid( featureId )
>> )
>> a.rewind()
>> a.next()
> Which provider was that? Just tried with OGR and memory providers and it worked.
>
>
>> PPS:
>> Another strange thing (maybe related), calling next() directly on a fid
>> filter returns a feature, storing into a QgsFeatureIterator and calling next
>> on this throws a StopIteration:
>>
>> dataProvider.getFeatures(QgsFeatureRequest().setFilterFid( featureId )
>> ).next()
>> <qgis.core.QgsFeature object at 0xaa027a0>
>>
>> features = dataProvider.getFeatures(QgsFeatureRequest().setFilterFid(
>> featureId ) )
>> f = features.next()
>> Traceback (most recent call last):
>>    File "/home/kk/.qgis//python/plugins/remotedebug/pysrc/pydevd_exec.py",
>> line 2, in Exec
>>      exec exp in global_vars, local_vars
>>    File "<console>", line 1, in <module>
>> StopIteration
> Again, works for me correctly with OGR and memory provider - maybe
> some provider other has that problem.
Both tests have been made with a postgres backend.

>
> Regards
> Martin
Regards
Matthias

From matthias.kuhn at gmx.ch  Fri Jan  4 15:47:53 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Sat, 05 Jan 2013 00:47:53 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+nQOR-TkXBdW6S1nSHbL09Awfux4Dx+2rH3nrbX0bh1Qb=RcA@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<50E71658.7020903@gmx.ch>
	<CA+nQOR-TkXBdW6S1nSHbL09Awfux4Dx+2rH3nrbX0bh1Qb=RcA@mail.gmail.com>
Message-ID: <50E76A29.5050308@gmx.ch>

On 01/04/2013 07:24 PM, Larry Shaffer wrote:
> On Fri, Jan 4, 2013 at 10:50 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>> Hi Larry,
>>
>> On 01/04/2013 06:47 PM, Larry Shaffer wrote:
>>> Hi Matthias and Nathan,
>>>
>>> I was just about to bring this topic back up myself. :^) Yes, I can
>>> work on this next (probably this weekend). I'll start with the main
>>> app options dialog, cause it's the simplest.
>>>
>>> Option dialog candidates to switch to vertical tabs (for
>>> useability/consistency):
>>> * App options
>>> * Project options
>>> * Vector and Raster layer properties
>>>
>>>
>>> Matthias, do you think the new diagram options setup can be moved to
>>> horizontal tabs, instead of a toolbox, once there are vertical tabs
>>> for the vector dialog?
>> This would be the preferred layout of this dialog for me. If you need me to
>> do anything, please let me know.
> I suppose you could switch that dialog to horz. tabs whenever, since
> it is in a separate .ui file. It'll just be tabs-under-tabs until the
> vector layer dialog is switched to vert. tabs (which IMO should
> happen, unless there is serious objection to the results of the app
> options dialog's switch). Unless, you want to wait until everyone is
> OK with the switch, to keep from doing unnecessary work.

I'll wait until the new tab layout is ready and change the dialog style 
then. It should be a very simple task, I already changed this dialog 
from tabs to toolbox once before.

Regards,
Matthias
>
> Regards,
>
> Larry
>
>> Regards
>>
>>>
>>> Nathan,
>>>> ...  If you need some help I can lend a hand.
>>> Remember that little custom toolbutton widget we chatted about for
>>> data defined option overrides? (to the right of labeling options in
>>> redesign [0]) I think you mentioned some kind of abstracted data
>>> binding class that widgets like that could use or inherit. Such a
>>> class, that worked with the new vector API, would be very handy and
>>> greatly help with the labeling dialog redesign (and elsewhere). Do you
>>> have some time to work on that?
>>>
>>> See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at
>>> (14:44:28)
>>>
>>> [0] http://drive.dakotacarto.com/qgis/labeling-redesign.png
>>>
>>> Regards,
>>>
>>> Larry
>>>
>>>
>>> On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com>
>>> wrote:
>>>> Larry,
>>>>
>>>> If you do have time for this I too would really like to see this added.
>>>> The
>>>> tabs situation is becoming a mess and is only going to get worse as we
>>>> move
>>>> forward.  If you need some help I can lend a hand.
>>>>
>>>> - Nathan
>>>>
>>>>
>>>> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch>
>>>> wrote:
>>>>> Hi Larry,
>>>>>
>>>>> What is the status of the vertical tabs? Do you still have a branch with
>>>>> them ready?
>>>>>
>>>>> I noticed, that the new labelling dialog in the vector layer settings
>>>>> has
>>>>> two columns of tabs, which look a bit uncommon, and I'd see vertical
>>>>> tabs as
>>>>> a good replacement for either the first or the second level of tabs in
>>>>> this
>>>>> dialog.
>>>>>
>>>>> Cheers,
>>>>>
>>>>> Matthias
>>>>>
>>>>>
>>>>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
>>>>>> Hi,
>>>>>>
>>>>>> I've been working on reducing overall clutter and excess space, and
>>>>>> trying to increase efficiency and extensibility, with options dialogs.
>>>>>>
>>>>>> Problems with current option dialogs' parent QTabWidget approach:
>>>>>>
>>>>>> * Tab widget uses unnecessary vertical space (bad for small screens).
>>>>>> * Tab widget limits the use of reasonably needed tabs for option
>>>>>> sections (avoiding tabs-within-tabs unfortunately trumps useability).
>>>>>> * Horizontal parent tabs limit how many option sections can be offered
>>>>>> (already too wide, without text truncation, on Mac).
>>>>>> * Horizontal parent tabs dictate the width of the dialog, causing form
>>>>>> layout elements to optically stretch too far apart.
>>>>>>
>>>>>>
>>>>>> Possible solution: Move 'tabs' to simple list widget on left side of a
>>>>>> splitter and have option sections loaded on right.
>>>>>>
>>>>>> I have done mockups for the app and vector layer options [0], which
>>>>>> show the following advantages:
>>>>>>
>>>>>> * Vertical height is maximized without sacrificing layout of option
>>>>>> section form elements (good for smaller screens).
>>>>>> * Number of option sections is not graphically limited.
>>>>>> * Number of option sections no longer dictates width of option section
>>>>>> forms (forms look much better).
>>>>>> * List item widget can have its splitter section collapsed to a set
>>>>>> size to show only icons for sections.
>>>>>> * Consistent look across platforms, with larger icons for sections.
>>>>>> * More current 'look' for v 2.0 without too much work.
>>>>>>
>>>>>> Other than making the dialogs clearer and less cluttered IMHO, the
>>>>>> full useability of the dialogs at smaller sizes helps the user see
>>>>>> more map canvas when testing options with Apply.
>>>>>>
>>>>>> Any comments or suggestions?
>>>>>>
>>>>>> [0]
>>>>>>
>>>>>> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
>>>>>>
>>>>>> Regards,
>>>>>>
>>>>>> Larry
>>>>>> _______________________________________________
>>>>>> Qgis-developer mailing list
>>>>>> Qgis-developer at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>


From cavallini at faunalia.it  Fri Jan  4 22:37:00 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 05 Jan 2013 07:37:00 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
Message-ID: <50E7CA0C.2000700@faunalia.it>

Il 04/01/2013 21:52, Martin Dobias ha scritto:

> I just wanted to add that I would also appreciate (for options dialog)
> what Tim has already mentioned: the "advanced" tab with a property
> list widget (something like [1]): we have lots of settings that are
> very rarely used (and some of them are even hard to decipher for
> developers!), so moving such clutter outside of regular tabs would
> bring some fresh air to the options dialog.

Agreed, a general cleanup would be very good.
I suggest asking users or course teachers to know which options are more rarely used.
Thanks.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From chinazhangly at 126.com  Fri Jan  4 22:36:51 2013
From: chinazhangly at 126.com (zhangliye)
Date: Sat, 5 Jan 2013 14:36:51 +0800 (CST)
Subject: [Qgis-developer] help. PyTables does not work in Qgis python plugin
Message-ID: <4338644f.86e2.13c096d1cdd.Coremail.chinazhangly@126.com>

Dear all,
I am developing a Qgis python plugin using PyTables 2.4. There is an error when starting Qgis main application. I checked the error message and found that there is an error when call 'import tables'  because some dll cannot be loaded.  
But when I run the python not in Qgis environment, PyTables works correctly.
I also open the Qgis console window and input 'import tables'. The error message is the same, saying that some dll cannot be loaded.


when I start Qgis with my own Python plugin, the error message is as following:


Couldn't load plugin UAV due an error when calling its classFactory() method

Traceback (most recent call last):
  File "C:/PROGRA~2/Quantum GIS Wroclaw/apps/qgis/./python\qgis\utils.py", line 138, in startPlugin
    plugins[packageName] = package.classFactory(iface)
  File "C:\PROGRA~2\Quantum GIS Wroclaw\apps\qgis\python\plugins\UAV\__init__.py", line 24, in classFactory
    from UAV import UAV
  File "C:/PROGRA~2/Quantum GIS Wroclaw/apps/qgis/./python\qgis\utils.py", line 283, in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
  File "C:\PROGRA~2\Quantum GIS Wroclaw\apps\qgis\python\plugins\UAV\UAV\UAV.py", line 18, in
    from newprojectdlg import NewPorjectDlg
  File "C:/PROGRA~2/Quantum GIS Wroclaw/apps/qgis/./python\qgis\utils.py", line 283, in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
  File "C:\PROGRA~2\Quantum GIS Wroclaw\apps\qgis\python\plugins\UAV\UAV\gui\newprojectdlg.py", line 6, in
    import uav_tables
  File "C:/PROGRA~2/Quantum GIS Wroclaw/apps/qgis/./python\qgis\utils.py", line 283, in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
  File "C:\PROGRA~2\Quantum GIS Wroclaw\apps\qgis\python\plugins\UAV\UAV\data_table\uav_tables.py", line 3, in
    from tables import *
  File "C:/PROGRA~2/Quantum GIS Wroclaw/apps/qgis/./python\qgis\utils.py", line 283, in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
  File "C:\PROGRA~2\Quantum GIS Wroclaw\apps\Python27\lib\site-packages\tables\__init__.py", line 69, in
    from tables.utilsExtension import getPyTablesVersion, getHDF5Version
  File "C:/PROGRA~2/Quantum GIS Wroclaw/apps/qgis/./python\qgis\utils.py", line 283, in _import
    mod = _builtin_import(name, globals, locals, fromlist, level)
ImportError: DLL load failed: The specified procedure could not be found.


I have reinstall the pytable and also try the version 2.3, 2.2 and 2.1.  I also add the tables package path to the system 'path'  environment variable. The errors are still the same.  PyTables works correctly in standard python environment, but failed in Qgis python environment.  
I am not familiar with Qgis embedded python.Could any one help me on this.


--


Sincerely: Liye Zhang

University of Florida, Gainesville, Florida, USA
School of Traffic and Transportation, Tongji University, China.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130105/b03701e2/attachment-0001.html>

From wonder.sk at gmail.com  Sat Jan  5 02:09:18 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sat, 5 Jan 2013 11:09:18 +0100
Subject: [Qgis-developer] help. PyTables does not work in Qgis python
	plugin
In-Reply-To: <4338644f.86e2.13c096d1cdd.Coremail.chinazhangly@126.com>
References: <4338644f.86e2.13c096d1cdd.Coremail.chinazhangly@126.com>
Message-ID: <CAC2XbFeEfdx0vgEV-MD416uXWdGc7svpm=ZghqiSg8F0J+VnQQ@mail.gmail.com>

Hi

On Sat, Jan 5, 2013 at 7:36 AM, zhangliye <chinazhangly at 126.com> wrote:
> [...]
> Wroclaw\apps\qgis\python\plugins\UAV\UAV\data_table\uav_tables.py", line 3,
> in
>     from tables import *
>   File "C:/PROGRA~2/Quantum GIS Wroclaw/apps/qgis/./python\qgis\utils.py",
> line 283, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
>   File "C:\PROGRA~2\Quantum GIS
> Wroclaw\apps\Python27\lib\site-packages\tables\__init__.py", line 69, in
>     from tables.utilsExtension import getPyTablesVersion, getHDF5Version
>   File "C:/PROGRA~2/Quantum GIS Wroclaw/apps/qgis/./python\qgis\utils.py",
> line 283, in _import
>     mod = _builtin_import(name, globals, locals, fromlist, level)
> ImportError: DLL load failed: The specified procedure could not be found.

This bug report [1] suggests there may be a conflicting HDF5 library
in your path. As far as I know, GDAL (loaded by QGIS) uses HDF
library, so that could be the reason. It would be good to check if the
error disappears if GDAL is compiled without HDF support.

[1] http://code.google.com/p/winpython/issues/detail?id=22

Martin

From etourigny.dev at gmail.com  Sat Jan  5 06:46:36 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 5 Jan 2013 12:46:36 -0200
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
Message-ID: <CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>

On Fri, Jan 4, 2013 at 6:52 PM, Martin Dobias <wonder.sk at gmail.com> wrote:
> Hi Larry
>
> On Fri, Jan 4, 2013 at 6:47 PM, Larry Shaffer <larrys at dakotacarto.com> wrote:
>> Hi Matthias and Nathan,
>>
>> I was just about to bring this topic back up myself. :^) Yes, I can
>> work on this next (probably this weekend). I'll start with the main
>> app options dialog, cause it's the simplest.
>
> Great to hear that ;-)
>
> I just wanted to add that I would also appreciate (for options dialog)
> what Tim has already mentioned: the "advanced" tab with a property
> list widget (something like [1]): we have lots of settings that are
> very rarely used (and some of them are even hard to decipher for
> developers!), so moving such clutter outside of regular tabs would
> bring some fresh air to the options dialog. Of course this can be done
> completely separately from what you're going to implement, just wanted
> to point out that this would a welcome addition, too :-)
>
> [1] http://www.myvirtualdisplay.com/wp/wp-content/uploads/2008/11/firefox_config.png


I have in the past written a simple widget based on QT Settings editor
example [0].
It does exactly what you mention.

I can try to dig up that code, post a screenshot and create a pull
request for others to review.

[0] http://doc.qt.digia.com/qt/tools-settingseditor.html

Etienne

>
> Regards
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From etourigny.dev at gmail.com  Sat Jan  5 08:11:04 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 5 Jan 2013 14:11:04 -0200
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
	<CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>
Message-ID: <CA+TxYvNnvaho4NamkX+Tn4jD7pbqiQ7j6g7LMz6feqgMx-Y=kw@mail.gmail.com>

On Sat, Jan 5, 2013 at 12:46 PM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> On Fri, Jan 4, 2013 at 6:52 PM, Martin Dobias <wonder.sk at gmail.com> wrote:
>> Hi Larry
>>
>> On Fri, Jan 4, 2013 at 6:47 PM, Larry Shaffer <larrys at dakotacarto.com> wrote:
>>> Hi Matthias and Nathan,
>>>
>>> I was just about to bring this topic back up myself. :^) Yes, I can
>>> work on this next (probably this weekend). I'll start with the main
>>> app options dialog, cause it's the simplest.
>>
>> Great to hear that ;-)
>>
>> I just wanted to add that I would also appreciate (for options dialog)
>> what Tim has already mentioned: the "advanced" tab with a property
>> list widget (something like [1]): we have lots of settings that are
>> very rarely used (and some of them are even hard to decipher for
>> developers!), so moving such clutter outside of regular tabs would
>> bring some fresh air to the options dialog. Of course this can be done
>> completely separately from what you're going to implement, just wanted
>> to point out that this would a welcome addition, too :-)
>>
>> [1] http://www.myvirtualdisplay.com/wp/wp-content/uploads/2008/11/firefox_config.png
>
>
> I have in the past written a simple widget based on QT Settings editor
> example [0].
> It does exactly what you mention.
>
> I can try to dig up that code, post a screenshot and create a pull
> request for others to review.
>
> [0] http://doc.qt.digia.com/qt/tools-settingseditor.html
>
> Etienne

I have pushed this to my branch
https://github.com/etiennesky/Quantum-GIS/tree/settingseditor

Attached is a screenshot - first basic implementation is a standalone
dialog that can be opened in Settings->Settings Editor.

It allows to edit existing settings keys only, but could be modified
to include non-existing keys also.

It needs improvements for non-string keys (such as bool or integer
values with special meanings), because it treats most values as string
and uses only lineedits for changing values.

Cheers
Etienne

>
>>
>> Regards
>> Martin
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: settingseditor.jpg
Type: image/jpeg
Size: 54144 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130105/506d983f/attachment-0001.jpg>

From a.neumann at carto.net  Sat Jan  5 09:20:17 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Sat, 05 Jan 2013 18:20:17 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+TxYvNnvaho4NamkX+Tn4jD7pbqiQ7j6g7LMz6feqgMx-Y=kw@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
	<CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>
	<CA+TxYvNnvaho4NamkX+Tn4jD7pbqiQ7j6g7LMz6feqgMx-Y=kw@mail.gmail.com>
Message-ID: <50E860D1.7030303@carto.net>

Hi Etienne,

This looks cool.

It would be very nice if one could search within this tree editor - and
if the settings could have a more descriptive text as well as well as
alternative tags if one only knows the term a bit fuzzy.

Do you think that a search and a "fuzzy search" could be added?

Where do you get the list of properties from? Could tags and descriptive
text be added to these settings?

Thanks,
Andreas

Am 05.01.2013 17:11, schrieb Etienne Tourigny:
> On Sat, Jan 5, 2013 at 12:46 PM, Etienne Tourigny
> <etourigny.dev at gmail.com> wrote:
>> On Fri, Jan 4, 2013 at 6:52 PM, Martin Dobias <wonder.sk at gmail.com> wrote:
>>> Hi Larry
>>>
>>> On Fri, Jan 4, 2013 at 6:47 PM, Larry Shaffer <larrys at dakotacarto.com> wrote:
>>>> Hi Matthias and Nathan,
>>>>
>>>> I was just about to bring this topic back up myself. :^) Yes, I can
>>>> work on this next (probably this weekend). I'll start with the main
>>>> app options dialog, cause it's the simplest.
>>>
>>> Great to hear that ;-)
>>>
>>> I just wanted to add that I would also appreciate (for options dialog)
>>> what Tim has already mentioned: the "advanced" tab with a property
>>> list widget (something like [1]): we have lots of settings that are
>>> very rarely used (and some of them are even hard to decipher for
>>> developers!), so moving such clutter outside of regular tabs would
>>> bring some fresh air to the options dialog. Of course this can be done
>>> completely separately from what you're going to implement, just wanted
>>> to point out that this would a welcome addition, too :-)
>>>
>>> [1] http://www.myvirtualdisplay.com/wp/wp-content/uploads/2008/11/firefox_config.png
>>
>>
>> I have in the past written a simple widget based on QT Settings editor
>> example [0].
>> It does exactly what you mention.
>>
>> I can try to dig up that code, post a screenshot and create a pull
>> request for others to review.
>>
>> [0] http://doc.qt.digia.com/qt/tools-settingseditor.html
>>
>> Etienne
> 
> I have pushed this to my branch
> https://github.com/etiennesky/Quantum-GIS/tree/settingseditor
> 
> Attached is a screenshot - first basic implementation is a standalone
> dialog that can be opened in Settings->Settings Editor.
> 
> It allows to edit existing settings keys only, but could be modified
> to include non-existing keys also.
> 
> It needs improvements for non-string keys (such as bool or integer
> values with special meanings), because it treats most values as string
> and uses only lineedits for changing values.
> 
> Cheers
> Etienne
> 
>>
>>>
>>> Regards
>>> Martin
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From etourigny.dev at gmail.com  Sat Jan  5 09:55:28 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 5 Jan 2013 15:55:28 -0200
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <50E860D1.7030303@carto.net>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
	<CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>
	<CA+TxYvNnvaho4NamkX+Tn4jD7pbqiQ7j6g7LMz6feqgMx-Y=kw@mail.gmail.com>
	<50E860D1.7030303@carto.net>
Message-ID: <CA+TxYvMdM9TsqG6B2jr5BvCKwiSi-QU0A9RC9F-scQu7Eb+QMQ@mail.gmail.com>

On Sat, Jan 5, 2013 at 3:20 PM, Andreas Neumann <a.neumann at carto.net> wrote:
> Hi Etienne,
>
> This looks cool.
>
> It would be very nice if one could search within this tree editor - and
> if the settings could have a more descriptive text as well as well as
> alternative tags if one only knows the term a bit fuzzy.
>
> Do you think that a search and a "fuzzy search" could be added?

a search based on settings key could be done easily, for the rest see below.

>
> Where do you get the list of properties from? Could tags and descriptive
> text be added to these settings?

Actually they are read from the settings file / registry by QSettings.
So anything not in the user's setting does not show up.

Anything more complex such as you mention would require a csv or xml
file with description and tags for each settings key.
A csv file would be easier to write and maintain, but an xml file
would be easier to parse I guess. Unless someone can point me to
a handy xml editor or csv-to-xml tool.

Another thing that would be nice would be the possible values that a
setting can take, in a dictionnary (key=value pairs) style.
(e.g. 0="value1";1="value2")

Etienne

>
> Thanks,
> Andreas
>
> Am 05.01.2013 17:11, schrieb Etienne Tourigny:
>> On Sat, Jan 5, 2013 at 12:46 PM, Etienne Tourigny
>> <etourigny.dev at gmail.com> wrote:
>>> On Fri, Jan 4, 2013 at 6:52 PM, Martin Dobias <wonder.sk at gmail.com> wrote:
>>>> Hi Larry
>>>>
>>>> On Fri, Jan 4, 2013 at 6:47 PM, Larry Shaffer <larrys at dakotacarto.com> wrote:
>>>>> Hi Matthias and Nathan,
>>>>>
>>>>> I was just about to bring this topic back up myself. :^) Yes, I can
>>>>> work on this next (probably this weekend). I'll start with the main
>>>>> app options dialog, cause it's the simplest.
>>>>
>>>> Great to hear that ;-)
>>>>
>>>> I just wanted to add that I would also appreciate (for options dialog)
>>>> what Tim has already mentioned: the "advanced" tab with a property
>>>> list widget (something like [1]): we have lots of settings that are
>>>> very rarely used (and some of them are even hard to decipher for
>>>> developers!), so moving such clutter outside of regular tabs would
>>>> bring some fresh air to the options dialog. Of course this can be done
>>>> completely separately from what you're going to implement, just wanted
>>>> to point out that this would a welcome addition, too :-)
>>>>
>>>> [1] http://www.myvirtualdisplay.com/wp/wp-content/uploads/2008/11/firefox_config.png
>>>
>>>
>>> I have in the past written a simple widget based on QT Settings editor
>>> example [0].
>>> It does exactly what you mention.
>>>
>>> I can try to dig up that code, post a screenshot and create a pull
>>> request for others to review.
>>>
>>> [0] http://doc.qt.digia.com/qt/tools-settingseditor.html
>>>
>>> Etienne
>>
>> I have pushed this to my branch
>> https://github.com/etiennesky/Quantum-GIS/tree/settingseditor
>>
>> Attached is a screenshot - first basic implementation is a standalone
>> dialog that can be opened in Settings->Settings Editor.
>>
>> It allows to edit existing settings keys only, but could be modified
>> to include non-existing keys also.
>>
>> It needs improvements for non-string keys (such as bool or integer
>> values with special meanings), because it treats most values as string
>> and uses only lineedits for changing values.
>>
>> Cheers
>> Etienne
>>
>>>
>>>>
>>>> Regards
>>>> Martin
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From a.neumann at carto.net  Sat Jan  5 13:48:40 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Sat, 05 Jan 2013 22:48:40 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+TxYvMdM9TsqG6B2jr5BvCKwiSi-QU0A9RC9F-scQu7Eb+QMQ@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
	<CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>
	<CA+TxYvNnvaho4NamkX+Tn4jD7pbqiQ7j6g7LMz6feqgMx-Y=kw@mail.gmail.com>
	<50E860D1.7030303@carto.net>
	<CA+TxYvMdM9TsqG6B2jr5BvCKwiSi-QU0A9RC9F-scQu7Eb+QMQ@mail.gmail.com>
Message-ID: <50E89FB8.508@carto.net>

Hi,

See my reply inline.

>> Where do you get the list of properties from? Could tags and descriptive
>> text be added to these settings?
> 
> Actually they are read from the settings file / registry by QSettings.
> So anything not in the user's setting does not show up.

ok

> Anything more complex such as you mention would require a csv or xml
> file with description and tags for each settings key.
> A csv file would be easier to write and maintain, but an xml file
> would be easier to parse I guess. Unless someone can point me to
> a handy xml editor or csv-to-xml tool.

Ok - we would also need multi-language titles and tags and it should be
easily translatable. Can we re-use some existing file for that purpose
and extend it with the tags for the fuzzy search?

> Another thing that would be nice would be the possible values that a
> setting can take, in a dictionnary (key=value pairs) style.
> (e.g. 0="value1";1="value2")

yes - it should also be possible to manually add/change settings that
one could read/write per python script.

Andreas

From a.neumann at carto.net  Sat Jan  5 14:12:33 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Sat, 05 Jan 2013 23:12:33 +0100
Subject: [Qgis-developer] Spatial queries plugin should ignore very small
	intersections
Message-ID: <50E8A551.70002@carto.net>

Hi,

I am starting to use the "spatial query" plugin and came across a
problem where there are very small intersections I want to ignore.

As an example I am testing parcels and buildings for intersection.
However, the input data is not perfect and I get parcels selected where
there is only a very small intersection between an edge of a building
(e.g. less than a square meter). Therefore I get parcels selected that I
really don't want to be selected.

Could the plugin be extended so that only geometries will be selected
where there is a user-definable minimum intersection area (in case one
is tests polygons against polygons) or a minimum intersection length (in
case one is testing lines against polygons).

I may be able to fund work on it if someone is able to work on it.

Thanks,
Andreas

From benedict.m.holland at gmail.com  Sat Jan  5 15:37:12 2013
From: benedict.m.holland at gmail.com (Benedict Holland)
Date: Sat, 5 Jan 2013 18:37:12 -0500
Subject: [Qgis-developer] Multiple Data Frames
Message-ID: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>

Hi All,

I just stumbled across this bit from Nathans blog:
http://woostuff.wordpress.com/2011/05/17/the-things-i-would-like-to-see-in-qgis-what-are-yours/

I was wondering if there was someone working on Data Frames and being able
to load multiple data frames into the presenter (exactly like ArcGIS). The
best use case for this exact feature is to get the extent marker for an
area locator in the main map. Something along the lines of a main map with
a tiny area map in the corner displaying the location of the current map.
You see, I actually do need this feature to exist which would make it quite
high on priorities to try to tackle. Also, do you know where I should start
looking and what areas of the code tree I would be working in? I am not
sure if this should start out as a plugin either since I have a feeling I
would end up creating a top level object made up of layers and I am not
sure how well that would fit into a plugin like interface. Of course, I
don't have any skills programming a plugin for anything anyway but I
can re-factor code and design a template for a code review.

Also, how do code reviews happen? I would love to get any input on what
this sort of thing should look like and what features people would
generally want from a "Data Frame" like object and have the class
interfaces reviewed before I start tackling the hard work.

Thanks all,
~Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130105/cd846351/attachment.html>

From giohappy at gmail.com  Sat Jan  5 15:50:44 2013
From: giohappy at gmail.com (G. Allegri)
Date: Sun, 6 Jan 2013 00:50:44 +0100
Subject: [Qgis-developer] Multiple Data Frames
In-Reply-To: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>
References: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>
Message-ID: <CAB4g1=x8KWxF_+nCrmtA8dtrHG_fkaJyW7xb1cGpuWRLVB3L1Q@mail.gmail.com>

Hi Benedict,
besides the data frames cincepr, which would useful in many circumstances,
aren't describing an overview map? It already exists in QGis. Probably I
misunderstood your requirement...

Giovanni

Sent from Nexus
Il giorno 06/gen/2013 00:37, "Benedict Holland" <
benedict.m.holland at gmail.com> ha scritto:

> Hi All,
>
> I just stumbled across this bit from Nathans blog:
>
> http://woostuff.wordpress.com/2011/05/17/the-things-i-would-like-to-see-in-qgis-what-are-yours/
>
> I was wondering if there was someone working on Data Frames and being able
> to load multiple data frames into the presenter (exactly like ArcGIS). The
> best use case for this exact feature is to get the extent marker for an
> area locator in the main map. Something along the lines of a main map with
> a tiny area map in the corner displaying the location of the current map.
> You see, I actually do need this feature to exist which would make it quite
> high on priorities to try to tackle. Also, do you know where I should start
> looking and what areas of the code tree I would be working in? I am not
> sure if this should start out as a plugin either since I have a feeling I
> would end up creating a top level object made up of layers and I am not
> sure how well that would fit into a plugin like interface. Of course, I
> don't have any skills programming a plugin for anything anyway but I
> can re-factor code and design a template for a code review.
>
> Also, how do code reviews happen? I would love to get any input on what
> this sort of thing should look like and what features people would
> generally want from a "Data Frame" like object and have the class
> interfaces reviewed before I start tackling the hard work.
>
> Thanks all,
> ~Ben
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130106/cc12f3db/attachment.html>

From vinayan123 at gmail.com  Sun Jan  6 00:55:21 2013
From: vinayan123 at gmail.com (vinayan)
Date: Sun, 06 Jan 2013 14:25:21 +0530
Subject: [Qgis-developer] New MapTool(Rotate Features)
Message-ID: <50E93BF9.4090006@gmail.com>

Hi all,

I have created a new MapTool(c++) for rotating multiple selected 
features interactively using mouse 
movement(https://github.com/qgis/Quantum-GIS/pull/376).

Normal Usage:
Select features on map.
Press mouse and drag to rotate about the selected features' 
bounding-box's center.

Advanced Usage:

User can decide which point should be the anchor point to rotate about. 
A cross appears on the center of bounding-box of selected features by 
default. Hold "Control" key and move mouse(no pressing) to move this 
cross to the desired anchor position. Release "Control" key to fix the 
anchor. Now press and drag mouse to rotate about this new anchor.


A very special thanks to Nathan Woodrow for his support on irc channel. 
I had really messed my branching/commits big time and his help was very 
important.

Thanks
Vinayan



From regis.haubourg at eau-adour-garonne.fr  Sun Jan  6 02:01:31 2013
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Sun, 6 Jan 2013 02:01:31 -0800 (PST)
Subject: [Qgis-developer] Multiple Data Frames
In-Reply-To: <CAB4g1=x8KWxF_+nCrmtA8dtrHG_fkaJyW7xb1cGpuWRLVB3L1Q@mail.gmail.com>
References: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>
	<CAB4g1=x8KWxF_+nCrmtA8dtrHG_fkaJyW7xb1cGpuWRLVB3L1Q@mail.gmail.com>
Message-ID: <1357466491245-5025807.post@n6.nabble.com>

Hi Benedict, 
I really would like to have one day data frames too. It would really
simplify multimap composers and label tuning for paper dedicated maps. 
In current state, user has to play with 'lock layer' option and switch from
mapcanvas to mapcomposer a lot of times to finalize a good map composer..
And when dealing with data defined labels, it is actually impossible to view
mapcanvas in paper units, so that moving labels by hand is a try-error game.
No fun, time consuming, never reaching a good result. 

I have proposed it couple of times in mailing lists. I guess this is a heavy
change in API. It is a very good candidate for a new major version to me.
What do other thinks of it in a user point of view / dev complexity?
R?gis





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Multiple-Data-Frames-tp5025790p5025807.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From regis.haubourg at eau-adour-garonne.fr  Sun Jan  6 02:09:01 2013
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Sun, 6 Jan 2013 02:09:01 -0800 (PST)
Subject: [Qgis-developer] Spatial queries plugin should ignore very
	small intersections
In-Reply-To: <50E8A551.70002@carto.net>
References: <50E8A551.70002@carto.net>
Message-ID: <1357466941629-5025809.post@n6.nabble.com>

Hi Andreas, 
+1 for me.  
Tolerance threshold should be square units ( area) for polygon - polygons
intersects,  and simple units  (length) for line-polygon intersections. 

Beyond that, I had in mind to fund a GUI and performance evolution of
spatial query tool. It is not very fast, and user interface is really hard
to understand for simple users. And it is the first feature I use to help
newcomers to understand GIS tools capacities. 
It also often fails when using non shp formats, or having bad geometries. We
should couple this tool with a geometry cleaning tool, raising a list of
errors and automated corrections made. So means adding a clean option to
'check geometry' tool. 

R?gis



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Spatial-queries-plugin-should-ignore-very-small-intersections-tp5025788p5025809.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From a.neumann at carto.net  Sun Jan  6 02:13:27 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Sun, 06 Jan 2013 11:13:27 +0100
Subject: [Qgis-developer] Multiple Data Frames
In-Reply-To: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>
References: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>
Message-ID: <50E94E47.7080404@carto.net>

Hi Benedict,

As Giovanni said - an overview map element (which seems to be what you
describe) is already there in QGIS master - not in version 1.8.

Multiple views in one QGIS project would be very nice to have - I
wouldn't call it data frames - just because ESRI calls them data frames
- we should develop our own concepts.

However, it seems like it is not trivial to implement at all - it would
be a major undertaking as many pieces in the QGIS code would have to be
rewritten as they don't know how to deal with multiple views.

Andreas


Am 06.01.2013 00:37, schrieb Benedict Holland:
> Hi All,
> 
> I just stumbled across this bit from Nathans blog:
> http://woostuff.wordpress.com/2011/05/17/the-things-i-would-like-to-see-in-qgis-what-are-yours/
> 
> I was wondering if there was someone working on Data Frames and being able
> to load multiple data frames into the presenter (exactly like ArcGIS). The
> best use case for this exact feature is to get the extent marker for an
> area locator in the main map. Something along the lines of a main map with
> a tiny area map in the corner displaying the location of the current map.
> You see, I actually do need this feature to exist which would make it quite
> high on priorities to try to tackle. Also, do you know where I should start
> looking and what areas of the code tree I would be working in? I am not
> sure if this should start out as a plugin either since I have a feeling I
> would end up creating a top level object made up of layers and I am not
> sure how well that would fit into a plugin like interface. Of course, I
> don't have any skills programming a plugin for anything anyway but I
> can re-factor code and design a template for a code review.
> 
> Also, how do code reviews happen? I would love to get any input on what
> this sort of thing should look like and what features people would
> generally want from a "Data Frame" like object and have the class
> interfaces reviewed before I start tackling the hard work.
> 
> Thanks all,
> ~Ben
> 
> 
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From a.neumann at carto.net  Sun Jan  6 02:20:30 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Sun, 06 Jan 2013 11:20:30 +0100
Subject: [Qgis-developer] Spatial queries plugin should ignore very
 small intersections
In-Reply-To: <1357466941629-5025809.post@n6.nabble.com>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
Message-ID: <50E94FEE.9060209@carto.net>

Am 06.01.2013 11:09, schrieb R?gis Haubourg:
> Hi Andreas, 
> +1 for me.  
> Tolerance threshold should be square units ( area) for polygon - polygons
> intersects,  and simple units  (length) for line-polygon intersections. 

yes

> Beyond that, I had in mind to fund a GUI and performance evolution of
> spatial query tool. It is not very fast, and user interface is really hard
> to understand for simple users. And it is the first feature I use to help
> newcomers to understand GIS tools capacities. 
> It also often fails when using non shp formats, or having bad geometries. We
> should couple this tool with a geometry cleaning tool, raising a list of
> errors and automated corrections made. So means adding a clean option to
> 'check geometry' tool.

true - there is a geometry validation tool to detect these invalid
geometries but no cleaning tools available.

So how do we proceed here. Do you want to start writing a specification
for improving the spatial query plugin and the cleaning tools?

In my opinion it also should be a core tool in QGIS, not a plugin. These
spatial queries are really core GIS functions, not optional extensions.

Andreas

From madmanwoo at gmail.com  Sun Jan  6 02:40:45 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Sun, 6 Jan 2013 20:40:45 +1000
Subject: [Qgis-developer] Spatial queries plugin should ignore very
	small intersections
In-Reply-To: <50E94FEE.9060209@carto.net>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
Message-ID: <CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>

On Sun, Jan 6, 2013 at 8:20 PM, Andreas Neumann <a.neumann at carto.net> wrote:

> In my opinion it also should be a core tool in QGIS, not a plugin. These
> spatial queries are really core GIS functions, not optional extensions.
>

I agree this one of the reasons that I brought up the topic of moving code
plugins to core features a couple of days ago.

- Nathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130106/93787143/attachment.html>

From larrys at dakotacarto.com  Sun Jan  6 02:44:50 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Sun, 6 Jan 2013 03:44:50 -0700
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
Message-ID: <CA+nQOR8XP_dHThwDGAuuhciYCXwXqQpg=yyKS=STWXFkKD368Q@mail.gmail.com>

Hi,

Sorry for top-posting. I switched the main Options dialog over to
vertical tabs. Couple of features:

* Long labels should wrap, but may not look great at 3 lines. Seems to
be a bit of an issue when using a custom font, where the wrapping
doesn't work quite the same as with the Qt default font.

* The splitter state is saved, so once a user gets the tabs the way
they like, it should stay like that

* There is an icon-only mode when the splitter is moved all the way to
the left. The vertical scrollbar is then always shown, hiding the
beginning of the tab's text. Please let me know if it doesn't end up
looking like [0] on your platform.

Note: I did not clean up the settings yet, just added the vertical tabs.

Currently, the dialog is a little slow to open. This is due (I
believe) to the custom font combobox population, and the new
QProcess::systemEnvironment() call to populate the current environment
variables table. I'll work on fixing those.

[0] http://drive.dakotacarto.com/qgis/options-dialog_icon-only.png

Regards,

Larry



On Fri, Jan 4, 2013 at 10:47 AM, Larry Shaffer <larrys at dakotacarto.com> wrote:
> Hi Matthias and Nathan,
>
> I was just about to bring this topic back up myself. :^) Yes, I can
> work on this next (probably this weekend). I'll start with the main
> app options dialog, cause it's the simplest.
>
> Option dialog candidates to switch to vertical tabs (for
> useability/consistency):
> * App options
> * Project options
> * Vector and Raster layer properties
>
>
> Matthias, do you think the new diagram options setup can be moved to
> horizontal tabs, instead of a toolbox, once there are vertical tabs
> for the vector dialog?
>
>
> Nathan,
>> ...  If you need some help I can lend a hand.
>
> Remember that little custom toolbutton widget we chatted about for
> data defined option overrides? (to the right of labeling options in
> redesign [0]) I think you mentioned some kind of abstracted data
> binding class that widgets like that could use or inherit. Such a
> class, that worked with the new vector API, would be very handy and
> greatly help with the labeling dialog redesign (and elsewhere). Do you
> have some time to work on that?
>
> See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at (14:44:28)
>
> [0] http://drive.dakotacarto.com/qgis/labeling-redesign.png
>
> Regards,
>
> Larry
>
>
> On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com> wrote:
>> Larry,
>>
>> If you do have time for this I too would really like to see this added. The
>> tabs situation is becoming a mess and is only going to get worse as we move
>> forward.  If you need some help I can lend a hand.
>>
>> - Nathan
>>
>>
>> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>>>
>>> Hi Larry,
>>>
>>> What is the status of the vertical tabs? Do you still have a branch with
>>> them ready?
>>>
>>> I noticed, that the new labelling dialog in the vector layer settings has
>>> two columns of tabs, which look a bit uncommon, and I'd see vertical tabs as
>>> a good replacement for either the first or the second level of tabs in this
>>> dialog.
>>>
>>> Cheers,
>>>
>>> Matthias
>>>
>>>
>>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
>>>>
>>>> Hi,
>>>>
>>>> I've been working on reducing overall clutter and excess space, and
>>>> trying to increase efficiency and extensibility, with options dialogs.
>>>>
>>>> Problems with current option dialogs' parent QTabWidget approach:
>>>>
>>>> * Tab widget uses unnecessary vertical space (bad for small screens).
>>>> * Tab widget limits the use of reasonably needed tabs for option
>>>> sections (avoiding tabs-within-tabs unfortunately trumps useability).
>>>> * Horizontal parent tabs limit how many option sections can be offered
>>>> (already too wide, without text truncation, on Mac).
>>>> * Horizontal parent tabs dictate the width of the dialog, causing form
>>>> layout elements to optically stretch too far apart.
>>>>
>>>>
>>>> Possible solution: Move 'tabs' to simple list widget on left side of a
>>>> splitter and have option sections loaded on right.
>>>>
>>>> I have done mockups for the app and vector layer options [0], which
>>>> show the following advantages:
>>>>
>>>> * Vertical height is maximized without sacrificing layout of option
>>>> section form elements (good for smaller screens).
>>>> * Number of option sections is not graphically limited.
>>>> * Number of option sections no longer dictates width of option section
>>>> forms (forms look much better).
>>>> * List item widget can have its splitter section collapsed to a set
>>>> size to show only icons for sections.
>>>> * Consistent look across platforms, with larger icons for sections.
>>>> * More current 'look' for v 2.0 without too much work.
>>>>
>>>> Other than making the dialogs clearer and less cluttered IMHO, the
>>>> full useability of the dialogs at smaller sizes helps the user see
>>>> more map canvas when testing options with Apply.
>>>>
>>>> Any comments or suggestions?
>>>>
>>>> [0]
>>>> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
>>>>
>>>> Regards,
>>>>
>>>> Larry
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>

From regis.haubourg at eau-adour-garonne.fr  Sun Jan  6 04:43:10 2013
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Sun, 6 Jan 2013 04:43:10 -0800 (PST)
Subject: [Qgis-developer] Spatial queries plugin should ignore very
	small intersections
In-Reply-To: <CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
Message-ID: <1357476190576-5025821.post@n6.nabble.com>

OK for starting specifications. A good start could be a Arcgis - QGIS
comparison to find missing features. I really like small graphics to help
user understand what the tool is doing. I put that on my list. If you
already have proposals, let's post drafts here, and then finalise in a
redmine ticket or in the wiki. 

OK with Nathan to go to core C++ rewriting.

Maybe we should ask what is the global roadmap for vector menu tools. Most
of actions in the menu are part of ftools. Do we start replacing them one by
one by C++ core actions, or do we have a global plan to rebuild thoses
actions, and have them in sync with sextante algorithms.

PSC members, do you have plans for it already?

Cleaning geometry is now part of geos I remember. But it does not act like
arcgis 'repair geometry'. I haven't tested it yet. It creates polygon
intersections when finding auto intersections. Did anybody tried it? 
R?gis




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Spatial-queries-plugin-should-ignore-very-small-intersections-tp5025788p5025821.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From alexander.bruy at gmail.com  Sun Jan  6 07:08:18 2013
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun, 6 Jan 2013 17:08:18 +0200
Subject: [Qgis-developer] Spatial queries plugin should ignore very
 small intersections
In-Reply-To: <1357476190576-5025821.post@n6.nabble.com>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
	<1357476190576-5025821.post@n6.nabble.com>
Message-ID: <20130106170818.dfb4ebd96bf13f4dd6c90f2a@gmail.com>

On Sun, 6 Jan 2013 04:43:10 -0800 (PST)
R?gis Haubourg <regis.haubourg at eau-adour-garonne.fr> wrote:

> Maybe we should ask what is the global roadmap for vector menu tools. Most
> of actions in the menu are part of ftools. Do we start replacing them one by
> one by C++ core actions, or do we have a global plan to rebuild thoses
> actions, and have them in sync with sextante algorithms.

AFAIK, some geoprocessing functions from fTools also available in QGIS
analysis library. But they needs review and optimization. C++
implementation still slow with relatively large datasets.

-- 
Alexander Bruy

From benedict.m.holland at gmail.com  Sun Jan  6 12:18:50 2013
From: benedict.m.holland at gmail.com (Benedict Holland)
Date: Sun, 6 Jan 2013 15:18:50 -0500
Subject: [Qgis-developer] Multiple Data Frames
In-Reply-To: <CAB4g1=x8KWxF_+nCrmtA8dtrHG_fkaJyW7xb1cGpuWRLVB3L1Q@mail.gmail.com>
References: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>
	<CAB4g1=x8KWxF_+nCrmtA8dtrHG_fkaJyW7xb1cGpuWRLVB3L1Q@mail.gmail.com>
Message-ID: <CAD+mzoyj3NPwz1Geuq2s5TBcGQLKg5FFqEdHu6YxvFtXVodc9Q@mail.gmail.com>

So I found a few related bugs to what I wanted to do so I don't know if
this is incorporated already.

http://hub.qgis.org/issues/2348
http://hub.qgis.org/issues/4846

with the second link being what I think I am going for with one substantial
difference. I want to have a main map of a section of say, Maine or New
York zoomed in quite a bit to show a specific town. Then I want a map of
the state of Maine or New York in the corner of the main map with a box
describing the location of the main map. The way ArcGIS does this sort of
thing is sort of brilliant. The way I see this working is to
modify projects so they made up of a layer group:

Project -> Data Frames (at least 1 always, probably named something
different like Map Frame) -> Layers (0 or more)

and allow a data frame to be turned on or off in the composer (perhaps a
check box like display in composer). The active data frame will be
displayed in the main window and only one data frame can be active. Of
course both data frames will have to be movable in the composer as the main
map currently is. I am sure this feature will buy a lot more than just my
use case but I need this sort of functionality just to provide an overview
map embedded within the main map. Does this sound reasonable and doable?

Thanks all,
~Ben

On Sat, Jan 5, 2013 at 6:50 PM, G. Allegri <giohappy at gmail.com> wrote:

> Hi Benedict,
> besides the data frames cincepr, which would useful in many circumstances,
> aren't describing an overview map? It already exists in QGis. Probably I
> misunderstood your requirement...
>
> Giovanni
>
> Sent from Nexus
> Il giorno 06/gen/2013 00:37, "Benedict Holland" <
> benedict.m.holland at gmail.com> ha scritto:
>
>> Hi All,
>>
>> I just stumbled across this bit from Nathans blog:
>>
>> http://woostuff.wordpress.com/2011/05/17/the-things-i-would-like-to-see-in-qgis-what-are-yours/
>>
>> I was wondering if there was someone working on Data Frames and being
>> able to load multiple data frames into the presenter (exactly like ArcGIS).
>> The best use case for this exact feature is to get the extent marker for an
>> area locator in the main map. Something along the lines of a main map with
>> a tiny area map in the corner displaying the location of the current map.
>> You see, I actually do need this feature to exist which would make it quite
>> high on priorities to try to tackle. Also, do you know where I should start
>> looking and what areas of the code tree I would be working in? I am not
>> sure if this should start out as a plugin either since I have a feeling I
>> would end up creating a top level object made up of layers and I am not
>> sure how well that would fit into a plugin like interface. Of course, I
>> don't have any skills programming a plugin for anything anyway but I
>> can re-factor code and design a template for a code review.
>>
>> Also, how do code reviews happen? I would love to get any input on what
>> this sort of thing should look like and what features people would
>> generally want from a "Data Frame" like object and have the class
>> interfaces reviewed before I start tackling the hard work.
>>
>> Thanks all,
>> ~Ben
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130106/afd2180a/attachment.html>

From wonder.sk at gmail.com  Sun Jan  6 13:01:49 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 6 Jan 2013 22:01:49 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <50E5514D.600@gmx.ch>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
Message-ID: <CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>

On Thu, Jan 3, 2013 at 10:37 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
> I've just been able to segfault:
>
> a = dataProvider.getFeatures( QgsFeatureRequest().setFilterFid( featureId )
> )
> a.rewind()
> a.next()

Hi Matthias

I was able to replicate the problem in postgres provider - I have
fixed the issues, please check again. By the way, funny thing is that
rewind() call obviously never worked correctly in postgres provider
until now (it executed "move 0" instead of "move absolute 0",
resulting in no actual move).

Please let me know if you encounter any other problems.

Martin

From madmanwoo at gmail.com  Sun Jan  6 13:25:08 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Mon, 7 Jan 2013 07:25:08 +1000
Subject: [Qgis-developer] Multiple Data Frames
In-Reply-To: <CAD+mzoyj3NPwz1Geuq2s5TBcGQLKg5FFqEdHu6YxvFtXVodc9Q@mail.gmail.com>
References: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>
	<CAB4g1=x8KWxF_+nCrmtA8dtrHG_fkaJyW7xb1cGpuWRLVB3L1Q@mail.gmail.com>
	<CAD+mzoyj3NPwz1Geuq2s5TBcGQLKg5FFqEdHu6YxvFtXVodc9Q@mail.gmail.com>
Message-ID: <CAAi8Yg8Xn72FrwOkLi7baGxtuDHBmpfFcvGarJN4ik=qjUh6DA@mail.gmail.com>

Hey Ben,

I think a multi frame feature is inevitable in QGIS and is something that I
have always wanted to have.  I think we can take the idea of Data Frames
that ArcGIS has and expand on areas that we don't like.

Having higher level groups, which would be the frames, would work fine and
having just a single map window would make life a lot easier. In an ideal
world I would like the ability to break out a frame into a different map
window so that I could have two map canvases open at one given time.

Something else that I think would be good would to be have a "Composer use"
sub group that would show which composers and composer maps this frame is
used in.  Something like this:

Frame1
  *-> Composer use*
*     -- MyComposer - Map3*
*     -- BigPrint - Map3**  *
Frame2
  *-> Composer use*
*     -- BigPrint - Map1*
*
*
 I had some ideas a while ago about what UI features I would like to see
with a multi frame situation so I can upload some sketches of it if you
would like.

- Nathan


On Mon, Jan 7, 2013 at 6:18 AM, Benedict Holland <
benedict.m.holland at gmail.com> wrote:

> So I found a few related bugs to what I wanted to do so I don't know if
> this is incorporated already.
>
> http://hub.qgis.org/issues/2348
> http://hub.qgis.org/issues/4846
>
> with the second link being what I think I am going for with one
> substantial difference. I want to have a main map of a section of say,
> Maine or New York zoomed in quite a bit to show a specific town. Then I
> want a map of the state of Maine or New York in the corner of the main map
> with a box describing the location of the main map. The way ArcGIS does
> this sort of thing is sort of brilliant. The way I see this working is to
> modify projects so they made up of a layer group:
>
> Project -> Data Frames (at least 1 always, probably named something
> different like Map Frame) -> Layers (0 or more)
>
> and allow a data frame to be turned on or off in the composer (perhaps a
> check box like display in composer). The active data frame will be
> displayed in the main window and only one data frame can be active. Of
> course both data frames will have to be movable in the composer as the main
> map currently is. I am sure this feature will buy a lot more than just my
> use case but I need this sort of functionality just to provide an overview
> map embedded within the main map. Does this sound reasonable and doable?
>
> Thanks all,
> ~Ben
>
>
> On Sat, Jan 5, 2013 at 6:50 PM, G. Allegri <giohappy at gmail.com> wrote:
>
>> Hi Benedict,
>> besides the data frames cincepr, which would useful in many
>> circumstances, aren't describing an overview map? It already exists in
>> QGis. Probably I misunderstood your requirement...
>>
>> Giovanni
>>
>> Sent from Nexus
>> Il giorno 06/gen/2013 00:37, "Benedict Holland" <
>> benedict.m.holland at gmail.com> ha scritto:
>>
>>> Hi All,
>>>
>>> I just stumbled across this bit from Nathans blog:
>>>
>>> http://woostuff.wordpress.com/2011/05/17/the-things-i-would-like-to-see-in-qgis-what-are-yours/
>>>
>>> I was wondering if there was someone working on Data Frames and being
>>> able to load multiple data frames into the presenter (exactly like ArcGIS).
>>> The best use case for this exact feature is to get the extent marker for an
>>> area locator in the main map. Something along the lines of a main map with
>>> a tiny area map in the corner displaying the location of the current map.
>>> You see, I actually do need this feature to exist which would make it quite
>>> high on priorities to try to tackle. Also, do you know where I should start
>>> looking and what areas of the code tree I would be working in? I am not
>>> sure if this should start out as a plugin either since I have a feeling I
>>> would end up creating a top level object made up of layers and I am not
>>> sure how well that would fit into a plugin like interface. Of course, I
>>> don't have any skills programming a plugin for anything anyway but I
>>> can re-factor code and design a template for a code review.
>>>
>>> Also, how do code reviews happen? I would love to get any input on what
>>> this sort of thing should look like and what features people would
>>> generally want from a "Data Frame" like object and have the class
>>> interfaces reviewed before I start tackling the hard work.
>>>
>>> Thanks all,
>>> ~Ben
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130107/b9462130/attachment.html>

From etourigny.dev at gmail.com  Sun Jan  6 13:34:43 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 6 Jan 2013 19:34:43 -0200
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <50E89FB8.508@carto.net>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
	<CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>
	<CA+TxYvNnvaho4NamkX+Tn4jD7pbqiQ7j6g7LMz6feqgMx-Y=kw@mail.gmail.com>
	<50E860D1.7030303@carto.net>
	<CA+TxYvMdM9TsqG6B2jr5BvCKwiSi-QU0A9RC9F-scQu7Eb+QMQ@mail.gmail.com>
	<50E89FB8.508@carto.net>
Message-ID: <CA+TxYvMGUwHjwgSFhT35QOMTGKYp+pd=WmYXkTdpRpW9gjKfng@mail.gmail.com>

On Sat, Jan 5, 2013 at 7:48 PM, Andreas Neumann <a.neumann at carto.net> wrote:
> Hi,
>
> See my reply inline.
>
>>> Where do you get the list of properties from? Could tags and descriptive
>>> text be added to these settings?
>>
>> Actually they are read from the settings file / registry by QSettings.
>> So anything not in the user's setting does not show up.
>
> ok
>
>> Anything more complex such as you mention would require a csv or xml
>> file with description and tags for each settings key.
>> A csv file would be easier to write and maintain, but an xml file
>> would be easier to parse I guess. Unless someone can point me to
>> a handy xml editor or csv-to-xml tool.
>
> Ok - we would also need multi-language titles and tags and it should be
> easily translatable. Can we re-use some existing file for that purpose
> and extend it with the tags for the fuzzy search?

I don't really have a clue on where to start... Ideally this should be
integrated with current translation tools.

The translation part would be easier if there is straight c++ source
with many tr() statements that could be translated with Qt Linguist.
i.e.
 map["somekey"]["name"] = "This option is for something";
 map["somekey"]["tags"] = "tag1,tag2,tag3";

However, setting this up would be a pain for devs. It would be nicer
to have just a text file with a bunch of entries.
i.e. a csv file
key ; name ; tags
"somekey" ;  "This option is for something" ; "tag1,tag2,tag3"

Anyone have an idea on how to create this kind of file and allow to
use something like Qt Linguist to translate the entries into any
language?

Or is it just simpler to write in code?

>
>> Another thing that would be nice would be the possible values that a
>> setting can take, in a dictionnary (key=value pairs) style.
>> (e.g. 0="value1";1="value2")
>
> yes - it should also be possible to manually add/change settings that
> one could read/write per python script.

Do you mean an API accessible by python scripts/plugins to create
entries in the advanced settings editor?

cheers
Etienne

>
> Andreas
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From benedict.m.holland at gmail.com  Sun Jan  6 13:36:18 2013
From: benedict.m.holland at gmail.com (Benedict Holland)
Date: Sun, 6 Jan 2013 16:36:18 -0500
Subject: [Qgis-developer] Multiple Data Frames
In-Reply-To: <CAAi8Yg8Xn72FrwOkLi7baGxtuDHBmpfFcvGarJN4ik=qjUh6DA@mail.gmail.com>
References: <CAD+mzox+BkdW+qHkGoJzD_+HMcFnNZTAjZXc0-3oDxyQ_A38Cg@mail.gmail.com>
	<CAB4g1=x8KWxF_+nCrmtA8dtrHG_fkaJyW7xb1cGpuWRLVB3L1Q@mail.gmail.com>
	<CAD+mzoyj3NPwz1Geuq2s5TBcGQLKg5FFqEdHu6YxvFtXVodc9Q@mail.gmail.com>
	<CAAi8Yg8Xn72FrwOkLi7baGxtuDHBmpfFcvGarJN4ik=qjUh6DA@mail.gmail.com>
Message-ID: <CAD+mzox-XXXrPHw5oZwb-an1ozXujEsHnrXjhj9A2+07=Rnp4Q@mail.gmail.com>

Sure, why don't you upload what you think it should look like. I will start
working on this tonight and poke around to see just how difficult this is
to get working.

Thanks,
~Ben

On Sun, Jan 6, 2013 at 4:25 PM, Nathan Woodrow <madmanwoo at gmail.com> wrote:

> Hey Ben,
>
> I think a multi frame feature is inevitable in QGIS and is something that
> I have always wanted to have.  I think we can take the idea of Data Frames
> that ArcGIS has and expand on areas that we don't like.
>
> Having higher level groups, which would be the frames, would work fine and
> having just a single map window would make life a lot easier. In an ideal
> world I would like the ability to break out a frame into a different map
> window so that I could have two map canvases open at one given time.
>
> Something else that I think would be good would to be have a "Composer
> use" sub group that would show which composers and composer maps this frame
> is used in.  Something like this:
>
> Frame1
>   *-> Composer use*
> *     -- MyComposer - Map3*
> *     -- BigPrint - Map3**  *
> Frame2
>   *-> Composer use*
> *     -- BigPrint - Map1*
> *
> *
>  I had some ideas a while ago about what UI features I would like to see
> with a multi frame situation so I can upload some sketches of it if you
> would like.
>
> - Nathan
>
>
> On Mon, Jan 7, 2013 at 6:18 AM, Benedict Holland <
> benedict.m.holland at gmail.com> wrote:
>
>> So I found a few related bugs to what I wanted to do so I don't know if
>> this is incorporated already.
>>
>> http://hub.qgis.org/issues/2348
>> http://hub.qgis.org/issues/4846
>>
>> with the second link being what I think I am going for with one
>> substantial difference. I want to have a main map of a section of say,
>> Maine or New York zoomed in quite a bit to show a specific town. Then I
>> want a map of the state of Maine or New York in the corner of the main map
>> with a box describing the location of the main map. The way ArcGIS does
>> this sort of thing is sort of brilliant. The way I see this working is to
>> modify projects so they made up of a layer group:
>>
>> Project -> Data Frames (at least 1 always, probably named something
>> different like Map Frame) -> Layers (0 or more)
>>
>> and allow a data frame to be turned on or off in the composer (perhaps a
>> check box like display in composer). The active data frame will be
>> displayed in the main window and only one data frame can be active. Of
>> course both data frames will have to be movable in the composer as the main
>> map currently is. I am sure this feature will buy a lot more than just my
>> use case but I need this sort of functionality just to provide an overview
>> map embedded within the main map. Does this sound reasonable and doable?
>>
>> Thanks all,
>> ~Ben
>>
>>
>> On Sat, Jan 5, 2013 at 6:50 PM, G. Allegri <giohappy at gmail.com> wrote:
>>
>>> Hi Benedict,
>>> besides the data frames cincepr, which would useful in many
>>> circumstances, aren't describing an overview map? It already exists in
>>> QGis. Probably I misunderstood your requirement...
>>>
>>> Giovanni
>>>
>>> Sent from Nexus
>>> Il giorno 06/gen/2013 00:37, "Benedict Holland" <
>>> benedict.m.holland at gmail.com> ha scritto:
>>>
>>>> Hi All,
>>>>
>>>> I just stumbled across this bit from Nathans blog:
>>>>
>>>> http://woostuff.wordpress.com/2011/05/17/the-things-i-would-like-to-see-in-qgis-what-are-yours/
>>>>
>>>> I was wondering if there was someone working on Data Frames and being
>>>> able to load multiple data frames into the presenter (exactly like ArcGIS).
>>>> The best use case for this exact feature is to get the extent marker for an
>>>> area locator in the main map. Something along the lines of a main map with
>>>> a tiny area map in the corner displaying the location of the current map.
>>>> You see, I actually do need this feature to exist which would make it quite
>>>> high on priorities to try to tackle. Also, do you know where I should start
>>>> looking and what areas of the code tree I would be working in? I am not
>>>> sure if this should start out as a plugin either since I have a feeling I
>>>> would end up creating a top level object made up of layers and I am not
>>>> sure how well that would fit into a plugin like interface. Of course, I
>>>> don't have any skills programming a plugin for anything anyway but I
>>>> can re-factor code and design a template for a code review.
>>>>
>>>> Also, how do code reviews happen? I would love to get any input on what
>>>> this sort of thing should look like and what features people would
>>>> generally want from a "Data Frame" like object and have the class
>>>> interfaces reviewed before I start tackling the hard work.
>>>>
>>>> Thanks all,
>>>> ~Ben
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130106/db8df184/attachment.html>

From etourigny.dev at gmail.com  Sun Jan  6 13:40:02 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 6 Jan 2013 19:40:02 -0200
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <50E89FB8.508@carto.net>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
	<CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>
	<CA+TxYvNnvaho4NamkX+Tn4jD7pbqiQ7j6g7LMz6feqgMx-Y=kw@mail.gmail.com>
	<50E860D1.7030303@carto.net>
	<CA+TxYvMdM9TsqG6B2jr5BvCKwiSi-QU0A9RC9F-scQu7Eb+QMQ@mail.gmail.com>
	<50E89FB8.508@carto.net>
Message-ID: <CA+TxYvOaW7TCGDN8N4ygwQKCqGwWvssCALtKCEee2f062VVAFQ@mail.gmail.com>

On Sat, Jan 5, 2013 at 7:48 PM, Andreas Neumann <a.neumann at carto.net> wrote:
> Hi,
>
> See my reply inline.
>
>>> Where do you get the list of properties from? Could tags and descriptive
>>> text be added to these settings?
>>
>> Actually they are read from the settings file / registry by QSettings.
>> So anything not in the user's setting does not show up.
>
> ok
>
>> Anything more complex such as you mention would require a csv or xml
>> file with description and tags for each settings key.
>> A csv file would be easier to write and maintain, but an xml file
>> would be easier to parse I guess. Unless someone can point me to
>> a handy xml editor or csv-to-xml tool.
>
> Ok - we would also need multi-language titles and tags and it should be
> easily translatable. Can we re-use some existing file for that purpose
> and extend it with the tags for the fuzzy search?

Actually looking at the existing code, it's based on QTreeWidget so
any searching functionality would require re-writing it with a
QTreeView and model, a bit more involved.

I have made some adjustments to the code at [1] (to add support for
boll, int and double types), I was wondering if I should make a pull
request or merge it as it is so other devs can have a look?

[1] https://github.com/etiennesky/Quantum-GIS/tree/settingseditor

Cheers,
Etienne

>
>> Another thing that would be nice would be the possible values that a
>> setting can take, in a dictionnary (key=value pairs) style.
>> (e.g. 0="value1";1="value2")
>
> yes - it should also be possible to manually add/change settings that
> one could read/write per python script.
>
> Andreas
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From miroslav.umlauf at gmail.com  Sun Jan  6 16:36:33 2013
From: miroslav.umlauf at gmail.com (Miro)
Date: Sun, 6 Jan 2013 16:36:33 -0800 (PST)
Subject: [Qgis-developer] Additional settings for Print Composer Map item
	Grid
Message-ID: <1357518993696-5025847.post@n6.nabble.com>

I believe it should be not very hard to implement and very nice to have:

1. In Print Composer / Map item / Grid tab add option "Tick"
- there are two options (Solid and Cross) which is great. But it would be
great to have third option "tick" which would do only ticks on border -
basically the Cross option but without crosses in the map

2. Option to have annotation to grid only on selected borders
- probably adding 4 check boxes left, right, top, bottom

(btw I am new here so I hope this is the right place for ideas like this
one, please let me know if not and where I should write instead)



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Additional-settings-for-Print-Composer-Map-item-Grid-tp5025847.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From a.neumann at carto.net  Sun Jan  6 23:23:20 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 07 Jan 2013 08:23:20 +0100
Subject: [Qgis-developer] Additional settings for Print Composer Map
 item Grid
In-Reply-To: <1357518993696-5025847.post@n6.nabble.com>
References: <1357518993696-5025847.post@n6.nabble.com>
Message-ID: <0c98315d58b029d51ab2bd88fa88337c@carto.net>

 Hi Miro,

 Do you use the current master/trunk version? Your wish nr 2 is already 
 implemented in the current master. For each side you can set if you want 
 to label the grid or not and whether you want to label it horizontally 
 or vertically.

 Your first wish isn't implemented yet, but I agree that it should not 
 be very hard to implement. You can open a feature request ticket in 
 hub.qgis.org - Marco Hugentobler is one of the maintainers of the print 
 composer.

 Andreas

 On Sun, 6 Jan 2013 16:36:33 -0800 (PST), Miro wrote:
> I believe it should be not very hard to implement and very nice to 
> have:
>
> 1. In Print Composer / Map item / Grid tab add option "Tick"
> - there are two options (Solid and Cross) which is great. But it 
> would be
> great to have third option "tick" which would do only ticks on border 
> -
> basically the Cross option but without crosses in the map
>
> 2. Option to have annotation to grid only on selected borders
> - probably adding 4 check boxes left, right, top, bottom
>
> (btw I am new here so I hope this is the right place for ideas like 
> this
> one, please let me know if not and where I should write instead)
>
>
>
> --
> View this message in context:
> 
> http://osgeo-org.1560.n6.nabble.com/Additional-settings-for-Print-Composer-Map-item-Grid-tp5025847.html
> Sent from the Quantum GIS - Developer mailing list archive at 
> Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From a.neumann at carto.net  Mon Jan  7 00:11:13 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 07 Jan 2013 09:11:13 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+TxYvOaW7TCGDN8N4ygwQKCqGwWvssCALtKCEee2f062VVAFQ@mail.gmail.com>
References: <CA+nQOR-+N5p=enrRD+HCNRg6Vu0STdS3g-m5civDMYg9hUngQg@mail.gmail.com>
	<50E689F2.2010505@gmx.ch>
	<CAAi8Yg95bAortZRjcxW=OtiPj4YNpfXPn2EjaGJ9XSjYbb6mog@mail.gmail.com>
	<CA+nQOR81QWtAJ+hcux-ZiT4TS+JWVTvYXcAzqBqfz5Kgg4ox8g@mail.gmail.com>
	<CAC2XbFcKU+97=GDS5FVeY0QGh9jRwMgnfacuvawa3YfkNjY5gg@mail.gmail.com>
	<CA+TxYvPt3Si9zzJA0q6b3vrkVyEah8kgLTxX81_UKxmAa2DJ9w@mail.gmail.com>
	<CA+TxYvNnvaho4NamkX+Tn4jD7pbqiQ7j6g7LMz6feqgMx-Y=kw@mail.gmail.com>
	<50E860D1.7030303@carto.net>
	<CA+TxYvMdM9TsqG6B2jr5BvCKwiSi-QU0A9RC9F-scQu7Eb+QMQ@mail.gmail.com>
	<50E89FB8.508@carto.net>
	<CA+TxYvOaW7TCGDN8N4ygwQKCqGwWvssCALtKCEee2f062VVAFQ@mail.gmail.com>
Message-ID: <a0c56689ffebd19250ee63e3ebcfc63e@carto.net>

 Hi,

 Ideally there could be one single source for all the settings - easily 
 to translate and also with all the metadata necessary to build the 
 options dialogue (both in its current GUI and with the tree widget). 
 Ideally, the search functionality would work with both the traditional 
 GUI and the tree view.

 I would be willing to work on a german/english translation and on 
 adding tags for a "fuzzy search" but unfortunately don't know enough how 
 to integrate such search functionality and the new tree view idea.

 Andreas

 On Sun, 6 Jan 2013 19:40:02 -0200, Etienne Tourigny wrote:
> On Sat, Jan 5, 2013 at 7:48 PM, Andreas Neumann <a.neumann at carto.net> 
> wrote:
>> Hi,
>>
>> See my reply inline.
>>
>>>> Where do you get the list of properties from? Could tags and 
>>>> descriptive
>>>> text be added to these settings?
>>>
>>> Actually they are read from the settings file / registry by 
>>> QSettings.
>>> So anything not in the user's setting does not show up.
>>
>> ok
>>
>>> Anything more complex such as you mention would require a csv or 
>>> xml
>>> file with description and tags for each settings key.
>>> A csv file would be easier to write and maintain, but an xml file
>>> would be easier to parse I guess. Unless someone can point me to
>>> a handy xml editor or csv-to-xml tool.
>>
>> Ok - we would also need multi-language titles and tags and it should 
>> be
>> easily translatable. Can we re-use some existing file for that 
>> purpose
>> and extend it with the tags for the fuzzy search?
>
> Actually looking at the existing code, it's based on QTreeWidget so
> any searching functionality would require re-writing it with a
> QTreeView and model, a bit more involved.
>
> I have made some adjustments to the code at [1] (to add support for
> boll, int and double types), I was wondering if I should make a pull
> request or merge it as it is so other devs can have a look?
>
> [1] https://github.com/etiennesky/Quantum-GIS/tree/settingseditor
>
> Cheers,
> Etienne
>
>>
>>> Another thing that would be nice would be the possible values that 
>>> a
>>> setting can take, in a dictionnary (key=value pairs) style.
>>> (e.g. 0="value1";1="value2")
>>
>> yes - it should also be possible to manually add/change settings 
>> that
>> one could read/write per python script.
>>
>> Andreas
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From miroslav.umlauf at gmail.com  Mon Jan  7 00:29:55 2013
From: miroslav.umlauf at gmail.com (Miro)
Date: Mon, 7 Jan 2013 00:29:55 -0800 (PST)
Subject: [Qgis-developer] Additional settings for Print Composer Map
	item Grid
In-Reply-To: <0c98315d58b029d51ab2bd88fa88337c@carto.net>
References: <1357518993696-5025847.post@n6.nabble.com>
	<0c98315d58b029d51ab2bd88fa88337c@carto.net>
Message-ID: <1357547395724-5025887.post@n6.nabble.com>

Ad 1 - oh, I don't have current master, good to know it is already in, hooray
Ad 2 - ok, I  will add it there (if I figure out how :-))

Thank you



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Additional-settings-for-Print-Composer-Map-item-Grid-tp5025847p5025887.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From a.neumann at carto.net  Mon Jan  7 00:42:40 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 07 Jan 2013 09:42:40 +0100
Subject: [Qgis-developer] Additional settings for Print Composer Map
 item Grid
In-Reply-To: <1357547395724-5025887.post@n6.nabble.com>
References: <1357518993696-5025847.post@n6.nabble.com>
	<0c98315d58b029d51ab2bd88fa88337c@carto.net>
	<1357547395724-5025887.post@n6.nabble.com>
Message-ID: <ae15482c19cac826baa25f7eba622df6@carto.net>

 Hi,

 To report bugs you first need to create a OSGEO user id at 
 http://www.osgeo.org/osgeo_userid and then create a new issue at 
 http://hub.qgis.org/ - it is not very hard. In your case you would open 
 a feature issue, not a bug issue. Of course it would be good to first 
 search in the existing bugs and feature request to avoid duplicate bugs.

 Hope this helps,
 Andreas

 On Mon, 7 Jan 2013 00:29:55 -0800 (PST), Miro wrote:
> Ad 1 - oh, I don't have current master, good to know it is already 
> in, hooray
> Ad 2 - ok, I  will add it there (if I figure out how :-))
>
> Thank you
>
>
>
> --
> View this message in context:
> 
> http://osgeo-org.1560.n6.nabble.com/Additional-settings-for-Print-Composer-Map-item-Grid-tp5025847p5025887.html
> Sent from the Quantum GIS - Developer mailing list archive at 
> Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From cavallini at faunalia.it  Mon Jan  7 01:24:58 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 07 Jan 2013 10:24:58 +0100
Subject: [Qgis-developer] Spatial queries plugin should ignore very
 small intersections
In-Reply-To: <50E94FEE.9060209@carto.net>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
Message-ID: <50EA946A.9030806@faunalia.it>

Il 06/01/2013 11:20, Andreas Neumann ha scritto:

> true - there is a geometry validation tool to detect these invalid
> geometries but no cleaning tools available.

We (Faunalia, thanks to Regione Toscana support) are making a cleaning tool using
liblwgeom from PostGIS, and sextante. We still have minor packaging problems (we
would like to have liblwgeom in osgeo4w), but for the rest the tool should be working.
All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From cavallini at faunalia.it  Mon Jan  7 01:33:51 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 07 Jan 2013 10:33:51 +0100
Subject: [Qgis-developer] Spatial queries plugin should ignore very
 small intersections
In-Reply-To: <1357476190576-5025821.post@n6.nabble.com>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
	<1357476190576-5025821.post@n6.nabble.com>
Message-ID: <50EA967F.6090306@faunalia.it>

Il 06/01/2013 13:43, R?gis Haubourg ha scritto:
> OK for starting specifications. A good start could be a Arcgis - QGIS
> comparison to find missing features. I really like small graphics to help
> user understand what the tool is doing. I put that on my list. If you
> already have proposals, let's post drafts here, and then finalise in a
> redmine ticket or in the wiki. 
> 
> OK with Nathan to go to core C++ rewriting.
> 
> Maybe we should ask what is the global roadmap for vector menu tools. Most
> of actions in the menu are part of ftools. Do we start replacing them one by
> one by C++ core actions, or do we have a global plan to rebuild thoses
> actions, and have them in sync with sextante algorithms.
> 
> PSC members, do you have plans for it already?
> 
> Cleaning geometry is now part of geos I remember. But it does not act like
> arcgis 'repair geometry'. I haven't tested it yet. It creates polygon
> intersections when finding auto intersections. Did anybody tried it? 

We (Faunalia) are making a cleaning tool using liblwgeom from PostGIS, and sextante.
We still have minor packaging problems (we would like to have liblwgeom in osgeo4w),
but for the rest the tool should be working.
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From regis.haubourg at eau-adour-garonne.fr  Mon Jan  7 01:51:10 2013
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Mon, 7 Jan 2013 01:51:10 -0800 (PST)
Subject: [Qgis-developer] Spatial queries plugin should ignore very
	small intersections
In-Reply-To: <50EA967F.6090306@faunalia.it>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
	<1357476190576-5025821.post@n6.nabble.com>
	<50EA967F.6090306@faunalia.it>
Message-ID: <1357552270008-5025910.post@n6.nabble.com>



Paolo Cavallini wrote
> We (Faunalia) are making a cleaning tool using liblwgeom from PostGIS, and
> sextante. 

That's good news Paolo ! 
How does it work? Is it automagical like in ArcGis or more like a Grass topo
build where user has to choose snapping threshold? 
r?gis



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Spatial-queries-plugin-should-ignore-very-small-intersections-tp5025788p5025910.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From strk at keybit.net  Mon Jan  7 02:08:23 2013
From: strk at keybit.net (Sandro Santilli)
Date: Mon, 7 Jan 2013 11:08:23 +0100
Subject: [Qgis-developer] Spatial queries plugin should ignore very
 small intersections
In-Reply-To: <1357552270008-5025910.post@n6.nabble.com>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
	<1357476190576-5025821.post@n6.nabble.com>
	<50EA967F.6090306@faunalia.it>
	<1357552270008-5025910.post@n6.nabble.com>
Message-ID: <20130107100823.GG3763@gnash>

On Mon, Jan 07, 2013 at 01:51:10AM -0800, R?gis Haubourg wrote:
> 
> 
> Paolo Cavallini wrote
> > We (Faunalia) are making a cleaning tool using liblwgeom from PostGIS, and
> > sextante. 
> 
> That's good news Paolo ! 
> How does it work? Is it automagical like in ArcGis or more like a Grass topo
> build where user has to choose snapping threshold? 

No snapping, it simply turns invalid representations into valid ones.
There's no "cleaning" (tolerance based) performed.

--strk;

From regis.haubourg at eau-adour-garonne.fr  Mon Jan  7 02:18:45 2013
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Mon, 7 Jan 2013 02:18:45 -0800 (PST)
Subject: [Qgis-developer] Spatial queries plugin should ignore very
	small intersections
In-Reply-To: <20130107100823.GG3763@gnash>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
	<1357476190576-5025821.post@n6.nabble.com>
	<50EA967F.6090306@faunalia.it>
	<1357552270008-5025910.post@n6.nabble.com>
	<20130107100823.GG3763@gnash>
Message-ID: <1357553925237-5025914.post@n6.nabble.com>

Thanks Sandro,
so that means that you get multi polygons with very small polygons created
when a auto-intersection is cleaned. I prefer that since it does not
destroys existing node. I think qe should add another tool after the
'makevalide' tool to clean those artefacts based on a surface threshold.
This is really hard to achieve for common end user, and those artefacts can
be really numerous if datasets are not clean.  They also will make it harder
to edit a polygon manually, and will slow down spatial intersections. 

Anybody else needs such a tool?




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Spatial-queries-plugin-should-ignore-very-small-intersections-tp5025788p5025914.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From bernhard.stroebl at jena.de  Mon Jan  7 02:25:14 2013
From: bernhard.stroebl at jena.de (=?ISO-8859-1?Q?Bernhard_Str=F6bl?=)
Date: Mon, 07 Jan 2013 11:25:14 +0100
Subject: [Qgis-developer] Spatial queries plugin should ignore very
 small intersections
In-Reply-To: <1357553925237-5025914.post@n6.nabble.com>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
	<1357476190576-5025821.post@n6.nabble.com>
	<50EA967F.6090306@faunalia.it>
	<1357552270008-5025910.post@n6.nabble.com>
	<20130107100823.GG3763@gnash>
	<1357553925237-5025914.post@n6.nabble.com>
Message-ID: <50EAA28A.9030504@jena.de>

I made an eliminate tool (similar to ESRI's eliminate). It dissolves 
common boundaries of selected polygons and adjacent polygons with either 
largest area or largest common boundary. If you have multi polygons you 
would need to transform them into single polygons beforehand. The 
eliminate tool is part of fTools in current master.

Bernhard

Am 07.01.2013 11:18, schrieb R?gis Haubourg:
> Thanks Sandro,
> so that means that you get multi polygons with very small polygons created
> when a auto-intersection is cleaned. I prefer that since it does not
> destroys existing node. I think qe should add another tool after the
> 'makevalide' tool to clean those artefacts based on a surface threshold.
> This is really hard to achieve for common end user, and those artefacts can
> be really numerous if datasets are not clean.  They also will make it harder
> to edit a polygon manually, and will slow down spatial intersections.
>
> Anybody else needs such a tool?
>
>
>

From marco.hugentobler at sourcepole.ch  Mon Jan  7 02:45:02 2013
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Mon, 07 Jan 2013 11:45:02 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
Message-ID: <50EAA72E.7080605@sourcepole.ch>

Hi Martin

Finally I had a look at the vector changes and I really like the new 
architecture. I agree it is important to merge soon. Merging as soon as 
server and the remaining providers are ported would be good in my opinion.
Btw, there is a problem with postgis layers, probably related to the 
recent fix: After zooming to a new extent, I always need to refresh a 
second time to get the features (with the refresh button in the main 
window). Otherwise, no features are drawn.

Regards,
Marco




On 28.12.2012 17:03, Martin Dobias wrote:
> Hi everyone,
>
> it seems that now it is a good time to ask for a broader review of the
> work I have been doing during recent months: essentially making QGIS
> vector API more flexible and more ready for introduction of threading
> for rendering. That resulted in a greater refactoring of some parts of
> QgsVectorLayer class and QgsVectorDataProvider implementations.
> Everything is in new_vector_api branch in QGIS repository on GitHub
> [1].
>
> There are few things that are not finished, but should not take too
> much work to sort out:
> - disabled providers - mssql, osm, sqlanywhere, wfs - not yet updated to new API
> - disabled mapserver - there are few things to update
>
> If no serious problems will be found, I would like to merge the branch
> to master and continue working on that on master branch to avoid the
> possibility to drift (again) too much from the quick development that
> happens on master. In short term I plan to do some polishing and
> fixing bugs, then eventually start looking at the threading again.
>
> For more details about what happened in the branch, see the text below
> (long read!). A great help from early testers would be to compile the
> branch, try to do some "usual" stuff with vectors and see if things
> break apart (crashes? data corruption?).
>
> Looking forward to your comments!
>
> Regards
> Martin
>
> [1] https://github.com/qgis/Quantum-GIS/tree/new_vector_api
>
>
>
> QGIS VECTOR API CHANGES
>
> 1. QgsFeature (changes)
>
> a) access to attributes by name. Vector data providers and vector
> layer assign pointer to the fields in QgsFeature, so it is possible to
> set/get attributes by their name. This is not as efficient as with
> direct access by index, but often this convenience is useful for
> users.
>
> b) attributes are stored in a QVector container rather than a QMap.
> The major advantage is simplification of logic related to handling of
> attributes: it's not possible to have "holes" in the array of
> fields/attributes. Currently it is possible that for example layer
> with three fields returns indexes 0,1,3 - but it is not so common nor
> obvious, so it's a common source of errors. After refactoring there
> must not be any holes, so a layer with three fields always returns
> indexes 0,1,2. When iterating over layer's features, QgsFeature always
> contains a vector of all layer's attributes. In case the client has
> not requested attributes to be fetched, the attributes contain invalid
> values.
>
>
> 2. QgsFields (new class)
>
> Just like attributes within a feature are stored in a vector instead
> of map, also layer's fields are now stored in a vector. QgsFields is a
> new class that mimics QVector API and adds two more pieces of
> functionality:
>
> a) fast lookup of field index from name. When QgsFields is populated
> with fields, it creates a map of fields that facilitates fast lookups
>
> b) detection of field origin. When working with a vector layer, it is
> sometimes useful to find out origin of the field - whether it comes
> from provider, from a join or whether it is a newly added field (not
> committed). In the future we could add also expression-based fields,
> creating a field calculator that calculates the values on the fly.
>
>
> 3. QgsFeatureRequest (new class)
>
> Class that encapsulates requests for features to a vector layer or
> vector data provider. Right now in master branch, the request is
> defined by arguments to select() method. That's not very flexible nor
> simple to use. Feature request class allows easier extensibility in
> future (support generic expression filter, native provider's SQL
> filter...).
>
> Without any customization, the request will ask for all features with
> geometries and attributes - somehow better default that the current
> one that does not fetch attributes if their list is not explicitly
> given.
>
> (I'm not yet completely happy with the API of this class, so it may be
> changed to some degree. Suggestions are welcome.)
>
> Examples:
> - fetch all features:
>      QgsFeatureRequest()
> - fetch all features, only one attribute
>      QgsFeatureRequest().setSubsetOfAttributes(QStringList("myfield"),
> provider->fields())
> - fetch all features, without geometries
>      QgsFeatureRequest().setFlags(QgsFeatureRequest::NoGeometry)
> - fetch only features from particular extent
>      QgsFeatureRequest().setFilterRect(QgsRectangle(0,0,1,1))
> - fetch only one feature
>      QgsFeatureRequest().setFilterFid(45)
>
>
>
> 4. QgsFeatureIterator (new class)
>
> The iterator class allows iteration over features of a vector layer or
> a provider. It contains the usual nextFeature() method that fills
> given QgsFeature class with data.
>
> Internally, this class is a wrapper around QgsAbstractFeatureIterator
> interface that is implemented by each vector data provider and by
> vector layer. In theory we could use directly
> QgsAbstractFeatureIterator pointers, but this wrapper allows us to use
> it as a local variable, so it gets destroyed automatically when it
> gets out of scope, not requiring an explicit "delete" call that would
> be necessary with a pointer (easy to forget, right?)
>
>
> 5. Access to features
>
> Vector layer and providers implement one important method call:
> getFeatures(). It takes single argument (QgsFeatureRequest) and
> returns QgsFeatureIterator. This replaces select(), nextFeature(),
> rewind() and featureAtId() methods.
>
> This approach allows users to create multiple iterators over a vector
> layer (or a vector data provider). But currently that's not supported
> because this needs support in the providers. At some point, we could
> add support for simultaneous iterators - something that old API does
> not allow at all.
>
> When QgsFeatureIterator instance of a particular layer is closed (by
> calling close() or destructed), then a new getFeatures() call may be
> issued.
>
>
> 6. QgsVectorLayerEditBuffer (new class)
>
> All editing functionality of vector layer has been moved out of
> QgsVectorLayer into a new class that stores everything related to
> editing: added features, removed features, changed geometries, changed
> attribute values, added attributes, removed attributes. This class is
> accessible from QgsVectorLayer, but it exists only when the layer is
> in editing mode - it is deleted once features are rolled back or
> committed.
>
> The undo/redo support has been completely rewritten and greatly
> simplified: instead of one undo command that gathers changes within
> the edit buffer, there is now one undo command implementation for each
> action. The undo commands can be grouped together with QUndoStack
> macros. The new implementation ensures that the undo stack does not
> get out of sync, because all editing changes are stored onto undo
> stack (unlike current implementation in master branch where
> begin/end-UndoCommand() methods must be called before/after edit
> operations to ensure correct behavior of undo).
>
>
> 7. QgsVectorLayerEditUtils (new class)
>
> Advanced editing operations that operate on vector layers (e.g. add
> part) that can be composed from one or more simple edit operations
> have been moved out of QgsVectorLayer and its edit buffer, so that the
> vector layer API is not polluted by methods that do not need access to
> its private members.
>
>
> 8. QgsVectorLayerCache (new class)
>
> To speed up geometry editing, QGIS keeps a cache of geometries
> currently shown in map canvas. This cache has been decoupled from
> editing operations and moved to a separate class to keep things tidy.
> In the future we should be able to add more general caching scheme to
> allow faster rendering of vectors. Also, this might be a good place to
> store index of feature ID -> row number that is calculated every time
> when attribute table is opened.
>
>
> 9. Python
>
> Python API has been updated to support functionality from the points
> above, that is access by attribute name and support for python
> iterators, e.g.:
>
> for feature in layer.getFeatures(request):
>    print feature["road_id"]
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From matthias.kuhn at gmx.ch  Mon Jan  7 03:42:09 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Mon, 07 Jan 2013 12:42:09 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
Message-ID: <50EAB491.4010707@gmx.ch>

Hi Martin,

as already mentioned by Marco, there seems to be a problem with the 
latest fix. I have multiple postgres layers and after every redraw only 
one layer (random) is drawn (sometimes not even one layer).

When I quit QGIS I get a segmentation fault in the postgres provider 
(QgsPostgresConn, member methods called on a NULL pointer), backtrace 
attached.

Regards,
Matthias


On 01/06/2013 10:01 PM, Martin Dobias wrote:
> On Thu, Jan 3, 2013 at 10:37 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>> I've just been able to segfault:
>>
>> a = dataProvider.getFeatures( QgsFeatureRequest().setFilterFid( featureId )
>> )
>> a.rewind()
>> a.next()
> Hi Matthias
>
> I was able to replicate the problem in postgres provider - I have
> fixed the issues, please check again. By the way, funny thing is that
> rewind() call obviously never worked correctly in postgres provider
> until now (it executed "move 0" instead of "move absolute 0",
> resulting in no actual move).
>
> Please let me know if you encounter any other problems.
>
> Martin

-------------- next part --------------

Thread 1 (Thread 0x7ffff50f9880 (LWP 8014)):
#0  0x00007fffe214db8e in QgsPostgresConn::PQstatus (this=0x0) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/providers/postgres/qgspostgresconn.cpp:920
No locals.
#1  0x00007fffe214c469 in QgsPostgresConn::PQexec (this=0x0, query="CLOSE qgisf0", logError=false) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/providers/postgres/qgspostgresconn.cpp:748
        res = 0x5550a6
#2  0x00007fffe214ce5b in QgsPostgresConn::PQexecNR (this=0x0, query="CLOSE qgisf0", retry=true) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/providers/postgres/qgspostgresconn.cpp:825
        res = {
          mRes = 0x7fffffffc4a0
        }
        errorStatus = 32767
#3  0x00007fffe214cd2b in QgsPostgresConn::closeCursor (this=0x0, cursorName="qgisf0") at /home/kk/dev/cpp/qgis/Quantum-GIS/src/providers/postgres/qgspostgresconn.cpp:811
No locals.
#4  0x00007fffe215aae2 in QgsPostgresFeatureIterator::close (this=0x4892620) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/providers/postgres/qgspostgresfeatureiterator.cpp:192
No locals.
#5  0x00007fffe2159f57 in QgsPostgresFeatureIterator::~QgsPostgresFeatureIterator (this=0x4892620, __in_chrg=<optimized out>) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/providers/postgres/qgspostgresfeatureiterator.cpp:69
No locals.
#6  0x00007fffe215a000 in QgsPostgresFeatureIterator::~QgsPostgresFeatureIterator (this=0x4892620, __in_chrg=<optimized out>) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/providers/postgres/qgspostgresfeatureiterator.cpp:70
No locals.
#7  0x00007ffff5c88f7a in QgsAbstractFeatureIterator::deref (this=0x4892620) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsfeatureiterator.cpp:23
No locals.
#8  0x00007ffff5d372f9 in QgsFeatureIterator::~QgsFeatureIterator (this=0xb8159d8, __in_chrg=<optimized out>) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsfeatureiterator.h:95
No locals.
#9  0x00007ffff5d69903 in QgsVectorLayerFeatureIterator::~QgsVectorLayerFeatureIterator (this=0xb815940, __in_chrg=<optimized out>) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsvectorlayerfeatureiterator.cpp:48
No locals.
#10 0x00007ffff5d699d0 in QgsVectorLayerFeatureIterator::~QgsVectorLayerFeatureIterator (this=0xb815940, __in_chrg=<optimized out>) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsvectorlayerfeatureiterator.cpp:51
No locals.
#11 0x00007ffff5c88f7a in QgsAbstractFeatureIterator::deref (this=0xb815940) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsfeatureiterator.cpp:23
No locals.
#12 0x00007ffff5d372f9 in QgsFeatureIterator::~QgsFeatureIterator (this=0x48b8170, __in_chrg=<optimized out>) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsfeatureiterator.h:95
No locals.
#13 0x00007ffff5d412b3 in QgsVectorLayer::~QgsVectorLayer (this=0x48b7fb0, __in_chrg=<optimized out>) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsvectorlayer.cpp:179
No locals.
#14 0x00007ffff5d4167e in QgsVectorLayer::~QgsVectorLayer (this=0x48b7fb0, __in_chrg=<optimized out>) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsvectorlayer.cpp:204
No locals.
#15 0x00007ffff5cd5f9e in QgsMapLayerRegistry::removeMapLayers (this=0x125bc70, theLayerIds=QStringList<QString> = {...}, theEmitSignal=false) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsmaplayerregistry.cpp:116
        myId = "bodenbedeckungsflaechen_symbole20120316162620304"
        _container_ = {
          c = QStringList<QString> = {
            [0] = "bodenbedeckungsflaechen_symbole20120316162620304",
            [1] = "gebaeude20120316163628490",
            [2] = "grenzpunkte20120316164004001",
            [3] = "liegenschaften20120316163830734",
            [4] = "liegenschaften_beschriftung20120316164202086",
            [5] = "vw_manhole20120813141942568",
            [6] = "vw_network_node20121129124610435",
            [7] = "vw_network_segment20121129124546955",
            [8] = "vw_reach20120813141922936",
            [9] = "vw_special_structure20120817151756659"
          }, 
          brk = 0, 
          i = {
            i = 0xb802518
          }, 
          e = {
            i = 0xb802568
          }
        }
#16 0x00007ffff5cd6264 in QgsMapLayerRegistry::removeAllMapLayers (this=0x125bc70) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsmaplayerregistry.cpp:145
        myList = QStringList<QString> = {
          [0] = "bodenbedeckungsflaechen_symbole20120316162620304",
          [1] = "gebaeude20120316163628490",
          [2] = "grenzpunkte20120316164004001",
          [3] = "liegenschaften20120316163830734",
          [4] = "liegenschaften_beschriftung20120316164202086",
          [5] = "vw_manhole20120813141942568",
          [6] = "vw_network_node20121129124610435",
          [7] = "vw_network_segment20121129124546955",
          [8] = "vw_reach20120813141922936",
          [9] = "vw_special_structure20120817151756659"
        }
        it = {
          i = 0x4988390
        }
#17 0x000000000057cf8b in QgisApp::removeAllLayers (this=0x10043c0) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/app/qgisapp.cpp:5381
No locals.
#18 0x0000000000581eca in QgisApp::closeProject (this=0x10043c0) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/app/qgisapp.cpp:6198
No locals.
#19 0x000000000056edf3 in QgisApp::fileExit (this=0x10043c0) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/app/qgisapp.cpp:3041
No locals.
#20 0x0000000000581f4c in QgisApp::closeEvent (this=0x10043c0, event=0x7fffffffd230) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/app/qgisapp.cpp:6236
No locals.
#21 0x00000035f101a140 in QWidget::event (this=0x10043c0, event=0x7fffffffd230) at kernel/qwidget.cpp:8544
        d = 0x10040a0
#22 0x00000035f13dde1b in QMainWindow::event (this=0x10043c0, event=0x7fffffffd230) at widgets/qmainwindow.cpp:1478
        d = 0x10040a0
#23 0x0000000000559e10 in QgisApp::event (this=0x10043c0, event=0x7fffffffd230) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/app/qgisapp.cpp:826
        done = false
#24 0x00000035f0fca5ac in QApplicationPrivate::notify_helper (this=this at entry=0xe1b850, receiver=receiver at entry=0x10043c0, e=e at entry=0x7fffffffd230) at kernel/qapplication.cpp:4562
        consumed = <optimized out>
#25 0x00000035f0fcea2a in QApplication::notify (this=0x7fffffffdd50, receiver=0x10043c0, e=0x7fffffffd230) at kernel/qapplication.cpp:4423
        d = 0xe1b850
        res = false
#26 0x00007ffff5c3c9ba in QgsApplication::notify (this=0x7fffffffdd50, receiver=0x10043c0, event=0x7fffffffd230) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/core/qgsapplication.cpp:222
        done = true
#27 0x00000035f097799e in QCoreApplication::notifyInternal (this=0x7fffffffdd50, receiver=0x10043c0, event=0x7fffffffd230) at kernel/qcoreapplication.cpp:946
        threadData = 0xe1b7b0
        returnValue = <optimized out>
        result = false
        cbdata = {0x10043c0, 0x7fffffffd230, 0x7fffffffd1af}
        d = <optimized out>
#28 0x00000035f1013c31 in sendEvent (event=<optimized out>, receiver=<optimized out>) at ../../src/corelib/kernel/qcoreapplication.h:231
No locals.
#29 QWidgetPrivate::close_helper (this=0x10040a0, mode=QWidgetPrivate::CloseWithSpontaneousEvent) at kernel/qwidget.cpp:7941
        e = {
          <QEvent> = {
            _vptr.QEvent = 0x35f1a63690, 
            static staticMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a68f00 "QEvent", 
                data = 0x35f0a69900, 
                extradata = 0x0
              }
            }, 
            d = 0x0, 
            t = 19, 
            posted = 0, 
            spont = 1, 
            m_accept = 0, 
            reserved = 7733
          }, <No data fields>}
        parentWidget = {
          o = 0x0
        }
        that = {
          o = 0x10043c0
        }
        isMain = false
        quitOnClose = <optimized out>
#30 0x00000035f104657f in QApplication::x11ClientMessage (this=<optimized out>, w=0x10043c0, event=<optimized out>, passive_only=<optimized out>) at kernel/qapplication_x11.cpp:3174
        a = <optimized out>
        widget = 0x10043c0
#31 0x00000035f1044da2 in QApplication::x11ProcessEvent (this=0x7fffffffdd50, event=0x7fffffffd7f0) at kernel/qapplication_x11.cpp:3799
        loopLevelCounter = {
          threadData = 0xe1b7b0
        }
        widget = 0x10043c0
        keywidget = <optimized out>
        grabbed = false
        d = 0xe1b850
#32 0x00000035f106a90c in x11EventSourceDispatch (s=s at entry=0xe1f270, callback=0, user_data=0x0) at kernel/qguieventdispatcher_glib.cpp:148
        event = {
          type = 33, 
          xany = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459
          }, 
          xkey = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            root = 296, 
            subwindow = 32, 
            time = 294, 
            x = 12038288, 
            y = 0, 
            x_root = -1786493938, 
            y_root = -1, 
            state = 34641472, 
            keycode = 0, 
            same_screen = -205012128
          }, 
          xbutton = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            root = 296, 
            subwindow = 32, 
            time = 294, 
            x = 12038288, 
            y = 0, 
            x_root = -1786493938, 
            y_root = -1, 
            state = 34641472, 
            button = 0, 
            same_screen = -205012128
          }, 
          xmotion = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            root = 296, 
            subwindow = 32, 
            time = 294, 
            x = 12038288, 
            y = 0, 
            x_root = -1786493938, 
            y_root = -1, 
            state = 34641472, 
            is_hint = 0 '\000', 
            same_screen = -205012128
          }, 
          xcrossing = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            root = 296, 
            subwindow = 32, 
            time = 294, 
            x = 12038288, 
            y = 0, 
            x_root = -1786493938, 
            y_root = -1, 
            mode = 34641472, 
            detail = 0, 
            same_screen = -205012128, 
            focus = -1, 
            state = 75965920
          }, 
          xfocus = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            mode = 296, 
            detail = 0
          }, 
          xexpose = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            x = 296, 
            y = 0, 
            width = 32, 
            height = 0, 
            count = 294
          }, 
          xgraphicsexpose = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            drawable = 46137459, 
            x = 296, 
            y = 0, 
            width = 32, 
            height = 0, 
            count = 294, 
            major_code = 0, 
            minor_code = 12038288
          }, 
          xnoexpose = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            drawable = 46137459, 
            major_code = 296, 
            minor_code = 0
          }, 
          xvisibility = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            state = 296
          }, 
          xcreatewindow = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            parent = 46137459, 
            window = 296, 
            x = 32, 
            y = 0, 
            width = 294, 
            height = 0, 
            border_width = 12038288, 
            override_redirect = 0
          }, 
          xdestroywindow = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            event = 46137459, 
            window = 296
          }, 
          xunmap = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            event = 46137459, 
            window = 296, 
            from_configure = 32
          }, 
          xmap = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            event = 46137459, 
            window = 296, 
            override_redirect = 32
          }, 
          xmaprequest = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            parent = 46137459, 
            window = 296
          }, 
          xreparent = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            event = 46137459, 
            window = 296, 
            parent = 32, 
            x = 294, 
            y = 0, 
            override_redirect = 12038288
          }, 
          xconfigure = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            event = 46137459, 
            window = 296, 
            x = 32, 
            y = 0, 
            width = 294, 
            height = 0, 
            border_width = 12038288, 
            above = 18446744071923057678, 
            override_redirect = 34641472
          }, 
          xgravity = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            event = 46137459, 
            window = 296, 
            x = 32, 
            y = 0
          }, 
          xresizerequest = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            width = 296, 
            height = 0
          }, 
          xconfigurerequest = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            parent = 46137459, 
            window = 296, 
            x = 32, 
            y = 0, 
            width = 294, 
            height = 0, 
            border_width = 12038288, 
            above = 18446744071923057678, 
            detail = 34641472, 
            value_mask = 18446744073504539488
          }, 
          xcirculate = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            event = 46137459, 
            window = 296, 
            place = 32
          }, 
          xcirculaterequest = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            parent = 46137459, 
            window = 296, 
            place = 32
          }, 
          xproperty = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            atom = 296, 
            time = 32, 
            state = 294
          }, 
          xselectionclear = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            selection = 296, 
            time = 32
          }, 
          xselectionrequest = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            owner = 46137459, 
            requestor = 296, 
            selection = 32, 
            target = 294, 
            property = 12038288, 
            time = 18446744071923057678
          }, 
          xselection = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            requestor = 46137459, 
            selection = 296, 
            target = 32, 
            property = 294, 
            time = 12038288
          }, 
          xcolormap = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            colormap = 296, 
            c_new = 32, 
            state = 0
          }, 
          xclient = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            message_type = 296, 
            format = 32, 
            data = {
              b = "&\001\000\000\000\000\000\000\220\260\267\000\000\000\000\000\016D\204\225", 
              s = {294, 0, 0, 0, -20336, 183, 0, 0, 17422, -27260}, 
              l = {294, 12038288, -1786493938, 34641472, -205012128}
            }
          }, 
          xmapping = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            request = 296, 
            first_keycode = 0, 
            count = 32
          }, 
          xerror = {
            type = 33, 
            display = 0x11d7d, 
            resourceid = 1, 
            serial = 14906608, 
            error_code = 115 's', 
            request_code = 0 '\000', 
            minor_code = 192 '\300'
          }, 
          xkeymap = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            window = 46137459, 
            key_vector = "(\001\000\000\000\000\000\000 \000\000\000\000\000\000\000&\001\000\000\000\000\000\000\220\260\267\000\000\000\000"
          }, 
          xgeneric = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            extension = 46137459, 
            evtype = 0
          }, 
          xcookie = {
            type = 33, 
            serial = 73085, 
            send_event = 1, 
            display = 0xe374f0, 
            extension = 46137459, 
            evtype = 0, 
            cookie = 296, 
            data = 0x20
          }, 
          pad = {33, 73085, 1, 14906608, 46137459, 296, 32, 294, 12038288, -1786493938, 34641472, -205012128, 75965920, 14132000, 14132000, 14132000, 6850472837119, -4294967234, 75966272, -1, 913, 75948592, 75964848, 75966144}
        }
        source = 0xe1f270
        marker = 73086
#33 0x0000003295847825 in g_main_dispatch (context=0xe1d500) at gmain.c:2539
        dispatch = 0x35f106a7e0 <x11EventSourceDispatch(GSource*, GSourceFunc, gpointer)>
        was_in_call = 0
        user_data = 0x0
        callback = 0
        cb_funcs = 0x0
        cb_data = 0x0
        current_source_link = {
          data = 0xe1f270, 
          next = 0x0
        }
        need_destroy = <optimized out>
        source = 0xe1f270
        current = 0xfcf530
        i = <optimized out>
#34 g_main_context_dispatch (context=context at entry=0xe1d500) at gmain.c:3075
No locals.
#35 0x0000003295847b58 in g_main_context_iterate (context=context at entry=0xe1d500, block=block at entry=1, dispatch=dispatch at entry=1, self=<optimized out>) at gmain.c:3146
        max_priority = 2147483647
        timeout = 8907
        some_ready = 1
        nfds = <optimized out>
        allocated_nfds = <optimized out>
        fds = 0xfeb290
#36 0x0000003295847c14 in g_main_context_iteration (context=0xe1d500, may_block=1) at gmain.c:3207
        retval = <optimized out>
#37 0x00000035f09a5fc6 in QEventDispatcherGlib::processEvents (this=0xe1ca60, flags=...) at kernel/qeventdispatcher_glib.cpp:424
        d = 0xe1ca80
        canWait = <optimized out>
        savedFlags = {
          i = 0
        }
        result = <optimized out>
#38 0x00000035f106a5ee in QGuiEventDispatcherGlib::processEvents (this=<optimized out>, flags=...) at kernel/qguieventdispatcher_glib.cpp:207
        d = 0xe1ca80
        saved_flags = {
          i = 0
        }
        returnValue = false
#39 0x00000035f09766ef in QEventLoop::processEvents (this=this at entry=0x7fffffffdbc0, flags=...) at kernel/qeventloop.cpp:149
        d = 0xb779930
#40 0x00000035f0976978 in QEventLoop::exec (this=0x7fffffffdbc0, flags=...) at kernel/qeventloop.cpp:204
        d = 0xb779930
        locker = {
          val = 14793368
        }
        app = 0x7fffffffdd50
#41 0x00000035f097b768 in QCoreApplication::exec () at kernel/qcoreapplication.cpp:1218
        threadData = 0xe1b7b0
        eventLoop = {
          <QObject> = {
            _vptr.QObject = 0x35f0cd2630, 
            static staticMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a561e0 "QObject", 
                data = 0x35f0a56280, 
                extradata = 0x35f0ccfb40
              }
            }, 
            static staticMetaObjectExtraData = {
              objects = 0x0, 
              static_metacall = 0x35f098e0c0 <QObject::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
            }, 
            d_ptr = {
              d = 0xb779930
            }, 
            static staticQtMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a5f120 "Qt", 
                data = 0x35f0a62a40, 
                extradata = 0x0
              }
            }
          }, 
          members of QEventLoop: 
          static staticMetaObject = {
            d = {
              superdata = 0xd7a080, 
              stringdata = 0x35f0a68d00 "QEventLoop", 
              data = 0x35f0a68d20, 
              extradata = 0x35f0cd26c0
            }
          }, 
          static staticMetaObjectExtraData = {
            objects = 0x0, 
            static_metacall = 0x35f09d76d0 <QEventLoop::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
          }
        }
        returnCode = <optimized out>
#42 0x0000000000554124 in main (argc=2, argv=0x7fffffffe518) at /home/kk/dev/cpp/qgis/Quantum-GIS/src/app/main.cpp:859
        customizationsettings = 0xfc7d00
        mySettings = {
          <QObject> = {
            _vptr.QObject = 0x35f0cd1930, 
            static staticMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a561e0 "QObject", 
                data = 0x35f0a56280, 
                extradata = 0x35f0ccfb40
              }
            }, 
            static staticMetaObjectExtraData = {
              objects = 0x0, 
              static_metacall = 0x35f098e0c0 <QObject::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
            }, 
            d_ptr = {
              d = 0xfccdf0
            }, 
            static staticQtMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a5f120 "Qt", 
                data = 0x35f0a62a40, 
                extradata = 0x0
              }
            }
          }, 
          members of QSettings: 
          static staticMetaObject = {
            d = {
              superdata = 0xd7a080, 
              stringdata = 0x35f0a67ee0 "QSettings", 
              data = 0x35f0a67f00, 
              extradata = 0x35f0cd19c0
            }
          }, 
          static staticMetaObjectExtraData = {
            objects = 0x0, 
            static_metacall = 0x35f09d6320 <QSettings::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
          }
        }
        mypSplash = 0xe7af90
        qgis = 0x10043c0
        retval = 32767
        myLocaleOverrideFlag = true
        myLocale = ""
        myPixmap = {
          <QPaintDevice> = {
            _vptr.QPaintDevice = 0x35f1a66cf0, 
            painters = 0
          }, 
          members of QPixmap: 
          data = {
            d = 0xfdf050
          }
        }
        style = "GTK+"
        i18nPath = "/home/kk/dev/cpp/qgis/qtcreator-build/output/i18n"
        myUserLocale = "en_US"
        qgistor = {
          <QObject> = {
            _vptr.QObject = 0x35f0cd2ab0, 
            static staticMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a561e0 "QObject", 
                data = 0x35f0a56280, 
                extradata = 0x35f0ccfb40
              }
            }, 
            static staticMetaObjectExtraData = {
              objects = 0x0, 
              static_metacall = 0x35f098e0c0 <QObject::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
            }, 
            d_ptr = {
              d = 0xfe0a30
            }, 
            static staticQtMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a5f120 "Qt", 
                data = 0x35f0a62a40, 
                extradata = 0x0
              }
            }
          }, 
          members of QTranslator: 
          static staticMetaObject = {
            d = {
              superdata = 0xd7a080, 
              stringdata = 0x35f0a6a1a0 "QTranslator", 
              data = 0x35f0a6a1c0, 
              extradata = 0x35f0cd2b40
            }
          }, 
          static staticMetaObjectExtraData = {
            objects = 0x0, 
            static_metacall = 0x35f09d7e40 <QTranslator::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
          }
        }
        qttor = {
          <QObject> = {
            _vptr.QObject = 0x35f0cd2ab0, 
            static staticMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a561e0 "QObject", 
                data = 0x35f0a56280, 
                extradata = 0x35f0ccfb40
              }
            }, 
            static staticMetaObjectExtraData = {
              objects = 0x0, 
              static_metacall = 0x35f098e0c0 <QObject::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
            }, 
            d_ptr = {
              d = 0xfe0630
            }, 
            static staticQtMetaObject = {
              d = {
                superdata = 0x0, 
                stringdata = 0x35f0a5f120 "Qt", 
                data = 0x35f0a62a40, 
                extradata = 0x0
              }
            }
          }, 
          members of QTranslator: 
          static staticMetaObject = {
            d = {
              superdata = 0xd7a080, 
              stringdata = 0x35f0a6a1a0 "QTranslator", 
              data = 0x35f0a6a1c0, 
              extradata = 0x35f0cd2b40
            }
          }, 
          static staticMetaObjectExtraData = {
            objects = 0x0, 
            static_metacall = 0x35f09d7e40 <QTranslator::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
          }
        }
        mySplashPath = ":/images/splash/"
        mySnapshotHeight = 600
        myHideSplash = false
        myRestorePlugins = true
        pythonfile = ""
        myUseGuiFlag = true
        mySnapshotFileName = ""
        mySnapshotWidth = 800
        myTranslationCode = "en_US"
        configpath = ""
        optionpath = ""
        myCustomization = true
        myInitialExtent = ""
        customizationfile = ""
        myApp = {
          <QApplication> = {
            <QCoreApplication> = {
              <QObject> = {
                _vptr.QObject = 0x7ffff618f4f0, 
                static staticMetaObject = {
                  d = {
                    superdata = 0x0, 
                    stringdata = 0x35f0a561e0 "QObject", 
                    data = 0x35f0a56280, 
                    extradata = 0x35f0ccfb40
                  }
                }, 
                static staticMetaObjectExtraData = {
                  objects = 0x0, 
                  static_metacall = 0x35f098e0c0 <QObject::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
                }, 
                d_ptr = {
                  d = 0xe1b850
                }, 
                static staticQtMetaObject = {
                  d = {
                    superdata = 0x0, 
                    stringdata = 0x35f0a5f120 "Qt", 
                    data = 0x35f0a62a40, 
                    extradata = 0x0
                  }
                }
              }, 
              members of QCoreApplication: 
              static staticMetaObject = {
                d = {
                  superdata = 0xd7a080, 
                  stringdata = 0x35f0a68da0 "QCoreApplication", 
                  data = 0x35f0a68e40, 
                  extradata = 0x35f0cd27a0
                }
              }, 
              static staticMetaObjectExtraData = {
                objects = 0x0, 
                static_metacall = 0x35f09d77b0 <QCoreApplication::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
              }, 
              static self = 0x0
            }, 
            members of QApplication: 
            static staticMetaObject = {
              d = {
                superdata = 0x35f0cd2780, 
                stringdata = 0x35f163b220 "QApplication", 
                data = 0x35f163b460, 
                extradata = 0x35f1a62ea0
              }
            }, 
            static staticMetaObjectExtraData = {
              objects = 0x0, 
              static_metacall = 0x35f0fcdcd0 <QApplication::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
            }
          }, 
          members of QgsApplication: 
          static staticMetaObject = {
            d = {
              superdata = 0x35f1a62e80, 
              stringdata = 0x7ffff5eb5c40 "QgsApplication", 
              data = 0x7ffff5eb5be0, 
              extradata = 0x7ffff618f4a0
            }
          }, 
          static staticMetaObjectExtraData = {
            objects = 0x0, 
            static_metacall = 0x7ffff5e67da8 <QgsApplication::qt_static_metacall(QObject*, QMetaObject::Call, int, void**)>
          }, 
          static mFileOpenEventReceiver10900 = 0x10043c0, 
          static mFileOpenEventList10900 = {
            <QList<QString>> = empty QList<QString>, <No data fields>}, 
          static mPrefixPath10900 = {
            static null = {<No data fields>}, 
            static shared_null = {
              ref = {
                _q_value = 1
              }, 
              alloc = 0, 
              size = 0, 
              data = 0xd7a33a, 
              clean = 0, 
              simpletext = 0, 
              righttoleft = 0, 
              asciiCache = 0, 
              capacity = 0, 
              reserved = 0, 
              array = {0}
            }, 
            static shared_empty = {
              ref = {
                _q_value = 935
              }, 
              alloc = 0, 
              size = 0, 
              data = 0x35f0cd48da, 
              clean = 0, 
              simpletext = 0, 
              righttoleft = 0, 
              asciiCache = 0, 
              capacity = 0, 
              reserved = 0, 
              array = {0}
            }, 
            d = 0xd7a320, 
            static codecForCStrings = 0x0
          }, 
          static mPluginPath10900 = {
            static null = <same as static member of an already seen type>, 
            static shared_null = <same as static member of an already seen type>, 
            static shared_empty = <same as static member of an already seen type>, 
            d = 0xfc9c80, 
            static codecForCStrings = 0x0
          }, 
          static mPkgDataPath10900 = {
            static null = <same as static member of an already seen type>, 
            static shared_null = <same as static member of an already seen type>, 
            static shared_empty = <same as static member of an already seen type>, 
            d = 0xfc6120, 
            static codecForCStrings = 0x0
          }, 
          static mLibraryPath10900 = {
            static null = <same as static member of an already seen type>, 
            static shared_null = <same as static member of an already seen type>, 
            static shared_empty = <same as static member of an already seen type>, 
            d = 0xfc9f10, 
            static codecForCStrings = 0x0
          }, 
          static mLibexecPath10900 = {
            static null = <same as static member of an already seen type>, 
            static shared_null = <same as static member of an already seen type>, 
            static shared_empty = <same as static member of an already seen type>, 
            d = 0xfca130, 
            static codecForCStrings = 0x0
          }, 
          static mThemeName10900 = {
            static null = <same as static member of an already seen type>, 
            static shared_null = <same as static member of an already seen type>, 
            static shared_empty = <same as static member of an already seen type>, 
            d = 0x106e9b0, 
            static codecForCStrings = 0x0
          }, 
          static mDefaultSvgPaths10900 = {
            <QList<QString>> = QList<QString> = {
              [0] = "/home/kk/dev/cpp/qgis/Quantum-GIS/images/svg/",
              [1] = "/home/kk/.qgis//svg/",
              [2] = "/images/svg/"
            }, <No data fields>}, 
          static mConfigPath10900 = {
            static null = <same as static member of an already seen type>, 
            static shared_null = <same as static member of an already seen type>, 
            static shared_empty = <same as static member of an already seen type>, 
            d = 0xfc89d0, 
            static codecForCStrings = 0x0
          }, 
          static mRunningFromBuildDir10900 = false, 
          static mBuildSourcePath10900 = {
            static null = <same as static member of an already seen type>, 
            static shared_null = <same as static member of an already seen type>, 
            static shared_empty = <same as static member of an already seen type>, 
            d = 0x0, 
            static codecForCStrings = 0x0
          }, 
          static mBuildOutputPath10900 = {
            static null = <same as static member of an already seen type>, 
            static shared_null = <same as static member of an already seen type>, 
            static shared_empty = <same as static member of an already seen type>, 
            d = 0xfc7120, 
            static codecForCStrings = 0x0
          }, 
          static mGdalSkipList10900 = {
            <QList<QString>> = <error reading variable: Cannot access memory at address 0xc>, <No data fields>}
        }


From matthias.kuhn at gmx.ch  Mon Jan  7 07:13:28 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Mon, 07 Jan 2013 16:13:28 +0100
Subject: [Qgis-developer] QgsColorButton
Message-ID: <50EAE618.9000001@gmx.ch>

Hi all,

I've just had a look at QgsColorButton.

There are two implementations available (QgsColorButton and 
QgsColorButtonV2). Would it be okay to remove one of them before the 2.0 
release? If yes, which one should be removed?

I also noticed, that in several places, the onClick event is handled to 
open a QColorDialog and assign the selected color to the button.
Wouldn't it be nice, if this behavior would be part of the widget 
implementation itself?

Regards,
Matthias

From werner.macho at gmail.com  Mon Jan  7 07:44:53 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Mon, 7 Jan 2013 16:44:53 +0100
Subject: [Qgis-developer] QgsColorButton
In-Reply-To: <50EAE618.9000001@gmx.ch>
References: <50EAE618.9000001@gmx.ch>
Message-ID: <CA+3oMjuN-U_My54Drtp8=6MT--_Exi66G1FP4s-CbJae1V646Q@mail.gmail.com>

Having nothing to do with the code I'd vote for removing QgsColorButton and
letting the V2 do all the work (sounds newer to me - probably the original
is only used by old dialogues)
Inserting it in the Widget itself sounds also resonable to me .. probably
search for some special cases where it would not be needed - but I think it
does not hurt to have it implemented in the Widget ..
Thanks for doing all this work!

kind regards
Werner


On Mon, Jan 7, 2013 at 4:13 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:

> Hi all,
>
> I've just had a look at QgsColorButton.
>
> There are two implementations available (QgsColorButton and
> QgsColorButtonV2). Would it be okay to remove one of them before the 2.0
> release? If yes, which one should be removed?
>
> I also noticed, that in several places, the onClick event is handled to
> open a QColorDialog and assign the selected color to the button.
> Wouldn't it be nice, if this behavior would be part of the widget
> implementation itself?
>
> Regards,
> Matthias
> ______________________________**_________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130107/5326f564/attachment.html>

From wonder.sk at gmail.com  Mon Jan  7 07:52:14 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 7 Jan 2013 16:52:14 +0100
Subject: [Qgis-developer] QgsColorButton
In-Reply-To: <CA+3oMjuN-U_My54Drtp8=6MT--_Exi66G1FP4s-CbJae1V646Q@mail.gmail.com>
References: <50EAE618.9000001@gmx.ch>
	<CA+3oMjuN-U_My54Drtp8=6MT--_Exi66G1FP4s-CbJae1V646Q@mail.gmail.com>
Message-ID: <CAC2XbFcpioP6MAou3y=OoH=OmfY7ttyWxe2aZh8_pUAb0k0uyQ@mail.gmail.com>

On Mon, Jan 7, 2013 at 4:44 PM, Werner Macho <werner.macho at gmail.com> wrote:
> Having nothing to do with the code I'd vote for removing QgsColorButton and
> letting the V2 do all the work (sounds newer to me - probably the original
> is only used by old dialogues)

Actually QgsColorButtonV2 was my experiment with a different look of
the button. But it seemed that most people prefer the original one
(QgsColorButton). I have been just too lazy until now to remove V2. In
any case +1 to remove it.

Martin

From werner.macho at gmail.com  Mon Jan  7 08:15:15 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Mon, 7 Jan 2013 17:15:15 +0100
Subject: [Qgis-developer] QgsColorButton
In-Reply-To: <CAC2XbFcpioP6MAou3y=OoH=OmfY7ttyWxe2aZh8_pUAb0k0uyQ@mail.gmail.com>
References: <50EAE618.9000001@gmx.ch>
	<CA+3oMjuN-U_My54Drtp8=6MT--_Exi66G1FP4s-CbJae1V646Q@mail.gmail.com>
	<CAC2XbFcpioP6MAou3y=OoH=OmfY7ttyWxe2aZh8_pUAb0k0uyQ@mail.gmail.com>
Message-ID: <CA+3oMjtpa_fbdyGcOHS7P-TR-zWb43XFTRDuNMtvV5rapt_U6g@mail.gmail.com>

OK - Then I was wrong with my guess .. :)
@Martin .. is V2 a better implementation or is it ok to stick with the
original code? Just because most people prefer to use the original code
does not mean that they should not use V2 if it is better ..
 But I see you already voted for removing V2

anyway - what about implementation into the Widget?

kind regards
Werner


On Mon, Jan 7, 2013 at 4:52 PM, Martin Dobias <wonder.sk at gmail.com> wrote:

> On Mon, Jan 7, 2013 at 4:44 PM, Werner Macho <werner.macho at gmail.com>
> wrote:
> > Having nothing to do with the code I'd vote for removing QgsColorButton
> and
> > letting the V2 do all the work (sounds newer to me - probably the
> original
> > is only used by old dialogues)
>
> Actually QgsColorButtonV2 was my experiment with a different look of
> the button. But it seemed that most people prefer the original one
> (QgsColorButton). I have been just too lazy until now to remove V2. In
> any case +1 to remove it.
>
> Martin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130107/4cb5d42d/attachment.html>

From wonder.sk at gmail.com  Mon Jan  7 08:29:21 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 7 Jan 2013 17:29:21 +0100
Subject: [Qgis-developer] QgsColorButton
In-Reply-To: <CA+3oMjtpa_fbdyGcOHS7P-TR-zWb43XFTRDuNMtvV5rapt_U6g@mail.gmail.com>
References: <50EAE618.9000001@gmx.ch>
	<CA+3oMjuN-U_My54Drtp8=6MT--_Exi66G1FP4s-CbJae1V646Q@mail.gmail.com>
	<CAC2XbFcpioP6MAou3y=OoH=OmfY7ttyWxe2aZh8_pUAb0k0uyQ@mail.gmail.com>
	<CA+3oMjtpa_fbdyGcOHS7P-TR-zWb43XFTRDuNMtvV5rapt_U6g@mail.gmail.com>
Message-ID: <CAC2XbFfjwGA-MK8GAiNpbgbOid1Dwpu2Y2v9X4NByVbwv1-eDg@mail.gmail.com>

On Mon, Jan 7, 2013 at 5:15 PM, Werner Macho <werner.macho at gmail.com> wrote:
> OK - Then I was wrong with my guess .. :)
> @Martin .. is V2 a better implementation or is it ok to stick with the
> original code? Just because most people prefer to use the original code does
> not mean that they should not use V2 if it is better ..
>  But I see you already voted for removing V2

No, in this case V2 is not better, it's just different :-)


> anyway - what about implementation into the Widget?

Automatic handling of the button click (+signal for color change) may
be useful. But prior to changing that I would suggest looking at the
code to see if we need to handle some special cases. For example, I
think for some color dialogs we use ShowAlphaChannel option for
QColorDialog.

Martin

From matthias.kuhn at gmx.ch  Mon Jan  7 08:34:35 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Mon, 07 Jan 2013 17:34:35 +0100
Subject: [Qgis-developer] QgsColorButton
In-Reply-To: <CAC2XbFfjwGA-MK8GAiNpbgbOid1Dwpu2Y2v9X4NByVbwv1-eDg@mail.gmail.com>
References: <50EAE618.9000001@gmx.ch>
	<CA+3oMjuN-U_My54Drtp8=6MT--_Exi66G1FP4s-CbJae1V646Q@mail.gmail.com>
	<CAC2XbFcpioP6MAou3y=OoH=OmfY7ttyWxe2aZh8_pUAb0k0uyQ@mail.gmail.com>
	<CA+3oMjtpa_fbdyGcOHS7P-TR-zWb43XFTRDuNMtvV5rapt_U6g@mail.gmail.com>
	<CAC2XbFfjwGA-MK8GAiNpbgbOid1Dwpu2Y2v9X4NByVbwv1-eDg@mail.gmail.com>
Message-ID: <50EAF91B.7080003@gmx.ch>

On 01/07/2013 05:29 PM, Martin Dobias wrote:
> On Mon, Jan 7, 2013 at 5:15 PM, Werner Macho <werner.macho at gmail.com> wrote:
>> OK - Then I was wrong with my guess .. :)
>> @Martin .. is V2 a better implementation or is it ok to stick with the
>> original code? Just because most people prefer to use the original code does
>> not mean that they should not use V2 if it is better ..
>>   But I see you already voted for removing V2
> No, in this case V2 is not better, it's just different :-)
V2 is used in symbology, while the old one is used in diagrams.

I don't care too much, which one should be removed. I just prefer to 
keep it consistent.

>
>
>> anyway - what about implementation into the Widget?
> Automatic handling of the button click (+signal for color change) may
> be useful. But prior to changing that I would suggest looking at the
> code to see if we need to handle some special cases. For example, I
> think for some color dialogs we use ShowAlphaChannel option for
> QColorDialog.
>
> Martin
Passing optional ColorDialogOptionsto the QgsColorButton should help in 
this case.
I'll see if I stumble across any other special needs.

From larrys at dakotacarto.com  Mon Jan  7 10:11:27 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Mon, 7 Jan 2013 11:11:27 -0700
Subject: [Qgis-developer] Git errors on master branch fetch
Message-ID: <CA+nQOR8=mh0XComVVvQJSwP-DGWgkc_x8uwzhD5qSXKKy-19NQ@mail.gmail.com>

Hi,

I develop on 3 different machines and since Jan. 4th (I think) I am
getting the following git errors on all machines when doing a fetch
for master:

git fetch --prune qgisupstream

error: Ref refs/remotes/qgisupstream/master is at
314d144b4dc2ddba991cfd796550f26fa026aa64 but expected
b2932deca188a59d2eeffbaf06acda748a31fd93
>From github.com:qgis/Quantum-GIS
 ! b2932de..314d144  master     -> qgisupstream/master  (unable to
update local ref)

error: Ref refs/remotes/qgisupstream/new_vector_api is at
353e7ab8cd7eaeea77b23a146d90be5283b26166 but expected
5b008006658b221eb080b64aca215fc879b6ca72
 ! 5b00800..353e7ab  new_vector_api -> qgisupstream/new_vector_api
(unable to update local ref)
Completed with errors, see above

I checked through the recent history to see if someone accidentally
included an existing, pushed commit into a rebase operation, but could
not find any discrepancies.

For qgisupstream/master the two commits have identical messages, but I
think that should not matter (unless it is a bug in my git GUI client)
and the qgisupstream/new_vector_api branch has different messages.

Anyone have any ideas on what's going on here? Anyone else get those errors?

Regards,

Larry

From werner.macho at gmail.com  Mon Jan  7 11:30:16 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Mon, 07 Jan 2013 20:30:16 +0100
Subject: [Qgis-developer] Git errors on master branch fetch
In-Reply-To: <CA+nQOR8=mh0XComVVvQJSwP-DGWgkc_x8uwzhD5qSXKKy-19NQ@mail.gmail.com>
References: <CA+nQOR8=mh0XComVVvQJSwP-DGWgkc_x8uwzhD5qSXKKy-19NQ@mail.gmail.com>
Message-ID: <50EB2248.10609@gmail.com>

On 07/01/13 19:11, Larry Shaffer wrote:
> Hi,
>
> I develop on 3 different machines and since Jan. 4th (I think) I am
> getting the following git errors on all machines when doing a fetch
> for master:
>
> git fetch --prune qgisupstream
Hi Larry!
Not having such an error here - just tested with your git fetch command ..
I usually update my master only by
git pull --rebase upstream master

What happens when you try to clean out your own tree with

git reset --hard HEAD

at the branch where the problem occurs

kind regards
Werner




From a.neumann at carto.net  Mon Jan  7 11:46:07 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 07 Jan 2013 20:46:07 +0100
Subject: [Qgis-developer] QTiles plugin and antialiasing
Message-ID: <50EB25FF.1040701@carto.net>

Hi,

Thank you for providing the QTiles plugin!

I tested the QTiles plugin today and noticed that Antialiasing is turned
off in the rendering. Could this be enabled somehow to improve the
rendering quality?

Also - could there be some initial instructions or a template how I can
use these tiles in a Web-GIS mapping? I would assume in OpenLayers - but
what would be the Layer type in OpenLayers to include these tiles?

Thank you for your help,
Andreas

From wonder.sk at gmail.com  Mon Jan  7 14:04:10 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 7 Jan 2013 23:04:10 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <50EAB491.4010707@gmx.ch>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
	<50EAB491.4010707@gmx.ch>
Message-ID: <CAC2XbFcEkcaWn9Tcopd8whQ=Pz2ydMXa0zAKisTBWG1R9-9R+A@mail.gmail.com>

On Mon, Jan 7, 2013 at 12:42 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
> Hi Martin,
>
> as already mentioned by Marco, there seems to be a problem with the latest
> fix. I have multiple postgres layers and after every redraw only one layer
> (random) is drawn (sometimes not even one layer).
>
> When I quit QGIS I get a segmentation fault in the postgres provider
> (QgsPostgresConn, member methods called on a NULL pointer), backtrace
> attached.

Matthias,

the latest fix should solve both problems. In the previous commit I
have removed automatic closing of postgres cursor when iterating over
features finishes and this caused that a new cursor (with the same
name) was being opened while the old one still existed.

Martin

From cavallini at faunalia.it  Mon Jan  7 23:02:35 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 08 Jan 2013 08:02:35 +0100
Subject: [Qgis-developer] Spatial queries plugin should ignore very
 small intersections
In-Reply-To: <20130107100823.GG3763@gnash>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
	<1357476190576-5025821.post@n6.nabble.com>
	<50EA967F.6090306@faunalia.it>
	<1357552270008-5025910.post@n6.nabble.com>
	<20130107100823.GG3763@gnash>
Message-ID: <50EBC48B.3090808@faunalia.it>

Il 07/01/2013 11:08, Sandro Santilli ha scritto:

> No snapping, it simply turns invalid representations into valid ones.
> There's no "cleaning" (tolerance based) performed.

we can do this with another command; the two may be chained into a sextante "cleanup"
model.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From matthias.kuhn at gmx.ch  Mon Jan  7 23:43:20 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 08 Jan 2013 08:43:20 +0100
Subject: [Qgis-developer] QTiles plugin and antialiasing
In-Reply-To: <50EB25FF.1040701@carto.net>
References: <50EB25FF.1040701@carto.net>
Message-ID: <50EBCE18.2030809@gmx.ch>

Hi,

I used it yesterday with a raster image and would love to see resampling 
included in there.
+1 for this.

Regards,
Matthias


On 01/07/2013 08:46 PM, Andreas Neumann wrote:
> Hi,
>
> Thank you for providing the QTiles plugin!
>
> I tested the QTiles plugin today and noticed that Antialiasing is turned
> off in the rendering. Could this be enabled somehow to improve the
> rendering quality?
>
> Also - could there be some initial instructions or a template how I can
> use these tiles in a Web-GIS mapping? I would assume in OpenLayers - but
> what would be the Layer type in OpenLayers to include these tiles?
>
> Thank you for your help,
> Andreas
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From matthias.kuhn at gmx.ch  Tue Jan  8 00:46:01 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 08 Jan 2013 09:46:01 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFcEkcaWn9Tcopd8whQ=Pz2ydMXa0zAKisTBWG1R9-9R+A@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
	<50EAB491.4010707@gmx.ch>
	<CAC2XbFcEkcaWn9Tcopd8whQ=Pz2ydMXa0zAKisTBWG1R9-9R+A@mail.gmail.com>
Message-ID: <50EBDCC9.9030506@gmx.ch>

Hi Martin,

On 01/07/2013 11:04 PM, Martin Dobias wrote:
> On Mon, Jan 7, 2013 at 12:42 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>> Hi Martin,
>>
>> as already mentioned by Marco, there seems to be a problem with the latest
>> fix. I have multiple postgres layers and after every redraw only one layer
>> (random) is drawn (sometimes not even one layer).
>>
>> When I quit QGIS I get a segmentation fault in the postgres provider
>> (QgsPostgresConn, member methods called on a NULL pointer), backtrace
>> attached.
> Matthias,
>
> the latest fix should solve both problems. In the previous commit I
> have removed automatic closing of postgres cursor when iterating over
> features finishes and this caused that a new cursor (with the same
> name) was being opened while the old one still existed.
>
> Martin
Layers are rendered correctly again.

However, dataProvider.getFeatures() doesn't return any features in my 
plugin ( the same instructions used to work before your last two commits ).

The postgres provider logs the following:

-------------
2 cursor states lost.
SQL: DECLARE qgisf6 BINARY CURSOR FOR SELECT 
asbinary(force_2d("situation_geometry"),'NDR'),"gid","obj_id"::text,"type"::text,"node_type"::text,"level"::text,"usage_current"::text,"cover_level"::text,"description"::text,asewkt("detail_geometry") 
FROM "qgep"."vw_network_node"
Result: 7 (ERROR:  cursor "qgisf6" already exists
)
-------------
Query: move absolute 0 in qgisf6 returned 7 [ERROR:  cursor "qgisf6" 
does not exist
]
-------------

Regards,
Matthias

From regis.haubourg at eau-adour-garonne.fr  Tue Jan  8 02:29:17 2013
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Tue, 8 Jan 2013 02:29:17 -0800 (PST)
Subject: [Qgis-developer] Spatial queries plugin should ignore very
	small intersections
In-Reply-To: <50EBC48B.3090808@faunalia.it>
References: <50E8A551.70002@carto.net>
	<1357466941629-5025809.post@n6.nabble.com>
	<50E94FEE.9060209@carto.net>
	<CAAi8Yg9GVUE9c5q5UStSazcsxc9zXbhssFkRkvQx--h9J_a57g@mail.gmail.com>
	<1357476190576-5025821.post@n6.nabble.com>
	<50EA967F.6090306@faunalia.it>
	<1357552270008-5025910.post@n6.nabble.com>
	<20130107100823.GG3763@gnash> <50EBC48B.3090808@faunalia.it>
Message-ID: <1357640957389-5026113.post@n6.nabble.com>

Hi, 
I initiated a first wiki page to discuss specifications for that tool here :
http://hub.qgis.org/wiki/quantum-gis/Spatial-query-tool
<http://hub.qgis.org/wiki/quantum-gis/Spatial-query-tool>  

I first wrote an analysis of Arcgis10 equivalent tool.
Feel free to contribute!
Regards



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Spatial-queries-plugin-should-ignore-very-small-intersections-tp5025788p5026113.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From matthias.kuhn at gmx.ch  Tue Jan  8 03:08:13 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 08 Jan 2013 12:08:13 +0100
Subject: [Qgis-developer] QgsColorButton
In-Reply-To: <50EAE618.9000001@gmx.ch>
References: <50EAE618.9000001@gmx.ch>
Message-ID: <50EBFE1D.3050500@gmx.ch>

Not yet removed, but I implemented the click event handling / opening a 
color chooser dialog inside the QgsColorButton implementation itself.
https://github.com/qgis/Quantum-GIS/pull/379

If nobody wants to keep QgsColorButtonV2 in favor of QgsColorButton I'll 
remove V2 soon.

Regards,
Matthias

On 01/07/2013 04:13 PM, Matthias Kuhn wrote:
> Hi all,
>
> I've just had a look at QgsColorButton.
>
> There are two implementations available (QgsColorButton and 
> QgsColorButtonV2). Would it be okay to remove one of them before the 
> 2.0 release? If yes, which one should be removed?
>
> I also noticed, that in several places, the onClick event is handled 
> to open a QColorDialog and assign the selected color to the button.
> Wouldn't it be nice, if this behavior would be part of the widget 
> implementation itself?
>
> Regards,
> Matthias
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From gtcvandenberg at gmail.com  Tue Jan  8 03:56:27 2013
From: gtcvandenberg at gmail.com (G.T.C.vandenBerg)
Date: Tue, 8 Jan 2013 03:56:27 -0800 (PST)
Subject: [Qgis-developer] Contour plugin (Official QGIS repository) failure
Message-ID: <1357646187831-5026137.post@n6.nabble.com>

Hello,


I had planned to use the QGIS-plugin 'Contour' from the Official QGIS repo
to create a contourline-shapefile from a point-shapefile. My point-shapefile
has 1 column ('z') in which represents the altitude of the points. However,
when I click the plugin-button I get the following message:


"Failure while executing Pyton code:

Traceback (most recent call last):
File "/home/guus/.qgis//python/plugins/contour/contour.py", line 266, in
uFieldNameUpdate
x, y, z = self.getData(self._layer, inputField)
File "/home/guus/.qgis//python/plugins/contour/contour.py", line 590, in
getData
z = map(float, z) #TODO : take care of NaNs, NULL, "",...
ValueError: could not convert string to float:

Python version:
2.7.3 (default, Aug 1 2012, 05:25:23)
[GCC 4.6.3]

QGIS version:
1.8.0-Lisboa Lisboa, exported"


And when I close this message, I get another one:


"Failure while executing Pyton code:

Traceback (most recent call last):
File "/home/guus/.qgis//python/plugins/contour/contour.py", line 70, in run
dlg = ContourDialog(self._iface)
File "/home/guus/.qgis//python/plugins/contour/contour.py", line 145, in
__init__
if self._isMPLOk() == False:
File "/home/guus/.qgis//python/plugins/contour/contour.py", line 177, in
_isMPLOk
version = [int(i) for i in mpl.__version__.split('.')]
ValueError: invalid literal for int() with base 10: '1rc'

Python version:
2.7.3 (default, Aug 1 2012, 05:25:23)
[GCC 4.6.3]

QGIS version:
1.8.0-Lisboa Lisboa, exported"

Does anybody have an idea what goes wrong? It's clearly not my
point-shapefile, as the failure-message appears before I'm able to select
anything.

Regards,

Guus van den Berg 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Contour-plugin-Official-QGIS-repository-failure-tp5026137.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Tue Jan  8 04:09:29 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 8 Jan 2013 10:09:29 -0200
Subject: [Qgis-developer] Contour plugin (Official QGIS repository)
	failure
In-Reply-To: <1357646187831-5026137.post@n6.nabble.com>
References: <1357646187831-5026137.post@n6.nabble.com>
Message-ID: <CA+TxYvMWniiuWotxtOFe-hB9oqKBz0TXMnaUMs8D2sE1gsz-wg@mail.gmail.com>

it could be that your field is a string, try copying it to another
field as an Integer, using the field calculator.

Etienne

On Tue, Jan 8, 2013 at 9:56 AM, G.T.C.vandenBerg
<gtcvandenberg at gmail.com> wrote:
> Hello,
>
>
> I had planned to use the QGIS-plugin 'Contour' from the Official QGIS repo
> to create a contourline-shapefile from a point-shapefile. My point-shapefile
> has 1 column ('z') in which represents the altitude of the points. However,
> when I click the plugin-button I get the following message:
>
>
> "Failure while executing Pyton code:
>
> Traceback (most recent call last):
> File "/home/guus/.qgis//python/plugins/contour/contour.py", line 266, in
> uFieldNameUpdate
> x, y, z = self.getData(self._layer, inputField)
> File "/home/guus/.qgis//python/plugins/contour/contour.py", line 590, in
> getData
> z = map(float, z) #TODO : take care of NaNs, NULL, "",...
> ValueError: could not convert string to float:
>
> Python version:
> 2.7.3 (default, Aug 1 2012, 05:25:23)
> [GCC 4.6.3]
>
> QGIS version:
> 1.8.0-Lisboa Lisboa, exported"
>
>
> And when I close this message, I get another one:
>
>
> "Failure while executing Pyton code:
>
> Traceback (most recent call last):
> File "/home/guus/.qgis//python/plugins/contour/contour.py", line 70, in run
> dlg = ContourDialog(self._iface)
> File "/home/guus/.qgis//python/plugins/contour/contour.py", line 145, in
> __init__
> if self._isMPLOk() == False:
> File "/home/guus/.qgis//python/plugins/contour/contour.py", line 177, in
> _isMPLOk
> version = [int(i) for i in mpl.__version__.split('.')]
> ValueError: invalid literal for int() with base 10: '1rc'
>
> Python version:
> 2.7.3 (default, Aug 1 2012, 05:25:23)
> [GCC 4.6.3]
>
> QGIS version:
> 1.8.0-Lisboa Lisboa, exported"
>
> Does anybody have an idea what goes wrong? It's clearly not my
> point-shapefile, as the failure-message appears before I'm able to select
> anything.
>
> Regards,
>
> Guus van den Berg
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Contour-plugin-Official-QGIS-repository-failure-tp5026137.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From matteo.ghetta at gmail.com  Tue Jan  8 08:11:56 2013
From: matteo.ghetta at gmail.com (matteo)
Date: Tue, 08 Jan 2013 17:11:56 +0100
Subject: [Qgis-developer] python error after updating
Message-ID: <50EC454C.8020709@gmail.com>

Hi guys,
I wrote the same problem on the qgis user list, but I think here is better.
I work with Ubuntu 12.04 and with the nightly repo. I updated my system 
but running QGis I get this error:

Impossibile caricare PyQGIS.
Il supporto Python verr? disabilitato.

Traceback (most recent call last):
File "", line 1, in

ImportError: No module named qgis.core

Versione Python:
2.7.3 (default, Aug  1 2012, 05:27:35)
[GCC 4.6.3]

Versione di QGIS:
1.9.0-Master 'Master', exported

Percorso Python:
['/usr/share/qgis/python', '/home/matteo/.qgis//python', 
'/home/matteo/.qgis//python/plugins', '/usr/share/qgis/python/plugins', 
'/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', 
'/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', 
'/usr/lib/python2.7/lib-dynload', 
'/usr/local/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages', 
'/usr/lib/python2.7/dist-packages/PIL', 
'/usr/lib/python2.7/dist-packages/gst-0.10', 
'/usr/lib/python2.7/dist-packages/gtk-2.0', 
'/usr/lib/pymodules/python2.7', 
'/usr/lib/python2.7/dist-packages/ubuntu-sso-client', 
'/usr/lib/python2.7/dist-packages/ubuntuone-client', 
'/usr/lib/python2.7/dist-packages/ubuntuone-control-panel', 
'/usr/lib/python2.7/dist-packages/ubuntuone-couch', 
'/usr/lib/python2.7/dist-packages/ubuntuone-installer', 
'/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol', 
'/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode']



And when updating I get


Configurazione di python-qgis-common 
(1.9.0+git20130105+12d1a28~precise-ubuntugis1)...
Compiling /usr/share/qgis/python/plugins/GdalTools/tools/dialogSRS.py ...
SyntaxError: ('invalid syntax', 
('/usr/share/qgis/python/plugins/GdalTools/tools/dialogSRS.py', 50, 5, 
'  def proj4string(self):\n'))

pycentral: pycentral pkginstall: error byte-compiling files (525)
pycentral pkginstall: error byte-compiling files (525)
dpkg: errore nell'elaborare python-qgis-common (--configure):
  il sottoprocesso vecchio script di post-installation ha restituito lo 
stato di errore 1
dpkg: problemi con le dipendenze impediscono la configurazione di 
python-qgis:
  python-qgis dipende da python-qgis-common (= 
1.9.0+git20130105+12d1a28~precise-ubuntugis1), ma:
   Il pacchetto python-qgis-common non ? ancora configurato.
dpkg: errore nell'elaborare python-qgis (--configure):
  problemi con le dipendenze - lasciato non configurato
Segnalazione apport non scritta poich? il messaggio di errore indica la 
presenza di un fallimento precedente.
  Si sono verificati degli errori nell'elaborazione:
  python-qgis-common
  python-qgis
E: Sub-process /usr/bin/dpkg returned an error code (1)


So I looked into the file 
https://github.com/qgis/Quantum-GIS/blob/master/python/plugins/GdalTools/tools/dialogSRS.py 
and at line 48 I noticed that

return  str(self.selector.selectedAuthId())

has double brackets. Can be this the syntax problem?

I hope so because I need to use some plugins of QGIS...

Cheers

Matteo



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130108/74850227/attachment-0001.html>

From lrssvtml at gmail.com  Tue Jan  8 09:12:36 2013
From: lrssvtml at gmail.com (Salvatore Larosa)
Date: Tue, 8 Jan 2013 18:12:36 +0100
Subject: [Qgis-developer] python error after updating
In-Reply-To: <50EC454C.8020709@gmail.com>
References: <50EC454C.8020709@gmail.com>
Message-ID: <CANxjxaqif_kaa1CSbF5TLSFkYzVeSoN4szebhDQCJ3zUG7HHsA@mail.gmail.com>

Hi Matteo,
the problem has already been fixed in master branch, so what you have to do
is wait for the next nightly or compile the master version :-)
You could also change that line in dialogSRS.py as you mentioned to get it
working!

Regards,

-SL

Il giorno 08/gen/2013 17:12, "matteo" <matteo.ghetta at gmail.com> ha scritto:
>
> Hi guys,
> I wrote the same problem on the qgis user list, but I think here is
better.
> I work with Ubuntu 12.04 and with the nightly repo. I updated my system
but running QGis I get this error:
>
> Impossibile caricare PyQGIS.
> Il supporto Python verr? disabilitato.
>
> Traceback (most recent call last):
> File "", line 1, in
>
> ImportError: No module named qgis.core
>
> Versione Python:
> 2.7.3 (default, Aug  1 2012, 05:27:35)
> [GCC 4.6.3]
>
> Versione di QGIS:
> 1.9.0-Master 'Master', exported
>
> Percorso Python:
> ['/usr/share/qgis/python', '/home/matteo/.qgis//python',
'/home/matteo/.qgis//python/plugins', '/usr/share/qgis/python/plugins',
'/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2',
'/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old',
'/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages',
'/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL',
'/usr/lib/python2.7/dist-packages/gst-0.10',
'/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.7',
'/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
'/usr/lib/python2.7/dist-packages/ubuntuone-client',
'/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
'/usr/lib/python2.7/dist-packages/ubuntuone-couch',
'/usr/lib/python2.7/dist-packages/ubuntuone-installer',
'/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol',
'/usr/lib/python2.7/dist-packages/wx-2.8-gtk2-unicode']
>
>
>
> And when updating I get
>
>
> Configurazione di python-qgis-common
(1.9.0+git20130105+12d1a28~precise-ubuntugis1)...
> Compiling /usr/share/qgis/python/plugins/GdalTools/tools/dialogSRS.py ...
> SyntaxError: ('invalid syntax',
('/usr/share/qgis/python/plugins/GdalTools/tools/dialogSRS.py', 50, 5, '
def proj4string(self):\n'))
>
> pycentral: pycentral pkginstall: error byte-compiling files (525)
> pycentral pkginstall: error byte-compiling files (525)
> dpkg: errore nell'elaborare python-qgis-common (--configure):
>  il sottoprocesso vecchio script di post-installation ha restituito lo
stato di errore 1
> dpkg: problemi con le dipendenze impediscono la configurazione di
python-qgis:
>  python-qgis dipende da python-qgis-common (=
1.9.0+git20130105+12d1a28~precise-ubuntugis1), ma:
>   Il pacchetto python-qgis-common non ? ancora configurato.
> dpkg: errore nell'elaborare python-qgis (--configure):
>  problemi con le dipendenze - lasciato non configurato
> Segnalazione apport non scritta poich? il messaggio di errore indica la
presenza di un fallimento precedente.
>  Si sono verificati degli errori nell'elaborazione:
>  python-qgis-common
>  python-qgis
> E: Sub-process /usr/bin/dpkg returned an error code (1)
>
>
> So I looked into the file
https://github.com/qgis/Quantum-GIS/blob/master/python/plugins/GdalTools/tools/dialogSRS.pyand
at line 48 I noticed that
>
> return str(self.selector.selectedAuthId())
>
> has double brackets. Can be this the syntax problem?
>
> I hope so because I need to use some plugins of QGIS...
>
> Cheers
>
> Matteo
>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130108/4e745028/attachment.html>

From matthias.kuhn at gmx.ch  Wed Jan  9 00:44:26 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Wed, 09 Jan 2013 09:44:26 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
Message-ID: <50ED2DEA.8060907@gmx.ch>

Dear list,

Denis, Andreas and I have been working on a proposal concerning the 
attribute table and attribute editor.
We are convinced that it is a good idea to combine these two into a 
single window and add/change some functionality.
There is a document [1] online which describes our ideas and contains 
some mockups. We will start working on this soon and would like to 
encourage everybody to read and comment on our ideas.

Regards,
Matthias

[1]: 
https://docs.google.com/document/d/1dL965ky4OoyeN9fEcqP9SWHVeQxTj1IFkBrEXTUBZuY/edit?pli=1#heading=h.seeehmi30hq0

From sim at gis-lab.info  Wed Jan  9 01:04:10 2013
From: sim at gis-lab.info (Maxim Dubinin)
Date: Wed, 9 Jan 2013 13:04:10 +0400
Subject: [Qgis-developer] QTiles plugin and antialiasing
In-Reply-To: <50EBCE18.2030809@gmx.ch>
References: <50EB25FF.1040701@carto.net> <50EBCE18.2030809@gmx.ch>
Message-ID: <16410101972.20130109130410@gis-lab.info>

Dear QTiles users,

please don't forget to also forward your feature requests to QTiles tracker.
http://hub.qgis.org/projects/qtiles

We cannot garantee quick implementation of new features at this point,
as  our  needs for a particular project are satisfied by current state
of the plugin. But this at least will make sure that your thoughts are
not lost in the maillist.

Maxim Dubinin
NextGIS

?? ?????? 8 ?????? 2013 ?., 11:43:20:

MK> Hi,

MK> I used it yesterday with a raster image and would love to see resampling
MK> included in there.
MK> +1 for this.

MK> Regards,
MK> Matthias


MK> On 01/07/2013 08:46 PM, Andreas Neumann wrote:
>> Hi,
>>
>> Thank you for providing the QTiles plugin!
>>
>> I tested the QTiles plugin today and noticed that Antialiasing is turned
>> off in the rendering. Could this be enabled somehow to improve the
>> rendering quality?
>>
>> Also - could there be some initial instructions or a template how I can
>> use these tiles in a Web-GIS mapping? I would assume in OpenLayers - but
>> what would be the Layer type in OpenLayers to include these tiles?
>>
>> Thank you for your help,
>> Andreas
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

MK> _______________________________________________
MK> Qgis-developer mailing list
MK> Qgis-developer at lists.osgeo.org
MK> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From madmanwoo at gmail.com  Wed Jan  9 03:43:52 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 9 Jan 2013 21:43:52 +1000
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50ED2DEA.8060907@gmx.ch>
References: <50ED2DEA.8060907@gmx.ch>
Message-ID: <CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>

Hey Matthias,

Interesting idea.  Look forward to seeing the development of this feature.
  Two questions before I ask any others.

 - Does this change the behaviour of the identify tool?  What happens when
I am in edit mode and click on a feature? Same as it currently is?  If we
could add multi edit, multi select to the identify tool that would be neat.
 - How would you handle custom UI forms? Just embed them in the split view.

Overall I think it's a great idea and would greatly welcome a feature like
this.

- Nathan


On Wed, Jan 9, 2013 at 6:44 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:

> Dear list,
>
> Denis, Andreas and I have been working on a proposal concerning the
> attribute table and attribute editor.
> We are convinced that it is a good idea to combine these two into a single
> window and add/change some functionality.
> There is a document [1] online which describes our ideas and contains some
> mockups. We will start working on this soon and would like to encourage
> everybody to read and comment on our ideas.
>
> Regards,
> Matthias
>
> [1]: https://docs.google.com/**document/d/**1dL965ky4OoyeN9fEcqP9SWHVeQxTj
> **1IFkBrEXTUBZuY/edit?pli=1#**heading=h.seeehmi30hq0<https://docs.google.com/document/d/1dL965ky4OoyeN9fEcqP9SWHVeQxTj1IFkBrEXTUBZuY/edit?pli=1#heading=h.seeehmi30hq0>
> ______________________________**_________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130109/a6184fab/attachment.html>

From matthias.kuhn at gmx.ch  Wed Jan  9 03:51:32 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Wed, 09 Jan 2013 12:51:32 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
Message-ID: <50ED59C4.7020500@gmx.ch>

Hi Nathan,

Answers in the text

On 01/09/2013 12:43 PM, Nathan Woodrow wrote:
> Hey Matthias,
>
> Interesting idea.  Look forward to seeing the development of this 
> feature.   Two questions before I ask any others.
>
>  - Does this change the behaviour of the identify tool?  What happens 
> when I am in edit mode and click on a feature? Same as it currently 
> is?  If we could add multi edit, multi select to the identify tool 
> that would be neat.
We did not agree on a particular behavior in this case so far. My idea 
is, to open a dual view window as well (with a filter applied that 
matches only the current selection or a sorting, so the selection 
appears on top). Multi edit could then be easily based on this.

>  - How would you handle custom UI forms? Just embed them in the split 
> view.
That's the idea.
>
> Overall I think it's a great idea and would greatly welcome a feature 
> like this.
>
> - Nathan
Matthias
>
>
> On Wed, Jan 9, 2013 at 6:44 PM, Matthias Kuhn <matthias.kuhn at gmx.ch 
> <mailto:matthias.kuhn at gmx.ch>> wrote:
>
>     Dear list,
>
>     Denis, Andreas and I have been working on a proposal concerning
>     the attribute table and attribute editor.
>     We are convinced that it is a good idea to combine these two into
>     a single window and add/change some functionality.
>     There is a document [1] online which describes our ideas and
>     contains some mockups. We will start working on this soon and
>     would like to encourage everybody to read and comment on our ideas.
>
>     Regards,
>     Matthias
>
>     [1]:
>     https://docs.google.com/document/d/1dL965ky4OoyeN9fEcqP9SWHVeQxTj1IFkBrEXTUBZuY/edit?pli=1#heading=h.seeehmi30hq0
>     _______________________________________________
>     Qgis-developer mailing list
>     Qgis-developer at lists.osgeo.org <mailto:Qgis-developer at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>


From madmanwoo at gmail.com  Wed Jan  9 03:53:45 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 9 Jan 2013 21:53:45 +1000
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50ED59C4.7020500@gmx.ch>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED59C4.7020500@gmx.ch>
Message-ID: <CAAi8Yg-vygKWJg0X4FYy-ADRSh9+jWUiQSrvkSsxc7R35s4s8Q@mail.gmail.com>

On Wed, Jan 9, 2013 at 9:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:

> We did not agree on a particular behavior in this case so far. My idea is,
> to open a dual view window as well (with a filter applied that matches only
> the current selection or a sorting, so the selection appears on top). Multi
> edit could then be easily based on this.


 I'm not sure that would work IMO.  If we have a large layer and it needs
to load everything before you get the form that would be bad.  I think it
would be best that the filter is really just a fake string but the forms is
pre-loaded with only the features you selected.  If the user changes the
filter at all then you can reload the table.

- Nathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130109/172630ca/attachment.html>

From matthias.kuhn at gmx.ch  Wed Jan  9 04:08:28 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Wed, 09 Jan 2013 13:08:28 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <CAAi8Yg-vygKWJg0X4FYy-ADRSh9+jWUiQSrvkSsxc7R35s4s8Q@mail.gmail.com>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED59C4.7020500@gmx.ch>
	<CAAi8Yg-vygKWJg0X4FYy-ADRSh9+jWUiQSrvkSsxc7R35s4s8Q@mail.gmail.com>
Message-ID: <50ED5DBC.8030207@gmx.ch>

On 01/09/2013 12:53 PM, Nathan Woodrow wrote:
> On Wed, Jan 9, 2013 at 9:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch 
> <mailto:matthias.kuhn at gmx.ch>> wrote:
>
>     We did not agree on a particular behavior in this case so far. My
>     idea is, to open a dual view window as well (with a filter applied
>     that matches only the current selection or a sorting, so the
>     selection appears on top). Multi edit could then be easily based
>     on this.
>
>
>  I'm not sure that would work IMO.  If we have a large layer and it 
> needs to load everything before you get the form that would be bad.  I 
> think it would be best that the filter is really just a fake string 
> but the forms is pre-loaded with only the features you selected.  If 
> the user changes the filter at all then you can reload the table.
>
I will keep an eye on performance in this special case.

Matthias
> - Nathan
>


From bernhard.stroebl at jena.de  Wed Jan  9 06:07:20 2013
From: bernhard.stroebl at jena.de (=?ISO-8859-1?Q?Bernhard_Str=F6bl?=)
Date: Wed, 09 Jan 2013 15:07:20 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
Message-ID: <50ED7998.5080301@jena.de>

Hi Matthias (and others),

I read your paper and I like the idea of the dual view because currently 
it is not possible to open the attribute editor from the table. On the 
other hand I am not convinced of the filter/selection proposal. IMHO one 
of the strengths when using GIS data is the unity of geometry and 
attribute data. Currently selecting a feature in the map also selects 
its attributes in the corresponding table and vice versa.
examples:
1) Select in map and investigate attributes: If a filter was applied the 
data might not be visible in the table without clicking "selection to 
filter".
2) filter logical in table and investigate these features in the map: 
You would need an additional "filter to selection" button to handle this.
3) field calculator: will it update the selected or the filtered datasets?
I think the whole concept will confuse average users. I would favour to 
keep the well established solution of features being selected no matter 
where (table or map) the selection was performed.

my 2 cents

Bernhard

Am 09.01.2013 12:43, schrieb Nathan Woodrow:
> Hey Matthias,
>
> Interesting idea.  Look forward to seeing the development of this feature.
>    Two questions before I ask any others.
>
>   - Does this change the behaviour of the identify tool?  What happens when
> I am in edit mode and click on a feature? Same as it currently is?  If we
> could add multi edit, multi select to the identify tool that would be neat.
>   - How would you handle custom UI forms? Just embed them in the split view.
>
> Overall I think it's a great idea and would greatly welcome a feature like
> this.
>
> - Nathan
>
>
> On Wed, Jan 9, 2013 at 6:44 PM, Matthias Kuhn<matthias.kuhn at gmx.ch>  wrote:
>
>> Dear list,
>>
>> Denis, Andreas and I have been working on a proposal concerning the
>> attribute table and attribute editor.
>> We are convinced that it is a good idea to combine these two into a single
>> window and add/change some functionality.
>> There is a document [1] online which describes our ideas and contains some
>> mockups. We will start working on this soon and would like to encourage
>> everybody to read and comment on our ideas.
>>
>> Regards,
>> Matthias
>>
>> [1]: https://docs.google.com/**document/d/**1dL965ky4OoyeN9fEcqP9SWHVeQxTj
>> **1IFkBrEXTUBZuY/edit?pli=1#**heading=h.seeehmi30hq0<https://docs.google.com/document/d/1dL965ky4OoyeN9fEcqP9SWHVeQxTj1IFkBrEXTUBZuY/edit?pli=1#heading=h.seeehmi30hq0>
>> ______________________________**_________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>
>
>
>

From jef at norbit.de  Wed Jan  9 07:08:51 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed, 9 Jan 2013 16:08:51 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50ED7998.5080301@jena.de>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de>
Message-ID: <20130109150851.GB5428@norbit.de>

Hi Bernhard,

On Wed, 09. Jan 2013 at 15:07:20 +0100, Bernhard Str?bl wrote:
> I read your paper and I like the idea of the dual view because currently  
> it is not possible to open the attribute editor from the table.

But it is - each row has a context menu that has "Open form" entry and if
defined also the actions.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From matthias.kuhn at gmx.ch  Wed Jan  9 07:41:27 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Wed, 09 Jan 2013 16:41:27 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50ED7998.5080301@jena.de>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de>
Message-ID: <50ED8FA7.2020503@gmx.ch>

Hi Bernhard

On 01/09/2013 03:07 PM, Bernhard Str?bl wrote:
> Hi Matthias (and others),
>
> I read your paper and I like the idea of the dual view because 
> currently it is not possible to open the attribute editor from the 
> table. On the other hand I am not convinced of the filter/selection 
> proposal. IMHO one of the strengths when using GIS data is the unity 
> of geometry and attribute data. Currently selecting a feature in the 
> map also selects its attributes in the corresponding table and vice 
> versa.
> examples:
> 1) Select in map and investigate attributes: If a filter was applied 
> the data might not be visible in the table without clicking "selection 
> to filter".
> 2) filter logical in table and investigate these features in the map: 
> You would need an additional "filter to selection" button to handle this.
> 3) field calculator: will it update the selected or the filtered 
> datasets?
> I think the whole concept will confuse average users. I would favour 
> to keep the well established solution of features being selected no 
> matter where (table or map) the selection was performed.

I think the reasoning for the change in the selection/filter paradigm 
was rather poor in the document itself. There are other reasons which 
are in favor of a change of filter/selection as well.

E.g. If you want to manually select features out of different subsets. 
Let's say you have a layer with a lot of features and you're looking for 
a couple of cities (but not all of them) which have more than 100'000 
inhabitants and some others which do not meet this criterion, but some 
other criteria. At the moment, you can do this by sorting and scrolling 
and maybe some other tricks, but it's not that easy. With the 
independent filters, this would be a task of changing the filter and 
Ctrl-Clicking the required features out of each subset.

Nevertheless, I see your point as well. Manually picking some of the 
features on the canvas and then investigating them in the table sounds 
like a reasonable requirement and should not be forgotten.

So maybe the button "show only selected" should still be kept available 
(and link selection and filters, as it does now) and live side-by-side 
with the new solution (while disabling some of the super-fluent widgets).

Matthias
>
> my 2 cents
>
> Bernhard
>
> Am 09.01.2013 12:43, schrieb Nathan Woodrow:
>> Hey Matthias,
>>
>> Interesting idea.  Look forward to seeing the development of this 
>> feature.
>>    Two questions before I ask any others.
>>
>>   - Does this change the behaviour of the identify tool?  What 
>> happens when
>> I am in edit mode and click on a feature? Same as it currently is?  
>> If we
>> could add multi edit, multi select to the identify tool that would be 
>> neat.
>>   - How would you handle custom UI forms? Just embed them in the 
>> split view.
>>
>> Overall I think it's a great idea and would greatly welcome a feature 
>> like
>> this.
>>
>> - Nathan
>>
>>
>> On Wed, Jan 9, 2013 at 6:44 PM, Matthias Kuhn<matthias.kuhn at gmx.ch>  
>> wrote:
>>
>>> Dear list,
>>>
>>> Denis, Andreas and I have been working on a proposal concerning the
>>> attribute table and attribute editor.
>>> We are convinced that it is a good idea to combine these two into a 
>>> single
>>> window and add/change some functionality.
>>> There is a document [1] online which describes our ideas and 
>>> contains some
>>> mockups. We will start working on this soon and would like to encourage
>>> everybody to read and comment on our ideas.
>>>
>>> Regards,
>>> Matthias
>>>
>>> [1]: 
>>> https://docs.google.com/**document/d/**1dL965ky4OoyeN9fEcqP9SWHVeQxTj
>>> **1IFkBrEXTUBZuY/edit?pli=1#**heading=h.seeehmi30hq0<https://docs.google.com/document/d/1dL965ky4OoyeN9fEcqP9SWHVeQxTj1IFkBrEXTUBZuY/edit?pli=1#heading=h.seeehmi30hq0> 
>>>
>>> ______________________________**_________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer> 
>>>
>>>
>>
>>
>>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From massimo.endrighi at geopartner.it  Wed Jan  9 09:05:03 2013
From: massimo.endrighi at geopartner.it (Massimo Endrighi)
Date: Wed, 9 Jan 2013 09:05:03 -0800 (PST)
Subject: [Qgis-developer] QgsGeometry::intersection returns UnknownGeometry
Message-ID: <1357751103222-5026452.post@n6.nabble.com>

Given:
featureA - polygon
featureB - polygon

geomA = featureA.geometry()
geomB = featureB.geometry()
if geomA.intersects (geomB):
    intersection = geomA.intersection(geomB)
    
the new geometry intersection has type() == 3 (UnknownGeometry) in some
circumstances BUT intersection.Area() is always correct.
After moving featureA or featureB by a small delta the intersection is
returned correctly.

Any idea?
Massimo



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/QgsGeometry-intersection-returns-UnknownGeometry-tp5026452.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From bernhard.stroebl at jena.de  Wed Jan  9 22:30:33 2013
From: bernhard.stroebl at jena.de (=?ISO-8859-1?Q?Bernhard_Str=F6bl?=)
Date: Thu, 10 Jan 2013 07:30:33 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <20130109150851.GB5428@norbit.de>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <20130109150851.GB5428@norbit.de>
Message-ID: <50EE6009.1090504@jena.de>

J?rgen,

huuu, you are right. I totally overlooked that!
I am always amazed how many features there are in QGIS I do not even 
know of.

regards

Bernhard

Am 09.01.2013 16:08, schrieb J?rgen E. Fischer:
> Hi Bernhard,
>
> On Wed, 09. Jan 2013 at 15:07:20 +0100, Bernhard Str?bl wrote:
>> I read your paper and I like the idea of the dual view because currently
>> it is not possible to open the attribute editor from the table.
>
> But it is - each row has a context menu that has "Open form" entry and if
> defined also the actions.
>
>
> J?rgen
>

-- 
Bernhard Str?bl
Anwendungsbetreuer GIS

Kommunale Immobilien Jena
Am Anger 26
07743 Jena

Tel.: 03641 49- 5190
E-Mail: bernhard.stroebl at jena.de
Internet: www.kij.de


Kommunale Immobilien Jena
Eigenbetrieb der Stadt Jena
Werkleiter: Dr. G?tz Blankenburg

From bernhard.stroebl at jena.de  Wed Jan  9 22:39:34 2013
From: bernhard.stroebl at jena.de (=?ISO-8859-1?Q?Bernhard_Str=F6bl?=)
Date: Thu, 10 Jan 2013 07:39:34 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50ED8FA7.2020503@gmx.ch>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
Message-ID: <50EE6226.1090401@jena.de>

Hi Matthias,

comments below.

Am 09.01.2013 16:41, schrieb Matthias Kuhn:
> Hi Bernhard
>
> On 01/09/2013 03:07 PM, Bernhard Str?bl wrote:
>> Hi Matthias (and others),
>>
>> I read your paper and I like the idea of the dual view because
>> currently it is not possible to open the attribute editor from the
>> table. On the other hand I am not convinced of the filter/selection
>> proposal. IMHO one of the strengths when using GIS data is the unity
>> of geometry and attribute data. Currently selecting a feature in the
>> map also selects its attributes in the corresponding table and vice
>> versa.
>> examples:
>> 1) Select in map and investigate attributes: If a filter was applied
>> the data might not be visible in the table without clicking "selection
>> to filter".
>> 2) filter logical in table and investigate these features in the map:
>> You would need an additional "filter to selection" button to handle this.
>> 3) field calculator: will it update the selected or the filtered
>> datasets?
>> I think the whole concept will confuse average users. I would favour
>> to keep the well established solution of features being selected no
>> matter where (table or map) the selection was performed.
>
> I think the reasoning for the change in the selection/filter paradigm
> was rather poor in the document itself. There are other reasons which
> are in favor of a change of filter/selection as well.
>
> E.g. If you want to manually select features out of different subsets.
> Let's say you have a layer with a lot of features and you're looking for
> a couple of cities (but not all of them) which have more than 100'000
> inhabitants and some others which do not meet this criterion, but some
> other criteria. At the moment, you can do this by sorting and scrolling
> and maybe some other tricks, but it's not that easy. With the
> independent filters, this would be a task of changing the filter and
> Ctrl-Clicking the required features out of each subset.

I see the point in this, but the case you describe could be solved 
differently (that is at least theroretically :-). If the selection tool 
would not always create a new selection (as is now) but enable the user 
to either "add to selection" or "select within current selection" or 
even "remove from selection" this would IMHO be more straightforward for 
users.

Bernhard

>
> Nevertheless, I see your point as well. Manually picking some of the
> features on the canvas and then investigating them in the table sounds
> like a reasonable requirement and should not be forgotten.
>
> So maybe the button "show only selected" should still be kept available
> (and link selection and filters, as it does now) and live side-by-side
> with the new solution (while disabling some of the super-fluent widgets).
>
> Matthias
>>
>> my 2 cents
>>
>> Bernhard
>>
>> Am 09.01.2013 12:43, schrieb Nathan Woodrow:
>>> Hey Matthias,
>>>
>>> Interesting idea. Look forward to seeing the development of this
>>> feature.
>>> Two questions before I ask any others.
>>>
>>> - Does this change the behaviour of the identify tool? What happens when
>>> I am in edit mode and click on a feature? Same as it currently is? If we
>>> could add multi edit, multi select to the identify tool that would be
>>> neat.
>>> - How would you handle custom UI forms? Just embed them in the split
>>> view.
>>>
>>> Overall I think it's a great idea and would greatly welcome a feature
>>> like
>>> this.
>>>
>>> - Nathan
>>>
>>>
>>> On Wed, Jan 9, 2013 at 6:44 PM, Matthias Kuhn<matthias.kuhn at gmx.ch>
>>> wrote:
>>>
>>>> Dear list,
>>>>
>>>> Denis, Andreas and I have been working on a proposal concerning the
>>>> attribute table and attribute editor.
>>>> We are convinced that it is a good idea to combine these two into a
>>>> single
>>>> window and add/change some functionality.
>>>> There is a document [1] online which describes our ideas and
>>>> contains some
>>>> mockups. We will start working on this soon and would like to encourage
>>>> everybody to read and comment on our ideas.
>>>>
>>>> Regards,
>>>> Matthias
>>>>
>>>> [1]:
>>>> https://docs.google.com/**document/d/**1dL965ky4OoyeN9fEcqP9SWHVeQxTj
>>>> **1IFkBrEXTUBZuY/edit?pli=1#**heading=h.seeehmi30hq0<https://docs.google.com/document/d/1dL965ky4OoyeN9fEcqP9SWHVeQxTj1IFkBrEXTUBZuY/edit?pli=1#heading=h.seeehmi30hq0>
>>>>
>>>> ______________________________**_________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>>>
>>>>
>>>
>>>
>>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>

From wonder.sk at gmail.com  Thu Jan 10 00:24:28 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 10 Jan 2013 09:24:28 +0100
Subject: [Qgis-developer] [Qgis-psc] RFC for Data Frames
In-Reply-To: <CAD+mzoy7dzxNkW_xHxDEpf8KicKroiatzNH_BN7H2L2uJm8RxQ@mail.gmail.com>
References: <CAD+mzowfN8uFLH5Abm2iSEGQtaJ6RdBug2rnxHn1MWY3JitHMQ@mail.gmail.com>
	<50ED97A2.2070507@sourcepole.ch>
	<CAD+mzowns8cEfCGpJgyrDcjU6DNi7KFr+Ma8diO41azut05V1w@mail.gmail.com>
	<CADOrBxP6Dk93QdVx1DBAEVqW5JHtVgANXzmLDmEGUR0yve3chQ@mail.gmail.com>
	<CAD+mzoy7dzxNkW_xHxDEpf8KicKroiatzNH_BN7H2L2uJm8RxQ@mail.gmail.com>
Message-ID: <CAC2XbFe2oAyZRzyGZvE8GDoT-wrjJvBuaWD4nZ9kN9smB=7W8A@mail.gmail.com>

Hi Benedict

(moving the discussion from qgis-psc to qgis-dev)

On Wed, Jan 9, 2013 at 9:37 PM, Benedict Holland
<benedict.m.holland at gmail.com> wrote:
> Hi Tim,
>
> [...]
> called that. I think it would make more sense to push a Legend onto the
> QgsSubproject and I think I have a great use case in mind.
> [...]

Given the great impact your changes might have on the rest of the QGIS
application (and possibly libraries, too), I would suggest starting
with some mockups and use cases how the GUI would look like after, how
existing features would behave etc. Diving directly into a discussion
about the design decisions (like sub-projects) is not necessary if
there's not a clear set idea how it should work.



> Actually I do have a question regarding a lot of this. I have been diving
> into the code and I see that many objects are managed using XML.

Please could you be more specific? Some classses implement methods
like readXml() and writeXml(), but that's really just for
reading/saving of state - as Tim has already noted.

Regards
Martin

From matteo.ghetta at gmail.com  Thu Jan 10 01:04:28 2013
From: matteo.ghetta at gmail.com (matteo)
Date: Thu, 10 Jan 2013 10:04:28 +0100
Subject: [Qgis-developer] python error after updating
In-Reply-To: <CANxjxaqif_kaa1CSbF5TLSFkYzVeSoN4szebhDQCJ3zUG7HHsA@mail.gmail.com>
References: <50EC454C.8020709@gmail.com>
	<CANxjxaqif_kaa1CSbF5TLSFkYzVeSoN4szebhDQCJ3zUG7HHsA@mail.gmail.com>
Message-ID: <50EE841C.4090803@gmail.com>

> the problem has already been fixed in master branch, so what you have 
> to do is wait for the next nightly or compile the master version :-)
> You could also change that line in dialogSRS.py as you mentioned to 
> get it working!
>

Hi all,
I see that the in nightly of today the problem with python has not been 
fixed. I really don't know how to compile the master version (my 
ignorance.......).
Does anyone have an idea of when this problem will be solved with the 
nightly?

Thanks

Cheers

Matteo

From cavallini at faunalia.it  Thu Jan 10 02:09:21 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 10 Jan 2013 11:09:21 +0100
Subject: [Qgis-developer] WPS plugin
Message-ID: <50EE9351.6090207@faunalia.it>

Hi all.
Testing the just upgrades WPS plugin, with geodati.fmach.it, module v_voronoi,
results in:

It seems QGIS cannot load the result of the process. The result has a 'text/xml' type
and can be accessed at '/tmp/qt_temp.jL9396.gml'.

You could ask the service provider to consider changing the default data type of the
result.

Anyone confirms?
Thanks.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From lucadeluge at gmail.com  Thu Jan 10 02:19:33 2013
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 10 Jan 2013 11:19:33 +0100
Subject: [Qgis-developer] WPS plugin
In-Reply-To: <50EE9351.6090207@faunalia.it>
References: <50EE9351.6090207@faunalia.it>
Message-ID: <CAK4m-3w_k01dT3QsrvKRF4VRhAYbwpLfP7KSF3R-zUwQh3EX+w@mail.gmail.com>

2013/1/10 Paolo Cavallini <cavallini at faunalia.it>:
> Hi all.
> Testing the just upgrades WPS plugin, with geodati.fmach.it, module v_voronoi,
> results in:
>
> It seems QGIS cannot load the result of the process. The result has a 'text/xml' type
> and can be accessed at '/tmp/qt_temp.jL9396.gml'.
>
> You could ask the service provider to consider changing the default data type of the
> result.
>
> Anyone confirms?

yes, It is a problem with the last version, until yesterday it worked!
Tomorrow I have a presentation about WPS and I would like to use WPS
plugin and this problem is really a blocker for me.
How can use the qgis master version of yesterday?

> Thanks.
>

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From lucadeluge at gmail.com  Thu Jan 10 03:19:10 2013
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 10 Jan 2013 12:19:10 +0100
Subject: [Qgis-developer] WPS plugin
In-Reply-To: <CAK4m-3w_k01dT3QsrvKRF4VRhAYbwpLfP7KSF3R-zUwQh3EX+w@mail.gmail.com>
References: <50EE9351.6090207@faunalia.it>
	<CAK4m-3w_k01dT3QsrvKRF4VRhAYbwpLfP7KSF3R-zUwQh3EX+w@mail.gmail.com>
Message-ID: <CAK4m-3w+8TVYB3OJEOeUFZXzOsEZ49yzdrZr0GfVCbxrwTa0bw@mail.gmail.com>

2013/1/10 Luca Delucchi <lucadeluge at gmail.com>:

>
> yes, It is a problem with the last version, until yesterday it worked!

No sorry, It's a server problem. I'm working to fix it.

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From cavallini at faunalia.it  Thu Jan 10 03:34:11 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 10 Jan 2013 12:34:11 +0100
Subject: [Qgis-developer] fTools in sextante
Message-ID: <50EEA733.1020403@faunalia.it>

Hi all.
fTools seem disappeared form Sextante, right?
All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From volayaf at gmail.com  Thu Jan 10 03:45:13 2013
From: volayaf at gmail.com (Victor Olaya)
Date: Thu, 10 Jan 2013 12:45:13 +0100
Subject: [Qgis-developer] fTools in sextante
In-Reply-To: <50EEA733.1020403@faunalia.it>
References: <50EEA733.1020403@faunalia.it>
Message-ID: <CAJsc-7yLJHvo1MRyD3ixR8Fc_QE-0xyJAk0_3pqGChKN+tb4WQ@mail.gmail.com>

Not really. They are all now under "QGIS algorithms", along with
SEXTANTE native ones and MMQGISX ones (basically, all the python ones
not needing external apps). I am just trying to reorder things so
there are less groups and everything is more homogeneous

Cheers
Victor


2013/1/10 Paolo Cavallini <cavallini at faunalia.it>:
> Hi all.
> fTools seem disappeared form Sextante, right?
> All the best.
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From lucadeluge at gmail.com  Thu Jan 10 03:46:25 2013
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 10 Jan 2013 12:46:25 +0100
Subject: [Qgis-developer] WPS plugin
In-Reply-To: <CAK4m-3w+8TVYB3OJEOeUFZXzOsEZ49yzdrZr0GfVCbxrwTa0bw@mail.gmail.com>
References: <50EE9351.6090207@faunalia.it>
	<CAK4m-3w_k01dT3QsrvKRF4VRhAYbwpLfP7KSF3R-zUwQh3EX+w@mail.gmail.com>
	<CAK4m-3w+8TVYB3OJEOeUFZXzOsEZ49yzdrZr0GfVCbxrwTa0bw@mail.gmail.com>
Message-ID: <CAK4m-3wnPvCaThw1yxktY5QPGCW-CObBSd6Li81v+6z-WNw3XQ@mail.gmail.com>

Now it is working for me, Paolo could you please test it?


-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From cavallini at faunalia.it  Thu Jan 10 03:51:17 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 10 Jan 2013 12:51:17 +0100
Subject: [Qgis-developer] WPS plugin
In-Reply-To: <CAK4m-3wnPvCaThw1yxktY5QPGCW-CObBSd6Li81v+6z-WNw3XQ@mail.gmail.com>
References: <50EE9351.6090207@faunalia.it>
	<CAK4m-3w_k01dT3QsrvKRF4VRhAYbwpLfP7KSF3R-zUwQh3EX+w@mail.gmail.com>
	<CAK4m-3w+8TVYB3OJEOeUFZXzOsEZ49yzdrZr0GfVCbxrwTa0bw@mail.gmail.com>
	<CAK4m-3wnPvCaThw1yxktY5QPGCW-CObBSd6Li81v+6z-WNw3XQ@mail.gmail.com>
Message-ID: <50EEAB35.4020707@faunalia.it>

Il 10/01/2013 12:46, Luca Delucchi ha scritto:
> Now it is working for me, Paolo could you please test it?

confirmed, thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From cavallini at faunalia.it  Thu Jan 10 03:52:57 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 10 Jan 2013 12:52:57 +0100
Subject: [Qgis-developer] fTools in sextante
In-Reply-To: <CAJsc-7yLJHvo1MRyD3ixR8Fc_QE-0xyJAk0_3pqGChKN+tb4WQ@mail.gmail.com>
References: <50EEA733.1020403@faunalia.it>
	<CAJsc-7yLJHvo1MRyD3ixR8Fc_QE-0xyJAk0_3pqGChKN+tb4WQ@mail.gmail.com>
Message-ID: <50EEAB99.7050802@faunalia.it>

Il 10/01/2013 12:45, Victor Olaya ha scritto:
> Not really. They are all now under "QGIS algorithms", along with
> SEXTANTE native ones and MMQGISX ones (basically, all the python ones
> not needing external apps). I am just trying to reorder things so
> there are less groups and everything is more homogeneous

oh, I see, thanks for clarifying

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From cavallini at faunalia.it  Thu Jan 10 03:56:20 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 10 Jan 2013 12:56:20 +0100
Subject: [Qgis-developer] again on WPS plugin
Message-ID: <50EEAC64.40709@faunalia.it>

Hi all.
After successfully completing the analysis, I keep on receiving network error messages:

Network request
http://geodati.fmach.it/zoo/?Request=DescribeProcess&identifier=v_voronoi&Service=WPS&Version=1.0.0
timed out

apparently I have to restart QGIS to stop them.

All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From lucadeluge at gmail.com  Thu Jan 10 04:15:27 2013
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 10 Jan 2013 13:15:27 +0100
Subject: [Qgis-developer] again on WPS plugin
In-Reply-To: <50EEAC64.40709@faunalia.it>
References: <50EEAC64.40709@faunalia.it>
Message-ID: <CAK4m-3xQxjKcab1QvttqSA-X9jcbTxhur7=oLjUVCVRjP417zw@mail.gmail.com>

2013/1/10 Paolo Cavallini <cavallini at faunalia.it>:
> Hi all.

Hi Paolo

> After successfully completing the analysis, I keep on receiving network error messages:
>
> Network request
> http://geodati.fmach.it/zoo/?Request=DescribeProcess&identifier=v_voronoi&Service=WPS&Version=1.0.0
> timed out
>
> apparently I have to restart QGIS to stop them.
>

I also receive this messages and have the same messages, I already
inform Horst about this problem, I have no idea how to solve this

> All the best.
>

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From matthias.kuhn at gmx.ch  Thu Jan 10 04:18:51 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 10 Jan 2013 13:18:51 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50EE6226.1090401@jena.de>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
	<50EE6226.1090401@jena.de>
Message-ID: <50EEB1AB.5020409@gmx.ch>

Bernhard,

On 01/10/2013 07:39 AM, Bernhard Str?bl wrote:
> Hi Matthias,
>
> comments below.
same here
>
> Am 09.01.2013 16:41, schrieb Matthias Kuhn:
>> Hi Bernhard
>>
>> On 01/09/2013 03:07 PM, Bernhard Str?bl wrote:
>>> Hi Matthias (and others),
>>>
>>> I read your paper and I like the idea of the dual view because
>>> currently it is not possible to open the attribute editor from the
>>> table. On the other hand I am not convinced of the filter/selection
>>> proposal. IMHO one of the strengths when using GIS data is the unity
>>> of geometry and attribute data. Currently selecting a feature in the
>>> map also selects its attributes in the corresponding table and vice
>>> versa.
>>> examples:
>>> 1) Select in map and investigate attributes: If a filter was applied
>>> the data might not be visible in the table without clicking "selection
>>> to filter".
>>> 2) filter logical in table and investigate these features in the map:
>>> You would need an additional "filter to selection" button to handle 
>>> this.
>>> 3) field calculator: will it update the selected or the filtered
>>> datasets?
>>> I think the whole concept will confuse average users. I would favour
>>> to keep the well established solution of features being selected no
>>> matter where (table or map) the selection was performed.
>>
>> I think the reasoning for the change in the selection/filter paradigm
>> was rather poor in the document itself. There are other reasons which
>> are in favor of a change of filter/selection as well.
>>
>> E.g. If you want to manually select features out of different subsets.
>> Let's say you have a layer with a lot of features and you're looking for
>> a couple of cities (but not all of them) which have more than 100'000
>> inhabitants and some others which do not meet this criterion, but some
>> other criteria. At the moment, you can do this by sorting and scrolling
>> and maybe some other tricks, but it's not that easy. With the
>> independent filters, this would be a task of changing the filter and
>> Ctrl-Clicking the required features out of each subset.
>
> I see the point in this, but the case you describe could be solved 
> differently (that is at least theroretically :-). If the selection 
> tool would not always create a new selection (as is now) but enable 
> the user to either "add to selection" or "select within current 
> selection" or even "remove from selection" this would IMHO be more 
> straightforward for users.
>
I'm sorry, I'm not able to follow this description exactly. Could you 
please describe in detail how you imagine the process.
If possible, please also outline the scenario, where the user wants to 
check/update individually the attributes for all cities with more than 
100'000 inhabitants in the attribute view.

Please excuse my ignorance

Matthias

From horst.duester at kappasys.ch  Thu Jan 10 04:21:54 2013
From: horst.duester at kappasys.ch (=?ISO-8859-1?Q?Horst_D=FCster?=)
Date: Thu, 10 Jan 2013 13:21:54 +0100
Subject: [Qgis-developer] again on WPS plugin
In-Reply-To: <CAK4m-3xQxjKcab1QvttqSA-X9jcbTxhur7=oLjUVCVRjP417zw@mail.gmail.com>
References: <50EEAC64.40709@faunalia.it>
	<CAK4m-3xQxjKcab1QvttqSA-X9jcbTxhur7=oLjUVCVRjP417zw@mail.gmail.com>
Message-ID: <50EEB262.20002@kappasys.ch>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi Paolo, Luca

I just checked the voronoi process and it worked fine form me.


Horst

Dr. Horst D?ster
Kappasys
Alte Bernstrasse 13
CH-4500 Solothurn

Tel.: +41 (0) 32 514 00 40
Mobil: +41 (0) 76 408 51 06
eMail: horst.duester at kappasys.ch
skype: horstduester
Twitter: moazagotl
Web: www.kappasys.ch
Treasurer QGIS Project

lat: N 47? 12' 06.408" lon: E 7? 32' 13.740"

qgiscloud.com - The easiest way to publish online maps with your private
GDI

Am 10.01.2013 13:15, schrieb Luca Delucchi:
> 2013/1/10 Paolo Cavallini <cavallini at faunalia.it>:
>> Hi all.
> 
> Hi Paolo
> 
>> After successfully completing the analysis, I keep on receiving network error messages:
>>
>> Network request
>> http://geodati.fmach.it/zoo/?Request=DescribeProcess&identifier=v_voronoi&Service=WPS&Version=1.0.0
>> timed out
>>
>> apparently I have to restart QGIS to stop them.
>>
> 
> I also receive this messages and have the same messages, I already
> inform Horst about this problem, I have no idea how to solve this
> 
>> All the best.
>>
> 
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with undefined - http://www.enigmail.net/

iQEcBAEBAgAGBQJQ7rJhAAoJENJq1wkKM7pSuy0H/3S/vNvxPeXw0F4isGJcoPhB
uopDa9DzIez/WBn58TSTrIqymfpw0rkkG0BPCEMKRVJer/h2Dwd8Kz/qvLNmSCd+
D6PGgGkSw4pSf9hOg7aYUNv7/bvm5dVhmIYy/g62eEPN8biow9qppiLZfkJVtmCQ
Kf7SgupyybzOBYGU2/Sg2GadfynfpEc2EHRM42khc5g9qdr7fjb3KTjel8AGexkr
emzorhW1o6IglLmJz0KSkzmPomeFKJMTr4BFG3QI5cvj+2YSVZecz90qqi6UYfUa
U0OZNW7XwenAzDy5y8zEzpb+hxzwUKXx8DcIKTuwO3CGADY6n8MFQ+oMezM22Y4=
=WpXe
-----END PGP SIGNATURE-----

From cavallini at faunalia.it  Thu Jan 10 04:30:43 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 10 Jan 2013 13:30:43 +0100
Subject: [Qgis-developer] again on WPS plugin
In-Reply-To: <50EEB262.20002@kappasys.ch>
References: <50EEAC64.40709@faunalia.it>
	<CAK4m-3xQxjKcab1QvttqSA-X9jcbTxhur7=oLjUVCVRjP417zw@mail.gmail.com>
	<50EEB262.20002@kappasys.ch>
Message-ID: <50EEB473.5030401@faunalia.it>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Il 10/01/2013 13:21, Horst D?ster ha scritto:
> Hi Paolo, Luca
> 
> I just checked the voronoi process and it worked fine form me.

Yes, it works fine. The ongoing requests happen for other severs as well, just have a
look to the logs.
All the best.
- -- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlDutHMACgkQ/NedwLUzIr4fkQCgt+tL6fIa6RbfM6mrAbRS5sUa
hMkAnjKgH8otWQmzaT2W17SvYy4kyKv8
=3TPZ
-----END PGP SIGNATURE-----

From bernhard.stroebl at jena.de  Thu Jan 10 05:07:12 2013
From: bernhard.stroebl at jena.de (=?ISO-8859-1?Q?Bernhard_Str=F6bl?=)
Date: Thu, 10 Jan 2013 14:07:12 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50EEB1AB.5020409@gmx.ch>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
	<50EE6226.1090401@jena.de> <50EEB1AB.5020409@gmx.ch>
Message-ID: <50EEBD00.8000201@jena.de>

Matthias,

I try to do it with your words...

Am 10.01.2013 13:18, schrieb Matthias Kuhn:
> Bernhard,
>
> On 01/10/2013 07:39 AM, Bernhard Str?bl wrote:
>> Hi Matthias,
>>
>> comments below.
> same here
>>
>> Am 09.01.2013 16:41, schrieb Matthias Kuhn:
>>> Hi Bernhard
>>>
>>> On 01/09/2013 03:07 PM, Bernhard Str?bl wrote:
>>>> Hi Matthias (and others),
>>>>
>>>> I read your paper and I like the idea of the dual view because
>>>> currently it is not possible to open the attribute editor from the
>>>> table. On the other hand I am not convinced of the filter/selection
>>>> proposal. IMHO one of the strengths when using GIS data is the unity
>>>> of geometry and attribute data. Currently selecting a feature in the
>>>> map also selects its attributes in the corresponding table and vice
>>>> versa.
>>>> examples:
>>>> 1) Select in map and investigate attributes: If a filter was applied
>>>> the data might not be visible in the table without clicking "selection
>>>> to filter".
>>>> 2) filter logical in table and investigate these features in the map:
>>>> You would need an additional "filter to selection" button to handle
>>>> this.
>>>> 3) field calculator: will it update the selected or the filtered
>>>> datasets?
>>>> I think the whole concept will confuse average users. I would favour
>>>> to keep the well established solution of features being selected no
>>>> matter where (table or map) the selection was performed.
>>>
>>> I think the reasoning for the change in the selection/filter paradigm
>>> was rather poor in the document itself. There are other reasons which
>>> are in favor of a change of filter/selection as well.
>>>
>>> E.g. If you want to manually select features out of different subsets.
>>> Let's say you have a layer with a lot of features and you're looking for
>>> a couple of cities (but not all of them) which have more than 100'000
>>> inhabitants and some others which do not meet this criterion, but some
>>> other criteria. At the moment, you can do this by sorting and scrolling
>>> and maybe some other tricks, but it's not that easy. With the
>>> independent filters, this would be a task of changing the filter and
>>> Ctrl-Clicking the required features out of each subset.
>>
>> I see the point in this, but the case you describe could be solved
>> differently (that is at least theroretically :-). If the selection
>> tool would not always create a new selection (as is now) but enable
>> the user to either "add to selection" or "select within current
>> selection" or even "remove from selection" this would IMHO be more
>> straightforward for users.
>>
> I'm sorry, I'm not able to follow this description exactly. Could you
> please describe in detail how you imagine the process.
> If possible, please also outline the scenario, where the user wants to
> check/update individually the attributes for all cities with more than
> 100'000 inhabitants in the attribute view.

"E.g. If you want to manually select features out of different subsets.
Let's say you have a layer with a lot of features and you're looking for
a couple of cities (but not all of them) which have more than 100'000 
inhabitants"

in extended selection enter: num_inhabitants > 100000
click: "new selection"
result (example): 150 datasets selected

"and some others which do not meet this criterion, but some
other criteria."

in extended selection enter: some_other_field = some_other_ctriteria
click: "add to selection"
result (example): 270 datasets selected (150 from before + 120 matching 
"some_other_criteria")

after that you can manually remove all datasets that you do not need 
from the selection but I doubt this is a real use case, because how 
would you decide which to keep and which to remove? Obviously because 
some attributes match certain criteria, so here we go: e.g. user wants 
to see only the cities with an airport

in extended selection enter: airport = false
click: "remove from selection"
result (example): 205 datasets selected (from the previosuly selected 65 
do not have an airport and are therefore removed from the selection)

now have a look at the map and see where these cities are, in this case 
manual removal seems imaginable, so lets remove 7 from the selection; 
result: 198 datasets selected (205 - 7) in both table and map!

now the user can do anything with this selection (update certain fields, 
export to new dataset, use for a spatial query...)

I am of course totally aware that the 205 datasets can be achieved by 
using only one query like "(num_inhabitants > 100000 OR some_other_field 
= some_other_ctriteria) AND airport = true" but the whole thing starts 
getting interesting when we imagine a spatial query in the start e.g. 
"select all cities within 20 km from the sea" then we could got to the 
attribute table enter "(num_inhabitants <= 100000 OR some_other_field != 
some_other_ctriteria) AND airport = false" and click "remove from 
selection" to get a result containing all cities with either more than 
100000 inhabitants or some_other_ctriteria and an airport and within 20 
km of the sea

the "show only selected" checkbox should of course work as one would 
expect it to i.e. whenever the selection changes, no matter if this 
change originates from a user's click in the table or map or from using 
one of the selection buttons the dataset shown contains _all_ currently 
selected datasets and _only_ them

I cannot imagine any use case that can not be tackled with what I 
propose but I have a feeling that the filter/selection concept would 
really confuse users

>
> Please excuse my ignorance

hope I could clarify what I mean

Bernhard

From landa.martin at gmail.com  Thu Jan 10 07:08:46 2013
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Jan 2013 16:08:46 +0100
Subject: [Qgis-developer] QGIS tool for vector data merging proposal
In-Reply-To: <CAEaNSxuSC1wKnAVfA8z-Jbmfew7668Tqy9xSjAJXvbAfH9B3bQ@mail.gmail.com>
References: <CAEaNSxuSC1wKnAVfA8z-Jbmfew7668Tqy9xSjAJXvbAfH9B3bQ@mail.gmail.com>
Message-ID: <CA+Ei1Oc89mYWmmFUNH+sxFB++RuR0vVVm2+9o2jRcPfD-3Hucg@mail.gmail.com>

Hi,

2012/4/17 Viktor Nagy <a0smucig at gmail.com>:
> I hope this isn't the wrong place for this announcement, though I also sent
> it to the soc list. It's a GSoC proposal. I'm Viktor Nagy, an MSc. student
> at the University of Szeged, Hungary.
> If you are interested, please have a look at my proposal about some advanced
> vector data merging.
> http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/a0smucig/1
> Comments and suggestions are much appreciated!

is anybody working on this topic? I have a student who is interested
to work on it (just an idea).

Martin

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From matthias.kuhn at gmx.ch  Thu Jan 10 07:12:32 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 10 Jan 2013 16:12:32 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50EEBD00.8000201@jena.de>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
	<50EE6226.1090401@jena.de> <50EEB1AB.5020409@gmx.ch>
	<50EEBD00.8000201@jena.de>
Message-ID: <50EEDA60.5090800@gmx.ch>

On 01/10/2013 02:07 PM, Bernhard Str?bl wrote:
> Matthias,
>
> I try to do it with your words...
>
> Am 10.01.2013 13:18, schrieb Matthias Kuhn:
>> Bernhard,
>>
>> On 01/10/2013 07:39 AM, Bernhard Str?bl wrote:
>>> Hi Matthias,
>>>
>>> comments below.
>> same here
>>>
>>> Am 09.01.2013 16:41, schrieb Matthias Kuhn:
>>>> Hi Bernhard
>>>>
>>>> On 01/09/2013 03:07 PM, Bernhard Str?bl wrote:
>>>>> Hi Matthias (and others),
>>>>>
>>>>> I read your paper and I like the idea of the dual view because
>>>>> currently it is not possible to open the attribute editor from the
>>>>> table. On the other hand I am not convinced of the filter/selection
>>>>> proposal. IMHO one of the strengths when using GIS data is the unity
>>>>> of geometry and attribute data. Currently selecting a feature in the
>>>>> map also selects its attributes in the corresponding table and vice
>>>>> versa.
>>>>> examples:
>>>>> 1) Select in map and investigate attributes: If a filter was applied
>>>>> the data might not be visible in the table without clicking 
>>>>> "selection
>>>>> to filter".
>>>>> 2) filter logical in table and investigate these features in the map:
>>>>> You would need an additional "filter to selection" button to handle
>>>>> this.
>>>>> 3) field calculator: will it update the selected or the filtered
>>>>> datasets?
>>>>> I think the whole concept will confuse average users. I would favour
>>>>> to keep the well established solution of features being selected no
>>>>> matter where (table or map) the selection was performed.
>>>>
>>>> I think the reasoning for the change in the selection/filter paradigm
>>>> was rather poor in the document itself. There are other reasons which
>>>> are in favor of a change of filter/selection as well.
>>>>
>>>> E.g. If you want to manually select features out of different subsets.
>>>> Let's say you have a layer with a lot of features and you're 
>>>> looking for
>>>> a couple of cities (but not all of them) which have more than 100'000
>>>> inhabitants and some others which do not meet this criterion, but some
>>>> other criteria. At the moment, you can do this by sorting and 
>>>> scrolling
>>>> and maybe some other tricks, but it's not that easy. With the
>>>> independent filters, this would be a task of changing the filter and
>>>> Ctrl-Clicking the required features out of each subset.
>>>
>>> I see the point in this, but the case you describe could be solved
>>> differently (that is at least theroretically :-). If the selection
>>> tool would not always create a new selection (as is now) but enable
>>> the user to either "add to selection" or "select within current
>>> selection" or even "remove from selection" this would IMHO be more
>>> straightforward for users.
>>>
>> I'm sorry, I'm not able to follow this description exactly. Could you
>> please describe in detail how you imagine the process.
>> If possible, please also outline the scenario, where the user wants to
>> check/update individually the attributes for all cities with more than
>> 100'000 inhabitants in the attribute view.
>
> "E.g. If you want to manually select features out of different subsets.
> Let's say you have a layer with a lot of features and you're looking for
> a couple of cities (but not all of them) which have more than 100'000 
> inhabitants"
>
> in extended selection enter: num_inhabitants > 100000
> click: "new selection"
> result (example): 150 datasets selected
>
> "and some others which do not meet this criterion, but some
> other criteria."
>
> in extended selection enter: some_other_field = some_other_ctriteria
> click: "add to selection"
> result (example): 270 datasets selected (150 from before + 120 
> matching "some_other_criteria")
>
> after that you can manually remove all datasets that you do not need 
> from the selection but I doubt this is a real use case, because how 
> would you decide which to keep and which to remove? Obviously because 
> some attributes match certain criteria, so here we go: e.g. user wants 
> to see only the cities with an airport
>
> in extended selection enter: airport = false
> click: "remove from selection"
> result (example): 205 datasets selected (from the previosuly selected 
> 65 do not have an airport and are therefore removed from the selection)
>
> now have a look at the map and see where these cities are, in this 
> case manual removal seems imaginable, so lets remove 7 from the 
> selection; result: 198 datasets selected (205 - 7) in both table and map!
>
> now the user can do anything with this selection (update certain 
> fields, export to new dataset, use for a spatial query...)
>
> I am of course totally aware that the 205 datasets can be achieved by 
> using only one query like "(num_inhabitants > 100000 OR 
> some_other_field = some_other_ctriteria) AND airport = true" but the 
> whole thing starts getting interesting when we imagine a spatial query 
> in the start e.g. "select all cities within 20 km from the sea" then 
> we could got to the attribute table enter "(num_inhabitants <= 100000 
> OR some_other_field != some_other_ctriteria) AND airport = false" and 
> click "remove from selection" to get a result containing all cities 
> with either more than 100000 inhabitants or some_other_ctriteria and 
> an airport and within 20 km of the sea
>
> the "show only selected" checkbox should of course work as one would 
> expect it to i.e. whenever the selection changes, no matter if this 
> change originates from a user's click in the table or map or from 
> using one of the selection buttons the dataset shown contains _all_ 
> currently selected datasets and _only_ them
>
> I cannot imagine any use case that can not be tackled with what I 
> propose but I have a feeling that the filter/selection concept would 
> really confuse users
>
Ok, I think I got your idea.

Of course it is possible to generate a useful selection now already by 
using an appropriate expression. This works as long as your requirements 
are well defined (as in num_inhabitants > 100000 AND airport = true 
etc.). Unfortunately that's not always the case as in this OSM data I've 
had a look at recently, where the number of stories was supposed to be 
in a field but sometimes something like "4-8", ">9" etc. was in there, 
requiring special attention.

And there is the other use-case I mentioned in my last mail (and that's 
probably the main reason): The attribute editor view (the one with the 
list on the left and the attribute editor on the right) will greatly 
benefit from the filter/selection paradigm.
In the example before (number of stories), you can apply a filter, to 
only show the buildings not containing a clean number (i.e. requiring 
inspection) and manually adjust the numbers to be in a consistent format 
you can use. In this case you will need the selection to change (because 
you change it, whenever you change the currently edited feature(s)) but 
you don't want your filter to change before you finished inspecting all 
the suspicious features.

I suppose we won't get around this (unless the dual view as a whole is 
dumped) but I'm sure there is a possibility that will keep it as easy as 
possible for every user.
Maybe a solution could be to detach the selection "advanced search" tool 
from the attribute table (keeping it available with a button) as also 
requested in http://hub.qgis.org/issues/6799. This tool could then also 
implement your ideas such as "add to selection", "remove from selection" 
and "intersect with selection".

Regards,
Matthias


From bernhard.stroebl at jena.de  Thu Jan 10 07:52:36 2013
From: bernhard.stroebl at jena.de (=?ISO-8859-1?Q?Bernhard_Str=F6bl?=)
Date: Thu, 10 Jan 2013 16:52:36 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50EEDA60.5090800@gmx.ch>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
	<50EE6226.1090401@jena.de> <50EEB1AB.5020409@gmx.ch>
	<50EEBD00.8000201@jena.de> <50EEDA60.5090800@gmx.ch>
Message-ID: <50EEE3C4.1020106@jena.de>



Am 10.01.2013 16:12, schrieb Matthias Kuhn:

-- 8< snip --
>>
>> "E.g. If you want to manually select features out of different subsets.
>> Let's say you have a layer with a lot of features and you're looking for
>> a couple of cities (but not all of them) which have more than 100'000
>> inhabitants"
>>
>> in extended selection enter: num_inhabitants > 100000
>> click: "new selection"
>> result (example): 150 datasets selected
>>
>> "and some others which do not meet this criterion, but some
>> other criteria."
>>
>> in extended selection enter: some_other_field = some_other_ctriteria
>> click: "add to selection"
>> result (example): 270 datasets selected (150 from before + 120
>> matching "some_other_criteria")
>>
>> after that you can manually remove all datasets that you do not need
>> from the selection but I doubt this is a real use case, because how
>> would you decide which to keep and which to remove? Obviously because
>> some attributes match certain criteria, so here we go: e.g. user wants
>> to see only the cities with an airport
>>
>> in extended selection enter: airport = false
>> click: "remove from selection"
>> result (example): 205 datasets selected (from the previosuly selected
>> 65 do not have an airport and are therefore removed from the selection)
>>
>> now have a look at the map and see where these cities are, in this
>> case manual removal seems imaginable, so lets remove 7 from the
>> selection; result: 198 datasets selected (205 - 7) in both table and map!
>>
>> now the user can do anything with this selection (update certain
>> fields, export to new dataset, use for a spatial query...)
>>
>> I am of course totally aware that the 205 datasets can be achieved by
>> using only one query like "(num_inhabitants > 100000 OR
>> some_other_field = some_other_ctriteria) AND airport = true" but the
>> whole thing starts getting interesting when we imagine a spatial query
>> in the start e.g. "select all cities within 20 km from the sea" then
>> we could got to the attribute table enter "(num_inhabitants <= 100000
>> OR some_other_field != some_other_ctriteria) AND airport = false" and
>> click "remove from selection" to get a result containing all cities
>> with either more than 100000 inhabitants or some_other_ctriteria and
>> an airport and within 20 km of the sea
>>
>> the "show only selected" checkbox should of course work as one would
>> expect it to i.e. whenever the selection changes, no matter if this
>> change originates from a user's click in the table or map or from
>> using one of the selection buttons the dataset shown contains _all_
>> currently selected datasets and _only_ them
>>
>> I cannot imagine any use case that can not be tackled with what I
>> propose but I have a feeling that the filter/selection concept would
>> really confuse users
>>
> Ok, I think I got your idea.
>
> Of course it is possible to generate a useful selection now already by
> using an appropriate expression. This works as long as your requirements
> are well defined (as in num_inhabitants > 100000 AND airport = true
> etc.). Unfortunately that's not always the case as in this OSM data I've
> had a look at recently, where the number of stories was supposed to be
> in a field but sometimes something like "4-8", ">9" etc. was in there,
> requiring special attention.
>
> And there is the other use-case I mentioned in my last mail (and that's
> probably the main reason): The attribute editor view (the one with the
> list on the left and the attribute editor on the right) will greatly
> benefit from the filter/selection paradigm.
> In the example before (number of stories), you can apply a filter, to
> only show the buildings not containing a clean number (i.e. requiring
> inspection) and manually adjust the numbers to be in a consistent format
> you can use. In this case you will need the selection to change (because
> you change it, whenever you change the currently edited feature(s)) but
> you don't want your filter to change before you finished inspecting all
> the suspicious features.

bare with me I do not get your point here. Why would I change the 
selection when I change a feature's value? We do not even have a 
selection, do we? All we have is a filter. ...ahh wait a bit... the 
filter is applied once and stays even if data are changed so they do not 
match the filter anymore - but that is the current behaviour with a 
selection, isn't it?
How if we had a selection and tick "show selected only" and switch to 
the attribute view where we fix one dataset after another - would that 
be any different from using the filter?
I really do like the dual view idea but do not understand why it is 
linked to the filter.

>
> I suppose we won't get around this (unless the dual view as a whole is
> dumped) but I'm sure there is a possibility that will keep it as easy as
> possible for every user.
> Maybe a solution could be to detach the selection "advanced search" tool
> from the attribute table (keeping it available with a button) as also
> requested in http://hub.qgis.org/issues/6799. This tool could then also
> implement your ideas such as "add to selection", "remove from selection"
> and "intersect with selection".

+1 for #6790

Bernhard

From matthias.kuhn at gmx.ch  Thu Jan 10 08:03:33 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 10 Jan 2013 17:03:33 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50EEE3C4.1020106@jena.de>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
	<50EE6226.1090401@jena.de> <50EEB1AB.5020409@gmx.ch>
	<50EEBD00.8000201@jena.de> <50EEDA60.5090800@gmx.ch>
	<50EEE3C4.1020106@jena.de>
Message-ID: <50EEE655.90109@gmx.ch>

On 01/10/2013 04:52 PM, Bernhard Str?bl wrote:
>
>
> Am 10.01.2013 16:12, schrieb Matthias Kuhn:
>
> -- 8< snip --
>>>
>>> "E.g. If you want to manually select features out of different subsets.
>>> Let's say you have a layer with a lot of features and you're looking 
>>> for
>>> a couple of cities (but not all of them) which have more than 100'000
>>> inhabitants"
>>>
>>> in extended selection enter: num_inhabitants > 100000
>>> click: "new selection"
>>> result (example): 150 datasets selected
>>>
>>> "and some others which do not meet this criterion, but some
>>> other criteria."
>>>
>>> in extended selection enter: some_other_field = some_other_ctriteria
>>> click: "add to selection"
>>> result (example): 270 datasets selected (150 from before + 120
>>> matching "some_other_criteria")
>>>
>>> after that you can manually remove all datasets that you do not need
>>> from the selection but I doubt this is a real use case, because how
>>> would you decide which to keep and which to remove? Obviously because
>>> some attributes match certain criteria, so here we go: e.g. user wants
>>> to see only the cities with an airport
>>>
>>> in extended selection enter: airport = false
>>> click: "remove from selection"
>>> result (example): 205 datasets selected (from the previosuly selected
>>> 65 do not have an airport and are therefore removed from the selection)
>>>
>>> now have a look at the map and see where these cities are, in this
>>> case manual removal seems imaginable, so lets remove 7 from the
>>> selection; result: 198 datasets selected (205 - 7) in both table and 
>>> map!
>>>
>>> now the user can do anything with this selection (update certain
>>> fields, export to new dataset, use for a spatial query...)
>>>
>>> I am of course totally aware that the 205 datasets can be achieved by
>>> using only one query like "(num_inhabitants > 100000 OR
>>> some_other_field = some_other_ctriteria) AND airport = true" but the
>>> whole thing starts getting interesting when we imagine a spatial query
>>> in the start e.g. "select all cities within 20 km from the sea" then
>>> we could got to the attribute table enter "(num_inhabitants <= 100000
>>> OR some_other_field != some_other_ctriteria) AND airport = false" and
>>> click "remove from selection" to get a result containing all cities
>>> with either more than 100000 inhabitants or some_other_ctriteria and
>>> an airport and within 20 km of the sea
>>>
>>> the "show only selected" checkbox should of course work as one would
>>> expect it to i.e. whenever the selection changes, no matter if this
>>> change originates from a user's click in the table or map or from
>>> using one of the selection buttons the dataset shown contains _all_
>>> currently selected datasets and _only_ them
>>>
>>> I cannot imagine any use case that can not be tackled with what I
>>> propose but I have a feeling that the filter/selection concept would
>>> really confuse users
>>>
>> Ok, I think I got your idea.
>>
>> Of course it is possible to generate a useful selection now already by
>> using an appropriate expression. This works as long as your requirements
>> are well defined (as in num_inhabitants > 100000 AND airport = true
>> etc.). Unfortunately that's not always the case as in this OSM data I've
>> had a look at recently, where the number of stories was supposed to be
>> in a field but sometimes something like "4-8", ">9" etc. was in there,
>> requiring special attention.
>>
>> And there is the other use-case I mentioned in my last mail (and that's
>> probably the main reason): The attribute editor view (the one with the
>> list on the left and the attribute editor on the right) will greatly
>> benefit from the filter/selection paradigm.
>> In the example before (number of stories), you can apply a filter, to
>> only show the buildings not containing a clean number (i.e. requiring
>> inspection) and manually adjust the numbers to be in a consistent format
>> you can use. In this case you will need the selection to change (because
>> you change it, whenever you change the currently edited feature(s)) but
>> you don't want your filter to change before you finished inspecting all
>> the suspicious features.
>
> bare with me I do not get your point here. Why would I change the 
> selection when I change a feature's value? We do not even have a 
> selection, do we? All we have is a filter. ...ahh wait a bit... the 
> filter is applied once and stays even if data are changed so they do 
> not match the filter anymore - but that is the current behaviour with 
> a selection, isn't it?
> How if we had a selection and tick "show selected only" and switch to 
> the attribute view where we fix one dataset after another - would that 
> be any different from using the filter?
> I really do like the dual view idea but do not understand why it is 
> linked to the filter.
>
The filter should always represent the current status of the data, even 
when it changes.
The selection needs to be changed, because it defines which feature is 
currently visible in the attribute editor (right side of the editor 
view). And if you want to edit 5 different features one after the other, 
you change the selection 5 times. Once you changed a certain feature, it 
may disappear from the filter. The others stay visible. For the example 
above this means: edit the data until all suspicious features 
disappeared and you've got a clean dataset.

Matthias

>>
>> I suppose we won't get around this (unless the dual view as a whole is
>> dumped) but I'm sure there is a possibility that will keep it as easy as
>> possible for every user.
>> Maybe a solution could be to detach the selection "advanced search" tool
>> from the attribute table (keeping it available with a button) as also
>> requested in http://hub.qgis.org/issues/6799. This tool could then also
>> implement your ideas such as "add to selection", "remove from selection"
>> and "intersect with selection".
>
> +1 for #6790
>
> Bernhard
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From bernhard.stroebl at jena.de  Thu Jan 10 08:23:35 2013
From: bernhard.stroebl at jena.de (=?ISO-8859-1?Q?Bernhard_Str=F6bl?=)
Date: Thu, 10 Jan 2013 17:23:35 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50EEE655.90109@gmx.ch>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
	<50EE6226.1090401@jena.de> <50EEB1AB.5020409@gmx.ch>
	<50EEBD00.8000201@jena.de> <50EEDA60.5090800@gmx.ch>
	<50EEE3C4.1020106@jena.de> <50EEE655.90109@gmx.ch>
Message-ID: <50EEEB07.7050808@jena.de>



Am 10.01.2013 17:03, schrieb Matthias Kuhn:
> On 01/10/2013 04:52 PM, Bernhard Str?bl wrote:
>>
>>
>> Am 10.01.2013 16:12, schrieb Matthias Kuhn:
>>
>> -- 8< snip --
>>>>
>>>> "E.g. If you want to manually select features out of different subsets.
>>>> Let's say you have a layer with a lot of features and you're looking
>>>> for
>>>> a couple of cities (but not all of them) which have more than 100'000
>>>> inhabitants"
>>>>
>>>> in extended selection enter: num_inhabitants > 100000
>>>> click: "new selection"
>>>> result (example): 150 datasets selected
>>>>
>>>> "and some others which do not meet this criterion, but some
>>>> other criteria."
>>>>
>>>> in extended selection enter: some_other_field = some_other_ctriteria
>>>> click: "add to selection"
>>>> result (example): 270 datasets selected (150 from before + 120
>>>> matching "some_other_criteria")
>>>>
>>>> after that you can manually remove all datasets that you do not need
>>>> from the selection but I doubt this is a real use case, because how
>>>> would you decide which to keep and which to remove? Obviously because
>>>> some attributes match certain criteria, so here we go: e.g. user wants
>>>> to see only the cities with an airport
>>>>
>>>> in extended selection enter: airport = false
>>>> click: "remove from selection"
>>>> result (example): 205 datasets selected (from the previosuly selected
>>>> 65 do not have an airport and are therefore removed from the selection)
>>>>
>>>> now have a look at the map and see where these cities are, in this
>>>> case manual removal seems imaginable, so lets remove 7 from the
>>>> selection; result: 198 datasets selected (205 - 7) in both table and
>>>> map!
>>>>
>>>> now the user can do anything with this selection (update certain
>>>> fields, export to new dataset, use for a spatial query...)
>>>>
>>>> I am of course totally aware that the 205 datasets can be achieved by
>>>> using only one query like "(num_inhabitants > 100000 OR
>>>> some_other_field = some_other_ctriteria) AND airport = true" but the
>>>> whole thing starts getting interesting when we imagine a spatial query
>>>> in the start e.g. "select all cities within 20 km from the sea" then
>>>> we could got to the attribute table enter "(num_inhabitants <= 100000
>>>> OR some_other_field != some_other_ctriteria) AND airport = false" and
>>>> click "remove from selection" to get a result containing all cities
>>>> with either more than 100000 inhabitants or some_other_ctriteria and
>>>> an airport and within 20 km of the sea
>>>>
>>>> the "show only selected" checkbox should of course work as one would
>>>> expect it to i.e. whenever the selection changes, no matter if this
>>>> change originates from a user's click in the table or map or from
>>>> using one of the selection buttons the dataset shown contains _all_
>>>> currently selected datasets and _only_ them
>>>>
>>>> I cannot imagine any use case that can not be tackled with what I
>>>> propose but I have a feeling that the filter/selection concept would
>>>> really confuse users
>>>>
>>> Ok, I think I got your idea.
>>>
>>> Of course it is possible to generate a useful selection now already by
>>> using an appropriate expression. This works as long as your requirements
>>> are well defined (as in num_inhabitants > 100000 AND airport = true
>>> etc.). Unfortunately that's not always the case as in this OSM data I've
>>> had a look at recently, where the number of stories was supposed to be
>>> in a field but sometimes something like "4-8", ">9" etc. was in there,
>>> requiring special attention.
>>>
>>> And there is the other use-case I mentioned in my last mail (and that's
>>> probably the main reason): The attribute editor view (the one with the
>>> list on the left and the attribute editor on the right) will greatly
>>> benefit from the filter/selection paradigm.
>>> In the example before (number of stories), you can apply a filter, to
>>> only show the buildings not containing a clean number (i.e. requiring
>>> inspection) and manually adjust the numbers to be in a consistent format
>>> you can use. In this case you will need the selection to change (because
>>> you change it, whenever you change the currently edited feature(s)) but
>>> you don't want your filter to change before you finished inspecting all
>>> the suspicious features.
>>
>> bare with me I do not get your point here. Why would I change the
>> selection when I change a feature's value? We do not even have a
>> selection, do we? All we have is a filter. ...ahh wait a bit... the
>> filter is applied once and stays even if data are changed so they do
>> not match the filter anymore - but that is the current behaviour with
>> a selection, isn't it?
>> How if we had a selection and tick "show selected only" and switch to
>> the attribute view where we fix one dataset after another - would that
>> be any different from using the filter?
>> I really do like the dual view idea but do not understand why it is
>> linked to the filter.
>>
> The filter should always represent the current status of the data, even
> when it changes.
> The selection needs to be changed, because it defines which feature is
> currently visible in the attribute editor (right side of the editor
> view). And if you want to edit 5 different features one after the other,
> you change the selection 5 times.

ok, I see, but that would be a different behaviour from what we have now 
when clicking with the "i" or right clicking in the table. Both leave 
the selection unchanged. Imagine selecting some features e.g. in the map 
then pressing "selection to filter" changing to the attribute view, 
investigating some features and when going back to the map/table view 
your selection is gone. Maybe there is another solution to this then 
changing the selection? In that case you would not need the filter 
anymore here :-)

Once you changed a certain feature, it
> may disappear from the filter. The others stay visible. For the example
> above this means: edit the data until all suspicious features
> disappeared and you've got a clean dataset.

so the filter continuously refreshes according to any data changes. This 
would be an appropriate behaviour for a filter, not for a selection, 
though. Still I would prefer basing all table work on the selection. 
Think about using the calculator updating selected features and a filter 
prevents me from seeing my selection. This could damage people's data.

Bernhard

>
> Matthias
>
>>>
>>> I suppose we won't get around this (unless the dual view as a whole is
>>> dumped) but I'm sure there is a possibility that will keep it as easy as
>>> possible for every user.
>>> Maybe a solution could be to detach the selection "advanced search" tool
>>> from the attribute table (keeping it available with a button) as also
>>> requested in http://hub.qgis.org/issues/6799. This tool could then also
>>> implement your ideas such as "add to selection", "remove from selection"
>>> and "intersect with selection".
>>
>> +1 for #6790
>>
>> Bernhard

From matthias.kuhn at gmx.ch  Sat Jan 12 02:18:43 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Sat, 12 Jan 2013 11:18:43 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50EEEB07.7050808@jena.de>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
	<50EE6226.1090401@jena.de> <50EEB1AB.5020409@gmx.ch>
	<50EEBD00.8000201@jena.de> <50EEDA60.5090800@gmx.ch>
	<50EEE3C4.1020106@jena.de> <50EEE655.90109@gmx.ch>
	<50EEEB07.7050808@jena.de>
Message-ID: <50F13883.1010202@gmx.ch>

On 01/10/2013 05:23 PM, Bernhard Str?bl wrote:
>
>
> Am 10.01.2013 17:03, schrieb Matthias Kuhn:
>> On 01/10/2013 04:52 PM, Bernhard Str?bl wrote:
>>>
>>>
>>> Am 10.01.2013 16:12, schrieb Matthias Kuhn:
>>>
>>> -- 8< snip --
>>>>>
>>>>> "E.g. If you want to manually select features out of different 
>>>>> subsets.
>>>>> Let's say you have a layer with a lot of features and you're looking
>>>>> for
>>>>> a couple of cities (but not all of them) which have more than 100'000
>>>>> inhabitants"
>>>>>
>>>>> in extended selection enter: num_inhabitants > 100000
>>>>> click: "new selection"
>>>>> result (example): 150 datasets selected
>>>>>
>>>>> "and some others which do not meet this criterion, but some
>>>>> other criteria."
>>>>>
>>>>> in extended selection enter: some_other_field = some_other_ctriteria
>>>>> click: "add to selection"
>>>>> result (example): 270 datasets selected (150 from before + 120
>>>>> matching "some_other_criteria")
>>>>>
>>>>> after that you can manually remove all datasets that you do not need
>>>>> from the selection but I doubt this is a real use case, because how
>>>>> would you decide which to keep and which to remove? Obviously because
>>>>> some attributes match certain criteria, so here we go: e.g. user 
>>>>> wants
>>>>> to see only the cities with an airport
>>>>>
>>>>> in extended selection enter: airport = false
>>>>> click: "remove from selection"
>>>>> result (example): 205 datasets selected (from the previosuly selected
>>>>> 65 do not have an airport and are therefore removed from the 
>>>>> selection)
>>>>>
>>>>> now have a look at the map and see where these cities are, in this
>>>>> case manual removal seems imaginable, so lets remove 7 from the
>>>>> selection; result: 198 datasets selected (205 - 7) in both table and
>>>>> map!
>>>>>
>>>>> now the user can do anything with this selection (update certain
>>>>> fields, export to new dataset, use for a spatial query...)
>>>>>
>>>>> I am of course totally aware that the 205 datasets can be achieved by
>>>>> using only one query like "(num_inhabitants > 100000 OR
>>>>> some_other_field = some_other_ctriteria) AND airport = true" but the
>>>>> whole thing starts getting interesting when we imagine a spatial 
>>>>> query
>>>>> in the start e.g. "select all cities within 20 km from the sea" then
>>>>> we could got to the attribute table enter "(num_inhabitants <= 100000
>>>>> OR some_other_field != some_other_ctriteria) AND airport = false" and
>>>>> click "remove from selection" to get a result containing all cities
>>>>> with either more than 100000 inhabitants or some_other_ctriteria and
>>>>> an airport and within 20 km of the sea
>>>>>
>>>>> the "show only selected" checkbox should of course work as one would
>>>>> expect it to i.e. whenever the selection changes, no matter if this
>>>>> change originates from a user's click in the table or map or from
>>>>> using one of the selection buttons the dataset shown contains _all_
>>>>> currently selected datasets and _only_ them
>>>>>
>>>>> I cannot imagine any use case that can not be tackled with what I
>>>>> propose but I have a feeling that the filter/selection concept would
>>>>> really confuse users
>>>>>
>>>> Ok, I think I got your idea.
>>>>
>>>> Of course it is possible to generate a useful selection now already by
>>>> using an appropriate expression. This works as long as your 
>>>> requirements
>>>> are well defined (as in num_inhabitants > 100000 AND airport = true
>>>> etc.). Unfortunately that's not always the case as in this OSM data 
>>>> I've
>>>> had a look at recently, where the number of stories was supposed to be
>>>> in a field but sometimes something like "4-8", ">9" etc. was in there,
>>>> requiring special attention.
>>>>
>>>> And there is the other use-case I mentioned in my last mail (and 
>>>> that's
>>>> probably the main reason): The attribute editor view (the one with the
>>>> list on the left and the attribute editor on the right) will greatly
>>>> benefit from the filter/selection paradigm.
>>>> In the example before (number of stories), you can apply a filter, to
>>>> only show the buildings not containing a clean number (i.e. requiring
>>>> inspection) and manually adjust the numbers to be in a consistent 
>>>> format
>>>> you can use. In this case you will need the selection to change 
>>>> (because
>>>> you change it, whenever you change the currently edited feature(s)) 
>>>> but
>>>> you don't want your filter to change before you finished inspecting 
>>>> all
>>>> the suspicious features.
>>>
>>> bare with me I do not get your point here. Why would I change the
>>> selection when I change a feature's value? We do not even have a
>>> selection, do we? All we have is a filter. ...ahh wait a bit... the
>>> filter is applied once and stays even if data are changed so they do
>>> not match the filter anymore - but that is the current behaviour with
>>> a selection, isn't it?
>>> How if we had a selection and tick "show selected only" and switch to
>>> the attribute view where we fix one dataset after another - would that
>>> be any different from using the filter?
>>> I really do like the dual view idea but do not understand why it is
>>> linked to the filter.
>>>
>> The filter should always represent the current status of the data, even
>> when it changes.
>> The selection needs to be changed, because it defines which feature is
>> currently visible in the attribute editor (right side of the editor
>> view). And if you want to edit 5 different features one after the other,
>> you change the selection 5 times.
>
> ok, I see, but that would be a different behaviour from what we have 
> now when clicking with the "i" or right clicking in the table. Both 
> leave the selection unchanged. Imagine selecting some features e.g. in 
> the map then pressing "selection to filter" changing to the attribute 
> view, investigating some features and when going back to the map/table 
> view your selection is gone. Maybe there is another solution to this 
> then changing the selection? In that case you would not need the 
> filter anymore here :-)

You're correct. It wasn't our idea to implement it this way and thinking 
about it again it's really not a good idea. Sorry for the confusion.
I had this idea because for multi-edit selecting features first and then 
changing attributes would be really handy, but that's not part of the 
current work actually. So although not necessary now, this idea may 
become interesting again later on (I hope to get some experience with 
all these possibilities before then).

For now the idea is to have separate buttons in the feature list to 
choose the feature to edit :)

>
> Once you changed a certain feature, it
>> may disappear from the filter. The others stay visible. For the example
>> above this means: edit the data until all suspicious features
>> disappeared and you've got a clean dataset.
>
> so the filter continuously refreshes according to any data changes. 
> This would be an appropriate behaviour for a filter, not for a 
> selection, though. Still I would prefer basing all table work on the 
> selection. Think about using the calculator updating selected features 
> and a filter prevents me from seeing my selection. This could damage 
> people's data.
>
This can be taken care of with a warning (Like: The current selection 
contains 3 items which are not shown due to filter restrictions).

Maybe there is still the need for a "link filter to selection" option, 
in case there is strong interest in keeping a possibility for the 
current way. I think that should be discussed, once a first 
implementation is available.

Regards

From martin.laloux at gmail.com  Sun Jan 13 00:09:39 2013
From: martin.laloux at gmail.com (gene)
Date: Sun, 13 Jan 2013 00:09:39 -0800 (PST)
Subject: [Qgis-developer] Mac OS X 10.6, master version,
 sextante problem and solution (Python 2.6.x)
Message-ID: <1358064579149-5027133.post@n6.nabble.com>

I had a problem with the sextante module in the last master version of 
http://qgis.dakotacarto.com/ <http://qgis.dakotacarto.com/>  .  The Python
module *importlib* is not present in a version of Python prior to 2.7

The solution ? 
Install   importlib <http://pypi.python.org/pypi/importlib/>  , which is a
backport of the importlib.import_module() from Python 2.7



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Mac-OS-X-10-6-master-version-sextante-problem-and-solution-Python-2-6-x-tp5027133.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From rdmailings at duif.net  Sun Jan 13 01:03:12 2013
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 13 Jan 2013 10:03:12 +0100
Subject: [Qgis-developer] gitosis @ hub.qgis.org key problem
Message-ID: <50F27850.7030408@duif.net>

Hi,

I've a new OS on my laptop, with a new ssh key

After updating a plugin I want to push to gitosis at qgis.org, but am being 
asked for a password.

Nathan found http://hub.qgis.org/my/public_keys for me, and I deactived 
my old key (because the site says you cannot alter or remove an old 
key), and I tried to create a new key with my own identity/name 
rduivenvoorde. This failed with a message like: you already have a key 
with that id (which I cannot change though).

Then I created a new key with another title/id (my email) but still, if 
I try to push I get being asked for a password:

gitosis at qgis.org's password:
Permission denied (publickey,password).
fatal: The remote end hung up unexpectedly

so apparently my active current key is not being used?

did somebody else already tried a second key? I get the idea that the 
name of the key (= title in webpage) should actually be you identity... 
But I cannot renew the key with 'rduivenvoorde'

Somebody can help me?

Regards,

Richard Duivenvoorde

From volayaf at gmail.com  Sun Jan 13 08:10:45 2013
From: volayaf at gmail.com (Victor Olaya)
Date: Sun, 13 Jan 2013 17:10:45 +0100
Subject: [Qgis-developer] Exporting a raster layer
Message-ID: <CAJsc-7ypwWV3mqPD-h9vFnpAZAVVJGHMZ3qcNq5BNyL_4KOanQ@mail.gmail.com>

Hi all

I have just implemented a new mechanism in SEXTANTE to make handling
of file formats more clear and easy. Now, no matter what provider is
creating a vector layer, all formats supported by QGIS can be
selected, without requiring anything special added to the algorithm
provider. SEXTANTE takes care of converting if needed.

I want to implement the same thing for raster layers, but I do not
know how to export a raster layer into a given format (except by
calling GDAL translate), and I need it for that.. Can any one give me
an idea or point me to some code to do that?

Thanks in advance!

Victor

From francescoboccacci at libero.it  Sun Jan 13 08:51:47 2013
From: francescoboccacci at libero.it (francescoboccacci at libero.it)
Date: Sun, 13 Jan 2013 17:51:47 +0100 (CET)
Subject: [Qgis-developer] Commit delete features
Message-ID: <3077673.906621358095907980.JavaMail.defaultUser@defaultHost>

Hi all,
i would like to delete the features in a shapefiles that haven't a specific 
field value. See below:

              provider = layer.dataProvider()

              feat = QgsFeature()
              allAttrs = provider.attributeIndexes()
              provider.select(allAttrs)
              caps = layer.dataProvider().capabilities()
              fldDesc = provider.fieldNameIndex("values") #values is field 
name
              while provider.nextFeature( feat ):
                id = feat.id()
                attrs = feat.attributeMap()
                for (k,attr) in attrs.iteritems():
                    if k == fldDesc:
                        if attr != 2.5:
                          
                            layer.dataProvider().deleteFeatures([ id ])
                            layer.commitChanges()
                          
but it seems doesn't work.
Any suggestion?

Thanks

Francesco



From giohappy at gmail.com  Sun Jan 13 08:52:55 2013
From: giohappy at gmail.com (G. Allegri)
Date: Sun, 13 Jan 2013 17:52:55 +0100
Subject: [Qgis-developer] Exporting a raster layer
In-Reply-To: <CAJsc-7ypwWV3mqPD-h9vFnpAZAVVJGHMZ3qcNq5BNyL_4KOanQ@mail.gmail.com>
References: <CAJsc-7ypwWV3mqPD-h9vFnpAZAVVJGHMZ3qcNq5BNyL_4KOanQ@mail.gmail.com>
Message-ID: <CAB4g1=z7UM6XUx3gM_GipUf-hUQsEj_7va3oN8QU9yN9so1oEQ@mail.gmail.com>

In Qgis master I think you could use QsgRasterFileWriter [1], for the
raster providers which support writing,e.g. GDAL.
AFAIK in Qgis 1.8 there's no mechanism to do that.

giovanni

[1] http://www.qgis.org/api/classQgsRasterFileWriter.html

Sent from Nexus
Il giorno 13/gen/2013 17:10, "Victor Olaya" <volayaf at gmail.com> ha scritto:

> Hi all
>
> I have just implemented a new mechanism in SEXTANTE to make handling
> of file formats more clear and easy. Now, no matter what provider is
> creating a vector layer, all formats supported by QGIS can be
> selected, without requiring anything special added to the algorithm
> provider. SEXTANTE takes care of converting if needed.
>
> I want to implement the same thing for raster layers, but I do not
> know how to export a raster layer into a given format (except by
> calling GDAL translate), and I need it for that.. Can any one give me
> an idea or point me to some code to do that?
>
> Thanks in advance!
>
> Victor
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130113/2c936bb9/attachment.html>

From francescoboccacci at libero.it  Sun Jan 13 09:03:48 2013
From: francescoboccacci at libero.it (francescoboccacci at libero.it)
Date: Sun, 13 Jan 2013 18:03:48 +0100 (CET)
Subject: [Qgis-developer] I: Re:  Commit delete features
Message-ID: <31486499.909791358096628558.JavaMail.defaultUser@defaultHost>







----Messaggio originale----

Da: francescoboccacci at libero.it

Data: 13/01/2013 18.03

A: <giohappy at gmail.com>

Ogg: R: Re: [Qgis-developer] Commit delete features



Hi Giovanni,this is my piece of code:
provider = layer.dataProvider()

              feat = QgsFeature()
              allAttrs = provider.attributeIndexes()
              provider.select(allAttrs)
              caps = layer.dataProvider().capabilities()
              fldDesc = provider.fieldNameIndex("values")
              layer.startEditing()
              
              while provider.nextFeature( feat ):
                
                id = feat.id()
        
                attrs = feat.attributeMap()
                for (k,attr) in attrs.iteritems():
                    if k == fldDesc:
                        if attr != 2.5:
         
                            layer.dataProvider().deleteFeatures([ id ])
                            layer.commitChanges()
                            
                         
                        
                layer.endEditCommand()     
but it doesn't work. Any suggestions?
Thanks
Francesco




----Messaggio originale----

Da: giohappy at gmail.com

Data: 13/01/2013 17.54

A: <francescoboccacci at libero.it>

Ogg: Re: [Qgis-developer] Commit delete features



Have you called layer.startEditing()? 
giovanni
Sent from Nexus
Il giorno 13/gen/2013 17:51, "francescoboccacci at libero.it" <francescoboccacci at libero.it> ha scritto:
Hi all,

i would like to delete the features in a shapefiles that haven't a specific

field value. See below:



              provider = layer.dataProvider()



              feat = QgsFeature()

              allAttrs = provider.attributeIndexes()

              provider.select(allAttrs)

              caps = layer.dataProvider().capabilities()

              fldDesc = provider.fieldNameIndex("values") #values is field

name

              while provider.nextFeature( feat ):

                id = feat.id()

                attrs = feat.attributeMap()

                for (k,attr) in attrs.iteritems():

                    if k == fldDesc:

                        if attr != 2.5:



                            layer.dataProvider().deleteFeatures([ id ])

                            layer.commitChanges()



but it seems doesn't work.

Any suggestion?



Thanks



Francesco





_______________________________________________

Qgis-developer mailing list

Qgis-developer at lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/qgis-developer






 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130113/bd5299ab/attachment.html>

From francescoboccacci at libero.it  Sun Jan 13 09:27:30 2013
From: francescoboccacci at libero.it (francescoboccacci at libero.it)
Date: Sun, 13 Jan 2013 18:27:30 +0100 (CET)
Subject: [Qgis-developer] R:  I: Re:  Commit delete features
Message-ID: <3698176.915591358098050637.JavaMail.defaultUser@defaultHost>

Hi all,solved. This is the right code:
              provider = layer.dataProvider()
              feat = QgsFeature()
              allAttrs = provider.attributeIndexes()
              provider.select(allAttrs)
              caps = layer.dataProvider().capabilities()
              fldDesc = provider.fieldNameIndex("values")
              layer.startEditing()
              arrayid=[]
              while provider.nextFeature( feat ):
                
                id = feat.id()
        
                attrs = feat.attributeMap()
                for (k,attr) in attrs.iteritems():
                    if k == fldDesc:
                        if attr != 2.5:
                            arrayid.append(id)
                            
              layer.dataProvider().deleteFeatures(arrayid)       
              layer.commitChanges()              
thanks.l
Francesco



----Messaggio originale----

Da: francescoboccacci at libero.it

Data: 13/01/2013 18.03

A: <qgis-developer at lists.osgeo.org>

Ogg: [Qgis-developer] I: Re:  Commit delete features









----Messaggio originale----

Da: francescoboccacci at libero.it

Data: 13/01/2013 18.03

A: <giohappy at gmail.com>

Ogg: R: Re: [Qgis-developer] Commit delete features



Hi Giovanni,this is my piece of code:
provider = layer.dataProvider()

              feat = QgsFeature()
              allAttrs = provider.attributeIndexes()
              provider.select(allAttrs)
              caps = layer.dataProvider().capabilities()
              fldDesc = provider.fieldNameIndex("values")
              layer.startEditing()
              
              while provider.nextFeature( feat ):
                
                id = feat.id()
        
                attrs = feat.attributeMap()
                for (k,attr) in attrs.iteritems():
                    if k == fldDesc:
                        if attr != 2.5:
         
                            layer.dataProvider().deleteFeatures([ id ])
                            layer.commitChanges()
                            
                         
                        
                layer.endEditCommand()     
but it doesn't work. Any suggestions?
Thanks
Francesco




----Messaggio originale----

Da: giohappy at gmail.com

Data: 13/01/2013 17.54

A: <francescoboccacci at libero.it>

Ogg: Re: [Qgis-developer] Commit delete features



Have you called layer.startEditing()? 
giovanni
Sent from Nexus
Il giorno 13/gen/2013 17:51, "francescoboccacci at libero.it" <francescoboccacci at libero.it> ha scritto:
Hi all,

i would like to delete the features in a shapefiles that haven't a specific

field value. See below:



              provider = layer.dataProvider()



              feat = QgsFeature()

              allAttrs = provider.attributeIndexes()

              provider.select(allAttrs)

              caps = layer.dataProvider().capabilities()

              fldDesc = provider.fieldNameIndex("values") #values is field

name

              while provider.nextFeature( feat ):

                id = feat.id()

                attrs = feat.attributeMap()

                for (k,attr) in attrs.iteritems():

                    if k == fldDesc:

                        if attr != 2.5:



                            layer.dataProvider().deleteFeatures([ id ])

                            layer.commitChanges()



but it seems doesn't work.

Any suggestion?



Thanks



Francesco





_______________________________________________

Qgis-developer mailing list

Qgis-developer at lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/qgis-developer






 







-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130113/2cbd1378/attachment-0001.html>

From larrys at dakotacarto.com  Sun Jan 13 10:52:53 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Sun, 13 Jan 2013 11:52:53 -0700
Subject: [Qgis-developer] Mac OS X 10.6, master version,
 sextante problem and solution (Python 2.6.x)
Message-ID: <CA+nQOR9wP6opQPj24HSmqGRQdOHjy_guN0kZK8J7P5iv6zdH_w@mail.gmail.com>

Hi Gene,

On Sun, Jan 13, 2013 at 1:09 AM, gene <martin.laloux at gmail.com> wrote:

> I had a problem with the sextante module in the last master version of
> http://qgis.dakotacarto.com/ <http://qgis.dakotacarto.com/>  .  The Python
> module *importlib* is not present in a version of Python prior to 2.7
>
> The solution ?
> Install   importlib <http://pypi.python.org/pypi/importlib/>  , which is a
> backport of the importlib.import_module() from Python 2.7
>

Thanks for looking into this. I checked out the backported module and it is
quite simple. I should be able to add it to the bundled QGIS master version
for Snow Leopard (via the nightly build script, after the app is built, not
as part of the CMake build setup).

I should have time to do that on Monday morning. Once part of the bundled
app, I'll test it locally, but would appreciate if you can test it as well.
I'll post to the list again when it is ready.

That module could (should?) be added directly to the SEXTANTE plugin, since
it is Python 2.6 related, and not specific to Mac OS X 10.6. Could you
draft an issue on the tracker for its inclusion in SEXTANTE? (I have
directly Cc'd victor and alex on this as well.)

Regards,

Larry


> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Mac-OS-X-10-6-master-version-sextante-problem-and-solution-Python-2-6-x-tp5027133.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130113/bd250f0f/attachment.html>

From larrys at dakotacarto.com  Sun Jan 13 13:47:02 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Sun, 13 Jan 2013 14:47:02 -0700
Subject: [Qgis-developer] Better options dialogs
Message-ID: <CA+nQOR8NTLpcYcppS=i=8HJiM946ESH8Yhqz6QLExaAiebdN-A@mail.gmail.com>

Hi,

On Sun, Jan 6, 2013 at 3:44 AM, Larry Shaffer <larrys at dakotacarto.com>wrote:

> Hi,
>
> Sorry for top-posting. I switched the main Options dialog over to
> vertical tabs. Couple of features:
>
> * Long labels should wrap, but may not look great at 3 lines. Seems to
> be a bit of an issue when using a custom font, where the wrapping
> doesn't work quite the same as with the Qt default font.
>
> * The splitter state is saved, so once a user gets the tabs the way
> they like, it should stay like that
>
> * There is an icon-only mode when the splitter is moved all the way to
> the left. The vertical scrollbar is then always shown, hiding the
> beginning of the tab's text. Please let me know if it doesn't end up
> looking like [0] on your platform.
>
> Note: I did not clean up the settings yet, just added the vertical tabs.
>

So it's been about a week, does anyone have issues/comments/suggestions
with how the new vertical tabs are working in the Options dialog? If not,
I'll go forward with changing the following to vertical tabs as well:

* Project options
* Vector and Raster layer properties

Note: icon-only mode should now only show the vertical scrollbar when
needed, auto-resizing the splitter to accommodate it.

Regards,

Larry



> Currently, the dialog is a little slow to open. This is due (I
> believe) to the custom font combobox population, and the new
> QProcess::systemEnvironment() call to populate the current environment
> variables table. I'll work on fixing those.
>
> [0] http://drive.dakotacarto.com/qgis/options-dialog_icon-only.png
>
> Regards,
>
> Larry
>
>
>
> On Fri, Jan 4, 2013 at 10:47 AM, Larry Shaffer <larrys at dakotacarto.com>
> wrote:
> > Hi Matthias and Nathan,
> >
> > I was just about to bring this topic back up myself. :^) Yes, I can
> > work on this next (probably this weekend). I'll start with the main
> > app options dialog, cause it's the simplest.
> >
> > Option dialog candidates to switch to vertical tabs (for
> > useability/consistency):
> > * App options
> > * Project options
> > * Vector and Raster layer properties
> >
> >
> > Matthias, do you think the new diagram options setup can be moved to
> > horizontal tabs, instead of a toolbox, once there are vertical tabs
> > for the vector dialog?
> >
> >
> > Nathan,
> >> ...  If you need some help I can lend a hand.
> >
> > Remember that little custom toolbutton widget we chatted about for
> > data defined option overrides? (to the right of labeling options in
> > redesign [0]) I think you mentioned some kind of abstracted data
> > binding class that widgets like that could use or inherit. Such a
> > class, that worked with the new vector API, would be very handy and
> > greatly help with the labeling dialog redesign (and elsewhere). Do you
> > have some time to work on that?
> >
> > See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at
> (14:44:28)
> >
> > [0] http://drive.dakotacarto.com/qgis/labeling-redesign.png
> >
> > Regards,
> >
> > Larry
> >
> >
> > On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com>
> wrote:
> >> Larry,
> >>
> >> If you do have time for this I too would really like to see this added.
> The
> >> tabs situation is becoming a mess and is only going to get worse as we
> move
> >> forward.  If you need some help I can lend a hand.
> >>
> >> - Nathan
> >>
> >>
> >> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch>
> wrote:
> >>>
> >>> Hi Larry,
> >>>
> >>> What is the status of the vertical tabs? Do you still have a branch
> with
> >>> them ready?
> >>>
> >>> I noticed, that the new labelling dialog in the vector layer settings
> has
> >>> two columns of tabs, which look a bit uncommon, and I'd see vertical
> tabs as
> >>> a good replacement for either the first or the second level of tabs in
> this
> >>> dialog.
> >>>
> >>> Cheers,
> >>>
> >>> Matthias
> >>>
> >>>
> >>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
> >>>>
> >>>> Hi,
> >>>>
> >>>> I've been working on reducing overall clutter and excess space, and
> >>>> trying to increase efficiency and extensibility, with options dialogs.
> >>>>
> >>>> Problems with current option dialogs' parent QTabWidget approach:
> >>>>
> >>>> * Tab widget uses unnecessary vertical space (bad for small screens).
> >>>> * Tab widget limits the use of reasonably needed tabs for option
> >>>> sections (avoiding tabs-within-tabs unfortunately trumps useability).
> >>>> * Horizontal parent tabs limit how many option sections can be offered
> >>>> (already too wide, without text truncation, on Mac).
> >>>> * Horizontal parent tabs dictate the width of the dialog, causing form
> >>>> layout elements to optically stretch too far apart.
> >>>>
> >>>>
> >>>> Possible solution: Move 'tabs' to simple list widget on left side of a
> >>>> splitter and have option sections loaded on right.
> >>>>
> >>>> I have done mockups for the app and vector layer options [0], which
> >>>> show the following advantages:
> >>>>
> >>>> * Vertical height is maximized without sacrificing layout of option
> >>>> section form elements (good for smaller screens).
> >>>> * Number of option sections is not graphically limited.
> >>>> * Number of option sections no longer dictates width of option section
> >>>> forms (forms look much better).
> >>>> * List item widget can have its splitter section collapsed to a set
> >>>> size to show only icons for sections.
> >>>> * Consistent look across platforms, with larger icons for sections.
> >>>> * More current 'look' for v 2.0 without too much work.
> >>>>
> >>>> Other than making the dialogs clearer and less cluttered IMHO, the
> >>>> full useability of the dialogs at smaller sizes helps the user see
> >>>> more map canvas when testing options with Apply.
> >>>>
> >>>> Any comments or suggestions?
> >>>>
> >>>> [0]
> >>>>
> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
> >>>>
> >>>> Regards,
> >>>>
> >>>> Larry
> >>>> _______________________________________________
> >>>> Qgis-developer mailing list
> >>>> Qgis-developer at lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>>
> >>>
> >>> _______________________________________________
> >>> Qgis-developer mailing list
> >>> Qgis-developer at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
> >>
> >>
> >> _______________________________________________
> >> Qgis-developer mailing list
> >> Qgis-developer at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130113/bbc94b68/attachment.html>

From volayaf at gmail.com  Sun Jan 13 14:01:56 2013
From: volayaf at gmail.com (Victor Olaya)
Date: Sun, 13 Jan 2013 23:01:56 +0100
Subject: [Qgis-developer] Mac OS X 10.6, master version,
 sextante problem and solution (Python 2.6.x)
In-Reply-To: <CA+nQOR9wP6opQPj24HSmqGRQdOHjy_guN0kZK8J7P5iv6zdH_w@mail.gmail.com>
References: <CA+nQOR9wP6opQPj24HSmqGRQdOHjy_guN0kZK8J7P5iv6zdH_w@mail.gmail.com>
Message-ID: <CAJsc-7z+Wq3Eu2biAbKw5SNwTk-=54_c9KZU4rw7eVUeLOosPg@mail.gmail.com>

That sounds like OK to me, but I do not know the policy for adding new
libraries in QGIS, since I haven't added any new one (SEXTANTE just
uses the ones already included in QGIS). Alex might know more about
it. Anyway, if it can be included, I would prefer it, since that would
make it easier for all users to have a functional SEXTANTE without
problems

Regards



2013/1/13 Larry Shaffer <larrys at dakotacarto.com>:
> Hi Gene,
>
> On Sun, Jan 13, 2013 at 1:09 AM, gene <martin.laloux at gmail.com> wrote:
>>
>> I had a problem with the sextante module in the last master version of
>> http://qgis.dakotacarto.com/ <http://qgis.dakotacarto.com/>  .  The Python
>> module *importlib* is not present in a version of Python prior to 2.7
>>
>> The solution ?
>> Install   importlib <http://pypi.python.org/pypi/importlib/>  , which is a
>> backport of the importlib.import_module() from Python 2.7
>
>
> Thanks for looking into this. I checked out the backported module and it is
> quite simple. I should be able to add it to the bundled QGIS master version
> for Snow Leopard (via the nightly build script, after the app is built, not
> as part of the CMake build setup).
>
> I should have time to do that on Monday morning. Once part of the bundled
> app, I'll test it locally, but would appreciate if you can test it as well.
> I'll post to the list again when it is ready.
>
> That module could (should?) be added directly to the SEXTANTE plugin, since
> it is Python 2.6 related, and not specific to Mac OS X 10.6. Could you draft
> an issue on the tracker for its inclusion in SEXTANTE? (I have directly Cc'd
> victor and alex on this as well.)
>
> Regards,
>
> Larry
>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.n6.nabble.com/Mac-OS-X-10-6-master-version-sextante-problem-and-solution-Python-2-6-x-tp5027133.html
>> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

From bernhard.stroebl at jena.de  Sun Jan 13 23:14:51 2013
From: bernhard.stroebl at jena.de (=?ISO-8859-1?Q?Bernhard_Str=F6bl?=)
Date: Mon, 14 Jan 2013 08:14:51 +0100
Subject: [Qgis-developer] Attribute Editor: Dual View
In-Reply-To: <50F13883.1010202@gmx.ch>
References: <50ED2DEA.8060907@gmx.ch>
	<CAAi8Yg8kdmZWZO4PQWiy8DHQgoiZAvQ97JY8AbYYLTjJypsuJg@mail.gmail.com>
	<50ED7998.5080301@jena.de> <50ED8FA7.2020503@gmx.ch>
	<50EE6226.1090401@jena.de> <50EEB1AB.5020409@gmx.ch>
	<50EEBD00.8000201@jena.de> <50EEDA60.5090800@gmx.ch>
	<50EEE3C4.1020106@jena.de> <50EEE655.90109@gmx.ch>
	<50EEEB07.7050808@jena.de> <50F13883.1010202@gmx.ch>
Message-ID: <50F3B06B.1010209@jena.de>

Matthias

I will be glad to take part in the discussion.

regards

Bernhard

Am 12.01.2013 11:18, schrieb Matthias Kuhn:
> On 01/10/2013 05:23 PM, Bernhard Str?bl wrote:
>>
>>
>> Am 10.01.2013 17:03, schrieb Matthias Kuhn:
>>> On 01/10/2013 04:52 PM, Bernhard Str?bl wrote:
>>>>
>>>>
>>>> Am 10.01.2013 16:12, schrieb Matthias Kuhn:
>>>>
>>>> -- 8< snip --
>>>>>>
>>>>>> "E.g. If you want to manually select features out of different
>>>>>> subsets.
>>>>>> Let's say you have a layer with a lot of features and you're looking
>>>>>> for
>>>>>> a couple of cities (but not all of them) which have more than 100'000
>>>>>> inhabitants"
>>>>>>
>>>>>> in extended selection enter: num_inhabitants > 100000
>>>>>> click: "new selection"
>>>>>> result (example): 150 datasets selected
>>>>>>
>>>>>> "and some others which do not meet this criterion, but some
>>>>>> other criteria."
>>>>>>
>>>>>> in extended selection enter: some_other_field = some_other_ctriteria
>>>>>> click: "add to selection"
>>>>>> result (example): 270 datasets selected (150 from before + 120
>>>>>> matching "some_other_criteria")
>>>>>>
>>>>>> after that you can manually remove all datasets that you do not need
>>>>>> from the selection but I doubt this is a real use case, because how
>>>>>> would you decide which to keep and which to remove? Obviously because
>>>>>> some attributes match certain criteria, so here we go: e.g. user
>>>>>> wants
>>>>>> to see only the cities with an airport
>>>>>>
>>>>>> in extended selection enter: airport = false
>>>>>> click: "remove from selection"
>>>>>> result (example): 205 datasets selected (from the previosuly selected
>>>>>> 65 do not have an airport and are therefore removed from the
>>>>>> selection)
>>>>>>
>>>>>> now have a look at the map and see where these cities are, in this
>>>>>> case manual removal seems imaginable, so lets remove 7 from the
>>>>>> selection; result: 198 datasets selected (205 - 7) in both table and
>>>>>> map!
>>>>>>
>>>>>> now the user can do anything with this selection (update certain
>>>>>> fields, export to new dataset, use for a spatial query...)
>>>>>>
>>>>>> I am of course totally aware that the 205 datasets can be achieved by
>>>>>> using only one query like "(num_inhabitants > 100000 OR
>>>>>> some_other_field = some_other_ctriteria) AND airport = true" but the
>>>>>> whole thing starts getting interesting when we imagine a spatial
>>>>>> query
>>>>>> in the start e.g. "select all cities within 20 km from the sea" then
>>>>>> we could got to the attribute table enter "(num_inhabitants <= 100000
>>>>>> OR some_other_field != some_other_ctriteria) AND airport = false" and
>>>>>> click "remove from selection" to get a result containing all cities
>>>>>> with either more than 100000 inhabitants or some_other_ctriteria and
>>>>>> an airport and within 20 km of the sea
>>>>>>
>>>>>> the "show only selected" checkbox should of course work as one would
>>>>>> expect it to i.e. whenever the selection changes, no matter if this
>>>>>> change originates from a user's click in the table or map or from
>>>>>> using one of the selection buttons the dataset shown contains _all_
>>>>>> currently selected datasets and _only_ them
>>>>>>
>>>>>> I cannot imagine any use case that can not be tackled with what I
>>>>>> propose but I have a feeling that the filter/selection concept would
>>>>>> really confuse users
>>>>>>
>>>>> Ok, I think I got your idea.
>>>>>
>>>>> Of course it is possible to generate a useful selection now already by
>>>>> using an appropriate expression. This works as long as your
>>>>> requirements
>>>>> are well defined (as in num_inhabitants > 100000 AND airport = true
>>>>> etc.). Unfortunately that's not always the case as in this OSM data
>>>>> I've
>>>>> had a look at recently, where the number of stories was supposed to be
>>>>> in a field but sometimes something like "4-8", ">9" etc. was in there,
>>>>> requiring special attention.
>>>>>
>>>>> And there is the other use-case I mentioned in my last mail (and
>>>>> that's
>>>>> probably the main reason): The attribute editor view (the one with the
>>>>> list on the left and the attribute editor on the right) will greatly
>>>>> benefit from the filter/selection paradigm.
>>>>> In the example before (number of stories), you can apply a filter, to
>>>>> only show the buildings not containing a clean number (i.e. requiring
>>>>> inspection) and manually adjust the numbers to be in a consistent
>>>>> format
>>>>> you can use. In this case you will need the selection to change
>>>>> (because
>>>>> you change it, whenever you change the currently edited feature(s))
>>>>> but
>>>>> you don't want your filter to change before you finished inspecting
>>>>> all
>>>>> the suspicious features.
>>>>
>>>> bare with me I do not get your point here. Why would I change the
>>>> selection when I change a feature's value? We do not even have a
>>>> selection, do we? All we have is a filter. ...ahh wait a bit... the
>>>> filter is applied once and stays even if data are changed so they do
>>>> not match the filter anymore - but that is the current behaviour with
>>>> a selection, isn't it?
>>>> How if we had a selection and tick "show selected only" and switch to
>>>> the attribute view where we fix one dataset after another - would that
>>>> be any different from using the filter?
>>>> I really do like the dual view idea but do not understand why it is
>>>> linked to the filter.
>>>>
>>> The filter should always represent the current status of the data, even
>>> when it changes.
>>> The selection needs to be changed, because it defines which feature is
>>> currently visible in the attribute editor (right side of the editor
>>> view). And if you want to edit 5 different features one after the other,
>>> you change the selection 5 times.
>>
>> ok, I see, but that would be a different behaviour from what we have
>> now when clicking with the "i" or right clicking in the table. Both
>> leave the selection unchanged. Imagine selecting some features e.g. in
>> the map then pressing "selection to filter" changing to the attribute
>> view, investigating some features and when going back to the map/table
>> view your selection is gone. Maybe there is another solution to this
>> then changing the selection? In that case you would not need the
>> filter anymore here :-)
>
> You're correct. It wasn't our idea to implement it this way and thinking
> about it again it's really not a good idea. Sorry for the confusion.
> I had this idea because for multi-edit selecting features first and then
> changing attributes would be really handy, but that's not part of the
> current work actually. So although not necessary now, this idea may
> become interesting again later on (I hope to get some experience with
> all these possibilities before then).
>
> For now the idea is to have separate buttons in the feature list to
> choose the feature to edit :)
>
>>
>> Once you changed a certain feature, it
>>> may disappear from the filter. The others stay visible. For the example
>>> above this means: edit the data until all suspicious features
>>> disappeared and you've got a clean dataset.
>>
>> so the filter continuously refreshes according to any data changes.
>> This would be an appropriate behaviour for a filter, not for a
>> selection, though. Still I would prefer basing all table work on the
>> selection. Think about using the calculator updating selected features
>> and a filter prevents me from seeing my selection. This could damage
>> people's data.
>>
> This can be taken care of with a warning (Like: The current selection
> contains 3 items which are not shown due to filter restrictions).
>
> Maybe there is still the need for a "link filter to selection" option,
> in case there is strong interest in keeping a possibility for the
> current way. I think that should be discussed, once a first
> implementation is available.
>
> Regards
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From lists at linfiniti.com  Sun Jan 13 23:31:17 2013
From: lists at linfiniti.com (Tim Sutton)
Date: Mon, 14 Jan 2013 09:31:17 +0200
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+nQOR8NTLpcYcppS=i=8HJiM946ESH8Yhqz6QLExaAiebdN-A@mail.gmail.com>
References: <CA+nQOR8NTLpcYcppS=i=8HJiM946ESH8Yhqz6QLExaAiebdN-A@mail.gmail.com>
Message-ID: <CALCNqkbqQd2cSRH9TSWtW-W3ookFVa4+6bMOx2Y-Kk=XRFy4Zg@mail.gmail.com>

Hi

On Sun, Jan 13, 2013 at 11:47 PM, Larry Shaffer <larrys at dakotacarto.com> wrote:
> Hi,
>
> On Sun, Jan 6, 2013 at 3:44 AM, Larry Shaffer <larrys at dakotacarto.com>
> wrote:
>>
>> Hi,
>>
>> Sorry for top-posting. I switched the main Options dialog over to
>> vertical tabs. Couple of features:
>>
>> * Long labels should wrap, but may not look great at 3 lines. Seems to
>> be a bit of an issue when using a custom font, where the wrapping
>> doesn't work quite the same as with the Qt default font.
>>
>> * The splitter state is saved, so once a user gets the tabs the way
>> they like, it should stay like that
>>
>> * There is an icon-only mode when the splitter is moved all the way to
>> the left. The vertical scrollbar is then always shown, hiding the
>> beginning of the tab's text. Please let me know if it doesn't end up
>> looking like [0] on your platform.
>>
>> Note: I did not clean up the settings yet, just added the vertical tabs.
>
>
> So it's been about a week, does anyone have issues/comments/suggestions with
> how the new vertical tabs are working in the Options dialog? If not, I'll go
> forward with changing the following to vertical tabs as well:


I like the changes - it would be nice to be a little less generous
with the horizontal space given to the left panel (on my ubuntu system
there is quite a lot of 'dead' white space between the item labels and
the splitter bar).

I was toying wiht app font size - if we set it to 9pt by default, the
settings panels all work a lot better for me under gnome shell 3.6.

>
>
> * Project options
> * Vector and Raster layer properties
>

+1 from me!

Regards

Tim

> Note: icon-only mode should now only show the vertical scrollbar when
> needed, auto-resizing the splitter to accommodate it.
>
> Regards,
>
> Larry
>
>
>>
>> Currently, the dialog is a little slow to open. This is due (I
>> believe) to the custom font combobox population, and the new
>> QProcess::systemEnvironment() call to populate the current environment
>> variables table. I'll work on fixing those.
>>
>> [0] http://drive.dakotacarto.com/qgis/options-dialog_icon-only.png
>>
>> Regards,
>>
>> Larry
>>
>>
>>
>> On Fri, Jan 4, 2013 at 10:47 AM, Larry Shaffer <larrys at dakotacarto.com>
>> wrote:
>> > Hi Matthias and Nathan,
>> >
>> > I was just about to bring this topic back up myself. :^) Yes, I can
>> > work on this next (probably this weekend). I'll start with the main
>> > app options dialog, cause it's the simplest.
>> >
>> > Option dialog candidates to switch to vertical tabs (for
>> > useability/consistency):
>> > * App options
>> > * Project options
>> > * Vector and Raster layer properties
>> >
>> >
>> > Matthias, do you think the new diagram options setup can be moved to
>> > horizontal tabs, instead of a toolbox, once there are vertical tabs
>> > for the vector dialog?
>> >
>> >
>> > Nathan,
>> >> ...  If you need some help I can lend a hand.
>> >
>> > Remember that little custom toolbutton widget we chatted about for
>> > data defined option overrides? (to the right of labeling options in
>> > redesign [0]) I think you mentioned some kind of abstracted data
>> > binding class that widgets like that could use or inherit. Such a
>> > class, that worked with the new vector API, would be very handy and
>> > greatly help with the labeling dialog redesign (and elsewhere). Do you
>> > have some time to work on that?
>> >
>> > See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at
>> > (14:44:28)
>> >
>> > [0] http://drive.dakotacarto.com/qgis/labeling-redesign.png
>> >
>> > Regards,
>> >
>> > Larry
>> >
>> >
>> > On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com>
>> > wrote:
>> >> Larry,
>> >>
>> >> If you do have time for this I too would really like to see this added.
>> >> The
>> >> tabs situation is becoming a mess and is only going to get worse as we
>> >> move
>> >> forward.  If you need some help I can lend a hand.
>> >>
>> >> - Nathan
>> >>
>> >>
>> >> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch>
>> >> wrote:
>> >>>
>> >>> Hi Larry,
>> >>>
>> >>> What is the status of the vertical tabs? Do you still have a branch
>> >>> with
>> >>> them ready?
>> >>>
>> >>> I noticed, that the new labelling dialog in the vector layer settings
>> >>> has
>> >>> two columns of tabs, which look a bit uncommon, and I'd see vertical
>> >>> tabs as
>> >>> a good replacement for either the first or the second level of tabs in
>> >>> this
>> >>> dialog.
>> >>>
>> >>> Cheers,
>> >>>
>> >>> Matthias
>> >>>
>> >>>
>> >>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
>> >>>>
>> >>>> Hi,
>> >>>>
>> >>>> I've been working on reducing overall clutter and excess space, and
>> >>>> trying to increase efficiency and extensibility, with options
>> >>>> dialogs.
>> >>>>
>> >>>> Problems with current option dialogs' parent QTabWidget approach:
>> >>>>
>> >>>> * Tab widget uses unnecessary vertical space (bad for small screens).
>> >>>> * Tab widget limits the use of reasonably needed tabs for option
>> >>>> sections (avoiding tabs-within-tabs unfortunately trumps useability).
>> >>>> * Horizontal parent tabs limit how many option sections can be
>> >>>> offered
>> >>>> (already too wide, without text truncation, on Mac).
>> >>>> * Horizontal parent tabs dictate the width of the dialog, causing
>> >>>> form
>> >>>> layout elements to optically stretch too far apart.
>> >>>>
>> >>>>
>> >>>> Possible solution: Move 'tabs' to simple list widget on left side of
>> >>>> a
>> >>>> splitter and have option sections loaded on right.
>> >>>>
>> >>>> I have done mockups for the app and vector layer options [0], which
>> >>>> show the following advantages:
>> >>>>
>> >>>> * Vertical height is maximized without sacrificing layout of option
>> >>>> section form elements (good for smaller screens).
>> >>>> * Number of option sections is not graphically limited.
>> >>>> * Number of option sections no longer dictates width of option
>> >>>> section
>> >>>> forms (forms look much better).
>> >>>> * List item widget can have its splitter section collapsed to a set
>> >>>> size to show only icons for sections.
>> >>>> * Consistent look across platforms, with larger icons for sections.
>> >>>> * More current 'look' for v 2.0 without too much work.
>> >>>>
>> >>>> Other than making the dialogs clearer and less cluttered IMHO, the
>> >>>> full useability of the dialogs at smaller sizes helps the user see
>> >>>> more map canvas when testing options with Apply.
>> >>>>
>> >>>> Any comments or suggestions?
>> >>>>
>> >>>> [0]
>> >>>>
>> >>>> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
>> >>>>
>> >>>> Regards,
>> >>>>
>> >>>> Larry
>> >>>> _______________________________________________
>> >>>> Qgis-developer mailing list
>> >>>> Qgis-developer at lists.osgeo.org
>> >>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>>
>> >>>
>> >>> _______________________________________________
>> >>> Qgis-developer mailing list
>> >>> Qgis-developer at lists.osgeo.org
>> >>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>
>> >>
>> >>
>> >> _______________________________________________
>> >> Qgis-developer mailing list
>> >> Qgis-developer at lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>



--
Tim Sutton - QGIS Project Steering Committee Member (Release  Manager)
==============================================
Please do not email me off-list with technical
support questions. Using the lists will gain
more exposure for your issues and the knowledge
surrounding your issue will be shared with all.

Visit http://linfiniti.com to find out about:
 * QGIS programming and support services
 * Mapserver and PostGIS based hosting plans
 * FOSS Consulting Services
Skype: timlinux
Irc: timlinux on #qgis at freenode.net
==============================================

From larrys at dakotacarto.com  Mon Jan 14 02:32:39 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Mon, 14 Jan 2013 03:32:39 -0700
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CALCNqkbqQd2cSRH9TSWtW-W3ookFVa4+6bMOx2Y-Kk=XRFy4Zg@mail.gmail.com>
References: <CA+nQOR8NTLpcYcppS=i=8HJiM946ESH8Yhqz6QLExaAiebdN-A@mail.gmail.com>
	<CALCNqkbqQd2cSRH9TSWtW-W3ookFVa4+6bMOx2Y-Kk=XRFy4Zg@mail.gmail.com>
Message-ID: <CA+nQOR8g0LVdEaG4aBHbjCbEatVyzsdQQw9j9V0TGB_2s56_AQ@mail.gmail.com>

Hi Tim,

On Mon, Jan 14, 2013 at 12:31 AM, Tim Sutton <lists at linfiniti.com> wrote:

> Hi
>
> On Sun, Jan 13, 2013 at 11:47 PM, Larry Shaffer <larrys at dakotacarto.com>
> wrote:
> > Hi,
> --- 8<--- snip
> >
> > So it's been about a week, does anyone have issues/comments/suggestions
> with
> > how the new vertical tabs are working in the Options dialog? If not,
> I'll go
> > forward with changing the following to vertical tabs as well:
>
>
> I like the changes - it would be nice to be a little less generous
> with the horizontal space given to the left panel (on my ubuntu system
> there is quite a lot of 'dead' white space between the item labels and
> the splitter bar).
>

I have fixed that with a workaround. It's actually a funky problem that
starts with QtDesigner. If you open up qgsoptionsbase.ui (current one), you
will see the same excessive width on the left pane. However, there is no
way to resize or define splitter widths in QtDesigner in the layout
workspace. What defines the splitter widths is the 'default' width of
items, though there is no way to set those without setting some static
width (like 150 max for the left pane's list widget), then close/reopen the
.ui file.

I have left the list widget at 150 so there is room to design in
QtDesigner; and, that becomes the default width for the Options dialog when
the splitter state has not yet been saved. Once splitter state is saved, it
is ignored.

I was toying wiht app font size - if we set it to 9pt by default, the
> settings panels all work a lot better for me under gnome shell 3.6.
>

Hmmm. Not so legible on Mac. :^)  Be good to establish reason baseline
sizes for most platforms and default the app's stylesheet to those.
http://drive.dakotacarto.com/qgis/new-options_font-9px.png

On a related note, today I reorganized the Options dialog:
https://github.com/dakcarto/Quantum-GIS/tree/options_re-org_1

Slideshow of screen snaps (little taller dialog height, to show layouts in
scroll areas):
https://www.dropbox.com/sh/l08y5xyxm20q5ev/aOLAIuoSVV

Appreciate feedback on the choices, and any suggestions. This is the only
options dialog that I think really needs some reorganizing kindness before
2.0. Once there is an advanced settings editor, it could reside on a last
page of the dialog, or maybe be a separate menu item under the Settings
menu.

I'm not sure that the property editor format is good for general/new users.
I think general users need clean, graphically clear and grouped options
(which is what I have tried to do in that feature branch). Definitely handy
for power users and devs, though.

Regards,

Larry



> >
> >
> > * Project options
> > * Vector and Raster layer properties
> >
>
> +1 from me!
>
> Regards
>
> Tim
>
> > Note: icon-only mode should now only show the vertical scrollbar when
> > needed, auto-resizing the splitter to accommodate it.
> >
> > Regards,
> >
> > Larry
> >
> >
> >>
> >> Currently, the dialog is a little slow to open. This is due (I
> >> believe) to the custom font combobox population, and the new
> >> QProcess::systemEnvironment() call to populate the current environment
> >> variables table. I'll work on fixing those.
> >>
> >> [0] http://drive.dakotacarto.com/qgis/options-dialog_icon-only.png
> >>
> >> Regards,
> >>
> >> Larry
> >>
> >>
> >>
> >> On Fri, Jan 4, 2013 at 10:47 AM, Larry Shaffer <larrys at dakotacarto.com>
> >> wrote:
> >> > Hi Matthias and Nathan,
> >> >
> >> > I was just about to bring this topic back up myself. :^) Yes, I can
> >> > work on this next (probably this weekend). I'll start with the main
> >> > app options dialog, cause it's the simplest.
> >> >
> >> > Option dialog candidates to switch to vertical tabs (for
> >> > useability/consistency):
> >> > * App options
> >> > * Project options
> >> > * Vector and Raster layer properties
> >> >
> >> >
> >> > Matthias, do you think the new diagram options setup can be moved to
> >> > horizontal tabs, instead of a toolbox, once there are vertical tabs
> >> > for the vector dialog?
> >> >
> >> >
> >> > Nathan,
> >> >> ...  If you need some help I can lend a hand.
> >> >
> >> > Remember that little custom toolbutton widget we chatted about for
> >> > data defined option overrides? (to the right of labeling options in
> >> > redesign [0]) I think you mentioned some kind of abstracted data
> >> > binding class that widgets like that could use or inherit. Such a
> >> > class, that worked with the new vector API, would be very handy and
> >> > greatly help with the labeling dialog redesign (and elsewhere). Do you
> >> > have some time to work on that?
> >> >
> >> > See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at
> >> > (14:44:28)
> >> >
> >> > [0] http://drive.dakotacarto.com/qgis/labeling-redesign.png
> >> >
> >> > Regards,
> >> >
> >> > Larry
> >> >
> >> >
> >> > On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com>
> >> > wrote:
> >> >> Larry,
> >> >>
> >> >> If you do have time for this I too would really like to see this
> added.
> >> >> The
> >> >> tabs situation is becoming a mess and is only going to get worse as
> we
> >> >> move
> >> >> forward.  If you need some help I can lend a hand.
> >> >>
> >> >> - Nathan
> >> >>
> >> >>
> >> >> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch>
> >> >> wrote:
> >> >>>
> >> >>> Hi Larry,
> >> >>>
> >> >>> What is the status of the vertical tabs? Do you still have a branch
> >> >>> with
> >> >>> them ready?
> >> >>>
> >> >>> I noticed, that the new labelling dialog in the vector layer
> settings
> >> >>> has
> >> >>> two columns of tabs, which look a bit uncommon, and I'd see vertical
> >> >>> tabs as
> >> >>> a good replacement for either the first or the second level of tabs
> in
> >> >>> this
> >> >>> dialog.
> >> >>>
> >> >>> Cheers,
> >> >>>
> >> >>> Matthias
> >> >>>
> >> >>>
> >> >>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
> >> >>>>
> >> >>>> Hi,
> >> >>>>
> >> >>>> I've been working on reducing overall clutter and excess space, and
> >> >>>> trying to increase efficiency and extensibility, with options
> >> >>>> dialogs.
> >> >>>>
> >> >>>> Problems with current option dialogs' parent QTabWidget approach:
> >> >>>>
> >> >>>> * Tab widget uses unnecessary vertical space (bad for small
> screens).
> >> >>>> * Tab widget limits the use of reasonably needed tabs for option
> >> >>>> sections (avoiding tabs-within-tabs unfortunately trumps
> useability).
> >> >>>> * Horizontal parent tabs limit how many option sections can be
> >> >>>> offered
> >> >>>> (already too wide, without text truncation, on Mac).
> >> >>>> * Horizontal parent tabs dictate the width of the dialog, causing
> >> >>>> form
> >> >>>> layout elements to optically stretch too far apart.
> >> >>>>
> >> >>>>
> >> >>>> Possible solution: Move 'tabs' to simple list widget on left side
> of
> >> >>>> a
> >> >>>> splitter and have option sections loaded on right.
> >> >>>>
> >> >>>> I have done mockups for the app and vector layer options [0], which
> >> >>>> show the following advantages:
> >> >>>>
> >> >>>> * Vertical height is maximized without sacrificing layout of option
> >> >>>> section form elements (good for smaller screens).
> >> >>>> * Number of option sections is not graphically limited.
> >> >>>> * Number of option sections no longer dictates width of option
> >> >>>> section
> >> >>>> forms (forms look much better).
> >> >>>> * List item widget can have its splitter section collapsed to a set
> >> >>>> size to show only icons for sections.
> >> >>>> * Consistent look across platforms, with larger icons for sections.
> >> >>>> * More current 'look' for v 2.0 without too much work.
> >> >>>>
> >> >>>> Other than making the dialogs clearer and less cluttered IMHO, the
> >> >>>> full useability of the dialogs at smaller sizes helps the user see
> >> >>>> more map canvas when testing options with Apply.
> >> >>>>
> >> >>>> Any comments or suggestions?
> >> >>>>
> >> >>>> [0]
> >> >>>>
> >> >>>>
> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
> >> >>>>
> >> >>>> Regards,
> >> >>>>
> >> >>>> Larry
> >> >>>> _______________________________________________
> >> >>>> Qgis-developer mailing list
> >> >>>> Qgis-developer at lists.osgeo.org
> >> >>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> >>>
> >> >>>
> >> >>> _______________________________________________
> >> >>> Qgis-developer mailing list
> >> >>> Qgis-developer at lists.osgeo.org
> >> >>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> >>
> >> >>
> >> >>
> >> >> _______________________________________________
> >> >> Qgis-developer mailing list
> >> >> Qgis-developer at lists.osgeo.org
> >> >> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> >>
> >
> >
> >
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
>
>
> --
> Tim Sutton - QGIS Project Steering Committee Member (Release  Manager)
> ==============================================
> Please do not email me off-list with technical
> support questions. Using the lists will gain
> more exposure for your issues and the knowledge
> surrounding your issue will be shared with all.
>
> Visit http://linfiniti.com to find out about:
>  * QGIS programming and support services
>  * Mapserver and PostGIS based hosting plans
>  * FOSS Consulting Services
> Skype: timlinux
> Irc: timlinux on #qgis at freenode.net
> ==============================================
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130114/fe2e453a/attachment-0001.html>

From marco at bernawebdesign.ch  Mon Jan 14 03:58:45 2013
From: marco at bernawebdesign.ch (Marco Bernasocchi)
Date: Mon, 14 Jan 2013 12:58:45 +0100
Subject: [Qgis-developer] Mac OS X 10.6, master version,
 sextante problem and solution (Python 2.6.x)
In-Reply-To: <CAJsc-7z+Wq3Eu2biAbKw5SNwTk-=54_c9KZU4rw7eVUeLOosPg@mail.gmail.com>
References: <CA+nQOR9wP6opQPj24HSmqGRQdOHjy_guN0kZK8J7P5iv6zdH_w@mail.gmail.com>
	<CAJsc-7z+Wq3Eu2biAbKw5SNwTk-=54_c9KZU4rw7eVUeLOosPg@mail.gmail.com>
Message-ID: <50F3F2F5.8080905@bernawebdesign.ch>

Victor, maybe of interest, regarding this, QGIS 1.7.4 on windows ships
with python 2.5 [0]
ciao

[0] https://github.com/AIFDR/inasafe/issues/341#issuecomment-9404357

On 01/13/2013 11:01 PM, Victor Olaya wrote:
> That sounds like OK to me, but I do not know the policy for adding new
> libraries in QGIS, since I haven't added any new one (SEXTANTE just
> uses the ones already included in QGIS). Alex might know more about
> it. Anyway, if it can be included, I would prefer it, since that would
> make it easier for all users to have a functional SEXTANTE without
> problems
> 
> Regards
> 
> 
> 
> 2013/1/13 Larry Shaffer <larrys at dakotacarto.com>:
>> Hi Gene,
>>
>> On Sun, Jan 13, 2013 at 1:09 AM, gene <martin.laloux at gmail.com> wrote:
>>>
>>> I had a problem with the sextante module in the last master version of
>>> http://qgis.dakotacarto.com/ <http://qgis.dakotacarto.com/>  .  The Python
>>> module *importlib* is not present in a version of Python prior to 2.7
>>>
>>> The solution ?
>>> Install   importlib <http://pypi.python.org/pypi/importlib/>  , which is a
>>> backport of the importlib.import_module() from Python 2.7
>>
>>
>> Thanks for looking into this. I checked out the backported module and it is
>> quite simple. I should be able to add it to the bundled QGIS master version
>> for Snow Leopard (via the nightly build script, after the app is built, not
>> as part of the CMake build setup).
>>
>> I should have time to do that on Monday morning. Once part of the bundled
>> app, I'll test it locally, but would appreciate if you can test it as well.
>> I'll post to the list again when it is ready.
>>
>> That module could (should?) be added directly to the SEXTANTE plugin, since
>> it is Python 2.6 related, and not specific to Mac OS X 10.6. Could you draft
>> an issue on the tracker for its inclusion in SEXTANTE? (I have directly Cc'd
>> victor and alex on this as well.)
>>
>> Regards,
>>
>> Larry
>>
>>>
>>> --
>>> View this message in context:
>>> http://osgeo-org.1560.n6.nabble.com/Mac-OS-X-10-6-master-version-sextante-problem-and-solution-Python-2-6-x-tp5027133.html
>>> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


-- 
Marco Bernasocchi
http://opengis.ch

From lists at linfiniti.com  Mon Jan 14 04:44:18 2013
From: lists at linfiniti.com (Tim Sutton)
Date: Mon, 14 Jan 2013 14:44:18 +0200
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CA+nQOR8g0LVdEaG4aBHbjCbEatVyzsdQQw9j9V0TGB_2s56_AQ@mail.gmail.com>
References: <CA+nQOR8NTLpcYcppS=i=8HJiM946ESH8Yhqz6QLExaAiebdN-A@mail.gmail.com>
	<CALCNqkbqQd2cSRH9TSWtW-W3ookFVa4+6bMOx2Y-Kk=XRFy4Zg@mail.gmail.com>
	<CA+nQOR8g0LVdEaG4aBHbjCbEatVyzsdQQw9j9V0TGB_2s56_AQ@mail.gmail.com>
Message-ID: <CALCNqkZVJSTAodWof6j4SCdCSenBTNEaxe51ReWd3Hz7cEk=mQ@mail.gmail.com>

Hi

On Mon, Jan 14, 2013 at 12:32 PM, Larry Shaffer <larrys at dakotacarto.com> wrote:
> Hi Tim,
>
> On Mon, Jan 14, 2013 at 12:31 AM, Tim Sutton <lists at linfiniti.com> wrote:
>>
>> Hi
>>
>> On Sun, Jan 13, 2013 at 11:47 PM, Larry Shaffer <larrys at dakotacarto.com>
>> wrote:
>> > Hi,
>> --- 8<--- snip
>>
>> >
>> > So it's been about a week, does anyone have issues/comments/suggestions
>> > with
>> > how the new vertical tabs are working in the Options dialog? If not,
>> > I'll go
>> > forward with changing the following to vertical tabs as well:
>>
>>
>> I like the changes - it would be nice to be a little less generous
>> with the horizontal space given to the left panel (on my ubuntu system
>> there is quite a lot of 'dead' white space between the item labels and
>> the splitter bar).
>
>
> I have fixed that with a workaround. It's actually a funky problem that
> starts with QtDesigner. If you open up qgsoptionsbase.ui (current one), you
> will see the same excessive width on the left pane. However, there is no way
> to resize or define splitter widths in QtDesigner in the layout workspace.
> What defines the splitter widths is the 'default' width of items, though
> there is no way to set those without setting some static width (like 150 max
> for the left pane's list widget), then close/reopen the .ui file.
>
> I have left the list widget at 150 so there is room to design in QtDesigner;
> and, that becomes the default width for the Options dialog when the splitter
> state has not yet been saved. Once splitter state is saved, it is ignored.
>
>> I was toying wiht app font size - if we set it to 9pt by default, the
>> settings panels all work a lot better for me under gnome shell 3.6.
>
>
> Hmmm. Not so legible on Mac. :^)  Be good to establish reason baseline sizes
> for most platforms and default the app's stylesheet to those.
> http://drive.dakotacarto.com/qgis/new-options_font-9px.png
>

Yeah maybe having per platform defaults would be good.


> On a related note, today I reorganized the Options dialog:
> https://github.com/dakcarto/Quantum-GIS/tree/options_re-org_1
>
> Slideshow of screen snaps (little taller dialog height, to show layouts in
> scroll areas):
> https://www.dropbox.com/sh/l08y5xyxm20q5ev/aOLAIuoSVV
>

Looks great!


> Appreciate feedback on the choices, and any suggestions. This is the only
> options dialog that I think really needs some reorganizing kindness before
> 2.0. Once there is an advanced settings editor, it could reside on a last
> page of the dialog, or maybe be a separate menu item under the Settings
> menu.
>

Or maybe have them folded away at the bottom of each options tab so
they maintain the context of the tab.

> I'm not sure that the property editor format is good for general/new users.
> I think general users need clean, graphically clear and grouped options
> (which is what I have tried to do in that feature branch). Definitely handy
> for power users and devs, though.
>

Agreed, you are right property lists are probably not as user friendly.

Regards

Tim


> Regards,
>
> Larry
>
>
>>
>> >
>> >
>> > * Project options
>> > * Vector and Raster layer properties
>> >
>>
>> +1 from me!
>>
>> Regards
>>
>> Tim
>>
>> > Note: icon-only mode should now only show the vertical scrollbar when
>> > needed, auto-resizing the splitter to accommodate it.
>> >
>> > Regards,
>> >
>> > Larry
>> >
>> >
>> >>
>> >> Currently, the dialog is a little slow to open. This is due (I
>> >> believe) to the custom font combobox population, and the new
>> >> QProcess::systemEnvironment() call to populate the current environment
>> >> variables table. I'll work on fixing those.
>> >>
>> >> [0] http://drive.dakotacarto.com/qgis/options-dialog_icon-only.png
>> >>
>> >> Regards,
>> >>
>> >> Larry
>> >>
>> >>
>> >>
>> >> On Fri, Jan 4, 2013 at 10:47 AM, Larry Shaffer <larrys at dakotacarto.com>
>> >> wrote:
>> >> > Hi Matthias and Nathan,
>> >> >
>> >> > I was just about to bring this topic back up myself. :^) Yes, I can
>> >> > work on this next (probably this weekend). I'll start with the main
>> >> > app options dialog, cause it's the simplest.
>> >> >
>> >> > Option dialog candidates to switch to vertical tabs (for
>> >> > useability/consistency):
>> >> > * App options
>> >> > * Project options
>> >> > * Vector and Raster layer properties
>> >> >
>> >> >
>> >> > Matthias, do you think the new diagram options setup can be moved to
>> >> > horizontal tabs, instead of a toolbox, once there are vertical tabs
>> >> > for the vector dialog?
>> >> >
>> >> >
>> >> > Nathan,
>> >> >> ...  If you need some help I can lend a hand.
>> >> >
>> >> > Remember that little custom toolbutton widget we chatted about for
>> >> > data defined option overrides? (to the right of labeling options in
>> >> > redesign [0]) I think you mentioned some kind of abstracted data
>> >> > binding class that widgets like that could use or inherit. Such a
>> >> > class, that worked with the new vector API, would be very handy and
>> >> > greatly help with the labeling dialog redesign (and elsewhere). Do
>> >> > you
>> >> > have some time to work on that?
>> >> >
>> >> > See http://irclogs.geoapt.com/qgis/%23qgis.2012-11-26.log starting at
>> >> > (14:44:28)
>> >> >
>> >> > [0] http://drive.dakotacarto.com/qgis/labeling-redesign.png
>> >> >
>> >> > Regards,
>> >> >
>> >> > Larry
>> >> >
>> >> >
>> >> > On Fri, Jan 4, 2013 at 7:12 AM, Nathan Woodrow <madmanwoo at gmail.com>
>> >> > wrote:
>> >> >> Larry,
>> >> >>
>> >> >> If you do have time for this I too would really like to see this
>> >> >> added.
>> >> >> The
>> >> >> tabs situation is becoming a mess and is only going to get worse as
>> >> >> we
>> >> >> move
>> >> >> forward.  If you need some help I can lend a hand.
>> >> >>
>> >> >> - Nathan
>> >> >>
>> >> >>
>> >> >> On Fri, Jan 4, 2013 at 5:51 PM, Matthias Kuhn <matthias.kuhn at gmx.ch>
>> >> >> wrote:
>> >> >>>
>> >> >>> Hi Larry,
>> >> >>>
>> >> >>> What is the status of the vertical tabs? Do you still have a branch
>> >> >>> with
>> >> >>> them ready?
>> >> >>>
>> >> >>> I noticed, that the new labelling dialog in the vector layer
>> >> >>> settings
>> >> >>> has
>> >> >>> two columns of tabs, which look a bit uncommon, and I'd see
>> >> >>> vertical
>> >> >>> tabs as
>> >> >>> a good replacement for either the first or the second level of tabs
>> >> >>> in
>> >> >>> this
>> >> >>> dialog.
>> >> >>>
>> >> >>> Cheers,
>> >> >>>
>> >> >>> Matthias
>> >> >>>
>> >> >>>
>> >> >>> On 09/05/2012 09:10 PM, Larry Shaffer wrote:
>> >> >>>>
>> >> >>>> Hi,
>> >> >>>>
>> >> >>>> I've been working on reducing overall clutter and excess space,
>> >> >>>> and
>> >> >>>> trying to increase efficiency and extensibility, with options
>> >> >>>> dialogs.
>> >> >>>>
>> >> >>>> Problems with current option dialogs' parent QTabWidget approach:
>> >> >>>>
>> >> >>>> * Tab widget uses unnecessary vertical space (bad for small
>> >> >>>> screens).
>> >> >>>> * Tab widget limits the use of reasonably needed tabs for option
>> >> >>>> sections (avoiding tabs-within-tabs unfortunately trumps
>> >> >>>> useability).
>> >> >>>> * Horizontal parent tabs limit how many option sections can be
>> >> >>>> offered
>> >> >>>> (already too wide, without text truncation, on Mac).
>> >> >>>> * Horizontal parent tabs dictate the width of the dialog, causing
>> >> >>>> form
>> >> >>>> layout elements to optically stretch too far apart.
>> >> >>>>
>> >> >>>>
>> >> >>>> Possible solution: Move 'tabs' to simple list widget on left side
>> >> >>>> of
>> >> >>>> a
>> >> >>>> splitter and have option sections loaded on right.
>> >> >>>>
>> >> >>>> I have done mockups for the app and vector layer options [0],
>> >> >>>> which
>> >> >>>> show the following advantages:
>> >> >>>>
>> >> >>>> * Vertical height is maximized without sacrificing layout of
>> >> >>>> option
>> >> >>>> section form elements (good for smaller screens).
>> >> >>>> * Number of option sections is not graphically limited.
>> >> >>>> * Number of option sections no longer dictates width of option
>> >> >>>> section
>> >> >>>> forms (forms look much better).
>> >> >>>> * List item widget can have its splitter section collapsed to a
>> >> >>>> set
>> >> >>>> size to show only icons for sections.
>> >> >>>> * Consistent look across platforms, with larger icons for
>> >> >>>> sections.
>> >> >>>> * More current 'look' for v 2.0 without too much work.
>> >> >>>>
>> >> >>>> Other than making the dialogs clearer and less cluttered IMHO, the
>> >> >>>> full useability of the dialogs at smaller sizes helps the user see
>> >> >>>> more map canvas when testing options with Apply.
>> >> >>>>
>> >> >>>> Any comments or suggestions?
>> >> >>>>
>> >> >>>> [0]
>> >> >>>>
>> >> >>>>
>> >> >>>> https://www.dropbox.com/sh/yy0j3mmg4l4kw7x/Ar_S-eYqCv/qgis/options-dlgs?lst
>> >> >>>>
>> >> >>>> Regards,
>> >> >>>>
>> >> >>>> Larry
>> >> >>>> _______________________________________________
>> >> >>>> Qgis-developer mailing list
>> >> >>>> Qgis-developer at lists.osgeo.org
>> >> >>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> >>>
>> >> >>>
>> >> >>> _______________________________________________
>> >> >>> Qgis-developer mailing list
>> >> >>> Qgis-developer at lists.osgeo.org
>> >> >>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> >>
>> >> >>
>> >> >>
>> >> >> _______________________________________________
>> >> >> Qgis-developer mailing list
>> >> >> Qgis-developer at lists.osgeo.org
>> >> >> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> >>
>> >
>> >
>> >
>> > _______________________________________________
>> > Qgis-developer mailing list
>> > Qgis-developer at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >
>>
>>
>>
>> --
>> Tim Sutton - QGIS Project Steering Committee Member (Release  Manager)
>> ==============================================
>> Please do not email me off-list with technical
>> support questions. Using the lists will gain
>> more exposure for your issues and the knowledge
>> surrounding your issue will be shared with all.
>>
>> Visit http://linfiniti.com to find out about:
>>  * QGIS programming and support services
>>  * Mapserver and PostGIS based hosting plans
>>  * FOSS Consulting Services
>> Skype: timlinux
>> Irc: timlinux on #qgis at freenode.net
>> ==============================================
>
>



--
Tim Sutton - QGIS Project Steering Committee Member (Release  Manager)
==============================================
Please do not email me off-list with technical
support questions. Using the lists will gain
more exposure for your issues and the knowledge
surrounding your issue will be shared with all.

Visit http://linfiniti.com to find out about:
 * QGIS programming and support services
 * Mapserver and PostGIS based hosting plans
 * FOSS Consulting Services
Skype: timlinux
Irc: timlinux on #qgis at freenode.net
==============================================

From tiruchirapalli at gmail.com  Mon Jan 14 14:57:09 2013
From: tiruchirapalli at gmail.com (Ted)
Date: Tue, 15 Jan 2013 06:57:09 +0800
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
 spatialite versions
In-Reply-To: <F485CD07-9AF4-4C93-8C9E-2FB40C737EC3@westnet.com.au>
References: <1352990256890-5016639.post@n6.nabble.com>
	<20121115164743.GA30935@norbit.de>
	<1353012723001-5016757.post@n6.nabble.com>
	<50A889F1.1040706@faunalia.it>
	<F485CD07-9AF4-4C93-8C9E-2FB40C737EC3@westnet.com.au>
Message-ID: <CAC8_qeYq5+qdoiAa=yLE44OcAokXvRResDrgOLtRbMnyumvuYQ@mail.gmail.com>

Ramon

the current product manage for ECW is Chris Tweedie,
Chris.Tweedie at intergraph.com  and for your good, he is based out of oz. so
can you please get in touch with him and help us clear this doubt?

the current version is 4.3 and the installer is password protected. You can
download it freely from intergraph site.
http://geospatial.intergraph.com/products/other/ecw/erdasecwjpeg2000sdk/downloads/ERDAS_ECW_JP2_SDK_Desktop_Read-Only_Version_4_3.aspx


the licensing agreement and the rest of the literature are here
http://geospatial.intergraph.com/products/other/ecw/erdasecwjpeg2000sdk/ProductLiterature.aspx

I really hope to get the ECW support back in GDAL and QGIS before v2
release.


Cheers

Ted





On Mon, Nov 19, 2012 at 1:11 PM, Ramon Andi?ach <custard at westnet.com.au>wrote:

>
> On 18/11/2012, at 15:10 , Paolo Cavallini wrote:
>
> > Il 15/11/2012 21:52, haubourg ha scritto:
> >
> >> Is there anything I can do (paying someone to spend a few days
> clarifying
> >> ECW situation) or are we trapped by ERDAS??
> >
> > Hi all.
> > I understand the problem. I asked directly ERDAS a few years ago, so we
> had precise
> > guidelines. Now things have changed, so I'd suggest to:
> > - ask again the proprietary of the ECW software and patents about what
> we can and
> > what we can't do
> > - if they come out with reasonable requests, we can follow them
> > - if not, I guess the only option for corporate users is to prepare ad
> hoc packages
> > for redistribution within the company, as this might be allowed by the
> licence.
> > All the best.
>
> Is this possible?
> or has the horse bolted?
>
> I'd volunteer to send the letter, but it should probably come from higher
> up the food chain than me :)
> However, I'd be willing to reframe the letter so that they were made aware
> that there were users that they'd miss out on if they didn't give you
> reasonable guidelines.
> (and send it on a regular basis until you got an answer)
>
> -ramon.
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130115/2ad228bd/attachment.html>

From tiruchirapalli at gmail.com  Mon Jan 14 15:06:53 2013
From: tiruchirapalli at gmail.com (Ted)
Date: Tue, 15 Jan 2013 07:06:53 +0800
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
 spatialite versions
In-Reply-To: <CAC8_qeYq5+qdoiAa=yLE44OcAokXvRResDrgOLtRbMnyumvuYQ@mail.gmail.com>
References: <1352990256890-5016639.post@n6.nabble.com>
	<20121115164743.GA30935@norbit.de>
	<1353012723001-5016757.post@n6.nabble.com>
	<50A889F1.1040706@faunalia.it>
	<F485CD07-9AF4-4C93-8C9E-2FB40C737EC3@westnet.com.au>
	<CAC8_qeYq5+qdoiAa=yLE44OcAokXvRResDrgOLtRbMnyumvuYQ@mail.gmail.com>
Message-ID: <CAC8_qeZnzbVo+oN8BZ5+wTYFTqZoZh5gpE4wNkeJF5dot2wPXg@mail.gmail.com>

the direct link for download

http://download.intergraph.com/software/2011/ECWJP2K_4_3_6_25/ECWJP2SDKSetup_RO.exe



On Tue, Jan 15, 2013 at 6:57 AM, Ted <tiruchirapalli at gmail.com> wrote:

> Ramon
>
> the current product manage for ECW is Chris Tweedie,
> Chris.Tweedie at intergraph.com  and for your good, he is based out of oz.
> so can you please get in touch with him and help us clear this doubt?
>
> the current version is 4.3 and the installer is password protected. You
> can download it freely from intergraph site.
>
> http://geospatial.intergraph.com/products/other/ecw/erdasecwjpeg2000sdk/downloads/ERDAS_ECW_JP2_SDK_Desktop_Read-Only_Version_4_3.aspx
>
>
> the licensing agreement and the rest of the literature are here
>
> http://geospatial.intergraph.com/products/other/ecw/erdasecwjpeg2000sdk/ProductLiterature.aspx
>
> I really hope to get the ECW support back in GDAL and QGIS before v2
> release.
>
>
> Cheers
>
> Ted
>
>
>
>
>
> On Mon, Nov 19, 2012 at 1:11 PM, Ramon Andi?ach <custard at westnet.com.au>wrote:
>
>>
>> On 18/11/2012, at 15:10 , Paolo Cavallini wrote:
>>
>> > Il 15/11/2012 21:52, haubourg ha scritto:
>> >
>> >> Is there anything I can do (paying someone to spend a few days
>> clarifying
>> >> ECW situation) or are we trapped by ERDAS??
>> >
>> > Hi all.
>> > I understand the problem. I asked directly ERDAS a few years ago, so we
>> had precise
>> > guidelines. Now things have changed, so I'd suggest to:
>> > - ask again the proprietary of the ECW software and patents about what
>> we can and
>> > what we can't do
>> > - if they come out with reasonable requests, we can follow them
>> > - if not, I guess the only option for corporate users is to prepare ad
>> hoc packages
>> > for redistribution within the company, as this might be allowed by the
>> licence.
>> > All the best.
>>
>> Is this possible?
>> or has the horse bolted?
>>
>> I'd volunteer to send the letter, but it should probably come from higher
>> up the food chain than me :)
>> However, I'd be willing to reframe the letter so that they were made
>> aware that there were users that they'd miss out on if they didn't give you
>> reasonable guidelines.
>> (and send it on a regular basis until you got an answer)
>>
>> -ramon.
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130115/470be2b0/attachment.html>

From custard at westnet.com.au  Mon Jan 14 15:28:25 2013
From: custard at westnet.com.au (=?iso-8859-1?Q?Ramon_Andi=F1ach?=)
Date: Tue, 15 Jan 2013 07:28:25 +0800
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
	spatialite versions (ECW tangent)
In-Reply-To: <CAC8_qeYq5+qdoiAa=yLE44OcAokXvRResDrgOLtRbMnyumvuYQ@mail.gmail.com>
References: <1352990256890-5016639.post@n6.nabble.com>
	<20121115164743.GA30935@norbit.de>
	<1353012723001-5016757.post@n6.nabble.com>
	<50A889F1.1040706@faunalia.it>
	<F485CD07-9AF4-4C93-8C9E-2FB40C737EC3@westnet.com.au>
	<CAC8_qeYq5+qdoiAa=yLE44OcAokXvRResDrgOLtRbMnyumvuYQ@mail.gmail.com>
Message-ID: <D19C22E8-C84E-40A0-AA24-9F5180E20A4A@westnet.com.au>

Ok. I'll go back through the licensing documentation in the next few days.

If I'm doing this I have some questions. (J?rgen, Paolo?)
What would appropriate questions would be? Paolo's comment below seems really open to me.
  (Neither developer or lawyer, so would appreciate comment).
What was the previous arrangement?
Am I asking just for myself as a concerned user, QGIS or OSGeo generally?
 If the last two can I speak for them?

-ramon.

On 15/01/2013, at 06:57 , Ted wrote:

> Ramon
> 
> the current product manage for ECW is Chris Tweedie,  Chris.Tweedie at intergraph.com  and for your good, he is based out of oz. so can you please get in touch with him and help us clear this doubt?
> 
> the current version is 4.3 and the installer is password protected. You can download it freely from intergraph site.
> http://geospatial.intergraph.com/products/other/ecw/erdasecwjpeg2000sdk/downloads/ERDAS_ECW_JP2_SDK_Desktop_Read-Only_Version_4_3.aspx
> 
> 
> the licensing agreement and the rest of the literature are here
> http://geospatial.intergraph.com/products/other/ecw/erdasecwjpeg2000sdk/ProductLiterature.aspx
> 
> I really hope to get the ECW support back in GDAL and QGIS before v2 release.
> 
> 
> Cheers
> 
> Ted
> 
> On Mon, Nov 19, 2012 at 1:11 PM, Ramon Andi?ach <custard at westnet.com.au> wrote:
> 
> On 18/11/2012, at 15:10 , Paolo Cavallini wrote:
> 
> > Il 15/11/2012 21:52, haubourg ha scritto:
> >
> >> Is there anything I can do (paying someone to spend a few days clarifying
> >> ECW situation) or are we trapped by ERDAS??
> >
> > Hi all.
> > I understand the problem. I asked directly ERDAS a few years ago, so we had precise
> > guidelines. Now things have changed, so I'd suggest to:
> > - ask again the proprietary of the ECW software and patents about what we can and
> > what we can't do
> > - if they come out with reasonable requests, we can follow them
> > - if not, I guess the only option for corporate users is to prepare ad hoc packages
> > for redistribution within the company, as this might be allowed by the licence.
> > All the best.
> 
> Is this possible?
> or has the horse bolted?
> 
> I'd volunteer to send the letter, but it should probably come from higher up the food chain than me :)
> However, I'd be willing to reframe the letter so that they were made aware that there were users that they'd miss out on if they didn't give you reasonable guidelines.
> (and send it on a regular basis until you got an answer)
> 
> -ramon.
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From cavallini at faunalia.it  Mon Jan 14 23:27:17 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 15 Jan 2013 08:27:17 +0100
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
 spatialite versions (ECW tangent)
In-Reply-To: <D19C22E8-C84E-40A0-AA24-9F5180E20A4A@westnet.com.au>
References: <1352990256890-5016639.post@n6.nabble.com>
	<20121115164743.GA30935@norbit.de>
	<1353012723001-5016757.post@n6.nabble.com>
	<50A889F1.1040706@faunalia.it>
	<F485CD07-9AF4-4C93-8C9E-2FB40C737EC3@westnet.com.au>
	<CAC8_qeYq5+qdoiAa=yLE44OcAokXvRResDrgOLtRbMnyumvuYQ@mail.gmail.com>
	<D19C22E8-C84E-40A0-AA24-9F5180E20A4A@westnet.com.au>
Message-ID: <50F504D5.6030001@faunalia.it>

Il 15/01/2013 00:28, Ramon Andi?ach ha scritto:
> Ok. I'll go back through the licensing documentation in the next few days.
> 
> If I'm doing this I have some questions. (J?rgen, Paolo?)
> What would appropriate questions would be? Paolo's comment below seems really open to me.
>   (Neither developer or lawyer, so would appreciate comment).
> What was the previous arrangement?

AFAICT, the SDK can be used for "dektop programs", not for servers. The issue is: if
we compile GDAL with non-free SDK, this can be used both for the desktop and for the
server (mapserver, QGSI server, etc.). It is unclear if the responsibility lies with
the user (so a warning "use only for desktop" is enough) of with the developer (in
this case, we cannot distribute it).
If someone has a better understanding, please let us know.
All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From custard at westnet.com.au  Tue Jan 15 02:43:10 2013
From: custard at westnet.com.au (=?iso-8859-1?Q?Ramon_Andi=F1ach?=)
Date: Tue, 15 Jan 2013 18:43:10 +0800
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
	spatialite versions (ECW tangent)
In-Reply-To: <50F504D5.6030001@faunalia.it>
References: <1352990256890-5016639.post@n6.nabble.com>
	<20121115164743.GA30935@norbit.de>
	<1353012723001-5016757.post@n6.nabble.com>
	<50A889F1.1040706@faunalia.it>
	<F485CD07-9AF4-4C93-8C9E-2FB40C737EC3@westnet.com.au>
	<CAC8_qeYq5+qdoiAa=yLE44OcAokXvRResDrgOLtRbMnyumvuYQ@mail.gmail.com>
	<D19C22E8-C84E-40A0-AA24-9F5180E20A4A@westnet.com.au>
	<50F504D5.6030001@faunalia.it>
Message-ID: <2D60C7DE-A02A-499E-A834-775DD67AD8A9@westnet.com.au>


On 15/01/2013, at 15:27 , Paolo Cavallini wrote:

> Il 15/01/2013 00:28, Ramon Andi?ach ha scritto:
>> Ok. I'll go back through the licensing documentation in the next few days.
>> 
>> If I'm doing this I have some questions. (J?rgen, Paolo?)
>> What would appropriate questions would be? Paolo's comment below seems really open to me.
>>  (Neither developer or lawyer, so would appreciate comment).
>> What was the previous arrangement?
> 
> AFAICT, the SDK can be used for "dektop programs", not for servers. The issue is: if
> we compile GDAL with non-free SDK, this can be used both for the desktop and for the
> server (mapserver, QGSI server, etc.). It is unclear if the responsibility lies with
> the user (so a warning "use only for desktop" is enough) of with the developer (in
> this case, we cannot distribute it).
> If someone has a better understanding, please let us know.
> All the best.

Thanks Paolo, much appreciated.

I've drafted a letter, but I'd like some feed back before I send it off.[1]

Along the lines of:
Does it make sense?
Am I understanding correctly?
Does it cover the questions that need asking?
and,
I'm not misrepresenting any of the QGIS or OSGeo camps and in any way?

Particularly, if Paolo, J?rgen and Frank had anything to say on the note that would be appreciated.


-ramon.

[1] https://www.dropbox.com/s/dwq8qzc6yvh27jx/QuestionsForIntergraph2012i15
(I can open the folder up if people have big notes, that would be better left there)

From Alister.Hood at synergine.com  Tue Jan 15 12:13:08 2013
From: Alister.Hood at synergine.com (Alister Hood)
Date: Tue, 15 Jan 2013 20:13:08 +0000
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
 spatialite versions (ECW tangent)
Message-ID: <7C0A9EA7588C0D418C82042EED8127CA5335D3@AKLSVR1.synakl.local>

> Date: Tue, 15 Jan 2013 18:43:10 +0800
> From: Ramon Andi?ach <custard at westnet.com.au>
> To: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK
>         with    spatialite versions (ECW tangent)
> Message-ID: <2D60C7DE-A02A-499E-A834-775DD67AD8A9 at westnet.com.au>
> Content-Type: text/plain; charset=iso-8859-1
>?
>?
> On 15/01/2013, at 15:27 , Paolo Cavallini wrote:
>?
> > Il 15/01/2013 00:28, Ramon Andi?ach ha scritto:
> >> Ok. I'll go back through the licensing documentation in the next few days.
> >>
> >> If I'm doing this I have some questions. (J?rgen, Paolo?)
> >> What would appropriate questions would be? Paolo's comment below seems really open to me.
> >>  (Neither developer or lawyer, so would appreciate comment).
> >> What was the previous arrangement?
> >
> > AFAICT, the SDK can be used for "dektop programs", not for servers. The issue is: if
> > we compile GDAL with non-free SDK, this can be used both for the desktop and for the
> > server (mapserver, QGSI server, etc.). It is unclear if the responsibility lies with
> > the user (so a warning "use only for desktop" is enough) of with the developer (in
> > this case, we cannot distribute it).
> > If someone has a better understanding, please let us know.
> > All the best.
>?
> Thanks Paolo, much appreciated.
>?
> I've drafted a letter, but I'd like some feed back before I send it off.[1]
>?
> Along the lines of:
> Does it make sense?
> Am I understanding correctly?
> Does it cover the questions that need asking?
> and,
> I'm not misrepresenting any of the QGIS or OSGeo camps and in any way?
>?
> Particularly, if Paolo, J?rgen and Frank had anything to say on the note that would be appreciated.
>?
>?
> -ramon.
>?
> [1] https://www.dropbox.com/s/dwq8qzc6yvh27jx/QuestionsForIntergraph2012i15
> (I can open the folder up if people have big notes, that would be better left there)

In relation to the last question in the letter, they are/were working on an updated Linux version:
http://field-guide.blogspot.co.nz/2011/07/erdas-ecwjp2-sdk-for-linux.html
http://field-guide.blogspot.co.nz/2012_05_01_archive.html

From custard at westnet.com.au  Tue Jan 15 14:25:28 2013
From: custard at westnet.com.au (=?iso-8859-1?Q?Ramon_Andi=F1ach?=)
Date: Wed, 16 Jan 2013 06:25:28 +0800
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
	spatialite versions (ECW tangent)
In-Reply-To: <EC9D4785-D502-4228-A614-00FABC547BBF@westnet.com.au>
References: <7C0A9EA7588C0D418C82042EED8127CA5335D3@AKLSVR1.synakl.local>
	<EC9D4785-D502-4228-A614-00FABC547BBF@westnet.com.au>
Message-ID: <1F855D44-CDCF-400B-8AF7-C8C525D7AD4A@westnet.com.au>

And the list this time.
On 16/01/2013, at 06:24 , Ramon Andi?ach wrote:

> 
> On 16/01/2013, at 04:13 , Alister Hood wrote:
> 
>>> Date: Tue, 15 Jan 2013 18:43:10 +0800
>>> 
>>> I've drafted a letter, but I'd like some feed back before I send it off.[1]
>>> 
>>> Along the lines of:
>>> Does it make sense?
>>> Am I understanding correctly?
>>> Does it cover the questions that need asking?
>>> and,
>>> I'm not misrepresenting any of the QGIS or OSGeo camps and in any way?
>>> 
>>> Particularly, if Paolo, J?rgen and Frank had anything to say on the note that would be appreciated.
>>> 
>>> 
>>> -ramon.
>>> 
>>> [1] https://www.dropbox.com/s/dwq8qzc6yvh27jx/QuestionsForIntergraph2012i15
>>> (I can open the folder up if people have big notes, that would be better left there)
>> 
>> In relation to the last question in the letter, they are/were working on an updated Linux version:
>> http://field-guide.blogspot.co.nz/2011/07/erdas-ecwjp2-sdk-for-linux.html
>> http://field-guide.blogspot.co.nz/2012_05_01_archive.html
> 
> Thanks Alister, I'll adjust the last one to ask how the update is going.
> 
> From the looks of that I should add a question along the lines of if there are anticipated licence changes between SDKv4 and the clearly being worked on SDKv5.
> 
> -ramon.


From matthias.kuhn at gmx.ch  Tue Jan 15 14:46:41 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 15 Jan 2013 23:46:41 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
Message-ID: <50F5DC51.8050006@gmx.ch>

Hi Martin,

This mail concerns the vectorlayercache outlined in section 8) of your mail.

I'm currently working on the attribute table which has some internal 
caching already. As I'm currently rewriting the attribute table, I moved 
this code outside and generalized it as good as possible. This work is 
currently available in my branch vectorlayercache [0]. Do you think this 
could be used instead of your geometry cache? It should be able to cache 
geometries of features (although I only tested attributes so far) and 
update and invalidate them if required.

I have also the idea to create a QgsVectorDataProviderCacheProxy class 
which inherits QgsVectorDataProvider and which you can use as a proxy 
between your app and the DataProvider. I've some unfinished code here 
which provides such functionality. But for now, the cache in front of 
the VectorLayer should already help a lot.

[0] https://github.com/matthias-kuhn/Quantum-GIS/tree/vectorlayercache

Regards,
Matthias

On 12/28/2012 05:03 PM, Martin Dobias wrote:
> Hi everyone,
>
> it seems that now it is a good time to ask for a broader review of the
> work I have been doing during recent months: essentially making QGIS
> vector API more flexible and more ready for introduction of threading
> for rendering. That resulted in a greater refactoring of some parts of
> QgsVectorLayer class and QgsVectorDataProvider implementations.
> Everything is in new_vector_api branch in QGIS repository on GitHub
> [1].
>
> There are few things that are not finished, but should not take too
> much work to sort out:
> - disabled providers - mssql, osm, sqlanywhere, wfs - not yet updated to new API
> - disabled mapserver - there are few things to update
>
> If no serious problems will be found, I would like to merge the branch
> to master and continue working on that on master branch to avoid the
> possibility to drift (again) too much from the quick development that
> happens on master. In short term I plan to do some polishing and
> fixing bugs, then eventually start looking at the threading again.
>
> For more details about what happened in the branch, see the text below
> (long read!). A great help from early testers would be to compile the
> branch, try to do some "usual" stuff with vectors and see if things
> break apart (crashes? data corruption?).
>
> Looking forward to your comments!
>
> Regards
> Martin
>
> [1] https://github.com/qgis/Quantum-GIS/tree/new_vector_api
>
>
>
> QGIS VECTOR API CHANGES
>
> 1. QgsFeature (changes)
>
> a) access to attributes by name. Vector data providers and vector
> layer assign pointer to the fields in QgsFeature, so it is possible to
> set/get attributes by their name. This is not as efficient as with
> direct access by index, but often this convenience is useful for
> users.
>
> b) attributes are stored in a QVector container rather than a QMap.
> The major advantage is simplification of logic related to handling of
> attributes: it's not possible to have "holes" in the array of
> fields/attributes. Currently it is possible that for example layer
> with three fields returns indexes 0,1,3 - but it is not so common nor
> obvious, so it's a common source of errors. After refactoring there
> must not be any holes, so a layer with three fields always returns
> indexes 0,1,2. When iterating over layer's features, QgsFeature always
> contains a vector of all layer's attributes. In case the client has
> not requested attributes to be fetched, the attributes contain invalid
> values.
>
>
> 2. QgsFields (new class)
>
> Just like attributes within a feature are stored in a vector instead
> of map, also layer's fields are now stored in a vector. QgsFields is a
> new class that mimics QVector API and adds two more pieces of
> functionality:
>
> a) fast lookup of field index from name. When QgsFields is populated
> with fields, it creates a map of fields that facilitates fast lookups
>
> b) detection of field origin. When working with a vector layer, it is
> sometimes useful to find out origin of the field - whether it comes
> from provider, from a join or whether it is a newly added field (not
> committed). In the future we could add also expression-based fields,
> creating a field calculator that calculates the values on the fly.
>
>
> 3. QgsFeatureRequest (new class)
>
> Class that encapsulates requests for features to a vector layer or
> vector data provider. Right now in master branch, the request is
> defined by arguments to select() method. That's not very flexible nor
> simple to use. Feature request class allows easier extensibility in
> future (support generic expression filter, native provider's SQL
> filter...).
>
> Without any customization, the request will ask for all features with
> geometries and attributes - somehow better default that the current
> one that does not fetch attributes if their list is not explicitly
> given.
>
> (I'm not yet completely happy with the API of this class, so it may be
> changed to some degree. Suggestions are welcome.)
>
> Examples:
> - fetch all features:
>      QgsFeatureRequest()
> - fetch all features, only one attribute
>      QgsFeatureRequest().setSubsetOfAttributes(QStringList("myfield"),
> provider->fields())
> - fetch all features, without geometries
>      QgsFeatureRequest().setFlags(QgsFeatureRequest::NoGeometry)
> - fetch only features from particular extent
>      QgsFeatureRequest().setFilterRect(QgsRectangle(0,0,1,1))
> - fetch only one feature
>      QgsFeatureRequest().setFilterFid(45)
>
>
>
> 4. QgsFeatureIterator (new class)
>
> The iterator class allows iteration over features of a vector layer or
> a provider. It contains the usual nextFeature() method that fills
> given QgsFeature class with data.
>
> Internally, this class is a wrapper around QgsAbstractFeatureIterator
> interface that is implemented by each vector data provider and by
> vector layer. In theory we could use directly
> QgsAbstractFeatureIterator pointers, but this wrapper allows us to use
> it as a local variable, so it gets destroyed automatically when it
> gets out of scope, not requiring an explicit "delete" call that would
> be necessary with a pointer (easy to forget, right?)
>
>
> 5. Access to features
>
> Vector layer and providers implement one important method call:
> getFeatures(). It takes single argument (QgsFeatureRequest) and
> returns QgsFeatureIterator. This replaces select(), nextFeature(),
> rewind() and featureAtId() methods.
>
> This approach allows users to create multiple iterators over a vector
> layer (or a vector data provider). But currently that's not supported
> because this needs support in the providers. At some point, we could
> add support for simultaneous iterators - something that old API does
> not allow at all.
>
> When QgsFeatureIterator instance of a particular layer is closed (by
> calling close() or destructed), then a new getFeatures() call may be
> issued.
>
>
> 6. QgsVectorLayerEditBuffer (new class)
>
> All editing functionality of vector layer has been moved out of
> QgsVectorLayer into a new class that stores everything related to
> editing: added features, removed features, changed geometries, changed
> attribute values, added attributes, removed attributes. This class is
> accessible from QgsVectorLayer, but it exists only when the layer is
> in editing mode - it is deleted once features are rolled back or
> committed.
>
> The undo/redo support has been completely rewritten and greatly
> simplified: instead of one undo command that gathers changes within
> the edit buffer, there is now one undo command implementation for each
> action. The undo commands can be grouped together with QUndoStack
> macros. The new implementation ensures that the undo stack does not
> get out of sync, because all editing changes are stored onto undo
> stack (unlike current implementation in master branch where
> begin/end-UndoCommand() methods must be called before/after edit
> operations to ensure correct behavior of undo).
>
>
> 7. QgsVectorLayerEditUtils (new class)
>
> Advanced editing operations that operate on vector layers (e.g. add
> part) that can be composed from one or more simple edit operations
> have been moved out of QgsVectorLayer and its edit buffer, so that the
> vector layer API is not polluted by methods that do not need access to
> its private members.
>
>
> 8. QgsVectorLayerCache (new class)
>
> To speed up geometry editing, QGIS keeps a cache of geometries
> currently shown in map canvas. This cache has been decoupled from
> editing operations and moved to a separate class to keep things tidy.
> In the future we should be able to add more general caching scheme to
> allow faster rendering of vectors. Also, this might be a good place to
> store index of feature ID -> row number that is calculated every time
> when attribute table is opened.
>
>
> 9. Python
>
> Python API has been updated to support functionality from the points
> above, that is access by attribute name and support for python
> iterators, e.g.:
>
> for feature in layer.getFeatures(request):
>    print feature["road_id"]
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From volayaf at gmail.com  Tue Jan 15 15:00:21 2013
From: volayaf at gmail.com (Victor Olaya)
Date: Wed, 16 Jan 2013 00:00:21 +0100
Subject: [Qgis-developer] Exporting a raster layer
In-Reply-To: <CAB4g1=z7UM6XUx3gM_GipUf-hUQsEj_7va3oN8QU9yN9so1oEQ@mail.gmail.com>
References: <CAJsc-7ypwWV3mqPD-h9vFnpAZAVVJGHMZ3qcNq5BNyL_4KOanQ@mail.gmail.com>
	<CAB4g1=z7UM6XUx3gM_GipUf-hUQsEj_7va3oN8QU9yN9so1oEQ@mail.gmail.com>
Message-ID: <CAJsc-7x-DxxhyrscCisoNfP7ar140MMHttKJUgi8b_q6P+qrEg@mail.gmail.com>

Hey Giovanni, thanks for that! it was what I was looking for and I
could make it work :-)

Thanks again!

Victor



2013/1/13 G. Allegri <giohappy at gmail.com>:
> In Qgis master I think you could use QsgRasterFileWriter [1], for the raster
> providers which support writing,e.g. GDAL.
> AFAIK in Qgis 1.8 there's no mechanism to do that.
>
> giovanni
>
> [1] http://www.qgis.org/api/classQgsRasterFileWriter.html
>
> Sent from Nexus
>
> Il giorno 13/gen/2013 17:10, "Victor Olaya" <volayaf at gmail.com> ha scritto:
>>
>> Hi all
>>
>> I have just implemented a new mechanism in SEXTANTE to make handling
>> of file formats more clear and easy. Now, no matter what provider is
>> creating a vector layer, all formats supported by QGIS can be
>> selected, without requiring anything special added to the algorithm
>> provider. SEXTANTE takes care of converting if needed.
>>
>> I want to implement the same thing for raster layers, but I do not
>> know how to export a raster layer into a given format (except by
>> calling GDAL translate), and I need it for that.. Can any one give me
>> an idea or point me to some code to do that?
>>
>> Thanks in advance!
>>
>> Victor
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From marco at bernawebdesign.ch  Tue Jan 15 15:41:44 2013
From: marco at bernawebdesign.ch (Marco Bernasocchi)
Date: Wed, 16 Jan 2013 00:41:44 +0100
Subject: [Qgis-developer] Better options dialogs
In-Reply-To: <CALCNqkZVJSTAodWof6j4SCdCSenBTNEaxe51ReWd3Hz7cEk=mQ@mail.gmail.com>
References: <CA+nQOR8NTLpcYcppS=i=8HJiM946ESH8Yhqz6QLExaAiebdN-A@mail.gmail.com>
	<CALCNqkbqQd2cSRH9TSWtW-W3ookFVa4+6bMOx2Y-Kk=XRFy4Zg@mail.gmail.com>
	<CA+nQOR8g0LVdEaG4aBHbjCbEatVyzsdQQw9j9V0TGB_2s56_AQ@mail.gmail.com>
	<CALCNqkZVJSTAodWof6j4SCdCSenBTNEaxe51ReWd3Hz7cEk=mQ@mail.gmail.com>
Message-ID: <50F5E938.3040405@bernawebdesign.ch>

On 01/14/2013 01:44 PM, Tim Sutton wrote:
> Yeah maybe having per platform defaults would be good.
don't we already have something like that for android?
ciao

-- 
Marco Bernasocchi
http://opengis.ch

From tiruchirapalli at gmail.com  Tue Jan 15 23:23:03 2013
From: tiruchirapalli at gmail.com (Ted)
Date: Wed, 16 Jan 2013 15:23:03 +0800
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
 spatialite versions (ECW tangent)
In-Reply-To: <1F855D44-CDCF-400B-8AF7-C8C525D7AD4A@westnet.com.au>
References: <7C0A9EA7588C0D418C82042EED8127CA5335D3@AKLSVR1.synakl.local>
	<EC9D4785-D502-4228-A614-00FABC547BBF@westnet.com.au>
	<1F855D44-CDCF-400B-8AF7-C8C525D7AD4A@westnet.com.au>
Message-ID: <CAC8_qeYjz53MVfj3XUahKTcA+MivHj5AfeMeSPcWN-8sLSvPPg@mail.gmail.com>

just minor correction in your letter, Chris is "Product" manager for ECW

Just as I note, they have Read Only version of the SDK and also have few
other editions;

ERDAS ECW/JP2 SDK is offered as four different editions:

   - *ERDAS ECW/JP2 SDK Server Read-Write* provides tools to enable server
   applications to read ECW, ECWP, and JPEG2000 data, serve ECW and JPEG2000
   data, and compress images into the ECW and JPEG2000 data formats.
   - *ERDAS ECW/JP2 SDK Server Read-Only* provides tools to enable end-user
   server applications to read ECW, ECWP and JPEG2000 data and serve ECW and
   JPEG2000 data via third-party server applications. For ESRI ArcGIS Server
   customers, please refer to ECW for ArcGIS
Server<http://geospatial.intergraph.com/products/other/ecw/ECW_for_ArcGIS_Server/Details.aspx>
   .
   - *ERDAS ECW/JP2 SDK Desktop Read-Write* provides tools to enable
   desktop applications to read ECW, ECWP and JPEG2000 and compress images
   into ECW and JPEG2000 data formats.
   - *ERDAS ECW/JP2 SDK Desktop Read-Only* is a free product that provides
   tools to enable desktop applications to read ECW, ECWP and JPEG2000.


Since this is a major shift from the 3.3 SDK which allowed WRITE function
upto 500MB, we could use without much of a problem. After hexagon, there
has been lot of changes and also the licensing of SDK.

At the moment, for GDAL and well and general QGIS user, what we are looking
at is, DESKTOP READ ONLY SDK where by users could use ECW files in QGIS.

So, we need to be very specif about this.

They will never allow GDAL or anyone else to use the library for ECW
Serving function, without $$$$$. So, dont even bother to ask.

So, with GDAL, we should make a point to mark ECW as Read only format.


Thanks

Ted






On Wed, Jan 16, 2013 at 6:25 AM, Ramon Andi?ach <custard at westnet.com.au>wrote:

> And the list this time.
> On 16/01/2013, at 06:24 , Ramon Andi?ach wrote:
>
> >
> > On 16/01/2013, at 04:13 , Alister Hood wrote:
> >
> >>> Date: Tue, 15 Jan 2013 18:43:10 +0800
> >>>
> >>> I've drafted a letter, but I'd like some feed back before I send it
> off.[1]
> >>>
> >>> Along the lines of:
> >>> Does it make sense?
> >>> Am I understanding correctly?
> >>> Does it cover the questions that need asking?
> >>> and,
> >>> I'm not misrepresenting any of the QGIS or OSGeo camps and in any way?
> >>>
> >>> Particularly, if Paolo, J?rgen and Frank had anything to say on the
> note that would be appreciated.
> >>>
> >>>
> >>> -ramon.
> >>>
> >>> [1]
> https://www.dropbox.com/s/dwq8qzc6yvh27jx/QuestionsForIntergraph2012i15
> >>> (I can open the folder up if people have big notes, that would be
> better left there)
> >>
> >> In relation to the last question in the letter, they are/were working
> on an updated Linux version:
> >>
> http://field-guide.blogspot.co.nz/2011/07/erdas-ecwjp2-sdk-for-linux.html
> >> http://field-guide.blogspot.co.nz/2012_05_01_archive.html
> >
> > Thanks Alister, I'll adjust the last one to ask how the update is going.
> >
> > From the looks of that I should add a question along the lines of if
> there are anticipated licence changes between SDKv4 and the clearly being
> worked on SDKv5.
> >
> > -ramon.
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130116/066ef3a4/attachment-0001.html>

From radim.blazek at gmail.com  Wed Jan 16 00:54:24 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed, 16 Jan 2013 09:54:24 +0100
Subject: [Qgis-developer] Exporting a raster layer
In-Reply-To: <CAB4g1=z7UM6XUx3gM_GipUf-hUQsEj_7va3oN8QU9yN9so1oEQ@mail.gmail.com>
References: <CAJsc-7ypwWV3mqPD-h9vFnpAZAVVJGHMZ3qcNq5BNyL_4KOanQ@mail.gmail.com>
	<CAB4g1=z7UM6XUx3gM_GipUf-hUQsEj_7va3oN8QU9yN9so1oEQ@mail.gmail.com>
Message-ID: <CAEMrtYqVJJJN1d+PqKA7=aTBr-A6CZoeKKdKiXOTmRgMWeBErA@mail.gmail.com>

On Sun, Jan 13, 2013 at 5:52 PM, G. Allegri <giohappy at gmail.com> wrote:
> In Qgis master I think you could use QsgRasterFileWriter [1], for the raster
> providers which support writing,e.g. GDAL.

Yes, the QsgRasterFileWriter is higher level class for raster writing,
it is using lower level QgsRasterDataProvider::write(). Current
implementation of raster writing support was especially written for
"raster save as", it may appear that it has to be extended a bit to be
used as output of analytical tools.

The QsgRasterFileWriter is reading/writing in parts specified by
setMaxTileWidth(), setMaxTileHeight(). This mechanism could also be
used for data processing especially if an underlying module is not
optimized for large data sets (e.g. keeps all data in memory). OTOH,
it may cause problems on tile borders if an algorithm depends on
neighbour pixels in which case it would be necessary to process
tile+buffer, but the problem is to find the buffer size for each
module/options.

The QsgRasterFileWriter is reading data from QgsRasterPipe, from its
last QgsRasterInterface. However, it is also using some info from
original data source, for example original data type, so that it can
optimize output data type. Now it works just for saving of existing
rasters, probably we have to think it over again for use with
analytical tools.

The most obvious way to write raster from SEXTANTE using existing
support in core/providers would  be to implement QgsRasterInterface
representing SEXTANTE output. What do you think about that?

In which form are the data you need to write - format, file/memory,...?

It would be good to use also the same QgsRasterLayerSaveAsDialog used
for raster saving, but maybe it has too many options?

Radim

> AFAIK in Qgis 1.8 there's no mechanism to do that.
>
> giovanni
>
> [1] http://www.qgis.org/api/classQgsRasterFileWriter.html
>
> Sent from Nexus
>
> Il giorno 13/gen/2013 17:10, "Victor Olaya" <volayaf at gmail.com> ha scritto:
>
>> Hi all
>>
>> I have just implemented a new mechanism in SEXTANTE to make handling
>> of file formats more clear and easy. Now, no matter what provider is
>> creating a vector layer, all formats supported by QGIS can be
>> selected, without requiring anything special added to the algorithm
>> provider. SEXTANTE takes care of converting if needed.
>>
>> I want to implement the same thing for raster layers, but I do not
>> know how to export a raster layer into a given format (except by
>> calling GDAL translate), and I need it for that.. Can any one give me
>> an idea or point me to some code to do that?
>>
>> Thanks in advance!
>>
>> Victor
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>

From etourigny.dev at gmail.com  Wed Jan 16 03:18:32 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 16 Jan 2013 09:18:32 -0200
Subject: [Qgis-developer] Exporting a raster layer
In-Reply-To: <CAEMrtYqVJJJN1d+PqKA7=aTBr-A6CZoeKKdKiXOTmRgMWeBErA@mail.gmail.com>
References: <CAJsc-7ypwWV3mqPD-h9vFnpAZAVVJGHMZ3qcNq5BNyL_4KOanQ@mail.gmail.com>
	<CAB4g1=z7UM6XUx3gM_GipUf-hUQsEj_7va3oN8QU9yN9so1oEQ@mail.gmail.com>
	<CAEMrtYqVJJJN1d+PqKA7=aTBr-A6CZoeKKdKiXOTmRgMWeBErA@mail.gmail.com>
Message-ID: <CA+TxYvNthdgzbzNUiD0jrQD1DGDh2sLGsuMY1avvzngxTGW_sQ@mail.gmail.com>

On Wed, Jan 16, 2013 at 6:54 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
> On Sun, Jan 13, 2013 at 5:52 PM, G. Allegri <giohappy at gmail.com> wrote:
>> In Qgis master I think you could use QsgRasterFileWriter [1], for the raster
>> providers which support writing,e.g. GDAL.
>
> Yes, the QsgRasterFileWriter is higher level class for raster writing,
> it is using lower level QgsRasterDataProvider::write(). Current
> implementation of raster writing support was especially written for
> "raster save as", it may appear that it has to be extended a bit to be
> used as output of analytical tools.
>
> The QsgRasterFileWriter is reading/writing in parts specified by
> setMaxTileWidth(), setMaxTileHeight(). This mechanism could also be
> used for data processing especially if an underlying module is not
> optimized for large data sets (e.g. keeps all data in memory). OTOH,
> it may cause problems on tile borders if an algorithm depends on
> neighbour pixels in which case it would be necessary to process
> tile+buffer, but the problem is to find the buffer size for each
> module/options.
>
> The QsgRasterFileWriter is reading data from QgsRasterPipe, from its
> last QgsRasterInterface. However, it is also using some info from
> original data source, for example original data type, so that it can
> optimize output data type. Now it works just for saving of existing
> rasters, probably we have to think it over again for use with
> analytical tools.
>
> The most obvious way to write raster from SEXTANTE using existing
> support in core/providers would  be to implement QgsRasterInterface
> representing SEXTANTE output. What do you think about that?
>
> In which form are the data you need to write - format, file/memory,...?
>
> It would be good to use also the same QgsRasterLayerSaveAsDialog used
> for raster saving, but maybe it has too many options?

IMHO the raster save as dialog should be used in the sextante output
as well as in gdaltools.  If it has too many options, perhaps it could
be re-designed to have "simple" and "expert" modes.

Regarding the integration of the save as dialog in gdaltools, I had
some interaction with Giuseppe Sucameli  but we got sidetracked, it
would be nice to finish this before 2.0.

Etienne

>
> Radim
>
>> AFAIK in Qgis 1.8 there's no mechanism to do that.
>>
>> giovanni
>>
>> [1] http://www.qgis.org/api/classQgsRasterFileWriter.html
>>
>> Sent from Nexus
>>
>> Il giorno 13/gen/2013 17:10, "Victor Olaya" <volayaf at gmail.com> ha scritto:
>>
>>> Hi all
>>>
>>> I have just implemented a new mechanism in SEXTANTE to make handling
>>> of file formats more clear and easy. Now, no matter what provider is
>>> creating a vector layer, all formats supported by QGIS can be
>>> selected, without requiring anything special added to the algorithm
>>> provider. SEXTANTE takes care of converting if needed.
>>>
>>> I want to implement the same thing for raster layers, but I do not
>>> know how to export a raster layer into a given format (except by
>>> calling GDAL translate), and I need it for that.. Can any one give me
>>> an idea or point me to some code to do that?
>>>
>>> Thanks in advance!
>>>
>>> Victor
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From brush.tyler at gmail.com  Wed Jan 16 03:46:01 2013
From: brush.tyler at gmail.com (Giuseppe Sucameli)
Date: Wed, 16 Jan 2013 12:46:01 +0100
Subject: [Qgis-developer] Exporting a raster layer
In-Reply-To: <CA+TxYvNthdgzbzNUiD0jrQD1DGDh2sLGsuMY1avvzngxTGW_sQ@mail.gmail.com>
References: <CAJsc-7ypwWV3mqPD-h9vFnpAZAVVJGHMZ3qcNq5BNyL_4KOanQ@mail.gmail.com>
	<CAB4g1=z7UM6XUx3gM_GipUf-hUQsEj_7va3oN8QU9yN9so1oEQ@mail.gmail.com>
	<CAEMrtYqVJJJN1d+PqKA7=aTBr-A6CZoeKKdKiXOTmRgMWeBErA@mail.gmail.com>
	<CA+TxYvNthdgzbzNUiD0jrQD1DGDh2sLGsuMY1avvzngxTGW_sQ@mail.gmail.com>
Message-ID: <CAA6k8-+W+1DOeD4_8daPOYWDT5Bhi_-+wmbsLCYz8Qpy3SxqXw@mail.gmail.com>

On Wed, Jan 16, 2013 at 12:18 PM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> Regarding the integration of the save as dialog in gdaltools, I had
> some interaction with Giuseppe Sucameli  but we got sidetracked, it
> would be nice to finish this before 2.0.

I don't know whether (and where) we was stuck, but I agree it's
time to bring it forward (let's open a new thread).
Integration must be one of the QGIS 2.0's keywords.

Cheers.
Giuseppe.

>
> Etienne
>
>>
>> Radim
>>
>>> AFAIK in Qgis 1.8 there's no mechanism to do that.
>>>
>>> giovanni
>>>
>>> [1] http://www.qgis.org/api/classQgsRasterFileWriter.html
>>>
>>> Sent from Nexus
>>>
>>> Il giorno 13/gen/2013 17:10, "Victor Olaya" <volayaf at gmail.com> ha scritto:
>>>
>>>> Hi all
>>>>
>>>> I have just implemented a new mechanism in SEXTANTE to make handling
>>>> of file formats more clear and easy. Now, no matter what provider is
>>>> creating a vector layer, all formats supported by QGIS can be
>>>> selected, without requiring anything special added to the algorithm
>>>> provider. SEXTANTE takes care of converting if needed.
>>>>
>>>> I want to implement the same thing for raster layers, but I do not
>>>> know how to export a raster layer into a given format (except by
>>>> calling GDAL translate), and I need it for that.. Can any one give me
>>>> an idea or point me to some code to do that?
>>>>
>>>> Thanks in advance!
>>>>
>>>> Victor
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Giuseppe Sucameli

From etourigny.dev at gmail.com  Wed Jan 16 04:10:18 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 16 Jan 2013 10:10:18 -0200
Subject: [Qgis-developer] Exporting a raster layer
In-Reply-To: <CAA6k8-+W+1DOeD4_8daPOYWDT5Bhi_-+wmbsLCYz8Qpy3SxqXw@mail.gmail.com>
References: <CAJsc-7ypwWV3mqPD-h9vFnpAZAVVJGHMZ3qcNq5BNyL_4KOanQ@mail.gmail.com>
	<CAB4g1=z7UM6XUx3gM_GipUf-hUQsEj_7va3oN8QU9yN9so1oEQ@mail.gmail.com>
	<CAEMrtYqVJJJN1d+PqKA7=aTBr-A6CZoeKKdKiXOTmRgMWeBErA@mail.gmail.com>
	<CA+TxYvNthdgzbzNUiD0jrQD1DGDh2sLGsuMY1avvzngxTGW_sQ@mail.gmail.com>
	<CAA6k8-+W+1DOeD4_8daPOYWDT5Bhi_-+wmbsLCYz8Qpy3SxqXw@mail.gmail.com>
Message-ID: <CA+TxYvN0_MuTTm-aBUO4M+uvU0j2E2Tt58S4Gb5--Jk7HkoWDA@mail.gmail.com>

On Wed, Jan 16, 2013 at 9:46 AM, Giuseppe Sucameli
<brush.tyler at gmail.com> wrote:
> On Wed, Jan 16, 2013 at 12:18 PM, Etienne Tourigny
> <etourigny.dev at gmail.com> wrote:
>> Regarding the integration of the save as dialog in gdaltools, I had
>> some interaction with Giuseppe Sucameli  but we got sidetracked, it
>> would be nice to finish this before 2.0.
>
> I don't know whether (and where) we was stuck, but I agree it's
> time to bring it forward (let's open a new thread).
> Integration must be one of the QGIS 2.0's keywords.

I guess we both forgot about it.  Looking now into a github thread, I
didn't respond to your question...
https://github.com/etiennesky/Quantum-GIS/commit/46008c4a35cd06fda240b86566cabf36505a615a#commitcomment-1977935

Looking in there I see a number of small changes I had done to the sip
bindings and resampling methods, I will clean this up and update to
latest master and create a new branch in my github, and post it here.

Etienne

>
> Cheers.
> Giuseppe.
>
>>
>> Etienne
>>
>>>
>>> Radim
>>>
>>>> AFAIK in Qgis 1.8 there's no mechanism to do that.
>>>>
>>>> giovanni
>>>>
>>>> [1] http://www.qgis.org/api/classQgsRasterFileWriter.html
>>>>
>>>> Sent from Nexus
>>>>
>>>> Il giorno 13/gen/2013 17:10, "Victor Olaya" <volayaf at gmail.com> ha scritto:
>>>>
>>>>> Hi all
>>>>>
>>>>> I have just implemented a new mechanism in SEXTANTE to make handling
>>>>> of file formats more clear and easy. Now, no matter what provider is
>>>>> creating a vector layer, all formats supported by QGIS can be
>>>>> selected, without requiring anything special added to the algorithm
>>>>> provider. SEXTANTE takes care of converting if needed.
>>>>>
>>>>> I want to implement the same thing for raster layers, but I do not
>>>>> know how to export a raster layer into a given format (except by
>>>>> calling GDAL translate), and I need it for that.. Can any one give me
>>>>> an idea or point me to some code to do that?
>>>>>
>>>>> Thanks in advance!
>>>>>
>>>>> Victor
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
> Giuseppe Sucameli

From juan_lucas_dr at yahoo.com  Wed Jan 16 04:32:25 2013
From: juan_lucas_dr at yahoo.com (=?iso-8859-1?Q?Juan_Lucas_Dom=EDnguez_Rubio?=)
Date: Wed, 16 Jan 2013 04:32:25 -0800 (PST)
Subject: [Qgis-developer] (no subject)
Message-ID: <1358339545.13240.YahooMailNeo@web125002.mail.ne1.yahoo.com>

http://www.cfbweb.de/tmp/resmpl.php !
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130116/0558a05b/attachment.html>

From custard at westnet.com.au  Wed Jan 16 07:05:23 2013
From: custard at westnet.com.au (=?iso-8859-1?Q?Ramon_Andi=F1ach?=)
Date: Wed, 16 Jan 2013 23:05:23 +0800
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
	spatialite versions (ECW tangent)
In-Reply-To: <CAC8_qeYjz53MVfj3XUahKTcA+MivHj5AfeMeSPcWN-8sLSvPPg@mail.gmail.com>
References: <7C0A9EA7588C0D418C82042EED8127CA5335D3@AKLSVR1.synakl.local>
	<EC9D4785-D502-4228-A614-00FABC547BBF@westnet.com.au>
	<1F855D44-CDCF-400B-8AF7-C8C525D7AD4A@westnet.com.au>
	<CAC8_qeYjz53MVfj3XUahKTcA+MivHj5AfeMeSPcWN-8sLSvPPg@mail.gmail.com>
Message-ID: <69B6FC13-1441-4BA1-9CE4-5B98254AD4FD@westnet.com.au>


On 16/01/2013, at 15:23 , Ted wrote:

> just minor correction in your letter, Chris is "Product" manager for ECW

Noted. I'll fix that before sending it off.


> Just as I note, they have Read Only version of the SDK and also have few other editions;
> 
> ERDAS ECW/JP2 SDK is offered as four different editions:
> 
> 	? ERDAS ECW/JP2 SDK Server Read-Write provides tools to enable server applications to read ECW, ECWP, and JPEG2000 data, serve ECW and JPEG2000 data, and compress images into the ECW and JPEG2000 data formats.
> 	? ERDAS ECW/JP2 SDK Server Read-Only provides tools to enable end-user server applications to read ECW, ECWP and JPEG2000 data and serve ECW and JPEG2000 data via third-party server applications. For ESRI ArcGIS Server customers, please refer to ECW for ArcGIS Server.
> 	? ERDAS ECW/JP2 SDK Desktop Read-Write provides tools to enable desktop applications to read ECW, ECWP and JPEG2000 and compress images into ECW and JPEG2000 data formats.
> 	? ERDAS ECW/JP2 SDK Desktop Read-Only is a free product that provides tools to enable desktop applications to read ECW, ECWP and JPEG2000.
> 
> Since this is a major shift from the 3.3 SDK which allowed WRITE function upto 500MB, we could use without much of a problem. After hexagon, there has been lot of changes and also the licensing of SDK.
> 
> At the moment, for GDAL and well and general QGIS user, what we are looking at is, DESKTOP READ ONLY SDK where by users could use ECW files in QGIS. 
> 
> So, we need to be very specif about this.
> 
> They will never allow GDAL or anyone else to use the library for ECW Serving function, without $$$$$. So, dont even bother to ask.
See notes below.

> So, with GDAL, we should make a point to mark ECW as Read only format.
No. Currently that is only the situation for *windows* users, as everyone else is still using the 3.3 SDK, which as you note allows writing.
----

1. I thought it was reasonably clear that I was talking about the Desktop Read-Only SDK. If it's not, please say so.
I haven't made reference to any other of the licences in the explanation or the questions.

2. If I understand from Paolo and previously J?rgen, the really big sticking point is that it is possible to install a QGIS server on a GDAL with the desktop SDK plugged in. Depending on who's responsible for the correct use of the SDK defines the ease of which the ECW-plugin can be put back into service. So the clarifying questions 3 and 4 are in that sense the important ones.

If the responsible party is people like me (the user end) then a big fat warning as you suggest will probably do. Have to see what they say.
If the responsible party is the developer end, then the problem is *much* more difficult, as there would need to be ways built in to make sure that the desktop only part was *not* contravened. (As a User I can see this is complicated. Money may help, but it's also an ethical thing too.)

3. In light of the above I felt that the explanation leading into the questions was important to give a sense of where the questions were coming from.

Questions 1 and 2, we probably know the answers to, but it would be good to see if we can get straight answers on them.
Questions 3 and 4 are the important ones.
Questions 5 and 6 are requests for information.[1]

5. I've not even asked about the requirement to support both ECW and ECWP... This is pretty much a secondary hurdle to me.

6. I'm was about to head for bed so apologies if this is not as sensible as I'd like. I thought having my thoughts (such as they are) out while most others are awake would be worth it.

-ramon.
[1] Current version (with revisions based on Alister's earlier comments) is now here: https://www.dropbox.com/s/b5wclxeheeh4act/QuestionsForIntergraph2012i16

From juan_lucas_dr at yahoo.com  Wed Jan 16 08:50:49 2013
From: juan_lucas_dr at yahoo.com (=?iso-8859-1?Q?Juan_Lucas_Dom=EDnguez_Rubio?=)
Date: Wed, 16 Jan 2013 08:50:49 -0800 (PST)
Subject: [Qgis-developer] Sorry for the junk mail
Message-ID: <1358355049.37975.YahooMailNeo@web125003.mail.ne1.yahoo.com>

Hello, my Yahoo account seems to have been attacked by a virus or intruder,?and an undesired junk email was sent from it at 13.32 CET today.?Sorry for the inconvenience.

Regards,
Juan Lucas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130116/55a19fc3/attachment.html>

From Alister.Hood at synergine.com  Wed Jan 16 11:09:06 2013
From: Alister.Hood at synergine.com (Alister Hood)
Date: Wed, 16 Jan 2013 19:09:06 +0000
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK with
 spatialite versions (ECW tangent)
Message-ID: <7C0A9EA7588C0D418C82042EED8127CA535733@AKLSVR1.synakl.local>

> Date: Wed, 16 Jan 2013 23:05:23 +0800
> From: Ramon Andi?ach <custard at westnet.com.au>
> To: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK
>         with    spatialite versions (ECW tangent)
> Message-ID: <69B6FC13-1441-4BA1-9CE4-5B98254AD4FD at westnet.com.au>
> Content-Type: text/plain; charset=windows-1252
>?
>?
> On 16/01/2013, at 15:23 , Ted wrote:
>?
> > just minor correction in your letter, Chris is "Product" manager for ECW
>?
> Noted. I'll fix that before sending it off.
>?
>?
> > Just as I note, they have Read Only version of the SDK and also have few other editions;
> >
> > ERDAS ECW/JP2 SDK is offered as four different editions:
> >
> >       ? ERDAS ECW/JP2 SDK Server Read-Write provides tools to enable server applications to read ECW, ECWP, and JPEG2000 data, serve ECW and JPEG2000 data, and compress images into the ECW and JPEG2000 data formats.
> >       ? ERDAS ECW/JP2 SDK Server Read-Only provides tools to enable end-user server applications to read ECW, ECWP and JPEG2000 data and serve ECW and JPEG2000 data via third-party server applications. For ESRI ArcGIS Server customers, please refer to ECW for ArcGIS Server.
> >       ? ERDAS ECW/JP2 SDK Desktop Read-Write provides tools to enable desktop applications to read ECW, ECWP and JPEG2000 and compress images into ECW and JPEG2000 data formats.
> >       ? ERDAS ECW/JP2 SDK Desktop Read-Only is a free product that provides tools to enable desktop applications to read ECW, ECWP and JPEG2000.
> >
> > Since this is a major shift from the 3.3 SDK which allowed WRITE function upto 500MB, we could use without much of a problem. After hexagon, there has been lot of changes and also the licensing of SDK.
> >
> > At the moment, for GDAL and well and general QGIS user, what we are looking at is, DESKTOP READ ONLY SDK where by users could use ECW files in QGIS.
> >
> > So, we need to be very specif about this.
> >
> > They will never allow GDAL or anyone else to use the library for ECW Serving function, without $$$$$. So, dont even bother to ask.
> See notes below.
> 
> > So, with GDAL, we should make a point to mark ECW as Read only format.
> No. Currently that is only the situation for *windows* users, as everyone else is still using the 3.3 SDK, which as you note allows writing.

Of course, on Windows gdal ecw can be used for a server or with write support if you do want to spend the money.
?
> 1. I thought it was reasonably clear that I was talking about the Desktop Read-Only SDK. If it's not, please say so.
> I haven't made reference to any other of the licences in the explanation or the questions.
>?
> 2. If I understand from Paolo and previously J?rgen, the really big sticking point is that it is possible to install a QGIS server on a GDAL with the desktop SDK plugged in. Depending on who's responsible for the correct use of the SDK defines the ease of which the ECW-plugin can be put back into service. So the clarifying questions 3 and 4 are in that sense the important ones.
>?
> If the responsible party is people like me (the user end) then a big fat warning as you suggest will probably do. Have to see what they say.
> If the responsible party is the developer end, then the problem is *much* more difficult, as there would need to be ways built in to make sure that the desktop only part was *not* contravened. (As a User I can see this is complicated. Money may help, but it's also an ethical thing too.)
>?
> 3. In light of the above I felt that the explanation leading into the questions was important to give a sense of where the questions were coming from.
>?
> Questions 1 and 2, we probably know the answers to, but it would be good to see if we can get straight answers on them.
> Questions 3 and 4 are the important ones.
> Questions 5 and 6 are requests for information.[1]
>?
> 5. I've not even asked about the requirement to support both ECW and ECWP... This is pretty much a secondary hurdle to me.

Note that GDAL does support ECWP, so I think even if the QGIS gui does not provide a way to load it, that should be possible from the Python console or using a GDAL "service description" XML file or a .vrt file.  But I haven't tested as I've never come across ecwp in the wild...
?
> 6. I'm was about to head for bed so apologies if this is not as sensible as I'd like. I thought having my thoughts (such as they are) out while most others are awake would be worth it.
>?
> -ramon.
> [1] Current version (with revisions based on Alister's earlier comments) is now here: https://www.dropbox.com/s/b5wclxeheeh4act/QuestionsForIntergraph2012i16

From wonder.sk at gmail.com  Wed Jan 16 13:13:04 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed, 16 Jan 2013 22:13:04 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <50F5DC51.8050006@gmx.ch>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50F5DC51.8050006@gmx.ch>
Message-ID: <CAC2XbFfZoz4p3MXVnyKFGergs8bvroNBG-K3rBa4V8zZm+KtCw@mail.gmail.com>

Hi Matthias

On Tue, Jan 15, 2013 at 11:46 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
> Hi Martin,
>
> This mail concerns the vectorlayercache outlined in section 8) of your mail.
>
> I'm currently working on the attribute table which has some internal caching
> already. As I'm currently rewriting the attribute table, I moved this code
> outside and generalized it as good as possible. This work is currently
> available in my branch vectorlayercache [0]. Do you think this could be used
> instead of your geometry cache? It should be able to cache geometries of
> features (although I only tested attributes so far) and update and
> invalidate them if required.
>
> I have also the idea to create a QgsVectorDataProviderCacheProxy class which
> inherits QgsVectorDataProvider and which you can use as a proxy between your
> app and the DataProvider. I've some unfinished code here which provides such
> functionality. But for now, the cache in front of the VectorLayer should
> already help a lot.

Just out of curiosity, what are you rewriting in the attribute table -
is it just the cache or does it involve more changes?

Your idea of having a cache proxy vector data provider is interesting.
Such transparent approach would enable us to remove caching from
vector data provider implementations (e.g. wfs) and transparently add
caching to the ones where caching would be useful (e.g.
delimitedtext). I need to give it some more thoughts what impact that
would have.

The code for cache in your github repository implements cache with
feature ids as keys. That is useful for attribute table queries,
however for rendering it does not help much. In the cache we will need
also a spatial index for fast spatial queries used for map rendering,
identification and geometry editing. Without spatial index, the cache
is quite slow if the whole cache need to be traversed in order to find
features in a specified rectangle. As of now, the cache you've done is
bound to a one particular query it gets: I would be most interested in
a general cache to avoid having situations where cache would be filled
by results of a first query and then flushed and filled with results
of a following query.

The caching behavior should be ideally configurable: e.g. which
layers/providers to cache (probably we don't want to cache huge
layers), what to cache (everything / only geometries / only attributes
/ geometries and some attributes), cache size limit.

The next question is how to invalidate the cache, so that if data have
been changed in the backend, the user will not end up with a cached
version forever. In some providers I think it's possible to detect the
updates automatically, but some providers do not have any such
notifications. Maybe we should allow users to set a timeout - after
specified interval the cache would need to check again with the
backend whether the features have not been altered.

Back to your original question whether such improved cache could be
used instead of the current geometry cache: yes, it could, in case it
will include a spatial index. We are really in a need of a general
caching mechanism, so I would welcome any work in this area. The
speedup of rendering from cache should be significant. The current
caching of geometries is there just to preserve the functionality of
moveVertex() and other functions from vector layer that were using
cached geometries before.

Regards
Martin

From wonder.sk at gmail.com  Wed Jan 16 15:18:56 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 17 Jan 2013 00:18:56 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <50EBDCC9.9030506@gmx.ch>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
	<50EAB491.4010707@gmx.ch>
	<CAC2XbFcEkcaWn9Tcopd8whQ=Pz2ydMXa0zAKisTBWG1R9-9R+A@mail.gmail.com>
	<50EBDCC9.9030506@gmx.ch>
Message-ID: <CAC2XbFfQ3WWT6gRhxK944ujo2rrfZdJiyX3hBZc_VLwKgdJwvg@mail.gmail.com>

On Tue, Jan 8, 2013 at 9:46 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>
> Layers are rendered correctly again.
>
> However, dataProvider.getFeatures() doesn't return any features in my plugin
> ( the same instructions used to work before your last two commits ).

Matthias,
my recent update to feature iterators should fix this and some more issues, see:

https://github.com/qgis/Quantum-GIS/commit/a6c5fd875bc73e4775b825640a7cedcc2f5a8832

The default behavior for providers is now that they close any previous
active iterator. Later I will be adding a new provider capability
where the provider could state that it supports concurrent iterators.

Regards
Martin

From matthias.kuhn at gmx.ch  Wed Jan 16 23:26:14 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 17 Jan 2013 08:26:14 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFfZoz4p3MXVnyKFGergs8bvroNBG-K3rBa4V8zZm+KtCw@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50F5DC51.8050006@gmx.ch>
	<CAC2XbFfZoz4p3MXVnyKFGergs8bvroNBG-K3rBa4V8zZm+KtCw@mail.gmail.com>
Message-ID: <50F7A796.7030907@gmx.ch>

Hi Martin,

see answers below

On 01/16/2013 10:13 PM, Martin Dobias wrote:
> Hi Matthias
>
> On Tue, Jan 15, 2013 at 11:46 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>> Hi Martin,
>>
>> This mail concerns the vectorlayercache outlined in section 8) of your mail.
>>
>> I'm currently working on the attribute table which has some internal caching
>> already. As I'm currently rewriting the attribute table, I moved this code
>> outside and generalized it as good as possible. This work is currently
>> available in my branch vectorlayercache [0]. Do you think this could be used
>> instead of your geometry cache? It should be able to cache geometries of
>> features (although I only tested attributes so far) and update and
>> invalidate them if required.
>>
>> I have also the idea to create a QgsVectorDataProviderCacheProxy class which
>> inherits QgsVectorDataProvider and which you can use as a proxy between your
>> app and the DataProvider. I've some unfinished code here which provides such
>> functionality. But for now, the cache in front of the VectorLayer should
>> already help a lot.
> Just out of curiosity, what are you rewriting in the attribute table -
> is it just the cache or does it involve more changes?

Have a look at the dual view discussion on this list. It's explained 
more there.
>
> Your idea of having a cache proxy vector data provider is interesting.
> Such transparent approach would enable us to remove caching from
> vector data provider implementations (e.g. wfs) and transparently add
> caching to the ones where caching would be useful (e.g.
> delimitedtext). I need to give it some more thoughts what impact that
> would have.
Let me know when you do. I have now implemented such a thing in my 
plugin and would love to have this functionality in core.
>
> The code for cache in your github repository implements cache with
> feature ids as keys. That is useful for attribute table queries,
> however for rendering it does not help much. In the cache we will need
> also a spatial index for fast spatial queries used for map rendering,
> identification and geometry editing. Without spatial index, the cache
> is quite slow if the whole cache need to be traversed in order to find
> features in a specified rectangle. As of now, the cache you've done is
> bound to a one particular query it gets: I would be most interested in
> a general cache to avoid having situations where cache would be filled
> by results of a first query and then flushed and filled with results
> of a following query.
Yes it is bound to feature ids by now. My idea was, that you will keep 
track of keys of features of interest anyway. Let's say, the keys of 
features of a particular rectangle.

> The caching behavior should be ideally configurable: e.g. which
> layers/providers to cache (probably we don't want to cache huge
> layers), what to cache (everything / only geometries / only attributes
> / geometries and some attributes), cache size limit.
My cache approach does most of this: only geometries, only attributes or 
both (A subset of attributes is still solved unsatisfactory, but that 
wouldn't be too hard to add) and cache limits. The only thing missing is 
the possibility to configure which layers to cache (Needs to be a higher 
level approach maybe? Layer settings?)
>
> The next question is how to invalidate the cache, so that if data have
> been changed in the backend, the user will not end up with a cached
> version forever. In some providers I think it's possible to detect the
> updates automatically, but some providers do not have any such
> notifications. Maybe we should allow users to set a timeout - after
> specified interval the cache would need to check again with the
> backend whether the features have not been altered.
It would be nice to get this information from providers which do have 
the possibility, for others, see below.
>
> Back to your original question whether such improved cache could be
> used instead of the current geometry cache: yes, it could, in case it
> will include a spatial index. We are really in a need of a general
> caching mechanism, so I would welcome any work in this area. The
> speedup of rendering from cache should be significant. The current
> caching of geometries is there just to preserve the functionality of
> moveVertex() and other functions from vector layer that were using
> cached geometries before.

To solve these problems I was thinking about adding an abstract 
interface ( QgsCachItemManager or something) which provides at least the 
method
* bool requiresCaching( QgsFeature& )

It could then also be extended to check if the cache is able to answer a 
certain select operation (in which case it would return a QgsFeatureIds 
list). So it could keep track of a spatial index, cache age and so on. 
Speak custom tailored caching depending on the special use-case. 
Accomplishing that would require some small internal changes, as we need 
to keep track of removed items. It's using QCache now, which as far as I 
know does not communicate, when a certain item is removed (it cleans 
silently). So either we'd have to replace QCache by some other mechanism 
or let the cache-item destructor emit this signal.

I have to say, that I'm a bit limited in time. At the moment, the 
attribute editor has a higher priority for me (I would really like to 
have this ready by 2.0) so the caching was more of a side-effect.

>
> Regards
> Martin
Regards
Matthias

From denis.rouzaud at gmail.com  Thu Jan 17 02:01:35 2013
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 17 Jan 2013 11:01:35 +0100
Subject: [Qgis-developer] identify tool for plugins
Message-ID: <50F7CBFF.3000906@gmail.com>

Hi all,

I have just pushed a new plugin to edit geometry as plain WKT text [0].

Basically, it works as the identify tool: if a feature is found, a 
dialog shows up with the WKT, which is editable if the layer is editable.

I have one main concern regarding the behaviour of my plugin.
I use QgsMapToolEmitPoint.
The feature is found using the current active layer  in the canvas and 
by a select using a rectangle.
Therefore, the user has to choose the right layer before identifying and 
moreover, an invisible feature on the map can be identified.

I just wonder if it would be possible to use the same procedure as 
identify does in a plugin and doing another action than opening the 
attribute editor.

Maybe something like
canvas.setMapTool(QgsIdentifyTool, MyAction)

I thing this could be very useful for many plugin devs.

If I missed something and it already exists, please let me know...

Thanks a lot

Denis


[0] Demo at http://www.youtube.com/watch?v=9-ygwMw72Ww&hd=1




From cavallini at faunalia.it  Thu Jan 17 02:35:44 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 17 Jan 2013 11:35:44 +0100
Subject: [Qgis-developer] v.delaunay not working on sextante?
Message-ID: <50F7D400.1010403@faunalia.it>

It produces areas, but fails in producing lines (I get an empty layer).
Anyone confirms? Ticket?
All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From dassau at gbd-consult.de  Thu Jan 17 06:54:44 2013
From: dassau at gbd-consult.de (Otto Dassau)
Date: Thu, 17 Jan 2013 15:54:44 +0100
Subject: [Qgis-developer] select a loaded raster layer from qgis legend into
	python plugin
Message-ID: <20130117155444.6bd5a326@gbdlaptop.speedport.ip>

Hi,

I would like to write a small python plugin to analyse some raster data,
but I haven't managed to select a loaded layer yet. I searched the howtos and
found several simple examples about:

# get the currently active layer
  layer = self.iface.mapCanvas().currentLayer()

but as I said I would like to select one of the loaded raster layers from the
qgis legend using a QtGui.QComboBox in the plugin dialog. At the moment I
tried the getRasterLayersNames() function I found in several other plugins
but it seems I am missing something, because the raster layers are not
selectable. Can someone point me to a simple example to understand the
general procedure?

Thanks a lot
Otto






From matthias.kuhn at gmx.ch  Thu Jan 17 07:21:51 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 17 Jan 2013 16:21:51 +0100
Subject: [Qgis-developer] select a loaded raster layer from qgis legend
 into python plugin
In-Reply-To: <20130117155444.6bd5a326@gbdlaptop.speedport.ip>
References: <20130117155444.6bd5a326@gbdlaptop.speedport.ip>
Message-ID: <1358436111.29964.1.camel@kk-office.gslwd>

Hi Otto,

here a small extract from a plugin I wrote:

Just check for the layer type to only list raster layers

    def initLayerCombobox(self,combobox, default):
        reg = QgsMapLayerRegistry.instance()
        for ( key, layer ) in reg.mapLayers().iteritems():
            combobox.addItem( layer.name(), key )
        
        idx = combobox.findData( default )
        if idx != -1:
            combobox.setCurrentIndex( idx )

Regards

On Thu, 2013-01-17 at 15:54 +0100, Otto Dassau wrote:
> Hi,
> 
> I would like to write a small python plugin to analyse some raster data,
> but I haven't managed to select a loaded layer yet. I searched the howtos and
> found several simple examples about:
> 
> # get the currently active layer
>   layer = self.iface.mapCanvas().currentLayer()
> 
> but as I said I would like to select one of the loaded raster layers from the
> qgis legend using a QtGui.QComboBox in the plugin dialog. At the moment I
> tried the getRasterLayersNames() function I found in several other plugins
> but it seems I am missing something, because the raster layers are not
> selectable. Can someone point me to a simple example to understand the
> general procedure?
> 
> Thanks a lot
> Otto
> 
> 
> 
> 
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer



From dassau at gbd-consult.de  Thu Jan 17 08:07:25 2013
From: dassau at gbd-consult.de (Otto Dassau)
Date: Thu, 17 Jan 2013 17:07:25 +0100
Subject: [Qgis-developer] select a loaded raster layer from qgis legend
 into python plugin
In-Reply-To: <1358436111.29964.1.camel@kk-office.gslwd>
References: <20130117155444.6bd5a326@gbdlaptop.speedport.ip>
	<1358436111.29964.1.camel@kk-office.gslwd>
Message-ID: <20130117170725.0af0121f@gbdlaptop.speedport.ip>

Hi Matthias,

thanks for your help. I guess it is similar to what I found?

def getRasterLayersNames():
	layerList = []
	layerMap = QgsMapLayerRegistry.instance().mapLayers()
    	for name, layer in layerMap.iteritems():
        	if layer.type() == QgsMapLayer.RasterLayer and
		  ( layer.usesProvider() and layer.providerKey() ==
		  'gdal' ): layerList.append( unicode( layer.name()))
		return layerList

If I understand correctly your function selects all raster layers from
QgsMapLayerRegistry. Now I would like to visualize the layer list in the
combobox (InRastA) of the plugin dialog file. I found something that works
for vector layers:

	def manageGui(self):
	        myList = []
	        self.ui.InRastA.clear()
	        myList = initLayerCombobox()
	        self.ui.InRastA.addItems( myList )
	        return 

But is doesn't work for raster that way, if I use your function. How is it
possible to make the raster layers selectable / show up in the plugin dialog?

Regards
Otto

Am Thu, 17 Jan 2013 16:21:51 +0100
schrieb Matthias Kuhn <matthias.kuhn at gmx.ch>:

> Hi Otto,
> 
> here a small extract from a plugin I wrote:
> 
> Just check for the layer type to only list raster layers
> 
>     def initLayerCombobox(self,combobox, default):
>         reg = QgsMapLayerRegistry.instance()
>         for ( key, layer ) in reg.mapLayers().iteritems():
>             combobox.addItem( layer.name(), key )
>         
>         idx = combobox.findData( default )
>         if idx != -1:
>             combobox.setCurrentIndex( idx )
> 
> Regards
> 
> On Thu, 2013-01-17 at 15:54 +0100, Otto Dassau wrote:
> > Hi,
> > 
> > I would like to write a small python plugin to analyse some raster data,
> > but I haven't managed to select a loaded layer yet. I searched the
> > howtos and found several simple examples about:
> > 
> > # get the currently active layer
> >   layer = self.iface.mapCanvas().currentLayer()
> > 
> > but as I said I would like to select one of the loaded raster layers
> > from the qgis legend using a QtGui.QComboBox in the plugin dialog. At
> > the moment I tried the getRasterLayersNames() function I found in
> > several other plugins but it seems I am missing something, because the
> > raster layers are not selectable. Can someone point me to a simple
> > example to understand the general procedure?
> > 
> > Thanks a lot
> > Otto


From matthias.kuhn at gmx.ch  Thu Jan 17 08:24:43 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 17 Jan 2013 17:24:43 +0100
Subject: [Qgis-developer] select a loaded raster layer from qgis legend
 into python plugin
In-Reply-To: <20130117170725.0af0121f@gbdlaptop.speedport.ip>
References: <20130117155444.6bd5a326@gbdlaptop.speedport.ip>
	<1358436111.29964.1.camel@kk-office.gslwd>
	<20130117170725.0af0121f@gbdlaptop.speedport.ip>
Message-ID: <50F825CB.9000905@gmx.ch>

Hi Otto,

Try this

class MyPluginDialog (QDialog,Ui_MyPluginDialog)::
     def __init__(self):
         self.setupUi(self)
         self.initLayerCombobox( self.ui.InRastA, 'key_of_default_layer' )

     def initLayerCombobox(self,combobox, default):
         combobox.clear()
         reg = QgsMapLayerRegistry.instance()
         for ( key, layer ) in reg.mapLayers().iteritems():
             if layer.type() == QgsMapLayer.RasterLayer and ( layer.usesProvider() and layer.providerKey() == 'gdal' ):
                 combobox.addItem( layer.name(), key )
         
         idx = combobox.findData( default )
         if idx != -1:
             combobox.setCurrentIndex( idx )


Matthias

On 01/17/2013 05:07 PM, Otto Dassau wrote:
> Hi Matthias,
>
> thanks for your help. I guess it is similar to what I found?
>
> def getRasterLayersNames():
> 	layerList = []
> 	layerMap = QgsMapLayerRegistry.instance().mapLayers()
>      	for name, layer in layerMap.iteritems():
>          	if layer.type() == QgsMapLayer.RasterLayer and
> 		  ( layer.usesProvider() and layer.providerKey() ==
> 		  'gdal' ): layerList.append( unicode( layer.name()))
> 		return layerList
>
> If I understand correctly your function selects all raster layers from
> QgsMapLayerRegistry. Now I would like to visualize the layer list in the
> combobox (InRastA) of the plugin dialog file. I found something that works
> for vector layers:
>
> 	def manageGui(self):
> 	        myList = []
> 	        self.ui.InRastA.clear()
> 	        myList = initLayerCombobox()
> 	        self.ui.InRastA.addItems( myList )
> 	        return
>
> But is doesn't work for raster that way, if I use your function. How is it
> possible to make the raster layers selectable / show up in the plugin dialog?
>
> Regards
> Otto
>
> Am Thu, 17 Jan 2013 16:21:51 +0100
> schrieb Matthias Kuhn <matthias.kuhn at gmx.ch>:
>
>> Hi Otto,
>>
>> here a small extract from a plugin I wrote:
>>
>> Just check for the layer type to only list raster layers
>>
>>      def initLayerCombobox(self,combobox, default):
>>          reg = QgsMapLayerRegistry.instance()
>>          for ( key, layer ) in reg.mapLayers().iteritems():
>>              combobox.addItem( layer.name(), key )
>>          
>>          idx = combobox.findData( default )
>>          if idx != -1:
>>              combobox.setCurrentIndex( idx )
>>
>> Regards
>>
>> On Thu, 2013-01-17 at 15:54 +0100, Otto Dassau wrote:
>>> Hi,
>>>
>>> I would like to write a small python plugin to analyse some raster data,
>>> but I haven't managed to select a loaded layer yet. I searched the
>>> howtos and found several simple examples about:
>>>
>>> # get the currently active layer
>>>    layer = self.iface.mapCanvas().currentLayer()
>>>
>>> but as I said I would like to select one of the loaded raster layers
>>> from the qgis legend using a QtGui.QComboBox in the plugin dialog. At
>>> the moment I tried the getRasterLayersNames() function I found in
>>> several other plugins but it seems I am missing something, because the
>>> raster layers are not selectable. Can someone point me to a simple
>>> example to understand the general procedure?
>>>
>>> Thanks a lot
>>> Otto
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From cavallini at faunalia.it  Thu Jan 17 08:32:59 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 17 Jan 2013 17:32:59 +0100
Subject: [Qgis-developer] (no subject)
Message-ID: <50F827BB.2060105@faunalia.it>

Hi all.
Got a strange problem:

* import (-o) the .asc file from  https://www.dropbox.com/s/w60ywwddl3aj03h/cavallini.zip
* r.to.vect (you can see the results of these operations in the location, in the zip
above)

Display rasters (original and imported) and vector in QGIS.

Results: the original raster and the derived vector align perfectly, the imported
raster shows shifts while zooming in and out. See attached screenshots as an example.

Additionally, in qgis-dev I get errors querying the raster: 168 bytes expected but
3200000 byte were read from qgis.d.rast

Tested on 3 different machines (Debian Unstable, Ubuntu, Windows).

Any hint?

All the best.
-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

From dassau at gbd-consult.de  Thu Jan 17 08:40:41 2013
From: dassau at gbd-consult.de (Otto Dassau)
Date: Thu, 17 Jan 2013 17:40:41 +0100
Subject: [Qgis-developer] select a loaded raster layer from qgis legend
 into python plugin
In-Reply-To: <50F825CB.9000905@gmx.ch>
References: <20130117155444.6bd5a326@gbdlaptop.speedport.ip>
	<1358436111.29964.1.camel@kk-office.gslwd>
	<20130117170725.0af0121f@gbdlaptop.speedport.ip>
	<50F825CB.9000905@gmx.ch>
Message-ID: <20130117174041.608ec50e@gbdlaptop.speedport.ip>

Hi Matthias,

that works. Thanks a lot!

Regards
Otto

Am Thu, 17 Jan 2013 17:24:43 +0100
schrieb Matthias Kuhn <matthias.kuhn at gmx.ch>:

> Hi Otto,
> 
> Try this
> 
> class MyPluginDialog (QDialog,Ui_MyPluginDialog)::
>      def __init__(self):
>          self.setupUi(self)
>          self.initLayerCombobox( self.ui.InRastA, 'key_of_default_layer' )
> 
>      def initLayerCombobox(self,combobox, default):
>          combobox.clear()
>          reg = QgsMapLayerRegistry.instance()
>          for ( key, layer ) in reg.mapLayers().iteritems():
>              if layer.type() == QgsMapLayer.RasterLayer and
> ( layer.usesProvider() and layer.providerKey() == 'gdal' ):
> combobox.addItem( layer.name(), key ) 
>          idx = combobox.findData( default )
>          if idx != -1:
>              combobox.setCurrentIndex( idx )
> 
> 
> Matthias
> 
> On 01/17/2013 05:07 PM, Otto Dassau wrote:
> > Hi Matthias,
> >
> > thanks for your help. I guess it is similar to what I found?
> >
> > def getRasterLayersNames():
> > 	layerList = []
> > 	layerMap = QgsMapLayerRegistry.instance().mapLayers()
> >      	for name, layer in layerMap.iteritems():
> >          	if layer.type() == QgsMapLayer.RasterLayer and
> > 		  ( layer.usesProvider() and layer.providerKey() ==
> > 		  'gdal' ): layerList.append( unicode( layer.name()))
> > 		return layerList
> >
> > If I understand correctly your function selects all raster layers from
> > QgsMapLayerRegistry. Now I would like to visualize the layer list in the
> > combobox (InRastA) of the plugin dialog file. I found something that
> > works for vector layers:
> >
> > 	def manageGui(self):
> > 	        myList = []
> > 	        self.ui.InRastA.clear()
> > 	        myList = initLayerCombobox()
> > 	        self.ui.InRastA.addItems( myList )
> > 	        return
> >
> > But is doesn't work for raster that way, if I use your function. How is
> > it possible to make the raster layers selectable / show up in the plugin
> > dialog?
> >
> > Regards
> > Otto
> >
> > Am Thu, 17 Jan 2013 16:21:51 +0100
> > schrieb Matthias Kuhn <matthias.kuhn at gmx.ch>:
> >
> >> Hi Otto,
> >>
> >> here a small extract from a plugin I wrote:
> >>
> >> Just check for the layer type to only list raster layers
> >>
> >>      def initLayerCombobox(self,combobox, default):
> >>          reg = QgsMapLayerRegistry.instance()
> >>          for ( key, layer ) in reg.mapLayers().iteritems():
> >>              combobox.addItem( layer.name(), key )
> >>          
> >>          idx = combobox.findData( default )
> >>          if idx != -1:
> >>              combobox.setCurrentIndex( idx )
> >>
> >> Regards
> >>
> >> On Thu, 2013-01-17 at 15:54 +0100, Otto Dassau wrote:
> >>> Hi,
> >>>
> >>> I would like to write a small python plugin to analyse some raster
> >>> data, but I haven't managed to select a loaded layer yet. I searched
> >>> the howtos and found several simple examples about:
> >>>
> >>> # get the currently active layer
> >>>    layer = self.iface.mapCanvas().currentLayer()
> >>>
> >>> but as I said I would like to select one of the loaded raster layers
> >>> from the qgis legend using a QtGui.QComboBox in the plugin dialog. At
> >>> the moment I tried the getRasterLayersNames() function I found in
> >>> several other plugins but it seems I am missing something, because the
> >>> raster layers are not selectable. Can someone point me to a simple
> >>> example to understand the general procedure?
> >>>
> >>> Thanks a lot
> >>> Otto
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Geoinformatik B?ro Dassau - http://www.gbd-consult.de
FOSSGIS consulting , training , support  and analysis
Ackerstrasse 144c  ,  D - 40233 D?sseldorf ,  Germany
Tel: +49-(0)211-47468178 , Mobile: +49-(0)171-4687540

--
Community Advisor - QGIS Project Steering Committee

From p0cisk at o2.pl  Thu Jan 17 11:37:29 2013
From: p0cisk at o2.pl (p0cisk)
Date: Thu, 17 Jan 2013 11:37:29 -0800 (PST)
Subject: [Qgis-developer] identify tool for plugins
In-Reply-To: <50F7CBFF.3000906@gmail.com>
References: <50F7CBFF.3000906@gmail.com>
Message-ID: <1358451449017-5028198.post@n6.nabble.com>

Hi Denis
Thanks for your plugin, it's very useful.

When I have a large feature to display and layer isn't in edit mode (edit is
disabeld) I can't scroll edit to see all coords, also copy is impossible.
Maybe you could replace setEnabled with setReadOnly flag - this would solve
problem and prevent user to change something when edit mode of layer is
disabled.

Also, maybe you could add possibility to add new features to layer from WKT
string (something like QuickWKT but adding to existing layer).

Regards
Peter



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/identify-tool-for-plugins-tp5028065p5028198.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From Bob.Bruce at gov.mb.ca  Thu Jan 17 14:07:55 2013
From: Bob.Bruce at gov.mb.ca (Bruce, Bob (CON))
Date: Thu, 17 Jan 2013 16:07:55 -0600
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
Message-ID: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>

I am having trouble using the WCS capability in version 1.9.0 code revision f210668
Here are the full details of the QGIS version from the Help listing:

QGIS version			1.9.0-Master	QGIS code revision		f210668
Compiled against Qt		4.7.1			Running against Qt		4.7.1
Compiled against GDAL/OGR	1.9.2			Running against GDAL/OGR	1.9.2
GEOS Version			3.3.5			PostgreSQL Client Version	8.3.10
SpatiaLite Version		3.0.1			QWT Version				5.2.1
PROJ.4 Version			480			QScintilla2 Version		2.6.2
This copy of QGIS writes debugging output.

The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities

According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.

This is the request that they are finding in their server log:
	2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"

Is there a fix to this problem available in a later version of QGIS?

Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
	WCS provider: Cannot calculate extent
	(d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
	Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%	3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
	(d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)

Thanks,
	Bob Bruce

From: ekeighan [mailto:ekeighan at cubewerx.com] 
Sent: January-17-13 3:33 PM
To: Bruce, Bob (CON)
Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS

Bob,

FYI...

ekeighan at cubewerx.com wrote:

*Raster layer:* Provider is not valid (provider: wcs, URI: 
cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
(d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : 
QgsRasterLayer::setDataProvider)

Is there something at your end that could be changed to allow this to 
calculate the extent?
Looking through the server log, we see only the following related request
present twice:

2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"

---------------------------------------------------------------

This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
The Qgs error suggests that the base URL it's using is:

http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store

but it almost seems as though it was entered improperly as:

http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store

The WCS request received from the client produces an error return, since
the server has problems parsing the broken request:

<ExceptionReport version="1.1.0" xml:lang="en"
  xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
  <Exception exceptionCode="MissingParameterValue" locator="identifiers">
    <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
    <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
  </Exception>
</ExceptionReport>

The first request from the client should be just a proper GetCapabilities
request:

http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0

which returns the expected data.
-------------------------------------------------

Regards,

Edric

On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
Edric,
??????????? I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
?
WCS provider: Cannot calculate extent
(d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
(d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
?
Is there something at your end that could be changed to allow this to calculate the extent?
?
Thanks,
??????????? Bob

*******************************************************************************************************************
**??? Bob Bruce, FEC, P.Eng.???????? Geomatics Support Engineer
**??? Bob.Bruce at gov.mb.ca?????????? Geospatial Technology Services Management
**??? work # (204) 945-6636??????????????GeoManitoba, Manitoba Conservation and Water Stewardship
**??? FAX? # (204) 945-1365??? ?????????1007 Century Street,
**?????????????????????????????????????????? ???????Winnipeg, Manitoba, Canada, R3H 0W4
**????????????????????????????????????????????????? 49-54-31.85N,97-12-16.08W
**
**???????????? Check out our digital maps at: http://mli2.gov.mb.ca/
**???????????????? and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
*******************************************************************************************************************
?


From radim.blazek at gmail.com  Fri Jan 18 01:28:23 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Fri, 18 Jan 2013 10:28:23 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
Message-ID: <CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>

I don't see the same problem here. GetCapabilities and
DescribeCoverage are not mixed together here. Could it be that you
accidentally used GetCapabilities request URL as "URL" parameter in
connection details dialog and it was logged on server but that is
another issue?

I have got another error however. DescribeCoverage is successfully
received and parsed, then QGIS sends test GetCoverage request (10x10
raster to get more info):

http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10

and it fails on server side with:

"Gateway Time-out
The gateway did not receive a timely response from the upstream server
or application."

Because the request covers the whole extent, it could be that the
raster is quite large and there are no overviews/pyramids ready on
server, it starts to do resampling of the whole extent but it takes to
much time?

BTW, you can find some interesting info in QGIS Settings > Panels >
Log  Messages  - WCS tab or in debug messages. In log messages are
usually printed requests which failed and in debug messages are
printed all requests.

Radim

On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
> Here are the full details of the QGIS version from the Help listing:
>
> QGIS version                    1.9.0-Master    QGIS code revision              f210668
> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
> This copy of QGIS writes debugging output.
>
> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>
> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>
> This is the request that they are finding in their server log:
>         2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>
> Is there a fix to this problem available in a later version of QGIS?
>
> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>         WCS provider: Cannot calculate extent
>         (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>         Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>         (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>
> Thanks,
>         Bob Bruce
>
> From: ekeighan [mailto:ekeighan at cubewerx.com]
> Sent: January-17-13 3:33 PM
> To: Bruce, Bob (CON)
> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> Bob,
>
> FYI...
>
> ekeighan at cubewerx.com wrote:
>
> *Raster layer:* Provider is not valid (provider: wcs, URI:
> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
> QgsRasterLayer::setDataProvider)
>
> Is there something at your end that could be changed to allow this to
> calculate the extent?
> Looking through the server log, we see only the following related request
> present twice:
>
> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>
> ---------------------------------------------------------------
>
> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
> The Qgs error suggests that the base URL it's using is:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>
> but it almost seems as though it was entered improperly as:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>
> The WCS request received from the client produces an error return, since
> the server has problems parsing the broken request:
>
> <ExceptionReport version="1.1.0" xml:lang="en"
>   xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>   <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>     <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>     <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>   </Exception>
> </ExceptionReport>
>
> The first request from the client should be just a proper GetCapabilities
> request:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>
> which returns the expected data.
> -------------------------------------------------
>
> Regards,
>
> Edric
>
> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
> Edric,
>             I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>
> WCS provider: Cannot calculate extent
> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>
> Is there something at your end that could be changed to allow this to calculate the extent?
>
> Thanks,
>             Bob
>
> *******************************************************************************************************************
> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
> **    FAX  # (204) 945-1365             1007 Century Street,
> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
> **                                                  49-54-31.85N,97-12-16.08W
> **
> **             Check out our digital maps at: http://mli2.gov.mb.ca/
> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
> *******************************************************************************************************************
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From radim.blazek at gmail.com  Fri Jan 18 01:35:55 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Fri, 18 Jan 2013 10:35:55 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
Message-ID: <CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>

Hi again,

On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
> I don't see the same problem here. GetCapabilities and
> DescribeCoverage are not mixed together here. Could it be that you
> accidentally used GetCapabilities request URL as "URL" parameter in
> connection details dialog and it was logged on server but that is
> another issue?
>
> I have got another error however. DescribeCoverage is successfully
> received and parsed, then QGIS sends test GetCoverage request (10x10
> raster to get more info):
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>
> and it fails on server side with:
>
> "Gateway Time-out
> The gateway did not receive a timely response from the upstream server
> or application."
>
> Because the request covers the whole extent, it could be that the
> raster is quite large and there are no overviews/pyramids ready on
> server, it starts to do resampling of the whole extent but it takes to
> much time?

It really seems to be the problem, I have tried with smaller extent
and server sent a correct TIFF in response. In any case it takes very
long time.

Radim

> BTW, you can find some interesting info in QGIS Settings > Panels >
> Log  Messages  - WCS tab or in debug messages. In log messages are
> usually printed requests which failed and in debug messages are
> printed all requests.
>
> Radim
>
> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>> Here are the full details of the QGIS version from the Help listing:
>>
>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>> This copy of QGIS writes debugging output.
>>
>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>
>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>
>> This is the request that they are finding in their server log:
>>         2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>
>> Is there a fix to this problem available in a later version of QGIS?
>>
>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>         WCS provider: Cannot calculate extent
>>         (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>         Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>         (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>
>> Thanks,
>>         Bob Bruce
>>
>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>> Sent: January-17-13 3:33 PM
>> To: Bruce, Bob (CON)
>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>
>> Bob,
>>
>> FYI...
>>
>> ekeighan at cubewerx.com wrote:
>>
>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>> QgsRasterLayer::setDataProvider)
>>
>> Is there something at your end that could be changed to allow this to
>> calculate the extent?
>> Looking through the server log, we see only the following related request
>> present twice:
>>
>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>
>> ---------------------------------------------------------------
>>
>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>> The Qgs error suggests that the base URL it's using is:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>
>> but it almost seems as though it was entered improperly as:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>
>> The WCS request received from the client produces an error return, since
>> the server has problems parsing the broken request:
>>
>> <ExceptionReport version="1.1.0" xml:lang="en"
>>   xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>   <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>     <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>     <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>   </Exception>
>> </ExceptionReport>
>>
>> The first request from the client should be just a proper GetCapabilities
>> request:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>
>> which returns the expected data.
>> -------------------------------------------------
>>
>> Regards,
>>
>> Edric
>>
>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>> Edric,
>>             I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>
>> WCS provider: Cannot calculate extent
>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>
>> Is there something at your end that could be changed to allow this to calculate the extent?
>>
>> Thanks,
>>             Bob
>>
>> *******************************************************************************************************************
>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>> **    FAX  # (204) 945-1365             1007 Century Street,
>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>> **                                                  49-54-31.85N,97-12-16.08W
>> **
>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>> *******************************************************************************************************************
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From radim.blazek at gmail.com  Fri Jan 18 02:43:39 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Fri, 18 Jan 2013 11:43:39 +0100
Subject: [Qgis-developer] (no subject)
In-Reply-To: <50F827BB.2060105@faunalia.it>
References: <50F827BB.2060105@faunalia.it>
Message-ID: <CAEMrtYpvwuAU7EjqeO=xTJWnh=S1dfrjCY_4m_==+K98e2Wvzg@mail.gmail.com>

On Thu, Jan 17, 2013 at 5:32 PM, Paolo Cavallini <cavallini at faunalia.it> wrote:
> Hi all.
> Got a strange problem:
>
> * import (-o) the .asc file from  https://www.dropbox.com/s/w60ywwddl3aj03h/cavallini.zip
> * r.to.vect (you can see the results of these operations in the location, in the zip
> above)
>
> Display rasters (original and imported) and vector in QGIS.

The original raster does not have CRS. You have probably set Monte
Mario / Italy zone 1
+proj=tmerc +lat_0=0 +lon_0=9 +k=0.9996 +x_0=1500000 +y_0=0
+ellps=intl +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
+units=m +no_defs?

> Results: the original raster and the derived vector align perfectly, the imported
> raster shows shifts while zooming in and out. See attached screenshots as an example.
>
> Additionally, in qgis-dev I get errors querying the raster: 168 bytes expected but
> 3200000 byte were read from qgis.d.rast

There was a bug, the extent was not printed with sufficient precision.
The problem was not in querying but in rendering. It was causing the
error message above, but most probably also the shift. It should be
fixed in d36cd9a, please test.

Radim

> Tested on 3 different machines (Debian Unstable, Ubuntu, Windows).
>
> Any hint?
>
> All the best.
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From mihis.sakh at gmail.com  Fri Jan 18 03:58:22 2013
From: mihis.sakh at gmail.com (Mihis)
Date: Fri, 18 Jan 2013 03:58:22 -0800 (PST)
Subject: [Qgis-developer] Building QGIS 1.8.0 on Windows 7 64 bit - .res
	file Error
Message-ID: <1358510302714-5028323.post@n6.nabble.com>

Hi,

does anybody have an idea about such kind of error while building QGIS 1.8.0
by Visual C++ Express (using makefile project template):

[ 56%] Building RC object src/app/CMakeFiles/qgis.dir/qgis_win32.rc.res
fatal error RC1106: invalid option: -4

I assume that there should be file "qgis_win32.rc.res" in the build tree,
which was configured with the help of CMake. But there is no such file in
it.

Does anybody know where the problem is?

 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Building-QGIS-1-8-0-on-Windows-7-64-bit-res-file-Error-tp5028323.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From Bob.Bruce at gov.mb.ca  Fri Jan 18 09:07:20 2013
From: Bob.Bruce at gov.mb.ca (Bruce, Bob (CON))
Date: Fri, 18 Jan 2013 11:07:20 -0600
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
 WCS
In-Reply-To: <CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
Message-ID: <DC49060A7E430243BF2D4090200661931AD39E397A@OC1EX201.ME.MBGOV.CA>

Radim,
	Thanks for looking into this for me. I did for sure use the URL for the basic access, I was depending upon QGIS to add the parameters for the service and the request to the URL when it generates a particular request. I am not surprised that the response is slow for a large area because this is .5m pixel imagery so we will want to request a small area. I am doing that by just displaying downtown Winnipeg, an area of about 1.5km X 1.5km (I know, we are small). I am not having problems connecting to the service, only when trying to add it to my project.

Thanks again,
		Bob Bruce

-----Original Message-----
From: Radim Blazek [mailto:radim.blazek at gmail.com] 
Sent: January-18-13 3:28 AM
To: Bruce, Bob (CON)
Cc: Qgis-Developer; ekeighan at cubewerx.com
Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS

I don't see the same problem here. GetCapabilities and
DescribeCoverage are not mixed together here. Could it be that you
accidentally used GetCapabilities request URL as "URL" parameter in
connection details dialog and it was logged on server but that is
another issue?

I have got another error however. DescribeCoverage is successfully
received and parsed, then QGIS sends test GetCoverage request (10x10
raster to get more info):

http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10

and it fails on server side with:

"Gateway Time-out
The gateway did not receive a timely response from the upstream server
or application."

Because the request covers the whole extent, it could be that the
raster is quite large and there are no overviews/pyramids ready on
server, it starts to do resampling of the whole extent but it takes to
much time?

BTW, you can find some interesting info in QGIS Settings > Panels >
Log  Messages  - WCS tab or in debug messages. In log messages are
usually printed requests which failed and in debug messages are
printed all requests.

Radim

On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
> Here are the full details of the QGIS version from the Help listing:
>
> QGIS version                    1.9.0-Master    QGIS code revision              f210668
> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
> This copy of QGIS writes debugging output.
>
> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>
> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>
> This is the request that they are finding in their server log:
>         2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>
> Is there a fix to this problem available in a later version of QGIS?
>
> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>         WCS provider: Cannot calculate extent
>         (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>         Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>         (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>
> Thanks,
>         Bob Bruce
>
> From: ekeighan [mailto:ekeighan at cubewerx.com]
> Sent: January-17-13 3:33 PM
> To: Bruce, Bob (CON)
> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> Bob,
>
> FYI...
>
> ekeighan at cubewerx.com wrote:
>
> *Raster layer:* Provider is not valid (provider: wcs, URI:
> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
> QgsRasterLayer::setDataProvider)
>
> Is there something at your end that could be changed to allow this to
> calculate the extent?
> Looking through the server log, we see only the following related request
> present twice:
>
> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>
> ---------------------------------------------------------------
>
> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
> The Qgs error suggests that the base URL it's using is:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>
> but it almost seems as though it was entered improperly as:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>
> The WCS request received from the client produces an error return, since
> the server has problems parsing the broken request:
>
> <ExceptionReport version="1.1.0" xml:lang="en"
>   xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>   <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>     <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>     <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>   </Exception>
> </ExceptionReport>
>
> The first request from the client should be just a proper GetCapabilities
> request:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>
> which returns the expected data.
> -------------------------------------------------
>
> Regards,
>
> Edric
>
> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
> Edric,
>             I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>
> WCS provider: Cannot calculate extent
> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>
> Is there something at your end that could be changed to allow this to calculate the extent?
>
> Thanks,
>             Bob
>
> *******************************************************************************************************************
> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
> **    FAX  # (204) 945-1365             1007 Century Street,
> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
> **                                                  49-54-31.85N,97-12-16.08W
> **
> **             Check out our digital maps at: http://mli2.gov.mb.ca/
> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
> *******************************************************************************************************************
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Fri Jan 18 10:03:54 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 18 Jan 2013 19:03:54 +0100
Subject: [Qgis-developer] (no subject)
In-Reply-To: <CAEMrtYpvwuAU7EjqeO=xTJWnh=S1dfrjCY_4m_==+K98e2Wvzg@mail.gmail.com>
References: <50F827BB.2060105@faunalia.it>
	<CAEMrtYpvwuAU7EjqeO=xTJWnh=S1dfrjCY_4m_==+K98e2Wvzg@mail.gmail.com>
Message-ID: <50F98E8A.6040800@faunalia.it>

Il 18/01/2013 11:43, Radim Blazek ha scritto:
>
> There was a bug, the extent was not printed with sufficient precision.
> The problem was not in querying but in rendering. It was causing the
> error message above, but most probably also the shift. It should be
> fixed in d36cd9a, please test.
>
I confirm, fixed - thanks a lot Radim.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From Bob.Bruce at gov.mb.ca  Fri Jan 18 16:11:12 2013
From: Bob.Bruce at gov.mb.ca (Bruce, Bob (CON))
Date: Fri, 18 Jan 2013 18:11:12 -0600
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
 WCS
In-Reply-To: <CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
Message-ID: <DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>

Radim,
      I have been looking at this again with two people from Cubewerx and we find that QGIS is issuing this request:

http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10

while the bounding box that I currently have displayed in QGIS is roughly:

BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000

I need to get QGIS to restrict its request to this extent to work. Do you know how I can do that?

If I issue this request from my web browser:

http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100

I actually get a tiff image that I can view that looks good and is similar to what I would expect to see in QGIS. Now I need to get QGIS to actually issue that request.

Thanks,
	Bob Bruce

-----Original Message-----
From: Radim Blazek [mailto:radim.blazek at gmail.com] 
Sent: January-18-13 3:36 AM
To: Bruce, Bob (CON)
Cc: Qgis-Developer; ekeighan at cubewerx.com
Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS

Hi again,

On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
> I don't see the same problem here. GetCapabilities and
> DescribeCoverage are not mixed together here. Could it be that you
> accidentally used GetCapabilities request URL as "URL" parameter in
> connection details dialog and it was logged on server but that is
> another issue?
>
> I have got another error however. DescribeCoverage is successfully
> received and parsed, then QGIS sends test GetCoverage request (10x10
> raster to get more info):
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>
> and it fails on server side with:
>
> "Gateway Time-out
> The gateway did not receive a timely response from the upstream server
> or application."
>
> Because the request covers the whole extent, it could be that the
> raster is quite large and there are no overviews/pyramids ready on
> server, it starts to do resampling of the whole extent but it takes to
> much time?

It really seems to be the problem, I have tried with smaller extent
and server sent a correct TIFF in response. In any case it takes very
long time.

Radim

> BTW, you can find some interesting info in QGIS Settings > Panels >
> Log  Messages  - WCS tab or in debug messages. In log messages are
> usually printed requests which failed and in debug messages are
> printed all requests.
>
> Radim
>
> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>> Here are the full details of the QGIS version from the Help listing:
>>
>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>> This copy of QGIS writes debugging output.
>>
>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>
>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>
>> This is the request that they are finding in their server log:
>>         2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>
>> Is there a fix to this problem available in a later version of QGIS?
>>
>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>         WCS provider: Cannot calculate extent
>>         (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>         Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>         (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>
>> Thanks,
>>         Bob Bruce
>>
>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>> Sent: January-17-13 3:33 PM
>> To: Bruce, Bob (CON)
>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>
>> Bob,
>>
>> FYI...
>>
>> ekeighan at cubewerx.com wrote:
>>
>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>> QgsRasterLayer::setDataProvider)
>>
>> Is there something at your end that could be changed to allow this to
>> calculate the extent?
>> Looking through the server log, we see only the following related request
>> present twice:
>>
>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>
>> ---------------------------------------------------------------
>>
>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>> The Qgs error suggests that the base URL it's using is:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>
>> but it almost seems as though it was entered improperly as:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>
>> The WCS request received from the client produces an error return, since
>> the server has problems parsing the broken request:
>>
>> <ExceptionReport version="1.1.0" xml:lang="en"
>>   xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>   <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>     <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>     <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>   </Exception>
>> </ExceptionReport>
>>
>> The first request from the client should be just a proper GetCapabilities
>> request:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>
>> which returns the expected data.
>> -------------------------------------------------
>>
>> Regards,
>>
>> Edric
>>
>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>> Edric,
>>             I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>
>> WCS provider: Cannot calculate extent
>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>
>> Is there something at your end that could be changed to allow this to calculate the extent?
>>
>> Thanks,
>>             Bob
>>
>> *******************************************************************************************************************
>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>> **    FAX  # (204) 945-1365             1007 Century Street,
>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>> **                                                  49-54-31.85N,97-12-16.08W
>> **
>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>> *******************************************************************************************************************
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From warmerdam at pobox.com  Fri Jan 18 17:23:37 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 18 Jan 2013 17:23:37 -0800
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
Message-ID: <CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>

Bruce,

I think the 10x10 request is being made by GDAL's WCS driver in order
to establish some details about the underlying WCS and it defaults to
the whole extents.  It sucks fairly badly that such a request can't be
done.  It might be possible to dummy in the information in the .wcs
config file to avoid having to do that query.  Investigating.

Best regards,
Frank



On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> Radim,
>       I have been looking at this again with two people from Cubewerx and we find that QGIS is issuing this request:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>
> while the bounding box that I currently have displayed in QGIS is roughly:
>
> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>
> I need to get QGIS to restrict its request to this extent to work. Do you know how I can do that?
>
> If I issue this request from my web browser:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>
> I actually get a tiff image that I can view that looks good and is similar to what I would expect to see in QGIS. Now I need to get QGIS to actually issue that request.
>
> Thanks,
>         Bob Bruce
>
> -----Original Message-----
> From: Radim Blazek [mailto:radim.blazek at gmail.com]
> Sent: January-18-13 3:36 AM
> To: Bruce, Bob (CON)
> Cc: Qgis-Developer; ekeighan at cubewerx.com
> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> Hi again,
>
> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
>> I don't see the same problem here. GetCapabilities and
>> DescribeCoverage are not mixed together here. Could it be that you
>> accidentally used GetCapabilities request URL as "URL" parameter in
>> connection details dialog and it was logged on server but that is
>> another issue?
>>
>> I have got another error however. DescribeCoverage is successfully
>> received and parsed, then QGIS sends test GetCoverage request (10x10
>> raster to get more info):
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>
>> and it fails on server side with:
>>
>> "Gateway Time-out
>> The gateway did not receive a timely response from the upstream server
>> or application."
>>
>> Because the request covers the whole extent, it could be that the
>> raster is quite large and there are no overviews/pyramids ready on
>> server, it starts to do resampling of the whole extent but it takes to
>> much time?
>
> It really seems to be the problem, I have tried with smaller extent
> and server sent a correct TIFF in response. In any case it takes very
> long time.
>
> Radim
>
>> BTW, you can find some interesting info in QGIS Settings > Panels >
>> Log  Messages  - WCS tab or in debug messages. In log messages are
>> usually printed requests which failed and in debug messages are
>> printed all requests.
>>
>> Radim
>>
>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>>> Here are the full details of the QGIS version from the Help listing:
>>>
>>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>>> This copy of QGIS writes debugging output.
>>>
>>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>
>>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>>
>>> This is the request that they are finding in their server log:
>>>         2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>
>>> Is there a fix to this problem available in a later version of QGIS?
>>>
>>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>>         WCS provider: Cannot calculate extent
>>>         (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>         Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>         (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>
>>> Thanks,
>>>         Bob Bruce
>>>
>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>> Sent: January-17-13 3:33 PM
>>> To: Bruce, Bob (CON)
>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>
>>> Bob,
>>>
>>> FYI...
>>>
>>> ekeighan at cubewerx.com wrote:
>>>
>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>> QgsRasterLayer::setDataProvider)
>>>
>>> Is there something at your end that could be changed to allow this to
>>> calculate the extent?
>>> Looking through the server log, we see only the following related request
>>> present twice:
>>>
>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>
>>> ---------------------------------------------------------------
>>>
>>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>>> The Qgs error suggests that the base URL it's using is:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>
>>> but it almost seems as though it was entered improperly as:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>
>>> The WCS request received from the client produces an error return, since
>>> the server has problems parsing the broken request:
>>>
>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>   xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>   <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>>     <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>     <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>>   </Exception>
>>> </ExceptionReport>
>>>
>>> The first request from the client should be just a proper GetCapabilities
>>> request:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>
>>> which returns the expected data.
>>> -------------------------------------------------
>>>
>>> Regards,
>>>
>>> Edric
>>>
>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>> Edric,
>>>             I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>>
>>> WCS provider: Cannot calculate extent
>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>
>>> Is there something at your end that could be changed to allow this to calculate the extent?
>>>
>>> Thanks,
>>>             Bob
>>>
>>> *******************************************************************************************************************
>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>>> **                                                  49-54-31.85N,97-12-16.08W
>>> **
>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>> *******************************************************************************************************************
>>>
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From radim.blazek at gmail.com  Fri Jan 18 20:03:58 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Sat, 19 Jan 2013 05:03:58 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
Message-ID: <CAEMrtYrKTX01+2JeTWYYGZ6JZ11Lo1MRXehUoHk6u5jhWcOOiA@mail.gmail.com>

On Sat, Jan 19, 2013 at 1:11 AM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> Radim,
>       I have been looking at this again with two people from Cubewerx and we find that QGIS is issuing this request:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>
> while the bounding box that I currently have displayed in QGIS is roughly:
>
> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>
> I need to get QGIS to restrict its request to this extent to work. Do you know how I can do that?

As I wrote, QGIS needs to get some info about the coverage on server
and it gets it requesting the whole extent. You cannot avoid it. AFAIK
WCS specification does not allow any limitation on requested extent.
Instead, it is usual that a user wants to visualize the whole extent
to see what is inside.

I believe that building pyramids must solve the problem:
http://www.gdal.org/gdal_retile.html

Radim

> If I issue this request from my web browser:
>
> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>
> I actually get a tiff image that I can view that looks good and is similar to what I would expect to see in QGIS. Now I need to get QGIS to actually issue that request.
>
> Thanks,
>         Bob Bruce
>
> -----Original Message-----
> From: Radim Blazek [mailto:radim.blazek at gmail.com]
> Sent: January-18-13 3:36 AM
> To: Bruce, Bob (CON)
> Cc: Qgis-Developer; ekeighan at cubewerx.com
> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> Hi again,
>
> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
>> I don't see the same problem here. GetCapabilities and
>> DescribeCoverage are not mixed together here. Could it be that you
>> accidentally used GetCapabilities request URL as "URL" parameter in
>> connection details dialog and it was logged on server but that is
>> another issue?
>>
>> I have got another error however. DescribeCoverage is successfully
>> received and parsed, then QGIS sends test GetCoverage request (10x10
>> raster to get more info):
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>
>> and it fails on server side with:
>>
>> "Gateway Time-out
>> The gateway did not receive a timely response from the upstream server
>> or application."
>>
>> Because the request covers the whole extent, it could be that the
>> raster is quite large and there are no overviews/pyramids ready on
>> server, it starts to do resampling of the whole extent but it takes to
>> much time?
>
> It really seems to be the problem, I have tried with smaller extent
> and server sent a correct TIFF in response. In any case it takes very
> long time.
>
> Radim
>
>> BTW, you can find some interesting info in QGIS Settings > Panels >
>> Log  Messages  - WCS tab or in debug messages. In log messages are
>> usually printed requests which failed and in debug messages are
>> printed all requests.
>>
>> Radim
>>
>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>>> Here are the full details of the QGIS version from the Help listing:
>>>
>>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>>> This copy of QGIS writes debugging output.
>>>
>>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>
>>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>>
>>> This is the request that they are finding in their server log:
>>>         2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>
>>> Is there a fix to this problem available in a later version of QGIS?
>>>
>>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>>         WCS provider: Cannot calculate extent
>>>         (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>         Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>         (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>
>>> Thanks,
>>>         Bob Bruce
>>>
>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>> Sent: January-17-13 3:33 PM
>>> To: Bruce, Bob (CON)
>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>
>>> Bob,
>>>
>>> FYI...
>>>
>>> ekeighan at cubewerx.com wrote:
>>>
>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>> QgsRasterLayer::setDataProvider)
>>>
>>> Is there something at your end that could be changed to allow this to
>>> calculate the extent?
>>> Looking through the server log, we see only the following related request
>>> present twice:
>>>
>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>
>>> ---------------------------------------------------------------
>>>
>>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>>> The Qgs error suggests that the base URL it's using is:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>
>>> but it almost seems as though it was entered improperly as:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>
>>> The WCS request received from the client produces an error return, since
>>> the server has problems parsing the broken request:
>>>
>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>   xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>   <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>>     <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>     <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>>   </Exception>
>>> </ExceptionReport>
>>>
>>> The first request from the client should be just a proper GetCapabilities
>>> request:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>
>>> which returns the expected data.
>>> -------------------------------------------------
>>>
>>> Regards,
>>>
>>> Edric
>>>
>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>> Edric,
>>>             I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>>
>>> WCS provider: Cannot calculate extent
>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>
>>> Is there something at your end that could be changed to allow this to calculate the extent?
>>>
>>> Thanks,
>>>             Bob
>>>
>>> *******************************************************************************************************************
>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>>> **                                                  49-54-31.85N,97-12-16.08W
>>> **
>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>> *******************************************************************************************************************
>>>
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From radim.blazek at gmail.com  Fri Jan 18 20:08:45 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Sat, 19 Jan 2013 05:08:45 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
Message-ID: <CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>

Frank,

here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
in QGIS it is used to get true extent. It may happen that a server is
misconfigured and reports larger extent in
GetCapabilities/DescribeCoverage and successive request inside that
extent but outside the real coverage extent would fail. Requesting the
whole extent and getting
its real extent is the only way AFAIK to get real extent.

Radim

On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> Bruce,
>
> I think the 10x10 request is being made by GDAL's WCS driver in order
> to establish some details about the underlying WCS and it defaults to
> the whole extents.  It sucks fairly badly that such a request can't be
> done.  It might be possible to dummy in the information in the .wcs
> config file to avoid having to do that query.  Investigating.
>
> Best regards,
> Frank
>
>
>
> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>> Radim,
>>       I have been looking at this again with two people from Cubewerx and we find that QGIS is issuing this request:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>
>> while the bounding box that I currently have displayed in QGIS is roughly:
>>
>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>
>> I need to get QGIS to restrict its request to this extent to work. Do you know how I can do that?
>>
>> If I issue this request from my web browser:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>
>> I actually get a tiff image that I can view that looks good and is similar to what I would expect to see in QGIS. Now I need to get QGIS to actually issue that request.
>>
>> Thanks,
>>         Bob Bruce
>>
>> -----Original Message-----
>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>> Sent: January-18-13 3:36 AM
>> To: Bruce, Bob (CON)
>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>
>> Hi again,
>>
>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>> I don't see the same problem here. GetCapabilities and
>>> DescribeCoverage are not mixed together here. Could it be that you
>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>> connection details dialog and it was logged on server but that is
>>> another issue?
>>>
>>> I have got another error however. DescribeCoverage is successfully
>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>> raster to get more info):
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>
>>> and it fails on server side with:
>>>
>>> "Gateway Time-out
>>> The gateway did not receive a timely response from the upstream server
>>> or application."
>>>
>>> Because the request covers the whole extent, it could be that the
>>> raster is quite large and there are no overviews/pyramids ready on
>>> server, it starts to do resampling of the whole extent but it takes to
>>> much time?
>>
>> It really seems to be the problem, I have tried with smaller extent
>> and server sent a correct TIFF in response. In any case it takes very
>> long time.
>>
>> Radim
>>
>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>> usually printed requests which failed and in debug messages are
>>> printed all requests.
>>>
>>> Radim
>>>
>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>>>> Here are the full details of the QGIS version from the Help listing:
>>>>
>>>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>>>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>>>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>>>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>>>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>>>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>>>> This copy of QGIS writes debugging output.
>>>>
>>>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>
>>>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>>>
>>>> This is the request that they are finding in their server log:
>>>>         2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>
>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>
>>>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>>>         WCS provider: Cannot calculate extent
>>>>         (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>>         Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>         (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>
>>>> Thanks,
>>>>         Bob Bruce
>>>>
>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>> Sent: January-17-13 3:33 PM
>>>> To: Bruce, Bob (CON)
>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>
>>>> Bob,
>>>>
>>>> FYI...
>>>>
>>>> ekeighan at cubewerx.com wrote:
>>>>
>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>> QgsRasterLayer::setDataProvider)
>>>>
>>>> Is there something at your end that could be changed to allow this to
>>>> calculate the extent?
>>>> Looking through the server log, we see only the following related request
>>>> present twice:
>>>>
>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>
>>>> ---------------------------------------------------------------
>>>>
>>>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>>>> The Qgs error suggests that the base URL it's using is:
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>
>>>> but it almost seems as though it was entered improperly as:
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>
>>>> The WCS request received from the client produces an error return, since
>>>> the server has problems parsing the broken request:
>>>>
>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>   xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>   <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>>>     <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>     <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>>>   </Exception>
>>>> </ExceptionReport>
>>>>
>>>> The first request from the client should be just a proper GetCapabilities
>>>> request:
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>
>>>> which returns the expected data.
>>>> -------------------------------------------------
>>>>
>>>> Regards,
>>>>
>>>> Edric
>>>>
>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>> Edric,
>>>>             I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>>>
>>>> WCS provider: Cannot calculate extent
>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>
>>>> Is there something at your end that could be changed to allow this to calculate the extent?
>>>>
>>>> Thanks,
>>>>             Bob
>>>>
>>>> *******************************************************************************************************************
>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>>>> **                                                  49-54-31.85N,97-12-16.08W
>>>> **
>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>> *******************************************************************************************************************
>>>>
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer

From vermesser at gmail.com  Sat Jan 19 12:56:48 2013
From: vermesser at gmail.com (=?ISO-8859-1?Q?Michael_R=F6cke?=)
Date: Sat, 19 Jan 2013 21:56:48 +0100
Subject: [Qgis-developer] How to deliver an additional Python Library with
	own Plugin?
Message-ID: <CAEBTpVi+KR6+Z+X9Fc5H99kn2+0P1imkYrYF5v+oGJYwWgrvgA@mail.gmail.com>

For my own plugin I need a special library (pyexiv2) to write a
comment into a jpg file (PIL does not do that).
When I want to share my plugin in one of the repositories in the
future, what would be the right way to deliver this additional python
library, so that my own plugin will work for other people?

Thanks
--
Michael R?cke

From martin.laloux at gmail.com  Sun Jan 20 00:47:02 2013
From: martin.laloux at gmail.com (gene)
Date: Sun, 20 Jan 2013 00:47:02 -0800 (PST)
Subject: [Qgis-developer] How to deliver an additional Python Library
	with own Plugin?
In-Reply-To: <CAEBTpVi+KR6+Z+X9Fc5H99kn2+0P1imkYrYF5v+oGJYwWgrvgA@mail.gmail.com>
References: <CAEBTpVi+KR6+Z+X9Fc5H99kn2+0P1imkYrYF5v+oGJYwWgrvgA@mail.gmail.com>
Message-ID: <1358671622310-5028515.post@n6.nabble.com>

The problem is difficult because the standard Python modules must be
installed in *site-package* and:
- in the Windows version, QGIS uses its own version of Python
- in the Linux or Mac OS X versions, QGIS uses the standard version,
preinstalled



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-deliver-an-additional-Python-Library-with-own-Plugin-tp5028492p5028515.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From mandoluca at gmail.com  Sun Jan 20 09:31:09 2013
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Sun, 20 Jan 2013 18:31:09 +0100
Subject: [Qgis-developer] How to deliver an additional Python Library
 with own Plugin?
In-Reply-To: <1358671622310-5028515.post@n6.nabble.com>
References: <CAEBTpVi+KR6+Z+X9Fc5H99kn2+0P1imkYrYF5v+oGJYwWgrvgA@mail.gmail.com>
	<1358671622310-5028515.post@n6.nabble.com>
Message-ID: <CAHmdnV7VJiMJW3gpVo8-veGVx3DeeFYfm0oMwUFi0hGdPOjSNQ@mail.gmail.com>

This is a very huge problem that I have with my plugin too. This is a limit
for sharing your own work and I spent some time without finding a solution
for all.


On Sun, Jan 20, 2013 at 9:47 AM, gene <martin.laloux at gmail.com> wrote:

> The problem is difficult because the standard Python modules must be
> installed in *site-package* and:
> - in the Windows version, QGIS uses its own version of Python
> - in the Linux or Mac OS X versions, QGIS uses the standard version,
> preinstalled
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/How-to-deliver-an-additional-Python-Library-with-own-Plugin-tp5028492p5028515.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130120/14cb8e34/attachment.html>

From cavallini at faunalia.it  Sun Jan 20 09:36:59 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun, 20 Jan 2013 18:36:59 +0100
Subject: [Qgis-developer] How to deliver an additional Python Library
 with own Plugin?
In-Reply-To: <CAHmdnV7VJiMJW3gpVo8-veGVx3DeeFYfm0oMwUFi0hGdPOjSNQ@mail.gmail.com>
References: <CAEBTpVi+KR6+Z+X9Fc5H99kn2+0P1imkYrYF5v+oGJYwWgrvgA@mail.gmail.com>
	<1358671622310-5028515.post@n6.nabble.com>
	<CAHmdnV7VJiMJW3gpVo8-veGVx3DeeFYfm0oMwUFi0hGdPOjSNQ@mail.gmail.com>
Message-ID: <50FC2B3B.1080704@faunalia.it>

Il 20/01/2013 18:31, Luca Mandolesi ha scritto:
> This is a very huge problem that I have with my plugin too. This is a
> limit for sharing your own work and I spent some time without finding
> a solution for all.
>
IMHO the Right Solution is to add the packages to the distros, and if
appropriate to the standalone installer: in Linux is mostly a solved
problem, in osgeo4w and osx there is some work to do.
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From info at locatepress.com  Sun Jan 20 13:58:56 2013
From: info at locatepress.com (Tyler Mitchell)
Date: Sun, 20 Jan 2013 13:58:56 -0800
Subject: [Qgis-developer] How to deliver an additional Python Library
	with own Plugin?
In-Reply-To: <CAHmdnV7VJiMJW3gpVo8-veGVx3DeeFYfm0oMwUFi0hGdPOjSNQ@mail.gmail.com>
References: <CAEBTpVi+KR6+Z+X9Fc5H99kn2+0P1imkYrYF5v+oGJYwWgrvgA@mail.gmail.com>
	<1358671622310-5028515.post@n6.nabble.com>
	<CAHmdnV7VJiMJW3gpVo8-veGVx3DeeFYfm0oMwUFi0hGdPOjSNQ@mail.gmail.com>
Message-ID: <4FD7596B-53E2-470E-ADF3-D590000DCB5C@locatepress.com>

If the task is only to add metadata, perhaps some function in one of the libs that are already used could be possible?  e.g. GDAL python libs could help accomplish it?

Just a guess!
Tyler

On 2013-01-20, at 9:31 AM, Luca Mandolesi wrote:

> This is a very huge problem that I have with my plugin too. This is a limit for sharing your own work and I spent some time without finding a solution for all.
> 
> 
> On Sun, Jan 20, 2013 at 9:47 AM, gene <martin.laloux at gmail.com> wrote:
> The problem is difficult because the standard Python modules must be
> installed in *site-package* and:
> - in the Windows version, QGIS uses its own version of Python
> - in the Linux or Mac OS X versions, QGIS uses the standard version,
> preinstalled
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-deliver-an-additional-Python-Library-with-own-Plugin-tp5028492p5028515.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-----
Tyler Mitchell, Publisher
Locate Press, info at locatepress.com
Open Source "geo" Books
http://www.locatepress.com





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130120/04526e81/attachment.html>

From dpardhu123 at yahoo.in  Sun Jan 20 22:07:23 2013
From: dpardhu123 at yahoo.in (PARDHU D)
Date: Mon, 21 Jan 2013 14:07:23 +0800 (SGT)
Subject: [Qgis-developer] Opening a Shape file with out any browsing
Message-ID: <1358748443.58916.YahooMailNeo@web190501.mail.sg3.yahoo.com>

Hi to all,

Can anyone please send me the code for QGIS project (saved by the user) or What is the code for QGIS when saving as a project. I just want 
to know the code for shape file (.shp file) in the QGIS project. 
Mainly I want code for adding shape file without any browsing. Can any 
one please send me a simple program for opening a shape file without 
browsing.

Regards,
D Pardhu.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130121/805f03e8/attachment.html>

From vermesser at gmail.com  Mon Jan 21 00:52:02 2013
From: vermesser at gmail.com (=?UTF-8?Q?Michael_R=C3=B6cke?=)
Date: Mon, 21 Jan 2013 00:52:02 -0800 (PST)
Subject: [Qgis-developer] How to deliver an additional Python Library
	with own Plugin?
In-Reply-To: <4FD7596B-53E2-470E-ADF3-D590000DCB5C@locatepress.com>
References: <CAEBTpVi+KR6+Z+X9Fc5H99kn2+0P1imkYrYF5v+oGJYwWgrvgA@mail.gmail.com>
	<1358671622310-5028515.post@n6.nabble.com>
	<CAHmdnV7VJiMJW3gpVo8-veGVx3DeeFYfm0oMwUFi0hGdPOjSNQ@mail.gmail.com>
	<4FD7596B-53E2-470E-ADF3-D590000DCB5C@locatepress.com>
Message-ID: <1358758322412-5028659.post@n6.nabble.com>

@all
Thanks for your answers. Thats what I was afraid of.
It means that the simplest way at the moment would be, that other people
have to install the library by their own. To bad, because that makes it very
unhandy for QGIS newbies.

@Tyler Mitchell-3
Unfortunately I'm a newbie as well and dont know all the libs yet.
I tried the Python Imaging Library (PIL) which comes already with the qgis
distribution.
But most image libraries work with exif metadata.
What I need is a comment in a jpg file which is not exactly the same.

Cheers, Micha



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-deliver-an-additional-Python-Library-with-own-Plugin-tp5028492p5028659.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From cavallini at faunalia.it  Mon Jan 21 00:53:45 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 21 Jan 2013 09:53:45 +0100
Subject: [Qgis-developer] How to deliver an additional Python Library
 with own Plugin?
In-Reply-To: <1358758322412-5028659.post@n6.nabble.com>
References: <CAEBTpVi+KR6+Z+X9Fc5H99kn2+0P1imkYrYF5v+oGJYwWgrvgA@mail.gmail.com>
	<1358671622310-5028515.post@n6.nabble.com>
	<CAHmdnV7VJiMJW3gpVo8-veGVx3DeeFYfm0oMwUFi0hGdPOjSNQ@mail.gmail.com>
	<4FD7596B-53E2-470E-ADF3-D590000DCB5C@locatepress.com>
	<1358758322412-5028659.post@n6.nabble.com>
Message-ID: <50FD0219.9060507@faunalia.it>

Il 21/01/2013 09:52, Michael R?cke ha scritto:
> @all
> Thanks for your answers. Thats what I was afraid of.
> It means that the simplest way at the moment would be, that other people
> have to install the library by their own. To bad, because that makes it very
> unhandy for QGIS newbies.
>
> @Tyler Mitchell-3
> Unfortunately I'm a newbie as well and dont know all the libs yet.
> I tried the Python Imaging Library (PIL) which comes already with the qgis
> distribution.
> But most image libraries work with exif metadata.
> What I need is a comment in a jpg file which is not exactly the same.
>
have you seen this?
http://trac.osgeo.org/osgeo4w/wiki/pkg-python/Python27 (thanks jef)
for windows this should fix your problem.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From matthias.kuhn at gmx.ch  Mon Jan 21 01:17:22 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Mon, 21 Jan 2013 10:17:22 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFfQ3WWT6gRhxK944ujo2rrfZdJiyX3hBZc_VLwKgdJwvg@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
	<50EAB491.4010707@gmx.ch>
	<CAC2XbFcEkcaWn9Tcopd8whQ=Pz2ydMXa0zAKisTBWG1R9-9R+A@mail.gmail.com>
	<50EBDCC9.9030506@gmx.ch>
	<CAC2XbFfQ3WWT6gRhxK944ujo2rrfZdJiyX3hBZc_VLwKgdJwvg@mail.gmail.com>
Message-ID: <50FD07A2.7080909@gmx.ch>

Martin,

Works for me. My plugin is ready for the new vector API then. Thank you 
for your work.

What are your plans for merging?

Regards,
Matthias

On 01/17/2013 12:18 AM, Martin Dobias wrote:
> On Tue, Jan 8, 2013 at 9:46 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>> Layers are rendered correctly again.
>>
>> However, dataProvider.getFeatures() doesn't return any features in my plugin
>> ( the same instructions used to work before your last two commits ).
> Matthias,
> my recent update to feature iterators should fix this and some more issues, see:
>
> https://github.com/qgis/Quantum-GIS/commit/a6c5fd875bc73e4775b825640a7cedcc2f5a8832
>
> The default behavior for providers is now that they close any previous
> active iterator. Later I will be adding a new provider capability
> where the provider could state that it supports concurrent iterators.
>
> Regards
> Martin


From vermesser at gmail.com  Mon Jan 21 06:55:36 2013
From: vermesser at gmail.com (=?UTF-8?Q?Michael_R=C3=B6cke?=)
Date: Mon, 21 Jan 2013 06:55:36 -0800 (PST)
Subject: [Qgis-developer] Opening a Shape file with out any browsing
In-Reply-To: <1358748443.58916.YahooMailNeo@web190501.mail.sg3.yahoo.com>
References: <1358748443.58916.YahooMailNeo@web190501.mail.sg3.yahoo.com>
Message-ID: <1358780136822-5028732.post@n6.nabble.com>

I'm not sure what you mean.
What kind of code do you need ... a simple python plugin?
What do want to do? Saving the actual (opened) user project or adding a
shapefile as a layer?
Please give some more information and maybe someone will answer you.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Opening-a-Shape-file-with-out-any-browsing-tp5028615p5028732.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From vermesser at gmail.com  Mon Jan 21 07:23:44 2013
From: vermesser at gmail.com (=?UTF-8?Q?Michael_R=C3=B6cke?=)
Date: Mon, 21 Jan 2013 07:23:44 -0800 (PST)
Subject: [Qgis-developer] How to use QPixmap argument in saveAsImage()
In-Reply-To: <1274887214761-5104128.post@n2.nabble.com>
References: <2E95F75EDC25D54999387A1E2E6EF6274349045A68@MBX02.cgcent.miami.edu>
	<e8e7199c1001260335t45ec4edcj84dcf945d7054378@mail.gmail.com>
	<1267635378953-4668749.post@n2.nabble.com>
	<e8e7199c1003031454m5eb70d96u562f8a9e71e8f87f@mail.gmail.com>
	<1267703180264-4673739.post@n2.nabble.com>
	<1274887214761-5104128.post@n2.nabble.com>
Message-ID: <1358781824136-5028740.post@n6.nabble.com>

First I placed my question here:
http://gis.stackexchange.com/questions/31972/is-it-possible-to-take-automatically-a-screenshot-of-my-selected-feature-in-qg
<http://gis.stackexchange.com/questions/31972/is-it-possible-to-take-automatically-a-screenshot-of-my-selected-feature-in-qg>  
But after finding this old thread I decided to ask over here.

How can I save a JPG instead of an PNG?
QgsMapCanvas.saveAsImage (QString theFileName, QPixmap *QPixmap=0,
QString="PNG")

I know that I can use "JPG" as third parameter, but I dont know how to
define the QPixmap that is excatly the same like the actual map window in
qgis.

Thanks for help.
Micha



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-use-QPixmap-argument-in-saveAsImage-tp4112041p5028740.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Mon Jan 21 07:38:44 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 21 Jan 2013 13:38:44 -0200
Subject: [Qgis-developer] How to use QPixmap argument in saveAsImage()
In-Reply-To: <1358781824136-5028740.post@n6.nabble.com>
References: <2E95F75EDC25D54999387A1E2E6EF6274349045A68@MBX02.cgcent.miami.edu>
	<e8e7199c1001260335t45ec4edcj84dcf945d7054378@mail.gmail.com>
	<1267635378953-4668749.post@n2.nabble.com>
	<e8e7199c1003031454m5eb70d96u562f8a9e71e8f87f@mail.gmail.com>
	<1267703180264-4673739.post@n2.nabble.com>
	<1274887214761-5104128.post@n2.nabble.com>
	<1358781824136-5028740.post@n6.nabble.com>
Message-ID: <CA+TxYvPDEYwFuxAP7XNvw3g6hSGOJjvjOpBoyn3ffR1K1rwbYA@mail.gmail.com>

 if using c++, just pass null (0) to the second argument (it's the
default argument if not present). If using python (you didn't specify
which), try None.

Etienne


On Mon, Jan 21, 2013 at 1:23 PM, Michael R?cke <vermesser at gmail.com> wrote:
> First I placed my question here:
> http://gis.stackexchange.com/questions/31972/is-it-possible-to-take-automatically-a-screenshot-of-my-selected-feature-in-qg
> <http://gis.stackexchange.com/questions/31972/is-it-possible-to-take-automatically-a-screenshot-of-my-selected-feature-in-qg>
> But after finding this old thread I decided to ask over here.
>
> How can I save a JPG instead of an PNG?
> QgsMapCanvas.saveAsImage (QString theFileName, QPixmap *QPixmap=0,
> QString="PNG")
>
> I know that I can use "JPG" as third parameter, but I dont know how to
> define the QPixmap that is excatly the same like the actual map window in
> qgis.
>
> Thanks for help.
> Micha
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-use-QPixmap-argument-in-saveAsImage-tp4112041p5028740.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From Bob.Bruce at gov.mb.ca  Mon Jan 21 07:43:11 2013
From: Bob.Bruce at gov.mb.ca (Bruce, Bob (CON))
Date: Mon, 21 Jan 2013 09:43:11 -0600
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
 WCS
In-Reply-To: <CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
Message-ID: <DC49060A7E430243BF2D4090200661931AD3B6AA22@OC1EX201.ME.MBGOV.CA>

Radim,
           This dataset is a huge collection of imagery encompassing an area approximately 350 kilometres square. There are over 5000 images in the dataset, with each image having a .5m pixel size and a file size of 293Mb and I doubt that it is feasible to request a small sample image from the entire range of the imagery. Is there some way that we can get QGIS to request an image from a much smaller area (like the extent of the viewport) to establish the validity of the dataset?

Ultimately we want to work with a dataset of .2m sized pixels and individual images of 2.94Gb and four bands.

Thanks for your help,

        Bob Bruce


-----Original Message-----
From: Radim Blazek [mailto:radim.blazek at gmail.com] 
Sent: January-18-13 10:09 PM
To: Frank Warmerdam
Cc: Bruce, Bob (CON); Qgis-Developer; ekeighan at cubewerx.com
Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS

Frank,

here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
in QGIS it is used to get true extent. It may happen that a server is
misconfigured and reports larger extent in
GetCapabilities/DescribeCoverage and successive request inside that
extent but outside the real coverage extent would fail. Requesting the
whole extent and getting
its real extent is the only way AFAIK to get real extent.

Radim

On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> Bruce,
>
> I think the 10x10 request is being made by GDAL's WCS driver in order
> to establish some details about the underlying WCS and it defaults to
> the whole extents.  It sucks fairly badly that such a request can't be
> done.  It might be possible to dummy in the information in the .wcs
> config file to avoid having to do that query.  Investigating.
>
> Best regards,
> Frank
>
>
>
> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>> Radim,
>>       I have been looking at this again with two people from Cubewerx and we find that QGIS is issuing this request:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>
>> while the bounding box that I currently have displayed in QGIS is roughly:
>>
>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>
>> I need to get QGIS to restrict its request to this extent to work. Do you know how I can do that?
>>
>> If I issue this request from my web browser:
>>
>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>
>> I actually get a tiff image that I can view that looks good and is similar to what I would expect to see in QGIS. Now I need to get QGIS to actually issue that request.
>>
>> Thanks,
>>         Bob Bruce
>>
>> -----Original Message-----
>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>> Sent: January-18-13 3:36 AM
>> To: Bruce, Bob (CON)
>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>
>> Hi again,
>>
>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>> I don't see the same problem here. GetCapabilities and
>>> DescribeCoverage are not mixed together here. Could it be that you
>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>> connection details dialog and it was logged on server but that is
>>> another issue?
>>>
>>> I have got another error however. DescribeCoverage is successfully
>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>> raster to get more info):
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>
>>> and it fails on server side with:
>>>
>>> "Gateway Time-out
>>> The gateway did not receive a timely response from the upstream server
>>> or application."
>>>
>>> Because the request covers the whole extent, it could be that the
>>> raster is quite large and there are no overviews/pyramids ready on
>>> server, it starts to do resampling of the whole extent but it takes to
>>> much time?
>>
>> It really seems to be the problem, I have tried with smaller extent
>> and server sent a correct TIFF in response. In any case it takes very
>> long time.
>>
>> Radim
>>
>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>> usually printed requests which failed and in debug messages are
>>> printed all requests.
>>>
>>> Radim
>>>
>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>>>> Here are the full details of the QGIS version from the Help listing:
>>>>
>>>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>>>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>>>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>>>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>>>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>>>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>>>> This copy of QGIS writes debugging output.
>>>>
>>>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>
>>>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>>>
>>>> This is the request that they are finding in their server log:
>>>>         2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>
>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>
>>>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>>>         WCS provider: Cannot calculate extent
>>>>         (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>>         Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>         (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>
>>>> Thanks,
>>>>         Bob Bruce
>>>>
>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>> Sent: January-17-13 3:33 PM
>>>> To: Bruce, Bob (CON)
>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>
>>>> Bob,
>>>>
>>>> FYI...
>>>>
>>>> ekeighan at cubewerx.com wrote:
>>>>
>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>> QgsRasterLayer::setDataProvider)
>>>>
>>>> Is there something at your end that could be changed to allow this to
>>>> calculate the extent?
>>>> Looking through the server log, we see only the following related request
>>>> present twice:
>>>>
>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>
>>>> ---------------------------------------------------------------
>>>>
>>>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>>>> The Qgs error suggests that the base URL it's using is:
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>
>>>> but it almost seems as though it was entered improperly as:
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>
>>>> The WCS request received from the client produces an error return, since
>>>> the server has problems parsing the broken request:
>>>>
>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>   xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>   <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>>>     <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>     <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>>>   </Exception>
>>>> </ExceptionReport>
>>>>
>>>> The first request from the client should be just a proper GetCapabilities
>>>> request:
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>
>>>> which returns the expected data.
>>>> -------------------------------------------------
>>>>
>>>> Regards,
>>>>
>>>> Edric
>>>>
>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>> Edric,
>>>>             I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>>>
>>>> WCS provider: Cannot calculate extent
>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>
>>>> Is there something at your end that could be changed to allow this to calculate the extent?
>>>>
>>>> Thanks,
>>>>             Bob
>>>>
>>>> *******************************************************************************************************************
>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>>>> **                                                  49-54-31.85N,97-12-16.08W
>>>> **
>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>> *******************************************************************************************************************
>>>>
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer

From vermesser at gmail.com  Mon Jan 21 07:44:08 2013
From: vermesser at gmail.com (=?UTF-8?Q?Michael_R=C3=B6cke?=)
Date: Mon, 21 Jan 2013 07:44:08 -0800 (PST)
Subject: [Qgis-developer] How to use QPixmap argument in saveAsImage()
In-Reply-To: <CA+TxYvPDEYwFuxAP7XNvw3g6hSGOJjvjOpBoyn3ffR1K1rwbYA@mail.gmail.com>
References: <2E95F75EDC25D54999387A1E2E6EF6274349045A68@MBX02.cgcent.miami.edu>
	<e8e7199c1001260335t45ec4edcj84dcf945d7054378@mail.gmail.com>
	<1267635378953-4668749.post@n2.nabble.com>
	<e8e7199c1003031454m5eb70d96u562f8a9e71e8f87f@mail.gmail.com>
	<1267703180264-4673739.post@n2.nabble.com>
	<1274887214761-5104128.post@n2.nabble.com>
	<1358781824136-5028740.post@n6.nabble.com>
	<CA+TxYvPDEYwFuxAP7XNvw3g6hSGOJjvjOpBoyn3ffR1K1rwbYA@mail.gmail.com>
Message-ID: <1358783048143-5028752.post@n6.nabble.com>

Sorry, I mean python (see the title following the link).
I already tried "none" but it doesnt work.





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-use-QPixmap-argument-in-saveAsImage-tp4112041p5028752.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From Alister.Hood at synergine.com  Mon Jan 21 10:50:33 2013
From: Alister.Hood at synergine.com (Alister Hood)
Date: Mon, 21 Jan 2013 18:50:33 +0000
Subject: [Qgis-developer] Opening a Shape file with out any browsing
Message-ID: <7C0A9EA7588C0D418C82042EED8127CA53583A@AKLSVR1.synakl.local>

> Date: Mon, 21 Jan 2013 14:07:23 +0800 (SGT)
> From: PARDHU D <dpardhu123 at yahoo.in>
> To: "Qgis-developer at lists.osgeo.org" <Qgis-developer at lists.osgeo.org>
> Subject: [Qgis-developer] Opening a Shape file with out any browsing
> Message-ID:
>         <1358748443.58916.YahooMailNeo at web190501.mail.sg3.yahoo.com>
> Content-Type: text/plain; charset="utf-8"
>?
> Hi to all,
>?
> Can anyone please send me the code for QGIS project (saved by the user) or What is the code for QGIS when saving as a project. I just want
> to know the code for shape file (.shp file) in the QGIS project.
> Mainly I want code for adding shape file without any browsing. Can any
> one please send me a simple program for opening a shape file without
> browsing.
>?
> Regards,
> D Pardhu.

It is unclear whether you want to know about adding layers and saving project files programmatically, or about what information is saved in the project file for the layer.
If you want to know about the latter, just save a project file then open it with a text editor to see.

Alister

From vinayan123 at gmail.com  Mon Jan 21 19:04:01 2013
From: vinayan123 at gmail.com (vinayan)
Date: Tue, 22 Jan 2013 08:34:01 +0530
Subject: [Qgis-developer] Fwd: Re: WG: "Rectangles ovals digitizing" plugin
 is broken in QGIS 1.9
In-Reply-To: <50FDFF48.2000805@gmail.com>
References: <50FDFF48.2000805@gmail.com>
Message-ID: <50FE01A1.1040207@gmail.com>

Dear All,

Today I got a mail from one of our users mentioning that the plugin 
"Rectangles ovals digitizing" is broken. He first contacted the plugin 
author and it seems he is not currently supporting it. I made the 
changes so that the plugin works now. How can we can update the same fix 
in the contributed plugins repository? Is it hosted on github where a 
pull request can be issued? I am sure quite a few people would be using it.

Anyway, the fix is quite simple. Just a line in the canvasmove event for 
all methods(except rotategeometry) in rectovaldigittools.py

Like this..

#[self.rb.addPoint( point ) for point in polygon]
  self.rb.setToGeometry(QgsGeometry.fromPolygon([polygon]), None)


Thanks
Vinayan


-------- Original Message --------
Subject: 	Re: WG: "Rectangles ovals digitizing" plugin is broken in QGIS 
1.9
Date: 	Tue, 22 Jan 2013 08:24:00 +0530
From: 	vinayan <vinayan123 at gmail.com>
To: 	Gerhard Spieles <gerhard at spieles.de>



On Tuesday 22 January 2013 02:27 AM, Gerhard Spieles wrote:
> Dear Vinayan Parameswaran,
>
> i have received a message from QGIS bug tracker, that you programmed the rotation feature for all sort objects Lines and polygons) in QGIS core (Feature #1787).
>
> Now I contact you, because of a similar problem.
> There exist a "Rectangles ovals digitizing" plugin, programmed by Pavol Kapusta  ver. 0.1.3 (http://pyqgis.org/repo/contributed). ZIP Archive is attached.
> This excellent programmed plugin can create all regular polygons from triangle,  rectangle, square pentagon hexagon ....   until circle and is able to rotate polygons.
> It functions until QGIS 1.8.0.
> In QGIS master (ver 1.9.0 Alpha), the produced geometries seems not to be closed and when you try to save a produced object, gdal reports, that a line feature can`t saved in a polygon layer.
> Unfortunately Pavol  can`t continue the plugin.
>
> I would ask, wether it is possible, that you  fix the plugin or to take it  into QGIS core in the advanced editing toolbar.
>
> Awaiting hopefully a positive response
>
> Best regards
> Gerhard Spieles
>
>
> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
> -----Urspr?ngliche Nachricht-----
> Von: Pavol Kapusta [mailto:pavol.kapusta at gmail.com]
> Gesendet: Donnerstag, 17. Januar 2013 18:45
> An: Gerhard Spieles
> Betreff: Re: "Rectangles ovals digitizing" plugin is broken in QGIS 1.9
>
> Dear Gerhard Spieles,
>
> I am totally out of GIS business (even don't have QGIS installed on my system around a year), so I am sorry, it is highly unlikely I will contribute to the project.
>
> Best regards
> Pavol
>
> D?a 16.01.2013 23:06, Gerhard Spieles wrote / nap?sal(a):
>> Dear Pavol Kapusta,
>>
>> your plugin for QGIS is a great digitizing tool for generate regular
>> polygons in QGIS.
>>
>> Unfortunately, the plugin reports errors in QGIS 1.9.0 Alpha
>> (QGIS-master). It seems, that the produced objects are not closed.
>>
>> Is it possible to make the plugin functional in QGIS 1.9
>>
>> Thank you very much and best regards
>>
>> Gerhard Spieles
>>
Dear Gerhard,

It is a nice plugin indeed. I checked it and it had the same errors you
mentioned.I have fixed its issues and attached it. Please check.
I will send a mail to the dev list to know how we can update the same
fix in the repository.

Thanks
Vinayan




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130122/18a4bbf0/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rectovalDigit.zip
Type: application/zip
Size: 42302 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130122/18a4bbf0/attachment-0001.zip>

From denis.rouzaud at gmail.com  Mon Jan 21 23:13:06 2013
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Tue, 22 Jan 2013 08:13:06 +0100
Subject: [Qgis-developer] making QgsMapToolIdentify available to plugins
Message-ID: <50FE3C02.6020402@gmail.com>

Hi all,

Following my previous mail, I am trying to make the identify map tool 
available to plugins.

With Matthias Kuhn's help, I've found two ways to achieve this:

- Move QgsMapToolIdentify::identifyVectorLayer and identfiyRasterLayer 
to mapCanvas

- Move QgsMapToolIdentify to gui, and inherits it in 
QgsMapToolIdentifyAction (or whatever) in app.

As far as I understand it, it will be more complicated for the second 
option because app vs non-app code is deeply coupled in the current 
QgsMapToolIdentify. Indeed, features are added one by one to 
QgsIdentifyResults which is a dialog.

But this second option would be much more powerful: the user could 
override the QGIS setting for identify mode (current layer, 
top-down,...) which is used in the canvasReleaseEvent or he could filter 
the type of layer... And he would not have to rewrite the 
canvasReleaseEvent.

I might have missed something, but, I think this would be a great 
addition for plugin-devs.
And before going further, I'd like to know experts' opinions and ideas.

Greetings,

Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130122/fba48710/attachment.html>

From volayaf at gmail.com  Mon Jan 21 23:58:14 2013
From: volayaf at gmail.com (Victor Olaya)
Date: Tue, 22 Jan 2013 08:58:14 +0100
Subject: [Qgis-developer] [Qgis-user] v. in ogr missing from sextante
	toolbox
In-Reply-To: <DUB403-EAS184EF7BB6E7E04D2D8220D7BF160@phx.gbl>
References: <DUB116-W366B6E8D712EF6474DA5FABF170@phx.gbl>
	<CAJsc-7wYbq++9KqOkcRO0d3x-jH+Ana3UAr58BY5CMCs71J7HA@mail.gmail.com>
	<DUB403-EAS184EF7BB6E7E04D2D8220D7BF160@phx.gbl>
Message-ID: <CAJsc-7wBtNpwJfEZKyzXywTUP5097jNWYp+MRQDQL0cKD1jaXw@mail.gmail.com>

Claire

If you just want to convert the shapefile to the convert to grass
format and then run another module (you do not need the topology
checking), then, as I said, there is no need to call v.in.ogr.

Say that you want to run v.clean on your shapefile. From SEXTANTE, you
just run v.clean, and select the shapefile you want to use as input.
SEXTANTE will take care of converting it to GRASS format (calling
v.in.ogr), and then converting the resulting GRASS file into the
format you selected

Anyway, the extra options of v.in.ogr sound interesting, and I did not
know about them, so I might add then to SEXTANTE, to allow advanced
users to control with more detail how the import is done.

Thanks!
Victor


2013/1/22 Claire McIntyre <cmcintyre44 at hotmail.com>:
> Hi Victor,
>
> Thanks for your reply.
>
> I forgot to mention I an using shapefiles. I think i need v. In ogr to convert to GRASS & check topology.
>
> I'm thinking i may need to change my data to GRASS format rather than shapefile.. I'm an arcgis user recently converted to QGIS so still finding my way..
>
> Claire
>
> Sent from mobile device
>
> On 21 Jan 2013, at 09:39 p.m., "Victor Olaya" <volayaf at gmail.com> wrote:
>
>> Claire
>>
>> I do not understand why you need v.in.ogr. You are supposed to open
>> your layers as usual with QGIS, and then just select them in the GRASS
>> algorithm you want to use
>>
>> I hope this helps you
>>
>> Regards
>>
>> Victor
>>
>> 2013/1/21 Claire McIntyre <cmcintyre44 at hotmail.com>:
>>> Hello,
>>>
>>> I have installed QGIS from OSGeo4W standalone installer. I want to check
>>> topology of a polygon layer. I need v. in ogr
>>> tool available in sextante but it is not there. GRASS 6.4.2 was installed
>>> with QGIS 1.8.
>>>
>>> Do i need a newer version of GRASS?
>>> Send
>>> Thanks,
>>> Claire
>>>
>>>
>>> _______________________________________________
>>> Qgis-user mailing list
>>> Qgis-user at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-user
>>>

From madmanwoo at gmail.com  Tue Jan 22 00:02:41 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Tue, 22 Jan 2013 18:02:41 +1000
Subject: [Qgis-developer] making QgsMapToolIdentify available to plugins
In-Reply-To: <50FE3C02.6020402@gmail.com>
References: <50FE3C02.6020402@gmail.com>
Message-ID: <CAAi8Yg80krh+RTW6nP8DpAgJ592BwcFMFsxttGb0E5qYNwHYrQ@mail.gmail.com>

Hey Denis,

Yeah it's a bit of a pain.  I starting to move it a while ago and then lost
motivation as the code was really coupled.

The second option is the best if you can afford to fund it or spend time on
it :)

- Nathan


On Tue, Jan 22, 2013 at 5:13 PM, Denis Rouzaud <denis.rouzaud at gmail.com>wrote:

>  Hi all,
>
> Following my previous mail, I am trying to make the identify map tool
> available to plugins.
>
> With Matthias Kuhn's help, I've found two ways to achieve this:
>
> - Move QgsMapToolIdentify::identifyVectorLayer and identfiyRasterLayer to
> mapCanvas
>
> - Move QgsMapToolIdentify to gui, and inherits it in
> QgsMapToolIdentifyAction (or whatever) in app.
>
> As far as I understand it, it will be more complicated for the second
> option because app vs non-app code is deeply coupled in the current
> QgsMapToolIdentify. Indeed, features are added one by one to
> QgsIdentifyResults which is a dialog.
>
> But this second option would be much more powerful: the user could
> override the QGIS setting for identify mode (current layer, top-down,...)
> which is used in the canvasReleaseEvent or he could filter the type of
> layer... And he would not have to rewrite the canvasReleaseEvent.
>
> I might have missed something, but, I think this would be a great addition
> for plugin-devs.
> And before going further, I'd like to know experts' opinions and ideas.
>
> Greetings,
>
> Denis
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130122/ab3b19c6/attachment.html>

From cavallini at faunalia.it  Tue Jan 22 00:20:38 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 22 Jan 2013 09:20:38 +0100
Subject: [Qgis-developer] pyspatialite in the standalone
Message-ID: <50FE4BD6.3080107@faunalia.it>

Hi all.
AFAICT, the standalone installer has a different pyspatialite than the
osgeo4w installer. This may cause problems, e.g. for plugins who cannot
assume a fixed version of spatialite. Wouldn't it be better to release a
1.8.2 with the updated pyspatialite, so the two are aligned?
Thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From cavallini at faunalia.it  Tue Jan 22 00:30:24 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 22 Jan 2013 09:30:24 +0100
Subject: [Qgis-developer] Fwd: Re: WG: "Rectangles ovals digitizing"
 plugin is broken in QGIS 1.9
In-Reply-To: <50FE01A1.1040207@gmail.com>
References: <50FDFF48.2000805@gmail.com> <50FE01A1.1040207@gmail.com>
Message-ID: <50FE4E20.1090006@faunalia.it>

Il 22/01/2013 04:04, vinayan ha scritto:
>
> Today I got a mail from one of our users mentioning that the plugin
> "Rectangles ovals digitizing" is broken. He first contacted the plugin
> author and it seems he is not currently supporting it. I made the
> changes so that the plugin works now. How can we can update the same
> fix in the contributed plugins repository? Is it hosted on github
> where a pull request can be issued? I am sure quite a few people would
> be using it.
>
Hi Vinayan,
thanks for the fix. This raises up once more the old standing issue of
how to cooperate in plugin development. This is currently less smooth
than in core, and IMHO more difficult than it should be.
In this case, the plugin has not been migrated to the new repo, so I
suggest you to ask the author if he agrees, and migrate it yourself,
adding the fix. This would be much appreciated by many authors.
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130122/6257ff90/attachment.html>

From radim.blazek at gmail.com  Tue Jan 22 00:43:10 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Tue, 22 Jan 2013 09:43:10 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
Message-ID: <CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>

On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
> Radim,
>             This dataset is a huge collection of imagery encompassing an area approximately 350 kilometres square. There are over 5000 images in the dataset, with each image having a .5m pixel size and a file size of 293Mb and I doubt that it is feasible to request a small sample image from the entire range of the imagery. Is there some way that we can get QGIS to request an image from a much smaller area (like the extent of the viewport) to establish the validity of the dataset?

Currently not. It would be necessary to disable the check for max
extent. I am willing to add workarounds for various server
particularities (the check for true max extent is one of them) but in
this case I am not quite convinced. It is obviously server problem.
The server offers capabilities which it cannot fulfill.

I'll consider to allow to pass the extent check without error.
However, the request will be done and it will wait timeout until it
fails.

I think that GDAL does not do that check, so you can create GDAL WCS
XML file and open it as raster file.

Radim

> Ultimately we want to work with a dataset of .2m sized pixels and individual images of 2.94Gb and four bands.
>
> Thanks for your help,
>
>          Bob Bruce
>
> Sent from my iPhone
>
> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>
> Frank,
>
> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
> in QGIS it is used to get true extent. It may happen that a server is
> misconfigured and reports larger extent in
> GetCapabilities/DescribeCoverage and successive request inside that
> extent but outside the real coverage extent would fail. Requesting the
> whole extent and getting
> its real extent is the only way AFAIK to get real extent.
>
> Radim
>
> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:
>> Bruce,
>>
>> I think the 10x10 request is being made by GDAL's WCS driver in order
>> to establish some details about the underlying WCS and it defaults to
>> the whole extents.  It sucks fairly badly that such a request can't be
>> done.  It might be possible to dummy in the information in the .wcs
>> config file to avoid having to do that query.  Investigating.
>>
>> Best regards,
>> Frank
>>
>>
>>
>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>> Radim,
>>>     I have been looking at this again with two people from Cubewerx and we find that QGIS is issuing this request:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>
>>> while the bounding box that I currently have displayed in QGIS is roughly:
>>>
>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>
>>> I need to get QGIS to restrict its request to this extent to work. Do you know how I can do that?
>>>
>>> If I issue this request from my web browser:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>
>>> I actually get a tiff image that I can view that looks good and is similar to what I would expect to see in QGIS. Now I need to get QGIS to actually issue that request.
>>>
>>> Thanks,
>>>       Bob Bruce
>>>
>>> -----Original Message-----
>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>> Sent: January-18-13 3:36 AM
>>> To: Bruce, Bob (CON)
>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>
>>> Hi again,
>>>
>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>> I don't see the same problem here. GetCapabilities and
>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>> connection details dialog and it was logged on server but that is
>>>> another issue?
>>>>
>>>> I have got another error however. DescribeCoverage is successfully
>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>> raster to get more info):
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>
>>>> and it fails on server side with:
>>>>
>>>> "Gateway Time-out
>>>> The gateway did not receive a timely response from the upstream server
>>>> or application."
>>>>
>>>> Because the request covers the whole extent, it could be that the
>>>> raster is quite large and there are no overviews/pyramids ready on
>>>> server, it starts to do resampling of the whole extent but it takes to
>>>> much time?
>>>
>>> It really seems to be the problem, I have tried with smaller extent
>>> and server sent a correct TIFF in response. In any case it takes very
>>> long time.
>>>
>>> Radim
>>>
>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>> usually printed requests which failed and in debug messages are
>>>> printed all requests.
>>>>
>>>> Radim
>>>>
>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>>>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>
>>>>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>>>>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>>>>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>>>>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>>>>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>>>>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>>>>> This copy of QGIS writes debugging output.
>>>>>
>>>>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>
>>>>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>>>>
>>>>> This is the request that they are finding in their server log:
>>>>>       2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>
>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>
>>>>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>>>>       WCS provider: Cannot calculate extent
>>>>>       (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>>>       Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>       (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>>
>>>>> Thanks,
>>>>>       Bob Bruce
>>>>>
>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>> Sent: January-17-13 3:33 PM
>>>>> To: Bruce, Bob (CON)
>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>
>>>>> Bob,
>>>>>
>>>>> FYI...
>>>>>
>>>>> ekeighan at cubewerx.com wrote:
>>>>>
>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>> QgsRasterLayer::setDataProvider)
>>>>>
>>>>> Is there something at your end that could be changed to allow this to
>>>>> calculate the extent?
>>>>> Looking through the server log, we see only the following related request
>>>>> present twice:
>>>>>
>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>
>>>>> ---------------------------------------------------------------
>>>>>
>>>>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>
>>>>> but it almost seems as though it was entered improperly as:
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>
>>>>> The WCS request received from the client produces an error return, since
>>>>> the server has problems parsing the broken request:
>>>>>
>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>> <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>>>>   <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>   <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>>>> </Exception>
>>>>> </ExceptionReport>
>>>>>
>>>>> The first request from the client should be just a proper GetCapabilities
>>>>> request:
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>
>>>>> which returns the expected data.
>>>>> -------------------------------------------------
>>>>>
>>>>> Regards,
>>>>>
>>>>> Edric
>>>>>
>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>> Edric,
>>>>>           I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>>>>
>>>>> WCS provider: Cannot calculate extent
>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>>
>>>>> Is there something at your end that could be changed to allow this to calculate the extent?
>>>>>
>>>>> Thanks,
>>>>>           Bob
>>>>>
>>>>> *******************************************************************************************************************
>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>>>>> **                                                  49-54-31.85N,97-12-16.08W
>>>>> **
>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>> *******************************************************************************************************************
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From kaotika at gmx.de  Tue Jan 22 01:33:16 2013
From: kaotika at gmx.de (Matthias Ludwig)
Date: Tue, 22 Jan 2013 10:33:16 +0100
Subject: [Qgis-developer] QGIS, Python and Threads
Message-ID: <20130122093316.171430@gmx.net>

Hello,

I try to write a plugin in python. The plugin will be part of a complex plugin and will make a longer running numpy calculation. I want the GUI to be responsive during the calculation. As a basis I used Aaron Racicots(http://svn.reprojected.com/qgisplugins/trunk/threading_demo/) threading example and modified the run code (the calculation is only an example). Unfortunately it does not what I want it to do...it hangs during calculation. Did I missed a thing?


import numpy

class TestThread(QThread):
    def __init__(self, parentThread,parentObject):
        QThread.__init__(self, parentThread)
        self.parent = parentObject
        self.running = False
        self.total = 0
        self.currentCount = 0

    def __del__(self):
        self.running = False
        self.wait()
        
    def run(self):
        self.running = True        
	A = numpy.random.random((2000,2000))
	b = numpy.random.random((2000,1))
	x = numpy.linalg.solve(A, b)
	print x.trace()
        self.emit(SIGNAL("runFinished(PyQt_PyObject)"),"Pass")
        self.stop()

    def stop(self):
        self.running = False
        
    def getUpdate(self):
        return self.currentCount

From cavallini at faunalia.it  Tue Jan 22 01:48:14 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 22 Jan 2013 10:48:14 +0100
Subject: [Qgis-developer] Redmine frequent errors
Message-ID: <50FE605E.7080303@faunalia.it>

Hi all.
I'm getting frequent errors from http://hub.qgis.org/login :

Internal error
An error occurred on the page you were trying to access.
If you continue to experience problems please contact your redMine
administrator for assistance.
Back <javascript:history.back()>

Anything we can do?
Thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130122/4a6e3f5f/attachment.html>

From i.packham at ucd.ie  Tue Jan 22 04:28:21 2013
From: i.packham at ucd.ie (Ian Packham)
Date: Tue, 22 Jan 2013 04:28:21 -0800 (PST)
Subject: [Qgis-developer] Opening a Shape file with out any browsing
In-Reply-To: <1358748443.58916.YahooMailNeo@web190501.mail.sg3.yahoo.com>
References: <1358748443.58916.YahooMailNeo@web190501.mail.sg3.yahoo.com>
Message-ID: <1358857701963-5028956.post@n6.nabble.com>

Dear D Pardhu.

You should be able to find your answer to these question(s) in the Python
cookbook:

http://qgis.org/pyqgis-cookbook/

In particular the Loading Vector Layers chapter (OGR library):

http://qgis.org/pyqgis-cookbook/loadlayer.html

and maybe the Reading and Storing Settings chapter for saving or loading
project settings (depending on what you want to do...):

http://qgis.org/pyqgis-cookbook/settings.html

Regards

Ian



PARDHU D wrote
> Can anyone please send me the code for QGIS project (saved by the user) or
> What is the code for QGIS when saving as a project. I just want 
> to know the code for shape file (.shp file) in the QGIS project. 
> Mainly I want code for adding shape file without any browsing. Can any 
> one please send me a simple program for opening a shape file without 
> browsing.





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Opening-a-Shape-file-with-out-any-browsing-tp5028615p5028956.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From cavallini at faunalia.it  Tue Jan 22 08:52:40 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 22 Jan 2013 17:52:40 +0100
Subject: [Qgis-developer] problem in csw plugin
Message-ID: <50FEC3D8.1010703@faunalia.it>

Hi all.
The recently upgraded plugin fails to install with:
'module' object has no attribute 'classFactory'
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130122/daf390fc/attachment.html>

From Bob.Bruce at gov.mb.ca  Tue Jan 22 09:03:17 2013
From: Bob.Bruce at gov.mb.ca (Bruce, Bob (CON))
Date: Tue, 22 Jan 2013 11:03:17 -0600
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho
	Refresh	WCS
In-Reply-To: <CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
	<CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
Message-ID: <DC49060A7E430243BF2D4090200661931AD3B6B536@OC1EX201.ME.MBGOV.CA>

Radim,

Thanks for getting back to me.

The GDAL WCS XML file sounds like it is the way to go. I have created a simple XML file:

<WCS_GDAL>
  <ServiceURL>http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store</ServiceURL>
  <CoverageName>image_set</CoverageName>
</WCS_GDAL>

How would I go about opening this in QGIS?

Bob Bruce

-----Original Message-----
From: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] On Behalf Of Radim Blazek
Sent: January-22-13 2:43 AM
To: Bob Bruce
Cc: Qgis-Developer; ekeighan at cubewerx.com
Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS

On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
> Radim,
>             This dataset is a huge collection of imagery encompassing an area approximately 350 kilometres square. There are over 5000 images in the dataset, with each image having a .5m pixel size and a file size of 293Mb and I doubt that it is feasible to request a small sample image from the entire range of the imagery. Is there some way that we can get QGIS to request an image from a much smaller area (like the extent of the viewport) to establish the validity of the dataset?

Currently not. It would be necessary to disable the check for max
extent. I am willing to add workarounds for various server
particularities (the check for true max extent is one of them) but in
this case I am not quite convinced. It is obviously server problem.
The server offers capabilities which it cannot fulfill.

I'll consider to allow to pass the extent check without error.
However, the request will be done and it will wait timeout until it
fails.

I think that GDAL does not do that check, so you can create GDAL WCS
XML file and open it as raster file.

Radim

> Ultimately we want to work with a dataset of .2m sized pixels and individual images of 2.94Gb and four bands.
>
> Thanks for your help,
>
>          Bob Bruce
>
> Sent from my iPhone
>
> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>
> Frank,
>
> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
> in QGIS it is used to get true extent. It may happen that a server is
> misconfigured and reports larger extent in
> GetCapabilities/DescribeCoverage and successive request inside that
> extent but outside the real coverage extent would fail. Requesting the
> whole extent and getting
> its real extent is the only way AFAIK to get real extent.
>
> Radim
>
> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:
>> Bruce,
>>
>> I think the 10x10 request is being made by GDAL's WCS driver in order
>> to establish some details about the underlying WCS and it defaults to
>> the whole extents.  It sucks fairly badly that such a request can't be
>> done.  It might be possible to dummy in the information in the .wcs
>> config file to avoid having to do that query.  Investigating.
>>
>> Best regards,
>> Frank
>>
>>
>>
>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>> Radim,
>>>     I have been looking at this again with two people from Cubewerx and we find that QGIS is issuing this request:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>
>>> while the bounding box that I currently have displayed in QGIS is roughly:
>>>
>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>
>>> I need to get QGIS to restrict its request to this extent to work. Do you know how I can do that?
>>>
>>> If I issue this request from my web browser:
>>>
>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>
>>> I actually get a tiff image that I can view that looks good and is similar to what I would expect to see in QGIS. Now I need to get QGIS to actually issue that request.
>>>
>>> Thanks,
>>>       Bob Bruce
>>>
>>> -----Original Message-----
>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>> Sent: January-18-13 3:36 AM
>>> To: Bruce, Bob (CON)
>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>
>>> Hi again,
>>>
>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>> I don't see the same problem here. GetCapabilities and
>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>> connection details dialog and it was logged on server but that is
>>>> another issue?
>>>>
>>>> I have got another error however. DescribeCoverage is successfully
>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>> raster to get more info):
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>
>>>> and it fails on server side with:
>>>>
>>>> "Gateway Time-out
>>>> The gateway did not receive a timely response from the upstream server
>>>> or application."
>>>>
>>>> Because the request covers the whole extent, it could be that the
>>>> raster is quite large and there are no overviews/pyramids ready on
>>>> server, it starts to do resampling of the whole extent but it takes to
>>>> much time?
>>>
>>> It really seems to be the problem, I have tried with smaller extent
>>> and server sent a correct TIFF in response. In any case it takes very
>>> long time.
>>>
>>> Radim
>>>
>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>> usually printed requests which failed and in debug messages are
>>>> printed all requests.
>>>>
>>>> Radim
>>>>
>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>>>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>
>>>>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>>>>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>>>>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>>>>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>>>>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>>>>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>>>>> This copy of QGIS writes debugging output.
>>>>>
>>>>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>
>>>>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>>>>
>>>>> This is the request that they are finding in their server log:
>>>>>       2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>
>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>
>>>>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>>>>       WCS provider: Cannot calculate extent
>>>>>       (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>>>       Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>       (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>>
>>>>> Thanks,
>>>>>       Bob Bruce
>>>>>
>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>> Sent: January-17-13 3:33 PM
>>>>> To: Bruce, Bob (CON)
>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>
>>>>> Bob,
>>>>>
>>>>> FYI...
>>>>>
>>>>> ekeighan at cubewerx.com wrote:
>>>>>
>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>> QgsRasterLayer::setDataProvider)
>>>>>
>>>>> Is there something at your end that could be changed to allow this to
>>>>> calculate the extent?
>>>>> Looking through the server log, we see only the following related request
>>>>> present twice:
>>>>>
>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>
>>>>> ---------------------------------------------------------------
>>>>>
>>>>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>
>>>>> but it almost seems as though it was entered improperly as:
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>
>>>>> The WCS request received from the client produces an error return, since
>>>>> the server has problems parsing the broken request:
>>>>>
>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>> <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>>>>   <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>   <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>>>> </Exception>
>>>>> </ExceptionReport>
>>>>>
>>>>> The first request from the client should be just a proper GetCapabilities
>>>>> request:
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>
>>>>> which returns the expected data.
>>>>> -------------------------------------------------
>>>>>
>>>>> Regards,
>>>>>
>>>>> Edric
>>>>>
>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>> Edric,
>>>>>           I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>>>>
>>>>> WCS provider: Cannot calculate extent
>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>>
>>>>> Is there something at your end that could be changed to allow this to calculate the extent?
>>>>>
>>>>> Thanks,
>>>>>           Bob
>>>>>
>>>>> *******************************************************************************************************************
>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>>>>> **                                                  49-54-31.85N,97-12-16.08W
>>>>> **
>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>> *******************************************************************************************************************
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Tue Jan 22 09:43:43 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 22 Jan 2013 18:43:43 +0100
Subject: [Qgis-developer] PostGIS topology plugin
Message-ID: <50FECFCF.6030300@faunalia.it>

Hi all.
Sandro Santilli has just published a plugin who allows to show all the
details of PostGIS topologies, and do some editing. A work in progress,
but a major breaktrhough for those who use it.
Thanks strk.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From strk at keybit.net  Tue Jan 22 10:41:24 2013
From: strk at keybit.net (Sandro Santilli)
Date: Tue, 22 Jan 2013 19:41:24 +0100
Subject: [Qgis-developer] PostGIS topology plugin
In-Reply-To: <50FECFCF.6030300@faunalia.it>
References: <50FECFCF.6030300@faunalia.it>
Message-ID: <20130122184124.GB31686@gnash>

Actually, the plugin showing all details is part of db_manager
so already in core. The new thing is the editor plugin but is
very very basic at the moment. Contributions are welcome.

--strk;

On Tue, Jan 22, 2013 at 06:43:43PM +0100, Paolo Cavallini wrote:
> Hi all.
> Sandro Santilli has just published a plugin who allows to show all the
> details of PostGIS topologies, and do some editing. A work in progress,
> but a major breaktrhough for those who use it.
> Thanks strk.

From larrys at dakotacarto.com  Tue Jan 22 16:10:11 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Tue, 22 Jan 2013 17:10:11 -0700
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <50171914.4030002@szczepanek.pl>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile>
	<501137A1.8030701@szczepanek.pl> <50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
Message-ID: <CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>

Hi,

I am bringing this discussion back up, because some of us think it's
important to address before the upcoming 2.0 release.

Here are my recommendations (in workflow order):

1) Create a new graphics repository at github.com, e.g. named
'qgis-graphics'.

It is important that a single repository exist where designers/developers
can find and work on SVG originals/components for creating new, or updating
existing, icons and graphics, without mucking about in the actual QGIS
source repository. This allows commit access to be specifically granted to
designers, etc. without granting access to the source code repo. This could
be similar to the one at osgeo.org [0], but specific to QGIS. It should

This allows pull requests, like from olivierdalang [1], to also include the
base working documents (SVG) in a separate pull request to the graphics
repo, for use in future icon compositions, without having to store the
graphics source files in the source code repository (which could increase
download size significantly). IMO, the only graphics files in the source
code repo should be those that get installed with 'make install'.

2) Condense current icons/pixmaps used in QGIS from all themes into just
the default theme, with preference to vote-preferred GIS theme. Move the
discarded icons and themes to the graphics repo, for later reference.

3) Copy any relevant SVG/pixmap sources from OSGeo repo [0] and Robert
Szczepanek's source icon work (that may not be in current source code repo)
[2] to new qgis-graphics repository.

4) Try to convert ALL new default theme icons to SVG, which may mean
recreating many as vector art since the embedded-raster-in-SVG method
doesn't seem to work well now (causes ugly upscaling) [3]. It should be
possible to fix that issue in code, allowing for use of pixmaps-inside-SVG,
until they are converted to vector-based SVGs.

5) Clean up source code to work with only .svg icon files. But, do not
remove any code for theme choice, so that designers can still work on new
themes without having to replace the existing default one.

Considerations:

* Maybe look into some funding for someone, like Robert, to work on 1) thru
4).

* It is also a good project for asking help from non-coding users who may
want to get involved as contributors. This would be after 1).

[0] http://trac.osgeo.org/osgeo/browser/graphics
[1] https://github.com/qgis/Quantum-GIS/pull/398/files
[2] http://robert.szczepanek.pl/icons.php
[3]
http://osgeo-org.1560.n6.nabble.com/SVG-Icons-instead-of-PNGs-td4991647.html
[4]
http://osgeo-org.1560.n6.nabble.com/Cast-your-vote-Default-icon-theme-for-QGIS-2-0-td4987107.html

See also: http://hub.qgis.org/wiki/quantum-gis/Icons_20

Regards,

Larry Shaffer
Dakota Cartography
Black Hills, South Dakota


On Mon, Jul 30, 2012 at 5:30 PM, Robert Szczepanek <robert at szczepanek.pl>wrote:

> Hi,
>
> On 29.07.2012 00:06, Larry Shaffer wrote:
>
>> In my own experimentation with Qt icon scaling, I have found scripting
>> ImageMagick or Photoshop to do the up/down-scaling, with or without a
>> bit of sharpening applied afterword, to produce better quality icons
>> than the Qt scaling. It may be good enough quality to preclude
>> re-creating your icons for the other sizes.
>>
>
> If the results are better, it can be simple solution.
>
>  Another option is to design icons with fewer details and higher
>> contrast so that they still look OK when scaled (see MSSQL icon in
>> Giovanni's QGIS example). I believe this would also address the issue
>> of some icon groups looking too busy due to too much detail, example:
>> the 'Add * Layer' icons of your set.
>>
>
> This is only matter of decision and use of simpler version, without
> "layer" sign. With bigger raster/vector/WMS/etc.
>
>  Having multiple size sets for icons means some naming conventions and
>> coding to switch between the sets; whereas now, the code simply asks
>> Qt to handle the scaling by setting a toolbar's icon size in one call
>> (as an example). Another good reason to go with icons that can cope
>> with Qt's scaling: no code changes.
>>
>
> Different folders could be solution if Qt's scaling won't work?
>
>  Switching between size sets also means any third party icons (e.g.
>> plugins), that don't provide multiple icon versions, will have their
>> icons scaled. This would end up with users seeing different quality
>> between core and plugin toolbars, though I don't know how much this
>> can be avoided regardless of scaling issues.
>>
>
> This is very important argument in favour of one SVG file.
>
>  So, my vote here for your icon set would be to go with only the 24x24
>> size, reduce the complexity of the most complex icons, increase
>> overall contrast where needed, and add any 2.5 effects to make them
>> pop a bit more (but not if such an effect causes the blurry scaling
>> problem or poor quality to occur).
>>
>
> Agree.
> Robert
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130122/be5d216f/attachment.html>

From kelly.thomas at hotmail.com.au  Tue Jan 22 19:07:25 2013
From: kelly.thomas at hotmail.com.au (Kelly Thomas)
Date: Wed, 23 Jan 2013 14:07:25 +1100
Subject: [Qgis-developer] QGIS, Python and Threads
In-Reply-To: <20130122093316.171430@gmx.net>
References: <20130122093316.171430@gmx.net>
Message-ID: <SNT002-W152337C0F0D2D5A9E27F33CA0150@phx.gbl>

Hi Matthias,
I had a similar problem a couple of weeks back.  While I was unable to identify why my first attempt was failing I was able to produce a functioning implementation on the second attempt.
I posted my problem (and later a working solution) over here. [1]
Another gotcha to be aware of is that any python errors that occur in the other thread will be displayed in the Message Log, I find it useful to have this as a floating window during development.
[1] http://gis.stackexchange.com/questions/45514/how-do-i-maintain-a-resposive-gui-using-qthread-with-pyqgis
Good Luck,Kelly Thomas
> Date: Tue, 22 Jan 2013 10:33:16 +0100
> From: kaotika at gmx.de
> Hello,
> I try to write a plugin in python. The plugin will be part of a complex plugin and will make a longer running numpy> calculation. I want the GUI to be responsive during the calculation. As a basis I used Aaron > Racicots(http://svn.reprojected.com/qgisplugins/trunk/threading_demo/) threading example and modified the run code (the > calculation is only an example). Unfortunately it does not what I want it to do...it hangs during calculation. Did I missed a >thing?

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130123/f960265e/attachment.html>

From kelly.thomas at hotmail.com.au  Tue Jan 22 19:35:43 2013
From: kelly.thomas at hotmail.com.au (Kelly Thomas)
Date: Wed, 23 Jan 2013 14:35:43 +1100
Subject: [Qgis-developer] QGIS, Python and Threads
In-Reply-To: <SNT002-W152337C0F0D2D5A9E27F33CA0150@phx.gbl>
References: <20130122093316.171430@gmx.net>,
	<SNT002-W152337C0F0D2D5A9E27F33CA0150@phx.gbl>
Message-ID: <SNT002-W190522EFD7513F102468298A0150@phx.gbl>

>Another gotcha to be aware of is that any python errors that occur in the other thread will be displayed in the Message>Log, I find it useful to have this as a floating window during development.

I think it's an indenting error.It looks like your code is indented with tabs, while the other code is indented with spaces.
This happens to me all the time if I mix code from different sources. 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130123/740bfb1f/attachment.html>

From qgis.dev0001 at gmail.com  Tue Jan 22 21:23:14 2013
From: qgis.dev0001 at gmail.com (leena S)
Date: Wed, 23 Jan 2013 09:23:14 +0400
Subject: [Qgis-developer] QgsRasterLayer::loadProviderLibrary: Failed to load
Message-ID: <CAHpmJtKzu_nLZ3VA0iefm-bya9Laa2wXBZD806O453CU2xdTHw@mail.gmail.com>

i am trying to load a simple tif file as a raster layer with my qtcreator,
it was working fine with me before updating my ubuntu from 11.04 to 12.10
i keep getting "QgsRasterLayer::loadProviderLibrary: Failed to load"

QgsRasterLayer * mypLayer = new QgsRasterLayer(src,base);

    if (mypLayer->isValid())/// always return invalid layer with ubuntu
12.10 but it is workin fine with ubuntu 11.04
    {
        emit error("Layer is valid");
    }
    else
    {
        emit error("Layer is NOT valid");
        return;
    }

how can i fix this problem ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130123/065bdbee/attachment.html>

From bernhard.stroebl at jena.de  Tue Jan 22 23:38:45 2013
From: bernhard.stroebl at jena.de (=?UTF-8?B?QmVybmhhcmQgU3Ryw7ZibA==?=)
Date: Wed, 23 Jan 2013 08:38:45 +0100
Subject: [Qgis-developer] remove action using Python
Message-ID: <50FF9385.3030007@jena.de>

Dear all,
in a plugin I add a Python action to a layer with this:

myLayer.actions().addAction(1, myActionName, myPythonCode)

upon unloading the plugin I would like to remove the action from the 
layer (because some of the code needed is in the plugin) but I did not 
find a method to do so.

I could
1) loop through all actions and store them in an array (except the one I 
want to remove
2) use clearActions() method
3) loop through the array and use
addAction(thisAction.type(), thisAction.name(), thisAction.action())
to reestablish all other actions

any better solutions for this?

Bernhard

From werner.macho at gmail.com  Wed Jan 23 00:07:08 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Wed, 23 Jan 2013 09:07:08 +0100
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile>
	<501137A1.8030701@szczepanek.pl> <50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
	<CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
Message-ID: <CA+3oMjvUC7gzUNc2X9j7M3d3up7ArWxARYi4ns-aT4hJ10S9Qw@mail.gmail.com>

Hi!

Fully
+1
for every points ..

Notice: I personally don't like to split up things - like creating a new
repository .. but in this case it seems reasonable to me ..
Shouldn't it be possible with git to link the graphics repository into the
correct place in source code? Any git professionals here?

kind regards
Werner



On Wed, Jan 23, 2013 at 1:10 AM, Larry Shaffer <larrys at dakotacarto.com>wrote:

> Hi,
>
> I am bringing this discussion back up, because some of us think it's
> important to address before the upcoming 2.0 release.
>
> Here are my recommendations (in workflow order):
>
> 1) Create a new graphics repository at github.com, e.g. named
> 'qgis-graphics'.
>
> It is important that a single repository exist where designers/developers
> can find and work on SVG originals/components for creating new, or updating
> existing, icons and graphics, without mucking about in the actual QGIS
> source repository. This allows commit access to be specifically granted to
> designers, etc. without granting access to the source code repo. This could
> be similar to the one at osgeo.org [0], but specific to QGIS. It should
>
> This allows pull requests, like from olivierdalang [1], to also include
> the base working documents (SVG) in a separate pull request to the graphics
> repo, for use in future icon compositions, without having to store the
> graphics source files in the source code repository (which could increase
> download size significantly). IMO, the only graphics files in the source
> code repo should be those that get installed with 'make install'.
>
> 2) Condense current icons/pixmaps used in QGIS from all themes into just
> the default theme, with preference to vote-preferred GIS theme. Move the
> discarded icons and themes to the graphics repo, for later reference.
>
> 3) Copy any relevant SVG/pixmap sources from OSGeo repo [0] and Robert
> Szczepanek's source icon work (that may not be in current source code repo)
> [2] to new qgis-graphics repository.
>
> 4) Try to convert ALL new default theme icons to SVG, which may mean
> recreating many as vector art since the embedded-raster-in-SVG method
> doesn't seem to work well now (causes ugly upscaling) [3]. It should be
> possible to fix that issue in code, allowing for use of pixmaps-inside-SVG,
> until they are converted to vector-based SVGs.
>
> 5) Clean up source code to work with only .svg icon files. But, do not
> remove any code for theme choice, so that designers can still work on new
> themes without having to replace the existing default one.
>
> Considerations:
>
> * Maybe look into some funding for someone, like Robert, to work on 1)
> thru 4).
>
> * It is also a good project for asking help from non-coding users who may
> want to get involved as contributors. This would be after 1).
>
> [0] http://trac.osgeo.org/osgeo/browser/graphics
> [1] https://github.com/qgis/Quantum-GIS/pull/398/files
> [2] http://robert.szczepanek.pl/icons.php
> [3]
> http://osgeo-org.1560.n6.nabble.com/SVG-Icons-instead-of-PNGs-td4991647.html
> [4]
> http://osgeo-org.1560.n6.nabble.com/Cast-your-vote-Default-icon-theme-for-QGIS-2-0-td4987107.html
>
> See also: http://hub.qgis.org/wiki/quantum-gis/Icons_20
>
> Regards,
>
> Larry Shaffer
> Dakota Cartography
> Black Hills, South Dakota
>
>
> On Mon, Jul 30, 2012 at 5:30 PM, Robert Szczepanek <robert at szczepanek.pl>wrote:
>
>> Hi,
>>
>> On 29.07.2012 00:06, Larry Shaffer wrote:
>>
>>> In my own experimentation with Qt icon scaling, I have found scripting
>>> ImageMagick or Photoshop to do the up/down-scaling, with or without a
>>> bit of sharpening applied afterword, to produce better quality icons
>>> than the Qt scaling. It may be good enough quality to preclude
>>> re-creating your icons for the other sizes.
>>>
>>
>> If the results are better, it can be simple solution.
>>
>>  Another option is to design icons with fewer details and higher
>>> contrast so that they still look OK when scaled (see MSSQL icon in
>>> Giovanni's QGIS example). I believe this would also address the issue
>>> of some icon groups looking too busy due to too much detail, example:
>>> the 'Add * Layer' icons of your set.
>>>
>>
>> This is only matter of decision and use of simpler version, without
>> "layer" sign. With bigger raster/vector/WMS/etc.
>>
>>  Having multiple size sets for icons means some naming conventions and
>>> coding to switch between the sets; whereas now, the code simply asks
>>> Qt to handle the scaling by setting a toolbar's icon size in one call
>>> (as an example). Another good reason to go with icons that can cope
>>> with Qt's scaling: no code changes.
>>>
>>
>> Different folders could be solution if Qt's scaling won't work?
>>
>>  Switching between size sets also means any third party icons (e.g.
>>> plugins), that don't provide multiple icon versions, will have their
>>> icons scaled. This would end up with users seeing different quality
>>> between core and plugin toolbars, though I don't know how much this
>>> can be avoided regardless of scaling issues.
>>>
>>
>> This is very important argument in favour of one SVG file.
>>
>>  So, my vote here for your icon set would be to go with only the 24x24
>>> size, reduce the complexity of the most complex icons, increase
>>> overall contrast where needed, and add any 2.5 effects to make them
>>> pop a bit more (but not if such an effect causes the blurry scaling
>>> problem or poor quality to occur).
>>>
>>
>> Agree.
>> Robert
>>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130123/7d96e9ab/attachment.html>

From cavallini at faunalia.it  Wed Jan 23 01:05:45 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 23 Jan 2013 10:05:45 +0100
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile>
	<501137A1.8030701@szczepanek.pl> <50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
	<CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
Message-ID: <50FFA7E9.3040406@faunalia.it>

Il 23/01/2013 01:10, Larry Shaffer ha scritto:
>
> * Maybe look into some funding for someone, like Robert, to work on 1)
> thru 4).
We (I) can start a BidForFix project for this.
Thanks for your thoughts.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From radim.blazek at gmail.com  Wed Jan 23 01:06:55 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed, 23 Jan 2013 10:06:55 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <50FEC2E9.6080401@cubewerx.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
	<CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
	<50FEC2E9.6080401@cubewerx.com>
Message-ID: <CAEMrtYpimrcXFjBmiwx=ByKY_gV0YVu_=s3yOeBXLaxhGTeHtQ@mail.gmail.com>

On Tue, Jan 22, 2013 at 5:48 PM, ekeighan <ekeighan at cubewerx.com> wrote:
> Radim,
>
> Our WCS was designed to be used as per the intent of the OGC WCS
> specification for extracting data, not for browsing it. The OGC WMS or WMTS
> is intended to be used for browsing.

Just for curiosity, can you point me to an OGC document supporting
this interpretation? In any case, my aim is not to defend how QGIS
works pointing to WCS specification but to get it working in most
cases. If you insist on that interpretation we have to take it as
reality.

> But we admit that the WCS spec is deficient in that it does not describe the
> raster-data type sufficiently nor in a standard way.  E.g., it doesn't tell
> you that the raster data has five channels of 16-bit unsigned integers
> representing Red, Green, Blue, Infrared and Alpha channels.  This is why WCS
> client applications tend to request a sample image.

Indeed, also no data values ...

> GDAL does this in a more friendly way by requesting a small 2x2-pixel sample
> image at the resolution of the source data.  This causes no problems for a
> WCS organized to extract data at the source resolution. We suggest that QGIS
> use the same method to avoid unnecessary problems with our and other
> servers.

QGIS does something similar, i.e. 6x3 pixels on original resolution.
As I already wrote twice, the 10x10 pixels request for the whole
extent is done to verify a real extent of the coverage. Some servers
may report wrong larger extent in capabilities and requests outside
the real extent fail. If I disable this additional check, we get it
working with CubeWerx, but break it for other servers and that is not
the way ahead.

> Our WCS is organized to always access the raw source data in order to
> produce the best image possible for analysis.  However, this approach breaks
> down catastrophically in the QGIS case where your request translates into
> accessing tens of thousands of source images covering multiple terabytes of
> data that needs to be processed to fulfill the 10x10 request. Many
> developers are familiar with this particularity of the WCS (for data
> extraction at source resolution) and use it in tandem with a WMS or WMTS for
> views and only access the WCS when a download at source resolution is
> required, typically for analysis.

This interpretation of the WCS standard degrades it to a richer
download application. I believe that WCS has much more potential.
Maybe the possibilities shifted a bit during the years with broadband
connections and mobile applications?

> In order to support a more flexible access to the WCS we were thinking of
> modifying our access method when zoomed out sufficiently. Source-overview
> files and tile data are available which make WMS and WMTS access very
> efficient. CubeWerx have these products and our clients are of course
> deploying them in addition to a WCS but there can be a problem with both
> approaches in that the secondary data may not match the exact raster data
> type of the source data. E.g., the tiles are rendered for common maps which
> use 3-channel 8-bit RGB, but the source data might be 4-channel 16-bit
> RGB+Infrared.

But it should not be a problem (apart computational time)  to create
lower resolution overviews also for WCS with exactly the same data
types and bands as original data. Is it?

As I said, I would like to fix QGIS to work smoothly also with your
services. An easy workaround is to allow the max extent check to fail
but it will still wait for server timeout. Well, if the server does
not support full extent, it could return WCS error response
immediately instead of timeout error.

Another possibility would be to add an option "Disable max extent
verification" but that is user unfriendly.

Radim

> Regards,
>
> Edric Keighan
> President & CEO
> CubeWerx Inc.
>
> Tel: 613-447-8306 Mobile
>
>
> On 22/01/2013 3:43 AM, Radim Blazek wrote:
>>
>> On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
>>>
>>> Radim,
>>>              This dataset is a huge collection of imagery encompassing an
>>> area approximately 350 kilometres square. There are over 5000 images in the
>>> dataset, with each image having a .5m pixel size and a file size of 293Mb
>>> and I doubt that it is feasible to request a small sample image from the
>>> entire range of the imagery. Is there some way that we can get QGIS to
>>> request an image from a much smaller area (like the extent of the viewport)
>>> to establish the validity of the dataset?
>>
>> Currently not. It would be necessary to disable the check for max
>> extent. I am willing to add workarounds for various server
>> particularities (the check for true max extent is one of them) but in
>> this case I am not quite convinced. It is obviously server problem.
>> The server offers capabilities which it cannot fulfill.
>>
>> I'll consider to allow to pass the extent check without error.
>> However, the request will be done and it will wait timeout until it
>> fails.
>>
>> I think that GDAL does not do that check, so you can create GDAL WCS
>> XML file and open it as raster file.
>>
>> Radim
>>
>>> Ultimately we want to work with a dataset of .2m sized pixels and
>>> individual images of 2.94Gb and four bands.
>>>
>>> Thanks for your help,
>>>
>>>           Bob Bruce
>>>
>>> Sent from my iPhone
>>>
>>> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>
>>> Frank,
>>>
>>> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
>>> in QGIS it is used to get true extent. It may happen that a server is
>>> misconfigured and reports larger extent in
>>> GetCapabilities/DescribeCoverage and successive request inside that
>>> extent but outside the real coverage extent would fail. Requesting the
>>> whole extent and getting
>>> its real extent is the only way AFAIK to get real extent.
>>>
>>> Radim
>>>
>>> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com>
>>> wrote:
>>>>
>>>> Bruce,
>>>>
>>>> I think the 10x10 request is being made by GDAL's WCS driver in order
>>>> to establish some details about the underlying WCS and it defaults to
>>>> the whole extents.  It sucks fairly badly that such a request can't be
>>>> done.  It might be possible to dummy in the information in the .wcs
>>>> config file to avoid having to do that query.  Investigating.
>>>>
>>>> Best regards,
>>>> Frank
>>>>
>>>>
>>>>
>>>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca>
>>>> wrote:
>>>>>
>>>>> Radim,
>>>>>      I have been looking at this again with two people from Cubewerx
>>>>> and we find that QGIS is issuing this request:
>>>>>
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>>>
>>>>> while the bounding box that I currently have displayed in QGIS is
>>>>> roughly:
>>>>>
>>>>>
>>>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>>>
>>>>> I need to get QGIS to restrict its request to this extent to work. Do
>>>>> you know how I can do that?
>>>>>
>>>>> If I issue this request from my web browser:
>>>>>
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>>>
>>>>> I actually get a tiff image that I can view that looks good and is
>>>>> similar to what I would expect to see in QGIS. Now I need to get QGIS to
>>>>> actually issue that request.
>>>>>
>>>>> Thanks,
>>>>>        Bob Bruce
>>>>>
>>>>> -----Original Message-----
>>>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>>>> Sent: January-18-13 3:36 AM
>>>>> To: Bruce, Bob (CON)
>>>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho
>>>>> Refresh WCS
>>>>>
>>>>> Hi again,
>>>>>
>>>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com>
>>>>> wrote:
>>>>>>
>>>>>> I don't see the same problem here. GetCapabilities and
>>>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>>>> connection details dialog and it was logged on server but that is
>>>>>> another issue?
>>>>>>
>>>>>> I have got another error however. DescribeCoverage is successfully
>>>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>>>> raster to get more info):
>>>>>>
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>>>
>>>>>> and it fails on server side with:
>>>>>>
>>>>>> "Gateway Time-out
>>>>>> The gateway did not receive a timely response from the upstream server
>>>>>> or application."
>>>>>>
>>>>>> Because the request covers the whole extent, it could be that the
>>>>>> raster is quite large and there are no overviews/pyramids ready on
>>>>>> server, it starts to do resampling of the whole extent but it takes to
>>>>>> much time?
>>>>>
>>>>> It really seems to be the problem, I have tried with smaller extent
>>>>> and server sent a correct TIFF in response. In any case it takes very
>>>>> long time.
>>>>>
>>>>> Radim
>>>>>
>>>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>>>> usually printed requests which failed and in debug messages are
>>>>>> printed all requests.
>>>>>>
>>>>>> Radim
>>>>>>
>>>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON)
>>>>>> <Bob.Bruce at gov.mb.ca> wrote:
>>>>>>>
>>>>>>> I am having trouble using the WCS capability in version 1.9.0 code
>>>>>>> revision f210668
>>>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>>>
>>>>>>> QGIS version                    1.9.0-Master    QGIS code revision
>>>>>>> f210668
>>>>>>> Compiled against Qt             4.7.1                   Running
>>>>>>> against Qt              4.7.1
>>>>>>> Compiled against GDAL/OGR       1.9.2                   Running
>>>>>>> against GDAL/OGR        1.9.2
>>>>>>> GEOS Version                    3.3.5                   PostgreSQL
>>>>>>> Client Version       8.3.10
>>>>>>> SpatiaLite Version              3.0.1                   QWT Version
>>>>>>> 5.2.1
>>>>>>> PROJ.4 Version                  480                     QScintilla2
>>>>>>> Version             2.6.2
>>>>>>> This copy of QGIS writes debugging output.
>>>>>>>
>>>>>>> The URL that I am connecting to is:
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>>>> The URL of the GetCapabilities request is:
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>>>
>>>>>>> According to Cubewerx, who is our imagery OGC WCS service provider,
>>>>>>> their log shows both the GetCapabilities and GetCoverage requests present in
>>>>>>> the same HTTP request while they should be done separately.
>>>>>>>
>>>>>>> This is the request that they are finding in their server log:
>>>>>>>        2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>> 205.200.189.2 to URL
>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>
>>>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>>>
>>>>>>> Here is the error report that I am seeing in QGIS when I try and add
>>>>>>> this data source to the project:
>>>>>>>        WCS provider: Cannot calculate extent
>>>>>>>        (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>        Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%
>>>>>>> 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>        (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>
>>>>>>> Thanks,
>>>>>>>        Bob Bruce
>>>>>>>
>>>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>>>> Sent: January-17-13 3:33 PM
>>>>>>> To: Bruce, Bob (CON)
>>>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>>>
>>>>>>> Bob,
>>>>>>>
>>>>>>> FYI...
>>>>>>>
>>>>>>> ekeighan at cubewerx.com wrote:
>>>>>>>
>>>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>>>>
>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>
>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>> calculate the extent?
>>>>>>> Looking through the server log, we see only the following related
>>>>>>> request
>>>>>>> present twice:
>>>>>>>
>>>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>> 205.200.189.2 to URL
>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>
>>>>>>> ---------------------------------------------------------------
>>>>>>>
>>>>>>> This doesn't make any sense, since it contains two different REQUEST
>>>>>>> arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>
>>>>>>> but it almost seems as though it was entered improperly as:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>>>
>>>>>>> The WCS request received from the client produces an error return,
>>>>>>> since
>>>>>>> the server has problems parsing the broken request:
>>>>>>>
>>>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1
>>>>>>> http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>>>> <Exception exceptionCode="MissingParameterValue"
>>>>>>> locator="identifiers">
>>>>>>>    <ExceptionText>CubeSERV: Cannot execute WCS request, raised in
>>>>>>> Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>>>    <ExceptionText>CubeSERV: Missing parameter "identifiers", raised
>>>>>>> in throwMissingParamError() in file "cw_cgiparams.c" line
>>>>>>> 797</ExceptionText>
>>>>>>> </Exception>
>>>>>>> </ExceptionReport>
>>>>>>>
>>>>>>> The first request from the client should be just a proper
>>>>>>> GetCapabilities
>>>>>>> request:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>>>
>>>>>>> which returns the expected data.
>>>>>>> -------------------------------------------------
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Edric
>>>>>>>
>>>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>>>> Edric,
>>>>>>>            I took another look at connecting QGIS to your WCS, using
>>>>>>> a newer beta test version. It provided a mechanism to connect to the WCS and
>>>>>>> it allowed me to try and add it to my map. When I tried to add it I got the
>>>>>>> following message:
>>>>>>>
>>>>>>> WCS provider: Cannot calculate extent
>>>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>> Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>
>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>> calculate the extent?
>>>>>>>
>>>>>>> Thanks,
>>>>>>>            Bob
>>>>>>>
>>>>>>>
>>>>>>> *******************************************************************************************************************
>>>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services
>>>>>>> Management
>>>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba
>>>>>>> Conservation and Water Stewardship
>>>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>>>> **                                                  Winnipeg,
>>>>>>> Manitoba, Canada, R3H 0W4
>>>>>>> **
>>>>>>> 49-54-31.85N,97-12-16.08W
>>>>>>> **
>>>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>>>>
>>>>>>> *******************************************************************************************************************
>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Qgis-developer mailing list
>>>>>>> Qgis-developer at lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>>>
>>>> --
>>>>
>>>> ---------------------------------------+--------------------------------------
>>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>>> warmerdam at pobox.com
>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

From radim.blazek at gmail.com  Wed Jan 23 01:07:25 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed, 23 Jan 2013 10:07:25 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <DC49060A7E430243BF2D4090200661931AD3B6B536@OC1EX201.ME.MBGOV.CA>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
	<CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6B536@OC1EX201.ME.MBGOV.CA>
Message-ID: <CAEMrtYpOj5yzwvzRt6W6JtJ99=dKftgnSu0roGHMgdyYrJTE=Q@mail.gmail.com>

On Tue, Jan 22, 2013 at 6:03 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> Radim,
>
> Thanks for getting back to me.
>
> The GDAL WCS XML file sounds like it is the way to go. I have created a simple XML file:
>
> <WCS_GDAL>
>   <ServiceURL>http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store</ServiceURL>
>   <CoverageName>image_set</CoverageName>
> </WCS_GDAL>
>
> How would I go about opening this in QGIS?

Just open the file as raster layer.

Radim

> Bob Bruce
>
> -----Original Message-----
> From: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] On Behalf Of Radim Blazek
> Sent: January-22-13 2:43 AM
> To: Bob Bruce
> Cc: Qgis-Developer; ekeighan at cubewerx.com
> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
>> Radim,
>>             This dataset is a huge collection of imagery encompassing an area approximately 350 kilometres square. There are over 5000 images in the dataset, with each image having a .5m pixel size and a file size of 293Mb and I doubt that it is feasible to request a small sample image from the entire range of the imagery. Is there some way that we can get QGIS to request an image from a much smaller area (like the extent of the viewport) to establish the validity of the dataset?
>
> Currently not. It would be necessary to disable the check for max
> extent. I am willing to add workarounds for various server
> particularities (the check for true max extent is one of them) but in
> this case I am not quite convinced. It is obviously server problem.
> The server offers capabilities which it cannot fulfill.
>
> I'll consider to allow to pass the extent check without error.
> However, the request will be done and it will wait timeout until it
> fails.
>
> I think that GDAL does not do that check, so you can create GDAL WCS
> XML file and open it as raster file.
>
> Radim
>
>> Ultimately we want to work with a dataset of .2m sized pixels and individual images of 2.94Gb and four bands.
>>
>> Thanks for your help,
>>
>>          Bob Bruce
>>
>> Sent from my iPhone
>>
>> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>
>> Frank,
>>
>> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
>> in QGIS it is used to get true extent. It may happen that a server is
>> misconfigured and reports larger extent in
>> GetCapabilities/DescribeCoverage and successive request inside that
>> extent but outside the real coverage extent would fail. Requesting the
>> whole extent and getting
>> its real extent is the only way AFAIK to get real extent.
>>
>> Radim
>>
>> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:
>>> Bruce,
>>>
>>> I think the 10x10 request is being made by GDAL's WCS driver in order
>>> to establish some details about the underlying WCS and it defaults to
>>> the whole extents.  It sucks fairly badly that such a request can't be
>>> done.  It might be possible to dummy in the information in the .wcs
>>> config file to avoid having to do that query.  Investigating.
>>>
>>> Best regards,
>>> Frank
>>>
>>>
>>>
>>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>>> Radim,
>>>>     I have been looking at this again with two people from Cubewerx and we find that QGIS is issuing this request:
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>>
>>>> while the bounding box that I currently have displayed in QGIS is roughly:
>>>>
>>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>>
>>>> I need to get QGIS to restrict its request to this extent to work. Do you know how I can do that?
>>>>
>>>> If I issue this request from my web browser:
>>>>
>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>>
>>>> I actually get a tiff image that I can view that looks good and is similar to what I would expect to see in QGIS. Now I need to get QGIS to actually issue that request.
>>>>
>>>> Thanks,
>>>>       Bob Bruce
>>>>
>>>> -----Original Message-----
>>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>>> Sent: January-18-13 3:36 AM
>>>> To: Bruce, Bob (CON)
>>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>
>>>> Hi again,
>>>>
>>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>>> I don't see the same problem here. GetCapabilities and
>>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>>> connection details dialog and it was logged on server but that is
>>>>> another issue?
>>>>>
>>>>> I have got another error however. DescribeCoverage is successfully
>>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>>> raster to get more info):
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>>
>>>>> and it fails on server side with:
>>>>>
>>>>> "Gateway Time-out
>>>>> The gateway did not receive a timely response from the upstream server
>>>>> or application."
>>>>>
>>>>> Because the request covers the whole extent, it could be that the
>>>>> raster is quite large and there are no overviews/pyramids ready on
>>>>> server, it starts to do resampling of the whole extent but it takes to
>>>>> much time?
>>>>
>>>> It really seems to be the problem, I have tried with smaller extent
>>>> and server sent a correct TIFF in response. In any case it takes very
>>>> long time.
>>>>
>>>> Radim
>>>>
>>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>>> usually printed requests which failed and in debug messages are
>>>>> printed all requests.
>>>>>
>>>>> Radim
>>>>>
>>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>>>>>> I am having trouble using the WCS capability in version 1.9.0 code revision f210668
>>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>>
>>>>>> QGIS version                    1.9.0-Master    QGIS code revision              f210668
>>>>>> Compiled against Qt             4.7.1                   Running against Qt              4.7.1
>>>>>> Compiled against GDAL/OGR       1.9.2                   Running against GDAL/OGR        1.9.2
>>>>>> GEOS Version                    3.3.5                   PostgreSQL Client Version       8.3.10
>>>>>> SpatiaLite Version              3.0.1                   QWT Version                             5.2.1
>>>>>> PROJ.4 Version                  480                     QScintilla2 Version             2.6.2
>>>>>> This copy of QGIS writes debugging output.
>>>>>>
>>>>>> The URL that I am connecting to is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>>> The URL of the GetCapabilities request is: http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>>
>>>>>> According to Cubewerx, who is our imagery OGC WCS service provider, their log shows both the GetCapabilities and GetCoverage requests present in the same HTTP request while they should be done separately.
>>>>>>
>>>>>> This is the request that they are finding in their server log:
>>>>>>       2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>
>>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>>
>>>>>> Here is the error report that I am seeing in QGIS when I try and add this data source to the project:
>>>>>>       WCS provider: Cannot calculate extent
>>>>>>       (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>>>>       Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG% 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>       (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>>>
>>>>>> Thanks,
>>>>>>       Bob Bruce
>>>>>>
>>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>>> Sent: January-17-13 3:33 PM
>>>>>> To: Bruce, Bob (CON)
>>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>>
>>>>>> Bob,
>>>>>>
>>>>>> FYI...
>>>>>>
>>>>>> ekeighan at cubewerx.com wrote:
>>>>>>
>>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>
>>>>>> Is there something at your end that could be changed to allow this to
>>>>>> calculate the extent?
>>>>>> Looking through the server log, we see only the following related request
>>>>>> present twice:
>>>>>>
>>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from 205.200.189.2 to URL "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>
>>>>>> ---------------------------------------------------------------
>>>>>>
>>>>>> This doesn't make any sense, since it contains two different REQUEST arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>
>>>>>> but it almost seems as though it was entered improperly as:
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>>
>>>>>> The WCS request received from the client produces an error return, since
>>>>>> the server has problems parsing the broken request:
>>>>>>
>>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1 http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>>> <Exception exceptionCode="MissingParameterValue" locator="identifiers">
>>>>>>   <ExceptionText>CubeSERV: Cannot execute WCS request, raised in Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>>   <ExceptionText>CubeSERV: Missing parameter "identifiers", raised in throwMissingParamError() in file "cw_cgiparams.c" line 797</ExceptionText>
>>>>>> </Exception>
>>>>>> </ExceptionReport>
>>>>>>
>>>>>> The first request from the client should be just a proper GetCapabilities
>>>>>> request:
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>>
>>>>>> which returns the expected data.
>>>>>> -------------------------------------------------
>>>>>>
>>>>>> Regards,
>>>>>>
>>>>>> Edric
>>>>>>
>>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>>> Edric,
>>>>>>           I took another look at connecting QGIS to your WCS, using a newer beta test version. It provided a mechanism to connect to the WCS and it allowed me to try and add it to my map. When I tried to add it I got the following message:
>>>>>>
>>>>>> WCS provider: Cannot calculate extent
>>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 : QgsWcsProvider::QgsWcsProvider)
>>>>>> Raster layer: Provider is not valid (provider: wcs, URI: cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 : QgsRasterLayer::setDataProvider)
>>>>>>
>>>>>> Is there something at your end that could be changed to allow this to calculate the extent?
>>>>>>
>>>>>> Thanks,
>>>>>>           Bob
>>>>>>
>>>>>> *******************************************************************************************************************
>>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services Management
>>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba Conservation and Water Stewardship
>>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>>> **                                                  Winnipeg, Manitoba, Canada, R3H 0W4
>>>>>> **                                                  49-54-31.85N,97-12-16.08W
>>>>>> **
>>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>>> *******************************************************************************************************************
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> Qgis-developer mailing list
>>>>>> Qgis-developer at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>>
>>> --
>>> ---------------------------------------+--------------------------------------
>>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | Geospatial Software Developer
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From jlanstorp at gmail.com  Wed Jan 23 01:40:13 2013
From: jlanstorp at gmail.com (Jakob Lanstorp)
Date: Wed, 23 Jan 2013 01:40:13 -0800 (PST)
Subject: [Qgis-developer] Get bound map tool
Message-ID: <1358934013663-5029215.post@n6.nabble.com>

Hi all,

I'm making a plugin where I need a tool for the user to define a bound by
dragging a rectangle on the map. Just like the 'Select Features By
Rectangle' tool. I have looked at the plugin 'Rectangles, ovals digitizing'
with the Rectangle By Extent tool.

Is there a more 'native' approach in QGIS Python. I just need the bound
coordinates for a REST call.

Thanks,
Jakob 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Get-bound-map-tool-tp5029215.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From allar.haav at gmail.com  Wed Jan 23 07:09:32 2013
From: allar.haav at gmail.com (Allar Haav)
Date: Wed, 23 Jan 2013 15:09:32 +0000
Subject: [Qgis-developer] Python skipping features for unknown reason
Message-ID: <50FFFD2C.6000005@gmail.com>

Hi all,

I recently started learning Python and I'm currently finishing my first 
plugin that I really needed for QGIS - it performs a simple similarity 
transform on point layer. While the familiar qgsAffine presupposes that 
I know exactly the translation and rotation parameters, there often 
cases when I do not. What I might have is just information (GPS 
measurements for example) that points A and B should have coordinates 
x1,y1 and x2,y2. And that's it.
So far I've managed to get everything working, but I have run into weird 
problems. When I perform the operations on really small datasets, 
everything is working fine. But when I have a layer with, say 600 
points, QGIS starts acting weird. Sometimes it performs ok, yet once in 
a while some points aren't affected by the transformation, basically it 
starts skipping features. It seems as if the memory buffer is overloaded 
(?). Any ideas on that? The code in main transformation method is put 
between beginEditCommand() and endEditCommand(), the points are moved 
using moveVertex() function.

Regards,
Allar

From madmanwoo at gmail.com  Wed Jan 23 07:14:01 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Thu, 24 Jan 2013 01:14:01 +1000
Subject: [Qgis-developer] Python skipping features for unknown reason
In-Reply-To: <50FFFD2C.6000005@gmail.com>
References: <50FFFD2C.6000005@gmail.com>
Message-ID: <CAAi8Yg8gOrWOSr6T4rDJMg9182x1ABj=Y8ZJ-F6rXOdNTVTv-A@mail.gmail.com>

Allar,

We will have to see some code to be of any help.  Why not consider putting
it up on GitHub if you haven't already

-Nathan
On 24 Jan 2013 01:09, "Allar Haav" <allar.haav at gmail.com> wrote:

> Hi all,
>
> I recently started learning Python and I'm currently finishing my first
> plugin that I really needed for QGIS - it performs a simple similarity
> transform on point layer. While the familiar qgsAffine presupposes that I
> know exactly the translation and rotation parameters, there often cases
> when I do not. What I might have is just information (GPS measurements for
> example) that points A and B should have coordinates x1,y1 and x2,y2. And
> that's it.
> So far I've managed to get everything working, but I have run into weird
> problems. When I perform the operations on really small datasets,
> everything is working fine. But when I have a layer with, say 600 points,
> QGIS starts acting weird. Sometimes it performs ok, yet once in a while
> some points aren't affected by the transformation, basically it starts
> skipping features. It seems as if the memory buffer is overloaded (?). Any
> ideas on that? The code in main transformation method is put between
> beginEditCommand() and endEditCommand(), the points are moved using
> moveVertex() function.
>
> Regards,
> Allar
> ______________________________**_________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130124/84ccaf0f/attachment-0001.html>

From allar.haav at gmail.com  Wed Jan 23 07:53:46 2013
From: allar.haav at gmail.com (Allar Haav)
Date: Wed, 23 Jan 2013 15:53:46 +0000
Subject: [Qgis-developer] Python skipping features for unknown reason
In-Reply-To: <CAAi8Yg8gOrWOSr6T4rDJMg9182x1ABj=Y8ZJ-F6rXOdNTVTv-A@mail.gmail.com>
References: <50FFFD2C.6000005@gmail.com>
	<CAAi8Yg8gOrWOSr6T4rDJMg9182x1ABj=Y8ZJ-F6rXOdNTVTv-A@mail.gmail.com>
Message-ID: <5100078A.2060609@gmail.com>

Alright, set up a GitHub account: 
https://github.com/haav/python/tree/master/PointAdjust
I have to stress that it is really work in progress though.
It works by putting in 2 feature ID-s (A and B) with needed coordinates. 
The point A position is fixed and will be exactly as entered, but for 
point B the resulting position may differ in order to maintain the 
similarity. Thus, the new position of point A is used for translation 
while point B coordinates are only used to get the rotation angle. So, 
let's say we have the original layer points A=(0;0) and B=(3;0) and the 
entered values for the plugin are A=(-3;2), B=(-1;4). Thus the rotation 
angle will be 45 degrees.
Ah, right, the "edit mode" has to be turned on to get any effect.

Allar


On 23/01/2013 15:14, Nathan Woodrow wrote:
>
> Allar,
>
> We will have to see some code to be of any help.  Why not consider 
> putting it up on GitHub if you haven't already
>
> -Nathan
>
> On 24 Jan 2013 01:09, "Allar Haav" <allar.haav at gmail.com 
> <mailto:allar.haav at gmail.com>> wrote:
>
>     Hi all,
>
>     I recently started learning Python and I'm currently finishing my
>     first plugin that I really needed for QGIS - it performs a simple
>     similarity transform on point layer. While the familiar qgsAffine
>     presupposes that I know exactly the translation and rotation
>     parameters, there often cases when I do not. What I might have is
>     just information (GPS measurements for example) that points A and
>     B should have coordinates x1,y1 and x2,y2. And that's it.
>     So far I've managed to get everything working, but I have run into
>     weird problems. When I perform the operations on really small
>     datasets, everything is working fine. But when I have a layer
>     with, say 600 points, QGIS starts acting weird. Sometimes it
>     performs ok, yet once in a while some points aren't affected by
>     the transformation, basically it starts skipping features. It
>     seems as if the memory buffer is overloaded (?). Any ideas on
>     that? The code in main transformation method is put between
>     beginEditCommand() and endEditCommand(), the points are moved
>     using moveVertex() function.
>
>     Regards,
>     Allar
>     _______________________________________________
>     Qgis-developer mailing list
>     Qgis-developer at lists.osgeo.org <mailto:Qgis-developer at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/qgis-developer
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130123/074e6fda/attachment.html>

From etourigny.dev at gmail.com  Wed Jan 23 08:03:50 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 23 Jan 2013 14:03:50 -0200
Subject: [Qgis-developer] Redmine frequent errors
In-Reply-To: <50FE605E.7080303@faunalia.it>
References: <50FE605E.7080303@faunalia.it>
Message-ID: <CA+TxYvONVny4t+-ri93t+WrULLGwM06TcdwKKHUaL7JENTZdRw@mail.gmail.com>

me too, random Error 500

On Tue, Jan 22, 2013 at 7:48 AM, Paolo Cavallini <cavallini at faunalia.it> wrote:
> Hi all.
> I'm getting frequent errors from http://hub.qgis.org/login :
>
> Internal error
> An error occurred on the page you were trying to access.
> If you continue to experience problems please contact your redMine
> administrator for assistance.
> Back
>
> Anything we can do?
> Thanks.
>
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>

From mmb.prog at gmail.com  Wed Jan 23 09:02:02 2013
From: mmb.prog at gmail.com (Mohsen M.Hosseini)
Date: Wed, 23 Jan 2013 20:32:02 +0330
Subject: [Qgis-developer] Not valid layer (raster)
Message-ID: <CA+CFhw31hpaX_jm7+Nba8GREJ89+kz5YuM+2Ye-SRiuBB6Vwmw@mail.gmail.com>

Hi,
Im new in QGIS and i compiled a sample code and when i want to add a raster
layer i got an error (Not valid layer) ...
and i compiled the source of QGIS and it work correct ...
what's wrong ???

this is my .pro :

TEMPLATE = app
TARGET = qgis_example4
QT = qt3support sql network svg gui core xml

DEFINES += QGISPLUGINDIR=$${QGISPLUGINDIR}
LIBS = -lqgis_core -lqgis_gui -lproj


INCLUDEPATH += /usr/include/qgis /usr/include/gdal /usr/include/gls

DEFINES += CORE_EXPORT=""
DEFINES += GUI_EXPORT=""

CONFIG += qt gui exceptions stl warn_on debug thread

RESOURCES += resources.qrc

FORMS += mainwindowbase.ui

HEADERS = mainwindow.h

SOURCES = main.cpp \
          mainwindow.cpp
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130123/99ca5c59/attachment.html>

From Bob.Bruce at gov.mb.ca  Wed Jan 23 13:19:52 2013
From: Bob.Bruce at gov.mb.ca (Bruce, Bob (CON))
Date: Wed, 23 Jan 2013 15:19:52 -0600
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho
	Refresh	WCS
In-Reply-To: <CAEMrtYpimrcXFjBmiwx=ByKY_gV0YVu_=s3yOeBXLaxhGTeHtQ@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
	<CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
	<50FEC2E9.6080401@cubewerx.com>
	<CAEMrtYpimrcXFjBmiwx=ByKY_gV0YVu_=s3yOeBXLaxhGTeHtQ@mail.gmail.com>
Message-ID: <DC49060A7E430243BF2D4090200661931AD3D1A1DF@OC1EX201.ME.MBGOV.CA>

Radim,
        Would you be willing to add an option to "Disable max extent verification" - I believe that would solve
all of our problems with connecting to this very large image store. If you do so then please let me know and I will
be happy to test it.

Thanks,
        Bob Bruce

-----Original Message-----
From: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] On Behalf Of Radim Blazek
Sent: January-23-13 3:07 AM
To: ekeighan at cubewerx.com
Cc: Qgis-Developer; Bob Bruce
Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS

On Tue, Jan 22, 2013 at 5:48 PM, ekeighan <ekeighan at cubewerx.com> wrote:
> Radim,
>
> Our WCS was designed to be used as per the intent of the OGC WCS
> specification for extracting data, not for browsing it. The OGC WMS or WMTS
> is intended to be used for browsing.

Just for curiosity, can you point me to an OGC document supporting
this interpretation? In any case, my aim is not to defend how QGIS
works pointing to WCS specification but to get it working in most
cases. If you insist on that interpretation we have to take it as
reality.

> But we admit that the WCS spec is deficient in that it does not describe the
> raster-data type sufficiently nor in a standard way.  E.g., it doesn't tell
> you that the raster data has five channels of 16-bit unsigned integers
> representing Red, Green, Blue, Infrared and Alpha channels.  This is why WCS
> client applications tend to request a sample image.

Indeed, also no data values ...

> GDAL does this in a more friendly way by requesting a small 2x2-pixel sample
> image at the resolution of the source data.  This causes no problems for a
> WCS organized to extract data at the source resolution. We suggest that QGIS
> use the same method to avoid unnecessary problems with our and other
> servers.

QGIS does something similar, i.e. 6x3 pixels on original resolution.
As I already wrote twice, the 10x10 pixels request for the whole
extent is done to verify a real extent of the coverage. Some servers
may report wrong larger extent in capabilities and requests outside
the real extent fail. If I disable this additional check, we get it
working with CubeWerx, but break it for other servers and that is not
the way ahead.

> Our WCS is organized to always access the raw source data in order to
> produce the best image possible for analysis.  However, this approach breaks
> down catastrophically in the QGIS case where your request translates into
> accessing tens of thousands of source images covering multiple terabytes of
> data that needs to be processed to fulfill the 10x10 request. Many
> developers are familiar with this particularity of the WCS (for data
> extraction at source resolution) and use it in tandem with a WMS or WMTS for
> views and only access the WCS when a download at source resolution is
> required, typically for analysis.

This interpretation of the WCS standard degrades it to a richer
download application. I believe that WCS has much more potential.
Maybe the possibilities shifted a bit during the years with broadband
connections and mobile applications?

> In order to support a more flexible access to the WCS we were thinking of
> modifying our access method when zoomed out sufficiently. Source-overview
> files and tile data are available which make WMS and WMTS access very
> efficient. CubeWerx have these products and our clients are of course
> deploying them in addition to a WCS but there can be a problem with both
> approaches in that the secondary data may not match the exact raster data
> type of the source data. E.g., the tiles are rendered for common maps which
> use 3-channel 8-bit RGB, but the source data might be 4-channel 16-bit
> RGB+Infrared.

But it should not be a problem (apart computational time)  to create
lower resolution overviews also for WCS with exactly the same data
types and bands as original data. Is it?

As I said, I would like to fix QGIS to work smoothly also with your
services. An easy workaround is to allow the max extent check to fail
but it will still wait for server timeout. Well, if the server does
not support full extent, it could return WCS error response
immediately instead of timeout error.

Another possibility would be to add an option "Disable max extent
verification" but that is user unfriendly.

Radim

> Regards,
>
> Edric Keighan
> President & CEO
> CubeWerx Inc.
>
> Tel: 613-447-8306 Mobile
>
>
> On 22/01/2013 3:43 AM, Radim Blazek wrote:
>>
>> On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
>>>
>>> Radim,
>>>              This dataset is a huge collection of imagery encompassing an
>>> area approximately 350 kilometres square. There are over 5000 images in the
>>> dataset, with each image having a .5m pixel size and a file size of 293Mb
>>> and I doubt that it is feasible to request a small sample image from the
>>> entire range of the imagery. Is there some way that we can get QGIS to
>>> request an image from a much smaller area (like the extent of the viewport)
>>> to establish the validity of the dataset?
>>
>> Currently not. It would be necessary to disable the check for max
>> extent. I am willing to add workarounds for various server
>> particularities (the check for true max extent is one of them) but in
>> this case I am not quite convinced. It is obviously server problem.
>> The server offers capabilities which it cannot fulfill.
>>
>> I'll consider to allow to pass the extent check without error.
>> However, the request will be done and it will wait timeout until it
>> fails.
>>
>> I think that GDAL does not do that check, so you can create GDAL WCS
>> XML file and open it as raster file.
>>
>> Radim
>>
>>> Ultimately we want to work with a dataset of .2m sized pixels and
>>> individual images of 2.94Gb and four bands.
>>>
>>> Thanks for your help,
>>>
>>>           Bob Bruce
>>>
>>> Sent from my iPhone
>>>
>>> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>
>>> Frank,
>>>
>>> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
>>> in QGIS it is used to get true extent. It may happen that a server is
>>> misconfigured and reports larger extent in
>>> GetCapabilities/DescribeCoverage and successive request inside that
>>> extent but outside the real coverage extent would fail. Requesting the
>>> whole extent and getting
>>> its real extent is the only way AFAIK to get real extent.
>>>
>>> Radim
>>>
>>> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com>
>>> wrote:
>>>>
>>>> Bruce,
>>>>
>>>> I think the 10x10 request is being made by GDAL's WCS driver in order
>>>> to establish some details about the underlying WCS and it defaults to
>>>> the whole extents.  It sucks fairly badly that such a request can't be
>>>> done.  It might be possible to dummy in the information in the .wcs
>>>> config file to avoid having to do that query.  Investigating.
>>>>
>>>> Best regards,
>>>> Frank
>>>>
>>>>
>>>>
>>>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca>
>>>> wrote:
>>>>>
>>>>> Radim,
>>>>>      I have been looking at this again with two people from Cubewerx
>>>>> and we find that QGIS is issuing this request:
>>>>>
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>>>
>>>>> while the bounding box that I currently have displayed in QGIS is
>>>>> roughly:
>>>>>
>>>>>
>>>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>>>
>>>>> I need to get QGIS to restrict its request to this extent to work. Do
>>>>> you know how I can do that?
>>>>>
>>>>> If I issue this request from my web browser:
>>>>>
>>>>>
>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>>>
>>>>> I actually get a tiff image that I can view that looks good and is
>>>>> similar to what I would expect to see in QGIS. Now I need to get QGIS to
>>>>> actually issue that request.
>>>>>
>>>>> Thanks,
>>>>>        Bob Bruce
>>>>>
>>>>> -----Original Message-----
>>>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>>>> Sent: January-18-13 3:36 AM
>>>>> To: Bruce, Bob (CON)
>>>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho
>>>>> Refresh WCS
>>>>>
>>>>> Hi again,
>>>>>
>>>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com>
>>>>> wrote:
>>>>>>
>>>>>> I don't see the same problem here. GetCapabilities and
>>>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>>>> connection details dialog and it was logged on server but that is
>>>>>> another issue?
>>>>>>
>>>>>> I have got another error however. DescribeCoverage is successfully
>>>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>>>> raster to get more info):
>>>>>>
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>>>
>>>>>> and it fails on server side with:
>>>>>>
>>>>>> "Gateway Time-out
>>>>>> The gateway did not receive a timely response from the upstream server
>>>>>> or application."
>>>>>>
>>>>>> Because the request covers the whole extent, it could be that the
>>>>>> raster is quite large and there are no overviews/pyramids ready on
>>>>>> server, it starts to do resampling of the whole extent but it takes to
>>>>>> much time?
>>>>>
>>>>> It really seems to be the problem, I have tried with smaller extent
>>>>> and server sent a correct TIFF in response. In any case it takes very
>>>>> long time.
>>>>>
>>>>> Radim
>>>>>
>>>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>>>> usually printed requests which failed and in debug messages are
>>>>>> printed all requests.
>>>>>>
>>>>>> Radim
>>>>>>
>>>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON)
>>>>>> <Bob.Bruce at gov.mb.ca> wrote:
>>>>>>>
>>>>>>> I am having trouble using the WCS capability in version 1.9.0 code
>>>>>>> revision f210668
>>>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>>>
>>>>>>> QGIS version                    1.9.0-Master    QGIS code revision
>>>>>>> f210668
>>>>>>> Compiled against Qt             4.7.1                   Running
>>>>>>> against Qt              4.7.1
>>>>>>> Compiled against GDAL/OGR       1.9.2                   Running
>>>>>>> against GDAL/OGR        1.9.2
>>>>>>> GEOS Version                    3.3.5                   PostgreSQL
>>>>>>> Client Version       8.3.10
>>>>>>> SpatiaLite Version              3.0.1                   QWT Version
>>>>>>> 5.2.1
>>>>>>> PROJ.4 Version                  480                     QScintilla2
>>>>>>> Version             2.6.2
>>>>>>> This copy of QGIS writes debugging output.
>>>>>>>
>>>>>>> The URL that I am connecting to is:
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>>>> The URL of the GetCapabilities request is:
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>>>
>>>>>>> According to Cubewerx, who is our imagery OGC WCS service provider,
>>>>>>> their log shows both the GetCapabilities and GetCoverage requests present in
>>>>>>> the same HTTP request while they should be done separately.
>>>>>>>
>>>>>>> This is the request that they are finding in their server log:
>>>>>>>        2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>> 205.200.189.2 to URL
>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>
>>>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>>>
>>>>>>> Here is the error report that I am seeing in QGIS when I try and add
>>>>>>> this data source to the project:
>>>>>>>        WCS provider: Cannot calculate extent
>>>>>>>        (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>        Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%
>>>>>>> 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>        (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>
>>>>>>> Thanks,
>>>>>>>        Bob Bruce
>>>>>>>
>>>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>>>> Sent: January-17-13 3:33 PM
>>>>>>> To: Bruce, Bob (CON)
>>>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>>>
>>>>>>> Bob,
>>>>>>>
>>>>>>> FYI...
>>>>>>>
>>>>>>> ekeighan at cubewerx.com wrote:
>>>>>>>
>>>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>>>>
>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>
>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>> calculate the extent?
>>>>>>> Looking through the server log, we see only the following related
>>>>>>> request
>>>>>>> present twice:
>>>>>>>
>>>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>> 205.200.189.2 to URL
>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>
>>>>>>> ---------------------------------------------------------------
>>>>>>>
>>>>>>> This doesn't make any sense, since it contains two different REQUEST
>>>>>>> arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>
>>>>>>> but it almost seems as though it was entered improperly as:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>>>
>>>>>>> The WCS request received from the client produces an error return,
>>>>>>> since
>>>>>>> the server has problems parsing the broken request:
>>>>>>>
>>>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1
>>>>>>> http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>>>> <Exception exceptionCode="MissingParameterValue"
>>>>>>> locator="identifiers">
>>>>>>>    <ExceptionText>CubeSERV: Cannot execute WCS request, raised in
>>>>>>> Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>>>    <ExceptionText>CubeSERV: Missing parameter "identifiers", raised
>>>>>>> in throwMissingParamError() in file "cw_cgiparams.c" line
>>>>>>> 797</ExceptionText>
>>>>>>> </Exception>
>>>>>>> </ExceptionReport>
>>>>>>>
>>>>>>> The first request from the client should be just a proper
>>>>>>> GetCapabilities
>>>>>>> request:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>>>
>>>>>>> which returns the expected data.
>>>>>>> -------------------------------------------------
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Edric
>>>>>>>
>>>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>>>> Edric,
>>>>>>>            I took another look at connecting QGIS to your WCS, using
>>>>>>> a newer beta test version. It provided a mechanism to connect to the WCS and
>>>>>>> it allowed me to try and add it to my map. When I tried to add it I got the
>>>>>>> following message:
>>>>>>>
>>>>>>> WCS provider: Cannot calculate extent
>>>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>> Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>
>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>> calculate the extent?
>>>>>>>
>>>>>>> Thanks,
>>>>>>>            Bob
>>>>>>>
>>>>>>>
>>>>>>> *******************************************************************************************************************
>>>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services
>>>>>>> Management
>>>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba
>>>>>>> Conservation and Water Stewardship
>>>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>>>> **                                                  Winnipeg,
>>>>>>> Manitoba, Canada, R3H 0W4
>>>>>>> **
>>>>>>> 49-54-31.85N,97-12-16.08W
>>>>>>> **
>>>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>>>>
>>>>>>> *******************************************************************************************************************
>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Qgis-developer mailing list
>>>>>>> Qgis-developer at lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>>>
>>>> --
>>>>
>>>> ---------------------------------------+--------------------------------------
>>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>>> warmerdam at pobox.com
>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer

From wonder.sk at gmail.com  Wed Jan 23 14:37:58 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed, 23 Jan 2013 23:37:58 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <50FD07A2.7080909@gmx.ch>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
	<50EAB491.4010707@gmx.ch>
	<CAC2XbFcEkcaWn9Tcopd8whQ=Pz2ydMXa0zAKisTBWG1R9-9R+A@mail.gmail.com>
	<50EBDCC9.9030506@gmx.ch>
	<CAC2XbFfQ3WWT6gRhxK944ujo2rrfZdJiyX3hBZc_VLwKgdJwvg@mail.gmail.com>
	<50FD07A2.7080909@gmx.ch>
Message-ID: <CAC2XbFdRo8oewf=TYt4W5HpOuXRUZ-+Kvm_n7e2gH-o6L8gtVw@mail.gmail.com>

Hi Matthias

On Mon, Jan 21, 2013 at 10:17 AM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
> Martin,
>
> Works for me. My plugin is ready for the new vector API then. Thank you for
> your work.
>
> What are your plans for merging?

I will be merging new vector API in next few days.

Martin

From larrys at dakotacarto.com  Wed Jan 23 14:52:37 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Wed, 23 Jan 2013 15:52:37 -0700
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CAC2XbFdRo8oewf=TYt4W5HpOuXRUZ-+Kvm_n7e2gH-o6L8gtVw@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
	<50EAB491.4010707@gmx.ch>
	<CAC2XbFcEkcaWn9Tcopd8whQ=Pz2ydMXa0zAKisTBWG1R9-9R+A@mail.gmail.com>
	<50EBDCC9.9030506@gmx.ch>
	<CAC2XbFfQ3WWT6gRhxK944ujo2rrfZdJiyX3hBZc_VLwKgdJwvg@mail.gmail.com>
	<50FD07A2.7080909@gmx.ch>
	<CAC2XbFdRo8oewf=TYt4W5HpOuXRUZ-+Kvm_n7e2gH-o6L8gtVw@mail.gmail.com>
Message-ID: <CA+nQOR-wt_5hpmYz_bbNzfTK-ei=4ozBKss7n46XhnRWBOHgww@mail.gmail.com>

Hi Martin,

What do you think about tagging the repository, right before merging your
branch? That way there would be a reference point for building a pre-merge
state, useful for nightly build maintainers who can offer an additional
download of that tagged, semi-stable build.

Currently tagging seems to only be done for releases:
https://github.com/qgis/Quantum-GIS/tags

Larry


On Wed, Jan 23, 2013 at 3:37 PM, Martin Dobias <wonder.sk at gmail.com> wrote:

> Hi Matthias
>
> On Mon, Jan 21, 2013 at 10:17 AM, Matthias Kuhn <matthias.kuhn at gmx.ch>
> wrote:
> > Martin,
> >
> > Works for me. My plugin is ready for the new vector API then. Thank you
> for
> > your work.
> >
> > What are your plans for merging?
>
> I will be merging new vector API in next few days.
>
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130123/e8ba99c6/attachment-0001.html>

From wonder.sk at gmail.com  Wed Jan 23 15:01:33 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 24 Jan 2013 00:01:33 +0100
Subject: [Qgis-developer] New Vector API
In-Reply-To: <CA+nQOR-wt_5hpmYz_bbNzfTK-ei=4ozBKss7n46XhnRWBOHgww@mail.gmail.com>
References: <CAC2XbFcb6hLDCh7ekN2j3Mw23OPviMJvoT+LiCt6dbvP+ZZGig@mail.gmail.com>
	<50E5514D.600@gmx.ch>
	<CAC2XbFcJ2pdUZkSA_1pAQWWk7Ui7NUCx97NFnBuGe6LBa_7RSw@mail.gmail.com>
	<50EAB491.4010707@gmx.ch>
	<CAC2XbFcEkcaWn9Tcopd8whQ=Pz2ydMXa0zAKisTBWG1R9-9R+A@mail.gmail.com>
	<50EBDCC9.9030506@gmx.ch>
	<CAC2XbFfQ3WWT6gRhxK944ujo2rrfZdJiyX3hBZc_VLwKgdJwvg@mail.gmail.com>
	<50FD07A2.7080909@gmx.ch>
	<CAC2XbFdRo8oewf=TYt4W5HpOuXRUZ-+Kvm_n7e2gH-o6L8gtVw@mail.gmail.com>
	<CA+nQOR-wt_5hpmYz_bbNzfTK-ei=4ozBKss7n46XhnRWBOHgww@mail.gmail.com>
Message-ID: <CAC2XbFdTD2S7WOw+hUO-wgJG_DL1NYSiVTjALGvYSOP_YMmo9Q@mail.gmail.com>

Hi Larry

On Wed, Jan 23, 2013 at 11:52 PM, Larry Shaffer <larrys at dakotacarto.com> wrote:
> Hi Martin,
>
> What do you think about tagging the repository, right before merging your
> branch? That way there would be a reference point for building a pre-merge
> state, useful for nightly build maintainers who can offer an additional
> download of that tagged, semi-stable build.

No problem to tag master branch before the merge.

Regards
Martin

From pi_ml at sourcepole.com  Wed Jan 23 15:57:26 2013
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Thu, 24 Jan 2013 00:57:26 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
Message-ID: <2464827.ASIhYEZtWX@polarwind2>

Hi all,

I found the time for an OpenLayers plugin release with merged pull requests 
for Stamen map support and fixes for Python API breaks in master branch (See 
https://twitter.com/PirminKalberer/status/294226472707715072 for credits).
The second point was quite annoying for many users and myself. It is a really 
bad practice to break the API without deprecation messages when calling these 
methods. There should be enough time (at least one minor version) for 
developers for updating their plugins. In this case it would have been easy to 
keep the old API and add a deprecation message similar to 
http://code.activestate.com/recipes/391367-deprecated/ 

Regards
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com


From madmanwoo at gmail.com  Wed Jan 23 16:09:43 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 23 Jan 2013 16:09:43 -0800
Subject: [Qgis-developer] OpenLayers plugin release and Python API
Message-ID: <-5303715441504235449@unknownmsgid>

 breaks
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 7bit

We are preparing for 2.0 so the plan has always been to break API and
remove old unused methods.

The select API will break again soon once Martin merges his new vector
API.

- Nathan
From: Pirmin Kalberer
Sent: 24/01/2013 9:58 AM
To: qgis-dev
Subject: [Qgis-developer] OpenLayers plugin release and Python API
breaks
Hi all,

I found the time for an OpenLayers plugin release with merged pull requests
for Stamen map support and fixes for Python API breaks in master branch (See
https://twitter.com/PirminKalberer/status/294226472707715072 for credits).
The second point was quite annoying for many users and myself. It is a really
bad practice to break the API without deprecation messages when calling these
methods. There should be enough time (at least one minor version) for
developers for updating their plugins. In this case it would have been easy to
keep the old API and add a deprecation message similar to
http://code.activestate.com/recipes/391367-deprecated/

Regards
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer

From snowstorms at mac.com  Wed Jan 23 20:16:50 2013
From: snowstorms at mac.com (Chris B)
Date: Wed, 23 Jan 2013 20:16:50 -0800 (PST)
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify() on
	Mac OS?
Message-ID: <1359001010533-5029433.post@n6.nabble.com>

Hello,

New to QGIS, I'm using it to hopefully simplify some complex KML geometry. 
I can get it to run from the Terminal fine, but can't seem to find the
correct syntax to actually simplify the polygon.  

Here's what I've tried:


$ export
DYLD_LIBRARY_PATH=/Applications/Qgis.app/Contents/MacOS/lib:/Applications/Qgis.app/Contents/Frameworks
$ export PYTHONPATH=/Applications/Qgis.app/Contents/Resources/python
$ python

>>> from qgis.core import *
>>> QgsApplication.setPrefixPath("/Applications/Qgis.app/Contents/MacOS/QGIS")
>>> QgsApplication.setPrefixPath("/Applications/Qgis.app/Contents/MacOS/QGIS",True)
>>> QgsApplication.initQgis()
>>> layer = QgsVectorLayer("/Users/[me]/ar-02.kml","ar-02","kml")
>>> layer
<qgis.core.QgsVectorLayer object at 0x110576c20>
>>> from qgis.analysis import QgsGeometryAnalyzer
>>> QgsGeometryAnalyzer().simplify(layer,"/Users/cbarnes/testout.shp",0.005,False)
False

I get the False result whether trying to use Qgis from the Terminal or
inside the Python console in the GUI.  What's interesting is if I manually
load a layer into the GUI, the simplification works fine:

>>> qgis.utils.iface
>>> layer = qgis.utils.iface.activeLayer()
>>> from qgis.analysis import QgsGeometryAnalyzer
>>> QgsGeometryAnalyzer().simplify(layer,"test",0.005,False)
True

(I can't seem to get QGIS to load a layer from the console, but that's OK if
I can get a shell script to work)

Is there anything obvious I am doing wrong?

Thanks for any help you can provide,




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problems-using-QgsGeometryAnalyzer-simplify-on-Mac-OS-tp5029433.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From madmanwoo at gmail.com  Wed Jan 23 20:39:45 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 23 Jan 2013 20:39:45 -0800
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
 on Mac OS?
Message-ID: <9043051592695126715@unknownmsgid>

Chris,

Try this

layer = QgsVectorLayer("/Users/[me]/ar-02.kml","ar-02","ogr")

- Nathan
From: Chris B
Sent: 24/01/2013 2:16 PM
To: qgis-developer at lists.osgeo.org
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
on Mac OS?
Hello,

New to QGIS, I'm using it to hopefully simplify some complex KML geometry.
I can get it to run from the Terminal fine, but can't seem to find the
correct syntax to actually simplify the polygon.

Here's what I've tried:


$ export
DYLD_LIBRARY_PATH=/Applications/Qgis.app/Contents/MacOS/lib:/Applications/Qgis.app/Contents/Frameworks
$ export PYTHONPATH=/Applications/Qgis.app/Contents/Resources/python
$ python

>>> from qgis.core import *
>>> QgsApplication.setPrefixPath("/Applications/Qgis.app/Contents/MacOS/QGIS")
>>> QgsApplication.setPrefixPath("/Applications/Qgis.app/Contents/MacOS/QGIS",True)
>>> QgsApplication.initQgis()
>>> layer = QgsVectorLayer("/Users/[me]/ar-02.kml","ar-02","kml")
>>> layer
<qgis.core.QgsVectorLayer object at 0x110576c20>
>>> from qgis.analysis import QgsGeometryAnalyzer
>>> QgsGeometryAnalyzer().simplify(layer,"/Users/cbarnes/testout.shp",0.005,False)
False

I get the False result whether trying to use Qgis from the Terminal or
inside the Python console in the GUI.  What's interesting is if I manually
load a layer into the GUI, the simplification works fine:

>>> qgis.utils.iface
>>> layer = qgis.utils.iface.activeLayer()
>>> from qgis.analysis import QgsGeometryAnalyzer
>>> QgsGeometryAnalyzer().simplify(layer,"test",0.005,False)
True

(I can't seem to get QGIS to load a layer from the console, but that's OK if
I can get a shell script to work)

Is there anything obvious I am doing wrong?

Thanks for any help you can provide,




--
View this message in context:
http://osgeo-org.1560.n6.nabble.com/Problems-using-QgsGeometryAnalyzer-simplify-on-Mac-OS-tp5029433.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer

From snowstorms at mac.com  Wed Jan 23 20:47:51 2013
From: snowstorms at mac.com (Chris B)
Date: Wed, 23 Jan 2013 20:47:51 -0800 (PST)
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
	on Mac OS?
In-Reply-To: <9043051592695126715@unknownmsgid>
References: <1359001010533-5029433.post@n6.nabble.com>
	<9043051592695126715@unknownmsgid>
Message-ID: <1359002871268-5029435.post@n6.nabble.com>

Thanks for the quick reply Nathan!

Unfortunately, while the layer loaded, it still returns False on the
simplify command.





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problems-using-QgsGeometryAnalyzer-simplify-on-Mac-OS-tp5029433p5029435.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From madmanwoo at gmail.com  Wed Jan 23 20:50:51 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 23 Jan 2013 20:50:51 -0800
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
 on Mac OS?
Message-ID: <5454945222085289564@unknownmsgid>

What does layer.isVaild() return?

Sent from some fancy phone looking thingo
From: Chris B
Sent: 24/01/2013 2:47 PM
To: qgis-developer at lists.osgeo.org
Subject: Re: [Qgis-developer] Problems using
QgsGeometryAnalyzer.simplify() on Mac OS?
Thanks for the quick reply Nathan!

Unfortunately, while the layer loaded, it still returns False on the
simplify command.





--
View this message in context:
http://osgeo-org.1560.n6.nabble.com/Problems-using-QgsGeometryAnalyzer-simplify-on-Mac-OS-tp5029433p5029435.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer

From snowstorms at mac.com  Wed Jan 23 20:56:17 2013
From: snowstorms at mac.com (Chris B)
Date: Wed, 23 Jan 2013 20:56:17 -0800 (PST)
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
	on Mac OS?
In-Reply-To: <5454945222085289564@unknownmsgid>
References: <1359001010533-5029433.post@n6.nabble.com>
	<5454945222085289564@unknownmsgid>
Message-ID: <1359003377357-5029437.post@n6.nabble.com>

It returns false when I try passing either "kml" or "ogr" as the importer.

Because I get the same result in the console with 

>>> layer = QgsVectorLayer("/Users/[me]/wkt2/kml/ar-02.kml","ar","kml")

This leads me to think it is a simple file location problem, but I am
providing the direct path to the file.  Is there another path variable I
need to set?




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problems-using-QgsGeometryAnalyzer-simplify-on-Mac-OS-tp5029433p5029437.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From madmanwoo at gmail.com  Wed Jan 23 21:16:23 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 23 Jan 2013 21:16:23 -0800
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
 on Mac OS?
Message-ID: <1743929804391126758@unknownmsgid>

Well the arg should be ogr as it is using the ogr driver.

I'm just wondering if its not loading the providers. Do you get any
console output when you run your script.

Sent from some fancy phone looking thingo
From: Chris B
Sent: 24/01/2013 2:56 PM
To: qgis-developer at lists.osgeo.org
Subject: Re: [Qgis-developer] Problems using
QgsGeometryAnalyzer.simplify() on Mac OS?
It returns false when I try passing either "kml" or "ogr" as the importer.

Because I get the same result in the console with

>>> layer = QgsVectorLayer("/Users/[me]/wkt2/kml/ar-02.kml","ar","kml")

This leads me to think it is a simple file location problem, but I am
providing the direct path to the file.  Is there another path variable I
need to set?




--
View this message in context:
http://osgeo-org.1560.n6.nabble.com/Problems-using-QgsGeometryAnalyzer-simplify-on-Mac-OS-tp5029433p5029437.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer

From vinayan123 at gmail.com  Wed Jan 23 21:32:12 2013
From: vinayan123 at gmail.com (vinayan)
Date: Thu, 24 Jan 2013 11:02:12 +0530
Subject: [Qgis-developer] geos help(union polygons)
Message-ID: <5100C75C.9020702@gmail.com>

Hi,

I am trying to find gaps inside a polygon layer much like the ESRI 
topology rule("must not have gaps"). I did this initially by making an 
extent polygon and then subtracting the union of all geometries from 
this extent polygon.

All this worked well and for around 100 polygons in the extent the 
performance is ok. But when the count goes up, the performance is 
drastically down. The issue, I think is because I am creating the union 
iteratively as below.

for ( it = mFeatureList1.begin(); it != FeatureListEnd; ++it )
{
g2 = it->feature.geometry();
g1 = g1->combine( g2 );
}


 From what I read from Martin Davis' 
blog(http://lin-ear-th-inking.blogspot.in/2007/11/fast-polygon-merging-in-jts-using.html), 
the cascaded polygon union improves the performance of union by a large 
ratio.

I want to use the below method that exist in Geos. But I am not sure how 
to use it.

I got this far(also pasted in pastebin http://pastebin.com/rniMLuZW),

std::vector<geos::geom::Polygon*> geomCollection;

QList<FeatureLayer>::ConstIterator FeatureListEnd = mFeatureList1.end();
for ( it = mFeatureList1.begin(); it != FeatureListEnd; ++it )
{
g1 = it->feature.geometry();
const std::string wkt = g1->exportToWkt().toStdString();
geos::geom::Polygon* geom = 
dynamic_cast<geos::geom::Polygon*>(geos::io::WKTReader().read(wkt)); 
//error is here....
geomCollection.push_back(geom);
}

geos::geom::Geometry* unionedPoly = 
geos::operation::geounion::CascadedPolygonUnion::Union(&geomCollection);


The error is,
/home/vinayan/QgisGitWorking/Quantum-GIS/src/plugins/topology/topolTest.cpp:746: 
error: cannot dynamic_cast 
?geos::io::WKTReader().geos::io::WKTReader::read((* & wkt))? (of type 
?struct geos::geom::Geometry*?) to type ?struct geos::geom::Polygon*? 
(target is not pointer or reference to complete type)


This has more to do with my c++ knowledge than anything i guess..but if 
anyone can help where I am going wrong, it would be a good step forward 
for me. If it works well, I am sure this function would find use in 
other parts of Qgis where slow unions are involved.

Thanks in advance,
Vinayan


From snowstorms at mac.com  Wed Jan 23 21:37:52 2013
From: snowstorms at mac.com (Chris B)
Date: Wed, 23 Jan 2013 21:37:52 -0800 (PST)
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
	on Mac OS?
In-Reply-To: <1743929804391126758@unknownmsgid>
References: <1359001010533-5029433.post@n6.nabble.com>
	<1743929804391126758@unknownmsgid>
Message-ID: <1359005872587-5029442.post@n6.nabble.com>

Hmm possibly. 

I went back into the GUI/console and tried ogr as the importer, and it did
appear to work:

>>> vlayer =
>>> QgsVectorLayer("/Users/cbarnes/wkt2/kml/ny-08.kml","ny08","ogr")
>>> vlayer.isValid()
True
>>> QgsGeometryAnalyzer().simplify(vlayer,"test_ny",0.005,False)
True

Sure enough, I got a simplified layer that I could open through the GUI.  

Looking at what I saw on the web, my guess is I need to correct one of these
two items:

1. Ensure the correct prefix path:  I was under the impression it was
supposed to be 

QgsApplication.setPrefixPath("/Applications/Qgis.app/Contents/MacOS/QGIS",True)

but if this is what sets up the plugin folder, it might be incorrect because
in my install that folder is actually located at:

/Applications/QGIS.app/Contents/PlugIns

2. Do I need LD_LIBRARY_PATH?

I think your current assumption is correct - if you know that either one of
these are the problem I can probably get this working.  Thanks again for
your help!




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problems-using-QgsGeometryAnalyzer-simplify-on-Mac-OS-tp5029433p5029442.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From alexander.bruy at gmail.com  Wed Jan 23 22:40:00 2013
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu, 24 Jan 2013 10:40:00 +0400
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <2464827.ASIhYEZtWX@polarwind2>
References: <2464827.ASIhYEZtWX@polarwind2>
Message-ID: <20130124104000.568ff3269a6b59612dbe41d3@gmail.com>

Hi,

please note that most of this methods were marked as deprecated for
a long time. Some of them are deprecated since QGIS 1.6 or even
earlier.

On Thu, 24 Jan 2013 00:57:26 +0100
Pirmin Kalberer <pi_ml at sourcepole.com> wrote:

> Hi all,
> 
> I found the time for an OpenLayers plugin release with merged pull requests 
> for Stamen map support and fixes for Python API breaks in master branch (See 
> https://twitter.com/PirminKalberer/status/294226472707715072 for credits).
> The second point was quite annoying for many users and myself. It is a really 
> bad practice to break the API without deprecation messages when calling these 
> methods. There should be enough time (at least one minor version) for 
> developers for updating their plugins. In this case it would have been easy to 
> keep the old API and add a deprecation message similar to 
> http://code.activestate.com/recipes/391367-deprecated/ 
> 
> Regards
> Pirmin
> 
> -- 
> Pirmin Kalberer
> Sourcepole  -  Linux & Open Source Solutions
> http://www.sourcepole.com
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Alexander Bruy

From lists at linfiniti.com  Wed Jan 23 23:18:12 2013
From: lists at linfiniti.com (Tim Sutton)
Date: Thu, 24 Jan 2013 09:18:12 +0200
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile> <501137A1.8030701@szczepanek.pl>
	<50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
	<CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
Message-ID: <CALCNqkb+GWjaQDCGOQkji4cSX9gJZMWBX87XmgT6tW3Dn21zHg@mail.gmail.com>

Hi

On Wed, Jan 23, 2013 at 2:10 AM, Larry Shaffer <larrys at dakotacarto.com> wrote:
> Hi,
>
> I am bringing this discussion back up, because some of us think it's
> important to address before the upcoming 2.0 release.
>
> Here are my recommendations (in workflow order):
>
> 1) Create a new graphics repository at github.com, e.g. named
> 'qgis-graphics'.
>
> It is important that a single repository exist where designers/developers
> can find and work on SVG originals/components for creating new, or updating
> existing, icons and graphics, without mucking about in the actual QGIS
> source repository. This allows commit access to be specifically granted to
> designers, etc. without granting access to the source code repo. This could
> be similar to the one at osgeo.org [0], but specific to QGIS. It should
>
> This allows pull requests, like from olivierdalang [1], to also include the
> base working documents (SVG) in a separate pull request to the graphics
> repo, for use in future icon compositions, without having to store the
> graphics source files in the source code repository (which could increase
> download size significantly). IMO, the only graphics files in the source
> code repo should be those that get installed with 'make install'.
>
> 2) Condense current icons/pixmaps used in QGIS from all themes into just the
> default theme, with preference to vote-preferred GIS theme. Move the
> discarded icons and themes to the graphics repo, for later reference.
>
> 3) Copy any relevant SVG/pixmap sources from OSGeo repo [0] and Robert
> Szczepanek's source icon work (that may not be in current source code repo)
> [2] to new qgis-graphics repository.
>
> 4) Try to convert ALL new default theme icons to SVG, which may mean
> recreating many as vector art since the embedded-raster-in-SVG method
> doesn't seem to work well now (causes ugly upscaling) [3]. It should be
> possible to fix that issue in code, allowing for use of pixmaps-inside-SVG,
> until they are converted to vector-based SVGs.
>
> 5) Clean up source code to work with only .svg icon files. But, do not
> remove any code for theme choice, so that designers can still work on new
> themes without having to replace the existing default one.
>
> Considerations:
>
> * Maybe look into some funding for someone, like Robert, to work on 1) thru
> 4).
>
> * It is also a good project for asking help from non-coding users who may
> want to get involved as contributors. This would be after 1).
>
> [0] http://trac.osgeo.org/osgeo/browser/graphics
> [1] https://github.com/qgis/Quantum-GIS/pull/398/files
> [2] http://robert.szczepanek.pl/icons.php
> [3]
> http://osgeo-org.1560.n6.nabble.com/SVG-Icons-instead-of-PNGs-td4991647.html
> [4]
> http://osgeo-org.1560.n6.nabble.com/Cast-your-vote-Default-icon-theme-for-QGIS-2-0-td4987107.html
>
> See also: http://hub.qgis.org/wiki/quantum-gis/Icons_20
>

+1 from me on all these points too. To be clear, you are suggesting to
ship with only one theme, but leave theme support in place?

It would be nice to have a little script in the repo that creates a
thumbnail gallery of all the icons.

Also it might be nice to clean up the names a little - perhaps come up
with a  NounVerb.svg approach e.g. VectorEdit.svg VectorStopEdit.svg
so that non programmers can make sense of our naming scheme (yes I
know the current scheme is mainly my doing :-P).

Regards

Tim


> Regards,
>
> Larry Shaffer
> Dakota Cartography
> Black Hills, South Dakota
>
>
> On Mon, Jul 30, 2012 at 5:30 PM, Robert Szczepanek <robert at szczepanek.pl>
> wrote:
>>
>> Hi,
>>
>> On 29.07.2012 00:06, Larry Shaffer wrote:
>>>
>>> In my own experimentation with Qt icon scaling, I have found scripting
>>> ImageMagick or Photoshop to do the up/down-scaling, with or without a
>>> bit of sharpening applied afterword, to produce better quality icons
>>> than the Qt scaling. It may be good enough quality to preclude
>>> re-creating your icons for the other sizes.
>>
>>
>> If the results are better, it can be simple solution.
>>
>>> Another option is to design icons with fewer details and higher
>>> contrast so that they still look OK when scaled (see MSSQL icon in
>>> Giovanni's QGIS example). I believe this would also address the issue
>>> of some icon groups looking too busy due to too much detail, example:
>>> the 'Add * Layer' icons of your set.
>>
>>
>> This is only matter of decision and use of simpler version, without
>> "layer" sign. With bigger raster/vector/WMS/etc.
>>
>>> Having multiple size sets for icons means some naming conventions and
>>> coding to switch between the sets; whereas now, the code simply asks
>>> Qt to handle the scaling by setting a toolbar's icon size in one call
>>> (as an example). Another good reason to go with icons that can cope
>>> with Qt's scaling: no code changes.
>>
>>
>> Different folders could be solution if Qt's scaling won't work?
>>
>>> Switching between size sets also means any third party icons (e.g.
>>> plugins), that don't provide multiple icon versions, will have their
>>> icons scaled. This would end up with users seeing different quality
>>> between core and plugin toolbars, though I don't know how much this
>>> can be avoided regardless of scaling issues.
>>
>>
>> This is very important argument in favour of one SVG file.
>>
>>> So, my vote here for your icon set would be to go with only the 24x24
>>> size, reduce the complexity of the most complex icons, increase
>>> overall contrast where needed, and add any 2.5 effects to make them
>>> pop a bit more (but not if such an effect causes the blurry scaling
>>> problem or poor quality to occur).
>>
>>
>> Agree.
>> Robert
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>



--
Tim Sutton - QGIS Project Steering Committee Member (Release  Manager)
==============================================
Please do not email me off-list with technical
support questions. Using the lists will gain
more exposure for your issues and the knowledge
surrounding your issue will be shared with all.

Visit http://linfiniti.com to find out about:
 * QGIS programming and support services
 * Mapserver and PostGIS based hosting plans
 * FOSS Consulting Services
Skype: timlinux
Irc: timlinux on #qgis at freenode.net
==============================================

From werner.macho at gmail.com  Wed Jan 23 23:43:27 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Thu, 24 Jan 2013 08:43:27 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
Message-ID: <CA+3oMjvPccv7Lz7De1MTBsbXbchtM5ZPC+Pb3crZqQ7Ba_CV2A@mail.gmail.com>

Hi!

I am not sure but I think what Pirmin meant here was that there was no
warning _message_.
We all know that a lot of functions have been declared deprecated since a
very long time. But without knowing or getting a warning message that THIS
function is deprecated, I agree with Pirmin that noone can see the
deprecation until reading the source or .. until it is cleaned out.
Nevertheless it is good to clean the code (otherwise we would collect
deprecated functions forever)..
So just as a reminder here to spit out warning messages for deprecated
functions next time ..
Whenever this will be .. I hope not too soon ;)

kind regards
Werner


On Thu, Jan 24, 2013 at 7:40 AM, Alexander Bruy <alexander.bruy at gmail.com>wrote:

> Hi,
>
> please note that most of this methods were marked as deprecated for
> a long time. Some of them are deprecated since QGIS 1.6 or even
> earlier.
>
> On Thu, 24 Jan 2013 00:57:26 +0100
> Pirmin Kalberer <pi_ml at sourcepole.com> wrote:
>
> > Hi all,
> >
> > I found the time for an OpenLayers plugin release with merged pull
> requests
> > for Stamen map support and fixes for Python API breaks in master branch
> (See
> > https://twitter.com/PirminKalberer/status/294226472707715072 for
> credits).
> > The second point was quite annoying for many users and myself. It is a
> really
> > bad practice to break the API without deprecation messages when calling
> these
> > methods. There should be enough time (at least one minor version) for
> > developers for updating their plugins. In this case it would have been
> easy to
> > keep the old API and add a deprecation message similar to
> > http://code.activestate.com/recipes/391367-deprecated/
> >
> > Regards
> > Pirmin
> >
> > --
> > Pirmin Kalberer
> > Sourcepole  -  Linux & Open Source Solutions
> > http://www.sourcepole.com
> >
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> --
> Alexander Bruy
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130124/17216efe/attachment.html>

From matthias.kuhn at gmx.ch  Wed Jan 23 23:43:47 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 24 Jan 2013 08:43:47 +0100
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <CALCNqkb+GWjaQDCGOQkji4cSX9gJZMWBX87XmgT6tW3Dn21zHg@mail.gmail.com>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile>
	<501137A1.8030701@szczepanek.pl> <50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
	<CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
	<CALCNqkb+GWjaQDCGOQkji4cSX9gJZMWBX87XmgT6tW3Dn21zHg@mail.gmail.com>
Message-ID: <5100E633.80301@gmx.ch>

Hi,

On 01/24/2013 08:18 AM, Tim Sutton wrote:
> Hi
>
> On Wed, Jan 23, 2013 at 2:10 AM, Larry Shaffer <larrys at dakotacarto.com> wrote:
>> Hi,
>>
>> I am bringing this discussion back up, because some of us think it's
>> important to address before the upcoming 2.0 release.
>>
>> Here are my recommendations (in workflow order):
>>
>> 1) Create a new graphics repository at github.com, e.g. named
>> 'qgis-graphics'.
>>
>> It is important that a single repository exist where designers/developers
>> can find and work on SVG originals/components for creating new, or updating
>> existing, icons and graphics, without mucking about in the actual QGIS
>> source repository. This allows commit access to be specifically granted to
>> designers, etc. without granting access to the source code repo. This could
>> be similar to the one at osgeo.org [0], but specific to QGIS. It should
>>
>> This allows pull requests, like from olivierdalang [1], to also include the
>> base working documents (SVG) in a separate pull request to the graphics
>> repo, for use in future icon compositions, without having to store the
>> graphics source files in the source code repository (which could increase
>> download size significantly). IMO, the only graphics files in the source
>> code repo should be those that get installed with 'make install'.
>>
>> 2) Condense current icons/pixmaps used in QGIS from all themes into just the
>> default theme, with preference to vote-preferred GIS theme. Move the
>> discarded icons and themes to the graphics repo, for later reference.
>>
>> 3) Copy any relevant SVG/pixmap sources from OSGeo repo [0] and Robert
>> Szczepanek's source icon work (that may not be in current source code repo)
>> [2] to new qgis-graphics repository.
>>
>> 4) Try to convert ALL new default theme icons to SVG, which may mean
>> recreating many as vector art since the embedded-raster-in-SVG method
>> doesn't seem to work well now (causes ugly upscaling) [3]. It should be
>> possible to fix that issue in code, allowing for use of pixmaps-inside-SVG,
>> until they are converted to vector-based SVGs.
>>
>> 5) Clean up source code to work with only .svg icon files. But, do not
>> remove any code for theme choice, so that designers can still work on new
>> themes without having to replace the existing default one.
>>
>> Considerations:
>>
>> * Maybe look into some funding for someone, like Robert, to work on 1) thru
>> 4).
>>
>> * It is also a good project for asking help from non-coding users who may
>> want to get involved as contributors. This would be after 1).
>>
>> [0] http://trac.osgeo.org/osgeo/browser/graphics
>> [1] https://github.com/qgis/Quantum-GIS/pull/398/files
>> [2] http://robert.szczepanek.pl/icons.php
>> [3]
>> http://osgeo-org.1560.n6.nabble.com/SVG-Icons-instead-of-PNGs-td4991647.html
>> [4]
>> http://osgeo-org.1560.n6.nabble.com/Cast-your-vote-Default-icon-theme-for-QGIS-2-0-td4987107.html
>>
>> See also: http://hub.qgis.org/wiki/quantum-gis/Icons_20
>>
> +1 from me on all these points too. To be clear, you are suggesting to
> ship with only one theme, but leave theme support in place?
>
> It would be nice to have a little script in the repo that creates a
> thumbnail gallery of all the icons.
>
> Also it might be nice to clean up the names a little - perhaps come up
> with a  NounVerb.svg approach e.g. VectorEdit.svg VectorStopEdit.svg
> so that non programmers can make sense of our naming scheme (yes I
> know the current scheme is mainly my doing :-P).
>
> Regards
>
> Tim


+1 as well.

Concerning the naming scheme, OSGeo Graphics [1] state on their page 
that they follow the freedesktop standard [2]. Wouldn't it be nice to 
keep these things in line?
This would be hyphens instead of CamelCase but it looks like noun-verb 
as well ( Things like document-save etc., your examples: vector-edit.svg 
and vector-stop-edit.svg).

Regards,
Matthias

[1]: http://wiki.osgeo.org/wiki/OSGeo_Graphics 
<http://wiki.osgeo.org/wiki/OSGeo_Graphics>
[2]: 
http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html
>
>
>> Regards,
>>
>> Larry Shaffer
>> Dakota Cartography
>> Black Hills, South Dakota
>>
>>
>> On Mon, Jul 30, 2012 at 5:30 PM, Robert Szczepanek <robert at szczepanek.pl>
>> wrote:
>>> Hi,
>>>
>>> On 29.07.2012 00:06, Larry Shaffer wrote:
>>>> In my own experimentation with Qt icon scaling, I have found scripting
>>>> ImageMagick or Photoshop to do the up/down-scaling, with or without a
>>>> bit of sharpening applied afterword, to produce better quality icons
>>>> than the Qt scaling. It may be good enough quality to preclude
>>>> re-creating your icons for the other sizes.
>>>
>>> If the results are better, it can be simple solution.
>>>
>>>> Another option is to design icons with fewer details and higher
>>>> contrast so that they still look OK when scaled (see MSSQL icon in
>>>> Giovanni's QGIS example). I believe this would also address the issue
>>>> of some icon groups looking too busy due to too much detail, example:
>>>> the 'Add * Layer' icons of your set.
>>>
>>> This is only matter of decision and use of simpler version, without
>>> "layer" sign. With bigger raster/vector/WMS/etc.
>>>
>>>> Having multiple size sets for icons means some naming conventions and
>>>> coding to switch between the sets; whereas now, the code simply asks
>>>> Qt to handle the scaling by setting a toolbar's icon size in one call
>>>> (as an example). Another good reason to go with icons that can cope
>>>> with Qt's scaling: no code changes.
>>>
>>> Different folders could be solution if Qt's scaling won't work?
>>>
>>>> Switching between size sets also means any third party icons (e.g.
>>>> plugins), that don't provide multiple icon versions, will have their
>>>> icons scaled. This would end up with users seeing different quality
>>>> between core and plugin toolbars, though I don't know how much this
>>>> can be avoided regardless of scaling issues.
>>>
>>> This is very important argument in favour of one SVG file.
>>>
>>>> So, my vote here for your icon set would be to go with only the 24x24
>>>> size, reduce the complexity of the most complex icons, increase
>>>> overall contrast where needed, and add any 2.5 effects to make them
>>>> pop a bit more (but not if such an effect causes the blurry scaling
>>>> problem or poor quality to occur).
>>>
>>> Agree.
>>> Robert
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> Tim Sutton - QGIS Project Steering Committee Member (Release  Manager)
> ==============================================
> Please do not email me off-list with technical
> support questions. Using the lists will gain
> more exposure for your issues and the knowledge
> surrounding your issue will be shared with all.
>
> Visit http://linfiniti.com to find out about:
>   * QGIS programming and support services
>   * Mapserver and PostGIS based hosting plans
>   * FOSS Consulting Services
> Skype: timlinux
> Irc: timlinux on #qgis at freenode.net
> ==============================================
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From matthias.kuhn at gmx.ch  Wed Jan 23 23:59:47 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 24 Jan 2013 08:59:47 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <CA+3oMjvPccv7Lz7De1MTBsbXbchtM5ZPC+Pb3crZqQ7Ba_CV2A@mail.gmail.com>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<CA+3oMjvPccv7Lz7De1MTBsbXbchtM5ZPC+Pb3crZqQ7Ba_CV2A@mail.gmail.com>
Message-ID: <5100E9F3.2020708@gmx.ch>

Hi,

Communicating deprecation in a way, the developer will see it sounds 
like a good idea and I agree, that a concept to handle this (starting 
from 2.0) would make sense.

The question is, where and when to communicate it to the developer:
  * The MessageLog (why not)
  * stdout/stderr (sounds good as well, somebody will also see it when 
developing standalone applications)
  * The MessageBar (too obstrusive)
  * Only in debug mode or in release mode as well (A plugin developer 
does not have much reason to run QGIS in debug mode, so release would be 
nice as well)
  * Anything else?

I would propose to add a QGS_DEPRECATED macro which could be placed in 
any deprecated method which will take appropriate actions and 
deprecation methods will appear in a standardized way. (It should take 
an additional string argument, so one can specify the recommended way to 
fix this problem)
Maybe this can then be used to trigger something like the python recipe 
in Pirmins link [1]?

This would help in the case, when we see early, that the change is going 
to happen and when it's possible to leave both possibilities open for a 
while.

But I'm sure, there are still changes which cannot happen that way (i.e. 
The SIP update will convert QString to python unicode strings. Calling 
toString() on these will fail without deprecation. The threading branch 
will add functionality that needs the API to change without the 
possibility to keep deprecated methods). In these cases, a deprecated 
message could be thrown, once the updated is planned, but not when it's 
done.

Regards
Matthias

[1]: http://code.activestate.com/recipes/391367-deprecated/

On 01/24/2013 08:43 AM, Werner Macho wrote:
> Hi!
>
> I am not sure but I think what Pirmin meant here was that there was no 
> warning _message_.
> We all know that a lot of functions have been declared deprecated 
> since a very long time. But without knowing or getting a warning 
> message that THIS function is deprecated, I agree with Pirmin that 
> noone can see the deprecation until reading the source or .. until it 
> is cleaned out.
> Nevertheless it is good to clean the code (otherwise we would collect 
> deprecated functions forever)..
> So just as a reminder here to spit out warning messages for deprecated 
> functions next time ..
> Whenever this will be .. I hope not too soon ;)
>
> kind regards
> Werner
>
>
> On Thu, Jan 24, 2013 at 7:40 AM, Alexander Bruy 
> <alexander.bruy at gmail.com <mailto:alexander.bruy at gmail.com>> wrote:
>
>     Hi,
>
>     please note that most of this methods were marked as deprecated for
>     a long time. Some of them are deprecated since QGIS 1.6 or even
>     earlier.
>
>     On Thu, 24 Jan 2013 00:57:26 +0100
>     Pirmin Kalberer <pi_ml at sourcepole.com
>     <mailto:pi_ml at sourcepole.com>> wrote:
>
>     > Hi all,
>     >
>     > I found the time for an OpenLayers plugin release with merged
>     pull requests
>     > for Stamen map support and fixes for Python API breaks in master
>     branch (See
>     > https://twitter.com/PirminKalberer/status/294226472707715072 for
>     credits).
>     > The second point was quite annoying for many users and myself.
>     It is a really
>     > bad practice to break the API without deprecation messages when
>     calling these
>     > methods. There should be enough time (at least one minor
>     version) for
>     > developers for updating their plugins. In this case it would
>     have been easy to
>     > keep the old API and add a deprecation message similar to
>     > http://code.activestate.com/recipes/391367-deprecated/
>     >
>     > Regards
>     > Pirmin
>     >
>     > --
>     > Pirmin Kalberer
>     > Sourcepole  -  Linux & Open Source Solutions
>     > http://www.sourcepole.com
>     >
>     > _______________________________________________
>     > Qgis-developer mailing list
>     > Qgis-developer at lists.osgeo.org
>     <mailto:Qgis-developer at lists.osgeo.org>
>     > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>     --
>     Alexander Bruy
>     _______________________________________________
>     Qgis-developer mailing list
>     Qgis-developer at lists.osgeo.org <mailto:Qgis-developer at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From cavallini at faunalia.it  Thu Jan 24 00:16:35 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 24 Jan 2013 09:16:35 +0100
Subject: [Qgis-developer] Redmine frequent errors
In-Reply-To: <CA+TxYvONVny4t+-ri93t+WrULLGwM06TcdwKKHUaL7JENTZdRw@mail.gmail.com>
References: <50FE605E.7080303@faunalia.it>
	<CA+TxYvONVny4t+-ri93t+WrULLGwM06TcdwKKHUaL7JENTZdRw@mail.gmail.com>
Message-ID: <5100EDE3.4010702@faunalia.it>

Il 23/01/2013 17:03, Etienne Tourigny ha scritto:
> me too, random Error 500
>
ticket opened, fixed by Pirmin (thanks!)

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From marco.hugentobler at sourcepole.ch  Thu Jan 24 00:36:14 2013
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Thu, 24 Jan 2013 09:36:14 +0100
Subject: [Qgis-developer] geos help(union polygons)
In-Reply-To: <5100C75C.9020702@gmail.com>
References: <5100C75C.9020702@gmail.com>
Message-ID: <5100F27E.3020705@sourcepole.ch>

Hi Vinayan

It is recommended to use the C-api of geos, not the C++ one (C-api is 
more stable). Therefore, the qgis code uses only the C-api and you can 
use QgsGeometry::asGeos() in the plugin instead of wkt-export / wkt-import.
For cascaded union, there is the method  GEOSUnaryUnion(const 
GEOSGeometry* g1) in the c-api. The argument seems to be a geometry 
collection, which can be created with GEOSGeom_createCollection.

Regards,
Marco

On 24.01.2013 06:32, vinayan wrote:
> Hi,
>
> I am trying to find gaps inside a polygon layer much like the ESRI 
> topology rule("must not have gaps"). I did this initially by making an 
> extent polygon and then subtracting the union of all geometries from 
> this extent polygon.
>
> All this worked well and for around 100 polygons in the extent the 
> performance is ok. But when the count goes up, the performance is 
> drastically down. The issue, I think is because I am creating the 
> union iteratively as below.
>
> for ( it = mFeatureList1.begin(); it != FeatureListEnd; ++it )
> {
> g2 = it->feature.geometry();
> g1 = g1->combine( g2 );
> }
>
>
> From what I read from Martin Davis' 
> blog(http://lin-ear-th-inking.blogspot.in/2007/11/fast-polygon-merging-in-jts-using.html), 
> the cascaded polygon union improves the performance of union by a 
> large ratio.
>
> I want to use the below method that exist in Geos. But I am not sure 
> how to use it.
>
> I got this far(also pasted in pastebin http://pastebin.com/rniMLuZW),
>
> std::vector<geos::geom::Polygon*> geomCollection;
>
> QList<FeatureLayer>::ConstIterator FeatureListEnd = mFeatureList1.end();
> for ( it = mFeatureList1.begin(); it != FeatureListEnd; ++it )
> {
> g1 = it->feature.geometry();
> const std::string wkt = g1->exportToWkt().toStdString();
> geos::geom::Polygon* geom = 
> dynamic_cast<geos::geom::Polygon*>(geos::io::WKTReader().read(wkt)); 
> //error is here....
> geomCollection.push_back(geom);
> }
>
> geos::geom::Geometry* unionedPoly = 
> geos::operation::geounion::CascadedPolygonUnion::Union(&geomCollection);
>
>
> The error is,
> /home/vinayan/QgisGitWorking/Quantum-GIS/src/plugins/topology/topolTest.cpp:746: 
> error: cannot dynamic_cast 
> ?geos::io::WKTReader().geos::io::WKTReader::read((* & wkt))? (of type 
> ?struct geos::geom::Geometry*?) to type ?struct geos::geom::Polygon*? 
> (target is not pointer or reference to complete type)
>
>
> This has more to do with my c++ knowledge than anything i guess..but 
> if anyone can help where I am going wrong, it would be a good step 
> forward for me. If it works well, I am sure this function would find 
> use in other parts of Qgis where slow unions are involved.
>
> Thanks in advance,
> Vinayan
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From jef at norbit.de  Thu Jan 24 00:37:56 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 24 Jan 2013 09:37:56 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API	breaks
In-Reply-To: <5100E9F3.2020708@gmx.ch>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<CA+3oMjvPccv7Lz7De1MTBsbXbchtM5ZPC+Pb3crZqQ7Ba_CV2A@mail.gmail.com>
	<5100E9F3.2020708@gmx.ch>
Message-ID: <20130124083756.GA27178@norbit.de>

Hi Matthias,

On Thu, 24. Jan 2013 at 08:59:47 +0100, Matthias Kuhn wrote:
> The question is, where and when to communicate it to the developer:
>  * The MessageLog (why not)

Already done in f2029b4ec.

Python 2.7 disabled the deprecation warnings by default.  But the would have
gone to stderr anyway (which is "invisible" for most users).

> I would propose to add a QGS_DEPRECATED macro which could be placed in  
> any deprecated method which will take appropriate actions and  
> deprecation methods will appear in a standardized way.

We (or better put Qt) already have that too (Q_DECL_DEPRECATED).  But there
it's a compile time warning - and apparently not everyone builds with PEDANTIC
enabled...


J?rgen 

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From matthias.kuhn at gmx.ch  Thu Jan 24 00:43:28 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 24 Jan 2013 09:43:28 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API	breaks
In-Reply-To: <20130124083756.GA27178@norbit.de>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<CA+3oMjvPccv7Lz7De1MTBsbXbchtM5ZPC+Pb3crZqQ7Ba_CV2A@mail.gmail.com>
	<5100E9F3.2020708@gmx.ch> <20130124083756.GA27178@norbit.de>
Message-ID: <5100F430.3050602@gmx.ch>

Hi J?rgen

On 01/24/2013 09:37 AM, J?rgen E. Fischer wrote:
> Hi Matthias,
>
> On Thu, 24. Jan 2013 at 08:59:47 +0100, Matthias Kuhn wrote:
>> The question is, where and when to communicate it to the developer:
>>   * The MessageLog (why not)
> Already done in f2029b4ec.
Nice.
How do I need to tag deprecated methods to trigger this?
>
> Python 2.7 disabled the deprecation warnings by default.  But the would have
> gone to stderr anyway (which is "invisible" for most users).
>
>> I would propose to add a QGS_DEPRECATED macro which could be placed in
>> any deprecated method which will take appropriate actions and
>> deprecation methods will appear in a standardized way.
> We (or better put Qt) already have that too (Q_DECL_DEPRECATED).  But there
> it's a compile time warning - and apparently not everyone builds with PEDANTIC
> enabled...
... and for python plugins there is no compile time ...
>
> J?rgen
>

Matthias

From lists at linfiniti.com  Thu Jan 24 00:58:11 2013
From: lists at linfiniti.com (Tim Sutton)
Date: Thu, 24 Jan 2013 10:58:11 +0200
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <5100E633.80301@gmx.ch>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile> <501137A1.8030701@szczepanek.pl>
	<50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
	<CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
	<CALCNqkb+GWjaQDCGOQkji4cSX9gJZMWBX87XmgT6tW3Dn21zHg@mail.gmail.com>
	<5100E633.80301@gmx.ch>
Message-ID: <CALCNqkb1C17u8duseJ4+sgF8R7-t6QTCV8e2m0zQcq1=QQN-QQ@mail.gmail.com>

8>-------snip--------------------
>
>
> +1 as well.
>
> Concerning the naming scheme, OSGeo Graphics [1] state on their page that
> they follow the freedesktop standard [2]. Wouldn't it be nice to keep these
> things in line?
> This would be hyphens instead of CamelCase but it looks like noun-verb as
> well ( Things like document-save etc., your examples: vector-edit.svg and
> vector-stop-edit.svg).
>

+1 Yeah that sounds good to me.

Regards

Tim

> Regards,
> Matthias
>
> [1]: http://wiki.osgeo.org/wiki/OSGeo_Graphics
> <http://wiki.osgeo.org/wiki/OSGeo_Graphics>
> [2]:
> http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html
>

8>-------snip--------------------


--
Tim Sutton - QGIS Project Steering Committee Member (Release  Manager)
==============================================
Please do not email me off-list with technical
support questions. Using the lists will gain
more exposure for your issues and the knowledge
surrounding your issue will be shared with all.

Visit http://linfiniti.com to find out about:
 * QGIS programming and support services
 * Mapserver and PostGIS based hosting plans
 * FOSS Consulting Services
Skype: timlinux
Irc: timlinux on #qgis at freenode.net
==============================================

From jef at norbit.de  Thu Jan 24 01:04:08 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 24 Jan 2013 10:04:08 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API	breaks
In-Reply-To: <5100F430.3050602@gmx.ch>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<CA+3oMjvPccv7Lz7De1MTBsbXbchtM5ZPC+Pb3crZqQ7Ba_CV2A@mail.gmail.com>
	<5100E9F3.2020708@gmx.ch> <20130124083756.GA27178@norbit.de>
	<5100F430.3050602@gmx.ch>
Message-ID: <20130124090408.GA15675@norbit.de>

Hi Matthias,

On Thu, 24. Jan 2013 at 09:43:28 +0100, Matthias Kuhn wrote:
>> Already done in f2029b4ec.
> Nice.
> How do I need to tag deprecated methods to trigger this?

/Deprecated/ in the .sip

>> We (or better put Qt) already have that too (Q_DECL_DEPRECATED).  But there
>> it's a compile time warning - and apparently not everyone builds with PEDANTIC
>> enabled...

> ... and for python plugins there is no compile time ...

Oh, I thought you were talking about C++ - macro didn't sound pythonish to me.


J?rgen 

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From matthias.kuhn at gmx.ch  Thu Jan 24 01:15:47 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 24 Jan 2013 10:15:47 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API	breaks
In-Reply-To: <20130124090408.GA15675@norbit.de>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<CA+3oMjvPccv7Lz7De1MTBsbXbchtM5ZPC+Pb3crZqQ7Ba_CV2A@mail.gmail.com>
	<5100E9F3.2020708@gmx.ch> <20130124083756.GA27178@norbit.de>
	<5100F430.3050602@gmx.ch> <20130124090408.GA15675@norbit.de>
Message-ID: <5100FBC3.5040408@gmx.ch>

Hi J?rgen,

On 01/24/2013 10:04 AM, J?rgen E. Fischer wrote:
> Hi Matthias,
>
> On Thu, 24. Jan 2013 at 09:43:28 +0100, Matthias Kuhn wrote:
>>> Already done in f2029b4ec.
>> Nice.
>> How do I need to tag deprecated methods to trigger this?
> /Deprecated/ in the .sip
>
>>> We (or better put Qt) already have that too (Q_DECL_DEPRECATED).  But there
>>> it's a compile time warning - and apparently not everyone builds with PEDANTIC
>>> enabled...
>> ... and for python plugins there is no compile time ...
> Oh, I thought you were talking about C++ - macro didn't sound pythonish to me.
I thought it might be possible to tag it as deprecated independent of 
the language. But I'm not sure if this is possible. And if not, adding 
the /Deprecated/ in the .sip file isn't that much work.

Matthias

From pi_ml at sourcepole.com  Thu Jan 24 04:26:36 2013
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Thu, 24 Jan 2013 13:26:36 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
Message-ID: <3965264.6irDGXYyJf@robbe2>

Hi Alex,

Am Donnerstag, 24. Januar 2013, 10.40:00 schrieb Alexander Bruy:
> 
> please note that most of this methods were marked as deprecated for
> a long time. Some of them are deprecated since QGIS 1.6 or even
> earlier.

Where exactly is it marked as deprecated? At least not in the API docs [1]. 
And the current PyQGIS cookbook shows it as an example [2].
I'm only asking for a more user friendly way than having to read the C++ 
source code first.

Pirmin

[1] 
http://qgis.org/api/1.8/classQgsMapLayerRegistry.html#a06a1339cd757608a61e3899a27f39e8a
[2] http://www.qgis.org/pyqgis-cookbook/loadlayer.html#map-layer-registry

> 
> On Thu, 24 Jan 2013 00:57:26 +0100
> 
> Pirmin Kalberer <pi_ml at sourcepole.com> wrote:
> > Hi all,
> > 
> > I found the time for an OpenLayers plugin release with merged pull
> > requests
> > for Stamen map support and fixes for Python API breaks in master branch
> > (See https://twitter.com/PirminKalberer/status/294226472707715072 for
> > credits). The second point was quite annoying for many users and myself.
> > It is a really bad practice to break the API without deprecation messages
> > when calling these methods. There should be enough time (at least one
> > minor version) for developers for updating their plugins. In this case it
> > would have been easy to keep the old API and add a deprecation message
> > similar to
> > http://code.activestate.com/recipes/391367-deprecated/
> > 
> > Regards
> > Pirmin
-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com


From werner.macho at gmail.com  Thu Jan 24 04:30:32 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Thu, 24 Jan 2013 13:30:32 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <3965264.6irDGXYyJf@robbe2>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<3965264.6irDGXYyJf@robbe2>
Message-ID: <CA+3oMju23VckZGjkPqDxWFQ+NFDLmQkYMFcwx0bJuYXy36QE0g@mail.gmail.com>

Hmm
That reminds me on the consolidation efforts ..
There is a lot of outdated, wrong information somewhere in the wiki -
(including my translation pages as well).
And I agree that all this things should be either deleted or made
unavailable to public..
But who is going to do it? I guess thats the question since more than a
year ..
I am also afraid of deleting things I don't know - might be important for
some people I always think..

Unfortunately I have no suggestion howto solve that problem without having
to rewrite everything from scratch.. deleting the old pages immediately
after rewriting..

kind regards
Werner



On Thu, Jan 24, 2013 at 1:26 PM, Pirmin Kalberer <pi_ml at sourcepole.com>wrote:

> Hi Alex,
>
> Am Donnerstag, 24. Januar 2013, 10.40:00 schrieb Alexander Bruy:
> >
> > please note that most of this methods were marked as deprecated for
> > a long time. Some of them are deprecated since QGIS 1.6 or even
> > earlier.
>
> Where exactly is it marked as deprecated? At least not in the API docs [1].
> And the current PyQGIS cookbook shows it as an example [2].
> I'm only asking for a more user friendly way than having to read the C++
> source code first.
>
> Pirmin
>
> [1]
>
> http://qgis.org/api/1.8/classQgsMapLayerRegistry.html#a06a1339cd757608a61e3899a27f39e8a
> [2] http://www.qgis.org/pyqgis-cookbook/loadlayer.html#map-layer-registry
>
> >
> > On Thu, 24 Jan 2013 00:57:26 +0100
> >
> > Pirmin Kalberer <pi_ml at sourcepole.com> wrote:
> > > Hi all,
> > >
> > > I found the time for an OpenLayers plugin release with merged pull
> > > requests
> > > for Stamen map support and fixes for Python API breaks in master branch
> > > (See https://twitter.com/PirminKalberer/status/294226472707715072 for
> > > credits). The second point was quite annoying for many users and
> myself.
> > > It is a really bad practice to break the API without deprecation
> messages
> > > when calling these methods. There should be enough time (at least one
> > > minor version) for developers for updating their plugins. In this case
> it
> > > would have been easy to keep the old API and add a deprecation message
> > > similar to
> > > http://code.activestate.com/recipes/391367-deprecated/
> > >
> > > Regards
> > > Pirmin
> --
> Pirmin Kalberer
> Sourcepole  -  Linux & Open Source Solutions
> http://www.sourcepole.com
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130124/c5b35f1b/attachment.html>

From alexander.bruy at gmail.com  Thu Jan 24 04:32:54 2013
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu, 24 Jan 2013 15:32:54 +0300
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <3965264.6irDGXYyJf@robbe2>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<3965264.6irDGXYyJf@robbe2>
Message-ID: <CALuHMPBg_TJm3im_J_Vv=St63C5+LmpCEV31t8e3sbJxGPipmg@mail.gmail.com>

Hi Pirmin,

as I can see in API docs (using your link) there is a note:

Note:
    This method is deprecated since QGIS 1.8, you should use
addMapLayers rather.

Regarding PyQGIS CookBook I agree that it should be updated
to reflect all API changes. But I think it is better to update it after
merging new_vector_api branch

2013/1/24 Pirmin Kalberer <pi_ml at sourcepole.com>:
> Hi Alex,
>
> Am Donnerstag, 24. Januar 2013, 10.40:00 schrieb Alexander Bruy:
>>
>> please note that most of this methods were marked as deprecated for
>> a long time. Some of them are deprecated since QGIS 1.6 or even
>> earlier.
>
> Where exactly is it marked as deprecated? At least not in the API docs [1].
> And the current PyQGIS cookbook shows it as an example [2].
> I'm only asking for a more user friendly way than having to read the C++
> source code first.
>
> Pirmin
>
> [1]
> http://qgis.org/api/1.8/classQgsMapLayerRegistry.html#a06a1339cd757608a61e3899a27f39e8a
> [2] http://www.qgis.org/pyqgis-cookbook/loadlayer.html#map-layer-registry

-- 
Alexander Bruy

From marco at bernawebdesign.ch  Thu Jan 24 04:33:36 2013
From: marco at bernawebdesign.ch (Marco Bernasocchi)
Date: Thu, 24 Jan 2013 13:33:36 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <CA+3oMju23VckZGjkPqDxWFQ+NFDLmQkYMFcwx0bJuYXy36QE0g@mail.gmail.com>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<3965264.6irDGXYyJf@robbe2>
	<CA+3oMju23VckZGjkPqDxWFQ+NFDLmQkYMFcwx0bJuYXy36QE0g@mail.gmail.com>
Message-ID: <51012A20.4050908@bernawebdesign.ch>

On 01/24/2013 01:30 PM, Werner Macho wrote:
> There is a lot of outdated, wrong information somewhere in the wiki -
> (including my translation pages as well).
> And I agree that all this things should be either deleted or made
> unavailable to public..
Maybe we could just mark those pages as deprecated as well.

ciao

-- 
Marco Bernasocchi
http://opengis.ch

From wonder.sk at gmail.com  Thu Jan 24 04:40:48 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 24 Jan 2013 13:40:48 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <CALuHMPBg_TJm3im_J_Vv=St63C5+LmpCEV31t8e3sbJxGPipmg@mail.gmail.com>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<3965264.6irDGXYyJf@robbe2>
	<CALuHMPBg_TJm3im_J_Vv=St63C5+LmpCEV31t8e3sbJxGPipmg@mail.gmail.com>
Message-ID: <CAC2XbFdaEFrL0AQy_FkgUCRAA4K1tociAJ=Z6bkDjtT_uLCc5Q@mail.gmail.com>

On Thu, Jan 24, 2013 at 1:32 PM, Alexander Bruy
<alexander.bruy at gmail.com> wrote:
> Hi Pirmin,
>
> as I can see in API docs (using your link) there is a note:
>
> Note:
>     This method is deprecated since QGIS 1.8, you should use
> addMapLayers rather.

A bit off-topic, but I find it weird that addMapLayer() method has
been marked as deprecated: even if now we have the possibility to
specify more layers at once, it is always good to have a convenience
call that accepts just one layer (as that's what most users will do).

Martin

From jef at norbit.de  Thu Jan 24 04:54:53 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 24 Jan 2013 13:54:53 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API	breaks
In-Reply-To: <3965264.6irDGXYyJf@robbe2>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<3965264.6irDGXYyJf@robbe2>
Message-ID: <20130124125453.GA32612@norbit.de>

Hi Pirmin,

On Thu, 24. Jan 2013 at 13:26:36 +0100, Pirmin Kalberer wrote:
> Where exactly is it marked as deprecated? At least not in the API docs [1]. 

Well, without an explicit comment that might not be too obvious in doxygen as
it only leaves the Q_DECL_DEPRECATED tag in front of the methods (eg.
addMapLayer in "Public Member Functions").

Now there's at least a warning in the message log, if you use something
deprecated.  Not sure that was also visible on stderr with Python <2.7.


> And the current PyQGIS cookbook shows it as an example [2].

That's probably out of sync at many other places too.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From vinayan123 at gmail.com  Thu Jan 24 05:57:08 2013
From: vinayan123 at gmail.com (vinayan)
Date: Thu, 24 Jan 2013 19:27:08 +0530
Subject: [Qgis-developer] geos help(union polygons) (Marco Hugentobler)
In-Reply-To: <mailman.6236.1359018952.1025.qgis-developer@lists.osgeo.org>
References: <mailman.6236.1359018952.1025.qgis-developer@lists.osgeo.org>
Message-ID: <51013DB4.5090505@gmail.com>

On Thursday 24 January 2013 02:45 PM, 
qgis-developer-request at lists.osgeo.org wrote:
> Send Qgis-developer mailing list submissions to
> 	qgis-developer at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
> 	http://lists.osgeo.org/mailman/listinfo/qgis-developer
> or, via email, send a message with subject or body 'help' to
> 	qgis-developer-request at lists.osgeo.org
>
> You can reach the person managing the list at
> 	qgis-developer-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Qgis-developer digest..."
>
>
> Today's Topics:
>
>     1. Re: OpenLayers plugin release and Python API breaks
>        (Matthias Kuhn)
>     2. Re: Redmine frequent errors (Paolo Cavallini)
>     3. Re: geos help(union polygons) (Marco Hugentobler)
>     4. Re: OpenLayers plugin release and Python API	breaks
>        (J?rgen E. Fischer)
>     5. Re: OpenLayers plugin release and Python API	breaks
>        (Matthias Kuhn)
>     6. Re: Cast your vote: Default icon theme for QGIS 2.0 (Tim Sutton)
>     7. Re: OpenLayers plugin release and Python API	breaks
>        (J?rgen E. Fischer)
>     8. Re: OpenLayers plugin release and Python API	breaks
>        (Matthias Kuhn)
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

Hi Marco,

Thanks a lot for your suggestion. It is of great help. I did not know we had two geos versions. I have seen QgsGeometry::asGeos() and similar methods but never knew it was from C-api.

regards
Vinayan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130124/bfeb74ff/attachment-0001.html>

From strk at keybit.net  Thu Jan 24 06:18:31 2013
From: strk at keybit.net (Sandro Santilli)
Date: Thu, 24 Jan 2013 15:18:31 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <CAC2XbFdaEFrL0AQy_FkgUCRAA4K1tociAJ=Z6bkDjtT_uLCc5Q@mail.gmail.com>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<3965264.6irDGXYyJf@robbe2>
	<CALuHMPBg_TJm3im_J_Vv=St63C5+LmpCEV31t8e3sbJxGPipmg@mail.gmail.com>
	<CAC2XbFdaEFrL0AQy_FkgUCRAA4K1tociAJ=Z6bkDjtT_uLCc5Q@mail.gmail.com>
Message-ID: <20130124141831.GK3157@gnash>

On Thu, Jan 24, 2013 at 01:40:48PM +0100, Martin Dobias wrote:
> On Thu, Jan 24, 2013 at 1:32 PM, Alexander Bruy
> <alexander.bruy at gmail.com> wrote:
> > Hi Pirmin,
> >
> > as I can see in API docs (using your link) there is a note:
> >
> > Note:
> >     This method is deprecated since QGIS 1.8, you should use
> > addMapLayers rather.
> 
> A bit off-topic, but I find it weird that addMapLayer() method has
> been marked as deprecated: even if now we have the possibility to
> specify more layers at once, it is always good to have a convenience
> call that accepts just one layer (as that's what most users will do).

+1, and it doesn't cost nothing to implement addMapLayer as a oneliner
wrapper around addMapLayers ...

--strk;

From woklist at kyngchaos.com  Thu Jan 24 07:21:55 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu, 24 Jan 2013 09:21:55 -0600
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
	on Mac OS?
In-Reply-To: <1359005872587-5029442.post@n6.nabble.com>
References: <1359001010533-5029433.post@n6.nabble.com>
	<1743929804391126758@unknownmsgid>
	<1359005872587-5029442.post@n6.nabble.com>
Message-ID: <B6C287FF-1946-4C02-93D8-8D632D083160@kyngchaos.com>

On Jan 23, 2013, at 11:37 PM, Chris B wrote:

> Hmm possibly. 
> 
> I went back into the GUI/console and tried ogr as the importer, and it did
> appear to work:
> 
>>>> vlayer =
>>>> QgsVectorLayer("/Users/cbarnes/wkt2/kml/ny-08.kml","ny08","ogr")
>>>> vlayer.isValid()
> True
>>>> QgsGeometryAnalyzer().simplify(vlayer,"test_ny",0.005,False)
> True
> 
> Sure enough, I got a simplified layer that I could open through the GUI.  
> 
> Looking at what I saw on the web, my guess is I need to correct one of these
> two items:
> 
> 1. Ensure the correct prefix path:  I was under the impression it was
> supposed to be 
> 
> QgsApplication.setPrefixPath("/Applications/Qgis.app/Contents/MacOS/QGIS",True)
> 
> but if this is what sets up the plugin folder, it might be incorrect because
> in my install that folder is actually located at:
> 
> /Applications/QGIS.app/Contents/PlugIns
> 
I think /Applications/Qgis.app/Contents/MacOS is the right path (note: remove "QGIS" from what you have).  For OS X the prefix path is where the "QGIS" executable is.


> 2. Do I need LD_LIBRARY_PATH?
> 
> I think your current assumption is correct - if you know that either one of
> these are the problem I can probably get this working.  Thanks again for
> your help!


This is probably working fine - if you can import the qgis python modules, then it's working.  Loading QGIS providers and plugins will not give import errors if QGIS can't find them, you just get layer format errors later.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From larrys at dakotacarto.com  Thu Jan 24 08:33:02 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Thu, 24 Jan 2013 09:33:02 -0700
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <CALCNqkb+GWjaQDCGOQkji4cSX9gJZMWBX87XmgT6tW3Dn21zHg@mail.gmail.com>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile>
	<501137A1.8030701@szczepanek.pl> <50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
	<CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
	<CALCNqkb+GWjaQDCGOQkji4cSX9gJZMWBX87XmgT6tW3Dn21zHg@mail.gmail.com>
Message-ID: <CA+nQOR-PFx307NagwtnCj3+5ECG3GphoZCBfOipcURn9E2Fzbw@mail.gmail.com>

Hi,
> On Thu, Jan 24, 2013 at 12:18 AM, Tim Sutton <lists at linfiniti.com> wrote:
>
>   Hi
>>
>>   On Wed, Jan 23, 2013 at 2:10 AM, Larry Shaffer <larrys at dakotacarto.com>
wrote:

8<------------------------------------------------

>> 5) Clean up source code to work with only .svg icon files. But, do not
>> remove any code for theme choice, so that designers can still work on new
>> themes without having to replace the existing default one.

8<------------------------------------------------

> +1 from me on all these points too. To be clear, you are suggesting to
> ship with only one theme, but leave theme support in place?

Yes. For three reasons:

* As previously noted, this will allow future icon designers to try out new
themes without much effort and be able to switch back-forth between themes
to see differences (like now).

* Have central functions for fixing some issues (e.g. embedded rasters in
SVG), providing the source file in a variety of formats (QIcon, QPixmap,
QImage), and for abstracting away the need for an extension.

Example: QgsApplication::getThemeIcon( "vector-edit" )
This would return a QIcon, but built off of a SVG source, if one exists, if
not use a PNG. There should be no need to define the extension in the
parameter. This will help during the move from PNG to SVG, as once a SVG
file becomes available, it is automatically used.

I also suggest adding the following function:
QImage QgsApplication::getThemeImage( const QString theName )

* Allows to build some form of caching (if necessary)

Currently the QgsApplication::getTheme... functions query the filesystem,
but many of the icons are already in images.qrc (essentially a cache).
Those functions could look in the Qt resource first. Also, as part of the
build, and source install, there could be a script (e.g.
scripts/update-themes.sh) that parses the themes directory and
auto-generates a <mytheme>-theme.qrc.  Useful in QtDesigner, then later by
the built app. Keeping the filesystem calls would still allow for manual
adding of new themes by a designer.

[0]
https://github.com/qgis/Quantum-GIS/blob/master/src/core/qgsapplication.cpp#L347

>> It would be nice to have a little script in the repo that creates a
>> thumbnail gallery of all the icons.

+1 for this. Such a script could automatically push gallery updates to the
github pages orphaned branch (gh-pages) via a repo hook.

>> Also it might be nice to clean up the names a little - perhaps come up
>> with a  NounVerb.svg approach e.g. VectorEdit.svg VectorStopEdit.svg
>> so that non programmers can make sense of our naming scheme (yes I
>> know the current scheme is mainly my doing :-P).

+1 from me. Best to have the names not associated with any Qt concepts,
like 'Action'.


Lastly, other items that could be in the qgis-graphics repo:

* Historical imagery, i.e. all of the past splash screens, screen shots of
past QGIS versions, etc.

* All versions of the QGIS app icon, and any current working concepts for
it.

* SVG Symbols. While github should not be used as a CDN, a duplicate repo
(@ hub.qgis.org?) could be used as a backend to serve SVG symbols directly
to QGIS installs.

Example:
QGIS ships with basic set of SVG symbols. User clicks a 'Download more
symbols' button and a web view of the generated image gallery of the
qgis-graphics repo symbol section  pops up, where the user can browse the
symbols (same as gh-pages) and click on download links for groups of
symbols (auto-zip archived), or individual symbols. Those links would
actually point to the mirrored qgis-graphics repo somewhere on QGIS project
servers. The links are processed by a QGIS slot that downloads them and
installs in the user's default symbol location. Other users can send pull
requests against that symbol section of the qgis-graphics github repo to
have their designed symbols 'automatically' included in the browse-able
symbols.

Sorry for the long post. Regards,

Larry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130124/c0abd519/attachment.html>

From marco at bernawebdesign.ch  Thu Jan 24 11:49:38 2013
From: marco at bernawebdesign.ch (Marco Bernasocchi)
Date: Thu, 24 Jan 2013 20:49:38 +0100
Subject: [Qgis-developer] New qgis for android installer
Message-ID: <51019052.6030007@bernawebdesign.ch>

Hi all,
So I'm finally back on working on QGIS for android. Currently thanks to
the QGIS usergroup Switzerland and norbit.de I'm porting python QGIS to
android. So stay tuned on that one.

On the side, due to a bug [2] in the latest release of necessitas I
created a workaround version of qgis. the problem is that many people
install the latest release and miss al the menues. So today I decided to
upgrade the qgis installer and added the possibility of seamlessly
downloading the nightly builds and to clear the cache to save space on
the device. For the moment the nightly build is just the custom
workaround package but once the bug is gone I'll restart pushing real
nightlies.

now I'd like to ask the translators if you can have a shot at updating
the installet strings (about 15) you can use github to edit xml and pull
request or .po files and pull request or just a plain email to me. here
[1] more infos on the translation process for the installer

thanks a lot to all
Marco

[0] http://android.qgis.org/qgis.apk
[1] http://hub.qgis.org/wiki/android-qgis/Installer
[2] https://bugs.kde.org/show_bug.cgi?id=304240
-- 
Marco Bernasocchi
http://opengis.ch

From jack at schoenj.demon.nl  Thu Jan 24 13:19:32 2013
From: jack at schoenj.demon.nl (jsos)
Date: Thu, 24 Jan 2013 13:19:32 -0800 (PST)
Subject: [Qgis-developer] How to apply intersection of layers in Python
	plugin script
Message-ID: <1359062372328-5029680.post@n6.nabble.com>

I would like to run the Geoprocessing script for intersecting GIS layers 
(shape files) from within a python plugin. 
In the Quantum GIS API documentation I found this definition: 

bool QgsOverlayAnalyzer::intersection  ( QgsVectorLayer *  layerA, 
  QgsVectorLayer *  layerB, 
  const QString &  shapefileName, 
  bool  onlySelectedFeatures = false, 
  QProgressDialog *  p = 0 
 ) 

How to translate this to the script ? I'm able to select an output 
shapefileName. How to grab the input files from the map and is the result 
added to the MapCanvas ? 

Thanx. 

Jack Schoenmakers 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-apply-intersection-of-layers-in-Python-plugin-script-tp5029680.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From robert at szczepanek.pl  Thu Jan 24 13:37:18 2013
From: robert at szczepanek.pl (Robert Szczepanek)
Date: Thu, 24 Jan 2013 22:37:18 +0100
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile>
	<501137A1.8030701@szczepanek.pl> <50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
	<CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
Message-ID: <5101A98E.8030702@szczepanek.pl>

Hi Larry and team,

On 23.01.2013 01:10, Larry Shaffer wrote:
(...)
> 1) Create a new graphics repository at github.com <http://github.com>,
> e.g. named 'qgis-graphics'.
>
> It is important that a single repository exist where
> designers/developers can find and work on SVG originals/components for
(...)

 From technical point of view, will we improve somehow accessibility for 
designers moving from OSGeo Graphics to GITHub?
OSGeo Graphics is updated based on different requests (QGIS, GRASS and 
others). I would prefer to treat 'any' OSGeo repository (at OSGeo or 
github) as main point for graphics dissemination.
My point is - lets find the simplest environment for designers, but 
common for OSGeo projects. If we want seperate QGIS icons repo (on 
github), it can be synchronized/copied from central OSGeo. Or made as 
sub-folder/sub-project.

> 2) Condense current icons/pixmaps used in QGIS from all themes into just
> the default theme, with preference to vote-preferred GIS theme. Move the
> discarded icons and themes to the graphics repo, for later reference.

+1

> 3) Copy any relevant SVG/pixmap sources from OSGeo repo [0] and Robert
> Szczepanek's source icon work (that may not be in current source code
> repo) [2] to new qgis-graphics repository.

I moved all my work to OSGeo Graphics to avoid duplication. Duplicating 
it in qgis-graphics will make work harder. Unless it will be some 
synchro mechanism, which I'm not familiar with.

> 4) Try to convert ALL new default theme icons to SVG, which may mean
> recreating many as vector art since the embedded-raster-in-SVG method
> doesn't seem to work well now (causes ugly upscaling) [3]. It should be
> possible to fix that issue in code, allowing for use of
> pixmaps-inside-SVG, until they are converted to vector-based SVGs.

This is the point I would prefer to focus on, not administering two repos.

> * Maybe look into some funding for someone, like Robert, to work on 1)
> thru 4).

For me, at the moment, it is more matter of time (lack of), not money.
And anyone is welcome to supply OSGeo repo.
For coders, please just open appropriate tickets at OSGeo Graphics as 
not always I can follow fast QGIS progress.
By the way - great work Larry on QGIS improvement.

regards,
Robert

> [0] http://trac.osgeo.org/osgeo/browser/graphics
> [1] https://github.com/qgis/Quantum-GIS/pull/398/files
> [2] http://robert.szczepanek.pl/icons.php
> [3]
> http://osgeo-org.1560.n6.nabble.com/SVG-Icons-instead-of-PNGs-td4991647.html
> [4]
> http://osgeo-org.1560.n6.nabble.com/Cast-your-vote-Default-icon-theme-for-QGIS-2-0-td4987107.html
>
> See also: http://hub.qgis.org/wiki/quantum-gis/Icons_20
>
> Regards,
>
> Larry Shaffer
> Dakota Cartography
> Black Hills, South Dakota


From vinayan123 at gmail.com  Thu Jan 24 18:42:40 2013
From: vinayan123 at gmail.com (vinayan)
Date: Thu, 24 Jan 2013 18:42:40 -0800 (PST)
Subject: [Qgis-developer] geos help(union polygons)
In-Reply-To: <5100F27E.3020705@sourcepole.ch>
References: <5100C75C.9020702@gmail.com> <5100F27E.3020705@sourcepole.ch>
Message-ID: <1359081760555-5029705.post@n6.nabble.com>

Dear Marco,

I got it worked. I used GEOSUnionCascaded. On a polygon layer with 121336
features, process completed in around 3 minutes. Earlier I just used to kill
the process after half an hour waiting and memory issues.

Thanks
Vinayan



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/geos-help-union-polygons-tp5029441p5029705.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From larrys at dakotacarto.com  Thu Jan 24 19:15:12 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Thu, 24 Jan 2013 20:15:12 -0700
Subject: [Qgis-developer] Cast your vote: Default icon theme for QGIS 2.0
In-Reply-To: <5101A98E.8030702@szczepanek.pl>
References: <CALCNqkYXrFtGfLRvym+RQyRRD1WvgFeBZF899hEXze01Rn78aw@mail.gmail.com>
	<1343304621.21351.5.camel@kk-mobile>
	<501137A1.8030701@szczepanek.pl> <50113A0B.6030602@szczepanek.pl>
	<CA+nQOR96WyODdZY9Jg0n_yOTpqYycMZn+VerJLCsq8qGOnf2bQ@mail.gmail.com>
	<CALCNqkaUdovk0wCfgi0v262Bv5CN=2ou1FrKiE4S_d6D6L67CA@mail.gmail.com>
	<CAB4g1=z1GiUp=708-MyYOJD9N7vNWCfHXNHJwed-HOefrLeiMA@mail.gmail.com>
	<50145157.8010608@szczepanek.pl>
	<CA+nQOR-TcfXdt-aQ-f8LJLLr7xcz0mdCQtrwLN7iyyZuqY12kg@mail.gmail.com>
	<50171914.4030002@szczepanek.pl>
	<CA+nQOR_TZmktoj_t2DdwhZEHx-FwdwgKfiUnO274CEC=P3hZnA@mail.gmail.com>
	<5101A98E.8030702@szczepanek.pl>
Message-ID: <CA+nQOR_5enizO3Qpu0MQb_Oss7Xjeit58F6znGt87W1RUE3n4A@mail.gmail.com>

Hi Robert,


On Thu, Jan 24, 2013 at 2:37 PM, Robert Szczepanek <robert at szczepanek.pl>wrote:

> Hi Larry and team,
>
> On 23.01.2013 01:10, Larry Shaffer wrote:
> (...)
>
>> 1) Create a new graphics repository at github.com <http://github.com>,
>> e.g. named 'qgis-graphics'.
>>
>> It is important that a single repository exist where
>> designers/developers can find and work on SVG originals/components for
>>
> (...)
>
> From technical point of view, will we improve somehow accessibility for
> designers moving from OSGeo Graphics to GITHub?
> OSGeo Graphics is updated based on different requests (QGIS, GRASS and
> others). I would prefer to treat 'any' OSGeo repository (at OSGeo or
> github) as main point for graphics dissemination.
> My point is - lets find the simplest environment for designers, but common
> for OSGeo projects. If we want seperate QGIS icons repo (on github), it can
> be synchronized/copied from central OSGeo. Or made as
> sub-folder/sub-project.
>

The best reasons to use github.com is for its forking and pull requests
features. They make submissions from the community and other developers
very straightforward, both for the submitter and for the repository
maintainer.

If the OSGeo graphics repository were migrated to github the following
could take place...

Anyone in the OSGeo community, or the QGIS project itself, could fork the
OSGeo graphics repository to their account. Changes can readily be made in
usual git fashion (separate branches or on master) and a pull request sent
to the OSGeo graphics account. Developers working on QGIS would just
deposit a copy of the SVG's final version in the QGIS source, then do a
pull request or commit to the Quantum-GIS repository as usual. The
difference here is that all versions/variations/components of that graphic
would be included in the pull request to the OSGeo graphics repository.

The gallery script setup that Tim and I mentioned could be done for the
OSGeo graphics github repository utilizing the gh-pages feature. Github
also has a ticket management system. Essentially, with such a setup, there
would be no reason for the QGIS project to set up its own graphics
repository then.

Maybe just a subdirectory for QGIS graphics, like you mentioned, would be
all that needs added to the OSGeo repository.

I agree, the simpler for everyone, the better. So, my suggestion now is:
moving the OSGeo graphics repo to github would do that.

Regards,

Larry


 2) Condense current icons/pixmaps used in QGIS from all themes into just
>> the default theme, with preference to vote-preferred GIS theme. Move the
>> discarded icons and themes to the graphics repo, for later reference.
>>
>
> +1
>
>  3) Copy any relevant SVG/pixmap sources from OSGeo repo [0] and Robert
>> Szczepanek's source icon work (that may not be in current source code
>> repo) [2] to new qgis-graphics repository.
>>
>
> I moved all my work to OSGeo Graphics to avoid duplication. Duplicating it
> in qgis-graphics will make work harder. Unless it will be some synchro
> mechanism, which I'm not familiar with.
>
>  4) Try to convert ALL new default theme icons to SVG, which may mean
>> recreating many as vector art since the embedded-raster-in-SVG method
>> doesn't seem to work well now (causes ugly upscaling) [3]. It should be
>> possible to fix that issue in code, allowing for use of
>> pixmaps-inside-SVG, until they are converted to vector-based SVGs.
>>
>
> This is the point I would prefer to focus on, not administering two repos.
>
>  * Maybe look into some funding for someone, like Robert, to work on 1)
>> thru 4).
>>
>
> For me, at the moment, it is more matter of time (lack of), not money.
> And anyone is welcome to supply OSGeo repo.
> For coders, please just open appropriate tickets at OSGeo Graphics as not
> always I can follow fast QGIS progress.
> By the way - great work Larry on QGIS improvement.
>
> regards,
> Robert
>
>  [0] http://trac.osgeo.org/osgeo/**browser/graphics<http://trac.osgeo.org/osgeo/browser/graphics>
>> [1] https://github.com/qgis/**Quantum-GIS/pull/398/files<https://github.com/qgis/Quantum-GIS/pull/398/files>
>> [2] http://robert.szczepanek.pl/**icons.php<http://robert.szczepanek.pl/icons.php>
>> [3]
>> http://osgeo-org.1560.n6.**nabble.com/SVG-Icons-instead-**
>> of-PNGs-td4991647.html<http://osgeo-org.1560.n6.nabble.com/SVG-Icons-instead-of-PNGs-td4991647.html>
>> [4]
>> http://osgeo-org.1560.n6.**nabble.com/Cast-your-vote-**
>> Default-icon-theme-for-QGIS-2-**0-td4987107.html<http://osgeo-org.1560.n6.nabble.com/Cast-your-vote-Default-icon-theme-for-QGIS-2-0-td4987107.html>
>>
>> See also: http://hub.qgis.org/wiki/**quantum-gis/Icons_20<http://hub.qgis.org/wiki/quantum-gis/Icons_20>
>>
>> Regards,
>>
>> Larry Shaffer
>> Dakota Cartography
>> Black Hills, South Dakota
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130124/7cfb2e6f/attachment.html>

From pi_ml at sourcepole.com  Fri Jan 25 00:59:48 2013
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Fri, 25 Jan 2013 09:59:48 +0100
Subject: [Qgis-developer] OpenLayers plugin release and Python API
In-Reply-To: <-5303715441504235449@unknownmsgid>
References: <-5303715441504235449@unknownmsgid>
Message-ID: <7232355.HDSzgTvPGb@robbe2>

Hi Nathan,

Am Mittwoch, 23. Januar 2013, 16.09:43 schrieb Nathan Woodrow:
> 
> We are preparing for 2.0 so the plan has always been to break API and
> remove old unused methods.
> 
> The select API will break again soon once Martin merges his new vector
> API.

If it's the plan to break plugins then I wait with the next update until 2.0 
is released.
Other OSS projects I'm working with care more for their users. They release a 
new API with a major version and deprecate the old one. The deprecated API 
remains available for at least one release. I'm fine with removing old 
labelling, etc., but not with breaking the plugin API from 1.8 to 2.0 without 
proper deprecation.

Pirmin

> 
> - Nathan
> From: Pirmin Kalberer
> Sent: 24/01/2013 9:58 AM
> To: qgis-dev
> Subject: [Qgis-developer] OpenLayers plugin release and Python API
> breaks
> Hi all,
> 
> I found the time for an OpenLayers plugin release with merged pull requests
> for Stamen map support and fixes for Python API breaks in master branch (See
> https://twitter.com/PirminKalberer/status/294226472707715072 for credits).
> The second point was quite annoying for many users and myself. It is a
> really bad practice to break the API without deprecation messages when
> calling these methods. There should be enough time (at least one minor
> version) for developers for updating their plugins. In this case it would
> have been easy to keep the old API and add a deprecation message similar to
> http://code.activestate.com/recipes/391367-deprecated/
> 
> Regards
> Pirmin
-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com


From radim.blazek at gmail.com  Fri Jan 25 01:54:17 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Fri, 25 Jan 2013 10:54:17 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <DC49060A7E430243BF2D4090200661931AD3D1A1DF@OC1EX201.ME.MBGOV.CA>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
	<CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
	<50FEC2E9.6080401@cubewerx.com>
	<CAEMrtYpimrcXFjBmiwx=ByKY_gV0YVu_=s3yOeBXLaxhGTeHtQ@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3D1A1DF@OC1EX201.ME.MBGOV.CA>
Message-ID: <CAEMrtYorgZNop1fkTvBhFJsD5gxJwBMxOfMaSCxQ0E+UJB6eJg@mail.gmail.com>

On Wed, Jan 23, 2013 at 10:19 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> Radim,
>         Would you be willing to add an option to "Disable max extent verification" - I believe that would solve
> all of our problems with connecting to this very large image store. If you do so then please let me know and I will
> be happy to test it.

That option would be the worst end for me. I have commited in f6806a9
a fix which allows to continue even if the extent verification fails.
Unfortunately other problems appeared immediately. Raster layer in
legend has 32x32 icon covering the whole extent. Another larger
thumbnail covering the whole extent is used in raster properties. I
think that the server must be fixed at least so that if the requested
extent is too large it responds immediately, reporting an error.

So, it works, but you have to wait for few timeouts (don't forget to
set network timeout option to something reasonable), the thumbnail in
legend and properties are black, until you zoom-in enough you get
black rectangle rendered.

Radim

> Thanks,
>         Bob Bruce
>
> -----Original Message-----
> From: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] On Behalf Of Radim Blazek
> Sent: January-23-13 3:07 AM
> To: ekeighan at cubewerx.com
> Cc: Qgis-Developer; Bob Bruce
> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> On Tue, Jan 22, 2013 at 5:48 PM, ekeighan <ekeighan at cubewerx.com> wrote:
>> Radim,
>>
>> Our WCS was designed to be used as per the intent of the OGC WCS
>> specification for extracting data, not for browsing it. The OGC WMS or WMTS
>> is intended to be used for browsing.
>
> Just for curiosity, can you point me to an OGC document supporting
> this interpretation? In any case, my aim is not to defend how QGIS
> works pointing to WCS specification but to get it working in most
> cases. If you insist on that interpretation we have to take it as
> reality.
>
>> But we admit that the WCS spec is deficient in that it does not describe the
>> raster-data type sufficiently nor in a standard way.  E.g., it doesn't tell
>> you that the raster data has five channels of 16-bit unsigned integers
>> representing Red, Green, Blue, Infrared and Alpha channels.  This is why WCS
>> client applications tend to request a sample image.
>
> Indeed, also no data values ...
>
>> GDAL does this in a more friendly way by requesting a small 2x2-pixel sample
>> image at the resolution of the source data.  This causes no problems for a
>> WCS organized to extract data at the source resolution. We suggest that QGIS
>> use the same method to avoid unnecessary problems with our and other
>> servers.
>
> QGIS does something similar, i.e. 6x3 pixels on original resolution.
> As I already wrote twice, the 10x10 pixels request for the whole
> extent is done to verify a real extent of the coverage. Some servers
> may report wrong larger extent in capabilities and requests outside
> the real extent fail. If I disable this additional check, we get it
> working with CubeWerx, but break it for other servers and that is not
> the way ahead.
>
>> Our WCS is organized to always access the raw source data in order to
>> produce the best image possible for analysis.  However, this approach breaks
>> down catastrophically in the QGIS case where your request translates into
>> accessing tens of thousands of source images covering multiple terabytes of
>> data that needs to be processed to fulfill the 10x10 request. Many
>> developers are familiar with this particularity of the WCS (for data
>> extraction at source resolution) and use it in tandem with a WMS or WMTS for
>> views and only access the WCS when a download at source resolution is
>> required, typically for analysis.
>
> This interpretation of the WCS standard degrades it to a richer
> download application. I believe that WCS has much more potential.
> Maybe the possibilities shifted a bit during the years with broadband
> connections and mobile applications?
>
>> In order to support a more flexible access to the WCS we were thinking of
>> modifying our access method when zoomed out sufficiently. Source-overview
>> files and tile data are available which make WMS and WMTS access very
>> efficient. CubeWerx have these products and our clients are of course
>> deploying them in addition to a WCS but there can be a problem with both
>> approaches in that the secondary data may not match the exact raster data
>> type of the source data. E.g., the tiles are rendered for common maps which
>> use 3-channel 8-bit RGB, but the source data might be 4-channel 16-bit
>> RGB+Infrared.
>
> But it should not be a problem (apart computational time)  to create
> lower resolution overviews also for WCS with exactly the same data
> types and bands as original data. Is it?
>
> As I said, I would like to fix QGIS to work smoothly also with your
> services. An easy workaround is to allow the max extent check to fail
> but it will still wait for server timeout. Well, if the server does
> not support full extent, it could return WCS error response
> immediately instead of timeout error.
>
> Another possibility would be to add an option "Disable max extent
> verification" but that is user unfriendly.
>
> Radim
>
>> Regards,
>>
>> Edric Keighan
>> President & CEO
>> CubeWerx Inc.
>>
>> Tel: 613-447-8306 Mobile
>>
>>
>> On 22/01/2013 3:43 AM, Radim Blazek wrote:
>>>
>>> On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
>>>>
>>>> Radim,
>>>>              This dataset is a huge collection of imagery encompassing an
>>>> area approximately 350 kilometres square. There are over 5000 images in the
>>>> dataset, with each image having a .5m pixel size and a file size of 293Mb
>>>> and I doubt that it is feasible to request a small sample image from the
>>>> entire range of the imagery. Is there some way that we can get QGIS to
>>>> request an image from a much smaller area (like the extent of the viewport)
>>>> to establish the validity of the dataset?
>>>
>>> Currently not. It would be necessary to disable the check for max
>>> extent. I am willing to add workarounds for various server
>>> particularities (the check for true max extent is one of them) but in
>>> this case I am not quite convinced. It is obviously server problem.
>>> The server offers capabilities which it cannot fulfill.
>>>
>>> I'll consider to allow to pass the extent check without error.
>>> However, the request will be done and it will wait timeout until it
>>> fails.
>>>
>>> I think that GDAL does not do that check, so you can create GDAL WCS
>>> XML file and open it as raster file.
>>>
>>> Radim
>>>
>>>> Ultimately we want to work with a dataset of .2m sized pixels and
>>>> individual images of 2.94Gb and four bands.
>>>>
>>>> Thanks for your help,
>>>>
>>>>           Bob Bruce
>>>>
>>>> Sent from my iPhone
>>>>
>>>> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>>
>>>> Frank,
>>>>
>>>> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
>>>> in QGIS it is used to get true extent. It may happen that a server is
>>>> misconfigured and reports larger extent in
>>>> GetCapabilities/DescribeCoverage and successive request inside that
>>>> extent but outside the real coverage extent would fail. Requesting the
>>>> whole extent and getting
>>>> its real extent is the only way AFAIK to get real extent.
>>>>
>>>> Radim
>>>>
>>>> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com>
>>>> wrote:
>>>>>
>>>>> Bruce,
>>>>>
>>>>> I think the 10x10 request is being made by GDAL's WCS driver in order
>>>>> to establish some details about the underlying WCS and it defaults to
>>>>> the whole extents.  It sucks fairly badly that such a request can't be
>>>>> done.  It might be possible to dummy in the information in the .wcs
>>>>> config file to avoid having to do that query.  Investigating.
>>>>>
>>>>> Best regards,
>>>>> Frank
>>>>>
>>>>>
>>>>>
>>>>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca>
>>>>> wrote:
>>>>>>
>>>>>> Radim,
>>>>>>      I have been looking at this again with two people from Cubewerx
>>>>>> and we find that QGIS is issuing this request:
>>>>>>
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>>>>
>>>>>> while the bounding box that I currently have displayed in QGIS is
>>>>>> roughly:
>>>>>>
>>>>>>
>>>>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>>>>
>>>>>> I need to get QGIS to restrict its request to this extent to work. Do
>>>>>> you know how I can do that?
>>>>>>
>>>>>> If I issue this request from my web browser:
>>>>>>
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>>>>
>>>>>> I actually get a tiff image that I can view that looks good and is
>>>>>> similar to what I would expect to see in QGIS. Now I need to get QGIS to
>>>>>> actually issue that request.
>>>>>>
>>>>>> Thanks,
>>>>>>        Bob Bruce
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>>>>> Sent: January-18-13 3:36 AM
>>>>>> To: Bruce, Bob (CON)
>>>>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>>>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho
>>>>>> Refresh WCS
>>>>>>
>>>>>> Hi again,
>>>>>>
>>>>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com>
>>>>>> wrote:
>>>>>>>
>>>>>>> I don't see the same problem here. GetCapabilities and
>>>>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>>>>> connection details dialog and it was logged on server but that is
>>>>>>> another issue?
>>>>>>>
>>>>>>> I have got another error however. DescribeCoverage is successfully
>>>>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>>>>> raster to get more info):
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>>>>
>>>>>>> and it fails on server side with:
>>>>>>>
>>>>>>> "Gateway Time-out
>>>>>>> The gateway did not receive a timely response from the upstream server
>>>>>>> or application."
>>>>>>>
>>>>>>> Because the request covers the whole extent, it could be that the
>>>>>>> raster is quite large and there are no overviews/pyramids ready on
>>>>>>> server, it starts to do resampling of the whole extent but it takes to
>>>>>>> much time?
>>>>>>
>>>>>> It really seems to be the problem, I have tried with smaller extent
>>>>>> and server sent a correct TIFF in response. In any case it takes very
>>>>>> long time.
>>>>>>
>>>>>> Radim
>>>>>>
>>>>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>>>>> usually printed requests which failed and in debug messages are
>>>>>>> printed all requests.
>>>>>>>
>>>>>>> Radim
>>>>>>>
>>>>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON)
>>>>>>> <Bob.Bruce at gov.mb.ca> wrote:
>>>>>>>>
>>>>>>>> I am having trouble using the WCS capability in version 1.9.0 code
>>>>>>>> revision f210668
>>>>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>>>>
>>>>>>>> QGIS version                    1.9.0-Master    QGIS code revision
>>>>>>>> f210668
>>>>>>>> Compiled against Qt             4.7.1                   Running
>>>>>>>> against Qt              4.7.1
>>>>>>>> Compiled against GDAL/OGR       1.9.2                   Running
>>>>>>>> against GDAL/OGR        1.9.2
>>>>>>>> GEOS Version                    3.3.5                   PostgreSQL
>>>>>>>> Client Version       8.3.10
>>>>>>>> SpatiaLite Version              3.0.1                   QWT Version
>>>>>>>> 5.2.1
>>>>>>>> PROJ.4 Version                  480                     QScintilla2
>>>>>>>> Version             2.6.2
>>>>>>>> This copy of QGIS writes debugging output.
>>>>>>>>
>>>>>>>> The URL that I am connecting to is:
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>>>>> The URL of the GetCapabilities request is:
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>>>>
>>>>>>>> According to Cubewerx, who is our imagery OGC WCS service provider,
>>>>>>>> their log shows both the GetCapabilities and GetCoverage requests present in
>>>>>>>> the same HTTP request while they should be done separately.
>>>>>>>>
>>>>>>>> This is the request that they are finding in their server log:
>>>>>>>>        2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>>> 205.200.189.2 to URL
>>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>>
>>>>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>>>>
>>>>>>>> Here is the error report that I am seeing in QGIS when I try and add
>>>>>>>> this data source to the project:
>>>>>>>>        WCS provider: Cannot calculate extent
>>>>>>>>        (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>>        Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%
>>>>>>>> 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>        (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>        Bob Bruce
>>>>>>>>
>>>>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>>>>> Sent: January-17-13 3:33 PM
>>>>>>>> To: Bruce, Bob (CON)
>>>>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>>>>
>>>>>>>> Bob,
>>>>>>>>
>>>>>>>> FYI...
>>>>>>>>
>>>>>>>> ekeighan at cubewerx.com wrote:
>>>>>>>>
>>>>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>>>>>
>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>
>>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>>> calculate the extent?
>>>>>>>> Looking through the server log, we see only the following related
>>>>>>>> request
>>>>>>>> present twice:
>>>>>>>>
>>>>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>>> 205.200.189.2 to URL
>>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------
>>>>>>>>
>>>>>>>> This doesn't make any sense, since it contains two different REQUEST
>>>>>>>> arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>>>>
>>>>>>>>
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>
>>>>>>>> but it almost seems as though it was entered improperly as:
>>>>>>>>
>>>>>>>>
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>>>>
>>>>>>>> The WCS request received from the client produces an error return,
>>>>>>>> since
>>>>>>>> the server has problems parsing the broken request:
>>>>>>>>
>>>>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1
>>>>>>>> http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>>>>> <Exception exceptionCode="MissingParameterValue"
>>>>>>>> locator="identifiers">
>>>>>>>>    <ExceptionText>CubeSERV: Cannot execute WCS request, raised in
>>>>>>>> Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>>>>    <ExceptionText>CubeSERV: Missing parameter "identifiers", raised
>>>>>>>> in throwMissingParamError() in file "cw_cgiparams.c" line
>>>>>>>> 797</ExceptionText>
>>>>>>>> </Exception>
>>>>>>>> </ExceptionReport>
>>>>>>>>
>>>>>>>> The first request from the client should be just a proper
>>>>>>>> GetCapabilities
>>>>>>>> request:
>>>>>>>>
>>>>>>>>
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>>>>
>>>>>>>> which returns the expected data.
>>>>>>>> -------------------------------------------------
>>>>>>>>
>>>>>>>> Regards,
>>>>>>>>
>>>>>>>> Edric
>>>>>>>>
>>>>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>>>>> Edric,
>>>>>>>>            I took another look at connecting QGIS to your WCS, using
>>>>>>>> a newer beta test version. It provided a mechanism to connect to the WCS and
>>>>>>>> it allowed me to try and add it to my map. When I tried to add it I got the
>>>>>>>> following message:
>>>>>>>>
>>>>>>>> WCS provider: Cannot calculate extent
>>>>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>> Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>
>>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>>> calculate the extent?
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>            Bob
>>>>>>>>
>>>>>>>>
>>>>>>>> *******************************************************************************************************************
>>>>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services
>>>>>>>> Management
>>>>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba
>>>>>>>> Conservation and Water Stewardship
>>>>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>>>>> **                                                  Winnipeg,
>>>>>>>> Manitoba, Canada, R3H 0W4
>>>>>>>> **
>>>>>>>> 49-54-31.85N,97-12-16.08W
>>>>>>>> **
>>>>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>>>>>
>>>>>>>> *******************************************************************************************************************
>>>>>>>>
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> Qgis-developer mailing list
>>>>>>>> Qgis-developer at lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>>> _______________________________________________
>>>>>> Qgis-developer mailing list
>>>>>> Qgis-developer at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>>
>>>>> ---------------------------------------+--------------------------------------
>>>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>>>> warmerdam at pobox.com
>>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From mihis.sakh at gmail.com  Fri Jan 25 05:41:06 2013
From: mihis.sakh at gmail.com (Mihis)
Date: Fri, 25 Jan 2013 05:41:06 -0800 (PST)
Subject: [Qgis-developer] Ubuntu 12.04 64 bit - QGIS 1.8.0 - Segmentation
	Fault
Message-ID: <1359121266794-5029861.post@n6.nabble.com>

Hi.

I have built QGIS 1.8.0 (final release) from source code in Qt Creator by
opening CMake project file (CMakeLists.txt). Platform - Ubuntu 64 bit. The
built finished without errors. All build dependencies were installed
according the following instructions
https://github.com/qgis/Quantum-GIS/blob/master/INSTALL. However, when I
start program either in release or in debug mode the following runtime error
occurs:

Starting .../qtcreator-build/output/lib/qgis/grass/modules/qgis.d.rast...
The program has unexpectedly finished.
.../qtcreator-build/output/lib/qgis/grass/modules/qgis.d.rast exited with
code 0 

Does anybody have ideas where the problem is?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Ubuntu-12-04-64-bit-QGIS-1-8-0-Segmentation-Fault-tp5029861.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From matthias.kuhn at gmx.ch  Fri Jan 25 05:44:46 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Fri, 25 Jan 2013 14:44:46 +0100
Subject: [Qgis-developer] Ubuntu 12.04 64 bit - QGIS 1.8.0 -
 Segmentation Fault
In-Reply-To: <1359121266794-5029861.post@n6.nabble.com>
References: <1359121266794-5029861.post@n6.nabble.com>
Message-ID: <51028C4E.9000108@gmx.ch>

Hi Mihis,

Did you specify to run the qgis binary? In QtCreator, go to Projects => 
Run Settings and check that the Run configuration is set to qgis.

Regards,
Matthias

On 01/25/2013 02:41 PM, Mihis wrote:
> Hi.
>
> I have built QGIS 1.8.0 (final release) from source code in Qt Creator by
> opening CMake project file (CMakeLists.txt). Platform - Ubuntu 64 bit. The
> built finished without errors. All build dependencies were installed
> according the following instructions
> https://github.com/qgis/Quantum-GIS/blob/master/INSTALL. However, when I
> start program either in release or in debug mode the following runtime error
> occurs:
>
> Starting .../qtcreator-build/output/lib/qgis/grass/modules/qgis.d.rast...
> The program has unexpectedly finished.
> .../qtcreator-build/output/lib/qgis/grass/modules/qgis.d.rast exited with
> code 0
>
> Does anybody have ideas where the problem is?
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Ubuntu-12-04-64-bit-QGIS-1-8-0-Segmentation-Fault-tp5029861.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From snowstorms at mac.com  Fri Jan 25 06:15:16 2013
From: snowstorms at mac.com (Chris B)
Date: Fri, 25 Jan 2013 06:15:16 -0800 (PST)
Subject: [Qgis-developer] Problems using QgsGeometryAnalyzer.simplify()
	on Mac OS?
In-Reply-To: <B6C287FF-1946-4C02-93D8-8D632D083160@kyngchaos.com>
References: <1359001010533-5029433.post@n6.nabble.com>
	<1743929804391126758@unknownmsgid>
	<1359005872587-5029442.post@n6.nabble.com>
	<B6C287FF-1946-4C02-93D8-8D632D083160@kyngchaos.com>
Message-ID: <1359123316469-5029869.post@n6.nabble.com>

This worked great, I'm able to proceed with my scripting now.  Thanks again
for all the help!



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problems-using-QgsGeometryAnalyzer-simplify-on-Mac-OS-tp5029433p5029869.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From a.neumann at carto.net  Fri Jan 25 08:18:08 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 25 Jan 2013 17:18:08 +0100
Subject: [Qgis-developer] Further improvements of the atlas serial printing
Message-ID: <3a16023a0b15f3c8b48abcba7df31e0e@carto.net>

 Dear QGIS users,

 We will be financing two improvements in the atlas serial printing 
 functions of the print composer:

 * ability to order the pages in the multipage PDF based on an attribute 
 column and sort order
 * ability to filter the set of pages (e.g. only print pages for 
 features with ID 4,6,8) based on an expression

 The work will be done by Oslandia, the ones who originally worked on 
 Atlas serial printing. I just wanted to let you know that someone is 
 working on it.

 The other reason I am contacting you is that I have additional wishes 
 and ideas for serial printing and reporting which I can't finance now.

 One is:

 * ability to supply a list of desired map scales and grid spaces for 
 the mapgrid - Atlas would pick the one scale from the list where the 
 feature fully fits in. E.g. one would supply the following mapscales: 
 1000,2000,2500,5000,7500,10000,12500,15000,2000,25000 and grid spaces: 
 25,30,50,75,100,...

 There is already a list of map scales in the project settings. Maybe we 
 can enhance it with corresponding grid spaces.

 Would someone have an interest in financing this feature? If yes, 
 please contact me.

 ------------

 Further along I want to see QGIS morph into a reporting tool (similar 
 to Jasper) where one could also print data sheets with photos, tables, 
 charts, etc. - but directly from QGIS - and also available through QGIS 
 server through extended GetPrint commands.

 Maybe something to discuss in Valmiera at the hackfest.

 Best greetings,
 Andreas

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From regis.haubourg at eau-adour-garonne.fr  Fri Jan 25 09:17:42 2013
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Fri, 25 Jan 2013 09:17:42 -0800 (PST)
Subject: [Qgis-developer] Further improvements of the atlas serial
	printing
In-Reply-To: <3a16023a0b15f3c8b48abcba7df31e0e@carto.net>
References: <3a16023a0b15f3c8b48abcba7df31e0e@carto.net>
Message-ID: <1359134262382-5029937.post@n6.nabble.com>

Hi Andreas, 
thanks for sharing.
I am interested in your funding request for mapscales , but it's not top
priority. Let's ask Oslandia, anf if shared costs are affordable, I'm OK! 

 I was on the way to fund some other features missing:
A - options to highlight coverage feature in maps + styling settings for
that feature. 
 sub options:
  1. use geometry 
  2. generate mask from geometry (a polygon with a hole). 
  3. apply buffer to geometry / mask
-
B - option to use coverage real geometry in overview maps (it currently
shows only bbox)

C-  We would like to discuss the possible ways to activate labels only
inside coverage layer or coverage layer + buffer. This is larger than Atlas,
and need some concertation with core dev's. Ideally, I would like to be able
also to draw some layer on top of labels, so that a mask layer can mask with
some transparency data & labels outside of the Area of Interest. I would
also like to activate such a feature in main map canvas, outside of Atlas
use case. 
 Anyone interested in sharing this? 

Cheers, 
R?gis







--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Further-improvements-of-the-atlas-serial-printing-tp5029903p5029937.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From cavallini at faunalia.it  Sat Jan 26 00:24:59 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 26 Jan 2013 09:24:59 +0100
Subject: [Qgis-developer] Value Tool with PostGIS Rasters
Message-ID: <510392DB.3040205@faunalia.it>

Hi all.
I'm getting ugly performances using Value Tool plugin on a couple of
PostGIS rasters (postgres nuses 95% of CPU forever). The behaviour is a
bit erratic: with one layer is ok, with both switched on is terrible,
then switching one off it stays terrible, when switching off and on
again it is ok, etc.
Hints on what I could check?
Thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From cavallini at faunalia.it  Sat Jan 26 00:32:40 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 26 Jan 2013 09:32:40 +0100
Subject: [Qgis-developer] Value Tool with PostGIS Rasters
In-Reply-To: <510392DB.3040205@faunalia.it>
References: <510392DB.3040205@faunalia.it>
Message-ID: <510394A8.8050906@faunalia.it>

Il 26/01/2013 09:24, Paolo Cavallini ha scritto:
> Hi all.
> I'm getting ugly performances using Value Tool plugin on a couple of
> PostGIS rasters (postgres nuses 95% of CPU forever). The behaviour is a
> bit erratic: with one layer is ok, with both switched on is terrible,
> then switching one off it stays terrible, when switching off and on
> again it is ok, etc.
> Hints on what I could check?
> Thanks.
>
It is not an issue with the plugin: identify behaves the same.
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From wonder.sk at gmail.com  Sat Jan 26 10:48:41 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sat, 26 Jan 2013 19:48:41 +0100
Subject: [Qgis-developer] new_vector_api merged
Message-ID: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>

Hi everyone

I'm pleased to announce that new_vector_api branch has been merged to
master. From user's point of view there should be ideally no change -
everything should work as before, except for various plugins that will
need update to support new API. With such extent of refactoring of
vector layer code it is possible that some new bugs have been
introduced - I hope there won't be any serious problems. I would like
to ask people to test master branch with various data providers and
report any regressions related to vector handling (e.g. access to
data, editing or joins).

I have also created a tag "Before-merge-new_vector_api" that points to
the last commit on master before the merge - in case someone would
like to stick with pre-merge code for some reason.

What's next?
osm, mssql and sqlanywhere providers are currently disabled - but they
should be adapted to new API and re-enabled soon by their respective
authors. QgsVectorLayer still has old API methods (select(),
nextFeature() and featureAtId()). There are more than a hundred of
these call just in QGIS code base. I have marked them as deprecated
now - we should slowly get rid of them and finally remove them before
2.0.

Of course the most awaited feature is the threaded rendering -
experimental support should be coming in the following months, so
please stay tuned.

One of the next steps will be already mentioned move to newer sip/PyQt
APIs for common classes like QString and QVariant that will simplify
plugins' code and make them more ready for python3 (where the new APIs
will be default). I would also like to look into support of python3,
so that ideally QGIS 2.0 could be built either with python2 or
python3. I expect that QGIS 2.0 will stick to python2 and QGIS 3.0
will use python3.

Looking forward to the feedback from testing!

Regards
Martin

From cavallini at faunalia.it  Sat Jan 26 11:12:27 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 26 Jan 2013 20:12:27 +0100
Subject: [Qgis-developer] New qgis for android installer
In-Reply-To: <51019052.6030007@bernawebdesign.ch>
References: <51019052.6030007@bernawebdesign.ch>
Message-ID: <51042A9B.70005@faunalia.it>

Il 24/01/2013 20:49, Marco Bernasocchi ha scritto:
> Hi all,
> So I'm finally back on working on QGIS for android. Currently thanks to
> the QGIS usergroup Switzerland and norbit.de I'm porting python QGIS to
> android. So stay tuned on that one.
>
>
Hi Marco.
Just installed, I get:
No QGIS data provider plugins found in: /data/app-lib/lib
Moreover, I do not seem to be able to close it.
Anything I should do?
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From jctull at gmail.com  Sat Jan 26 11:45:56 2013
From: jctull at gmail.com (John C. Tull)
Date: Sat, 26 Jan 2013 11:45:56 -0800
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
Message-ID: <E4334C2A-1294-46BA-993C-7DFD8BF1BEBB@gmail.com>

Hi Martin,

Congratulations on getting this work done and the merge into trunk! I was able to build and things do appear as normal from my perspective on my OSX system. I look forward to the additional progress you've laid out.

Cheers,
John

On Jan 26, 2013, at 10:48 AM, Martin Dobias <wonder.sk at gmail.com> wrote:

> Hi everyone
> 
> I'm pleased to announce that new_vector_api branch has been merged to
> master. From user's point of view there should be ideally no change -
> everything should work as before, except for various plugins that will
> need update to support new API. With such extent of refactoring of
> vector layer code it is possible that some new bugs have been
> introduced - I hope there won't be any serious problems. I would like
> to ask people to test master branch with various data providers and
> report any regressions related to vector handling (e.g. access to
> data, editing or joins).
> 
> I have also created a tag "Before-merge-new_vector_api" that points to
> the last commit on master before the merge - in case someone would
> like to stick with pre-merge code for some reason.
> 
> What's next?
> osm, mssql and sqlanywhere providers are currently disabled - but they
> should be adapted to new API and re-enabled soon by their respective
> authors. QgsVectorLayer still has old API methods (select(),
> nextFeature() and featureAtId()). There are more than a hundred of
> these call just in QGIS code base. I have marked them as deprecated
> now - we should slowly get rid of them and finally remove them before
> 2.0.
> 
> Of course the most awaited feature is the threaded rendering -
> experimental support should be coming in the following months, so
> please stay tuned.
> 
> One of the next steps will be already mentioned move to newer sip/PyQt
> APIs for common classes like QString and QVariant that will simplify
> plugins' code and make them more ready for python3 (where the new APIs
> will be default). I would also like to look into support of python3,
> so that ideally QGIS 2.0 could be built either with python2 or
> python3. I expect that QGIS 2.0 will stick to python2 and QGIS 3.0
> will use python3.
> 
> Looking forward to the feedback from testing!
> 
> Regards
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From etourigny.dev at gmail.com  Sat Jan 26 14:12:55 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 26 Jan 2013 20:12:55 -0200
Subject: [Qgis-developer] New qgis for android installer
In-Reply-To: <51042A9B.70005@faunalia.it>
References: <51019052.6030007@bernawebdesign.ch> <51042A9B.70005@faunalia.it>
Message-ID: <CA+TxYvMWQxLcV7Kx-k+=tw0pQPkYei6TLvDEuXsoP5phJV-nXQ@mail.gmail.com>

On Sat, Jan 26, 2013 at 5:12 PM, Paolo Cavallini <cavallini at faunalia.it> wrote:
> Il 24/01/2013 20:49, Marco Bernasocchi ha scritto:
>> Hi all,
>> So I'm finally back on working on QGIS for android. Currently thanks to
>> the QGIS usergroup Switzerland and norbit.de I'm porting python QGIS to
>> android. So stay tuned on that one.
>>
>>
> Hi Marco.
> Just installed, I get:
> No QGIS data provider plugins found in: /data/app-lib/lib

I got the same issue on a previous build - although I did not test
opening data though.

> Moreover, I do not seem to be able to close it.
> Anything I should do?
> All the best.
>
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Sat Jan 26 14:29:42 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 26 Jan 2013 23:29:42 +0100
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
Message-ID: <510458D6.8050906@faunalia.it>

Il 26/01/2013 19:48, Martin Dobias ha scritto:
>
> Looking forward to the feedback from testing!
>
>
Hi Martin,
I'm getting the (usual?)

 4/57 Test  #4: qgis_diagramtest .....................***Failed   13.58 sec

but for the rest it compiles fine.
Obviously packaging fails with:

cp: impossibile eseguire stat di
"debian/tmp/usr/lib/qgis/plugins/libmssqlprovider.so": File o directory
non esistente
dh_install: cp -a debian/tmp/usr/lib/qgis/plugins/libmssqlprovider.so
debian/qgis-providers//usr/lib/qgis/plugins/ returned exit code 1
make: *** [binary-arch] Errore 2
dpkg-buildpackage: error: fakeroot debian/rules binary gave error exit
status 2

All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From wonder.sk at gmail.com  Sat Jan 26 15:30:28 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 27 Jan 2013 00:30:28 +0100
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <510458D6.8050906@faunalia.it>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
	<510458D6.8050906@faunalia.it>
Message-ID: <CAC2XbFfyL9rV0UAnNSoQO+X2p6=WvTgov8E7GNe2R+ditSM7gA@mail.gmail.com>

On Sat, Jan 26, 2013 at 11:29 PM, Paolo Cavallini <cavallini at faunalia.it> wrote:
> Il 26/01/2013 19:48, Martin Dobias ha scritto:
>>
>> Looking forward to the feedback from testing!
>>
>>
> Hi Martin,
> I'm getting the (usual?)
>
>  4/57 Test  #4: qgis_diagramtest .....................***Failed   13.58 sec
>
> but for the rest it compiles fine.

>From a quick look it actually seems to me that it should be vice versa
- for some reason the rotation and scale attribute of layer's default
QML have been ignored before, but now they are correctly used, so the
expected image is maybe wrong. I need to have a more detailed look.

> Obviously packaging fails with:
>
> cp: impossibile eseguire stat di
> "debian/tmp/usr/lib/qgis/plugins/libmssqlprovider.so": File o directory
> non esistente
> dh_install: cp -a debian/tmp/usr/lib/qgis/plugins/libmssqlprovider.so
> debian/qgis-providers//usr/lib/qgis/plugins/ returned exit code 1
> make: *** [binary-arch] Errore 2
> dpkg-buildpackage: error: fakeroot debian/rules binary gave error exit
> status 2

I would suggest temporarily removing the disabled providers from
debian build until they are fixed and enabled again.

Martin

From lists at borysjurgiel.pl  Sun Jan 27 06:04:22 2013
From: lists at borysjurgiel.pl (Borys Jurgiel)
Date: Sun, 27 Jan 2013 15:04:22 +0100
Subject: [Qgis-developer] new_vector_api merged
Message-ID: <201301271504.22883.lists@borysjurgiel.pl>

Big thanks for all that job!

Is there any short document for plugin authors, describing which methods 
should be replaced? The [1] doesn't contain any word about select(),
nextFeature() nor featureAtId() yet. I remember you post some information last 
weeks.

[1] http://hub.qgis.org/wiki/quantum-gis/API_changes_for_version_20


Dnia sobota, 26 stycznia 2013 o 19:48:41 Martin Dobias napisa?(a):
> Hi everyone
> 
> I'm pleased to announce that new_vector_api branch has been merged to
> master. From user's point of view there should be ideally no change -
> everything should work as before, except for various plugins that will
> need update to support new API. With such extent of refactoring of
> vector layer code it is possible that some new bugs have been
> introduced - I hope there won't be any serious problems. I would like
> to ask people to test master branch with various data providers and
> report any regressions related to vector handling (e.g. access to
> data, editing or joins).
> 
> I have also created a tag "Before-merge-new_vector_api" that points to
> the last commit on master before the merge - in case someone would
> like to stick with pre-merge code for some reason.
> 
> What's next?
> osm, mssql and sqlanywhere providers are currently disabled - but they
> should be adapted to new API and re-enabled soon by their respective
> authors. QgsVectorLayer still has old API methods (select(),
> nextFeature() and featureAtId()). There are more than a hundred of
> these call just in QGIS code base. I have marked them as deprecated
> now - we should slowly get rid of them and finally remove them before
> 2.0.
> 
> Of course the most awaited feature is the threaded rendering -
> experimental support should be coming in the following months, so
> please stay tuned.
> 
> One of the next steps will be already mentioned move to newer sip/PyQt
> APIs for common classes like QString and QVariant that will simplify
> plugins' code and make them more ready for python3 (where the new APIs
> will be default). I would also like to look into support of python3,
> so that ideally QGIS 2.0 could be built either with python2 or
> python3. I expect that QGIS 2.0 will stick to python2 and QGIS 3.0
> will use python3.
> 
> Looking forward to the feedback from testing!
> 
> Regards
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From matthias.kuhn at gmx.ch  Sun Jan 27 06:39:37 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Sun, 27 Jan 2013 15:39:37 +0100
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
Message-ID: <51053C29.6040406@gmx.ch>

Hi Martin,

Nice too see this changes merged.

A minor question, regarding the discussion about the cache we had 
already. Would it be ok for you to rename QgsVectorLayerCache to e.g. 
QgsGeometryCache? I think this would more precisely reflect the purpose 
of your implementation and keep the rather bold name QgsVectorLayerCache 
free for a more generic approach.

Regards,
Matthias

On 01/26/2013 07:48 PM, Martin Dobias wrote:
> Hi everyone
>
> I'm pleased to announce that new_vector_api branch has been merged to
> master. From user's point of view there should be ideally no change -
> everything should work as before, except for various plugins that will
> need update to support new API. With such extent of refactoring of
> vector layer code it is possible that some new bugs have been
> introduced - I hope there won't be any serious problems. I would like
> to ask people to test master branch with various data providers and
> report any regressions related to vector handling (e.g. access to
> data, editing or joins).
>
> I have also created a tag "Before-merge-new_vector_api" that points to
> the last commit on master before the merge - in case someone would
> like to stick with pre-merge code for some reason.
>
> What's next?
> osm, mssql and sqlanywhere providers are currently disabled - but they
> should be adapted to new API and re-enabled soon by their respective
> authors. QgsVectorLayer still has old API methods (select(),
> nextFeature() and featureAtId()). There are more than a hundred of
> these call just in QGIS code base. I have marked them as deprecated
> now - we should slowly get rid of them and finally remove them before
> 2.0.
>
> Of course the most awaited feature is the threaded rendering -
> experimental support should be coming in the following months, so
> please stay tuned.
>
> One of the next steps will be already mentioned move to newer sip/PyQt
> APIs for common classes like QString and QVariant that will simplify
> plugins' code and make them more ready for python3 (where the new APIs
> will be default). I would also like to look into support of python3,
> so that ideally QGIS 2.0 could be built either with python2 or
> python3. I expect that QGIS 2.0 will stick to python2 and QGIS 3.0
> will use python3.
>
> Looking forward to the feedback from testing!
>
> Regards
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From matthias.kuhn at gmx.ch  Sun Jan 27 07:08:55 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Sun, 27 Jan 2013 16:08:55 +0100
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <CAC2XbFfyL9rV0UAnNSoQO+X2p6=WvTgov8E7GNe2R+ditSM7gA@mail.gmail.com>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
	<510458D6.8050906@faunalia.it>
	<CAC2XbFfyL9rV0UAnNSoQO+X2p6=WvTgov8E7GNe2R+ditSM7gA@mail.gmail.com>
Message-ID: <51054307.4050501@gmx.ch>

Martin,

On 01/27/2013 12:30 AM, Martin Dobias wrote:
> On Sat, Jan 26, 2013 at 11:29 PM, Paolo Cavallini <cavallini at faunalia.it> wrote:
>> Il 26/01/2013 19:48, Martin Dobias ha scritto:
>>> Looking forward to the feedback from testing!
>>>
>>>
>> Hi Martin,
>> I'm getting the (usual?)
>>
>>   4/57 Test  #4: qgis_diagramtest .....................***Failed   13.58 sec
>>
>> but for the rest it compiles fine.
>  From a quick look it actually seems to me that it should be vice versa
> - for some reason the rotation and scale attribute of layer's default
> QML have been ignored before, but now they are correctly used, so the
> expected image is maybe wrong. I need to have a more detailed look.
I added a pull request with an updated expected image to fix this test. [1]

Please accept this, once you figured out if this is not a problem 
introduced by your changes, but actually a (unintentional?) fix.

Cheers

[1] https://github.com/qgis/Quantum-GIS/pull/405

From cavallini at faunalia.it  Sun Jan 27 11:24:26 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun, 27 Jan 2013 20:24:26 +0100
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <51054307.4050501@gmx.ch>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
	<510458D6.8050906@faunalia.it>
	<CAC2XbFfyL9rV0UAnNSoQO+X2p6=WvTgov8E7GNe2R+ditSM7gA@mail.gmail.com>
	<51054307.4050501@gmx.ch>
Message-ID: <51057EEA.8020606@faunalia.it>

Il 27/01/2013 16:08, Matthias Kuhn ha scritto:
> I added a pull request with an updated expected image to fix this
> test. [1]
>
> Please accept this, once you figured out if this is not a problem
> introduced by your changes, but actually a (unintentional?) fix.

tests run fine now (6 warnings), pull accepted.
thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From ccrook at linz.govt.nz  Sun Jan 27 11:36:01 2013
From: ccrook at linz.govt.nz (Chris Crook)
Date: Mon, 28 Jan 2013 08:36:01 +1300
Subject: [Qgis-developer] QFontMetrics problem in composer
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDF770176@prdlsmmsg01.ad.linz.govt.nz>

Hi All

I'm working on a plugin which adds a custom plugin layer to the map.  This all works fine on the desktop, but goes horribly wrong in print composer and in printed outout.

What it comes down to is that I'm using QFontMetricsF to calculate the size of some text, which I'm then using for layout. On the screen this is fine.  In the printed output the rectangle returned by QFontMetricsF is about 1/3 the size of the printed text, which makes the layout pretty awful!  The test code I have is as follows:

            painter.save()
            painter.setPen(QPen())
            painter.setBrush(Qt.NoBrush)
            painter.translate(position.x(),position.y())
            painter.scale(fontFactor,fontFactor)
            painter.setFont(font)
            painter.drawText(QPointF(0.0,0.0),text)
            painter.drawRect(QFontMetricsF(font).boundingRect(text))
            painter.restore()

The result (after printing to PDF) is that the box printed by drawRect is about 1/3 the size of the text printed by drawText.  This seems to be independent of the size and location of the map in print composer or the font used.  Also printing to PDF or PNG gives the same result.

At first sight this looks to me like a bug in Qt, but that seems unlikely?  Any thoughts please?

I'm running this on Ubuntu 11.10.  Qgis version information as follows:

QGIS version
1.8.0-Lisboa
QGIS code revision
exported
Compiled against Qt
4.7.4
Running against Qt
4.7.4
Compiled against GDAL/OGR
1.9.2
Running against GDAL/OGR
1.9.2
GEOS Version
3.3.3
PostgreSQL Client Version
9.1.6
SpatiaLite Version
2.4.0
QWT Version
5.2.2


Chris Crook

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From ccrook at linz.govt.nz  Sun Jan 27 11:41:50 2013
From: ccrook at linz.govt.nz (Chris Crook)
Date: Mon, 28 Jan 2013 08:41:50 +1300
Subject: [Qgis-developer] Plugin layer and labelling
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDF77018D@prdlsmmsg01.ad.linz.govt.nz>

Hi All

I'm updating a plugin to use a plugin layer to display a scale box, and I have a problem with labelling from other layers appearing on top of my plugin layer.


I'm using a plugin layer so that the scale box will appear on the map when it is printed.  It basically draws a filled rectangle and puts some text in it.  The problem I have is that labelling from layers underneath the scale box layer end up plotting on top of it.

Is there a simple way of ensuring that the box appears on top of the labelling.  I'm wondering about drawing the rectangle as a label itself with some sort of custom labelling, but that looks like a lot more work :-(

Is there a simpler way?

Thanks
Chris Crook

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From jgwright at ieee.org  Sun Jan 27 12:09:17 2013
From: jgwright at ieee.org (Jarrad Wright)
Date: Sun, 27 Jan 2013 22:09:17 +0200
Subject: [Qgis-developer] Unsubscribe
Message-ID: <CABrXpnBxM28-DiysxpU84DsAh3dvYPqwK6-FHFtQHc3WvcOyQA@mail.gmail.com>

On Jan 27, 2013 9:51 PM, <qgis-developer-request at lists.osgeo.org> wrote:

> Send Qgis-developer mailing list submissions to
>         qgis-developer at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         http://lists.osgeo.org/mailman/listinfo/qgis-developer
> or, via email, send a message with subject or body 'help' to
>         qgis-developer-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         qgis-developer-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of Qgis-developer digest..."
>
>
> Today's Topics:
>
>    1. Re: New qgis for android installer (Etienne Tourigny)
>    2. Re: new_vector_api merged (Paolo Cavallini)
>    3. Re: new_vector_api merged (Martin Dobias)
>    4. Re: new_vector_api merged (Borys Jurgiel)
>    5. Re: new_vector_api merged (Matthias Kuhn)
>    6. Re: new_vector_api merged (Matthias Kuhn)
>    7. Re: new_vector_api merged (Paolo Cavallini)
>    8. QFontMetrics problem in composer (Chris Crook)
>    9. Plugin layer and labelling (Chris Crook)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sat, 26 Jan 2013 20:12:55 -0200
> From: Etienne Tourigny <etourigny.dev at gmail.com>
> To: Paolo Cavallini <cavallini at faunalia.it>
> Cc: qgis-developer at lists.osgeo.org
> Subject: Re: [Qgis-developer] New qgis for android installer
> Message-ID:
>         <CA+TxYvMWQxLcV7Kx-k+=
> tw0pQPkYei6TLvDEuXsoP5phJV-nXQ at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> On Sat, Jan 26, 2013 at 5:12 PM, Paolo Cavallini <cavallini at faunalia.it>
> wrote:
> > Il 24/01/2013 20:49, Marco Bernasocchi ha scritto:
> >> Hi all,
> >> So I'm finally back on working on QGIS for android. Currently thanks to
> >> the QGIS usergroup Switzerland and norbit.de I'm porting python QGIS to
> >> android. So stay tuned on that one.
> >>
> >>
> > Hi Marco.
> > Just installed, I get:
> > No QGIS data provider plugins found in: /data/app-lib/lib
>
> I got the same issue on a previous build - although I did not test
> opening data though.
>
> > Moreover, I do not seem to be able to close it.
> > Anything I should do?
> > All the best.
> >
> > --
> > Paolo Cavallini - Faunalia
> > www.faunalia.eu
> > Full contact details at www.faunalia.eu/pc
> > Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
> >
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> ------------------------------
>
> Message: 2
> Date: Sat, 26 Jan 2013 23:29:42 +0100
> From: Paolo Cavallini <cavallini at faunalia.it>
> To: qgis-developer at lists.osgeo.org
> Subject: Re: [Qgis-developer] new_vector_api merged
> Message-ID: <510458D6.8050906 at faunalia.it>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Il 26/01/2013 19:48, Martin Dobias ha scritto:
> >
> > Looking forward to the feedback from testing!
> >
> >
> Hi Martin,
> I'm getting the (usual?)
>
>  4/57 Test  #4: qgis_diagramtest .....................***Failed   13.58 sec
>
> but for the rest it compiles fine.
> Obviously packaging fails with:
>
> cp: impossibile eseguire stat di
> "debian/tmp/usr/lib/qgis/plugins/libmssqlprovider.so": File o directory
> non esistente
> dh_install: cp -a debian/tmp/usr/lib/qgis/plugins/libmssqlprovider.so
> debian/qgis-providers//usr/lib/qgis/plugins/ returned exit code 1
> make: *** [binary-arch] Errore 2
> dpkg-buildpackage: error: fakeroot debian/rules binary gave error exit
> status 2
>
> All the best.
>
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>
>
>
> ------------------------------
>
> Message: 3
> Date: Sun, 27 Jan 2013 00:30:28 +0100
> From: Martin Dobias <wonder.sk at gmail.com>
> To: Paolo Cavallini <cavallini at faunalia.it>
> Cc: qgis-dev <qgis-developer at lists.osgeo.org>
> Subject: Re: [Qgis-developer] new_vector_api merged
> Message-ID:
>         <CAC2XbFfyL9rV0UAnNSoQO+X2p6=
> WvTgov8E7GNe2R+ditSM7gA at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> On Sat, Jan 26, 2013 at 11:29 PM, Paolo Cavallini <cavallini at faunalia.it>
> wrote:
> > Il 26/01/2013 19:48, Martin Dobias ha scritto:
> >>
> >> Looking forward to the feedback from testing!
> >>
> >>
> > Hi Martin,
> > I'm getting the (usual?)
> >
> >  4/57 Test  #4: qgis_diagramtest .....................***Failed   13.58
> sec
> >
> > but for the rest it compiles fine.
>
> >From a quick look it actually seems to me that it should be vice versa
> - for some reason the rotation and scale attribute of layer's default
> QML have been ignored before, but now they are correctly used, so the
> expected image is maybe wrong. I need to have a more detailed look.
>
> > Obviously packaging fails with:
> >
> > cp: impossibile eseguire stat di
> > "debian/tmp/usr/lib/qgis/plugins/libmssqlprovider.so": File o directory
> > non esistente
> > dh_install: cp -a debian/tmp/usr/lib/qgis/plugins/libmssqlprovider.so
> > debian/qgis-providers//usr/lib/qgis/plugins/ returned exit code 1
> > make: *** [binary-arch] Errore 2
> > dpkg-buildpackage: error: fakeroot debian/rules binary gave error exit
> > status 2
>
> I would suggest temporarily removing the disabled providers from
> debian build until they are fixed and enabled again.
>
> Martin
>
>
> ------------------------------
>
> Message: 4
> Date: Sun, 27 Jan 2013 15:04:22 +0100
> From: Borys Jurgiel <lists at borysjurgiel.pl>
> To: qgis-developer at lists.osgeo.org
> Subject: Re: [Qgis-developer] new_vector_api merged
> Message-ID: <201301271504.22883.lists at borysjurgiel.pl>
> Content-Type: Text/Plain;  charset="utf-8"
>
> Big thanks for all that job!
>
> Is there any short document for plugin authors, describing which methods
> should be replaced? The [1] doesn't contain any word about select(),
> nextFeature() nor featureAtId() yet. I remember you post some information
> last
> weeks.
>
> [1] http://hub.qgis.org/wiki/quantum-gis/API_changes_for_version_20
>
>
> Dnia sobota, 26 stycznia 2013 o 19:48:41 Martin Dobias napisa?(a):
> > Hi everyone
> >
> > I'm pleased to announce that new_vector_api branch has been merged to
> > master. From user's point of view there should be ideally no change -
> > everything should work as before, except for various plugins that will
> > need update to support new API. With such extent of refactoring of
> > vector layer code it is possible that some new bugs have been
> > introduced - I hope there won't be any serious problems. I would like
> > to ask people to test master branch with various data providers and
> > report any regressions related to vector handling (e.g. access to
> > data, editing or joins).
> >
> > I have also created a tag "Before-merge-new_vector_api" that points to
> > the last commit on master before the merge - in case someone would
> > like to stick with pre-merge code for some reason.
> >
> > What's next?
> > osm, mssql and sqlanywhere providers are currently disabled - but they
> > should be adapted to new API and re-enabled soon by their respective
> > authors. QgsVectorLayer still has old API methods (select(),
> > nextFeature() and featureAtId()). There are more than a hundred of
> > these call just in QGIS code base. I have marked them as deprecated
> > now - we should slowly get rid of them and finally remove them before
> > 2.0.
> >
> > Of course the most awaited feature is the threaded rendering -
> > experimental support should be coming in the following months, so
> > please stay tuned.
> >
> > One of the next steps will be already mentioned move to newer sip/PyQt
> > APIs for common classes like QString and QVariant that will simplify
> > plugins' code and make them more ready for python3 (where the new APIs
> > will be default). I would also like to look into support of python3,
> > so that ideally QGIS 2.0 could be built either with python2 or
> > python3. I expect that QGIS 2.0 will stick to python2 and QGIS 3.0
> > will use python3.
> >
> > Looking forward to the feedback from testing!
> >
> > Regards
> > Martin
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> ------------------------------
>
> Message: 5
> Date: Sun, 27 Jan 2013 15:39:37 +0100
> From: Matthias Kuhn <matthias.kuhn at gmx.ch>
> To: qgis-developer at lists.osgeo.org
> Subject: Re: [Qgis-developer] new_vector_api merged
> Message-ID: <51053C29.6040406 at gmx.ch>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Hi Martin,
>
> Nice too see this changes merged.
>
> A minor question, regarding the discussion about the cache we had
> already. Would it be ok for you to rename QgsVectorLayerCache to e.g.
> QgsGeometryCache? I think this would more precisely reflect the purpose
> of your implementation and keep the rather bold name QgsVectorLayerCache
> free for a more generic approach.
>
> Regards,
> Matthias
>
> On 01/26/2013 07:48 PM, Martin Dobias wrote:
> > Hi everyone
> >
> > I'm pleased to announce that new_vector_api branch has been merged to
> > master. From user's point of view there should be ideally no change -
> > everything should work as before, except for various plugins that will
> > need update to support new API. With such extent of refactoring of
> > vector layer code it is possible that some new bugs have been
> > introduced - I hope there won't be any serious problems. I would like
> > to ask people to test master branch with various data providers and
> > report any regressions related to vector handling (e.g. access to
> > data, editing or joins).
> >
> > I have also created a tag "Before-merge-new_vector_api" that points to
> > the last commit on master before the merge - in case someone would
> > like to stick with pre-merge code for some reason.
> >
> > What's next?
> > osm, mssql and sqlanywhere providers are currently disabled - but they
> > should be adapted to new API and re-enabled soon by their respective
> > authors. QgsVectorLayer still has old API methods (select(),
> > nextFeature() and featureAtId()). There are more than a hundred of
> > these call just in QGIS code base. I have marked them as deprecated
> > now - we should slowly get rid of them and finally remove them before
> > 2.0.
> >
> > Of course the most awaited feature is the threaded rendering -
> > experimental support should be coming in the following months, so
> > please stay tuned.
> >
> > One of the next steps will be already mentioned move to newer sip/PyQt
> > APIs for common classes like QString and QVariant that will simplify
> > plugins' code and make them more ready for python3 (where the new APIs
> > will be default). I would also like to look into support of python3,
> > so that ideally QGIS 2.0 could be built either with python2 or
> > python3. I expect that QGIS 2.0 will stick to python2 and QGIS 3.0
> > will use python3.
> >
> > Looking forward to the feedback from testing!
> >
> > Regards
> > Martin
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> ------------------------------
>
> Message: 6
> Date: Sun, 27 Jan 2013 16:08:55 +0100
> From: Matthias Kuhn <matthias.kuhn at gmx.ch>
> To: qgis-developer at lists.osgeo.org
> Subject: Re: [Qgis-developer] new_vector_api merged
> Message-ID: <51054307.4050501 at gmx.ch>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Martin,
>
> On 01/27/2013 12:30 AM, Martin Dobias wrote:
> > On Sat, Jan 26, 2013 at 11:29 PM, Paolo Cavallini <cavallini at faunalia.it>
> wrote:
> >> Il 26/01/2013 19:48, Martin Dobias ha scritto:
> >>> Looking forward to the feedback from testing!
> >>>
> >>>
> >> Hi Martin,
> >> I'm getting the (usual?)
> >>
> >>   4/57 Test  #4: qgis_diagramtest .....................***Failed
> 13.58 sec
> >>
> >> but for the rest it compiles fine.
> >  From a quick look it actually seems to me that it should be vice versa
> > - for some reason the rotation and scale attribute of layer's default
> > QML have been ignored before, but now they are correctly used, so the
> > expected image is maybe wrong. I need to have a more detailed look.
> I added a pull request with an updated expected image to fix this test. [1]
>
> Please accept this, once you figured out if this is not a problem
> introduced by your changes, but actually a (unintentional?) fix.
>
> Cheers
>
> [1] https://github.com/qgis/Quantum-GIS/pull/405
>
>
> ------------------------------
>
> Message: 7
> Date: Sun, 27 Jan 2013 20:24:26 +0100
> From: Paolo Cavallini <cavallini at faunalia.it>
> To: qgis-developer at lists.osgeo.org
> Subject: Re: [Qgis-developer] new_vector_api merged
> Message-ID: <51057EEA.8020606 at faunalia.it>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Il 27/01/2013 16:08, Matthias Kuhn ha scritto:
> > I added a pull request with an updated expected image to fix this
> > test. [1]
> >
> > Please accept this, once you figured out if this is not a problem
> > introduced by your changes, but actually a (unintentional?) fix.
>
> tests run fine now (6 warnings), pull accepted.
> thanks.
>
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>
>
>
> ------------------------------
>
> Message: 8
> Date: Mon, 28 Jan 2013 08:36:01 +1300
> From: Chris Crook <ccrook at linz.govt.nz>
> To: "qgis-developer at lists.osgeo.org" <qgis-developer at lists.osgeo.org>
> Subject: [Qgis-developer] QFontMetrics problem in composer
> Message-ID:
>         <
> 666FB8D75E95AE42965A0E76A5E5337E0EDF770176 at prdlsmmsg01.ad.linz.govt.nz>
>
> Content-Type: text/plain; charset="us-ascii"
>
> Hi All
>
> I'm working on a plugin which adds a custom plugin layer to the map.  This
> all works fine on the desktop, but goes horribly wrong in print composer
> and in printed outout.
>
> What it comes down to is that I'm using QFontMetricsF to calculate the
> size of some text, which I'm then using for layout. On the screen this is
> fine.  In the printed output the rectangle returned by QFontMetricsF is
> about 1/3 the size of the printed text, which makes the layout pretty
> awful!  The test code I have is as follows:
>
>             painter.save()
>             painter.setPen(QPen())
>             painter.setBrush(Qt.NoBrush)
>             painter.translate(position.x(),position.y())
>             painter.scale(fontFactor,fontFactor)
>             painter.setFont(font)
>             painter.drawText(QPointF(0.0,0.0),text)
>             painter.drawRect(QFontMetricsF(font).boundingRect(text))
>             painter.restore()
>
> The result (after printing to PDF) is that the box printed by drawRect is
> about 1/3 the size of the text printed by drawText.  This seems to be
> independent of the size and location of the map in print composer or the
> font used.  Also printing to PDF or PNG gives the same result.
>
> At first sight this looks to me like a bug in Qt, but that seems unlikely?
>  Any thoughts please?
>
> I'm running this on Ubuntu 11.10.  Qgis version information as follows:
>
> QGIS version
> 1.8.0-Lisboa
> QGIS code revision
> exported
> Compiled against Qt
> 4.7.4
> Running against Qt
> 4.7.4
> Compiled against GDAL/OGR
> 1.9.2
> Running against GDAL/OGR
> 1.9.2
> GEOS Version
> 3.3.3
> PostgreSQL Client Version
> 9.1.6
> SpatiaLite Version
> 2.4.0
> QWT Version
> 5.2.2
>
>
> Chris Crook
>
> This message contains information, which is confidential and may be
> subject to legal privilege. If you are not the intended recipient, you must
> not peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
>
>
> ------------------------------
>
> Message: 9
> Date: Mon, 28 Jan 2013 08:41:50 +1300
> From: Chris Crook <ccrook at linz.govt.nz>
> To: "qgis-developer at lists.osgeo.org" <qgis-developer at lists.osgeo.org>
> Subject: [Qgis-developer] Plugin layer and labelling
> Message-ID:
>         <
> 666FB8D75E95AE42965A0E76A5E5337E0EDF77018D at prdlsmmsg01.ad.linz.govt.nz>
>
> Content-Type: text/plain; charset="us-ascii"
>
> Hi All
>
> I'm updating a plugin to use a plugin layer to display a scale box, and I
> have a problem with labelling from other layers appearing on top of my
> plugin layer.
>
>
> I'm using a plugin layer so that the scale box will appear on the map when
> it is printed.  It basically draws a filled rectangle and puts some text in
> it.  The problem I have is that labelling from layers underneath the scale
> box layer end up plotting on top of it.
>
> Is there a simple way of ensuring that the box appears on top of the
> labelling.  I'm wondering about drawing the rectangle as a label itself
> with some sort of custom labelling, but that looks like a lot more work :-(
>
> Is there a simpler way?
>
> Thanks
> Chris Crook
>
> This message contains information, which is confidential and may be
> subject to legal privilege. If you are not the intended recipient, you must
> not peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
>
>
> ------------------------------
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> End of Qgis-developer Digest, Vol 87, Issue 59
> **********************************************
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130127/da180302/attachment-0001.html>

From wonder.sk at gmail.com  Sun Jan 27 13:20:48 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun, 27 Jan 2013 22:20:48 +0100
Subject: [Qgis-developer] Plugin layer and labelling
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0EDF77018D@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDF77018D@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <CAC2XbFfOrtZQTg+q0O0R5bXqmNvHDUT3ewYOk6_k7AVWkr67cA@mail.gmail.com>

Hi Chris

On Sun, Jan 27, 2013 at 8:41 PM, Chris Crook <ccrook at linz.govt.nz> wrote:
> I'm updating a plugin to use a plugin layer to display a scale box, and I have a problem with labelling from other layers appearing on top of my plugin layer.
>
>
> I'm using a plugin layer so that the scale box will appear on the map when it is printed.  It basically draws a filled rectangle and puts some text in it.  The problem I have is that labelling from layers underneath the scale box layer end up plotting on top of it.
>
> Is there a simple way of ensuring that the box appears on top of the labelling.  I'm wondering about drawing the rectangle as a label itself with some sort of custom labelling, but that looks like a lot more work :-(

I think you have these options:
- hook to QgsMapCanvas::renderComplete(QPainter*) signal and draw the
scale box in your slot
- implement a QgsMapCanvasItem that would render scale bar

By the way, there is already scale bar functionality (used to be a
plugin, now in menu View > Decorations > Scale Bar). The logic is in
QgsDecorationScaleBar class (in src/app/ dir).

Regards
Martin

From ccrook at linz.govt.nz  Sun Jan 27 13:53:01 2013
From: ccrook at linz.govt.nz (Chris Crook)
Date: Mon, 28 Jan 2013 10:53:01 +1300
Subject: [Qgis-developer] Plugin layer and labelling
In-Reply-To: <CAC2XbFfOrtZQTg+q0O0R5bXqmNvHDUT3ewYOk6_k7AVWkr67cA@mail.gmail.com>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDF77018D@prdlsmmsg01.ad.linz.govt.nz>
	<CAC2XbFfOrtZQTg+q0O0R5bXqmNvHDUT3ewYOk6_k7AVWkr67cA@mail.gmail.com>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDF770458@prdlsmmsg01.ad.linz.govt.nz>

Thanks for comments Martin

The scale box is not the map scale, it relates to the scale of arrow symbols. I did originally have it implemented on the renderComplete signal, which worked fine, but of course doesn't display in the printed maps.

I thought that making it a plugin layer would be an effective way of having it render regardless of whether it was on the screen or in a printed map.  However that has lead to the problem with the labelling, as per the original question.

Certainly going back to the original implementation, and looking at the QgsMapCanvasItem API is a good alternative, if more complex.

More generally though having labels plotting after the layers can be a bit weird.  For example if I have a point layer underneath a polygon layer I end up seeing a polygon with a whole lot of labels on top of it (which come from the point layer hidden beneath it).  That doesn't seem right?


Chris Crook
Technical Leader (Spatial Information Management)
Customer Services Business Development

E  ccrook at linz.govt.nz | DDI 04 4600567

Wellington Office, Level 7, Radio New Zealand House, 155 The Terrace
PO Box 5501, Wellington 6145, New Zealand | T 04 460 0110
W  www.linz.govt.nz | www.landonline.govt.nz  | data.linz.govt.nz



-----Original Message-----
From: Martin Dobias [mailto:wonder.sk at gmail.com]
Sent: Monday, 28 January 2013 10:21 a.m.
To: Chris Crook
Cc: qgis-developer at lists.osgeo.org
Subject: Re: [Qgis-developer] Plugin layer and labelling

Hi Chris

On Sun, Jan 27, 2013 at 8:41 PM, Chris Crook <ccrook at linz.govt.nz> wrote:
> I'm updating a plugin to use a plugin layer to display a scale box, and I have a problem with labelling from other layers appearing on top of my plugin layer.
>
>
> I'm using a plugin layer so that the scale box will appear on the map when it is printed.  It basically draws a filled rectangle and puts some text in it.  The problem I have is that labelling from layers underneath the scale box layer end up plotting on top of it.
>
> Is there a simple way of ensuring that the box appears on top of the
> labelling.  I'm wondering about drawing the rectangle as a label
> itself with some sort of custom labelling, but that looks like a lot
> more work :-(

I think you have these options:
- hook to QgsMapCanvas::renderComplete(QPainter*) signal and draw the scale box in your slot
- implement a QgsMapCanvasItem that would render scale bar

By the way, there is already scale bar functionality (used to be a plugin, now in menu View > Decorations > Scale Bar). The logic is in QgsDecorationScaleBar class (in src/app/ dir).

Regards
Martin

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From wonder.sk at gmail.com  Sun Jan 27 16:16:19 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 28 Jan 2013 01:16:19 +0100
Subject: [Qgis-developer] Plugin layer and labelling
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0EDF770458@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDF77018D@prdlsmmsg01.ad.linz.govt.nz>
	<CAC2XbFfOrtZQTg+q0O0R5bXqmNvHDUT3ewYOk6_k7AVWkr67cA@mail.gmail.com>
	<666FB8D75E95AE42965A0E76A5E5337E0EDF770458@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <CAC2XbFfjQ1eJ+TXuMuczjx-qoCw8GrAxxj+oQnvdKV0OuRosTQ@mail.gmail.com>

On Sun, Jan 27, 2013 at 10:53 PM, Chris Crook <ccrook at linz.govt.nz> wrote:
> More generally though having labels plotting after the layers can be a bit weird.  For example if I have a point layer underneath a polygon layer I end up seeing a polygon with a whole lot of labels on top of it (which come from the point layer hidden beneath it).  That doesn't seem right?

In such situation the result may not look good. But in general I think
we have no other choice: first one has to be aware of all features
(from all layers) that should be labeled. Once all layers have been
rendered, the labeling algorithm is able to produce candidate labels
(for each feature), compute their costs and finally resolve the label
placement problem, returning a set of labels that do not overlap.
Also, by default features act as obstacles to labels, so such
candidates covered by other features would get higher cost (and may
not be considered at all).

Martin

From wonder.sk at gmail.com  Mon Jan 28 00:10:55 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 28 Jan 2013 09:10:55 +0100
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <201301271431.46921.info@borysjurgiel.pl>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
	<201301271431.46921.info@borysjurgiel.pl>
Message-ID: <CAC2XbFdvNVf2puxn2V_PO8=eZL6usbbMH2Vwx85q+aqwCn8QHA@mail.gmail.com>

Hi Borys

On Sun, Jan 27, 2013 at 2:31 PM, Borys Jurgiel <info at borysjurgiel.pl> wrote:
> Big thanks for all that job!
>
> Is there any short document for plugin authors, describing which methods
> should be replaced? The [1] doesn't contain any word about select(),
> nextFeature() nor featureAtId() yet. I remember you post some information last
> weeks.
>
> [1] http://hub.qgis.org/wiki/quantum-gis/API_changes_for_version_20

No, I haven't updated the API wiki page yet.

Right now select(), nextFeature() and featureAtId() are still present
because there are lots of calls to these methods in QGIS code. I have
set them as deprecated, so they issue warning during compilation. I
will remove them once we have migrated to new API completely.

Martin

From wonder.sk at gmail.com  Mon Jan 28 00:13:51 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 28 Jan 2013 09:13:51 +0100
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <51053C29.6040406@gmx.ch>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
	<51053C29.6040406@gmx.ch>
Message-ID: <CAC2XbFco_4k2dubFJA-eREYbGn2MyVyC+H6tiMLo13EpD_GaBw@mail.gmail.com>

Matthias

On Sun, Jan 27, 2013 at 3:39 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
> Hi Martin,
>
> Nice too see this changes merged.
>
> A minor question, regarding the discussion about the cache we had already.
> Would it be ok for you to rename QgsVectorLayerCache to e.g.
> QgsGeometryCache? I think this would more precisely reflect the purpose of
> your implementation and keep the rather bold name QgsVectorLayerCache free
> for a more generic approach.

Yeah it makes sense to rename it as you suggest - and keep that class
as internal, so that we can remove it later once we have a working
generic QgsVectorLayerCache implementation.

Martin

From a.neumann at carto.net  Mon Jan 28 01:30:28 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 28 Jan 2013 10:30:28 +0100
Subject: [Qgis-developer] =?utf-8?q?Labeling=3A_data-defined_fields_shifte?=
 =?utf-8?q?d_after_new_vector_API=3F?=
Message-ID: <19f0120ac55dc536892741128fc5333e@carto.net>

 Hi,

 In some of my projects data-defined values for labeling (like 
 font-color, rotation fields) are now failing - the order of the column 
 assignments are shifted by one column. Perhaps the new Vector API is the 
 cause? My data comes from the Postgis data provider. I am testing in the 
 version 74ace4ad21 from January 27.

 I checked with an older version from last week (the version starting 
 with 298f0c000e from January 25) and the labeling is still working ok.

 Martin or Marco - could either one of you please have a look what may 
 be causing this problem?

 Thanks,
 Andreas


-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From matthias.kuhn at gmx.ch  Mon Jan 28 01:35:51 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Mon, 28 Jan 2013 10:35:51 +0100
Subject: [Qgis-developer] Labeling: data-defined fields shifted after
 new vector API?
In-Reply-To: <19f0120ac55dc536892741128fc5333e@carto.net>
References: <19f0120ac55dc536892741128fc5333e@carto.net>
Message-ID: <51064677.7040502@gmx.ch>

Note:
This could be related to the following fix for a failed test:
https://github.com/qgis/Quantum-GIS/pull/405

I issued a pull request, because the test didn't fail due to a problem 
in diagram itself.

It might be good to implement a test for this specific issue as well. 
Would be easy to implement based on the diagram test.

Regards Matthias

On 01/28/2013 10:30 AM, Andreas Neumann wrote:
> Hi,
>
> In some of my projects data-defined values for labeling (like 
> font-color, rotation fields) are now failing - the order of the column 
> assignments are shifted by one column. Perhaps the new Vector API is 
> the cause? My data comes from the Postgis data provider. I am testing 
> in the version 74ace4ad21 from January 27.
>
> I checked with an older version from last week (the version starting 
> with 298f0c000e from January 25) and the labeling is still working ok.
>
> Martin or Marco - could either one of you please have a look what may 
> be causing this problem?
>
> Thanks,
> Andreas
>
>


From wonder.sk at gmail.com  Mon Jan 28 02:00:09 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 28 Jan 2013 11:00:09 +0100
Subject: [Qgis-developer] Labeling: data-defined fields shifted after
 new vector API?
In-Reply-To: <19f0120ac55dc536892741128fc5333e@carto.net>
References: <19f0120ac55dc536892741128fc5333e@carto.net>
Message-ID: <CAC2XbFeMpfguXKkbYXg5=2b88Y90hkgutZ224Z=BoaXPyy-HXg@mail.gmail.com>

Hi Andreas

On Mon, Jan 28, 2013 at 10:30 AM, Andreas Neumann <a.neumann at carto.net> wrote:
> Hi,
>
> In some of my projects data-defined values for labeling (like font-color,
> rotation fields) are now failing - the order of the column assignments are
> shifted by one column. Perhaps the new Vector API is the cause? My data
> comes from the Postgis data provider. I am testing in the version 74ace4ad21
> from January 27.
>
> I checked with an older version from last week (the version starting with
> 298f0c000e from January 25) and the labeling is still working ok.
>
> Martin or Marco - could either one of you please have a look what may be
> causing this problem?

I have briefly looked into the code and it seems that new labeling
stores data-defined attributes by index instead of name. If so, that's
the source of the problem and it should be changed to read/write names
so that if the order of fields change, the projects work correctly.
Old labeling should not have this problem as it always saves field
names.

The source of the problem is that before, it was possible to have
"holes" in attribute field indices: e.g. three attributes with indices
0,2,3. Whether such holes appeared depended on the provider being
used. The support for holes has been removed for performance and
simplicity - many developers were not even aware of this thing.

As a quick fix I think you'll need to update your project file. The
proper fix should change writing of attributes as names in
data-defined properties (for new labeling).

Regards
Martin

From jef at norbit.de  Mon Jan 28 01:59:33 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Mon, 28 Jan 2013 10:59:33 +0100
Subject: [Qgis-developer] Labeling: data-defined fields shifted
	after	new vector API?
In-Reply-To: <19f0120ac55dc536892741128fc5333e@carto.net>
References: <19f0120ac55dc536892741128fc5333e@carto.net>
Message-ID: <20130128095933.GA31197@norbit.de>

Hi Andreas,

On Mon, 28. Jan 2013 at 10:30:28 +0100, Andreas Neumann wrote:
> In some of my projects data-defined values for labeling (like  
> font-color, rotation fields) are now failing - the order of the column  
> assignments are shifted by one column. Perhaps the new Vector API is the  
> cause? My data comes from the Postgis data provider. I am testing in the  
> version 74ace4ad21 from January 27.

The attributes are now in an array and were in a map with attribute index as
key before.

Probabably the opposite problem to what we used to have, when stuff was
assuming the way it is now and had a problem with holes in the map, e.g.
created by skipped geometry attributes in postgres tables, which happens when
the geometry is not the last column of a table.

Now those holes are missing and the attribute indexes of the attributes after
the geometry column is wrong.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From a.neumann at carto.net  Mon Jan 28 02:12:39 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 28 Jan 2013 11:12:39 +0100
Subject: [Qgis-developer]
 =?utf-8?q?Labeling=3A_data-defined_fields_shifte?=
 =?utf-8?q?d_after_new_vector_API=3F?=
In-Reply-To: <CAC2XbFeMpfguXKkbYXg5=2b88Y90hkgutZ224Z=BoaXPyy-HXg@mail.gmail.com>
References: <19f0120ac55dc536892741128fc5333e@carto.net>
	<CAC2XbFeMpfguXKkbYXg5=2b88Y90hkgutZ224Z=BoaXPyy-HXg@mail.gmail.com>
Message-ID: <b7643fa1ccbb5081cf94f052a1509372@carto.net>

 Hi all,

 Thank you Martin and J?rgen for your explanation. Sounds logical to me.

 As a longer time QGIS user I remember that I had the problem of shifted 
 columns in the field widgets (this was fixed by J?rgen quite some time 
 ago) and that I had troubles with the shifted columns in data-defined 
 labeling and data-defined symbology in the past, partially also because 
 my table design changed after the QGIS project was created. I would 
 assume that I am not the only one who changes table design during the 
 life cycle of a project.

 So a big +1 to change to a name-based index instead of a numerical 
 based index for data-defined columns.

 Andreas

 On Mon, 28 Jan 2013 11:00:09 +0100, Martin Dobias wrote:
> Hi Andreas
>
> On Mon, Jan 28, 2013 at 10:30 AM, Andreas Neumann
> <a.neumann at carto.net> wrote:
>> Hi,
>>
>> In some of my projects data-defined values for labeling (like 
>> font-color,
>> rotation fields) are now failing - the order of the column 
>> assignments are
>> shifted by one column. Perhaps the new Vector API is the cause? My 
>> data
>> comes from the Postgis data provider. I am testing in the version 
>> 74ace4ad21
>> from January 27.
>>
>> I checked with an older version from last week (the version starting 
>> with
>> 298f0c000e from January 25) and the labeling is still working ok.
>>
>> Martin or Marco - could either one of you please have a look what 
>> may be
>> causing this problem?
>
> I have briefly looked into the code and it seems that new labeling
> stores data-defined attributes by index instead of name. If so, 
> that's
> the source of the problem and it should be changed to read/write 
> names
> so that if the order of fields change, the projects work correctly.
> Old labeling should not have this problem as it always saves field
> names.
>
> The source of the problem is that before, it was possible to have
> "holes" in attribute field indices: e.g. three attributes with 
> indices
> 0,2,3. Whether such holes appeared depended on the provider being
> used. The support for holes has been removed for performance and
> simplicity - many developers were not even aware of this thing.
>
> As a quick fix I think you'll need to update your project file. The
> proper fix should change writing of attributes as names in
> data-defined properties (for new labeling).
>
> Regards
> Martin

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From regis.haubourg at eau-adour-garonne.fr  Mon Jan 28 05:17:51 2013
From: regis.haubourg at eau-adour-garonne.fr (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Mon, 28 Jan 2013 05:17:51 -0800 (PST)
Subject: [Qgis-developer] Labeling: data-defined fields shifted after
	new vector API?
In-Reply-To: <b7643fa1ccbb5081cf94f052a1509372@carto.net>
References: <19f0120ac55dc536892741128fc5333e@carto.net>
	<CAC2XbFeMpfguXKkbYXg5=2b88Y90hkgutZ224Z=BoaXPyy-HXg@mail.gmail.com>
	<b7643fa1ccbb5081cf94f052a1509372@carto.net>
Message-ID: <1359379071328-5030276.post@n6.nabble.com>

martin Dobias wrote
> I have briefly looked into the code and it seems that new labeling 
>> stores data-defined attributes by index instead of name. If so, 
>> that's 
>> the source of the problem and it should be changed to read/write 
>> names 

Hi all, 
+1 for switching storage of data defined fields with names and not indexes.
It was a limit I previously pointed and this is really weak if data field
order change. But we need retrocompatibility with old projects.  Does that
sounds possible?
r?gis



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Labeling-data-defined-fields-shifted-after-new-vector-API-tp5030238p5030276.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From stefano.campus at regione.piemonte.it  Mon Jan 28 07:05:55 2013
From: stefano.campus at regione.piemonte.it (skampus)
Date: Mon, 28 Jan 2013 07:05:55 -0800 (PST)
Subject: [Qgis-developer] qgis 1.8.0-5
Message-ID: <1359385555274-5030299.post@n6.nabble.com>

hi, i see in osgeo4w setup that a new version of qgis 1.8 is available.
please, can you say me where i can find the differences between this version
and previous one?
thank you in advance



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/qgis-1-8-0-5-tp5030299.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From denis.rouzaud at gmail.com  Mon Jan 28 07:44:31 2013
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Mon, 28 Jan 2013 16:44:31 +0100
Subject: [Qgis-developer] MapToolIdentify moving to gui
Message-ID: <51069CDF.6070103@gmail.com>

Hi,

As previously explained, I am moving the MapToolIdentify class to gui 
and creating a new MapToolIdentifyAction in app.

I think the cpp part is done [1] but I have two questions regarding to 
python.

Here is what I did:
- added %Include qgsmaptoolidentify.sip in python/gui/gui.sip
- added the dynamic cast in python/gui/qgsmaptool.sip
- created the file python/gui/qgsmaptoolidentify.sip

you can see these here
https://github.com/3nids/Quantum-GIS/commit/5573e9fe1d78b5296423036a07e130416b032f98


My two questions are:

1. I tested it with a plugin, and my new class QgsMapToolIdentify is not 
defined. Did I missed something?

2. Is the file PyQGIS.api created automatically? If so, I noticed that 
my class methods are not listed in there?

[1] If needed, here is the branch: 
https://github.com/3nids/Quantum-GIS/tree/identifymaptool


thanks a lot,

Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130128/bc6e3300/attachment.html>

From cavallini at faunalia.it  Mon Jan 28 08:11:17 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 28 Jan 2013 17:11:17 +0100
Subject: [Qgis-developer] qgis 1.8.0-5
In-Reply-To: <1359385555274-5030299.post@n6.nabble.com>
References: <1359385555274-5030299.post@n6.nabble.com>
Message-ID: <5106A325.7040107@faunalia.it>

Il 28/01/2013 16:05, skampus ha scritto:
> hi, i see in osgeo4w setup that a new version of qgis 1.8 is available.
> please, can you say me where i can find the differences between this version
> and previous one?
> thank you in advance
>
the spatialite version has been updated, aliging it to the one in osgeo4w

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From stefano.campus at regione.piemonte.it  Mon Jan 28 08:12:10 2013
From: stefano.campus at regione.piemonte.it (skampus)
Date: Mon, 28 Jan 2013 08:12:10 -0800 (PST)
Subject: [Qgis-developer] qgis 1.8.0-5
In-Reply-To: <5106A325.7040107@faunalia.it>
References: <1359385555274-5030299.post@n6.nabble.com>
	<5106A325.7040107@faunalia.it>
Message-ID: <1359389530870-5030323.post@n6.nabble.com>

thanks a lot, paolo!



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/qgis-1-8-0-5-tp5030299p5030323.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From cavallini at faunalia.it  Mon Jan 28 08:13:14 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 28 Jan 2013 17:13:14 +0100
Subject: [Qgis-developer] Problems with lizmapclient
Message-ID: <5106A39A.4010705@faunalia.it>

Hi all.
It seems that instructions on:

http://hub.qgis.org/wiki/lizmapwebclient/Installation_en

are a bit outdated, e.g. the zip does not seem available from the link
shown.
Once installed, I get a pink square over a part of the area: is this a
known problem?Anything to be done?

Thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From cavallini at faunalia.it  Mon Jan 28 09:22:14 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 28 Jan 2013 18:22:14 +0100
Subject: [Qgis-developer] Problems with lizmapclient
In-Reply-To: <5106A39A.4010705@faunalia.it>
References: <5106A39A.4010705@faunalia.it>
Message-ID: <5106B3C6.6010707@faunalia.it>

Il 28/01/2013 17:13, Paolo Cavallini ha scritto:
> Hi all.
> It seems that instructions on:
>
> http://hub.qgis.org/wiki/lizmapwebclient/Installation_en
>
> are a bit outdated, e.g. the zip does not seem available from the link
> shown.
> Once installed, I get a pink square over a part of the area: is this a
> known problem?Anything to be done?


Found a possible bug: when creating a project, if the target dir is not
writable, no error message is displayed, so the user may think
everything is ok.
should I open a ticket?
suggestion for the outdated wiki page: write the readme in rst, remove
the wiki page, and add the rst to the general documentation and to the
new web site.
all the best

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From cavallini at faunalia.it  Mon Jan 28 09:32:58 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 28 Jan 2013 18:32:58 +0100
Subject: [Qgis-developer] Problems with lizmapclient
In-Reply-To: <5106B3C6.6010707@faunalia.it>
References: <5106A39A.4010705@faunalia.it> <5106B3C6.6010707@faunalia.it>
Message-ID: <5106B64A.5090107@faunalia.it>

Il 28/01/2013 18:22, Paolo Cavallini ha scritto:
> Il 28/01/2013 17:13, Paolo Cavallini ha scritto:
>> Hi all.
>> It seems that instructions on:
>>
>> http://hub.qgis.org/wiki/lizmapwebclient/Installation_en
>>
>> are a bit outdated, e.g. the zip does not seem available from the link
>> shown.
>> Once installed, I get a pink square over a part of the area: is this a
>> known problem?Anything to be done?
>
> Found a possible bug: when creating a project, if the target dir is not
> writable, no error message is displayed, so the user may think
> everything is ok.

sorry, I think I misunderstood the command, and shoud be ok.
> suggestion for the outdated wiki page: write the readme in rst, remove
> the wiki page, and add the rst to the general documentation and to the
> new web site.

On the other hand, the plugin should be updated to the new API:

Traceback (most recent call last):
  File "/home/paolo/.qgis//python/plugins/lizmap/lizmap.py", line 1418,
in warnOnClose
    self.writeProjectConfigFile()
  File "/home/paolo/.qgis//python/plugins/lizmap/lizmap.py", line 726,
in writeProjectConfigFile
    pSrs = mc.mapRenderer().destinationSrs()
AttributeError: 'QgsMapRenderer' object has no attribute 'destinationSrs'


All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130128/62da9a89/attachment.html>

From woklist at kyngchaos.com  Mon Jan 28 13:05:39 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon, 28 Jan 2013 15:05:39 -0600
Subject: [Qgis-developer] split features takes a LONG time over network
Message-ID: <9B7FED9B-8B4E-40C4-BD21-99B5CC58F224@kyngchaos.com>

I'm trying to split a selected line feature in a postgis database on the network (not local machine).  The database layer is almost 4GiB (10M records) and is spatially indexed.

The feature is selected, it's not very large and I am zoomed to see about half of it.  It took about a half hour to split, and during that time was downloading a constant stream from the postgis server.  I'm guessing it looked at every feature in the database.

bug? (didn't see anything in the tracker)  lack of optimization?  maybe it was fixed in trunk?  Continuing to edit this database will be impractical as it is in 1.8.


QGIS 1.8, OS X

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly what the universe is for and why it is here, it will instantly disappear and be replaced by something even more bizarrely inexplicable.  There is another theory which states that this has already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro



From woklist at kyngchaos.com  Mon Jan 28 13:09:35 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon, 28 Jan 2013 15:09:35 -0600
Subject: [Qgis-developer] split features takes a LONG time over network
In-Reply-To: <9B7FED9B-8B4E-40C4-BD21-99B5CC58F224@kyngchaos.com>
References: <9B7FED9B-8B4E-40C4-BD21-99B5CC58F224@kyngchaos.com>
Message-ID: <4BE43B70-B6A3-4F25-BB04-590884688F9C@kyngchaos.com>

Arrgghh - now trying to delete one half of the split feature and it's downloading all over again from the postgis server.  jeez, just to delete? I haven't even tried to save yet.

On Jan 28, 2013, at 3:05 PM, William Kyngesburye wrote:

> I'm trying to split a selected line feature in a postgis database on the network (not local machine).  The database layer is almost 4GiB (10M records) and is spatially indexed.
> 
> The feature is selected, it's not very large and I am zoomed to see about half of it.  It took about a half hour to split, and during that time was downloading a constant stream from the postgis server.  I'm guessing it looked at every feature in the database.
> 
> bug? (didn't see anything in the tracker)  lack of optimization?  maybe it was fixed in trunk?  Continuing to edit this database will be impractical as it is in 1.8.
> 
> 
> QGIS 1.8, OS X
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> Theory of the Universe
> 
> There is a theory which states that if ever anyone discovers exactly what the universe is for and why it is here, it will instantly disappear and be replaced by something even more bizarrely inexplicable.  There is another theory which states that this has already happened.
> 
> -Hitchhiker's Guide to the Galaxy 2nd season intro
> 
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From etourigny.dev at gmail.com  Mon Jan 28 13:49:58 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 28 Jan 2013 19:49:58 -0200
Subject: [Qgis-developer] api additions to QgsLegendInterface
Message-ID: <CA+TxYvMPKyxKGv7wGBAFhANAcUo205Wj+EEST2s2FvnH0EZP+Q@mail.gmail.com>

I have pushed a few additions to QgsLegendInterface:

- currentLayer() / setCurrentLayer( QgsMapLayer *layer ) /
currentLayerChanged( QgsMapLayer * )

This allows to set/get current active layer in the legend. This is
useful when layers are added, and you want to keep previously active
layer (in the legend, not map canvas)
The currentLayerChanged() signal is mapped to the
QgsLegend::currentLayerChanged() signal.


- addLegendLayerAction / addLegendLayerActionForLayer / removeLegendLayerAction

This allows to have plugin actions available in the legend (TOC). A
new menu is created for each plugin that calls addLegendLayerAction(),
and plugin should remove those actions when exiting.
addLegendLayerActionForLayer() allows to add actions for specific
layers only (so that not all layers of a given type have those
actions).


- Examples of using this are found in latest update to my experimental
plugin "Tile Index Viewer", here is an excerpt:

self.action_add_sel_tiles = QAction(QIcon(":/plugins/tileindex/icon.png"), \
            u"Add selected tile raster layer(s)", self.iface.mainWindow())
self.legend.addLegendLayerAction(self.action_add_sel_tiles, "Tile
Index", "tileindex/addSelTiles", QgsMapLayer.VectorLayer, False)

for layer in layers:
    self.legend.addLegendLayerActionForLayer(self.action_add_sel_tiles, layer)

self.legend.removeLegendLayerAction(self.action_add_sel_tiles)



cheers,
Etienne

From vincent.ml at oslandia.com  Mon Jan 28 14:10:58 2013
From: vincent.ml at oslandia.com (Vincent Picavet)
Date: Mon, 28 Jan 2013 23:10:58 +0100
Subject: [Qgis-developer] split features takes a LONG time over network
In-Reply-To: <4BE43B70-B6A3-4F25-BB04-590884688F9C@kyngchaos.com>
References: <9B7FED9B-8B4E-40C4-BD21-99B5CC58F224@kyngchaos.com>
	<4BE43B70-B6A3-4F25-BB04-590884688F9C@kyngchaos.com>
Message-ID: <201301282310.59039.vincent.ml@oslandia.com>

Hi William,

> On Jan 28, 2013, at 3:05 PM, William Kyngesburye wrote:
> > I'm trying to split a selected line feature in a postgis database on the
> > network (not local machine).  The database layer is almost 4GiB (10M
> > records) and is spatially indexed.

Do you have a primary key defined on your PostGIS table ?

Vincent

> > 
> > The feature is selected, it's not very large and I am zoomed to see about
> > half of it.  It took about a half hour to split, and during that time
> > was downloading a constant stream from the postgis server.  I'm guessing
> > it looked at every feature in the database.
> > 
> > bug? (didn't see anything in the tracker)  lack of optimization?  maybe
> > it was fixed in trunk?  Continuing to edit this database will be
> > impractical as it is in 1.8.
> > 
> > 
> > QGIS 1.8, OS X
> > 
> > -----
> > William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> > http://www.kyngchaos.com/
> > 
> > Theory of the Universe
> > 
> > There is a theory which states that if ever anyone discovers exactly what
> > the universe is for and why it is here, it will instantly disappear and
> > be replaced by something even more bizarrely inexplicable.  There is
> > another theory which states that this has already happened.
> > 
> > -Hitchhiker's Guide to the Galaxy 2nd season intro
> > 
> > 
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> First Pogril: Why is life like sticking your head in a bucket filled with
> hyena offal? Second Pogril: I don't know.  Why IS life like sticking your
> head in a bucket filled with hyena offal? First Pogril: I don't know
> either.  Wretched, isn't it?
> 
> -HitchHiker's Guide to the Galaxy
> 
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From woklist at kyngchaos.com  Mon Jan 28 14:23:57 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon, 28 Jan 2013 16:23:57 -0600
Subject: [Qgis-developer] split features takes a LONG time over network
In-Reply-To: <201301282310.59039.vincent.ml@oslandia.com>
References: <9B7FED9B-8B4E-40C4-BD21-99B5CC58F224@kyngchaos.com>
	<4BE43B70-B6A3-4F25-BB04-590884688F9C@kyngchaos.com>
	<201301282310.59039.vincent.ml@oslandia.com>
Message-ID: <AD70AB1D-6C78-4D48-AFE1-518BA8E96685@kyngchaos.com>

On Jan 28, 2013, at 4:10 PM, Vincent Picavet wrote:

> Hi William,
> 
>> On Jan 28, 2013, at 3:05 PM, William Kyngesburye wrote:
>>> I'm trying to split a selected line feature in a postgis database on the
>>> network (not local machine).  The database layer is almost 4GiB (10M
>>> records) and is spatially indexed.
> 
> Do you have a primary key defined on your PostGIS table ?
> 
yes

> Vincent
> 
>>> 
>>> The feature is selected, it's not very large and I am zoomed to see about
>>> half of it.  It took about a half hour to split, and during that time
>>> was downloading a constant stream from the postgis server.  I'm guessing
>>> it looked at every feature in the database.
>>> 
>>> bug? (didn't see anything in the tracker)  lack of optimization?  maybe
>>> it was fixed in trunk?  Continuing to edit this database will be
>>> impractical as it is in 1.8.
>>> 
>>> 
>>> QGIS 1.8, OS X
>>> 
>>> -----
>>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>>> http://www.kyngchaos.com/
>>> 
>>> Theory of the Universe
>>> 
>>> There is a theory which states that if ever anyone discovers exactly what
>>> the universe is for and why it is here, it will instantly disappear and
>>> be replaced by something even more bizarrely inexplicable.  There is
>>> another theory which states that this has already happened.
>>> 
>>> -Hitchhiker's Guide to the Galaxy 2nd season intro
>>> 
>>> 
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> 
>> -----
>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>> 
>> First Pogril: Why is life like sticking your head in a bucket filled with
>> hyena offal? Second Pogril: I don't know.  Why IS life like sticking your
>> head in a bucket filled with hyena offal? First Pogril: I don't know
>> either.  Wretched, isn't it?
>> 
>> -HitchHiker's Guide to the Galaxy
>> 
>> 
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From giohappy at gmail.com  Mon Jan 28 14:25:01 2013
From: giohappy at gmail.com (G. Allegri)
Date: Mon, 28 Jan 2013 23:25:01 +0100
Subject: [Qgis-developer] split features takes a LONG time over network
In-Reply-To: <AD70AB1D-6C78-4D48-AFE1-518BA8E96685@kyngchaos.com>
References: <9B7FED9B-8B4E-40C4-BD21-99B5CC58F224@kyngchaos.com>
	<4BE43B70-B6A3-4F25-BB04-590884688F9C@kyngchaos.com>
	<201301282310.59039.vincent.ml@oslandia.com>
	<AD70AB1D-6C78-4D48-AFE1-518BA8E96685@kyngchaos.com>
Message-ID: <CAB4g1=xotFQ2YmKcbZ2MFHC=_pAk1EB9h=Fp3HaSp_HJ0hV0tw@mail.gmail.com>

> > Do you have a primary key defined on your PostGIS table ?
> >
> yes
>

and I suppose you've created a spatial index too, right?

giovanni


>
> > Vincent
> >
> >>>
> >>> The feature is selected, it's not very large and I am zoomed to see
> about
> >>> half of it.  It took about a half hour to split, and during that time
> >>> was downloading a constant stream from the postgis server.  I'm
> guessing
> >>> it looked at every feature in the database.
> >>>
> >>> bug? (didn't see anything in the tracker)  lack of optimization?  maybe
> >>> it was fixed in trunk?  Continuing to edit this database will be
> >>> impractical as it is in 1.8.
> >>>
> >>>
> >>> QGIS 1.8, OS X
> >>>
> >>> -----
> >>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> >>> http://www.kyngchaos.com/
> >>>
> >>> Theory of the Universe
> >>>
> >>> There is a theory which states that if ever anyone discovers exactly
> what
> >>> the universe is for and why it is here, it will instantly disappear and
> >>> be replaced by something even more bizarrely inexplicable.  There is
> >>> another theory which states that this has already happened.
> >>>
> >>> -Hitchhiker's Guide to the Galaxy 2nd season intro
> >>>
> >>>
> >>> _______________________________________________
> >>> Qgis-developer mailing list
> >>> Qgis-developer at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
> >> -----
> >> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> >> http://www.kyngchaos.com/
> >>
> >> First Pogril: Why is life like sticking your head in a bucket filled
> with
> >> hyena offal? Second Pogril: I don't know.  Why IS life like sticking
> your
> >> head in a bucket filled with hyena offal? First Pogril: I don't know
> >> either.  Wretched, isn't it?
> >>
> >> -HitchHiker's Guide to the Galaxy
> >>
> >>
> >> _______________________________________________
> >> Qgis-developer mailing list
> >> Qgis-developer at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
>
> - Marvin
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>



-- 
Giovanni Allegri
website: http://giovanniallegri.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130128/affdfa03/attachment-0001.html>

From Stefan.Ziegler at bd.so.ch  Mon Jan 28 23:20:23 2013
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Tue, 29 Jan 2013 07:20:23 +0000
Subject: [Qgis-developer] qgis master compile error
Message-ID: <96EAE7D042AAC14486D68EC70207B0C122B3BF27@srsofaioi16255.verw.rootso.org>

Hi

I get an error while compiling master on Ubuntu 10.04:

[ 42%] Building CXX object src/gui/CMakeFiles/qgis_gui.dir/qgsmanageconnectionsdialog.cpp.o
sip: QgsFeatureRequest::filterFid() unsupported function return type - provide %MethodCode and a C++ signature
make[2]: *** [python/analysis/sipanalysispart0.cpp] Error 1
make[1]: *** [python/CMakeFiles/python_module_qgis_analysis.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....



regards
Stefan

Freundliche Gr?sse 
Stefan Ziegler 
Leiter amtliche Vermessung 

Amt f?r Geoinformation
Amtliche Vermessung 
R?tistrasse 4 
4500 Solothurn 

Telefon +41 32 627 75 96
Telefax +41 32 627 75 98 
stefan.ziegler at bd.so.ch
http://www.so.ch 


From cavallini at faunalia.it  Tue Jan 29 00:49:11 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 09:49:11 +0100
Subject: [Qgis-developer] Routing in QGIS
Message-ID: <51078D07.6050508@faunalia.it>

Hi all.
Testing http://project-osrm.org/, performances and functionality are
amazing. Anybody interested in writing a plugin to make these
functionality available from within QGIS? Support could be seeked.
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From lists at linfiniti.com  Tue Jan 29 01:23:02 2013
From: lists at linfiniti.com (Tim Sutton)
Date: Tue, 29 Jan 2013 16:23:02 +0700
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <CAC2XbFco_4k2dubFJA-eREYbGn2MyVyC+H6tiMLo13EpD_GaBw@mail.gmail.com>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
	<51053C29.6040406@gmx.ch>
	<CAC2XbFco_4k2dubFJA-eREYbGn2MyVyC+H6tiMLo13EpD_GaBw@mail.gmail.com>
Message-ID: <CALCNqkbC+8j29Qf6eNVHvv5kNi-7BYNT0UNPxs3g2YgfTpvGfA@mail.gmail.com>

Hi

On Mon, Jan 28, 2013 at 3:13 PM, Martin Dobias <wonder.sk at gmail.com> wrote:
> Matthias
>
> On Sun, Jan 27, 2013 at 3:39 PM, Matthias Kuhn <matthias.kuhn at gmx.ch> wrote:
>> Hi Martin,
>>
>> Nice too see this changes merged.

+1 Thanks for all this hard work Martin!

Regards

Tim
--
Tim Sutton - QGIS Project Steering Committee Member (Release  Manager)
==============================================
Please do not email me off-list with technical
support questions. Using the lists will gain
more exposure for your issues and the knowledge
surrounding your issue will be shared with all.

Visit http://linfiniti.com to find out about:
 * QGIS programming and support services
 * Mapserver and PostGIS based hosting plans
 * FOSS Consulting Services
Skype: timlinux
Irc: timlinux on #qgis at freenode.net
==============================================

From matthias.kuhn at gmx.ch  Tue Jan 29 01:53:44 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 29 Jan 2013 10:53:44 +0100
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
Message-ID: <51079C28.6090906@gmx.ch>

Hi
On Wed, Aug 15, 2012 at 8:48 PM, Larry Shaffer <larrys at dakotacarto.com> 
wrote:
>>>> Hi,
>>>>
>>>> This is a request for Robert, but some input from others would help out.
>>>>
>>>> Peppered throughout the GUI are buttons with only '...' for opening
>>>> the expression editor. A button with only '...' is a bit vague. It
>>>> would be nice to have a specific icon for the expression editor to add
>>>> to buttons and the ui, where needed.
>>>>
>>>> Any ideas for what it should look like, or characters it should be
>>>> based on, like maybe:  ('exp')  ?
>>>>
>>> What about the greek 'sum' symbol which is commonly used for this?
>>>
>>> Regards
>>>
>>> Tim
>>
>> Do you mean upper case sigma Tim [1]?
> Sorry yes I meant sigma
>
>> We have it already, but probably it's too strongly related to 'sum' or
>> 'statistics'.
>> What about
>> - lowercase epsilon [2],
>> - f()
>> - integral sign? which in fact is sort of sum :), but looks more
>> "scientific"
>>
>> According to some design rules, one should avoid using letters where
>> possible.
> Yes agreed - though I wonder if mathematical symbols are used
> universally across locales?
>
> Regards
>
> Tim
>
>> Robert
>>
>> [1]
>> http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/stats.svg
>> [2] http://en.wikipedia.org/wiki/Epsilon
>>
>>>> Regards,
>>>>
>>>> Larry
>>

Has there any progress been made concerning this topic?

Regards,
Matthias

From apasotti at gmail.com  Tue Jan 29 02:30:04 2013
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Jan 2013 11:30:04 +0100
Subject: [Qgis-developer] Routing in QGIS
In-Reply-To: <51078D07.6050508@faunalia.it>
References: <51078D07.6050508@faunalia.it>
Message-ID: <CAL5Q6700zJ8WE1=OYO2-pGMeud=m28Xf8Vcbm02bPnC_H6KHqg@mail.gmail.com>

2013/1/29 Paolo Cavallini <cavallini at faunalia.it>

> Hi all.
> Testing http://project-osrm.org/, performances and functionality are
> amazing. Anybody interested in writing a plugin to make these
> functionality available from within QGIS? Support could be seeked.
> All the best.
>
>

Hi Paolo,

I've been recently working on OSRM and it's indeed the fastest routing
machine I've ever seen!! Server side, it requires large amount of RAM ans
CPU (depending mainly on how large is the area to be served, and of course
on the rate of incoming requests) and unfortunately doesn't take altitude
into account (which makes it much less useful for foot and bicycle
profiles).

I'm interested in developing such a plugin, it should support different
OSRM servers (with different profiles) and save both routes and directions
 (points) at the desired details (zoom) levels.
Since it opens a lot of new possibilities, it would be wise to plan a sort
of small API to the service, so that we can eventually add more
functionalities in the future.


-- 
Alessandro Pasotti
w3:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130129/0c959594/attachment.html>

From cavallini at faunalia.it  Tue Jan 29 03:00:49 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 12:00:49 +0100
Subject: [Qgis-developer] List of translators to be updated
Message-ID: <5107ABE1.8090401@faunalia.it>

Hi all.
I moved the list of translators, from:

http://hub.qgis.org/wiki/quantum-gis/Project_Organigram

to our new structure:

https://github.com/qgis/QGIS-Documentation

Both the old page and the new list are probably obsolete, and possibly
duplicated somewhere else. Please check, and move the content to the
appropriate pages. It would be good to close the old wiki page. I can
help if necessary.

All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From cavallini at faunalia.it  Tue Jan 29 03:05:44 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 12:05:44 +0100
Subject: [Qgis-developer] Code maintainers
Message-ID: <5107AD08.6050809@faunalia.it>

Hi all.
Is this list useful?
http://hub.qgis.org/wiki/quantum-gis/Project_Organigram#Code-Maintainers
Obsolete, better remove it? Or someone wants to update it and move it to
https://github.com/qgis/QGIS-Documentation ?
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From svanleent at gmail.com  Tue Jan 29 03:12:14 2013
From: svanleent at gmail.com (Sjoerd van Leent)
Date: Tue, 29 Jan 2013 12:12:14 +0100
Subject: [Qgis-developer] QGis Mobility
Message-ID: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>


Hi all,

Currently we (at Realworld Systems) are busy to utilize QGis for mobile
purposes. We based our work on work done by Marco Bernasocchi, but we
are also busy including a ported version of Python 2.7.

We don't use the Gui part, as it is to our minds not suitable. We will
provide a mobile substitute, but our main aim is to get QGis, Python and
Necessitas (Qt) to be friendly to each other on Android devices.

Regards,
Sjoerd van Leent - Realworld Systems B.V., the Netherladns

From cavallini at faunalia.it  Tue Jan 29 03:16:04 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 12:16:04 +0100
Subject: [Qgis-developer] QGis Mobility
In-Reply-To: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
References: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
Message-ID: <5107AF74.3020402@faunalia.it>

Il 29/01/2013 12:12, Sjoerd van Leent ha scritto:
>
> Currently we (at Realworld Systems) are busy to utilize QGis for mobile
> purposes. We based our work on work done by Marco Bernasocchi, but we
> are also busy including a ported version of Python 2.7.
>
>
good to know, thanks.Please let us know where your work is available -
early testing is always good for all.
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From cavallini at faunalia.it  Tue Jan 29 03:17:50 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 12:17:50 +0100
Subject: [Qgis-developer] Routing in QGIS
In-Reply-To: <CAL5Q6700zJ8WE1=OYO2-pGMeud=m28Xf8Vcbm02bPnC_H6KHqg@mail.gmail.com>
References: <51078D07.6050508@faunalia.it>
	<CAL5Q6700zJ8WE1=OYO2-pGMeud=m28Xf8Vcbm02bPnC_H6KHqg@mail.gmail.com>
Message-ID: <5107AFDE.2080305@faunalia.it>

Il 29/01/2013 11:30, Alessandro Pasotti ha scritto:
>
>
> I've been recently working on OSRM and it's indeed the fastest routing
> machine I've ever seen!! Server side, it requires large amount of RAM
> ans CPU (depending mainly on how large is the area to be served, and
> of course on the rate of incoming requests) and unfortunately doesn't
> take altitude into account (which makes it much less useful for foot
> and bicycle profiles).
>
> I'm interested in developing such a plugin, it should support
> different OSRM servers (with different profiles) and save both routes
> and directions  (points) at the desired details (zoom) levels.
> Since it opens a lot of new possibilities, it would be wise to plan a
> sort of small API to the service, so that we can eventually add more
> functionalities in the future.
>
>
Great. If nobody objects, I'd be happy of starting a BidForFix QGIS
subproject for this.
All the best, and thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From werner.macho at gmail.com  Tue Jan 29 03:19:38 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Tue, 29 Jan 2013 12:19:38 +0100
Subject: [Qgis-developer] QGis Mobility
In-Reply-To: <5107AF74.3020402@faunalia.it>
References: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<5107AF74.3020402@faunalia.it>
Message-ID: <CA+3oMjv6-hmte1Xehgvri3sAoO1QpUJcFS+y_b3WJffEiLpPLQ@mail.gmail.com>

Hi!
Good to know that there is ongoing effort but I always thought there is
already a project to bring the GUI of QGIS-Android to a (HTML5) Design?
Marco? Is this true or is my brain mislead?

kind regards
Werner



On Tue, Jan 29, 2013 at 12:16 PM, Paolo Cavallini <cavallini at faunalia.it>wrote:

> Il 29/01/2013 12:12, Sjoerd van Leent ha scritto:
> >
> > Currently we (at Realworld Systems) are busy to utilize QGis for mobile
> > purposes. We based our work on work done by Marco Bernasocchi, but we
> > are also busy including a ported version of Python 2.7.
> >
> >
> good to know, thanks.Please let us know where your work is available -
> early testing is always good for all.
> All the best.
>
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130129/642f3aca/attachment-0001.html>

From giohappy at gmail.com  Tue Jan 29 03:20:52 2013
From: giohappy at gmail.com (G. Allegri)
Date: Tue, 29 Jan 2013 12:20:52 +0100
Subject: [Qgis-developer] QGis Mobility
In-Reply-To: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
References: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
Message-ID: <CAB4g1=yxO-DWjFKeo6Wn4+7tsFM55AdCKmPjFmn-XA5ri6o-fg@mail.gmail.com>

That's a great news!
Having the core with Python would be great.
Let us know about the progresses.

thx
giovanni

2013/1/29 Sjoerd van Leent <svanleent at gmail.com>

>
> Hi all,
>
> Currently we (at Realworld Systems) are busy to utilize QGis for mobile
> purposes. We based our work on work done by Marco Bernasocchi, but we
> are also busy including a ported version of Python 2.7.
>
> We don't use the Gui part, as it is to our minds not suitable. We will
> provide a mobile substitute, but our main aim is to get QGis, Python and
> Necessitas (Qt) to be friendly to each other on Android devices.
>
> Regards,
> Sjoerd van Leent - Realworld Systems B.V., the Netherladns
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>



-- 
Giovanni Allegri
website: http://giovanniallegri.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130129/a3cd5377/attachment.html>

From matthias.kuhn at gmx.ch  Tue Jan 29 03:21:16 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 29 Jan 2013 12:21:16 +0100
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <51079C28.6090906@gmx.ch>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
	<51079C28.6090906@gmx.ch>
Message-ID: <5107B0AC.9030104@gmx.ch>

Hi,

On 01/29/2013 10:53 AM, Matthias Kuhn wrote:
> Hi
> On Wed, Aug 15, 2012 at 8:48 PM, Larry Shaffer 
> <larrys at dakotacarto.com> wrote:
>>>>> Hi,
>>>>>
>>>>> This is a request for Robert, but some input from others would 
>>>>> help out.
>>>>>
>>>>> Peppered throughout the GUI are buttons with only '...' for opening
>>>>> the expression editor. A button with only '...' is a bit vague. It
>>>>> would be nice to have a specific icon for the expression editor to 
>>>>> add
>>>>> to buttons and the ui, where needed.
>>>>>
>>>>> Any ideas for what it should look like, or characters it should be
>>>>> based on, like maybe:  ('exp')  ?
>>>>>
>>>> What about the greek 'sum' symbol which is commonly used for this?
>>>>
>>>> Regards
>>>>
>>>> Tim
>>>
>>> Do you mean upper case sigma Tim [1]?
>> Sorry yes I meant sigma
>>
>>> We have it already, but probably it's too strongly related to 'sum' or
>>> 'statistics'.
>>> What about
>>> - lowercase epsilon [2],
>>> - f()
>>> - integral sign? which in fact is sort of sum :), but looks more
>>> "scientific"
>>>
>>> According to some design rules, one should avoid using letters where
>>> possible.
>> Yes agreed - though I wonder if mathematical symbols are used
>> universally across locales?
>>
>> Regards
>>
>> Tim
>>
>>> Robert
>>>
>>> [1]
>>> http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/stats.svg 
>>>
>>> [2] http://en.wikipedia.org/wiki/Epsilon
>>>
>>>>> Regards,
>>>>>
>>>>> Larry
>>>
>
> Has there any progress been made concerning this topic?
>

Sorry for posting again, but I forgot to give some context to the question.

I'm incorporating the expression builder in different places recently.

Pull request #406 uses a QgsExpressionBuilder to alter the selection [1]
My current work on the attribute editor offers to use a 
QgsExpressionBuilder in different places. It would be nice to have 
appropriate icons to give the user some hints about what he is going to 
initiate with a click on that button.

I imagine a combination of this icon together with other icons:
* Expression + Selection (Maybe even different icons with a plus, minus, 
intersect)
* Expression + Filter
* Expression + Preview (It's about a feature identification string. 
Maybe ABC or something...)

[1]: https://github.com/qgis/Quantum-GIS/pull/406

Regards,
Matthias

From cavallini at faunalia.it  Tue Jan 29 03:21:52 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 12:21:52 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <5107AD08.6050809@faunalia.it>
References: <5107AD08.6050809@faunalia.it>
Message-ID: <5107B0D0.3020507@faunalia.it>

Il 29/01/2013 12:05, Paolo Cavallini ha scritto:
> Hi all.
> Is this list useful?
> http://hub.qgis.org/wiki/quantum-gis/Project_Organigram#Code-Maintainers
> Obsolete, better remove it? Or someone wants to update it and move it to
> https://github.com/qgis/QGIS-Documentation ?
> All the best.
>
better remove also this?
http://hub.qgis.org/wiki/quantum-gis/DeveloperProfiles

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From svanleent at gmail.com  Tue Jan 29 03:31:12 2013
From: svanleent at gmail.com (Sjoerd van Leent)
Date: Tue, 29 Jan 2013 12:31:12 +0100
Subject: [Qgis-developer] QGis Mobility
In-Reply-To: <5107AF74.3020402@faunalia.it> (Paolo Cavallini's message of
	"Tue, 29 Jan 2013 12:16:04 +0100")
References: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<5107AF74.3020402@faunalia.it>
Message-ID: <87d2wop6nz.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>

Hi Paolo,

Certainly, it's on github:

https://github.com/RealworldSystems/qgis-mobility

Paolo Cavallini <cavallini at faunalia.it> writes:

> Il 29/01/2013 12:12, Sjoerd van Leent ha scritto:
>>
>> Currently we (at Realworld Systems) are busy to utilize QGis for mobile
>> purposes. We based our work on work done by Marco Bernasocchi, but we
>> are also busy including a ported version of Python 2.7.
>>
>>
> good to know, thanks.Please let us know where your work is available -
> early testing is always good for all.
> All the best.

From cavallini at faunalia.it  Tue Jan 29 03:38:52 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 12:38:52 +0100
Subject: [Qgis-developer] wiki cleanup
Message-ID: <5107B4CC.4060005@faunalia.it>

Hi all.
Preparing for the migration to the new website, I'm cleaning up the old
wiki. Please anyone who added content there have a look to:
http://hub.qgis.org/projects/quantum-gis/wiki/Page_index
and remove the obsolete pages (there are many of them). If there is
useful info, please move it to the manual, the new website, or somewhere
else.
Where should we move the hackfest, meeting, release announcements,
changelogs, and release checklist and specs, that compose most of the
wiki pages?
Thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From a.neumann at carto.net  Tue Jan 29 04:11:15 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 29 Jan 2013 13:11:15 +0100
Subject: [Qgis-developer] QGis Mobility
In-Reply-To: <87d2wop6nz.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
References: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<5107AF74.3020402@faunalia.it>
	<87d2wop6nz.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
Message-ID: <94771904b25159905fadda6c8a074145@carto.net>

 Hi,

 To my knowledge, Marco Bernasocchi is also working on getting python to 
 work with QGIS Android. Did you talk to Marco? It would be a shame if 
 two are developing the same thing in parallel.

 We promised Marco some limited funding for his work from the Swiss QGIS 
 usergroup for the project to get Python working on QGIS Android.

 I agree that the GUI has to be reworked completely. So maybe it would 
 be useful if only one developer is working on Python support and the 
 others are concentrating to improve the GUI.

 But I am sure that Marco B. can explain a bit more.

 Andreas

 On Tue, 29 Jan 2013 12:31:12 +0100, Sjoerd van Leent wrote:
> Hi Paolo,
>
> Certainly, it's on github:
>
> https://github.com/RealworldSystems/qgis-mobility
>
> Paolo Cavallini <cavallini at faunalia.it> writes:
>
>> Il 29/01/2013 12:12, Sjoerd van Leent ha scritto:
>>>
>>> Currently we (at Realworld Systems) are busy to utilize QGis for 
>>> mobile
>>> purposes. We based our work on work done by Marco Bernasocchi, but 
>>> we
>>> are also busy including a ported version of Python 2.7.
>>>
>>>
>> good to know, thanks.Please let us know where your work is available 
>> -
>> early testing is always good for all.
>> All the best.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From a.neumann at carto.net  Tue Jan 29 04:14:01 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 29 Jan 2013 13:14:01 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <5107AD08.6050809@faunalia.it>
References: <5107AD08.6050809@faunalia.it>
Message-ID: <20e68398317cf9f6f882ad1e80a85f66@carto.net>

 Hi Paolo,

 I think this is definitely useful information (if the information is 
 up-to-date) and should be kept also for a new QGIS webpage.

 Andreas

 On Tue, 29 Jan 2013 12:05:44 +0100, Paolo Cavallini wrote:
> Hi all.
> Is this list useful?
> 
> http://hub.qgis.org/wiki/quantum-gis/Project_Organigram#Code-Maintainers
> Obsolete, better remove it? Or someone wants to update it and move it 
> to
> https://github.com/qgis/QGIS-Documentation ?
> All the best.

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From svanleent at gmail.com  Tue Jan 29 04:14:01 2013
From: svanleent at gmail.com (Sjoerd van Leent)
Date: Tue, 29 Jan 2013 13:14:01 +0100
Subject: [Qgis-developer] QGis Mobility
In-Reply-To: <94771904b25159905fadda6c8a074145@carto.net> (Andreas Neumann's
	message of "Tue, 29 Jan 2013 13:11:15 +0100")
References: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<5107AF74.3020402@faunalia.it>
	<87d2wop6nz.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<94771904b25159905fadda6c8a074145@carto.net>
Message-ID: <874ni0p4om.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>

Andreas,

I definetely based the work on Marco's job. Though we are targetting a
different deployment scenario (app building rather than one QGis apk),
it should be possible to use the same sources.

Sjoerd

Andreas Neumann <a.neumann at carto.net> writes:

> Hi,
>
> To my knowledge, Marco Bernasocchi is also working on getting python
> to work with QGIS Android. Did you talk to Marco? It would be a shame
> if two are developing the same thing in parallel.
>
> We promised Marco some limited funding for his work from the Swiss
> QGIS usergroup for the project to get Python working on QGIS Android.
>
> I agree that the GUI has to be reworked completely. So maybe it would
> be useful if only one developer is working on Python support and the
> others are concentrating to improve the GUI.
>
> But I am sure that Marco B. can explain a bit more.
>
> Andreas
>
> On Tue, 29 Jan 2013 12:31:12 +0100, Sjoerd van Leent wrote:
>> Hi Paolo,
>>
>> Certainly, it's on github:
>>
>> https://github.com/RealworldSystems/qgis-mobility
>>
>> Paolo Cavallini <cavallini at faunalia.it> writes:
>>
>>> Il 29/01/2013 12:12, Sjoerd van Leent ha scritto:
>>>>
>>>> Currently we (at Realworld Systems) are busy to utilize QGis for
>>>> mobile
>>>> purposes. We based our work on work done by Marco Bernasocchi, but
>>>> we
>>>> are also busy including a ported version of Python 2.7.
>>>>
>>>>
>>> good to know, thanks.Please let us know where your work is
>>> available -
>>> early testing is always good for all.
>>> All the best.
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Tue Jan 29 04:26:32 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 13:26:32 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <20e68398317cf9f6f882ad1e80a85f66@carto.net>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
Message-ID: <5107BFF8.4050307@faunalia.it>

Il 29/01/2013 13:14, Andreas Neumann ha scritto:
>
>
> I think this is definitely useful information (if the information is
> up-to-date) and should be kept also for a new QGIS webpage.

yes, that's the point: the info is badly outdated, and I think it always
be so, with our current ratio of newcomers/website cleaners.
IMHO better not to show info, than leaving it outdated.

all the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From werner.macho at gmail.com  Tue Jan 29 04:53:03 2013
From: werner.macho at gmail.com (Werner Macho)
Date: Tue, 29 Jan 2013 13:53:03 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <5107BFF8.4050307@faunalia.it>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
Message-ID: <CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>

Hi!

Yes thats also my opinion .. Better not showing info than outdated info
which confuses the users ..
For my point I'd like to migrate all developer information into the "about"
box - keep it updated there (easier to maintain because just one single
place) and probably linke to the TRANSLATORS page from the Webpage.
We should definitely NOT create too many different places with (more or
less) the same information ..

K.I.S.S -> Keep it simple ;)

kind regards
Werner



On Tue, Jan 29, 2013 at 1:26 PM, Paolo Cavallini <cavallini at faunalia.it>wrote:

> Il 29/01/2013 13:14, Andreas Neumann ha scritto:
> >
> >
> > I think this is definitely useful information (if the information is
> > up-to-date) and should be kept also for a new QGIS webpage.
>
> yes, that's the point: the info is badly outdated, and I think it always
> be so, with our current ratio of newcomers/website cleaners.
> IMHO better not to show info, than leaving it outdated.
>
> all the best.
>
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130129/2ae80d25/attachment.html>

From robert at szczepanek.pl  Tue Jan 29 05:24:45 2013
From: robert at szczepanek.pl (Robert Szczepanek)
Date: Tue, 29 Jan 2013 14:24:45 +0100
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <5107B0AC.9030104@gmx.ch>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
	<51079C28.6090906@gmx.ch> <5107B0AC.9030104@gmx.ch>
Message-ID: <5107CD9D.1010100@szczepanek.pl>

Hi Matthias,

On 29.01.2013 12:21, Matthias Kuhn wrote:

(...)

> I'm incorporating the expression builder in different places recently.
>
> Pull request #406 uses a QgsExpressionBuilder to alter the selection [1]
> My current work on the attribute editor offers to use a
> QgsExpressionBuilder in different places. It would be nice to have
> appropriate icons to give the user some hints about what he is going to
> initiate with a click on that button.
>
> I imagine a combination of this icon together with other icons:
> * Expression + Selection (Maybe even different icons with a plus, minus,
> intersect)
> * Expression + Filter
> * Expression + Preview (It's about a feature identification string.
> Maybe ABC or something...)
>
> [1]: https://github.com/qgis/Quantum-GIS/pull/406
>
> Regards,
> Matthias
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>

Give me please two days for that...
regards,
Robert

From matthias.kuhn at gmx.ch  Tue Jan 29 05:27:27 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Tue, 29 Jan 2013 14:27:27 +0100
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <5107CD9D.1010100@szczepanek.pl>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
	<51079C28.6090906@gmx.ch> <5107B0AC.9030104@gmx.ch>
	<5107CD9D.1010100@szczepanek.pl>
Message-ID: <5107CE3F.4090304@gmx.ch>

Hi Robert,

On 01/29/2013 02:24 PM, Robert Szczepanek wrote:
> Hi Matthias,
>
> On 29.01.2013 12:21, Matthias Kuhn wrote:
>
> (...)
>
>> I'm incorporating the expression builder in different places recently.
>>
>> Pull request #406 uses a QgsExpressionBuilder to alter the selection [1]
>> My current work on the attribute editor offers to use a
>> QgsExpressionBuilder in different places. It would be nice to have
>> appropriate icons to give the user some hints about what he is going to
>> initiate with a click on that button.
>>
>> I imagine a combination of this icon together with other icons:
>> * Expression + Selection (Maybe even different icons with a plus, minus,
>> intersect)
>> * Expression + Filter
>> * Expression + Preview (It's about a feature identification string.
>> Maybe ABC or something...)
>>
>> [1]: https://github.com/qgis/Quantum-GIS/pull/406
>>
>> Regards,
>> Matthias
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
> Give me please two days for that...
> regards,
> Robert

With pleasure :)

Regards,
Matthias

From a.neumann at carto.net  Tue Jan 29 05:35:04 2013
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 29 Jan 2013 14:35:04 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
Message-ID: <f1f2c68e300ab83c139371428b0048c0@carto.net>

 fine with me. But maybe you could link at the webpage into the 
 about-box (e.g. into the Sourcecode repository). I think it is quite 
 normal that people want to know contacts and responsible persons in a 
 project. It should be easy to find in a web page. I don't think it is 
 obvious to only find it in the aboutbox with no information at the 
 webpage - so at least some description or a link should do it.

 Andreas

 On Tue, 29 Jan 2013 13:53:03 +0100, Werner Macho wrote:
> Hi!
>
> Yes thats also my opinion .. Better not showing info than outdated
> info which confuses the users ..
> For my point I'd like to migrate all developer information into the
> "about" box - keep it updated there (easier to maintain because just
> one single place) and probably linke to the TRANSLATORS page from the
> Webpage.
> We should definitely NOT create too many different places with (more
> or less) the same information ..?
>
> K.I.S.S -> Keep it simple ;)
>
> kind regards
> Werner
>
> On Tue, Jan 29, 2013 at 1:26 PM, Paolo Cavallini  wrote:
>
>> Il 29/01/2013 13:14, Andreas Neumann ha scritto:
>>
>>>
>> >
>> > I think this is definitely useful information (if the information
>> is
>> > up-to-date) and should be kept also for a new QGIS webpage.
>>
>> yes, that's the point: the info is badly outdated, and I think it
>> always
>> be so, with our current ratio of newcomers/website cleaners.
>> IMHO better not to show info, than leaving it outdated.
>>
>> all the best.
>>
>> --
>> Paolo Cavallini - Faunalia
>> www.faunalia.eu [1]
>> Full contact details at www.faunalia.eu/pc [2]
>> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario [3]
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org [4]
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer [5]
>
>
>
> Links:
> ------
> [1] http://www.faunalia.eu
> [2] http://www.faunalia.eu/pc
> [3] http://www.faunalia.it/calendario
> [4] mailto:Qgis-developer at lists.osgeo.org
> [5] http://lists.osgeo.org/mailman/listinfo/qgis-developer
> [6] mailto:cavallini at faunalia.it

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland

From cavallini at faunalia.it  Tue Jan 29 06:30:09 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 15:30:09 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <f1f2c68e300ab83c139371428b0048c0@carto.net>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
Message-ID: <5107DCF1.3040801@faunalia.it>

Il 29/01/2013 14:35, Andreas Neumann ha scritto:
> fine with me. But maybe you could link at the webpage into the
> about-box (e.g. into the Sourcecode repository). I think it is quite
> normal that people want to know contacts and responsible persons in a
> project. It should be easy to find in a web page. I don't think it is
> obvious to only find it in the aboutbox with no information at the
> webpage - so at least some description or a link should do it.

seems fair to me - so in short:

* remove the wiki page
* point developers to the about page, where they can add themselves (no
maintenance needed), with a link to their page if needed
* hunt and kill all the same info anywhere on the web site, to avoid
duplication.

ok?

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From jef at norbit.de  Tue Jan 29 07:36:31 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Tue, 29 Jan 2013 16:36:31 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <f1f2c68e300ab83c139371428b0048c0@carto.net>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
Message-ID: <20130129153631.GB31231@norbit.de>

Hi Andreas,

On Tue, 29. Jan 2013 at 14:35:04 +0100, Andreas Neumann wrote:
> fine with me. But maybe you could link at the webpage into the about-box 
> (e.g. into the Sourcecode repository). I think it is quite normal that 
> people want to know contacts and responsible persons in a project. It 
> should be easy to find in a web page. I don't think it is obvious to only 
> find it in the aboutbox with no information at the webpage - so at least 
> some description or a link should do it.

We have:
http://hub.qgis.org/wiki/quantum-gis/Project_Organigram#Code-Maintainers


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From cavallini at faunalia.it  Tue Jan 29 07:41:54 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 16:41:54 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <20130129153631.GB31231@norbit.de>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
	<20130129153631.GB31231@norbit.de>
Message-ID: <5107EDC2.3000403@faunalia.it>

Il 29/01/2013 16:36, J?rgen E. Fischer ha scritto:
>
> We have:
> http://hub.qgis.org/wiki/quantum-gis/Project_Organigram#Code-Maintainers
>
>
> J?rgen
>
That's where we started from. Problems:
* it is outdated
* it will always be (nobody is willing to update it)
* it is duplicated in the About, and not in sync
* we want to get rid of the wiki, at least for this kind of info

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From jef at norbit.de  Tue Jan 29 07:54:15 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Tue, 29 Jan 2013 16:54:15 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <5107EDC2.3000403@faunalia.it>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
	<20130129153631.GB31231@norbit.de> <5107EDC2.3000403@faunalia.it>
Message-ID: <20130129155415.GA6322@norbit.de>

Hi Paolo,

On Tue, 29. Jan 2013 at 16:41:54 +0100, Paolo Cavallini wrote:
> That's where we started from. Problems:
> * it is outdated
> * it will always be (nobody is willing to update it)
> * it is duplicated in the About, and not in sync
> * we want to get rid of the wiki, at least for this kind of info

Oh well, right.

But it's not as outdated as the other one (I suppose some of the pets are dead
by now ;)).  It's probably even more accurate than About
- and it has more information than About (namely who maintains what).

But I agree that moving it into the code repository better maintainable and
showing it in About is easier to find.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From marco.hugentobler at sourcepole.ch  Tue Jan 29 08:07:22 2013
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Tue, 29 Jan 2013 17:07:22 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <5107EDC2.3000403@faunalia.it>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
	<20130129153631.GB31231@norbit.de> <5107EDC2.3000403@faunalia.it>
Message-ID: <5107F3BA.6060406@sourcepole.ch>

Hi Paolo

>* it is outdated

Some maintainers are not active anymore, but apart from that, most 
information is still true (e.g. entries Nathan mssql provider, Ren?-Luc 
for WFS server are pretty recent).
Please keep that list (but I don't mind if it is in the wiki or in the 
about dialog).

>* it is duplicated in the About, and not in sync

Do you mean the about dialog in the application? I cannot find any 
maintainer list there...

Marco


On 29.01.2013 16:41, Paolo Cavallini wrote:
> Il 29/01/2013 16:36, J?rgen E. Fischer ha scritto:
>> We have:
>> http://hub.qgis.org/wiki/quantum-gis/Project_Organigram#Code-Maintainers
>>
>>
>> J?rgen
>>
> That's where we started from. Problems:
> * it is outdated
> * it will always be (nobody is willing to update it)
> * it is duplicated in the About, and not in sync
> * we want to get rid of the wiki, at least for this kind of info
>


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From cavallini at faunalia.it  Tue Jan 29 09:19:37 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 18:19:37 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <5107F3BA.6060406@sourcepole.ch>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
	<20130129153631.GB31231@norbit.de>
	<5107EDC2.3000403@faunalia.it> <5107F3BA.6060406@sourcepole.ch>
Message-ID: <510804A9.1000601@faunalia.it>

Il 29/01/2013 17:07, Marco Hugentobler ha scritto:
>
> Some maintainers are not active anymore, but apart from that, most
> information is still true (e.g. entries Nathan mssql provider,
> Ren?-Luc for WFS server are pretty recent).
> Please keep that list (but I don't mind if it is in the wiki or in the
> about dialog).

The inactive devs are mentioned as maintainers of some part of the code,
which is incorrect and misleading

>
>> * it is duplicated in the About, and not in sync
>
> Do you mean the about dialog in the application? I cannot find any
> maintainer list there...


right, there is a list of devs, without an indication of what they are
maintaining; however, I think the real picture is more complex than one
dev==one section of the code, so a tagging system would be more
appropriate (but overly complex and unmaintainable IMHO). do we really
have maintainers for all the code?
what is IMHO wrong is keeping two similar sources of info in two
different places; I suggested to move everything to the About box of the
application, and ask devs to update their info there. Adding their
maintained code and link is open to question.

underlying rationale: we grew a lot over the years, and I got scared
about how messy is our wiki. I think presenting a more clear and simple
picture to the world would be good (yes, I'm wearing my Marketing
advisor cap here).

thanks for your thoughts.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From cavallini at faunalia.it  Tue Jan 29 09:41:23 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 18:41:23 +0100
Subject: [Qgis-developer] Packaging team
Message-ID: <510809C3.4090909@faunalia.it>

Is this info updated and useful?
http://hub.qgis.org/wiki/quantum-gis/Project_Organigram#Packaging-Team
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From larrys at dakotacarto.com  Tue Jan 29 09:58:48 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Tue, 29 Jan 2013 10:58:48 -0700
Subject: [Qgis-developer] wiki cleanup
In-Reply-To: <5107B4CC.4060005@faunalia.it>
References: <5107B4CC.4060005@faunalia.it>
Message-ID: <CA+nQOR-9BMC4YLF23xzcwefY8pqcuuDwZSKWuMa54vT6tXq=Eg@mail.gmail.com>

Hi,

On Tue, Jan 29, 2013 at 4:38 AM, Paolo Cavallini <cavallini at faunalia.it>wrote:

> Hi all.
> Preparing for the migration to the new website, I'm cleaning up the old
> wiki. Please anyone who added content there have a look to:
> http://hub.qgis.org/projects/quantum-gis/wiki/Page_index
> and remove the obsolete pages (there are many of them). If there is
> useful info, please move it to the manual, the new website, or somewhere
> else.
> Where should we move the hackfest, meeting, release announcements,
> changelogs, and release checklist and specs, that compose most of the
> wiki pages?
>

I realize you are trying to clean things up (thank you), but IMO some
collaborative writing space is important.

Notice that the 'Where should we move...' items are essentially
developer-oriented, though may be of interest to the general community.
Github.com has a public wiki feature, which can be set up to limit editing
to only collaborators (if needed). It seems a reasonable place for temporal
pages that need not be on the main web site, and doesn't require editors to
muck about in the new web site code.

Github.com's wiki is based off of gollum [0], which (I believe) allows rST
as one of its supported formats. It is also built on top of git, so
developers can clone its repo to do local editing.

Although, if redmine is to be kept for the issue tracker, is there anything
wrong with just keeping the old wiki, but with limited content and editors?

[0] https://github.com/github/gollum

Larry


> Thanks.
>
> --
> Paolo Cavallini - Faunalia
> www.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130129/6f555eb2/attachment.html>

From cavallini at faunalia.it  Tue Jan 29 10:30:54 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 29 Jan 2013 19:30:54 +0100
Subject: [Qgis-developer] wiki cleanup
In-Reply-To: <CA+nQOR-9BMC4YLF23xzcwefY8pqcuuDwZSKWuMa54vT6tXq=Eg@mail.gmail.com>
References: <5107B4CC.4060005@faunalia.it>
	<CA+nQOR-9BMC4YLF23xzcwefY8pqcuuDwZSKWuMa54vT6tXq=Eg@mail.gmail.com>
Message-ID: <5108155E.1040708@faunalia.it>

Il 29/01/2013 18:58, Larry Shaffer ha scritto:
>
> I realize you are trying to clean things up (thank you), but IMO some
> collaborative writing space is important.

agreed, we can keep it in one form or another; now IMHO the priority is
cleaning the obsolete and misleading stuff, and move to the new
rst-based site.
if you have a deep look to the current situation (even our main site), I
think you'll realize what I mean.
all the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From andreaerdna at libero.it  Tue Jan 29 15:29:31 2013
From: andreaerdna at libero.it (andreaerdna)
Date: Tue, 29 Jan 2013 15:29:31 -0800 (PST)
Subject: [Qgis-developer] QGIS 1.8 Windows Standalone is not OK
	with	spatialite versions
In-Reply-To: <20121115225209.GA3312@norbit.de>
References: <1352990256890-5016639.post@n6.nabble.com>
	<20121115164743.GA30935@norbit.de>
	<1353012723001-5016757.post@n6.nabble.com>
	<20121115225209.GA3312@norbit.de>
Message-ID: <1359502171390-5030779.post@n6.nabble.com>

J?rgen E. Fischer wrote
> Building the 3.3 SDK from source with VC10 and doing a GDAL plugin based
> on
> that also works, but the licensing/distribution issue for the ECW DLLs is
> unclear to me - and therefore we didn't upload that plugin.  It's not
> usable
> without VC10 builds of the 3.3 ECW DLLs and doubt that they are publically
> available anywhere.

Tamas Szekeres mantains, among other things, GDAL 1.9.2 binary packages on 
http://www.gisinternals.com/sdk <http://www.gisinternals.com/sdk>   that
contain both ECW plugin and ESRI ECW 3.3 SDK (libecwj2.dll) MSVC2010
(2003/2005/2008 too) builds.

I tested them with OSGeo4W gdal 1.9.2-2 and qgis 1.8.0-5 / 1.9.0-176 and
seem to work properly without problems.

BTW, the OSGeo4W java-1.6.0_25-1 package contains (why ?) a gdal 1.7 ecw
plugin and an ESRI ECW 3.3 SDK binary libraries (NCSEcw.dll, NCSUtil.dll,
NCScnet.dll).

Andrea Giudiceandrea



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/QGIS-1-8-Windows-Standalone-is-not-OK-with-spatialite-versions-tp5016639p5030779.html
Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.

From angus.carr at gmail.com  Tue Jan 29 20:16:18 2013
From: angus.carr at gmail.com (Angus Carr)
Date: Tue, 29 Jan 2013 23:16:18 -0500
Subject: [Qgis-developer] SIP Bindings in QGis 1.8 for
	QgsVectorLayer.diagramRenderer()
Message-ID: <CABKNoMc86HCEgPpvLJ9v8SLDnzrwpKVjUwkeuSgpok=2ddkX9A@mail.gmail.com>

Hi, all.
I am trying to use the diagramRenderer() member function of the
QgsVectorLayer. In the current Master, the following works in the Console:
qgis.utils.iface.activeLayer().diagramRenderer()

It returns an object.
>From Version 1.8.0, however, it doesn't. It returns an error about there
being no such member:

>>> l = qgis.utils.iface.activeLayer().diagramRenderer()

Traceback (most recent call last):

File "<input>", line 1, in <module>

AttributeError: 'QgsVectorLayer' object has no attribute 'diagramRenderer'


I tracked the problem down to qgis-1.8.0\python\core\qgsvectorlayer.sip


I can update the SIP files to add the parts needed- I think it is a 4 line
fix. I can just trim them from the 1.9 source. Is there anything else I
need to do?


I would love to have a release made with this tiny update. I want to roll
things out to several users who are required to install "stable" software
only.


I am just trying to create a standardized pie diagram overlay in code,
rather that asking the user to create a pie diagram on the correct
properties tab.


The properties I want to use are in the API docs, which is why I thought I
could use them. And then I developed my plugin code in the 1.9 series, and
it worked wonderfully. But it doesn't work on the client's machine.


Thanks,

Angus Carr.

ps. After using QGis for the last 6 years, I am finally needing something
it doesn't do, so I am adding it. Thanks for the platform to stand on.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130129/91baf2b7/attachment.html>

From marco.hugentobler at sourcepole.ch  Wed Jan 30 00:20:48 2013
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Wed, 30 Jan 2013 09:20:48 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <510804A9.1000601@faunalia.it>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
	<20130129153631.GB31231@norbit.de>
	<5107EDC2.3000403@faunalia.it> <5107F3BA.6060406@sourcepole.ch>
	<510804A9.1000601@faunalia.it>
Message-ID: <5108D7E0.3010307@sourcepole.ch>

>what is IMHO wrong is keeping two similar sources of info in two
>different places; I suggested to move everything to the About box of the
>application, and ask devs to update their info there. Adding their
>maintained code and link is open to question.

But are you removing the whole Project_Organigram page 
(http://hub.qgis.org/wiki/quantum-gis/Project_Organigram) and list all 
the persons in the organiram in the contributors page of the about 
dialog then? Following your logic, the information of the release team 
and community team could also outdate some day or not totally reflect 
'reality'.

Btw., the about box can also outdate. It is very unlikely that 
contributors who are not active anymore remove their name from the about 
box as a last commit...

>do we really
>have maintainers for all the code?

We don't need to (unless the financial department brings in 3 Mio. $ / 
year :-) ). It is already a huge gain for the project if there are some 
maintained parts. Even if a maintainers page cannot reflect reality 
perfectly (but nothing can do that), it motivates people to keep code 
parts up-to-date (e.g. with recent API changes).

>underlying rationale: we grew a lot over the years, and I got scared
>about how messy is our wiki. I think presenting a more clear and simple
>picture to the world would be good (yes, I'm wearing my Marketing
>advisor cap here).

The wiki cleanup is much appreciated from my side. Just I vote for 
keeping the organigram page (including maintainers section).

Regards,
Marco



On 29.01.2013 18:19, Paolo Cavallini wrote:
> Il 29/01/2013 17:07, Marco Hugentobler ha scritto:
>> Some maintainers are not active anymore, but apart from that, most
>> information is still true (e.g. entries Nathan mssql provider,
>> Ren?-Luc for WFS server are pretty recent).
>> Please keep that list (but I don't mind if it is in the wiki or in the
>> about dialog).
> The inactive devs are mentioned as maintainers of some part of the code,
> which is incorrect and misleading
>
>>> * it is duplicated in the About, and not in sync
>> Do you mean the about dialog in the application? I cannot find any
>> maintainer list there...
>
> right, there is a list of devs, without an indication of what they are
> maintaining; however, I think the real picture is more complex than one
> dev==one section of the code, so a tagging system would be more
> appropriate (but overly complex and unmaintainable IMHO). do we really
> have maintainers for all the code?
> what is IMHO wrong is keeping two similar sources of info in two
> different places; I suggested to move everything to the About box of the
> application, and ask devs to update their info there. Adding their
> maintained code and link is open to question.
>
> underlying rationale: we grew a lot over the years, and I got scared
> about how messy is our wiki. I think presenting a more clear and simple
> picture to the world would be good (yes, I'm wearing my Marketing
> advisor cap here).
>
> thanks for your thoughts.
>


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From cavallini at faunalia.it  Wed Jan 30 01:47:32 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 30 Jan 2013 10:47:32 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <5108D7E0.3010307@sourcepole.ch>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
	<20130129153631.GB31231@norbit.de>
	<5107EDC2.3000403@faunalia.it> <5107F3BA.6060406@sourcepole.ch>
	<510804A9.1000601@faunalia.it> <5108D7E0.3010307@sourcepole.ch>
Message-ID: <5108EC34.20809@faunalia.it>

Il 30/01/2013 09:20, Marco Hugentobler ha scritto:
>
> But are you removing the whole Project_Organigram page
> (http://hub.qgis.org/wiki/quantum-gis/Project_Organigram) and list all
> the persons in the organiram in the contributors page of the about
> dialog then?

I believe we agreed to move this kind of info to
https://github.com/qgis/QGIS-Documentation
>
>
> Btw., the about box can also outdate. It is very unlikely that
> contributors who are not active anymore remove their name from the
> about box as a last commit...

right - keeping the same info in two places can only aggravate the problem.
however, keeping no longer active devs is not bad IMHO, as their code is
mostly still alive on master.
>
> We don't need to (unless the financial department brings in 3 Mio. $ /
> year :-) ). It is already a huge gain for the project if there are
> some maintained parts. Even if a maintainers page cannot reflect
> reality perfectly (but nothing can do that), it motivates people to
> keep code parts up-to-date (e.g. with recent API changes).

right - could we perhaps add this info to the About box, e.g.

Chuck Norris, general overview of the project and spaceship interface

> The wiki cleanup is much appreciated from my side. Just I vote for
> keeping the organigram page (including maintainers section).

agreed to keep it - the issue is where.
other possibility: could we add a link to each developer's github commits?

all the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From marco at bernawebdesign.ch  Wed Jan 30 05:00:29 2013
From: marco at bernawebdesign.ch (Marco Bernasocchi)
Date: Wed, 30 Jan 2013 14:00:29 +0100
Subject: [Qgis-developer] QGis Mobility
In-Reply-To: <94771904b25159905fadda6c8a074145@carto.net>
References: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<5107AF74.3020402@faunalia.it>
	<87d2wop6nz.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<94771904b25159905fadda6c8a074145@carto.net>
Message-ID: <CALWXeEEqUN0wOQxpWXmyMB0de-em1=LK6zsprwTViRmB7skjWw@mail.gmail.com>

Hi all, Indeed I m working on it in this days. I m having the first good
results :)
soon we should have a nice apk which includes python and maybe a plugin
like nathan's qmap.

ciao

Marco Bernasocchi (mobile)
http://opengis.ch
On 29 Jan 2013 13:11, "Andreas Neumann" <a.neumann at carto.net> wrote:

> Hi,
>
> To my knowledge, Marco Bernasocchi is also working on getting python to
> work with QGIS Android. Did you talk to Marco? It would be a shame if two
> are developing the same thing in parallel.
>
> We promised Marco some limited funding for his work from the Swiss QGIS
> usergroup for the project to get Python working on QGIS Android.
>
> I agree that the GUI has to be reworked completely. So maybe it would be
> useful if only one developer is working on Python support and the others
> are concentrating to improve the GUI.
>
> But I am sure that Marco B. can explain a bit more.
>
> Andreas
>
> On Tue, 29 Jan 2013 12:31:12 +0100, Sjoerd van Leent wrote:
>
>> Hi Paolo,
>>
>> Certainly, it's on github:
>>
>> https://github.com/**RealworldSystems/qgis-mobility<https://github.com/RealworldSystems/qgis-mobility>
>>
>> Paolo Cavallini <cavallini at faunalia.it> writes:
>>
>>  Il 29/01/2013 12:12, Sjoerd van Leent ha scritto:
>>>
>>>>
>>>> Currently we (at Realworld Systems) are busy to utilize QGis for mobile
>>>> purposes. We based our work on work done by Marco Bernasocchi, but we
>>>> are also busy including a ported version of Python 2.7.
>>>>
>>>>
>>>>  good to know, thanks.Please let us know where your work is available -
>>> early testing is always good for all.
>>> All the best.
>>>
>> ______________________________**_________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>
>
> --
> --
> Andreas Neumann
> B?schacherstrasse 10A
> 8624 Gr?t (Gossau ZH)
> Switzerland
> ______________________________**_________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130130/995d8865/attachment.html>

From kimaidou at gmail.com  Wed Jan 30 05:02:13 2013
From: kimaidou at gmail.com (kimaidou)
Date: Wed, 30 Jan 2013 14:02:13 +0100
Subject: [Qgis-developer] Problems with lizmapclient
In-Reply-To: <5106B64A.5090107@faunalia.it>
References: <5106A39A.4010705@faunalia.it> <5106B3C6.6010707@faunalia.it>
	<5106B64A.5090107@faunalia.it>
Message-ID: <CAMKXKO4t1MV9Tb_5FPpRh8SWrRdkuSkLUod_w9icbOggWAGkQw@mail.gmail.com>

Hi Paolo,

Sorry for the delay, I am a bit busy right now :)

I will try to answer you questions :

* Are you trying to install lizmap web client on a Windows machine or a
Linux box ?

* The zip file of the last version is here :
http://demo.3liz.com/download/lizmap-web-client-2.4.1.zip
I should add the direct link in the wiki page. For now it is too "geek"
with shell variables, etc.

* The chmod and chown commands are necessary to allow Lizmap script to be
run by Apache user. In a linux box, there is no need to give specific
rights to the folders containing the qgis projects and data. On windows
boxes, I have to try it...

* I totally agree with the need to move from redmine to rst, but I just did
not dare to ask the QGIS team to include Lizmap documentation in QGIS
documentation. I would be very happy to use RST instead. I will begin the
rewrite. By the way, there is a Redmine plugin allowing to use RST instead
of the redmine syntax for all the redmine features (wiki, issues). See [1]
I think it could help a lot to move to RST inside redmine too. (big work
though : migrate from existing syntax into rst, with tools like this one or
command line [2]


[1] http://glacialis.postmodo.com/posts/zyd1ig
[2] http://johnmacfarlane.net/pandoc/try/

* New API : thanks for letting me know. The correction will be effective in
the next release

Thanks for your feedbacks !

Michael


2013/1/28 Paolo Cavallini <cavallini at faunalia.it>

>  Il 28/01/2013 18:22, Paolo Cavallini ha scritto:
>
> Il 28/01/2013 17:13, Paolo Cavallini ha scritto:
>
>  Hi all.
> It seems that instructions on:
> http://hub.qgis.org/wiki/lizmapwebclient/Installation_en
>
> are a bit outdated, e.g. the zip does not seem available from the link
> shown.
> Once installed, I get a pink square over a part of the area: is this a
> known problem?Anything to be done?
>
>  Found a possible bug: when creating a project, if the target dir is not
> writable, no error message is displayed, so the user may think
> everything is ok.
>
>
> sorry, I think I misunderstood the command, and shoud be ok.
>
>  suggestion for the outdated wiki page: write the readme in rst, remove
> the wiki page, and add the rst to the general documentation and to the
> new web site.
>
>
> On the other hand, the plugin should be updated to the new API:
>
> Traceback (most recent call last):
>   File "/home/paolo/.qgis//python/plugins/lizmap/lizmap.py", line 1418, in
> warnOnClose
>     self.writeProjectConfigFile()
>   File "/home/paolo/.qgis//python/plugins/lizmap/lizmap.py", line 726, in
> writeProjectConfigFile
>     pSrs = mc.mapRenderer().destinationSrs()
> AttributeError: 'QgsMapRenderer' object has no attribute 'destinationSrs'
>
> All the best.
>
> --
> Paolo Cavallini - Faunaliawww.faunalia.eu
> Full contact details at www.faunalia.eu/pc
> Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130130/820d1a62/attachment-0001.html>

From madmanwoo at gmail.com  Wed Jan 30 05:04:41 2013
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 30 Jan 2013 13:04:41 +0000
Subject: [Qgis-developer] QGis Mobility
In-Reply-To: <CALWXeEEqUN0wOQxpWXmyMB0de-em1=LK6zsprwTViRmB7skjWw@mail.gmail.com>
References: <87vcagp7jl.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<5107AF74.3020402@faunalia.it>
	<87d2wop6nz.fsf@CND7321Q73.i-did-not-set--mail-host-address--so-tickle-me>
	<94771904b25159905fadda6c8a074145@carto.net>
	<CALWXeEEqUN0wOQxpWXmyMB0de-em1=LK6zsprwTViRmB7skjWw@mail.gmail.com>
Message-ID: <CAAi8Yg-i29TunS9a4vYDgcOQn5Ge9MP+6mBFhJMVijeioQUwHw@mail.gmail.com>

Very good news.  I'm keen to try QMap on Android once you have Python
support.  Might need to change a few things around to get it to work but I
think it should run OK without to much change.

- Nathan


On Wed, Jan 30, 2013 at 1:00 PM, Marco Bernasocchi
<marco at bernawebdesign.ch>wrote:

> Hi all, Indeed I m working on it in this days. I m having the first good
> results :)
> soon we should have a nice apk which includes python and maybe a plugin
> like nathan's qmap.
>
> ciao
>
> Marco Bernasocchi (mobile)
> http://opengis.ch
> On 29 Jan 2013 13:11, "Andreas Neumann" <a.neumann at carto.net> wrote:
>
>> Hi,
>>
>> To my knowledge, Marco Bernasocchi is also working on getting python to
>> work with QGIS Android. Did you talk to Marco? It would be a shame if two
>> are developing the same thing in parallel.
>>
>> We promised Marco some limited funding for his work from the Swiss QGIS
>> usergroup for the project to get Python working on QGIS Android.
>>
>> I agree that the GUI has to be reworked completely. So maybe it would be
>> useful if only one developer is working on Python support and the others
>> are concentrating to improve the GUI.
>>
>> But I am sure that Marco B. can explain a bit more.
>>
>> Andreas
>>
>> On Tue, 29 Jan 2013 12:31:12 +0100, Sjoerd van Leent wrote:
>>
>>> Hi Paolo,
>>>
>>> Certainly, it's on github:
>>>
>>> https://github.com/**RealworldSystems/qgis-mobility<https://github.com/RealworldSystems/qgis-mobility>
>>>
>>> Paolo Cavallini <cavallini at faunalia.it> writes:
>>>
>>>  Il 29/01/2013 12:12, Sjoerd van Leent ha scritto:
>>>>
>>>>>
>>>>> Currently we (at Realworld Systems) are busy to utilize QGis for mobile
>>>>> purposes. We based our work on work done by Marco Bernasocchi, but we
>>>>> are also busy including a ported version of Python 2.7.
>>>>>
>>>>>
>>>>>  good to know, thanks.Please let us know where your work is available -
>>>> early testing is always good for all.
>>>> All the best.
>>>>
>>> ______________________________**_________________
>>> Qgis-developer mailing list
>>> Qgis-developer at lists.osgeo.org
>>> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>>
>>
>> --
>> --
>> Andreas Neumann
>> B?schacherstrasse 10A
>> 8624 Gr?t (Gossau ZH)
>> Switzerland
>> ______________________________**_________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130130/cd6c4b74/attachment.html>

From Bob.Bruce at gov.mb.ca  Wed Jan 30 09:42:22 2013
From: Bob.Bruce at gov.mb.ca (Bruce, Bob (CON))
Date: Wed, 30 Jan 2013 11:42:22 -0600
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
 WCS
In-Reply-To: <CAEMrtYorgZNop1fkTvBhFJsD5gxJwBMxOfMaSCxQ0E+UJB6eJg@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
	<CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
	<50FEC2E9.6080401@cubewerx.com>
	<CAEMrtYpimrcXFjBmiwx=ByKY_gV0YVu_=s3yOeBXLaxhGTeHtQ@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3D1A1DF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYorgZNop1fkTvBhFJsD5gxJwBMxOfMaSCxQ0E+UJB6eJg@mail.gmail.com>
Message-ID: <DC49060A7E430243BF2D4090200661931AD82F03FE@OC1EX201.ME.MBGOV.CA>

Radim,
      I have now been able to get this to work. I have set the network timeout to 10ms and this shortened the timeouts so that QGIS doesn't wait long before there is some response. I am working inside of a corporate firewall and proxy server and every time that there is a timeout then there is a prompt for the proxy login information, I just click the OK button and QGIS attempts a connection again. In all I think that I got 7 prompts for login information before it proceeded with retrieving the image for the viewing area. Anything that you could do to make QGIS work smoother with this imagery source would be much appreciated.

I have attached a screen capture of QGIS displaying this imagery source with our indoor running route superimposed upon it.

Thanks,
        Bob

-----Original Message-----
From: Radim Blazek [mailto:radim.blazek at gmail.com]
Sent: January-25-13 3:54 AM
To: Bruce, Bob (CON)
Cc: ekeighan at cubewerx.com; Qgis-Developer; Bob Bruce
Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS

On Wed, Jan 23, 2013 at 10:19 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> Radim,
>         Would you be willing to add an option to "Disable max extent verification" - I believe that would solve
> all of our problems with connecting to this very large image store. If you do so then please let me know and I will
> be happy to test it.

That option would be the worst end for me. I have committed in f6806a9
a fix which allows to continue even if the extent verification fails.
Unfortunately other problems appeared immediately. Raster layer in
legend has 32x32 icon covering the whole extent. Another larger
thumbnail covering the whole extent is used in raster properties. I
think that the server must be fixed at least so that if the requested
extent is too large it responds immediately, reporting an error.

So, it works, but you have to wait for few timeouts (don't forget to
set network timeout option to something reasonable), the thumbnail in
legend and properties are black, until you zoom-in enough you get
black rectangle rendered.

Radim

> Thanks,
>         Bob Bruce
>
> -----Original Message-----
> From: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] On Behalf Of Radim Blazek
> Sent: January-23-13 3:07 AM
> To: ekeighan at cubewerx.com
> Cc: Qgis-Developer; Bob Bruce
> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> On Tue, Jan 22, 2013 at 5:48 PM, ekeighan <ekeighan at cubewerx.com> wrote:
>> Radim,
>>
>> Our WCS was designed to be used as per the intent of the OGC WCS
>> specification for extracting data, not for browsing it. The OGC WMS or WMTS
>> is intended to be used for browsing.
>
> Just for curiosity, can you point me to an OGC document supporting
> this interpretation? In any case, my aim is not to defend how QGIS
> works pointing to WCS specification but to get it working in most
> cases. If you insist on that interpretation we have to take it as
> reality.
>
>> But we admit that the WCS spec is deficient in that it does not describe the
>> raster-data type sufficiently nor in a standard way.  E.g., it doesn't tell
>> you that the raster data has five channels of 16-bit unsigned integers
>> representing Red, Green, Blue, Infrared and Alpha channels.  This is why WCS
>> client applications tend to request a sample image.
>
> Indeed, also no data values ...
>
>> GDAL does this in a more friendly way by requesting a small 2x2-pixel sample
>> image at the resolution of the source data.  This causes no problems for a
>> WCS organized to extract data at the source resolution. We suggest that QGIS
>> use the same method to avoid unnecessary problems with our and other
>> servers.
>
> QGIS does something similar, i.e. 6x3 pixels on original resolution.
> As I already wrote twice, the 10x10 pixels request for the whole
> extent is done to verify a real extent of the coverage. Some servers
> may report wrong larger extent in capabilities and requests outside
> the real extent fail. If I disable this additional check, we get it
> working with CubeWerx, but break it for other servers and that is not
> the way ahead.
>
>> Our WCS is organized to always access the raw source data in order to
>> produce the best image possible for analysis.  However, this approach breaks
>> down catastrophically in the QGIS case where your request translates into
>> accessing tens of thousands of source images covering multiple terabytes of
>> data that needs to be processed to fulfill the 10x10 request. Many
>> developers are familiar with this particularity of the WCS (for data
>> extraction at source resolution) and use it in tandem with a WMS or WMTS for
>> views and only access the WCS when a download at source resolution is
>> required, typically for analysis.
>
> This interpretation of the WCS standard degrades it to a richer
> download application. I believe that WCS has much more potential.
> Maybe the possibilities shifted a bit during the years with broadband
> connections and mobile applications?
>
>> In order to support a more flexible access to the WCS we were thinking of
>> modifying our access method when zoomed out sufficiently. Source-overview
>> files and tile data are available which make WMS and WMTS access very
>> efficient. CubeWerx have these products and our clients are of course
>> deploying them in addition to a WCS but there can be a problem with both
>> approaches in that the secondary data may not match the exact raster data
>> type of the source data. E.g., the tiles are rendered for common maps which
>> use 3-channel 8-bit RGB, but the source data might be 4-channel 16-bit
>> RGB+Infrared.
>
> But it should not be a problem (apart computational time)  to create
> lower resolution overviews also for WCS with exactly the same data
> types and bands as original data. Is it?
>
> As I said, I would like to fix QGIS to work smoothly also with your
> services. An easy workaround is to allow the max extent check to fail
> but it will still wait for server timeout. Well, if the server does
> not support full extent, it could return WCS error response
> immediately instead of timeout error.
>
> Another possibility would be to add an option "Disable max extent
> verification" but that is user unfriendly.
>
> Radim
>
>> Regards,
>>
>> Edric Keighan
>> President & CEO
>> CubeWerx Inc.
>>
>> Tel: 613-447-8306 Mobile
>>
>>
>> On 22/01/2013 3:43 AM, Radim Blazek wrote:
>>>
>>> On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
>>>>
>>>> Radim,
>>>>              This dataset is a huge collection of imagery encompassing an
>>>> area approximately 350 kilometres square. There are over 5000 images in the
>>>> dataset, with each image having a .5m pixel size and a file size of 293Mb
>>>> and I doubt that it is feasible to request a small sample image from the
>>>> entire range of the imagery. Is there some way that we can get QGIS to
>>>> request an image from a much smaller area (like the extent of the viewport)
>>>> to establish the validity of the dataset?
>>>
>>> Currently not. It would be necessary to disable the check for max
>>> extent. I am willing to add workarounds for various server
>>> particularities (the check for true max extent is one of them) but in
>>> this case I am not quite convinced. It is obviously server problem.
>>> The server offers capabilities which it cannot fulfill.
>>>
>>> I'll consider to allow to pass the extent check without error.
>>> However, the request will be done and it will wait timeout until it
>>> fails.
>>>
>>> I think that GDAL does not do that check, so you can create GDAL WCS
>>> XML file and open it as raster file.
>>>
>>> Radim
>>>
>>>> Ultimately we want to work with a dataset of .2m sized pixels and
>>>> individual images of 2.94Gb and four bands.
>>>>
>>>> Thanks for your help,
>>>>
>>>>           Bob Bruce
>>>>
>>>> Sent from my iPhone
>>>>
>>>> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>>
>>>> Frank,
>>>>
>>>> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
>>>> in QGIS it is used to get true extent. It may happen that a server is
>>>> misconfigured and reports larger extent in
>>>> GetCapabilities/DescribeCoverage and successive request inside that
>>>> extent but outside the real coverage extent would fail. Requesting the
>>>> whole extent and getting
>>>> its real extent is the only way AFAIK to get real extent.
>>>>
>>>> Radim
>>>>
>>>> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com>
>>>> wrote:
>>>>>
>>>>> Bruce,
>>>>>
>>>>> I think the 10x10 request is being made by GDAL's WCS driver in order
>>>>> to establish some details about the underlying WCS and it defaults to
>>>>> the whole extents.  It sucks fairly badly that such a request can't be
>>>>> done.  It might be possible to dummy in the information in the .wcs
>>>>> config file to avoid having to do that query.  Investigating.
>>>>>
>>>>> Best regards,
>>>>> Frank
>>>>>
>>>>>
>>>>>
>>>>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca>
>>>>> wrote:
>>>>>>
>>>>>> Radim,
>>>>>>      I have been looking at this again with two people from Cubewerx
>>>>>> and we find that QGIS is issuing this request:
>>>>>>
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>>>>
>>>>>> while the bounding box that I currently have displayed in QGIS is
>>>>>> roughly:
>>>>>>
>>>>>>
>>>>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>>>>
>>>>>> I need to get QGIS to restrict its request to this extent to work. Do
>>>>>> you know how I can do that?
>>>>>>
>>>>>> If I issue this request from my web browser:
>>>>>>
>>>>>>
>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>>>>
>>>>>> I actually get a tiff image that I can view that looks good and is
>>>>>> similar to what I would expect to see in QGIS. Now I need to get QGIS to
>>>>>> actually issue that request.
>>>>>>
>>>>>> Thanks,
>>>>>>        Bob Bruce
>>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>>>>> Sent: January-18-13 3:36 AM
>>>>>> To: Bruce, Bob (CON)
>>>>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>>>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho
>>>>>> Refresh WCS
>>>>>>
>>>>>> Hi again,
>>>>>>
>>>>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com>
>>>>>> wrote:
>>>>>>>
>>>>>>> I don't see the same problem here. GetCapabilities and
>>>>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>>>>> connection details dialog and it was logged on server but that is
>>>>>>> another issue?
>>>>>>>
>>>>>>> I have got another error however. DescribeCoverage is successfully
>>>>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>>>>> raster to get more info):
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>>>>
>>>>>>> and it fails on server side with:
>>>>>>>
>>>>>>> "Gateway Time-out
>>>>>>> The gateway did not receive a timely response from the upstream server
>>>>>>> or application."
>>>>>>>
>>>>>>> Because the request covers the whole extent, it could be that the
>>>>>>> raster is quite large and there are no overviews/pyramids ready on
>>>>>>> server, it starts to do resampling of the whole extent but it takes to
>>>>>>> much time?
>>>>>>
>>>>>> It really seems to be the problem, I have tried with smaller extent
>>>>>> and server sent a correct TIFF in response. In any case it takes very
>>>>>> long time.
>>>>>>
>>>>>> Radim
>>>>>>
>>>>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>>>>> usually printed requests which failed and in debug messages are
>>>>>>> printed all requests.
>>>>>>>
>>>>>>> Radim
>>>>>>>
>>>>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON)
>>>>>>> <Bob.Bruce at gov.mb.ca> wrote:
>>>>>>>>
>>>>>>>> I am having trouble using the WCS capability in version 1.9.0 code
>>>>>>>> revision f210668
>>>>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>>>>
>>>>>>>> QGIS version                    1.9.0-Master    QGIS code revision
>>>>>>>> f210668
>>>>>>>> Compiled against Qt             4.7.1                   Running
>>>>>>>> against Qt              4.7.1
>>>>>>>> Compiled against GDAL/OGR       1.9.2                   Running
>>>>>>>> against GDAL/OGR        1.9.2
>>>>>>>> GEOS Version                    3.3.5                   PostgreSQL
>>>>>>>> Client Version       8.3.10
>>>>>>>> SpatiaLite Version              3.0.1                   QWT Version
>>>>>>>> 5.2.1
>>>>>>>> PROJ.4 Version                  480                     QScintilla2
>>>>>>>> Version             2.6.2
>>>>>>>> This copy of QGIS writes debugging output.
>>>>>>>>
>>>>>>>> The URL that I am connecting to is:
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>>>>> The URL of the GetCapabilities request is:
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>>>>
>>>>>>>> According to Cubewerx, who is our imagery OGC WCS service provider,
>>>>>>>> their log shows both the GetCapabilities and GetCoverage requests present in
>>>>>>>> the same HTTP request while they should be done separately.
>>>>>>>>
>>>>>>>> This is the request that they are finding in their server log:
>>>>>>>>        2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>>> 205.200.189.2 to URL
>>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>>
>>>>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>>>>
>>>>>>>> Here is the error report that I am seeing in QGIS when I try and add
>>>>>>>> this data source to the project:
>>>>>>>>        WCS provider: Cannot calculate extent
>>>>>>>>        (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>>        Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%
>>>>>>>> 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>        (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>        Bob Bruce
>>>>>>>>
>>>>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>>>>> Sent: January-17-13 3:33 PM
>>>>>>>> To: Bruce, Bob (CON)
>>>>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>>>>
>>>>>>>> Bob,
>>>>>>>>
>>>>>>>> FYI...
>>>>>>>>
>>>>>>>> ekeighan at cubewerx.com wrote:
>>>>>>>>
>>>>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>>>>>
>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>
>>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>>> calculate the extent?
>>>>>>>> Looking through the server log, we see only the following related
>>>>>>>> request
>>>>>>>> present twice:
>>>>>>>>
>>>>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>>> 205.200.189.2 to URL
>>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------
>>>>>>>>
>>>>>>>> This doesn't make any sense, since it contains two different REQUEST
>>>>>>>> arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>>>>
>>>>>>>>
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>
>>>>>>>> but it almost seems as though it was entered improperly as:
>>>>>>>>
>>>>>>>>
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>>>>
>>>>>>>> The WCS request received from the client produces an error return,
>>>>>>>> since
>>>>>>>> the server has problems parsing the broken request:
>>>>>>>>
>>>>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1
>>>>>>>> http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>>>>> <Exception exceptionCode="MissingParameterValue"
>>>>>>>> locator="identifiers">
>>>>>>>>    <ExceptionText>CubeSERV: Cannot execute WCS request, raised in
>>>>>>>> Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>>>>    <ExceptionText>CubeSERV: Missing parameter "identifiers", raised
>>>>>>>> in throwMissingParamError() in file "cw_cgiparams.c" line
>>>>>>>> 797</ExceptionText>
>>>>>>>> </Exception>
>>>>>>>> </ExceptionReport>
>>>>>>>>
>>>>>>>> The first request from the client should be just a proper
>>>>>>>> GetCapabilities
>>>>>>>> request:
>>>>>>>>
>>>>>>>>
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>>>>
>>>>>>>> which returns the expected data.
>>>>>>>> -------------------------------------------------
>>>>>>>>
>>>>>>>> Regards,
>>>>>>>>
>>>>>>>> Edric
>>>>>>>>
>>>>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>>>>> Edric,
>>>>>>>>            I took another look at connecting QGIS to your WCS, using
>>>>>>>> a newer beta test version. It provided a mechanism to connect to the WCS and
>>>>>>>> it allowed me to try and add it to my map. When I tried to add it I got the
>>>>>>>> following message:
>>>>>>>>
>>>>>>>> WCS provider: Cannot calculate extent
>>>>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>> Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>
>>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>>> calculate the extent?
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>            Bob
>>>>>>>>
>>>>>>>>
>>>>>>>> *******************************************************************************************************************
>>>>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services
>>>>>>>> Management
>>>>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba
>>>>>>>> Conservation and Water Stewardship
>>>>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>>>>> **                                                  Winnipeg,
>>>>>>>> Manitoba, Canada, R3H 0W4
>>>>>>>> **
>>>>>>>> 49-54-31.85N,97-12-16.08W
>>>>>>>> **
>>>>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>>>>>
>>>>>>>> *******************************************************************************************************************
>>>>>>>>
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> Qgis-developer mailing list
>>>>>>>> Qgis-developer at lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>>> _______________________________________________
>>>>>> Qgis-developer mailing list
>>>>>> Qgis-developer at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>>
>>>>> ---------------------------------------+--------------------------------------
>>>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>>>> warmerdam at pobox.com
>>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>>
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Wed Jan 30 10:37:34 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 30 Jan 2013 19:37:34 +0100
Subject: [Qgis-developer] D&D fails after vector merge
Message-ID: <5109686E.8090304@faunalia.it>

Hi all.
I just noticed drag & drom into the DB Manager predictably crashes QGIS.
This happened after the merging of new vector changes.
Thanks.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From woklist at kyngchaos.com  Wed Jan 30 10:37:58 2013
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed, 30 Jan 2013 12:37:58 -0600
Subject: [Qgis-developer] split features takes a LONG time over network
In-Reply-To: <AD70AB1D-6C78-4D48-AFE1-518BA8E96685@kyngchaos.com>
References: <9B7FED9B-8B4E-40C4-BD21-99B5CC58F224@kyngchaos.com>
	<4BE43B70-B6A3-4F25-BB04-590884688F9C@kyngchaos.com>
	<201301282310.59039.vincent.ml@oslandia.com>
	<AD70AB1D-6C78-4D48-AFE1-518BA8E96685@kyngchaos.com>
Message-ID: <BDA7CA9B-11E1-4329-A53A-9A20A11B6224@kyngchaos.com>

Some more info: editing attributes in the attributes table is fast, even in quick succession, but applying a field calculator to a selection again appears to be downloading the whole table.

In all cases (today's and original issue) saving changes back to the database is fast.

On Jan 28, 2013, at 4:23 PM, William Kyngesburye wrote:

> On Jan 28, 2013, at 4:10 PM, Vincent Picavet wrote:
> 
>> Hi William,
>> 
>>> On Jan 28, 2013, at 3:05 PM, William Kyngesburye wrote:
>>>> I'm trying to split a selected line feature in a postgis database on the
>>>> network (not local machine).  The database layer is almost 4GiB (10M
>>>> records) and is spatially indexed.
>> 
>> Do you have a primary key defined on your PostGIS table ?
>> 
> yes
> 
>> Vincent
>> 
>>>> 
>>>> The feature is selected, it's not very large and I am zoomed to see about
>>>> half of it.  It took about a half hour to split, and during that time
>>>> was downloading a constant stream from the postgis server.  I'm guessing
>>>> it looked at every feature in the database.
>>>> 
>>>> bug? (didn't see anything in the tracker)  lack of optimization?  maybe
>>>> it was fixed in trunk?  Continuing to edit this database will be
>>>> impractical as it is in 1.8.
>>>> 
>>>> 
>>>> QGIS 1.8, OS X

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From cavallini at faunalia.it  Wed Jan 30 10:54:16 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 30 Jan 2013 19:54:16 +0100
Subject: [Qgis-developer] D&D fails after vector merge
In-Reply-To: <5109686E.8090304@faunalia.it>
References: <5109686E.8090304@faunalia.it>
Message-ID: <51096C58.4010804@faunalia.it>

Il 30/01/2013 19:37, Paolo Cavallini ha scritto:
> Hi all.
> I just noticed drag & drom into the DB Manager predictably crashes QGIS.
> This happened after the merging of new vector changes.
> Thanks.
>
BTW, could we release an intermediate standalone (like a tech preview,
use-at-your-own-risk)?
Currently for instance DB Manager does not work well neither on 1.8
(bugs has been fixed) nor in master.
I'm sure this happens for several other features as well, and the
release of 2.0 is probably several months away now.
I know I'm bothering, and several devs already objected to this, but
please think to our poor users.
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From marco.hugentobler at sourcepole.ch  Wed Jan 30 11:58:24 2013
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Wed, 30 Jan 2013 20:58:24 +0100
Subject: [Qgis-developer] Code maintainers
In-Reply-To: <5108EC34.20809@faunalia.it>
References: <5107AD08.6050809@faunalia.it>
	<20e68398317cf9f6f882ad1e80a85f66@carto.net>
	<5107BFF8.4050307@faunalia.it>
	<CA+3oMjv6vtT5tcXywS2CfqJXSYYvHDMnX3qVjVotpKNMPmiKYg@mail.gmail.com>
	<f1f2c68e300ab83c139371428b0048c0@carto.net>
	<20130129153631.GB31231@norbit.de>
	<5107EDC2.3000403@faunalia.it> <5107F3BA.6060406@sourcepole.ch>
	<510804A9.1000601@faunalia.it> <5108D7E0.3010307@sourcepole.ch>
	<5108EC34.20809@faunalia.it>
Message-ID: <51097B60.6020009@sourcepole.ch>

>agreed to keep it - the issue is where.
>other possibility: could we add a link to each developer's github commits?

Ok, if the whole organigram is moved to documentation, it makes sense to 
move the maintainers list with it.

Regards,
Marco

Am 30.01.2013 10:47, schrieb Paolo Cavallini:
> Il 30/01/2013 09:20, Marco Hugentobler ha scritto:
>> But are you removing the whole Project_Organigram page
>> (http://hub.qgis.org/wiki/quantum-gis/Project_Organigram) and list all
>> the persons in the organiram in the contributors page of the about
>> dialog then?
> I believe we agreed to move this kind of info to
> https://github.com/qgis/QGIS-Documentation
>>
>> Btw., the about box can also outdate. It is very unlikely that
>> contributors who are not active anymore remove their name from the
>> about box as a last commit...
> right - keeping the same info in two places can only aggravate the problem.
> however, keeping no longer active devs is not bad IMHO, as their code is
> mostly still alive on master.
>> We don't need to (unless the financial department brings in 3 Mio. $ /
>> year :-) ). It is already a huge gain for the project if there are
>> some maintained parts. Even if a maintainers page cannot reflect
>> reality perfectly (but nothing can do that), it motivates people to
>> keep code parts up-to-date (e.g. with recent API changes).
> right - could we perhaps add this info to the About box, e.g.
>
> Chuck Norris, general overview of the project and spaceship interface
>
>> The wiki cleanup is much appreciated from my side. Just I vote for
>> keeping the organigram page (including maintainers section).
> agreed to keep it - the issue is where.
> other possibility: could we add a link to each developer's github commits?
>
> all the best.
>


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From jef at norbit.de  Wed Jan 30 14:34:18 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed, 30 Jan 2013 23:34:18 +0100
Subject: [Qgis-developer] D&D fails after vector merge
In-Reply-To: <51096C58.4010804@faunalia.it>
References: <5109686E.8090304@faunalia.it> <51096C58.4010804@faunalia.it>
Message-ID: <20130130223418.GA26311@norbit.de>

Hi Paolo,

On Wed, 30. Jan 2013 at 19:54:16 +0100, Paolo Cavallini wrote:
> Il 30/01/2013 19:37, Paolo Cavallini ha scritto:
> > I just noticed drag & drom into the DB Manager predictably crashes QGIS.
> > This happened after the merging of new vector changes.

Is there a ticket about that?   If so, I think it can be closed now.

> BTW, could we release an intermediate standalone (like a tech preview,
> use-at-your-own-risk)?

Of the currently unstable state?  What should that be good for?  Anyone
interested in the current state should go with the nightly builds and test and
report bugs.

We should concentrate on finishing the migration to the new api instead -
especially the python parts (note that I'm using "we" although I'm probably
won't have much part in the latter part).


J?rgen 

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From robert at szczepanek.pl  Wed Jan 30 14:47:45 2013
From: robert at szczepanek.pl (Robert Szczepanek)
Date: Wed, 30 Jan 2013 23:47:45 +0100
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <5107B0AC.9030104@gmx.ch>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
	<51079C28.6090906@gmx.ch> <5107B0AC.9030104@gmx.ch>
Message-ID: <5109A311.7010507@szczepanek.pl>

Hi Matthias,

Here it is:
http://trac.osgeo.org/osgeo/changeset/9681/

Concerning your request for Expression + Selection with additional 
plus/minus/intersection elements.
I'm afraid of making icons with too much information.
Perhaps we could make it in this (context) order:
expression-select
select-add (not ready yet, but similar to [2])
select-remove (not ready yet)

This is very general problem. In different places we could just use '+' 
or '-' icons. What do you think (Matthias, Larry)?

regards,
Robert

[2] 
http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/select-cancel.png

On 29.01.2013 12:21, Matthias Kuhn wrote:

(...)
> Pull request #406 uses a QgsExpressionBuilder to alter the selection [1]
> My current work on the attribute editor offers to use a
> QgsExpressionBuilder in different places. It would be nice to have
> appropriate icons to give the user some hints about what he is going to
> initiate with a click on that button.
>
> I imagine a combination of this icon together with other icons:
> * Expression + Selection (Maybe even different icons with a plus, minus,
> intersect)
> * Expression + Filter
> * Expression + Preview (It's about a feature identification string.
> Maybe ABC or something...)
>
> [1]: https://github.com/qgis/Quantum-GIS/pull/406
>
> Regards,
> Matthias
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>


From larrys at dakotacarto.com  Wed Jan 30 17:42:13 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Wed, 30 Jan 2013 18:42:13 -0700
Subject: [Qgis-developer] Labeling: data-defined fields shifted after
 new vector API?
In-Reply-To: <1359379071328-5030276.post@n6.nabble.com>
References: <19f0120ac55dc536892741128fc5333e@carto.net>
	<CAC2XbFeMpfguXKkbYXg5=2b88Y90hkgutZ224Z=BoaXPyy-HXg@mail.gmail.com>
	<b7643fa1ccbb5081cf94f052a1509372@carto.net>
	<1359379071328-5030276.post@n6.nabble.com>
Message-ID: <CA+nQOR-4MP+XN=pJ+aiYCQK=Z7tmWC8+SxP-6x15Aq_K_mg77A@mail.gmail.com>

Hi,

On Mon, Jan 28, 2013 at 6:17 AM, R?gis Haubourg <
regis.haubourg at eau-adour-garonne.fr> wrote:

> martin Dobias wrote
> > I have briefly looked into the code and it seems that new labeling
> >> stores data-defined attributes by index instead of name. If so,
> >> that's
> >> the source of the problem and it should be changed to read/write
> >> names
>
> Hi all,
> +1 for switching storage of data defined fields with names and not indexes.
> It was a limit I previously pointed and this is really weak if data field
> order change. But we need retrocompatibility with old projects.  Does that
> sounds possible?
> r?gis
>

So, is anyone working on this? I can devote some time this coming weekend.
Pretty important to fix this, then make it compatible with < 2.0 projects.

Similarly, data defined properties are only a 1-to-1 relationship
(currently property-to-field index), with no defined relationship between
themselves, the QgsPalLayerSettings (if any) to override, the associated
QgsField, any defined QgsExpression, or any assigned 'buddy' gui elements.
Nathan suggested a data binding class that could possibly be inherited by
gui classes to make utilizing data defined overrides (not just for
labeling) within the app easier and more abstracted. I think it is worth
pursuing.

On another note (and yet a bunch more refactoring), most of the
QgsPalLayerSettings are directly accessed public properties. These should
probably be switched over to some form of container object (QMap?) no?

Regards,

Larry



> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Labeling-data-defined-fields-shifted-after-new-vector-API-tp5030238p5030276.html
> Sent from the Quantum GIS - Developer mailing list archive at Nabble.com.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130130/d6f497da/attachment.html>

From JPalmer at linz.govt.nz  Wed Jan 30 22:41:14 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 31 Jan 2013 19:41:14 +1300
Subject: [Qgis-developer] State of QGIS WFS provider
Message-ID: <316886599.1266188.1359614663271.JavaMail.root@s-101-LINZ>

What peoples thoughts about the state of this provider. The currently limitations I see currently with it is:

poor handling of larges datasets (e.g http://hub.qgis.org/issues/4604)
doesn't support WFS 1.1 or WFS 2.0 (or GML payloads that go along with those versions)
doesn't support setSubsetString.
poor operator support for filters e.g no LIKE or spatial stuff
Doesn't query GetCapabilities to determine supported functions or operators.
Poor user connection UI (i have a patch to improve this to using QSortFilterProxyModel)

I wondering if one way to deal to a lot of these issues is to use the OGR WFS implementation with QGIS. As of OGR 1.9 its support for WFS is very good. Benefits are:

common code (worked on by more people)
handles filters better
handles talking to different implementations of the standards better (e.g mapserver, Geoserver, deegree)
handles fetching larger datasets better e.g with paging support etc

Of course continuing to develop the current driver has the advantage of tighter integration with the QT framework and QGIS. Such as utilising QT network and proxy management.

Cheers,
Jeremy

________________________________
This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130131/368f35e7/attachment.html>

From matthias.kuhn at gmx.ch  Wed Jan 30 22:56:37 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 31 Jan 2013 07:56:37 +0100
Subject: [Qgis-developer] split features takes a LONG time over network
In-Reply-To: <BDA7CA9B-11E1-4329-A53A-9A20A11B6224@kyngchaos.com>
References: <9B7FED9B-8B4E-40C4-BD21-99B5CC58F224@kyngchaos.com>
	<4BE43B70-B6A3-4F25-BB04-590884688F9C@kyngchaos.com>
	<201301282310.59039.vincent.ml@oslandia.com>
	<AD70AB1D-6C78-4D48-AFE1-518BA8E96685@kyngchaos.com>
	<BDA7CA9B-11E1-4329-A53A-9A20A11B6224@kyngchaos.com>
Message-ID: <510A15A5.40407@gmx.ch>

Hi William,

On 01/30/2013 07:37 PM, William Kyngesburye wrote:
> Some more info: editing attributes in the attributes table is fast, even in quick succession, but applying a field calculator to a selection again appears to be downloading the whole table.
The attribute table does cache features [1], but the cache is internal 
to the attribute table, so the calculator is not able to make use of it.
My current work includes separating the feature cache from the attribute 
editor. This won't immediately speed up the calculator but it may be 
included there as well.
A couple of days ago, there already was a discussion in the "new vector 
api" thread on this list about caching and before starting to work on 
this change this discussion would better be brought up again, to decide 
on some more details (e.g. vectorlayercache vs. dataprovidercache).l

[1] There is a setting about how many, defaults to 10000. In case the 
capability "feature by id" is disabled it will even cache all
>
> In all cases (today's and original issue) saving changes back to the database is fast.
>
> On Jan 28, 2013, at 4:23 PM, William Kyngesburye wrote:
>
>> On Jan 28, 2013, at 4:10 PM, Vincent Picavet wrote:
>>
>>> Hi William,
>>>
>>>> On Jan 28, 2013, at 3:05 PM, William Kyngesburye wrote:
>>>>> I'm trying to split a selected line feature in a postgis database on the
>>>>> network (not local machine).  The database layer is almost 4GiB (10M
>>>>> records) and is spatially indexed.
>>> Do you have a primary key defined on your PostGIS table ?
>>>
>> yes
>>
>>> Vincent
>>>
>>>>> The feature is selected, it's not very large and I am zoomed to see about
>>>>> half of it.  It took about a half hour to split, and during that time
>>>>> was downloading a constant stream from the postgis server.  I'm guessing
>>>>> it looked at every feature in the database.
>>>>>
>>>>> bug? (didn't see anything in the tracker)  lack of optimization?  maybe
>>>>> it was fixed in trunk?  Continuing to edit this database will be
>>>>> impractical as it is in 1.8.
>>>>>
>>>>>
>>>>> QGIS 1.8, OS X
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
>
> - Marvin
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
Matthias


From matthias.kuhn at gmx.ch  Wed Jan 30 23:17:12 2013
From: matthias.kuhn at gmx.ch (Matthias Kuhn)
Date: Thu, 31 Jan 2013 08:17:12 +0100
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <5109A311.7010507@szczepanek.pl>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
	<51079C28.6090906@gmx.ch> <5107B0AC.9030104@gmx.ch>
	<5109A311.7010507@szczepanek.pl>
Message-ID: <510A1A78.6080802@gmx.ch>

Hi Robert

On 01/30/2013 11:47 PM, Robert Szczepanek wrote:
> Hi Matthias,
>
> Here it is:
> http://trac.osgeo.org/osgeo/changeset/9681/
That was fast, thanks a lot.
>
> Concerning your request for Expression + Selection with additional 
> plus/minus/intersection elements.
> I'm afraid of making icons with too much information.
> Perhaps we could make it in this (context) order:
> expression-select
> select-add (not ready yet, but similar to [2])
> select-remove (not ready yet)
>
> This is very general problem. In different places we could just use 
> '+' or '-' icons. What do you think (Matthias, Larry)?
I understand your concerns. Especially for small icons.
In this case, the context can actually be used to skip the expression 
icon (the user is in the expression builder dialog) and a 
select-add/select-remove/select-intersect button will be sufficient. So 
I'd be happy with your idea.

Could you also commit a standalone expression builder icon (to use as 
such and as a basis to combine it with other tools)?

>
> regards,
> Robert
>
> [2] 
> http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/select-cancel.png
>
Regards
Matthias

From radim.blazek at gmail.com  Wed Jan 30 23:19:14 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Thu, 31 Jan 2013 08:19:14 +0100
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
	WCS
In-Reply-To: <DC49060A7E430243BF2D4090200661931AD82F0394@OC1EX201.ME.MBGOV.CA>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
	<CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
	<50FEC2E9.6080401@cubewerx.com>
	<CAEMrtYpimrcXFjBmiwx=ByKY_gV0YVu_=s3yOeBXLaxhGTeHtQ@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3D1A1DF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYorgZNop1fkTvBhFJsD5gxJwBMxOfMaSCxQ0E+UJB6eJg@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD82F0394@OC1EX201.ME.MBGOV.CA>
Message-ID: <CAEMrtYpTumg0yP1NheLBUYLUX=4OTyao8SrfrHFdOoXPh_t=uw@mail.gmail.com>

The problem is server side. I have already done what was acceptable
(already a bit over reasonable limit) in QGIS. We cannot mess up QGIS
code with "if server = cubewerx.com" workarounds. If they are not
willing to fix the server, you can make a server mirror with
additional extent check. The following CGI script works smoothly for
me:

#!/usr/bin/python
import os, sys, cgi, urllib2 as urllib
form = cgi.FieldStorage()
if form.getvalue("REQUEST") == "GetCoverage":
  (xmin, ymin, xmax, ymax) = map( float, form.getvalue("BBOX").split(",") )
  thresh = 0.1 if form.getvalue("CRS") == "EPSG:4326" else 10000
  if xmax-xmin > thresh or ymax-ymin > thresh:
    print "Content-type: text/xml"
    print ""
    print """<?xml version='1.0' encoding="ISO-8859-1" ?>
              <ServiceExceptionReport>
              <ServiceException>Too large extent</ServiceException>
              </ServiceExceptionReport>"""
    sys.exit(0)
url = "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?" +
os.environ["QUERY_STRING"]
page =  urllib.urlopen( url )
print "Content-type: %s " % page.info().gettype()
print ""
print(page.read())

just put it as cubewerx-mirror into apache cgi-bin directory and you
can access the WCS with URL
http://your.server.com/cgi-bin/cubewerx-mirror?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
Don't forget to check "Ignore GetCoverage URI reported in capabilities".
If you are behind firewall you have to place it on a server outside or
you have to modify the script to go through the proxy (no idea how).

Radim


On Wed, Jan 30, 2013 at 6:29 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> Radim,
>       I have now been able to get this to work. I have set the network timeout to 10ms and this shortened the timeouts so that QGIS doesn't wait long before there is some responses. I am working inside of a corporate firewall and proxy server and every time that there is a timeout then there is a prompt for the proxy login information, I just click the OK button and QGIS attempts a connection again. In all I think that I got 7 prompts for login information before it proceeded with retrieving the image for the viewing area. Anything that you could do to make QGIS work smoother with this imagery source would be much appreciated.
>
> I have attached a screen capture of QGIS displaying this imagery source with our indoor running route superimposed upon it.
>
> Thanks,
>         Bob
>
> -----Original Message-----
> From: Radim Blazek [mailto:radim.blazek at gmail.com]
> Sent: January-25-13 3:54 AM
> To: Bruce, Bob (CON)
> Cc: ekeighan at cubewerx.com; Qgis-Developer; Bob Bruce
> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> On Wed, Jan 23, 2013 at 10:19 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>> Radim,
>>         Would you be willing to add an option to "Disable max extent verification" - I believe that would solve
>> all of our problems with connecting to this very large image store. If you do so then please let me know and I will
>> be happy to test it.
>
> That option would be the worst end for me. I have commited in f6806a9
> a fix which allows to continue even if the extent verification fails.
> Unfortunately other problems appeared immediately. Raster layer in
> legend has 32x32 icon covering the whole extent. Another larger
> thumbnail covering the whole extent is used in raster properties. I
> think that the server must be fixed at least so that if the requested
> extent is too large it responds immediately, reporting an error.
>
> So, it works, but you have to wait for few timeouts (don't forget to
> set network timeout option to something reasonable), the thumbnail in
> legend and properties are black, until you zoom-in enough you get
> black rectangle rendered.
>
> Radim
>
>> Thanks,
>>         Bob Bruce
>>
>> -----Original Message-----
>> From: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] On Behalf Of Radim Blazek
>> Sent: January-23-13 3:07 AM
>> To: ekeighan at cubewerx.com
>> Cc: Qgis-Developer; Bob Bruce
>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>
>> On Tue, Jan 22, 2013 at 5:48 PM, ekeighan <ekeighan at cubewerx.com> wrote:
>>> Radim,
>>>
>>> Our WCS was designed to be used as per the intent of the OGC WCS
>>> specification for extracting data, not for browsing it. The OGC WMS or WMTS
>>> is intended to be used for browsing.
>>
>> Just for curiosity, can you point me to an OGC document supporting
>> this interpretation? In any case, my aim is not to defend how QGIS
>> works pointing to WCS specification but to get it working in most
>> cases. If you insist on that interpretation we have to take it as
>> reality.
>>
>>> But we admit that the WCS spec is deficient in that it does not describe the
>>> raster-data type sufficiently nor in a standard way.  E.g., it doesn't tell
>>> you that the raster data has five channels of 16-bit unsigned integers
>>> representing Red, Green, Blue, Infrared and Alpha channels.  This is why WCS
>>> client applications tend to request a sample image.
>>
>> Indeed, also no data values ...
>>
>>> GDAL does this in a more friendly way by requesting a small 2x2-pixel sample
>>> image at the resolution of the source data.  This causes no problems for a
>>> WCS organized to extract data at the source resolution. We suggest that QGIS
>>> use the same method to avoid unnecessary problems with our and other
>>> servers.
>>
>> QGIS does something similar, i.e. 6x3 pixels on original resolution.
>> As I already wrote twice, the 10x10 pixels request for the whole
>> extent is done to verify a real extent of the coverage. Some servers
>> may report wrong larger extent in capabilities and requests outside
>> the real extent fail. If I disable this additional check, we get it
>> working with CubeWerx, but break it for other servers and that is not
>> the way ahead.
>>
>>> Our WCS is organized to always access the raw source data in order to
>>> produce the best image possible for analysis.  However, this approach breaks
>>> down catastrophically in the QGIS case where your request translates into
>>> accessing tens of thousands of source images covering multiple terabytes of
>>> data that needs to be processed to fulfill the 10x10 request. Many
>>> developers are familiar with this particularity of the WCS (for data
>>> extraction at source resolution) and use it in tandem with a WMS or WMTS for
>>> views and only access the WCS when a download at source resolution is
>>> required, typically for analysis.
>>
>> This interpretation of the WCS standard degrades it to a richer
>> download application. I believe that WCS has much more potential.
>> Maybe the possibilities shifted a bit during the years with broadband
>> connections and mobile applications?
>>
>>> In order to support a more flexible access to the WCS we were thinking of
>>> modifying our access method when zoomed out sufficiently. Source-overview
>>> files and tile data are available which make WMS and WMTS access very
>>> efficient. CubeWerx have these products and our clients are of course
>>> deploying them in addition to a WCS but there can be a problem with both
>>> approaches in that the secondary data may not match the exact raster data
>>> type of the source data. E.g., the tiles are rendered for common maps which
>>> use 3-channel 8-bit RGB, but the source data might be 4-channel 16-bit
>>> RGB+Infrared.
>>
>> But it should not be a problem (apart computational time)  to create
>> lower resolution overviews also for WCS with exactly the same data
>> types and bands as original data. Is it?
>>
>> As I said, I would like to fix QGIS to work smoothly also with your
>> services. An easy workaround is to allow the max extent check to fail
>> but it will still wait for server timeout. Well, if the server does
>> not support full extent, it could return WCS error response
>> immediately instead of timeout error.
>>
>> Another possibility would be to add an option "Disable max extent
>> verification" but that is user unfriendly.
>>
>> Radim
>>
>>> Regards,
>>>
>>> Edric Keighan
>>> President & CEO
>>> CubeWerx Inc.
>>>
>>> Tel: 613-447-8306 Mobile
>>>
>>>
>>> On 22/01/2013 3:43 AM, Radim Blazek wrote:
>>>>
>>>> On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
>>>>>
>>>>> Radim,
>>>>>              This dataset is a huge collection of imagery encompassing an
>>>>> area approximately 350 kilometres square. There are over 5000 images in the
>>>>> dataset, with each image having a .5m pixel size and a file size of 293Mb
>>>>> and I doubt that it is feasible to request a small sample image from the
>>>>> entire range of the imagery. Is there some way that we can get QGIS to
>>>>> request an image from a much smaller area (like the extent of the viewport)
>>>>> to establish the validity of the dataset?
>>>>
>>>> Currently not. It would be necessary to disable the check for max
>>>> extent. I am willing to add workarounds for various server
>>>> particularities (the check for true max extent is one of them) but in
>>>> this case I am not quite convinced. It is obviously server problem.
>>>> The server offers capabilities which it cannot fulfill.
>>>>
>>>> I'll consider to allow to pass the extent check without error.
>>>> However, the request will be done and it will wait timeout until it
>>>> fails.
>>>>
>>>> I think that GDAL does not do that check, so you can create GDAL WCS
>>>> XML file and open it as raster file.
>>>>
>>>> Radim
>>>>
>>>>> Ultimately we want to work with a dataset of .2m sized pixels and
>>>>> individual images of 2.94Gb and four bands.
>>>>>
>>>>> Thanks for your help,
>>>>>
>>>>>           Bob Bruce
>>>>>
>>>>> Sent from my iPhone
>>>>>
>>>>> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>>>
>>>>> Frank,
>>>>>
>>>>> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
>>>>> in QGIS it is used to get true extent. It may happen that a server is
>>>>> misconfigured and reports larger extent in
>>>>> GetCapabilities/DescribeCoverage and successive request inside that
>>>>> extent but outside the real coverage extent would fail. Requesting the
>>>>> whole extent and getting
>>>>> its real extent is the only way AFAIK to get real extent.
>>>>>
>>>>> Radim
>>>>>
>>>>> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com>
>>>>> wrote:
>>>>>>
>>>>>> Bruce,
>>>>>>
>>>>>> I think the 10x10 request is being made by GDAL's WCS driver in order
>>>>>> to establish some details about the underlying WCS and it defaults to
>>>>>> the whole extents.  It sucks fairly badly that such a request can't be
>>>>>> done.  It might be possible to dummy in the information in the .wcs
>>>>>> config file to avoid having to do that query.  Investigating.
>>>>>>
>>>>>> Best regards,
>>>>>> Frank
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca>
>>>>>> wrote:
>>>>>>>
>>>>>>> Radim,
>>>>>>>      I have been looking at this again with two people from Cubewerx
>>>>>>> and we find that QGIS is issuing this request:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>>>>>
>>>>>>> while the bounding box that I currently have displayed in QGIS is
>>>>>>> roughly:
>>>>>>>
>>>>>>>
>>>>>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>>>>>
>>>>>>> I need to get QGIS to restrict its request to this extent to work. Do
>>>>>>> you know how I can do that?
>>>>>>>
>>>>>>> If I issue this request from my web browser:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>>>>>
>>>>>>> I actually get a tiff image that I can view that looks good and is
>>>>>>> similar to what I would expect to see in QGIS. Now I need to get QGIS to
>>>>>>> actually issue that request.
>>>>>>>
>>>>>>> Thanks,
>>>>>>>        Bob Bruce
>>>>>>>
>>>>>>> -----Original Message-----
>>>>>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>>>>>> Sent: January-18-13 3:36 AM
>>>>>>> To: Bruce, Bob (CON)
>>>>>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>>>>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho
>>>>>>> Refresh WCS
>>>>>>>
>>>>>>> Hi again,
>>>>>>>
>>>>>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com>
>>>>>>> wrote:
>>>>>>>>
>>>>>>>> I don't see the same problem here. GetCapabilities and
>>>>>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>>>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>>>>>> connection details dialog and it was logged on server but that is
>>>>>>>> another issue?
>>>>>>>>
>>>>>>>> I have got another error however. DescribeCoverage is successfully
>>>>>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>>>>>> raster to get more info):
>>>>>>>>
>>>>>>>>
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>>>>>
>>>>>>>> and it fails on server side with:
>>>>>>>>
>>>>>>>> "Gateway Time-out
>>>>>>>> The gateway did not receive a timely response from the upstream server
>>>>>>>> or application."
>>>>>>>>
>>>>>>>> Because the request covers the whole extent, it could be that the
>>>>>>>> raster is quite large and there are no overviews/pyramids ready on
>>>>>>>> server, it starts to do resampling of the whole extent but it takes to
>>>>>>>> much time?
>>>>>>>
>>>>>>> It really seems to be the problem, I have tried with smaller extent
>>>>>>> and server sent a correct TIFF in response. In any case it takes very
>>>>>>> long time.
>>>>>>>
>>>>>>> Radim
>>>>>>>
>>>>>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>>>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>>>>>> usually printed requests which failed and in debug messages are
>>>>>>>> printed all requests.
>>>>>>>>
>>>>>>>> Radim
>>>>>>>>
>>>>>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON)
>>>>>>>> <Bob.Bruce at gov.mb.ca> wrote:
>>>>>>>>>
>>>>>>>>> I am having trouble using the WCS capability in version 1.9.0 code
>>>>>>>>> revision f210668
>>>>>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>>>>>
>>>>>>>>> QGIS version                    1.9.0-Master    QGIS code revision
>>>>>>>>> f210668
>>>>>>>>> Compiled against Qt             4.7.1                   Running
>>>>>>>>> against Qt              4.7.1
>>>>>>>>> Compiled against GDAL/OGR       1.9.2                   Running
>>>>>>>>> against GDAL/OGR        1.9.2
>>>>>>>>> GEOS Version                    3.3.5                   PostgreSQL
>>>>>>>>> Client Version       8.3.10
>>>>>>>>> SpatiaLite Version              3.0.1                   QWT Version
>>>>>>>>> 5.2.1
>>>>>>>>> PROJ.4 Version                  480                     QScintilla2
>>>>>>>>> Version             2.6.2
>>>>>>>>> This copy of QGIS writes debugging output.
>>>>>>>>>
>>>>>>>>> The URL that I am connecting to is:
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>>>>>> The URL of the GetCapabilities request is:
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>>>>>
>>>>>>>>> According to Cubewerx, who is our imagery OGC WCS service provider,
>>>>>>>>> their log shows both the GetCapabilities and GetCoverage requests present in
>>>>>>>>> the same HTTP request while they should be done separately.
>>>>>>>>>
>>>>>>>>> This is the request that they are finding in their server log:
>>>>>>>>>        2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>>>> 205.200.189.2 to URL
>>>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>>>
>>>>>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>>>>>
>>>>>>>>> Here is the error report that I am seeing in QGIS when I try and add
>>>>>>>>> this data source to the project:
>>>>>>>>>        WCS provider: Cannot calculate extent
>>>>>>>>>        (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>>>        Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%
>>>>>>>>> 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>>        (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>>        Bob Bruce
>>>>>>>>>
>>>>>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>>>>>> Sent: January-17-13 3:33 PM
>>>>>>>>> To: Bruce, Bob (CON)
>>>>>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>>>>>
>>>>>>>>> Bob,
>>>>>>>>>
>>>>>>>>> FYI...
>>>>>>>>>
>>>>>>>>> ekeighan at cubewerx.com wrote:
>>>>>>>>>
>>>>>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>>>>>>
>>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>>
>>>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>>>> calculate the extent?
>>>>>>>>> Looking through the server log, we see only the following related
>>>>>>>>> request
>>>>>>>>> present twice:
>>>>>>>>>
>>>>>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>>>> 205.200.189.2 to URL
>>>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------
>>>>>>>>>
>>>>>>>>> This doesn't make any sense, since it contains two different REQUEST
>>>>>>>>> arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>>
>>>>>>>>> but it almost seems as though it was entered improperly as:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>>>>>
>>>>>>>>> The WCS request received from the client produces an error return,
>>>>>>>>> since
>>>>>>>>> the server has problems parsing the broken request:
>>>>>>>>>
>>>>>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1
>>>>>>>>> http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>>>>>> <Exception exceptionCode="MissingParameterValue"
>>>>>>>>> locator="identifiers">
>>>>>>>>>    <ExceptionText>CubeSERV: Cannot execute WCS request, raised in
>>>>>>>>> Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>>>>>    <ExceptionText>CubeSERV: Missing parameter "identifiers", raised
>>>>>>>>> in throwMissingParamError() in file "cw_cgiparams.c" line
>>>>>>>>> 797</ExceptionText>
>>>>>>>>> </Exception>
>>>>>>>>> </ExceptionReport>
>>>>>>>>>
>>>>>>>>> The first request from the client should be just a proper
>>>>>>>>> GetCapabilities
>>>>>>>>> request:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>>>>>
>>>>>>>>> which returns the expected data.
>>>>>>>>> -------------------------------------------------
>>>>>>>>>
>>>>>>>>> Regards,
>>>>>>>>>
>>>>>>>>> Edric
>>>>>>>>>
>>>>>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>>>>>> Edric,
>>>>>>>>>            I took another look at connecting QGIS to your WCS, using
>>>>>>>>> a newer beta test version. It provided a mechanism to connect to the WCS and
>>>>>>>>> it allowed me to try and add it to my map. When I tried to add it I got the
>>>>>>>>> following message:
>>>>>>>>>
>>>>>>>>> WCS provider: Cannot calculate extent
>>>>>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>>> Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>>
>>>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>>>> calculate the extent?
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>>            Bob
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> *******************************************************************************************************************
>>>>>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services
>>>>>>>>> Management
>>>>>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba
>>>>>>>>> Conservation and Water Stewardship
>>>>>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>>>>>> **                                                  Winnipeg,
>>>>>>>>> Manitoba, Canada, R3H 0W4
>>>>>>>>> **
>>>>>>>>> 49-54-31.85N,97-12-16.08W
>>>>>>>>> **
>>>>>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>>>>>>
>>>>>>>>> *******************************************************************************************************************
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> Qgis-developer mailing list
>>>>>>>>> Qgis-developer at lists.osgeo.org
>>>>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Qgis-developer mailing list
>>>>>>> Qgis-developer at lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>>
>>>>>> ---------------------------------------+--------------------------------------
>>>>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>>>>> warmerdam at pobox.com
>>>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>>>
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Thu Jan 31 00:11:01 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 31 Jan 2013 09:11:01 +0100
Subject: [Qgis-developer] D&D fails after vector merge
In-Reply-To: <20130130223418.GA26311@norbit.de>
References: <5109686E.8090304@faunalia.it> <51096C58.4010804@faunalia.it>
	<20130130223418.GA26311@norbit.de>
Message-ID: <510A2715.5000805@faunalia.it>

Il 30/01/2013 23:34, J?rgen E. Fischer ha scritto:
> Is there a ticket about that? If so, I think it can be closed now. 

Thanks a lot for that. No ticket, sorry, I'm on a course, very little
time now.
> Of the currently unstable state?

Not, of the pre-vector-merging.
> What should that be good for?  Anyone
> interested in the current state should go with the nightly builds and test and
> report bugs.

There are many users that are forced to use >1.8 (e.g. my case of
yesterday: 1.8 DB Manager has bugs in 1.8, preventing the shapefile
import in many cases), but still have to work, and cannot cope with
daily breakages. A tech preview standalone installer would be good for them.
>
> We should concentrate on finishing the migration to the new api instead -
>

agreed fully - my suggestion hods true only if making a standalone is a
very quick thing, as I believe (is the installnsis script still in good
shape? probably I should try, but see above).

Thanks again.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From jef at norbit.de  Thu Jan 31 00:53:03 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 31 Jan 2013 09:53:03 +0100
Subject: [Qgis-developer] D&D fails after vector merge
In-Reply-To: <510A2715.5000805@faunalia.it>
References: <5109686E.8090304@faunalia.it> <51096C58.4010804@faunalia.it>
	<20130130223418.GA26311@norbit.de> <510A2715.5000805@faunalia.it>
Message-ID: <20130131085303.GA31361@norbit.de>

Hi Paolo,

On Thu, 31. Jan 2013 at 09:11:01 +0100, Paolo Cavallini wrote:
> > Of the currently unstable state?
 
> Not, of the pre-vector-merging.

The last osgeo4w package before the new_vector_api merge (1.9.0-174) is still
available in osgeo4w.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From cavallini at faunalia.it  Thu Jan 31 01:24:23 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 31 Jan 2013 10:24:23 +0100
Subject: [Qgis-developer] BountySource
Message-ID: <510A3847.7090301@faunalia.it>

Hi all.
This seems an interesting way of having bugs fixed:
https://www.bountysource.com/#faq/
Unfortunately, it seems to work only on GitHub bugs for now.
Looks quite simple, they take 10% of the bounty, fair enough I think if
they work well.
Opinions?
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From radim.blazek at gmail.com  Thu Jan 31 01:24:36 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Thu, 31 Jan 2013 10:24:36 +0100
Subject: [Qgis-developer] State of QGIS WFS provider
In-Reply-To: <316886599.1266188.1359614663271.JavaMail.root@s-101-LINZ>
References: <316886599.1266188.1359614663271.JavaMail.root@s-101-LINZ>
Message-ID: <CAEMrtYoOWi1wcGsO4+gtLB9gvKNS9X6SR5aR6grh653HT482qg@mail.gmail.com>

On Thu, Jan 31, 2013 at 7:41 AM, Jeremy Palmer <JPalmer at linz.govt.nz> wrote:
> What peoples thoughts about the state of this provider. The currently
> limitations I see currently with it is:
>
> poor handling of larges datasets (e.g http://hub.qgis.org/issues/4604)
> doesn't support WFS 1.1 or WFS 2.0 (or GML payloads that go along with those
> versions)
> doesn't support setSubsetString.
> poor operator support for filters e.g no LIKE or spatial stuff
> Doesn't query GetCapabilities to determine supported functions or operators.
> Poor user connection UI (i have a patch to improve this to using
> QSortFilterProxyModel)
>
> I wondering if one way to deal to a lot of these issues is to use the OGR
> WFS implementation with QGIS. As of OGR 1.9 its support for WFS is very
> good. Benefits are:
>
> common code (worked on by more people)
> handles filters better
> handles talking to different implementations of the standards better (e.g
> mapserver, Geoserver, deegree)
> handles fetching larger datasets better e.g with paging support etc
>
> Of course continuing to develop the current driver has the advantage of
> tighter integration with the QT framework and QGIS. Such as utilising QT
> network and proxy management.

Just a note, not directly related to WFS. I am extending QgsWFSData
(GML parser) to be used for WMS GetFeatureInfo in GML format. The
changes are not targeted on performance however (getting schema from
XSD, guessing schema from GML). Just to say that there will be another
provider using the parser.

Radim

> Cheers,
> Jeremy
>
> ________________________________
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800 665
> 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no
> responsibility for changes to this email, or for any attachments, after its
> transmission from LINZ. Thank You.
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>

From rldhont at gmail.com  Thu Jan 31 01:28:37 2013
From: rldhont at gmail.com (rldhont)
Date: Thu, 31 Jan 2013 10:28:37 +0100
Subject: [Qgis-developer] State of QGIS WFS provider
In-Reply-To: <CAEMrtYoOWi1wcGsO4+gtLB9gvKNS9X6SR5aR6grh653HT482qg@mail.gmail.com>
References: <316886599.1266188.1359614663271.JavaMail.root@s-101-LINZ>
	<CAEMrtYoOWi1wcGsO4+gtLB9gvKNS9X6SR5aR6grh653HT482qg@mail.gmail.com>
Message-ID: <510A3945.4020203@gmail.com>

There is also a GML2 parser in the QgsGeometry Class. The method is 
fromGML2 and is static.

Le 31/01/2013 10:24, Radim Blazek a ?crit :
> On Thu, Jan 31, 2013 at 7:41 AM, Jeremy Palmer <JPalmer at linz.govt.nz> wrote:
>> What peoples thoughts about the state of this provider. The currently
>> limitations I see currently with it is:
>>
>> poor handling of larges datasets (e.g http://hub.qgis.org/issues/4604)
>> doesn't support WFS 1.1 or WFS 2.0 (or GML payloads that go along with those
>> versions)
>> doesn't support setSubsetString.
>> poor operator support for filters e.g no LIKE or spatial stuff
>> Doesn't query GetCapabilities to determine supported functions or operators.
>> Poor user connection UI (i have a patch to improve this to using
>> QSortFilterProxyModel)
>>
>> I wondering if one way to deal to a lot of these issues is to use the OGR
>> WFS implementation with QGIS. As of OGR 1.9 its support for WFS is very
>> good. Benefits are:
>>
>> common code (worked on by more people)
>> handles filters better
>> handles talking to different implementations of the standards better (e.g
>> mapserver, Geoserver, deegree)
>> handles fetching larger datasets better e.g with paging support etc
>>
>> Of course continuing to develop the current driver has the advantage of
>> tighter integration with the QT framework and QGIS. Such as utilising QT
>> network and proxy management.
> Just a note, not directly related to WFS. I am extending QgsWFSData
> (GML parser) to be used for WMS GetFeatureInfo in GML format. The
> changes are not targeted on performance however (getting schema from
> XSD, guessing schema from GML). Just to say that there will be another
> provider using the parser.
>
> Radim
>
>> Cheers,
>> Jeremy
>>
>> ________________________________
>> This message contains information, which is confidential and may be subject
>> to legal privilege. If you are not the intended recipient, you must not
>> peruse, use, disseminate, distribute or copy this message. If you have
>> received this message in error, please notify us immediately (Phone 0800 665
>> 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no
>> responsibility for changes to this email, or for any attachments, after its
>> transmission from LINZ. Thank You.
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


From wonder.sk at gmail.com  Thu Jan 31 09:06:45 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu, 31 Jan 2013 18:06:45 +0100
Subject: [Qgis-developer] new_vector_api merged
In-Reply-To: <4BCB480CFC693741AB7B875E0BC3A2B50149415D@DEWDFEMB11A.global.corp.sap>
References: <CAC2XbFfe_PL8KevEoxMEY0yE_TareJTEa03j06Pv3jF0VHoYyQ@mail.gmail.com>
	<4BCB480CFC693741AB7B875E0BC3A2B50149415D@DEWDFEMB11A.global.corp.sap>
Message-ID: <CAC2XbFds1mKatB86VsH3Kffm6xcmHF1bqK0-C0NYGi87XhiGWw@mail.gmail.com>

On Thu, Jan 31, 2013 at 5:52 PM, DeHaan, Dave <dave.dehaan at sap.com> wrote:
> Nice work in separating the iteration state from the provider state within the new vector API.
>
> Thanks to some assistance from my colleague Mary Steele, I have updated and re-enabled the SQL Anywhere provider.  We did not observe any behavior regressions in our testing.

Dave,

great! Thanks to this update and Tamas' update of mssql provider now
we have all providers enabled again!

Martin

From marco.hugentobler at sourcepole.ch  Thu Jan 31 11:08:22 2013
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Thu, 31 Jan 2013 20:08:22 +0100
Subject: [Qgis-developer] State of QGIS WFS provider
In-Reply-To: <316886599.1266188.1359614663271.JavaMail.root@s-101-LINZ>
References: <316886599.1266188.1359614663271.JavaMail.root@s-101-LINZ>
Message-ID: <510AC126.60307@sourcepole.ch>

Hi Jeremy

> doesn't support  setSubsetString.
> poor operator support for  filters e.g no LIKE or spatial stuff

This is not a general limitation of the WFS provider. There is the 
possibility of writing the filter xml into the filter dialog as a string 
if needed. I know, it is not very comfortable. But does the OGR driver 
come with a better GUI?

>Of course continuing to develop the  current driver has the advantage of tighter integration with the QT 
framework and >QGIS. Such as utilising QT network and proxy management.

I'd add to that list the possibility of aborting long requests and 
receiving status updates (progress bar if server provides total, number 
of incoming bytes if not).
In my opinion, it is definitely worth to have a native provider. Support 
for GML2 is already in QgsGeometry and there is no reason why not adding 
GML3 too.

Regards,
Marco

Am 31.01.2013 07:41, schrieb Jeremy Palmer:
> What peoples thoughts about the state of this provider. The currently 
> limitations I see currently with it is:
> poor handling of larges datasets (e.g http://hub.qgis.org/issues/4604)
> doesn't support WFS 1.1 or WFS 2.0 (or GML payloads that go along with 
> those versions)
> doesn't support setSubsetString.
> poor operator support for filters e.g no LIKE or spatial stuff
> Doesn't query GetCapabilities to determine supported functions or 
> operators.
> Poor user connection UI (i have a patch to improve this to using 
> QSortFilterProxyModel)
> I wondering if one way to deal to a lot of these issues is to use the 
> OGR WFS implementation with QGIS. As of OGR 1.9 its support for WFS is 
> very good. Benefits are:
> common code (worked on by more people)
> handles filters better
> handles talking to different implementations of the standards better 
> (e.g mapserver, Geoserver, deegree)
> handles fetching larger datasets better e.g with paging support etc
> Of course continuing to develop the current driver has the advantage 
> of tighter integration with the QT framework and QGIS. Such as 
> utilising QT network and proxy management.
> Cheers,
> Jeremy
>
> ------------------------------------------------------------------------
> This message contains information, which is confidential and may be 
> subject to legal privilege. If you are not the intended recipient, you 
> must not peruse, use, disseminate, distribute or copy this message. If 
> you have received this message in error, please notify us immediately 
> (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original 
> message. LINZ accepts no responsibility for changes to this email, or 
> for any attachments, after its transmission from LINZ. Thank You.


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130131/a2ecb1fc/attachment.html>

From cavallini at faunalia.it  Thu Jan 31 11:09:50 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 31 Jan 2013 20:09:50 +0100
Subject: [Qgis-developer] Long time connecting to PostGIS
Message-ID: <510AC17E.5050109@faunalia.it>

Hi all.
When *Add also non geom tables* is selected from the connection, qgis
takes an unopinately long time connecting, e.g. from DB Manager. This
seems a new phenomenon: does anybody confirm?
All the best.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From cavallini at faunalia.it  Thu Jan 31 11:27:43 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 31 Jan 2013 20:27:43 +0100
Subject: [Qgis-developer] Error in DB Manager
Message-ID: <510AC5AF.6000508@faunalia.it>

Hi all.

I'm consistently getting an error trying to visualize the table of a
specific geometry in DB Manager.
Any suggestion?
Thanks.
===


Traceback (most recent call last):
  File
"/usr/share/qgis/python/plugins/db_manager/db_plugins/data_model.py",
line 60, in data
    val = self.getData(index.row(), index.column())
  File
"/usr/share/qgis/python/plugins/db_manager/db_plugins/data_model.py",
line 116, in getData
    self.fetchMoreData(start)
  File
"/usr/share/qgis/python/plugins/db_manager/db_plugins/postgis/data_model.py",
line 76, in fetchMoreData
    return self.fetchMoreData(row_start)
  File
"/usr/share/qgis/python/plugins/db_manager/db_plugins/postgis/data_model.py",
line 70, in fetchMoreData
    self._createCursor()
  File
"/usr/share/qgis/python/plugins/db_manager/db_plugins/postgis/data_model.py",
line 49, in _createCursor
    self.db._execute(self.cursor, sql)
  File
"/usr/share/qgis/python/plugins/db_manager/db_plugins/connector.py",
line 84, in _execute
    raise DbError(e, sql)
DbError: Error:
current transaction is aborted, commands ignored until end of
transaction block


Query:
SELECT "id"::text, "provincia"::text, CASE WHEN "st_intersection" IS
NULL THEN NULL ELSE GeometryType("st_intersection") END AS
"st_intersection", "area_km2"::text, "percentuale_incendiata"::text FROM
"public"."province_incendiate"

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130131/c7e9f11e/attachment.html>

From Bob.Bruce at gov.mb.ca  Thu Jan 31 12:41:01 2013
From: Bob.Bruce at gov.mb.ca (Bruce, Bob (CON))
Date: Thu, 31 Jan 2013 14:41:01 -0600
Subject: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh
 WCS
In-Reply-To: <CAEMrtYpTumg0yP1NheLBUYLUX=4OTyao8SrfrHFdOoXPh_t=uw@mail.gmail.com>
References: <DC49060A7E430243BF2D4090200661931AD39E34BF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYrnh5Xub2H83quBuzGXSzBmuMOaTPjpBAfFWMKiXi6swA@mail.gmail.com>
	<CAEMrtYqv9cvaYfXm3ODek1Yjbv-T4b_V7aZsbsuLnVk53v_cRw@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3B6A69D@OC1EX201.ME.MBGOV.CA>
	<CA+YzLBeE=1Oqgj5R9VayOcsRH7tSPZ7BOJj+CWwVN=U5qzBLow@mail.gmail.com>
	<CAEMrtYo7WKrwNVFp5qDeV11J011eG5PtOniX0hdLzm3339SZoQ@mail.gmail.com>
	<F2C8CAFE-F27B-4329-8ECF-BD3C00B74265@pobox.com>
	<CAEMrtYrtOLpd1MKdZRNXn0Lo9eN6Xm=Jh-kMs731Lu-yKgLE+A@mail.gmail.com>
	<50FEC2E9.6080401@cubewerx.com>
	<CAEMrtYpimrcXFjBmiwx=ByKY_gV0YVu_=s3yOeBXLaxhGTeHtQ@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD3D1A1DF@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYorgZNop1fkTvBhFJsD5gxJwBMxOfMaSCxQ0E+UJB6eJg@mail.gmail.com>
	<DC49060A7E430243BF2D4090200661931AD82F0394@OC1EX201.ME.MBGOV.CA>
	<CAEMrtYpTumg0yP1NheLBUYLUX=4OTyao8SrfrHFdOoXPh_t=uw@mail.gmail.com>
Message-ID: <DC49060A7E430243BF2D4090200661931AD8B802AC@OC1EX201.ME.MBGOV.CA>

Radim,
        Thanks for getting back to me. I understand the limitations and concerns and will live with them. I appreciate the work that you have done to allow QGIS to work with this imagery provider.

Bob Bruce

-----Original Message-----
From: Radim Blazek [mailto:radim.blazek at gmail.com]
Sent: January-31-13 1:19 AM
To: Bruce, Bob (CON)
Cc: ekeighan at cubewerx.com; Qgis-Developer
Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS

The problem is server side. I have already done what was acceptable
(already a bit over reasonable limit) in QGIS. We cannot mess up QGIS
code with "if server = cubewerx.com" workarounds. If they are not
willing to fix the server, you can make a server mirror with
additional extent check. The following CGI script works smoothly for
me:

#!/usr/bin/python
import os, sys, cgi, urllib2 as urllib
form = cgi.FieldStorage()
if form.getvalue("REQUEST") == "GetCoverage":
  (xmin, ymin, xmax, ymax) = map( float, form.getvalue("BBOX").split(",") )
  thresh = 0.1 if form.getvalue("CRS") == "EPSG:4326" else 10000
  if xmax-xmin > thresh or ymax-ymin > thresh:
    print "Content-type: text/xml"
    print ""
    print """<?xml version='1.0' encoding="ISO-8859-1" ?>
              <ServiceExceptionReport>
              <ServiceException>Too large extent</ServiceException>
              </ServiceExceptionReport>"""
    sys.exit(0)
url = "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?" +
os.environ["QUERY_STRING"]
page =  urllib.urlopen( url )
print "Content-type: %s " % page.info().gettype()
print ""
print(page.read())

just put it as cubewerx-mirror into apache cgi-bin directory and you
can access the WCS with URL
http://your.server.com/cgi-bin/cubewerx-mirror?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
Don't forget to check "Ignore GetCoverage URI reported in capabilities".
If you are behind firewall you have to place it on a server outside or
you have to modify the script to go through the proxy (no idea how).

Radim


On Wed, Jan 30, 2013 at 6:29 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
> Radim,
>       I have now been able to get this to work. I have set the network timeout to 10ms and this shortened the timeouts so that QGIS doesn't wait long before there is some responses. I am working inside of a corporate firewall and proxy server and every time that there is a timeout then there is a prompt for the proxy login information, I just click the OK button and QGIS attempts a connection again. In all I think that I got 7 prompts for login information before it proceeded with retrieving the image for the viewing area. Anything that you could do to make QGIS work smoother with this imagery source would be much appreciated.
>
> I have attached a screen capture of QGIS displaying this imagery source with our indoor running route superimposed upon it.
>
> Thanks,
>         Bob
>
> -----Original Message-----
> From: Radim Blazek [mailto:radim.blazek at gmail.com]
> Sent: January-25-13 3:54 AM
> To: Bruce, Bob (CON)
> Cc: ekeighan at cubewerx.com; Qgis-Developer; Bob Bruce
> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>
> On Wed, Jan 23, 2013 at 10:19 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca> wrote:
>> Radim,
>>         Would you be willing to add an option to "Disable max extent verification" - I believe that would solve
>> all of our problems with connecting to this very large image store. If you do so then please let me know and I will
>> be happy to test it.
>
> That option would be the worst end for me. I have commited in f6806a9
> a fix which allows to continue even if the extent verification fails.
> Unfortunately other problems appeared immediately. Raster layer in
> legend has 32x32 icon covering the whole extent. Another larger
> thumbnail covering the whole extent is used in raster properties. I
> think that the server must be fixed at least so that if the requested
> extent is too large it responds immediately, reporting an error.
>
> So, it works, but you have to wait for few timeouts (don't forget to
> set network timeout option to something reasonable), the thumbnail in
> legend and properties are black, until you zoom-in enough you get
> black rectangle rendered.
>
> Radim
>
>> Thanks,
>>         Bob Bruce
>>
>> -----Original Message-----
>> From: qgis-developer-bounces at lists.osgeo.org [mailto:qgis-developer-bounces at lists.osgeo.org] On Behalf Of Radim Blazek
>> Sent: January-23-13 3:07 AM
>> To: ekeighan at cubewerx.com
>> Cc: Qgis-Developer; Bob Bruce
>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>
>> On Tue, Jan 22, 2013 at 5:48 PM, ekeighan <ekeighan at cubewerx.com> wrote:
>>> Radim,
>>>
>>> Our WCS was designed to be used as per the intent of the OGC WCS
>>> specification for extracting data, not for browsing it. The OGC WMS or WMTS
>>> is intended to be used for browsing.
>>
>> Just for curiosity, can you point me to an OGC document supporting
>> this interpretation? In any case, my aim is not to defend how QGIS
>> works pointing to WCS specification but to get it working in most
>> cases. If you insist on that interpretation we have to take it as
>> reality.
>>
>>> But we admit that the WCS spec is deficient in that it does not describe the
>>> raster-data type sufficiently nor in a standard way.  E.g., it doesn't tell
>>> you that the raster data has five channels of 16-bit unsigned integers
>>> representing Red, Green, Blue, Infrared and Alpha channels.  This is why WCS
>>> client applications tend to request a sample image.
>>
>> Indeed, also no data values ...
>>
>>> GDAL does this in a more friendly way by requesting a small 2x2-pixel sample
>>> image at the resolution of the source data.  This causes no problems for a
>>> WCS organized to extract data at the source resolution. We suggest that QGIS
>>> use the same method to avoid unnecessary problems with our and other
>>> servers.
>>
>> QGIS does something similar, i.e. 6x3 pixels on original resolution.
>> As I already wrote twice, the 10x10 pixels request for the whole
>> extent is done to verify a real extent of the coverage. Some servers
>> may report wrong larger extent in capabilities and requests outside
>> the real extent fail. If I disable this additional check, we get it
>> working with CubeWerx, but break it for other servers and that is not
>> the way ahead.
>>
>>> Our WCS is organized to always access the raw source data in order to
>>> produce the best image possible for analysis.  However, this approach breaks
>>> down catastrophically in the QGIS case where your request translates into
>>> accessing tens of thousands of source images covering multiple terabytes of
>>> data that needs to be processed to fulfill the 10x10 request. Many
>>> developers are familiar with this particularity of the WCS (for data
>>> extraction at source resolution) and use it in tandem with a WMS or WMTS for
>>> views and only access the WCS when a download at source resolution is
>>> required, typically for analysis.
>>
>> This interpretation of the WCS standard degrades it to a richer
>> download application. I believe that WCS has much more potential.
>> Maybe the possibilities shifted a bit during the years with broadband
>> connections and mobile applications?
>>
>>> In order to support a more flexible access to the WCS we were thinking of
>>> modifying our access method when zoomed out sufficiently. Source-overview
>>> files and tile data are available which make WMS and WMTS access very
>>> efficient. CubeWerx have these products and our clients are of course
>>> deploying them in addition to a WCS but there can be a problem with both
>>> approaches in that the secondary data may not match the exact raster data
>>> type of the source data. E.g., the tiles are rendered for common maps which
>>> use 3-channel 8-bit RGB, but the source data might be 4-channel 16-bit
>>> RGB+Infrared.
>>
>> But it should not be a problem (apart computational time)  to create
>> lower resolution overviews also for WCS with exactly the same data
>> types and bands as original data. Is it?
>>
>> As I said, I would like to fix QGIS to work smoothly also with your
>> services. An easy workaround is to allow the max extent check to fail
>> but it will still wait for server timeout. Well, if the server does
>> not support full extent, it could return WCS error response
>> immediately instead of timeout error.
>>
>> Another possibility would be to add an option "Disable max extent
>> verification" but that is user unfriendly.
>>
>> Radim
>>
>>> Regards,
>>>
>>> Edric Keighan
>>> President & CEO
>>> CubeWerx Inc.
>>>
>>> Tel: 613-447-8306 Mobile
>>>
>>>
>>> On 22/01/2013 3:43 AM, Radim Blazek wrote:
>>>>
>>>> On Sun, Jan 20, 2013 at 5:14 AM, Bob Bruce <bob.bruce at shaw.ca> wrote:
>>>>>
>>>>> Radim,
>>>>>              This dataset is a huge collection of imagery encompassing an
>>>>> area approximately 350 kilometres square. There are over 5000 images in the
>>>>> dataset, with each image having a .5m pixel size and a file size of 293Mb
>>>>> and I doubt that it is feasible to request a small sample image from the
>>>>> entire range of the imagery. Is there some way that we can get QGIS to
>>>>> request an image from a much smaller area (like the extent of the viewport)
>>>>> to establish the validity of the dataset?
>>>>
>>>> Currently not. It would be necessary to disable the check for max
>>>> extent. I am willing to add workarounds for various server
>>>> particularities (the check for true max extent is one of them) but in
>>>> this case I am not quite convinced. It is obviously server problem.
>>>> The server offers capabilities which it cannot fulfill.
>>>>
>>>> I'll consider to allow to pass the extent check without error.
>>>> However, the request will be done and it will wait timeout until it
>>>> fails.
>>>>
>>>> I think that GDAL does not do that check, so you can create GDAL WCS
>>>> XML file and open it as raster file.
>>>>
>>>> Radim
>>>>
>>>>> Ultimately we want to work with a dataset of .2m sized pixels and
>>>>> individual images of 2.94Gb and four bands.
>>>>>
>>>>> Thanks for your help,
>>>>>
>>>>>           Bob Bruce
>>>>>
>>>>> Sent from my iPhone
>>>>>
>>>>> On 2013-01-18, at 10:08 PM, Radim Blazek <radim.blazek at gmail.com> wrote:
>>>>>
>>>>> Frank,
>>>>>
>>>>> here it is QGIS doing the request 10x10. Not sure about GDAL but IIRC,
>>>>> in QGIS it is used to get true extent. It may happen that a server is
>>>>> misconfigured and reports larger extent in
>>>>> GetCapabilities/DescribeCoverage and successive request inside that
>>>>> extent but outside the real coverage extent would fail. Requesting the
>>>>> whole extent and getting
>>>>> its real extent is the only way AFAIK to get real extent.
>>>>>
>>>>> Radim
>>>>>
>>>>> On Sat, Jan 19, 2013 at 2:23 AM, Frank Warmerdam <warmerdam at pobox.com>
>>>>> wrote:
>>>>>>
>>>>>> Bruce,
>>>>>>
>>>>>> I think the 10x10 request is being made by GDAL's WCS driver in order
>>>>>> to establish some details about the underlying WCS and it defaults to
>>>>>> the whole extents.  It sucks fairly badly that such a request can't be
>>>>>> done.  It might be possible to dummy in the information in the .wcs
>>>>>> config file to avoid having to do that query.  Investigating.
>>>>>>
>>>>>> Best regards,
>>>>>> Frank
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Fri, Jan 18, 2013 at 4:11 PM, Bruce, Bob (CON) <Bob.Bruce at gov.mb.ca>
>>>>>> wrote:
>>>>>>>
>>>>>>> Radim,
>>>>>>>      I have been looking at this again with two people from Cubewerx
>>>>>>> and we find that QGIS is issuing this request:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=315000.2500000000000000,5425000.2500000000000000,779999.7500000000000000,5804999.7500000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=10&HEIGHT=10
>>>>>>>
>>>>>>> while the bounding box that I currently have displayed in QGIS is
>>>>>>> roughly:
>>>>>>>
>>>>>>>
>>>>>>> BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000
>>>>>>>
>>>>>>> I need to get QGIS to restrict its request to this extent to work. Do
>>>>>>> you know how I can do that?
>>>>>>>
>>>>>>> If I issue this request from my web browser:
>>>>>>>
>>>>>>>
>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=632450.0000000000000000,5527900.0000000000000000,634150.0000000000000000,5529000.000000000000&CRS=EPSG:26914&RESPONSE_CRS=EPSG:26914&WIDTH=1700&HEIGHT=1100
>>>>>>>
>>>>>>> I actually get a tiff image that I can view that looks good and is
>>>>>>> similar to what I would expect to see in QGIS. Now I need to get QGIS to
>>>>>>> actually issue that request.
>>>>>>>
>>>>>>> Thanks,
>>>>>>>        Bob Bruce
>>>>>>>
>>>>>>> -----Original Message-----
>>>>>>> From: Radim Blazek [mailto:radim.blazek at gmail.com]
>>>>>>> Sent: January-18-13 3:36 AM
>>>>>>> To: Bruce, Bob (CON)
>>>>>>> Cc: Qgis-Developer; ekeighan at cubewerx.com
>>>>>>> Subject: Re: [Qgis-developer] Error connecting QGIS 1.9.0 to Ortho
>>>>>>> Refresh WCS
>>>>>>>
>>>>>>> Hi again,
>>>>>>>
>>>>>>> On Fri, Jan 18, 2013 at 10:28 AM, Radim Blazek <radim.blazek at gmail.com>
>>>>>>> wrote:
>>>>>>>>
>>>>>>>> I don't see the same problem here. GetCapabilities and
>>>>>>>> DescribeCoverage are not mixed together here. Could it be that you
>>>>>>>> accidentally used GetCapabilities request URL as "URL" parameter in
>>>>>>>> connection details dialog and it was logged on server but that is
>>>>>>>> another issue?
>>>>>>>>
>>>>>>>> I have got another error however. DescribeCoverage is successfully
>>>>>>>> received and parsed, then QGIS sends test GetCoverage request (10x10
>>>>>>>> raster to get more info):
>>>>>>>>
>>>>>>>>
>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&&SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&FORMAT=GeoTIFF&COVERAGE=image_set&BBOX=-101.9598305476503981,48.7910076027865429,-94.6376374194891667,52.5230584889113814&CRS=EPSG:4326&RESPONSE_CRS=EPSG:4326&WIDTH=10&HEIGHT=10
>>>>>>>>
>>>>>>>> and it fails on server side with:
>>>>>>>>
>>>>>>>> "Gateway Time-out
>>>>>>>> The gateway did not receive a timely response from the upstream server
>>>>>>>> or application."
>>>>>>>>
>>>>>>>> Because the request covers the whole extent, it could be that the
>>>>>>>> raster is quite large and there are no overviews/pyramids ready on
>>>>>>>> server, it starts to do resampling of the whole extent but it takes to
>>>>>>>> much time?
>>>>>>>
>>>>>>> It really seems to be the problem, I have tried with smaller extent
>>>>>>> and server sent a correct TIFF in response. In any case it takes very
>>>>>>> long time.
>>>>>>>
>>>>>>> Radim
>>>>>>>
>>>>>>>> BTW, you can find some interesting info in QGIS Settings > Panels >
>>>>>>>> Log  Messages  - WCS tab or in debug messages. In log messages are
>>>>>>>> usually printed requests which failed and in debug messages are
>>>>>>>> printed all requests.
>>>>>>>>
>>>>>>>> Radim
>>>>>>>>
>>>>>>>> On Thu, Jan 17, 2013 at 11:07 PM, Bruce, Bob (CON)
>>>>>>>> <Bob.Bruce at gov.mb.ca> wrote:
>>>>>>>>>
>>>>>>>>> I am having trouble using the WCS capability in version 1.9.0 code
>>>>>>>>> revision f210668
>>>>>>>>> Here are the full details of the QGIS version from the Help listing:
>>>>>>>>>
>>>>>>>>> QGIS version                    1.9.0-Master    QGIS code revision
>>>>>>>>> f210668
>>>>>>>>> Compiled against Qt             4.7.1                   Running
>>>>>>>>> against Qt              4.7.1
>>>>>>>>> Compiled against GDAL/OGR       1.9.2                   Running
>>>>>>>>> against GDAL/OGR        1.9.2
>>>>>>>>> GEOS Version                    3.3.5                   PostgreSQL
>>>>>>>>> Client Version       8.3.10
>>>>>>>>> SpatiaLite Version              3.0.1                   QWT Version
>>>>>>>>> 5.2.1
>>>>>>>>> PROJ.4 Version                  480                     QScintilla2
>>>>>>>>> Version             2.6.2
>>>>>>>>> This copy of QGIS writes debugging output.
>>>>>>>>>
>>>>>>>>> The URL that I am connecting to is:
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store
>>>>>>>>> The URL of the GetCapabilities request is:
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&VERSION=1.0.0&SERVICE=WCS&DATASTORE=OIM_Ortho_Refresh_2010_store&REQUEST=GetCapabilities
>>>>>>>>>
>>>>>>>>> According to Cubewerx, who is our imagery OGC WCS service provider,
>>>>>>>>> their log shows both the GetCapabilities and GetCoverage requests present in
>>>>>>>>> the same HTTP request while they should be done separately.
>>>>>>>>>
>>>>>>>>> This is the request that they are finding in their server log:
>>>>>>>>>        2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>>>> 205.200.189.2 to URL
>>>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>>>
>>>>>>>>> Is there a fix to this problem available in a later version of QGIS?
>>>>>>>>>
>>>>>>>>> Here is the error report that I am seeing in QGIS when I try and add
>>>>>>>>> this data source to the project:
>>>>>>>>>        WCS provider: Cannot calculate extent
>>>>>>>>>        (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>>>        Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%
>>>>>>>>> 3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>>        (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>>        Bob Bruce
>>>>>>>>>
>>>>>>>>> From: ekeighan [mailto:ekeighan at cubewerx.com]
>>>>>>>>> Sent: January-17-13 3:33 PM
>>>>>>>>> To: Bruce, Bob (CON)
>>>>>>>>> Subject: Re: Error connecting QGIS 1.9.0 to Ortho Refresh WCS
>>>>>>>>>
>>>>>>>>> Bob,
>>>>>>>>>
>>>>>>>>> FYI...
>>>>>>>>>
>>>>>>>>> ekeighan at cubewerx.com wrote:
>>>>>>>>>
>>>>>>>>> *Raster layer:* Provider is not valid (provider: wcs, URI:
>>>>>>>>>
>>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>>
>>>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>>>> calculate the extent?
>>>>>>>>> Looking through the server log, we see only the following related
>>>>>>>>> request
>>>>>>>>> present twice:
>>>>>>>>>
>>>>>>>>> 2012-11-15 19:06:00.980 10527 received HTTP GET request from
>>>>>>>>> 205.200.189.2 to URL
>>>>>>>>> "http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0"
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------
>>>>>>>>>
>>>>>>>>> This doesn't make any sense, since it contains two different REQUEST
>>>>>>>>> arguments, one for DescribeCoverage and another for GetCapabilities.
>>>>>>>>> The Qgs error suggests that the base URL it's using is:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>>
>>>>>>>>> but it almost seems as though it was entered improperly as:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&service=wcs&version=1.1.1&REQUEST=DescribeCoverage&COVERAGE=OIM_Ortho_Refresh_2010_store
>>>>>>>>>
>>>>>>>>> The WCS request received from the client produces an error return,
>>>>>>>>> since
>>>>>>>>> the server has problems parsing the broken request:
>>>>>>>>>
>>>>>>>>> <ExceptionReport version="1.1.0" xml:lang="en"
>>>>>>>>> xsi:schemaLocation="http://www.opengis.net/ows/1.1
>>>>>>>>> http://schemas.cubewerx.com/schemas/ows/1.1.0/owsExceptionReport.xsd">
>>>>>>>>> <Exception exceptionCode="MissingParameterValue"
>>>>>>>>> locator="identifiers">
>>>>>>>>>    <ExceptionText>CubeSERV: Cannot execute WCS request, raised in
>>>>>>>>> Wcs_Execute() in file "wcs.c" line 162</ExceptionText>
>>>>>>>>>    <ExceptionText>CubeSERV: Missing parameter "identifiers", raised
>>>>>>>>> in throwMissingParamError() in file "cw_cgiparams.c" line
>>>>>>>>> 797</ExceptionText>
>>>>>>>>> </Exception>
>>>>>>>>> </ExceptionReport>
>>>>>>>>>
>>>>>>>>> The first request from the client should be just a proper
>>>>>>>>> GetCapabilities
>>>>>>>>> request:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG=OIM_Ortho_Refresh_2010&DATASTORE=OIM_Ortho_Refresh_2010_store&SERVICE=WCS&REQUEST=GetCapabilities&AcceptVersions=1.1.0,1.0.0
>>>>>>>>>
>>>>>>>>> which returns the expected data.
>>>>>>>>> -------------------------------------------------
>>>>>>>>>
>>>>>>>>> Regards,
>>>>>>>>>
>>>>>>>>> Edric
>>>>>>>>>
>>>>>>>>> On 17/01/2013 3:35 PM, Bruce, Bob (CON) wrote:
>>>>>>>>> Edric,
>>>>>>>>>            I took another look at connecting QGIS to your WCS, using
>>>>>>>>> a newer beta test version. It provided a mechanism to connect to the WCS and
>>>>>>>>> it allowed me to try and add it to my map. When I tried to add it I got the
>>>>>>>>> following message:
>>>>>>>>>
>>>>>>>>> WCS provider: Cannot calculate extent
>>>>>>>>> (d:\src\qgis\src\providers\wcs\qgswcsprovider.cpp : 188 :
>>>>>>>>> QgsWcsProvider::QgsWcsProvider)
>>>>>>>>> Raster layer: Provider is not valid (provider: wcs, URI:
>>>>>>>>> cache=AlwaysCache&crs=EPSG:26914&format=GeoTIFF&identifier=image_set&url=http://nis.cubewerx.com/cubewerx/cubeserv.cgi?CONFIG%3DOIM_Ortho_Refresh_2010%26DATASTORE%3DOIM_Ortho_Refresh_2010_store
>>>>>>>>> (d:\src\qgis\src\core\raster\qgsrasterlayer.cpp : 1609 :
>>>>>>>>> QgsRasterLayer::setDataProvider)
>>>>>>>>>
>>>>>>>>> Is there something at your end that could be changed to allow this to
>>>>>>>>> calculate the extent?
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>>            Bob
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> *******************************************************************************************************************
>>>>>>>>> **    Bob Bruce, FEC, P.Eng.         Geomatics Support Engineer
>>>>>>>>> **    Bob.Bruce at gov.mb.ca           Geospatial Technology Services
>>>>>>>>> Management
>>>>>>>>> **    work # (204) 945-6636              GeoManitoba, Manitoba
>>>>>>>>> Conservation and Water Stewardship
>>>>>>>>> **    FAX  # (204) 945-1365             1007 Century Street,
>>>>>>>>> **                                                  Winnipeg,
>>>>>>>>> Manitoba, Canada, R3H 0W4
>>>>>>>>> **
>>>>>>>>> 49-54-31.85N,97-12-16.08W
>>>>>>>>> **
>>>>>>>>> **             Check out our digital maps at: http://mli2.gov.mb.ca/
>>>>>>>>> **                 and WMS: http://mlidata.gov.mb.ca/wms/request.aspx
>>>>>>>>>
>>>>>>>>> *******************************************************************************************************************
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> Qgis-developer mailing list
>>>>>>>>> Qgis-developer at lists.osgeo.org
>>>>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Qgis-developer mailing list
>>>>>>> Qgis-developer at lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>>
>>>>>> ---------------------------------------+--------------------------------------
>>>>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>>>>> warmerdam at pobox.com
>>>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>>>
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From JPalmer at linz.govt.nz  Thu Jan 31 13:17:17 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Fri, 1 Feb 2013 10:17:17 +1300
Subject: [Qgis-developer] State of QGIS WFS provider
In-Reply-To: <510AD969.8090000@sourcepole.ch>
References: <316886599.1266188.1359614663271.JavaMail.root@s-101-LINZ>
	<510AC126.60307@sourcepole.ch>
	<666FB8D75E95AE42965A0E76A5E5337E0EDF86934E@prdlsmmsg01.ad.linz.govt.nz>
	<510AD969.8090000@sourcepole.ch>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDF86942A@prdlsmmsg01.ad.linz.govt.nz>

Would also be great to be able to limit the functions and operators that are available in the expression dialog as well.

> -----Original Message-----
> From: Marco Hugentobler [mailto:marco.hugentobler at sourcepole.ch]
> Sent: Friday, 1 February 2013 9:52 a.m.
> To: Jeremy Palmer
> Subject: Re: State of QGIS WFS provider
>
> Hi Jeremy
>
> >Thanks for the comments. So I guess it's time to improve the
> current driver then.
>
> I'm glad you intend to work on the WFS provider (e.g. the
> filter sort model you mentioned would be a very usefull
> addition to the WFS dialog).
>
> >What I was referring to was the transformation from the QGIS query
> >expression to OGC XML filter which currently has >limitations
>
> That's true, there are certainly many things to improve here.
> One difficulty is that WFS does not standardize the filter
> function names.
> This problem might be easier to solve now that there is the
> possibility of declaring custom expression functions
> (http://woostuff.wordpress.com/2012/11/10/user-defined-express
> ion-functions-for-qgis/).
> Before that, it was somehow limited to the minimum default
> set of filter operations.
>
> cheers,
> Marco
>
>
>
> Am 31.01.2013 21:32, schrieb Jeremy Palmer:
> > Hi Marco,
> >
> > Thanks for the comments. So I guess it's time to improve
> the current driver then.
> >
> >> This is not a general limitation of the WFS provider.
> There is the possibility of writing the filter xml into the
> filter dialog as a string if needed. I know, it is not > very
> comfortable. But does the OGR driver come with a better GUI?
> > The OGR driver does not come with a better GUI. What I was
> referring to was the transformation from the QGIS query
> expression to OGC XML filter which currently has limitations.
> >
> > Cheers,
> > Jeremy
> >
> > This message contains information, which is confidential
> and may be subject to legal privilege. If you are not the
> intended recipient, you must not peruse, use, disseminate,
> distribute or copy this message. If you have received this
> message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original
> message. LINZ accepts no responsibility for changes to this
> email, or for any attachments, after its transmission from
> LINZ. Thank You.
>
>
> --
> Dr. Marco Hugentobler
> Sourcepole -  Linux & Open Source Solutions Weberstrasse 5,
> CH-8004 Z?rich, Switzerland marco.hugentobler at sourcepole.ch
> http://www.sourcepole.ch Technical Advisor QGIS Project
> Steering Committee
>
>

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From etourigny.dev at gmail.com  Thu Jan 31 13:37:00 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 31 Jan 2013 19:37:00 -0200
Subject: [Qgis-developer] OpenLayers plugin release and Python API breaks
In-Reply-To: <CAC2XbFdaEFrL0AQy_FkgUCRAA4K1tociAJ=Z6bkDjtT_uLCc5Q@mail.gmail.com>
References: <2464827.ASIhYEZtWX@polarwind2>
	<20130124104000.568ff3269a6b59612dbe41d3@gmail.com>
	<3965264.6irDGXYyJf@robbe2>
	<CALuHMPBg_TJm3im_J_Vv=St63C5+LmpCEV31t8e3sbJxGPipmg@mail.gmail.com>
	<CAC2XbFdaEFrL0AQy_FkgUCRAA4K1tociAJ=Z6bkDjtT_uLCc5Q@mail.gmail.com>
Message-ID: <CA+TxYvN7JrYEeWfwt+1J25ARaTA9QMNrPYMdk_8c0iJS7J7nmA@mail.gmail.com>

On Thu, Jan 24, 2013 at 10:40 AM, Martin Dobias <wonder.sk at gmail.com> wrote:
> On Thu, Jan 24, 2013 at 1:32 PM, Alexander Bruy
> <alexander.bruy at gmail.com> wrote:
>> Hi Pirmin,
>>
>> as I can see in API docs (using your link) there is a note:
>>
>> Note:
>>     This method is deprecated since QGIS 1.8, you should use
>> addMapLayers rather.
>
> A bit off-topic, but I find it weird that addMapLayer() method has
> been marked as deprecated: even if now we have the possibility to
> specify more layers at once, it is always good to have a convenience
> call that accepts just one layer (as that's what most users will do).

I also think that this method should be brought back to the api, see
all the errors that are popping up in both mailing list about
QgsMapRegistry::addMapLayer().

Why break things like this when there is no real gain?

Unless someone objects, I will restore QgsMapRegistry::addMapLayer()

Etienne

>
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From larrys at dakotacarto.com  Thu Jan 31 15:15:06 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Thu, 31 Jan 2013 16:15:06 -0700
Subject: [Qgis-developer] Mac builds for just before vector api merge
Message-ID: <CA+nQOR8GcuwmcLiLO8qZWcw3N+=JZ-PJBSBrO8CUoiZoTUKBag@mail.gmail.com>

Hi,

Just a quick note that I have compiled both Mac OS X 10.7-8 and 10.6 apps
of master branch just prior to the new vector API merge.

http://qgis.dakotacarto.com

If you are living on the edge and doing actual work with master, those
downloads may be more compatible with plugins, etc. Note, there may still
be issues due to the earlier deprecated methods API cleanup.

Regards,

Larry Shaffer
Dakota Cartography
Black Hills, South Dakota
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130131/ce4450f8/attachment.html>

From robert at szczepanek.pl  Thu Jan 31 15:33:24 2013
From: robert at szczepanek.pl (Robert Szczepanek)
Date: Fri, 01 Feb 2013 00:33:24 +0100
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <510A1A78.6080802@gmx.ch>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
	<51079C28.6090906@gmx.ch> <5107B0AC.9030104@gmx.ch>
	<5109A311.7010507@szczepanek.pl> <510A1A78.6080802@gmx.ch>
Message-ID: <510AFF44.108@szczepanek.pl>

Hi,

Expression builder [1] inspired by Bob [2] ;), in case if pure 
expression [4] is not you are looking for.
And missing selection options [3].

regards,
Robert

[1] http://trac.osgeo.org/osgeo/changeset/9705/
[2] http://en.wikipedia.org/wiki/File:Bob_the_builder.jpg
[3] 
http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/expression.png
[4] http://trac.osgeo.org/osgeo/changeset/9706/

On 31.01.2013 08:17, Matthias Kuhn wrote:
> Hi Robert
>
> On 01/30/2013 11:47 PM, Robert Szczepanek wrote:
>> Hi Matthias,
>>
>> Here it is:
>> http://trac.osgeo.org/osgeo/changeset/9681/
> That was fast, thanks a lot.
>>
>> Concerning your request for Expression + Selection with additional
>> plus/minus/intersection elements.
>> I'm afraid of making icons with too much information.
>> Perhaps we could make it in this (context) order:
>> expression-select
>> select-add (not ready yet, but similar to [2])
>> select-remove (not ready yet)
>>
>> This is very general problem. In different places we could just use
>> '+' or '-' icons. What do you think (Matthias, Larry)?
> I understand your concerns. Especially for small icons.
> In this case, the context can actually be used to skip the expression
> icon (the user is in the expression builder dialog) and a
> select-add/select-remove/select-intersect button will be sufficient. So
> I'd be happy with your idea.
>
> Could you also commit a standalone expression builder icon (to use as
> such and as a basis to combine it with other tools)?
>
>>
>> regards,
>> Robert
>>
>> [2]
>> http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/select-cancel.png
>>
>>
> Regards
> Matthias
>


From wonder.sk at gmail.com  Thu Jan 31 16:26:24 2013
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 1 Feb 2013 01:26:24 +0100
Subject: [Qgis-developer] The future of OpenStreetMap plugin
Message-ID: <CAC2XbFc0pfMw7xN7fb8ZEt8sN2KQLBc+zApH5j=bkEmukS5Qfw@mail.gmail.com>

Hi

recently I have started to think about the future of the OpenStreetMap
plugin we currently ship with QGIS. The plugin (~2K lines of c++ and
~6K lines of python) supports downloading, viewing, editing and
uploading OSM data. My concern is that it has received little to no
updates from the time we have imported it to QGIS tree back in
mid-2009. Given that it is not being maintained and the issue tracker
reveals several major bugs, I have started to wonder how useful it
actually is in its current form and what could we do about it.

There are few other things apart from lack of maintenance that need fixing:
- it has a special provider because data are stored in custom sqlite3 DB
- data access logic is spread through either provider and plugin
- working with tags (aka attributes) is VERY inefficient
- there's no API that could be used for scripting / analyses
- it mixes topology with simple features
- using custom hardcoded old symbology renderer
- some hacks here and there (e.g. messaging from long-running XML
import in provider, "all tags" attribute)

Currently my thoughts are that we should simply remove the plugin
because fixing its problems would need huge amount of time. In
meanwhile I have started to play with an idea of fixing the
architecture with the following ideas:
1. import from XML to database should only import the topological
structure and tags (and relations), without post-processing that would
create simple features representations.
2. instead of having a special provider, we could reuse an existing
provider for viewing OSM layers - SpatiaLite seems to be the most
viable candidate. Once data is imported from XML into a database, it
should be possible to create one or more views (SpatiaLite tables) of
the database (e.g. all polygons or linestrings with "highway" tag)
3. OSM-related code should be in analysis library. providing
c++/python API. In this way, other plugins/scripts could do automatic
processing without having to deal directly with OSM XML or some
database calls. Extraction of data should require just few lines of
code.

I have a working proof of concept (<1K lines of code) and it looks
good - it's fairly simple and fast. For example, import of Essex
county data (2135K nodes, 203K ways, XML size 420MB), including
creation of SpatiaLite layers took less than 3 minutes, the subsequent
map viewing was as fast as any other SpatiaLite data. There's just one
catch (there always is, right?) - it does not support editing and I am
not even considering adding it myself. OSM editor would be a big
project and it would take ages to get at least close to the editing
experience of specialized editors such as Potlatch or JOSM. And
frankly, is there anyone using QGIS OSM plugin for editing?

What are your thoughts and wishes on QGIS - OpenStreetMap integration?

Regards
Martin

From larrys at dakotacarto.com  Thu Jan 31 17:18:37 2013
From: larrys at dakotacarto.com (Larry Shaffer)
Date: Thu, 31 Jan 2013 18:18:37 -0700
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <510AFF44.108@szczepanek.pl>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
	<51079C28.6090906@gmx.ch> <5107B0AC.9030104@gmx.ch>
	<5109A311.7010507@szczepanek.pl> <510A1A78.6080802@gmx.ch>
	<510AFF44.108@szczepanek.pl>
Message-ID: <CA+nQOR91YozKSYAgoWZ5QWPGTGGOoBF1vZLeq6a6-=KXO=aYNQ@mail.gmail.com>

Hi Robert,

I played around with the 'E' and added parens to it, to reflect the syntax
checking of the expression editor [0][1]. It was just in Photoshop, as I
didn't have time to work in Inkscape (slower process on the Mac).

I think the icon needs to stand on its own (without text, see slide #3) and
needs a little something more than just an E. The Bob the builder icon
doesn't seem to scale down very well (see slide #4). I tried a small wrench
inside the parens, but like many other symbols I tried, it didn't legibly
scale down to 16x16 very well.

[0] https://www.dropbox.com/sh/ib6hycmyvg75rn9/CVU007rVQK
[1] http://drive.dakotacarto.com/qgis/expression_ls.png

Regards,

Larry

On Thu, Jan 31, 2013 at 4:33 PM, Robert Szczepanek <robert at szczepanek.pl>wrote:

> Hi,
>
> Expression builder [1] inspired by Bob [2] ;), in case if pure expression
> [4] is not you are looking for.
> And missing selection options [3].
>
> regards,
> Robert
>
> [1] http://trac.osgeo.org/osgeo/**changeset/9705/<http://trac.osgeo.org/osgeo/changeset/9705/>
> [2] http://en.wikipedia.org/wiki/**File:Bob_the_builder.jpg<http://en.wikipedia.org/wiki/File:Bob_the_builder.jpg>
> [3] http://trac.osgeo.org/osgeo/**browser/graphics/trunk/**
> toolbar-icons/24x24/**expression.png<http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/expression.png>
> [4] http://trac.osgeo.org/osgeo/**changeset/9706/<http://trac.osgeo.org/osgeo/changeset/9706/>
>
> On 31.01.2013 08:17, Matthias Kuhn wrote:
>
>> Hi Robert
>>
>> On 01/30/2013 11:47 PM, Robert Szczepanek wrote:
>>
>>> Hi Matthias,
>>>
>>> Here it is:
>>> http://trac.osgeo.org/osgeo/**changeset/9681/<http://trac.osgeo.org/osgeo/changeset/9681/>
>>>
>> That was fast, thanks a lot.
>>
>>>
>>> Concerning your request for Expression + Selection with additional
>>> plus/minus/intersection elements.
>>> I'm afraid of making icons with too much information.
>>> Perhaps we could make it in this (context) order:
>>> expression-select
>>> select-add (not ready yet, but similar to [2])
>>> select-remove (not ready yet)
>>>
>>> This is very general problem. In different places we could just use
>>> '+' or '-' icons. What do you think (Matthias, Larry)?
>>>
>> I understand your concerns. Especially for small icons.
>> In this case, the context can actually be used to skip the expression
>> icon (the user is in the expression builder dialog) and a
>> select-add/select-remove/**select-intersect button will be sufficient. So
>> I'd be happy with your idea.
>>
>> Could you also commit a standalone expression builder icon (to use as
>> such and as a basis to combine it with other tools)?
>>
>>
>>> regards,
>>> Robert
>>>
>>> [2]
>>> http://trac.osgeo.org/osgeo/**browser/graphics/trunk/**
>>> toolbar-icons/24x24/select-**cancel.png<http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/select-cancel.png>
>>>
>>>
>>>  Regards
>> Matthias
>>
>>
> ______________________________**_________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/qgis-**developer<http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130131/e6441663/attachment.html>

From marco.hugentobler at sourcepole.ch  Thu Jan 31 23:11:57 2013
From: marco.hugentobler at sourcepole.ch (Marco Hugentobler)
Date: Fri, 01 Feb 2013 08:11:57 +0100
Subject: [Qgis-developer] Labeling: data-defined fields shifted after
 new vector API?
In-Reply-To: <510B6A70.5010006@sourcepole.ch>
References: <510B6A70.5010006@sourcepole.ch>
Message-ID: <510B6ABD.6080401@sourcepole.ch>


Hi Larry



 >So, is anyone working on this? I can devote some time this coming 
weekend. Pretty important to fix this, then make it compatible with < 
2.0 projects.

Thanks for looking into this .+1

 >Similarly, data defined properties are only a 1-to-1 relationship 
(currently property-to-field index), with no defined relationship 
between themselves, the QgsPalLayerSettings (if any) to override, the 
 >associated QgsField, any defined QgsExpression, or any assigned 
'buddy' gui elements. Nathan suggested a data binding class that could 
possibly be inherited by gui classes to make utilizing data >defined 
overrides (not just for labeling) within the app easier and more 
abstracted. I think it is worth pursuing.

Sounds interesting to use expressions for data defined properties and to 
have a generic class for it (e.g. also for data defined symbology, etc.).

Regards,
Marco

On 31.01.2013 02:42, Larry Shaffer wrote:
> Hi,
>
> On Mon, Jan 28, 2013 at 6:17 AM, R?gis Haubourg 
> <regis.haubourg at eau-adour-garonne.fr 
> <mailto:regis.haubourg at eau-adour-garonne.fr>> wrote:
>
>     martin Dobias wrote
>     > I have briefly looked into the code and it seems that new labeling
>     >> stores data-defined attributes by index instead of name. If so,
>     >> that's
>     >> the source of the problem and it should be changed to read/write
>     >> names
>
>     Hi all,
>     +1 for switching storage of data defined fields with names and not
>     indexes.
>     It was a limit I previously pointed and this is really weak if
>     data field
>     order change. But we need retrocompatibility with old projects.
>      Does that
>     sounds possible?
>     r?gis
>
>
> So, is anyone working on this? I can devote some time this coming 
> weekend. Pretty important to fix this, then make it compatible with < 
> 2.0 projects.
>
> Similarly, data defined properties are only a 1-to-1 relationship 
> (currently property-to-field index), with no defined relationship 
> between themselves, the QgsPalLayerSettings (if any) to override, the 
> associated QgsField, any defined QgsExpression, or any assigned 
> 'buddy' gui elements. Nathan suggested a data binding class that could 
> possibly be inherited by gui classes to make utilizing data defined 
> overrides (not just for labeling) within the app easier and more 
> abstracted. I think it is worth pursuing.
>
> On another note (and yet a bunch more refactoring), most of the 
> QgsPalLayerSettings are directly accessed public properties. These 
> should probably be switched over to some form of container object 
> (QMap?) no?
>
> Regards,
>
> Larry
>
>     --
>     View this message in context:
>     http://osgeo-org.1560.n6.nabble.com/Labeling-data-defined-fields-shifted-after-new-vector-API-tp5030238p5030276.html
>     Sent from the Quantum GIS - Developer mailing list archive at
>     Nabble.com.
>     _______________________________________________
>     Qgis-developer mailing list
>     Qgis-developer at lists.osgeo.org <mailto:Qgis-developer at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch  http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130201/87ea1db3/attachment-0001.html>

From robert at szczepanek.pl  Thu Jan 31 23:39:51 2013
From: robert at szczepanek.pl (Robert Szczepanek)
Date: Fri, 01 Feb 2013 08:39:51 +0100
Subject: [Qgis-developer] Expression editor icon
In-Reply-To: <CA+nQOR91YozKSYAgoWZ5QWPGTGGOoBF1vZLeq6a6-=KXO=aYNQ@mail.gmail.com>
References: <CA+nQOR9ux9LvXh5RfcaeUWuLFJNM=hR4n-M17tgGypapge+8AA@mail.gmail.com>
	<CALCNqkbFM8bw4qJ95hYaL18Wd_CgTCfuL-e+0oLZgDN-ZdJyHQ@mail.gmail.com>
	<502D42E1.8070206@szczepanek.pl>
	<CALCNqkZTcxj3xUohD9s3ieBcL64vxeo=uhKzS-xe3WUD0YnNOA@mail.gmail.com>
	<51079C28.6090906@gmx.ch> <5107B0AC.9030104@gmx.ch>
	<5109A311.7010507@szczepanek.pl> <510A1A78.6080802@gmx.ch>
	<510AFF44.108@szczepanek.pl>
	<CA+nQOR91YozKSYAgoWZ5QWPGTGGOoBF1vZLeq6a6-=KXO=aYNQ@mail.gmail.com>
Message-ID: <510B7147.3010301@szczepanek.pl>

Hi Larry,

Your parenthesis look much, much better!
I can make this version in Inkscape.

regards,
Robert

On 01.02.2013 02:18, Larry Shaffer wrote:
> Hi Robert,
>
> I played around with the 'E' and added parens to it, to reflect the
> syntax checking of the expression editor [0][1]. It was just in
> Photoshop, as I didn't have time to work in Inkscape (slower process on
> the Mac).
>
> I think the icon needs to stand on its own (without text, see slide #3)
> and needs a little something more than just an E. The Bob the builder
> icon doesn't seem to scale down very well (see slide #4). I tried a
> small wrench inside the parens, but like many other symbols I tried, it
> didn't legibly scale down to 16x16 very well.
>
> [0] https://www.dropbox.com/sh/ib6hycmyvg75rn9/CVU007rVQK
> [1] http://drive.dakotacarto.com/qgis/expression_ls.png
>
> Regards,
>
> Larry
>
> On Thu, Jan 31, 2013 at 4:33 PM, Robert Szczepanek <robert at szczepanek.pl
> <mailto:robert at szczepanek.pl>> wrote:
>
>     Hi,
>
>     Expression builder [1] inspired by Bob [2] ;), in case if pure
>     expression [4] is not you are looking for.
>     And missing selection options [3].
>
>     regards,
>     Robert
>
>     [1] http://trac.osgeo.org/osgeo/__changeset/9705/
>     <http://trac.osgeo.org/osgeo/changeset/9705/>
>     [2] http://en.wikipedia.org/wiki/__File:Bob_the_builder.jpg
>     <http://en.wikipedia.org/wiki/File:Bob_the_builder.jpg>
>     [3]
>     http://trac.osgeo.org/osgeo/__browser/graphics/trunk/__toolbar-icons/24x24/__expression.png
>     <http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/expression.png>
>     [4] http://trac.osgeo.org/osgeo/__changeset/9706/
>     <http://trac.osgeo.org/osgeo/changeset/9706/>
>
>     On 31.01.2013 08:17, Matthias Kuhn wrote:
>
>         Hi Robert
>
>         On 01/30/2013 11:47 PM, Robert Szczepanek wrote:
>
>             Hi Matthias,
>
>             Here it is:
>             http://trac.osgeo.org/osgeo/__changeset/9681/
>             <http://trac.osgeo.org/osgeo/changeset/9681/>
>
>         That was fast, thanks a lot.
>
>
>             Concerning your request for Expression + Selection with
>             additional
>             plus/minus/intersection elements.
>             I'm afraid of making icons with too much information.
>             Perhaps we could make it in this (context) order:
>             expression-select
>             select-add (not ready yet, but similar to [2])
>             select-remove (not ready yet)
>
>             This is very general problem. In different places we could
>             just use
>             '+' or '-' icons. What do you think (Matthias, Larry)?
>
>         I understand your concerns. Especially for small icons.
>         In this case, the context can actually be used to skip the
>         expression
>         icon (the user is in the expression builder dialog) and a
>         select-add/select-remove/__select-intersect button will be
>         sufficient. So
>         I'd be happy with your idea.
>
>         Could you also commit a standalone expression builder icon (to
>         use as
>         such and as a basis to combine it with other tools)?
>
>
>             regards,
>             Robert
>
>             [2]
>             http://trac.osgeo.org/osgeo/__browser/graphics/trunk/__toolbar-icons/24x24/select-__cancel.png
>             <http://trac.osgeo.org/osgeo/browser/graphics/trunk/toolbar-icons/24x24/select-cancel.png>
>
>
>         Regards
>         Matthias
>
>
>     _________________________________________________
>     Qgis-developer mailing list
>     Qgis-developer at lists.osgeo.org <mailto:Qgis-developer at lists.osgeo.org>
>     http://lists.osgeo.org/__mailman/listinfo/qgis-__developer
>     <http://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>


From cavallini at faunalia.it  Thu Jan 31 23:46:36 2013
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 01 Feb 2013 08:46:36 +0100
Subject: [Qgis-developer] The future of OpenStreetMap plugin
In-Reply-To: <CAC2XbFc0pfMw7xN7fb8ZEt8sN2KQLBc+zApH5j=bkEmukS5Qfw@mail.gmail.com>
References: <CAC2XbFc0pfMw7xN7fb8ZEt8sN2KQLBc+zApH5j=bkEmukS5Qfw@mail.gmail.com>
Message-ID: <510B72DC.6060803@faunalia.it>

Il 01/02/2013 01:26, Martin Dobias ha scritto:
> I have a working proof of concept (<1K lines of code) and it looks
> good - it's fairly simple and fast. For example, import of Essex
> county data (2135K nodes, 203K ways, XML size 420MB), including
> creation of SpatiaLite layers took less than 3 minutes, the subsequent
> map viewing was as fast as any other SpatiaLite data. There's just one
> catch (there always is, right?) - it does not support editing and I am
> not even considering adding it myself. OSM editor would be a big
> project and it would take ages to get at least close to the editing
> experience of specialized editors such as Potlatch or JOSM. And
> frankly, is there anyone using QGIS OSM plugin for editing?
>
> What are your thoughts and wishes on QGIS - OpenStreetMap integration?
>
>

Hi Martin,
thanks for raising the issue - I have been thinking about it for months,
and I share your views. While removing nice functionalities is always a
pity, I think we have a serious case here. I understand we currently do
not have the forces for a major upgrade of it. What we should not miss,
IMHO, is the download capability, the rest has probably littlo or no use.
So, in short, please go ahead, and remove the OSM stuff as soon as your
downloading code is fully working.
Thanks again.

-- 
Paolo Cavallini - Faunalia
www.faunalia.eu
Full contact details at www.faunalia.eu/pc
Nuovi corsi QGIS e PostGIS: http://www.faunalia.it/calendario


From rldhont at gmail.com  Thu Jan 31 23:58:38 2013
From: rldhont at gmail.com (=?ISO-8859-1?B?UmVu6S1MdWMgRCdIb250?=)
Date: Fri, 1 Feb 2013 08:58:38 +0100
Subject: [Qgis-developer] The future of OpenStreetMap plugin
In-Reply-To: <CAC2XbFc0pfMw7xN7fb8ZEt8sN2KQLBc+zApH5j=bkEmukS5Qfw@mail.gmail.com>
References: <CAC2XbFc0pfMw7xN7fb8ZEt8sN2KQLBc+zApH5j=bkEmukS5Qfw@mail.gmail.com>
Message-ID: <CAPkCcEapwWscWYu-RhvPJC0DwOQxJCJ8KVRpL_rNU3TioKt-WA@mail.gmail.com>

Hi Martin,

I think the OSM plugin has to be improved, and it's a good news if you have
started a new architecture.

Can the plugin be extracted from the core?

For the edit purpose, I think it's an important feature because gis user
don't want to use an other software than the one they use for gis data.
ArcGIS users are happy to have an OSM plugin to update data.
But if the new OSM plugin can be regularly updated, it can start without.

Cheers,
Ren?-Luc
Le 1 f?vr. 2013 01:26, "Martin Dobias" <wonder.sk at gmail.com> a ?crit :

> Hi
>
> recently I have started to think about the future of the OpenStreetMap
> plugin we currently ship with QGIS. The plugin (~2K lines of c++ and
> ~6K lines of python) supports downloading, viewing, editing and
> uploading OSM data. My concern is that it has received little to no
> updates from the time we have imported it to QGIS tree back in
> mid-2009. Given that it is not being maintained and the issue tracker
> reveals several major bugs, I have started to wonder how useful it
> actually is in its current form and what could we do about it.
>
> There are few other things apart from lack of maintenance that need fixing:
> - it has a special provider because data are stored in custom sqlite3 DB
> - data access logic is spread through either provider and plugin
> - working with tags (aka attributes) is VERY inefficient
> - there's no API that could be used for scripting / analyses
> - it mixes topology with simple features
> - using custom hardcoded old symbology renderer
> - some hacks here and there (e.g. messaging from long-running XML
> import in provider, "all tags" attribute)
>
> Currently my thoughts are that we should simply remove the plugin
> because fixing its problems would need huge amount of time. In
> meanwhile I have started to play with an idea of fixing the
> architecture with the following ideas:
> 1. import from XML to database should only import the topological
> structure and tags (and relations), without post-processing that would
> create simple features representations.
> 2. instead of having a special provider, we could reuse an existing
> provider for viewing OSM layers - SpatiaLite seems to be the most
> viable candidate. Once data is imported from XML into a database, it
> should be possible to create one or more views (SpatiaLite tables) of
> the database (e.g. all polygons or linestrings with "highway" tag)
> 3. OSM-related code should be in analysis library. providing
> c++/python API. In this way, other plugins/scripts could do automatic
> processing without having to deal directly with OSM XML or some
> database calls. Extraction of data should require just few lines of
> code.
>
> I have a working proof of concept (<1K lines of code) and it looks
> good - it's fairly simple and fast. For example, import of Essex
> county data (2135K nodes, 203K ways, XML size 420MB), including
> creation of SpatiaLite layers took less than 3 minutes, the subsequent
> map viewing was as fast as any other SpatiaLite data. There's just one
> catch (there always is, right?) - it does not support editing and I am
> not even considering adding it myself. OSM editor would be a big
> project and it would take ages to get at least close to the editing
> experience of specialized editors such as Potlatch or JOSM. And
> frankly, is there anyone using QGIS OSM plugin for editing?
>
> What are your thoughts and wishes on QGIS - OpenStreetMap integration?
>
> Regards
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20130201/d87edd67/attachment.html>

