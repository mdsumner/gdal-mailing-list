From surveykshak at gmail.com  Mon Nov  1 08:58:09 2021
From: surveykshak at gmail.com (Paul N)
Date: Mon, 1 Nov 2021 21:28:09 +0530
Subject: [QGIS-Developer] QGIS 3.22 compilation on windows 10 with MSVC 2019
Message-ID: <CAGy7cY=uPc-sv_dVaxbXW5+rFhEh3e=vEWj8sE=p2wGN1sxDvQ@mail.gmail.com>

Hi, I am trying to compile QGIS 3.22 on Windows 10 using MSVC 2019 and
getting an error after running 'configure.bat'.

E:\Repositories\QGIS-release-3_22\ms-windows\osgeo4w>configonly.bat
usage: msvc-env.bat [x86|x86_64]
sample: msvc-env.bat x86_64
BEGIN: 01-11-2021 20:28:17.18
CMAKE: 01-11-2021 20:28:17.31
CMake Error: Could not create named generator Visual Studio 16 2019 -A x64

Generators
* Visual Studio 16 2019        = Generates Visual Studio 2019 project
files. Use -A option to specify architecture.
  Visual Studio 15 2017 [arch] = Generates Visual Studio 2017 project
files. Optional [arch] can be "Win64" or "ARM".
  Visual Studio 14 2015 [arch] = Generates Visual Studio 2015 project
files. Optional [arch] can be "Win64" or "ARM".
  Visual Studio 12 2013 [arch] = Generates Visual Studio 2013 project
files. Optional [arch] can be "Win64" or "ARM".
  Visual Studio 11 2012 [arch] = Generates Visual Studio 2012 project
files. Optional [arch] can be "Win64" or "ARM".
  Visual Studio 10 2010 [arch] = Generates Visual Studio 2010 project
files. Optional [arch] can be "Win64" or "IA64".
  Visual Studio 9 2008 [arch]  = Generates Visual Studio 2008 project
files. Optional [arch] can be "Win64" or "IA64".
  Borland Makefiles            = Generates Borland makefiles.
  NMake Makefiles              = Generates NMake makefiles.
  NMake Makefiles JOM          = Generates JOM makefiles.
  MSYS Makefiles               = Generates MSYS makefiles.
  MinGW Makefiles              = Generates a make file for use
with mingw32-make.
  Green Hills MULTI            = Generates Green Hills MULTI
files (experimental, work-in-progress).
  Unix Makefiles               = Generates standard UNIX makefiles.
  Ninja                        = Generates build.ninja files.
  Ninja Multi-Config           = Generates build-<Config>.ninja files.
  Watcom WMake                 = Generates Watcom WMake makefiles.
  CodeBlocks - MinGW Makefiles = Generates CodeBlocks project files.
  CodeBlocks - NMake Makefiles = Generates CodeBlocks project files.
  CodeBlocks - NMake Makefiles JOM = Generates CodeBlocks project files.
  CodeBlocks - Ninja           = Generates CodeBlocks project files.
  CodeBlocks - Unix Makefiles  = Generates CodeBlocks project files.
  CodeLite - MinGW Makefiles   = Generates CodeLite project files.
  CodeLite - NMake Makefiles   = Generates CodeLite project files.
  CodeLite - Ninja             = Generates CodeLite project files.
  CodeLite - Unix Makefiles    = Generates CodeLite project files.
  Eclipse CDT4 - NMake Makefiles = Generates Eclipse CDT 4.0 project files.
  Eclipse CDT4 - MinGW Makefiles = Generates Eclipse CDT 4.0 project files.
  Eclipse CDT4 - Ninja         = Generates Eclipse CDT 4.0 project files.
  Eclipse CDT4 - Unix Makefiles= Generates Eclipse CDT 4.0 project files.
  Kate - MinGW Makefiles       = Generates Kate project files.
  Kate - NMake Makefiles       = Generates Kate project files.
  Kate - Ninja                 = Generates Kate project files.
  Kate - Unix Makefiles        = Generates Kate project files.
  Sublime Text 2 - MinGW Makefiles = Generates Sublime Text 2 project files.
  Sublime Text 2 - NMake Makefiles = Generates Sublime Text 2 project files.
  Sublime Text 2 - Ninja       = Generates Sublime Text 2 project files.
  Sublime Text 2 - Unix Makefiles = Generates Sublime Text 2 project files.

cmake failed
BUILD ERROR 1: 01-11-2021 20:28:17.42



What change I required to make in configure.bat and msvc_env.bat. Help?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211101/ea41dd50/attachment.html>

From jef at norbit.de  Mon Nov  1 09:36:52 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Mon, 1 Nov 2021 17:36:52 +0100
Subject: [QGIS-Developer] QGIS 3.22 compilation on windows 10 with MSVC
 2019
In-Reply-To: <CAGy7cY=uPc-sv_dVaxbXW5+rFhEh3e=vEWj8sE=p2wGN1sxDvQ@mail.gmail.com>
References: <CAGy7cY=uPc-sv_dVaxbXW5+rFhEh3e=vEWj8sE=p2wGN1sxDvQ@mail.gmail.com>
Message-ID: <20211101163652.mnx5hbdl36g354gi@norbit.de>

Hi Paul,

On Mon, 01. Nov 2021 at 21:28:09 +0530, Paul N wrote:
> Hi, I am trying to compile QGIS 3.22 on Windows 10 using MSVC 2019 and
> getting an error after running 'configure.bat'.

Use the recipes from
https://github.com/jef-n/OSGeo4W/tree/master/src/qgis/osgeo4w


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211101/77d35164/attachment.sig>

From delazj at gmail.com  Tue Nov  2 01:25:19 2021
From: delazj at gmail.com (Harrissou s.)
Date: Tue, 02 Nov 2021 09:25:19 +0100
Subject: [QGIS-Developer] QGIS 3.22 compilation on windows 10 with MSVC
 2019
In-Reply-To: <20211101163652.mnx5hbdl36g354gi@norbit.de>
References: <CAGy7cY=uPc-sv_dVaxbXW5+rFhEh3e=vEWj8sE=p2wGN1sxDvQ@mail.gmail.com>
 <20211101163652.mnx5hbdl36g354gi@norbit.de>
Message-ID: <F42591FA-5880-4041-8A99-2AF17D01F9D9@gmail.com>

Hi,
J?rgen, your link points to a folder so I personally couldn't find the instructions to follow to make the build. I might lack some background skills.
Any chance we have the instructions pulled in the install file of the QGIS github repo? The current one is, I assume, obsolete and not working, and this might be the third request of this kind I see in latest months.

Regards,
Harrissou

Le 1 novembre 2021 17:36:52 GMT+01:00, "J?rgen E. Fischer" <jef at norbit.de> a ?crit?:
>Hi Paul,
>
>On Mon, 01. Nov 2021 at 21:28:09 +0530, Paul N wrote:
>> Hi, I am trying to compile QGIS 3.22 on Windows 10 using MSVC 2019 and
>> getting an error after running 'configure.bat'.
>
>Use the recipes from
>https://github.com/jef-n/OSGeo4W/tree/master/src/qgis/osgeo4w
>
>
>J?rgen
>
>-- 
>J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
>Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
>Software Engineer           D-26506 Norden            https://www.norbit.de
>QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211102/68444119/attachment.html>

From surveykshak at gmail.com  Tue Nov  2 01:39:09 2021
From: surveykshak at gmail.com (Paul N)
Date: Tue, 2 Nov 2021 14:09:09 +0530
Subject: [QGIS-Developer] QGIS 3.22 compilation on windows 10 with MSVC
 2019
In-Reply-To: <20211101163652.mnx5hbdl36g354gi@norbit.de>
References: <CAGy7cY=uPc-sv_dVaxbXW5+rFhEh3e=vEWj8sE=p2wGN1sxDvQ@mail.gmail.com>
 <20211101163652.mnx5hbdl36g354gi@norbit.de>
Message-ID: <CAGy7cY=HjDb0sawCnH3dW9qrcqcc6t9kbKuHiM0MXqfnYL87Eg@mail.gmail.com>

Hi, I have tried to run your msvc-env.bat and checked the system path line
by line.

But still having the error as below:

dbghelp.dll not found
C:\Program Files (x86)\ArcGIS\Desktop10.8\bin\dbghelp.dll
C:\Program Files (x86)\Common Files\ArcGIS\bin\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\CommonExtensions\Microsoft\TestWindow\Extensions\Cpp\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\CommonExtensions\Microsoft\TestWindow\Extensions\Cpp\x64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\CommonExtensions\Platform\DiagnosticsHub\amd64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\CommonExtensions\Platform\DiagnosticsHub\amd64\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\Extensions\Microsoft\Graphics\Debugger\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\Extensions\Microsoft\Graphics\Debugger\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\Extensions\TestPlatform\Extensions\Cpp\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\Extensions\TestPlatform\Extensions\Cpp\x64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\Remote Debugger\x64\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2017\Community\Common7\IDE\Remote Debugger\x86\symsrv.dll
C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Team
Tools\Performance Tools\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Team
Tools\Performance Tools\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\CommonExtensions\Platform\DiagnosticsHub\amd64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\CommonExtensions\Platform\DiagnosticsHub\amd64\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\Extensions\Microsoft\Graphics\Debugger\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\Extensions\Microsoft\Graphics\Debugger\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\Extensions\TestPlatform\Extensions\Cpp\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\Extensions\TestPlatform\Extensions\Cpp\x64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\Remote Debugger\x64\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\2019\Community\Common7\IDE\Remote Debugger\x86\symsrv.dll
C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\Team
Tools\Performance Tools\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\Team
Tools\Performance Tools\symsrv.dll
C:\Program Files (x86)\Microsoft Visual
Studio\Shared\Common\VSPerfCollectionTools\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\Shared\Common\VSPerfCollectionTools\vs2019\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\Shared\Common\VSPerfCollectionTools\vs2019\x64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual
Studio\Shared\Common\VSPerfCollectionTools\x64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\symsrv.dll
C:\Program Files (x86)\Microsoft Visual Studio
14.0\Common7\IDE\CommonExtensions\Platform\DiagnosticsHub\amd64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual Studio
14.0\Common7\IDE\CommonExtensions\Platform\DiagnosticsHub\amd64\symsrv.dll
C:\Program Files (x86)\Microsoft Visual Studio
14.0\Common7\IDE\CommonExtensions\Platform\DiagnosticsHub\x86\dbghelp.dllC:\Program
Files (x86)\Microsoft Visual Studio
14.0\Common7\IDE\CommonExtensions\Platform\DiagnosticsHub\x86\symsrv.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Remote
Debugger\x64\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Remote
Debugger\x64\symsrv.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Remote
Debugger\x86\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\Remote
Debugger\x86\symsrv.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Team Tools\Performance
Tools\dbghelp.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Team Tools\Performance
Tools\symsrv.dll
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Team Tools\Performance
Tools\x64\dbghelp.dll
C:\Program Files (x86)\Windows Kits\10\App Certification Kit\symsrv.dll
C:\Program Files (x86)\WWE 2K19\dbghelp.dll
ENV ERROR 0: 02-11-2021 13:56:29.97
Microsoft Windows [Version 10.0.22000.282]
(c) Microsoft Corporation. All rights reserved.

Where I am wrong.

Thanks


On Mon, 1 Nov 2021 at 22:07, J?rgen E. Fischer <jef at norbit.de> wrote:

> Hi Paul,
>
> On Mon, 01. Nov 2021 at 21:28:09 +0530, Paul N wrote:
> > Hi, I am trying to compile QGIS 3.22 on Windows 10 using MSVC 2019 and
> > getting an error after running 'configure.bat'.
>
> Use the recipes from
> https://github.com/jef-n/OSGeo4W/tree/master/src/qgis/osgeo4w
>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211102/d3f0f812/attachment.html>

From jef at norbit.de  Tue Nov  2 08:33:33 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 2 Nov 2021 16:33:33 +0100
Subject: [QGIS-Developer] QGIS 3.22 compilation on windows 10 with MSVC
 2019
In-Reply-To: <CAGy7cY=HjDb0sawCnH3dW9qrcqcc6t9kbKuHiM0MXqfnYL87Eg@mail.gmail.com>
References: <CAGy7cY=uPc-sv_dVaxbXW5+rFhEh3e=vEWj8sE=p2wGN1sxDvQ@mail.gmail.com>
 <20211101163652.mnx5hbdl36g354gi@norbit.de>
 <CAGy7cY=HjDb0sawCnH3dW9qrcqcc6t9kbKuHiM0MXqfnYL87Eg@mail.gmail.com>
Message-ID: <20211102153333.oruzrfmrhhumoccs@norbit.de>

On Tue, 02. Nov 2021 at 14:09:09 +0530, Paul N wrote:
> Hi, I have tried to run your msvc-env.bat and checked the system path line
> by line.
> 
> But still having the error as below:
> 
> dbghelp.dll not found
> C:\Program Files (x86)\ArcGIS\Desktop10.8\bin\dbghelp.dll

Looks like the SDK is incomplete:

set SETUPAPI_LIBRARY=%PF86%\Windows Kits\10\Lib\%VCSDK%\um\x64\SetupAPI.Lib
set DBGHLP_PATH=%PF86%\Windows Kits\10\Debuggers\x64

if not exist "%SETUPAPI_LIBRARY%" (
  echo SETUPAPI_LIBRARY not found
  dir /s /b "%PF86%\setupapi.lib"
  goto error
)

if not exist "%DBGHLP_PATH%\dbghelp.dll" (
  echo dbghelp.dll not found
  dir /s /b "%PF86%\dbghelp.dll" "%PF86%\symsrv.dll"
  goto error
)

So you apparently have SetupAPI.Lib, but not dbghelp.dll in
C:\Program Files (x86)\Windows Kits\10

https://github.com/jef-n/QGIS/commits/workflows-msvc includes some updates to
INSTALL[0].  The merges for OSGeo4W v2 are still pending (at the time both ltr
and latest release were built for old and osgeo4w v2; now only the current ltr
is still built for old osgeo4w).


J?rgen


[0] https://github.com/jef-n/QGIS/blob/7401e795a6a0eee82b86f4d78026f4635790c43f/INSTALL 

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211102/bfe02638/attachment.sig>

From nyall.dawson at gmail.com  Tue Nov  2 17:33:35 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 3 Nov 2021 10:33:35 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
Message-ID: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>

Hi all,

Question: was QGIS 3.16.12 for Windows released using a sip version 5
or 6? If so, we need to pull this release ASAP and put out a public
retraction notice -- it will have completely broken Processing and
result in risk of deadlocks when running any Python based processing
algorithm.

See description in
https://github.com/qgis/QGIS/pull/45128#issuecomment-958529173

I CANNOT OVERSTATE HOW DAMAGING THIS REGRESSION IS (if indeed it has
slipped into the LTR Windows release builds)

Nyall

From madmanwoo at gmail.com  Tue Nov  2 18:15:11 2021
From: madmanwoo at gmail.com (Nathan Woodrow)
Date: Wed, 3 Nov 2021 11:15:11 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
Message-ID: <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>

My download of 3.16.12 is using SIP 5.4.0 it says:

[image: image.png]

On Wed, Nov 3, 2021 at 10:35 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> Hi all,
>
> Question: was QGIS 3.16.12 for Windows released using a sip version 5
> or 6? If so, we need to pull this release ASAP and put out a public
> retraction notice -- it will have completely broken Processing and
> result in risk of deadlocks when running any Python based processing
> algorithm.
>
> See description in
> https://github.com/qgis/QGIS/pull/45128#issuecomment-958529173
>
> I CANNOT OVERSTATE HOW DAMAGING THIS REGRESSION IS (if indeed it has
> slipped into the LTR Windows release builds)
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211103/93588f7f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 11211 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211103/93588f7f/attachment.png>

From rdmailings at duif.net  Tue Nov  2 21:57:35 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 3 Nov 2021 05:57:35 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>
Message-ID: <6f036289-bece-5bc0-7833-13a9e331867e@duif.net>

On 11/3/21 2:15 AM, Nathan Woodrow wrote:
> My download?of 3.16.12 is using SIP 5.4.0 it says:
> 
> image.png

Is that osgeo4w or msi?

How to check?

Regards,

Richard

From nyall.dawson at gmail.com  Tue Nov  2 22:19:00 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 3 Nov 2021 15:19:00 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <6f036289-bece-5bc0-7833-13a9e331867e@duif.net>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>
 <6f036289-bece-5bc0-7833-13a9e331867e@duif.net>
Message-ID: <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>

On Wed, 3 Nov 2021 at 14:58, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> On 11/3/21 2:15 AM, Nathan Woodrow wrote:
> > My download of 3.16.12 is using SIP 5.4.0 it says:
> >
> > image.png
>
> Is that osgeo4w or msi?
>
> How to check?

Looks like it DOES suffer the SIP Python GIL regression. Running this
script in the console will trigger it:

feedback=QgsFeedback()
req= QNetworkRequest(QUrl('https://qgis.org'))
print(QgsBlockingNetworkRequest().get(req,True,feedback))

This works fine on 3.16.11, but hangs on 3.16.12 (and other builds
based on sip > 4)

Nyall



>
> Regards,
>
> Richard
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From bo.victor.thomsen at gmail.com  Tue Nov  2 23:52:50 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Wed, 3 Nov 2021 07:52:50 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>
 <6f036289-bece-5bc0-7833-13a9e331867e@duif.net>
 <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
Message-ID: <d6dcb059-7cf1-f297-cf5e-743373205841@gmail.com>

We have the same problem with QGIS 3.22.0.1

Running this script in the Python console:

feedback=QgsFeedback()
req= QNetworkRequest(QUrl('https://qgis.org'))
print('a')
print(QgsBlockingNetworkRequest().get(req,True,feedback))
print('b')

Shows the letter "a " and never "b". And QGIS hangs


Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 03-11-2021 kl. 06:19 skrev Nyall Dawson:
> On Wed, 3 Nov 2021 at 14:58, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>> On 11/3/21 2:15 AM, Nathan Woodrow wrote:
>>> My download of 3.16.12 is using SIP 5.4.0 it says:
>>>
>>> image.png
>> Is that osgeo4w or msi?
>>
>> How to check?
> Looks like it DOES suffer the SIP Python GIL regression. Running this
> script in the console will trigger it:
>
> feedback=QgsFeedback()
> req= QNetworkRequest(QUrl('https://qgis.org'))
> print(QgsBlockingNetworkRequest().get(req,True,feedback))
>
> This works fine on 3.16.11, but hangs on 3.16.12 (and other builds
> based on sip > 4)
>
> Nyall
>
>
>
>> Regards,
>>
>> Richard
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Tue Nov  2 23:56:28 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 03 Nov 2021 07:56:28 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>
 <6f036289-bece-5bc0-7833-13a9e331867e@duif.net>
 <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
Message-ID: <1ddd6855b4723e55d000da59b85f65be@duif.net>

On 2021-11-03 06:19, Nyall Dawson wrote:
> On Wed, 3 Nov 2021 at 14:58, Richard Duivenvoorde <rdmailings at duif.net> 
> wrote:
>> 
>> On 11/3/21 2:15 AM, Nathan Woodrow wrote:
>> > My download of 3.16.12 is using SIP 5.4.0 it says:
>> >
>> > image.png
>> 
>> Is that osgeo4w or msi?
>> 
>> How to check?
> 
> Looks like it DOES suffer the SIP Python GIL regression. Running this
> script in the console will trigger it:
> 
> feedback=QgsFeedback()
> req= QNetworkRequest(QUrl('https://qgis.org'))
> print(QgsBlockingNetworkRequest().get(req,True,feedback))
> 
> This works fine on 3.16.11, but hangs on 3.16.12 (and other builds
> based on sip > 4)

At least on a WIndows machine with the v2 osgeo4w install I can confirm 
the immediate hang in 3.22
Ah, and also 3.16.2 just freshly downloaded

While on my 3.22 on Debian the print returns immediately...

Regards,

Richard Duivenvoorde


From peter.petrik at lutraconsulting.co.uk  Wed Nov  3 00:53:37 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Wed, 3 Nov 2021 08:53:37 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <1ddd6855b4723e55d000da59b85f65be@duif.net>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>
 <6f036289-bece-5bc0-7833-13a9e331867e@duif.net>
 <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
 <1ddd6855b4723e55d000da59b85f65be@duif.net>
Message-ID: <CA+T_MsKt=-dMLYV2zN2BykJ13d_WZM2_ZR0-w2uPzktg0nx8Zg@mail.gmail.com>

On macOS 10.15 with QGIS 3.22 (official release) it works correctly (python:
sip 4.19.25)

P.

On Wed, Nov 3, 2021 at 7:56 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 2021-11-03 06:19, Nyall Dawson wrote:
> > On Wed, 3 Nov 2021 at 14:58, Richard Duivenvoorde <rdmailings at duif.net>
> > wrote:
> >>
> >> On 11/3/21 2:15 AM, Nathan Woodrow wrote:
> >> > My download of 3.16.12 is using SIP 5.4.0 it says:
> >> >
> >> > image.png
> >>
> >> Is that osgeo4w or msi?
> >>
> >> How to check?
> >
> > Looks like it DOES suffer the SIP Python GIL regression. Running this
> > script in the console will trigger it:
> >
> > feedback=QgsFeedback()
> > req= QNetworkRequest(QUrl('https://qgis.org'))
> > print(QgsBlockingNetworkRequest().get(req,True,feedback))
> >
> > This works fine on 3.16.11, but hangs on 3.16.12 (and other builds
> > based on sip > 4)
>
> At least on a WIndows machine with the v2 osgeo4w install I can confirm
> the immediate hang in 3.22
> Ah, and also 3.16.2 just freshly downloaded
>
> While on my 3.22 on Debian the print returns immediately...
>
> Regards,
>
> Richard Duivenvoorde
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211103/a334273e/attachment.html>

From nyall.dawson at gmail.com  Wed Nov  3 00:55:22 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 3 Nov 2021 17:55:22 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CA+T_MsKt=-dMLYV2zN2BykJ13d_WZM2_ZR0-w2uPzktg0nx8Zg@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>
 <6f036289-bece-5bc0-7833-13a9e331867e@duif.net>
 <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
 <1ddd6855b4723e55d000da59b85f65be@duif.net>
 <CA+T_MsKt=-dMLYV2zN2BykJ13d_WZM2_ZR0-w2uPzktg0nx8Zg@mail.gmail.com>
Message-ID: <CAB28AsgKr1UntaH+H0dc9cW4TdQesfj2C996LAhfP6wmJCcQnQ@mail.gmail.com>

On Wed, 3 Nov 2021 at 17:53, Peter Petrik
<peter.petrik at lutraconsulting.co.uk> wrote:
>
> On macOS 10.15 with QGIS 3.22 (official release) it works correctly (python: sip 4.19.25)

The difference is the sip version. QGIS on versions 5+ is basically
completely broken.

Nyall

>
> P.
>
> On Wed, Nov 3, 2021 at 7:56 AM Richard Duivenvoorde <rdmailings at duif.net> wrote:
>>
>> On 2021-11-03 06:19, Nyall Dawson wrote:
>> > On Wed, 3 Nov 2021 at 14:58, Richard Duivenvoorde <rdmailings at duif.net>
>> > wrote:
>> >>
>> >> On 11/3/21 2:15 AM, Nathan Woodrow wrote:
>> >> > My download of 3.16.12 is using SIP 5.4.0 it says:
>> >> >
>> >> > image.png
>> >>
>> >> Is that osgeo4w or msi?
>> >>
>> >> How to check?
>> >
>> > Looks like it DOES suffer the SIP Python GIL regression. Running this
>> > script in the console will trigger it:
>> >
>> > feedback=QgsFeedback()
>> > req= QNetworkRequest(QUrl('https://qgis.org'))
>> > print(QgsBlockingNetworkRequest().get(req,True,feedback))
>> >
>> > This works fine on 3.16.11, but hangs on 3.16.12 (and other builds
>> > based on sip > 4)
>>
>> At least on a WIndows machine with the v2 osgeo4w install I can confirm
>> the immediate hang in 3.22
>> Ah, and also 3.16.2 just freshly downloaded
>>
>> While on my 3.22 on Debian the print returns immediately...
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From peter.petrik at lutraconsulting.co.uk  Wed Nov  3 00:59:22 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Wed, 3 Nov 2021 08:59:22 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsgKr1UntaH+H0dc9cW4TdQesfj2C996LAhfP6wmJCcQnQ@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <CAAi8Yg_FzBdHo7T1qZ9TdC2+=m_eA6NGczBvff=OFhGpeKTo-A@mail.gmail.com>
 <6f036289-bece-5bc0-7833-13a9e331867e@duif.net>
 <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
 <1ddd6855b4723e55d000da59b85f65be@duif.net>
 <CA+T_MsKt=-dMLYV2zN2BykJ13d_WZM2_ZR0-w2uPzktg0nx8Zg@mail.gmail.com>
 <CAB28AsgKr1UntaH+H0dc9cW4TdQesfj2C996LAhfP6wmJCcQnQ@mail.gmail.com>
Message-ID: <CA+T_MsJo+6QsUW6ZKpG5tzNmd0_NLGyy0rH9Efb9n2YYAo_a0g@mail.gmail.com>

We had a similar issue with 3.20 on mac, where certain combination of sip +
python version was broken, see
https://github.com/qgis/QGIS/issues/44182#issuecomment-914168394

P.

On Wed, Nov 3, 2021 at 8:55 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Wed, 3 Nov 2021 at 17:53, Peter Petrik
> <peter.petrik at lutraconsulting.co.uk> wrote:
> >
> > On macOS 10.15 with QGIS 3.22 (official release) it works correctly
> (python: sip 4.19.25)
>
> The difference is the sip version. QGIS on versions 5+ is basically
> completely broken.
>
> Nyall
>
> >
> > P.
> >
> > On Wed, Nov 3, 2021 at 7:56 AM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
> >>
> >> On 2021-11-03 06:19, Nyall Dawson wrote:
> >> > On Wed, 3 Nov 2021 at 14:58, Richard Duivenvoorde <
> rdmailings at duif.net>
> >> > wrote:
> >> >>
> >> >> On 11/3/21 2:15 AM, Nathan Woodrow wrote:
> >> >> > My download of 3.16.12 is using SIP 5.4.0 it says:
> >> >> >
> >> >> > image.png
> >> >>
> >> >> Is that osgeo4w or msi?
> >> >>
> >> >> How to check?
> >> >
> >> > Looks like it DOES suffer the SIP Python GIL regression. Running this
> >> > script in the console will trigger it:
> >> >
> >> > feedback=QgsFeedback()
> >> > req= QNetworkRequest(QUrl('https://qgis.org'))
> >> > print(QgsBlockingNetworkRequest().get(req,True,feedback))
> >> >
> >> > This works fine on 3.16.11, but hangs on 3.16.12 (and other builds
> >> > based on sip > 4)
> >>
> >> At least on a WIndows machine with the v2 osgeo4w install I can confirm
> >> the immediate hang in 3.22
> >> Ah, and also 3.16.2 just freshly downloaded
> >>
> >> While on my 3.22 on Debian the print returns immediately...
> >>
> >> Regards,
> >>
> >> Richard Duivenvoorde
> >>
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211103/8607bb3e/attachment.html>

From andreaerdna at libero.it  Wed Nov  3 01:01:02 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Wed, 3 Nov 2021 09:01:02 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
References: <CAB28AsiT9gO706C+dOEJvdQcAn+Ur4BtMCKBu1f9TbyPpkdMBg@mail.gmail.com>
Message-ID: <f9d5c495-2342-b62c-0b6c-75d5ff26bebd@libero.it>

I can confirm the issue on Windows using QGIS 3.16.12 (3.16.12-1) and 
3.20.0 (3.22.0-1) from OSGeo4W v2.
The issue doesn't occur on Windows using QGIS 3.16.12 (3.16.12-1) from 
OSGeo4W v1.

Regards.

Andrea Giudiceandrea

From jef at norbit.de  Wed Nov  3 02:56:51 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Wed, 3 Nov 2021 10:56:51 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
Message-ID: <20211103095651.4rutxhn2sry2kwj7@norbit.de>

Hi Nyall,

On Wed, 03. Nov 2021 at 10:33:35 +1000, Nyall Dawson wrote:
> Question: was QGIS 3.16.12 for Windows released using a sip version 5
> or 6?

osgeo4w v2 never used SIP4 and was updated to SIP6, when support for SIP5 was
broken in master.

This also made it necessary to backport the SIP6 changes to 3.16 in osgeo4w v2
as SIP5 doesn't have the sip executable anymore and only supports the
sip-build.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211103/9460d701/attachment.sig>

From jef at norbit.de  Wed Nov  3 15:12:36 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Wed, 3 Nov 2021 23:12:36 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211103095651.4rutxhn2sry2kwj7@norbit.de>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
Message-ID: <20211103221236.3a7uwfazdrxypkjw@norbit.de>

Hi,

Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16) and qgis
(3.22) packages in OSGeo4W v2 and the MSIs have been updated.

qgis-ltr-dev and qgis-rel-dev will be updated in the next round of nightlies.


J?rgen


[0] https://github.com/qgis/QGIS/pull/45829

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211103/ddeddebe/attachment.sig>

From tim at kartoza.com  Wed Nov  3 16:47:09 2021
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 3 Nov 2021 23:47:09 +0000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211103221236.3a7uwfazdrxypkjw@norbit.de>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
Message-ID: <CAES-DZQVsydw2scDPOoW_1tCi0v8aQZjMiEOZN_mKretrUwJSw@mail.gmail.com>

Huge thanks for doing this Sandro and Juergen!

Regards

Tim

On Wed, Nov 3, 2021 at 10:12 PM J?rgen E. Fischer <jef at norbit.de> wrote:

> Hi,
>
> Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16) and
> qgis
> (3.22) packages in OSGeo4W v2 and the MSIs have been updated.
>
> qgis-ltr-dev and qgis-rel-dev will be updated in the next round of
> nightlies.
>
>
> J?rgen
>
>
> [0] https://github.com/qgis/QGIS/pull/45829
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211103/0898dbd6/attachment.html>

From nyall.dawson at gmail.com  Wed Nov  3 17:11:30 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 4 Nov 2021 10:11:30 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211103221236.3a7uwfazdrxypkjw@norbit.de>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
Message-ID: <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>

On Thu, 4 Nov 2021 at 08:12, J?rgen E. Fischer <jef at norbit.de> wrote:
>
> Hi,
>
> Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16) and qgis
> (3.22) packages in OSGeo4W v2 and the MSIs have been updated.
>
> qgis-ltr-dev and qgis-rel-dev will be updated in the next round of nightlies.

Thanks!

Can we still go ahead and push a new 3.16.13 release? (Even if it's
identical to 3.16.12 for all non-windows platforms?) I think its
important so that users are notified that there's a update they NEED
to install for windows (and also so that we can advise all the tickets
which flow on for 3.16.12 users that 3.16.12 is a dud release and that
they need to update)

We also then need to push out a news feed item advising that 3.16.12
has critical issues and that all users should update to 3.16.13.

Nyall


>
>
> J?rgen
>
>
> [0] https://github.com/qgis/QGIS/pull/45829
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden            https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From andreaerdna at libero.it  Thu Nov  4 00:01:32 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Thu, 4 Nov 2021 08:01:32 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211103221236.3a7uwfazdrxypkjw@norbit.de>
References: <20211103221236.3a7uwfazdrxypkjw@norbit.de>
Message-ID: <800edfd2-a961-21e2-0ee8-cdcc7cdcc1f7@libero.it>

> J?rgen E . Fischer Wed, 03 Nov 2021 15:12:45 -0700
> 
> Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16) and qgis
> (3.22) packages in OSGeo4W v2 and the MSIs have been updated.

I've updated the qgis and qgis-ltr packages to the latest versions 
available in the OSGeo4W v2 repository (qgis 3.22.0-4 2021-Nov-03 16:55 
and qgis-ltr 3.16.12-4 2021-Nov-03 14:58): the issue no longer occurs 
with QGIS 3.22.0, while it still occurs with 3.16.12.

Regards.

Andrea Giudiceandrea

From andreaerdna at libero.it  Thu Nov  4 00:19:13 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Thu, 4 Nov 2021 08:19:13 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <800edfd2-a961-21e2-0ee8-cdcc7cdcc1f7@libero.it>
References: <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <800edfd2-a961-21e2-0ee8-cdcc7cdcc1f7@libero.it>
Message-ID: <88c2bb14-75b2-40eb-1ce9-ddb0ae52c795@libero.it>

Errata corrige: the issue no longer occurs with both the latest versions 
of QGIS 3.22.0 and QGIS 3.16.12 available in the OSGeo4W v2 repository 
(qgis 3.22.0-4 and qgis-ltr 3.16.12-4).

Best regards.

Andrea Giudiceandrea

Il 04/11/2021 08:01, Andrea Giudiceandrea ha scritto:
>> J?rgen E . Fischer Wed, 03 Nov 2021 15:12:45 -0700
>>
>> Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16) 
>> and qgis
>> (3.22) packages in OSGeo4W v2 and the MSIs have been updated.

From johannes.kroeger at wheregroup.com  Thu Nov  4 01:30:04 2021
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Thu, 4 Nov 2021 09:30:04 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211103221236.3a7uwfazdrxypkjw@norbit.de>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
Message-ID: <38057f8d-92cb-4edb-c8ab-f5620a059c02@wheregroup.com>

Hi everyone,

I am on Linux with sip 6.4.0 and a freshly built QGIS *master* 
(97b288dceef) freezes with 100% of a CPU core if I use GDAL contour in a 
modeller, which according https://github.com/qgis/QGIS/issues/45685 
would be part of this issue.

If this is PEBKAC and I should use sip 4, please excuse my mail, but 
from what I read I got the impression that any sip should work now. Of 
course I am not really sure if this freeze is exactly this issue...

Cheers, Hannes

-- 

Johannes Kr?ger / GIS-Entwickler/-Berater
WhereGroup GmbH
Eifelstra?e 7
53119 Bonn
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

---------------------------------------------
Schon gewusst?
In unserem Blog geben wir Tipps & Tricks zu
Open-Source-GIS-Software und berichten aus unserem Experten-Alltag:
https://wheregroup.com/blog/
---------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0xBF7B268A77C202D5.asc
Type: application/pgp-keys
Size: 2471 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211104/341d3d76/attachment-0001.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211104/341d3d76/attachment-0001.sig>

From johannes.kroeger at wheregroup.com  Thu Nov  4 01:40:17 2021
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Thu, 4 Nov 2021 09:40:17 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <38057f8d-92cb-4edb-c8ab-f5620a059c02@wheregroup.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <38057f8d-92cb-4edb-c8ab-f5620a059c02@wheregroup.com>
Message-ID: <d88ec90d-6602-ee75-3b71-0cef3b905cbd@wheregroup.com>

Sorry, I have take that back. All works fine! If you got a scare I owe 
you a cookie...

Am 04.11.21 um 09:30 schrieb Johannes Kr?ger (WhereGroup):
> Hi everyone,
>
> I am on Linux with sip 6.4.0 and a freshly built QGIS *master* 
> (97b288dceef) freezes with 100% of a CPU core if I use GDAL contour in 
> a modeller, which according https://github.com/qgis/QGIS/issues/45685 
> would be part of this issue.
>
> If this is PEBKAC and I should use sip 4, please excuse my mail, but 
> from what I read I got the impression that any sip should work now. Of 
> course I am not really sure if this freeze is exactly this issue...
>
> Cheers, Hannes
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater
WhereGroup GmbH
Eifelstra?e 7
53119 Bonn
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

---------------------------------------------
Schon gewusst?
In unserem Blog geben wir Tipps & Tricks zu
Open-Source-GIS-Software und berichten aus unserem Experten-Alltag:
https://wheregroup.com/blog/
---------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211104/b88e13db/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0xBF7B268A77C202D5.asc
Type: application/pgp-keys
Size: 2471 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211104/b88e13db/attachment.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211104/b88e13db/attachment.sig>

From aggelikibokari at gmail.com  Thu Nov  4 08:58:57 2021
From: aggelikibokari at gmail.com (Aggeliki B.)
Date: Thu, 4 Nov 2021 17:58:57 +0200
Subject: [QGIS-Developer] QGIS 3.22.0 - ISSUE REPORT
Message-ID: <CADad8SkmdCTMuwJq3Z8GsBvm+dwEuNJsc9+Rk4n_u92w9miaGw@mail.gmail.com>

Hello,

I would like to report an issue that occured after downloading the latest
version QGIS 3.22.0. At first everything worked fine and today I cannot
open any project that was created or opened with the latest version 3.22.0
as it crashes instantly. I removed this version from my computer and
continued with version 3.16.3 but still I cannot open any project that was
created or opened by the latest version 3.22.0. Unfortunately, my whole
work has been lost.

If this is an issue that has already been reported by other users too
and that was probably not provoked by something I did, I would kindly ask
you to fix it.

Best regards.
Aggeliki Bokari
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211104/02d034b6/attachment.html>

From senhor.neto at gmail.com  Thu Nov  4 10:23:09 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 4 Nov 2021 17:23:09 +0000
Subject: [QGIS-Developer] QGIS 3.22.0 - ISSUE REPORT
In-Reply-To: <CADad8SkmdCTMuwJq3Z8GsBvm+dwEuNJsc9+Rk4n_u92w9miaGw@mail.gmail.com>
References: <CADad8SkmdCTMuwJq3Z8GsBvm+dwEuNJsc9+Rk4n_u92w9miaGw@mail.gmail.com>
Message-ID: <CA+H0G_E=9fq_dM2-WOZ9SPQpSXB19UxXfLq2dubHMQ8D_hcwdg@mail.gmail.com>

Try creating a new profile.

Alexandre Neto

A quinta, 4/11/2021, 15:59, Aggeliki B. <aggelikibokari at gmail.com> escreveu:

> Hello,
>
> I would like to report an issue that occured after downloading the latest
> version QGIS 3.22.0. At first everything worked fine and today I cannot
> open any project that was created or opened with the latest version 3.22.0
> as it crashes instantly. I removed this version from my computer and
> continued with version 3.16.3 but still I cannot open any project that was
> created or opened by the latest version 3.22.0. Unfortunately, my whole
> work has been lost.
>
> If this is an issue that has already been reported by other users too
> and that was probably not provoked by something I did, I would kindly ask
> you to fix it.
>
> Best regards.
> Aggeliki Bokari
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211104/18a766f1/attachment.html>

From nyall.dawson at gmail.com  Thu Nov  4 15:28:33 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 5 Nov 2021 08:28:33 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
Message-ID: <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>

On Thu, 4 Nov 2021 at 10:11, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> On Thu, 4 Nov 2021 at 08:12, J?rgen E. Fischer <jef at norbit.de> wrote:
> >
> > Hi,
> >
> > Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16) and qgis
> > (3.22) packages in OSGeo4W v2 and the MSIs have been updated.
> >
> > qgis-ltr-dev and qgis-rel-dev will be updated in the next round of nightlies.
>
> Thanks!
>
> Can we still go ahead and push a new 3.16.13 release? (Even if it's
> identical to 3.16.12 for all non-windows platforms?) I think its
> important so that users are notified that there's a update they NEED
> to install for windows (and also so that we can advise all the tickets
> which flow on for 3.16.12 users that 3.16.12 is a dud release and that
> they need to update)
>
> We also then need to push out a news feed item advising that 3.16.12
> has critical issues and that all users should update to 3.16.13.

Any response to this? I feel SO strongly that we need to push this out
as a matter of urgency.

Nyall

>
> Nyall
>
>
> >
> >
> > J?rgen
> >
> >
> > [0] https://github.com/qgis/QGIS/pull/45829
> >
> > --
> > J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> > Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> > Software Engineer           D-26506 Norden            https://www.norbit.de
> > QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From jef at norbit.de  Thu Nov  4 17:25:13 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 5 Nov 2021 01:25:13 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
Message-ID: <20211105002513.s3ryip3ra4j3yobr@norbit.de>

Hi Nyall,

On Fri, 05. Nov 2021 at 08:28:33 +1000, Nyall Dawson wrote:
> > We also then need to push out a news feed item advising that 3.16.12
> > has critical issues and that all users should update to 3.16.13.
 
> Any response to this? I feel SO strongly that we need to push this out
> as a matter of urgency.

Hm, I don't.  The affected windows packages are already fixed.  People just
need to update to the latest packages.  Doing another release wouldn't change
nothing more than the version number and trigger a lot of otherwise useless
rebuilds - even on platforms that were not even affected.   And the next point
release is only two weeks away.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/4dd70bc8/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/4dd70bc8/attachment.ksh>

From nirvn.asia at gmail.com  Thu Nov  4 17:28:07 2021
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Fri, 5 Nov 2021 07:28:07 +0700
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211105002513.s3ryip3ra4j3yobr@norbit.de>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
Message-ID: <CAC_qv=oaBXGe1VQCjKOWOsxZ85zSdXfPLYGdng9bqgu33pkpug@mail.gmail.com>

Whether we release a new point release or not, we should definitely release
a public service announcement on our social media accounts.

On Fri, Nov 5, 2021, 07:25 J?rgen E. Fischer <jef at norbit.de> wrote:

> Hi Nyall,
>
> On Fri, 05. Nov 2021 at 08:28:33 +1000, Nyall Dawson wrote:
> > > We also then need to push out a news feed item advising that 3.16.12
> > > has critical issues and that all users should update to 3.16.13.
>
> > Any response to this? I feel SO strongly that we need to push this out
> > as a matter of urgency.
>
> Hm, I don't.  The affected windows packages are already fixed.  People just
> need to update to the latest packages.  Doing another release wouldn't
> change
> nothing more than the version number and trigger a lot of otherwise useless
> rebuilds - even on platforms that were not even affected.   And the next
> point
> release is only two weeks away.
>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/71166684/attachment.html>

From gdt at lexort.com  Thu Nov  4 17:42:48 2021
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 04 Nov 2021 20:42:48 -0400
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211105002513.s3ryip3ra4j3yobr@norbit.de> (=?utf-8?Q?=22J?=
 =?utf-8?Q?=C3=BCrgen?=
 E. Fischer"'s message of "Fri, 5 Nov 2021 01:25:13 +0100")
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
Message-ID: <rmia6ijo2k7.fsf@s1.lexort.com>


J?rgen E. Fischer <jef at norbit.de> writes:

> Hi Nyall,
>
> On Fri, 05. Nov 2021 at 08:28:33 +1000, Nyall Dawson wrote:
>> > We also then need to push out a news feed item advising that 3.16.12
>> > has critical issues and that all users should update to 3.16.13.
>  
>> Any response to this? I feel SO strongly that we need to push this out
>> as a matter of urgency.
>
> Hm, I don't.  The affected windows packages are already fixed.  People just
> need to update to the latest packages.  Doing another release wouldn't change
> nothing more than the version number and trigger a lot of otherwise useless
> rebuilds - even on platforms that were not even affected.   And the next point
> release is only two weeks away.

As someone who thinks releases are fundamentally about source code, I
find the "official binaries" being considered as "project releases"
tightly bound to the code being an unfortunate situation.  It took me a
minute to realize this was all about choices of dependencies in releases
of compiled binaries, and nothing about the actual 3.16.12 source
release.

WIth packager hat on, I wonder if sip 5 or 6 is truly broken, or if qgis
has a bug where sip6 is not actually buggy but does something bad on
qgis, or something else.  I didn't see a bug URL and am wondering if I
should be sticking a note in our py-sip package to  ask that it not be
updated past the current 4.19.25.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211104/c1ac63d7/attachment.sig>

From nyall.dawson at gmail.com  Thu Nov  4 17:47:31 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 5 Nov 2021 10:47:31 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211105002513.s3ryip3ra4j3yobr@norbit.de>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
Message-ID: <CAB28AsjLm+9kgiVKkq0fC-2-PcPsCzBS+6SVE=5Eo=LZ_EdQAA@mail.gmail.com>

On Fri, 5 Nov 2021 at 10:25, J?rgen E. Fischer <jef at norbit.de> wrote:
>
> Hi Nyall,
>
> On Fri, 05. Nov 2021 at 08:28:33 +1000, Nyall Dawson wrote:
> > > We also then need to push out a news feed item advising that 3.16.12
> > > has critical issues and that all users should update to 3.16.13.
>
> > Any response to this? I feel SO strongly that we need to push this out
> > as a matter of urgency.
>
> Hm, I don't.  The affected windows packages are already fixed.  People just
> need to update to the latest packages.  Doing another release wouldn't change
> nothing more than the version number and trigger a lot of otherwise useless
> rebuilds - even on platforms that were not even affected.   And the next point
> release is only two weeks away.

Mmm... I really don't think that works for end users though. Someone
who has installed qgis 3.16.12 from last week's installer has no way
of telling that they'll be affected by the bug vs someone who only
just downloaded the installer. There's no way we can put out any
announcement and say "check the about screen and if your version says
.... then you need to update".

This also gets SUPER messy for enterprise deployments, since users
won't have any way at all of knowing which installer was actually used
for their QGIS version. And for these enterprise deployments the
actual staff doing the packaging are unlikely to be running QGIS
themselves, so a notice on the news feed won't get their attention.

Suffice to say, I think the only way forward is to kill 3.16.12 with
fire and bump the version.

Nyall

From nyall.dawson at gmail.com  Thu Nov  4 17:51:20 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 5 Nov 2021 10:51:20 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <rmia6ijo2k7.fsf@s1.lexort.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de> <rmia6ijo2k7.fsf@s1.lexort.com>
Message-ID: <CAB28Asiv7Mbvb5mqFmCiAs1qZFf4b4BAYmoFF4Dwr+9ZnjFHbg@mail.gmail.com>

On Fri, 5 Nov 2021 at 10:42, Greg Troxel <gdt at lexort.com> wrote:

> As someone who thinks releases are fundamentally about source code, I
> find the "official binaries" being considered as "project releases"
> tightly bound to the code being an unfortunate situation.  It took me a
> minute to realize this was all about choices of dependencies in releases
> of compiled binaries, and nothing about the actual 3.16.12 source
> release.

Well, it IS a bit messy. The bug is triggered by a patch which is
downstream in the WINDOWS Qgis installer only. So yes, the source is
fine, no bugs there. But realistically I don't think we can wash our
hands of this issue (for all the reasons I've already pointed out),
and just need to push out 3.16.13 which is a version number bump only.
(with the required fixes in the downstream QGIS windows installer).

>
> WIth packager hat on, I wonder if sip 5 or 6 is truly broken

It's not.

>, or if qgis
> has a bug where sip6 is not actually buggy but does something bad on
> qgis, or something else.

Exactly this. And it's important to point out that the official qgis
3.16.12 source release does NOT have support for these sip versions at
all, that's a downstream patch in the Windows installer only.

3.22.0 DOES have the buggy support for sip > 4, so it is affected
regardless of the platform. (It'll only work ok on builds using sip
4).

>  I didn't see a bug URL and am wondering if I
> should be sticking a note in our py-sip package to  ask that it not be
> updated past the current 4.19.25.

That's not necessary, this is all mess on QGIS' side.

Nyall

From jef at norbit.de  Thu Nov  4 17:55:56 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 5 Nov 2021 01:55:56 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <rmia6ijo2k7.fsf@s1.lexort.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
 <rmia6ijo2k7.fsf@s1.lexort.com>
Message-ID: <20211105005556.7tgtnu2z3u5zcvu7@norbit.de>

Hi Greg,

On Thu, 04. Nov 2021 at 20:42:48 -0400, Greg Troxel wrote:
> As someone who thinks releases are fundamentally about source code, I
> find the "official binaries" being considered as "project releases"
> tightly bound to the code being an unfortunate situation.  It took me a
> minute to realize this was all about choices of dependencies in releases
> of compiled binaries, and nothing about the actual 3.16.12 source
> release.

SIP isn't broken, it's were our SIP-Bindings in 3.22.  That's meanwhile fixed
in the release branch.  The current 3.22 windows package in OSGeo4W v2 also
has that patch applied.  The release package for other platforms still have
that issue.

To build master/3.22 SIP in OSGeo4W had to be updated to support SIP6.  But
that is not supported by 3.16 at all.  So I backported the SIP6-Support to 3.16
in the OSGeo4W v2 packaging - thereby also introducing unintentionally
introducing that SIP binding issue from 3.22.  That also meanwhile fixes in
OSGeo4W v2.

The 3.16 binaries in old OSGeo4W are still built with SIP4 and therefore didn't
need those changes and are in turn unaffected. Same as the NSIS standalone
installers that are made from old OSGeo4W.

The MSI standalone installer are made from OSGeo4W v2 and were also updated
with the fixes binaries from OSGeo4W.

The affected versions were all of 3.22.0 and 3.16.12 only in OSGeo4W v2.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden              https://www.norbit.de
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/d5ed6a97/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/d5ed6a97/attachment.ksh>

From jef at norbit.de  Thu Nov  4 18:38:18 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 5 Nov 2021 02:38:18 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsjLm+9kgiVKkq0fC-2-PcPsCzBS+6SVE=5Eo=LZ_EdQAA@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
 <CAB28AsjLm+9kgiVKkq0fC-2-PcPsCzBS+6SVE=5Eo=LZ_EdQAA@mail.gmail.com>
Message-ID: <20211105013818.zr4ulyne7qkj4zvb@norbit.de>

Hi Nyall,

On Fri, 05. Nov 2021 at 10:47:31 +1000, Nyall Dawson wrote:
> This also gets SUPER messy for enterprise deployments, since users
> won't have any way at all of knowing which installer was actually used
> for their QGIS version. And for these enterprise deployments the
> actual staff doing the packaging are unlikely to be running QGIS
> themselves, so a notice on the news feed won't get their attention.

Oh well, that makes sense.  Yet another release friday tomorrow?


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/838eb0bc/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/838eb0bc/attachment.ksh>

From nyall.dawson at gmail.com  Thu Nov  4 18:43:34 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 5 Nov 2021 11:43:34 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211105013818.zr4ulyne7qkj4zvb@norbit.de>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
 <CAB28AsjLm+9kgiVKkq0fC-2-PcPsCzBS+6SVE=5Eo=LZ_EdQAA@mail.gmail.com>
 <20211105013818.zr4ulyne7qkj4zvb@norbit.de>
Message-ID: <CAB28Asg618eq5vN+5f_AOPAjLF8TrOzp9zWrG+UW5W+-iWr-Sg@mail.gmail.com>

On Fri, 5 Nov 2021 at 11:38, J?rgen E. Fischer <jef at norbit.de> wrote:
>
> Hi Nyall,
>
> On Fri, 05. Nov 2021 at 10:47:31 +1000, Nyall Dawson wrote:
> > This also gets SUPER messy for enterprise deployments, since users
> > won't have any way at all of knowing which installer was actually used
> > for their QGIS version. And for these enterprise deployments the
> > actual staff doing the packaging are unlikely to be running QGIS
> > themselves, so a notice on the news feed won't get their attention.
>
> Oh well, that makes sense.  Yet another release friday tomorrow?

Many thanks J?rgen -- I appreciate your flexibility here!

(Yet another beer/meal/... I owe you at the next in-person hackfest!)

Nyall

>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden            https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC

From jef at norbit.de  Thu Nov  4 18:55:20 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 5 Nov 2021 02:55:20 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28Asg618eq5vN+5f_AOPAjLF8TrOzp9zWrG+UW5W+-iWr-Sg@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
 <CAB28AsjLm+9kgiVKkq0fC-2-PcPsCzBS+6SVE=5Eo=LZ_EdQAA@mail.gmail.com>
 <20211105013818.zr4ulyne7qkj4zvb@norbit.de>
 <CAB28Asg618eq5vN+5f_AOPAjLF8TrOzp9zWrG+UW5W+-iWr-Sg@mail.gmail.com>
Message-ID: <20211105015520.grugd57cfxvqkk6z@norbit.de>

Hi Nyall,

On Fri, 05. Nov 2021 at 11:43:34 +1000, Nyall Dawson wrote:
> On Fri, 5 Nov 2021 at 11:38, J?rgen E. Fischer <jef at norbit.de> wrote:
> > On Fri, 05. Nov 2021 at 10:47:31 +1000, Nyall Dawson wrote:
> > > This also gets SUPER messy for enterprise deployments, since users
> > > won't have any way at all of knowing which installer was actually used
> > > for their QGIS version. And for these enterprise deployments the
> > > actual staff doing the packaging are unlikely to be running QGIS
> > > themselves, so a notice on the news feed won't get their attention.

BTW they could just run the included osgeo4w installer to see which version is
installed, perhaps even see whether it offers an update.  And if that doesn't
work for some reason they could still look for qgis-ltr-3.16.12-4 in
etc/setup/installed.db.

Sure, still?


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/a73e4d84/attachment.sig>

From rdmailings at duif.net  Fri Nov  5 05:13:41 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 5 Nov 2021 13:13:41 +0100
Subject: [QGIS-Developer] sip build err on Debian Testing?
Message-ID: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>

Hi, 

Anybody else here building QGIS on Debian Testing?

Even after a fresh build-dir I get:

sip: /usr/lib/python3/dist-packages/PyQt5/bindings/QtCore/QtCoremod.sip:23: syntax error
[2165/5247] Generating 3d/sip_3dpart0.cpp, 3d/sip_3dpart1.cpp, 3d/sip_3dpart2.cpp, 3d/sip_3dpart3.cpp, 3d/sip_3dpart4...3dpart10.cpp, 3d/sip_3dpart11.cpp, 3d/sip_3dpart12.cpp, 3d/sip_3dpart13.cpp, 3d/sip_3dpart14.cpp, 3d/sip_3dpart15.cpp
FAILED: python/3d/sip_3dpart0.cpp python/3d/sip_3dpart1.cpp python/3d/sip_3dpart2.cpp python/3d/sip_3dpart3.cpp python/3d/sip_3dpart4.cpp python/3d/sip_3dpart5.cpp python/3d/sip_3dpart6.cpp python/3d/sip_3dpart7.cpp python/3d/sip_3dpart8.cpp python/3d/sip_3dpart9.cpp python/3d/sip_3dpart10.cpp python/3d/sip_3dpart11.cpp python/3d/sip_3dpart12.cpp python/3d/sip_3dpart13.cpp python/3d/sip_3dpart14.cpp python/3d/sip_3dpart15.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart0.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart1.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart2.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart3.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart4.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart5.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart6.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart7.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart8.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart9.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart10.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart11.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart12.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart13.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart14.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart15.cpp 

cd /home/richard/git/qgis/build/python && /usr/bin/cmake -E echo && /usr/bin/cmake -E touch /home/richard/git/qgis/build/python/3d/sip_3dpart0.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart1.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart2.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart3.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart4.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart5.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart6.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart7.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart8.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart9.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart10.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart11.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart12.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart13.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart14.cpp /home/richard/git/qgis/build/python/3d/sip_3dpart15.cpp && /usr/bin/sip -w -e -x TESTS -x ANDROID -x ARM -x VECTOR_MAPPED_TYPE -n PyQt5.sip -t Qt_5_15_0 -t WS_X11 -g -o -a /home/richard/git/qgis/build/python/qgis.qgis3d.api -n PyQt5.sip -y /home/richard/git/qgis/build/output/python/qgis/_qgis3d.pyi -j 16 -c /home/richard/git/qgis/build/python/3d -I /home/richard/git/qgis/build/python/3d -I /usr/lib/python3/dist-packages/PyQt5/bindings -I /home/richard/git/qgis/python /home/richard/git/qgis/build/python/3d/3d.sip

Anybody else seeing this?

$ /usr/bin/sip -V
4.19.25

$  vim /usr/lib/python3/dist-packages/PyQt5/bindings/QtCore/QtCoremod.sip +23
is:

%Module(name=PyQt5.QtCore, call_super_init=True, default_VirtualErrorHandler=PyQt5, keyword_arguments="Optional", use_limited_api=True, py_ssize_t_clean=True)

Any hints?

Regards,

Richard Duivenvoorde

From jef at norbit.de  Fri Nov  5 05:23:14 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 5 Nov 2021 13:23:14 +0100
Subject: [QGIS-Developer] sip build err on Debian Testing?
In-Reply-To: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
References: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
Message-ID: <20211105122314.vphl6rbsaxnuseex@norbit.de>

Hi Richard,

On Fri, 05. Nov 2021 at 13:13:41 +0100, Richard Duivenvoorde wrote:
> Anybody else here building QGIS on Debian Testing?

Yes.

https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=998567

Our unstable builds use sip 6.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/4de1ee5d/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/4de1ee5d/attachment.ksh>

From gdt at lexort.com  Fri Nov  5 05:24:36 2021
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 05 Nov 2021 08:24:36 -0400
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28AsjLm+9kgiVKkq0fC-2-PcPsCzBS+6SVE=5Eo=LZ_EdQAA@mail.gmail.com>
 (Nyall Dawson's message of "Fri, 5 Nov 2021 10:47:31 +1000")
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
 <CAB28AsjLm+9kgiVKkq0fC-2-PcPsCzBS+6SVE=5Eo=LZ_EdQAA@mail.gmail.com>
Message-ID: <rmiee7un62j.fsf@s1.lexort.com>


Nyall Dawson <nyall.dawson at gmail.com> writes:

> Mmm... I really don't think that works for end users though. Someone
> who has installed qgis 3.16.12 from last week's installer has no way
> of telling that they'll be affected by the bug vs someone who only
> just downloaded the installer. There's no way we can put out any
> announcement and say "check the about screen and if your version says
> .... then you need to update".

I'm not trying to suggest that the plan be changed.

The problem here is that what's being released by these binary
installers is a packaging system, not the source and in general
packaging systems need another place to put a version they can increment
when there is a change to the packaging configuration (included patches,
build options, etc.).

I suspect that because this is "qgis binary release" it isn't being
viewed as a packagaging system.


As an example, in pkgsrc had we backported a patch for wip, and we ha

  qgis-3.16.12

and then if we fixed  that we'd have

  qgis-3.16.12nb1

which says that it is a packaging change but the same upstream tarball.

As I understand things Debian etc. does the same thing (but the version
numbers look different, I think "-N" suffix).
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/08dec906/attachment.sig>

From sebastic at xs4all.nl  Fri Nov  5 05:29:24 2021
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 5 Nov 2021 13:29:24 +0100
Subject: [QGIS-Developer] sip build err on Debian Testing?
In-Reply-To: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
References: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
Message-ID: <072be3d3-c7d1-1f41-1081-973c325c2ece@xs4all.nl>

On 11/5/21 13:13, Richard Duivenvoorde wrote:
> Anybody else seeing this?

Yes.

> Any hints?

pyqt5 was recently updated to use sip6:

 
https://tracker.debian.org/news/1272065/accepted-pyqt5-5156dfsg-1-source-into-unstable/

Adding the sip6 changes from #45128 & #45829 and updating the packaging 
for sip6 helps with this issue, but the build still fails:

  Querying qmake about your Qt installation...
  These bindings will be built: analysis.
  Generating the analysis bindings...
  sip-build: Unable to find file "QtCore/QtCoremod.sip"

  ...

  Querying qmake about your Qt installation...
  These bindings will be built: 3d.
  Generating the 3d bindings...
  sip-build: Unable to find file "QtXml/QtXmlmod.sip"

These files are provided by pyqt5-dev under
/usr/lib/python3/dist-packages/PyQt5/bindings/ but not found for some 
reason.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From rdmailings at duif.net  Fri Nov  5 06:18:14 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 5 Nov 2021 14:18:14 +0100
Subject: [QGIS-Developer] sip build err on Debian Testing?
In-Reply-To: <072be3d3-c7d1-1f41-1081-973c325c2ece@xs4all.nl>
References: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
 <072be3d3-c7d1-1f41-1081-973c325c2ece@xs4all.nl>
Message-ID: <aec3c13a-8ff8-0628-ad62-a506b8dfa8be@duif.net>

On 11/5/21 1:29 PM, Sebastiaan Couwenberg wrote:
> ?sip-build: Unable to find file "QtXml/QtXmlmod.sip"
> 
> These files are provided by pyqt5-dev under
> /usr/lib/python3/dist-packages/PyQt5/bindings/ but not found for some reason.

My problem is not so much failing because those files are not found, but more (like Juergen's issue is pointing to), the sip 4.19.25 complaining about a syntax error?

Trying to find sip6 I found:
https://packages.debian.org/search?searchon=sourcenames&keywords=sip6

source package pointing to Binary packages: python3-sipbuild, sip-tools, sip6-doc

but even after installing those I do not have sip6 or sip telling me it is 6.x
There is 
$ /usr/bin/sip-build -V
6.4.0
but that is proably something else... ?

dpkg -S sip6 does not reveal anything too

Anything else I can do (other then wait and hope somebody is able to fix this...)?

Regards,

Richard DUivenvoorde


From gdt at lexort.com  Fri Nov  5 06:47:51 2021
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 05 Nov 2021 09:47:51 -0400
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <20211105005556.7tgtnu2z3u5zcvu7@norbit.de> (=?utf-8?Q?=22J?=
 =?utf-8?Q?=C3=BCrgen?=
 E. Fischer"'s message of "Fri, 5 Nov 2021 01:55:56 +0100")
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <CAB28AsgzcR6f8qgr7m5bae0jZbQbVJ1F2R+CSB3prgkEPx+4Wg@mail.gmail.com>
 <20211105002513.s3ryip3ra4j3yobr@norbit.de>
 <rmia6ijo2k7.fsf@s1.lexort.com>
 <20211105005556.7tgtnu2z3u5zcvu7@norbit.de>
Message-ID: <rmitugqlnnc.fsf@s1.lexort.com>


Thanks to both of you for explaining.

I'm going to ignore sip 5, as it seems like some things need 4 (which
today means 4.19.25), and some things support "modern sip" and are thus
ok with 6.

So as I see it:

  In packaging, given that qgis is at 3.16, I need to keep sip at
  4.19.25 because 3.16.x does not support sip 6 at all.  (Or have
  multiple sip versions, but I don't want to go there.)

  3.22.0 has broken support for sip 6.  I should be able to build it
  with 4.19.25, but not 6.

  The 3.22 maintenance branch has a fix for sip 6, so 3.22.1, when it
  appears, will be ok with sip 6.

  3.22 is headed for LTR, but the LTR label has not yet been moved to
  it.  So in pkgsrc, I should leave qgis at 3.16 for now.  January would
  be a good time to change pkgsrc, given our release schedule, and by
  then 3.22 might or might not be blessed as LTR.

  3.22 will work fine with sip 4, and thus I can upgrade qgis to 3.22,
  and ask if any other sip users need 4 vs 6, and then see about a sip
  ugprade.

and

  In INSTALL.md on 3.16.x, it says that sip must be >= 4.12, and doesn't
  mention < 5.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211105/c1736409/attachment.sig>

From sebastic at xs4all.nl  Fri Nov  5 06:48:34 2021
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 5 Nov 2021 14:48:34 +0100
Subject: [QGIS-Developer] sip build err on Debian Testing?
In-Reply-To: <aec3c13a-8ff8-0628-ad62-a506b8dfa8be@duif.net>
References: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
 <072be3d3-c7d1-1f41-1081-973c325c2ece@xs4all.nl>
 <aec3c13a-8ff8-0628-ad62-a506b8dfa8be@duif.net>
Message-ID: <85f46b13-b36e-809f-30bd-8f3d04b0926b@xs4all.nl>

On 11/5/21 14:18, Richard Duivenvoorde wrote:
> On 11/5/21 1:29 PM, Sebastiaan Couwenberg wrote:
>>  ?sip-build: Unable to find file "QtXml/QtXmlmod.sip"
>>
>> These files are provided by pyqt5-dev under
>> /usr/lib/python3/dist-packages/PyQt5/bindings/ but not found for some reason.
> 
> My problem is not so much failing because those files are not found, but more (like Juergen's issue is pointing to), the sip 4.19.25 complaining about a syntax error?
> 
> Trying to find sip6 I found:
> https://packages.debian.org/search?searchon=sourcenames&keywords=sip6
> 
> source package pointing to Binary packages: python3-sipbuild, sip-tools, sip6-doc
> 
> but even after installing those I do not have sip6 or sip telling me it is 6.x
> There is
> $ /usr/bin/sip-build -V
> 6.4.0
> but that is proably something else... ?

That's what's used to generate the SIP bindings.

> dpkg -S sip6 does not reveal anything too

python3-pyqtbuild, python3-sipbuild, and sip-tools are used for sip6 
instead of python3-sip-dev & python3-sip.

sip6 is the source package, not one of its binary packages:

  https://tracker.debian.org/pkg/sip6

> Anything else I can do (other then wait and hope somebody is able to fix this...)?

I applied these changes:

 
https://git.linuxminded.nl/?p=pkg-grass/qgis;a=commitdiff;h=ce78563091b57c25e5ab5294d5b8eb28412370e6
 
https://git.linuxminded.nl/?p=pkg-grass/qgis;a=commitdiff;h=e7456d3d58fd30d80dd6564accdf1294ca682fcc

But as mentioned before, it's not sufficient to fix the qgis build.

It takes about 3 hours to build qgis on my system, and since this 
failures happens at 97% it takes a lot of time to troubleshoot this issue.

I had hoped that 3.16.13 would have fixed this, but it contains no 
relevant changes. Many of the changes mentioned in the ChangeLog seem to 
have been reverted, see:

  https://github.com/qgis/QGIS/compare/final-3_16_12...final-3_16_13

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From bo.victor.thomsen at gmail.com  Sat Nov  6 03:48:29 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Sat, 6 Nov 2021 11:48:29 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
Message-ID: <e2391c67-2758-b6aa-ba56-62005b7a4737@gmail.com>

When will? users and GIS/IT administrators be notified of this mishap ?

There must a lot of user affected by this..

Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 04-11-2021 kl. 01:11 skrev Nyall Dawson:
> On Thu, 4 Nov 2021 at 08:12, J?rgen E. Fischer <jef at norbit.de> wrote:
>> Hi,
>>
>> Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16) and qgis
>> (3.22) packages in OSGeo4W v2 and the MSIs have been updated.
>>
>> qgis-ltr-dev and qgis-rel-dev will be updated in the next round of nightlies.
> Thanks!
>
> Can we still go ahead and push a new 3.16.13 release? (Even if it's
> identical to 3.16.12 for all non-windows platforms?) I think its
> important so that users are notified that there's a update they NEED
> to install for windows (and also so that we can advise all the tickets
> which flow on for 3.16.12 users that 3.16.12 is a dud release and that
> they need to update)
>
> We also then need to push out a news feed item advising that 3.16.12
> has critical issues and that all users should update to 3.16.13.
>
> Nyall
>
>
>>
>> J?rgen
>>
>>
>> [0] https://github.com/qgis/QGIS/pull/45829
>>
>> --
>> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
>> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
>> Software Engineer           D-26506 Norden            https://www.norbit.de
>> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From ernst at pleiszenburg.de  Sat Nov  6 04:43:56 2021
From: ernst at pleiszenburg.de (Sebastian M. Ernst)
Date: Sat, 6 Nov 2021 12:43:56 +0100
Subject: [QGIS-Developer] sip build err on Debian Testing?
In-Reply-To: <85f46b13-b36e-809f-30bd-8f3d04b0926b@xs4all.nl>
References: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
 <072be3d3-c7d1-1f41-1081-973c325c2ece@xs4all.nl>
 <aec3c13a-8ff8-0628-ad62-a506b8dfa8be@duif.net>
 <85f46b13-b36e-809f-30bd-8f3d04b0926b@xs4all.nl>
Message-ID: <ca52298b-3df4-2079-49b2-4c849ce09394@pleiszenburg.de>


Am 05.11.21 um 14:48 schrieb Sebastiaan Couwenberg:
> [...]
> It takes about 3 hours to build qgis on my system, and since this
> failures happens at 97% it takes a lot of time to troubleshoot this issue.

I am lacking time to look into this but I could offer a fast
Ubuntu-20.4-based build server if it is of any help? Build time in
between 10 to 15 minutes with ccache, ~60 minutes without.

From even.rouault at spatialys.com  Sat Nov  6 13:46:24 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 6 Nov 2021 21:46:24 +0100
Subject: [QGIS-Developer] Leveraging Conda-Forge to create QGIS installers ?
Message-ID: <78efdf16-3f3a-0c22-1c12-65f50b876cee@spatialys.com>

Hi,

Probably a topic that can raise passions and on which I'm moderately 
legitimate to speak, but shouldn't we seriously consider leveraging the 
Conda / Conda-Forge (https://conda-forge.org/) ecosystem for QGIS 
packaging, especially on the Windows and Mac platforms ? QGIS depends on 
a lot of external dependencies, and building them and updating them is 
really about maintaining a packaging system, and QGIS has two such 
separate and bespoke systems for Windows (OSGeo4W) and Mac 
(QGIS-Mac-Packager).? The ideal vision would be that the QGIS project 
mostly maintains the bits specific to QGIS, but not be the sole 
maintainer of its dependencies such as QT, GDAL (and its many 
dependencies), PDAL, GRASS etc, as it is today. Conda-Forge provides a 
truly collaborative environment and active community that already 
bundles a number of those dependencies, and QGIS is already there (not 
full capabilities yet, due to some dependencies missing. That would be 
one of the points to address). The Conda-Forge community is really 
vibrant (if you look at 
https://github.com/conda-forge/staged-recipes/pulls?q=is%3Apr+is%3Aclosed, 
you can see that 20 packages were added in the last 24 hours!). It is 
also a NumFocus sponsored project. It has support from a number of 
institutions. It is unlikely to disappear anytime soon.

There would certainly work needed to build installers from them. I found 
https://github.com/conda/constructor project where you can build 
standalone installers from Conda packages, but was told it is perhaps 
not super mature.? Even if QGIS needs require a dedicated installer with 
custom bits, leveraging already packaged dependencies would probably be 
a big enough win compared to the current situation where the whole stack 
needs to be built and rebuilt from scratch by only a few knowledgeable 
people, on non-shared infrastructure.

There would be the possibility to pin dependencies at certain known good 
points, for example to base LTR builds on top of them.

I guess also that Conda based installers could help for plugins that 
require installing native or Python dependencies, but that'd be already 
more a secondary advantage.

Another proof that Conda is to be taken seriously: 
https://developers.arcgis.com/python/guide/understanding-conda/

I'm not saying this is a magical solution: there would clearly be a 
significant amount of work and technical hurdles to solve to reach the 
same degree of maturity as our current installers, but it is probably an 
investment worth considering for the long term.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sebastic at xs4all.nl  Sun Nov  7 01:44:30 2021
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sun, 7 Nov 2021 09:44:30 +0100
Subject: [QGIS-Developer] sip build err on Debian Testing?
In-Reply-To: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
References: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
Message-ID: <950bbe44-7e3f-ec46-9795-25eb48cd08ca@xs4all.nl>

On 11/5/21 13:13, Richard Duivenvoorde wrote:
> sip: /usr/lib/python3/dist-packages/PyQt5/bindings/QtCore/QtCoremod.sip:23: syntax error
It's fixed in sip4 (4.19.25+dfsg-3):

 
https://tracker.debian.org/news/1274126/accepted-sip4-41925dfsg-3-source-into-unstable/

If blockers arise, it should migrate to testing in 5 days. You can 
install it from unstable in the mean time.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From senhor.neto at gmail.com  Sun Nov  7 07:53:56 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Sun, 7 Nov 2021 15:53:56 +0000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <e2391c67-2758-b6aa-ba56-62005b7a4737@gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <e2391c67-2758-b6aa-ba56-62005b7a4737@gmail.com>
Message-ID: <CA+H0G_HLjKPyCT0nGgASq7oTyqQGhJbb1VvggwYRtw_p5bnYHw@mail.gmail.com>

Hi Bo,

Here:

https://blog.qgis.org/2021/11/06/psa-update-to-3-16-13/

Alexandre Neto


A s?bado, 6/11/2021, 10:48, Bo Victor Thomsen <bo.victor.thomsen at gmail.com>
escreveu:

> When will  users and GIS/IT administrators be notified of this mishap ?
>
> There must a lot of user affected by this..
>
> Med venlig hilsen / Kind regards
>
> Bo Victor Thomsen
>
> Den 04-11-2021 kl. 01:11 skrev Nyall Dawson:
> > On Thu, 4 Nov 2021 at 08:12, J?rgen E. Fischer <jef at norbit.de> wrote:
> >> Hi,
> >>
> >> Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16)
> and qgis
> >> (3.22) packages in OSGeo4W v2 and the MSIs have been updated.
> >>
> >> qgis-ltr-dev and qgis-rel-dev will be updated in the next round of
> nightlies.
> > Thanks!
> >
> > Can we still go ahead and push a new 3.16.13 release? (Even if it's
> > identical to 3.16.12 for all non-windows platforms?) I think its
> > important so that users are notified that there's a update they NEED
> > to install for windows (and also so that we can advise all the tickets
> > which flow on for 3.16.12 users that 3.16.12 is a dud release and that
> > they need to update)
> >
> > We also then need to push out a news feed item advising that 3.16.12
> > has critical issues and that all users should update to 3.16.13.
> >
> > Nyall
> >
> >
> >>
> >> J?rgen
> >>
> >>
> >> [0] https://github.com/qgis/QGIS/pull/45829
> >>
> >> --
> >> J?rgen E. Fischer           norBIT GmbH             Tel.
> +49-4931-918175-31
> >> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax.
> +49-4931-918175-50
> >> Software Engineer           D-26506 Norden
> https://www.norbit.de
> >> QGIS release manager (PSC)  Germany                 IRC: jef on
> Libera|OFTC
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211107/f80be90f/attachment.html>

From tim at kartoza.com  Sun Nov  7 14:59:57 2021
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 7 Nov 2021 22:59:57 +0000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CA+H0G_HLjKPyCT0nGgASq7oTyqQGhJbb1VvggwYRtw_p5bnYHw@mail.gmail.com>
References: <CAB28AsjyEkJtLF_epe4Yiv1aARKFRqhqG2uLD7F54MpuRxWFXA@mail.gmail.com>
 <20211103095651.4rutxhn2sry2kwj7@norbit.de>
 <20211103221236.3a7uwfazdrxypkjw@norbit.de>
 <CAB28Ash94RbMBHm+NfUANRTSQjx2EGCot8YQBAFBKvVtVPEvyA@mail.gmail.com>
 <e2391c67-2758-b6aa-ba56-62005b7a4737@gmail.com>
 <CA+H0G_HLjKPyCT0nGgASq7oTyqQGhJbb1VvggwYRtw_p5bnYHw@mail.gmail.com>
Message-ID: <CAES-DZTy57nEefAx8AAYBCp6hROykh7cE7erU6YTFcFyGTDhXA@mail.gmail.com>

Hi all

I also put a message in the feed so it will arrive in every QGIS desktop....

Regards

Tim

On Sun, Nov 7, 2021 at 3:54 PM Alexandre Neto <senhor.neto at gmail.com> wrote:

> Hi Bo,
>
> Here:
>
> https://blog.qgis.org/2021/11/06/psa-update-to-3-16-13/
>
> Alexandre Neto
>
>
> A s?bado, 6/11/2021, 10:48, Bo Victor Thomsen <bo.victor.thomsen at gmail.com>
> escreveu:
>
>> When will  users and GIS/IT administrators be notified of this mishap ?
>>
>> There must a lot of user affected by this..
>>
>> Med venlig hilsen / Kind regards
>>
>> Bo Victor Thomsen
>>
>> Den 04-11-2021 kl. 01:11 skrev Nyall Dawson:
>> > On Thu, 4 Nov 2021 at 08:12, J?rgen E. Fischer <jef at norbit.de> wrote:
>> >> Hi,
>> >>
>> >> Sandro's fixes from #45829[0] have been applied to the qgis-ltr (3.16)
>> and qgis
>> >> (3.22) packages in OSGeo4W v2 and the MSIs have been updated.
>> >>
>> >> qgis-ltr-dev and qgis-rel-dev will be updated in the next round of
>> nightlies.
>> > Thanks!
>> >
>> > Can we still go ahead and push a new 3.16.13 release? (Even if it's
>> > identical to 3.16.12 for all non-windows platforms?) I think its
>> > important so that users are notified that there's a update they NEED
>> > to install for windows (and also so that we can advise all the tickets
>> > which flow on for 3.16.12 users that 3.16.12 is a dud release and that
>> > they need to update)
>> >
>> > We also then need to push out a news feed item advising that 3.16.12
>> > has critical issues and that all users should update to 3.16.13.
>> >
>> > Nyall
>> >
>> >
>> >>
>> >> J?rgen
>> >>
>> >>
>> >> [0] https://github.com/qgis/QGIS/pull/45829
>> >>
>> >> --
>> >> J?rgen E. Fischer           norBIT GmbH             Tel.
>> +49-4931-918175-31
>> >> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax.
>> +49-4931-918175-50
>> >> Software Engineer           D-26506 Norden
>> https://www.norbit.de
>> >> QGIS release manager (PSC)  Germany                 IRC: jef on
>> Libera|OFTC
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211107/0c7ffd23/attachment.html>

From franksalas1965 at gmail.com  Sun Nov  7 18:28:19 2021
From: franksalas1965 at gmail.com (Francisco Danubio Salas Rosette)
Date: Sun, 7 Nov 2021 21:28:19 -0500
Subject: [QGIS-Developer] Error changing the value of geometry using
 changeGeometryValues in SpatiaLite layer
Message-ID: <CAGE4LheS6VDRaOOTVR9rMTzF7EXu5Ca+Y2MY91E0mj4MVtMkVQ@mail.gmail.com>

Hi,

I am trying to update a geometry using changeGeometryValues, it works fine
when the layer is of type shp or geopakage, but when I use it in
SpatialLite layer it gives me the following error.

This is part of the code that I use. How can I solve this error?

patialLite layer it gives me the following error.

This is part of the code that I use. How can I solve this error?


feats1 = [ feat for feat in
QgsProject.instance().mapLayersByName('trapecio_lineal')[0].getFeatures()
]

feats2 = [ feat for feat in
QgsProject.instance().mapLayersByName('malezas_areal')[0].getFeatures()
]

tempLayer = QgsVectorLayer('Polygon?crs=EPSG:3795', 'templayer', 'memory')
dptemp = tempLayer.dataProvider()
feattemp = QgsFeature()
for feats_trapecio in feats1:
    geom1 = feats_trapecio.geometry()
    iter = feats_trapecio.geometry().vertices()
    listOfVertices = []
    while iter.hasNext():
        vertex = iter.next()
        listOfVertices.append([vertex.x(), vertex.y()])

    poligonotrapecio = listOfVertices

    points =[]

    for i in range(len(poligonotrapecio)):
        point=QgsPointXY(float(poligonotrapecio[i][0]),
float(poligonotrapecio[i][1]))
        points.append(point)

    polig = QgsGeometry.fromPolygonXY([points])
    feattemp.setGeometry(polig)

    tempLayer.dataProvider().addFeatures([feattemp])
    tempLayer.commitChanges()
    geomtemplayer = feattemp.geometry()

    for feats in feats2:
        geom2 = feats.geometry()
        fid = feats.id()

        if geomtemplayer.intersects(geom2):

            geom4 = geom2.intersection(geomtemplayer)

            QgsProject.instance().mapLayersByName('malezas_areal')[0].dataProvider().changeGeometryValues({fid:
geom4})

QgsProject.instance().mapLayersByName('malezas_areal')[0].commitChanges()
QgsProject.instance().addMapLayer(tempLayer)

QgsProject.instance().removeMapLayer(tempLayer.id())













This is the error that appears in the Qgis panel:

Error de SQLite: areas_verdes_y_terrenos.malezas_areal.GEOMETRY violates
Geometry constraint [geom-type or SRID not allowed] SQL: UPDATE
"areas_verdes_y_terrenos.malezas_areal" SET "geometry"=GeomFromWKB(?, 3795)
WHERE "ogc_fid"=?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211107/3f05c245/attachment-0001.html>

From denis.rouzaud at gmail.com  Mon Nov  8 00:44:00 2021
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Mon, 8 Nov 2021 09:44:00 +0100
Subject: [QGIS-Developer] failing MingW test
Message-ID: <CAMtsY+YUADdBT7cJW2Sh7zGPu1pXj7d_c=aP-hUh=d76C+P4nQ@mail.gmail.com>

Hi all,

MingW builds are failing for a few hours due to failing installation of
libopencv.
For instance:
https://github.com/qgis/QGIS/runs/4136388874?check_suite_focus=true

I have temporarily removed the test from the master branch protection.

Kind regards,
Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211108/16c851f7/attachment.html>

From joana at doublebyte.net  Mon Nov  8 01:27:27 2021
From: joana at doublebyte.net (Joana Simoes)
Date: Mon, 8 Nov 2021 10:27:27 +0100
Subject: [QGIS-Developer] Geospatial API Code Sprint - OGC/ISO
Message-ID: <bb4610bb-b259-9ef7-9765-b5ad3b693c52@doublebyte.net>

Hello,

OGC and ISO would like to invite all QGIS developers to participate in 
the November Virtual Code Sprint (15-17th Nov), focused on the OGC API 
Features/ ISO 19168-1:2020 standards.

https://github.com/opengeospatial/developer-events/wiki/November-2021-Geospatial-API-Code-Sprint

If you want to update the support for these standards in QGIS or 
associated plugins, this sprint could provide a good opportunity of 
getting work done, while getting support from other developers and 
editors of the standards. If you don't know much about these standards 
yet, the sprint could also be a good opportunity, as we will feature a 
mentor stream with guided tutorials and a #mentor channel. If you would 
like to be a mentor yourself, helping people using OGC API Features 
within QGIS, please get in touch.

Registrations are still open here: 
https://portal.ogc.org/public_ogc/register/211117api_codesprint.php

 ??????????????????????????????? Looking forward to seeing you there, 
tomorrow

 ??????????????????????????????????????????????????????? Joana


From surveykshak at gmail.com  Tue Nov  9 01:37:34 2021
From: surveykshak at gmail.com (Paul N)
Date: Tue, 9 Nov 2021 15:07:34 +0530
Subject: [QGIS-Developer] QGIS 3.22 compilation on windows 10 with MSVC
 2019
In-Reply-To: <20211102153333.oruzrfmrhhumoccs@norbit.de>
References: <CAGy7cY=uPc-sv_dVaxbXW5+rFhEh3e=vEWj8sE=p2wGN1sxDvQ@mail.gmail.com>
 <20211101163652.mnx5hbdl36g354gi@norbit.de>
 <CAGy7cY=HjDb0sawCnH3dW9qrcqcc6t9kbKuHiM0MXqfnYL87Eg@mail.gmail.com>
 <20211102153333.oruzrfmrhhumoccs@norbit.de>
Message-ID: <CAGy7cYm4btkrwUibAa1CbOTkOHCaSb5OSRu7G-c5_AJA3pcnzg@mail.gmail.com>

Hi,
Thanks for your support. I am able to install the Debugger in Window Kit/10
and now its working. But after running the configure.bat I got the
unexpected error.


--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**********************************************************************
** Visual Studio 2019 Developer Command Prompt v16.11.5
** Copyright (c) 2021 Microsoft Corporation
**********************************************************************
[vcvarsall.bat] Environment initialized for: 'x64'
Microsoft Windows [Version 10.0.22000.282]
(c) Microsoft Corporation. All rights reserved.

E:\OSGeo4Wv2>cd\

E:\>cd Repositories\QGIS-release-3_22\ms-windows\osgeo4w

E:\Repositories\QGIS-release-3_22\ms-windows\osgeo4w>configonly.bat
**********************************************************************
** Visual Studio 2019 Developer Command Prompt v16.11.5
** Copyright (c) 2021 Microsoft Corporation
**********************************************************************
[vcvarsall.bat] Environment initialized for: 'x64'
BEGIN: 09-11-2021 14:56:07.78
CMAKE: 09-11-2021 14:56:08.26
*Studio was unexpected at this time.*
E:\Repositories\QGIS-release-3_22\ms-windows\osgeo4w>
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

My batch file are attached as text file. Please help in identifying the
problem.

Thanks

On Tue, 2 Nov 2021 at 21:04, J?rgen E. Fischer <jef at norbit.de> wrote:

> On Tue, 02. Nov 2021 at 14:09:09 +0530, Paul N wrote:
> > Hi, I have tried to run your msvc-env.bat and checked the system path
> line
> > by line.
> >
> > But still having the error as below:
> >
> > dbghelp.dll not found
> > C:\Program Files (x86)\ArcGIS\Desktop10.8\bin\dbghelp.dll
>
> Looks like the SDK is incomplete:
>
> set SETUPAPI_LIBRARY=%PF86%\Windows Kits\10\Lib\%VCSDK%\um\x64\SetupAPI.Lib
> set DBGHLP_PATH=%PF86%\Windows Kits\10\Debuggers\x64
>
> if not exist "%SETUPAPI_LIBRARY%" (
>   echo SETUPAPI_LIBRARY not found
>   dir /s /b "%PF86%\setupapi.lib"
>   goto error
> )
>
> if not exist "%DBGHLP_PATH%\dbghelp.dll" (
>   echo dbghelp.dll not found
>   dir /s /b "%PF86%\dbghelp.dll" "%PF86%\symsrv.dll"
>   goto error
> )
>
> So you apparently have SetupAPI.Lib, but not dbghelp.dll in
> C:\Program Files (x86)\Windows Kits\10
>
> https://github.com/jef-n/QGIS/commits/workflows-msvc includes some
> updates to
> INSTALL[0].  The merges for OSGeo4W v2 are still pending (at the time both
> ltr
> and latest release were built for old and osgeo4w v2; now only the current
> ltr
> is still built for old osgeo4w).
>
>
> J?rgen
>
>
> [0]
> https://github.com/jef-n/QGIS/blob/7401e795a6a0eee82b86f4d78026f4635790c43f/INSTALL
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211109/02156579/attachment-0001.html>
-------------- next part --------------
@echo off
REM ***************************************************************************
REM    msvc-env.cmd
REM    ---------------------
REM    begin                : June 2018
REM    copyright            : (C) 2018 by Juergen E. Fischer
REM    email                : jef at norbit dot de
REM ***************************************************************************
REM *                                                                         *
REM *   This program is free software; you can redistribute it and/or modify  *
REM *   it under the terms of the GNU General Public License as published by  *
REM *   the Free Software Foundation; either version 2 of the License, or     *
REM *   (at your option) any later version.                                   *
REM *                                                                         *
REM ***************************************************************************

if not "%PROGRAMFILES(X86)%"=="" set PF86=%PROGRAMFILES(X86)%
if "%PF86%"=="" set PF86=%PROGRAMFILES%
if "%PF86%"=="" (echo PROGRAMFILES not set & goto error)

if "%VCSDK%"=="" set VCSDK=10.0.18362.0

set ARCH=%1
if "%ARCH%"=="x86" goto x86
if "%ARCH%"=="x86_64" goto x86_64
goto usage

:x86
set VCARCH=x86
set SETUPAPI_LIBRARY=%PF86%\Windows Kits\10\Lib\%VCSDK%\um\x86\SetupAPI.Lib
set DBGHLP_PATH=%PF86%\OSGeo4W_testing
goto archset

:x86_64
set VCARCH=amd64
set SETUPAPI_LIBRARY=%PF86%\Windows Kits\10\Lib\%VCSDK%\um\x64\SetupAPI.Lib
set DBGHLP_PATH=%PF86%\Windows Kits\10\Debuggers\x64

:archset
if not exist "%SETUPAPI_LIBRARY%" (
  echo SETUPAPI_LIBRARY not found
  dir /s /b "%PF86%\setupapi.lib"
  goto error
)

if not exist "%DBGHLP_PATH%\dbghelp.dll" (
  echo dbghelp.dll not found
  dir /s /b "%PF86%\dbghelp.dll" "%PF86%\symsrv.dll"
  goto error
)

if "%CC%"=="" set CC=cl.exe
if "%CXX%"=="" set CXX=cl.exe

if "%OSGEO4W_ROOT%"=="" (
	if "%ARCH%"=="x86" (
		set OSGEO4W_ROOT=E:\OSGeo4Wv2
	) else (
		set OSGEO4W_ROOT=E:\OSGeo4Wv2
	)
)

if not exist "%OSGEO4W_ROOT%\bin\o4w_env.bat" (echo o4w_env.bat not found & goto error)
call "%OSGEO4W_ROOT%\bin\o4w_env.bat"
call "%OSGEO4W_ROOT%\bin\py3_env.bat"
call "%OSGEO4W_ROOT%\bin\qt5_env.bat"

for %%e in (Community Professional Enterprise) do if exist "%PF86%\Microsoft Visual Studio\2019\%%e" set vcdir=%PF86%\Microsoft Visual Studio\2019\%%e
if "%vcdir%"=="" (echo Visual C++ not found & goto error)

set VS160COMNTOOLS=%vcdir%\Common7\Tools
call "%vcdir%\VC\Auxiliary\Build\vcvarsall.bat" %VCARCH%
path %path%;%vcdir%\VC\bin

set GRASS7=
if exist %OSGEO4W_ROOT%\bin\grass74.bat set GRASS7=%OSGEO4W_ROOT%\bin\grass74.bat
if exist %OSGEO4W_ROOT%\bin\grass76.bat set GRASS7=%OSGEO4W_ROOT%\bin\grass76.bat
if exist %OSGEO4W_ROOT%\bin\grass78.bat set GRASS7=%OSGEO4W_ROOT%\bin\grass78.bat
if "%GRASS7%"=="" (echo GRASS7 not found & goto error)
for /f "usebackq tokens=1" %%a in (`%GRASS7% --config path`) do set GRASS_PREFIX=%%a

set PYTHONPATH=
if exist "%PROGRAMFILES%\CMake\bin" path %PATH%;%PROGRAMFILES%\CMake\bin
if exist "%PF86%\CMake\bin" path %PATH%;%PF86%\CMake\bin
if exist e:\cygwin64\bin path %PATH%;e:\cygwin64\bin
if exist e:\cygwin\bin path %PATH%;e:\cygwin\bin

set LIB=%LIB%;%OSGEO4W_ROOT%\apps\Qt5\lib;%OSGEO4W_ROOT%\lib
set INCLUDE=%INCLUDE%;%OSGEO4W_ROOT%\apps\Qt5\include;%OSGEO4W_ROOT%\include

goto end

:usage
echo usage: %0 [x86^|x86_64]
echo sample: %0 x86_64
exit /b 1

:error
echo ENV ERROR %ERRORLEVEL%: %DATE% %TIME%
exit /b 1

:end
-------------- next part --------------
@echo off
REM ***************************************************************************
REM    package-nightly.cmd
REM    ---------------------
REM    begin                : January 2011
REM    copyright            : (C) 2011 by Juergen E. Fischer
REM    email                : jef at norbit dot de
REM ***************************************************************************
REM *                                                                         *
REM *   This program is free software; you can redistribute it and/or modify  *
REM *   it under the terms of the GNU General Public License as published by  *
REM *   the Free Software Foundation; either version 2 of the License, or     *
REM *   (at your option) any later version.                                   *
REM *                                                                         *
REM ***************************************************************************

setlocal enabledelayedexpansion

set VERSION=%1
set PACKAGE=%2
set PACKAGENAME=%3
set ARCH=%4
set SHA=%5
set SITE=%6
if "%VERSION%"=="" goto usage
if "%PACKAGE%"=="" goto usage
if "%PACKAGENAME%"=="" goto usage
if "%ARCH%"=="" goto usage
if not "%SHA%"=="" set SHA=-%SHA%
if "%SITE%"=="" set SITE=qgis.org
if "%TARGET%"=="" set TARGET=Nightly
if "%BUILDNAME%"=="" set BUILDNAME=%PACKAGENAME%-%VERSION%%SHA%-%TARGET%-VC16-%ARCH%

if "%BUILDDIR%"=="" set BUILDDIR=%CD%\build-%PACKAGENAME%-%ARCH%
if not exist "%BUILDDIR%" mkdir %BUILDDIR%
if not exist "%BUILDDIR%" (echo could not create build directory %BUILDDIR% & goto error)

call msvc-env.bat %ARCH%
call gdal-dev-env.bat

set O4W_ROOT=%OSGEO4W_ROOT:\=/%
set LIB_DIR=%O4W_ROOT%

if "%ARCH%"=="x86" (
	set CMAKE_OPT=^
		-D SPATIALINDEX_LIBRARY=%O4W_ROOT%/lib/spatialindex-32.lib
) else (
	set CMAKE_OPT=^
		-D SPATIALINDEX_LIBRARY=%O4W_ROOT%/lib/spatialindex-64.lib ^
		-D CMAKE_INSTALL_SYSTEM_RUNTIME_LIBS_NO_WARNINGS=TRUE
)

for %%i in ("%GRASS_PREFIX%") do set GRASS7_VERSION=%%~nxi
set GRASS_VERSIONS=%GRASS7_VERSION%

set TAR=tar.exe
if exist "e:\cygwin\bin\tar.exe" set TAR=e:\cygwin\bin\tar.exe
if exist "e:\cygwin64\bin\tar.exe" set TAR=e:\cygwin64\bin\tar.exe

set BUILDCONF=RelWithDebInfo

cd ..\..
set SRCDIR=%CD%

if "%BUILDDIR:~1,1%"==":" %BUILDDIR:~0,2%
cd %BUILDDIR%

set PKGDIR=%OSGEO4W_ROOT%\apps\%PACKAGENAME%

if exist repackage goto package

if not exist build.log goto build

REM
REM try renaming the logfile to see if it's locked
REM

if exist build.tmp del build.tmp
if exist build.tmp (echo could not remove build.tmp & goto error)

ren build.log build.tmp
if exist build.log goto locked
if not exist build.tmp goto locked

ren build.tmp build.log
if exist build.tmp goto locked
if not exist build.log goto locked

goto build

:locked
echo Logfile locked
if exist build.tmp del build.tmp
goto error

:build
echo BEGIN: %DATE% %TIME%

set >buildenv.log

if exist qgsversion.h del qgsversion.h

if exist CMakeCache.txt if exist skipcmake goto skipcmake

touch %SRCDIR%\CMakeLists.txt

echo CMAKE: %DATE% %TIME%

if "%CMAKEGEN%"=="" set CMAKEGEN=-G Ninja
if "%CC%"=="" set CC=cl.exe
if "%CXX%"=="" set CXX=cl.exe
if "%OSGEO4W_CXXFLAGS%"=="" set OSGEO4W_CXXFLAGS=/MD /Z7 /MP /Od /D NDEBUG

for %%i in (%PYTHONHOME%) do set PYVER=%%~ni

cmake %CMAKEGEN% ^
	-D CMAKE_CXX_COMPILER="%CXX:\=/%" ^
	-D CMAKE_C_COMPILER="%CC:\=/%" ^
	-D CMAKE_LINKER=link.exe ^
	-D CMAKE_CXX_FLAGS_RELWITHDEBINFO="%OSGEO4W_CXXFLAGS%" ^
	-D CMAKE_PDB_OUTPUT_DIRECTORY_RELWITHDEBINFO=%BUILDDIR%\apps\%PACKAGENAME%\pdb ^
	-D BUILDNAME="%BUILDNAME%" ^
	-D SITE="%SITE%" ^
	-D PEDANTIC=TRUE ^
	-D WITH_QSPATIALITE=TRUE ^
	-D WITH_SERVER=TRUE ^
	-D SERVER_SKIP_ECW=TRUE ^
	-D WITH_GRASS=TRUE ^
	-D WITH_3D=TRUE ^
	-D WITH_GRASS7=TRUE ^
	-D GRASS_PREFIX7=%GRASS_PREFIX:\=/% ^
	-D WITH_GLOBE=FALSE ^
	-D WITH_ORACLE=TRUE ^
	-D WITH_CUSTOM_WIDGETS=TRUE ^
	-D CMAKE_BUILD_TYPE=%BUILDCONF% ^
	-D CMAKE_CONFIGURATION_TYPES=%BUILDCONF% ^
	-D SETUPAPI_LIBRARY="%SETUPAPI_LIBRARY%" ^
	-D PROJ_LIBRARY=%O4W_ROOT%/apps/proj-dev/lib/proj.lib ^
	-D PROJ_INCLUDE_DIR=%O4W_ROOT%/apps/proj-dev/include ^
	-D GDAL_LIBRARY=%O4W_ROOT%/apps/gdal-dev/lib/gdal_i.lib ^
	-D GDAL_INCLUDE_DIR=%O4W_ROOT%/apps/gdal-dev/include ^
	-D GEOS_LIBRARY=%O4W_ROOT%/lib/geos_c.lib ^
	-D SQLITE3_LIBRARY=%O4W_ROOT%/lib/sqlite3_i.lib ^
	-D SPATIALITE_LIBRARY=%O4W_ROOT%/lib/spatialite_i.lib ^
	-D PYTHON_EXECUTABLE=%O4W_ROOT%/bin/python3.exe ^
	-D SIP_BINARY_PATH=%PYTHONHOME:\=/%/sip.exe ^
	-D PYTHON_INCLUDE_PATH=%PYTHONHOME:\=/%/include ^
	-D PYTHON_LIBRARY=%PYTHONHOME:\=/%/libs/%PYVER%.lib ^
	-D QT_LIBRARY_DIR=%O4W_ROOT%/lib ^
	-D QT_HEADERS_DIR=%O4W_ROOT%/apps/qt5/include ^
	-D CMAKE_INSTALL_PREFIX=%O4W_ROOT%/apps/%PACKAGENAME% ^
	-D FCGI_INCLUDE_DIR=%O4W_ROOT%/include ^
	-D FCGI_LIBRARY=%O4W_ROOT%/lib/libfcgi.lib ^
	-D QCA_INCLUDE_DIR=%OSGEO4W_ROOT%\apps\Qt5\include\QtCrypto ^
	-D QCA_LIBRARY=%OSGEO4W_ROOT%\apps\Qt5\lib\qca-qt5.lib ^
	-D QSCINTILLA_LIBRARY=%OSGEO4W_ROOT%\apps\Qt5\lib\qscintilla2.lib ^
	-D DART_TESTING_TIMEOUT=60 ^
	%CMAKE_OPT% ^
	%SRCDIR:\=/%
if errorlevel 1 (echo cmake failed & goto error)

if "%CONFIGONLY%"=="1" (echo Exiting after configuring build directory: %CD% & goto end)

:skipcmake
if exist ..\noclean (echo skip clean & goto skipclean)
echo CLEAN: %DATE% %TIME%
cmake --build %BUILDDIR% --target clean --config %BUILDCONF%
if errorlevel 1 (echo clean failed & goto error)

:skipclean
if exist ..\skipbuild (echo skip build & goto skipbuild)
echo ALL_BUILD: %DATE% %TIME%
cmake --build %BUILDDIR% --target %TARGET%Build --config %BUILDCONF%
set /P tag=<%BUILDDIR%\Testing\TAG
findstr "<Error>" %BUILDDIR%\Testing\%tag%\Build.xml >nul
if not errorlevel 1 (
	cmake --build %BUILDDIR% --target %TARGET%Submit --config %BUILDCONF%
	if errorlevel 1 echo SUBMITTING BUILD ERRORS WAS NOT SUCCESSFUL.
	echo build failed
	goto error
)

:skipbuild
if exist ..\skiptests goto skiptests

echo RUN_TESTS: %DATE% %TIME%

reg add "HKCU\Software\Microsoft\Windows\Windows Error Reporting" /v DontShow /t REG_DWORD /d 1 /f

set oldtemp=%TEMP%
set oldtmp=%TMP%
set oldpath=%PATH%

set TEMP=%TEMP%\%PACKAGENAME%-%ARCH%
set TMP=%TEMP%
if exist "%TEMP%" rmdir /s /q "%TEMP%"
mkdir "%TEMP%"

for %%g IN (%GRASS_VERSIONS%) do (
	set path=!path!;%OSGEO4W_ROOT%\apps\grass\%%g\lib
	set GISBASE=%OSGEO4W_ROOT%\apps\grass\%%g
)
PATH %path%;%BUILDDIR%\output\plugins
set QT_PLUGIN_PATH=%BUILDDIR%\output\plugins;%OSGEO4W_ROOT%\apps\qt5\plugins

if exist ..\testfailure del ..\testfailure
cmake --build %BUILDDIR% --target %TARGET%Test --config %BUILDCONF%
if errorlevel 1 (echo TESTS WERE NOT SUCCESSFUL. & echo %errorlevel% >..\testfailure)

set TEMP=%oldtemp%
set TMP=%oldtmp%
PATH %oldpath%

cmake --build %BUILDDIR% --target %TARGET%Submit --config %BUILDCONF%
if errorlevel 1 echo TEST SUBMISSION WAS NOT SUCCESSFUL.

:skiptests
if exist ..\skippackage goto end

if exist "%PKGDIR%" (
	echo REMOVE: %DATE% %TIME%
	rmdir /s /q "%PKGDIR%"
)

echo INSTALL: %DATE% %TIME%
cmake --build %BUILDDIR% --target install --config %BUILDCONF%
if errorlevel 1 (echo INSTALL failed & goto error)

:package
echo PACKAGE: %DATE% %TIME%

cd ..

sed -e 's/@package@/%PACKAGENAME%/g' -e 's/@version@/%VERSION%/g' -e 's/@grassversions@/%GRASS_VERSIONS%/g' postinstall-dev.bat >%OSGEO4W_ROOT%\etc\postinstall\%PACKAGENAME%.bat
if errorlevel 1 (echo creation of desktop postinstall failed & goto error)

sed -e 's/@package@/%PACKAGENAME%/g' -e 's/@version@/%VERSION%/g' -e 's/@grassversions@/%GRASS_VERSIONS%/g' preremove-dev.bat >%OSGEO4W_ROOT%\etc\preremove\%PACKAGENAME%.bat
if errorlevel 1 (echo creation of desktop preremove failed & goto error)

sed -e 's/@package@/%PACKAGENAME%/g' -e 's/@version@/%VERSION%/g' designer.bat.tmpl >%OSGEO4W_ROOT%\bin\%PACKAGENAME%-designer.bat.tmpl
if errorlevel 1 (echo creation of designer template failed & goto error)
sed -e 's/@package@/%PACKAGENAME%/g' -e 's/@version@/%VERSION%/g' qgis.reg.tmpl >%PKGDIR%\bin\qgis.reg.tmpl
if errorlevel 1 (echo creation of registry template & goto error)

sed -e 's/@package@/%PACKAGENAME%/g' -e 's/@version@/%VERSION%/g' -e 's/^call py3_env.bat/call gdal-dev-py3-env.bat/' qgis.bat.tmpl >%OSGEO4W_ROOT%\bin\%PACKAGENAME%.bat.tmpl
if errorlevel 1 (echo creation of desktop template failed & goto error)

set batches=bin/%PACKAGENAME%.bat.tmpl
for %%g IN (%GRASS_VERSIONS%) do (
	for /f "usebackq tokens=1" %%a in (`%%g --config version`) do set gv=%%a
	for /F "delims=." %%i in ("!gv!") do set v=%%i

	sed -e 's/@package@/%PACKAGENAME%/g' -e 's/@version@/%VERSION%/g' -e 's/@grasspath@/%%g/g' -e 's/@grassversion@/!gv!/g' -e 's/^call py3_env.bat/call gdal-dev-py3-env.bat/' qgis-grass.bat.tmpl >%OSGEO4W_ROOT%\bin\%PACKAGENAME%-g!v!.bat.tmpl
	if errorlevel 1 (echo creation of desktop template failed & goto error)
	set batches=!batches! bin/%PACKAGENAME%-g!v!.bat.tmpl
)

sed -e 's/@package@/%PACKAGENAME%/g' -e 's/@version@/%VERSION%/g' python.bat.tmpl >%OSGEO4W_ROOT%\bin\python-%PACKAGENAME%.bat.tmpl
if errorlevel 1 (echo creation of python wrapper template failed & goto error)

sed -e 's/@package@/%PACKAGENAME%/g' -e 's/@version@/%VERSION%/g' process.bat.tmpl >%OSGEO4W_ROOT%\bin\qgis_process-%PACKAGENAME%.bat.tmpl
if errorlevel 1 (echo creation of qgis process wrapper template failed & goto error)

touch exclude
if exist ..\skipbuild (echo skip build & goto skipbuild)

move %PKGDIR%\bin\qgis.exe %OSGEO4W_ROOT%\bin\%PACKAGENAME%-bin.exe
if errorlevel 1 (echo move of desktop executable failed & goto error)
copy qgis.vars %OSGEO4W_ROOT%\bin\%PACKAGENAME%-bin.vars
if errorlevel 1 (echo copy of desktop executable vars failed & goto error)

if not exist %PKGDIR%\qtplugins\sqldrivers mkdir %PKGDIR%\qtplugins\sqldrivers
move %OSGEO4W_ROOT%\apps\qt5\plugins\sqldrivers\qsqlocispatial.dll %PKGDIR%\qtplugins\sqldrivers
if errorlevel 1 (echo move of oci sqldriver failed & goto error)
move %OSGEO4W_ROOT%\apps\qt5\plugins\sqldrivers\qsqlspatialite.dll %PKGDIR%\qtplugins\sqldrivers
if errorlevel 1 (echo move of spatialite sqldriver failed & goto error)

if not exist %PKGDIR%\qtplugins\designer mkdir %PKGDIR%\qtplugins\designer
move %OSGEO4W_ROOT%\apps\qt5\plugins\designer\qgis_customwidgets.dll %PKGDIR%\qtplugins\designer
if errorlevel 1 (echo move of customwidgets failed & goto error)

if not exist %PKGDIR%\python\PyQt5\uic\widget-plugins mkdir %PKGDIR%\python\PyQt5\uic\widget-plugins
move %PYTHONHOME%\Lib\site-packages\PyQt5\uic\widget-plugins\qgis_customwidgets.py %PKGDIR%\python\PyQt5\uic\widget-plugins
if errorlevel 1 (echo move of customwidgets binding failed & goto error)

for %%i in (dbghelp.dll symsrv.dll) do (
	copy "%DBGHLP_PATH%\%%i" %OSGEO4W_ROOT%\apps\%PACKAGENAME%
	if errorlevel 1 (echo %%i not found & goto error)
)

if not exist %ARCH%\release\qgis\%PACKAGENAME% mkdir %ARCH%\release\qgis\%PACKAGENAME%
%TAR% -C %OSGEO4W_ROOT% -cjf %ARCH%/release/qgis/%PACKAGENAME%/%PACKAGENAME%-%VERSION%-%PACKAGE%.tar.bz2 ^
	--exclude-from exclude ^
	--exclude "*.pyc" ^
	apps/%PACKAGENAME% ^
	bin/%PACKAGENAME%-bin.exe ^
	bin/%PACKAGENAME%-bin.vars ^
	%batches% ^
	bin/%PACKAGENAME%-designer.bat.tmpl ^
	bin/python-%PACKAGENAME%.bat.tmpl ^
	bin/qgis_process-%PACKAGENAME%.bat.tmpl ^
	etc/postinstall/%PACKAGENAME%.bat ^
	etc/preremove/%PACKAGENAME%.bat
if errorlevel 1 (echo tar failed & goto error)

if not exist %ARCH%\release\qgis\%PACKAGENAME%-pdb mkdir %ARCH%\release\qgis\%PACKAGENAME%-pdb
%TAR% -C %BUILDDIR% -cjf %ARCH%/release/qgis/%PACKAGENAME%-pdb/%PACKAGENAME%-pdb-%VERSION%-%PACKAGE%.tar.bz2 ^
	apps/%PACKAGENAME%/pdb
if errorlevel 1 (echo tar failed & goto error)

goto end

:usage
echo usage: %0 version package packagename arch [sha [site]]
echo sample: %0 2.11.0 38 qgis-dev x86_64 339dbf1 qgis.org
exit /b 1

:error
echo BUILD ERROR %ERRORLEVEL%: %DATE% %TIME%
if exist %PACKAGENAME%-%VERSION%-%PACKAGE%.tar.bz2 del %PACKAGENAME%-%VERSION%-%PACKAGE%.tar.bz2
exit /b 1

:end
echo FINISHED: %DATE% %TIME%

endlocal
-------------- next part --------------
@echo off
REM ***************************************************************************
REM    configonly.cmd
REM    ---------------------
REM    begin                : June 2018
REM    copyright            : (C) 2018 by Juergen E. Fischer
REM    email                : jef at norbit dot de
REM ***************************************************************************
REM *                                                                         *
REM *   This program is free software; you can redistribute it and/or modify  *
REM *   it under the terms of the GNU General Public License as published by  *
REM *   the Free Software Foundation; either version 2 of the License, or     *
REM *   (at your option) any later version.                                   *
REM *                                                                         *
REM ***************************************************************************

set ARCH=%1
if "%ARCH%"=="x86" (
	set CMAKEGEN=-G "Visual Studio 16 2019" -A Win32
) else (
	set CMAKEGEN=-G "Visual Studio 16 2019" -A x64
	set ARCH=x86_64
)

set CONFIGONLY=1

setlocal enabledelayedexpansion

for /f "tokens=*" %%L in (..\..\CMakeLists.txt) do (
        set L=%%L
        set V=!L:SET(CPACK_PACKAGE_VERSION_=!
        if not !V!==!L! (
                set V=!V:"=!
                set V=!V:^)=!
                set _major=!V:MAJOR =!
                set _minor=!V:MINOR =!
                set _patch=!V:PATCH =!
                if not !_major!==!V! set MAJOR=!_major!
                if not !_minor!==!V! set MINOR=!_minor!
                if not !_patch!==!V! set PATCH=!_patch!
        )
)

package-nightly.cmd %MAJOR%.%MINOR%.%PATCH% 99 qgis-test %ARCH%

endlocal

From senhor.neto at gmail.com  Tue Nov  9 06:39:47 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 9 Nov 2021 14:39:47 +0000
Subject: [QGIS-Developer] Leveraging Conda-Forge to create QGIS
 installers ?
In-Reply-To: <78efdf16-3f3a-0c22-1c12-65f50b876cee@spatialys.com>
References: <78efdf16-3f3a-0c22-1c12-65f50b876cee@spatialys.com>
Message-ID: <CA+H0G_HxA25-Nr6mUzgj87YUU4qV7M7hGVxX4w=C1TmBKf459w@mail.gmail.com>

No comments?l

I was expecting at least a bit of discussion about this.

:-)

Alexandre Neto

A s?bado, 6/11/2021, 20:46, Even Rouault <even.rouault at spatialys.com>
escreveu:

> Hi,
>
> Probably a topic that can raise passions and on which I'm moderately
> legitimate to speak, but shouldn't we seriously consider leveraging the
> Conda / Conda-Forge (https://conda-forge.org/) ecosystem for QGIS
> packaging, especially on the Windows and Mac platforms ? QGIS depends on
> a lot of external dependencies, and building them and updating them is
> really about maintaining a packaging system, and QGIS has two such
> separate and bespoke systems for Windows (OSGeo4W) and Mac
> (QGIS-Mac-Packager).  The ideal vision would be that the QGIS project
> mostly maintains the bits specific to QGIS, but not be the sole
> maintainer of its dependencies such as QT, GDAL (and its many
> dependencies), PDAL, GRASS etc, as it is today. Conda-Forge provides a
> truly collaborative environment and active community that already
> bundles a number of those dependencies, and QGIS is already there (not
> full capabilities yet, due to some dependencies missing. That would be
> one of the points to address). The Conda-Forge community is really
> vibrant (if you look at
> https://github.com/conda-forge/staged-recipes/pulls?q=is%3Apr+is%3Aclosed,
>
> you can see that 20 packages were added in the last 24 hours!). It is
> also a NumFocus sponsored project. It has support from a number of
> institutions. It is unlikely to disappear anytime soon.
>
> There would certainly work needed to build installers from them. I found
> https://github.com/conda/constructor project where you can build
> standalone installers from Conda packages, but was told it is perhaps
> not super mature.  Even if QGIS needs require a dedicated installer with
> custom bits, leveraging already packaged dependencies would probably be
> a big enough win compared to the current situation where the whole stack
> needs to be built and rebuilt from scratch by only a few knowledgeable
> people, on non-shared infrastructure.
>
> There would be the possibility to pin dependencies at certain known good
> points, for example to base LTR builds on top of them.
>
> I guess also that Conda based installers could help for plugins that
> require installing native or Python dependencies, but that'd be already
> more a secondary advantage.
>
> Another proof that Conda is to be taken seriously:
> https://developers.arcgis.com/python/guide/understanding-conda/
>
> I'm not saying this is a magical solution: there would clearly be a
> significant amount of work and technical hurdles to solve to reach the
> same degree of maturity as our current installers, but it is probably an
> investment worth considering for the long term.
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211109/7d9694c9/attachment.html>

From giovanni.manghi at gmail.com  Tue Nov  9 15:09:30 2021
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Tue, 9 Nov 2021 23:09:30 +0000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <mailman.25629.1636338517.1889.qgis-developer@lists.osgeo.org>
References: <mailman.25629.1636338517.1889.qgis-developer@lists.osgeo.org>
Message-ID: <CACfnYnRy628SxdMdpLLhVpdnfzUQn27_c5=wc+hxzROcSM72FQ@mail.gmail.com>

Hi all,


> I also put a message in the feed so it will arrive in every QGIS
> desktop....
>

I don't want to sound alarming, but is this bug

https://github.com/qgis/QGIS/issues/45939

affecting 3.16.13 on Windows/Standalone is confirmed, we may need a new
urgent release...

cheers

-- G --
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211109/e4b41f97/attachment.html>

From nyall.dawson at gmail.com  Tue Nov  9 15:15:31 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Nov 2021 09:15:31 +1000
Subject: [QGIS-Developer] Leveraging Conda-Forge to create QGIS
 installers ?
In-Reply-To: <CA+H0G_HxA25-Nr6mUzgj87YUU4qV7M7hGVxX4w=C1TmBKf459w@mail.gmail.com>
References: <78efdf16-3f3a-0c22-1c12-65f50b876cee@spatialys.com>
 <CA+H0G_HxA25-Nr6mUzgj87YUU4qV7M7hGVxX4w=C1TmBKf459w@mail.gmail.com>
Message-ID: <CAB28Asgd42tWZc7VN2bzqRpSy3hn9Df+XGfLrHJALOwBT5Lgbw@mail.gmail.com>

On Wed, 10 Nov 2021 at 00:42, Alexandre Neto <senhor.neto at gmail.com> wrote:
>
> No comments?l
>
> I was expecting at least a bit of discussion about this.

Honestly, I see it as a bit of a non-starter. Conda is still stuck to
such an old Qt version that you can't build anything past QGIS 3.18.

To me that's reflective of a larger issue with the ecosystem, not an
isolated example. These mega-packaging-everything projects just seem
to consistently get bogged down by the sheer number of dependent
packages they try to satisfy, resulting in an overall worse experience
all round.

But that's just my 2c ;)

Nyall


>
> :-)
>
> Alexandre Neto
>
> A s?bado, 6/11/2021, 20:46, Even Rouault <even.rouault at spatialys.com> escreveu:
>>
>> Hi,
>>
>> Probably a topic that can raise passions and on which I'm moderately
>> legitimate to speak, but shouldn't we seriously consider leveraging the
>> Conda / Conda-Forge (https://conda-forge.org/) ecosystem for QGIS
>> packaging, especially on the Windows and Mac platforms ? QGIS depends on
>> a lot of external dependencies, and building them and updating them is
>> really about maintaining a packaging system, and QGIS has two such
>> separate and bespoke systems for Windows (OSGeo4W) and Mac
>> (QGIS-Mac-Packager).  The ideal vision would be that the QGIS project
>> mostly maintains the bits specific to QGIS, but not be the sole
>> maintainer of its dependencies such as QT, GDAL (and its many
>> dependencies), PDAL, GRASS etc, as it is today. Conda-Forge provides a
>> truly collaborative environment and active community that already
>> bundles a number of those dependencies, and QGIS is already there (not
>> full capabilities yet, due to some dependencies missing. That would be
>> one of the points to address). The Conda-Forge community is really
>> vibrant (if you look at
>> https://github.com/conda-forge/staged-recipes/pulls?q=is%3Apr+is%3Aclosed,
>> you can see that 20 packages were added in the last 24 hours!). It is
>> also a NumFocus sponsored project. It has support from a number of
>> institutions. It is unlikely to disappear anytime soon.
>>
>> There would certainly work needed to build installers from them. I found
>> https://github.com/conda/constructor project where you can build
>> standalone installers from Conda packages, but was told it is perhaps
>> not super mature.  Even if QGIS needs require a dedicated installer with
>> custom bits, leveraging already packaged dependencies would probably be
>> a big enough win compared to the current situation where the whole stack
>> needs to be built and rebuilt from scratch by only a few knowledgeable
>> people, on non-shared infrastructure.
>>
>> There would be the possibility to pin dependencies at certain known good
>> points, for example to base LTR builds on top of them.
>>
>> I guess also that Conda based installers could help for plugins that
>> require installing native or Python dependencies, but that'd be already
>> more a secondary advantage.
>>
>> Another proof that Conda is to be taken seriously:
>> https://developers.arcgis.com/python/guide/understanding-conda/
>>
>> I'm not saying this is a magical solution: there would clearly be a
>> significant amount of work and technical hurdles to solve to reach the
>> same degree of maturity as our current installers, but it is probably an
>> investment worth considering for the long term.
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Tue Nov  9 15:17:06 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Nov 2021 09:17:06 +1000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CACfnYnRy628SxdMdpLLhVpdnfzUQn27_c5=wc+hxzROcSM72FQ@mail.gmail.com>
References: <mailman.25629.1636338517.1889.qgis-developer@lists.osgeo.org>
 <CACfnYnRy628SxdMdpLLhVpdnfzUQn27_c5=wc+hxzROcSM72FQ@mail.gmail.com>
Message-ID: <CAB28Asj5N3PGLOrRwzY8SC0A3KxDi1i2QR19VQ62umYCiz1yvA@mail.gmail.com>

On Wed, 10 Nov 2021 at 09:10, Giovanni Manghi <giovanni.manghi at gmail.com> wrote:
>
> Hi all,
>
>>
>> I also put a message in the feed so it will arrive in every QGIS desktop....
>
>
> I don't want to sound alarming, but is this bug
>
> https://github.com/qgis/QGIS/issues/45939
>
> affecting 3.16.13 on Windows/Standalone is confirmed, we may need a new urgent release...

Alarming if true!

Can someone else champion this issue please? I'm exhausted from the
PyQt issue last week and haven't the emotional energy to even want to
glance at this.

Nyall

From giovanni.manghi at gmail.com  Tue Nov  9 15:24:34 2021
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Tue, 9 Nov 2021 23:24:34 +0000
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CAB28Asj5N3PGLOrRwzY8SC0A3KxDi1i2QR19VQ62umYCiz1yvA@mail.gmail.com>
References: <mailman.25629.1636338517.1889.qgis-developer@lists.osgeo.org>
 <CACfnYnRy628SxdMdpLLhVpdnfzUQn27_c5=wc+hxzROcSM72FQ@mail.gmail.com>
 <CAB28Asj5N3PGLOrRwzY8SC0A3KxDi1i2QR19VQ62umYCiz1yvA@mail.gmail.com>
Message-ID: <CACfnYnScBwViUwXEYtwu0o_QHko26Bx+_xxj==tNXOhCKv8rVA@mail.gmail.com>

> Alarming if true!
>


Unfortunately it seems true. I can confirm it here in my testing
environment. Affects only 3.16.13/standalone installer, not the osgeo
network installer.

-- G --
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211109/30fff104/attachment.html>

From andreaerdna at libero.it  Wed Nov 10 00:01:18 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Wed, 10 Nov 2021 09:01:18 +0100
Subject: [QGIS-Developer] URGENT AS CAN BE: QGIS 3.16.12 and sip 6?
In-Reply-To: <CACfnYnScBwViUwXEYtwu0o_QHko26Bx+_xxj==tNXOhCKv8rVA@mail.gmail.com>
References: <mailman.25629.1636338517.1889.qgis-developer@lists.osgeo.org>
 <CACfnYnRy628SxdMdpLLhVpdnfzUQn27_c5=wc+hxzROcSM72FQ@mail.gmail.com>
 <CAB28Asj5N3PGLOrRwzY8SC0A3KxDi1i2QR19VQ62umYCiz1yvA@mail.gmail.com>
 <CACfnYnScBwViUwXEYtwu0o_QHko26Bx+_xxj==tNXOhCKv8rVA@mail.gmail.com>
Message-ID: <648f70d2-ec4d-1cab-f1f6-a09631f41a51@libero.it>

I can also confirm the issue with QGIS 3.16.13 on Windows 10 installed 
using the latest available OSGeo4W v2 Standalone Installer 
QGIS-OSGeo4W-3.16.13-1.msi

The issue doesn't occur using the OSGeo4W v2 Network Installer with the 
latest available qgis-ltr package 3.16.13-1.

The issue doesn't occur also using the latest available OSGeo4W v1 
Standalone Installer QGIS-OSGeo4W-3.16.13-1-Setup-x86_64.exe and the 
OSGeo4W v1 Network Installer.

Andrea

Il 10/11/2021 00:24, Giovanni Manghi ha scritto:
> 
>     Alarming if true!
> 
> 
> 
> Unfortunately it seems true. I can confirm it here in my testing 
> environment. Affects only 3.16.13/standalone installer, not the osgeo 
> network installer.

From dsandeepan995 at gmail.com  Wed Nov 10 04:26:08 2021
From: dsandeepan995 at gmail.com (Sandeepan Dhoundiyal)
Date: Wed, 10 Nov 2021 17:56:08 +0530
Subject: [QGIS-Developer] Guidance in developing a comprehensive Spatial
 Data Modelling plugin
Message-ID: <CAAfi6HPL6tgO26NXiUSDEihnrgfQUTaB8u3AtCcH+pLMQq90nA@mail.gmail.com>

Hello Everyone.
I'm Sandeepan a grad student at the Indian Institute of Technology (IIT)
Bombay working on Remote Sensing and GIS applications in Planetary Science,
particularly mineralogical mapping.
Relatively simple knowledge-driven models such as Fuzzy Inference Systems,
Weights of Evidence (WofE) find a wide application in geological studies,
particularly mineral exploration. These along with simple Machine Learning
based such as logistic regression and ANN's (Artificial Neural Networks)
are available as a single package in ArcGIS called ArcSDM.
A basic WofE plugin already exists for QGIS (
https://github.com/chudasama-bijal/QGIS-Plugin-Weights-of-Evidence-Model)
as well as basic functionality for a few Fuzzy functions. I would like to
implement a comprehensive and optimized (in terms of execution time) plugin
for both these models, as well as basic ML (essentially, QGIS version of
ArcSDM). I would like to have the communities input on wether such a plugin
would be beneficial to the community and if so, then guidance in writing a
proposal for developing this plugin for GIS.
Regards,
Sandeepan Dhoundiyal
Teaching Assistant, PhD student | Geology and Mineral Resources Group
CSRE, Indian Institute of Technology (IIT) Bombay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211110/546867ba/attachment.html>

From nick at geospatialtrainingsolutions.co.uk  Wed Nov 10 04:34:57 2021
From: nick at geospatialtrainingsolutions.co.uk (Nick Bearman)
Date: Wed, 10 Nov 2021 12:34:57 +0000
Subject: [QGIS-Developer] Guidance in developing a comprehensive Spatial
 Data Modelling plugin
In-Reply-To: <CAAfi6HPL6tgO26NXiUSDEihnrgfQUTaB8u3AtCcH+pLMQq90nA@mail.gmail.com>
References: <CAAfi6HPL6tgO26NXiUSDEihnrgfQUTaB8u3AtCcH+pLMQq90nA@mail.gmail.com>
Message-ID: <165e1ce4-ccb9-ba76-a03f-a8abcebcd4f2@geospatialtrainingsolutions.co.uk>

Hi Sandeepan,

Thanks for reaching out :-)

For the need for your plugin, I will leave that to others on the list - 
this is not my area.

In terms of making a plugin - I would recommend the "QGIS Plugin 
Development Is Not Scary: Lessons Learned from Literature Mapper" 
session from the recent FOSS4G Conference. Details at 
https://callforpapers.2021.foss4g.org/foss4g2021/talk/ZM7KYR/ and 
recording at https://www.youtube.com/watch?v=VCfQoX5n4Eg.

Michele and Alex talk about their experiences of creating a QGIS Plugin 
- and the bottom line is go for it!

I am about to undertake a similar process to create a QGIS Plugin so it 
will be an interesting experience!

Good luck!

Best wishes,
Nick.

On 10/11/2021 12:26, Sandeepan Dhoundiyal wrote:
> Hello Everyone.
> I'm Sandeepan a grad student at the Indian Institute of Technology 
> (IIT) Bombay working on Remote Sensing and GIS applications in 
> Planetary Science, particularly mineralogical mapping.
> Relatively simple knowledge-driven models such as Fuzzy Inference 
> Systems, Weights of Evidence (WofE) find a wide application in 
> geological studies, particularly mineral exploration. These along with 
> simple Machine Learning based such as logistic regression and ANN's 
> (Artificial Neural Networks) are available as a single package in 
> ArcGIS called ArcSDM.
> A basic WofE plugin already exists for QGIS 
> (https://github.com/chudasama-bijal/QGIS-Plugin-Weights-of-Evidence-Model) 
> as well as basic functionality for a few Fuzzy functions. I would like 
> to implement a comprehensive and optimized (in terms of execution 
> time) plugin for both these models, as well as basic ML (essentially, 
> QGIS version of ArcSDM). I would like to have the communities input on 
> wether such a plugin would be beneficial to the community and if so, 
> then guidance in writing a proposal for developing this plugin for GIS.
> Regards,
> Sandeepan Dhoundiyal
> Teaching Assistant, PhD student | Geology and Mineral Resources Group
> CSRE, Indian Institute of Technology (IIT) Bombay
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Nick Bearman
Tel / WhatsApp / Signal: +44 (0) 7717745715
nick at geospatialtrainingsolutions.co.uk

My working pattern is probably not the same as your working pattern, therefore
you may get emails from me outside of normal working hours. Please do not feel any
pressure to respond outside of your own working pattern.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211110/ac3c0645/attachment-0001.html>

From rdmailings at duif.net  Wed Nov 10 10:05:17 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 10 Nov 2021 19:05:17 +0100
Subject: [QGIS-Developer] sip build err on Debian Testing?
In-Reply-To: <950bbe44-7e3f-ec46-9795-25eb48cd08ca@xs4all.nl>
References: <cb0728c6-e4ef-897e-fa07-2527099aab2b@duif.net>
 <950bbe44-7e3f-ec46-9795-25eb48cd08ca@xs4all.nl>
Message-ID: <011fff93-ddf0-bcec-f39d-922f45f30e94@duif.net>

On 11/7/21 9:44 AM, Sebastiaan Couwenberg wrote:
> On 11/5/21 13:13, Richard Duivenvoorde wrote:
>> sip: /usr/lib/python3/dist-packages/PyQt5/bindings/QtCore/QtCoremod.sip:23: syntax error
> It's fixed in sip4 (4.19.25+dfsg-3):
> 
> 
> https://tracker.debian.org/news/1274126/accepted-sip4-41925dfsg-3-source-into-unstable/
> 
> If blockers arise, it should migrate to testing in 5 days. You can install it from unstable in the mean time.

Wheey, building again!

Debian (testing) Rocks!

Richard

From surveykshak at gmail.com  Mon Nov 15 09:03:37 2021
From: surveykshak at gmail.com (Paul N)
Date: Mon, 15 Nov 2021 22:33:37 +0530
Subject: [QGIS-Developer] qgis compilation error
Message-ID: <CAGy7cYmEQ=s=YieyfuZZ9Ed_nBG_C3SiWCFrfXnuorSFn3zS0g@mail.gmail.com>

Hi,
I am trying to compile QGIS 3.16.12 using MSVC 2019. While running the
batch file from OSGeo4w folder having lines
-------------------------------------------------------------------------------------------------------------------------
@echo off
call e:\Repositories\QGIS-release-3_16_12\ms-windows\osgeo4w\msvc-env.bat
x86_64
@cmd
-------------------------------------------------------------------------------------------------------------------------
I got the output as command prompt and after running configonly.bat, I am
facing the error

[image: image.png]
It says that Studio was unexpected at this time. Attaching the build env
log file generate after error.
The same thing happened when I follow the
https://github.com/jef-n/QGIS/commits/workflows-msvc as suggested by J?rgen.

The same problem alos occurring during compilation of 3.22 over OSGeo4w v2
also.
Any clue on this by developers?

Regards

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211115/9e805f3e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 34362 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211115/9e805f3e/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: buildenv.log
Type: application/octet-stream
Size: 10822 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211115/9e805f3e/attachment-0001.obj>

From nyall.dawson at gmail.com  Mon Nov 15 11:57:09 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 16 Nov 2021 05:57:09 +1000
Subject: [QGIS-Developer] QGIS LTR releases -- is it time to pull the plug?
Message-ID: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>

Hi lists,

I'd like to start some conversation about the dire condition of the
QGIS LTR release and what we can do to remedy/avoid this in future.

If you've missed the conversation, our QGIS 3.16 windows releases have
been completely broken for nearly a month now. 3.16.12 had a critical
issue which caused lockups in Python code, and now 3.16.13 has
completely broken projection handling (resulting in loss of CRS,
hangups when opening projects, etc).

So what do we do? I can think of a few responses we could make:

- Kill 3.16.13 with fire. It needs to be removed from the website and
all traces of the internet ASAP. Rollback to only offering 3.16.11,
which is the last good Windows 3.16 release.

- Put out a massive apology (and ask users to step up their funding to
better maintain QGIS releases in future ;)

- Mark 3.16 as an early EOL. (I can't see anyone interested in
resolving the actual issue, so we've no way forward here in releasing
a "good" 3.16 release again.)

- Write the LTR releases off as a failed concept. (i.e. if we don't
have the resources to maintain them properly, we shouldn't be offering
them at all and should resort back to the single maintained release at
any one time situation.)

- Lower the supported period of a LTR release to 6 months?

- Offer "theoretical" LTR releases ONLY as source code, but leave it
to users to compile themselves and accept responsibility for their own
packaging of this release.

- Go on a funding drive so that QGIS can **pay** a developer and
packager so that we actually CAN say we have stable LTR releases
again?

- ...something else...?

Suffice to say, these are big issues, with big responses. But we're
also under extreme time pressure here -- 3.16 is broken beyond belief,
and we DO need to make some public responses asap (i.e. TODAY!!!!)

Nyall

From anitagraser at gmx.at  Mon Nov 15 12:36:53 2021
From: anitagraser at gmx.at (Anita Graser)
Date: Mon, 15 Nov 2021 20:36:53 +0000 (UTC)
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
Message-ID: <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>

Thank you Nyall for the candid assessment.
I'm ready to help wherever I can, which most likely comes down to writing announcements.
We had the budget meeting scheduled for Tuesday evening but it sounds like we should get on top of this issue asap.

Regards
Anita

15 Nov 2021 20:57:36 Nyall Dawson <nyall.dawson at gmail.com>:

> Hi lists,
>
> I'd like to start some conversation about the dire condition of the
> QGIS LTR release and what we can do to remedy/avoid this in future.
>
> If you've missed the conversation, our QGIS 3.16 windows releases have
> been completely broken for nearly a month now. 3.16.12 had a critical
> issue which caused lockups in Python code, and now 3.16.13 has
> completely broken projection handling (resulting in loss of CRS,
> hangups when opening projects, etc).
>
> So what do we do? I can think of a few responses we could make:
>
> - Kill 3.16.13 with fire. It needs to be removed from the website and
> all traces of the internet ASAP. Rollback to only offering 3.16.11,
> which is the last good Windows 3.16 release.
>
> - Put out a massive apology (and ask users to step up their funding to
> better maintain QGIS releases in future ;)
>
> - Mark 3.16 as an early EOL. (I can't see anyone interested in
> resolving the actual issue, so we've no way forward here in releasing
> a "good" 3.16 release again.)
>
> - Write the LTR releases off as a failed concept. (i.e. if we don't
> have the resources to maintain them properly, we shouldn't be offering
> them at all and should resort back to the single maintained release at
> any one time situation.)
>
> - Lower the supported period of a LTR release to 6 months?
>
> - Offer "theoretical" LTR releases ONLY as source code, but leave it
> to users to compile themselves and accept responsibility for their own
> packaging of this release.
>
> - Go on a funding drive so that QGIS can **pay** a developer and
> packager so that we actually CAN say we have stable LTR releases
> again?
>
> - ...something else...?
>
> Suffice to say, these are big issues, with big responses. But we're
> also under extreme time pressure here -- 3.16 is broken beyond belief,
> and we DO need to make some public responses asap (i.e. TODAY!!!!)
>
> Nyall
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc

From andreas at qgis.org  Mon Nov 15 13:08:28 2021
From: andreas at qgis.org (Andreas Neumann)
Date: Mon, 15 Nov 2021 22:08:28 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
Message-ID: <CAB2Z92DCkXq6RxwoDt05Q_NRZa-s_jzfaSAHQhpiD=L_LbR_KQ@mail.gmail.com>

Hi Nyall,

Thank you for the discussion.

Here are some additional ideas/options:

- strictly separate the build systems and libraries of LTR and regular
releases. Parts of the problem stem from the fact that during the lifetime
of an LTR underlying libraries are updated. Ideally, the libraries of the
LT releases only receive bug fixes, but no new features
- put more resources into manual testing
- put more resources into packaging in general
- let every release be checked manually by a couple of dedicates power
users (at least the LTR ones) before it goes out to the public

I know - all of these need personal/financial resources.

Andreas

On Mon, 15 Nov 2021 at 20:57, Nyall Dawson <nyall.dawson at gmail.com> wrote:

> Hi lists,
>
> I'd like to start some conversation about the dire condition of the
> QGIS LTR release and what we can do to remedy/avoid this in future.
>
> If you've missed the conversation, our QGIS 3.16 windows releases have
> been completely broken for nearly a month now. 3.16.12 had a critical
> issue which caused lockups in Python code, and now 3.16.13 has
> completely broken projection handling (resulting in loss of CRS,
> hangups when opening projects, etc).
>
> So what do we do? I can think of a few responses we could make:
>
> - Kill 3.16.13 with fire. It needs to be removed from the website and
> all traces of the internet ASAP. Rollback to only offering 3.16.11,
> which is the last good Windows 3.16 release.
>
> - Put out a massive apology (and ask users to step up their funding to
> better maintain QGIS releases in future ;)
>
> - Mark 3.16 as an early EOL. (I can't see anyone interested in
> resolving the actual issue, so we've no way forward here in releasing
> a "good" 3.16 release again.)
>
> - Write the LTR releases off as a failed concept. (i.e. if we don't
> have the resources to maintain them properly, we shouldn't be offering
> them at all and should resort back to the single maintained release at
> any one time situation.)
>
> - Lower the supported period of a LTR release to 6 months?
>
> - Offer "theoretical" LTR releases ONLY as source code, but leave it
> to users to compile themselves and accept responsibility for their own
> packaging of this release.
>
> - Go on a funding drive so that QGIS can **pay** a developer and
> packager so that we actually CAN say we have stable LTR releases
> again?
>
> - ...something else...?
>
> Suffice to say, these are big issues, with big responses. But we're
> also under extreme time pressure here -- 3.16 is broken beyond belief,
> and we DO need to make some public responses asap (i.e. TODAY!!!!)
>
> Nyall
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>


-- 

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211115/cfe2700c/attachment.html>

From nirvn.asia at gmail.com  Mon Nov 15 20:19:24 2021
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Tue, 16 Nov 2021 11:19:24 +0700
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
Message-ID: <CAC_qv=pnwc71LknrNTBE_AtCPE5FaFLOgmoWYAubPn=zQaB6fA@mail.gmail.com>

Big supportive +1 on looking back at what happened during this last month
with the LTR, draw some lessons and take remedial actions.

Most urgently: we _absolutely_ need to stop advertising 3.16.13 LTR on the
website and fallback to 3.16.11 for now; can someone with access to the
website do that ASAP within the next 24 hours?

Once that's done, we should prioritize time fixing the underlying issue,
and discuss how we as a project can avoid failing into this situation
again.

There areI IMHO two crucial points to look into:
- On the technical side, how can we strengthen the process around LTR
releases to avoid _as much as possible_ shipping "broken" releases.
- On the project management side, how can we avoid the perceived lack of
speedy, immediate response to a very serious issue. Shipping problematic
releases is something we obviously should aim at avoiding, but even with
improvements in place, it is bound to happen again. At bare minimum,
whenever a "black swan" incident happens, we should have mechanisms in
place to take bad releases off the website as soon as possible.





On Tue, Nov 16, 2021 at 2:57 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> Hi lists,
>
> I'd like to start some conversation about the dire condition of the
> QGIS LTR release and what we can do to remedy/avoid this in future.
>
> If you've missed the conversation, our QGIS 3.16 windows releases have
> been completely broken for nearly a month now. 3.16.12 had a critical
> issue which caused lockups in Python code, and now 3.16.13 has
> completely broken projection handling (resulting in loss of CRS,
> hangups when opening projects, etc).
>
> So what do we do? I can think of a few responses we could make:
>
> - Kill 3.16.13 with fire. It needs to be removed from the website and
> all traces of the internet ASAP. Rollback to only offering 3.16.11,
> which is the last good Windows 3.16 release.
>
> - Put out a massive apology (and ask users to step up their funding to
> better maintain QGIS releases in future ;)
>
> - Mark 3.16 as an early EOL. (I can't see anyone interested in
> resolving the actual issue, so we've no way forward here in releasing
> a "good" 3.16 release again.)
>
> - Write the LTR releases off as a failed concept. (i.e. if we don't
> have the resources to maintain them properly, we shouldn't be offering
> them at all and should resort back to the single maintained release at
> any one time situation.)
>
> - Lower the supported period of a LTR release to 6 months?
>
> - Offer "theoretical" LTR releases ONLY as source code, but leave it
> to users to compile themselves and accept responsibility for their own
> packaging of this release.
>
> - Go on a funding drive so that QGIS can **pay** a developer and
> packager so that we actually CAN say we have stable LTR releases
> again?
>
> - ...something else...?
>
> Suffice to say, these are big issues, with big responses. But we're
> also under extreme time pressure here -- 3.16 is broken beyond belief,
> and we DO need to make some public responses asap (i.e. TODAY!!!!)
>
> Nyall
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/2b2de8c2/attachment.html>

From rdmailings at duif.net  Mon Nov 15 21:46:25 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 16 Nov 2021 06:46:25 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAC_qv=pnwc71LknrNTBE_AtCPE5FaFLOgmoWYAubPn=zQaB6fA@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <CAC_qv=pnwc71LknrNTBE_AtCPE5FaFLOgmoWYAubPn=zQaB6fA@mail.gmail.com>
Message-ID: <6593f31e-9314-f122-f6bb-aefe75ab769f@duif.net>

On 11/16/21 5:19 AM, Mathieu Pellerin wrote:
> Most urgently: we _absolutely_ need to stop advertising 3.16.13 LTR on the website and fallback to 3.16.11 for now; can someone with access to the website do that ASAP within the next 24 hours?

That is if I am correct (Juergen?) editing this file:
https://github.com/qgis/QGIS-Website/blob/master/source/schedule.py
and rebuild the websites...

But I do not want to do this, as I think PSC or the package manager should decide.
Please let me know...

Regards,

Richard Duivenvoorde

From anitagraser at gmx.at  Mon Nov 15 23:11:53 2021
From: anitagraser at gmx.at (Anita Graser)
Date: Tue, 16 Nov 2021 08:11:53 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <6593f31e-9314-f122-f6bb-aefe75ab769f@duif.net>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <CAC_qv=pnwc71LknrNTBE_AtCPE5FaFLOgmoWYAubPn=zQaB6fA@mail.gmail.com>
 <6593f31e-9314-f122-f6bb-aefe75ab769f@duif.net>
Message-ID: <7cf91109-c703-9ab5-1cbd-84cd46a207aa@gmx.at>


On 16.11.2021 06:46, Richard Duivenvoorde wrote:
> On 11/16/21 5:19 AM, Mathieu Pellerin wrote:
>> Most urgently: we _absolutely_ need to stop advertising 3.16.13 LTR on the website and fallback to 3.16.11 for now; can someone with access to the website do that ASAP within the next 24 hours?
> That is if I am correct (Juergen?) editing this file:
> https://github.com/qgis/QGIS-Website/blob/master/source/schedule.py
> and rebuild the websites...
>
> But I do not want to do this, as I think PSC or the package manager should decide.
> Please let me know...

I'm not sure if editing schedule.py is sufficient.

On our other media, I've taken down the update announcement on
https://blog.qgis.org.

Regards,

Anita



From andreaerdna at libero.it  Mon Nov 15 23:23:31 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 16 Nov 2021 08:23:31 +0100
Subject: [QGIS-Developer] QGIS LTR releases -- is it time to pull the
 plug?
In-Reply-To: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
Message-ID: <071c26a5-7256-b100-ffc9-4dfd5a574c03@libero.it>

Il 15/11/2021 20:57, Nyall Dawson ha scritto:

> So what do we do? I can think of a few responses we could make:
> 
> - Kill 3.16.13 with fire. It needs to be removed from the website and
> all traces of the internet ASAP. Rollback to only offering 3.16.11,
> which is the last good Windows 3.16 release.

I think the faster and simplest thing to do is to offer QGIS LTR 
installers from the old (v1) OSGeo4W repository ("continued with 
previous dependencies") and avoid to recommend the QGIS LTR installers 
from the new (v2) OSGeo4W (as it is now in the qgis.org download page).

AFAIK, the OSGeo4W v1 QGIS LTR 3.16.12 didn't suffer from the SIP issue 
nor the OSGeo4W v1 QGIS LTR 3.16.13 suffers from the CRS issue.

Regards.

Andrea

From nirvn.asia at gmail.com  Mon Nov 15 23:27:33 2021
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Tue, 16 Nov 2021 14:27:33 +0700
Subject: [QGIS-Developer] QGIS LTR releases -- is it time to pull the
 plug?
In-Reply-To: <071c26a5-7256-b100-ffc9-4dfd5a574c03@libero.it>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <071c26a5-7256-b100-ffc9-4dfd5a574c03@libero.it>
Message-ID: <CAC_qv=oOHZ=iJP2Dz5cYs2WKE9Ez=6jV22ZKNkSkpU+KBiAv9g@mail.gmail.com>

If packaging a brand new release is "faster" and "simpler" than updating
our website, there's something to improve there ;-P

We should have a clear procedure to allow for designated person(s) to be
able to swiftly revert a release on the website (manual edits if need be).

On Tue, Nov 16, 2021 at 2:23 PM Andrea Giudiceandrea <andreaerdna at libero.it>
wrote:

> Il 15/11/2021 20:57, Nyall Dawson ha scritto:
>
> > So what do we do? I can think of a few responses we could make:
> >
> > - Kill 3.16.13 with fire. It needs to be removed from the website and
> > all traces of the internet ASAP. Rollback to only offering 3.16.11,
> > which is the last good Windows 3.16 release.
>
> I think the faster and simplest thing to do is to offer QGIS LTR
> installers from the old (v1) OSGeo4W repository ("continued with
> previous dependencies") and avoid to recommend the QGIS LTR installers
> from the new (v2) OSGeo4W (as it is now in the qgis.org download page).
>
> AFAIK, the OSGeo4W v1 QGIS LTR 3.16.12 didn't suffer from the SIP issue
> nor the OSGeo4W v1 QGIS LTR 3.16.13 suffers from the CRS issue.
>
> Regards.
>
> Andrea
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/778ea90d/attachment.html>

From andreaerdna at libero.it  Mon Nov 15 23:30:22 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 16 Nov 2021 08:30:22 +0100
Subject: [QGIS-Developer] QGIS LTR releases -- is it time to pull the
 plug?
In-Reply-To: <CAC_qv=oOHZ=iJP2Dz5cYs2WKE9Ez=6jV22ZKNkSkpU+KBiAv9g@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <071c26a5-7256-b100-ffc9-4dfd5a574c03@libero.it>
 <CAC_qv=oOHZ=iJP2Dz5cYs2WKE9Ez=6jV22ZKNkSkpU+KBiAv9g@mail.gmail.com>
Message-ID: <a7555cab-2be0-0c47-97ec-78e53fcde23e@libero.it>

Il 16/11/2021 08:27, Mathieu Pellerin ha scritto:
> If packaging a brand new release is "faster" and "simpler" than updating 
> our website, there's something to improve there ;-P

The OSGeo4W v1 QGIS LTR 3.16.13 is already available and you can 
download it from the Website right now as a Standalone Installer or as 
Network Installer.

Regards.

Andrea

From nirvn.asia at gmail.com  Mon Nov 15 23:32:24 2021
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Tue, 16 Nov 2021 14:32:24 +0700
Subject: [QGIS-Developer] QGIS LTR releases -- is it time to pull the
 plug?
In-Reply-To: <a7555cab-2be0-0c47-97ec-78e53fcde23e@libero.it>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <071c26a5-7256-b100-ffc9-4dfd5a574c03@libero.it>
 <CAC_qv=oOHZ=iJP2Dz5cYs2WKE9Ez=6jV22ZKNkSkpU+KBiAv9g@mail.gmail.com>
 <a7555cab-2be0-0c47-97ec-78e53fcde23e@libero.it>
Message-ID: <CAC_qv=rcgSCnf+ZupSVPKD5kCtYTdNXZgBUAiOU7BFXsqrd11A@mail.gmail.com>

Right, we still need to kill the MSI installer, which is the one people
will hit first.

On Tue, Nov 16, 2021 at 2:30 PM Andrea Giudiceandrea <andreaerdna at libero.it>
wrote:

> Il 16/11/2021 08:27, Mathieu Pellerin ha scritto:
> > If packaging a brand new release is "faster" and "simpler" than updating
> > our website, there's something to improve there ;-P
>
> The OSGeo4W v1 QGIS LTR 3.16.13 is already available and you can
> download it from the Website right now as a Standalone Installer or as
> Network Installer.
>
> Regards.
>
> Andrea
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/7e22e6fc/attachment.html>

From marco at qgis.org  Mon Nov 15 23:33:02 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Tue, 16 Nov 2021 08:33:02 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <7cf91109-c703-9ab5-1cbd-84cd46a207aa@gmx.at>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <CAC_qv=pnwc71LknrNTBE_AtCPE5FaFLOgmoWYAubPn=zQaB6fA@mail.gmail.com>
 <6593f31e-9314-f122-f6bb-aefe75ab769f@duif.net>
 <7cf91109-c703-9ab5-1cbd-84cd46a207aa@gmx.at>
Message-ID: <CAB2ZMRBGm-j9vQ+vyD1xK0i8VMibrv+p7k9b+NhT3-XQPU4BjQ@mail.gmail.com>

Hi All, I think the first and immediate action to take is to remove 3.16.13
from the website and create a blog post stating the rollback and an apology.

After that, we can analyse, think and communicate about the next action.

@Richard Duivenvoorde <rdmailings at duif.net>  if you want you can create a
PR and assign it to J?rgen and Me.

Cheers
Marco



On Tue, 16 Nov 2021 at 08:12, Anita Graser <anitagraser at gmx.at> wrote:

>
> On 16.11.2021 06:46, Richard Duivenvoorde wrote:
> > On 11/16/21 5:19 AM, Mathieu Pellerin wrote:
> >> Most urgently: we _absolutely_ need to stop advertising 3.16.13 LTR on
> the website and fallback to 3.16.11 for now; can someone with access to the
> website do that ASAP within the next 24 hours?
> > That is if I am correct (Juergen?) editing this file:
> > https://github.com/qgis/QGIS-Website/blob/master/source/schedule.py
> > and rebuild the websites...
> >
> > But I do not want to do this, as I think PSC or the package manager
> should decide.
> > Please let me know...
>
> I'm not sure if editing schedule.py is sufficient.
>
> On our other media, I've taken down the update announcement on
> https://blog.qgis.org.
>
> Regards,
>
> Anita
>
>
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>


-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/c8b6517d/attachment.html>

From andreaerdna at libero.it  Mon Nov 15 23:48:46 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 16 Nov 2021 08:48:46 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAB2ZMRBGm-j9vQ+vyD1xK0i8VMibrv+p7k9b+NhT3-XQPU4BjQ@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <CAC_qv=pnwc71LknrNTBE_AtCPE5FaFLOgmoWYAubPn=zQaB6fA@mail.gmail.com>
 <6593f31e-9314-f122-f6bb-aefe75ab769f@duif.net>
 <7cf91109-c703-9ab5-1cbd-84cd46a207aa@gmx.at>
 <CAB2ZMRBGm-j9vQ+vyD1xK0i8VMibrv+p7k9b+NhT3-XQPU4BjQ@mail.gmail.com>
Message-ID: <a569c309-a9b0-4404-24c1-5814a21143ce@libero.it>

Il 16/11/2021 08:33, Marco Bernasocchi ha scritto:
> Hi All, I think the first and immediate action to take is to remove 
> 3.16.13 from the website and create a blog post stating the rollback and 
> an apology.

A minimal pull request to remove the OSGeo4W v2 Standalone Installer 
from the download page of the Website:
https://github.com/qgis/QGIS-Website/pull/949

From marco at qgis.org  Mon Nov 15 23:50:16 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Tue, 16 Nov 2021 08:50:16 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
Message-ID: <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>

Hi Anita, Hi Nyall, Hi All
I think that it is a good idea to allocate the first half hour (and more if
needed) in tonight's budget meeting to this very pressing subject.
Nyall, thanks a lot for your analysis, we'll use it as discussion base.

I extended the meeting invitation from 18:00 to 19:30.

See you later
Marco


On Mon, 15 Nov 2021 at 21:37, Anita Graser <anitagraser at gmx.at> wrote:

> Thank you Nyall for the candid assessment.
> I'm ready to help wherever I can, which most likely comes down to writing
> announcements.
> We had the budget meeting scheduled for Tuesday evening but it sounds like
> we should get on top of this issue asap.
>
> Regards
> Anita
>
> 15 Nov 2021 20:57:36 Nyall Dawson <nyall.dawson at gmail.com>:
>
> > Hi lists,
> >
> > I'd like to start some conversation about the dire condition of the
> > QGIS LTR release and what we can do to remedy/avoid this in future.
> >
> > If you've missed the conversation, our QGIS 3.16 windows releases have
> > been completely broken for nearly a month now. 3.16.12 had a critical
> > issue which caused lockups in Python code, and now 3.16.13 has
> > completely broken projection handling (resulting in loss of CRS,
> > hangups when opening projects, etc).
> >
> > So what do we do? I can think of a few responses we could make:
> >
> > - Kill 3.16.13 with fire. It needs to be removed from the website and
> > all traces of the internet ASAP. Rollback to only offering 3.16.11,
> > which is the last good Windows 3.16 release.
> >
> > - Put out a massive apology (and ask users to step up their funding to
> > better maintain QGIS releases in future ;)
> >
> > - Mark 3.16 as an early EOL. (I can't see anyone interested in
> > resolving the actual issue, so we've no way forward here in releasing
> > a "good" 3.16 release again.)
> >
> > - Write the LTR releases off as a failed concept. (i.e. if we don't
> > have the resources to maintain them properly, we shouldn't be offering
> > them at all and should resort back to the single maintained release at
> > any one time situation.)
> >
> > - Lower the supported period of a LTR release to 6 months?
> >
> > - Offer "theoretical" LTR releases ONLY as source code, but leave it
> > to users to compile themselves and accept responsibility for their own
> > packaging of this release.
> >
> > - Go on a funding drive so that QGIS can **pay** a developer and
> > packager so that we actually CAN say we have stable LTR releases
> > again?
> >
> > - ...something else...?
> >
> > Suffice to say, these are big issues, with big responses. But we're
> > also under extreme time pressure here -- 3.16 is broken beyond belief,
> > and we DO need to make some public responses asap (i.e. TODAY!!!!)
> >
> > Nyall
> > _______________________________________________
> > Qgis-psc mailing list
> > Qgis-psc at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/qgis-psc
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>


-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/967d688a/attachment.html>

From apasotti at gmail.com  Tue Nov 16 00:22:43 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 16 Nov 2021 09:22:43 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
Message-ID: <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>

On Tue, Nov 16, 2021 at 8:50 AM Marco Bernasocchi <marco at qgis.org> wrote:

> Hi Anita, Hi Nyall, Hi All
> I think that it is a good idea to allocate the first half hour (and more
> if needed) in tonight's budget meeting to this very pressing subject.
> Nyall, thanks a lot for your analysis, we'll use it as discussion base.
>
> I extended the meeting invitation from 18:00 to 19:30.
>
> See you later
> Marco
>
>
>
Hi,

thinking about how to possibly prevent this to happen again I think that
the manual testing cycles as proposed with
https://lists.osgeo.org/pipermail/qgis-psc/2020-December/009186.html could
help in identifying biggest issues before a release.

I think we should consider the possibility of investing in that direction.

Kind regards.

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/4885ab3c/attachment.html>

From jef at norbit.de  Tue Nov 16 00:59:35 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 16 Nov 2021 09:59:35 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
Message-ID: <20211116085935.5cvrx3d6fjwhe66m@norbit.de>

Hi,

On Tue, 16. Nov 2021 at 05:57:09 +1000, Nyall Dawson wrote:
> I'd like to start some conversation about the dire condition of the
> QGIS LTR release and what we can do to remedy/avoid this in future.
> 
> If you've missed the conversation, our QGIS 3.16 windows releases have
> been completely broken for nearly a month now. 3.16.12 had a critical
> issue which caused lockups in Python code, and now 3.16.13 has
> completely broken projection handling (resulting in loss of CRS,
> hangups when opening projects, etc).

Only the 3.16.13 MSI is broken (not sure if 3.16.12-2 is affected).   OSGeo4W
v2 was meanwhile fixed.   All other platforms are not affected at all.  The
next release is on friday and will also produce a fresh MSI.

I 'downgraded' the website to 3.16.11 and the website rebuild is ongoing.

Doing another MSI of 3.16.13 would be an option, but I guess as the 3.16.14 is
due on friday - it's probably good enough to just do that and sort it out
that way.

bbl.  Heading to the office now? 


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/19346037/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/19346037/attachment.ksh>

From marco at qgis.org  Tue Nov 16 01:33:48 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Tue, 16 Nov 2021 10:33:48 +0100
Subject: [QGIS-Developer] QGIS LTR 3.16.13 reverted to 3.16.11
Message-ID: <CAB2ZMRDoTpha90T7_K34iW9iaoeBNHRQC5Xq29OrMgx04hgVtQ@mail.gmail.com>

Dear community,
Due to some rather severe issues in the 3.16.13 and .12 Windows MSI
installers, we decided to temporarily revert back [0] the available
download to the latest release without those issues, 3.16.11. The website
rebuild has been performed and you'll see everywhere that 3.16.11 is the
latest LTR. This is true for Windows only as other OS will keep delivering
the latest 3.16.13.

Next Friday 19th November is the planned release date for 3.16.14 which
should bring fixes to both the above mentioned issues and restore the
normal release flow.

Quoting our release manager J?rgen Fischer:
"Only the 3.16.13 MSI is broken (not sure if 3.16.12-2 is affected).
 OSGeo4W
v2 was meanwhile fixed.   All other platforms are not affected at all.  The
next release is on friday and will also produce a fresh MSI."

We apologise for the inconvenience and would like to take the opportunity
to remind you how much work goes into producing and maintaining the high
quality product that you've grown to love and that this is only possible
thanks to our sustaining members and volunteers.
If you or your organisation is relying on QGIS, it might be a good time to
consider joining QGIS' funding effort at https://qgis.org/funding or
https://github.com/sponsors/qgis/

Have a great week, cheers
Marco

[0]
https://github.com/qgis/QGIS-Website/commit/2ef89726a066d9e4374bb210596500c228a6056d#diff-1618df4ceb52cef1cf94bb09e49c21d7ca0ff4281ee6b4021172872dfeb79969

-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/263c0939/attachment-0001.html>

From senhor.neto at gmail.com  Tue Nov 16 02:03:27 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 16 Nov 2021 10:03:27 +0000
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAB2Z92DCkXq6RxwoDt05Q_NRZa-s_jzfaSAHQhpiD=L_LbR_KQ@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <CAB2Z92DCkXq6RxwoDt05Q_NRZa-s_jzfaSAHQhpiD=L_LbR_KQ@mail.gmail.com>
Message-ID: <CA+H0G_HtTJhd_m7svNmR-_424OHGnQjUZT1-=1PUPfvEZ=Dk6Q@mail.gmail.com>

Hello all,

On Mon, Nov 15, 2021 at 9:09 PM Andreas Neumann <andreas at qgis.org> wrote:

> - strictly separate the build systems and libraries of LTR and regular
> releases. Parts of the problem stem from the fact that during the lifetime
> of an LTR underlying libraries are updated. Ideally, the libraries of the
> LT releases only receive bug fixes, but no new features
> - put more resources into manual testing
> - put more resources into packaging in general
> - let every release be checked manually by a couple of dedicates power
> users (at least the LTR ones) before it goes out to the public
>
> I know - all of these need personal/financial resources.
>
> Andreas
>

Since resources are limited, another thing we may consider is to reduce the
number of releases per year.
If on top of that, we could add a packaging freeze period, it would be
possible to run installers' manual tests before they are released to the
general public.

Here are some test plans we prepared for QEP 180:

https://qgis.tenant.kiwitcms.org/plan/search/

These are only examples, we can think about more tests, especially things
that can't be caught by CI.

Best regards,

Alexandre Neto



> On Mon, 15 Nov 2021 at 20:57, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
>> Hi lists,
>>
>> I'd like to start some conversation about the dire condition of the
>> QGIS LTR release and what we can do to remedy/avoid this in future.
>>
>> If you've missed the conversation, our QGIS 3.16 windows releases have
>> been completely broken for nearly a month now. 3.16.12 had a critical
>> issue which caused lockups in Python code, and now 3.16.13 has
>> completely broken projection handling (resulting in loss of CRS,
>> hangups when opening projects, etc).
>>
>> So what do we do? I can think of a few responses we could make:
>>
>> - Kill 3.16.13 with fire. It needs to be removed from the website and
>> all traces of the internet ASAP. Rollback to only offering 3.16.11,
>> which is the last good Windows 3.16 release.
>>
>> - Put out a massive apology (and ask users to step up their funding to
>> better maintain QGIS releases in future ;)
>>
>> - Mark 3.16 as an early EOL. (I can't see anyone interested in
>> resolving the actual issue, so we've no way forward here in releasing
>> a "good" 3.16 release again.)
>>
>> - Write the LTR releases off as a failed concept. (i.e. if we don't
>> have the resources to maintain them properly, we shouldn't be offering
>> them at all and should resort back to the single maintained release at
>> any one time situation.)
>>
>> - Lower the supported period of a LTR release to 6 months?
>>
>> - Offer "theoretical" LTR releases ONLY as source code, but leave it
>> to users to compile themselves and accept responsibility for their own
>> packaging of this release.
>>
>> - Go on a funding drive so that QGIS can **pay** a developer and
>> packager so that we actually CAN say we have stable LTR releases
>> again?
>>
>> - ...something else...?
>>
>> Suffice to say, these are big issues, with big responses. But we're
>> also under extreme time pressure here -- 3.16 is broken beyond belief,
>> and we DO need to make some public responses asap (i.e. TODAY!!!!)
>>
>> Nyall
>> _______________________________________________
>> Qgis-psc mailing list
>> Qgis-psc at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>>
>
>
> --
>
> --
> Andreas Neumann
> QGIS.ORG board member (treasurer)
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/e1b9491d/attachment.html>

From bo.victor.thomsen at gmail.com  Tue Nov 16 03:00:07 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Tue, 16 Nov 2021 12:00:07 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
Message-ID: <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>

Hi all -

I have a few comments? regarding the possible removal of the "QGIS LTR 
versions" ( as one of the original proponents for having a LTR version ) :

  * The LTR version is the version that almost /all/ QGIS-using
    /organisations/ in Denmark is using. That means 40 - 50 % of all
    municipalities, regions (counties) and a number of state
    departments. And a lot of private companies too.? They use it mostly
    in conjunction with some kind of "Web GIS" and have QGIS for the
    hard and complex stuff. This market penetration is on par with ESRI
    and better than MapInfo. As a treasurer of the QGIS Denmark User
    group I've registered 85 Danish organisational members out of 260
    members. And this number is growing. So there is a large and growing
    number of QGIS users, that prefer the? LTR version (actually the
    vast majority if you count the individual users in the organisations) .
    The yearly fee from these organisational members is in large part
    the reason why QGIS Denmark has a Gold sponsorship of QGIS.

    I don't know about other countries, but I /guess, /that preferences
    in organisations is roughly the same: They prefer stability and as
    few errors as possible. And thirdly new glitzy features

  * I we ditch the LTR versions,? I fear that an old nemesis will
    resurface: That there is not /any /version of QGIS that is really
    stable:? A small irritating bug in ver. x will be solved in ver.
    x+1. However ver. x+1 contains another small irritating bug, that
    will be solved in version x+2 ....

    I know that the development process for QGIS has evolved
    tremendously the last couple of years. However, I still remember the
    "bad old days" with "no responsibility" for killing bugs in existing
    code caused by introduction of new code.

  * In my experience, the 1 - year period for LTR is the shortest period
    acceptable for organisations. They don't want to repackage QGIS
    every 6 months and certainly not every 4 months. You might even let
    the period be 1.5- 2 years instead of 1 year.

  * The quagmire of ver. 3.16... Isn't it a combination of a relatively
    old version of QGIS fine tuned to a set of support libraries, where
    the support libraries gets upgraded "an masse" because OsGeo4W gets
    upgraded from v1 to v2.; SIP gets upgraded from v4 to v6. And the
    proj library goes through several upgrades from v4 to v8 ? I my
    perspective that's a receipt for "The perfect storm". If it can't be
    fixed, then freeze it at 3.16.11 and fast-promote ver. 3.22 as LTR,
    perhaps with a big warning sign on it.
    This it not a critique of the upgrade process. Every piece of
    software, including supporting libraries has to be upgraded from
    time to time. However I count 3 major upgrades of libraries on the
    same time
    NB! Just read J?rgen's posting on ver. 3.16.14 being released on?
    friday. If it works, then that's solves the ver. 3.16 issues for me.

  * I know, bug squashing is nobody's favourite programming discipline.
    Especially if you not are paid for doing it. Hence the need for bug
    squashin by payment. So what about trying to reach out to the large
    (or small) sponsors and ask them if they could put some extra coins
    in the pot earmarked for LTR ? I can't solely speak for QGIS Denmark
    User group, but I would certainly discuss this problem with other
    members of the board and eventually the general assembly. And we
    have some contacts with the other QGIS usergroups i Scandinavia. The
    Swiss usergroup could for example talk with the german usergroup (I
    know the problem is not based on language, but sometimes it's easier
    to promote an idea with people talking roughly the same language)

    So how much money are we talking about ?

Whatever that's decided regarding the LTR, I personally still will be a 
staunch supporter of QGIS. But please don't throw the baby out with the 
bathwater without due consideration and without trying alternative 
solutions.

Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 16-11-2021 kl. 09:22 skrev Alessandro Pasotti:
>
> On Tue, Nov 16, 2021 at 8:50 AM Marco Bernasocchi <marco at qgis.org> wrote:
>
>     Hi?Anita, Hi Nyall, Hi All
>     I think that it is a good idea to allocate the first half hour
>     (and more if needed) in tonight's budget meeting to this very
>     pressing subject.
>     Nyall, thanks a lot for your analysis, we'll use it as discussion
>     base.
>
>     I extended the meeting invitation from 18:00 to 19:30.
>
>     See you later
>     Marco
>
>
>
> Hi,
>
> thinking about how to possibly prevent this to happen again I think 
> that the manual testing cycles as proposed with 
> https://lists.osgeo.org/pipermail/qgis-psc/2020-December/009186.html 
> could help in identifying biggest issues before a release.
>
> I think we should consider the possibility of investing in that direction.
>
> Kind regards.
>
> -- 
> Alessandro Pasotti
> QCooperative: www.qcooperative.net <https://www.qcooperative.net>
> ItOpen: www.itopen.it <http://www.itopen.it>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/75b57f8b/attachment.html>

From matthias at opengis.ch  Tue Nov 16 03:02:36 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 16 Nov 2021 12:02:36 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CA+H0G_HtTJhd_m7svNmR-_424OHGnQjUZT1-=1PUPfvEZ=Dk6Q@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <CAB2Z92DCkXq6RxwoDt05Q_NRZa-s_jzfaSAHQhpiD=L_LbR_KQ@mail.gmail.com>
 <CA+H0G_HtTJhd_m7svNmR-_424OHGnQjUZT1-=1PUPfvEZ=Dk6Q@mail.gmail.com>
Message-ID: <CAC7zN94wL4d6duMWYZcZETcdq2G5JMvZ3j54E6FhM6LTAnM-4A@mail.gmail.com>

Hi all,

I am very much in favor of evaluating what went wrong and drafting possible
next steps to improve the situation.

Thank you Nyall for starting the discussion and insisting to get things
done. And thanks to the PSC and Marco for sending the information mail.

Some very good points have been made already. With respect to *testing*,
looking at the product as *source code plus the bundled libraries*, and
asserting that the LTR is something that we produce as *a service for
larger organizations that can and should take responsibility for its
maintenance*.

Best regards
Matthias

On Tue, Nov 16, 2021 at 11:03 AM Alexandre Neto <senhor.neto at gmail.com>
wrote:

> Hello all,
>
> On Mon, Nov 15, 2021 at 9:09 PM Andreas Neumann <andreas at qgis.org> wrote:
>
>> - strictly separate the build systems and libraries of LTR and regular
>> releases. Parts of the problem stem from the fact that during the lifetime
>> of an LTR underlying libraries are updated. Ideally, the libraries of the
>> LT releases only receive bug fixes, but no new features
>> - put more resources into manual testing
>> - put more resources into packaging in general
>> - let every release be checked manually by a couple of dedicates power
>> users (at least the LTR ones) before it goes out to the public
>>
>> I know - all of these need personal/financial resources.
>>
>> Andreas
>>
>
> Since resources are limited, another thing we may consider is to reduce
> the number of releases per year.
> If on top of that, we could add a packaging freeze period, it would be
> possible to run installers' manual tests before they are released to the
> general public.
>
> Here are some test plans we prepared for QEP 180:
>
> https://qgis.tenant.kiwitcms.org/plan/search/
>
> These are only examples, we can think about more tests, especially things
> that can't be caught by CI.
>
> Best regards,
>
> Alexandre Neto
>
>
>
>> On Mon, 15 Nov 2021 at 20:57, Nyall Dawson <nyall.dawson at gmail.com>
>> wrote:
>>
>>> Hi lists,
>>>
>>> I'd like to start some conversation about the dire condition of the
>>> QGIS LTR release and what we can do to remedy/avoid this in future.
>>>
>>> If you've missed the conversation, our QGIS 3.16 windows releases have
>>> been completely broken for nearly a month now. 3.16.12 had a critical
>>> issue which caused lockups in Python code, and now 3.16.13 has
>>> completely broken projection handling (resulting in loss of CRS,
>>> hangups when opening projects, etc).
>>>
>>> So what do we do? I can think of a few responses we could make:
>>>
>>> - Kill 3.16.13 with fire. It needs to be removed from the website and
>>> all traces of the internet ASAP. Rollback to only offering 3.16.11,
>>> which is the last good Windows 3.16 release.
>>>
>>> - Put out a massive apology (and ask users to step up their funding to
>>> better maintain QGIS releases in future ;)
>>>
>>> - Mark 3.16 as an early EOL. (I can't see anyone interested in
>>> resolving the actual issue, so we've no way forward here in releasing
>>> a "good" 3.16 release again.)
>>>
>>> - Write the LTR releases off as a failed concept. (i.e. if we don't
>>> have the resources to maintain them properly, we shouldn't be offering
>>> them at all and should resort back to the single maintained release at
>>> any one time situation.)
>>>
>>> - Lower the supported period of a LTR release to 6 months?
>>>
>>> - Offer "theoretical" LTR releases ONLY as source code, but leave it
>>> to users to compile themselves and accept responsibility for their own
>>> packaging of this release.
>>>
>>> - Go on a funding drive so that QGIS can **pay** a developer and
>>> packager so that we actually CAN say we have stable LTR releases
>>> again?
>>>
>>> - ...something else...?
>>>
>>> Suffice to say, these are big issues, with big responses. But we're
>>> also under extreme time pressure here -- 3.16 is broken beyond belief,
>>> and we DO need to make some public responses asap (i.e. TODAY!!!!)
>>>
>>> Nyall
>>> _______________________________________________
>>> Qgis-psc mailing list
>>> Qgis-psc at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>>>
>>
>>
>> --
>>
>> --
>> Andreas Neumann
>> QGIS.ORG board member (treasurer)
>> _______________________________________________
>> Qgis-psc mailing list
>> Qgis-psc at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>>
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/5ca1f395/attachment-0001.html>

From nick at geospatialtrainingsolutions.co.uk  Tue Nov 16 03:21:16 2021
From: nick at geospatialtrainingsolutions.co.uk (Nick Bearman)
Date: Tue, 16 Nov 2021 11:21:16 +0000
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
Message-ID: <22571121-42d6-e6e6-1ea2-c8d095522ec4@geospatialtrainingsolutions.co.uk>

+1 To everything Bo Victor says, thanks for covering everything I wanted 
to say!

In training / education / teaching (in my experience) materials are 
usually written for the latest LTR versions, so they don't need to be 
updated too frequently.

Best wishes,
Nick.

On 16/11/2021 11:00, Bo Victor Thomsen wrote:
>
> Hi all -
>
> I have a few comments? regarding the possible removal of the "QGIS LTR 
> versions" ( as one of the original proponents for having a LTR version ) :
>
>   * The LTR version is the version that almost /all/ QGIS-using
>     /organisations/ in Denmark is using. That means 40 - 50 % of all
>     municipalities, regions (counties) and a number of state
>     departments. And a lot of private companies too.? They use it
>     mostly in conjunction with some kind of "Web GIS" and have QGIS
>     for the hard and complex stuff. This market penetration is on par
>     with ESRI and better than MapInfo. As a treasurer of the QGIS
>     Denmark User group I've registered 85 Danish organisational
>     members out of 260 members. And this number is growing. So there
>     is a large and growing number of QGIS users, that prefer the? LTR
>     version (actually the vast majority if you count the individual
>     users in the organisations) .
>     The yearly fee from these organisational members is in large part
>     the reason why QGIS Denmark has a Gold sponsorship of QGIS.
>
>     I don't know about other countries, but I /guess, /that
>     preferences in organisations is roughly the same: They prefer
>     stability and as few errors as possible. And thirdly new glitzy
>     features
>
>   * I we ditch the LTR versions,? I fear that an old nemesis will
>     resurface: That there is not /any /version of QGIS that is really
>     stable:? A small irritating bug in ver. x will be solved in ver.
>     x+1. However ver. x+1 contains another small irritating bug, that
>     will be solved in version x+2 ....
>
>     I know that the development process for QGIS has evolved
>     tremendously the last couple of years. However, I still remember
>     the "bad old days" with "no responsibility" for killing bugs in
>     existing code caused by introduction of new code.
>
>   * In my experience, the 1 - year period for LTR is the shortest
>     period acceptable for organisations. They don't want to repackage
>     QGIS every 6 months and certainly not every 4 months. You might
>     even let the period be 1.5- 2 years instead of 1 year.
>
>   * The quagmire of ver. 3.16... Isn't it a combination of a
>     relatively old version of QGIS fine tuned to a set of support
>     libraries, where the support libraries gets upgraded "an masse"
>     because OsGeo4W gets upgraded from v1 to v2.; SIP gets upgraded
>     from v4 to v6. And the proj library goes through several upgrades
>     from v4 to v8 ? I my perspective that's a receipt for "The perfect
>     storm". If it can't be fixed, then freeze it at 3.16.11 and
>     fast-promote ver. 3.22 as LTR, perhaps with a big warning sign on it.
>     This it not a critique of the upgrade process. Every piece of
>     software, including supporting libraries has to be upgraded from
>     time to time. However I count 3 major upgrades of libraries on the
>     same time
>     NB! Just read J?rgen's posting on ver. 3.16.14 being released on?
>     friday. If it works, then that's solves the ver. 3.16 issues for me.
>
>   * I know, bug squashing is nobody's favourite programming
>     discipline. Especially if you not are paid for doing it. Hence the
>     need for bug squashin by payment. So what about trying to reach
>     out to the large (or small) sponsors and ask them if they could
>     put some extra coins in the pot earmarked for LTR ? I can't solely
>     speak for QGIS Denmark User group, but I would certainly discuss
>     this problem with other members of the board and eventually the
>     general assembly. And we have some contacts with the other QGIS
>     usergroups i Scandinavia. The Swiss usergroup could for example
>     talk with the german usergroup (I know the problem is not based on
>     language, but sometimes it's easier to promote an idea with people
>     talking roughly the same language)
>
>     So how much money are we talking about ?
>
> Whatever that's decided regarding the LTR, I personally still will be 
> a staunch supporter of QGIS. But please don't throw the baby out with 
> the bathwater without due consideration and without trying alternative 
> solutions.
>
> Med venlig hilsen / Kind regards
>
> Bo Victor Thomsen
> Den 16-11-2021 kl. 09:22 skrev Alessandro Pasotti:
>>
>> On Tue, Nov 16, 2021 at 8:50 AM Marco Bernasocchi <marco at qgis.org> wrote:
>>
>>     Hi?Anita, Hi Nyall, Hi All
>>     I think that it is a good idea to allocate the first half hour
>>     (and more if needed) in tonight's budget meeting to this very
>>     pressing subject.
>>     Nyall, thanks a lot for your analysis, we'll use it as discussion
>>     base.
>>
>>     I extended the meeting invitation from 18:00 to 19:30.
>>
>>     See you later
>>     Marco
>>
>>
>>
>> Hi,
>>
>> thinking about how to possibly prevent this to happen again I think 
>> that the manual testing cycles as proposed with 
>> https://lists.osgeo.org/pipermail/qgis-psc/2020-December/009186.html 
>> could help in identifying biggest issues before a release.
>>
>> I think we should consider the possibility of investing in that 
>> direction.
>>
>> Kind regards.
>>
>> -- 
>> Alessandro Pasotti
>> QCooperative: www.qcooperative.net <https://www.qcooperative.net>
>> ItOpen: www.itopen.it <http://www.itopen.it>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Nick Bearman
Tel / WhatsApp / Signal: +44 (0) 7717745715
nick at geospatialtrainingsolutions.co.uk

My working pattern is probably not the same as your working pattern, therefore
you may get emails from me outside of normal working hours. Please do not feel any
pressure to respond outside of your own working pattern.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/973ecf07/attachment.html>

From andreaerdna at libero.it  Tue Nov 16 03:37:58 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 16 Nov 2021 12:37:58 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
Message-ID: <1e2e3f0e-d79c-a511-9aab-8ed11648cf01@libero.it>

Il 16/11/2021 12:00, Bo Victor Thomsen ha scritto:

>   * The quagmire of ver. 3.16... Isn't it a combination of a relatively
>     old version of QGIS fine tuned to a set of support libraries, where
>     the support libraries gets upgraded "an masse" because OsGeo4W gets
>     upgraded from v1 to v2.; SIP gets upgraded from v4 to v6. And the
>     proj library goes through several upgrades from v4 to v8 ?

I'll add Python from 3.7 to 3.9-3.10 and Qt from 5.11 (without ICU) to 
5.15 (with ICU).

Anyway QGIS LTR 3.16 is still available trough the old OSGeo4W v1 with 
the previous dependencies.

Why don't offer the download of QGIS LTR 3.16 from OSGeo4W v1 as first 
choice, instead of from OSGeo4W v2?

The recent issues don't occur in the QGIS LTR 3.16 installers (both 
"Standalone" and "Network") from OSGeo4W v1.

Regards.

Andrea

From a.neumann at carto.net  Tue Nov 16 04:00:42 2021
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 16 Nov 2021 13:00:42 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
Message-ID: <b523fe7c0935d6a9547f6de9c0983840@carto.net>

Hi all,

Thank you Bo for this extensive summary of reasons why we should keep 
the LTR version.

I can only second that - from the perspective of being employed at a 
public organization myself - and from the perspective of I believe the 
majority of the Swiss QGIS users. The LTR version is certainly a success 
in general and it is what most users want.

Let's rather fix the issues in the LTR release process rather than 
killing it off because we sometimes run into troubles with it.

We should also think about all the good things that the LTR version 
provided to the QGIS users (in general it brought a lot of stability and 
increased reliability). Shit happens sometimes (like now) - and from 
every problem we should take the opportunity to potentially improve our 
project.

Andreas

On 2021-11-16 12:00, Bo Victor Thomsen wrote:

> Hi all -
> 
> I have a few comments  regarding the possible removal of the "QGIS LTR 
> versions" ( as one of the original proponents for having a LTR version 
> ) :
> 
> * The LTR version is the version that almost _all_ QGIS-using 
> _organisations_ in Denmark is using. That means 40 - 50 % of all 
> municipalities, regions (counties) and a number of state departments. 
> And a lot of private companies too.  They use it mostly in conjunction 
> with some kind of "Web GIS" and have QGIS for the hard and complex 
> stuff. This market penetration is on par with ESRI and better than 
> MapInfo. As a treasurer of the QGIS Denmark User group I've registered 
> 85 Danish organisational members out of 260 members. And this number is 
> growing. So there is a large and growing number of QGIS users, that 
> prefer the  LTR version (actually the vast majority if you count the 
> individual users in the organisations) .
> The yearly fee from these organisational members is in large part the 
> reason why QGIS Denmark has a Gold sponsorship of QGIS.
> 
> I don't know about other countries, but I _guess, _that preferences in 
> organisations is roughly the same: They prefer stability and as few 
> errors as possible. And thirdly new glitzy features
> 
> * I we ditch the LTR versions,  I fear that an old nemesis will 
> resurface: That there is not _any _version of QGIS that is really 
> stable:  A small irritating bug in ver. x will be solved in ver. x+1. 
> However ver. x+1 contains another small irritating bug, that will be 
> solved in version x+2 ....
> 
> I know that the development process for QGIS has evolved tremendously 
> the last couple of years. However, I still remember the "bad old days" 
> with "no responsibility" for killing bugs in existing code caused by 
> introduction of new code.
> 
> * In my experience, the 1 - year period for LTR is the shortest period 
> acceptable for organisations. They don't want to repackage QGIS every 6 
> months and certainly not every 4 months. You might even let the period 
> be 1.5- 2 years instead of 1 year.
> 
> * The quagmire of ver. 3.16... Isn't it a combination of a relatively 
> old version of QGIS fine tuned to a set of support libraries, where the 
> support libraries gets upgraded "an masse" because OsGeo4W gets 
> upgraded from v1 to v2.; SIP gets upgraded from v4 to v6. And the proj 
> library goes through several upgrades from v4 to v8 ? I my perspective 
> that's a receipt for "The perfect storm". If it can't be fixed, then 
> freeze it at 3.16.11 and fast-promote ver. 3.22 as LTR, perhaps with a 
> big warning sign on it.
> This it not a critique of the upgrade process. Every piece of software, 
> including supporting libraries has to be upgraded from time to time. 
> However I count 3 major upgrades of libraries on the same time
> NB! Just read J?rgen's posting on ver. 3.16.14 being released on  
> friday. If it works, then that's solves the ver. 3.16 issues for me.
> 
> * I know, bug squashing is nobody's favourite programming discipline. 
> Especially if you not are paid for doing it. Hence the need for bug 
> squashin by payment. So what about trying to reach out to the large (or 
> small) sponsors and ask them if they could put some extra coins in the 
> pot earmarked for LTR ? I can't solely speak for QGIS Denmark User 
> group, but I would certainly discuss this problem with other members of 
> the board and eventually the general assembly. And we have some 
> contacts with the other QGIS usergroups i Scandinavia. The Swiss 
> usergroup could for example talk with the german usergroup (I know the 
> problem is not based on language, but sometimes it's easier to promote 
> an idea with people talking roughly the same language)
> 
> So how much money are we talking about ?
> 
> Whatever that's decided regarding the LTR, I personally still will be a 
> staunch supporter of QGIS. But please don't throw the baby out with the 
> bathwater without due consideration and without trying alternative 
> solutions.
> 
> Med venlig hilsen / Kind regards
> 
> Bo Victor Thomsen
> 
> Den 16-11-2021 kl. 09:22 skrev Alessandro Pasotti:
> 
> On Tue, Nov 16, 2021 at 8:50 AM Marco Bernasocchi <marco at qgis.org> 
> wrote:
> Hi Anita, Hi Nyall, Hi All
> I think that it is a good idea to allocate the first half hour (and 
> more if needed) in tonight's budget meeting to this very pressing 
> subject.
> Nyall, thanks a lot for your analysis, we'll use it as discussion base.
> 
> I extended the meeting invitation from 18:00 to 19:30.
> 
> See you later
> Marco
> 
> Hi,
> 
> thinking about how to possibly prevent this to happen again I think 
> that the manual testing cycles as proposed with 
> https://lists.osgeo.org/pipermail/qgis-psc/2020-December/009186.html 
> could help in identifying biggest issues before a release.
> 
> I think we should consider the possibility of investing in that 
> direction.
> 
> Kind regards.
> --
> 
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net [1] ItOpen:   www.itopen.it [2]
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



Links:
------
[1] https://www.qcooperative.net
[2] http://www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/7d7f19db/attachment-0001.html>

From jef at norbit.de  Tue Nov 16 06:28:51 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 16 Nov 2021 15:28:51 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAC7zN94wL4d6duMWYZcZETcdq2G5JMvZ3j54E6FhM6LTAnM-4A@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <CAB2Z92DCkXq6RxwoDt05Q_NRZa-s_jzfaSAHQhpiD=L_LbR_KQ@mail.gmail.com>
 <CA+H0G_HtTJhd_m7svNmR-_424OHGnQjUZT1-=1PUPfvEZ=Dk6Q@mail.gmail.com>
 <CAC7zN94wL4d6duMWYZcZETcdq2G5JMvZ3j54E6FhM6LTAnM-4A@mail.gmail.com>
Message-ID: <20211116142851.6p6e4zgnol4q22i6@norbit.de>

Hi Matthias,

On Tue, 16. Nov 2021 at 12:02:36 +0100, Matthias Kuhn wrote:
> I am very much in favor of evaluating what went wrong and drafting possible
> next steps to improve the situation.

Well, from my point of view there were a few updates late in the release that
started it.

OSGeo4W was using SIP 5 what was capabable of building the releases and master
- as long as both were using SIP's old build build system.  But that was
discontinued with SIP 6.

So for distributions that only have SIP 6 QGIS's support of that had to added -
and was (thanks Sandro).   But that broke the master build in OSGeo4W.   To
address that I updated OSGeo4W to SIP 6 - which in turn - but not unexpectedly
- broke the LTR build.

But there was still enough time to work on that before the release.  And I did
so by backporting the QGIS' SIP6 support of 3.22 to 3.16 - which apparently
worked as good as it was in 3.22.  What I didn't know was that it wasn't
working well on 3.22 either.  And it took a week after the release to become
clear.  Still there were only few - if any -windows nightlies right before the
release to test.

In the week before the release there also was another big change in master's
SIP, that wasn't working on (the native MSVC) windows build at all and took
some discussion to resolve and revert.   That took away more preparation time.
But still not enough to make the release impossible.

Meanwhile PROJ 8.2 was released and GDAL 3.4 was in sight.   After the release
I started working on those updates.

When the SIP issues became apparent after the release, I applied the quick fix
(thanks Sandro) to the OSGeo4W qgis packages and quickly made a new MSI of
3.16.12.

After some more discussion we decided to better do a 3.16.13 release.  Not sure
if it also already applied to the 3.16.12-2 MSI, but the 3.16.13 MSI was
already built with PROJ 8.2 although the rest of OSGeo4W was still using 8.1.
Not sure how that happened, but it did.

That is the apparent source of the new issue.   Those issues were resolved last
week in OSGeo4W - by rebuilding their reverse dependencies against PROJ 8.2 and
GDAL 3.4.  The MSI was not yet updated yet - mainly because the next release is
due friday anyway.

There were also issues with polish characters in the MSI, new GRASS packages
(7.8.6) somewhere in between (reintroducing the "untangle grass" issue) and new
GRASS packages in old OSGeo4W with a wrong set of VC libraries (also breaking the
old OSGeo4W LTR builds on release).  On Linux there was an issue with ubuntu
impish having SIP6 only and using a different compression (zstd) in the
packages - one that debian does (not yet?) use - so the build system there had
to be adapted to that.  Some taking several build iterations to unfold.

And there's also a subtle poppler/GDAL issue where some PDFs are not displayed
- which I also tried to figure out.  That's still there - everything will
hopefully solve itself with 3.16.14 (as it should be fine in OSGeo4W already).

So all in all many more unfortunate events than usual.



J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/5e0f505c/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/5e0f505c/attachment.ksh>

From gdt at lexort.com  Tue Nov 16 06:37:00 2021
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 16 Nov 2021 09:37:00 -0500
Subject: [QGIS-Developer] QGIS LTR releases -- is it time to pull the
 plug?
In-Reply-To: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 (Nyall Dawson's message of "Tue, 16 Nov 2021 05:57:09 +1000")
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
Message-ID: <rmifsrwb20j.fsf@s1.lexort.com>


Nyall Dawson <nyall.dawson at gmail.com> writes:

My comments are mostly meta...

> I'd like to start some conversation about the dire condition of the
> QGIS LTR release and what we can do to remedy/avoid this in future.
>
> If you've missed the conversation, our QGIS 3.16 windows releases have
> been completely broken for nearly a month now. 3.16.12 had a critical
> issue which caused lockups in Python code, and now 3.16.13 has
> completely broken projection handling (resulting in loss of CRS,
> hangups when opening projects, etc).

I did miss the conversation about the .13 problems, and I think I'm
subscribed to qgis-developer at .  I admit to not reading a lot of messages
carefully, as I am really here in aid of keeping the qgis packages in
pkgsrc working.

If the conversation was entirely in github issues, I would suggest that
serious things be brought up on the mailinglist, because subscribing to
everything on a repo like qgis seems only feasible for people who have
qgis development as a main focus, and thus github discussions don't
involve the wider community.

I think it is important to keep clear in all communications between "the
release is broken" (which implicates the sources for all platforms), vs
"the official binary packages (flavor X) for platofrm Y is broken".  I
would also want to have "the release" be the sources and have words like
"official binary packages of the release" be used when something that
isn't the source tarball is being talked about.

For example:

  https://blog.qgis.org/2021/11/16/qgis-ltr-3-16-13-reverted-to-3-16-11/

says "QGIS LTR 3.16.13 reverted to 3.16.11" but then in the finer
printer "This is true for Windows only as other OS will keep delivering
the latest 3.16.13.".   So this is really "On windows only,...".

(As an aside I find the download URL
  https://qgis.org/downloads/macos/qgis-macos-ltr.dmg
unclear as I can't tell what release that actually is, without
downloading and unpacking it, or going to the URL up one level and
inferring from dates, which points at .13, which makes sense.)

> - Put out a massive apology (and ask users to step up their funding to
> better maintain QGIS releases in future ;)

My view is that it's reasonable to ask people using Windows in a
non-personal environment to pay a small pseudo-license fee, because
Windows culture goes along with paying for software I don't mean to
depart from Free Software, just sort of a posted moral obligation to pay
something like 5% of what the ESRI licenses would have cost towards
maintenance.  I think the trick is to structure it somehow that it is
like a license/support fee to the above-the-nerds part of companies,
which is easier said than done.

> - Mark 3.16 as an early EOL. (I can't see anyone interested in
> resolving the actual issue, so we've no way forward here in releasing
> a "good" 3.16 release again.)

I updated pkgsrc to 3.16.13 on pkgsrc, and running it on NetBSD 9 it
seems to work just fine.  I even used geoscience plugin to create a
custom transform from a local grid and transformed data back into that.

So I don't see how it's reasonable to withdraw 3.16 from users of POSIXy
operating systems because Windows packaging is troubled.

> - Write the LTR releases off as a failed concept. (i.e. if we don't
> have the resources to maintain them properly, we shouldn't be offering
> them at all and should resort back to the single maintained release at
> any one time situation.)

I agree with previous commenters that this isn't a good approach and
won't repeat the ideas.

It's still not clear to me if there are actual problems in the 3.16.13
source tarball, or if this is about windows packages that have some
other kind of trouble.

In theory I'll create a package for the non-LTR release, but in practice
I haven't gotten to it yet, multiplexing gdal/geos/postgis/proj updates,
and now I'm looking at creating a 3.22 package to make the migration
faster when that is blessed as LTR.

It might be that the amount of structural changes in packaging is small
enough that this is easier than I think it's going to be, but I don't
know that.

> - Lower the supported period of a LTR release to 6 months?

That's very short.   To me, the point of stable releases is so that
users can avoid upgrading for some yearish at least period of time,
where "micro updates" don't count as upgrades.

I don't even see 1 year as a "long term release".  That's a medium term
release.  The "Long Term Stable" label in the GNU/Linux world tends to
apply to distributions that try to go for 5 years, with bug fixes only.

In maintaining pkgsrc, the point releases have been very fast, basically
a few minutes of work, do something else while it builds (thansk to
cache-busting revision headers), and then start it and see if it works
and then commit, maybe 20 minutes of paying attention.  Jumping branches
was a lot more the last time, and it's not the branch jump per se, but
things like new dependencies, requirements for particularly recent
versions of dependencies, and build system changes.

> - Offer "theoretical" LTR releases ONLY as source code, but leave it
> to users to compile themselves and accept responsibility for their own
> packaging of this release.

Or maybe just don't package qgis LTR for Windows.  It's a little hard to
tell, but it seems like all of the issues are about Windows.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/d729f7b8/attachment.sig>

From adenaculture at gmail.com  Tue Nov 16 06:37:14 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 16 Nov 2021 09:37:14 -0500
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <b523fe7c0935d6a9547f6de9c0983840@carto.net>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <b523fe7c0935d6a9547f6de9c0983840@carto.net>
Message-ID: <CABPxTTp4P1gPJKxiHbba9_M-8=icN6SrUOkW8MPuSOUAhfDphg@mail.gmail.com>

Hi Everyone,

For the US Federal government, we normally use the LTR version and IT does
not like us updating more than about twice a year. There are a few of us
such as myself who are testing and trying out the new features so we
install the latest version. For the LTR version we usually install around
3.x.8 and then around the end before the next version bump. It is very
important that the LTR version remains stable because if not it adds fuel
to those who only want a certain vendor as a reason to not use QGIS.
Analysts are also not happy if the software crashes and they lose their
work. We try to keep them happy. When it is getting time to update our
versions of QGIS, I usually wait two or three week after a release before I
recommend the new version. This helps to avoid problems like this. I also
never have 3.x.0 versions for the latest QGIS installed for this same
reason. I want to make sure there is some stability.

We normally only use the stand alone versions of the software - not the
network installer.

Anyway the LTR is important but it should only be updated with bug fixes.
The dependent libraries shouldn't be updated unless there is a bug in the
library. We do not need monthly updates to the software, but others may
want those monthly updates in case they are affected by some bug.

Thank you for all you do for the QGIS community!

Calvin



On Tue, Nov 16, 2021 at 7:10 AM Andreas Neumann <a.neumann at carto.net> wrote:

> Hi all,
>
> Thank you Bo for this extensive summary of reasons why we should keep the
> LTR version.
>
> I can only second that - from the perspective of being employed at a
> public organization myself - and from the perspective of I believe the
> majority of the Swiss QGIS users. The LTR version is certainly a success in
> general and it is what most users want.
>
> Let's rather fix the issues in the LTR release process rather than killing
> it off because we sometimes run into troubles with it.
>
> We should also think about all the good things that the LTR version
> provided to the QGIS users (in general it brought a lot of stability and
> increased reliability). Shit happens sometimes (like now) - and from every
> problem we should take the opportunity to potentially improve our project.
>
> Andreas
>
> On 2021-11-16 12:00, Bo Victor Thomsen wrote:
>
> Hi all -
>
> I have a few comments  regarding the possible removal of the "QGIS LTR
> versions" ( as one of the original proponents for having a LTR version ) :
>
>    - The LTR version is the version that almost *all* QGIS-using
>    *organisations* in Denmark is using. That means 40 - 50 % of all
>    municipalities, regions (counties) and a number of state departments. And a
>    lot of private companies too.  They use it mostly in conjunction with some
>    kind of "Web GIS" and have QGIS for the hard and complex stuff. This market
>    penetration is on par with ESRI and better than MapInfo. As a treasurer of
>    the QGIS Denmark User group I've registered 85 Danish organisational
>    members out of 260 members. And this number is growing. So there is a large
>    and growing number of QGIS users, that prefer the  LTR version (actually
>    the vast majority if you count the individual users in the organisations) .
>    The yearly fee from these organisational members is in large part the
>    reason why QGIS Denmark has a Gold sponsorship of QGIS.
>
>    I don't know about other countries, but I *guess, *that preferences in
>    organisations is roughly the same: They prefer stability and as few errors
>    as possible. And thirdly new glitzy features
>
>    - I we ditch the LTR versions,  I fear that an old nemesis will
>    resurface: That there is not *any *version of QGIS that is really
>    stable:  A small irritating bug in ver. x will be solved in ver. x+1.
>    However ver. x+1 contains another small irritating bug, that will be solved
>    in version x+2 ....
>
>    I know that the development process for QGIS has evolved tremendously
>    the last couple of years. However, I still remember the "bad old days" with
>    "no responsibility" for killing bugs in existing code caused by
>    introduction of new code.
>
>    - In my experience, the 1 - year period for LTR is the shortest period
>    acceptable for organisations. They don't want to repackage QGIS every 6
>    months and certainly not every 4 months. You might even let the period be
>    1.5- 2 years instead of 1 year.
>
>    - The quagmire of ver. 3.16... Isn't it a combination of a relatively
>    old version of QGIS fine tuned to a set of support libraries, where the
>    support libraries gets upgraded "an masse" because OsGeo4W gets upgraded
>    from v1 to v2.; SIP gets upgraded from v4 to v6. And the proj library goes
>    through several upgrades from v4 to v8 ? I my perspective that's a receipt
>    for "The perfect storm". If it can't be fixed, then freeze it at 3.16.11
>    and fast-promote ver. 3.22 as LTR, perhaps with a big warning sign on it.
>    This it not a critique of the upgrade process. Every piece of
>    software, including supporting libraries has to be upgraded from time to
>    time. However I count 3 major upgrades of libraries on the same time
>    NB! Just read J?rgen's posting on ver. 3.16.14 being released on
>    friday. If it works, then that's solves the ver. 3.16 issues for me.
>
>    - I know, bug squashing is nobody's favourite programming discipline.
>    Especially if you not are paid for doing it. Hence the need for bug
>    squashin by payment. So what about trying to reach out to the large (or
>    small) sponsors and ask them if they could put some extra coins in the pot
>    earmarked for LTR ? I can't solely speak for QGIS Denmark User group, but I
>    would certainly discuss this problem with other members of the board and
>    eventually the general assembly. And we have some contacts with the other
>    QGIS usergroups i Scandinavia. The Swiss usergroup could for example talk
>    with the german usergroup (I know the problem is not based on language, but
>    sometimes it's easier to promote an idea with people talking roughly the
>    same language)
>
>    So how much money are we talking about ?
>
>
> Whatever that's decided regarding the LTR, I personally still will be a
> staunch supporter of QGIS. But please don't throw the baby out with the
> bathwater without due consideration and without trying alternative
> solutions.
>
> Med venlig hilsen / Kind regards
>
> Bo Victor Thomsen
>
> Den 16-11-2021 kl. 09:22 skrev Alessandro Pasotti:
>
>
> On Tue, Nov 16, 2021 at 8:50 AM Marco Bernasocchi <marco at qgis.org> wrote:
>
> Hi Anita, Hi Nyall, Hi All
> I think that it is a good idea to allocate the first half hour (and more
> if needed) in tonight's budget meeting to this very pressing subject.
> Nyall, thanks a lot for your analysis, we'll use it as discussion base.
>
> I extended the meeting invitation from 18:00 to 19:30.
>
> See you later
> Marco
>
>
> Hi,
>
> thinking about how to possibly prevent this to happen again I think that
> the manual testing cycles as proposed with
> https://lists.osgeo.org/pipermail/qgis-psc/2020-December/009186.html
> could help in identifying biggest issues before a release.
>
> I think we should consider the possibility of investing in that direction.
>
> Kind regards.
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/3777cf01/attachment-0001.html>

From a.neumann at carto.net  Tue Nov 16 06:48:34 2021
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 16 Nov 2021 15:48:34 +0100
Subject: [QGIS-Developer] array inconsistencies between QGIS and PostgreSQL
Message-ID: <0819e94edde1dffa8ecff861ee7d8677@carto.net>

Hi,

I have a PostgreSQL table with columns of type array (like int4[4] or 
text[]).

Now I have issues in QGIS when trying to save a QGIS array to this 
PostgreSQL array.

Arrays in QGIS use a square bracket notation, array in PostgreSQL use a 
curly braces notation.

Now if I try to save a QGIS array (result of an expression) to this 
PostgreSQL array column, it fails.

If I formulate the expression such, that the array starts/ends with 
curly braces, I can save the array in PostgreSQL, but it wouldn't load 
in the "list" widget, which is supposed to work with an array. The 
documentation claims "List: Displays a single column table to add 
different values within a single field. This is currently supported by 
the PostgreSQL provider, for fields of array type." (from 
https://docs.qgis.org/testing/en/docs/user_manual/working_with_vector/vector_properties.html#edit-widgets 
).

Does someone know how I can properly populate a "list widget" with an 
array, or at least make the array work properly with at "Text" widget? 
The latter would also be acceptable, but the list widget would be nicer.

Here is what I tried:

overlay_intersects(layer:='AV Gemeindegrenze', expression:=bfs_nr)
  --> returns, f.e. [2555,2554] as a QGIS array

and

'{' || array_to_string(overlay_intersects(layer:='AV Gemeindegrenze', 
expression:=bfs_nr)) || '}'
--> returns, f.e. {2555,2554} as a string

Neither way works properly. The latter way let's me at least save the 
data in PostgreSQL, but it wouldn't display correctly in QGIS (tried 
LIST and Text widget).

Thank you for your help!

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/afb00d33/attachment.html>

From jef at norbit.de  Tue Nov 16 08:50:50 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 16 Nov 2021 17:50:50 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
Message-ID: <20211116165050.e3ru7l3czdmkcjdd@norbit.de>

Hi Bo,

On Tue, 16. Nov 2021 at 12:00:07 +0100, Bo Victor Thomsen wrote:
> * In my experience, the 1 - year period for LTR is the shortest period
>   acceptable for organisations. They don't want to repackage QGIS every 6
>   months and certainly not every 4 months. You might even let the period be
>   1.5- 2 years instead of 1 year.

Hm, but that contradicts the point of the LTR, doesn't it?

The LTR is about maintaining a branch for a year - and issuing a point release
every month with fixes - and not about getting the first release of the LTR
right (or the first after four month of the new LTR also beeing the current
release) and then sticking with that for a year.

If the point releases are not used anyway, there isn't any issue now.
Otherwise there should be repacking each month.

One point of the OSGeo4W update was also updating all dependencies - because
the previous one had some vulnerabilities - which also worries some
organizations - even if probably most - if not all - of them don't do any harm
if used from within QGIS.

Keeping the old versions, but still backporting fixes to everything those would
be another extra level of work.

Did we have any issues that were introduced by the actual new versions
themselves?  I guess most were "just" packaging issues.

BTW we're not relying on fixed version (number)s on other platforms than
Windows either.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/33da69d2/attachment.sig>

From bo.victor.thomsen at gmail.com  Tue Nov 16 09:41:31 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Tue, 16 Nov 2021 18:41:31 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
Message-ID: <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>

Hi J?rgen -

Let me clarify (and make some pretty hefty generalisations, so apologies 
beforehand to any IT admin on the list)? -

  * IT admins don't like to make "new" versions 3.16, 3.18 and
    especially not every 4 months. It's a bother to make a new package
    from scratch; to register it in whatever installation/upgrade system
    they have and start some automatic or manual roll-out.

  * But most IT admins can make a "point" upgrade like 3.16.11 ->
    3.16.12, because they don't need to do anything than "refreshing" an
    already existing package and push the button for an automatic
    roll-out. No extra administration.

  * They probably won't make an upgrade and roll-out for each and every
    minor point release, i.e. from 3.16.11 -> 3.16.12 but will wait for
    the GIS admin to come and ask for it.

  * Most will wait for a specific QGIS release to get the LTR
    designation and probably a point release or two after that and then
    make a new QGIS roll-out for the organisation at that point.
    Superstition maybe ?

  * And some don't give a flying fig and just package the first LTR
    version and never bother to upgrade this.

So yes, the LTR point releases are used. Not all point releases will be 
installed every time, but some will.

Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 16-11-2021 kl. 17:50 skrev J?rgen E. Fischer:
> Hi Bo,
>
> On Tue, 16. Nov 2021 at 12:00:07 +0100, Bo Victor Thomsen wrote:
>> * In my experience, the 1 - year period for LTR is the shortest period
>>    acceptable for organisations. They don't want to repackage QGIS every 6
>>    months and certainly not every 4 months. You might even let the period be
>>    1.5- 2 years instead of 1 year.
> Hm, but that contradicts the point of the LTR, doesn't it?
>
> The LTR is about maintaining a branch for a year - and issuing a point release
> every month with fixes - and not about getting the first release of the LTR
> right (or the first after four month of the new LTR also beeing the current
> release) and then sticking with that for a year.
>
> If the point releases are not used anyway, there isn't any issue now.
> Otherwise there should be repacking each month.
>
> One point of the OSGeo4W update was also updating all dependencies - because
> the previous one had some vulnerabilities - which also worries some
> organizations - even if probably most - if not all - of them don't do any harm
> if used from within QGIS.
>
> Keeping the old versions, but still backporting fixes to everything those would
> be another extra level of work.
>
> Did we have any issues that were introduced by the actual new versions
> themselves?  I guess most were "just" packaging issues.
>
> BTW we're not relying on fixed version (number)s on other platforms than
> Windows either.
>
>
> J?rgen
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/2cc5c1dd/attachment.html>

From jef at norbit.de  Tue Nov 16 12:16:16 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 16 Nov 2021 21:16:16 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
Message-ID: <20211116201616.vfi3u43yomflwrrq@norbit.de>

Hi Bo,

On Tue, 16. Nov 2021 at 18:41:31 +0100, Bo Victor Thomsen wrote:
> So yes, the LTR point releases are used. Not all point releases will be
> installed every time, but some will.

So you could agree that a monthly frequency it to high and a point release
every two or three month could suffice?


J?rgen


-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/e00d563a/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/e00d563a/attachment.ksh>

From adenaculture at gmail.com  Tue Nov 16 12:27:06 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 16 Nov 2021 15:27:06 -0500
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <20211116201616.vfi3u43yomflwrrq@norbit.de>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de>
Message-ID: <CABPxTTqSmH0oGHmd=3mq3gA_yExQQLVUw9ZaLsbNocRDUx-+HA@mail.gmail.com>

J?rgen,

I know this is a question for Bo, but thought I would respond as well.
Since we only update QGIS LTR perhaps 1 to 3 times during the lifetime of a
LTR, we do not need monthly LTR releases. The only reason we might update
sooner is if there is a bug found that impacts our users. The latest
release probably needs to be updated monthly.

On Tue, Nov 16, 2021 at 3:16 PM J?rgen E. Fischer <jef at norbit.de> wrote:

> Hi Bo,
>
> On Tue, 16. Nov 2021 at 18:41:31 +0100, Bo Victor Thomsen wrote:
> > So yes, the LTR point releases are used. Not all point releases will be
> > installed every time, but some will.
>
> So you could agree that a monthly frequency it to high and a point release
> every two or three month could suffice?
>
>
> J?rgen
>
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/981ea8f8/attachment.html>

From jef at norbit.de  Tue Nov 16 13:08:36 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 16 Nov 2021 22:08:36 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CABPxTTqSmH0oGHmd=3mq3gA_yExQQLVUw9ZaLsbNocRDUx-+HA@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de>
 <CABPxTTqSmH0oGHmd=3mq3gA_yExQQLVUw9ZaLsbNocRDUx-+HA@mail.gmail.com>
Message-ID: <20211116210836.4ukddfmrhatl2phi@norbit.de>

Hi Calvin,

On Tue, 16. Nov 2021 at 15:27:06 -0500, C Hamilton wrote:
> I know this is a question for Bo, but thought I would respond as well.

Sure.  The more responses the better.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/c7bd3674/attachment.sig>

From bo.victor.thomsen at gmail.com  Tue Nov 16 13:28:57 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Tue, 16 Nov 2021 22:28:57 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <20211116201616.vfi3u43yomflwrrq@norbit.de>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de>
Message-ID: <8c08c4ec-594a-63f2-543e-4567f3f452e0@gmail.com>

Hi J?rgen -

So reduce the total number of point releases in the lifetime of a LTR? 
from ca. 16 to somewhere between 6 or 8 point releases ?

That would be fine for me at least.

I don't think it would disrupt that many update schedules. I never 
experienced a single department that implemented every point release 
(including my own, when I was a GIS admin)

Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 16-11-2021 kl. 21:16 skrev J?rgen E. Fischer:
> Hi Bo,
>
> On Tue, 16. Nov 2021 at 18:41:31 +0100, Bo Victor Thomsen wrote:
>> So yes, the LTR point releases are used. Not all point releases will be
>> installed every time, but some will.
> So you could agree that a monthly frequency it to high and a point release
> every two or three month could suffice?
>
>
> J?rgen
>
>

From strk at kbt.io  Tue Nov 16 16:17:34 2021
From: strk at kbt.io (Sandro Santilli)
Date: Wed, 17 Nov 2021 01:17:34 +0100
Subject: [QGIS-Developer] QGIS LTR releases -- is it time to pull the
 plug?
In-Reply-To: <rmifsrwb20j.fsf@s1.lexort.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <rmifsrwb20j.fsf@s1.lexort.com>
Message-ID: <20211117001734.GA64665@c19>

On Tue, Nov 16, 2021 at 09:37:00AM -0500, Greg Troxel wrote:
> Nyall Dawson <nyall.dawson at gmail.com> writes:
> 
> > - Lower the supported period of a LTR release to 6 months?
> 
> I don't even see 1 year as a "long term release".  That's a medium term
> release.  The "Long Term Stable" label in the GNU/Linux world tends to
> apply to distributions that try to go for 5 years, with bug fixes only.

I agree 1 year is too short. I'd aim at 2 years for QGIS.

For comparison: we're still pushing commits to the 3.5 branch
of GEOS, which had .0 release published in 2015.

For PostGIS, we officially EOL'ed 2.4 but 2.5 is still getting
commits, and was initially published in 2018.

--strk;



From nyall.dawson at gmail.com  Tue Nov 16 16:59:51 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 17 Nov 2021 10:59:51 +1000
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
Message-ID: <CAB28Asi7==oRBVjRMFk2Vux07geNX+PT+Gk126iZXqdBQwknFg@mail.gmail.com>

On Tue, 16 Nov 2021 at 21:00, Bo Victor Thomsen
<bo.victor.thomsen at gmail.com> wrote:
>

> Whatever that's decided regarding the LTR, I personally still will be a staunch supporter of QGIS. But please don't throw the baby out with the bathwater without due consideration and without trying alternative solutions.

Just to clarify: my personal view is also that the LTR is extremely
important for QGIS, especially for enterprise deployments of QGIS. I'd
hate to see it go! I also realise that providing the LTR comes with an
implicit promise of stability... every regression in the LTR hurts our
users, and a release-breaking bug this late in the LTR cycle is a
clear indication that something is wrong and we need to fix our
processes.

In short, I'm personally hoping that the conversation stays
constructive and that the outcome is a better-supported, more
trustworthy LTR release. (Again, my personal view is that we won't be
able to achieve this without a funding drive to start paying the
packagers/maintainers/QA teams to ensure that LTR releases aren't just
a "side thing" for them, but something which is always prioritised and
financially justified!)

Nyall

>
> Med venlig hilsen / Kind regards
>
> Bo Victor Thomsen
>
> Den 16-11-2021 kl. 09:22 skrev Alessandro Pasotti:
>
>
> On Tue, Nov 16, 2021 at 8:50 AM Marco Bernasocchi <marco at qgis.org> wrote:
>>
>> Hi Anita, Hi Nyall, Hi All
>> I think that it is a good idea to allocate the first half hour (and more if needed) in tonight's budget meeting to this very pressing subject.
>> Nyall, thanks a lot for your analysis, we'll use it as discussion base.
>>
>> I extended the meeting invitation from 18:00 to 19:30.
>>
>> See you later
>> Marco
>>
>>
>
> Hi,
>
> thinking about how to possibly prevent this to happen again I think that the manual testing cycles as proposed with https://lists.osgeo.org/pipermail/qgis-psc/2020-December/009186.html could help in identifying biggest issues before a release.
>
> I think we should consider the possibility of investing in that direction.
>
> Kind regards.
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From gdt at lexort.com  Tue Nov 16 17:32:36 2021
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 16 Nov 2021 20:32:36 -0500
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <20211116201616.vfi3u43yomflwrrq@norbit.de> (=?utf-8?Q?=22J?=
 =?utf-8?Q?=C3=BCrgen?=
 E. Fischer"'s message of "Tue, 16 Nov 2021 21:16:16 +0100")
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de>
Message-ID: <rmizgq38t3f.fsf@s1.lexort.com>


J?rgen E. Fischer <jef at norbit.de> writes:

> Hi Bo,
>
> On Tue, 16. Nov 2021 at 18:41:31 +0100, Bo Victor Thomsen wrote:
>> So yes, the LTR point releases are used. Not all point releases will be
>> installed every time, but some will.
>
> So you could agree that a monthly frequency it to high and a point release
> every two or three month could suffice?

From my view as a user and packaging in pkgsrc, every 2 or 3 months is
fine, especially if there haven't been any serious bugs.

My experience has been that the LTR point releases have all been totally
boring from a packaging/install point of view, which is good.  But I'm
just using the source tarballs, and my doing an update of qgis to a new
point LTR does not cause changes in dependencies.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211116/3b55d1d6/attachment.sig>

From luca.manganelli at comune.trento.it  Tue Nov 16 23:27:44 2021
From: luca.manganelli at comune.trento.it (Luca Manganelli)
Date: Wed, 17 Nov 2021 08:27:44 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <rmizgq38t3f.fsf@s1.lexort.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de>
 <rmizgq38t3f.fsf@s1.lexort.com>
Message-ID: <CAGKduJ0WgcawcW6tOfPF_G18-=y=ASXSAhUCDCUftB4a2UjX=A@mail.gmail.com>

> [... ]

As an IT administrator in our public organization, I confess that I have
packaged and distributed to all PCs the (old) 3.16.4 version. Why? Because
with this version there are 0 problems among users and with our customized
plugins.

Before the 3.16 release, the other 3.x versions were a disaster, many
things didn't work, so before this 3.16, I had distributed 2.x to many
users and 3.12 to only few PCs.

In a big organization the most important thing is not, "strangely", the
more features a piece of a software has, but the ... stability. Remember
that every worker wants a product that... works.

And, the upgrade. The QGIS package is big (the archive is over 320MB) and
we have many offices in sloooow networks (2M ADSL... don't laugh, this is
the situ

-- 





Comune di Trento?

via Belenzani, 19 - 38122 Trento | C.F e P. IVA: 
00355870221

tel. +39 0461.884111 | www.comune.trento.it 
<http://www.comune.trento.it>?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211117/6140c415/attachment.html>

From bo.victor.thomsen at gmail.com  Wed Nov 17 10:45:49 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Wed, 17 Nov 2021 19:45:49 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <CAGKduJ0WgcawcW6tOfPF_G18-=y=ASXSAhUCDCUftB4a2UjX=A@mail.gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de> <rmizgq38t3f.fsf@s1.lexort.com>
 <CAGKduJ0WgcawcW6tOfPF_G18-=y=ASXSAhUCDCUftB4a2UjX=A@mail.gmail.com>
Message-ID: <5f3e2aa9-e8f9-d17d-65dd-cc4fb7df5156@gmail.com>

Hi list -

I've summed up some ideas about have to handle the LTR situation.? The 
policies is not carved in stone or complete but suggestions for a more 
stable regime regarding LTR? (and they have probably already been 
mentioned sometimes by someones before)

However - Policy for LTR releases:

  * At most one LTR release for every year.

  * Point releases for LTR every 2 or 3 months.

  * Point releases for LTR contains only security or bug patches. Never
    introduce new functionality or change in the user interface (
    Translation files might be exempted from this rule)

  * The supporting libraries ( qt, proj, gdal, ogr etc. ) is covered by
    the same rules. Only security or bug patches, never introduce newer
    major versions.

  * Major changes in supporting libraries for non-LTR releases is
    restricted to the release just after a LTR. Thus there will be 3 or
    more non-LTR releases to stabilize QGIS before next LTR.


The general idea is that the QGIS release following a LTR is a "Big 
Bang" release: Everything goes.

The following non-LTR releases can introduce new functionality but no 
changes in the supporting libraries (This rule could maybe be bend a 
little) . But when you come around to the LTR release you deep-freeze 
any changes except security- and bug correcting patches


Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 17-11-2021 kl. 08:27 skrev Luca Manganelli:
> > [... ]
>
> As an IT administrator in our public organization, I confess that I 
> have packaged and distributed to all PCs the (old) 3.16.4 version. 
> Why? Because with this version there are 0 problems among users and 
> with our customized plugins.
>
> Before the 3.16 release, the other 3.x versions were a disaster, many 
> things didn't work, so before this 3.16, I had distributed 2.x to many 
> users and 3.12 to only few PCs.
>
> In a big organization the most important thing is not, "strangely", 
> the more features a piece of a software has, but the ... stability. 
> Remember that every worker wants a product that... works.
>
> And, the upgrade. The QGIS package is big (the archive is over 320MB) 
> and we have many offices in sloooow networks (2M ADSL... don't laugh, 
> this is the situ
>
>
>
>
>
>
>
>
>
> ------------------------------------------------------------------------
>
> 	
>
> Comune di Trento
>
> via Belenzani, 19 - 38122 Trento | C.F e P. IVA: 00355870221
>
> tel. +39 0461.884111 | www.comune.trento.it <http://www.comune.trento.it>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211117/da444f4a/attachment.html>

From adenaculture at gmail.com  Wed Nov 17 10:53:44 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 17 Nov 2021 13:53:44 -0500
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <5f3e2aa9-e8f9-d17d-65dd-cc4fb7df5156@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de>
 <rmizgq38t3f.fsf@s1.lexort.com>
 <CAGKduJ0WgcawcW6tOfPF_G18-=y=ASXSAhUCDCUftB4a2UjX=A@mail.gmail.com>
 <5f3e2aa9-e8f9-d17d-65dd-cc4fb7df5156@gmail.com>
Message-ID: <CABPxTTo2Qy3oJHRuGKzmx6x-fUAuJ5CCODe+HfWXBwpTx2DKsA@mail.gmail.com>

+1 you concisely expressed my thoughts about this.

Calvin

On Wed, Nov 17, 2021 at 1:45 PM Bo Victor Thomsen <
bo.victor.thomsen at gmail.com> wrote:

> Hi list -
>
> I've summed up some ideas about have to handle the LTR situation.  The
> policies is not carved in stone or complete but suggestions for a more
> stable regime regarding LTR  (and they have probably already been mentioned
> sometimes by someones before)
>
> However - Policy for LTR releases:
>
>    - At most one LTR release for every year.
>
>    - Point releases for LTR every 2 or 3 months.
>
>    - Point releases for LTR contains only security or bug patches. Never
>    introduce new functionality or change in the user interface ( Translation
>    files might be exempted from this rule)
>
>    - The supporting libraries ( qt, proj, gdal, ogr etc. ) is covered by
>    the same rules. Only security or bug patches, never introduce newer major
>    versions.
>
>    - Major changes in supporting libraries for non-LTR releases is
>    restricted to the release just after a LTR. Thus there will be 3 or more
>    non-LTR releases to stabilize QGIS before next LTR.
>
>
> The general idea is that the QGIS release following a LTR is a "Big Bang"
> release: Everything goes.
>
> The following non-LTR releases can introduce new functionality but no
> changes in the supporting libraries (This rule could maybe be bend a
> little) . But when you come around to the LTR release you deep-freeze any
> changes except security- and bug correcting patches
>
>
> Med venlig hilsen / Kind regards
>
> Bo Victor Thomsen
>
> Den 17-11-2021 kl. 08:27 skrev Luca Manganelli:
>
> > [... ]
>
> As an IT administrator in our public organization, I confess that I have
> packaged and distributed to all PCs the (old) 3.16.4 version. Why? Because
> with this version there are 0 problems among users and with our customized
> plugins.
>
> Before the 3.16 release, the other 3.x versions were a disaster, many
> things didn't work, so before this 3.16, I had distributed 2.x to many
> users and 3.12 to only few PCs.
>
> In a big organization the most important thing is not, "strangely", the
> more features a piece of a software has, but the ... stability. Remember
> that every worker wants a product that... works.
>
> And, the upgrade. The QGIS package is big (the archive is over 320MB) and
> we have many offices in sloooow networks (2M ADSL... don't laugh, this is
> the situ
>
>
>
>
>
>
>
>
>
> ------------------------------
>
> Comune di Trento
>
> via Belenzani, 19 - 38122 Trento | C.F e P. IVA: 00355870221
>
> tel. +39 0461.884111 | www.comune.trento.it
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211117/ddd3072e/attachment-0001.html>

From sebastic at xs4all.nl  Wed Nov 17 10:54:39 2021
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 17 Nov 2021 19:54:39 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <5f3e2aa9-e8f9-d17d-65dd-cc4fb7df5156@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de> <rmizgq38t3f.fsf@s1.lexort.com>
 <CAGKduJ0WgcawcW6tOfPF_G18-=y=ASXSAhUCDCUftB4a2UjX=A@mail.gmail.com>
 <5f3e2aa9-e8f9-d17d-65dd-cc4fb7df5156@gmail.com>
Message-ID: <9115516b-39c9-29b9-ca78-92e1b6577ecc@xs4all.nl>

On 11/17/21 19:45, Bo Victor Thomsen wrote:
>  ?* The supporting libraries ( qt, proj, gdal, ogr etc. ) is covered by
>  ?? the same rules. Only security or bug patches, never introduce newer
>  ?? major versions.

You don't control the dependencies outside OSGeo4W, so this is not going 
to fly.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From bo.victor.thomsen at gmail.com  Wed Nov 17 11:06:42 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Wed, 17 Nov 2021 20:06:42 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <9115516b-39c9-29b9-ca78-92e1b6577ecc@xs4all.nl>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de> <rmizgq38t3f.fsf@s1.lexort.com>
 <CAGKduJ0WgcawcW6tOfPF_G18-=y=ASXSAhUCDCUftB4a2UjX=A@mail.gmail.com>
 <5f3e2aa9-e8f9-d17d-65dd-cc4fb7df5156@gmail.com>
 <9115516b-39c9-29b9-ca78-92e1b6577ecc@xs4all.nl>
Message-ID: <aef64925-da38-0693-233d-882f69c4b93a@gmail.com>

However, you can control the versions of the supporting libraries /in/ 
OSGeo4W ?

It's mostly the Windows versions of QGIS we have problems with. And all 
the QGIS Windows versions is build using OSGeo4W ??

The policies is suggestions. For example: Change only QT from 5.x to 
5.x+1 just /after/ a LTR release, not just /before/. That would give us 
a year to fix the possibly bad consequences of the version change

Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 17-11-2021 kl. 19:54 skrev Sebastiaan Couwenberg:
> On 11/17/21 19:45, Bo Victor Thomsen wrote:
>> ??* The supporting libraries ( qt, proj, gdal, ogr etc. ) is covered by
>> ??? the same rules. Only security or bug patches, never introduce newer
>> ??? major versions.
>
> You don't control the dependencies outside OSGeo4W, so this is not 
> going to fly.
>
> Kind Regards,
>
> Bas
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211117/865dd839/attachment.html>

From nyall.dawson at gmail.com  Wed Nov 17 22:20:46 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 18 Nov 2021 16:20:46 +1000
Subject: [QGIS-Developer] [Qgis-psc] QGIS LTR releases -- is it time to
 pull the plug?
In-Reply-To: <5f3e2aa9-e8f9-d17d-65dd-cc4fb7df5156@gmail.com>
References: <CAB28Asi=WwFK_Pp25yegG75U5Pe-b+m3277VbOOU2AL0fsAXkA@mail.gmail.com>
 <4ed8f323-8c51-4eab-a401-5ca8656393bf@gmx.at>
 <CAB2ZMRCH6h2e2GkasF7dRjTq7QqPcoMj9t1GbscK2W9PjWkzNw@mail.gmail.com>
 <CAL5Q670FX1ZqThpaJF2XZ-jN+AtCoGxqH9emoL1+9S8J-Cgr8Q@mail.gmail.com>
 <3ceadebb-5c99-16e3-1692-02c8a6ee8132@gmail.com>
 <20211116165050.e3ru7l3czdmkcjdd@norbit.de>
 <dce53b4c-eaa3-7e23-42c0-33f8dea1f7b7@gmail.com>
 <20211116201616.vfi3u43yomflwrrq@norbit.de>
 <rmizgq38t3f.fsf@s1.lexort.com>
 <CAGKduJ0WgcawcW6tOfPF_G18-=y=ASXSAhUCDCUftB4a2UjX=A@mail.gmail.com>
 <5f3e2aa9-e8f9-d17d-65dd-cc4fb7df5156@gmail.com>
Message-ID: <CAB28AsgDDSbRfFyjvuRNWLako4VoZj-JKUipMy=zmGWJpWBiZg@mail.gmail.com>

On Thu, 18 Nov 2021 at 04:46, Bo Victor Thomsen
<bo.victor.thomsen at gmail.com> wrote:
>
> Hi list -
>
> I've summed up some ideas about have to handle the LTR situation.  The policies is not carved in stone or complete but suggestions for a more stable regime regarding LTR  (and they have probably already been mentioned sometimes by someones before)
>
> However - Policy for LTR releases:
>
> At most one LTR release for every year.
>
> Point releases for LTR every 2 or 3 months.

I'm fine with these

> Point releases for LTR contains only security or bug patches. Never introduce new functionality or change in the user interface ( Translation files might be exempted from this rule)

That's already the rule which is in place. We also have an additional
rules that any non-crash fix, non-data corruption fixes have to go in
a delayed queue were they can only be included in the LTR after
they've been in a stable release for at least a month. (I.e. a fix
would have to be included in 3.22.1 so it gets once month of testing
before it's permitted into the 3.16.15 LTR patch release).

> The supporting libraries ( qt, proj, gdal, ogr etc. ) is covered by the same rules. Only security or bug patches, never introduce newer major versions.
> Major changes in supporting libraries for non-LTR releases is restricted to the release just after a LTR. Thus there will be 3 or more non-LTR releases to stabilize QGIS before next LTR.

This is not so straightforward, for a couple of reasons:

1. QGIS is heavily tied to the underlying libraries, and often bugs
exposed in QGIS need fixes in GDAL/PROJ or GEOS. It would be
unfortunate if an LTR never gets a crash or data corruption fix
because that fix resides in a lower-level library. Similarly there's
situations where I think it IS important that a non-bug-fix library
update gets pushed to a stable release. For example, updates to the
PROJ projection libraries aren't backported to older PROJ releases. A
local agency may release a new local transformation or CRS and mandate
its use in a geographic area... and without a PROJ library update all
LTR users won't see the CRS updates until the next LTR major release.

2. It's not true that older libraries are inherently more stable than
newer library releases. Take the Qt library for example -- sticking
with an older Qt release just means that you're running an older,
unsupported library. There's no bug fixes or maintenance at all for
the older releases, and the ONLY way to get bugfixes from Qt is to
update to the latest major release. (Basically we're trading one set
of older bugs for the risk of a different set of newer bugs! :P )

3. Sometimes library updates are just necessary to keep things running
without breakage. (Eg. when an older library stops working because
some certificate has expired or upstream URL has changed... we've seen
in the past a situation where python package installation was broken
for a time because we were using an older unmaintained Python library
version, and the only solution was to update the python library to fix
the broken package downloads)

So I'm personally -1 to this particular idea.

Nyall


>
>
> The general idea is that the QGIS release following a LTR is a "Big Bang" release: Everything goes.
>
> The following non-LTR releases can introduce new functionality but no changes in the supporting libraries (This rule could maybe be bend a little) . But when you come around to the LTR release you deep-freeze any changes except security- and bug correcting patches
>
>
> Med venlig hilsen / Kind regards
>
> Bo Victor Thomsen
>
> Den 17-11-2021 kl. 08:27 skrev Luca Manganelli:
>
> > [... ]
>
> As an IT administrator in our public organization, I confess that I have packaged and distributed to all PCs the (old) 3.16.4 version. Why? Because with this version there are 0 problems among users and with our customized plugins.
>
> Before the 3.16 release, the other 3.x versions were a disaster, many things didn't work, so before this 3.16, I had distributed 2.x to many users and 3.12 to only few PCs.
>
> In a big organization the most important thing is not, "strangely", the more features a piece of a software has, but the ... stability. Remember that every worker wants a product that... works.
>
> And, the upgrade. The QGIS package is big (the archive is over 320MB) and we have many offices in sloooow networks (2M ADSL... don't laugh, this is the situ
>
>
>
>
>
>
>
>
>
> ________________________________
>
> Comune di Trento
>
> via Belenzani, 19 - 38122 Trento | C.F e P. IVA: 00355870221
>
> tel. +39 0461.884111 | www.comune.trento.it
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From apasotti at gmail.com  Fri Nov 19 08:12:11 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 19 Nov 2021 17:12:11 +0100
Subject: [QGIS-Developer] Cleaning up the QGIS Developers/QGIS Community
 groups
In-Reply-To: <CAB28AsitY_DWgUsciYc_qrh09Y7rE1DNe_s=ad_LDNyCGWBFmw@mail.gmail.com>
References: <CAB28AshAxu2CZCe7wZGrKPzA+3kBatCMObXEqMZQpjFpz4dnbg@mail.gmail.com>
 <CAL5Q6724tV9xaZ6O2sAH1u1NKQ9Lm9HZOswjUU-qhmJ-Yf-zrA@mail.gmail.com>
 <CAB28AsitY_DWgUsciYc_qrh09Y7rE1DNe_s=ad_LDNyCGWBFmw@mail.gmail.com>
Message-ID: <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>

On Mon, Oct 18, 2021 at 9:49 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Mon, 18 Oct 2021 at 17:46, Alessandro Pasotti <apasotti at gmail.com>
> wrote:
> >
> > Hi Nyall,
> >
> > To summarize:
> >
> > 1. QGIS core contributor status is for life
> > 2. github core committer rights will be revoked after 24 months of
> inactivity
> > 3. github core committer rights will be given back if the contributor
> restarts to contribute
>
>

Hi Nyall,

Just to let you know that your proposal has been approved.


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211119/708f60f6/attachment.html>

From marco at qgis.org  Fri Nov 19 16:22:55 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Sat, 20 Nov 2021 01:22:55 +0100
Subject: [QGIS-Developer] [Qgis-psc] Cleaning up the QGIS
 Developers/QGIS Community groups
In-Reply-To: <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>
References: <CAB28AshAxu2CZCe7wZGrKPzA+3kBatCMObXEqMZQpjFpz4dnbg@mail.gmail.com>
 <CAL5Q6724tV9xaZ6O2sAH1u1NKQ9Lm9HZOswjUU-qhmJ-Yf-zrA@mail.gmail.com>
 <CAB28AsitY_DWgUsciYc_qrh09Y7rE1DNe_s=ad_LDNyCGWBFmw@mail.gmail.com>
 <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>
Message-ID: <CAB2ZMRD+PKzPC+Kp7BimEL47aFGZofyrYvkzDN3jyMy7Bf2y3g@mail.gmail.com>

Thanks a lot Nyall,
I'll add this point to the document I'm preparing regarding all the roles
in the community.

Cheers
Marco

On Fri, 19 Nov 2021 at 17:12, Alessandro Pasotti <apasotti at gmail.com> wrote:

> On Mon, Oct 18, 2021 at 9:49 AM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
>
>> On Mon, 18 Oct 2021 at 17:46, Alessandro Pasotti <apasotti at gmail.com>
>> wrote:
>> >
>> > Hi Nyall,
>> >
>> > To summarize:
>> >
>> > 1. QGIS core contributor status is for life
>> > 2. github core committer rights will be revoked after 24 months of
>> inactivity
>> > 3. github core committer rights will be given back if the contributor
>> restarts to contribute
>>
>>
>
> Hi Nyall,
>
> Just to let you know that your proposal has been approved.
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>


-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211120/686dde53/attachment.html>

From marco at qgis.org  Fri Nov 19 23:00:00 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Sat, 20 Nov 2021 08:00:00 +0100
Subject: [QGIS-Developer] LTR Support Improvements for 2022
Message-ID: <CAB2ZMRDN=DkvROQwGTXxOptaCjm8p+3Lr+wv83eMjcvgHDQJvg@mail.gmail.com>

Dear community,

since their introduction, QGIS LTR versions have gained wide-spread
popularity [0]. LTR point releases have always followed the regular monthly
release cycle [1] creating a constant flow of point releases that likely
exceeds the update frequency that LTR users desire and actually roll-out.

To further improve our LTR offering and ensure the reliability of our
installers, we propose to introduce pre-release LTR package tests. These
semi-automated and manual tests will be performed during a two-week period
between packaging and announcement of new packages.

The 2022 budget proposal will account for the additional costs of
pre-release LTR package tests. To stay within a reasonable budget and allow
for an appropriate number of tests, we propose to reduce the LTR point
release frequency to quarterly (four times a year) and initially limit
testing to the platform with our largest user base (Windows).

If accepted, the new quarterly schedule would start as soon as the whole
testing infrastructure is ready. This would probably be introduced stepwise
during the 3.22 lifecycle and become definitive in the 3.28 cycle.

Together with this proposal, to quantify the userbases by operating system,
and be able to make data driven decisions in the future, the QGIS network
user agent now includes a generic string mentioning the user?s operating
system. You can read more about the change here [2].

We are looking forward to hearing what you think about these news plans and
your ideas how they may be improved.

On behalf of the PSC,
Have a great weekend

Marco

[0] https://blog.qgis.org/2020/04/02/ltr-usage-survey/
[1]
https://qgis.org/en/site/getinvolved/development/roadmap.html#release-schedule
[2] https://github.com/qgis/QGIS/pull/46090

-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211120/3444598d/attachment.html>

From nyall.dawson at gmail.com  Sat Nov 20 14:34:44 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sun, 21 Nov 2021 08:34:44 +1000
Subject: [QGIS-Developer] Cleaning up the QGIS Developers/QGIS Community
 groups
In-Reply-To: <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>
References: <CAB28AshAxu2CZCe7wZGrKPzA+3kBatCMObXEqMZQpjFpz4dnbg@mail.gmail.com>
 <CAL5Q6724tV9xaZ6O2sAH1u1NKQ9Lm9HZOswjUU-qhmJ-Yf-zrA@mail.gmail.com>
 <CAB28AsitY_DWgUsciYc_qrh09Y7rE1DNe_s=ad_LDNyCGWBFmw@mail.gmail.com>
 <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>
Message-ID: <CAB28Asi1cAzSectdhPPuxPoTboH-efJ4sQFtNgiDTH_bDzigQA@mail.gmail.com>

On Sat, 20 Nov 2021 at 02:12, Alessandro Pasotti <apasotti at gmail.com> wrote:
>
> On Mon, Oct 18, 2021 at 9:49 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Mon, 18 Oct 2021 at 17:46, Alessandro Pasotti <apasotti at gmail.com> wrote:
>> >
>> > Hi Nyall,
>> >
>> > To summarize:
>> >
>> > 1. QGIS core contributor status is for life
>> > 2. github core committer rights will be revoked after 24 months of inactivity
>> > 3. github core committer rights will be given back if the contributor restarts to contribute
>>
>
>
> Hi Nyall,
>
> Just to let you know that your proposal has been approved.

Thanks Alessandro! To confirm -- should I apply this now?

Nyall

>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it

From apasotti at gmail.com  Sun Nov 21 00:22:05 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Sun, 21 Nov 2021 09:22:05 +0100
Subject: [QGIS-Developer] Cleaning up the QGIS Developers/QGIS Community
 groups
In-Reply-To: <CAB28Asi1cAzSectdhPPuxPoTboH-efJ4sQFtNgiDTH_bDzigQA@mail.gmail.com>
References: <CAB28AshAxu2CZCe7wZGrKPzA+3kBatCMObXEqMZQpjFpz4dnbg@mail.gmail.com>
 <CAL5Q6724tV9xaZ6O2sAH1u1NKQ9Lm9HZOswjUU-qhmJ-Yf-zrA@mail.gmail.com>
 <CAB28AsitY_DWgUsciYc_qrh09Y7rE1DNe_s=ad_LDNyCGWBFmw@mail.gmail.com>
 <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>
 <CAB28Asi1cAzSectdhPPuxPoTboH-efJ4sQFtNgiDTH_bDzigQA@mail.gmail.com>
Message-ID: <CAL5Q670KjGXGocp_6z6=_mwZspaPbzH4PC6qWezbv3=K4LDF4g@mail.gmail.com>

Yes please, thanks!

Il sab 20 nov 2021, 23:34 Nyall Dawson <nyall.dawson at gmail.com> ha scritto:

> On Sat, 20 Nov 2021 at 02:12, Alessandro Pasotti <apasotti at gmail.com>
> wrote:
> >
> > On Mon, Oct 18, 2021 at 9:49 AM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> >>
> >> On Mon, 18 Oct 2021 at 17:46, Alessandro Pasotti <apasotti at gmail.com>
> wrote:
> >> >
> >> > Hi Nyall,
> >> >
> >> > To summarize:
> >> >
> >> > 1. QGIS core contributor status is for life
> >> > 2. github core committer rights will be revoked after 24 months of
> inactivity
> >> > 3. github core committer rights will be given back if the contributor
> restarts to contribute
> >>
> >
> >
> > Hi Nyall,
> >
> > Just to let you know that your proposal has been approved.
>
> Thanks Alessandro! To confirm -- should I apply this now?
>
> Nyall
>
> >
> >
> > --
> > Alessandro Pasotti
> > QCooperative:  www.qcooperative.net
> > ItOpen:   www.itopen.it
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211121/8efaa51a/attachment.html>

From giovanni.manghi at gmail.com  Sun Nov 21 02:02:24 2021
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sun, 21 Nov 2021 10:02:24 +0000
Subject: [QGIS-Developer] A problem with QGIS Browser in 3.22?
Message-ID: <CACfnYnS1DuyRzcAz9OQqATHA3bLBf0KjyxvGQ_Qdat334fMBcw@mail.gmail.com>

Hi all,

I have been reported on the Telegram channel of a possible problem in
QGIS Browser 3.22. As I'm not able to find a way to replicate, I'm
writing here to seek some feedback and try to understand if what has
been observed is expected or not.

Basically the user created in 3.20 a favorite to a folder, but when he
opened 3.22 the favourite appeared with a "database" icon instead of
the folder one.

Right clicking on that favorite didn't show the expected "remove
favourite" entry, but rather the "manage" one, which allows you to
rename/delete.

And apparently choosing "delete" deleted the whole folder, with no
confirmation asked (that is very bad of course).

Is that expected? I have some screenshots to share if needed.

cheers

-- G --

From nyall.dawson at gmail.com  Sun Nov 21 15:41:31 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 22 Nov 2021 09:41:31 +1000
Subject: [QGIS-Developer] Cleaning up the QGIS Developers/QGIS Community
 groups
In-Reply-To: <CAL5Q670KjGXGocp_6z6=_mwZspaPbzH4PC6qWezbv3=K4LDF4g@mail.gmail.com>
References: <CAB28AshAxu2CZCe7wZGrKPzA+3kBatCMObXEqMZQpjFpz4dnbg@mail.gmail.com>
 <CAL5Q6724tV9xaZ6O2sAH1u1NKQ9Lm9HZOswjUU-qhmJ-Yf-zrA@mail.gmail.com>
 <CAB28AsitY_DWgUsciYc_qrh09Y7rE1DNe_s=ad_LDNyCGWBFmw@mail.gmail.com>
 <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>
 <CAB28Asi1cAzSectdhPPuxPoTboH-efJ4sQFtNgiDTH_bDzigQA@mail.gmail.com>
 <CAL5Q670KjGXGocp_6z6=_mwZspaPbzH4PC6qWezbv3=K4LDF4g@mail.gmail.com>
Message-ID: <CAB28AsgFbeGo4-6Yr7ZSHy0ahsYUu6qxeHVrqB+JRKeHxTcKGQ@mail.gmail.com>

On Sun, 21 Nov 2021 at 18:22, Alessandro Pasotti <apasotti at gmail.com> wrote:
>
> Yes please, thanks!

Sorry -- turns out I don't have access to modify the QGIS member
groups. Want me to just collate a list of changes instead?

Nyall



>
> Il sab 20 nov 2021, 23:34 Nyall Dawson <nyall.dawson at gmail.com> ha scritto:
>>
>> On Sat, 20 Nov 2021 at 02:12, Alessandro Pasotti <apasotti at gmail.com> wrote:
>> >
>> > On Mon, Oct 18, 2021 at 9:49 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>> >>
>> >> On Mon, 18 Oct 2021 at 17:46, Alessandro Pasotti <apasotti at gmail.com> wrote:
>> >> >
>> >> > Hi Nyall,
>> >> >
>> >> > To summarize:
>> >> >
>> >> > 1. QGIS core contributor status is for life
>> >> > 2. github core committer rights will be revoked after 24 months of inactivity
>> >> > 3. github core committer rights will be given back if the contributor restarts to contribute
>> >>
>> >
>> >
>> > Hi Nyall,
>> >
>> > Just to let you know that your proposal has been approved.
>>
>> Thanks Alessandro! To confirm -- should I apply this now?
>>
>> Nyall
>>
>> >
>> >
>> > --
>> > Alessandro Pasotti
>> > QCooperative:  www.qcooperative.net
>> > ItOpen:   www.itopen.it

From apasotti at gmail.com  Mon Nov 22 01:29:21 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 22 Nov 2021 10:29:21 +0100
Subject: [QGIS-Developer] Cleaning up the QGIS Developers/QGIS Community
 groups
In-Reply-To: <CAB28AsgFbeGo4-6Yr7ZSHy0ahsYUu6qxeHVrqB+JRKeHxTcKGQ@mail.gmail.com>
References: <CAB28AshAxu2CZCe7wZGrKPzA+3kBatCMObXEqMZQpjFpz4dnbg@mail.gmail.com>
 <CAL5Q6724tV9xaZ6O2sAH1u1NKQ9Lm9HZOswjUU-qhmJ-Yf-zrA@mail.gmail.com>
 <CAB28AsitY_DWgUsciYc_qrh09Y7rE1DNe_s=ad_LDNyCGWBFmw@mail.gmail.com>
 <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>
 <CAB28Asi1cAzSectdhPPuxPoTboH-efJ4sQFtNgiDTH_bDzigQA@mail.gmail.com>
 <CAL5Q670KjGXGocp_6z6=_mwZspaPbzH4PC6qWezbv3=K4LDF4g@mail.gmail.com>
 <CAB28AsgFbeGo4-6Yr7ZSHy0ahsYUu6qxeHVrqB+JRKeHxTcKGQ@mail.gmail.com>
Message-ID: <CAL5Q672BEn8DuMGAbEuYr7oVtbrTTvv=+1uBvWRDk8y-fBAwhw@mail.gmail.com>

On Mon, Nov 22, 2021 at 12:41 AM Nyall Dawson <nyall.dawson at gmail.com>
wrote:

> On Sun, 21 Nov 2021 at 18:22, Alessandro Pasotti <apasotti at gmail.com>
> wrote:
> >
> > Yes please, thanks!
>
> Sorry -- turns out I don't have access to modify the QGIS member
> groups. Want me to just collate a list of changes instead?
>
> Nyall
>

Hi Nyall,

you should have enough permissions now, but I'm happy to help if you need.

Kind regards.

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/f1ce093a/attachment.html>

From johannes.kroeger at wheregroup.com  Mon Nov 22 05:26:02 2021
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Mon, 22 Nov 2021 14:26:02 +0100
Subject: [QGIS-Developer] Unabbreviated expression evaluation preview?
Message-ID: <74c51119-e606-9e0d-e06b-e224927e1340@wheregroup.com>

Hi list,

when developing QGIS expression the preview string output of the 
evaluation at the bottom of the dialog (e. g. Field Calculator) is super 
helpful. But it gets cut off after ~60 characters so for longer returns 
you cannot see them fully.

Is there an important reason for that cutoff or would it theoretically 
be possible to display the whole return value (e. g. in a scrollable 
area if needed)? Maybe that would require a safety limit at a couple of 
thousand characters but it would allow for more insight.

Cheers
Hannes

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater
WhereGroup GmbH
Eifelstra?e 7
53119 Bonn
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

********************************************
Where2B Konferenz 2021
16. Dezember 2021
im Universit?tsclub Bonn und online
https://where2b-conference.com/
********************************************

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0xBF7B268A77C202D5.asc
Type: application/pgp-keys
Size: 2471 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/cc37352c/attachment.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/cc37352c/attachment.sig>

From johannes.kroeger at wheregroup.com  Mon Nov 22 05:41:07 2021
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Mon, 22 Nov 2021 14:41:07 +0100
Subject: [QGIS-Developer] Purpose and function of "referenced_columns" in
 Python expression functions?
Message-ID: <d84eaee0-322f-8484-3680-667e170741a9@wheregroup.com>

Hi list,

https://docs.qgis.org/3.22/en/docs/user_manual/expressions/expression.html#function-editor 
mentions the optional keyword argument "referenced_columns" to the 
`@qgsfunction` decorator. It says

 > referenced_columns=[list]: An array of attribute names that are 
required to the function. Defaults to
 > [QgsFeatureRequest.ALL_ATTRIBUTES].

That, and examples where it is used in other people's code, led me to 
believe that the feature's attributes would not be accessible unless 
listed in that parameter or if the parameter was omitted (-> default 
value getting used -> default is all attributes).

The default code that gets inserted into the editor includes the 
decorator `@qgsfunction(args='auto', group='Custom', 
referenced_columns=[])` so I'd assume that I would not be able to use 
any attributes in the function.

In reality I can access them just fine though, e. g. `feature["name"]` 
if I had features with a "name" attribute and that default 
`referenced_columns=[]`.

I can even do so if I used `referenced_columns=["foo", "bar"]`! 
`feature["name"]` is still perfectly accessible.

Is this a bug or by design? If by design, what purpose does this 
parameter have?

Thanks
Hannes

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater
WhereGroup GmbH
Eifelstra?e 7
53119 Bonn
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

********************************************
Where2B Konferenz 2021
16. Dezember 2021
im Universit?tsclub Bonn und online
https://where2b-conference.com/
********************************************

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0xBF7B268A77C202D5.asc
Type: application/pgp-keys
Size: 2471 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/3af557ce/attachment-0001.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/3af557ce/attachment-0001.sig>

From matthias at opengis.ch  Mon Nov 22 05:44:47 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 22 Nov 2021 14:44:47 +0100
Subject: [QGIS-Developer] Unabbreviated expression evaluation preview?
In-Reply-To: <74c51119-e606-9e0d-e06b-e224927e1340@wheregroup.com>
References: <74c51119-e606-9e0d-e06b-e224927e1340@wheregroup.com>
Message-ID: <CAC7zN965qV+_jOnAB8+FfHaPGjuBDw4MnsPLNVguwMGX76fNcA@mail.gmail.com>

Hi Hannes,

Good request.
I think it's mainly the way it is for not cluttering the - already heavy -
interface too much. And potential performance problems if someone tries to
put the complete qgis source code into the preview (... that might lead to
other problems too ...)

I'd propose an on-demand popup and integrate a "copy to clipboard" action
at the same time.

That would justify a feature request on github.

Cheers
Matthias

On Mon, Nov 22, 2021 at 2:26 PM Johannes Kr?ger (WhereGroup) <
johannes.kroeger at wheregroup.com> wrote:

> Hi list,
>
> when developing QGIS expression the preview string output of the
> evaluation at the bottom of the dialog (e. g. Field Calculator) is super
> helpful. But it gets cut off after ~60 characters so for longer returns
> you cannot see them fully.
>
> Is there an important reason for that cutoff or would it theoretically
> be possible to display the whole return value (e. g. in a scrollable
> area if needed)? Maybe that would require a safety limit at a couple of
> thousand characters but it would allow for more insight.
>
> Cheers
> Hannes
>
> --
> Johannes Kr?ger / GIS-Entwickler/-Berater
> WhereGroup GmbH
> Eifelstra?e 7
> 53119 Bonn
> Germany
>
> Tel: +49 (0)228 / 90 90 38 - 36
> Fax: +49 (0)228 / 90 90 38 - 11
>
> johannes.kroeger at wheregroup.com
> www.wheregroup.com
> Gesch?ftsf?hrer:
> Olaf Knopp, Peter Stamm
> Amtsgericht Bonn, HRB 9885
> -------------------------------
>
> ********************************************
> Where2B Konferenz 2021
> 16. Dezember 2021
> im Universit?tsclub Bonn und online
> https://where2b-conference.com/
> ********************************************
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/3082900e/attachment.html>

From matthias at opengis.ch  Mon Nov 22 05:48:44 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 22 Nov 2021 14:48:44 +0100
Subject: [QGIS-Developer] Purpose and function of "referenced_columns"
 in Python expression functions?
In-Reply-To: <d84eaee0-322f-8484-3680-667e170741a9@wheregroup.com>
References: <d84eaee0-322f-8484-3680-667e170741a9@wheregroup.com>
Message-ID: <CAC7zN94VDp033z32aRbVC=aVujc0GcaeO2jNkwic3SjwDu=JHw@mail.gmail.com>

Hi Hannes,

This information can be used by the expression engine to determine what
needs to be requested from the provider.
This can lead to significant performance improvements, depending on the
scenario.

Depending on other functions used in the expression and the capabilities of
the provider itself, the request may or may not include them.

As stated in the help, it's what the function *requires*, these attributes
are guaranteed to be available. Others may still be there.

Cheers
Matthias


On Mon, Nov 22, 2021 at 2:41 PM Johannes Kr?ger (WhereGroup) <
johannes.kroeger at wheregroup.com> wrote:

> Hi list,
>
>
> https://docs.qgis.org/3.22/en/docs/user_manual/expressions/expression.html#function-editor
> mentions the optional keyword argument "referenced_columns" to the
> `@qgsfunction` decorator. It says
>
>  > referenced_columns=[list]: An array of attribute names that are
> required to the function. Defaults to
>  > [QgsFeatureRequest.ALL_ATTRIBUTES].
>
> That, and examples where it is used in other people's code, led me to
> believe that the feature's attributes would not be accessible unless
> listed in that parameter or if the parameter was omitted (-> default
> value getting used -> default is all attributes).
>
> The default code that gets inserted into the editor includes the
> decorator `@qgsfunction(args='auto', group='Custom',
> referenced_columns=[])` so I'd assume that I would not be able to use
> any attributes in the function.
>
> In reality I can access them just fine though, e. g. `feature["name"]`
> if I had features with a "name" attribute and that default
> `referenced_columns=[]`.
>
> I can even do so if I used `referenced_columns=["foo", "bar"]`!
> `feature["name"]` is still perfectly accessible.
>
> Is this a bug or by design? If by design, what purpose does this
> parameter have?
>
> Thanks
> Hannes
>
> --
> Johannes Kr?ger / GIS-Entwickler/-Berater
> WhereGroup GmbH
> Eifelstra?e 7
> 53119 Bonn
> Germany
>
> Tel: +49 (0)228 / 90 90 38 - 36
> Fax: +49 (0)228 / 90 90 38 - 11
>
> johannes.kroeger at wheregroup.com
> www.wheregroup.com
> Gesch?ftsf?hrer:
> Olaf Knopp, Peter Stamm
> Amtsgericht Bonn, HRB 9885
> -------------------------------
>
> ********************************************
> Where2B Konferenz 2021
> 16. Dezember 2021
> im Universit?tsclub Bonn und online
> https://where2b-conference.com/
> ********************************************
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/3337707a/attachment.html>

From andreas at qgis.org  Mon Nov 22 06:14:20 2021
From: andreas at qgis.org (Andreas Neumann)
Date: Mon, 22 Nov 2021 15:14:20 +0100
Subject: [QGIS-Developer] Unabbreviated expression evaluation preview?
In-Reply-To: <CAC7zN965qV+_jOnAB8+FfHaPGjuBDw4MnsPLNVguwMGX76fNcA@mail.gmail.com>
References: <74c51119-e606-9e0d-e06b-e224927e1340@wheregroup.com>
 <CAC7zN965qV+_jOnAB8+FfHaPGjuBDw4MnsPLNVguwMGX76fNcA@mail.gmail.com>
Message-ID: <CAB2Z92Db_o_P+LPw0129k2-cakf16b0_6vdEyODzU2=n28ZZKQ@mail.gmail.com>

Agreed - I also like the "Copy to Clipboard" idea.

Andreas

On Mon, 22 Nov 2021 at 14:45, Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Hannes,
>
> Good request.
> I think it's mainly the way it is for not cluttering the - already heavy -
> interface too much. And potential performance problems if someone tries to
> put the complete qgis source code into the preview (... that might lead to
> other problems too ...)
>
> I'd propose an on-demand popup and integrate a "copy to clipboard" action
> at the same time.
>
> That would justify a feature request on github.
>
> Cheers
> Matthias
>
> On Mon, Nov 22, 2021 at 2:26 PM Johannes Kr?ger (WhereGroup) <
> johannes.kroeger at wheregroup.com> wrote:
>
>> Hi list,
>>
>> when developing QGIS expression the preview string output of the
>> evaluation at the bottom of the dialog (e. g. Field Calculator) is super
>> helpful. But it gets cut off after ~60 characters so for longer returns
>> you cannot see them fully.
>>
>> Is there an important reason for that cutoff or would it theoretically
>> be possible to display the whole return value (e. g. in a scrollable
>> area if needed)? Maybe that would require a safety limit at a couple of
>> thousand characters but it would allow for more insight.
>>
>> Cheers
>> Hannes
>>
>> --
>> Johannes Kr?ger / GIS-Entwickler/-Berater
>> WhereGroup GmbH
>> Eifelstra?e 7
>> 53119 Bonn
>> Germany
>>
>> Tel: +49 (0)228 / 90 90 38 - 36
>> Fax: +49 (0)228 / 90 90 38 - 11
>>
>> johannes.kroeger at wheregroup.com
>> www.wheregroup.com
>> Gesch?ftsf?hrer:
>> Olaf Knopp, Peter Stamm
>> Amtsgericht Bonn, HRB 9885
>> -------------------------------
>>
>> ********************************************
>> Where2B Konferenz 2021
>> 16. Dezember 2021
>> im Universit?tsclub Bonn und online
>> https://where2b-conference.com/
>> ********************************************
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/d2b3b203/attachment.html>

From johannes.kroeger at wheregroup.com  Mon Nov 22 06:20:39 2021
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Mon, 22 Nov 2021 15:20:39 +0100
Subject: [QGIS-Developer] Purpose and function of "referenced_columns"
 in Python expression functions?
In-Reply-To: <CAC7zN94VDp033z32aRbVC=aVujc0GcaeO2jNkwic3SjwDu=JHw@mail.gmail.com>
References: <d84eaee0-322f-8484-3680-667e170741a9@wheregroup.com>
 <CAC7zN94VDp033z32aRbVC=aVujc0GcaeO2jNkwic3SjwDu=JHw@mail.gmail.com>
Message-ID: <bcb3d887-964d-838d-4e19-a44de7b7e62f@wheregroup.com>

Hi Matthias,

ah, that makes a lot of sense. So this can be used as a hint for 
optimisation of the ~"bandwidth" of the function so to speak. What a 
cool feature! My dataset was a tiny local geopackage so no surprise it 
just gave me access to all columns straight-away.

When I find time to make a PR I'll add a clearer sentence to the 
documentation and to change the new function template to either remove 
the parameter (so it uses the default) or make it use 
QgsFeatureRequest.ALL_ATTRIBUTES explicitely as hint that one could 
optimize that. (I prefer to remove it, it's optional with a sensible 
default...)

Cheers
Hannes

Am 22.11.21 um 14:48 schrieb Matthias Kuhn:
> Hi Hannes,
>
> This information can be used by the expression engine to determine 
> what needs to be requested from the provider.
> This can lead to significant performance improvements, depending on 
> the scenario.
>
> Depending on other functions used in the expression and the 
> capabilities of the provider itself, the request may or may not 
> include them.
>
> As stated in the help, it's what the function *requires*, these 
> attributes are guaranteed to be available. Others may still be there.
>
> Cheers
> Matthias
>
>
> On Mon, Nov 22, 2021 at 2:41 PM Johannes Kr?ger (WhereGroup) 
> <johannes.kroeger at wheregroup.com 
> <mailto:johannes.kroeger at wheregroup.com>> wrote:
>
>     Hi list,
>
>     https://docs.qgis.org/3.22/en/docs/user_manual/expressions/expression.html#function-editor
>     <https://docs.qgis.org/3.22/en/docs/user_manual/expressions/expression.html#function-editor>
>
>     mentions the optional keyword argument "referenced_columns" to the
>     `@qgsfunction` decorator. It says
>
>     ?> referenced_columns=[list]: An array of attribute names that are
>     required to the function. Defaults to
>     ?> [QgsFeatureRequest.ALL_ATTRIBUTES].
>
>     That, and examples where it is used in other people's code, led me to
>     believe that the feature's attributes would not be accessible unless
>     listed in that parameter or if the parameter was omitted (-> default
>     value getting used -> default is all attributes).
>
>     The default code that gets inserted into the editor includes the
>     decorator `@qgsfunction(args='auto', group='Custom',
>     referenced_columns=[])` so I'd assume that I would not be able to use
>     any attributes in the function.
>
>     In reality I can access them just fine though, e. g.
>     `feature["name"]`
>     if I had features with a "name" attribute and that default
>     `referenced_columns=[]`.
>
>     I can even do so if I used `referenced_columns=["foo", "bar"]`!
>     `feature["name"]` is still perfectly accessible.
>
>     Is this a bug or by design? If by design, what purpose does this
>     parameter have?
>
>     Thanks
>     Hannes
>
>     -- 
>     Johannes Kr?ger / GIS-Entwickler/-Berater
>     WhereGroup GmbH
>     Eifelstra?e 7
>     53119 Bonn
>     Germany
>
>     Tel: +49 (0)228 / 90 90 38 - 36
>     Fax: +49 (0)228 / 90 90 38 - 11
>
>     johannes.kroeger at wheregroup.com
>     <mailto:johannes.kroeger at wheregroup.com>
>     www.wheregroup.com <http://www.wheregroup.com>
>     Gesch?ftsf?hrer:
>     Olaf Knopp, Peter Stamm
>     Amtsgericht Bonn, HRB 9885
>     -------------------------------
>
>     ********************************************
>     Where2B Konferenz 2021
>     16. Dezember 2021
>     im Universit?tsclub Bonn und online
>     https://where2b-conference.com/ <https://where2b-conference.com/>
>     ********************************************
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-- 
Johannes Kr?ger / GIS-Entwickler/-Berater
WhereGroup GmbH
Eifelstra?e 7
53119 Bonn
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

********************************************
Where2B Konferenz 2021
16. Dezember 2021
im Universit?tsclub Bonn und online
https://where2b-conference.com/
********************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/ee828217/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0xBF7B268A77C202D5.asc
Type: application/pgp-keys
Size: 2471 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/ee828217/attachment-0001.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/ee828217/attachment-0001.sig>

From johannes.kroeger at wheregroup.com  Mon Nov 22 06:23:29 2021
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Mon, 22 Nov 2021 15:23:29 +0100
Subject: [QGIS-Developer] Unabbreviated expression evaluation preview?
In-Reply-To: <CAB2Z92Db_o_P+LPw0129k2-cakf16b0_6vdEyODzU2=n28ZZKQ@mail.gmail.com>
References: <74c51119-e606-9e0d-e06b-e224927e1340@wheregroup.com>
 <CAC7zN965qV+_jOnAB8+FfHaPGjuBDw4MnsPLNVguwMGX76fNcA@mail.gmail.com>
 <CAB2Z92Db_o_P+LPw0129k2-cakf16b0_6vdEyODzU2=n28ZZKQ@mail.gmail.com>
Message-ID: <8eaf3443-7891-c61a-3e90-d13108c0ce61@wheregroup.com>

Nice, I actually had the same thought of a "copy" icon because a text 
area would look super messy. I'll make two feature request for this 
later: 1) Copy to clipboard and 2) "Show full value" or something to 
open a dialog with the whole mess

Cheers
Hannes

Am 22.11.21 um 15:14 schrieb Andreas Neumann:
> Agreed - I also like the "Copy to Clipboard" idea.
>
> Andreas
>
> On Mon, 22 Nov 2021 at 14:45, Matthias Kuhn <matthias at opengis.ch 
> <mailto:matthias at opengis.ch>> wrote:
>
>     Hi Hannes,
>
>     Good request.
>     I think it's mainly the way it is for not cluttering the - already
>     heavy - interface too much. And potential performance problems if
>     someone tries to put the complete qgis source code into the
>     preview (... that might lead to other problems too ...)
>
>     I'd propose an on-demand popup and integrate a "copy to clipboard"
>     action at the same time.
>
>     That would justify a feature request on github.
>
>     Cheers
>     Matthias
>
>     On Mon, Nov 22, 2021 at 2:26 PM Johannes Kr?ger (WhereGroup)
>     <johannes.kroeger at wheregroup.com
>     <mailto:johannes.kroeger at wheregroup.com>> wrote:
>
>         Hi list,
>
>         when developing QGIS expression the preview string output of the
>         evaluation at the bottom of the dialog (e. g. Field
>         Calculator) is super
>         helpful. But it gets cut off after ~60 characters so for
>         longer returns
>         you cannot see them fully.
>
>         Is there an important reason for that cutoff or would it
>         theoretically
>         be possible to display the whole return value (e. g. in a
>         scrollable
>         area if needed)? Maybe that would require a safety limit at a
>         couple of
>         thousand characters but it would allow for more insight.
>
>         Cheers
>         Hannes
>
>         -- 
>         Johannes Kr?ger / GIS-Entwickler/-Berater
>         WhereGroup GmbH
>         Eifelstra?e 7
>         53119 Bonn
>         Germany
>
>         Tel: +49 (0)228 / 90 90 38 - 36
>         Fax: +49 (0)228 / 90 90 38 - 11
>
>         johannes.kroeger at wheregroup.com
>         <mailto:johannes.kroeger at wheregroup.com>
>         www.wheregroup.com <http://www.wheregroup.com>
>         Gesch?ftsf?hrer:
>         Olaf Knopp, Peter Stamm
>         Amtsgericht Bonn, HRB 9885
>         -------------------------------
>
>         ********************************************
>         Where2B Konferenz 2021
>         16. Dezember 2021
>         im Universit?tsclub Bonn und online
>         https://where2b-conference.com/ <https://where2b-conference.com/>
>         ********************************************
>
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         List info:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>         Unsubscribe:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>
>
> -- 
>
> --
> Andreas Neumann
> QGIS.ORG <http://QGIS.ORG> board member (treasurer)

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater
WhereGroup GmbH
Eifelstra?e 7
53119 Bonn
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

********************************************
Where2B Konferenz 2021
16. Dezember 2021
im Universit?tsclub Bonn und online
https://where2b-conference.com/
********************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/1f84170f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0xBF7B268A77C202D5.asc
Type: application/pgp-keys
Size: 2471 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/1f84170f/attachment.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211122/1f84170f/attachment.sig>

From nyall.dawson at gmail.com  Mon Nov 22 23:14:38 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 23 Nov 2021 17:14:38 +1000
Subject: [QGIS-Developer] Cleaning up the QGIS Developers/QGIS Community
 groups
In-Reply-To: <CAL5Q672BEn8DuMGAbEuYr7oVtbrTTvv=+1uBvWRDk8y-fBAwhw@mail.gmail.com>
References: <CAB28AshAxu2CZCe7wZGrKPzA+3kBatCMObXEqMZQpjFpz4dnbg@mail.gmail.com>
 <CAL5Q6724tV9xaZ6O2sAH1u1NKQ9Lm9HZOswjUU-qhmJ-Yf-zrA@mail.gmail.com>
 <CAB28AsitY_DWgUsciYc_qrh09Y7rE1DNe_s=ad_LDNyCGWBFmw@mail.gmail.com>
 <CAL5Q67062xQAEix70b-GLjmo=b4O2gVd6MOMe4q+tj8RHC4hrg@mail.gmail.com>
 <CAB28Asi1cAzSectdhPPuxPoTboH-efJ4sQFtNgiDTH_bDzigQA@mail.gmail.com>
 <CAL5Q670KjGXGocp_6z6=_mwZspaPbzH4PC6qWezbv3=K4LDF4g@mail.gmail.com>
 <CAB28AsgFbeGo4-6Yr7ZSHy0ahsYUu6qxeHVrqB+JRKeHxTcKGQ@mail.gmail.com>
 <CAL5Q672BEn8DuMGAbEuYr7oVtbrTTvv=+1uBvWRDk8y-fBAwhw@mail.gmail.com>
Message-ID: <CAB28AshTZO5xfCVvkzBPZy58h4j0Xt+iFeWhRrJOMibTMFd0ww@mail.gmail.com>

On Mon, 22 Nov 2021 at 19:29, Alessandro Pasotti <apasotti at gmail.com> wrote:
>
>
> On Mon, Nov 22, 2021 at 12:41 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Sun, 21 Nov 2021 at 18:22, Alessandro Pasotti <apasotti at gmail.com> wrote:
>> >
>> > Yes please, thanks!
>>
>> Sorry -- turns out I don't have access to modify the QGIS member
>> groups. Want me to just collate a list of changes instead?
>>
>> Nyall
>
>
> Hi Nyall,
>
> you should have enough permissions now, but I'm happy to help if you need.

All done -- thanks!

Nyall

>
> Kind regards.
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it

From nyall.dawson at gmail.com  Tue Nov 23 22:31:10 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 24 Nov 2021 16:31:10 +1000
Subject: [QGIS-Developer] Minimal docker image for qgis_process/processing
Message-ID: <CAB28Asi84kBoJwe-L_EFsRsKodEn=FKFXsoaFbkrBbHEaVa4cQ@mail.gmail.com>

Hi lists,

Is anyone aware of any minimal QGIS dockers which are designed just
for using the processing tools (either via Python or qgis_process)?

(Ideally I'm hoping to find one which has no
GUI/server/application/etc components, but does have all the desirable
libraries for a full-featured processing experience!)

Nyall

From dmarteau at 3liz.com  Wed Nov 24 00:57:54 2021
From: dmarteau at 3liz.com (David Marteau)
Date: Wed, 24 Nov 2021 09:57:54 +0100
Subject: [QGIS-Developer] Minimal docker image for
 qgis_process/processing
In-Reply-To: <CAB28Asi84kBoJwe-L_EFsRsKodEn=FKFXsoaFbkrBbHEaVa4cQ@mail.gmail.com>
References: <CAB28Asi84kBoJwe-L_EFsRsKodEn=FKFXsoaFbkrBbHEaVa4cQ@mail.gmail.com>
Message-ID: <c64c9801-4b52-4deb-fc3c-8e3b5dd0c84a@3liz.com>

Hi Nyall

I don't know if this is what you are seeking for but you will find at 
https://hub.docker.com/r/3liz/qgis-platform a simple
image that embed the official version (release/ltr) of Qgis library (no 
desktop support).

That image do nothing except having a Qgis install. We use it as a base 
image for all other docker images that require Qgis libraries.

Sincerely

David

Le 24/11/2021 ? 07:31, Nyall Dawson a ?crit?:
> Hi lists,
>
> Is anyone aware of any minimal QGIS dockers which are designed just
> for using the processing tools (either via Python or qgis_process)?
>
> (Ideally I'm hoping to find one which has no
> GUI/server/application/etc components, but does have all the desirable
> libraries for a full-featured processing experience!)
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From matthias at opengis.ch  Wed Nov 24 01:05:43 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Wed, 24 Nov 2021 10:05:43 +0100
Subject: [QGIS-Developer] Minimal docker image for
 qgis_process/processing
In-Reply-To: <CAB28Asi84kBoJwe-L_EFsRsKodEn=FKFXsoaFbkrBbHEaVa4cQ@mail.gmail.com>
References: <CAB28Asi84kBoJwe-L_EFsRsKodEn=FKFXsoaFbkrBbHEaVa4cQ@mail.gmail.com>
Message-ID: <CAC7zN97cmdcs_=2SdLJxLwPK9K=Pqh9LG8gp9YXM+ERw7n362A@mail.gmail.com>

Hi Nyall,

I prepared a qgis image based on alpine linux a couple of months back but
never released it to public.
It's super slim and builds QGIS from source during docker build.
If there is interest, I can revive that.

Cheers
Matthias


On Wed, Nov 24, 2021 at 7:31 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> Hi lists,
>
> Is anyone aware of any minimal QGIS dockers which are designed just
> for using the processing tools (either via Python or qgis_process)?
>
> (Ideally I'm hoping to find one which has no
> GUI/server/application/etc components, but does have all the desirable
> libraries for a full-featured processing experience!)
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211124/fd697ef4/attachment.html>

From simon.groechenig at salzburgresearch.at  Wed Nov 24 02:14:13 2021
From: simon.groechenig at salzburgresearch.at (=?UTF-8?Q?Simon_Gr=c3=b6chenig?=)
Date: Wed, 24 Nov 2021 11:14:13 +0100
Subject: [QGIS-Developer] Access QgsVectorLayer from child algorithm
Message-ID: <2b2fb033-5b60-2b3d-999e-64984807b2b3@salzburgresearch.at>

Hi developers,

I am developing a Python processing algorithm with some child 
algorithms. I am struggling to find a way to access a child algorithm's 
output vector layer. I want to use isChildAlgorithm=True in order to 
correctly set the feedback progress.

* If I use processing.run(...) with setting the parameter 
isChildAlgorithm to False (= default), the vector layer (via sink) is 
returned as a QgsVectorLayer.
* If I set isChildAlgorithm to True, only the dest_id is returned as a 
string. I did not find a solution on how I retrieve the corresponding 
QgsVectorLayer.
* Is it intentional that the vector layer is returned as QgsVectorLayer 
or str (dest_id), depending on the isChildAlgorithm parameter?
* How can I access output QgsVectorLayer from a child algorithm?

This is a minimum example where you can modify the is_child_algorithm 
parameter:

parameters = {
 ??? 'INPUT': QgsVectorLayer('Point?crs=epsg:31258', 'locations', "memory"),
 ??? 'DISTANCE': 10,
 ??? 'OUTPUT': 'TEMPORARY_OUTPUT'
}
result = processing.run("native:buffer", parameters, 
is_child_algorithm=False )
vector_layer = result['OUTPUT']
print(str(type(vector_layer)))

Best regards
Simon

-- 
Simon Gr?chenig MSc
MTA - Mobility & Transport Analytics

Salzburg Research Forschungsgesellschaft mbH
Jakob-Haringer-Stra?e 5/3 | 5020 Salzburg, Austria
T: +43.662.2288-314
simon.groechenig at salzburgresearch.at
http://www.salzburgresearch.at
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211124/83d2efd0/attachment.html>

From etienne.trimaille at gmail.com  Wed Nov 24 03:50:36 2021
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Wed, 24 Nov 2021 12:50:36 +0100
Subject: [QGIS-Developer] Access QgsVectorLayer from child algorithm
In-Reply-To: <2b2fb033-5b60-2b3d-999e-64984807b2b3@salzburgresearch.at>
References: <2b2fb033-5b60-2b3d-999e-64984807b2b3@salzburgresearch.at>
Message-ID: <CAMtDFLL9O=u8ohUytMK+tZ1gS78RUz3VXahourB_OuBXzuO=Lw@mail.gmail.com>

This might help you ?
QgsProcessingUtils::mapLayerFromString()
https://qgis.org/api/classQgsProcessingUtils.html#aa1c2360e52d2ed8100faf02a35125b17


Le mer. 24 nov. 2021 ? 11:19, Simon Gr?chenig <
simon.groechenig at salzburgresearch.at> a ?crit :

> Hi developers,
>
> I am developing a Python processing algorithm with some child algorithms.
> I am struggling to find a way to access a child algorithm's output vector
> layer. I want to use isChildAlgorithm=True in order to correctly set the
> feedback progress.
>
> * If I use processing.run(...) with setting the parameter isChildAlgorithm
> to False (= default), the vector layer (via sink) is returned as a
> QgsVectorLayer.
> * If I set isChildAlgorithm to True, only the dest_id is returned as a
> string. I did not find a solution on how I retrieve the corresponding
> QgsVectorLayer.
> * Is it intentional that the vector layer is returned as QgsVectorLayer or
> str (dest_id), depending on the isChildAlgorithm parameter?
> * How can I access output QgsVectorLayer from a child algorithm?
>
> This is a minimum example where you can modify the is_child_algorithm
> parameter:
>
> parameters = {
>     'INPUT': QgsVectorLayer('Point?crs=epsg:31258', 'locations', "memory"),
>     'DISTANCE': 10,
>     'OUTPUT': 'TEMPORARY_OUTPUT'
> }
> result = processing.run("native:buffer", parameters,
> is_child_algorithm=False )
> vector_layer = result['OUTPUT']
> print(str(type(vector_layer)))
>
> Best regards
> Simon
>
> --
> Simon Gr?chenig MSc
> MTA - Mobility & Transport Analytics
>
> Salzburg Research Forschungsgesellschaft mbH
> Jakob-Haringer-Stra?e 5/3 | 5020 Salzburg, Austria
> T: +43.662.2288-314simon.groechenig at salzburgresearch.athttp://www.salzburgresearch.at
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211124/b05e592d/attachment.html>

From denis.rouzaud at gmail.com  Wed Nov 24 09:21:29 2021
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Wed, 24 Nov 2021 18:21:29 +0100
Subject: [QGIS-Developer] Minimal docker image for
 qgis_process/processing
In-Reply-To: <c64c9801-4b52-4deb-fc3c-8e3b5dd0c84a@3liz.com>
References: <CAB28Asi84kBoJwe-L_EFsRsKodEn=FKFXsoaFbkrBbHEaVa4cQ@mail.gmail.com>
 <c64c9801-4b52-4deb-fc3c-8e3b5dd0c84a@3liz.com>
Message-ID: <CAMtsY+bn8MvVv6KRGqNG3kCLEMqo6-8UVZbiL__rzbyzm-GWeg@mail.gmail.com>

I didn't pay attention but replied privately to David.

After discussing, it appears that qgis_process is only available under the
qgis package.
It would make sense to make it available under it own package, no?

Le mer. 24 nov. 2021 ? 09:58, David Marteau <dmarteau at 3liz.com> a ?crit :

> Hi Nyall
>
> I don't know if this is what you are seeking for but you will find at
> https://hub.docker.com/r/3liz/qgis-platform a simple
> image that embed the official version (release/ltr) of Qgis library (no
> desktop support).
>
> That image do nothing except having a Qgis install. We use it as a base
> image for all other docker images that require Qgis libraries.
>
> Sincerely
>
> David
>
> Le 24/11/2021 ? 07:31, Nyall Dawson a ?crit :
> > Hi lists,
> >
> > Is anyone aware of any minimal QGIS dockers which are designed just
> > for using the processing tools (either via Python or qgis_process)?
> >
> > (Ideally I'm hoping to find one which has no
> > GUI/server/application/etc components, but does have all the desirable
> > libraries for a full-featured processing experience!)
> >
> > Nyall
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211124/da7dc3c7/attachment-0001.html>

From dmarteau at 3liz.com  Wed Nov 24 10:36:19 2021
From: dmarteau at 3liz.com (David Marteau)
Date: Wed, 24 Nov 2021 19:36:19 +0100
Subject: [QGIS-Developer] Minimal docker image for
 qgis_process/processing
In-Reply-To: <CAMtsY+bn8MvVv6KRGqNG3kCLEMqo6-8UVZbiL__rzbyzm-GWeg@mail.gmail.com>
References: <CAB28Asi84kBoJwe-L_EFsRsKodEn=FKFXsoaFbkrBbHEaVa4cQ@mail.gmail.com>
 <c64c9801-4b52-4deb-fc3c-8e3b5dd0c84a@3liz.com>
 <CAMtsY+bn8MvVv6KRGqNG3kCLEMqo6-8UVZbiL__rzbyzm-GWeg@mail.gmail.com>
Message-ID: <bda3842e-de1e-6582-b331-0f1beefc0e32@3liz.com>


FYI, the image at https://hub.docker.com/r/3liz/qgis-platform is 
perfectly suited for using processing with python

(we use it as base image for our wps/processing server)


Le 24/11/2021 ? 18:21, Denis Rouzaud a ?crit?:
> I didn't pay attention but replied privately to David.
>
> After discussing, it appears that qgis_process is only available under 
> the qgis package.
> It would make sense to make it available under it own package, no?
>
> Le?mer. 24 nov. 2021 ??09:58, David Marteau <dmarteau at 3liz.com> a ?crit?:
>
>     Hi Nyall
>
>     I don't know if this is what you are seeking for but you will find at
>     https://hub.docker.com/r/3liz/qgis-platform a simple
>     image that embed the official version (release/ltr) of Qgis
>     library (no
>     desktop support).
>
>     That image do nothing except having a Qgis install. We use it as a
>     base
>     image for all other docker images that require Qgis libraries.
>
>     Sincerely
>
>     David
>
>     Le 24/11/2021 ? 07:31, Nyall Dawson a ?crit?:
>     > Hi lists,
>     >
>     > Is anyone aware of any minimal QGIS dockers which are designed just
>     > for using the processing tools (either via Python or qgis_process)?
>     >
>     > (Ideally I'm hoping to find one which has no
>     > GUI/server/application/etc components, but does have all the
>     desirable
>     > libraries for a full-featured processing experience!)
>     >
>     > Nyall
>     > _______________________________________________
>     > QGIS-Developer mailing list
>     > QGIS-Developer at lists.osgeo.org
>     > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211124/e56b803a/attachment.html>

From simon.groechenig at salzburgresearch.at  Wed Nov 24 22:00:42 2021
From: simon.groechenig at salzburgresearch.at (=?UTF-8?Q?Simon_Gr=c3=b6chenig?=)
Date: Thu, 25 Nov 2021 07:00:42 +0100
Subject: [QGIS-Developer] Access QgsVectorLayer from child algorithm
In-Reply-To: <CAMtDFLL9O=u8ohUytMK+tZ1gS78RUz3VXahourB_OuBXzuO=Lw@mail.gmail.com>
References: <2b2fb033-5b60-2b3d-999e-64984807b2b3@salzburgresearch.at>
 <CAMtDFLL9O=u8ohUytMK+tZ1gS78RUz3VXahourB_OuBXzuO=Lw@mail.gmail.com>
Message-ID: <bc4c8e2f-4776-39ee-b2a9-2f297df1a547@salzburgresearch.at>

Yes, that is the method I am looking for. Thank you, Etienne.

I am still curious why the output is different depending on the 
isChildAlgorithm parameter??

Simon


Am 24.11.2021 um 12:50 schrieb Etienne Trimaille:
> This might help you ?
> QgsProcessingUtils::mapLayerFromString()
> https://qgis.org/api/classQgsProcessingUtils.html#aa1c2360e52d2ed8100faf02a35125b17
>
>
> Le?mer. 24 nov. 2021 ??11:19, Simon Gr?chenig 
> <simon.groechenig at salzburgresearch.at> a ?crit?:
>
>     Hi developers,
>
>     I am developing a Python processing algorithm with some child
>     algorithms. I am struggling to find a way to access a child
>     algorithm's output vector layer. I want to use
>     isChildAlgorithm=True in order to correctly set the feedback progress.
>
>     * If I use processing.run(...) with setting the parameter
>     isChildAlgorithm to False (= default), the vector layer (via sink)
>     is returned as a QgsVectorLayer.
>     * If I set isChildAlgorithm to True, only the dest_id is returned
>     as a string. I did not find a solution on how I retrieve the
>     corresponding QgsVectorLayer.
>     * Is it intentional that the vector layer is returned as
>     QgsVectorLayer or str (dest_id), depending on the isChildAlgorithm
>     parameter?
>     * How can I access output QgsVectorLayer from a child algorithm?
>
>     This is a minimum example where you can modify the
>     is_child_algorithm parameter:
>
>     parameters = {
>     ??? 'INPUT': QgsVectorLayer('Point?crs=epsg:31258', 'locations',
>     "memory"),
>     ??? 'DISTANCE': 10,
>     ??? 'OUTPUT': 'TEMPORARY_OUTPUT'
>     }
>     result = processing.run("native:buffer", parameters,
>     is_child_algorithm=False )
>     vector_layer = result['OUTPUT']
>     print(str(type(vector_layer)))
>
>     Best regards
>     Simon
>
>     -- 
>     Simon Gr?chenig MSc
>     MTA - Mobility & Transport Analytics
>
>     Salzburg Research Forschungsgesellschaft mbH
>     Jakob-Haringer-Stra?e 5/3 | 5020 Salzburg, Austria
>     T: +43.662.2288-314
>     simon.groechenig at salzburgresearch.at
>     http://www.salzburgresearch.at
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-- 
Simon Gr?chenig MSc
MTA - Mobility & Transport Analytics

Salzburg Research Forschungsgesellschaft mbH
Jakob-Haringer-Stra?e 5/3 | 5020 Salzburg, Austria
T: +43.662.2288-314
simon.groechenig at salzburgresearch.at
http://www.salzburgresearch.at
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211125/8f927ce4/attachment.html>

From rdmailings at duif.net  Wed Nov 24 23:17:34 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 25 Nov 2021 08:17:34 +0100
Subject: [QGIS-Developer] Influencing order of Loaded Processing FeatureSinks
Message-ID: <da91eb50-56eb-b95a-2513-05acc3f6d124@duif.net>

Hi Devs,

I recently used the CheckValidity algorithm to check some strange shapefile:

https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/qgis/CheckValidity.py

It generates (if you let them load) three layers: 
- Valid output (features)
- Invalid output
- Error output (points)

But... in that order so after every validation you have to pull (at least) de Error output on top to see the invalid points.

So I thought to try to change the order in the python code, but (to me) it looked I could not influence that.

Am I right? 
I tried both changing the order of the parameter and featuresink creation, I even tried to rename the layers (as in prepending abc or 123 to it).
Or am I missing something?

Another feature I would like to see: show the actual count (of at least the invalid features and the error points), but same thing: processing is indeed loosely/not coupled to QGIS-gui?
But because these core-algorithms are part of gui/menu's, I'm hoping we can maybe make this better?

Any hint appreciated.

Regards,

Richard Duivenvoorde

From anne.b.nilsen at nibio.no  Thu Nov 25 00:29:50 2021
From: anne.b.nilsen at nibio.no (Anne B. Nilsen)
Date: Thu, 25 Nov 2021 08:29:50 +0000
Subject: [QGIS-Developer] QGIS 3.22: Can't run GRASS algorithm in
 pyQGIS-script
In-Reply-To: <AM7P189MB0900058E6C5F3C6D4CE01DA5C3629@AM7P189MB0900.EURP189.PROD.OUTLOOK.COM>
References: <AM7P189MB090038135497EF3196715E97C3629@AM7P189MB0900.EURP189.PROD.OUTLOOK.COM>
 <AM7P189MB0900098207F1760DDC2098F7C3629@AM7P189MB0900.EURP189.PROD.OUTLOOK.COM>
 <AM7P189MB0900058E6C5F3C6D4CE01DA5C3629@AM7P189MB0900.EURP189.PROD.OUTLOOK.COM>
Message-ID: <AM7P189MB090079C1BE5055D035A3539DC3629@AM7P189MB0900.EURP189.PROD.OUTLOOK.COM>

Hi.

When running a GRASS algorithm in a standalone pyQGIS-script with QGIS 3.22.0 and 3.22.1 , e.g. processing.run("grass7:v.split", ...) I get
_core.QgsProcessingException: Error: Algorithm grass7:v.split not found

GRASS (and SAGA) algorithms are available and working within QGIS 3.22 (through OSGE4W v2 installation).
My original script worked in QGIS 3.16.

My code is shown here: https://github.com/qgis/QGIS/issues/45935

Is my code wrong or is something wrong with QGIS/my installation?

Best regards
Anne Nilsen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211125/46fa4200/attachment.html>

From nick at geospatialtrainingsolutions.co.uk  Fri Nov 26 03:55:57 2021
From: nick at geospatialtrainingsolutions.co.uk (Nick Bearman)
Date: Fri, 26 Nov 2021 11:55:57 +0000
Subject: [QGIS-Developer] LTR Support Improvements for 2022
In-Reply-To: <CAB2ZMRDN=DkvROQwGTXxOptaCjm8p+3Lr+wv83eMjcvgHDQJvg@mail.gmail.com>
References: <CAB2ZMRDN=DkvROQwGTXxOptaCjm8p+3Lr+wv83eMjcvgHDQJvg@mail.gmail.com>
Message-ID: <53aa6550-998a-326f-a8b0-3e824f2250ea@geospatialtrainingsolutions.co.uk>

Thanks Marco, and the PSC for your discussions with LTRs and the budget 
proposed for pre-release LTR package tests.

There still seems to be some ongoing discussion on the QGIS-PSC list 
(e.g. 
https://lists.osgeo.org/pipermail/qgis-psc/2021-November/009584.html) 
about the scheduling but I think the main thrust of the proposal 
addresses the key issues.

More testing (including some automated) and less frequent releases of 
the LTR version (unless there is a specific reason) are both good things 
in my book.

As a relative new-comer to the packaging and distribution process I am 
still trying to get my head around the schedule and process.

I am going to aim to do some more testing myself (of installing the 
Windows version of QGIS on a clean machine) to support most of my 
clients, who install QGIS on Windows. This will require some investment 
(e.g. a clean Windows VM I can use, possibly created through AWS 
WorkSpaces) and any hints and tips people have, please do share!

(and perhaps, by making this commitment here, I will actually be more 
motivated to do this!)

Best wishes,
Nick.


On 20/11/2021 07:00, Marco Bernasocchi wrote:
> Dear community,
>
> since their introduction, QGIS LTR versions have gained wide-spread 
> popularity [0]. LTR point releases have always followed the regular 
> monthly release cycle [1] creating a constant flow of point releases 
> that likely exceeds the update frequency that LTR users desire and 
> actually roll-out.
>
> To further improve our LTR offering and ensure the reliability of our 
> installers, we propose to introduce pre-release LTR package tests. 
> These semi-automated and manual tests will be performed during a 
> two-week period between packaging and announcement of new packages.
>
> The 2022 budget proposal will account for the additional costs of 
> pre-release LTR package tests. To stay within a reasonable budget and 
> allow for an appropriate number of tests, we propose to reduce the LTR 
> point release frequency to quarterly (four times a year) and initially 
> limit testing to the platform with our largest user base (Windows).
>
> If accepted, the new quarterly schedule would start as soon as the 
> whole testing infrastructure is ready. This would probably be 
> introduced stepwise during the 3.22 lifecycle and become definitive in 
> the 3.28 cycle.
>
> Together with this proposal, to quantify the userbases by operating 
> system, and be able to make data driven decisions in the future, the 
> QGIS network user agent now includes a generic string mentioning the 
> user?s operating system. You can read more about the change here [2].
>
> We are looking forward to hearing what you think about these news 
> plans and your ideas how they may be improved.
>
> On behalf of the PSC,
> Have a great weekend
>
> Marco
>
> [0] https://blog.qgis.org/2020/04/02/ltr-usage-survey/
> [1] 
> https://qgis.org/en/site/getinvolved/development/roadmap.html#release-schedule
> [2] https://github.com/qgis/QGIS/pull/46090
>
> -- 
> Marco Bernasocchi
>
> QGIS.org Chair
> OPENGIS.ch CEO
> http://berna.io
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Nick Bearman
Tel / WhatsApp / Signal: +44 (0) 7717745715
nick at geospatialtrainingsolutions.co.uk

My working pattern is probably not the same as your working pattern, therefore
you may get emails from me outside of normal working hours. Please do not feel any
pressure to respond outside of your own working pattern.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211126/c6399900/attachment.html>

From ricardo.garcia.silva at gmail.com  Fri Nov 26 15:11:36 2021
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Fri, 26 Nov 2021 23:11:36 +0000
Subject: [QGIS-Developer] Retrieving error details for when a loaded layer
 is not valid
Message-ID: <CAFcNcQZY99=5ThVR_VxreLXUZGaDpDtDWbMLiu8T5EdM96RWQw@mail.gmail.com>

Hi list

When loading a vector layer via Python, is there a way to get a hold of the
error message for when the loading fails?

I can check if the layer is valid or not, but I'd like to get a description
of the error. I see the error on the QGIS log panel, so I'm hoping it is
possible to access it from Python.

```
# a sample of my code
layer = QgsVectorLayer("some-bogus-url", "mylayer", "WFS")
layer.isValid()  # this returns False
```

Thanks in advance!

-- 
___________________________ ___ __
Ricardo Garcia Silva
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211126/b9f10df3/attachment.html>

From giovanni.allegri at gmail.com  Fri Nov 26 15:48:52 2021
From: giovanni.allegri at gmail.com (G. Allegri)
Date: Sat, 27 Nov 2021 00:48:52 +0100
Subject: [QGIS-Developer] Retrieving error details for when a loaded
 layer is not valid
In-Reply-To: <CAFcNcQZY99=5ThVR_VxreLXUZGaDpDtDWbMLiu8T5EdM96RWQw@mail.gmail.com>
References: <CAFcNcQZY99=5ThVR_VxreLXUZGaDpDtDWbMLiu8T5EdM96RWQw@mail.gmail.com>
Message-ID: <CAB4g1=xCeEiCUYavrn74H4Rtud-pDGJWphAhVYZT+QFEc5vq=Q@mail.gmail.com>

Hi Ricardo,

have you tried increasing the debug level? I often raise it at 9 using
the QGIS_DEBUG env var.
>From a quick look at the source code of QgsVectorLayer two cases where the
valid flag is set to false
<https://github.com/qgis/QGIS/blob/master/src/core/vector/qgsvectorlayer.cpp#L1788-L1806>
are when there are problems with the provider, and this is logged with
level 2.

Giovanni

Il giorno sab 27 nov 2021 alle ore 00:11 Ricardo Filipe Soares Garcia da <
ricardo.garcia.silva at gmail.com> ha scritto:

> Hi list
>
> When loading a vector layer via Python, is there a way to get a hold of
> the error message for when the loading fails?
>
> I can check if the layer is valid or not, but I'd like to get a
> description of the error. I see the error on the QGIS log panel, so I'm
> hoping it is possible to access it from Python.
>
> ```
> # a sample of my code
> layer = QgsVectorLayer("some-bogus-url", "mylayer", "WFS")
> layer.isValid()  # this returns False
> ```
>
> Thanks in advance!
>
> --
> ___________________________ ___ __
> Ricardo Garcia Silva
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211127/f9c9d83b/attachment.html>

From apasotti at gmail.com  Sat Nov 27 02:19:58 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Sat, 27 Nov 2021 11:19:58 +0100
Subject: [QGIS-Developer] Retrieving error details for when a loaded
 layer is not valid
In-Reply-To: <CAFcNcQZY99=5ThVR_VxreLXUZGaDpDtDWbMLiu8T5EdM96RWQw@mail.gmail.com>
References: <CAFcNcQZY99=5ThVR_VxreLXUZGaDpDtDWbMLiu8T5EdM96RWQw@mail.gmail.com>
Message-ID: <CAL5Q673xLdj6X6QHXJANGcCMx9rwUG7KjvV6DtohKtR7e1iYyA@mail.gmail.com>

Hi,

you can try with
https://qgis.org/pyqgis/3.0/core/Data/QgsDataProvider.html#qgis.core.QgsDataProvider.error



On Sat, Nov 27, 2021 at 12:11 AM Ricardo Filipe Soares Garcia da <
ricardo.garcia.silva at gmail.com> wrote:

> Hi list
>
> When loading a vector layer via Python, is there a way to get a hold of
> the error message for when the loading fails?
>
> I can check if the layer is valid or not, but I'd like to get a
> description of the error. I see the error on the QGIS log panel, so I'm
> hoping it is possible to access it from Python.
>
> ```
> # a sample of my code
> layer = QgsVectorLayer("some-bogus-url", "mylayer", "WFS")
> layer.isValid()  # this returns False
> ```
>
> Thanks in advance!
>
> --
> ___________________________ ___ __
> Ricardo Garcia Silva
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211127/7579fd4f/attachment.html>

From pedrongvenancio at gmail.com  Sat Nov 27 10:13:00 2021
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Sat, 27 Nov 2021 18:13:00 +0000
Subject: [QGIS-Developer] QGIS does not recognize CRS of specific layers
 generated by GeoServer
Message-ID: <CAMCJChu3R6kCGM4Er=cqoDdwwegt0=RPuORhfaEUAk4u7FRHdw@mail.gmail.com>

Hi all,

I'm seeing that QGIS 3.16 / 3.22 does not recognize the CRS of specific
layers generated by GeoServer, but the old QGIS 2.18.28 recognize.

For instance, this shapefile: https://si.icnf.pt/shp/rnap

Checking ogrinfo in different versions:

ogrinfo --version
GDAL 2.4.0, released 2018/12/14 (Used by QGIS 2.18.28)

ogrinfo -al rnap.shp
INFO: Open of `rnap.shp'
      using driver `ESRI Shapefile' successful.

Layer name: rnap
Metadata:
  DBF_DATE_LAST_UPDATE=1921-11-27
Geometry: Polygon
Feature Count: 48
Extent: (-123561.201500, -300415.400000) - (162054.118700, 268136.980100)
Layer SRS WKT:
PROJCS["ETRS89 / Portugal TM06",
    GEOGCS["ETRS89",
        DATUM["European Terrestrial Reference System 1989",
            SPHEROID["GRS 1980",6378137.0,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0.0,0.0,0.0,0.0,0.0,0.0,0.0],
            AUTHORITY["EPSG","6258"]],
        PRIMEM["Greenwich",0.0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.017453292519943295],
        AXIS["Geodetic longitude",EAST],
        AXIS["Geodetic latitude",NORTH],
        AUTHORITY["EPSG","4258"]],
    PROJECTION["Transverse_Mercator",
        AUTHORITY["EPSG","9807"]],
    PARAMETER["central_meridian",-8.133108333333334],
    PARAMETER["latitude_of_origin",39.66825833333334],
    PARAMETER["scale_factor",1.0],
    PARAMETER["false_easting",0.0],
    PARAMETER["false_northing",0.0],
    UNIT["m",1.0],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH],
    AUTHORITY["EPSG","3763"]]
nome_ap: String (254.0)
classifica: String (254.0)
publica1: String (254.0)
publica2: String (254.0)
jurisdicao: String (254.0)
area_ha: Real (33.15)
sigla: String (254.0)



ogrinfo --version
GDAL 3.4.0, released 2021/11/04 (Used by QGIS 3.22)

ogrinfo -al rnap.shp
INFO: Open of `rnap.shp'
      using driver `ESRI Shapefile' successful.

Layer name: rnap
Metadata:
  DBF_DATE_LAST_UPDATE=1920-08-17
Geometry: Polygon
Feature Count: 48
Extent: (-123561.201500, -300415.400000) - (162054.118700, 268136.980100)
Layer SRS WKT:
BOUNDCRS[
    SOURCECRS[
        PROJCRS["ETRS89 / Portugal TM06",
            BASEGEOGCRS["ETRS89",
                ENSEMBLE["European Terrestrial Reference System 1989
ensemble",
                    MEMBER["European Terrestrial Reference Frame 1989"],
                    MEMBER["European Terrestrial Reference Frame 1990"],
                    MEMBER["European Terrestrial Reference Frame 1991"],
                    MEMBER["European Terrestrial Reference Frame 1992"],
                    MEMBER["European Terrestrial Reference Frame 1993"],
                    MEMBER["European Terrestrial Reference Frame 1994"],
                    MEMBER["European Terrestrial Reference Frame 1996"],
                    MEMBER["European Terrestrial Reference Frame 1997"],
                    MEMBER["European Terrestrial Reference Frame 2000"],
                    MEMBER["European Terrestrial Reference Frame 2005"],
                    MEMBER["European Terrestrial Reference Frame 2014"],
                    ELLIPSOID["GRS 1980",6378137,298.257222101,
                        LENGTHUNIT["metre",1]],
                    ENSEMBLEACCURACY[0.1]],
                PRIMEM["Greenwich",0,
                    ANGLEUNIT["degree",0.0174532925199433]],
                ID["EPSG",4258]],
            CONVERSION["Portugual TM06",
                METHOD["Transverse Mercator",
                    ID["EPSG",9807]],
                PARAMETER["Latitude of natural origin",39.6682583333333,
                    ANGLEUNIT["degree",0.0174532925199433],
                    ID["EPSG",8801]],
                PARAMETER["Longitude of natural origin",-8.13310833333333,
                    ANGLEUNIT["degree",0.0174532925199433],
                    ID["EPSG",8802]],
                PARAMETER["Scale factor at natural origin",1,
                    SCALEUNIT["unity",1],
                    ID["EPSG",8805]],
                PARAMETER["False easting",0,
                    LENGTHUNIT["metre",1],
                    ID["EPSG",8806]],
                PARAMETER["False northing",0,
                    LENGTHUNIT["metre",1],
                    ID["EPSG",8807]]],
            CS[Cartesian,2],
                AXIS["easting (X)",east,
                    ORDER[1],
                    LENGTHUNIT["metre",1]],
                AXIS["northing (Y)",north,
                    ORDER[2],
                    LENGTHUNIT["metre",1]],
            USAGE[
                SCOPE["Topographic mapping (medium scale)."],
                AREA["Portugal - mainland - onshore."],
                BBOX[36.95,-9.56,42.16,-6.19]],
            ID["EPSG",3763]]],
    TARGETCRS[
        GEOGCRS["WGS 84",
            DATUM["World Geodetic System 1984",
                ELLIPSOID["WGS 84",6378137,298.257223563,
                    LENGTHUNIT["metre",1]]],
            PRIMEM["Greenwich",0,
                ANGLEUNIT["degree",0.0174532925199433]],
            CS[ellipsoidal,2],
                AXIS["latitude",north,
                    ORDER[1],
                    ANGLEUNIT["degree",0.0174532925199433]],
                AXIS["longitude",east,
                    ORDER[2],
                    ANGLEUNIT["degree",0.0174532925199433]],
            ID["EPSG",4326]]],
    ABRIDGEDTRANSFORMATION["ETRS89 to WGS 84 (1)",
        VERSION["EPSG-eur"],
        METHOD["Geocentric translations (geog2D domain)",
            ID["EPSG",9603]],
        PARAMETER["X-axis translation",0,
            ID["EPSG",8605]],
        PARAMETER["Y-axis translation",0,
            ID["EPSG",8606]],
        PARAMETER["Z-axis translation",0,
            ID["EPSG",8607]],
        USAGE[
            SCOPE["(null/copy) Approximation for medium and low accuracy
applications assuming equality between plate-fixed static and earth-fixed
dynamic CRSs, ignoring static/dynamic CRS differences."],
            AREA["Europe - onshore and offshore: Albania; Andorra; Austria;
Belgium; Bosnia and Herzegovina; Bulgaria; Croatia; Cyprus; Czechia;
Denmark; Estonia; Faroe Islands; Finland; France; Germany; Gibraltar;
Greece; Hungary; Ireland; Italy; Kosovo; Latvia; Liechtenstein; Lithuania;
Luxembourg; Malta; Moldova; Monaco; Montenegro; Netherlands; North
Macedonia; Norway including Svalbard and Jan Mayen; Poland; Portugal;
Romania; San Marino; Serbia; Slovakia; Slovenia; Spain; Sweden;
Switzerland; United Kingdom (UK) including Channel Islands and Isle of Man;
Vatican City State."],
            BBOX[32.88,-16.1,84.73,40.18]],
        ID["EPSG",1149],
        REMARK["ETRS89 and WGS 84 are realizations of ITRS coincident to
within 1 metre. This transformation has an accuracy equal to the
coincidence figure."]]]
Data axis to CRS axis mapping: 1,2
nome_ap: String (254.0)
classifica: String (254.0)
publica1: String (254.0)
publica2: String (254.0)
jurisdicao: String (254.0)
area_ha: Real (33.15)
sigla: String (254.0)

The differences between rnap.prj (left) and https://epsg.io/3763 (right)
are few:

https://cld.pt/dl/download/5d9b5324-b28a-4654-a8f7-365c7cc39c10/rnap_prj.png

The GeoServer version that is generating this layer is old.

So, could this be a bug?

Thanks!

Best regards,
Pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211127/aca9fafd/attachment-0001.html>

From even.rouault at spatialys.com  Sat Nov 27 11:38:17 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Nov 2021 20:38:17 +0100
Subject: [QGIS-Developer] QGIS does not recognize CRS of specific layers
 generated by GeoServer
In-Reply-To: <CAMCJChu3R6kCGM4Er=cqoDdwwegt0=RPuORhfaEUAk4u7FRHdw@mail.gmail.com>
References: <CAMCJChu3R6kCGM4Er=cqoDdwwegt0=RPuORhfaEUAk4u7FRHdw@mail.gmail.com>
Message-ID: <fd4c2ac3-4a4f-be30-f97c-27e9dc670462@spatialys.com>

Petro,

I've queued https://github.com/OSGeo/gdal/pull/4908 which will "fix" 
that particular case (more precisely anything based on ETRS89). I'm not 
super satisfied with this, and I believe there's no miracle solution for 
all potential use cases. What GDAL returns in both 2.4.0 and 3.4.0 is 
actually pretty much the same object, despite the different 
representation (WKT1 vs WKT2). The root cause of the issue is with the 
TOWGS84[] node. Those nodes are not part of CRS definitions. They date 
back to the time where the GDAL & PROJ stack wasn't capable of more 
powerful transformation, and so a particular datum transformation to WGS 
84 was picked up, and encoded in the CRS definition. When reading such 
definitions nowadays, we have a dilemna: did the user really meant to 
use the particular transformation that was in TOWGS84[], or was it just 
there because that was the default one. We ere on the side of caution 
(most of time, there are a few exceptions there and there in GDAL), and 
keep the transformation information, which makes that this CRS is 
formally not the official definition, and thus considered as ""custom""

However, for ETRS89, I believe we can safely remove it, since as far as 
I know, there's no better transformation between ETRS89 (which is known 
modeled as a "datum ensemble" by EPSG, meaning any of the 11 ETRF 
realizations) and WGS 84 (itself a datum ensemble) than the 
TOWGS84[0.0,0.0,0.0,0.0,0.0,0.0,0.0], and it is unlikely there will be 
an alternative one in the future, given the dynamic nature of the WGS 84 
datum (maybe I'm speaking too fast. When ETRS89 and WGS 84 coordinates 
will have drifted too far away in the future, maybe there will some 
non-null transformation added in the database, so that users who want to 
transform to a 'past' or 'future' coordinate epoch of WGS 84 can do that 
in a not too bad way.)

(I should not that this .prj file isn't really compliant with the Esri 
dialect of WKT, which is supposed to be used for shapefiles, since 
normally it shouldn't contain TOWGS84 or AUHTORITY code)

Even


Le 27/11/2021 ? 19:13, Pedro Ven?ncio a ?crit?:
> Hi all,
>
> I'm seeing that QGIS 3.16 / 3.22 does not recognize the CRS of 
> specific layers generated by GeoServer, but the old QGIS 2.18.28 
> recognize.
>
> For instance, this shapefile: https://si.icnf.pt/shp/rnap 
> <https://si.icnf.pt/shp/rnap>
>
> Checking ogrinfo in different versions:
>
> ogrinfo --version
> GDAL 2.4.0, released 2018/12/14 (Used by QGIS 2.18.28)
>
> ogrinfo -al rnap.shp
> INFO: Open of `rnap.shp'
> ? ? ? using driver `ESRI Shapefile' successful.
>
> Layer name: rnap
> Metadata:
> ? DBF_DATE_LAST_UPDATE=1921-11-27
> Geometry: Polygon
> Feature Count: 48
> Extent: (-123561.201500, -300415.400000) - (162054.118700, 268136.980100)
> Layer SRS WKT:
> PROJCS["ETRS89 / Portugal TM06",
> ? ? GEOGCS["ETRS89",
> ? ? ? ? DATUM["European Terrestrial Reference System 1989",
> ? ? ? ? ? ? SPHEROID["GRS 1980",6378137.0,298.257222101,
> ? ? ? ? ? ? ? ? AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ? TOWGS84[0.0,0.0,0.0,0.0,0.0,0.0,0.0],
> ? ? ? ? ? ? AUTHORITY["EPSG","6258"]],
> ? ? ? ? PRIMEM["Greenwich",0.0,
> ? ? ? ? ? ? AUTHORITY["EPSG","8901"]],
> ? ? ? ? UNIT["degree",0.017453292519943295],
> ? ? ? ? AXIS["Geodetic longitude",EAST],
> ? ? ? ? AXIS["Geodetic latitude",NORTH],
> ? ? ? ? AUTHORITY["EPSG","4258"]],
> ? ? PROJECTION["Transverse_Mercator",
> ? ? ? ? AUTHORITY["EPSG","9807"]],
> ? ? PARAMETER["central_meridian",-8.133108333333334],
> ? ? PARAMETER["latitude_of_origin",39.66825833333334],
> ? ? PARAMETER["scale_factor",1.0],
> ? ? PARAMETER["false_easting",0.0],
> ? ? PARAMETER["false_northing",0.0],
> ? ? UNIT["m",1.0],
> ? ? AXIS["Easting",EAST],
> ? ? AXIS["Northing",NORTH],
> ? ? AUTHORITY["EPSG","3763"]]
> nome_ap: String (254.0)
> classifica: String (254.0)
> publica1: String (254.0)
> publica2: String (254.0)
> jurisdicao: String (254.0)
> area_ha: Real (33.15)
> sigla: String (254.0)
>
>
>
> ogrinfo --version
> GDAL 3.4.0, released 2021/11/04 (Used by QGIS 3.22)
>
> ogrinfo -al rnap.shp
> INFO: Open of `rnap.shp'
> ? ? ? using driver `ESRI Shapefile' successful.
>
> Layer name: rnap
> Metadata:
> ? DBF_DATE_LAST_UPDATE=1920-08-17
> Geometry: Polygon
> Feature Count: 48
> Extent: (-123561.201500, -300415.400000) - (162054.118700, 268136.980100)
> Layer SRS WKT:
> BOUNDCRS[
> ? ? SOURCECRS[
> ? ? ? ? PROJCRS["ETRS89 / Portugal TM06",
> ? ? ? ? ? ? BASEGEOGCRS["ETRS89",
> ? ? ? ? ? ? ? ? ENSEMBLE["European Terrestrial Reference System 1989 
> ensemble",
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1989"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1990"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1991"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1992"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1993"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1994"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1996"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1997"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 2000"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 2005"],
> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 2014"],
> ? ? ? ? ? ? ? ? ? ? ELLIPSOID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1]],
> ? ? ? ? ? ? ? ? ? ? ENSEMBLEACCURACY[0.1]],
> ? ? ? ? ? ? ? ? PRIMEM["Greenwich",0,
> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433]],
> ? ? ? ? ? ? ? ? ID["EPSG",4258]],
> ? ? ? ? ? ? CONVERSION["Portugual TM06",
> ? ? ? ? ? ? ? ? METHOD["Transverse Mercator",
> ? ? ? ? ? ? ? ? ? ? ID["EPSG",9807]],
> ? ? ? ? ? ? ? ? PARAMETER["Latitude of natural origin",39.6682583333333,
> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433],
> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8801]],
> ? ? ? ? ? ? ? ? PARAMETER["Longitude of natural origin",-8.13310833333333,
> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433],
> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8802]],
> ? ? ? ? ? ? ? ? PARAMETER["Scale factor at natural origin",1,
> ? ? ? ? ? ? ? ? ? ? SCALEUNIT["unity",1],
> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8805]],
> ? ? ? ? ? ? ? ? PARAMETER["False easting",0,
> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1],
> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8806]],
> ? ? ? ? ? ? ? ? PARAMETER["False northing",0,
> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1],
> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8807]]],
> ? ? ? ? ? ? CS[Cartesian,2],
> ? ? ? ? ? ? ? ? AXIS["easting (X)",east,
> ? ? ? ? ? ? ? ? ? ? ORDER[1],
> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1]],
> ? ? ? ? ? ? ? ? AXIS["northing (Y)",north,
> ? ? ? ? ? ? ? ? ? ? ORDER[2],
> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1]],
> ? ? ? ? ? ? USAGE[
> ? ? ? ? ? ? ? ? SCOPE["Topographic mapping (medium scale)."],
> ? ? ? ? ? ? ? ? AREA["Portugal - mainland - onshore."],
> ? ? ? ? ? ? ? ? BBOX[36.95,-9.56,42.16,-6.19]],
> ? ? ? ? ? ? ID["EPSG",3763]]],
> ? ? TARGETCRS[
> ? ? ? ? GEOGCRS["WGS 84",
> ? ? ? ? ? ? DATUM["World Geodetic System 1984",
> ? ? ? ? ? ? ? ? ELLIPSOID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1]]],
> ? ? ? ? ? ? PRIMEM["Greenwich",0,
> ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433]],
> ? ? ? ? ? ? CS[ellipsoidal,2],
> ? ? ? ? ? ? ? ? AXIS["latitude",north,
> ? ? ? ? ? ? ? ? ? ? ORDER[1],
> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433]],
> ? ? ? ? ? ? ? ? AXIS["longitude",east,
> ? ? ? ? ? ? ? ? ? ? ORDER[2],
> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433]],
> ? ? ? ? ? ? ID["EPSG",4326]]],
> ? ? ABRIDGEDTRANSFORMATION["ETRS89 to WGS 84 (1)",
> ? ? ? ? VERSION["EPSG-eur"],
> ? ? ? ? METHOD["Geocentric translations (geog2D domain)",
> ? ? ? ? ? ? ID["EPSG",9603]],
> ? ? ? ? PARAMETER["X-axis translation",0,
> ? ? ? ? ? ? ID["EPSG",8605]],
> ? ? ? ? PARAMETER["Y-axis translation",0,
> ? ? ? ? ? ? ID["EPSG",8606]],
> ? ? ? ? PARAMETER["Z-axis translation",0,
> ? ? ? ? ? ? ID["EPSG",8607]],
> ? ? ? ? USAGE[
> ? ? ? ? ? ? SCOPE["(null/copy) Approximation for medium and low 
> accuracy applications assuming equality between plate-fixed static and 
> earth-fixed dynamic CRSs, ignoring static/dynamic CRS differences."],
> ? ? ? ? ? ? AREA["Europe - onshore and offshore: Albania; Andorra; 
> Austria; Belgium; Bosnia and Herzegovina; Bulgaria; Croatia; Cyprus; 
> Czechia; Denmark; Estonia; Faroe Islands; Finland; France; Germany; 
> Gibraltar; Greece; Hungary; Ireland; Italy; Kosovo; Latvia; 
> Liechtenstein; Lithuania; Luxembourg; Malta; Moldova; Monaco; 
> Montenegro; Netherlands; North Macedonia; Norway including Svalbard 
> and Jan Mayen; Poland; Portugal; Romania; San Marino; Serbia; 
> Slovakia; Slovenia; Spain; Sweden; Switzerland; United Kingdom (UK) 
> including Channel Islands and Isle of Man; Vatican City State."],
> ? ? ? ? ? ? BBOX[32.88,-16.1,84.73,40.18]],
> ? ? ? ? ID["EPSG",1149],
> ? ? ? ? REMARK["ETRS89 and WGS 84 are realizations of ITRS coincident 
> to within 1 metre. This transformation has an accuracy equal to the 
> coincidence figure."]]]
> Data axis to CRS axis mapping: 1,2
> nome_ap: String (254.0)
> classifica: String (254.0)
> publica1: String (254.0)
> publica2: String (254.0)
> jurisdicao: String (254.0)
> area_ha: Real (33.15)
> sigla: String (254.0)
>
> The differences between rnap.prj (left) and https://epsg.io/3763 
> <https://epsg.io/3763> (right) are few:
>
> https://cld.pt/dl/download/5d9b5324-b28a-4654-a8f7-365c7cc39c10/rnap_prj.png 
> <https://cld.pt/dl/download/5d9b5324-b28a-4654-a8f7-365c7cc39c10/rnap_prj.png>
>
> The GeoServer version that is generating this layer is old.
>
> So, could this be a bug?
>
> Thanks!
>
> Best regards,
> Pedro
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211127/c22bf94e/attachment.html>

From even.rouault at spatialys.com  Sat Nov 27 11:41:01 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Nov 2021 20:41:01 +0100
Subject: [QGIS-Developer] QGIS does not recognize CRS of specific layers
 generated by GeoServer
In-Reply-To: <fd4c2ac3-4a4f-be30-f97c-27e9dc670462@spatialys.com>
References: <CAMCJChu3R6kCGM4Er=cqoDdwwegt0=RPuORhfaEUAk4u7FRHdw@mail.gmail.com>
 <fd4c2ac3-4a4f-be30-f97c-27e9dc670462@spatialys.com>
Message-ID: <6c2fcbe8-8faa-5fef-f9ef-d223988c4152@spatialys.com>

I meant "Pedro", sorry for the typo.

Le 27/11/2021 ? 20:38, Even Rouault a ?crit?:
>
> Petro,
>
> I've queued https://github.com/OSGeo/gdal/pull/4908 which will "fix" 
> that particular case (more precisely anything based on ETRS89). I'm 
> not super satisfied with this, and I believe there's no miracle 
> solution for all potential use cases. What GDAL returns in both 2.4.0 
> and 3.4.0 is actually pretty much the same object, despite the 
> different representation (WKT1 vs WKT2). The root cause of the issue 
> is with the TOWGS84[] node. Those nodes are not part of CRS 
> definitions. They date back to the time where the GDAL & PROJ stack 
> wasn't capable of more powerful transformation, and so a particular 
> datum transformation to WGS 84 was picked up, and encoded in the CRS 
> definition. When reading such definitions nowadays, we have a dilemna: 
> did the user really meant to use the particular transformation that 
> was in TOWGS84[], or was it just there because that was the default 
> one. We ere on the side of caution (most of time, there are a few 
> exceptions there and there in GDAL), and keep the transformation 
> information, which makes that this CRS is formally not the official 
> definition, and thus considered as ""custom""
>
> However, for ETRS89, I believe we can safely remove it, since as far 
> as I know, there's no better transformation between ETRS89 (which is 
> known modeled as a "datum ensemble" by EPSG, meaning any of the 11 
> ETRF realizations) and WGS 84 (itself a datum ensemble) than the 
> TOWGS84[0.0,0.0,0.0,0.0,0.0,0.0,0.0], and it is unlikely there will be 
> an alternative one in the future, given the dynamic nature of the WGS 
> 84 datum (maybe I'm speaking too fast. When ETRS89 and WGS 84 
> coordinates will have drifted too far away in the future, maybe there 
> will some non-null transformation added in the database, so that users 
> who want to transform to a 'past' or 'future' coordinate epoch of WGS 
> 84 can do that in a not too bad way.)
>
> (I should not that this .prj file isn't really compliant with the Esri 
> dialect of WKT, which is supposed to be used for shapefiles, since 
> normally it shouldn't contain TOWGS84 or AUHTORITY code)
>
> Even
>
>
> Le 27/11/2021 ? 19:13, Pedro Ven?ncio a ?crit?:
>> Hi all,
>>
>> I'm seeing that QGIS 3.16 / 3.22 does not recognize the CRS of 
>> specific layers generated by GeoServer, but the old QGIS 2.18.28 
>> recognize.
>>
>> For instance, this shapefile: https://si.icnf.pt/shp/rnap 
>> <https://si.icnf.pt/shp/rnap>
>>
>> Checking ogrinfo in different versions:
>>
>> ogrinfo --version
>> GDAL 2.4.0, released 2018/12/14 (Used by QGIS 2.18.28)
>>
>> ogrinfo -al rnap.shp
>> INFO: Open of `rnap.shp'
>> ? ? ? using driver `ESRI Shapefile' successful.
>>
>> Layer name: rnap
>> Metadata:
>> ? DBF_DATE_LAST_UPDATE=1921-11-27
>> Geometry: Polygon
>> Feature Count: 48
>> Extent: (-123561.201500, -300415.400000) - (162054.118700, 268136.980100)
>> Layer SRS WKT:
>> PROJCS["ETRS89 / Portugal TM06",
>> ? ? GEOGCS["ETRS89",
>> ? ? ? ? DATUM["European Terrestrial Reference System 1989",
>> ? ? ? ? ? ? SPHEROID["GRS 1980",6378137.0,298.257222101,
>> ? ? ? ? ? ? ? ? AUTHORITY["EPSG","7019"]],
>> ? ? ? ? ? ? TOWGS84[0.0,0.0,0.0,0.0,0.0,0.0,0.0],
>> ? ? ? ? ? ? AUTHORITY["EPSG","6258"]],
>> ? ? ? ? PRIMEM["Greenwich",0.0,
>> ? ? ? ? ? ? AUTHORITY["EPSG","8901"]],
>> ? ? ? ? UNIT["degree",0.017453292519943295],
>> ? ? ? ? AXIS["Geodetic longitude",EAST],
>> ? ? ? ? AXIS["Geodetic latitude",NORTH],
>> ? ? ? ? AUTHORITY["EPSG","4258"]],
>> ? ? PROJECTION["Transverse_Mercator",
>> ? ? ? ? AUTHORITY["EPSG","9807"]],
>> ? ? PARAMETER["central_meridian",-8.133108333333334],
>> ? ? PARAMETER["latitude_of_origin",39.66825833333334],
>> ? ? PARAMETER["scale_factor",1.0],
>> ? ? PARAMETER["false_easting",0.0],
>> ? ? PARAMETER["false_northing",0.0],
>> ? ? UNIT["m",1.0],
>> ? ? AXIS["Easting",EAST],
>> ? ? AXIS["Northing",NORTH],
>> ? ? AUTHORITY["EPSG","3763"]]
>> nome_ap: String (254.0)
>> classifica: String (254.0)
>> publica1: String (254.0)
>> publica2: String (254.0)
>> jurisdicao: String (254.0)
>> area_ha: Real (33.15)
>> sigla: String (254.0)
>>
>>
>>
>> ogrinfo --version
>> GDAL 3.4.0, released 2021/11/04 (Used by QGIS 3.22)
>>
>> ogrinfo -al rnap.shp
>> INFO: Open of `rnap.shp'
>> ? ? ? using driver `ESRI Shapefile' successful.
>>
>> Layer name: rnap
>> Metadata:
>> ? DBF_DATE_LAST_UPDATE=1920-08-17
>> Geometry: Polygon
>> Feature Count: 48
>> Extent: (-123561.201500, -300415.400000) - (162054.118700, 268136.980100)
>> Layer SRS WKT:
>> BOUNDCRS[
>> ? ? SOURCECRS[
>> ? ? ? ? PROJCRS["ETRS89 / Portugal TM06",
>> ? ? ? ? ? ? BASEGEOGCRS["ETRS89",
>> ? ? ? ? ? ? ? ? ENSEMBLE["European Terrestrial Reference System 1989 
>> ensemble",
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1989"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1990"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1991"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1992"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1993"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1994"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1996"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 1997"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 2000"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 2005"],
>> ? ? ? ? ? ? ? ? ? ? MEMBER["European Terrestrial Reference Frame 2014"],
>> ? ? ? ? ? ? ? ? ? ? ELLIPSOID["GRS 1980",6378137,298.257222101,
>> ? ? ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1]],
>> ? ? ? ? ? ? ? ? ? ? ENSEMBLEACCURACY[0.1]],
>> ? ? ? ? ? ? ? ? PRIMEM["Greenwich",0,
>> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433]],
>> ? ? ? ? ? ? ? ? ID["EPSG",4258]],
>> ? ? ? ? ? ? CONVERSION["Portugual TM06",
>> ? ? ? ? ? ? ? ? METHOD["Transverse Mercator",
>> ? ? ? ? ? ? ? ? ? ? ID["EPSG",9807]],
>> ? ? ? ? ? ? ? ? PARAMETER["Latitude of natural origin",39.6682583333333,
>> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433],
>> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8801]],
>> ? ? ? ? ? ? ? ? PARAMETER["Longitude of natural 
>> origin",-8.13310833333333,
>> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433],
>> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8802]],
>> ? ? ? ? ? ? ? ? PARAMETER["Scale factor at natural origin",1,
>> ? ? ? ? ? ? ? ? ? ? SCALEUNIT["unity",1],
>> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8805]],
>> ? ? ? ? ? ? ? ? PARAMETER["False easting",0,
>> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1],
>> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8806]],
>> ? ? ? ? ? ? ? ? PARAMETER["False northing",0,
>> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1],
>> ? ? ? ? ? ? ? ? ? ? ID["EPSG",8807]]],
>> ? ? ? ? ? ? CS[Cartesian,2],
>> ? ? ? ? ? ? ? ? AXIS["easting (X)",east,
>> ? ? ? ? ? ? ? ? ? ? ORDER[1],
>> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1]],
>> ? ? ? ? ? ? ? ? AXIS["northing (Y)",north,
>> ? ? ? ? ? ? ? ? ? ? ORDER[2],
>> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1]],
>> ? ? ? ? ? ? USAGE[
>> ? ? ? ? ? ? ? ? SCOPE["Topographic mapping (medium scale)."],
>> ? ? ? ? ? ? ? ? AREA["Portugal - mainland - onshore."],
>> ? ? ? ? ? ? ? ? BBOX[36.95,-9.56,42.16,-6.19]],
>> ? ? ? ? ? ? ID["EPSG",3763]]],
>> ? ? TARGETCRS[
>> ? ? ? ? GEOGCRS["WGS 84",
>> ? ? ? ? ? ? DATUM["World Geodetic System 1984",
>> ? ? ? ? ? ? ? ? ELLIPSOID["WGS 84",6378137,298.257223563,
>> ? ? ? ? ? ? ? ? ? ? LENGTHUNIT["metre",1]]],
>> ? ? ? ? ? ? PRIMEM["Greenwich",0,
>> ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433]],
>> ? ? ? ? ? ? CS[ellipsoidal,2],
>> ? ? ? ? ? ? ? ? AXIS["latitude",north,
>> ? ? ? ? ? ? ? ? ? ? ORDER[1],
>> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433]],
>> ? ? ? ? ? ? ? ? AXIS["longitude",east,
>> ? ? ? ? ? ? ? ? ? ? ORDER[2],
>> ? ? ? ? ? ? ? ? ? ? ANGLEUNIT["degree",0.0174532925199433]],
>> ? ? ? ? ? ? ID["EPSG",4326]]],
>> ? ? ABRIDGEDTRANSFORMATION["ETRS89 to WGS 84 (1)",
>> ? ? ? ? VERSION["EPSG-eur"],
>> ? ? ? ? METHOD["Geocentric translations (geog2D domain)",
>> ? ? ? ? ? ? ID["EPSG",9603]],
>> ? ? ? ? PARAMETER["X-axis translation",0,
>> ? ? ? ? ? ? ID["EPSG",8605]],
>> ? ? ? ? PARAMETER["Y-axis translation",0,
>> ? ? ? ? ? ? ID["EPSG",8606]],
>> ? ? ? ? PARAMETER["Z-axis translation",0,
>> ? ? ? ? ? ? ID["EPSG",8607]],
>> ? ? ? ? USAGE[
>> ? ? ? ? ? ? SCOPE["(null/copy) Approximation for medium and low 
>> accuracy applications assuming equality between plate-fixed static 
>> and earth-fixed dynamic CRSs, ignoring static/dynamic CRS differences."],
>> ? ? ? ? ? ? AREA["Europe - onshore and offshore: Albania; Andorra; 
>> Austria; Belgium; Bosnia and Herzegovina; Bulgaria; Croatia; Cyprus; 
>> Czechia; Denmark; Estonia; Faroe Islands; Finland; France; Germany; 
>> Gibraltar; Greece; Hungary; Ireland; Italy; Kosovo; Latvia; 
>> Liechtenstein; Lithuania; Luxembourg; Malta; Moldova; Monaco; 
>> Montenegro; Netherlands; North Macedonia; Norway including Svalbard 
>> and Jan Mayen; Poland; Portugal; Romania; San Marino; Serbia; 
>> Slovakia; Slovenia; Spain; Sweden; Switzerland; United Kingdom (UK) 
>> including Channel Islands and Isle of Man; Vatican City State."],
>> ? ? ? ? ? ? BBOX[32.88,-16.1,84.73,40.18]],
>> ? ? ? ? ID["EPSG",1149],
>> ? ? ? ? REMARK["ETRS89 and WGS 84 are realizations of ITRS coincident 
>> to within 1 metre. This transformation has an accuracy equal to the 
>> coincidence figure."]]]
>> Data axis to CRS axis mapping: 1,2
>> nome_ap: String (254.0)
>> classifica: String (254.0)
>> publica1: String (254.0)
>> publica2: String (254.0)
>> jurisdicao: String (254.0)
>> area_ha: Real (33.15)
>> sigla: String (254.0)
>>
>> The differences between rnap.prj (left) and https://epsg.io/3763 
>> <https://epsg.io/3763> (right) are few:
>>
>> https://cld.pt/dl/download/5d9b5324-b28a-4654-a8f7-365c7cc39c10/rnap_prj.png 
>> <https://cld.pt/dl/download/5d9b5324-b28a-4654-a8f7-365c7cc39c10/rnap_prj.png>
>>
>> The GeoServer version that is generating this layer is old.
>>
>> So, could this be a bug?
>>
>> Thanks!
>>
>> Best regards,
>> Pedro
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211127/d924f1c5/attachment-0001.html>

From pedrongvenancio at gmail.com  Sat Nov 27 12:53:34 2021
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Sat, 27 Nov 2021 20:53:34 +0000
Subject: [QGIS-Developer] QGIS does not recognize CRS of specific layers
 generated by GeoServer
In-Reply-To: <fd4c2ac3-4a4f-be30-f97c-27e9dc670462@spatialys.com>
References: <CAMCJChu3R6kCGM4Er=cqoDdwwegt0=RPuORhfaEUAk4u7FRHdw@mail.gmail.com>
 <fd4c2ac3-4a4f-be30-f97c-27e9dc670462@spatialys.com>
Message-ID: <CAMCJChuWawt_NnVuB3HrO6HYYfZih=X7L+tNxMsMefWWx=5zHA@mail.gmail.com>

Wow, thank you very much Even! I think this solution is just fine!

Thanks again!

Best regards,
Pedro


A s?bado, 27/11/2021, 19:38, Even Rouault <even.rouault at spatialys.com>
escreveu:

> Petro,
>
> I've queued https://github.com/OSGeo/gdal/pull/4908 which will "fix" that
> particular case (more precisely anything based on ETRS89). I'm not super
> satisfied with this, and I believe there's no miracle solution for all
> potential use cases. What GDAL returns in both 2.4.0 and 3.4.0 is actually
> pretty much the same object, despite the different representation (WKT1 vs
> WKT2). The root cause of the issue is with the TOWGS84[] node. Those nodes
> are not part of CRS definitions. They date back to the time where the GDAL
> & PROJ stack wasn't capable of more powerful transformation, and so a
> particular datum transformation to WGS 84 was picked up, and encoded in the
> CRS definition. When reading such definitions nowadays, we have a dilemna:
> did the user really meant to use the particular transformation that was in
> TOWGS84[], or was it just there because that was the default one. We ere on
> the side of caution (most of time, there are a few exceptions there and
> there in GDAL), and keep the transformation information, which makes that
> this CRS is formally not the official definition, and thus considered as
> ""custom""
>
> However, for ETRS89, I believe we can safely remove it, since as far as I
> know, there's no better transformation between ETRS89 (which is known
> modeled as a "datum ensemble" by EPSG, meaning any of the 11 ETRF
> realizations) and WGS 84 (itself a datum ensemble) than the
> TOWGS84[0.0,0.0,0.0,0.0,0.0,0.0,0.0], and it is unlikely there will be an
> alternative one in the future, given the dynamic nature of the WGS 84 datum
> (maybe I'm speaking too fast. When ETRS89 and WGS 84 coordinates will have
> drifted too far away in the future, maybe there will some non-null
> transformation added in the database, so that users who want to transform
> to a 'past' or 'future' coordinate epoch of WGS 84 can do that in a not too
> bad way.)
>
> (I should not that this .prj file isn't really compliant with the Esri
> dialect of WKT, which is supposed to be used for shapefiles, since normally
> it shouldn't contain TOWGS84 or AUHTORITY code)
>
> Even
>
>
> Le 27/11/2021 ? 19:13, Pedro Ven?ncio a ?crit :
>
> Hi all,
>
> I'm seeing that QGIS 3.16 / 3.22 does not recognize the CRS of specific
> layers generated by GeoServer, but the old QGIS 2.18.28 recognize.
>
> For instance, this shapefile: https://si.icnf.pt/shp/rnap
>
> Checking ogrinfo in different versions:
>
> ogrinfo --version
> GDAL 2.4.0, released 2018/12/14 (Used by QGIS 2.18.28)
>
> ogrinfo -al rnap.shp
> INFO: Open of `rnap.shp'
>       using driver `ESRI Shapefile' successful.
>
> Layer name: rnap
> Metadata:
>   DBF_DATE_LAST_UPDATE=1921-11-27
> Geometry: Polygon
> Feature Count: 48
> Extent: (-123561.201500, -300415.400000) - (162054.118700, 268136.980100)
> Layer SRS WKT:
> PROJCS["ETRS89 / Portugal TM06",
>     GEOGCS["ETRS89",
>         DATUM["European Terrestrial Reference System 1989",
>             SPHEROID["GRS 1980",6378137.0,298.257222101,
>                 AUTHORITY["EPSG","7019"]],
>             TOWGS84[0.0,0.0,0.0,0.0,0.0,0.0,0.0],
>             AUTHORITY["EPSG","6258"]],
>         PRIMEM["Greenwich",0.0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.017453292519943295],
>         AXIS["Geodetic longitude",EAST],
>         AXIS["Geodetic latitude",NORTH],
>         AUTHORITY["EPSG","4258"]],
>     PROJECTION["Transverse_Mercator",
>         AUTHORITY["EPSG","9807"]],
>     PARAMETER["central_meridian",-8.133108333333334],
>     PARAMETER["latitude_of_origin",39.66825833333334],
>     PARAMETER["scale_factor",1.0],
>     PARAMETER["false_easting",0.0],
>     PARAMETER["false_northing",0.0],
>     UNIT["m",1.0],
>     AXIS["Easting",EAST],
>     AXIS["Northing",NORTH],
>     AUTHORITY["EPSG","3763"]]
> nome_ap: String (254.0)
> classifica: String (254.0)
> publica1: String (254.0)
> publica2: String (254.0)
> jurisdicao: String (254.0)
> area_ha: Real (33.15)
> sigla: String (254.0)
>
>
>
> ogrinfo --version
> GDAL 3.4.0, released 2021/11/04 (Used by QGIS 3.22)
>
> ogrinfo -al rnap.shp
> INFO: Open of `rnap.shp'
>       using driver `ESRI Shapefile' successful.
>
> Layer name: rnap
> Metadata:
>   DBF_DATE_LAST_UPDATE=1920-08-17
> Geometry: Polygon
> Feature Count: 48
> Extent: (-123561.201500, -300415.400000) - (162054.118700, 268136.980100)
> Layer SRS WKT:
> BOUNDCRS[
>     SOURCECRS[
>         PROJCRS["ETRS89 / Portugal TM06",
>             BASEGEOGCRS["ETRS89",
>                 ENSEMBLE["European Terrestrial Reference System 1989
> ensemble",
>                     MEMBER["European Terrestrial Reference Frame 1989"],
>                     MEMBER["European Terrestrial Reference Frame 1990"],
>                     MEMBER["European Terrestrial Reference Frame 1991"],
>                     MEMBER["European Terrestrial Reference Frame 1992"],
>                     MEMBER["European Terrestrial Reference Frame 1993"],
>                     MEMBER["European Terrestrial Reference Frame 1994"],
>                     MEMBER["European Terrestrial Reference Frame 1996"],
>                     MEMBER["European Terrestrial Reference Frame 1997"],
>                     MEMBER["European Terrestrial Reference Frame 2000"],
>                     MEMBER["European Terrestrial Reference Frame 2005"],
>                     MEMBER["European Terrestrial Reference Frame 2014"],
>                     ELLIPSOID["GRS 1980",6378137,298.257222101,
>                         LENGTHUNIT["metre",1]],
>                     ENSEMBLEACCURACY[0.1]],
>                 PRIMEM["Greenwich",0,
>                     ANGLEUNIT["degree",0.0174532925199433]],
>                 ID["EPSG",4258]],
>             CONVERSION["Portugual TM06",
>                 METHOD["Transverse Mercator",
>                     ID["EPSG",9807]],
>                 PARAMETER["Latitude of natural origin",39.6682583333333,
>                     ANGLEUNIT["degree",0.0174532925199433],
>                     ID["EPSG",8801]],
>                 PARAMETER["Longitude of natural origin",-8.13310833333333,
>                     ANGLEUNIT["degree",0.0174532925199433],
>                     ID["EPSG",8802]],
>                 PARAMETER["Scale factor at natural origin",1,
>                     SCALEUNIT["unity",1],
>                     ID["EPSG",8805]],
>                 PARAMETER["False easting",0,
>                     LENGTHUNIT["metre",1],
>                     ID["EPSG",8806]],
>                 PARAMETER["False northing",0,
>                     LENGTHUNIT["metre",1],
>                     ID["EPSG",8807]]],
>             CS[Cartesian,2],
>                 AXIS["easting (X)",east,
>                     ORDER[1],
>                     LENGTHUNIT["metre",1]],
>                 AXIS["northing (Y)",north,
>                     ORDER[2],
>                     LENGTHUNIT["metre",1]],
>             USAGE[
>                 SCOPE["Topographic mapping (medium scale)."],
>                 AREA["Portugal - mainland - onshore."],
>                 BBOX[36.95,-9.56,42.16,-6.19]],
>             ID["EPSG",3763]]],
>     TARGETCRS[
>         GEOGCRS["WGS 84",
>             DATUM["World Geodetic System 1984",
>                 ELLIPSOID["WGS 84",6378137,298.257223563,
>                     LENGTHUNIT["metre",1]]],
>             PRIMEM["Greenwich",0,
>                 ANGLEUNIT["degree",0.0174532925199433]],
>             CS[ellipsoidal,2],
>                 AXIS["latitude",north,
>                     ORDER[1],
>                     ANGLEUNIT["degree",0.0174532925199433]],
>                 AXIS["longitude",east,
>                     ORDER[2],
>                     ANGLEUNIT["degree",0.0174532925199433]],
>             ID["EPSG",4326]]],
>     ABRIDGEDTRANSFORMATION["ETRS89 to WGS 84 (1)",
>         VERSION["EPSG-eur"],
>         METHOD["Geocentric translations (geog2D domain)",
>             ID["EPSG",9603]],
>         PARAMETER["X-axis translation",0,
>             ID["EPSG",8605]],
>         PARAMETER["Y-axis translation",0,
>             ID["EPSG",8606]],
>         PARAMETER["Z-axis translation",0,
>             ID["EPSG",8607]],
>         USAGE[
>             SCOPE["(null/copy) Approximation for medium and low accuracy
> applications assuming equality between plate-fixed static and earth-fixed
> dynamic CRSs, ignoring static/dynamic CRS differences."],
>             AREA["Europe - onshore and offshore: Albania; Andorra;
> Austria; Belgium; Bosnia and Herzegovina; Bulgaria; Croatia; Cyprus;
> Czechia; Denmark; Estonia; Faroe Islands; Finland; France; Germany;
> Gibraltar; Greece; Hungary; Ireland; Italy; Kosovo; Latvia; Liechtenstein;
> Lithuania; Luxembourg; Malta; Moldova; Monaco; Montenegro; Netherlands;
> North Macedonia; Norway including Svalbard and Jan Mayen; Poland; Portugal;
> Romania; San Marino; Serbia; Slovakia; Slovenia; Spain; Sweden;
> Switzerland; United Kingdom (UK) including Channel Islands and Isle of Man;
> Vatican City State."],
>             BBOX[32.88,-16.1,84.73,40.18]],
>         ID["EPSG",1149],
>         REMARK["ETRS89 and WGS 84 are realizations of ITRS coincident to
> within 1 metre. This transformation has an accuracy equal to the
> coincidence figure."]]]
> Data axis to CRS axis mapping: 1,2
> nome_ap: String (254.0)
> classifica: String (254.0)
> publica1: String (254.0)
> publica2: String (254.0)
> jurisdicao: String (254.0)
> area_ha: Real (33.15)
> sigla: String (254.0)
>
> The differences between rnap.prj (left) and https://epsg.io/3763 (right)
> are few:
>
>
> https://cld.pt/dl/download/5d9b5324-b28a-4654-a8f7-365c7cc39c10/rnap_prj.png
>
> The GeoServer version that is generating this layer is old.
>
> So, could this be a bug?
>
> Thanks!
>
> Best regards,
> Pedro
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211127/69e92c86/attachment-0001.html>

From senhor.neto at gmail.com  Tue Nov 30 16:30:21 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Wed, 1 Dec 2021 00:30:21 +0000
Subject: [QGIS-Developer] py3_env bat file on osgeo4w install?
Message-ID: <CA+H0G_Hs=Pd60UsNw2-_qdTP4tkFORqrjX4GrCnMzOhwzN-sOQ@mail.gmail.com>

Hi,

For windows users, there used to be a bat file called py3_env.bat that
would set up the necessary path variables so that python scripts can find
QGIS packages.

With the OSGeo V2 V2 installer, I can't seem to find it.

Am I missing something?

Thanks,

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211201/3097d328/attachment.html>

From nyall.dawson at gmail.com  Tue Nov 30 16:33:44 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 1 Dec 2021 10:33:44 +1000
Subject: [QGIS-Developer] py3_env bat file on osgeo4w install?
In-Reply-To: <CA+H0G_Hs=Pd60UsNw2-_qdTP4tkFORqrjX4GrCnMzOhwzN-sOQ@mail.gmail.com>
References: <CA+H0G_Hs=Pd60UsNw2-_qdTP4tkFORqrjX4GrCnMzOhwzN-sOQ@mail.gmail.com>
Message-ID: <CAB28AsgGiEp7VRD6cLvkf4pvo5boEz6mQGVSeuAqP0ewKCu1Dw@mail.gmail.com>

On Wed, 1 Dec 2021 at 10:30, Alexandre Neto <senhor.neto at gmail.com> wrote:
>
> Hi,
>
> For windows users, there used to be a bat file called py3_env.bat that would set up the necessary path variables so that python scripts can find QGIS packages.
>
> With the OSGeo V2 V2 installer, I can't seem to find it.
>
> Am I missing something?


I believe it's no longer required, because osgeo v2 ONLY has python 3
(no python 2).

Nyall

>
>
> Thanks,
>
> Alexandre Neto
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From senhor.neto at gmail.com  Tue Nov 30 18:29:18 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Wed, 1 Dec 2021 02:29:18 +0000
Subject: [QGIS-Developer] py3_env bat file on osgeo4w install?
In-Reply-To: <CAB28AsgGiEp7VRD6cLvkf4pvo5boEz6mQGVSeuAqP0ewKCu1Dw@mail.gmail.com>
References: <CA+H0G_Hs=Pd60UsNw2-_qdTP4tkFORqrjX4GrCnMzOhwzN-sOQ@mail.gmail.com>
 <CAB28AsgGiEp7VRD6cLvkf4pvo5boEz6mQGVSeuAqP0ewKCu1Dw@mail.gmail.com>
Message-ID: <CA+H0G_EabHMjirAxGzUQE9HF9EMh6k7zEZOHeCf6T7NDFU2Thg@mail.gmail.com>

Nyall, you are right. that is no longer needed.

Moreover, I was wrongly expecting that that py3_env.bat also set up
PYTHONPATH to include the %OSGEO_ROOT%apps/qgis/python folder, which never
was the case even in osgeo4w v1

Thanks,

Alexandre

On Wed, Dec 1, 2021 at 12:33 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Wed, 1 Dec 2021 at 10:30, Alexandre Neto <senhor.neto at gmail.com> wrote:
> >
> > Hi,
> >
> > For windows users, there used to be a bat file called py3_env.bat that
> would set up the necessary path variables so that python scripts can find
> QGIS packages.
> >
> > With the OSGeo V2 V2 installer, I can't seem to find it.
> >
> > Am I missing something?
>
>
> I believe it's no longer required, because osgeo v2 ONLY has python 3
> (no python 2).
>
> Nyall
>
> >
> >
> > Thanks,
> >
> > Alexandre Neto
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20211201/77fc4e4c/attachment.html>

