From wonder.sk at gmail.com  Sat May  1 03:33:30 2021
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sat, 1 May 2021 12:33:30 +0200
Subject: [QGIS-Developer] A plea: more volunteers needed for reviewing
 backports
In-Reply-To: <CAB28Asj-JQnyZU1KREAWLdppMX2=AKWgnAKLdiy+6dBHhyOxRQ@mail.gmail.com>
References: <CAB28Asj-JQnyZU1KREAWLdppMX2=AKWgnAKLdiy+6dBHhyOxRQ@mail.gmail.com>
Message-ID: <CAC2XbFf0n+xZMx_nVeNiJA0=c8DCpx_Aj4gzvx+UT6_p34rPpQ@mail.gmail.com>

Hi all

On Tue, Mar 23, 2021 at 12:07 AM Nyall Dawson <nyall.dawson at gmail.com>
wrote:

>
> This is a public plea for more developers who are very familiar with
> different parts of the QGIS codebase to become actively involved in
> backport PR management.
>

(Nyall later clarified this is not only about backport PRs, but all reviews
in general)

Thanks for starting this thread - it is a discussion we definitely need to
have. (And apologies for getting back to this soooo late!)

Pull request reviews are absolutely vital part of the QGIS development, a
chance to get bugs fixed before they even get into QGIS code. Quality
reviews also need a good amount of expertise of the QGIS code - often the
hardest part of a review is not the code included is the pull request, but
figuring out what is missing...

Speaking of myself, I used to review pull requests regularly... But after
several years I have to admit I mostly gave up doing that unless someone
asks me to do a review. The pace of QGIS development is not getting any
slower (which is great!), so there is a constant flow of new pull requests
and doing code reviews regularly is not something I want to do in my free
time... I am happy to do some QGIS work in my free time, but only doing
what I want to do :-)

For a company, strictly business speaking, sparing 15 minutes a day of a
senior developer is roughly equivalent to lost profit of few thousands of
EUR (assuming ~50 hours / year). And many reviews need much more time than
15 minutes... Moreover companies doing QGIS dev are often already donating
to QGIS as sustaining members...

In a mail in the thread it was suggested that companies doing QGIS
development should add extra cost to quotes to accommodate the time for
reviews (of unrelated pull requests). Not sure I agree with that - if a
company had constant income from QGIS dev, that's doable, but if we are
talking about occasional QGIS dev work, that is hard to plan.

>From all of that above, my thinking is that in order to make things
sustainable, regular pull request reviews should be ideally funded by
QGIS.org similarly to how paid bug-fixing sprints work. It is the kind of
project maintainance work that needs to be done, it is not always super fun
and it requires input of someone from a small group of people that are
already donating lots of their free time.

My proposal would be therefore along these lines:
- PSC allocates annual budget to reviews
- core devs interested in participating would indicate their availability
(eligibility may be the same as with paid bug fixing)
- PSC tells devs how much paid time they can spend on reviews
- paid devs should do reviews regularly, e.g. at least twice a week,
ideally every day - not just once a month or so
- paid devs would self-assign themselves to PRs and do reviews
- if a PR is not picked up by anyone e.g. within 3 days, PR queue manager
would assign it to one of the paid devs
- paid devs keep track of their time in a spreadsheet and invoice
(quarterly?) up to the amount they were allocated

I believe this approach should solve our problems:
- remove stress from growing PR queue and reviewer burnout
- get more core devs (who otherwise may not be available) to do reviews
- reduce frustration from devs submitting PRs when their PRs are not
getting attention

In my humble opinion, good quality reviews are even more important than the
regular paid bug fixing or grants. A review that is rushed due to lack of
time may omit important code details, or focus only on code style...

We could start with a relatively small budget and compensate the extremely
valuable work that reviewers (Nyall and others) are already doing.

Regards
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210501/63a2defc/attachment.html>

From regis.haubourg at gmail.com  Sat May  1 03:39:03 2021
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=c3=a9gis_Haubourg?=)
Date: Sat, 1 May 2021 12:39:03 +0200
Subject: [QGIS-Developer] A plea: more volunteers needed for reviewing
 backports
In-Reply-To: <CAC2XbFf0n+xZMx_nVeNiJA0=c8DCpx_Aj4gzvx+UT6_p34rPpQ@mail.gmail.com>
References: <CAB28Asj-JQnyZU1KREAWLdppMX2=AKWgnAKLdiy+6dBHhyOxRQ@mail.gmail.com>
 <CAC2XbFf0n+xZMx_nVeNiJA0=c8DCpx_Aj4gzvx+UT6_p34rPpQ@mail.gmail.com>
Message-ID: <c03b052b-6d19-13fe-4623-94c6b4e7cac9@gmail.com>

Hi all,

I quite agree with Martin here.? That's the only way to avoid the open
source maintainer fatigue syndrom .? As a community member, I think i t
would be fair to have less expenses on Grants and more on the
backgrounnd mandatory tasks like review, packaging and documentation.
And I want to stress out we also need to ensure that at least two
persons can run the tasks, because of this bus-factor thing for sure,
but also because we all deserve vacations sometimes (included looong
ones sometimes)

Best regards

R?gis


On 01/05/2021 12:33, Martin Dobias wrote:
> Hi all
>
> On Tue, Mar 23, 2021 at 12:07 AM Nyall Dawson <nyall.dawson at gmail.com
> <mailto:nyall.dawson at gmail.com>> wrote:
>
>
>     This is a public plea for more developers who are very familiar with
>     different parts of the QGIS codebase to become actively involved in
>     backport PR management.
>
>
> (Nyall later clarified this is not only about backport PRs, but all
> reviews in general)
>
> Thanks for starting this thread - it is a discussion we definitely
> need to have. (And apologies for getting back to this soooo late!)
>
> Pull request reviews are absolutely vital part of the QGIS
> development, a chance to get bugs fixed before they even get into QGIS
> code. Quality reviews also need a good amount of expertise of the QGIS
> code - often the hardest part of a review is not the code included is
> the pull request, but figuring out what is missing...
>
> Speaking of myself, I used to review pull requests regularly... But
> after several years I have to admit I mostly gave up doing that unless
> someone asks me to do a review. The pace of QGIS development is not
> getting any slower (which is great!), so there is a constant flow of
> new pull requests and doing code reviews regularly is not something I
> want to do in my free time... I am happy to do some QGIS work in my
> free time, but only doing what I want to do :-)
>
> For a company, strictly business speaking, sparing 15 minutes a day of
> a senior developer is roughly equivalent to lost profit of few
> thousands of EUR (assuming ~50 hours / year). And many reviews need
> much more time than 15 minutes... Moreover companies doing QGIS dev
> are often already donating to QGIS as sustaining members...
>
> In a mail in the thread it was suggested that companies doing QGIS
> development should add extra cost to quotes to accommodate the time
> for reviews (of unrelated pull requests). Not sure I agree with that -
> if a company had constant income from QGIS dev, that's doable, but if
> we are talking about occasional QGIS dev work, that is hard to plan.
>
> From all of that above, my thinking is that in order to make things
> sustainable, regular pull request reviews should be ideally funded by
> QGIS.org similarly to how paid bug-fixing sprints work. It is the kind
> of project maintainance work that needs to be done, it is not always
> super fun and it requires input of someone from a small group of
> people that are already donating lots of their free time.
>
> My proposal would be therefore along these lines:
> - PSC allocates annual budget to reviews
> - core devs interested in participating would indicate their
> availability (eligibility may be the same as with paid bug fixing)
> - PSC tells devs how much paid time they can spend on reviews
> - paid devs should do reviews regularly, e.g. at least twice a week,
> ideally every day - not just once a month or so
> - paid devs would self-assign themselves to PRs and do reviews
> - if a PR is not picked up by anyone e.g. within 3 days, PR queue
> manager would assign it to one of the paid devs
> - paid devs keep track of their time in a spreadsheet and invoice
> (quarterly?) up to the amount they were allocated
>
> I believe this approach should solve our problems:
> - remove stress from growing PR queue and reviewer burnout
> - get more core devs (who otherwise may not be available) to do reviews
> - reduce frustration from devs submitting PRs when their PRs are not
> getting attention
>
> In my humble opinion, good quality reviews are even more important
> than the regular paid bug fixing or grants. A review that is rushed
> due to lack of time may omit important code details, or focus only on
> code style...
>
> We could start with a relatively small budget and compensate the
> extremely valuable work that reviewers (Nyall and others) are already
> doing.
>
> Regards
> Martin
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210501/5e8669ed/attachment.html>

From apasotti at gmail.com  Sat May  1 04:04:57 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Sat, 1 May 2021 13:04:57 +0200
Subject: [QGIS-Developer] A plea: more volunteers needed for reviewing
 backports
In-Reply-To: <CAC2XbFf0n+xZMx_nVeNiJA0=c8DCpx_Aj4gzvx+UT6_p34rPpQ@mail.gmail.com>
References: <CAB28Asj-JQnyZU1KREAWLdppMX2=AKWgnAKLdiy+6dBHhyOxRQ@mail.gmail.com>
 <CAC2XbFf0n+xZMx_nVeNiJA0=c8DCpx_Aj4gzvx+UT6_p34rPpQ@mail.gmail.com>
Message-ID: <CAL5Q672A3ZheLehpQ7aszjQNBTrx2XYLtw79nqgMD0gXzxuTaA@mail.gmail.com>

Thank you Martin,

I agree with your proposal, this is in line with what we have already
discussed and it sounds a sustainable way to solve the problem, I'm not
sure about the budget though: Andreas will probably have more information
on that.



On Sat, May 1, 2021 at 12:33 PM Martin Dobias <wonder.sk at gmail.com> wrote:

> Hi all
>
> On Tue, Mar 23, 2021 at 12:07 AM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
>
>>
>> This is a public plea for more developers who are very familiar with
>> different parts of the QGIS codebase to become actively involved in
>> backport PR management.
>>
>
> (Nyall later clarified this is not only about backport PRs, but all
> reviews in general)
>
> Thanks for starting this thread - it is a discussion we definitely need to
> have. (And apologies for getting back to this soooo late!)
>
> Pull request reviews are absolutely vital part of the QGIS development, a
> chance to get bugs fixed before they even get into QGIS code. Quality
> reviews also need a good amount of expertise of the QGIS code - often the
> hardest part of a review is not the code included is the pull request, but
> figuring out what is missing...
>
> Speaking of myself, I used to review pull requests regularly... But after
> several years I have to admit I mostly gave up doing that unless someone
> asks me to do a review. The pace of QGIS development is not getting any
> slower (which is great!), so there is a constant flow of new pull requests
> and doing code reviews regularly is not something I want to do in my free
> time... I am happy to do some QGIS work in my free time, but only doing
> what I want to do :-)
>
> For a company, strictly business speaking, sparing 15 minutes a day of a
> senior developer is roughly equivalent to lost profit of few thousands of
> EUR (assuming ~50 hours / year). And many reviews need much more time than
> 15 minutes... Moreover companies doing QGIS dev are often already donating
> to QGIS as sustaining members...
>
> In a mail in the thread it was suggested that companies doing QGIS
> development should add extra cost to quotes to accommodate the time for
> reviews (of unrelated pull requests). Not sure I agree with that - if a
> company had constant income from QGIS dev, that's doable, but if we are
> talking about occasional QGIS dev work, that is hard to plan.
>
> From all of that above, my thinking is that in order to make things
> sustainable, regular pull request reviews should be ideally funded by
> QGIS.org similarly to how paid bug-fixing sprints work. It is the kind of
> project maintainance work that needs to be done, it is not always super fun
> and it requires input of someone from a small group of people that are
> already donating lots of their free time.
>
> My proposal would be therefore along these lines:
> - PSC allocates annual budget to reviews
> - core devs interested in participating would indicate their availability
> (eligibility may be the same as with paid bug fixing)
> - PSC tells devs how much paid time they can spend on reviews
> - paid devs should do reviews regularly, e.g. at least twice a week,
> ideally every day - not just once a month or so
> - paid devs would self-assign themselves to PRs and do reviews
> - if a PR is not picked up by anyone e.g. within 3 days, PR queue manager
> would assign it to one of the paid devs
> - paid devs keep track of their time in a spreadsheet and invoice
> (quarterly?) up to the amount they were allocated
>
> I believe this approach should solve our problems:
> - remove stress from growing PR queue and reviewer burnout
> - get more core devs (who otherwise may not be available) to do reviews
> - reduce frustration from devs submitting PRs when their PRs are not
> getting attention
>
> In my humble opinion, good quality reviews are even more important than
> the regular paid bug fixing or grants. A review that is rushed due to lack
> of time may omit important code details, or focus only on code style...
>
> We could start with a relatively small budget and compensate the extremely
> valuable work that reviewers (Nyall and others) are already doing.
>
> Regards
> Martin
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210501/e3e41d45/attachment-0001.html>

From s.forna73 at gmail.com  Mon May  3 01:17:40 2021
From: s.forna73 at gmail.com (Forna)
Date: Mon, 3 May 2021 10:17:40 +0200
Subject: [QGIS-Developer] Do not show the label if it is outside the map
 cavas #42990
Message-ID: <CADH656jLRy4cj9pzHn3=F7RAA7ucjOnEk1-VNz-Bih27Pv-xHA@mail.gmail.com>

  Hi Guys!
I wrote on the Qgis forum, but they suggested to,me to write to this
mailing list.
I'm having this problem on Qgis 3.16.6 that in 3.10.8  there wasn't.

https://github.com/qgis/QGIS/issues/42990

Can you give me a solution or any idea to avoid this?

thanks in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210503/46d11509/attachment.html>

From francesco.bursi at hotmail.it  Mon May  3 14:30:29 2021
From: francesco.bursi at hotmail.it (Francesco Bursi)
Date: Mon, 3 May 2021 21:30:29 +0000
Subject: [QGIS-Developer] R: GSoC 2021 QGIS On-the-fly Raster Calculator
 proposal draft review and feedback
In-Reply-To: <CAB28Asg0wD-MTBfUJy3k=b00WZniKgEjOfXwxB+_p0S6J9ZmJQ@mail.gmail.com>
References: <mailman.33.1618254002.17629.qgis-developer@lists.osgeo.org>
 <CAF6hL+U76VOhsFiarMnywYASi4nCkUDTL3xOv_Vgvr5Vp_Euzg@mail.gmail.com>
 <VI1P190MB03814A1D6914B9D38686290F804F9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
 <CAF6hL+WsAfRuhRKAi+fAgnFHuOy5eQttKyNP5PvZyutCgyHjRw@mail.gmail.com>
 <CAC2XbFeaPgXjm_fy3HVuPu0_cjbhCNjBugXzzUt-Bs9jyG8Zcg@mail.gmail.com>,
 <CAB28Asg0wD-MTBfUJy3k=b00WZniKgEjOfXwxB+_p0S6J9ZmJQ@mail.gmail.com>
Message-ID: <VI1P190MB0381E14811FC6D90F5FA399D805B9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>

Hi again,

I'm sorry too for the delay.
By the way thank you for the feedbacks. I would definitely take yours hints and your advices in consideration and I'll let you know what my work will concern if, of course, the proposal will be accepted.

Kind regards,
Francesco

________________________________
Da: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> per conto di Nyall Dawson <nyall.dawson at gmail.com>
Inviato: marted? 27 aprile 2021 06:50
A: Martin Dobias <wonder.sk at gmail.com>
Cc: Alister Hood <alister.hood at gmail.com>; qgis-dev <qgis-developer at lists.osgeo.org>
Oggetto: Re: [QGIS-Developer] GSoC 2021 QGIS On-the-fly Raster Calculator proposal draft review and feedback

On Fri, 16 Apr 2021 at 07:20, Martin Dobias <wonder.sk at gmail.com> wrote:
>
> Hi Alister
>
> On Wed, Apr 14, 2021 at 8:55 AM Alister Hood <alister.hood at gmail.com> wrote:
>>
>>
>> What I'm suggesting is that a slightly more general solution would be useful in more situations.  In your words, it would "avoid the need to create derived raster files" in a lot more situations.
>>
>> The only downside is that the virtual raster would be created as a new layer in the QGIS project (if you want to reduce this "clutter", you might just be able to remove the original layer from the project, but sometimes you would want to keep it for other reasons).  But it is normal to have extra layers in your project just to get things to display you want - for example I imagine it is very common for people to duplicate a raster layer so they can display it both with the hillshade renderer and one or more other renderers.
>>
>> In any case, assuming you do follow the symbology approach rather than a provider, as a user I'd still ask if the way you're proposing to implement this is really the best way. Rather than adding a new render type, from a user's perspective I think it would be a lot simpler to instead add a ? button next to all of the "band" comboboxes, allowing you to enter a raster calculator expression rather than selecting a band.  This approach would be consistent with the "value" comboboxes for selecting a field from a vector layer, which have a ? button next to them, and it could also be extended to anywhere else in QGIS where you select a raster band.
>
>
> I have originally suggested the approach (that Francesco took for his project) in the GSoC ideas list and volunteered as a mentor... I was playing with multiple ideas how this could be done: 1. new raster renderer, 2. new raster band of an existing layer, 3. new provider (as you suggest).
>
> At the time the first option with a renderer seemed like a choice with the least amount of hassle to add - simply reusing the concept that hillshade/contour raster renderers already use. It seemed that the approach with a renderer could lead to fastest feedback loop when user modifies the raster calculator expression to immediately get results on canvas. And contrary to what was said above, user should not be limited to raster bands of a single input raster layer - any raster layer may be used - which may lead to a paradox situation when the on-the-fly calculator renderer in theory may not use any data from its layer (only the input layer's extent+CRS may be used). The other potentially awkward thing is that raster calculator (as of now) only supports a single output raster band, and there would be a sub-renderer attached to actually turn output raster values to actual colors (which I don't like that much).
>
> For mesh layers, in recent versions of QGIS, there is support similar to the second option (new "virtual" / "derived" raster band). This works fine, but the feedback loop between changing the expression and seeing the results involves much more time and clicking.
>
> The final option with a new provider is similar to the previous option with a virtual raster band, yet a bit more generic probably - maybe with more room for configuration, one could possibly use not use on-the-fly raster calculator, but also various other raster processing algorithms that would otherwise require creation of outputs stored on disk. I guess with this approach the raster calculator expression would be set as data provider URI - which is cumbersome to later modify in QGIS. By the way, this option seems to be also the approach taken in Redlands (the feature is called "raster functions").
>
> I can imagine either solution - raster renderer or raster data provider - each would have some pros and cons. Many thanks for your feedback. I would be interested to hear what other people think. The GSoC proposal is not set in stone (and it is not accepted yet either) - if people prefer the approach with a virtual raster, then we can think of updating the project plan accordingly (if the project would go ahead).

Apologies for the super-delayed answer (been on leave and then
catching up due to being on leave :P )

My preference would be strongly towards the virtual raster data
provider instead of a renderer. Basically the way I see it is that a
virtual renderer is a nice symbology toy to have, but can't be used
for any real in-depth analysis work. Yet a virtual provider would work
for both visualisation AND analytical work (e.g. identify tool would
give correct calculated pixel values) and takes the feature from being
of limited use to a real killer feature.

I can also see that a virtual provider could greatly speed up certain
tasks in qgis -- eg if you had to perform a raster calculation and
then use the results for a zonal statistics operation, it would be
MUCH more efficient to use a virtual raster so that you're only
performing the raster calculation for pixels inside the zones, instead
of every pixel and then ignoring everything outside the zones. This
could potentially make an operation which is prohibitively time
consuming to calculate become instead a near-instant calculation!

That's where I sit anyway :)

Nyall
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210503/3b1c18d5/attachment.html>

From enzo.ccc at gmail.com  Tue May  4 10:59:37 2021
From: enzo.ccc at gmail.com (Enzo Cocca)
Date: Tue, 4 May 2021 19:59:37 +0200
Subject: [QGIS-Developer] pyqgis: no update data into table sqlite !
Message-ID: <CAC_+zuo-OgqDxpof2LMn-weFUFJN9hn2hRkiYFaKmyY4XCSXmA@mail.gmail.com>

Hi people:
I'm trying to update an table sqlite not geometric but the update does not
take place.

this is my code:

def convert_table(self):
        cfg_rel_path = os.path.join(os.sep, 'HFF_DB_folder', 'config.cfg')
        file_path = '{}{}'.format(self.HOME, cfg_rel_path)
        conf = open(file_path, "r")
        con_sett = conf.read()
        conf.close()
        settings = Settings(con_sett)
        settings.set_configuration()
        if settings.SERVER == 'sqlite':
            sqliteDB_path = os.path.join(os.sep, 'HFF_DB_folder',
settings.DATABASE)
            db_file_path = '{}{}'.format(self.HOME, sqliteDB_path)
            uri = QgsDataSourceUri()
            uri.setDatabase(db_file_path)
            uri.setDataSource('','eamena_table', None,'')
            layerEamena=QgsVectorLayer(uri.uri(), 'eamena_table',
'spatialite')
            QgsProject.instance().addMapLayers([layerEamena], True)
            layer =
QgsProject.instance().mapLayersByName('eamena_table')[0]
            with edit(layer):
                for feat in layer.getFeatures():
                    a=str(feat['assessment_investigator_actor'])
                    if "[['" not in a and a!='NULL':
                        t=a.replace(a[0],"[['"+a[0]).replace("|","'],
['").replace(a[-1],a[-1]+"']]")
            layer.updateFeature(feat)
        QgsProject.instance().removeMapLayer(layer.id())

If I print the results it's ok but into table doesn't update.
Some one has some suggestions?

Best
E

-- 
Enzo Cocca PhD
in "Science and Technology for Archaeology and Cultural Heritage"

ISMEO
International Association of Mediterranean and Oriental Studies


mail: enzo.ccc at gmail.com
cell: +393495087014
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210504/ec04cc16/attachment-0001.html>

From benjamin.jakimow at geo.hu-berlin.de  Tue May  4 11:10:50 2021
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Tue, 04 May 2021 20:10:50 +0200
Subject: [QGIS-Developer] pyqgis: no update data into table sqlite !
In-Reply-To: <CAC_+zuo-OgqDxpof2LMn-weFUFJN9hn2hRkiYFaKmyY4XCSXmA@mail.gmail.com>
References: <CAC_+zuo-OgqDxpof2LMn-weFUFJN9hn2hRkiYFaKmyY4XCSXmA@mail.gmail.com>
Message-ID: <84fbbc459f89dfcde9b5bf07d5e074e4@geo.hu-berlin.de>

You need to write t back to the feature, e.g. by

feat['assessment_investigator_actor'] = t

Greetings,

Benjamin

On 2021-05-04 19:59, Enzo Cocca wrote:

> Hi people:
> I'm trying to update an table sqlite not geometric but the update does 
> not take place.
> 
> this is my code:
> 
> def convert_table(self):
> cfg_rel_path = os.path.join(os.sep, 'HFF_DB_folder', 'config.cfg')
> file_path = '{}{}'.format(self.HOME, cfg_rel_path)
> conf = open(file_path, "r")
> con_sett = conf.read()
> conf.close()
> settings = Settings(con_sett)
> settings.set_configuration()
> if settings.SERVER == 'sqlite':
> sqliteDB_path = os.path.join(os.sep, 'HFF_DB_folder', 
> settings.DATABASE)
> db_file_path = '{}{}'.format(self.HOME, sqliteDB_path)
> uri = QgsDataSourceUri()
> uri.setDatabase(db_file_path)
> uri.setDataSource('','eamena_table', None,'')
> layerEamena=QgsVectorLayer(uri.uri(), 'eamena_table', 'spatialite')
> QgsProject.instance().addMapLayers([layerEamena], True)
> layer =  QgsProject.instance().mapLayersByName('eamena_table')[0]
> with edit(layer):
> for feat in layer.getFeatures():
> a=str(feat['assessment_investigator_actor'])
> if "[['" not in a and a!='NULL':
> t=a.replace(a[0],"[['"+a[0]).replace("|","'], 
> ['").replace(a[-1],a[-1]+"']]")
> layer.updateFeature(feat)
> QgsProject.instance().removeMapLayer(layer.id [1]())
> 
> If I print the results it's ok but into table doesn't update.
> Some one has some suggestions?
> 
> Best
> E
> --
> 
> Enzo Cocca PhD
> in "Science and Technology for Archaeology and Cultural Heritage"
> 
> ISMEO
> International Association of Mediterranean and Oriental Studies
> 
> mail: enzo.ccc at gmail.com
> cell: +393495087014
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
--
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu 
Berlin

e-mail: benjamin.jakimow at geo.hu-berlin.de

phone:  +49 (0) 30 2093 6894
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'222

Links:
------
[1] http://layer.id
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210504/a044b18f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blocked.gif
Type: image/gif
Size: 118 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210504/a044b18f/attachment.gif>

From enzo.ccc at gmail.com  Tue May  4 12:24:35 2021
From: enzo.ccc at gmail.com (Enzo Cocca)
Date: Tue, 4 May 2021 21:24:35 +0200
Subject: [QGIS-Developer] pyqgis: no update data into table sqlite !
In-Reply-To: <84fbbc459f89dfcde9b5bf07d5e074e4@geo.hu-berlin.de>
References: <CAC_+zuo-OgqDxpof2LMn-weFUFJN9hn2hRkiYFaKmyY4XCSXmA@mail.gmail.com>
 <84fbbc459f89dfcde9b5bf07d5e074e4@geo.hu-berlin.de>
Message-ID: <CAC_+zuoUaOh1i0DGkydANz2JfXU-7vpR2NoWdZH9sBjxZ_iiWg@mail.gmail.com>

thank you so much,
works very well!

Il giorno mar 4 mag 2021 alle ore 20:10 Benjamin Jakimow <
benjamin.jakimow at geo.hu-berlin.de> ha scritto:

> You need to write t back to the feature, e.g. by
>
> feat['assessment_investigator_actor'] = t
>
>
> Greetings,
>
> Benjamin
>
>
> On 2021-05-04 19:59, Enzo Cocca wrote:
>
> Hi people:
> I'm trying to update an table sqlite not geometric but the update does not
> take place.
>
> this is my code:
>
> def convert_table(self):
>         cfg_rel_path = os.path.join(os.sep, 'HFF_DB_folder', 'config.cfg')
>         file_path = '{}{}'.format(self.HOME, cfg_rel_path)
>         conf = open(file_path, "r")
>         con_sett = conf.read()
>         conf.close()
>         settings = Settings(con_sett)
>         settings.set_configuration()
>         if settings.SERVER == 'sqlite':
>             sqliteDB_path = os.path.join(os.sep, 'HFF_DB_folder',
> settings.DATABASE)
>             db_file_path = '{}{}'.format(self.HOME, sqliteDB_path)
>             uri = QgsDataSourceUri()
>             uri.setDatabase(db_file_path)
>             uri.setDataSource('','eamena_table', None,'')
>             layerEamena=QgsVectorLayer(uri.uri(), 'eamena_table',
> 'spatialite')
>             QgsProject.instance().addMapLayers([layerEamena], True)
>             layer =
> QgsProject.instance().mapLayersByName('eamena_table')[0]
>             with edit(layer):
>                 for feat in layer.getFeatures():
>                     a=str(feat['assessment_investigator_actor'])
>                     if "[['" not in a and a!='NULL':
>                         t=a.replace(a[0],"[['"+a[0]).replace("|","'],
> ['").replace(a[-1],a[-1]+"']]")
>             layer.updateFeature(feat)
>         QgsProject.instance().removeMapLayer(layer.id())
>
> If I print the results it's ok but into table doesn't update.
> Some one has some suggestions?
>
> Best
> E
>
> --
> Enzo Cocca PhD
> in "Science and Technology for Archaeology and Cultural Heritage"
>
> ISMEO
> International Association of Mediterranean and Oriental Studies
>
> mail: enzo.ccc at gmail.com
> cell: +393495087014
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> --
> --
> Benjamin Jakimow, Doctoral Researcher
> Earth Observation Lab | Geography Department | Humboldt-Universit?t zu
> Berlin
>
> e-mail: benjamin.jakimow at geo.hu-berlin.de
>
> phone:  +49 (0) 30 2093 6894
> mobile: +49 (0) 157 5656 8477
> fax:    +49 (0) 30 2093 6848
> mail:   Unter den Linden 6 | 10099 Berlin | Germany
> room: 2'222
>


-- 
Enzo Cocca PhD
in "Science and Technology for Archaeology and Cultural Heritage"

ISMEO
International Association of Mediterranean and Oriental Studies


mail: enzo.ccc at gmail.com
cell: +393495087014
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210504/9dd71aa0/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blocked.gif
Type: image/gif
Size: 118 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210504/9dd71aa0/attachment.gif>

From anitagraser at gmx.at  Tue May  4 14:06:07 2021
From: anitagraser at gmx.at (Anita Graser)
Date: Tue, 4 May 2021 23:06:07 +0200
Subject: [QGIS-Developer] 2021 QGIS Grant Proposals final results
Message-ID: <9de981e8-7d13-75df-7e4c-911ec6bfad08@gmx.at>

Dear QGIS Community,

On behalf of the QGIS.ORG project, I'm extremely pleased to announce the
winning proposals for our 2021 QGIS.ORG grant programme. Read all about
the voting results here:

https://blog.qgis.org/2021/05/04/qgis-grant-programme-2021-results/

A number of interesting and useful proposals didn?t make it because of
our limited budget; we encourage organizations to pick up one of their
choices and sponsor it.

Regards,

Anita


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210504/45b65d3d/attachment.html>

From a.neumann at carto.net  Wed May  5 02:06:27 2021
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed, 05 May 2021 11:06:27 +0200
Subject: [QGIS-Developer] A plea: more volunteers needed for reviewing
 backports
In-Reply-To: <CAL5Q672A3ZheLehpQ7aszjQNBTrx2XYLtw79nqgMD0gXzxuTaA@mail.gmail.com>
References: <CAB28Asj-JQnyZU1KREAWLdppMX2=AKWgnAKLdiy+6dBHhyOxRQ@mail.gmail.com>
 <CAC2XbFf0n+xZMx_nVeNiJA0=c8DCpx_Aj4gzvx+UT6_p34rPpQ@mail.gmail.com>
 <CAL5Q672A3ZheLehpQ7aszjQNBTrx2XYLtw79nqgMD0gXzxuTaA@mail.gmail.com>
Message-ID: <070ffd409dc47bd85f206e46ebb6b73e@carto.net>

Hi all,

To answer the financial question here:

we had 6k EUR in the 2020 budget. This was distributed between Nyall 
(2.7k EUR) and Matthias/OPENGIS (2.7k EUR) and Alessandro (600 EUR, 
Server related reviews).

In 2021 we increased and approved the budget to 10k. I am waiting for a 
proposal how to distribute this amount in 2021.

Without having more sustaining members we can only increase these 10k by 
chipping away money from bug fixing (the bulk of our expenses) or the 
grant program (which is with 25k EUR not very large in 2021, less than 
in 2020).

But finances are only parts of the problem, as discussed here. The main 
issue might be finding skilled devs who know the code base well and 
distribute this task more evenly between diffferent shoulders. Of course 
there is a connection between available funds and finding people working 
on reviewing ...

Greetings,

Andreas

On 2021-05-01 13:04, Alessandro Pasotti wrote:

> Thank you Martin,
> 
> I agree with your proposal, this is in line with what we have already 
> discussed and it sounds a sustainable way to solve the problem, I'm not 
> sure about the budget though: Andreas will probably have more 
> information on that.
> 
> On Sat, May 1, 2021 at 12:33 PM Martin Dobias <wonder.sk at gmail.com> 
> wrote:
> 
> Hi all
> 
> On Tue, Mar 23, 2021 at 12:07 AM Nyall Dawson <nyall.dawson at gmail.com> 
> wrote:
> This is a public plea for more developers who are very familiar with
> different parts of the QGIS codebase to become actively involved in
> backport PR management.
> (Nyall later clarified this is not only about backport PRs, but all 
> reviews in general)
> 
> Thanks for starting this thread - it is a discussion we definitely need 
> to have. (And apologies for getting back to this soooo late!)
> 
> Pull request reviews are absolutely vital part of the QGIS development, 
> a chance to get bugs fixed before they even get into QGIS code. Quality 
> reviews also need a good amount of expertise of the QGIS code - often 
> the hardest part of a review is not the code included is the pull 
> request, but figuring out what is missing...
> 
> Speaking of myself, I used to review pull requests regularly... But 
> after several years I have to admit I mostly gave up doing that unless 
> someone asks me to do a review. The pace of QGIS development is not 
> getting any slower (which is great!), so there is a constant flow of 
> new pull requests and doing code reviews regularly is not something I 
> want to do in my free time... I am happy to do some QGIS work in my 
> free time, but only doing what I want to do :-)
> 
> For a company, strictly business speaking, sparing 15 minutes a day of 
> a senior developer is roughly equivalent to lost profit of few 
> thousands of EUR (assuming ~50 hours / year). And many reviews need 
> much more time than 15 minutes... Moreover companies doing QGIS dev are 
> often already donating to QGIS as sustaining members...
> 
> In a mail in the thread it was suggested that companies doing QGIS 
> development should add extra cost to quotes to accommodate the time for 
> reviews (of unrelated pull requests). Not sure I agree with that - if a 
> company had constant income from QGIS dev, that's doable, but if we are 
> talking about occasional QGIS dev work, that is hard to plan.
> 
> From all of that above, my thinking is that in order to make things 
> sustainable, regular pull request reviews should be ideally funded by 
> QGIS.org similarly to how paid bug-fixing sprints work. It is the kind 
> of project maintainance work that needs to be done, it is not always 
> super fun and it requires input of someone from a small group of people 
> that are already donating lots of their free time.
> 
> My proposal would be therefore along these lines:
> - PSC allocates annual budget to reviews
> - core devs interested in participating would indicate their 
> availability (eligibility may be the same as with paid bug fixing)
> - PSC tells devs how much paid time they can spend on reviews
> - paid devs should do reviews regularly, e.g. at least twice a week, 
> ideally every day - not just once a month or so
> - paid devs would self-assign themselves to PRs and do reviews
> - if a PR is not picked up by anyone e.g. within 3 days, PR queue 
> manager would assign it to one of the paid devs
> - paid devs keep track of their time in a spreadsheet and invoice 
> (quarterly?) up to the amount they were allocated
> 
> I believe this approach should solve our problems:
> - remove stress from growing PR queue and reviewer burnout
> - get more core devs (who otherwise may not be available) to do reviews
> - reduce frustration from devs submitting PRs when their PRs are not 
> getting attention
> 
> In my humble opinion, good quality reviews are even more important than 
> the regular paid bug fixing or grants. A review that is rushed due to 
> lack of time may omit important code details, or focus only on code 
> style...
> 
> We could start with a relatively small budget and compensate the 
> extremely valuable work that reviewers (Nyall and others) are already 
> doing.
> 
> Regards
> Martin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 

Alessandro Pasotti
QCooperative:  www.qcooperative.net [1] ItOpen:   www.itopen.it [2]
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



Links:
------
[1] https://www.qcooperative.net
[2] http://www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210505/22418620/attachment-0001.html>

From wonder.sk at gmail.com  Wed May  5 03:05:47 2021
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed, 5 May 2021 12:05:47 +0200
Subject: [QGIS-Developer] A plea: more volunteers needed for reviewing
 backports
In-Reply-To: <070ffd409dc47bd85f206e46ebb6b73e@carto.net>
References: <CAB28Asj-JQnyZU1KREAWLdppMX2=AKWgnAKLdiy+6dBHhyOxRQ@mail.gmail.com>
 <CAC2XbFf0n+xZMx_nVeNiJA0=c8DCpx_Aj4gzvx+UT6_p34rPpQ@mail.gmail.com>
 <CAL5Q672A3ZheLehpQ7aszjQNBTrx2XYLtw79nqgMD0gXzxuTaA@mail.gmail.com>
 <070ffd409dc47bd85f206e46ebb6b73e@carto.net>
Message-ID: <CAC2XbFdCzxScetPpNpBydvWGOwtE0OyRH349+NrCKnJ5hkgTow@mail.gmail.com>

Hi Andreas

Thanks for the overview of the financial side of things. Regarding budget
allocation it would make sense to me to reduce bug-fixing and grants budget
and increase the spending on reviews. In my opinion both bug-fixing and
grants need some improvements anyway to bring more value to QGIS project,
but that's for a separate discussion (e.g. more focus on high priority
bugs, better voting system for grants to consider relevance/impact +
proposal quality + cost).

Speaking of myself, I would be happy to join the paid reviews efforts to
lower the fatigue of reviewers. And I hope it would attract some other QGIS
devs to join as well...

Regards
Martin


On Wed, May 5, 2021 at 11:06 AM Andreas Neumann <a.neumann at carto.net> wrote:

> Hi all,
>
> To answer the financial question here:
>
> we had 6k ? in the 2020 budget. This was distributed between Nyall (2.7k
> ?) and Matthias/OPENGIS (2.7k ?) and Alessandro (600 ?, Server related
> reviews).
>
> In 2021 we increased and approved the budget to 10k. I am waiting for a
> proposal how to distribute this amount in 2021.
>
> Without having more sustaining members we can only increase these 10k by
> chipping away money from bug fixing (the bulk of our expenses) or the grant
> program (which is with 25k ? not very large in 2021, less than in 2020).
>
> But finances are only parts of the problem, as discussed here. The main
> issue might be finding skilled devs who know the code base well and
> distribute this task more evenly between diffferent shoulders. Of course
> there is a connection between available funds and finding people working on
> reviewing ...
>
> Greetings,
>
> Andreas
>
> On 2021-05-01 13:04, Alessandro Pasotti wrote:
>
> Thank you Martin,
>
> I agree with your proposal, this is in line with what we have already
> discussed and it sounds a sustainable way to solve the problem, I'm not
> sure about the budget though: Andreas will probably have more information
> on that.
>
>
>
> On Sat, May 1, 2021 at 12:33 PM Martin Dobias <wonder.sk at gmail.com> wrote:
>
> Hi all
>
> On Tue, Mar 23, 2021 at 12:07 AM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
>
>
> This is a public plea for more developers who are very familiar with
> different parts of the QGIS codebase to become actively involved in
> backport PR management.
>
>
> (Nyall later clarified this is not only about backport PRs, but all
> reviews in general)
>
> Thanks for starting this thread - it is a discussion we definitely need to
> have. (And apologies for getting back to this soooo late!)
>
> Pull request reviews are absolutely vital part of the QGIS development, a
> chance to get bugs fixed before they even get into QGIS code. Quality
> reviews also need a good amount of expertise of the QGIS code - often the
> hardest part of a review is not the code included is the pull request, but
> figuring out what is missing...
>
> Speaking of myself, I used to review pull requests regularly... But after
> several years I have to admit I mostly gave up doing that unless someone
> asks me to do a review. The pace of QGIS development is not getting any
> slower (which is great!), so there is a constant flow of new pull requests
> and doing code reviews regularly is not something I want to do in my free
> time... I am happy to do some QGIS work in my free time, but only doing
> what I want to do :-)
>
> For a company, strictly business speaking, sparing 15 minutes a day of a
> senior developer is roughly equivalent to lost profit of few thousands of
> EUR (assuming ~50 hours / year). And many reviews need much more time than
> 15 minutes... Moreover companies doing QGIS dev are often already donating
> to QGIS as sustaining members...
>
> In a mail in the thread it was suggested that companies doing QGIS
> development should add extra cost to quotes to accommodate the time for
> reviews (of unrelated pull requests). Not sure I agree with that - if a
> company had constant income from QGIS dev, that's doable, but if we are
> talking about occasional QGIS dev work, that is hard to plan.
>
> From all of that above, my thinking is that in order to make things
> sustainable, regular pull request reviews should be ideally funded by
> QGIS.org similarly to how paid bug-fixing sprints work. It is the kind of
> project maintainance work that needs to be done, it is not always super fun
> and it requires input of someone from a small group of people that are
> already donating lots of their free time.
>
> My proposal would be therefore along these lines:
> - PSC allocates annual budget to reviews
> - core devs interested in participating would indicate their availability
> (eligibility may be the same as with paid bug fixing)
> - PSC tells devs how much paid time they can spend on reviews
> - paid devs should do reviews regularly, e.g. at least twice a week,
> ideally every day - not just once a month or so
> - paid devs would self-assign themselves to PRs and do reviews
> - if a PR is not picked up by anyone e.g. within 3 days, PR queue manager
> would assign it to one of the paid devs
> - paid devs keep track of their time in a spreadsheet and invoice
> (quarterly?) up to the amount they were allocated
>
> I believe this approach should solve our problems:
> - remove stress from growing PR queue and reviewer burnout
> - get more core devs (who otherwise may not be available) to do reviews
> - reduce frustration from devs submitting PRs when their PRs are not
> getting attention
>
> In my humble opinion, good quality reviews are even more important than
> the regular paid bug fixing or grants. A review that is rushed due to lack
> of time may omit important code details, or focus only on code style...
>
> We could start with a relatively small budget and compensate the extremely
> valuable work that reviewers (Nyall and others) are already doing.
>
> Regards
> Martin
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210505/7ad5fb99/attachment.html>

From olivier.dalang at gmail.com  Wed May  5 07:33:16 2021
From: olivier.dalang at gmail.com (Olivier Dalang)
Date: Wed, 5 May 2021 16:33:16 +0200
Subject: [QGIS-Developer] QGIS Compilation on Windows
In-Reply-To: <20210416084908.bjmk3cxvzrgisml4@norbit.de>
References: <458a1b26121441047a6764335891877f@sanasw.com>
 <20210415192559.ovjez3aqdyq57bng@norbit.de>
 <5e7bc1a7b3d23b1959276a8b3042952e@sanasw.com>
 <20210416084908.bjmk3cxvzrgisml4@norbit.de>
Message-ID: <CAExk7p38KjkrWEh-zKMuq3KXS6y07E3TxW9NWCxTErU7yhAZjg@mail.gmail.com>

Hi !

Same issue here, but for master

@Jurgen Am I right understanding currently, to build on Windows, one should
ignore INSTALL.txt and rather try to replicate what's being done here :
https://github.com/jef-n/OSGeo4W/blob/master/src/qgis-dev/osgeo4w/package.sh
?

I tried to fiddle a little bit (such as upgrade cmake due to "Policy
"CMP0094" is not known to this version of CMake" as above), but then ran
into other issues, which are a bit cryptic to me.

Do you have by any chance the updating of the building docs for Windows on
your roadmap ? Or anything additional to that (such as build dependencies
versions ?)

In the meantime, I can build through WSL2, but I'd prefer to be able to
build natively as it's better to manually test.

Thanks !!

Olivier

On Fri, 16 Apr 2021 at 10:49, J?rgen E. Fischer <jef at norbit.de> wrote:

> Hi,
>
> On Thu, 15. Apr 2021 at 17:35:27 -0700, rnathreddy at sanasw.com wrote:
> > As I understand
> >
> >   1) Use the QGIS version 3.16 repository
> >   2) Use Microsoft Visual Studio 2019 compiler
> >   3) Use the up to date Osgeo4w repositories using
> http://download.osgeo.org/osgeo4w/testing/osgeo4w-setup.exe
>
> Only for master the new repository is required - and in turn the new
> compiler.
> For 3.16 or 3.18 you can stick with what's documented.  But you can also
> switch.
>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210505/7fcb2a23/attachment.html>

From apasotti at gmail.com  Wed May  5 09:23:09 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 5 May 2021 18:23:09 +0200
Subject: [QGIS-Developer] A plea: more volunteers needed for reviewing
 backports
In-Reply-To: <CAC2XbFdCzxScetPpNpBydvWGOwtE0OyRH349+NrCKnJ5hkgTow@mail.gmail.com>
References: <CAB28Asj-JQnyZU1KREAWLdppMX2=AKWgnAKLdiy+6dBHhyOxRQ@mail.gmail.com>
 <CAC2XbFf0n+xZMx_nVeNiJA0=c8DCpx_Aj4gzvx+UT6_p34rPpQ@mail.gmail.com>
 <CAL5Q672A3ZheLehpQ7aszjQNBTrx2XYLtw79nqgMD0gXzxuTaA@mail.gmail.com>
 <070ffd409dc47bd85f206e46ebb6b73e@carto.net>
 <CAC2XbFdCzxScetPpNpBydvWGOwtE0OyRH349+NrCKnJ5hkgTow@mail.gmail.com>
Message-ID: <CAL5Q67388pXiPtAzw80KevywsY4m35SWZyUR9-n+tfuCrLHd_w@mail.gmail.com>

On Wed, May 5, 2021 at 12:05 PM Martin Dobias <wonder.sk at gmail.com> wrote:

> Hi Andreas
>
> Thanks for the overview of the financial side of things. Regarding budget
> allocation it would make sense to me to reduce bug-fixing and grants budget
> and increase the spending on reviews. In my opinion both bug-fixing and
> grants need some improvements anyway to bring more value to QGIS project,
> but that's for a separate discussion (e.g. more focus on high priority
> bugs, better voting system for grants to consider relevance/impact +
> proposal quality + cost).
>

Yeah, we can certainly discuss how to improve both processes but, if I
mostly agree with you about the grants I believe that the bugfixing budget
should not be reduced (perhaps increased) and that being able to focus on
QGIS bugfixing for a given number of days really makes a difference.


>
> Speaking of myself, I would be happy to join the paid reviews efforts to
> lower the fatigue of reviewers. And I hope it would attract some other QGIS
> devs to join as well...
>
>
That would be awesome, thank you!

Cheers

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210505/eeb3618f/attachment-0001.html>

From bo.victor.thomsen at gmail.com  Thu May  6 01:33:45 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Thu, 6 May 2021 10:33:45 +0200
Subject: [QGIS-Developer] Speeding up a virtual layer
Message-ID: <caf4c816-7ad8-b046-d237-59c6c0c6620c@gmail.com>

Hi list -

I have created a virtual layer using Python and shown this in my QGIS 
mapping window like this:

layer = QgsVectorlayer(?layer=/...layer "ref" definition... /&layer=/... 
"cur" definition.../&query=select ref.* from ref left join cur on 
ref."objekt-id" = cur."objekt-id" where cur."objekt-id" is NULL,"My 
layer", "virtual")|
|

i.e a left join between a Postgres layer "cur" and a GeoPackage layer 
"ref". And it works !!! (Thank you Hugo and whoever that has developed 
this facility).

However, it is somewhat slow to react, when you ex. are using the "info" 
tool on the layer. AFAIK, it's not using the indexes in the original 
layers.

Is there any method (Python or otherwise) to speed up the response of 
the virtual layer ? For example by adding a temporary spatial index to 
the resulting virtual layer ?? Some "magical keywords" in the creation 
parameters for the layer ???

-- 

Med venlig hilsen / Kind regards

Bo Victor Thomsen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210506/51fedbc3/attachment.html>

From 46.i.s.o.64 at gmail.com  Thu May  6 05:00:54 2021
From: 46.i.s.o.64 at gmail.com (i-s-o)
Date: Thu, 6 May 2021 08:00:54 -0400
Subject: [QGIS-Developer] Speeding up a virtual layer
In-Reply-To: <caf4c816-7ad8-b046-d237-59c6c0c6620c@gmail.com>
References: <caf4c816-7ad8-b046-d237-59c6c0c6620c@gmail.com>
Message-ID: <CACjCNZSPxKwOiPoEcOTVNFK-_AMUQoyhS7VRzJd-RM4e0MJ_dw@mail.gmail.com>

The answer below in response to your question about "temporary spatial
index". However, I don't see how a spatial index would help speed up the
query in your question as that one doesn't make use of any spatial
predicates, and I don't know if you can explicitly create non-spatial
indexes on virtual layers (in your example, that would be an index on
"objekt-id" in both of the virtual layers).

Virtual Layers use SpatiaLite lib (if I understand correctly, the tables
are read into memory or virtualized, in a way, they have no "memory' of
their origins, hence, no access to underlying indexes): you need to work
out your queries as if you are working in a SpatiaLite db, i.e. you need to
invoke the indexes explicitly (
https://www.gaia-gis.it/fossil/libspatialite/wiki?name=SpatialIndex).

Luckily, there is a convenience function added by Virtual Layers:
_search_frame_, so that you can skip the part about referring to the
underlying index table etc.See:
https://docs.qgis.org/3.16/en/docs/user_manual/managing_data_source/create_layers.html#use-of-indexes
https://github.com/mhugo/qgis_vlayers#index-support
http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-QGIS-virtual-layer-incredibly-slow-td5403735.html

E.g.:
SELECT b.zip_code, a.geometry
FROM buildings a, zip_code_areas b
WHERE
  a._search_frame_ = b.geometry
  AND ST_Within(a.geometry, b.geometry)

Note that "b._search_frame_ = a.geometry" instead of "a._search_frame_ =
b.geometry" above also speeds up the query, but not by as much in my
specific situation: this depends on the counts of geometries on each layer
and the "average" relationship between features in one layer to the other.


On Thu, May 6, 2021, 04:33 Bo Victor Thomsen <bo.victor.thomsen at gmail.com>
wrote:

> Hi list -
>
> I have created a virtual layer using Python and shown this in my QGIS
> mapping window like this:
>
> layer = QgsVectorlayer(?layer=*...layer "ref" definition... *&layer=*...
> "cur" definition...*&query=select ref.* from ref left join cur on
> ref."objekt-id" = cur."objekt-id" where cur."objekt-id" is NULL,"My layer",
> "virtual")
>
> i.e a left join between a Postgres layer "cur" and a GeoPackage layer
> "ref". And it works !!! (Thank you Hugo and whoever that has developed this
> facility).
>
> However, it is somewhat slow to react, when you ex. are using the "info"
> tool on the layer. AFAIK, it's not using the indexes in the original
> layers.
>
> Is there any method (Python or otherwise) to speed up the response of the
> virtual layer ? For example by adding a temporary spatial index to the
> resulting virtual layer ?? Some "magical keywords" in the creation
> parameters for the layer ???
> --
>
> Med venlig hilsen / Kind regards
>
> Bo Victor Thomsen
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210506/0d340232/attachment.html>

From mkheyrollahi at bbv-deutschland.de  Thu May  6 05:55:15 2021
From: mkheyrollahi at bbv-deutschland.de (Mostafa Kheyrollahi)
Date: Thu, 6 May 2021 12:55:15 +0000
Subject: [QGIS-Developer] python Parallel processing
Message-ID: <DB6PR08MB26326D2FF8D53E5FFB1BAE03FE589@DB6PR08MB2632.eurprd08.prod.outlook.com>

Dear Sir/Madam,
I have developed an algorithm in python which works well in python shell (Attached: shortest_tree_normal) and also as a script in QGIS (Attached: schritt4) . This algorithm calculates the best possible path among some polygons with the help of 'minimum spanning tree'.
Since the algorithm contains a big loop, it was time consuming. So, I used Parallel processing of Joblib and could reduce the running time considerably in python shell (Attached: shortest_tree_para). But the joblib codes didn't work in QGIS. I also tried using QgsTask library in QGIS, but it doesn't reduce the running time (attached: schritt3). Could you please let me know what is the best solution for parallel processing for my codes in QGIS?

Thanks in advance.

Best regards,
Mostafa Kheyrollahi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210506/11b16058/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: New folder.zip
Type: application/x-zip-compressed
Size: 11062 bytes
Desc: New folder.zip
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210506/11b16058/attachment-0001.bin>

From nicolas.godet at outlook.fr  Fri May  7 00:24:48 2021
From: nicolas.godet at outlook.fr (Nicolas Godet)
Date: Fri, 7 May 2021 07:24:48 +0000
Subject: [QGIS-Developer] QgsZonalStatistics.calculateStatistics() missing
 outputs
Message-ID: <PA4P190MB1166BA9314E8FAE0CABF7CC28F579@PA4P190MB1166.EURP190.PROD.OUTLOOK.COM>

Hello,

>From a processing script, I would like to compute raster statistics from a feature.geometry().
I call QgsZonalStatistics.calculateStatistics() with :
    QgsZonalStatistics.calculateStatistics(
        Raster.dataProvider(),
        Feature.geometry(),
        Raster.rasterUnitsPerPixelX(),
        Raster.rasterUnitsPerPixelY(),
        1,
        QgsZonalStatistics.Statistic.All
    )

The output contain a dict :
    {0: 6.4578613687}
Which correspond to Variety (last value inserted in results here https://qgis.org/api/qgszonalstatistics_8cpp_source.html)
Do you agree that the output should contain all statistics since I use QgsZonalStatistics.Statistic.All ?
Is this a bug or a feature ?

Another question :
How I am supposed to build the last argument of calculateStatistics() if I want to compute only Mean and Median ?

Kind regards,

Nicolas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210507/bff36337/attachment.html>

From qgis at makobo.de  Fri May  7 01:05:40 2021
From: qgis at makobo.de (Mike Blechschmidt)
Date: Fri, 7 May 2021 10:05:40 +0200 (CEST)
Subject: [QGIS-Developer] Approval of a new plug-in version
Message-ID: <1706754022.43515.1620374740936@email.ionos.de>

For several days I have been waiting for a new PlugIN version to be approved.
https://plugins.qgis.org/plugins/SaxonyCadastralParcels/
What's wrong with that?

Greetings Mike

From apasotti at gmail.com  Fri May  7 01:13:12 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 7 May 2021 10:13:12 +0200
Subject: [QGIS-Developer] Approval of a new plug-in version
In-Reply-To: <1706754022.43515.1620374740936@email.ionos.de>
References: <1706754022.43515.1620374740936@email.ionos.de>
Message-ID: <CAL5Q673suo3fXSbWi7rbweFioq6uxdUZru+J41hkJsMu6ZWr1A@mail.gmail.com>

On Fri, May 7, 2021 at 10:10 AM Mike Blechschmidt <qgis at makobo.de> wrote:

> For several days I have been waiting for a new PlugIN version to be
> approved.
> https://plugins.qgis.org/plugins/SaxonyCadastralParcels/
> What's wrong with that?
>


Nothing: the plugins queue is handled by volunteers, they probably didn't
have time to review it.

Approved now.




> Greetings Mike
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210507/467fc013/attachment.html>

From cavallini at faunalia.it  Fri May  7 01:13:21 2021
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 7 May 2021 10:13:21 +0200
Subject: [QGIS-Developer] Approval of a new plug-in version
In-Reply-To: <1706754022.43515.1620374740936@email.ionos.de>
References: <1706754022.43515.1620374740936@email.ionos.de>
Message-ID: <7210b237-def9-9f72-5283-2ad88f9695db@faunalia.it>

apparently nothing wrong.
I see both versions are now aproved.
Cheers.

Il 07/05/21 10:05, Mike Blechschmidt ha scritto:
> For several days I have been waiting for a new PlugIN version to be approved.
> https://plugins.qgis.org/plugins/SaxonyCadastralParcels/
> What's wrong with that?
> 
> Greetings Mike
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From uclaros at gmail.com  Fri May  7 05:45:22 2021
From: uclaros at gmail.com (uclaros)
Date: Fri, 7 May 2021 05:45:22 -0700 (MST)
Subject: [QGIS-Developer] Speeding up a virtual layer
In-Reply-To: <caf4c816-7ad8-b046-d237-59c6c0c6620c@gmail.com>
References: <caf4c816-7ad8-b046-d237-59c6c0c6620c@gmail.com>
Message-ID: <1620391522521-0.post@n6.nabble.com>

For a simple left join you can skip using a virtual layer and use layer
properties > join instead.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rnathreddy at sanasw.com  Fri May  7 18:56:19 2021
From: rnathreddy at sanasw.com (rnathreddy at sanasw.com)
Date: Fri, 07 May 2021 18:56:19 -0700
Subject: [QGIS-Developer] Packaging the application
Message-ID: <e925b6b17a8fb80b1d77d943540ce729@sanasw.com>

Hi,

We are able to compile the QGIS in windows with the help of given 
documentation.

Is there any procedure / document to package the application (as .zip / 
installer) so that we can use in another windows machine?

Regards
Raghunath

From enzo.ccc at gmail.com  Mon May 10 00:18:31 2021
From: enzo.ccc at gmail.com (Enzo Cocca)
Date: Mon, 10 May 2021 09:18:31 +0200
Subject: [QGIS-Developer] pyqgis how set filter legend map content in layer
 panel
Message-ID: <CAC_+zuo1cTxJOhoCxQ7Tquh9v8V+ezkHk821Qdwq20GHPY=J=A@mail.gmail.com>

Hi people,

How in pyqgis can I set filter legend on base map content in layer panel?

I load a vector data and I would set filter legend and I would ask you some
suggestions

this my code:

groupName="%s " % (self.dat)
root = QgsProject.instance().layerTreeRoot()
group = root.addGroup(groupName)
group.setExpanded(False)

if settings.SERVER == 'sqlite':
            sqliteDB_path = os.path.join(os.sep, 'pyarchinit_DB_folder',
settings.DATABASE)
            db_file_path = '{}{}'.format(self.HOME, sqliteDB_path)

            uri = QgsDataSourceUri()
            uri.setDatabase(db_file_path)
            uri.setDataSource('', 'pyarchinit_us_view', 'the_geom',
cont_per_string, "ROWID")
            layerUS = QgsVectorLayer(uri.uri(), layer_name_label_us,
'spatialite')

            srs = QgsCoordinateReferenceSystem(self.SRS,
QgsCoordinateReferenceSystem.PostgisCrsId)

            if layerUS.isValid():
                style_path =
'{}{}'.format(self.LAYER_STYLE_PATH_SPATIALITE, 'us_view.qml')
                layerUS.loadNamedStyle(style_path)
                group.insertChildNode(-1, QgsLayerTreeLayer(layerUS))
                QgsProject.instance().addMapLayers([layerUS], False)
  Thanks
E
-- 
Enzo Cocca PhD
in "Science and Technology for Archaeology and Cultural Heritage"

ISMEO
International Association of Mediterranean and Oriental Studies


mail: enzo.ccc at gmail.com
cell: +393495087014
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210510/b6bd5caa/attachment.html>

From rdmailings at duif.net  Mon May 10 00:52:54 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 10 May 2021 09:52:54 +0200
Subject: [QGIS-Developer] Unable to find QgsWFSProvider and QgsWMSProvider
 on API Documentation?
Message-ID: <48bbd316c6f6941e0e2bae07c7a957bc@duif.net>

Hi Devs,

I use the search (little input on top right side of page0 of the online 
API docs sometimes to find a class name: https://qgis.org/api/3.18/

Today I tried to find "QgsWMSProvider" and then "QgsWFSProvider" but 
these give to me both "No Matches"...
Searching for other Class names like QgsMapCanvas, QgsPoint etc just 
work.

Starting to type WMS you get a lot of server related files, but not 
something from wms or wfs provider..

Others can confirm? Any idea's why they are 'left behind' (by doxygen?)
(I can look into code off course, but I'm just curious)

Regards,

Richard Duivenvoorde

From matthias at opengis.ch  Mon May 10 00:59:01 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 10 May 2021 09:59:01 +0200
Subject: [QGIS-Developer] Unable to find QgsWFSProvider and
 QgsWMSProvider on API Documentation?
In-Reply-To: <48bbd316c6f6941e0e2bae07c7a957bc@duif.net>
References: <48bbd316c6f6941e0e2bae07c7a957bc@duif.net>
Message-ID: <CAC7zN97iQvQAXDdQ+7dvm8ZTLRWsBgXU5bftipfo1nuE8n1H4A@mail.gmail.com>

Hi Richard,

That's on purpose.
The providers are implementations of the "QgsRasterDataProvider" or
"QgsVectorDataProvider" interfaces. They are not instantiatable or
otherwise visible in the public API.

Is there something specific you are looking for?

Matthias

On Mon, May 10, 2021 at 9:53 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi Devs,
>
> I use the search (little input on top right side of page0 of the online
> API docs sometimes to find a class name: https://qgis.org/api/3.18/
>
> Today I tried to find "QgsWMSProvider" and then "QgsWFSProvider" but
> these give to me both "No Matches"...
> Searching for other Class names like QgsMapCanvas, QgsPoint etc just
> work.
>
> Starting to type WMS you get a lot of server related files, but not
> something from wms or wfs provider..
>
> Others can confirm? Any idea's why they are 'left behind' (by doxygen?)
> (I can look into code off course, but I'm just curious)
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210510/baa56c6a/attachment.html>

From rdmailings at duif.net  Mon May 10 01:06:21 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 10 May 2021 10:06:21 +0200
Subject: [QGIS-Developer] Unable to find QgsWFSProvider and
 QgsWMSProvider on API Documentation?
In-Reply-To: <CAC7zN97iQvQAXDdQ+7dvm8ZTLRWsBgXU5bftipfo1nuE8n1H4A@mail.gmail.com>
References: <48bbd316c6f6941e0e2bae07c7a957bc@duif.net>
 <CAC7zN97iQvQAXDdQ+7dvm8ZTLRWsBgXU5bftipfo1nuE8n1H4A@mail.gmail.com>
Message-ID: <042ae0b9bf7f4684e462a9ef74611c47@duif.net>

On 2021-05-10 09:59, Matthias Kuhn wrote:
> Hi Richard,
> 
> That's on purpose.
> The providers are implementations of the "QgsRasterDataProvider" or
> "QgsVectorDataProvider" interfaces. They are not instantiatable or
> otherwise visible in the public API.

Ah Yes, off course. Thanks!

> Is there something specific you are looking for?

Yep, will start new thread for it :-)

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Mon May 10 01:33:16 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 10 May 2021 10:33:16 +0200
Subject: [QGIS-Developer] How to Create a WMS-Time layer via PyQGIS?
Message-ID: <339b1e051cbdce9b9c1d84e50a2069b6@duif.net>

Hi,

I've been able to create a vector with Temporal Properties and use it in 
the Temporal Controller [0]

Now I try to do the same for a WMS-Time layer...

The layer "precip-blue-transparent/nearest" (epsg:3857 or 28992)
from this service:
https://geoservices.knmi.nl/adagucserver?dataset=RADAR&VERSION=1.1.1&request=getcapabilities
(our national Weather institute) loads fine and is usable in the 
Temporal Controller (PM5 = 5 min data, nice!)

Copying the uri from that layer properties and using it in pyqgis just 
works:

uri = 
'allowTemporalUpdates=true&contextualWMSLegend=0&crs=EPSG:3857&dpiMode=7&featureCount=10&format=image/png&layers=RAD_NL25_PCP_CM&styles=precip-blue-transparent/nearest&temporalSource=provider&timeDimensionExtent=2021-03-31T09:25:00Z/2021-05-03T12:20:00Z/PT5M&type=wmst&url=https://geoservices.knmi.nl/adagucserver?dataset%3DRADAR%26VERSION%3D1.1.1%26request%3Dgetcapabilities'

layer = QgsRasterLayer(uri, 'KNMI', "wms")

QgsProject.instance().addMapLayer(layer, True)


If I try to use a 'cleaner' raster layer uri (thinking I could set some 
temporal properties on the layer later), I fail to get it 'registered' 
on the Temporal Controller OR even severe QGIS crashes (when you only 
leave out the 
"timeDimensionExtent=2021-03-31T09:25:00Z/2021-05-03T12:20:00Z/PT5M" 
part... see [1])

I thought to use the provider defaults (from WMS capabilities), to be 
able to for example change/set the temporal extent later:
layer_temporal_props = layer.temporalProperties( capabilities )
but... I cannot get to the WMS capabilities... (@Matthias: THAT is was 
searching in the api :-) )

This for example:

uri = 
'allowTemporalUpdates=true&temporalSource=provider&crs=EPSG:28992&layers=RAD_NL25_PCP_CM&styles=precip-blue-transparent/nearest&format=image/png&url=https://geoservices.knmi.nl/adagucserver?dataset=RADAR&VERSION=1.1.1'
layer = QgsRasterLayer(uri, 'KNMI', "wms")
QgsProject.instance().addMapLayer(layer, True)

results in a valid WMS, but not Temporal aware layer.
And untill now I fail to 'make it temporal' via QGIS.

Anybody a hint (or tell me 'NYI' :-( ...)?

Regards,

Richard Duivenvoorde

[0] 
https://github.com/qgis/QGIS-Documentation/blob/1263b663d5160c2a2c0984c16ca7a5ce4bdd182f/docs/pyqgis_developer_cookbook/temporal_data.rst

[1] uri = 
'allowTemporalUpdates=true&temporalSource=provider&type=wmst&layers=RAD_NL25_PCP_CM&styles=precip-blue-transparent/nearest&crs=EPSG:3857&format=image/png&url=https://geoservices.knmi.nl/adagucserver?dataset%3DRADAR%26VERSION%3D1.1.1%26request%3Dgetcapabilities'

From smwltwesa6 at gmail.com  Mon May 10 02:59:06 2021
From: smwltwesa6 at gmail.com (Samweli Twesa Mwakisambwe)
Date: Mon, 10 May 2021 12:59:06 +0300
Subject: [QGIS-Developer] How to Create a WMS-Time layer via PyQGIS?
In-Reply-To: <339b1e051cbdce9b9c1d84e50a2069b6@duif.net>
References: <339b1e051cbdce9b9c1d84e50a2069b6@duif.net>
Message-ID: <CABsVa4PffHvAXqTMWr4tdCjnkAh8V5drM7WOdDty5hSRT5k4gg@mail.gmail.com>

Hi Richard,



On Mon, May 10, 2021 at 11:33 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi,
>
> I've been able to create a vector with Temporal Properties and use it in
> the Temporal Controller [0]
>
> Now I try to do the same for a WMS-Time layer...
>
> The layer "precip-blue-transparent/nearest" (epsg:3857 or 28992)
> from this service:
>
> https://geoservices.knmi.nl/adagucserver?dataset=RADAR&VERSION=1.1.1&request=getcapabilities
> (our national Weather institute) loads fine and is usable in the
> Temporal Controller (PM5 = 5 min data, nice!)
>
> Copying the uri from that layer properties and using it in pyqgis just
> works:
>
> uri =
>
> 'allowTemporalUpdates=true&contextualWMSLegend=0&crs=EPSG:3857&dpiMode=7&featureCount=10&format=image/png&layers=RAD_NL25_PCP_CM&styles=precip-blue-transparent/nearest&temporalSource=provider&timeDimensionExtent=2021-03-31T09:25:00Z/2021-05-03T12:20:00Z/PT5M&type=wmst&url=
> https://geoservices.knmi.nl/adagucserver?dataset%3DRADAR%26VERSION%3D1.1.1%26request%3Dgetcapabilities
> '
>
> layer = QgsRasterLayer(uri, 'KNMI', "wms")
>
> QgsProject.instance().addMapLayer(layer, True)
>
>
> If I try to use a 'cleaner' raster layer uri (thinking I could set some
> temporal properties on the layer later), I fail to get it 'registered'
> on the Temporal Controller OR even severe QGIS crashes (when you only
> leave out the
> "timeDimensionExtent=2021-03-31T09:25:00Z/2021-05-03T12:20:00Z/PT5M"
> part... see [1])
>
To add a WMST layer via PyQGIS you will need to pass "type" parameter with
value "wmst", "temporalSource" parameter and  "timeDimensionExtent"
parameter with the temporal extent value  in the layer URI,
when QGIS find "type=wmst"  in URI, it looks for the  "timeDimensionExtent"
parameter value to create the provider temporal capabilities. For your case
 it fails to find the parameter and while parsing the extent it crashes,
this is a bug, we need to open an issue and address it.

>
> I thought to use the provider defaults (from WMS capabilities), to be
> able to for example change/set the temporal extent later:
> layer_temporal_props = layer.temporalProperties( capabilities )
> but... I cannot get to the WMS capabilities... (@Matthias: THAT is was
> searching in the api :-) )
>
You can achieve that by using  layer_temporal_props =
layer.temporalProperties( ).setDefaultsFromDataProviderTemporalCapabilities
(capabilities)

> This for example:
>
> uri =
>
> 'allowTemporalUpdates=true&temporalSource=provider&crs=EPSG:28992&layers=RAD_NL25_PCP_CM&styles=precip-blue-transparent/nearest&format=image/png&url=
> https://geoservices.knmi.nl/adagucserver?dataset=RADAR&VERSION=1.1.1'
> layer = QgsRasterLayer(uri, 'KNMI', "wms")
> QgsProject.instance().addMapLayer(layer, True)
>
> results in a valid WMS, but not Temporal aware layer.
> And untill now I fail to 'make it temporal' via QGIS.



Anybody a hint (or tell me 'NYI' :-( ...)?
>
Here the "type" parameter with value "wmst" and "timeDimensionExtent"
parameter are missing, if you add those the layer will be added and it'll
be Temporal aware.

>
> Regards,
>
> Richard Duivenvoorde
>
> [0]
>
> https://github.com/qgis/QGIS-Documentation/blob/1263b663d5160c2a2c0984c16ca7a5ce4bdd182f/docs/pyqgis_developer_cookbook/temporal_data.rst
>
> [1] uri =
>
> 'allowTemporalUpdates=true&temporalSource=provider&type=wmst&layers=RAD_NL25_PCP_CM&styles=precip-blue-transparent/nearest&crs=EPSG:3857&format=image/png&url=
> https://geoservices.knmi.nl/adagucserver?dataset%3DRADAR%26VERSION%3D1.1.1%26request%3Dgetcapabilities
> '
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 


All the Best,

Samweli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210510/8de11679/attachment-0001.html>

From rdmailings at duif.net  Mon May 10 04:11:55 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 10 May 2021 13:11:55 +0200
Subject: [QGIS-Developer] How to Create a WMS-Time layer via PyQGIS?
In-Reply-To: <CABsVa4PffHvAXqTMWr4tdCjnkAh8V5drM7WOdDty5hSRT5k4gg@mail.gmail.com>
References: <339b1e051cbdce9b9c1d84e50a2069b6@duif.net>
 <CABsVa4PffHvAXqTMWr4tdCjnkAh8V5drM7WOdDty5hSRT5k4gg@mail.gmail.com>
Message-ID: <c84163b49c8403b7274a256d0eb77b58@duif.net>

On 2021-05-10 11:59, Samweli Twesa Mwakisambwe wrote:

> To add a WMST layer via PyQGIS you will need to pass "type" parameter
> with value "wmst", "temporalSource" parameter and
> "timeDimensionExtent" parameter with the temporal extent value  in the
> layer URI,
> when QGIS find "type=wmst"  in URI, it looks for the
> "timeDimensionExtent" parameter value to create the provider temporal
> capabilities.

Ah, thanks, that was my missing uri information!!

> For your case
>  it fails to find the parameter and while parsing the extent it
> crashes, this is a bug, we need to open an issue and address it.

I created
https://github.com/qgis/QGIS/issues/43158

>> I thought to use the provider defaults (from WMS capabilities), to
>> be
>> able to for example change/set the temporal extent later:
>> layer_temporal_props = layer.temporalProperties( capabilities )
>> but... I cannot get to the WMS capabilities... (@Matthias: THAT is
>> was
>> searching in the api :-) )
> 
> You can achieve that by using  layer_temporal_props =
> layer.temporalProperties(
> ).setDefaultsFromDataProviderTemporalCapabilities(capabilities)

I tried the setDefaultsFromDataProviderTemporalCapabilities method, but 
untill now I'm unable to pass it a capabilities object. The 
'capabilities()' from a (wms)layer return you an integer, and I think 
that the mCaps of a WMS provider are private?

For WMS layers it would be handy if there would be a way to retrieve the 
layer specific information from the GetCapabilities document.
In the case of WMS-T it holds essential information about the 
time-extent en time-step to be used in configuring it as a temporal 
layer.

I will create a wmst layer now based on some external info.

Thanks Samweli,

Richard Duivenvoorde





From rdmailings at duif.net  Mon May 10 07:41:51 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 10 May 2021 16:41:51 +0200
Subject: [QGIS-Developer] Disable/commenting provider filter?
Message-ID: <391e09bca95e2bcd07e65ced4557e735@duif.net>

Hi List,

When I add a filter to a layer, I often want to temporarily disable that 
filter (just to see what the full view is).

Working a lot with sql scripts recently, in which you comment out (a 
part) of a sql query by putting '--' in front of it, I tried that also 
in the Query builder, and though it looks like I'm commenting out my 
query (the query is greyed-out), it's not working, I get a parsing 
error.

So usability question:
- would other people be interested in temporarily disabling the layer 
filter query, or am I the only one :-)

If yes:

- should it be implemented by 'commenting' out part of the query?
- or should there be some 'temporarily disable' checkbox in the query 
builder)
- should it be a context menu (either the layer, or the little filter 
overlay icon in the layermanager)

Tech question:
- any forseeing issues with such thing?

Regards,

Richard Duivenvoorde

From matthias at opengis.ch  Mon May 10 08:11:02 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 10 May 2021 17:11:02 +0200
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <391e09bca95e2bcd07e65ced4557e735@duif.net>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
Message-ID: <CAC7zN973qm9C_Dg36HQX37oWgZD_zriM5FOC2R7VyO+prbw+=w@mail.gmail.com>

Hi Richard,

An enable/disable checkbox that works without deleting the filter would be
very nice. Just like data defined symbology where you can disable it
without losing the expression.

Short term workaround for you:

  TRUE /* [yourfilter here] */

Matthias

On Mon, May 10, 2021 at 4:42 PM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi List,
>
> When I add a filter to a layer, I often want to temporarily disable that
> filter (just to see what the full view is).
>
> Working a lot with sql scripts recently, in which you comment out (a
> part) of a sql query by putting '--' in front of it, I tried that also
> in the Query builder, and though it looks like I'm commenting out my
> query (the query is greyed-out), it's not working, I get a parsing
> error.
>
> So usability question:
> - would other people be interested in temporarily disabling the layer
> filter query, or am I the only one :-)
>
> If yes:
>
> - should it be implemented by 'commenting' out part of the query?
> - or should there be some 'temporarily disable' checkbox in the query
> builder)
> - should it be a context menu (either the layer, or the little filter
> overlay icon in the layermanager)
>
> Tech question:
> - any forseeing issues with such thing?
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210510/68a71756/attachment.html>

From marynsanders at berkeley.edu  Mon May 10 12:41:21 2021
From: marynsanders at berkeley.edu (Maryn Sanders)
Date: Mon, 10 May 2021 12:41:21 -0700
Subject: [QGIS-Developer] GRASS add-on: r.shalstab
Message-ID: <CAC9xhd_=pnaMk83rMP6iW_pPRQXBRXq7EZMNPy-Yusp5D0_ekA@mail.gmail.com>

To whom it may concern,

I think it would be quite beneficial to add the GRASS add-on r.shalstab to
the QGIS processing list. Both outputs, the slope stability raster and the
critical rainfall raster, would be very useful additions to QGIS in order
to provide a simple and accessible place to run a slope stability model.

The model <http://calm.geo.berkeley.edu/geomorph/shalstab/index.htm> used
to be available from the makers of SHALSTAB in an ARC viewer form; however,
it's no longer usable. It is now available through GRASS and SAGA, yet
those applications are not as user-friendly and centralized at QGIS. If
converted to a QGIS form, it would make running it much easier and boost
accessibility.

All the best,
Maryn

ps--I hope this is the right place to submit this request... my apologies
if this is the wrong email list or lacking detail!

-- 
Maryn Sanders (she/hers)
Geophysics BA, UC Berkeley '20
Research Assistant, Eel River CZO
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210510/10e0bb52/attachment.html>

From alroyliz0 at gmail.com  Mon May 10 13:44:52 2021
From: alroyliz0 at gmail.com (Alexis R.L.)
Date: Mon, 10 May 2021 16:44:52 -0400
Subject: [QGIS-Developer] pyqgis how set filter legend map content in
 layer panel
In-Reply-To: <CAC_+zuo1cTxJOhoCxQ7Tquh9v8V+ezkHk821Qdwq20GHPY=J=A@mail.gmail.com>
References: <CAC_+zuo1cTxJOhoCxQ7Tquh9v8V+ezkHk821Qdwq20GHPY=J=A@mail.gmail.com>
Message-ID: <CAOM0XWC3uwn=0ecojtvQOxyRnFCe4Si1gg_2AuhcAtdHk6+iLw@mail.gmail.com>

I assume you are talking about the layout legend.

Have a look at
https://github.com/qgis/QGIS/blob/master/tests/src/python/test_qgslayoutlegend.py
for reference.


Alex


Le lun. 10 mai 2021 ? 03:18, Enzo Cocca <enzo.ccc at gmail.com> a ?crit :

> Hi people,
>
> How in pyqgis can I set filter legend on base map content in layer panel?
>
> I load a vector data and I would set filter legend and I would ask you
> some suggestions
>
> this my code:
>
> groupName="%s " % (self.dat)
> root = QgsProject.instance().layerTreeRoot()
> group = root.addGroup(groupName)
> group.setExpanded(False)
>
> if settings.SERVER == 'sqlite':
>             sqliteDB_path = os.path.join(os.sep, 'pyarchinit_DB_folder',
> settings.DATABASE)
>             db_file_path = '{}{}'.format(self.HOME, sqliteDB_path)
>
>             uri = QgsDataSourceUri()
>             uri.setDatabase(db_file_path)
>             uri.setDataSource('', 'pyarchinit_us_view', 'the_geom',
> cont_per_string, "ROWID")
>             layerUS = QgsVectorLayer(uri.uri(), layer_name_label_us,
> 'spatialite')
>
>             srs = QgsCoordinateReferenceSystem(self.SRS,
> QgsCoordinateReferenceSystem.PostgisCrsId)
>
>             if layerUS.isValid():
>                 style_path =
> '{}{}'.format(self.LAYER_STYLE_PATH_SPATIALITE, 'us_view.qml')
>                 layerUS.loadNamedStyle(style_path)
>                 group.insertChildNode(-1, QgsLayerTreeLayer(layerUS))
>                 QgsProject.instance().addMapLayers([layerUS], False)
>   Thanks
> E
> --
> Enzo Cocca PhD
> in "Science and Technology for Archaeology and Cultural Heritage"
>
> ISMEO
> International Association of Mediterranean and Oriental Studies
>
>
> mail: enzo.ccc at gmail.com
> cell: +393495087014
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210510/19339c7a/attachment.html>

From enzo.ccc at gmail.com  Mon May 10 15:04:19 2021
From: enzo.ccc at gmail.com (Enzo Cocca)
Date: Tue, 11 May 2021 00:04:19 +0200
Subject: [QGIS-Developer] pyqgis how set filter legend map content in
 layer panel
In-Reply-To: <CAOM0XWC3uwn=0ecojtvQOxyRnFCe4Si1gg_2AuhcAtdHk6+iLw@mail.gmail.com>
References: <CAC_+zuo1cTxJOhoCxQ7Tquh9v8V+ezkHk821Qdwq20GHPY=J=A@mail.gmail.com>
 <CAOM0XWC3uwn=0ecojtvQOxyRnFCe4Si1gg_2AuhcAtdHk6+iLw@mail.gmail.com>
Message-ID: <CAC_+zuojFmSveD0eTOWRSkYYKaWgB7J1_gyPa190y9Ts=TWK7g@mail.gmail.com>

Hi Alex,
Thanks for replay.
Im speaking about the legend into layer panel. I'm not understand if I can
set the filter legend on map when load an view with a style into layer
panel. Into layer panel exist an check toolbox for this and so i would
activate it when load my view or better if possible set the filter just on
specific vectors.

I hope I have explained well my question

E

Il lun 10 mag 2021, 22:45 Alexis R.L. <alroyliz0 at gmail.com> ha scritto:

> I assume you are talking about the layout legend.
>
> Have a look at
> https://github.com/qgis/QGIS/blob/master/tests/src/python/test_qgslayoutlegend.py
> for reference.
>
>
> Alex
>
>
> Le lun. 10 mai 2021 ? 03:18, Enzo Cocca <enzo.ccc at gmail.com> a ?crit :
>
>> Hi people,
>>
>> How in pyqgis can I set filter legend on base map content in layer panel?
>>
>> I load a vector data and I would set filter legend and I would ask you
>> some suggestions
>>
>> this my code:
>>
>> groupName="%s " % (self.dat)
>> root = QgsProject.instance().layerTreeRoot()
>> group = root.addGroup(groupName)
>> group.setExpanded(False)
>>
>> if settings.SERVER == 'sqlite':
>>             sqliteDB_path = os.path.join(os.sep, 'pyarchinit_DB_folder',
>> settings.DATABASE)
>>             db_file_path = '{}{}'.format(self.HOME, sqliteDB_path)
>>
>>             uri = QgsDataSourceUri()
>>             uri.setDatabase(db_file_path)
>>             uri.setDataSource('', 'pyarchinit_us_view', 'the_geom',
>> cont_per_string, "ROWID")
>>             layerUS = QgsVectorLayer(uri.uri(), layer_name_label_us,
>> 'spatialite')
>>
>>             srs = QgsCoordinateReferenceSystem(self.SRS,
>> QgsCoordinateReferenceSystem.PostgisCrsId)
>>
>>             if layerUS.isValid():
>>                 style_path =
>> '{}{}'.format(self.LAYER_STYLE_PATH_SPATIALITE, 'us_view.qml')
>>                 layerUS.loadNamedStyle(style_path)
>>                 group.insertChildNode(-1, QgsLayerTreeLayer(layerUS))
>>                 QgsProject.instance().addMapLayers([layerUS], False)
>>   Thanks
>> E
>> --
>> Enzo Cocca PhD
>> in "Science and Technology for Archaeology and Cultural Heritage"
>>
>> ISMEO
>> International Association of Mediterranean and Oriental Studies
>>
>>
>> mail: enzo.ccc at gmail.com
>> cell: +393495087014
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/39c241b7/attachment.html>

From rdmailings at duif.net  Mon May 10 23:41:21 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 11 May 2021 08:41:21 +0200
Subject: [QGIS-Developer] pyqgis how set filter legend map content in
 layer panel
In-Reply-To: <CAC_+zuojFmSveD0eTOWRSkYYKaWgB7J1_gyPa190y9Ts=TWK7g@mail.gmail.com>
References: <CAC_+zuo1cTxJOhoCxQ7Tquh9v8V+ezkHk821Qdwq20GHPY=J=A@mail.gmail.com>
 <CAOM0XWC3uwn=0ecojtvQOxyRnFCe4Si1gg_2AuhcAtdHk6+iLw@mail.gmail.com>
 <CAC_+zuojFmSveD0eTOWRSkYYKaWgB7J1_gyPa190y9Ts=TWK7g@mail.gmail.com>
Message-ID: <a01aad34-36cb-fc57-70f5-fa9fc9db5827@duif.net>

On 5/11/21 12:04 AM, Enzo Cocca wrote:
> Hi Alex,
> Thanks for replay.
> Im speaking about the legend into layer panel. I'm not understand if I can set the filter legend on map when load an view with a style into layer panel. Into layer panel exist an check toolbox for this and so i would activate it when load my view or better if possible set the filter just on specific vectors.

Not sure, but you are talking about rule base styling, and you want to change the visibility of one of the 'rules' as if you check the class/rule in the Layer Manager (or in the Rulebased symbology panel)?

If so: maybe you can do it via the layer tree api?
https://www.lutraconsulting.co.uk/blog/2014/07/06/qgis-layer-tree-api-part-1/

Find the specific node and enable/disable it?

Another option is go into the symbology, find the Rule and disable it by using setActive?
https://qgis.org/api/3.18/classQgsRuleBasedRenderer_1_1Rule.html#a8306b64ca0ad4371fce04f4297647d35

But to be honest: I've no experience with it

Regards,

Richard Duivenvoorde



From enzo.ccc at gmail.com  Mon May 10 23:51:41 2021
From: enzo.ccc at gmail.com (Enzo Cocca)
Date: Tue, 11 May 2021 08:51:41 +0200
Subject: [QGIS-Developer] pyqgis how set filter legend map content in
 layer panel
In-Reply-To: <a01aad34-36cb-fc57-70f5-fa9fc9db5827@duif.net>
References: <CAC_+zuo1cTxJOhoCxQ7Tquh9v8V+ezkHk821Qdwq20GHPY=J=A@mail.gmail.com>
 <CAOM0XWC3uwn=0ecojtvQOxyRnFCe4Si1gg_2AuhcAtdHk6+iLw@mail.gmail.com>
 <CAC_+zuojFmSveD0eTOWRSkYYKaWgB7J1_gyPa190y9Ts=TWK7g@mail.gmail.com>
 <a01aad34-36cb-fc57-70f5-fa9fc9db5827@duif.net>
Message-ID: <CAC_+zur3GhjsXyq90yRn50TBxPwTFw5SznzC06dQVwth5T_WDg@mail.gmail.com>

Hi,
I'm speaking about this:

[image: 2021-05-11_08-48-53.jpg]

I want check it automatically when load an vector or using this on specific
layer

E

Il giorno mar 11 mag 2021 alle ore 08:41 Richard Duivenvoorde <
rdmailings at duif.net> ha scritto:

> On 5/11/21 12:04 AM, Enzo Cocca wrote:
> > Hi Alex,
> > Thanks for replay.
> > Im speaking about the legend into layer panel. I'm not understand if I
> can set the filter legend on map when load an view with a style into layer
> panel. Into layer panel exist an check toolbox for this and so i would
> activate it when load my view or better if possible set the filter just on
> specific vectors.
>
> Not sure, but you are talking about rule base styling, and you want to
> change the visibility of one of the 'rules' as if you check the class/rule
> in the Layer Manager (or in the Rulebased symbology panel)?
>
> If so: maybe you can do it via the layer tree api?
>
> https://www.lutraconsulting.co.uk/blog/2014/07/06/qgis-layer-tree-api-part-1/
>
> Find the specific node and enable/disable it?
>
> Another option is go into the symbology, find the Rule and disable it by
> using setActive?
>
> https://qgis.org/api/3.18/classQgsRuleBasedRenderer_1_1Rule.html#a8306b64ca0ad4371fce04f4297647d35
>
> But to be honest: I've no experience with it
>
> Regards,
>
> Richard Duivenvoorde
>
>
>

-- 
Enzo Cocca PhD
in "Science and Technology for Archaeology and Cultural Heritage"

ISMEO
International Association of Mediterranean and Oriental Studies


mail: enzo.ccc at gmail.com
cell: +393495087014
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/db74e894/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2021-05-11_08-48-53.jpg
Type: image/jpeg
Size: 18992 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/db74e894/attachment-0001.jpg>

From andreas at qgis.org  Tue May 11 01:52:18 2021
From: andreas at qgis.org (Andreas Neumann)
Date: Tue, 11 May 2021 10:52:18 +0200
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <391e09bca95e2bcd07e65ced4557e735@duif.net>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
Message-ID: <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>

Hi Richard,

Yes - I think this would be very useful. I would prefer the checkbox for
enabling/disabling without losing the filter string.

Thanks,
Andreas

On Mon, 10 May 2021 at 16:41, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi List,
>
> When I add a filter to a layer, I often want to temporarily disable that
> filter (just to see what the full view is).
>
> Working a lot with sql scripts recently, in which you comment out (a
> part) of a sql query by putting '--' in front of it, I tried that also
> in the Query builder, and though it looks like I'm commenting out my
> query (the query is greyed-out), it's not working, I get a parsing
> error.
>
> So usability question:
> - would other people be interested in temporarily disabling the layer
> filter query, or am I the only one :-)
>
> If yes:
>
> - should it be implemented by 'commenting' out part of the query?
> - or should there be some 'temporarily disable' checkbox in the query
> builder)
> - should it be a context menu (either the layer, or the little filter
> overlay icon in the layermanager)
>
> Tech question:
> - any forseeing issues with such thing?
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/58e41c81/attachment.html>

From pedrongvenancio at gmail.com  Tue May 11 09:50:02 2021
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Tue, 11 May 2021 17:50:02 +0100
Subject: [QGIS-Developer] QGIS compiled agains GDAL 3.3.0 crash opening a
 project
Message-ID: <CAMCJChsiL62sSFuCzFN39Uy8+ccM0ffr+ojs9wP0OJ3s0=MBWQ@mail.gmail.com>

Hi,

Sorry for the cross posting, but after updating QGIS from OSGeo4W testing,
for a version compiled against GDAL 3.3.0, I'm getting a crash opening a
project that works fine in QGIS compiled against GDAL 3.2.2.

Here is a sample project:
https://cld.pt/dl/download/85e3df31-1f7d-4826-96f6-3533328c637e/Sample_Project.zip

Opening this project on:
QGIS version 3.18.2-Z?rich
QGIS code revision 5920dd1a
Compiled against Qt 5.15.2
Running against Qt 5.15.2
Compiled against GDAL/OGR 3.2.2
Running against GDAL/OGR 3.2.2
Compiled against GEOS 3.9.1-CAPI-1.14.2
Running against GEOS 3.9.1-CAPI-1.14.2
Compiled against SQLite 3.35.2
Running against SQLite 3.35.2
Compiled against PDAL 2.2.0
Running against PDAL 2.2.0 (git-version: 365171)
PostgreSQL Client Version 13.0
SpatiaLite Version 5.0.1-rc1
QWT Version 6.1.3
QScintilla2 Version 2.11.5
Compiled against PROJ 8.0.0
Running against PROJ Rel. 8.0.1, March 5th, 2021
OS Version Windows 10 Version 2009

works fine.

But trying to open on:
QGIS version 3.18.2-Z?rich
QGIS code revision 515138c171
Compiled against Qt 5.15.2
Running against Qt 5.15.2
Compiled against GDAL/OGR 3.3.0
Running against GDAL/OGR 3.3.0
Compiled against GEOS 3.9.1-CAPI-1.14.2
Running against GEOS 3.9.1-CAPI-1.14.2
Compiled against SQLite 3.35.2
Running against SQLite 3.35.2
Compiled against PDAL 2.2.0
Running against PDAL 2.2.0 (git-version: 365171)
PostgreSQL Client Version 13.0
SpatiaLite Version 5.0.1-rc1
QWT Version 6.1.3
QScintilla2 Version 2.11.5
Compiled against PROJ 8.0.1
Running against PROJ Rel. 8.0.1, March 5th, 2021
OS Version Windows 10 Version 2009

it crashes before open.

Can anyone confirm? Can this be related to GDAL 3.3 update? It's the only
difference I can see, besides minor update to PROJ 8.0.1.

Thank you very much.

Best regards,
Pedro Ven?ncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/6329fa72/attachment.html>

From senhor.neto at gmail.com  Tue May 11 12:24:29 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 11 May 2021 20:24:29 +0100
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
 <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>
Message-ID: <CA+H0G_F=M1mENqFdJZyciWLwV4tM78LFwu0cZTrTq55c-ywqEQ@mail.gmail.com>

As an workaround, can't you just create a new style and remove the filter?
Then go back to the default style?

Obviously a checkbox would be much more user friendly.

Alexandre Neto

A ter?a, 11/05/2021, 09:52, Andreas Neumann <andreas at qgis.org> escreveu:

> Hi Richard,
>
> Yes - I think this would be very useful. I would prefer the checkbox for
> enabling/disabling without losing the filter string.
>
> Thanks,
> Andreas
>
> On Mon, 10 May 2021 at 16:41, Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
>> Hi List,
>>
>> When I add a filter to a layer, I often want to temporarily disable that
>> filter (just to see what the full view is).
>>
>> Working a lot with sql scripts recently, in which you comment out (a
>> part) of a sql query by putting '--' in front of it, I tried that also
>> in the Query builder, and though it looks like I'm commenting out my
>> query (the query is greyed-out), it's not working, I get a parsing
>> error.
>>
>> So usability question:
>> - would other people be interested in temporarily disabling the layer
>> filter query, or am I the only one :-)
>>
>> If yes:
>>
>> - should it be implemented by 'commenting' out part of the query?
>> - or should there be some 'temporarily disable' checkbox in the query
>> builder)
>> - should it be a context menu (either the layer, or the little filter
>> overlay icon in the layermanager)
>>
>> Tech question:
>> - any forseeing issues with such thing?
>>
>> Regards,
>>
>> Richard Duivenvoorde
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
>
> --
> Andreas Neumann
> QGIS.ORG board member (treasurer)
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/546289bb/attachment.html>

From matthias at opengis.ch  Tue May 11 13:10:19 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 11 May 2021 22:10:19 +0200
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <CA+H0G_F=M1mENqFdJZyciWLwV4tM78LFwu0cZTrTq55c-ywqEQ@mail.gmail.com>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
 <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>
 <CA+H0G_F=M1mENqFdJZyciWLwV4tM78LFwu0cZTrTq55c-ywqEQ@mail.gmail.com>
Message-ID: <CAC7zN95TSAcv-ff-3DgrE1doBYTJRqgZ9dv_MPH2ksW0YVVuAw@mail.gmail.com>

Unfortunately, that won't work, filters are not part of the style.

On Tue, May 11, 2021 at 9:24 PM Alexandre Neto <senhor.neto at gmail.com>
wrote:

> As an workaround, can't you just create a new style and remove the filter?
> Then go back to the default style?
>
> Obviously a checkbox would be much more user friendly.
>
> Alexandre Neto
>
> A ter?a, 11/05/2021, 09:52, Andreas Neumann <andreas at qgis.org> escreveu:
>
>> Hi Richard,
>>
>> Yes - I think this would be very useful. I would prefer the checkbox for
>> enabling/disabling without losing the filter string.
>>
>> Thanks,
>> Andreas
>>
>> On Mon, 10 May 2021 at 16:41, Richard Duivenvoorde <rdmailings at duif.net>
>> wrote:
>>
>>> Hi List,
>>>
>>> When I add a filter to a layer, I often want to temporarily disable that
>>> filter (just to see what the full view is).
>>>
>>> Working a lot with sql scripts recently, in which you comment out (a
>>> part) of a sql query by putting '--' in front of it, I tried that also
>>> in the Query builder, and though it looks like I'm commenting out my
>>> query (the query is greyed-out), it's not working, I get a parsing
>>> error.
>>>
>>> So usability question:
>>> - would other people be interested in temporarily disabling the layer
>>> filter query, or am I the only one :-)
>>>
>>> If yes:
>>>
>>> - should it be implemented by 'commenting' out part of the query?
>>> - or should there be some 'temporarily disable' checkbox in the query
>>> builder)
>>> - should it be a context menu (either the layer, or the little filter
>>> overlay icon in the layermanager)
>>>
>>> Tech question:
>>> - any forseeing issues with such thing?
>>>
>>> Regards,
>>>
>>> Richard Duivenvoorde
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>> --
>>
>> --
>> Andreas Neumann
>> QGIS.ORG board member (treasurer)
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/5f16ea12/attachment.html>

From senhor.neto at gmail.com  Tue May 11 13:31:43 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 11 May 2021 21:31:43 +0100
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <CAC7zN95TSAcv-ff-3DgrE1doBYTJRqgZ9dv_MPH2ksW0YVVuAw@mail.gmail.com>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
 <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>
 <CA+H0G_F=M1mENqFdJZyciWLwV4tM78LFwu0cZTrTq55c-ywqEQ@mail.gmail.com>
 <CAC7zN95TSAcv-ff-3DgrE1doBYTJRqgZ9dv_MPH2ksW0YVVuAw@mail.gmail.com>
Message-ID: <CA+H0G_HpLSq7cV0ZY4=KiyWZCWcgCK0hT7WHTek9-5pKLHjz2w@mail.gmail.com>

Bad workaround then :-p

A ter?a, 11/05/2021, 21:10, Matthias Kuhn <matthias at opengis.ch> escreveu:

> Unfortunately, that won't work, filters are not part of the style.
>
> On Tue, May 11, 2021 at 9:24 PM Alexandre Neto <senhor.neto at gmail.com>
> wrote:
>
>> As an workaround, can't you just create a new style and remove the
>> filter? Then go back to the default style?
>>
>> Obviously a checkbox would be much more user friendly.
>>
>> Alexandre Neto
>>
>> A ter?a, 11/05/2021, 09:52, Andreas Neumann <andreas at qgis.org> escreveu:
>>
>>> Hi Richard,
>>>
>>> Yes - I think this would be very useful. I would prefer the checkbox for
>>> enabling/disabling without losing the filter string.
>>>
>>> Thanks,
>>> Andreas
>>>
>>> On Mon, 10 May 2021 at 16:41, Richard Duivenvoorde <rdmailings at duif.net>
>>> wrote:
>>>
>>>> Hi List,
>>>>
>>>> When I add a filter to a layer, I often want to temporarily disable
>>>> that
>>>> filter (just to see what the full view is).
>>>>
>>>> Working a lot with sql scripts recently, in which you comment out (a
>>>> part) of a sql query by putting '--' in front of it, I tried that also
>>>> in the Query builder, and though it looks like I'm commenting out my
>>>> query (the query is greyed-out), it's not working, I get a parsing
>>>> error.
>>>>
>>>> So usability question:
>>>> - would other people be interested in temporarily disabling the layer
>>>> filter query, or am I the only one :-)
>>>>
>>>> If yes:
>>>>
>>>> - should it be implemented by 'commenting' out part of the query?
>>>> - or should there be some 'temporarily disable' checkbox in the query
>>>> builder)
>>>> - should it be a context menu (either the layer, or the little filter
>>>> overlay icon in the layermanager)
>>>>
>>>> Tech question:
>>>> - any forseeing issues with such thing?
>>>>
>>>> Regards,
>>>>
>>>> Richard Duivenvoorde
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>
>>>
>>> --
>>>
>>> --
>>> Andreas Neumann
>>> QGIS.ORG board member (treasurer)
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/8344a8b2/attachment-0001.html>

From jgr at di.uminho.pt  Tue May 11 13:45:55 2021
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Tue, 11 May 2021 21:45:55 +0100
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <CA+H0G_HpLSq7cV0ZY4=KiyWZCWcgCK0hT7WHTek9-5pKLHjz2w@mail.gmail.com>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
 <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>
 <CA+H0G_F=M1mENqFdJZyciWLwV4tM78LFwu0cZTrTq55c-ywqEQ@mail.gmail.com>
 <CAC7zN95TSAcv-ff-3DgrE1doBYTJRqgZ9dv_MPH2ksW0YVVuAw@mail.gmail.com>
 <CA+H0G_HpLSq7cV0ZY4=KiyWZCWcgCK0hT7WHTek9-5pKLHjz2w@mail.gmail.com>
Message-ID: <0dea587e-c66d-bda9-523a-d086476e8835@di.uminho.pt>

Hi,

Another workaround is layer duplication. You can have an instance
without filters and one with filters. Then switch between them.

But a filter history for the layer (like the one in the old DB manager
where you can save queries), could be useful.

Regards,

Jorge

On 11/05/21 21:31, Alexandre Neto wrote:
> Bad workaround then :-p
> 
> A ter?a, 11/05/2021, 21:10, Matthias Kuhn <matthias at opengis.ch
> <mailto:matthias at opengis.ch>> escreveu:
> 
>     Unfortunately, that won't work, filters are not part of the style.
> 
>     On Tue, May 11, 2021 at 9:24 PM Alexandre Neto
>     <senhor.neto at gmail.com <mailto:senhor.neto at gmail.com>> wrote:
> 
>         As an workaround, can't you just create a new style and remove
>         the filter? Then go back to the default style?
> 
>         Obviously a checkbox would be much more user friendly.
> 
>         Alexandre Neto
> 
>         A ter?a, 11/05/2021, 09:52, Andreas Neumann <andreas at qgis.org
>         <mailto:andreas at qgis.org>> escreveu:
> 
>             Hi Richard,
> 
>             Yes - I think this would be very useful. I would prefer the
>             checkbox for enabling/disabling without losing the filter
>             string.
> 
>             Thanks,
>             Andreas
> 
>             On Mon, 10 May 2021 at 16:41, Richard Duivenvoorde
>             <rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
> 
>                 Hi List,
> 
>                 When I add a filter to a layer, I often want to
>                 temporarily disable that
>                 filter (just to see what the full view is).
> 
>                 Working a lot with sql scripts recently, in which you
>                 comment out (a
>                 part) of a sql query by putting '--' in front of it, I
>                 tried that also
>                 in the Query builder, and though it looks like I'm
>                 commenting out my
>                 query (the query is greyed-out), it's not working, I get
>                 a parsing
>                 error.
> 
>                 So usability question:
>                 - would other people be interested in temporarily
>                 disabling the layer
>                 filter query, or am I the only one :-)
> 
>                 If yes:
> 
>                 - should it be implemented by 'commenting' out part of
>                 the query?
>                 - or should there be some 'temporarily disable' checkbox
>                 in the query
>                 builder)
>                 - should it be a context menu (either the layer, or the
>                 little filter
>                 overlay icon in the layermanager)
> 
>                 Tech question:
>                 - any forseeing issues with such thing?
> 
>                 Regards,
> 
>                 Richard Duivenvoorde
>                 _______________________________________________
>                 QGIS-Developer mailing list
>                 QGIS-Developer at lists.osgeo.org
>                 <mailto:QGIS-Developer at lists.osgeo.org>
>                 List info:
>                 https://lists.osgeo.org/mailman/listinfo/qgis-developer
>                 <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>                 Unsubscribe:
>                 https://lists.osgeo.org/mailman/listinfo/qgis-developer
>                 <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 
> 
> 
>             -- 
> 
>             --
>             Andreas Neumann
>             QGIS.ORG <http://QGIS.ORG> board member (treasurer)
>             _______________________________________________
>             QGIS-Developer mailing list
>             QGIS-Developer at lists.osgeo.org
>             <mailto:QGIS-Developer at lists.osgeo.org>
>             List info:
>             https://lists.osgeo.org/mailman/listinfo/qgis-developer
>             <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>             Unsubscribe:
>             https://lists.osgeo.org/mailman/listinfo/qgis-developer
>             <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         List info:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>         Unsubscribe:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor

From pergler at gmail.com  Tue May 11 14:32:44 2021
From: pergler at gmail.com (Martin Pergler)
Date: Tue, 11 May 2021 14:32:44 -0700 (MST)
Subject: [QGIS-Developer] QGIS compiled agains GDAL 3.3.0 crash opening
 a project
In-Reply-To: <CAMCJChsiL62sSFuCzFN39Uy8+ccM0ffr+ojs9wP0OJ3s0=MBWQ@mail.gmail.com>
References: <CAMCJChsiL62sSFuCzFN39Uy8+ccM0ffr+ojs9wP0OJ3s0=MBWQ@mail.gmail.com>
Message-ID: <1620768764872-0.post@n6.nabble.com>

Seems GDAL 3.3.0 is miscompiled. In my case, I'm not getting crashes, just
QGIS unable to open any LERC-compressed TIFF files with an uninformative
error message from QGIS. However, can be tracked down to GDAL likely
compiled without internal libtiff and so gdalinfo gives:

Warning 1: GS0327-dem_cliplerc.tif: GS0327-dem_cliplerc.tif:LERC compression
support is not configured
ERROR 1: GS0327-dem_cliplerc.tif: Cannot open TIFF file due to missing
codec.

Bug report submitted (for the LERC problem, not your crash):
https://trac.osgeo.org/osgeo4w/ticket/679



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rdmailings at duif.net  Tue May 11 23:04:03 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 12 May 2021 08:04:03 +0200
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <0dea587e-c66d-bda9-523a-d086476e8835@di.uminho.pt>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
 <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>
 <CA+H0G_F=M1mENqFdJZyciWLwV4tM78LFwu0cZTrTq55c-ywqEQ@mail.gmail.com>
 <CAC7zN95TSAcv-ff-3DgrE1doBYTJRqgZ9dv_MPH2ksW0YVVuAw@mail.gmail.com>
 <CA+H0G_HpLSq7cV0ZY4=KiyWZCWcgCK0hT7WHTek9-5pKLHjz2w@mail.gmail.com>
 <0dea587e-c66d-bda9-523a-d086476e8835@di.uminho.pt>
Message-ID: <2826597d-59b0-8625-357e-3926130ccdda@duif.net>

On 5/11/21 10:45 PM, Jorge Gustavo Rocha wrote:
> Hi,
> 
> Another workaround is layer duplication. You can have an instance
> without filters and one with filters. Then switch between them.
> 
> But a filter history for the layer (like the one in the old DB manager
> where you can save queries), could be useful.

I'd probably go for the checkbox in the query dialog then. Clicking the little 'filter' icon in the layer manager will popup the query dialog.

Duplicating a layer is an option, but messes up your project, if all you want to do is go over some specific ID's.
A 'Recent' item IS available, so history IS available, it's just not convenient enough for me.

Regards & thanks for input.

Richard Duivenvoorde


From a.neumann at carto.net  Tue May 11 23:07:53 2021
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed, 12 May 2021 08:07:53 +0200
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <2826597d-59b0-8625-357e-3926130ccdda@duif.net>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
 <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>
 <CA+H0G_F=M1mENqFdJZyciWLwV4tM78LFwu0cZTrTq55c-ywqEQ@mail.gmail.com>
 <CAC7zN95TSAcv-ff-3DgrE1doBYTJRqgZ9dv_MPH2ksW0YVVuAw@mail.gmail.com>
 <CA+H0G_HpLSq7cV0ZY4=KiyWZCWcgCK0hT7WHTek9-5pKLHjz2w@mail.gmail.com>
 <0dea587e-c66d-bda9-523a-d086476e8835@di.uminho.pt>
 <2826597d-59b0-8625-357e-3926130ccdda@duif.net>
Message-ID: <d2a48dd18ae705bf4b31f55da6dd32e2@carto.net>

Hi Richard and all,

Speaking of the little "Filter icon". Couldn't this icon be used to 
toggle the filter state "on"/"off"?

A single click would toggle on/off state, a double click would open the 
dialog?

Just an idea. Not sure if it is doable.

Thanks for working on this,
Andreas

On 2021-05-12 08:04, Richard Duivenvoorde wrote:

> On 5/11/21 10:45 PM, Jorge Gustavo Rocha wrote:
> 
>> Hi,
>> 
>> Another workaround is layer duplication. You can have an instance
>> without filters and one with filters. Then switch between them.
>> 
>> But a filter history for the layer (like the one in the old DB manager
>> where you can save queries), could be useful.
> 
> I'd probably go for the checkbox in the query dialog then. Clicking the 
> little 'filter' icon in the layer manager will popup the query dialog.
> 
> Duplicating a layer is an option, but messes up your project, if all 
> you want to do is go over some specific ID's.
> A 'Recent' item IS available, so history IS available, it's just not 
> convenient enough for me.
> 
> Regards & thanks for input.
> 
> Richard Duivenvoorde
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210512/7861dc36/attachment.html>

From rdmailings at duif.net  Wed May 12 00:47:51 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 12 May 2021 09:47:51 +0200
Subject: [QGIS-Developer] Disable/commenting provider filter?
In-Reply-To: <d2a48dd18ae705bf4b31f55da6dd32e2@carto.net>
References: <391e09bca95e2bcd07e65ced4557e735@duif.net>
 <CAB2Z92C9nmvtDn7_XYtkJVjsozfHF31dqYvqYPxg176rXmAoPQ@mail.gmail.com>
 <CA+H0G_F=M1mENqFdJZyciWLwV4tM78LFwu0cZTrTq55c-ywqEQ@mail.gmail.com>
 <CAC7zN95TSAcv-ff-3DgrE1doBYTJRqgZ9dv_MPH2ksW0YVVuAw@mail.gmail.com>
 <CA+H0G_HpLSq7cV0ZY4=KiyWZCWcgCK0hT7WHTek9-5pKLHjz2w@mail.gmail.com>
 <0dea587e-c66d-bda9-523a-d086476e8835@di.uminho.pt>
 <2826597d-59b0-8625-357e-3926130ccdda@duif.net>
 <d2a48dd18ae705bf4b31f55da6dd32e2@carto.net>
Message-ID: <f147782e-80bb-735d-0e4a-ebb32da0b413@duif.net>

On 5/12/21 8:07 AM, Andreas Neumann wrote:
> Hi Richard and all,
> 
> Speaking of the little "Filter icon". Couldn't this icon be used to toggle the filter state "on"/"off"?
> 
> A single click would toggle on/off state, a double click would open the dialog?

Currently clicking on it will pop up the query builder dialog.

I've been thinking about what you propose too, but do not want to break current behaviour,
That is why I thought about a context menu or so.

But easiest probably is: click on icon (which optionally will have two versions: an active/inactive one), to show dialog and a checkbox there.

Richard

From peter.petrik at lutraconsulting.co.uk  Wed May 12 00:51:13 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Wed, 12 May 2021 09:51:13 +0200
Subject: [QGIS-Developer] QgsQuick removal
Message-ID: <CA+T_MsKqmwbB_c4qj1TcoPTVXDYrPsZLSXXgNEGsCTevPxDUOw@mail.gmail.com>

Hi devs,

I will be removing QgsQuick library related pieces from the qgis/QGIS
repository if there are no strong objections.

The reasons are:
- the release cycle for QgsQuick is different than QGIS core, more based on
the InputApp releases
- QgsQuick is not used by other projects but InputApp despite being on
master for few years (as far as I know)
- In case we would like to use Qt QML in QGIS desktop, we will probably
need different QML classes than for mobile devices (e.g. on mobile devices
you do not edit form config, etc) anyways
- QgsQuick library is not shipped with the regular QGIS packaging system,
not build/tested in the CI mostly (e.g. the tests on master are coredumping
ATM), so it doesn't really matured to the common QML library
- There is an extra maintenance of the QgsQuick (pull requests in
qgis/QGIS, CI setup, code maintenance, test runs) for the QGIS developers
and to the QGIS infrastructure as such.
- There is quite a maintenance cost of Lutra Team to backport the changes
from Input back to qgis/QGIS, keep the code in sync, test and in general
use a library+application split when not necessary.

Therefore we do not see the reasons why to spend extra time on the
community and us to maintain this bit. The code will be still present in
the https://github.com/lutraconsulting/input open-source project, so in
case other Qt/QGIS related mobile projects would like to build something on
top of it, we would be happy to cooperate.

Cheers,
Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210512/5e114019/attachment.html>

From apasotti at gmail.com  Wed May 12 01:01:37 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 12 May 2021 10:01:37 +0200
Subject: [QGIS-Developer] QgsQuick removal
In-Reply-To: <CA+T_MsKqmwbB_c4qj1TcoPTVXDYrPsZLSXXgNEGsCTevPxDUOw@mail.gmail.com>
References: <CA+T_MsKqmwbB_c4qj1TcoPTVXDYrPsZLSXXgNEGsCTevPxDUOw@mail.gmail.com>
Message-ID: <CAL5Q672mAEv-u-hH4qeLyBEHwZbyq9WrKv1HZN8BybAkRv1t4g@mail.gmail.com>

On Wed, May 12, 2021 at 9:51 AM Peter Petrik <
peter.petrik at lutraconsulting.co.uk> wrote:

> Hi devs,
>
> I will be removing QgsQuick library related pieces from the qgis/QGIS
> repository if there are no strong objections.
>
> The reasons are:
> - the release cycle for QgsQuick is different than QGIS core, more based
> on the InputApp releases
> - QgsQuick is not used by other projects but InputApp despite being on
> master for few years (as far as I know)
> - In case we would like to use Qt QML in QGIS desktop, we will probably
> need different QML classes than for mobile devices (e.g. on mobile devices
> you do not edit form config, etc) anyways
> - QgsQuick library is not shipped with the regular QGIS packaging system,
> not build/tested in the CI mostly (e.g. the tests on master are coredumping
> ATM), so it doesn't really matured to the common QML library
> - There is an extra maintenance of the QgsQuick (pull requests in
> qgis/QGIS, CI setup, code maintenance, test runs) for the QGIS developers
> and to the QGIS infrastructure as such.
> - There is quite a maintenance cost of Lutra Team to backport the changes
> from Input back to qgis/QGIS, keep the code in sync, test and in general
> use a library+application split when not necessary.
>
> Therefore we do not see the reasons why to spend extra time on the
> community and us to maintain this bit. The code will be still present in
> the https://github.com/lutraconsulting/input open-source project, so in
> case other Qt/QGIS related mobile projects would like to build something on
> top of it, we would be happy to cooperate.
>
> Cheers,
> Peter
>
>
Hello Peter,

I understand the reasons but to be honest I'm a little sad: I hoped that
QgsQuick would have become the solid and common foundation for **all** QGIS
mobile apps, I believe this was the reason for having it under the QGIS.org
umbrella.

I see this as a community failure (not yours of course).

Anyway, you (QgsQuick devs) deserve the last word on this matter: the
choice is yours.

Regards.

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210512/633299c5/attachment-0001.html>

From r.aguilar at utwente.nl  Wed May 12 03:17:44 2021
From: r.aguilar at utwente.nl (r.aguilar at utwente.nl)
Date: Wed, 12 May 2021 10:17:44 +0000
Subject: [QGIS-Developer] QNetworkDiskCache::prepare() unable to open
 temporary file
Message-ID: <b384e311385141189a667bc5a9f5e176@utwente.nl>

Dear devs,

I am still getting the error QNetworkDiskCache::prepare() in QGIS server (ubuntu bionic) ( https://gis.stackexchange.com/questions/42491/warning-qnetworkdiskcacheprepare-unable-to-open-temporary-file).
This ?error? occurs when I move the map. When I send a getCapabilities request I get a warning (QGIS server side)
?WMS capabilities document not found in cache?
Did some search and tried some options (1) to get rid of this ?error? with no success.
I found that this question has been asked somewhere else ( https://www.mail-archive.com/qgis-user at lists.osgeo.org/msg48102.html <https://lists.osgeo.org/pipermail/qgis-user/2021-April/048576.html> ) without answer yet.
I will rephrase my question then, is this something that I should be worried about or just live with that?

Best regards,


1. Giving full permissions to the folder for the cache.
2. Setting the TMPDIR  https://askubuntu.com/questions/1297403/change-temp-file-location-of-qgis-in-ubuntu
3. Configuring the cache folder (QGIS_SERVER_CACHE_DIRECTORY ) as explained in the doc.
4. Setting apache service with PrivateTmp=false ( https://muras.eu/2017/12/06/apache-ubuntu-systemd-privatetmp/; https://github.com/qgis/QGIS/issues/26243)
5. Setting the variable directory in  QGIS3.ini file as below:
[cache]
directory=/tmpcacheqgis

-----------------------------------------------------------------
MSc Rosa Aguilar - PhD Candidate
University of Twente
Faculty of Geoinformation Science and Earth Observation
Connect with me on LinkedIn<https://www.linkedin.com/in/rosamaguilar/?locale=en_US>
https://rosaguilar.github.io<https://rosaguilar.github.io/>
-----------------------------------------------------------------
The essential is invisible to the eye. Saint-Exup?ry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210512/de2b9666/attachment.html>

From nyall.dawson at gmail.com  Wed May 12 15:43:40 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 13 May 2021 08:43:40 +1000
Subject: [QGIS-Developer] QGIS news feed certificate expired
Message-ID: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>

Morning!

Can someone please renew the certificate for feed.qgis.org as a matter
of urgency? ALL (globally) of our users are experiencing a
"certificate has expired" error on QGIS startup right now...!

Nyall

From marco at qgis.org  Thu May 13 01:14:04 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Thu, 13 May 2021 10:14:04 +0200
Subject: [QGIS-Developer] [Qgis-psc] QGIS news feed certificate expired
In-Reply-To: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>
References: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>
Message-ID: <CAB2ZMRAoRP9vJbdq1ThVepy8rPwDiH9eEFMNw4ehMPJa5B7-kA@mail.gmail.com>

hey Nyall thanks for the heads up. I pinged Tim privately as well.
I've unfortunately no idea about that machine. I'll try to have a look.

cheers Marco

On Thu, 13 May 2021, 00:43 Nyall Dawson, <nyall.dawson at gmail.com> wrote:

> Morning!
>
> Can someone please renew the certificate for feed.qgis.org as a matter
> of urgency? ALL (globally) of our users are experiencing a
> "certificate has expired" error on QGIS startup right now...!
>
> Nyall
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/ef3be9e9/attachment.html>

From matthias at opengis.ch  Thu May 13 01:17:27 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Thu, 13 May 2021 10:17:27 +0200
Subject: [QGIS-Developer] QgsQuick removal
In-Reply-To: <CA+T_MsKqmwbB_c4qj1TcoPTVXDYrPsZLSXXgNEGsCTevPxDUOw@mail.gmail.com>
References: <CA+T_MsKqmwbB_c4qj1TcoPTVXDYrPsZLSXXgNEGsCTevPxDUOw@mail.gmail.com>
Message-ID: <CAC7zN96UzsnqJ-ntxurPYdhXVZ8js1PngzUGFjZd5ZnH=xMq+g@mail.gmail.com>

Hi Peter,

Indeed the QgsQuick library is mostly an externalized library for input at
the moment and I can understand the reasons for coming forward with this
proposal.

One of the reasons for not picking it up completely in QField was that some
of the included components have been under heavy development on QField side
too, sometimes with app specific changes.

However there are some core parts which can be well mutualized and a
collaboration was envisioned on QField side too.
They are kept in a dedicated folder in the QField repository
https://github.com/opengisch/QField/tree/master/src/core/qgsquick

I think keeping these in place would be good, this way we can preserve a
nucleus of a generic library. If you are ok with that, we'll make sure to
integrate the latest changes from the QField repository soon.

Thank you
Matthias

On Wed, May 12, 2021 at 9:51 AM Peter Petrik <
peter.petrik at lutraconsulting.co.uk> wrote:

> Hi devs,
>
> I will be removing QgsQuick library related pieces from the qgis/QGIS
> repository if there are no strong objections.
>
> The reasons are:
> - the release cycle for QgsQuick is different than QGIS core, more based
> on the InputApp releases
> - QgsQuick is not used by other projects but InputApp despite being on
> master for few years (as far as I know)
> - In case we would like to use Qt QML in QGIS desktop, we will probably
> need different QML classes than for mobile devices (e.g. on mobile devices
> you do not edit form config, etc) anyways
> - QgsQuick library is not shipped with the regular QGIS packaging system,
> not build/tested in the CI mostly (e.g. the tests on master are coredumping
> ATM), so it doesn't really matured to the common QML library
> - There is an extra maintenance of the QgsQuick (pull requests in
> qgis/QGIS, CI setup, code maintenance, test runs) for the QGIS developers
> and to the QGIS infrastructure as such.
> - There is quite a maintenance cost of Lutra Team to backport the changes
> from Input back to qgis/QGIS, keep the code in sync, test and in general
> use a library+application split when not necessary.
>
> Therefore we do not see the reasons why to spend extra time on the
> community and us to maintain this bit. The code will be still present in
> the https://github.com/lutraconsulting/input open-source project, so in
> case other Qt/QGIS related mobile projects would like to build something on
> top of it, we would be happy to cooperate.
>
> Cheers,
> Peter
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/286d67ac/attachment.html>

From rdmailings at duif.net  Thu May 13 01:19:11 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 13 May 2021 10:19:11 +0200
Subject: [QGIS-Developer] [Qgis-psc] QGIS news feed certificate expired
In-Reply-To: <CAB2ZMRAoRP9vJbdq1ThVepy8rPwDiH9eEFMNw4ehMPJa5B7-kA@mail.gmail.com>
References: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>
 <CAB2ZMRAoRP9vJbdq1ThVepy8rPwDiH9eEFMNw4ehMPJa5B7-kA@mail.gmail.com>
Message-ID: <dfe71123-de19-3b73-c46e-f07d5e776841@duif.net>

On 5/13/21 10:14 AM, Marco Bernasocchi wrote:
> hey Nyall thanks for the heads up. I pinged Tim privately as well.?
> I've unfortunately no idea about that machine. I'll try to have a look.

I do have access to the machine, but I don't know the procedure (looks like there is supposed to be a cronjob running, calling some docker based task???). Peeps in admin at qgis.org receive messages about that it is expiring, I'm happy to feel responsible IF the procedure is explained to me.
I'll try to figure out (help appreciated on IRC)

Also: I think the aggregations is failing: latest news is old?

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Thu May 13 01:21:52 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 13 May 2021 10:21:52 +0200
Subject: [QGIS-Developer] [Qgis-psc] QGIS news feed certificate expired
In-Reply-To: <dfe71123-de19-3b73-c46e-f07d5e776841@duif.net>
References: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>
 <CAB2ZMRAoRP9vJbdq1ThVepy8rPwDiH9eEFMNw4ehMPJa5B7-kA@mail.gmail.com>
 <dfe71123-de19-3b73-c46e-f07d5e776841@duif.net>
Message-ID: <540b391f-2ce3-30c7-dac1-9e440dc909b5@duif.net>

On 5/13/21 10:19 AM, Richard Duivenvoorde wrote:

> I'll try to figure out (help appreciated on IRC)

Ok Done.

Regards,

Richard Duivenvoorde

From tim at kartoza.com  Thu May 13 01:43:33 2021
From: tim at kartoza.com (Tim Sutton)
Date: Thu, 13 May 2021 09:43:33 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS news feed certificate expired
In-Reply-To: <540b391f-2ce3-30c7-dac1-9e440dc909b5@duif.net>
References: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>
 <CAB2ZMRAoRP9vJbdq1ThVepy8rPwDiH9eEFMNw4ehMPJa5B7-kA@mail.gmail.com>
 <dfe71123-de19-3b73-c46e-f07d5e776841@duif.net>
 <540b391f-2ce3-30c7-dac1-9e440dc909b5@duif.net>
Message-ID: <CAES-DZQ-g1RNy-uQD4Q0XYAHH3Si-7UupJJffZTm03o=di_OKg@mail.gmail.com>

Hi All

Thanks Richard

Just a reminder, the process is well documented here:

https://github.com/qgis/qgis-feed#troubleshooting-ssl-in-production

I fixed a couple of typos in the docs and script.

The cert is set to autorenew so I dont know why from time to time it does
this. I will ask one of our team to take a look again.

Thanks

Regards

Tim

On Thu, May 13, 2021 at 9:22 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 5/13/21 10:19 AM, Richard Duivenvoorde wrote:
>
> > I'll try to figure out (help appreciated on IRC)
>
> Ok Done.
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/615bb39a/attachment-0001.html>

From peter.petrik at lutraconsulting.co.uk  Thu May 13 01:50:21 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Thu, 13 May 2021 10:50:21 +0200
Subject: [QGIS-Developer] QgsQuick removal
In-Reply-To: <CAC7zN96UzsnqJ-ntxurPYdhXVZ8js1PngzUGFjZd5ZnH=xMq+g@mail.gmail.com>
References: <CA+T_MsKqmwbB_c4qj1TcoPTVXDYrPsZLSXXgNEGsCTevPxDUOw@mail.gmail.com>
 <CAC7zN96UzsnqJ-ntxurPYdhXVZ8js1PngzUGFjZd5ZnH=xMq+g@mail.gmail.com>
Message-ID: <CA+T_MsLgXog6L23t28qRpuCFr03SYqLdRSe7omTjPST8zzd5rQ@mail.gmail.com>

Hi,

thanks for this agreement and I will do the changes accordingly in the
Input app and QGIS this week.

Peter

On Thu, May 13, 2021 at 10:17 AM Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Peter,
>
> Indeed the QgsQuick library is mostly an externalized library for input at
> the moment and I can understand the reasons for coming forward with this
> proposal.
>
> One of the reasons for not picking it up completely in QField was that
> some of the included components have been under heavy development on QField
> side too, sometimes with app specific changes.
>
> However there are some core parts which can be well mutualized and a
> collaboration was envisioned on QField side too.
> They are kept in a dedicated folder in the QField repository
> https://github.com/opengisch/QField/tree/master/src/core/qgsquick
>
> I think keeping these in place would be good, this way we can preserve a
> nucleus of a generic library. If you are ok with that, we'll make sure to
> integrate the latest changes from the QField repository soon.
>
> Thank you
> Matthias
>
> On Wed, May 12, 2021 at 9:51 AM Peter Petrik <
> peter.petrik at lutraconsulting.co.uk> wrote:
>
>> Hi devs,
>>
>> I will be removing QgsQuick library related pieces from the qgis/QGIS
>> repository if there are no strong objections.
>>
>> The reasons are:
>> - the release cycle for QgsQuick is different than QGIS core, more based
>> on the InputApp releases
>> - QgsQuick is not used by other projects but InputApp despite being on
>> master for few years (as far as I know)
>> - In case we would like to use Qt QML in QGIS desktop, we will probably
>> need different QML classes than for mobile devices (e.g. on mobile devices
>> you do not edit form config, etc) anyways
>> - QgsQuick library is not shipped with the regular QGIS packaging system,
>> not build/tested in the CI mostly (e.g. the tests on master are coredumping
>> ATM), so it doesn't really matured to the common QML library
>> - There is an extra maintenance of the QgsQuick (pull requests in
>> qgis/QGIS, CI setup, code maintenance, test runs) for the QGIS developers
>> and to the QGIS infrastructure as such.
>> - There is quite a maintenance cost of Lutra Team to backport the changes
>> from Input back to qgis/QGIS, keep the code in sync, test and in general
>> use a library+application split when not necessary.
>>
>> Therefore we do not see the reasons why to spend extra time on the
>> community and us to maintain this bit. The code will be still present in
>> the https://github.com/lutraconsulting/input open-source project, so in
>> case other Qt/QGIS related mobile projects would like to build something on
>> top of it, we would be happy to cooperate.
>>
>> Cheers,
>> Peter
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/40237340/attachment.html>

From rdmailings at duif.net  Thu May 13 01:55:32 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 13 May 2021 10:55:32 +0200
Subject: [QGIS-Developer] [Qgis-psc] QGIS news feed certificate expired
In-Reply-To: <CAES-DZQ-g1RNy-uQD4Q0XYAHH3Si-7UupJJffZTm03o=di_OKg@mail.gmail.com>
References: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>
 <CAB2ZMRAoRP9vJbdq1ThVepy8rPwDiH9eEFMNw4ehMPJa5B7-kA@mail.gmail.com>
 <dfe71123-de19-3b73-c46e-f07d5e776841@duif.net>
 <540b391f-2ce3-30c7-dac1-9e440dc909b5@duif.net>
 <CAES-DZQ-g1RNy-uQD4Q0XYAHH3Si-7UupJJffZTm03o=di_OKg@mail.gmail.com>
Message-ID: <4c807c31-b6ae-0f88-902d-bca9372cc044@duif.net>

Ah, Thanks Tim, sorry I missed that info 

Which authentication database is it using (osgeo ldap? other?), because I'm not able to log in into /admin to have a look why apparently the news items (of the blogospace) seem not to be update?

Richard

On 5/13/21 10:43 AM, Tim Sutton wrote:
> Hi All
> 
> Thanks Richard
> 
> Just a reminder, the process is well documented here:
> 
> https://github.com/qgis/qgis-feed#troubleshooting-ssl-in-production <https://github.com/qgis/qgis-feed#troubleshooting-ssl-in-production>
> 
> I fixed a couple of typos in the docs and script.
> 
> The cert is set to autorenew so I dont know why from time to time it does this. I will ask one of our team to take a look again.
> 
> Thanks
> 
> Regards
> 
> Tim
> 
> On Thu, May 13, 2021 at 9:22 AM Richard Duivenvoorde <rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
> 
>     On 5/13/21 10:19 AM, Richard Duivenvoorde wrote:
> 
>     > I'll try to figure out (help appreciated on IRC)
> 
>     Ok Done.
> 
>     Regards,
> 
>     Richard Duivenvoorde
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 
> 
> 
> -- 
> ------------------------------------------------------------------------------------------
> ?
> 
> Tim Sutton
> Visit?http://kartoza.com <http://kartoza.com/>?to find out about open source:
> ?* Desktop GIS programming services
> ?* Geospatial web development
> * GIS Training
> * Consulting Services
> Tim is a member of the QGIS Project Steering Committee
> -------------------------------------------------------------------------------------------


From marco at qgis.org  Thu May 13 02:46:05 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Thu, 13 May 2021 11:46:05 +0200
Subject: [QGIS-Developer] [Qgis-psc] QGIS news feed certificate expired
In-Reply-To: <4c807c31-b6ae-0f88-902d-bca9372cc044@duif.net>
References: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>
 <CAB2ZMRAoRP9vJbdq1ThVepy8rPwDiH9eEFMNw4ehMPJa5B7-kA@mail.gmail.com>
 <dfe71123-de19-3b73-c46e-f07d5e776841@duif.net>
 <540b391f-2ce3-30c7-dac1-9e440dc909b5@duif.net>
 <CAES-DZQ-g1RNy-uQD4Q0XYAHH3Si-7UupJJffZTm03o=di_OKg@mail.gmail.com>
 <4c807c31-b6ae-0f88-902d-bca9372cc044@duif.net>
Message-ID: <CAB2ZMRAsCLG3QwAK+2bSFjjPsiObPkbfpwYsg4UNV1ootF_AEw@mail.gmail.com>

Thanks a lot Richard and Tim!
Cheers
Marco

On Thu, 13 May 2021 at 10:55, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Ah, Thanks Tim, sorry I missed that info
>
> Which authentication database is it using (osgeo ldap? other?), because
> I'm not able to log in into /admin to have a look why apparently the news
> items (of the blogospace) seem not to be update?
>
> Richard
>
> On 5/13/21 10:43 AM, Tim Sutton wrote:
> > Hi All
> >
> > Thanks Richard
> >
> > Just a reminder, the process is well documented here:
> >
> > https://github.com/qgis/qgis-feed#troubleshooting-ssl-in-production <
> https://github.com/qgis/qgis-feed#troubleshooting-ssl-in-production>
> >
> > I fixed a couple of typos in the docs and script.
> >
> > The cert is set to autorenew so I dont know why from time to time it
> does this. I will ask one of our team to take a look again.
> >
> > Thanks
> >
> > Regards
> >
> > Tim
> >
> > On Thu, May 13, 2021 at 9:22 AM Richard Duivenvoorde <
> rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
> >
> >     On 5/13/21 10:19 AM, Richard Duivenvoorde wrote:
> >
> >     > I'll try to figure out (help appreciated on IRC)
> >
> >     Ok Done.
> >
> >     Regards,
> >
> >     Richard Duivenvoorde
> >     _______________________________________________
> >     QGIS-Developer mailing list
> >     QGIS-Developer at lists.osgeo.org <mailto:
> QGIS-Developer at lists.osgeo.org>
> >     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <
> https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> >     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> >
> >
> >
> > --
> >
> ------------------------------------------------------------------------------------------
> > ?
> >
> > Tim Sutton
> > Visit http://kartoza.com <http://kartoza.com/> to find out about open
> source:
> >  * Desktop GIS programming services
> >  * Geospatial web development
> > * GIS Training
> > * Consulting Services
> > Tim is a member of the QGIS Project Steering Committee
> >
> -------------------------------------------------------------------------------------------
>
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>


-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/1c501c4a/attachment.html>

From tim at kartoza.com  Thu May 13 03:40:03 2021
From: tim at kartoza.com (Tim Sutton)
Date: Thu, 13 May 2021 11:40:03 +0100
Subject: [QGIS-Developer] [Qgis-psc] QGIS news feed certificate expired
In-Reply-To: <4c807c31-b6ae-0f88-902d-bca9372cc044@duif.net>
References: <CAB28AsiZi2PKABD=uOHx_styBK+D3tzCHCdSgvHrCWNQuG9AgA@mail.gmail.com>
 <CAB2ZMRAoRP9vJbdq1ThVepy8rPwDiH9eEFMNw4ehMPJa5B7-kA@mail.gmail.com>
 <dfe71123-de19-3b73-c46e-f07d5e776841@duif.net>
 <540b391f-2ce3-30c7-dac1-9e440dc909b5@duif.net>
 <CAES-DZQ-g1RNy-uQD4Q0XYAHH3Si-7UupJJffZTm03o=di_OKg@mail.gmail.com>
 <4c807c31-b6ae-0f88-902d-bca9372cc044@duif.net>
Message-ID: <CAES-DZQwk_+cWLSRhPLrZYGqXHAM2_4hkV+yeVN1w1vcUuxReg@mail.gmail.com>

Hi Richard

I think you are mixing up the feed (feed.qgis.org - shown in news panel
when you launch QGIS) with the planet (https://plugins.qgis.org/planet/),
If you are referring to the latter, yes you can log in with LDAP from OSGEO.

Ring me on telegram if you need help getting access...

Regards

Tim

On Thu, May 13, 2021 at 9:55 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Ah, Thanks Tim, sorry I missed that info
>
> Which authentication database is it using (osgeo ldap? other?), because
> I'm not able to log in into /admin to have a look why apparently the news
> items (of the blogospace) seem not to be update?
>
> Richard
>
> On 5/13/21 10:43 AM, Tim Sutton wrote:
> > Hi All
> >
> > Thanks Richard
> >
> > Just a reminder, the process is well documented here:
> >
> > https://github.com/qgis/qgis-feed#troubleshooting-ssl-in-production <
> https://github.com/qgis/qgis-feed#troubleshooting-ssl-in-production>
> >
> > I fixed a couple of typos in the docs and script.
> >
> > The cert is set to autorenew so I dont know why from time to time it
> does this. I will ask one of our team to take a look again.
> >
> > Thanks
> >
> > Regards
> >
> > Tim
> >
> > On Thu, May 13, 2021 at 9:22 AM Richard Duivenvoorde <
> rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
> >
> >     On 5/13/21 10:19 AM, Richard Duivenvoorde wrote:
> >
> >     > I'll try to figure out (help appreciated on IRC)
> >
> >     Ok Done.
> >
> >     Regards,
> >
> >     Richard Duivenvoorde
> >     _______________________________________________
> >     QGIS-Developer mailing list
> >     QGIS-Developer at lists.osgeo.org <mailto:
> QGIS-Developer at lists.osgeo.org>
> >     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <
> https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> >     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> >
> >
> >
> > --
> >
> ------------------------------------------------------------------------------------------
> > ?
> >
> > Tim Sutton
> > Visit http://kartoza.com <http://kartoza.com/> to find out about open
> source:
> >  * Desktop GIS programming services
> >  * Geospatial web development
> > * GIS Training
> > * Consulting Services
> > Tim is a member of the QGIS Project Steering Committee
> >
> -------------------------------------------------------------------------------------------
>
>

-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/a6c518ba/attachment-0001.html>

From adenaculture at gmail.com  Thu May 13 10:52:39 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 13 May 2021 13:52:39 -0400
Subject: [QGIS-Developer] Status bar color for UI theme Night Mapping is too
 difficult to read
Message-ID: <CABPxTToP_pQsaGLiEmS4n2pZgqNAAZNxAW4PAv6y-cWa=-AhsQ@mail.gmail.com>

Some of my users use the QGIS Night Mapping UI theme, but the font color
for the status bar is very difficult to read. It needs to be close to
white. Is there an easy way to change this? I would almost call this a bug
and think it should be changed in the QGIS distribution.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/ce36a2d0/attachment.html>

From jeferson77722 at gmail.com  Thu May 13 12:08:25 2021
From: jeferson77722 at gmail.com (jeferson da Silva)
Date: Thu, 13 May 2021 16:08:25 -0300
Subject: [QGIS-Developer] Questions about QGIS plugin sales
Message-ID: <CAGhZALXvHc5GJwYWk78H4fDup-AXCtNEndtrq-niiEOaETD5yg@mail.gmail.com>

Hello,

My name is Jeferson and I have a company in Brazil called Trindade Company,
which map cities with Drones and recently created a plugin and interfaces
for QGIS, for urban taxation, do tax calculations automatically and
synchronize with a bank of data. My question is, can I sell these plugins?
How can my company be a representative or partner of QGIS?
Attached images of the plugin and interface.
QGIS Version: 3.18.2


*Jeferson da Silva de Jesus: Agricultural technician, majoring in Systems
Development Analysis.*
*CEO from Trindade Company. *
*WhatsApp: +55 71 99261-9642*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/18599050/attachment.html>

From even.rouault at spatialys.com  Thu May 13 12:22:22 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 13 May 2021 21:22:22 +0200
Subject: [QGIS-Developer] Questions about QGIS plugin sales
In-Reply-To: <CAGhZALXvHc5GJwYWk78H4fDup-AXCtNEndtrq-niiEOaETD5yg@mail.gmail.com>
References: <CAGhZALXvHc5GJwYWk78H4fDup-AXCtNEndtrq-niiEOaETD5yg@mail.gmail.com>
Message-ID: <b7d0d82f-21cc-f728-461a-0c8d5d8256be@spatialys.com>

Jeferson,

yes, you can sell plugins, but you'll have to distribute the source code 
of it, or make a written offer to have access to it, to your customers 
under the GPL v2+ license of QGIS (which mean they could also 
potentially redistribute the source code freely, in all meaning of the 
word, to anyone else)

See https://www.gnu.org/licenses/gpl-faq.en.html#DoesTheGPLAllowMoney

And also https://lists.osgeo.org/pipermail/discuss/2021-March/039273.html

Even

Le 13/05/2021 ? 21:08, jeferson da Silva a ?crit?:
> Hello,
>
> My name is Jeferson and I have a company in Brazil called Trindade 
> Company, which map cities with Drones and recently created a plugin 
> and interfaces for QGIS, for urban taxation, do tax calculations 
> automatically and synchronize with a bank of data. My question is, can 
> I sell these plugins? How can my company be a representative or 
> partner of QGIS?
> Attached images of the plugin and interface.
> QGIS Version: 3.18.2
>
> */Jeferson da Silva de Jesus: Agricultural technician, majoring in 
> Systems Development Analysis./*
> */CEO from Trindade Company. /*
> */WhatsApp: +55 71 99261-9642/*
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/f69130b6/attachment.html>

From jeferson77722 at gmail.com  Thu May 13 13:02:36 2021
From: jeferson77722 at gmail.com (jeferson da Silva)
Date: Thu, 13 May 2021 17:02:36 -0300
Subject: [QGIS-Developer] Questions about QGIS plugin sales
In-Reply-To: <b7d0d82f-21cc-f728-461a-0c8d5d8256be@spatialys.com>
References: <CAGhZALXvHc5GJwYWk78H4fDup-AXCtNEndtrq-niiEOaETD5yg@mail.gmail.com>
 <b7d0d82f-21cc-f728-461a-0c8d5d8256be@spatialys.com>
Message-ID: <CAGhZALXhr0Uu=Krz0_+kArfgSfEQBfnvdgBLS+oE9tjJnNgcEw@mail.gmail.com>

Thanks for your help,

I understand about the GPL v2 + license from QGIS. Is there any kind of
certificate (or attestation) that I may have from QGIS plugin developers or
something? Or my company to join QGIS?
I ask this because some of my clients may ask this question.

*Jeferson da Silva de Jesus: Agricultural technician, majoring in Systems
Development Analysis.*
*CEO from Trindade Company. *
*WhatsApp: +55 71 99261-9642*

Em qui., 13 de mai. de 2021 ?s 16:22, Even Rouault <
even.rouault at spatialys.com> escreveu:

> Jeferson,
>
> yes, you can sell plugins, but you'll have to distribute the source code
> of it, or make a written offer to have access to it, to your customers
> under the GPL v2+ license of QGIS (which mean they could also potentially
> redistribute the source code freely, in all meaning of the word, to anyone
> else)
>
> See https://www.gnu.org/licenses/gpl-faq.en.html#DoesTheGPLAllowMoney
>
> And also https://lists.osgeo.org/pipermail/discuss/2021-March/039273.html
>
> Even
> Le 13/05/2021 ? 21:08, jeferson da Silva a ?crit :
>
> Hello,
>
> My name is Jeferson and I have a company in Brazil called Trindade
> Company, which map cities with Drones and recently created a plugin and
> interfaces for QGIS, for urban taxation, do tax calculations automatically
> and synchronize with a bank of data. My question is, can I sell these
> plugins? How can my company be a representative or partner of QGIS?
> Attached images of the plugin and interface.
> QGIS Version: 3.18.2
>
> *Jeferson da Silva de Jesus: Agricultural technician, majoring in Systems
> Development Analysis.*
> *CEO from Trindade Company. *
> *WhatsApp: +55 71 99261-9642*
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/2264725e/attachment.html>

From tim at kartoza.com  Thu May 13 23:19:06 2021
From: tim at kartoza.com (Tim Sutton)
Date: Fri, 14 May 2021 07:19:06 +0100
Subject: [QGIS-Developer] Questions about QGIS plugin sales
In-Reply-To: <CAGhZALXhr0Uu=Krz0_+kArfgSfEQBfnvdgBLS+oE9tjJnNgcEw@mail.gmail.com>
References: <CAGhZALXhr0Uu=Krz0_+kArfgSfEQBfnvdgBLS+oE9tjJnNgcEw@mail.gmail.com>
Message-ID: <153487BC-2D33-427A-B17F-36142277E83B@kartoza.com>

Ol? Jeferson 

If you become a sustaining member you can put a badge on your site while your membership is valid: 

https://www.qgis.org/en/site/getinvolved/governance/sustaining_members/sustaining_members.html#sustaining-membership

You can also be added here if you provide general support, though it is not clear from your email if this is the case:

https://www.qgis.org/en/site/forusers/commercial_support.html

Regards 

Tim



> On 13 May 2021, at 21:02, jeferson da Silva <jeferson77722 at gmail.com> wrote:
> 
> ?
> Thanks for your help,
> 
> I understand about the GPL v2 + license from QGIS. Is there any kind of certificate (or attestation) that I may have from QGIS plugin developers or something? Or my company to join QGIS?
> I ask this because some of my clients may ask this question.
> 
> Jeferson da Silva de Jesus: Agricultural technician, majoring in Systems Development Analysis.
> CEO from Trindade Company. 
> WhatsApp: +55 71 99261-9642
> 
>> Em qui., 13 de mai. de 2021 ?s 16:22, Even Rouault <even.rouault at spatialys.com> escreveu:
>> Jeferson,
>> 
>> yes, you can sell plugins, but you'll have to distribute the source code of it, or make a written offer to have access to it, to your customers under the GPL v2+ license of QGIS (which mean they could also potentially redistribute the source code freely, in all meaning of the word, to anyone else)
>> 
>> See https://www.gnu.org/licenses/gpl-faq.en.html#DoesTheGPLAllowMoney
>> 
>> And also https://lists.osgeo.org/pipermail/discuss/2021-March/039273.html
>> 
>> Even
>> 
>> Le 13/05/2021 ? 21:08, jeferson da Silva a ?crit :
>>> Hello, 
>>> 
>>> My name is Jeferson and I have a company in Brazil called Trindade Company, which map cities with Drones and recently created a plugin and interfaces for QGIS, for urban taxation, do tax calculations automatically and synchronize with a bank of data. My question is, can I sell these plugins? How can my company be a representative or partner of QGIS?
>>> Attached images of the plugin and interface.
>>> QGIS Version: 3.18.2
>>> 
>>> Jeferson da Silva de Jesus: Agricultural technician, majoring in Systems Development Analysis.
>>> CEO from Trindade Company. 
>>> WhatsApp: +55 71 99261-9642
>>> 
>>> 
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210514/481cac49/attachment-0001.html>

From jvenegasperu at gmail.com  Mon May 17 08:09:21 2021
From: jvenegasperu at gmail.com (Jose Mercedes Venegas Acevedo)
Date: Mon, 17 May 2021 10:09:21 -0500
Subject: [QGIS-Developer] Unificar acceso para los origenes de datos
Message-ID: <CA+KjtGdLheCWcM8ktOCxTSoKcyFOeUf=nVsPL3vTrXEv94+YjQ@mail.gmail.com>

Estimados
Buen dia

Tengo un archivo de qgis con 5 capas que se conectan a postgres lo guardo
lo cierro y todo ok
pero luego otro dia decido agregar otra capa cierro y guardo todo bien al
abrir ahora me pedira el password dos veces
otro dia agrego otra capa se conecta guarda todo bien pero ahora me pedira
el usuario y contrase?a 3 veces.

asi que termino con archivos que a veces pide la contrase?a hasta 10
ocasiones, lo que hago actualmente es abrir el archivo en texto plano y
reemplazo toda la parte de conexion para borrarle el usuario y password a
todas las capas en note pad con cuidado de no da?ar la estructura xml luego
lo guardo abro en qgis y queda con un solo login. en las nnuevas versiones
se guarda el archivo comprimido ahi no se puede hacer tengo que garabarlo
antes en texto plano y si en la siguiente version le quitan eso acceder a
los datos sera un suplicio.

alguien sabe alguna mejor manera de hacer esto quiza haya forma de
configurar el proyecto para emplear el mismo usuario y contrase?a cuando se
trata del mismo origen de base de datos, algo de lo que no me este
percatando.

Atte

--
Jos? Mercedes Venegas Acevedo
cel Mov RPC 955725384
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210517/0c997042/attachment.html>

From wonder.sk at gmail.com  Tue May 18 02:50:07 2021
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue, 18 May 2021 11:50:07 +0200
Subject: [QGIS-Developer] Google summer of code: On-the-fly raster calculator
Message-ID: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>

Good news everyone,

this year we will have Francesco Bursi working on his summer of code
project to introduce on-the-fly raster calculator to QGIS! Please join me
in welcoming him to our amazing community - I hope this will be another
successful project.

https://summerofcode.withgoogle.com/projects/#5286802463653888

Peter Petrik and myself are officially assigned as mentors, but of course
we will appreciate if others help with mentoring.

In an earlier thread there has been some great feedback on the initial
proposal. From the feedback it looks like we should start by updating the
proposal to take a slightly different approach than originally envisaged:
to create a new raster data provider instead of adding a new raster
renderer.

Regards
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210518/0fcc752f/attachment.html>

From nirvn.asia at gmail.com  Tue May 18 02:52:01 2021
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Tue, 18 May 2021 16:52:01 +0700
Subject: [QGIS-Developer] Google summer of code: On-the-fly raster
 calculator
In-Reply-To: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>
References: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>
Message-ID: <CAC_qv=qA7v5afDExQsJu580Uy7oJixLsLhbO0G4Wka_kEQHQgw@mail.gmail.com>

Woupidou! Super excited about this.

On Tue, May 18, 2021, 4:50 PM Martin Dobias <wonder.sk at gmail.com> wrote:

> Good news everyone,
>
> this year we will have Francesco Bursi working on his summer of code
> project to introduce on-the-fly raster calculator to QGIS! Please join me
> in welcoming him to our amazing community - I hope this will be another
> successful project.
>
> https://summerofcode.withgoogle.com/projects/#5286802463653888
>
> Peter Petrik and myself are officially assigned as mentors, but of course
> we will appreciate if others help with mentoring.
>
> In an earlier thread there has been some great feedback on the initial
> proposal. From the feedback it looks like we should start by updating the
> proposal to take a slightly different approach than originally envisaged:
> to create a new raster data provider instead of adding a new raster
> renderer.
>
> Regards
> Martin
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210518/93318bcb/attachment.html>

From francesco.bursi at hotmail.it  Tue May 18 06:37:21 2021
From: francesco.bursi at hotmail.it (Francesco Bursi)
Date: Tue, 18 May 2021 13:37:21 +0000
Subject: [QGIS-Developer] R: Google summer of code: On-the-fly raster
 calculator
In-Reply-To: <CAC_qv=qA7v5afDExQsJu580Uy7oJixLsLhbO0G4Wka_kEQHQgw@mail.gmail.com>
References: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>,
 <CAC_qv=qA7v5afDExQsJu580Uy7oJixLsLhbO0G4Wka_kEQHQgw@mail.gmail.com>
Message-ID: <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>

HI to everyone,

I'm Francesco and, as Martin wrote, I'll work on "on-the-fly" raster calculator in the next months.
Thank you for the welcome!

I'm really excited about this project and I'm looking forward to getting the best out of this experience and contributing to the QGIS project.
I'm really  grateful and excitedabout this big opportunity and I hope to obtain some interesting results and to add some nice and useful features.

Best Regards
Francesco Bursi
________________________________
Da: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> per conto di Mathieu Pellerin <nirvn.asia at gmail.com>
Inviato: marted? 18 maggio 2021 11:52
A: Martin Dobias <wonder.sk at gmail.com>
Cc: qgis-dev <qgis-developer at lists.osgeo.org>
Oggetto: Re: [QGIS-Developer] Google summer of code: On-the-fly raster calculator

Woupidou! Super excited about this.

On Tue, May 18, 2021, 4:50 PM Martin Dobias <wonder.sk at gmail.com<mailto:wonder.sk at gmail.com>> wrote:
Good news everyone,

this year we will have Francesco Bursi working on his summer of code project to introduce on-the-fly raster calculator to QGIS! Please join me in welcoming him to our amazing community - I hope this will be another successful project.

https://summerofcode.withgoogle.com/projects/#5286802463653888

Peter Petrik and myself are officially assigned as mentors, but of course we will appreciate if others help with mentoring.

In an earlier thread there has been some great feedback on the initial proposal. From the feedback it looks like we should start by updating the proposal to take a slightly different approach than originally envisaged: to create a new raster data provider instead of adding a new raster renderer.

Regards
Martin

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210518/14f75291/attachment.html>

From apasotti at gmail.com  Tue May 18 06:39:12 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 18 May 2021 15:39:12 +0200
Subject: [QGIS-Developer] R: Google summer of code: On-the-fly raster
 calculator
In-Reply-To: <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
References: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>
 <CAC_qv=qA7v5afDExQsJu580Uy7oJixLsLhbO0G4Wka_kEQHQgw@mail.gmail.com>
 <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
Message-ID: <CAL5Q673JX3LaxkjBM3=bMXggFJup3ZR_m8bzkSBxdK96fjWEAA@mail.gmail.com>

Welcome Francesco!

Looking forward to seeing your updated proposal.

Have fun with QGIS!



On Tue, May 18, 2021 at 3:37 PM Francesco Bursi <francesco.bursi at hotmail.it>
wrote:

> HI to everyone,
>
> I'm Francesco and, as Martin wrote, I'll work on "on-the-fly" raster
> calculator in the next months.
> Thank you for the welcome!
>
> I'm really excited about this project and I'm looking forward to getting
> the best out of this experience and contributing to the QGIS project.
> I'm really  grateful and excitedabout this big opportunity and I hope to
> obtain some interesting results and to add some nice and useful features.
>
> Best Regards
> Francesco Bursi
> ------------------------------
> *Da:* QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> per conto
> di Mathieu Pellerin <nirvn.asia at gmail.com>
> *Inviato:* marted? 18 maggio 2021 11:52
> *A:* Martin Dobias <wonder.sk at gmail.com>
> *Cc:* qgis-dev <qgis-developer at lists.osgeo.org>
> *Oggetto:* Re: [QGIS-Developer] Google summer of code: On-the-fly raster
> calculator
>
> Woupidou! Super excited about this.
>
> On Tue, May 18, 2021, 4:50 PM Martin Dobias <wonder.sk at gmail.com> wrote:
>
> Good news everyone,
>
> this year we will have Francesco Bursi working on his summer of code
> project to introduce on-the-fly raster calculator to QGIS! Please join me
> in welcoming him to our amazing community - I hope this will be another
> successful project.
>
> https://summerofcode.withgoogle.com/projects/#5286802463653888
>
> Peter Petrik and myself are officially assigned as mentors, but of course
> we will appreciate if others help with mentoring.
>
> In an earlier thread there has been some great feedback on the initial
> proposal. From the feedback it looks like we should start by updating the
> proposal to take a slightly different approach than originally envisaged:
> to create a new raster data provider instead of adding a new raster
> renderer.
>
> Regards
> Martin
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210518/0daf8e13/attachment-0001.html>

From gb_nedjima at esi.dz  Tue May 18 07:05:34 2021
From: gb_nedjima at esi.dz (BELGACEM NEDJIMA)
Date: Tue, 18 May 2021 15:05:34 +0100
Subject: [QGIS-Developer] R: Google summer of code: On-the-fly raster
 calculator
In-Reply-To: <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
References: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>
 <CAC_qv=qA7v5afDExQsJu580Uy7oJixLsLhbO0G4Wka_kEQHQgw@mail.gmail.com>
 <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
Message-ID: <CAGiKOugGpX3jk9+sBG0Y7muhvKSkbcUZGK=anUy9GtP0Bkfz4w@mail.gmail.com>

Welcome Francesco!
Looking forward to your contributions

On Tue, 18 May 2021, 14:37 Francesco Bursi, <francesco.bursi at hotmail.it>
wrote:

> HI to everyone,
>
> I'm Francesco and, as Martin wrote, I'll work on "on-the-fly" raster
> calculator in the next months.
> Thank you for the welcome!
>
> I'm really excited about this project and I'm looking forward to getting
> the best out of this experience and contributing to the QGIS project.
> I'm really  grateful and excitedabout this big opportunity and I hope to
> obtain some interesting results and to add some nice and useful features.
>
> Best Regards
> Francesco Bursi
> ------------------------------
> *Da:* QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> per conto
> di Mathieu Pellerin <nirvn.asia at gmail.com>
> *Inviato:* marted? 18 maggio 2021 11:52
> *A:* Martin Dobias <wonder.sk at gmail.com>
> *Cc:* qgis-dev <qgis-developer at lists.osgeo.org>
> *Oggetto:* Re: [QGIS-Developer] Google summer of code: On-the-fly raster
> calculator
>
> Woupidou! Super excited about this.
>
> On Tue, May 18, 2021, 4:50 PM Martin Dobias <wonder.sk at gmail.com> wrote:
>
> Good news everyone,
>
> this year we will have Francesco Bursi working on his summer of code
> project to introduce on-the-fly raster calculator to QGIS! Please join me
> in welcoming him to our amazing community - I hope this will be another
> successful project.
>
> https://summerofcode.withgoogle.com/projects/#5286802463653888
>
> Peter Petrik and myself are officially assigned as mentors, but of course
> we will appreciate if others help with mentoring.
>
> In an earlier thread there has been some great feedback on the initial
> proposal. From the feedback it looks like we should start by updating the
> proposal to take a slightly different approach than originally envisaged:
> to create a new raster data provider instead of adding a new raster
> renderer.
>
> Regards
> Martin
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210518/9f14ffc3/attachment.html>

From imajimatika at gmail.com  Tue May 18 07:29:20 2021
From: imajimatika at gmail.com (Ismail Sunni)
Date: Tue, 18 May 2021 16:29:20 +0200
Subject: [QGIS-Developer] R: Google summer of code: On-the-fly raster
 calculator
In-Reply-To: <CAGiKOugGpX3jk9+sBG0Y7muhvKSkbcUZGK=anUy9GtP0Bkfz4w@mail.gmail.com>
References: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>
 <CAC_qv=qA7v5afDExQsJu580Uy7oJixLsLhbO0G4Wka_kEQHQgw@mail.gmail.com>
 <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
 <CAGiKOugGpX3jk9+sBG0Y7muhvKSkbcUZGK=anUy9GtP0Bkfz4w@mail.gmail.com>
Message-ID: <CAEh5jtEgS_cbkRNQ-J6A9CwfWYFLyoiFWO98nioX5S7dFLz6wQ@mail.gmail.com>

Good luck and have fun Francesco!

On Tue, May 18, 2021, 16:05 BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:

> Welcome Francesco!
> Looking forward to your contributions
>
> On Tue, 18 May 2021, 14:37 Francesco Bursi, <francesco.bursi at hotmail.it>
> wrote:
>
>> HI to everyone,
>>
>> I'm Francesco and, as Martin wrote, I'll work on "on-the-fly" raster
>> calculator in the next months.
>> Thank you for the welcome!
>>
>> I'm really excited about this project and I'm looking forward to getting
>> the best out of this experience and contributing to the QGIS project.
>> I'm really  grateful and excitedabout this big opportunity and I hope to
>> obtain some interesting results and to add some nice and useful features.
>>
>> Best Regards
>> Francesco Bursi
>> ------------------------------
>> *Da:* QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> per conto
>> di Mathieu Pellerin <nirvn.asia at gmail.com>
>> *Inviato:* marted? 18 maggio 2021 11:52
>> *A:* Martin Dobias <wonder.sk at gmail.com>
>> *Cc:* qgis-dev <qgis-developer at lists.osgeo.org>
>> *Oggetto:* Re: [QGIS-Developer] Google summer of code: On-the-fly raster
>> calculator
>>
>> Woupidou! Super excited about this.
>>
>> On Tue, May 18, 2021, 4:50 PM Martin Dobias <wonder.sk at gmail.com> wrote:
>>
>> Good news everyone,
>>
>> this year we will have Francesco Bursi working on his summer of code
>> project to introduce on-the-fly raster calculator to QGIS! Please join me
>> in welcoming him to our amazing community - I hope this will be another
>> successful project.
>>
>> https://summerofcode.withgoogle.com/projects/#5286802463653888
>>
>> Peter Petrik and myself are officially assigned as mentors, but of course
>> we will appreciate if others help with mentoring.
>>
>> In an earlier thread there has been some great feedback on the initial
>> proposal. From the feedback it looks like we should start by updating the
>> proposal to take a slightly different approach than originally envisaged:
>> to create a new raster data provider instead of adding a new raster
>> renderer.
>>
>> Regards
>> Martin
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210518/68c2e4a3/attachment.html>

From regis.haubourg at gmail.com  Tue May 18 09:33:03 2021
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=c3=a9gis_Haubourg?=)
Date: Tue, 18 May 2021 18:33:03 +0200
Subject: [QGIS-Developer] R: Google summer of code: On-the-fly raster
 calculator
In-Reply-To: <CAEh5jtEgS_cbkRNQ-J6A9CwfWYFLyoiFWO98nioX5S7dFLz6wQ@mail.gmail.com>
References: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>
 <CAC_qv=qA7v5afDExQsJu580Uy7oJixLsLhbO0G4Wka_kEQHQgw@mail.gmail.com>
 <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
 <CAGiKOugGpX3jk9+sBG0Y7muhvKSkbcUZGK=anUy9GtP0Bkfz4w@mail.gmail.com>
 <CAEh5jtEgS_cbkRNQ-J6A9CwfWYFLyoiFWO98nioX5S7dFLz6wQ@mail.gmail.com>
Message-ID: <e48cf7b0-4bd8-755e-64cf-d73ed0409be8@gmail.com>

Welcome Francesco!!

On 18/05/2021 16:29, Ismail Sunni wrote:
> Good luck and have fun Francesco!
>
> On Tue, May 18, 2021, 16:05 BELGACEM NEDJIMA <gb_nedjima at esi.dz
> <mailto:gb_nedjima at esi.dz>> wrote:
>
>     Welcome Francesco!
>     Looking?forward to your contributions?
>
>     On Tue, 18 May 2021, 14:37 Francesco Bursi,
>     <francesco.bursi at hotmail.it <mailto:francesco.bursi at hotmail.it>>
>     wrote:
>
>         HI to everyone,
>
>         I'm Francesco and, as Martin wrote, I'll work on "on-the-fly"
>         raster calculator in the next months.
>         Thank you for the welcome!
>
>         I'm really excited about this project and I'm looking forward
>         to getting the best out of this experience and contributing to
>         the QGIS project.
>         I'm really? grateful and excitedabout this big opportunity and
>         I hope to obtain some interesting results and to add some nice
>         and useful features.
>
>         Best Regards
>         Francesco Bursi
>         ------------------------------------------------------------------------
>         *Da:* QGIS-Developer <qgis-developer-bounces at lists.osgeo.org
>         <mailto:qgis-developer-bounces at lists.osgeo.org>> per conto di
>         Mathieu Pellerin <nirvn.asia at gmail.com
>         <mailto:nirvn.asia at gmail.com>>
>         *Inviato:* marted? 18 maggio 2021 11:52
>         *A:* Martin Dobias <wonder.sk at gmail.com
>         <mailto:wonder.sk at gmail.com>>
>         *Cc:* qgis-dev <qgis-developer at lists.osgeo.org
>         <mailto:qgis-developer at lists.osgeo.org>>
>         *Oggetto:* Re: [QGIS-Developer] Google summer of code:
>         On-the-fly raster calculator
>         ?
>         Woupidou! Super excited about?this.
>
>         On Tue, May 18, 2021, 4:50 PM Martin Dobias
>         <wonder.sk at gmail.com <mailto:wonder.sk at gmail.com>> wrote:
>
>             Good news everyone,
>
>             this year we will have Francesco Bursi working on his
>             summer of code project to introduce on-the-fly raster
>             calculator to QGIS! Please join me in welcoming him to our
>             amazing community - I hope this will be another successful
>             project.
>
>             https://summerofcode.withgoogle.com/projects/#5286802463653888
>             <https://summerofcode.withgoogle.com/projects/#5286802463653888>
>
>             Peter Petrik and myself are officially assigned as
>             mentors, but of course we will appreciate if others help
>             with mentoring.
>
>             In an earlier thread there has been some great feedback on
>             the initial proposal. From the feedback it looks like we
>             should start by updating the proposal to take a slightly
>             different approach than originally envisaged: to create a
>             new raster data provider instead of adding a new raster
>             renderer.
>
>             Regards
>             Martin
>
>             _______________________________________________
>             QGIS-Developer mailing list
>             QGIS-Developer at lists.osgeo.org
>             <mailto:QGIS-Developer at lists.osgeo.org>
>             List info:
>             https://lists.osgeo.org/mailman/listinfo/qgis-developer
>             <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>             Unsubscribe:
>             https://lists.osgeo.org/mailman/listinfo/qgis-developer
>             <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         List info:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>         Unsubscribe:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210518/3049261a/attachment-0001.html>

From senhor.neto at gmail.com  Wed May 19 05:49:58 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Wed, 19 May 2021 13:49:58 +0100
Subject: [QGIS-Developer] QGIS installation using conda on downloads page
Message-ID: <CA+H0G_FzJygr=iWKRc9L_BUhkocf_RicRcoaHfdKkYhcMn+hQg@mail.gmail.com>

Hi,

QGIS installation using conda seems to be quite stable for some time. We
provide the stable branch and the LTR that works on Windows, Linux and Mac
OS.

I have documented how to install QGIS using conda on my personal blog, but
I think it would be better to have it on QGIS Website.

This being said, is there any objections for adding the information in
https://www.qgis.org/en/site/forusers/download.html ?

Obviously, I should add something saying that this is an non-oficial way to
install QGIS and that any related bugs should be reported elsewhere.

Best regards,

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210519/0f09cb60/attachment.html>

From tim at kartoza.com  Wed May 19 06:13:17 2021
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 19 May 2021 14:13:17 +0100
Subject: [QGIS-Developer] QGIS installation using conda on downloads page
In-Reply-To: <CA+H0G_FzJygr=iWKRc9L_BUhkocf_RicRcoaHfdKkYhcMn+hQg@mail.gmail.com>
References: <CA+H0G_FzJygr=iWKRc9L_BUhkocf_RicRcoaHfdKkYhcMn+hQg@mail.gmail.com>
Message-ID: <C79BD295-574D-4507-BB0E-E29D66EFBD8E@kartoza.com>

Huge +1

Rather than saying that it is not official, rather just put a note directing people where to report issues.

Regards 

Tim

Sent from my iPhone

> On 19 May 2021, at 13:50, Alexandre Neto <senhor.neto at gmail.com> wrote:
> 
> ?
> Hi,
> 
> QGIS installation using conda seems to be quite stable for some time. We provide the stable branch and the LTR that works on Windows, Linux and Mac OS.
> 
> I have documented how to install QGIS using conda on my personal blog, but I think it would be better to have it on QGIS Website.
> 
> This being said, is there any objections for adding the information in https://www.qgis.org/en/site/forusers/download.html ?
> 
> Obviously, I should add something saying that this is an non-oficial way to install QGIS and that any related bugs should be reported elsewhere.
> 
> Best regards,
> 
> Alexandre Neto
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210519/29b6adbb/attachment.html>

From tim at kartoza.com  Wed May 19 06:17:11 2021
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 19 May 2021 14:17:11 +0100
Subject: [QGIS-Developer] R: Google summer of code: On-the-fly raster
 calculator
In-Reply-To: <CAEh5jtEgS_cbkRNQ-J6A9CwfWYFLyoiFWO98nioX5S7dFLz6wQ@mail.gmail.com>
References: <CAEh5jtEgS_cbkRNQ-J6A9CwfWYFLyoiFWO98nioX5S7dFLz6wQ@mail.gmail.com>
Message-ID: <93FCFC91-2643-4FAC-AA48-6DA80F2DBC90@kartoza.com>

Woopidoo indeed! Welcome to the community Francesco!

Regards 

Tim

Sent from my iPhone

> On 18 May 2021, at 15:29, Ismail Sunni <imajimatika at gmail.com> wrote:
> 
> ?
> Good luck and have fun Francesco!
> 
>> On Tue, May 18, 2021, 16:05 BELGACEM NEDJIMA <gb_nedjima at esi.dz> wrote:
>> Welcome Francesco!
>> Looking forward to your contributions 
>> 
>>> On Tue, 18 May 2021, 14:37 Francesco Bursi, <francesco.bursi at hotmail.it> wrote:
>>> HI to everyone,
>>> 
>>> I'm Francesco and, as Martin wrote, I'll work on "on-the-fly" raster calculator in the next months. 
>>> Thank you for the welcome!
>>> 
>>> I'm really excited about this project and I'm looking forward to getting the best out of this experience and contributing to the QGIS project.
>>> I'm really  grateful and excitedabout this big opportunity and I hope to obtain some interesting results and to add some nice and useful features.
>>> 
>>> Best Regards
>>> Francesco Bursi
>>> Da: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> per conto di Mathieu Pellerin <nirvn.asia at gmail.com>
>>> Inviato: marted? 18 maggio 2021 11:52
>>> A: Martin Dobias <wonder.sk at gmail.com>
>>> Cc: qgis-dev <qgis-developer at lists.osgeo.org>
>>> Oggetto: Re: [QGIS-Developer] Google summer of code: On-the-fly raster calculator
>>>  
>>> Woupidou! Super excited about this.
>>> 
>>> On Tue, May 18, 2021, 4:50 PM Martin Dobias <wonder.sk at gmail.com> wrote:
>>> Good news everyone,
>>> 
>>> this year we will have Francesco Bursi working on his summer of code project to introduce on-the-fly raster calculator to QGIS! Please join me in welcoming him to our amazing community - I hope this will be another successful project.
>>> 
>>> https://summerofcode.withgoogle.com/projects/#5286802463653888
>>> 
>>> Peter Petrik and myself are officially assigned as mentors, but of course we will appreciate if others help with mentoring.
>>> 
>>> In an earlier thread there has been some great feedback on the initial proposal. From the feedback it looks like we should start by updating the proposal to take a slightly different approach than originally envisaged: to create a new raster data provider instead of adding a new raster renderer.
>>> 
>>> Regards
>>> Martin
>>> 
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210519/e341113c/attachment.html>

From nicholas.sunhing at gmail.com  Thu May 20 05:45:05 2021
From: nicholas.sunhing at gmail.com (Nicholas Sun Hing)
Date: Thu, 20 May 2021 14:45:05 +0200
Subject: [QGIS-Developer] QGIS Open Day: QGIS Cutting Edge 28th May 2021
Message-ID: <CAF-Lnm4oOcn3B9_yJsDQ4d-yYAmUJ_wq3_bqwCknfAUwHaiDzQ@mail.gmail.com>

Dear QGIS Developers

The QGIS Open Day is fast approaching. This month's event will be dedicated
to unique techniques and processes that can be performed in QGIS.

*Sessions include:*

   - *GIS Water* *plugin *by Xavier Torret & Albert Bofill*. *A QGIS Plugin
   that can be used to manage water networks.
   - *QGIS in Conda *by Hans van der Kwast*. *This session will display
   QGIS installed in a Conda environment and how the power of QGIS can be
   combined with other available packages.
   - *QGIS in an open source GIS stack *by Tim Sutton*.* How to build a
   complete open source GIS stack with QGIS will be showcased with other
   features.

For more information on these presentations and the links to the sessions
please follow the link to the wiki page below:
https://github.com/qgis/QGIS/wiki/QHF-May-2021
Please check the event wiki regularly for updates

All of the YouTube live-streamed events will be recorded and made available
to viewers who couldn't make the live events and will be available via the
links.

Please contact Zinziswa Xakayi by email zeighxakayi at gmail.com or via the
Telegram Channel username @zinzixakayi if you have any queries or need help
setting up events.

Hope to see you there
The QGIS open day organization team
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210520/5e829d86/attachment.html>

From delazj at gmail.com  Fri May 21 11:59:47 2021
From: delazj at gmail.com (DelazJ)
Date: Fri, 21 May 2021 20:59:47 +0200
Subject: [QGIS-Developer] Unavailable releases on macos!?
Message-ID: <45025C77-3B64-44F7-9AC6-A5BE4EBE5E22@gmail.com>

Hi devs,
 
There's a couple of issue reports [0] that the downloadable version of QGIS would not be the latest version for our macos users.
It could be nice if someone can look into this. Thanks.

[0] https://github.com/qgis/QGIS-Website/issues/894 and https://github.com/qgis/QGIS-Website/issues/892

Regards 
Harrissou
-- 
Envoy? de mon appareil Android avec Courriel K-9 Mail. Veuillez excuser ma bri?vet?.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210521/dbca4447/attachment.html>

From andreaerdna at libero.it  Fri May 21 14:46:14 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 21 May 2021 14:46:14 -0700 (MST)
Subject: [QGIS-Developer] Unavailable releases on macos!?
In-Reply-To: <45025C77-3B64-44F7-9AC6-A5BE4EBE5E22@gmail.com>
References: <45025C77-3B64-44F7-9AC6-A5BE4EBE5E22@gmail.com>
Message-ID: <1621633574851-0.post@n6.nabble.com>

DelazJ wrote
> There's a couple of issue reports [0] that the downloadable version of
> QGIS would not be the latest version for our macos users.

Hi Harrissou,
maybe it's the same problem occurred with the previous version:
https://github.com/qgis/QGIS-Mac-Packager/issues/123

Regards.

Andrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From andreaerdna at libero.it  Fri May 21 23:24:17 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 21 May 2021 23:24:17 -0700 (MST)
Subject: [QGIS-Developer] Unavailable releases on macos!?
In-Reply-To: <1621633574851-0.post@n6.nabble.com>
References: <45025C77-3B64-44F7-9AC6-A5BE4EBE5E22@gmail.com>
 <1621633574851-0.post@n6.nabble.com>
Message-ID: <1621664657444-0.post@n6.nabble.com>

Andrea Giudiceandrea wrote
> maybe it's the same problem occurred with the previous version:
> https://github.com/qgis/QGIS-Mac-Packager/issues/123

...it seems another issue:

---
[34;01mSigning the QGIS.app[39;49;00m
?timestamp=none: No such file or directory
FAIL
---

There's a typo in qgis_package.bash: the codesign timestamp parameter has a
single hyphen insead of a double hyphen

codesign -s "$IDENTITY" -v --force ?timestamp=none --keychain
"$KEYCHAIN_FILE" "$PACKAGE"

So, this https://github.com/qgis/QGIS-Mac-Packager/pull/126 should fix the
issue.

Best regards.

Andrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From peter.petrik at lutraconsulting.co.uk  Sat May 22 00:32:00 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Sat, 22 May 2021 09:32:00 +0200
Subject: [QGIS-Developer] Unavailable releases on macos!?
In-Reply-To: <1621664657444-0.post@n6.nabble.com>
References: <45025C77-3B64-44F7-9AC6-A5BE4EBE5E22@gmail.com>
 <1621633574851-0.post@n6.nabble.com> <1621664657444-0.post@n6.nabble.com>
Message-ID: <CA+T_MsLNBxmLfTyjwEdKUqQSbvUn_s2aWcOrYu9CYz7BBghWcQ@mail.gmail.com>

Hi, I had a hardware issue with my laptop and got the replacement
yesterday. My plan is to look at all packaging issues from the beginning of
the next week.

Kind regards,
Peter

On Sat, May 22, 2021 at 8:24 AM Andrea Giudiceandrea <andreaerdna at libero.it>
wrote:

> Andrea Giudiceandrea wrote
> > maybe it's the same problem occurred with the previous version:
> > https://github.com/qgis/QGIS-Mac-Packager/issues/123
>
> ...it seems another issue:
>
> ---
>  [34;01mSigning the QGIS.app [39;49;00m
> ?timestamp=none: No such file or directory
> FAIL
> ---
>
> There's a typo in qgis_package.bash: the codesign timestamp parameter has a
> single hyphen insead of a double hyphen
>
> codesign -s "$IDENTITY" -v --force ?timestamp=none --keychain
> "$KEYCHAIN_FILE" "$PACKAGE"
>
> So, this https://github.com/qgis/QGIS-Mac-Packager/pull/126 should fix the
> issue.
>
> Best regards.
>
> Andrea
>
>
>
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210522/43a710ad/attachment.html>

From paul.wittle at dorsetcouncil.gov.uk  Sun May 23 03:59:37 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Sun, 23 May 2021 10:59:37 +0000
Subject: [QGIS-Developer] QGIS standalone script examples
Message-ID: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Hi folks,

I?m trying to do a simple script to open an existing project, add a layer and then save the result but finding it hard to piece together the information I can find online.

I?ve found various posts suggesting that you need to connect up the canvas or all the GUI information gets lost when you do a project.write() command but for some reason I can only find answers that contain snippets which usually seem to reference iface or canvas without showing how to initiate those in a standalone way.

Particularly, if you look at https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/loadproject.html you have a note about needing to set a bridge but that references canvas which if you copy/paste as per the details in that section alone will of course result in a ?canvas undefined? error.

Is there a simple full example anywhere that shows how you can open a project file using a standalone python script, add one layer and save it without losing half the information in the project file?

My best effort so far added the layer but resulted in existing layers being invalid when I opened the project in QGIS and my ?improved? version?at the moment?seems to be almost halving the size of the project so I assume it is still deleting all the canvas information. Any hints would be appreciated ?

Thanks
Paul
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210523/617f907f/attachment.html>

From rdmailings at duif.net  Sun May 23 12:23:14 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 23 May 2021 21:23:14 +0200
Subject: [QGIS-Developer] [Qgis-user] QgsBlockingNetworkRequest causes
 SIGSEGV
In-Reply-To: <4586228.Pg5YAHcr1M@schnipsel>
References: <4586228.Pg5YAHcr1M@schnipsel>
Message-ID: <4de44abf-cfd6-7f85-0258-d5b6c2264b1d@duif.net>

Hi Frank,

Moving this to dev list as I think that is more appropriate for this question.

I can easily replicate your issue (on Debian Testing, see below the coredump.txt)

BUT: are you sure you want to use it outside of QGIS in a standalone script? Because I think these things will need some kind of Qt-Application to run... (as the Application is responsible for stuff like NetWorkProxies, and has the actual 'NetWorkAccessManager'?). But all just guessing...

Using your code in a minimal HelloWorldPlugin (attached), it just works. (the url I'm using just sents 'ok' as text).

So: I would not try to run it in a standalone script without a QGIS application context, but in a plugin it 'works'?


Regards,

Richard Duivenvoorde





           PID: 18825 (gnome-shell)
           UID: 1000 (richard)
           GID: 1000 (richard)
        Signal: 11 (SEGV)
     Timestamp: Sat 2021-03-06 16:16:12 CET (3min 52s ago)
  Command Line: /usr/bin/gnome-shell
    Executable: /usr/bin/gnome-shell
 Control Group: /user.slice/user-1000.slice/user at 1000.service/session.slice/org.gnome.Shell at wayland.service
          Unit: user at 1000.service
     User Unit: org.gnome.Shell at wayland.service
         Slice: user-1000.slice
     Owner UID: 1000 (richard)
       Boot ID: 4aaa450c98ed47b299254a234e463620
    Machine ID: df76fc45bc594c71b48c4eb87da1774e
      Hostname: oost
       Storage: /var/lib/systemd/coredump/core.gnome-shell.1000.4aaa450c98ed47b299254a234e463620.18825.1615043772000000.zst
       Message: Process 18825 (gnome-shell) of user 1000 dumped core.
????????????????
                Stack trace of thread 18825:
                #0  0x00007fe88cf6003d g_type_check_instance (libgobject-2.0.so.0 + 0x3503d)
                #1  0x00007fe88cf50883 g_signal_handler_disconnect (libgobject-2.0.so.0 + 0x25883)
                #2  0x00007fe88cf42eef n/a (libgobject-2.0.so.0 + 0x17eef)
                #3  0x00007fe88ce2dfae n/a (libglib-2.0.so.0 + 0x31fae)
                #4  0x00007fe88cf440a3 g_object_unref (libgobject-2.0.so.0 + 0x190a3)
                #5  0x00007fe88d1c1df8 n/a (libgnome-shell.so + 0x21df8)
                #6  0x00007fe88cf440a3 g_object_unref (libgobject-2.0.so.0 + 0x190a3)
                #7  0x00007fe88c546c7e n/a (libgjs.so.0 + 0x47c7e)
                #8  0x00007fe88c546d5a n/a (libgjs.so.0 + 0x47d5a)
                #9  0x00007fe88c542588 n/a (libgjs.so.0 + 0x43588)
                #10 0x00007fe88c542673 n/a (libgjs.so.0 + 0x43673)
                #11 0x00007fe88aa3681c n/a (libmozjs-78.so.0 + 0x65381c)
                #12 0x00007fe88aa073be n/a (libmozjs-78.so.0 + 0x6243be)
                #13 0x00007fe88aa10c02 n/a (libmozjs-78.so.0 + 0x62dc02)
                #14 0x00007fe88aa18ac5 n/a (libmozjs-78.so.0 + 0x635ac5)
                #15 0x00007fe88aa330b6 n/a (libmozjs-78.so.0 + 0x6500b6)
                #16 0x00007fe88aa337dc n/a (libmozjs-78.so.0 + 0x6507dc)
                #17 0x00007fe88aa33a6c n/a (libmozjs-78.so.0 + 0x650a6c)
                #18 0x00007fe88aa33d25 n/a (libmozjs-78.so.0 + 0x650d25)
                #19 0x00007fe88c55dc1f n/a (libgjs.so.0 + 0x5ec1f)
                #20 0x00007fe88ce4e8f4 n/a (libglib-2.0.so.0 + 0x528f4)
                #21 0x00007fe88ce4dd6f g_main_context_dispatch (libglib-2.0.so.0 + 0x51d6f)
                #22 0x00007fe88ce4e118 n/a (libglib-2.0.so.0 + 0x52118)
                #23 0x00007fe88ce4e40b g_main_loop_run (libglib-2.0.so.0 + 0x5240b)
                #24 0x00007fe88c27627e meta_init (libmutter-7.so.0 + 0xc529e)
                #25 0x00007ffd8eec1f9c n/a (n/a + 0x0)
                #26 0x455059545f4e4f49 n/a (n/a + 0x0)




On 5/22/21 3:32 PM, Frank Broniewski wrote:
> Hi all,
> 
> I am trying to replace the `requests` module with QgsBlockingNetworkRequest to 
> remove a potentially unnecessary dependency from my QGIS plugin. But I am 
> having trouble using it so far as Python crashes on the command line with a 
> SIGSEGV all the time. First of all, things work from within the QGIS Python 
> shell. But not from the command line outside of QGIS.
> 
> I am running Fedora 34 KDE spin, but I also tested on Ubuntu 20.04 with the 
> same failure. It is rather simple to reproduce on my end:
> 
> 1) open a Python3 shell
> 2) >>> import qgis
>>>> from qgis.core import QgsBlockingNetworkRequest as bnr
>>>> r = bnr()
> fish: Job 1, 'python' terminated by signal SIGSEGV (Adressbereichsfehler)
> 
> I did look at the unittest Testcases  [1] for the class, e.g the 
> testFetchEmptyUrl class method and do not see anything that I could have 
> changed to avoid the SIGSEGV.
> 
> So, can I not use QgsBlockingNetworkRequest outside of QGIS or am I just 
> missing something?
> 
> Any tips are greatly appreciated,
> Frank
> 
> 
> [1] https://github.com/qgis/QGIS/blob/master/tests/src/python/
> test_qgsblockingnetworkrequest.py
> 
> 
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: HelloWorldPlugin.zip
Type: application/zip
Size: 3321 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210523/5a706e39/attachment.zip>

From rdmailings at duif.net  Sun May 23 12:31:31 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 23 May 2021 21:31:31 +0200
Subject: [QGIS-Developer] QGIS standalone script examples
In-Reply-To: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>

Hi Paul,

Can you come up with a little info about your actual use-case? Because maybe people then have some alternative ideas. QGIS-Application/Canvas off course does a lot of extra stuff when you load data (like for example using some default crs or styling etc etc...) not sure if you would want to redo that all in your scripts (IF it would be doable at all).

But maybe we could come up with another solution? (like maybe create 'qlr(?)' QGIS Layer files, or projects which point to other (small) projects (a project can be part of another project).
Or maybe you could re-use some excisting project by using some naming scheme in your data or so?

Regards,

Richard Duivenvoorde

On 5/23/21 12:59 PM, Paul Wittle wrote:
> Hi folks,
> 
> ?
> 
> I?m trying to do a simple script to open an existing project, add a layer and then save the result but finding it hard to piece together the information I can find online.
> 
> ?
> 
> I?ve found various posts suggesting that you need to connect up the canvas or all the GUI information gets lost when you do a project.write() command but for some reason I can only find answers that contain snippets which usually seem to reference iface or canvas without showing how to initiate those in a standalone way.
> 
> ?
> 
> Particularly, if you look at https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/loadproject.html <https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/loadproject.html> you have a note about needing to set a bridge but that references canvas which if you copy/paste as per the details in that section alone will of course result in a ?canvas undefined? error.
> 
> ?
> 
> Is there a simple full example anywhere that shows how you can open a project file using a standalone python script, add one layer and save it without losing half the information in the project file?
> 
> ?
> 
> My best effort so far added the layer but resulted in existing layers being invalid when I opened the project in QGIS and my ?improved? version?at the moment?seems to be almost halving the size of the project so I assume it is still deleting all the canvas information. Any hints would be appreciated ?
> 
> ?
> 
> Thanks
> 
> Paul
> 
> This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or
> otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From paul.wittle at dorsetcouncil.gov.uk  Mon May 24 00:20:42 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Mon, 24 May 2021 07:20:42 +0000
Subject: [QGIS-Developer] QGIS standalone script examples
In-Reply-To: <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
Message-ID: <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Hi Richard,

My actual script has some extra stuff in it because some of the layers use the authentication manager and I check for Oracle connections but it is literally as simple as the example on the documentation really except that instead the open and close the bit in the middle I'm trying to do is to add a layer.

For context; I'm working on an FME routine to convert MapInfo workspaces into QGIS projects (ignoring anything complicated like layouts; this is just for the layers).

So far I have successfully converted MapInfo tab files to GeoPackage and converted the MapInfo styles into QGIS styles then applied the styling as the default in the converted GeoPackage. This last step should have been easier but it is also the first bit I'm really doing in Python.

The logic is simple:
1) Copy default project template
2) Open the project in pyqgis
3) Read the given GeoPackage to work out how many layers
4a) Add the layer
4b) Add a layer group if multiple
5) Save the project
6) Repeat until all layers added
7) Return Project file with associated GeoPackage layers in a zip file.

I had to do a trick to read the GeoPackages as they are on UNC paths and I'm calling Python standalone via a Windows batch file:
        original_working_directory = os.getcwd()
        os.chdir(overlay_path)
                gpkg_layers = [l.GetName() for l in ogr.Open(relativeLayerToAdd)]
                os.chdir(original_working_directory)

However that all seems to be working and I'm then adding the layers like this (for groups):

        root = project_instance.layerTreeRoot()
                group_entry = root.insertGroup(0,layerToAddName)

                for layerName in gpkg_layers:
                        currentSubLayer = QgsVectorLayer(layerToAdd + "|layername=" + layerName, layerName, 'ogr')
                        project_instance.addMapLayer(currentSubLayer,False)
                        group_entry.insertChildNode(1,QgsLayerTreeLayer(currentSubLayer))

This is the read command:
        project_instance = QgsProject.instance()
        project_instance.setFileName(project_path)
        canvas = QgsMapCanvas()
        bridge = QgsLayerTreeMapCanvasBridge( \
                        project_instance.layerTreeRoot(), canvas)

        project_instance.read()

Finally I'm just using a standard write command:
        project_instance.writeProject.connect(canvas.writeProject)
        project_instance.write()
        app.exitQgis()

However as I say; the resulting project file is significantly smaller than the one that was read so it must be deleting things it shouldn't even be modifying; I assume because the bridge bit is not being used and because it is running standalone.

Is that enough information?

Thanks,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 23 May 2021 20:32
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>; qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] QGIS standalone script examples

Hi Paul,

Can you come up with a little info about your actual use-case? Because maybe people then have some alternative ideas. QGIS-Application/Canvas off course does a lot of extra stuff when you load data (like for example using some default crs or styling etc etc...) not sure if you would want to redo that all in your scripts (IF it would be doable at all).

But maybe we could come up with another solution? (like maybe create 'qlr(?)' QGIS Layer files, or projects which point to other (small) projects (a project can be part of another project).
Or maybe you could re-use some excisting project by using some naming scheme in your data or so?

Regards,

Richard Duivenvoorde

On 5/23/21 12:59 PM, Paul Wittle wrote:
> Hi folks,
>
>
>
> I?m trying to do a simple script to open an existing project, add a layer and then save the result but finding it hard to piece together the information I can find online.
>
>
>
> I?ve found various posts suggesting that you need to connect up the canvas or all the GUI information gets lost when you do a project.write() command but for some reason I can only find answers that contain snippets which usually seem to reference iface or canvas without showing how to initiate those in a standalone way.
>
>
>
> Particularly, if you look at https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/loadproject.html <https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/loadproject.html> you have a note about needing to set a bridge but that references canvas which if you copy/paste as per the details in that section alone will of course result in a ?canvas undefined? error.
>
>
>
> Is there a simple full example anywhere that shows how you can open a project file using a standalone python script, add one layer and save it without losing half the information in the project file?
>
>
>
> My best effort so far added the layer but resulted in existing layers
> being invalid when I opened the project in QGIS and my ?improved?
> version?at the moment?seems to be almost halving the size of the
> project so I assume it is still deleting all the canvas information.
> Any hints would be appreciated ?
>
>
>
> Thanks
>
> Paul
>
> This e-mail and any files transmitted with it are intended solely for
> the use of the individual or entity to whom they are addressed. It may
> contain unclassified but sensitive or protectively marked material and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use
> it, or disclose it to anyone else. If you have received this
> transmission in error please notify the sender immediately. All
> traffic may be subject to recording and/or monitoring in accordance
> with relevant legislation. Any views expressed in this message are
> those of the individual sender, except where the sender specifies and
> with authority, states them to be the views of Dorset Council. Dorset
> Council does not accept service of documents by fax or other
> electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its
> attachments whether encoded, encrypted or otherwise supplied are free
> from computer viruses, Dorset Council accepts no liability in respect
> of any loss, cost, damage or expense suffered as a result of accessing
> this message or any of its attachments. For information on how Dorset
> Council processes your information, please see
> www.dorsetcouncil.gov.uk/data-protection
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From rdmailings at duif.net  Mon May 24 03:46:17 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 24 May 2021 12:46:17 +0200
Subject: [QGIS-Developer] QGIS standalone script examples
In-Reply-To: <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>

On 5/24/21 9:20 AM, Paul Wittle wrote:
...

> However as I say; the resulting project file is significantly smaller than the one that was read so it must be deleting things it shouldn't even be modifying; I assume because the bridge bit is not being used and because it is running standalone.
> 
> Is that enough information?

Yes :-)
That is a very interesting excercise!

Thought to try to create a minimal example script:

- created a project with a small map from nl.gpkg in it
- created a qgs file from that called template.qgs
- created the script (at first without the 'app' parts (which also worked) which opens/loads the template.qgs, loads another (river) layer and places that in a group (groupname) in the layer tree, and then writes out to another testoutput.qgs project file.

And well, that just worked, I can open the testoutput project and it 

See https://duif.net/standalone_save.zip for you to try/test (as I do this on Debian, did not test it on Windows). Both scripts/data/qgs files are in it.

Off course (for others) you need to have all your paths to libs/dll's ok and you have to set the right prefix path in the script.
And maybe change some ./ to .\ on windows?

If I look at the output qgs, indeed the canvas-part is missing, but... QGIS opens it just fine and both layers are also visible/valid
So I do not think the 'shrinking' of the project is the crux of the invalid layers.

Also the 'bridge' part is missing (with me), for what exactly was that needed? Because (I think(!)), that is if you write a script, and you want to sync the (off sight/background) layertree to the (visible) canvas (which we do not have), so I think it is not needed?

Ok, hoping my example is of any help, thanks for the excercise :-)

Regards,

Richard Duivenvoorde





From rdmailings at duif.net  Mon May 24 05:09:30 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 24 May 2021 14:09:30 +0200
Subject: [QGIS-Developer] QGIS standalone script examples
In-Reply-To: <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>

On 5/24/21 1:39 PM, Paul Wittle wrote:

> Thanks for that; it is great to see your script.
> 
> I tried running it with our own project file and the results are the same
> 
> (hence direct message so you can see the screenshot)
> 
> You can see it goes from 1250KB to 593KB and for some reason all the Oracle layers become invalid. I don?t think it is worth worrying so much about that though as that may be just a symptom rather than the cause.
> 
> Out of interest; what path is actually meant to go into the prefix path? Is it meant to point at the installation bin directory or the user profile?
> 
> I wonder if I?m just setting that field incorrectly.

Hi Paul ( bringing it to qgis-dev again :-) ),

The prefix path can be found by running in QGIS in the python console:

QgsApplication.prefixPath()

(from https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/intro.html#using-pyqgis-in-standalone-scripts)

This add's (for your script or for QGIS) the main directory for the application to search for libraries (in my case PREFIX/lib) and/or header files (in my case PREFIX/include). This is actually the install dir.

Thinking about that, for QGIS to be able to load Oracle layers, you have to have Oracle OCI libs installed (you probably have otherwise you would not be able to load Oracle layers in QGIS). But depending on HOW you installed them, maybe your script cannot load the Oracle dll's/lib's? And thus is unable to load them in your script?
In another case I installed the oci libs outside of the QGIS lib dir, and I really had to point to them (on Linux using the LD_LIBRARY path variable and the prefix path). 
Maybe that is indeed the problem?

Another observation is that you are referencing ogr modules in your script. Are you maybe mixing up different ogr-versions/libraries, by mixing the ogr from your QGIS install with an ogr from 'pip install'? Note that the QGIS Oracle-provider is NOT ogr based if I am correct (altough you CAN have an ogr which can open Oracle if compiled against the Oracle libs, to make it more difficult :-) )

So if you leave out the Oracle stuff, (or maybe instead use Postgis as test), it 'just works'?

Regards,

Richard


From paul.wittle at dorsetcouncil.gov.uk  Mon May 24 05:54:11 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Mon, 24 May 2021 12:54:11 +0000
Subject: [QGIS-Developer] QGIS standalone script examples
In-Reply-To: <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
Message-ID: <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Hi,

So I've now run another test using your script with literally just the read then save commands and the result is the same so I think we can pretty much ignore anything related to adding the layer as it is more a case of it just losing lots of the project file on save...which is odd...but as you say perhaps it is an Oracle issue.

Unfortunately I can't simply exclude Oracle as that is currently our spatial database provider and whilst we are migrating to PostgresSQL that will be a while so I do need a solution that leaves those layers alone really.

I've run the function you suggest and the prefix path should be:
QgsApplication.setPrefixPath('C:/programs/QGIS_3/apps/qgis', True)

So that is <%install_dir%/apps/qgis> if anyone else is trying to work out where that would be.

I didn't have that set correctly...but I do now... and it still has the same result.

I will investigate the Oracle side a bit more to see if that is the issue but I should point out that python is not generally available (banned by our security policy) so the script is run using the same method as the Windows batch files which open the application. It is possible that the batch file mounts things in all sorts of places so perhaps you are right and it can't find the Oracle libraries.

The batch commands I'm referring to include o4w_env.bat, qt5_env.bat and py3_env.bat which I believe are default with the install so hopefully you can see them.

That said, I would have expected a script that simply says Open > Save with no changes would not save anything but the changes so standalone scripts don't seem particularly safe to use. On the flip side; the documentation doesn't really say they are particularly safe so that is not really a complaint so much as an observation that the write command is basically a rewrite of the project file even if you don't change anything at all.

My joys of being stuck with Windows and Oracle continue...I will continue to try and work it out.

Thanks again for your help,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 24 May 2021 13:10
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS standalone script examples

On 5/24/21 1:39 PM, Paul Wittle wrote:

> Thanks for that; it is great to see your script.
>
> I tried running it with our own project file and the results are the same
>
> (hence direct message so you can see the screenshot)
>
> You can see it goes from 1250KB to 593KB and for some reason all the Oracle layers become invalid. I don?t think it is worth worrying so much about that though as that may be just a symptom rather than the cause.
>
> Out of interest; what path is actually meant to go into the prefix path? Is it meant to point at the installation bin directory or the user profile?
>
> I wonder if I?m just setting that field incorrectly.

Hi Paul ( bringing it to qgis-dev again :-) ),

The prefix path can be found by running in QGIS in the python console:

QgsApplication.prefixPath()

(from https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/intro.html#using-pyqgis-in-standalone-scripts)

This add's (for your script or for QGIS) the main directory for the application to search for libraries (in my case PREFIX/lib) and/or header files (in my case PREFIX/include). This is actually the install dir.

Thinking about that, for QGIS to be able to load Oracle layers, you have to have Oracle OCI libs installed (you probably have otherwise you would not be able to load Oracle layers in QGIS). But depending on HOW you installed them, maybe your script cannot load the Oracle dll's/lib's? And thus is unable to load them in your script?
In another case I installed the oci libs outside of the QGIS lib dir, and I really had to point to them (on Linux using the LD_LIBRARY path variable and the prefix path).
Maybe that is indeed the problem?

Another observation is that you are referencing ogr modules in your script. Are you maybe mixing up different ogr-versions/libraries, by mixing the ogr from your QGIS install with an ogr from 'pip install'? Note that the QGIS Oracle-provider is NOT ogr based if I am correct (altough you CAN have an ogr which can open Oracle if compiled against the Oracle libs, to make it more difficult :-) )

So if you leave out the Oracle stuff, (or maybe instead use Postgis as test), it 'just works'?

Regards,

Richard

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From rdmailings at duif.net  Mon May 24 08:58:38 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 24 May 2021 17:58:38 +0200
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>

On 5/24/21 2:54 PM, Paul Wittle wrote:

> Unfortunately I can't simply exclude Oracle as that is currently our spatial database provider and whilst we are migrating to PostgresSQL that will be a while so I do need a solution that leaves those layers alone really.

Sorry, I did not mean to exclude Oracle from the final scripts, just to check if another (inbuild db) provider would work instead (as it does not need separate dll's).

> The batch commands I'm referring to include o4w_env.bat, qt5_env.bat and py3_env.bat which I believe are default with the install so hopefully you can see them.

For what I know, both Windows install types (Standalone and osgeo4w) set indeed the right paths using those bat files... 

Checking IF the oracle provider is working, you should be able to check with a simple read of an Oracle table and counting the features or so (in pyqgis I mean)?

Anybody has a trick how to find out what exactly is wrong, when a layer is 'invalid'?

Regards,

Richard Duivenvoorde

From paul.wittle at dorsetcouncil.gov.uk  Tue May 25 00:40:58 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Tue, 25 May 2021 07:40:58 +0000
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
Message-ID: <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Ah, I see your point.

I will setup a project with a PostGIS table and a couple of WMS layers and see how that fairs.

I terms of the error I get... When I open the project all the layers are there with datasource entries but the Layer name column is blank as is the provider column.

So and entry reads:

Layer name = null       Type = vector   provider = null Auth config = Edit      Datasource = datasource (no errors there)

I therefore assume it is deleting something in the canvas settings that is needed for QGIS to realise the layers are Oracle. This is also proved by the log windows where I get the same number of errors in a PostGIS tab even though I have no PostGIS layers in the project. It appears that QGIS believes them to be PostGIS layers.

I'll have a go at your suggestions now.

Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 24 May 2021 16:59
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS standalone script examples (and Oracle)

On 5/24/21 2:54 PM, Paul Wittle wrote:

> Unfortunately I can't simply exclude Oracle as that is currently our spatial database provider and whilst we are migrating to PostgresSQL that will be a while so I do need a solution that leaves those layers alone really.

Sorry, I did not mean to exclude Oracle from the final scripts, just to check if another (inbuild db) provider would work instead (as it does not need separate dll's).

> The batch commands I'm referring to include o4w_env.bat, qt5_env.bat and py3_env.bat which I believe are default with the install so hopefully you can see them.

For what I know, both Windows install types (Standalone and osgeo4w) set indeed the right paths using those bat files...

Checking IF the oracle provider is working, you should be able to check with a simple read of an Oracle table and counting the features or so (in pyqgis I mean)?

Anybody has a trick how to find out what exactly is wrong, when a layer is 'invalid'?

Regards,

Richard Duivenvoorde
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From paul.wittle at dorsetcouncil.gov.uk  Tue May 25 07:04:55 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Tue, 25 May 2021 14:04:55 +0000
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Hi,

I've now done a test using a PostGIS table instead of Oracle and I get a similar result.

It doesn't ask for security credentials or bring up a handle bad layers dialog but the PostGIS table which is working before you run the script appears as an entry in the layers list but doesn't draw.

The
<layer-tree-layer legend_exp="" source="dbname='TEST' host=*** port=5432 sslmode=allow key='tid' srid=27700 type=Polygon checkPrimaryKeyUnicity='0' table=&quot;public&quot;.&quot;TEST_PARISHES&quot; (geom)" expanded="1" legend_split_behavior="0" name="TEST_PARISHES" checked="Qt::Checked" id="TEST_PARISHES_0724930d_e27b_4279_ad0d_e0f6f7bf5973" patch_size="-1,-1" providerKey="postgres">

Converts to:
<layer-tree-layer legend_split_behavior="0" patch_size="-1,-1" name="TEST_PARISHES" legend_exp="" id="TEST_PARISHES_0724930d_e27b_4279_ad0d_e0f6f7bf5973" expanded="1" checked="Qt::Checked">

I think the way I'm calling the standalone script must just not work...but I'm not sure why.

Thanks again for all your help on this.
Paul

-----Original Message-----
From: Paul Wittle
Sent: 25 May 2021 08:41
To: rdmailings at duif.net
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: RE: [QGIS-Developer] QGIS standalone script examples (and Oracle)

Ah, I see your point.

I will setup a project with a PostGIS table and a couple of WMS layers and see how that fairs.

I terms of the error I get... When I open the project all the layers are there with datasource entries but the Layer name column is blank as is the provider column.

So and entry reads:

Layer name = null       Type = vector   provider = null Auth config = Edit      Datasource = datasource (no errors there)

I therefore assume it is deleting something in the canvas settings that is needed for QGIS to realise the layers are Oracle. This is also proved by the log windows where I get the same number of errors in a PostGIS tab even though I have no PostGIS layers in the project. It appears that QGIS believes them to be PostGIS layers.

I'll have a go at your suggestions now.

Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 24 May 2021 16:59
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS standalone script examples (and Oracle)

On 5/24/21 2:54 PM, Paul Wittle wrote:

> Unfortunately I can't simply exclude Oracle as that is currently our spatial database provider and whilst we are migrating to PostgresSQL that will be a while so I do need a solution that leaves those layers alone really.

Sorry, I did not mean to exclude Oracle from the final scripts, just to check if another (inbuild db) provider would work instead (as it does not need separate dll's).

> The batch commands I'm referring to include o4w_env.bat, qt5_env.bat and py3_env.bat which I believe are default with the install so hopefully you can see them.

For what I know, both Windows install types (Standalone and osgeo4w) set indeed the right paths using those bat files...

Checking IF the oracle provider is working, you should be able to check with a simple read of an Oracle table and counting the features or so (in pyqgis I mean)?

Anybody has a trick how to find out what exactly is wrong, when a layer is 'invalid'?

Regards,

Richard Duivenvoorde
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From hallo at frankbroniewski.com  Tue May 25 08:33:12 2021
From: hallo at frankbroniewski.com (Frank Broniewski)
Date: Tue, 25 May 2021 17:33:12 +0200
Subject: [QGIS-Developer] [Qgis-user] QgsBlockingNetworkRequest causes
 SIGSEGV
In-Reply-To: <4de44abf-cfd6-7f85-0258-d5b6c2264b1d@duif.net>
References: <4586228.Pg5YAHcr1M@schnipsel>
 <4de44abf-cfd6-7f85-0258-d5b6c2264b1d@duif.net>
Message-ID: <2663409.ZoRWAcdAFJ@schnipsel>

Hi Richard,

I must admit that I am not sure myself. I have  a script that can communicate 
with the public Web-API of the official luxemburgish geoportal. I use the 
`requests` module in that and it has a nice little command line interface, 
nice for testing and such.

Then I read in a post from Nyall Dawson [1] that QgsBlockingNetworkRequest is 
a "nearly drop-in replacement for the requests module". So I thought I would 
give it a go and remove the dependency on the requests module. In addition, 
having found the unittest script [2] I was pretty certain that it should work. 
But my knowledge of everything Qt is not that great, so there's lots of room 
for misconception on my side here.

It is not the end of the world if QgsBlockingNetwortRequest is only usable 
from inside QGIS, but I was certainly surprised to see it crash like this. But 
then I will have to find out how I can run my tests against the API then when a 
QGIS environment is a requirement here.

And yes, I can confirm that using QgsBlockingNetwortRequest from within QGIS, 
the python console is sufficient, works fine as intended.

Thanks a lot for your feedback and the small plugin,
Frank

Am Sonntag, 23. Mai 2021, 21:23:14 CEST schrieb Richard Duivenvoorde:
> Hi Frank,
> 
> Moving this to dev list as I think that is more appropriate for this question.
> 
> I can easily replicate your issue (on Debian Testing, see below the coredump.txt)
> 
> BUT: are you sure you want to use it outside of QGIS in a standalone script? Because I think these things will need some kind of Qt-Application to run... (as the Application is responsible for stuff like NetWorkProxies, and has the actual 'NetWorkAccessManager'?). But all just guessing...
> 
> Using your code in a minimal HelloWorldPlugin (attached), it just works. (the url I'm using just sents 'ok' as text).
> 
> So: I would not try to run it in a standalone script without a QGIS application context, but in a plugin it 'works'?
> 
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> 
> 
> 
> 
>            PID: 18825 (gnome-shell)
>            UID: 1000 (richard)
>            GID: 1000 (richard)
>         Signal: 11 (SEGV)
>      Timestamp: Sat 2021-03-06 16:16:12 CET (3min 52s ago)
>   Command Line: /usr/bin/gnome-shell
>     Executable: /usr/bin/gnome-shell
>  Control Group: /user.slice/user-1000.slice/user at 1000.service/session.slice/org.gnome.Shell at wayland.service
>           Unit: user at 1000.service
>      User Unit: org.gnome.Shell at wayland.service
>          Slice: user-1000.slice
>      Owner UID: 1000 (richard)
>        Boot ID: 4aaa450c98ed47b299254a234e463620
>     Machine ID: df76fc45bc594c71b48c4eb87da1774e
>       Hostname: oost
>        Storage: /var/lib/systemd/coredump/core.gnome-shell.1000.4aaa450c98ed47b299254a234e463620.18825.1615043772000000.zst
>        Message: Process 18825 (gnome-shell) of user 1000 dumped core.
> ????????????????
>                 Stack trace of thread 18825:
>                 #0  0x00007fe88cf6003d g_type_check_instance (libgobject-2.0.so.0 + 0x3503d)
>                 #1  0x00007fe88cf50883 g_signal_handler_disconnect (libgobject-2.0.so.0 + 0x25883)
>                 #2  0x00007fe88cf42eef n/a (libgobject-2.0.so.0 + 0x17eef)
>                 #3  0x00007fe88ce2dfae n/a (libglib-2.0.so.0 + 0x31fae)
>                 #4  0x00007fe88cf440a3 g_object_unref (libgobject-2.0.so.0 + 0x190a3)
>                 #5  0x00007fe88d1c1df8 n/a (libgnome-shell.so + 0x21df8)
>                 #6  0x00007fe88cf440a3 g_object_unref (libgobject-2.0.so.0 + 0x190a3)
>                 #7  0x00007fe88c546c7e n/a (libgjs.so.0 + 0x47c7e)
>                 #8  0x00007fe88c546d5a n/a (libgjs.so.0 + 0x47d5a)
>                 #9  0x00007fe88c542588 n/a (libgjs.so.0 + 0x43588)
>                 #10 0x00007fe88c542673 n/a (libgjs.so.0 + 0x43673)
>                 #11 0x00007fe88aa3681c n/a (libmozjs-78.so.0 + 0x65381c)
>                 #12 0x00007fe88aa073be n/a (libmozjs-78.so.0 + 0x6243be)
>                 #13 0x00007fe88aa10c02 n/a (libmozjs-78.so.0 + 0x62dc02)
>                 #14 0x00007fe88aa18ac5 n/a (libmozjs-78.so.0 + 0x635ac5)
>                 #15 0x00007fe88aa330b6 n/a (libmozjs-78.so.0 + 0x6500b6)
>                 #16 0x00007fe88aa337dc n/a (libmozjs-78.so.0 + 0x6507dc)
>                 #17 0x00007fe88aa33a6c n/a (libmozjs-78.so.0 + 0x650a6c)
>                 #18 0x00007fe88aa33d25 n/a (libmozjs-78.so.0 + 0x650d25)
>                 #19 0x00007fe88c55dc1f n/a (libgjs.so.0 + 0x5ec1f)
>                 #20 0x00007fe88ce4e8f4 n/a (libglib-2.0.so.0 + 0x528f4)
>                 #21 0x00007fe88ce4dd6f g_main_context_dispatch (libglib-2.0.so.0 + 0x51d6f)
>                 #22 0x00007fe88ce4e118 n/a (libglib-2.0.so.0 + 0x52118)
>                 #23 0x00007fe88ce4e40b g_main_loop_run (libglib-2.0.so.0 + 0x5240b)
>                 #24 0x00007fe88c27627e meta_init (libmutter-7.so.0 + 0xc529e)
>                 #25 0x00007ffd8eec1f9c n/a (n/a + 0x0)
>                 #26 0x455059545f4e4f49 n/a (n/a + 0x0)
> 
> 
> 
> 
> On 5/22/21 3:32 PM, Frank Broniewski wrote:
> > Hi all,
> > 
> > I am trying to replace the `requests` module with QgsBlockingNetworkRequest to 
> > remove a potentially unnecessary dependency from my QGIS plugin. But I am 
> > having trouble using it so far as Python crashes on the command line with a 
> > SIGSEGV all the time. First of all, things work from within the QGIS Python 
> > shell. But not from the command line outside of QGIS.
> > 
> > I am running Fedora 34 KDE spin, but I also tested on Ubuntu 20.04 with the 
> > same failure. It is rather simple to reproduce on my end:
> > 
> > 1) open a Python3 shell
> > 2) >>> import qgis
> >>>> from qgis.core import QgsBlockingNetworkRequest as bnr
> >>>> r = bnr()
> > fish: Job 1, 'python' terminated by signal SIGSEGV (Adressbereichsfehler)
> > 
> > I did look at the unittest Testcases  [1] for the class, e.g the 
> > testFetchEmptyUrl class method and do not see anything that I could have 
> > changed to avoid the SIGSEGV.
> > 
> > So, can I not use QgsBlockingNetworkRequest outside of QGIS or am I just 
> > missing something?
> > 
> > Any tips are greatly appreciated,
> > Frank
> > 
> > 
> > [1] https://github.com/qgis/QGIS/blob/master/tests/src/python/
> > test_qgsblockingnetworkrequest.py
> > 
> > 
> > _______________________________________________
> > Qgis-user mailing list
> > Qgis-user at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
> > 
> 
> 





From rdmailings at duif.net  Tue May 25 12:32:23 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 25 May 2021 21:32:23 +0200
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>


Hi Paul,

Adding the following to my earlier test script resulted in a valid Postgis layer in QGIS:

```
uri = QgsDataSourceUri()
uri.setConnection("localhost", "5432", "gis", "user", "password")
uri.setDataSource("public", "plaatsen", "geom")  # schema, table, geom column
dblayer = QgsVectorLayer(uri.uri(), "plaatsen", "postgres") # uri, layername, provider
if dblayer.isValid():
  project_instance.addMapLayer(dblayer,False)
else:
  print("Postgres layer NOT valid !")

group_entry.insertChildNode(2,QgsLayerTreeLayer(dblayer))
```

Note that the 'uri' info you can retrieve from the python console, by loading the layer via QGIS, make it active and then in console:

iface.mapCanvas().currentLayer().dataProvider().uri()

which for me resulted in something like:

# dbname='gis' host=localhost port=5432 user='user' password='password' sslmode=disable key='id' srid=0 type=Point checkPrimaryKeyUnicity='0' table="public"."plaatsen" (geom)

HTH,

Richard Duivenvoorde

On 5/25/21 4:04 PM, Paul Wittle wrote:
> Hi,
> 
> I've now done a test using a PostGIS table instead of Oracle and I get a similar result.
> 
> It doesn't ask for security credentials or bring up a handle bad layers dialog but the PostGIS table which is working before you run the script appears as an entry in the layers list but doesn't draw.
> 
> The
> <layer-tree-layer legend_exp="" source="dbname='TEST' host=*** port=5432 sslmode=allow key='tid' srid=27700 type=Polygon checkPrimaryKeyUnicity='0' table=&quot;public&quot;.&quot;TEST_PARISHES&quot; (geom)" expanded="1" legend_split_behavior="0" name="TEST_PARISHES" checked="Qt::Checked" id="TEST_PARISHES_0724930d_e27b_4279_ad0d_e0f6f7bf5973" patch_size="-1,-1" providerKey="postgres">
> 
> Converts to:
> <layer-tree-layer legend_split_behavior="0" patch_size="-1,-1" name="TEST_PARISHES" legend_exp="" id="TEST_PARISHES_0724930d_e27b_4279_ad0d_e0f6f7bf5973" expanded="1" checked="Qt::Checked">
> 
> I think the way I'm calling the standalone script must just not work...but I'm not sure why.
> 
> Thanks again for all your help on this.
> Paul
> 
> -----Original Message-----
> From: Paul Wittle
> Sent: 25 May 2021 08:41
> To: rdmailings at duif.net
> Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
> Subject: RE: [QGIS-Developer] QGIS standalone script examples (and Oracle)
> 
> Ah, I see your point.
> 
> I will setup a project with a PostGIS table and a couple of WMS layers and see how that fairs.
> 
> I terms of the error I get... When I open the project all the layers are there with datasource entries but the Layer name column is blank as is the provider column.
> 
> So and entry reads:
> 
> Layer name = null       Type = vector   provider = null Auth config = Edit      Datasource = datasource (no errors there)
> 
> I therefore assume it is deleting something in the canvas settings that is needed for QGIS to realise the layers are Oracle. This is also proved by the log windows where I get the same number of errors in a PostGIS tab even though I have no PostGIS layers in the project. It appears that QGIS believes them to be PostGIS layers.
> 
> I'll have a go at your suggestions now.
> 
> Paul
> 
> -----Original Message-----
> From: Richard Duivenvoorde <rdmailings at duif.net>
> Sent: 24 May 2021 16:59
> To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
> Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] QGIS standalone script examples (and Oracle)
> 
> On 5/24/21 2:54 PM, Paul Wittle wrote:
> 
>> Unfortunately I can't simply exclude Oracle as that is currently our spatial database provider and whilst we are migrating to PostgresSQL that will be a while so I do need a solution that leaves those layers alone really.
> 
> Sorry, I did not mean to exclude Oracle from the final scripts, just to check if another (inbuild db) provider would work instead (as it does not need separate dll's).
> 
>> The batch commands I'm referring to include o4w_env.bat, qt5_env.bat and py3_env.bat which I believe are default with the install so hopefully you can see them.
> 
> For what I know, both Windows install types (Standalone and osgeo4w) set indeed the right paths using those bat files...
> 
> Checking IF the oracle provider is working, you should be able to check with a simple read of an Oracle table and counting the features or so (in pyqgis I mean)?
> 
> Anybody has a trick how to find out what exactly is wrong, when a layer is 'invalid'?
> 
> Regards,
> 
> Richard Duivenvoorde
> This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection
> 


From nyall.dawson at gmail.com  Tue May 25 17:56:47 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 26 May 2021 10:56:47 +1000
Subject: [QGIS-Developer] QEP 227: Add helper hooks to common Python geo
 libraries (shapely, numpy, pyproj)
Message-ID: <CAB28AsgEzNMju3wrH7n_4god_tt9diXPxhtEGsjk0_k5+Frg1A@mail.gmail.com>

Hi all,

Please see https://github.com/qgis/QGIS-Enhancement-Proposals/issues/227
for a newly filed QEP concerning adding convenient helper methods to
interface PyQGIS with common external spatial libraries, including
shapely, pyproj and numpy.

Discussions and comments are welcome on the QEP page!

Nyall

From paul.wittle at dorsetcouncil.gov.uk  Tue May 25 23:40:06 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Wed, 26 May 2021 06:40:06 +0000
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
Message-ID: <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Hi,

Sorry another slight miscommunication I think; I didn't add the PostGIS layer via the Python code. I'm saying the project I'm using already contained a PostGIS layer. It is the existing layers that are being corrupted by the save process not the ones you add.

Everything I 'do' as it were works fine it is the things that break that shouldn't be touched that I'm trying to understand.

Have you tried it with a PostGIS layer already in your project before you start?

The method to replicate; if that is even possible as it might be the way I'm running it rather than general, is:
1) Create a project with a few layers in QGIS (ensure one is a database layer)
2) Open and write the project file via a standalone script (you can add a layer if you like but you don't have to and thus far I've only tried adding GeoPackage layers)
3) Re-open the project in QGIS and look to see if all the original layers are still working.

I hope that clarifies but I will now have a go at adding a second PostGIS layer via the script to see if the existing layer is then okay. If we consider your earlier comment about initialising the Oracle driver it seems possible that adding a PostGIS layer in the standalone script will require the correct drivers to exist so perhaps that will protect the existing layers? I'll give it a shot.

Thanks,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 25 May 2021 20:32
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS standalone script examples (and Oracle)


Hi Paul,

Adding the following to my earlier test script resulted in a valid Postgis layer in QGIS:

```
uri = QgsDataSourceUri()
uri.setConnection("localhost", "5432", "gis", "user", "password") uri.setDataSource("public", "plaatsen", "geom")  # schema, table, geom column dblayer = QgsVectorLayer(uri.uri(), "plaatsen", "postgres") # uri, layername, provider if dblayer.isValid():
  project_instance.addMapLayer(dblayer,False)
else:
  print("Postgres layer NOT valid !")

group_entry.insertChildNode(2,QgsLayerTreeLayer(dblayer))
```

Note that the 'uri' info you can retrieve from the python console, by loading the layer via QGIS, make it active and then in console:

iface.mapCanvas().currentLayer().dataProvider().uri()

which for me resulted in something like:

# dbname='gis' host=localhost port=5432 user='user' password='password' sslmode=disable key='id' srid=0 type=Point checkPrimaryKeyUnicity='0' table="public"."plaatsen" (geom)

HTH,

Richard Duivenvoorde

On 5/25/21 4:04 PM, Paul Wittle wrote:
> Hi,
>
> I've now done a test using a PostGIS table instead of Oracle and I get a similar result.
>
> It doesn't ask for security credentials or bring up a handle bad layers dialog but the PostGIS table which is working before you run the script appears as an entry in the layers list but doesn't draw.
>
> The
> <layer-tree-layer legend_exp="" source="dbname='TEST' host=***
> port=5432 sslmode=allow key='tid' srid=27700 type=Polygon
> checkPrimaryKeyUnicity='0'
> table=&quot;public&quot;.&quot;TEST_PARISHES&quot; (geom)"
> expanded="1" legend_split_behavior="0" name="TEST_PARISHES"
> checked="Qt::Checked"
> id="TEST_PARISHES_0724930d_e27b_4279_ad0d_e0f6f7bf5973"
> patch_size="-1,-1" providerKey="postgres">
>
> Converts to:
> <layer-tree-layer legend_split_behavior="0" patch_size="-1,-1"
> name="TEST_PARISHES" legend_exp=""
> id="TEST_PARISHES_0724930d_e27b_4279_ad0d_e0f6f7bf5973" expanded="1"
> checked="Qt::Checked">
>
> I think the way I'm calling the standalone script must just not work...but I'm not sure why.
>
> Thanks again for all your help on this.
> Paul
>
> -----Original Message-----
> From: Paul Wittle
> Sent: 25 May 2021 08:41
> To: rdmailings at duif.net
> Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
> Subject: RE: [QGIS-Developer] QGIS standalone script examples (and
> Oracle)
>
> Ah, I see your point.
>
> I will setup a project with a PostGIS table and a couple of WMS layers and see how that fairs.
>
> I terms of the error I get... When I open the project all the layers are there with datasource entries but the Layer name column is blank as is the provider column.
>
> So and entry reads:
>
> Layer name = null       Type = vector   provider = null Auth config = Edit      Datasource = datasource (no errors there)
>
> I therefore assume it is deleting something in the canvas settings that is needed for QGIS to realise the layers are Oracle. This is also proved by the log windows where I get the same number of errors in a PostGIS tab even though I have no PostGIS layers in the project. It appears that QGIS believes them to be PostGIS layers.
>
> I'll have a go at your suggestions now.
>
> Paul
>
> -----Original Message-----
> From: Richard Duivenvoorde <rdmailings at duif.net>
> Sent: 24 May 2021 16:59
> To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
> Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] QGIS standalone script examples (and
> Oracle)
>
> On 5/24/21 2:54 PM, Paul Wittle wrote:
>
>> Unfortunately I can't simply exclude Oracle as that is currently our spatial database provider and whilst we are migrating to PostgresSQL that will be a while so I do need a solution that leaves those layers alone really.
>
> Sorry, I did not mean to exclude Oracle from the final scripts, just to check if another (inbuild db) provider would work instead (as it does not need separate dll's).
>
>> The batch commands I'm referring to include o4w_env.bat, qt5_env.bat and py3_env.bat which I believe are default with the install so hopefully you can see them.
>
> For what I know, both Windows install types (Standalone and osgeo4w) set indeed the right paths using those bat files...
>
> Checking IF the oracle provider is working, you should be able to check with a simple read of an Oracle table and counting the features or so (in pyqgis I mean)?
>
> Anybody has a trick how to find out what exactly is wrong, when a layer is 'invalid'?
>
> Regards,
>
> Richard Duivenvoorde
> This e-mail and any files transmitted with it are intended solely for
> the use of the individual or entity to whom they are addressed. It may
> contain unclassified but sensitive or protectively marked material and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use
> it, or disclose it to anyone else. If you have received this
> transmission in error please notify the sender immediately. All
> traffic may be subject to recording and/or monitoring in accordance
> with relevant legislation. Any views expressed in this message are
> those of the individual sender, except where the sender specifies and
> with authority, states them to be the views of Dorset Council. Dorset
> Council does not accept service of documents by fax or other
> electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its
> attachments whether encoded, encrypted or otherwise supplied are free
> from computer viruses, Dorset Council accepts no liability in respect
> of any loss, cost, damage or expense suffered as a result of accessing
> this message or any of its attachments. For information on how Dorset
> Council processes your information, please see
> www.dorsetcouncil.gov.uk/data-protection
>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From paul.wittle at dorsetcouncil.gov.uk  Wed May 26 00:19:38 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Wed, 26 May 2021 07:19:38 +0000
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
 <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <LO2P265MB323173910C1FA7BA223C291FC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Hi,

I've now done a test adding a PostGIS layer as well; in fact the same layer as the existing one in the project.

The result is that the existing PostGIS layer is still broken but the second instance (the new layer added by the script) is working. Very curious; perhaps I need to put in a loop that scans the layer list looking for database layers and explicitly resets the data source.

I will also double check because the only other possibility may be that it is linked to the existing layers using the Authentication manager rather than a typed username and password in the project file.

Can anyone else replicate this issue or is it just me?

Thanks,
Paul

-----Original Message-----
From: Paul Wittle
Sent: 26 May 2021 07:40
To: rdmailings at duif.net
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: RE: [QGIS-Developer] QGIS standalone script examples (and Oracle)

Hi,

Sorry another slight miscommunication I think; I didn't add the PostGIS layer via the Python code. I'm saying the project I'm using already contained a PostGIS layer. It is the existing layers that are being corrupted by the save process not the ones you add.

Everything I 'do' as it were works fine it is the things that break that shouldn't be touched that I'm trying to understand.

Have you tried it with a PostGIS layer already in your project before you start?

The method to replicate; if that is even possible as it might be the way I'm running it rather than general, is:
1) Create a project with a few layers in QGIS (ensure one is a database layer)
2) Open and write the project file via a standalone script (you can add a layer if you like but you don't have to and thus far I've only tried adding GeoPackage layers)
3) Re-open the project in QGIS and look to see if all the original layers are still working.

I hope that clarifies but I will now have a go at adding a second PostGIS layer via the script to see if the existing layer is then okay. If we consider your earlier comment about initialising the Oracle driver it seems possible that adding a PostGIS layer in the standalone script will require the correct drivers to exist so perhaps that will protect the existing layers? I'll give it a shot.

Thanks,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 25 May 2021 20:32
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS standalone script examples (and Oracle)


Hi Paul,

Adding the following to my earlier test script resulted in a valid Postgis layer in QGIS:

```
uri = QgsDataSourceUri()
uri.setConnection("localhost", "5432", "gis", "user", "password") uri.setDataSource("public", "plaatsen", "geom")  # schema, table, geom column dblayer = QgsVectorLayer(uri.uri(), "plaatsen", "postgres") # uri, layername, provider if dblayer.isValid():
  project_instance.addMapLayer(dblayer,False)
else:
  print("Postgres layer NOT valid !")

group_entry.insertChildNode(2,QgsLayerTreeLayer(dblayer))
```

Note that the 'uri' info you can retrieve from the python console, by loading the layer via QGIS, make it active and then in console:

iface.mapCanvas().currentLayer().dataProvider().uri()

which for me resulted in something like:

# dbname='gis' host=localhost port=5432 user='user' password='password' sslmode=disable key='id' srid=0 type=Point checkPrimaryKeyUnicity='0' table="public"."plaatsen" (geom)

HTH,

Richard Duivenvoorde

On 5/25/21 4:04 PM, Paul Wittle wrote:
> Hi,
>
> I've now done a test using a PostGIS table instead of Oracle and I get a similar result.
>
> It doesn't ask for security credentials or bring up a handle bad layers dialog but the PostGIS table which is working before you run the script appears as an entry in the layers list but doesn't draw.
>
> The
> <layer-tree-layer legend_exp="" source="dbname='TEST' host=***
> port=5432 sslmode=allow key='tid' srid=27700 type=Polygon
> checkPrimaryKeyUnicity='0'
> table=&quot;public&quot;.&quot;TEST_PARISHES&quot; (geom)"
> expanded="1" legend_split_behavior="0" name="TEST_PARISHES"
> checked="Qt::Checked"
> id="TEST_PARISHES_0724930d_e27b_4279_ad0d_e0f6f7bf5973"
> patch_size="-1,-1" providerKey="postgres">
>
> Converts to:
> <layer-tree-layer legend_split_behavior="0" patch_size="-1,-1"
> name="TEST_PARISHES" legend_exp=""
> id="TEST_PARISHES_0724930d_e27b_4279_ad0d_e0f6f7bf5973" expanded="1"
> checked="Qt::Checked">
>
> I think the way I'm calling the standalone script must just not work...but I'm not sure why.
>
> Thanks again for all your help on this.
> Paul
>
> -----Original Message-----
> From: Paul Wittle
> Sent: 25 May 2021 08:41
> To: rdmailings at duif.net
> Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
> Subject: RE: [QGIS-Developer] QGIS standalone script examples (and
> Oracle)
>
> Ah, I see your point.
>
> I will setup a project with a PostGIS table and a couple of WMS layers and see how that fairs.
>
> I terms of the error I get... When I open the project all the layers are there with datasource entries but the Layer name column is blank as is the provider column.
>
> So and entry reads:
>
> Layer name = null       Type = vector   provider = null Auth config = Edit      Datasource = datasource (no errors there)
>
> I therefore assume it is deleting something in the canvas settings that is needed for QGIS to realise the layers are Oracle. This is also proved by the log windows where I get the same number of errors in a PostGIS tab even though I have no PostGIS layers in the project. It appears that QGIS believes them to be PostGIS layers.
>
> I'll have a go at your suggestions now.
>
> Paul
>
> -----Original Message-----
> From: Richard Duivenvoorde <rdmailings at duif.net>
> Sent: 24 May 2021 16:59
> To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
> Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] QGIS standalone script examples (and
> Oracle)
>
> On 5/24/21 2:54 PM, Paul Wittle wrote:
>
>> Unfortunately I can't simply exclude Oracle as that is currently our spatial database provider and whilst we are migrating to PostgresSQL that will be a while so I do need a solution that leaves those layers alone really.
>
> Sorry, I did not mean to exclude Oracle from the final scripts, just to check if another (inbuild db) provider would work instead (as it does not need separate dll's).
>
>> The batch commands I'm referring to include o4w_env.bat, qt5_env.bat and py3_env.bat which I believe are default with the install so hopefully you can see them.
>
> For what I know, both Windows install types (Standalone and osgeo4w) set indeed the right paths using those bat files...
>
> Checking IF the oracle provider is working, you should be able to check with a simple read of an Oracle table and counting the features or so (in pyqgis I mean)?
>
> Anybody has a trick how to find out what exactly is wrong, when a layer is 'invalid'?
>
> Regards,
>
> Richard Duivenvoorde
> This e-mail and any files transmitted with it are intended solely for
> the use of the individual or entity to whom they are addressed. It may
> contain unclassified but sensitive or protectively marked material and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use
> it, or disclose it to anyone else. If you have received this
> transmission in error please notify the sender immediately. All
> traffic may be subject to recording and/or monitoring in accordance
> with relevant legislation. Any views expressed in this message are
> those of the individual sender, except where the sender specifies and
> with authority, states them to be the views of Dorset Council. Dorset
> Council does not accept service of documents by fax or other
> electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its
> attachments whether encoded, encrypted or otherwise supplied are free
> from computer viruses, Dorset Council accepts no liability in respect
> of any loss, cost, damage or expense suffered as a result of accessing
> this message or any of its attachments. For information on how Dorset
> Council processes your information, please see
> www.dorsetcouncil.gov.uk/data-protection
>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From rdmailings at duif.net  Wed May 26 02:13:12 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 26 May 2021 11:13:12 +0200
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <LO2P265MB323173910C1FA7BA223C291FC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
 <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323173910C1FA7BA223C291FC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <dd844105-1f28-6253-fef3-39e5c2aa41ee@duif.net>

On 5/26/21 9:19 AM, Paul Wittle wrote:

> The result is that the existing PostGIS layer is still broken but the second instance (the new layer added by the script) is working. Very curious; perhaps I need to put in a loop that scans the layer list looking for database layers and explicitly resets the data source.
> 
> I will also double check because the only other possibility may be that it is linked to the existing layers using the Authentication manager rather than a typed username and password in the project file.
> 
> Can anyone else replicate this issue or is it just me?

Hi Paul,

IF you use the authentication manager, is it possible that your script cannot find the authentication db (or does not provide a valid password/wallet to open it?)?
https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/authentication.html

I tested by adding a db layer in my 'template' project.
1 one with basic auth username/password
2 one using the authentication manager

Although I do not wreck my testoutput project (it still loads all layers after running test.py), I do see the following (I'm using a debug build of QGIS) running my test script:

../src/providers/postgres/qgspostgresconn.cpp:1063 : (postgisVersion) [250ms] geos:3.9.0-CAPI-1.16.2 proj:7.2.1
static bool LibSecretKeyring::findPassword(const QString&, const QString&, QKeychain::JobPrivate*)
../src/core/auth/qgsauthmanager.cpp:1005 : (configAuthMethod) [53ms] No config auth method found in database for authcfg: 7t8kl0t
../src/core/qgsdatasourceuri.cpp:526 : (connectionInfo) [0ms] Data source URI FAILED to update via loading configuration ID '7t8kl0t'
../src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2021-05-26T11:04:11 PostGIS[1] Connection to database failed
fe_sendauth: no password supplied

../src/core/vector/qgsvectorlayer.cpp:1565 : (readXml) [0ms] Could not set data provider for layer dbname='gis' host=localhost port=5432 sslmode=disable authcfg=7t8kl0t key='id' srid=28992 type=MultiPolygon checkPrimaryKeyUnicity='0' table="public"."prov" (geom)
../src/core/project/qgsproject.cpp:1233 : (addLayer) [0ms] Unable to load vector layer
../src/core/project/qgsproject.cpp:1578 : (readProjectFile) [39ms] Unable to get map layers from project file.
../src/core/project/qgsproject.cpp:1582 : (readProjectFile) [0ms] there are 1 broken layers
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-05-26T11:04:11 [1] 1 unavailable layers found:
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-05-26T11:04:11 [1]  * dbname='gis' host=localhost port=5432 sslmode=disable authcfg=7t8kl0t key='id' srid=28992 type=MultiPolygon checkPrimaryKeyUnicity='0' table="public"."prov" (geom)
../src/providers/postgres/qgspostgresconn.cpp:1063 : (postgisVersion) [62ms] geos:3.9.0-CAPI-1.16.2 proj:7.2.1

As said: my newly (written) project is still valid, are you overwriting the old qgs file?

Richard

From matteo.ghetta at gmail.com  Wed May 26 02:43:06 2021
From: matteo.ghetta at gmail.com (matteo)
Date: Wed, 26 May 2021 11:43:06 +0200
Subject: [QGIS-Developer] QgsProcessingFeedback setProgressText method
Message-ID: <bcaf2dc9-02f4-735d-cd5b-6d248e1c760b@gmail.com>

Hi all,

while developing a Processing plugin, within a loop I'm using the 2 
"standard" methods to set the % of progress bar (feedback.setProgress()) 
and to update accordingly the progress text (feedback.setProgressText()).

In the latter case I noticed that the text is also written in the Log 
panel. Is this the standard behavior?

Cheers and thanks!

Matteo


From paul.wittle at dorsetcouncil.gov.uk  Wed May 26 03:57:37 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Wed, 26 May 2021 10:57:37 +0000
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <dd844105-1f28-6253-fef3-39e5c2aa41ee@duif.net>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
 <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323173910C1FA7BA223C291FC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <dd844105-1f28-6253-fef3-39e5c2aa41ee@duif.net>
Message-ID: <LO2P265MB3231EED7DE94A64F226AC99DC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Hi,

I think I've worked it out.

The initialisation of the authentication manager needs to be done before the project read command.

I had the logic near where I was adding a layer (i.e. after the opening of the project) but it needs to be initialised before the project is read. The result is that the original layers are now still valid.

I knew it would be obvious when I worked it out.

The only outstanding question is why the authenticationDatabasePath() Returns a path in the AppData\Roaming\python Folder instead of AppData\Roaming\QGIS despite my specifying the correct path in the .init() function?

Thank you again for all your help on this as I think I should be able to get it working now even if I do have to copy the relevant *.db files to the python folder.

Best Regards,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 26 May 2021 10:13
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS standalone script examples (and Oracle)

On 5/26/21 9:19 AM, Paul Wittle wrote:

> The result is that the existing PostGIS layer is still broken but the second instance (the new layer added by the script) is working. Very curious; perhaps I need to put in a loop that scans the layer list looking for database layers and explicitly resets the data source.
>
> I will also double check because the only other possibility may be that it is linked to the existing layers using the Authentication manager rather than a typed username and password in the project file.
>
> Can anyone else replicate this issue or is it just me?

Hi Paul,

IF you use the authentication manager, is it possible that your script cannot find the authentication db (or does not provide a valid password/wallet to open it?)?
https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/authentication.html

I tested by adding a db layer in my 'template' project.
1 one with basic auth username/password
2 one using the authentication manager

Although I do not wreck my testoutput project (it still loads all layers after running test.py), I do see the following (I'm using a debug build of QGIS) running my test script:

../src/providers/postgres/qgspostgresconn.cpp:1063 : (postgisVersion) [250ms] geos:3.9.0-CAPI-1.16.2 proj:7.2.1 static bool LibSecretKeyring::findPassword(const QString&, const QString&, QKeychain::JobPrivate*)
../src/core/auth/qgsauthmanager.cpp:1005 : (configAuthMethod) [53ms] No config auth method found in database for authcfg: 7t8kl0t
../src/core/qgsdatasourceuri.cpp:526 : (connectionInfo) [0ms] Data source URI FAILED to update via loading configuration ID '7t8kl0t'
../src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2021-05-26T11:04:11 PostGIS[1] Connection to database failed
fe_sendauth: no password supplied

../src/core/vector/qgsvectorlayer.cpp:1565 : (readXml) [0ms] Could not set data provider for layer dbname='gis' host=localhost port=5432 sslmode=disable authcfg=7t8kl0t key='id' srid=28992 type=MultiPolygon checkPrimaryKeyUnicity='0' table="public"."prov" (geom)
../src/core/project/qgsproject.cpp:1233 : (addLayer) [0ms] Unable to load vector layer
../src/core/project/qgsproject.cpp:1578 : (readProjectFile) [39ms] Unable to get map layers from project file.
../src/core/project/qgsproject.cpp:1582 : (readProjectFile) [0ms] there are 1 broken layers
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-05-26T11:04:11 [1] 1 unavailable layers found:
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-05-26T11:04:11 [1]  * dbname='gis' host=localhost port=5432 sslmode=disable authcfg=7t8kl0t key='id' srid=28992 type=MultiPolygon checkPrimaryKeyUnicity='0' table="public"."prov" (geom)
../src/providers/postgres/qgspostgresconn.cpp:1063 : (postgisVersion) [62ms] geos:3.9.0-CAPI-1.16.2 proj:7.2.1

As said: my newly (written) project is still valid, are you overwriting the old qgs file?

Richard
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From delazj at gmail.com  Wed May 26 06:32:30 2021
From: delazj at gmail.com (DelazJ)
Date: Wed, 26 May 2021 15:32:30 +0200
Subject: [QGIS-Developer] QGIS-Documentation fails to build
Message-ID: <CAECJsSpVuRkS-ZVz72Z0uVwZP0w54YsV0ohLS-KfgKuj3mC4tg@mail.gmail.com>

Hi devs,

QGIS-Documentation build test is failing due to "WARNING: py:meth reference
target not found: qgis.core.QgsVectorLayer.setDataSource" [0]
It looks like the QgsVectorLayer.setDataSource method is no longer
available in master. Anyone knows what is the replacement?

Thanks,
Harrissou

[0]
https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210526/92575e5d/attachment.html>

From julien.cabieces at oslandia.com  Wed May 26 06:43:55 2021
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Wed, 26 May 2021 15:43:55 +0200
Subject: [QGIS-Developer] Build issue and SIP_CONCAT_PARTS
Message-ID: <87k0nlmwys.fsf@julien-laptop.home>


Hi devs, 

I'm working on a new QGIS feature and wanted to add a new API in core module. I get a strange error when building, on a class not related to what I am adding.

/home/julien/work/QGIS/build_debug/python/core/sip_corepart11.cpp:272:67: error: no type named 'QgsOptionalQgsExpressionBase' in the global namespace; did you mean 'QgsOptionalExpression'?
     ::QgsOptionalQgsExpressionBase *sipCpp = reinterpret_cast< ::QgsOptionalQgsExpressionBase *>(sipGetCppPtr((sipSimpleWrapper *)sipSelf,sipType_QgsOptionalQgsExpressionBase));

It said that QgsOptionalExpressionBase is not defined in
sip_corepart_11.cpp, but the typedef is actually in sip_corepart_10.cpp,
at the end of the file.

>From what I understand, CMakeList variable SIP_CONCAT_PARTS allows to
split the SIP generated cpp code in several module, but in this case it
looks like split happens on a bad location (typedef on one side, part of
the code on the other side).

If I set SIP_CONCAT_PARTS to 1, it works.

Has anyone already facing this kind of issue? Is there some sort of instruction that I should be aware of to solve this?

I'm on master, Debian Bullseye, SIP 4.19.25

Kind regards,
Julien

From apasotti at gmail.com  Wed May 26 06:48:36 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 26 May 2021 15:48:36 +0200
Subject: [QGIS-Developer] QGIS-Documentation fails to build
In-Reply-To: <CAECJsSpVuRkS-ZVz72Z0uVwZP0w54YsV0ohLS-KfgKuj3mC4tg@mail.gmail.com>
References: <CAECJsSpVuRkS-ZVz72Z0uVwZP0w54YsV0ohLS-KfgKuj3mC4tg@mail.gmail.com>
Message-ID: <CAL5Q6736oDiLZX0ahKEcmUYK3zx3feW=YbFRybYPjdmZ+_MkNw@mail.gmail.com>

It has been moved to the parent class QgsMapLayer

On Wed, May 26, 2021 at 3:32 PM DelazJ <delazj at gmail.com> wrote:

> Hi devs,
>
> QGIS-Documentation build test is failing due to "WARNING: py:meth
> reference target not found: qgis.core.QgsVectorLayer.setDataSource" [0]
> It looks like the QgsVectorLayer.setDataSource method is no longer
> available in master. Anyone knows what is the replacement?
>
> Thanks,
> Harrissou
>
> [0]
> https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210526/7d4c32f3/attachment-0001.html>

From prem.netgis at gmail.com  Thu May 27 05:57:33 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Thu, 27 May 2021 18:27:33 +0530
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on Linux
Message-ID: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>

Hi Team,

Just wondering whether I'm missing something or a genuine bug, please
advise below.

All I am trying is, to take the geometry object in json format whose CRS is
in WGS84 (EPSG:4326) and transform the geometry to EPSG:3857 CRS and
eventually use it in further processing because rest of the processing is
in EPSG:3857 CRS.

I have written below code and it works like a charm on Windows 10 but it
doesn't transform the geometry on Linux. Please advise if there is anything
wrong or missing to add.
*Code Snippet for reproducing:*

from qgis.PyQt.QtCore import QVariant
from shapely.geometry import shape
import geojson,json
from qgis.core import
(QgsGeometry,QgsCoordinateReferenceSystem,QgsCoordinateTransform,QgsProject)
from shapely import speedups as sups
sups.disable()

in_geometry='[{"type": "LineString","coordinates":
[[-78.85338577199997,43.85845267000008],[-78.85593885699996,43.857924291000074]]}]'
geomjson = json.loads(in_geometry)
old_crs = QgsCoordinateReferenceSystem("EPSG:4326")
new_crs = QgsCoordinateReferenceSystem("EPSG:3857")
xtransform = QgsCoordinateTransform(old_crs, new_crs, QgsProject.instance())
for i, g in enumerate(geomjson):
    s = json.dumps(g)
    g1 = geojson.loads(s)
    shapely_geom = shape(g1)
    qgs_geom=QgsGeometry.fromWkt(shapely_geom.wkt)
    qgs_geom.transform(xtransform)
    print (qgs_geom)

*Output from Pycharm:*
C:\Qgis\apps\Python37\python.exe C:/_WORK/SERVICE/test_transform.py
<QgsGeometry: LineString (-8777918.77684544585645199
5443563.52439526654779911, -8778202.97550544328987598
5443481.85537817236036062)>

Process finished with exit code 0

*Output from Linux terminal:*
(gisenv) admin at rd-temp-server:~/gis_service$ python3 test_transform.py
Application path not initialized
Application path not initialized
<QgsGeometry: LineString (-78.85338600000000042 43.85845299999999725,
-78.85593900000000644 43.85792399999999702)>
(gisenv) admin at rd-temp-server:~/gis_service$

Thanks.
-Prem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210527/710f387b/attachment.html>

From ujaval at spatialthoughts.com  Thu May 27 06:20:18 2021
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Thu, 27 May 2021 18:50:18 +0530
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux
In-Reply-To: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
References: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
Message-ID: <CALymcQCzuzC0g7jwr1nnP2QNLg83Gp+QRafn=J1uzbMDdNypMA@mail.gmail.com>

You are not initializing QGIS in your script. Try adding this at the
beginning of your script

from qgis.core import QgsApplication

qgs = QgsApplication([], False)
qgs.initQgis()

[image: Logo] <https://spatialthoughts.com/>
Ujaval Gandhi
Spatial Thoughts
mobile: +91-8095684687
email: ujaval at spatialthoughts.com
[image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
Twitter icon] <https://twitter.com/spatialthoughts>



On Thu, May 27, 2021 at 6:27 PM Prem Kumar <prem.netgis at gmail.com> wrote:

> Hi Team,
>
> Just wondering whether I'm missing something or a genuine bug, please
> advise below.
>
> All I am trying is, to take the geometry object in json format whose CRS
> is in WGS84 (EPSG:4326) and transform the geometry to EPSG:3857 CRS and
> eventually use it in further processing because rest of the processing is
> in EPSG:3857 CRS.
>
> I have written below code and it works like a charm on Windows 10 but it
> doesn't transform the geometry on Linux. Please advise if there is anything
> wrong or missing to add.
> *Code Snippet for reproducing:*
>
> from qgis.PyQt.QtCore import QVariant
> from shapely.geometry import shape
> import geojson,json
> from qgis.core import (QgsGeometry,QgsCoordinateReferenceSystem,QgsCoordinateTransform,QgsProject)
> from shapely import speedups as sups
> sups.disable()
>
> in_geometry='[{"type": "LineString","coordinates": [[-78.85338577199997,43.85845267000008],[-78.85593885699996,43.857924291000074]]}]'
> geomjson = json.loads(in_geometry)
> old_crs = QgsCoordinateReferenceSystem("EPSG:4326")
> new_crs = QgsCoordinateReferenceSystem("EPSG:3857")
> xtransform = QgsCoordinateTransform(old_crs, new_crs, QgsProject.instance())
> for i, g in enumerate(geomjson):
>     s = json.dumps(g)
>     g1 = geojson.loads(s)
>     shapely_geom = shape(g1)
>     qgs_geom=QgsGeometry.fromWkt(shapely_geom.wkt)
>     qgs_geom.transform(xtransform)
>     print (qgs_geom)
>
> *Output from Pycharm:*
> C:\Qgis\apps\Python37\python.exe C:/_WORK/SERVICE/test_transform.py
> <QgsGeometry: LineString (-8777918.77684544585645199
> 5443563.52439526654779911, -8778202.97550544328987598
> 5443481.85537817236036062)>
>
> Process finished with exit code 0
>
> *Output from Linux terminal:*
> (gisenv) admin at rd-temp-server:~/gis_service$ python3 test_transform.py
> Application path not initialized
> Application path not initialized
> <QgsGeometry: LineString (-78.85338600000000042 43.85845299999999725,
> -78.85593900000000644 43.85792399999999702)>
> (gisenv) admin at rd-temp-server:~/gis_service$
>
> Thanks.
> -Prem
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210527/af696245/attachment.html>

From prem.netgis at gmail.com  Thu May 27 07:11:51 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Thu, 27 May 2021 19:41:51 +0530
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux
In-Reply-To: <CALymcQCzuzC0g7jwr1nnP2QNLg83Gp+QRafn=J1uzbMDdNypMA@mail.gmail.com>
References: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
 <CALymcQCzuzC0g7jwr1nnP2QNLg83Gp+QRafn=J1uzbMDdNypMA@mail.gmail.com>
Message-ID: <CAP2_p62V+M-v9UkZ1WnJ3COmJO9NV-z+vKBDWksgiqBnYd6gjQ@mail.gmail.com>

Hi Ujaval,

Thanks for your reply. I have made the suitable code changes as you have
suggested but I still see the same behaviour.

In fact, the given code snippet in the email is an extract from my overall
code where proper initialisation and disposing of qgis application object
is followed. The only difference between running the script on windows and
linux is that, Im running the script on linux machine in a python virtual
environment where as windows, running it directly from qgis python
distributable. Some additional information and thanks for the troubleshoot
option.

*Windows:*
OS: Microsoft Windows 10 Enterprise
QGIS: 3.10.10-A Coru?a
Python: Python 3.7.0

*Linux: *
OS Kernel: Ubuntu 18.04.3 LTS
QGIS: '3.16.3-Hannover'
Python: Python 3.6.9

-Prem







On Thu, May 27, 2021 at 6:50 PM Ujaval Gandhi <ujaval at spatialthoughts.com>
wrote:

> You are not initializing QGIS in your script. Try adding this at the
> beginning of your script
>
> from qgis.core import QgsApplication
>
> qgs = QgsApplication([], False)
> qgs.initQgis()
>
> [image: Logo] <https://spatialthoughts.com/>
> Ujaval Gandhi
> Spatial Thoughts
> mobile: +91-8095684687
> email: ujaval at spatialthoughts.com
> [image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
> Twitter icon] <https://twitter.com/spatialthoughts>
>
>
>
> On Thu, May 27, 2021 at 6:27 PM Prem Kumar <prem.netgis at gmail.com> wrote:
>
>> Hi Team,
>>
>> Just wondering whether I'm missing something or a genuine bug, please
>> advise below.
>>
>> All I am trying is, to take the geometry object in json format whose CRS
>> is in WGS84 (EPSG:4326) and transform the geometry to EPSG:3857 CRS and
>> eventually use it in further processing because rest of the processing is
>> in EPSG:3857 CRS.
>>
>> I have written below code and it works like a charm on Windows 10 but it
>> doesn't transform the geometry on Linux. Please advise if there is anything
>> wrong or missing to add.
>> *Code Snippet for reproducing:*
>>
>> from qgis.PyQt.QtCore import QVariant
>> from shapely.geometry import shape
>> import geojson,json
>> from qgis.core import (QgsGeometry,QgsCoordinateReferenceSystem,QgsCoordinateTransform,QgsProject)
>> from shapely import speedups as sups
>> sups.disable()
>>
>> in_geometry='[{"type": "LineString","coordinates": [[-78.85338577199997,43.85845267000008],[-78.85593885699996,43.857924291000074]]}]'
>> geomjson = json.loads(in_geometry)
>> old_crs = QgsCoordinateReferenceSystem("EPSG:4326")
>> new_crs = QgsCoordinateReferenceSystem("EPSG:3857")
>> xtransform = QgsCoordinateTransform(old_crs, new_crs, QgsProject.instance())
>> for i, g in enumerate(geomjson):
>>     s = json.dumps(g)
>>     g1 = geojson.loads(s)
>>     shapely_geom = shape(g1)
>>     qgs_geom=QgsGeometry.fromWkt(shapely_geom.wkt)
>>     qgs_geom.transform(xtransform)
>>     print (qgs_geom)
>>
>> *Output from Pycharm:*
>> C:\Qgis\apps\Python37\python.exe C:/_WORK/SERVICE/test_transform.py
>> <QgsGeometry: LineString (-8777918.77684544585645199
>> 5443563.52439526654779911, -8778202.97550544328987598
>> 5443481.85537817236036062)>
>>
>> Process finished with exit code 0
>>
>> *Output from Linux terminal:*
>> (gisenv) admin at rd-temp-server:~/gis_service$ python3 test_transform.py
>> Application path not initialized
>> Application path not initialized
>> <QgsGeometry: LineString (-78.85338600000000042 43.85845299999999725,
>> -78.85593900000000644 43.85792399999999702)>
>> (gisenv) admin at rd-temp-server:~/gis_service$
>>
>> Thanks.
>> -Prem
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210527/cfdbfd22/attachment-0001.html>

From ujaval at spatialthoughts.com  Thu May 27 07:19:53 2021
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Thu, 27 May 2021 19:49:53 +0530
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux
In-Reply-To: <CAP2_p62V+M-v9UkZ1WnJ3COmJO9NV-z+vKBDWksgiqBnYd6gjQ@mail.gmail.com>
References: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
 <CALymcQCzuzC0g7jwr1nnP2QNLg83Gp+QRafn=J1uzbMDdNypMA@mail.gmail.com>
 <CAP2_p62V+M-v9UkZ1WnJ3COmJO9NV-z+vKBDWksgiqBnYd6gjQ@mail.gmail.com>
Message-ID: <CALymcQBTBGeonQU_Fh3z4frsgDn9QWbZQQ837D79Z7zEAkw=6Q@mail.gmail.com>

OK. Test the code in  QGIS Python Console. If that works, you have a
problem with initialization. If that also doesn't work, print the result of
the transform which will give you the OperationResult (Explanation at
https://qgis.org/api/classQgsGeometry.html#a8baf383b737d73cafeabe09f5b0d7ef7)
that may give insight into the issue.

Ujaval Gandhi
Spatial Thoughts

On Thu, May 27, 2021, 7:42 PM Prem Kumar <prem.netgis at gmail.com> wrote:

> Hi Ujaval,
>
> Thanks for your reply. I have made the suitable code changes as you have
> suggested but I still see the same behaviour.
>
> In fact, the given code snippet in the email is an extract from my overall
> code where proper initialisation and disposing of qgis application object
> is followed. The only difference between running the script on windows and
> linux is that, Im running the script on linux machine in a python virtual
> environment where as windows, running it directly from qgis python
> distributable. Some additional information and thanks for the troubleshoot
> option.
>
> *Windows:*
> OS: Microsoft Windows 10 Enterprise
> QGIS: 3.10.10-A Coru?a
> Python: Python 3.7.0
>
> *Linux: *
> OS Kernel: Ubuntu 18.04.3 LTS
> QGIS: '3.16.3-Hannover'
> Python: Python 3.6.9
>
> -Prem
>
>
>
>
>
>
>
> On Thu, May 27, 2021 at 6:50 PM Ujaval Gandhi <ujaval at spatialthoughts.com>
> wrote:
>
>> You are not initializing QGIS in your script. Try adding this at the
>> beginning of your script
>>
>> from qgis.core import QgsApplication
>>
>> qgs = QgsApplication([], False)
>> qgs.initQgis()
>>
>> [image: Logo] <https://spatialthoughts.com/>
>> Ujaval Gandhi
>> Spatial Thoughts
>> mobile: +91-8095684687
>> email: ujaval at spatialthoughts.com
>> [image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
>> Twitter icon] <https://twitter.com/spatialthoughts>
>>
>>
>>
>> On Thu, May 27, 2021 at 6:27 PM Prem Kumar <prem.netgis at gmail.com> wrote:
>>
>>> Hi Team,
>>>
>>> Just wondering whether I'm missing something or a genuine bug, please
>>> advise below.
>>>
>>> All I am trying is, to take the geometry object in json format whose CRS
>>> is in WGS84 (EPSG:4326) and transform the geometry to EPSG:3857 CRS and
>>> eventually use it in further processing because rest of the processing is
>>> in EPSG:3857 CRS.
>>>
>>> I have written below code and it works like a charm on Windows 10 but it
>>> doesn't transform the geometry on Linux. Please advise if there is anything
>>> wrong or missing to add.
>>> *Code Snippet for reproducing:*
>>>
>>> from qgis.PyQt.QtCore import QVariant
>>> from shapely.geometry import shape
>>> import geojson,json
>>> from qgis.core import (QgsGeometry,QgsCoordinateReferenceSystem,QgsCoordinateTransform,QgsProject)
>>> from shapely import speedups as sups
>>> sups.disable()
>>>
>>> in_geometry='[{"type": "LineString","coordinates": [[-78.85338577199997,43.85845267000008],[-78.85593885699996,43.857924291000074]]}]'
>>> geomjson = json.loads(in_geometry)
>>> old_crs = QgsCoordinateReferenceSystem("EPSG:4326")
>>> new_crs = QgsCoordinateReferenceSystem("EPSG:3857")
>>> xtransform = QgsCoordinateTransform(old_crs, new_crs, QgsProject.instance())
>>> for i, g in enumerate(geomjson):
>>>     s = json.dumps(g)
>>>     g1 = geojson.loads(s)
>>>     shapely_geom = shape(g1)
>>>     qgs_geom=QgsGeometry.fromWkt(shapely_geom.wkt)
>>>     qgs_geom.transform(xtransform)
>>>     print (qgs_geom)
>>>
>>> *Output from Pycharm:*
>>> C:\Qgis\apps\Python37\python.exe C:/_WORK/SERVICE/test_transform.py
>>> <QgsGeometry: LineString (-8777918.77684544585645199
>>> 5443563.52439526654779911, -8778202.97550544328987598
>>> 5443481.85537817236036062)>
>>>
>>> Process finished with exit code 0
>>>
>>> *Output from Linux terminal:*
>>> (gisenv) admin at rd-temp-server:~/gis_service$ python3 test_transform.py
>>> Application path not initialized
>>> Application path not initialized
>>> <QgsGeometry: LineString (-78.85338600000000042 43.85845299999999725,
>>> -78.85593900000000644 43.85792399999999702)>
>>> (gisenv) admin at rd-temp-server:~/gis_service$
>>>
>>> Thanks.
>>> -Prem
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210527/c85a4b06/attachment.html>

From jean at jhemmi.eu  Thu May 27 09:00:06 2021
From: jean at jhemmi.eu (Jean Hemmi)
Date: Thu, 27 May 2021 18:00:06 +0200
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on Linux
 (Prem Kumar)
Message-ID: <CAKsx1pkcU=S=S6L0KdmS+0QPQjz5Y24=r6xjbC1m9iqgdcyRBg@mail.gmail.com>

Hello Prem
I've experienced the same problem running qgis standalone.
QgsCoordinateTransform works fine inside QGIS. Perhaps the project instance
misses something...
I've choose a bypass using pyproj

from pyproj import Proj, transform
PYPROJ_SOURCE_CRS      = Proj(init='epsg:4326')
PYPROJ_DESTINATION_CRS = Proj(init='epsg:2154')
longDestination, latDestination = transform( PYPROJ_SOURCE_CRS,
PYPROJ_DESTINATION_CRS, long, lat)
QgsPointXY( longDestination, latDestination)  # you're back in QGIS API

Hope this can help you
Jean Hemmi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210527/10352a69/attachment.html>

From prem.netgis at gmail.com  Thu May 27 09:42:29 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Thu, 27 May 2021 22:12:29 +0530
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux
In-Reply-To: <CALymcQBTBGeonQU_Fh3z4frsgDn9QWbZQQ837D79Z7zEAkw=6Q@mail.gmail.com>
References: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
 <CALymcQCzuzC0g7jwr1nnP2QNLg83Gp+QRafn=J1uzbMDdNypMA@mail.gmail.com>
 <CAP2_p62V+M-v9UkZ1WnJ3COmJO9NV-z+vKBDWksgiqBnYd6gjQ@mail.gmail.com>
 <CALymcQBTBGeonQU_Fh3z4frsgDn9QWbZQQ837D79Z7zEAkw=6Q@mail.gmail.com>
Message-ID: <CAP2_p61kiPZJyt9s3KPtiY0HkddtOBXij1jw8EVkbv3eaNByWQ@mail.gmail.com>

the OperationResult value is 0 - zero in both windows and linux cases.
Although I could not verify in QGIS Python console from Linux as it is on a
server machine, I have verified the same on my personal macbook pro where
the same code works perfectly fine from QGIS Console but not from pycharm -
similar to Linux.

Since I was running after deliverables, I had taken an alternative approach
to transform the data by pyproj for the time being, but I'm not sure what
is missing in QgsApplication that it could not transform the geometry. In
fact, I have transformed each point and prepared the line, still the same
behavior.

-Prem


On Thu, May 27, 2021 at 7:50 PM Ujaval Gandhi <ujaval at spatialthoughts.com>
wrote:

> OK. Test the code in  QGIS Python Console. If that works, you have a
> problem with initialization. If that also doesn't work, print the result of
> the transform which will give you the OperationResult (Explanation at
> https://qgis.org/api/classQgsGeometry.html#a8baf383b737d73cafeabe09f5b0d7ef7)
> that may give insight into the issue.
>
> Ujaval Gandhi
> Spatial Thoughts
>
> On Thu, May 27, 2021, 7:42 PM Prem Kumar <prem.netgis at gmail.com> wrote:
>
>> Hi Ujaval,
>>
>> Thanks for your reply. I have made the suitable code changes as you have
>> suggested but I still see the same behaviour.
>>
>> In fact, the given code snippet in the email is an extract from my
>> overall code where proper initialisation and disposing of qgis application
>> object is followed. The only difference between running the script on
>> windows and linux is that, Im running the script on linux machine in a
>> python virtual environment where as windows, running it directly from qgis
>> python distributable. Some additional information and thanks for the
>> troubleshoot option.
>>
>> *Windows:*
>> OS: Microsoft Windows 10 Enterprise
>> QGIS: 3.10.10-A Coru?a
>> Python: Python 3.7.0
>>
>> *Linux: *
>> OS Kernel: Ubuntu 18.04.3 LTS
>> QGIS: '3.16.3-Hannover'
>> Python: Python 3.6.9
>>
>> -Prem
>>
>>
>>
>>
>>
>>
>>
>> On Thu, May 27, 2021 at 6:50 PM Ujaval Gandhi <ujaval at spatialthoughts.com>
>> wrote:
>>
>>> You are not initializing QGIS in your script. Try adding this at the
>>> beginning of your script
>>>
>>> from qgis.core import QgsApplication
>>>
>>> qgs = QgsApplication([], False)
>>> qgs.initQgis()
>>>
>>> [image: Logo] <https://spatialthoughts.com/>
>>> Ujaval Gandhi
>>> Spatial Thoughts
>>> mobile: +91-8095684687
>>> email: ujaval at spatialthoughts.com
>>> [image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
>>> Twitter icon] <https://twitter.com/spatialthoughts>
>>>
>>>
>>>
>>> On Thu, May 27, 2021 at 6:27 PM Prem Kumar <prem.netgis at gmail.com>
>>> wrote:
>>>
>>>> Hi Team,
>>>>
>>>> Just wondering whether I'm missing something or a genuine bug, please
>>>> advise below.
>>>>
>>>> All I am trying is, to take the geometry object in json format whose
>>>> CRS is in WGS84 (EPSG:4326) and transform the geometry to EPSG:3857 CRS and
>>>> eventually use it in further processing because rest of the processing is
>>>> in EPSG:3857 CRS.
>>>>
>>>> I have written below code and it works like a charm on Windows 10 but
>>>> it doesn't transform the geometry on Linux. Please advise if there is
>>>> anything wrong or missing to add.
>>>> *Code Snippet for reproducing:*
>>>>
>>>> from qgis.PyQt.QtCore import QVariant
>>>> from shapely.geometry import shape
>>>> import geojson,json
>>>> from qgis.core import (QgsGeometry,QgsCoordinateReferenceSystem,QgsCoordinateTransform,QgsProject)
>>>> from shapely import speedups as sups
>>>> sups.disable()
>>>>
>>>> in_geometry='[{"type": "LineString","coordinates": [[-78.85338577199997,43.85845267000008],[-78.85593885699996,43.857924291000074]]}]'
>>>> geomjson = json.loads(in_geometry)
>>>> old_crs = QgsCoordinateReferenceSystem("EPSG:4326")
>>>> new_crs = QgsCoordinateReferenceSystem("EPSG:3857")
>>>> xtransform = QgsCoordinateTransform(old_crs, new_crs, QgsProject.instance())
>>>> for i, g in enumerate(geomjson):
>>>>     s = json.dumps(g)
>>>>     g1 = geojson.loads(s)
>>>>     shapely_geom = shape(g1)
>>>>     qgs_geom=QgsGeometry.fromWkt(shapely_geom.wkt)
>>>>     qgs_geom.transform(xtransform)
>>>>     print (qgs_geom)
>>>>
>>>> *Output from Pycharm:*
>>>> C:\Qgis\apps\Python37\python.exe C:/_WORK/SERVICE/test_transform.py
>>>> <QgsGeometry: LineString (-8777918.77684544585645199
>>>> 5443563.52439526654779911, -8778202.97550544328987598
>>>> 5443481.85537817236036062)>
>>>>
>>>> Process finished with exit code 0
>>>>
>>>> *Output from Linux terminal:*
>>>> (gisenv) admin at rd-temp-server:~/gis_service$ python3 test_transform.py
>>>> Application path not initialized
>>>> Application path not initialized
>>>> <QgsGeometry: LineString (-78.85338600000000042 43.85845299999999725,
>>>> -78.85593900000000644 43.85792399999999702)>
>>>> (gisenv) admin at rd-temp-server:~/gis_service$
>>>>
>>>> Thanks.
>>>> -Prem
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210527/448d412b/attachment-0001.html>

From prem.netgis at gmail.com  Thu May 27 09:45:25 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Thu, 27 May 2021 22:15:25 +0530
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux (Prem Kumar)
In-Reply-To: <CAKsx1pkcU=S=S6L0KdmS+0QPQjz5Y24=r6xjbC1m9iqgdcyRBg@mail.gmail.com>
References: <CAKsx1pkcU=S=S6L0KdmS+0QPQjz5Y24=r6xjbC1m9iqgdcyRBg@mail.gmail.com>
Message-ID: <CAP2_p60C4gDY5CbjMVdPK-8-viM52CvKn=q1-LE4OPs8L7Rm5Q@mail.gmail.com>

Hi Jean,

Thanks a lot for the reply, as an alternative solution I had taken the
similar help from pyproj after several attempts to resolve the issue with
QgsCoordinateTransform. But, curious to see what made the code to ignore
the transformation.

-Prem

On Thu, May 27, 2021 at 9:30 PM Jean Hemmi <jean at jhemmi.eu> wrote:

> Hello Prem
> I've experienced the same problem running qgis standalone.
> QgsCoordinateTransform works fine inside QGIS. Perhaps the project instance
> misses something...
> I've choose a bypass using pyproj
>
> from pyproj import Proj, transform
> PYPROJ_SOURCE_CRS      = Proj(init='epsg:4326')
> PYPROJ_DESTINATION_CRS = Proj(init='epsg:2154')
> longDestination, latDestination = transform( PYPROJ_SOURCE_CRS,
> PYPROJ_DESTINATION_CRS, long, lat)
> QgsPointXY( longDestination, latDestination)  # you're back in QGIS API
>
> Hope this can help you
> Jean Hemmi
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210527/a9101471/attachment.html>

From nyall.dawson at gmail.com  Thu May 27 15:21:02 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 28 May 2021 08:21:02 +1000
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux
In-Reply-To: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
References: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
Message-ID: <CAB28Asjn_A9=9RLCVxtiPCH1e0w669uD-nrbD0sxAAm-39+Jxg@mail.gmail.com>

On Thu, 27 May 2021 at 22:58, Prem Kumar <prem.netgis at gmail.com> wrote:
>
> Hi Team,
>
> Just wondering whether I'm missing something or a genuine bug, please advise below.
>
> All I am trying is, to take the geometry object in json format whose CRS is in WGS84 (EPSG:4326) and transform the geometry to EPSG:3857 CRS and eventually use it in further processing because rest of the processing is in EPSG:3857 CRS.
>
> I have written below code and it works like a charm on Windows 10 but it doesn't transform the geometry on Linux. Please advise if there is anything wrong or missing to add.

Your transformation code looks fine, so the only issue could be that
the proj library can't find the necessary data files. (Also the
missing QgsApplication initialization which was pointed out earlier).
Do the proj command line tools (such as "projinfo") work correctly for
you?

But while we're looking at this code, there's a lot of opportunity to
optimise this!

1. You don't need either the shapely or geojson modules to import
geometries from geojson. Instead just directly convert GeoJSON
features to QgsFeatures using QgsJsonUtils.stringToFeatureList() --
the conversions to shapely objects and then to QgsGeometries is adding
a LOT of overhead to your script.
2. In this example script you actually don't need to use JSON at all,
since you have a hardcoded list of coordinates. Instead you can make a
QgsGeometry directly using something like:

qgs_geom = QgsGeometry(QgsLineString([
QgsPoint(-78.853385,43.858452), QgsPoint(-78.85593, 43.85792) ]) )

that's the FASTEST way to create the QgsGeometry object, since there's
no json/string parsing involved at all.

Hope that helps!

Nyall


> Code Snippet for reproducing:
>
> from qgis.PyQt.QtCore import QVariant
> from shapely.geometry import shape
> import geojson,json
> from qgis.core import (QgsGeometry,QgsCoordinateReferenceSystem,QgsCoordinateTransform,QgsProject)
> from shapely import speedups as sups
> sups.disable()
>
> in_geometry='[{"type": "LineString","coordinates": [[-78.85338577199997,43.85845267000008],[-78.85593885699996,43.857924291000074]]}]'
> geomjson = json.loads(in_geometry)
> old_crs = QgsCoordinateReferenceSystem("EPSG:4326")
> new_crs = QgsCoordinateReferenceSystem("EPSG:3857")
> xtransform = QgsCoordinateTransform(old_crs, new_crs, QgsProject.instance())
> for i, g in enumerate(geomjson):
>     s = json.dumps(g)
>     g1 = geojson.loads(s)
>     shapely_geom = shape(g1)
>     qgs_geom=QgsGeometry.fromWkt(shapely_geom.wkt)
>     qgs_geom.transform(xtransform)
>     print (qgs_geom)
>
> Output from Pycharm:
> C:\Qgis\apps\Python37\python.exe C:/_WORK/SERVICE/test_transform.py
> <QgsGeometry: LineString (-8777918.77684544585645199 5443563.52439526654779911, -8778202.97550544328987598 5443481.85537817236036062)>
>
> Process finished with exit code 0
>
> Output from Linux terminal:
> (gisenv) admin at rd-temp-server:~/gis_service$ python3 test_transform.py
> Application path not initialized
> Application path not initialized
> <QgsGeometry: LineString (-78.85338600000000042 43.85845299999999725, -78.85593900000000644 43.85792399999999702)>
> (gisenv) admin at rd-temp-server:~/gis_service$
>
> Thanks.
> -Prem
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Thu May 27 15:22:58 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 28 May 2021 08:22:58 +1000
Subject: [QGIS-Developer] Build issue and SIP_CONCAT_PARTS
In-Reply-To: <87k0nlmwys.fsf@julien-laptop.home>
References: <87k0nlmwys.fsf@julien-laptop.home>
Message-ID: <CAB28AshzRG6JrgnMaEkb=wknKgOEv4cz+97=K3w=MAqtTz3WYA@mail.gmail.com>

On Wed, 26 May 2021 at 23:49, Julien Cabieces
<julien.cabieces at oslandia.com> wrote:
>
>
> Hi devs,
>
> I'm working on a new QGIS feature and wanted to add a new API in core module. I get a strange error when building, on a class not related to what I am adding.
>
> /home/julien/work/QGIS/build_debug/python/core/sip_corepart11.cpp:272:67: error: no type named 'QgsOptionalQgsExpressionBase' in the global namespace; did you mean 'QgsOptionalExpression'?
>      ::QgsOptionalQgsExpressionBase *sipCpp = reinterpret_cast< ::QgsOptionalQgsExpressionBase *>(sipGetCppPtr((sipSimpleWrapper *)sipSelf,sipType_QgsOptionalQgsExpressionBase));
>
> It said that QgsOptionalExpressionBase is not defined in
> sip_corepart_11.cpp, but the typedef is actually in sip_corepart_10.cpp,
> at the end of the file.

Are you based on a recent master branch? I had to bump the concat
parts to 13 recently to avoid this exact issue. Perhaps if you rebase
it will be fixed already.

> From what I understand, CMakeList variable SIP_CONCAT_PARTS allows to
> split the SIP generated cpp code in several module, but in this case it
> looks like split happens on a bad location (typedef on one side, part of
> the code on the other side).

Yeah, it's sip being fragile. We've hit this many times in past, and
the solution each time is to increase the number of parts by 1.

>
> If I set SIP_CONCAT_PARTS to 1, it works.
>
> Has anyone already facing this kind of issue? Is there some sort of instruction that I should be aware of to solve this?
>
> I'm on master, Debian Bullseye, SIP 4.19.25
>
> Kind regards,
> Julien
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Thu May 27 15:24:27 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 28 May 2021 08:24:27 +1000
Subject: [QGIS-Developer] QgsProcessingFeedback setProgressText method
In-Reply-To: <bcaf2dc9-02f4-735d-cd5b-6d248e1c760b@gmail.com>
References: <bcaf2dc9-02f4-735d-cd5b-6d248e1c760b@gmail.com>
Message-ID: <CAB28AsjwSo6J9jk=pQ8ftf7LKLnTGKep0kyOVWY=JMXj3LZMqw@mail.gmail.com>

On Wed, 26 May 2021 at 19:43, matteo <matteo.ghetta at gmail.com> wrote:
>
> Hi all,
>
> while developing a Processing plugin, within a loop I'm using the 2
> "standard" methods to set the % of progress bar (feedback.setProgress())
> and to update accordingly the progress text (feedback.setProgressText()).
>
> In the latter case I noticed that the text is also written in the Log
> panel. Is this the standard behavior?

I can't answer if it's expected behavior or not.. it's very old code
which has been ported and moved around a lot over the years.

But I would suggest that setProgressText isn't that widely used and
isn't really necessary. If it's a useful message write it direct to
the log instead.

Nyall

>
> Cheers and thanks!
>
> Matteo
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Fri May 28 01:02:46 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 28 May 2021 10:02:46 +0200
Subject: [QGIS-Developer] #qgis on Freenode
Message-ID: <ff2dc38b-f112-a70f-f117-b477d4e372c2@duif.net>

Hi,

Not sure if others read, but strange things happen with Freenode IRC provider where QGIS has the #qgis channel.
Read https://planet.debian.org/ or more specific https://diziet.dreamwidth.org/8514.html

My hackerspace moved to libra.chat others to oftc.net

Myself I'm totally not in IRC admin stuff (to make a move IF others agree), but I probably leave freenode personally.

But I would be fine to now conclude to go to a Matrix channel (https://matrix.osgeo.org or https://matrix.org/ itself)

Opinions?

Regards,

Richard Duivenvoorde

From prem.netgis at gmail.com  Fri May 28 01:15:12 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Fri, 28 May 2021 13:45:12 +0530
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux
In-Reply-To: <CAB28Asjn_A9=9RLCVxtiPCH1e0w669uD-nrbD0sxAAm-39+Jxg@mail.gmail.com>
References: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
 <CAB28Asjn_A9=9RLCVxtiPCH1e0w669uD-nrbD0sxAAm-39+Jxg@mail.gmail.com>
Message-ID: <CAP2_p62yBhsFgNzH7R-Ty9_jUHnxE3wZjiGqwo-VwVK9+ThCcQ@mail.gmail.com>

HI Nyall,

Although the *projinfo command* works fine on a windows machine, I'm afraid
I could not find *projinfo command* on my linux machine initially and even
after installing PROJ (sudo apt-get install proj-bin). If you can help me
on how to get PROJINFO command running on linux, that would be really great
(very little troubleshooting options on this issue over the internet ).

And thank you very much for your suggestions on handling the code
betterway. In fact I have used QgsJsonUtils.stringToFeatureList()
initially but took shapely approach because I hardly receive 3 or 4 line
segments but eventually need to generate line midpoints, convex hull
polygon around the input lines, getting a buffer around the convex hull
etc, which are basically geometry level operations and that I thought I
won't need to create input lines layer and operate on the features again.

But, the 2nd suggestion would be worth trying. thanks for that.

Just to keep everyone on the same page, here is the way of creating
QgsApplication I have followed.

from qgis.core import QgsApplication
import os, sys
os.environ["QT_QPA_PLATFORM"] = "offscreen"
QgsApplication.setPrefixPath(r"/usr/share/qgis", True)
sys.path.append('/usr/lib/qgis')
sys.path.append(r'/usr/share/qgis/python/plugins')
qgs = QgsApplication([], False)
qgs.initQgis()
### Entire business logic
qgs.quit()

-Prem


On Fri, May 28, 2021 at 3:51 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Thu, 27 May 2021 at 22:58, Prem Kumar <prem.netgis at gmail.com> wrote:
> >
> > Hi Team,
> >
> > Just wondering whether I'm missing something or a genuine bug, please
> advise below.
> >
> > All I am trying is, to take the geometry object in json format whose CRS
> is in WGS84 (EPSG:4326) and transform the geometry to EPSG:3857 CRS and
> eventually use it in further processing because rest of the processing is
> in EPSG:3857 CRS.
> >
> > I have written below code and it works like a charm on Windows 10 but it
> doesn't transform the geometry on Linux. Please advise if there is anything
> wrong or missing to add.
>
> Your transformation code looks fine, so the only issue could be that
> the proj library can't find the necessary data files. (Also the
> missing QgsApplication initialization which was pointed out earlier).
> Do the proj command line tools (such as "projinfo") work correctly for
> you?
>
> But while we're looking at this code, there's a lot of opportunity to
> optimise this!
>
> 1. You don't need either the shapely or geojson modules to import
> geometries from geojson. Instead just directly convert GeoJSON
> features to QgsFeatures using QgsJsonUtils.stringToFeatureList() --
> the conversions to shapely objects and then to QgsGeometries is adding
> a LOT of overhead to your script.
> 2. In this example script you actually don't need to use JSON at all,
> since you have a hardcoded list of coordinates. Instead you can make a
> QgsGeometry directly using something like:
>
> qgs_geom = QgsGeometry(QgsLineString([
> QgsPoint(-78.853385,43.858452), QgsPoint(-78.85593, 43.85792) ]) )
>
> that's the FASTEST way to create the QgsGeometry object, since there's
> no json/string parsing involved at all.
>
> Hope that helps!
>
> Nyall
>
>
> > Code Snippet for reproducing:
> >
> > from qgis.PyQt.QtCore import QVariant
> > from shapely.geometry import shape
> > import geojson,json
> > from qgis.core import
> (QgsGeometry,QgsCoordinateReferenceSystem,QgsCoordinateTransform,QgsProject)
> > from shapely import speedups as sups
> > sups.disable()
> >
> > in_geometry='[{"type": "LineString","coordinates":
> [[-78.85338577199997,43.85845267000008],[-78.85593885699996,43.857924291000074]]}]'
> > geomjson = json.loads(in_geometry)
> > old_crs = QgsCoordinateReferenceSystem("EPSG:4326")
> > new_crs = QgsCoordinateReferenceSystem("EPSG:3857")
> > xtransform = QgsCoordinateTransform(old_crs, new_crs,
> QgsProject.instance())
> > for i, g in enumerate(geomjson):
> >     s = json.dumps(g)
> >     g1 = geojson.loads(s)
> >     shapely_geom = shape(g1)
> >     qgs_geom=QgsGeometry.fromWkt(shapely_geom.wkt)
> >     qgs_geom.transform(xtransform)
> >     print (qgs_geom)
> >
> > Output from Pycharm:
> > C:\Qgis\apps\Python37\python.exe C:/_WORK/SERVICE/test_transform.py
> > <QgsGeometry: LineString (-8777918.77684544585645199
> 5443563.52439526654779911, -8778202.97550544328987598
> 5443481.85537817236036062)>
> >
> > Process finished with exit code 0
> >
> > Output from Linux terminal:
> > (gisenv) admin at rd-temp-server:~/gis_service$ python3 test_transform.py
> > Application path not initialized
> > Application path not initialized
> > <QgsGeometry: LineString (-78.85338600000000042 43.85845299999999725,
> -78.85593900000000644 43.85792399999999702)>
> > (gisenv) admin at rd-temp-server:~/gis_service$
> >
> > Thanks.
> > -Prem
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210528/cdd964ec/attachment-0001.html>

From delazj at gmail.com  Fri May 28 02:03:10 2021
From: delazj at gmail.com (DelazJ)
Date: Fri, 28 May 2021 11:03:10 +0200
Subject: [QGIS-Developer] QGIS-Documentation fails to build
In-Reply-To: <CAL5Q6736oDiLZX0ahKEcmUYK3zx3feW=YbFRybYPjdmZ+_MkNw@mail.gmail.com>
References: <CAECJsSpVuRkS-ZVz72Z0uVwZP0w54YsV0ohLS-KfgKuj3mC4tg@mail.gmail.com>
 <CAL5Q6736oDiLZX0ahKEcmUYK3zx3feW=YbFRybYPjdmZ+_MkNw@mail.gmail.com>
Message-ID: <CAECJsSpo0Z6p6HrCjuU4m4va7+qkxomFNv55J2b6CBD5Trt0Mw@mail.gmail.com>

Hi,
Thanks Alessandro. Fixed now.

Harrissou

Le mer. 26 mai 2021 ? 15:48, Alessandro Pasotti <apasotti at gmail.com> a
?crit :

>
> It has been moved to the parent class QgsMapLayer
>
> On Wed, May 26, 2021 at 3:32 PM DelazJ <delazj at gmail.com> wrote:
>
>> Hi devs,
>>
>> QGIS-Documentation build test is failing due to "WARNING: py:meth
>> reference target not found: qgis.core.QgsVectorLayer.setDataSource" [0]
>> It looks like the QgsVectorLayer.setDataSource method is no longer
>> available in master. Anyone knows what is the replacement?
>>
>> Thanks,
>> Harrissou
>>
>> [0]
>> https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210528/7949c05c/attachment.html>

From uclaros at gmail.com  Fri May 28 02:35:02 2021
From: uclaros at gmail.com (uclaros)
Date: Fri, 28 May 2021 02:35:02 -0700 (MST)
Subject: [QGIS-Developer] #qgis on Freenode
In-Reply-To: <ff2dc38b-f112-a70f-f117-b477d4e372c2@duif.net>
References: <ff2dc38b-f112-a70f-f117-b477d4e372c2@duif.net>
Message-ID: <1622194502460-0.post@n6.nabble.com>

Maybe also post this to the PSC list?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From matteo.ghetta at gmail.com  Fri May 28 06:14:07 2021
From: matteo.ghetta at gmail.com (matteo)
Date: Fri, 28 May 2021 15:14:07 +0200
Subject: [QGIS-Developer] QgsProcessingFeedback setProgressText method
In-Reply-To: <CAB28AsjwSo6J9jk=pQ8ftf7LKLnTGKep0kyOVWY=JMXj3LZMqw@mail.gmail.com>
References: <bcaf2dc9-02f4-735d-cd5b-6d248e1c760b@gmail.com>
 <CAB28AsjwSo6J9jk=pQ8ftf7LKLnTGKep0kyOVWY=JMXj3LZMqw@mail.gmail.com>
Message-ID: <68e989f3-a366-8728-7b98-af08f0f90b17@gmail.com>

Hi Nyall,

> I can't answer if it's expected behavior or not.. it's very old code
> which has been ported and moved around a lot over the years.
> 
> But I would suggest that setProgressText isn't that widely used and
> isn't really necessary. If it's a useful message write it direct to
> the log instead.

thanks for the explanation. I also think that using setProgressText 
within a loop is time consuming if printing a lot of stuff in the Log Panel.

Cheers

Matteo

From senhor.neto at gmail.com  Sun May 30 17:29:26 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Mon, 31 May 2021 01:29:26 +0100
Subject: [QGIS-Developer] SIP generated PEP 484 type hints stub files are
 removed on installation
Message-ID: <CA+H0G_H2YqDWEU9BwoaGFA94hoJJmGFpQMd1h5uz1NbhkKPxDw@mail.gmail.com>

Hi,

On linux, after compiling QGIS, the python file has some *.pyi files
generated by SIP. They are PEP 484 type stub files, and it seems that they
are useful for code completion for python bindings (at least on visual code
studio using pylance).

Nevertheless, they don't seem to be copied in the installation step. Any
idea why? Is there a place where one can control which files are copied
over during the installation and which files are ignored?

I would like to propose to keep the pyi file as they are not that big.

Thanks,

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210531/16d0d627/attachment.html>

From nyall.dawson at gmail.com  Sun May 30 18:44:36 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 31 May 2021 11:44:36 +1000
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux
In-Reply-To: <CAP2_p62yBhsFgNzH7R-Ty9_jUHnxE3wZjiGqwo-VwVK9+ThCcQ@mail.gmail.com>
References: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
 <CAB28Asjn_A9=9RLCVxtiPCH1e0w669uD-nrbD0sxAAm-39+Jxg@mail.gmail.com>
 <CAP2_p62yBhsFgNzH7R-Ty9_jUHnxE3wZjiGqwo-VwVK9+ThCcQ@mail.gmail.com>
Message-ID: <CAB28AsgPMAo6-SV7DwmrxhM=zm-b00-owkgAaKo=hem9Tfn0DQ@mail.gmail.com>

On Fri, 28 May 2021 at 18:15, Prem Kumar <prem.netgis at gmail.com> wrote:
>
> HI Nyall,
>
> Although the projinfo command works fine on a windows machine, I'm afraid I could not find projinfo command on my linux machine initially and even after installing PROJ (sudo apt-get install proj-bin). If you can help me on how to get PROJINFO command running on linux, that would be really great (very little troubleshooting options on this issue over the internet ).

Hmm... this is pointing toward something being quite broken with your
setup. What distro are you running?

Nyall

From julien.cabieces at oslandia.com  Mon May 31 00:11:37 2021
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Mon, 31 May 2021 09:11:37 +0200
Subject: [QGIS-Developer] Build issue and SIP_CONCAT_PARTS
In-Reply-To: <CAB28AshzRG6JrgnMaEkb=wknKgOEv4cz+97=K3w=MAqtTz3WYA@mail.gmail.com>
References: <87k0nlmwys.fsf@julien-laptop.home>
 <CAB28AshzRG6JrgnMaEkb=wknKgOEv4cz+97=K3w=MAqtTz3WYA@mail.gmail.com>
Message-ID: <877djfml7a.fsf@julien-laptop.home>


Hy Nyall,

Yes, I am already rebased on master. And I saw you change it to 13, so I
try to increase it to 14... and it works for core but not analysis.

For now, I'm gonna stick with a concat value of 1, and when I'll be
ready to push, I'll search for a value which works.

Thanks for your response.

Kind regards,
Julien

> On Wed, 26 May 2021 at 23:49, Julien Cabieces
> <julien.cabieces at oslandia.com> wrote:
>>
>>
>> Hi devs,
>>
>> I'm working on a new QGIS feature and wanted to add a new API in core module. I get a strange error when building, on a class not related to what I am adding.
>>
>> /home/julien/work/QGIS/build_debug/python/core/sip_corepart11.cpp:272:67: error: no type named 'QgsOptionalQgsExpressionBase' in the global namespace; did you mean 'QgsOptionalExpression'?
>>      ::QgsOptionalQgsExpressionBase *sipCpp = reinterpret_cast< ::QgsOptionalQgsExpressionBase *>(sipGetCppPtr((sipSimpleWrapper *)sipSelf,sipType_QgsOptionalQgsExpressionBase));
>>
>> It said that QgsOptionalExpressionBase is not defined in
>> sip_corepart_11.cpp, but the typedef is actually in sip_corepart_10.cpp,
>> at the end of the file.
>
> Are you based on a recent master branch? I had to bump the concat
> parts to 13 recently to avoid this exact issue. Perhaps if you rebase
> it will be fixed already.
>

>> From what I understand, CMakeList variable SIP_CONCAT_PARTS allows to
>> split the SIP generated cpp code in several module, but in this case it
>> looks like split happens on a bad location (typedef on one side, part of
>> the code on the other side).
>
> Yeah, it's sip being fragile. We've hit this many times in past, and
> the solution each time is to increase the number of parts by 1.
>
>>
>> If I set SIP_CONCAT_PARTS to 1, it works.
>>
>> Has anyone already facing this kind of issue? Is there some sort of instruction that I should be aware of to solve this?
>>
>> I'm on master, Debian Bullseye, SIP 4.19.25
>>
>> Kind regards,
>> Julien
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From matthias at opengis.ch  Mon May 31 00:27:32 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 31 May 2021 09:27:32 +0200
Subject: [QGIS-Developer] Build issue and SIP_CONCAT_PARTS
In-Reply-To: <877djfml7a.fsf@julien-laptop.home>
References: <87k0nlmwys.fsf@julien-laptop.home>
 <CAB28AshzRG6JrgnMaEkb=wknKgOEv4cz+97=K3w=MAqtTz3WYA@mail.gmail.com>
 <877djfml7a.fsf@julien-laptop.home>
Message-ID: <CAC7zN95_bBk0YhGipj86Yj4SLJGKC_V8ERpBr1Wf-GrRp+AJ4w@mail.gmail.com>

Hi Julien,

I could fix these in the past by adding the appropriate ModuleHeaderCode,
it requires looking into the generated sip_corepart file to find out which
class was responsible.

#ifdef SIP_RUN
% ModuleHeaderCode
#include "qgsoptionalexpression.h"
% End
#endif

Hope this helps
Matthias

On Mon, May 31, 2021 at 9:11 AM Julien Cabieces <
julien.cabieces at oslandia.com> wrote:

>
> Hy Nyall,
>
> Yes, I am already rebased on master. And I saw you change it to 13, so I
> try to increase it to 14... and it works for core but not analysis.
>
> For now, I'm gonna stick with a concat value of 1, and when I'll be
> ready to push, I'll search for a value which works.
>
> Thanks for your response.
>
> Kind regards,
> Julien
>
> > On Wed, 26 May 2021 at 23:49, Julien Cabieces
> > <julien.cabieces at oslandia.com> wrote:
> >>
> >>
> >> Hi devs,
> >>
> >> I'm working on a new QGIS feature and wanted to add a new API in core
> module. I get a strange error when building, on a class not related to what
> I am adding.
> >>
> >>
> /home/julien/work/QGIS/build_debug/python/core/sip_corepart11.cpp:272:67:
> error: no type named 'QgsOptionalQgsExpressionBase' in the global
> namespace; did you mean 'QgsOptionalExpression'?
> >>      ::QgsOptionalQgsExpressionBase *sipCpp = reinterpret_cast<
> ::QgsOptionalQgsExpressionBase *>(sipGetCppPtr((sipSimpleWrapper
> *)sipSelf,sipType_QgsOptionalQgsExpressionBase));
> >>
> >> It said that QgsOptionalExpressionBase is not defined in
> >> sip_corepart_11.cpp, but the typedef is actually in sip_corepart_10.cpp,
> >> at the end of the file.
> >
> > Are you based on a recent master branch? I had to bump the concat
> > parts to 13 recently to avoid this exact issue. Perhaps if you rebase
> > it will be fixed already.
> >
>
> >> From what I understand, CMakeList variable SIP_CONCAT_PARTS allows to
> >> split the SIP generated cpp code in several module, but in this case it
> >> looks like split happens on a bad location (typedef on one side, part of
> >> the code on the other side).
> >
> > Yeah, it's sip being fragile. We've hit this many times in past, and
> > the solution each time is to increase the number of parts by 1.
> >
> >>
> >> If I set SIP_CONCAT_PARTS to 1, it works.
> >>
> >> Has anyone already facing this kind of issue? Is there some sort of
> instruction that I should be aware of to solve this?
> >>
> >> I'm on master, Debian Bullseye, SIP 4.19.25
> >>
> >> Kind regards,
> >> Julien
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210531/170911cc/attachment.html>

From prem.netgis at gmail.com  Mon May 31 01:21:29 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Mon, 31 May 2021 13:51:29 +0530
Subject: [QGIS-Developer] Reg: QgsCoordinateTransform not working on
 Linux
In-Reply-To: <CAB28AsgPMAo6-SV7DwmrxhM=zm-b00-owkgAaKo=hem9Tfn0DQ@mail.gmail.com>
References: <CAP2_p61bVuSqVc9soCFEg0YSk6-5DY55LKiY6QhZ-hMv=xk-mQ@mail.gmail.com>
 <CAB28Asjn_A9=9RLCVxtiPCH1e0w669uD-nrbD0sxAAm-39+Jxg@mail.gmail.com>
 <CAP2_p62yBhsFgNzH7R-Ty9_jUHnxE3wZjiGqwo-VwVK9+ThCcQ@mail.gmail.com>
 <CAB28AsgPMAo6-SV7DwmrxhM=zm-b00-owkgAaKo=hem9Tfn0DQ@mail.gmail.com>
Message-ID: <CAP2_p63wEuEVP0ijOqexAtmcRtHLEsJJtTWQBnbfEW2xt2gFKQ@mail.gmail.com>

Below are more details.

*Installation steps followed:*
sudo apt-get install software-properties-common
sudo add-apt-repository "deb https://qgis.org/debian bionic main"
wget -qO - https://qgis.org/downloads/qgis-2020.gpg.key | sudo gpg
--no-default-keyring --keyring
gnupg-ring:/etc/apt/trusted.gpg.d/qgis-archive.gpg --import
sudo chmod a+r /etc/apt/trusted.gpg.d/qgis-archive.gpg
sudo apt-get update && sudo apt-get install qgis python-qgis
 qgis-plugin-grass
sudo apt install python3-pyqt5 pyqt5-dev-tools qttools5-dev-tools
export PYTHONPATH=/usr/share/qgis/python
export LD_LIBRARY_PATH=/usr/share/qgis/python

*Linux: *
Kernel: Ubuntu 18.04.3 LTS
QGIS: '3.16.3-Hannover'
Python: Python 3.6.9

-Prem

On Mon, May 31, 2021 at 7:14 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Fri, 28 May 2021 at 18:15, Prem Kumar <prem.netgis at gmail.com> wrote:
> >
> > HI Nyall,
> >
> > Although the projinfo command works fine on a windows machine, I'm
> afraid I could not find projinfo command on my linux machine initially and
> even after installing PROJ (sudo apt-get install proj-bin). If you can help
> me on how to get PROJINFO command running on linux, that would be really
> great (very little troubleshooting options on this issue over the internet
> ).
>
> Hmm... this is pointing toward something being quite broken with your
> setup. What distro are you running?
>
> Nyall
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210531/7104a569/attachment-0001.html>

From lauri.kajan at gmail.com  Mon May 31 01:38:28 2021
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Mon, 31 May 2021 11:38:28 +0300
Subject: [QGIS-Developer] SIP generated PEP 484 type hints stub files
 are removed on installation
In-Reply-To: <CA+H0G_H2YqDWEU9BwoaGFA94hoJJmGFpQMd1h5uz1NbhkKPxDw@mail.gmail.com>
References: <CA+H0G_H2YqDWEU9BwoaGFA94hoJJmGFpQMd1h5uz1NbhkKPxDw@mail.gmail.com>
Message-ID: <CAKWoFMJVN8f2FxJ-3kN8eXa8zLd+0t-YjjCfMf2qmCajVHgSAA@mail.gmail.com>

Hi,

There's an open issue about this. https://github.com/qgis/QGIS/issues/41264
Stub files are not included either on the Osgeo4w install.


Thanks,

Lauri

On Mon, May 31, 2021 at 3:29 AM Alexandre Neto <senhor.neto at gmail.com>
wrote:

> Hi,
>
> On linux, after compiling QGIS, the python file has some *.pyi files
> generated by SIP. They are PEP 484 type stub files, and it seems that they
> are useful for code completion for python bindings (at least on visual code
> studio using pylance).
>
> Nevertheless, they don't seem to be copied in the installation step. Any
> idea why? Is there a place where one can control which files are copied
> over during the installation and which files are ignored?
>
> I would like to propose to keep the pyi file as they are not that big.
>
> Thanks,
>
> Alexandre Neto
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210531/2a74b03e/attachment.html>

From julien.cabieces at oslandia.com  Mon May 31 05:26:27 2021
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Mon, 31 May 2021 14:26:27 +0200
Subject: [QGIS-Developer] Build issue and SIP_CONCAT_PARTS
In-Reply-To: <CAC7zN95_bBk0YhGipj86Yj4SLJGKC_V8ERpBr1Wf-GrRp+AJ4w@mail.gmail.com>
References: <87k0nlmwys.fsf@julien-laptop.home>
 <CAB28AshzRG6JrgnMaEkb=wknKgOEv4cz+97=K3w=MAqtTz3WYA@mail.gmail.com>
 <877djfml7a.fsf@julien-laptop.home>
 <CAC7zN95_bBk0YhGipj86Yj4SLJGKC_V8ERpBr1Wf-GrRp+AJ4w@mail.gmail.com>
Message-ID: <87h7ij9jik.fsf@julien-laptop.home>


Hi Matthias,

Thanks for the tip, I'll try that!

Kind regards,
Julien

> Hi Julien,
>
> I could fix these in the past by adding the appropriate ModuleHeaderCode,
> it requires looking into the generated sip_corepart file to find out which
> class was responsible.
>
> #ifdef SIP_RUN
> % ModuleHeaderCode
> #include "qgsoptionalexpression.h"
> % End
> #endif
>
> Hope this helps
> Matthias
>
> On Mon, May 31, 2021 at 9:11 AM Julien Cabieces <
> julien.cabieces at oslandia.com> wrote:
>
>>
>> Hy Nyall,
>>
>> Yes, I am already rebased on master. And I saw you change it to 13, so I
>> try to increase it to 14... and it works for core but not analysis.
>>
>> For now, I'm gonna stick with a concat value of 1, and when I'll be
>> ready to push, I'll search for a value which works.
>>
>> Thanks for your response.
>>
>> Kind regards,
>> Julien
>>
>> > On Wed, 26 May 2021 at 23:49, Julien Cabieces
>> > <julien.cabieces at oslandia.com> wrote:
>> >>
>> >>
>> >> Hi devs,
>> >>
>> >> I'm working on a new QGIS feature and wanted to add a new API in core
>> module. I get a strange error when building, on a class not related to what
>> I am adding.
>> >>
>> >>
>> /home/julien/work/QGIS/build_debug/python/core/sip_corepart11.cpp:272:67:
>> error: no type named 'QgsOptionalQgsExpressionBase' in the global
>> namespace; did you mean 'QgsOptionalExpression'?
>> >>      ::QgsOptionalQgsExpressionBase *sipCpp = reinterpret_cast<
>> ::QgsOptionalQgsExpressionBase *>(sipGetCppPtr((sipSimpleWrapper
>> *)sipSelf,sipType_QgsOptionalQgsExpressionBase));
>> >>
>> >> It said that QgsOptionalExpressionBase is not defined in
>> >> sip_corepart_11.cpp, but the typedef is actually in sip_corepart_10.cpp,
>> >> at the end of the file.
>> >
>> > Are you based on a recent master branch? I had to bump the concat
>> > parts to 13 recently to avoid this exact issue. Perhaps if you rebase
>> > it will be fixed already.
>> >
>>
>> >> From what I understand, CMakeList variable SIP_CONCAT_PARTS allows to
>> >> split the SIP generated cpp code in several module, but in this case it
>> >> looks like split happens on a bad location (typedef on one side, part of
>> >> the code on the other side).
>> >
>> > Yeah, it's sip being fragile. We've hit this many times in past, and
>> > the solution each time is to increase the number of parts by 1.
>> >
>> >>
>> >> If I set SIP_CONCAT_PARTS to 1, it works.
>> >>
>> >> Has anyone already facing this kind of issue? Is there some sort of
>> instruction that I should be aware of to solve this?
>> >>
>> >> I'm on master, Debian Bullseye, SIP 4.19.25
>> >>
>> >> Kind regards,
>> >> Julien
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>


From delazj at gmail.com  Mon May 31 23:23:10 2021
From: delazj at gmail.com (Delaz J)
Date: Tue, 1 Jun 2021 08:23:10 +0200
Subject: [QGIS-Developer] QGIS-Documentation fails to build
In-Reply-To: <CAECJsSpo0Z6p6HrCjuU4m4va7+qkxomFNv55J2b6CBD5Trt0Mw@mail.gmail.com>
References: <CAECJsSpVuRkS-ZVz72Z0uVwZP0w54YsV0ohLS-KfgKuj3mC4tg@mail.gmail.com>
 <CAL5Q6736oDiLZX0ahKEcmUYK3zx3feW=YbFRybYPjdmZ+_MkNw@mail.gmail.com>
 <CAECJsSpo0Z6p6HrCjuU4m4va7+qkxomFNv55J2b6CBD5Trt0Mw@mail.gmail.com>
Message-ID: <d5a528a8-1f2a-d98f-ab3a-867df01dbe93@gmail.com>

Hi,

The doctest is again failing, actually aborted by GitHub after 6 hours 
(it used to take <5mn). Began yesterday.

 From what I can see, it's struggling to connect and download to the 
qgis docker image. See 
https://github.com/qgis/QGIS-Documentation/runs/2715733455?check_suite_focus=true 
vs 
https://github.com/qgis/QGIS-Documentation/runs/2709502529?check_suite_focus=true

Any help appreciated.

Thanks,

Harrissou

Le 28/05/2021 ? 11:03, DelazJ a ?crit?:
> Hi,
> Thanks Alessandro. Fixed now.
>
> Harrissou
>
> Le?mer. 26 mai 2021 ??15:48, Alessandro Pasotti <apasotti at gmail.com 
> <mailto:apasotti at gmail.com>> a ?crit?:
>
>
>     It has been moved to the parent class QgsMapLayer
>
>     On Wed, May 26, 2021 at 3:32 PM DelazJ <delazj at gmail.com
>     <mailto:delazj at gmail.com>> wrote:
>
>         Hi devs,
>
>         QGIS-Documentation build test is failing due to "WARNING:
>         py:meth reference target not found:
>         qgis.core.QgsVectorLayer.setDataSource" [0]
>         It looks like the QgsVectorLayer.setDataSource method is no
>         longer available in master. Anyone knows what is the replacement?
>
>         Thanks,
>         Harrissou
>
>         [0]
>         https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622
>         <https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622>
>
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         List info:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>         Unsubscribe:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>
>
>     -- 
>     Alessandro Pasotti
>     QCooperative: www.qcooperative.net <https://www.qcooperative.net>
>     ItOpen: www.itopen.it <http://www.itopen.it>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210601/4685950e/attachment.html>

From Roberto.Poltini at gruppoiren.it  Mon May 31 23:56:15 2021
From: Roberto.Poltini at gruppoiren.it (Poltini Roberto)
Date: Tue, 1 Jun 2021 06:56:15 +0000
Subject: [QGIS-Developer] pdf production
Message-ID: <AM7P189MB07104950F95DEF59BE06A68CE23E9@AM7P189MB0710.EURP189.PROD.OUTLOOK.COM>

Hi all,
   I developed a QGIS (3.10.14-A Coru?a) plugin to export hundreds pdfs from QgsReport.
The pdf is composed by maps and the last page contains a table which can be expanded to the next pages.
At the beginnig the pdfs are all right.
The problem occurs after some hundreds pdf when the table is truncated to 1 page and it doesn't expand to the next pages.
It seems something regarding memory...
This is the code used to generate pdf.

if type(layout) == qgis._core.QgsReport:
   pdf_settings = QgsLayoutExporter.PdfExportSettings() # default settings
   result, msg = QgsLayoutExporter.exportToPdf(layout, outputFileName, pdf_settings)

Is there anybody can help me ?
Thank you in advance
Roberto Poltini

________________________________
Per essere informati sulle novit? del Gruppo Iren, vi invitiamo a registrarvi alla nostra mailing list, all'indirizzo "http://www.gruppoiren.it/"<http://www.gruppoiren.it/> .

? possibile, inoltre, avanzare nuove idee e progetti per il territorio e seguire quelli gi? attivi nei Comitati Territoriali del Gruppo Iren, consultando "http://www.Irencollabora.it"<http://www.Irencollabora.it>

You can also suggest new ideas and initiatives for the territory and view those already active in the Iren Group Territorial Committees "http://www.Irencollabora.it"<http://www.Irencollabora.it>

Le informazioni contenute nella presente comunicazione e i relativi allegati possono essere riservate e sono, comunque, destinate esclusivamente alle persone o alla Societ? sopraindicati. La diffusione, distribuzione e/o copiatura del documento trasmesso da parte di qualsiasi soggetto diverso dal destinatario ? proibita, sia ai sensi dell'art. 616 c.p. , che ai sensi del D.Lgs. n. 196/2003. Se avete ricevuto questo messaggio per errore, vi preghiamo di distruggerlo e di informare immediatamente il mittente.


________________________________
Le informazioni contenute nella presente comunicazione e i relativi allegati possono essere riservate e sono, comunque, destinate esclusivamente alle persone o alla Societ? sopraindicati. La diffusione, distribuzione e/o copiatura del documento trasmesso da parte di qualsiasi soggetto diverso dal destinatario ? proibita, sia ai sensi dell'art. 616 c.p. , che ai sensi del D.Lgs. n. 196/2003. Se avete ricevuto questo messaggio per errore, vi preghiamo di distruggerlo e di informare immediatamente il mittente.
________________________________
The information in this e-mail (which includes any files transmitted with it) is confidential and may also be legally privileged. It is intended for the addressee only. Access to this e-mail by anyone else is unauthorised. It is not to be relied upon by any person other than the addressee, except with our prior written approval. If no such approval is given, we will not accept any liability (in negligence or otherwise) arising from any third party acting. Unauthorised recipients are required to maintain confidentiality. If you have received this e-mail in error please notify us immediately, destroy any copies and delete it from your computer system. Any use, dissemination, forwarding, printing or copying of this e-mail is prohibited.
________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210601/13cd7b31/attachment.html>

From enzo.ccc at gmail.com  Tue May 11 01:27:54 2021
From: enzo.ccc at gmail.com (Enzo Cocca)
Date: Tue, 11 May 2021 08:27:54 -0000
Subject: [QGIS-Developer] qtdesigner crash
Message-ID: <CAC_+zurmYxQfykvC7jqcqTxWi7RgggchB=cEmaXCkjugG+cWrA@mail.gmail.com>

Hi, on mac 11.3 , qgis 3.18-2
if I try to open Designer, it crash.
So because it not yet implemented on mac?
in attachment the log error

thanks

-- 
Enzo Cocca PhD
in "Science and Technology for Archaeology and Cultural Heritage"

ISMEO
International Association of Mediterranean and Oriental Studies


mail: enzo.ccc at gmail.com
cell: +393495087014
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/8ad50079/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Process_               Designer [1044].pdf
Type: application/pdf
Size: 127196 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210511/8ad50079/attachment-0001.pdf>

From enzo.ccc at gmail.com  Thu May 13 01:49:35 2021
From: enzo.ccc at gmail.com (Enzo Cocca)
Date: Thu, 13 May 2021 08:49:35 -0000
Subject: [QGIS-Developer] mdockwidget not works on Mac
Message-ID: <CAC_+zupjsaa7OfLAyqYJ8b2D-JQHBQyG7ti4YaKAq+QZrz442A@mail.gmail.com>

Hi,
for my plugin I builded with Qtdesigner an mdockwidget of qgis with
floatig option but on Mac this widget appears  empty but not in windows.
Someone can say me if a bug of Qgis for mac or how can fix it?

If I try an preview into QTdesigner it works

below a screenshot

[image: 2021-05-13_10-09-18.jpg]

-- 
Enzo Cocca PhD
in "Science and Technology for Archaeology and Cultural Heritage"

ISMEO
International Association of Mediterranean and Oriental Studies


mail: enzo.ccc at gmail.com
cell: +393495087014
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/304152c0/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2021-05-13_10-09-18.jpg
Type: image/jpeg
Size: 176354 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210513/304152c0/attachment-0001.jpg>

