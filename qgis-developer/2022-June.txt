From andreas at qgis.org  Thu Jun  2 03:01:54 2022
From: andreas at qgis.org (Andreas Neumann)
Date: Thu, 2 Jun 2022 12:01:54 +0200
Subject: [QGIS-Developer] QGIS 508 / EEN 301 549 Accessibility
 Documentation - VPAT/WCAG
In-Reply-To: <PH0PR09MB7354A288C27D8B6EDC8C4A1D97DC9@PH0PR09MB7354.namprd09.prod.outlook.com>
References: <PH0PR09MB7354A288C27D8B6EDC8C4A1D97DC9@PH0PR09MB7354.namprd09.prod.outlook.com>
Message-ID: <CAB2Z92DpkcYD5XqntdpkEK68H96feTq52wOkcgJ9CM_6u9T8Uw@mail.gmail.com>

Dear Thomas,

The QGIS community and PSC would certainly welcome such an initiative.
However, no-one on the PSC/board is based in the US.

Is that something that has to be renewed for every release? Perhaps it
would be done only for LTR versions?

If you know a university institute based in the US that could work on this,
please put us in touch !

Also: what would / should happen in your opinion if the work on the
conformance document would reveal major issues with QGIS in the
accessibility respect? We are largely dependent on upstream libraries
(mainly Qt in our example) - so we are basically inheriting all of the
strengths and weaknesses of Qt ...

Also, it might be worth a discussion with the US QGIS user group - such
conformance documents are typically only valid in one single country - so
it would be kind of the responsibility of a local user group to work on
such documents. Of course the international project can support this effort
- but the initiative should primarily come from the country user group that
wants to get such a conformance document for their country.

Thank you for your reply,
Andreas

On Tue, 31 May 2022 at 18:05, Thomas, Robert - FS via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi QGIS Community,
>
> A number of years ago, there was an effort to complete the Section 508/EEN
> 301 549 Accessibility Conformance documentation (i.e. Voluntary Product
> Accessibility Template (VPAT) and Web Content Accessibility Guidelines
> (WCAG)) for QGIS; is there a part of the developer/tech support community
> interested in completing these?
>
>
>
> My thought is if there may be some Computer Science or Geo students where
> their program covers testing and conformance as a part of their developer
> program curriculum, then they could use QGIS testing and reporting as a
> part of a class project?  A long term relationship with that University
> could make regular updates sustainable.
>
>
>
> There is lots of good information and resources, including the Template
> here <https://www.section508.gov/> < Home | Section508.gov
> <https://www.section508.gov/>>.  The last time I posted, the message was
> held up by moderator approval, hopefully this time my message can reach you
> all.
>
>
>
> Having compliance reports adds to QGIS and other open source software
> increased legitimacy and would allow the use by more governmental
> organization that need to meet their procurement requirements.  Other
> thoughts, ideals or volunteers to lead a working group??  Thanks for the
> consideration.
>
>
>
>
>
> Best regards,
>
>
>
> Robert
>
> [image: Forest Service Shield]
>
>
> *Robert E Thomas, GISP Geospatial IT Specialist *
>
> *US Forest Service*
>
> *WO-CIO-MSS-Geospatial Branch*
>
>
> *PC: 415-760-5640 (Note New Number) **robert.thomas at usda.gov*
> <robert.thomas at usda.gov>
>
> Remote
> Denver, CO 80228
> www.fs.fed.us
> <https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.fs.fed.us%2F&data=04%7C01%7C%7C855c637cdcfe46467c7508d91635d76f%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637565242764253945%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=wUE6byzZpw3nzpLR6ww0xZwtv5lnVpTQ5FkSW00nnZY%3D&reserved=0>
> [image: USDA Logo]
> <https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fusda.gov%2F&data=04%7C01%7C%7C855c637cdcfe46467c7508d91635d76f%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637565242764253945%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=1jB6wO1UNmlrGj2D4BPjgixWsqDXTUWNCoQQFow90uw%3D&reserved=0>
>  [image: Forest Service Twitter]
> <https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftwitter.com%2Fforestservice&data=04%7C01%7C%7C855c637cdcfe46467c7508d91635d76f%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637565242764263902%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=ujD%2FcYNBBfGzppIsTncOTtnX1YXnIXwH0HLKQRQWSMo%3D&reserved=0>
>  [image: USDA Facebook]
> <https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.facebook.com%2Fpages%2FUS-Forest-Service%2F1431984283714112&data=04%7C01%7C%7C855c637cdcfe46467c7508d91635d76f%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637565242764263902%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=60ZhUx6bg0lgZjRIh3KiYxW9JT6W6LXozo80gCBpgys%3D&reserved=0>
>
> *Caring for the land and serving people*
>
>
>
>
>
>
>
>
> This electronic message contains information generated by the USDA solely
> for the intended recipients. Any unauthorized interception of this message
> or the use or disclosure of the information it contains may violate the law
> and subject the violator to civil or criminal penalties. If you believe you
> have received this message in error, please notify the sender and delete
> the email immediately.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/ddcc36b4/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 7801 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/ddcc36b4/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 1701 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/ddcc36b4/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 1594 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/ddcc36b4/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 1453 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/ddcc36b4/attachment-0007.png>

From lauri.kajan at gmail.com  Thu Jun  2 04:30:42 2022
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Thu, 2 Jun 2022 14:30:42 +0300
Subject: [QGIS-Developer] References to old datasources are left in project
 file when datasource is changed
Message-ID: <CAKWoFMJyvTsx2m7iSw6hG1q3WhcS8L0GBsnTXGz4s+xB9K5OYw@mail.gmail.com>

Hi all,

I have noticed that references to old datasources are left in qgs xml
project file when datasource of layers are changed. Tested with LTR and
with the latest nightly.
This happens when there are relationships defined between layers.

When datasources are changed one value of the editwidget's options keeps
pointing to the old location. XPath for the element containing the
problematic datasource reference is:
/qgis/projectlayers/maplayer/fieldConfiguration/field/editWidget[@type='RelationReference']/config/Option[@type='Map']/Option[@name='ReferencedLayerDataSource']/@value

What is the meaning of this ReferencedLayerDataSource? Does it do anything?

Problem raised when I changed datasources of layers from development
database to point to test database. When committing the changes to our repo
I noticed that the project still had references to the development database.

For test/demo purposes I now have two geopackages test.gpkg and prod.gpkg
which both contain layers 'parent' and 'child'.
In the QGIS project there is a relationship defined between these
"parent[fid] <-> child[parent_fid]".

If the project is first built to read parent and child layers from the
test.gpkg and then datasources of these layers are changed to prod.gpkg
using the "Change Data Source ..." tool from the context menu of the layers
then this problematic element in qgs project file is still:
<Option name="ReferencedLayerDataSource" type="QString"
value="C:/Users/lauri/projektit/tmp/qgis-relation-test/test.gpkg|layername=parent"></Option>
This should point to the prod.gpkg. The datasource of the parent MapLayer
is right "<datasource>./prod.gpkg|layername=parent</datasource>"

Another thing I noticed is that the value is an absolute path of the
datasource even when QGIS should use relative paths.


Does QGIS use this ReferencedLayerDataSource for anything? Why is the
datasource even duplicated here?
Should I create an issue for this? If yes should this
ReferencedLayerDataSource Option just be removed or fix the value to
relative and to match the datasource of the actual layer.


Thanks,

Lauri
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/b0b102ab/attachment.htm>

From robert.thomas at usda.gov  Thu Jun  2 08:11:03 2022
From: robert.thomas at usda.gov (Thomas, Robert - FS)
Date: Thu, 2 Jun 2022 15:11:03 +0000
Subject: [QGIS-Developer] QGIS 508 / EEN 301 549 Accessibility
 Documentation - VPAT/WCAG
In-Reply-To: <CAB2Z92DpkcYD5XqntdpkEK68H96feTq52wOkcgJ9CM_6u9T8Uw@mail.gmail.com>
References: <PH0PR09MB7354A288C27D8B6EDC8C4A1D97DC9@PH0PR09MB7354.namprd09.prod.outlook.com>
 <CAB2Z92DpkcYD5XqntdpkEK68H96feTq52wOkcgJ9CM_6u9T8Uw@mail.gmail.com>
Message-ID: <PH0PR09MB7354CFED8C9007524F98653397DE9@PH0PR09MB7354.namprd09.prod.outlook.com>

Hi Andreas,
Thank you for your reply.

The conformance testing should be for each major release where a new functionality or a change in workflows could make the software improved from an accessibility standpoint (& updating to the latest VPAT Template).  The results for a VPAT/WGAG would apply to both US Section 508 conformance and the EU's EN 301 549 standards.  So where/who does the testing shouldn't matter much.

I understand that the QGIS community and product development is open source and agile with contributors all over the globe.  My colleague Kurt Menke is now across the pond too.  As someone who is a limited end user of QGIS, working for our Federal Govt, responsible for putting together acquisition packages only, I'm not in a position to recommend either public or private sources of conformance testing.  My suggestion of a university program to assist in conformance testing was a possible avenue to consider, but I have no direct awareness of any particular university program, but a search did uncover this one<https://das.osu.edu/resources/category/accessibility-testing> (I figure that most CIS programs cover this topic).  Also, if the developer community had an interest, testing can be done in-house, (I found a post<https://lists.osgeo.org/pipermail/qgis-community-team/2013-March/002556.html> from David Seager who had started this in 2013, but wasn't able to track him down to find out the status).

I'm open to speaking with the US based developers/board as well to assist in furthering the conversation.

Here is a link to an organization that discusses the EN 301 549<https://www.deque.com/en-301-549-compliance/> standard (couldn't find a governmental site) and our GSA Accessibility Page<https://www.section508.gov/sell/> for understanding what the reports are and the testing process.

I hope this helps.  Thank you again for reaching out and I look forward to further dialogue to add another layer of completeness to one of the finest open-source geospatial application in this ecosystem.

Best regards,

Robert
[Forest Service Shield]
Robert E Thomas, GISP
Geospatial IT Specialist
US Forest Service
WO-CIO-MSS-Geospatial Branch
PC: 415-760-5640 (Note New Number)
robert.thomas at usda.gov<mailto:robert.thomas at usda.gov>
Remote
Denver, CO 80228
www.fs.fed.us<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.fs.fed.us%2F&data=04%7C01%7C%7C855c637cdcfe46467c7508d91635d76f%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637565242764253945%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=wUE6byzZpw3nzpLR6ww0xZwtv5lnVpTQ5FkSW00nnZY%3D&reserved=0>
[USDA Logo]<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fusda.gov%2F&data=04%7C01%7C%7C855c637cdcfe46467c7508d91635d76f%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637565242764253945%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=1jB6wO1UNmlrGj2D4BPjgixWsqDXTUWNCoQQFow90uw%3D&reserved=0> [Forest Service Twitter] <https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftwitter.com%2Fforestservice&data=04%7C01%7C%7C855c637cdcfe46467c7508d91635d76f%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637565242764263902%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=ujD%2FcYNBBfGzppIsTncOTtnX1YXnIXwH0HLKQRQWSMo%3D&reserved=0>  [USDA Facebook] <https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.facebook.com%2Fpages%2FUS-Forest-Service%2F1431984283714112&data=04%7C01%7C%7C855c637cdcfe46467c7508d91635d76f%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637565242764263902%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=60ZhUx6bg0lgZjRIh3KiYxW9JT6W6LXozo80gCBpgys%3D&reserved=0>
Caring for the land and serving people


From: Andreas Neumann <andreas at qgis.org>
Sent: Thursday, June 2, 2022 4:02 AM
To: Thomas, Robert - FS <robert.thomas at usda.gov>
Cc: qgis-developer at lists.osgeo.org; qgis-user at lists.osgeo.org; QGIS PSC List <psc at qgis.org>
Subject: Re: [QGIS-Developer] QGIS 508 / EEN 301 549 Accessibility Documentation - VPAT/WCAG

Dear Thomas,

The QGIS community and PSC would certainly welcome such an initiative. However, no-one on the PSC/board is based in the US.

Is that something that has to be renewed for every release? Perhaps it would be done only for LTR versions?

If you know a university institute based in the US that could work on this, please put us in touch !

Also: what would / should happen in your opinion if the work on the conformance document would reveal major issues with QGIS in the accessibility respect? We are largely dependent on upstream libraries (mainly Qt in our example) - so we are basically inheriting all of the strengths and weaknesses of Qt ...

Also, it might be worth a discussion with the US QGIS user group - such conformance documents are typically only valid in one single country - so it would be kind of the responsibility of a local user group to work on such documents. Of course the international project can support this effort - but the initiative should primarily come from the country user group that wants to get such a conformance document for their country.

Thank you for your reply,
Andreas

On Tue, 31 May 2022 at 18:05, Thomas, Robert - FS via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> wrote:
Hi QGIS Community,
A number of years ago, there was an effort to complete the Section 508/EEN 301 549 Accessibility Conformance documentation (i.e. Voluntary Product Accessibility Template (VPAT) and Web Content Accessibility Guidelines (WCAG)) for QGIS; is there a part of the developer/tech support community interested in completing these?

My thought is if there may be some Computer Science or Geo students where their program covers testing and conformance as a part of their developer program curriculum, then they could use QGIS testing and reporting as a part of a class project?  A long term relationship with that University could make regular updates sustainable.

There is lots of good information and resources, including the Template here<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.section508.gov%2F&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MghwWahMOqCzXuBR5YT%2FGua1mZR8Rgys%2B5nv1%2F%2BhiE8%3D&reserved=0> < Home | Section508.gov<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.section508.gov%2F&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=MghwWahMOqCzXuBR5YT%2FGua1mZR8Rgys%2B5nv1%2F%2BhiE8%3D&reserved=0>>.  The last time I posted, the message was held up by moderator approval, hopefully this time my message can reach you all.

Having compliance reports adds to QGIS and other open source software increased legitimacy and would allow the use by more governmental organization that need to meet their procurement requirements.  Other thoughts, ideals or volunteers to lead a working group??  Thanks for the consideration.


Best regards,

Robert
[Forest Service Shield]
Robert E Thomas, GISP
Geospatial IT Specialist
US Forest Service
WO-CIO-MSS-Geospatial Branch
PC: 415-760-5640 (Note New Number)
robert.thomas at usda.gov<mailto:robert.thomas at usda.gov>
Remote
Denver, CO 80228
www.fs.fed.us<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.fs.fed.us%2F&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=kJ5%2B9NH5Zd8U%2BYvxoCw475VKh6Lz%2FrO6yc%2Biuaoiq8s%3D&reserved=0>
[USDA Logo]<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fusda.gov%2F&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=qiVQMFP4N3DosR9MmIaWTMaf4ZXs5ficwfQA9ThFzgU%3D&reserved=0> [Forest Service Twitter] <https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftwitter.com%2Fforestservice&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2BXFVoNEZvTyKUoasNUdk2BRvYG9sbvZzrgQXjhOdXN4%3D&reserved=0>  [USDA Facebook] <https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.facebook.com%2Fpages%2FUS-Forest-Service%2F1431984283714112&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=2HJFd%2Fuq25ZEc1RMIMH7ePumQk0cKljwoTQsWyy9BZI%3D&reserved=0>
Caring for the land and serving people






This electronic message contains information generated by the USDA solely for the intended recipients. Any unauthorized interception of this message or the use or disclosure of the information it contains may violate the law and subject the violator to civil or criminal penalties. If you believe you have received this message in error, please notify the sender and delete the email immediately.
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=yGjA0Upsq1OIVs%2FXYN3EC4bRKpSCh94DWJwM87d8vIg%3D&reserved=0>
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer<https://gcc02.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=yGjA0Upsq1OIVs%2FXYN3EC4bRKpSCh94DWJwM87d8vIg%3D&reserved=0>


--

--
Andreas Neumann
QGIS.ORG<https://gcc02.safelinks.protection.outlook.com/?url=http%3A%2F%2Fqgis.org%2F&data=05%7C01%7C%7C578868b086394e120e6b08da447ef3cf%7Ced5b36e701ee4ebc867ee03cfa0d4697%7C0%7C0%7C637897609289715874%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=RL8Yw1qi2xnb09hH6F5Y69HePEOdub0QAjOeRUYqKV8%3D&reserved=0> board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/5d78d376/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 7801 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/5d78d376/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 1701 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/5d78d376/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 1594 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/5d78d376/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 1453 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220602/5d78d376/attachment-0007.png>

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Fri Jun  3 12:25:53 2022
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Fri, 3 Jun 2022 19:25:53 +0000
Subject: [QGIS-Developer] QGIS vs GEOS validity check
Message-ID: <QB1PR01MB2948AE8A89E6027D57A44BD6B3A19@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>

[Intranet logo]
Hi Devs,

I had a surprising issue with a specific vector layer and a clip operation. Validity check of the geometries seem to be done differently if native:clip is used inside a processing script or manually through the GUI as a vector layer containing a linestring with duplicate node like  LINESTRING ((0 0, 1 0, 1 0))  won't cause an issue when the clip is done with the GUI but will halt if done inside a processing script (on QGIS 3.22.6).

Also, if I run qgis:checkvalidity with the GEOS method, no error is found, but if I run it with the QGIS method, it finds one error (line 1 contains 2 duplicate nodes starting at vertex 2). So here are my questions: what exactly is checked when using the GEOS method and what is checked using the QGIS method? Also, do all processing tools (qgis: and native: ones) use the same kind of check?

I didn't find anywhere the details of what would be considered an error according to the "QGIS spec". Is it documented somewhere or do I need to look for hints inside the source code? As for the GEOS method, I only found some error examples in the PostGIS documentation and in a FME page (https://community.safe.com/s/article/invalid-ogc-geometry-examples). Is there an official documentation of what geometries are invalid regarding GEOS?

Thanks a lot for any pointer

Jean-Fran?ois Bourdon, ing.f.
Analyste en t?l?d?tection
Direction des inventaires forestiers
Minist?re des For?ts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Qu?bec (Qu?bec) G1H 6R1
T?l?phone : 418 627-8669, poste 704304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220603/3b5ca7f7/attachment.htm>

From jmckenna at gatewaygeomatics.com  Sat Jun  4 03:34:16 2022
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat, 4 Jun 2022 07:34:16 -0300
Subject: [QGIS-Developer] QGIS vs GEOS validity check
In-Reply-To: <QB1PR01MB2948AE8A89E6027D57A44BD6B3A19@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
References: <QB1PR01MB2948AE8A89E6027D57A44BD6B3A19@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <3ba74017-b77e-5251-b464-0aad62cbb85d@gatewaygeomatics.com>

Hi JF,

Regarding GEOS, please consider asking for more details through the 
project's vibrant forum (subscribe at 
https://lists.osgeo.org/mailman/listinfo/geos-devel ), I know there was 
a big release made yesterday and some chatter (project home: 
https://libgeos.org/ )  GEOS is one of those core libraries, who would 
greatly appreciate your direct feedback.

PS. hello from the east coast

Thanks,

-jeff



-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/



On 2022-06-03 4:25 p.m., Bourdon, Jean-Fran?ois (DIF) via QGIS-Developer 
wrote:
> Intranet logo
> 
> Hi Devs,
> 
> I had a surprising issue with a specific vector layer and a clip 
> operation. Validity check of the geometries seem to be done differently 
> if native:clip is used inside a processing script or manually through 
> the GUI as a vector layer containing a linestring with duplicate node 
> like LINESTRING ((0 0, 1 0, 1 0)) ?won't cause an issue when the clip is 
> done with the GUI but will halt if done inside a processing script (on 
> QGIS 3.22.6).
> 
> Also, if I run */qgis:checkvalidity/* with the *GEOS* method, no error 
> is found, but if I run it with the *QGIS* method, it finds one error 
> (/line 1 contains 2 duplicate nodes starting at vertex 2/). So here are 
> my questions: what exactly is checked when using the GEOS method and 
> what is checked using the QGIS method? Also, do all processing tools 
> (qgis: and native: ones) use the same kind of check?
> 
> I didn't find anywhere the details of what would be considered an error 
> according to the "QGIS spec". Is it documented somewhere or do I need to 
> look for hints inside the source code? As for the GEOS method, I only 
> found some error examples in the PostGIS documentation and in a FME page 
> (https://community.safe.com/s/article/invalid-ogc-geometry-examples 
> <https://community.safe.com/s/article/invalid-ogc-geometry-examples>). 
> Is there an official documentation of what geometries are invalid 
> regarding GEOS?
> 
> Thanks a lot for any pointer
> 
> *Jean-Fran?ois Bourdon, ing.f.*
> 
> *Analyste en t?l?d?tection*
> *Direction des inventaires forestiers*
> *Minist?re des For?ts, de la Faune et des Parcs*
> 5700, 4^e Avenue Ouest, local A-108
> Qu?bec (Qu?bec) G1H 6R1
> T?l?phone : 418 627-8669, poste 704304
> *_jean-francois.bourdon at mffp.gouv.qc.ca_*
> *mffp.gouv.qc.ca* <http://www.mffp.gouv.qc.ca/accueil.jsp>
> 
> 




From tim at kartoza.com  Sat Jun  4 17:22:56 2022
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 5 Jun 2022 01:22:56 +0100
Subject: [QGIS-Developer] Changelog ready for review and contributions
Message-ID: <CAES-DZSeZXakHP+jG4c=LuvCUBm07KnpzKFujRBacmkPcipqog@mail.gmail.com>

Hi All

Thanks to another fantastic effort from Charles Dixon-Paver, the changelog
for QGIS 3.26 is ready for review and contributions. Please head over to

https://changelog.qgis.org/en/qgis/version/3.26/

And share your improvements either directly if you have access, or as
off-list emails to Charles (in CC).

Thanks all,

Regards

Tim

-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220605/79d0af1d/attachment.htm>

From tim at kartoza.com  Sat Jun  4 17:33:17 2022
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 5 Jun 2022 01:33:17 +0100
Subject: [QGIS-Developer] Changelog ready for review and contributions
In-Reply-To: <CAES-DZSeZXakHP+jG4c=LuvCUBm07KnpzKFujRBacmkPcipqog@mail.gmail.com>
References: <CAES-DZSeZXakHP+jG4c=LuvCUBm07KnpzKFujRBacmkPcipqog@mail.gmail.com>
Message-ID: <CAES-DZRmpkt06f11_xJo=jrG66O52fg7EFveGyR11d9j70PJ-A@mail.gmail.com>

Hi All

I forgot to add: Please do not broadcast the changelog site before the
release. During the release preparation, Richard will publish it as static
content on qgis.org, at which point it can then be pushed out to social
media etc.

Regards

Tim

On Sun, Jun 5, 2022 at 1:22 AM Tim Sutton <tim at kartoza.com> wrote:

>
> Hi All
>
> Thanks to another fantastic effort from Charles Dixon-Paver, the changelog
> for QGIS 3.26 is ready for review and contributions. Please head over to
>
> https://changelog.qgis.org/en/qgis/version/3.26/
>
> And share your improvements either directly if you have access, or as
> off-list emails to Charles (in CC).
>
> Thanks all,
>
> Regards
>
> Tim
>
> --
>
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220605/a026222f/attachment.htm>

From pigrecoinfinito at gmail.com  Sun Jun  5 00:02:14 2022
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2_Fiandaca?=)
Date: Sun, 5 Jun 2022 09:02:14 +0200
Subject: [QGIS-Developer] Changelog ready for review and contributions
In-Reply-To: <CAES-DZRmpkt06f11_xJo=jrG66O52fg7EFveGyR11d9j70PJ-A@mail.gmail.com>
References: <CAES-DZSeZXakHP+jG4c=LuvCUBm07KnpzKFujRBacmkPcipqog@mail.gmail.com>
 <CAES-DZRmpkt06f11_xJo=jrG66O52fg7EFveGyR11d9j70PJ-A@mail.gmail.com>
Message-ID: <CADk2tESBbQ6_96sdb-SBJbXU4BKqWKGoQqa+nQbeMzum3_U9ew@mail.gmail.com>

Good morning,
wow, nice work thanks

this morning I will add some screenshots and animated gifs

Greetings

Il giorno dom 5 giu 2022 alle ore 02:33 Tim Sutton via QGIS-Developer <
qgis-developer at lists.osgeo.org> ha scritto:

> Hi All
>
> I forgot to add: Please do not broadcast the changelog site before the
> release. During the release preparation, Richard will publish it as static
> content on qgis.org, at which point it can then be pushed out to social
> media etc.
>
> Regards
>
> Tim
>
> On Sun, Jun 5, 2022 at 1:22 AM Tim Sutton <tim at kartoza.com> wrote:
>
>>
>> Hi All
>>
>> Thanks to another fantastic effort from Charles Dixon-Paver, the
>> changelog for QGIS 3.26 is ready for review and contributions. Please head
>> over to
>>
>> https://changelog.qgis.org/en/qgis/version/3.26/
>>
>> And share your improvements either directly if you have access, or as
>> off-list emails to Charles (in CC).
>>
>> Thanks all,
>>
>> Regards
>>
>> Tim
>>
>> --
>>
>> ------------------------------------------------------------------------------------------
>>
>> Tim Sutton
>> Visit http://kartoza.com to find out about open source:
>>  * Desktop GIS programming services
>>  * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Tim is a member of the QGIS Project Steering Committee
>>
>> -------------------------------------------------------------------------------------------
>>
>
>
> --
>
> ------------------------------------------------------------------------------------------
> ?
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
*Ing. Salvatore Fiandaca*
*mobile*.:+39 327.493.8955
*m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
*C.F*.: FNDSVT71E29Z103G
*P.IVA*: 06597870820
*membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
*socio GFOSS.it - *http://gfoss.it/
*blog:*
* https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
- https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
<https://www.facebook.com/qgis.it/> *
*TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
<https://twitter.com/totofiandaca>*

43?51'0.54"N  10?34'27.62"E - EPSG:4326

?Se la conoscenza deve essere aperta a tutti,
perch? mai limitarne l?accesso??
R. Stallman

Questo documento, allegati inclusi, contiene informazioni di propriet? di
FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega di
informare tempestivamente il mittente e distruggere la copia in proprio
possesso.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220605/a1c2e3e1/attachment-0001.htm>

From andrea.aime at geo-solutions.it  Sun Jun  5 07:54:50 2022
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Sun, 5 Jun 2022 16:54:50 +0200
Subject: [QGIS-Developer] Could anyone share the token setup for the
 backport bot?
Message-ID: <CALHQADXsH-NV-rmh87Ec7JFM8EMUFzx+fEbOJRM5NNNbrHVRgw@mail.gmail.com>

Hi all,
I'm trying to set the backport bot up again in the GeoServer project.
Seeing that you have it running, I copied over the set up, and indeed,
it seems to be working fine for us as well (thanks!).

One difference still outstanding is the github token being used,
I've set up the common "secrets.GITHUB_TOKEN"
<https://github.com/geoserver/geoserver/blob/main/.github/workflows/backport.yml#L18>
but
I see QGIS
is using a customized one
<https://github.com/qgis/QGIS/blob/master/.github/workflows/backport.yml#L18>
.

I'm guessing a personal token associated with the
https://github.com/qgis-bot user,
probably set up in order to customize/restrict the set of actions
that the action can perform...

Could anyone share the configuration of said token (privately I presume)?

Cheers
Andrea
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220605/032c0f2d/attachment.htm>

From nilsnolde at proton.me  Tue Jun  7 08:17:52 2022
From: nilsnolde at proton.me (Nils Nolde)
Date: Tue, 07 Jun 2022 15:17:52 +0000
Subject: [QGIS-Developer] Protobuf mismatch with compiled python package
Message-ID: <7161a85d-030b-39ec-98ce-948aec63786d@proton.me>

Hi all,

bit of an exotic one: I'm trying to use a Python package for a new QGIS Plugin we want to release soon, and which has a C++ extension: https://pypi.org/project/pyvalhalla/. One of the dependencies of that library is protobuf. I've been using it extensively over the past months, but now in QGIS it seems to not like the fact that the python library is compiled with manylinux_2_24 (Debian 9) which has protobuf v3.0.0. This is the error message popping up:

This program was compiled against version 3.0.0 of the Protocol Buffer runtime library, which is not compatible with the installed version (3.20.1). Contact the program author for an update. If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library. (Version verification failed in "/valhalla-py/upstream/build/src/valhalla/proto/api.pb.cc".)

I'm on Arch Linux with Python 3.10, I tried 3.24.3, 3.22.1 and 3.20.1. It's very easy to reproduce: "pip install pyvalhalla" and in QGIS Python console "from valhalla import Actor". Careful though, our QGIS plugin "valhalla" will clash here, it needs to be uninstalled first..

I checked with Blender and its Python console: no problem running pyvalhalla.

Does QGIS somehow patch/override the search paths for dynamic libraries? I figured that's what python's auditwheel does when building packages for PyPI: patching the RPATH of the library to point to the /python-dir/site-packages/pyvalhalla.libs directory. And it breaks my brain that QGIS can override that somehow.. What am I missing?

Many thanks for any tip/advice Nils
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220607/02077a88/attachment.htm>

From nilsnolde at proton.me  Tue Jun  7 08:28:05 2022
From: nilsnolde at proton.me (Nils Nolde)
Date: Tue, 07 Jun 2022 15:28:05 +0000
Subject: [QGIS-Developer] Protobuf mismatch with compiled python package
Message-ID: <4c526af0-a869-a867-a963-8870d759c9ac@proton.me>

Hi all,

bit of an exotic one: I'm trying to use a Python package for a new QGIS Plugin we want to release soon, and which has a C++ extension: https://pypi.org/project/pyvalhalla/. One of the dependencies of that library is protobuf. I've been using it extensively over the past months, but now in QGIS it seems to not like the fact that the python library is compiled with manylinux_2_24 (Debian 9) which has protobuf v3.0.0. This is the error message popping up:

This program was compiled against version 3.0.0 of the Protocol Buffer runtime library, which is not compatible with the installed version (3.20.1). Contact the program author for an update. If you compiled the program yourself, make sure that your headers are from the same version of Protocol Buffers as your link-time library. (Version verification failed in "/valhalla-py/upstream/build/src/valhalla/proto/api.pb.cc".)

I'm on Arch Linux with Python 3.10, I tried QGIS 3.24.3 and 3.22.1. It's very easy to reproduce: "pip install pyvalhalla" and in QGIS Python console "from valhalla import Actor". Careful though, our QGIS plugin "valhalla" will clash here, it needs to be uninstalled first..

I checked with Blender and its Python console: no problem running pyvalhalla.

Does QGIS somehow patch/override the search paths for dynamic libraries? I figured that's what python's auditwheel does when building packages for PyPI: patching the RPATH of the library to point to the /python-dir/site-packages/pyvalhalla.libs directory. And it breaks my brain that QGIS can override that somehow.. Anyone got a clue what I'm missing?

Many thanks for any tip/advice Nils
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220607/fe48a8f5/attachment.htm>

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Tue Jun  7 12:30:12 2022
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Tue, 7 Jun 2022 19:30:12 +0000
Subject: [QGIS-Developer] QGIS vs GEOS validity check
In-Reply-To: <3ba74017-b77e-5251-b464-0aad62cbb85d@gatewaygeomatics.com>
References: <QB1PR01MB2948AE8A89E6027D57A44BD6B3A19@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
 <3ba74017-b77e-5251-b464-0aad62cbb85d@gatewaygeomatics.com>
Message-ID: <QB1PR01MB29488F58AEB6D9CAE8356AE2B3A59@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>

[Intranet logo]

Thanks Jeff, I'll ask on the GEOS mailing list for their validity check. However, what about the QGIS specific validity check? Any hint on what is done differently?


Jean-Fran?ois Bourdon, ing.f.
Analyste en t?l?d?tection
Direction des inventaires forestiers
Minist?re des For?ts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Qu?bec (Qu?bec) G1H 6R1
T?l?phone : 418 627-8669, poste 704304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca

-----Message d'origine-----
De : QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> De la part de Jeff McKenna via QGIS-Developer
Envoy? : 4 juin 2022 06:34
? : qgis-developer at lists.osgeo.org
Objet : Re: [QGIS-Developer] QGIS vs GEOS validity check

Hi JF,

Regarding GEOS, please consider asking for more details through the project's vibrant forum (subscribe at
https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgeos-devel&amp;data=05%7C01%7Cjean-francois.bourdon%40mffp.gouv.qc.ca%7C334dac66b1924017ad1b08da4615caf3%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637899356658306764%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=eOB3FPwleIHG1Fx%2BsmdQxEag8PdLpWVp7MEEwV5KG9E%3D&amp;reserved=0 ), I know there was a big release made yesterday and some chatter (project home:
https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flibgeos.org%2F&amp;data=05%7C01%7Cjean-francois.bourdon%40mffp.gouv.qc.ca%7C334dac66b1924017ad1b08da4615caf3%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637899356658306764%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=sfLgVSdaKdsEHhUaiLgmGi6m0%2BJq6%2FJ2Vev2MtQDXA4%3D&amp;reserved=0 )  GEOS is one of those core libraries, who would greatly appreciate your direct feedback.

PS. hello from the east coast

Thanks,

-jeff



--
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training co-founder of FOSS4G
https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fgatewaygeo.com%2F&amp;data=05%7C01%7Cjean-francois.bourdon%40mffp.gouv.qc.ca%7C334dac66b1924017ad1b08da4615caf3%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637899356658306764%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=brYlwYiuoO%2FGu2Du5XWHus%2BnKwyazc4Nrs661jfhEO0%3D&amp;reserved=0



On 2022-06-03 4:25 p.m., Bourdon, Jean-Fran?ois (DIF) via QGIS-Developer
wrote:
> Intranet logo
>
> Hi Devs,
>
> I had a surprising issue with a specific vector layer and a clip
> operation. Validity check of the geometries seem to be done differently
> if native:clip is used inside a processing script or manually through
> the GUI as a vector layer containing a linestring with duplicate node
> like LINESTRING ((0 0, 1 0, 1 0))  won't cause an issue when the clip is
> done with the GUI but will halt if done inside a processing script (on
> QGIS 3.22.6).
>
> Also, if I run */qgis:checkvalidity/* with the *GEOS* method, no error
> is found, but if I run it with the *QGIS* method, it finds one error
> (/line 1 contains 2 duplicate nodes starting at vertex 2/). So here are
> my questions: what exactly is checked when using the GEOS method and
> what is checked using the QGIS method? Also, do all processing tools
> (qgis: and native: ones) use the same kind of check?
>
> I didn't find anywhere the details of what would be considered an error
> according to the "QGIS spec". Is it documented somewhere or do I need to
> look for hints inside the source code? As for the GEOS method, I only
> found some error examples in the PostGIS documentation and in a FME page
> (https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcommunity.safe.com%2Fs%2Farticle%2Finvalid-ogc-geometry-examples&amp;data=05%7C01%7Cjean-francois.bourdon%40mffp.gouv.qc.ca%7C334dac66b1924017ad1b08da4615caf3%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637899356658306764%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=iAvp2%2FdNUCBjYFdhKug6dNgJSEYn495pZUPbjv9RUdA%3D&amp;reserved=0
> <https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fcommunity.safe.com%2Fs%2Farticle%2Finvalid-ogc-geometry-examples&amp;data=05%7C01%7Cjean-francois.bourdon%40mffp.gouv.qc.ca%7C334dac66b1924017ad1b08da4615caf3%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637899356658306764%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=iAvp2%2FdNUCBjYFdhKug6dNgJSEYn495pZUPbjv9RUdA%3D&amp;reserved=0>).
> Is there an official documentation of what geometries are invalid
> regarding GEOS?
>
> Thanks a lot for any pointer
>
> *Jean-Fran?ois Bourdon, ing.f.*
>
> *Analyste en t?l?d?tection*
> *Direction des inventaires forestiers*
> *Minist?re des For?ts, de la Faune et des Parcs*
> 5700, 4^e Avenue Ouest, local A-108
> Qu?bec (Qu?bec) G1H 6R1
> T?l?phone : 418 627-8669, poste 704304
> *_jean-francois.bourdon at mffp.gouv.qc.ca_*
> *mffp.gouv.qc.ca* <http://www.mffp.gouv.qc.ca/accueil.jsp>
>
>



_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&amp;data=05%7C01%7Cjean-francois.bourdon%40mffp.gouv.qc.ca%7C334dac66b1924017ad1b08da4615caf3%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637899356658306764%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=SDTmZzpfnsTKfTNixdcVHZdDgNcJvG5mBEhZMgdjkig%3D&amp;reserved=0
Unsubscribe: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&amp;data=05%7C01%7Cjean-francois.bourdon%40mffp.gouv.qc.ca%7C334dac66b1924017ad1b08da4615caf3%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637899356658306764%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&amp;sdata=SDTmZzpfnsTKfTNixdcVHZdDgNcJvG5mBEhZMgdjkig%3D&amp;reserved=0

From andrea.aime at geo-solutions.it  Wed Jun  8 00:07:48 2022
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Wed, 8 Jun 2022 09:07:48 +0200
Subject: [QGIS-Developer] Could anyone share the token setup for the
 backport bot?
In-Reply-To: <CALHQADXsH-NV-rmh87Ec7JFM8EMUFzx+fEbOJRM5NNNbrHVRgw@mail.gmail.com>
References: <CALHQADXsH-NV-rmh87Ec7JFM8EMUFzx+fEbOJRM5NNNbrHVRgw@mail.gmail.com>
Message-ID: <CALHQADUAYt-JPQA45KfowNmLY0YR6MNRdKL-ovLb+2RxTP5B1Q@mail.gmail.com>

Think we figured that out, without a personal access token the workflows in
the generated PRs would not be run.

Cheers
Andrea

On Sun, Jun 5, 2022 at 4:54 PM Andrea Aime <andrea.aime at geo-solutions.it>
wrote:

> Hi all,
> I'm trying to set the backport bot up again in the GeoServer project.
> Seeing that you have it running, I copied over the set up, and indeed,
> it seems to be working fine for us as well (thanks!).
>
> One difference still outstanding is the github token being used,
> I've set up the common "secrets.GITHUB_TOKEN"
> <https://github.com/geoserver/geoserver/blob/main/.github/workflows/backport.yml#L18> but
> I see QGIS
> is using a customized one
> <https://github.com/qgis/QGIS/blob/master/.github/workflows/backport.yml#L18>
> .
>
> I'm guessing a personal token associated with the
> https://github.com/qgis-bot user,
> probably set up in order to customize/restrict the set of actions
> that the action can perform...
>
> Could anyone share the configuration of said token (privately I presume)?
>
> Cheers
> Andrea
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220608/926aa435/attachment.htm>

From matthias at opengis.ch  Wed Jun  8 13:04:18 2022
From: matthias at opengis.ch (Matthias Kuhn)
Date: Wed, 8 Jun 2022 22:04:18 +0200
Subject: [QGIS-Developer] Could anyone share the token setup for the
 backport bot?
In-Reply-To: <CALHQADUAYt-JPQA45KfowNmLY0YR6MNRdKL-ovLb+2RxTP5B1Q@mail.gmail.com>
References: <CALHQADXsH-NV-rmh87Ec7JFM8EMUFzx+fEbOJRM5NNNbrHVRgw@mail.gmail.com>
 <CALHQADUAYt-JPQA45KfowNmLY0YR6MNRdKL-ovLb+2RxTP5B1Q@mail.gmail.com>
Message-ID: <CAC7zN94MOFNCCVV5wPrxiUHh4KH8-hEPxSxyrqPt9-4kk-46uA@mail.gmail.com>

Hi Andrea,

I have opened a PR to make this more transparent, if you have a minute to
look over that would be great.
https://github.com/m-kuhn/backport/pull/21

Cheers
Matthias

On Wed, Jun 8, 2022 at 9:08 AM Andrea Aime via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Think we figured that out, without a personal access token the workflows
> in the generated PRs would not be run.
>
> Cheers
> Andrea
>
> On Sun, Jun 5, 2022 at 4:54 PM Andrea Aime <andrea.aime at geo-solutions.it>
> wrote:
>
>> Hi all,
>> I'm trying to set the backport bot up again in the GeoServer project.
>> Seeing that you have it running, I copied over the set up, and indeed,
>> it seems to be working fine for us as well (thanks!).
>>
>> One difference still outstanding is the github token being used,
>> I've set up the common "secrets.GITHUB_TOKEN"
>> <https://github.com/geoserver/geoserver/blob/main/.github/workflows/backport.yml#L18> but
>> I see QGIS
>> is using a customized one
>> <https://github.com/qgis/QGIS/blob/master/.github/workflows/backport.yml#L18>
>> .
>>
>> I'm guessing a personal token associated with the
>> https://github.com/qgis-bot user,
>> probably set up in order to customize/restrict the set of actions
>> that the action can perform...
>>
>> Could anyone share the configuration of said token (privately I presume)?
>>
>> Cheers
>> Andrea
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

-- 
 <https://qfield.org/get/>

QFIELD 2.0 IS HERE! - Hold the power of QGIS in 
your hand - learn more 
<https://www.opengis.ch/2022/04/05/qfield-2-0-is-here/> - get it now 
<https://qfield.org/get>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220608/d0d0c38c/attachment.htm>

From csmartin at shadyproject.net  Thu Jun  9 22:25:32 2022
From: csmartin at shadyproject.net (Christopher S Martin)
Date: Thu, 9 Jun 2022 22:25:32 -0700
Subject: [QGIS-Developer] Requirements for New Contributors
Message-ID: <25A69576-0CE7-47EB-A45D-2DD45B21ADB7@shadyproject.net>

I have read and agree to the Code of Conduct, Coding Standards, and Diversity Statement

From apasotti at gmail.com  Fri Jun 10 09:30:43 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 10 Jun 2022 18:30:43 +0200
Subject: [QGIS-Developer] CDash still not working
Message-ID: <CAL5Q6731NOjKqH3r-Y9GPis3v=06d32net2=jpcOMnvEo+pprg@mail.gmail.com>

Hi,

CDash submission from CI does work but the page shows no tests and no
failures, this makes it very hard to understand why some image_diff
tests are failing.

See: https://tinyurl.com/23g4n4c  from
https://github.com/qgis/QGIS/runs/6820302033?check_suite_focus=true

Does anyone know how to fix that?


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From strk at kbt.io  Fri Jun 10 12:00:31 2022
From: strk at kbt.io (Sandro Santilli)
Date: Fri, 10 Jun 2022 21:00:31 +0200
Subject: [QGIS-Developer] CDash still not working
In-Reply-To: <CAL5Q6731NOjKqH3r-Y9GPis3v=06d32net2=jpcOMnvEo+pprg@mail.gmail.com>
References: <CAL5Q6731NOjKqH3r-Y9GPis3v=06d32net2=jpcOMnvEo+pprg@mail.gmail.com>
Message-ID: <YqOUz7C58KNXpQe/@c19>

On Fri, Jun 10, 2022 at 06:30:43PM +0200, Alessandro Pasotti via QGIS-Developer wrote:
> Hi,
> 
> CDash submission from CI does work but the page shows no tests and no
> failures, this makes it very hard to understand why some image_diff
> tests are failing.

I filed this issue yesterday:
https://github.com/qgis/QGIS/issues/48939

Maybe you want to add your case there too ?

Incidentally: is the produced .html supposed to be left locally, when
running the tests locally ? We now have a .ci/run_tests.sh script that
is supposed to run all the tests in the same docker envionment as the
CI so it would be handy to debug this.

Beside, in order for .ci/run_tests.sh to work in a worktree merging
this pull request would be needed: https://github.com/qgis/QGIS/pull/48752
(your review is welcome, to finalize it)

--strk;

  Libre GIS consultant/developer
  https://strk.kbt.io/services.html

From apasotti at gmail.com  Fri Jun 10 12:11:14 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 10 Jun 2022 21:11:14 +0200
Subject: [QGIS-Developer] CDash still not working
In-Reply-To: <YqOUz7C58KNXpQe/@c19>
References: <CAL5Q6731NOjKqH3r-Y9GPis3v=06d32net2=jpcOMnvEo+pprg@mail.gmail.com>
 <YqOUz7C58KNXpQe/@c19>
Message-ID: <CAL5Q671d=OagufeZP=Oc+dDi8hHSQ-M-tLNw-9Sjrbc0aEo=sA@mail.gmail.com>

On Fri, Jun 10, 2022 at 9:00 PM Sandro Santilli <strk at kbt.io> wrote:
>
> On Fri, Jun 10, 2022 at 06:30:43PM +0200, Alessandro Pasotti via QGIS-Developer wrote:
> > Hi,
> >
> > CDash submission from CI does work but the page shows no tests and no
> > failures, this makes it very hard to understand why some image_diff
> > tests are failing.
>
> I filed this issue yesterday:
> https://github.com/qgis/QGIS/issues/48939

Sorry I missed that, thank you for fixing it.

>
> Maybe you want to add your case there too ?

Done.

>
> Incidentally: is the produced .html supposed to be left locally, when
> running the tests locally ? We now have a .ci/run_tests.sh script that
> is supposed to run all the tests in the same docker envionment as the
> CI so it would be handy to debug this.
>
> Beside, in order for .ci/run_tests.sh to work in a worktree merging
> this pull request would be needed: https://github.com/qgis/QGIS/pull/48752
> (your review is welcome, to finalize it)
>

I'll have a look, thank you.

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From pigrecoinfinito at gmail.com  Sat Jun 11 01:20:52 2022
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2_Fiandaca?=)
Date: Sat, 11 Jun 2022 10:20:52 +0200
Subject: [QGIS-Developer] Changelog ready for review and contributions
In-Reply-To: <CADk2tESBbQ6_96sdb-SBJbXU4BKqWKGoQqa+nQbeMzum3_U9ew@mail.gmail.com>
References: <CAES-DZSeZXakHP+jG4c=LuvCUBm07KnpzKFujRBacmkPcipqog@mail.gmail.com>
 <CAES-DZRmpkt06f11_xJo=jrG66O52fg7EFveGyR11d9j70PJ-A@mail.gmail.com>
 <CADk2tESBbQ6_96sdb-SBJbXU4BKqWKGoQqa+nQbeMzum3_U9ew@mail.gmail.com>
Message-ID: <CADk2tESKZ_yA=gPuwADrupme2Pk0_niq8GzmXdqANEOQ0Lm0WA@mail.gmail.com>

This PR is not present in the changelogs, in my opinion it should be added.

https://github.com/qgis/QGIS/pull/48488

Greetings

Il giorno dom 5 giu 2022 alle ore 09:02 Tot? Fiandaca <
pigrecoinfinito at gmail.com> ha scritto:

> Good morning,
> wow, nice work thanks
>
> this morning I will add some screenshots and animated gifs
>
> Greetings
>
> Il giorno dom 5 giu 2022 alle ore 02:33 Tim Sutton via QGIS-Developer <
> qgis-developer at lists.osgeo.org> ha scritto:
>
>> Hi All
>>
>> I forgot to add: Please do not broadcast the changelog site before the
>> release. During the release preparation, Richard will publish it as static
>> content on qgis.org, at which point it can then be pushed out to social
>> media etc.
>>
>> Regards
>>
>> Tim
>>
>> On Sun, Jun 5, 2022 at 1:22 AM Tim Sutton <tim at kartoza.com> wrote:
>>
>>>
>>> Hi All
>>>
>>> Thanks to another fantastic effort from Charles Dixon-Paver, the
>>> changelog for QGIS 3.26 is ready for review and contributions. Please head
>>> over to
>>>
>>> https://changelog.qgis.org/en/qgis/version/3.26/
>>>
>>> And share your improvements either directly if you have access, or as
>>> off-list emails to Charles (in CC).
>>>
>>> Thanks all,
>>>
>>> Regards
>>>
>>> Tim
>>>
>>> --
>>>
>>> ------------------------------------------------------------------------------------------
>>>
>>> Tim Sutton
>>> Visit http://kartoza.com to find out about open source:
>>>  * Desktop GIS programming services
>>>  * Geospatial web development
>>> * GIS Training
>>> * Consulting Services
>>> Tim is a member of the QGIS Project Steering Committee
>>>
>>> -------------------------------------------------------------------------------------------
>>>
>>
>>
>> --
>>
>> ------------------------------------------------------------------------------------------
>> ?
>>
>> Tim Sutton
>> Visit http://kartoza.com to find out about open source:
>>  * Desktop GIS programming services
>>  * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Tim is a member of the QGIS Project Steering Committee
>>
>> -------------------------------------------------------------------------------------------
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> *Ing. Salvatore Fiandaca*
> *mobile*.:+39 327.493.8955
> *m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
> *C.F*.: FNDSVT71E29Z103G
> *P.IVA*: 06597870820
> *membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
> *socio GFOSS.it - *http://gfoss.it/
> *blog:*
> * https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
> - https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
> <https://www.facebook.com/qgis.it/> *
> *TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
> <https://twitter.com/totofiandaca>*
>
> 43?51'0.54"N  10?34'27.62"E - EPSG:4326
>
> ?Se la conoscenza deve essere aperta a tutti,
> perch? mai limitarne l?accesso??
> R. Stallman
>
> Questo documento, allegati inclusi, contiene informazioni di propriet? di
> FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
> in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
> qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
> di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega
> di informare tempestivamente il mittente e distruggere la copia in proprio
> possesso.
>
>
>

-- 
*Ing. Salvatore Fiandaca*
*mobile*.:+39 327.493.8955
*m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
*C.F*.: FNDSVT71E29Z103G
*P.IVA*: 06597870820
*membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
*socio GFOSS.it - *http://gfoss.it/
*blog:*
* https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
- https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
<https://www.facebook.com/qgis.it/> *
*TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
<https://twitter.com/totofiandaca>*

43?51'0.54"N  10?34'27.62"E - EPSG:4326

?Se la conoscenza deve essere aperta a tutti,
perch? mai limitarne l?accesso??
R. Stallman

Questo documento, allegati inclusi, contiene informazioni di propriet? di
FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega di
informare tempestivamente il mittente e distruggere la copia in proprio
possesso.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220611/05ae6089/attachment-0001.htm>

From david at opengis.ch  Mon Jun 13 13:49:07 2022
From: david at opengis.ch (David Signer)
Date: Mon, 13 Jun 2022 22:49:07 +0200
Subject: [QGIS-Developer] Changelog ready for review and contributions
In-Reply-To: <CADk2tESKZ_yA=gPuwADrupme2Pk0_niq8GzmXdqANEOQ0Lm0WA@mail.gmail.com>
References: <CAES-DZSeZXakHP+jG4c=LuvCUBm07KnpzKFujRBacmkPcipqog@mail.gmail.com>
 <CAES-DZRmpkt06f11_xJo=jrG66O52fg7EFveGyR11d9j70PJ-A@mail.gmail.com>
 <CADk2tESBbQ6_96sdb-SBJbXU4BKqWKGoQqa+nQbeMzum3_U9ew@mail.gmail.com>
 <CADk2tESKZ_yA=gPuwADrupme2Pk0_niq8GzmXdqANEOQ0Lm0WA@mail.gmail.com>
Message-ID: <CAETFtHk24GmoLhKbTQQkxNo55yLnwbLF4puNmvTD1cs1+yQP1g@mail.gmail.com>

Thanks for the reminder. I will add it.

On Sat, Jun 11, 2022, 10:21 Tot? Fiandaca via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> This PR is not present in the changelogs, in my opinion it should be added.
>
> https://github.com/qgis/QGIS/pull/48488
>
> Greetings
>
> Il giorno dom 5 giu 2022 alle ore 09:02 Tot? Fiandaca <
> pigrecoinfinito at gmail.com> ha scritto:
>
>> Good morning,
>> wow, nice work thanks
>>
>> this morning I will add some screenshots and animated gifs
>>
>> Greetings
>>
>> Il giorno dom 5 giu 2022 alle ore 02:33 Tim Sutton via QGIS-Developer <
>> qgis-developer at lists.osgeo.org> ha scritto:
>>
>>> Hi All
>>>
>>> I forgot to add: Please do not broadcast the changelog site before the
>>> release. During the release preparation, Richard will publish it as static
>>> content on qgis.org, at which point it can then be pushed out to social
>>> media etc.
>>>
>>> Regards
>>>
>>> Tim
>>>
>>> On Sun, Jun 5, 2022 at 1:22 AM Tim Sutton <tim at kartoza.com> wrote:
>>>
>>>>
>>>> Hi All
>>>>
>>>> Thanks to another fantastic effort from Charles Dixon-Paver, the
>>>> changelog for QGIS 3.26 is ready for review and contributions. Please head
>>>> over to
>>>>
>>>> https://changelog.qgis.org/en/qgis/version/3.26/
>>>>
>>>> And share your improvements either directly if you have access, or as
>>>> off-list emails to Charles (in CC).
>>>>
>>>> Thanks all,
>>>>
>>>> Regards
>>>>
>>>> Tim
>>>>
>>>> --
>>>>
>>>> ------------------------------------------------------------------------------------------
>>>>
>>>> Tim Sutton
>>>> Visit http://kartoza.com to find out about open source:
>>>>  * Desktop GIS programming services
>>>>  * Geospatial web development
>>>> * GIS Training
>>>> * Consulting Services
>>>> Tim is a member of the QGIS Project Steering Committee
>>>>
>>>> -------------------------------------------------------------------------------------------
>>>>
>>>
>>>
>>> --
>>>
>>> ------------------------------------------------------------------------------------------
>>> ?
>>>
>>> Tim Sutton
>>> Visit http://kartoza.com to find out about open source:
>>>  * Desktop GIS programming services
>>>  * Geospatial web development
>>> * GIS Training
>>> * Consulting Services
>>> Tim is a member of the QGIS Project Steering Committee
>>>
>>> -------------------------------------------------------------------------------------------
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>> --
>> *Ing. Salvatore Fiandaca*
>> *mobile*.:+39 327.493.8955
>> *m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
>> *C.F*.: FNDSVT71E29Z103G
>> *P.IVA*: 06597870820
>> *membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
>> *socio GFOSS.it - *http://gfoss.it/
>> *blog:*
>> * https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB:
>> Co-admin - https://www.facebook.com/qgis.it/
>> <https://www.facebook.com/qgis.it/>**
>> <https://www.facebook.com/qgis.it/> *
>> *TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
>> <https://twitter.com/totofiandaca>*
>>
>> 43?51'0.54"N  10?34'27.62"E - EPSG:4326
>>
>> ?Se la conoscenza deve essere aperta a tutti,
>> perch? mai limitarne l?accesso??
>> R. Stallman
>>
>> Questo documento, allegati inclusi, contiene informazioni di propriet? di
>> FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
>> in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
>> qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
>> di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega
>> di informare tempestivamente il mittente e distruggere la copia in proprio
>> possesso.
>>
>>
>>
>
> --
> *Ing. Salvatore Fiandaca*
> *mobile*.:+39 327.493.8955
> *m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
> *C.F*.: FNDSVT71E29Z103G
> *P.IVA*: 06597870820
> *membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
> *socio GFOSS.it - *http://gfoss.it/
> *blog:*
> * https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
> - https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
> <https://www.facebook.com/qgis.it/> *
> *TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
> <https://twitter.com/totofiandaca>*
>
> 43?51'0.54"N  10?34'27.62"E - EPSG:4326
>
> ?Se la conoscenza deve essere aperta a tutti,
> perch? mai limitarne l?accesso??
> R. Stallman
>
> Questo documento, allegati inclusi, contiene informazioni di propriet? di
> FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
> in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
> qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
> di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega
> di informare tempestivamente il mittente e distruggere la copia in proprio
> possesso.
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

-- 
 <https://qfield.org/get/>

QFIELD 2.0 IS HERE! - Hold the power of QGIS in 
your hand - learn more 
<https://www.opengis.ch/2022/04/05/qfield-2-0-is-here/> - get it now 
<https://qfield.org/get>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220613/db8ce193/attachment.htm>

From bernhardfriemann1826 at gmail.com  Wed Jun 15 10:51:57 2022
From: bernhardfriemann1826 at gmail.com (Bernhard Riemann)
Date: Wed, 15 Jun 2022 20:51:57 +0300
Subject: [QGIS-Developer] Rendering map scale value in QgsRasterDataProvider
Message-ID: <CAAbax98_MmPCwPykoCJTUPPesX4f=Uh1SRgo21jb52FLnisghg@mail.gmail.com>

Hello.
I am trying to implement a custom raster data provider using QGIS 3.16 C++
API. I stuck on one question: how can I get map layer current rendering
scale value (denominator, shown in status bar) while executing readBlock()
to read raster data properly. I expected to find this in
QgsRasterBlockFeedback structure, but it seems that required functionality
is only available in 3.22 or higher (QgsRenderContext structure or
something). I've searched all documentation and didn't find any static
function or instance to get this value.
Can I get any hint?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220615/6064ed93/attachment.htm>

From Dirk.Pispers at STADT-KOELN.DE  Fri Jun 17 05:06:18 2022
From: Dirk.Pispers at STADT-KOELN.DE (Dirk.Pispers at STADT-KOELN.DE)
Date: Fri, 17 Jun 2022 12:06:18 +0000
Subject: [QGIS-Developer] Blocking of SAGA & GRASS batch files by Windows
 AppLocker
Message-ID: <f3bc9b980f6747438868fdda1f3f6283@STADT-KOELN.DE>

Hi list,

refering to the post "Blocking of SAGA & GRASS batch files by MS AppLocker<https://www.mail-archive.com/qgis-developer at lists.osgeo.org/msg51408.html>" in Aug 2020 I would like to reopen the discussion about the SAGA/GRASS/AppLocker problem.
I my organisation AppLocker has recently been activated und the generated batch files from SAGA and GRASS processings are blocked now.
Since switchting to a different file location is not a valid solution as Nyall Dawson postet in 2020, is it possible to submit the command directly in QGIS instead of writing it into a batch file und call this file?

Thank you and kind regards

Dirk


________________________________

Monatlich aktuelle Informationen Ihrer Stadtverwaltung in unserem Newsletter! Newsletter Anmeldung<https://www.stadt-koeln.de/service/onlinedienste/newsletter-anmeldung?para=allgemein>
________________________________

[https://www.stadt-koeln.de/images/footer-ukraine-2022-400px.jpg]<https://www.stadt-koeln.de/artikel/71801/index.html>

[https://www.stadt-koeln.de/images/footer-digitaltag-2022.jpg]<https://www.stadt-koeln.de/koelndigital-2022/>.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220617/39ee5bc4/attachment.htm>

From pergler at gmail.com  Fri Jun 17 08:55:58 2022
From: pergler at gmail.com (pergler at gmail.com)
Date: Fri, 17 Jun 2022 11:55:58 -0400
Subject: [QGIS-Developer] Blocking of SAGA & GRASS batch files by
 Windows AppLocker
Message-ID: <00f401d88262$bcf5c960$36e15c20$@gmail.com>

Dirk - and others:

 

I'm not a core developer, but I have some experience with AppLocker. 

 

I believe your IT staff or perhaps even yourself ought to be able to code an
"Allow" permission exception in AppLocker, based for instance on the
guidance at
https://www.tenforums.com/tutorials/124016-use-applocker-allow-block-script-
files-windows-10-a.html

You will have to allow scripts in directory
%userprofile%\AppData\QGIS\QGIS3\PROFILES\DEFAULT\PROCESSING

Or something like that, I don't have AppLocker active to test it out; it's
wherever the offending batch files get placed.

 

With all respect to innocent users like you caught in the middle, I do feel
that an application, like QGIS, that does processing can very reasonably be
expected to need to write and execute dynamic script files to communicate
with other programs. This is, in fact, arguably exactly why script files
were invented many years ago. Blanket forbidding their execution is a
simplified but overzealous security policy measure, and your IT department
should be willing to work with you to create an exception for your use case.
In fact, the running of scripts in a user-writable directory, whether they
are dynamically generated by trusted software like QGIS, or written manually
by you, is a pretty standard tool in running replicable geospatial analysis
of any sort. So I think the appropriate analog you should use in discussing
with your IT dept is that it would be equally unreasonable to preclude you
from running any new program (executable) files on your computer if you were
a developer who was compiling code!

 

On Fri Jun 17 05:06:18 PDT 2022, Dirk.Pispers at STADT-KOELN.DE wrote via
qgis-developer:

> Hi list,

> refering to the post "Blocking of SAGA & GRASS batch files by MS
AppLocker<https://www.mail-archive.com/qgis-developer at lists.osgeo.org/msg514
08.html>" 

> in Aug 2020 I would like to reopen the discussion about the
SAGA/GRASS/AppLocker problem.

> I my organisation AppLocker has recently been activated und the generated
batch files from SAGA and GRASS processings are blocked now.

> Since switchting to a different file location is not a valid solution as
Nyall Dawson postet in 2020, is it possible to submit the command directly
in QGIS instead of writing it into a batch file und call this file?

 

---

Martin Pergler

 <mailto:mp at pergler.org> mp at pergler.org

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220617/30f637cb/attachment.htm>

From rdmailings at duif.net  Fri Jun 17 21:45:01 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 18 Jun 2022 06:45:01 +0200
Subject: [QGIS-Developer] Changelog, please check
Message-ID: <d5eae9ef-29f8-8366-dfd4-e4199b123b75@duif.net>

Hi People,

I (silently) added the visual changelog 3.26 to the site already, please check:

https://qgis.org/en/site/forusers/visualchangelog326/index.html

for any glitches.

If found, either let me know, or just fix it yourself in the rst at

https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst

so I can push stuff to transifex (for translations) after the packaging is finished (when the banner has also been updated).

Regards,

Richard Duivenvoorde

From tim at kartoza.com  Sat Jun 18 04:32:54 2022
From: tim at kartoza.com (Tim Sutton)
Date: Sat, 18 Jun 2022 12:32:54 +0100
Subject: [QGIS-Developer] [Qgis-community-team] Changelog, please check
In-Reply-To: <d5eae9ef-29f8-8366-dfd4-e4199b123b75@duif.net>
References: <d5eae9ef-29f8-8366-dfd4-e4199b123b75@duif.net>
Message-ID: <CAES-DZS9f5dixeO=YCOXWoZwMWc6_5WAHSzcLvkLRzHL-Q_CAA@mail.gmail.com>

That looks great @Richard Duivenvoorde <rdmailings at duif.net>  thanks so
much!

Regards

Tim

On Sat, Jun 18, 2022 at 5:54 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi People,
>
> I (silently) added the visual changelog 3.26 to the site already, please
> check:
>
> https://qgis.org/en/site/forusers/visualchangelog326/index.html
>
> for any glitches.
>
> If found, either let me know, or just fix it yourself in the rst at
>
>
> https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst
>
> so I can push stuff to transifex (for translations) after the packaging is
> finished (when the banner has also been updated).
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> Qgis-community-team mailing list for organizing community resources such
> as documentation, translation etc..
> Qgis-community-team at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-community-team
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220618/a5cf216d/attachment.htm>

From brunos at mailbox.org  Sun Jun 19 00:03:43 2022
From: brunos at mailbox.org (Bruno Streit)
Date: Sun, 19 Jun 2022 09:03:43 +0200 (CEST)
Subject: [QGIS-Developer] Object Inspector in QGIS 3.22.7: How to make it
 work?
In-Reply-To: <mailman.17.1655578801.12581.qgis-developer@lists.osgeo.org>
References: <mailman.17.1655578801.12581.qgis-developer@lists.osgeo.org>
Message-ID: <463831635.291382.1655622223538@office.mailbox.org>

Hi everybody

I'm trying to get into pyqgis. In the Python Console is an Object Inspector, which would be very helpful for me, but I can't make it to show any information. I activated it in the Properties and there is "Object Inspector" written in it's window. How can I make it show information of an object? Is there a bug with it in QGIS 3.22.7?

Thank You
Bruno


> qgis-developer-request at lists.osgeo.org hat am 18.06.2022 21:00 CEST geschrieben:
> 
>  
> Send QGIS-Developer mailing list submissions to
> 	qgis-developer at lists.osgeo.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> 	https://lists.osgeo.org/mailman/listinfo/qgis-developer
> or, via email, send a message with subject or body 'help' to
> 	qgis-developer-request at lists.osgeo.org
> 
> You can reach the person managing the list at
> 	qgis-developer-owner at lists.osgeo.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of QGIS-Developer digest..."
> 
> 
> Today's Topics:
> 
>    1. Changelog, please check (Richard Duivenvoorde)
>    2. Re: [Qgis-community-team] Changelog, please check (Tim Sutton)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Sat, 18 Jun 2022 06:45:01 +0200
> From: Richard Duivenvoorde <rdmailings at duif.net>
> To: qgis-developer <qgis-developer at lists.osgeo.org>, qgis-community
> 	<Qgis-community-team at lists.osgeo.org>
> Subject: [QGIS-Developer] Changelog, please check
> Message-ID: <d5eae9ef-29f8-8366-dfd4-e4199b123b75 at duif.net>
> Content-Type: text/plain; charset=UTF-8; format=flowed
> 
> Hi People,
> 
> I (silently) added the visual changelog 3.26 to the site already, please check:
> 
> https://qgis.org/en/site/forusers/visualchangelog326/index.html
> 
> for any glitches.
> 
> If found, either let me know, or just fix it yourself in the rst at
> 
> https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst
> 
> so I can push stuff to transifex (for translations) after the packaging is finished (when the banner has also been updated).
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Sat, 18 Jun 2022 12:32:54 +0100
> From: Tim Sutton <tim at kartoza.com>
> To: Richard Duivenvoorde <rdmailings at duif.net>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>,  qgis-community
> 	<Qgis-community-team at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] [Qgis-community-team] Changelog, please
> 	check
> Message-ID:
> 	<CAES-DZS9f5dixeO=YCOXWoZwMWc6_5WAHSzcLvkLRzHL-Q_CAA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
> 
> That looks great @Richard Duivenvoorde <rdmailings at duif.net>  thanks so
> much!
> 
> Regards
> 
> Tim
> 
> On Sat, Jun 18, 2022 at 5:54 AM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
> 
> > Hi People,
> >
> > I (silently) added the visual changelog 3.26 to the site already, please
> > check:
> >
> > https://qgis.org/en/site/forusers/visualchangelog326/index.html
> >
> > for any glitches.
> >
> > If found, either let me know, or just fix it yourself in the rst at
> >
> >
> > https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst
> >
> > so I can push stuff to transifex (for translations) after the packaging is
> > finished (when the banner has also been updated).
> >
> > Regards,
> >
> > Richard Duivenvoorde
> > _______________________________________________
> > Qgis-community-team mailing list for organizing community resources such
> > as documentation, translation etc..
> > Qgis-community-team at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/qgis-community-team
> >
> 
> 
> -- 
> ------------------------------------------------------------------------------------------
> ?
> 
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Tim is a member of the QGIS Project Steering Committee
> -------------------------------------------------------------------------------------------
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220618/a5cf216d/attachment-0001.htm>
> 
> ------------------------------
> 
> Subject: Digest Footer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> ------------------------------
> 
> End of QGIS-Developer Digest, Vol 200, Issue 14
> ***********************************************

From brunos at mailbox.org  Sun Jun 19 07:48:12 2022
From: brunos at mailbox.org (Bruno Streit)
Date: Sun, 19 Jun 2022 16:48:12 +0200 (CEST)
Subject: [QGIS-Developer] Get context (layout name,
 item name) in custom expression
In-Reply-To: <mailman.17.1655578801.12581.qgis-developer@lists.osgeo.org>
References: <mailman.17.1655578801.12581.qgis-developer@lists.osgeo.org>
Message-ID: <625541650.367391.1655650092747@office.mailbox.org>

Hi everybody

I'm not shure, if this is the right place to ask pyqgis-newbee-questions. Should I better ask in the user-request-list? Please excuse me if so.

I'm writing a custom expression in QGIS 3.77.2 to define the position of layer items by datadefined override. The function works fine. But until now I hardcoded the name of my layout, because I'm not able to figure out, how expression context work. How can I access the layout and layout item, in which the expression is used? A hint or example would make me happy! :)

@qgsfunction(args='auto', group='Custom', referenced_columns=[])
def getItemPosition(itemId, border, feature, parent):
    
    myproject=QgsProject.instance()
    mylayout= myproject.layoutManager().layoutByName("name of my layout")
    targetitem=mylayout.itemById(itemId)
    ...

Thank you
Bruno

> qgis-developer-request at lists.osgeo.org hat am 18.06.2022 21:00 CEST geschrieben:
> 
>  
> Send QGIS-Developer mailing list submissions to
> 	qgis-developer at lists.osgeo.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> 	https://lists.osgeo.org/mailman/listinfo/qgis-developer
> or, via email, send a message with subject or body 'help' to
> 	qgis-developer-request at lists.osgeo.org
> 
> You can reach the person managing the list at
> 	qgis-developer-owner at lists.osgeo.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of QGIS-Developer digest..."
> 
> 
> Today's Topics:
> 
>    1. Changelog, please check (Richard Duivenvoorde)
>    2. Re: [Qgis-community-team] Changelog, please check (Tim Sutton)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Sat, 18 Jun 2022 06:45:01 +0200
> From: Richard Duivenvoorde <rdmailings at duif.net>
> To: qgis-developer <qgis-developer at lists.osgeo.org>, qgis-community
> 	<Qgis-community-team at lists.osgeo.org>
> Subject: [QGIS-Developer] Changelog, please check
> Message-ID: <d5eae9ef-29f8-8366-dfd4-e4199b123b75 at duif.net>
> Content-Type: text/plain; charset=UTF-8; format=flowed
> 
> Hi People,
> 
> I (silently) added the visual changelog 3.26 to the site already, please check:
> 
> https://qgis.org/en/site/forusers/visualchangelog326/index.html
> 
> for any glitches.
> 
> If found, either let me know, or just fix it yourself in the rst at
> 
> https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst
> 
> so I can push stuff to transifex (for translations) after the packaging is finished (when the banner has also been updated).
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> 
> ------------------------------
> 
> Message: 2
> Date: Sat, 18 Jun 2022 12:32:54 +0100
> From: Tim Sutton <tim at kartoza.com>
> To: Richard Duivenvoorde <rdmailings at duif.net>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>,  qgis-community
> 	<Qgis-community-team at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] [Qgis-community-team] Changelog, please
> 	check
> Message-ID:
> 	<CAES-DZS9f5dixeO=YCOXWoZwMWc6_5WAHSzcLvkLRzHL-Q_CAA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
> 
> That looks great @Richard Duivenvoorde <rdmailings at duif.net>  thanks so
> much!
> 
> Regards
> 
> Tim
> 
> On Sat, Jun 18, 2022 at 5:54 AM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
> 
> > Hi People,
> >
> > I (silently) added the visual changelog 3.26 to the site already, please
> > check:
> >
> > https://qgis.org/en/site/forusers/visualchangelog326/index.html
> >
> > for any glitches.
> >
> > If found, either let me know, or just fix it yourself in the rst at
> >
> >
> > https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst
> >
> > so I can push stuff to transifex (for translations) after the packaging is
> > finished (when the banner has also been updated).
> >
> > Regards,
> >
> > Richard Duivenvoorde
> > _______________________________________________
> > Qgis-community-team mailing list for organizing community resources such
> > as documentation, translation etc..
> > Qgis-community-team at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/qgis-community-team
> >
> 
> 
> -- 
> ------------------------------------------------------------------------------------------
> ?
> 
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Tim is a member of the QGIS Project Steering Committee
> -------------------------------------------------------------------------------------------
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220618/a5cf216d/attachment-0001.htm>
> 
> ------------------------------
> 
> Subject: Digest Footer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> ------------------------------
> 
> End of QGIS-Developer Digest, Vol 200, Issue 14
> ***********************************************

From johannes.kroeger at wheregroup.com  Mon Jun 20 01:18:20 2022
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Mon, 20 Jun 2022 10:18:20 +0200
Subject: [QGIS-Developer] Object Inspector in QGIS 3.22.7: How to make
 it work?
In-Reply-To: <463831635.291382.1655622223538@office.mailbox.org>
References: <mailman.17.1655578801.12581.qgis-developer@lists.osgeo.org>
 <463831635.291382.1655622223538@office.mailbox.org>
Message-ID: <16cf6d8d-b6b1-32be-0f7a-bfda1af21af8@wheregroup.com>

Hey Bruno,

good question, I never got it to show more than just function names of 
an open (and saved) script, which I could then click for quick 
navigation in the script. I am also very interested if it actually could 
do more than that.

To get to the same point as me you have to have a script open in the 
script editor, save it and open the object inspector. It will reload 
every time you save the script.

Cheers, Hannes

Am 19.06.22 um 09:03 schrieb Bruno Streit via QGIS-Developer:
> Hi everybody
>
> I'm trying to get into pyqgis. In the Python Console is an Object Inspector, which would be very helpful for me, but I can't make it to show any information. I activated it in the Properties and there is "Object Inspector" written in it's window. How can I make it show information of an object? Is there a bug with it in QGIS 3.22.7?
>
> Thank You
> Bruno

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Schon gewusst?
In unserem Blog geben wir Tipps & Tricks zu Open-Source-GIS-Software
und berichten aus unserem Experten-Alltag:
https://wheregroup.com/blog/
---------------------------------------------

WhereGroup GmbH
Grevenweg 89
20537 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0x840A4B843789797F.asc
Type: application/pgp-keys
Size: 2472 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/8eadeef4/attachment.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/8eadeef4/attachment.sig>

From dmarteau at 3liz.com  Mon Jun 20 04:37:23 2022
From: dmarteau at 3liz.com (David Marteau)
Date: Mon, 20 Jun 2022 13:37:23 +0200
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis 3.26
Message-ID: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>

Hi,

I have noticed a huge drop of performance while testing Qgis server with 
Qgis 3.26, from 10x to 30x slower as usual.

Trying to reduce the problem I have found a huge increase of time spend 
reading the project in 3.26 compared to 3.24.

Here some benchmark with very simple project from the test data set. 
Note: the project has been updated with qgis 3.26:

Qgis 3.24:
======

readflags = QgsProject.ReadFlags()readflags |= 
QgsProject.FlagTrustLayerMetadata

prj = QgsProject()

%timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)

> 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)

Qgis 3.26:
======

readflags = QgsProject.ReadFlags() readflags |= 
QgsProject.FlagTrustLayerMetadata

?prj = QgsProject()

%timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)

195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)

There is a factor x10 between Qgis 3.24 et Qgis 3.26 for the exact same 
project.
This has serious impact on requests: landing page catalog request time 
increased from approximatevely 110ms to more than 3.0s with our test 
data set.


David Marteau
www.3liz.com <http://www.3liz.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/d26cb335/attachment.htm>

From nyall.dawson at gmail.com  Mon Jun 20 06:10:43 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 20 Jun 2022 23:10:43 +1000
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
Message-ID: <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>

On Mon, 20 June 2022, 9:37 pm David Marteau via QGIS-Developer, <
qgis-developer at lists.osgeo.org> wrote:

> Hi,
>
> I have noticed a huge drop of performance while testing Qgis server with
> Qgis 3.26, from 10x to 30x slower as usual.
>
> Trying to reduce the problem I have found a huge increase of time spend
> reading the project in 3.26 compared to 3.24.
>
> Here some benchmark with very simple project from the test data set. Note:
> the project has been updated with qgis 3.26:
>
> Qgis 3.24:
> ======
>
> readflags = QgsProject.ReadFlags()
> readflags |= QgsProject.FlagTrustLayerMetadata
>
> prj = QgsProject()
>
> %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>
> > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>
> Qgis 3.26:
> ======
>
> readflags = QgsProject.ReadFlags()readflags |= QgsProject.FlagTrustLayerMetadata
>
>
You should set the other new read optimisation flags here -- see
https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962

Nyall

?prj = QgsProject()
>
> %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>
> 195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>
> There is a factor x10 between Qgis 3.24 et Qgis 3.26 for the exact same
> project.
> This has serious impact on requests: landing page catalog request time
> increased from approximatevely 110ms to more than 3.0s with our test data
> set.
>
> David Marteau
> www.3liz.com
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/6719cd6e/attachment.htm>

From Ethan.Snyder at rve.com  Mon Jun 20 06:42:27 2022
From: Ethan.Snyder at rve.com (Ethan Snyder)
Date: Mon, 20 Jun 2022 13:42:27 +0000
Subject: [QGIS-Developer] [Qgis-community-team] Changelog, please check
In-Reply-To: <CAES-DZS9f5dixeO=YCOXWoZwMWc6_5WAHSzcLvkLRzHL-Q_CAA@mail.gmail.com>
References: <d5eae9ef-29f8-8366-dfd4-e4199b123b75@duif.net>
 <CAES-DZS9f5dixeO=YCOXWoZwMWc6_5WAHSzcLvkLRzHL-Q_CAA@mail.gmail.com>
Message-ID: <BL0PR16MB2578D7CABDF51F59EA79A9819BB09@BL0PR16MB2578.namprd16.prod.outlook.com>

Richard:

            This new feature is missing from the changelog (probably because it didn?t get all the proper tags): https://github.com/qgis/QGIS/pull/48929
            It was primarily authored by me (Ethan Snyder), and polished and merged by Nyall.

            Here?s the original PR which Nyall copied for changes: https://github.com/qgis/QGIS/pull/48314

Thanks,

Ethan Snyder

From: Tim Sutton <tim at kartoza.com>
Sent: Saturday, June 18, 2022 7:33 AM
To: Richard Duivenvoorde <rdmailings at duif.net>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>; qgis-community <Qgis-community-team at lists.osgeo.org>
Subject: Re: [QGIS-Developer] [Qgis-community-team] Changelog, please check

That looks great @Richard Duivenvoorde<mailto:rdmailings at duif.net>  thanks so much!

Regards

Tim

On Sat, Jun 18, 2022 at 5:54 AM Richard Duivenvoorde <rdmailings at duif.net<mailto:rdmailings at duif.net>> wrote:
Hi People,

I (silently) added the visual changelog 3.26 to the site already, please check:

https://qgis.org/en/site/forusers/visualchangelog326/index.html

for any glitches.

If found, either let me know, or just fix it yourself in the rst at

https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst

so I can push stuff to transifex (for translations) after the packaging is finished (when the banner has also been updated).

Regards,

Richard Duivenvoorde
_______________________________________________
Qgis-community-team mailing list for organizing community resources such as documentation, translation etc..
Qgis-community-team at lists.osgeo.org<mailto:Qgis-community-team at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/qgis-community-team


--
------------------------------------------------------------------------------------------
?
[Image removed by sender.]
Tim Sutton
Visit http://kartoza.com<http://kartoza.com/> to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
DISCLAIMER: This message and any documents attached may contain confidential information and are intended only for the individual(s) named. If you are not the intended recipient, or the employee or agent authorized to received for the intended recipient, you should not disseminate, distribute or copy this e-mail and any attached documents. If you have received this e-mail in error, please immediately notify the sender at Remington & Vernick Engineers by replying to this e-mail and delete the original e-mail and any reply e-mail messages from your system. E-mail transmission cannot be guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or contain viruses. The sender therefore does not accept liability for any errors or omissions in the contents of this message, which arise as a result of e-mail transmission. If verification is required please request a hard-copy version. Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/16f8ba3d/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ~WRD0000.jpg
Type: image/jpeg
Size: 823 bytes
Desc: ~WRD0000.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/16f8ba3d/attachment-0001.jpg>

From dmarteau at 3liz.com  Mon Jun 20 06:42:16 2022
From: dmarteau at 3liz.com (David Marteau)
Date: Mon, 20 Jun 2022 15:42:16 +0200
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
Message-ID: <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>

Hi,

 > You should set the other new read optimisation flags here -- see 
https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962

These are already available also in 3.24 and we use the ? 
`TrustLayerMetadata` in the above test. For server,? the other flags are 
not applicable (Getprint requests need print layouts ).

So that mean we are comparing 3.24 to 3.26 with same level of read 
optimisation and that does not change the fact that, for that very same 
level of read optimisation, project's loading is incredibly? slower in 3.26.


Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit?:
>
>
> On Mon, 20 June 2022, 9:37 pm David Marteau via QGIS-Developer, 
> <qgis-developer at lists.osgeo.org> wrote:
>
>     Hi,
>
>     I have noticed a huge drop of performance while testing Qgis
>     server with Qgis 3.26, from 10x to 30x slower as usual.
>
>     Trying to reduce the problem I have found a huge increase of time
>     spend reading the project in 3.26 compared to 3.24.
>
>     Here some benchmark with very simple project from the test data
>     set. Note: the project has been updated with qgis 3.26:
>
>     Qgis 3.24:
>     ======
>
>     readflags = QgsProject.ReadFlags()readflags |=
>     QgsProject.FlagTrustLayerMetadata
>
>     prj = QgsProject()
>
>     %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>
>     > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>
>     Qgis 3.26:
>     ======
>
>     readflags = QgsProject.ReadFlags() readflags |=
>     QgsProject.FlagTrustLayerMetadata
>
>
> You should set the other new read optimisation flags here -- see 
> https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>
> Nyall
>
>     ?prj = QgsProject()
>
>     %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>
>     195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>
>     There is a factor x10 between Qgis 3.24 et Qgis 3.26 for the exact
>     same project.
>     This has serious impact on requests: landing page catalog request
>     time increased from approximatevely 110ms to more than 3.0s with
>     our test data set.
>
>
>     David Marteau
>     www.3liz.com <http://www.3liz.com>
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/0d55267a/attachment.htm>

From nyall.dawson at gmail.com  Mon Jun 20 09:38:33 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 21 Jun 2022 02:38:33 +1000
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
 <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
Message-ID: <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>

On Mon, 20 June 2022, 11:42 pm David Marteau, <dmarteau at 3liz.com> wrote:

> Hi,
> > You should set the other new read optimisation flags here -- see
> https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>
> These are already available also in 3.24 and we use the
> `TrustLayerMetadata` in the above test. For server,  the other flags are
> not applicable (Getprint requests need print layouts ).
>
> So that mean we are comparing 3.24 to 3.26 with same level of read
> optimisation and that does not change the fact that, for that very same
> level of read optimisation, project's loading is incredibly  slower in 3.26.
>

You'll need to set the new flags relating to skipping the 3d views and
project style loading in order to compare properly. Neither of those things
were occurring in 3.24, and both have an associated cost. And neither are
relevant for server.

Nyall

>
>
> Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit :
>
>
>
> On Mon, 20 June 2022, 9:37 pm David Marteau via QGIS-Developer, <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hi,
>>
>> I have noticed a huge drop of performance while testing Qgis server with
>> Qgis 3.26, from 10x to 30x slower as usual.
>>
>> Trying to reduce the problem I have found a huge increase of time spend
>> reading the project in 3.26 compared to 3.24.
>>
>> Here some benchmark with very simple project from the test data set.
>> Note: the project has been updated with qgis 3.26:
>>
>> Qgis 3.24:
>> ======
>>
>> readflags = QgsProject.ReadFlags()
>> readflags |= QgsProject.FlagTrustLayerMetadata
>>
>> prj = QgsProject()
>>
>> %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>
>> > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>
>> Qgis 3.26:
>> ======
>>
>> readflags = QgsProject.ReadFlags()readflags |= QgsProject.FlagTrustLayerMetadata
>>
>>
> You should set the other new read optimisation flags here -- see
> https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>
> Nyall
>
> ?prj = QgsProject()
>>
>> %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>
>> 195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>
>> There is a factor x10 between Qgis 3.24 et Qgis 3.26 for the exact same
>> project.
>> This has serious impact on requests: landing page catalog request time
>> increased from approximatevely 110ms to more than 3.0s with our test data
>> set.
>>
>> David Marteau
>> www.3liz.com
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220621/7bb85c9d/attachment.htm>

From dmarteau at 3liz.com  Mon Jun 20 09:48:58 2022
From: dmarteau at 3liz.com (David Marteau)
Date: Mon, 20 Jun 2022 18:48:58 +0200
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
 <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
 <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>
Message-ID: <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>

I used the following test:

readflags = Qgis.ProjectReadFlags() readflags |= 
Qgis.ProjectReadFlag.TrustLayerMetadata|Qgis.ProjectReadFlag.DontLoad3DViews|Qgis.ProjectReadFlag.DontLoadProjectStyles 
prj = QgsProject()%timeit -n 1 
prj.read(f"{datapath}/france_parts3_26.qgs",readflags)

105 ms ? 18.5 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)

This improve the result? but we are still much higher that the loading 
time of 3.24: 15ms compared to 105ms


Le 20/06/2022 ? 18:38, Nyall Dawson a ?crit?:
>
>
> On Mon, 20 June 2022, 11:42 pm David Marteau, <dmarteau at 3liz.com> wrote:
>
>     Hi,
>
>     > You should set the other new read optimisation flags here -- see
>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>
>     These are already available also in 3.24 and we use the ?
>     `TrustLayerMetadata` in the above test. For server,? the other
>     flags are not applicable (Getprint requests need print layouts ).
>
>     So that mean we are comparing 3.24 to 3.26 with same level of read
>     optimisation and that does not change the fact that, for that very
>     same level of read optimisation, project's loading is incredibly?
>     slower in 3.26.
>
>
> You'll need to set the new flags relating to skipping the 3d views and 
> project style loading in order to compare properly. Neither of those 
> things were occurring in 3.24, and both have an associated cost. And 
> neither are relevant for server.
>
> Nyall
>
>
>
>     Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit?:
>>
>>
>>     On Mon, 20 June 2022, 9:37 pm David Marteau via QGIS-Developer,
>>     <qgis-developer at lists.osgeo.org> wrote:
>>
>>         Hi,
>>
>>         I have noticed a huge drop of performance while testing Qgis
>>         server with Qgis 3.26, from 10x to 30x slower as usual.
>>
>>         Trying to reduce the problem I have found a huge increase of
>>         time spend reading the project in 3.26 compared to 3.24.
>>
>>         Here some benchmark with very simple project from the test
>>         data set. Note: the project has been updated with qgis 3.26:
>>
>>         Qgis 3.24:
>>         ======
>>
>>         readflags = QgsProject.ReadFlags()readflags |=
>>         QgsProject.FlagTrustLayerMetadata
>>
>>         prj = QgsProject()
>>
>>         %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>
>>         > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>
>>         Qgis 3.26:
>>         ======
>>
>>         readflags = QgsProject.ReadFlags() readflags |=
>>         QgsProject.FlagTrustLayerMetadata
>>
>>
>>     You should set the other new read optimisation flags here -- see
>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>
>>     Nyall
>>
>>         ?prj = QgsProject()
>>
>>         %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>
>>         195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>
>>         There is a factor x10 between Qgis 3.24 et Qgis 3.26 for the
>>         exact same project.
>>         This has serious impact on requests: landing page catalog
>>         request time increased from approximatevely 110ms to more
>>         than 3.0s with our test data set.
>>
>>
>>         David Marteau
>>         www.3liz.com <http://www.3liz.com>
>>
>>         _______________________________________________
>>         QGIS-Developer mailing list
>>         QGIS-Developer at lists.osgeo.org
>>         List info:
>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>         Unsubscribe:
>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/109c06ec/attachment-0001.htm>

From nyall.dawson at gmail.com  Mon Jun 20 09:52:28 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 21 Jun 2022 02:52:28 +1000
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
 <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
 <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>
 <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>
Message-ID: <CAB28AsiZProjq0HBURrEd1TVr8c0oJg68YXAkjDuG6cy3Q=Dog@mail.gmail.com>

On Tue, 21 June 2022, 2:48 am David Marteau, <dmarteau at 3liz.com> wrote:

> I used the following test:
>
> readflags = Qgis.ProjectReadFlags()readflags |= Qgis.ProjectReadFlag.TrustLayerMetadata|Qgis.ProjectReadFlag.DontLoad3DViews|Qgis.ProjectReadFlag.DontLoadProjectStyles
> prj = QgsProject()
> %timeit -n 1 prj.read(f"{datapath}/france_parts3_26.qgs",readflags)
>
> 105 ms ? 18.5 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>
> This improve the result  but we are still much higher that the loading
> time of 3.24: 15ms compared to 105ms
>

Thanks for the update! Can you fire up hotspot (or similar) and see where
the time is spent?

Nyall

>
> Le 20/06/2022 ? 18:38, Nyall Dawson a ?crit :
>
>
>
> On Mon, 20 June 2022, 11:42 pm David Marteau, <dmarteau at 3liz.com> wrote:
>
>> Hi,
>> > You should set the other new read optimisation flags here -- see
>> https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>
>> These are already available also in 3.24 and we use the
>> `TrustLayerMetadata` in the above test. For server,  the other flags are
>> not applicable (Getprint requests need print layouts ).
>>
>> So that mean we are comparing 3.24 to 3.26 with same level of read
>> optimisation and that does not change the fact that, for that very same
>> level of read optimisation, project's loading is incredibly  slower in 3.26.
>>
>
> You'll need to set the new flags relating to skipping the 3d views and
> project style loading in order to compare properly. Neither of those things
> were occurring in 3.24, and both have an associated cost. And neither are
> relevant for server.
>
> Nyall
>
>>
>>
>> Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit :
>>
>>
>>
>> On Mon, 20 June 2022, 9:37 pm David Marteau via QGIS-Developer, <
>> qgis-developer at lists.osgeo.org> wrote:
>>
>>> Hi,
>>>
>>> I have noticed a huge drop of performance while testing Qgis server with
>>> Qgis 3.26, from 10x to 30x slower as usual.
>>>
>>> Trying to reduce the problem I have found a huge increase of time spend
>>> reading the project in 3.26 compared to 3.24.
>>>
>>> Here some benchmark with very simple project from the test data set.
>>> Note: the project has been updated with qgis 3.26:
>>>
>>> Qgis 3.24:
>>> ======
>>>
>>> readflags = QgsProject.ReadFlags()
>>> readflags |= QgsProject.FlagTrustLayerMetadata
>>>
>>> prj = QgsProject()
>>>
>>> %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>
>>> > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>
>>> Qgis 3.26:
>>> ======
>>>
>>> readflags = QgsProject.ReadFlags()readflags |= QgsProject.FlagTrustLayerMetadata
>>>
>>>
>> You should set the other new read optimisation flags here -- see
>> https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>
>> Nyall
>>
>> ?prj = QgsProject()
>>>
>>> %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>
>>> 195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>
>>> There is a factor x10 between Qgis 3.24 et Qgis 3.26 for the exact same
>>> project.
>>> This has serious impact on requests: landing page catalog request time
>>> increased from approximatevely 110ms to more than 3.0s with our test data
>>> set.
>>>
>>> David Marteau
>>> www.3liz.com
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220621/92adcfe5/attachment.htm>

From even.rouault at spatialys.com  Mon Jun 20 09:55:37 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 20 Jun 2022 18:55:37 +0200
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
 <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
 <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>
 <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>
Message-ID: <f1ae0fc1-5ad0-34d7-55e0-e084a12bb61d@spatialys.com>

Use sysprof or just run under a debugger and interrupt regularly should 
help you spot in which method(s) most time is spent

Le 20/06/2022 ? 18:48, David Marteau via QGIS-Developer a ?crit?:
>
> I used the following test:
>
> readflags = Qgis.ProjectReadFlags() readflags |= 
> Qgis.ProjectReadFlag.TrustLayerMetadata|Qgis.ProjectReadFlag.DontLoad3DViews|Qgis.ProjectReadFlag.DontLoadProjectStyles 
> prj = QgsProject()%timeit -n 1 
> prj.read(f"{datapath}/france_parts3_26.qgs",readflags)
>
> 105 ms ? 18.5 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>
> This improve the result? but we are still much higher that the loading 
> time of 3.24: 15ms compared to 105ms
>
>
> Le 20/06/2022 ? 18:38, Nyall Dawson a ?crit?:
>>
>>
>> On Mon, 20 June 2022, 11:42 pm David Marteau, <dmarteau at 3liz.com> wrote:
>>
>>     Hi,
>>
>>     > You should set the other new read optimisation flags here --
>>     see
>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>
>>     These are already available also in 3.24 and we use the ?
>>     `TrustLayerMetadata` in the above test. For server,? the other
>>     flags are not applicable (Getprint requests need print layouts ).
>>
>>     So that mean we are comparing 3.24 to 3.26 with same level of
>>     read optimisation and that does not change the fact that, for
>>     that very same level of read optimisation, project's loading is
>>     incredibly? slower in 3.26.
>>
>>
>> You'll need to set the new flags relating to skipping the 3d views 
>> and project style loading in order to compare properly. Neither of 
>> those things were occurring in 3.24, and both have an associated 
>> cost. And neither are relevant for server.
>>
>> Nyall
>>
>>
>>
>>     Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit?:
>>>
>>>
>>>     On Mon, 20 June 2022, 9:37 pm David Marteau via QGIS-Developer,
>>>     <qgis-developer at lists.osgeo.org> wrote:
>>>
>>>         Hi,
>>>
>>>         I have noticed a huge drop of performance while testing Qgis
>>>         server with Qgis 3.26, from 10x to 30x slower as usual.
>>>
>>>         Trying to reduce the problem I have found a huge increase of
>>>         time spend reading the project in 3.26 compared to 3.24.
>>>
>>>         Here some benchmark with very simple project from the test
>>>         data set. Note: the project has been updated with qgis 3.26:
>>>
>>>         Qgis 3.24:
>>>         ======
>>>
>>>         readflags = QgsProject.ReadFlags()readflags |=
>>>         QgsProject.FlagTrustLayerMetadata
>>>
>>>         prj = QgsProject()
>>>
>>>         %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>
>>>         > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>
>>>         Qgis 3.26:
>>>         ======
>>>
>>>         readflags = QgsProject.ReadFlags() readflags |=
>>>         QgsProject.FlagTrustLayerMetadata
>>>
>>>
>>>     You should set the other new read optimisation flags here -- see
>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>
>>>     Nyall
>>>
>>>         ?prj = QgsProject()
>>>
>>>         %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>
>>>         195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>
>>>         There is a factor x10 between Qgis 3.24 et Qgis 3.26 for the
>>>         exact same project.
>>>         This has serious impact on requests: landing page catalog
>>>         request time increased from approximatevely 110ms to more
>>>         than 3.0s with our test data set.
>>>
>>>
>>>         David Marteau
>>>         www.3liz.com <http://www.3liz.com>
>>>
>>>         _______________________________________________
>>>         QGIS-Developer mailing list
>>>         QGIS-Developer at lists.osgeo.org
>>>         List info:
>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>         Unsubscribe:
>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220620/98eb69ad/attachment-0001.htm>

From fredyvaron at outlook.com  Mon Jun 20 21:39:07 2022
From: fredyvaron at outlook.com (Fredy Varon)
Date: Tue, 21 Jun 2022 04:39:07 +0000
Subject: [QGIS-Developer] HOWTO INSTALL QGS ON LINUX WITH PROVIDER TO
 ORACLE SPATIAL
In-Reply-To: <DS0PR10MB62216145404720FA8D781F44D4B39@DS0PR10MB6221.namprd10.prod.outlook.com>
References: <DS0PR10MB62216145404720FA8D781F44D4B39@DS0PR10MB6221.namprd10.prod.outlook.com>
Message-ID: <DS0PR10MB6221D7E9F095F60E0D1702FED4B39@DS0PR10MB6221.namprd10.prod.outlook.com>


Hi,

I need help if someone knows howto install Qgis on Linux Ubuntu 20 to suport conection to Oracle to add layers from Oracle spatial

Thanks

-------------------------------------------------------------------------------------------------
FREDY VARON GARCIA
Ing. Sistemas



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220621/095e1e1d/attachment.htm>

From rdmailings at duif.net  Mon Jun 20 22:42:28 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 21 Jun 2022 07:42:28 +0200
Subject: [QGIS-Developer] HOWTO INSTALL QGS ON LINUX WITH PROVIDER TO
 ORACLE SPATIAL
In-Reply-To: <DS0PR10MB6221D7E9F095F60E0D1702FED4B39@DS0PR10MB6221.namprd10.prod.outlook.com>
References: <DS0PR10MB62216145404720FA8D781F44D4B39@DS0PR10MB6221.namprd10.prod.outlook.com>
 <DS0PR10MB6221D7E9F095F60E0D1702FED4B39@DS0PR10MB6221.namprd10.prod.outlook.com>
Message-ID: <9f18e853-f636-cf30-6196-85bfed0e5849@duif.net>


WHY ARE YOU SCREAMING THIS :-)

It is some time ago, but I did a write up of the process for CentOS some time ago:

https://zuidt.nl/blog/html/2015/10/12/build_qgis_master_with_oracle_provider_yourself_on_centos7.html

You need to adapt it for Ubuntu but it contains (I think) enough pointers if you are already familiar with compiling QGIS for Ubuntu..

HOPE THIS HELPS ;-)

Regards,

Richard Duivenvoorde

PS: why 20? should you not aim for 22? as that is the latest LTR?








On 6/21/22 06:39, Fredy Varon via QGIS-Developer wrote:
> Hi,
> 
> I need help if someone knows howto install Qgis on Linux Ubuntu 20 to suport conection to Oracle to add layers from Oracle spatial
> 
> Thanks
> 
> -------------------------------------------------------------------------------------------------
> 
> */FREDY VARON GARCIA/*
> 
> *Ing. Sistemas *
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From pigrecoinfinito at gmail.com  Tue Jun 21 00:27:04 2022
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2_Fiandaca?=)
Date: Tue, 21 Jun 2022 09:27:04 +0200
Subject: [QGIS-Developer] [Qgis-community-team] Changelog, please check
In-Reply-To: <BL0PR16MB2578D7CABDF51F59EA79A9819BB09@BL0PR16MB2578.namprd16.prod.outlook.com>
References: <d5eae9ef-29f8-8366-dfd4-e4199b123b75@duif.net>
 <CAES-DZS9f5dixeO=YCOXWoZwMWc6_5WAHSzcLvkLRzHL-Q_CAA@mail.gmail.com>
 <BL0PR16MB2578D7CABDF51F59EA79A9819BB09@BL0PR16MB2578.namprd16.prod.outlook.com>
Message-ID: <CADk2tETwE2wPSyNQmAgx=oafHS+SDtLCDcnM8Jx6OH9Acnzb3A@mail.gmail.com>

I added the PR to this link

https://changelog.qgis.org/en/qgis/version/3.26/#scalebar-data-defined-overrides

Il giorno lun 20 giu 2022 alle ore 15:42 Ethan Snyder via QGIS-Developer <
qgis-developer at lists.osgeo.org> ha scritto:

> Richard:
>
>
>
>             This new feature is missing from the changelog (probably
> because it didn?t get all the proper tags):
> https://github.com/qgis/QGIS/pull/48929
>
>             It was primarily authored by me (Ethan Snyder), and polished
> and merged by Nyall.
>
>
>
>             Here?s the original PR which Nyall copied for changes:
> https://github.com/qgis/QGIS/pull/48314
>
>
>
> Thanks,
>
>
>
> Ethan Snyder
>
>
>
> *From:* Tim Sutton <tim at kartoza.com>
> *Sent:* Saturday, June 18, 2022 7:33 AM
> *To:* Richard Duivenvoorde <rdmailings at duif.net>
> *Cc:* qgis-developer <qgis-developer at lists.osgeo.org>; qgis-community <
> Qgis-community-team at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] [Qgis-community-team] Changelog, please
> check
>
>
>
> That looks great @Richard Duivenvoorde <rdmailings at duif.net>  thanks so
> much!
>
>
>
> Regards
>
>
>
> Tim
>
>
>
> On Sat, Jun 18, 2022 at 5:54 AM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
> Hi People,
>
> I (silently) added the visual changelog 3.26 to the site already, please
> check:
>
> https://qgis.org/en/site/forusers/visualchangelog326/index.html
>
> for any glitches.
>
> If found, either let me know, or just fix it yourself in the rst at
>
>
> https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst
>
> so I can push stuff to transifex (for translations) after the packaging is
> finished (when the banner has also been updated).
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> Qgis-community-team mailing list for organizing community resources such
> as documentation, translation etc..
> Qgis-community-team at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-community-team
>
>
>
>
> --
>
>
> ------------------------------------------------------------------------------------------
>
> ?
>
> [image: Image removed by sender.]
>
> Tim Sutton
>
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
>
> * GIS Training
>
> * Consulting Services
>
> Tim is a member of the QGIS Project Steering Committee
>
>
> -------------------------------------------------------------------------------------------
> DISCLAIMER: This message and any documents attached may contain
> confidential information and are intended only for the individual(s) named.
> If you are not the intended recipient, or the employee or agent authorized
> to received for the intended recipient, you should not disseminate,
> distribute or copy this e-mail and any attached documents. If you have
> received this e-mail in error, please immediately notify the sender at
> Remington & Vernick Engineers by replying to this e-mail and delete the
> original e-mail and any reply e-mail messages from your system. E-mail
> transmission cannot be guaranteed to be secure or error-free as information
> could be intercepted, corrupted, lost, destroyed, arrive late or
> incomplete, or contain viruses. The sender therefore does not accept
> liability for any errors or omissions in the contents of this message,
> which arise as a result of e-mail transmission. If verification is required
> please request a hard-copy version. Thank you.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
*Ing. Salvatore Fiandaca*
*mobile*.:+39 327.493.8955
*m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
*C.F*.: FNDSVT71E29Z103G
*P.IVA*: 06597870820
*membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
*socio GFOSS.it - *http://gfoss.it/
*blog:*
* https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
- https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
<https://www.facebook.com/qgis.it/> *
*TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
<https://twitter.com/totofiandaca>*

43?51'0.54"N  10?34'27.62"E - EPSG:4326

?Se la conoscenza deve essere aperta a tutti,
perch? mai limitarne l?accesso??
R. Stallman

Questo documento, allegati inclusi, contiene informazioni di propriet? di
FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega di
informare tempestivamente il mittente e distruggere la copia in proprio
possesso.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220621/0f081f55/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ~WRD0000.jpg
Type: image/jpeg
Size: 823 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220621/0f081f55/attachment-0001.jpg>

From rdmailings at duif.net  Tue Jun 21 02:21:35 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 21 Jun 2022 11:21:35 +0200
Subject: [QGIS-Developer] [Qgis-community-team] Changelog, please check
In-Reply-To: <CADk2tETwE2wPSyNQmAgx=oafHS+SDtLCDcnM8Jx6OH9Acnzb3A@mail.gmail.com>
References: <d5eae9ef-29f8-8366-dfd4-e4199b123b75@duif.net>
 <CAES-DZS9f5dixeO=YCOXWoZwMWc6_5WAHSzcLvkLRzHL-Q_CAA@mail.gmail.com>
 <BL0PR16MB2578D7CABDF51F59EA79A9819BB09@BL0PR16MB2578.namprd16.prod.outlook.com>
 <CADk2tETwE2wPSyNQmAgx=oafHS+SDtLCDcnM8Jx6OH9Acnzb3A@mail.gmail.com>
Message-ID: <1bad116a-f23a-390e-9ce1-d320356e1eae@duif.net>

Thanks, but the dump of changelog.qgis.org is already pulled into the website (and manually edited etc)..

Only way to get it into qgis.org site is to add a block manually in the rst and add the image and link to

https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst

I Just did:
https://github.com/qgis/QGIS-Website/commit/c9d2105d3ea1f838a1b4df8dbe520af7881ae37f

So should pop up in qgis.org next build (tonight)

Dev's please keep an eye on changelog.qgis.org during release time, Thanks.

Regards,

Richard


On 6/21/22 09:27, Tot? Fiandaca wrote:
> I added the PR to this link
> 
> https://changelog.qgis.org/en/qgis/version/3.26/#scalebar-data-defined-overrides <https://changelog.qgis.org/en/qgis/version/3.26/#scalebar-data-defined-overrides>
> 
> Il giorno lun 20 giu 2022 alle ore 15:42 Ethan Snyder via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>> ha scritto:
> 
>     Richard:____
> 
>     __ __
> 
>      ??????????? This new feature is missing from the changelog (probably because it didn?t get all the proper tags): https://github.com/qgis/QGIS/pull/48929 <https://github.com/qgis/QGIS/pull/48929>____
> 
>      ??????????? It was primarily authored by me (Ethan Snyder), and polished and merged by Nyall.____
> 
>     __ __
> 
>      ??????????? Here?s the original PR which Nyall copied for changes: https://github.com/qgis/QGIS/pull/48314 <https://github.com/qgis/QGIS/pull/48314>____
> 
>     __ __
> 
>     Thanks,____
> 
>     __ __
> 
>     Ethan Snyder____
> 
>     __ __
> 
>     *From:* Tim Sutton <tim at kartoza.com <mailto:tim at kartoza.com>>
>     *Sent:* Saturday, June 18, 2022 7:33 AM
>     *To:* Richard Duivenvoorde <rdmailings at duif.net <mailto:rdmailings at duif.net>>
>     *Cc:* qgis-developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>>; qgis-community <Qgis-community-team at lists.osgeo.org <mailto:Qgis-community-team at lists.osgeo.org>>
>     *Subject:* Re: [QGIS-Developer] [Qgis-community-team] Changelog, please check____
> 
>     __ __
> 
>     That looks great @Richard Duivenvoorde <mailto:rdmailings at duif.net>? thanks so much!____
> 
>     __ __
> 
>     Regards____
> 
>     __ __
> 
>     Tim____
> 
>     __ __
> 
>     On Sat, Jun 18, 2022 at 5:54 AM Richard Duivenvoorde <rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:____
> 
>         Hi People,
> 
>         I (silently) added the visual changelog 3.26 to the site already, please check:
> 
>         https://qgis.org/en/site/forusers/visualchangelog326/index.html <https://qgis.org/en/site/forusers/visualchangelog326/index.html>
> 
>         for any glitches.
> 
>         If found, either let me know, or just fix it yourself in the rst at
> 
>         https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst <https://github.com/qgis/QGIS-Website/edit/master/source/site/forusers/visualchangelog326/index.rst>
> 
>         so I can push stuff to transifex (for translations) after the packaging is finished (when the banner has also been updated).
> 
>         Regards,
> 
>         Richard Duivenvoorde
>         _______________________________________________
>         Qgis-community-team mailing list for organizing community resources such as documentation, translation etc..
>         Qgis-community-team at lists.osgeo.org <mailto:Qgis-community-team at lists.osgeo.org>
>         https://lists.osgeo.org/mailman/listinfo/qgis-community-team <https://lists.osgeo.org/mailman/listinfo/qgis-community-team>____
> 
> 
>     ____
> 
>     __ __
> 
>     -- ____
> 
>     ------------------------------------------------------------------------------------------____
> 
>     ?____
> 
>     Image removed by sender.____
> 
>     Tim Sutton____
> 
>     Visit http://kartoza.com <http://kartoza.com/>?to find out about open source:
>      ?* Desktop GIS programming services
>      ?* Geospatial web development____
> 
>     * GIS Training____
> 
>     * Consulting Services____
> 
>     Tim is a member of the QGIS Project Steering Committee____
> 
>     -------------------------------------------------------------------------------------------____
> 
>     DISCLAIMER: This message and any documents attached may contain confidential information and are intended only for the individual(s) named. If you are not the intended recipient, or the employee or agent authorized to received for the intended recipient, you should not disseminate, distribute or copy this e-mail and any attached documents. If you have received this e-mail in error, please immediately notify the sender at Remington & Vernick Engineers by replying to this e-mail and delete the original e-mail and any reply e-mail messages from your system. E-mail transmission cannot be guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or contain viruses. The sender therefore does not accept liability for any errors or omissions in the contents of this message, which arise as a result of e-mail transmission. If verification is required please request a hard-copy version. Thank you.
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 
> 
> 
> -- 
> *Ing. Salvatore Fiandaca*
> *mobile*.:+39 327.493.8955
> *m*: *pigrecoinfinito at gmail.com <mailto:pigrecoinfinito at gmail.com>*
> *C.F*.: FNDSVT71E29Z103G
> *P.IVA*: 06597870820
> *membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
> *socio GFOSS.it - *http://gfoss.it/ <http://gfoss.it/>
> *blog:**?https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/>
> FB: Co-admin - https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**<https://www.facebook.com/qgis.it/> *
> *TW:<http://goog_95411464>**https://twitter.com/totofiandaca <https://twitter.com/totofiandaca>*
> 
> 43?51'0.54"N??10?34'27.62"E - EPSG:4326
> 
> ?Se la conoscenza deve essere aperta a tutti,
> perch? mai limitarne l?accesso??
> R. Stallman
> 
> Questo documento, allegati inclusi, contiene informazioni di propriet? di FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario in relazione alle finalit? per le quali ? stato ricevuto. E' vietata qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso di FIANDACA SALVATORE.?Qualora fosse stato ricevuto per errore si prega di informare tempestivamente il mittente e distruggere la copia in proprio possesso.
> 
> 


From dmarteau at 3liz.com  Tue Jun 21 03:27:38 2022
From: dmarteau at 3liz.com (David Marteau)
Date: Tue, 21 Jun 2022 12:27:38 +0200
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <f1ae0fc1-5ad0-34d7-55e0-e084a12bb61d@spatialys.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
 <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
 <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>
 <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>
 <f1ae0fc1-5ad0-34d7-55e0-e084a12bb61d@spatialys.com>
Message-ID: <6d227afe-7b69-f3b0-db2f-76af51d85dbc@3liz.com>


May be I could use QgsRuntimeProfiler output in first place ?

Le 20/06/2022 ? 18:55, Even Rouault a ?crit?:
>
> Use sysprof or just run under a debugger and interrupt regularly 
> should help you spot in which method(s) most time is spent
>
> Le 20/06/2022 ? 18:48, David Marteau via QGIS-Developer a ?crit?:
>>
>> I used the following test:
>>
>> readflags = Qgis.ProjectReadFlags() readflags |= 
>> Qgis.ProjectReadFlag.TrustLayerMetadata|Qgis.ProjectReadFlag.DontLoad3DViews|Qgis.ProjectReadFlag.DontLoadProjectStyles 
>> prj = QgsProject()%timeit -n 1 
>> prj.read(f"{datapath}/france_parts3_26.qgs",readflags)
>>
>> 105 ms ? 18.5 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>
>> This improve the result? but we are still much higher that the 
>> loading time of 3.24: 15ms compared to 105ms
>>
>>
>> Le 20/06/2022 ? 18:38, Nyall Dawson a ?crit?:
>>>
>>>
>>> On Mon, 20 June 2022, 11:42 pm David Marteau, <dmarteau at 3liz.com> wrote:
>>>
>>>     Hi,
>>>
>>>     > You should set the other new read optimisation flags here --
>>>     see
>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>
>>>     These are already available also in 3.24 and we use the ?
>>>     `TrustLayerMetadata` in the above test. For server,? the other
>>>     flags are not applicable (Getprint requests need print layouts ).
>>>
>>>     So that mean we are comparing 3.24 to 3.26 with same level of
>>>     read optimisation and that does not change the fact that, for
>>>     that very same level of read optimisation, project's loading is
>>>     incredibly? slower in 3.26.
>>>
>>>
>>> You'll need to set the new flags relating to skipping the 3d views 
>>> and project style loading in order to compare properly. Neither of 
>>> those things were occurring in 3.24, and both have an associated 
>>> cost. And neither are relevant for server.
>>>
>>> Nyall
>>>
>>>
>>>
>>>     Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit?:
>>>>
>>>>
>>>>     On Mon, 20 June 2022, 9:37 pm David Marteau via QGIS-Developer,
>>>>     <qgis-developer at lists.osgeo.org> wrote:
>>>>
>>>>         Hi,
>>>>
>>>>         I have noticed a huge drop of performance while testing
>>>>         Qgis server with Qgis 3.26, from 10x to 30x slower as usual.
>>>>
>>>>         Trying to reduce the problem I have found a huge increase
>>>>         of time spend reading the project in 3.26 compared to 3.24.
>>>>
>>>>         Here some benchmark with very simple project from the test
>>>>         data set. Note: the project has been updated with qgis 3.26:
>>>>
>>>>         Qgis 3.24:
>>>>         ======
>>>>
>>>>         readflags = QgsProject.ReadFlags()readflags |=
>>>>         QgsProject.FlagTrustLayerMetadata
>>>>
>>>>         prj = QgsProject()
>>>>
>>>>         %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>>
>>>>         > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>
>>>>         Qgis 3.26:
>>>>         ======
>>>>
>>>>         readflags = QgsProject.ReadFlags() readflags |=
>>>>         QgsProject.FlagTrustLayerMetadata
>>>>
>>>>
>>>>     You should set the other new read optimisation flags here --
>>>>     see
>>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>>
>>>>     Nyall
>>>>
>>>>         ?prj = QgsProject()
>>>>
>>>>         %timeit -n 1 prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>>
>>>>         195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>
>>>>         There is a factor x10 between Qgis 3.24 et Qgis 3.26 for
>>>>         the exact same project.
>>>>         This has serious impact on requests: landing page catalog
>>>>         request time increased from approximatevely 110ms to more
>>>>         than 3.0s with our test data set.
>>>>
>>>>
>>>>         David Marteau
>>>>         www.3liz.com <http://www.3liz.com>
>>>>
>>>>         _______________________________________________
>>>>         QGIS-Developer mailing list
>>>>         QGIS-Developer at lists.osgeo.org
>>>>         List info:
>>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>         Unsubscribe:
>>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220621/f5431320/attachment-0001.htm>

From dmarteau at 3liz.com  Tue Jun 21 05:45:58 2022
From: dmarteau at 3liz.com (David Marteau)
Date: Tue, 21 Jun 2022 14:45:58 +0200
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <6d227afe-7b69-f3b0-db2f-76af51d85dbc@3liz.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
 <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
 <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>
 <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>
 <f1ae0fc1-5ad0-34d7-55e0-e084a12bb61d@spatialys.com>
 <6d227afe-7b69-f3b0-db2f-76af51d85dbc@3liz.com>
Message-ID: <a4d03745-846a-1364-e7aa-ef16c08ebd6e@3liz.com>

Hi,

Here is a first analysis using QgsRuntimeProfiler outputs

The project is the same in all tests and has been saved with Qgis 3.26.
This is a first load in each case just after qgis init, so there should 
be no caching involved.

Output has been filtered to `projectload` profiler group and rows with 
elapsed time > 0

All builds are official builds and installed from qgis.org packages.
Tests are run in Docker container with ubuntu 21.04

Total time show a variance of +/- 25% on multiple runs.

## Qgis 3.26

### Flags
* Qgis.ProjectReadFlag.TrustLayerMetadata
* Qgis.ProjectReadFlag.DontLoad3DViews
* Qgis.ProjectReadFlag.DontLoadProjectStyles

projectload, Reading project file: 21.0 ms
projectload, Creating auxiliary storage: 65.0 ms
projectload, Reading properties: 19.0 ms
projectload, Reading map layers: 14.0 ms
-projectload, france_parts: 6.0 ms
--projectload, Load layer source: 5.0 ms
---projectload, Create ogr provider: 3.0 ms
-projectload, france_parts bordure: 4.0 ms
--projectload, Load layer source: 4.0 ms
---projectload, Create ogr provider: 2.0 ms
-projectload, france_parts tuil? en cache: 3.0 ms
--projectload, Load layer source: 3.0 ms
---projectload, Create ogr provider: 1.0 ms
projectload, Storing original layer properties: 2.0 ms

Total time: 152.0 ms

## Qgis 3.24

### Flags
* QgsProject.FlagTrustLayerMetadata

projectload, Reading project file: 5.0 ms
projectload, Reading properties: 4.0 ms
projectload, Reading map layers: 4.0 ms
-projectload, france_parts: 1.0 ms
--projectload, Load layer source: 1.0 ms
-projectload, france_parts bordure: 1.0 ms
--projectload, Load layer source: 1.0 ms
-projectload, france_parts tuil? en cache: 1.0 ms
--projectload, Load layer source: 1.0 ms
projectload, Storing original layer properties: 1.0 ms
projectload, Updating interface: 1.0 ms

Total time: 21.0 ms

Some remarks:

I Wonder why we have `Creating auxiliary storage` that takes 65.0 ms in 
Qgis 3.26 and it does not appears in Qgis 3.24:
I need to figure how auxiliary layers are loaded in Qgis 3.24 (are they 
loaded lazily ?).

The `Reading project file`, `Reading properties` and `Reading map 
layers` sections are almost 3 to 4 times slower in Qgis 3.26.

The loading of layers ares also slower in Qgis 3.26 compared to Qgis 3.24.


Le 21/06/2022 ? 12:27, David Marteau a ?crit?:
>
>
> May be I could use QgsRuntimeProfiler output in first place ?
>
> Le 20/06/2022 ? 18:55, Even Rouault a ?crit?:
>>
>> Use sysprof or just run under a debugger and interrupt regularly 
>> should help you spot in which method(s) most time is spent
>>
>> Le 20/06/2022 ? 18:48, David Marteau via QGIS-Developer a ?crit?:
>>>
>>> I used the following test:
>>>
>>> readflags = Qgis.ProjectReadFlags() readflags |= 
>>> Qgis.ProjectReadFlag.TrustLayerMetadata|Qgis.ProjectReadFlag.DontLoad3DViews|Qgis.ProjectReadFlag.DontLoadProjectStyles 
>>> prj = QgsProject()%timeit -n 1 
>>> prj.read(f"{datapath}/france_parts3_26.qgs",readflags)
>>>
>>> 105 ms ? 18.5 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>
>>> This improve the result? but we are still much higher that the 
>>> loading time of 3.24: 15ms compared to 105ms
>>>
>>>
>>> Le 20/06/2022 ? 18:38, Nyall Dawson a ?crit?:
>>>>
>>>>
>>>> On Mon, 20 June 2022, 11:42 pm David Marteau, <dmarteau at 3liz.com> 
>>>> wrote:
>>>>
>>>>     Hi,
>>>>
>>>>     > You should set the other new read optimisation flags here --
>>>>     see
>>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>>
>>>>     These are already available also in 3.24 and we use the ?
>>>>     `TrustLayerMetadata` in the above test. For server,? the other
>>>>     flags are not applicable (Getprint requests need print layouts ).
>>>>
>>>>     So that mean we are comparing 3.24 to 3.26 with same level of
>>>>     read optimisation and that does not change the fact that, for
>>>>     that very same level of read optimisation, project's loading is
>>>>     incredibly? slower in 3.26.
>>>>
>>>>
>>>> You'll need to set the new flags relating to skipping the 3d views 
>>>> and project style loading in order to compare properly. Neither of 
>>>> those things were occurring in 3.24, and both have an associated 
>>>> cost. And neither are relevant for server.
>>>>
>>>> Nyall
>>>>
>>>>
>>>>
>>>>     Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit?:
>>>>>
>>>>>
>>>>>     On Mon, 20 June 2022, 9:37 pm David Marteau via
>>>>>     QGIS-Developer, <qgis-developer at lists.osgeo.org> wrote:
>>>>>
>>>>>         Hi,
>>>>>
>>>>>         I have noticed a huge drop of performance while testing
>>>>>         Qgis server with Qgis 3.26, from 10x to 30x slower as usual.
>>>>>
>>>>>         Trying to reduce the problem I have found a huge increase
>>>>>         of time spend reading the project in 3.26 compared to 3.24.
>>>>>
>>>>>         Here some benchmark with very simple project from the test
>>>>>         data set. Note: the project has been updated with qgis 3.26:
>>>>>
>>>>>         Qgis 3.24:
>>>>>         ======
>>>>>
>>>>>         readflags = QgsProject.ReadFlags()readflags |=
>>>>>         QgsProject.FlagTrustLayerMetadata
>>>>>
>>>>>         prj = QgsProject()
>>>>>
>>>>>         %timeit -n 1
>>>>>         prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>>>
>>>>>         > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>>
>>>>>         Qgis 3.26:
>>>>>         ======
>>>>>
>>>>>         readflags = QgsProject.ReadFlags() readflags |=
>>>>>         QgsProject.FlagTrustLayerMetadata
>>>>>
>>>>>
>>>>>     You should set the other new read optimisation flags here --
>>>>>     see
>>>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>>>
>>>>>     Nyall
>>>>>
>>>>>         ?prj = QgsProject()
>>>>>
>>>>>         %timeit -n 1
>>>>>         prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>>>
>>>>>         195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>>
>>>>>         There is a factor x10 between Qgis 3.24 et Qgis 3.26 for
>>>>>         the exact same project.
>>>>>         This has serious impact on requests: landing page catalog
>>>>>         request time increased from approximatevely 110ms to more
>>>>>         than 3.0s with our test data set.
>>>>>
>>>>>
>>>>>         David Marteau
>>>>>         www.3liz.com <http://www.3liz.com>
>>>>>
>>>>>         _______________________________________________
>>>>>         QGIS-Developer mailing list
>>>>>         QGIS-Developer at lists.osgeo.org
>>>>>         List info:
>>>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>         Unsubscribe:
>>>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220621/f1b9f3fe/attachment.htm>

From dmarteau at 3liz.com  Tue Jun 21 07:14:14 2022
From: dmarteau at 3liz.com (David Marteau)
Date: Tue, 21 Jun 2022 16:14:14 +0200
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <a4d03745-846a-1364-e7aa-ef16c08ebd6e@3liz.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
 <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
 <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>
 <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>
 <f1ae0fc1-5ad0-34d7-55e0-e084a12bb61d@spatialys.com>
 <6d227afe-7b69-f3b0-db2f-76af51d85dbc@3liz.com>
 <a4d03745-846a-1364-e7aa-ef16c08ebd6e@3liz.com>
Message-ID: <ce068796-674a-51bb-896c-11873f6340f4@3liz.com>

I Wonder why we have `Creating auxiliary storage` that takes 65.0 ms in 
Qgis 3.26 and it does not appears in Qgis 3.24:
I need to figure how auxiliary layers are loaded in Qgis 3.24 (are they 
loaded lazily ?).

I happends that loading auxiliary layer is negligible in 3.24 :

 >> projectload, Creating auxiliary storage: 0.0 ms

I do not understand the difference because it appears that it looks like 
the same code in 3.24 and 3.26.

Does compile/optimize options could have changed between release 3.24 
and 3.26 ?


Le 21/06/2022 ? 14:45, David Marteau a ?crit?:
>
> Hi,
>
> Here is a first analysis using QgsRuntimeProfiler outputs
>
> The project is the same in all tests and has been saved with Qgis 3.26.
> This is a first load in each case just after qgis init, so there 
> should be no caching involved.
>
> Output has been filtered to `projectload` profiler group and rows with 
> elapsed time > 0
>
> All builds are official builds and installed from qgis.org packages.
> Tests are run in Docker container with ubuntu 21.04
>
> Total time show a variance of +/- 25% on multiple runs.
>
> ## Qgis 3.26
>
> ### Flags
> * Qgis.ProjectReadFlag.TrustLayerMetadata
> * Qgis.ProjectReadFlag.DontLoad3DViews
> * Qgis.ProjectReadFlag.DontLoadProjectStyles
>
> projectload, Reading project file: 21.0 ms
> projectload, Creating auxiliary storage: 65.0 ms
> projectload, Reading properties: 19.0 ms
> projectload, Reading map layers: 14.0 ms
> -projectload, france_parts: 6.0 ms
> --projectload, Load layer source: 5.0 ms
> ---projectload, Create ogr provider: 3.0 ms
> -projectload, france_parts bordure: 4.0 ms
> --projectload, Load layer source: 4.0 ms
> ---projectload, Create ogr provider: 2.0 ms
> -projectload, france_parts tuil? en cache: 3.0 ms
> --projectload, Load layer source: 3.0 ms
> ---projectload, Create ogr provider: 1.0 ms
> projectload, Storing original layer properties: 2.0 ms
>
> Total time: 152.0 ms
>
> ## Qgis 3.24
>
> ### Flags
> * QgsProject.FlagTrustLayerMetadata
>
> projectload, Reading project file: 5.0 ms
> projectload, Reading properties: 4.0 ms
> projectload, Reading map layers: 4.0 ms
> -projectload, france_parts: 1.0 ms
> --projectload, Load layer source: 1.0 ms
> -projectload, france_parts bordure: 1.0 ms
> --projectload, Load layer source: 1.0 ms
> -projectload, france_parts tuil? en cache: 1.0 ms
> --projectload, Load layer source: 1.0 ms
> projectload, Storing original layer properties: 1.0 ms
> projectload, Updating interface: 1.0 ms
>
> Total time: 21.0 ms
>
> Some remarks:
>
> I Wonder why we have `Creating auxiliary storage` that takes 65.0 ms 
> in Qgis 3.26 and it does not appears in Qgis 3.24:
> I need to figure how auxiliary layers are loaded in Qgis 3.24 (are 
> they loaded lazily ?).
>
> The `Reading project file`, `Reading properties` and `Reading map 
> layers` sections are almost 3 to 4 times slower in Qgis 3.26.
>
> The loading of layers ares also slower in Qgis 3.26 compared to Qgis 3.24.
>
>
> Le 21/06/2022 ? 12:27, David Marteau a ?crit?:
>>
>>
>> May be I could use QgsRuntimeProfiler output in first place ?
>>
>> Le 20/06/2022 ? 18:55, Even Rouault a ?crit?:
>>>
>>> Use sysprof or just run under a debugger and interrupt regularly 
>>> should help you spot in which method(s) most time is spent
>>>
>>> Le 20/06/2022 ? 18:48, David Marteau via QGIS-Developer a ?crit?:
>>>>
>>>> I used the following test:
>>>>
>>>> readflags = Qgis.ProjectReadFlags() readflags |= 
>>>> Qgis.ProjectReadFlag.TrustLayerMetadata|Qgis.ProjectReadFlag.DontLoad3DViews|Qgis.ProjectReadFlag.DontLoadProjectStyles 
>>>> prj = QgsProject()%timeit -n 1 
>>>> prj.read(f"{datapath}/france_parts3_26.qgs",readflags)
>>>>
>>>> 105 ms ? 18.5 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>
>>>> This improve the result? but we are still much higher that the 
>>>> loading time of 3.24: 15ms compared to 105ms
>>>>
>>>>
>>>> Le 20/06/2022 ? 18:38, Nyall Dawson a ?crit?:
>>>>>
>>>>>
>>>>> On Mon, 20 June 2022, 11:42 pm David Marteau, <dmarteau at 3liz.com> 
>>>>> wrote:
>>>>>
>>>>>     Hi,
>>>>>
>>>>>     > You should set the other new read optimisation flags here --
>>>>>     see
>>>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>>>
>>>>>     These are already available also in 3.24 and we use the ?
>>>>>     `TrustLayerMetadata` in the above test. For server,? the other
>>>>>     flags are not applicable (Getprint requests need print layouts ).
>>>>>
>>>>>     So that mean we are comparing 3.24 to 3.26 with same level of
>>>>>     read optimisation and that does not change the fact that, for
>>>>>     that very same level of read optimisation, project's loading
>>>>>     is incredibly slower in 3.26.
>>>>>
>>>>>
>>>>> You'll need to set the new flags relating to skipping the 3d views 
>>>>> and project style loading in order to compare properly. Neither of 
>>>>> those things were occurring in 3.24, and both have an associated 
>>>>> cost. And neither are relevant for server.
>>>>>
>>>>> Nyall
>>>>>
>>>>>
>>>>>
>>>>>     Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit?:
>>>>>>
>>>>>>
>>>>>>     On Mon, 20 June 2022, 9:37 pm David Marteau via
>>>>>>     QGIS-Developer, <qgis-developer at lists.osgeo.org> wrote:
>>>>>>
>>>>>>         Hi,
>>>>>>
>>>>>>         I have noticed a huge drop of performance while testing
>>>>>>         Qgis server with Qgis 3.26, from 10x to 30x slower as usual.
>>>>>>
>>>>>>         Trying to reduce the problem I have found a huge increase
>>>>>>         of time spend reading the project in 3.26 compared to 3.24.
>>>>>>
>>>>>>         Here some benchmark with very simple project from the
>>>>>>         test data set. Note: the project has been updated with
>>>>>>         qgis 3.26:
>>>>>>
>>>>>>         Qgis 3.24:
>>>>>>         ======
>>>>>>
>>>>>>         readflags = QgsProject.ReadFlags()readflags |=
>>>>>>         QgsProject.FlagTrustLayerMetadata
>>>>>>
>>>>>>         prj = QgsProject()
>>>>>>
>>>>>>         %timeit -n 1
>>>>>>         prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>>>>
>>>>>>         > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>>>
>>>>>>         Qgis 3.26:
>>>>>>         ======
>>>>>>
>>>>>>         readflags = QgsProject.ReadFlags() readflags |=
>>>>>>         QgsProject.FlagTrustLayerMetadata
>>>>>>
>>>>>>
>>>>>>     You should set the other new read optimisation flags here --
>>>>>>     see
>>>>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>>>>
>>>>>>     Nyall
>>>>>>
>>>>>>         ?prj = QgsProject()
>>>>>>
>>>>>>         %timeit -n 1
>>>>>>         prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>>>>
>>>>>>         195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>>>
>>>>>>         There is a factor x10 between Qgis 3.24 et Qgis 3.26 for
>>>>>>         the exact same project.
>>>>>>         This has serious impact on requests: landing page catalog
>>>>>>         request time increased from approximatevely 110ms to more
>>>>>>         than 3.0s with our test data set.
>>>>>>
>>>>>>
>>>>>>         David Marteau
>>>>>>         www.3liz.com <http://www.3liz.com>
>>>>>>
>>>>>>         _______________________________________________
>>>>>>         QGIS-Developer mailing list
>>>>>>         QGIS-Developer at lists.osgeo.org
>>>>>>         List info:
>>>>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>         Unsubscribe:
>>>>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> -- 
>>> http://www.spatialys.com
>>> My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220621/39d7fa45/attachment-0001.htm>

From nyall.dawson at gmail.com  Tue Jun 21 17:43:19 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 22 Jun 2022 10:43:19 +1000
Subject: [QGIS-Developer] Time for db manager to become an "opt-in" plugin?
Message-ID: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>

Hi list,

I wanted to raise the discussion around potentially demoting the DB Manager
plugin to become an opt-in, not installed by default plugin available from
the QGIS plugin repository only.

It's likely no surprise to anyone on this list, but there's been a
multi-year effort (mostly thanks to Alessandro!) to move all the important
functionality of db manager over to the QGIS browser. This was driven by a
number of factors:

- It was confusing and messy to expose database management tools through
two completely separate parts of the QGIS interface
- The DB Manager tools are written in provider-specific ways, and don't use
generic QGIS database/provider API calls. As a result there's a lot of
duplicate code there, and db manager doesn't gain the benefits of new data
provider features. (E.g. only a subset of the databases supported by QGIS
and the browser management tools are available for management in db manager)
- The DB Manager functionality wasn't available for other parts of
QGIS/plugins/scripts/etc to reuse, whereas the browser functionality is all
nicely exposed to PyQGIS and is used by other parts of QGIS, eg. processing
tools.
- The Python code implementing db manager is fragile, and is subject to
semi-frequent regressions/breakage (through no fault of the authors -- it's
just the nature of complex python applications which aren't soaked in unit
tests)

I'd say we've reached a stage where the browser now offers all the common
functionality also available in db manager, and we can start to seriously
discuss the future of the plugin.

My personal view is that we should demote the plugin to a
community-maintained, non-officially supported plugin available only
through the QGIS plugin repositories, and remove it from the default QGIS
install.

Thoughts/discussion welcome :)

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220622/8b74f0ff/attachment.htm>

From cavallini at faunalia.it  Tue Jun 21 22:46:03 2022
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 22 Jun 2022 07:46:03 +0200
Subject: [QGIS-Developer] Time for db manager to become an "opt-in"
 plugin?
In-Reply-To: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
References: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
Message-ID: <0bef2b83-6f7a-0706-6613-7b1c746fa23f@faunalia.it>

+1 from me. the current state is really confusing.
there are a number of functions that are still missing from core, but
what is really used can be added later, in the meantime the external
plugin can do the job.
thanks Nyall for raising this.
cheers.

Il 22/06/22 02:43, Nyall Dawson via QGIS-Developer ha scritto:
> Hi list,
> 
> I wanted to raise the discussion around potentially demoting the DB
> Manager plugin to become an opt-in, not installed by default plugin
> available from the QGIS plugin repository only.
> 
> It's likely no surprise?to anyone on this list, but there's been a
> multi-year effort (mostly thanks to Alessandro!) to move all the
> important functionality of db manager over to the QGIS browser. This was
> driven by a number of factors:
> 
> - It was confusing and messy to expose database management tools through
> two completely separate parts of the QGIS interface
> - The DB Manager tools are written in provider-specific ways, and don't
> use generic QGIS database/provider API calls. As a result there's a lot
> of duplicate code there, and db manager doesn't gain the benefits of new
> data provider features. (E.g. only a subset of the databases supported
> by QGIS and the browser management tools are available for management in
> db manager)
> - The DB Manager functionality wasn't available for other parts of
> QGIS/plugins/scripts/etc to reuse, whereas the browser functionality is
> all nicely exposed to PyQGIS and is used by other parts of QGIS, eg.
> processing tools.
> - The Python code implementing db manager is fragile, and is subject to
> semi-frequent regressions/breakage (through no fault of the authors --
> it's just the nature of complex python applications which aren't soaked
> in unit tests)
> 
> I'd say we've reached a stage where the browser now offers all the
> common functionality also available in db manager, and we can start to
> seriously discuss the future of the plugin.
> 
> My personal view is that we should demote the plugin to a
> community-maintained, non-officially supported plugin available only
> through the QGIS plugin repositories, and remove it from the default
> QGIS install.
> 
> Thoughts/discussion welcome :)
> 
> Nyall
> 
> 
> 
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From nyall.dawson at gmail.com  Tue Jun 21 22:55:55 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 22 Jun 2022 15:55:55 +1000
Subject: [QGIS-Developer] Time for db manager to become an "opt-in"
 plugin?
In-Reply-To: <0bef2b83-6f7a-0706-6613-7b1c746fa23f@faunalia.it>
References: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
 <0bef2b83-6f7a-0706-6613-7b1c746fa23f@faunalia.it>
Message-ID: <CAB28AsiZ7sjzc9GK1_knjwzPL9R9buDNyKSi5jJew-0SLcVqyQ@mail.gmail.com>

On Wed, 22 Jun 2022 at 15:46, Paolo Cavallini via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> +1 from me. the current state is really confusing.
> there are a number of functions that are still missing from core, but
> what is really used can be added later, in the meantime the external
> plugin can do the job.

Right -- for completeness, here's my understanding of the
functionality available through db manager which ISN'T yet available
via the browser:

- Saving/re-running previously saved SQL queries
- Switching to the simplified "SQL builder" dialog for creating a SQL query
- Truncating a table (this is available through a Processing
algorithm, just not via browser)
- Attribute index creation (this is available through a Processing
algorithm, just not via browser)
- !! Support for editing an existing column (changing name/type). This
is the biggest functionality gap -- changing existing column types is
not available elsewhere in QGIS
- Listing database triggers

Nyall



> thanks Nyall for raising this.
> cheers.
>
> Il 22/06/22 02:43, Nyall Dawson via QGIS-Developer ha scritto:
> > Hi list,
> >
> > I wanted to raise the discussion around potentially demoting the DB
> > Manager plugin to become an opt-in, not installed by default plugin
> > available from the QGIS plugin repository only.
> >
> > It's likely no surprise to anyone on this list, but there's been a
> > multi-year effort (mostly thanks to Alessandro!) to move all the
> > important functionality of db manager over to the QGIS browser. This was
> > driven by a number of factors:
> >
> > - It was confusing and messy to expose database management tools through
> > two completely separate parts of the QGIS interface
> > - The DB Manager tools are written in provider-specific ways, and don't
> > use generic QGIS database/provider API calls. As a result there's a lot
> > of duplicate code there, and db manager doesn't gain the benefits of new
> > data provider features. (E.g. only a subset of the databases supported
> > by QGIS and the browser management tools are available for management in
> > db manager)
> > - The DB Manager functionality wasn't available for other parts of
> > QGIS/plugins/scripts/etc to reuse, whereas the browser functionality is
> > all nicely exposed to PyQGIS and is used by other parts of QGIS, eg.
> > processing tools.
> > - The Python code implementing db manager is fragile, and is subject to
> > semi-frequent regressions/breakage (through no fault of the authors --
> > it's just the nature of complex python applications which aren't soaked
> > in unit tests)
> >
> > I'd say we've reached a stage where the browser now offers all the
> > common functionality also available in db manager, and we can start to
> > seriously discuss the future of the plugin.
> >
> > My personal view is that we should demote the plugin to a
> > community-maintained, non-officially supported plugin available only
> > through the QGIS plugin repositories, and remove it from the default
> > QGIS install.
> >
> > Thoughts/discussion welcome :)
> >
> > Nyall
> >
> >
> >
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> --
> Paolo Cavallini
> www.faunalia.eu - QGIS.org
> training, support, development on QGIS, PostGIS and more
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From apasotti at gmail.com  Tue Jun 21 23:47:11 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 22 Jun 2022 08:47:11 +0200
Subject: [QGIS-Developer] Time for db manager to become an "opt-in"
 plugin?
In-Reply-To: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
References: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
Message-ID: <CAL5Q672tVWy-N_8UzRt355H4JPihrqMXE+Sr8gzUiP-vD_cfrw@mail.gmail.com>

I am +1 (of course).

Another notable feature gap is virtual layers.

Kind regards.

On Wed, Jun 22, 2022 at 2:43 AM Nyall Dawson via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> Hi list,
>
> I wanted to raise the discussion around potentially demoting the DB Manager plugin to become an opt-in, not installed by default plugin available from the QGIS plugin repository only.
>
> It's likely no surprise to anyone on this list, but there's been a multi-year effort (mostly thanks to Alessandro!) to move all the important functionality of db manager over to the QGIS browser. This was driven by a number of factors:
>
> - It was confusing and messy to expose database management tools through two completely separate parts of the QGIS interface
> - The DB Manager tools are written in provider-specific ways, and don't use generic QGIS database/provider API calls. As a result there's a lot of duplicate code there, and db manager doesn't gain the benefits of new data provider features. (E.g. only a subset of the databases supported by QGIS and the browser management tools are available for management in db manager)
> - The DB Manager functionality wasn't available for other parts of QGIS/plugins/scripts/etc to reuse, whereas the browser functionality is all nicely exposed to PyQGIS and is used by other parts of QGIS, eg. processing tools.
> - The Python code implementing db manager is fragile, and is subject to semi-frequent regressions/breakage (through no fault of the authors -- it's just the nature of complex python applications which aren't soaked in unit tests)
>
> I'd say we've reached a stage where the browser now offers all the common functionality also available in db manager, and we can start to seriously discuss the future of the plugin.
>
> My personal view is that we should demote the plugin to a community-maintained, non-officially supported plugin available only through the QGIS plugin repositories, and remove it from the default QGIS install.
>
> Thoughts/discussion welcome :)
>
> Nyall
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From nyall.dawson at gmail.com  Tue Jun 21 23:52:37 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 22 Jun 2022 16:52:37 +1000
Subject: [QGIS-Developer] Time for db manager to become an "opt-in"
 plugin?
In-Reply-To: <CAL5Q672tVWy-N_8UzRt355H4JPihrqMXE+Sr8gzUiP-vD_cfrw@mail.gmail.com>
References: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
 <CAL5Q672tVWy-N_8UzRt355H4JPihrqMXE+Sr8gzUiP-vD_cfrw@mail.gmail.com>
Message-ID: <CAB28AshQ1SQg1swtB4hWat030EonrptX8_fcEATkpFQEHJ0tHg@mail.gmail.com>

On Wed, 22 Jun 2022 at 16:47, Alessandro Pasotti <apasotti at gmail.com> wrote:
>
> I am +1 (of course).
>
> Another notable feature gap is virtual layers.

What's the gap there? Can't that all be done from the "New Virtual
Layer" dialog?

Nyall

>
> Kind regards.
>
> On Wed, Jun 22, 2022 at 2:43 AM Nyall Dawson via QGIS-Developer
> <qgis-developer at lists.osgeo.org> wrote:
> >
> > Hi list,
> >
> > I wanted to raise the discussion around potentially demoting the DB Manager plugin to become an opt-in, not installed by default plugin available from the QGIS plugin repository only.
> >
> > It's likely no surprise to anyone on this list, but there's been a multi-year effort (mostly thanks to Alessandro!) to move all the important functionality of db manager over to the QGIS browser. This was driven by a number of factors:
> >
> > - It was confusing and messy to expose database management tools through two completely separate parts of the QGIS interface
> > - The DB Manager tools are written in provider-specific ways, and don't use generic QGIS database/provider API calls. As a result there's a lot of duplicate code there, and db manager doesn't gain the benefits of new data provider features. (E.g. only a subset of the databases supported by QGIS and the browser management tools are available for management in db manager)
> > - The DB Manager functionality wasn't available for other parts of QGIS/plugins/scripts/etc to reuse, whereas the browser functionality is all nicely exposed to PyQGIS and is used by other parts of QGIS, eg. processing tools.
> > - The Python code implementing db manager is fragile, and is subject to semi-frequent regressions/breakage (through no fault of the authors -- it's just the nature of complex python applications which aren't soaked in unit tests)
> >
> > I'd say we've reached a stage where the browser now offers all the common functionality also available in db manager, and we can start to seriously discuss the future of the plugin.
> >
> > My personal view is that we should demote the plugin to a community-maintained, non-officially supported plugin available only through the QGIS plugin repositories, and remove it from the default QGIS install.
> >
> > Thoughts/discussion welcome :)
> >
> > Nyall
> >
> >
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it

From apasotti at gmail.com  Wed Jun 22 00:14:26 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 22 Jun 2022 09:14:26 +0200
Subject: [QGIS-Developer] Time for db manager to become an "opt-in"
 plugin?
In-Reply-To: <CAB28AshQ1SQg1swtB4hWat030EonrptX8_fcEATkpFQEHJ0tHg@mail.gmail.com>
References: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
 <CAL5Q672tVWy-N_8UzRt355H4JPihrqMXE+Sr8gzUiP-vD_cfrw@mail.gmail.com>
 <CAB28AshQ1SQg1swtB4hWat030EonrptX8_fcEATkpFQEHJ0tHg@mail.gmail.com>
Message-ID: <CAL5Q670e1b_xfJWUs6a1M+1sBVoCg_Tnfpx5iJ2R31pXCwkMgQ@mail.gmail.com>

On Wed, Jun 22, 2022 at 8:52 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> On Wed, 22 Jun 2022 at 16:47, Alessandro Pasotti <apasotti at gmail.com> wrote:
> >
> > I am +1 (of course).
> >
> > Another notable feature gap is virtual layers.
>
> What's the gap there? Can't that all be done from the "New Virtual
> Layer" dialog?


Not much of a functional gap, more a GUI one, virtual layers are not
listed in the browser: there is no icon for them like there is in
DB-manager.


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From cavallini at faunalia.it  Tue Jun 21 23:07:05 2022
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 22 Jun 2022 08:07:05 +0200
Subject: [QGIS-Developer] Time for db manager to become an "opt-in"
 plugin?
In-Reply-To: <CAB28AsiZ7sjzc9GK1_knjwzPL9R9buDNyKSi5jJew-0SLcVqyQ@mail.gmail.com>
References: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
 <0bef2b83-6f7a-0706-6613-7b1c746fa23f@faunalia.it>
 <CAB28AsiZ7sjzc9GK1_knjwzPL9R9buDNyKSi5jJew-0SLcVqyQ@mail.gmail.com>
Message-ID: <335f4f95-1610-b0c4-4eb8-a4ca7e25d6fd@faunalia.it>

Hi Nyall,

Il 22/06/22 07:55, Nyall Dawson ha scritto:

> - Saving/re-running previously saved SQL queries

very useful to me. also loading the result of a query as a new layer

> - Switching to the simplified "SQL builder" dialog for creating a SQL query
> - Truncating a table (this is available through a Processing
> algorithm, just not via browser)
> - Attribute index creation (this is available through a Processing
> algorithm, just not via browser)

handy but not crucial

> - !! Support for editing an existing column (changing name/type). This
> is the biggest functionality gap -- changing existing column types is
> not available elsewhere in QGIS
> - Listing database triggers

I'd add storicization of a table - I couldn't find anything easier for this.

Cheers.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From tim at kartoza.com  Wed Jun 22 02:13:14 2022
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 22 Jun 2022 10:13:14 +0100
Subject: [QGIS-Developer] Time for db manager to become an "opt-in"
 plugin?
In-Reply-To: <335f4f95-1610-b0c4-4eb8-a4ca7e25d6fd@faunalia.it>
References: <335f4f95-1610-b0c4-4eb8-a4ca7e25d6fd@faunalia.it>
Message-ID: <9E677A03-CB44-4D67-8C29-A4818AE90040@kartoza.com>

+1 from me too?we don?t lose anything really here since all the gaps mentioned can still be covered by installing the dev manager from the plug-in repo.

Sent from my iPhone

> On 22 Jun 2022, at 08:33, Paolo Cavallini via QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
> 
> ?Hi Nyall,
> 
> Il 22/06/22 07:55, Nyall Dawson ha scritto:
> 
>> - Saving/re-running previously saved SQL queries
> 
> very useful to me. also loading the result of a query as a new layer
> 
>> - Switching to the simplified "SQL builder" dialog for creating a SQL query
>> - Truncating a table (this is available through a Processing
>> algorithm, just not via browser)
>> - Attribute index creation (this is available through a Processing
>> algorithm, just not via browser)
> 
> handy but not crucial
> 
>> - !! Support for editing an existing column (changing name/type). This
>> is the biggest functionality gap -- changing existing column types is
>> not available elsewhere in QGIS
>> - Listing database triggers
> 
> I'd add storicization of a table - I couldn't find anything easier for this.
> 
> Cheers.
> -- 
> Paolo Cavallini
> www.faunalia.eu - QGIS.org
> training, support, development on QGIS, PostGIS and more
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From sylvain.pierre at alsace.eu  Thu Jun 23 05:42:25 2022
From: sylvain.pierre at alsace.eu (PIERRE Sylvain)
Date: Thu, 23 Jun 2022 12:42:25 +0000
Subject: [QGIS-Developer] action  get measure
Message-ID: <PR1P264MB2046958BD0514B19CF0A7E7C9CB59@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>

Hi ,
I want to build an action on a point layer, wich draw a line from a point and store the lenght inside a field layer.
Is ther any way to do that ?

Thanks

Sylvain

[cid:image001.jpg at 01D8870F.73668F30]
Sylvain PIERRE
Chef de projet syst?me d'information
Direction des Syst?mes d'Information et du D?veloppement Num?rique
Service Projets et Ing?nierie Num?rique
Collectivit? europ?enne d'Alsace
T?l : 03 88 76 68 88
sylvain.pierre at alsace.eu<mailto:sylvain.pierre at alsace.eu>
www.alsace.eu<http://www.alsace.eu>
[facebook]<http://www.facebook.com/toutelalsace> [twitter] <http://www.twitter.com/toutelalsace>  [insta] <http://www.instagram.com/toutelalsace>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/6f9e7a24/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 8103 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/6f9e7a24/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 827 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/6f9e7a24/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 853 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/6f9e7a24/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 1038 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/6f9e7a24/attachment-0005.png>

From sylvain.pierre at alsace.eu  Thu Jun 23 06:32:03 2022
From: sylvain.pierre at alsace.eu (PIERRE Sylvain)
Date: Thu, 23 Jun 2022 13:32:03 +0000
Subject: [QGIS-Developer] action  get measure
In-Reply-To: <a7bfbed60d6bbedd58f0c47e2491a1c2@carto.net>
References: <PR1P264MB2046958BD0514B19CF0A7E7C9CB59@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <a7bfbed60d6bbedd58f0c47e2491a1c2@carto.net>
Message-ID: <PR1P264MB2046B4FF8246D2F0FB592D629CB59@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>

Hi Andreas,

I want an interactive solution . Close to measurement tool except I can catch the length and update a field in the layer table.

De : Andreas Neumann <a.neumann at carto.net>
Envoy? : jeudi 23 juin 2022 15:29
? : PIERRE Sylvain <sylvain.pierre at alsace.eu>
Cc : qgis-developer at lists.osgeo.org
Objet : Re: [QGIS-Developer] action get measure

Soyez vigilant : ce courriel provient d'une organisation externe ? la CeA.
? Assurez-vous d?abord qu?il ne s?agit pas d?un email malveillant avant de cliquer sur tout lien ou pi?ce jointe.
Apprendre ? reconna?tre un email de phishing.<https://intranet.alsace.eu/actualites/apprenez-a-reconnaitre-un-email-phishing/>

Hi Sylvain,

Do you want an interactive solution where the user should interactively draw a second point - or is the second point already in your data table?

Andreas

On 2022-06-23 14:42, PIERRE Sylvain via QGIS-Developer wrote:

Hi ,

I want to build an action on a point layer, wich draw a line from a point and store the lenght inside a field layer.

Is ther any way to do that ?



Thanks



Sylvain



[cid:image001.jpg at 01D88716.6296A620]

Sylvain PIERRE

Chef de projet syst?me d?information

Direction des Syst?mes d?Information et du D?veloppement Num?rique

Service Projets et Ing?nierie Num?rique

Collectivit? europ?enne d?Alsace

T?l : 03 88 76 68 88

sylvain.pierre at alsace.eu<mailto:sylvain.pierre at alsace.eu>

www.alsace.eu<http://www.alsace.eu>

[facebook]<http://www.facebook.com/toutelalsace> [twitter] <http://www.twitter.com/toutelalsace>  [insta] <http://www.instagram.com/toutelalsace>



_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/ec4e9fdd/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 8029 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/ec4e9fdd/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 895 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/ec4e9fdd/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 851 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/ec4e9fdd/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 1039 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/ec4e9fdd/attachment-0005.png>

From a.neumann at carto.net  Thu Jun 23 06:29:12 2022
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 23 Jun 2022 15:29:12 +0200
Subject: [QGIS-Developer] action  get measure
In-Reply-To: <PR1P264MB2046958BD0514B19CF0A7E7C9CB59@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
References: <PR1P264MB2046958BD0514B19CF0A7E7C9CB59@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <a7bfbed60d6bbedd58f0c47e2491a1c2@carto.net>

Hi Sylvain,

Do you want an interactive solution where the user should interactively 
draw a second point - or is the second point already in your data table?

Andreas

On 2022-06-23 14:42, PIERRE Sylvain via QGIS-Developer wrote:

> Hi ,
> 
> I want to build an action on a point layer, wich draw a line from a 
> point and store the lenght inside a field layer.
> 
> Is ther any way to do that ?
> 
> Thanks
> 
> Sylvain
> 
> Sylvain PIERRE
> 
> Chef de projet syst?me d'information
> 
> Direction des Syst?mes d'Information et du D?veloppement Num?rique
> 
> Service Projets et Ing?nierie Num?rique
> 
> Collectivit? europ?enne d'Alsace
> 
> T?l : 03 88 76 68 88
> 
> sylvain.pierre at alsace.eu
> 
> www.alsace.eu [1]
> 
> [2]  [3]  [4]
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



Links:
------
[1] http://www.alsace.eu
[2] http://www.facebook.com/toutelalsace
[3] http://www.twitter.com/toutelalsace
[4] http://www.instagram.com/toutelalsace
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/51f3376e/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 8103 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/51f3376e/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/51f3376e/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 853 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/51f3376e/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 1038 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/51f3376e/attachment-0002.png>

From a.neumann at carto.net  Thu Jun 23 06:50:20 2022
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 23 Jun 2022 15:50:20 +0200
Subject: [QGIS-Developer] action  get measure
In-Reply-To: <PR1P264MB2046B4FF8246D2F0FB592D629CB59@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
References: <PR1P264MB2046958BD0514B19CF0A7E7C9CB59@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <a7bfbed60d6bbedd58f0c47e2491a1c2@carto.net>
 <PR1P264MB2046B4FF8246D2F0FB592D629CB59@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <527b379d2070354929b6b5489a2e5b21@carto.net>

Hi Silvain,

Hm - this will require a "Python action".

Because with a generic action you could do something like:

length(make_line($geometry,make_point(@click_x, at click_y)))

using a QGIS expression, but there are two problems:

- you can only get @click_x and @click_y if you click on the feature; 
but since it is a point feature you cannot click outside the tolerance 
of this point in order to receive the coordinates

- generic actions do not allow updates of data

So you'd have to use a Python action. If you Google for QGIS Python 
actions, you should get some ideas how it works.

Andreas

On 2022-06-23 15:32, PIERRE Sylvain wrote:

> Hi Andreas,
> 
> I want an interactive solution . Close to measurement tool except I can 
> catch the length and update a field in the layer table.
> 
> De : Andreas Neumann <a.neumann at carto.net>
> Envoy? : jeudi 23 juin 2022 15:29
> ? : PIERRE Sylvain <sylvain.pierre at alsace.eu>
> Cc : qgis-developer at lists.osgeo.org
> Objet : Re: [QGIS-Developer] action get measure
> 
> Soyez vigilant : ce courriel provient d'une organisation externe ? la 
> CeA.
> * Assurez-vous d'abord qu'il ne s'agit pas d'un email malveillant avant 
> de cliquer sur tout lien ou pi?ce jointe.
> Apprendre ? reconna?tre un email de phishing. [6]
> 
> Hi Sylvain,
> 
> Do you want an interactive solution where the user should interactively 
> draw a second point - or is the second point already in your data 
> table?
> 
> Andreas
> 
> On 2022-06-23 14:42, PIERRE Sylvain via QGIS-Developer wrote:
> 
>> Hi ,
>> 
>> I want to build an action on a point layer, wich draw a line from a 
>> point and store the lenght inside a field layer.
>> 
>> Is ther any way to do that ?
>> 
>> Thanks
>> 
>> Sylvain
>> 
>> Sylvain PIERRE
>> 
>> Chef de projet syst?me d'information
>> 
>> Direction des Syst?mes d'Information et du D?veloppement Num?rique
>> 
>> Service Projets et Ing?nierie Num?rique
>> 
>> Collectivit? europ?enne d'Alsace
>> 
>> T?l : 03 88 76 68 88
>> 
>> sylvain.pierre at alsace.eu
>> 
>> www.alsace.eu [1]
>> 
>> [2]  [3]  [4]
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer [5]
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer 
>> [5]



Links:
------
[1] http://www.alsace.eu
[2] http://www.facebook.com/toutelalsace
[3] http://www.twitter.com/toutelalsace
[4] http://www.instagram.com/toutelalsace
[5] https://lists.osgeo.org/mailman/listinfo/qgis-developer
[6] 
https://intranet.alsace.eu/actualites/apprenez-a-reconnaitre-un-email-phishing/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/0cd2f89b/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 8029 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/0cd2f89b/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 895 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/0cd2f89b/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 851 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/0cd2f89b/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 1039 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220623/0cd2f89b/attachment-0005.png>

From sigeal at sigeal.com  Thu Jun 23 07:21:31 2022
From: sigeal at sigeal.com (=?UTF-8?Q?SIG=c3=a9al?=)
Date: Thu, 23 Jun 2022 16:21:31 +0200
Subject: [QGIS-Developer] Time for db manager to become an "opt-in"
 plugin?
In-Reply-To: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
References: <CAB28AsjCxizd_ZgqLBuNXmzzy7WuGD-8=zNr3PqsaDsNdKAHYg@mail.gmail.com>
Message-ID: <8600481c-4708-8524-0c96-c35eb145a347@sigeal.com>

Hi,

+1 for improving QGIS UI consistency !

I recently posted a feature request about "Update SQL Layer" dialog 
which IMHO should be non modal : https://github.com/qgis/QGIS/issues/49091

Reading this discussion, I tested further browser functionnalities and 
came to the conclusion that "Execute SQL" dialog should also be non modal.

And I also wonder why these dialogs could not be included in the Browser 
non modal window, similarly to what is done in DB Manager.

Just my two cents...

-- 
Christophe Damour

Le 22/06/2022 ? 02:43, Nyall Dawson via QGIS-Developer a ?crit?:
> Hi list,
>
> I wanted to raise the discussion around potentially demoting the DB 
> Manager plugin to become an opt-in, not installed by default plugin 
> available from the QGIS plugin repository only.
>
> It's likely no surprise?to anyone on this list, but there's been a 
> multi-year effort (mostly thanks to Alessandro!) to move all the 
> important functionality of db manager over to the QGIS browser. This 
> was driven by a number of factors:
>
> - It was confusing and messy to expose database management tools 
> through two completely separate parts of the QGIS interface
> - The DB Manager tools are written in provider-specific ways, and 
> don't use generic QGIS database/provider API calls. As a result 
> there's a lot of duplicate code there, and db manager doesn't gain the 
> benefits of new data provider features. (E.g. only a subset of the 
> databases supported by QGIS and the browser management tools are 
> available for management in db manager)
> - The DB Manager functionality wasn't available for other parts of 
> QGIS/plugins/scripts/etc to reuse, whereas the browser functionality 
> is all nicely exposed to PyQGIS and is used by other parts of QGIS, 
> eg. processing tools.
> - The Python code implementing db manager is fragile, and is subject 
> to semi-frequent regressions/breakage (through no fault of the authors 
> -- it's just the nature of complex python applications which aren't 
> soaked in unit tests)
>
> I'd say we've reached a stage where the browser now offers all the 
> common functionality also available in db manager, and we can start to 
> seriously discuss the future of the plugin.
>
> My personal view is that we should demote the plugin to a 
> community-maintained, non-officially supported plugin available only 
> through the QGIS plugin repositories, and remove it from the default 
> QGIS install.
>
> Thoughts/discussion welcome :)
>
> Nyall
>
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From senhor.neto at gmail.com  Thu Jun 23 17:29:25 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Fri, 24 Jun 2022 01:29:25 +0100
Subject: [QGIS-Developer] gdal2xyz.bat not accepting -b any band number
Message-ID: <CA+H0G_EzgBiMcguFyyZNK9FPFEAQT1t70pmcc=v+FEBe7vyFxg@mail.gmail.com>

I am testing the GDAL tools on QGIS 3.22.8 on Windows. When running
gdal2xyz with a single band raster I am getting the following error:

C:\Users\testing_user>gdal2xyz.bat -b 1
C:/Users/testing_user/Desktop/gdal_commands_test/mdt_clipped.tif OUTPUT.csv
usage: gdal2xyz.py [-h] [-skip] [-srcwin xoff yoff xsize ysize] [-b band
[band ...]] [-allbands] [-csv] [-skipnodata]
                   [-srcnodata [SRC_NODATA ...]] [-dstnodata [DST_NODATA
...]]
                   src_dataset dst_dataset
gdal2xyz.py: error: argument -b/-band/--band: invalid int value:
'C:/Users/testing_user/Desktop/gdal_commands_test/mdt_clipped.tif'

If I remove the -b option it works.

Windows Is now on GDAL 3.5.0. On my linux machine that still uses GDAL
3.0.4 it works fine.

Bug report? In here or in GDAL?

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220624/21825562/attachment.htm>

From even.rouault at spatialys.com  Thu Jun 23 17:40:54 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Jun 2022 02:40:54 +0200
Subject: [QGIS-Developer] gdal2xyz.bat not accepting -b any band number
In-Reply-To: <CA+H0G_EzgBiMcguFyyZNK9FPFEAQT1t70pmcc=v+FEBe7vyFxg@mail.gmail.com>
References: <CA+H0G_EzgBiMcguFyyZNK9FPFEAQT1t70pmcc=v+FEBe7vyFxg@mail.gmail.com>
Message-ID: <92489e78-ad69-19e0-354d-c360c756db38@spatialys.com>


Le 24/06/2022 ? 02:29, Alexandre Neto via QGIS-Developer a ?crit?:
> I am testing the GDAL tools on QGIS 3.22.8 on Windows. When running 
> gdal2xyz with a single band raster I am getting the following error:
>
> C:\Users\testing_user>gdal2xyz.bat -b 1 
> C:/Users/testing_user/Desktop/gdal_commands_test/mdt_clipped.tif 
> OUTPUT.csv
> usage: gdal2xyz.py [-h] [-skip] [-srcwin xoff yoff xsize ysize] [-b 
> band [band ...]] [-allbands] [-csv] [-skipnodata]
> ? ? ? ? ? ? ? ? ? ?[-srcnodata [SRC_NODATA ...]] [-dstnodata 
> [DST_NODATA ...]]
> ? ? ? ? ? ? ? ? ? ?src_dataset dst_dataset
> gdal2xyz.py: error: argument -b/-band/--band: invalid int value: 
> 'C:/Users/testing_user/Desktop/gdal_commands_test/mdt_clipped.tif'
>
> If I remove the -b option it works.
>
> Windows Is now on GDAL 3.5.0. On my linux machine that still uses GDAL 
> 3.0.4 it works fine.
>
> Bug report? In here or in GDAL?
to GDAL. It looks like the -b option is a bit too greedy in consuming 
arguments. A workaround is to put the -b 1 option at the end of the 
command line.
>
> Alexandre Neto
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From senhor.neto at gmail.com  Thu Jun 23 18:21:30 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Fri, 24 Jun 2022 02:21:30 +0100
Subject: [QGIS-Developer] gdal2xyz.bat not accepting -b any band number
In-Reply-To: <92489e78-ad69-19e0-354d-c360c756db38@spatialys.com>
References: <CA+H0G_EzgBiMcguFyyZNK9FPFEAQT1t70pmcc=v+FEBe7vyFxg@mail.gmail.com>
 <92489e78-ad69-19e0-354d-c360c756db38@spatialys.com>
Message-ID: <CA+H0G_GSr022AUzZbtR9URbXXLzKu8zFtjAe5e+6YWaaVZ2WDQ@mail.gmail.com>

Done

https://github.com/OSGeo/gdal/issues/5984

A sexta, 24/06/2022, 01:40, Even Rouault <even.rouault at spatialys.com>
escreveu:

>
> Le 24/06/2022 ? 02:29, Alexandre Neto via QGIS-Developer a ?crit :
> > I am testing the GDAL tools on QGIS 3.22.8 on Windows. When running
> > gdal2xyz with a single band raster I am getting the following error:
> >
> > C:\Users\testing_user>gdal2xyz.bat -b 1
> > C:/Users/testing_user/Desktop/gdal_commands_test/mdt_clipped.tif
> > OUTPUT.csv
> > usage: gdal2xyz.py [-h] [-skip] [-srcwin xoff yoff xsize ysize] [-b
> > band [band ...]] [-allbands] [-csv] [-skipnodata]
> >                    [-srcnodata [SRC_NODATA ...]] [-dstnodata
> > [DST_NODATA ...]]
> >                    src_dataset dst_dataset
> > gdal2xyz.py: error: argument -b/-band/--band: invalid int value:
> > 'C:/Users/testing_user/Desktop/gdal_commands_test/mdt_clipped.tif'
> >
> > If I remove the -b option it works.
> >
> > Windows Is now on GDAL 3.5.0. On my linux machine that still uses GDAL
> > 3.0.4 it works fine.
> >
> > Bug report? In here or in GDAL?
> to GDAL. It looks like the -b option is a bit too greedy in consuming
> arguments. A workaround is to put the -b 1 option at the end of the
> command line.
> >
> > Alexandre Neto
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220624/de659062/attachment.htm>

From enzedrailmaps at gmail.com  Fri Jun 24 15:48:23 2022
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Sat, 25 Jun 2022 10:48:23 +1200
Subject: [QGIS-Developer] Bug report submission to Launchpad for Qgis
 3.22, Ubuntu 22.04
In-Reply-To: <5b7f4cb2-5529-1455-2d7c-d0dc42f9600d@gmail.com>
References: <5b7f4cb2-5529-1455-2d7c-d0dc42f9600d@gmail.com>
Message-ID: <9d785edb-710b-4934-b931-104a5333066f@gmail.com>

3.24 seems to be quite stable on Ubuntu 22.04 now, so it would look like 
this was possibly a bug in the initial release of Ubuntu 22, fixed with 
their many updates.

On 1/05/22 21:41, Patrick Dunford wrote:
> Bug No. 1971082
>
> Qgis 3.22 crashes when attempting to display file dialogs for various 
> file operations.
>
> This issue appears to be specific to Ubuntu 22.04 and cannot to date 
> be reproduced on any other recent Ubuntu release.
>
> Both of the Ubuntu official repository packages (3.22.4) and the LTR 
> packages (3.22.5) from the Qgis repositories are implicated. However 
> the process for the Ubuntu bug reporting process will refer to the 
> Ubuntu official repository packages.
>
> The issue does not occur when using the current flatpak stable 
> release, 3.24.2
>
> Do you think this should also be reported in the Qgis bugs page?
>
>

From remi.desgrange at ielo.net  Sat Jun 25 01:38:01 2022
From: remi.desgrange at ielo.net (=?Windows-1252?Q?R=E9mi_Desgrange?=)
Date: Sat, 25 Jun 2022 08:38:01 +0000
Subject: [QGIS-Developer] Feature count for DB provider.
Message-ID: <MRXP264MB0261C48DA8851E90A5FC3E6DF3B79@MRXP264MB0261.FRAP264.PROD.OUTLOOK.COM>

Hi,

Just launched the new QGIS 3.24, and tests the SQL debugger, I just found out that the ?feature count? does a while loop on all features in the layer to count.

While it?s probably necessary for shapefiles or stuff like that, it appears suboptimal for databases access. I found this part in the code that looks like to be responsible for the feature counts, https://github.com/qgis/QGIS/blob/master/src/core/vector/qgsvectorlayerfeaturecounter.cpp#L76-L90

Do you think I could make a special case for database-based provider (geopackage, postgres/oracle/mysql/etc?) that launch a ?SELECT count(*) FROM table? instead of looping on all features.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220625/f2143d57/attachment.htm>

From regis.haubourg at gmail.com  Sat Jun 25 03:53:52 2022
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Sat, 25 Jun 2022 12:53:52 +0200
Subject: [QGIS-Developer] Feature count for DB provider.
In-Reply-To: <MRXP264MB0261C48DA8851E90A5FC3E6DF3B79@MRXP264MB0261.FRAP264.PROD.OUTLOOK.COM>
References: <MRXP264MB0261C48DA8851E90A5FC3E6DF3B79@MRXP264MB0261.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <CABgOYCcaGA+mUJOqDUSFGk5qYsbRyFX1oCFhN+uMKuYGfGe1Gg@mail.gmail.com>

Hi R?my, There had been a lot of work for postGIS and oracle providers. A
count(*) might be really expensive for big tables, so there are options to
use db statistics instead of real count. I bet the loop you point out
occurs only in fallback situations but is not the main case.

One is here for instance by there are numerous PRs like this one
https://github.com/qgis/QGIS/pull/37619

In think @troopa81 has a clear view of the current state.
all the best
R?gis

Le sam. 25 juin 2022 ? 10:38, R?mi Desgrange via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hi,
>
>
>
> Just launched the new QGIS 3.24, and tests the SQL debugger, I just found
> out that the ?feature count? does a while loop on all features in the layer
> to count.
>
>
>
> While it?s probably necessary for shapefiles or stuff like that, it
> appears suboptimal for databases access. I found this part in the code that
> looks like to be responsible for the feature counts,
> https://github.com/qgis/QGIS/blob/master/src/core/vector/qgsvectorlayerfeaturecounter.cpp#L76-L90
>
>
>
> Do you think I could make a special case for database-based provider
> (geopackage, postgres/oracle/mysql/etc?) that launch a ?SELECT count(*)
> FROM table? instead of looping on all features.
>
>
>
> Thanks.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220625/09bd77f4/attachment.htm>

From remi.desgrange at ielo.net  Sun Jun 26 11:20:28 2022
From: remi.desgrange at ielo.net (=?utf-8?B?UsOpbWkgRGVzZ3Jhbmdl?=)
Date: Sun, 26 Jun 2022 18:20:28 +0000
Subject: [QGIS-Developer] Feature count for DB provider.
In-Reply-To: <CABgOYCcaGA+mUJOqDUSFGk5qYsbRyFX1oCFhN+uMKuYGfGe1Gg@mail.gmail.com>
References: <MRXP264MB0261C48DA8851E90A5FC3E6DF3B79@MRXP264MB0261.FRAP264.PROD.OUTLOOK.COM>
 <CABgOYCcaGA+mUJOqDUSFGk5qYsbRyFX1oCFhN+uMKuYGfGe1Gg@mail.gmail.com>
Message-ID: <MRXP264MB0261BE45B9A0BEB870847B16F3B69@MRXP264MB0261.FRAP264.PROD.OUTLOOK.COM>

Thanks Regis.

I tried with an existing project, and with no project. The information of the layers is:

service='mycomp_prod' sslmode=require key='gid' estimatedmetadata=true srid=27572 type=Point checkPrimaryKeyUnicity='1' table="public"."mylayer"

with service in `.pg_service.conf` :
[mycomp_prod]
user=rd
sslmode=require
host=gis.mycomp.fr
port=5432
dbname=mycomp

(don?t blame me for the 27572 OK ?)

I think I?ll open an issue because it _seems_ to do a SELECT count(*) FROM mylayer + SELECT * FROM mylayer until all features have been fetched. In my example, I have a 11M Points layer so it takes a while ?.

From: R?gis Haubourg <regis.haubourg at gmail.com>
Date: Saturday, 25 June 2022 at 12:54
To: R?mi Desgrange <remi.desgrange at ielo.net>
Cc: QGIS Developers List <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Feature count for DB provider.
Hi R?my, There had been a lot of work for postGIS and oracle providers. A count(*) might be really expensive for big tables, so there are options to use db statistics instead of real count. I bet the loop you point out occurs only in fallback situations but is not the main case.

One is here for instance by there are numerous PRs like this one https://github.com/qgis/QGIS/pull/37619

In think @troopa81 has a clear view of the current state.
all the best
R?gis

Le sam. 25 juin 2022 ? 10:38, R?mi Desgrange via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> a ?crit :
Hi,

Just launched the new QGIS 3.24, and tests the SQL debugger, I just found out that the ?feature count? does a while loop on all features in the layer to count.

While it?s probably necessary for shapefiles or stuff like that, it appears suboptimal for databases access. I found this part in the code that looks like to be responsible for the feature counts, https://github.com/qgis/QGIS/blob/master/src/core/vector/qgsvectorlayerfeaturecounter.cpp#L76-L90

Do you think I could make a special case for database-based provider (geopackage, postgres/oracle/mysql/etc?) that launch a ?SELECT count(*) FROM table? instead of looping on all features.

Thanks.
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220626/e4ce7d42/attachment.htm>

From plist at posteo.eu  Mon Jun 27 01:25:26 2022
From: plist at posteo.eu (Piet)
Date: Mon, 27 Jun 2022 08:25:26 +0000
Subject: [QGIS-Developer] Compile Master with Debian Bullseye
In-Reply-To: <1e0241b1-1a6e-8613-77e6-ca6df445f66e@posteo.eu>
References: <1e0241b1-1a6e-8613-77e6-ca6df445f66e@posteo.eu>
Message-ID: <a5a5a5e7-0ac7-87fd-94cf-88feab178f90@posteo.de>

Dear List,


I like to compile Qgis Master with Debian Bullseye following the 
building guide https://github.com/qgis/QGIS/blob/master/INSTALL.md

for Debian.

"make" failed with this error:


make[2]: *** [src/core/CMakeFiles/qgis_core.dir/build.make:15201: 
output/lib/libqgis_core.so.3.27.0] Fehler 1
make[1]: *** [CMakeFiles/Makefile2:4208: 
src/core/CMakeFiles/qgis_core.dir/all] Fehler 2
make: *** [Makefile:166: all] Fehler 2


and logs a lot of similar messages like:


/usr/bin/ld: CMakeFiles/qgis_core.dir/raster/qgsrasterfilewriter.cpp.o: 
in function `QgsRasterFileWriter::extensionsForFormat(QString const&)':
qgsrasterfilewriter.cpp:(.text+0x7614): undefined reference to 
`GDALGetDriverByName'
/usr/bin/ld: qgsrasterfilewriter.cpp:(.text+0x7640): undefined reference 
to `GDALGetMetadata'
/usr/bin/ld: qgsrasterfilewriter.cpp:(.text+0x765f): undefined reference 
to `CSLFetchBoolean'
/usr/bin/ld: qgsrasterfilewriter.cpp:(.text+0x7683): undefined reference 
to `GDALGetMetadataItem'


Could you give me a tipp?


Thank you!


Kind regards

Piet



From marco.lechner at fossgis.de  Mon Jun 27 07:52:58 2022
From: marco.lechner at fossgis.de (Marco Lechner - FOSSGIS e.V.)
Date: Mon, 27 Jun 2022 16:52:58 +0200
Subject: [QGIS-Developer] QGIS PLugin approvals
Message-ID: <7c81874e-d31f-abf5-91f8-bd4e9fde742a@fossgis.de>

Hi,

how long does it usually take for a plugin being approved? I uploaded 
two new experimental plugins a week ago, but neither received a question 
nor a approval notification

Marco

From johannes.kroeger at wheregroup.com  Mon Jun 27 08:02:39 2022
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Mon, 27 Jun 2022 17:02:39 +0200
Subject: [QGIS-Developer] Compile Master with Debian Bullseye
In-Reply-To: <a5a5a5e7-0ac7-87fd-94cf-88feab178f90@posteo.de>
References: <1e0241b1-1a6e-8613-77e6-ca6df445f66e@posteo.eu>
 <a5a5a5e7-0ac7-87fd-94cf-88feab178f90@posteo.de>
Message-ID: <6f23d43e-da7d-8f2e-dffb-042d0bc8e3ac@wheregroup.com>

Hey Piet,

are your dependencies all installed and up to date? If you tried to 
build before, try a `make clean` before trying again after updating. I 
don't know much about this, but maybe it points you towards a solution.

Cheers, Hannes

Am 27.06.22 um 10:25 schrieb Piet via QGIS-Developer:
> Dear List,
>
>
> I like to compile Qgis Master with Debian Bullseye following the 
> building guide https://github.com/qgis/QGIS/blob/master/INSTALL.md
>
> for Debian.
>
> "make" failed with this error:
>
>
> make[2]: *** [src/core/CMakeFiles/qgis_core.dir/build.make:15201: 
> output/lib/libqgis_core.so.3.27.0] Fehler 1
> make[1]: *** [CMakeFiles/Makefile2:4208: 
> src/core/CMakeFiles/qgis_core.dir/all] Fehler 2
> make: *** [Makefile:166: all] Fehler 2
>
>
> and logs a lot of similar messages like:
>
>
> /usr/bin/ld: 
> CMakeFiles/qgis_core.dir/raster/qgsrasterfilewriter.cpp.o: in function 
> `QgsRasterFileWriter::extensionsForFormat(QString const&)':
> qgsrasterfilewriter.cpp:(.text+0x7614): undefined reference to 
> `GDALGetDriverByName'
> /usr/bin/ld: qgsrasterfilewriter.cpp:(.text+0x7640): undefined 
> reference to `GDALGetMetadata'
> /usr/bin/ld: qgsrasterfilewriter.cpp:(.text+0x765f): undefined 
> reference to `CSLFetchBoolean'
> /usr/bin/ld: qgsrasterfilewriter.cpp:(.text+0x7683): undefined 
> reference to `GDALGetMetadataItem'
>
>
> Could you give me a tipp?
>
>
> Thank you!
>
>
> Kind regards
>
> Piet
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Schon gewusst?
In unserem Blog geben wir Tipps & Tricks zu Open-Source-GIS-Software
und berichten aus unserem Experten-Alltag:
https://wheregroup.com/blog/
---------------------------------------------

WhereGroup GmbH
Grevenweg 89
20537 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_0x840A4B843789797F.asc
Type: application/pgp-keys
Size: 2472 bytes
Desc: OpenPGP public key
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220627/e8acecd7/attachment.key>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 665 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220627/e8acecd7/attachment.sig>

From cavallini at faunalia.it  Mon Jun 27 08:05:45 2022
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 27 Jun 2022 17:05:45 +0200
Subject: [QGIS-Developer] QGIS PLugin approvals
In-Reply-To: <7c81874e-d31f-abf5-91f8-bd4e9fde742a@fossgis.de>
References: <7c81874e-d31f-abf5-91f8-bd4e9fde742a@fossgis.de>
Message-ID: <e14086f3-1a47-90cf-4323-cab5ff7c7451@faunalia.it>

Hi Marco,
being based on voluntary work, we cannot give reliable tming for the
analysis. Please point me out the links, I'll try to spare the time ASAP.
Cheers.

Il 27/06/22 16:52, Marco Lechner - FOSSGIS e.V. via QGIS-Developer ha
scritto:
> Hi,
> 
> how long does it usually take for a plugin being approved? I uploaded
> two new experimental plugins a week ago, but neither received a question
> nor a approval notification
> 
> Marco
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From adenaculture at gmail.com  Mon Jun 27 10:34:08 2022
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 27 Jun 2022 13:34:08 -0400
Subject: [QGIS-Developer] QGIS Density Analysis Plugin Update
Message-ID: <CABPxTToxaTTV9b2cXS726qShjxt9p0o12-SyPGX0sdC3_n9NoQ@mail.gmail.com>

I recently released the Density Analysis plugin and today I had a new
update that provides a polygon raster density analysis algorithm along with
a processing algorithm to style the raster with a heatmap.

https://plugins.qgis.org/plugins/densityanalysis/

I have a very narrow window in which I can make updates to this plugin. It
meets my needs, but perhaps you might see something I have missed. I am
being reassigned from QGIS development to other projects. Unfortunately, a
certain company, who shall not be named, has ultimately prevailed even
though it is really expensive and QGIS free. I will be allowed to fix bugs
in my plugins, but no new development.

If anyone has any comments or would like something done a little
differently with the Density Analysis plugin please let me know now. Next
month, unless it is a bug, I won't be allowed to make any changes.

It has been a pleasure working with the QGIS community. You are all great.
I will miss being able to spend full time working with QGIS. Hopefully, my
contributions have provided you with some useful tools.

https://plugins.qgis.org/plugins/author/C%2520Hamilton/

I wish you all the very best!

C Hamilton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220627/8e5bae6e/attachment.htm>

From mlechner at bfs.de  Tue Jun 28 00:23:59 2022
From: mlechner at bfs.de (Marco Lechner)
Date: Tue, 28 Jun 2022 07:23:59 +0000
Subject: [QGIS-Developer] QGIS PLugin approvals
In-Reply-To: <e14086f3-1a47-90cf-4323-cab5ff7c7451@faunalia.it>
References: <7c81874e-d31f-abf5-91f8-bd4e9fde742a@fossgis.de>
 <e14086f3-1a47-90cf-4323-cab5ff7c7451@faunalia.it>
Message-ID: <a110b56d7017411098c3b8519f1e6c83@bfs.de>

Hi Paolo,

I didn't want to push you, as I know about voluntary work and open source driven projects. Thanks for approving the plugins (or who ever actually did it) anyhow. It is now much easier for us to load radiological data from Ukraine into QGIS.

Best regards
Marco

-----Urspr?ngliche Nachricht-----
Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> Im Auftrag von Paolo Cavallini via QGIS-Developer
Gesendet: Montag, 27. Juni 2022 17:06
An: qgis-developer at lists.osgeo.org
Betreff: Re: [QGIS-Developer] QGIS PLugin approvals

Hi Marco,
being based on voluntary work, we cannot give reliable tming for the analysis. Please point me out the links, I'll try to spare the time ASAP.
Cheers.

Il 27/06/22 16:52, Marco Lechner - FOSSGIS e.V. via QGIS-Developer ha
scritto:
> Hi,
> 
> how long does it usually take for a plugin being approved? I uploaded 
> two new experimental plugins a week ago, but neither received a 
> question nor a approval notification
> 
> Marco
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

--
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Tue Jun 28 01:06:13 2022
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 28 Jun 2022 10:06:13 +0200
Subject: [QGIS-Developer] QGIS PLugin approvals
In-Reply-To: <a110b56d7017411098c3b8519f1e6c83@bfs.de>
References: <7c81874e-d31f-abf5-91f8-bd4e9fde742a@fossgis.de>
 <e14086f3-1a47-90cf-4323-cab5ff7c7451@faunalia.it>
 <a110b56d7017411098c3b8519f1e6c83@bfs.de>
Message-ID: <6a611c54-bdd6-9d16-b856-91969aa697aa@faunalia.it>

no problem, please do not hesitate letting us know when you need a hand.
Cheers.

Il 28/06/22 09:23, Marco Lechner via QGIS-Developer ha scritto:
> Hi Paolo,
> 
> I didn't want to push you, as I know about voluntary work and open source driven projects. Thanks for approving the plugins (or who ever actually did it) anyhow. It is now much easier for us to load radiological data from Ukraine into QGIS.
> 
> Best regards
> Marco
> 
> -----Urspr?ngliche Nachricht-----
> Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> Im Auftrag von Paolo Cavallini via QGIS-Developer
> Gesendet: Montag, 27. Juni 2022 17:06
> An: qgis-developer at lists.osgeo.org
> Betreff: Re: [QGIS-Developer] QGIS PLugin approvals
> 
> Hi Marco,
> being based on voluntary work, we cannot give reliable tming for the analysis. Please point me out the links, I'll try to spare the time ASAP.
> Cheers.
> 
> Il 27/06/22 16:52, Marco Lechner - FOSSGIS e.V. via QGIS-Developer ha
> scritto:
>> Hi,
>>
>> how long does it usually take for a plugin being approved? I uploaded 
>> two new experimental plugins a week ago, but neither received a 
>> question nor a approval notification
>>
>> Marco
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> --
> Paolo Cavallini
> www.faunalia.eu - QGIS.org
> training, support, development on QGIS, PostGIS and more _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From alroyliz0 at gmail.com  Tue Jun 28 04:00:09 2022
From: alroyliz0 at gmail.com (Alexis R.L.)
Date: Tue, 28 Jun 2022 07:00:09 -0400
Subject: [QGIS-Developer] Zip errors in artefact builds
Message-ID: <CAOM0XWBoWM0h+fVbyaCPM=OPxqm6CWoG3Qa7Pct22a6HD6iNXg@mail.gmail.com>

Greetings everyone,

I wanted to check if anyone had the same error or had a clue of the cause.

When using artefact build made from a qgis branch I always have issues when
opening files from the recent menu or the provided list. Zip always return
error 28 (or 90% of the time) but when I drag & drop a project in the app,
it opens perfectly fine.

I would assume the error might come from something strange with the zip
library. Tried to find error code and couldn't find them online.

Thanks,

Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/0c5e6197/attachment.htm>

From rdmailings at duif.net  Tue Jun 28 05:14:20 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 28 Jun 2022 14:14:20 +0200
Subject: [QGIS-Developer] Zip errors in artefact builds
In-Reply-To: <CAOM0XWBoWM0h+fVbyaCPM=OPxqm6CWoG3Qa7Pct22a6HD6iNXg@mail.gmail.com>
References: <CAOM0XWBoWM0h+fVbyaCPM=OPxqm6CWoG3Qa7Pct22a6HD6iNXg@mail.gmail.com>
Message-ID: <39b7d0ca-4ca2-9aee-67ca-44b1f3d0b1df@duif.net>

On 6/28/22 13:00, Alexis R.L. via QGIS-Developer wrote:
> Greetings everyone,
> 
> I wanted to check if anyone had the same error or had a clue of the cause.
> 
> When using artefact build made from a qgis branch I always have issues when opening files from the recent menu or the provided list. Zip always return error 28 (or 90% of the time) but when I drag & drop a project in the app, it opens perfectly fine.
> 
> I would assume the error might come from something strange with the zip library. Tried to find error code and couldn't find them online.

Hi Alex,

Which 'artefact' are you using, and on which OS?
(I think you mean the Windows build artefacts, but wanting to make that clear)

Regards,

Richard Duivenvoorde

From michael.egenolf at bezreg-koeln.nrw.de  Tue Jun 28 06:17:55 2022
From: michael.egenolf at bezreg-koeln.nrw.de (Egenolf, Michael)
Date: Tue, 28 Jun 2022 13:17:55 +0000
Subject: [QGIS-Developer] PyQGIS standalone Python Scripts with pycharm -
 Loading the processsing.run() fails/nonexisting
Message-ID: <12c7e993b8fc46e7900e5e0ff563ca0b@bezreg-koeln.nrw.de>

Dear QGIS-Develeopers,

I was trying to figure out how to get going with the processing modul in Pyqgis.
 It seems that I am not able to load the processing tool properly.

1)

I did make a bat file with the right pathes as followed:

@echo off
SET OSGEO4W_ROOT=C:\brk\programme\QGIS 3.16
call %OSGEO4W_ROOT%\bin\o4w_env.bat
call %OSGEO4W_ROOT%\apps\grass\grass78\etc\env.bat

path %path%;%OSGEO4W_ROOT%\apps\qgis-ltr\bin
path %path%;%OSGEO4W_ROOT%\apps\grass\grass78\lib
path %path%;C:\OSGeo4W\apps\qt5\bin
path %path%;C:\OSGeo4W\apps\Python37\Scripts

set PYTHONPATH=%PYTHONPATH%;%OSGEO4W_ROOT%\apps\qgis\python
set PYTHONHOME=%OSGEO4W_ROOT%\apps\Python37

start "Pycharm aware of QGIS" /B "C:\brk\programme\PyCharm-Community_2021.3\bin\pycharm64.exe" %*


2)

After that I am loading Pycharm and I am using  the following interpreter:

C:\brk\programme\QGIS 3.16\bin\python-qgis-ltr.bat

3)
This is my python code I want to run:


from qgis import processing

input = r'dein SHP Layer'
outputWithLayer = 'memory '  # kannst den Layer lokal in einem Ordner speichern z.B. C:\test\shpfile.shp


def buffer(input, outputWithLayer):
    buffer_result = processing.run("native:buffer", {
        'INPUT': input,
        'DISTANCE': 10000,
        # 'DISSOLVE': True,# Falls du alle Polygonen mergen willst
        'OUTPUT': outputWithLayer
    })

bufferresult = buffer(input, outputWithLayer)
print(bufferresult)

# result_layer = buffer_result['OUTPUT']
# layer = QgsVectorLayer(result_layer,"test","ogr")
# QgsProject.instance().addMapLayer(layer)



4) Result

Stil if I want to import processing as suggested everywhere there will always fail because the eather the modul is not importet or when I am using the buffer the run() method is not found:


"C:\brk\programme\QGIS 3.16\bin\python-qgis-ltr.bat" C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py
Traceback (most recent call last):
  File "C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py", line 13, in <module>
    import processing
ModuleNotFoundError: No module named 'processing'




Even after an intensive research on stackexchange/ GISstackexchange pages there is not clear solucion to this point or the solucion is not adapted to Python 3.
Does anybody has a good loading script or some hints on how to solve this problem?


Best regards
Michael Egenolf



From dmarteau at 3liz.com  Tue Jun 28 06:30:24 2022
From: dmarteau at 3liz.com (David Marteau)
Date: Tue, 28 Jun 2022 15:30:24 +0200
Subject: [QGIS-Developer] Qgis server: terrible performance with Qgis
 3.26
In-Reply-To: <a4d03745-846a-1364-e7aa-ef16c08ebd6e@3liz.com>
References: <e3f77616-b6df-c5da-1670-cda680ad4cd1@3liz.com>
 <CAB28AsicyK=Ndr8LvTP8jp0qZPTOfECZ_abdOFOe-oHs6BeHvA@mail.gmail.com>
 <2a04bb50-66bd-fb2a-2230-ef6b063423f1@3liz.com>
 <CAB28AshtyQst8fRFxuhBzicDi=+Lhqy6oBxPoCtgfavhs9e+CQ@mail.gmail.com>
 <5a055779-8982-ff06-0921-b3d495e48b84@3liz.com>
 <f1ae0fc1-5ad0-34d7-55e0-e084a12bb61d@spatialys.com>
 <6d227afe-7b69-f3b0-db2f-76af51d85dbc@3liz.com>
 <a4d03745-846a-1364-e7aa-ef16c08ebd6e@3liz.com>
Message-ID: <4c378374-2f7f-57d0-062f-9d912dfb7faa@3liz.com>

Hi,

 From bisect-like analysis, I have found the commit that introduces the 
loss of loading performance:

https://github.com/qgis/QGIS/commit/c6beb62216fcfbfe3ca64283c09117da53800a98

We need more investigation to understand exactly what is causing that 
regression.

David Marteau
www.3liz.com <http://www.3liz.com>

Le 21/06/2022 ? 14:45, David Marteau via QGIS-Developer a ?crit?:

> Hi,
>
> Here is a first analysis using QgsRuntimeProfiler outputs
>
> The project is the same in all tests and has been saved with Qgis 3.26.
> This is a first load in each case just after qgis init, so there 
> should be no caching involved.
>
> Output has been filtered to `projectload` profiler group and rows with 
> elapsed time > 0
>
> All builds are official builds and installed from qgis.org packages.
> Tests are run in Docker container with ubuntu 21.04
>
> Total time show a variance of +/- 25% on multiple runs.
>
> ## Qgis 3.26
>
> ### Flags
> * Qgis.ProjectReadFlag.TrustLayerMetadata
> * Qgis.ProjectReadFlag.DontLoad3DViews
> * Qgis.ProjectReadFlag.DontLoadProjectStyles
>
> projectload, Reading project file: 21.0 ms
> projectload, Creating auxiliary storage: 65.0 ms
> projectload, Reading properties: 19.0 ms
> projectload, Reading map layers: 14.0 ms
> -projectload, france_parts: 6.0 ms
> --projectload, Load layer source: 5.0 ms
> ---projectload, Create ogr provider: 3.0 ms
> -projectload, france_parts bordure: 4.0 ms
> --projectload, Load layer source: 4.0 ms
> ---projectload, Create ogr provider: 2.0 ms
> -projectload, france_parts tuil? en cache: 3.0 ms
> --projectload, Load layer source: 3.0 ms
> ---projectload, Create ogr provider: 1.0 ms
> projectload, Storing original layer properties: 2.0 ms
>
> Total time: 152.0 ms
>
> ## Qgis 3.24
>
> ### Flags
> * QgsProject.FlagTrustLayerMetadata
>
> projectload, Reading project file: 5.0 ms
> projectload, Reading properties: 4.0 ms
> projectload, Reading map layers: 4.0 ms
> -projectload, france_parts: 1.0 ms
> --projectload, Load layer source: 1.0 ms
> -projectload, france_parts bordure: 1.0 ms
> --projectload, Load layer source: 1.0 ms
> -projectload, france_parts tuil? en cache: 1.0 ms
> --projectload, Load layer source: 1.0 ms
> projectload, Storing original layer properties: 1.0 ms
> projectload, Updating interface: 1.0 ms
>
> Total time: 21.0 ms
>
> Some remarks:
>
> I Wonder why we have `Creating auxiliary storage` that takes 65.0 ms 
> in Qgis 3.26 and it does not appears in Qgis 3.24:
> I need to figure how auxiliary layers are loaded in Qgis 3.24 (are 
> they loaded lazily ?).
>
> The `Reading project file`, `Reading properties` and `Reading map 
> layers` sections are almost 3 to 4 times slower in Qgis 3.26.
>
> The loading of layers ares also slower in Qgis 3.26 compared to Qgis 3.24.
>
>
> Le 21/06/2022 ? 12:27, David Marteau a ?crit?:
>>
>>
>> May be I could use QgsRuntimeProfiler output in first place ?
>>
>> Le 20/06/2022 ? 18:55, Even Rouault a ?crit?:
>>>
>>> Use sysprof or just run under a debugger and interrupt regularly 
>>> should help you spot in which method(s) most time is spent
>>>
>>> Le 20/06/2022 ? 18:48, David Marteau via QGIS-Developer a ?crit?:
>>>>
>>>> I used the following test:
>>>>
>>>> readflags = Qgis.ProjectReadFlags() readflags |= 
>>>> Qgis.ProjectReadFlag.TrustLayerMetadata|Qgis.ProjectReadFlag.DontLoad3DViews|Qgis.ProjectReadFlag.DontLoadProjectStyles 
>>>> prj = QgsProject()%timeit -n 1 
>>>> prj.read(f"{datapath}/france_parts3_26.qgs",readflags)
>>>>
>>>> 105 ms ? 18.5 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>
>>>> This improve the result? but we are still much higher that the 
>>>> loading time of 3.24: 15ms compared to 105ms
>>>>
>>>>
>>>> Le 20/06/2022 ? 18:38, Nyall Dawson a ?crit?:
>>>>>
>>>>>
>>>>> On Mon, 20 June 2022, 11:42 pm David Marteau, <dmarteau at 3liz.com> 
>>>>> wrote:
>>>>>
>>>>>     Hi,
>>>>>
>>>>>     > You should set the other new read optimisation flags here --
>>>>>     see
>>>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>>>
>>>>>     These are already available also in 3.24 and we use the ?
>>>>>     `TrustLayerMetadata` in the above test. For server,? the other
>>>>>     flags are not applicable (Getprint requests need print layouts ).
>>>>>
>>>>>     So that mean we are comparing 3.24 to 3.26 with same level of
>>>>>     read optimisation and that does not change the fact that, for
>>>>>     that very same level of read optimisation, project's loading
>>>>>     is incredibly slower in 3.26.
>>>>>
>>>>>
>>>>> You'll need to set the new flags relating to skipping the 3d views 
>>>>> and project style loading in order to compare properly. Neither of 
>>>>> those things were occurring in 3.24, and both have an associated 
>>>>> cost. And neither are relevant for server.
>>>>>
>>>>> Nyall
>>>>>
>>>>>
>>>>>
>>>>>     Le 20/06/2022 ? 15:10, Nyall Dawson a ?crit?:
>>>>>>
>>>>>>
>>>>>>     On Mon, 20 June 2022, 9:37 pm David Marteau via
>>>>>>     QGIS-Developer, <qgis-developer at lists.osgeo.org> wrote:
>>>>>>
>>>>>>         Hi,
>>>>>>
>>>>>>         I have noticed a huge drop of performance while testing
>>>>>>         Qgis server with Qgis 3.26, from 10x to 30x slower as usual.
>>>>>>
>>>>>>         Trying to reduce the problem I have found a huge increase
>>>>>>         of time spend reading the project in 3.26 compared to 3.24.
>>>>>>
>>>>>>         Here some benchmark with very simple project from the
>>>>>>         test data set. Note: the project has been updated with
>>>>>>         qgis 3.26:
>>>>>>
>>>>>>         Qgis 3.24:
>>>>>>         ======
>>>>>>
>>>>>>         readflags = QgsProject.ReadFlags()readflags |=
>>>>>>         QgsProject.FlagTrustLayerMetadata
>>>>>>
>>>>>>         prj = QgsProject()
>>>>>>
>>>>>>         %timeit -n 1
>>>>>>         prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>>>>
>>>>>>         > 15.7 ms ? 205 ?s per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>>>
>>>>>>         Qgis 3.26:
>>>>>>         ======
>>>>>>
>>>>>>         readflags = QgsProject.ReadFlags() readflags |=
>>>>>>         QgsProject.FlagTrustLayerMetadata
>>>>>>
>>>>>>
>>>>>>     You should set the other new read optimisation flags here --
>>>>>>     see
>>>>>>     https://github.com/qgis/QGIS/blob/88ebb3f2f513dbce5a775f50e51ea0117f859c65/src/core/qgis.h#L1962
>>>>>>
>>>>>>     Nyall
>>>>>>
>>>>>>         ?prj = QgsProject()
>>>>>>
>>>>>>         %timeit -n 1
>>>>>>         prj.read(f"{datapath}/france_parts.qgs",readflags)
>>>>>>
>>>>>>         195 ms ? 44 ms per loop (mean ? std. dev. of 7 runs, 1 loop each)
>>>>>>
>>>>>>         There is a factor x10 between Qgis 3.24 et Qgis 3.26 for
>>>>>>         the exact same project.
>>>>>>         This has serious impact on requests: landing page catalog
>>>>>>         request time increased from approximatevely 110ms to more
>>>>>>         than 3.0s with our test data set.
>>>>>>
>>>>>>
>>>>>>         David Marteau
>>>>>>         www.3liz.com <http://www.3liz.com>
>>>>>>
>>>>>>         _______________________________________________
>>>>>>         QGIS-Developer mailing list
>>>>>>         QGIS-Developer at lists.osgeo.org
>>>>>>         List info:
>>>>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>         Unsubscribe:
>>>>>>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> -- 
>>> http://www.spatialys.com
>>> My software is free, but my time generally not.
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/4e8356c4/attachment-0001.htm>

From benjamin.jakimow at geo.hu-berlin.de  Tue Jun 28 06:37:53 2022
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Tue, 28 Jun 2022 15:37:53 +0200
Subject: [QGIS-Developer] PyQGIS standalone Python Scripts with pycharm
 - Loading the processsing.run() fails/nonexisting
In-Reply-To: <12c7e993b8fc46e7900e5e0ff563ca0b@bezreg-koeln.nrw.de>
References: <12c7e993b8fc46e7900e5e0ff563ca0b@bezreg-koeln.nrw.de>
Message-ID: <bc38343f-98df-3f69-62ae-2d8502d2cde9@geo.hu-berlin.de>

Hi Michael,

you need to add the python\plugins folder to the pythonpath as well, 
either in your batch file or PyCharm

Greetings,

Benjamin

Am 28/06/2022 um 15:17 schrieb Egenolf, Michael via QGIS-Developer:
> Dear QGIS-Develeopers,
>
> I was trying to figure out how to get going with the processing modul in Pyqgis.
>   It seems that I am not able to load the processing tool properly.
>
> 1)
>
> I did make a bat file with the right pathes as followed:
>
> @echo off
> SET OSGEO4W_ROOT=C:\brk\programme\QGIS 3.16
> call %OSGEO4W_ROOT%\bin\o4w_env.bat
> call %OSGEO4W_ROOT%\apps\grass\grass78\etc\env.bat
>
> path %path%;%OSGEO4W_ROOT%\apps\qgis-ltr\bin
> path %path%;%OSGEO4W_ROOT%\apps\grass\grass78\lib
> path %path%;C:\OSGeo4W\apps\qt5\bin
> path %path%;C:\OSGeo4W\apps\Python37\Scripts
>
> set PYTHONPATH=%PYTHONPATH%;%OSGEO4W_ROOT%\apps\qgis\python
> set PYTHONHOME=%OSGEO4W_ROOT%\apps\Python37
>
> start "Pycharm aware of QGIS" /B "C:\brk\programme\PyCharm-Community_2021.3\bin\pycharm64.exe" %*
>
>
> 2)
>
> After that I am loading Pycharm and I am using  the following interpreter:
>
> C:\brk\programme\QGIS 3.16\bin\python-qgis-ltr.bat
>
> 3)
> This is my python code I want to run:
>
>
> from qgis import processing
>
> input = r'dein SHP Layer'
> outputWithLayer = 'memory '  # kannst den Layer lokal in einem Ordner speichern z.B. C:\test\shpfile.shp
>
>
> def buffer(input, outputWithLayer):
>      buffer_result = processing.run("native:buffer", {
>          'INPUT': input,
>          'DISTANCE': 10000,
>          # 'DISSOLVE': True,# Falls du alle Polygonen mergen willst
>          'OUTPUT': outputWithLayer
>      })
>
> bufferresult = buffer(input, outputWithLayer)
> print(bufferresult)
>
> # result_layer = buffer_result['OUTPUT']
> # layer = QgsVectorLayer(result_layer,"test","ogr")
> # QgsProject.instance().addMapLayer(layer)
>
>
>
> 4) Result
>
> Stil if I want to import processing as suggested everywhere there will always fail because the eather the modul is not importet or when I am using the buffer the run() method is not found:
>
>
> "C:\brk\programme\QGIS 3.16\bin\python-qgis-ltr.bat" C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py
> Traceback (most recent call last):
>    File "C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py", line 13, in <module>
>      import processing
> ModuleNotFoundError: No module named 'processing'
>
>
>
>
> Even after an intensive research on stackexchange/ GISstackexchange pages there is not clear solucion to this point or the solucion is not adapted to Python 3.
> Does anybody has a good loading script or some hints on how to solve this problem?
>
>
> Best regards
> Michael Egenolf
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu Berlin

e-mail:benjamin.jakimow at geo.hu-berlin.de

phone:  +49 (0) 30 2093 6846
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'211
web:https://hu-berlin.de/eo-lab
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zRtAKFiY5K16hiJ6.png
Type: image/png
Size: 4367 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5457 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment.bin>

From variablestarlight at gmail.com  Tue Jun 28 08:50:12 2022
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Tue, 28 Jun 2022 17:50:12 +0200
Subject: [QGIS-Developer] Problems building QGIS 3.26 using Python 3.10.5
 and SIP 6.6.2
Message-ID: <5627189b-416e-2dbb-6ee8-ce49c41967d6@gmail.com>

Hi developers,

I am trying to understand some errors I get while building either QGIS 
3.26 or the latest main branch from GitHub in openSUSE Tumbleweed. I 
normally compile the latest source every few weeks and normally things 
go fine. Last few times I compiled Python was 3.8 and 3.9 and there were 
no problems. However, recently this distribution I use has made Python3 
= 3.10.5. SIP is 6.6.2. To my knowledge all other dependencies are 
satisfied. I wonder if the change in Python or SIP versions may have 
introduced some known incompatibility. Errors are listed below. Any hint 
is appreciated.

Thanks in advance

/H.

sip-build: An internal error occurred...
Traceback (most recent call last):
 ? File "/bin/sip-build", line 33, in <module>
 ??? sys.exit(load_entry_point('sip==6.6.2', 'console_scripts', 
'sip-build')())
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py", 
line 37, in main
 ??? handle_exception(e)
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py", 
line 81, in handle_exception
 ??? raise e
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py", 
line 34, in main
 ??? project.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py", line 
244, in build
 ??? self.builder.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 
48, in build
 ??? self._generate_bindings()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 
277, in _generate_bindings
 ??? buildable = bindings.generate()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 
166, in generate
 ??? spec, sip_files = parse(self.sip_file, SIP_VERSION, encoding,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py", 
line 35, in parse
 ??? protected_is_public, include_dirs, strict).parse(sip_file)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py", 
line 1507, in parse
 ??? self._parser.parse(self._read(sip_file, raw_sip_file),
 ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse
 ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)
 ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in 
parseopt
 ??? p.callable(pslice)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py", 
line 3029, in p_typedef_decl
 ??? instantiated = pm.instantiate_class_template(p, name_symbol,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py", 
line 1480, in instantiate_class_template
 ??? instantiate_class(p, symbol, fq_cpp_name, tmpl_names, proto_class,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 131, in instantiate_class
 ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class, template,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 235, in _instantiate_ctors
 ??? i_ctor.py_signature = _instantiate_signature(proto_ctor.py_signature,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 368, in _instantiate_signature
 ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 191, in _instantiate_argument
 ??? i_arg.default_value = [_instantiate_value(v, expansions)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 191, in <listcomp>
 ??? i_arg.default_value = [_instantiate_value(v, expansions)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 437, in _instantiate_value
 ??? i_name = ScopedName.parse(template_string(proto_name, expansions))
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py", 
line 201, in template_string
 ??? proto_str = proto_str.replace(name, value)
AttributeError: 'ScopedName' object has no attribute 'replace'
make[2]: *** 
[python/CMakeFiles/python_module_qgis__analysis.dir/build.make:853: 
python/analysis/build/_analysis/sip_analysispart0.cpp] Error 1
make[1]: *** [CMakeFiles/Makefile2:5790: 
python/CMakeFiles/python_module_qgis__analysis.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....


sip-build: An internal error occurred...
Traceback (most recent call last):
 ? File "/bin/sip-build", line 33, in <module>
 ??? sys.exit(load_entry_point('sip==6.6.2', 'console_scripts', 
'sip-build')())
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py", 
line 37, in main
 ??? handle_exception(e)
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py", 
line 81, in handle_exception
 ??? raise e
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py", 
line 34, in main
 ??? project.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py", line 
244, in build
 ??? self.builder.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 
48, in build
 ??? self._generate_bindings()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 
277, in _generate_bindings
 ??? buildable = bindings.generate()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 
166, in generate
 ??? spec, sip_files = parse(self.sip_file, SIP_VERSION, encoding,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py", 
line 35, in parse
 ??? protected_is_public, include_dirs, strict).parse(sip_file)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py", 
line 1507, in parse
 ??? self._parser.parse(self._read(sip_file, raw_sip_file),
 ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse
 ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)
 ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in 
parseopt
 ??? p.callable(pslice)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py", 
line 3029, in p_typedef_decl
 ??? instantiated = pm.instantiate_class_template(p, name_symbol,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py", 
line 1480, in instantiate_class_template
 ??? instantiate_class(p, symbol, fq_cpp_name, tmpl_names, proto_class,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 131, in instantiate_class
 ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class, template,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 235, in _instantiate_ctors
 ??? i_ctor.py_signature = _instantiate_signature(proto_ctor.py_signature,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 368, in _instantiate_signature
 ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 191, in _instantiate_argument
 ??? i_arg.default_value = [_instantiate_value(v, expansions)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 191, in <listcomp>
 ??? i_arg.default_value = [_instantiate_value(v, expansions)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 437, in _instantiate_value
 ??? i_name = ScopedName.parse(template_string(proto_name, expansions))
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py", 
line 201, in template_string
 ??? proto_str = proto_str.replace(name, value)
AttributeError: 'ScopedName' object has no attribute 'replace'
make[2]: *** 
[python/CMakeFiles/python_module_qgis__core.dir/build.make:804: 
python/core/build/_core/sip_corepart0.cpp] Error 1
make[1]: *** [CMakeFiles/Makefile2:5683: 
python/CMakeFiles/python_module_qgis__core.dir/all] Error 2


sip-build: An internal error occurred...
Traceback (most recent call last):
 ? File "/bin/sip-build", line 33, in <module>
 ??? sys.exit(load_entry_point('sip==6.6.2', 'console_scripts', 
'sip-build')())
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py", 
line 37, in main
 ??? handle_exception(e)
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py", 
line 81, in handle_exception
 ??? raise e
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py", 
line 34, in main
 ??? project.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py", line 
244, in build
 ??? self.builder.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 
48, in build
 ??? self._generate_bindings()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 
277, in _generate_bindings
 ??? buildable = bindings.generate()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 
166, in generate
 ??? spec, sip_files = parse(self.sip_file, SIP_VERSION, encoding,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py", 
line 35, in parse
 ??? protected_is_public, include_dirs, strict).parse(sip_file)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py", 
line 1507, in parse
 ??? self._parser.parse(self._read(sip_file, raw_sip_file),
 ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse
 ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)
 ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in 
parseopt
 ??? p.callable(pslice)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py", 
line 3029, in p_typedef_decl
 ??? instantiated = pm.instantiate_class_template(p, name_symbol,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py", 
line 1480, in instantiate_class_template
 ??? instantiate_class(p, symbol, fq_cpp_name, tmpl_names, proto_class,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 131, in instantiate_class
 ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class, template,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 235, in _instantiate_ctors
 ??? i_ctor.py_signature = _instantiate_signature(proto_ctor.py_signature,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 368, in _instantiate_signature
 ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 191, in _instantiate_argument
 ??? i_arg.default_value = [_instantiate_value(v, expansions)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 191, in <listcomp>
 ??? i_arg.default_value = [_instantiate_value(v, expansions)
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py", 
line 437, in _instantiate_value
 ??? i_name = ScopedName.parse(template_string(proto_name, expansions))
 ? File 
"/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py", 
line 201, in template_string
 ??? proto_str = proto_str.replace(name, value)
AttributeError: 'ScopedName' object has no attribute 'replace'
make[2]: *** 
[python/CMakeFiles/python_module_qgis__gui.dir/build.make:1253: 
python/gui/build/_gui/sip_guipart0.cpp] Error 1
make[1]: *** [CMakeFiles/Makefile2:5737: 
python/CMakeFiles/python_module_qgis__gui.dir/all] Error 2
make: *** [Makefile:156: all] Error 2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/43e5e8ef/attachment-0001.htm>

From jacky.volpes at oslandia.com  Tue Jun 28 10:34:05 2022
From: jacky.volpes at oslandia.com (Jacky Volpes)
Date: Tue, 28 Jun 2022 19:34:05 +0200
Subject: [QGIS-Developer] Feature count for DB provider.
In-Reply-To: <MRXP264MB0261BE45B9A0BEB870847B16F3B69@MRXP264MB0261.FRAP264.PROD.OUTLOOK.COM>
References: <MRXP264MB0261C48DA8851E90A5FC3E6DF3B79@MRXP264MB0261.FRAP264.PROD.OUTLOOK.COM>
 <CABgOYCcaGA+mUJOqDUSFGk5qYsbRyFX1oCFhN+uMKuYGfGe1Gg@mail.gmail.com>
 <MRXP264MB0261BE45B9A0BEB870847B16F3B69@MRXP264MB0261.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <6d25bce7-7689-d84f-e608-d41ea81240f9@oslandia.com>

Hello R?mi,

The function you refer to
https://github.com/qgis/QGIS/blob/master/src/core/vector/qgsvectorlayerfeaturecounter.cpp#L76-L90
is only called when the feature count must be done for the symbols (for 
instance when a categorized symbology is used, then QGIS does not use 
estimated metadata, and the count for each symbol is then evaluated and 
displayed).

Normally there is no SELECT count(*) FROM or SELECT * FROM when 
estimated metadata is used.

Regards,

-- 
Jacky Volpes

Ing?nieur SIG - Oslandia


Le 26/06/2022 ? 20:20, R?mi Desgrange via QGIS-Developer a ?crit?:
>
> Thanks Regis.
>
> I tried with an existing project, and with no project. The information 
> of the layers is:
>
> service='mycomp_prod' sslmode=require key='gid' estimatedmetadata=true 
> srid=27572 type=Point checkPrimaryKeyUnicity='1' table="public"."mylayer"
>
> with service in `.pg_service.conf` :
>
> [mycomp_prod]
>
> user=rd
>
> sslmode=require
>
> host=gis.mycomp.fr
>
> port=5432
>
> dbname=mycomp
>
> (don?t blame me for the 27572 OK ?)
>
> I think I?ll open an issue because it _/seems/_ to do a SELECT 
> count(*) FROM mylayer + SELECT * FROM mylayer until all features have 
> been fetched. In my example, I have a 11M Points layer so it takes a 
> while ?.
>
> *From: *R?gis Haubourg <regis.haubourg at gmail.com>
> *Date: *Saturday, 25 June 2022 at 12:54
> *To: *R?mi Desgrange <remi.desgrange at ielo.net>
> *Cc: *QGIS Developers List <qgis-developer at lists.osgeo.org>
> *Subject: *Re: [QGIS-Developer] Feature count for DB provider.
>
> Hi R?my, There had been a lot of work for postGIS and oracle 
> providers. A count(*) might be really expensive for big tables, so 
> there are options to use db statistics instead of real count. I bet 
> the loop you point out occurs only in fallback situations but is not 
> the main case.
>
> One is here for instance by there are numerous PRs like this one 
> https://github.com/qgis/QGIS/pull/37619
>
> In think @troopa81 has a clear view of the current state.
>
> all the best
>
> R?gis
>
> Le sam. 25 juin 2022 ? 10:38, R?mi Desgrange via QGIS-Developer 
> <qgis-developer at lists.osgeo.org> a ?crit?:
>
>     Hi,
>
>     Just launched the new QGIS 3.24, and tests the SQL debugger, I
>     just found out that the ?feature count? does a while loop on all
>     features in the layer to count.
>
>     While it?s probably necessary for shapefiles or stuff like that,
>     it appears suboptimal for databases access. I found this part in
>     the code that looks like to be responsible for the feature counts,
>     https://github.com/qgis/QGIS/blob/master/src/core/vector/qgsvectorlayerfeaturecounter.cpp#L76-L90
>
>
>     Do you think I could make a special case for database-based
>     provider (geopackage, postgres/oracle/mysql/etc?) that launch a
>     ?SELECT count(*) FROM table? instead of looping on all features.
>
>     Thanks.
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/26608db4/attachment.htm>

From alroyliz0 at gmail.com  Tue Jun 28 13:28:15 2022
From: alroyliz0 at gmail.com (Alexis R.L.)
Date: Tue, 28 Jun 2022 16:28:15 -0400
Subject: [QGIS-Developer] Zip errors in artefact builds
In-Reply-To: <39b7d0ca-4ca2-9aee-67ca-44b1f3d0b1df@duif.net>
References: <CAOM0XWBoWM0h+fVbyaCPM=OPxqm6CWoG3Qa7Pct22a6HD6iNXg@mail.gmail.com>
 <39b7d0ca-4ca2-9aee-67ca-44b1f3d0b1df@duif.net>
Message-ID: <CAOM0XWD=H72geW8H8sOJLq5VRYY9gKpZr+aVf3vsy7cgtG6WJg@mail.gmail.com>

Greetings Richard,

I'm referring to the ones made by the MingW64 windows build, apologies for
not clarifying beforehand.

I use the one in my own fork to make custom build but nothing that could
affect the zip handling. Though I recall having a similar issue with the
ones on the official repo. I'm not sure if if's something related to a bad
library associated with the build. I'll try to dig deeper.

Alex

Le mar. 28 juin 2022 ? 08:14, Richard Duivenvoorde via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> On 6/28/22 13:00, Alexis R.L. via QGIS-Developer wrote:
> > Greetings everyone,
> >
> > I wanted to check if anyone had the same error or had a clue of the
> cause.
> >
> > When using artefact build made from a qgis branch I always have issues
> when opening files from the recent menu or the provided list. Zip always
> return error 28 (or 90% of the time) but when I drag & drop a project in
> the app, it opens perfectly fine.
> >
> > I would assume the error might come from something strange with the zip
> library. Tried to find error code and couldn't find them online.
>
> Hi Alex,
>
> Which 'artefact' are you using, and on which OS?
> (I think you mean the Windows build artefacts, but wanting to make that
> clear)
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/f7c3061b/attachment.htm>

From michael.egenolf at bezreg-koeln.nrw.de  Tue Jun 28 22:14:59 2022
From: michael.egenolf at bezreg-koeln.nrw.de (Egenolf, Michael)
Date: Wed, 29 Jun 2022 05:14:59 +0000
Subject: [QGIS-Developer] QGIS-Developer Digest, Vol 200, Issue 33
In-Reply-To: <mailman.15435.1656431417.32175.qgis-developer@lists.osgeo.org>
References: <mailman.15435.1656431417.32175.qgis-developer@lists.osgeo.org>
Message-ID: <96f4c7a19f864d69884a80bc78db7c55@bezreg-koeln.nrw.de>

Thank you Benjamin,

I addapted the batch file with the python path:

set PYTHONPATH=%PYTHONPATH%;%OSGEO4W_ROOT%\apps\qgis\python;%OSGEO4W_ROOT%\apps\qgis-ltr\python\plugins

I hope this is correct? At least the geoprocessing libary is loading...

Now I am geeting the following error:

1) Code:

import qgis.core
from qgis import processing


#### try sys.path.extend()

input = r'C:\test\input.shp'
outputWithLayer = r'C:\test\result.shp '  # kannst den Layer lokal in einem Ordner speichern z.B. C:\test\shpfile.shp



def buffer(input, outputWithLayer):
    buffer_result = processing.run("native:buffer", {
        'INPUT': input,
        'DISTANCE': 10000,
        # 'DISSOLVE': True,# Falls du alle Polygonen mergen willst
        'OUTPUT': outputWithLayer
    })


bufferresult = buffer(input, outputWithLayer)

print(bufferresult)

2) result

Traceback (most recent call last):
  File "C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py", line 21, in <module>
    bufferresult = buffer(input, outputWithLayer)
  File "C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py", line 13, in buffer
    buffer_result = processing.run("native:buffer", {
AttributeError: module 'qgis.processing' has no attribute 'run'

Process finished with exit code 1

Where can I find the run method or how do I use the native:buffer otherwise

Regards
Michael

-----Urspr?ngliche Nachricht-----
Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> Im Auftrag von qgis-developer-request at lists.osgeo.org
Gesendet: Dienstag, 28. Juni 2022 17:50
An: qgis-developer at lists.osgeo.org
Betreff: QGIS-Developer Digest, Vol 200, Issue 33

Send QGIS-Developer mailing list submissions to
	qgis-developer at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.osgeo.org/mailman/listinfo/qgis-developer
or, via email, send a message with subject or body 'help' to
	qgis-developer-request at lists.osgeo.org

You can reach the person managing the list at
	qgis-developer-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific than "Re: Contents of QGIS-Developer digest..."


Today's Topics:

   1. Re: PyQGIS standalone Python Scripts with pycharm - Loading
      the processsing.run() fails/nonexisting (Benjamin Jakimow)
   2. Problems building QGIS 3.26 using Python 3.10.5 and SIP 6.6.2
      (Hern?n De Angelis)


----------------------------------------------------------------------

Message: 1
Date: Tue, 28 Jun 2022 15:37:53 +0200
From: Benjamin Jakimow <benjamin.jakimow at geo.hu-berlin.de>
To: qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] PyQGIS standalone Python Scripts with
	pycharm - Loading the processsing.run() fails/nonexisting
Message-ID: <bc38343f-98df-3f69-62ae-2d8502d2cde9 at geo.hu-berlin.de>
Content-Type: text/plain; charset="utf-8"; Format="flowed"

Hi Michael,

you need to add the python\plugins folder to the pythonpath as well, either in your batch file or PyCharm

Greetings,

Benjamin

Am 28/06/2022 um 15:17 schrieb Egenolf, Michael via QGIS-Developer:
> Dear QGIS-Develeopers,
>
> I was trying to figure out how to get going with the processing modul in Pyqgis.
>   It seems that I am not able to load the processing tool properly.
>
> 1)
>
> I did make a bat file with the right pathes as followed:
>
> @echo off
> SET OSGEO4W_ROOT=C:\brk\programme\QGIS 3.16 call 
> %OSGEO4W_ROOT%\bin\o4w_env.bat call 
> %OSGEO4W_ROOT%\apps\grass\grass78\etc\env.bat
>
> path %path%;%OSGEO4W_ROOT%\apps\qgis-ltr\bin
> path %path%;%OSGEO4W_ROOT%\apps\grass\grass78\lib
> path %path%;C:\OSGeo4W\apps\qt5\bin
> path %path%;C:\OSGeo4W\apps\Python37\Scripts
>
> set PYTHONPATH=%PYTHONPATH%;%OSGEO4W_ROOT%\apps\qgis\python
> set PYTHONHOME=%OSGEO4W_ROOT%\apps\Python37
>
> start "Pycharm aware of QGIS" /B 
> "C:\brk\programme\PyCharm-Community_2021.3\bin\pycharm64.exe" %*
>
>
> 2)
>
> After that I am loading Pycharm and I am using  the following interpreter:
>
> C:\brk\programme\QGIS 3.16\bin\python-qgis-ltr.bat
>
> 3)
> This is my python code I want to run:
>
>
> from qgis import processing
>
> input = r'dein SHP Layer'
> outputWithLayer = 'memory '  # kannst den Layer lokal in einem Ordner 
> speichern z.B. C:\test\shpfile.shp
>
>
> def buffer(input, outputWithLayer):
>      buffer_result = processing.run("native:buffer", {
>          'INPUT': input,
>          'DISTANCE': 10000,
>          # 'DISSOLVE': True,# Falls du alle Polygonen mergen willst
>          'OUTPUT': outputWithLayer
>      })
>
> bufferresult = buffer(input, outputWithLayer)
> print(bufferresult)
>
> # result_layer = buffer_result['OUTPUT'] # layer = 
> QgsVectorLayer(result_layer,"test","ogr")
> # QgsProject.instance().addMapLayer(layer)
>
>
>
> 4) Result
>
> Stil if I want to import processing as suggested everywhere there will always fail because the eather the modul is not importet or when I am using the buffer the run() method is not found:
>
>
> "C:\brk\programme\QGIS 3.16\bin\python-qgis-ltr.bat" 
> C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/T
> est_Pyqt.py
> Traceback (most recent call last):
>    File "C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py", line 13, in <module>
>      import processing
> ModuleNotFoundError: No module named 'processing'
>
>
>
>
> Even after an intensive research on stackexchange/ GISstackexchange pages there is not clear solucion to this point or the solucion is not adapted to Python 3.
> Does anybody has a good loading script or some hints on how to solve this problem?
>
>
> Best regards
> Michael Egenolf
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

--
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu Berlin

e-mail:benjamin.jakimow at geo.hu-berlin.de

phone:  +49 (0) 30 2093 6846
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'211
web:https://smex-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fhu%2dberlin.de%2feo%2dlab&umid=fc901b20-44de-4224-b713-e1d99e20eb3c&auth=c1c9dbefcde83ed9c8881a36adbd110cc362e9ce-344615b2f04abba6045c7a9855d90df37e53bdc2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: zRtAKFiY5K16hiJ6.png
Type: image/png
Size: 4367 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5457 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment-0001.bin>

------------------------------

Message: 2
Date: Tue, 28 Jun 2022 17:50:12 +0200
From: Hern?n De Angelis <variablestarlight at gmail.com>
To: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: [QGIS-Developer] Problems building QGIS 3.26 using Python
	3.10.5 and SIP 6.6.2
Message-ID: <5627189b-416e-2dbb-6ee8-ce49c41967d6 at gmail.com>
Content-Type: text/plain; charset="utf-8"; Format="flowed"

Hi developers,

I am trying to understand some errors I get while building either QGIS
3.26 or the latest main branch from GitHub in openSUSE Tumbleweed. I normally compile the latest source every few weeks and normally things go fine. Last few times I compiled Python was 3.8 and 3.9 and there were no problems. However, recently this distribution I use has made Python3 = 3.10.5. SIP is 6.6.2. To my knowledge all other dependencies are satisfied. I wonder if the change in Python or SIP versions may have introduced some known incompatibility. Errors are listed below. Any hint is appreciated.

Thanks in advance

/H.

sip-build: An internal error occurred...
Traceback (most recent call last):
 ? File "/bin/sip-build", line 33, in <module>  ??? sys.exit(load_entry_point('sip==6.6.2', 'console_scripts',
'sip-build')())
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
line 37, in main
 ??? handle_exception(e)
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py",
line 81, in handle_exception
 ??? raise e
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
line 34, in main
 ??? project.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py", line 244, in build  ??? self.builder.build()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 48, in build  ??? self._generate_bindings()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 277, in _generate_bindings  ??? buildable = bindings.generate()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 166, in generate  ??? spec, sip_files = parse(self.sip_file, SIP_VERSION, encoding,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py",
line 35, in parse
 ??? protected_is_public, include_dirs, strict).parse(sip_file)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
line 1507, in parse
 ??? self._parser.parse(self._read(sip_file, raw_sip_file),  ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse  ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)  ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in parseopt  ??? p.callable(pslice)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py",
line 3029, in p_typedef_decl
 ??? instantiated = pm.instantiate_class_template(p, name_symbol,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
line 1480, in instantiate_class_template  ??? instantiate_class(p, symbol, fq_cpp_name, tmpl_names, proto_class,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 131, in instantiate_class
 ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class, template,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 235, in _instantiate_ctors
 ??? i_ctor.py_signature = _instantiate_signature(proto_ctor.py_signature,
 ? File
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 368, in _instantiate_signature
 ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 191, in _instantiate_argument
 ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 191, in <listcomp>
 ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 437, in _instantiate_value
 ??? i_name = ScopedName.parse(template_string(proto_name, expansions))  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py",
line 201, in template_string
 ??? proto_str = proto_str.replace(name, value)
AttributeError: 'ScopedName' object has no attribute 'replace'
make[2]: ***
[python/CMakeFiles/python_module_qgis__analysis.dir/build.make:853: 
python/analysis/build/_analysis/sip_analysispart0.cpp] Error 1
make[1]: *** [CMakeFiles/Makefile2:5790: 
python/CMakeFiles/python_module_qgis__analysis.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....


sip-build: An internal error occurred...
Traceback (most recent call last):
 ? File "/bin/sip-build", line 33, in <module>  ??? sys.exit(load_entry_point('sip==6.6.2', 'console_scripts',
'sip-build')())
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
line 37, in main
 ??? handle_exception(e)
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py",
line 81, in handle_exception
 ??? raise e
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
line 34, in main
 ??? project.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py", line 244, in build  ??? self.builder.build()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 48, in build  ??? self._generate_bindings()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 277, in _generate_bindings  ??? buildable = bindings.generate()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 166, in generate  ??? spec, sip_files = parse(self.sip_file, SIP_VERSION, encoding,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py",
line 35, in parse
 ??? protected_is_public, include_dirs, strict).parse(sip_file)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
line 1507, in parse
 ??? self._parser.parse(self._read(sip_file, raw_sip_file),  ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse  ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)  ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in parseopt  ??? p.callable(pslice)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py",
line 3029, in p_typedef_decl
 ??? instantiated = pm.instantiate_class_template(p, name_symbol,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
line 1480, in instantiate_class_template  ??? instantiate_class(p, symbol, fq_cpp_name, tmpl_names, proto_class,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 131, in instantiate_class
 ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class, template,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 235, in _instantiate_ctors
 ??? i_ctor.py_signature = _instantiate_signature(proto_ctor.py_signature,
 ? File
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 368, in _instantiate_signature
 ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 191, in _instantiate_argument
 ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 191, in <listcomp>
 ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 437, in _instantiate_value
 ??? i_name = ScopedName.parse(template_string(proto_name, expansions))  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py",
line 201, in template_string
 ??? proto_str = proto_str.replace(name, value)
AttributeError: 'ScopedName' object has no attribute 'replace'
make[2]: ***
[python/CMakeFiles/python_module_qgis__core.dir/build.make:804: 
python/core/build/_core/sip_corepart0.cpp] Error 1
make[1]: *** [CMakeFiles/Makefile2:5683: 
python/CMakeFiles/python_module_qgis__core.dir/all] Error 2


sip-build: An internal error occurred...
Traceback (most recent call last):
 ? File "/bin/sip-build", line 33, in <module>  ??? sys.exit(load_entry_point('sip==6.6.2', 'console_scripts',
'sip-build')())
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
line 37, in main
 ??? handle_exception(e)
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py",
line 81, in handle_exception
 ??? raise e
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
line 34, in main
 ??? project.build()
 ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py", line 244, in build  ??? self.builder.build()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 48, in build  ??? self._generate_bindings()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 277, in _generate_bindings  ??? buildable = bindings.generate()  ? File "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 166, in generate  ??? spec, sip_files = parse(self.sip_file, SIP_VERSION, encoding,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py",
line 35, in parse
 ??? protected_is_public, include_dirs, strict).parse(sip_file)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
line 1507, in parse
 ??? self._parser.parse(self._read(sip_file, raw_sip_file),  ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse  ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)  ? File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in parseopt  ??? p.callable(pslice)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py",
line 3029, in p_typedef_decl
 ??? instantiated = pm.instantiate_class_template(p, name_symbol,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
line 1480, in instantiate_class_template  ??? instantiate_class(p, symbol, fq_cpp_name, tmpl_names, proto_class,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 131, in instantiate_class
 ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class, template,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 235, in _instantiate_ctors
 ??? i_ctor.py_signature = _instantiate_signature(proto_ctor.py_signature,
 ? File
"/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 368, in _instantiate_signature
 ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 191, in _instantiate_argument
 ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 191, in <listcomp>
 ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
line 437, in _instantiate_value
 ??? i_name = ScopedName.parse(template_string(proto_name, expansions))  ? File "/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py",
line 201, in template_string
 ??? proto_str = proto_str.replace(name, value)
AttributeError: 'ScopedName' object has no attribute 'replace'
make[2]: ***
[python/CMakeFiles/python_module_qgis__gui.dir/build.make:1253: 
python/gui/build/_gui/sip_guipart0.cpp] Error 1
make[1]: *** [CMakeFiles/Makefile2:5737: 
python/CMakeFiles/python_module_qgis__gui.dir/all] Error 2
make: *** [Makefile:156: all] Error 2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/43e5e8ef/attachment.htm>

------------------------------

Subject: Digest Footer

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


------------------------------

End of QGIS-Developer Digest, Vol 200, Issue 33
***********************************************

From benjamin.jakimow at geo.hu-berlin.de  Wed Jun 29 00:54:10 2022
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Wed, 29 Jun 2022 09:54:10 +0200
Subject: [QGIS-Developer] QGIS-Developer Digest, Vol 200, Issue 33
In-Reply-To: <96f4c7a19f864d69884a80bc78db7c55@bezreg-koeln.nrw.de>
References: <mailman.15435.1656431417.32175.qgis-developer@lists.osgeo.org>
 <96f4c7a19f864d69884a80bc78db7c55@bezreg-koeln.nrw.de>
Message-ID: <9f4cbabed8fe12b3848f58ce90e45ee3@geo.hu-berlin.de>

Hi Michael,

call "import processing" before "import qgis.processing"

Calling "import processing" will monkey-patch the request "run(...)" to 
qgis.processing.
This is automatically done when starting the Desktop QGIS.

Greetings,
Benjamin




On 2022-06-29 07:14, Egenolf, Michael via QGIS-Developer wrote:
> Thank you Benjamin,
> 
> I addapted the batch file with the python path:
> 
> set
> PYTHONPATH=%PYTHONPATH%;%OSGEO4W_ROOT%\apps\qgis\python;%OSGEO4W_ROOT%\apps\qgis-ltr\python\plugins
> 
> I hope this is correct? At least the geoprocessing libary is loading...
> 
> Now I am geeting the following error:
> 
> 1) Code:
> 
> import qgis.core
> from qgis import processing
> 
> 
> #### try sys.path.extend()
> 
> input = r'C:\test\input.shp'
> outputWithLayer = r'C:\test\result.shp '  # kannst den Layer lokal in
> einem Ordner speichern z.B. C:\test\shpfile.shp
> 
> 
> 
> def buffer(input, outputWithLayer):
>     buffer_result = processing.run("native:buffer", {
>         'INPUT': input,
>         'DISTANCE': 10000,
>         # 'DISSOLVE': True,# Falls du alle Polygonen mergen willst
>         'OUTPUT': outputWithLayer
>     })
> 
> 
> bufferresult = buffer(input, outputWithLayer)
> 
> print(bufferresult)
> 
> 2) result
> 
> Traceback (most recent call last):
>   File
> "C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py",
> line 21, in <module>
>     bufferresult = buffer(input, outputWithLayer)
>   File
> "C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py",
> line 13, in buffer
>     buffer_result = processing.run("native:buffer", {
> AttributeError: module 'qgis.processing' has no attribute 'run'
> 
> Process finished with exit code 1
> 
> Where can I find the run method or how do I use the native:buffer 
> otherwise
> 
> Regards
> Michael
> 
> -----Urspr?ngliche Nachricht-----
> Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> Im
> Auftrag von qgis-developer-request at lists.osgeo.org
> Gesendet: Dienstag, 28. Juni 2022 17:50
> An: qgis-developer at lists.osgeo.org
> Betreff: QGIS-Developer Digest, Vol 200, Issue 33
> 
> Send QGIS-Developer mailing list submissions to
> 	qgis-developer at lists.osgeo.org
> 
> To subscribe or unsubscribe via the World Wide Web, visit
> 	https://lists.osgeo.org/mailman/listinfo/qgis-developer
> or, via email, send a message with subject or body 'help' to
> 	qgis-developer-request at lists.osgeo.org
> 
> You can reach the person managing the list at
> 	qgis-developer-owner at lists.osgeo.org
> 
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of QGIS-Developer digest..."
> 
> 
> Today's Topics:
> 
>    1. Re: PyQGIS standalone Python Scripts with pycharm - Loading
>       the processsing.run() fails/nonexisting (Benjamin Jakimow)
>    2. Problems building QGIS 3.26 using Python 3.10.5 and SIP 6.6.2
>       (Hern?n De Angelis)
> 
> 
> ----------------------------------------------------------------------
> 
> Message: 1
> Date: Tue, 28 Jun 2022 15:37:53 +0200
> From: Benjamin Jakimow <benjamin.jakimow at geo.hu-berlin.de>
> To: qgis-developer at lists.osgeo.org
> Subject: Re: [QGIS-Developer] PyQGIS standalone Python Scripts with
> 	pycharm - Loading the processsing.run() fails/nonexisting
> Message-ID: <bc38343f-98df-3f69-62ae-2d8502d2cde9 at geo.hu-berlin.de>
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
> 
> Hi Michael,
> 
> you need to add the python\plugins folder to the pythonpath as well,
> either in your batch file or PyCharm
> 
> Greetings,
> 
> Benjamin
> 
> Am 28/06/2022 um 15:17 schrieb Egenolf, Michael via QGIS-Developer:
>> Dear QGIS-Develeopers,
>> 
>> I was trying to figure out how to get going with the processing modul 
>> in Pyqgis.
>>   It seems that I am not able to load the processing tool properly.
>> 
>> 1)
>> 
>> I did make a bat file with the right pathes as followed:
>> 
>> @echo off
>> SET OSGEO4W_ROOT=C:\brk\programme\QGIS 3.16 call
>> %OSGEO4W_ROOT%\bin\o4w_env.bat call
>> %OSGEO4W_ROOT%\apps\grass\grass78\etc\env.bat
>> 
>> path %path%;%OSGEO4W_ROOT%\apps\qgis-ltr\bin
>> path %path%;%OSGEO4W_ROOT%\apps\grass\grass78\lib
>> path %path%;C:\OSGeo4W\apps\qt5\bin
>> path %path%;C:\OSGeo4W\apps\Python37\Scripts
>> 
>> set PYTHONPATH=%PYTHONPATH%;%OSGEO4W_ROOT%\apps\qgis\python
>> set PYTHONHOME=%OSGEO4W_ROOT%\apps\Python37
>> 
>> start "Pycharm aware of QGIS" /B
>> "C:\brk\programme\PyCharm-Community_2021.3\bin\pycharm64.exe" %*
>> 
>> 
>> 2)
>> 
>> After that I am loading Pycharm and I am using  the following 
>> interpreter:
>> 
>> C:\brk\programme\QGIS 3.16\bin\python-qgis-ltr.bat
>> 
>> 3)
>> This is my python code I want to run:
>> 
>> 
>> from qgis import processing
>> 
>> input = r'dein SHP Layer'
>> outputWithLayer = 'memory '  # kannst den Layer lokal in einem Ordner
>> speichern z.B. C:\test\shpfile.shp
>> 
>> 
>> def buffer(input, outputWithLayer):
>>      buffer_result = processing.run("native:buffer", {
>>          'INPUT': input,
>>          'DISTANCE': 10000,
>>          # 'DISSOLVE': True,# Falls du alle Polygonen mergen willst
>>          'OUTPUT': outputWithLayer
>>      })
>> 
>> bufferresult = buffer(input, outputWithLayer)
>> print(bufferresult)
>> 
>> # result_layer = buffer_result['OUTPUT'] # layer =
>> QgsVectorLayer(result_layer,"test","ogr")
>> # QgsProject.instance().addMapLayer(layer)
>> 
>> 
>> 
>> 4) Result
>> 
>> Stil if I want to import processing as suggested everywhere there will 
>> always fail because the eather the modul is not importet or when I am 
>> using the buffer the run() method is not found:
>> 
>> 
>> "C:\brk\programme\QGIS 3.16\bin\python-qgis-ltr.bat"
>> C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/T
>> est_Pyqt.py
>> Traceback (most recent call last):
>>    File 
>> "C:/Users/Egenolf/AppData/Roaming/JetBrains/PyCharmCE2021.3/scratches/Test_Pyqt.py", 
>> line 13, in <module>
>>      import processing
>> ModuleNotFoundError: No module named 'processing'
>> 
>> 
>> 
>> 
>> Even after an intensive research on stackexchange/ GISstackexchange 
>> pages there is not clear solucion to this point or the solucion is not 
>> adapted to Python 3.
>> Does anybody has a good loading script or some hints on how to solve 
>> this problem?
>> 
>> 
>> Best regards
>> Michael Egenolf
>> 
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> --
> Benjamin Jakimow, Doctoral Researcher
> Earth Observation Lab | Geography Department | Humboldt-Universit?t zu 
> Berlin
> 
> e-mail:benjamin.jakimow at geo.hu-berlin.de
> 
> phone:  +49 (0) 30 2093 6846
> mobile: +49 (0) 157 5656 8477
> fax:    +49 (0) 30 2093 6848
> mail:   Unter den Linden 6 | 10099 Berlin | Germany
> room: 2'211
> web:https://smex-ctp.trendmicro.com:443/wis/clicktime/v1/query?url=https%3a%2f%2fhu%2dberlin.de%2feo%2dlab&umid=fc901b20-44de-4224-b713-e1d99e20eb3c&auth=c1c9dbefcde83ed9c8881a36adbd110cc362e9ce-344615b2f04abba6045c7a9855d90df37e53bdc2
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment-0001.htm>
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: zRtAKFiY5K16hiJ6.png
> Type: image/png
> Size: 4367 bytes
> Desc: not available
> URL:
> <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment-0001.png>
> -------------- next part --------------
> A non-text attachment was scrubbed...
> Name: smime.p7s
> Type: application/pkcs7-signature
> Size: 5457 bytes
> Desc: S/MIME Cryptographic Signature
> URL:
> <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/a9d66d06/attachment-0001.bin>
> 
> ------------------------------
> 
> Message: 2
> Date: Tue, 28 Jun 2022 17:50:12 +0200
> From: Hern?n De Angelis <variablestarlight at gmail.com>
> To: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: [QGIS-Developer] Problems building QGIS 3.26 using Python
> 	3.10.5 and SIP 6.6.2
> Message-ID: <5627189b-416e-2dbb-6ee8-ce49c41967d6 at gmail.com>
> Content-Type: text/plain; charset="utf-8"; Format="flowed"
> 
> Hi developers,
> 
> I am trying to understand some errors I get while building either QGIS
> 3.26 or the latest main branch from GitHub in openSUSE Tumbleweed. I
> normally compile the latest source every few weeks and normally things
> go fine. Last few times I compiled Python was 3.8 and 3.9 and there
> were no problems. However, recently this distribution I use has made
> Python3 = 3.10.5. SIP is 6.6.2. To my knowledge all other dependencies
> are satisfied. I wonder if the change in Python or SIP versions may
> have introduced some known incompatibility. Errors are listed below.
> Any hint is appreciated.
> 
> Thanks in advance
> 
> /H.
> 
> sip-build: An internal error occurred...
> Traceback (most recent call last):
>  ? File "/bin/sip-build", line 33, in <module>  ???
> sys.exit(load_entry_point('sip==6.6.2', 'console_scripts',
> 'sip-build')())
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
> line 37, in main
>  ??? handle_exception(e)
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py",
> line 81, in handle_exception
>  ??? raise e
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
> line 34, in main
>  ??? project.build()
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py",
> line 244, in build  ??? self.builder.build()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 48, in
> build  ??? self._generate_bindings()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 277,
> in _generate_bindings  ??? buildable = bindings.generate()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 166,
> in generate  ??? spec, sip_files = parse(self.sip_file, SIP_VERSION,
> encoding,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py",
> line 35, in parse
>  ??? protected_is_public, include_dirs, strict).parse(sip_file)  ?
> File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
> line 1507, in parse
>  ??? self._parser.parse(self._read(sip_file, raw_sip_file),  ? File
> "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse
> ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)  ?
> File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in
> parseopt  ??? p.callable(pslice)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py",
> line 3029, in p_typedef_decl
>  ??? instantiated = pm.instantiate_class_template(p, name_symbol,  ?
> File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
> line 1480, in instantiate_class_template  ??? instantiate_class(p,
> symbol, fq_cpp_name, tmpl_names, proto_class,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 131, in instantiate_class
>  ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class,
> template,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 235, in _instantiate_ctors
>  ??? i_ctor.py_signature = 
> _instantiate_signature(proto_ctor.py_signature,
>  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 368, in _instantiate_signature
>  ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,
>  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 191, in _instantiate_argument
>  ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 191, in <listcomp>
>  ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 437, in _instantiate_value
>  ??? i_name = ScopedName.parse(template_string(proto_name,
> expansions))  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py",
> line 201, in template_string
>  ??? proto_str = proto_str.replace(name, value)
> AttributeError: 'ScopedName' object has no attribute 'replace'
> make[2]: ***
> [python/CMakeFiles/python_module_qgis__analysis.dir/build.make:853:
> python/analysis/build/_analysis/sip_analysispart0.cpp] Error 1
> make[1]: *** [CMakeFiles/Makefile2:5790:
> python/CMakeFiles/python_module_qgis__analysis.dir/all] Error 2
> make[1]: *** Waiting for unfinished jobs....
> 
> 
> sip-build: An internal error occurred...
> Traceback (most recent call last):
>  ? File "/bin/sip-build", line 33, in <module>  ???
> sys.exit(load_entry_point('sip==6.6.2', 'console_scripts',
> 'sip-build')())
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
> line 37, in main
>  ??? handle_exception(e)
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py",
> line 81, in handle_exception
>  ??? raise e
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
> line 34, in main
>  ??? project.build()
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py",
> line 244, in build  ??? self.builder.build()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 48, in
> build  ??? self._generate_bindings()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 277,
> in _generate_bindings  ??? buildable = bindings.generate()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 166,
> in generate  ??? spec, sip_files = parse(self.sip_file, SIP_VERSION,
> encoding,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py",
> line 35, in parse
>  ??? protected_is_public, include_dirs, strict).parse(sip_file)  ?
> File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
> line 1507, in parse
>  ??? self._parser.parse(self._read(sip_file, raw_sip_file),  ? File
> "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse
> ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)  ?
> File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in
> parseopt  ??? p.callable(pslice)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py",
> line 3029, in p_typedef_decl
>  ??? instantiated = pm.instantiate_class_template(p, name_symbol,  ?
> File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
> line 1480, in instantiate_class_template  ??? instantiate_class(p,
> symbol, fq_cpp_name, tmpl_names, proto_class,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 131, in instantiate_class
>  ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class,
> template,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 235, in _instantiate_ctors
>  ??? i_ctor.py_signature = 
> _instantiate_signature(proto_ctor.py_signature,
>  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 368, in _instantiate_signature
>  ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,
>  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 191, in _instantiate_argument
>  ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 191, in <listcomp>
>  ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 437, in _instantiate_value
>  ??? i_name = ScopedName.parse(template_string(proto_name,
> expansions))  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py",
> line 201, in template_string
>  ??? proto_str = proto_str.replace(name, value)
> AttributeError: 'ScopedName' object has no attribute 'replace'
> make[2]: ***
> [python/CMakeFiles/python_module_qgis__core.dir/build.make:804:
> python/core/build/_core/sip_corepart0.cpp] Error 1
> make[1]: *** [CMakeFiles/Makefile2:5683:
> python/CMakeFiles/python_module_qgis__core.dir/all] Error 2
> 
> 
> sip-build: An internal error occurred...
> Traceback (most recent call last):
>  ? File "/bin/sip-build", line 33, in <module>  ???
> sys.exit(load_entry_point('sip==6.6.2', 'console_scripts',
> 'sip-build')())
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
> line 37, in main
>  ??? handle_exception(e)
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/exceptions.py",
> line 81, in handle_exception
>  ??? raise e
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/tools/build.py",
> line 34, in main
>  ??? project.build()
>  ? File "/usr/lib64/python3.10/site-packages/sipbuild/project.py",
> line 244, in build  ??? self.builder.build()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 48, in
> build  ??? self._generate_bindings()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/builder.py", line 277,
> in _generate_bindings  ??? buildable = bindings.generate()  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/bindings.py", line 166,
> in generate  ??? spec, sip_files = parse(self.sip_file, SIP_VERSION,
> encoding,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser.py",
> line 35, in parse
>  ??? protected_is_public, include_dirs, strict).parse(sip_file)  ?
> File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
> line 1507, in parse
>  ??? self._parser.parse(self._read(sip_file, raw_sip_file),  ? File
> "/usr/lib/python3.10/site-packages/ply/yacc.py", line 331, in parse
> ??? return self.parseopt(input, lexer, debug, tracking, tokenfunc)  ?
> File "/usr/lib/python3.10/site-packages/ply/yacc.py", line 823, in
> parseopt  ??? p.callable(pslice)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/rules.py",
> line 3029, in p_typedef_decl
>  ??? instantiated = pm.instantiate_class_template(p, name_symbol,  ?
> File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/parser_manager.py",
> line 1480, in instantiate_class_template  ??? instantiate_class(p,
> symbol, fq_cpp_name, tmpl_names, proto_class,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 131, in instantiate_class
>  ??? i_class.ctors = _instantiate_ctors(tmpl_names, proto_class,
> template,  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 235, in _instantiate_ctors
>  ??? i_ctor.py_signature = 
> _instantiate_signature(proto_ctor.py_signature,
>  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 368, in _instantiate_signature
>  ??? i_arg = _instantiate_argument(proto_arg, proto_class, tmpl_names,
>  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 191, in _instantiate_argument
>  ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 191, in <listcomp>
>  ??? i_arg.default_value = [_instantiate_value(v, expansions)  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/parser/instantiations.py",
> line 437, in _instantiate_value
>  ??? i_name = ScopedName.parse(template_string(proto_name,
> expansions))  ? File
> "/usr/lib64/python3.10/site-packages/sipbuild/generator/templates.py",
> line 201, in template_string
>  ??? proto_str = proto_str.replace(name, value)
> AttributeError: 'ScopedName' object has no attribute 'replace'
> make[2]: ***
> [python/CMakeFiles/python_module_qgis__gui.dir/build.make:1253:
> python/gui/build/_gui/sip_guipart0.cpp] Error 1
> make[1]: *** [CMakeFiles/Makefile2:5737:
> python/CMakeFiles/python_module_qgis__gui.dir/all] Error 2
> make: *** [Makefile:156: all] Error 2
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:
> <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220628/43e5e8ef/attachment.htm>
> 
> ------------------------------
> 
> Subject: Digest Footer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> ------------------------------
> 
> End of QGIS-Developer Digest, Vol 200, Issue 33
> ***********************************************
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
--
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu 
Berlin

e-mail: benjamin.jakimow at geo.hu-berlin.de

phone:  +49 (0) 30 2093 6894
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'222

From plist at posteo.eu  Wed Jun 29 04:24:00 2022
From: plist at posteo.eu (Piet)
Date: Wed, 29 Jun 2022 11:24:00 +0000
Subject: [QGIS-Developer] Fwd:  Compile Master with Debian Bullseye
In-Reply-To: <7907f341-e995-455b-9ef3-9f46f5c18db5@posteo.de>
References: <7907f341-e995-455b-9ef3-9f46f5c18db5@posteo.de>
Message-ID: <fdf53ac1-9b3e-c53c-40a0-304e33b66a9f@posteo.eu>


Dear Johannes,

thank you very much for your kind answer!
Meanwhile I solved this issue.
I don't know why, but ccmake does not find the gdal library and I added 
the wrong library manually in the ccmake GUI.

After the change to the correct library the compilation works fine!

Kind regards

Piet

From rdmailings at duif.net  Wed Jun 29 04:36:06 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 29 Jun 2022 13:36:06 +0200
Subject: [QGIS-Developer] Fwd: Compile Master with Debian Bullseye
In-Reply-To: <fdf53ac1-9b3e-c53c-40a0-304e33b66a9f@posteo.eu>
References: <7907f341-e995-455b-9ef3-9f46f5c18db5@posteo.de>
 <fdf53ac1-9b3e-c53c-40a0-304e33b66a9f@posteo.eu>
Message-ID: <6b999393-26e4-81ec-00f9-9c9d76d52711@duif.net>

Hi Piet,

FYI: ccmake caches a lot apparently, so my way in such issues is often to remove the build directory, create it again, cd into it, and run "ccmake <with all your options> .." again (and then it often magically it finds stuff it earlier did not find...).

Keep on compiling :-)

Regards,

Richard Duivenvoorde


On 6/29/22 13:24, Piet via QGIS-Developer wrote:
> 
> Dear Johannes,
> 
> thank you very much for your kind answer!
> Meanwhile I solved this issue.
> I don't know why, but ccmake does not find the gdal library and I added the wrong library manually in the ccmake GUI.
> 
> After the change to the correct library the compilation works fine!
> 
> Kind regards
> 
> Piet
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From clemens at opengis.ch  Wed Jun 29 07:10:53 2022
From: clemens at opengis.ch (Clemens Rudert)
Date: Wed, 29 Jun 2022 16:10:53 +0200
Subject: [QGIS-Developer] QGIS-Server reload raster layer on request
Message-ID: <CAGXsddFBCGj4Pge6yy9zKYWz+D6noPi1GzWSCcGdf-HaNTCFvQ@mail.gmail.com>

Hi QGIS-Server-Devs

its about QGIS-Server 3.22

I have a project served by QGIS-Server containing 70-80 raster and vector
layers from http sources. These sources are dynamic and not under my
control. Lets say http://dummy.com/geo.tif or http://dummy.com/geo.json.
The content of these tif/json changes over time. So I need QGIS-Server to
reload it on every request I send to the WMS. I came up with the idea of a
plugin. The idea of acting based on passed layers url param and on
dedicated layers comes from the really bad loading speed of this project.
So reinitializing the project on request is no solution.
My current plugin does work fine for vector layers. On every request I call

layer.dataProvider().reloadData()

and the vector data is freshly fetched from the server as expected.

However this is not working for raster layers. It is my understanding that
GDAL is used as dataProvider. It has no effect if i call reload on the
QgsRasterLayer or reloadData on the QgsRasterDataProvider. It simply does
not have any effect.

I already invested quite a time and found these places of info:
https://gis.stackexchange.com/questions/294675/changing-uri-source-of-wms-raster-layer-in-place-pyqgis

https://gis.stackexchange.com/questions/159950/making-qgis-layer-update-from-changed-data-source

I stumbled over this QGIS-Desktop-Plugin wich works nice and does what I
want. It resuts in a valid updated raster layer without changing the
QgsRasterLayer Object layer:
https://github.com/enricofer/changeDataSource/blob/master/setdatasource.py#L175

Despite the fact that this way of manipulating the DOM seem not work on
server because running my plugin for raster layers crashes QGIS-Server
process and I do not get any info what might be wrong (it runs with
loglevel 0). I would be happy to get some suggestions on what might be
wrong here. You can find my current WIP state here:
https://github.com/opengisch/qgis-layer-tweak/blob/master/tweak_server.py

Sorry for the long description.

I hope you can give me directions.

Cheers Clemens

-- 
 <https://qfield.org/get/>

QFIELD 2.0 IS HERE! - Hold the power of QGIS in 
your hand - learn more 
<https://www.opengis.ch/2022/04/05/qfield-2-0-is-here/> - get it now 
<https://qfield.org/get>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220629/eb58e143/attachment-0001.htm>

From cavallini at faunalia.it  Thu Jun 30 07:18:12 2022
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 30 Jun 2022 16:18:12 +0200
Subject: [QGIS-Developer] Accommodations for the Contributors meeting in
 Florence
Message-ID: <9ecf73c4-1011-814c-d2d5-18e6ca5ba089@faunalia.it>

Hi all,
thanks to the efforts of the local team (thanks Rossella!), a limited
number of rooms is available for attendants. The principle is first
come-first serve, so please hurry up reserving your place at the metting
page.
All the best.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From a.neumann at carto.net  Thu Jun 30 07:24:12 2022
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 30 Jun 2022 16:24:12 +0200
Subject: [QGIS-Developer] Accommodations for the Contributors meeting in
 Florence
In-Reply-To: <9ecf73c4-1011-814c-d2d5-18e6ca5ba089@faunalia.it>
References: <9ecf73c4-1011-814c-d2d5-18e6ca5ba089@faunalia.it>
Message-ID: <1f4581dd0a3beb21c785570bdfefadff@carto.net>

Hi all,

In the wiki page 
https://github.com/qgis/QGIS/wiki/24th-Contributors-Meeting-in-Firenze 
please fill in CX-single for a single room, or CX-double if you can 
share the room with one other person.

We have booked all available rooms at the CX-Place:19 single and 5 
double rooms. We are aware that that may not accommodate all people, but 
in case you are too late (meaning all rooms are already taken), please 
organize accommodation on your own.

Thanks and looking forward to see you in Florence,

Andreas

On 2022-06-30 16:18, Paolo Cavallini via QGIS-Developer wrote:

> Hi all,
> thanks to the efforts of the local team (thanks Rossella!), a limited
> number of rooms is available for attendants. The principle is first
> come-first serve, so please hurry up reserving your place at the 
> metting
> page.
> All the best.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220630/2a91eee6/attachment.htm>

