From delazj at gmail.com  Mon Feb  1 01:49:04 2021
From: delazj at gmail.com (DelazJ)
Date: Mon, 1 Feb 2021 10:49:04 +0100
Subject: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and
 vcpkg
In-Reply-To: <47c87f52-7d5a-6935-6a8b-7615cd670dcf@di.uminho.pt>
References: <AM0PR02MB5777088D40E2D4EE13EBDF3593B99@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CACjCNZTsBFYMhtgSFTfte9+mkKy_Yb9kvptMhiwAncD1LgCLRQ@mail.gmail.com>
 <AM0PR02MB57772729C0B2641FBA458E5193B79@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <47c87f52-7d5a-6935-6a8b-7615cd670dcf@di.uminho.pt>
Message-ID: <CAECJsSo0CARNyBTxkdrJkKqL5UBdtx0RLH9jePF1zo3JAN3SQQ@mail.gmail.com>

Hi,

Why not in the build instructions of the code repo instead:
https://github.com/qgis/QGIS/blob/master/INSTALL.md? If it's a working
process, easy to replicate, this is the place I'd expect this kind of
information.

Regards,
Harrissou

Le dim. 31 janv. 2021 ? 15:55, Jorge Gustavo Rocha <jgr at di.uminho.pt> a
?crit :

> Hi Stefan,
>
> We have now a new tab on github called 'discussions'[1]. Your detailed
> instructions are a good candidate to write down a new entry there, under
> 'Show and tell' category. The goal is to keep this information next to
> the repo. You can use the markdown syntax to enhance the writing format.
> You can also add some print screens.
>
> This is just a suggestion. Feel free to put it there or not.
>
> Regards (and thank you!),
>
> Jorge Gustavo
>
> [1] https://github.com/qgis/QGIS/discussions
>
> ?s 14:13 de 31/01/21, Uhrig, Stefan escreveu:
> > Install Visual Studio Community 2019: Select "Desktop development with
> > C++" under "Workloads" and "C++ MFC for latest v142 build tools (x86 &
> > x64)" under "Individual components". Verify that you install "Windows 10
> > SDK (10.0.18362.0)" or higher.
> >
> >
> >
> > Install Git for Windows and Python 3.
> >
> >
> >
> > Download
> >
> https://sourceforge.net/projects/winflexbison/files/win_flex_bison3-latest.zip/download
> > and extract it to a location of your choice (avoid space characters in
> > the target path).
> >
> >
> >
> > Follow the vcpkg "Quick Start: Windows" instructions at
> > https://github.com/microsoft/vcpkg#quick-start-windows. Make sure to
> > execute the "vcpkg integrate install" command.
> >
> >
> >
> > Install the required dependencies via:
> >
> >
> >
> > vcpkg --triplet=x64-windows install exiv2 gdal gsl libspatialindex
> > libspatialite libzip opencl protobuf qca qscintilla qt5 qt5-serialport
> > qt5-location qt5-winextras qtkeychain qwt zstd
> >
> >
> >
> > This may take a while as this creates a Debug and a Release build of
> > each dependency from source.
> >
> >
> >
> > Clone the QGIS repostiory. The path to the QGIS repository should not
> > contain any space characters.
> >
> >
> >
> > Start Visual Studio and open the QGIS CMakeLists.txt file via "File -->
> > Open --> CMake...". This will start the CMake generation, which will
> > fail. You will need several configuration rounds until everything is
> > setup properly.
> >
> >
> >
> > Let's start with a Release build because that requires less tweaking. Go
> > to "Project --> CMake Settings". Delete the default configuration
> > ("x64-Debug (default)").
> >
> >
> >
> > Add a new "x64-Release" configuration and set "Configuration type" to
> > "Release". Save the CMakeSettings.json file, which will start a new
> > CMake generation. "FIND_FLEX" will fail, so you need to set the
> > "FLEX_EXECUTABLE" path manually in section "CMake variables and cache".
> > Browse to your win_flex.exe file. Additionally, disable "WITH_BINDINGS"
> > and "WITH_QGIS_PROCESS". Save the file. Next set "BISON_EXECUTABLE" to
> > your win_bison.exe file and save again. Disable "WITH_QTWEBKIT" and
> > save. Set "QCA_LIBRARY" to
> > "<vcpkg-root>\installed\x64-windows\lib\qca.lib" and save. Configuration
> > should now succeed, but you have to change "GEOS_LIBRARY" from
> > "geos.lib" to "geos_c.lib". Save and start the build after CMake
> > generation has finished.
> >
> >
> >
> > Select "qgis.exe (output\bin\qgis.exe)" as start-up item in the toolbar
> > and start QGIS.
> >
> >
> >
> > Now let's do the same for a Debug build. Add a "x64-Debug" configuration
> > and save. Change to the "x64-Debug" configuration in the toolbar. Repeat
> > the steps from above (set flex and bison paths etc.). When selecting
> > libraries, take the libraries from
> > "<vcpkg-root>\installed\x64-windows\debug\lib". Most libraries will have
> > a "d" or "_d" as name suffix. The CMake generation will not always
> > select the debug versions of libraries. Hence, go over the CMake
> > variables and change release library paths to debug library paths, e.g.
> > "<vcpkg-root>\installed\x64-windows\debug\lib\geos_cd.lib" for
> > GEOS_LIBRARY. I'll append my CMakeSettings.json file as reference to
> > this mail. Save again and start the build.
> >
> >
> >
> > The build will fail because the execution of crssync.exe fails. That's
> > because crssync.exe tries to load zstd.dll instead of zstdd.dll. I
> > haven't figured out why, yet. An easy workaround is copying zstdd.dll to
> > zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the build
> > and it should succeed.
> >
> >
> >
> > You should then be able to start and debug qgis.exe and its
> > dependencies. Note that some vcpkg portfiles forget to copy over the
> > .pdb files. For example, proj is affected. If you find such a library
> > with a missing .pdb file, check whether the portfile (e.g.
> > "<vcpkg-root>\ports\proj4\portfile.cmake") contains the
> > "vcpkg_copy_pdbs()" call. If not, just add it at the end, re-install the
> > dependency and copy over the .pdb file to the QGIS output directory.
> >
> >
> >
> > I'm currently trying to get QGIS working with Python bindings. I got the
> > build working, however I'm struggling with the debug build execution.
> > The debug Python library seems to be unable to load the Release build Qt
> > libraries that come with PyQt5. Well, I'll keep trying and if I succeed,
> > I'll update the instructions.
> >
> >
> >
> > Here is my CMakeSettings.json file for reference:
> >
> >
> >
> > {
> >
> >   "configurations": [
> >
> >     {
> >
> >       "name": "x64-Release",
> >
> >       "generator": "Ninja",
> >
> >       "configurationType": "Release",
> >
> >       "buildRoot": "${projectDir}\\out\\build\\${name}",
> >
> >       "installRoot": "${projectDir}\\out\\install\\${name}",
> >
> >       "cmakeCommandArgs": "",
> >
> >       "buildCommandArgs": "",
> >
> >       "ctestCommandArgs": "",
> >
> >       "inheritEnvironments": [ "msvc_x64_x64" ],
> >
> >       "variables": [
> >
> >         {
> >
> >           "name": "WITH_BINDINGS",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_QGIS_PROCESS",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "FLEX_EXECUTABLE",
> >
> >           "value": "C:/src/tools/win_flex.exe",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "BISON_EXECUTABLE",
> >
> >           "value": "C:/src/tools/win_bison.exe",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_QTWEBKIT",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "QCA_LIBRARY",
> >
> >           "value": "C:/src/vcpkg/installed/x64-windows/lib/qca.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "GEOS_LIBRARY",
> >
> >           "value": "C:/src/vcpkg/installed/x64-windows/lib/geos_c.lib",
> >
> >           "type": "FILEPATH"
> >
> >         }
> >
> >       ]
> >
> >     },
> >
> >     {
> >
> >       "name": "x64-Debug",
> >
> >       "generator": "Ninja",
> >
> >       "configurationType": "Debug",
> >
> >       "buildRoot": "${projectDir}\\out\\build\\${name}",
> >
> >       "installRoot": "${projectDir}\\out\\install\\${name}",
> >
> >       "cmakeCommandArgs": "",
> >
> >       "buildCommandArgs": "",
> >
> >       "ctestCommandArgs": "",
> >
> >       "inheritEnvironments": [ "msvc_x64_x64" ],
> >
> >       "variables": [
> >
> >         {
> >
> >           "name": "FLEX_EXECUTABLE",
> >
> >           "value": "C:/src/tools/win_flex.exe",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "BISON_EXECUTABLE",
> >
> >           "value": "C:/src/tools/win_bison.exe",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_QTWEBKIT",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_BINDINGS",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_QGIS_PROCESS",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "QCA_LIBRARY",
> >
> >           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/qcad.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "GEOS_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/geos_cd.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "GSL_LIB",
> >
> >           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/gsld.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "GSLCBLAS_LIB",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/gslcblasd.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "PROJ_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/proj_d.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "QSCINTILLA_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/qscintilla2_qt5d.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "QTKEYCHAIN_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/qt5keychaind.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "QWT_LIBRARY",
> >
> >           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/qwtd.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "SPATIALINDEX_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/spatialindex-64d.lib",
> >
> >           "type": "FILEPATH"
> >
> >         }
> >
> >       ]
> >
> >     }
> >
> >   ]
> >
> > }
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > *From:*i-s-o <46.i.s.o.64 at gmail.com>
> > *Sent:* Saturday, January 30, 2021 5:58 PM
> > *To:* Uhrig, Stefan <stefan.uhrig at sap.com>
> > *Cc:* qgis-developer <QGIS-Developer at lists.osgeo.org>
> > *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE
> > and vcpkg
> >
> >
> >
> > I am very interested in trying out your solution. Could you share the
> > required steps?
> >
> >
> >
> > Thx.
> >
> >
> >
> > On Fri, Jan 29, 2021, 09:25 Uhrig, Stefan <stefan.uhrig at sap.com
> > <mailto:stefan.uhrig at sap.com>> wrote:
> >
> >     TL;DR: It is currently possible to build the QGIS core app with
> >     Visual Studio 2019 and vcpkg, which makes debugging QGIS
> >     dependencies easy.
> >
> >
> >
> >
> >
> >     Hi all,
> >
> >
> >
> >     Some time ago I discovered vcpkg
> >     (https://github.com/microsoft/vcpkg). vcpkg is a package manager
> >     that downloads package source code to your local machine and builds
> >     the package locally. Recently, I discovered that vcpkg should be
> >     able to provide all dependencies to build at least the QGIS core
> >     application. Hence, I gave it a try.
> >
> >
> >
> >     Basically, it worked out of the box. I started with a fresh Windows
> >     10 installation, installed Visual Studio 2019 Community Edition,
> >     Git, vcpkg, Python 3 and flex and bison for Windows. I fetched all
> >     other dependencies via vcpkg. It was not necessary to even touch a
> >     single file in the repository. I could just open the main
> >     CMakeLists.txt file in Visual Studio and only had to tweak the CMake
> >     cache (the CMake find macros that come with QGIS are not aware of
> >     vcpkg, so I had to set some paths manually). I had to switch off
> >     some extensions though as the required dependencies were not
> >     available via vcpkg (WITH_BINDINGS, WITH_QGIS_PROCESS,
> >     WITH_QTWEBKIT). The build did not report any errors, I could start
> >     the application and it seems to work, but I did some light testing
> only.
> >
> >
> >
> >     I mainly tried it because I enjoy debugging with Visual Studio more
> >     than with gdb (or gdb wrapped in some IDE). In my experience, the
> >     performance of the Visual Studio debugger is better and it is more
> >     stable, especially in long debug sessions.
> >
> >
> >
> >     I don?t want to promote official building support of QGIS with
> >     vcpkg. Providing the dependencies via OSGeo4W is much more reliable.
> >     However, if you don?t mind the experimental nature of this setup and
> >     you want to be able to debug into QGIS? dependencies, you might give
> >     it a try. Especially, if you want to track the cause of a crash in
> >     one of QGIS? dependencies, this setup might be helpful. You have the
> >     source code and debug versions of the dependencies, so the debugger
> >     will jump to the crashing code line and you can inspect all the
> >     variables of the dependency.
> >
> >
> >
> >     If someone is interested in trying it, give me a note. I can then
> >     assemble detailed instructions on how to make it work. It took me a
> >     while to figure out which packages are needed and how the CMake
> >     cache needs to be tweaked.
> >
> >
> >
> >     Best regards,
> >
> >     Stefan
> >
> >
> >
> >
> >
> >
> >
> >     _______________________________________________
> >     QGIS-Developer mailing list
> >     QGIS-Developer at lists.osgeo.org <mailto:
> QGIS-Developer at lists.osgeo.org>
> >     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> J. Gustavo
> --
> Jorge Gustavo Rocha
> Departamento de Inform?tica
> Universidade do Minho
> 4710-057 Braga
> Gabinete 3.29 (Piso 3)
> Tel: +351 253604480
> Fax: +351 253604471
> M?vel: +351 910333888
> skype: nabocudnosor
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210201/5aaf21e6/attachment-0001.html>

From jean at jhemmi.eu  Mon Feb  1 07:18:49 2021
From: jean at jhemmi.eu (Jean Hemmi)
Date: Mon, 1 Feb 2021 16:18:49 +0100
Subject: [QGIS-Developer] Plugin approbation
Message-ID: <CAKsx1pkwZ+knSerfC8WyuCmUTn-aN_P1cQijaqDE-MsSnfU7bQ@mail.gmail.com>

Hello QGIS,
I've sent two updates for two different plugins. One is automatically
approved.
The other, [1399] Physiocap3 3.10.4, is not.
Can anybody help me ?

Regards,
Jean Hemmi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210201/20fbaed5/attachment.html>

From stefan.uhrig at sap.com  Mon Feb  1 07:16:45 2021
From: stefan.uhrig at sap.com (Uhrig, Stefan)
Date: Mon, 1 Feb 2021 15:16:45 +0000
Subject: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and
 vcpkg
In-Reply-To: <CAECJsSo0CARNyBTxkdrJkKqL5UBdtx0RLH9jePF1zo3JAN3SQQ@mail.gmail.com>
References: <AM0PR02MB5777088D40E2D4EE13EBDF3593B99@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CACjCNZTsBFYMhtgSFTfte9+mkKy_Yb9kvptMhiwAncD1LgCLRQ@mail.gmail.com>
 <AM0PR02MB57772729C0B2641FBA458E5193B79@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <47c87f52-7d5a-6935-6a8b-7615cd670dcf@di.uminho.pt>
 <CAECJsSo0CARNyBTxkdrJkKqL5UBdtx0RLH9jePF1zo3JAN3SQQ@mail.gmail.com>
Message-ID: <AM0PR02MB57775DD44ECAA6EB8C2C672193B69@AM0PR02MB5777.eurprd02.prod.outlook.com>

Hi all,

In my opinion, the build with Visual Studio 2019 and vcpkg is still too experimental to add it to the INSTALL.md file. It might break any day if QGIS requires a package or package version that is not available from vcpkg.

Actually, I like the idea to add it to the ?Show & tell? category. We can ask the community for their experiences with that setup. Does it work, is it getting used? If it is used by some ?critical mass? and works over a longer time without issues, we can add instructions to the INSTALL.md file. Maybe we can add a hint to the INSTALL.md file that the not so faint-hearted developers might give it a try and provide a link to the ?Show & tell? post.

However, to be really useful, the debug build should also work with Python bindings and QGIS processing. I got it working for release builds (just needed to install the required Python dependencies via pip install <package>), but that does not work for debug builds. Someone solved that some years ago in another context (https://www.riverbankcomputing.com/pipermail/pyqt/2012-April/031385.html), so I might get it working. I?ll give it a try.

Furthermore, I?d like to investigate the zstd.dll vs zstdd.dll load issue before publishing the build instructions.

Best regards,
Stefan



From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of DelazJ
Sent: Monday, February 1, 2021 10:49 AM
To: Jorge Gustavo Rocha <jgr at di.uminho.pt>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and vcpkg

Hi,

Why not in the build instructions of the code repo instead: https://github.com/qgis/QGIS/blob/master/INSTALL.md? If it's a working process, easy to replicate, this is the place I'd expect this kind of information.

Regards,
Harrissou

Le dim. 31 janv. 2021 ? 15:55, Jorge Gustavo Rocha <jgr at di.uminho.pt<mailto:jgr at di.uminho.pt>> a ?crit :
Hi Stefan,

We have now a new tab on github called 'discussions'[1]. Your detailed
instructions are a good candidate to write down a new entry there, under
'Show and tell' category. The goal is to keep this information next to
the repo. You can use the markdown syntax to enhance the writing format.
You can also add some print screens.

This is just a suggestion. Feel free to put it there or not.

Regards (and thank you!),

Jorge Gustavo

[1] https://github.com/qgis/QGIS/discussions

?s 14:13 de 31/01/21, Uhrig, Stefan escreveu:
> Install Visual Studio Community 2019: Select "Desktop development with
> C++" under "Workloads" and "C++ MFC for latest v142 build tools (x86 &
> x64)" under "Individual components". Verify that you install "Windows 10
> SDK (10.0.18362.0)" or higher.
>
>
>
> Install Git for Windows and Python 3.
>
>
>
> Download
> https://sourceforge.net/projects/winflexbison/files/win_flex_bison3-latest.zip/download
> and extract it to a location of your choice (avoid space characters in
> the target path).
>
>
>
> Follow the vcpkg "Quick Start: Windows" instructions at
> https://github.com/microsoft/vcpkg#quick-start-windows. Make sure to
> execute the "vcpkg integrate install" command.
>
>
>
> Install the required dependencies via:
>
>
>
> vcpkg --triplet=x64-windows install exiv2 gdal gsl libspatialindex
> libspatialite libzip opencl protobuf qca qscintilla qt5 qt5-serialport
> qt5-location qt5-winextras qtkeychain qwt zstd
>
>
>
> This may take a while as this creates a Debug and a Release build of
> each dependency from source.
>
>
>
> Clone the QGIS repostiory. The path to the QGIS repository should not
> contain any space characters.
>
>
>
> Start Visual Studio and open the QGIS CMakeLists.txt file via "File -->
> Open --> CMake...". This will start the CMake generation, which will
> fail. You will need several configuration rounds until everything is
> setup properly.
>
>
>
> Let's start with a Release build because that requires less tweaking. Go
> to "Project --> CMake Settings". Delete the default configuration
> ("x64-Debug (default)").
>
>
>
> Add a new "x64-Release" configuration and set "Configuration type" to
> "Release". Save the CMakeSettings.json file, which will start a new
> CMake generation. "FIND_FLEX" will fail, so you need to set the
> "FLEX_EXECUTABLE" path manually in section "CMake variables and cache".
> Browse to your win_flex.exe file. Additionally, disable "WITH_BINDINGS"
> and "WITH_QGIS_PROCESS". Save the file. Next set "BISON_EXECUTABLE" to
> your win_bison.exe file and save again. Disable "WITH_QTWEBKIT" and
> save. Set "QCA_LIBRARY" to
> "<vcpkg-root>\installed\x64-windows\lib\qca.lib" and save. Configuration
> should now succeed, but you have to change "GEOS_LIBRARY" from
> "geos.lib" to "geos_c.lib". Save and start the build after CMake
> generation has finished.
>
>
>
> Select "qgis.exe (output\bin\qgis.exe)" as start-up item in the toolbar
> and start QGIS.
>
>
>
> Now let's do the same for a Debug build. Add a "x64-Debug" configuration
> and save. Change to the "x64-Debug" configuration in the toolbar. Repeat
> the steps from above (set flex and bison paths etc.). When selecting
> libraries, take the libraries from
> "<vcpkg-root>\installed\x64-windows\debug\lib". Most libraries will have
> a "d" or "_d" as name suffix. The CMake generation will not always
> select the debug versions of libraries. Hence, go over the CMake
> variables and change release library paths to debug library paths, e.g.
> "<vcpkg-root>\installed\x64-windows\debug\lib\geos_cd.lib" for
> GEOS_LIBRARY. I'll append my CMakeSettings.json file as reference to
> this mail. Save again and start the build.
>
>
>
> The build will fail because the execution of crssync.exe fails. That's
> because crssync.exe tries to load zstd.dll instead of zstdd.dll. I
> haven't figured out why, yet. An easy workaround is copying zstdd.dll to
> zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the build
> and it should succeed.
>
>
>
> You should then be able to start and debug qgis.exe and its
> dependencies. Note that some vcpkg portfiles forget to copy over the
> .pdb files. For example, proj is affected. If you find such a library
> with a missing .pdb file, check whether the portfile (e.g.
> "<vcpkg-root>\ports\proj4\portfile.cmake") contains the
> "vcpkg_copy_pdbs()" call. If not, just add it at the end, re-install the
> dependency and copy over the .pdb file to the QGIS output directory.
>
>
>
> I'm currently trying to get QGIS working with Python bindings. I got the
> build working, however I'm struggling with the debug build execution.
> The debug Python library seems to be unable to load the Release build Qt
> libraries that come with PyQt5. Well, I'll keep trying and if I succeed,
> I'll update the instructions.
>
>
>
> Here is my CMakeSettings.json file for reference:
>
>
>
> {
>
>   "configurations": [
>
>     {
>
>       "name": "x64-Release",
>
>       "generator": "Ninja",
>
>       "configurationType": "Release",
>
>       "buildRoot": "${projectDir}\\out\\build\\${name}",
>
>       "installRoot": "${projectDir}\\out\\install\\${name}",
>
>       "cmakeCommandArgs": "",
>
>       "buildCommandArgs": "",
>
>       "ctestCommandArgs": "",
>
>       "inheritEnvironments": [ "msvc_x64_x64" ],
>
>       "variables": [
>
>         {
>
>           "name": "WITH_BINDINGS",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "WITH_QGIS_PROCESS",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "FLEX_EXECUTABLE",
>
>           "value": "C:/src/tools/win_flex.exe",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "BISON_EXECUTABLE",
>
>           "value": "C:/src/tools/win_bison.exe",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "WITH_QTWEBKIT",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "QCA_LIBRARY",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/lib/qca.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "GEOS_LIBRARY",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/lib/geos_c.lib",
>
>           "type": "FILEPATH"
>
>         }
>
>       ]
>
>     },
>
>     {
>
>       "name": "x64-Debug",
>
>       "generator": "Ninja",
>
>       "configurationType": "Debug",
>
>       "buildRoot": "${projectDir}\\out\\build\\${name}",
>
>       "installRoot": "${projectDir}\\out\\install\\${name}",
>
>       "cmakeCommandArgs": "",
>
>       "buildCommandArgs": "",
>
>       "ctestCommandArgs": "",
>
>       "inheritEnvironments": [ "msvc_x64_x64" ],
>
>       "variables": [
>
>         {
>
>           "name": "FLEX_EXECUTABLE",
>
>           "value": "C:/src/tools/win_flex.exe",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "BISON_EXECUTABLE",
>
>           "value": "C:/src/tools/win_bison.exe",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "WITH_QTWEBKIT",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "WITH_BINDINGS",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "WITH_QGIS_PROCESS",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "QCA_LIBRARY",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/qcad.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "GEOS_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/geos_cd.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "GSL_LIB",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/gsld.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "GSLCBLAS_LIB",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/gslcblasd.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "PROJ_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/proj_d.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "QSCINTILLA_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/qscintilla2_qt5d.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "QTKEYCHAIN_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/qt5keychaind.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "QWT_LIBRARY",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/qwtd.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "SPATIALINDEX_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/spatialindex-64d.lib",
>
>           "type": "FILEPATH"
>
>         }
>
>       ]
>
>     }
>
>   ]
>
> }
>
>
>
>
>
>
>
>
>
> *From:*i-s-o <46.i.s.o.64 at gmail.com<mailto:46.i.s.o.64 at gmail.com>>
> *Sent:* Saturday, January 30, 2021 5:58 PM
> *To:* Uhrig, Stefan <stefan.uhrig at sap.com<mailto:stefan.uhrig at sap.com>>
> *Cc:* qgis-developer <QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>>
> *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE
> and vcpkg
>
>
>
> I am very interested in trying out your solution. Could you share the
> required steps?
>
>
>
> Thx.
>
>
>
> On Fri, Jan 29, 2021, 09:25 Uhrig, Stefan <stefan.uhrig at sap.com<mailto:stefan.uhrig at sap.com>
> <mailto:stefan.uhrig at sap.com<mailto:stefan.uhrig at sap.com>>> wrote:
>
>     TL;DR: It is currently possible to build the QGIS core app with
>     Visual Studio 2019 and vcpkg, which makes debugging QGIS
>     dependencies easy.
>
>
>
>
>
>     Hi all,
>
>
>
>     Some time ago I discovered vcpkg
>     (https://github.com/microsoft/vcpkg). vcpkg is a package manager
>     that downloads package source code to your local machine and builds
>     the package locally. Recently, I discovered that vcpkg should be
>     able to provide all dependencies to build at least the QGIS core
>     application. Hence, I gave it a try.
>
>
>
>     Basically, it worked out of the box. I started with a fresh Windows
>     10 installation, installed Visual Studio 2019 Community Edition,
>     Git, vcpkg, Python 3 and flex and bison for Windows. I fetched all
>     other dependencies via vcpkg. It was not necessary to even touch a
>     single file in the repository. I could just open the main
>     CMakeLists.txt file in Visual Studio and only had to tweak the CMake
>     cache (the CMake find macros that come with QGIS are not aware of
>     vcpkg, so I had to set some paths manually). I had to switch off
>     some extensions though as the required dependencies were not
>     available via vcpkg (WITH_BINDINGS, WITH_QGIS_PROCESS,
>     WITH_QTWEBKIT). The build did not report any errors, I could start
>     the application and it seems to work, but I did some light testing only.
>
>
>
>     I mainly tried it because I enjoy debugging with Visual Studio more
>     than with gdb (or gdb wrapped in some IDE). In my experience, the
>     performance of the Visual Studio debugger is better and it is more
>     stable, especially in long debug sessions.
>
>
>
>     I don?t want to promote official building support of QGIS with
>     vcpkg. Providing the dependencies via OSGeo4W is much more reliable.
>     However, if you don?t mind the experimental nature of this setup and
>     you want to be able to debug into QGIS? dependencies, you might give
>     it a try. Especially, if you want to track the cause of a crash in
>     one of QGIS? dependencies, this setup might be helpful. You have the
>     source code and debug versions of the dependencies, so the debugger
>     will jump to the crashing code line and you can inspect all the
>     variables of the dependency.
>
>
>
>     If someone is interested in trying it, give me a note. I can then
>     assemble detailed instructions on how to make it work. It took me a
>     while to figure out which packages are needed and how the CMake
>     cache needs to be tweaked.
>
>
>
>     Best regards,
>
>     Stefan
>
>
>
>
>
>
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org> <mailto:QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

J. Gustavo
--
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210201/f20ee87b/attachment-0001.html>

From Luke.A.Catania at erdc.dren.mil  Mon Feb  1 09:46:25 2021
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Mon, 1 Feb 2021 17:46:25 +0000
Subject: [QGIS-Developer] Issues running Grass r.plane
In-Reply-To: <CACAuT+-Xd8Sx6+E7T5wxAQy1n=XCXd50nUFLWV7iKaPgm7aKBw@mail.gmail.com>
References: <f68915ceefed4010a03f529fe67ad77f@erdc.dren.mil>,
 <CACAuT+-Xd8Sx6+E7T5wxAQy1n=XCXd50nUFLWV7iKaPgm7aKBw@mail.gmail.com>
Message-ID: <ebed39bc21a34d428fa77a041ed5426d@erdc.dren.mil>

Sylvain,


Thanks.  I did manage to set region in the advanced parameters section.  Changed that and then also realized I had web Mercator as the northing and easting point and geographic extent which put my result out in some other area.  I changed extent to web Mercator and got an good result.


Though when I generate the plane with azimuth of 25 degrees and then run the aspect tool to verify the azimuth that reports 335, which looks like is because r.plane measures in counter clockwise direction where I am used to nort being zero and  then going clockwise.


I would think the coordinate parameter on the plane would be used as a line of bearing and the result would slope up from that which is what I actually need so I need to figure out how to use this tool for my use.


Initially before I found r.plane, I  had found a formula to calculate a constant sloping plane and was using several tools to create what I want but am not getting a correctly sloping plane, so hoping r.plane will work.  I am currently using this formula and the field calculator to create the values in an attribute table and then I rasterize the points using the field value:


height + \
   math.tan(math.radians(slope)) * \
   math.sin(math.radians(aspect)) * longitude + \
   math.tan(math.radians(slope)) * \
   math.cos(math.radians(aspect)) + latitude



Luke







________________________________
From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> on behalf of Sylvain POULAIN <sylvain.poulain at giscan.com>
Sent: Sunday, January 31, 2021 2:07 AM
To: QGIS-Developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] Issues running Grass r.plane

Hi Luke,

Setting a region in Grass is really important.
In Grass tools :
- there is a panel tab where you can adjust region named "Region",
- you can also use g.region.multiple.raster from module tab,
- a shell is present in module tab to use grass commands.

In processing toolbox, setting region is embedded in tool.

Regards,

Sylvain POULAIN

Le sam. 30 janv. 2021 ? 04:30, Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil<mailto:Luke.A.Catania at erdc.dren.mil>> a ?crit :
Looking to use r.plane to create a slope of a constant plane.

Tried to run the Grass tool using the example in the help below , but in QGIS I do not see a g.region method so how do I limit my area?

# set computational region
g.region raster=elev_lid792_1m -p

# get center coordinates as an example
g.region -c
# get terrain height at point
r.what map=elev_lid792_1m coordinates=638650.0,220375.0
# shows elevation: 116.7734

# generate tilted plane
r.plane myplane30 dip=30 az=75 east=638650.0 north=220375.0 \
        elev=116.7734 type=FCELL

Whe running it with the example input.

r.plane sloping_plane dip=30 az=75 east=638650.0 north=220375.0 elev=116.7734 type=FCELL

I just get a constant plane of the same height throughout, so not sure of that is an issue of not setting the region.

Luke
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked
Unsubscribe: Blockedhttps://lists.osgeo.org/mailman/listinfo/qgis-developerBlocked
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210201/a097a06b/attachment.html>

From nyall.dawson at gmail.com  Mon Feb  1 14:57:09 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 2 Feb 2021 08:57:09 +1000
Subject: [QGIS-Developer] QEP: Layer Notes
In-Reply-To: <CAB28AsgU49OEHV0mbiuUNoWRngestVeErOQ8Fa7xEgm9XM1BNg@mail.gmail.com>
References: <CAB28AsgU49OEHV0mbiuUNoWRngestVeErOQ8Fa7xEgm9XM1BNg@mail.gmail.com>
Message-ID: <CAB28AsgP2XLMQzPiKTZKnSxOD5vsx9P8PSm0BW5OXJZi6kZFcw@mail.gmail.com>

On Mon, 1 Feb 2021 at 14:47, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> Hi all,
>
> I've just submitted a new QGIS enhancement proposal detailing support
> for user created "notes" for map layers. You can read the details
> here: https://github.com/qgis/QGIS-Enhancement-Proposals/issues/206
>
> I'm after feedback on this proposal and am trying to determine how
> widespread the use-case is, and how desirable it is to have this
> functionality available in QGIS out-of-the-box (vs as a plugin).

Thanks everyone for the great feedback so far! Can I please request
that we keep the comments and replies on the github proposal page in
order to keep everyone's comments centralised?

Thank you!
Nyall

From rdmailings at duif.net  Tue Feb  2 01:17:25 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 2 Feb 2021 10:17:25 +0100
Subject: [QGIS-Developer] Temporal Vectors Pull Requests, plz review
Message-ID: <72b95284-5bee-4050-17eb-88c29c35118b@duif.net>

Hi Devs,

A gentle reminder: is anybody available to have a look into my 2 PR's (which I hoped to get into 3.18, well actually 3.16... but ...)?

https://github.com/qgis/QGIS/pull/41213
https://github.com/qgis/QGIS/pull/40989

They both provide tests and test data and build with current master. 

If people have doubts, or are uncertain, please let's have a chat, or let me know.

Regards,

Richard Duivenvoorde



From rdmailings at duif.net  Tue Feb  2 03:34:32 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 2 Feb 2021 12:34:32 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as fastcgi?
Message-ID: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>

Hi (Server)Devs,

When I run the minimal qgis_mapserver and go to http://localhost:8000 QGIS server presents me the nice "QGIS Server Catalog" landingpage.

But installing (the exact same) qgis server as fast-cgi in my local apache I do NOT get that....

Do I have to enable the QGIS_PLUGINPATH env var?
I tried to set it to the "/build/output/data/" or "/build/output/data/resources"  as there are some js files there for the server...

Going to http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/ I get a landing page, but that one is different from the "QGIS Server Catalog" which I have if I run qgis_mapserver.

Any hints?

Regards,

Richard Duivenvoorde

From apasotti at gmail.com  Tue Feb  2 03:41:38 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 2 Feb 2021 12:41:38 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
Message-ID: <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>

On Tue, Feb 2, 2021 at 12:34 PM Richard Duivenvoorde
<rdmailings at duif.net> wrote:
>
> Hi (Server)Devs,
>
> When I run the minimal qgis_mapserver and go to http://localhost:8000 QGIS server presents me the nice "QGIS Server Catalog" landingpage.
>
> But installing (the exact same) qgis server as fast-cgi in my local apache I do NOT get that....

Hi Richard,

... and you get what?

>
> Do I have to enable the QGIS_PLUGINPATH env var?

nope: landing page is not a python plugin.

> I tried to set it to the "/build/output/data/" or "/build/output/data/resources"  as there are some js files there for the server...
>
> Going to http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/ I get a landing page, but that one is different from the "QGIS Server Catalog" which I have if I run qgis_mapserver.

yeah, that's the WFS3/OAPIF landing page, dictated by the standar.

>
> Any hints?

It depends on what you actually get instead of the landing page.

Try checking the logs, the landing page is pretty chatty.


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Tue Feb  2 04:49:56 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 2 Feb 2021 13:49:56 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
Message-ID: <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>

On 2/2/21 12:41 PM, Alessandro Pasotti wrote:
> On Tue, Feb 2, 2021 at 12:34 PM Richard Duivenvoorde
> <rdmailings at duif.net> wrote:
>>
>> Hi (Server)Devs,
>>
>> When I run the minimal qgis_mapserver and go to http://localhost:8000 QGIS server presents me the nice "QGIS Server Catalog" landingpage.
>>
>> But installing (the exact same) qgis server as fast-cgi in my local apache I do NOT get that....
> 
> Hi Richard,
> 
> ... and you get what?

IF I provide a qgz file (+data) in the /usr/lib/cgi-bin dir, I get the (xml) error message:

Service unknown or unsupported. Current supported services (case-sensitive): WMS WFS WCS WMTS SampleService, or use a WFS3 (OGC API Features) endpoint

If I at that moment go to 

http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/

I get the Collections "landing page" with the layers in the qgz next to the fastcgi 
(note I am trying to get the "QGIS Server Catalog" landingpage)

>> Do I have to enable the QGIS_PLUGINPATH env var?
> 
> nope: landing page is not a python plugin.

Ok, was not clear to me that this was a PYTHON plugin path... 
https://www.qgis.org/en/site/forusers/visualchangelog316/index.html#qgis-server-landing-page-plugin
states: "A Landing Page Plugin for QGIS Server was created" that is the reason I still though it was a plugin..

>> I tried to set it to the "/build/output/data/" or "/build/output/data/resources"  as there are some js files there for the server...
>>
>> Going to http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/ I get a landing page, but that one is different from the "QGIS Server Catalog" which I have if I run qgis_mapserver.
> 
> yeah, that's the WFS3/OAPIF landing page, dictated by the standar.
> 
>>
>> Any hints?
> 
> It depends on what you actually get instead of the landing page.
> 
> Try checking the logs, the landing page is pretty chatty.

I still do not have the magic combi of ENVIRONMENT variables to get the QGIS server log (other then in my apache error log) :-(

I do find some more environment variables now:
https://docs.qgis.org/testing/en/docs/server_manual/config.html#qgis-server-logging

Is the
QGIS_SERVER_API_RESOURCES_DIRECTORY
needed for this landing page? Tried: failed :-(

(note: never heard/used of spawn-fcgi ... is that the way to show the vars used by the server?)

$ spawn-fcgi -f /usr/lib/cgi-bin/qgis_mapserv.fcgi -s /tmp/qgisserver.sock -U www-data -G www-data -n
Warning: Ignoring XDG_SESSION_TYPE=wayland on Gnome. Use QT_QPA_PLATFORM=wayland to run on Wayland anyway.
	- 'VirtualXPath'	[XML Path Language - XPath]
	- 'VirtualXPath'	[XML Path Language - XPath]
../src/core/qgsmessagelog.cpp:29 : (logMessage) [93ms] 2021-02-02T13:41:32 Server[0] QGIS Server Settings: 
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_OPTIONS_PATH / '' (Override the default path for user configuration): '' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_PARALLEL_RENDERING / '/qgis/parallel_rendering' (Activate/Deactivate parallel rendering for WMS getMap request): 'true' (read from INI_FILE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_MAX_THREADS / '/qgis/max_threads' (Number of threads to use when parallel rendering is activated): '-1' (read from INI_FILE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LOG_LEVEL / '' (Log level): '4' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LOG_FILE / '' (Log file): '' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LOG_STDERR / '' (Activate/Deactivate logging to stderr): 'false' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_PROJECT_FILE / '' (QGIS project file): '' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_IGNORE_BAD_LAYERS / '' (Ignore bad layers): 'false' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_CACHE_DIRECTORY / '/cache/directory' (Specify the cache directory): '/home/richard/.local/share/QGIS/QGIS3/profiles/default/cache' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_CACHE_SIZE / '/cache/size' (Specify the cache size): '52428800' (read from INI_FILE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_SHOW_GROUP_SEPARATOR / '/locale/showGroupSeparator' (Show group (thousands) separator): 'false' (read from INI_FILE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_OVERRIDE_SYSTEM_LOCALE / '/locale/userLocale' (Override system locale): 'en_US' (read from INI_FILE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_WMS_MAX_HEIGHT / '/qgis/max_wms_height' (Maximum height for a WMS request. The lower one of this and the project configuration is used.): '-1' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_WMS_MAX_WIDTH / '/qgis/max_wms_width' (Maximum width for a WMS request. The most conservative between this and the project one is used): '-1' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_API_RESOURCES_DIRECTORY / '/qgis/server_api_resources_directory' (Base directory where HTML templates and static assets (e.g. images, js and css files) are searched for): '/usr/share/qgis/resources/server/api' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_API_WFS3_MAX_LIMIT / '/qgis/server_api_wfs3_max_limit' (Maximum value for "limit" in a features request, defaults to 10000): '10000' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_TRUST_LAYER_METADATA / '' (Trust layer metadata): 'false' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_DISABLE_GETPRINT / '' (Don't load layouts): 'false' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES / '/qgis/server_projects_directories' (Directories used by the landing page service to find .qgs and .qgz projects): '' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LANDING_PAGE_PROJECTS_PG_CONNECTIONS / '/qgis/server_projects_pg_connections' (PostgreSQL connection strings used by the landing page service to find projects): '' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LOG_PROFILE / '/qgis/server_log_profile' (Add detailed profile information to the logs, only effective when QGIS_SERVER_LOG_LEVEL=0): 'false' (read from DEFAULT_VALUE)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] Ini file used to initialize settings: /home/richard/.local/share/QGIS/QGIS3/profiles/default/QGIS/QGIS3.ini
../src/core/qgsmessagelog.cpp:29 : (logMessage) [83ms] 2021-02-02T13:41:32 Server[0] cacheDirectory: /home/richard/.local/share/QGIS/QGIS3/profiles/default/cache/
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] maximumCacheSize: 52428800
../src/core/qgsproviderregistry.cpp:179 : (init) [0ms] No dynamic QGIS data provider plugins found in:
/usr/lib/qgis/plugins

../src/core/qgsproviderregistry.cpp:267 : (init) [0ms] Loaded 6 providers (ept;gdal;memory;mesh_memory;ogr;vectortile) 
../src/core/qgsmessagelog.cpp:29 : (logMessage) [18ms] 2021-02-02T13:41:32 Server[0] Prefix  PATH: /usr
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] Plugin  PATH: /usr/lib/qgis/plugins
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] PkgData PATH: /usr/share/qgis
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] User DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis.db
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] Auth DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis-auth.db
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] SVG PATHS: /home/richard/bin/qgis_/master/debug/share/qgis/svg/:/home/richard/.local/share/QGIS/QGIS3/profiles/default/resource_sharing/collections:/home/richard/.local/share/QGIS/QGIS3/profiles/default/svg/:/home/richard/bin/geoserver/geoserver-2.15.2/data_dir/styles:/home/richard/git/qgisqt2/build/debug/output/data/svg/:/home/richard/git/qgisqt2/svg/:/home/richard/bin/qgis_/3.10/debug/share/qgis/svg/:/home/richard/git/build-qgisqt-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt/svg/:/svg/:/home/richard/bin/qgis_/3.16/debug/share/qgis/svg/:/home/richard/git/build-qgisqt2-Desktop-Debug/output/data/svg/:/home/richard/git/build-qgisqt3-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt3/svg/:/usr/share/qgis/svg/
../src/core/qgsmessagelog.cpp:29 : (logMessage) [19ms] 2021-02-02T13:41:32 No Authentication Methods[1] No QGIS auth method plugins found in:
/usr/lib/qgis/plugins
No authentication methods can be used. Check your QGIS installation
../src/core/auth/qgsauthmanager.cpp:483 : (isDisabled) [0ms] Authentication system DISABLED: QCA's qca-ossl (OpenSSL) plugin is missing
../src/core/qgsmessagelog.cpp:29 : (logMessage) [68ms] 2021-02-02T13:41:32 Server[0] Server initialized
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 ../src/server/qgsserverplugins.cpp[0] load library /usr/lib/qgispython (3.17.0)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 [1] Couldn't load Python support library: Cannot load library /usr/lib/qgispython: (/usr/lib/libqgispython.so: cannot open shared object file: No such file or directory)
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] No server python plugins are available


Testing with all this magic:

 FcgidIOTimeout 120
 FcgidInitialEnv LC_ALL "en_US.UTF-8"
 FcgidInitialEnv PYTHONIOENCODING UTF-8
 FcgidInitialEnv LANG "en_US.UTF-8"
 FcgidInitialEnv QGIS_DEBUG 5
 FcgidInitialEnv QGIS_SERVER_LOG_FILE "/tmp"
 FcgidInitialEnv QGIS_SERVER_LOG_LEVEL 5
 #FcgidInitialEnv QGIS_PROJECT_FILE "/usr/lib/cgi-bin/cbsgemeenten2018.qgz"  # with or without this one that project is loaded
 FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES "/tmp/qgisserver"
 FcgidInitialEnv QGIS_OPTIONS_PATH "/tmp"
 FcgidInitialEnv QGIS_SERVER_CACHE_DIRECTORY "."
 FcgidInitialEnv QGIS_SERVER_API_RESOURCES_DIRECTORY "/home/richard/git/qgis/build/output/data/"
 FcgidInitialEnv PYTHONPATH "/home/richard/bin/qgis_/master/debug/share/qgis/python"
 FcgidInitialEnv LD_LIBRARY_PATH "/home/richard/bin/qgis_/master/debug/lib/:/home/richard/bin/gdal/lib"
 FcgidInitialEnv QGIS_PREFIX_PATH "/home/richard/bin/qgis_/master/debug"


Really unsure which ones are needed or used :-(

Regards,

Richard









From apasotti at gmail.com  Tue Feb  2 04:58:39 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 2 Feb 2021 13:58:39 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
Message-ID: <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>

This looks bad:

./src/core/qgsproviderregistry.cpp:179 : (init) [0ms] No dynamic QGIS
data provider plugins found in:
/usr/lib/qgis/plugins

and:
No authentication methods can be used. Check your QGIS installation

Fix your prefix path.

QGIS_SERVER_API_RESOURCES_DIRECTORY is for overrides, if you have
custom templates.



On Tue, Feb 2, 2021 at 1:49 PM Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> On 2/2/21 12:41 PM, Alessandro Pasotti wrote:
> > On Tue, Feb 2, 2021 at 12:34 PM Richard Duivenvoorde
> > <rdmailings at duif.net> wrote:
> >>
> >> Hi (Server)Devs,
> >>
> >> When I run the minimal qgis_mapserver and go to http://localhost:8000 QGIS server presents me the nice "QGIS Server Catalog" landingpage.
> >>
> >> But installing (the exact same) qgis server as fast-cgi in my local apache I do NOT get that....
> >
> > Hi Richard,
> >
> > ... and you get what?
>
> IF I provide a qgz file (+data) in the /usr/lib/cgi-bin dir, I get the (xml) error message:
>
> Service unknown or unsupported. Current supported services (case-sensitive): WMS WFS WCS WMTS SampleService, or use a WFS3 (OGC API Features) endpoint
>
> If I at that moment go to
>
> http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/
>
> I get the Collections "landing page" with the layers in the qgz next to the fastcgi
> (note I am trying to get the "QGIS Server Catalog" landingpage)
>
> >> Do I have to enable the QGIS_PLUGINPATH env var?
> >
> > nope: landing page is not a python plugin.
>
> Ok, was not clear to me that this was a PYTHON plugin path...
> https://www.qgis.org/en/site/forusers/visualchangelog316/index.html#qgis-server-landing-page-plugin
> states: "A Landing Page Plugin for QGIS Server was created" that is the reason I still though it was a plugin..
>
> >> I tried to set it to the "/build/output/data/" or "/build/output/data/resources"  as there are some js files there for the server...
> >>
> >> Going to http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/ I get a landing page, but that one is different from the "QGIS Server Catalog" which I have if I run qgis_mapserver.
> >
> > yeah, that's the WFS3/OAPIF landing page, dictated by the standar.
> >
> >>
> >> Any hints?
> >
> > It depends on what you actually get instead of the landing page.
> >
> > Try checking the logs, the landing page is pretty chatty.
>
> I still do not have the magic combi of ENVIRONMENT variables to get the QGIS server log (other then in my apache error log) :-(
>
> I do find some more environment variables now:
> https://docs.qgis.org/testing/en/docs/server_manual/config.html#qgis-server-logging
>
> Is the
> QGIS_SERVER_API_RESOURCES_DIRECTORY
> needed for this landing page? Tried: failed :-(
>
> (note: never heard/used of spawn-fcgi ... is that the way to show the vars used by the server?)
>
> $ spawn-fcgi -f /usr/lib/cgi-bin/qgis_mapserv.fcgi -s /tmp/qgisserver.sock -U www-data -G www-data -n
> Warning: Ignoring XDG_SESSION_TYPE=wayland on Gnome. Use QT_QPA_PLATFORM=wayland to run on Wayland anyway.
>         - 'VirtualXPath'        [XML Path Language - XPath]
>         - 'VirtualXPath'        [XML Path Language - XPath]
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [93ms] 2021-02-02T13:41:32 Server[0] QGIS Server Settings:
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_OPTIONS_PATH / '' (Override the default path for user configuration): '' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_PARALLEL_RENDERING / '/qgis/parallel_rendering' (Activate/Deactivate parallel rendering for WMS getMap request): 'true' (read from INI_FILE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_MAX_THREADS / '/qgis/max_threads' (Number of threads to use when parallel rendering is activated): '-1' (read from INI_FILE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LOG_LEVEL / '' (Log level): '4' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LOG_FILE / '' (Log file): '' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LOG_STDERR / '' (Activate/Deactivate logging to stderr): 'false' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_PROJECT_FILE / '' (QGIS project file): '' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_IGNORE_BAD_LAYERS / '' (Ignore bad layers): 'false' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_CACHE_DIRECTORY / '/cache/directory' (Specify the cache directory): '/home/richard/.local/share/QGIS/QGIS3/profiles/default/cache' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_CACHE_SIZE / '/cache/size' (Specify the cache size): '52428800' (read from INI_FILE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_SHOW_GROUP_SEPARATOR / '/locale/showGroupSeparator' (Show group (thousands) separator): 'false' (read from INI_FILE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_OVERRIDE_SYSTEM_LOCALE / '/locale/userLocale' (Override system locale): 'en_US' (read from INI_FILE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_WMS_MAX_HEIGHT / '/qgis/max_wms_height' (Maximum height for a WMS request. The lower one of this and the project configuration is used.): '-1' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_WMS_MAX_WIDTH / '/qgis/max_wms_width' (Maximum width for a WMS request. The most conservative between this and the project one is used): '-1' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_API_RESOURCES_DIRECTORY / '/qgis/server_api_resources_directory' (Base directory where HTML templates and static assets (e.g. images, js and css files) are searched for): '/usr/share/qgis/resources/server/api' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_API_WFS3_MAX_LIMIT / '/qgis/server_api_wfs3_max_limit' (Maximum value for "limit" in a features request, defaults to 10000): '10000' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_TRUST_LAYER_METADATA / '' (Trust layer metadata): 'false' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_DISABLE_GETPRINT / '' (Don't load layouts): 'false' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES / '/qgis/server_projects_directories' (Directories used by the landing page service to find .qgs and .qgz projects): '' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LANDING_PAGE_PROJECTS_PG_CONNECTIONS / '/qgis/server_projects_pg_connections' (PostgreSQL connection strings used by the landing page service to find projects): '' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0]   - QGIS_SERVER_LOG_PROFILE / '/qgis/server_log_profile' (Add detailed profile information to the logs, only effective when QGIS_SERVER_LOG_LEVEL=0): 'false' (read from DEFAULT_VALUE)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] Ini file used to initialize settings: /home/richard/.local/share/QGIS/QGIS3/profiles/default/QGIS/QGIS3.ini
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [83ms] 2021-02-02T13:41:32 Server[0] cacheDirectory: /home/richard/.local/share/QGIS/QGIS3/profiles/default/cache/
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] maximumCacheSize: 52428800
> ../src/core/qgsproviderregistry.cpp:179 : (init) [0ms] No dynamic QGIS data provider plugins found in:
> /usr/lib/qgis/plugins
>
> ../src/core/qgsproviderregistry.cpp:267 : (init) [0ms] Loaded 6 providers (ept;gdal;memory;mesh_memory;ogr;vectortile)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [18ms] 2021-02-02T13:41:32 Server[0] Prefix  PATH: /usr
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] Plugin  PATH: /usr/lib/qgis/plugins
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] PkgData PATH: /usr/share/qgis
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] User DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis.db
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] Auth DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis-auth.db
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] SVG PATHS: /home/richard/bin/qgis_/master/debug/share/qgis/svg/:/home/richard/.local/share/QGIS/QGIS3/profiles/default/resource_sharing/collections:/home/richard/.local/share/QGIS/QGIS3/profiles/default/svg/:/home/richard/bin/geoserver/geoserver-2.15.2/data_dir/styles:/home/richard/git/qgisqt2/build/debug/output/data/svg/:/home/richard/git/qgisqt2/svg/:/home/richard/bin/qgis_/3.10/debug/share/qgis/svg/:/home/richard/git/build-qgisqt-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt/svg/:/svg/:/home/richard/bin/qgis_/3.16/debug/share/qgis/svg/:/home/richard/git/build-qgisqt2-Desktop-Debug/output/data/svg/:/home/richard/git/build-qgisqt3-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt3/svg/:/usr/share/qgis/svg/
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [19ms] 2021-02-02T13:41:32 No Authentication Methods[1] No QGIS auth method plugins found in:
> /usr/lib/qgis/plugins
> No authentication methods can be used. Check your QGIS installation
> ../src/core/auth/qgsauthmanager.cpp:483 : (isDisabled) [0ms] Authentication system DISABLED: QCA's qca-ossl (OpenSSL) plugin is missing
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [68ms] 2021-02-02T13:41:32 Server[0] Server initialized
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 ../src/server/qgsserverplugins.cpp[0] load library /usr/lib/qgispython (3.17.0)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 [1] Couldn't load Python support library: Cannot load library /usr/lib/qgispython: (/usr/lib/libqgispython.so: cannot open shared object file: No such file or directory)
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T13:41:32 Server[0] No server python plugins are available
>
>
> Testing with all this magic:
>
>  FcgidIOTimeout 120
>  FcgidInitialEnv LC_ALL "en_US.UTF-8"
>  FcgidInitialEnv PYTHONIOENCODING UTF-8
>  FcgidInitialEnv LANG "en_US.UTF-8"
>  FcgidInitialEnv QGIS_DEBUG 5
>  FcgidInitialEnv QGIS_SERVER_LOG_FILE "/tmp"
>  FcgidInitialEnv QGIS_SERVER_LOG_LEVEL 5
>  #FcgidInitialEnv QGIS_PROJECT_FILE "/usr/lib/cgi-bin/cbsgemeenten2018.qgz"  # with or without this one that project is loaded
>  FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES "/tmp/qgisserver"
>  FcgidInitialEnv QGIS_OPTIONS_PATH "/tmp"
>  FcgidInitialEnv QGIS_SERVER_CACHE_DIRECTORY "."
>  FcgidInitialEnv QGIS_SERVER_API_RESOURCES_DIRECTORY "/home/richard/git/qgis/build/output/data/"
>  FcgidInitialEnv PYTHONPATH "/home/richard/bin/qgis_/master/debug/share/qgis/python"
>  FcgidInitialEnv LD_LIBRARY_PATH "/home/richard/bin/qgis_/master/debug/lib/:/home/richard/bin/gdal/lib"
>  FcgidInitialEnv QGIS_PREFIX_PATH "/home/richard/bin/qgis_/master/debug"
>
>
> Really unsure which ones are needed or used :-(
>
> Regards,
>
> Richard
>
>
>
>
>
>
>
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Tue Feb  2 05:27:09 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 2 Feb 2021 14:27:09 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
Message-ID: <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>

On 2/2/21 1:58 PM, Alessandro Pasotti wrote:
> This looks bad:
> 
> ./src/core/qgsproviderregistry.cpp:179 : (init) [0ms] No dynamic QGIS
> data provider plugins found in:
> /usr/lib/qgis/plugins
> and:
> No authentication methods can be used. Check your QGIS installation
> Fix your prefix path.


No no, that is because I run the spawn-fcgi command from the docs, BUT without setting any environment variable..

All is working: wms/wfs/api when I run as fastcgi, because then those are all defined in my apache conf, see below:

>> Testing with all this magic:
>>
>>  FcgidIOTimeout 120
>>  FcgidInitialEnv LC_ALL "en_US.UTF-8"
>>  FcgidInitialEnv PYTHONIOENCODING UTF-8
>>  FcgidInitialEnv LANG "en_US.UTF-8"
>>  FcgidInitialEnv QGIS_DEBUG 5
>>  FcgidInitialEnv QGIS_SERVER_LOG_FILE "/tmp"
>>  FcgidInitialEnv QGIS_SERVER_LOG_LEVEL 5
>>  #FcgidInitialEnv QGIS_PROJECT_FILE "/usr/lib/cgi-bin/cbsgemeenten2018.qgz"  # with or without this one that project is loaded
>>  FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES "/tmp/qgisserver"
>>  FcgidInitialEnv QGIS_OPTIONS_PATH "/tmp"
>>  FcgidInitialEnv QGIS_SERVER_CACHE_DIRECTORY "."
>>  FcgidInitialEnv QGIS_SERVER_API_RESOURCES_DIRECTORY "/home/richard/git/qgis/build/output/data/"
>>  FcgidInitialEnv PYTHONPATH "/home/richard/bin/qgis_/master/debug/share/qgis/python"
>>  FcgidInitialEnv LD_LIBRARY_PATH "/home/richard/bin/qgis_/master/debug/lib/:/home/richard/bin/gdal/lib"
>>  FcgidInitialEnv QGIS_PREFIX_PATH "/home/richard/bin/qgis_/master/debug"

So tried:
export QGIS_DEBUG=5
export QGIS_SERVER_LOG_FILE="/tmp"
export QGIS_SERVER_LOG_LEVEL=5
export QGIS_PROJECT_FILE="/usr/lib/cgi-bin/cbsgemeenten2018.qgz"
export QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES="/tmp/qgisserver"
#export QGIS_OPTIONS_PATH="/tmp"
export QGIS_SERVER_CACHE_DIRECTORY="/tmp"
export QGIS_SERVER_API_RESOURCES_DIRECTORY="/tmp/resources"
export PYTHONPATH="/home/richard/bin/qgis_/master/debug/share/qgis/python"
export LD_LIBRARY_PATH="/home/richard/bin/qgis_/master/debug/lib/:/home/richard/bin/gdal/lib"
export QGIS_PREFIX_PATH="/home/richard/bin/qgis_/master/debug"

and ran spawn-fcgi again
I see: 
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T14:13:25 Server[0] Adding service SampleService 1.0
"Loading native module /home/richard/bin/qgis_/master/debug/lib/qgis/server/liblandingpage.so"

And given the api's work I think my apache config is OK... but I cannot check logs

My main issues:
- the missing catalog landingpage
- I never see any logfiles appear (so can not check the chatty logs :-))

Regards,

Richard

From apasotti at gmail.com  Tue Feb  2 05:39:56 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 2 Feb 2021 14:39:56 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
Message-ID: <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>

Unless you have custom resources (templates) this is definitely wrong:
export QGIS_SERVER_API_RESOURCES_DIRECTORY="/tmp/resources"

Have a look to
https://docs.qgis.org/3.16/en/docs/server_manual/config.html#environment-variables

You are also using the deprecated QGIS_SERVER_LOG_FILE, use
QGIS_SERVER_LOG_STDERR instead.

And: QGIS_SERVER_LOG_LEVEL=0 as explained in the a.m. documentation.

QGIS_DEBUG will do anything if you don't have a debug build.


On Tue, Feb 2, 2021 at 2:27 PM Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> On 2/2/21 1:58 PM, Alessandro Pasotti wrote:
> > This looks bad:
> >
> > ./src/core/qgsproviderregistry.cpp:179 : (init) [0ms] No dynamic QGIS
> > data provider plugins found in:
> > /usr/lib/qgis/plugins
> > and:
> > No authentication methods can be used. Check your QGIS installation
> > Fix your prefix path.
>
>
> No no, that is because I run the spawn-fcgi command from the docs, BUT without setting any environment variable..
>
> All is working: wms/wfs/api when I run as fastcgi, because then those are all defined in my apache conf, see below:
>
> >> Testing with all this magic:
> >>
> >>  FcgidIOTimeout 120
> >>  FcgidInitialEnv LC_ALL "en_US.UTF-8"
> >>  FcgidInitialEnv PYTHONIOENCODING UTF-8
> >>  FcgidInitialEnv LANG "en_US.UTF-8"
> >>  FcgidInitialEnv QGIS_DEBUG 5
> >>  FcgidInitialEnv QGIS_SERVER_LOG_FILE "/tmp"
> >>  FcgidInitialEnv QGIS_SERVER_LOG_LEVEL 5
> >>  #FcgidInitialEnv QGIS_PROJECT_FILE "/usr/lib/cgi-bin/cbsgemeenten2018.qgz"  # with or without this one that project is loaded
> >>  FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES "/tmp/qgisserver"
> >>  FcgidInitialEnv QGIS_OPTIONS_PATH "/tmp"
> >>  FcgidInitialEnv QGIS_SERVER_CACHE_DIRECTORY "."
> >>  FcgidInitialEnv QGIS_SERVER_API_RESOURCES_DIRECTORY "/home/richard/git/qgis/build/output/data/"
> >>  FcgidInitialEnv PYTHONPATH "/home/richard/bin/qgis_/master/debug/share/qgis/python"
> >>  FcgidInitialEnv LD_LIBRARY_PATH "/home/richard/bin/qgis_/master/debug/lib/:/home/richard/bin/gdal/lib"
> >>  FcgidInitialEnv QGIS_PREFIX_PATH "/home/richard/bin/qgis_/master/debug"
>
> So tried:
> export QGIS_DEBUG=5
> export QGIS_SERVER_LOG_FILE="/tmp"
> export QGIS_SERVER_LOG_LEVEL=5
> export QGIS_PROJECT_FILE="/usr/lib/cgi-bin/cbsgemeenten2018.qgz"
> export QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES="/tmp/qgisserver"
> #export QGIS_OPTIONS_PATH="/tmp"
> export QGIS_SERVER_CACHE_DIRECTORY="/tmp"
> export QGIS_SERVER_API_RESOURCES_DIRECTORY="/tmp/resources"
> export PYTHONPATH="/home/richard/bin/qgis_/master/debug/share/qgis/python"
> export LD_LIBRARY_PATH="/home/richard/bin/qgis_/master/debug/lib/:/home/richard/bin/gdal/lib"
> export QGIS_PREFIX_PATH="/home/richard/bin/qgis_/master/debug"
>
> and ran spawn-fcgi again
> I see:
> ../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-02-02T14:13:25 Server[0] Adding service SampleService 1.0
> "Loading native module /home/richard/bin/qgis_/master/debug/lib/qgis/server/liblandingpage.so"
>
> And given the api's work I think my apache config is OK... but I cannot check logs
>
> My main issues:
> - the missing catalog landingpage
> - I never see any logfiles appear (so can not check the chatty logs :-))
>
> Regards,
>
> Richard



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Tue Feb  2 06:16:26 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 2 Feb 2021 15:16:26 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
 <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
Message-ID: <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>

On 2/2/21 2:39 PM, Alessandro Pasotti wrote:

> Have a look to
> https://docs.qgis.org/3.16/en/docs/server_manual/config.html#environment-variables
> 
> You are also using the deprecated QGIS_SERVER_LOG_FILE, use
> QGIS_SERVER_LOG_STDERR instead.
> 
> And: QGIS_SERVER_LOG_LEVEL=0 as explained in the a.m. documentation.

I'm looking here: 

https://docs.qgis.org/testing/en/docs/server_manual/config.html#qgis-server-logging
https://docs.qgis.org/testing/en/docs/server_manual/getting_started.html#httpserver

Too many possible combinations ... :-(

> QGIS_DEBUG will do anything if you don't have a debug build.

I do have QGIS_DEBUG builds

Anyway, I give up. Apparently my linux/qgis/tech/knowledge/magic level is too low to run this beast at this moment.

Thanks for your time Ale! Sorry for not making it work.

Regards,

Richard

From apasotti at gmail.com  Tue Feb  2 07:40:29 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 2 Feb 2021 16:40:29 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
 <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
 <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>
Message-ID: <CAL5Q672+6Uc4=QYt7Kj7j_kVuwyTp5zo0qL+Q84QY_uuhV0YCg@mail.gmail.com>

On Tue, Feb 2, 2021 at 3:16 PM Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> On 2/2/21 2:39 PM, Alessandro Pasotti wrote:
>
> > Have a look to
> > https://docs.qgis.org/3.16/en/docs/server_manual/config.html#environment-variables
> >
> > You are also using the deprecated QGIS_SERVER_LOG_FILE, use
> > QGIS_SERVER_LOG_STDERR instead.
> >
> > And: QGIS_SERVER_LOG_LEVEL=0 as explained in the a.m. documentation.
>
> I'm looking here:
>
> https://docs.qgis.org/testing/en/docs/server_manual/config.html#qgis-server-logging
> https://docs.qgis.org/testing/en/docs/server_manual/getting_started.html#httpserver
>
> Too many possible combinations ... :-(

I agree: it's getting better but it's still a mess, anyway: STDERR is
the way to go.

>
> > QGIS_DEBUG will do anything if you don't have a debug build.
>
> I do have QGIS_DEBUG builds
>
> Anyway, I give up. Apparently my linux/qgis/tech/knowledge/magic level is too low to run this beast at this moment.

I'd say that if **you** cannot make it work we have a serious problem.

I'll try to set an example up but at the moment I have too much on my
plate and I'm busy with bug fixing: it may take a while.

Did you check QGIS_SERVER_API_RESOURCES_DIRECTORY is pointing to
resources? The default path is calculated by joining
QgsApplication::pkgDataPath() with "resources/server/api"

Also, you didn't answer my first question (or I missed it): instead of
the expected landing page, what HTML/XML do you get in the browser?

Note that the landing page will only be served for URL /, so
http://myserver/ but not for http://myserver/whatever

>
> Thanks for your time Ale! Sorry for not making it work.

You'll make it eventually, don't give up!

>
> Regards,
>
> Richard



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From franke at ggr-planung.de  Tue Feb  2 10:16:02 2021
From: franke at ggr-planung.de (Christoph Franke)
Date: Tue, 2 Feb 2021 19:16:02 +0100
Subject: [QGIS-Developer] Transfer published plugin to other user account
Message-ID: <5a7130e7-7019-712b-e0a7-b9b84f58a785@ggr-planung.de>

Hi Devs,

is it possible to transfer a plugin that is already uploaded into the 
QGIS repository to another user account?

My idea would be to remove it from my account and then reupload the 
exact same version with the other user account. But i don't know if that 
might cause trouble in the repository or in the QGIS plugin manager.

The reason for this is that the client i wrote the plugin for wants to 
maintain it in the future. I don't want to give him access to my account 
though.

thanks and regards,

Christoph Franke


From adenaculture at gmail.com  Tue Feb  2 10:40:23 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 2 Feb 2021 13:40:23 -0500
Subject: [QGIS-Developer] [Qgis-user]  New QGIS Date/Time Tools Plugin
In-Reply-To: <CAB28Asgo+Jk4QcttJUZTzOeo1ua_O1s_Ke3UYbsuF=zsmjc-_A@mail.gmail.com>
References: <CABPxTTpwLPyUhGAR6z9c30YtQOXXbW8qw8tFF_JZ3Yk_RUSwgw@mail.gmail.com>
 <214bdf06-cec8-427a-f349-b8c20475b1de@duif.net>
 <CAES-DZSMiTepcqiwWH9d58baiwiH5=jGGv8bZ6y-5RykjC0dbw@mail.gmail.com>
 <CABPxTTqC=mLBMTSS+zzBcrDpYO9nNPWgbGwXYgAp0vN2dpi6dQ@mail.gmail.com>
 <CAB28AsgnEmOnvO6Lx9W03aAFT1Y1-_5XqS2gwP8prQTMWeKE9w@mail.gmail.com>
 <CABPxTTpQ=TKwczv-7MKZMzrCPNanfNLECrUz0pzHYqpK7=iN1w@mail.gmail.com>
 <CAB28Asgo+Jk4QcttJUZTzOeo1ua_O1s_Ke3UYbsuF=zsmjc-_A@mail.gmail.com>
Message-ID: <CABPxTToYLvnTM4q_rwSmTZ2B=80vo_qPUZLQ2Oe2Xi8uh3RXag@mail.gmail.com>

I created a layer of 10,000 random points. Using timezonefinder to look up
each point took 44 seconds. I tried using *Vector->Geoprocessing
Tools->Intersection...* to find the time zones for each of the points and
it took over 4 minutes.

Is there a better way to locate which polygon a point is in? 4 minutes is
not good. Perhaps the intersection algorithm is not the way to go, but I am
not sure what is. I can't imagine that iterating through each point and
then iterating through each polygon until an intersection match is found is
going to be overlay efficient, but I will try it. Is there a better way?

Thanks,

Calvin


>
> > I wonder what the difference in time would be to use a gpkg and QGIS
> point in polygon look up vs timezonefinder lookup. Will it be faster or
> slower? I'm not sure without testing. What are your thoughts? I would
> choose the faster of the two.
>
> I'd certainly hope a dedicated GIS application can do this faster than
> a random Python library :D
>
> > I just converted the timezone data to a gpkg and its size is 102Mb. The
> data size for timezonefinder using the same data set is 49Mb. The
> optimization in timezonefinder can produce a maximum error of 1cm at the
> equator as they use 32 bit ints for the data. It might actually be better
> to use the gpkg file, but it is double in size. I will investigate using
> the gpkg data.
>
> You may want to try a shapefile too, just in case...!
>
> Nyall
>
>
> >
> > It seems to me that if a plugin requires a certain dataset to function
> then that data should be included with it and not require an additional
> download, but I understand the issues that this could cause so I am not
> sure of the best way forward. For our use it is definitely better to
> include the data with the plugin.
> >
> > I guess what I would like you to take from this conversation is that
> some users have a completely different environment and face different
> challenges then what you do when it comes to dealing with software. I wish
> that it was easier for me to get QGIS acceptance in our workforce but
> ArcGIS still rules.
> >
> > Thanks for your ideas and all of the hard work that you do to keep QGIS
> moving forward.
> >
> > I wish you all the very best!
> >
> > Calvin
> >
> >> Given that the size of the python library is almost entirely the size
> >> of the timezone boundaries themselves, have you considered:
> >> - avoiding the library entirely, and insteading using a standard
> >> shapefile/gpkg/... of the boundaries and using QGIS vector layer
> >> methods to determine the timezone for a point
> >> - deferring the download of the boundary spatial data, so that it's
> >> not supplied with the plugin but instead the plugin automatically
> >> downloads it on first launch?
> >>
> >> This would avoid the need for the large size plugin, allowing it to be
> >> supplied via the standard QGIS repo while still providing its full
> >> functionality...
> >>
> >> Nyall
> >>
> >>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210202/6f4e0926/attachment-0001.html>

From etienne.trimaille at gmail.com  Tue Feb  2 23:09:41 2021
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Wed, 3 Feb 2021 14:09:41 +0700
Subject: [QGIS-Developer] Transfer published plugin to other user account
In-Reply-To: <5a7130e7-7019-712b-e0a7-b9b84f58a785@ggr-planung.de>
References: <5a7130e7-7019-712b-e0a7-b9b84f58a785@ggr-planung.de>
Message-ID: <CAMtDFLKxvj_o7q1oTXLLe8zvg6RwWLxipWkDKsTzd6H3R8sn8Q@mail.gmail.com>

Hi,

On plugins.qgis.org, in your plugins settings, you can already give rights
to one or many existing logins.


Le mer. 3 f?vr. 2021 ? 01:23, Christoph Franke <franke at ggr-planung.de> a
?crit :

> Hi Devs,
>
> is it possible to transfer a plugin that is already uploaded into the
> QGIS repository to another user account?
>
> My idea would be to remove it from my account and then reupload the
> exact same version with the other user account. But i don't know if that
> might cause trouble in the repository or in the QGIS plugin manager.
>
> The reason for this is that the client i wrote the plugin for wants to
> maintain it in the future. I don't want to give him access to my account
> though.
>
> thanks and regards,
>
> Christoph Franke
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/f5fdc28f/attachment.html>

From fredrikl at gvc.gu.se  Wed Feb  3 02:04:04 2021
From: fredrikl at gvc.gu.se (Fredrik Lindberg)
Date: Wed, 3 Feb 2021 10:04:04 +0000
Subject: [QGIS-Developer] new plugin not showing up
Message-ID: <VI1PR0201MB248065D66C3CB9CEB9D0A4DA85B49@VI1PR0201MB2480.eurprd02.prod.outlook.com>

Hi all,
I uploaded a new plugin yesterday ([2289] Potential Slope Failure for processing) which quickly got approved (thanks) but it does not show up in "Manage and Install Plugins" in QGIS.

Any ideas what might have happened or what I have done wrong?

Thanks,
Fredrik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/fa062cf3/attachment.html>

From etienne.trimaille at gmail.com  Wed Feb  3 02:14:40 2021
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Wed, 3 Feb 2021 17:14:40 +0700
Subject: [QGIS-Developer] new plugin not showing up
In-Reply-To: <VI1PR0201MB248065D66C3CB9CEB9D0A4DA85B49@VI1PR0201MB2480.eurprd02.prod.outlook.com>
References: <VI1PR0201MB248065D66C3CB9CEB9D0A4DA85B49@VI1PR0201MB2480.eurprd02.prod.outlook.com>
Message-ID: <CAMtDFLKc8NYMzbeqRGuW+nxu5V+xBtPp4uxrxu8+rSduHkS=0Q@mail.gmail.com>

Yes, this issue has been confirmed by a few people already.
Please follow https://github.com/qgis/QGIS-Django/issues/157

Le mer. 3 f?vr. 2021 ? 17:12, Fredrik Lindberg <fredrikl at gvc.gu.se> a
?crit :

> Hi all,
> I uploaded a new plugin yesterday ([2289] Potential Slope Failure for
> processing) which quickly got approved (thanks) but it does not show up in
> "Manage and Install Plugins" in QGIS.
>
> Any ideas what might have happened or what I have done wrong?
>
> Thanks,
> Fredrik
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/e4bdd4cc/attachment.html>

From tim at kartoza.com  Wed Feb  3 04:13:56 2021
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 3 Feb 2021 12:13:56 +0000
Subject: [QGIS-Developer] new plugin not showing up
In-Reply-To: <CAMtDFLKc8NYMzbeqRGuW+nxu5V+xBtPp4uxrxu8+rSduHkS=0Q@mail.gmail.com>
References: <VI1PR0201MB248065D66C3CB9CEB9D0A4DA85B49@VI1PR0201MB2480.eurprd02.prod.outlook.com>
 <CAMtDFLKc8NYMzbeqRGuW+nxu5V+xBtPp4uxrxu8+rSduHkS=0Q@mail.gmail.com>
Message-ID: <CAES-DZS8_d3Wj2nZAv4iQba9jC_=ubDznanLtff2ekakOEDV2w@mail.gmail.com>

Hi

I have asked Dimas to check in and see if there is an issue with the
metadata generator again. Will revert to you once he has checked.

Regards

Tim

On Wed, Feb 3, 2021 at 10:14 AM Etienne Trimaille <
etienne.trimaille at gmail.com> wrote:

> Yes, this issue has been confirmed by a few people already.
> Please follow https://github.com/qgis/QGIS-Django/issues/157
>
> Le mer. 3 f?vr. 2021 ? 17:12, Fredrik Lindberg <fredrikl at gvc.gu.se> a
> ?crit :
>
>> Hi all,
>> I uploaded a new plugin yesterday ([2289] Potential Slope Failure for
>> processing) which quickly got approved (thanks) but it does not show up in
>> "Manage and Install Plugins" in QGIS.
>>
>> Any ideas what might have happened or what I have done wrong?
>>
>> Thanks,
>> Fredrik
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/f4704264/attachment-0001.html>

From apasotti at gmail.com  Wed Feb  3 05:20:49 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 3 Feb 2021 14:20:49 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <CAL5Q672+6Uc4=QYt7Kj7j_kVuwyTp5zo0qL+Q84QY_uuhV0YCg@mail.gmail.com>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
 <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
 <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>
 <CAL5Q672+6Uc4=QYt7Kj7j_kVuwyTp5zo0qL+Q84QY_uuhV0YCg@mail.gmail.com>
Message-ID: <CAL5Q672Q+v7WjYS6PkQHtvHDxer+rKqurmERt=Asdtr_8M7O=g@mail.gmail.com>

Hi Richard,

I've put up an example with Apache here:
https://github.com/elpaso/qgis-server-docker

Landing page works out of the box and there is a sample project too.

I'm also having problems seeing the logs from QGIS into the apache
logs though but I cannot spend more time on that now, I don't know at
this point if it's a QGIS issue (not writing to "FCGI_stderr" instead
of "cerr") or if it is mod_fcgid or anything else.

We have mostly switched everything to nginx now and I can't remember
seeing the issue there.

Maybe other server devs know more about logging under apache/FCGI?

Cheers


On Tue, Feb 2, 2021 at 4:40 PM Alessandro Pasotti <apasotti at gmail.com> wrote:
>
> On Tue, Feb 2, 2021 at 3:16 PM Richard Duivenvoorde <rdmailings at duif.net> wrote:
> >
> > On 2/2/21 2:39 PM, Alessandro Pasotti wrote:
> >
> > > Have a look to
> > > https://docs.qgis.org/3.16/en/docs/server_manual/config.html#environment-variables
> > >
> > > You are also using the deprecated QGIS_SERVER_LOG_FILE, use
> > > QGIS_SERVER_LOG_STDERR instead.
> > >
> > > And: QGIS_SERVER_LOG_LEVEL=0 as explained in the a.m. documentation.
> >
> > I'm looking here:
> >
> > https://docs.qgis.org/testing/en/docs/server_manual/config.html#qgis-server-logging
> > https://docs.qgis.org/testing/en/docs/server_manual/getting_started.html#httpserver
> >
> > Too many possible combinations ... :-(
>
> I agree: it's getting better but it's still a mess, anyway: STDERR is
> the way to go.
>
> >
> > > QGIS_DEBUG will do anything if you don't have a debug build.
> >
> > I do have QGIS_DEBUG builds
> >
> > Anyway, I give up. Apparently my linux/qgis/tech/knowledge/magic level is too low to run this beast at this moment.
>
> I'd say that if **you** cannot make it work we have a serious problem.
>
> I'll try to set an example up but at the moment I have too much on my
> plate and I'm busy with bug fixing: it may take a while.
>
> Did you check QGIS_SERVER_API_RESOURCES_DIRECTORY is pointing to
> resources? The default path is calculated by joining
> QgsApplication::pkgDataPath() with "resources/server/api"
>
> Also, you didn't answer my first question (or I missed it): instead of
> the expected landing page, what HTML/XML do you get in the browser?
>
> Note that the landing page will only be served for URL /, so
> http://myserver/ but not for http://myserver/whatever
>
> >
> > Thanks for your time Ale! Sorry for not making it work.
>
> You'll make it eventually, don't give up!
>
> >
> > Regards,
> >
> > Richard
>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Wed Feb  3 05:54:23 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 3 Feb 2021 14:54:23 +0100
Subject: [QGIS-Developer] [ui] blue != blue
Message-ID: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>

Hi,

Am I the only one, getting blind (not really, just finding it not so nice) of the different use of blue for Point Cloud in the Datasource button bars (like in the Data Source Manager).

(see screenshot).

If I would change it via a PR to... for example the lighter blue as in the Vector Tile icon, would others be offended, or would it make a chance to get accepted?

Regards,

Richard Duivenvoorde
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot-20210203144843-140x203.png
Type: image/png
Size: 10540 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/80060552/attachment.png>

From rdmailings at duif.net  Wed Feb  3 06:02:45 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 3 Feb 2021 15:02:45 +0100
Subject: [QGIS-Developer] [ui] blue != blue
In-Reply-To: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
References: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
Message-ID: <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>

On 2/3/21 2:54 PM, Richard Duivenvoorde wrote:
> Hi,
> 
> Am I the only one, getting blind (not really, just finding it not so nice) of the different use of blue for Point Cloud in the Datasource button bars (like in the Data Source Manager).

I do not have a really good feeling for colors, but recently also the Hana icons were added:

https://github.com/qgis/QGIS/blob/master/images/themes/default/mActionAddHanaLayer.svg
https://github.com/qgis/QGIS/blob/master/images/themes/default/mIconHana.svg

does that 'fit' in the 'color scheme'? (asking to peeps with designer/cartography backgrounds)

(not sure who did the earlier cleanup of our icon theme)

Richard

From enricofer at gmail.com  Wed Feb  3 06:58:00 2021
From: enricofer at gmail.com (Enrico Ferreguti)
Date: Wed, 3 Feb 2021 15:58:00 +0100
Subject: [QGIS-Developer] Can't get values from QgsMeshLayer
Message-ID: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>

I'm trying to write a simple function for retrieving wind speed and
direction at a specified moment from a given grib file readable as mesh
layer the prototype script is the following:

mesh = QgsMeshLayer("[path to the attached
grib]/20210202_211414_ICON_EU_P06_.grb2","test","mdal")
#mesh = iface.activeLayer()
p1 = QgsPointXY(1.60301, 38.38453)

ds_group_index = 1

for g in mesh.datasetGroupsIndexes():
    print ("MESH GROUP:", g,
mesh.datasetGroupMetadata(mesh.datasetIndexAtRelativeTime(h0,g)).name())

for i in range(mesh.dataProvider().datasetCount(ds_group_index)):
    meta =
mesh.dataProvider().datasetMetadata(QgsMeshDatasetIndex(ds_group_index, i))
    t = meta.time()
    dataset = QgsMeshDatasetIndex(ds_group_index, i)
    value = mesh.datasetValue(dataset, p1)
    print ("VALUES P1",t,value.scalar(),value.x(),value.y())

When I run the script I can get dataset names from metadata but I'getting
Nan as values
I verified that the grib is loadable in mapcanvas and the sample point is
within grib extent.
I read the note in api (
https://qgis.org/api/classQgsMeshLayer.html#a76a7ec072b4acaf45c1a10f5872c4948)
"It uses previously cached and indexed triangular mesh and so if the layer
has not been rendered previously (e.g. when used in a script) it returns
NaN value" so I tried to process an already loaded mesh (decomment line 2)
without luck.

Is there anybody who can help me finding what I'm doing wrong? Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/cc8bd064/attachment-0001.html>

From charles at kartoza.com  Wed Feb  3 06:59:45 2021
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Wed, 3 Feb 2021 16:59:45 +0200
Subject: [QGIS-Developer] [ui] blue != blue
In-Reply-To: <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>
References: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
 <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>
Message-ID: <CAK2KqicgknESMrDTXvEP7LpuiAGGPiSU7+x9L-YBoO1BaqOv3w@mail.gmail.com>

>From what I can see, the SAP HANA icon is "close enough" in colour scheme
to the existing ones, as I checked the colours for the hana icon against
the postgres one in inkscape and got these results:

Postgis
Fill: #6e97c4ff
Stroke: #476280ff

Hana:
Fill: #6e97c4ff
Stroke: #425a75ff

The design isn't too off-putting, but I feel like there are issues with it:

1) The "bits" around the central chip are not visible against a dark
background, so it's not a "good" design.
2) The generic computer component doesn't seem ideal. It's differentiated
enough from existing providers to be useful, but it's generic enough that
it should be used for some other button or component, not tied to a
"branded" database.

I would personally like to see it using the "SAP" logo, to make a "DB2"
looking replacement, but it might not be ok with their corporate branding
terms. I can't think of a great replacement off the top of my head though.

The point cloud one I feel is pretty jarring and way off. I've attached an
svg of what I think it should look like.

On Wed, 3 Feb 2021 at 16:02, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 2/3/21 2:54 PM, Richard Duivenvoorde wrote:
> > Hi,
> >
> > Am I the only one, getting blind (not really, just finding it not so
> nice) of the different use of blue for Point Cloud in the Datasource button
> bars (like in the Data Source Manager).
>
> I do not have a really good feeling for colors, but recently also the Hana
> icons were added:
>
>
> https://github.com/qgis/QGIS/blob/master/images/themes/default/mActionAddHanaLayer.svg
>
> https://github.com/qgis/QGIS/blob/master/images/themes/default/mIconHana.svg
>
> does that 'fit' in the 'color scheme'? (asking to peeps with
> designer/cartography backgrounds)
>
> (not sure who did the earlier cleanup of our icon theme)
>
> Richard
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/3102e2f6/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mIconPointCloud.svg
Type: image/svg+xml
Size: 15511 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/3102e2f6/attachment.svg>

From vcloarec at gmail.com  Wed Feb  3 07:26:43 2021
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Wed, 3 Feb 2021 11:26:43 -0400
Subject: [QGIS-Developer] Can't get values from QgsMeshLayer
In-Reply-To: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>
References: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>
Message-ID: <CAHaTM5XPSZg_=JT3cPqCLoyHBsMgpr1xt7ZbYFYcWM+Q5vQ2rA@mail.gmail.com>

Hi Enrico,

As that will depend of the version of QGIS, which version do you use?

Le mer. 3 f?vr. 2021 ? 10:59, Enrico Ferreguti <enricofer at gmail.com> a
?crit :

> I'm trying to write a simple function for retrieving wind speed and
> direction at a specified moment from a given grib file readable as mesh
> layer the prototype script is the following:
>
> mesh = QgsMeshLayer("[path to the attached
> grib]/20210202_211414_ICON_EU_P06_.grb2","test","mdal")
> #mesh = iface.activeLayer()
> p1 = QgsPointXY(1.60301, 38.38453)
>
> ds_group_index = 1
>
> for g in mesh.datasetGroupsIndexes():
>     print ("MESH GROUP:", g,
> mesh.datasetGroupMetadata(mesh.datasetIndexAtRelativeTime(h0,g)).name())
>
> for i in range(mesh.dataProvider().datasetCount(ds_group_index)):
>     meta =
> mesh.dataProvider().datasetMetadata(QgsMeshDatasetIndex(ds_group_index, i))
>     t = meta.time()
>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>     value = mesh.datasetValue(dataset, p1)
>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>
> When I run the script I can get dataset names from metadata but I'getting
> Nan as values
> I verified that the grib is loadable in mapcanvas and the sample point is
> within grib extent.
> I read the note in api (
> https://qgis.org/api/classQgsMeshLayer.html#a76a7ec072b4acaf45c1a10f5872c4948)
> "It uses previously cached and indexed triangular mesh and so if the layer
> has not been rendered previously (e.g. when used in a script) it returns
> NaN value" so I tried to process an already loaded mesh (decomment line 2)
> without luck.
>
> Is there anybody who can help me finding what I'm doing wrong? Thanks.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/b6d4cda6/attachment-0001.html>

From enricofer at gmail.com  Wed Feb  3 07:30:56 2021
From: enricofer at gmail.com (Enrico Ferreguti)
Date: Wed, 3 Feb 2021 16:30:56 +0100
Subject: [QGIS-Developer] Can't get values from QgsMeshLayer
In-Reply-To: <CAHaTM5XPSZg_=JT3cPqCLoyHBsMgpr1xt7ZbYFYcWM+Q5vQ2rA@mail.gmail.com>
References: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>
 <CAHaTM5XPSZg_=JT3cPqCLoyHBsMgpr1xt7ZbYFYcWM+Q5vQ2rA@mail.gmail.com>
Message-ID: <CAJy=XtdXy26FxECbSJ2o85v=ERufXg4OOzBa2CDs-Ay2knexGg@mail.gmail.com>

3.16
The attachment was missing.
You can download it from here:
https://beato.duckdns.org/nextcloud/s/Ra4opS94zYfgfXa

Il mer 3 feb 2021, 16:26 Vincent Cloarec <vcloarec at gmail.com> ha scritto:

> Hi Enrico,
>
> As that will depend of the version of QGIS, which version do you use?
>
> Le mer. 3 f?vr. 2021 ? 10:59, Enrico Ferreguti <enricofer at gmail.com> a
> ?crit :
>
>> I'm trying to write a simple function for retrieving wind speed and
>> direction at a specified moment from a given grib file readable as mesh
>> layer the prototype script is the following:
>>
>> mesh = QgsMeshLayer("[path to the attached
>> grib]/20210202_211414_ICON_EU_P06_.grb2","test","mdal")
>> #mesh = iface.activeLayer()
>> p1 = QgsPointXY(1.60301, 38.38453)
>>
>> ds_group_index = 1
>>
>> for g in mesh.datasetGroupsIndexes():
>>     print ("MESH GROUP:", g,
>> mesh.datasetGroupMetadata(mesh.datasetIndexAtRelativeTime(h0,g)).name())
>>
>> for i in range(mesh.dataProvider().datasetCount(ds_group_index)):
>>     meta =
>> mesh.dataProvider().datasetMetadata(QgsMeshDatasetIndex(ds_group_index, i))
>>     t = meta.time()
>>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>>     value = mesh.datasetValue(dataset, p1)
>>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>>
>> When I run the script I can get dataset names from metadata but I'getting
>> Nan as values
>> I verified that the grib is loadable in mapcanvas and the sample point is
>> within grib extent.
>> I read the note in api (
>> https://qgis.org/api/classQgsMeshLayer.html#a76a7ec072b4acaf45c1a10f5872c4948)
>> "It uses previously cached and indexed triangular mesh and so if the layer
>> has not been rendered previously (e.g. when used in a script) it returns
>> NaN value" so I tried to process an already loaded mesh (decomment line 2)
>> without luck.
>>
>> Is there anybody who can help me finding what I'm doing wrong? Thanks.
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/c65ae31c/attachment.html>

From vcloarec at gmail.com  Wed Feb  3 08:14:17 2021
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Wed, 3 Feb 2021 12:14:17 -0400
Subject: [QGIS-Developer] Can't get values from QgsMeshLayer
In-Reply-To: <CAJy=XtdXy26FxECbSJ2o85v=ERufXg4OOzBa2CDs-Ay2knexGg@mail.gmail.com>
References: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>
 <CAHaTM5XPSZg_=JT3cPqCLoyHBsMgpr1xt7ZbYFYcWM+Q5vQ2rA@mail.gmail.com>
 <CAJy=XtdXy26FxECbSJ2o85v=ERufXg4OOzBa2CDs-Ay2knexGg@mail.gmail.com>
Message-ID: <CAHaTM5Ve7dpw1LLg=LZvCH+Rn3Vz6VPJvo0ix8ZEO8Jc195wxw@mail.gmail.com>

I rewrite your script :

##############################################################
mesh=QgsMeshLayer('/your/path//20210202_211414_ICON_EU_P06_.grb2','mesh','mdal')
print("mesh is valid:",mesh.isValid())

# First, we need to build the triangular mesh used to render and access the
mesh from the layer
# QgsCoordinatesTransform is needed, here we build one with destination to
the map but could be other one
# If the layer is already render in the map, no need to do that if we want
it in the same coordinates than the map

destinationCrs=iface.mapCanvas().mapSettings().destinationCrs()
transform=QgsCoordinateTransform(mesh.crs(),destinationCrs,QgsProject.instance().transformContext())
mesh.updateTriangularMesh(transform)

p1 = QgsPointXY(1.60301, 38.38453)

ds_group_index = 1

for g in mesh.datasetGroupsIndexes():
    print ("MESH GROUP:", g,
mesh.datasetGroupMetadata(QgsMeshDatasetIndex(g,0)).name())

for i in range(mesh.datasetCount(QgsMeshDatasetIndex(ds_group_index,0))):
    dataset = QgsMeshDatasetIndex(ds_group_index, i)
    meta = mesh.datasetMetadata(dataset)
    t = meta.time()
    value = mesh.datasetValue(dataset, p1)
    print ("VALUES P1",t,value.scalar(),value.x(),value.y())
##################################################################################


Be careful to not mix QgsMeshDatasetIndex index from provider with
QgsMeshDatasetIndex from layer. Indeed, since 3.16 we can have extra
dataset group (for example virtual one), the layer handles with its own way
the group indexes

Le mer. 3 f?vr. 2021 ? 11:31, Enrico Ferreguti <enricofer at gmail.com> a
?crit :

> 3.16
> The attachment was missing.
> You can download it from here:
> https://beato.duckdns.org/nextcloud/s/Ra4opS94zYfgfXa
>
> Il mer 3 feb 2021, 16:26 Vincent Cloarec <vcloarec at gmail.com> ha scritto:
>
>> Hi Enrico,
>>
>> As that will depend of the version of QGIS, which version do you use?
>>
>> Le mer. 3 f?vr. 2021 ? 10:59, Enrico Ferreguti <enricofer at gmail.com> a
>> ?crit :
>>
>>> I'm trying to write a simple function for retrieving wind speed and
>>> direction at a specified moment from a given grib file readable as mesh
>>> layer the prototype script is the following:
>>>
>>> mesh = QgsMeshLayer("[path to the attached
>>> grib]/20210202_211414_ICON_EU_P06_.grb2","test","mdal")
>>> #mesh = iface.activeLayer()
>>> p1 = QgsPointXY(1.60301, 38.38453)
>>>
>>> ds_group_index = 1
>>>
>>> for g in mesh.datasetGroupsIndexes():
>>>     print ("MESH GROUP:", g,
>>> mesh.datasetGroupMetadata(mesh.datasetIndexAtRelativeTime(h0,g)).name())
>>>
>>> for i in range(mesh.dataProvider().datasetCount(ds_group_index)):
>>>     meta =
>>> mesh.dataProvider().datasetMetadata(QgsMeshDatasetIndex(ds_group_index, i))
>>>     t = meta.time()
>>>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>>>     value = mesh.datasetValue(dataset, p1)
>>>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>>>
>>> When I run the script I can get dataset names from metadata but
>>> I'getting Nan as values
>>> I verified that the grib is loadable in mapcanvas and the sample point
>>> is within grib extent.
>>> I read the note in api (
>>> https://qgis.org/api/classQgsMeshLayer.html#a76a7ec072b4acaf45c1a10f5872c4948)
>>> "It uses previously cached and indexed triangular mesh and so if the layer
>>> has not been rendered previously (e.g. when used in a script) it returns
>>> NaN value" so I tried to process an already loaded mesh (decomment line 2)
>>> without luck.
>>>
>>> Is there anybody who can help me finding what I'm doing wrong? Thanks.
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/4fd41c26/attachment.html>

From rdmailings at duif.net  Wed Feb  3 08:23:54 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 3 Feb 2021 17:23:54 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <CAL5Q672Q+v7WjYS6PkQHtvHDxer+rKqurmERt=Asdtr_8M7O=g@mail.gmail.com>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
 <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
 <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>
 <CAL5Q672+6Uc4=QYt7Kj7j_kVuwyTp5zo0qL+Q84QY_uuhV0YCg@mail.gmail.com>
 <CAL5Q672Q+v7WjYS6PkQHtvHDxer+rKqurmERt=Asdtr_8M7O=g@mail.gmail.com>
Message-ID: <5f2b2d6b-9ce3-be7c-8d78-d553259d17b3@duif.net>

On 2/3/21 2:20 PM, Alessandro Pasotti wrote:
> Hi Richard,
> 
> I've put up an example with Apache here:
> https://github.com/elpaso/qgis-server-docker
> 
> Landing page works out of the box and there is a sample project too.
> 
> I'm also having problems seeing the logs from QGIS into the apache
> logs though but I cannot spend more time on that now, I don't know at
> this point if it's a QGIS issue (not writing to "FCGI_stderr" instead
> of "cerr") or if it is mod_fcgid or anything else.
> 
> We have mostly switched everything to nginx now and I can't remember
> seeing the issue there.
> 
> Maybe other server devs know more about logging under apache/FCGI?

Hi Ale,

Thanks for trying to help me.

I am able to run your docker, and indeed then I get the what I call "QGIS Server Catalog" page.

At least NOW I can see logs here locally, although they show up in the default error.log apache log (I run a very vanilla apache here on my laptop).

But I still fail to see the same "QGIS Server Catalog" when I run it in cgi-bin.

I do see that in the docker there seems to be some redirection? The config works for localhost/ but I think most peeps will (at least try) first in their local cgi-bin and so will use the url:
http://localhost/cgi-bin/qgis_mapserv.fcgi/

If I do:
 http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/collections?
shows me the wfs3 api landing page
but 
 http://localhost/cgi-bin/qgis_mapserv.fcgi/
just gives me the OWS xml errors

Some other remarks (at least here with me):
- the FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES does not seem to be picked up???
I only get Feature collections when I put the qgz project files next to the qgis_mapserv.fcgi OR point QGIS to it via the ?map= parameter

So yes, if anybody is able to 'just run' QGIS-server on apache, please let me know.

NOTE: WMS/WFS/WFS3 is working! It's just that I do not have the "QGIS Server Catalog" landing page etc...

Can it have something to do with the fact that I do not run it on the root of the webserver?

FYI: the part of the apache config I now use below, AND the logfile (tail -f error.log | grep INFO) after I restart Apache, and first go to:
http://localhost/cgi-bin/qgis_mapserv.fcgi/
and then to
http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3

As you can see QGIS seem to pick up the QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES (with a couple of qgz files which normally work AND with qgz in a directory in it (because...PROJECTS_DIRECTORIES).

(note for others: I run a self compiled master, so normally you do not need the PYTHONPATH LD_LIBRARY_PATH or QGIS_PREFIX_PATH etc


Header set Access-Control-Allow-Origin "*"

 <IfModule mod_fcgid.c>

     RewriteEngine on
     RewriteCond %{HTTP:Authorization} .
     RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

     # mostly from: https://github.com/elpaso/qgis-server-docker/blob/production/default.conf
     # Longer timeout for WPS... default = 40
     
     FcgidIOTimeout 120
     FcgidInitialEnv LC_ALL "en_US.UTF-8"
     FcgidInitialEnv PYTHONIOENCODING UTF-8
     FcgidInitialEnv LANG "en_US.UTF-8"
     FcgidInitialEnv QGIS_SERVER_LOG_LEVEL "0"
     FcgidInitialEnv QGIS_SERVER_LOG_STDERR "1"
     #FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES "/tmp/qgisserver/"                   # <= these both seem not te be picked up...
     FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES "/home/richard/z/21/qgis/qgisserver"  # <= these both seem not te be picked up...
     FcgidInitialEnv QGIS_SERVER_PARALLEL_RENDERING "1"

     # needed because I run my selfcompiled QGIS:
     FcgidInitialEnv PYTHONPATH "/home/richard/bin/qgis_/master/debug/share/qgis/python"
     FcgidInitialEnv LD_LIBRARY_PATH "/home/richard/bin/qgis_/master/debug/lib/:/home/richard/bin/gdal/lib"
     FcgidInitialEnv QGIS_PREFIX_PATH "/home/richard/bin/qgis_/master/debug"

     # Pass display number to QGIS Server instances
     #FcgidInitialEnv DISPLAY ":99"         # <= this fails with me
     FcgidInitialEnv HOME "/home/richard"   # needed with me to load default QGIS.ini settings (auth db etc)

     FcgidConnectTimeout 20
     IdleTimeout 300
     BusyTimeout 300
     ProcessLifeTime 7200
     IPCConnectTimeout 300
     IPCCommTimeout 7200

 </IfModule>




16:38:51 INFO Server[31098]: QGIS Server Settings: 
16:38:51 INFO Server[31098]:   - QGIS_OPTIONS_PATH / '' (Override the default path for user configuration): '' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_PARALLEL_RENDERING / '/qgis/parallel_rendering' (Activate/Deactivate parallel rendering for WMS getMap request): '1' (read from ENVIRONMENT_VARIABLE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_MAX_THREADS / '/qgis/max_threads' (Number of threads to use when parallel rendering is activated): '-1' (read from INI_FILE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_LOG_LEVEL / '' (Log level): '0' (read from ENVIRONMENT_VARIABLE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_LOG_FILE / '' (Log file): '' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_LOG_STDERR / '' (Activate/Deactivate logging to stderr): '1' (read from ENVIRONMENT_VARIABLE)
16:38:51 INFO Server[31098]:   - QGIS_PROJECT_FILE / '' (QGIS project file): '' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_IGNORE_BAD_LAYERS / '' (Ignore bad layers): 'false' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_CACHE_DIRECTORY / '/cache/directory' (Specify the cache directory): '/home/richard/.local/share/QGIS/QGIS3/profiles/default/cache' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_CACHE_SIZE / '/cache/size' (Specify the cache size): '52428800' (read from INI_FILE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_SHOW_GROUP_SEPARATOR / '/locale/showGroupSeparator' (Show group (thousands) separator): 'false' (read from INI_FILE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_OVERRIDE_SYSTEM_LOCALE / '/locale/userLocale' (Override system locale): 'en_US' (read from INI_FILE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_WMS_MAX_HEIGHT / '/qgis/max_wms_height' (Maximum height for a WMS request. The lower one of this and the project configuration is used.): '-1' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_WMS_MAX_WIDTH / '/qgis/max_wms_width' (Maximum width for a WMS request. The most conservative between this and the project one is used): '-1' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_API_RESOURCES_DIRECTORY / '/qgis/server_api_resources_directory' (Base directory where HTML templates and static assets (e.g. images, js and css files) are searched for): '/home/richard/bin/qgis_/master/debug/share/qgis/resources/server/api' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_API_WFS3_MAX_LIMIT / '/qgis/server_api_wfs3_max_limit' (Maximum value for "limit" in a features request, defaults to 10000): '10000' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_TRUST_LAYER_METADATA / '' (Trust layer metadata): 'false' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_DISABLE_GETPRINT / '' (Don't load layouts): 'false' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES / '/qgis/server_projects_directories' (Directories used by the landing page service to find .qgs and .qgz projects): '/home/richard/z/21/qgis/qgisserver' (read from ENVIRONMENT_VARIABLE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_PG_CONNECTIONS / '/qgis/server_projects_pg_connections' (PostgreSQL connection strings used by the landing page service to find projects): '' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]:   - QGIS_SERVER_LOG_PROFILE / '/qgis/server_log_profile' (Add detailed profile information to the logs, only effective when QGIS_SERVER_LOG_LEVEL=0): 'false' (read from DEFAULT_VALUE)
16:38:51 INFO Server[31098]: Ini file used to initialize settings: /home/richard/.local/share/QGIS/QGIS3/profiles/default/QGIS/QGIS3.ini
16:38:51 INFO Server[31098]: cacheDirectory: /home/richard/.local/share/QGIS/QGIS3/profiles/default/cache/
16:38:51 INFO Server[31098]: maximumCacheSize: 52428800
16:38:51 INFO Server[31098]: Prefix  PATH: /home/richard/bin/qgis_/master/debug
16:38:51 INFO Server[31098]: Plugin  PATH: /home/richard/bin/qgis_/master/debug/lib/qgis/plugins
16:38:51 INFO Server[31098]: PkgData PATH: /home/richard/bin/qgis_/master/debug/share/qgis
16:38:51 INFO Server[31098]: User DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis.db
16:38:51 INFO Server[31098]: Auth DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis-auth.db
16:38:51 INFO Server[31098]: SVG PATHS: /home/richard/bin/qgis_/master/debug/share/qgis/svg/:/home/richard/.local/share/QGIS/QGIS3/profiles/default/resource_sharing/collections:/home/richard/.local/share/QGIS/QGIS3/profiles/default/svg/:/home/richard/bin/geoserver/geoserver-2.15.2/data_dir/styles:/home/richard/git/qgisqt2/build/debug/output/data/svg/:/home/richard/git/qgisqt2/svg/:/home/richard/bin/qgis_/3.10/debug/share/qgis/svg/:/home/richard/git/build-qgisqt-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt/svg/:/svg/:/home/richard/bin/qgis_/3.16/debug/share/qgis/svg/:/home/richard/git/build-qgisqt2-Desktop-Debug/output/data/svg/:/home/richard/git/build-qgisqt3-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt3/svg/
16:38:52 INFO Server[31098]: Adding service SampleService 1.0
16:38:52 INFO [31098]: Adding API Landing Page 
16:38:52 INFO Server[31098]: Adding service WCS 1.0.0
16:38:52 INFO Server[31098]: Adding service WFS 1.1.0
16:38:52 INFO [31098]: Adding API OGC WFS3 (Draft) 
16:38:52 INFO Server[31098]: Adding service WMS 1.3.0
16:38:52 INFO Server[31098]: Adding service WMTS 1.0.0
16:38:52 INFO Server[31098]: Server initialized
16:38:52 INFO ../src/server/qgsserverplugins.cpp[31098]: load library /home/richard/bin/qgis_/master/debug/lib/qgispython (3.17.0)
16:38:52 INFO ../src/server/qgsserverplugins.cpp[31098]: Python support library loaded successfully.
16:38:52 INFO Server[31098]: No server python plugins are available
16:38:52 INFO Server[31098]: ******************** New request ***************
16:38:52 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/?
16:38:52 INFO Server[31098]: Environment:
16:38:52 INFO Server[31098]: ------------------------------------------------
16:38:52 INFO Server[31098]: SERVER_NAME: localhost
16:38:52 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/
16:38:52 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
16:38:52 INFO Server[31098]: REMOTE_ADDR: ::1
16:38:52 INFO Server[31098]: SERVER_PORT: 80
16:38:52 INFO Server[31098]: QUERY_STRING: 
16:38:52 INFO Server[31098]: REQUEST_METHOD: GET
16:38:52 INFO Server[31098]: HTTP_ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
16:38:52 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
16:38:52 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/' for '/wfs3'
16:38:52 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/' for '/'
16:38:52 INFO Server[31098]: Request finished in 0 ms
16:39:45 INFO Server[31098]: ******************** New request ***************
16:39:45 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi?
16:39:45 INFO Server[31098]: Environment:
16:39:45 INFO Server[31098]: ------------------------------------------------
16:39:45 INFO Server[31098]: SERVER_NAME: localhost
16:39:45 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi
16:39:45 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
16:39:45 INFO Server[31098]: REMOTE_ADDR: ::1
16:39:45 INFO Server[31098]: SERVER_PORT: 80
16:39:45 INFO Server[31098]: QUERY_STRING: 
16:39:45 INFO Server[31098]: REQUEST_METHOD: GET
16:39:45 INFO Server[31098]: HTTP_ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
16:39:45 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
16:39:45 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi' for '/wfs3'
16:39:45 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi' for '/'
16:39:45 INFO Server[31098]: Request finished in 0 ms
16:40:05 INFO Server[31098]: ******************** New request ***************
16:40:05 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3?
16:40:05 INFO Server[31098]: Environment:
16:40:05 INFO Server[31098]: ------------------------------------------------
16:40:05 INFO Server[31098]: SERVER_NAME: localhost
16:40:05 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/wfs3
16:40:05 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
16:40:05 INFO Server[31098]: REMOTE_ADDR: ::1
16:40:05 INFO Server[31098]: SERVER_PORT: 80
16:40:05 INFO Server[31098]: QUERY_STRING: 
16:40:05 INFO Server[31098]: REQUEST_METHOD: GET
16:40:05 INFO Server[31098]: HTTP_ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
16:40:05 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
16:40:05 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/wfs3' for '/wfs3'
16:40:05 INFO Server[31098]: API OGC WFS3 (Draft) accepts the URL path '/cgi-bin/qgis_mapserv.fcgi/wfs3' 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html|/)?$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html|/)?$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /collections(\.json|\.html|/)?$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /collections/(?<collectionId>[^/]+?)(\.json|\.html|/)?$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /conformance 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /static/(?<staticFilePath>.*)$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /api 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for (.html|.json)?$ 
16:40:05 INFO Server[31098]: API OGC WFS3 (Draft): found handler getLandingPage
16:40:05 INFO Server[31098]: Request finished in 4 ms
16:40:05 INFO Server[31098]: ******************** New request ***************
16:40:05 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css?
16:40:05 INFO Server[31098]: Environment:
16:40:05 INFO Server[31098]: ------------------------------------------------
16:40:05 INFO Server[31098]: SERVER_NAME: localhost
16:40:05 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css
16:40:05 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
16:40:05 INFO Server[31098]: REMOTE_ADDR: ::1
16:40:05 INFO Server[31098]: SERVER_PORT: 80
16:40:05 INFO Server[31098]: QUERY_STRING: 
16:40:05 INFO Server[31098]: REQUEST_METHOD: GET
16:40:05 INFO Server[31098]: HTTP_ACCEPT: text/css,*/*;q=0.1
16:40:05 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
16:40:05 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css' for '/wfs3'
16:40:05 INFO Server[31098]: API OGC WFS3 (Draft) accepts the URL path '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css' 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html|/)?$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html|/)?$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /collections(\.json|\.html|/)?$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /collections/(?<collectionId>[^/]+?)(\.json|\.html|/)?$ 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /conformance 
16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /static/(?<staticFilePath>.*)$ 
16:40:05 INFO Server[31098]: API OGC WFS3 (Draft): found handler static
16:40:05 INFO Server[31098]: Request finished in 1 ms
16:40:06 INFO Server[31098]: ******************** New request ***************
16:40:06 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js?
16:40:06 INFO Server[31098]: Environment:
16:40:06 INFO Server[31098]: ------------------------------------------------
16:40:06 INFO Server[31098]: SERVER_NAME: localhost
16:40:06 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js
16:40:06 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
16:40:06 INFO Server[31098]: REMOTE_ADDR: ::1
16:40:06 INFO Server[31098]: SERVER_PORT: 80
16:40:06 INFO Server[31098]: QUERY_STRING: 
16:40:06 INFO Server[31098]: REQUEST_METHOD: GET
16:40:06 INFO Server[31098]: HTTP_ACCEPT: */*
16:40:06 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
16:40:06 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js' for '/wfs3'
16:40:06 INFO Server[31098]: API OGC WFS3 (Draft) accepts the URL path '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js' 
16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html|/)?$ 
16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html|/)?$ 
16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /collections(\.json|\.html|/)?$ 
16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+?)(\.json|\.html|/)?$ 
16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /conformance 
16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /static/(?<staticFilePath>.*)$ 
16:40:06 INFO Server[31098]: API OGC WFS3 (Draft): found handler static
16:40:06 INFO Server[31098]: Request finished in 3 ms
16:40:06 INFO Server[31165]: QGIS Server Settings: 
16:40:06 INFO Server[31165]:   - QGIS_OPTIONS_PATH / '' (Override the default path for user configuration): '' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_PARALLEL_RENDERING / '/qgis/parallel_rendering' (Activate/Deactivate parallel rendering for WMS getMap request): '1' (read from ENVIRONMENT_VARIABLE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_MAX_THREADS / '/qgis/max_threads' (Number of threads to use when parallel rendering is activated): '-1' (read from INI_FILE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_LOG_LEVEL / '' (Log level): '0' (read from ENVIRONMENT_VARIABLE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_LOG_FILE / '' (Log file): '' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_LOG_STDERR / '' (Activate/Deactivate logging to stderr): '1' (read from ENVIRONMENT_VARIABLE)
16:40:06 INFO Server[31165]:   - QGIS_PROJECT_FILE / '' (QGIS project file): '' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_IGNORE_BAD_LAYERS / '' (Ignore bad layers): 'false' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_CACHE_DIRECTORY / '/cache/directory' (Specify the cache directory): '/home/richard/.local/share/QGIS/QGIS3/profiles/default/cache' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_CACHE_SIZE / '/cache/size' (Specify the cache size): '52428800' (read from INI_FILE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_SHOW_GROUP_SEPARATOR / '/locale/showGroupSeparator' (Show group (thousands) separator): 'false' (read from INI_FILE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_OVERRIDE_SYSTEM_LOCALE / '/locale/userLocale' (Override system locale): 'en_US' (read from INI_FILE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_WMS_MAX_HEIGHT / '/qgis/max_wms_height' (Maximum height for a WMS request. The lower one of this and the project configuration is used.): '-1' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_WMS_MAX_WIDTH / '/qgis/max_wms_width' (Maximum width for a WMS request. The most conservative between this and the project one is used): '-1' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_API_RESOURCES_DIRECTORY / '/qgis/server_api_resources_directory' (Base directory where HTML templates and static assets (e.g. images, js and css files) are searched for): '/home/richard/bin/qgis_/master/debug/share/qgis/resources/server/api' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_API_WFS3_MAX_LIMIT / '/qgis/server_api_wfs3_max_limit' (Maximum value for "limit" in a features request, defaults to 10000): '10000' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_TRUST_LAYER_METADATA / '' (Trust layer metadata): 'false' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_DISABLE_GETPRINT / '' (Don't load layouts): 'false' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES / '/qgis/server_projects_directories' (Directories used by the landing page service to find .qgs and .qgz projects): '/home/richard/z/21/qgis/qgisserver' (read from ENVIRONMENT_VARIABLE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_PG_CONNECTIONS / '/qgis/server_projects_pg_connections' (PostgreSQL connection strings used by the landing page service to find projects): '' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]:   - QGIS_SERVER_LOG_PROFILE / '/qgis/server_log_profile' (Add detailed profile information to the logs, only effective when QGIS_SERVER_LOG_LEVEL=0): 'false' (read from DEFAULT_VALUE)
16:40:06 INFO Server[31165]: Ini file used to initialize settings: /home/richard/.local/share/QGIS/QGIS3/profiles/default/QGIS/QGIS3.ini
16:40:06 INFO Server[31165]: cacheDirectory: /home/richard/.local/share/QGIS/QGIS3/profiles/default/cache/
16:40:06 INFO Server[31165]: maximumCacheSize: 52428800
16:40:06 INFO Server[31165]: Prefix  PATH: /home/richard/bin/qgis_/master/debug
16:40:06 INFO Server[31165]: Plugin  PATH: /home/richard/bin/qgis_/master/debug/lib/qgis/plugins
16:40:06 INFO Server[31165]: PkgData PATH: /home/richard/bin/qgis_/master/debug/share/qgis
16:40:06 INFO Server[31165]: User DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis.db
16:40:06 INFO Server[31165]: Auth DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis-auth.db
16:40:06 INFO Server[31165]: SVG PATHS: /home/richard/bin/qgis_/master/debug/share/qgis/svg/:/home/richard/.local/share/QGIS/QGIS3/profiles/default/resource_sharing/collections:/home/richard/.local/share/QGIS/QGIS3/profiles/default/svg/:/home/richard/bin/geoserver/geoserver-2.15.2/data_dir/styles:/home/richard/git/qgisqt2/build/debug/output/data/svg/:/home/richard/git/qgisqt2/svg/:/home/richard/bin/qgis_/3.10/debug/share/qgis/svg/:/home/richard/git/build-qgisqt-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt/svg/:/svg/:/home/richard/bin/qgis_/3.16/debug/share/qgis/svg/:/home/richard/git/build-qgisqt2-Desktop-Debug/output/data/svg/:/home/richard/git/build-qgisqt3-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt3/svg/
16:40:06 INFO Server[31165]: Adding service SampleService 1.0
16:40:06 INFO [31165]: Adding API Landing Page 
16:40:06 INFO Server[31165]: Adding service WCS 1.0.0
16:40:06 INFO Server[31165]: Adding service WFS 1.1.0
16:40:06 INFO [31165]: Adding API OGC WFS3 (Draft) 
16:40:06 INFO Server[31165]: Adding service WMS 1.3.0
16:40:06 INFO Server[31165]: Adding service WMTS 1.0.0
16:40:06 INFO Server[31165]: Server initialized
16:40:06 INFO ../src/server/qgsserverplugins.cpp[31165]: load library /home/richard/bin/qgis_/master/debug/lib/qgispython (3.17.0)
16:40:06 INFO ../src/server/qgsserverplugins.cpp[31165]: Python support library loaded successfully.
16:40:07 INFO Server[31165]: No server python plugins are available
16:40:07 INFO Server[31165]: ******************** New request ***************
16:40:07 INFO Server[31165]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css?
16:40:07 INFO Server[31165]: Environment:
16:40:07 INFO Server[31165]: ------------------------------------------------
16:40:07 INFO Server[31165]: SERVER_NAME: localhost
16:40:07 INFO Server[31165]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css
16:40:07 INFO Server[31165]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
16:40:07 INFO Server[31165]: REMOTE_ADDR: ::1
16:40:07 INFO Server[31165]: SERVER_PORT: 80
16:40:07 INFO Server[31165]: QUERY_STRING: 
16:40:07 INFO Server[31165]: REQUEST_METHOD: GET
16:40:07 INFO Server[31165]: HTTP_ACCEPT: text/css,*/*;q=0.1
16:40:07 INFO Server[31165]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
16:40:07 INFO Server[31165]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css' for '/wfs3'
16:40:07 INFO Server[31165]: API OGC WFS3 (Draft) accepts the URL path '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css' 
16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html|/)?$ 
16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html|/)?$ 
16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /collections(\.json|\.html|/)?$ 
16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /collections/(?<collectionId>[^/]+?)(\.json|\.html|/)?$ 
16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /conformance 
16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /static/(?<staticFilePath>.*)$ 
16:40:07 INFO Server[31165]: API OGC WFS3 (Draft): found handler static
16:40:07 INFO Server[31165]: Request finished in 1 ms


From senhor.neto at gmail.com  Wed Feb  3 08:25:56 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Wed, 3 Feb 2021 16:25:56 +0000
Subject: [QGIS-Developer] [ui] blue != blue
In-Reply-To: <CAK2KqicgknESMrDTXvEP7LpuiAGGPiSU7+x9L-YBoO1BaqOv3w@mail.gmail.com>
References: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
 <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>
 <CAK2KqicgknESMrDTXvEP7LpuiAGGPiSU7+x9L-YBoO1BaqOv3w@mail.gmail.com>
Message-ID: <CA+H0G_HRJRi_+cz2NKMs-0Vc0fc87uUzhSdKnUZQJXiA0CAChg@mail.gmail.com>

Richard, can you create an issue and assign it to me? I will give it a look.

Thanks,

Alex

A quarta, 3/02/2021, 15:00, Charles Dixon-Paver <charles at kartoza.com>
escreveu:

> From what I can see, the SAP HANA icon is "close enough" in colour scheme
> to the existing ones, as I checked the colours for the hana icon against
> the postgres one in inkscape and got these results:
>
> Postgis
> Fill: #6e97c4ff
> Stroke: #476280ff
>
> Hana:
> Fill: #6e97c4ff
> Stroke: #425a75ff
>
> The design isn't too off-putting, but I feel like there are issues with it:
>
> 1) The "bits" around the central chip are not visible against a dark
> background, so it's not a "good" design.
> 2) The generic computer component doesn't seem ideal. It's differentiated
> enough from existing providers to be useful, but it's generic enough that
> it should be used for some other button or component, not tied to a
> "branded" database.
>
> I would personally like to see it using the "SAP" logo, to make a "DB2"
> looking replacement, but it might not be ok with their corporate branding
> terms. I can't think of a great replacement off the top of my head though.
>
> The point cloud one I feel is pretty jarring and way off. I've attached an
> svg of what I think it should look like.
>
> On Wed, 3 Feb 2021 at 16:02, Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
>> On 2/3/21 2:54 PM, Richard Duivenvoorde wrote:
>> > Hi,
>> >
>> > Am I the only one, getting blind (not really, just finding it not so
>> nice) of the different use of blue for Point Cloud in the Datasource button
>> bars (like in the Data Source Manager).
>>
>> I do not have a really good feeling for colors, but recently also the
>> Hana icons were added:
>>
>>
>> https://github.com/qgis/QGIS/blob/master/images/themes/default/mActionAddHanaLayer.svg
>>
>> https://github.com/qgis/QGIS/blob/master/images/themes/default/mIconHana.svg
>>
>> does that 'fit' in the 'color scheme'? (asking to peeps with
>> designer/cartography backgrounds)
>>
>> (not sure who did the earlier cleanup of our icon theme)
>>
>> Richard
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/e2e1c1e4/attachment.html>

From apasotti at gmail.com  Wed Feb  3 08:47:24 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 3 Feb 2021 17:47:24 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <5f2b2d6b-9ce3-be7c-8d78-d553259d17b3@duif.net>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
 <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
 <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>
 <CAL5Q672+6Uc4=QYt7Kj7j_kVuwyTp5zo0qL+Q84QY_uuhV0YCg@mail.gmail.com>
 <CAL5Q672Q+v7WjYS6PkQHtvHDxer+rKqurmERt=Asdtr_8M7O=g@mail.gmail.com>
 <5f2b2d6b-9ce3-be7c-8d78-d553259d17b3@duif.net>
Message-ID: <CAL5Q673kBhk0xN5_5=6JtOD5w492fzX5fDHvJFpzyOT=6wp0UQ@mail.gmail.com>

On Wed, Feb 3, 2021 at 5:23 PM Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> On 2/3/21 2:20 PM, Alessandro Pasotti wrote:
> > Hi Richard,
> >
> > I've put up an example with Apache here:
> > https://github.com/elpaso/qgis-server-docker
> >
> > Landing page works out of the box and there is a sample project too.
> >
> > I'm also having problems seeing the logs from QGIS into the apache
> > logs though but I cannot spend more time on that now, I don't know at
> > this point if it's a QGIS issue (not writing to "FCGI_stderr" instead
> > of "cerr") or if it is mod_fcgid or anything else.
> >
> > We have mostly switched everything to nginx now and I can't remember
> > seeing the issue there.
> >
> > Maybe other server devs know more about logging under apache/FCGI?
>
> Hi Ale,
>
> Thanks for trying to help me.
>
> I am able to run your docker, and indeed then I get the what I call "QGIS Server Catalog" page.
>
> At least NOW I can see logs here locally, although they show up in the default error.log apache log (I run a very vanilla apache here on my laptop).
>
> But I still fail to see the same "QGIS Server Catalog" when I run it in cgi-bin.
>
> I do see that in the docker there seems to be some redirection? The config works for localhost/ but I think most peeps will (at least try) first in their local cgi-bin and so will use the url:
> http://localhost/cgi-bin/qgis_mapserv.fcgi/
>

This won't work: the problem is that we can match for `/wfs3/` (for
the WFS3 landing page) but we cannot match for a simple `/` (for the
catalog) in a long URL, so the landing page will only show up for an
URL `/` (it's a landing page after all).

IMO in a real deployment no one will ever use the path
/cgi-bin/qgis_mapserv.fcgi without rewriting it so I don't think it's
a real issue, anyway a possible solution would be to create yet
another server setting that allows us to specify the base path of the
server (in your case: `/cgi-bin/qgis_mapserv.fcgi`) so that we can
prepend it to the match (that would become
`/cgi-bin/qgis_mapserv.fcgi/`).

This is the reason for:
https://github.com/elpaso/qgis-server-docker/blob/production/default.conf#L45


> If I do:
>  http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/collections?
> shows me the wfs3 api landing page
> but
>  http://localhost/cgi-bin/qgis_mapserv.fcgi/
> just gives me the OWS xml errors
>
> Some other remarks (at least here with me):
> - the FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES does not seem to be picked up???

According to your logs it seems to be picked up:

> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES / '/qgis/server_projects_directories' (Directories used by the landing page service to find .qgs and .qgz projects): '/home/richard/z/21/qgis/qgisserver' (read from ENVIRONMENT_VARIABLE)



> I only get Feature collections when I put the qgz project files next to the qgis_mapserv.fcgi OR point QGIS to it via the ?map= parameter
>
> So yes, if anybody is able to 'just run' QGIS-server on apache, please let me know.
>
> NOTE: WMS/WFS/WFS3 is working! It's just that I do not have the "QGIS Server Catalog" landing page etc...
>
> Can it have something to do with the fact that I do not run it on the root of the webserver?
>
> FYI: the part of the apache config I now use below, AND the logfile (tail -f error.log | grep INFO) after I restart Apache, and first go to:
> http://localhost/cgi-bin/qgis_mapserv.fcgi/
> and then to
> http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3
>
> As you can see QGIS seem to pick up the QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES (with a couple of qgz files which normally work AND with qgz in a directory in it (because...PROJECTS_DIRECTORIES).
>
> (note for others: I run a self compiled master, so normally you do not need the PYTHONPATH LD_LIBRARY_PATH or QGIS_PREFIX_PATH etc
>
>
> Header set Access-Control-Allow-Origin "*"
>
>  <IfModule mod_fcgid.c>
>
>      RewriteEngine on
>      RewriteCond %{HTTP:Authorization} .
>      RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
>
>      # mostly from: https://github.com/elpaso/qgis-server-docker/blob/production/default.conf
>      # Longer timeout for WPS... default = 40
>
>      FcgidIOTimeout 120
>      FcgidInitialEnv LC_ALL "en_US.UTF-8"
>      FcgidInitialEnv PYTHONIOENCODING UTF-8
>      FcgidInitialEnv LANG "en_US.UTF-8"
>      FcgidInitialEnv QGIS_SERVER_LOG_LEVEL "0"
>      FcgidInitialEnv QGIS_SERVER_LOG_STDERR "1"
>      #FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES "/tmp/qgisserver/"                   # <= these both seem not te be picked up...
>      FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES "/home/richard/z/21/qgis/qgisserver"  # <= these both seem not te be picked up...
>      FcgidInitialEnv QGIS_SERVER_PARALLEL_RENDERING "1"
>
>      # needed because I run my selfcompiled QGIS:
>      FcgidInitialEnv PYTHONPATH "/home/richard/bin/qgis_/master/debug/share/qgis/python"
>      FcgidInitialEnv LD_LIBRARY_PATH "/home/richard/bin/qgis_/master/debug/lib/:/home/richard/bin/gdal/lib"
>      FcgidInitialEnv QGIS_PREFIX_PATH "/home/richard/bin/qgis_/master/debug"
>
>      # Pass display number to QGIS Server instances
>      #FcgidInitialEnv DISPLAY ":99"         # <= this fails with me
>      FcgidInitialEnv HOME "/home/richard"   # needed with me to load default QGIS.ini settings (auth db etc)
>
>      FcgidConnectTimeout 20
>      IdleTimeout 300
>      BusyTimeout 300
>      ProcessLifeTime 7200
>      IPCConnectTimeout 300
>      IPCCommTimeout 7200
>
>  </IfModule>
>
>
>
>
> 16:38:51 INFO Server[31098]: QGIS Server Settings:
> 16:38:51 INFO Server[31098]:   - QGIS_OPTIONS_PATH / '' (Override the default path for user configuration): '' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_PARALLEL_RENDERING / '/qgis/parallel_rendering' (Activate/Deactivate parallel rendering for WMS getMap request): '1' (read from ENVIRONMENT_VARIABLE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_MAX_THREADS / '/qgis/max_threads' (Number of threads to use when parallel rendering is activated): '-1' (read from INI_FILE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_LOG_LEVEL / '' (Log level): '0' (read from ENVIRONMENT_VARIABLE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_LOG_FILE / '' (Log file): '' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_LOG_STDERR / '' (Activate/Deactivate logging to stderr): '1' (read from ENVIRONMENT_VARIABLE)
> 16:38:51 INFO Server[31098]:   - QGIS_PROJECT_FILE / '' (QGIS project file): '' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_IGNORE_BAD_LAYERS / '' (Ignore bad layers): 'false' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_CACHE_DIRECTORY / '/cache/directory' (Specify the cache directory): '/home/richard/.local/share/QGIS/QGIS3/profiles/default/cache' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_CACHE_SIZE / '/cache/size' (Specify the cache size): '52428800' (read from INI_FILE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_SHOW_GROUP_SEPARATOR / '/locale/showGroupSeparator' (Show group (thousands) separator): 'false' (read from INI_FILE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_OVERRIDE_SYSTEM_LOCALE / '/locale/userLocale' (Override system locale): 'en_US' (read from INI_FILE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_WMS_MAX_HEIGHT / '/qgis/max_wms_height' (Maximum height for a WMS request. The lower one of this and the project configuration is used.): '-1' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_WMS_MAX_WIDTH / '/qgis/max_wms_width' (Maximum width for a WMS request. The most conservative between this and the project one is used): '-1' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_API_RESOURCES_DIRECTORY / '/qgis/server_api_resources_directory' (Base directory where HTML templates and static assets (e.g. images, js and css files) are searched for): '/home/richard/bin/qgis_/master/debug/share/qgis/resources/server/api' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_API_WFS3_MAX_LIMIT / '/qgis/server_api_wfs3_max_limit' (Maximum value for "limit" in a features request, defaults to 10000): '10000' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_TRUST_LAYER_METADATA / '' (Trust layer metadata): 'false' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_DISABLE_GETPRINT / '' (Don't load layouts): 'false' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES / '/qgis/server_projects_directories' (Directories used by the landing page service to find .qgs and .qgz projects): '/home/richard/z/21/qgis/qgisserver' (read from ENVIRONMENT_VARIABLE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_PG_CONNECTIONS / '/qgis/server_projects_pg_connections' (PostgreSQL connection strings used by the landing page service to find projects): '' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_LOG_PROFILE / '/qgis/server_log_profile' (Add detailed profile information to the logs, only effective when QGIS_SERVER_LOG_LEVEL=0): 'false' (read from DEFAULT_VALUE)
> 16:38:51 INFO Server[31098]: Ini file used to initialize settings: /home/richard/.local/share/QGIS/QGIS3/profiles/default/QGIS/QGIS3.ini
> 16:38:51 INFO Server[31098]: cacheDirectory: /home/richard/.local/share/QGIS/QGIS3/profiles/default/cache/
> 16:38:51 INFO Server[31098]: maximumCacheSize: 52428800
> 16:38:51 INFO Server[31098]: Prefix  PATH: /home/richard/bin/qgis_/master/debug
> 16:38:51 INFO Server[31098]: Plugin  PATH: /home/richard/bin/qgis_/master/debug/lib/qgis/plugins
> 16:38:51 INFO Server[31098]: PkgData PATH: /home/richard/bin/qgis_/master/debug/share/qgis
> 16:38:51 INFO Server[31098]: User DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis.db
> 16:38:51 INFO Server[31098]: Auth DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis-auth.db
> 16:38:51 INFO Server[31098]: SVG PATHS: /home/richard/bin/qgis_/master/debug/share/qgis/svg/:/home/richard/.local/share/QGIS/QGIS3/profiles/default/resource_sharing/collections:/home/richard/.local/share/QGIS/QGIS3/profiles/default/svg/:/home/richard/bin/geoserver/geoserver-2.15.2/data_dir/styles:/home/richard/git/qgisqt2/build/debug/output/data/svg/:/home/richard/git/qgisqt2/svg/:/home/richard/bin/qgis_/3.10/debug/share/qgis/svg/:/home/richard/git/build-qgisqt-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt/svg/:/svg/:/home/richard/bin/qgis_/3.16/debug/share/qgis/svg/:/home/richard/git/build-qgisqt2-Desktop-Debug/output/data/svg/:/home/richard/git/build-qgisqt3-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt3/svg/
> 16:38:52 INFO Server[31098]: Adding service SampleService 1.0
> 16:38:52 INFO [31098]: Adding API Landing Page
> 16:38:52 INFO Server[31098]: Adding service WCS 1.0.0
> 16:38:52 INFO Server[31098]: Adding service WFS 1.1.0
> 16:38:52 INFO [31098]: Adding API OGC WFS3 (Draft)
> 16:38:52 INFO Server[31098]: Adding service WMS 1.3.0
> 16:38:52 INFO Server[31098]: Adding service WMTS 1.0.0
> 16:38:52 INFO Server[31098]: Server initialized
> 16:38:52 INFO ../src/server/qgsserverplugins.cpp[31098]: load library /home/richard/bin/qgis_/master/debug/lib/qgispython (3.17.0)
> 16:38:52 INFO ../src/server/qgsserverplugins.cpp[31098]: Python support library loaded successfully.
> 16:38:52 INFO Server[31098]: No server python plugins are available
> 16:38:52 INFO Server[31098]: ******************** New request ***************
> 16:38:52 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/?
> 16:38:52 INFO Server[31098]: Environment:
> 16:38:52 INFO Server[31098]: ------------------------------------------------
> 16:38:52 INFO Server[31098]: SERVER_NAME: localhost
> 16:38:52 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/
> 16:38:52 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
> 16:38:52 INFO Server[31098]: REMOTE_ADDR: ::1
> 16:38:52 INFO Server[31098]: SERVER_PORT: 80
> 16:38:52 INFO Server[31098]: QUERY_STRING:
> 16:38:52 INFO Server[31098]: REQUEST_METHOD: GET
> 16:38:52 INFO Server[31098]: HTTP_ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
> 16:38:52 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
> 16:38:52 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/' for '/wfs3'
> 16:38:52 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/' for '/'
> 16:38:52 INFO Server[31098]: Request finished in 0 ms
> 16:39:45 INFO Server[31098]: ******************** New request ***************
> 16:39:45 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi?
> 16:39:45 INFO Server[31098]: Environment:
> 16:39:45 INFO Server[31098]: ------------------------------------------------
> 16:39:45 INFO Server[31098]: SERVER_NAME: localhost
> 16:39:45 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi
> 16:39:45 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
> 16:39:45 INFO Server[31098]: REMOTE_ADDR: ::1
> 16:39:45 INFO Server[31098]: SERVER_PORT: 80
> 16:39:45 INFO Server[31098]: QUERY_STRING:
> 16:39:45 INFO Server[31098]: REQUEST_METHOD: GET
> 16:39:45 INFO Server[31098]: HTTP_ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
> 16:39:45 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
> 16:39:45 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi' for '/wfs3'
> 16:39:45 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi' for '/'
> 16:39:45 INFO Server[31098]: Request finished in 0 ms
> 16:40:05 INFO Server[31098]: ******************** New request ***************
> 16:40:05 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3?
> 16:40:05 INFO Server[31098]: Environment:
> 16:40:05 INFO Server[31098]: ------------------------------------------------
> 16:40:05 INFO Server[31098]: SERVER_NAME: localhost
> 16:40:05 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/wfs3
> 16:40:05 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
> 16:40:05 INFO Server[31098]: REMOTE_ADDR: ::1
> 16:40:05 INFO Server[31098]: SERVER_PORT: 80
> 16:40:05 INFO Server[31098]: QUERY_STRING:
> 16:40:05 INFO Server[31098]: REQUEST_METHOD: GET
> 16:40:05 INFO Server[31098]: HTTP_ACCEPT: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
> 16:40:05 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
> 16:40:05 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/wfs3' for '/wfs3'
> 16:40:05 INFO Server[31098]: API OGC WFS3 (Draft) accepts the URL path '/cgi-bin/qgis_mapserv.fcgi/wfs3'
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html|/)?$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html|/)?$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /collections(\.json|\.html|/)?$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /collections/(?<collectionId>[^/]+?)(\.json|\.html|/)?$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /conformance
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /static/(?<staticFilePath>.*)$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for /api
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3 for (.html|.json)?$
> 16:40:05 INFO Server[31098]: API OGC WFS3 (Draft): found handler getLandingPage
> 16:40:05 INFO Server[31098]: Request finished in 4 ms
> 16:40:05 INFO Server[31098]: ******************** New request ***************
> 16:40:05 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css?
> 16:40:05 INFO Server[31098]: Environment:
> 16:40:05 INFO Server[31098]: ------------------------------------------------
> 16:40:05 INFO Server[31098]: SERVER_NAME: localhost
> 16:40:05 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css
> 16:40:05 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
> 16:40:05 INFO Server[31098]: REMOTE_ADDR: ::1
> 16:40:05 INFO Server[31098]: SERVER_PORT: 80
> 16:40:05 INFO Server[31098]: QUERY_STRING:
> 16:40:05 INFO Server[31098]: REQUEST_METHOD: GET
> 16:40:05 INFO Server[31098]: HTTP_ACCEPT: text/css,*/*;q=0.1
> 16:40:05 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
> 16:40:05 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css' for '/wfs3'
> 16:40:05 INFO Server[31098]: API OGC WFS3 (Draft) accepts the URL path '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css'
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html|/)?$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html|/)?$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /collections(\.json|\.html|/)?$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /collections/(?<collectionId>[^/]+?)(\.json|\.html|/)?$
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /conformance
> 16:40:05 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/style.css for /static/(?<staticFilePath>.*)$
> 16:40:05 INFO Server[31098]: API OGC WFS3 (Draft): found handler static
> 16:40:05 INFO Server[31098]: Request finished in 1 ms
> 16:40:06 INFO Server[31098]: ******************** New request ***************
> 16:40:06 INFO Server[31098]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js?
> 16:40:06 INFO Server[31098]: Environment:
> 16:40:06 INFO Server[31098]: ------------------------------------------------
> 16:40:06 INFO Server[31098]: SERVER_NAME: localhost
> 16:40:06 INFO Server[31098]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js
> 16:40:06 INFO Server[31098]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
> 16:40:06 INFO Server[31098]: REMOTE_ADDR: ::1
> 16:40:06 INFO Server[31098]: SERVER_PORT: 80
> 16:40:06 INFO Server[31098]: QUERY_STRING:
> 16:40:06 INFO Server[31098]: REQUEST_METHOD: GET
> 16:40:06 INFO Server[31098]: HTTP_ACCEPT: */*
> 16:40:06 INFO Server[31098]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
> 16:40:06 INFO Server[31098]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js' for '/wfs3'
> 16:40:06 INFO Server[31098]: API OGC WFS3 (Draft) accepts the URL path '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js'
> 16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html|/)?$
> 16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html|/)?$
> 16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /collections(\.json|\.html|/)?$
> 16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+?)(\.json|\.html|/)?$
> 16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /conformance
> 16:40:06 INFO Server[31098]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.js for /static/(?<staticFilePath>.*)$
> 16:40:06 INFO Server[31098]: API OGC WFS3 (Draft): found handler static
> 16:40:06 INFO Server[31098]: Request finished in 3 ms
> 16:40:06 INFO Server[31165]: QGIS Server Settings:
> 16:40:06 INFO Server[31165]:   - QGIS_OPTIONS_PATH / '' (Override the default path for user configuration): '' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_PARALLEL_RENDERING / '/qgis/parallel_rendering' (Activate/Deactivate parallel rendering for WMS getMap request): '1' (read from ENVIRONMENT_VARIABLE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_MAX_THREADS / '/qgis/max_threads' (Number of threads to use when parallel rendering is activated): '-1' (read from INI_FILE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_LOG_LEVEL / '' (Log level): '0' (read from ENVIRONMENT_VARIABLE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_LOG_FILE / '' (Log file): '' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_LOG_STDERR / '' (Activate/Deactivate logging to stderr): '1' (read from ENVIRONMENT_VARIABLE)
> 16:40:06 INFO Server[31165]:   - QGIS_PROJECT_FILE / '' (QGIS project file): '' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_IGNORE_BAD_LAYERS / '' (Ignore bad layers): 'false' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_CACHE_DIRECTORY / '/cache/directory' (Specify the cache directory): '/home/richard/.local/share/QGIS/QGIS3/profiles/default/cache' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_CACHE_SIZE / '/cache/size' (Specify the cache size): '52428800' (read from INI_FILE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_SHOW_GROUP_SEPARATOR / '/locale/showGroupSeparator' (Show group (thousands) separator): 'false' (read from INI_FILE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_OVERRIDE_SYSTEM_LOCALE / '/locale/userLocale' (Override system locale): 'en_US' (read from INI_FILE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_WMS_MAX_HEIGHT / '/qgis/max_wms_height' (Maximum height for a WMS request. The lower one of this and the project configuration is used.): '-1' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_WMS_MAX_WIDTH / '/qgis/max_wms_width' (Maximum width for a WMS request. The most conservative between this and the project one is used): '-1' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_API_RESOURCES_DIRECTORY / '/qgis/server_api_resources_directory' (Base directory where HTML templates and static assets (e.g. images, js and css files) are searched for): '/home/richard/bin/qgis_/master/debug/share/qgis/resources/server/api' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_API_WFS3_MAX_LIMIT / '/qgis/server_api_wfs3_max_limit' (Maximum value for "limit" in a features request, defaults to 10000): '10000' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_TRUST_LAYER_METADATA / '' (Trust layer metadata): 'false' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_DISABLE_GETPRINT / '' (Don't load layouts): 'false' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES / '/qgis/server_projects_directories' (Directories used by the landing page service to find .qgs and .qgz projects): '/home/richard/z/21/qgis/qgisserver' (read from ENVIRONMENT_VARIABLE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_PG_CONNECTIONS / '/qgis/server_projects_pg_connections' (PostgreSQL connection strings used by the landing page service to find projects): '' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]:   - QGIS_SERVER_LOG_PROFILE / '/qgis/server_log_profile' (Add detailed profile information to the logs, only effective when QGIS_SERVER_LOG_LEVEL=0): 'false' (read from DEFAULT_VALUE)
> 16:40:06 INFO Server[31165]: Ini file used to initialize settings: /home/richard/.local/share/QGIS/QGIS3/profiles/default/QGIS/QGIS3.ini
> 16:40:06 INFO Server[31165]: cacheDirectory: /home/richard/.local/share/QGIS/QGIS3/profiles/default/cache/
> 16:40:06 INFO Server[31165]: maximumCacheSize: 52428800
> 16:40:06 INFO Server[31165]: Prefix  PATH: /home/richard/bin/qgis_/master/debug
> 16:40:06 INFO Server[31165]: Plugin  PATH: /home/richard/bin/qgis_/master/debug/lib/qgis/plugins
> 16:40:06 INFO Server[31165]: PkgData PATH: /home/richard/bin/qgis_/master/debug/share/qgis
> 16:40:06 INFO Server[31165]: User DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis.db
> 16:40:06 INFO Server[31165]: Auth DB PATH: /home/richard/.local/share/QGIS/QGIS3/profiles/default/qgis-auth.db
> 16:40:06 INFO Server[31165]: SVG PATHS: /home/richard/bin/qgis_/master/debug/share/qgis/svg/:/home/richard/.local/share/QGIS/QGIS3/profiles/default/resource_sharing/collections:/home/richard/.local/share/QGIS/QGIS3/profiles/default/svg/:/home/richard/bin/geoserver/geoserver-2.15.2/data_dir/styles:/home/richard/git/qgisqt2/build/debug/output/data/svg/:/home/richard/git/qgisqt2/svg/:/home/richard/bin/qgis_/3.10/debug/share/qgis/svg/:/home/richard/git/build-qgisqt-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt/svg/:/svg/:/home/richard/bin/qgis_/3.16/debug/share/qgis/svg/:/home/richard/git/build-qgisqt2-Desktop-Debug/output/data/svg/:/home/richard/git/build-qgisqt3-Desktop-Debug/output/data/svg/:/home/richard/git/qgisqt3/svg/
> 16:40:06 INFO Server[31165]: Adding service SampleService 1.0
> 16:40:06 INFO [31165]: Adding API Landing Page
> 16:40:06 INFO Server[31165]: Adding service WCS 1.0.0
> 16:40:06 INFO Server[31165]: Adding service WFS 1.1.0
> 16:40:06 INFO [31165]: Adding API OGC WFS3 (Draft)
> 16:40:06 INFO Server[31165]: Adding service WMS 1.3.0
> 16:40:06 INFO Server[31165]: Adding service WMTS 1.0.0
> 16:40:06 INFO Server[31165]: Server initialized
> 16:40:06 INFO ../src/server/qgsserverplugins.cpp[31165]: load library /home/richard/bin/qgis_/master/debug/lib/qgispython (3.17.0)
> 16:40:06 INFO ../src/server/qgsserverplugins.cpp[31165]: Python support library loaded successfully.
> 16:40:07 INFO Server[31165]: No server python plugins are available
> 16:40:07 INFO Server[31165]: ******************** New request ***************
> 16:40:07 INFO Server[31165]: Request URL: http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css?
> 16:40:07 INFO Server[31165]: Environment:
> 16:40:07 INFO Server[31165]: ------------------------------------------------
> 16:40:07 INFO Server[31165]: SERVER_NAME: localhost
> 16:40:07 INFO Server[31165]: REQUEST_URI: /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css
> 16:40:07 INFO Server[31165]: SCRIPT_NAME: /cgi-bin/qgis_mapserv.fcgi
> 16:40:07 INFO Server[31165]: REMOTE_ADDR: ::1
> 16:40:07 INFO Server[31165]: SERVER_PORT: 80
> 16:40:07 INFO Server[31165]: QUERY_STRING:
> 16:40:07 INFO Server[31165]: REQUEST_METHOD: GET
> 16:40:07 INFO Server[31165]: HTTP_ACCEPT: text/css,*/*;q=0.1
> 16:40:07 INFO Server[31165]: HTTP_USER_AGENT: Mozilla/5.0 (X11; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0
> 16:40:07 INFO Server[31165]: Trying URL path: '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css' for '/wfs3'
> 16:40:07 INFO Server[31165]: API OGC WFS3 (Draft) accepts the URL path '/cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css'
> 16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html|/)?$
> 16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html|/)?$
> 16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /collections(\.json|\.html|/)?$
> 16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /collections/(?<collectionId>[^/]+?)(\.json|\.html|/)?$
> 16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /conformance
> 16:40:07 INFO Server[31165]: Checking API path /cgi-bin/qgis_mapserv.fcgi/wfs3/static/jsonFormatter/jsonFormatter.min.css for /static/(?<staticFilePath>.*)$
> 16:40:07 INFO Server[31165]: API OGC WFS3 (Draft): found handler static
> 16:40:07 INFO Server[31165]: Request finished in 1 ms
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From enricofer at gmail.com  Wed Feb  3 11:44:50 2021
From: enricofer at gmail.com (Enrico Ferreguti)
Date: Wed, 3 Feb 2021 20:44:50 +0100
Subject: [QGIS-Developer] Can't get values from QgsMeshLayer
In-Reply-To: <CAHaTM5Ve7dpw1LLg=LZvCH+Rn3Vz6VPJvo0ix8ZEO8Jc195wxw@mail.gmail.com>
References: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>
 <CAHaTM5XPSZg_=JT3cPqCLoyHBsMgpr1xt7ZbYFYcWM+Q5vQ2rA@mail.gmail.com>
 <CAJy=XtdXy26FxECbSJ2o85v=ERufXg4OOzBa2CDs-Ay2knexGg@mail.gmail.com>
 <CAHaTM5Ve7dpw1LLg=LZvCH+Rn3Vz6VPJvo0ix8ZEO8Jc195wxw@mail.gmail.com>
Message-ID: <CAJy=XteChJgxOY0SboOggDXSYq5a3gZUTmvAwJ1KgdPHKOh6bg@mail.gmail.com>

Thanks for the quick reply Vincent, it was really the crs mismatch. I
didn't aware that for extracting values the underlying triangular mesh has
to be updated.
anyway there is a little issue in the script you provide, even the sample
point has to be transformed to MapCanvas crs
p1 = transform.trasform(QgsPointXY(1.60301, 38.38453))
In effect putting the project to the same crs of the mesh layer (4326) the
script outputs the correct values
so the above script should be the following

##############################################################
mesh=QgsMeshLayer('/your/path//20210202_211414_ICON_EU_P06_.grb2','mesh','mdal')
print("mesh is valid:",mesh.isValid())

# First, we need to build the triangular mesh used to render and access the
mesh from the layer
# QgsCoordinatesTransform is needed, here we build one with destination to
the map but could be other one
# If the layer is already render in the map, no need to do that if we want
it in the same coordinates than the map

destinationCrs=iface.mapCanvas().mapSettings().destinationCrs()
transform=QgsCoordinateTransform(mesh.crs(),destinationCrs,QgsProject.instance().transformContext())
mesh.updateTriangularMesh(transform)

p1 = transform.trasform(QgsPointXY(1.60301, 38.38453))

ds_group_index = 1

for g in mesh.datasetGroupsIndexes():
    print ("MESH GROUP:", g,
mesh.datasetGroupMetadata(QgsMeshDatasetIndex(g,0)).name())

for i in range(mesh.datasetCount(QgsMeshDatasetIndex(ds_group_index,0))):
    dataset = QgsMeshDatasetIndex(ds_group_index, i)
    meta = mesh.datasetMetadata(dataset)
    t = meta.time()
    value = mesh.datasetValue(dataset, p1)
    print ("VALUES P1",t,value.scalar(),value.x(),value.y())
##################################################################################

Il giorno mer 3 feb 2021 alle ore 17:14 Vincent Cloarec <vcloarec at gmail.com>
ha scritto:

> I rewrite your script :
>
> ##############################################################
>
> mesh=QgsMeshLayer('/your/path//20210202_211414_ICON_EU_P06_.grb2','mesh','mdal')
> print("mesh is valid:",mesh.isValid())
>
> # First, we need to build the triangular mesh used to render and access
> the mesh from the layer
> # QgsCoordinatesTransform is needed, here we build one with destination to
> the map but could be other one
> # If the layer is already render in the map, no need to do that if we want
> it in the same coordinates than the map
>
> destinationCrs=iface.mapCanvas().mapSettings().destinationCrs()
>
> transform=QgsCoordinateTransform(mesh.crs(),destinationCrs,QgsProject.instance().transformContext())
> mesh.updateTriangularMesh(transform)
>
> p1 = QgsPointXY(1.60301, 38.38453)
>
> ds_group_index = 1
>
> for g in mesh.datasetGroupsIndexes():
>     print ("MESH GROUP:", g,
> mesh.datasetGroupMetadata(QgsMeshDatasetIndex(g,0)).name())
>
> for i in range(mesh.datasetCount(QgsMeshDatasetIndex(ds_group_index,0))):
>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>     meta = mesh.datasetMetadata(dataset)
>     t = meta.time()
>     value = mesh.datasetValue(dataset, p1)
>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>
> ##################################################################################
>
>
> Be careful to not mix QgsMeshDatasetIndex index from provider with
> QgsMeshDatasetIndex from layer. Indeed, since 3.16 we can have extra
> dataset group (for example virtual one), the layer handles with its own way
> the group indexes
>
> Le mer. 3 f?vr. 2021 ? 11:31, Enrico Ferreguti <enricofer at gmail.com> a
> ?crit :
>
>> 3.16
>> The attachment was missing.
>> You can download it from here:
>> https://beato.duckdns.org/nextcloud/s/Ra4opS94zYfgfXa
>>
>> Il mer 3 feb 2021, 16:26 Vincent Cloarec <vcloarec at gmail.com> ha scritto:
>>
>>> Hi Enrico,
>>>
>>> As that will depend of the version of QGIS, which version do you use?
>>>
>>> Le mer. 3 f?vr. 2021 ? 10:59, Enrico Ferreguti <enricofer at gmail.com> a
>>> ?crit :
>>>
>>>> I'm trying to write a simple function for retrieving wind speed and
>>>> direction at a specified moment from a given grib file readable as mesh
>>>> layer the prototype script is the following:
>>>>
>>>> mesh = QgsMeshLayer("[path to the attached
>>>> grib]/20210202_211414_ICON_EU_P06_.grb2","test","mdal")
>>>> #mesh = iface.activeLayer()
>>>> p1 = QgsPointXY(1.60301, 38.38453)
>>>>
>>>> ds_group_index = 1
>>>>
>>>> for g in mesh.datasetGroupsIndexes():
>>>>     print ("MESH GROUP:", g,
>>>> mesh.datasetGroupMetadata(mesh.datasetIndexAtRelativeTime(h0,g)).name())
>>>>
>>>> for i in range(mesh.dataProvider().datasetCount(ds_group_index)):
>>>>     meta =
>>>> mesh.dataProvider().datasetMetadata(QgsMeshDatasetIndex(ds_group_index, i))
>>>>     t = meta.time()
>>>>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>>>>     value = mesh.datasetValue(dataset, p1)
>>>>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>>>>
>>>> When I run the script I can get dataset names from metadata but
>>>> I'getting Nan as values
>>>> I verified that the grib is loadable in mapcanvas and the sample point
>>>> is within grib extent.
>>>> I read the note in api (
>>>> https://qgis.org/api/classQgsMeshLayer.html#a76a7ec072b4acaf45c1a10f5872c4948)
>>>> "It uses previously cached and indexed triangular mesh and so if the layer
>>>> has not been rendered previously (e.g. when used in a script) it returns
>>>> NaN value" so I tried to process an already loaded mesh (decomment line 2)
>>>> without luck.
>>>>
>>>> Is there anybody who can help me finding what I'm doing wrong? Thanks.
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/7263e49f/attachment.html>

From adenaculture at gmail.com  Wed Feb  3 11:49:46 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 3 Feb 2021 14:49:46 -0500
Subject: [QGIS-Developer] [Qgis-user]  New QGIS Date/Time Tools Plugin
In-Reply-To: <01f801d6f9b2$02d644e0$0882cea0$@groenebij.nl>
References: <CABPxTTpwLPyUhGAR6z9c30YtQOXXbW8qw8tFF_JZ3Yk_RUSwgw@mail.gmail.com>
 <214bdf06-cec8-427a-f349-b8c20475b1de@duif.net>
 <CAES-DZSMiTepcqiwWH9d58baiwiH5=jGGv8bZ6y-5RykjC0dbw@mail.gmail.com>
 <CABPxTTqC=mLBMTSS+zzBcrDpYO9nNPWgbGwXYgAp0vN2dpi6dQ@mail.gmail.com>
 <CAB28AsgnEmOnvO6Lx9W03aAFT1Y1-_5XqS2gwP8prQTMWeKE9w@mail.gmail.com>
 <CABPxTTpQ=TKwczv-7MKZMzrCPNanfNLECrUz0pzHYqpK7=iN1w@mail.gmail.com>
 <CAB28Asgo+Jk4QcttJUZTzOeo1ua_O1s_Ke3UYbsuF=zsmjc-_A@mail.gmail.com>
 <CABPxTToYLvnTM4q_rwSmTZ2B=80vo_qPUZLQ2Oe2Xi8uh3RXag@mail.gmail.com>
 <01f801d6f9b2$02d644e0$0882cea0$@groenebij.nl>
Message-ID: <CABPxTTqdJHOFHZhWnDxX1EXcnn_HGKCX-Q4eJtv486pj4TFETQ@mail.gmail.com>

Thanks Jeroen,

Here is a link to the timezone geopackage.

https://drive.google.com/file/d/1IS_bExc5M2IhadK9hzE012oorvV3IbBp/view?usp=sharing

You could also use the shapefile from

https://github.com/evansiroky/timezone-boundary-builder/releases/tag/2020d

I am using the version with oceans. I suspect that the shapefile may be
slightly faster than the gpkg, but I haven't tested it yet.

Here is the gpkg of 10,000 random points.

https://drive.google.com/file/d/1Vz0ho8nQ9rxG6YUG_JebyVygBkjMFsGr/view?usp=sharing

Here is a short script that you can run in the QGIS python console to time
how long it takes to search the timezone for each of the 10,000 points.

https://drive.google.com/file/d/1VMBs6AdvdvWOI_S9XvEaDm3oVyr_vHNv/view?usp=sharing

You will either need to pip install the timezonefinder library or install
the datetimetools-3.0.1.zip release which will make the QGIS python console
aware of the library.

https://github.com/NationalSecurityAgency/qgis-datetimetools-plugin/releases/tag/3.0.1

The mention of ArcGIS is simply that we have an ESRI centric environment
and it is difficult to get QGIS accepted so I try to do everything I can to
make QGIS look appealing.

Thanks once again,

Calvin


On Tue, Feb 2, 2021 at 5:23 PM Groene Bij <mail at groenebij.nl> wrote:

> Hi Calvin,
>
>
>
> Could you somehow send me a copy of the 10.000 random point layer and the
> gpkg with the time zones? I would like to try some things, and see if I can
> come up with some suggestions. I could send you an upload link where you
> can upload those files to me, if needed.
>
>
>
> And I am also trying to understand the issue at stake here. You keep
> referring to ArcGIS. Does ArcGIS has a similar tool incorporated In its
> software, including the data?
>
>
>
> And is it necessary to use this tool offline? If so, a database / data
> file is needed anyway. Than the question is, should it be part of the tool,
> or should you be able to download the data when needed (or better,
> beforehand). Benefit of downloading the data separately could be more up to
> date time zone information.
>
>
>
> Kind regards,
>
> Jeroen Hovens
>
>
>
>
>
> *Van:* Qgis-user <qgis-user-bounces at lists.osgeo.org> *Namens *C Hamilton
> *Verzonden:* dinsdag 2 februari 2021 19:40
> *Aan:* Nyall Dawson <nyall.dawson at gmail.com>
> *CC:* QGIS Users <qgis-user at lists.osgeo.org>; Tim Sutton <tim at kartoza.com>;
> qgis-developer <qgis-developer at lists.osgeo.org>
> *Onderwerp:* Re: [Qgis-user] [QGIS-Developer] New QGIS Date/Time Tools
> Plugin
>
>
>
> I created a layer of 10,000 random points. Using timezonefinder to look up
> each point took 44 seconds. I tried using *Vector->Geoprocessing
> Tools->Intersection...* to find the time zones for each of the points and
> it took over 4 minutes.
>
>
>
> Is there a better way to locate which polygon a point is in? 4 minutes is
> not good. Perhaps the intersection algorithm is not the way to go, but I am
> not sure what is. I can't imagine that iterating through each point and
> then iterating through each polygon until an intersection match is found is
> going to be overlay efficient, but I will try it. Is there a better way?
>
>
>
> Thanks,
>
>
>
> Calvin
>
>
>
>
>
> > I wonder what the difference in time would be to use a gpkg and QGIS
> point in polygon look up vs timezonefinder lookup. Will it be faster or
> slower? I'm not sure without testing. What are your thoughts? I would
> choose the faster of the two.
>
> I'd certainly hope a dedicated GIS application can do this faster than
> a random Python library :D
>
> > I just converted the timezone data to a gpkg and its size is 102Mb. The
> data size for timezonefinder using the same data set is 49Mb. The
> optimization in timezonefinder can produce a maximum error of 1cm at the
> equator as they use 32 bit ints for the data. It might actually be better
> to use the gpkg file, but it is double in size. I will investigate using
> the gpkg data.
>
> You may want to try a shapefile too, just in case...!
>
> Nyall
>
>
> >
> > It seems to me that if a plugin requires a certain dataset to function
> then that data should be included with it and not require an additional
> download, but I understand the issues that this could cause so I am not
> sure of the best way forward. For our use it is definitely better to
> include the data with the plugin.
> >
> > I guess what I would like you to take from this conversation is that
> some users have a completely different environment and face different
> challenges then what you do when it comes to dealing with software. I wish
> that it was easier for me to get QGIS acceptance in our workforce but
> ArcGIS still rules.
> >
> > Thanks for your ideas and all of the hard work that you do to keep QGIS
> moving forward.
> >
> > I wish you all the very best!
> >
> > Calvin
> >
> >> Given that the size of the python library is almost entirely the size
> >> of the timezone boundaries themselves, have you considered:
> >> - avoiding the library entirely, and insteading using a standard
> >> shapefile/gpkg/... of the boundaries and using QGIS vector layer
> >> methods to determine the timezone for a point
> >> - deferring the download of the boundary spatial data, so that it's
> >> not supplied with the plugin but instead the plugin automatically
> >> downloads it on first launch?
> >>
> >> This would avoid the need for the large size plugin, allowing it to be
> >> supplied via the standard QGIS repo while still providing its full
> >> functionality...
> >>
> >> Nyall
> >>
> >>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/fbbefcf1/attachment-0001.html>

From vcloarec at gmail.com  Wed Feb  3 11:56:56 2021
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Wed, 3 Feb 2021 15:56:56 -0400
Subject: [QGIS-Developer] Can't get values from QgsMeshLayer
In-Reply-To: <CAJy=XteChJgxOY0SboOggDXSYq5a3gZUTmvAwJ1KgdPHKOh6bg@mail.gmail.com>
References: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>
 <CAHaTM5XPSZg_=JT3cPqCLoyHBsMgpr1xt7ZbYFYcWM+Q5vQ2rA@mail.gmail.com>
 <CAJy=XtdXy26FxECbSJ2o85v=ERufXg4OOzBa2CDs-Ay2knexGg@mail.gmail.com>
 <CAHaTM5Ve7dpw1LLg=LZvCH+Rn3Vz6VPJvo0ix8ZEO8Jc195wxw@mail.gmail.com>
 <CAJy=XteChJgxOY0SboOggDXSYq5a3gZUTmvAwJ1KgdPHKOh6bg@mail.gmail.com>
Message-ID: <CAHaTM5Wyg8LBHku22CcA+24G_GLZUuYbyvQ1F4P36g_XH1Bp=A@mail.gmail.com>

thinking about, if you use only:
mesh.updateTriangularMesh()

no need to handle with crs ans transform, I think results will be in layer
coordinates.


Le mer. 3 f?vr. 2021 ? 15:45, Enrico Ferreguti <enricofer at gmail.com> a
?crit :

> Thanks for the quick reply Vincent, it was really the crs mismatch. I
> didn't aware that for extracting values the underlying triangular mesh has
> to be updated.
> anyway there is a little issue in the script you provide, even the sample
> point has to be transformed to MapCanvas crs
> p1 = transform.trasform(QgsPointXY(1.60301, 38.38453))
> In effect putting the project to the same crs of the mesh layer (4326) the
> script outputs the correct values
> so the above script should be the following
>
> ##############################################################
>
> mesh=QgsMeshLayer('/your/path//20210202_211414_ICON_EU_P06_.grb2','mesh','mdal')
> print("mesh is valid:",mesh.isValid())
>
> # First, we need to build the triangular mesh used to render and access
> the mesh from the layer
> # QgsCoordinatesTransform is needed, here we build one with destination to
> the map but could be other one
> # If the layer is already render in the map, no need to do that if we want
> it in the same coordinates than the map
>
> destinationCrs=iface.mapCanvas().mapSettings().destinationCrs()
>
> transform=QgsCoordinateTransform(mesh.crs(),destinationCrs,QgsProject.instance().transformContext())
> mesh.updateTriangularMesh(transform)
>
> p1 = transform.trasform(QgsPointXY(1.60301, 38.38453))
>
> ds_group_index = 1
>
> for g in mesh.datasetGroupsIndexes():
>     print ("MESH GROUP:", g,
> mesh.datasetGroupMetadata(QgsMeshDatasetIndex(g,0)).name())
>
> for i in range(mesh.datasetCount(QgsMeshDatasetIndex(ds_group_index,0))):
>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>     meta = mesh.datasetMetadata(dataset)
>     t = meta.time()
>     value = mesh.datasetValue(dataset, p1)
>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>
> ##################################################################################
>
> Il giorno mer 3 feb 2021 alle ore 17:14 Vincent Cloarec <
> vcloarec at gmail.com> ha scritto:
>
>> I rewrite your script :
>>
>> ##############################################################
>>
>> mesh=QgsMeshLayer('/your/path//20210202_211414_ICON_EU_P06_.grb2','mesh','mdal')
>> print("mesh is valid:",mesh.isValid())
>>
>> # First, we need to build the triangular mesh used to render and access
>> the mesh from the layer
>> # QgsCoordinatesTransform is needed, here we build one with destination
>> to the map but could be other one
>> # If the layer is already render in the map, no need to do that if we
>> want it in the same coordinates than the map
>>
>> destinationCrs=iface.mapCanvas().mapSettings().destinationCrs()
>>
>> transform=QgsCoordinateTransform(mesh.crs(),destinationCrs,QgsProject.instance().transformContext())
>> mesh.updateTriangularMesh(transform)
>>
>> p1 = QgsPointXY(1.60301, 38.38453)
>>
>> ds_group_index = 1
>>
>> for g in mesh.datasetGroupsIndexes():
>>     print ("MESH GROUP:", g,
>> mesh.datasetGroupMetadata(QgsMeshDatasetIndex(g,0)).name())
>>
>> for i in range(mesh.datasetCount(QgsMeshDatasetIndex(ds_group_index,0))):
>>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>>     meta = mesh.datasetMetadata(dataset)
>>     t = meta.time()
>>     value = mesh.datasetValue(dataset, p1)
>>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>>
>> ##################################################################################
>>
>>
>> Be careful to not mix QgsMeshDatasetIndex index from provider with
>> QgsMeshDatasetIndex from layer. Indeed, since 3.16 we can have extra
>> dataset group (for example virtual one), the layer handles with its own way
>> the group indexes
>>
>> Le mer. 3 f?vr. 2021 ? 11:31, Enrico Ferreguti <enricofer at gmail.com> a
>> ?crit :
>>
>>> 3.16
>>> The attachment was missing.
>>> You can download it from here:
>>> https://beato.duckdns.org/nextcloud/s/Ra4opS94zYfgfXa
>>>
>>> Il mer 3 feb 2021, 16:26 Vincent Cloarec <vcloarec at gmail.com> ha
>>> scritto:
>>>
>>>> Hi Enrico,
>>>>
>>>> As that will depend of the version of QGIS, which version do you use?
>>>>
>>>> Le mer. 3 f?vr. 2021 ? 10:59, Enrico Ferreguti <enricofer at gmail.com> a
>>>> ?crit :
>>>>
>>>>> I'm trying to write a simple function for retrieving wind speed and
>>>>> direction at a specified moment from a given grib file readable as mesh
>>>>> layer the prototype script is the following:
>>>>>
>>>>> mesh = QgsMeshLayer("[path to the attached
>>>>> grib]/20210202_211414_ICON_EU_P06_.grb2","test","mdal")
>>>>> #mesh = iface.activeLayer()
>>>>> p1 = QgsPointXY(1.60301, 38.38453)
>>>>>
>>>>> ds_group_index = 1
>>>>>
>>>>> for g in mesh.datasetGroupsIndexes():
>>>>>     print ("MESH GROUP:", g,
>>>>> mesh.datasetGroupMetadata(mesh.datasetIndexAtRelativeTime(h0,g)).name())
>>>>>
>>>>> for i in range(mesh.dataProvider().datasetCount(ds_group_index)):
>>>>>     meta =
>>>>> mesh.dataProvider().datasetMetadata(QgsMeshDatasetIndex(ds_group_index, i))
>>>>>     t = meta.time()
>>>>>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>>>>>     value = mesh.datasetValue(dataset, p1)
>>>>>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>>>>>
>>>>> When I run the script I can get dataset names from metadata but
>>>>> I'getting Nan as values
>>>>> I verified that the grib is loadable in mapcanvas and the sample point
>>>>> is within grib extent.
>>>>> I read the note in api (
>>>>> https://qgis.org/api/classQgsMeshLayer.html#a76a7ec072b4acaf45c1a10f5872c4948)
>>>>> "It uses previously cached and indexed triangular mesh and so if the layer
>>>>> has not been rendered previously (e.g. when used in a script) it returns
>>>>> NaN value" so I tried to process an already loaded mesh (decomment line 2)
>>>>> without luck.
>>>>>
>>>>> Is there anybody who can help me finding what I'm doing wrong? Thanks.
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/b2bd9747/attachment.html>

From rdmailings at duif.net  Wed Feb  3 13:19:34 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 3 Feb 2021 22:19:34 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <CAL5Q673kBhk0xN5_5=6JtOD5w492fzX5fDHvJFpzyOT=6wp0UQ@mail.gmail.com>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
 <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
 <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>
 <CAL5Q672+6Uc4=QYt7Kj7j_kVuwyTp5zo0qL+Q84QY_uuhV0YCg@mail.gmail.com>
 <CAL5Q672Q+v7WjYS6PkQHtvHDxer+rKqurmERt=Asdtr_8M7O=g@mail.gmail.com>
 <5f2b2d6b-9ce3-be7c-8d78-d553259d17b3@duif.net>
 <CAL5Q673kBhk0xN5_5=6JtOD5w492fzX5fDHvJFpzyOT=6wp0UQ@mail.gmail.com>
Message-ID: <b1f2b6f2-7a1b-e2ab-9561-ab27d0c0920b@duif.net>

On 2/3/21 5:47 PM, Alessandro Pasotti wrote:
>> But I still fail to see the same "QGIS Server Catalog" when I run it in cgi-bin.
>>
>> I do see that in the docker there seems to be some redirection? The config works for localhost/ but I think most peeps will (at least try) first in their local cgi-bin and so will use the url:
>> http://localhost/cgi-bin/qgis_mapserv.fcgi/
>>
> 
> This won't work: the problem is that we can match for `/wfs3/` (for
> the WFS3 landing page) but we cannot match for a simple `/` (for the
> catalog) in a long URL, so the landing page will only show up for an
> URL `/` (it's a landing page after all).
> 
> IMO in a real deployment no one will ever use the path
> /cgi-bin/qgis_mapserv.fcgi without rewriting it so I don't think it's
> a real issue, anyway a possible solution would be to create yet
> another server setting that allows us to specify the base path of the
> server (in your case: `/cgi-bin/qgis_mapserv.fcgi`) so that we can
> prepend it to the match (that would become
> `/cgi-bin/qgis_mapserv.fcgi/`).
> 
> This is the reason for:
> https://github.com/elpaso/qgis-server-docker/blob/production/default.conf#L45

Ok, after removing my /index.html AND using that rewrite rules, I finally get the catalog landing page \o/

But I do not agree with you. QGIS should not force a server to run on / to be able to use/see the catalog page, not even in prototypes/dev environments.
With me for example I always have several other projects (sometimes also needing /) on my machines/laptops.
Most often I want the html/client to start on / and a map/geo/qgisserver is more of a help application...

So contrary to my complaint of the many VARS, I would be in favor or a SERVER_BASE_PATH or so....

(now building master server on my little homeserver to be able to show some things to you/others... but that one I really cannot serv stuff on / ...)

>> If I do:
>>  http://localhost/cgi-bin/qgis_mapserv.fcgi/wfs3/collections?
>> shows me the wfs3 api landing page
>> but
>>  http://localhost/cgi-bin/qgis_mapserv.fcgi/
>> just gives me the OWS xml errors
>>
>> Some other remarks (at least here with me):
>> - the FcgidInitialEnv QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES does not seem to be picked up???
> 
> According to your logs it seems to be picked up:
> 
>> 16:38:51 INFO Server[31098]:   - QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES / '/qgis/server_projects_directories' (Directories used by the landing page service to find .qgs and .qgz projects): '/home/richard/z/21/qgis/qgisserver' (read from ENVIRONMENT_VARIABLE)
> 
> 
>> I only get Feature collections when I put the qgz project files next to the qgis_mapserv.fcgi OR point QGIS to it via the ?map= parameter
>>
>> So yes, if anybody is able to 'just run' QGIS-server on apache, please let me know.
>>
>> NOTE: WMS/WFS/WFS3 is working! It's just that I do not have the "QGIS Server Catalog" landing page etc...

Is there some caching going one? I still get strange results like:

- When using QGIS_SERVER_LANDING_PAGE_PROJECTS_DIRECTORIES, I do have the landing page on
http://localhost/index.html#/
but then the http://localhost/wfs3 only shows me only the data of the project file I have defined with QGIS_PROJECT_FILE

EVEN if I see the right 4 maps on the catalog page, if I go the the metadata/services/wfs3 I do NOT get the WFS data of that map, but then it seems one of the other (I have 4 maps/projects) always opens, though I see different identifiers like "3286a1aa4483079c3539955ea38f1bd9' below"

I also see:

http://localhost/index.html#/map/3286a1aa4483079c3539955ea38f1bd9
Epic failure
JSON.parse: unexpected character at line 1 column 1 of the JSON data

Is there some heavy caching I should/can invalidate?

Also sometimes I miss 3 (of the 4) map previews... As if there are no requests going. Especially when I zoom in in those thumbnails. If I pan after that the map appears most of the times.


I hope others also start testing (preferably with apache :-) ), I do hope these are not personal issues I have with QGISserver....

Regards & Thanks,

Richard Duivenvoorde


PS: the actual source of all this was a question of another community aspirant QGISserver user, trying to setup QGISserver... 
it's just that I can be rather pitbully when I do not get something to work when I think it should be possible (or others tell me they have) ....






From rdmailings at duif.net  Wed Feb  3 13:30:37 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 3 Feb 2021 22:30:37 +0100
Subject: [QGIS-Developer] [ui] blue != blue
In-Reply-To: <CA+H0G_HRJRi_+cz2NKMs-0Vc0fc87uUzhSdKnUZQJXiA0CAChg@mail.gmail.com>
References: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
 <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>
 <CAK2KqicgknESMrDTXvEP7LpuiAGGPiSU7+x9L-YBoO1BaqOv3w@mail.gmail.com>
 <CA+H0G_HRJRi_+cz2NKMs-0Vc0fc87uUzhSdKnUZQJXiA0CAChg@mail.gmail.com>
Message-ID: <6ab9b0de-f5c3-dd14-b7ee-90d28bba2ecf@duif.net>


On 2/3/21 5:25 PM, Alexandre Neto wrote:
> Richard, can you create an issue and assign it to me? I will give it a look.

https://github.com/qgis/QGIS/issues/41344

I could not assign it to you, though

Regards,

Richard Duivenvoorde

From peter.petrik at lutraconsulting.co.uk  Wed Feb  3 23:37:38 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Thu, 4 Feb 2021 08:37:38 +0100
Subject: [QGIS-Developer] [ui] blue != blue
In-Reply-To: <6ab9b0de-f5c3-dd14-b7ee-90d28bba2ecf@duif.net>
References: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
 <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>
 <CAK2KqicgknESMrDTXvEP7LpuiAGGPiSU7+x9L-YBoO1BaqOv3w@mail.gmail.com>
 <CA+H0G_HRJRi_+cz2NKMs-0Vc0fc87uUzhSdKnUZQJXiA0CAChg@mail.gmail.com>
 <6ab9b0de-f5c3-dd14-b7ee-90d28bba2ecf@duif.net>
Message-ID: <CA+T_MsLncQ+ZSthMCe6NvEepVWf=xwvW3NOHj0ipVTMqJtKaOw@mail.gmail.com>

Hi,

The point cloud icons were created in 2 minutes in the most trivial way to
just have "anything", to have development going. Assuming that someone with
good designer skills may pick it up and replace it. So no offense here.

P.

On Wed, Feb 3, 2021 at 10:30 PM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

>
> On 2/3/21 5:25 PM, Alexandre Neto wrote:
> > Richard, can you create an issue and assign it to me? I will give it a
> look.
>
> https://github.com/qgis/QGIS/issues/41344
>
> I could not assign it to you, though
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210204/4531b5d8/attachment.html>

From apasotti at gmail.com  Thu Feb  4 00:17:49 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 4 Feb 2021 09:17:49 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <b1f2b6f2-7a1b-e2ab-9561-ab27d0c0920b@duif.net>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
 <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
 <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>
 <CAL5Q672+6Uc4=QYt7Kj7j_kVuwyTp5zo0qL+Q84QY_uuhV0YCg@mail.gmail.com>
 <CAL5Q672Q+v7WjYS6PkQHtvHDxer+rKqurmERt=Asdtr_8M7O=g@mail.gmail.com>
 <5f2b2d6b-9ce3-be7c-8d78-d553259d17b3@duif.net>
 <CAL5Q673kBhk0xN5_5=6JtOD5w492fzX5fDHvJFpzyOT=6wp0UQ@mail.gmail.com>
 <b1f2b6f2-7a1b-e2ab-9561-ab27d0c0920b@duif.net>
Message-ID: <CAL5Q672i4PYugs9fcU8yO1zE73x35wPKja6VmSkHvT4TRdb5hg@mail.gmail.com>

On Wed, Feb 3, 2021 at 10:19 PM Richard Duivenvoorde
<rdmailings at duif.net> wrote:
>
> On 2/3/21 5:47 PM, Alessandro Pasotti wrote:
> >> But I still fail to see the same "QGIS Server Catalog" when I run it in cgi-bin.
> >>
> >> I do see that in the docker there seems to be some redirection? The config works for localhost/ but I think most peeps will (at least try) first in their local cgi-bin and so will use the url:
> >> http://localhost/cgi-bin/qgis_mapserv.fcgi/
> >>
> >
> > This won't work: the problem is that we can match for `/wfs3/` (for
> > the WFS3 landing page) but we cannot match for a simple `/` (for the
> > catalog) in a long URL, so the landing page will only show up for an
> > URL `/` (it's a landing page after all).
> >
> > IMO in a real deployment no one will ever use the path
> > /cgi-bin/qgis_mapserv.fcgi without rewriting it so I don't think it's
> > a real issue, anyway a possible solution would be to create yet
> > another server setting that allows us to specify the base path of the
> > server (in your case: `/cgi-bin/qgis_mapserv.fcgi`) so that we can
> > prepend it to the match (that would become
> > `/cgi-bin/qgis_mapserv.fcgi/`).
> >
> > This is the reason for:
> > https://github.com/elpaso/qgis-server-docker/blob/production/default.conf#L45
>
> Ok, after removing my /index.html AND using that rewrite rules, I finally get the catalog landing page \o/
>
> But I do not agree with you. QGIS should not force a server to run on / to be able to use/see the catalog page, not even in prototypes/dev environments.
> With me for example I always have several other projects (sometimes also needing /) on my machines/laptops.
> Most often I want the html/client to start on / and a map/geo/qgisserver is more of a help application...
>
> So contrary to my complaint of the many VARS, I would be in favor or a SERVER_BASE_PATH or so....

I agree, feel free to add a feature request or a PR.


>
> PS: the actual source of all this was a question of another community aspirant QGISserver user, trying to setup QGISserver...
> it's just that I can be rather pitbully when I do not get something to work when I think it should be possible (or others tell me they have) ....
>

This is the right attitude and ultimately leads to bug fixes and a
better software, don't give up!

Thanks for testing this!

Kind regards.

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Thu Feb  4 01:39:41 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 4 Feb 2021 10:39:41 +0100
Subject: [QGIS-Developer] QGIS server landing page when running as
 fastcgi?
In-Reply-To: <CAL5Q672i4PYugs9fcU8yO1zE73x35wPKja6VmSkHvT4TRdb5hg@mail.gmail.com>
References: <27bdba05-de30-c994-a706-bd5b7d5bb6a7@duif.net>
 <CAL5Q670Sy40-TPGUX3DRDZqmxyEaSz5YvhrRamuV8cRN_BSFXQ@mail.gmail.com>
 <e13bb1cf-3db3-cd35-9e1c-920de4eea405@duif.net>
 <CAL5Q671M5jH8_eLFsuj-izA62j9B+giB8gBKhXQmxPouswFyMA@mail.gmail.com>
 <2afb6832-1e9d-a062-1e51-b43eb23ea863@duif.net>
 <CAL5Q670hY35r7xaMBHg6J_XHLi6yRDEDDUSGfVQOS26EXMhPbw@mail.gmail.com>
 <2785ad1f-75bb-bfa3-f735-ed2359d18c46@duif.net>
 <CAL5Q672+6Uc4=QYt7Kj7j_kVuwyTp5zo0qL+Q84QY_uuhV0YCg@mail.gmail.com>
 <CAL5Q672Q+v7WjYS6PkQHtvHDxer+rKqurmERt=Asdtr_8M7O=g@mail.gmail.com>
 <5f2b2d6b-9ce3-be7c-8d78-d553259d17b3@duif.net>
 <CAL5Q673kBhk0xN5_5=6JtOD5w492fzX5fDHvJFpzyOT=6wp0UQ@mail.gmail.com>
 <b1f2b6f2-7a1b-e2ab-9561-ab27d0c0920b@duif.net>
 <CAL5Q672i4PYugs9fcU8yO1zE73x35wPKja6VmSkHvT4TRdb5hg@mail.gmail.com>
Message-ID: <4b1afcea-d61c-e0f1-86ae-ca1357a671c1@duif.net>

On 2/4/21 9:17 AM, Alessandro Pasotti wrote:
>> So contrary to my complaint of the many VARS, I would be in favor or a SERVER_BASE_PATH or so....
> I agree, feel free to add a feature request or a PR.
Ok: https://github.com/qgis/QGIS/issues/41354
will try after 3.18 release...

Richard


From enzedrailmaps at gmail.com  Thu Feb  4 02:06:49 2021
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Thu, 4 Feb 2021 23:06:49 +1300
Subject: [QGIS-Developer] QEP: Layer Notes
In-Reply-To: <CAB28AsgU49OEHV0mbiuUNoWRngestVeErOQ8Fa7xEgm9XM1BNg@mail.gmail.com>
References: <CAB28AsgU49OEHV0mbiuUNoWRngestVeErOQ8Fa7xEgm9XM1BNg@mail.gmail.com>
Message-ID: <01c864dc-2f9f-d010-9cc0-4a6991889a9d@gmail.com>

I have an interest in anything that would allow me to read out the 
metadata fields provided for raster layers, such that it could be 
displayed in a print layout. As far as I can tell, there is no such 
capability?

On 1/02/21 5:47 pm, Nyall Dawson wrote:
> Hi all,
>
> I've just submitted a new QGIS enhancement proposal detailing support
> for user created "notes" for map layers. You can read the details
> here: https://github.com/qgis/QGIS-Enhancement-Proposals/issues/206
>
> I'm after feedback on this proposal and am trying to determine how
> widespread the use-case is, and how desirable it is to have this
> functionality available in QGIS out-of-the-box (vs as a plugin).
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From delazj at gmail.com  Thu Feb  4 02:20:33 2021
From: delazj at gmail.com (DelazJ)
Date: Thu, 4 Feb 2021 11:20:33 +0100
Subject: [QGIS-Developer] QEP: Layer Notes
In-Reply-To: <01c864dc-2f9f-d010-9cc0-4a6991889a9d@gmail.com>
References: <CAB28AsgU49OEHV0mbiuUNoWRngestVeErOQ8Fa7xEgm9XM1BNg@mail.gmail.com>
 <01c864dc-2f9f-d010-9cc0-4a6991889a9d@gmail.com>
Message-ID: <CAECJsSq5L+hhLOPAcq8rCOZy54ZgpxM9QOdF5cC3hpkHfxktJg@mail.gmail.com>

Hi,
Patrick, I don't know whether it covers all the metadata fields but you
might give a look to the layer_property function (
https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/functions_list.html#layer-property
)

Regards,
Harrissou

Le jeu. 4 f?vr. 2021 ? 11:07, Patrick Dunford <enzedrailmaps at gmail.com> a
?crit :

> I have an interest in anything that would allow me to read out the
> metadata fields provided for raster layers, such that it could be
> displayed in a print layout. As far as I can tell, there is no such
> capability?
>
> On 1/02/21 5:47 pm, Nyall Dawson wrote:
> > Hi all,
> >
> > I've just submitted a new QGIS enhancement proposal detailing support
> > for user created "notes" for map layers. You can read the details
> > here: https://github.com/qgis/QGIS-Enhancement-Proposals/issues/206
> >
> > I'm after feedback on this proposal and am trying to determine how
> > widespread the use-case is, and how desirable it is to have this
> > functionality available in QGIS out-of-the-box (vs as a plugin).
> >
> > Nyall
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210204/3996e281/attachment-0001.html>

From enzedrailmaps at gmail.com  Thu Feb  4 16:44:34 2021
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Fri, 5 Feb 2021 13:44:34 +1300
Subject: [QGIS-Developer] QEP: Layer Notes
In-Reply-To: <CAECJsSq5L+hhLOPAcq8rCOZy54ZgpxM9QOdF5cC3hpkHfxktJg@mail.gmail.com>
References: <CAB28AsgU49OEHV0mbiuUNoWRngestVeErOQ8Fa7xEgm9XM1BNg@mail.gmail.com>
 <01c864dc-2f9f-d010-9cc0-4a6991889a9d@gmail.com>
 <CAECJsSq5L+hhLOPAcq8rCOZy54ZgpxM9QOdF5cC3hpkHfxktJg@mail.gmail.com>
Message-ID: <aa58128e-7518-d28f-182e-c8e484af7ebd@gmail.com>

I'll take a look at it. Thanks.

On 4/02/21 11:20 pm, DelazJ wrote:
> Hi,
> Patrick, I don't know whether it covers all the metadata fields but 
> you might give a look to the layer_property function 
> (https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/functions_list.html#layer-property 
> <https://docs.qgis.org/3.16/en/docs/user_manual/working_with_vector/functions_list.html#layer-property>)
>
> Regards,
> Harrissou
>
> Le?jeu. 4 f?vr. 2021 ??11:07, Patrick Dunford <enzedrailmaps at gmail.com 
> <mailto:enzedrailmaps at gmail.com>> a ?crit?:
>
>     I have an interest in anything that would allow me to read out the
>     metadata fields provided for raster layers, such that it could be
>     displayed in a print layout. As far as I can tell, there is no such
>     capability?
>
>     On 1/02/21 5:47 pm, Nyall Dawson wrote:
>     > Hi all,
>     >
>     > I've just submitted a new QGIS enhancement proposal detailing
>     support
>     > for user created "notes" for map layers. You can read the details
>     > here:
>     https://github.com/qgis/QGIS-Enhancement-Proposals/issues/206
>     <https://github.com/qgis/QGIS-Enhancement-Proposals/issues/206>
>     >
>     > I'm after feedback on this proposal and am trying to determine how
>     > widespread the use-case is, and how desirable it is to have this
>     > functionality available in QGIS out-of-the-box (vs as a plugin).
>     >
>     > Nyall
>     > _______________________________________________
>     > QGIS-Developer mailing list
>     > QGIS-Developer at lists.osgeo.org
>     <mailto:QGIS-Developer at lists.osgeo.org>
>     > List info:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     > Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210205/7e184245/attachment.html>

From Mike.Elstermann at itc-halle.de  Fri Feb  5 01:38:26 2021
From: Mike.Elstermann at itc-halle.de (Elstermann, Mike)
Date: Fri, 5 Feb 2021 09:38:26 +0000
Subject: [QGIS-Developer] QGIS at Apple Macbook Pro ARM M1? [Marketing
 Mail]
In-Reply-To: <99A7390F-0ED7-4ECE-924E-87DD507ED202@itc-halle.de>
References: <0EC36D65-710D-41CB-93A0-B2DD4FE60EBB@itc-halle.de>
 <CAES-DZQ2TUVDH9AOdMnvHLJUukeC8vMGv1PLjT+ru=wJPmpyUQ@mail.gmail.com>
 <44EE380A-D340-4F72-8ED3-6151FEE10CC0@itc-halle.de>
 <99A7390F-0ED7-4ECE-924E-87DD507ED202@itc-halle.de>
Message-ID: <81438d1faee64de3a11a2ceef33e3a91@itc-halle.de>

For all those who still had (justified) doubts and asked if their beloved combination of QGIS and PostgreSQL/PostGIS would run on the new ARM-M1 based Mac: YES, it runs without problems. It has been working for 8 days! So far everything fast, stable, great.

See: https://geoobserver.wordpress.com/2021/01/28/qgis-postgis-mac_arm_m1/

Best Regards,
mikeE., the #geoObserver

-----Urspr?ngliche Nachricht-----
Von: Elstermann, Mike <Mike.Elstermann at itc-halle.de> 
Gesendet: Donnerstag, 3. Dezember 2020 18:46
An: Tim Sutton <tim at kartoza.com>
Cc: qgis-developer at lists.osgeo.org
Betreff: Re: [QGIS-Developer] QGIS at Apple Macbook Pro ARM M1? [Marketing Mail]

You know this? ?It's working here on the M1 MacBook Pro, QGIS 3.10.12. I just launched it and opened a map project; there might be glitches I haven't found."
See https://www.reddit.com/r/QGIS/comments/jxn1m7/anyone_tested_qgis_on_apple_silicon_rosetta_2/

mikeE., The #geoObserver.
http://www.geoobserver.de

> Am 25.11.2020 um 19:59 schrieb Elstermann, Mike <Mike.Elstermann at itc-halle.de>:
> 
> Thanks Tim!
> 
>> Do you already have an M1 device Mike? Have
>> you tested if PG and QGIS run under Rosetta2?
> 
> No, I don't have an M1 Macbook yet, but I'm planning to get one soon and it would be good to know if QGIS/PG is running on it.
> 
> Best regards, mikeE., the #geoObserver.
> 
>> Am 25.11.2020 um 17:35 schrieb Tim Sutton <tim at kartoza.com>:
>> 
>> I think a starting point for that would be Peter Petrik 
>> 
>> a) being funded to work on the port
>> b) having the hardware needed to do it (would be great if someone could sponsor a device for him)
>> 
>> Above assuming Peter is willing and available.
>> 
>> Do you already have an M1 device Mike? Have you tested if PG and QGIS run under Rosetta2?
>> 
>> Regards
>> 
>> Tim
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From rdmailings at duif.net  Fri Feb  5 02:09:30 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 5 Feb 2021 11:09:30 +0100
Subject: [QGIS-Developer] Not seeing geometry name in browser for gpkg (gdal
 issue?)
Message-ID: <c9d852b1-566a-fd9f-469e-13e8ee9003ed@duif.net>

Hi Devs,

Opening a Geopackage node in the browser (OR looking at the 'attributes' tab in the layer props), you can indeed see all attributes and types...

But I miss the name/ype of the geometry column...

When I open the same dataset in a Postgis node, the 'geom' column is shown in the attribute table (WITH it's type).

Off course for older formats like shapefiles, the geom columns did not have a name...
Mmm, now I see that ogrinfo also does not show it (for gpkg's..).

BUT: the Info tab in DB Manager DOES show it...

Especially for gpkg where you can work with (spatial) queries, knowing the name is helpful.

Is this something easily added for gpkg? Or is it not there because of some technical issue?

Create FeatureRequest?

Regards,

Richard Duivenvoorde

From tim at kartoza.com  Fri Feb  5 03:05:16 2021
From: tim at kartoza.com (Tim Sutton)
Date: Fri, 5 Feb 2021 11:05:16 +0000
Subject: [QGIS-Developer] QGIS at Apple Macbook Pro ARM M1? [Marketing
 Mail]
In-Reply-To: <81438d1faee64de3a11a2ceef33e3a91@itc-halle.de>
References: <0EC36D65-710D-41CB-93A0-B2DD4FE60EBB@itc-halle.de>
 <CAES-DZQ2TUVDH9AOdMnvHLJUukeC8vMGv1PLjT+ru=wJPmpyUQ@mail.gmail.com>
 <44EE380A-D340-4F72-8ED3-6151FEE10CC0@itc-halle.de>
 <99A7390F-0ED7-4ECE-924E-87DD507ED202@itc-halle.de>
 <81438d1faee64de3a11a2ceef33e3a91@itc-halle.de>
Message-ID: <CAES-DZTguSNLw8DkkL=D=AkGxZPgWm1RmU3JYimj4qK4GwTCVA@mail.gmail.com>

Thanks so much for the feedback Mike!

Regards

Tim

On Fri, Feb 5, 2021 at 9:38 AM Elstermann, Mike <
Mike.Elstermann at itc-halle.de> wrote:

> For all those who still had (justified) doubts and asked if their beloved
> combination of QGIS and PostgreSQL/PostGIS would run on the new ARM-M1
> based Mac: YES, it runs without problems. It has been working for 8 days!
> So far everything fast, stable, great.
>
> See: https://geoobserver.wordpress.com/2021/01/28/qgis-postgis-mac_arm_m1/
>
> Best Regards,
> mikeE., the #geoObserver
>
> -----Urspr?ngliche Nachricht-----
> Von: Elstermann, Mike <Mike.Elstermann at itc-halle.de>
> Gesendet: Donnerstag, 3. Dezember 2020 18:46
> An: Tim Sutton <tim at kartoza.com>
> Cc: qgis-developer at lists.osgeo.org
> Betreff: Re: [QGIS-Developer] QGIS at Apple Macbook Pro ARM M1? [Marketing
> Mail]
>
> You know this? ?It's working here on the M1 MacBook Pro, QGIS 3.10.12. I
> just launched it and opened a map project; there might be glitches I
> haven't found."
> See
> https://www.reddit.com/r/QGIS/comments/jxn1m7/anyone_tested_qgis_on_apple_silicon_rosetta_2/
>
> mikeE., The #geoObserver.
> http://www.geoobserver.de
>
> > Am 25.11.2020 um 19:59 schrieb Elstermann, Mike <
> Mike.Elstermann at itc-halle.de>:
> >
> > Thanks Tim!
> >
> >> Do you already have an M1 device Mike? Have
> >> you tested if PG and QGIS run under Rosetta2?
> >
> > No, I don't have an M1 Macbook yet, but I'm planning to get one soon and
> it would be good to know if QGIS/PG is running on it.
> >
> > Best regards, mikeE., the #geoObserver.
> >
> >> Am 25.11.2020 um 17:35 schrieb Tim Sutton <tim at kartoza.com>:
> >>
> >> I think a starting point for that would be Peter Petrik
> >>
> >> a) being funded to work on the port
> >> b) having the hardware needed to do it (would be great if someone could
> sponsor a device for him)
> >>
> >> Above assuming Peter is willing and available.
> >>
> >> Do you already have an M1 device Mike? Have you tested if PG and QGIS
> run under Rosetta2?
> >>
> >> Regards
> >>
> >> Tim
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210205/737c7d7e/attachment-0001.html>

From luipir at gmail.com  Fri Feb  5 06:29:25 2021
From: luipir at gmail.com (Luigi Pirelli)
Date: Fri, 5 Feb 2021 15:29:25 +0100
Subject: [QGIS-Developer] Are there per plugin download details?
Message-ID: <CAFO80_qq-RbOiiVjp4QM4CkThw8HzzGeFK05RY08VFRqR_MHgw@mail.gmail.com>

Hi

Asked me about download statistic for plugins. e.g. if download statistic
are registered, not only total, but total per day or rough location of the
download.

do we have this kind of info?

cheers

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210205/c9c54ea0/attachment.html>

From salva.bara at gmail.com  Fri Feb  5 08:57:53 2021
From: salva.bara at gmail.com (salvador bara)
Date: Fri, 5 Feb 2021 17:57:53 +0100
Subject: [QGIS-Developer] FFT convolution plugin help
Message-ID: <CACzAYdxtHPcegtqukikfKeGjHDhb0NCf7h34HDsYg1nMsOkK7A@mail.gmail.com>

    I'm new to the list, and I apologize in advance if this is not the
proper place for this post. In that case any pointer about where to send
this request would be highly appreciated.

    I am working at Universidade de Santiago de Compostela, in mathematical
methods for light pollution research. Some people asked us for an easy way
to create light pollution maps using QGIS. These maps can be easily
produced by 2-D FFT convolution of georeferenced nighttime satellite image
rasters, using kernels of ~1Mpixel size defined by arbitrary functions
(that is, not just Gaussian ; ) ). We routinely do so using Matlab, and we
have checked that it can also be done using the QGIS menu after a rather
lengthy set of inividual operations based on the i.fft and i.ifft grass
routines. We are assessing the feasibility of writing a dedicated tutorial
on that. However, for most users of QGIS in our field, this step-by-step
algorithm turns out to be a rather cumbersome procedure.

    I have to confess I have no programming skills (at all) for
implementing an FFT conv pluging in QGIS. If anyone in the developer world
would be interested in this issue and its potential applications, I would
be happy of cooperating. I am sure there is a large user community that
would take advantage of this feature. For more info about the underlying
methods you may want to have a look to  https://arxiv.org/abs/1907.02891

    All the best,
    salva bar?

-- 
Salva Bar?

Barrio de San Pedro, Compostela, GALIZA (European Union)

Esta mensaxe foi enviada utilizando electr?ns e fot?ns 100% reciclados
This message has been sent using 100% recycled electrons and photons
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210205/5e3177d2/attachment.html>

From uclaros at gmail.com  Fri Feb  5 09:07:03 2021
From: uclaros at gmail.com (uclaros)
Date: Fri, 5 Feb 2021 10:07:03 -0700 (MST)
Subject: [QGIS-Developer] FFT convolution plugin help
In-Reply-To: <CACzAYdxtHPcegtqukikfKeGjHDhb0NCf7h34HDsYg1nMsOkK7A@mail.gmail.com>
References: <CACzAYdxtHPcegtqukikfKeGjHDhb0NCf7h34HDsYg1nMsOkK7A@mail.gmail.com>
Message-ID: <1612544823289-0.post@n6.nabble.com>

Hi Salva,
can't you wrap your rather lengthy set of inividual operations based on the
i.fft and i.ifft grass routines into a QGIS model? 



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From luipir at gmail.com  Fri Feb  5 13:17:53 2021
From: luipir at gmail.com (Luigi Pirelli)
Date: Fri, 5 Feb 2021 22:17:53 +0100
Subject: [QGIS-Developer] FFT convolution plugin help
In-Reply-To: <CACzAYdxtHPcegtqukikfKeGjHDhb0NCf7h34HDsYg1nMsOkK7A@mail.gmail.com>
References: <CACzAYdxtHPcegtqukikfKeGjHDhb0NCf7h34HDsYg1nMsOkK7A@mail.gmail.com>
Message-ID: <CAFO80_p6icM=0vfd_wzk+MEqkbD28N2y8EnVEWJkYM6x3Hp0xw@mail.gmail.com>

I agree with uclaros, probably a processing model is what you are looking
for, if it fits your processing speed and complexity.... you can also
always convert your model in a python script and eventually add some high
level parallelization. BTW i.fft would be enough efficient and raster are
just linked in grass (automagically by grass provider in processing)
without need to import/export.

Bye form an ex Barrio de Sampedro citizen

cheers

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Fri, 5 Feb 2021 at 17:58, salvador bara <salva.bara at gmail.com> wrote:

>
>
>     I'm new to the list, and I apologize in advance if this is not the
> proper place for this post. In that case any pointer about where to send
> this request would be highly appreciated.
>
>     I am working at Universidade de Santiago de Compostela, in
> mathematical methods for light pollution research. Some people asked us for
> an easy way to create light pollution maps using QGIS. These maps can be
> easily produced by 2-D FFT convolution of georeferenced nighttime satellite
> image rasters, using kernels of ~1Mpixel size defined by arbitrary
> functions (that is, not just Gaussian ; ) ). We routinely do so using
> Matlab, and we have checked that it can also be done using the QGIS menu
> after a rather lengthy set of inividual operations based on the i.fft and
> i.ifft grass routines. We are assessing the feasibility of writing a
> dedicated tutorial on that. However, for most users of QGIS in our field,
> this step-by-step algorithm turns out to be a rather cumbersome procedure.
>
>     I have to confess I have no programming skills (at all) for
> implementing an FFT conv pluging in QGIS. If anyone in the developer world
> would be interested in this issue and its potential applications, I would
> be happy of cooperating. I am sure there is a large user community that
> would take advantage of this feature. For more info about the underlying
> methods you may want to have a look to  https://arxiv.org/abs/1907.02891
>
>     All the best,
>     salva bar?
>
> --
> Salva Bar?
>
> Barrio de San Pedro, Compostela, GALIZA (European Union)
>
> Esta mensaxe foi enviada utilizando electr?ns e fot?ns 100% reciclados
> This message has been sent using 100% recycled electrons and photons
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210205/674af687/attachment.html>

From adenaculture at gmail.com  Fri Feb  5 13:22:56 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 5 Feb 2021 16:22:56 -0500
Subject: [QGIS-Developer] timzonefinder vs point in polygon
Message-ID: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>

I need the ability to do a fast time zone lookup in QGIS and found the
popular timezonefinder library which I encorported into the Date/Time Tools
plugin. See

https://github.com/NationalSecurityAgency/qgis-datetimetools-plugin/releases/tag/3.0.1

Rather than using this, Nyall suggested that I just use the original
polygon data set and do a point in polygon lookup. So I have done some
testing on a 10,000 random point data set where I was looking up the
timezone of each point.

Time results for 10,000 points
Using timezonefinder: 44 seconds

Using the algorithm Vector->Geoprocessing Tools->Intersection: 4 minutes, 4
seconds

I also tried iterating over each of the 10,000 points then testing each of
the time zone polygons to see if the point feature was contained in it
using this statement. It returned once it found a match.

polyfeature.geometry().contains(point_feature)

This was definitely not the way to do it and I killed qgis before it
finished.

My conclusion is that timezonefinder has been optimized for very fast
lookups. I'm sure there is probably a better way for me to work with a
point in polygon lookup and if anyone has any further suggestions let me
know. I can see games I could play such as first testing the bounding box
or setting up lookup tables, but that is what timezonefinder does so for
now that is what I will use.

If I have missed some fast point in polygon lookup up in the QGIS API
please let me know.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210205/53c2c77e/attachment.html>

From andreaerdna at libero.it  Fri Feb  5 13:54:33 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 5 Feb 2021 14:54:33 -0700 (MST)
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
Message-ID: <1612562073283-0.post@n6.nabble.com>

C Hamilton wrote
> Using the algorithm Vector->Geoprocessing Tools->Intersection: 4 minutes,
> 4
> seconds

Hi Calvin,
maybe it could be better to use the "Join attributes by location" algorithm.
It only takes few seconds to preform the join.

Regards.

Andrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From nyall.dawson at gmail.com  Fri Feb  5 15:29:57 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 6 Feb 2021 09:29:57 +1000
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <1612562073283-0.post@n6.nabble.com>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
 <1612562073283-0.post@n6.nabble.com>
Message-ID: <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>

On Sat, 6 Feb 2021 at 07:54, Andrea Giudiceandrea <andreaerdna at libero.it> wrote:
>
> C Hamilton wrote
> > Using the algorithm Vector->Geoprocessing Tools->Intersection: 4 minutes,
> > 4
> > seconds
>
> Hi Calvin,
> maybe it could be better to use the "Join attributes by location" algorithm.
> It only takes few seconds to preform the join.

Confirmed - for me it only takes ~2 seconds, and that's on an
non-optimised debug build! There may be a few % more performance boost
on the proper QGIS release builds.

"Join attributes by location" has a bunch of extra logic to optimise
the method that the join is performed, which really pays off in this
particular situation (matching points to polygons, where number of
points >> number of polygons).

Nyall



>
> Regards.
>
> Andrea
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rbenet71 at gmail.com  Sat Feb  6 00:28:21 2021
From: rbenet71 at gmail.com (Roberto Benet)
Date: Sat, 6 Feb 2021 09:28:21 +0100
Subject: [QGIS-Developer] PyQGIS problem with QWebEngineView / QtDesigner
 Crash with QWebEngineView
Message-ID: <001501d6fc62$087db920$19792b60$@gmail.com>

I have QGIS 3.16.3-Hannover installed with Qt 5.11.2 and 64-bit Windows 10.
In two more computers I also have it installed in similar conditions.

 

I am using the PyQGIS to stand-alone applications from QGIS and I think
there is something that is not working well within PyQGIS because I cannot
use the QWebEngineView and the QWebKit yes.

 

The symptoms I have are:

 

1.- If in the QtDesigner that is installed with QGIS, I add the
QWebEngineView widget in the design, the program directly crash and stops
running.

 

2.- If in a stand-alone application I start a QWebEngineView it gives me an
error:

 

Code:

 

    from qgis.PyQt.QtWidgets import QWidget, QApplication, QMainWindow,
QFileDialog

    from PyQt5.QtWebEngineWidgets import QWebEngineView

    

    import sys

    

    class temp (QWebEngineView):

        def __init __ (self):

            super () .__ init __ ()

    

    if __name__ == '__main__':

        # We create the instance of the created class and show the window on
the screen

        app = QApplication (sys.argv)

        win = temp ()

        win.show ()

        sys.exit (app.exec_ ())

 

and the error it gives is:

```

Qt WebEngine ICU data not found at C: /OSGeo4W64/apps/Qt5/resources.Trying
parent directory ...

Qt WebEngine ICU data not found at C: / OSGeo4W64 / apps / Qt5. Trying
application directory ...

Qt WebEngine ICU data not found at C: / OSGeo4W64 / apps / Python37. Trying
fallback directory ... The application MAY NOT work. Installed

Qt WebEngine locales directory not found at location C: / OSGeo4W64 / apps /
Qt5 / translationss \ qtwebengine_locales. Trying application directory ...

Qt WebEngine locales directory not found at location C: / OSGeo4W64 / apps /
Python37 \ qtwebengine_locales. Trying fallback directory ... Translations
MAY NOT not be correct.

[0205 / 214808.373: ERROR: icu_util.cc (179)] Invalid file descriptor to

ICU data received. [0205 / 214808.491: FATAL: icu_util.cc (311)] Check
failed: result. Backtrace:

``

I have looked at this link:

 

https://issues.qgis.org/issues/18155

3 years ago it seems that this error could not be solved ...

 

Then with this other:

 

https://forum.qt.io/topic/70457/qt-5-7-qtwebenginewidgets-not-working-on-lin
ux/3

 

It seems that the following folders are missing, among others, that I do not
have in my installation: resources, qtwebengine_locales, ...

 

I have uninstalled the qwebengine with the OsGeo4W setup. And then I have
reinstalled it.

 

I have seen that QGis uses version 5.10.1, I have tried to install it
through pip install, but it tells me that there is only the version from
5.12.

 

I think it must be that the QWebEngineView is not installed correctly with
QGIS. Because if that works if I use it with the installation of python38 or
python39.



-- 
Este correo electr?nico ha sido comprobado en busca de virus por AVG.
http://www.avg.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210206/a34a0cd6/attachment-0001.html>

From salva.bara at gmail.com  Sat Feb  6 06:55:08 2021
From: salva.bara at gmail.com (salvador bara)
Date: Sat, 6 Feb 2021 15:55:08 +0100
Subject: [QGIS-Developer] FFT convolution plugin help
In-Reply-To: <CAFO80_p6icM=0vfd_wzk+MEqkbD28N2y8EnVEWJkYM6x3Hp0xw@mail.gmail.com>
References: <CACzAYdxtHPcegtqukikfKeGjHDhb0NCf7h34HDsYg1nMsOkK7A@mail.gmail.com>
 <CAFO80_p6icM=0vfd_wzk+MEqkbD28N2y8EnVEWJkYM6x3Hp0xw@mail.gmail.com>
Message-ID: <CACzAYdzD2O81J0te=pjB9RRp2FeyCB_xMppj_TTvkSXbXx3jdw@mail.gmail.com>

    Thank you very much, uclaros and Luigi, for taking the time of
answering this basic question. Your advice is much appreciated!

    Best wishes from the Barrio de San Pedro ; )
    salva


Em sex., 5 de fev. de 2021 ?s 22:18, Luigi Pirelli <luipir at gmail.com>
escreveu:

> I agree with uclaros, probably a processing model is what you are looking
> for, if it fits your processing speed and complexity.... you can also
> always convert your model in a python script and eventually add some high
> level parallelization. BTW i.fft would be enough efficient and raster are
> just linked in grass (automagically by grass provider in processing)
> without need to import/export.
>
> Bye form an ex Barrio de Sampedro citizen
>
> cheers
>
> Luigi Pirelli
>
-- 
Salva Bar?

Barrio de San Pedro, Compostela, GALIZA (European Union)

Esta mensaxe foi enviada utilizando electr?ns e fot?ns 100% reciclados
This message has been sent using 100% recycled electrons and photons
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210206/371f5db0/attachment.html>

From bo.victor.thomsen at gmail.com  Sun Feb  7 08:35:25 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Sun, 7 Feb 2021 17:35:25 +0100
Subject: [QGIS-Developer] Activate vertex tool with a specific polygon
 highligted from Python
Message-ID: <8139b9ee-dd93-75be-4b94-0c9851fa7589@gmail.com>

Hi list -

Is there any way/method - using python - to activate the Vertex Tool 
with a specific object from a specific layer ? The position and 
attribute values for the object is known.

The situation is as follows:

 1. The user has pushed a button i a plugin dialog.
 2. The function to this event automatically generates? a polygon.
 3. The geometry is calculated from the position and extend of the
    current mapper window.
 4. The polygon is inserted in a known layer.
 5. This layer is made user editable

 6. The vertex tool is activated with the inserted polygon highlighted

Point 1-5 is working fine. It's point 6 I'm asking about

-- 
Med venlig hilsen / Kind regards

Bo Victor Thomsen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210207/ea8b30f1/attachment.html>

From nyall.dawson at gmail.com  Sun Feb  7 15:22:42 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 8 Feb 2021 09:22:42 +1000
Subject: [QGIS-Developer] PyQGIS problem with QWebEngineView /
 QtDesigner Crash with QWebEngineView
In-Reply-To: <001501d6fc62$087db920$19792b60$@gmail.com>
References: <001501d6fc62$087db920$19792b60$@gmail.com>
Message-ID: <CAB28AsgNb8Ktd72a0h0KiRnyimfjFyv7nFNwLrmeQAE9r_-QJQ@mail.gmail.com>

On Sat, 6 Feb 2021 at 18:28, Roberto Benet <rbenet71 at gmail.com> wrote:
>
> I have QGIS 3.16.3-Hannover installed with Qt 5.11.2 and 64-bit Windows 10. In two more computers I also have it installed in similar conditions.
>
>
>
> I am using the PyQGIS to stand-alone applications from QGIS and I think there is something that is not working well within PyQGIS because I cannot use the QWebEngineView and the QWebKit yes.

It's not a real answer to your question, but honestly I'd just stick
with QWebkit if it's working. QGIS itself makes heavy use of these
classes simply because QWebEngine is a very locked down API which
doesn't give us any of the features we need. If you stick with
QWebkit, things will work as expected because QGIS itself depends on
it!

Blame Qt upstream for their poor decision making here -- they really
dropped the ball with this whole QWebkit/webengine fiasco.

Nyall

>
>
>
> The symptoms I have are:
>
>
>
> 1.- If in the QtDesigner that is installed with QGIS, I add the QWebEngineView widget in the design, the program directly crash and stops running.
>
>
>
> 2.- If in a stand-alone application I start a QWebEngineView it gives me an error:
>
>
>
> Code:
>
>
>
>     from qgis.PyQt.QtWidgets import QWidget, QApplication, QMainWindow, QFileDialog
>
>     from PyQt5.QtWebEngineWidgets import QWebEngineView
>
>
>
>     import sys
>
>
>
>     class temp (QWebEngineView):
>
>         def __init __ (self):
>
>             super () .__ init __ ()
>
>
>
>     if __name__ == '__main__':
>
>         # We create the instance of the created class and show the window on the screen
>
>         app = QApplication (sys.argv)
>
>         win = temp ()
>
>         win.show ()
>
>         sys.exit (app.exec_ ())
>
>
>
> and the error it gives is:
>
> ```
>
> Qt WebEngine ICU data not found at C: /OSGeo4W64/apps/Qt5/resources.Trying parent directory ...
>
> Qt WebEngine ICU data not found at C: / OSGeo4W64 / apps / Qt5. Trying application directory ...
>
> Qt WebEngine ICU data not found at C: / OSGeo4W64 / apps / Python37. Trying fallback directory ... The application MAY NOT work. Installed
>
> Qt WebEngine locales directory not found at location C: / OSGeo4W64 / apps / Qt5 / translationss \ qtwebengine_locales. Trying application directory ...
>
> Qt WebEngine locales directory not found at location C: / OSGeo4W64 / apps / Python37 \ qtwebengine_locales. Trying fallback directory ... Translations MAY NOT not be correct.
>
> [0205 / 214808.373: ERROR: icu_util.cc (179)] Invalid file descriptor to
>
> ICU data received. [0205 / 214808.491: FATAL: icu_util.cc (311)] Check failed: result. Backtrace:
>
> ``
>
> I have looked at this link:
>
>
>
> https://issues.qgis.org/issues/18155
>
> 3 years ago it seems that this error could not be solved ...
>
>
>
> Then with this other:
>
>
>
> https://forum.qt.io/topic/70457/qt-5-7-qtwebenginewidgets-not-working-on-linux/3
>
>
>
> It seems that the following folders are missing, among others, that I do not have in my installation: resources, qtwebengine_locales, ...
>
>
>
> I have uninstalled the qwebengine with the OsGeo4W setup. And then I have reinstalled it.
>
>
>
> I have seen that QGis uses version 5.10.1, I have tried to install it through pip install, but it tells me that there is only the version from 5.12.
>
>
>
> I think it must be that the QWebEngineView is not installed correctly with QGIS. Because if that works if I use it with the installation of python38 or python39.
>
>
> Libre de virus. www.avg.com
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Sun Feb  7 15:24:37 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 8 Feb 2021 09:24:37 +1000
Subject: [QGIS-Developer] Not seeing geometry name in browser for gpkg
 (gdal issue?)
In-Reply-To: <c9d852b1-566a-fd9f-469e-13e8ee9003ed@duif.net>
References: <c9d852b1-566a-fd9f-469e-13e8ee9003ed@duif.net>
Message-ID: <CAB28AsicPydJWV2ZV3foBu18Y-vUxm1dGOL7wOO8Ch1zOo_6PA@mail.gmail.com>

On Fri, 5 Feb 2021 at 20:10, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> Hi Devs,
>
> Opening a Geopackage node in the browser (OR looking at the 'attributes' tab in the layer props), you can indeed see all attributes and types...
>
> But I miss the name/ype of the geometry column...
>
> When I open the same dataset in a Postgis node, the 'geom' column is shown in the attribute table (WITH it's type).
>
> Off course for older formats like shapefiles, the geom columns did not have a name...
> Mmm, now I see that ogrinfo also does not show it (for gpkg's..).
>
> BUT: the Info tab in DB Manager DOES show it...
>
> Especially for gpkg where you can work with (spatial) queries, knowing the name is helpful.
>
> Or is it not there because of some technical issue?

It's probably because geopackage has a built in limitation of a single
geometry column only, as opposed to postgis/spatialite etc which can
expose multiple geometry columns.

> > Is this something easily added for gpkg?

Probably it's been deliberately removed because of the above reason
and it's just a matter of removing/disabling the expection which is in
place for gpkg...

Nyall



>
> Create FeatureRequest?
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Mon Feb  8 00:19:12 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 8 Feb 2021 09:19:12 +0100
Subject: [QGIS-Developer] Not seeing geometry name in browser for gpkg
 (gdal issue?)
In-Reply-To: <CAB28AsicPydJWV2ZV3foBu18Y-vUxm1dGOL7wOO8Ch1zOo_6PA@mail.gmail.com>
References: <c9d852b1-566a-fd9f-469e-13e8ee9003ed@duif.net>
 <CAB28AsicPydJWV2ZV3foBu18Y-vUxm1dGOL7wOO8Ch1zOo_6PA@mail.gmail.com>
Message-ID: <4ec217b7-5926-e14e-526c-942e3b007759@duif.net>

On 2/8/21 12:24 AM, Nyall Dawson wrote:

>> Or is it not there because of some technical issue?
> 
> It's probably because geopackage has a built in limitation of a single
> geometry column only, as opposed to postgis/spatialite etc which can
> expose multiple geometry columns.

Yes, but you can name it whatever you want, AND you need to know the name to be able to do (spatial) queries to it.

>>> Is this something easily added for gpkg?
> 
> Probably it's been deliberately removed because of the above reason
> and it's just a matter of removing/disabling the expection which is in
> place for gpkg...

I'll have a look when I have time.

The strange thing to me is why we expose/show it in dbmanager and not in the browser. (responding to a windows user earlier and seeing this one: https://issues.qgis.org/issues/18260 it could be related...?)

Regards,

Richard Duivenvoorde

From jgr at di.uminho.pt  Mon Feb  8 02:26:50 2021
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Mon, 8 Feb 2021 10:26:50 +0000
Subject: [QGIS-Developer] Activate vertex tool with a specific polygon
 highligted from Python
In-Reply-To: <8139b9ee-dd93-75be-4b94-0c9851fa7589@gmail.com>
References: <8139b9ee-dd93-75be-4b94-0c9851fa7589@gmail.com>
Message-ID: <252b8525-f36c-1e49-98d2-0eb9cf05b168@di.uminho.pt>

Hi Bo,

I didn't investigate it much. I just tried on the console:
iface.actionVertexToolActiveLayer().trigger()
and it works. It open the vertex editor, but no geometry is "locked".
You have to manually lock your geometry with a right mouse click.

You want to mimic also the right click to selected the geometry to be
used by the vertex editor, right? I think you want to call
'QgsVertexTool::updateVertexEditor( QgsVectorLayer *layer, QgsFeatureId
fid )' but QgsVertexTool does not have bindings for python.

Maybe there is another way to do it. Let's see if someone knows how to
lock the selected geometry in Python.

Good luck!

Jorge

?s 16:35 de 07/02/21, Bo Victor Thomsen escreveu:
> Hi list -
> 
> Is there any way/method - using python - to activate the Vertex Tool
> with a specific object from a specific layer ? The position and
> attribute values for the object is known.
> 
> The situation is as follows:
> 
>  1. The user has pushed a button i a plugin dialog.
>  2. The function to this event automatically generates? a polygon.
>  3. The geometry is calculated from the position and extend of the
>     current mapper window.
>  4. The polygon is inserted in a known layer.
>  5. This layer is made user editable
> 
>  6. The vertex tool is activated with the inserted polygon highlighted
> 
> Point 1-5 is working fine. It's point 6 I'm asking about
> 
> -- 
> Med venlig hilsen / Kind regards
> 
> Bo Victor Thomsen
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor

From bo.victor.thomsen at gmail.com  Mon Feb  8 02:47:16 2021
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Mon, 8 Feb 2021 11:47:16 +0100
Subject: [QGIS-Developer] Activate vertex tool with a specific polygon
 highligted from Python
In-Reply-To: <252b8525-f36c-1e49-98d2-0eb9cf05b168@di.uminho.pt>
References: <8139b9ee-dd93-75be-4b94-0c9851fa7589@gmail.com>
 <252b8525-f36c-1e49-98d2-0eb9cf05b168@di.uminho.pt>
Message-ID: <c6aa5d99-7c05-4dea-87ba-b40f92c0a734@gmail.com>

Thanks Jorge for the information :-) .

You're right about my wish: I want to activate the Vertex Tool and lock 
it to a specific object i a specific layer using Python from a plugin 
(Exactly as you surmised)

Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 08-02-2021 kl. 11:26 skrev Jorge Gustavo Rocha:
> Hi Bo,
>
> I didn't investigate it much. I just tried on the console:
> iface.actionVertexToolActiveLayer().trigger()
> and it works. It open the vertex editor, but no geometry is "locked".
> You have to manually lock your geometry with a right mouse click.
>
> You want to mimic also the right click to selected the geometry to be
> used by the vertex editor, right? I think you want to call
> 'QgsVertexTool::updateVertexEditor( QgsVectorLayer *layer, QgsFeatureId
> fid )' but QgsVertexTool does not have bindings for python.
>
> Maybe there is another way to do it. Let's see if someone knows how to
> lock the selected geometry in Python.
>
> Good luck!
>
> Jorge
>
> ?s 16:35 de 07/02/21, Bo Victor Thomsen escreveu:
>> Hi list -
>>
>> Is there any way/method - using python - to activate the Vertex Tool
>> with a specific object from a specific layer ? The position and
>> attribute values for the object is known.
>>
>> The situation is as follows:
>>
>>   1. The user has pushed a button i a plugin dialog.
>>   2. The function to this event automatically generates? a polygon.
>>   3. The geometry is calculated from the position and extend of the
>>      current mapper window.
>>   4. The polygon is inserted in a known layer.
>>   5. This layer is made user editable
>>
>>   6. The vertex tool is activated with the inserted polygon highlighted
>>
>> Point 1-5 is working fine. It's point 6 I'm asking about
>>
>> -- 
>> Med venlig hilsen / Kind regards
>>
>> Bo Victor Thomsen
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> J. Gustavo

From adenaculture at gmail.com  Mon Feb  8 07:04:36 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 8 Feb 2021 10:04:36 -0500
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
 <1612562073283-0.post@n6.nabble.com>
 <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>
Message-ID: <CABPxTTqfZTv-MWv2oz8MZuOgP7fxqVi+4Wnp2HYKW9gRPdYeyQ@mail.gmail.com>

I tested "Join attributes by location" and it is faster although I must
have a slower machine to run on than yours.

Most of the time the use case is single point matching against the time
zone polygon. You mention that "Join attributes by location" is best used
when the number of points >> number of polygons. What is the best method to
match a single point and do that many times for uses such as during mouse
motion to report the time zone of the cursor to the status bar.

Calvin

On Fri, Feb 5, 2021 at 6:30 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Sat, 6 Feb 2021 at 07:54, Andrea Giudiceandrea <andreaerdna at libero.it>
> wrote:
> >
> > C Hamilton wrote
> > > Using the algorithm Vector->Geoprocessing Tools->Intersection: 4
> minutes,
> > > 4
> > > seconds
> >
> > Hi Calvin,
> > maybe it could be better to use the "Join attributes by location"
> algorithm.
> > It only takes few seconds to preform the join.
>
> Confirmed - for me it only takes ~2 seconds, and that's on an
> non-optimised debug build! There may be a few % more performance boost
> on the proper QGIS release builds.
>
> "Join attributes by location" has a bunch of extra logic to optimise
> the method that the join is performed, which really pays off in this
> particular situation (matching points to polygons, where number of
> points >> number of polygons).
>
> Nyall
>
>
>
> >
> > Regards.
> >
> > Andrea
> >
> >
> >
> > --
> > Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210208/c300087e/attachment-0001.html>

From rbenet71 at gmail.com  Mon Feb  8 12:56:53 2021
From: rbenet71 at gmail.com (Roberto Benet)
Date: Mon, 8 Feb 2021 21:56:53 +0100
Subject: [QGIS-Developer] PyQGIS problem with QWebEngineView /
 QtDesigner Crash with QWebEngineView
In-Reply-To: <CAB28AsgNb8Ktd72a0h0KiRnyimfjFyv7nFNwLrmeQAE9r_-QJQ@mail.gmail.com>
References: <001501d6fc62$087db920$19792b60$@gmail.com>
 <CAB28AsgNb8Ktd72a0h0KiRnyimfjFyv7nFNwLrmeQAE9r_-QJQ@mail.gmail.com>
Message-ID: <003f01d6fe5c$ef3124f0$cd936ed0$@gmail.com>

Nyall, thank you very much for your help and interest.
The reason for using QWebEngine is I need to see the google earth page (https://earth.google.com/web/) and it asks for a more advanced version of browser and QWebkit does not support it.

One reflection I make is, QtDesigner by default comes without the QWevEngineWeb widget, however the one that comes with QGis does have this widget, therefore it is something that is expressly installed and that is why I think that if it does not work it is because it has not been installed well since from what I see folders / files are missing.

If I try to install version 12.5 of QWebEngine with Pip I imagine that it will not work because it will not be compatible with the Qt of Qgis.

Any idea how to fix it?

-----Mensaje original-----
De: Nyall Dawson <nyall.dawson at gmail.com> 
Enviado el: lunes, 8 de febrero de 2021 0:23
Para: Roberto Benet <rbenet71 at gmail.com>
CC: qgis-developer <qgis-developer at lists.osgeo.org>
Asunto: Re: [QGIS-Developer] PyQGIS problem with QWebEngineView / QtDesigner Crash with QWebEngineView

On Sat, 6 Feb 2021 at 18:28, Roberto Benet <rbenet71 at gmail.com> wrote:
>
> I have QGIS 3.16.3-Hannover installed with Qt 5.11.2 and 64-bit Windows 10. In two more computers I also have it installed in similar conditions.
>
>
>
> I am using the PyQGIS to stand-alone applications from QGIS and I think there is something that is not working well within PyQGIS because I cannot use the QWebEngineView and the QWebKit yes.

It's not a real answer to your question, but honestly I'd just stick with QWebkit if it's working. QGIS itself makes heavy use of these classes simply because QWebEngine is a very locked down API which doesn't give us any of the features we need. If you stick with QWebkit, things will work as expected because QGIS itself depends on it!

Blame Qt upstream for their poor decision making here -- they really dropped the ball with this whole QWebkit/webengine fiasco.

Nyall

>
>
>
> The symptoms I have are:
>
>
>
> 1.- If in the QtDesigner that is installed with QGIS, I add the QWebEngineView widget in the design, the program directly crash and stops running.
>
>
>
> 2.- If in a stand-alone application I start a QWebEngineView it gives me an error:
>
>
>
> Code:
>
>
>
>     from qgis.PyQt.QtWidgets import QWidget, QApplication, 
> QMainWindow, QFileDialog
>
>     from PyQt5.QtWebEngineWidgets import QWebEngineView
>
>
>
>     import sys
>
>
>
>     class temp (QWebEngineView):
>
>         def __init __ (self):
>
>             super () .__ init __ ()
>
>
>
>     if __name__ == '__main__':
>
>         # We create the instance of the created class and show the 
> window on the screen
>
>         app = QApplication (sys.argv)
>
>         win = temp ()
>
>         win.show ()
>
>         sys.exit (app.exec_ ())
>
>
>
> and the error it gives is:
>
> ```
>
> Qt WebEngine ICU data not found at C: /OSGeo4W64/apps/Qt5/resources.Trying parent directory ...
>
> Qt WebEngine ICU data not found at C: / OSGeo4W64 / apps / Qt5. Trying application directory ...
>
> Qt WebEngine ICU data not found at C: / OSGeo4W64 / apps / Python37. 
> Trying fallback directory ... The application MAY NOT work. Installed
>
> Qt WebEngine locales directory not found at location C: / OSGeo4W64 / apps / Qt5 / translationss \ qtwebengine_locales. Trying application directory ...
>
> Qt WebEngine locales directory not found at location C: / OSGeo4W64 / apps / Python37 \ qtwebengine_locales. Trying fallback directory ... Translations MAY NOT not be correct.
>
> [0205 / 214808.373: ERROR: icu_util.cc (179)] Invalid file descriptor 
> to
>
> ICU data received. [0205 / 214808.491: FATAL: icu_util.cc (311)] Check failed: result. Backtrace:
>
> ``
>
> I have looked at this link:
>
>
>
> https://issues.qgis.org/issues/18155
>
> 3 years ago it seems that this error could not be solved ...
>
>
>
> Then with this other:
>
>
>
> https://forum.qt.io/topic/70457/qt-5-7-qtwebenginewidgets-not-working-
> on-linux/3
>
>
>
> It seems that the following folders are missing, among others, that I do not have in my installation: resources, qtwebengine_locales, ...
>
>
>
> I have uninstalled the qwebengine with the OsGeo4W setup. And then I have reinstalled it.
>
>
>
> I have seen that QGis uses version 5.10.1, I have tried to install it through pip install, but it tells me that there is only the version from 5.12.
>
>
>
> I think it must be that the QWebEngineView is not installed correctly with QGIS. Because if that works if I use it with the installation of python38 or python39.
>
>
> Libre de virus. www.avg.com
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Este correo electr?nico ha sido comprobado en busca de virus por AVG.
http://www.avg.com


From nyall.dawson at gmail.com  Mon Feb  8 18:12:05 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 9 Feb 2021 12:12:05 +1000
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <CABPxTTqfZTv-MWv2oz8MZuOgP7fxqVi+4Wnp2HYKW9gRPdYeyQ@mail.gmail.com>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
 <1612562073283-0.post@n6.nabble.com>
 <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>
 <CABPxTTqfZTv-MWv2oz8MZuOgP7fxqVi+4Wnp2HYKW9gRPdYeyQ@mail.gmail.com>
Message-ID: <CAB28AshPG9V+g4jsxr5uNm3SOFhRSKytJZ+Vy=t+DvhAvn5DSw@mail.gmail.com>

On Tue, 9 Feb 2021 at 01:04, C Hamilton <adenaculture at gmail.com> wrote:
>
> I tested "Join attributes by location" and it is faster although I must have a slower machine to run on than yours.
>
> Most of the time the use case is single point matching against the time zone polygon. You mention that "Join attributes by location" is best used when the number of points >> number of polygons. What is the best method to match a single point and do that many times for uses such as during mouse motion to report the time zone of the cursor to the status bar.

I'd suggest using similar logic to what join attributes by location
does internally. In pseudocode:

search_point = ...
search_bbox = QgsRectangle( search_point.x() - some tolerance,
search_point.y() - some_tolerance, ... )
request = QgsFeatureRequest().setFilterRect(search_bbox)
zones_intersecting_bounding_box = tz_layer.getFeatures(request)
for time_zone_feature in zones_intersecting_bounding_box:
    if time_zone_feature.intersects(search_point):
        # found a hit!
        break

This will take advantage of whatever spatial index you have on the
time zone layer (e.g. the internal shapefile/gpkg/... index)

There's quite a number of extra optimisations which could be done here
if the speed isn't sufficient for mouse movements, e.g. you could
fetch all the zone features in the canvas extent and "prepare" their
geometries for ultra fast point in polygon tests, and then invalidate
this cache and rebuild on each canvas extent change. But I'd only do
that kind of thing if needed...

Nyall





>
> Calvin
>
> On Fri, Feb 5, 2021 at 6:30 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Sat, 6 Feb 2021 at 07:54, Andrea Giudiceandrea <andreaerdna at libero.it> wrote:
>> >
>> > C Hamilton wrote
>> > > Using the algorithm Vector->Geoprocessing Tools->Intersection: 4 minutes,
>> > > 4
>> > > seconds
>> >
>> > Hi Calvin,
>> > maybe it could be better to use the "Join attributes by location" algorithm.
>> > It only takes few seconds to preform the join.
>>
>> Confirmed - for me it only takes ~2 seconds, and that's on an
>> non-optimised debug build! There may be a few % more performance boost
>> on the proper QGIS release builds.
>>
>> "Join attributes by location" has a bunch of extra logic to optimise
>> the method that the join is performed, which really pays off in this
>> particular situation (matching points to polygons, where number of
>> points >> number of polygons).
>>
>> Nyall
>>
>>
>>
>> >
>> > Regards.
>> >
>> > Andrea
>> >
>> >
>> >
>> > --
>> > Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From adenaculture at gmail.com  Tue Feb  9 07:24:50 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 9 Feb 2021 10:24:50 -0500
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <CAB28AshPG9V+g4jsxr5uNm3SOFhRSKytJZ+Vy=t+DvhAvn5DSw@mail.gmail.com>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
 <1612562073283-0.post@n6.nabble.com>
 <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>
 <CABPxTTqfZTv-MWv2oz8MZuOgP7fxqVi+4Wnp2HYKW9gRPdYeyQ@mail.gmail.com>
 <CAB28AshPG9V+g4jsxr5uNm3SOFhRSKytJZ+Vy=t+DvhAvn5DSw@mail.gmail.com>
Message-ID: <CABPxTToXSWf_seXFLsLhqgaFPbgG=QPjr1+h61+hM=_Eb9FkYw@mail.gmail.com>

Nyall,

Using "Join attributes by location" on a large set of points is fast, but
if you are doing single point lookups it bothers me that I am not getting
that fast of results in comparison to timezonefinder. The 10,000 points is
intended to test the speed of many single point lookups. If I were going to
actually do 10,000 point lookups I would use the Join attributes by
location, but here are my results of single point lookups using
timezonefinder vs. your method. Note that the assumption is that they can
be anywhere in the EPSG:4326 bounding box. I am not trying to constrain
them to the QGIS canvas.

timezonefinder: 44 seconds
Your method: 144 seconds

Here is my code for each:

*timezonefinder*
from timezonefinder import TimezoneFinder
import time
tf = TimezoneFinder()

l = iface.activeLayer()
features = l.getFeatures()

start_time = time.time()
for f in features:
    pt = f.geometry().asPoint()
    name = tf.certain_timezone_at(lng=pt.x(), lat=pt.y())
print('Time {}'.format(time.time() - start_time))

*Your method*:
import time
tzlayer = QgsVectorLayer("W:\\My
Documents\\GitHub\\timezone_speed_lookup_test\\timezones.gpkg",
"timezones", "ogr")

l = iface.activeLayer()
features = l.getFeatures()

start_time = time.time()
for f in features:
    pt = f.geometry().asPoint()
    rect = QgsRectangle( pt.x()-0.0000000001, pt.y()-0.000000001,
pt.x(),pt.y())
    request = QgsFeatureRequest().setFilterRect(rect)
    zones_intersecting_bounding_box = tzlayer.getFeatures(request)
    for tz_feature in zones_intersecting_bounding_box:
        if tz_feature.geometry().intersects(rect):
            name = tz_feature[1]
            break

print('Time {}'.format(time.time() - start_time))


I'd suggest using similar logic to what join attributes by location
> does internally. In pseudocode:
>
> search_point = ...
> search_bbox = QgsRectangle( search_point.x() - some tolerance,
> search_point.y() - some_tolerance, ... )
> request = QgsFeatureRequest().setFilterRect(search_bbox)
> zones_intersecting_bounding_box = tz_layer.getFeatures(request)
> for time_zone_feature in zones_intersecting_bounding_box:
>     if time_zone_feature.intersects(search_point):
>         # found a hit!
>         break
>
> This will take advantage of whatever spatial index you have on the
> time zone layer (e.g. the internal shapefile/gpkg/... index)
>
> There's quite a number of extra optimisations which could be done here
> if the speed isn't sufficient for mouse movements, e.g. you could
> fetch all the zone features in the canvas extent and "prepare" their
> geometries for ultra fast point in polygon tests, and then invalidate
> this cache and rebuild on each canvas extent change. But I'd only do
> that kind of thing if needed...
>
> Nyall
>
>
>
>
>
> >
> > Calvin
> >
> > On Fri, Feb 5, 2021 at 6:30 PM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> >>
> >> On Sat, 6 Feb 2021 at 07:54, Andrea Giudiceandrea <
> andreaerdna at libero.it> wrote:
> >> >
> >> > C Hamilton wrote
> >> > > Using the algorithm Vector->Geoprocessing Tools->Intersection: 4
> minutes,
> >> > > 4
> >> > > seconds
> >> >
> >> > Hi Calvin,
> >> > maybe it could be better to use the "Join attributes by location"
> algorithm.
> >> > It only takes few seconds to preform the join.
> >>
> >> Confirmed - for me it only takes ~2 seconds, and that's on an
> >> non-optimised debug build! There may be a few % more performance boost
> >> on the proper QGIS release builds.
> >>
> >> "Join attributes by location" has a bunch of extra logic to optimise
> >> the method that the join is performed, which really pays off in this
> >> particular situation (matching points to polygons, where number of
> >> points >> number of polygons).
> >>
> >> Nyall
> >>
> >>
> >>
> >> >
> >> > Regards.
> >> >
> >> > Andrea
> >> >
> >> >
> >> >
> >> > --
> >> > Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> >> > _______________________________________________
> >> > QGIS-Developer mailing list
> >> > QGIS-Developer at lists.osgeo.org
> >> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210209/7b4d9c2a/attachment.html>

From wonder.sk at gmail.com  Tue Feb  9 07:37:18 2021
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue, 9 Feb 2021 16:37:18 +0100
Subject: [QGIS-Developer] GSoC ideas 2021
Message-ID: <CAC2XbFcmkh538SsqZB_FYQVULQs_Bp9LEutLMAC-oynDyoXfjw@mail.gmail.com>

Hi all

I have started a page on QGIS wiki for this year's google summer of code:
https://github.com/qgis/QGIS/wiki/Google-Summer-of-Code-2021-Ideas

Please feel free to come up with more project ideas. This year Google has
decided to go with smaller project sizes (~175 hours instead of ~350 hours
in previous years), so maybe it's a good opportunity for projects that
would be too small in scope for previous years. More details:
https://wiki.osgeo.org/wiki/Google_Summer_of_Code_2021_Ideas

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210209/bfa8a72f/attachment-0001.html>

From adenaculture at gmail.com  Tue Feb  9 08:52:29 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 9 Feb 2021 11:52:29 -0500
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <01af01d6feff$574789b0$05d69d10$@groenebij.nl>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
 <1612562073283-0.post@n6.nabble.com>
 <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>
 <CABPxTTqfZTv-MWv2oz8MZuOgP7fxqVi+4Wnp2HYKW9gRPdYeyQ@mail.gmail.com>
 <CAB28AshPG9V+g4jsxr5uNm3SOFhRSKytJZ+Vy=t+DvhAvn5DSw@mail.gmail.com>
 <CABPxTToXSWf_seXFLsLhqgaFPbgG=QPjr1+h61+hM=_Eb9FkYw@mail.gmail.com>
 <01af01d6feff$574789b0$05d69d10$@groenebij.nl>
Message-ID: <CABPxTToo+1Vn9gycuW8Hi+ECXt_O8ip24azrSKqHYcQJwW9=JQ@mail.gmail.com>

It is highly likely that you have a much faster machine than mine so I can
only look at comparative times between timezonefinder and the PyQGIS code
included below. You will notice that I take a snapshot of the time before
and after I iterate through the 10,000 points using both timezonefinder as
a look up and the code Nyall proposed. That is how I am getting the times.
What I am really trying to determine is the fastest way to look up a point
using either timezonefinder or PyQGIS code. Perhaps what I have with PyQGIS
code is fast enough, but I am not satisfied if it is not close to the speed
of timezonefinder.

Ultimately, I am trying to determine whether I should continue to use
timezonefinder as the method to look up time zones in my
datetimetools plugin or should I have the gpkg time zone polygon layer as a
part of the plugin and do lookups using it. Right now I am just doing
single point lookups and it is probably fast enough, but I don't like that
it is slower than timezonefinder. I am likely to expand datetimetools
plugin to have a processing algorithm to do a lookup on a whole layer and
in that case the PyQGIS method is better.

Those are my thoughts and if there is a faster method using the gpkg time
zone polygon to do the lookup, let me know.  One thing I just tried was
using the shapefile from
https://github.com/evansiroky/timezone-boundary-builder. It appears it is
not spatially indexed and was taking too long. I resaved it as a shapefile
and made sure it had a spatial index, but the gpkg conversion of the
shapefile is even faster to access.

Calvin

On Tue, Feb 9, 2021 at 11:19 AM <mail at groenebij.nl> wrote:

> Hi Calvin,
>
>
>
> Thanks for sending me this from the Developers list. I am not a part of
> the Developer list, so I did not see the Join attribute by location tip
> from Andrea.
>
>
>
> Anyway, what do you mean with not getting fast result with single point
> lookups?
>
> When I select a single point from the 10000 point layer and run the same
> algorithm (check the selected features only option in the dialogue box),
> the result takes 0.05 seconds (12 seconds for all 10000). At least that is
> what is says in the log tab of the algorithm. And it sure looks quick.
>
>
>
> Jeroen
>
>
>
>
>
> *Van:* C Hamilton <adenaculture at gmail.com>
> *Verzonden:* dinsdag 9 februari 2021 16:25
> *Aan:* Nyall Dawson <nyall.dawson at gmail.com>
> *CC:* Andrea Giudiceandrea <andreaerdna at libero.it>; qgis-developer <
> qgis-developer at lists.osgeo.org>; Groene Bij <mail at groenebij.nl>
> *Onderwerp:* Re: [QGIS-Developer] timzonefinder vs point in polygon
>
>
>
> Nyall,
>
>
>
> Using "Join attributes by location" on a large set of points is fast, but
> if you are doing single point lookups it bothers me that I am not getting
> that fast of results in comparison to timezonefinder. The 10,000 points is
> intended to test the speed of many single point lookups. If I were going to
> actually do 10,000 point lookups I would use the Join attributes by
> location, but here are my results of single point lookups using
> timezonefinder vs. your method. Note that the assumption is that they can
> be anywhere in the EPSG:4326 bounding box. I am not trying to constrain
> them to the QGIS canvas.
>
>
>
> timezonefinder: 44 seconds
>
> Your method: 144 seconds
>
>
>
> Here is my code for each:
>
>
>
> *timezonefinder*
>
> from timezonefinder import TimezoneFinder
> import time
> tf = TimezoneFinder()
>
> l = iface.activeLayer()
> features = l.getFeatures()
>
> start_time = time.time()
> for f in features:
>     pt = f.geometry().asPoint()
>     name = tf.certain_timezone_at(lng=pt.x(), lat=pt.y())
> print('Time {}'.format(time.time() - start_time))
>
>
>
> *Your method*:
>
> import time
> tzlayer = QgsVectorLayer("W:\\My
> Documents\\GitHub\\timezone_speed_lookup_test\\timezones.gpkg",
> "timezones", "ogr")
>
> l = iface.activeLayer()
> features = l.getFeatures()
>
> start_time = time.time()
> for f in features:
>     pt = f.geometry().asPoint()
>     rect = QgsRectangle( pt.x()-0.0000000001, pt.y()-0.000000001,
> pt.x(),pt.y())
>     request = QgsFeatureRequest().setFilterRect(rect)
>     zones_intersecting_bounding_box = tzlayer.getFeatures(request)
>     for tz_feature in zones_intersecting_bounding_box:
>         if tz_feature.geometry().intersects(rect):
>             name = tz_feature[1]
>             break
>
> print('Time {}'.format(time.time() - start_time))
>
>
>
>
>
> I'd suggest using similar logic to what join attributes by location
> does internally. In pseudocode:
>
> search_point = ...
> search_bbox = QgsRectangle( search_point.x() - some tolerance,
> search_point.y() - some_tolerance, ... )
> request = QgsFeatureRequest().setFilterRect(search_bbox)
> zones_intersecting_bounding_box = tz_layer.getFeatures(request)
> for time_zone_feature in zones_intersecting_bounding_box:
>     if time_zone_feature.intersects(search_point):
>         # found a hit!
>         break
>
> This will take advantage of whatever spatial index you have on the
> time zone layer (e.g. the internal shapefile/gpkg/... index)
>
> There's quite a number of extra optimisations which could be done here
> if the speed isn't sufficient for mouse movements, e.g. you could
> fetch all the zone features in the canvas extent and "prepare" their
> geometries for ultra fast point in polygon tests, and then invalidate
> this cache and rebuild on each canvas extent change. But I'd only do
> that kind of thing if needed...
>
> Nyall
>
>
>
>
>
> >
> > Calvin
> >
> > On Fri, Feb 5, 2021 at 6:30 PM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> >>
> >> On Sat, 6 Feb 2021 at 07:54, Andrea Giudiceandrea <
> andreaerdna at libero.it> wrote:
> >> >
> >> > C Hamilton wrote
> >> > > Using the algorithm Vector->Geoprocessing Tools->Intersection: 4
> minutes,
> >> > > 4
> >> > > seconds
> >> >
> >> > Hi Calvin,
> >> > maybe it could be better to use the "Join attributes by location"
> algorithm.
> >> > It only takes few seconds to preform the join.
> >>
> >> Confirmed - for me it only takes ~2 seconds, and that's on an
> >> non-optimised debug build! There may be a few % more performance boost
> >> on the proper QGIS release builds.
> >>
> >> "Join attributes by location" has a bunch of extra logic to optimise
> >> the method that the join is performed, which really pays off in this
> >> particular situation (matching points to polygons, where number of
> >> points >> number of polygons).
> >>
> >> Nyall
> >>
> >>
> >>
> >> >
> >> > Regards.
> >> >
> >> > Andrea
> >> >
> >> >
> >> >
> >> > --
> >> > Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> >> > _______________________________________________
> >> > QGIS-Developer mailing list
> >> > QGIS-Developer at lists.osgeo.org
> >> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210209/ddc9dd84/attachment.html>

From matthias at opengis.ch  Tue Feb  9 09:32:15 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 9 Feb 2021 18:32:15 +0100
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <CABPxTToo+1Vn9gycuW8Hi+ECXt_O8ip24azrSKqHYcQJwW9=JQ@mail.gmail.com>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
 <1612562073283-0.post@n6.nabble.com>
 <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>
 <CABPxTTqfZTv-MWv2oz8MZuOgP7fxqVi+4Wnp2HYKW9gRPdYeyQ@mail.gmail.com>
 <CAB28AshPG9V+g4jsxr5uNm3SOFhRSKytJZ+Vy=t+DvhAvn5DSw@mail.gmail.com>
 <CABPxTToXSWf_seXFLsLhqgaFPbgG=QPjr1+h61+hM=_Eb9FkYw@mail.gmail.com>
 <01af01d6feff$574789b0$05d69d10$@groenebij.nl>
 <CABPxTToo+1Vn9gycuW8Hi+ECXt_O8ip24azrSKqHYcQJwW9=JQ@mail.gmail.com>
Message-ID: <CAC7zN96uy3JFdhq2=Am3sJUqEtgCyu4FXZJg_SokZUF8h-ajqQ@mail.gmail.com>

Hi Calvin,

If you are looking for speed I would consider putting things into memory.
I have seen that timezonefinder has an in_memory option which makes it even
faster.
On QGIS side you can also load features into a memory layer and add a
spatial index to that.

Hope that helps to squeeze the last bit of performance out of this
Matthias

On Tue, Feb 9, 2021 at 5:52 PM C Hamilton <adenaculture at gmail.com> wrote:

> It is highly likely that you have a much faster machine than mine so I can
> only look at comparative times between timezonefinder and the PyQGIS code
> included below. You will notice that I take a snapshot of the time before
> and after I iterate through the 10,000 points using both timezonefinder as
> a look up and the code Nyall proposed. That is how I am getting the times.
> What I am really trying to determine is the fastest way to look up a point
> using either timezonefinder or PyQGIS code. Perhaps what I have with PyQGIS
> code is fast enough, but I am not satisfied if it is not close to the speed
> of timezonefinder.
>
> Ultimately, I am trying to determine whether I should continue to use
> timezonefinder as the method to look up time zones in my
> datetimetools plugin or should I have the gpkg time zone polygon layer as a
> part of the plugin and do lookups using it. Right now I am just doing
> single point lookups and it is probably fast enough, but I don't like that
> it is slower than timezonefinder. I am likely to expand datetimetools
> plugin to have a processing algorithm to do a lookup on a whole layer and
> in that case the PyQGIS method is better.
>
> Those are my thoughts and if there is a faster method using the gpkg time
> zone polygon to do the lookup, let me know.  One thing I just tried was
> using the shapefile from
> https://github.com/evansiroky/timezone-boundary-builder. It appears it is
> not spatially indexed and was taking too long. I resaved it as a shapefile
> and made sure it had a spatial index, but the gpkg conversion of the
> shapefile is even faster to access.
>
> Calvin
>
> On Tue, Feb 9, 2021 at 11:19 AM <mail at groenebij.nl> wrote:
>
>> Hi Calvin,
>>
>>
>>
>> Thanks for sending me this from the Developers list. I am not a part of
>> the Developer list, so I did not see the Join attribute by location tip
>> from Andrea.
>>
>>
>>
>> Anyway, what do you mean with not getting fast result with single point
>> lookups?
>>
>> When I select a single point from the 10000 point layer and run the same
>> algorithm (check the selected features only option in the dialogue box),
>> the result takes 0.05 seconds (12 seconds for all 10000). At least that is
>> what is says in the log tab of the algorithm. And it sure looks quick.
>>
>>
>>
>> Jeroen
>>
>>
>>
>>
>>
>> *Van:* C Hamilton <adenaculture at gmail.com>
>> *Verzonden:* dinsdag 9 februari 2021 16:25
>> *Aan:* Nyall Dawson <nyall.dawson at gmail.com>
>> *CC:* Andrea Giudiceandrea <andreaerdna at libero.it>; qgis-developer <
>> qgis-developer at lists.osgeo.org>; Groene Bij <mail at groenebij.nl>
>> *Onderwerp:* Re: [QGIS-Developer] timzonefinder vs point in polygon
>>
>>
>>
>> Nyall,
>>
>>
>>
>> Using "Join attributes by location" on a large set of points is fast, but
>> if you are doing single point lookups it bothers me that I am not getting
>> that fast of results in comparison to timezonefinder. The 10,000 points is
>> intended to test the speed of many single point lookups. If I were going to
>> actually do 10,000 point lookups I would use the Join attributes by
>> location, but here are my results of single point lookups using
>> timezonefinder vs. your method. Note that the assumption is that they can
>> be anywhere in the EPSG:4326 bounding box. I am not trying to constrain
>> them to the QGIS canvas.
>>
>>
>>
>> timezonefinder: 44 seconds
>>
>> Your method: 144 seconds
>>
>>
>>
>> Here is my code for each:
>>
>>
>>
>> *timezonefinder*
>>
>> from timezonefinder import TimezoneFinder
>> import time
>> tf = TimezoneFinder()
>>
>> l = iface.activeLayer()
>> features = l.getFeatures()
>>
>> start_time = time.time()
>> for f in features:
>>     pt = f.geometry().asPoint()
>>     name = tf.certain_timezone_at(lng=pt.x(), lat=pt.y())
>> print('Time {}'.format(time.time() - start_time))
>>
>>
>>
>> *Your method*:
>>
>> import time
>> tzlayer = QgsVectorLayer("W:\\My
>> Documents\\GitHub\\timezone_speed_lookup_test\\timezones.gpkg",
>> "timezones", "ogr")
>>
>> l = iface.activeLayer()
>> features = l.getFeatures()
>>
>> start_time = time.time()
>> for f in features:
>>     pt = f.geometry().asPoint()
>>     rect = QgsRectangle( pt.x()-0.0000000001, pt.y()-0.000000001,
>> pt.x(),pt.y())
>>     request = QgsFeatureRequest().setFilterRect(rect)
>>     zones_intersecting_bounding_box = tzlayer.getFeatures(request)
>>     for tz_feature in zones_intersecting_bounding_box:
>>         if tz_feature.geometry().intersects(rect):
>>             name = tz_feature[1]
>>             break
>>
>> print('Time {}'.format(time.time() - start_time))
>>
>>
>>
>>
>>
>> I'd suggest using similar logic to what join attributes by location
>> does internally. In pseudocode:
>>
>> search_point = ...
>> search_bbox = QgsRectangle( search_point.x() - some tolerance,
>> search_point.y() - some_tolerance, ... )
>> request = QgsFeatureRequest().setFilterRect(search_bbox)
>> zones_intersecting_bounding_box = tz_layer.getFeatures(request)
>> for time_zone_feature in zones_intersecting_bounding_box:
>>     if time_zone_feature.intersects(search_point):
>>         # found a hit!
>>         break
>>
>> This will take advantage of whatever spatial index you have on the
>> time zone layer (e.g. the internal shapefile/gpkg/... index)
>>
>> There's quite a number of extra optimisations which could be done here
>> if the speed isn't sufficient for mouse movements, e.g. you could
>> fetch all the zone features in the canvas extent and "prepare" their
>> geometries for ultra fast point in polygon tests, and then invalidate
>> this cache and rebuild on each canvas extent change. But I'd only do
>> that kind of thing if needed...
>>
>> Nyall
>>
>>
>>
>>
>>
>> >
>> > Calvin
>> >
>> > On Fri, Feb 5, 2021 at 6:30 PM Nyall Dawson <nyall.dawson at gmail.com>
>> wrote:
>> >>
>> >> On Sat, 6 Feb 2021 at 07:54, Andrea Giudiceandrea <
>> andreaerdna at libero.it> wrote:
>> >> >
>> >> > C Hamilton wrote
>> >> > > Using the algorithm Vector->Geoprocessing Tools->Intersection: 4
>> minutes,
>> >> > > 4
>> >> > > seconds
>> >> >
>> >> > Hi Calvin,
>> >> > maybe it could be better to use the "Join attributes by location"
>> algorithm.
>> >> > It only takes few seconds to preform the join.
>> >>
>> >> Confirmed - for me it only takes ~2 seconds, and that's on an
>> >> non-optimised debug build! There may be a few % more performance boost
>> >> on the proper QGIS release builds.
>> >>
>> >> "Join attributes by location" has a bunch of extra logic to optimise
>> >> the method that the join is performed, which really pays off in this
>> >> particular situation (matching points to polygons, where number of
>> >> points >> number of polygons).
>> >>
>> >> Nyall
>> >>
>> >>
>> >>
>> >> >
>> >> > Regards.
>> >> >
>> >> > Andrea
>> >> >
>> >> >
>> >> >
>> >> > --
>> >> > Sent from:
>> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
>> >> > _______________________________________________
>> >> > QGIS-Developer mailing list
>> >> > QGIS-Developer at lists.osgeo.org
>> >> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210209/cbe8021e/attachment-0001.html>

From tim at kartoza.com  Tue Feb  9 14:09:22 2021
From: tim at kartoza.com (Tim Sutton)
Date: Tue, 9 Feb 2021 22:09:22 +0000
Subject: [QGIS-Developer] Are there per plugin download details?
In-Reply-To: <CAFO80_qq-RbOiiVjp4QM4CkThw8HzzGeFK05RY08VFRqR_MHgw@mail.gmail.com>
References: <CAFO80_qq-RbOiiVjp4QM4CkThw8HzzGeFK05RY08VFRqR_MHgw@mail.gmail.com>
Message-ID: <CAES-DZSobyPTuau4A2vdA1vFZTrWDOqTta786pjyX9-xeRBxWg@mail.gmail.com>

Hi Luigi

Short answer, not really. Longer answer: If you write a nice ticket with
clear requirements, I can ask Sumandari to add it.

Regards

Tiimi

On Fri, Feb 5, 2021 at 2:29 PM Luigi Pirelli <luipir at gmail.com> wrote:

> Hi
>
> Asked me about download statistic for plugins. e.g. if download statistic
> are registered, not only total, but total per day or rough location of the
> download.
>
> do we have this kind of info?
>
> cheers
>
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
>
> **************************************************************************************************
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210209/aeb958ed/attachment.html>

From nyall.dawson at gmail.com  Tue Feb  9 14:41:30 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Feb 2021 08:41:30 +1000
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <CAC7zN96uy3JFdhq2=Am3sJUqEtgCyu4FXZJg_SokZUF8h-ajqQ@mail.gmail.com>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
 <1612562073283-0.post@n6.nabble.com>
 <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>
 <CABPxTTqfZTv-MWv2oz8MZuOgP7fxqVi+4Wnp2HYKW9gRPdYeyQ@mail.gmail.com>
 <CAB28AshPG9V+g4jsxr5uNm3SOFhRSKytJZ+Vy=t+DvhAvn5DSw@mail.gmail.com>
 <CABPxTToXSWf_seXFLsLhqgaFPbgG=QPjr1+h61+hM=_Eb9FkYw@mail.gmail.com>
 <01af01d6feff$574789b0$05d69d10$@groenebij.nl>
 <CABPxTToo+1Vn9gycuW8Hi+ECXt_O8ip24azrSKqHYcQJwW9=JQ@mail.gmail.com>
 <CAC7zN96uy3JFdhq2=Am3sJUqEtgCyu4FXZJg_SokZUF8h-ajqQ@mail.gmail.com>
Message-ID: <CAB28AshK7J7df7Mg1kbh4+7zPqWR9n_gZtYjGn5QsjSiChjTFQ@mail.gmail.com>

On Wed, 10 Feb 2021 at 03:32, Matthias Kuhn <matthias at opengis.ch> wrote:
>
> Hi Calvin,
>
> If you are looking for speed I would consider putting things into memory.
> I have seen that timezonefinder has an in_memory option which makes it even faster.
> On QGIS side you can also load features into a memory layer and add a spatial index to that.

Just to add to this -- if you pre-prepared the timezone polygon
geometries and cached all the results then that's the fastest speed
you'll ever achieve :) (at the cost of memory usage, however!)

Nyall

>
> Hope that helps to squeeze the last bit of performance out of this
> Matthias
>
> On Tue, Feb 9, 2021 at 5:52 PM C Hamilton <adenaculture at gmail.com> wrote:
>>
>> It is highly likely that you have a much faster machine than mine so I can only look at comparative times between timezonefinder and the PyQGIS code included below. You will notice that I take a snapshot of the time before and after I iterate through the 10,000 points using both timezonefinder as a look up and the code Nyall proposed. That is how I am getting the times. What I am really trying to determine is the fastest way to look up a point using either timezonefinder or PyQGIS code. Perhaps what I have with PyQGIS code is fast enough, but I am not satisfied if it is not close to the speed of timezonefinder.
>>
>> Ultimately, I am trying to determine whether I should continue to use timezonefinder as the method to look up time zones in my datetimetools plugin or should I have the gpkg time zone polygon layer as a part of the plugin and do lookups using it. Right now I am just doing single point lookups and it is probably fast enough, but I don't like that it is slower than timezonefinder. I am likely to expand datetimetools plugin to have a processing algorithm to do a lookup on a whole layer and in that case the PyQGIS method is better.
>>
>> Those are my thoughts and if there is a faster method using the gpkg time zone polygon to do the lookup, let me know.  One thing I just tried was using the shapefile from  https://github.com/evansiroky/timezone-boundary-builder. It appears it is not spatially indexed and was taking too long. I resaved it as a shapefile and made sure it had a spatial index, but the gpkg conversion of the shapefile is even faster to access.
>>
>> Calvin
>>
>> On Tue, Feb 9, 2021 at 11:19 AM <mail at groenebij.nl> wrote:
>>>
>>> Hi Calvin,
>>>
>>>
>>>
>>> Thanks for sending me this from the Developers list. I am not a part of the Developer list, so I did not see the Join attribute by location tip from Andrea.
>>>
>>>
>>>
>>> Anyway, what do you mean with not getting fast result with single point lookups?
>>>
>>> When I select a single point from the 10000 point layer and run the same algorithm (check the selected features only option in the dialogue box), the result takes 0.05 seconds (12 seconds for all 10000). At least that is what is says in the log tab of the algorithm. And it sure looks quick.
>>>
>>>
>>>
>>> Jeroen
>>>
>>>
>>>
>>>
>>>
>>> Van: C Hamilton <adenaculture at gmail.com>
>>> Verzonden: dinsdag 9 februari 2021 16:25
>>> Aan: Nyall Dawson <nyall.dawson at gmail.com>
>>> CC: Andrea Giudiceandrea <andreaerdna at libero.it>; qgis-developer <qgis-developer at lists.osgeo.org>; Groene Bij <mail at groenebij.nl>
>>> Onderwerp: Re: [QGIS-Developer] timzonefinder vs point in polygon
>>>
>>>
>>>
>>> Nyall,
>>>
>>>
>>>
>>> Using "Join attributes by location" on a large set of points is fast, but if you are doing single point lookups it bothers me that I am not getting that fast of results in comparison to timezonefinder. The 10,000 points is intended to test the speed of many single point lookups. If I were going to actually do 10,000 point lookups I would use the Join attributes by location, but here are my results of single point lookups using timezonefinder vs. your method. Note that the assumption is that they can be anywhere in the EPSG:4326 bounding box. I am not trying to constrain them to the QGIS canvas.
>>>
>>>
>>>
>>> timezonefinder: 44 seconds
>>>
>>> Your method: 144 seconds
>>>
>>>
>>>
>>> Here is my code for each:
>>>
>>>
>>>
>>> timezonefinder
>>>
>>> from timezonefinder import TimezoneFinder
>>> import time
>>> tf = TimezoneFinder()
>>>
>>> l = iface.activeLayer()
>>> features = l.getFeatures()
>>>
>>> start_time = time.time()
>>> for f in features:
>>>     pt = f.geometry().asPoint()
>>>     name = tf.certain_timezone_at(lng=pt.x(), lat=pt.y())
>>> print('Time {}'.format(time.time() - start_time))
>>>
>>>
>>>
>>> Your method:
>>>
>>> import time
>>> tzlayer = QgsVectorLayer("W:\\My Documents\\GitHub\\timezone_speed_lookup_test\\timezones.gpkg", "timezones", "ogr")
>>>
>>> l = iface.activeLayer()
>>> features = l.getFeatures()
>>>
>>> start_time = time.time()
>>> for f in features:
>>>     pt = f.geometry().asPoint()
>>>     rect = QgsRectangle( pt.x()-0.0000000001, pt.y()-0.000000001, pt.x(),pt.y())
>>>     request = QgsFeatureRequest().setFilterRect(rect)
>>>     zones_intersecting_bounding_box = tzlayer.getFeatures(request)
>>>     for tz_feature in zones_intersecting_bounding_box:
>>>         if tz_feature.geometry().intersects(rect):
>>>             name = tz_feature[1]
>>>             break
>>>
>>> print('Time {}'.format(time.time() - start_time))
>>>
>>>
>>>
>>>
>>>
>>> I'd suggest using similar logic to what join attributes by location
>>> does internally. In pseudocode:
>>>
>>> search_point = ...
>>> search_bbox = QgsRectangle( search_point.x() - some tolerance,
>>> search_point.y() - some_tolerance, ... )
>>> request = QgsFeatureRequest().setFilterRect(search_bbox)
>>> zones_intersecting_bounding_box = tz_layer.getFeatures(request)
>>> for time_zone_feature in zones_intersecting_bounding_box:
>>>     if time_zone_feature.intersects(search_point):
>>>         # found a hit!
>>>         break
>>>
>>> This will take advantage of whatever spatial index you have on the
>>> time zone layer (e.g. the internal shapefile/gpkg/... index)
>>>
>>> There's quite a number of extra optimisations which could be done here
>>> if the speed isn't sufficient for mouse movements, e.g. you could
>>> fetch all the zone features in the canvas extent and "prepare" their
>>> geometries for ultra fast point in polygon tests, and then invalidate
>>> this cache and rebuild on each canvas extent change. But I'd only do
>>> that kind of thing if needed...
>>>
>>> Nyall
>>>
>>>
>>>
>>>
>>>
>>> >
>>> > Calvin
>>> >
>>> > On Fri, Feb 5, 2021 at 6:30 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>> >>
>>> >> On Sat, 6 Feb 2021 at 07:54, Andrea Giudiceandrea <andreaerdna at libero.it> wrote:
>>> >> >
>>> >> > C Hamilton wrote
>>> >> > > Using the algorithm Vector->Geoprocessing Tools->Intersection: 4 minutes,
>>> >> > > 4
>>> >> > > seconds
>>> >> >
>>> >> > Hi Calvin,
>>> >> > maybe it could be better to use the "Join attributes by location" algorithm.
>>> >> > It only takes few seconds to preform the join.
>>> >>
>>> >> Confirmed - for me it only takes ~2 seconds, and that's on an
>>> >> non-optimised debug build! There may be a few % more performance boost
>>> >> on the proper QGIS release builds.
>>> >>
>>> >> "Join attributes by location" has a bunch of extra logic to optimise
>>> >> the method that the join is performed, which really pays off in this
>>> >> particular situation (matching points to polygons, where number of
>>> >> points >> number of polygons).
>>> >>
>>> >> Nyall
>>> >>
>>> >>
>>> >>
>>> >> >
>>> >> > Regards.
>>> >> >
>>> >> > Andrea
>>> >> >
>>> >> >
>>> >> >
>>> >> > --
>>> >> > Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
>>> >> > _______________________________________________
>>> >> > QGIS-Developer mailing list
>>> >> > QGIS-Developer at lists.osgeo.org
>>> >> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> >> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> >> _______________________________________________
>>> >> QGIS-Developer mailing list
>>> >> QGIS-Developer at lists.osgeo.org
>>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From andreaerdna at libero.it  Wed Feb 10 00:00:46 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Wed, 10 Feb 2021 01:00:46 -0700 (MST)
Subject: [QGIS-Developer] timzonefinder vs point in polygon
In-Reply-To: <CAB28AshK7J7df7Mg1kbh4+7zPqWR9n_gZtYjGn5QsjSiChjTFQ@mail.gmail.com>
References: <CABPxTTq+YP5DF9nV1kDm8SntEG8zjv33fxLDTeeAWeEakiwPqA@mail.gmail.com>
 <1612562073283-0.post@n6.nabble.com>
 <CAB28AsgmSkWNyDsCECf4c3SZqMaFPf_2O=Ln5aa7JrKD3Bbraw@mail.gmail.com>
 <CABPxTTqfZTv-MWv2oz8MZuOgP7fxqVi+4Wnp2HYKW9gRPdYeyQ@mail.gmail.com>
 <CAB28AshPG9V+g4jsxr5uNm3SOFhRSKytJZ+Vy=t+DvhAvn5DSw@mail.gmail.com>
 <CABPxTToXSWf_seXFLsLhqgaFPbgG=QPjr1+h61+hM=_Eb9FkYw@mail.gmail.com>
 <CABPxTToo+1Vn9gycuW8Hi+ECXt_O8ip24azrSKqHYcQJwW9=JQ@mail.gmail.com>
 <CAC7zN96uy3JFdhq2=Am3sJUqEtgCyu4FXZJg_SokZUF8h-ajqQ@mail.gmail.com>
 <CAB28AshK7J7df7Mg1kbh4+7zPqWR9n_gZtYjGn5QsjSiChjTFQ@mail.gmail.com>
Message-ID: <1612944046488-0.post@n6.nabble.com>

Nyall Dawson wrote
> Just to add to this -- if you pre-prepared the timezone polygon
> geometries and cached all the results then that's the fastest speed
> you'll ever achieve :) (at the cost of memory usage, however!)

timezonefinder uses precomputed lookup binary tables (~50MB) based on a
0.5deg_lonx1deg_lat grid to avoid most of the time to actually check which
timezone polygon a point is located in.

Regards.

Andrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rdmailings at duif.net  Wed Feb 10 01:00:23 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 10 Feb 2021 10:00:23 +0100
Subject: [QGIS-Developer] [ui] blue != blue
In-Reply-To: <CA+T_MsLncQ+ZSthMCe6NvEepVWf=xwvW3NOHj0ipVTMqJtKaOw@mail.gmail.com>
References: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
 <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>
 <CAK2KqicgknESMrDTXvEP7LpuiAGGPiSU7+x9L-YBoO1BaqOv3w@mail.gmail.com>
 <CA+H0G_HRJRi_+cz2NKMs-0Vc0fc87uUzhSdKnUZQJXiA0CAChg@mail.gmail.com>
 <6ab9b0de-f5c3-dd14-b7ee-90d28bba2ecf@duif.net>
 <CA+T_MsLncQ+ZSthMCe6NvEepVWf=xwvW3NOHj0ipVTMqJtKaOw@mail.gmail.com>
Message-ID: <fc0f2e8c-7667-3706-cb01-8ec32465c7f9@duif.net>

(forgot to mention)

Mathieu/nirvn created and added a much better one, THANKS!

(see screenie)

Regards,

Richard Duivenvoorde



On 2/4/21 8:37 AM, Peter Petrik wrote:
> Hi,
> 
> The point cloud icons were created in 2 minutes in the most trivial way to just have "anything", to have development going. Assuming that someone with good designer skills may pick it up and replace it. So no offense here.
> 
> P.
> 
> On Wed, Feb 3, 2021 at 10:30 PM Richard Duivenvoorde <rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
> 
> 
>     On 2/3/21 5:25 PM, Alexandre Neto wrote:
>     > Richard, can you create an issue and assign it to me? I will give it a look.
> 
>     https://github.com/qgis/QGIS/issues/41344 <https://github.com/qgis/QGIS/issues/41344>
> 
>     I could not assign it to you, though
> 
>     Regards,
> 
>     Richard Duivenvoorde
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot-20210210095841-228x252.png
Type: image/png
Size: 15801 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210210/c6409271/attachment-0001.png>

From peter.petrik at lutraconsulting.co.uk  Wed Feb 10 01:01:26 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Wed, 10 Feb 2021 10:01:26 +0100
Subject: [QGIS-Developer] [ui] blue != blue
In-Reply-To: <fc0f2e8c-7667-3706-cb01-8ec32465c7f9@duif.net>
References: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
 <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>
 <CAK2KqicgknESMrDTXvEP7LpuiAGGPiSU7+x9L-YBoO1BaqOv3w@mail.gmail.com>
 <CA+H0G_HRJRi_+cz2NKMs-0Vc0fc87uUzhSdKnUZQJXiA0CAChg@mail.gmail.com>
 <6ab9b0de-f5c3-dd14-b7ee-90d28bba2ecf@duif.net>
 <CA+T_MsLncQ+ZSthMCe6NvEepVWf=xwvW3NOHj0ipVTMqJtKaOw@mail.gmail.com>
 <fc0f2e8c-7667-3706-cb01-8ec32465c7f9@duif.net>
Message-ID: <CA+T_MsJfp9rGtPrqH+81reh2SJTPSVuwocvuBRBP-O9phG+PoA@mail.gmail.com>

nice!

On Wed, Feb 10, 2021 at 10:00 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> (forgot to mention)
>
> Mathieu/nirvn created and added a much better one, THANKS!
>
> (see screenie)
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
> On 2/4/21 8:37 AM, Peter Petrik wrote:
> > Hi,
> >
> > The point cloud icons were created in 2 minutes in the most trivial way
> to just have "anything", to have development going. Assuming that someone
> with good designer skills may pick it up and replace it. So no offense here.
> >
> > P.
> >
> > On Wed, Feb 3, 2021 at 10:30 PM Richard Duivenvoorde <
> rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
> >
> >
> >     On 2/3/21 5:25 PM, Alexandre Neto wrote:
> >     > Richard, can you create an issue and assign it to me? I will give
> it a look.
> >
> >     https://github.com/qgis/QGIS/issues/41344 <
> https://github.com/qgis/QGIS/issues/41344>
> >
> >     I could not assign it to you, though
> >
> >     Regards,
> >
> >     Richard Duivenvoorde
> >     _______________________________________________
> >     QGIS-Developer mailing list
> >     QGIS-Developer at lists.osgeo.org <mailto:
> QGIS-Developer at lists.osgeo.org>
> >     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <
> https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> >     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210210/886fcea7/attachment.html>

From adenaculture at gmail.com  Wed Feb 10 07:33:19 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 10 Feb 2021 10:33:19 -0500
Subject: [QGIS-Developer] timezonefinder discussions
In-Reply-To: <6124c947-5199-4d71-3b22-2ff3168bab09@duif.net>
References: <6124c947-5199-4d71-3b22-2ff3168bab09@duif.net>
Message-ID: <CABPxTTp29PKRA=u+jVbwQmeMvP7eTpHFpWbwOq2Eq3ms+Z1a5g@mail.gmail.com>

First I want to thank everyone for their input in this discussion, but it
did get off track. Originally, I asked whether my Date/Time Tools plugin
<https://github.com/NationalSecurityAgency/qgis-datetimetools-plugin> I
created for our users could be added to plugins.qgis.org. It includes the
timezonefinder library which is ~42 Mb in size and exceeds the maximum size
of a plugin for inclusion in the QGIS plugin repo.

Note that I have a very good reason for making sure that every one of my
plugins are self contained primarily because my users don't manage their
machines and consequently cannot install extra python libraries which is
what timezonefinder is so it has to be included with the plugin.

It was suggested to not use timezonefinder, but just use the time zone
polygon layer. That way I wouldn't need to bundle an extra python library.
I wanted to test if this would be as fast as timezonefinder. Here is where
the conversation got side tracked because I created the 10,000 random point
layer for the purpose of testing how quickly "single point" lookups could
be done using timezonefinder vs. some QGIS point in polygon look up. It was
NOT about finding the time zones for the 10,000 points all at once. The
10,000 points were just a data source for timing single point lookups so
although "Join Attributes by Location" does a great job of identifying all
10,000 points at once that was NOT what I was trying to accomplish and I
don't think that would be the proper solution for looking up single points,
such as displaying the time zone in an info box as the mouse moves over the
QGIS canvas. On each motion event, a single point lookup is done.

1. Currently timezonefinder works great for my users. Although the plugin
is ~50Mb if I were to removed timezonefinder library and just use the time
zone polygon layer it would increase to ~100Mb. This could be an extra
download, but I like to make it easy for my users and just include it.

2. Using the time zone gpkg polygon layer is slightly more accurate, but
not by much.

3. So far I have not found that single point lookups in the time zone
polygon layer to be faster than the timezonefinder lookup. This may be
because I am currently developing on a Windows AWS instance and the point
in polygon lookups may be slow because the time zone gpkg layer resides
somewhere on the file system.

4. There is merit in using the time zone polygon gpkg layer. There are some
other algorithms that could be implemented that would benefit from it.
Right now I only have a Date, Time, and Time Zone conversion tool and
either method would work fine for this.

5. I still have a lot to think about including implement some astronomical
algorithms of the sun and moon. The plugin already implements some sun
related information.

I really appreciate everyone's comments. They have given me some new ideas.
For my users, timezonefinder does what we need, but it is probably not the
best method for the QGIS community especially with the plugin size
limitation.

I really don't want to take up any more of your time especially you QGIS
developers who have so many other duties. We can end the discussion here.
My priority will always be for my users, but I will try to make the plugin
useful to the community as well as long as it doesn't take me too much more
time to satisfy the plugin size restriction.

Thanks for all you do,

Calvin

On Wed, Feb 10, 2021 at 3:48 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi Chris,
>
> I see all this discussions on the list (going round and round....).
>
> Wasn't the conclusion that:
> 1) you just use your first version (which included that data, and was a
> little big....)
> 2) put it on plugins.qgis.org (via Tim, as uploading it would probably
> fail because of size)
> 3) we keep the 'max size' of plugins small, to not get overloaded with
> super heavy plugins?
>
> To not taking up too much energy from you (or all mail thread responders)
> :-)
>
> Or do *I* miss some information?
>
> Regards,
>
> Richard Duivenvoorde
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210210/ee428358/attachment.html>

From tim at kartoza.com  Wed Feb 10 07:59:32 2021
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 10 Feb 2021 15:59:32 +0000
Subject: [QGIS-Developer] timezonefinder discussions
In-Reply-To: <CABPxTTp29PKRA=u+jVbwQmeMvP7eTpHFpWbwOq2Eq3ms+Z1a5g@mail.gmail.com>
References: <6124c947-5199-4d71-3b22-2ff3168bab09@duif.net>
 <CABPxTTp29PKRA=u+jVbwQmeMvP7eTpHFpWbwOq2Eq3ms+Z1a5g@mail.gmail.com>
Message-ID: <CAES-DZSK6gcGnDP72HNAPJhQ1+rUmyWDz-b8AVK73F17eOuYQA@mail.gmail.com>

Thanks Calvin (and apologies for calling your Chris last time I wrote!). It
is so nice when discussions get synthesised at the end.

Feel free to contact me offlist if you want to still go the route of
publishing your larger-than-normally-allowed plugin on the plugin repo.

Regards

Tim

On Wed, Feb 10, 2021 at 3:33 PM C Hamilton <adenaculture at gmail.com> wrote:

> First I want to thank everyone for their input in this discussion, but it
> did get off track. Originally, I asked whether my Date/Time Tools plugin
> <https://github.com/NationalSecurityAgency/qgis-datetimetools-plugin> I
> created for our users could be added to plugins.qgis.org. It includes the
> timezonefinder library which is ~42 Mb in size and exceeds the maximum size
> of a plugin for inclusion in the QGIS plugin repo.
>
> Note that I have a very good reason for making sure that every one of my
> plugins are self contained primarily because my users don't manage their
> machines and consequently cannot install extra python libraries which is
> what timezonefinder is so it has to be included with the plugin.
>
> It was suggested to not use timezonefinder, but just use the time zone
> polygon layer. That way I wouldn't need to bundle an extra python library.
> I wanted to test if this would be as fast as timezonefinder. Here is where
> the conversation got side tracked because I created the 10,000 random point
> layer for the purpose of testing how quickly "single point" lookups could
> be done using timezonefinder vs. some QGIS point in polygon look up. It was
> NOT about finding the time zones for the 10,000 points all at once. The
> 10,000 points were just a data source for timing single point lookups so
> although "Join Attributes by Location" does a great job of identifying all
> 10,000 points at once that was NOT what I was trying to accomplish and I
> don't think that would be the proper solution for looking up single points,
> such as displaying the time zone in an info box as the mouse moves over the
> QGIS canvas. On each motion event, a single point lookup is done.
>
> 1. Currently timezonefinder works great for my users. Although the plugin
> is ~50Mb if I were to removed timezonefinder library and just use the time
> zone polygon layer it would increase to ~100Mb. This could be an extra
> download, but I like to make it easy for my users and just include it.
>
> 2. Using the time zone gpkg polygon layer is slightly more accurate, but
> not by much.
>
> 3. So far I have not found that single point lookups in the time zone
> polygon layer to be faster than the timezonefinder lookup. This may be
> because I am currently developing on a Windows AWS instance and the point
> in polygon lookups may be slow because the time zone gpkg layer resides
> somewhere on the file system.
>
> 4. There is merit in using the time zone polygon gpkg layer. There are
> some other algorithms that could be implemented that would benefit from it.
> Right now I only have a Date, Time, and Time Zone conversion tool and
> either method would work fine for this.
>
> 5. I still have a lot to think about including implement some astronomical
> algorithms of the sun and moon. The plugin already implements some sun
> related information.
>
> I really appreciate everyone's comments. They have given me some new
> ideas. For my users, timezonefinder does what we need, but it is probably
> not the best method for the QGIS community especially with the plugin size
> limitation.
>
> I really don't want to take up any more of your time especially you QGIS
> developers who have so many other duties. We can end the discussion here.
> My priority will always be for my users, but I will try to make the plugin
> useful to the community as well as long as it doesn't take me too much more
> time to satisfy the plugin size restriction.
>
> Thanks for all you do,
>
> Calvin
>
> On Wed, Feb 10, 2021 at 3:48 AM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
>> Hi Chris,
>>
>> I see all this discussions on the list (going round and round....).
>>
>> Wasn't the conclusion that:
>> 1) you just use your first version (which included that data, and was a
>> little big....)
>> 2) put it on plugins.qgis.org (via Tim, as uploading it would probably
>> fail because of size)
>> 3) we keep the 'max size' of plugins small, to not get overloaded with
>> super heavy plugins?
>>
>> To not taking up too much energy from you (or all mail thread responders)
>> :-)
>>
>> Or do *I* miss some information?
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>>

-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210210/e4467534/attachment-0001.html>

From Luke.A.Catania at erdc.dren.mil  Wed Feb 10 08:43:35 2021
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Wed, 10 Feb 2021 16:43:35 +0000
Subject: [QGIS-Developer] Accessing ArcGIS Web Services using CAC
Message-ID: <9d9b4d3b3b004950b12c8871ba2a8b8e@erdc.dren.mil>

I want to access some ArcGIS web services but it requires a CAC login.  I can get to the site through a browser and it prompts me to select my certificate.  I see some options to set up authentication, but not sure if I can do this for my CAC based on the options I see.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210210/c9ae5046/attachment.html>

From apasotti at gmail.com  Thu Feb 11 01:18:51 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 11 Feb 2021 10:18:51 +0100
Subject: [QGIS-Developer] Conflict resolution while editing, missing API?
Message-ID: <CAL5Q673Ym=yhzUr=PMpozBO41cOLmWyFjq1yQ+2sYW=hm5=bqg@mail.gmail.com>

Hi,

I'm thinking about how to implement a conflict resolution feature
(there have been some related talks in the issue tracker recently).

Use case: multiple users editing the same feature in the same
datasource (PG but not only PG) the last who saves wins.

For instance:
1. User A starts editing a feature
2. User B starts editing the same feature
3. User B changes the geometry and commit changes
4. User A changes the geometry and commit changes

Changes from User B are silently lost.

I would like User A to be notified that the feature was modified after
she started editing and before she commits the changes.

I know about PG notifications but I was looking at something more generic.

I've what I need to hook into the commitChanges process and block the
commit if I want to but what I really miss is a way to retrieve the
feature's status "before" it was modified in the editing buffer.

The idea is: in beforeCommitChanges I retrieve the feature status from
the backend and compare it with the feature status that User A sees at
1. But this is not currently possible because:

a. layer.getFeature() sees the feature as modified in the editing buffer
b. layer.dataProvider().getFeature() sees the feature as it is in the
backend storage
c. buffer.changedGeometries() does not have the information about the
previous status of the geometry.

Am I missing something or we really do miss an API to do what I want to do?

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From mats.taraldsvik at gmail.com  Thu Feb 11 02:29:59 2021
From: mats.taraldsvik at gmail.com (Mats Taraldsvik)
Date: Thu, 11 Feb 2021 11:29:59 +0100
Subject: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and
 vcpkg
In-Reply-To: <AM0PR02MB57775DD44ECAA6EB8C2C672193B69@AM0PR02MB5777.eurprd02.prod.outlook.com>
References: <AM0PR02MB5777088D40E2D4EE13EBDF3593B99@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CACjCNZTsBFYMhtgSFTfte9+mkKy_Yb9kvptMhiwAncD1LgCLRQ@mail.gmail.com>
 <AM0PR02MB57772729C0B2641FBA458E5193B79@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <47c87f52-7d5a-6935-6a8b-7615cd670dcf@di.uminho.pt>
 <CAECJsSo0CARNyBTxkdrJkKqL5UBdtx0RLH9jePF1zo3JAN3SQQ@mail.gmail.com>
 <AM0PR02MB57775DD44ECAA6EB8C2C672193B69@AM0PR02MB5777.eurprd02.prod.outlook.com>
Message-ID: <CAGs3qpSL9YDct=x07sx8Rygh1eyrJcwrTUzOmTNokHwBRGPP-Q@mail.gmail.com>

Hi Stefan,

Thank you for this excellent guide to compile with vcpkg, it worked right
away after me struggling with the official guide+CMake compilation for a
couple of hours.

I did make a few modifications that might help:

1. Release build:
- geos_c.lib was detected automatically, and for some reason I did not need
to explicitly set GEOS_LIBRARY

2. Debug build:

I noticed: 1> [CMake] -- Found ZSTD:
C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/lib/zstd.lib
in the logs and you wrote:
> The build will fail because the execution of crssync.exe fails. That's
because crssync.exe tries to load zstd.dll instead of zstdd.dll. I haven't
figured out why, yet. An easy workaround is copying zstdd.dll to zstd.dll
in QGIS\out\build\x64-Debug\output\bin. Then restart the build and it
should succeed.

By setting ZSTD_LIBRARY explicitly to
<your-vcpkg-root>/installed/x64-windows/debug/lib/zstdd.lib it picked the
right lib and dll:
Then log changed to: 1> [CMake] -- Found ZSTD:
C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/debug/lib/zstdd.lib

I hope this does help a bit.

I'm an outsider to this community, but my humble suggestion _when this work
is complete_ (what's missing except for python support?):
- add your CMakeSettings.json to the build description or to
src/CMakeSettings.json
- vcpkg has a new feature "manifests", where a file vcpkg.json describes
all dependencies. this should also be added or described (instead of the
vcpkg install command).
- vcpkg just got versioning, which might help align the requirements with
the rest of qgis
- I see that vcpkg already has flex and bison
(<your-vcpkg-root>/downloads/tools/winflexbison), so if there is a way for
win_bison.exe and win_flex.exe to be copied to the build directory, these
could be used instead of cygwin, making the build even easier)
- vcpkg does have binary caching, perhaps making a github actions CI build
using this method feasible?

Anyway, thank you for your efforts! It made the first QGIS-step more
pleasant. :)

Best regards,
Mats Taraldsvik

On Mon, Feb 1, 2021 at 4:24 PM Uhrig, Stefan <stefan.uhrig at sap.com> wrote:

> Hi all,
>
>
>
> In my opinion, the build with Visual Studio 2019 and vcpkg is still too
> experimental to add it to the INSTALL.md file. It might break any day if
> QGIS requires a package or package version that is not available from vcpkg.
>
>
>
> Actually, I like the idea to add it to the ?Show & tell? category. We can
> ask the community for their experiences with that setup. Does it work, is
> it getting used? If it is used by some ?critical mass? and works over a
> longer time without issues, we can add instructions to the INSTALL.md file.
> Maybe we can add a hint to the INSTALL.md file that the not so
> faint-hearted developers might give it a try and provide a link to the
> ?Show & tell? post.
>
>
>
> However, to be really useful, the debug build should also work with Python
> bindings and QGIS processing. I got it working for release builds (just
> needed to install the required Python dependencies via pip install
> <package>), but that does not work for debug builds. Someone solved that
> some years ago in another context (
> https://www.riverbankcomputing.com/pipermail/pyqt/2012-April/031385.html),
> so I might get it working. I?ll give it a try.
>
>
>
> Furthermore, I?d like to investigate the zstd.dll vs zstdd.dll load issue
> before publishing the build instructions.
>
>
>
> Best regards,
>
> Stefan
>
>
>
>
>
>
>
> *From:* QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> *On
> Behalf Of *DelazJ
> *Sent:* Monday, February 1, 2021 10:49 AM
> *To:* Jorge Gustavo Rocha <jgr at di.uminho.pt>
> *Cc:* qgis-developer <qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE
> and vcpkg
>
>
>
> Hi,
>
>
>
> Why not in the build instructions of the code repo instead:
> https://github.com/qgis/QGIS/blob/master/INSTALL.md? If it's a working
> process, easy to replicate, this is the place I'd expect this kind of
> information.
>
>
>
> Regards,
>
> Harrissou
>
>
>
> Le dim. 31 janv. 2021 ? 15:55, Jorge Gustavo Rocha <jgr at di.uminho.pt> a
> ?crit :
>
> Hi Stefan,
>
> We have now a new tab on github called 'discussions'[1]. Your detailed
> instructions are a good candidate to write down a new entry there, under
> 'Show and tell' category. The goal is to keep this information next to
> the repo. You can use the markdown syntax to enhance the writing format.
> You can also add some print screens.
>
> This is just a suggestion. Feel free to put it there or not.
>
> Regards (and thank you!),
>
> Jorge Gustavo
>
> [1] https://github.com/qgis/QGIS/discussions
>
> ?s 14:13 de 31/01/21, Uhrig, Stefan escreveu:
> > Install Visual Studio Community 2019: Select "Desktop development with
> > C++" under "Workloads" and "C++ MFC for latest v142 build tools (x86 &
> > x64)" under "Individual components". Verify that you install "Windows 10
> > SDK (10.0.18362.0)" or higher.
> >
> >
> >
> > Install Git for Windows and Python 3.
> >
> >
> >
> > Download
> >
> https://sourceforge.net/projects/winflexbison/files/win_flex_bison3-latest.zip/download
> > and extract it to a location of your choice (avoid space characters in
> > the target path).
> >
> >
> >
> > Follow the vcpkg "Quick Start: Windows" instructions at
> > https://github.com/microsoft/vcpkg#quick-start-windows. Make sure to
> > execute the "vcpkg integrate install" command.
> >
> >
> >
> > Install the required dependencies via:
> >
> >
> >
> > vcpkg --triplet=x64-windows install exiv2 gdal gsl libspatialindex
> > libspatialite libzip opencl protobuf qca qscintilla qt5 qt5-serialport
> > qt5-location qt5-winextras qtkeychain qwt zstd
> >
> >
> >
> > This may take a while as this creates a Debug and a Release build of
> > each dependency from source.
> >
> >
> >
> > Clone the QGIS repostiory. The path to the QGIS repository should not
> > contain any space characters.
> >
> >
> >
> > Start Visual Studio and open the QGIS CMakeLists.txt file via "File -->
> > Open --> CMake...". This will start the CMake generation, which will
> > fail. You will need several configuration rounds until everything is
> > setup properly.
> >
> >
> >
> > Let's start with a Release build because that requires less tweaking. Go
> > to "Project --> CMake Settings". Delete the default configuration
> > ("x64-Debug (default)").
> >
> >
> >
> > Add a new "x64-Release" configuration and set "Configuration type" to
> > "Release". Save the CMakeSettings.json file, which will start a new
> > CMake generation. "FIND_FLEX" will fail, so you need to set the
> > "FLEX_EXECUTABLE" path manually in section "CMake variables and cache".
> > Browse to your win_flex.exe file. Additionally, disable "WITH_BINDINGS"
> > and "WITH_QGIS_PROCESS". Save the file. Next set "BISON_EXECUTABLE" to
> > your win_bison.exe file and save again. Disable "WITH_QTWEBKIT" and
> > save. Set "QCA_LIBRARY" to
> > "<vcpkg-root>\installed\x64-windows\lib\qca.lib" and save. Configuration
> > should now succeed, but you have to change "GEOS_LIBRARY" from
> > "geos.lib" to "geos_c.lib". Save and start the build after CMake
> > generation has finished.
> >
> >
> >
> > Select "qgis.exe (output\bin\qgis.exe)" as start-up item in the toolbar
> > and start QGIS.
> >
> >
> >
> > Now let's do the same for a Debug build. Add a "x64-Debug" configuration
> > and save. Change to the "x64-Debug" configuration in the toolbar. Repeat
> > the steps from above (set flex and bison paths etc.). When selecting
> > libraries, take the libraries from
> > "<vcpkg-root>\installed\x64-windows\debug\lib". Most libraries will have
> > a "d" or "_d" as name suffix. The CMake generation will not always
> > select the debug versions of libraries. Hence, go over the CMake
> > variables and change release library paths to debug library paths, e.g.
> > "<vcpkg-root>\installed\x64-windows\debug\lib\geos_cd.lib" for
> > GEOS_LIBRARY. I'll append my CMakeSettings.json file as reference to
> > this mail. Save again and start the build.
> >
> >
> >
> > The build will fail because the execution of crssync.exe fails. That's
> > because crssync.exe tries to load zstd.dll instead of zstdd.dll. I
> > haven't figured out why, yet. An easy workaround is copying zstdd.dll to
> > zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the build
> > and it should succeed.
> >
> >
> >
> > You should then be able to start and debug qgis.exe and its
> > dependencies. Note that some vcpkg portfiles forget to copy over the
> > .pdb files. For example, proj is affected. If you find such a library
> > with a missing .pdb file, check whether the portfile (e.g.
> > "<vcpkg-root>\ports\proj4\portfile.cmake") contains the
> > "vcpkg_copy_pdbs()" call. If not, just add it at the end, re-install the
> > dependency and copy over the .pdb file to the QGIS output directory.
> >
> >
> >
> > I'm currently trying to get QGIS working with Python bindings. I got the
> > build working, however I'm struggling with the debug build execution.
> > The debug Python library seems to be unable to load the Release build Qt
> > libraries that come with PyQt5. Well, I'll keep trying and if I succeed,
> > I'll update the instructions.
> >
> >
> >
> > Here is my CMakeSettings.json file for reference:
> >
> >
> >
> > {
> >
> >   "configurations": [
> >
> >     {
> >
> >       "name": "x64-Release",
> >
> >       "generator": "Ninja",
> >
> >       "configurationType": "Release",
> >
> >       "buildRoot": "${projectDir}\\out\\build\\${name}",
> >
> >       "installRoot": "${projectDir}\\out\\install\\${name}",
> >
> >       "cmakeCommandArgs": "",
> >
> >       "buildCommandArgs": "",
> >
> >       "ctestCommandArgs": "",
> >
> >       "inheritEnvironments": [ "msvc_x64_x64" ],
> >
> >       "variables": [
> >
> >         {
> >
> >           "name": "WITH_BINDINGS",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_QGIS_PROCESS",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "FLEX_EXECUTABLE",
> >
> >           "value": "C:/src/tools/win_flex.exe",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "BISON_EXECUTABLE",
> >
> >           "value": "C:/src/tools/win_bison.exe",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_QTWEBKIT",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "QCA_LIBRARY",
> >
> >           "value": "C:/src/vcpkg/installed/x64-windows/lib/qca.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "GEOS_LIBRARY",
> >
> >           "value": "C:/src/vcpkg/installed/x64-windows/lib/geos_c.lib",
> >
> >           "type": "FILEPATH"
> >
> >         }
> >
> >       ]
> >
> >     },
> >
> >     {
> >
> >       "name": "x64-Debug",
> >
> >       "generator": "Ninja",
> >
> >       "configurationType": "Debug",
> >
> >       "buildRoot": "${projectDir}\\out\\build\\${name}",
> >
> >       "installRoot": "${projectDir}\\out\\install\\${name}",
> >
> >       "cmakeCommandArgs": "",
> >
> >       "buildCommandArgs": "",
> >
> >       "ctestCommandArgs": "",
> >
> >       "inheritEnvironments": [ "msvc_x64_x64" ],
> >
> >       "variables": [
> >
> >         {
> >
> >           "name": "FLEX_EXECUTABLE",
> >
> >           "value": "C:/src/tools/win_flex.exe",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "BISON_EXECUTABLE",
> >
> >           "value": "C:/src/tools/win_bison.exe",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_QTWEBKIT",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_BINDINGS",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "WITH_QGIS_PROCESS",
> >
> >           "value": "False",
> >
> >           "type": "BOOL"
> >
> >         },
> >
> >         {
> >
> >           "name": "QCA_LIBRARY",
> >
> >           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/qcad.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "GEOS_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/geos_cd.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "GSL_LIB",
> >
> >           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/gsld.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "GSLCBLAS_LIB",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/gslcblasd.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "PROJ_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/proj_d.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "QSCINTILLA_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/qscintilla2_qt5d.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "QTKEYCHAIN_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/qt5keychaind.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "QWT_LIBRARY",
> >
> >           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/qwtd.lib",
> >
> >           "type": "FILEPATH"
> >
> >         },
> >
> >         {
> >
> >           "name": "SPATIALINDEX_LIBRARY",
> >
> >           "value":
> > "C:/src/vcpkg/installed/x64-windows/debug/lib/spatialindex-64d.lib",
> >
> >           "type": "FILEPATH"
> >
> >         }
> >
> >       ]
> >
> >     }
> >
> >   ]
> >
> > }
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > *From:*i-s-o <46.i.s.o.64 at gmail.com>
> > *Sent:* Saturday, January 30, 2021 5:58 PM
> > *To:* Uhrig, Stefan <stefan.uhrig at sap.com>
> > *Cc:* qgis-developer <QGIS-Developer at lists.osgeo.org>
> > *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE
> > and vcpkg
> >
> >
> >
> > I am very interested in trying out your solution. Could you share the
> > required steps?
> >
> >
> >
> > Thx.
> >
> >
> >
> > On Fri, Jan 29, 2021, 09:25 Uhrig, Stefan <stefan.uhrig at sap.com
> > <mailto:stefan.uhrig at sap.com>> wrote:
> >
> >     TL;DR: It is currently possible to build the QGIS core app with
> >     Visual Studio 2019 and vcpkg, which makes debugging QGIS
> >     dependencies easy.
> >
> >
> >
> >
> >
> >     Hi all,
> >
> >
> >
> >     Some time ago I discovered vcpkg
> >     (https://github.com/microsoft/vcpkg). vcpkg is a package manager
> >     that downloads package source code to your local machine and builds
> >     the package locally. Recently, I discovered that vcpkg should be
> >     able to provide all dependencies to build at least the QGIS core
> >     application. Hence, I gave it a try.
> >
> >
> >
> >     Basically, it worked out of the box. I started with a fresh Windows
> >     10 installation, installed Visual Studio 2019 Community Edition,
> >     Git, vcpkg, Python 3 and flex and bison for Windows. I fetched all
> >     other dependencies via vcpkg. It was not necessary to even touch a
> >     single file in the repository. I could just open the main
> >     CMakeLists.txt file in Visual Studio and only had to tweak the CMake
> >     cache (the CMake find macros that come with QGIS are not aware of
> >     vcpkg, so I had to set some paths manually). I had to switch off
> >     some extensions though as the required dependencies were not
> >     available via vcpkg (WITH_BINDINGS, WITH_QGIS_PROCESS,
> >     WITH_QTWEBKIT). The build did not report any errors, I could start
> >     the application and it seems to work, but I did some light testing
> only.
> >
> >
> >
> >     I mainly tried it because I enjoy debugging with Visual Studio more
> >     than with gdb (or gdb wrapped in some IDE). In my experience, the
> >     performance of the Visual Studio debugger is better and it is more
> >     stable, especially in long debug sessions.
> >
> >
> >
> >     I don?t want to promote official building support of QGIS with
> >     vcpkg. Providing the dependencies via OSGeo4W is much more reliable.
> >     However, if you don?t mind the experimental nature of this setup and
> >     you want to be able to debug into QGIS? dependencies, you might give
> >     it a try. Especially, if you want to track the cause of a crash in
> >     one of QGIS? dependencies, this setup might be helpful. You have the
> >     source code and debug versions of the dependencies, so the debugger
> >     will jump to the crashing code line and you can inspect all the
> >     variables of the dependency.
> >
> >
> >
> >     If someone is interested in trying it, give me a note. I can then
> >     assemble detailed instructions on how to make it work. It took me a
> >     while to figure out which packages are needed and how the CMake
> >     cache needs to be tweaked.
> >
> >
> >
> >     Best regards,
> >
> >     Stefan
> >
> >
> >
> >
> >
> >
> >
> >     _______________________________________________
> >     QGIS-Developer mailing list
> >     QGIS-Developer at lists.osgeo.org <mailto:
> QGIS-Developer at lists.osgeo.org>
> >     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> J. Gustavo
> --
> Jorge Gustavo Rocha
> Departamento de Inform?tica
> Universidade do Minho
> 4710-057 Braga
> Gabinete 3.29 (Piso 3)
> Tel: +351 253604480
> Fax: +351 253604471
> M?vel: +351 910333888
> skype: nabocudnosor
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210211/7be6e20c/attachment-0001.html>

From andreaerdna at libero.it  Thu Feb 11 11:13:03 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Thu, 11 Feb 2021 12:13:03 -0700 (MST)
Subject: [QGIS-Developer] Do QgsGeometry constGet() e constParts() return
 non-modifiable or modifiable reference in PyQGIS?
Message-ID: <1613070783337-0.post@n6.nabble.com>

Hi all,
is it expected that QgsGeometry constGet() and constParts() in PyQGIS return
modifiable objects?

In the Python Console:

>>> geom=QgsGeometry.fromWkt( 'Point(16 41)' )
>>> geom_const=geom.constGet()
>>> geom_const.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
>>> QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))

>>> geom_const
<QgsPoint: Point (584102.13444570498540998 4539238.58925933390855789)>
>>> geom
<QgsGeometry: Point (584102.13444570498540998 4539238.58925933390855789)>


>>> geom=QgsGeometry.fromWkt( 'MultiPoint((16 41))' )
>>> for part in geom.constParts():
           
part.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))

>>> geom
<QgsGeometry: MultiPoint ((584102.13444570498540998
4539238.58925933390855789))>


Regards.

Andrea Giudiceandrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From delazj at gmail.com  Thu Feb 11 11:47:41 2021
From: delazj at gmail.com (DelazJ)
Date: Thu, 11 Feb 2021 20:47:41 +0100
Subject: [QGIS-Developer] Do QgsGeometry constGet() e constParts()
 return non-modifiable or modifiable reference in PyQGIS?
In-Reply-To: <1613070783337-0.post@n6.nabble.com>
References: <1613070783337-0.post@n6.nabble.com>
Message-ID: <CAECJsSr0Tg2LyVHrhS4BbHcUSb_ysPZYu9O5OeSp9myiXVnXrQ@mail.gmail.com>

Hi Andrea,
Funny (?). I had the same request:
https://github.com/qgis/QGIS-Documentation/pull/6488

Regards,
Harrissou

Le jeu. 11 f?vr. 2021 ? 20:13, Andrea Giudiceandrea <andreaerdna at libero.it>
a ?crit :

> Hi all,
> is it expected that QgsGeometry constGet() and constParts() in PyQGIS
> return
> modifiable objects?
>
> In the Python Console:
>
> >>> geom=QgsGeometry.fromWkt( 'Point(16 41)' )
> >>> geom_const=geom.constGet()
> >>>
> geom_const.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
> >>> QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))
>
> >>> geom_const
> <QgsPoint: Point (584102.13444570498540998 4539238.58925933390855789)>
> >>> geom
> <QgsGeometry: Point (584102.13444570498540998 4539238.58925933390855789)>
>
>
> >>> geom=QgsGeometry.fromWkt( 'MultiPoint((16 41))' )
> >>> for part in geom.constParts():
>
>
> part.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
> QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))
>
> >>> geom
> <QgsGeometry: MultiPoint ((584102.13444570498540998
> 4539238.58925933390855789))>
>
>
> Regards.
>
> Andrea Giudiceandrea
>
>
>
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210211/305a7749/attachment.html>

From nyall.dawson at gmail.com  Thu Feb 11 14:09:50 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 12 Feb 2021 08:09:50 +1000
Subject: [QGIS-Developer] A nice task for a community member: revamping the
 QGIS github landing page
Message-ID: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>

Hi all!

If someone's been looking for a great introductory task to start
contributing to QGIS, I'd like to put a call out for a volunteer to
have a go at re-working the landing page (the README) that you see
when you visit

https://github.com/qgis/QGIS

While the current text is all accurate, it's very dry and technical,
hasn't had a major update in years, and doesn't really paint QGIS in
an "exciting" light! I'd love to see this revamped into something more
visual which really showcases QGIS' capabilities. I'm thinking
something more like what you see for the alternative QGIS albireo
frontend at https://github.com/kadas-albireo/kadas-albireo2...

It'd be a great task for someone who is well familiar with QGIS'
capabilities and has a good English writing style, and it doesn't
require any technical capabilities between simple markdown editing.

Thanks in advance!
Nyall

From pedrongvenancio at gmail.com  Thu Feb 11 14:29:33 2021
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Thu, 11 Feb 2021 22:29:33 +0000
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
Message-ID: <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>

I agree with Nyall.

I think WebODM landing page is also a great source of inspiration:
https://github.com/OpenDroneMap/WebODM

Best regards,
Pedro


Nyall Dawson <nyall.dawson at gmail.com> escreveu no dia quinta, 11/02/2021
?(s) 22:11:

> Hi all!
>
> If someone's been looking for a great introductory task to start
> contributing to QGIS, I'd like to put a call out for a volunteer to
> have a go at re-working the landing page (the README) that you see
> when you visit
>
> https://github.com/qgis/QGIS
>
> While the current text is all accurate, it's very dry and technical,
> hasn't had a major update in years, and doesn't really paint QGIS in
> an "exciting" light! I'd love to see this revamped into something more
> visual which really showcases QGIS' capabilities. I'm thinking
> something more like what you see for the alternative QGIS albireo
> frontend at https://github.com/kadas-albireo/kadas-albireo2...
>
> It'd be a great task for someone who is well familiar with QGIS'
> capabilities and has a good English writing style, and it doesn't
> require any technical capabilities between simple markdown editing.
>
> Thanks in advance!
> Nyall
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210211/8209f49c/attachment.html>

From nyall.dawson at gmail.com  Thu Feb 11 14:49:05 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 12 Feb 2021 08:49:05 +1000
Subject: [QGIS-Developer] Do QgsGeometry constGet() e constParts()
 return non-modifiable or modifiable reference in PyQGIS?
In-Reply-To: <1613070783337-0.post@n6.nabble.com>
References: <1613070783337-0.post@n6.nabble.com>
Message-ID: <CAB28Asi8W6geCznNJ7e_zY6L=yRVpy0J=Re3LhwKDxWDPVwP-w@mail.gmail.com>

On Fri, 12 Feb 2021 at 05:13, Andrea Giudiceandrea
<andreaerdna at libero.it> wrote:
>
> Hi all,
> is it expected that QgsGeometry constGet() and constParts() in PyQGIS return
> modifiable objects?

Yes -- python doesn't have any concept of "const", so ALL objects are
modifiable as a result.

> In the Python Console:
>
> >>> geom=QgsGeometry.fromWkt( 'Point(16 41)' )
> >>> geom_const=geom.constGet()
> >>> geom_const.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
> >>> QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))
>
> >>> geom_const
> <QgsPoint: Point (584102.13444570498540998 4539238.58925933390855789)>
> >>> geom
> <QgsGeometry: Point (584102.13444570498540998 4539238.58925933390855789)>
>
>
> >>> geom=QgsGeometry.fromWkt( 'MultiPoint((16 41))' )
> >>> for part in geom.constParts():
>
> part.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
> QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))
>
> >>> geom
> <QgsGeometry: MultiPoint ((584102.13444570498540998
> 4539238.58925933390855789))>

Those results are as expected, but somewhat of a trap! I'd usually
only recommend that developers who are well aware of the dangers here
use the constGet method, and only do so in performance critical code
where they know they aren't changing the object.

Nyall


>
>
> Regards.
>
> Andrea Giudiceandrea
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From delazj at gmail.com  Thu Feb 11 18:54:38 2021
From: delazj at gmail.com (DelazJ)
Date: Fri, 12 Feb 2021 03:54:38 +0100
Subject: [QGIS-Developer] Do QgsGeometry constGet() e constParts()
 return non-modifiable or modifiable reference in PyQGIS?
In-Reply-To: <CAB28Asi8W6geCznNJ7e_zY6L=yRVpy0J=Re3LhwKDxWDPVwP-w@mail.gmail.com>
References: <1613070783337-0.post@n6.nabble.com>
 <CAB28Asi8W6geCznNJ7e_zY6L=yRVpy0J=Re3LhwKDxWDPVwP-w@mail.gmail.com>
Message-ID: <CAECJsSo4prvPK49LfZ7rCVGyyUJ3dCcaEL+yM0VXXBAz++MTaA@mail.gmail.com>

Hi,

Le jeu. 11 f?vr. 2021 ? 23:49, Nyall Dawson <nyall.dawson at gmail.com> a
?crit :

> On Fri, 12 Feb 2021 at 05:13, Andrea Giudiceandrea
> <andreaerdna at libero.it> wrote:
> >
> > Hi all,
> > is it expected that QgsGeometry constGet() and constParts() in PyQGIS
> return
> > modifiable objects?
>
> Yes -- python doesn't have any concept of "const", so ALL objects are
> modifiable as a result.
>
> So should we not pythonify the pyqgis docs (
https://qgis.org/pyqgis/master/core/QgsGeometry.html#qgis.core.QgsGeometry.constParts)
and avoid misleading beginners (like me in the docs PR previously
mentioned)?

Regards,
Harrissou

> > In the Python Console:
> >
> > >>> geom=QgsGeometry.fromWkt( 'Point(16 41)' )
> > >>> geom_const=geom.constGet()
> > >>>
> geom_const.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
> > >>> QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))
> >
> > >>> geom_const
> > <QgsPoint: Point (584102.13444570498540998 4539238.58925933390855789)>
> > >>> geom
> > <QgsGeometry: Point (584102.13444570498540998 4539238.58925933390855789)>
> >
> >
> > >>> geom=QgsGeometry.fromWkt( 'MultiPoint((16 41))' )
> > >>> for part in geom.constParts():
> >
> >
> part.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
> > QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))
> >
> > >>> geom
> > <QgsGeometry: MultiPoint ((584102.13444570498540998
> > 4539238.58925933390855789))>
>
> Those results are as expected, but somewhat of a trap! I'd usually
> only recommend that developers who are well aware of the dangers here
> use the constGet method, and only do so in performance critical code
> where they know they aren't changing the object.
>
> Nyall
>
>
> >
> >
> > Regards.
> >
> > Andrea Giudiceandrea
> >
> >
> >
> > --
> > Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210212/5c01f4cc/attachment.html>

From nyall.dawson at gmail.com  Thu Feb 11 19:02:20 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 12 Feb 2021 13:02:20 +1000
Subject: [QGIS-Developer] Do QgsGeometry constGet() e constParts()
 return non-modifiable or modifiable reference in PyQGIS?
In-Reply-To: <CAECJsSo4prvPK49LfZ7rCVGyyUJ3dCcaEL+yM0VXXBAz++MTaA@mail.gmail.com>
References: <1613070783337-0.post@n6.nabble.com>
 <CAB28Asi8W6geCznNJ7e_zY6L=yRVpy0J=Re3LhwKDxWDPVwP-w@mail.gmail.com>
 <CAECJsSo4prvPK49LfZ7rCVGyyUJ3dCcaEL+yM0VXXBAz++MTaA@mail.gmail.com>
Message-ID: <CAB28AsiAyPKtwA-n97QwFbj67EJTAR5mw-YrLoTiSKNqznCkXA@mail.gmail.com>

On Fri, 12 Feb 2021 at 12:54, DelazJ <delazj at gmail.com> wrote:
>
> Hi,
>
> Le jeu. 11 f?vr. 2021 ? 23:49, Nyall Dawson <nyall.dawson at gmail.com> a ?crit :
>>
>> On Fri, 12 Feb 2021 at 05:13, Andrea Giudiceandrea
>> <andreaerdna at libero.it> wrote:
>> >
>> > Hi all,
>> > is it expected that QgsGeometry constGet() and constParts() in PyQGIS return
>> > modifiable objects?
>>
>> Yes -- python doesn't have any concept of "const", so ALL objects are
>> modifiable as a result.
>>
> So should we not pythonify the pyqgis docs (https://qgis.org/pyqgis/master/core/QgsGeometry.html#qgis.core.QgsGeometry.constParts) and avoid misleading beginners (like me in the docs PR previously mentioned)?

Yes please!

Nyall

>
> Regards,
> Harrissou
>>
>> > In the Python Console:
>> >
>> > >>> geom=QgsGeometry.fromWkt( 'Point(16 41)' )
>> > >>> geom_const=geom.constGet()
>> > >>> geom_const.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
>> > >>> QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))
>> >
>> > >>> geom_const
>> > <QgsPoint: Point (584102.13444570498540998 4539238.58925933390855789)>
>> > >>> geom
>> > <QgsGeometry: Point (584102.13444570498540998 4539238.58925933390855789)>
>> >
>> >
>> > >>> geom=QgsGeometry.fromWkt( 'MultiPoint((16 41))' )
>> > >>> for part in geom.constParts():
>> >
>> > part.transform(QgsCoordinateTransform(QgsCoordinateReferenceSystem("EPSG:4326"),
>> > QgsCoordinateReferenceSystem("EPSG:25833"), QgsProject.instance()))
>> >
>> > >>> geom
>> > <QgsGeometry: MultiPoint ((584102.13444570498540998
>> > 4539238.58925933390855789))>
>>
>> Those results are as expected, but somewhat of a trap! I'd usually
>> only recommend that developers who are well aware of the dangers here
>> use the constGet method, and only do so in performance critical code
>> where they know they aren't changing the object.
>>
>> Nyall
>>
>>
>> >
>> >
>> > Regards.
>> >
>> > Andrea Giudiceandrea
>> >
>> >
>> >
>> > --
>> > Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From andreaerdna at libero.it  Fri Feb 12 10:30:24 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 12 Feb 2021 11:30:24 -0700 (MST)
Subject: [QGIS-Developer] Do QgsGeometry constGet() e constParts()
 return non-modifiable or modifiable reference in PyQGIS?
In-Reply-To: <CAB28Asi8W6geCznNJ7e_zY6L=yRVpy0J=Re3LhwKDxWDPVwP-w@mail.gmail.com>
References: <1613070783337-0.post@n6.nabble.com>
 <CAB28Asi8W6geCznNJ7e_zY6L=yRVpy0J=Re3LhwKDxWDPVwP-w@mail.gmail.com>
Message-ID: <1613154624870-0.post@n6.nabble.com>

Nyall Dawson wrote
> Those results are as expected, but somewhat of a trap!

Thanks a lot for the clarification!

Regards.

Andrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From regis.haubourg at gmail.com  Fri Feb 12 12:12:06 2021
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=c3=a9gis_Haubourg?=)
Date: Fri, 12 Feb 2021 21:12:06 +0100
Subject: [QGIS-Developer] =?utf-8?b?cOKJoXA=?=
In-Reply-To: <CAL5Q673Ym=yhzUr=PMpozBO41cOLmWyFjq1yQ+2sYW=hm5=bqg@mail.gmail.com>
References: <CAL5Q673Ym=yhzUr=PMpozBO41cOLmWyFjq1yQ+2sYW=hm5=bqg@mail.gmail.com>
Message-ID: <111d4ff0-5f94-1056-b46b-430509c8857a@gmail.com>

A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-encrypted
Size: 10 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210212/a4670a5d/attachment.pgp>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: msg.asc
Type: application/octet-stream
Size: 7488 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210212/a4670a5d/attachment.obj>

From rdmailings at duif.net  Sat Feb 13 07:29:39 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 13 Feb 2021 16:29:39 +0100
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
Message-ID: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>

Hi,

As a vivid WMS user/debugger, I see that QGIS is firing 9 requests per 'view-extent' currently.

I'm aware of cache etc etc... but... especially when using temporal filters for example, do others agree with me that this is more or less useless?
I'm also aware that a lot of WMS are actually just WMS interfaces in front of a cached WMTS, but still.

- some (governmental) services nowadays are still free for fair use, but: firing 9 times the actual requests costs resources/energy/maybe money
- before the WMTS I ran WMS services sometimes with pretty heavy styling, so on higher zoomlevels you do NOT want your clients to fire 9 requests, and just effectively use 1 ...

So in short: should I try to add some kind of (hidden?) option to minimize the number of requests?

To test a wms of all municipalities of NL:

https://geodata.nationaalgeoregister.nl/bestuurlijkegrenzen/ows?SERVICE=WMS
(layer 'gemeenten', EPSG:28992)
And look in F12/debugging window the number of GetMap requests fired when zoomed in...

I copied/created polgyons of the requests, and (see screenie) indeed looking at the center 'tile', the 8 surrounding requests are also fired....

Currently looking into this.

Regards,

Richard Duivenvoorde


 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot-20210213162752-288x155.png
Type: image/png
Size: 20325 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210213/cc7e5170/attachment-0001.png>

From jmckenna at gatewaygeomatics.com  Sat Feb 13 10:45:15 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat, 13 Feb 2021 14:45:15 -0400
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
Message-ID: <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>

Hi Richard,

Yes I've noticed this also, I just never spent time to examine why.  For 
example, using my own WMS service I zoomed in and QGIS fired 11 GetMap 
requests to my server.  It's difficult to trigger though (I can't 
reproduce with your NL service).  Bizarre.  But I have definitely seen 
9+ GetMap requests for the same service/layer.

-jeff






-- 
Jeff McKenna
GatewayGeo: MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/





On 2021-02-13 11:29 a.m., Richard Duivenvoorde wrote:
> Hi,
> 
> As a vivid WMS user/debugger, I see that QGIS is firing 9 requests per 'view-extent' currently.
> 
> I'm aware of cache etc etc... but... especially when using temporal filters for example, do others agree with me that this is more or less useless?
> I'm also aware that a lot of WMS are actually just WMS interfaces in front of a cached WMTS, but still.
> 
> - some (governmental) services nowadays are still free for fair use, but: firing 9 times the actual requests costs resources/energy/maybe money
> - before the WMTS I ran WMS services sometimes with pretty heavy styling, so on higher zoomlevels you do NOT want your clients to fire 9 requests, and just effectively use 1 ...
> 
> So in short: should I try to add some kind of (hidden?) option to minimize the number of requests?
> 
> To test a wms of all municipalities of NL:
> 
> https://geodata.nationaalgeoregister.nl/bestuurlijkegrenzen/ows?SERVICE=WMS
> (layer 'gemeenten', EPSG:28992)
> And look in F12/debugging window the number of GetMap requests fired when zoomed in...
> 
> I copied/created polgyons of the requests, and (see screenie) indeed looking at the center 'tile', the 8 surrounding requests are also fired....
> 
> Currently looking into this.
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> 
>   
> 



From pathmapper at posteo.de  Sat Feb 13 11:01:23 2021
From: pathmapper at posteo.de (pathmapper)
Date: Sat, 13 Feb 2021 20:01:23 +0100
Subject: [QGIS-Developer] 
 =?utf-8?q?QGIS_WMS_provider_firing_too_many_req?=
 =?utf-8?q?uests_!=3F?=
In-Reply-To: <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
Message-ID: <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>

Hi,

here's a related thread (i.e. xyz tiles, but I guess it's also valid vor 
wms):
https://github.com/qgis/QGIS/issues/34813

Some quotes:
"QGIS renders the surrounding areas in a background job to make 
subsequent pan actions faster. Therefore it sends more tile requests 
than necessary for the current map extent."

"Btw, we now have the code in place to fine-tune prefetching behavior 
for all raster layers on a per-layer basis, for now I just blacklisted 
osm tiles."

It sounds like the plan is to make the prefetching behavior configurable 
via QGIS settings.

Cheers,
Bjoern

On 13.02.2021 19:45, Jeff McKenna wrote:
> Hi Richard,
> 
> Yes I've noticed this also, I just never spent time to examine why.
> For example, using my own WMS service I zoomed in and QGIS fired 11
> GetMap requests to my server.  It's difficult to trigger though (I
> can't reproduce with your NL service).  Bizarre.  But I have
> definitely seen 9+ GetMap requests for the same service/layer.
> 
> -jeff
> 
> 
> 
> 
> 
> 
> --
> Jeff McKenna
> GatewayGeo: MapServer Consulting and Training Services
> co-founder of FOSS4G
> http://gatewaygeo.com/
> 
> 
> 
> 
> 
> On 2021-02-13 11:29 a.m., Richard Duivenvoorde wrote:
>> Hi,
>> 
>> As a vivid WMS user/debugger, I see that QGIS is firing 9 requests per 
>> 'view-extent' currently.
>> 
>> I'm aware of cache etc etc... but... especially when using temporal 
>> filters for example, do others agree with me that this is more or less 
>> useless?
>> I'm also aware that a lot of WMS are actually just WMS interfaces in 
>> front of a cached WMTS, but still.
>> 
>> - some (governmental) services nowadays are still free for fair use, 
>> but: firing 9 times the actual requests costs resources/energy/maybe 
>> money
>> - before the WMTS I ran WMS services sometimes with pretty heavy 
>> styling, so on higher zoomlevels you do NOT want your clients to fire 
>> 9 requests, and just effectively use 1 ...
>> 
>> So in short: should I try to add some kind of (hidden?) option to 
>> minimize the number of requests?
>> 
>> To test a wms of all municipalities of NL:
>> 
>> https://geodata.nationaalgeoregister.nl/bestuurlijkegrenzen/ows?SERVICE=WMS
>> (layer 'gemeenten', EPSG:28992)
>> And look in F12/debugging window the number of GetMap requests fired 
>> when zoomed in...
>> 
>> I copied/created polgyons of the requests, and (see screenie) indeed 
>> looking at the center 'tile', the 8 surrounding requests are also 
>> fired....
>> 
>> Currently looking into this.
>> 
>> Regards,
>> 
>> Richard Duivenvoorde
>> 
>> 
>> 
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Sat Feb 13 12:08:43 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 13 Feb 2021 21:08:43 +0100
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
 <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
Message-ID: <c4abaf75-bead-7251-bb2d-a4ce353c26c9@duif.net>

On 2/13/21 8:01 PM, pathmapper wrote:
> here's a related thread (i.e. xyz tiles, but I guess it's also valid vor wms):
> https://github.com/qgis/QGIS/issues/34813
> 
> Some quotes:
> "QGIS renders the surrounding areas in a background job to make subsequent pan actions faster. Therefore it sends more tile requests than necessary for the current map extent."
> 
> "Btw, we now have the code in place to fine-tune prefetching behavior for all raster layers on a per-layer basis, for now I just blacklisted osm tiles."
> 
> It sounds like the plan is to make the prefetching behavior configurable via QGIS settings.

Mmm, thanks. Looking into the code it looks indeed like a WMS is in logic trying to behave like a WMSC, but... next request all is forgotten... That is my conclusion, not very much comments in the code in that area for others to try to understand the pretty complex logic (about WMS, WMTS, Temporal, WMSC etc...) :-(

Anybody really into this, who can shine some light on this?

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Sat Feb 13 12:17:09 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 13 Feb 2021 21:17:09 +0100
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
Message-ID: <0c77a3da-53d7-7e31-3c1b-2f4e817c303a@duif.net>

On 2/13/21 7:45 PM, Jeff McKenna wrote:
> Hi Richard,
> 
> Yes I've noticed this also, I just never spent time to examine why.? For example, using my own WMS service I zoomed in and QGIS fired 11 GetMap requests to my server.? It's difficult to trigger though (I can't reproduce with your NL service).? Bizarre.? But I have definitely seen 9+ GetMap requests for the same service/layer.

Sometimes it starts of with just one WMS request, and after that after a zoom-action all pan actions do fire requests heavily.

I was actually looking into this issue:
https://github.com/qgis/QGIS/issues/41504

Which starts of with TIME parameters, but after some non-200 responses 'loose' the TIME-parameter....

So that is why I started to try to understand this heavy hitting...

Regards,

Richard Duivenvoorde



From luipir at gmail.com  Sun Feb 14 13:38:47 2021
From: luipir at gmail.com (Luigi Pirelli)
Date: Sun, 14 Feb 2021 22:38:47 +0100
Subject: [QGIS-Developer] Accessing ArcGIS Web Services using CAC
In-Reply-To: <9d9b4d3b3b004950b12c8871ba2a8b8e@erdc.dren.mil>
References: <9d9b4d3b3b004950b12c8871ba2a8b8e@erdc.dren.mil>
Message-ID: <CAFO80_oJ_asQya303L2jBUpd8o2kwkmA4fZUmoUso3v4SmbmaA@mail.gmail.com>

As far as I can read about CAC, at the moment QGIS auth infrastructure does
not support it. A new auth method should be added to support this auth
form. This requires coding. Auth infrastructure was financed just by a US
administration. NO idea if they have already implemented it somewhere but
not leaved free as they did before with the actual auth infrastructure.

In this list there are some of the people involved in that implementation
and can give tech support for new methods if necessary.

regards

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Wed, 10 Feb 2021 at 17:44, Catania, Luke A ERDC-RDE-GRL-VA CIV <
Luke.A.Catania at erdc.dren.mil> wrote:

> I want to access some ArcGIS web services but it requires a CAC login.  I
> can get to the site through a browser and it prompts me to select my
> certificate.  I see some options to set up authentication, but not sure if
> I can do this for my CAC based on the options I see.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210214/0bbdccc6/attachment.html>

From matteo.ghetta at gmail.com  Mon Feb 15 05:37:33 2021
From: matteo.ghetta at gmail.com (matteo)
Date: Mon, 15 Feb 2021 14:37:33 +0100
Subject: [QGIS-Developer] change appearance of pushDebugInfo of Processing
 algorithm
Message-ID: <a9df729a-a3aa-7024-65e3-7c088fe3a7e1@gmail.com>

Hi devs,

I'm looking for a way to softly customize the Processing Log info of a 
Processing script.

Like having some messages in red or bold (or both :) ). I tried to build 
a string like:

feedback.pushDebugInfo('<strong>My important message</strong>')

but the html like string is not parsed. In the algorithmShortHelp 
pythonic-html like strings are parsed and showed.

Am I missing something?

Cheers and thanks

Matteo


From pergler at gmail.com  Mon Feb 15 17:15:34 2021
From: pergler at gmail.com (Martin Pergler)
Date: Mon, 15 Feb 2021 18:15:34 -0700 (MST)
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
Message-ID: <1613438134893-0.post@n6.nabble.com>

Happy to take this on (next week, this week is a bit crazy).
I like all 3 examples given: key thing being leading off much more with an
easy-to-understand, illustrated list of main functionality and use cases.

By way of introduction, 30 years ago I was a software developer, back when
Pascal and C (++ was cutting edge!) were mainstream and Prolog was sexy (at
least for geeks, that is). I then became a mathematician for a while, before
going into business consulting. I've done a fair amount of technical writing
and ran an editorial board for a while. My day job is now risk consulting,
including probabilistic modeling, Excel/VBA, and R. On the side I help
manage and preserve a decent chunk of Canadian wilderness, through which in
the past couple of years I've become more and more involved in GIS. First,
just making a map of the darned thing, but more recently vegetation and
land-use analysis, indexing of research notes and wildlife photos,
automation so others can use it, and even more recently UAV 2.5D mapping.
I'm also a frequent contributor (Q and A) at gis.stackexchange.com

Happy also to work on this 4 (or more) hands if anyone else wants to help
out. Otherwise, I'll sit back this week and accept with gratitude any
additional suggestions of what to cover or how. I'll then come back with a
1st (but doubtlessly incomplete) draft next week.

Martin Pergler




--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From nyall.dawson at gmail.com  Mon Feb 15 19:04:10 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 16 Feb 2021 13:04:10 +1000
Subject: [QGIS-Developer] QEP 209: Expose OGR feature styles via a new
 "Embedded styling" renderer
Message-ID: <CAB28AshYw2GTe7dW6z3Prq3H4SP06cJm74cgbQGVDsLZB=0RJA@mail.gmail.com>

Hi all,

Please see https://github.com/qgis/QGIS-Enhancement-Proposals/issues/209
for a newly filed QGIS Enhancement Proposal: "Expose OGR feature
styles via a new "Embedded styling" renderer".

Some vector data formats have native support for embedding feature
styling information, such as MapInfo TAB files. These formats allow
embedded symbology to be set on a feature-by-feature basis. This
proposal concerns exposing this per-feature styling information via
the QGIS API and creation of a new "embedded styling" renderer for
compatible vector layers, which allows users to view features using
the closest possible match to their original symbology.

Comments and discussion welcome! (please keep discussion on
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/209 and not
via email replies in order to keep all conversation centralized!).

Regards,
Nyall

From giulio.fattori at tin.it  Mon Feb 15 22:19:02 2021
From: giulio.fattori at tin.it (Giulio Fattori)
Date: Tue, 16 Feb 2021 07:19:02 +0100
Subject: [QGIS-Developer] QtDesigner qgis_customwidgets
Message-ID: <1a3b8d96-d297-0e42-8325-55c432ae9592@tin.it>

Hi all,

i can't get custom widgets in QtDesigner, i get this message,

Cannot load library 
C:\OSGEO4~2\apps\qgis-dev\qtplugins\designer\qgis_customwidgets.dll:
cannot find the module

I use QGIS 3.16 and 3.17 on win7 64bit system

can someone help me

regards,

Giulio

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/4a094a4f/attachment.html>

From t.janvier at brgm.fr  Tue Feb 16 00:13:26 2021
From: t.janvier at brgm.fr (Janvier Thomas)
Date: Tue, 16 Feb 2021 08:13:26 +0000
Subject: [QGIS-Developer] Add a WFS/WMS (or possibly any data source) from
 API
Message-ID: <VI1P190MB06559F6BFF5C0DDB6453C481ED879@VI1P190MB0655.EURP190.PROD.OUTLOOK.COM>

Hi all,

I'm looking for an automated/scriptable method to publish (and update) an organization-wide set of webservices.
The idea is to deploy  a "collection of data resources" as a collection of WMS/WFS, among an organization...
It's intended to be maintainable (update/add/remove links on-the-fly) so all coworkers will have access to the same datafeeds without having to manually add each URL (especially for non-expert users).

My first thought was to provide a plugin that only job would be to register "connections" at launch and update the version of such plugin along with the connections list then deploy the update through an internal QGIS repo...
But I did not find how to "register" the webservices through the API (I found tons of doc about how to request them to serve layers, nothing on the "add connection to sources")...

Thanks in advance !

[cid:image001.png at 01D70443.FBEAFBC0]

Thomas JANVIER
3D Geomodelling developper
DGR/CIM

3 av. Claude-Guillemin - BP 36009 - 45060 ORL?ANS Cedex 2
Tel.: +33 (0)2 38 64 33 39/ t.janvier at brgm.fr<mailto:courriel at brgm.fr>
www.brgm.fr<http://www.brgm.fr/>


BRGM - THE FRENCH GEOLOGICAL SURVEY
Newsletter BRGM Infos<http://www.brgm.fr/content/newsletters?pk_campaign=signature-brgm&pk_kwd=newsletter>

[cid:image002.jpg at 01D6BE76.48D64A70]<https://twitter.com/BRGM_fr>   [cid:image003.jpg at 01D6BE76.48D64A70] <https://www.linkedin.com/company/brgm>    [cid:image004.jpg at 01D6BE76.48D64A70] <https://www.instagram.com/brgm_fr/>    [cid:image005.jpg at 01D6BE76.48D64A70] <https://www.youtube.com/user/brgmtv>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/d49b9132/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 13122 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/d49b9132/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 2560 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/d49b9132/attachment-0004.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 2618 bytes
Desc: image003.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/d49b9132/attachment-0005.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.jpg
Type: image/jpeg
Size: 2417 bytes
Desc: image004.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/d49b9132/attachment-0006.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.jpg
Type: image/jpeg
Size: 2529 bytes
Desc: image005.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/d49b9132/attachment-0007.jpg>

From etienne.trimaille at gmail.com  Tue Feb 16 00:41:24 2021
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Tue, 16 Feb 2021 15:41:24 +0700
Subject: [QGIS-Developer] Add a WFS/WMS (or possibly any data source)
 from API
In-Reply-To: <VI1P190MB06559F6BFF5C0DDB6453C481ED879@VI1P190MB0655.EURP190.PROD.OUTLOOK.COM>
References: <VI1P190MB06559F6BFF5C0DDB6453C481ED879@VI1P190MB0655.EURP190.PROD.OUTLOOK.COM>
Message-ID: <CAMtDFLLwk8S_hDK8knkceGyZacbEawjy=Ffzc8pN_wrq4_ZWJA@mail.gmail.com>

You can have a look to the "Menu from project" plugin. Especially if you
use the project stored in database, it can be easy to maintain for you to
edit layers available in the menu.

If you really want to add entries in WMS WFS, you can use a custom QGIS INI
file within your organisation or add them with QgsSettings

Pada tanggal Sel, 16 Feb 2021 15:13, Janvier Thomas <t.janvier at brgm.fr>
menulis:

> Hi all,
>
>
>
> I?m looking for an automated/scriptable method to publish (and update) an
> organization-wide set of webservices.
>
> The idea is to deploy  a ?collection of data resources? as a collection of
> WMS/WFS, among an organization?
>
> It?s intended to be maintainable (update/add/remove links on-the-fly) so
> all coworkers will have access to the same datafeeds without having to
> manually add each URL (especially for non-expert users).
>
>
>
> My first thought was to provide a plugin that only job would be to
> register ?connections? at launch and update the version of such plugin
> along with the connections list then deploy the update through an internal
> QGIS repo?
>
> But I did not find how to ?register? the webservices through the API (I
> found tons of doc about how to request them to serve layers, nothing on the
> ?add connection to sources?)?
>
>
>
> Thanks in advance !
>
>
>
>
>
> *Thomas JANVIER*
>
> 3D Geomodelling developper
>
> DGR/CIM
>
>
>
> 3 av. Claude-Guillemin - BP 36009 - 45060 ORL?ANS Cedex 2
>
> Tel.: +33 (0)2 38 64 33 39/ t.janvier at brgm.fr <courriel at brgm.fr>
>
> *www.brgm.fr* <http://www.brgm.fr/>
>
>
>
>
>
> *BRGM ? THE FRENCH GEOLOGICAL SURVEY*
>
> Newsletter BRGM Infos
> <http://www.brgm.fr/content/newsletters?pk_campaign=signature-brgm&pk_kwd=newsletter>
>
>
>
> [image: cid:image002.jpg at 01D6BE76.48D64A70] <https://twitter.com/BRGM_fr>
> [image: cid:image003.jpg at 01D6BE76.48D64A70]
> <https://www.linkedin.com/company/brgm>   [image:
> cid:image004.jpg at 01D6BE76.48D64A70] <https://www.instagram.com/brgm_fr/>
>    [image: cid:image005.jpg at 01D6BE76.48D64A70]
> <https://www.youtube.com/user/brgmtv>
>
>
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/e11cdff3/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 13122 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/e11cdff3/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 2560 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/e11cdff3/attachment-0005.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 2618 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/e11cdff3/attachment-0006.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.jpg
Type: image/jpeg
Size: 2417 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/e11cdff3/attachment-0007.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.jpg
Type: image/jpeg
Size: 2529 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/e11cdff3/attachment-0008.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.jpg
Type: image/jpeg
Size: 2417 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/e11cdff3/attachment-0009.jpg>

From jgr at di.uminho.pt  Tue Feb 16 01:10:48 2021
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Tue, 16 Feb 2021 09:10:48 +0000
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <1613438134893-0.post@n6.nabble.com>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
 <1613438134893-0.post@n6.nabble.com>
Message-ID: <b3247769-7de6-bf32-ebd7-4658ae05aaf3@di.uminho.pt>

Hi,

Thanks for stepping up, Martin.

I would like to add a single suggestion: to make a clear distinction
between QGIS and QGIS Server. If necessary, I can help/review QGIS
Server description.

Regards,

Jorge Gustavo


?s 01:15 de 16/02/21, Martin Pergler escreveu:
> Happy to take this on (next week, this week is a bit crazy).
> I like all 3 examples given: key thing being leading off much more with an
> easy-to-understand, illustrated list of main functionality and use cases.
> 
> By way of introduction, 30 years ago I was a software developer, back when
> Pascal and C (++ was cutting edge!) were mainstream and Prolog was sexy (at
> least for geeks, that is). I then became a mathematician for a while, before
> going into business consulting. I've done a fair amount of technical writing
> and ran an editorial board for a while. My day job is now risk consulting,
> including probabilistic modeling, Excel/VBA, and R. On the side I help
> manage and preserve a decent chunk of Canadian wilderness, through which in
> the past couple of years I've become more and more involved in GIS. First,
> just making a map of the darned thing, but more recently vegetation and
> land-use analysis, indexing of research notes and wildlife photos,
> automation so others can use it, and even more recently UAV 2.5D mapping.
> I'm also a frequent contributor (Q and A) at gis.stackexchange.com
> 
> Happy also to work on this 4 (or more) hands if anyone else wants to help
> out. Otherwise, I'll sit back this week and accept with gratitude any
> additional suggestions of what to cover or how. I'll then come back with a
> 1st (but doubtlessly incomplete) draft next week.
> 
> Martin Pergler
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor

From andreaerdna at libero.it  Tue Feb 16 01:24:58 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 16 Feb 2021 02:24:58 -0700 (MST)
Subject: [QGIS-Developer] QtDesigner qgis_customwidgets
In-Reply-To: <1a3b8d96-d297-0e42-8325-55c432ae9592@tin.it>
References: <1a3b8d96-d297-0e42-8325-55c432ae9592@tin.it>
Message-ID: <1613467498901-0.post@n6.nabble.com>

Giulio Fattori wrote
> i can't get custom widgets in QtDesigner, i get this message,
> 
> I use QGIS 3.16 and 3.17 on win7 64bit system

Hi Giulio,
are you using the "Qt Designer with QGIS 3.17.0 custom widgets (Nightly)" or
"Qt Designer with QGIS 3.16.3 custom widgets" shortcuts in the Windows Start
menu (or the corresponding qgis-dev-designer.bat and qgis-designer.bat
Windows batch file in the "bin" folder) to launch the Qt Designer?

Regards.

Andrea





--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From senhor.neto at gmail.com  Tue Feb 16 02:03:17 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 16 Feb 2021 10:03:17 +0000
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <b3247769-7de6-bf32-ebd7-4658ae05aaf3@di.uminho.pt>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
 <1613438134893-0.post@n6.nabble.com>
 <b3247769-7de6-bf32-ebd7-4658ae05aaf3@di.uminho.pt>
Message-ID: <CA+H0G_Ht_U8PEcLxtRPXPVj7Wp3ZTgxT9q-fngLqJmYrmmMN3A@mail.gmail.com>

There should be already some description on the QGIS Server documentation:

https://docs.qgis.org/3.16/en/docs/server_manual/introduction.html

Alexandre Neto



A ter?a, 16/02/2021, 09:11, Jorge Gustavo Rocha <jgr at di.uminho.pt> escreveu:

> Hi,
>
> Thanks for stepping up, Martin.
>
> I would like to add a single suggestion: to make a clear distinction
> between QGIS and QGIS Server. If necessary, I can help/review QGIS
> Server description.
>
> Regards,
>
> Jorge Gustavo
>
>
> ?s 01:15 de 16/02/21, Martin Pergler escreveu:
> > Happy to take this on (next week, this week is a bit crazy).
> > I like all 3 examples given: key thing being leading off much more with
> an
> > easy-to-understand, illustrated list of main functionality and use cases.
> >
> > By way of introduction, 30 years ago I was a software developer, back
> when
> > Pascal and C (++ was cutting edge!) were mainstream and Prolog was sexy
> (at
> > least for geeks, that is). I then became a mathematician for a while,
> before
> > going into business consulting. I've done a fair amount of technical
> writing
> > and ran an editorial board for a while. My day job is now risk
> consulting,
> > including probabilistic modeling, Excel/VBA, and R. On the side I help
> > manage and preserve a decent chunk of Canadian wilderness, through which
> in
> > the past couple of years I've become more and more involved in GIS.
> First,
> > just making a map of the darned thing, but more recently vegetation and
> > land-use analysis, indexing of research notes and wildlife photos,
> > automation so others can use it, and even more recently UAV 2.5D mapping.
> > I'm also a frequent contributor (Q and A) at gis.stackexchange.com
> >
> > Happy also to work on this 4 (or more) hands if anyone else wants to help
> > out. Otherwise, I'll sit back this week and accept with gratitude any
> > additional suggestions of what to cover or how. I'll then come back with
> a
> > 1st (but doubtlessly incomplete) draft next week.
> >
> > Martin Pergler
> >
> >
> >
> >
> > --
> > Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> J. Gustavo
> --
> Jorge Gustavo Rocha
> Departamento de Inform?tica
> Universidade do Minho
> 4710-057 Braga
> Gabinete 3.29 (Piso 3)
> Tel: +351 253604480
> Fax: +351 253604471
> M?vel: +351 910333888
> skype: nabocudnosor
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/b97e1c87/attachment.html>

From andreaerdna at libero.it  Tue Feb 16 03:10:46 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 16 Feb 2021 04:10:46 -0700 (MST)
Subject: [QGIS-Developer] QtDesigner qgis_customwidgets
In-Reply-To: <1613467498901-0.post@n6.nabble.com>
References: <1a3b8d96-d297-0e42-8325-55c432ae9592@tin.it>
 <1613467498901-0.post@n6.nabble.com>
Message-ID: <1613473846884-0.post@n6.nabble.com>

Andrea Giudiceandrea wrote
> are you using the "Qt Designer with QGIS 3.17.0 custom widgets (Nightly)"
> or
> "Qt Designer with QGIS 3.16.3 custom widgets"

While a normal installation of Qt Designer with QGIS 3.16.3 custom widgets
in OSGeo4W works well, Qt Designer with QGIS 3.17.0 custom widgets (Nightly)
fails to load the QGIS custom widgets.

See the issue report https://trac.osgeo.org/osgeo4w/ticket/659 (with
workaround) and the instantaneous fixes provided by 
J?rgen E. Fischer with commit
https://github.com/qgis/QGIS/commit/0fdf0e493c7ef2f6d981ef1feb4d971eeb43b4d2

Regards.

Andrea




--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rdmailings at duif.net  Tue Feb 16 03:13:08 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 16 Feb 2021 12:13:08 +0100
Subject: [QGIS-Developer] Add a WFS/WMS (or possibly any data source)
 from API
In-Reply-To: <VI1P190MB06559F6BFF5C0DDB6453C481ED879@VI1P190MB0655.EURP190.PROD.OUTLOOK.COM>
References: <VI1P190MB06559F6BFF5C0DDB6453C481ED879@VI1P190MB0655.EURP190.PROD.OUTLOOK.COM>
Message-ID: <7a1a72c9-f8a9-6351-2fc5-6836cc879e0e@duif.net>

On 2/16/21 9:13 AM, Janvier Thomas wrote:
> Hi all,
> 
> I?m looking for an automated/scriptable method to publish (and update) an organization-wide set of webservices.
> 
> The idea is to deploy? a ?collection of data resources? as a collection of WMS/WFS, among an organization?
> 
> It?s intended to be maintainable (update/add/remove links on-the-fly) so all coworkers will have access to the same datafeeds without having to manually add each URL (especially for non-expert users).
> 
> My first thought was to provide a plugin that only job would be to register ?connections? at launch and update the version of such plugin along with the connections list then deploy the update through an internal QGIS repo?
> 
> But I did not find how to ?register? the webservices through the API (I found tons of doc about how to request them to serve layers, nothing on the ?add connection to sources?)?

I do not think there is an api for such. There is (per provider) a way to save connections to a (provider specific) xml format.
Maybe use that?

Loading this (via the load button in the connections dialog) is not part of the api, but they are all private methods in 
QgsManageConnectionsDialog

See for example the one for WFS:
https://github.com/qgis/QGIS/blob/master/src/gui/qgsmanageconnectionsdialog.cpp#L947
of for postgres connections
https://github.com/qgis/QGIS/blob/master/src/gui/qgsmanageconnectionsdialog.cpp#L1041

In essence it is nothing more then:
- reading all connection props from the xml
- write the (exact) right key/value pairs to users QSettings ( aka QGIS.ini of CURRENT profile )
- emit QgsWFSSourceSelect.connectionsChanged signal (so dropdowns are updated)

Difficult part here is that the code is part of the (non public) api/ui, so I do not think you can do this 'silently': the user will always be asked to 'overwrite' a (named) connection or not.

So I think you should either 'mimic' (copy) all the 'loadXXXconnections' logic in python...

OR QGIS could maybe make it possible to call these methods from python (make public and part of pyqgis), preferably adding an extra boolean 'askPermission' to NOT ask the user/skip gui part (but that will be future versions probably).

I tested something, my make all the loadxxxconnections public in qgsmanageconnectionsdialog.h 
Then this works (in python, given aa.xml was a valid 'export' of my WFS connections):

fh = QFile('/tmp/aa.xml')
doc = QDomDocument()
doc.setContent(fh)
QgsManageConnectionsDialog().loadWfsConnections(doc, ['onelayerfrom connections.xml'])

But I fail to fire up the QgsWFSSourceSelect.connectionsChanged ...

I agree that having some kind of api would make it for larger organisations easier to deploy needed connections to all users.

Another way I've seen people doing is really creating/read/write the QGIS.ini files, and merge them with the users ones...

Regards,

Richard Duivenvoorde


From etienne.trimaille at gmail.com  Tue Feb 16 03:21:00 2021
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Tue, 16 Feb 2021 18:21:00 +0700
Subject: [QGIS-Developer] Add a WFS/WMS (or possibly any data source)
 from API
In-Reply-To: <7a1a72c9-f8a9-6351-2fc5-6836cc879e0e@duif.net>
References: <VI1P190MB06559F6BFF5C0DDB6453C481ED879@VI1P190MB0655.EURP190.PROD.OUTLOOK.COM>
 <7a1a72c9-f8a9-6351-2fc5-6836cc879e0e@duif.net>
Message-ID: <CAMtDFLKZRU=+c1GxRVdQuRcTtJjorURCfrryXfFi--VnqTyv3A@mail.gmail.com>

Richard and I mentioned QgsSettings, this a link which can help :
https://github.com/qcooperative/qgis-core-tests/blob/master/coretests/tests/testerplugin.py#L95

Le mar. 16 f?vr. 2021 ? 18:13, Richard Duivenvoorde <rdmailings at duif.net> a
?crit :

> On 2/16/21 9:13 AM, Janvier Thomas wrote:
> > Hi all,
> >
> > I?m looking for an automated/scriptable method to publish (and update)
> an organization-wide set of webservices.
> >
> > The idea is to deploy  a ?collection of data resources? as a collection
> of WMS/WFS, among an organization?
> >
> > It?s intended to be maintainable (update/add/remove links on-the-fly) so
> all coworkers will have access to the same datafeeds without having to
> manually add each URL (especially for non-expert users).
> >
> > My first thought was to provide a plugin that only job would be to
> register ?connections? at launch and update the version of such plugin
> along with the connections list then deploy the update through an internal
> QGIS repo?
> >
> > But I did not find how to ?register? the webservices through the API (I
> found tons of doc about how to request them to serve layers, nothing on the
> ?add connection to sources?)?
>
> I do not think there is an api for such. There is (per provider) a way to
> save connections to a (provider specific) xml format.
> Maybe use that?
>
> Loading this (via the load button in the connections dialog) is not part
> of the api, but they are all private methods in
> QgsManageConnectionsDialog
>
> See for example the one for WFS:
>
> https://github.com/qgis/QGIS/blob/master/src/gui/qgsmanageconnectionsdialog.cpp#L947
> of for postgres connections
>
> https://github.com/qgis/QGIS/blob/master/src/gui/qgsmanageconnectionsdialog.cpp#L1041
>
> In essence it is nothing more then:
> - reading all connection props from the xml
> - write the (exact) right key/value pairs to users QSettings ( aka
> QGIS.ini of CURRENT profile )
> - emit QgsWFSSourceSelect.connectionsChanged signal (so dropdowns are
> updated)
>
> Difficult part here is that the code is part of the (non public) api/ui,
> so I do not think you can do this 'silently': the user will always be asked
> to 'overwrite' a (named) connection or not.
>
> So I think you should either 'mimic' (copy) all the 'loadXXXconnections'
> logic in python...
>
> OR QGIS could maybe make it possible to call these methods from python
> (make public and part of pyqgis), preferably adding an extra boolean
> 'askPermission' to NOT ask the user/skip gui part (but that will be future
> versions probably).
>
> I tested something, my make all the loadxxxconnections public in
> qgsmanageconnectionsdialog.h
> Then this works (in python, given aa.xml was a valid 'export' of my WFS
> connections):
>
> fh = QFile('/tmp/aa.xml')
> doc = QDomDocument()
> doc.setContent(fh)
> QgsManageConnectionsDialog().loadWfsConnections(doc, ['onelayerfrom
> connections.xml'])
>
> But I fail to fire up the QgsWFSSourceSelect.connectionsChanged ...
>
> I agree that having some kind of api would make it for larger
> organisations easier to deploy needed connections to all users.
>
> Another way I've seen people doing is really creating/read/write the
> QGIS.ini files, and merge them with the users ones...
>
> Regards,
>
> Richard Duivenvoorde
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/7f50f8ca/attachment-0001.html>

From cavallini at faunalia.it  Tue Feb 16 05:35:53 2021
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 16 Feb 2021 14:35:53 +0100
Subject: [QGIS-Developer] PostGIS credentials
Message-ID: <8f21dfa2-77c6-b865-4b46-4f4b0d820bff@faunalia.it>

Hi all,
if an user copypaste PostGIS credentials in the New connection dialog,
often it ends up with extra space(s) at the end of username, dbname, or
passwd. This is not easy to spot, and ends up with a lot of useless
frustration. Of course psql strips spaces, but qgis encloses each string
with '', so it preserves the spaces. This is somewhat unavoidable, as
the user may _want_ the trailing spaces. Therefore I suggest to show
explicitly the spaces, e.g. with a coloured block, so the user can
easily understand the source of error.
Is this reasonable?
Cheers.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From rdmailings at duif.net  Tue Feb 16 05:39:03 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 16 Feb 2021 14:39:03 +0100
Subject: [QGIS-Developer] PostGIS credentials
In-Reply-To: <8f21dfa2-77c6-b865-4b46-4f4b0d820bff@faunalia.it>
References: <8f21dfa2-77c6-b865-4b46-4f4b0d820bff@faunalia.it>
Message-ID: <ff717385-dbbb-5cb7-64e8-6c6e02efe0ad@duif.net>

On 2/16/21 2:35 PM, Paolo Cavallini wrote:
> Hi all,
> if an user copypaste PostGIS credentials in the New connection dialog,
> often it ends up with extra space(s) at the end of username, dbname, or
> passwd. This is not easy to spot, and ends up with a lot of useless
> frustration. Of course psql strips spaces, but qgis encloses each string
> with '', so it preserves the spaces. This is somewhat unavoidable, as
> the user may _want_ the trailing spaces. Therefore I suggest to show
> explicitly the spaces, e.g. with a coloured block, so the user can
> easily understand the source of error.

I do not think a sane user would want to end a username OR password with a space....
This is asking for issues, everywhere in your toolchain ...

Would it not be better to just 'strip' username,dbname and passwd? From trailing (and starting) whitespace?

Regards,

Richard Duivenvoorde

From cavallini at faunalia.it  Tue Feb 16 06:28:37 2021
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 16 Feb 2021 15:28:37 +0100
Subject: [QGIS-Developer] PostGIS credentials
In-Reply-To: <ff717385-dbbb-5cb7-64e8-6c6e02efe0ad@duif.net>
References: <8f21dfa2-77c6-b865-4b46-4f4b0d820bff@faunalia.it>
 <ff717385-dbbb-5cb7-64e8-6c6e02efe0ad@duif.net>
Message-ID: <6f4a8ffb-8892-5638-ff7a-1c8923c52a1d@faunalia.it>

Hi Richard,

Il 16/02/21 14:39, Richard Duivenvoorde ha scritto:

> I do not think a sane user would want to end a username OR password with a space....
> This is asking for issues, everywhere in your toolchain ...
> 
> Would it not be better to just 'strip' username,dbname and passwd? From trailing (and starting) whitespace?

IMHO not: spaces are valid characters, and the software should not take
arbitrary decisions. But your solution will be better than the current
one for most users (except for the insane ;) ).
Cheers.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From stefan.uhrig at sap.com  Tue Feb 16 07:48:35 2021
From: stefan.uhrig at sap.com (Uhrig, Stefan)
Date: Tue, 16 Feb 2021 15:48:35 +0000
Subject: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and
 vcpkg
In-Reply-To: <CAGs3qpSL9YDct=x07sx8Rygh1eyrJcwrTUzOmTNokHwBRGPP-Q@mail.gmail.com>
References: <AM0PR02MB5777088D40E2D4EE13EBDF3593B99@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CACjCNZTsBFYMhtgSFTfte9+mkKy_Yb9kvptMhiwAncD1LgCLRQ@mail.gmail.com>
 <AM0PR02MB57772729C0B2641FBA458E5193B79@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <47c87f52-7d5a-6935-6a8b-7615cd670dcf@di.uminho.pt>
 <CAECJsSo0CARNyBTxkdrJkKqL5UBdtx0RLH9jePF1zo3JAN3SQQ@mail.gmail.com>
 <AM0PR02MB57775DD44ECAA6EB8C2C672193B69@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CAGs3qpSL9YDct=x07sx8Rygh1eyrJcwrTUzOmTNokHwBRGPP-Q@mail.gmail.com>
Message-ID: <AM0PR02MB5777346E9E8D7D069037A9E693879@AM0PR02MB5777.eurprd02.prod.outlook.com>

Hi Mats,

Thanks for the feedback! Good to hear that it worked for you. And thanks for sharing your configuration insights!

When I last tried, geos_c.lib was detected as well. So, this seems to be fixed. Thanks for the ZSTD hint, I missed the ?Show advanced variables? checkbox in Visual Studio.

@Jorge: I planned to add the instructions to the discussion section first, but it seems to be gone. Was it removed?

@All: Are there concerns adding these instructions to https://github.com/qgis/QGIS/blob/master/INSTALL.md with an ?experimental? hint? If there aren?t any concerns, I can prepare a pull request.

Best regards,
Stefan

From: Mats Taraldsvik <mats.taraldsvik at gmail.com>
Sent: Thursday, February 11, 2021 11:30 AM
To: Uhrig, Stefan <stefan.uhrig at sap.com>
Cc: DelazJ <delazj at gmail.com>; Jorge Gustavo Rocha <jgr at di.uminho.pt>; qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and vcpkg

Hi Stefan,

Thank you for this excellent guide to compile with vcpkg, it worked right away after me struggling with the official guide+CMake compilation for a couple of hours.

I did make a few modifications that might help:

1. Release build:
- geos_c.lib was detected automatically, and for some reason I did not need to explicitly set GEOS_LIBRARY

2. Debug build:

I noticed: 1> [CMake] -- Found ZSTD: C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/lib/zstd.lib in the logs and you wrote:
> The build will fail because the execution of crssync.exe fails. That's because crssync.exe tries to load zstd.dll instead of zstdd.dll. I haven't figured out why, yet. An easy workaround is copying zstdd.dll to zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the build and it should succeed.

By setting ZSTD_LIBRARY explicitly to <your-vcpkg-root>/installed/x64-windows/debug/lib/zstdd.lib it picked the right lib and dll:
Then log changed to: 1> [CMake] -- Found ZSTD: C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/debug/lib/zstdd.lib

I hope this does help a bit.

I'm an outsider to this community, but my humble suggestion _when this work is complete_ (what's missing except for python support?):
- add your CMakeSettings.json to the build description or to src/CMakeSettings.json
- vcpkg has a new feature "manifests", where a file vcpkg.json describes all dependencies. this should also be added or described (instead of the vcpkg install command).
- vcpkg just got versioning, which might help align the requirements with the rest of qgis
- I see that vcpkg already has flex and bison (<your-vcpkg-root>/downloads/tools/winflexbison), so if there is a way for win_bison.exe and win_flex.exe to be copied to the build directory, these could be used instead of cygwin, making the build even easier)
- vcpkg does have binary caching, perhaps making a github actions CI build using this method feasible?

Anyway, thank you for your efforts! It made the first QGIS-step more pleasant. :)

Best regards,
Mats Taraldsvik

On Mon, Feb 1, 2021 at 4:24 PM Uhrig, Stefan <stefan.uhrig at sap.com<mailto:stefan.uhrig at sap.com>> wrote:
Hi all,

In my opinion, the build with Visual Studio 2019 and vcpkg is still too experimental to add it to the INSTALL.md file. It might break any day if QGIS requires a package or package version that is not available from vcpkg.

Actually, I like the idea to add it to the ?Show & tell? category. We can ask the community for their experiences with that setup. Does it work, is it getting used? If it is used by some ?critical mass? and works over a longer time without issues, we can add instructions to the INSTALL.md file. Maybe we can add a hint to the INSTALL.md file that the not so faint-hearted developers might give it a try and provide a link to the ?Show & tell? post.

However, to be really useful, the debug build should also work with Python bindings and QGIS processing. I got it working for release builds (just needed to install the required Python dependencies via pip install <package>), but that does not work for debug builds. Someone solved that some years ago in another context (https://www.riverbankcomputing.com/pipermail/pyqt/2012-April/031385.html), so I might get it working. I?ll give it a try.

Furthermore, I?d like to investigate the zstd.dll vs zstdd.dll load issue before publishing the build instructions.

Best regards,
Stefan



From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org<mailto:qgis-developer-bounces at lists.osgeo.org>> On Behalf Of DelazJ
Sent: Monday, February 1, 2021 10:49 AM
To: Jorge Gustavo Rocha <jgr at di.uminho.pt<mailto:jgr at di.uminho.pt>>
Cc: qgis-developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>>
Subject: Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and vcpkg

Hi,

Why not in the build instructions of the code repo instead: https://github.com/qgis/QGIS/blob/master/INSTALL.md? If it's a working process, easy to replicate, this is the place I'd expect this kind of information.

Regards,
Harrissou

Le dim. 31 janv. 2021 ? 15:55, Jorge Gustavo Rocha <jgr at di.uminho.pt<mailto:jgr at di.uminho.pt>> a ?crit :
Hi Stefan,

We have now a new tab on github called 'discussions'[1]. Your detailed
instructions are a good candidate to write down a new entry there, under
'Show and tell' category. The goal is to keep this information next to
the repo. You can use the markdown syntax to enhance the writing format.
You can also add some print screens.

This is just a suggestion. Feel free to put it there or not.

Regards (and thank you!),

Jorge Gustavo

[1] https://github.com/qgis/QGIS/discussions

?s 14:13 de 31/01/21, Uhrig, Stefan escreveu:
> Install Visual Studio Community 2019: Select "Desktop development with
> C++" under "Workloads" and "C++ MFC for latest v142 build tools (x86 &
> x64)" under "Individual components". Verify that you install "Windows 10
> SDK (10.0.18362.0)" or higher.
>
>
>
> Install Git for Windows and Python 3.
>
>
>
> Download
> https://sourceforge.net/projects/winflexbison/files/win_flex_bison3-latest.zip/download
> and extract it to a location of your choice (avoid space characters in
> the target path).
>
>
>
> Follow the vcpkg "Quick Start: Windows" instructions at
> https://github.com/microsoft/vcpkg#quick-start-windows. Make sure to
> execute the "vcpkg integrate install" command.
>
>
>
> Install the required dependencies via:
>
>
>
> vcpkg --triplet=x64-windows install exiv2 gdal gsl libspatialindex
> libspatialite libzip opencl protobuf qca qscintilla qt5 qt5-serialport
> qt5-location qt5-winextras qtkeychain qwt zstd
>
>
>
> This may take a while as this creates a Debug and a Release build of
> each dependency from source.
>
>
>
> Clone the QGIS repostiory. The path to the QGIS repository should not
> contain any space characters.
>
>
>
> Start Visual Studio and open the QGIS CMakeLists.txt file via "File -->
> Open --> CMake...". This will start the CMake generation, which will
> fail. You will need several configuration rounds until everything is
> setup properly.
>
>
>
> Let's start with a Release build because that requires less tweaking. Go
> to "Project --> CMake Settings". Delete the default configuration
> ("x64-Debug (default)").
>
>
>
> Add a new "x64-Release" configuration and set "Configuration type" to
> "Release". Save the CMakeSettings.json file, which will start a new
> CMake generation. "FIND_FLEX" will fail, so you need to set the
> "FLEX_EXECUTABLE" path manually in section "CMake variables and cache".
> Browse to your win_flex.exe file. Additionally, disable "WITH_BINDINGS"
> and "WITH_QGIS_PROCESS". Save the file. Next set "BISON_EXECUTABLE" to
> your win_bison.exe file and save again. Disable "WITH_QTWEBKIT" and
> save. Set "QCA_LIBRARY" to
> "<vcpkg-root>\installed\x64-windows\lib\qca.lib" and save. Configuration
> should now succeed, but you have to change "GEOS_LIBRARY" from
> "geos.lib" to "geos_c.lib". Save and start the build after CMake
> generation has finished.
>
>
>
> Select "qgis.exe (output\bin\qgis.exe)" as start-up item in the toolbar
> and start QGIS.
>
>
>
> Now let's do the same for a Debug build. Add a "x64-Debug" configuration
> and save. Change to the "x64-Debug" configuration in the toolbar. Repeat
> the steps from above (set flex and bison paths etc.). When selecting
> libraries, take the libraries from
> "<vcpkg-root>\installed\x64-windows\debug\lib". Most libraries will have
> a "d" or "_d" as name suffix. The CMake generation will not always
> select the debug versions of libraries. Hence, go over the CMake
> variables and change release library paths to debug library paths, e.g.
> "<vcpkg-root>\installed\x64-windows\debug\lib\geos_cd.lib" for
> GEOS_LIBRARY. I'll append my CMakeSettings.json file as reference to
> this mail. Save again and start the build.
>
>
>
> The build will fail because the execution of crssync.exe fails. That's
> because crssync.exe tries to load zstd.dll instead of zstdd.dll. I
> haven't figured out why, yet. An easy workaround is copying zstdd.dll to
> zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the build
> and it should succeed.
>
>
>
> You should then be able to start and debug qgis.exe and its
> dependencies. Note that some vcpkg portfiles forget to copy over the
> .pdb files. For example, proj is affected. If you find such a library
> with a missing .pdb file, check whether the portfile (e.g.
> "<vcpkg-root>\ports\proj4\portfile.cmake") contains the
> "vcpkg_copy_pdbs()" call. If not, just add it at the end, re-install the
> dependency and copy over the .pdb file to the QGIS output directory.
>
>
>
> I'm currently trying to get QGIS working with Python bindings. I got the
> build working, however I'm struggling with the debug build execution.
> The debug Python library seems to be unable to load the Release build Qt
> libraries that come with PyQt5. Well, I'll keep trying and if I succeed,
> I'll update the instructions.
>
>
>
> Here is my CMakeSettings.json file for reference:
>
>
>
> {
>
>   "configurations": [
>
>     {
>
>       "name": "x64-Release",
>
>       "generator": "Ninja",
>
>       "configurationType": "Release",
>
>       "buildRoot": "${projectDir}\\out\\build\\${name}",
>
>       "installRoot": "${projectDir}\\out\\install\\${name}",
>
>       "cmakeCommandArgs": "",
>
>       "buildCommandArgs": "",
>
>       "ctestCommandArgs": "",
>
>       "inheritEnvironments": [ "msvc_x64_x64" ],
>
>       "variables": [
>
>         {
>
>           "name": "WITH_BINDINGS",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "WITH_QGIS_PROCESS",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "FLEX_EXECUTABLE",
>
>           "value": "C:/src/tools/win_flex.exe",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "BISON_EXECUTABLE",
>
>           "value": "C:/src/tools/win_bison.exe",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "WITH_QTWEBKIT",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "QCA_LIBRARY",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/lib/qca.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "GEOS_LIBRARY",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/lib/geos_c.lib",
>
>           "type": "FILEPATH"
>
>         }
>
>       ]
>
>     },
>
>     {
>
>       "name": "x64-Debug",
>
>       "generator": "Ninja",
>
>       "configurationType": "Debug",
>
>       "buildRoot": "${projectDir}\\out\\build\\${name}",
>
>       "installRoot": "${projectDir}\\out\\install\\${name}",
>
>       "cmakeCommandArgs": "",
>
>       "buildCommandArgs": "",
>
>       "ctestCommandArgs": "",
>
>       "inheritEnvironments": [ "msvc_x64_x64" ],
>
>       "variables": [
>
>         {
>
>           "name": "FLEX_EXECUTABLE",
>
>           "value": "C:/src/tools/win_flex.exe",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "BISON_EXECUTABLE",
>
>           "value": "C:/src/tools/win_bison.exe",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "WITH_QTWEBKIT",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "WITH_BINDINGS",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "WITH_QGIS_PROCESS",
>
>           "value": "False",
>
>           "type": "BOOL"
>
>         },
>
>         {
>
>           "name": "QCA_LIBRARY",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/qcad.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "GEOS_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/geos_cd.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "GSL_LIB",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/gsld.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "GSLCBLAS_LIB",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/gslcblasd.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "PROJ_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/proj_d.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "QSCINTILLA_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/qscintilla2_qt5d.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "QTKEYCHAIN_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/qt5keychaind.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "QWT_LIBRARY",
>
>           "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/qwtd.lib",
>
>           "type": "FILEPATH"
>
>         },
>
>         {
>
>           "name": "SPATIALINDEX_LIBRARY",
>
>           "value":
> "C:/src/vcpkg/installed/x64-windows/debug/lib/spatialindex-64d.lib",
>
>           "type": "FILEPATH"
>
>         }
>
>       ]
>
>     }
>
>   ]
>
> }
>
>
>
>
>
>
>
>
>
> *From:*i-s-o <46.i.s.o.64 at gmail.com<mailto:46.i.s.o.64 at gmail.com>>
> *Sent:* Saturday, January 30, 2021 5:58 PM
> *To:* Uhrig, Stefan <stefan.uhrig at sap.com<mailto:stefan.uhrig at sap.com>>
> *Cc:* qgis-developer <QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>>
> *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE
> and vcpkg
>
>
>
> I am very interested in trying out your solution. Could you share the
> required steps?
>
>
>
> Thx.
>
>
>
> On Fri, Jan 29, 2021, 09:25 Uhrig, Stefan <stefan.uhrig at sap.com<mailto:stefan.uhrig at sap.com>
> <mailto:stefan.uhrig at sap.com<mailto:stefan.uhrig at sap.com>>> wrote:
>
>     TL;DR: It is currently possible to build the QGIS core app with
>     Visual Studio 2019 and vcpkg, which makes debugging QGIS
>     dependencies easy.
>
>
>
>
>
>     Hi all,
>
>
>
>     Some time ago I discovered vcpkg
>     (https://github.com/microsoft/vcpkg). vcpkg is a package manager
>     that downloads package source code to your local machine and builds
>     the package locally. Recently, I discovered that vcpkg should be
>     able to provide all dependencies to build at least the QGIS core
>     application. Hence, I gave it a try.
>
>
>
>     Basically, it worked out of the box. I started with a fresh Windows
>     10 installation, installed Visual Studio 2019 Community Edition,
>     Git, vcpkg, Python 3 and flex and bison for Windows. I fetched all
>     other dependencies via vcpkg. It was not necessary to even touch a
>     single file in the repository. I could just open the main
>     CMakeLists.txt file in Visual Studio and only had to tweak the CMake
>     cache (the CMake find macros that come with QGIS are not aware of
>     vcpkg, so I had to set some paths manually). I had to switch off
>     some extensions though as the required dependencies were not
>     available via vcpkg (WITH_BINDINGS, WITH_QGIS_PROCESS,
>     WITH_QTWEBKIT). The build did not report any errors, I could start
>     the application and it seems to work, but I did some light testing only.
>
>
>
>     I mainly tried it because I enjoy debugging with Visual Studio more
>     than with gdb (or gdb wrapped in some IDE). In my experience, the
>     performance of the Visual Studio debugger is better and it is more
>     stable, especially in long debug sessions.
>
>
>
>     I don?t want to promote official building support of QGIS with
>     vcpkg. Providing the dependencies via OSGeo4W is much more reliable.
>     However, if you don?t mind the experimental nature of this setup and
>     you want to be able to debug into QGIS? dependencies, you might give
>     it a try. Especially, if you want to track the cause of a crash in
>     one of QGIS? dependencies, this setup might be helpful. You have the
>     source code and debug versions of the dependencies, so the debugger
>     will jump to the crashing code line and you can inspect all the
>     variables of the dependency.
>
>
>
>     If someone is interested in trying it, give me a note. I can then
>     assemble detailed instructions on how to make it work. It took me a
>     while to figure out which packages are needed and how the CMake
>     cache needs to be tweaked.
>
>
>
>     Best regards,
>
>     Stefan
>
>
>
>
>
>
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org> <mailto:QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

J. Gustavo
--
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210216/71aa3b5e/attachment-0001.html>

From jgr at di.uminho.pt  Tue Feb 16 10:01:27 2021
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Tue, 16 Feb 2021 18:01:27 +0000
Subject: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and
 vcpkg
In-Reply-To: <AM0PR02MB5777346E9E8D7D069037A9E693879@AM0PR02MB5777.eurprd02.prod.outlook.com>
References: <AM0PR02MB5777088D40E2D4EE13EBDF3593B99@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CACjCNZTsBFYMhtgSFTfte9+mkKy_Yb9kvptMhiwAncD1LgCLRQ@mail.gmail.com>
 <AM0PR02MB57772729C0B2641FBA458E5193B79@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <47c87f52-7d5a-6935-6a8b-7615cd670dcf@di.uminho.pt>
 <CAECJsSo0CARNyBTxkdrJkKqL5UBdtx0RLH9jePF1zo3JAN3SQQ@mail.gmail.com>
 <AM0PR02MB57775DD44ECAA6EB8C2C672193B69@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CAGs3qpSL9YDct=x07sx8Rygh1eyrJcwrTUzOmTNokHwBRGPP-Q@mail.gmail.com>
 <AM0PR02MB5777346E9E8D7D069037A9E693879@AM0PR02MB5777.eurprd02.prod.outlook.com>
Message-ID: <04ddad2a-8f28-58e8-f04f-e680176861b8@di.uminho.pt>

Hi Stefan,

Yes, GitHub discussions were removed. I don't know why.

Regards,

Jorge

?s 15:48 de 16/02/21, Uhrig, Stefan escreveu:
> Hi Mats,
> 
> ?
> 
> Thanks for the feedback! Good to hear that it worked for you. And thanks
> for sharing your configuration insights!
> 
> ?
> 
> When I last tried, geos_c.lib was detected as well. So, this seems to be
> fixed. Thanks for the ZSTD hint, I missed the ?Show advanced variables?
> checkbox in Visual Studio.
> 
> ?
> 
> @Jorge: I planned to add the instructions to the discussion section
> first, but it seems to be gone. Was it removed?
> 
> ?
> 
> @All: Are there concerns adding these instructions to
> https://github.com/qgis/QGIS/blob/master/INSTALL.mdwith an
> ?experimental? hint? If there aren?t any concerns, I can prepare a pull
> request.
> 
> ?
> 
> Best regards,
> 
> Stefan
> 
> ?
> 
> *From:*Mats Taraldsvik <mats.taraldsvik at gmail.com>
> *Sent:* Thursday, February 11, 2021 11:30 AM
> *To:* Uhrig, Stefan <stefan.uhrig at sap.com>
> *Cc:* DelazJ <delazj at gmail.com>; Jorge Gustavo Rocha <jgr at di.uminho.pt>;
> qgis-developer <qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE
> and vcpkg
> 
> ?
> 
> Hi Stefan,
> 
> ?
> 
> Thank you for this excellent guide to compile with vcpkg, it worked
> right away after me struggling with the official guide+CMake compilation
> for a couple of hours.
> 
> ?
> 
> I did make a few modifications that might help:
> 
> ?
> 
> 1. Release build:
> 
> - geos_c.lib was detected automatically, and for some reason I did not
> need to explicitly set GEOS_LIBRARY
> 
> ?
> 
> 2. Debug build:
> 
> ?
> 
> I noticed: 1> [CMake] -- Found ZSTD:
> C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/lib/zstd.lib
> in the logs and you wrote:
> 
>> The build will fail because the execution of crssync.exe fails. That's
> because crssync.exe tries to load zstd.dll instead of zstdd.dll. I
> haven't figured out why, yet. An easy workaround is copying zstdd.dll to
> zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the build
> and it should succeed.
> 
> ?
> 
> By setting ZSTD_LIBRARY explicitly to
> <your-vcpkg-root>/installed/x64-windows/debug/lib/zstdd.lib it picked
> the right lib and dll:
> 
> Then log changed to: 1> [CMake] -- Found ZSTD:
> C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/debug/lib/zstdd.lib
> 
> ?
> 
> I hope this does help a bit.
> 
> ?
> 
> I'm an outsider to this community, but my humble suggestion _when this
> work is complete_ (what's missing except for python support?):
> 
> - add your CMakeSettings.json to the build description or to
> src/CMakeSettings.json
> 
> - vcpkg has a new feature "manifests", where a file vcpkg.json describes
> all dependencies. this should also be added or described (instead of the
> vcpkg install command).
> 
> - vcpkg just got versioning, which might help align the requirements
> with the rest of qgis
> 
> - I see that vcpkg already has flex and bison
> (<your-vcpkg-root>/downloads/tools/winflexbison), so if there is a way
> for win_bison.exe and win_flex.exe to be copied to the build directory,
> these could be used instead of cygwin, making the build even easier)
> 
> - vcpkg does have binary caching, perhaps making a github actions CI
> build using this method feasible?
> 
> ?
> 
> Anyway, thank you for your efforts! It made the first QGIS-step more
> pleasant. :)
> 
> ?
> 
> Best regards,
> 
> Mats Taraldsvik
> 
> ?
> 
> On Mon, Feb 1, 2021 at 4:24 PM Uhrig, Stefan <stefan.uhrig at sap.com
> <mailto:stefan.uhrig at sap.com>> wrote:
> 
>     Hi all,
> 
>     ?
> 
>     In my opinion, the build with Visual Studio 2019 and vcpkg is still
>     too experimental to add it to the INSTALL.md file. It might break
>     any day if QGIS requires a package or package version that is not
>     available from vcpkg.
> 
>     ?
> 
>     Actually, I like the idea to add it to the ?Show & tell? category.
>     We can ask the community for their experiences with that setup. Does
>     it work, is it getting used? If it is used by some ?critical mass?
>     and works over a longer time without issues, we can add instructions
>     to the INSTALL.md file. Maybe we can add a hint to the INSTALL.md
>     file that the not so faint-hearted developers might give it a try
>     and provide a link to the ?Show & tell? post.
> 
>     ?
> 
>     However, to be really useful, the debug build should also work with
>     Python bindings and QGIS processing. I got it working for release
>     builds (just needed to install the required Python dependencies via
>     pip install <package>), but that does not work for debug builds.
>     Someone solved that some years ago in another context
>     (https://www.riverbankcomputing.com/pipermail/pyqt/2012-April/031385.html),
>     so I might get it working. I?ll give it a try.
> 
>     ?
> 
>     Furthermore, I?d like to investigate the zstd.dll vs zstdd.dll load
>     issue before publishing the build instructions.
> 
>     ?
> 
>     Best regards,
> 
>     Stefan
> 
>     ?
> 
>     ?
> 
>     ?
> 
>     *From:*QGIS-Developer <qgis-developer-bounces at lists.osgeo.org
>     <mailto:qgis-developer-bounces at lists.osgeo.org>> *On Behalf Of *DelazJ
>     *Sent:* Monday, February 1, 2021 10:49 AM
>     *To:* Jorge Gustavo Rocha <jgr at di.uminho.pt <mailto:jgr at di.uminho.pt>>
>     *Cc:* qgis-developer <qgis-developer at lists.osgeo.org
>     <mailto:qgis-developer at lists.osgeo.org>>
>     *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio
>     2019 CE and vcpkg
> 
>     ?
> 
>     Hi,
> 
>     ?
> 
>     Why not in the build instructions of the code repo instead:
>     https://github.com/qgis/QGIS/blob/master/INSTALL.md? If it's a
>     working process, easy to replicate, this is the place I'd expect
>     this kind of information.
> 
>     ?
> 
>     Regards,
> 
>     Harrissou
> 
>     ?
> 
>     Le?dim. 31 janv. 2021 ??15:55, Jorge Gustavo Rocha <jgr at di.uminho.pt
>     <mailto:jgr at di.uminho.pt>> a ?crit?:
> 
>         Hi Stefan,
> 
>         We have now a new tab on github called 'discussions'[1]. Your
>         detailed
>         instructions are a good candidate to write down a new entry
>         there, under
>         'Show and tell' category. The goal is to keep this information
>         next to
>         the repo. You can use the markdown syntax to enhance the writing
>         format.
>         You can also add some print screens.
> 
>         This is just a suggestion. Feel free to put it there or not.
> 
>         Regards (and thank you!),
> 
>         Jorge Gustavo
> 
>         [1] https://github.com/qgis/QGIS/discussions
> 
>         ?s 14:13 de 31/01/21, Uhrig, Stefan escreveu:
>         > Install Visual Studio Community 2019: Select "Desktop
>         development with
>         > C++" under "Workloads" and "C++ MFC for latest v142 build
>         tools (x86 &
>         > x64)" under "Individual components". Verify that you install
>         "Windows 10
>         > SDK (10.0.18362.0)" or higher.
>         >
>         > ?
>         >
>         > Install Git for Windows and Python 3.
>         >
>         > ?
>         >
>         > Download
>         >
>         https://sourceforge.net/projects/winflexbison/files/win_flex_bison3-latest.zip/download
>         > and extract it to a location of your choice (avoid space
>         characters in
>         > the target path).
>         >
>         > ?
>         >
>         > Follow the vcpkg "Quick Start: Windows" instructions at
>         > https://github.com/microsoft/vcpkg#quick-start-windows. Make
>         sure to
>         > execute the "vcpkg integrate install" command.
>         >
>         > ?
>         >
>         > Install the required dependencies via:
>         >
>         > ?
>         >
>         > vcpkg --triplet=x64-windows install exiv2 gdal gsl libspatialindex
>         > libspatialite libzip opencl protobuf qca qscintilla qt5
>         qt5-serialport
>         > qt5-location qt5-winextras qtkeychain qwt zstd
>         >
>         > ?
>         >
>         > This may take a while as this creates a Debug and a Release
>         build of
>         > each dependency from source.
>         >
>         > ?
>         >
>         > Clone the QGIS repostiory. The path to the QGIS repository
>         should not
>         > contain any space characters.
>         >
>         > ?
>         >
>         > Start Visual Studio and open the QGIS CMakeLists.txt file via
>         "File -->
>         > Open --> CMake...". This will start the CMake generation,
>         which will
>         > fail. You will need several configuration rounds until
>         everything is
>         > setup properly.
>         >
>         > ?
>         >
>         > Let's start with a Release build because that requires less
>         tweaking. Go
>         > to "Project --> CMake Settings". Delete the default configuration
>         > ("x64-Debug (default)").
>         >
>         > ?
>         >
>         > Add a new "x64-Release" configuration and set "Configuration
>         type" to
>         > "Release". Save the CMakeSettings.json file, which will start
>         a new
>         > CMake generation. "FIND_FLEX" will fail, so you need to set the
>         > "FLEX_EXECUTABLE" path manually in section "CMake variables
>         and cache".
>         > Browse to your win_flex.exe file. Additionally, disable
>         "WITH_BINDINGS"
>         > and "WITH_QGIS_PROCESS". Save the file. Next set
>         "BISON_EXECUTABLE" to
>         > your win_bison.exe file and save again. Disable
>         "WITH_QTWEBKIT" and
>         > save. Set "QCA_LIBRARY" to
>         > "<vcpkg-root>\installed\x64-windows\lib\qca.lib" and save.
>         Configuration
>         > should now succeed, but you have to change "GEOS_LIBRARY" from
>         > "geos.lib" to "geos_c.lib". Save and start the build after CMake
>         > generation has finished.
>         >
>         > ?
>         >
>         > Select "qgis.exe (output\bin\qgis.exe)" as start-up item in
>         the toolbar
>         > and start QGIS.
>         >
>         > ?
>         >
>         > Now let's do the same for a Debug build. Add a "x64-Debug"
>         configuration
>         > and save. Change to the "x64-Debug" configuration in the
>         toolbar. Repeat
>         > the steps from above (set flex and bison paths etc.). When
>         selecting
>         > libraries, take the libraries from
>         > "<vcpkg-root>\installed\x64-windows\debug\lib". Most libraries
>         will have
>         > a "d" or "_d" as name suffix. The CMake generation will not always
>         > select the debug versions of libraries. Hence, go over the CMake
>         > variables and change release library paths to debug library
>         paths, e.g.
>         > "<vcpkg-root>\installed\x64-windows\debug\lib\geos_cd.lib" for
>         > GEOS_LIBRARY. I'll append my CMakeSettings.json file as
>         reference to
>         > this mail. Save again and start the build.
>         >
>         > ?
>         >
>         > The build will fail because the execution of crssync.exe
>         fails. That's
>         > because crssync.exe tries to load zstd.dll instead of zstdd.dll. I
>         > haven't figured out why, yet. An easy workaround is copying
>         zstdd.dll to
>         > zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart
>         the build
>         > and it should succeed.
>         >
>         > ?
>         >
>         > You should then be able to start and debug qgis.exe and its
>         > dependencies. Note that some vcpkg portfiles forget to copy
>         over the
>         > .pdb files. For example, proj is affected. If you find such a
>         library
>         > with a missing .pdb file, check whether the portfile (e.g.
>         > "<vcpkg-root>\ports\proj4\portfile.cmake") contains the
>         > "vcpkg_copy_pdbs()" call. If not, just add it at the end,
>         re-install the
>         > dependency and copy over the .pdb file to the QGIS output
>         directory.
>         >
>         > ?
>         >
>         > I'm currently trying to get QGIS working with Python bindings.
>         I got the
>         > build working, however I'm struggling with the debug build
>         execution.
>         > The debug Python library seems to be unable to load the
>         Release build Qt
>         > libraries that come with PyQt5. Well, I'll keep trying and if
>         I succeed,
>         > I'll update the instructions.
>         >
>         > ?
>         >
>         > Here is my CMakeSettings.json file for reference:
>         >
>         > ?
>         >
>         > {
>         >
>         > ? "configurations": [
>         >
>         > ??? {
>         >
>         > ????? "name": "x64-Release",
>         >
>         > ????? "generator": "Ninja",
>         >
>         > ????? "configurationType": "Release",
>         >
>         > ????? "buildRoot": "${projectDir}\\out\\build\\${name}",
>         >
>         > ????? "installRoot": "${projectDir}\\out\\install\\${name}",
>         >
>         > ????? "cmakeCommandArgs": "",
>         >
>         > ????? "buildCommandArgs": "",
>         >
>         > ????? "ctestCommandArgs": "",
>         >
>         > ????? "inheritEnvironments": [ "msvc_x64_x64" ],
>         >
>         > ????? "variables": [
>         >
>         > ??????? {
>         >
>         > ????????? "name": "WITH_BINDINGS",
>         >
>         > ????????? "value": "False",
>         >
>         > ????????? "type": "BOOL"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "WITH_QGIS_PROCESS",
>         >
>         > ????????? "value": "False",
>         >
>         > ????????? "type": "BOOL"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "FLEX_EXECUTABLE",
>         >
>         > ????????? "value": "C:/src/tools/win_flex.exe",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "BISON_EXECUTABLE",
>         >
>         > ????????? "value": "C:/src/tools/win_bison.exe",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "WITH_QTWEBKIT",
>         >
>         > ????????? "value": "False",
>         >
>         > ????????? "type": "BOOL"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "QCA_LIBRARY",
>         >
>         > ????????? "value":
>         "C:/src/vcpkg/installed/x64-windows/lib/qca.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "GEOS_LIBRARY",
>         >
>         > ????????? "value":
>         "C:/src/vcpkg/installed/x64-windows/lib/geos_c.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ? ??????}
>         >
>         > ????? ]
>         >
>         > ??? },
>         >
>         > ??? {
>         >
>         > ????? "name": "x64-Debug",
>         >
>         > ????? "generator": "Ninja",
>         >
>         > ????? "configurationType": "Debug",
>         >
>         > ????? "buildRoot": "${projectDir}\\out\\build\\${name}",
>         >
>         > ????? "installRoot": "${projectDir}\\out\\install\\${name}",
>         >
>         > ????? "cmakeCommandArgs": "",
>         >
>         > ????? "buildCommandArgs": "",
>         >
>         > ????? "ctestCommandArgs": "",
>         >
>         > ????? "inheritEnvironments": [ "msvc_x64_x64" ],
>         >
>         > ????? "variables": [
>         >
>         > ??????? {
>         >
>         > ????????? "name": "FLEX_EXECUTABLE",
>         >
>         > ????????? "value": "C:/src/tools/win_flex.exe",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "BISON_EXECUTABLE",
>         >
>         > ????????? "value": "C:/src/tools/win_bison.exe",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "WITH_QTWEBKIT",
>         >
>         > ????????? "value": "False",
>         >
>         > ????????? "type": "BOOL"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "WITH_BINDINGS",
>         >
>         > ????????? "value": "False",
>         >
>         > ????????? "type": "BOOL"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "WITH_QGIS_PROCESS",
>         >
>         > ????????? "value": "False",
>         >
>         > ????? ????"type": "BOOL"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "QCA_LIBRARY",
>         >
>         > ????????? "value":
>         "C:/src/vcpkg/installed/x64-windows/debug/lib/qcad.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "GEOS_LIBRARY",
>         >
>         > ????????? "value":
>         > "C:/src/vcpkg/installed/x64-windows/debug/lib/geos_cd.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "GSL_LIB",
>         >
>         > ????????? "value":
>         "C:/src/vcpkg/installed/x64-windows/debug/lib/gsld.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "GSLCBLAS_LIB",
>         >
>         > ????????? "value":
>         > "C:/src/vcpkg/installed/x64-windows/debug/lib/gslcblasd.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "PROJ_LIBRARY",
>         >
>         > ????????? "value":
>         > "C:/src/vcpkg/installed/x64-windows/debug/lib/proj_d.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "QSCINTILLA_LIBRARY",
>         >
>         > ????????? "value":
>         >
>         "C:/src/vcpkg/installed/x64-windows/debug/lib/qscintilla2_qt5d.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "QTKEYCHAIN_LIBRARY",
>         >
>         > ????????? "value":
>         > "C:/src/vcpkg/installed/x64-windows/debug/lib/qt5keychaind.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "QWT_LIBRARY",
>         >
>         > ????????? "value":
>         "C:/src/vcpkg/installed/x64-windows/debug/lib/qwtd.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? },
>         >
>         > ??????? {
>         >
>         > ????????? "name": "SPATIALINDEX_LIBRARY",
>         >
>         > ????????? "value":
>         >
>         "C:/src/vcpkg/installed/x64-windows/debug/lib/spatialindex-64d.lib",
>         >
>         > ????????? "type": "FILEPATH"
>         >
>         > ??????? }
>         >
>         > ????? ]
>         >
>         > ??? }
>         >
>         > ? ]
>         >
>         > }
>         >
>         > ?
>         >
>         > ?
>         >
>         > ?
>         >
>         > ?
>         >
>         > *From:*i-s-o <46.i.s.o.64 at gmail.com
>         <mailto:46.i.s.o.64 at gmail.com>>
>         > *Sent:* Saturday, January 30, 2021 5:58 PM
>         > *To:* Uhrig, Stefan <stefan.uhrig at sap.com
>         <mailto:stefan.uhrig at sap.com>>
>         > *Cc:* qgis-developer <QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>>
>         > *Subject:* Re: [QGIS-Developer] Building QGIS with Visual
>         Studio 2019 CE
>         > and vcpkg
>         >
>         > ?
>         >
>         > I am very interested in trying out your solution. Could you
>         share the
>         > required steps?
>         >
>         > ?
>         >
>         > Thx.
>         >
>         > ?
>         >
>         > On Fri, Jan 29, 2021, 09:25 Uhrig, Stefan
>         <stefan.uhrig at sap.com <mailto:stefan.uhrig at sap.com>
>         > <mailto:stefan.uhrig at sap.com <mailto:stefan.uhrig at sap.com>>>
>         wrote:
>         >
>         >? ? ?TL;DR: It is currently possible to build the QGIS core app
>         with
>         >? ? ?Visual Studio 2019 and vcpkg, which makes debugging QGIS
>         >? ? ?dependencies easy.
>         >
>         >? ? ??
>         >
>         >? ? ??
>         >
>         >? ? ?Hi all,
>         >
>         >? ? ??
>         >
>         >? ? ?Some time ago I discovered vcpkg
>         >? ? ?(https://github.com/microsoft/vcpkg). vcpkg is a package
>         manager
>         >? ? ?that downloads package source code to your local machine
>         and builds
>         >? ? ?the package locally. Recently, I discovered that vcpkg
>         should be
>         >? ? ?able to provide all dependencies to build at least the
>         QGIS core
>         >? ? ?application. Hence, I gave it a try.
>         >
>         >? ? ??
>         >
>         >? ? ?Basically, it worked out of the box. I started with a
>         fresh Windows
>         >? ? ?10 installation, installed Visual Studio 2019 Community
>         Edition,
>         >? ? ?Git, vcpkg, Python 3 and flex and bison for Windows. I
>         fetched all
>         >? ? ?other dependencies via vcpkg. It was not necessary to even
>         touch a
>         >? ? ?single file in the repository. I could just open the main
>         >? ? ?CMakeLists.txt file in Visual Studio and only had to tweak
>         the CMake
>         >? ? ?cache (the CMake find macros that come with QGIS are not
>         aware of
>         >? ? ?vcpkg, so I had to set some paths manually). I had to
>         switch off
>         >? ? ?some extensions though as the required dependencies were not
>         >? ? ?available via vcpkg (WITH_BINDINGS, WITH_QGIS_PROCESS,
>         >? ? ?WITH_QTWEBKIT). The build did not report any errors, I
>         could start
>         >? ? ?the application and it seems to work, but I did some light
>         testing only.
>         >
>         >? ? ??
>         >
>         >? ? ?I mainly tried it because I enjoy debugging with Visual
>         Studio more
>         >? ? ?than with gdb (or gdb wrapped in some IDE). In my
>         experience, the
>         >? ? ?performance of the Visual Studio debugger is better and it
>         is more
>         >? ? ?stable, especially in long debug sessions.
>         >
>         >? ? ??
>         >
>         >? ? ?I don?t want to promote official building support of QGIS with
>         >? ? ?vcpkg. Providing the dependencies via OSGeo4W is much more
>         reliable.
>         >? ? ?However, if you don?t mind the experimental nature of this
>         setup and
>         >? ? ?you want to be able to debug into QGIS? dependencies, you
>         might give
>         >? ? ?it a try. Especially, if you want to track the cause of a
>         crash in
>         >? ? ?one of QGIS? dependencies, this setup might be helpful.
>         You have the
>         >? ? ?source code and debug versions of the dependencies, so the
>         debugger
>         >? ? ?will jump to the crashing code line and you can inspect
>         all the
>         >? ? ?variables of the dependency.
>         >
>         >? ? ??
>         >
>         >? ? ?If someone is interested in trying it, give me a note. I
>         can then
>         >? ? ?assemble detailed instructions on how to make it work. It
>         took me a
>         >? ? ?while to figure out which packages are needed and how the
>         CMake
>         >? ? ?cache needs to be tweaked.
>         >
>         >? ? ??
>         >
>         >? ? ?Best regards,
>         >
>         >? ? ?Stefan
>         >
>         >? ? ??
>         >
>         >? ? ??
>         >
>         >? ? ??
>         >
>         >? ? ?_______________________________________________
>         >? ? ?QGIS-Developer mailing list
>         >? ? ?QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         <mailto:QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>>
>         >? ? ?List info:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         >? ? ?Unsubscribe:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         >
>         >
>         > _______________________________________________
>         > QGIS-Developer mailing list
>         > QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         > Unsubscribe:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         >
> 
>         J. Gustavo
>         -- 
>         Jorge Gustavo Rocha
>         Departamento de Inform?tica
>         Universidade do Minho
>         4710-057 Braga
>         Gabinete 3.29 (Piso 3)
>         Tel: +351 253604480
>         Fax: +351 253604471
>         M?vel: +351 910333888
>         skype: nabocudnosor
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor

From bnhr.xyz at gmail.com  Tue Feb 16 10:40:33 2021
From: bnhr.xyz at gmail.com (Ben Hur Pintor)
Date: Wed, 17 Feb 2021 02:40:33 +0800
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <1613438134893-0.post@n6.nabble.com>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
 <1613438134893-0.post@n6.nabble.com>
Message-ID: <CAPTobbBRbTopLDLkt6q6786OqQhT10MQaHMXOFW_mT=-X0F_NQ@mail.gmail.com>

Hi Martin,

I would like to help you with this in case you need it. I'm fairly
comfortable with both QGIS' capabilities and working with Markdown. Do let
me know how I can help and how we can collaborate.

Thanks!

All the best,
Ben Hur
---
*Ben Hur S. Pintor | BNHR <https://bnhr.xyz>*
bnhr.xyz
hi at bnhr.xyz






On Tue, Feb 16, 2021 at 9:15 AM Martin Pergler <pergler at gmail.com> wrote:

> Happy to take this on (next week, this week is a bit crazy).
> I like all 3 examples given: key thing being leading off much more with an
> easy-to-understand, illustrated list of main functionality and use cases.
>
> By way of introduction, 30 years ago I was a software developer, back when
> Pascal and C (++ was cutting edge!) were mainstream and Prolog was sexy (at
> least for geeks, that is). I then became a mathematician for a while,
> before
> going into business consulting. I've done a fair amount of technical
> writing
> and ran an editorial board for a while. My day job is now risk consulting,
> including probabilistic modeling, Excel/VBA, and R. On the side I help
> manage and preserve a decent chunk of Canadian wilderness, through which in
> the past couple of years I've become more and more involved in GIS. First,
> just making a map of the darned thing, but more recently vegetation and
> land-use analysis, indexing of research notes and wildlife photos,
> automation so others can use it, and even more recently UAV 2.5D mapping.
> I'm also a frequent contributor (Q and A) at gis.stackexchange.com
>
> Happy also to work on this 4 (or more) hands if anyone else wants to help
> out. Otherwise, I'll sit back this week and accept with gratitude any
> additional suggestions of what to cover or how. I'll then come back with a
> 1st (but doubtlessly incomplete) draft next week.
>
> Martin Pergler
>
>
>
>
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210217/d02b5c17/attachment.html>

From =?utf-8?q?jrmorreale=5Fml at enoreth.net?=  Wed Feb 17 00:47:16 2021
From: =?utf-8?q?jrmorreale=5Fml at enoreth.net?= (=?utf-8?q?jrmorreale=5Fml at enoreth.net?=)
Date: Wed, 17 Feb 2021 09:47:16 +0100
Subject: [QGIS-Developer] Point cloud support and Windows build availability
Message-ID: <6aea-602cd800-2f-440dd200@194228032>

Hi,

With the upcoming release of QGIS 3.18 with its point cloud support, is there an available windows snapshot build to start testing ?

I've tried a MXE artifact and the new "testing" osgeo4w installer but I have not been able to successfully connect to an existing EPT dataset.

Regards,
Jean-Roc


From saber.razmjooei at lutraconsulting.co.uk  Wed Feb 17 01:08:43 2021
From: saber.razmjooei at lutraconsulting.co.uk (Saber Razmjooei)
Date: Wed, 17 Feb 2021 09:08:43 +0000
Subject: [QGIS-Developer] Point cloud support and Windows build
 availability
In-Reply-To: <6aea-602cd800-2f-440dd200@194228032>
References: <6aea-602cd800-2f-440dd200@194228032>
Message-ID: <CAH=WbRCj7yeqkcSDG7aB9DxxGhKwYTDkXRGJaiRJ03qPFGWGSA@mail.gmail.com>

Hi Jean-Roc,

You can follow the instructions here to download and install the OSGeo4W
testing package:
https://www.lutraconsulting.co.uk/blog/2021/02/15/qgis-point-cloud-windows/

Notes: if you already have OSGeo4W as your QGIS installer, please use
different directories for temp download and installation paths. Otherwise,
it will clash with your existing installation.

Kind regards
Saber


On Wed, 17 Feb 2021 at 08:53, jrmorreale_ml at enoreth.net <
jrmorreale_ml at enoreth.net> wrote:

> Hi,
>
> With the upcoming release of QGIS 3.18 with its point cloud support, is
> there an available windows snapshot build to start testing ?
>
> I've tried a MXE artifact and the new "testing" osgeo4w installer but I
> have not been able to successfully connect to an existing EPT dataset.
>
> Regards,
> Jean-Roc
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Saber Razmjooei
www.lutraconsulting.co.uk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210217/8cc95d4d/attachment.html>

From tschmetzer at gmx.de  Wed Feb 17 11:52:23 2021
From: tschmetzer at gmx.de (Tobias Schmetzer)
Date: Wed, 17 Feb 2021 20:52:23 +0100
Subject: [QGIS-Developer] Usability initiative/offensive for QGIS 4.0
Message-ID: <trinity-022eb403-c47a-4126-8bd1-f0e0e79699fe-1613591543801@3c-app-gmx-bap58>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210217/f956790d/attachment.html>

From jgr at di.uminho.pt  Wed Feb 17 13:54:00 2021
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Wed, 17 Feb 2021 21:54:00 +0000
Subject: [QGIS-Developer] Usability initiative/offensive for QGIS 4.0
In-Reply-To: <trinity-022eb403-c47a-4126-8bd1-f0e0e79699fe-1613591543801@3c-app-gmx-bap58>
References: <trinity-022eb403-c47a-4126-8bd1-f0e0e79699fe-1613591543801@3c-app-gmx-bap58>
Message-ID: <342fda90-6081-d75a-56b5-dfa02e80b650@di.uminho.pt>

Hi Tobias,

Thank you for your detailed comments about usability. It really helps to
have someone collecting all these issues and pushing forward to have
this issues discussed and implemented.

I think the best place to start it to write a QEP [1], since there are
so many issues in your proposal. Each QEP is in fact an issue in the QEP
repository. It is the right place to discuss improvements before any
coding.

Other users and developers can add comments to your proposal. At the
end, it will be easier to evaluate the impact of those changes and to
define a roadmap for such improvements.

The discussion might take some time, but a better discussion makes the
development easier. People from the documentation team are also
important to the discussion. They are used to explain how things work in
QGIS interface.

If you can, try to create markdown sections for these issues in the QEP:
some are related to "Editing geometries", other are related to "Field
calculator", etc. It would be fantastic if you can add some print
screens also (but those can be added later, when discussing each issue).

Let's see what other developers can add. This is just my own opinion.

Regards,

Jorge Gustavo

[1] https://github.com/qgis/QGIS-Enhancement-Proposals

?s 19:52 de 17/02/21, Tobias Schmetzer escreveu:
> Dear developers:
> 
> The following issues and ideas came up when I recently worked on a lots
> of data and I imagine many users may have the same or similar issues.
> The QGIS software is used by many experts in various fields by peoploe
> working mostly on important infrastructural projects and fields of
> public interest like hydrology, (sustainable) agriculture, urban
> planning and many more. Besides reflecting in a growing number of
> software development experts the success of QGIS can also show in
> winning a large group of GIS users. Satisfied users include the ability
> to easily and quickly handle the software which means the usability of
> QGIS is essential. As far as I know QGIS has been evolving for a couple
> of years. Using QGIS mainly as a user and for scripts I personally was
> confronted with a couple of minor but yet annoying obstacles which led
> to the ideas further below that crossed my mind. Realizing the size of
> the collection led to now wanting to suggest and initiate a usability
> offensive for the upcoming versions. Perhaps it could also be a
> motivational goal to be completed before the next major release 4.0 or 4.1?
> Returning to the notion of the offensive: I think especially QGIS core
> functions should be very well thought of and offer a high degree in
> usablilty. Many of my ideas focus especially but not exclusively on an
> easier and quicker use of frequently used functions like feature
> attribute editing, filling in data and the attribute table dialog but
> there are also other topics for improval like easier and quicker ways to
> edit geometries/features when entering specific attribute values. Where
> some functionalities are already in place so that I as a user was just
> not aware of them it might be worth thinking about how that availability
> could better be communicated to the user. (This is not meant as a
> defense why I haven't consulted related tutorials but to seek and
> collect intuitive usability improvements)
> 
> The initiative could be started with the below bunch of topics/tickets
> to discuss the ideas and when agreed label them with the key words
> "Usability offensive" and "GUI/UX". Apart from contributing the below
> ideas my suggestion would be to ask users in the users mailing list (or
> even in an official call on the web page and in the welcome message) for
> their most important issues they repeatingly stumble upon when
> performing their daily work. They could then also label their
> ideas/requests with the before mentioned key words.
> Also I was wondering whether the development team has ever thought of
> collecting statistics about user behaviour in order to detect most
> frequently used actions and functions in order to be able to improve
> these these.
> I am looking forward to your thoughts on my initiative.
> ?
> Kind regards, Tobias
> ?
> --------
> ?
> My idea is to create a ticket as a feature request with the label
> "Usability offensive" and "GUI/UX" for every hyphen. Unfortunately I
> don't have the permission to set labels.
> ?
> - Usability improvement: Always show number of currently marked objects
> in status bar at the bottom. Background: When the map is moved or other
> actions are performed the user doesn't know how many features are
> currently already selected (https://github.com/qgis/QGIS/issues/41618)
> ?
> - Usability improvement: Additional button in advanced digitizing
> toolbar: Move part of a polygon. The functionality of moving the part of
> a polygon is missing. Currently only whole Polygons can be moved using
> the "Move" tool, parts can be added or deleted using their respecive
> tool or single lines/points can be moved using the "vertex tool" yet
> parts cannot be moved. (https://github.com/qgis/QGIS/issues/41619)
> 
> - Usability improvement: Improve vertex tool: make adding vertex nodes
> to an existing geometry easier. Currently the user needs to look for the
> middle of a segment, navigate there, hit the x and then move the line.
> It would be beneficial to have an alternative and quicker way of
> inserting vertices. Background: Especially when the user has a lot of
> vertices to move it's tiring and costs a lot of time to do it this way
> Suggestion: Yet there is a double-click option that adds vertices I can
> think of a quicker and more efficient way to add new vertices as the
> mouse needs to be very close to a line. Three ideas:
> ? * What about entering a quick edit mode as soon as a line is selected
> by a right click so that then a double click (or even a one-click if
> that doesn't break a consistency rule) wherever on the canvas (except
> for being close to an existing point or a line that is to move via
> one-click) would be favourable. Or in other words: As soon as the
> (previously selected) line is unambigously known a double click (or even
> one click - depending on a consistency discussion) can easily create a
> new vertex point.
> ? * What about an additional button for adding new vertices by click
> (creates new vertex), hold (drag), move and let go at the new vertex
> position (mouse button release)? That would mean only one click for
> adding a vertex in contrast to 3 clicks for the current solution (double
> click for activation, drag and one click for fixing the new vertex
> position).
> ? * Suggestion: in combination with a key like e.g. the ctrl key or as a
> sub-item of the vertex tool to create an to insert a new vertex as soon
> as the user gets close to the line.
> ? Also: I couldn't find a way to delete vertices. If that doesn't exist
> that would also be an important thing to have.
> (https://github.com/qgis/QGIS/issues/41620)
> ?
> - Usability improvement: Multipolygon vertex table: make
> affiliation/membership of points and of polygon contained in a
> Multipolygon transparent to the user. Based on the table it is barely
> not determinable what points belong to what polygon and how many
> polygons there are. Currently the multipolygon has only a "flattened"
> representation in the user interface. The current representation does
> not support a python script writer looking for understanding his data.
> (https://github.com/qgis/QGIS/issues/41621)
> ?
> - Usability improvement: Select features in freehand mode, polygon mode
> or radius mode: Currently the user needs to click twice when graphically
> selecting features. This doesn't seem much of a diffence yet for dozens,
> hundrets or even thousend objects it is very frustrating. Suggestion:
> Start drawing the selection area when mouse button is hold/pressed and
> select when mouse button is released -> Advantage: The user can select
> single/individual objects by clicking only once instead of twice. If the
> current selection method should be kept the new suggestion could be
> implemented as an additional option when pressing a key before selecting
> or something similar
> (https://github.com/qgis/QGIS/issues/41622)
> ?
> - Usability improvement: Add functionality of double clicking with any
> selection tool or the "Identify Features" tool on a single geometry for
> selecting it (toggle between adding/revoking the selection)
> (https://github.com/qgis/QGIS/issues/41623)
> 
> - Usability improvement: Instant/direct edit of identified results in
> the "Identify Results" panel when layer is in edit mode. At least when
> double clicking on a feature attribute value, even better when single
> clicking on an entry in the "Identify Results" table
> (https://github.com/qgis/QGIS/issues/41624)
> 
> - Usability improvement: Integrate the "organize columns" button into
> "Identify Features" and "Multiple Edit" to facilitate the choosing of
> fields. The chosen attributes for this layer shall be saved and used in
> all later attribute tables, identify results tables and multiple edit
> tables until redefined (https://github.com/qgis/QGIS/issues/41625)
> 
> - Usability improvement: Integrate a quick switch/filter button to
> either show only CHOSEN FIELDS or ALL fields. The chosen option for this
> layer shall be saved and used in all later attribute tables, identify
> results tables and multiple edit tables until redefined.
> (https://github.com/qgis/QGIS/issues/41626)
> 
> - Usability improvement: Show/edit only specified/filtered attribute and
> not all when identifying and editing results. Description: When
> identifying and editing these results the whole list of attributes is
> shown. The list may contain many attributes and when the user needs to
> edit only one attribute which is situated and shown at the end of the
> attribute list the user needs to scroll down and find that one attribute
> for every object. Doing this for many objects is very painful.
> Suggestion: Make the fields to be displayed in "Identify Results"
> panel/table adjustable, similarly to the "Organize Columns" dialog that
> is accessable in the attribute table.
> (https://github.com/qgis/QGIS/issues/41627)
> 
> - Usability improvement: Offer the "multiple feature edit" in the
> context menu when right clicking on graphically selected features in map
> canvas: consider "chosen"/filtered fields/attributes that had been
> selected via "organize columns" dialog
> (https://github.com/qgis/QGIS/issues/41628)
> 
> - Usability improvement: Quick click to graphically deselect all (e.g. 3
> times click or right click) (https://github.com/qgis/QGIS/issues/41629)
> 
> - Quickly access the attribute table by double click: e.g. when clicking
> on the layer's name. When clicking on the layer symbol, open layer
> property dialog. ?
> ? I know there's already an option to choose between the properties
> dialog or table view. If my suggestion doesn't make this option
> unnecessary we could add a third "split" option with a location
> dependant functionality (which I personally would then opt as the
> default) (https://github.com/qgis/QGIS/issues/41630)
> 
> - Usability improvement: Double clicking on a layer selection box should
> not trigger the opening of the layer's properties as selecting and
> deselecting a layer too quickly brings shouldn't bring up a dialog.
> (https://github.com/qgis/QGIS/issues/41631)
> 
> - Rename tool tip description "Modify the Attributes of all selected
> features simultaneously". Suggestion to rename it to "Multiple Feature
> Edit" (preferred due to being short and hopefully self-explanatory
> enough, yet not sure if clear to all users) or "Modify several
> attributes of selected features at once" (very long). Any other ideas
> for a better wording? By the way I personally would rather opt for a
> longer wording in the top area of the dialog itself rather than in a
> tiny tool tip button. (https://github.com/qgis/QGIS/issues/41632)
> 
> - Usability improvement: Add functionality to the layer context menu in
> "Layers" panel: Flash all features, flash selected features
> (https://github.com/qgis/QGIS/issues/41633)
> -In Feature Attribute Table view: Various view related action symbols
> like the Filter Form, Organize Columns, Show only specific Features
> (selected, visible on map, Edited and New) as well as the Switch for
> Form and Table view are scattered among the upper and lower margin what
> makes is hard for me to orientate. Any opinion about grouping all view
> related properties and buttons at the top right: What features to show
> (selected/all/visible on map/...), form view/table view, what columns to
> show. I'd suggest to leave only one logic fnctionality at the bottom
> such as instant field filtering.
> I also generally noted that there are multiple ways of filtering. On one
> side that offers many possibilities and provides freedom whereas on the
> other hand the many options may confuse users and may create an
> overloaded picture. Any more positive ideas that could help clearing up
> the many filtering options picture in the attributes dialog?
> (https://github.com/qgis/QGIS/issues/41634)
> 
> - Confusing: Create a new field in the field calculator dialog without
> being in edit mode on the layer and? even if the user cannot create a
> new field
> ???? -> suggestion to remove this function from the field calculator
> dialog and have only the option to create virtual fields as a remaining
> option (https://github.com/qgis/QGIS/issues/41635)
> 
> - Improve Layer Styling: Facilitate multiple labels with different
> colors in addition to "no labels", "single labels", "rule-based
> labeling" and "Blocking". In the first run the function should
> facilitate to chose multiple attributes with different font colors and
> font styling. A later option could to enable the user to determine the
> label arrangement horizontally and vertically. (functionality considered
> as inferior priority) (https://github.com/qgis/QGIS/issues/41636)
> ?
> - Add functionality to the layer context menu in "Layers" panel: Add a
> feature related context menu to the categorized symbols/items/features
> in a layer, that enables the user to "Zoom to features", "Zoom to
> selection", "Flash all features", "Flash selected features"
> (functionality considered as inferior priority)
> (https://github.com/qgis/QGIS/issues/41637)
> 
> - Create a "Selected Features panel", meaning to provide a panel similar
> to "Identify results" with the functionality of the "Multiple feature
> dialog". Important note: In needs to be easily distinguishable by its
> looks from the identify results
> (functionality considered as inferior priority)
> (https://github.com/qgis/QGIS/issues/41638)
> ?
> - User may be confused about selected objects that cannot be modified:
> Maybe change selection color of objects when Layer of selected features
> is editable?
> (functionality considered as inferior priority)
> (https://github.com/qgis/QGIS/issues/41639)
> 
> - ability to open the raster georeferencer and read recently
> georeferenced raster map from layer context menu
> (https://github.com/qgis/QGIS/issues/41640)
> ?
> ?
> ?
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor

From rdmailings at duif.net  Thu Feb 18 06:10:05 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 18 Feb 2021 15:10:05 +0100
Subject: [QGIS-Developer] Visual Changelog 3.18, add some love to some items?
Message-ID: <203ed598-0917-5685-8586-79714058fff4@duif.net>

I was testing the inclusion of the rst in the website of

http://localhost/qgis/en/site/forusers/visualchangelog318/index.html

Most items are nice already, but... some items are a little dull... anybody willing to look into his/her or other dull 'features', and add some 'love'?

Regards,

Richard Duivenvoorde



From tim at kartoza.com  Thu Feb 18 07:51:22 2021
From: tim at kartoza.com (Tim Sutton)
Date: Thu, 18 Feb 2021 15:51:22 +0000
Subject: [QGIS-Developer] [Qgis-community-team] Visual Changelog 3.18,
 add some love to some items?
In-Reply-To: <203ed598-0917-5685-8586-79714058fff4@duif.net>
References: <203ed598-0917-5685-8586-79714058fff4@duif.net>
Message-ID: <CAES-DZTrxLPSZmv=aKU1h-rjD=uzi=02EvhQ9s3L6t=x66iBRA@mail.gmail.com>

Hi Richard

Your link points to your localhost - maybe you want to share a public link?

Regards

Tim

On Thu, Feb 18, 2021 at 2:10 PM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> I was testing the inclusion of the rst in the website of
>
> http://localhost/qgis/en/site/forusers/visualchangelog318/index.html
>
> Most items are nice already, but... some items are a little dull...
> anybody willing to look into his/her or other dull 'features', and add some
> 'love'?
>
> Regards,
>
> Richard Duivenvoorde
>
>
> _______________________________________________
> Qgis-community-team mailing list for organizing community resources such
> as documentation, translation etc..
> Qgis-community-team at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-community-team
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210218/fc5335ce/attachment.html>

From tschmetzer at gmx.de  Thu Feb 18 11:12:43 2021
From: tschmetzer at gmx.de (Tobias Schmetzer)
Date: Thu, 18 Feb 2021 20:12:43 +0100
Subject: [QGIS-Developer] Usability initiative/offensive for QGIS 4.0
In-Reply-To: <342fda90-6081-d75a-56b5-dfa02e80b650@di.uminho.pt>
References: <trinity-022eb403-c47a-4126-8bd1-f0e0e79699fe-1613591543801@3c-app-gmx-bap58>
 <342fda90-6081-d75a-56b5-dfa02e80b650@di.uminho.pt>
Message-ID: <trinity-d3683132-05d4-4bb7-9dbf-16b5e772eb6d-1613675563339@3c-app-gmx-bs73>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210218/3b74cfc5/attachment-0001.html>

From a.neumann at carto.net  Thu Feb 18 11:36:38 2021
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 18 Feb 2021 20:36:38 +0100
Subject: [QGIS-Developer] Usability initiative/offensive for QGIS 4.0
In-Reply-To: <trinity-d3683132-05d4-4bb7-9dbf-16b5e772eb6d-1613675563339@3c-app-gmx-bs73>
References: <trinity-022eb403-c47a-4126-8bd1-f0e0e79699fe-1613591543801@3c-app-gmx-bap58>
 <342fda90-6081-d75a-56b5-dfa02e80b650@di.uminho.pt>
 <trinity-d3683132-05d4-4bb7-9dbf-16b5e772eb6d-1613675563339@3c-app-gmx-bs73>
Message-ID: <3e3ab68cde451203135886ec8508c799@carto.net>

Hi Tobias,

I general, tickets are welcome - but: as Nyall pointed in one comment, 
opening a ticket doesn't ensure that your issue is addressed. You need 
to find a developer to work on it (voluntary or funded) or fix it 
yourself. We don't have a general budget for fixing issues like this - 
and UI stuff is also a bottomless pit. It never ends, and often it is 
controversial.

About QEP: from you list I recommend that at least everything related to 
digitizing and vertex editing should go into a QEP for further 
discussion. And as I stated, substantial changes in digitizing / vertex 
editing best wait for QGIS 4.x. If we constantly change the digitizing 
and vertex editing tools we would really annoy our users and 
documenters. QGIS has at least hundreds of thousands of users, if not > 
1 million. We need to be careful with such changes, even if this means 
having a sub-optimal solution for quite a while.

Fixing small things, like a tooltip or label of course doesn't need a 
QEP or long discussion and can be fixed immediately.

The situation is different with real bugs that cause data corruption and 
crashes. Those are fixed on our general budget or through support 
contracts with companies.

Greetings and thanks for your reports,

Andreas

On 2021-02-18 20:12, Tobias Schmetzer wrote:

> Hello Jorge,
> 
> thank you for the suggestion to write a QEP. I understand a QEP is 
> intended for a larger change like my whole proposal. For many of my 
> ideas and suggestions open-minded discussions have already started 
> within the issues.
> I would suggest to wait for their outcome. Perhaps the ones considered 
> as reasonable could then be embraced in a QEP. I don't know who decides 
> or how we could decide what feature requests should eventually be 
> contained in that QEP package. But maybe let's first focus on 
> discussing the issues I suggested content wise and when finished 
> discuss how to handle and address the outcome. Any opinions or 
> suggestions?
> 
> If it is desired to receive more ideas from users we should think how 
> to approach it. Many users for example may not be experienced using a 
> ticket system and I guess we don't want to collect multiple times the 
> same ideas in tickets. I don't know what the sentiments are? 
> Unfortunately I won't have the time to organize this but that would 
> probably be something where committed non-developers could also assist 
> and contribute.
> 
> So far my thoughts. Regarding the issues I created I will try to 
> comment soon.
> 
> Regards,
> Tobias
> 
> Gesendet: Mittwoch, 17. Februar 2021 um 22:54 Uhr
> Von: "Jorge Gustavo Rocha" <jgr at di.uminho.pt>
> An: qgis-developer at lists.osgeo.org
> Betreff: Re: [QGIS-Developer] Usability initiative/offensive for QGIS 
> 4.0
> Hi Tobias,
> 
> Thank you for your detailed comments about usability. It really helps 
> to
> have someone collecting all these issues and pushing forward to have
> this issues discussed and implemented.
> 
> I think the best place to start it to write a QEP [1], since there are
> so many issues in your proposal. Each QEP is in fact an issue in the 
> QEP
> repository. It is the right place to discuss improvements before any
> coding.
> 
> Other users and developers can add comments to your proposal. At the
> end, it will be easier to evaluate the impact of those changes and to
> define a roadmap for such improvements.
> 
> The discussion might take some time, but a better discussion makes the
> development easier. People from the documentation team are also
> important to the discussion. They are used to explain how things work 
> in
> QGIS interface.
> 
> If you can, try to create markdown sections for these issues in the 
> QEP:
> some are related to "Editing geometries", other are related to "Field
> calculator", etc. It would be fantastic if you can add some print
> screens also (but those can be added later, when discussing each 
> issue).
> 
> Let's see what other developers can add. This is just my own opinion.
> 
> Regards,
> 
> Jorge Gustavo
> 
> [1] https://github.com/qgis/QGIS-Enhancement-Proposals
> 
> ?s 19:52 de 17/02/21, Tobias Schmetzer escreveu:
>> Dear developers:
>> 
>> The following issues and ideas came up when I recently worked on a 
>> lots
>> of data and I imagine many users may have the same or similar issues.
>> The QGIS software is used by many experts in various fields by peoploe
>> working mostly on important infrastructural projects and fields of
>> public interest like hydrology, (sustainable) agriculture, urban
>> planning and many more. Besides reflecting in a growing number of
>> software development experts the success of QGIS can also show in
>> winning a large group of GIS users. Satisfied users include the 
>> ability
>> to easily and quickly handle the software which means the usability of
>> QGIS is essential. As far as I know QGIS has been evolving for a 
>> couple
>> of years. Using QGIS mainly as a user and for scripts I personally was
>> confronted with a couple of minor but yet annoying obstacles which led
>> to the ideas further below that crossed my mind. Realizing the size of
>> the collection led to now wanting to suggest and initiate a usability
>> offensive for the upcoming versions. Perhaps it could also be a
>> motivational goal to be completed before the next major release 4.0 or 
>> 4.1?
>> Returning to the notion of the offensive: I think especially QGIS core
>> functions should be very well thought of and offer a high degree in
>> usablilty. Many of my ideas focus especially but not exclusively on an
>> easier and quicker use of frequently used functions like feature
>> attribute editing, filling in data and the attribute table dialog but
>> there are also other topics for improval like easier and quicker ways 
>> to
>> edit geometries/features when entering specific attribute values. 
>> Where
>> some functionalities are already in place so that I as a user was just
>> not aware of them it might be worth thinking about how that 
>> availability
>> could better be communicated to the user. (This is not meant as a
>> defense why I haven't consulted related tutorials but to seek and
>> collect intuitive usability improvements)
>> 
>> The initiative could be started with the below bunch of topics/tickets
>> to discuss the ideas and when agreed label them with the key words
>> "Usability offensive" and "GUI/UX". Apart from contributing the below
>> ideas my suggestion would be to ask users in the users mailing list 
>> (or
>> even in an official call on the web page and in the welcome message) 
>> for
>> their most important issues they repeatingly stumble upon when
>> performing their daily work. They could then also label their
>> ideas/requests with the before mentioned key words.
>> Also I was wondering whether the development team has ever thought of
>> collecting statistics about user behaviour in order to detect most
>> frequently used actions and functions in order to be able to improve
>> these these.
>> I am looking forward to your thoughts on my initiative.
>> 
>> Kind regards, Tobias
>> 
>> --------
>> 
>> My idea is to create a ticket as a feature request with the label
>> "Usability offensive" and "GUI/UX" for every hyphen. Unfortunately I
>> don't have the permission to set labels.
>> 
>> - Usability improvement: Always show number of currently marked 
>> objects
>> in status bar at the bottom. Background: When the map is moved or 
>> other
>> actions are performed the user doesn't know how many features are
>> currently already selected (https://github.com/qgis/QGIS/issues/41618)
>> 
>> - Usability improvement: Additional button in advanced digitizing
>> toolbar: Move part of a polygon. The functionality of moving the part 
>> of
>> a polygon is missing. Currently only whole Polygons can be moved using
>> the "Move" tool, parts can be added or deleted using their respecive
>> tool or single lines/points can be moved using the "vertex tool" yet
>> parts cannot be moved. (https://github.com/qgis/QGIS/issues/41619)
>> 
>> - Usability improvement: Improve vertex tool: make adding vertex nodes
>> to an existing geometry easier. Currently the user needs to look for 
>> the
>> middle of a segment, navigate there, hit the x and then move the line.
>> It would be beneficial to have an alternative and quicker way of
>> inserting vertices. Background: Especially when the user has a lot of
>> vertices to move it's tiring and costs a lot of time to do it this way
>> Suggestion: Yet there is a double-click option that adds vertices I 
>> can
>> think of a quicker and more efficient way to add new vertices as the
>> mouse needs to be very close to a line. Three ideas:
>> * What about entering a quick edit mode as soon as a line is selected
>> by a right click so that then a double click (or even a one-click if
>> that doesn't break a consistency rule) wherever on the canvas (except
>> for being close to an existing point or a line that is to move via
>> one-click) would be favourable. Or in other words: As soon as the
>> (previously selected) line is unambigously known a double click (or 
>> even
>> one click - depending on a consistency discussion) can easily create a
>> new vertex point.
>> * What about an additional button for adding new vertices by click
>> (creates new vertex), hold (drag), move and let go at the new vertex
>> position (mouse button release)? That would mean only one click for
>> adding a vertex in contrast to 3 clicks for the current solution 
>> (double
>> click for activation, drag and one click for fixing the new vertex
>> position).
>> * Suggestion: in combination with a key like e.g. the ctrl key or as a
>> sub-item of the vertex tool to create an to insert a new vertex as 
>> soon
>> as the user gets close to the line.
>> Also: I couldn't find a way to delete vertices. If that doesn't exist
>> that would also be an important thing to have.
>> (https://github.com/qgis/QGIS/issues/41620)
>> 
>> - Usability improvement: Multipolygon vertex table: make
>> affiliation/membership of points and of polygon contained in a
>> Multipolygon transparent to the user. Based on the table it is barely
>> not determinable what points belong to what polygon and how many
>> polygons there are. Currently the multipolygon has only a "flattened"
>> representation in the user interface. The current representation does
>> not support a python script writer looking for understanding his data.
>> (https://github.com/qgis/QGIS/issues/41621)
>> 
>> - Usability improvement: Select features in freehand mode, polygon 
>> mode
>> or radius mode: Currently the user needs to click twice when 
>> graphically
>> selecting features. This doesn't seem much of a diffence yet for 
>> dozens,
>> hundrets or even thousend objects it is very frustrating. Suggestion:
>> Start drawing the selection area when mouse button is hold/pressed and
>> select when mouse button is released -> Advantage: The user can select
>> single/individual objects by clicking only once instead of twice. If 
>> the
>> current selection method should be kept the new suggestion could be
>> implemented as an additional option when pressing a key before 
>> selecting
>> or something similar
>> (https://github.com/qgis/QGIS/issues/41622)
>> 
>> - Usability improvement: Add functionality of double clicking with any
>> selection tool or the "Identify Features" tool on a single geometry 
>> for
>> selecting it (toggle between adding/revoking the selection)
>> (https://github.com/qgis/QGIS/issues/41623)
>> 
>> - Usability improvement: Instant/direct edit of identified results in
>> the "Identify Results" panel when layer is in edit mode. At least when
>> double clicking on a feature attribute value, even better when single
>> clicking on an entry in the "Identify Results" table
>> (https://github.com/qgis/QGIS/issues/41624)
>> 
>> - Usability improvement: Integrate the "organize columns" button into
>> "Identify Features" and "Multiple Edit" to facilitate the choosing of
>> fields. The chosen attributes for this layer shall be saved and used 
>> in
>> all later attribute tables, identify results tables and multiple edit
>> tables until redefined (https://github.com/qgis/QGIS/issues/41625)
>> 
>> - Usability improvement: Integrate a quick switch/filter button to
>> either show only CHOSEN FIELDS or ALL fields. The chosen option for 
>> this
>> layer shall be saved and used in all later attribute tables, identify
>> results tables and multiple edit tables until redefined.
>> (https://github.com/qgis/QGIS/issues/41626)
>> 
>> - Usability improvement: Show/edit only specified/filtered attribute 
>> and
>> not all when identifying and editing results. Description: When
>> identifying and editing these results the whole list of attributes is
>> shown. The list may contain many attributes and when the user needs to
>> edit only one attribute which is situated and shown at the end of the
>> attribute list the user needs to scroll down and find that one 
>> attribute
>> for every object. Doing this for many objects is very painful.
>> Suggestion: Make the fields to be displayed in "Identify Results"
>> panel/table adjustable, similarly to the "Organize Columns" dialog 
>> that
>> is accessable in the attribute table.
>> (https://github.com/qgis/QGIS/issues/41627)
>> 
>> - Usability improvement: Offer the "multiple feature edit" in the
>> context menu when right clicking on graphically selected features in 
>> map
>> canvas: consider "chosen"/filtered fields/attributes that had been
>> selected via "organize columns" dialog
>> (https://github.com/qgis/QGIS/issues/41628)
>> 
>> - Usability improvement: Quick click to graphically deselect all (e.g. 
>> 3
>> times click or right click) 
>> (https://github.com/qgis/QGIS/issues/41629)
>> 
>> - Quickly access the attribute table by double click: e.g. when 
>> clicking
>> on the layer's name. When clicking on the layer symbol, open layer
>> property dialog.
>> I know there's already an option to choose between the properties
>> dialog or table view. If my suggestion doesn't make this option
>> unnecessary we could add a third "split" option with a location
>> dependant functionality (which I personally would then opt as the
>> default) (https://github.com/qgis/QGIS/issues/41630)
>> 
>> - Usability improvement: Double clicking on a layer selection box 
>> should
>> not trigger the opening of the layer's properties as selecting and
>> deselecting a layer too quickly brings shouldn't bring up a dialog.
>> (https://github.com/qgis/QGIS/issues/41631)
>> 
>> - Rename tool tip description "Modify the Attributes of all selected
>> features simultaneously". Suggestion to rename it to "Multiple Feature
>> Edit" (preferred due to being short and hopefully self-explanatory
>> enough, yet not sure if clear to all users) or "Modify several
>> attributes of selected features at once" (very long). Any other ideas
>> for a better wording? By the way I personally would rather opt for a
>> longer wording in the top area of the dialog itself rather than in a
>> tiny tool tip button. (https://github.com/qgis/QGIS/issues/41632)
>> 
>> - Usability improvement: Add functionality to the layer context menu 
>> in
>> "Layers" panel: Flash all features, flash selected features
>> (https://github.com/qgis/QGIS/issues/41633)
>> -In Feature Attribute Table view: Various view related action symbols
>> like the Filter Form, Organize Columns, Show only specific Features
>> (selected, visible on map, Edited and New) as well as the Switch for
>> Form and Table view are scattered among the upper and lower margin 
>> what
>> makes is hard for me to orientate. Any opinion about grouping all view
>> related properties and buttons at the top right: What features to show
>> (selected/all/visible on map/...), form view/table view, what columns 
>> to
>> show. I'd suggest to leave only one logic fnctionality at the bottom
>> such as instant field filtering.
>> I also generally noted that there are multiple ways of filtering. On 
>> one
>> side that offers many possibilities and provides freedom whereas on 
>> the
>> other hand the many options may confuse users and may create an
>> overloaded picture. Any more positive ideas that could help clearing 
>> up
>> the many filtering options picture in the attributes dialog?
>> (https://github.com/qgis/QGIS/issues/41634)
>> 
>> - Confusing: Create a new field in the field calculator dialog without
>> being in edit mode on the layer and  even if the user cannot create a
>> new field
>> -> suggestion to remove this function from the field calculator
>> dialog and have only the option to create virtual fields as a 
>> remaining
>> option (https://github.com/qgis/QGIS/issues/41635)
>> 
>> - Improve Layer Styling: Facilitate multiple labels with different
>> colors in addition to "no labels", "single labels", "rule-based
>> labeling" and "Blocking". In the first run the function should
>> facilitate to chose multiple attributes with different font colors and
>> font styling. A later option could to enable the user to determine the
>> label arrangement horizontally and vertically. (functionality 
>> considered
>> as inferior priority) (https://github.com/qgis/QGIS/issues/41636)
>> 
>> - Add functionality to the layer context menu in "Layers" panel: Add a
>> feature related context menu to the categorized symbols/items/features
>> in a layer, that enables the user to "Zoom to features", "Zoom to
>> selection", "Flash all features", "Flash selected features"
>> (functionality considered as inferior priority)
>> (https://github.com/qgis/QGIS/issues/41637)
>> 
>> - Create a "Selected Features panel", meaning to provide a panel 
>> similar
>> to "Identify results" with the functionality of the "Multiple feature
>> dialog". Important note: In needs to be easily distinguishable by its
>> looks from the identify results
>> (functionality considered as inferior priority)
>> (https://github.com/qgis/QGIS/issues/41638)
>> 
>> - User may be confused about selected objects that cannot be modified:
>> Maybe change selection color of objects when Layer of selected 
>> features
>> is editable?
>> (functionality considered as inferior priority)
>> (https://github.com/qgis/QGIS/issues/41639)
>> 
>> - ability to open the raster georeferencer and read recently
>> georeferenced raster map from layer context menu
>> (https://github.com/qgis/QGIS/issues/41640)
>> 
>> 
>> 
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> 
> 
> J. Gustavo
> --
> Jorge Gustavo Rocha
> Departamento de Inform?tica
> Universidade do Minho
> 4710-057 Braga
> Gabinete 3.29 (Piso 3)
> Tel: +351 253604480
> Fax: +351 253604471
> M?vel: +351 910333888
> skype: nabocudnosor
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210218/d017a278/attachment-0001.html>

From TurboGraphxBeige at runbox.com  Thu Feb 18 18:43:43 2021
From: TurboGraphxBeige at runbox.com (TurboGraphxBeige)
Date: Fri, 19 Feb 2021 02:43:43 +0000
Subject: [QGIS-Developer] Visual Changelog 3.18,
 add some love to some  items?
In-Reply-To: <203ed598-0917-5685-8586-79714058fff4@duif.net>
References: <203ed598-0917-5685-8586-79714058fff4@duif.net>
Message-ID: <a961866d78b0955b43f32a629a0e6142@runbox.com>

I would gladly give some love to my potentially dull feature description but I don't see anything
about the 3.18 changelog in the git repo. Also, the link you provided is your localhost. :)


Patrice Pineault


February 18, 2021 9:10 AM, "Richard Duivenvoorde" <rdmailings at duif.net> wrote:

> I was testing the inclusion of the rst in the website of
> 
> http://localhost/qgis/en/site/forusers/visualchangelog318/index.html
> 
> Most items are nice already, but... some items are a little dull... anybody willing to look into
> his/her or other dull 'features', and add some 'love'?
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From etienne.trimaille at gmail.com  Thu Feb 18 21:15:19 2021
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Fri, 19 Feb 2021 12:15:19 +0700
Subject: [QGIS-Developer] Visual Changelog 3.18,
 add some love to some items?
In-Reply-To: <a961866d78b0955b43f32a629a0e6142@runbox.com>
References: <203ed598-0917-5685-8586-79714058fff4@duif.net>
 <a961866d78b0955b43f32a629a0e6142@runbox.com>
Message-ID: <CAMtDFLL-ZP1xw-Of9Djmyf0aq2-eHH0JBdBwYufrp0pFDOoWkg@mail.gmail.com>

The changelog is, before to be transformed in RST, hosted online :
https://changelog.qgis.org/en/qgis/version/3.18/

Le ven. 19 f?vr. 2021 ? 10:37, TurboGraphxBeige <TurboGraphxBeige at runbox.com>
a ?crit :

> I would gladly give some love to my potentially dull feature description
> but I don't see anything
> about the 3.18 changelog in the git repo. Also, the link you provided is
> your localhost. :)
>
>
> Patrice Pineault
>
>
> February 18, 2021 9:10 AM, "Richard Duivenvoorde" <rdmailings at duif.net>
> wrote:
>
> > I was testing the inclusion of the rst in the website of
> >
> > http://localhost/qgis/en/site/forusers/visualchangelog318/index.html
> >
> > Most items are nice already, but... some items are a little dull...
> anybody willing to look into
> > his/her or other dull 'features', and add some 'love'?
> >
> > Regards,
> >
> > Richard Duivenvoorde
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210219/3b2fc29e/attachment.html>

From rdmailings at duif.net  Fri Feb 19 00:09:55 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 19 Feb 2021 09:09:55 +0100
Subject: [QGIS-Developer] [Qgis-community-team]  Visual Changelog 3.18,
 add some love to some items?
In-Reply-To: <CAMtDFLL-ZP1xw-Of9Djmyf0aq2-eHH0JBdBwYufrp0pFDOoWkg@mail.gmail.com>
References: <203ed598-0917-5685-8586-79714058fff4@duif.net>
 <a961866d78b0955b43f32a629a0e6142@runbox.com>
 <CAMtDFLL-ZP1xw-Of9Djmyf0aq2-eHH0JBdBwYufrp0pFDOoWkg@mail.gmail.com>
Message-ID: <8fb573f9-4652-d054-e4ea-c990b23992a4@duif.net>

On 2/19/21 6:15 AM, Etienne Trimaille wrote:
> The changelog is, before to be transformed in RST, hosted online : https://changelog.qgis.org/en/qgis/version/3.18/ <https://changelog.qgis.org/en/qgis/version/3.18/>
> 
> Le?ven. 19 f?vr. 2021 ??10:37, TurboGraphxBeige <TurboGraphxBeige at runbox.com <mailto:TurboGraphxBeige at runbox.com>> a ?crit?:
>     I would gladly give some love to my potentially dull feature description but I don't see anything
>     about the 3.18 changelog in the git repo. Also, the link you provided is your localhost. :)

Ah, yes sorry sorry, that was indeed my local test build :-(

https://changelog.qgis.org/en/qgis/version/3.18/

Go and get a login and 'fun up' your item!

But plz keep to our conventions about images and such.

Thanks

Richard

From rykovd at gmail.com  Fri Feb 19 03:17:05 2021
From: rykovd at gmail.com (Denis Rykov)
Date: Fri, 19 Feb 2021 12:17:05 +0100
Subject: [QGIS-Developer] QGIS gives different area calculation result
 compared to PROJ
Message-ID: <CAJbvKNq-4yYkeQ5vU3WCwqHr_Aap7hf55Ox0=3VytZG-fSy2yQ@mail.gmail.com>

from qgis.core import *
d = QgsDistanceArea()
d.setEllipsoid('WGS84')
lats = [-72.9, -71.9, -74.9, -74.3, -77.5, -77.4, -71.7, -65.9, -65.7,
-66.6, -66.9, -69.8, -70.0, -71.0, -77.3, -77.9, -74.7]
lons = [-74, -102, -102, -131, -163, 163, 172, 140, 113, 88, 59, 25,
-4, -14, -33, -46, -61]
g = QgsGeometry.fromPolygonXY([[QgsPointXY(lon, lat) for lon, lat in
zip(lons, lats)]])
d.measureArea(g)

and getting 13975013791223.5.

But if you look at pyproj example here:
https://github.com/pyproj4/pyproj/blob/8c57974177410909ec4eef2da3a60cbcda71acb8/pyproj/geod.py#L451
you can see that are of the same polygon is 13376856682207.4 so the
difference is quite big.

So I would say it seems like an error in the area calculation algorithm in QGIS.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210219/01fcd767/attachment.html>

From carlos.lopez at psig.es  Fri Feb 19 03:59:00 2021
From: carlos.lopez at psig.es (=?UTF-8?Q?Carlos_L=C3=B3pez_PSIG?=)
Date: Fri, 19 Feb 2021 12:59:00 +0100
Subject: [QGIS-Developer] Possible malfunction in layer panel
Message-ID: <CAGvsbY5z9m7-5XM16BS9VKTq2pA7PvEk-k6S_OxQ1=DCJo=8dw@mail.gmail.com>

Hi all,
I noticed that if you have grouped layers in first position in Layer panel,
and you have the group collapsed when you save the project.
When you open the project the group appear expanded, but I saved it
collapsed.

Do I open a new Issue?
https://github.com/qgis/QGIS/issues
I attach project and sample image

Best regards,

* <http://psig.es>*
*PSIG*
Implementaci?, gesti? i formaci? SIG

*Carlos L?pez Quintanilla*

www.psig.es
carlos.lopez at psig.es
+34 699.680.261

Nota legal: Este mensaje y cualquier archivo adjunto est? destinado
?nicamente a la
persona a quien se dirige y es confidencial. Si usted ha recibido este
mensaje por
error, por favor, comun?queselo al remitente y b?rrelo inmediatamente. La
utilizaci?n ,
revelaci?n y/o reproducci?n del mensaje puede constituir un delito.

Protecci?n de Datos: Le informamos que sus datos de contacto electr?nico se
hallan
incorporados a un fichero titularidad de CARLOS L?PEZ QUINTANILLA, al
objeto de
env?o de informaci?n, respuesta a consultas y contactos gen?ricos.
Puede ejercer los derechos de acceso, rectificaci?n, cancelaci?n y
oposici?n que
establece la LOPD en cualquier momento, mediante escrito, acompa?ado de
copia de
documento oficial que le identifique, dirigido a CARLOS L?PEZ QUINTANILLA
CL. P
arellada, 8 E2 de Corbera de Llobregat, 08757-Barcelona.

Tambi?n podr? oponerse a nuestros env?os de comunicaciones comerciales
(Art.21.2
de la LSSI) a trav?s de la siguiente direcci?n de correo electr?nico:
admin at psig.es
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210219/ac43d9b5/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: prova.qgz
Type: application/octet-stream
Size: 4055 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210219/ac43d9b5/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Layer_panel_expanded.jpg
Type: image/jpeg
Size: 14301 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210219/ac43d9b5/attachment-0001.jpg>

From nicholas.sunhing at gmail.com  Fri Feb 19 05:25:57 2021
From: nicholas.sunhing at gmail.com (Nicholas Sun Hing)
Date: Fri, 19 Feb 2021 15:25:57 +0200
Subject: [QGIS-Developer] QGIS Open Day 26 February 2021
Message-ID: <CAF-Lnm5ahCy0SQk4Q4VY0spCou=hHMBBOa6BjfXN07TDcPCyFg@mail.gmail.com>

Dear QGIS Developers

On Friday, 26 February 2021 we will be holding our monthly QGIS Open Day!
What is a QGIS Open Day you may be wondering to yourself? It is an
initiative to replace the wonderful community meetups we used to hold every
six months when times were different. Like our in-person meetings, the
event is organised on a principle of self-organisation and community
participation.

Please see the event wiki page at
https://github.com/qgis/QGIS/wiki/QHF-February-2021 for all the details of
times and links for participation.

Please contact Zinziswa Xakayi by email (zeighxakayi at gmail.com) or via the
QGIS Open Day Telegram User Group (
https://t.me/joinchat/Aq2V5RPoxYYhXqUPoxRWPQ user @zinzixakayi) if you have
any queries or need help setting up events.

We look forward to seeing you there!

Regards the QGIS Open Day Organising Team!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210219/1f2692a2/attachment.html>

From andreaerdna at libero.it  Fri Feb 19 08:31:13 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 19 Feb 2021 09:31:13 -0700 (MST)
Subject: [QGIS-Developer] QGIS gives different area calculation result
 compared to PROJ
In-Reply-To: <CAJbvKNq-4yYkeQ5vU3WCwqHr_Aap7hf55Ox0=3VytZG-fSy2yQ@mail.gmail.com>
References: <CAJbvKNq-4yYkeQ5vU3WCwqHr_Aap7hf55Ox0=3VytZG-fSy2yQ@mail.gmail.com>
Message-ID: <1613752273743-0.post@n6.nabble.com>

dr wrote
> So I would say it seems like an error in the area calculation algorithm in
> QGIS.

Hi,
there is no unique way to calculate the geodesic area.

For example, PROJ use a C implementation of the GeographicLib algorithm,
while QGIS uses the same algorithm used by GRASS, SpatiaLite 5 uses RTTOPO
library and PostGIS uses GeographicLib.

See this recent threed
http://osgeo-org.1560.x6.nabble.com/Confusion-with-ellipsoidal-method-of-area-td5454013.html
on the same topic.
There are two feature requests for QGIS and GRASS:
https://github.com/qgis/QGIS/issues/40888
https://github.com/OSGeo/grass/issues/1235
and a Pull Request in GRASS https://github.com/OSGeo/grass/pull/1283.

So it look like there is the possibility that GRASS will switch to use the
same C implementation of the GeographicLib algorithm used by PROJ.

Regards.

Andrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rykovd at gmail.com  Fri Feb 19 08:50:55 2021
From: rykovd at gmail.com (Denis Rykov)
Date: Fri, 19 Feb 2021 17:50:55 +0100
Subject: [QGIS-Developer] QGIS gives different area calculation result
 compared to PROJ
In-Reply-To: <1613752273743-0.post@n6.nabble.com>
References: <CAJbvKNq-4yYkeQ5vU3WCwqHr_Aap7hf55Ox0=3VytZG-fSy2yQ@mail.gmail.com>
 <1613752273743-0.post@n6.nabble.com>
Message-ID: <CAJbvKNrwoPNYrMs=Nss1PZh1QzcgEYCohrge7dy0GoeLosWj4w@mail.gmail.com>

Thanks for your prompt and detailed reply!

On Fri, Feb 19, 2021 at 5:32 PM Andrea Giudiceandrea <andreaerdna at libero.it>
wrote:

> dr wrote
> > So I would say it seems like an error in the area calculation algorithm
> in
> > QGIS.
>
> Hi,
> there is no unique way to calculate the geodesic area.
>
> For example, PROJ use a C implementation of the GeographicLib algorithm,
> while QGIS uses the same algorithm used by GRASS, SpatiaLite 5 uses RTTOPO
> library and PostGIS uses GeographicLib.
>
> See this recent threed
>
> http://osgeo-org.1560.x6.nabble.com/Confusion-with-ellipsoidal-method-of-area-td5454013.html
> on the same topic.
> There are two feature requests for QGIS and GRASS:
> https://github.com/qgis/QGIS/issues/40888
> https://github.com/OSGeo/grass/issues/1235
> and a Pull Request in GRASS https://github.com/OSGeo/grass/pull/1283.
>
> So it look like there is the possibility that GRASS will switch to use the
> same C implementation of the GeographicLib algorithm used by PROJ.
>
> Regards.
>
> Andrea
>
>
>
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210219/2bb1b736/attachment.html>

From rdmailings at duif.net  Sat Feb 20 23:46:38 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 21 Feb 2021 08:46:38 +0100
Subject: [QGIS-Developer] Plz check changelog 3.18 in site
Message-ID: <88b155a3-875a-1f85-55fb-12ef914aea6e@duif.net>

Hi QGIS,

I just pulled the rst of the Visual Changelog 3.18 into qgis.org website:

https://qgis.org/en/site/forusers/visualchangelog318/index.html

Huge thanks to everybody who worked on this!!


Please let me know if you see any strange issues with it.

The list with 'notable commits' is to be added later.

Pushing to Transifex I will hold for that (and for possible fixes/additions).
(non english versions are being build as we write...)

Unless there is a huge error, please fix rst via github or pr's

Thanks,

Richard Duivenvoorde

From anitagraser at gmx.at  Sun Feb 21 01:28:15 2021
From: anitagraser at gmx.at (Anita Graser)
Date: Sun, 21 Feb 2021 10:28:15 +0100
Subject: [QGIS-Developer] Call for Grant Proposals 2021
Message-ID: <aab76151-d420-db53-53eb-1e2bde525992@gmx.at>

Dear QGIS Community,

We are very pleased to announce that this year?s round of grants is now
available:

https://blog.qgis.org/2021/02/21/qgis-grants-6-call-for-grant-proposals-2021/

The call is open to anybody who wants to make a funded contribution to
QGIS, subject to the call conditions outlined in the application form:

https://forms.gle/5h1XJc3nUTZP4Axh7

The deadline for this round is 21st March 2021.

Regards,

Anita


From pigrecoinfinito at gmail.com  Sun Feb 21 05:26:54 2021
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2_Fiandaca?=)
Date: Sun, 21 Feb 2021 14:26:54 +0100
Subject: [QGIS-Developer] Plz check changelog 3.18 in site
In-Reply-To: <88b155a3-875a-1f85-55fb-12ef914aea6e@duif.net>
References: <88b155a3-875a-1f85-55fb-12ef914aea6e@duif.net>
Message-ID: <CADk2tETs0gNNCE4P5HgCwr7w=WBDuY+yuT5zi_4f8t3tEEMxsg@mail.gmail.com>

Thank you very much for all the work you have done.

I would suggest adding, in addition to the developer name (already
present), also the link to the Pull Request of the QGIS repository, this
would allow quick feedback and insights.

Il giorno dom 21 feb 2021 alle ore 08:47 Richard Duivenvoorde <
rdmailings at duif.net> ha scritto:

> Hi QGIS,
>
> I just pulled the rst of the Visual Changelog 3.18 into qgis.org website:
>
> https://qgis.org/en/site/forusers/visualchangelog318/index.html
>
> Huge thanks to everybody who worked on this!!
>
>
> Please let me know if you see any strange issues with it.
>
> The list with 'notable commits' is to be added later.
>
> Pushing to Transifex I will hold for that (and for possible
> fixes/additions).
> (non english versions are being build as we write...)
>
> Unless there is a huge error, please fix rst via github or pr's
>
> Thanks,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
*Ing. Salvatore Fiandaca*
*mobile*.:+39 327.493.8955
*m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
*C.F*.: FNDSVT71E29Z103G
*P.IVA*: 06597870820
*membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
*socio GFOSS.it - *http://gfoss.it/
*blog:*
* https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
- https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
<https://www.facebook.com/qgis.it/> *
*TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
<https://twitter.com/totofiandaca>*

43?51'0.54"N  10?34'27.62"E - EPSG:4326

?Se la conoscenza deve essere aperta a tutti,
perch? mai limitarne l?accesso??
R. Stallman

Questo documento, allegati inclusi, contiene informazioni di propriet? di
FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega di
informare tempestivamente il mittente e distruggere la copia in proprio
possesso.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210221/211038c1/attachment.html>

From nyall.dawson at gmail.com  Sun Feb 21 19:48:36 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 22 Feb 2021 13:48:36 +1000
Subject: [QGIS-Developer] QGIS gives different area calculation result
 compared to PROJ
In-Reply-To: <1613752273743-0.post@n6.nabble.com>
References: <CAJbvKNq-4yYkeQ5vU3WCwqHr_Aap7hf55Ox0=3VytZG-fSy2yQ@mail.gmail.com>
 <1613752273743-0.post@n6.nabble.com>
Message-ID: <CAB28Asjg_hgZwnyV=n+q-T5XS4ZkMFRo_ZBKdG0_KAY0FOXONw@mail.gmail.com>

On Sat, 20 Feb 2021 at 02:31, Andrea Giudiceandrea
<andreaerdna at libero.it> wrote:
>
> dr wrote
> > So I would say it seems like an error in the area calculation algorithm in
> > QGIS.
>
> Hi,
> there is no unique way to calculate the geodesic area.
>
> For example, PROJ use a C implementation of the GeographicLib algorithm,
> while QGIS uses the same algorithm used by GRASS, SpatiaLite 5 uses RTTOPO
> library and PostGIS uses GeographicLib.

For reference: https://github.com/qgis/QGIS/pull/41726

Nyall

>
> See this recent threed
> http://osgeo-org.1560.x6.nabble.com/Confusion-with-ellipsoidal-method-of-area-td5454013.html
> on the same topic.
> There are two feature requests for QGIS and GRASS:
> https://github.com/qgis/QGIS/issues/40888
> https://github.com/OSGeo/grass/issues/1235
> and a Pull Request in GRASS https://github.com/OSGeo/grass/pull/1283.
>
> So it look like there is the possibility that GRASS will switch to use the
> same C implementation of the GeographicLib algorithm used by PROJ.
>
> Regards.
>
> Andrea
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Sun Feb 21 20:55:12 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 22 Feb 2021 14:55:12 +1000
Subject: [QGIS-Developer] Can't retrieve plugins for 3.18/3.19
Message-ID: <CAB28Asg+Y09771KZeH2JroOU_E+H2Nseef4owHDrEKAo2B2OZQ@mail.gmail.com>

Hi all,

Trying to retrieve the plugins repo for 3.18 or 3.19 gives the error:

Error reading repository: QGIS Official Plugin Repository
Error transferring
https://plugins.qgis.org/plugins/plugins.xml?qgis=3.18 - server
replied: Not Found

And indeed - https://plugins.qgis.org/plugins/plugins.xml?qgis=3.18
reports a Not Found error.

Is anyone aware of this?

Nyall

From michal.wloga at envirosolutions.pl  Mon Feb 22 00:23:36 2021
From: michal.wloga at envirosolutions.pl (michal.wloga at envirosolutions.pl)
Date: Mon, 22 Feb 2021 09:23:36 +0100
Subject: [QGIS-Developer] 3.18 in osgeo4w installer
Message-ID: <014301d708f4$04478f40$0cd6adc0$@envirosolutions.pl>

Dear Devs,

 

I have found that there is no possibility to upgrade QGIS Desktop to 3.18
via network installer on Windows. I can upgrade LTR to 3.16.4-1 but regular
QGIS is 3.16.3-1 available only.



 

Regards,

EnviroSolutions Sp. z o. o.
Micha? W?oga
tel: +48 607 059 157
 <mailto:coo at envirosolutions.pl> coo at envirosolutions.pl
 <http://www.envirosolutions.pl/szkolenia> www.envirosolutions.pl

 
<https://www.envirosolutions.pl/news/118/129/Wtyczka-QGIS---Pobieracz-Danych
-GUGiK.html> Pobieracz Danych GUGiK - laureat nagrody GUGiK na najlepsze
wykorzystanie danych i us?ug GUGiK w 2020 r.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/2d22742a/attachment.html>

From pigrecoinfinito at gmail.com  Mon Feb 22 01:29:09 2021
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2_Fiandaca?=)
Date: Mon, 22 Feb 2021 10:29:09 +0100
Subject: [QGIS-Developer] 3.18 in osgeo4w installer
In-Reply-To: <014301d708f4$04478f40$0cd6adc0$@envirosolutions.pl>
References: <014301d708f4$04478f40$0cd6adc0$@envirosolutions.pl>
Message-ID: <CADk2tER7CsRh=os0k=kj2=MtOwJYoCv6PaTd131N0k7wpkh9uQ@mail.gmail.com>

I confirm, in OSGeo4W there is no 3.18

saluti

Il giorno lun 22 feb 2021 alle ore 10:22 <michal.wloga at envirosolutions.pl>
ha scritto:

> Dear Devs,
>
>
>
> I have found that there is no possibility to upgrade QGIS Desktop to 3.18
> via network installer on Windows. I can upgrade LTR to 3.16.4-1 but regular
> QGIS is 3.16.3-1 available only.
>
>
>
> Regards,
>
> EnviroSolutions Sp. z o. o.
> Micha? W?oga
> tel: +48 607 059 157
> coo at envirosolutions.pl
> www.envirosolutions.pl <http://www.envirosolutions.pl/szkolenia>
>
> Pobieracz Danych GUGiK
> <https://www.envirosolutions.pl/news/118/129/Wtyczka-QGIS---Pobieracz-Danych-GUGiK.html>
> ? laureat nagrody GUGiK na najlepsze wykorzystanie danych i us?ug GUGiK w
> 2020 r.
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
*Ing. Salvatore Fiandaca*
*mobile*.:+39 327.493.8955
*m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
*C.F*.: FNDSVT71E29Z103G
*P.IVA*: 06597870820
*membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
*socio GFOSS.it - *http://gfoss.it/
*blog:*
* https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
- https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
<https://www.facebook.com/qgis.it/> *
*TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
<https://twitter.com/totofiandaca>*

43?51'0.54"N  10?34'27.62"E - EPSG:4326

?Se la conoscenza deve essere aperta a tutti,
perch? mai limitarne l?accesso??
R. Stallman

Questo documento, allegati inclusi, contiene informazioni di propriet? di
FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega di
informare tempestivamente il mittente e distruggere la copia in proprio
possesso.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/b6ccc5f2/attachment.html>

From pigrecoinfinito at gmail.com  Mon Feb 22 01:36:01 2021
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2_Fiandaca?=)
Date: Mon, 22 Feb 2021 10:36:01 +0100
Subject: [QGIS-Developer] 3.18 in osgeo4w installer
In-Reply-To: <CADk2tER7CsRh=os0k=kj2=MtOwJYoCv6PaTd131N0k7wpkh9uQ@mail.gmail.com>
References: <014301d708f4$04478f40$0cd6adc0$@envirosolutions.pl>
 <CADk2tER7CsRh=os0k=kj2=MtOwJYoCv6PaTd131N0k7wpkh9uQ@mail.gmail.com>
Message-ID: <CADk2tERh44huu3c7W5i6G59pNEnxuhDSEvn6hEe6EPtDcRUsmg@mail.gmail.com>

I believe the answer is here:

https://www.lutraconsulting.co.uk/blog/2021/02/15/qgis-point-cloud-windows/

Il giorno lun 22 feb 2021 alle ore 10:29 Tot? Fiandaca <
pigrecoinfinito at gmail.com> ha scritto:

> I confirm, in OSGeo4W there is no 3.18
>
> saluti
>
> Il giorno lun 22 feb 2021 alle ore 10:22 <michal.wloga at envirosolutions.pl>
> ha scritto:
>
>> Dear Devs,
>>
>>
>>
>> I have found that there is no possibility to upgrade QGIS Desktop to 3.18
>> via network installer on Windows. I can upgrade LTR to 3.16.4-1 but regular
>> QGIS is 3.16.3-1 available only.
>>
>>
>>
>> Regards,
>>
>> EnviroSolutions Sp. z o. o.
>> Micha? W?oga
>> tel: +48 607 059 157
>> coo at envirosolutions.pl
>> www.envirosolutions.pl <http://www.envirosolutions.pl/szkolenia>
>>
>> Pobieracz Danych GUGiK
>> <https://www.envirosolutions.pl/news/118/129/Wtyczka-QGIS---Pobieracz-Danych-GUGiK.html>
>> ? laureat nagrody GUGiK na najlepsze wykorzystanie danych i us?ug GUGiK w
>> 2020 r.
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> *Ing. Salvatore Fiandaca*
> *mobile*.:+39 327.493.8955
> *m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
> *C.F*.: FNDSVT71E29Z103G
> *P.IVA*: 06597870820
> *membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
> *socio GFOSS.it - *http://gfoss.it/
> *blog:*
> * https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
> - https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
> <https://www.facebook.com/qgis.it/> *
> *TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
> <https://twitter.com/totofiandaca>*
>
> 43?51'0.54"N  10?34'27.62"E - EPSG:4326
>
> ?Se la conoscenza deve essere aperta a tutti,
> perch? mai limitarne l?accesso??
> R. Stallman
>
> Questo documento, allegati inclusi, contiene informazioni di propriet? di
> FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
> in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
> qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
> di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega
> di informare tempestivamente il mittente e distruggere la copia in proprio
> possesso.
>
>
>

-- 
*Ing. Salvatore Fiandaca*
*mobile*.:+39 327.493.8955
*m*: *pigrecoinfinito at gmail.com <pigrecoinfinito at gmail.com>*
*C.F*.: FNDSVT71E29Z103G
*P.IVA*: 06597870820
*membro QGIS Italia - http://qgis.it/ <http://qgis.it/>*
*socio GFOSS.it - *http://gfoss.it/
*blog:*
* https://pigrecoinfinito.com/ <https://pigrecoinfinito.com/> FB: Co-admin
- https://www.facebook.com/qgis.it/ <https://www.facebook.com/qgis.it/>**
<https://www.facebook.com/qgis.it/> *
*TW:  <http://goog_95411464>**https://twitter.com/totofiandaca
<https://twitter.com/totofiandaca>*

43?51'0.54"N  10?34'27.62"E - EPSG:4326

?Se la conoscenza deve essere aperta a tutti,
perch? mai limitarne l?accesso??
R. Stallman

Questo documento, allegati inclusi, contiene informazioni di propriet? di
FIANDACA SALVATORE e deve essere utilizzato esclusivamente dal destinatario
in relazione alle finalit? per le quali ? stato ricevuto. E' vietata
qualsiasi forma di riproduzione o divulgazione senza l'esplicito consenso
di FIANDACA SALVATORE. Qualora fosse stato ricevuto per errore si prega di
informare tempestivamente il mittente e distruggere la copia in proprio
possesso.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/537a59da/attachment-0001.html>

From jef at norbit.de  Mon Feb 22 01:55:34 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Mon, 22 Feb 2021 10:55:34 +0100
Subject: [QGIS-Developer] 3.18 in osgeo4w installer
In-Reply-To: <014301d708f4$04478f40$0cd6adc0$@envirosolutions.pl>
References: <014301d708f4$04478f40$0cd6adc0$@envirosolutions.pl>
Message-ID: <20210222095534.ospynedpsjvizqey@norbit.de>

Hi Michal,

On Mon, 22. Feb 2021 at 09:23:36 +0100, michal.wloga at envirosolutions.pl wrote:
> I have found that there is no possibility to upgrade QGIS Desktop to 3.18
> via network installer on Windows. I can upgrade LTR to 3.16.4-1 but regular
> QGIS is 3.16.3-1 available only.

Correct.  3.18 is not available in OSGeo4W yet.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/22edc168/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/22edc168/attachment.ksh>

From luca.manganelli at comune.trento.it  Mon Feb 22 04:52:05 2021
From: luca.manganelli at comune.trento.it (Luca Manganelli)
Date: Mon, 22 Feb 2021 13:52:05 +0100
Subject: [QGIS-Developer] Backport "GetLegendGraphics Symbol Scale" from
 3.18 to 3.16 LTR?
Message-ID: <CAGKduJ1SEH3UmF8eC0-83y28wv2+-qw4-rN3Tg934UP8_ghxfA@mail.gmail.com>

Hello,

I've spotted in the 3.18 changelog, QGIS Server part: "GetLegendGraphics
Symbol Scale". If I understand correctly, it should resolve the problem of
too little or too big symbols.
This could be really useful for the 3.16... Without having to wait for the
next LTR.
Can we backport this feature?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/2486b118/attachment.html>

From paul.wittle at dorsetcouncil.gov.uk  Mon Feb 22 07:14:13 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Mon, 22 Feb 2021 15:14:13 +0000
Subject: [QGIS-Developer] QGIS projecting loading and WFS layer validation
Message-ID: <CWXP265MB1623A7C7DC17BC82B2ADB9A6C1819@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Hi,

I've noticed that if you put a smaller timeout under the Network settings then I often find that I get invalid layer errors for WFS layers. This is odd because the timeout was set at 5 seconds and I'm pretty sure the load process was not waiting 5 seconds per WFS layer (it was too quick for that). I set the value at 10 seconds and there is no noticeable difference in load up time but the WFS layer load without an issue.

Could there be a bug in the code causing this behaviour and is there any connection pooling for WFS layers or does it GetCapabilities each layer individually?

I would also be interested to know it is possible to force the application to only validate layers which are switched on when loading a project?

This is because a number of our users have suggested QGIS is slower loading than it's commercial rivals. I'm pretty sure some of these faster because they may be skipping validation checks on layers that are switched off as default. This makes sense to me as presumably the application has to validate layer when you toggle them on/off anyway as layers may become invalid after the project is loaded anyway.

QGIS seems to check every layer so if a project has 50+ layers the load time can be a tad slows (minutes) but if you assume that only 10 or so layers would actually be set to visible then the load up time would be significantly faster if we could skip the 40+ that are not needed on initial load.

I might be interested in knowing more about this topic as we may have an interest in helping to develop changes if there are any that make sense to make.

Best Regards,
Paul
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/a465ae93/attachment.html>

From marco at qgis.org  Mon Feb 22 09:49:23 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Mon, 22 Feb 2021 18:49:23 +0100
Subject: [QGIS-Developer] QGIS Usergroup day on 30 april 2021
Message-ID: <CAB2ZMRCX_1qvuqXyKPjXK-dBN8CONnDkdeYVNM_1pWZUzmW2ww@mail.gmail.com>

Dear QGIS Usergroups,
you have probably heard of the QGIS Open Day and the great traction it is
gaining.

If not, It is an initiative to replace the wonderful community meetups we
used to hold every six months when times were different. Like our in-person
meetings, the event is organised on the principle of self-organisation and
community participation.

On April 30th, we'd like to have the various Country user groups take over
the day and show everyone their QGIS awesomeness!

Please head to https://github.com/qgis/QGIS/wiki/QHF-April-2021 and add the
time you would like to present (you can choose the duration and the format).

We are looking forward to a super interesting day with you all!

Thanks a lot for all your help in making QGIS the world's most beloved GIS
:)

Cheers
Marco

-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/60332e8d/attachment-0001.html>

From james at shaeffer.co  Mon Feb 22 10:58:37 2021
From: james at shaeffer.co (james at shaeffer.co)
Date: Mon, 22 Feb 2021 11:58:37 -0700
Subject: [QGIS-Developer] API Down?
Message-ID: <019301d7094c$bb810bc0$32832340$@shaeffer.co>

Just noticed that https://qgis.org/api/ doesn't appear to be working.

 

Just letting someone know.

 

--

James

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210222/72cf1880/attachment.html>

From pergler at gmail.com  Mon Feb 22 17:54:15 2021
From: pergler at gmail.com (Martin Pergler)
Date: Mon, 22 Feb 2021 18:54:15 -0700 (MST)
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <1613438134893-0.post@n6.nabble.com>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
 <1613438134893-0.post@n6.nabble.com>
Message-ID: <1614045255022-0.post@n6.nabble.com>

As per the thread last week, with the help of Jorge Gustavo Rocha (regarding
server) and Ben Hur Pintor, I've taken a first crack at revising the Github
landing page to be more exciting, up-to-date, and visual.

The current draft is at
https://github.com/Houska1/QGIS/blob/README-md-update/README.md; all
comments welcome (here, there, or by email to pergler at gmail.com).

At this stage, I'd love to get buy in on the overall structure, and the
choice of the 5 high-level points under Features. We can then hunt for
better illustrations for each -- right now, I grabbed something from the
user manual or qgis.org gallery for each one, but we can probably do better.
Might even make sense to make something custom at a better image
size/resolution (but only once we're collectively happy we have the right
points to illustrate...).

Cheers,
Martin



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From teshelman.gci at gmail.com  Tue Feb 23 00:08:15 2021
From: teshelman.gci at gmail.com (Tyler Eshelman)
Date: Tue, 23 Feb 2021 01:08:15 -0700
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <1614045255022-0.post@n6.nabble.com>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
 <1613438134893-0.post@n6.nabble.com> <1614045255022-0.post@n6.nabble.com>
Message-ID: <CAOnvhDLBfCdkEPG23tQYo0FhWFjgvLS446po9RUXpYYMr7g2nA@mail.gmail.com>

Hello everyone,

This is my first time replying to these emails since joining the QGIS
development list.
Besides the landing page, are there any other beginner tasks that you have
in mind for someone to begin contributing to this project?

Please let me know when you have a moment free.

Respectfully,

Tyler

?

On Mon, Feb 22, 2021 at 6:54 PM Martin Pergler <pergler at gmail.com> wrote:

> As per the thread last week, with the help of Jorge Gustavo Rocha
> (regarding
> server) and Ben Hur Pintor, I've taken a first crack at revising the Github
> landing page to be more exciting, up-to-date, and visual.
>
> The current draft is at
> https://github.com/Houska1/QGIS/blob/README-md-update/README.md; all
> comments welcome (here, there, or by email to pergler at gmail.com).
>
> At this stage, I'd love to get buy in on the overall structure, and the
> choice of the 5 high-level points under Features. We can then hunt for
> better illustrations for each -- right now, I grabbed something from the
> user manual or qgis.org gallery for each one, but we can probably do
> better.
> Might even make sense to make something custom at a better image
> size/resolution (but only once we're collectively happy we have the right
> points to illustrate...).
>
> Cheers,
> Martin
>
>
>
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210223/d37e32fa/attachment.html>

From jdaniel.lomenede at gmail.com  Tue Feb 23 00:29:14 2021
From: jdaniel.lomenede at gmail.com (JD L)
Date: Tue, 23 Feb 2021 09:29:14 +0100
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <CAOnvhDLBfCdkEPG23tQYo0FhWFjgvLS446po9RUXpYYMr7g2nA@mail.gmail.com>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
 <1613438134893-0.post@n6.nabble.com> <1614045255022-0.post@n6.nabble.com>
 <CAOnvhDLBfCdkEPG23tQYo0FhWFjgvLS446po9RUXpYYMr7g2nA@mail.gmail.com>
Message-ID: <CAFHejDT4pqMnsooHPhjp2ehVCa_dTUyXLtSa-qCOKeYxAZVK+Q@mail.gmail.com>

Hi Martin,
I have the impression that it's not suitable for small screen ? Do you
confirm ?


Le mar. 23 f?vr. 2021 ? 09:08, Tyler Eshelman <teshelman.gci at gmail.com> a
?crit :

> Hello everyone,
>
> This is my first time replying to these emails since joining the QGIS
> development list.
> Besides the landing page, are there any other beginner tasks that you have
> in mind for someone to begin contributing to this project?
>
> Please let me know when you have a moment free.
>
> Respectfully,
>
> Tyler
>
> ?
>
> On Mon, Feb 22, 2021 at 6:54 PM Martin Pergler <pergler at gmail.com> wrote:
>
>> As per the thread last week, with the help of Jorge Gustavo Rocha
>> (regarding
>> server) and Ben Hur Pintor, I've taken a first crack at revising the
>> Github
>> landing page to be more exciting, up-to-date, and visual.
>>
>> The current draft is at
>> https://github.com/Houska1/QGIS/blob/README-md-update/README.md; all
>> comments welcome (here, there, or by email to pergler at gmail.com).
>>
>> At this stage, I'd love to get buy in on the overall structure, and the
>> choice of the 5 high-level points under Features. We can then hunt for
>> better illustrations for each -- right now, I grabbed something from the
>> user manual or qgis.org gallery for each one, but we can probably do
>> better.
>> Might even make sense to make something custom at a better image
>> size/resolution (but only once we're collectively happy we have the right
>> points to illustrate...).
>>
>> Cheers,
>> Martin
>>
>>
>>
>> --
>> Sent from:
>> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210223/5460a187/attachment.html>

From jgr at di.uminho.pt  Tue Feb 23 03:34:10 2021
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Tue, 23 Feb 2021 11:34:10 +0000
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <CAFHejDT4pqMnsooHPhjp2ehVCa_dTUyXLtSa-qCOKeYxAZVK+Q@mail.gmail.com>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
 <1613438134893-0.post@n6.nabble.com> <1614045255022-0.post@n6.nabble.com>
 <CAOnvhDLBfCdkEPG23tQYo0FhWFjgvLS446po9RUXpYYMr7g2nA@mail.gmail.com>
 <CAFHejDT4pqMnsooHPhjp2ehVCa_dTUyXLtSa-qCOKeYxAZVK+Q@mail.gmail.com>
Message-ID: <b690f338-62e4-ac74-8974-ba25599c6f92@di.uminho.pt>

Hi all,

Nice work, Martin!

Yes, the text itself and the images are not properly formatted.

Right now the goal is to validate and improve the structure and the key
arguments, as I understand. Afterwards, images can be improved and
properly formatted in  markdown.

I think everyone can edit this proposal in place, to submit improvements
as a PR. Matthias already did it. My contribution just landed there.

https://github.com/Houska1/QGIS/edit/README-md-update/README.md

Regards,

Jorge

?s 08:29 de 23/02/21, JD L escreveu:
> Hi Martin,
> I have the impression that it's not suitable for small screen ? Do you
> confirm ?
> 
> 
> Le mar. 23 f?vr. 2021 ? 09:08, Tyler Eshelman <teshelman.gci at gmail.com
> <mailto:teshelman.gci at gmail.com>> a ?crit?:
> 
>     Hello everyone,
> 
>     This is my first time replying to these?emails since joining the
>     QGIS development list.
>     Besides the landing page, are there any other beginner tasks that
>     you have in mind for someone to begin contributing to this project?
> 
>     Please?let me know when you have a?moment free.
> 
>     Respectfully,
> 
>     Tyler
> 
>     ?
> 
>     On Mon, Feb 22, 2021 at 6:54 PM Martin Pergler <pergler at gmail.com
>     <mailto:pergler at gmail.com>> wrote:
> 
>         As per the thread last week, with the help of Jorge Gustavo
>         Rocha (regarding
>         server) and Ben Hur Pintor, I've taken a first crack at revising
>         the Github
>         landing page to be more exciting, up-to-date, and visual.
> 
>         The current draft is at
>         https://github.com/Houska1/QGIS/blob/README-md-update/README.md; all
>         comments welcome (here, there, or by email to pergler at gmail.com
>         <mailto:pergler at gmail.com>).
> 
>         At this stage, I'd love to get buy in on the overall structure,
>         and the
>         choice of the 5 high-level points under Features. We can then
>         hunt for
>         better illustrations for each -- right now, I grabbed something
>         from the
>         user manual or qgis.org <http://qgis.org> gallery for each one,
>         but we can probably do better.
>         Might even make sense to make something custom at a better image
>         size/resolution (but only once we're collectively happy we have
>         the right
>         points to illustrate...).
> 
>         Cheers,
>         Martin
> 
> 
> 
>         --
>         Sent from:
>         http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor

From bnhr.xyz at gmail.com  Tue Feb 23 03:51:03 2021
From: bnhr.xyz at gmail.com (Ben Hur Pintor)
Date: Tue, 23 Feb 2021 19:51:03 +0800
Subject: [QGIS-Developer] [Qgis-user] A nice task for a community
 member: revamping the QGIS github landing page
In-Reply-To: <b690f338-62e4-ac74-8974-ba25599c6f92@di.uminho.pt>
References: <CAB28Ashiu3SH8ikRm39shgtNOOQqPy+Q03yQ08vfX5SbmLCA3w@mail.gmail.com>
 <CAMCJChuYJ4F2Uw3MA28wXyH_v0+MGTmyg0erGtWxJmufwzVKuA@mail.gmail.com>
 <1613438134893-0.post@n6.nabble.com> <1614045255022-0.post@n6.nabble.com>
 <CAOnvhDLBfCdkEPG23tQYo0FhWFjgvLS446po9RUXpYYMr7g2nA@mail.gmail.com>
 <CAFHejDT4pqMnsooHPhjp2ehVCa_dTUyXLtSa-qCOKeYxAZVK+Q@mail.gmail.com>
 <b690f338-62e4-ac74-8974-ba25599c6f92@di.uminho.pt>
Message-ID: <CAPTobbDL7C=0CpKcHqZjnZ=zyyg9sW2_wyFnBOLrUjLxtJfO6Q@mail.gmail.com>

+1 on adding geometry generators as a bullet point.

I was thinking that aside from the screenshot/images, we can also add links
directly to the bullet points that would send readers/users to a good
resource discussing that bullet point/feature. There are already quite a
number of good resources (e.g. videos and blog posts by the community --
videos and posts by Klas, Anita, Nyall, Tim, etc. -- as well as the
official documentation) discussing some of the features we want to
highlight. Might be good to have those on the README as well.

All the best,
Ben Hur
---
*Ben Hur S. Pintor | BNHR <https://bnhr.xyz>*
bnhr.xyz
hi at bnhr.xyz






On Tue, Feb 23, 2021 at 7:34 PM Jorge Gustavo Rocha <jgr at di.uminho.pt>
wrote:

> Hi all,
>
> Nice work, Martin!
>
> Yes, the text itself and the images are not properly formatted.
>
> Right now the goal is to validate and improve the structure and the key
> arguments, as I understand. Afterwards, images can be improved and
> properly formatted in  markdown.
>
> I think everyone can edit this proposal in place, to submit improvements
> as a PR. Matthias already did it. My contribution just landed there.
>
> https://github.com/Houska1/QGIS/edit/README-md-update/README.md
>
> Regards,
>
> Jorge
>
> ?s 08:29 de 23/02/21, JD L escreveu:
> > Hi Martin,
> > I have the impression that it's not suitable for small screen ? Do you
> > confirm ?
> >
> >
> > Le mar. 23 f?vr. 2021 ? 09:08, Tyler Eshelman <teshelman.gci at gmail.com
> > <mailto:teshelman.gci at gmail.com>> a ?crit :
> >
> >     Hello everyone,
> >
> >     This is my first time replying to these emails since joining the
> >     QGIS development list.
> >     Besides the landing page, are there any other beginner tasks that
> >     you have in mind for someone to begin contributing to this project?
> >
> >     Please let me know when you have a moment free.
> >
> >     Respectfully,
> >
> >     Tyler
> >
> >     ?
> >
> >     On Mon, Feb 22, 2021 at 6:54 PM Martin Pergler <pergler at gmail.com
> >     <mailto:pergler at gmail.com>> wrote:
> >
> >         As per the thread last week, with the help of Jorge Gustavo
> >         Rocha (regarding
> >         server) and Ben Hur Pintor, I've taken a first crack at revising
> >         the Github
> >         landing page to be more exciting, up-to-date, and visual.
> >
> >         The current draft is at
> >         https://github.com/Houska1/QGIS/blob/README-md-update/README.md;
> all
> >         comments welcome (here, there, or by email to pergler at gmail.com
> >         <mailto:pergler at gmail.com>).
> >
> >         At this stage, I'd love to get buy in on the overall structure,
> >         and the
> >         choice of the 5 high-level points under Features. We can then
> >         hunt for
> >         better illustrations for each -- right now, I grabbed something
> >         from the
> >         user manual or qgis.org <http://qgis.org> gallery for each one,
> >         but we can probably do better.
> >         Might even make sense to make something custom at a better image
> >         size/resolution (but only once we're collectively happy we have
> >         the right
> >         points to illustrate...).
> >
> >         Cheers,
> >         Martin
> >
> >
> >
> >         --
> >         Sent from:
> >         http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> >         _______________________________________________
> >         QGIS-Developer mailing list
> >         QGIS-Developer at lists.osgeo.org
> >         <mailto:QGIS-Developer at lists.osgeo.org>
> >         List info:
> https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >         Unsubscribe:
> https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> >     _______________________________________________
> >     QGIS-Developer mailing list
> >     QGIS-Developer at lists.osgeo.org <mailto:
> QGIS-Developer at lists.osgeo.org>
> >     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> J. Gustavo
> --
> Jorge Gustavo Rocha
> Departamento de Inform?tica
> Universidade do Minho
> 4710-057 Braga
> Gabinete 3.29 (Piso 3)
> Tel: +351 253604480
> Fax: +351 253604471
> M?vel: +351 910333888
> skype: nabocudnosor
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210223/4836b878/attachment-0001.html>

From jef at norbit.de  Tue Feb 23 12:43:32 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 23 Feb 2021 21:43:32 +0100
Subject: [QGIS-Developer] [Qgis-user] [osgeo4w-dev] QGIS 3.18.0 and QGIS
 3.14.4 (LTR) packages released and OSGeo4W reboot
In-Reply-To: <CAEDrt3-Q_rX7RDV7=r+xr3LZ7QY9pGHKWp1t5u=fdyx_CS8dAQ@mail.gmail.com>
References: <20210223163648.n2a32ikknf5zanyc@norbit.de>
 <CAEDrt3-Q_rX7RDV7=r+xr3LZ7QY9pGHKWp1t5u=fdyx_CS8dAQ@mail.gmail.com>
Message-ID: <20210223204332.a7uohyngtegvfqrq@norbit.de>

Hi Idan,

On Tue, 23. Feb 2021 at 22:24:17 +0200, Idan Miara wrote:
> Thanks for all that great work!
> Are there any instructions on how to use the scripts to build the packages?

No.  Just some quick notes: you just need to set OSGEO4W_REP to where the local
package repository should be placed, goto src/$package/osgeo4w and run
package.sh from
a cygwin shell.
 
That should fetch the sources, possibly patch them, create a local osgeo4w
install with it's build dependency, build the sources, package them and upload
them (unless you set OSGEO4W_SKIP_UPLOAD).

There's no list of expected cygwin packages yet and no automated triggering of
rebuilds of reverse dependencies.  It also expects an installed version of
Visual C++ 2019 in "Program Files".  The mingw env for GRASS should be set up
automatically.


> Did you consider building a python gdal/proj package that could be
> installed on the normal python distribution as well as on OSGeo4W?

No.


J?rgen


-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210223/9c630304/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210223/9c630304/attachment.ksh>

From bayu at bkurniawan.com  Wed Feb 24 00:57:56 2021
From: bayu at bkurniawan.com (Bayu Kurniawan R)
Date: Wed, 24 Feb 2021 15:57:56 +0700
Subject: [QGIS-Developer] Add SuperMap iServer
Message-ID: <CAPB1LMo7XCHoX8SeCRpq=Tw_p8QG-xQGuJbpXq2AEK7zmTLX-w@mail.gmail.com>

Dear QGIS Community,


Has anybody used a Supermap GIS server yet (https://www.supermap.com/en-us/)
How to add SuperMap iServer rest service.

It's like ArcGIS REST service, but running on Supermap iServer.

-- 
Salam,
Bayu Kurniawan R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210224/c4ff0c3b/attachment.html>

From rdmailings at duif.net  Wed Feb 24 02:41:09 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 24 Feb 2021 11:41:09 +0100
Subject: [QGIS-Developer] Add SuperMap iServer
In-Reply-To: <CAPB1LMo7XCHoX8SeCRpq=Tw_p8QG-xQGuJbpXq2AEK7zmTLX-w@mail.gmail.com>
References: <CAPB1LMo7XCHoX8SeCRpq=Tw_p8QG-xQGuJbpXq2AEK7zmTLX-w@mail.gmail.com>
Message-ID: <20306acf-86b7-0d07-e71a-827e27da9a1c@duif.net>

On 2/24/21 9:57 AM, Bayu Kurniawan R wrote:
> Dear QGIS Community,
> 
> 
> Has anybody used a Supermap GIS server yet (https://www.supermap.com/en-us/ <https://www.supermap.com/en-us/>)
> How to add SuperMap iServer rest service.
> 
> It's like ArcGIS REST service, but running on Supermap iServer.

IF it is behaving as a ArcGIS REST service can you then not just use the ArcGIS REST provider/layers, menu:
Layer/ Add ArcGIS REST Server layer

Do you have some public url to test?

Regards,

Richard Duivenvoorde


From prem.netgis at gmail.com  Wed Feb 24 09:28:27 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Wed, 24 Feb 2021 22:58:27 +0530
Subject: [QGIS-Developer] REST API for QGIS processing tool
Message-ID: <CAP2_p62n-Cy0ed-YLiFvuZvq+YW3QTR7fe9BjiyLvAGXaARx-A@mail.gmail.com>

Dear Community team,

Off late, I have written a custom processing tool in QGIS which works
perfectly fine in QGIS application. I am wondering if there is any better
way to expose the qgis processing tool over REST API so that I can use it
in my front end map? Kind of geoprocessing service REST API.

Any leads would be appreciated, thank you.

-Prem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210224/b8445c2b/attachment.html>

From nyall.dawson at gmail.com  Wed Feb 24 14:27:32 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 25 Feb 2021 08:27:32 +1000
Subject: [QGIS-Developer] REST API for QGIS processing tool
In-Reply-To: <CAP2_p62n-Cy0ed-YLiFvuZvq+YW3QTR7fe9BjiyLvAGXaARx-A@mail.gmail.com>
References: <CAP2_p62n-Cy0ed-YLiFvuZvq+YW3QTR7fe9BjiyLvAGXaARx-A@mail.gmail.com>
Message-ID: <CAB28AsgYQHoDUainjPizAyS6fMf_H5gKm=8FwAfQrdMsB+14Xw@mail.gmail.com>

On Thu, 25 Feb 2021 at 03:28, Prem Kumar <prem.netgis at gmail.com> wrote:
>
> Dear Community team,
>
> Off late, I have written a custom processing tool in QGIS which works perfectly fine in QGIS application. I am wondering if there is any better way to expose the qgis processing tool over REST API so that I can use it in my front end map? Kind of geoprocessing service REST API.
>
> Any leads would be appreciated, thank you.

Look into the "WPS" standard. There's even an existing server for
this: https://github.com/3liz/py-qgis-wps

Nyall




>
> -Prem
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Wed Feb 24 14:36:51 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 25 Feb 2021 08:36:51 +1000
Subject: [QGIS-Developer] Add SuperMap iServer
In-Reply-To: <20306acf-86b7-0d07-e71a-827e27da9a1c@duif.net>
References: <CAPB1LMo7XCHoX8SeCRpq=Tw_p8QG-xQGuJbpXq2AEK7zmTLX-w@mail.gmail.com>
 <20306acf-86b7-0d07-e71a-827e27da9a1c@duif.net>
Message-ID: <CAB28AsjZp98harfX1=JoCOxorVVE0cPSvV5AckntcDupWKVK6A@mail.gmail.com>

On Wed, 24 Feb 2021 at 20:41, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> On 2/24/21 9:57 AM, Bayu Kurniawan R wrote:
> > Dear QGIS Community,
> >
> >
> > Has anybody used a Supermap GIS server yet (https://www.supermap.com/en-us/ <https://www.supermap.com/en-us/>)
> > How to add SuperMap iServer rest service.
> >
> > It's like ArcGIS REST service, but running on Supermap iServer.
>
> IF it is behaving as a ArcGIS REST service can you then not just use the ArcGIS REST provider/layers, menu:
> Layer/ Add ArcGIS REST Server layer

It's not -- it's only "like" an ArcGIS rest server in that it returns json :P

This isn't a trivial change, and would require some time to develop. I
can confidently state it won't be implemented by any of the current
QGIS core developers without financial sponsorship. Bayu -- if you
have a strong need to access these servers through QGIS, your best
approach is to either fund this work or develop it yourself. If you go
with the "develop it yourself" approach, you'll find that the QGIS
developers are very helpful and willing to assist, so long as you show
some initiative in learning QGIS development practices, the QGIS API,
and show a commitment to maintain your code!

Kind regards,
Nyall

>
> Do you have some public url to test?
>
> Regards,
>
> Richard Duivenvoorde
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From bayu at bkurniawan.com  Wed Feb 24 20:15:37 2021
From: bayu at bkurniawan.com (Bayu Kurniawan R)
Date: Thu, 25 Feb 2021 11:15:37 +0700
Subject: [QGIS-Developer] Add SuperMap iServer
In-Reply-To: <CAB28AsjZp98harfX1=JoCOxorVVE0cPSvV5AckntcDupWKVK6A@mail.gmail.com>
References: <CAPB1LMo7XCHoX8SeCRpq=Tw_p8QG-xQGuJbpXq2AEK7zmTLX-w@mail.gmail.com>
 <20306acf-86b7-0d07-e71a-827e27da9a1c@duif.net>
 <CAB28AsjZp98harfX1=JoCOxorVVE0cPSvV5AckntcDupWKVK6A@mail.gmail.com>
Message-ID: <CAPB1LMpgqGAmJERhHQVoo_vtASfcEYVFWgRTHxqUcB6-g402Bw@mail.gmail.com>

OK Nyall, I'm not urgent to use SuperMap iServer with QGIS.
I Hope that Supermap develops on QGIS later.

For example iServer map service you can see in :
https://iclient.supermap.io/en/examples/mapboxgl/examples.html#iServer-map

On Thu, Feb 25, 2021 at 5:37 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Wed, 24 Feb 2021 at 20:41, Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
> >
> > On 2/24/21 9:57 AM, Bayu Kurniawan R wrote:
> > > Dear QGIS Community,
> > >
> > >
> > > Has anybody used a Supermap GIS server yet (
> https://www.supermap.com/en-us/ <https://www.supermap.com/en-us/>)
> > > How to add SuperMap iServer rest service.
> > >
> > > It's like ArcGIS REST service, but running on Supermap iServer.
> >
> > IF it is behaving as a ArcGIS REST service can you then not just use the
> ArcGIS REST provider/layers, menu:
> > Layer/ Add ArcGIS REST Server layer
>
> It's not -- it's only "like" an ArcGIS rest server in that it returns json
> :P
>
> This isn't a trivial change, and would require some time to develop. I
> can confidently state it won't be implemented by any of the current
> QGIS core developers without financial sponsorship. Bayu -- if you
> have a strong need to access these servers through QGIS, your best
> approach is to either fund this work or develop it yourself. If you go
> with the "develop it yourself" approach, you'll find that the QGIS
> developers are very helpful and willing to assist, so long as you show
> some initiative in learning QGIS development practices, the QGIS API,
> and show a commitment to maintain your code!
>
> Kind regards,
> Nyall
>
> >
> > Do you have some public url to test?
> >
> > Regards,
> >
> > Richard Duivenvoorde
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Salam,
Bayu Kurniawan R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210225/37396ab9/attachment.html>

From cavallini at faunalia.it  Wed Feb 24 21:41:33 2021
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 25 Feb 2021 06:41:33 +0100
Subject: [QGIS-Developer] Test project configuration
Message-ID: <a591347d-7643-c2ba-bf8c-e307945c2413@faunalia.it>

Hi all,
the test of the project properties fails in one case, because of the
layer name (from QuickMapServices): Sputnik Map
Renaming to `Background` makes the test happy, but I fail to understand
what's wrong with the original name.
Cheers.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From rdmailings at duif.net  Thu Feb 25 00:59:00 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 25 Feb 2021 09:59:00 +0100
Subject: [QGIS-Developer] Add SuperMap iServer
In-Reply-To: <CAPB1LMpgqGAmJERhHQVoo_vtASfcEYVFWgRTHxqUcB6-g402Bw@mail.gmail.com>
References: <CAPB1LMo7XCHoX8SeCRpq=Tw_p8QG-xQGuJbpXq2AEK7zmTLX-w@mail.gmail.com>
 <20306acf-86b7-0d07-e71a-827e27da9a1c@duif.net>
 <CAB28AsjZp98harfX1=JoCOxorVVE0cPSvV5AckntcDupWKVK6A@mail.gmail.com>
 <CAPB1LMpgqGAmJERhHQVoo_vtASfcEYVFWgRTHxqUcB6-g402Bw@mail.gmail.com>
Message-ID: <b3b2530c-ef50-5c27-329c-7be1c05339b7@duif.net>

On 2/25/21 5:15 AM, Bayu Kurniawan R wrote:
> OK Nyall, I'm not urgent to use SuperMap iServer with QGIS.
> I Hope that Supermap develops on QGIS later.

Uh... but Supermap is a QGIS-clone ( ;-) ) isn't it?
As in: it's not in there interest to develop this for alternative Desktop gis's?

Would it not be better to ask Supermap to serve Open/Standard api's instead of (copies of) proprietary ones?

Regards,

Richard Duivenvoorde

PS: looking at the Python console: https://www.supermap.com/en-us/news/?82_663.html
wondering who learned from who :-)

From matteo.ghetta at gmail.com  Thu Feb 25 02:59:08 2021
From: matteo.ghetta at gmail.com (matteo)
Date: Thu, 25 Feb 2021 11:59:08 +0100
Subject: [QGIS-Developer] QGIS Blog website down
Message-ID: <06c82810-0185-6906-833d-579d16dedd17@gmail.com>

Hi all,

just to report that https://blog.qgis.org/ gives a timeout

Cheers

Matteo

From anitagraser at gmx.at  Thu Feb 25 03:01:03 2021
From: anitagraser at gmx.at (Anita Graser)
Date: Thu, 25 Feb 2021 12:01:03 +0100
Subject: [QGIS-Developer] QGIS Blog website down
In-Reply-To: <06c82810-0185-6906-833d-579d16dedd17@gmail.com>
References: <06c82810-0185-6906-833d-579d16dedd17@gmail.com>
Message-ID: <186a9b62-1f1c-6931-afd0-ff494d39b8f1@gmx.at>

Hi Matteo,

I cannot confirm any issues.

https://downforeveryoneorjustme.com/blog.qgis.org?proto=https

Regards,

Anita


On 25.02.2021 11:59, matteo wrote:
> Hi all,
>
> just to report that https://blog.qgis.org/ gives a timeout
>
> Cheers
>
> Matteo
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From matteo.ghetta at gmail.com  Thu Feb 25 03:11:07 2021
From: matteo.ghetta at gmail.com (matteo)
Date: Thu, 25 Feb 2021 12:11:07 +0100
Subject: [QGIS-Developer] QGIS Blog website down
In-Reply-To: <186a9b62-1f1c-6931-afd0-ff494d39b8f1@gmx.at>
References: <06c82810-0185-6906-833d-579d16dedd17@gmail.com>
 <186a9b62-1f1c-6931-afd0-ff494d39b8f1@gmx.at>
Message-ID: <c6cd393c-3123-d479-4420-e597ae38ab50@gmail.com>

weird... on firefox I get a timeout while on chromium not

thanks for checking Anita

Matteo

From rldhont at gmail.com  Thu Feb 25 05:28:39 2021
From: rldhont at gmail.com (=?UTF-8?Q?Ren=c3=a9-Luc_Dhont?=)
Date: Thu, 25 Feb 2021 14:28:39 +0100
Subject: [QGIS-Developer] REST API for QGIS processing tool
In-Reply-To: <CAB28AsgYQHoDUainjPizAyS6fMf_H5gKm=8FwAfQrdMsB+14Xw@mail.gmail.com>
References: <CAP2_p62n-Cy0ed-YLiFvuZvq+YW3QTR7fe9BjiyLvAGXaARx-A@mail.gmail.com>
 <CAB28AsgYQHoDUainjPizAyS6fMf_H5gKm=8FwAfQrdMsB+14Xw@mail.gmail.com>
Message-ID: <c13a3030-4111-0f4a-93b6-482335a81d86@gmail.com>


Le 24/02/2021 ? 23:27, Nyall Dawson a ?crit?:
>
> Look into the "WPS" standard. There's even an existing server for
> this: https://github.com/3liz/py-qgis-wps

Thanks Nyall to pointing it.

Prem, If you are interested in a REST API, implementing the OGC API 
Processes standard is? being considered for py-qgis-wps
* https://github.com/opengeospatial/ogcapi-processes/
* https://ogcapi.ogc.org/processes/

py-qgis-wps is based on Tornado and any contributions are welcome.
https://github.com/3liz/py-qgis-wps

Ren?-Luc

>
> Nyall
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From prem.netgis at gmail.com  Thu Feb 25 06:14:44 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Thu, 25 Feb 2021 19:44:44 +0530
Subject: [QGIS-Developer] REST API for QGIS processing tool
In-Reply-To: <c13a3030-4111-0f4a-93b6-482335a81d86@gmail.com>
References: <CAP2_p62n-Cy0ed-YLiFvuZvq+YW3QTR7fe9BjiyLvAGXaARx-A@mail.gmail.com>
 <CAB28AsgYQHoDUainjPizAyS6fMf_H5gKm=8FwAfQrdMsB+14Xw@mail.gmail.com>
 <c13a3030-4111-0f4a-93b6-482335a81d86@gmail.com>
Message-ID: <CAP2_p61EivrnUOYWvH1xGjpB5eph8w8o666cNsX3=VjT1bSmMw@mail.gmail.com>

HI Nyall and Ren?-Luc,

Thank you very much for the pointers, much appreciated. Looks to me, a lot
to learn some good stuff. Will let you know how it goes.

-Prem

On Thu, Feb 25, 2021 at 6:59 PM Ren?-Luc Dhont <rldhont at gmail.com> wrote:

>
> Le 24/02/2021 ? 23:27, Nyall Dawson a ?crit :
> >
> > Look into the "WPS" standard. There's even an existing server for
> > this: https://github.com/3liz/py-qgis-wps
>
> Thanks Nyall to pointing it.
>
> Prem, If you are interested in a REST API, implementing the OGC API
> Processes standard is  being considered for py-qgis-wps
> * https://github.com/opengeospatial/ogcapi-processes/
> * https://ogcapi.ogc.org/processes/
>
> py-qgis-wps is based on Tornado and any contributions are welcome.
> https://github.com/3liz/py-qgis-wps
>
> Ren?-Luc
>
> >
> > Nyall
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210225/b0e7af78/attachment.html>

From TurboGraphxBeige at runbox.com  Thu Feb 25 07:15:04 2021
From: TurboGraphxBeige at runbox.com (TurboGraphxBeige)
Date: Thu, 25 Feb 2021 15:15:04 +0000
Subject: [QGIS-Developer] Missing digital signature on the new Windows
 3.18.0 build?
Message-ID: <3f59565b6567bd419d2e09e45b0f178c@runbox.com>

Hello!

I think something's a bit wrong with the new 3.18.0 Windows build. My antivirus is reacting quite a lot. It seems that the executables don't have a digital signature so the antivirus don't trust them. It never occured before so unless my antivirus started acting funny on its own overnight, I would say that it's something that requires the packagers attention.

I installed using the OSGeo4W network installer if that matters.
Patrice Pineault
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210225/3daa02e1/attachment.html>

From rdmailings at duif.net  Thu Feb 25 11:24:49 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 25 Feb 2021 20:24:49 +0100
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
 <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
Message-ID: <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>

On 2/13/21 8:01 PM, pathmapper wrote:
> Hi,
> 
> here's a related thread (i.e. xyz tiles, but I guess it's also valid vor wms):
> https://github.com/qgis/QGIS/issues/34813
> 
> Some quotes:
> "QGIS renders the surrounding areas in a background job to make subsequent pan actions faster. Therefore it sends more tile requests than necessary for the current map extent."
> 
> "Btw, we now have the code in place to fine-tune prefetching behavior for all raster layers on a per-layer basis, for now I just blacklisted osm tiles."
> 
> It sounds like the plan is to make the prefetching behavior configurable via QGIS settings.

See https://github.com/qgis/QGIS/pull/41832 to prevent prefetching for true WMS's...

Now I like to have some input indeed making prefetching behaviour more configurable:

- where to put a checkbox/setting about prefetching tiles (global raster, or per wms service or just global, or a hidden setting)?
- what to make default (with or without prefetching...?)

My first idea:
- add a checkbox "Prefetch surrounding WMS(T) images" in the WMS/WMTS Connection dialog in the 'WMS/WMTS Options' section; default FALSE (unless see below)
- In General Options / Network / Cache Settings add a  tab or just a checkbox with "Default prefetch WMS(T) images" (defaulting to FALSE, but if enabled the above mentioned checkbox will always be enabled too)
- also make this an option in the provider uri 

Input?

Regards,

Richard Duivenvoorde

From jmckenna at gatewaygeomatics.com  Thu Feb 25 11:38:43 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 25 Feb 2021 15:38:43 -0400
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
 <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
 <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>
Message-ID: <5a26ce2c-524b-707a-a84b-515f7938b810@gatewaygeomatics.com>

On 2021-02-25 3:24 p.m., Richard Duivenvoorde wrote:
> On 2/13/21 8:01 PM, pathmapper wrote:
>> Hi,
>>
>> here's a related thread (i.e. xyz tiles, but I guess it's also valid vor wms):
>> https://github.com/qgis/QGIS/issues/34813
>>
>> Some quotes:
>> "QGIS renders the surrounding areas in a background job to make subsequent pan actions faster. Therefore it sends more tile requests than necessary for the current map extent."
>>
>> "Btw, we now have the code in place to fine-tune prefetching behavior for all raster layers on a per-layer basis, for now I just blacklisted osm tiles."
>>
>> It sounds like the plan is to make the prefetching behavior configurable via QGIS settings.
> 
> See https://github.com/qgis/QGIS/pull/41832 to prevent prefetching for true WMS's...
> 
> Now I like to have some input indeed making prefetching behaviour more configurable:
> 
> - where to put a checkbox/setting about prefetching tiles (global raster, or per wms service or just global, or a hidden setting)?
> - what to make default (with or without prefetching...?)
> 
> My first idea:
> - add a checkbox "Prefetch surrounding WMS(T) images" in the WMS/WMTS Connection dialog in the 'WMS/WMTS Options' section; default FALSE (unless see below)
> - In General Options / Network / Cache Settings add a  tab or just a checkbox with "Default prefetch WMS(T) images" (defaulting to FALSE, but if enabled the above mentioned checkbox will always be enabled too)
> - also make this an option in the provider uri

I really like that Richard, since I am always in the 
Settings/Options/CacheSettings to clear my cache anyway (as I am 
constantly changing already-parsed WMS services), having a checkbox in 
the "Content" tab of "Default prefetch WMS(T) images" (default to false) 
makes sense.

I also like having a checkbox in the WMS/WMTS dialog, in the 'Options' 
section near bottom, defaulting to false.

(so I'm in total agreement to both your proposals, ha)

Big thanks from the east coast of Canada!

-jeff


-- 
Jeff McKenna
GatewayGeo: MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/







From nyall.dawson at gmail.com  Thu Feb 25 14:48:09 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 26 Feb 2021 08:48:09 +1000
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
 <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
 <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>
Message-ID: <CAB28AsiooHfpvgsRb2pBGiE2Zd=HC4Ta5Sx1dTs9e03OKyG4=w@mail.gmail.com>

On Fri, 26 Feb 2021 at 05:25, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> On 2/13/21 8:01 PM, pathmapper wrote:
> > Hi,
> >
> > here's a related thread (i.e. xyz tiles, but I guess it's also valid vor wms):
> > https://github.com/qgis/QGIS/issues/34813
> >
> > Some quotes:
> > "QGIS renders the surrounding areas in a background job to make subsequent pan actions faster. Therefore it sends more tile requests than necessary for the current map extent."
> >
> > "Btw, we now have the code in place to fine-tune prefetching behavior for all raster layers on a per-layer basis, for now I just blacklisted osm tiles."
> >
> > It sounds like the plan is to make the prefetching behavior configurable via QGIS settings.
>
> See https://github.com/qgis/QGIS/pull/41832 to prevent prefetching for true WMS's...
>
> Now I like to have some input indeed making prefetching behaviour more configurable:
>
> - where to put a checkbox/setting about prefetching tiles (global raster, or per wms service or just global, or a hidden setting)?
> - what to make default (with or without prefetching...?)
>
> My first idea:
> - add a checkbox "Prefetch surrounding WMS(T) images" in the WMS/WMTS Connection dialog in the 'WMS/WMTS Options' section; default FALSE (unless see below)
> - In General Options / Network / Cache Settings add a  tab or just a checkbox with "Default prefetch WMS(T) images" (defaulting to FALSE, but if enabled the above mentioned checkbox will always be enabled too)
> - also make this an option in the provider uri


Question: Do we REALLY need an option for this? I think the behavior
after your recent PR is correct, in that we ALWAYS skip the prefetch
for WMS. I don't think there's a strong enough use case that someone
would want to enable this to warrant a new option (and the
corresponding UI complexity and code maintainence burden that comes
with a configurable option).

Nyall

From nyall.dawson at gmail.com  Thu Feb 25 14:49:52 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 26 Feb 2021 08:49:52 +1000
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <5a26ce2c-524b-707a-a84b-515f7938b810@gatewaygeomatics.com>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
 <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
 <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>
 <5a26ce2c-524b-707a-a84b-515f7938b810@gatewaygeomatics.com>
Message-ID: <CAB28Asih0KtXUwcBrP9AEF1PGqaZ2T0oDmVS-aC6in94D_AdOw@mail.gmail.com>

On Fri, 26 Feb 2021 at 05:48, Jeff McKenna
<jmckenna at gatewaygeomatics.com> wrote:
>

> I really like that Richard, since I am always in the
> Settings/Options/CacheSettings to clear my cache anyway (as I am
> constantly changing already-parsed WMS services), having a checkbox in
> the "Content" tab of "Default prefetch WMS(T) images" (default to false)
> makes sense.


Not sure if you're aware of this, but in 3.18 if you open the network
logger panel via F12 there's a new option "disable cache" which will
cause ALL requests to skip existing cached replies. It's intended to
help with the exact use case you describe!

Nyall


>
> I also like having a checkbox in the WMS/WMTS dialog, in the 'Options'
> section near bottom, defaulting to false.
>
> (so I'm in total agreement to both your proposals, ha)
>
> Big thanks from the east coast of Canada!
>
> -jeff
>
>
> --
> Jeff McKenna
> GatewayGeo: MapServer Consulting and Training Services
> co-founder of FOSS4G
> http://gatewaygeo.com/
>
>
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Thu Feb 25 14:53:33 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 26 Feb 2021 08:53:33 +1000
Subject: [QGIS-Developer] Add SuperMap iServer
In-Reply-To: <b3b2530c-ef50-5c27-329c-7be1c05339b7@duif.net>
References: <CAPB1LMo7XCHoX8SeCRpq=Tw_p8QG-xQGuJbpXq2AEK7zmTLX-w@mail.gmail.com>
 <20306acf-86b7-0d07-e71a-827e27da9a1c@duif.net>
 <CAB28AsjZp98harfX1=JoCOxorVVE0cPSvV5AckntcDupWKVK6A@mail.gmail.com>
 <CAPB1LMpgqGAmJERhHQVoo_vtASfcEYVFWgRTHxqUcB6-g402Bw@mail.gmail.com>
 <b3b2530c-ef50-5c27-329c-7be1c05339b7@duif.net>
Message-ID: <CAB28Asgai8V_MOAfJUzoFT=BBx+54RkXCkBK-Y_aNQAXPLK22w@mail.gmail.com>

On Thu, 25 Feb 2021 at 18:59, Richard Duivenvoorde <rdmailings at duif.net> wrote:

> PS: looking at the Python console: https://www.supermap.com/en-us/news/?82_663.html
> wondering who learned from who :-)

Honestly, I strongly suspect that the extent of the copying goes a lot
deeper than the UI alone, and that there's likely a lot of supermap
code "heavily influenced" by QGIS/GDAL/other open source project code
;)

Nyall

From nyall.dawson at gmail.com  Thu Feb 25 23:11:19 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 26 Feb 2021 17:11:19 +1000
Subject: [QGIS-Developer] Temporary hold on merges please!
Message-ID: <CAB28AsijLNKNTKr_Xc2FCLdJp1zn34cUUg17=PO3C3OWuSP2sA@mail.gmail.com>

Hi all,

Please don't merge any code to the QGIS repos right now -- we've
identified an issue in the new CI setup which is causing some tests to
report passing results when the test actually should be failing. Until
we resolve this we can't be certain that code isn't breaking things,
so PLEASE do NOT merge anything until further notice!!

Nyall

From rdmailings at duif.net  Fri Feb 26 00:53:15 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 26 Feb 2021 09:53:15 +0100
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <CAB28Asih0KtXUwcBrP9AEF1PGqaZ2T0oDmVS-aC6in94D_AdOw@mail.gmail.com>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
 <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
 <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>
 <5a26ce2c-524b-707a-a84b-515f7938b810@gatewaygeomatics.com>
 <CAB28Asih0KtXUwcBrP9AEF1PGqaZ2T0oDmVS-aC6in94D_AdOw@mail.gmail.com>
Message-ID: <ce28bd9d-c0a8-562e-1552-b5a7d0a943ac@duif.net>

On 2/25/21 11:49 PM, Nyall Dawson wrote:
> On Fri, 26 Feb 2021 at 05:48, Jeff McKenna
> <jmckenna at gatewaygeomatics.com> wrote:
>>
>> I really like that Richard, since I am always in the
>> Settings/Options/CacheSettings to clear my cache anyway (as I am
>> constantly changing already-parsed WMS services), having a checkbox in
>> the "Content" tab of "Default prefetch WMS(T) images" (default to false)
>> makes sense.
> 
> Not sure if you're aware of this, but in 3.18 if you open the network
> logger panel via F12 there's a new option "disable cache" which will
> cause ALL requests to skip existing cached replies. It's intended to
> help with the exact use case you describe!

Thanks Nyall, 

indeed I also want to make sure (to Jeff) that the 'caching' and 'prefetching' thing is related but different beasts.
If you want to disable cache at all: 'disable cache', the PR is was speaking about was about prefetching surrounding mapcanvas images for WMS's.

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Fri Feb 26 01:35:38 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 26 Feb 2021 10:35:38 +0100
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <CAB28AsiooHfpvgsRb2pBGiE2Zd=HC4Ta5Sx1dTs9e03OKyG4=w@mail.gmail.com>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
 <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
 <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>
 <CAB28AsiooHfpvgsRb2pBGiE2Zd=HC4Ta5Sx1dTs9e03OKyG4=w@mail.gmail.com>
Message-ID: <e6355624-6079-f36a-6f9d-9065e26bb656@duif.net>

On 2/25/21 11:48 PM, Nyall Dawson wrote:
> On Fri, 26 Feb 2021 at 05:25, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>> Now I like to have some input indeed making prefetching behaviour more configurable:
>>
>> - where to put a checkbox/setting about prefetching tiles (global raster, or per wms service or just global, or a hidden setting)?
>> - what to make default (with or without prefetching...?)
>>
>> My first idea:
>> - add a checkbox "Prefetch surrounding WMS(T) images" in the WMS/WMTS Connection dialog in the 'WMS/WMTS Options' section; default FALSE (unless see below)
>> - In General Options / Network / Cache Settings add a  tab or just a checkbox with "Default prefetch WMS(T) images" (defaulting to FALSE, but if enabled the above mentioned checkbox will always be enabled too)
>> - also make this an option in the provider uri
> 
> Question: Do we REALLY need an option for this? I think the behavior
> after your recent PR is correct, in that we ALWAYS skip the prefetch
> for WMS. I don't think there's a strong enough use case that someone
> would want to enable this to warrant a new option (and the
> corresponding UI complexity and code maintainence burden that comes
> with a configurable option).

Hi Nyall, 

do you mean only WMS or do you mean all (tiled) services available in the qgswmsprovider.cpp?

So actually disable Capability::Prefetch for the wmsprovider?
https://github.com/qgis/QGIS/blob/master/src/providers/wms/qgswmsprovider.cpp#L2018

Or were you only agreeing with WMS?

Because the real world cases are the ones like OpenStreetMap (who is already 'fixed' by Ale), but also in The Netherland where we have/had 'free' WMST services for Aerials and Topo (and several other services), but because of the super heavy load of these free services, they start to go away from the 'free' and want you to pay for a number of requests.
Besides this: (tile) resources do not come for free, they cost bandwidth/energy/computer power etc etc

As said, I haven't checked WMTS precisely (I did for WMS) but try:
https://geodata.nationaalgeoregister.nl/wmts?VERSION=1.0.0&request=GetCapabilities
and open the layer 'opentopo'.

For my mapcanvas of 1000x1000 pixels (theoretically 4x4=16 tiles of 256x256pixels, but say 6x6=36). 
If I zoom in I fire a >176 requests.
I would be Ok to have no prefetching at all for services, just to save the earth a little :-)

I agree that 'polluting' the interface with options is a good argument. An option then would be to make it a hidden/advanced setting, which I can disable (or others have to enable... how user/environmental friendly do we want to be).

Regards,

Richard Duivenvoorde

From olivier.dalang at gmail.com  Fri Feb 26 01:50:18 2021
From: olivier.dalang at gmail.com (Olivier Dalang)
Date: Fri, 26 Feb 2021 10:50:18 +0100
Subject: [QGIS-Developer] PIP for plugins - Request for comments (QGIS
 grants)
Message-ID: <CAExk7p39EnQo8WOJb82VfvKwV1wOcf8fgVXz+W0s6z+e4MjRuw@mail.gmail.com>

Dear List,

I am planning to apply for the QGIS Grants with a proposal to support PIP
dependencies for QGIS plugins.

The goal is to solve the difficulty for a QGIS plugin to depend on an
existing python library. This results in QGIS plugins missing a lot of the
great features offered by the many existing python libraries, or in trouble
for users when using some plugins.

The proposal is described in more details in this QEP :
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/202

In two words :
- pip dependencies could be declared by plugins (to be determined if in
metadata.txt or in requirements.txt, if you have a preference please
comment on the QEP)
- upon installation, user would be asked if he/she wants to install them
- dependencies would be installed in a per-profile virtual environment,
allowing to keep profiles isolated
- a new tab in the plugin manager would show the currently installed
dependencies, and highlight potential conflicts if any.

I'd love to hear your ideas/opinions/comments so I can improve the proposal
before submitting it (ideally on the QEP directly).

Kind regards,

Olivier (@opengis.ch)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210226/244493b3/attachment-0001.html>

From damiano at opengis.ch  Fri Feb 26 02:50:38 2021
From: damiano at opengis.ch (Damiano Lombardi)
Date: Fri, 26 Feb 2021 11:50:38 +0100
Subject: [QGIS-Developer] Nice to meet you
Message-ID: <dfb3d106-25cd-4a6c-199e-6137d6a0c726@opengis.ch>

Dear QGIS developers,

My name is Damiano Lombardi and since the beginning of February I 
started working for OpenGIS.ch and making some contributions to QGIS. I 
am very exited about working on this amazing project with people from 
all over the world!

In the last eight years I programmed machine vision applications for 
robots in the pharmaceutical industry. I mainly developed using C++ and 
Qt on Windows and embedded Linux platforms. I don't have experience with 
GIS software but I am happy to learn something new!

When not programming I like to go snowboarding on the slopes of my home 
town Airolo in the middle of the alps. The rest of the time I am the 
father of two young children.

Tank you in advance for the work together an kind regards
Damiano

From andreaerdna at libero.it  Fri Feb 26 03:03:20 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 26 Feb 2021 04:03:20 -0700 (MST)
Subject: [QGIS-Developer] API Down?
In-Reply-To: <019301d7094c$bb810bc0$32832340$@shaeffer.co>
References: <019301d7094c$bb810bc0$32832340$@shaeffer.co>
Message-ID: <1614337400308-0.post@n6.nabble.com>

James Shaeffer wrote
> Just noticed that https://qgis.org/api/ doesn't appear to be working.

It seems the page at https://qgis.org/api/ is still empty

****
QGIS API Documentation  3.19.0-Master (67c226385a)

QGIS API Documentation Documentation
Generated on Tue Feb 23 2021 06:36:58 for QGIS API Documentation by doxygen
1.8.13
****

and the "Search" functionality doesn't return anything.

Any class subpage of https://qgis.org/api/ like
https://www.qgis.org/api/classQgsGeometry.html displays the 3.17 API instead
of 3.19 one

QGIS API Documentation  3.17.0-Master (eba9ffa46e)

List of all members
QgsGeometry Class Reference

...

Generated on Tue Feb 16 2021 21:03:40 for QGIS API Documentation by  
doxygen 1.8.13



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From regis.haubourg at gmail.com  Fri Feb 26 03:03:30 2021
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Fri, 26 Feb 2021 12:03:30 +0100
Subject: [QGIS-Developer] Nice to meet you
In-Reply-To: <dfb3d106-25cd-4a6c-199e-6137d6a0c726@opengis.ch>
References: <dfb3d106-25cd-4a6c-199e-6137d6a0c726@opengis.ch>
Message-ID: <CABgOYCfHrY4yTQt4TQ9=zuBAMbf2mNYw+LFK4kaFG_hKY6K1TQ@mail.gmail.com>

Hi Damiano,
welcome here!

And thanks a lot for taking some time to share who you are.
You will love GIS for sure ;-)

Bye
R?gis



Le ven. 26 f?vr. 2021 ? 11:50, Damiano Lombardi <damiano at opengis.ch> a
?crit :

> Dear QGIS developers,
>
> My name is Damiano Lombardi and since the beginning of February I
> started working for OpenGIS.ch and making some contributions to QGIS. I
> am very exited about working on this amazing project with people from
> all over the world!
>
> In the last eight years I programmed machine vision applications for
> robots in the pharmaceutical industry. I mainly developed using C++ and
> Qt on Windows and embedded Linux platforms. I don't have experience with
> GIS software but I am happy to learn something new!
>
> When not programming I like to go snowboarding on the slopes of my home
> town Airolo in the middle of the alps. The rest of the time I am the
> father of two young children.
>
> Tank you in advance for the work together an kind regards
> Damiano
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210226/3203f3cf/attachment.html>

From bayu at bkurniawan.com  Fri Feb 26 04:26:59 2021
From: bayu at bkurniawan.com (Bayu Kurniawan R)
Date: Fri, 26 Feb 2021 19:26:59 +0700
Subject: [QGIS-Developer] Add SuperMap iServer
In-Reply-To: <CAB28Asgai8V_MOAfJUzoFT=BBx+54RkXCkBK-Y_aNQAXPLK22w@mail.gmail.com>
References: <CAPB1LMo7XCHoX8SeCRpq=Tw_p8QG-xQGuJbpXq2AEK7zmTLX-w@mail.gmail.com>
 <20306acf-86b7-0d07-e71a-827e27da9a1c@duif.net>
 <CAB28AsjZp98harfX1=JoCOxorVVE0cPSvV5AckntcDupWKVK6A@mail.gmail.com>
 <CAPB1LMpgqGAmJERhHQVoo_vtASfcEYVFWgRTHxqUcB6-g402Bw@mail.gmail.com>
 <b3b2530c-ef50-5c27-329c-7be1c05339b7@duif.net>
 <CAB28Asgai8V_MOAfJUzoFT=BBx+54RkXCkBK-Y_aNQAXPLK22w@mail.gmail.com>
Message-ID: <CAPB1LMrHmHTg7PDJjUMGrP+0U51RxoRQGF7NSGDv3PFnFzAQ1g@mail.gmail.com>

Wow... I don't know if SuperMap is copying from QGIS.
But SuperMap it's more like ESRI ArcGIS for sure but with lower price

On Fri, Feb 26, 2021 at 5:53 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Thu, 25 Feb 2021 at 18:59, Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
> > PS: looking at the Python console:
> https://www.supermap.com/en-us/news/?82_663.html
> > wondering who learned from who :-)
>
> Honestly, I strongly suspect that the extent of the copying goes a lot
> deeper than the UI alone, and that there's likely a lot of supermap
> code "heavily influenced" by QGIS/GDAL/other open source project code
> ;)
>
> Nyall
>


-- 
Salam,
Bayu Kurniawan R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210226/0e8e3133/attachment.html>

From apasotti at gmail.com  Fri Feb 26 04:34:22 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 26 Feb 2021 13:34:22 +0100
Subject: [QGIS-Developer] Nice to meet you
In-Reply-To: <dfb3d106-25cd-4a6c-199e-6137d6a0c726@opengis.ch>
References: <dfb3d106-25cd-4a6c-199e-6137d6a0c726@opengis.ch>
Message-ID: <CAL5Q673awro0+hUawen6CyXiHh=axjDsTB_vdEi1Lddfxrc80g@mail.gmail.com>

Welcome Damiano!



On Fri, Feb 26, 2021 at 11:50 AM Damiano Lombardi <damiano at opengis.ch> wrote:
>
> Dear QGIS developers,
>
> My name is Damiano Lombardi and since the beginning of February I
> started working for OpenGIS.ch and making some contributions to QGIS. I
> am very exited about working on this amazing project with people from
> all over the world!
>
> In the last eight years I programmed machine vision applications for
> robots in the pharmaceutical industry. I mainly developed using C++ and
> Qt on Windows and embedded Linux platforms. I don't have experience with
> GIS software but I am happy to learn something new!
>
> When not programming I like to go snowboarding on the slopes of my home
> town Airolo in the middle of the alps. The rest of the time I am the
> father of two young children.
>
> Tank you in advance for the work together an kind regards
> Damiano
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From jmckenna at gatewaygeomatics.com  Fri Feb 26 04:49:10 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 26 Feb 2021 08:49:10 -0400
Subject: [QGIS-Developer] QGIS WMS provider firing too many requests !?
In-Reply-To: <ce28bd9d-c0a8-562e-1552-b5a7d0a943ac@duif.net>
References: <2b8f9aca-d802-839b-9da8-2de96e96b8d1@duif.net>
 <f7ee0dd1-5340-eb84-e492-c6022f25c8b5@gatewaygeomatics.com>
 <0b5a26e7a6e37c6035c5ce7f1e0bd4df@posteo.de>
 <d7879272-d60d-fa12-b3c4-073b2cdc78fe@duif.net>
 <5a26ce2c-524b-707a-a84b-515f7938b810@gatewaygeomatics.com>
 <CAB28Asih0KtXUwcBrP9AEF1PGqaZ2T0oDmVS-aC6in94D_AdOw@mail.gmail.com>
 <ce28bd9d-c0a8-562e-1552-b5a7d0a943ac@duif.net>
Message-ID: <d6fb90bb-8b05-c6b1-6e2b-1c4799302ed7@gatewaygeomatics.com>

On 2021-02-26 4:53 a.m., Richard Duivenvoorde wrote:
> On 2/25/21 11:49 PM, Nyall Dawson wrote:
>> On Fri, 26 Feb 2021 at 05:48, Jeff McKenna
>> <jmckenna at gatewaygeomatics.com> wrote:
>>>
>>> I really like that Richard, since I am always in the
>>> Settings/Options/CacheSettings to clear my cache anyway (as I am
>>> constantly changing already-parsed WMS services), having a checkbox in
>>> the "Content" tab of "Default prefetch WMS(T) images" (default to false)
>>> makes sense.
>>
>> Not sure if you're aware of this, but in 3.18 if you open the network
>> logger panel via F12 there's a new option "disable cache" which will
>> cause ALL requests to skip existing cached replies. It's intended to
>> help with the exact use case you describe!
> 
> Thanks Nyall,
> 
> indeed I also want to make sure (to Jeff) that the 'caching' and 'prefetching' thing is related but different beasts.
> If you want to disable cache at all: 'disable cache', the PR is was speaking about was about prefetching surrounding mapcanvas images for WMS's.
> 
> Regards,
> 
> Richard Duivenvoorde
> 

Hi Richard,

I am aware that caching and prefetching are very different, I was just 
giving an example of accessing the settings.  Sorry to mention that, 
which caused so many responses.  Carry on :)

/me a humbled user

-jeff



-- 
Jeff McKenna
GatewayGeo: MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/

From giulio.fattori at tin.it  Fri Feb 26 05:12:22 2021
From: giulio.fattori at tin.it (Giulio Fattori)
Date: Fri, 26 Feb 2021 14:12:22 +0100
Subject: [QGIS-Developer] Georeferencer not working 3.18 and dev
Message-ID: <b7966373-5afd-1485-9c6e-06213cf5df29@tin.it>

Hi all,
for several days now the georeferencer has been crashing QGIS, both the 
dev and the 3.18, is there any hope of resolution?

Regards, Giulio

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210226/6a29406e/attachment-0001.html>

From alroyliz0 at gmail.com  Fri Feb 26 13:36:10 2021
From: alroyliz0 at gmail.com (Alexis R.L.)
Date: Fri, 26 Feb 2021 16:36:10 -0500
Subject: [QGIS-Developer] Georeferencer not working 3.18 and dev
In-Reply-To: <b7966373-5afd-1485-9c6e-06213cf5df29@tin.it>
References: <b7966373-5afd-1485-9c6e-06213cf5df29@tin.it>
Message-ID: <CAOM0XWBA0YUS1gd-avXg1-nPC2wqNJ8jwPMMua9o-SVWwXm1rg@mail.gmail.com>

Please test the most recent master, I think its fixed but a validation is
welcome.

Alex


Le ven. 26 f?vr. 2021 ? 08:12, Giulio Fattori <giulio.fattori at tin.it> a
?crit :

> Hi all,
> for several days now the georeferencer has been crashing QGIS, both the
> dev and the 3.18, is there any hope of resolution?
>
> Regards, Giulio
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210226/02d32957/attachment.html>

From nyall.dawson at gmail.com  Fri Feb 26 23:15:00 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 27 Feb 2021 17:15:00 +1000
Subject: [QGIS-Developer] Unscheduled 3.18.1 release?
Message-ID: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>

So..... 3.18.0 is unfortunately proving to be a bit of a dud, with numerous
critical issues including:

- georeferencer is broken: https://github.com/qgis/QGIS/issues/41770 (fixed
now)
- a crash in the layer properties for point cloud layers:
https://github.com/qgis/QGIS/issues/41722 (fixed now)
- Can't access rasters in geopackage through browser:
https://github.com/qgis/QGIS/issues/41860 (fixed now)
- Crash when exporting DXF files: https://github.com/qgis/QGIS/issues/41858
-- unfixed
- A crash when opening the properties of a raster layer:
https://github.com/qgis/QGIS/issues/41834 (possibly a plugin issue, but
more feedback is needed as it may be a widespread non-plugin issue (this
code was changed just prior to release))

I think the severity of the georefencer and DXF crashes alone should
warrant a speedy .1 release, given that they completely break some core GIS
functionality.

(I think we should also consider raising a user-friendly warning message
when a user tries to add a las or laz file and they don't have a pdal
enabled build, as we are seeing lots of confusion about this situation too).

What's everyone's thoughts? Should we cut an unscheduled 3.18.1 release
sometime next week after the DXF and raster properties crashes are fixed?

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210227/e3e70619/attachment.html>

From cavallini at faunalia.it  Fri Feb 26 23:33:50 2021
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 27 Feb 2021 08:33:50 +0100
Subject: [QGIS-Developer] Unscheduled 3.18.1 release?
In-Reply-To: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
Message-ID: <452e3a71-c9cd-d072-0646-26bddef3ef79@faunalia.it>

Hi Nyall,

Il 27/02/21 08:15, Nyall Dawson ha scritto:

> What's everyone's thoughts? Should we cut an unscheduled 3.18.1 release
> sometime next week after the DXF and raster properties crashes are fixed?

it makes sense to me.
thanks Nyall for raising this.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From nirvn.asia at gmail.com  Fri Feb 26 23:52:03 2021
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Sat, 27 Feb 2021 14:52:03 +0700
Subject: [QGIS-Developer] [Qgis-psc] Unscheduled 3.18.1 release?
In-Reply-To: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
Message-ID: <CAC_qv=pgmAjE9FxPSDHK-bC858BeHaLx+qVrUo6Ok2_QTD-Dng@mail.gmail.com>

Add the following to the list of serious issue:
- raster URIs using /vsi{zip,curl,etc.}/ won't load anymore:
https://github.com/qgis/QGIS/pull/41888 (fix PR open)

+1 to have an early .1 release.



On Sat, Feb 27, 2021 at 2:15 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> So..... 3.18.0 is unfortunately proving to be a bit of a dud, with
> numerous critical issues including:
>
> - georeferencer is broken: https://github.com/qgis/QGIS/issues/41770
> (fixed now)
> - a crash in the layer properties for point cloud layers:
> https://github.com/qgis/QGIS/issues/41722 (fixed now)
> - Can't access rasters in geopackage through browser:
> https://github.com/qgis/QGIS/issues/41860 (fixed now)
> - Crash when exporting DXF files:
> https://github.com/qgis/QGIS/issues/41858 -- unfixed
> - A crash when opening the properties of a raster layer:
> https://github.com/qgis/QGIS/issues/41834 (possibly a plugin issue, but
> more feedback is needed as it may be a widespread non-plugin issue (this
> code was changed just prior to release))
>
> I think the severity of the georefencer and DXF crashes alone should
> warrant a speedy .1 release, given that they completely break some core GIS
> functionality.
>
> (I think we should also consider raising a user-friendly warning message
> when a user tries to add a las or laz file and they don't have a pdal
> enabled build, as we are seeing lots of confusion about this situation too).
>
> What's everyone's thoughts? Should we cut an unscheduled 3.18.1 release
> sometime next week after the DXF and raster properties crashes are fixed?
>
> Nyall
>
>
>
>
>
>
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210227/87c31438/attachment.html>

From marco at qgis.org  Fri Feb 26 23:57:56 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Sat, 27 Feb 2021 08:57:56 +0100
Subject: [QGIS-Developer] [Qgis-psc] Unscheduled 3.18.1 release?
In-Reply-To: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
Message-ID: <CAB2ZMRAeBE88PrB0t+Q3vGi-zishRSVQ5090R-V9A6Qfsod4vA@mail.gmail.com>

hi Nyall thanks for rising this. indeed they are pretty serious issues.
I'd be +1 for releasing sooner than planned but I d like to have J?rgen
answer this definitively.

I also agree about warning for LAS Files.

Cheers Marco

On Sat, 27 Feb 2021, 08:15 Nyall Dawson, <nyall.dawson at gmail.com> wrote:

> So..... 3.18.0 is unfortunately proving to be a bit of a dud, with
> numerous critical issues including:
>
> - georeferencer is broken: https://github.com/qgis/QGIS/issues/41770
> (fixed now)
> - a crash in the layer properties for point cloud layers:
> https://github.com/qgis/QGIS/issues/41722 (fixed now)
> - Can't access rasters in geopackage through browser:
> https://github.com/qgis/QGIS/issues/41860 (fixed now)
> - Crash when exporting DXF files:
> https://github.com/qgis/QGIS/issues/41858 -- unfixed
> - A crash when opening the properties of a raster layer:
> https://github.com/qgis/QGIS/issues/41834 (possibly a plugin issue, but
> more feedback is needed as it may be a widespread non-plugin issue (this
> code was changed just prior to release))
>
> I think the severity of the georefencer and DXF crashes alone should
> warrant a speedy .1 release, given that they completely break some core GIS
> functionality.
>
> (I think we should also consider raising a user-friendly warning message
> when a user tries to add a las or laz file and they don't have a pdal
> enabled build, as we are seeing lots of confusion about this situation too).
>
> What's everyone's thoughts? Should we cut an unscheduled 3.18.1 release
> sometime next week after the DXF and raster properties crashes are fixed?
>
> Nyall
>
>
>
>
>
>
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210227/f13a4ae7/attachment-0001.html>

From apasotti at gmail.com  Sat Feb 27 00:20:06 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Sat, 27 Feb 2021 09:20:06 +0100
Subject: [QGIS-Developer] Unscheduled 3.18.1 release?
In-Reply-To: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
Message-ID: <CAL5Q6720RHqORa_VORkPUhOxAf-9h4P6CK0-uzwL6w=26naiAQ@mail.gmail.com>

On Sat, Feb 27, 2021 at 8:15 AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> So..... 3.18.0 is unfortunately proving to be a bit of a dud, with numerous critical issues including:
>
> - georeferencer is broken: https://github.com/qgis/QGIS/issues/41770 (fixed now)
> - a crash in the layer properties for point cloud layers: https://github.com/qgis/QGIS/issues/41722 (fixed now)
> - Can't access rasters in geopackage through browser: https://github.com/qgis/QGIS/issues/41860 (fixed now)
> - Crash when exporting DXF files: https://github.com/qgis/QGIS/issues/41858 -- unfixed
> - A crash when opening the properties of a raster layer: https://github.com/qgis/QGIS/issues/41834 (possibly a plugin issue, but more feedback is needed as it may be a widespread non-plugin issue (this code was changed just prior to release))
>
> I think the severity of the georefencer and DXF crashes alone should warrant a speedy .1 release, given that they completely break some core GIS functionality.
>
> (I think we should also consider raising a user-friendly warning message when a user tries to add a las or laz file and they don't have a pdal enabled build, as we are seeing lots of confusion about this situation too).
>
> What's everyone's thoughts? Should we cut an unscheduled 3.18.1 release sometime next week after the DXF and raster properties crashes are fixed?
>
> Nyall

+1, not sure if a week is enough though, the CI blackout has been
hiding a few issues that must be taken care of before we ship another
broken release.


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Sat Feb 27 01:15:39 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 27 Feb 2021 10:15:39 +0100
Subject: [QGIS-Developer] Some FOSS thoughts from Mike Bostock
Message-ID: <3065d1a5-34f7-c5b7-903e-40b5cb3b7be0@duif.net>

Good read about 10 years looking back from Mike Bostock, BDFL of D3.js lib:

https://observablehq.com/@mbostock/10-years-of-open-source-visualization

Nice words.

Take aways:

- examples, examples, documentation (read: pyqgis and more more QGIS-tutorials online)

- stay kind and polite to each other

Regards,

Richard Duivenvoorde

From marco at qgis.org  Sat Feb 27 03:31:18 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Sat, 27 Feb 2021 12:31:18 +0100
Subject: [QGIS-Developer] [Qgis-psc] Some FOSS thoughts from Mike Bostock
In-Reply-To: <3065d1a5-34f7-c5b7-903e-40b5cb3b7be0@duif.net>
References: <3065d1a5-34f7-c5b7-903e-40b5cb3b7be0@duif.net>
Message-ID: <CAB2ZMRBNwOiZ75C9gOoHxpOdcRrOOg_fn3-dZgVVD=1xU0PhDQ@mail.gmail.com>

thanks Richard,
really interesting read, and yes documentation documentation
documentation...

on this, i d like tho thanks all that help out there and, as a fantastic
trend in the last months, are helping in the QGIS OpenDays!

cheers Marco

On Sat, 27 Feb 2021, 10:15 Richard Duivenvoorde, <rdmailings at duif.net>
wrote:

> Good read about 10 years looking back from Mike Bostock, BDFL of D3.js lib:
>
> https://observablehq.com/@mbostock/10-years-of-open-source-visualization
>
> Nice words.
>
> Take aways:
>
> - examples, examples, documentation (read: pyqgis and more more
> QGIS-tutorials online)
>
> - stay kind and polite to each other
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210227/7ec682e7/attachment.html>

From pergler at gmail.com  Sat Feb 27 04:54:24 2021
From: pergler at gmail.com (Martin Pergler)
Date: Sat, 27 Feb 2021 05:54:24 -0700 (MST)
Subject: [QGIS-Developer] [Qgis-psc] Unscheduled 3.18.1 release?
In-Reply-To: <CAC_qv=pgmAjE9FxPSDHK-bC858BeHaLx+qVrUo6Ok2_QTD-Dng@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
 <CAC_qv=pgmAjE9FxPSDHK-bC858BeHaLx+qVrUo6Ok2_QTD-Dng@mail.gmail.com>
Message-ID: <1614430464052-0.post@n6.nabble.com>

+1 on the idea.

How far away is the OSGeo4W "reboot" from moving from testing to release? If
similar timing, would it make sense to coordinate with this 3.18.1?  At the
risk of being annoyingly Windows-centric, I suspect for a lot of our Windows
userbase, the distinction between "point release of QGIS" and "availability
of (new/improved/streamlined) Windows build" is murky at best.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From jef at norbit.de  Sat Feb 27 05:16:33 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Sat, 27 Feb 2021 14:16:33 +0100
Subject: [QGIS-Developer] Unscheduled 3.18.1 release?
In-Reply-To: <CAL5Q6720RHqORa_VORkPUhOxAf-9h4P6CK0-uzwL6w=26naiAQ@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
 <CAL5Q6720RHqORa_VORkPUhOxAf-9h4P6CK0-uzwL6w=26naiAQ@mail.gmail.com>
Message-ID: <20210227131633.hwuydnwm623xeyqi@norbit.de>

Hi Ale,

On Sat, 27. Feb 2021 at 09:20:06 +0100, Alessandro Pasotti wrote:
> +1, not sure if a week is enough though, the CI blackout has been
> hiding a few issues that must be taken care of before we ship another
> broken release.

Same here.  The processing message about SAGA 7 should also be checked and be
removed if it's bogus.  Not really sure if it is.

And some more time to let people test with the new dependencies on Windows
would probably be good too - so far it seems to work as good as I hoped - I
expected more hickups ;)


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210227/5c650398/attachment.sig>

From rhurlin at gwdg.de  Sat Feb 27 12:41:08 2021
From: rhurlin at gwdg.de (Rainer Hurling)
Date: Sat, 27 Feb 2021 21:41:08 +0100
Subject: [QGIS-Developer] Unscheduled 3.18.1 release?
In-Reply-To: <20210227131633.hwuydnwm623xeyqi@norbit.de>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
 <CAL5Q6720RHqORa_VORkPUhOxAf-9h4P6CK0-uzwL6w=26naiAQ@mail.gmail.com>
 <20210227131633.hwuydnwm623xeyqi@norbit.de>
Message-ID: <d0d5fdb9-97f5-6cac-425c-a0ac69879651@gwdg.de>

Hi J?rgen,

Am 27.02.21 um 14:16 schrieb J?rgen E. Fischer:
> Hi Ale,
> 
> On Sat, 27. Feb 2021 at 09:20:06 +0100, Alessandro Pasotti wrote:
>> +1, not sure if a week is enough though, the CI blackout has been
>> hiding a few issues that must be taken care of before we ship another
>> broken release.
> 
> Same here.  The processing message about SAGA 7 should also be checked and be
> removed if it's bogus.  Not really sure if it is.

Sorry if I missed the related discussion.

Can you shade some light here? What exactly is the problem with SAGA 7
and the processing message?

I am asking as the ports maintainer of QGIS and SAGA GIS for FreeBSD. On
FreeBSD we already have QGIS 3.18.0 and SAGA GIS 7.9.0.

Thanks for any insight,
Rainer


> 
> And some more time to let people test with the new dependencies on Windows
> would probably be good too - so far it seems to work as good as I hoped - I
> expected more hickups ;)
> 
> 
> J?rgen



From benjamin.jakimow at geo.hu-berlin.de  Sun Feb 28 00:03:27 2021
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Sun, 28 Feb 2021 09:03:27 +0100
Subject: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and
 vcpkg
In-Reply-To: <CAGs3qpSL9YDct=x07sx8Rygh1eyrJcwrTUzOmTNokHwBRGPP-Q@mail.gmail.com>
References: <AM0PR02MB5777088D40E2D4EE13EBDF3593B99@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CACjCNZTsBFYMhtgSFTfte9+mkKy_Yb9kvptMhiwAncD1LgCLRQ@mail.gmail.com>
 <AM0PR02MB57772729C0B2641FBA458E5193B79@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <47c87f52-7d5a-6935-6a8b-7615cd670dcf@di.uminho.pt>
 <CAECJsSo0CARNyBTxkdrJkKqL5UBdtx0RLH9jePF1zo3JAN3SQQ@mail.gmail.com>
 <AM0PR02MB57775DD44ECAA6EB8C2C672193B69@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CAGs3qpSL9YDct=x07sx8Rygh1eyrJcwrTUzOmTNokHwBRGPP-Q@mail.gmail.com>
Message-ID: <9f037205df46d87185a896ff9464e73a@geo.hu-berlin.de>

Hi Stefan,

thanks for your extensive description. So far it worked out very well to 
setup VS, and I can confirm that geos_c.lib is detected automatically.

Unfortunately my build failed, because MovingRegion.h (which comes with 
vcpkg) wants to use std::binary_function, which was removed with C++17:

<vcpkg 
root>\installed\x64-windows\include\spatialindex\MovingRegion.h(155): 
error C2039: 'binary_function': is not a member of 'std'

I wonder why, because this issue has been solved in libspatialindex 
since Oct 2019 
(https://github.com/libspatialindex/libspatialindex/pull/153)

Best regards,
Benjamin

On 2021-02-11 11:29, Mats Taraldsvik wrote:

> Hi Stefan,
> 
> Thank you for this excellent guide to compile with vcpkg, it worked 
> right away after me struggling with the official guide+CMake 
> compilation for a couple of hours.
> 
> I did make a few modifications that might help:
> 
> 1. Release build:
> - geos_c.lib was detected automatically, and for some reason I did not 
> need to explicitly set GEOS_LIBRARY
> 
> 2. Debug build:
> 
> I noticed: 1> [CMake] -- Found ZSTD: 
> C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/lib/zstd.lib 
> in the logs and you wrote:
>> The build will fail because the execution of crssync.exe fails. That's 
>> because crssync.exe tries to load zstd.dll instead of zstdd.dll. I 
>> haven't figured out why, yet. An easy workaround is copying zstdd.dll 
>> to zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the 
>> build and it should succeed.
> 
> By setting ZSTD_LIBRARY explicitly to 
> <your-vcpkg-root>/installed/x64-windows/debug/lib/zstdd.lib it picked 
> the right lib and dll:
> Then log changed to: 1> [CMake] -- Found ZSTD: 
> C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/debug/lib/zstdd.lib
> 
> I hope this does help a bit.
> 
> I'm an outsider to this community, but my humble suggestion _when this 
> work is complete_ (what's missing except for python support?):
> - add your CMakeSettings.json to the build description or to 
> src/CMakeSettings.json
> - vcpkg has a new feature "manifests", where a file vcpkg.json 
> describes all dependencies. this should also be added or described 
> (instead of the vcpkg install command).
> - vcpkg just got versioning, which might help align the requirements 
> with the rest of qgis
> - I see that vcpkg already has flex and bison 
> (<your-vcpkg-root>/downloads/tools/winflexbison), so if there is a way 
> for win_bison.exe and win_flex.exe to be copied to the build directory, 
> these could be used instead of cygwin, making the build even easier)
> - vcpkg does have binary caching, perhaps making a github actions CI 
> build using this method feasible?
> 
> Anyway, thank you for your efforts! It made the first QGIS-step more 
> pleasant. :)
> 
> Best regards,
> Mats Taraldsvik
> 
> On Mon, Feb 1, 2021 at 4:24 PM Uhrig, Stefan <stefan.uhrig at sap.com> 
> wrote:
> 
> Hi all,
> 
> In my opinion, the build with Visual Studio 2019 and vcpkg is still too 
> experimental to add it to the INSTALL.md file. It might break any day 
> if QGIS requires a package or package version that is not available 
> from vcpkg.
> 
> Actually, I like the idea to add it to the "Show & tell" category. We 
> can ask the community for their experiences with that setup. Does it 
> work, is it getting used? If it is used by some "critical mass" and 
> works over a longer time without issues, we can add instructions to the 
> INSTALL.md file. Maybe we can add a hint to the INSTALL.md file that 
> the not so faint-hearted developers might give it a try and provide a 
> link to the "Show & tell" post.
> 
> However, to be really useful, the debug build should also work with 
> Python bindings and QGIS processing. I got it working for release 
> builds (just needed to install the required Python dependencies via pip 
> install <package>), but that does not work for debug builds. Someone 
> solved that some years ago in another context 
> (https://www.riverbankcomputing.com/pipermail/pyqt/2012-April/031385.html), 
> so I might get it working. I'll give it a try.
> 
> Furthermore, I'd like to investigate the zstd.dll vs zstdd.dll load 
> issue before publishing the build instructions.
> 
> Best regards,
> 
> Stefan
> 
> From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf 
> Of DelazJ
> Sent: Monday, February 1, 2021 10:49 AM
> To: Jorge Gustavo Rocha <jgr at di.uminho.pt>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE 
> and vcpkg
> 
> Hi,
> 
> Why not in the build instructions of the code repo instead: 
> https://github.com/qgis/QGIS/blob/master/INSTALL.md [1]? If it's a 
> working process, easy to replicate, this is the place I'd expect this 
> kind of information.
> 
> Regards,
> 
> Harrissou
> 
> Le dim. 31 janv. 2021 ? 15:55, Jorge Gustavo Rocha <jgr at di.uminho.pt> a 
> ?crit :
> 
> Hi Stefan,
> 
> We have now a new tab on github called 'discussions'[1]. Your detailed
> instructions are a good candidate to write down a new entry there, 
> under
> 'Show and tell' category. The goal is to keep this information next to
> the repo. You can use the markdown syntax to enhance the writing 
> format.
> You can also add some print screens.
> 
> This is just a suggestion. Feel free to put it there or not.
> 
> Regards (and thank you!),
> 
> Jorge Gustavo
> 
> [1] https://github.com/qgis/QGIS/discussions
> 
> ?s 14:13 de 31/01/21, Uhrig, Stefan escreveu:
>> Install Visual Studio Community 2019: Select "Desktop development with
>> C++" under "Workloads" and "C++ MFC for latest v142 build tools (x86 &
>> x64)" under "Individual components". Verify that you install "Windows 
>> 10
>> SDK (10.0.18362.0)" or higher.
>> 
>> 
>> 
>> Install Git for Windows and Python 3.
>> 
>> 
>> 
>> Download
>> https://sourceforge.net/projects/winflexbison/files/win_flex_bison3-latest.zip/download 
>> [2]
>> and extract it to a location of your choice (avoid space characters in
>> the target path).
>> 
>> 
>> 
>> Follow the vcpkg "Quick Start: Windows" instructions at
>> https://github.com/microsoft/vcpkg#quick-start-windows [3]. Make sure 
>> to
>> execute the "vcpkg integrate install" command.
>> 
>> 
>> 
>> Install the required dependencies via:
>> 
>> 
>> 
>> vcpkg --triplet=x64-windows install exiv2 gdal gsl libspatialindex
>> libspatialite libzip opencl protobuf qca qscintilla qt5 qt5-serialport
>> qt5-location qt5-winextras qtkeychain qwt zstd
>> 
>> 
>> 
>> This may take a while as this creates a Debug and a Release build of
>> each dependency from source.
>> 
>> 
>> 
>> Clone the QGIS repostiory. The path to the QGIS repository should not
>> contain any space characters.
>> 
>> 
>> 
>> Start Visual Studio and open the QGIS CMakeLists.txt file via "File 
>> -->
>> Open --> CMake...". This will start the CMake generation, which will
>> fail. You will need several configuration rounds until everything is
>> setup properly.
>> 
>> 
>> 
>> Let's start with a Release build because that requires less tweaking. 
>> Go
>> to "Project --> CMake Settings". Delete the default configuration
>> ("x64-Debug (default)").
>> 
>> 
>> 
>> Add a new "x64-Release" configuration and set "Configuration type" to
>> "Release". Save the CMakeSettings.json file, which will start a new
>> CMake generation. "FIND_FLEX" will fail, so you need to set the
>> "FLEX_EXECUTABLE" path manually in section "CMake variables and 
>> cache".
>> Browse to your win_flex.exe file. Additionally, disable 
>> "WITH_BINDINGS"
>> and "WITH_QGIS_PROCESS". Save the file. Next set "BISON_EXECUTABLE" to
>> your win_bison.exe file and save again. Disable "WITH_QTWEBKIT" and
>> save. Set "QCA_LIBRARY" to
>> "<vcpkg-root>\installed\x64-windows\lib\qca.lib" and save. 
>> Configuration
>> should now succeed, but you have to change "GEOS_LIBRARY" from
>> "geos.lib" to "geos_c.lib". Save and start the build after CMake
>> generation has finished.
>> 
>> 
>> 
>> Select "qgis.exe (output\bin\qgis.exe)" as start-up item in the 
>> toolbar
>> and start QGIS.
>> 
>> 
>> 
>> Now let's do the same for a Debug build. Add a "x64-Debug" 
>> configuration
>> and save. Change to the "x64-Debug" configuration in the toolbar. 
>> Repeat
>> the steps from above (set flex and bison paths etc.). When selecting
>> libraries, take the libraries from
>> "<vcpkg-root>\installed\x64-windows\debug\lib". Most libraries will 
>> have
>> a "d" or "_d" as name suffix. The CMake generation will not always
>> select the debug versions of libraries. Hence, go over the CMake
>> variables and change release library paths to debug library paths, 
>> e.g.
>> "<vcpkg-root>\installed\x64-windows\debug\lib\geos_cd.lib" for
>> GEOS_LIBRARY. I'll append my CMakeSettings.json file as reference to
>> this mail. Save again and start the build.
>> 
>> 
>> 
>> The build will fail because the execution of crssync.exe fails. That's
>> because crssync.exe tries to load zstd.dll instead of zstdd.dll. I
>> haven't figured out why, yet. An easy workaround is copying zstdd.dll 
>> to
>> zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the 
>> build
>> and it should succeed.
>> 
>> 
>> 
>> You should then be able to start and debug qgis.exe and its
>> dependencies. Note that some vcpkg portfiles forget to copy over the
>> .pdb files. For example, proj is affected. If you find such a library
>> with a missing .pdb file, check whether the portfile (e.g.
>> "<vcpkg-root>\ports\proj4\portfile.cmake") contains the
>> "vcpkg_copy_pdbs()" call. If not, just add it at the end, re-install 
>> the
>> dependency and copy over the .pdb file to the QGIS output directory.
>> 
>> 
>> 
>> I'm currently trying to get QGIS working with Python bindings. I got 
>> the
>> build working, however I'm struggling with the debug build execution.
>> The debug Python library seems to be unable to load the Release build 
>> Qt
>> libraries that come with PyQt5. Well, I'll keep trying and if I 
>> succeed,
>> I'll update the instructions.
>> 
>> 
>> 
>> Here is my CMakeSettings.json file for reference:
>> 
>> 
>> 
>> {
>> 
>> "configurations": [
>> 
>> {
>> 
>> "name": "x64-Release",
>> 
>> "generator": "Ninja",
>> 
>> "configurationType": "Release",
>> 
>> "buildRoot": "${projectDir}\\out\\build\\${name}",
>> 
>> "installRoot": "${projectDir}\\out\\install\\${name}",
>> 
>> "cmakeCommandArgs": "",
>> 
>> "buildCommandArgs": "",
>> 
>> "ctestCommandArgs": "",
>> 
>> "inheritEnvironments": [ "msvc_x64_x64" ],
>> 
>> "variables": [
>> 
>> {
>> 
>> "name": "WITH_BINDINGS",
>> 
>> "value": "False",
>> 
>> "type": "BOOL"
>> 
>> },
>> 
>> {
>> 
>> "name": "WITH_QGIS_PROCESS",
>> 
>> "value": "False",
>> 
>> "type": "BOOL"
>> 
>> },
>> 
>> {
>> 
>> "name": "FLEX_EXECUTABLE",
>> 
>> "value": "C:/src/tools/win_flex.exe",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "BISON_EXECUTABLE",
>> 
>> "value": "C:/src/tools/win_bison.exe",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "WITH_QTWEBKIT",
>> 
>> "value": "False",
>> 
>> "type": "BOOL"
>> 
>> },
>> 
>> {
>> 
>> "name": "QCA_LIBRARY",
>> 
>> "value": "C:/src/vcpkg/installed/x64-windows/lib/qca.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "GEOS_LIBRARY",
>> 
>> "value": "C:/src/vcpkg/installed/x64-windows/lib/geos_c.lib",
>> 
>> "type": "FILEPATH"
>> 
>> }
>> 
>> ]
>> 
>> },
>> 
>> {
>> 
>> "name": "x64-Debug",
>> 
>> "generator": "Ninja",
>> 
>> "configurationType": "Debug",
>> 
>> "buildRoot": "${projectDir}\\out\\build\\${name}",
>> 
>> "installRoot": "${projectDir}\\out\\install\\${name}",
>> 
>> "cmakeCommandArgs": "",
>> 
>> "buildCommandArgs": "",
>> 
>> "ctestCommandArgs": "",
>> 
>> "inheritEnvironments": [ "msvc_x64_x64" ],
>> 
>> "variables": [
>> 
>> {
>> 
>> "name": "FLEX_EXECUTABLE",
>> 
>> "value": "C:/src/tools/win_flex.exe",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "BISON_EXECUTABLE",
>> 
>> "value": "C:/src/tools/win_bison.exe",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "WITH_QTWEBKIT",
>> 
>> "value": "False",
>> 
>> "type": "BOOL"
>> 
>> },
>> 
>> {
>> 
>> "name": "WITH_BINDINGS",
>> 
>> "value": "False",
>> 
>> "type": "BOOL"
>> 
>> },
>> 
>> {
>> 
>> "name": "WITH_QGIS_PROCESS",
>> 
>> "value": "False",
>> 
>> "type": "BOOL"
>> 
>> },
>> 
>> {
>> 
>> "name": "QCA_LIBRARY",
>> 
>> "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/qcad.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "GEOS_LIBRARY",
>> 
>> "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/geos_cd.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "GSL_LIB",
>> 
>> "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/gsld.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "GSLCBLAS_LIB",
>> 
>> "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/gslcblasd.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "PROJ_LIBRARY",
>> 
>> "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/proj_d.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "QSCINTILLA_LIBRARY",
>> 
>> "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/qscintilla2_qt5d.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "QTKEYCHAIN_LIBRARY",
>> 
>> "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/qt5keychaind.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "QWT_LIBRARY",
>> 
>> "value": "C:/src/vcpkg/installed/x64-windows/debug/lib/qwtd.lib",
>> 
>> "type": "FILEPATH"
>> 
>> },
>> 
>> {
>> 
>> "name": "SPATIALINDEX_LIBRARY",
>> 
>> "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/spatialindex-64d.lib",
>> 
>> "type": "FILEPATH"
>> 
>> }
>> 
>> ]
>> 
>> }
>> 
>> ]
>> 
>> }
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> *From:*i-s-o <46.i.s.o.64 at gmail.com>
>> *Sent:* Saturday, January 30, 2021 5:58 PM
>> *To:* Uhrig, Stefan <stefan.uhrig at sap.com>
>> *Cc:* qgis-developer <QGIS-Developer at lists.osgeo.org>
>> *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 
>> CE
>> and vcpkg
>> 
>> 
>> 
>> I am very interested in trying out your solution. Could you share the
>> required steps?
>> 
>> 
>> 
>> Thx.
>> 
>> 
>> 
>> On Fri, Jan 29, 2021, 09:25 Uhrig, Stefan <stefan.uhrig at sap.com
>> <mailto:stefan.uhrig at sap.com>> wrote:
>> 
>> TL;DR: It is currently possible to build the QGIS core app with
>> Visual Studio 2019 and vcpkg, which makes debugging QGIS
>> dependencies easy.
>> 
>> 
>> 
>> 
>> 
>> Hi all,
>> 
>> 
>> 
>> Some time ago I discovered vcpkg
>> (https://github.com/microsoft/vcpkg). vcpkg is a package manager
>> that downloads package source code to your local machine and builds
>> the package locally. Recently, I discovered that vcpkg should be
>> able to provide all dependencies to build at least the QGIS core
>> application. Hence, I gave it a try.
>> 
>> 
>> 
>> Basically, it worked out of the box. I started with a fresh Windows
>> 10 installation, installed Visual Studio 2019 Community Edition,
>> Git, vcpkg, Python 3 and flex and bison for Windows. I fetched all
>> other dependencies via vcpkg. It was not necessary to even touch a
>> single file in the repository. I could just open the main
>> CMakeLists.txt file in Visual Studio and only had to tweak the CMake
>> cache (the CMake find macros that come with QGIS are not aware of
>> vcpkg, so I had to set some paths manually). I had to switch off
>> some extensions though as the required dependencies were not
>> available via vcpkg (WITH_BINDINGS, WITH_QGIS_PROCESS,
>> WITH_QTWEBKIT). The build did not report any errors, I could start
>> the application and it seems to work, but I did some light testing 
>> only.
>> 
>> 
>> 
>> I mainly tried it because I enjoy debugging with Visual Studio more
>> than with gdb (or gdb wrapped in some IDE). In my experience, the
>> performance of the Visual Studio debugger is better and it is more
>> stable, especially in long debug sessions.
>> 
>> 
>> 
>> I don't want to promote official building support of QGIS with
>> vcpkg. Providing the dependencies via OSGeo4W is much more reliable.
>> However, if you don't mind the experimental nature of this setup and
>> you want to be able to debug into QGIS' dependencies, you might give
>> it a try. Especially, if you want to track the cause of a crash in
>> one of QGIS' dependencies, this setup might be helpful. You have the
>> source code and debug versions of the dependencies, so the debugger
>> will jump to the crashing code line and you can inspect all the
>> variables of the dependency.
>> 
>> 
>> 
>> If someone is interested in trying it, give me a note. I can then
>> assemble detailed instructions on how to make it work. It took me a
>> while to figure out which packages are needed and how the CMake
>> cache needs to be tweaked.
>> 
>> 
>> 
>> Best regards,
>> 
>> Stefan
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer [4]
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer 
>> [4]
>> 
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer [4]
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer 
>> [4]
>> 
> 
> J. Gustavo
> --
> Jorge Gustavo Rocha
> Departamento de Inform?tica
> Universidade do Minho
> 4710-057 Braga
> Gabinete 3.29 (Piso 3)
> Tel: +351 253604480
> Fax: +351 253604471
> M?vel: +351 910333888
> skype: nabocudnosor
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer [4]
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer 
> [4] _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
--
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu 
Berlin

e-mail: benjamin.jakimow at geo.hu-berlin.de

phone:  +49 (0) 30 2093 6894
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'222

Links:
------
[1] https://github.com/qgis/QGIS/blob/master/INSTALL.md
[2] 
https://sourceforge.net/projects/winflexbison/files/win_flex_bison3-latest.zip/download
[3] https://github.com/microsoft/vcpkg#quick-start-windows
[4] https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210228/4572314f/attachment-0001.html>

From matthias at opengis.ch  Sun Feb 28 00:51:55 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Sun, 28 Feb 2021 09:51:55 +0100
Subject: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE and
 vcpkg
In-Reply-To: <CAGs3qpSL9YDct=x07sx8Rygh1eyrJcwrTUzOmTNokHwBRGPP-Q@mail.gmail.com>
References: <AM0PR02MB5777088D40E2D4EE13EBDF3593B99@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CACjCNZTsBFYMhtgSFTfte9+mkKy_Yb9kvptMhiwAncD1LgCLRQ@mail.gmail.com>
 <AM0PR02MB57772729C0B2641FBA458E5193B79@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <47c87f52-7d5a-6935-6a8b-7615cd670dcf@di.uminho.pt>
 <CAECJsSo0CARNyBTxkdrJkKqL5UBdtx0RLH9jePF1zo3JAN3SQQ@mail.gmail.com>
 <AM0PR02MB57775DD44ECAA6EB8C2C672193B69@AM0PR02MB5777.eurprd02.prod.outlook.com>
 <CAGs3qpSL9YDct=x07sx8Rygh1eyrJcwrTUzOmTNokHwBRGPP-Q@mail.gmail.com>
Message-ID: <CAC7zN96SV6CDoO518YQo8n5rPAppoWO3_A566DtmqCDaFZJs2w@mail.gmail.com>

Hi All,

Thanks for the pointer Stefan, this is very interesting. I spent a bit of
time this week experimenting with it. And the first impression is positive
(a bit bumpy sometimes when digging deeper, but I think that's in the
nature of every build system)

Some additional findings:

 - The manifest approach mentioned by Mats is really nice, you can create a
fully configured VS project from the command line. It will download and
install deps and subsequently build the app without any manual steps. This
will also create a vs project to open and work with.
 - I started to work on (or rather continued to revive a stalled) port (
https://github.com/m-kuhn/vcpkg/tree/qgis/ports/qgis). Likely the
vcpkg.json from here can be dropped into the root of a QGIS source dir and
then built with
  cmake.exe -S [path_to_qgis_source] -B [path_to_build_dir]
-DCMAKE_TOOLCHAIN_FILE=[path_to_vcpkg]\scripts\buildsystems\vcpkg.cmake
  cmake.exe --build [path_to_build_dir]
 - Experience shows that systems like this suffer often from library
updates that suddenly break systems. Version pinning (or a curated fork?)
might help here. I haven't looked into that yet.

Matthias

On Thu, Feb 11, 2021 at 11:30 AM Mats Taraldsvik <mats.taraldsvik at gmail.com>
wrote:

> Hi Stefan,
>
> Thank you for this excellent guide to compile with vcpkg, it worked right
> away after me struggling with the official guide+CMake compilation for a
> couple of hours.
>
> I did make a few modifications that might help:
>
> 1. Release build:
> - geos_c.lib was detected automatically, and for some reason I did not
> need to explicitly set GEOS_LIBRARY
>
> 2. Debug build:
>
> I noticed: 1> [CMake] -- Found ZSTD:
> C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/lib/zstd.lib
> in the logs and you wrote:
> > The build will fail because the execution of crssync.exe fails. That's
> because crssync.exe tries to load zstd.dll instead of zstdd.dll. I haven't
> figured out why, yet. An easy workaround is copying zstdd.dll to zstd.dll
> in QGIS\out\build\x64-Debug\output\bin. Then restart the build and it
> should succeed.
>
> By setting ZSTD_LIBRARY explicitly to
> <your-vcpkg-root>/installed/x64-windows/debug/lib/zstdd.lib it picked the
> right lib and dll:
> Then log changed to: 1> [CMake] -- Found ZSTD:
> C:/Users/mattar/Source/Repos/vcpkg_qgis/installed/x64-windows/debug/lib/zstdd.lib
>
> I hope this does help a bit.
>
> I'm an outsider to this community, but my humble suggestion _when this
> work is complete_ (what's missing except for python support?):
> - add your CMakeSettings.json to the build description or to
> src/CMakeSettings.json
> - vcpkg has a new feature "manifests", where a file vcpkg.json describes
> all dependencies. this should also be added or described (instead of the
> vcpkg install command).
> - vcpkg just got versioning, which might help align the requirements with
> the rest of qgis
> - I see that vcpkg already has flex and bison
> (<your-vcpkg-root>/downloads/tools/winflexbison), so if there is a way for
> win_bison.exe and win_flex.exe to be copied to the build directory, these
> could be used instead of cygwin, making the build even easier)
> - vcpkg does have binary caching, perhaps making a github actions CI build
> using this method feasible?
>
> Anyway, thank you for your efforts! It made the first QGIS-step more
> pleasant. :)
>
> Best regards,
> Mats Taraldsvik
>
> On Mon, Feb 1, 2021 at 4:24 PM Uhrig, Stefan <stefan.uhrig at sap.com> wrote:
>
>> Hi all,
>>
>>
>>
>> In my opinion, the build with Visual Studio 2019 and vcpkg is still too
>> experimental to add it to the INSTALL.md file. It might break any day if
>> QGIS requires a package or package version that is not available from vcpkg.
>>
>>
>>
>> Actually, I like the idea to add it to the ?Show & tell? category. We can
>> ask the community for their experiences with that setup. Does it work, is
>> it getting used? If it is used by some ?critical mass? and works over a
>> longer time without issues, we can add instructions to the INSTALL.md file.
>> Maybe we can add a hint to the INSTALL.md file that the not so
>> faint-hearted developers might give it a try and provide a link to the
>> ?Show & tell? post.
>>
>>
>>
>> However, to be really useful, the debug build should also work with
>> Python bindings and QGIS processing. I got it working for release builds
>> (just needed to install the required Python dependencies via pip install
>> <package>), but that does not work for debug builds. Someone solved that
>> some years ago in another context (
>> https://www.riverbankcomputing.com/pipermail/pyqt/2012-April/031385.html),
>> so I might get it working. I?ll give it a try.
>>
>>
>>
>> Furthermore, I?d like to investigate the zstd.dll vs zstdd.dll load issue
>> before publishing the build instructions.
>>
>>
>>
>> Best regards,
>>
>> Stefan
>>
>>
>>
>>
>>
>>
>>
>> *From:* QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> *On
>> Behalf Of *DelazJ
>> *Sent:* Monday, February 1, 2021 10:49 AM
>> *To:* Jorge Gustavo Rocha <jgr at di.uminho.pt>
>> *Cc:* qgis-developer <qgis-developer at lists.osgeo.org>
>> *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE
>> and vcpkg
>>
>>
>>
>> Hi,
>>
>>
>>
>> Why not in the build instructions of the code repo instead:
>> https://github.com/qgis/QGIS/blob/master/INSTALL.md? If it's a working
>> process, easy to replicate, this is the place I'd expect this kind of
>> information.
>>
>>
>>
>> Regards,
>>
>> Harrissou
>>
>>
>>
>> Le dim. 31 janv. 2021 ? 15:55, Jorge Gustavo Rocha <jgr at di.uminho.pt> a
>> ?crit :
>>
>> Hi Stefan,
>>
>> We have now a new tab on github called 'discussions'[1]. Your detailed
>> instructions are a good candidate to write down a new entry there, under
>> 'Show and tell' category. The goal is to keep this information next to
>> the repo. You can use the markdown syntax to enhance the writing format.
>> You can also add some print screens.
>>
>> This is just a suggestion. Feel free to put it there or not.
>>
>> Regards (and thank you!),
>>
>> Jorge Gustavo
>>
>> [1] https://github.com/qgis/QGIS/discussions
>>
>> ?s 14:13 de 31/01/21, Uhrig, Stefan escreveu:
>> > Install Visual Studio Community 2019: Select "Desktop development with
>> > C++" under "Workloads" and "C++ MFC for latest v142 build tools (x86 &
>> > x64)" under "Individual components". Verify that you install "Windows 10
>> > SDK (10.0.18362.0)" or higher.
>> >
>> >
>> >
>> > Install Git for Windows and Python 3.
>> >
>> >
>> >
>> > Download
>> >
>> https://sourceforge.net/projects/winflexbison/files/win_flex_bison3-latest.zip/download
>> > and extract it to a location of your choice (avoid space characters in
>> > the target path).
>> >
>> >
>> >
>> > Follow the vcpkg "Quick Start: Windows" instructions at
>> > https://github.com/microsoft/vcpkg#quick-start-windows. Make sure to
>> > execute the "vcpkg integrate install" command.
>> >
>> >
>> >
>> > Install the required dependencies via:
>> >
>> >
>> >
>> > vcpkg --triplet=x64-windows install exiv2 gdal gsl libspatialindex
>> > libspatialite libzip opencl protobuf qca qscintilla qt5 qt5-serialport
>> > qt5-location qt5-winextras qtkeychain qwt zstd
>> >
>> >
>> >
>> > This may take a while as this creates a Debug and a Release build of
>> > each dependency from source.
>> >
>> >
>> >
>> > Clone the QGIS repostiory. The path to the QGIS repository should not
>> > contain any space characters.
>> >
>> >
>> >
>> > Start Visual Studio and open the QGIS CMakeLists.txt file via "File -->
>> > Open --> CMake...". This will start the CMake generation, which will
>> > fail. You will need several configuration rounds until everything is
>> > setup properly.
>> >
>> >
>> >
>> > Let's start with a Release build because that requires less tweaking. Go
>> > to "Project --> CMake Settings". Delete the default configuration
>> > ("x64-Debug (default)").
>> >
>> >
>> >
>> > Add a new "x64-Release" configuration and set "Configuration type" to
>> > "Release". Save the CMakeSettings.json file, which will start a new
>> > CMake generation. "FIND_FLEX" will fail, so you need to set the
>> > "FLEX_EXECUTABLE" path manually in section "CMake variables and cache".
>> > Browse to your win_flex.exe file. Additionally, disable "WITH_BINDINGS"
>> > and "WITH_QGIS_PROCESS". Save the file. Next set "BISON_EXECUTABLE" to
>> > your win_bison.exe file and save again. Disable "WITH_QTWEBKIT" and
>> > save. Set "QCA_LIBRARY" to
>> > "<vcpkg-root>\installed\x64-windows\lib\qca.lib" and save. Configuration
>> > should now succeed, but you have to change "GEOS_LIBRARY" from
>> > "geos.lib" to "geos_c.lib". Save and start the build after CMake
>> > generation has finished.
>> >
>> >
>> >
>> > Select "qgis.exe (output\bin\qgis.exe)" as start-up item in the toolbar
>> > and start QGIS.
>> >
>> >
>> >
>> > Now let's do the same for a Debug build. Add a "x64-Debug" configuration
>> > and save. Change to the "x64-Debug" configuration in the toolbar. Repeat
>> > the steps from above (set flex and bison paths etc.). When selecting
>> > libraries, take the libraries from
>> > "<vcpkg-root>\installed\x64-windows\debug\lib". Most libraries will have
>> > a "d" or "_d" as name suffix. The CMake generation will not always
>> > select the debug versions of libraries. Hence, go over the CMake
>> > variables and change release library paths to debug library paths, e.g.
>> > "<vcpkg-root>\installed\x64-windows\debug\lib\geos_cd.lib" for
>> > GEOS_LIBRARY. I'll append my CMakeSettings.json file as reference to
>> > this mail. Save again and start the build.
>> >
>> >
>> >
>> > The build will fail because the execution of crssync.exe fails. That's
>> > because crssync.exe tries to load zstd.dll instead of zstdd.dll. I
>> > haven't figured out why, yet. An easy workaround is copying zstdd.dll to
>> > zstd.dll in QGIS\out\build\x64-Debug\output\bin. Then restart the build
>> > and it should succeed.
>> >
>> >
>> >
>> > You should then be able to start and debug qgis.exe and its
>> > dependencies. Note that some vcpkg portfiles forget to copy over the
>> > .pdb files. For example, proj is affected. If you find such a library
>> > with a missing .pdb file, check whether the portfile (e.g.
>> > "<vcpkg-root>\ports\proj4\portfile.cmake") contains the
>> > "vcpkg_copy_pdbs()" call. If not, just add it at the end, re-install the
>> > dependency and copy over the .pdb file to the QGIS output directory.
>> >
>> >
>> >
>> > I'm currently trying to get QGIS working with Python bindings. I got the
>> > build working, however I'm struggling with the debug build execution.
>> > The debug Python library seems to be unable to load the Release build Qt
>> > libraries that come with PyQt5. Well, I'll keep trying and if I succeed,
>> > I'll update the instructions.
>> >
>> >
>> >
>> > Here is my CMakeSettings.json file for reference:
>> >
>> >
>> >
>> > {
>> >
>> >   "configurations": [
>> >
>> >     {
>> >
>> >       "name": "x64-Release",
>> >
>> >       "generator": "Ninja",
>> >
>> >       "configurationType": "Release",
>> >
>> >       "buildRoot": "${projectDir}\\out\\build\\${name}",
>> >
>> >       "installRoot": "${projectDir}\\out\\install\\${name}",
>> >
>> >       "cmakeCommandArgs": "",
>> >
>> >       "buildCommandArgs": "",
>> >
>> >       "ctestCommandArgs": "",
>> >
>> >       "inheritEnvironments": [ "msvc_x64_x64" ],
>> >
>> >       "variables": [
>> >
>> >         {
>> >
>> >           "name": "WITH_BINDINGS",
>> >
>> >           "value": "False",
>> >
>> >           "type": "BOOL"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "WITH_QGIS_PROCESS",
>> >
>> >           "value": "False",
>> >
>> >           "type": "BOOL"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "FLEX_EXECUTABLE",
>> >
>> >           "value": "C:/src/tools/win_flex.exe",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "BISON_EXECUTABLE",
>> >
>> >           "value": "C:/src/tools/win_bison.exe",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "WITH_QTWEBKIT",
>> >
>> >           "value": "False",
>> >
>> >           "type": "BOOL"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "QCA_LIBRARY",
>> >
>> >           "value": "C:/src/vcpkg/installed/x64-windows/lib/qca.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "GEOS_LIBRARY",
>> >
>> >           "value": "C:/src/vcpkg/installed/x64-windows/lib/geos_c.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         }
>> >
>> >       ]
>> >
>> >     },
>> >
>> >     {
>> >
>> >       "name": "x64-Debug",
>> >
>> >       "generator": "Ninja",
>> >
>> >       "configurationType": "Debug",
>> >
>> >       "buildRoot": "${projectDir}\\out\\build\\${name}",
>> >
>> >       "installRoot": "${projectDir}\\out\\install\\${name}",
>> >
>> >       "cmakeCommandArgs": "",
>> >
>> >       "buildCommandArgs": "",
>> >
>> >       "ctestCommandArgs": "",
>> >
>> >       "inheritEnvironments": [ "msvc_x64_x64" ],
>> >
>> >       "variables": [
>> >
>> >         {
>> >
>> >           "name": "FLEX_EXECUTABLE",
>> >
>> >           "value": "C:/src/tools/win_flex.exe",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "BISON_EXECUTABLE",
>> >
>> >           "value": "C:/src/tools/win_bison.exe",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "WITH_QTWEBKIT",
>> >
>> >           "value": "False",
>> >
>> >           "type": "BOOL"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "WITH_BINDINGS",
>> >
>> >           "value": "False",
>> >
>> >           "type": "BOOL"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "WITH_QGIS_PROCESS",
>> >
>> >           "value": "False",
>> >
>> >           "type": "BOOL"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "QCA_LIBRARY",
>> >
>> >           "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/qcad.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "GEOS_LIBRARY",
>> >
>> >           "value":
>> > "C:/src/vcpkg/installed/x64-windows/debug/lib/geos_cd.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "GSL_LIB",
>> >
>> >           "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/gsld.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "GSLCBLAS_LIB",
>> >
>> >           "value":
>> > "C:/src/vcpkg/installed/x64-windows/debug/lib/gslcblasd.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "PROJ_LIBRARY",
>> >
>> >           "value":
>> > "C:/src/vcpkg/installed/x64-windows/debug/lib/proj_d.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "QSCINTILLA_LIBRARY",
>> >
>> >           "value":
>> > "C:/src/vcpkg/installed/x64-windows/debug/lib/qscintilla2_qt5d.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "QTKEYCHAIN_LIBRARY",
>> >
>> >           "value":
>> > "C:/src/vcpkg/installed/x64-windows/debug/lib/qt5keychaind.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "QWT_LIBRARY",
>> >
>> >           "value":
>> "C:/src/vcpkg/installed/x64-windows/debug/lib/qwtd.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         },
>> >
>> >         {
>> >
>> >           "name": "SPATIALINDEX_LIBRARY",
>> >
>> >           "value":
>> > "C:/src/vcpkg/installed/x64-windows/debug/lib/spatialindex-64d.lib",
>> >
>> >           "type": "FILEPATH"
>> >
>> >         }
>> >
>> >       ]
>> >
>> >     }
>> >
>> >   ]
>> >
>> > }
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> > *From:*i-s-o <46.i.s.o.64 at gmail.com>
>> > *Sent:* Saturday, January 30, 2021 5:58 PM
>> > *To:* Uhrig, Stefan <stefan.uhrig at sap.com>
>> > *Cc:* qgis-developer <QGIS-Developer at lists.osgeo.org>
>> > *Subject:* Re: [QGIS-Developer] Building QGIS with Visual Studio 2019 CE
>> > and vcpkg
>> >
>> >
>> >
>> > I am very interested in trying out your solution. Could you share the
>> > required steps?
>> >
>> >
>> >
>> > Thx.
>> >
>> >
>> >
>> > On Fri, Jan 29, 2021, 09:25 Uhrig, Stefan <stefan.uhrig at sap.com
>> > <mailto:stefan.uhrig at sap.com>> wrote:
>> >
>> >     TL;DR: It is currently possible to build the QGIS core app with
>> >     Visual Studio 2019 and vcpkg, which makes debugging QGIS
>> >     dependencies easy.
>> >
>> >
>> >
>> >
>> >
>> >     Hi all,
>> >
>> >
>> >
>> >     Some time ago I discovered vcpkg
>> >     (https://github.com/microsoft/vcpkg). vcpkg is a package manager
>> >     that downloads package source code to your local machine and builds
>> >     the package locally. Recently, I discovered that vcpkg should be
>> >     able to provide all dependencies to build at least the QGIS core
>> >     application. Hence, I gave it a try.
>> >
>> >
>> >
>> >     Basically, it worked out of the box. I started with a fresh Windows
>> >     10 installation, installed Visual Studio 2019 Community Edition,
>> >     Git, vcpkg, Python 3 and flex and bison for Windows. I fetched all
>> >     other dependencies via vcpkg. It was not necessary to even touch a
>> >     single file in the repository. I could just open the main
>> >     CMakeLists.txt file in Visual Studio and only had to tweak the CMake
>> >     cache (the CMake find macros that come with QGIS are not aware of
>> >     vcpkg, so I had to set some paths manually). I had to switch off
>> >     some extensions though as the required dependencies were not
>> >     available via vcpkg (WITH_BINDINGS, WITH_QGIS_PROCESS,
>> >     WITH_QTWEBKIT). The build did not report any errors, I could start
>> >     the application and it seems to work, but I did some light testing
>> only.
>> >
>> >
>> >
>> >     I mainly tried it because I enjoy debugging with Visual Studio more
>> >     than with gdb (or gdb wrapped in some IDE). In my experience, the
>> >     performance of the Visual Studio debugger is better and it is more
>> >     stable, especially in long debug sessions.
>> >
>> >
>> >
>> >     I don?t want to promote official building support of QGIS with
>> >     vcpkg. Providing the dependencies via OSGeo4W is much more reliable.
>> >     However, if you don?t mind the experimental nature of this setup and
>> >     you want to be able to debug into QGIS? dependencies, you might give
>> >     it a try. Especially, if you want to track the cause of a crash in
>> >     one of QGIS? dependencies, this setup might be helpful. You have the
>> >     source code and debug versions of the dependencies, so the debugger
>> >     will jump to the crashing code line and you can inspect all the
>> >     variables of the dependency.
>> >
>> >
>> >
>> >     If someone is interested in trying it, give me a note. I can then
>> >     assemble detailed instructions on how to make it work. It took me a
>> >     while to figure out which packages are needed and how the CMake
>> >     cache needs to be tweaked.
>> >
>> >
>> >
>> >     Best regards,
>> >
>> >     Stefan
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> >     _______________________________________________
>> >     QGIS-Developer mailing list
>> >     QGIS-Developer at lists.osgeo.org <mailto:
>> QGIS-Developer at lists.osgeo.org>
>> >     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >     Unsubscribe:
>> https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >
>> >
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >
>>
>> J. Gustavo
>> --
>> Jorge Gustavo Rocha
>> Departamento de Inform?tica
>> Universidade do Minho
>> 4710-057 Braga
>> Gabinete 3.29 (Piso 3)
>> Tel: +351 253604480
>> Fax: +351 253604471
>> M?vel: +351 910333888
>> skype: nabocudnosor
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210228/1db843ae/attachment-0001.html>

From nyall.dawson at gmail.com  Sun Feb 28 15:05:03 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 1 Mar 2021 09:05:03 +1000
Subject: [QGIS-Developer] [Qgis-psc]  Unscheduled 3.18.1 release?
In-Reply-To: <20210227131633.hwuydnwm623xeyqi@norbit.de>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
 <CAL5Q6720RHqORa_VORkPUhOxAf-9h4P6CK0-uzwL6w=26naiAQ@mail.gmail.com>
 <20210227131633.hwuydnwm623xeyqi@norbit.de>
Message-ID: <CAB28AsinMd_uH+0u=f-2ffcbpviMmKzOH9Bcb21zu+WZ1Tfk9g@mail.gmail.com>

On Sat, 27 Feb 2021 at 23:16, J?rgen E. Fischer <jef at norbit.de> wrote:
>
> Hi Ale,
>
> On Sat, 27. Feb 2021 at 09:20:06 +0100, Alessandro Pasotti wrote:
> > +1, not sure if a week is enough though, the CI blackout has been
> > hiding a few issues that must be taken care of before we ship another
> > broken release.
>
> Same here.

In this case, could we remove the download links to 3.8.0 from the
website? I don't think it's fair to users to be offering such a broken
release to them...

(Either that, or adding a "known issues" list under each of the 3.8.0
downloads so that we can inform users of what we know has broken!)

Nyall


>  The processing message about SAGA 7 should also be checked and be
> removed if it's bogus.  Not really sure if it is.
>
> And some more time to let people test with the new dependencies on Windows
> would probably be good too - so far it seems to work as good as I hoped - I
> expected more hickups ;)
>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden            https://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc

From nyall.dawson at gmail.com  Sun Feb 28 15:10:30 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 1 Mar 2021 09:10:30 +1000
Subject: [QGIS-Developer] Unscheduled 3.18.1 release?
In-Reply-To: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
Message-ID: <CAB28AsjWhHJ9qmdFoUndoaMt2+SRLHVVKkEGO-f8E9zQry-7cQ@mail.gmail.com>

On Sat, 27 Feb 2021 at 17:15, Nyall Dawson <nyall.dawson at gmail.com> wrote:

> - Crash when exporting DXF files: https://github.com/qgis/QGIS/issues/41858 -- unfixed

Quick update: This was since fixed by Even and Alessandro

Nyall

From nyall.dawson at gmail.com  Sun Feb 28 15:11:30 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 1 Mar 2021 09:11:30 +1000
Subject: [QGIS-Developer] Temporary hold on merges please!
In-Reply-To: <CAB28AsijLNKNTKr_Xc2FCLdJp1zn34cUUg17=PO3C3OWuSP2sA@mail.gmail.com>
References: <CAB28AsijLNKNTKr_Xc2FCLdJp1zn34cUUg17=PO3C3OWuSP2sA@mail.gmail.com>
Message-ID: <CAB28AsjrYGREgNZA8jN5qXvm-xH_jUWz63To7a+nJVp3CFVDBA@mail.gmail.com>

On Fri, 26 Feb 2021 at 17:11, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> Hi all,
>
> Please don't merge any code to the QGIS repos right now -- we've
> identified an issue in the new CI setup which is causing some tests to
> report passing results when the test actually should be failing. Until
> we resolve this we can't be certain that code isn't breaking things,
> so PLEASE do NOT merge anything until further notice!!

Update: the master and 3.18 branches are fixed and safe to merge to
again, but please hold off on any 3.16 backports until the CI on that
branch has also been repaired....

Nyall



>
> Nyall

From nyall.dawson at gmail.com  Sun Feb 28 16:24:43 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 1 Mar 2021 10:24:43 +1000
Subject: [QGIS-Developer] Unscheduled 3.18.1 release?
In-Reply-To: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
Message-ID: <CAB28Asi3uGxwSiQ84e0Taq7HAQ6GTzNwarH1juwGyKAccd-gDQ@mail.gmail.com>

On Sat, 27 Feb 2021 at 17:15, Nyall Dawson <nyall.dawson at gmail.com> wrote:

> (I think we should also consider raising a user-friendly warning message when a user tries to add a las or laz file and they don't have a pdal enabled build, as we are seeing lots of confusion about this situation too).

Done in https://github.com/qgis/QGIS/pull/41927

Nyall

From nyall.dawson at gmail.com  Sun Feb 28 20:05:10 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 1 Mar 2021 14:05:10 +1000
Subject: [QGIS-Developer] [Qgis-psc]  Unscheduled 3.18.1 release?
In-Reply-To: <CAB28AsinMd_uH+0u=f-2ffcbpviMmKzOH9Bcb21zu+WZ1Tfk9g@mail.gmail.com>
References: <CAB28AsiVYK7HkpEBGMNJx3sNFr+PhRqC3KhodVkvv8eWQ5jcvA@mail.gmail.com>
 <CAL5Q6720RHqORa_VORkPUhOxAf-9h4P6CK0-uzwL6w=26naiAQ@mail.gmail.com>
 <20210227131633.hwuydnwm623xeyqi@norbit.de>
 <CAB28AsinMd_uH+0u=f-2ffcbpviMmKzOH9Bcb21zu+WZ1Tfk9g@mail.gmail.com>
Message-ID: <CAB28Ashm2ESW-3Wq_8FKwZfx1o9NHee7fVbbkvxK+mrvE-i10A@mail.gmail.com>

On Mon, 1 Mar 2021 at 09:05, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> On Sat, 27 Feb 2021 at 23:16, J?rgen E. Fischer <jef at norbit.de> wrote:
> >
> > Hi Ale,
> >
> > On Sat, 27. Feb 2021 at 09:20:06 +0100, Alessandro Pasotti wrote:
> > > +1, not sure if a week is enough though, the CI blackout has been
> > > hiding a few issues that must be taken care of before we ship another
> > > broken release.
> >
> > Same here.
>
> In this case, could we remove the download links to 3.8.0 from the
> website? I don't think it's fair to users to be offering such a broken
> release to them...
>
> (Either that, or adding a "known issues" list under each of the 3.8.0
> downloads so that we can inform users of what we know has broken!)

I'm really trying hard not to scream and rage smash my monitor, but we
need to pull down this piece of shit release ASAP.

Now I've just found out that digitizing features with snapping enabled
is completely broken in 3.18.0 -- see
https://github.com/qgis/QGIS/pull/41931

Nyall

From enricofer at gmail.com  Wed Feb  3 06:59:36 2021
From: enricofer at gmail.com (Enrico Ferreguti)
Date: Wed, 03 Feb 2021 14:59:36 -0000
Subject: [QGIS-Developer] Can't get values from QgsMeshLayer
In-Reply-To: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>
References: <CAJy=Xte685r11ZO5X=+KcoCr-mmhZqE070PEE3+HsDRevr2=7A@mail.gmail.com>
Message-ID: <CAJy=Xtei396bXM2b9Wp4oFE+4Lyy14qj8Grs-6XWNjYs_45==w@mail.gmail.com>

I miss the attachement

Il giorno mer 3 feb 2021 alle ore 15:58 Enrico Ferreguti <
enricofer at gmail.com> ha scritto:

> I'm trying to write a simple function for retrieving wind speed and
> direction at a specified moment from a given grib file readable as mesh
> layer the prototype script is the following:
>
> mesh = QgsMeshLayer("[path to the attached
> grib]/20210202_211414_ICON_EU_P06_.grb2","test","mdal")
> #mesh = iface.activeLayer()
> p1 = QgsPointXY(1.60301, 38.38453)
>
> ds_group_index = 1
>
> for g in mesh.datasetGroupsIndexes():
>     print ("MESH GROUP:", g,
> mesh.datasetGroupMetadata(mesh.datasetIndexAtRelativeTime(h0,g)).name())
>
> for i in range(mesh.dataProvider().datasetCount(ds_group_index)):
>     meta =
> mesh.dataProvider().datasetMetadata(QgsMeshDatasetIndex(ds_group_index, i))
>     t = meta.time()
>     dataset = QgsMeshDatasetIndex(ds_group_index, i)
>     value = mesh.datasetValue(dataset, p1)
>     print ("VALUES P1",t,value.scalar(),value.x(),value.y())
>
> When I run the script I can get dataset names from metadata but I'getting
> Nan as values
> I verified that the grib is loadable in mapcanvas and the sample point is
> within grib extent.
> I read the note in api (
> https://qgis.org/api/classQgsMeshLayer.html#a76a7ec072b4acaf45c1a10f5872c4948)
> "It uses previously cached and indexed triangular mesh and so if the layer
> has not been rendered previously (e.g. when used in a script) it returns
> NaN value" so I tried to process an already loaded mesh (decomment line 2)
> without luck.
>
> Is there anybody who can help me finding what I'm doing wrong? Thanks.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/d84bdcc9/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 20210202_211414_ICON_EU_P06_.grb2
Type: application/octet-stream
Size: 842284 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/d84bdcc9/attachment-0001.obj>

From charles at kartoza.com  Wed Feb  3 08:55:21 2021
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Wed, 03 Feb 2021 16:55:21 -0000
Subject: [QGIS-Developer] [ui] blue != blue
In-Reply-To: <AM0PR02MB44183E1A09AA7CAB190D966EF7B49@AM0PR02MB4418.eurprd02.prod.outlook.com>
References: <3b2fd113-74da-629e-48a5-a4942b12d90e@duif.net>
 <5c15032c-a5e9-aa0f-e44b-ae4bcbd5a779@duif.net>
 <CAK2KqicgknESMrDTXvEP7LpuiAGGPiSU7+x9L-YBoO1BaqOv3w@mail.gmail.com>
 <AM0PR02MB44183E1A09AA7CAB190D966EF7B49@AM0PR02MB4418.eurprd02.prod.outlook.com>
Message-ID: <CAK2KqieBjaYynbNGvpsYraGZSGLTxX0YJhXUwiC28Mqi_B-8-A@mail.gmail.com>

I didn't realise this chip was actually associated with HANAS. In that
case, the choice does make sense. Like I said, without using the SAP logo,
I can't think of a better option.

I would still suggest that the dark outer edge features surrounding the
chip be given a thin stroke of the light colour to improve visibility.

On Wed, 3 Feb 2021 at 18:01, Kemeter, Mathias <mathias.kemeter at sap.com>
wrote:

> Hi everyone,
>
>
>
> we actually discussed the branding topic quite a while internally with our
> marketing department and have learnt that
>
>    1. SAP Products (i.e. HANA) generally do not have official logos
>    2. It is allowed to use the SAP logo for this purpose, but prohibited
>    to change it in any way (even colors)
>
>
>
> Thus, we were not able to just use the SAP logo in a monochrome and
> QGIS-blueish version, which would have been our preferred option. We also
> found it quite odd to use the SAP logo as-is as it would look exotic in the
> list of similar-colored icons. So we decided to go for the famous SAP HANA
> ?in-memory chip?. This is not an official logo, but quite known by
> customers in terms of symbology. We took the in-memory chip shown here
> <https://developers.sap.com/mission.cloudsdk-cf-app.html> and adjusted
> the color to meet the QGIS colors (at least as good as we could).
>
>
>
> I have no strong feelings about changing colors, but the chip itself
> seemed the most viable option for us with a certain recognition factor.
>
>
>
> Btw, these were the suggestions made by our marketing folks, which are
> both not suitable for a 16x16 icon:
>
>
>
> Regards,
> Mathias
>
>
>
> *From: *QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> on behalf
> of Charles Dixon-Paver <charles at kartoza.com>
> *Date: *Wednesday, 3. February 2021 at 16:00
> *To: *Richard Duivenvoorde <rdmailings at duif.net>
> *Cc: *QGIS Developer <qgis-developer at lists.osgeo.org>
> *Subject: *Re: [QGIS-Developer] [ui] blue != blue
>
> From what I can see, the SAP HANA icon is "close enough" in colour scheme
> to the existing ones, as I checked the colours for the hana icon against
> the postgres one in inkscape and got these results:
>
>
>
> Postgis
>
> Fill: #6e97c4ff
> Stroke: #476280ff
>
> Hana:
> Fill: #6e97c4ff
> Stroke: #425a75ff
>
>
>
> The design isn't too off-putting, but I feel like there are issues with it:
>
>
>
> 1) The "bits" around the central chip are not visible against a dark
> background, so it's not a "good" design.
>
> 2) The generic computer component doesn't seem ideal. It's differentiated
> enough from existing providers to be useful, but it's generic enough that
> it should be used for some other button or component, not tied to a
> "branded" database.
>
>
>
> I would personally like to see it using the "SAP" logo, to make a "DB2"
> looking replacement, but it might not be ok with their corporate branding
> terms. I can't think of a great replacement off the top of my head though.
>
>
>
> The point cloud one I feel is pretty jarring and way off. I've attached an
> svg of what I think it should look like.
>
>
>
> On Wed, 3 Feb 2021 at 16:02, Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
> On 2/3/21 2:54 PM, Richard Duivenvoorde wrote:
> > Hi,
> >
> > Am I the only one, getting blind (not really, just finding it not so
> nice) of the different use of blue for Point Cloud in the Datasource button
> bars (like in the Data Source Manager).
>
> I do not have a really good feeling for colors, but recently also the Hana
> icons were added:
>
>
> https://github.com/qgis/QGIS/blob/master/images/themes/default/mActionAddHanaLayer.svg
>
> https://github.com/qgis/QGIS/blob/master/images/themes/default/mIconHana.svg
>
> does that 'fit' in the 'color scheme'? (asking to peeps with
> designer/cartography backgrounds)
>
> (not sure who did the earlier cleanup of our icon theme)
>
> Richard
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/02b3d6d9/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png[80].png
Type: image/png
Size: 2866714 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210203/02b3d6d9/attachment-0001.png>

