From stephenknox73 at gmail.com  Thu Jun  1 00:44:37 2023
From: stephenknox73 at gmail.com (Stephen Knox)
Date: Thu, 1 Jun 2023 08:44:37 +0100
Subject: [QGIS-Developer] Call of testing of nightlies on hi-dpi displays
In-Reply-To: <CAB28AsjS-RvvMNwtZy-6Ae3FXu5=u=-rCcnan993pZ4AbOFabw@mail.gmail.com>
References: <CAB28AshVeSS_KY28+BzK0cMpLf+G1YiXs6VkdbMBV1v5Cejf1Q@mail.gmail.com>
 <291ced80-de93-1194-7ec8-e9f59322c678@duif.net>
 <CAB28AsjS-RvvMNwtZy-6Ae3FXu5=u=-rCcnan993pZ4AbOFabw@mail.gmail.com>
Message-ID: <CAFkojsbTpwzONN0f4OxC_1eDh7nU1OdiEg8QUxP9=7Rm=8eHoQ@mail.gmail.com>

On 5/29/23 06:01, Nyall Dawson via QGIS-Developer wrote:
> Hi lists,
>
> For the upcoming QGIS 3.32 release a change has been made in how QGIS
> handles high dpi (and retina) displays. This should ultimately make
> QGIS behave MUCH better on these displays, but there's likely some
> short-term fallout and regressions caused by the change.

Hi,

Thank you for this Nyall.

It certainly makes a big difference on my display: https://imgur.com/a/lAmBaUw

Haven't found any areas where icons continue to be abnormally large
yet, apart from those identified, but will keep an eye out.

Stephen

On Tue, May 30, 2023 at 12:11?AM Nyall Dawson via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> On Mon, 29 May 2023 at 19:23, Richard Duivenvoorde <rdmailings at duif.net> wrote:
> >
> > Hi Nyall,
> >
> > Happy to do some testing, I do have a (dual boot) laptop/tablet with 3000x2000 screen (that's high-dpi, yes?), but in Gnome I set the Display 'Scale' on 200% to have proper applications (an to me readable text :-) ).
> >
> > Is there some test plan/idea's?
>
> There's a few things in particular we need to identify:
>
> - Widgets which are now showing as pixelated. Basically just hunt
> through the UI looking for things which look pixelated! This might be
> icons, graphics, or even just the drawing of the widget itself. You'll
> spot them immediately, as they clearly stand out. But there's a LOT of
> different dialogs/tabs/widgets/pages/... in QGIS and it will take some
> time to hunt through them all.
> - Icons/images which look the wrong size. Eg the marker symbols shown
> in the layer tree right now are incorrectly sized and will be half the
> size of the actual symbol shown on the map. That's a known regression,
> but there's likely others like this hiding around the place.
> - Text which is the wrong size. If something has a hard-coded sizing
> it's possible that we'll get fonts scaled badly, so if you spot any
> text which noticably looks incorrectly sized vs other UI elements then
> that's also something we need to fix.
>
> > Is my setup something you want to test (200%), or is is preferred to use the 100% scale?
>
> This is EXACTLY the kind of setup we need testing on! If the display
> scaling is set to 100% (in Windows, or Linux), then you'll see no
> difference between the old approach vs new. The new logic only kicks
> in when display scaling is present.
>
> > I'm not sure what is supposed to be the 'normal' way of scaling (like what does a mac do)?
>
> Things should just look perfect, regardless of whether or not display
> scaling is active :)
>
> Nyall
>
> > Or is it more to try to see if the icons/widgets scale up/down when fidling with scale (or what it is called in Windows)?
> >
> > Regards,
> >
> > Richard Duivenvoorde
> >
> > On 5/29/23 06:01, Nyall Dawson via QGIS-Developer wrote:
> > > Hi lists,
> > >
> > > For the upcoming QGIS 3.32 release a change has been made in how QGIS
> > > handles high dpi (and retina) displays. This should ultimately make
> > > QGIS behave MUCH better on these displays, but there's likely some
> > > short-term fallout and regressions caused by the change.
> > >
> > > If you've access to a high-dpi display, please test out the nightly
> > > releases and file bug reports on github for any regressions you spot
> > > -- in particular we are looking for widgets and places where the QGIS
> > > interface is now looking pixelated or where the scale / sizes of
> > > objects are incorrect.
> > >
> > > (Currently there's known regressions for the icons shown in the layer
> > > tree panel, and for pixelated icons in the style manager dialog.)
> > >
> > > Thanks in advance!
> > > Nyall
> > > _______________________________________________
> > > QGIS-Developer mailing list
> > > QGIS-Developer at lists.osgeo.org
> > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From a.neumann at carto.net  Thu Jun  1 01:00:20 2023
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 01 Jun 2023 10:00:20 +0200
Subject: [QGIS-Developer] Weird navigation issues in 3d view on Windows
Message-ID: <ea3b4623663c98283f24fd7332d4ac0f@carto.net>

Hi,

I recently had to switch my main laptop from Linux (previous employer) 
to Windows (new employer) - and with my new laptop I have very strange 
issues when navigating in 3D views in QGIS (tested with 3.28.7 and 
3.30.3 and master):

  	* the steps when navigating in the scene (left mouse button) are 
extremely small. When dragging the mouse substantially, only very tiny 
differences are visible in the 3d camera movement. When moving the mouse 
far, it would move a tiny bit and then suddenly "jump back"
  	* the middle mouse button which would normally rotate the whole scene 
now acts in "look around" mode
  	* zooming in and out with the third mouse button appears to have the 
same tiny steps like when navigating with the left mouse button
  	* changing the "movement speed" in Menu "Settings" --> "Options" --> 
"3D" doesn't improved things. Even when setting it to the maximum 
"99.9999", the steps for each movement are extremly tiny

Any idea how to improve the situation? Did others run into similar 
issues?

I initially thought that it might have something to do with the high 
resolution of the system (4k resolution) - but even when reducing the 
display resolution, the problems would remain.

The same project would work just fine on my previous Linux laptop.

Thank you for any hints on what could be wrong on my new Windows system?

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230601/ed485e08/attachment.htm>

From delazj at gmail.com  Thu Jun  1 02:36:32 2023
From: delazj at gmail.com (DelazJ)
Date: Thu, 1 Jun 2023 11:36:32 +0200
Subject: [QGIS-Developer] No module named 'qgslayoutchecker' using
 "qgis/qgis:latest"
In-Reply-To: <CAC7zN97OOtKXDpdqELTq3W1XVK2mLCCcvOR-bsDvUadr4Q6Jkg@mail.gmail.com>
References: <CADQ4pmD=prb+a4ksrR0Gg3LYpMu=FgPokLJUFnZfpHXDDH5fYQ@mail.gmail.com>
 <CAECJsSpLnbfC_TykfCD8KLbT_O2hD5VtXzC6NUMnht34VYoDSg@mail.gmail.com>
 <CAECJsSo+JCfJ3BWjrHtWUQyVyQHQ=oAiPwxP1Ef8NDe9iKNP1A@mail.gmail.com>
 <CAC7zN95oA3G3Q0cCDbnHsboKxbLxF=Ldwp6=VUyr+2YwnBjq=Q@mail.gmail.com>
 <CAC7zN97OOtKXDpdqELTq3W1XVK2mLCCcvOR-bsDvUadr4Q6Jkg@mail.gmail.com>
Message-ID: <CAECJsSrnOKT91eKhDB8BG9To_anM6SSMSy=L=MFmZ-4gKGE5aQ@mail.gmail.com>

Hi Matthias and list,

Thanks for the attempt but unfortunately this didn't solve the issue and
the doctest failure didn't stop popping. ;(
If ever someone wwants to give it another look, the docs repository
watchers would greatly appreciate.....

Greetings and thanks,
Harrissou

Le mar. 9 mai 2023 ? 14:43, Matthias Kuhn <matthias at opengis.ch> a ?crit :

> And it's open https://github.com/qgis/QGIS/pull/53053
>
> Thanks Paolo, thanks Harrissou
>
> On Tue, May 9, 2023 at 1:52?PM Matthias Kuhn <matthias at opengis.ch> wrote:
>
>> Hi Harrissou,
>>
>> I have a branch ready but github errors with 500 at the moment. As soon
>> as they got their services under control again, the PR will be opened
>>
>> Matthias
>>
>> On Tue, May 9, 2023 at 12:07?PM DelazJ via QGIS-Developer <
>> qgis-developer at lists.osgeo.org> wrote:
>>
>>> Hi devs,
>>>
>>> Can someone please give it a look. Having every single commit report a
>>> failure for no (valid) reason is quite noisy and annoying. (issue report at
>>> https://github.com/qgis/QGIS/issues/53051)
>>>
>>> Thanks,
>>> Harrissou
>>>
>>> Le mar. 2 mai 2023 ? 10:02, DelazJ <delazj at gmail.com> a ?crit :
>>>
>>>> Hi Paolo,
>>>> Yes, we do have the same problems with testing in QGIS-Documentation
>>>> repository, for everything related to master branch (
>>>> https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml?query=branch%3Amaster).
>>>> 3.28 is fine.
>>>>
>>>> Regards,
>>>> Harrissou
>>>>
>>>> Le mar. 2 mai 2023 ? 08:44, Paolo Tormene via QGIS-Developer <
>>>> qgis-developer at lists.osgeo.org> a ?crit :
>>>>
>>>>> Dear QGIS people,
>>>>> I am running continuous integration tests for a plugin using the
>>>>> 'qgis/qgis:latest' docker and, since 4 days ago, I am getting the following
>>>>> error:
>>>>>
>>>>> from qgis.testing import start_app
>>>>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>>>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>>>> usr/lib/python3/dist-packages/qgis/testing/__init__.py:56: in <module>
>>>>>     from qgslayoutchecker import QgsLayoutChecker
>>>>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>>>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>>>> E   ModuleNotFoundError: No module named 'qgslayoutchecker'
>>>>>
>>>>> Please note that the same tests run without issues using the
>>>>> 'qgis/qgis:release-3_22' docker instead.
>>>>> Has anyone experienced the same problem?
>>>>>
>>>>> Thank you and best regards,
>>>>> Paolo
>>>>>
>>>>> --
>>>>>
>>>>> *PAOLO TORMENE* senior software developer +39 0382 5169882
>>>>>
>>>>> *GLOBAL EARTHQUAKE MODEL * working together to assess risk
>>>>>
>>>>> *GEM -* globalquakemodel.org <http://www.globalquakemodel.org> *T -*
>>>>> @GEMwrld <http://twitter.com/GEMwrld> *F -* GEMwrld
>>>>> <http://www.facebook.com/GEMwrld>
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230601/882b4fed/attachment.htm>

From delazj at gmail.com  Fri Jun  2 01:57:16 2023
From: delazj at gmail.com (DelazJ)
Date: Fri, 2 Jun 2023 10:57:16 +0200
Subject: [QGIS-Developer] No module named 'qgslayoutchecker' using
 "qgis/qgis:latest"
In-Reply-To: <CAECJsSrnOKT91eKhDB8BG9To_anM6SSMSy=L=MFmZ-4gKGE5aQ@mail.gmail.com>
References: <CADQ4pmD=prb+a4ksrR0Gg3LYpMu=FgPokLJUFnZfpHXDDH5fYQ@mail.gmail.com>
 <CAECJsSpLnbfC_TykfCD8KLbT_O2hD5VtXzC6NUMnht34VYoDSg@mail.gmail.com>
 <CAECJsSo+JCfJ3BWjrHtWUQyVyQHQ=oAiPwxP1Ef8NDe9iKNP1A@mail.gmail.com>
 <CAC7zN95oA3G3Q0cCDbnHsboKxbLxF=Ldwp6=VUyr+2YwnBjq=Q@mail.gmail.com>
 <CAC7zN97OOtKXDpdqELTq3W1XVK2mLCCcvOR-bsDvUadr4Q6Jkg@mail.gmail.com>
 <CAECJsSrnOKT91eKhDB8BG9To_anM6SSMSy=L=MFmZ-4gKGE5aQ@mail.gmail.com>
Message-ID: <CAECJsSqhuaAFVDjfmu6TPHFW7Oue07KumHXMLofWt+_WdRgZ4Q@mail.gmail.com>

Hello,

Thanks Matthias for the new pull request. Green is back to the repo ?!

Greetings,
Harrissou

Le jeu. 1 juin 2023 ? 11:36, DelazJ <delazj at gmail.com> a ?crit :

> Hi Matthias and list,
>
> Thanks for the attempt but unfortunately this didn't solve the issue and
> the doctest failure didn't stop popping. ;(
> If ever someone wwants to give it another look, the docs repository
> watchers would greatly appreciate.....
>
> Greetings and thanks,
> Harrissou
>
> Le mar. 9 mai 2023 ? 14:43, Matthias Kuhn <matthias at opengis.ch> a ?crit :
>
>> And it's open https://github.com/qgis/QGIS/pull/53053
>>
>> Thanks Paolo, thanks Harrissou
>>
>> On Tue, May 9, 2023 at 1:52?PM Matthias Kuhn <matthias at opengis.ch> wrote:
>>
>>> Hi Harrissou,
>>>
>>> I have a branch ready but github errors with 500 at the moment. As soon
>>> as they got their services under control again, the PR will be opened
>>>
>>> Matthias
>>>
>>> On Tue, May 9, 2023 at 12:07?PM DelazJ via QGIS-Developer <
>>> qgis-developer at lists.osgeo.org> wrote:
>>>
>>>> Hi devs,
>>>>
>>>> Can someone please give it a look. Having every single commit report a
>>>> failure for no (valid) reason is quite noisy and annoying. (issue report at
>>>> https://github.com/qgis/QGIS/issues/53051)
>>>>
>>>> Thanks,
>>>> Harrissou
>>>>
>>>> Le mar. 2 mai 2023 ? 10:02, DelazJ <delazj at gmail.com> a ?crit :
>>>>
>>>>> Hi Paolo,
>>>>> Yes, we do have the same problems with testing in QGIS-Documentation
>>>>> repository, for everything related to master branch (
>>>>> https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml?query=branch%3Amaster).
>>>>> 3.28 is fine.
>>>>>
>>>>> Regards,
>>>>> Harrissou
>>>>>
>>>>> Le mar. 2 mai 2023 ? 08:44, Paolo Tormene via QGIS-Developer <
>>>>> qgis-developer at lists.osgeo.org> a ?crit :
>>>>>
>>>>>> Dear QGIS people,
>>>>>> I am running continuous integration tests for a plugin using the
>>>>>> 'qgis/qgis:latest' docker and, since 4 days ago, I am getting the following
>>>>>> error:
>>>>>>
>>>>>> from qgis.testing import start_app
>>>>>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>>>>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>>>>> usr/lib/python3/dist-packages/qgis/testing/__init__.py:56: in <module>
>>>>>>     from qgslayoutchecker import QgsLayoutChecker
>>>>>> usr/lib/python3/dist-packages/qgis/utils.py:888: in _import
>>>>>>     mod = _builtin_import(name, globals, locals, fromlist, level)
>>>>>> E   ModuleNotFoundError: No module named 'qgslayoutchecker'
>>>>>>
>>>>>> Please note that the same tests run without issues using the
>>>>>> 'qgis/qgis:release-3_22' docker instead.
>>>>>> Has anyone experienced the same problem?
>>>>>>
>>>>>> Thank you and best regards,
>>>>>> Paolo
>>>>>>
>>>>>> --
>>>>>>
>>>>>> *PAOLO TORMENE* senior software developer +39 0382 5169882
>>>>>>
>>>>>> *GLOBAL EARTHQUAKE MODEL * working together to assess risk
>>>>>>
>>>>>> *GEM -* globalquakemodel.org <http://www.globalquakemodel.org> *T -*
>>>>>> @GEMwrld <http://twitter.com/GEMwrld> *F -* GEMwrld
>>>>>> <http://www.facebook.com/GEMwrld>
>>>>>> _______________________________________________
>>>>>> QGIS-Developer mailing list
>>>>>> QGIS-Developer at lists.osgeo.org
>>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>>
>>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230602/f6564839/attachment.htm>

From afernandez at odyhpc.com  Fri Jun  2 04:10:10 2023
From: afernandez at odyhpc.com (afernandez)
Date: Fri, 02 Jun 2023 11:10:10 +0000
Subject: [QGIS-Developer] How to speed up rendering
References: <e21a8957d93ac.fdc1a37f179d6@odyhpc.com>
 <CAC2XbFdWLu-0VKRWYK-YF0XSN5FSoFHfX8Ztm6R6HTfcPa4MNw@mail.gmail.com>
 <e4867467c3728.ad83e8afff7c4@odyhpc.com>
 <3ea1f315-669a-6d32-e5c6-7bbbc74e153f@wheregroup.com>
 <94f0f2109f8d9.1cf2e804640c7@odyhpc.com>
 <30fa9644-162b-8e44-b26c-54049d63c86a@wheregroup.com>
Message-ID: <51fd8ddaf6b86.5cc65b3b845db@odyhpc.com>

Hello Hannes, Andreas and Ian,
Thank you for the links. They have been really useful for understanding the overviews/pyramids concept. I'm still experimenting but was able to decrease the file size. 
Thanks,
Arturo
Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
Sorry Arturo,
I totally missed that Martin had already recommended it and that you said you didn't know about it. I didn't mean to come across pushy or anything :))
Andreas' links are great to see how to create them. Here is a nice post that explains the concept: https://developers.planet.com/docs/planetschool/an-introduction-to-cloud-optimized-geotiffs-cogs-part-1-overview/ <https://developers.planet.com/docs/planetschool/an-introduction-to-cloud-optimized-geotiffs-cogs-part-1-overview/> 
As you can see there you probably also want to created "tiled" TIFFs, where the data internal to the TIFF is arranged in a way that fits spatial queries better.
If you can, simply specify that you want "cloud-optimized geotiffs", those have all these optimisations and are also "typical spatial analysis optimized geotiffs".
Cheers, Hannes
Am 30.05.23 um 14:37 schrieb afernandez via QGIS-Developer:
Hello Hannes,
Sorry to say that I'm at a loss here. I had not previously heard of 'overviews' and am having a hard time finding much information. I couldn't find anything in the PyQGIS (v3.28) developer cookbook, which is my main reference in this QGIS journey. The found information is at https://docs.qgis.org/3.28/en/docs/user_manual/processing_algs/gdal/rastermiscellaneous.html <https://docs.qgis.org/3.28/en/docs/user_manual/processing_algs/gdal/rastermiscellaneous.html> but didn't exactly clarify how to implement overviews with a script or why this would sidestep reading the file several times. I don't quite understand this last point either, as the file is large but the size of the band (after everything is prepped and before rendering) is relatively small, and should fit amply into the available memory.
Thanks,
Arturo
Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
Hi Arturo,
make sure you create overviews on your big rasters or QGIS will re-read the whole file all the time to render an appropriate representation in the map.
Cheers, Hannes
Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
Hello Martin,
I'm trying to understand what you're saying but my background is in numerical methods where tasks are split into threads for acceleration purposes. If a single layer is rendered by a single core (as you write and I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? (However, you want to define 'too long'). 
As far as more details about the process, the tensor 'var' (n x m x index where I have tried different combinations but let's say n x m is 100 x 200) of floating point numbers is manipulated according to the following pseudo-code:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This procedure seems to work well and takes a reasonable amount of time. Then, the time is consumed when doing the rendering itself. I'm not entirely sure what you mean by 'sub-optimal raster format' or 'thre are overviews missing' so I cannot address them specifically.
Thanks,
Arturo
Martin Dobias wrote:
Hi
On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org> > wrote:
Hello,
One of my project would greatly benefit from a much faster rendering. After some testing, the bulk (>99%) of the time is spent at rendering the layer with QgsRasterLayer(...,...). What I have also noticed is that rendering time does not change with the number of cores, which suggests that the renderer might be using a single thread. I checked the API documentation but couldn't find anything about multithreading or some other procedure to accelerate rendering. I was wondering if anyone has any suggestion or has faced a similar difficulty. 
Multi-threaded rendering is done at the granularity of whole map layers, so a single layer is rendered by a single CPU core. Therefore if you have just one layer that is slow to render, the multi-threading is not going to help. It is best to do some testing how you can improve the layer's rendering - for example, it could be that you are using some sub-optimal raster format, or there are overviews missing, or something else... one would need more details.
Regards
Martin
_______________________________________________ QGIS-Developer mailing list QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> -- Johannes Kr?ger / GIS-Entwickler/-Berater --------------------------------------------- Aufwind durch Wissen! Web-Seminare und Online-Schulungen bei der www.foss-academy.com <http://www.foss-academy.com> --------------------------------------------- WhereGroup GmbH c/o KK03 GmbH Lange Reihe 29 20099 Hamburg Germany Tel: +49 (0)228 / 90 90 38 - 36 Fax: +49 (0)228 / 90 90 38 - 11 johannes.kroeger at wheregroup.com <mailto:johannes.kroeger at wheregroup.com> www.wheregroup.com <http://www.wheregroup.com> Gesch?ftsf?hrer: Olaf Knopp, Peter Stamm Amtsgericht Bonn, HRB 9885 ------------------------------- 
Hi Arturo,
make sure you create overviews on your big rasters or QGIS will re-read the whole file all the time to render an appropriate representation in the map.
Cheers, Hannes
Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
Hello Martin,
I'm trying to understand what you're saying but my background is in numerical methods where tasks are split into threads for acceleration purposes. If a single layer is rendered by a single core (as you write and I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? (However, you want to define 'too long'). 
As far as more details about the process, the tensor 'var' (n x m x index where I have tried different combinations but let's say n x m is 100 x 200) of floating point numbers is manipulated according to the following pseudo-code:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This procedure seems to work well and takes a reasonable amount of time. Then, the time is consumed when doing the rendering itself. I'm not entirely sure what you mean by 'sub-optimal raster format' or 'thre are overviews missing' so I cannot address them specifically.
Thanks,
Arturo
Martin Dobias wrote:
Hi
On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org> > wrote:
Hello,
One of my project would greatly benefit from a much faster rendering. After some testing, the bulk (>99%) of the time is spent at rendering the layer with QgsRasterLayer(...,...). What I have also noticed is that rendering time does not change with the number of cores, which suggests that the renderer might be using a single thread. I checked the API documentation but couldn't find anything about multithreading or some other procedure to accelerate rendering. I was wondering if anyone has any suggestion or has faced a similar difficulty. 
Multi-threaded rendering is done at the granularity of whole map layers, so a single layer is rendered by a single CPU core. Therefore if you have just one layer that is slow to render, the multi-threading is not going to help. It is best to do some testing how you can improve the layer's rendering - for example, it could be that you are using some sub-optimal raster format, or there are overviews missing, or something else... one would need more details.
Regards
Martin
_______________________________________________ QGIS-Developer mailing list QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> -- Johannes Kr?ger / GIS-Entwickler/-Berater --------------------------------------------- Aufwind durch Wissen! Web-Seminare und Online-Schulungen bei der www.foss-academy.com <http://www.foss-academy.com> --------------------------------------------- WhereGroup GmbH c/o KK03 GmbH Lange Reihe 29 20099 Hamburg Germany Tel: +49 (0)228 / 90 90 38 - 36 Fax: +49 (0)228 / 90 90 38 - 11 johannes.kroeger at wheregroup.com <mailto:johannes.kroeger at wheregroup.com> www.wheregroup.com <http://www.wheregroup.com> Gesch?ftsf?hrer: Olaf Knopp, Peter Stamm Amtsgericht Bonn, HRB 9885 ------------------------------- 
_______________________________________________ QGIS-Developer mailing list QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> -- Johannes Kr?ger / GIS-Entwickler/-Berater --------------------------------------------- Aufwind durch Wissen! Web-Seminare und Online-Schulungen bei der www.foss-academy.com <http://www.foss-academy.com> --------------------------------------------- WhereGroup GmbH c/o KK03 GmbH Lange Reihe 29 20099 Hamburg Germany Tel: +49 (0)228 / 90 90 38 - 36 Fax: +49 (0)228 / 90 90 38 - 11 johannes.kroeger at wheregroup.com <mailto:johannes.kroeger at wheregroup.com> www.wheregroup.com <http://www.wheregroup.com> Gesch?ftsf?hrer: Olaf Knopp, Peter Stamm Amtsgericht Bonn, HRB 9885 ------------------------------- 
Sorry Arturo,
I totally missed that Martin had already recommended it and that you said you didn't know about it. I didn't mean to come across pushy or anything :))
Andreas' links are great to see how to create them. Here is a nice post that explains the concept: https://developers.planet.com/docs/planetschool/an-introduction-to-cloud-optimized-geotiffs-cogs-part-1-overview/ <https://developers.planet.com/docs/planetschool/an-introduction-to-cloud-optimized-geotiffs-cogs-part-1-overview/> 
As you can see there you probably also want to created "tiled" TIFFs, where the data internal to the TIFF is arranged in a way that fits spatial queries better.
If you can, simply specify that you want "cloud-optimized geotiffs", those have all these optimisations and are also "typical spatial analysis optimized geotiffs".
Cheers, Hannes
Am 30.05.23 um 14:37 schrieb afernandez via QGIS-Developer:
Hello Hannes,
Sorry to say that I'm at a loss here. I had not previously heard of 'overviews' and am having a hard time finding much information. I couldn't find anything in the PyQGIS (v3.28) developer cookbook, which is my main reference in this QGIS journey. The found information is at https://docs.qgis.org/3.28/en/docs/user_manual/processing_algs/gdal/rastermiscellaneous.html <https://docs.qgis.org/3.28/en/docs/user_manual/processing_algs/gdal/rastermiscellaneous.html> but didn't exactly clarify how to implement overviews with a script or why this would sidestep reading the file several times. I don't quite understand this last point either, as the file is large but the size of the band (after everything is prepped and before rendering) is relatively small, and should fit amply into the available memory.
Thanks,
Arturo
Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
Hi Arturo,
make sure you create overviews on your big rasters or QGIS will re-read the whole file all the time to render an appropriate representation in the map.
Cheers, Hannes
Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
Hello Martin,
I'm trying to understand what you're saying but my background is in numerical methods where tasks are split into threads for acceleration purposes. If a single layer is rendered by a single core (as you write and I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? (However, you want to define 'too long'). 
As far as more details about the process, the tensor 'var' (n x m x index where I have tried different combinations but let's say n x m is 100 x 200) of floating point numbers is manipulated according to the following pseudo-code:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This procedure seems to work well and takes a reasonable amount of time. Then, the time is consumed when doing the rendering itself. I'm not entirely sure what you mean by 'sub-optimal raster format' or 'thre are overviews missing' so I cannot address them specifically.
Thanks,
Arturo
Martin Dobias wrote:
Hi
On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org> > wrote:
Hello,
One of my project would greatly benefit from a much faster rendering. After some testing, the bulk (>99%) of the time is spent at rendering the layer with QgsRasterLayer(...,...). What I have also noticed is that rendering time does not change with the number of cores, which suggests that the renderer might be using a single thread. I checked the API documentation but couldn't find anything about multithreading or some other procedure to accelerate rendering. I was wondering if anyone has any suggestion or has faced a similar difficulty. 
Multi-threaded rendering is done at the granularity of whole map layers, so a single layer is rendered by a single CPU core. Therefore if you have just one layer that is slow to render, the multi-threading is not going to help. It is best to do some testing how you can improve the layer's rendering - for example, it could be that you are using some sub-optimal raster format, or there are overviews missing, or something else... one would need more details.
Regards
Martin
_______________________________________________ QGIS-Developer mailing list QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> -- Johannes Kr?ger / GIS-Entwickler/-Berater --------------------------------------------- Aufwind durch Wissen! Web-Seminare und Online-Schulungen bei der www.foss-academy.com <http://www.foss-academy.com> --------------------------------------------- WhereGroup GmbH c/o KK03 GmbH Lange Reihe 29 20099 Hamburg Germany Tel: +49 (0)228 / 90 90 38 - 36 Fax: +49 (0)228 / 90 90 38 - 11 johannes.kroeger at wheregroup.com <mailto:johannes.kroeger at wheregroup.com> www.wheregroup.com <http://www.wheregroup.com> Gesch?ftsf?hrer: Olaf Knopp, Peter Stamm Amtsgericht Bonn, HRB 9885 ------------------------------- 
Hi Arturo,
make sure you create overviews on your big rasters or QGIS will re-read the whole file all the time to render an appropriate representation in the map.
Cheers, Hannes
Am 30.05.23 um 04:35 schrieb afernandez via QGIS-Developer:
Hello Martin,
I'm trying to understand what you're saying but my background is in numerical methods where tasks are split into threads for acceleration purposes. If a single layer is rendered by a single core (as you write and I was observing), how would a 1,000 x 1,000 (or a 5,000 x 5,000) layer be handled? Wouldn't it take too long? (However, you want to define 'too long'). 
As far as more details about the process, the tensor 'var' (n x m x index where I have tried different combinations but let's say n x m is 100 x 200) of floating point numbers is manipulated according to the following pseudo-code:
# Initial manipulations
dims = var.dimensions
shape = var.shape
driver_name = 'GTIFF'
driver = gdal.GetDriverByName(driver_name) 
np_dtype = var.dtype
type_code = gdal_array.NumericTypeCodeToGDALTypeCode(np_dtype)
gdal_ds = driver.Create(_my_path_, cols, rows, 1, gdal.GDT_UInt16) 
gdal_ds.SetProjection(_my_projection_)
gdal_ds.SetGeoTransform(_my_transformation_)
# Creation of the bands and scaled matrix 
band = gdal_ds.GetRasterBand(1) 
data = var[_chosen_index_]
data = ma.getdata(data)
data_scaled = np.interp(data, (data.min(), data.max()), (0, 255))
data_scaled2 = data_scaled.astype(int) # This is to rescale into integers so that it can color the layer
# *** Lines to set up the color palette ***
# Write the array to band once everything has been rescaled
band.WriteArray(data_scaled2)
gdal_ds.FlushCache() 
This procedure seems to work well and takes a reasonable amount of time. Then, the time is consumed when doing the rendering itself. I'm not entirely sure what you mean by 'sub-optimal raster format' or 'thre are overviews missing' so I cannot address them specifically.
Thanks,
Arturo
Martin Dobias wrote:
Hi
On Fri, May 26, 2023 at 11:30?PM afernandez via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org> > wrote:
Hello,
One of my project would greatly benefit from a much faster rendering. After some testing, the bulk (>99%) of the time is spent at rendering the layer with QgsRasterLayer(...,...). What I have also noticed is that rendering time does not change with the number of cores, which suggests that the renderer might be using a single thread. I checked the API documentation but couldn't find anything about multithreading or some other procedure to accelerate rendering. I was wondering if anyone has any suggestion or has faced a similar difficulty. 
Multi-threaded rendering is done at the granularity of whole map layers, so a single layer is rendered by a single CPU core. Therefore if you have just one layer that is slow to render, the multi-threading is not going to help. It is best to do some testing how you can improve the layer's rendering - for example, it could be that you are using some sub-optimal raster format, or there are overviews missing, or something else... one would need more details.
Regards
Martin
_______________________________________________ QGIS-Developer mailing list QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> -- Johannes Kr?ger / GIS-Entwickler/-Berater --------------------------------------------- Aufwind durch Wissen! Web-Seminare und Online-Schulungen bei der www.foss-academy.com <http://www.foss-academy.com> --------------------------------------------- WhereGroup GmbH c/o KK03 GmbH Lange Reihe 29 20099 Hamburg Germany Tel: +49 (0)228 / 90 90 38 - 36 Fax: +49 (0)228 / 90 90 38 - 11 johannes.kroeger at wheregroup.com <mailto:johannes.kroeger at wheregroup.com> www.wheregroup.com <http://www.wheregroup.com> Gesch?ftsf?hrer: Olaf Knopp, Peter Stamm Amtsgericht Bonn, HRB 9885 ------------------------------- 
_______________________________________________ QGIS-Developer mailing list QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer> -- Johannes Kr?ger / GIS-Entwickler/-Berater --------------------------------------------- Aufwind durch Wissen! Web-Seminare und Online-Schulungen bei der www.foss-academy.com <http://www.foss-academy.com> --------------------------------------------- WhereGroup GmbH c/o KK03 GmbH Lange Reihe 29 20099 Hamburg Germany Tel: +49 (0)228 / 90 90 38 - 36 Fax: +49 (0)228 / 90 90 38 - 11 johannes.kroeger at wheregroup.com <mailto:johannes.kroeger at wheregroup.com> www.wheregroup.com <http://www.wheregroup.com> Gesch?ftsf?hrer: Olaf Knopp, Peter Stamm Amtsgericht Bonn, HRB 9885 ------------------------------- 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230602/7d1516c7/attachment-0001.htm>

From johannes.kroeger at wheregroup.com  Fri Jun  2 05:19:35 2023
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Fri, 2 Jun 2023 14:19:35 +0200
Subject: [QGIS-Developer] Properly terminating a QgsTask?
Message-ID: <3e177275-e9c7-7efb-ac33-30823c6e243c@wheregroup.com>

Hi,

https://qgis.org/pyqgis/3.30/core/QgsTask.html says

 > Long running tasks should periodically check the isCanceled() flag to 
detect if the task has been canceled via some external event. If this 
flag is True then the task should clean up and terminate at the earliest 
possible convenience.

How are we supposed to "terminate" a task properly?

If we check for task.isCanceled() (or call task.cancel() ourselves for 
testing) and simply return:

- QGIS will still show a notification that the "Task completed" (instead 
of "Task failed") 
(https://github.com/qgis/QGIS/blob/d3d0431685883b837caa571ad7282828cfbde65e/src/app/qgisapp.cpp#L15707)

- The taskTerminated signal is not emitted. But the taskCompleted signal 
is emitted.

- The task's status is QgsTask.Complete

There is no obvious way to "terminate" the task from the Python side. We 
cannot set the task's status attribute to QgsTask.Terminated 
(https://qgis.org/pyqgis/3.30/core/QgsTask.html#qgis.core.QgsTask.Terminated).


If an exception happens in the task then it seems to terminate 
"properly", i.e. its status will be QgsTask.Terminated, the 
taskTerminated signal is emitted and a notification "Task failed" is 
shown. This is the only way I found today to get into this state. I have 
not found this documented and only by accident...


Example for a QgsTask.fromFuncction(..., flags=QgsTask.CanCancel), 
uncomment one of the final lines:

def foo(task):
 ??????? time.sleep(6)? # must be >= minTaskLengthForSystemNotification 
(5 by default)
 ??????? #task.cancel(); return? # -> Task complete
 ??????? #raise Exception("fail plz")? # -> Task failed


It feels like a bug to me (either task.cancel should directly set its 
status to QgsTask.Terminated or we should have a task.setStatus() 
method) but everything in and around QgsTask is fairly opaque and hard 
to grasp so maybe I am just missing something obvious.

Cheers, Hannes


PS: I did not test the example function in a clean environment, in my 
test cases I have code like this as methods of a class.

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei der www.foss-academy.com
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------


From maayang at cybergym.com  Sun Jun  4 06:47:51 2023
From: maayang at cybergym.com (Maayan Grinshtat | CyberGymIEC)
Date: Sun, 4 Jun 2023 13:47:51 +0000
Subject: [QGIS-Developer] consultation regarding the using the qgis platform
Message-ID: <DU0PR01MB9502178284BB4FB204934B5BD54CA@DU0PR01MB9502.eurprd01.prod.exchangelabs.com>

Hi,

If this is the wrong list or the wrong question, please let me know.

I am looking for a platform to display many points and polylines on map with lang and long that will be read from SQL management .
Also, I need for each point open a popup that will display information from the db. with ability to update this information, update the db., and render the map every 3 sec .

I use the qgis desktop v3.28.6 to build server but when I upload the server using Apache the map display as image and I can't click on the point to open the popup.
I will be glad to know if it's possible to do my description with the QGIS-SERVER VERSION 3.28.6 and qwc2 .


Thanks,
Maayan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230604/abd3b07c/attachment.htm>

From lorenzetti at gis3w.it  Mon Jun  5 00:26:31 2023
From: lorenzetti at gis3w.it (Walter Lorenzetti)
Date: Mon, 5 Jun 2023 09:26:31 +0200
Subject: [QGIS-Developer] GeoFerver canno't read QGIS server WFS Services
In-Reply-To: <ea9005ef-10bb-7a2f-af25-7fe8a7304b18@gmail.com>
References: <8e77c290-9600-5c17-5b47-02d52dd1f67c@gis3w.it>
 <ea9005ef-10bb-7a2f-af25-7fe8a7304b18@gmail.com>
Message-ID: <9600c423-b375-f550-6579-26bbf19c7e77@gis3w.it>

Hi Ren?-Luc,

yes it fail on DescribeFeatureType.

This is the repsonse of QGIS 3.28.7:

<schema xmlns:gml="http://www.opengis.net/gml" 
targetNamespace="http://www.qgis.org/gml" 
xmlns="http://www.w3.org/2001/XMLSchema" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" version="1.0" 
xmlns:qgs="http://www.qgis.org/gml" 
xmlns:ogc="http://www.opengis.net/ogc" elementFormDefault="qualified">
 ?<import 
schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" 
namespace="http://www.opengis.net/gml"/>
 ?<element name="buildings" substitutionGroup="gml:_Feature" 
type="qgs:buildingsType"/>
 ?<complexType name="buildingsType">
 ? <complexContent>
 ?? <extension base="gml:AbstractFeatureType">
 ??? <sequence>
 ???? <element maxOccurs="1" name="geometry" minOccurs="0" 
type="gml:MultiSurfacePropertyType"/>
 ???? <element name="fid" alias="ID" type="long"/>
 ???? <element name="name" alias="Name" type="string"/>
 ???? <element name="address" alias="Address" type="string" 
nillable="true"/>
 ???? <element name="year" alias="Year of construction" type="long"/>
 ???? <element name="photo" alias="Photo" type="string" nillable="true"/>
 ???? <element name="link" alias="Link" type="string" nillable="true"/>
 ???? <element name="form" alias="Form" type="string" nillable="true"/>
 ???? <element name="high" alias="High" type="long"/>
 ???? <element name="volume" alias="Volume" type="long" nillable="true"/>
 ???? <element name="surface" alias="Surface (based on QGIS expression)" 
type="decimal" nillable="true"/>
 ???? <element name="architectural_barriers" alias="Architectural 
barriers" type="string" nillable="true"/>
 ???? <element name="date_barriers" alias="Date" type="date" 
nillable="true"/>
 ???? <element name="safety_exits" alias="Safety exits" type="string" 
nillable="true"/>
 ???? <element name="date_exits" alias="Date" type="date" nillable="true"/>
 ???? <element name="fire_system" alias="Fire system" type="string" 
nillable="true"/>
 ???? <element name="date_fire" alias="Date" type="date" nillable="true"/>
 ???? <element name="type" alias="Type" type="string"/>
 ???? <element name="zone" alias="Zone (based on QGIS expression)" 
type="string" nillable="true"/>
 ???? <element name="attachment" alias="Documents to be attached" 
type="long" nillable="true"/>
 ???? <element name="subtype" alias="Subtype - Dependent on the value of 
Type" type="string" nillable="true"/>
 ???? <element name="user" alias="User last modification" type="string" 
nillable="true"/>
 ???? <element name="description" alias="Description" type="string" 
nillable="true"/>
 ??? </sequence>
 ?? </extension>
 ? </complexContent>
 ?</complexType>
</schema>

and following a DescribeFeatureType response which does not fail on 
geoservers from a Italy government? service:

http://wms.pcn.minambiente.it/ogc?map=/ms_ogc/wfs/Alluvioni_Estensione.map&TYPENAME=ITH2018_Estensione_LPH&REQUEST=DescribeFeatureType&VERSION=1.1.0&SERVICE=WFS

<?xml version='1.0' encoding="ISO-8859-1" ?>
<schema
 ?? targetNamespace="http://mapserver.gis.umn.edu/mapserver"
 ?? xmlns:ms="http://mapserver.gis.umn.edu/mapserver"
 ?? xmlns:ogc="http://www.opengis.net/ogc"
 ?? xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 ?? xmlns="http://www.w3.org/2001/XMLSchema"
 ?? xmlns:gml="http://www.opengis.net/gml"
 ?? elementFormDefault="qualified" version="0.1" >

 ? <import namespace="http://www.opengis.net/gml"
 ????????? 
schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" />

 ? <element name="ITH2018_Estensione_LPH"
 ?????????? type="ms:ITH2018_Estensione_LPHType"
 ?????????? substitutionGroup="gml:_Feature" />

 ? <complexType name="ITH2018_Estensione_LPHType">
 ??? <complexContent>
 ????? <extension base="gml:AbstractFeatureType">
 ??????? <sequence>
 ????????? <element name="boundary" type="gml:SurfacePropertyType" 
minOccurs="0" maxOccurs="unbounded"/>
 ????????? <element name="id" type="string"/>
 ????????? <element name="rbdname" type="string"/>
 ????????? <element name="uomcode" type="string"/>
 ????????? <element name="apsfrcode" type="string"/>
 ????????? <element name="category" type="string"/>
 ????????? <element name="eu_cd_hp" type="string"/>
 ????????? <element name="source" type="string"/>
 ????????? <element name="character" type="string"/>
 ????????? <element name="mechanism" type="string"/>
 ????????? <element name="frequency" type="string"/>
 ????????? <element name="namespace" type="string"/>
 ????????? <element name="beginlife" type="string"/>
 ????????? <element name="detmetod" type="string"/>
 ??????? </sequence>
 ????? </extension>
 ??? </complexContent>
 ? </complexType>

</schema>


I can't see a substantial difference :(

W

Il 31/05/23 15:28, Ren?-Luc Dhont via QGIS-Developer ha scritto:
> Hi Walter,
>
> You have to check the result of DescribeFeatureType WFS Request.
> This request has to provide the XSD to validate the GML.
>
> Regards,
> Ren?-Luc
>
> Le 31/05/2023 ? 14:59, Walter Lorenzetti via QGIS-Developer a ?crit?:
>>
>> Hi,
>>
>> when I try to add a WFS service layer to a GeoServer instance I get 
>> an exception like this:
>>
>> ```
>>
>> ...
>>
>> Caused by: java.lang.RuntimeException: 
>> org.geotools.data.DataSourceException: No XSDElementDeclaration found 
>> for {http://www.opengis.net/wfs}Particelle_terreni_e_fabbricati
>> ?? ?at 
>> org.geotools.data.store.ContentFeatureSource.getAbsoluteSchema(ContentFeatureSource.java:329)
>> ?? ?at 
>> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:296)
>> ?? ?at 
>> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:105)
>> ?? ?at 
>> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:342)
>> ?? ?at 
>> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:325)
>> ?? ?at 
>> org.geoserver.web.data.layer.NewLayerPage.buildLayerInfo(NewLayerPage.java:409)
>>
>> ...
>>
>> ```
>>
>> Any idea about this issue? It seams a XML error validation..
>>
>> Thanks in advance.
>>
>> W
>>
>>
>> -- 
>>
>> Walter Lorenzetti phD
>> email: lorenzetti at gis3w.it
>> site: gis3w.it <https://gis3w.it>
>> twitter: w_lorenzetti
>> Tel/Cell: (+39) 347-6597931
>> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-- 

Walter Lorenzetti phD
email: lorenzetti at gis3w.it
site: gis3w.it <https://gis3w.it>
twitter: w_lorenzetti
Tel/Cell: (+39) 347-6597931
Viale Verdi 24 - 51016 Montecatini Terme (PT)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230605/e2924339/attachment.htm>

From rldhont at gmail.com  Mon Jun  5 00:59:41 2023
From: rldhont at gmail.com (=?UTF-8?Q?Ren=c3=a9-Luc_Dhont?=)
Date: Mon, 5 Jun 2023 09:59:41 +0200
Subject: [QGIS-Developer] GeoFerver canno't read QGIS server WFS Services
In-Reply-To: <9600c423-b375-f550-6579-26bbf19c7e77@gis3w.it>
References: <8e77c290-9600-5c17-5b47-02d52dd1f67c@gis3w.it>
 <ea9005ef-10bb-7a2f-af25-7fe8a7304b18@gmail.com>
 <9600c423-b375-f550-6579-26bbf19c7e77@gis3w.it>
Message-ID: <980e53c6-ed8e-2b49-1d45-a6c926869ab6@gmail.com>

Hi Walter,

The issue concerns Particelle_terreni_e_fabbricati layer.
Can you check the DescribeFeatureType for this layer: 
Particelle_terreni_e_fabbricati ?

Regards,
Ren?-Luc

Le 05/06/2023 ? 09:26, Walter Lorenzetti a ?crit?:
>
> Hi Ren?-Luc,
>
> yes it fail on DescribeFeatureType.
>
> This is the repsonse of QGIS 3.28.7:
>
> <schema xmlns:gml="http://www.opengis.net/gml" 
> targetNamespace="http://www.qgis.org/gml" 
> xmlns="http://www.w3.org/2001/XMLSchema" 
> xmlns:xsd="http://www.w3.org/2001/XMLSchema" version="1.0" 
> xmlns:qgs="http://www.qgis.org/gml" 
> xmlns:ogc="http://www.opengis.net/ogc" elementFormDefault="qualified">
> ?<import 
> schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" 
> namespace="http://www.opengis.net/gml"/>
> ?<element name="buildings" substitutionGroup="gml:_Feature" 
> type="qgs:buildingsType"/>
> ?<complexType name="buildingsType">
> ? <complexContent>
> ?? <extension base="gml:AbstractFeatureType">
> ??? <sequence>
> ???? <element maxOccurs="1" name="geometry" minOccurs="0" 
> type="gml:MultiSurfacePropertyType"/>
> ???? <element name="fid" alias="ID" type="long"/>
> ???? <element name="name" alias="Name" type="string"/>
> ???? <element name="address" alias="Address" type="string" 
> nillable="true"/>
> ???? <element name="year" alias="Year of construction" type="long"/>
> ???? <element name="photo" alias="Photo" type="string" nillable="true"/>
> ???? <element name="link" alias="Link" type="string" nillable="true"/>
> ???? <element name="form" alias="Form" type="string" nillable="true"/>
> ???? <element name="high" alias="High" type="long"/>
> ???? <element name="volume" alias="Volume" type="long" nillable="true"/>
> ???? <element name="surface" alias="Surface (based on QGIS 
> expression)" type="decimal" nillable="true"/>
> ???? <element name="architectural_barriers" alias="Architectural 
> barriers" type="string" nillable="true"/>
> ???? <element name="date_barriers" alias="Date" type="date" 
> nillable="true"/>
> ???? <element name="safety_exits" alias="Safety exits" type="string" 
> nillable="true"/>
> ???? <element name="date_exits" alias="Date" type="date" nillable="true"/>
> ???? <element name="fire_system" alias="Fire system" type="string" 
> nillable="true"/>
> ???? <element name="date_fire" alias="Date" type="date" nillable="true"/>
> ???? <element name="type" alias="Type" type="string"/>
> ???? <element name="zone" alias="Zone (based on QGIS expression)" 
> type="string" nillable="true"/>
> ???? <element name="attachment" alias="Documents to be attached" 
> type="long" nillable="true"/>
> ???? <element name="subtype" alias="Subtype - Dependent on the value 
> of Type" type="string" nillable="true"/>
> ???? <element name="user" alias="User last modification" type="string" 
> nillable="true"/>
> ???? <element name="description" alias="Description" type="string" 
> nillable="true"/>
> ??? </sequence>
> ?? </extension>
> ? </complexContent>
> ?</complexType>
> </schema>
>
> and following a DescribeFeatureType response which does not fail on 
> geoservers from a Italy government? service:
>
> http://wms.pcn.minambiente.it/ogc?map=/ms_ogc/wfs/Alluvioni_Estensione.map&TYPENAME=ITH2018_Estensione_LPH&REQUEST=DescribeFeatureType&VERSION=1.1.0&SERVICE=WFS
>
> <?xml version='1.0' encoding="ISO-8859-1" ?>
> <schema
> ?? targetNamespace="http://mapserver.gis.umn.edu/mapserver"
> ?? xmlns:ms="http://mapserver.gis.umn.edu/mapserver"
> ?? xmlns:ogc="http://www.opengis.net/ogc"
> ?? xmlns:xsd="http://www.w3.org/2001/XMLSchema"
> ?? xmlns="http://www.w3.org/2001/XMLSchema"
> ?? xmlns:gml="http://www.opengis.net/gml"
> ?? elementFormDefault="qualified" version="0.1" >
>
> ? <import namespace="http://www.opengis.net/gml"
> ????????? 
> schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" />
>
> ? <element name="ITH2018_Estensione_LPH"
> ?????????? type="ms:ITH2018_Estensione_LPHType"
> ?????????? substitutionGroup="gml:_Feature" />
>
> ? <complexType name="ITH2018_Estensione_LPHType">
> ??? <complexContent>
> ????? <extension base="gml:AbstractFeatureType">
> ??????? <sequence>
> ????????? <element name="boundary" type="gml:SurfacePropertyType" 
> minOccurs="0" maxOccurs="unbounded"/>
> ????????? <element name="id" type="string"/>
> ????????? <element name="rbdname" type="string"/>
> ????????? <element name="uomcode" type="string"/>
> ????????? <element name="apsfrcode" type="string"/>
> ????????? <element name="category" type="string"/>
> ????????? <element name="eu_cd_hp" type="string"/>
> ????????? <element name="source" type="string"/>
> ????????? <element name="character" type="string"/>
> ????????? <element name="mechanism" type="string"/>
> ????????? <element name="frequency" type="string"/>
> ????????? <element name="namespace" type="string"/>
> ????????? <element name="beginlife" type="string"/>
> ????????? <element name="detmetod" type="string"/>
> ??????? </sequence>
> ????? </extension>
> ??? </complexContent>
> ? </complexType>
>
> </schema>
>
>
> I can't see a substantial difference :(
>
> W
>
> Il 31/05/23 15:28, Ren?-Luc Dhont via QGIS-Developer ha scritto:
>> Hi Walter,
>>
>> You have to check the result of DescribeFeatureType WFS Request.
>> This request has to provide the XSD to validate the GML.
>>
>> Regards,
>> Ren?-Luc
>>
>> Le 31/05/2023 ? 14:59, Walter Lorenzetti via QGIS-Developer a ?crit?:
>>>
>>> Hi,
>>>
>>> when I try to add a WFS service layer to a GeoServer instance I get 
>>> an exception like this:
>>>
>>> ```
>>>
>>> ...
>>>
>>> Caused by: java.lang.RuntimeException: 
>>> org.geotools.data.DataSourceException: No XSDElementDeclaration 
>>> found for {http://www.opengis.net/wfs}Particelle_terreni_e_fabbricati
>>> ?? ?at 
>>> org.geotools.data.store.ContentFeatureSource.getAbsoluteSchema(ContentFeatureSource.java:329)
>>> ?? ?at 
>>> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:296)
>>> ?? ?at 
>>> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:105)
>>> ?? ?at 
>>> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:342)
>>> ?? ?at 
>>> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:325)
>>> ?? ?at 
>>> org.geoserver.web.data.layer.NewLayerPage.buildLayerInfo(NewLayerPage.java:409)
>>>
>>> ...
>>>
>>> ```
>>>
>>> Any idea about this issue? It seams a XML error validation..
>>>
>>> Thanks in advance.
>>>
>>> W
>>>
>>>
>>> -- 
>>>
>>> Walter Lorenzetti phD
>>> email: lorenzetti at gis3w.it
>>> site: gis3w.it <https://gis3w.it>
>>> twitter: w_lorenzetti
>>> Tel/Cell: (+39) 347-6597931
>>> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>>>
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> -- 
>
> Walter Lorenzetti phD
> email: lorenzetti at gis3w.it
> site: gis3w.it <https://gis3w.it>
> twitter: w_lorenzetti
> Tel/Cell: (+39) 347-6597931
> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230605/cc7e7762/attachment-0001.htm>

From benjamin.jakimow at geo.hu-berlin.de  Mon Jun  5 04:27:16 2023
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Mon, 5 Jun 2023 13:27:16 +0200
Subject: [QGIS-Developer] Properly terminating a QgsTask?
In-Reply-To: <3e177275-e9c7-7efb-ac33-30823c6e243c@wheregroup.com>
References: <3e177275-e9c7-7efb-ac33-30823c6e243c@wheregroup.com>
Message-ID: <7220bc00-553b-f1d6-5e5c-3007637bda05@geo.hu-berlin.de>

Hi Johannes,

just stop the execution in QgsTask::run(), for example using a break 
that stops a loop, and return False instead of True.

 From https://api.qgis.org/api/3.30/classQgsTask.html


> Performs the task's operation.
>
> This method will be called when the task commences (ie via calling 
> start() ), and subclasses should implement the operation they wish to 
> perform in the background within this method.
>
> A task must return a boolean value to indicate whether the task was 
> completed successfully or terminated before completion.
>
> virtual bool QgsTask::run 	( 	
> 	) 	
>
> 	protectedpure virtual
>
Greetings, Benjamin

Am 02.06.2023 um 14:19 schrieb Johannes Kr?ger (WhereGroup) via 
QGIS-Developer:
> Hi,
>
> https://qgis.org/pyqgis/3.30/core/QgsTask.html says
>
> > Long running tasks should periodically check the isCanceled() flag 
> to detect if the task has been canceled via some external event. If 
> this flag is True then the task should clean up and terminate at the 
> earliest possible convenience.
>
> How are we supposed to "terminate" a task properly?
>
> If we check for task.isCanceled() (or call task.cancel() ourselves for 
> testing) and simply return:
>
> - QGIS will still show a notification that the "Task completed" 
> (instead of "Task failed") 
> (https://github.com/qgis/QGIS/blob/d3d0431685883b837caa571ad7282828cfbde65e/src/app/qgisapp.cpp#L15707)
>
> - The taskTerminated signal is not emitted. But the taskCompleted 
> signal is emitted.
>
> - The task's status is QgsTask.Complete
>
> There is no obvious way to "terminate" the task from the Python side. 
> We cannot set the task's status attribute to QgsTask.Terminated 
> (https://qgis.org/pyqgis/3.30/core/QgsTask.html#qgis.core.QgsTask.Terminated).
>
>
> If an exception happens in the task then it seems to terminate 
> "properly", i.e. its status will be QgsTask.Terminated, the 
> taskTerminated signal is emitted and a notification "Task failed" is 
> shown. This is the only way I found today to get into this state. I 
> have not found this documented and only by accident...
>
>
> Example for a QgsTask.fromFuncction(..., flags=QgsTask.CanCancel), 
> uncomment one of the final lines:
>
> def foo(task):
> ??????? time.sleep(6)? # must be >= minTaskLengthForSystemNotification 
> (5 by default)
> ??????? #task.cancel(); return? # -> Task complete
> ??????? #raise Exception("fail plz")? # -> Task failed
>
>
> It feels like a bug to me (either task.cancel should directly set its 
> status to QgsTask.Terminated or we should have a task.setStatus() 
> method) but everything in and around QgsTask is fairly opaque and hard 
> to grasp so maybe I am just missing something obvious.
>
> Cheers, Hannes
>
>
> PS: I did not test the example function in a clean environment, in my 
> test cases I have code like this as methods of a class.
>
-- 
Dr. Benjamin Jakimow
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu Berlin

e-mail:benjamin.jakimow at geo.hu-berlin.de
web:https://hu-berlin.de/eo-lab
phone:  +49 (0) 30 2093 6846
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'211
linkedin:https://www.linkedin.com/in/benjamin-jakimow
matrix: @jakimowb:hu-berlin.de
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230605/529bf2f0/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4745 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230605/529bf2f0/attachment.bin>

From lorenzetti at gis3w.it  Mon Jun  5 06:48:37 2023
From: lorenzetti at gis3w.it (Walter Lorenzetti)
Date: Mon, 5 Jun 2023 15:48:37 +0200
Subject: [QGIS-Developer] GeoFerver canno't read QGIS server WFS Services
In-Reply-To: <980e53c6-ed8e-2b49-1d45-a6c926869ab6@gmail.com>
References: <8e77c290-9600-5c17-5b47-02d52dd1f67c@gis3w.it>
 <ea9005ef-10bb-7a2f-af25-7fe8a7304b18@gmail.com>
 <9600c423-b375-f550-6579-26bbf19c7e77@gis3w.it>
 <980e53c6-ed8e-2b49-1d45-a6c926869ab6@gmail.com>
Message-ID: <7bc102cf-e636-0f3c-b6c0-c3b1aaf9cf02@gis3w.it>

Ren?-Luc there it is:

<schema targetNamespace="http://www.qgis.org/gml"
 ??? xmlns:ogc="http://www.opengis.net/ogc"
 ??? xmlns:gml="http://www.opengis.net/gml" version="1.0"
 ??? xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 ??? xmlns="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
 ??? xmlns:qgs="http://www.qgis.org/gml">
 ??? <import 
schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" 
namespace="http://www.opengis.net/gml"/>
 ??? <element name="Particelle_terreni_e_fabbricati" 
substitutionGroup="gml:_Feature" 
type="qgs:Particelle_terreni_e_fabbricatiType"/>
 ??? <complexType name="Particelle_terreni_e_fabbricatiType">
 ??????? <complexContent>
 ??????????? <extension base="gml:AbstractFeatureType">
 ??????????????? <sequence>
 ??????????????????? <element name="geometry" 
type="gml:PolygonPropertyType" maxOccurs="1" minOccurs="0"/>
 ??????????????????? <element name="gid" type="int"/>
 ??????????????????? <element name="tipo" type="string" nillable="true"/>
 ??????????????????? <element name="foglio" type="int" nillable="true"/>
 ??????????????????? <element name="numero" type="string" nillable="true"/>
 ??????????????????? <element name="sezione" type="string" nillable="true"/>
 ??????????????????? <element name="allegato" type="string" 
nillable="true"/>
 ??????????????????? <element name="codice_comune" type="string"/>
 ??????????????????? <element name="nomefile" type="string" 
nillable="true"/>
 ??????????????????? <element name="task_id" type="string" nillable="true"/>
 ??????????????? </sequence>
 ??????????? </extension>
 ??????? </complexContent>
 ??? </complexType>
</schema>

Il 05/06/23 09:59, Ren?-Luc Dhont ha scritto:
> Hi Walter,
>
> The issue concerns Particelle_terreni_e_fabbricati layer.
> Can you check the DescribeFeatureType for this layer: 
> Particelle_terreni_e_fabbricati ?
>
> Regards,
> Ren?-Luc
>
> Le 05/06/2023 ? 09:26, Walter Lorenzetti a ?crit?:
>>
>> Hi Ren?-Luc,
>>
>> yes it fail on DescribeFeatureType.
>>
>> This is the repsonse of QGIS 3.28.7:
>>
>> <schema xmlns:gml="http://www.opengis.net/gml" 
>> targetNamespace="http://www.qgis.org/gml" 
>> xmlns="http://www.w3.org/2001/XMLSchema" 
>> xmlns:xsd="http://www.w3.org/2001/XMLSchema" version="1.0" 
>> xmlns:qgs="http://www.qgis.org/gml" 
>> xmlns:ogc="http://www.opengis.net/ogc" elementFormDefault="qualified">
>> ?<import 
>> schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" 
>> namespace="http://www.opengis.net/gml"/>
>> ?<element name="buildings" substitutionGroup="gml:_Feature" 
>> type="qgs:buildingsType"/>
>> ?<complexType name="buildingsType">
>> ? <complexContent>
>> ?? <extension base="gml:AbstractFeatureType">
>> ??? <sequence>
>> ???? <element maxOccurs="1" name="geometry" minOccurs="0" 
>> type="gml:MultiSurfacePropertyType"/>
>> ???? <element name="fid" alias="ID" type="long"/>
>> ???? <element name="name" alias="Name" type="string"/>
>> ???? <element name="address" alias="Address" type="string" 
>> nillable="true"/>
>> ???? <element name="year" alias="Year of construction" type="long"/>
>> ???? <element name="photo" alias="Photo" type="string" nillable="true"/>
>> ???? <element name="link" alias="Link" type="string" nillable="true"/>
>> ???? <element name="form" alias="Form" type="string" nillable="true"/>
>> ???? <element name="high" alias="High" type="long"/>
>> ???? <element name="volume" alias="Volume" type="long" nillable="true"/>
>> ???? <element name="surface" alias="Surface (based on QGIS 
>> expression)" type="decimal" nillable="true"/>
>> ???? <element name="architectural_barriers" alias="Architectural 
>> barriers" type="string" nillable="true"/>
>> ???? <element name="date_barriers" alias="Date" type="date" 
>> nillable="true"/>
>> ???? <element name="safety_exits" alias="Safety exits" type="string" 
>> nillable="true"/>
>> ???? <element name="date_exits" alias="Date" type="date" 
>> nillable="true"/>
>> ???? <element name="fire_system" alias="Fire system" type="string" 
>> nillable="true"/>
>> ???? <element name="date_fire" alias="Date" type="date" nillable="true"/>
>> ???? <element name="type" alias="Type" type="string"/>
>> ???? <element name="zone" alias="Zone (based on QGIS expression)" 
>> type="string" nillable="true"/>
>> ???? <element name="attachment" alias="Documents to be attached" 
>> type="long" nillable="true"/>
>> ???? <element name="subtype" alias="Subtype - Dependent on the value 
>> of Type" type="string" nillable="true"/>
>> ???? <element name="user" alias="User last modification" 
>> type="string" nillable="true"/>
>> ???? <element name="description" alias="Description" type="string" 
>> nillable="true"/>
>> ??? </sequence>
>> ?? </extension>
>> ? </complexContent>
>> ?</complexType>
>> </schema>
>>
>> and following a DescribeFeatureType response which does not fail on 
>> geoservers from a Italy government? service:
>>
>> http://wms.pcn.minambiente.it/ogc?map=/ms_ogc/wfs/Alluvioni_Estensione.map&TYPENAME=ITH2018_Estensione_LPH&REQUEST=DescribeFeatureType&VERSION=1.1.0&SERVICE=WFS
>>
>> <?xml version='1.0' encoding="ISO-8859-1" ?>
>> <schema
>> ?? targetNamespace="http://mapserver.gis.umn.edu/mapserver"
>> ?? xmlns:ms="http://mapserver.gis.umn.edu/mapserver"
>> ?? xmlns:ogc="http://www.opengis.net/ogc"
>> ?? xmlns:xsd="http://www.w3.org/2001/XMLSchema"
>> ?? xmlns="http://www.w3.org/2001/XMLSchema"
>> ?? xmlns:gml="http://www.opengis.net/gml"
>> ?? elementFormDefault="qualified" version="0.1" >
>>
>> ? <import namespace="http://www.opengis.net/gml"
>> ????????? 
>> schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" />
>>
>> ? <element name="ITH2018_Estensione_LPH"
>> ?????????? type="ms:ITH2018_Estensione_LPHType"
>> ?????????? substitutionGroup="gml:_Feature" />
>>
>> ? <complexType name="ITH2018_Estensione_LPHType">
>> ??? <complexContent>
>> ????? <extension base="gml:AbstractFeatureType">
>> ??????? <sequence>
>> ????????? <element name="boundary" type="gml:SurfacePropertyType" 
>> minOccurs="0" maxOccurs="unbounded"/>
>> ????????? <element name="id" type="string"/>
>> ????????? <element name="rbdname" type="string"/>
>> ????????? <element name="uomcode" type="string"/>
>> ????????? <element name="apsfrcode" type="string"/>
>> ????????? <element name="category" type="string"/>
>> ????????? <element name="eu_cd_hp" type="string"/>
>> ????????? <element name="source" type="string"/>
>> ????????? <element name="character" type="string"/>
>> ????????? <element name="mechanism" type="string"/>
>> ????????? <element name="frequency" type="string"/>
>> ????????? <element name="namespace" type="string"/>
>> ????????? <element name="beginlife" type="string"/>
>> ????????? <element name="detmetod" type="string"/>
>> ??????? </sequence>
>> ????? </extension>
>> ??? </complexContent>
>> ? </complexType>
>>
>> </schema>
>>
>>
>> I can't see a substantial difference :(
>>
>> W
>>
>> Il 31/05/23 15:28, Ren?-Luc Dhont via QGIS-Developer ha scritto:
>>> Hi Walter,
>>>
>>> You have to check the result of DescribeFeatureType WFS Request.
>>> This request has to provide the XSD to validate the GML.
>>>
>>> Regards,
>>> Ren?-Luc
>>>
>>> Le 31/05/2023 ? 14:59, Walter Lorenzetti via QGIS-Developer a ?crit?:
>>>>
>>>> Hi,
>>>>
>>>> when I try to add a WFS service layer to a GeoServer instance I get 
>>>> an exception like this:
>>>>
>>>> ```
>>>>
>>>> ...
>>>>
>>>> Caused by: java.lang.RuntimeException: 
>>>> org.geotools.data.DataSourceException: No XSDElementDeclaration 
>>>> found for {http://www.opengis.net/wfs}Particelle_terreni_e_fabbricati
>>>> ?? ?at 
>>>> org.geotools.data.store.ContentFeatureSource.getAbsoluteSchema(ContentFeatureSource.java:329)
>>>> ?? ?at 
>>>> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:296)
>>>> ?? ?at 
>>>> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:105)
>>>> ?? ?at 
>>>> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:342)
>>>> ?? ?at 
>>>> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:325)
>>>> ?? ?at 
>>>> org.geoserver.web.data.layer.NewLayerPage.buildLayerInfo(NewLayerPage.java:409)
>>>>
>>>> ...
>>>>
>>>> ```
>>>>
>>>> Any idea about this issue? It seams a XML error validation..
>>>>
>>>> Thanks in advance.
>>>>
>>>> W
>>>>
>>>>
>>>> -- 
>>>>
>>>> Walter Lorenzetti phD
>>>> email: lorenzetti at gis3w.it
>>>> site: gis3w.it <https://gis3w.it>
>>>> twitter: w_lorenzetti
>>>> Tel/Cell: (+39) 347-6597931
>>>> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>>>>
>>>>
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> -- 
>>
>> Walter Lorenzetti phD
>> email: lorenzetti at gis3w.it
>> site: gis3w.it <https://gis3w.it>
>> twitter: w_lorenzetti
>> Tel/Cell: (+39) 347-6597931
>> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>>
>
-- 

Walter Lorenzetti phD
email: lorenzetti at gis3w.it
site: gis3w.it <https://gis3w.it>
twitter: w_lorenzetti
Tel/Cell: (+39) 347-6597931
Viale Verdi 24 - 51016 Montecatini Terme (PT)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230605/38723dd2/attachment-0001.htm>

From radim.blazek at gmail.com  Mon Jun  5 10:45:35 2023
From: radim.blazek at gmail.com (Radim Blazek)
Date: Mon, 5 Jun 2023 19:45:35 +0200
Subject: [QGIS-Developer] QgsSnappingConfig.reset() segfault on server
Message-ID: <CAEMrtYrVHtxGpiW7av9jORQUHHLmdZpN9oHijGNz1sgu+ZPQzw@mail.gmail.com>

Hi.
We are getting the following crash with 3.30.2 in the server
environment when uwsgi worker is being closed. Is there a workaround?
Should I fill an issue?

!!! uWSGI process 2663646 got Segmentation Fault !!!
*** backtrace of 2663646 ***
/usr/bin/uwsgi-core(uwsgi_backtrace+0x43) [0x564723ab3123]
/usr/bin/uwsgi-core(uwsgi_segfault+0x33) [0x564723ab3673]
/lib/x86_64-linux-gnu/libc.so.6(+0x42520) [0x7f968a6a2520]
/lib/x86_64-linux-gnu/libQt5Core.so.5(+0xa4bb6) [0x7f95232bcbb6]
/lib/x86_64-linux-gnu/libQt5Core.so.5(_ZN9QSettingsC1ENS_5ScopeEP7QObject+0x48)
[0x7f95234554d8]
/lib/libqgis_core.so.3.30.2(_ZN11QgsSettingsC2EP7QObject+0x51) [0x7f951e5441f1]
/lib/libqgis_core.so.3.30.2(_ZNK20QgsSettingsEntryBase14valueAsVariantERK11QStringList+0x3f)
[0x7f951e54642f]
/lib/libqgis_core.so.3.30.2(_ZNK20QgsSettingsEntryBase14valueAsVariantERK7QString+0x3f)
[0x7f951e54650f]
/lib/libqgis_core.so.3.30.2(_ZN17QgsSnappingConfig5resetEv+0x5f)
[0x7f951dfb0cdf]
/lib/libqgis_core.so.3.30.2(_ZN17QgsSnappingConfigC1EP10QgsProject+0x63)
[0x7f951dfb1353]
/lib/libqgis_core.so.3.30.2(_ZN10QgsProjectC1EP7QObject6QFlagsIN4Qgis17ProjectCapabilityEE+0xc4)
[0x7f951e286c04]
/lib/libqgis_core.so.3.30.2(_ZN10QgsProject8instanceEv+0x6c) [0x7f951e287c0c]
/.../qgis_libs/qgis/_core.cpython-310-x86_64-linux-gnu.so(+0xe1da1f)
[0x7f9513f25a1f]
/lib/x86_64-linux-gnu/libpython3.10.so.1.0(+0x12b6b8) [0x7f96880db6b8]
/lib/x86_64-linux-gnu/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x8c)
[0x7f96880961ac]
/lib/x86_64-linux-gnu/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x9dcc)
[0x7f968802ba0c]
/lib/x86_64-linux-gnu/libpython3.10.so.1.0(+0x1c681f) [0x7f968817681f]
/lib/x86_64-linux-gnu/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x9d78)
[0x7f968802b9b8]
/lib/x86_64-linux-gnu/libpython3.10.so.1.0(+0x1c681f) [0x7f968817681f]
/lib/x86_64-linux-gnu/libpython3.10.so.1.0(+0x292230) [0x7f9688242230]
/lib/x86_64-linux-gnu/libpython3.10.so.1.0(Py_FinalizeEx+0x82) [0x7f96881b7da2]
/usr/bin/uwsgi-core(uwsgi_plugins_atexit+0x81) [0x564723aadab1]
/lib/x86_64-linux-gnu/libc.so.6(+0x45495) [0x7f968a6a5495]
/lib/x86_64-linux-gnu/libc.so.6(on_exit+0) [0x7f968a6a5610]
/usr/bin/uwsgi-core(+0x2f26c) [0x564723a5c26c]
/usr/bin/uwsgi-core(end_me+0x35) [0x564723ab07a5]
/usr/bin/uwsgi-core(uwsgi_ignition+0x15d) [0x564723ab267d]
/usr/bin/uwsgi-core(uwsgi_worker_run+0x284) [0x564723ab6b64]
/usr/bin/uwsgi-core(uwsgi_run+0x4b2) [0x564723ab7142]
/usr/bin/uwsgi-core(+0x2cc84) [0x564723a59c84]
/lib/x86_64-linux-gnu/libc.so.6(+0x29d90) [0x7f968a689d90]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0x80) [0x7f968a689e40]
/usr/bin/uwsgi-core(_start+0x25) [0x564723a59cb5]

Radim

From denis.rouzaud at gmail.com  Mon Jun  5 11:50:24 2023
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Mon, 5 Jun 2023 20:50:24 +0200
Subject: [QGIS-Developer] QgsSnappingConfig.reset() segfault on server
In-Reply-To: <CAEMrtYrVHtxGpiW7av9jORQUHHLmdZpN9oHijGNz1sgu+ZPQzw@mail.gmail.com>
References: <CAEMrtYrVHtxGpiW7av9jORQUHHLmdZpN9oHijGNz1sgu+ZPQzw@mail.gmail.com>
Message-ID: <CAMtsY+ba+b4N+eFzg4Gt0cC-ar-+wYaBes0HZcC+XQRWu7oidA@mail.gmail.com>

Hi Radim,

The error is occurring in the constructor of QgsProject (from
QgsProject::instance) where it cannot construct a QSettings.

I was afraid this crash was due to the recent changes in settings, but I
don't see this as related. This bug was not occurring before 3.30 ?

Cheers,
Denis


Le lun. 5 juin 2023 ? 19:49, Radim Blazek via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hi.
> We are getting the following crash with 3.30.2 in the server
> environment when uwsgi worker is being closed. Is there a workaround?
> Should I fill an issue?
>
> !!! uWSGI process 2663646 got Segmentation Fault !!!
> *** backtrace of 2663646 ***
> /usr/bin/uwsgi-core(uwsgi_backtrace+0x43) [0x564723ab3123]
> /usr/bin/uwsgi-core(uwsgi_segfault+0x33) [0x564723ab3673]
> /lib/x86_64-linux-gnu/libc.so.6(+0x42520) [0x7f968a6a2520]
> /lib/x86_64-linux-gnu/libQt5Core.so.5(+0xa4bb6) [0x7f95232bcbb6]
>
> /lib/x86_64-linux-gnu/libQt5Core.so.5(_ZN9QSettingsC1ENS_5ScopeEP7QObject+0x48)
> [0x7f95234554d8]
> /lib/libqgis_core.so.3.30.2(_ZN11QgsSettingsC2EP7QObject+0x51)
> [0x7f951e5441f1]
>
> /lib/libqgis_core.so.3.30.2(_ZNK20QgsSettingsEntryBase14valueAsVariantERK11QStringList+0x3f)
> [0x7f951e54642f]
>
> /lib/libqgis_core.so.3.30.2(_ZNK20QgsSettingsEntryBase14valueAsVariantERK7QString+0x3f)
> [0x7f951e54650f]
> /lib/libqgis_core.so.3.30.2(_ZN17QgsSnappingConfig5resetEv+0x5f)
> [0x7f951dfb0cdf]
> /lib/libqgis_core.so.3.30.2(_ZN17QgsSnappingConfigC1EP10QgsProject+0x63)
> [0x7f951dfb1353]
>
> /lib/libqgis_core.so.3.30.2(_ZN10QgsProjectC1EP7QObject6QFlagsIN4Qgis17ProjectCapabilityEE+0xc4)
> [0x7f951e286c04]
> /lib/libqgis_core.so.3.30.2(_ZN10QgsProject8instanceEv+0x6c)
> [0x7f951e287c0c]
> /.../qgis_libs/qgis/_core.cpython-310-x86_64-linux-gnu.so(+0xe1da1f)
> [0x7f9513f25a1f]
> /lib/x86_64-linux-gnu/libpython3.10.so.1.0(+0x12b6b8) [0x7f96880db6b8]
> /lib/x86_64-linux-gnu/libpython3.10.so.1.0(_PyObject_MakeTpCall+0x8c)
> [0x7f96880961ac]
> /lib/x86_64-linux-gnu/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x9dcc)
> [0x7f968802ba0c]
> /lib/x86_64-linux-gnu/libpython3.10.so.1.0(+0x1c681f) [0x7f968817681f]
> /lib/x86_64-linux-gnu/libpython3.10.so.1.0(_PyEval_EvalFrameDefault+0x9d78)
> [0x7f968802b9b8]
> /lib/x86_64-linux-gnu/libpython3.10.so.1.0(+0x1c681f) [0x7f968817681f]
> /lib/x86_64-linux-gnu/libpython3.10.so.1.0(+0x292230) [0x7f9688242230]
> /lib/x86_64-linux-gnu/libpython3.10.so.1.0(Py_FinalizeEx+0x82)
> [0x7f96881b7da2]
> /usr/bin/uwsgi-core(uwsgi_plugins_atexit+0x81) [0x564723aadab1]
> /lib/x86_64-linux-gnu/libc.so.6(+0x45495) [0x7f968a6a5495]
> /lib/x86_64-linux-gnu/libc.so.6(on_exit+0) [0x7f968a6a5610]
> /usr/bin/uwsgi-core(+0x2f26c) [0x564723a5c26c]
> /usr/bin/uwsgi-core(end_me+0x35) [0x564723ab07a5]
> /usr/bin/uwsgi-core(uwsgi_ignition+0x15d) [0x564723ab267d]
> /usr/bin/uwsgi-core(uwsgi_worker_run+0x284) [0x564723ab6b64]
> /usr/bin/uwsgi-core(uwsgi_run+0x4b2) [0x564723ab7142]
> /usr/bin/uwsgi-core(+0x2cc84) [0x564723a59c84]
> /lib/x86_64-linux-gnu/libc.so.6(+0x29d90) [0x7f968a689d90]
> /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0x80) [0x7f968a689e40]
> /usr/bin/uwsgi-core(_start+0x25) [0x564723a59cb5]
>
> Radim
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230605/a2d4bb88/attachment.htm>

From rdmailings at duif.net  Tue Jun  6 00:06:20 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 06 Jun 2023 09:06:20 +0200
Subject: [QGIS-Developer] Rule based layer styling without rules misbehaving?
Message-ID: <3ce3d05f91aacddad88671096953f6b8@duif.net>

Need to have a styling to have two icon sizes

 From 
https://gis.stackexchange.com/questions/172775/is-there-a-way-to-change-symbol-size-units-dependent-on-scale 
I concluded that creating 2 rules would be easiest...

But: creating a rule (without a filter, embedded svg icon), setting 
min/max scale and then copy/paste that rule, change symbol and try to 
set min/max scale again makes symbols disappear (or it looks like the 
settings are also set on another rule...)

Have others seen this?
Has it something to do with the fact that there is no filter set?

Regards,

Richard Duivenvoorde

From pathmapper at posteo.de  Tue Jun  6 00:20:02 2023
From: pathmapper at posteo.de (pathmapper)
Date: Tue, 06 Jun 2023 07:20:02 +0000
Subject: [QGIS-Developer] 
 =?utf-8?q?Rule_based_layer_styling_without_rule?=
 =?utf-8?q?s_misbehaving=3F?=
In-Reply-To: <3ce3d05f91aacddad88671096953f6b8@duif.net>
References: <3ce3d05f91aacddad88671096953f6b8@duif.net>
Message-ID: <e1465a9b6ae3b946579b5554dbaaf976@posteo.de>

Hi Richard,

there are sometimes issues when copy/pasting a rule -> 
https://github.com/qgis/QGIS/issues/40206 .

You could try to create the second rule from scratch.

Regards,
Bj?rn



On 06.06.2023 09:06, Richard Duivenvoorde via QGIS-Developer wrote:
> Need to have a styling to have two icon sizes
> 
> From
> https://gis.stackexchange.com/questions/172775/is-there-a-way-to-change-symbol-size-units-dependent-on-scale
> I concluded that creating 2 rules would be easiest...
> 
> But: creating a rule (without a filter, embedded svg icon), setting
> min/max scale and then copy/paste that rule, change symbol and try to
> set min/max scale again makes symbols disappear (or it looks like the
> settings are also set on another rule...)
> 
> Have others seen this?
> Has it something to do with the fact that there is no filter set?
> 
> Regards,
> 
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Tue Jun  6 01:26:22 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 06 Jun 2023 10:26:22 +0200
Subject: [QGIS-Developer] 'Sensors' in Project Properties?
Message-ID: <36a38c40861b3e0802140b972ff887c7@duif.net>

Hi just seeing a 'Sensors'-tab in the Project Properties of master.
I'm very interested in Sensors_QGIS...
Any pointers to discussion or writup of current plan(s)?
(quick grepping in source did not reveal much to me except the term 
'sensor framework' :-) )

Regards,

Richard Duivenvoorde

From matthias at opengis.ch  Tue Jun  6 02:07:28 2023
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 6 Jun 2023 11:07:28 +0200
Subject: [QGIS-Developer] 'Sensors' in Project Properties?
In-Reply-To: <36a38c40861b3e0802140b972ff887c7@duif.net>
References: <36a38c40861b3e0802140b972ff887c7@duif.net>
Message-ID: <CAC7zN96hZqSvL4FFuN0f+s=D6FR1cMTTDPB8WJa4PuOM4cVXng@mail.gmail.com>

Hi Richard,

It's probably best to start here https://github.com/qgis/QGIS/pull/52297
Plus a couple of side PRs:
https://github.com/qgis/QGIS/pulls?q=is%3Apr+sensor+is%3Aclosed

Cheers
matthias

On Tue, Jun 6, 2023 at 10:26?AM Richard Duivenvoorde via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi just seeing a 'Sensors'-tab in the Project Properties of master.
> I'm very interested in Sensors_QGIS...
> Any pointers to discussion or writup of current plan(s)?
> (quick grepping in source did not reveal much to me except the term
> 'sensor framework' :-) )
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230606/0bdc2c24/attachment.htm>

From radim.blazek at gmail.com  Tue Jun  6 08:44:14 2023
From: radim.blazek at gmail.com (Radim Blazek)
Date: Tue, 6 Jun 2023 17:44:14 +0200
Subject: [QGIS-Developer] QgsSnappingConfig.reset() segfault on server
In-Reply-To: <CAMtsY+ba+b4N+eFzg4Gt0cC-ar-+wYaBes0HZcC+XQRWu7oidA@mail.gmail.com>
References: <CAEMrtYrVHtxGpiW7av9jORQUHHLmdZpN9oHijGNz1sgu+ZPQzw@mail.gmail.com>
 <CAMtsY+ba+b4N+eFzg4Gt0cC-ar-+wYaBes0HZcC+XQRWu7oidA@mail.gmail.com>
Message-ID: <CAEMrtYoDu2a7-FmZHCU2NWoPa=JkMVNAJ-U9RPPqECrcqevbSg@mail.gmail.com>

I found that it happens only if QgsProject.setInstance(project) was called
before. Now I see the warning in QgsProject.setInstance():
"calling this method can have serious, unintended consequences, including
instability, data loss and undefined behavior. Use with EXTREME caution!"

Maybe there should be /Transfer/ in sip?

I used QgsProject.setInstance(project) as a workaround to the problem
with temporary XXXXXX_styles.db remaining open. Any idea how to use it with
EXTREME caution?

Radim

On Mon, Jun 5, 2023 at 8:50?PM Denis Rouzaud <denis.rouzaud at gmail.com>
wrote:

> Hi Radim,
>
> The error is occurring in the constructor of QgsProject (from
> QgsProject::instance) where it cannot construct a QSettings.
>
> I was afraid this crash was due to the recent changes in settings, but I
> don't see this as related. This bug was not occurring before 3.30 ?
>
> Cheers,
> Denis
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230606/39cdccc1/attachment.htm>

From radim.blazek at gmail.com  Tue Jun  6 09:08:24 2023
From: radim.blazek at gmail.com (Radim Blazek)
Date: Tue, 6 Jun 2023 18:08:24 +0200
Subject: [QGIS-Developer] QgsProjectStyleSettings styles.db remain open
 after QgsProject::clear()
In-Reply-To: <CAB28Ashe+fiF9ZtBsjFLLDvCvQnziOoxNr3u97JfYC3W9Y4=eQ@mail.gmail.com>
References: <CAEMrtYpj08mLbf=drxKF-0rMKzirh3dguU0u=LAjXphi4HHeVA@mail.gmail.com>
 <CAB28Ashe+fiF9ZtBsjFLLDvCvQnziOoxNr3u97JfYC3W9Y4=eQ@mail.gmail.com>
Message-ID: <CAEMrtYrudamTY1kzR-Nnb_aoyz_8rosPnq5dHH-CUvdX01aHXA@mail.gmail.com>

On Tue, Apr 18, 2023 at 10:38?AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
> You can safely execute the event loop with DeferredDelete to only cleanup of this object without the danger of other event loop mess.

Can you point me how to do it?

Radim

On Tue, Apr 18, 2023 at 10:38?AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>> with Qgis 3.28.3 called from Python, whenever QgsProject::clear() is
>> called it creates new styles.db file, previous styles file is deleted
>> from system, but it remains open (listed by lsof). It becomes a
>> problem in server environment where every call to QgsProject::clear()
>> creates a new file and limit of open files is soon reached.
>>
>> Just reading the code I was not able to trace down where / which
>> object remains referenced. Maybe QgsStyle.mCurrentDB should be closed
>> explicitly?
>
> It will only get freed when the event loop is next executed.
>
> You can safely execute the event loop with DeferredDelete to only cleanup of this object without the danger of other event loop mess.

From anitagraser at gmx.at  Thu Jun  8 00:59:29 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Thu, 08 Jun 2023 07:59:29 +0000
Subject: [QGIS-Developer] Plugin "MGP Connect" lacks valid repo
Message-ID: <1686211049547.1990403994.46127391@gmx.at>

Hi,

I just published the plugin update for May
(https://blog.qgis.org/2023/06/08/plugin-update-may-2023/) and noticed that
the MGP Connect plugin (https://plugins.qgis.org/plugins/MGP_Connect/)
lacks a valid repo, i.e. the repo they linked does not contain the plugin.

Could the plugin reviewers please get in touch with the plugin developers
to fix this?

Thanks and regards,
Anita


--
Anita Graser
Home: http://anitagraser.com
Twitter: @underdarkgis
Mastodon: @underdarkgis at fosstodon.org

From denis.rouzaud at gmail.com  Mon Jun 12 00:36:53 2023
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Mon, 12 Jun 2023 09:36:53 +0200
Subject: [QGIS-Developer] FME to QGIS functionality mapping
In-Reply-To: <CAB28Asg=3hyAB4MS0Z6d-Pums392hpru=eUW9B+0DOovgU7Z+A@mail.gmail.com>
References: <CAB28AsjncicLqLiVyeW-RQWv-GyOxcoiarnUB5r2R-Gv1E2RjQ@mail.gmail.com>
 <c1452d2d-002b-290d-1350-fbd5e63e1273@carto.net>
 <CAB28Asg=3hyAB4MS0Z6d-Pums392hpru=eUW9B+0DOovgU7Z+A@mail.gmail.com>
Message-ID: <CAMtsY+ab-Xv0Ucx3aTZETkeFuPKVqWkYge0zZ2b21JiH9wn7QQ@mail.gmail.com>

Hi all,

We are currently evaluating work to improve QGIS processing to a closer
experience to FME.
There is already some information here from Nyall.
Our memories are a bit loose, is there any other work done on requirements
or a wishlist?

Is there any work already started so we don't hijack?

Thanks a lot,
Denis

Le mar. 7 avr. 2020 ? 12:22, Nyall Dawson <nyall.dawson at gmail.com> a ?crit :

> On Tue, 7 Apr 2020 at 17:35, Andreas Neumann <a.neumann at carto.net> wrote:
> >
> > Hi Nyall,
> >
> > Thank you for sharing this interesting document.
> >
> > I have questions and remarks:
> >
> > 1. One fundamental difference between FME and QGIS modeler, as far as I
> > understand it, is the fact that FME data sources are much more tightly
> > coupled with the model than in QGIS modeler. This has the advantage,
> > that the data readers, transformers and writers always know what
> > geometry types and attributes they have. The disadvantage is that it is
> > harder to exchange data sources with sources that have other attributes.
> > In my experience the FME approach is what most users prefer. They like
> > the fact that they can always see at each transformer what attributes
> > are available at this stage. Would you see an improvement - perhaps
> > another modeler mode - where also QGIS modeler would be more tightly
> > coupled with the data sources and that the model and algorithms would
> > always know at any step what attributes are available at this stage? Or
> > is this a fundamental difference between the two approaches that
> > couldn't be bridged?
>
> I think it's totally possible -- we just need to know how each
> algorithm transforms its inputs into an output data set in advance
> (i.e. the crs, wkb type, and fields).  API which permits this was
> recently added, but it's not yet hooked into the modeler.  There's
> still considerable work to do for that, but it's far from impossible!
>
> > 2. One aspect where FME shines is the ability to graphically debug
> > models. One can at every step in the model get the view (map and table)
> > of the intermediate step. One can also see at each branch in the model
> > how many features take this route and how many the other route. I know
> > this doesn't have anything to do with the transformer list you shared,
> > but this an aspect that I think, many users like about FME.
>
> A recent improvement is that after running a model in the designer,
> you can now see the actual values of inputs and outputs which were
> used for each child algorithm in the model. It's a partial step
> towards the FME approach. To get the rest of the way we'd need:
> 1. to ensure that every algorithm has numeric outputs for the number
> of features processed
> 2. ideally to allow the model to run on a background thread inside the
> designer, so that you'd see these input/output values populate
> instantly as the model runs (would also allow us to color-code child
> algorithms by state, e.g. completed/running/pending/skipped).
>
> 1. is pretty straightforward, just a lot of grunt work. 2. is more
> complex (and I suspect only achievable in builds based on qt 5.10+
> (since we'd need to invoke the child algorithm prepare steps on the
> main thread)... but its probably time to bump the minimum anyway).
>
> Anyway, definitely achievable in the near future.
>
> > I agree that there would a lot of "low hanging" fruits and I'm looking
> > forward to more feature parity between the two. And to the discussion
> > around it.
>
> Me too! When 3.14 is released the model capabilities in QGIS will be
> much much improved vs previous releases. Just the fact that **every**
> parameter for child algorithms (including input and output layers) can
> now be defined using qgis expressions opens up a WHOLE new world of
> possibilities alone...
>
> Nyall
>
>
>
> >
> > Greetings,
> >
> > Andreas
> >
> > Am 07.04.20 um 03:27 schrieb Nyall Dawson:
> > > Hi list,
> > >
> > > Just wanted to give a heads up on a document I've recently completed,
> > > which maps existing FME functionality across to the equivalent QGIS
> > > Processing or Expression equivalent:
> > >
> > >
> https://github.com/nyalldawson/qgis-processing-hitlist/blob/master/fme.md
> > >
> > > Since FME transformers are both algorithm-like and expression-like
> > > functionality, the document splits the QGIS equivalents into columns
> > > for both algorithms and expressions. Wherever the transformer
> > > functionality doesn't apply, a "N/A" is entered in the corresponding
> > > column (e.g. the "StringCaseChanger" transformer doesn't make sense
> > > the implement as a QGIS Processing algorithm -- it's equivalent is
> > > instead the expression functions "lower", "upper" and "title". And
> > > conversely the "DuplicateFilter" transformer maps to the Processing
> > > algorithms "Delete Duplicate Geometries" and "Delete duplicates by
> > > attribute", but doesn't make sense to have an expression function
> > > equivalent!)
> > >
> > > There's also Transformers in FME which really don't need an equivalent
> > > in QGIS -- e.g. those relating to styling features.
> > >
> > > Overall we have a good level of coverage of the most important
> > > functionality. There's a LOT of low-hanging fruit which could easily
> > > be addressed in small PRs (e.g. things like the
> > > "CharacterCodeExtractor" transformer would be a trivial task to
> > > implement as a new QGIS expression function ... a GREAT task for
> > > someone getting started with QGIS development!).
> > >
> > > (and just for completeness - QGIS offers hundreds of processing
> > > algorithms and expression functionality which **doesn't** have
> > > equivalents in FME. I suspect the reverse document would have just as
> > > many "missing" cells!)
> > >
> > > Feedback welcome! At some stage I think it would be nice to move this
> > > document across to the QGIS repo, and possibly pull into the QGIS
> > > documentation itself (along with similar documents for Arc/...
> > > functionality!)
> > >
> > > Nyall
> > > _______________________________________________
> > > QGIS-Developer mailing list
> > > QGIS-Developer at lists.osgeo.org
> > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230612/d669fec0/attachment.htm>

From regis.haubourg at gmail.com  Mon Jun 12 01:32:37 2023
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Mon, 12 Jun 2023 10:32:37 +0200
Subject: [QGIS-Developer] FME to QGIS functionality mapping
In-Reply-To: <CAMtsY+ab-Xv0Ucx3aTZETkeFuPKVqWkYge0zZ2b21JiH9wn7QQ@mail.gmail.com>
References: <CAB28AsjncicLqLiVyeW-RQWv-GyOxcoiarnUB5r2R-Gv1E2RjQ@mail.gmail.com>
 <c1452d2d-002b-290d-1350-fbd5e63e1273@carto.net>
 <CAB28Asg=3hyAB4MS0Z6d-Pums392hpru=eUW9B+0DOovgU7Z+A@mail.gmail.com>
 <CAMtsY+ab-Xv0Ucx3aTZETkeFuPKVqWkYge0zZ2b21JiH9wn7QQ@mail.gmail.com>
Message-ID: <CABgOYCeVNfmSK5o_GiYZD6-bt8+Ems0ZkZs4_ibMrB8-h+0BDg@mail.gmail.com>

Hi there,
That's good new, especially given the new policy of SAFE software on
licence costs.

On my view, here is the wishlist :

- as stated before, be aware of the datasource structure in a model, with
the ability to refresh it, or read it from a config ressources (file,
database etc..)
- have the magic graphical field autobinder widget. It is a massive
productivity gain having this. Autobind / show un-mapped fields with a
color indicator , replace the match by an expression is 90% of what I used
- have an internal model that is less strict than pure GIS ressources. If
you want to be able to parse JSON / GIS / OSM tags / multigeom?try
objectfs, we probably need an internal abstraction that is less constrained
than current WKT + typed table we have currently. I'm not sure if plans are
to go this way, but this is a major feature of FME (except multigeometries
that are not handled)
- Be able to store a cache of object to debug transformers.
- A very strong, clear and readable log. Currently most modeler errors are
just not giving userful informations.
- A graphical tool to drag and drop elements of the modele and enable /
disable them.

All the best !


Le lun. 12 juin 2023 ? 10:17, Denis Rouzaud via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hi all,
>
> We are currently evaluating work to improve QGIS processing to a closer
> experience to FME.
> There is already some information here from Nyall.
> Our memories are a bit loose, is there any other work done on requirements
> or a wishlist?
>
> Is there any work already started so we don't hijack?
>
> Thanks a lot,
> Denis
>
> Le mar. 7 avr. 2020 ? 12:22, Nyall Dawson <nyall.dawson at gmail.com> a
> ?crit :
>
>> On Tue, 7 Apr 2020 at 17:35, Andreas Neumann <a.neumann at carto.net> wrote:
>> >
>> > Hi Nyall,
>> >
>> > Thank you for sharing this interesting document.
>> >
>> > I have questions and remarks:
>> >
>> > 1. One fundamental difference between FME and QGIS modeler, as far as I
>> > understand it, is the fact that FME data sources are much more tightly
>> > coupled with the model than in QGIS modeler. This has the advantage,
>> > that the data readers, transformers and writers always know what
>> > geometry types and attributes they have. The disadvantage is that it is
>> > harder to exchange data sources with sources that have other attributes.
>> > In my experience the FME approach is what most users prefer. They like
>> > the fact that they can always see at each transformer what attributes
>> > are available at this stage. Would you see an improvement - perhaps
>> > another modeler mode - where also QGIS modeler would be more tightly
>> > coupled with the data sources and that the model and algorithms would
>> > always know at any step what attributes are available at this stage? Or
>> > is this a fundamental difference between the two approaches that
>> > couldn't be bridged?
>>
>> I think it's totally possible -- we just need to know how each
>> algorithm transforms its inputs into an output data set in advance
>> (i.e. the crs, wkb type, and fields).  API which permits this was
>> recently added, but it's not yet hooked into the modeler.  There's
>> still considerable work to do for that, but it's far from impossible!
>>
>> > 2. One aspect where FME shines is the ability to graphically debug
>> > models. One can at every step in the model get the view (map and table)
>> > of the intermediate step. One can also see at each branch in the model
>> > how many features take this route and how many the other route. I know
>> > this doesn't have anything to do with the transformer list you shared,
>> > but this an aspect that I think, many users like about FME.
>>
>> A recent improvement is that after running a model in the designer,
>> you can now see the actual values of inputs and outputs which were
>> used for each child algorithm in the model. It's a partial step
>> towards the FME approach. To get the rest of the way we'd need:
>> 1. to ensure that every algorithm has numeric outputs for the number
>> of features processed
>> 2. ideally to allow the model to run on a background thread inside the
>> designer, so that you'd see these input/output values populate
>> instantly as the model runs (would also allow us to color-code child
>> algorithms by state, e.g. completed/running/pending/skipped).
>>
>> 1. is pretty straightforward, just a lot of grunt work. 2. is more
>> complex (and I suspect only achievable in builds based on qt 5.10+
>> (since we'd need to invoke the child algorithm prepare steps on the
>> main thread)... but its probably time to bump the minimum anyway).
>>
>> Anyway, definitely achievable in the near future.
>>
>> > I agree that there would a lot of "low hanging" fruits and I'm looking
>> > forward to more feature parity between the two. And to the discussion
>> > around it.
>>
>> Me too! When 3.14 is released the model capabilities in QGIS will be
>> much much improved vs previous releases. Just the fact that **every**
>> parameter for child algorithms (including input and output layers) can
>> now be defined using qgis expressions opens up a WHOLE new world of
>> possibilities alone...
>>
>> Nyall
>>
>>
>>
>> >
>> > Greetings,
>> >
>> > Andreas
>> >
>> > Am 07.04.20 um 03:27 schrieb Nyall Dawson:
>> > > Hi list,
>> > >
>> > > Just wanted to give a heads up on a document I've recently completed,
>> > > which maps existing FME functionality across to the equivalent QGIS
>> > > Processing or Expression equivalent:
>> > >
>> > >
>> https://github.com/nyalldawson/qgis-processing-hitlist/blob/master/fme.md
>> > >
>> > > Since FME transformers are both algorithm-like and expression-like
>> > > functionality, the document splits the QGIS equivalents into columns
>> > > for both algorithms and expressions. Wherever the transformer
>> > > functionality doesn't apply, a "N/A" is entered in the corresponding
>> > > column (e.g. the "StringCaseChanger" transformer doesn't make sense
>> > > the implement as a QGIS Processing algorithm -- it's equivalent is
>> > > instead the expression functions "lower", "upper" and "title". And
>> > > conversely the "DuplicateFilter" transformer maps to the Processing
>> > > algorithms "Delete Duplicate Geometries" and "Delete duplicates by
>> > > attribute", but doesn't make sense to have an expression function
>> > > equivalent!)
>> > >
>> > > There's also Transformers in FME which really don't need an equivalent
>> > > in QGIS -- e.g. those relating to styling features.
>> > >
>> > > Overall we have a good level of coverage of the most important
>> > > functionality. There's a LOT of low-hanging fruit which could easily
>> > > be addressed in small PRs (e.g. things like the
>> > > "CharacterCodeExtractor" transformer would be a trivial task to
>> > > implement as a new QGIS expression function ... a GREAT task for
>> > > someone getting started with QGIS development!).
>> > >
>> > > (and just for completeness - QGIS offers hundreds of processing
>> > > algorithms and expression functionality which **doesn't** have
>> > > equivalents in FME. I suspect the reverse document would have just as
>> > > many "missing" cells!)
>> > >
>> > > Feedback welcome! At some stage I think it would be nice to move this
>> > > document across to the QGIS repo, and possibly pull into the QGIS
>> > > documentation itself (along with similar documents for Arc/...
>> > > functionality!)
>> > >
>> > > Nyall
>> > > _______________________________________________
>> > > QGIS-Developer mailing list
>> > > QGIS-Developer at lists.osgeo.org
>> > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230612/0af7eed0/attachment-0001.htm>

From radim.blazek at gmail.com  Mon Jun 12 03:32:40 2023
From: radim.blazek at gmail.com (Radim Blazek)
Date: Mon, 12 Jun 2023 12:32:40 +0200
Subject: [QGIS-Developer] QgsProjectStyleSettings styles.db remain open
 after QgsProject::clear()
In-Reply-To: <CAB28Ashe+fiF9ZtBsjFLLDvCvQnziOoxNr3u97JfYC3W9Y4=eQ@mail.gmail.com>
References: <CAEMrtYpj08mLbf=drxKF-0rMKzirh3dguU0u=LAjXphi4HHeVA@mail.gmail.com>
 <CAB28Ashe+fiF9ZtBsjFLLDvCvQnziOoxNr3u97JfYC3W9Y4=eQ@mail.gmail.com>
Message-ID: <CAEMrtYrWy49iJuC1FDsnwtnMQtbiJnyaKu1fQj8gUEA1A7pL7w@mail.gmail.com>

QCoreApplication.sendPostedEvents(None, QEvent.DeferredDelete) does the job.

Thanks
Radim

On Tue, Apr 18, 2023 at 10:38?AM Nyall Dawson <nyall.dawson at gmail.com> wrote:
> You can safely execute the event loop with DeferredDelete to only cleanup of this object without the danger of other event loop mess.

From nyall.dawson at gmail.com  Mon Jun 12 04:48:53 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 12 Jun 2023 21:48:53 +1000
Subject: [QGIS-Developer] QgsProjectStyleSettings styles.db remain open
 after QgsProject::clear()
In-Reply-To: <CAEMrtYrWy49iJuC1FDsnwtnMQtbiJnyaKu1fQj8gUEA1A7pL7w@mail.gmail.com>
References: <CAEMrtYpj08mLbf=drxKF-0rMKzirh3dguU0u=LAjXphi4HHeVA@mail.gmail.com>
 <CAB28Ashe+fiF9ZtBsjFLLDvCvQnziOoxNr3u97JfYC3W9Y4=eQ@mail.gmail.com>
 <CAEMrtYrWy49iJuC1FDsnwtnMQtbiJnyaKu1fQj8gUEA1A7pL7w@mail.gmail.com>
Message-ID: <CAB28AsgNpqh3T6dzruWCQx8r66oM63Uxexd75WZKNTSt6mO+aA@mail.gmail.com>

On Mon, 12 June 2023, 8:32 pm Radim Blazek, <radim.blazek at gmail.com> wrote:

> QCoreApplication.sendPostedEvents(None, QEvent.DeferredDelete) does the
> job.
>

https://github.com/qgis/QGIS/pull/53400 will have helped here too! (At this
stage I'm not planning on backporting that though)

Nyall

>
> Thanks
> Radim
>
> On Tue, Apr 18, 2023 at 10:38?AM Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> > You can safely execute the event loop with DeferredDelete to only
> cleanup of this object without the danger of other event loop mess.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230612/88955d93/attachment.htm>

From matteo.ghetta at gmail.com  Tue Jun 13 06:19:50 2023
From: matteo.ghetta at gmail.com (matteo)
Date: Tue, 13 Jun 2023 15:19:50 +0200
Subject: [QGIS-Developer] Refresh attribute form python action
Message-ID: <ef63ca49-952a-23fc-b2bb-fa3d1f691b87@gmail.com>

Hi all,

I'm defining a python action that is triggered in the feature form (as a 
button or from the menu).

The action is retrieving some values from other layers and some of these 
values will update some form widget, avoiding the user to filling them 
manually (I really simplified the workflow :) ).

I think it is by design that QGIS is sending to the data provider the 
values when the OK button is clicked and then the Save button is 
clicked, but with the commitChanges() method I can directly send the 
changes to the provider from the action body.

Now the problem: the widgets are not updated unless the form is closed 
and reopened again. I couldn't find a method to refresh the form widget 
from the action itself. Is there any?

Cheers and thanks!

Matteo

From luis3176 at yahoo.com  Tue Jun 13 06:26:12 2023
From: luis3176 at yahoo.com (Luis Eduardo)
Date: Tue, 13 Jun 2023 13:26:12 +0000 (UTC)
Subject: [QGIS-Developer] py3_env not recognized in versions later than 3.16
References: <618147512.214118.1686662772189.ref@mail.yahoo.com>
Message-ID: <618147512.214118.1686662772189@mail.yahoo.com>

HelloI need to install Pytorch in QGIS 3.22, 3.28, using pip but I can't configure the environment, py3_env is not recognized.And through the OSGEO installer the library is not available.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230613/e20140ba/attachment.htm>

From andreaerdna at libero.it  Tue Jun 13 07:35:59 2023
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Tue, 13 Jun 2023 16:35:59 +0200
Subject: [QGIS-Developer] py3_env not recognized in versions later than
 3.16
Message-ID: <e1548152-110a-c876-9ff2-4b4ea20a268a@libero.it>

Il 13/06/2023 15:26, Luis Eduardo via QGIS-Developer ha scritto:
> Hello
> I need to install Pytorch in QGIS 3.22, 3.28, using pip but I can't 
> configure the environment, py3_env is not recognized.

Hi Luis Eduardo,
AFAIK py3_env is no longer available in the OSGeo4W Shell and it is no 
longer needed because OSGeo4W uses Python 3 by default since a couple of 
years (since 3.16 msi/v2).

> And through the OSGEO installer the library is not available.

Have you tried using python -m pip install ....?

Best regards.

Andrea

From jef at norbit.de  Tue Jun 13 09:18:47 2023
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Tue, 13 Jun 2023 18:18:47 +0200
Subject: [QGIS-Developer] py3_env not recognized in versions later than
 3.16
In-Reply-To: <618147512.214118.1686662772189@mail.yahoo.com>
References: <618147512.214118.1686662772189.ref@mail.yahoo.com>
 <618147512.214118.1686662772189@mail.yahoo.com>
Message-ID: <20230613161847.ywwvk2im4shn5a2u@norbit.de>

Hi Luis,

On Tue, 13. Jun 2023 at 13:26:12 +0000, Luis Eduardo via QGIS-Developer wrote:
> HelloI need to install Pytorch in QGIS 3.22, 3.28, using pip but I can't
> configure the environment, py3_env is not recognized.And through the OSGEO
> installer the library is not available.

Huh?  py3_env.bat was used in OSGeo4W to switch from the default python2
install to python3.  As OSGeo4W v2 only has python3, py3_env is not needed
anymore.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230613/8aaa85a5/attachment.sig>

From Jean-Francois.Bourdon at mrnf.gouv.qc.ca  Tue Jun 13 12:10:47 2023
From: Jean-Francois.Bourdon at mrnf.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Tue, 13 Jun 2023 19:10:47 +0000
Subject: [QGIS-Developer] Planned support for JPEG XL?
Message-ID: <QB1PR01MB29483D757BFDA2C69B6F5306B955A@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>

[Intranet logo]
Hi all,

According to GDAL's website, GDAL has support for JPEG XL compression since 3.6.0 but only when built against libjxl<https://github.com/libjxl/libjxl>. Considering that QGIS now uses GDAL 3.7, I was wondering if there was any plan to include it with the libjxl library in the future. Having tried the compression algorithm, it's performance is impressive and I can't wait stop using a proprietary ECW compression for our big mosaics!

Thanks!


Jean-Fran?ois Bourdon, ing.f.
Analyste en t?l?d?tection
Direction des inventaires forestiers
Minist?re des Ressources naturelles et des For?ts
5700, 4e Avenue Ouest, local A-108
Qu?bec (Qu?bec) G1H 6R1
T?l?phone : 418 627-8669, poste 704304
jean-francois.bourdon at mrnf.gouv.qc.ca<mailto:jean-francois.bourdon at mrnf.gouv.qc.ca>
mrnf.gouv.qc.ca<http://www.mrnf.gouv.qc.ca/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230613/578a05b6/attachment.htm>

From alister.hood at gmail.com  Wed Jun 14 03:17:06 2023
From: alister.hood at gmail.com (Alister Hood)
Date: Wed, 14 Jun 2023 22:17:06 +1200
Subject: [QGIS-Developer] Are standard processing post-execution scripts not
 supported in QGIS3?
Message-ID: <CAF6hL+XfKnDL8qytz9O=W0PPhbuN9=uM9pNoxU128H9B2VrhHQ@mail.gmail.com>

Hi,
This is included in the documentation:
17.28. Pre- and post-execution script hooks ? QGIS Documentation
documentation
<https://docs.qgis.org/3.28/en/docs/training_manual/processing/hooks.html>

But it seems to me that although ProcessingConfig.POST_EXECUTION_SCRIPT
and ProcessingConfig.PRE_EXECUTION_SCRIPT exist in QGIS3, they're actually
not used for anything.  Is this right, or am I missing something?

Note that the code in the examples seems to be for QGIS2 (although even
there it doesn't work in Windows, unless I switch from shutil copytree to
distutils.dir_util copy_tree).

Thanks,
Alister
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230614/a4d4489b/attachment.htm>

From r.nijssen at terglobo.nl  Thu Jun 15 00:24:57 2023
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Thu, 15 Jun 2023 09:24:57 +0200
Subject: [QGIS-Developer] FOSS4G Community Sprint
Message-ID: <fad60ce6-55b1-f483-8d95-d1c792ed36a7@terglobo.nl>

To everyone attending FOSS4G 2023 in Prizren,

There won't be a QGIS Contributor Meeting connected to the FOSS4G 
conference this year. But there will be an OSGeo Community Sprint during 
the weekend after the main conference (July 1+2). This is a "contributor 
meeting" for all OSgeo projects, so QGIS should be represented as it is 
the best, coolest, fasted, most widely used and most beautiful project 
in OSGeo, made by the smartest, nicest, funniest and most modest people!

Hope to see you there!
Raymond

https://wiki.osgeo.org/wiki/FOSS4G_2023_Community_Sprint

From maps at hanfastolfe.com  Thu Jun 15 11:36:25 2023
From: maps at hanfastolfe.com (Cory Albrecht)
Date: Thu, 15 Jun 2023 14:36:25 -0400
Subject: [QGIS-Developer] [Qgis-user] Call of testing of nightlies on
 hi-dpi displays
In-Reply-To: <CAB28AshVeSS_KY28+BzK0cMpLf+G1YiXs6VkdbMBV1v5Cejf1Q@mail.gmail.com>
References: <CAB28AshVeSS_KY28+BzK0cMpLf+G1YiXs6VkdbMBV1v5Cejf1Q@mail.gmail.com>
Message-ID: <CAMW5rYKKXhpaqLJs_GV7f5DddoVUedpGrEj4EmKmnY6zYJ2aWQ@mail.gmail.com>

[image: Screenshot from 2023-06-15 01-08-54.png]
Left is from the ubuntu-nightly repo. right is 3.22.16 Bia?owie?a. Two
3840x2160 monitors

On Mon, May 29, 2023 at 12:01?AM Nyall Dawson via QGIS-User <
qgis-user at lists.osgeo.org> wrote:

> Hi lists,
>
> For the upcoming QGIS 3.32 release a change has been made in how QGIS
> handles high dpi (and retina) displays. This should ultimately make
> QGIS behave MUCH better on these displays, but there's likely some
> short-term fallout and regressions caused by the change.
>
> If you've access to a high-dpi display, please test out the nightly
> releases and file bug reports on github for any regressions you spot
> -- in particular we are looking for widgets and places where the QGIS
> interface is now looking pixelated or where the scale / sizes of
> objects are incorrect.
>
> (Currently there's known regressions for the icons shown in the layer
> tree panel, and for pixelated icons in the style manager dialog.)
>
> Thanks in advance!
> Nyall
> _______________________________________________
> QGIS-User mailing list
> QGIS-User at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230615/00bd4930/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot from 2023-06-15 01-08-54.png
Type: image/png
Size: 2007202 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230615/00bd4930/attachment-0001.png>

From maps at hanfastolfe.com  Thu Jun 15 14:40:17 2023
From: maps at hanfastolfe.com (Cory Albrecht)
Date: Thu, 15 Jun 2023 17:40:17 -0400
Subject: [QGIS-Developer] Why so many database calls?
Message-ID: <CAMW5rYLmbYvXS8fWFMnoLmeqWZc0KirN5eP-3TeNPEWKE+MM5w@mail.gmail.com>

Hello,

So I've been trying to track down why my postgresql server was getting so
many Signal 10 (SUG BS, memory bus) errors. So far I have figured out that
they are only happening when QGIS is connecting to it using GSS/Kerberos
encryption. No clue yet as to which side is the culprit (e.g. bad QGIS
kerberised data flow, or bad PostgreSQL handling of the connection). QGIS
cinnectio with SSL encryption is fine.

Anyways, while doing this I've been watching a lot of PostgreSQL server
logs, and I noticed the following behaviour of QGIS:

When using the vertex editor to delete a whole slew (1,000-ish) vertices
from a polygon feature, I saw that QGIS was making repeated DB cals like
this:

Jun 15 17:14:19 postgresql-3 postgres[87136]: [3204-1] ::>[2023-06-15
17:14:19.289 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
 duration: 0.330 ms  statement: BEGIN READ ONLY;DECLARE qgis_1062 BINARY
CURSOR FOR SELECT
"feature_uuid"::text,"name"::text,"start_date"::text,"end_date"::text,"main_rgb"::text,"realm_uuid"::text,"stripe_rgb"::text,"border_rgb"::text,"border_shade"::text,"sovereign"::text,"type"::text,"info_url"::text,array_out("predecessors")::text,array_out("successors")::text,boolout("visible")::text,boolout("has_children")::text,"full_name"::text,"alternate_name"::text,"flag_url"::text
FROM "Balance of Power"."timeline_level0" WHERE
"feature_uuid"::text='fbbec581-eb8f-4068-8729-8f9d63896bd5'
Jun 15 17:14:19 postgresql-3 postgres[87136]: [3205-1] ::>[2023-06-15
17:14:19.290 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
 duration: 0.628 ms  statement: FETCH FORWARD 2000 FROM qgis_1062
Jun 15 17:14:19 postgresql-3 postgres[87136]: [3206-1] ::>[2023-06-15
17:14:19.291 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
 duration: 0.045 ms  statement: CLOSE qgis_1062;COMMIT

An example of the QGIS console output:

./src/core/qgsmessagelog.cpp:29 : (logMessage) [4ms] 2023-06-15T17:37:08
PostGIS[1] NOTICE: LOG:  duration: 0.399 ms  statement: FETCH FORWARD 2000
FROM qgis_2017
./src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2023-06-15T17:37:08
PostGIS[1] NOTICE: LOG:  duration: 0.035 ms  statement: CLOSE
qgis_2017;COMMIT
./src/core/qgsmessagelog.cpp:29 : (logMessage) [3ms] 2023-06-15T17:37:08
PostGIS[1] NOTICE: LOG:  duration: 0.240 ms  statement: BEGIN READ
ONLY;DECLARE qgis_2018 BINARY CURSOR FOR SELECT
"feature_uuid"::text,"name"::text,"start_date"::text,"end_date"::text,"main_rgb"::text,"realm_uuid"::text,"stripe_rgb"::text,"border_rgb"::text,"border_shade"::text,"sovereign"::text,"type"::text,"info_url"::text,array_out("predecessors")::text,array_out("successors")::text,boolout("visible")::text,boolout("has_children")::text,"full_name"::text,"alternate_name"::text,"flag_url"::text
FROM "Balance of Power"."timeline_level0" WHERE
"feature_uuid"::text='fbbec581-eb8f-4068-8729-8f9d63896bd5'
./src/core/qgsmessagelog.cpp:29 : (logMessage) [2ms] 2023-06-15T17:37:08
PostGIS[1] NOTICE: LOG:  duration: 0.406 ms  statement: FETCH FORWARD 2000
FROM qgis_2018
./src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2023-06-15T17:37:08
PostGIS[1] NOTICE: LOG:  duration: 0.034 ms  statement: CLOSE
qgis_2018;COMMIT



That is repeated 4 times every couple of seconds as I wait for QGIS to
finish deleting these 1,000-ish vertices. So far it's at begin block
qgis_2058 (increasing sequentially) and it's been 20+ minutes that QGIS has
been frozen, CPU usage for the process jumping around between 100% and 300%.

(Before you ask, Fall 2021 Dell XPS 9510, 11th Gen Intel Core i9-11900H @
2.50GHz 8 cores, 64GB RAM.)

So why is it repeatedly making database calls to get the non geometry
attributes of that same singular feature? Why can't it just use the cached
data instead of making all these wasteful DB queries?

And why is it taking so long to delete the vertices? Is it related to all
the unnecessary DB queries?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230615/7aac644d/attachment.htm>

From senhor.neto at gmail.com  Fri Jun 16 06:39:26 2023
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Fri, 16 Jun 2023 13:39:26 +0000
Subject: [QGIS-Developer] QGIS builds source for qtwebkit?
Message-ID: <4fd78305-c256-4fd4-af40-9665acf9e0f1@mail.shortwave.com>

Are we (actually J?rgen) building qtwebkit from source? what is the source that is being used. At conda-forge we were using the link below, which was removed from qt.io <http://qt.io> site.

http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz <http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz>

We found this:

https://github.com/movableink/webkit/releases <https://github.com/movableink/webkit/releases>

But I wanted to confirm if the official builds use the source from other place.

thanks!

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230616/cdb9240b/attachment.htm>

From maps at hanfastolfe.com  Fri Jun 16 10:18:35 2023
From: maps at hanfastolfe.com (Cory Albrecht)
Date: Fri, 16 Jun 2023 13:18:35 -0400
Subject: [QGIS-Developer] Why so many database calls?
In-Reply-To: <CAMW5rYLmbYvXS8fWFMnoLmeqWZc0KirN5eP-3TeNPEWKE+MM5w@mail.gmail.com>
References: <CAMW5rYLmbYvXS8fWFMnoLmeqWZc0KirN5eP-3TeNPEWKE+MM5w@mail.gmail.com>
Message-ID: <CAMW5rY+mQF8c3-tb+NS_Em90bVGoK2iwO6OS639-0he8hyu54A@mail.gmail.com>

So QGIS took almost 2.5 hours to delete those 1,000-ish vertices, spitting
out those seemingly unnecessary transaction blocks every second or so.
Judging by the numbers of the named blocks, roughly 5,000 of them were done
just to delete those 1,000-ish vertices.

Right now, on that same feature, I went to add a new vertx in the middle of
the gap created by the deletion of the 1,000-ish last night, drag it to a
new spot, and right clock to place. Those same seemingly unnecessary
read-only transactions with a single select are being done, but at the rate
of roughly 100 per second and the process takes about 7-8 minutes after the
right click before QGIS becomes responsive again. I've done it a few times
this morning, exiting QGIS without saving, and same thing each time.

Why so many of these database queries?


On Thu, Jun 15, 2023 at 5:40?PM Cory Albrecht <maps at hanfastolfe.com> wrote:

> Hello,
>
> So I've been trying to track down why my postgresql server was getting so
> many Signal 10 (SUG BS, memory bus) errors. So far I have figured out that
> they are only happening when QGIS is connecting to it using GSS/Kerberos
> encryption. No clue yet as to which side is the culprit (e.g. bad QGIS
> kerberised data flow, or bad PostgreSQL handling of the connection). QGIS
> cinnectio with SSL encryption is fine.
>
> Anyways, while doing this I've been watching a lot of PostgreSQL server
> logs, and I noticed the following behaviour of QGIS:
>
> When using the vertex editor to delete a whole slew (1,000-ish) vertices
> from a polygon feature, I saw that QGIS was making repeated DB cals like
> this:
>
> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3204-1] ::>[2023-06-15
> 17:14:19.289 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
>  duration: 0.330 ms  statement: BEGIN READ ONLY;DECLARE qgis_1062 BINARY
> CURSOR FOR SELECT
> "feature_uuid"::text,"name"::text,"start_date"::text,"end_date"::text,"main_rgb"::text,"realm_uuid"::text,"stripe_rgb"::text,"border_rgb"::text,"border_shade"::text,"sovereign"::text,"type"::text,"info_url"::text,array_out("predecessors")::text,array_out("successors")::text,boolout("visible")::text,boolout("has_children")::text,"full_name"::text,"alternate_name"::text,"flag_url"::text
> FROM "Balance of Power"."timeline_level0" WHERE
> "feature_uuid"::text='fbbec581-eb8f-4068-8729-8f9d63896bd5'
> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3205-1] ::>[2023-06-15
> 17:14:19.290 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
>  duration: 0.628 ms  statement: FETCH FORWARD 2000 FROM qgis_1062
> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3206-1] ::>[2023-06-15
> 17:14:19.291 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
>  duration: 0.045 ms  statement: CLOSE qgis_1062;COMMIT
>
> An example of the QGIS console output:
>
> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [4ms] 2023-06-15T17:37:08
> PostGIS[1] NOTICE: LOG:  duration: 0.399 ms  statement: FETCH FORWARD 2000
> FROM qgis_2017
> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2023-06-15T17:37:08
> PostGIS[1] NOTICE: LOG:  duration: 0.035 ms  statement: CLOSE
> qgis_2017;COMMIT
> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [3ms] 2023-06-15T17:37:08
> PostGIS[1] NOTICE: LOG:  duration: 0.240 ms  statement: BEGIN READ
> ONLY;DECLARE qgis_2018 BINARY CURSOR FOR SELECT
> "feature_uuid"::text,"name"::text,"start_date"::text,"end_date"::text,"main_rgb"::text,"realm_uuid"::text,"stripe_rgb"::text,"border_rgb"::text,"border_shade"::text,"sovereign"::text,"type"::text,"info_url"::text,array_out("predecessors")::text,array_out("successors")::text,boolout("visible")::text,boolout("has_children")::text,"full_name"::text,"alternate_name"::text,"flag_url"::text
> FROM "Balance of Power"."timeline_level0" WHERE
> "feature_uuid"::text='fbbec581-eb8f-4068-8729-8f9d63896bd5'
> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [2ms] 2023-06-15T17:37:08
> PostGIS[1] NOTICE: LOG:  duration: 0.406 ms  statement: FETCH FORWARD 2000
> FROM qgis_2018
> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2023-06-15T17:37:08
> PostGIS[1] NOTICE: LOG:  duration: 0.034 ms  statement: CLOSE
> qgis_2018;COMMIT
>
>
>
> That is repeated 4 times every couple of seconds as I wait for QGIS to
> finish deleting these 1,000-ish vertices. So far it's at begin block
> qgis_2058 (increasing sequentially) and it's been 20+ minutes that QGIS has
> been frozen, CPU usage for the process jumping around between 100% and 300%.
>
> (Before you ask, Fall 2021 Dell XPS 9510, 11th Gen Intel Core i9-11900H @
> 2.50GHz 8 cores, 64GB RAM.)
>
> So why is it repeatedly making database calls to get the non geometry
> attributes of that same singular feature? Why can't it just use the cached
> data instead of making all these wasteful DB queries?
>
> And why is it taking so long to delete the vertices? Is it related to all
> the unnecessary DB queries?
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230616/5c468dfe/attachment-0001.htm>

From njacadieux.gitlab at gmail.com  Fri Jun 16 11:43:50 2023
From: njacadieux.gitlab at gmail.com (Nicolas Cadieux)
Date: Fri, 16 Jun 2023 20:43:50 +0200
Subject: [QGIS-Developer] Planned support for JPEG XL?
In-Reply-To: <QB1PR01MB29483D757BFDA2C69B6F5306B955A@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
References: <QB1PR01MB29483D757BFDA2C69B6F5306B955A@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <50ACB72C-B193-4D1A-B26D-0B0DA3D9D79A@gmail.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230616/93e61d76/attachment.htm>

From andreaerdna at libero.it  Sat Jun 17 03:10:50 2023
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Sat, 17 Jun 2023 12:10:50 +0200
Subject: [QGIS-Developer] Planned support for JPEG XL?
Message-ID: <9f1dbd5d-b408-bd16-e791-97aa303dfe54@libero.it>

 > [QGIS-Developer] Planned support for JPEG XL?
 > DIF Tue, 13 Jun 2023 12:10:54 -0700

 > According to GDAL's website, GDAL has support for JPEG XL compression 
since
 > 3.6.0 but only when built against 
libjxl<https://github.com/libjxl/libjxl>.
 > Considering that QGIS now uses GDAL 3.7, I was wondering if there was 
any plan
 > to include it with the libjxl library in the future.

Hi Jean-Fran?ois,
if you are using Windows OS and GDAL provided by OSGeo4W, have you tried
to update GDAL to the latest GDAL 3.7.0-2 package which was build
against libjxl?

See
https://github.com/jef-n/OSGeo4W/commit/c54d56a15918c4ed63afa5b776e6a5041f26f38d

Best regards.

Andrea Giudiceandrea

From jef at norbit.de  Sun Jun 18 13:06:11 2023
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Sun, 18 Jun 2023 22:06:11 +0200
Subject: [QGIS-Developer] QGIS builds source for qtwebkit?
In-Reply-To: <4fd78305-c256-4fd4-af40-9665acf9e0f1@mail.shortwave.com>
References: <4fd78305-c256-4fd4-af40-9665acf9e0f1@mail.shortwave.com>
Message-ID: <20230618200611.km3edqkm5g2iuka6@norbit.de>

Hi Alex,

On Fri, 16. Jun 2023 at 13:39:26 +0000, Alexandre Neto via QGIS-Developer wrote:
> Are we (actually J?rgen) building qtwebkit from source? what is the source that is being used. At conda-forge we were using the link below, which was removed from qt.io <http://qt.io> site.
> 
> http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz <http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz>

The recipe is at

https://github.com/jef-n/OSGeo4W/blob/master/src/qtwebkit/osgeo4w/package.sh

so the package was built with:

https://github.com/qtwebkit/qtwebkit/releases/download/qtwebkit-5.212.0-alpha4/qtwebkit-5.212.0-alpha4.tar.xz



J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230618/9287e9b0/attachment.sig>

From rdmailings at duif.net  Sun Jun 18 23:09:15 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 19 Jun 2023 08:09:15 +0200
Subject: [QGIS-Developer] Input for changelog
Message-ID: <f3ffc14a599f5c1ec040dc33fc943c78@duif.net>

Hi Devs,

As packaging of 3.32 is coming close... and we will pull the changelog 
from the input site into qgis.org.
While already looking good(!), can you please have a look at 
https://changelog.qgis.org/en/qgis/version/3.32/ and add items if 
needed, fix/update texts if needed and/or add some screenies to make it 
look cooler :-)

TIA,

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Sun Jun 18 23:12:38 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 19 Jun 2023 08:12:38 +0200
Subject: [QGIS-Developer] Proposal? Set 'Use Proxy for Web Access'
 default ON to 'DefaultProxy'
In-Reply-To: <9f29a7a5-6f0d-7859-f519-848a04dc39cf@duif.net>
References: <9f29a7a5-6f0d-7859-f519-848a04dc39cf@duif.net>
Message-ID: <7971729f486589bdfd610d39650455bb@duif.net>


Hi, created a PR for this:

https://github.com/qgis/QGIS/pull/53424

Nobody have this issue/urge?
@Juergen: as you are our 'Windows'-man ;-)  do you see an issue with 
this (defaulting to 'Use Default Proxy'?)

Regards,

Richard Duivenvoorde


On 2023-05-17 09:47, Richard Duivenvoorde via QGIS-Developer wrote:
> Hi All,
> 
> Currently a fresh install/profile has 'Use Proxy for Web Access' 
> UNchecked.
> 
> I propose to set it CHECKED and then 'Proxy type' to DefaultProxy (all
> see Network Settings)
> 
> This means that if you are in an environment without proxy, it will
> not be in your system environment, so will not be used.
> While if the admins setup the proper proxy, it will also 'just work'.
> 
> Anybody aware of a reason to NOT do this?
> 
> Background: working at institutions/companies which often have some
> kind of proxy enabled, I often have the hassle of making the users
> aware on how to set the web proxy... (because they often want WMS/WFS
> layers from outside the local network)...
> 
> If we would set it by default to "use system proxy" (for what I know
> that is also how most browsers are working), that would solve a lot of
> 'web issues', while (for what I know) would not affect normal use
> without proxies?
> 
> Anybody would have or see an issue with that?
> 
> Regards,
> 
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From senhor.neto at gmail.com  Mon Jun 19 00:51:41 2023
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Mon, 19 Jun 2023 08:51:41 +0100
Subject: [QGIS-Developer] QGIS builds source for qtwebkit?
In-Reply-To: <20230618200611.km3edqkm5g2iuka6@norbit.de>
References: <4fd78305-c256-4fd4-af40-9665acf9e0f1@mail.shortwave.com>
 <20230618200611.km3edqkm5g2iuka6@norbit.de>
Message-ID: <CA+H0G_Eiq3M5U47ONYEQ3LtXr_-1pRXpdW7jb=JbC4cu4bLB2w@mail.gmail.com>

Hi J?rgen!

Thanks you very much.

Alex

A domingo, 18/06/2023, 21:09, J?rgen E. Fischer via QGIS-Developer <
qgis-developer at lists.osgeo.org> escreveu:

> Hi Alex,
>
> On Fri, 16. Jun 2023 at 13:39:26 +0000, Alexandre Neto via QGIS-Developer
> wrote:
> > Are we (actually J?rgen) building qtwebkit from source? what is the
> source that is being used. At conda-forge we were using the link below,
> which was removed from qt.io <http://qt.io> site.
> >
> >
> http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz
> <
> http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz
> >
>
> The recipe is at
>
>
> https://github.com/jef-n/OSGeo4W/blob/master/src/qtwebkit/osgeo4w/package.sh
>
> so the package was built with:
>
>
> https://github.com/qtwebkit/qtwebkit/releases/download/qtwebkit-5.212.0-alpha4/qtwebkit-5.212.0-alpha4.tar.xz
>
>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/38a4b28f/attachment.htm>

From senhor.neto at gmail.com  Mon Jun 19 03:39:21 2023
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Mon, 19 Jun 2023 10:39:21 +0000
Subject: [QGIS-Developer] QGIS builds source for qtwebkit?
In-Reply-To: <CA+H0G_Eiq3M5U47ONYEQ3LtXr_-1pRXpdW7jb=JbC4cu4bLB2w@mail.gmail.com>
References: <4fd78305-c256-4fd4-af40-9665acf9e0f1@mail.shortwave.com>
 <20230618200611.km3edqkm5g2iuka6@norbit.de>
 <CA+H0G_Eiq3M5U47ONYEQ3LtXr_-1pRXpdW7jb=JbC4cu4bLB2w@mail.gmail.com>
Message-ID: <5ecc6a25-030f-4bc6-8bc7-cbc661435f83@mail.shortwave.com>

One more question,

Are there any plans to use the new sources? There's only a pre-release by now, but at least it's active.

Thanks,

On Mon Jun 19, 2023, 07:51 AM GMT, Alexandre Neto <mailto:senhor.neto at gmail.com> wrote:
> Hi J?rgen!
>
> Thanks you very much.
>
> Alex
>
> A domingo, 18/06/2023, 21:09, J?rgen E. Fischer via QGIS-Developer <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>> escreveu:
>> Hi Alex,
>>
>> On Fri, 16. Jun 2023 at 13:39:26 +0000, Alexandre Neto via QGIS-Developer wrote:
>> > Are we (actually J?rgen) building qtwebkit from source? what is the source that is being used. At conda-forge we were using the link below, which was removed from qt.io <http://qt.io> <http://qt.io <http://qt.io>> site.
>> >
>> > http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz <http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz> <http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz <http://download.qt.io/snapshots/ci/qtwebkit/5.212/1600955993/src/submodules/qtwebkit-opensource-src-5.212.tar.xz>>
>>
>> The recipe is at
>>
>> https://github.com/jef-n/OSGeo4W/blob/master/src/qtwebkit/osgeo4w/package.sh <https://github.com/jef-n/OSGeo4W/blob/master/src/qtwebkit/osgeo4w/package.sh>
>>
>> so the package was built with:
>>
>> https://github.com/qtwebkit/qtwebkit/releases/download/qtwebkit-5.212.0-alpha4/qtwebkit-5.212.0-alpha4.tar.xz <https://github.com/qtwebkit/qtwebkit/releases/download/qtwebkit-5.212.0-alpha4/qtwebkit-5.212.0-alpha4.tar.xz>
>>
>>
>>
>> J?rgen
>>
>> --
>> J?rgen E. Fischer norBIT GmbH Tel. +49-4931-918175-31
>> Dipl.-Inf. (FH) Rheinstra?e 13 Fax. +49-4931-918175-50
>> Software Engineer D-26506 Norden https://www.norbit.de <https://www.norbit.de>
>> QGIS release manager (PSC) Germany IRC: jef on Libera|OFTC
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/6f389fda/attachment.htm>

From Jean-Francois.Bourdon at mrnf.gouv.qc.ca  Mon Jun 19 05:33:57 2023
From: Jean-Francois.Bourdon at mrnf.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Mon, 19 Jun 2023 12:33:57 +0000
Subject: [QGIS-Developer] Planned support for JPEG XL?
In-Reply-To: <9f1dbd5d-b408-bd16-e791-97aa303dfe54@libero.it>
References: <9f1dbd5d-b408-bd16-e791-97aa303dfe54@libero.it>
Message-ID: <QB1PR01MB29489F40857C6F2412737266B95FA@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>

[Intranet logo]

Hi Andrea,



I haven't as it wasn't an option when I sent my email, but now that it is, I'll do. If I understand the PR correctly, it will only be available with a gdal-dev install for now but I suppose that in a couple release it will be available with "regular" gdal by OSGeo4W and thus available to all QGIS Windows users by default.



Thanks





Jean-Fran?ois Bourdon, ing.f.

Analyste en t?l?d?tection

Direction des inventaires forestiers

Minist?re des Ressources naturelles et des For?ts

5700, 4e Avenue Ouest, local A-108

Qu?bec (Qu?bec) G1H 6R1

T?l?phone : 418 627-8669, poste 704304

jean-francois.bourdon at mrnf.gouv.qc.ca

mrnf.gouv.qc.ca



-----Message d'origine-----
De : QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> De la part de Andrea Giudiceandrea via QGIS-Developer
Envoy? : 17 juin 2023 06:11
? : qgis-developer at lists.osgeo.org
Objet : Re: [QGIS-Developer] Planned support for JPEG XL?



> [QGIS-Developer] Planned support for JPEG XL?

> DIF Tue, 13 Jun 2023 12:10:54 -0700



> According to GDAL's website, GDAL has support for JPEG XL compression since  > 3.6.0 but only when built against libjxl<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Flibjxl%2Flibjxl&data=05%7C01%7Cjean-francois.bourdon%40mrnf.gouv.qc.ca%7C7dcc9c8dab714597540708db6f1c4c4f%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C638225939553466428%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2BDYyzLe1TZ%2FztjTNZNlmipuwp12dTd8Dk1SVbRhV2vw%3D&reserved=0<https://github.com/libjxl/libjxl>>.

> Considering that QGIS now uses GDAL 3.7, I was wondering if there was any plan  > to include it with the libjxl library in the future.



Hi Jean-Fran?ois,

if you are using Windows OS and GDAL provided by OSGeo4W, have you tried to update GDAL to the latest GDAL 3.7.0-2 package which was build against libjxl?



See

https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fjef-n%2FOSGeo4W%2Fcommit%2Fc54d56a15918c4ed63afa5b776e6a5041f26f38d&data=05%7C01%7Cjean-francois.bourdon%40mrnf.gouv.qc.ca%7C7dcc9c8dab714597540708db6f1c4c4f%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C638225939553466428%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=lN536%2Ff2rKl9LyQgarjJ0WCUh27Gp%2B8simxiuwPt7ec%3D&reserved=0<https://github.com/jef-n/OSGeo4W/commit/c54d56a15918c4ed63afa5b776e6a5041f26f38d>



Best regards.



Andrea Giudiceandrea

_______________________________________________

QGIS-Developer mailing list

QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>

List info: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=05%7C01%7Cjean-francois.bourdon%40mrnf.gouv.qc.ca%7C7dcc9c8dab714597540708db6f1c4c4f%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C638225939553466428%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=NpFc2cVDNnYb%2B2jOQ6HEFg920i9%2FI11sGo6jeUbmAfM%3D&reserved=0<https://lists.osgeo.org/mailman/listinfo/qgis-developer>

Unsubscribe: https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=05%7C01%7Cjean-francois.bourdon%40mrnf.gouv.qc.ca%7C7dcc9c8dab714597540708db6f1c4c4f%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C638225939553466428%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=NpFc2cVDNnYb%2B2jOQ6HEFg920i9%2FI11sGo6jeUbmAfM%3D&reserved=0<https://lists.osgeo.org/mailman/listinfo/qgis-developer>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/aea878c7/attachment-0001.htm>

From jef at norbit.de  Mon Jun 19 07:44:51 2023
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Mon, 19 Jun 2023 16:44:51 +0200
Subject: [QGIS-Developer] Planned support for JPEG XL?
In-Reply-To: <QB1PR01MB29489F40857C6F2412737266B95FA@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
References: <9f1dbd5d-b408-bd16-e791-97aa303dfe54@libero.it>
 <QB1PR01MB29489F40857C6F2412737266B95FA@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <20230619144451.ncn4molqqbdslwmd@norbit.de>

Hi Jean-Fran?ois,

On Mon, 19. Jun 2023 at 12:33:57 +0000, Bourdon, Jean-Fran?ois (DIF) via QGIS-Developer wrote:
> I haven't as it wasn't an option when I sent my email, but now that it is,
> I'll do. If I understand the PR correctly, it will only be available with a
> gdal-dev install for now but I suppose that in a couple release it will be
> available with "regular" gdal by OSGeo4W and thus available to all QGIS
> Windows users by default.

No, it's already available.

J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/328cfc63/attachment.sig>

From hghklly at gmail.com  Mon Jun 19 11:30:12 2023
From: hghklly at gmail.com (Hugh Kelley)
Date: Mon, 19 Jun 2023 14:30:12 -0400
Subject: [QGIS-Developer] qgis ubuntu 20.04 dependencies
Message-ID: <CAOrcXHGpMfgjj1G428jA7q0Rc=kNPuVy1dSPB8YBJeZHyrMePw@mail.gmail.com>

Hi all,

while working on compiling qgis on ubuntu using these instructions [0] ,
i've run into an error while running cmake that "QRecursiveMutex" is not
found.

It looks like that became available in QT 5.14.

Ubuntu 20.04 installs QT 5.12. During my searches i've seen comments that
imply 5.15 might not be available for 20.04.  I'm trying to figure out
whether I should be trying to upgrade Qt, if I have to upgrade Ubuntu, or
if there is some option in the compilation process that can resolve this
for me.

I've installed Qt 5.15.2 to /opt/ and added it to PATH, but qtdiag still
indicates i'm using 5.12.x

I thought i'd start by asking here before asking on a Qt general forum in
case there's a qgis specific solution.

I've also set the cmake 3d option to "no" which got me around the absence
of q qt 3d extras pacakge/file.  So maybe there's a similar solution for
this although this version problem seem more essential.

Thanks for any suggestions!




[0] https://github.com/qgis/QGIS/blob/master/INSTALL.md

-- 
Hugh Kelley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/cb9c544e/attachment.htm>

From hghklly at gmail.com  Mon Jun 19 11:33:56 2023
From: hghklly at gmail.com (Hugh Kelley)
Date: Mon, 19 Jun 2023 14:33:56 -0400
Subject: [QGIS-Developer] qgis ubuntu 20.04 dependencies
In-Reply-To: <CAOrcXHGpMfgjj1G428jA7q0Rc=kNPuVy1dSPB8YBJeZHyrMePw@mail.gmail.com>
References: <CAOrcXHGpMfgjj1G428jA7q0Rc=kNPuVy1dSPB8YBJeZHyrMePw@mail.gmail.com>
Message-ID: <CAOrcXHEDEXczq-QaURNDpygcqakSoP5cdHSc8es+Hm-yoJKgdg@mail.gmail.com>

Of course as soon as I hit send I finally noticed that qt >= 5.14 is listed
in the dependencies so that resolves my key question about a workaround.

Disregard unless anyone knows the best way to handle Qt version for 20.04.
I'm planning to ask on the qt forum.

On Mon, Jun 19, 2023 at 2:30?PM Hugh Kelley <hghklly at gmail.com> wrote:

> Hi all,
>
> while working on compiling qgis on ubuntu using these instructions [0] ,
> i've run into an error while running cmake that "QRecursiveMutex" is not
> found.
>
> It looks like that became available in QT 5.14.
>
> Ubuntu 20.04 installs QT 5.12. During my searches i've seen comments that
> imply 5.15 might not be available for 20.04.  I'm trying to figure out
> whether I should be trying to upgrade Qt, if I have to upgrade Ubuntu, or
> if there is some option in the compilation process that can resolve this
> for me.
>
> I've installed Qt 5.15.2 to /opt/ and added it to PATH, but qtdiag still
> indicates i'm using 5.12.x
>
> I thought i'd start by asking here before asking on a Qt general forum in
> case there's a qgis specific solution.
>
> I've also set the cmake 3d option to "no" which got me around the absence
> of q qt 3d extras pacakge/file.  So maybe there's a similar solution for
> this although this version problem seem more essential.
>
> Thanks for any suggestions!
>
>
>
>
> [0] https://github.com/qgis/QGIS/blob/master/INSTALL.md
>
> --
> Hugh Kelley
>
>

-- 
Hugh Kelley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/f52df04c/attachment.htm>

From even.rouault at spatialys.com  Mon Jun 19 11:34:47 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Jun 2023 20:34:47 +0200
Subject: [QGIS-Developer] qgis ubuntu 20.04 dependencies
In-Reply-To: <CAOrcXHGpMfgjj1G428jA7q0Rc=kNPuVy1dSPB8YBJeZHyrMePw@mail.gmail.com>
References: <CAOrcXHGpMfgjj1G428jA7q0Rc=kNPuVy1dSPB8YBJeZHyrMePw@mail.gmail.com>
Message-ID: <685473f1-1405-1db8-146b-8ca1e00edf48@spatialys.com>

Building recent QGIS versions on 20.04 is going to be quite a lot of 
pain since you'll need indeed to have a qt 5.15 build, and all the other 
auxiliary QT based dependencies build against it.

I'd suggest you update to 22.04 at least. Or if you don't want to do 
development but can live with released versions, try conda-forge builds 
(cf https://plugins.qgis.org/planet/tag/conda/)

Le 19/06/2023 ? 20:30, Hugh Kelley via QGIS-Developer a ?crit?:
> Hi all,
>
> while working on compiling qgis on ubuntu using these instructions [0] 
> , i've run into an error while running cmake that "QRecursiveMutex" is 
> not found.
>
> It looks like that became available in QT 5.14.
>
> Ubuntu 20.04 installs QT 5.12. During my searches i've seen comments 
> that imply 5.15 might not be available for 20.04. I'm trying to figure 
> out whether I should be trying to upgrade Qt, if I have to upgrade 
> Ubuntu, or if there is some option in the compilation process that can 
> resolve this for me.
>
> I've installed Qt 5.15.2 to /opt/ and added it to PATH, but qtdiag 
> still indicates i'm using 5.12.x
>
> I thought i'd start by asking here before asking on a Qt general forum 
> in case there's a qgis specific solution.
>
> I've also set the cmake 3d option to "no" which got me around the 
> absence of q qt 3d extras pacakge/file.? So maybe there's a similar 
> solution for this although this version problem seem more essential.
>
> Thanks for any suggestions!
>
>
>
>
> [0] https://github.com/qgis/QGIS/blob/master/INSTALL.md
>
> -- 
> Hugh Kelley
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/f6288b98/attachment.htm>

From hghklly at gmail.com  Mon Jun 19 11:44:13 2023
From: hghklly at gmail.com (Hugh Kelley)
Date: Mon, 19 Jun 2023 14:44:13 -0400
Subject: [QGIS-Developer] qgis ubuntu 20.04 dependencies
In-Reply-To: <685473f1-1405-1db8-146b-8ca1e00edf48@spatialys.com>
References: <CAOrcXHGpMfgjj1G428jA7q0Rc=kNPuVy1dSPB8YBJeZHyrMePw@mail.gmail.com>
 <685473f1-1405-1db8-146b-8ca1e00edf48@spatialys.com>
Message-ID: <CAOrcXHE57UyWvbSitkWz=-fmZBbc7L3eVZZSsfFQygMM3y3FUA@mail.gmail.com>

OK thanks, exactly the general guidance I was looking for. I'll look into
upgrading. Is there currently a version that makes things easiest?



On Mon, Jun 19, 2023 at 2:34?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Building recent QGIS versions on 20.04 is going to be quite a lot of pain
> since you'll need indeed to have a qt 5.15 build, and all the other
> auxiliary QT based dependencies build against it.
>
> I'd suggest you update to 22.04 at least. Or if you don't want to do
> development but can live with released versions, try conda-forge builds (cf
> https://plugins.qgis.org/planet/tag/conda/)
> Le 19/06/2023 ? 20:30, Hugh Kelley via QGIS-Developer a ?crit :
>
> Hi all,
>
> while working on compiling qgis on ubuntu using these instructions [0] ,
> i've run into an error while running cmake that "QRecursiveMutex" is not
> found.
>
> It looks like that became available in QT 5.14.
>
> Ubuntu 20.04 installs QT 5.12. During my searches i've seen comments that
> imply 5.15 might not be available for 20.04.  I'm trying to figure out
> whether I should be trying to upgrade Qt, if I have to upgrade Ubuntu, or
> if there is some option in the compilation process that can resolve this
> for me.
>
> I've installed Qt 5.15.2 to /opt/ and added it to PATH, but qtdiag still
> indicates i'm using 5.12.x
>
> I thought i'd start by asking here before asking on a Qt general forum in
> case there's a qgis specific solution.
>
> I've also set the cmake 3d option to "no" which got me around the absence
> of q qt 3d extras pacakge/file.  So maybe there's a similar solution for
> this although this version problem seem more essential.
>
> Thanks for any suggestions!
>
>
>
>
> [0] https://github.com/qgis/QGIS/blob/master/INSTALL.md
>
> --
> Hugh Kelley
>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Hugh Kelley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/b6bed6bd/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Jun 19 11:48:22 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Jun 2023 20:48:22 +0200
Subject: [QGIS-Developer] qgis ubuntu 20.04 dependencies
In-Reply-To: <CAOrcXHE57UyWvbSitkWz=-fmZBbc7L3eVZZSsfFQygMM3y3FUA@mail.gmail.com>
References: <CAOrcXHGpMfgjj1G428jA7q0Rc=kNPuVy1dSPB8YBJeZHyrMePw@mail.gmail.com>
 <685473f1-1405-1db8-146b-8ca1e00edf48@spatialys.com>
 <CAOrcXHE57UyWvbSitkWz=-fmZBbc7L3eVZZSsfFQygMM3y3FUA@mail.gmail.com>
Message-ID: <455fd260-24e2-19e7-b247-cb8f196b7053@spatialys.com>


Le 19/06/2023 ? 20:44, Hugh Kelley a ?crit?:
> OK thanks, exactly the general guidance I was looking for. I'll look 
> into upgrading. Is there currently a version that makes things easiest?


QGIS continuous integration uses:

- ubuntu 22.04 for QT5 builds: 
https://github.com/qgis/QGIS/blob/master/.docker/qgis3-qt5-build-deps.dockerfile

- Fedora 38 for QG6 builds: 
https://github.com/qgis/QGIS/blob/master/.docker/qgis3-qt6-build-deps.dockerfile

>
>
>
> On Mon, Jun 19, 2023 at 2:34?PM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Building recent QGIS versions on 20.04 is going to be quite a lot
>     of pain since you'll need indeed to have a qt 5.15 build, and all
>     the other auxiliary QT based dependencies build against it.
>
>     I'd suggest you update to 22.04 at least. Or if you don't want to
>     do development but can live with released versions, try
>     conda-forge builds (cf https://plugins.qgis.org/planet/tag/conda/)
>
>     Le 19/06/2023 ? 20:30, Hugh Kelley via QGIS-Developer a ?crit?:
>>     Hi all,
>>
>>     while working on compiling qgis on ubuntu using these
>>     instructions [0] , i've run into an error while running cmake
>>     that "QRecursiveMutex" is not found.
>>
>>     It looks like that became available in QT 5.14.
>>
>>     Ubuntu 20.04 installs QT 5.12. During my searches i've seen
>>     comments that imply 5.15 might not be available for 20.04.? I'm
>>     trying to figure out whether I should be trying to upgrade Qt, if
>>     I have to upgrade Ubuntu, or if there is some option in the
>>     compilation process that can resolve this for me.
>>
>>     I've installed Qt 5.15.2 to /opt/ and added it to PATH, but
>>     qtdiag still indicates i'm using 5.12.x
>>
>>     I thought i'd start by asking here before asking on a Qt general
>>     forum in case there's a qgis specific solution.
>>
>>     I've also set the cmake 3d option to "no" which got me around the
>>     absence of q qt 3d extras pacakge/file. So maybe there's a
>>     similar solution for this although this version problem seem more
>>     essential.
>>
>>     Thanks for any suggestions!
>>
>>
>>
>>
>>     [0] https://github.com/qgis/QGIS/blob/master/INSTALL.md
>>
>>     -- 
>>     Hugh Kelley
>>
>>
>>     _______________________________________________
>>     QGIS-Developer mailing list
>>     QGIS-Developer at lists.osgeo.org
>>     List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
>
>
> -- 
> Hugh Kelley
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230619/7b69d9a6/attachment.htm>

From gab74 at libero.it  Mon Jun 19 23:58:57 2023
From: gab74 at libero.it (Gabriele Ascolese)
Date: Tue, 20 Jun 2023 08:58:57 +0200 (CEST)
Subject: [QGIS-Developer] Cannot convert Topocentric to Geocentric
Message-ID: <62080239.288187.1687244337681@mail1.libero.it>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230620/34ef7135/attachment.htm>

From broniewski at a-a.lu  Tue Jun 20 03:59:50 2023
From: broniewski at a-a.lu (Frank Broniewski)
Date: Tue, 20 Jun 2023 10:59:50 +0000
Subject: [QGIS-Developer] PyQGIS zoom to layer not working
Message-ID: <HE1PR0501MB2522E7A6D0C0532FBEAAB958FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>

Hi,
I am writing a plugin, in which I am loading a bunch of layers, and I want to zoom on one of them. Layers are loaded through an action (click).

def load_layer(self):

        self.project.addMapLayers(
            [
                self.addresses_layer.layer,
                self.adminunits_layer.layer,
                self.georecord_layer,
            ],
            addToLegend=False,
        )
        self.project.addMapLayers(
            [
                self.geolocation_point_layer.layer,
                self.geolocation_line_layer.layer,
                self.geolocation_poly_layer.layer,
                self.ortho_layer
            ]
        )
        self.iface.mapCanvas().setExtent(self.georecord_layer.layer.extent())
        self.iface.mapCanvas().refresh()

but unfortunately, that does not work as expected. QGIS zooms just on the ortho_layer in the end. I have the suspicion, that the extent I set, gets overwritten by another layer that loads in in a later stage. Layers are from a PostGIS, and the ortho_layer is a WMS layer.

I tried googleing, mapCanvas().waitWhileRendering() and whatnot, it just will not zoom. I am completely clueless now, so any hints are greatly appreciated.

This is on OSGeo4W, QGIS 3.28 and Python , for explanation, the .layer attribute is the actual QGIS layer ?

Many thanks,
Frank
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230620/3e735e5b/attachment-0001.htm>

From rdmailings at duif.net  Tue Jun 20 04:36:49 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 20 Jun 2023 13:36:49 +0200
Subject: [QGIS-Developer] PyQGIS zoom to layer not working
In-Reply-To: <HE1PR0501MB2522E7A6D0C0532FBEAAB958FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>
References: <HE1PR0501MB2522E7A6D0C0532FBEAAB958FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>
Message-ID: <3b49991b-bfce-03ab-9fb1-c20adeacf53d@duif.net>

Hi Frank,

It really depends on:
- what is the crs of your project
- what is the crs of your layer
- if they match, it should work
- if they do not match you have to reproject the layer extent to the crs of the mapcanvas

I think the python console will be helpfull here.

While loaded, does the plugin have a handle to the actual QGIS layer?
If so, say it is called 'self.georecord_layer.layer' in the plugin.

Then you can do (in the console):

# first find out the name of your plugin
qgis.utils.plugins
# will show you all loaded layers AND there key/name
# say your plugins name is 'franks_plugin'
# then
plugin = qgis.utils.plugins['franks_plugin']
# will give you a handle (in the console) to your plugin
# then
plugin.georecord_layer.layer.extent should give you an extent... eg:
<QgsRectangle: 103890.796875 492342.34375, 104287.453125 492643.46875>
# NOTE that this is in the layers crs !
# you can also use (making the right layer active in legend):
iface.activeLayer().extent()
# you can also look at the extent of the mapcanvas from the console:
iface.mapCanvas().extent()

(you can off course also use logging see the extent somewhere)

Can you show us both the canvas and the layer extent?

Regards,

Richard Duivenvoorde

On 6/20/23 12:59, Frank Broniewski via QGIS-Developer wrote:
> Hi,
> 
> I am writing a plugin, in which I am loading a bunch of layers, and I want to zoom on one of them. Layers are loaded through an action (click).
> 
> def load_layer(self):
> 
>  ??????? self.project.addMapLayers(
> 
>  ??????????? [
> 
>  ??????????????? self.addresses_layer.layer,
> 
>  ??????????????? self.adminunits_layer.layer,
> 
>  ??????????????? self.georecord_layer,
> 
>  ??????????? ],
> 
>  ??????????? addToLegend=False,
> 
>  ??????? )
> 
>  ??????? self.project.addMapLayers(
> 
>  ??????????? [
> 
>  ??????????????? self.geolocation_point_layer.layer,
> 
>  ??????????????? self.geolocation_line_layer.layer,
> 
>  ??????????????? self.geolocation_poly_layer.layer,
> 
>  ??????????????? self.ortho_layer
> 
>  ??????????? ]
> 
>  ??????? )
> 
>  ??????? self.iface.mapCanvas().setExtent(self.georecord_layer.layer.extent())
> 
>  ??????? self.iface.mapCanvas().refresh()
> 
> but unfortunately, that does not work as expected. QGIS zooms just on the ortho_layer in the end. I have the suspicion, that the extent I set, gets overwritten by another layer that loads in in a later stage. Layers are from a PostGIS, and the ortho_layer is a WMS layer.
> 
> I tried googleing, mapCanvas().waitWhileRendering() and whatnot, it just will not zoom. I am completely clueless now, so any hints are greatly appreciated.
> 
> This is on OSGeo4W, QGIS 3.28 and Python , for explanation, the .layer attribute is the actual QGIS layer ?
> 
> Many thanks,
> 
> Frank
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From lorenzetti at gis3w.it  Tue Jun 20 05:00:56 2023
From: lorenzetti at gis3w.it (Walter Lorenzetti)
Date: Tue, 20 Jun 2023 14:00:56 +0200
Subject: [QGIS-Developer] GeoFerver canno't read QGIS server WFS Services
In-Reply-To: <7bc102cf-e636-0f3c-b6c0-c3b1aaf9cf02@gis3w.it>
References: <8e77c290-9600-5c17-5b47-02d52dd1f67c@gis3w.it>
 <ea9005ef-10bb-7a2f-af25-7fe8a7304b18@gmail.com>
 <9600c423-b375-f550-6579-26bbf19c7e77@gis3w.it>
 <980e53c6-ed8e-2b49-1d45-a6c926869ab6@gmail.com>
 <7bc102cf-e636-0f3c-b6c0-c3b1aaf9cf02@gis3w.it>
Message-ID: <3071ae7c-be25-90d6-5f68-869dcf7f119b@gis3w.it>

Hi Ren?-Luc any idea about it?

W

Il 05/06/23 15:48, Walter Lorenzetti via QGIS-Developer ha scritto:
>
> Ren?-Luc there it is:
>
> <schema targetNamespace="http://www.qgis.org/gml"
> ??? xmlns:ogc="http://www.opengis.net/ogc"
> ??? xmlns:gml="http://www.opengis.net/gml" version="1.0"
> ??? xmlns:xsd="http://www.w3.org/2001/XMLSchema"
> ??? xmlns="http://www.w3.org/2001/XMLSchema" 
> elementFormDefault="qualified"
> ??? xmlns:qgs="http://www.qgis.org/gml">
> ??? <import 
> schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" 
> namespace="http://www.opengis.net/gml"/>
> ??? <element name="Particelle_terreni_e_fabbricati" 
> substitutionGroup="gml:_Feature" 
> type="qgs:Particelle_terreni_e_fabbricatiType"/>
> ??? <complexType name="Particelle_terreni_e_fabbricatiType">
> ??????? <complexContent>
> ??????????? <extension base="gml:AbstractFeatureType">
> ??????????????? <sequence>
> ??????????????????? <element name="geometry" 
> type="gml:PolygonPropertyType" maxOccurs="1" minOccurs="0"/>
> ??????????????????? <element name="gid" type="int"/>
> ??????????????????? <element name="tipo" type="string" nillable="true"/>
> ??????????????????? <element name="foglio" type="int" nillable="true"/>
> ??????????????????? <element name="numero" type="string" nillable="true"/>
> ??????????????????? <element name="sezione" type="string" 
> nillable="true"/>
> ??????????????????? <element name="allegato" type="string" 
> nillable="true"/>
> ??????????????????? <element name="codice_comune" type="string"/>
> ??????????????????? <element name="nomefile" type="string" 
> nillable="true"/>
> ??????????????????? <element name="task_id" type="string" 
> nillable="true"/>
> ??????????????? </sequence>
> ??????????? </extension>
> ??????? </complexContent>
> ??? </complexType>
> </schema>
>
> Il 05/06/23 09:59, Ren?-Luc Dhont ha scritto:
>> Hi Walter,
>>
>> The issue concerns Particelle_terreni_e_fabbricati layer.
>> Can you check the DescribeFeatureType for this layer: 
>> Particelle_terreni_e_fabbricati ?
>>
>> Regards,
>> Ren?-Luc
>>
>> Le 05/06/2023 ? 09:26, Walter Lorenzetti a ?crit?:
>>>
>>> Hi Ren?-Luc,
>>>
>>> yes it fail on DescribeFeatureType.
>>>
>>> This is the repsonse of QGIS 3.28.7:
>>>
>>> <schema xmlns:gml="http://www.opengis.net/gml" 
>>> targetNamespace="http://www.qgis.org/gml" 
>>> xmlns="http://www.w3.org/2001/XMLSchema" 
>>> xmlns:xsd="http://www.w3.org/2001/XMLSchema" version="1.0" 
>>> xmlns:qgs="http://www.qgis.org/gml" 
>>> xmlns:ogc="http://www.opengis.net/ogc" elementFormDefault="qualified">
>>> ?<import 
>>> schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" 
>>> namespace="http://www.opengis.net/gml"/>
>>> ?<element name="buildings" substitutionGroup="gml:_Feature" 
>>> type="qgs:buildingsType"/>
>>> ?<complexType name="buildingsType">
>>> ? <complexContent>
>>> ?? <extension base="gml:AbstractFeatureType">
>>> ??? <sequence>
>>> ???? <element maxOccurs="1" name="geometry" minOccurs="0" 
>>> type="gml:MultiSurfacePropertyType"/>
>>> ???? <element name="fid" alias="ID" type="long"/>
>>> ???? <element name="name" alias="Name" type="string"/>
>>> ???? <element name="address" alias="Address" type="string" 
>>> nillable="true"/>
>>> ???? <element name="year" alias="Year of construction" type="long"/>
>>> ???? <element name="photo" alias="Photo" type="string" nillable="true"/>
>>> ???? <element name="link" alias="Link" type="string" nillable="true"/>
>>> ???? <element name="form" alias="Form" type="string" nillable="true"/>
>>> ???? <element name="high" alias="High" type="long"/>
>>> ???? <element name="volume" alias="Volume" type="long" nillable="true"/>
>>> ???? <element name="surface" alias="Surface (based on QGIS 
>>> expression)" type="decimal" nillable="true"/>
>>> ???? <element name="architectural_barriers" alias="Architectural 
>>> barriers" type="string" nillable="true"/>
>>> ???? <element name="date_barriers" alias="Date" type="date" 
>>> nillable="true"/>
>>> ???? <element name="safety_exits" alias="Safety exits" type="string" 
>>> nillable="true"/>
>>> ???? <element name="date_exits" alias="Date" type="date" 
>>> nillable="true"/>
>>> ???? <element name="fire_system" alias="Fire system" type="string" 
>>> nillable="true"/>
>>> ???? <element name="date_fire" alias="Date" type="date" 
>>> nillable="true"/>
>>> ???? <element name="type" alias="Type" type="string"/>
>>> ???? <element name="zone" alias="Zone (based on QGIS expression)" 
>>> type="string" nillable="true"/>
>>> ???? <element name="attachment" alias="Documents to be attached" 
>>> type="long" nillable="true"/>
>>> ???? <element name="subtype" alias="Subtype - Dependent on the value 
>>> of Type" type="string" nillable="true"/>
>>> ???? <element name="user" alias="User last modification" 
>>> type="string" nillable="true"/>
>>> ???? <element name="description" alias="Description" type="string" 
>>> nillable="true"/>
>>> ??? </sequence>
>>> ?? </extension>
>>> ? </complexContent>
>>> ?</complexType>
>>> </schema>
>>>
>>> and following a DescribeFeatureType response which does not fail on 
>>> geoservers from a Italy government? service:
>>>
>>> http://wms.pcn.minambiente.it/ogc?map=/ms_ogc/wfs/Alluvioni_Estensione.map&TYPENAME=ITH2018_Estensione_LPH&REQUEST=DescribeFeatureType&VERSION=1.1.0&SERVICE=WFS
>>>
>>> <?xml version='1.0' encoding="ISO-8859-1" ?>
>>> <schema
>>> ?? targetNamespace="http://mapserver.gis.umn.edu/mapserver"
>>> ?? xmlns:ms="http://mapserver.gis.umn.edu/mapserver"
>>> ?? xmlns:ogc="http://www.opengis.net/ogc"
>>> ?? xmlns:xsd="http://www.w3.org/2001/XMLSchema"
>>> ?? xmlns="http://www.w3.org/2001/XMLSchema"
>>> ?? xmlns:gml="http://www.opengis.net/gml"
>>> ?? elementFormDefault="qualified" version="0.1" >
>>>
>>> ? <import namespace="http://www.opengis.net/gml"
>>> ????????? 
>>> schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" />
>>>
>>> ? <element name="ITH2018_Estensione_LPH"
>>> ?????????? type="ms:ITH2018_Estensione_LPHType"
>>> ?????????? substitutionGroup="gml:_Feature" />
>>>
>>> ? <complexType name="ITH2018_Estensione_LPHType">
>>> ??? <complexContent>
>>> ????? <extension base="gml:AbstractFeatureType">
>>> ??????? <sequence>
>>> ????????? <element name="boundary" type="gml:SurfacePropertyType" 
>>> minOccurs="0" maxOccurs="unbounded"/>
>>> ????????? <element name="id" type="string"/>
>>> ????????? <element name="rbdname" type="string"/>
>>> ????????? <element name="uomcode" type="string"/>
>>> ????????? <element name="apsfrcode" type="string"/>
>>> ????????? <element name="category" type="string"/>
>>> ????????? <element name="eu_cd_hp" type="string"/>
>>> ????????? <element name="source" type="string"/>
>>> ????????? <element name="character" type="string"/>
>>> ????????? <element name="mechanism" type="string"/>
>>> ????????? <element name="frequency" type="string"/>
>>> ????????? <element name="namespace" type="string"/>
>>> ????????? <element name="beginlife" type="string"/>
>>> ????????? <element name="detmetod" type="string"/>
>>> ??????? </sequence>
>>> ????? </extension>
>>> ??? </complexContent>
>>> ? </complexType>
>>>
>>> </schema>
>>>
>>>
>>> I can't see a substantial difference :(
>>>
>>> W
>>>
>>> Il 31/05/23 15:28, Ren?-Luc Dhont via QGIS-Developer ha scritto:
>>>> Hi Walter,
>>>>
>>>> You have to check the result of DescribeFeatureType WFS Request.
>>>> This request has to provide the XSD to validate the GML.
>>>>
>>>> Regards,
>>>> Ren?-Luc
>>>>
>>>> Le 31/05/2023 ? 14:59, Walter Lorenzetti via QGIS-Developer a ?crit?:
>>>>>
>>>>> Hi,
>>>>>
>>>>> when I try to add a WFS service layer to a GeoServer instance I 
>>>>> get an exception like this:
>>>>>
>>>>> ```
>>>>>
>>>>> ...
>>>>>
>>>>> Caused by: java.lang.RuntimeException: 
>>>>> org.geotools.data.DataSourceException: No XSDElementDeclaration 
>>>>> found for {http://www.opengis.net/wfs}Particelle_terreni_e_fabbricati
>>>>> ?? ?at 
>>>>> org.geotools.data.store.ContentFeatureSource.getAbsoluteSchema(ContentFeatureSource.java:329)
>>>>> ?? ?at 
>>>>> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:296)
>>>>> ?? ?at 
>>>>> org.geotools.data.store.ContentFeatureSource.getSchema(ContentFeatureSource.java:105)
>>>>> ?? ?at 
>>>>> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:342)
>>>>> ?? ?at 
>>>>> org.geoserver.catalog.CatalogBuilder.buildFeatureType(CatalogBuilder.java:325)
>>>>> ?? ?at 
>>>>> org.geoserver.web.data.layer.NewLayerPage.buildLayerInfo(NewLayerPage.java:409)
>>>>>
>>>>> ...
>>>>>
>>>>> ```
>>>>>
>>>>> Any idea about this issue? It seams a XML error validation..
>>>>>
>>>>> Thanks in advance.
>>>>>
>>>>> W
>>>>>
>>>>>
>>>>> -- 
>>>>>
>>>>> Walter Lorenzetti phD
>>>>> email: lorenzetti at gis3w.it
>>>>> site: gis3w.it <https://gis3w.it>
>>>>> twitter: w_lorenzetti
>>>>> Tel/Cell: (+39) 347-6597931
>>>>> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> -- 
>>>
>>> Walter Lorenzetti phD
>>> email: lorenzetti at gis3w.it
>>> site: gis3w.it <https://gis3w.it>
>>> twitter: w_lorenzetti
>>> Tel/Cell: (+39) 347-6597931
>>> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>>>
>>
> -- 
>
> Walter Lorenzetti phD
> email: lorenzetti at gis3w.it
> site: gis3w.it <https://gis3w.it>
> twitter: w_lorenzetti
> Tel/Cell: (+39) 347-6597931
> Viale Verdi 24 - 51016 Montecatini Terme (PT)
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-- 

Walter Lorenzetti phD
email: lorenzetti at gis3w.it
site: gis3w.it <https://gis3w.it>
twitter: w_lorenzetti
Tel/Cell: (+39) 347-6597931
Viale Verdi 24 - 51016 Montecatini Terme (PT)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230620/80ef594e/attachment-0001.htm>

From broniewski at a-a.lu  Tue Jun 20 05:56:33 2023
From: broniewski at a-a.lu (Frank Broniewski)
Date: Tue, 20 Jun 2023 12:56:33 +0000
Subject: [QGIS-Developer] PyQGIS zoom to layer not working
In-Reply-To: <3b49991b-bfce-03ab-9fb1-c20adeacf53d@duif.net>
References: <HE1PR0501MB2522E7A6D0C0532FBEAAB958FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>
 <3b49991b-bfce-03ab-9fb1-c20adeacf53d@duif.net>
Message-ID: <HE1PR0501MB252218232C9D6884ADC8F931FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>

Hi Richard,

thank you for your response, you may have already given me a good hint. QGIS is started from another app with an empty/no project, and the default CRS is in effect (WGS84 here). My layers are in epsg:2169 (Luxembourg), so I definitely need to correct this. Since all layers are in 2169, I could set the project's CRS in the plugin ...
But here are the extents, grabbed from the console

georecord_layer extent:
<QgsRectangle: 79099.45521477346483152 74612.53163364417559933, 79127.02656594294239767 74638.46575664929696359>

mapCanvas extent:
<QgsRectangle: -15656.28378378378693014 53925, 170656.28378378378693014 141075>

When I run setExtent in the console, it works ...
iface.mapCanvas().setExtent(plugin.georecord_layer.layer.extent())

I did set the QGIS default CRS to 2169 in the options, but this did not help unfortunately.

Many thanks,
Frank


-----Urspr?ngliche Nachricht-----
Von: Richard Duivenvoorde <rdmailings at duif.net> 
Gesendet: Dienstag, 20. Juni 2023 13:37
An: Frank Broniewski <broniewski at a-a.lu>; qgis-developer at lists.osgeo.org
Betreff: Re: [QGIS-Developer] PyQGIS zoom to layer not working

Hi Frank,

It really depends on:
- what is the crs of your project
- what is the crs of your layer
- if they match, it should work
- if they do not match you have to reproject the layer extent to the crs of the mapcanvas

I think the python console will be helpfull here.

While loaded, does the plugin have a handle to the actual QGIS layer?
If so, say it is called 'self.georecord_layer.layer' in the plugin.

Then you can do (in the console):

# first find out the name of your plugin qgis.utils.plugins # will show you all loaded layers AND there key/name # say your plugins name is 'franks_plugin'
# then
plugin = qgis.utils.plugins['franks_plugin']
# will give you a handle (in the console) to your plugin # then plugin.georecord_layer.layer.extent should give you an extent... eg:
<QgsRectangle: 103890.796875 492342.34375, 104287.453125 492643.46875> # NOTE that this is in the layers crs !
# you can also use (making the right layer active in legend):
iface.activeLayer().extent()
# you can also look at the extent of the mapcanvas from the console:
iface.mapCanvas().extent()

(you can off course also use logging see the extent somewhere)

Can you show us both the canvas and the layer extent?

Regards,

Richard Duivenvoorde

On 6/20/23 12:59, Frank Broniewski via QGIS-Developer wrote:
> Hi,
> 
> I am writing a plugin, in which I am loading a bunch of layers, and I want to zoom on one of them. Layers are loaded through an action (click).
> 
> def load_layer(self):
> 
>  ??????? self.project.addMapLayers(
> 
>  ??????????? [
> 
>  ??????????????? self.addresses_layer.layer,
> 
>  ??????????????? self.adminunits_layer.layer,
> 
>  ??????????????? self.georecord_layer,
> 
>  ??????????? ],
> 
>  ??????????? addToLegend=False,
> 
>  ??????? )
> 
>  ??????? self.project.addMapLayers(
> 
>  ??????????? [
> 
>  ??????????????? self.geolocation_point_layer.layer,
> 
>  ??????????????? self.geolocation_line_layer.layer,
> 
>  ??????????????? self.geolocation_poly_layer.layer,
> 
>  ??????????????? self.ortho_layer
> 
>  ??????????? ]
> 
>  ??????? )
> 
>  ??????? 
> self.iface.mapCanvas().setExtent(self.georecord_layer.layer.extent())
> 
>  ??????? self.iface.mapCanvas().refresh()
> 
> but unfortunately, that does not work as expected. QGIS zooms just on the ortho_layer in the end. I have the suspicion, that the extent I set, gets overwritten by another layer that loads in in a later stage. Layers are from a PostGIS, and the ortho_layer is a WMS layer.
> 
> I tried googleing, mapCanvas().waitWhileRendering() and whatnot, it just will not zoom. I am completely clueless now, so any hints are greatly appreciated.
> 
> This is on OSGeo4W, QGIS 3.28 and Python , for explanation, the .layer 
> attribute is the actual QGIS layer ?
> 
> Many thanks,
> 
> Frank
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From rdmailings at duif.net  Tue Jun 20 06:32:52 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 20 Jun 2023 15:32:52 +0200
Subject: [QGIS-Developer] PyQGIS zoom to layer not working
In-Reply-To: <HE1PR0501MB252218232C9D6884ADC8F931FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>
References: <HE1PR0501MB2522E7A6D0C0532FBEAAB958FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>
 <3b49991b-bfce-03ab-9fb1-c20adeacf53d@duif.net>
 <HE1PR0501MB252218232C9D6884ADC8F931FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>
Message-ID: <b2090bb6-02e7-3a35-b58f-848164f50048@duif.net>

On 6/20/23 14:56, Frank Broniewski wrote:
> I did set the QGIS default CRS to 2169 in the options, but this did not help unfortunately.

Mmm, that should work:

Settings / CRS and Transforms/ CRS for projects / Use a default CRS
AND I would maybe also set the CRS for layer to epsg:2169

Another option is to create a 'Default Project' (empty, BUT crs set to epsg:2169)
Settings / General / Set Current Project As Default
and
Checkbox 'Create new project from default project'

fiddling with those I'm pretty sure it should be possible to start QGIS in the right crs..

Suc6

Richard Duivenvoorde

From phidrho at gmail.com  Tue Jun 20 07:18:45 2023
From: phidrho at gmail.com (=?UTF-8?Q?Vedran_Stojnovi=C4=87?=)
Date: Tue, 20 Jun 2023 16:18:45 +0200
Subject: [QGIS-Developer] How to enable debugging mode on QGIS start in Win11
Message-ID: <CAL9iSMHywZthC508-5GMBZ44Qi0a+khNtCG_AgrrDy5kcbXALw@mail.gmail.com>

Hi,

I just installed QGIS 3.30.3 via web installer ("qgis-full" version) and
QGIS won't start at all, nor does throw any error when I start it from
PowerShell by executing "qgis-bin.exe".
I tried reinstalling a few times using different servers (default one and
norbit.de) and I also cleaned the cache folder before changing the server.

I already tried adding these two lines to "qgis-bin.env" and I
created "qgislog.txt" on the desktop, but I still do not get any output to
the command line and txt file is empty after trying to start qgis:
QGIS_DEBUG=9
QGIS_LOG_FILE=C:\Users\phidr\Desktop\qgislog.txt

so the current contents of "qgis-bin.env" is:
PATH=C:\OSGeo4W\apps\qgis\bin;C:\OSGeo4W\apps\grass\grass82\lib;C:\OSGeo4W\apps\grass\grass82\bin;C:\OSGeo4W\apps\qt5\bin;C:\OSGeo4W\apps\Python39\Scripts;C:\OSGeo4W\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\system32\WBem
GDAL_DATA=C:\OSGeo4W\apps\gdal\share\gdal
GDAL_DRIVER_PATH=C:\OSGeo4W\apps\gdal\lib\gdalplugins
GDAL_FILENAME_IS_UTF8=YES
PDAL_DRIVER_PATH=C:\OSGeo4W\apps\pdal\plugins
GISBASE=C:\OSGeo4W\apps\grass\grass82
GRASS_PROJSHARE=C:\OSGeo4W\share\proj
GRASS_PYTHON=C:\OSGeo4W\bin\python3.exe
OSGEO4W_ROOT=C:\OSGeo4W
PROJ_LIB=C:\OSGeo4W\share\proj
PYTHONHOME=C:\OSGeo4W\apps\Python39
PYTHONPATH=C:\OSGeo4W\apps\grass\grass82\etc\python;
PYTHONUTF8=1
QGIS_PREFIX_PATH=C:/OSGeo4W/apps/qgis
QT_PLUGIN_PATH=C:\OSGeo4W\apps\qgis\qtplugins;C:\OSGeo4W\apps\qt5\plugins
VSI_CACHE=TRUE
VSI_CACHE_SIZE=1000000
O4W_QT_PREFIX=C:/OSGeo4W/apps/Qt5
O4W_QT_BINARIES=C:/OSGeo4W/apps/Qt5/bin
O4W_QT_PLUGINS=C:/OSGeo4W/apps/Qt5/plugins
O4W_QT_LIBRARIES=C:/OSGeo4W/apps/Qt5/lib
O4W_QT_TRANSLATIONS=C:/OSGeo4W/apps/Qt5/translations
O4W_QT_HEADERS=C:/OSGeo4W/apps/Qt5/include
QGIS_WIN_APP_NAME=OSGeo4W\QGIS Desktop 3.30.3
SSL_CERT_DIR=C:\OSGeo4W\apps\openssl\certs
SSL_CERT_FILE=C:\OSGeo4W\bin\curl-ca-bundle.crt
QGIS_DEBUG=9
QGIS_LOG_FILE=C:\Users\phidr\Desktop\qgislog.txt

-- 
Kind regards,
Vedran Stojnovi?.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230620/ae249e19/attachment.htm>

From apasotti at gmail.com  Tue Jun 20 07:38:57 2023
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 20 Jun 2023 16:38:57 +0200
Subject: [QGIS-Developer] How to enable debugging mode on QGIS start in
 Win11
In-Reply-To: <CAL9iSMHywZthC508-5GMBZ44Qi0a+khNtCG_AgrrDy5kcbXALw@mail.gmail.com>
References: <CAL9iSMHywZthC508-5GMBZ44Qi0a+khNtCG_AgrrDy5kcbXALw@mail.gmail.com>
Message-ID: <CAL5Q672n6XdwqdHNP=xtsU8MgNzTmbcqpfzhzZWYM065nC1jBA@mail.gmail.com>

QGIS_DEBUG=X has no effect if QGIS was not built in debug mode.


On Tue, Jun 20, 2023 at 4:18?PM Vedran Stojnovi? via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> Hi,
>
> I just installed QGIS 3.30.3 via web installer ("qgis-full" version) and QGIS won't start at all, nor does throw any error when I start it from PowerShell by executing "qgis-bin.exe".
> I tried reinstalling a few times using different servers (default one and norbit.de) and I also cleaned the cache folder before changing the server.
>
> I already tried adding these two lines to "qgis-bin.env" and I created "qgislog.txt" on the desktop, but I still do not get any output to the command line and txt file is empty after trying to start qgis:
> QGIS_DEBUG=9
> QGIS_LOG_FILE=C:\Users\phidr\Desktop\qgislog.txt
>
> so the current contents of "qgis-bin.env" is:
> PATH=C:\OSGeo4W\apps\qgis\bin;C:\OSGeo4W\apps\grass\grass82\lib;C:\OSGeo4W\apps\grass\grass82\bin;C:\OSGeo4W\apps\qt5\bin;C:\OSGeo4W\apps\Python39\Scripts;C:\OSGeo4W\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\system32\WBem
> GDAL_DATA=C:\OSGeo4W\apps\gdal\share\gdal
> GDAL_DRIVER_PATH=C:\OSGeo4W\apps\gdal\lib\gdalplugins
> GDAL_FILENAME_IS_UTF8=YES
> PDAL_DRIVER_PATH=C:\OSGeo4W\apps\pdal\plugins
> GISBASE=C:\OSGeo4W\apps\grass\grass82
> GRASS_PROJSHARE=C:\OSGeo4W\share\proj
> GRASS_PYTHON=C:\OSGeo4W\bin\python3.exe
> OSGEO4W_ROOT=C:\OSGeo4W
> PROJ_LIB=C:\OSGeo4W\share\proj
> PYTHONHOME=C:\OSGeo4W\apps\Python39
> PYTHONPATH=C:\OSGeo4W\apps\grass\grass82\etc\python;
> PYTHONUTF8=1
> QGIS_PREFIX_PATH=C:/OSGeo4W/apps/qgis
> QT_PLUGIN_PATH=C:\OSGeo4W\apps\qgis\qtplugins;C:\OSGeo4W\apps\qt5\plugins
> VSI_CACHE=TRUE
> VSI_CACHE_SIZE=1000000
> O4W_QT_PREFIX=C:/OSGeo4W/apps/Qt5
> O4W_QT_BINARIES=C:/OSGeo4W/apps/Qt5/bin
> O4W_QT_PLUGINS=C:/OSGeo4W/apps/Qt5/plugins
> O4W_QT_LIBRARIES=C:/OSGeo4W/apps/Qt5/lib
> O4W_QT_TRANSLATIONS=C:/OSGeo4W/apps/Qt5/translations
> O4W_QT_HEADERS=C:/OSGeo4W/apps/Qt5/include
> QGIS_WIN_APP_NAME=OSGeo4W\QGIS Desktop 3.30.3
> SSL_CERT_DIR=C:\OSGeo4W\apps\openssl\certs
> SSL_CERT_FILE=C:\OSGeo4W\bin\curl-ca-bundle.crt
> QGIS_DEBUG=9
> QGIS_LOG_FILE=C:\Users\phidr\Desktop\qgislog.txt
>
> --
> Kind regards,
> Vedran Stojnovi?.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Tue Jun 20 07:57:12 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 20 Jun 2023 16:57:12 +0200
Subject: [QGIS-Developer] How to enable debugging mode on QGIS start in
 Win11
In-Reply-To: <CAL5Q672n6XdwqdHNP=xtsU8MgNzTmbcqpfzhzZWYM065nC1jBA@mail.gmail.com>
References: <CAL9iSMHywZthC508-5GMBZ44Qi0a+khNtCG_AgrrDy5kcbXALw@mail.gmail.com>
 <CAL5Q672n6XdwqdHNP=xtsU8MgNzTmbcqpfzhzZWYM065nC1jBA@mail.gmail.com>
Message-ID: <1d64e974-c719-d1ef-1d87-7eafefcd1dae@duif.net>

In windows/osgeo4w the 'nightly builds' (with -dev- in there package names) are build in DEBUG mode if I am correct...

so these should show you logging info, but I think you also need to install a tool to SEE that logging. I know there was some utility for it. Not sure if you can see it in the Event Log of WIndows...
Juergen posted some answers in the old issue tracker, but cannot find it...

Ah wait: from historical docs: https://issues.qgis.org/projects/qgis/wiki/Bugreports
use:
https://learn.microsoft.com/en-us/sysinternals/downloads/debugview
(but maybe Windows can do that now without tools...)

Regards,

Richard Duivenvoorde

On 6/20/23 16:38, Alessandro Pasotti via QGIS-Developer wrote:
> QGIS_DEBUG=X has no effect if QGIS was not built in debug mode.
> 
> 
> On Tue, Jun 20, 2023 at 4:18?PM Vedran Stojnovi? via QGIS-Developer
> <qgis-developer at lists.osgeo.org> wrote:
>>
>> Hi,
>>
>> I just installed QGIS 3.30.3 via web installer ("qgis-full" version) and QGIS won't start at all, nor does throw any error when I start it from PowerShell by executing "qgis-bin.exe".
>> I tried reinstalling a few times using different servers (default one and norbit.de) and I also cleaned the cache folder before changing the server.
>>
>> I already tried adding these two lines to "qgis-bin.env" and I created "qgislog.txt" on the desktop, but I still do not get any output to the command line and txt file is empty after trying to start qgis:
>> QGIS_DEBUG=9
>> QGIS_LOG_FILE=C:\Users\phidr\Desktop\qgislog.txt
>>
>> so the current contents of "qgis-bin.env" is:
>> PATH=C:\OSGeo4W\apps\qgis\bin;C:\OSGeo4W\apps\grass\grass82\lib;C:\OSGeo4W\apps\grass\grass82\bin;C:\OSGeo4W\apps\qt5\bin;C:\OSGeo4W\apps\Python39\Scripts;C:\OSGeo4W\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\system32\WBem
>> GDAL_DATA=C:\OSGeo4W\apps\gdal\share\gdal
>> GDAL_DRIVER_PATH=C:\OSGeo4W\apps\gdal\lib\gdalplugins
>> GDAL_FILENAME_IS_UTF8=YES
>> PDAL_DRIVER_PATH=C:\OSGeo4W\apps\pdal\plugins
>> GISBASE=C:\OSGeo4W\apps\grass\grass82
>> GRASS_PROJSHARE=C:\OSGeo4W\share\proj
>> GRASS_PYTHON=C:\OSGeo4W\bin\python3.exe
>> OSGEO4W_ROOT=C:\OSGeo4W
>> PROJ_LIB=C:\OSGeo4W\share\proj
>> PYTHONHOME=C:\OSGeo4W\apps\Python39
>> PYTHONPATH=C:\OSGeo4W\apps\grass\grass82\etc\python;
>> PYTHONUTF8=1
>> QGIS_PREFIX_PATH=C:/OSGeo4W/apps/qgis
>> QT_PLUGIN_PATH=C:\OSGeo4W\apps\qgis\qtplugins;C:\OSGeo4W\apps\qt5\plugins
>> VSI_CACHE=TRUE
>> VSI_CACHE_SIZE=1000000
>> O4W_QT_PREFIX=C:/OSGeo4W/apps/Qt5
>> O4W_QT_BINARIES=C:/OSGeo4W/apps/Qt5/bin
>> O4W_QT_PLUGINS=C:/OSGeo4W/apps/Qt5/plugins
>> O4W_QT_LIBRARIES=C:/OSGeo4W/apps/Qt5/lib
>> O4W_QT_TRANSLATIONS=C:/OSGeo4W/apps/Qt5/translations
>> O4W_QT_HEADERS=C:/OSGeo4W/apps/Qt5/include
>> QGIS_WIN_APP_NAME=OSGeo4W\QGIS Desktop 3.30.3
>> SSL_CERT_DIR=C:\OSGeo4W\apps\openssl\certs
>> SSL_CERT_FILE=C:\OSGeo4W\bin\curl-ca-bundle.crt
>> QGIS_DEBUG=9
>> QGIS_LOG_FILE=C:\Users\phidr\Desktop\qgislog.txt
>>
>> --
>> Kind regards,
>> Vedran Stojnovi?.
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> 


From phidrho at gmail.com  Tue Jun 20 10:44:21 2023
From: phidrho at gmail.com (=?UTF-8?Q?Vedran_Stojnovi=C4=87?=)
Date: Tue, 20 Jun 2023 19:44:21 +0200
Subject: [QGIS-Developer] How to enable debugging mode on QGIS start in
 Win11
In-Reply-To: <1d64e974-c719-d1ef-1d87-7eafefcd1dae@duif.net>
References: <CAL9iSMHywZthC508-5GMBZ44Qi0a+khNtCG_AgrrDy5kcbXALw@mail.gmail.com>
 <CAL5Q672n6XdwqdHNP=xtsU8MgNzTmbcqpfzhzZWYM065nC1jBA@mail.gmail.com>
 <1d64e974-c719-d1ef-1d87-7eafefcd1dae@duif.net>
Message-ID: <CAL9iSMG3adLbROJv17y1jbhTO4bm8cam0rUH3136YB2nJcpzaQ@mail.gmail.com>

Thank you very much to both of you!

After installing an additional dev version I added the same two lines in
qgis-dev-bin.env and after starting qgis-dev-bin.exe, now I got some output
to the txt file:
C:\src\OSGeo4W\src\qgis-dev\qgis\src\app\main.cpp(514) : (main) [0ms]
Starting qgis main
C:\src\OSGeo4W\src\qgis-dev\qgis\src\core\qgsapplication.cpp(470) :
(QgsApplication::installTranslators) [13ms] loading of qgis translation
failed C:/OSGeo4W/apps/qgis-dev/./i18n//qgis_hr_HR
C:\src\OSGeo4W\src\qgis-dev\qgis\src\core\qgsapplication.cpp(470) :
(QgsApplication::installTranslators) [3ms] loading of qgis translation
failed C:/OSGeo4W/apps/qgis-dev/./i18n//qgis_hr_HR

Is it possible that these two translation files block the entire QGIS
application? Should I bug report this? Or there is some other hidden
problem according to your experience?

uto, 20. lip 2023. u 16:57 Richard Duivenvoorde <rdmailings at duif.net>
napisao je:

> In windows/osgeo4w the 'nightly builds' (with -dev- in there package
> names) are build in DEBUG mode if I am correct...
>
> so these should show you logging info, but I think you also need to
> install a tool to SEE that logging. I know there was some utility for it.
> Not sure if you can see it in the Event Log of WIndows...
> Juergen posted some answers in the old issue tracker, but cannot find it...
>
> Ah wait: from historical docs:
> https://issues.qgis.org/projects/qgis/wiki/Bugreports
> use:
> https://learn.microsoft.com/en-us/sysinternals/downloads/debugview
> (but maybe Windows can do that now without tools...)
>
> Regards,
>
> Richard Duivenvoorde
>
> On 6/20/23 16:38, Alessandro Pasotti via QGIS-Developer wrote:
> > QGIS_DEBUG=X has no effect if QGIS was not built in debug mode.
> >
> >
> > On Tue, Jun 20, 2023 at 4:18?PM Vedran Stojnovi? via QGIS-Developer
> > <qgis-developer at lists.osgeo.org> wrote:
> >>
> >> Hi,
> >>
> >> I just installed QGIS 3.30.3 via web installer ("qgis-full" version)
> and QGIS won't start at all, nor does throw any error when I start it from
> PowerShell by executing "qgis-bin.exe".
> >> I tried reinstalling a few times using different servers (default one
> and norbit.de) and I also cleaned the cache folder before changing the
> server.
> >>
> >> I already tried adding these two lines to "qgis-bin.env" and I created
> "qgislog.txt" on the desktop, but I still do not get any output to the
> command line and txt file is empty after trying to start qgis:
> >> QGIS_DEBUG=9
> >> QGIS_LOG_FILE=C:\Users\phidr\Desktop\qgislog.txt
> >>
> >> so the current contents of "qgis-bin.env" is:
> >>
> PATH=C:\OSGeo4W\apps\qgis\bin;C:\OSGeo4W\apps\grass\grass82\lib;C:\OSGeo4W\apps\grass\grass82\bin;C:\OSGeo4W\apps\qt5\bin;C:\OSGeo4W\apps\Python39\Scripts;C:\OSGeo4W\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\system32\WBem
> >> GDAL_DATA=C:\OSGeo4W\apps\gdal\share\gdal
> >> GDAL_DRIVER_PATH=C:\OSGeo4W\apps\gdal\lib\gdalplugins
> >> GDAL_FILENAME_IS_UTF8=YES
> >> PDAL_DRIVER_PATH=C:\OSGeo4W\apps\pdal\plugins
> >> GISBASE=C:\OSGeo4W\apps\grass\grass82
> >> GRASS_PROJSHARE=C:\OSGeo4W\share\proj
> >> GRASS_PYTHON=C:\OSGeo4W\bin\python3.exe
> >> OSGEO4W_ROOT=C:\OSGeo4W
> >> PROJ_LIB=C:\OSGeo4W\share\proj
> >> PYTHONHOME=C:\OSGeo4W\apps\Python39
> >> PYTHONPATH=C:\OSGeo4W\apps\grass\grass82\etc\python;
> >> PYTHONUTF8=1
> >> QGIS_PREFIX_PATH=C:/OSGeo4W/apps/qgis
> >>
> QT_PLUGIN_PATH=C:\OSGeo4W\apps\qgis\qtplugins;C:\OSGeo4W\apps\qt5\plugins
> >> VSI_CACHE=TRUE
> >> VSI_CACHE_SIZE=1000000
> >> O4W_QT_PREFIX=C:/OSGeo4W/apps/Qt5
> >> O4W_QT_BINARIES=C:/OSGeo4W/apps/Qt5/bin
> >> O4W_QT_PLUGINS=C:/OSGeo4W/apps/Qt5/plugins
> >> O4W_QT_LIBRARIES=C:/OSGeo4W/apps/Qt5/lib
> >> O4W_QT_TRANSLATIONS=C:/OSGeo4W/apps/Qt5/translations
> >> O4W_QT_HEADERS=C:/OSGeo4W/apps/Qt5/include
> >> QGIS_WIN_APP_NAME=OSGeo4W\QGIS Desktop 3.30.3
> >> SSL_CERT_DIR=C:\OSGeo4W\apps\openssl\certs
> >> SSL_CERT_FILE=C:\OSGeo4W\bin\curl-ca-bundle.crt
> >> QGIS_DEBUG=9
> >> QGIS_LOG_FILE=C:\Users\phidr\Desktop\qgislog.txt
> >>
> >> --
> >> Kind regards,
> >> Vedran Stojnovi?.
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> >
> >
>
>

-- 
Srda?an pozdrav,
Vedran Stojnovi?.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230620/a16874ff/attachment.htm>

From groechenig at zt-gis.at  Wed Jun 21 04:15:34 2023
From: groechenig at zt-gis.at (=?iso-8859-1?Q?Simon_Gr=F6chenig?=)
Date: Wed, 21 Jun 2023 11:15:34 +0000
Subject: [QGIS-Developer] Blocknames in DXF export
Message-ID: <DU0P251MB0673B9D0FCE058D919FF37B28E5DA@DU0P251MB0673.EURP251.PROD.OUTLOOK.COM>

Hi list,

I am trying to use tthe native:dxfexport algorithm in a python plugin and I am looking for a way to modify the blockname from symbolLayer0 (and counting) to a custom name. I identified that these blocknames are created for layers with categorized renderers.

Is this somehow possible with QGIS 3.30/3.32?`

If no, would it be technically feasible to implement (possibly funded)? Maybe using categorized renderer labels?

Here is an excerpt of a dxf file containing a blockname (section "  2" indicated bold and with arrows):


INSERT

  5

97

100

AcDbEntity

100

AcDbBlockReference

  8

GP

  2 <<<<<

symbolLayer0 <<<<<

 50

0.0

 10

12.7812486278025137

 20

46.84633353466695382

  0

A related thread in qgis-user list is available here: https://lists.osgeo.org/pipermail/qgis-user/2023-June/053065.html

Simon

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230621/8758ff23/attachment.htm>

From jpablotop at hotmail.com  Wed Jun 21 11:37:06 2023
From: jpablotop at hotmail.com (Juan Pablo Moreno Sebastian)
Date: Wed, 21 Jun 2023 18:37:06 +0000
Subject: [QGIS-Developer] Consulta
In-Reply-To: <AM7PR09MB3750CEAC9C945DFC90A28DBFBE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
References: <AM7PR09MB3750ECB0324D24CAE90ABA89BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
 <AM7PR09MB3750CEAC9C945DFC90A28DBFBE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
Message-ID: <AM7PR09MB37501F4918EAAB817E5B1E61BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>

Buenas tardes.

Soy Juan Pablo Moreno.

Tengo que desarrollar un plugin para QGIS que calcule la prominencia orogr?fica de los cerros para despu?s pasar a clasificar los puntos.
Paso a explicar m?s despacio mi idea.

1? El plugin debe cargar un MDT.
2? Localizar cerros por an?lisis de cada celda del MDT y las de su entorno. Localizo una celda y si las del entorno son de cota inferior ser? un posible cerro, las hoyas ser?a al rev?s.
3? C?lculo de la prominencia orogr?fica de cada cerro.
??????Prominencia:
??????La prominencia de una monta?a, es una noci?n usada en orograf?a<https://es.wikipedia.org/wiki/Orograf%C3%ADa> para la clasificaci?n de las monta?as. Se define como el desnivel ??????m?nimo que hay que descender desde la cumbre de una monta?a para ascender a otra m?s alta. Cuanto m?s prominente sea una ??????monta?a m?s destacar? entre las que la rodean, con independencia de su altitud.

??????????????????Prominencia = altitud monta?a - altitud punto m?nimo

??????[cid:134c04d1-db0c-4fb6-becb-4ec2ae026d73]

Para calcular la prominencia habr?a que desarrollar un programa que hiciera algo similar a lo descrito a continuaci?n:

Una analog?a muy usada para explicar estas relaciones y, de paso, para ilustrar un posible procedimiento de detecci?n de cerros y collados, alude al mito del diluvio universal. Imaginamos que la tierra ha quedado anegada bajo un grueso manto de agua que la cubre por completo, sin dejar una sola porci?n de tierra emergida. Despu?s de finalizar el diluvio, la evaporaci?n del agua hace que empiecen a aflorar peque?as islas. La primera en aparecer es la cima del Everest y las siguientes, otras cumbres del Himalaya. A medida que desciende el nivel del mar por efecto de la evaporaci?n, la superficie emergida que ocupa cada isla va aumentando y llega un momento en que el nivel es lo suficientemente bajo para que la isla se fusione con otra masa de tierra a trav?s de alg?n istmo que haya quedado al descubierto. El punto exacto en el que ocurre la conexi?n de dos islas coincide con un collado y se asocia a la cumbre de la isla de menor altitud para determinar su prominencia. El valor se obtiene a partir de la diferencia de cota entre el cerro y el collado asociado, como se desprende de su definici?n.

Disculpe por todo el rollo.
Si le parece interesante el tema o fuera tan amable de ?guiarme un poco?, ?decirme si le suena de algo o conoce algo similar?, ?darme alg?n consejo de por d?nde o c?mo empezar?, o si tiene otra idea sobre el tema, estoy muy perdido en la programaci?n en python y todo me ser?a de muy gran ayuda, le estar?a muy agradecido.

Much?simas gracias por todo.
Un cordial saludo.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230621/1c7ec46f/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 43302 bytes
Desc: image.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230621/1c7ec46f/attachment-0001.png>

From jpablotop at hotmail.com  Wed Jun 21 11:37:42 2023
From: jpablotop at hotmail.com (Juan Pablo Moreno Sebastian)
Date: Wed, 21 Jun 2023 18:37:42 +0000
Subject: [QGIS-Developer] consultation
In-Reply-To: <AM7PR09MB3750C2057C1A3FE4CC499090BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
References: <AM7PR09MB3750ECB0324D24CAE90ABA89BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
 <AM7PR09MB3750CEAC9C945DFC90A28DBFBE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
 <AM7PR09MB3750C2057C1A3FE4CC499090BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
Message-ID: <AM7PR09MB37501B806CE976D60F2EC656BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>

Good afternoon.

I'm Juan Pablo Moreno.

I have to develop a plugin for QGIS that calculates the orographic prominence of the hills and then goes on to classify the points.
I will now explain my idea more slowly.

1? The plugin must load an MDT.
2? Locate hills by analysis of each cell of the MDT and those of its surroundings. I locate a cell and if the surroundings are of lower level it will be a possible hill, the holes would be the other way around.
3? Calculation of the orographic prominence of each hill.
??????
??????Prominence:
??????The prominence of a mountain is a notion used in orography for the classification of mountains. It is defined as the minimum slope that must be descended from the top of a mountain to ascend to a higher one. The more prominent a mountain is, the more it will stand out among those around it, regardless of its altitude.
?????
??????????????????Prominence = mountain altitude - altitude minimum point

??????[cid:134c04d1-db0c-4fb6-becb-4ec2ae026d73]

To calculate the prominence, a program would have to be developed that did something similar to the following:

An analogy widely used to explain these relationships and, incidentally, to illustrate a possible procedure for detecting hills and hills, alludes to the myth of the universal flood. We imagine that the earth has been flooded under a thick blanket of water that covers it completely, without leaving a single piece of land emerged. After the end of the flood, the evaporation of water causes small islands to begin to emerge. The first to appear is the summit of Everest and the following, other summits of the Himalayas. As the sea level drops due to evaporation, the surface area occupied by each island increases and there comes a time when the level is low enough for the island to merge with another land mass through some isthmus that has been exposed.  The exact point at which the connection of two islands occurs coincides with a col and is associated with the summit of the lower altitude island to determine its prominence. The value is obtained from the difference in height between the hill and the associated hill, as can be seen from its definition.

We apologize for the inconvenience.
If you find the subject interesting or were so kind as to guide me a little?, tell me if it sounds like something or know something similar?, give me some advice on where or how to start?, or if you have another idea on the subject, I am very lost in python programming and everything would be very helpful,  I would be very grateful.

Thank you very much for everything.
Best regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230621/c7184e3e/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 43302 bytes
Desc: image.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230621/c7184e3e/attachment-0001.png>

From alexander.bruy at gmail.com  Wed Jun 21 20:18:19 2023
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu, 22 Jun 2023 06:18:19 +0300
Subject: [QGIS-Developer] [Qgis-community-team] consultation
In-Reply-To: <AM7PR09MB37505AD97D876A3356B406A4BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
References: <AM7PR09MB3750ECB0324D24CAE90ABA89BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
 <AM7PR09MB3750CEAC9C945DFC90A28DBFBE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
 <AM7PR09MB3750C2057C1A3FE4CC499090BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
 <AM7PR09MB3750A35A7826127476578D83BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
 <AM7PR09MB37505F782ED775ACCB314FE5BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
 <AM7PR09MB37505AD97D876A3356B406A4BE5DA@AM7PR09MB3750.eurprd09.prod.outlook.com>
Message-ID: <CALuHMPCGJNd8hwa5d0R_JnVT9d3sFJrt6cz=f4XDFx35ANf3LA@mail.gmail.com>

Please stop cross-posting the same message to all mailing lists you were
able to find.

??, 21 ????. 2023??. ? 21:46 Juan Pablo Moreno Sebastian <
jpablotop at hotmail.com> ????:

> Good afternoon.
>
> I'm Juan Pablo Moreno.
>
> I have to develop a plugin for QGIS that calculates the orographic
> prominence of the hills and then goes on to classify the points.
> I will now explain my idea more slowly.
>
> 1? The plugin must load an MDT.
> 2? Locate hills by analysis of each cell of the MDT and those of its
> surroundings. I locate a cell and if the surroundings are of lower level it
> will be a possible hill, the holes would be the other way around.
> 3? Calculation of the orographic prominence of each hill.
> *Prominence:*
> The *prominence *of a mountain is a notion used in orography for the
> classification of mountains. It is defined as the minimum slope that must
> be descended from the top of a mountain to ascend to a higher one. The more
> prominent a mountain is, the more it will stand out among those around it,
> regardless of its altitude.
> *Prominence = mountain altitude - altitude minimum point*
>
>
>
> To calculate the prominence, a program would have to be developed that did
> something similar to the following:
>
> An analogy widely used to explain these relationships and, incidentally,
> to illustrate a possible procedure for detecting hills and hills, alludes
> to the myth of the universal flood. We imagine that the earth has been
> flooded under a thick blanket of water that covers it completely, without
> leaving a single piece of land emerged. After the end of the flood, the
> evaporation of water causes small islands to begin to emerge. The first to
> appear is the summit of Everest and the following, other summits of the
> Himalayas. As the sea level drops due to evaporation, the surface area
> occupied by each island increases and there comes a time when the level is
> low enough for the island to merge with another land mass through some
> isthmus that has been exposed.  The exact point at which the connection
> of two islands occurs coincides with a col and is associated with the
> summit of the lower altitude island to determine its prominence. The value
> is obtained from the difference in height between the hill and the
> associated hill, as can be seen from its definition.
>
> We apologize for the inconvenience.
> If you find the subject interesting or were so kind as to guide me a
> little?, tell me if it sounds like something or know something similar?,
> give me some advice on where or how to start?, or if you have another idea
> on the subject, I am very lost in python programming and everything would
> be very helpful,  I would be very grateful.
>
> Thank you very much for everything.
> Best regards.
> _______________________________________________
> Qgis-community-team mailing list for organizing community resources such
> as documentation, translation etc..
> Qgis-community-team at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-community-team
>


-- 
Alexander Bruy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230622/4faa9b33/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 43302 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230622/4faa9b33/attachment-0001.png>

From nyall.dawson at gmail.com  Wed Jun 21 21:34:27 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 22 Jun 2023 14:34:27 +1000
Subject: [QGIS-Developer] Adding a plugin collaborator
Message-ID: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>

Hi list,

This is possibly a stupid question -- but how can I add additional
users as collaborators to a plugin via https://plugins.qgis.org/?

I can see other plugins which have done this, but can't see any
settings exposed in my plugins which permit me to add collaborations
myself.

Does it require some administrative privileges to do this?

Nyall

From nicolas.godet at outlook.fr  Wed Jun 21 22:05:16 2023
From: nicolas.godet at outlook.fr (Nicolas Godet)
Date: Thu, 22 Jun 2023 05:05:16 +0000
Subject: [QGIS-Developer] Adding a plugin collaborator
In-Reply-To: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
References: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
Message-ID: <PA4P190MB11669F9AC8D9947D87E105638F22A@PA4P190MB1166.EURP190.PROD.OUTLOOK.COM>

Hi Nyall,

If you have at least collaborator privileges, you can add another one.
To do so, go to Manage tab, Edit and select the other ? owner ? in list and he will appear as collaborator.

Nicolas

> Le 22 juin 2023 ? 06:34, Nyall Dawson via QGIS-Developer <qgis-developer at lists.osgeo.org> a ?crit :
> 
> ?Hi list,
> 
> This is possibly a stupid question -- but how can I add additional
> users as collaborators to a plugin via https://plugins.qgis.org/?
> 
> I can see other plugins which have done this, but can't see any
> settings exposed in my plugins which permit me to add collaborations
> myself.
> 
> Does it require some administrative privileges to do this?
> 
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Thu Jun 22 00:08:10 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 22 Jun 2023 09:08:10 +0200
Subject: [QGIS-Developer] Adding a plugin collaborator
In-Reply-To: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
References: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
Message-ID: <184555844ed0dcb57b0bc8f994dfd61e@duif.net>

On 2023-06-22 06:34, Nyall Dawson via QGIS-Developer wrote:
> Hi list,
> 
> This is possibly a stupid question -- but how can I add additional
> users as collaborators to a plugin via https://plugins.qgis.org/?
> 
> I can see other plugins which have done this, but can't see any
> settings exposed in my plugins which permit me to add collaborations
> myself.

As admin it it possible to change 'owners'. That is if the ownership 
changes, I (or other admins) can do that in the plugins.qgis.org site.

For metadata fields: 
https://docs.qgis.org/3.28/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#metadata-txt

Not sure what you mean with collaborator?
Can you give an example of such 'collaborator'?

Or if you let me know, I dan make a person 'owner' too...

Regards,

Richard Duivenvoorde
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot from 2023-06-22 09-05-32.png
Type: image/png
Size: 25576 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230622/39d157aa/attachment-0001.png>

From rdmailings at duif.net  Thu Jun 22 00:13:30 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 22 Jun 2023 09:13:30 +0200
Subject: [QGIS-Developer] Adding a plugin collaborator
In-Reply-To: <184555844ed0dcb57b0bc8f994dfd61e@duif.net>
References: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
 <184555844ed0dcb57b0bc8f994dfd61e@duif.net>
Message-ID: <ed91db6a1c78f24ec2ed51d48c8a64c4@duif.net>

Or maybe... the 'author' string of the metadata.txt is used as is.
If you leave it, it will probably use the name from your 
credentials/ldap.
But if you add more names there, it will be shown in the plugin 
dialog(s)

Regards,

Richard

On 2023-06-22 09:08, Richard Duivenvoorde via QGIS-Developer wrote:
> On 2023-06-22 06:34, Nyall Dawson via QGIS-Developer wrote:
>> Hi list,
>> 
>> This is possibly a stupid question -- but how can I add additional
>> users as collaborators to a plugin via https://plugins.qgis.org/?
>> 
>> I can see other plugins which have done this, but can't see any
>> settings exposed in my plugins which permit me to add collaborations
>> myself.
> 
> As admin it it possible to change 'owners'. That is if the ownership
> changes, I (or other admins) can do that in the plugins.qgis.org site.
> 
> For metadata fields:
> https://docs.qgis.org/3.28/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#metadata-txt
> 
> Not sure what you mean with collaborator?
> Can you give an example of such 'collaborator'?
> 
> Or if you let me know, I dan make a person 'owner' too...
> 
> Regards,
> 
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From broniewski at a-a.lu  Thu Jun 22 01:56:26 2023
From: broniewski at a-a.lu (Frank Broniewski)
Date: Thu, 22 Jun 2023 08:56:26 +0000
Subject: [QGIS-Developer] PyQGIS zoom to layer not working
In-Reply-To: <b2090bb6-02e7-3a35-b58f-848164f50048@duif.net>
References: <HE1PR0501MB2522E7A6D0C0532FBEAAB958FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>
 <3b49991b-bfce-03ab-9fb1-c20adeacf53d@duif.net>
 <HE1PR0501MB252218232C9D6884ADC8F931FB5CA@HE1PR0501MB2522.eurprd05.prod.outlook.com>
 <b2090bb6-02e7-3a35-b58f-848164f50048@duif.net>
Message-ID: <HE1PR0501MB25227A5D9E9D34AE5D2B53BBFB22A@HE1PR0501MB2522.eurprd05.prod.outlook.com>

Hey Richard,

thanks for the good wishes! I feel, I completely jinxed it ?. I will continue to investigate, as soon as I find a solution, I'll post it here ...

-----Urspr?ngliche Nachricht-----
Von: Richard Duivenvoorde <rdmailings at duif.net> 
Gesendet: Dienstag, 20. Juni 2023 15:33
An: Frank Broniewski <broniewski at a-a.lu>; qgis-developer at lists.osgeo.org
Betreff: Re: AW: [QGIS-Developer] PyQGIS zoom to layer not working

On 6/20/23 14:56, Frank Broniewski wrote:
> I did set the QGIS default CRS to 2169 in the options, but this did not help unfortunately.

Mmm, that should work:

Settings / CRS and Transforms/ CRS for projects / Use a default CRS AND I would maybe also set the CRS for layer to epsg:2169

Another option is to create a 'Default Project' (empty, BUT crs set to epsg:2169) Settings / General / Set Current Project As Default and Checkbox 'Create new project from default project'

fiddling with those I'm pretty sure it should be possible to start QGIS in the right crs..

Suc6

Richard Duivenvoorde

From carrillo.german at gmail.com  Thu Jun 22 07:48:49 2023
From: carrillo.german at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Carrillo?=)
Date: Thu, 22 Jun 2023 09:48:49 -0500
Subject: [QGIS-Developer] Adding a plugin collaborator
In-Reply-To: <ed91db6a1c78f24ec2ed51d48c8a64c4@duif.net>
References: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
 <184555844ed0dcb57b0bc8f994dfd61e@duif.net>
 <ed91db6a1c78f24ec2ed51d48c8a64c4@duif.net>
Message-ID: <CANaz7mzM4UktuFiSqQjWuAnBuV6noEz+T0YKOYpcjzPWkstG7A@mail.gmail.com>

Hi All,


last year in Firenze I contacted Richard by e-mail, and asked Alessandro
personally what was the rationale of the "Owners" field.

I had this use case in mind: add a person as contributor to allow him/her
to upload plugin versions. The "Author" field was already filled with the
organization we worked for. For some reason, I could not add him/her as a
maintainer (perhaps the maintainer is a single person or the field doesn't
appear in the edit form), and the field "Owner" sounded as if I worked for
him/her, which was not the case.

After some discussion with Alessandro, he found a more precise term for
describing what the 'Owner' field is for: and the term is "Collaborator",
which did fit perfectly with my use case.

See the proposed change here: https://github.com/qgis/QGIS-Django/pull/254


Regards,

Germa?


El jue, 22 jun 2023 a las 2:13, Richard Duivenvoorde via QGIS-Developer (<
qgis-developer at lists.osgeo.org>) escribi?:

> Or maybe... the 'author' string of the metadata.txt is used as is.
> If you leave it, it will probably use the name from your
> credentials/ldap.
> But if you add more names there, it will be shown in the plugin
> dialog(s)
>
> Regards,
>
> Richard
>
> On 2023-06-22 09:08, Richard Duivenvoorde via QGIS-Developer wrote:
> > On 2023-06-22 06:34, Nyall Dawson via QGIS-Developer wrote:
> >> Hi list,
> >>
> >> This is possibly a stupid question -- but how can I add additional
> >> users as collaborators to a plugin via https://plugins.qgis.org/?
> >>
> >> I can see other plugins which have done this, but can't see any
> >> settings exposed in my plugins which permit me to add collaborations
> >> myself.
> >
> > As admin it it possible to change 'owners'. That is if the ownership
> > changes, I (or other admins) can do that in the plugins.qgis.org site.
> >
> > For metadata fields:
> >
> https://docs.qgis.org/3.28/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#metadata-txt
> >
> > Not sure what you mean with collaborator?
> > Can you give an example of such 'collaborator'?
> >
> > Or if you let me know, I dan make a person 'owner' too...
> >
> > Regards,
> >
> > Richard Duivenvoorde
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
-----------
   |\__
(:>__)(
   |/
Soluciones Geoinform?ticas Libres
http://geotux.tuxfamily.org/
https://twitter.com/GeoTux2 <http://twitter.com/GeoTux2>

<http://gis.stackexchange.com/users/4972/germ%c3%a1n-carrillo>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230622/2f64359c/attachment.htm>

From jean at jhemmi.eu  Thu Jun 22 10:21:53 2023
From: jean at jhemmi.eu (Jean Hemmi)
Date: Thu, 22 Jun 2023 19:21:53 +0200
Subject: [QGIS-Developer] QGIS 3.x very slow under Windows 10
Message-ID: <CAKsx1pm-O89xrrDPn4sp+UXAqeyzNRVoRJWz=kYkc1ZpX46Wmg@mail.gmail.com>

Hello,
i've experienced a QGIS 3.22 or 3.10 very slow under Windows 10 21H1 build
19043.2251. The machine has available resources and Qgis process seem hold.
Running QGIS "under admin" solved the question...
Someone can explain this ?

Regards to all QGIS folks
Jean Hemmi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230622/787d9440/attachment-0001.htm>

From luca.manganelli at comune.trento.it  Fri Jun 23 01:52:07 2023
From: luca.manganelli at comune.trento.it (Luca Manganelli)
Date: Fri, 23 Jun 2023 10:52:07 +0200
Subject: [QGIS-Developer] QGIS 3.x very slow under Windows 10
In-Reply-To: <CAKsx1pm-O89xrrDPn4sp+UXAqeyzNRVoRJWz=kYkc1ZpX46Wmg@mail.gmail.com>
References: <CAKsx1pm-O89xrrDPn4sp+UXAqeyzNRVoRJWz=kYkc1ZpX46Wmg@mail.gmail.com>
Message-ID: <CAGKduJ2=K6uRP9js+P1W8tuoDYHp29GbfQ2O=5SYvm4VcdKWBw@mail.gmail.com>

Can you try the latest 3.32 nightly snapshot?

-- 






Comune di Trento?

via Belenzani, 19 - 38122 Trento | C.F e P. IVA: 
00355870221

tel. +39 0461.884111 | www.comune.trento.it 
<http://www.comune.trento.it>?



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230623/a2178fff/attachment.htm>

From rdmailings at duif.net  Sat Jun 24 10:02:58 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 24 Jun 2023 19:02:58 +0200
Subject: [QGIS-Developer] Input for changelog
In-Reply-To: <f3ffc14a599f5c1ec040dc33fc943c78@duif.net>
References: <f3ffc14a599f5c1ec040dc33fc943c78@duif.net>
Message-ID: <3dd87375-2d77-39bb-2741-aa99684fc528@duif.net>

Ok, ready?

As packaging will probably go over the weekend, I'm planning to pull the changelog (silently) into our website tomorrow or monday?

Richard

On 6/19/23 08:09, Richard Duivenvoorde via QGIS-Developer wrote:
> Hi Devs,
> 
> As packaging of 3.32 is coming close... and we will pull the changelog from the input site into qgis.org.
> While already looking good(!), can you please have a look at https://changelog.qgis.org/en/qgis/version/3.32/ and add items if needed, fix/update texts if needed and/or add some screenies to make it look cooler :-)
> 
> TIA,
> 
> Regards,
> 
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From maps at hanfastolfe.com  Sat Jun 24 11:45:40 2023
From: maps at hanfastolfe.com (Cory Albrecht)
Date: Sat, 24 Jun 2023 14:45:40 -0400
Subject: [QGIS-Developer] Why so many database calls?
In-Reply-To: <CAMW5rY+mQF8c3-tb+NS_Em90bVGoK2iwO6OS639-0he8hyu54A@mail.gmail.com>
References: <CAMW5rYLmbYvXS8fWFMnoLmeqWZc0KirN5eP-3TeNPEWKE+MM5w@mail.gmail.com>
 <CAMW5rY+mQF8c3-tb+NS_Em90bVGoK2iwO6OS639-0he8hyu54A@mail.gmail.com>
Message-ID: <CAMW5rYKVB001Lz8th1uM7aFpjG=wWhmuew=So3G3H9an1ktAGg@mail.gmail.com>

So, nobody knows why QGIS makes all those seemingly wasteful SQL reads?

On Fri, Jun 16, 2023 at 1:18?PM Cory Albrecht <maps at hanfastolfe.com> wrote:

> So QGIS took almost 2.5 hours to delete those 1,000-ish vertices, spitting
> out those seemingly unnecessary transaction blocks every second or so.
> Judging by the numbers of the named blocks, roughly 5,000 of them were done
> just to delete those 1,000-ish vertices.
>
> Right now, on that same feature, I went to add a new vertx in the middle
> of the gap created by the deletion of the 1,000-ish last night, drag it to
> a new spot, and right clock to place. Those same seemingly unnecessary
> read-only transactions with a single select are being done, but at the rate
> of roughly 100 per second and the process takes about 7-8 minutes after the
> right click before QGIS becomes responsive again. I've done it a few times
> this morning, exiting QGIS without saving, and same thing each time.
>
> Why so many of these database queries?
>
>
> On Thu, Jun 15, 2023 at 5:40?PM Cory Albrecht <maps at hanfastolfe.com>
> wrote:
>
>> Hello,
>>
>> So I've been trying to track down why my postgresql server was getting so
>> many Signal 10 (SUG BS, memory bus) errors. So far I have figured out that
>> they are only happening when QGIS is connecting to it using GSS/Kerberos
>> encryption. No clue yet as to which side is the culprit (e.g. bad QGIS
>> kerberised data flow, or bad PostgreSQL handling of the connection). QGIS
>> cinnectio with SSL encryption is fine.
>>
>> Anyways, while doing this I've been watching a lot of PostgreSQL server
>> logs, and I noticed the following behaviour of QGIS:
>>
>> When using the vertex editor to delete a whole slew (1,000-ish) vertices
>> from a polygon feature, I saw that QGIS was making repeated DB cals like
>> this:
>>
>> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3204-1] ::>[2023-06-15
>> 17:14:19.289 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
>>  duration: 0.330 ms  statement: BEGIN READ ONLY;DECLARE qgis_1062 BINARY
>> CURSOR FOR SELECT
>> "feature_uuid"::text,"name"::text,"start_date"::text,"end_date"::text,"main_rgb"::text,"realm_uuid"::text,"stripe_rgb"::text,"border_rgb"::text,"border_shade"::text,"sovereign"::text,"type"::text,"info_url"::text,array_out("predecessors")::text,array_out("successors")::text,boolout("visible")::text,boolout("has_children")::text,"full_name"::text,"alternate_name"::text,"flag_url"::text
>> FROM "Balance of Power"."timeline_level0" WHERE
>> "feature_uuid"::text='fbbec581-eb8f-4068-8729-8f9d63896bd5'
>> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3205-1] ::>[2023-06-15
>> 17:14:19.290 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
>>  duration: 0.628 ms  statement: FETCH FORWARD 2000 FROM qgis_1062
>> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3206-1] ::>[2023-06-15
>> 17:14:19.291 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:
>>  duration: 0.045 ms  statement: CLOSE qgis_1062;COMMIT
>>
>> An example of the QGIS console output:
>>
>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [4ms] 2023-06-15T17:37:08
>> PostGIS[1] NOTICE: LOG:  duration: 0.399 ms  statement: FETCH FORWARD 2000
>> FROM qgis_2017
>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2023-06-15T17:37:08
>> PostGIS[1] NOTICE: LOG:  duration: 0.035 ms  statement: CLOSE
>> qgis_2017;COMMIT
>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [3ms] 2023-06-15T17:37:08
>> PostGIS[1] NOTICE: LOG:  duration: 0.240 ms  statement: BEGIN READ
>> ONLY;DECLARE qgis_2018 BINARY CURSOR FOR SELECT
>> "feature_uuid"::text,"name"::text,"start_date"::text,"end_date"::text,"main_rgb"::text,"realm_uuid"::text,"stripe_rgb"::text,"border_rgb"::text,"border_shade"::text,"sovereign"::text,"type"::text,"info_url"::text,array_out("predecessors")::text,array_out("successors")::text,boolout("visible")::text,boolout("has_children")::text,"full_name"::text,"alternate_name"::text,"flag_url"::text
>> FROM "Balance of Power"."timeline_level0" WHERE
>> "feature_uuid"::text='fbbec581-eb8f-4068-8729-8f9d63896bd5'
>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [2ms] 2023-06-15T17:37:08
>> PostGIS[1] NOTICE: LOG:  duration: 0.406 ms  statement: FETCH FORWARD 2000
>> FROM qgis_2018
>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2023-06-15T17:37:08
>> PostGIS[1] NOTICE: LOG:  duration: 0.034 ms  statement: CLOSE
>> qgis_2018;COMMIT
>>
>>
>>
>> That is repeated 4 times every couple of seconds as I wait for QGIS to
>> finish deleting these 1,000-ish vertices. So far it's at begin block
>> qgis_2058 (increasing sequentially) and it's been 20+ minutes that QGIS has
>> been frozen, CPU usage for the process jumping around between 100% and 300%.
>>
>> (Before you ask, Fall 2021 Dell XPS 9510, 11th Gen Intel Core i9-11900H @
>> 2.50GHz 8 cores, 64GB RAM.)
>>
>> So why is it repeatedly making database calls to get the non geometry
>> attributes of that same singular feature? Why can't it just use the cached
>> data instead of making all these wasteful DB queries?
>>
>> And why is it taking so long to delete the vertices? Is it related to all
>> the unnecessary DB queries?
>>
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230624/4c5d9914/attachment.htm>

From apasotti at gmail.com  Sat Jun 24 14:10:27 2023
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Sat, 24 Jun 2023 23:10:27 +0200
Subject: [QGIS-Developer] Why so many database calls?
In-Reply-To: <CAMW5rYKVB001Lz8th1uM7aFpjG=wWhmuew=So3G3H9an1ktAGg@mail.gmail.com>
References: <CAMW5rYLmbYvXS8fWFMnoLmeqWZc0KirN5eP-3TeNPEWKE+MM5w@mail.gmail.com>
 <CAMW5rY+mQF8c3-tb+NS_Em90bVGoK2iwO6OS639-0he8hyu54A@mail.gmail.com>
 <CAMW5rYKVB001Lz8th1uM7aFpjG=wWhmuew=So3G3H9an1ktAGg@mail.gmail.com>
Message-ID: <CAL5Q670PRsF9Dh6TYPnHaNxLupaw824=tK0+ACYi7G71WNrSkQ@mail.gmail.com>

Hi Cory,

I think many developers have one or two ideas about where to look,
they probably didn't have the time to look into it.

Is there a ticket already?


On Sat, Jun 24, 2023 at 8:46?PM Cory Albrecht via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> So, nobody knows why QGIS makes all those seemingly wasteful SQL reads?
>
> On Fri, Jun 16, 2023 at 1:18?PM Cory Albrecht <maps at hanfastolfe.com> wrote:
>>
>> So QGIS took almost 2.5 hours to delete those 1,000-ish vertices, spitting out those seemingly unnecessary transaction blocks every second or so. Judging by the numbers of the named blocks, roughly 5,000 of them were done just to delete those 1,000-ish vertices.
>>
>> Right now, on that same feature, I went to add a new vertx in the middle of the gap created by the deletion of the 1,000-ish last night, drag it to a new spot, and right clock to place. Those same seemingly unnecessary read-only transactions with a single select are being done, but at the rate of roughly 100 per second and the process takes about 7-8 minutes after the right click before QGIS becomes responsive again. I've done it a few times this morning, exiting QGIS without saving, and same thing each time.
>>
>> Why so many of these database queries?
>>
>>
>> On Thu, Jun 15, 2023 at 5:40?PM Cory Albrecht <maps at hanfastolfe.com> wrote:
>>>
>>> Hello,
>>>
>>> So I've been trying to track down why my postgresql server was getting so many Signal 10 (SUG BS, memory bus) errors. So far I have figured out that they are only happening when QGIS is connecting to it using GSS/Kerberos encryption. No clue yet as to which side is the culprit (e.g. bad QGIS kerberised data flow, or bad PostgreSQL handling of the connection). QGIS cinnectio with SSL encryption is fine.
>>>
>>> Anyways, while doing this I've been watching a lot of PostgreSQL server logs, and I noticed the following behaviour of QGIS:
>>>
>>> When using the vertex editor to delete a whole slew (1,000-ish) vertices from a polygon feature, I saw that QGIS was making repeated DB cals like this:
>>>
>>> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3204-1] ::>[2023-06-15 17:14:19.289 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:  duration: 0.330 ms  statement: BEGIN READ ONLY;DECLARE qgis_1062 BINARY CURSOR FOR SELECT "feature_uuid"::text,"name"::text,"start_date"::text,"end_date"::text,"main_rgb"::text,"realm_uuid"::text,"stripe_rgb"::text,"border_rgb"::text,"border_shade"::text,"sovereign"::text,"type"::text,"info_url"::text,array_out("predecessors")::text,array_out("successors")::text,boolout("visible")::text,boolout("has_children")::text,"full_name"::text,"alternate_name"::text,"flag_url"::text FROM "Balance of Power"."timeline_level0" WHERE "feature_uuid"::text='fbbec581-eb8f-4068-8729-8f9d63896bd5'
>>> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3205-1] ::>[2023-06-15 17:14:19.290 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:  duration: 0.628 ms  statement: FETCH FORWARD 2000 FROM qgis_1062
>>> Jun 15 17:14:19 postgresql-3 postgres[87136]: [3206-1] ::>[2023-06-15 17:14:19.291 EDT][648b7d94.15460][87136/] <maps%Alternate History> LOG:  duration: 0.045 ms  statement: CLOSE qgis_1062;COMMIT
>>>
>>> An example of the QGIS console output:
>>>
>>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [4ms] 2023-06-15T17:37:08 PostGIS[1] NOTICE: LOG:  duration: 0.399 ms  statement: FETCH FORWARD 2000 FROM qgis_2017
>>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2023-06-15T17:37:08 PostGIS[1] NOTICE: LOG:  duration: 0.035 ms  statement: CLOSE qgis_2017;COMMIT
>>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [3ms] 2023-06-15T17:37:08 PostGIS[1] NOTICE: LOG:  duration: 0.240 ms  statement: BEGIN READ ONLY;DECLARE qgis_2018 BINARY CURSOR FOR SELECT "feature_uuid"::text,"name"::text,"start_date"::text,"end_date"::text,"main_rgb"::text,"realm_uuid"::text,"stripe_rgb"::text,"border_rgb"::text,"border_shade"::text,"sovereign"::text,"type"::text,"info_url"::text,array_out("predecessors")::text,array_out("successors")::text,boolout("visible")::text,boolout("has_children")::text,"full_name"::text,"alternate_name"::text,"flag_url"::text FROM "Balance of Power"."timeline_level0" WHERE "feature_uuid"::text='fbbec581-eb8f-4068-8729-8f9d63896bd5'
>>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [2ms] 2023-06-15T17:37:08 PostGIS[1] NOTICE: LOG:  duration: 0.406 ms  statement: FETCH FORWARD 2000 FROM qgis_2018
>>> ./src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2023-06-15T17:37:08 PostGIS[1] NOTICE: LOG:  duration: 0.034 ms  statement: CLOSE qgis_2018;COMMIT
>>>
>>>
>>>
>>> That is repeated 4 times every couple of seconds as I wait for QGIS to finish deleting these 1,000-ish vertices. So far it's at begin block qgis_2058 (increasing sequentially) and it's been 20+ minutes that QGIS has been frozen, CPU usage for the process jumping around between 100% and 300%.
>>>
>>> (Before you ask, Fall 2021 Dell XPS 9510, 11th Gen Intel Core i9-11900H @ 2.50GHz 8 cores, 64GB RAM.)
>>>
>>> So why is it repeatedly making database calls to get the non geometry attributes of that same singular feature? Why can't it just use the cached data instead of making all these wasteful DB queries?
>>>
>>> And why is it taking so long to delete the vertices? Is it related to all the unnecessary DB queries?
>>>
>>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From jean at jhemmi.eu  Sun Jun 25 13:02:02 2023
From: jean at jhemmi.eu (Jean Hemmi)
Date: Sun, 25 Jun 2023 22:02:02 +0200
Subject: [QGIS-Developer] QGIS 3.x very slow under Windows 10
Message-ID: <CAKsx1pms-7ogixtHWtN=OaZ=Fz09s_di6QS_sbHKpBDHB1_zqQ@mail.gmail.com>

ALexandre,
Creating a new QGIS profile does not change QGIS is very slow.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230625/cd50a836/attachment.htm>

From nyall.dawson at gmail.com  Sun Jun 25 15:55:54 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 26 Jun 2023 08:55:54 +1000
Subject: [QGIS-Developer] Adding a plugin collaborator
In-Reply-To: <184555844ed0dcb57b0bc8f994dfd61e@duif.net>
References: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
 <184555844ed0dcb57b0bc8f994dfd61e@duif.net>
Message-ID: <CAB28AsgkZsAfqpmKX_DcV=_F5nfQ+1Pq3EiM9n_di54Pj+O0zw@mail.gmail.com>

On Thu, 22 Jun 2023 at 17:08, Richard Duivenvoorde <rdmailings at duif.net>
wrote:
>
> On 2023-06-22 06:34, Nyall Dawson via QGIS-Developer wrote:
> > Hi list,
> >
> > This is possibly a stupid question -- but how can I add additional
> > users as collaborators to a plugin via https://plugins.qgis.org/?
> >
> > I can see other plugins which have done this, but can't see any
> > settings exposed in my plugins which permit me to add collaborations
> > myself.
>
> As admin it it possible to change 'owners'. That is if the ownership
> changes, I (or other admins) can do that in the plugins.qgis.org site.

Thanks Richard, I've found this setting now! (For other's reference it's
under "Manage" - "Edit" - "Owners").

It's a bit clunky unfortunately -- there's a list box with over 4000
entries and I need to safely select multiple entries from this ?...  I
think I'll resort to some js console trickery to make sure I do it
correctly!

Nyall




>
> For metadata fields:
>
https://docs.qgis.org/3.28/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#metadata-txt
>
> Not sure what you mean with collaborator?
> Can you give an example of such 'collaborator'?
>
> Or if you let me know, I dan make a person 'owner' too...
>
> Regards,
>
> Richard Duivenvoorde
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230626/b366be44/attachment.htm>

From rdmailings at duif.net  Sun Jun 25 21:01:02 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 26 Jun 2023 06:01:02 +0200
Subject: [QGIS-Developer] Adding a plugin collaborator
In-Reply-To: <CAB28AsgkZsAfqpmKX_DcV=_F5nfQ+1Pq3EiM9n_di54Pj+O0zw@mail.gmail.com>
References: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
 <184555844ed0dcb57b0bc8f994dfd61e@duif.net>
 <CAB28AsgkZsAfqpmKX_DcV=_F5nfQ+1Pq3EiM9n_di54Pj+O0zw@mail.gmail.com>
Message-ID: <28823467-59ef-9561-ff26-efac4b1d1fda@duif.net>

On 6/26/23 00:55, Nyall Dawson wrote:
> Thanks Richard, I've found this setting now! (For other's reference it's under "Manage" - "Edit" - "Owners").
> 
> It's a bit clunky unfortunately?-- there's a list box with over 4000 entries and I need to safely select multiple entries from this??...? I think I'll resort to some js console trickery to make sure I do it correctly!

Yeah, you are right... it's was OK in the beginning of our plugins... or if you want to select just one, but in your case..

This is the repo of the site: https://github.com/qgis/QGIS-Django/

Feel free to add a Feature Request to easier filter or multi select that list.

Regards,

Richard

From rdmailings at duif.net  Sun Jun 25 21:35:48 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 26 Jun 2023 06:35:48 +0200
Subject: [QGIS-Developer] Input for changelog
In-Reply-To: <f3ffc14a599f5c1ec040dc33fc943c78@duif.net>
References: <f3ffc14a599f5c1ec040dc33fc943c78@duif.net>
Message-ID: <4668a158-af7e-e982-9f18-87735f777c5f@duif.net>

On 6/19/23 08:09, Richard Duivenvoorde via QGIS-Developer wrote:
> Hi Devs,
> As packaging of 3.32 is coming close... and we will pull the changelog from the input site into qgis.org.

Done, I just build the English version of the site to see it: https://qgis.org/en/site/forusers/visualchangelog332/index.html

Please check and if you see issue's, fix in github if you can, or let me know.

Regards,

Richard Duivenvoorde


From apasotti at gmail.com  Sun Jun 25 23:58:17 2023
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 26 Jun 2023 08:58:17 +0200
Subject: [QGIS-Developer] Next QGIS QT6 update meeting
Message-ID: <CAL5Q673u5U=YHmJKpL6yqWo86BwCE7dk54tJ9VwSOEWNr6e80Q@mail.gmail.com>

Hi,

Here is the link to choose a time for the next QT6 update meeting,

https://doodle.com/bp/alessandropasotti/qgis-qt6-update-meeting

please fill in the form with your date/time availability.

Kind regards.

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From senhor.neto at gmail.com  Mon Jun 26 04:01:36 2023
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Mon, 26 Jun 2023 12:01:36 +0100
Subject: [QGIS-Developer] Measuring Map Rendering Time using PyQGIS
Message-ID: <CA+H0G_H_YckLvt2N1iDxoa-y738X-c+gHcGTg7NGZ646Pw_vzg@mail.gmail.com>

Hi,

I am looking for a way to audit a QGIS projects in terms of layer rendering
time.

I was able to measuring the rendering every time I refresh the the map
canvas, change layers or change extent, using the following code (inspired
by Anita code):

from datetime import datetime

def get_time():
    t1 = datetime.now()
    print('Rendering time:',t1-t0, 'seconds')

def reset_time():
    global t0
    t0 = datetime.now()

canvas = iface.mapCanvas()
canvas.mapCanvasRefreshed.connect(get_time)
canvas.extentsChanged.connect(reset_time)
canvas.layersChanged.connect(reset_time)

Now, I wanted to programmatically zoom in, zoom out, enable and disable
layers, etc... but If I give two or more of these commands together, each
command won't wait for the other to finish rendering, therefore I am unable
to measure the time.

For example:
iface.actionZoomFullExtent()
canvas.zoomByFactor(0.5)

Only returns the time for the last zoom to render.

I have tried using time.wait() but that stops the rendering all together.

Thanks,

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230626/843e5be5/attachment.htm>

From andreas.janz at geo.hu-berlin.de  Mon Jun 26 04:21:27 2023
From: andreas.janz at geo.hu-berlin.de (Andreas Janz)
Date: Mon, 26 Jun 2023 13:21:27 +0200
Subject: [QGIS-Developer] feedback for #53454 (noDataValues aren't correctly
 rendered when using a custom QgsRasterDataProvider)
In-Reply-To: <CA+H0G_H_YckLvt2N1iDxoa-y738X-c+gHcGTg7NGZ646Pw_vzg@mail.gmail.com>
References: <CA+H0G_H_YckLvt2N1iDxoa-y738X-c+gHcGTg7NGZ646Pw_vzg@mail.gmail.com>
Message-ID: <883203d9-f749-0dd8-5c7d-f2941167fdd9@geo.hu-berlin.de>

Dear Developers,

would be great, if somebody could have a look at this issue and provide 
feedback, whether this bug is fixable.
https://github.com/qgis/QGIS/issues/53454

Currently, I work around the issue by filling noData-Pixel with NaN 
values, but that isn't really a good solution for the long term.

All the best
Andreas


From rdmailings at duif.net  Mon Jun 26 06:38:51 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 26 Jun 2023 15:38:51 +0200
Subject: [QGIS-Developer] [QGIS-server] Messages:
 QNetworkDiskCache::prepare() unable to open temporary file
Message-ID: <824424f910ca85e0974ec307d443eaa6@duif.net>

Hi,

I'm testing a QGISserver setup in which the project is cascading a WMTS 
(MapProxy).

Performance is not so good... so I fiddled with

QGIS_SERVER_CACHE_DIRECTORY=/cache
and even with ??
QGIS_OPTIONS_PATH=/cache

where /cache is a mounted internal cache dir

Is see QGISserver write all the stuff in /cache which I know from QGIS 
(profile dir) itself:

# from within the container:
# ls /cache
bookmarks.xml  data8  fonts  gdal_pam  oauth2-cache  palettes  prepared  
qgis-auth.db  qgis.db  symbology-style.db

But I keep seeing a lot of messages in the logs:
QNetworkDiskCache::prepare() unable to open temporary file
QNetworkDiskCache::prepare() unable to open temporary file
...

So my question is, WHERE does Qt try to create the network cache...

Thanks,

Richard Duivenvoorde

From johannes.kroeger at wheregroup.com  Mon Jun 26 06:40:13 2023
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Mon, 26 Jun 2023 15:40:13 +0200
Subject: [QGIS-Developer] [QGIS-server] Messages:
 QNetworkDiskCache::prepare() unable to open temporary file
In-Reply-To: <824424f910ca85e0974ec307d443eaa6@duif.net>
References: <824424f910ca85e0974ec307d443eaa6@duif.net>
Message-ID: <b18643f8-4467-8e40-76fd-f271fde61287@wheregroup.com>

Try "strace -e file your_qgis_server_invocation", it will show you all 
file i/o

Cheers, Hannes

Am 26.06.23 um 15:38 schrieb Richard Duivenvoorde via QGIS-Developer:
> Hi,
>
> I'm testing a QGISserver setup in which the project is cascading a 
> WMTS (MapProxy).
>
> Performance is not so good... so I fiddled with
>
> QGIS_SERVER_CACHE_DIRECTORY=/cache
> and even with ??
> QGIS_OPTIONS_PATH=/cache
>
> where /cache is a mounted internal cache dir
>
> Is see QGISserver write all the stuff in /cache which I know from QGIS 
> (profile dir) itself:
>
> # from within the container:
> # ls /cache
> bookmarks.xml? data8? fonts? gdal_pam? oauth2-cache? palettes 
> prepared? qgis-auth.db? qgis.db? symbology-style.db
>
> But I keep seeing a lot of messages in the logs:
> QNetworkDiskCache::prepare() unable to open temporary file
> QNetworkDiskCache::prepare() unable to open temporary file
> ...
>
> So my question is, WHERE does Qt try to create the network cache...
>
> Thanks,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei der www.foss-academy.com
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------


From anitagraser at gmx.at  Mon Jun 26 11:36:33 2023
From: anitagraser at gmx.at (Anita Graser)
Date: Mon, 26 Jun 2023 18:36:33 +0000
Subject: [QGIS-Developer] 2023 QGIS Grant Proposals final results
Message-ID: <1687804389126.2856917609.1660313341@gmx.at>

Dear QGIS Community,

On behalf of the QGIS.ORG project, I'm extremely pleased to announce the winning proposals for our 2023 QGIS.ORG grant programme. Read all about the voting results here:

https://blog.qgis.org/2023/06/26/qgis-grant-programme-2023-results/

A number of interesting and useful proposals didn?t make it because of our limited budget; we encourage organizations to pick up one of their choices and sponsor it.

Regards,
Anita
-- 
Anita Graser
Home: http://anitagraser.com
Twitter: @underdarkgis
Mastodon: @underdarkgis at fosstodon.org 

From nyall.dawson at gmail.com  Wed Jun 28 16:00:00 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 29 Jun 2023 09:00:00 +1000
Subject: [QGIS-Developer] Adding a plugin collaborator
In-Reply-To: <28823467-59ef-9561-ff26-efac4b1d1fda@duif.net>
References: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
 <184555844ed0dcb57b0bc8f994dfd61e@duif.net>
 <CAB28AsgkZsAfqpmKX_DcV=_F5nfQ+1Pq3EiM9n_di54Pj+O0zw@mail.gmail.com>
 <28823467-59ef-9561-ff26-efac4b1d1fda@duif.net>
Message-ID: <CAB28Asjjnvzz57+oDT+0wMAhU--vUFMT_4jnL=E__uNiH_Lavw@mail.gmail.com>

On Mon, 26 Jun 2023 at 14:01, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> On 6/26/23 00:55, Nyall Dawson wrote:
> > Thanks Richard, I've found this setting now! (For other's reference it's under "Manage" - "Edit" - "Owners").
> >
> > It's a bit clunky unfortunately -- there's a list box with over 4000 entries and I need to safely select multiple entries from this ?...  I think I'll resort to some js console trickery to make sure I do it correctly!
>
> Yeah, you are right... it's was OK in the beginning of our plugins... or if you want to select just one, but in your case..
>
> This is the repo of the site: https://github.com/qgis/QGIS-Django/
>
> Feel free to add a Feature Request to easier filter or multi select that list.

In case it's useful for anyone else, here's the little script I used
to easily set a bunch of owners:

owners_input = document.getElementById('id_owners')
const users = ["some_user", "another_user", "another_person"];
for (var i = 0; i < owners_input.options.length; i++) {
    if ( users.includes(owners_input.options[i].text))
    {
      console.log(owners_input.options[i].text);
      owners_input.options[i].selected = true;
    }
    else
    {
      owners_input.options[i].selected = false;
    }
}

Nyall



>
> Regards,
>
> Richard

From johannes.kroeger at wheregroup.com  Thu Jun 29 01:35:53 2023
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Thu, 29 Jun 2023 10:35:53 +0200
Subject: [QGIS-Developer] Documentation of QGIS3.ini structure/schema?
Message-ID: <15fa5899-70ae-1e39-0679-dd40804694cf@wheregroup.com>

Hey guys,

I am trying to polish the Profile Manager plugin 
https://plugins.qgis.org/plugins/profile-manager/ and am having sliiight 
troubles with the QGIS3.ini structure. Looking at a naturally grown 
profile I found 5 different places in which configuration is stored for 
one single WFS connection, mostly redundantly and I wonder if this is 
documented somewhere?

Here is an example:

[connections]
ows\items\WFS\connections\items\foo\authcfg =
ows\items\wfs\connections\items\foo\dpi-mode = All
ows\items\wfs\connections\items\foo\http-header = @Variant(\0\0\0\b\0\0\0\0)
ows\items\wfs\connections\items\foo\ignore-axis-orientation = false
...
ows\items\wfs\connections\items\foo\version = auto

[qgis]
WFS\foo\authcfg=
...
connections-wfs\foo\dpiMode = All
connections-wfs\foo\ignoreAxisOrientation = false
...
connections\WFS\foo\authcfg =
connections\WFS\foo\password =
connections\WFS\foo\username =

I assume that this is from different versions of QGIS? When I created a 
new profile in 3.32 I only got lines in the [connections] section and 
they were all lowercase. With 3.16 I got entries under [qgis].

- Is the QGIS3.ini structure documented somewhere?
- Are changes between versions documented?
- Is there a way to find out which QGIS version a QGIS3.ini file was 
written with?
- Is the structure stable within point releases?
- How far does backwards compatibility go and which entries take 
precedence when they are referencing the same thing?

Cheers, Hannes

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei der www.foss-academy.com
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------


From rdmailings at duif.net  Thu Jun 29 02:23:46 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 29 Jun 2023 11:23:46 +0200
Subject: [QGIS-Developer] Documentation of QGIS3.ini structure/schema?
In-Reply-To: <15fa5899-70ae-1e39-0679-dd40804694cf@wheregroup.com>
References: <15fa5899-70ae-1e39-0679-dd40804694cf@wheregroup.com>
Message-ID: <336a7475-f087-dee7-d3a0-52bce6e964ac@duif.net>

Hi Hannes,

Not sure if it is documented, and not sure IF they should be at different places.

But one explanation, IF this is an old profile and you are running master/own compiled QGIS's, could be that a new Settings regime has been introduced recently, which changed the 'keys' of (almost all) settings. Denis can tell you the exact details.

It could be that you have multiple configurations, because of 'intermediate' and old settings... I do not think the new code cleans up old settings (but it SAVES them).

I've at a certain moment replaced/refreshed some of my profiles because of settings troubles...

Regards,

Richard Duivenvoorde

On 6/29/23 10:35, Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
> Hey guys,
> 
> I am trying to polish the Profile Manager plugin https://plugins.qgis.org/plugins/profile-manager/ and am having sliiight troubles with the QGIS3.ini structure. Looking at a naturally grown profile I found 5 different places in which configuration is stored for one single WFS connection, mostly redundantly and I wonder if this is documented somewhere?
> 
> Here is an example:
> 
> [connections]
> ows\items\WFS\connections\items\foo\authcfg =
> ows\items\wfs\connections\items\foo\dpi-mode = All
> ows\items\wfs\connections\items\foo\http-header = @Variant(\0\0\0\b\0\0\0\0)
> ows\items\wfs\connections\items\foo\ignore-axis-orientation = false
> ...
> ows\items\wfs\connections\items\foo\version = auto
> 
> [qgis]
> WFS\foo\authcfg=
> ...
> connections-wfs\foo\dpiMode = All
> connections-wfs\foo\ignoreAxisOrientation = false
> ...
> connections\WFS\foo\authcfg =
> connections\WFS\foo\password =
> connections\WFS\foo\username =
> 
> I assume that this is from different versions of QGIS? When I created a new profile in 3.32 I only got lines in the [connections] section and they were all lowercase. With 3.16 I got entries under [qgis].
> 
> - Is the QGIS3.ini structure documented somewhere?
> - Are changes between versions documented?
> - Is there a way to find out which QGIS version a QGIS3.ini file was written with?
> - Is the structure stable within point releases?
> - How far does backwards compatibility go and which entries take precedence when they are referencing the same thing?
> 
> Cheers, Hannes
> 


From rdmailings at duif.net  Thu Jun 29 02:31:03 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 29 Jun 2023 11:31:03 +0200
Subject: [QGIS-Developer] Adding a plugin collaborator
In-Reply-To: <CAB28Asjjnvzz57+oDT+0wMAhU--vUFMT_4jnL=E__uNiH_Lavw@mail.gmail.com>
References: <CAB28Asg507=hBxZ2hYMcmJMNnQdLCV2pAFHp0DGh4iN5pQer+Q@mail.gmail.com>
 <184555844ed0dcb57b0bc8f994dfd61e@duif.net>
 <CAB28AsgkZsAfqpmKX_DcV=_F5nfQ+1Pq3EiM9n_di54Pj+O0zw@mail.gmail.com>
 <28823467-59ef-9561-ff26-efac4b1d1fda@duif.net>
 <CAB28Asjjnvzz57+oDT+0wMAhU--vUFMT_4jnL=E__uNiH_Lavw@mail.gmail.com>
Message-ID: <c6bb4f63-9ddc-7671-7e7d-24f93d24a9c9@duif.net>

Thanks Nyall,

FYI I created an issue, in case some django/html/js guru comes up with a better idea: https://github.com/qgis/QGIS-Django/issues/289

Richard

On 6/29/23 01:00, Nyall Dawson wrote:
> On Mon, 26 Jun 2023 at 14:01, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>>
>> On 6/26/23 00:55, Nyall Dawson wrote:
>>> Thanks Richard, I've found this setting now! (For other's reference it's under "Manage" - "Edit" - "Owners").
>>>
>>> It's a bit clunky unfortunately -- there's a list box with over 4000 entries and I need to safely select multiple entries from this ?...  I think I'll resort to some js console trickery to make sure I do it correctly!
>>
>> Yeah, you are right... it's was OK in the beginning of our plugins... or if you want to select just one, but in your case..
>>
>> This is the repo of the site: https://github.com/qgis/QGIS-Django/
>>
>> Feel free to add a Feature Request to easier filter or multi select that list.
> 
> In case it's useful for anyone else, here's the little script I used
> to easily set a bunch of owners:
> 
> owners_input = document.getElementById('id_owners')
> const users = ["some_user", "another_user", "another_person"];
> for (var i = 0; i < owners_input.options.length; i++) {
>      if ( users.includes(owners_input.options[i].text))
>      {
>        console.log(owners_input.options[i].text);
>        owners_input.options[i].selected = true;
>      }
>      else
>      {
>        owners_input.options[i].selected = false;
>      }
> }
> 
> Nyall
> 
> 
> 
>>
>> Regards,
>>
>> Richard


From johannes.kroeger at wheregroup.com  Thu Jun 29 03:20:04 2023
From: johannes.kroeger at wheregroup.com (=?UTF-8?Q?Johannes_Kr=c3=b6ger_=28WhereGroup=29?=)
Date: Thu, 29 Jun 2023 12:20:04 +0200
Subject: [QGIS-Developer] Documentation of QGIS3.ini structure/schema?
In-Reply-To: <336a7475-f087-dee7-d3a0-52bce6e964ac@duif.net>
References: <15fa5899-70ae-1e39-0679-dd40804694cf@wheregroup.com>
 <336a7475-f087-dee7-d3a0-52bce6e964ac@duif.net>
Message-ID: <053f39f9-fed4-d11a-1449-e3f52587c779@wheregroup.com>

Cheers! Yeah, this example INI is an amalgations of 2-3 years of 
different QGIS versions.

I tested with a clean profile in 3.22 and even that single version added 
data in 4 different ways:

[connections]
ows\items\wfs\connections\items\foo
ows\items\WFS\connections\items\foo

[qgis]
connections-wfs\foo
connections\WFS


# 3.22 right after adding the connection

...

[connections]
ows\items\wfs\connections\items\foo\authcfg=
ows\items\wfs\connections\items\foo\ignore-axis-orientation=false
ows\items\wfs\connections\items\foo\invert-axis-orientation=false
ows\items\wfs\connections\items\foo\max-num-features=
ows\items\wfs\connections\items\foo\page-size=
ows\items\wfs\connections\items\foo\paging-enabled=true
ows\items\wfs\connections\items\foo\password=
ows\items\wfs\connections\items\foo\prefer-coordinates-for-wfs-T11=false
ows\items\wfs\connections\items\foo\url=https://inspire.brandenburg.de/services/cp_alkis_wfs
ows\items\wfs\connections\items\foo\username=
ows\items\wfs\connections\items\foo\version=auto
ows\items\wfs\connections\selected=foo

...

# 3.22 after closing QGIS

...

[connections]
ows\items\wfs\connections\items\foo\authcfg=
ows\items\wfs\connections\items\foo\ignore-axis-orientation=false
ows\items\wfs\connections\items\foo\invert-axis-orientation=false
ows\items\wfs\connections\items\foo\max-num-features=
ows\items\wfs\connections\items\foo\page-size=
ows\items\wfs\connections\items\foo\paging-enabled=true
ows\items\wfs\connections\items\foo\password=
ows\items\wfs\connections\items\foo\prefer-coordinates-for-wfs-T11=false
ows\items\wfs\connections\items\foo\url=https://inspire.brandenburg.de/services/cp_alkis_wfs
ows\items\wfs\connections\items\foo\username=
ows\items\wfs\connections\items\foo\version=auto
ows\items\wfs\connections\selected=foo

...

[qgis]
connections-wfs\foo\dpiMode=All
connections-wfs\foo\ignoreAxisOrientation=false
connections-wfs\foo\ignoreGetFeatureInfoURI=false
connections-wfs\foo\ignoreGetMapURI=false
connections-wfs\foo\invertAxisOrientation=false
connections-wfs\foo\maxnumfeatures=
connections-wfs\foo\pagesize=
connections-wfs\foo\pagingenabled=true
connections-wfs\foo\preferCoordinatesForWfsT11=false
connections-wfs\foo\reportedLayerExtents=false
connections-wfs\foo\smoothPixmapTransform=false
connections-wfs\foo\tilePixelRatio=Undefined
connections-wfs\foo\url=https://inspire.brandenburg.de/services/cp_alkis_wfs
connections-wfs\foo\version=auto
...
connections\WFS\foo\authcfg=
connections\WFS\foo\password=
connections\WFS\foo\username=

...

# 3.22 after re-opening and loading the layer once

...

[connections]
ows\items\WFS\connections\items\foo\authcfg=
ows\items\WFS\connections\items\foo\password=
ows\items\WFS\connections\items\foo\username=
ows\items\wfs\connections\items\foo\authcfg=
ows\items\wfs\connections\items\foo\dpi-mode=All
ows\items\wfs\connections\items\foo\http-header=@Variant(\0\0\0\b\0\0\0\0)
ows\items\wfs\connections\items\foo\ignore-axis-orientation=false
ows\items\wfs\connections\items\foo\ignore-get-feature-info-uri=false
ows\items\wfs\connections\items\foo\ignore-get-map-uri=false
ows\items\wfs\connections\items\foo\invert-axis-orientation=false
ows\items\wfs\connections\items\foo\max-num-features=
ows\items\wfs\connections\items\foo\page-size=
ows\items\wfs\connections\items\foo\paging-enabled=true
ows\items\wfs\connections\items\foo\password=
ows\items\wfs\connections\items\foo\prefer-coordinates-for-wfs-T11=false
ows\items\wfs\connections\items\foo\reported-layer-extents=false
ows\items\wfs\connections\items\foo\smooth-pixmap-transform=false
ows\items\wfs\connections\items\foo\tile-pixel-ratio=Undefined
ows\items\wfs\connections\items\foo\url=https://inspire.brandenburg.de/services/cp_alkis_wfs
ows\items\wfs\connections\items\foo\username=
ows\items\wfs\connections\items\foo\version=auto
ows\items\wfs\connections\selected=foo

...

[qgis]
< same as after closing >


Maybe these are all the possible variations (for WFS) that we would need 
to consider when trying to transfer connections between profiles with 
the plugin?

Cheers, Hannes

Am 29.06.23 um 11:23 schrieb Richard Duivenvoorde via QGIS-Developer:
> Hi Hannes,
>
> Not sure if it is documented, and not sure IF they should be at 
> different places.
>
> But one explanation, IF this is an old profile and you are running 
> master/own compiled QGIS's, could be that a new Settings regime has 
> been introduced recently, which changed the 'keys' of (almost all) 
> settings. Denis can tell you the exact details.
>
> It could be that you have multiple configurations, because of 
> 'intermediate' and old settings... I do not think the new code cleans 
> up old settings (but it SAVES them).
>
> I've at a certain moment replaced/refreshed some of my profiles 
> because of settings troubles...
>
> Regards,
>
> Richard Duivenvoorde
>
> On 6/29/23 10:35, Johannes Kr?ger (WhereGroup) via QGIS-Developer wrote:
>> Hey guys,
>>
>> I am trying to polish the Profile Manager plugin 
>> https://plugins.qgis.org/plugins/profile-manager/ and am having 
>> sliiight troubles with the QGIS3.ini structure. Looking at a 
>> naturally grown profile I found 5 different places in which 
>> configuration is stored for one single WFS connection, mostly 
>> redundantly and I wonder if this is documented somewhere?
>>
>> Here is an example:
>>
>> [connections]
>> ows\items\WFS\connections\items\foo\authcfg =
>> ows\items\wfs\connections\items\foo\dpi-mode = All
>> ows\items\wfs\connections\items\foo\http-header = 
>> @Variant(\0\0\0\b\0\0\0\0)
>> ows\items\wfs\connections\items\foo\ignore-axis-orientation = false
>> ...
>> ows\items\wfs\connections\items\foo\version = auto
>>
>> [qgis]
>> WFS\foo\authcfg=
>> ...
>> connections-wfs\foo\dpiMode = All
>> connections-wfs\foo\ignoreAxisOrientation = false
>> ...
>> connections\WFS\foo\authcfg =
>> connections\WFS\foo\password =
>> connections\WFS\foo\username =
>>
>> I assume that this is from different versions of QGIS? When I created 
>> a new profile in 3.32 I only got lines in the [connections] section 
>> and they were all lowercase. With 3.16 I got entries under [qgis].
>>
>> - Is the QGIS3.ini structure documented somewhere?
>> - Are changes between versions documented?
>> - Is there a way to find out which QGIS version a QGIS3.ini file was 
>> written with?
>> - Is the structure stable within point releases?
>> - How far does backwards compatibility go and which entries take 
>> precedence when they are referencing the same thing?
>>
>> Cheers, Hannes
>>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Johannes Kr?ger / GIS-Entwickler/-Berater

---------------------------------------------
Aufwind durch Wissen!
Web-Seminare und Online-Schulungen
bei der www.foss-academy.com
---------------------------------------------

WhereGroup GmbH
c/o KK03 GmbH
Lange Reihe 29
20099 Hamburg
Germany

Tel: +49 (0)228 / 90 90 38 - 36
Fax: +49 (0)228 / 90 90 38 - 11

johannes.kroeger at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
-------------------------------


From gab74 at libero.it  Thu Jun 29 06:49:32 2023
From: gab74 at libero.it (Gabriele Ascolese)
Date: Thu, 29 Jun 2023 15:49:32 +0200 (CEST)
Subject: [QGIS-Developer] Cannot Convert Coordinates Topocentric to
 Geocentric
Message-ID: <1953388222.1613470.1688046572371@mail1.libero.it>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20230629/15e15dc7/attachment-0001.htm>

