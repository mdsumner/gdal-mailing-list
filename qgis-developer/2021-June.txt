From dmarteau at 3liz.com  Tue Jun  1 05:03:22 2021
From: dmarteau at 3liz.com (David Marteau)
Date: Tue, 1 Jun 2021 14:03:22 +0200
Subject: [QGIS-Developer] Latest qgis release version not available on Debian
Message-ID: <db292c51-f713-cf17-d23e-ca22b1648031@3liz.com>

Hi,

It seems that debian packages ? for the latest release Qgis version 
(3.18.3 atm) are stucks to 3.18.1:


Result of `apt-cache policy qgis-server-common`

On Debian buster from from 'https://qgis.org/debian'

```
qgis-server-common:
 ? Installed: 1:3.18.1+15buster
 ? Candidate: 1:3.18.1+15buster
 ? Version table:
 ?*** 1:3.18.1+15buster 500
 ??????? 500 https://qgis.org/debian buster/main amd64 Packages
```

It's ok on Ubuntu 20.04 from 'https://qgis.org/ubuntu'

```
qgis-server-common:
 ? Installed: 1:3.18.2+32focal
 ? Candidate: 1:3.18.3+32focal
 ? Version table:
 ???? 1:3.18.3+32focal 500
 ??????? 500 https://qgis.org/ubuntu focal/main amd64 Packages
```

Is there any reason for that or is this a bug or did I missed something ?


David


From paul.wittle at dorsetcouncil.gov.uk  Tue Jun  1 07:12:04 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Tue, 1 Jun 2021 14:12:04 +0000
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <LO2P265MB3231EED7DE94A64F226AC99DC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <28e4163c-339f-fe5d-7097-3fce99b26af7@duif.net>
 <LO2P265MB323190AE8FD4F99F66DA0F7EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
 <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323173910C1FA7BA223C291FC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <dd844105-1f28-6253-fef3-39e5c2aa41ee@duif.net>
 <LO2P265MB3231EED7DE94A64F226AC99DC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <LO2P265MB323100CACD793DDD12DEB21AC13E9@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Hi,

After a short break I've started looking at this again now and I think I can confirm that I'm now able to update a project with PostGIS tables with no issue (i.e. they still work after the .write() command).

Unfortunately the same can not be said for the Oracle layers so I think there must be another path I need to set?

You mentioned you'd explicitly set the Oracle paths in something you did previously...is there an Oracle setting that should be set if running QGIS standalone?

Thanks again for all your help on this.
Paul

-----Original Message-----
From: Paul Wittle
Sent: 26 May 2021 11:58
To: rdmailings at duif.net
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: RE: [QGIS-Developer] QGIS standalone script examples (and Oracle)

Hi,

I think I've worked it out.

The initialisation of the authentication manager needs to be done before the project read command.

I had the logic near where I was adding a layer (i.e. after the opening of the project) but it needs to be initialised before the project is read. The result is that the original layers are now still valid.

I knew it would be obvious when I worked it out.

The only outstanding question is why the authenticationDatabasePath() Returns a path in the AppData\Roaming\python Folder instead of AppData\Roaming\QGIS despite my specifying the correct path in the .init() function?

Thank you again for all your help on this as I think I should be able to get it working now even if I do have to copy the relevant *.db files to the python folder.

Best Regards,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 26 May 2021 10:13
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS standalone script examples (and Oracle)

On 5/26/21 9:19 AM, Paul Wittle wrote:

> The result is that the existing PostGIS layer is still broken but the second instance (the new layer added by the script) is working. Very curious; perhaps I need to put in a loop that scans the layer list looking for database layers and explicitly resets the data source.
>
> I will also double check because the only other possibility may be that it is linked to the existing layers using the Authentication manager rather than a typed username and password in the project file.
>
> Can anyone else replicate this issue or is it just me?

Hi Paul,

IF you use the authentication manager, is it possible that your script cannot find the authentication db (or does not provide a valid password/wallet to open it?)?
https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/authentication.html

I tested by adding a db layer in my 'template' project.
1 one with basic auth username/password
2 one using the authentication manager

Although I do not wreck my testoutput project (it still loads all layers after running test.py), I do see the following (I'm using a debug build of QGIS) running my test script:

../src/providers/postgres/qgspostgresconn.cpp:1063 : (postgisVersion) [250ms] geos:3.9.0-CAPI-1.16.2 proj:7.2.1 static bool LibSecretKeyring::findPassword(const QString&, const QString&, QKeychain::JobPrivate*)
../src/core/auth/qgsauthmanager.cpp:1005 : (configAuthMethod) [53ms] No config auth method found in database for authcfg: 7t8kl0t
../src/core/qgsdatasourceuri.cpp:526 : (connectionInfo) [0ms] Data source URI FAILED to update via loading configuration ID '7t8kl0t'
../src/core/qgsmessagelog.cpp:29 : (logMessage) [1ms] 2021-05-26T11:04:11 PostGIS[1] Connection to database failed
fe_sendauth: no password supplied

../src/core/vector/qgsvectorlayer.cpp:1565 : (readXml) [0ms] Could not set data provider for layer dbname='gis' host=localhost port=5432 sslmode=disable authcfg=7t8kl0t key='id' srid=28992 type=MultiPolygon checkPrimaryKeyUnicity='0' table="public"."prov" (geom)
../src/core/project/qgsproject.cpp:1233 : (addLayer) [0ms] Unable to load vector layer
../src/core/project/qgsproject.cpp:1578 : (readProjectFile) [39ms] Unable to get map layers from project file.
../src/core/project/qgsproject.cpp:1582 : (readProjectFile) [0ms] there are 1 broken layers
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-05-26T11:04:11 [1] 1 unavailable layers found:
../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] 2021-05-26T11:04:11 [1]  * dbname='gis' host=localhost port=5432 sslmode=disable authcfg=7t8kl0t key='id' srid=28992 type=MultiPolygon checkPrimaryKeyUnicity='0' table="public"."prov" (geom)
../src/providers/postgres/qgspostgresconn.cpp:1063 : (postgisVersion) [62ms] geos:3.9.0-CAPI-1.16.2 proj:7.2.1

As said: my newly (written) project is still valid, are you overwriting the old qgs file?

Richard
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From ricardo.garcia.silva at gmail.com  Tue Jun  1 07:43:08 2021
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Tue, 1 Jun 2021 15:43:08 +0100
Subject: [QGIS-Developer] QGIS API - recent changes to QgsSettings
Message-ID: <CAFcNcQbuy3iuQVHN1yktcmtVw1YhU-TefarmrwbdbzXv5rQZTw@mail.gmail.com>

Hi all

I see that settings management in QGIS seems to be changing for the
upcoming 3.20 release. I got this clue when consulting the online API docs
for master and then realizing there is no QgsSettings class in there
anymore.
I then searched the commit history on github and found some commits dating
from April, which I guess are relevant here:

https://github.com/qgis/QGIS/commits?after=415d4831b05cb3821ccbefe0b67307035bc0fb75+34&author=domi4484

Is there some place where I can read about these changes in order to gain
some more context on them?

I'm interested in knowing how I can support both QGIS LTR and the upcoming
3.20 on plugins. Is QgsSettings gone forever from 3.20 on or is this going
to be backwards compatible for a while? If not, what is going to be the new
approach for settings management?

Thanks in advance

-- 
___________________________ ___ __
Ricardo Garcia Silva
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210601/f3fb2a15/attachment.html>

From rdmailings at duif.net  Tue Jun  1 09:26:02 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 1 Jun 2021 18:26:02 +0200
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <LO2P265MB323100CACD793DDD12DEB21AC13E9@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
 <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323173910C1FA7BA223C291FC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <dd844105-1f28-6253-fef3-39e5c2aa41ee@duif.net>
 <LO2P265MB3231EED7DE94A64F226AC99DC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323100CACD793DDD12DEB21AC13E9@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <f5586493-8a40-64ef-0203-83e71352d50c@duif.net>

On 6/1/21 4:12 PM, Paul Wittle wrote:
> You mentioned you'd explicitly set the Oracle paths in something you did previously...is there an Oracle setting that should be set if running QGIS standalone?

QGIS uses the Oracle OCI library to connect to an Oracle Database.

When you install QGIS on Linux you have to add/compile this separately and then compile Linux WITH oracle support.
To be able to use QGIS then you should make sure that you have the Oracle lib in your 'library path'.
AND so if you run a standalone script, it should also be available.

The Windows installers though... (for what I know) already contain the driver (if you use the osgeo4w installer you can check Oracle-Provider/driver separately). Anyway: IF you are on Windows, and use QGIS AND you can view Oracle layers, then you should be good to go: there will be some oracle dll on you system...
On startup of QGIS on Windows, all kind of paths are set, but you should find out from the bat files in the install what those are.

Also: IF you can run the script within QGIS itself (in console) (and not outside) it could be a sign that your script cannot find the oracle libs...  Go through the bat files then to see what paths are set.
BUT all this is guessing, I cannot check this myself...

Regards,

Richard

From paul.wittle at dorsetcouncil.gov.uk  Tue Jun  1 09:48:14 2021
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Tue, 1 Jun 2021 16:48:14 +0000
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <f5586493-8a40-64ef-0203-83e71352d50c@duif.net>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <77d5086d-f13e-d8db-c90b-63f0623400ba@duif.net>
 <LO2P265MB32315C2ADB38C51BBBC8AFA3C1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
 <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323173910C1FA7BA223C291FC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <dd844105-1f28-6253-fef3-39e5c2aa41ee@duif.net>
 <LO2P265MB3231EED7DE94A64F226AC99DC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323100CACD793DDD12DEB21AC13E9@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <f5586493-8a40-64ef-0203-83e71352d50c@duif.net>
Message-ID: <LO2P265MB3231C6ACD60601B3B9318ACDC13E9@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>

Thanks,

I might have a look but to be honest there seem to be quite a few ways things can fail.

I have now switched to a template that uses WFS / WMS layers only and they all load accept for a WFS layer using an authentication manager password; others using tokens are fine.

I've checked that the authentication manager is now opening early enough and contains the relevant authcfg ID, which it does, but still it loses the source for that layer as well.

Is there a way to load a project in QGIS and return a list of invalid layers?

I'm assuming that what is happening is that it is loading the project but because it is in Python there is no 'handle bad layers' dialogue as there is in the main GUI.

It would be helpful if that function was available so I could do something like this:

Read Project
    = list of bad layers
Check list, if greater than 0 then handle bad layers
Do stuff
Save project

However I suspect it will be quicker to just switch the method of my WFS layer to match the ones that work.

Thanks,
Paul



-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 01 June 2021 17:26
To: Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
Cc: qgis-dev <Qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] QGIS standalone script examples (and Oracle)

On 6/1/21 4:12 PM, Paul Wittle wrote:
> You mentioned you'd explicitly set the Oracle paths in something you did previously...is there an Oracle setting that should be set if running QGIS standalone?

QGIS uses the Oracle OCI library to connect to an Oracle Database.

When you install QGIS on Linux you have to add/compile this separately and then compile Linux WITH oracle support.
To be able to use QGIS then you should make sure that you have the Oracle lib in your 'library path'.
AND so if you run a standalone script, it should also be available.

The Windows installers though... (for what I know) already contain the driver (if you use the osgeo4w installer you can check Oracle-Provider/driver separately). Anyway: IF you are on Windows, and use QGIS AND you can view Oracle layers, then you should be good to go: there will be some oracle dll on you system...
On startup of QGIS on Windows, all kind of paths are set, but you should find out from the bat files in the install what those are.

Also: IF you can run the script within QGIS itself (in console) (and not outside) it could be a sign that your script cannot find the oracle libs...  Go through the bat files then to see what paths are set.
BUT all this is guessing, I cannot check this myself...

Regards,

Richard
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/data-protection

From jef at norbit.de  Tue Jun  1 15:56:07 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Wed, 2 Jun 2021 00:56:07 +0200
Subject: [QGIS-Developer] Latest qgis release version not available on
 Debian
In-Reply-To: <db292c51-f713-cf17-d23e-ca22b1648031@3liz.com>
References: <db292c51-f713-cf17-d23e-ca22b1648031@3liz.com>
Message-ID: <20210601225607.xmgojpmcjtrx4ebd@norbit.de>

Hi David,

On Tue, 01. Jun 2021 at 14:03:22 +0200, David Marteau wrote:
> Result of `apt-cache policy qgis-server-common`
> 
> On Debian buster from from 'https://qgis.org/debian'
> 
> ```
> qgis-server-common:
> ? Installed: 1:3.18.1+15buster
> ? Candidate: 1:3.18.1+15buster
> ? Version table:
> ?*** 1:3.18.1+15buster 500
> ??????? 500 https://qgis.org/debian buster/main amd64 Packages
> ```

Now:

```
qgis-server-common:
  Installed: (none)
  Candidate: 1:3.18.3+15buster-1
  Version table:
     1:3.18.3+15buster-1 500
        500 https://qgis.org/debian buster/main amd64 Packages
```

buster's GDAL is too old for master, but not 3.18 - so I should have skipped
builds for >3.18 and not >=3.18?


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210602/ae00613e/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210602/ae00613e/attachment.ksh>

From rdmailings at duif.net  Wed Jun  2 00:02:12 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 2 Jun 2021 09:02:12 +0200
Subject: [QGIS-Developer] QGIS standalone script examples (and Oracle)
In-Reply-To: <LO2P265MB3231C6ACD60601B3B9318ACDC13E9@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
References: <LO2P265MB323149AE15C9AA468D43CC64C1279@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <aae61c33-78f8-e634-9dec-78ae60e1e780@duif.net>
 <LO2P265MB3231F5BF1BB80DBE9C8F909EC1269@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <4edc373c-d655-68e5-d545-93c1080302ce@duif.net>
 <LO2P265MB3231CD87853C3EC63AB4969BC1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB32312F78284595F318ED8399C1259@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <21e6d4d0-d238-6ede-4ca3-77606db12447@duif.net>
 <LO2P265MB32312A89E856B324C8065BF9C1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323173910C1FA7BA223C291FC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <dd844105-1f28-6253-fef3-39e5c2aa41ee@duif.net>
 <LO2P265MB3231EED7DE94A64F226AC99DC1249@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <LO2P265MB323100CACD793DDD12DEB21AC13E9@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
 <f5586493-8a40-64ef-0203-83e71352d50c@duif.net>
 <LO2P265MB3231C6ACD60601B3B9318ACDC13E9@LO2P265MB3231.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <fcb72b2d-b4d5-9647-1b84-6f8910b3b47d@duif.net>

On 6/1/21 6:48 PM, Paul Wittle wrote:
> Thanks,
> 
> I might have a look but to be honest there seem to be quite a few ways things can fail.
> 
> I have now switched to a template that uses WFS / WMS layers only and they all load accept for a WFS layer using an authentication manager password; others using tokens are fine.
> 
> I've checked that the authentication manager is now opening early enough and contains the relevant authcfg ID, which it does, but still it loses the source for that layer as well.
> 
> Is there a way to load a project in QGIS and return a list of invalid layers?
> 
> I'm assuming that what is happening is that it is loading the project but because it is in Python there is no 'handle bad layers' dialogue as there is in the main GUI.
> 
> It would be helpful if that function was available so I could do something like this:
> 
> Read Project
>     = list of bad layers
> Check list, if greater than 0 then handle bad layers
> Do stuff
> Save project

I think you can use this in your script?

layers = QgsProject.instance().mapLayers()
# layers is dict name:layer
for name in layers:
  print(f'Layer "{name}" isValid = {layers[name].isValid()}')

see https://qgis.org/pyqgis/master/core/QgsMapLayer.html?#qgis.core.QgsMapLayer.isValid

Another option: maybe you can install nightly builds of QGIS on windows:
https://qgis.org/en/site/forusers/alldownloads.html#id6
and then use the 'DebugView' log viewer to see the messages others see on linux
(see http://osgeo-org.1560.x6.nabble.com/How-to-see-log-debug-messages-in-Osgeo4W-installer-qgis-dev-td5047542.html but no need to install via osgeo4w anymore as we have a nightly now with debug info)

Regards,

Richard

From damiano at opengis.ch  Wed Jun  2 00:51:39 2021
From: damiano at opengis.ch (Damiano Lombardi)
Date: Wed, 2 Jun 2021 09:51:39 +0200
Subject: [QGIS-Developer] QGIS API - recent changes to QgsSettings
In-Reply-To: <CAFcNcQbuy3iuQVHN1yktcmtVw1YhU-TefarmrwbdbzXv5rQZTw@mail.gmail.com>
References: <CAFcNcQbuy3iuQVHN1yktcmtVw1YhU-TefarmrwbdbzXv5rQZTw@mail.gmail.com>
Message-ID: <CAAFMTT5fKtjEtiO8R9pcfhWVN8Kj0fvrz9mn_ZJ9oCy1Xv+SAg@mail.gmail.com>

Hi Ricardo,

To get some background you can read this QEP and resulting pull requests:
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/124
https://github.com/qgis/QGIS/pull/42597
https://github.com/qgis/QGIS/pull/42860
https://github.com/qgis/QGIS/pull/42954

Resumed shortly, there is a new preferred way of defining and using
settings with the QgsSettingsEntry classes.
QgsSettingsEntry internally uses QgsSettings and only a part of the QGIS
codebase was ported to the new way. This means QgsSettings will stay
available for now.

If your plugin must be compatible with 3.16/3.18 you will have to stay with
QgsSettings.

Regards
Damiano

On Tue, Jun 1, 2021 at 4:43 PM Ricardo Filipe Soares Garcia da <
ricardo.garcia.silva at gmail.com> wrote:

> Hi all
>
> I see that settings management in QGIS seems to be changing for the
> upcoming 3.20 release. I got this clue when consulting the online API docs
> for master and then realizing there is no QgsSettings class in there
> anymore.
> I then searched the commit history on github and found some commits dating
> from April, which I guess are relevant here:
>
>
> https://github.com/qgis/QGIS/commits?after=415d4831b05cb3821ccbefe0b67307035bc0fb75+34&author=domi4484
>
> Is there some place where I can read about these changes in order to gain
> some more context on them?
>
> I'm interested in knowing how I can support both QGIS LTR and the upcoming
> 3.20 on plugins. Is QgsSettings gone forever from 3.20 on or is this going
> to be backwards compatible for a while? If not, what is going to be the new
> approach for settings management?
>
> Thanks in advance
>
> --
> ___________________________ ___ __
> Ricardo Garcia Silva
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210602/25f71096/attachment.html>

From denis.rouzaud at gmail.com  Wed Jun  2 01:09:33 2021
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Wed, 2 Jun 2021 10:09:33 +0200
Subject: [QGIS-Developer] QGIS API - recent changes to QgsSettings
In-Reply-To: <CAFcNcQbuy3iuQVHN1yktcmtVw1YhU-TefarmrwbdbzXv5rQZTw@mail.gmail.com>
References: <CAFcNcQbuy3iuQVHN1yktcmtVw1YhU-TefarmrwbdbzXv5rQZTw@mail.gmail.com>
Message-ID: <CAMtsY+Z3_jRTcckWGkLn3pfHB4Fjia6Fhnp7YOQOD88vv=1iww@mail.gmail.com>

Le mar. 1 juin 2021 ? 16:43, Ricardo Filipe Soares Garcia da <
ricardo.garcia.silva at gmail.com> a ?crit :

> Hi all
>
> I see that settings management in QGIS seems to be changing for the
> upcoming 3.20 release. I got this clue when consulting the online API docs
> for master and then realizing there is no QgsSettings class in there
> anymore.
>

To complete what Damiano wrote, QgsSettings didn't disappear:
https://qgis.org/pyqgis/master/core/QgsSettings.html



> I then searched the commit history on github and found some commits dating
> from April, which I guess are relevant here:
>
>
> https://github.com/qgis/QGIS/commits?after=415d4831b05cb3821ccbefe0b67307035bc0fb75+34&author=domi4484
>
> Is there some place where I can read about these changes in order to gain
> some more context on them?
>
> I'm interested in knowing how I can support both QGIS LTR and the upcoming
> 3.20 on plugins. Is QgsSettings gone forever from 3.20 on or is this going
> to be backwards compatible for a while? If not, what is going to be the new
> approach for settings management?
>
> Thanks in advance
>
> --
> ___________________________ ___ __
> Ricardo Garcia Silva
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210602/1caf27fc/attachment.html>

From ricardo.garcia.silva at gmail.com  Wed Jun  2 01:50:30 2021
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Wed, 2 Jun 2021 09:50:30 +0100
Subject: [QGIS-Developer] QGIS API - recent changes to QgsSettings
In-Reply-To: <CAMtsY+Z3_jRTcckWGkLn3pfHB4Fjia6Fhnp7YOQOD88vv=1iww@mail.gmail.com>
References: <CAFcNcQbuy3iuQVHN1yktcmtVw1YhU-TefarmrwbdbzXv5rQZTw@mail.gmail.com>
 <CAMtsY+Z3_jRTcckWGkLn3pfHB4Fjia6Fhnp7YOQOD88vv=1iww@mail.gmail.com>
Message-ID: <CAFcNcQb6yysfXuk7WufiskRC+C_TmVuH0b_uOwUUkpnN+S=nxA@mail.gmail.com>

Thanks for the feedback.

I've glanced through the QEP and it seems nice. I'll check it out with some
more depth in the coming days.

As for the missing QgsSettings, I must admit I prefer to look at the C++
API docs instead of the Python ones - a bad habit I got from the olden days
;) But now I see that it is there and I was the one looking at the wrong
place.

Cheers

Denis Rouzaud <denis.rouzaud at gmail.com> escreveu no dia quarta, 2/06/2021
?(s) 09:09:

>
>
> Le mar. 1 juin 2021 ? 16:43, Ricardo Filipe Soares Garcia da <
> ricardo.garcia.silva at gmail.com> a ?crit :
>
>> Hi all
>>
>> I see that settings management in QGIS seems to be changing for the
>> upcoming 3.20 release. I got this clue when consulting the online API docs
>> for master and then realizing there is no QgsSettings class in there
>> anymore.
>>
>
> To complete what Damiano wrote, QgsSettings didn't disappear:
> https://qgis.org/pyqgis/master/core/QgsSettings.html
>
>
>
>> I then searched the commit history on github and found some commits
>> dating from April, which I guess are relevant here:
>>
>>
>> https://github.com/qgis/QGIS/commits?after=415d4831b05cb3821ccbefe0b67307035bc0fb75+34&author=domi4484
>>
>> Is there some place where I can read about these changes in order to gain
>> some more context on them?
>>
>> I'm interested in knowing how I can support both QGIS LTR and the
>> upcoming 3.20 on plugins. Is QgsSettings gone forever from 3.20 on or is
>> this going to be backwards compatible for a while? If not, what is going to
>> be the new approach for settings management?
>>
>> Thanks in advance
>>
>> --
>> ___________________________ ___ __
>> Ricardo Garcia Silva
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>

-- 
___________________________ ___ __
Ricardo Garcia Silva
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210602/e1fe0cb5/attachment-0001.html>

From francesco.bursi at hotmail.it  Wed Jun  2 05:20:40 2021
From: francesco.bursi at hotmail.it (Francesco Bursi)
Date: Wed, 2 Jun 2021 12:20:40 +0000
Subject: [QGIS-Developer] R: Google summer of code: On-the-fly raster
 calculator
In-Reply-To: <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
References: <CAC2XbFd7F91siJjK=YOXKCkw_7MUUcWB8Vn6pRtDfQPO6Lvwvg@mail.gmail.com>,
 <CAC_qv=qA7v5afDExQsJu580Uy7oJixLsLhbO0G4Wka_kEQHQgw@mail.gmail.com>,
 <VI1P190MB0381D37B27DA7A581122606F802C9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>
Message-ID: <VI1P190MB03810BEDF6851BF314DFF496803D9@VI1P190MB0381.EURP190.PROD.OUTLOOK.COM>

Hi again,

I just only want to share with you the proposal [1] where I update the 2. Project Idea thanks to your feedback and to the help of the mentors.
On wiki.osgeo.org you will find the page for the project [2], that will be update weekly.

Thank you again and of c

[1] https://docs.google.com/document/d/1u8L_L1IJjGCZ3d8Vq8duxHbsHZeyzwqOe3tXa1JcKbs/edit?usp=sharing
[2] https://wiki.osgeo.org/wiki/A_new_render_type_On_the_fly_Raster_Calculator_for_QGIS

Best Regards,
Francesco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210602/144f35d0/attachment.html>

From vcloarec at gmail.com  Wed Jun  2 10:36:23 2021
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Wed, 2 Jun 2021 13:36:23 -0400
Subject: [QGIS-Developer] QEP 228: Mesh layer edition
Message-ID: <CAHaTM5UVuqoUULaKTCHHo5xZ+5Eoi3YkCJTRpJa9x2dmnLrJKw@mail.gmail.com>

Hello everyone,

It is a pleasure to present the QEP 228 introducing mesh layer edition:
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/228

You are very welcome for discussions and comments on the dedicated QEP page.

Vincent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210602/3933ccca/attachment.html>

From adenaculture at gmail.com  Fri Jun  4 07:01:26 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 4 Jun 2021 14:01:26 +0000
Subject: [QGIS-Developer] Earth, Sun, Moon & Planets Plugin
Message-ID: <CABPxTTqjuT=QtRKgSDwiN7wYysFUdazscp42Mi6=OWOGemyF+w@mail.gmail.com>

I want to give you a heads up that I am working on a plugin to display the
position of the sun and moon at their zenith (directly overhead) as well as
the day/night boundary for a particular date and time.  I could easily
include the planets as well. So far the plugin can display the region of
civil twilight, nautical twilight, astronomical twilight, and night. This
is what I have so far. You can see the sun, moon, and day/night boundaries.
The plugin automatically styles it as shown and the algorithms are
processing algorithms.

[image: earthsunmoon.jpg]

My next step will be to have an interactive interface that will display the
above but with a 24 hour time slider that will dynamically change these
plots as the time slider is moved. Also the ability to click on the map and
have it display information about sunrise, sunset dusk, altitude and
azimuth for both the sun and moon at that location. I may have it also
display information about the equinoxe, and solstices for the year.

I am using the python library Skyfield which bases all its calculations on
the JPL ephemeris data so it is highly accurate. The challenge is that
Skyfield uses the library sgp4 which seems to be platform dependent. If
there is enough interest then I will see if the QGIS team would be willing
to include them with the QGIS distribution. There is one large file that
the user would also need to download which is the JPL ephemeris. The one I
am using is 100 mb, but it also includes the ephemeris for all the planets
as well with a large time span in the past and future.

I am interested in how much interest there is in the QGIS community for
these capabilities. I should have a plugin demo in several weeks for anyone
who wants to test it.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210604/e6720e2a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: earthsunmoon.jpg
Type: image/jpeg
Size: 39728 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210604/e6720e2a/attachment-0001.jpg>

From tim at kartoza.com  Sat Jun  5 10:04:30 2021
From: tim at kartoza.com (Tim Sutton)
Date: Sat, 5 Jun 2021 18:04:30 +0100
Subject: [QGIS-Developer] Earth, Sun, Moon & Planets Plugin
In-Reply-To: <CABPxTTqjuT=QtRKgSDwiN7wYysFUdazscp42Mi6=OWOGemyF+w@mail.gmail.com>
References: <CABPxTTqjuT=QtRKgSDwiN7wYysFUdazscp42Mi6=OWOGemyF+w@mail.gmail.com>
Message-ID: <CAES-DZRH5Vwq=9AeyHdNoxNbwuoTsR9JaKJY=k-jpjiCNKbxoQ@mail.gmail.com>

Hi

Wow that looks beautiful! A couple of thoughts:

1) Rather than implementing your own slider logic I wonder if you could
hook in to the temporal controller?
2) For platform specific components the normal practice is to a)
communicate with the plugins reviewers about why this is needed so that
they don't pre-emptively reject your plugin and b) normally pull down the
platform specific components as a post install step. I expect you will get
some resistance to adding a new dependency to QGIS core unless that
dependency is broadly useful, but you may be able to convince Jurgen and
Peter to bundle it into the Windows and macOS installers respectively.
3) For that 100mb blob, similar to our discussion on the timezone work you
were doing, the preferred approach would be to fetch it as a post-install
download the first time you use the plugin.

Thanks for making such interesting plugins!

Regards

Tim

On Fri, Jun 4, 2021 at 3:01 PM C Hamilton <adenaculture at gmail.com> wrote:

> I want to give you a heads up that I am working on a plugin to display the
> position of the sun and moon at their zenith (directly overhead) as well as
> the day/night boundary for a particular date and time.  I could easily
> include the planets as well. So far the plugin can display the region of
> civil twilight, nautical twilight, astronomical twilight, and night. This
> is what I have so far. You can see the sun, moon, and day/night boundaries.
> The plugin automatically styles it as shown and the algorithms are
> processing algorithms.
>
> [image: earthsunmoon.jpg]
>
> My next step will be to have an interactive interface that will display
> the above but with a 24 hour time slider that will dynamically change these
> plots as the time slider is moved. Also the ability to click on the map and
> have it display information about sunrise, sunset dusk, altitude and
> azimuth for both the sun and moon at that location. I may have it also
> display information about the equinoxe, and solstices for the year.
>
> I am using the python library Skyfield which bases all its calculations on
> the JPL ephemeris data so it is highly accurate. The challenge is that
> Skyfield uses the library sgp4 which seems to be platform dependent. If
> there is enough interest then I will see if the QGIS team would be willing
> to include them with the QGIS distribution. There is one large file that
> the user would also need to download which is the JPL ephemeris. The one I
> am using is 100 mb, but it also includes the ephemeris for all the planets
> as well with a large time span in the past and future.
>
> I am interested in how much interest there is in the QGIS community for
> these capabilities. I should have a plugin demo in several weeks for anyone
> who wants to test it.
>
> Thanks,
>
> Calvin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210605/cbbf0bcf/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: earthsunmoon.jpg
Type: image/jpeg
Size: 39728 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210605/cbbf0bcf/attachment-0001.jpg>

From tim at kartoza.com  Sat Jun  5 10:34:28 2021
From: tim at kartoza.com (Tim Sutton)
Date: Sat, 5 Jun 2021 18:34:28 +0100
Subject: [QGIS-Developer] It's time to contribute to the Changelog for QGIS
 3.20!
Message-ID: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>

Hi All

The release of QGIS 3.20 is scheduled for 2021-06-18 12:00:00 UTC (just
under two weeks). Charles Dixon-Paver has been doing an awesome job pulling
in new features into the changelog. Thank you also to the developers who
have been helping to make sure their PR's are nicely documented when they
are harvested by the changelog app.

If you are a user looking to contribute, we would really appreciate your
help. Simply read through the changelog management page at:

https://changelog.qgis.org/en/qgis/version/3.20/

If you find anything that is poorly explained, submit a revision to that
entry either by contacting Charles or myself (charles at kartoza.com /
tim at kartoza.com) with your revised text / images, or enrolling on the
platform and asking us to give you edit access if you wish to directly make
edits yourself.

If you want more context on how the changelog process works, we have
detailed notes here:

https://github.com/qgis/QGIS/wiki/Changelog-Workflows

See especially the last section here if you want to just make 'drive by'
contributions:

https://github.com/qgis/QGIS/wiki/Changelog-Workflows#get-involved

Regards

Tim

-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210605/5004d18a/attachment.html>

From jakob at lanstorp.com  Mon Jun  7 00:36:43 2021
From: jakob at lanstorp.com (Jakob)
Date: Mon, 7 Jun 2021 00:36:43 -0700 (MST)
Subject: [QGIS-Developer] It's time to contribute to the Changelog for
 QGIS 3.20!
In-Reply-To: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
References: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
Message-ID: <1623051403756-0.post@n6.nabble.com>

Hello Tim et. al.

I think the changelog is pretty good explained and visualized. The use of
animation is a great help in some of the entries. Even though I use to live
in Odense, after reading the changelog a better name than QGIS 3.20 Odense
might be QGIS 3.20 Nyall Dawson.

;)
Jakob



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From uclaros at gmail.com  Mon Jun  7 07:16:37 2021
From: uclaros at gmail.com (uclaros)
Date: Mon, 7 Jun 2021 07:16:37 -0700 (MST)
Subject: [QGIS-Developer] It's time to contribute to the Changelog for
 QGIS 3.20!
In-Reply-To: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
References: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
Message-ID: <1623075397271-0.post@n6.nabble.com>

Hi Tim,
https://github.com/qgis/QGIS/pull/42250 could be added to the changelog, it
missed the changelog tags.

There's also a typo on the category 's/Digitising/Digitizing/'

Best regards,
Stefanos




--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From lauri.kajan at gmail.com  Tue Jun  8 00:33:06 2021
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Tue, 8 Jun 2021 10:33:06 +0300
Subject: [QGIS-Developer] Issues with plugin development environment on new
 osgeo4w QGIS
Message-ID: <CAKWoFM+fDry2V1h-wSyq+mBO6mcfNxPdrKgJ90EG6EWkRSSxeQ@mail.gmail.com>

Hi all!

When developing qgis plugins I have usually created a python virtual
environment for each plugin project in which I have installed all the
necessary linting, formatting and testing tools.

Now I'm facing issues with new/next gen/testing osgeo4w based QGIS installs
that are using python 3.9. I have installed `pre-commit` to my venv but it
cannot run because it needs sqlite3 and it cannot be imported on the
virtual environment. ImportError is raised saying that dlls cannot be
found. I think that must be because Python changed the way DLLs are loaded
on py38. Those are not loaded any more from PATH directories. Dll search
paths are fixed in qgis.__init__.py but of course pre-commit is not aware
that before importing any libraries one should import qgis first.

I have created the virtual environment with command `python-qgis.bat -m
venv --system-site-packages env`. That is using python.exe from
apps/Python39/ and not from bin/. Therefore python doesn't find dlls from
bin/.
Is there some other way to make virtual env aware of dlls in the
osgeo4w/bin/ folder?

Does this way of using a virtual environment during development sound
reasonable anyhow?
What is your way of developing plugins?


Thanks,

-Lauri
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210608/bc1f3601/attachment.html>

From delazj at gmail.com  Tue Jun  8 08:06:31 2021
From: delazj at gmail.com (DelazJ)
Date: Tue, 8 Jun 2021 17:06:31 +0200
Subject: [QGIS-Developer] QGIS-Documentation fails to build
In-Reply-To: <d5a528a8-1f2a-d98f-ab3a-867df01dbe93@gmail.com>
References: <CAECJsSpVuRkS-ZVz72Z0uVwZP0w54YsV0ohLS-KfgKuj3mC4tg@mail.gmail.com>
 <CAL5Q6736oDiLZX0ahKEcmUYK3zx3feW=YbFRybYPjdmZ+_MkNw@mail.gmail.com>
 <CAECJsSpo0Z6p6HrCjuU4m4va7+qkxomFNv55J2b6CBD5Trt0Mw@mail.gmail.com>
 <d5a528a8-1f2a-d98f-ab3a-867df01dbe93@gmail.com>
Message-ID: <CAECJsSp0s-8_sKeqEciu_Sn_yB-Z1Lxjj5h934TkqNE-USwqtg@mail.gmail.com>

Hi devs,
still me looking for help to fix the QGIS-Documentation doctest workflow
taking hours and getting canceled
https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml

Thanks,
Harrissou

Le mar. 1 juin 2021 ? 08:23, Delaz J <delazj at gmail.com> a ?crit :

> Hi,
>
> The doctest is again failing, actually aborted by GitHub after 6 hours (it
> used to take <5mn). Began yesterday.
>
> From what I can see, it's struggling to connect and download to the qgis
> docker image. See
> https://github.com/qgis/QGIS-Documentation/runs/2715733455?check_suite_focus=true
> vs
> https://github.com/qgis/QGIS-Documentation/runs/2709502529?check_suite_focus=true
>
> Any help appreciated.
>
> Thanks,
>
> Harrissou
> Le 28/05/2021 ? 11:03, DelazJ a ?crit :
>
> Hi,
> Thanks Alessandro. Fixed now.
>
> Harrissou
>
> Le mer. 26 mai 2021 ? 15:48, Alessandro Pasotti <apasotti at gmail.com> a
> ?crit :
>
>>
>> It has been moved to the parent class QgsMapLayer
>>
>> On Wed, May 26, 2021 at 3:32 PM DelazJ <delazj at gmail.com> wrote:
>>
>>> Hi devs,
>>>
>>> QGIS-Documentation build test is failing due to "WARNING: py:meth
>>> reference target not found: qgis.core.QgsVectorLayer.setDataSource" [0]
>>> It looks like the QgsVectorLayer.setDataSource method is no longer
>>> available in master. Anyone knows what is the replacement?
>>>
>>> Thanks,
>>> Harrissou
>>>
>>> [0]
>>> https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>> --
>> Alessandro Pasotti
>> QCooperative:  www.qcooperative.net
>> ItOpen:   www.itopen.it
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210608/9af5ee91/attachment.html>

From apasotti at gmail.com  Tue Jun  8 09:58:25 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 8 Jun 2021 18:58:25 +0200
Subject: [QGIS-Developer] QGIS-Documentation fails to build
In-Reply-To: <CAECJsSp0s-8_sKeqEciu_Sn_yB-Z1Lxjj5h934TkqNE-USwqtg@mail.gmail.com>
References: <CAECJsSpVuRkS-ZVz72Z0uVwZP0w54YsV0ohLS-KfgKuj3mC4tg@mail.gmail.com>
 <CAL5Q6736oDiLZX0ahKEcmUYK3zx3feW=YbFRybYPjdmZ+_MkNw@mail.gmail.com>
 <CAECJsSpo0Z6p6HrCjuU4m4va7+qkxomFNv55J2b6CBD5Trt0Mw@mail.gmail.com>
 <d5a528a8-1f2a-d98f-ab3a-867df01dbe93@gmail.com>
 <CAECJsSp0s-8_sKeqEciu_Sn_yB-Z1Lxjj5h934TkqNE-USwqtg@mail.gmail.com>
Message-ID: <CAL5Q672xsMtVJsgYitdz67yAqVjcGrmUuXxsUyMcEDfq0bRsWA@mail.gmail.com>

Hi,

I'll have a look tomorrow, since when did it start failing?


On Tue, Jun 8, 2021 at 5:06 PM DelazJ <delazj at gmail.com> wrote:

> Hi devs,
> still me looking for help to fix the QGIS-Documentation doctest workflow
> taking hours and getting canceled
> https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml
>
> Thanks,
> Harrissou
>
> Le mar. 1 juin 2021 ? 08:23, Delaz J <delazj at gmail.com> a ?crit :
>
>> Hi,
>>
>> The doctest is again failing, actually aborted by GitHub after 6 hours
>> (it used to take <5mn). Began yesterday.
>>
>> From what I can see, it's struggling to connect and download to the qgis
>> docker image. See
>> https://github.com/qgis/QGIS-Documentation/runs/2715733455?check_suite_focus=true
>> vs
>> https://github.com/qgis/QGIS-Documentation/runs/2709502529?check_suite_focus=true
>>
>> Any help appreciated.
>>
>> Thanks,
>>
>> Harrissou
>> Le 28/05/2021 ? 11:03, DelazJ a ?crit :
>>
>> Hi,
>> Thanks Alessandro. Fixed now.
>>
>> Harrissou
>>
>> Le mer. 26 mai 2021 ? 15:48, Alessandro Pasotti <apasotti at gmail.com> a
>> ?crit :
>>
>>>
>>> It has been moved to the parent class QgsMapLayer
>>>
>>> On Wed, May 26, 2021 at 3:32 PM DelazJ <delazj at gmail.com> wrote:
>>>
>>>> Hi devs,
>>>>
>>>> QGIS-Documentation build test is failing due to "WARNING: py:meth
>>>> reference target not found: qgis.core.QgsVectorLayer.setDataSource" [0]
>>>> It looks like the QgsVectorLayer.setDataSource method is no longer
>>>> available in master. Anyone knows what is the replacement?
>>>>
>>>> Thanks,
>>>> Harrissou
>>>>
>>>> [0]
>>>> https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622
>>>>
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>
>>>
>>> --
>>> Alessandro Pasotti
>>> QCooperative:  www.qcooperative.net
>>> ItOpen:   www.itopen.it
>>>
>> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210608/be88745d/attachment.html>

From delazj at gmail.com  Tue Jun  8 13:02:00 2021
From: delazj at gmail.com (Delaz J)
Date: Tue, 8 Jun 2021 22:02:00 +0200
Subject: [QGIS-Developer] QGIS-Documentation fails to build
In-Reply-To: <CAL5Q672xsMtVJsgYitdz67yAqVjcGrmUuXxsUyMcEDfq0bRsWA@mail.gmail.com>
References: <CAECJsSpVuRkS-ZVz72Z0uVwZP0w54YsV0ohLS-KfgKuj3mC4tg@mail.gmail.com>
 <CAL5Q6736oDiLZX0ahKEcmUYK3zx3feW=YbFRybYPjdmZ+_MkNw@mail.gmail.com>
 <CAECJsSpo0Z6p6HrCjuU4m4va7+qkxomFNv55J2b6CBD5Trt0Mw@mail.gmail.com>
 <d5a528a8-1f2a-d98f-ab3a-867df01dbe93@gmail.com>
 <CAECJsSp0s-8_sKeqEciu_Sn_yB-Z1Lxjj5h934TkqNE-USwqtg@mail.gmail.com>
 <CAL5Q672xsMtVJsgYitdz67yAqVjcGrmUuXxsUyMcEDfq0bRsWA@mail.gmail.com>
Message-ID: <98323947-8b62-bcd7-9dcf-790e1e012085@gmail.com>

Thanks Alessandro,

I'd say from June 1st or May 31st.


Regards,

Harrissou

Le 08/06/2021 ? 18:58, Alessandro Pasotti a ?crit?:
> Hi,
>
> I'll have a look tomorrow, since when did it start failing?
>
>
> On Tue, Jun 8, 2021 at 5:06 PM DelazJ <delazj at gmail.com 
> <mailto:delazj at gmail.com>> wrote:
>
>     Hi devs,
>     still me looking for help to fix the QGIS-Documentation doctest
>     workflow taking hours and getting canceled
>     https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml
>     <https://github.com/qgis/QGIS-Documentation/actions/workflows/doctest.yml>
>
>     Thanks,
>     Harrissou
>
>     Le?mar. 1 juin 2021 ??08:23, Delaz J <delazj at gmail.com
>     <mailto:delazj at gmail.com>> a ?crit?:
>
>         Hi,
>
>         The doctest is again failing, actually aborted by GitHub after
>         6 hours (it used to take <5mn). Began yesterday.
>
>         From what I can see, it's struggling to connect and download
>         to the qgis docker image. See
>         https://github.com/qgis/QGIS-Documentation/runs/2715733455?check_suite_focus=true
>         <https://github.com/qgis/QGIS-Documentation/runs/2715733455?check_suite_focus=true>
>         vs
>         https://github.com/qgis/QGIS-Documentation/runs/2709502529?check_suite_focus=true
>         <https://github.com/qgis/QGIS-Documentation/runs/2709502529?check_suite_focus=true>
>
>         Any help appreciated.
>
>         Thanks,
>
>         Harrissou
>
>         Le 28/05/2021 ? 11:03, DelazJ a ?crit?:
>>         Hi,
>>         Thanks Alessandro. Fixed now.
>>
>>         Harrissou
>>
>>         Le?mer. 26 mai 2021 ??15:48, Alessandro Pasotti
>>         <apasotti at gmail.com <mailto:apasotti at gmail.com>> a ?crit?:
>>
>>
>>             It has been moved to the parent class QgsMapLayer
>>
>>             On Wed, May 26, 2021 at 3:32 PM DelazJ <delazj at gmail.com
>>             <mailto:delazj at gmail.com>> wrote:
>>
>>                 Hi devs,
>>
>>                 QGIS-Documentation build test is failing due to
>>                 "WARNING: py:meth reference target not found:
>>                 qgis.core.QgsVectorLayer.setDataSource" [0]
>>                 It looks like the QgsVectorLayer.setDataSource method
>>                 is no longer available in master. Anyone knows what
>>                 is the replacement?
>>
>>                 Thanks,
>>                 Harrissou
>>
>>                 [0]
>>                 https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622
>>                 <https://github.com/qgis/QGIS-Documentation/runs/2672228415?check_suite_focus=true#step:5:622>
>>
>>                 _______________________________________________
>>                 QGIS-Developer mailing list
>>                 QGIS-Developer at lists.osgeo.org
>>                 <mailto:QGIS-Developer at lists.osgeo.org>
>>                 List info:
>>                 https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>                 <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>                 Unsubscribe:
>>                 https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>                 <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>
>>
>>
>>             -- 
>>             Alessandro Pasotti
>>             QCooperative: www.qcooperative.net
>>             <https://www.qcooperative.net>
>>             ItOpen: www.itopen.it <http://www.itopen.it>
>>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>
>
> -- 
> Alessandro Pasotti
> QCooperative: www.qcooperative.net <https://www.qcooperative.net>
> ItOpen: www.itopen.it <http://www.itopen.it>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210608/e19f6c2c/attachment.html>

From peter.petrik at lutraconsulting.co.uk  Wed Jun  9 00:24:00 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Wed, 9 Jun 2021 09:24:00 +0200
Subject: [QGIS-Developer] macOS qt5.15
Message-ID: <CA+T_Ms+3TYA82W3b9Ey-6KXsfdWcJJKem3ue2uD7HFKGDycrFQ@mail.gmail.com>

Hi,

We have prepared new nightly build macOS packages with Qt 5.15.2. Please
test and submit bug reports before next week's release. Thanks.

qgis_nightly_master_20210608_023438.dmg
<https://qgis.org/downloads/macos/nightly/qgis_nightly_master_20210608_023438.dmg>

Cheers,
Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/734db916/attachment.html>

From prem.netgis at gmail.com  Wed Jun  9 01:01:28 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Wed, 9 Jun 2021 13:31:28 +0530
Subject: [QGIS-Developer] Offset lines via qgis python
Message-ID: <CAP2_p63h5C7qhafB2MR1UCSss-xCjmkWmQJbU7RLkb9ZfqPcyA@mail.gmail.com>

Hi Team,

Just wondering if there is a python api which gets an offset line or
parallel line (to both left and right sides) to a given line geometry in
Qgis Python. I know there exists a processing tool called Offsetlines
<https://docs.qgis.org/3.16/en/docs/user_manual/processing_algs/qgis/vectorgeometry.html#offset-lines>
but
need this similar functionality at geometry object level so that I can
create offset lines only when needed based on my logic.

The only way now is that I can perform the Offset lines on the entire layer
and then access the offset geometry if needed.

On other hand, shapely has parallel_offset
<https://shapely.readthedocs.io/en/stable/manual.html#object.parallel_offset>
but
this needs conversion from shapely geometry to qgisgeometry.

Just looking for thoughts on this to optimize heavy geometry operations.
Appreciate your help.

-Prem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/c53b5f49/attachment.html>

From ujaval at spatialthoughts.com  Wed Jun  9 01:23:30 2021
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Wed, 9 Jun 2021 13:53:30 +0530
Subject: [QGIS-Developer] Offset lines via qgis python
In-Reply-To: <CAP2_p63h5C7qhafB2MR1UCSss-xCjmkWmQJbU7RLkb9ZfqPcyA@mail.gmail.com>
References: <CAP2_p63h5C7qhafB2MR1UCSss-xCjmkWmQJbU7RLkb9ZfqPcyA@mail.gmail.com>
Message-ID: <CALymcQB-_4ww6UrmTQTbW7e-cQxXcU2yoVijO2kU1GbZx88vUg@mail.gmail.com>

You can look at the implementation
<https://github.com/qgis/QGIS/blob/2d1aa68f0d044f2aced7ebeca8d2fa6b754ac970/src/analysis/processing/qgsalgorithmoffsetlines.cpp>
of offsetline algorithm and you'll notice that it
uses geometry.offsetCurve(). You can do the same in your code.
[image: Logo] <https://spatialthoughts.com/>
Ujaval Gandhi
Spatial Thoughts
mobile: +91-8095684687
email: ujaval at spatialthoughts.com
[image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
Twitter icon] <https://twitter.com/spatialthoughts>



On Wed, Jun 9, 2021 at 1:31 PM Prem Kumar <prem.netgis at gmail.com> wrote:

> Hi Team,
>
> Just wondering if there is a python api which gets an offset line or
> parallel line (to both left and right sides) to a given line geometry in
> Qgis Python. I know there exists a processing tool called Offsetlines
> <https://docs.qgis.org/3.16/en/docs/user_manual/processing_algs/qgis/vectorgeometry.html#offset-lines> but
> need this similar functionality at geometry object level so that I can
> create offset lines only when needed based on my logic.
>
> The only way now is that I can perform the Offset lines on the entire
> layer and then access the offset geometry if needed.
>
> On other hand, shapely has parallel_offset
> <https://shapely.readthedocs.io/en/stable/manual.html#object.parallel_offset> but
> this needs conversion from shapely geometry to qgisgeometry.
>
> Just looking for thoughts on this to optimize heavy geometry operations.
> Appreciate your help.
>
> -Prem
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/d5de84e6/attachment-0001.html>

From prem.netgis at gmail.com  Wed Jun  9 01:41:16 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Wed, 9 Jun 2021 14:11:16 +0530
Subject: [QGIS-Developer] Offset lines via qgis python
In-Reply-To: <CALymcQB-_4ww6UrmTQTbW7e-cQxXcU2yoVijO2kU1GbZx88vUg@mail.gmail.com>
References: <CAP2_p63h5C7qhafB2MR1UCSss-xCjmkWmQJbU7RLkb9ZfqPcyA@mail.gmail.com>
 <CALymcQB-_4ww6UrmTQTbW7e-cQxXcU2yoVijO2kU1GbZx88vUg@mail.gmail.com>
Message-ID: <CAP2_p60tO+BmWm1K3NX1jESQKDWB10Xi9JViqBxUVMakLFDEQA@mail.gmail.com>

Hi Ujaval,

Thank you very much for pointing that out. That serves my purpose.

In fact, I had initially searched for a python implementation of the
Offsetlines processing tool but did not get it. Just a quick question, how
do we trace whether the processing tool implementation is in python or c++?

-Prem

On Wed, Jun 9, 2021 at 1:53 PM Ujaval Gandhi <ujaval at spatialthoughts.com>
wrote:

> You can look at the implementation
> <https://github.com/qgis/QGIS/blob/2d1aa68f0d044f2aced7ebeca8d2fa6b754ac970/src/analysis/processing/qgsalgorithmoffsetlines.cpp>
> of offsetline algorithm and you'll notice that it
> uses geometry.offsetCurve(). You can do the same in your code.
> [image: Logo] <https://spatialthoughts.com/>
> Ujaval Gandhi
> Spatial Thoughts
> mobile: +91-8095684687
> email: ujaval at spatialthoughts.com
> [image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
> Twitter icon] <https://twitter.com/spatialthoughts>
>
>
>
> On Wed, Jun 9, 2021 at 1:31 PM Prem Kumar <prem.netgis at gmail.com> wrote:
>
>> Hi Team,
>>
>> Just wondering if there is a python api which gets an offset line or
>> parallel line (to both left and right sides) to a given line geometry in
>> Qgis Python. I know there exists a processing tool called Offsetlines
>> <https://docs.qgis.org/3.16/en/docs/user_manual/processing_algs/qgis/vectorgeometry.html#offset-lines> but
>> need this similar functionality at geometry object level so that I can
>> create offset lines only when needed based on my logic.
>>
>> The only way now is that I can perform the Offset lines on the entire
>> layer and then access the offset geometry if needed.
>>
>> On other hand, shapely has parallel_offset
>> <https://shapely.readthedocs.io/en/stable/manual.html#object.parallel_offset> but
>> this needs conversion from shapely geometry to qgisgeometry.
>>
>> Just looking for thoughts on this to optimize heavy geometry operations.
>> Appreciate your help.
>>
>> -Prem
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/3fc8897e/attachment.html>

From ujaval at spatialthoughts.com  Wed Jun  9 01:52:07 2021
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Wed, 9 Jun 2021 14:22:07 +0530
Subject: [QGIS-Developer] Offset lines via qgis python
In-Reply-To: <CAP2_p60tO+BmWm1K3NX1jESQKDWB10Xi9JViqBxUVMakLFDEQA@mail.gmail.com>
References: <CAP2_p63h5C7qhafB2MR1UCSss-xCjmkWmQJbU7RLkb9ZfqPcyA@mail.gmail.com>
 <CALymcQB-_4ww6UrmTQTbW7e-cQxXcU2yoVijO2kU1GbZx88vUg@mail.gmail.com>
 <CAP2_p60tO+BmWm1K3NX1jESQKDWB10Xi9JViqBxUVMakLFDEQA@mail.gmail.com>
Message-ID: <CALymcQDQ7Fbt+w+HLBpg2aa0jeamVj=aSeDNAm+gCS0AjJx2_g@mail.gmail.com>

This particular implementation is C++ (see the .cpp extension on the file).
But the C++ and Python API is almost identical, so you can use the C++ code
as a reference for your PyQGIS code.
[image: Logo] <https://spatialthoughts.com/>
Ujaval Gandhi
Spatial Thoughts
mobile: +91-8095684687
email: ujaval at spatialthoughts.com
[image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
Twitter icon] <https://twitter.com/spatialthoughts>



On Wed, Jun 9, 2021 at 2:11 PM Prem Kumar <prem.netgis at gmail.com> wrote:

> Hi Ujaval,
>
> Thank you very much for pointing that out. That serves my purpose.
>
> In fact, I had initially searched for a python implementation of the
> Offsetlines processing tool but did not get it. Just a quick question, how
> do we trace whether the processing tool implementation is in python or c++?
>
> -Prem
>
> On Wed, Jun 9, 2021 at 1:53 PM Ujaval Gandhi <ujaval at spatialthoughts.com>
> wrote:
>
>> You can look at the implementation
>> <https://github.com/qgis/QGIS/blob/2d1aa68f0d044f2aced7ebeca8d2fa6b754ac970/src/analysis/processing/qgsalgorithmoffsetlines.cpp>
>> of offsetline algorithm and you'll notice that it
>> uses geometry.offsetCurve(). You can do the same in your code.
>> [image: Logo] <https://spatialthoughts.com/>
>> Ujaval Gandhi
>> Spatial Thoughts
>> mobile: +91-8095684687
>> email: ujaval at spatialthoughts.com
>> [image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
>> Twitter icon] <https://twitter.com/spatialthoughts>
>>
>>
>>
>> On Wed, Jun 9, 2021 at 1:31 PM Prem Kumar <prem.netgis at gmail.com> wrote:
>>
>>> Hi Team,
>>>
>>> Just wondering if there is a python api which gets an offset line or
>>> parallel line (to both left and right sides) to a given line geometry in
>>> Qgis Python. I know there exists a processing tool called Offsetlines
>>> <https://docs.qgis.org/3.16/en/docs/user_manual/processing_algs/qgis/vectorgeometry.html#offset-lines> but
>>> need this similar functionality at geometry object level so that I can
>>> create offset lines only when needed based on my logic.
>>>
>>> The only way now is that I can perform the Offset lines on the entire
>>> layer and then access the offset geometry if needed.
>>>
>>> On other hand, shapely has parallel_offset
>>> <https://shapely.readthedocs.io/en/stable/manual.html#object.parallel_offset> but
>>> this needs conversion from shapely geometry to qgisgeometry.
>>>
>>> Just looking for thoughts on this to optimize heavy geometry operations.
>>> Appreciate your help.
>>>
>>> -Prem
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/4c926a39/attachment.html>

From techrules08041 at yahoo.com  Wed Jun  9 05:52:17 2021
From: techrules08041 at yahoo.com (techdude1996)
Date: Wed, 9 Jun 2021 05:52:17 -0700 (MST)
Subject: [QGIS-Developer] #qgis on Freenode
In-Reply-To: <1622194502460-0.post@n6.nabble.com>
References: <ff2dc38b-f112-a70f-f117-b477d4e372c2@duif.net>
 <1622194502460-0.post@n6.nabble.com>
Message-ID: <1623243137663-0.post@n6.nabble.com>

I don't mean to be rude, but can we please move to the 21st century? (As I'm
responding to a mailing list) IRC very dated and lacks a lot.

There's an Unofficial QGIS Discord server  Discord Invite Link
<https://discord.gg/KArRdE3Hm6>   (Currently, it's small due to lack of
publicity) that could be more official, or an official one could be created. 
Rocket Chat <http://rocket.chat>   is a FOSS, self-hostable option if you
don't want to use Discord.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From gdt at lexort.com  Wed Jun  9 06:41:43 2021
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 09 Jun 2021 09:41:43 -0400
Subject: [QGIS-Developer] #qgis on Freenode
In-Reply-To: <1623243137663-0.post@n6.nabble.com> (techdude's message of "Wed, 
 9 Jun 2021 05:52:17 -0700 (MST)")
References: <ff2dc38b-f112-a70f-f117-b477d4e372c2@duif.net>
 <1622194502460-0.post@n6.nabble.com>
 <1623243137663-0.post@n6.nabble.com>
Message-ID: <rmilf7jp33c.fsf@s1.lexort.com>


techdude1996 <techrules08041 at yahoo.com> writes:

> I don't mean to be rude, but can we please move to the 21st century? (As I'm
> responding to a mailing list) IRC very dated and lacks a lot.

If you don't mean to be rude, then perhaps it would be good to address
things a little more evenhandedly, rather than using terms like 21st
century with an implicit claim that all older things are bad.

FWIW, I see IRC as entirely functional with lots of clients, for public
non-structured chat.

> There's an Unofficial QGIS Discord server  Discord Invite Link
> <https://discord.gg/KArRdE3Hm6>   (Currently, it's small due to lack of
> publicity) that could be more official, or an official one could be created. 
> Rocket Chat <http://rocket.chat>   is a FOSS, self-hostable option if you
> don't want to use Discord.

I think Free Software projects should decline to use proprietary
interaction platforms.

My impression is that people who both don't like IRC and care about Free
Software are tending to move to matrix, which is reasonably easily self
hostable.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/9ba918c6/attachment-0001.sig>

From adenaculture at gmail.com  Wed Jun  9 06:47:54 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 9 Jun 2021 09:47:54 -0400
Subject: [QGIS-Developer] Earth, Sun, Moon & Planets Plugin
In-Reply-To: <CAES-DZRH5Vwq=9AeyHdNoxNbwuoTsR9JaKJY=k-jpjiCNKbxoQ@mail.gmail.com>
References: <CABPxTTqjuT=QtRKgSDwiN7wYysFUdazscp42Mi6=OWOGemyF+w@mail.gmail.com>
 <CAES-DZRH5Vwq=9AeyHdNoxNbwuoTsR9JaKJY=k-jpjiCNKbxoQ@mail.gmail.com>
Message-ID: <CABPxTTriJHA+2C2LQ4rYrZiEm=N4PqWvLRBB_9==bWXKAr2+kQ@mail.gmail.com>

Tim,

Thanks for the suggestions. I will look into the temporal controller.

As you know I like having the plugins self contained so that they run
immediately. I have struggled with this issue in this case because there
are no astronomical libraries that I can do this with, at least ones that
are highly accurate and use ephemeris data rather than less accurate,
simplified mathematical equations. I try to go for accuracy.

For testing I will release a self contained windows version, but other
users will need to pip install skyfield. In the case of the Date/Time Tools
plugin I made it self contained so that the user didn't need to pip install
anything, but that is what made it so large. It is reasonable for the user
to download the ephemeris data separately. I may be able to extract a small
set of the data that is within the 10 mb limit so that it is shipped with
the plugin so that it works immediately. It just won't have a large date
span, but if they are having to pip install skyfield, it is not going to be
any more difficult to download the ephemeris data.

I think it would be good for QGIS to have some astronomical libraries
included. I've already had people express interest in this capability, but
we will see how much overall interest there is in this plugin. It will get
more acceptance if people do not need to pip install anything.

Astropy is the most active and complex astronomy library. I chose not to
use it because I didn't think it was needed for QGIS. I used Skyfield
instead. It has the necessary functionality that I think is needed for QGIS
projects. It is a modernized version of PyEphem by the same author and is
recommended by the author over PyEphem.

Thanks for your continued support,

Calvin

On Sat, Jun 5, 2021 at 1:04 PM Tim Sutton <tim at kartoza.com> wrote:

> Hi
>
> Wow that looks beautiful! A couple of thoughts:
>
> 1) Rather than implementing your own slider logic I wonder if you could
> hook in to the temporal controller?
> 2) For platform specific components the normal practice is to a)
> communicate with the plugins reviewers about why this is needed so that
> they don't pre-emptively reject your plugin and b) normally pull down the
> platform specific components as a post install step. I expect you will get
> some resistance to adding a new dependency to QGIS core unless that
> dependency is broadly useful, but you may be able to convince Jurgen and
> Peter to bundle it into the Windows and macOS installers respectively.
> 3) For that 100mb blob, similar to our discussion on the timezone work you
> were doing, the preferred approach would be to fetch it as a post-install
> download the first time you use the plugin.
>
> Thanks for making such interesting plugins!
>
> Regards
>
> Tim
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/298b3f92/attachment.html>

From adenaculture at gmail.com  Wed Jun  9 07:27:35 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 9 Jun 2021 10:27:35 -0400
Subject: [QGIS-Developer] Earth, Sun, Moon & Planets Plugin
In-Reply-To: <CAES-DZRH5Vwq=9AeyHdNoxNbwuoTsR9JaKJY=k-jpjiCNKbxoQ@mail.gmail.com>
References: <CABPxTTqjuT=QtRKgSDwiN7wYysFUdazscp42Mi6=OWOGemyF+w@mail.gmail.com>
 <CAES-DZRH5Vwq=9AeyHdNoxNbwuoTsR9JaKJY=k-jpjiCNKbxoQ@mail.gmail.com>
Message-ID: <CABPxTTpY5uC7UcmBbhL_jSKHLi1LVMqWJpwertZWptuE8Z3JNg@mail.gmail.com>

I should clarify and say that if there were serious interest in using QGIS
for some astronomy related work astropy might be the way to go with perhaps
several other astropy libraries added, but I am not sure if astronomers
could use nor how they would use QGIS for their work other than the types
of things I am doing with the "Earth, Sun, Moon & Planets Plugin," but I am
not an astronomer. For what I visualize as the need of the community
Skyfield would probably do everything that would be needed.

Calvin

On Sat, Jun 5, 2021 at 1:04 PM Tim Sutton <tim at kartoza.com> wrote:

> Hi
>
> Wow that looks beautiful! A couple of thoughts:
>
> 1) Rather than implementing your own slider logic I wonder if you could
> hook in to the temporal controller?
> 2) For platform specific components the normal practice is to a)
> communicate with the plugins reviewers about why this is needed so that
> they don't pre-emptively reject your plugin and b) normally pull down the
> platform specific components as a post install step. I expect you will get
> some resistance to adding a new dependency to QGIS core unless that
> dependency is broadly useful, but you may be able to convince Jurgen and
> Peter to bundle it into the Windows and macOS installers respectively.
> 3) For that 100mb blob, similar to our discussion on the timezone work you
> were doing, the preferred approach would be to fetch it as a post-install
> download the first time you use the plugin.
>
> Thanks for making such interesting plugins!
>
> Regards
>
> Tim
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/201a8ae9/attachment.html>

From techrules08041 at yahoo.com  Wed Jun  9 08:42:22 2021
From: techrules08041 at yahoo.com (techdude1996)
Date: Wed, 9 Jun 2021 08:42:22 -0700 (MST)
Subject: [QGIS-Developer] #qgis on Freenode
In-Reply-To: <rmilf7jp33c.fsf@s1.lexort.com>
References: <ff2dc38b-f112-a70f-f117-b477d4e372c2@duif.net>
 <1622194502460-0.post@n6.nabble.com> <1623243137663-0.post@n6.nabble.com>
 <rmilf7jp33c.fsf@s1.lexort.com>
Message-ID: <1623253342256-0.post@n6.nabble.com>

Greg:

> rather than using terms like 21st century

My remark about 21st century was meant to be comedic in nature, and not
offensive (along with the joke that I'm replying to a mailing list while
talking about IRC being old). IRC was invented in 1988, and was a great
technology for it's time; and just like the shapefile, it is time to replace
it with a more modern system. QGIS replaced the default export option from
shapefile to GeoPackage for this reason (and many others).


> implicit claim that all older things are bad.

I in no way said that IRC was bad, but just outdated and lacking modern
features and amenities. There are many more modern technologies like Matrix
(which you did mention) as a direct IRC replacement.


> I think Free Software projects should decline to use proprietary
> interaction platforms.

Which is why I also proposed Rocket Chat. Blender, for the very reason you
pointed out, uses it (blender.chat). Rocket Chat is a Free Open Source
Software, and is also easily self hostable. Another example would be unfa,
he is a professional music and sound designer that exclusively uses FOSS and
Linux (Manjaro to be specific). He does have a Discord, but encourages
people to use his self-hosted Rocket Chat server, and has a bridge bot to
connect the two.


> My impression is that people who both don't like IRC and care about Free
> Software are tending to move to matrix, which is reasonably easily self
> hostable.

The reason behind my comment was to try and move to modern technology for
the benefit of the QGIS community. Open Source projects develop great
communities that you don't really get with proprietary software. (Just look
at the blender community for example). QGIS could use a nice modern
community that will attract users to it, instead of comments like "eww, they
still use IRC???"

You will always have people who would rather stick with older technology.
You can't please everyone, and by attempting to do so, you end up
displeasing everyone. You do try to please the majority, and your target
audience. Moving to a more modern technology brings a lot of benefits to
both existing and new users.

In relation to the last paragraph, here's a related xkcd comic:  Team Chat
<https://xkcd.com/1782/>  



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From marco at qgis.org  Wed Jun  9 09:46:35 2021
From: marco at qgis.org (Marco Bernasocchi)
Date: Wed, 9 Jun 2021 18:46:35 +0200
Subject: [QGIS-Developer] Code interactions for GDPR
Message-ID: <CAB2ZMRAHX_ZtETo4sZEnAZ4A9+kYzAiMbasZ=JOMOzhqxFezhw@mail.gmail.com>

Dear QGIS developers,

at the PSC we're working on GDPR related themes. We've been collecting
information on how QGIS deals with user data here:
https://docs.google.com/document/d/1V0q1TIG6nhSwGFHa9-hG7duEuUHE0xOc3iEYN3cZKd4/edit?usp=sharing

could you please go over it and see if we have forgotten any data
interactions? You can directly leave comments in the document.

Thanks a lot
Marco
-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210609/c492d23b/attachment.html>

From pathmapper at posteo.de  Thu Jun 10 05:40:19 2021
From: pathmapper at posteo.de (pathmapper)
Date: Thu, 10 Jun 2021 12:40:19 +0000
Subject: [QGIS-Developer] =?utf-8?q?QGIS_Server_and_Desktop_on_same_machi?=
 =?utf-8?q?ne_in_production=3F?=
Message-ID: <4484bb98a94445614df4150305816d5c@posteo.de>

Hi,

I would like to use processing from the command line 
(https://docs.qgis.org/3.16/en/docs/user_manual/processing/standalone.html) 
on the same Ubuntu machine where QGIS server is running:

Every information I did find so far says to install QGIS Desktop to have 
qgis_process available, but the training manual states:

"QGIS Server should be used in production without QGIS Desktop (with the 
accompanying X Server) installed on the same machine."

Source: 
https://docs.qgis.org/3.16/en/docs/training_manual/qgis_server/install.html#moderate-fa-install-from-packages

Is this recommendation still valid, and if yes, why?

Is there another possibility to install qgis_process on the same machine 
as QGIS Server?

Cheers,
Bjoern

From apasotti at gmail.com  Thu Jun 10 06:01:37 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 10 Jun 2021 15:01:37 +0200
Subject: [QGIS-Developer] QGIS Server and Desktop on same machine in
 production?
In-Reply-To: <4484bb98a94445614df4150305816d5c@posteo.de>
References: <4484bb98a94445614df4150305816d5c@posteo.de>
Message-ID: <CAL5Q6712ZSsQkWVuLWduC5HJh4wQsOyofJsw30JnsBo+6ZVBNA@mail.gmail.com>

On Thu, Jun 10, 2021 at 2:48 PM pathmapper <pathmapper at posteo.de> wrote:

> Hi,
>
> I would like to use processing from the command line
> (https://docs.qgis.org/3.16/en/docs/user_manual/processing/standalone.html)
>
> on the same Ubuntu machine where QGIS server is running:
>
> Every information I did find so far says to install QGIS Desktop to have
> qgis_process available, but the training manual states:
>
> "QGIS Server should be used in production without QGIS Desktop (with the
> accompanying X Server) installed on the same machine."
>
> Source:
>
> https://docs.qgis.org/3.16/en/docs/training_manual/qgis_server/install.html#moderate-fa-install-from-packages
>
> Is this recommendation still valid, and if yes, why?
>

That recommendation has never been valid from a technical point of view.

That said, it is not common nor recommended to perform common desktop
operations on a production server, I've seen only a single example of such
weird promiscuity in my whole career, in particular, that was a guy working
for a public administration and the production server was his personal
computer standing on his desktop.

For this reason all the documentation you will find assumes that the server
is running on a headless server without X-Window running because that's
what you will normally find with only a few very rare exceptions and it is
not wise to do differently.

I don't know how qgis_process is packaged but I don't see a reason why it
would not run under the same server setup, it will just probably require
xvfb-run before calling it.


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210610/8ee37b6e/attachment.html>

From jorgealmerio at yahoo.com.br  Thu Jun 10 13:49:03 2021
From: jorgealmerio at yahoo.com.br (jorgealmerio at yahoo.com.br)
Date: Thu, 10 Jun 2021 17:49:03 -0300
Subject: [QGIS-Developer] Best Qgis python plot library
References: <048d01d75e3a$0d9c2510$28d46f30$.ref@yahoo.com.br>
Message-ID: <048d01d75e3a$0d9c2510$28d46f30$@yahoo.com.br>

Hi all,

 

I want to create o plot chart as a widget in my plugin. I already used
MatPlotLib in the past, but I don't know it is the best choice.

 

I know some plugins use PyQtGraph and others PyQwt (I think it was deceased
for Qt5)

 

Some features I consider relevant:

 

1) Works native in Qgis enviroment, no need to install anything.

2) Fast

3) Easy to code

4) Will not be discontinued in the near future

 

What is the library best option? 

 

Thanks in advance

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210610/b6c17649/attachment.html>

From pigrecoinfinito at gmail.com  Fri Jun 11 01:21:34 2021
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2?=)
Date: Fri, 11 Jun 2021 01:21:34 -0700 (MST)
Subject: [QGIS-Developer] It's time to contribute to the Changelog for
 QGIS 3.20!
In-Reply-To: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
References: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
Message-ID: <1623399694935-0.post@n6.nabble.com>

Good morning
from a quick search it seems that these new features are missing

can someone please confirm?

https://github.com/qgis/QGIS/pull/42326
https://github.com/qgis/QGIS/pull/42286
https://github.com/qgis/QGIS/pull/41724
https://github.com/qgis/QGIS/pull/43193
https://github.com/qgis/QGIS/pull/42588
https://github.com/qgis/QGIS/pull/42401
https://github.com/qgis/QGIS/pull/41208

Hello



-----
https://pigrecoinfinito.com/
--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From charles at kartoza.com  Fri Jun 11 01:32:09 2021
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Fri, 11 Jun 2021 10:32:09 +0200
Subject: [QGIS-Developer] It's time to contribute to the Changelog for
 QGIS 3.20!
In-Reply-To: <1623399694935-0.post@n6.nabble.com>
References: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
 <1623399694935-0.post@n6.nabble.com>
Message-ID: <CAK2Kqic4mvJp2PWvKL5hN7K9WU3y-rfJEJ-VnGeirAGROWaMNg@mail.gmail.com>

Thanks for catching this. These would have been merged without the
changelog label so I will add them. If anyone else notices any missing
features from the release please be sure to share a link to the PR.

On Fri, 11 Jun 2021 at 10:21, Tot? <pigrecoinfinito at gmail.com> wrote:

> Good morning
> from a quick search it seems that these new features are missing
>
> can someone please confirm?
>
> https://github.com/qgis/QGIS/pull/42326
> https://github.com/qgis/QGIS/pull/42286
> https://github.com/qgis/QGIS/pull/41724
> https://github.com/qgis/QGIS/pull/43193
> https://github.com/qgis/QGIS/pull/42588
> https://github.com/qgis/QGIS/pull/42401
> https://github.com/qgis/QGIS/pull/41208
>
> Hello
>
>
>
> -----
> https://pigrecoinfinito.com/
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210611/b4172332/attachment.html>

From pigrecoinfinito at gmail.com  Fri Jun 11 01:51:46 2021
From: pigrecoinfinito at gmail.com (=?UTF-8?Q?Tot=C3=B2?=)
Date: Fri, 11 Jun 2021 01:51:46 -0700 (MST)
Subject: [QGIS-Developer] It's time to contribute to the Changelog for
 QGIS 3.20!
In-Reply-To: <CAK2Kqic4mvJp2PWvKL5hN7K9WU3y-rfJEJ-VnGeirAGROWaMNg@mail.gmail.com>
References: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
 <1623399694935-0.post@n6.nabble.com>
 <CAK2Kqic4mvJp2PWvKL5hN7K9WU3y-rfJEJ-VnGeirAGROWaMNg@mail.gmail.com>
Message-ID: <1623401506329-0.post@n6.nabble.com>

For the future I would like to suggest to create a CSV file with the titles
of the new features and the link to the PR, this would facilitate the
verification of the new features within the changelog.

to search for features I used this filter:

https://github.com/qgis/QGIS/pulls?q=is%3Apr+is%3Aclosed+label%3Afeature+merged%3A2021-02-18T00%3A00%3A00Z..2021-06-11T00%3A00%3A00Z+

thank you so much for the great job




-----
https://pigrecoinfinito.com/
--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From benjamin.jakimow at geo.hu-berlin.de  Fri Jun 11 14:39:28 2021
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Fri, 11 Jun 2021 23:39:28 +0200
Subject: [QGIS-Developer] Best Qgis python plot library
In-Reply-To: <048d01d75e3a$0d9c2510$28d46f30$@yahoo.com.br>
References: <048d01d75e3a$0d9c2510$28d46f30$.ref@yahoo.com.br>
 <048d01d75e3a$0d9c2510$28d46f30$@yahoo.com.br>
Message-ID: <5e6528f6fba374d803087b626c0e5be9@geo.hu-berlin.de>

Hi Jorge,

to my experience PyQtGraph might fit your needs best.
It is fast, it's easy to realize interactions between GUI and Backend 
(in both directions!) and it uses many
concepts that are commin in the Qt/PyQt world. You can easily deliver it 
as subpackage of your own project (~2.5 MB, MIT/X11 license) [1]

I recently started to use plotly too, but not for GUI programming. Nice 
to use as well, better default styles and much better documented than 
PyQtGraph.
Otherwise it's probably harder to be used in a GUI and to realize GUI 
<-> Backend interactions, e.g. if you want to update your plot fast or 
react on mouse clicks (please correct me if I'm wrong).

I'd love to see QtCharts [3] as part of QGIS distributions, as it is 
probably closest to common Qt paradigms like Model/View programming.

Greetings,

Benjamin

[1] 
https://pyqtgraph.readthedocs.io/en/latest/how_to_use.html#embedding-pyqtgraph-as-a-sub-package-of-a-larger-project

[2] https://doc.qt.io/qt-5/qtcharts-overview.html

[3] https://doc.qt.io/qt-5/qtcharts-overview.html

On 2021-06-10 22:49, jorgealmerio at yahoo.com.br wrote:

> Hi all,
> 
> I want to create o plot chart as a widget in my plugin. I already used 
> MatPlotLib in the past, but I don't know it is the best choice.
> 
> I know some plugins use PyQtGraph and others PyQwt (I think it was 
> deceased for Qt5)
> 
> Some features I consider relevant:
> 
> 1) Works native in Qgis enviroment, no need to install anything.
> 
> 2) Fast
> 
> 3) Easy to code
> 
> 4) Will not be discontinued in the near future
> 
> What is the library best option?
> 
> Thanks in advance
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
--
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu 
Berlin

e-mail: benjamin.jakimow at geo.hu-berlin.de

phone:  +49 (0) 30 2093 6894
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'222
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210611/6e687e2e/attachment.html>

From vmgonzalez1990 at gmail.com  Sun Jun 13 04:47:27 2021
From: vmgonzalez1990 at gmail.com (Victor Manuel Gonzalez Barrios)
Date: Sun, 13 Jun 2021 07:47:27 -0400
Subject: [QGIS-Developer] Qt5 Qgis3.x C++ MSVC Windows Standalone Application
In-Reply-To: <oq0avo1fr6skirmfj0jmhvrm.1623584006547@email.android.com>
References: <oq0avo1fr6skirmfj0jmhvrm.1623584006547@email.android.com>
Message-ID: <CAKY42VVRFSbVL7mW_h+nTmJ==okYQBHW2Jq0Q2KG406QVaJ9aA@mail.gmail.com>

Hello:

Necesito conocer cual es la combinaci?n correcta para desarrollar una
aplicaci?n independiente haciendo uso de las librerias de Qt5, Qgis3.x y el
compilador de MSVC para C++ en la plaforma Windows.

I need to know what is the correct combination to develop an independent
application by using the libraries of QT5, QGIS3.X and the MSVC compiler
for C ++ in the Windows plaforma.

Thanks

Victor Manuel Gonz?lez Barrios
Ing. Ciencias *Inform?ticas*
*Ing. Computer Sciences*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210613/7fb921cf/attachment.html>

From jorgealmerio at yahoo.com.br  Mon Jun 14 06:52:00 2021
From: jorgealmerio at yahoo.com.br (jorgealmerio at yahoo.com.br)
Date: Mon, 14 Jun 2021 10:52:00 -0300
Subject: [QGIS-Developer] RES:  Best Qgis python plot library
In-Reply-To: <5e6528f6fba374d803087b626c0e5be9@geo.hu-berlin.de>
References: <048d01d75e3a$0d9c2510$28d46f30$.ref@yahoo.com.br>
 <048d01d75e3a$0d9c2510$28d46f30$@yahoo.com.br>
 <5e6528f6fba374d803087b626c0e5be9@geo.hu-berlin.de>
Message-ID: <01cf01d76124$74c87490$5e595db0$@yahoo.com.br>

Hi Benjamin,

 

You are totally right, I want to update my plot fast and maybe react on mouse clicks.

 

I will follow you recomendation to use PyQtGraph.

 

Thank you very much to your answer and the links. It will help me a lot!

 

Best regards,

 

Jorge Almerio

 

De: Benjamin Jakimow [mailto:benjamin.jakimow at geo.hu-berlin.de] 
Enviada em: sexta-feira, 11 de junho de 2021 18:39
Para: jorgealmerio at yahoo.com.br
Cc: qgis-developer at lists.osgeo.org
Assunto: Re: [QGIS-Developer] Best Qgis python plot library

 

Hi Jorge,

to my experience PyQtGraph might fit your needs best.
It is fast, it's easy to realize interactions between GUI and Backend (in both directions!) and it uses many
concepts that are commin in the Qt/PyQt world. You can easily deliver it as subpackage of your own project (~2.5 MB, MIT/X11 license) [1] 

I recently started to use plotly too, but not for GUI programming. Nice to use as well, better default styles and much better documented than PyQtGraph. 
Otherwise it's probably harder to be used in a GUI and to realize GUI <-> Backend interactions, e.g. if you want to update your plot fast or react on mouse clicks (please correct me if I'm wrong).

I'd love to see QtCharts [3] as part of QGIS distributions, as it is probably closest to common Qt paradigms like Model/View programming.

Greetings,

Benjamin

[1] https://pyqtgraph.readthedocs.io/en/latest/how_to_use.html#embedding-pyqtgraph-as-a-sub-package-of-a-larger-project

[2] https://doc.qt.io/qt-5/qtcharts-overview.html

[3] https://doc.qt.io/qt-5/qtcharts-overview.html

On 2021-06-10 22:49, jorgealmerio at yahoo.com.br <mailto:jorgealmerio at yahoo.com.br>  wrote:

Hi all,

 

I want to create o plot chart as a widget in my plugin. I already used MatPlotLib in the past, but I don't know it is the best choice.

 

I know some plugins use PyQtGraph and others PyQwt (I think it was deceased for Qt5)

 

Some features I consider relevant:

 

1) Works native in Qgis enviroment, no need to install anything.

2) Fast

3) Easy to code

4) Will not be discontinued in the near future

 

What is the library best option? 

 

Thanks in advance

 

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org> 
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

 

-- 

--
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu Berlin

e-mail: benjamin.jakimow at geo.hu-berlin.de <mailto:benjamin.jakimow at geo.hu-berlin.de> 

phone:  +49 (0) 30 2093 6894
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'222

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210614/ee7570b7/attachment.html>

From rdmailings at duif.net  Mon Jun 14 12:24:56 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 14 Jun 2021 21:24:56 +0200
Subject: [QGIS-Developer] Install grid ui
Message-ID: <5fe04502-3a00-a970-547c-58bf63b53bff@duif.net>

Hi All,

Today QGIS presented me the following nice service:

https://duif.net/installgrid.png

Super service, both from QGIS and opendata advocates/packagers!

Did others also FIRST clicked the 'install' button before downloading the tiff first :-)
If not: no problem
If so: what about rephrasing it to:

"This grid is available for download from ..."
"Please download it yourself and save it to an arbitrary folder"
"Then install it via this button":   [ install button ]

Or is that too much text?

Regards,

Richard Duivenvoorde

PS, I can do a PR for this, but not sure how to make the dialog show again :-)

From rdmailings at duif.net  Mon Jun 14 12:30:32 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 14 Jun 2021 21:30:32 +0200
Subject: [QGIS-Developer] Qt/QML course
Message-ID: <eb9422da-a810-72a0-e2e2-8e158e98dbbb@duif.net>

Hi,

FYI

Not sure what the future is of QML inside QGIS, but on some debian blog it was mentioned that this

https://www.ics.com/events/qml-programming-fundamentals-and-beyond

is a 'free' (if you provide a corporate email address) course to learn about QML and Qt. The blogger was talking about a 4 days course and was pretty positive about it (but I haven't looked to it myself) ...
So if you want to tip your toes in QML...

Regards,

Richard Duivenvoorde

From senhor.neto at gmail.com  Mon Jun 14 17:34:38 2021
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 15 Jun 2021 01:34:38 +0100
Subject: [QGIS-Developer] Install grid ui
In-Reply-To: <5fe04502-3a00-a970-547c-58bf63b53bff@duif.net>
References: <5fe04502-3a00-a970-547c-58bf63b53bff@duif.net>
Message-ID: <CA+H0G_HjOdiEgz0gz9XQdeoE9C_zQv9qJLQ0ct4TSOeU=3cjaQ@mail.gmail.com>

Hi Richard,

I agree that it's not completely clear what the expected steps are, so I
agree with you text changes.

Best regards,

Alex Neto

A segunda, 14/06/2021, 20:25, Richard Duivenvoorde <rdmailings at duif.net>
escreveu:

> Hi All,
>
> Today QGIS presented me the following nice service:
>
> https://duif.net/installgrid.png
>
> Super service, both from QGIS and opendata advocates/packagers!
>
> Did others also FIRST clicked the 'install' button before downloading the
> tiff first :-)
> If not: no problem
> If so: what about rephrasing it to:
>
> "This grid is available for download from ..."
> "Please download it yourself and save it to an arbitrary folder"
> "Then install it via this button":   [ install button ]
>
> Or is that too much text?
>
> Regards,
>
> Richard Duivenvoorde
>
> PS, I can do a PR for this, but not sure how to make the dialog show again
> :-)
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210615/6af4db89/attachment.html>

From nyall.dawson at gmail.com  Mon Jun 14 17:39:06 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 15 Jun 2021 10:39:06 +1000
Subject: [QGIS-Developer] Install grid ui
In-Reply-To: <5fe04502-3a00-a970-547c-58bf63b53bff@duif.net>
References: <5fe04502-3a00-a970-547c-58bf63b53bff@duif.net>
Message-ID: <CAB28AshNXJ1O_qGOVJWAJrvLnpfwHXQGu7HkyVpoKP7FC7mT_w@mail.gmail.com>

On Tue, 15 Jun 2021 at 05:25, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> Hi All,
>
> Today QGIS presented me the following nice service:
>
> https://duif.net/installgrid.png
>
> Super service, both from QGIS and opendata advocates/packagers!
>
> Did others also FIRST clicked the 'install' button before downloading the tiff first :-)

Originally I was hoping to implement a "download grid" task, so that
you'd click a single button and everything would happen for you... but
... then I ran out of time and moved onto other things :P

Nyall

From mike.14arv at gmail.com  Mon Jun 14 23:59:46 2021
From: mike.14arv at gmail.com (Miguel Angel Vallejo)
Date: Tue, 15 Jun 2021 03:59:46 -0300
Subject: [QGIS-Developer] Agree to requirements for new contributors
Message-ID: <CAAu2FjMm9nr1pG69YKL2vCXgSmHU1dr_Yq3ptzJLbZUy7Cb+tA@mail.gmail.com>

Good morning to all the QGIS community.
With this email, I imply that I have read:
The code of Conduct
The coding Standards
The diversity statements
And I agreed to those terms, in order to become a contributor to the QGIS
community.
Glad for the attention.
Hope you guys a nice day.

Miguel Angel Vallejo Rojas

Design - Photography - Architecture - Cuisine
Social Media & Networking - FabLab
Volunteering

SKALA Arquitectura
Xperimental & Fotografia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210615/5109e2f4/attachment.html>

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Tue Jun 15 19:04:23 2021
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Wed, 16 Jun 2021 02:04:23 +0000
Subject: [QGIS-Developer] How to use addLayerToLoadOnCompletion() ?
Message-ID: <QB1PR01MB294832759CD78CF20CD30BC6B30F9@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>

[Intranet logo]
Hi Devs,

I'm trying to load a raster/vector layer to the current project at the end of the run of a processing algorithm script. I know about QgsProcessingParameterFeatureSink() and I use it when creating a new layer during processing, but how to add an existing layer that will be shown on the map? I tried using context.project().addMapLayer(rlayer, True) but it obviously doesn't work because the process is running in a separate thread. Speaking of thread, I would prefer avoiding running the script in the main thread with
def flags(self):
    return super().flags() | QgsProcessingAlgorithm.FlagNoThreading

I saw this answer from Nyall on SO<https://gis.stackexchange.com/questions/280520/let-qgis-3-0-processing-algorithm-output-a-vectorlayer-loaded-via-the-delimited> for something similar but I haven't been able to emulate. Below is a short example of what I last tried and which gives me the following error: The following layers were not correctly generated. * image_73e75830_4808_4993_abc7_24a5ee61217e You can check the 'Log Messages Panel' in QGIS main window to find more information about the execution of the algorithm.

class addLayerToCanvas(QgsProcessingAlgorithm):
    OUTPUT_raster = 'OUTPUT_raster'

    def initAlgorithm(self, config):
        self.addOutput(QgsProcessingOutputMultipleLayers(self.OUTPUT_raster,
                                                         self.tr('Output raster')))

    def processAlgorithm(self, parameters, context, feedback):

        rlayer = QgsRasterLayer("F:/image.tif", "image") # The layer I want to add to the current project/canvas
        context.addLayerToLoadOnCompletion(rlayer.id(), QgsProcessingContext.LayerDetails('image_layer', QgsProject.instance(), ''))

        return {self.OUTPUT_raster: rlayer.id()}

Thanks for any help

Jean-Fran?ois Bourdon, ing.f.
Analyste en t?l?d?tection
Direction des inventaires forestiers
Minist?re des For?ts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Qu?bec (Qu?bec) G1H 6R1
T?l?phone : 418 627-8669, poste 704304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210616/4d8f05fb/attachment.html>

From luipir at gmail.com  Wed Jun 16 01:40:26 2021
From: luipir at gmail.com (Luigi Pirelli)
Date: Wed, 16 Jun 2021 10:40:26 +0200
Subject: [QGIS-Developer] How to use addLayerToLoadOnCompletion() ?
In-Reply-To: <QB1PR01MB294832759CD78CF20CD30BC6B30F9@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
References: <QB1PR01MB294832759CD78CF20CD30BC6B30F9@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAFO80_rGM4KUVEybM5ynmubs3q2j00GApXm0dmO7RNy+V9LQcg@mail.gmail.com>

I didn't used too much this feature, I usually delegate to the results of
the algorithm if to load or not.
BTW in my snippets (all commented so not used in my scripts) I set last
LayerDetails parameter as the key in result dictionary =>

in your case should be:
context.addLayerToLoadOnCompletion(rlayer.id(),
QgsProcessingContext.LayerDetails('image_layer',
QgsProject.instance(), self.OUTPUT_raster))

regards

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Wed, 16 Jun 2021 at 04:05, Bourdon, Jean-Fran?ois (DIF) <
Jean-Francois.Bourdon at mffp.gouv.qc.ca> wrote:

> [image: Intranet logo]
>
> Hi Devs,
>
>
>
> I'm trying to load a raster/vector layer to the current project at the end
> of the run of a processing algorithm script. I know about
> QgsProcessingParameterFeatureSink() and I use it when creating a new layer
> during processing, but how to add an existing layer that will be shown on
> the map? I tried using context.project().addMapLayer(rlayer, True) but it
> obviously doesn't work because the process is running in a separate thread.
> Speaking of thread, I would prefer avoiding running the script in the main
> thread with
>
> def flags(self):
>
>     return super().flags() | QgsProcessingAlgorithm.FlagNoThreading
>
>
>
> I saw this answer from Nyall on SO
> <https://gis.stackexchange.com/questions/280520/let-qgis-3-0-processing-algorithm-output-a-vectorlayer-loaded-via-the-delimited>
> for something similar but I haven't been able to emulate. Below is a short
> example of what I last tried and which gives me the following error: *The
> following layers were not correctly generated. ?
> image_73e75830_4808_4993_abc7_24a5ee61217e You can check the 'Log Messages
> Panel' in QGIS main window to find more information about the execution of
> the algorithm.*
>
>
>
> class addLayerToCanvas(QgsProcessingAlgorithm):
>
>     OUTPUT_raster = 'OUTPUT_raster'
>
>
>
>     def initAlgorithm(self, config):
>
>
> self.addOutput(QgsProcessingOutputMultipleLayers(self.OUTPUT_raster,
>
>                                                          self.tr('Output
> raster')))
>
>
>
>     def processAlgorithm(self, parameters, context, feedback):
>
>
>
>         rlayer = QgsRasterLayer("F:/image.tif", "image") # The layer I
> want to add to the current project/canvas
>
>         context.addLayerToLoadOnCompletion(rlayer.id(),
> QgsProcessingContext.LayerDetails('image_layer', QgsProject.instance(), ''))
>
>
>
>         return {self.OUTPUT_raster: rlayer.id()}
>
>
>
> Thanks for any help
>
>
>
> *Jean-Fran?ois Bourdon, ing.f.*
>
> *Analyste en t?l?d?tection*
> *Direction des inventaires forestiers*
> *Minist?re des For?ts, de la Faune et des Parcs*
> 5700, 4e Avenue Ouest, local A-108
> Qu?bec (Qu?bec) G1H 6R1
> T?l?phone : 418 627-8669, poste 704304
> *jean-francois.bourdon at mffp.gouv.qc.ca
> <jean-francois.bourdon at mffp.gouv.qc.ca>*
> *mffp.gouv.qc.ca* <http://www.mffp.gouv.qc.ca/accueil.jsp>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210616/77cf8ece/attachment-0001.html>

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Wed Jun 16 08:31:26 2021
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?iso-8859-1?Q?Bourdon=2C_Jean-Fran=E7ois_=28DIF=29?=)
Date: Wed, 16 Jun 2021 15:31:26 +0000
Subject: [QGIS-Developer] How to use addLayerToLoadOnCompletion() ?
In-Reply-To: <CAFO80_rGM4KUVEybM5ynmubs3q2j00GApXm0dmO7RNy+V9LQcg@mail.gmail.com>
References: <QB1PR01MB294832759CD78CF20CD30BC6B30F9@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>
 <CAFO80_rGM4KUVEybM5ynmubs3q2j00GApXm0dmO7RNy+V9LQcg@mail.gmail.com>
Message-ID: <QB1PR01MB2948F101D995E274B48F891CB30F9@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>

[Intranet logo]
Thanks. The solution came from Nyall, I only needed to add   context.temporaryLayerStore().addMapLayer(rlayer)   in order for the layer to not diseapear at the end of processing script.

However, how can I chose de name displayed for the layer? I tought that the name defined at    rlayer = QgsRasterLayer("F:/image.tif", "MyImage")   would be taken but it's not the case, it's rather the filename (without extension) that is displayed.

Jean-Fran?ois Bourdon, ing.f.
Analyste en t?l?d?tection
Direction des inventaires forestiers
Minist?re des For?ts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Qu?bec (Qu?bec) G1H 6R1
T?l?phone : 418 627-8669, poste 704304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

De : Luigi Pirelli <luipir at gmail.com>
Envoy? : 16 juin 2021 04:40
? : Bourdon, Jean-Fran?ois (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca>
Cc : qgis-developer <qgis-developer at lists.osgeo.org>
Objet : Re: [QGIS-Developer] How to use addLayerToLoadOnCompletion() ?

I didn't used too much this feature, I usually delegate to the results of the algorithm if to load or not.
BTW in my snippets (all commented so not used in my scripts) I set last LayerDetails parameter as the key in result dictionary =>

in your case should be:
context.addLayerToLoadOnCompletion(rlayer.id<https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Frlayer.id%2F&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415294608%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=C31QUv5m8jgdtrXRs8N7%2FG8pk%2BGH3gY5t6OEar%2FEISQ%3D&reserved=0>(), QgsProcessingContext.LayerDetails('image_layer', QgsProject.instance(), self.OUTPUT_raster))

regards

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fluigipirelli&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415304608%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=%2BrIMAvpPIcfPpSu9yaZ7W2fnp377O4tQ06Z%2Fe10vjfY%3D&reserved=0>
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli<https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fgis.stackexchange.com%2Fusers%2F19667%2Fluigi-pirelli&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415304608%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=0yzkBn9YuoNx5WZm1j2YbB%2BamU%2FsC8RNFP0Q67iSBWg%3D&reserved=0>
* GitHub: https://github.com/luipir<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fluipir&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415314595%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ziRXcudSAXlGux7tW9861S6sKYq15f05CnThn8%2BPhXE%3D&reserved=0>
* Book: Mastering QGIS3 - 3rd Edition<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.packtpub.com%2Feu%2Fapplication-development%2Fmastering-geospatial-development-qgis-3x-third-edition&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415314595%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ysC6h9l6QSoOjK%2FteKI5B%2FO4MZ7spdpvbHI62WFTv7A%3D&reserved=0>
* Hire a team: http://www.qcooperative.net<https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.qcooperative.net%2F&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415324588%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=GeOAEgasjj6rII5OV6ubTF90k6hOkJ6wLcOiYZ3CwVA%3D&reserved=0>
**************************************************************************************************


On Wed, 16 Jun 2021 at 04:05, Bourdon, Jean-Fran?ois (DIF) <Jean-Francois.Bourdon at mffp.gouv.qc.ca<mailto:Jean-Francois.Bourdon at mffp.gouv.qc.ca>> wrote:
Hi Devs,

I'm trying to load a raster/vector layer to the current project at the end of the run of a processing algorithm script. I know about QgsProcessingParameterFeatureSink() and I use it when creating a new layer during processing, but how to add an existing layer that will be shown on the map? I tried using context.project().addMapLayer(rlayer, True) but it obviously doesn't work because the process is running in a separate thread. Speaking of thread, I would prefer avoiding running the script in the main thread with
def flags(self):
    return super().flags() | QgsProcessingAlgorithm.FlagNoThreading

I saw this answer from Nyall on SO<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgis.stackexchange.com%2Fquestions%2F280520%2Flet-qgis-3-0-processing-algorithm-output-a-vectorlayer-loaded-via-the-delimited&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415324588%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=MkXiGTIDUro%2BK%2FEqbwp3qTOtaEQYa2KVTokrbaHwxOc%3D&reserved=0> for something similar but I haven't been able to emulate. Below is a short example of what I last tried and which gives me the following error: The following layers were not correctly generated. * image_73e75830_4808_4993_abc7_24a5ee61217e You can check the 'Log Messages Panel' in QGIS main window to find more information about the execution of the algorithm.

class addLayerToCanvas(QgsProcessingAlgorithm):
    OUTPUT_raster = 'OUTPUT_raster'

    def initAlgorithm(self, config):
        self.addOutput(QgsProcessingOutputMultipleLayers(self.OUTPUT_raster,
                                                         self.tr<https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fself.tr%2F&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415334586%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=fTsev%2BfCeZBkYCHbCl8LFIS76opFy2nA7fbaM7%2FuGjU%3D&reserved=0>('Output raster')))

    def processAlgorithm(self, parameters, context, feedback):

        rlayer = QgsRasterLayer("F:/image.tif", "image") # The layer I want to add to the current project/canvas
        context.addLayerToLoadOnCompletion(rlayer.id<https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Frlayer.id%2F&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415334586%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=5xLEq4spSdCgtE1pBJdO1tYyC%2Bayb%2FpRGVndzpwAZFI%3D&reserved=0>(), QgsProcessingContext.LayerDetails('image_layer', QgsProject.instance(), ''))

        return {self.OUTPUT_raster: rlayer.id<https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Frlayer.id%2F&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415344582%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=uT2tyLXn8rkNU4wojLGpzfOoKsDpaCFT5DISq1nrM1Q%3D&reserved=0>()}

Thanks for any help

Jean-Fran?ois Bourdon, ing.f.
Analyste en t?l?d?tection
Direction des inventaires forestiers
Minist?re des For?ts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Qu?bec (Qu?bec) G1H 6R1
T?l?phone : 418 627-8669, poste 704304
jean-francois.bourdon at mffp.gouv.qc.ca<mailto:jean-francois.bourdon at mffp.gouv.qc.ca>
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415344582%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=sQYYs6MjBje6ek%2BLwMnNwM6PSM6sE2UM%2FnFa1v2mQsM%3D&reserved=0>
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=04%7C01%7C%7Cba60a5a8d45f43a8ba7608d930a26b0e%7C8705e97737814f4790e1c84c8b884da1%7C0%7C1%7C637594296415354575%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=LWX6gbkLJ7bzo25AoGhJT2HLSn%2B1%2BxuzJf5Q0VklM8k%3D&reserved=0>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210616/1dcaad51/attachment-0001.html>

From adenaculture at gmail.com  Wed Jun 16 09:18:35 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 16 Jun 2021 16:18:35 +0000
Subject: [QGIS-Developer] Fastest Way to Search Through Attributes
Message-ID: <CABPxTTq86p3bbZ3YSio10U+K9csSm4KqntWq9OuNZ3+tqpO1qg@mail.gmail.com>

Back with QGIS 2 I wrote a plugin that would do a search on all attributes
and all layers (Search Layers plugin) I ported it to QGIS 3 to satisfy user
requests despite the Locator service being available. I currently have a
request to update this plugin to allow another search string with AND, OR,
NOT operations.

The questonI have is what is the fastest way to search through the
attributes? The current implementation in the Search Layers plugin when
searching all attributes is to iterate through each feature and test the
search string on a string representation of each attribute field. If there
is a match it is reported.

If I am searching a single attribute then I set up a QgsFeatureRequest and
set the filter expression and then I can just iterate through all the
features that match the expression.

With all the enhancements to QGIS, is there a better way to do these
searches? The result of the search needs to include which feature matched
and which attribute(s) matched. I am looking for the fastest method of
searching a vector layer.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210616/f0201717/attachment.html>

From tim at kartoza.com  Wed Jun 16 11:14:26 2021
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 16 Jun 2021 19:14:26 +0100
Subject: [QGIS-Developer] macOS qt5.15
In-Reply-To: <CA+T_Ms+3TYA82W3b9Ey-6KXsfdWcJJKem3ue2uD7HFKGDycrFQ@mail.gmail.com>
References: <CA+T_Ms+3TYA82W3b9Ey-6KXsfdWcJJKem3ue2uD7HFKGDycrFQ@mail.gmail.com>
Message-ID: <FC5F73BB-C8BE-4D5D-88AD-8BAD6109A01A@kartoza.com>

Since there was a deafening silence in response to your email, let me say in on behalf of all of those macOS users out there who have no other viable GIS application to use on their platform, a huge THANKS for your work!

Regards 

Tim

Sent from my iPhone

> On 9 Jun 2021, at 08:24, Peter Petrik <peter.petrik at lutraconsulting.co.uk> wrote:
> 
> ?
> Hi, 
> 
> We have prepared new nightly build macOS packages with Qt 5.15.2. Please test and submit bug reports before next week's release. Thanks.
> 
> qgis_nightly_master_20210608_023438.dmg
> 
> Cheers,
> Peter
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://www.google.com/url?q=https://lists.osgeo.org/mailman/listinfo/qgis-developer&source=gmail-imap&ust=1623828255000000&usg=AOvVaw0MaSehpHCtjLPxSHTKw0DR
> Unsubscribe: https://www.google.com/url?q=https://lists.osgeo.org/mailman/listinfo/qgis-developer&source=gmail-imap&ust=1623828255000000&usg=AOvVaw0MaSehpHCtjLPxSHTKw0DR
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210616/9463dd8c/attachment.html>

From giulio.fattori at tin.it  Wed Jun 16 23:08:29 2021
From: giulio.fattori at tin.it (Giulio Fattori)
Date: Thu, 17 Jun 2021 08:08:29 +0200
Subject: [QGIS-Developer] Advanced installation by default in OSGeo4W Setup
Message-ID: <2a5854f2-23f0-19c8-3417-2577b170c1c1@tin.it>

Hello everybody,
is it possible to set "Advanced installation" by default in OSGeo4W Setup?

Regards

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210617/669c892f/attachment.html>

From sebastien.peillet at oslandia.com  Thu Jun 17 00:08:29 2021
From: sebastien.peillet at oslandia.com (=?UTF-8?Q?S=c3=a9bastien_Peillet?=)
Date: Thu, 17 Jun 2021 09:08:29 +0200
Subject: [QGIS-Developer] Advanced installation by default in OSGeo4W
 Setup
In-Reply-To: <2a5854f2-23f0-19c8-3417-2577b170c1c1@tin.it>
References: <2a5854f2-23f0-19c8-3417-2577b170c1c1@tin.it>
Message-ID: <56132632-1b6d-b40e-0133-77e796d480bf@oslandia.com>

Hi !

The osgeo4w-setup-x86_64.exe could be launch in command line with the
following arguments:

    Command Line Options:
    ?-b --disable-buggy-antivirus????? Disable known or suspected buggy
    anti virus
    ?????????????????????????????????? software packages during execution.
    ?-g --upgrade-also???????????????? also upgrade installed packages
    ?-o --delete-orphans?????????????? remove orphaned packages
    ?-n --no-shortcuts???????????????? Disable creation of desktop and
    start menu
    ?????????????????????????????????? shortcuts
    ?-N --no-startmenu???????????????? Disable creation of start menu
    shortcut
    ?-d --no-desktop?????????????????? Disable creation of desktop shortcut
    ?-r --no-replaceonreboot?????????? Disable replacing in-use files on
    next
    ?????????????????????????????????? reboot.
    ?-k --autoaccept?????????????????? Accept all licenses
    ?-l --local-package-dir??????????? Local package directory
    ?-m --menu-name??????????????????? Menu name
    ?-a --arch???????????????????????? architecture to install (x86_64
    or x86)
    ?-R --root???????????????????????? Root installation directory
    ?-q --quiet-mode?????????????????? Unattended setup mode
    ?-M --package-manager????????????? Semi-attended chooser-only mode
    ?-h --help???????????????????????? print help
    ?-p --proxy??????????????????????? HTTP/FTP proxy (host:port)
    ?-x --remove-packages????????????? Specify packages to uninstall
    ?-c --remove-categories??????????? Specify categories to uninstall
    ?-P --packages???????????????????? Specify packages to install
    ?-C --categories?????????????????? Specify entire categories to install
    ?-D --download???????????????????? Download from internet
    ?-L --local-install??????????????? Install from local directory
    ?-t --test???????????????????????? Use setup_test.ini
    ?-A --advanced???????????????????? Advanced install (as opposed to
    Express)
    ?-S --safe???????????????????????? Safe Mode (Skip some admin actions)
    ?-s --site???????????????????????? Download site
    ?-O --only-site??????????????????? Ignore all sites except for -s


I think you can make a shorcut of the osgeo4w-setup-x86_64.exe and then
add the -A parameter in the shorcut target (file properties).

Regards


On 17/06/2021 08:08, Giulio Fattori wrote:
>
> Hello everybody,
> is it possible to set "Advanced installation" by default in OSGeo4W Setup?
>
> Regards
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
S?bastien Peillet

Ing?nieur d?veloppement
Oslandia
01.88.33.76.86
sebastien.peillet at oslandia.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210617/a8fc1d29/attachment.html>

From a.neumann at carto.net  Thu Jun 17 08:33:45 2021
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 17 Jun 2021 17:33:45 +0200
Subject: [QGIS-Developer] QGIS Server: default values for GetLegendGraphics
 (fonts, symbol sizes, etc.)
Message-ID: <ea26dd506d2151ff1a51170d8ae79de5@carto.net>

Hi,

I have a question regarding the default values for changing the look and 
feel of GetLegendGraphics as described at 
https://docs.qgis.org/3.16/en/docs/server_manual/services.html#getlegendgraphics 
(e.g. LAYERFONTFAMILY, SYMBOLWIDTH, etc.).

Is there a way to specify "default" values  for these settings, e.g. in 
an environment variable or through other means?

Thank you if you know anything about it.

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210617/a6457fa3/attachment.html>

From jgr at di.uminho.pt  Thu Jun 17 09:24:21 2021
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Thu, 17 Jun 2021 17:24:21 +0100
Subject: [QGIS-Developer] QGIS Server: default values for
 GetLegendGraphics (fonts, symbol sizes, etc.)
In-Reply-To: <ea26dd506d2151ff1a51170d8ae79de5@carto.net>
References: <ea26dd506d2151ff1a51170d8ae79de5@carto.net>
Message-ID: <c12a03fa-c294-1329-9dc3-1cee51b3c3c3@di.uminho.pt>

Hi Andreas,

The default values are in fact the values used in the QGIS project.
These GetLegendGraphics parameters are used to overwrite those default
settings.

These are parameters and are not read from the environment. It should
not be difficult to read them from the environment too, but it requires
some additional logic on the server side.

Some time ago, in our local municipality, I added some rewrite rules to
Apache to use the same font in each GetLegendGraphics request, since not
all people were using the same font on QGIS projects. The rewrite just
adds
&TRANSPARENT=true&ITEMFONTFAMILY=FreightSans&LAYERFONTFAMILY=FreightSans
to each GetLengenGraphic request. The legend was much more uniform with
this simple rewrite.

As a workaround, I suggest something like these rewrite rules on the
server side.

Regards,

Jorge

On 17/06/21 16:33, Andreas Neumann wrote:
> Hi,
> 
> I have a question regarding the default values for changing the look and
> feel of GetLegendGraphics as described at
> https://docs.qgis.org/3.16/en/docs/server_manual/services.html#getlegendgraphics
> <https://docs.qgis.org/3.16/en/docs/server_manual/services.html#getlegendgraphics>
> (e.g. LAYERFONTFAMILY, SYMBOLWIDTH, etc.).
> 
> Is there a way to specify "default" values? for these settings, e.g. in
> an environment variable or through other means?
> 
> Thank you if you know anything about it.
> 
> Andreas
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Inform?tica
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
M?vel: +351 910333888
skype: nabocudnosor

From pergler at gmail.com  Thu Jun 17 11:35:47 2021
From: pergler at gmail.com (Martin Pergler)
Date: Thu, 17 Jun 2021 11:35:47 -0700 (MST)
Subject: [QGIS-Developer] Agree to requirements for new contributors
In-Reply-To: <CAAu2FjMm9nr1pG69YKL2vCXgSmHU1dr_Yq3ptzJLbZUy7Cb+tA@mail.gmail.com>
References: <CAAu2FjMm9nr1pG69YKL2vCXgSmHU1dr_Yq3ptzJLbZUy7Cb+tA@mail.gmail.com>
Message-ID: <1623954947042-0.post@n6.nabble.com>

Welcome Miguel!

Since in recent months I've made a few contributions around the edges, I
hereby catch up on the formalities and also agree to the requirements for
contributors as listed at
https://qgis.org/en/site/getinvolved/development/contributor_requirements.html

Martin Pergler



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rdmailings at duif.net  Thu Jun 17 11:54:02 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 17 Jun 2021 20:54:02 +0200
Subject: [QGIS-Developer] Temporal Controller: Selection by Expression over
 non filtered data?
Message-ID: <39887ff7-8d33-b76e-14a5-69e8900e45c7@duif.net>

Hi Devs,

Having a Temporal controlled dataset, I created a selection (using an expression) in one of the timeframes and created a (zero sized) buffer around it. Strange thing: the buffer was bigger then my (visible) selection...

Disabling the Temporal controller it thus appeared that the 'selection by expression' apparently does NOT take the temporal controller into account, which I think is intuitively it should?

IF you create a FILTER, and then do a selection, when you clear the filter, the selection is cleared: so different behaviour then controller. 

FYI my usecase: we have these in time modelled clouds (with potentially dangerous chemicals in it) and want to see (on a certain timeframe) where the modelled values exceed certain health limits...

Should I create an issue?

Regards,

Richard Duivenvoorde


From charles at kartoza.com  Thu Jun 17 13:17:53 2021
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Thu, 17 Jun 2021 22:17:53 +0200
Subject: [QGIS-Developer] It's time to contribute to the Changelog for
 QGIS 3.20!
In-Reply-To: <1623401506329-0.post@n6.nabble.com>
References: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
 <1623399694935-0.post@n6.nabble.com>
 <CAK2Kqic4mvJp2PWvKL5hN7K9WU3y-rfJEJ-VnGeirAGROWaMNg@mail.gmail.com>
 <1623401506329-0.post@n6.nabble.com>
Message-ID: <CAK2KqieHNikk9JEB4p_OU4OyodpmgtrPbuDiaFRVOCvWXof9=A@mail.gmail.com>

I have captured additional entries for the following PRs:

https://github.com/qgis/QGIS/pull/42326
https://github.com/qgis/QGIS/pull/42286
https://github.com/qgis/QGIS/pull/41724
https://github.com/qgis/QGIS/pull/43193
https://github.com/qgis/QGIS/pull/42588
https://github.com/qgis/QGIS/pull/42401
https://github.com/qgis/QGIS/pull/41208
https://github.com/qgis/QGIS/pull/42587
https://github.com/qgis/QGIS/pull/42289
https://github.com/qgis/QGIS/pull/43559

The platform does retain the links to the original pull request... But I
don't think they are pulled through into the feed. Perhaps this CSV output
is a feature request for the changelog platform.

The ChangelogHarvested label is also used to identify items which have been
added to the changelog. You can use "-label:ChangelogHarvested" to exclude
them from PR searches on GitHub.

Note that sometimes a single feature is extended with multiple PRs within a
single release cycle, in which case the changelog entries are combined
where reasonable, so you may not find an entry for every PR with the
Feature or ChangelogHarvested labels.

On Fri, 11 Jun 2021 at 10:51, Tot? <pigrecoinfinito at gmail.com> wrote:

> For the future I would like to suggest to create a CSV file with the titles
> of the new features and the link to the PR, this would facilitate the
> verification of the new features within the changelog.
>
> to search for features I used this filter:
>
>
> https://github.com/qgis/QGIS/pulls?q=is%3Apr+is%3Aclosed+label%3Afeature+merged%3A2021-02-18T00%3A00%3A00Z..2021-06-11T00%3A00%3A00Z+
>
> thank you so much for the great job
>
>
>
>
> -----
> https://pigrecoinfinito.com/
> --
> Sent from:
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210617/aecfb366/attachment.html>

From tim at kartoza.com  Thu Jun 17 15:36:06 2021
From: tim at kartoza.com (Tim Sutton)
Date: Thu, 17 Jun 2021 23:36:06 +0100
Subject: [QGIS-Developer] It's time to contribute to the Changelog for
 QGIS 3.20!
In-Reply-To: <CAK2KqieHNikk9JEB4p_OU4OyodpmgtrPbuDiaFRVOCvWXof9=A@mail.gmail.com>
References: <CAES-DZSyH8VDvsBnej6rRFkNCwJaNqFQrnwCuJuE_1m9v8-0sQ@mail.gmail.com>
 <1623399694935-0.post@n6.nabble.com>
 <CAK2Kqic4mvJp2PWvKL5hN7K9WU3y-rfJEJ-VnGeirAGROWaMNg@mail.gmail.com>
 <1623401506329-0.post@n6.nabble.com>
 <CAK2KqieHNikk9JEB4p_OU4OyodpmgtrPbuDiaFRVOCvWXof9=A@mail.gmail.com>
Message-ID: <CAES-DZTLOhDzkw6v-ZHDXUt-LO9LK1gOAu=6sRkHMwmg0Nd67A@mail.gmail.com>

Thanks so much for taking care of this Charles!

Regards

Tim

On Thu, Jun 17, 2021 at 9:18 PM Charles Dixon-Paver <charles at kartoza.com>
wrote:

> I have captured additional entries for the following PRs:
>
> https://github.com/qgis/QGIS/pull/42326
> https://github.com/qgis/QGIS/pull/42286
> https://github.com/qgis/QGIS/pull/41724
> https://github.com/qgis/QGIS/pull/43193
> https://github.com/qgis/QGIS/pull/42588
> https://github.com/qgis/QGIS/pull/42401
> https://github.com/qgis/QGIS/pull/41208
> https://github.com/qgis/QGIS/pull/42587
> https://github.com/qgis/QGIS/pull/42289
> https://github.com/qgis/QGIS/pull/43559
>
> The platform does retain the links to the original pull request... But I
> don't think they are pulled through into the feed. Perhaps this CSV output
> is a feature request for the changelog platform.
>
> The ChangelogHarvested label is also used to identify items which have
> been added to the changelog. You can use "-label:ChangelogHarvested" to
> exclude them from PR searches on GitHub.
>
> Note that sometimes a single feature is extended with multiple PRs within
> a single release cycle, in which case the changelog entries are combined
> where reasonable, so you may not find an entry for every PR with the
> Feature or ChangelogHarvested labels.
>
> On Fri, 11 Jun 2021 at 10:51, Tot? <pigrecoinfinito at gmail.com> wrote:
>
>> For the future I would like to suggest to create a CSV file with the
>> titles
>> of the new features and the link to the PR, this would facilitate the
>> verification of the new features within the changelog.
>>
>> to search for features I used this filter:
>>
>>
>> https://github.com/qgis/QGIS/pulls?q=is%3Apr+is%3Aclosed+label%3Afeature+merged%3A2021-02-18T00%3A00%3A00Z..2021-06-11T00%3A00%3A00Z+
>>
>> thank you so much for the great job
>>
>>
>>
>>
>> -----
>> https://pigrecoinfinito.com/
>> --
>> Sent from:
>> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210617/e49f1a57/attachment.html>

From a.neumann at carto.net  Thu Jun 17 23:51:14 2021
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 18 Jun 2021 08:51:14 +0200
Subject: [QGIS-Developer] QGIS Server: default values for
 GetLegendGraphics (fonts, symbol sizes, etc.)
In-Reply-To: <c12a03fa-c294-1329-9dc3-1cee51b3c3c3@di.uminho.pt>
References: <ea26dd506d2151ff1a51170d8ae79de5@carto.net>
 <c12a03fa-c294-1329-9dc3-1cee51b3c3c3@di.uminho.pt>
Message-ID: <ad134a8fa92c62bb85c7e3bb8c8ac594@carto.net>

Hi Jorge,

Thank you for your reply.

Do you know where in the QGIS project these LegendGraphic or legend 
style settings would be configured/stored?

Or could one use the .ini file to store such settings globally?

Your suggestion about Apache rewrite rules might be a good workaround 
for now, but it would be nice being able to set this through other 
means, ideally globally for all projects.

Thanks for this discussion!

Andreas

On 2021-06-17 18:24, Jorge Gustavo Rocha wrote:

> Hi Andreas,
> 
> The default values are in fact the values used in the QGIS project.
> These GetLegendGraphics parameters are used to overwrite those default
> settings.
> 
> These are parameters and are not read from the environment. It should
> not be difficult to read them from the environment too, but it requires
> some additional logic on the server side.
> 
> Some time ago, in our local municipality, I added some rewrite rules to
> Apache to use the same font in each GetLegendGraphics request, since 
> not
> all people were using the same font on QGIS projects. The rewrite just
> adds
> &TRANSPARENT=true&ITEMFONTFAMILY=FreightSans&LAYERFONTFAMILY=FreightSans
> to each GetLengenGraphic request. The legend was much more uniform with
> this simple rewrite.
> 
> As a workaround, I suggest something like these rewrite rules on the
> server side.
> 
> Regards,
> 
> Jorge
> 
> On 17/06/21 16:33, Andreas Neumann wrote:
> 
>> Hi,
>> 
>> I have a question regarding the default values for changing the look 
>> and
>> feel of GetLegendGraphics as described at
>> https://docs.qgis.org/3.16/en/docs/server_manual/services.html#getlegendgraphics
>> <https://docs.qgis.org/3.16/en/docs/server_manual/services.html#getlegendgraphics>
>> (e.g. LAYERFONTFAMILY, SYMBOLWIDTH, etc.).
>> 
>> Is there a way to specify "default" values  for these settings, e.g. 
>> in
>> an environment variable or through other means?
>> 
>> Thank you if you know anything about it.
>> 
>> Andreas
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> J. Gustavo
> --
> Jorge Gustavo Rocha
> Departamento de Inform?tica
> Universidade do Minho
> 4710-057 Braga
> Gabinete 3.29 (Piso 3)
> Tel: +351 253604480
> Fax: +351 253604471
> M?vel: +351 910333888
> skype: nabocudnosor
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/9f5106a5/attachment-0001.html>

From paul.vangenuchten at geocat.net  Fri Jun 18 00:57:49 2021
From: paul.vangenuchten at geocat.net (Paul van Genuchten)
Date: Fri, 18 Jun 2021 09:57:49 +0200
Subject: [QGIS-Developer] no collections displayed in wfs3
In-Reply-To: <mailman.21.1623351602.9379.qgis-developer@lists.osgeo.org>
References: <mailman.21.1623351602.9379.qgis-developer@lists.osgeo.org>
Message-ID: <FB152CE9-DA47-47CA-839A-7969247CF9CB@geocat.net>

Hi list, At Geonovum (netherlands) we?re operating an environment to study a number of OGC API Features implementations.

We?ve aded qgis server from 3.18 and 3.16 docker image maintained by camp to camp (https://github.com/camptocamp/docker-qgis-server). In both cases we noticed the /wfs3/collections endpoint did not display any collections, but the wms-capabilities showed the layers of our project without problems. The log didn?t show any warnings. 

Do you have some hints on how i could debug the situation?

Kind regards, Paul.



From apasotti at gmail.com  Fri Jun 18 01:17:29 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 18 Jun 2021 10:17:29 +0200
Subject: [QGIS-Developer] no collections displayed in wfs3
In-Reply-To: <FB152CE9-DA47-47CA-839A-7969247CF9CB@geocat.net>
References: <mailman.21.1623351602.9379.qgis-developer@lists.osgeo.org>
 <FB152CE9-DA47-47CA-839A-7969247CF9CB@geocat.net>
Message-ID: <CAL5Q670cHsJ3Cj5YOsf6mb4-0ENnFdSQMhPwqqJY8Hj7Gy-6Mw@mail.gmail.com>

On Fri, Jun 18, 2021 at 9:57 AM Paul van Genuchten <
paul.vangenuchten at geocat.net> wrote:

> Hi list, At Geonovum (netherlands) we?re operating an environment to study
> a number of OGC API Features implementations.
>
> We?ve aded qgis server from 3.18 and 3.16 docker image maintained by camp
> to camp (https://github.com/camptocamp/docker-qgis-server). In both cases
> we noticed the /wfs3/collections endpoint did not display any collections,
> but the wms-capabilities showed the layers of our project without problems.
> The log didn?t show any warnings.
>
> Do you have some hints on how i could debug the situation?
>

The logs should definitely show something.

Anyway, the problem is probably caused by QGIS_PROJECT_FILE not being
correctly set.

How do you pass it to the server?

Note that MAP=/path is not allowed by the OAPIF standard (QGIS should parse
it correctly though).


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/a33fc0dc/attachment.html>

From paul.vangenuchten at geocat.net  Fri Jun 18 01:26:23 2021
From: paul.vangenuchten at geocat.net (Paul van Genuchten)
Date: Fri, 18 Jun 2021 10:26:23 +0200
Subject: [QGIS-Developer] no collections displayed in wfs3
In-Reply-To: <CAL5Q670cHsJ3Cj5YOsf6mb4-0ENnFdSQMhPwqqJY8Hj7Gy-6Mw@mail.gmail.com>
References: <mailman.21.1623351602.9379.qgis-developer@lists.osgeo.org>
 <FB152CE9-DA47-47CA-839A-7969247CF9CB@geocat.net>
 <CAL5Q670cHsJ3Cj5YOsf6mb4-0ENnFdSQMhPwqqJY8Hj7Gy-6Mw@mail.gmail.com>
Message-ID: <803463F0-5D5F-4E57-86F1-47FDE05A967B@geocat.net>

Hi Alessandro, thank for your reply

We pass in the project file location using environment variable (as suggested by https://github.com/camptocamp/docker-qgis-server <https://github.com/camptocamp/docker-qgis-server>)

    environment:
      - QGIS_PROJECT_FILE:/myqgisserver/project.qgs

But also used the default location for that image

/etc/qgisserver/project.qgs

But thanks for the hints, i?ll look a bit more on that side



Kind regards,

Paul van Genuchten
GeoCat BV, Bennekom, the Netherlands

Mon & wed 8.30-17.30 CET
Tue, thu & fri 8:30-13:30 CET 







> On 18 Jun 2021, at 10:17, Alessandro Pasotti <apasotti at gmail.com> wrote:
> 
> 
> 
> On Fri, Jun 18, 2021 at 9:57 AM Paul van Genuchten <paul.vangenuchten at geocat.net <mailto:paul.vangenuchten at geocat.net>> wrote:
> Hi list, At Geonovum (netherlands) we?re operating an environment to study a number of OGC API Features implementations.
> 
> We?ve aded qgis server from 3.18 and 3.16 docker image maintained by camp to camp (https://github.com/camptocamp/docker-qgis-server <https://github.com/camptocamp/docker-qgis-server>). In both cases we noticed the /wfs3/collections endpoint did not display any collections, but the wms-capabilities showed the layers of our project without problems. The log didn?t show any warnings. 
> 
> Do you have some hints on how i could debug the situation?
> 
> The logs should definitely show something.
> 
> Anyway, the problem is probably caused by QGIS_PROJECT_FILE not being correctly set. 
> 
> How do you pass it to the server? 
> 
> Note that MAP=/path is not allowed by the OAPIF standard (QGIS should parse it correctly though).
> 
> 
> -- 
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net <https://www.qcooperative.net/>
> ItOpen:   www.itopen.it <http://www.itopen.it/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/22124c13/attachment.html>

From paul.vangenuchten at geocat.net  Fri Jun 18 02:40:00 2021
From: paul.vangenuchten at geocat.net (Paul van Genuchten)
Date: Fri, 18 Jun 2021 11:40:00 +0200
Subject: [QGIS-Developer] no collections displayed in wfs3
In-Reply-To: <CAL5Q670cHsJ3Cj5YOsf6mb4-0ENnFdSQMhPwqqJY8Hj7Gy-6Mw@mail.gmail.com>
References: <mailman.21.1623351602.9379.qgis-developer@lists.osgeo.org>
 <FB152CE9-DA47-47CA-839A-7969247CF9CB@geocat.net>
 <CAL5Q670cHsJ3Cj5YOsf6mb4-0ENnFdSQMhPwqqJY8Hj7Gy-6Mw@mail.gmail.com>
Message-ID: <CCC0393C-4CC3-4E7F-A837-E3F3B72CFE2A@geocat.net>

Hi Allessandro, i just tried with the 3.10 image also, but got similar results.

If i enforce an error in one of the layers, those errors are actually logged, but still I don?t see any collections (in html and or json encoding). 

My log is here:

```
49686 - 172.19.0.12 - - [18/Jun/2021:09:33:56 +0000] "GET /qgis/wfs3/static/style.css HTTP/1.1" 200 633 "http://localhost:8000/qgis/wfs3/collections?" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.77 Safari/537.36"
09:33:56 INFO Server[74]: ******************** New request ***************
09:33:56 INFO Server[74]: Request URL: http://localhost:8000/qgis/wfs3/static/jsonFormatter.min.js?
09:33:56 INFO Server[74]: Environment:
09:33:56 INFO Server[74]: ------------------------------------------------
09:33:56 INFO Server[74]: SERVER_NAME: localhost
09:33:56 INFO Server[74]: REQUEST_URI: /qgis/wfs3/static/jsonFormatter.min.js
09:33:56 INFO Server[74]: SCRIPT_NAME: /qgis/wfs3/static/jsonFormatter.min.js
09:33:56 INFO Server[74]: REMOTE_ADDR: 172.19.0.12
09:33:56 INFO Server[74]: SERVER_PORT: 8000
09:33:56 INFO Server[74]: QUERY_STRING: 
09:33:56 INFO Server[74]: REQUEST_METHOD: GET
09:33:56 INFO Server[74]: HTTP_ACCEPT: */*
09:33:56 INFO Server[74]: HTTP_USER_AGENT: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.77 Safari/537.36
09:33:56 INFO Server[74]: QGIS_PROJECT_FILE: /etc/qgisserver/project.qgs
09:33:56 INFO Server[74]: Trying URL path: /qgis/wfs3/static/jsonFormatter.min.js for /wfs3
09:33:56 INFO Server[74]: API OGC WFS3 (Draft) accepts the URL path /qgis/wfs3/static/jsonFormatter.min.js 
09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html)?$ 
09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html)?$ 
09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /collections(\.json|\.html)?$ 
09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+?)(\.json|\.html)?$ 
09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /conformance 
09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /static/(?<staticFilePath>.*)$ 
09:33:56 INFO Server[74]: Found API handler static
09:33:56 INFO Server[74]: Request finished in 2 ms
```

Any ideas?


> On 18 Jun 2021, at 10:17, Alessandro Pasotti <apasotti at gmail.com> wrote:
> 
> 
> 
> On Fri, Jun 18, 2021 at 9:57 AM Paul van Genuchten <paul.vangenuchten at geocat.net <mailto:paul.vangenuchten at geocat.net>> wrote:
> Hi list, At Geonovum (netherlands) we?re operating an environment to study a number of OGC API Features implementations.
> 
> We?ve aded qgis server from 3.18 and 3.16 docker image maintained by camp to camp (https://github.com/camptocamp/docker-qgis-server <https://github.com/camptocamp/docker-qgis-server>). In both cases we noticed the /wfs3/collections endpoint did not display any collections, but the wms-capabilities showed the layers of our project without problems. The log didn?t show any warnings. 
> 
> Do you have some hints on how i could debug the situation?
> 
> The logs should definitely show something.
> 
> Anyway, the problem is probably caused by QGIS_PROJECT_FILE not being correctly set. 
> 
> How do you pass it to the server? 
> 
> Note that MAP=/path is not allowed by the OAPIF standard (QGIS should parse it correctly though).
> 
> 
> -- 
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net <https://www.qcooperative.net/>
> ItOpen:   www.itopen.it <http://www.itopen.it/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/4c822d38/attachment-0001.html>

From apasotti at gmail.com  Fri Jun 18 02:42:38 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 18 Jun 2021 11:42:38 +0200
Subject: [QGIS-Developer] no collections displayed in wfs3
In-Reply-To: <CCC0393C-4CC3-4E7F-A837-E3F3B72CFE2A@geocat.net>
References: <mailman.21.1623351602.9379.qgis-developer@lists.osgeo.org>
 <FB152CE9-DA47-47CA-839A-7969247CF9CB@geocat.net>
 <CAL5Q670cHsJ3Cj5YOsf6mb4-0ENnFdSQMhPwqqJY8Hj7Gy-6Mw@mail.gmail.com>
 <CCC0393C-4CC3-4E7F-A837-E3F3B72CFE2A@geocat.net>
Message-ID: <CAL5Q670of=Dm_U_6=h66Q1Tyi3kujAnZ7k2qo_J++y9mY_vcMg@mail.gmail.com>

Maybe a stupid question: does /etc/qgisserver/project.qgs  has any WFS
enabled layer?


On Fri, Jun 18, 2021 at 11:40 AM Paul van Genuchten <
paul.vangenuchten at geocat.net> wrote:

> Hi Allessandro, i just tried with the 3.10 image also, but got similar
> results.
>
> If i enforce an error in one of the layers, those errors are actually
> logged, but still I don?t see any collections (in html and or json
> encoding).
>
> My log is here:
>
> ```
> 49686 - 172.19.0.12 - - [18/Jun/2021:09:33:56 +0000] "GET
> /qgis/wfs3/static/style.css HTTP/1.1" 200 633 "
> http://localhost:8000/qgis/wfs3/collections?" "Mozilla/5.0 (Macintosh;
> Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko)
> Chrome/91.0.4472.77 Safari/537.36"
> 09:33:56 INFO Server[74]: ******************** New request ***************
> 09:33:56 INFO Server[74]: Request URL:
> http://localhost:8000/qgis/wfs3/static/jsonFormatter.min.js?
> 09:33:56 INFO Server[74]: Environment:
> 09:33:56 INFO Server[74]: ------------------------------------------------
> 09:33:56 INFO Server[74]: SERVER_NAME: localhost
> 09:33:56 INFO Server[74]: REQUEST_URI:
> /qgis/wfs3/static/jsonFormatter.min.js
> 09:33:56 INFO Server[74]: SCRIPT_NAME:
> /qgis/wfs3/static/jsonFormatter.min.js
> 09:33:56 INFO Server[74]: REMOTE_ADDR: 172.19.0.12
> 09:33:56 INFO Server[74]: SERVER_PORT: 8000
> 09:33:56 INFO Server[74]: QUERY_STRING:
> 09:33:56 INFO Server[74]: REQUEST_METHOD: GET
> 09:33:56 INFO Server[74]: HTTP_ACCEPT: */*
> 09:33:56 INFO Server[74]: HTTP_USER_AGENT: Mozilla/5.0 (Macintosh; Intel
> Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko)
> Chrome/91.0.4472.77 Safari/537.36
> 09:33:56 INFO Server[74]: QGIS_PROJECT_FILE: /etc/qgisserver/project.qgs
> 09:33:56 INFO Server[74]: Trying URL path:
> /qgis/wfs3/static/jsonFormatter.min.js for /wfs3
> 09:33:56 INFO Server[74]: API OGC WFS3 (Draft) accepts the URL path
> /qgis/wfs3/static/jsonFormatter.min.js
> 09:33:56 INFO Server[74]: Checking API path
> /qgis/wfs3/static/jsonFormatter.min.js for
> /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html)?$
> 09:33:56 INFO Server[74]: Checking API path
> /qgis/wfs3/static/jsonFormatter.min.js for
> /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html)?$
> 09:33:56 INFO Server[74]: Checking API path
> /qgis/wfs3/static/jsonFormatter.min.js for /collections(\.json|\.html)?$
> 09:33:56 INFO Server[74]: Checking API path
> /qgis/wfs3/static/jsonFormatter.min.js for
> /collections/(?<collectionId>[^/]+?)(\.json|\.html)?$
> 09:33:56 INFO Server[74]: Checking API path
> /qgis/wfs3/static/jsonFormatter.min.js for /conformance
> 09:33:56 INFO Server[74]: Checking API path
> /qgis/wfs3/static/jsonFormatter.min.js for /static/(?<staticFilePath>.*)$
> 09:33:56 INFO Server[74]: Found API handler static
> 09:33:56 INFO Server[74]: Request finished in 2 ms
> ```
>
> Any ideas?
>
>
> On 18 Jun 2021, at 10:17, Alessandro Pasotti <apasotti at gmail.com> wrote:
>
>
>
> On Fri, Jun 18, 2021 at 9:57 AM Paul van Genuchten <
> paul.vangenuchten at geocat.net> wrote:
>
>> Hi list, At Geonovum (netherlands) we?re operating an environment to
>> study a number of OGC API Features implementations.
>>
>> We?ve aded qgis server from 3.18 and 3.16 docker image maintained by camp
>> to camp (https://github.com/camptocamp/docker-qgis-server). In both
>> cases we noticed the /wfs3/collections endpoint did not display any
>> collections, but the wms-capabilities showed the layers of our project
>> without problems. The log didn?t show any warnings.
>>
>> Do you have some hints on how i could debug the situation?
>>
>
> The logs should definitely show something.
>
> Anyway, the problem is probably caused by QGIS_PROJECT_FILE not being
> correctly set.
>
> How do you pass it to the server?
>
> Note that MAP=/path is not allowed by the OAPIF standard (QGIS should
> parse it correctly though).
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
>
>

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/61efb3d5/attachment.html>

From denis.rouzaud at gmail.com  Fri Jun 18 05:12:44 2021
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Fri, 18 Jun 2021 14:12:44 +0200
Subject: [QGIS-Developer] release process and merging policy
Message-ID: <CAMtsY+bpranyCdJMSAtmCpOuH7fRVf_xDixKMiQqakSQyBR4JA@mail.gmail.com>

Hi all, hi J?rgen,

Is there a place where it's explained how the release process works with
respect to the master branch and the creation of the new release branch?

My practical questions are:
* when shall we stop merging bugfixes ? or can we continue merging without
issues? (IIRC I think we have to hold for a bit?)
* when can we start merging features to master again? (as soon as the new
release-3_x branch is created?)

Cheers,
Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/215b192b/attachment.html>

From rdmailings at duif.net  Fri Jun 18 08:03:37 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 18 Jun 2021 17:03:37 +0200
Subject: [QGIS-Developer] Visual Changelog for 3.20
Message-ID: <5c449ce7-6f65-08bd-8ffc-2d0014ca55fd@duif.net>

Hi,

Anybody is still busy with items on 
https://changelog.qgis.org/en/qgis/version/3.20/

Or can I pull it in the website and rebuild the site with the changelog in it?
(I see Andreas(?) already added the Notable fixes?)

Regards,

Richard Duivenvoorde

From a.neumann at carto.net  Fri Jun 18 08:19:47 2021
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 18 Jun 2021 17:19:47 +0200
Subject: [QGIS-Developer] Visual Changelog for 3.20
In-Reply-To: <5c449ce7-6f65-08bd-8ffc-2d0014ca55fd@duif.net>
References: <5c449ce7-6f65-08bd-8ffc-2d0014ca55fd@duif.net>
Message-ID: <37f2dcb08c7a06d9e0db42957aeb0273@carto.net>

Hi Richard,

Yes - the notable fixes are already done.

Yeah - I'm not too late this time ;-)

Thank you for working on the visual changelog publication!

Andreas

On 2021-06-18 17:03, Richard Duivenvoorde wrote:

> Hi,
> 
> Anybody is still busy with items on
> https://changelog.qgis.org/en/qgis/version/3.20/
> 
> Or can I pull it in the website and rebuild the site with the changelog 
> in it?
> (I see Andreas(?) already added the Notable fixes?)
> 
> Regards,
> 
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/9d8586fc/attachment-0001.html>

From charles at kartoza.com  Fri Jun 18 08:56:27 2021
From: charles at kartoza.com (Charles Dixon-Paver)
Date: Fri, 18 Jun 2021 17:56:27 +0200
Subject: [QGIS-Developer] Visual Changelog for 3.20
In-Reply-To: <37f2dcb08c7a06d9e0db42957aeb0273@carto.net>
References: <5c449ce7-6f65-08bd-8ffc-2d0014ca55fd@duif.net>
 <37f2dcb08c7a06d9e0db42957aeb0273@carto.net>
Message-ID: <CAK2KqifpoVkC+djdM8ObXb9bf-w+wJ9ADwzhfhP9KjFP-y5onw@mail.gmail.com>

I think I'm done there unless anyone is still pointing out issues...

On Fri, 18 Jun 2021 at 17:19, Andreas Neumann <a.neumann at carto.net> wrote:

> Hi Richard,
>
> Yes - the notable fixes are already done.
>
> Yeah - I'm not too late this time ;-)
>
> Thank you for working on the visual changelog publication!
>
> Andreas
>
>
> On 2021-06-18 17:03, Richard Duivenvoorde wrote:
>
> Hi,
>
> Anybody is still busy with items on
> https://changelog.qgis.org/en/qgis/version/3.20/
>
> Or can I pull it in the website and rebuild the site with the changelog in
> it?
> (I see Andreas(?) already added the Notable fixes?)
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/f993a9f6/attachment.html>

From jef at norbit.de  Fri Jun 18 09:04:17 2021
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 18 Jun 2021 18:04:17 +0200
Subject: [QGIS-Developer] release process and merging policy
In-Reply-To: <CAMtsY+bpranyCdJMSAtmCpOuH7fRVf_xDixKMiQqakSQyBR4JA@mail.gmail.com>
References: <CAMtsY+bpranyCdJMSAtmCpOuH7fRVf_xDixKMiQqakSQyBR4JA@mail.gmail.com>
Message-ID: <20210618160417.zlanndmofxg425tf@norbit.de>

Hi Denis,

On Fri, 18. Jun 2021 at 14:12:44 +0200, Denis Rouzaud wrote:
> Is there a place where it's explained how the release process works with
> respect to the master branch and the creation of the new release branch?

I don't think so.  The release itself is done with scripts/release.pl.


> My practical questions are:
> * when shall we stop merging bugfixes ? or can we continue merging without
>   issues? (IIRC I think we have to hold for a bit?)

Merging stuff to master between the release time and the push of the release
commits/branches would be bad (esp. the translations take a while to pull and
push).

Committing new fixes to the fresh release branch could also be postponed a bit
before the packages are out - in case there have to be some packaging related
updates for stuff that pops up during packaging.  Otherwise those fresh fixes
would also end up in the packages.  Although that would not be actual harm -
probably right the opposite - but maybe unexpected.

Committing to the master branch right after the release is fine however.

> * when can we start merging features to master again? (as soon as the new
>   release-3_x branch is created?)

Yes.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/0fd3fb36/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/0fd3fb36/attachment.ksh>

From rdmailings at duif.net  Fri Jun 18 12:00:52 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 18 Jun 2021 21:00:52 +0200
Subject: [QGIS-Developer] Visual Changelog for 3.20
In-Reply-To: <CAK2KqifpoVkC+djdM8ObXb9bf-w+wJ9ADwzhfhP9KjFP-y5onw@mail.gmail.com>
References: <5c449ce7-6f65-08bd-8ffc-2d0014ca55fd@duif.net>
 <37f2dcb08c7a06d9e0db42957aeb0273@carto.net>
 <CAK2KqifpoVkC+djdM8ObXb9bf-w+wJ9ADwzhfhP9KjFP-y5onw@mail.gmail.com>
Message-ID: <26c799ad-ec15-36eb-2518-30d7d3ab0873@duif.net>

Ok, copied and added.

Should show up next rebuild after just after midnight.

Richard

On 6/18/21 5:56 PM, Charles Dixon-Paver wrote:
> I think I'm done there unless anyone is still pointing out issues...
> 
> On Fri, 18 Jun 2021 at 17:19, Andreas Neumann <a.neumann at carto.net <mailto:a.neumann at carto.net>> wrote:
> 
>     Hi Richard,
> 
>     Yes - the notable fixes are already done.
> 
>     Yeah - I'm not too late this time ;-)
> 
>     Thank you for working on the visual changelog publication!
> 
>     Andreas
> 
> 
>     On 2021-06-18 17:03, Richard Duivenvoorde wrote:
> 
>>     Hi,
>>
>>     Anybody is still busy with items on
>>     https://changelog.qgis.org/en/qgis/version/3.20/ <https://changelog.qgis.org/en/qgis/version/3.20/>
>>
>>     Or can I pull it in the website and rebuild the site with the changelog in it?
>>     (I see Andreas(?) already added the Notable fixes?)
>>
>>     Regards,
>>
>>     Richard Duivenvoorde
>>     _______________________________________________
>>     QGIS-Developer mailing list
>>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 
> 
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 


From paul.vangenuchten at geocat.net  Fri Jun 18 12:26:24 2021
From: paul.vangenuchten at geocat.net (Paul van Genuchten)
Date: Fri, 18 Jun 2021 21:26:24 +0200
Subject: [QGIS-Developer] no collections displayed in wfs3
In-Reply-To: <CAL5Q670of=Dm_U_6=h66Q1Tyi3kujAnZ7k2qo_J++y9mY_vcMg@mail.gmail.com>
References: <mailman.21.1623351602.9379.qgis-developer@lists.osgeo.org>
 <FB152CE9-DA47-47CA-839A-7969247CF9CB@geocat.net>
 <CAL5Q670cHsJ3Cj5YOsf6mb4-0ENnFdSQMhPwqqJY8Hj7Gy-6Mw@mail.gmail.com>
 <CCC0393C-4CC3-4E7F-A837-E3F3B72CFE2A@geocat.net>
 <CAL5Q670of=Dm_U_6=h66Q1Tyi3kujAnZ7k2qo_J++y9mY_vcMg@mail.gmail.com>
Message-ID: <502835D4-C370-42BE-8B31-1A3B10BDD5BA@geocat.net>

Yet another RTFM. Thank you for that pointer Allessandro, you saved my day!

Have a good weekend, ciao Paul.



> On 18 Jun 2021, at 11:42, Alessandro Pasotti <apasotti at gmail.com> wrote:
> 
> 
> Maybe a stupid question: does /etc/qgisserver/project.qgs  has any WFS enabled layer?
> 
> 
> On Fri, Jun 18, 2021 at 11:40 AM Paul van Genuchten <paul.vangenuchten at geocat.net <mailto:paul.vangenuchten at geocat.net>> wrote:
> Hi Allessandro, i just tried with the 3.10 image also, but got similar results.
> 
> If i enforce an error in one of the layers, those errors are actually logged, but still I don?t see any collections (in html and or json encoding). 
> 
> My log is here:
> 
> ```
> 49686 - 172.19.0.12 - - [18/Jun/2021:09:33:56 +0000] "GET /qgis/wfs3/static/style.css HTTP/1.1" 200 633 "http://localhost:8000/qgis/wfs3/collections? <http://localhost:8000/qgis/wfs3/collections?>" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.77 Safari/537.36"
> 09:33:56 INFO Server[74]: ******************** New request ***************
> 09:33:56 INFO Server[74]: Request URL: http://localhost:8000/qgis/wfs3/static/jsonFormatter.min.js? <http://localhost:8000/qgis/wfs3/static/jsonFormatter.min.js?>
> 09:33:56 INFO Server[74]: Environment:
> 09:33:56 INFO Server[74]: ------------------------------------------------
> 09:33:56 INFO Server[74]: SERVER_NAME: localhost
> 09:33:56 INFO Server[74]: REQUEST_URI: /qgis/wfs3/static/jsonFormatter.min.js
> 09:33:56 INFO Server[74]: SCRIPT_NAME: /qgis/wfs3/static/jsonFormatter.min.js
> 09:33:56 INFO Server[74]: REMOTE_ADDR: 172.19.0.12
> 09:33:56 INFO Server[74]: SERVER_PORT: 8000
> 09:33:56 INFO Server[74]: QUERY_STRING: 
> 09:33:56 INFO Server[74]: REQUEST_METHOD: GET
> 09:33:56 INFO Server[74]: HTTP_ACCEPT: */*
> 09:33:56 INFO Server[74]: HTTP_USER_AGENT: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.77 Safari/537.36
> 09:33:56 INFO Server[74]: QGIS_PROJECT_FILE: /etc/qgisserver/project.qgs
> 09:33:56 INFO Server[74]: Trying URL path: /qgis/wfs3/static/jsonFormatter.min.js for /wfs3
> 09:33:56 INFO Server[74]: API OGC WFS3 (Draft) accepts the URL path /qgis/wfs3/static/jsonFormatter.min.js 
> 09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+)/items(\.geojson|\.json|\.html)?$ 
> 09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+)/items/(?<featureId>[^/]+?)(\.json|\.geojson|\.html)?$ 
> 09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /collections(\.json|\.html)?$ 
> 09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /collections/(?<collectionId>[^/]+?)(\.json|\.html)?$ 
> 09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /conformance 
> 09:33:56 INFO Server[74]: Checking API path /qgis/wfs3/static/jsonFormatter.min.js for /static/(?<staticFilePath>.*)$ 
> 09:33:56 INFO Server[74]: Found API handler static
> 09:33:56 INFO Server[74]: Request finished in 2 ms
> ```
> 
> Any ideas?
> 
> 
>> On 18 Jun 2021, at 10:17, Alessandro Pasotti <apasotti at gmail.com <mailto:apasotti at gmail.com>> wrote:
>> 
>> 
>> 
>> On Fri, Jun 18, 2021 at 9:57 AM Paul van Genuchten <paul.vangenuchten at geocat.net <mailto:paul.vangenuchten at geocat.net>> wrote:
>> Hi list, At Geonovum (netherlands) we?re operating an environment to study a number of OGC API Features implementations.
>> 
>> We?ve aded qgis server from 3.18 and 3.16 docker image maintained by camp to camp (https://github.com/camptocamp/docker-qgis-server <https://github.com/camptocamp/docker-qgis-server>). In both cases we noticed the /wfs3/collections endpoint did not display any collections, but the wms-capabilities showed the layers of our project without problems. The log didn?t show any warnings. 
>> 
>> Do you have some hints on how i could debug the situation?
>> 
>> The logs should definitely show something.
>> 
>> Anyway, the problem is probably caused by QGIS_PROJECT_FILE not being correctly set. 
>> 
>> How do you pass it to the server? 
>> 
>> Note that MAP=/path is not allowed by the OAPIF standard (QGIS should parse it correctly though).
>> 
>> 
>> -- 
>> Alessandro Pasotti
>> QCooperative:  www.qcooperative.net <https://www.qcooperative.net/>
>> ItOpen:   www.itopen.it <http://www.itopen.it/>
> 
> 
> -- 
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net <https://www.qcooperative.net/>
> ItOpen:   www.itopen.it <http://www.itopen.it/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/63c2e3e7/attachment.html>

From denis.rouzaud at gmail.com  Fri Jun 18 12:54:53 2021
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Fri, 18 Jun 2021 21:54:53 +0200
Subject: [QGIS-Developer] release process and merging policy
In-Reply-To: <20210618160417.zlanndmofxg425tf@norbit.de>
References: <CAMtsY+bpranyCdJMSAtmCpOuH7fRVf_xDixKMiQqakSQyBR4JA@mail.gmail.com>
 <20210618160417.zlanndmofxg425tf@norbit.de>
Message-ID: <CAMtsY+Y6-Eo94g1Ac7schNPVmDSiG7Q3b2AoTinetCUeqz+MjQ@mail.gmail.com>

Hi J?rgen,

Thanks for the clarifications, that helps!

Cheers,
Denis

On Fri, 18 Jun 2021, 18:04 J?rgen E. Fischer, <jef at norbit.de> wrote:

> Hi Denis,
>
> On Fri, 18. Jun 2021 at 14:12:44 +0200, Denis Rouzaud wrote:
> > Is there a place where it's explained how the release process works with
> > respect to the master branch and the creation of the new release branch?
>
> I don't think so.  The release itself is done with scripts/release.pl.
>
>
> > My practical questions are:
> > * when shall we stop merging bugfixes ? or can we continue merging
> without
> >   issues? (IIRC I think we have to hold for a bit?)
>
> Merging stuff to master between the release time and the push of the
> release
> commits/branches would be bad (esp. the translations take a while to pull
> and
> push).
>
> Committing new fixes to the fresh release branch could also be postponed a
> bit
> before the packages are out - in case there have to be some packaging
> related
> updates for stuff that pops up during packaging.  Otherwise those fresh
> fixes
> would also end up in the packages.  Although that would not be actual harm
> -
> probably right the opposite - but maybe unexpected.
>
> Committing to the master branch right after the release is fine however.
>
> > * when can we start merging features to master again? (as soon as the new
> >   release-3_x branch is created?)
>
> Yes.
>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210618/b2c974de/attachment-0001.html>

From pjduplooy.gis at gmail.com  Sat Jun 19 00:49:53 2021
From: pjduplooy.gis at gmail.com (Gandalf the Gray)
Date: Sat, 19 Jun 2021 09:49:53 +0200
Subject: [QGIS-Developer] WSLg
Message-ID: <CADsUavGo=J8B+6UN3MJiLDgxP0_bzWLknx_5mYjhBa+V-Fs29Q@mail.gmail.com>

MS has rolled out WSLg (https://github.com/microsoft/wslg)  which includes
support for Wayland and X11).

There are even drivers from Nvidia, Intel and AMD that works with this.

I have tried some graphics applications Iincluding QGIS, and I am really
surprised.

Really worth a look....
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210619/8e6f9cd5/attachment.html>

From tim at kartoza.com  Sun Jun 20 04:08:33 2021
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 20 Jun 2021 12:08:33 +0100
Subject: [QGIS-Developer] WSLg
In-Reply-To: <CADsUavGo=J8B+6UN3MJiLDgxP0_bzWLknx_5mYjhBa+V-Fs29Q@mail.gmail.com>
References: <CADsUavGo=J8B+6UN3MJiLDgxP0_bzWLknx_5mYjhBa+V-Fs29Q@mail.gmail.com>
Message-ID: <CAES-DZR7gmzMtop-d+okzT2t52VEcLgX_LB358JkSh3m2n3WOw@mail.gmail.com>

Nice! And to balance out the universe, you can also run the windows build
under wine (
https://gist.github.com/timlinux/8f5e76f3f5d7c10042356e0aa1da7676).

Regards

Tim

On Sat, Jun 19, 2021 at 8:50 AM Gandalf the Gray <pjduplooy.gis at gmail.com>
wrote:

> MS has rolled out WSLg (https://github.com/microsoft/wslg)  which
> includes support for Wayland and X11).
>
> There are even drivers from Nvidia, Intel and AMD that works with this.
>
> I have tried some graphics applications Iincluding QGIS, and I am really
> surprised.
>
> Really worth a look....
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210620/c12dd993/attachment.html>

From tim at kartoza.com  Sun Jun 20 05:04:34 2021
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 20 Jun 2021 13:04:34 +0100
Subject: [QGIS-Developer] Earth, Sun, Moon & Planets Plugin
In-Reply-To: <CABPxTTriJHA+2C2LQ4rYrZiEm=N4PqWvLRBB_9==bWXKAr2+kQ@mail.gmail.com>
References: <CABPxTTqjuT=QtRKgSDwiN7wYysFUdazscp42Mi6=OWOGemyF+w@mail.gmail.com>
 <CAES-DZRH5Vwq=9AeyHdNoxNbwuoTsR9JaKJY=k-jpjiCNKbxoQ@mail.gmail.com>
 <CABPxTTriJHA+2C2LQ4rYrZiEm=N4PqWvLRBB_9==bWXKAr2+kQ@mail.gmail.com>
Message-ID: <CAES-DZSnB47HZ1vecNYP8iFGXPO-4n3wEQmrgGFp8YnNKb2N6Q@mail.gmail.com>

Hi



On Wed, Jun 9, 2021 at 2:48 PM C Hamilton <adenaculture at gmail.com> wrote:

> Tim,
>
> Thanks for the suggestions. I will look into the temporal controller.
>
> As you know I like having the plugins self contained so that they run
> immediately. I have struggled with this issue in this case because there
> are no astronomical libraries that I can do this with, at least ones that
> are highly accurate and use ephemeris data rather than less accurate,
> simplified mathematical equations. I try to go for accuracy.
>
> For testing I will release a self contained windows version, but other
> users will need to pip install skyfield. In the case of the Date/Time Tools
> plugin I made it self contained so that the user didn't need to pip install
> anything, but that is what made it so large. It is reasonable for the user
> to download the ephemeris data separately. I may be able to extract a small
> set of the data that is within the 10 mb limit so that it is shipped with
> the plugin so that it works immediately. It just won't have a large date
> span, but if they are having to pip install skyfield, it is not going to be
> any more difficult to download the ephemeris data.
>

Another option to consider is to build an NSIS installer for your plugin. I
used to do this in the past for InaSAFE (see
https://github.com/inasafe/inasafe/blob/develop/scripts/windows-install-builder.nsi)
though I haven't maintained it so I don't know how well the approach still
works - it would need some tweaking to figure out which profile to install
the plugin into. Theoretically you could make one installer per platform
with all the binary bits encapsulated and then prompt the user to grab the
appropriate installer for their OS.

Regards

Tim



>
> I think it would be good for QGIS to have some astronomical libraries
> included. I've already had people express interest in this capability, but
> we will see how much overall interest there is in this plugin. It will get
> more acceptance if people do not need to pip install anything.
>
> Astropy is the most active and complex astronomy library. I chose not to
> use it because I didn't think it was needed for QGIS. I used Skyfield
> instead. It has the necessary functionality that I think is needed for QGIS
> projects. It is a modernized version of PyEphem by the same author and is
> recommended by the author over PyEphem.
>
> Thanks for your continued support,
>
> Calvin
>
> On Sat, Jun 5, 2021 at 1:04 PM Tim Sutton <tim at kartoza.com> wrote:
>
>> Hi
>>
>> Wow that looks beautiful! A couple of thoughts:
>>
>> 1) Rather than implementing your own slider logic I wonder if you could
>> hook in to the temporal controller?
>> 2) For platform specific components the normal practice is to a)
>> communicate with the plugins reviewers about why this is needed so that
>> they don't pre-emptively reject your plugin and b) normally pull down the
>> platform specific components as a post install step. I expect you will get
>> some resistance to adding a new dependency to QGIS core unless that
>> dependency is broadly useful, but you may be able to convince Jurgen and
>> Peter to bundle it into the Windows and macOS installers respectively.
>> 3) For that 100mb blob, similar to our discussion on the timezone work
>> you were doing, the preferred approach would be to fetch it as a
>> post-install download the first time you use the plugin.
>>
>> Thanks for making such interesting plugins!
>>
>> Regards
>>
>> Tim
>>
>

-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210620/4cc86ccb/attachment.html>

From tim at kartoza.com  Sun Jun 20 05:07:54 2021
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 20 Jun 2021 13:07:54 +0100
Subject: [QGIS-Developer] Qt/QML course
In-Reply-To: <eb9422da-a810-72a0-e2e2-8e158e98dbbb@duif.net>
References: <eb9422da-a810-72a0-e2e2-8e158e98dbbb@duif.net>
Message-ID: <CAES-DZTh9q8T=ASc=-c2Xkx2xAZvRXXwbjTtCRwjg=u3R38mZg@mail.gmail.com>

Hi

I tried out of curiosity to sign up for it but it seems their form does not
work. Curious if others have feedback on the course.

Regards

Tim

On Mon, Jun 14, 2021 at 8:30 PM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi,
>
> FYI
>
> Not sure what the future is of QML inside QGIS, but on some debian blog it
> was mentioned that this
>
> https://www.ics.com/events/qml-programming-fundamentals-and-beyond
>
> is a 'free' (if you provide a corporate email address) course to learn
> about QML and Qt. The blogger was talking about a 4 days course and was
> pretty positive about it (but I haven't looked to it myself) ...
> So if you want to tip your toes in QML...
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210620/6c98014c/attachment-0001.html>

From rdmailings at duif.net  Sun Jun 20 12:55:55 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 20 Jun 2021 21:55:55 +0200
Subject: [QGIS-Developer] Qt/QML course
In-Reply-To: <CAES-DZTh9q8T=ASc=-c2Xkx2xAZvRXXwbjTtCRwjg=u3R38mZg@mail.gmail.com>
References: <eb9422da-a810-72a0-e2e2-8e158e98dbbb@duif.net>
 <CAES-DZTh9q8T=ASc=-c2Xkx2xAZvRXXwbjTtCRwjg=u3R38mZg@mail.gmail.com>
Message-ID: <9caddd7b-bd7f-9733-90d7-43f0c779b455@duif.net>

On 6/20/21 2:07 PM, Tim Sutton wrote:
> Hi
> 
> I tried out of curiosity to sign up for it but it seems their form does not work. Curious if others have feedback on the course.

Hi Tim,

yes, I signed up myself successfully, and received a 'personal url' to the course material.

Subject was: "Thank you for registering for ICS' Virtual QML Programming Training" (in case people want to check their spam folders :-) )

Regards,

Richard Duivenvoorde

From rdmailings at duif.net  Sun Jun 20 21:13:23 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 21 Jun 2021 06:13:23 +0200
Subject: [QGIS-Developer] Download url's macOS QGIS missing version info
Message-ID: <33a31bd4-e69d-9787-68dc-fd562693aa72@duif.net>

Hi all,

https://github.com/qgis/QGIS-Website/issues/892
and 
https://github.com/qgis/QGIS-Website/issues/894

people are asking about certain versions of the macOS installer. But as the actual version is not readable in the url, we (as website issue peeps) cannot check the actual version of the installer (without macOS machine).

So these are either people too eager to check a newer version after a release, and packaging is just not finished, OR there is really an error.

I can onderstand the reason for not putting the version in the dmz name, but a solution (for me to be able to check) is to package the dmz in a zip with a version name in it (AND update the versions in th upload site then too, just like we do for the Windows installers).

Is this an doable option? Or should I just close macOS related issues with a "Please be patient while the macOS packagers are doing their work (and don't forget to donate time or money)" ;-)

Regards,

Richard Duivenvoorde

From alister.hood at gmail.com  Sun Jun 20 22:01:53 2021
From: alister.hood at gmail.com (Alister Hood)
Date: Mon, 21 Jun 2021 17:01:53 +1200
Subject: [QGIS-Developer] WSLg
In-Reply-To: <mailman.128.1624190887.1889.qgis-developer@lists.osgeo.org>
References: <mailman.128.1624190887.1889.qgis-developer@lists.osgeo.org>
Message-ID: <CAF6hL+UuuQF63ubmtVSghfdz=AinzERWKO42_N9AOg13eRnC1Q@mail.gmail.com>

For anyone who is tempted to "look", be aware that although Microsoft
hasn't encouraged it, it has been possible for years to run X apps and even
audio apps (using pulseaudio) in WSL.  This new "WSLg" might provide nice
out-of-the-box support, but it only works with WSL-2, which still has some
major downsides compared to WSL-1, so depending on what you want to do, you
might be better off with an old WSL-1 system.
1. WSL2 is touted as having better performance, but this relates to doing
things inside the Linux system.  It is apparently much slower for accessing
files in the windows system, so that is officially discouraged
2. It grows to take up all your disk space:
https://github.com/microsoft/WSL/issues/4699

Regards,
Alister



> Date: Sun, 20 Jun 2021 12:08:33 +0100
> From: Tim Sutton <tim at kartoza.com>
> To: Gandalf the Gray <pjduplooy.gis at gmail.com>
> Cc: qgis-dev <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] WSLg
> Message-ID:
>         <
> CAES-DZR7gmzMtop-d+okzT2t52VEcLgX_LB358JkSh3m2n3WOw at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Nice! And to balance out the universe, you can also run the windows build
> under wine (
> https://gist.github.com/timlinux/8f5e76f3f5d7c10042356e0aa1da7676).
>
> Regards
>
> Tim
>
> On Sat, Jun 19, 2021 at 8:50 AM Gandalf the Gray <pjduplooy.gis at gmail.com>
> wrote:
>
> > MS has rolled out WSLg (https://github.com/microsoft/wslg)  which
> > includes support for Wayland and X11).
> >
> > There are even drivers from Nvidia, Intel and AMD that works with this.
> >
> > I have tried some graphics applications Iincluding QGIS, and I am really
> > surprised.
> >
> > Really worth a look....
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210621/02c95341/attachment.html>

From peter.petrik at lutraconsulting.co.uk  Sun Jun 20 22:40:42 2021
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Mon, 21 Jun 2021 07:40:42 +0200
Subject: [QGIS-Developer] Download url's macOS QGIS missing version info
In-Reply-To: <33a31bd4-e69d-9787-68dc-fd562693aa72@duif.net>
References: <33a31bd4-e69d-9787-68dc-fd562693aa72@duif.net>
Message-ID: <CA+T_MsJ80C9jbaq+Rw1NYMU-ZsteLAQT8URXH0JKP5fNJDcj+g@mail.gmail.com>

Hi,

the link on webpage is just symbolic link to last versions SUCCESSFULLY
compiled. There was a massive blocker with the switch to C++17 in the last
versions, which was resolved by reinstallation of whole server and updating
all the tools to compile the stuff. Therefore the packager was not working
for some period of time. Normally, the PR and LTR builds should be
available within 24 hours after tagging of the qgis/QGIS server.  Sometime
I do not get notification that the builds are failing, so it is best to
send me a mail to notify me.

nightly:
https://qgis.org/downloads/macos/nightly
pr:
https://qgis.org/downloads/macos/pr
ltr:
https://qgis.org/downloads/macos/ltr

actual status could be also seen here:
https://github.com/qgis/QGIS-Mac-Packager

Kind regards,
Peter






On Mon, Jun 21, 2021 at 6:13 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi all,
>
> https://github.com/qgis/QGIS-Website/issues/892
> and
> https://github.com/qgis/QGIS-Website/issues/894
>
> people are asking about certain versions of the macOS installer. But as
> the actual version is not readable in the url, we (as website issue peeps)
> cannot check the actual version of the installer (without macOS machine).
>
> So these are either people too eager to check a newer version after a
> release, and packaging is just not finished, OR there is really an error.
>
> I can onderstand the reason for not putting the version in the dmz name,
> but a solution (for me to be able to check) is to package the dmz in a zip
> with a version name in it (AND update the versions in th upload site then
> too, just like we do for the Windows installers).
>
> Is this an doable option? Or should I just close macOS related issues with
> a "Please be patient while the macOS packagers are doing their work (and
> don't forget to donate time or money)" ;-)
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210621/95ef3188/attachment.html>

From zeighxakayi at gmail.com  Mon Jun 21 04:48:33 2021
From: zeighxakayi at gmail.com (Zinziswa Xakayi)
Date: Mon, 21 Jun 2021 13:48:33 +0200
Subject: [QGIS-Developer] QGIS Open Day
Message-ID: <CAMue7CDm2oNfVPWxOymmEAVQs_uN71-=+0uf5w-Ma7hsWWPFwA@mail.gmail.com>

Dear QGIS Users


On Friday, 25th June 2021 we will be holding our monthly QGIS Open Day!
What is a QGIS Open Day you may be wondering to yourself? It is an
initiative to replace the wonderful community meetups we used to hold every
six months when times were different. Like our in-person meetings, the
event is organised on the principle of self-organisation and community
participation.


*Programme*
[image: image.png]


(Subject to change).



*Where to watch*
Please see the event wiki page at QOD-June-2021 Wiki
<https://github.com/qgis/QGIS/wiki/QOD-June-2021> for all the details of
times and links for participation.Recordings
Many of the events may be recorded and made available to users who couldn't
make the live events. Youtube live streams should automatically be
available for catch-up viewing. Be sure to check back here for updates!

?         Event:Youtube channel Link
<https://www.youtube.com/channel/UCGS162t4hkOA0b35ucf1yng>




*Code of Conduct*Participants are kindly reminded to please read and
observe our QGIS Code of Conduct and Diversity Statement to make these
events a great experience for everyone!

?         Code of Conduct
<https://www.qgis.org/en/site/getinvolved/governance/codeofconduct/codeofconduct.html>

?         Diversity Statement
<https://www.qgis.org/en/site/getinvolved/governance/codeofconduct/diversitystatement.html>

Please contact me, Zinziswa Xakayi by email zeighxakayi at gmail.com or via
the Telegram Channel <https://t.me/joinchat/Aq2V5RPoxYYhXqUPoxRWPQ>
username @zinzixakayi if
you have any queries or need help setting up events.
We look forward to seeing you there!



*YouTube*

*QGIS <https://www.youtube.com/channel/UCGS162t4hkOA0b35ucf1yng>*

This channel is for sharing streams and recordings of community events.
QGIS is a Free and Open Source Geographic Information System. Download your
copy for free at https://qgis.org.



*Telegram*

*QGIS Community <https://t.me/joinchat/Aq2V5RPoxYYhXqUPoxRWPQ>*



Kind regards,

Zinzi Portia Xakayi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210621/bcceec33/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 48585 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210621/bcceec33/attachment-0001.png>

From gbaiamonte at gmail.com  Tue Jun 22 03:17:05 2021
From: gbaiamonte at gmail.com (Giuseppe Baiamonte)
Date: Tue, 22 Jun 2021 12:17:05 +0200
Subject: [QGIS-Developer] Download links broken
Message-ID: <CABfY0ssmSwV9S7wHL4CKeGPL6TS+8RHgMxwt_gHVvETsNjUkgg@mail.gmail.com>

At the time of writing, there are two broken links in the QGIS download
page, in the section
*Long-term release in old OSGeo4W (continued with previous dependencies):*

https://download.osgeo.org/osgeo4w/osgeo4w-setup-x86_64.exe
https://download.osgeo.org/osgeo4w/osgeo4w-setup-x86.exe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210622/1428e5b2/attachment.html>

From tschmetzer at gmx.de  Tue Jun 22 04:45:47 2021
From: tschmetzer at gmx.de (Tobias Schmetzer)
Date: Tue, 22 Jun 2021 13:45:47 +0200
Subject: [QGIS-Developer] Download links broken
In-Reply-To: <CABfY0ssmSwV9S7wHL4CKeGPL6TS+8RHgMxwt_gHVvETsNjUkgg@mail.gmail.com>
References: <CABfY0ssmSwV9S7wHL4CKeGPL6TS+8RHgMxwt_gHVvETsNjUkgg@mail.gmail.com>
Message-ID: <trinity-42cf5dab-f971-4028-af03-7f47f07cc80e-1624362347648@3c-app-gmx-bap29>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210622/5aa8e09d/attachment.html>

From gbaiamonte at gmail.com  Tue Jun 22 06:51:57 2021
From: gbaiamonte at gmail.com (Giuseppe Baiamonte)
Date: Tue, 22 Jun 2021 15:51:57 +0200
Subject: [QGIS-Developer] OSGeo4W v2 Network Installer QGIS/GRASS issue
Message-ID: <CABfY0stkdNT1L01jqCQ2hrfaqc7QS52UeTfg-g0NZ5C_+3frrg@mail.gmail.com>

After performing a fresh installation of QGIS on a PC running Windows 10
Pro using the new OSGeo4W v2 Network Installer:
- GRASS 7.8.5 is correctly installed but not working in QGIS;
- qgis-grass-plugin is installed but not working in QGIS;
- qgis-grass-plugin7 is not available in the installer;
- No shortcut(s) "with GRASS" created.
- qgis-bin-g7.exe is not present in the installation directory.

Tested on several PCs
Tested both Express and Advanced Install
Tested with both QGIS 3.16 and 3.20 installation

Please let me know if it would be better to report this issue somewhere
else.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210622/d32d2a0b/attachment.html>

From adenaculture at gmail.com  Tue Jun 22 09:43:54 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 22 Jun 2021 16:43:54 +0000
Subject: [QGIS-Developer] [Qgis-user]  Earth, Sun, Moon & Planets Plugin
In-Reply-To: <CAED_52rfUzqLd9_4Cip1Qx8tjX7WR2RY+JWuY7zW1zmtsF8-JA@mail.gmail.com>
References: <CABPxTTqjuT=QtRKgSDwiN7wYysFUdazscp42Mi6=OWOGemyF+w@mail.gmail.com>
 <CAES-DZRH5Vwq=9AeyHdNoxNbwuoTsR9JaKJY=k-jpjiCNKbxoQ@mail.gmail.com>
 <CABPxTTriJHA+2C2LQ4rYrZiEm=N4PqWvLRBB_9==bWXKAr2+kQ@mail.gmail.com>
 <CAES-DZSnB47HZ1vecNYP8iFGXPO-4n3wEQmrgGFp8YnNKb2N6Q@mail.gmail.com>
 <CAED_52rfUzqLd9_4Cip1Qx8tjX7WR2RY+JWuY7zW1zmtsF8-JA@mail.gmail.com>
Message-ID: <CABPxTTqO3+4v2JHH8iGULtEXX1nSNfr8EkZLbM0YKwtopiF9WA@mail.gmail.com>

Right now I am working on providing altitude and azimuth of the sun, moon
as well as times of dawn, sunrise, dusk, sunset and the dates and times of
the equinoxes and solstices.

I have run into a problem with my day/night region code. It does not work
properly close to an equinox so I need to get that fixed.

On Tue, Jun 22, 2021 at 3:24 PM Sebastian Gutwein <bas at rdgland.com> wrote:

> That sounds like a very interesting plugin. Do you think if the hillshade
> renderer had data defined values enabled your plugin would be able to
> provide the altitude and azimuth of the sun at a specific time?
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210622/efc663b5/attachment.html>

From apasotti at gmail.com  Wed Jun 23 10:36:10 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 23 Jun 2021 19:36:10 +0200
Subject: [QGIS-Developer] problems debugging tests (and most other targets)
 with Qt-Creator
Message-ID: <CAL5Q6718a0kmz=dY0t9_0rYm8sjfNY0cM5Y6eiTC8H7o1+p0xw@mail.gmail.com>

Hi,

I really don't know what I have changed but since yesterday I cannot debug
any target except for the main `qgis` application with QT Creator (ubuntu
20.04, QT creator 4.15., clang-10 and gdb).

gdb hangs forever at 100% CPU and eats all RAM until it gets killed by OOM.

Does anyone have the same problem?

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210623/7695443b/attachment.html>

From even.rouault at spatialys.com  Wed Jun 23 10:45:49 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Jun 2021 19:45:49 +0200
Subject: [QGIS-Developer] problems debugging tests (and most other
 targets) with Qt-Creator
In-Reply-To: <CAL5Q6718a0kmz=dY0t9_0rYm8sjfNY0cM5Y6eiTC8H7o1+p0xw@mail.gmail.com>
References: <CAL5Q6718a0kmz=dY0t9_0rYm8sjfNY0cM5Y6eiTC8H7o1+p0xw@mail.gmail.com>
Message-ID: <5304dc3b-a565-081e-8ca2-42eddf372770@spatialys.com>

Hi Alessandro,

Isn't it just the bump of version numbers after the release and stale 
.so.3.19.* files in output/lib ? (but that caused for me crashes for the 
qgis application)

Even

Le 23/06/2021 ? 19:36, Alessandro Pasotti a ?crit?:
> Hi,
>
> I really don't know what I have changed but since yesterday I cannot 
> debug any target except for the main `qgis` application with QT 
> Creator (ubuntu 20.04, QT creator 4.15., clang-10 and gdb).
>
> gdb hangs forever at 100% CPU and eats all RAM until it gets killed by 
> OOM.
>
> Does anyone have the same problem?
>
> -- 
> Alessandro Pasotti
> QCooperative: www.qcooperative.net <https://www.qcooperative.net>
> ItOpen: www.itopen.it <http://www.itopen.it>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210623/72c3be53/attachment.html>

From apasotti at gmail.com  Wed Jun 23 11:02:56 2021
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 23 Jun 2021 20:02:56 +0200
Subject: [QGIS-Developer] problems debugging tests (and most other
 targets) with Qt-Creator
In-Reply-To: <5304dc3b-a565-081e-8ca2-42eddf372770@spatialys.com>
References: <CAL5Q6718a0kmz=dY0t9_0rYm8sjfNY0cM5Y6eiTC8H7o1+p0xw@mail.gmail.com>
 <5304dc3b-a565-081e-8ca2-42eddf372770@spatialys.com>
Message-ID: <CAL5Q670ji9AKFLzCWoR-rda5sVP7553dBPQX2Cf1mVbCLCSPDA@mail.gmail.com>

Hi Even,

I removed all the build directory and rebuilt QGIS from scratch but the
problem remains :/

Fun thing is that I can actually step-debug the main qgis application but
not a simple test (or the server binary).



On Wed, Jun 23, 2021 at 7:45 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Alessandro,
>
> Isn't it just the bump of version numbers after the release and stale
> .so.3.19.* files in output/lib ? (but that caused for me crashes for the
> qgis application)
>
> Even
> Le 23/06/2021 ? 19:36, Alessandro Pasotti a ?crit :
>
> Hi,
>
> I really don't know what I have changed but since yesterday I cannot debug
> any target except for the main `qgis` application with QT Creator (ubuntu
> 20.04, QT creator 4.15., clang-10 and gdb).
>
> gdb hangs forever at 100% CPU and eats all RAM until it gets killed by OOM.
>
> Does anyone have the same problem?
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210623/cd48e60c/attachment.html>

From vcloarec at gmail.com  Wed Jun 23 12:42:02 2021
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Wed, 23 Jun 2021 15:42:02 -0400
Subject: [QGIS-Developer] PyQt issue when building QGIS with python
Message-ID: <CAHaTM5Wven2_fvsC7KhAfsGf15wzrc4wzwEoq7G1=fJXziSi2w@mail.gmail.com>

Hi all,

Since few days, it is not possible for me to build QGIS with python
binding. I've got this error and many others like this:

FAILED: python/plugins/db_manager/ui_DlgExportVector.py
cd /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager &&
/home/vincent/dev/sources/QGIS/scripts/pyuic_wrapper.sh /usr/bin/pyuic5
/home/vincent/dev/building/build-QGIS-Debug/output/lib
/home/vincent/dev/building/build-QGIS-Debug/output/python
/usr/bin/python3.8
/home/vincent/dev/sources/QGIS/python/plugins/db_manager/ui/DlgExportVector.ui
-o
/home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager/ui_DlgExportVector.py
An unexpected error occurred.
Check that you are using the latest version of PyQt5 and send an error
report to
support at riverbankcomputing.com, including the following information:

  * your version of PyQt (5.14.1)
  * the UI file that caused this error
  * the debug output of pyuic5 (use the -d flag when calling pyuic5)


Any direction I can explore ?

Thanks

Vincent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210623/33436685/attachment.html>

From tudorbarascu at yahoo.com  Wed Jun 23 13:19:26 2021
From: tudorbarascu at yahoo.com (=?utf-8?Q?Tudor_B=C4=83r=C4=83scu?=)
Date: Wed, 23 Jun 2021 23:19:26 +0300
Subject: [QGIS-Developer] PyQt issue when building QGIS with python
In-Reply-To: <CAHaTM5Wven2_fvsC7KhAfsGf15wzrc4wzwEoq7G1=fJXziSi2w@mail.gmail.com>
References: <CAHaTM5Wven2_fvsC7KhAfsGf15wzrc4wzwEoq7G1=fJXziSi2w@mail.gmail.com>
Message-ID: <83CF8544-429C-4479-8E66-F04D246B921A@yahoo.com>

Hi,

I think I had the same error thtese last few days, fixed it with apy install python3-pyqt5.qtpositioning on debian.

All the best,

Tudor

Sent from my iPhone

> On 23 Jun 2021, at 22:42, Vincent Cloarec <vcloarec at gmail.com> wrote:
> 
> ?
> Hi all,
> 
> Since few days, it is not possible for me to build QGIS with python binding. I've got this error and many others like this:
> 
> FAILED: python/plugins/db_manager/ui_DlgExportVector.py 
> cd /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager && /home/vincent/dev/sources/QGIS/scripts/pyuic_wrapper.sh /usr/bin/pyuic5 /home/vincent/dev/building/build-QGIS-Debug/output/lib /home/vincent/dev/building/build-QGIS-Debug/output/python /usr/bin/python3.8 /home/vincent/dev/sources/QGIS/python/plugins/db_manager/ui/DlgExportVector.ui -o /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager/ui_DlgExportVector.py
> An unexpected error occurred.
> Check that you are using the latest version of PyQt5 and send an error report to
> support at riverbankcomputing.com, including the following information:
> 
>   * your version of PyQt (5.14.1)
>   * the UI file that caused this error
>   * the debug output of pyuic5 (use the -d flag when calling pyuic5)
> 
> 
> Any direction I can explore ?
> 
> Thanks
> 
> Vincent
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210623/beb690b3/attachment.html>

From tim at kartoza.com  Wed Jun 23 14:48:55 2021
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 23 Jun 2021 22:48:55 +0100
Subject: [QGIS-Developer] PyQt issue when building QGIS with python
In-Reply-To: <83CF8544-429C-4479-8E66-F04D246B921A@yahoo.com>
References: <83CF8544-429C-4479-8E66-F04D246B921A@yahoo.com>
Message-ID: <24189EFA-BA77-497D-985C-294250DF46B6@getmailspring.com>

Hi

I also have issues though I believe I do have the positioning lib installed. I made a dump of the error messages I get when building here:
https://gist.github.com/timlinux/cb1e4ae81b536bf4dae50da43f61c980
We chatted about this on Telegram and Richard (building on debian with Qt 5.15.2) can build fine, for me on Pop_os! it fails (Qt 5.15.0). On my Fedora 34 laptop 5.15.2 it builds fine. If it is indeed a new requirement for 5.15.2 could we reconsider this requirement please?
Regards
Tim
Tim Sutton
Kartoza Co-founder

tim at kartoza.com (mailto:tim at kartoza.com)
https://kartoza.com

On Jun 23 2021, at 9:19 pm, Tudor B?r?scu <tudorbarascu at yahoo.com> wrote:
> Hi,
>
> I think I had the same error thtese last few days, fixed it with apy install python3-pyqt5.qtpositioning on debian.
>
> All the best,
>
> Tudor
>
> Sent from my iPhone
>
> > On 23 Jun 2021, at 22:42, Vincent Cloarec <vcloarec at gmail.com> wrote:
> > ?
> > Hi all,
> >
> > Since few days, it is not possible for me to build QGIS with python binding. I've got this error and many others like this:
> >
> > FAILED: python/plugins/db_manager/ui_DlgExportVector.py
> > cd /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager && /home/vincent/dev/sources/QGIS/scripts/pyuic_wrapper.sh /usr/bin/pyuic5 /home/vincent/dev/building/build-QGIS-Debug/output/lib /home/vincent/dev/building/build-QGIS-Debug/output/python /usr/bin/python3.8 /home/vincent/dev/sources/QGIS/python/plugins/db_manager/ui/DlgExportVector.ui -o /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager/ui_DlgExportVector.py
> > An unexpected error occurred.
> > Check that you are using the latest version of PyQt5 and send an error report to
> > support at riverbankcomputing.com (mailto:support at riverbankcomputing.com), including the following information:
> >
> > * your version of PyQt (5.14.1)
> > * the UI file that caused this error
> > * the debug output of pyuic5 (use the -d flag when calling pyuic5)
> >
> >
> >
> > Any direction I can explore ?
> >
> > Thanks
> >
> > Vincent
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210623/77d5bee4/attachment.html>

From vcloarec at gmail.com  Wed Jun 23 14:52:14 2021
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Wed, 23 Jun 2021 17:52:14 -0400
Subject: [QGIS-Developer] PyQt issue when building QGIS with python
In-Reply-To: <24189EFA-BA77-497D-985C-294250DF46B6@getmailspring.com>
References: <83CF8544-429C-4479-8E66-F04D246B921A@yahoo.com>
 <24189EFA-BA77-497D-985C-294250DF46B6@getmailspring.com>
Message-ID: <CAHaTM5UScJQ4rwddTpOouy9H2eTEqv1CzQ8mwy6zJdVjnS4Dkg@mail.gmail.com>

yes, fixed with the same way than Tudor.
Update issue, sorry for the noise

Le mer. 23 juin 2021 ? 17:48, Tim Sutton <tim at kartoza.com> a ?crit :

> Hi
>
> I also have issues though I believe I do have the positioning lib
> installed. I made a dump of the error messages I get when building here:
>
> https://gist.github.com/timlinux/cb1e4ae81b536bf4dae50da43f61c980
> We chatted about this on Telegram and Richard (building on debian with Qt
> 5.15.2)  can build fine, for me on Pop_os! it fails (Qt 5.15.0). On my
> Fedora 34 laptop 5.15.2 it builds fine. If it is indeed a new requirement
> for 5.15.2 could we reconsider this requirement please?
>
> Regards
>
> Tim
>
> *Tim Sutton*
> Kartoza Co-founder
> tim at kartoza.com[image: Twitter] <https://twitter.com/timlinux>
> https://kartoza.com
> On Jun 23 2021, at 9:19 pm, Tudor B?r?scu <tudorbarascu at yahoo.com> wrote:
>
> Hi,
>
> I think I had the same error thtese last few days, fixed it with apy
> install python3-pyqt5.qtpositioning on debian.
>
> All the best,
>
> Tudor
>
> Sent from my iPhone
>
> On 23 Jun 2021, at 22:42, Vincent Cloarec <vcloarec at gmail.com> wrote:
>
> ?
> Hi all,
>
> Since few days, it is not possible for me to build QGIS with python
> binding. I've got this error and many others like this:
>
> FAILED: python/plugins/db_manager/ui_DlgExportVector.py
> cd /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager
> && /home/vincent/dev/sources/QGIS/scripts/pyuic_wrapper.sh /usr/bin/pyuic5
> /home/vincent/dev/building/build-QGIS-Debug/output/lib
> /home/vincent/dev/building/build-QGIS-Debug/output/python
> /usr/bin/python3.8
> /home/vincent/dev/sources/QGIS/python/plugins/db_manager/ui/DlgExportVector.ui
> -o
> /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager/ui_DlgExportVector.py
> An unexpected error occurred.
> Check that you are using the latest version of PyQt5 and send an error
> report to
> support at riverbankcomputing.com, including the following information:
>
>   * your version of PyQt (5.14.1)
>   * the UI file that caused this error
>   * the debug output of pyuic5 (use the -d flag when calling pyuic5)
>
>
> Any direction I can explore ?
>
> Thanks
>
> Vincent
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210623/97866125/attachment-0001.html>

From tim at kartoza.com  Wed Jun 23 14:54:23 2021
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 23 Jun 2021 22:54:23 +0100
Subject: [QGIS-Developer] PyQt issue when building QGIS with python
In-Reply-To: <CAHaTM5UScJQ4rwddTpOouy9H2eTEqv1CzQ8mwy6zJdVjnS4Dkg@mail.gmail.com>
References: <CAHaTM5UScJQ4rwddTpOouy9H2eTEqv1CzQ8mwy6zJdVjnS4Dkg@mail.gmail.com>
Message-ID: <3766D947-7929-49D4-B3BF-99440D93CE79@getmailspring.com>

Oh that is odd. I will double check I have the positioning library on my computer tomorrow.

Regards
Tim
Tim Sutton
Kartoza Co-founder

tim at kartoza.com (mailto:tim at kartoza.com)
https://kartoza.com

On Jun 23 2021, at 10:52 pm, Vincent Cloarec <vcloarec at gmail.com> wrote:
> yes, fixed with the same way than Tudor.
> Update issue, sorry for the noise
>
>
>
> Le mer. 23 juin 2021 ? 17:48, Tim Sutton <tim at kartoza.com (mailto:tim at kartoza.com)> a ?crit :
> > Hi
> >
> > I also have issues though I believe I do have the positioning lib installed. I made a dump of the error messages I get when building here:
> > https://gist.github.com/timlinux/cb1e4ae81b536bf4dae50da43f61c980
> > We chatted about this on Telegram and Richard (building on debian with Qt 5.15.2) can build fine, for me on Pop_os! it fails (Qt 5.15.0). On my Fedora 34 laptop 5.15.2 it builds fine. If it is indeed a new requirement for 5.15.2 could we reconsider this requirement please?
> >
> > Regards
> > Tim
> > Tim Sutton
> > Kartoza Co-founder
> >
> >
> > tim at kartoza.com (mailto:tim at kartoza.com)
> > https://kartoza.com
> >
> >
> >
> >
> >
> >
> >
> > On Jun 23 2021, at 9:19 pm, Tudor B?r?scu <tudorbarascu at yahoo.com (mailto:tudorbarascu at yahoo.com)> wrote:
> > > Hi,
> > >
> > > I think I had the same error thtese last few days, fixed it with apy install python3-pyqt5.qtpositioning on debian.
> > >
> > > All the best,
> > >
> > > Tudor
> > >
> > > Sent from my iPhone
> > >
> > > > On 23 Jun 2021, at 22:42, Vincent Cloarec <vcloarec at gmail.com (mailto:vcloarec at gmail.com)> wrote:
> > > > ?
> > > > Hi all,
> > > >
> > > > Since few days, it is not possible for me to build QGIS with python binding. I've got this error and many others like this:
> > > >
> > > > FAILED: python/plugins/db_manager/ui_DlgExportVector.py
> > > > cd /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager && /home/vincent/dev/sources/QGIS/scripts/pyuic_wrapper.sh /usr/bin/pyuic5 /home/vincent/dev/building/build-QGIS-Debug/output/lib /home/vincent/dev/building/build-QGIS-Debug/output/python /usr/bin/python3.8 /home/vincent/dev/sources/QGIS/python/plugins/db_manager/ui/DlgExportVector.ui -o /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager/ui_DlgExportVector.py
> > > > An unexpected error occurred.
> > > > Check that you are using the latest version of PyQt5 and send an error report to
> > > > support at riverbankcomputing.com (mailto:support at riverbankcomputing.com), including the following information:
> > > >
> > > > * your version of PyQt (5.14.1)
> > > > * the UI file that caused this error
> > > > * the debug output of pyuic5 (use the -d flag when calling pyuic5)
> > > >
> > > >
> > > >
> > > > Any direction I can explore ?
> > > >
> > > > Thanks
> > > >
> > > > Vincent
> > > > _______________________________________________
> > > > QGIS-Developer mailing list
> > > > QGIS-Developer at lists.osgeo.org (mailto:QGIS-Developer at lists.osgeo.org)
> > > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > >
> > >
> > >
> > > _______________________________________________
> > > QGIS-Developer mailing list
> > > QGIS-Developer at lists.osgeo.org (mailto:QGIS-Developer at lists.osgeo.org)
> > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210623/55d2d796/attachment.html>

From matthias at opengis.ch  Wed Jun 23 22:21:34 2021
From: matthias at opengis.ch (Matthias Kuhn)
Date: Thu, 24 Jun 2021 07:21:34 +0200
Subject: [QGIS-Developer] PyQt issue when building QGIS with python
In-Reply-To: <3766D947-7929-49D4-B3BF-99440D93CE79@getmailspring.com>
References: <CAHaTM5UScJQ4rwddTpOouy9H2eTEqv1CzQ8mwy6zJdVjnS4Dkg@mail.gmail.com>
 <3766D947-7929-49D4-B3BF-99440D93CE79@getmailspring.com>
Message-ID: <CAC7zN949TqUCnFQ5ZBoS53Mf5eVUnem5g52gPeyy__19p=2aQw@mail.gmail.com>

Hi Tim,

Did you also install python3-pyqt5.qtpositioning ?

This is a requirement since
https://github.com/qgis/QGIS/pull/43731#issuecomment-861172402

Cheers
Matthias

On Wed, Jun 23, 2021 at 11:54 PM Tim Sutton <tim at kartoza.com> wrote:

> Oh that is odd. I will double check I have the positioning library on my
> computer tomorrow.
>
> Regards
>
> Tim
>
> *Tim Sutton*
> Kartoza Co-founder
> tim at kartoza.com[image: Twitter] <https://twitter.com/timlinux>
> https://kartoza.com
> On Jun 23 2021, at 10:52 pm, Vincent Cloarec <vcloarec at gmail.com> wrote:
>
> yes, fixed with the same way than Tudor.
> Update issue, sorry for the noise
>
> Le mer. 23 juin 2021 ? 17:48, Tim Sutton <tim at kartoza.com> a ?crit :
>
> Hi
>
> I also have issues though I believe I do have the positioning lib
> installed. I made a dump of the error messages I get when building here:
>
> https://gist.github.com/timlinux/cb1e4ae81b536bf4dae50da43f61c980
> We chatted about this on Telegram and Richard (building on debian with Qt
> 5.15.2)  can build fine, for me on Pop_os! it fails (Qt 5.15.0). On my
> Fedora 34 laptop 5.15.2 it builds fine. If it is indeed a new requirement
> for 5.15.2 could we reconsider this requirement please?
>
> Regards
>
> Tim
>
> *Tim Sutton*
> Kartoza Co-founder
> tim at kartoza.com[image: Twitter] <https://twitter.com/timlinux>
> https://kartoza.com
> On Jun 23 2021, at 9:19 pm, Tudor B?r?scu <tudorbarascu at yahoo.com> wrote:
>
> Hi,
>
> I think I had the same error thtese last few days, fixed it with apy
> install python3-pyqt5.qtpositioning on debian.
>
> All the best,
>
> Tudor
>
> Sent from my iPhone
>
> On 23 Jun 2021, at 22:42, Vincent Cloarec <vcloarec at gmail.com> wrote:
>
> ?
> Hi all,
>
> Since few days, it is not possible for me to build QGIS with python
> binding. I've got this error and many others like this:
>
> FAILED: python/plugins/db_manager/ui_DlgExportVector.py
> cd /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager
> && /home/vincent/dev/sources/QGIS/scripts/pyuic_wrapper.sh /usr/bin/pyuic5
> /home/vincent/dev/building/build-QGIS-Debug/output/lib
> /home/vincent/dev/building/build-QGIS-Debug/output/python
> /usr/bin/python3.8
> /home/vincent/dev/sources/QGIS/python/plugins/db_manager/ui/DlgExportVector.ui
> -o
> /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager/ui_DlgExportVector.py
> An unexpected error occurred.
> Check that you are using the latest version of PyQt5 and send an error
> report to
> support at riverbankcomputing.com, including the following information:
>
>   * your version of PyQt (5.14.1)
>   * the UI file that caused this error
>   * the debug output of pyuic5 (use the -d flag when calling pyuic5)
>
>
> Any direction I can explore ?
>
> Thanks
>
> Vincent
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/932457d8/attachment-0001.html>

From rdmailings at duif.net  Wed Jun 23 23:30:00 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 24 Jun 2021 08:30:00 +0200
Subject: [QGIS-Developer] PyQt issue when building QGIS with python
In-Reply-To: <CAHaTM5Wven2_fvsC7KhAfsGf15wzrc4wzwEoq7G1=fJXziSi2w@mail.gmail.com>
References: <CAHaTM5Wven2_fvsC7KhAfsGf15wzrc4wzwEoq7G1=fJXziSi2w@mail.gmail.com>
Message-ID: <3c01c8bd-5bb1-9131-d117-689865460d4c@duif.net>

On 6/23/21 9:42 PM, Vincent Cloarec wrote:
> Hi all,
> 
> Since few days, it is not possible for me to build QGIS with python binding. I've got this error and many others like this:
> 
> FAILED: python/plugins/db_manager/ui_DlgExportVector.py
> cd /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager && /home/vincent/dev/sources/QGIS/scripts/pyuic_wrapper.sh /usr/bin/pyuic5 /home/vincent/dev/building/build-QGIS-Debug/output/lib /home/vincent/dev/building/build-QGIS-Debug/output/python /usr/bin/python3.8 /home/vincent/dev/sources/QGIS/python/plugins/db_manager/ui/DlgExportVector.ui -o /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager/ui_DlgExportVector.py
> An unexpected error occurred.
> Check that you are using the latest version of PyQt5 and send an error report to
> support at riverbankcomputing.com <mailto:support at riverbankcomputing.com>, including the following information:
> 
> ? * your version of PyQt (5.14.1)
> ? * the UI file that caused this error
> ? * the debug output of pyuic5 (use the -d flag when calling pyuic5)

I know (from the QGIS Telegram group) that Tim has the same issues... with PopOS, but able to build on Fedora (and I am on Debian Testing)...

He also had problems with python plugins db_manager and plugin_installer...

Regards,

Richard

From tim at kartoza.com  Thu Jun 24 01:43:47 2021
From: tim at kartoza.com (Tim Sutton)
Date: Thu, 24 Jun 2021 09:43:47 +0100
Subject: [QGIS-Developer] PyQt issue when building QGIS with python
In-Reply-To: <CAC7zN949TqUCnFQ5ZBoS53Mf5eVUnem5g52gPeyy__19p=2aQw@mail.gmail.com>
References: <CAC7zN949TqUCnFQ5ZBoS53Mf5eVUnem5g52gPeyy__19p=2aQw@mail.gmail.com>
Message-ID: <74FD3176-536A-4CAD-909A-A81380A5D806@getmailspring.com>

Doh - I thought I had it but it seems I didn't. All building fine again now. Sorry for the noise all.

Regards
Tim
On Jun 24 2021, at 6:21 am, Matthias Kuhn <matthias at opengis.ch> wrote:
> Hi Tim,
>
> Did you also install python3-pyqt5.qtpositioning ?
>
> This is a requirement since
> https://github.com/qgis/QGIS/pull/43731#issuecomment-861172402
>
>
> Cheers
> Matthias
>
>
> On Wed, Jun 23, 2021 at 11:54 PM Tim Sutton <tim at kartoza.com (mailto:tim at kartoza.com)> wrote:
> > Oh that is odd. I will double check I have the positioning library on my computer tomorrow.
> >
> > Regards
> > Tim
> > Tim Sutton
> > Kartoza Co-founder
> >
> >
> > tim at kartoza.com (mailto:tim at kartoza.com)
> > https://kartoza.com
> >
> >
> >
> >
> >
> >
> >
> > On Jun 23 2021, at 10:52 pm, Vincent Cloarec <vcloarec at gmail.com (mailto:vcloarec at gmail.com)> wrote:
> > > yes, fixed with the same way than Tudor.
> > > Update issue, sorry for the noise
> > >
> > >
> > >
> > > Le mer. 23 juin 2021 ? 17:48, Tim Sutton <tim at kartoza.com (mailto:tim at kartoza.com)> a ?crit :
> > > > Hi
> > > >
> > > > I also have issues though I believe I do have the positioning lib installed. I made a dump of the error messages I get when building here:
> > > > https://gist.github.com/timlinux/cb1e4ae81b536bf4dae50da43f61c980
> > > > We chatted about this on Telegram and Richard (building on debian with Qt 5.15.2) can build fine, for me on Pop_os! it fails (Qt 5.15.0). On my Fedora 34 laptop 5.15.2 it builds fine. If it is indeed a new requirement for 5.15.2 could we reconsider this requirement please?
> > > >
> > > > Regards
> > > > Tim
> > > > Tim Sutton
> > > > Kartoza Co-founder
> > > >
> > > >
> > > > tim at kartoza.com (mailto:tim at kartoza.com)
> > > > https://kartoza.com
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > On Jun 23 2021, at 9:19 pm, Tudor B?r?scu <tudorbarascu at yahoo.com (mailto:tudorbarascu at yahoo.com)> wrote:
> > > > > Hi,
> > > > >
> > > > > I think I had the same error thtese last few days, fixed it with apy install python3-pyqt5.qtpositioning on debian.
> > > > >
> > > > > All the best,
> > > > >
> > > > > Tudor
> > > > >
> > > > > Sent from my iPhone
> > > > >
> > > > > > On 23 Jun 2021, at 22:42, Vincent Cloarec <vcloarec at gmail.com (mailto:vcloarec at gmail.com)> wrote:
> > > > > > ?
> > > > > > Hi all,
> > > > > >
> > > > > > Since few days, it is not possible for me to build QGIS with python binding. I've got this error and many others like this:
> > > > > >
> > > > > > FAILED: python/plugins/db_manager/ui_DlgExportVector.py
> > > > > > cd /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager && /home/vincent/dev/sources/QGIS/scripts/pyuic_wrapper.sh /usr/bin/pyuic5 /home/vincent/dev/building/build-QGIS-Debug/output/lib /home/vincent/dev/building/build-QGIS-Debug/output/python /usr/bin/python3.8 /home/vincent/dev/sources/QGIS/python/plugins/db_manager/ui/DlgExportVector.ui -o /home/vincent/dev/building/build-QGIS-Debug/python/plugins/db_manager/ui_DlgExportVector.py
> > > > > > An unexpected error occurred.
> > > > > > Check that you are using the latest version of PyQt5 and send an error report to
> > > > > > support at riverbankcomputing.com (mailto:support at riverbankcomputing.com), including the following information:
> > > > > >
> > > > > > * your version of PyQt (5.14.1)
> > > > > > * the UI file that caused this error
> > > > > > * the debug output of pyuic5 (use the -d flag when calling pyuic5)
> > > > > >
> > > > > >
> > > > > >
> > > > > > Any direction I can explore ?
> > > > > >
> > > > > > Thanks
> > > > > >
> > > > > > Vincent
> > > > > > _______________________________________________
> > > > > > QGIS-Developer mailing list
> > > > > > QGIS-Developer at lists.osgeo.org (mailto:QGIS-Developer at lists.osgeo.org)
> > > > > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > > > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > > > >
> > > > >
> > > > >
> > > > > _______________________________________________
> > > > > QGIS-Developer mailing list
> > > > > QGIS-Developer at lists.osgeo.org (mailto:QGIS-Developer at lists.osgeo.org)
> > > > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > >
> > >
> > >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org (mailto:QGIS-Developer at lists.osgeo.org)
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/0cb54206/attachment.html>

From andreaerdna at libero.it  Thu Jun 24 08:48:56 2021
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Thu, 24 Jun 2021 17:48:56 +0200
Subject: [QGIS-Developer] OSGeo4W v2 Network Installer QGIS/GRASS issue
Message-ID: <69212f93-edd1-6e90-bf94-af5a423cefb3@libero.it>

Giuseppe Baiamonte wrote Tue Jun 22 06:51:57 PDT 2021
> After performing a fresh installation of QGIS on a PC running Windows 10
> Pro using the new OSGeo4W v2 Network Installer:
> - GRASS 7.8.5 is correctly installed but not working in QGIS;
> - qgis-grass-plugin is installed but not working in QGIS;
> - qgis-grass-plugin7 is not available in the installer;
> - No shortcut(s) "with GRASS" created.
> - qgis-bin-g7.exe is not present in the installation directory.


Hi Giuseppe,
new packages versions are now available in the OSGeo4W v2 repository.

If GRASS in QGIS still doesn't work with the new packages versions, I 
think you can also report the issue opening a "ticket" on 
https://trac.osgeo.org/osgeo4w/

Best regards.

Andrea
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/bb9f27aa/attachment.html>

From gbaiamonte at gmail.com  Thu Jun 24 09:29:09 2021
From: gbaiamonte at gmail.com (Giuseppe Baiamonte)
Date: Thu, 24 Jun 2021 18:29:09 +0200
Subject: [QGIS-Developer] OSGeo4W v2 Network Installer QGIS/GRASS issue
In-Reply-To: <69212f93-edd1-6e90-bf94-af5a423cefb3@libero.it>
References: <69212f93-edd1-6e90-bf94-af5a423cefb3@libero.it>
Message-ID: <CABfY0svi92S6DgsP4t_ZUTxRGQgbfK-_5nQM_0rbJ9u=+Vkfdw@mail.gmail.com>

Hi,
new package versions (3.16.8-2 and 3.20.0-2) fixed the problem with
GRASS not working in QGIS.
The issue is also discussed here https://github.com/qgis/QGIS/issues/43844
(closed)
Thanks everyone for the quick fix!
Best,

Giuseppe



Il giorno gio 24 giu 2021 alle ore 17:57 Andrea Giudiceandrea <
andreaerdna at libero.it> ha scritto:

> Giuseppe Baiamonte wrote Tue Jun 22 06:51:57 PDT 2021
>
> After performing a fresh installation of QGIS on a PC running Windows 10
> Pro using the new OSGeo4W v2 Network Installer:
> - GRASS 7.8.5 is correctly installed but not working in QGIS;
> - qgis-grass-plugin is installed but not working in QGIS;
> - qgis-grass-plugin7 is not available in the installer;
> - No shortcut(s) "with GRASS" created.
> - qgis-bin-g7.exe is not present in the installation directory.
>
>
> Hi Giuseppe,
> new packages versions are now available in the OSGeo4W v2 repository.
>
> If GRASS in QGIS still doesn't work with the new packages versions, I
> think you can also report the issue opening a "ticket" on
> https://trac.osgeo.org/osgeo4w/
>
> Best regards.
>
> Andrea
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/8b4f7594/attachment-0001.html>

From alroyliz0 at gmail.com  Thu Jun 24 12:50:54 2021
From: alroyliz0 at gmail.com (Alexis R.L.)
Date: Thu, 24 Jun 2021 15:50:54 -0400
Subject: [QGIS-Developer] Custom processing script instabilities
Message-ID: <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww@mail.gmail.com>

Greetings,

I have one custom script that uses PIL to get the exif tag, and when I
execute the script for the first time, the processing window vanishes and
qgis stall and then crashes.

To get it to run properly I had to set the return before opening the files
with PIL to run a neutered version and then subsequent runs were flawless
during that qgis instance.

I ended up using a standalone exif reader, though slower , but there are no
more crashes.

Has anyone else had similar issues and is anyone aware of a way to prevent
such crashes or handle them more gracefully, as no trace is left currently.

Thanks and have a nice day,

Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/d49ff6b4/attachment.html>

From luipir at gmail.com  Thu Jun 24 13:34:01 2021
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 24 Jun 2021 22:34:01 +0200
Subject: [QGIS-Developer] Custom processing script instabilities
In-Reply-To: <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww@mail.gmail.com>
References: <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww@mail.gmail.com>
Message-ID: <CAFO80_qOK0pBn1KajrPN0paAF=+SrsObeLs=QGqoY_vs=Oq3XQ@mail.gmail.com>

hard to say something without reading the code... btw generally you do not
have to interact with main GUi from a processing alg that by default run in
a separated thread => this can cause crash if you do not use standard
processing libs (e.g. feedback) to send message to the user.
No idea if this could be the source of the problem., IMHO sharing the code
would help and also help to verify if it can be replicable.

regards

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:

> Greetings,
>
> I have one custom script that uses PIL to get the exif tag, and when I
> execute the script for the first time, the processing window vanishes and
> qgis stall and then crashes.
>
> To get it to run properly I had to set the return before opening the files
> with PIL to run a neutered version and then subsequent runs were flawless
> during that qgis instance.
>
> I ended up using a standalone exif reader, though slower , but there are
> no more crashes.
>
> Has anyone else had similar issues and is anyone aware of a way to prevent
> such crashes or handle them more gracefully, as no trace is left currently.
>
> Thanks and have a nice day,
>
> Alex
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/084a8256/attachment.html>

From alroyliz0 at gmail.com  Thu Jun 24 14:05:09 2021
From: alroyliz0 at gmail.com (Alexis R.L.)
Date: Thu, 24 Jun 2021 17:05:09 -0400
Subject: [QGIS-Developer] Custom processing script instabilities
In-Reply-To: <CAFO80_qOK0pBn1KajrPN0paAF=+SrsObeLs=QGqoY_vs=Oq3XQ@mail.gmail.com>
References: <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww@mail.gmail.com>
 <CAFO80_qOK0pBn1KajrPN0paAF=+SrsObeLs=QGqoY_vs=Oq3XQ@mail.gmail.com>
Message-ID: <CAOM0XWB22aCNvEZ8O04yi-VATkjotqN_rHJ26rBpGC87Asv7BA@mail.gmail.com>

Greetings Luigi,

There were no interaction, I used glob to gather all the images in a
folder, used Image.Open and then used _getexif(). But returning before this
part was the only way to get a stable first run.

Sadly I can share the code (work and IP).

The rest of it looped through datapoints and correlated the images to the
points using the exif timestamp and the geolocalisation.

Alex

Le jeu. 24 juin 2021 ? 16:34, Luigi Pirelli <luipir at gmail.com> a ?crit :

> hard to say something without reading the code... btw generally you do not
> have to interact with main GUi from a processing alg that by default run in
> a separated thread => this can cause crash if you do not use standard
> processing libs (e.g. feedback) to send message to the user.
> No idea if this could be the source of the problem., IMHO sharing the code
> would help and also help to verify if it can be replicable.
>
> regards
>
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
>
> **************************************************************************************************
>
>
> On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>
>> Greetings,
>>
>> I have one custom script that uses PIL to get the exif tag, and when I
>> execute the script for the first time, the processing window vanishes and
>> qgis stall and then crashes.
>>
>> To get it to run properly I had to set the return before opening the
>> files with PIL to run a neutered version and then subsequent runs were
>> flawless during that qgis instance.
>>
>> I ended up using a standalone exif reader, though slower , but there are
>> no more crashes.
>>
>> Has anyone else had similar issues and is anyone aware of a way to
>> prevent such crashes or handle them more gracefully, as no trace is left
>> currently.
>>
>> Thanks and have a nice day,
>>
>> Alex
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/415ff84b/attachment.html>

From luipir at gmail.com  Fri Jun 25 00:14:43 2021
From: luipir at gmail.com (Luigi Pirelli)
Date: Fri, 25 Jun 2021 09:14:43 +0200
Subject: [QGIS-Developer] Custom processing script instabilities
In-Reply-To: <CAOM0XWB22aCNvEZ8O04yi-VATkjotqN_rHJ26rBpGC87Asv7BA@mail.gmail.com>
References: <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww@mail.gmail.com>
 <CAFO80_qOK0pBn1KajrPN0paAF=+SrsObeLs=QGqoY_vs=Oq3XQ@mail.gmail.com>
 <CAOM0XWB22aCNvEZ8O04yi-VATkjotqN_rHJ26rBpGC87Asv7BA@mail.gmail.com>
Message-ID: <CAFO80_oh3NPcZE9oOaoB+0+FfhGLrKU74t71+PsYGXCw=736dw@mail.gmail.com>

strange that a library call exit, so I would inspect if the lib faces a
raise condition. I would check the code outside qgis checking if it
terminates for some reason.

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 24 Jun 2021 at 23:05, Alexis R.L. <alroyliz0 at gmail.com> wrote:

> Greetings Luigi,
>
> There were no interaction, I used glob to gather all the images in a
> folder, used Image.Open and then used _getexif(). But returning before this
> part was the only way to get a stable first run.
>
> Sadly I can share the code (work and IP).
>
> The rest of it looped through datapoints and correlated the images to the
> points using the exif timestamp and the geolocalisation.
>
> Alex
>
> Le jeu. 24 juin 2021 ? 16:34, Luigi Pirelli <luipir at gmail.com> a ?crit :
>
>> hard to say something without reading the code... btw generally you do
>> not have to interact with main GUi from a processing alg that by default
>> run in a separated thread => this can cause crash if you do not use
>> standard processing libs (e.g. feedback) to send message to the user.
>> No idea if this could be the source of the problem., IMHO sharing the
>> code would help and also help to verify if it can be replicable.
>>
>> regards
>>
>> Luigi Pirelli
>>
>>
>> **************************************************************************************************
>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>> * GitHub: https://github.com/luipir
>> * Book: Mastering QGIS3 - 3rd Edition
>> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
>> * Hire a team: http://www.qcooperative.net
>>
>> **************************************************************************************************
>>
>>
>> On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>>
>>> Greetings,
>>>
>>> I have one custom script that uses PIL to get the exif tag, and when I
>>> execute the script for the first time, the processing window vanishes and
>>> qgis stall and then crashes.
>>>
>>> To get it to run properly I had to set the return before opening the
>>> files with PIL to run a neutered version and then subsequent runs were
>>> flawless during that qgis instance.
>>>
>>> I ended up using a standalone exif reader, though slower , but there are
>>> no more crashes.
>>>
>>> Has anyone else had similar issues and is anyone aware of a way to
>>> prevent such crashes or handle them more gracefully, as no trace is left
>>> currently.
>>>
>>> Thanks and have a nice day,
>>>
>>> Alex
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210625/fcd0affd/attachment-0001.html>

From nazli.turini at broadband-academy.de  Fri Jun 25 03:09:02 2021
From: nazli.turini at broadband-academy.de (Nazli Turini [BBA])
Date: Fri, 25 Jun 2021 10:09:02 +0000
Subject: [QGIS-Developer] Custom processing script instabilities (Nzl_T)
Message-ID: <83bff5808abf44d295b5aa2c6127e0aa@WINHEXBEEU118.win.mail>

Hi Evereybody,

I am facing the same issue. 

I am creating a custom processing algorithm in which it loads 1, the google satellite 2. get my study_region.shp file 3. loop through the features in study_region.shp 4. and for each feature create the mbtiles using processing.run('qgis:tilesxyzmbtiles'...)5. Save the result on the predefined folder.

The script runs when the ZOOM_MAX and ZOOM_MIN are 12. When I change the ZOOM_MAX to 19, the processing window vanished and qgis crashed. Maybe it gets some hint to @ Alexis

Here is my code

import os
from os import makedirs
from qgis.PyQt.QtCore import QCoreApplication
from PyQt5.QtGui import QColor

from qgis.core import (QgsProcessing,
                       QgsFeatureSink,
                       QgsProcessingException,
                       QgsProcessingAlgorithm,
                       QgsProcessingParameterFeatureSource,
                       QgsProcessingParameterFeatureSink,QgsRasterLayer,QgsAbstractPropertyCollection,QgsProject,QgsLayerTreeGroup, QgsLayerTreeLayer, QgsLayerTree)
from qgis import processing
from qgis.core import QgsProcessingFeedback
from qgis.core import (QgsProcessingParameterFile,
                       QgsProcessingParameterString,
                       )
from qgis.utils import iface


class crea_mbtiles_MERGIN(QgsProcessingAlgorithm):

    # Constants used to refer to parameters and outputs. They will be
    # used when calling the algorithm from another algorithm, or when
    # calling from the QGIS console.
    def tr(self, string):
        """
        Returns a translatable string with the self.tr() function.
        """
        return QCoreApplication.translate('Processing', string)

    def createInstance(self):
        # Must return a new copy of your algorithm.
        return crea_mbtiles_MERGIN()
    def name(self):
        """
        Returns the unique algorithm name.
        """
        return 'Create Mbtiles'

    def displayName(self):
        """
        Returns the translated algorithm name.
        """
        return self.tr('Create Mbtiles')
    def flags(self):
        return super().flags() | QgsProcessingAlgorithm.FlagNoThreading
    Ausbaugebiet = 'Ausbaugebiet'
    Projektnummer= 'Projekt-Nummer'
    OUT_FOLDER = 'OUT_FOLDER'  # ab?ndern f?r andere Dateien

    def initAlgorithm(self, config=None):
        self.addParameter(
            QgsProcessingParameterFeatureSource(
                self.Ausbaugebiet,
                'Ausbaugebiet',
                [QgsProcessing.TypeVectorAnyGeometry]
            )
        )
        self.addParameter(
            QgsProcessingParameterString(
                self.Projektnummer,
                'Projekt-Nummer',
                optional=False
            )
        )
        self.addParameter(
            QgsProcessingParameterFile(
                self.OUT_FOLDER,
                f'Zentralen MERGIN Ordner',
                behavior=QgsProcessingParameterFile.Folder,
                defaultValue='V:\99_Planungsdaten\Mergin',
                optional=False
            )
        )

    def processAlgorithm(self, parameters, context, feedback):
        results = {}
        
        
        
        
        Ausbaugebiet = self.parameterAsSource(
            parameters,
            self.Ausbaugebiet,
            context
        )

        out_folder: str = self.parameterAsString(
            parameters,
            self.OUT_FOLDER,
            context
        )
        Projektnummer = self.parameterAsString(
            parameters,
            self.Projektnummer,
            context
        )

        #if Projektnummer.find(SEPARATOR) > 0:
        output_path = os.path.join(out_folder, Projektnummer)
        #Projektnummer = path.basename(Projektnummer)
            # Create folder if not present
        if not os.path.exists(output_path):
            makedirs(output_path)
        #Load the google xyz data
        urlWithParams = 'type=xyz&url=https://mt1.google.com/vt/lyrs%3Ds%26x%3D%7Bx%7D%26y%3D%7By%7D%26z%3D%7Bz%7D&zmax=19&zmin=0'    
        rlayer = QgsRasterLayer(urlWithParams, 'Google', 'wms')
        QgsProject.instance().addMapLayer(rlayer, False)
        layerTree = iface.layerTreeCanvasBridge().rootGroup()
        layerTree.insertChildNode(0, QgsLayerTreeLayer(rlayer))
        if feedback.isCanceled():
            return {}
        
        input_featuresource = self.parameterAsSource(parameters, 'Ausbaugebiet', context)
        
        for feature in input_featuresource.getFeatures():
            attrs = feature.attributes()
            name=attrs[1]
            bbox = feature.geometry().boundingBox()
            bbox_extent = '%f,%f,%f,%f' % (bbox.xMinimum(), bbox.xMaximum(), bbox.yMinimum(), bbox.yMaximum())
            alg_params = {
            'BACKGROUND_COLOR': QColor(0, 0, 0, 0),
            'DPI': 300,
            'EXTENT': bbox_extent,
            'METATILESIZE': 6,
            'QUALITY': 75,
            'TILE_FORMAT': 0,
            'ZOOM_MAX': 12,
            'ZOOM_MIN': 12,
            'OUTPUT_FILE': output_path+'/googlestallite_%s.mbtiles' %(name)
            }
            google=processing.run('qgis:tilesxyzmbtiles', alg_params,is_child_algorithm=True,context=context, feedback=feedback)['OUTPUT_FILE']
                    # Check for cancelation
            if feedback.isCanceled():
                return {}
            #Remove the layer
        QgsProject.instance().removeMapLayers([rlayer.id()])
        del rlayer
        return result

Thank you so much and best regards,
Nazli

-----Urspr?ngliche Nachricht-----
Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> Im Auftrag von qgis-developer-request at lists.osgeo.org
Gesendet: Freitag, 25. Juni 2021 09:15
An: qgis-developer at lists.osgeo.org
Betreff: QGIS-Developer Digest, Vol 188, Issue 36

Send QGIS-Developer mailing list submissions to
	qgis-developer at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.osgeo.org/mailman/listinfo/qgis-developer
or, via email, send a message with subject or body 'help' to
	qgis-developer-request at lists.osgeo.org

You can reach the person managing the list at
	qgis-developer-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific than "Re: Contents of QGIS-Developer digest..."


Today's Topics:

   1. Custom processing script instabilities (Alexis R.L.)
   2. Re: Custom processing script instabilities (Luigi Pirelli)
   3. Re: Custom processing script instabilities (Alexis R.L.)
   4. Re: Custom processing script instabilities (Luigi Pirelli)


----------------------------------------------------------------------

Message: 1
Date: Thu, 24 Jun 2021 15:50:54 -0400
From: "Alexis R.L." <alroyliz0 at gmail.com>
To: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: [QGIS-Developer] Custom processing script instabilities
Message-ID:
	<CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Greetings,

I have one custom script that uses PIL to get the exif tag, and when I execute the script for the first time, the processing window vanishes and qgis stall and then crashes.

To get it to run properly I had to set the return before opening the files with PIL to run a neutered version and then subsequent runs were flawless during that qgis instance.

I ended up using a standalone exif reader, though slower , but there are no more crashes.

Has anyone else had similar issues and is anyone aware of a way to prevent such crashes or handle them more gracefully, as no trace is left currently.

Thanks and have a nice day,

Alex
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/d49ff6b4/attachment-0001.html>

------------------------------

Message: 2
Date: Thu, 24 Jun 2021 22:34:01 +0200
From: Luigi Pirelli <luipir at gmail.com>
To: "Alexis R.L." <alroyliz0 at gmail.com>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Custom processing script instabilities
Message-ID:
	<CAFO80_qOK0pBn1KajrPN0paAF=+SrsObeLs=QGqoY_vs=Oq3XQ at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

hard to say something without reading the code... btw generally you do not have to interact with main GUi from a processing alg that by default run in a separated thread => this can cause crash if you do not use standard processing libs (e.g. feedback) to send message to the user.
No idea if this could be the source of the problem., IMHO sharing the code would help and also help to verify if it can be replicable.

regards

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:

> Greetings,
>
> I have one custom script that uses PIL to get the exif tag, and when I 
> execute the script for the first time, the processing window vanishes 
> and qgis stall and then crashes.
>
> To get it to run properly I had to set the return before opening the 
> files with PIL to run a neutered version and then subsequent runs were 
> flawless during that qgis instance.
>
> I ended up using a standalone exif reader, though slower , but there 
> are no more crashes.
>
> Has anyone else had similar issues and is anyone aware of a way to 
> prevent such crashes or handle them more gracefully, as no trace is left currently.
>
> Thanks and have a nice day,
>
> Alex
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/084a8256/attachment-0001.html>

------------------------------

Message: 3
Date: Thu, 24 Jun 2021 17:05:09 -0400
From: "Alexis R.L." <alroyliz0 at gmail.com>
To: Luigi Pirelli <luipir at gmail.com>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Custom processing script instabilities
Message-ID:
	<CAOM0XWB22aCNvEZ8O04yi-VATkjotqN_rHJ26rBpGC87Asv7BA at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Greetings Luigi,

There were no interaction, I used glob to gather all the images in a folder, used Image.Open and then used _getexif(). But returning before this part was the only way to get a stable first run.

Sadly I can share the code (work and IP).

The rest of it looped through datapoints and correlated the images to the points using the exif timestamp and the geolocalisation.

Alex

Le jeu. 24 juin 2021 ? 16:34, Luigi Pirelli <luipir at gmail.com> a ?crit :

> hard to say something without reading the code... btw generally you do 
> not have to interact with main GUi from a processing alg that by 
> default run in a separated thread => this can cause crash if you do 
> not use standard processing libs (e.g. feedback) to send message to the user.
> No idea if this could be the source of the problem., IMHO sharing the 
> code would help and also help to verify if it can be replicable.
>
> regards
>
> Luigi Pirelli
>
>
> **********************************************************************
> ****************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: 
> http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospat
> ial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
>
> **********************************************************************
> ****************************
>
>
> On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>
>> Greetings,
>>
>> I have one custom script that uses PIL to get the exif tag, and when 
>> I execute the script for the first time, the processing window 
>> vanishes and qgis stall and then crashes.
>>
>> To get it to run properly I had to set the return before opening the 
>> files with PIL to run a neutered version and then subsequent runs 
>> were flawless during that qgis instance.
>>
>> I ended up using a standalone exif reader, though slower , but there 
>> are no more crashes.
>>
>> Has anyone else had similar issues and is anyone aware of a way to 
>> prevent such crashes or handle them more gracefully, as no trace is 
>> left currently.
>>
>> Thanks and have a nice day,
>>
>> Alex
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/415ff84b/attachment-0001.html>

------------------------------

Message: 4
Date: Fri, 25 Jun 2021 09:14:43 +0200
From: Luigi Pirelli <luipir at gmail.com>
To: "Alexis R.L." <alroyliz0 at gmail.com>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Custom processing script instabilities
Message-ID:
	<CAFO80_oh3NPcZE9oOaoB+0+FfhGLrKU74t71+PsYGXCw=736dw at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

strange that a library call exit, so I would inspect if the lib faces a raise condition. I would check the code outside qgis checking if it terminates for some reason.

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 24 Jun 2021 at 23:05, Alexis R.L. <alroyliz0 at gmail.com> wrote:

> Greetings Luigi,
>
> There were no interaction, I used glob to gather all the images in a 
> folder, used Image.Open and then used _getexif(). But returning before 
> this part was the only way to get a stable first run.
>
> Sadly I can share the code (work and IP).
>
> The rest of it looped through datapoints and correlated the images to 
> the points using the exif timestamp and the geolocalisation.
>
> Alex
>
> Le jeu. 24 juin 2021 ? 16:34, Luigi Pirelli <luipir at gmail.com> a ?crit :
>
>> hard to say something without reading the code... btw generally you 
>> do not have to interact with main GUi from a processing alg that by 
>> default run in a separated thread => this can cause crash if you do 
>> not use standard processing libs (e.g. feedback) to send message to the user.
>> No idea if this could be the source of the problem., IMHO sharing the 
>> code would help and also help to verify if it can be replicable.
>>
>> regards
>>
>> Luigi Pirelli
>>
>>
>> *********************************************************************
>> *****************************
>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>> * Stackexchange: 
>> http://gis.stackexchange.com/users/19667/luigi-pirelli
>> * GitHub: https://github.com/luipir
>> * Book: Mastering QGIS3 - 3rd Edition 
>> <https://www.packtpub.com/eu/application-development/mastering-geospa
>> tial-development-qgis-3x-third-edition>
>> * Hire a team: http://www.qcooperative.net
>>
>> *********************************************************************
>> *****************************
>>
>>
>> On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>>
>>> Greetings,
>>>
>>> I have one custom script that uses PIL to get the exif tag, and when 
>>> I execute the script for the first time, the processing window 
>>> vanishes and qgis stall and then crashes.
>>>
>>> To get it to run properly I had to set the return before opening the 
>>> files with PIL to run a neutered version and then subsequent runs 
>>> were flawless during that qgis instance.
>>>
>>> I ended up using a standalone exif reader, though slower , but there 
>>> are no more crashes.
>>>
>>> Has anyone else had similar issues and is anyone aware of a way to 
>>> prevent such crashes or handle them more gracefully, as no trace is 
>>> left currently.
>>>
>>> Thanks and have a nice day,
>>>
>>> Alex
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210625/fcd0affd/attachment.html>

------------------------------

Subject: Digest Footer

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


------------------------------

End of QGIS-Developer Digest, Vol 188, Issue 36
***********************************************

From prem.netgis at gmail.com  Fri Jun 25 04:55:16 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Fri, 25 Jun 2021 17:25:16 +0530
Subject: [QGIS-Developer] Reg: native:clip processing tool error with "Could
 not create memory layer"
Message-ID: <CAP2_p63VSduF2ci0immWhW+Cqw+4pkE6aD0KYeG6r989nweO3w@mail.gmail.com>

Hi Team,

I am trying to run a script which initially clips certain data and then
outputs an in-memory clipped layer that will be used further in the code on
the linux machine.

The script used to work perfectly fine on both Windows and Linux machines,
however, only linux machines below errors are seen off late saying output
in-memory layer is not created. Suspected disk space availability issue but
it is not. Any thoughts to troubleshoot would be appreciated. Thanks.

[image: image.png]
Regards,
Prem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210625/d15f0ce2/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 39045 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210625/d15f0ce2/attachment-0001.png>

From nyall.dawson at gmail.com  Fri Jun 25 23:47:18 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 26 Jun 2021 16:47:18 +1000
Subject: [QGIS-Developer] Custom processing script instabilities (Nzl_T)
In-Reply-To: <83bff5808abf44d295b5aa2c6127e0aa@WINHEXBEEU118.win.mail>
References: <83bff5808abf44d295b5aa2c6127e0aa@WINHEXBEEU118.win.mail>
Message-ID: <CAB28AshdrhFsh___-rY1_TAes7+a=cEs3V2ifmvAgnj3o5heNA@mail.gmail.com>

On Fri, 25 Jun 2021 at 20:14, Nazli Turini [BBA]
<nazli.turini at broadband-academy.de> wrote:
>
> Hi Evereybody,
>
> I am facing the same issue.
>
> I am creating a custom processing algorithm in which it loads 1, the google satellite 2. get my study_region.shp file 3. loop through the features in study_region.shp 4. and for each feature create the mbtiles using processing.run('qgis:tilesxyzmbtiles'...)5. Save the result on the predefined folder.
>
> The script runs when the ZOOM_MAX and ZOOM_MIN are 12. When I change the ZOOM_MAX to 19, the processing window vanished and qgis crashed. Maybe it gets some hint to @ Alexis

Your script uses a lot of thread-unsafe calls. I've marked them below.
You should find alternatives for these, or make sure your algorithm
returns the FlagNoThreading flag from an override of the
QgsProcessingAlgorithm.flags() method.

>
>         #if Projektnummer.find(SEPARATOR) > 0:
>         output_path = os.path.join(out_folder, Projektnummer)
>         #Projektnummer = path.basename(Projektnummer)
>             # Create folder if not present
>         if not os.path.exists(output_path):
>             makedirs(output_path)
>         #Load the google xyz data
>         urlWithParams = 'type=xyz&url=https://mt1.google.com/vt/lyrs%3Ds%26x%3D%7Bx%7D%26y%3D%7By%7D%26z%3D%7Bz%7D&zmax=19&zmin=0'
>         rlayer = QgsRasterLayer(urlWithParams, 'Google', 'wms')
>         QgsProject.instance().addMapLayer(rlayer, False)

not thread safe -- you CANNOT interact with QgsProject.instance() from
a background thread.


>         layerTree = iface.layerTreeCanvasBridge().rootGroup()

NOT thread safe -- iface methods should only ever be accessed from the
main (gui) thread.

>         layerTree.insertChildNode(0, QgsLayerTreeLayer(rlayer))

not thread safe -- the QgsLayerTree classes must be accessed only from
the thread which the parent QgsProject belongs to.

>         if feedback.isCanceled():
>             return {}
>
>         input_featuresource = self.parameterAsSource(parameters, 'Ausbaugebiet', context)
>
>         for feature in input_featuresource.getFeatures():
>             attrs = feature.attributes()
>             name=attrs[1]
>             bbox = feature.geometry().boundingBox()
>             bbox_extent = '%f,%f,%f,%f' % (bbox.xMinimum(), bbox.xMaximum(), bbox.yMinimum(), bbox.yMaximum())
>             alg_params = {
>             'BACKGROUND_COLOR': QColor(0, 0, 0, 0),
>             'DPI': 300,
>             'EXTENT': bbox_extent,
>             'METATILESIZE': 6,
>             'QUALITY': 75,
>             'TILE_FORMAT': 0,
>             'ZOOM_MAX': 12,
>             'ZOOM_MIN': 12,
>             'OUTPUT_FILE': output_path+'/googlestallite_%s.mbtiles' %(name)
>             }
>             google=processing.run('qgis:tilesxyzmbtiles', alg_params,is_child_algorithm=True,context=context, feedback=feedback)['OUTPUT_FILE']
>                     # Check for cancelation
>             if feedback.isCanceled():
>                 return {}
>             #Remove the layer
>         QgsProject.instance().removeMapLayers([rlayer.id()])

Again, not thread safe.

Hope that helps!
Nyall

>         del rlayer
>         return result
>
> Thank you so much and best regards,
> Nazli
>
> -----Urspr?ngliche Nachricht-----
> Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> Im Auftrag von qgis-developer-request at lists.osgeo.org
> Gesendet: Freitag, 25. Juni 2021 09:15
> An: qgis-developer at lists.osgeo.org
> Betreff: QGIS-Developer Digest, Vol 188, Issue 36
>
> Send QGIS-Developer mailing list submissions to
>         qgis-developer at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
> or, via email, send a message with subject or body 'help' to
>         qgis-developer-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         qgis-developer-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific than "Re: Contents of QGIS-Developer digest..."
>
>
> Today's Topics:
>
>    1. Custom processing script instabilities (Alexis R.L.)
>    2. Re: Custom processing script instabilities (Luigi Pirelli)
>    3. Re: Custom processing script instabilities (Alexis R.L.)
>    4. Re: Custom processing script instabilities (Luigi Pirelli)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Thu, 24 Jun 2021 15:50:54 -0400
> From: "Alexis R.L." <alroyliz0 at gmail.com>
> To: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: [QGIS-Developer] Custom processing script instabilities
> Message-ID:
>         <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Greetings,
>
> I have one custom script that uses PIL to get the exif tag, and when I execute the script for the first time, the processing window vanishes and qgis stall and then crashes.
>
> To get it to run properly I had to set the return before opening the files with PIL to run a neutered version and then subsequent runs were flawless during that qgis instance.
>
> I ended up using a standalone exif reader, though slower , but there are no more crashes.
>
> Has anyone else had similar issues and is anyone aware of a way to prevent such crashes or handle them more gracefully, as no trace is left currently.
>
> Thanks and have a nice day,
>
> Alex
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/d49ff6b4/attachment-0001.html>
>
> ------------------------------
>
> Message: 2
> Date: Thu, 24 Jun 2021 22:34:01 +0200
> From: Luigi Pirelli <luipir at gmail.com>
> To: "Alexis R.L." <alroyliz0 at gmail.com>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] Custom processing script instabilities
> Message-ID:
>         <CAFO80_qOK0pBn1KajrPN0paAF=+SrsObeLs=QGqoY_vs=Oq3XQ at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> hard to say something without reading the code... btw generally you do not have to interact with main GUi from a processing alg that by default run in a separated thread => this can cause crash if you do not use standard processing libs (e.g. feedback) to send message to the user.
> No idea if this could be the source of the problem., IMHO sharing the code would help and also help to verify if it can be replicable.
>
> regards
>
> Luigi Pirelli
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
> **************************************************************************************************
>
>
> On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>
> > Greetings,
> >
> > I have one custom script that uses PIL to get the exif tag, and when I
> > execute the script for the first time, the processing window vanishes
> > and qgis stall and then crashes.
> >
> > To get it to run properly I had to set the return before opening the
> > files with PIL to run a neutered version and then subsequent runs were
> > flawless during that qgis instance.
> >
> > I ended up using a standalone exif reader, though slower , but there
> > are no more crashes.
> >
> > Has anyone else had similar issues and is anyone aware of a way to
> > prevent such crashes or handle them more gracefully, as no trace is left currently.
> >
> > Thanks and have a nice day,
> >
> > Alex
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/084a8256/attachment-0001.html>
>
> ------------------------------
>
> Message: 3
> Date: Thu, 24 Jun 2021 17:05:09 -0400
> From: "Alexis R.L." <alroyliz0 at gmail.com>
> To: Luigi Pirelli <luipir at gmail.com>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] Custom processing script instabilities
> Message-ID:
>         <CAOM0XWB22aCNvEZ8O04yi-VATkjotqN_rHJ26rBpGC87Asv7BA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Greetings Luigi,
>
> There were no interaction, I used glob to gather all the images in a folder, used Image.Open and then used _getexif(). But returning before this part was the only way to get a stable first run.
>
> Sadly I can share the code (work and IP).
>
> The rest of it looped through datapoints and correlated the images to the points using the exif timestamp and the geolocalisation.
>
> Alex
>
> Le jeu. 24 juin 2021 ? 16:34, Luigi Pirelli <luipir at gmail.com> a ?crit :
>
> > hard to say something without reading the code... btw generally you do
> > not have to interact with main GUi from a processing alg that by
> > default run in a separated thread => this can cause crash if you do
> > not use standard processing libs (e.g. feedback) to send message to the user.
> > No idea if this could be the source of the problem., IMHO sharing the
> > code would help and also help to verify if it can be replicable.
> >
> > regards
> >
> > Luigi Pirelli
> >
> >
> > **********************************************************************
> > ****************************
> > * LinkedIn: https://www.linkedin.com/in/luigipirelli
> > * Stackexchange:
> > http://gis.stackexchange.com/users/19667/luigi-pirelli
> > * GitHub: https://github.com/luipir
> > * Book: Mastering QGIS3 - 3rd Edition
> > <https://www.packtpub.com/eu/application-development/mastering-geospat
> > ial-development-qgis-3x-third-edition>
> > * Hire a team: http://www.qcooperative.net
> >
> > **********************************************************************
> > ****************************
> >
> >
> > On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
> >
> >> Greetings,
> >>
> >> I have one custom script that uses PIL to get the exif tag, and when
> >> I execute the script for the first time, the processing window
> >> vanishes and qgis stall and then crashes.
> >>
> >> To get it to run properly I had to set the return before opening the
> >> files with PIL to run a neutered version and then subsequent runs
> >> were flawless during that qgis instance.
> >>
> >> I ended up using a standalone exif reader, though slower , but there
> >> are no more crashes.
> >>
> >> Has anyone else had similar issues and is anyone aware of a way to
> >> prevent such crashes or handle them more gracefully, as no trace is
> >> left currently.
> >>
> >> Thanks and have a nice day,
> >>
> >> Alex
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
> >
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/415ff84b/attachment-0001.html>
>
> ------------------------------
>
> Message: 4
> Date: Fri, 25 Jun 2021 09:14:43 +0200
> From: Luigi Pirelli <luipir at gmail.com>
> To: "Alexis R.L." <alroyliz0 at gmail.com>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] Custom processing script instabilities
> Message-ID:
>         <CAFO80_oh3NPcZE9oOaoB+0+FfhGLrKU74t71+PsYGXCw=736dw at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> strange that a library call exit, so I would inspect if the lib faces a raise condition. I would check the code outside qgis checking if it terminates for some reason.
>
> Luigi Pirelli
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
> **************************************************************************************************
>
>
> On Thu, 24 Jun 2021 at 23:05, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>
> > Greetings Luigi,
> >
> > There were no interaction, I used glob to gather all the images in a
> > folder, used Image.Open and then used _getexif(). But returning before
> > this part was the only way to get a stable first run.
> >
> > Sadly I can share the code (work and IP).
> >
> > The rest of it looped through datapoints and correlated the images to
> > the points using the exif timestamp and the geolocalisation.
> >
> > Alex
> >
> > Le jeu. 24 juin 2021 ? 16:34, Luigi Pirelli <luipir at gmail.com> a ?crit :
> >
> >> hard to say something without reading the code... btw generally you
> >> do not have to interact with main GUi from a processing alg that by
> >> default run in a separated thread => this can cause crash if you do
> >> not use standard processing libs (e.g. feedback) to send message to the user.
> >> No idea if this could be the source of the problem., IMHO sharing the
> >> code would help and also help to verify if it can be replicable.
> >>
> >> regards
> >>
> >> Luigi Pirelli
> >>
> >>
> >> *********************************************************************
> >> *****************************
> >> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> >> * Stackexchange:
> >> http://gis.stackexchange.com/users/19667/luigi-pirelli
> >> * GitHub: https://github.com/luipir
> >> * Book: Mastering QGIS3 - 3rd Edition
> >> <https://www.packtpub.com/eu/application-development/mastering-geospa
> >> tial-development-qgis-3x-third-edition>
> >> * Hire a team: http://www.qcooperative.net
> >>
> >> *********************************************************************
> >> *****************************
> >>
> >>
> >> On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
> >>
> >>> Greetings,
> >>>
> >>> I have one custom script that uses PIL to get the exif tag, and when
> >>> I execute the script for the first time, the processing window
> >>> vanishes and qgis stall and then crashes.
> >>>
> >>> To get it to run properly I had to set the return before opening the
> >>> files with PIL to run a neutered version and then subsequent runs
> >>> were flawless during that qgis instance.
> >>>
> >>> I ended up using a standalone exif reader, though slower , but there
> >>> are no more crashes.
> >>>
> >>> Has anyone else had similar issues and is anyone aware of a way to
> >>> prevent such crashes or handle them more gracefully, as no trace is
> >>> left currently.
> >>>
> >>> Thanks and have a nice day,
> >>>
> >>> Alex
> >>> _______________________________________________
> >>> QGIS-Developer mailing list
> >>> QGIS-Developer at lists.osgeo.org
> >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>>
> >>
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210625/fcd0affd/attachment.html>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> ------------------------------
>
> End of QGIS-Developer Digest, Vol 188, Issue 36
> ***********************************************
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Fri Jun 25 23:49:35 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 26 Jun 2021 16:49:35 +1000
Subject: [QGIS-Developer] Custom processing script instabilities
In-Reply-To: <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww@mail.gmail.com>
References: <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww@mail.gmail.com>
Message-ID: <CAB28AshG1xxNV6MF5QraJEDf1x3nzhwkr0Zm7vtDUnAP-9LyxA@mail.gmail.com>

On Fri, 25 Jun 2021 at 05:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>
> Greetings,
>
> I have one custom script that uses PIL to get the exif tag, and when I execute the script for the first time, the processing window vanishes and qgis stall and then crashes.
>
> To get it to run properly I had to set the return before opening the files with PIL to run a neutered version and then subsequent runs were flawless during that qgis instance.
>
> I ended up using a standalone exif reader, though slower , but there are no more crashes.

You can use the GDAL python library and retrieve exif metadata via a
call to GDALGetMetadata. This has the benefit of being available
EVERYWHERE qgis is available, with no added dependencies!

Nyall


>
> Has anyone else had similar issues and is anyone aware of a way to prevent such crashes or handle them more gracefully, as no trace is left currently.
>
> Thanks and have a nice day,
>
> Alex
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Fri Jun 25 23:50:17 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 26 Jun 2021 16:50:17 +1000
Subject: [QGIS-Developer] Reg: native:clip processing tool error with
 "Could not create memory layer"
In-Reply-To: <CAP2_p63VSduF2ci0immWhW+Cqw+4pkE6aD0KYeG6r989nweO3w@mail.gmail.com>
References: <CAP2_p63VSduF2ci0immWhW+Cqw+4pkE6aD0KYeG6r989nweO3w@mail.gmail.com>
Message-ID: <CAB28Asj3pU+a90C-Xb3BP0_CYNgX1rsfyZRjCyxJ1ij_naJ7=A@mail.gmail.com>

On Fri, 25 Jun 2021 at 21:56, Prem Kumar <prem.netgis at gmail.com> wrote:
>
> Hi Team,
>
> I am trying to run a script which initially clips certain data and then outputs an in-memory clipped layer that will be used further in the code on the linux machine.
>
> The script used to work perfectly fine on both Windows and Linux machines, however, only linux machines below errors are seen off late saying output in-memory layer is not created. Suspected disk space availability issue but it is not. Any thoughts to troubleshoot would be appreciated. Thanks.

You'll need to share your script for any meaningful replies. Are you
able to do this?

Nyall

>
>
> Regards,
> Prem
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From prem.netgis at gmail.com  Mon Jun 28 10:13:08 2021
From: prem.netgis at gmail.com (Prem Kumar)
Date: Mon, 28 Jun 2021 22:43:08 +0530
Subject: [QGIS-Developer] Reg: native:clip processing tool error with
 "Could not create memory layer"
In-Reply-To: <CAB28Asj3pU+a90C-Xb3BP0_CYNgX1rsfyZRjCyxJ1ij_naJ7=A@mail.gmail.com>
References: <CAP2_p63VSduF2ci0immWhW+Cqw+4pkE6aD0KYeG6r989nweO3w@mail.gmail.com>
 <CAB28Asj3pU+a90C-Xb3BP0_CYNgX1rsfyZRjCyxJ1ij_naJ7=A@mail.gmail.com>
Message-ID: <CAP2_p63N465t7D7e86d1hLSydi7dbjdngy8-7f4-KqbUTsWrdQ@mail.gmail.com>

Hi Nyall,

In the process of isolating the issue to reproduce the problem with a small
piece of code, I could find the root cause being unable to pick the
postgres database driver. I have changed the prefix path on linux while
creating the qgsApplication and started working.

Thanks for your help.

-Prem

On Sat, Jun 26, 2021 at 12:20 PM Nyall Dawson <nyall.dawson at gmail.com>
wrote:

> On Fri, 25 Jun 2021 at 21:56, Prem Kumar <prem.netgis at gmail.com> wrote:
> >
> > Hi Team,
> >
> > I am trying to run a script which initially clips certain data and then
> outputs an in-memory clipped layer that will be used further in the code on
> the linux machine.
> >
> > The script used to work perfectly fine on both Windows and Linux
> machines, however, only linux machines below errors are seen off late
> saying output in-memory layer is not created. Suspected disk space
> availability issue but it is not. Any thoughts to troubleshoot would be
> appreciated. Thanks.
>
> You'll need to share your script for any meaningful replies. Are you
> able to do this?
>
> Nyall
>
> >
> >
> > Regards,
> > Prem
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210628/f289574c/attachment.html>

From nazli.turini at broadband-academy.de  Wed Jun 30 02:00:49 2021
From: nazli.turini at broadband-academy.de (Nazli Turini [BBA])
Date: Wed, 30 Jun 2021 09:00:49 +0000
Subject: [QGIS-Developer] Custom processing script instabilities (Nzl_T)
Message-ID: <aad7a2e7cb5b4e8c9b2e1028e4691c37@WINHEXBEEU118.win.mail>

Hi Nyall,

Thank you so much fort he feedback. I have tried to customized the script based on your suggestions and in this step, I have removed the lines with thread-unsafe. Also, I have added to the  algorithm the flag which returns the FlagNoThreading flag from an override of the QgsProcessingAlgorithm.flags() method.

Now, the script loop thrigh the features of the region and should create one mbtile for each feature.
However, I still face the issue when I make the 'ZOOM_MAX': 19, processing window vanished and qgis crashed. 
The stack traces are reporeted as following:
----------------------------------------------
QObject::thread :
QgsProcessingAlgorithm::runPrepared :
QgsProcessingAlgRunnerTask::run :
PyInit__core :
QgsTask::start :
QThreadPoolPrivate::reset :
QThread::start :
BaseThreadInitThunk :
RtlUserThreadStart :
--------------------------------
Here is my code:

# -*- coding: utf-8 -*-

import platform
import os
from os import makedirs
from shutil import move

from qgis.PyQt.QtCore import QCoreApplication
from PyQt5.QtGui import QColor
from qgis.core import QgsProcessingMultiStepFeedback

from qgis.core import (QgsProcessing,
                       QgsFeatureSink,
                       QgsProcessingException,
                       QgsProcessingAlgorithm,
                       QgsProcessingParameterFeatureSource,
                       QgsProcessingParameterFeatureSink,QgsRasterLayer,QgsAbstractPropertyCollection,QgsProject,QgsProcessingContext)
from qgis import processing
from qgis.core import QgsProcessingFeedback
from qgis.core import (QgsProcessingParameterFile,
                       QgsProcessingParameterString,
                       )


class crea_mbtiles_MERGIN(QgsProcessingAlgorithm):

    # Constants used to refer to parameters and outputs. They will be
    # used when calling the algorithm from another algorithm, or when
    # calling from the QGIS console.
    def tr(self, string):
        """
        Returns a translatable string with the self.tr() function.
        """
        return QCoreApplication.translate('Processing', string)

    def createInstance(self):
        # Must return a new copy of your algorithm.
        return crea_mbtiles_MERGIN()
    def name(self):
        """
        Returns the unique algorithm name.
        """
        return 'Create Mbtiles'

    def displayName(self):
        """
        Returns the translated algorithm name.
        """
        return self.tr('Create Mbtiles')
    def __init__(self):
        super().__init__()
        
        
    def flags(self):
            return super().flags() | QgsProcessingAlgorithm.FlagNoThreading
 

    Ausbaugebiet = 'Ausbaugebiet'
    Projektnummer= 'Projekt-Nummer'
    OUT_FOLDER = 'OUT_FOLDER'  # ab?ndern f?r andere Dateien


    def initAlgorithm(self, config=None):
        self.addParameter(
            QgsProcessingParameterFeatureSource(
                self.Ausbaugebiet,
                'Ausbaugebiet',
                [QgsProcessing.TypeVectorAnyGeometry]
            )
        )
        self.addParameter(
            QgsProcessingParameterString(
                self.Projektnummer,
                'Projekt-Nummer',
                optional=False
            )
        )
        self.addParameter(
            QgsProcessingParameterFile(
                self.OUT_FOLDER,
                f'Zentralen MERGIN Ordner',
                behavior=QgsProcessingParameterFile.Folder,
                defaultValue='V:\99_Planungsdaten\Mergin',
                optional=False
            )
        )

    def processAlgorithm(self, parameters, context, model_feedback):
        # Use a multi-step feedback, so that individual child algorithm progress reports are adjusted for the
        # overall progress through the model
        feedback = QgsProcessingMultiStepFeedback(1, model_feedback)
        results = {}
        outputs = {}
        
      
        #Input variables
        
        Ausbaugebiet = self.parameterAsSource(
            parameters,
            self.Ausbaugebiet,
            context
        )

        out_folder: str = self.parameterAsString(
            parameters,
            self.OUT_FOLDER,
            context
        )
        Projektnummer = self.parameterAsString(
            parameters,
            self.Projektnummer,
            context
        )

        #create the output folder
        output_path = os.path.join(out_folder, Projektnummer)

        if not os.path.exists(output_path):
            makedirs(output_path)
        if feedback.isCanceled():
            return {}  
        #Go through the study region features and create the mbtiles
        
        input_featuresource = self.parameterAsSource(parameters, 'Ausbaugebiet', context)
        allfeatures = input_featuresource.getFeatures()
        for feature, f in enumerate(allfeatures):
            if feedback.isCanceled():
                break
            if not f.hasGeometry():
                sink.addFeature(f,QgsFeatureSink.FastInser)
                continue
            attrs = f.attributes()
            name=attrs[1]
            bbox = f.geometry().boundingBox()
            bbox_extent = '%f,%f,%f,%f' % (bbox.xMinimum(), bbox.xMaximum(), bbox.yMinimum(), bbox.yMaximum())
            alg_params = {
            'BACKGROUND_COLOR': QColor(0, 0, 0, 0),
            'DPI': 96,
            'EXTENT': bbox_extent,
            'METATILESIZE': 6,
            'QUALITY': 75,
            'TILE_FORMAT': 0,
            'ZOOM_MAX': 19,
            'ZOOM_MIN': 12,
            'OUTPUT_FILE': output_path+'\\googlestallite_%s.mbtiles' %(name)
            }
            google=processing.run('qgis:tilesxyzmbtiles', alg_params,is_child_algorithm=True,context=context, feedback=feedback)

        if feedback.isCanceled():
            return {}
        return results


Thank you so much again and best regards,
Nazli 


Nazli Turini
Systemdesignerin GIS


Broadband Academy GmbH | www.broadband-academy.de
Wilhelmsstra?e 2  | 34117 Kassel | Fax +49 561 827915 90 
Tel. +49 561 827915 55  | nazli.turini at broadband-academy.de

Amtsgericht Stuttgart | HRB 735044 | USt ID: DE 274112225 

Gesch?ftsf?hrer: Oliver Laible, Tobias Tippelt, Dr. Marc Ullrich
Bitte beachten Sie unsere neuen Rufnummern f?r den Standort Kassel!

-----Urspr?ngliche Nachricht-----
Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> Im Auftrag von qgis-developer-request at lists.osgeo.org
Gesendet: Samstag, 26. Juni 2021 21:00
An: qgis-developer at lists.osgeo.org
Betreff: QGIS-Developer Digest, Vol 188, Issue 38

Send QGIS-Developer mailing list submissions to
	qgis-developer at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.osgeo.org/mailman/listinfo/qgis-developer
or, via email, send a message with subject or body 'help' to
	qgis-developer-request at lists.osgeo.org

You can reach the person managing the list at
	qgis-developer-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific than "Re: Contents of QGIS-Developer digest..."


Today's Topics:

   1. Re: Custom processing script instabilities (Nzl_T) (Nyall Dawson)
   2. Re: Custom processing script instabilities (Nyall Dawson)
   3. Re: Reg: native:clip processing tool error with "Could not
      create memory layer" (Nyall Dawson)


----------------------------------------------------------------------

Message: 1
Date: Sat, 26 Jun 2021 16:47:18 +1000
From: Nyall Dawson <nyall.dawson at gmail.com>
To: "Nazli Turini [BBA]" <nazli.turini at broadband-academy.de>
Cc: "qgis-developer at lists.osgeo.org" <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Custom processing script instabilities
	(Nzl_T)
Message-ID:
	<CAB28AshdrhFsh___-rY1_TAes7+a=cEs3V2ifmvAgnj3o5heNA at mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"

On Fri, 25 Jun 2021 at 20:14, Nazli Turini [BBA] <nazli.turini at broadband-academy.de> wrote:
>
> Hi Evereybody,
>
> I am facing the same issue.
>
> I am creating a custom processing algorithm in which it loads 1, the google satellite 2. get my study_region.shp file 3. loop through the features in study_region.shp 4. and for each feature create the mbtiles using processing.run('qgis:tilesxyzmbtiles'...)5. Save the result on the predefined folder.
>
> The script runs when the ZOOM_MAX and ZOOM_MIN are 12. When I change 
> the ZOOM_MAX to 19, the processing window vanished and qgis crashed. 
> Maybe it gets some hint to @ Alexis

Your script uses a lot of thread-unsafe calls. I've marked them below.
You should find alternatives for these, or make sure your algorithm returns the FlagNoThreading flag from an override of the
QgsProcessingAlgorithm.flags() method.

>
>         #if Projektnummer.find(SEPARATOR) > 0:
>         output_path = os.path.join(out_folder, Projektnummer)
>         #Projektnummer = path.basename(Projektnummer)
>             # Create folder if not present
>         if not os.path.exists(output_path):
>             makedirs(output_path)
>         #Load the google xyz data
>         urlWithParams = 'type=xyz&url=https://mt1.google.com/vt/lyrs%3Ds%26x%3D%7Bx%7D%26y%3D%7By%7D%26z%3D%7Bz%7D&zmax=19&zmin=0'
>         rlayer = QgsRasterLayer(urlWithParams, 'Google', 'wms')
>         QgsProject.instance().addMapLayer(rlayer, False)

not thread safe -- you CANNOT interact with QgsProject.instance() from a background thread.


>         layerTree = iface.layerTreeCanvasBridge().rootGroup()

NOT thread safe -- iface methods should only ever be accessed from the main (gui) thread.

>         layerTree.insertChildNode(0, QgsLayerTreeLayer(rlayer))

not thread safe -- the QgsLayerTree classes must be accessed only from the thread which the parent QgsProject belongs to.

>         if feedback.isCanceled():
>             return {}
>
>         input_featuresource = self.parameterAsSource(parameters, 
> 'Ausbaugebiet', context)
>
>         for feature in input_featuresource.getFeatures():
>             attrs = feature.attributes()
>             name=attrs[1]
>             bbox = feature.geometry().boundingBox()
>             bbox_extent = '%f,%f,%f,%f' % (bbox.xMinimum(), bbox.xMaximum(), bbox.yMinimum(), bbox.yMaximum())
>             alg_params = {
>             'BACKGROUND_COLOR': QColor(0, 0, 0, 0),
>             'DPI': 300,
>             'EXTENT': bbox_extent,
>             'METATILESIZE': 6,
>             'QUALITY': 75,
>             'TILE_FORMAT': 0,
>             'ZOOM_MAX': 12,
>             'ZOOM_MIN': 12,
>             'OUTPUT_FILE': output_path+'/googlestallite_%s.mbtiles' %(name)
>             }
>             google=processing.run('qgis:tilesxyzmbtiles', alg_params,is_child_algorithm=True,context=context, feedback=feedback)['OUTPUT_FILE']
>                     # Check for cancelation
>             if feedback.isCanceled():
>                 return {}
>             #Remove the layer
>         QgsProject.instance().removeMapLayers([rlayer.id()])

Again, not thread safe.

Hope that helps!
Nyall

>         del rlayer
>         return result
>
> Thank you so much and best regards,
> Nazli
>
> -----Urspr?ngliche Nachricht-----
> Von: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> Im 
> Auftrag von qgis-developer-request at lists.osgeo.org
> Gesendet: Freitag, 25. Juni 2021 09:15
> An: qgis-developer at lists.osgeo.org
> Betreff: QGIS-Developer Digest, Vol 188, Issue 36
>
> Send QGIS-Developer mailing list submissions to
>         qgis-developer at lists.osgeo.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
> or, via email, send a message with subject or body 'help' to
>         qgis-developer-request at lists.osgeo.org
>
> You can reach the person managing the list at
>         qgis-developer-owner at lists.osgeo.org
>
> When replying, please edit your Subject line so it is more specific than "Re: Contents of QGIS-Developer digest..."
>
>
> Today's Topics:
>
>    1. Custom processing script instabilities (Alexis R.L.)
>    2. Re: Custom processing script instabilities (Luigi Pirelli)
>    3. Re: Custom processing script instabilities (Alexis R.L.)
>    4. Re: Custom processing script instabilities (Luigi Pirelli)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Thu, 24 Jun 2021 15:50:54 -0400
> From: "Alexis R.L." <alroyliz0 at gmail.com>
> To: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: [QGIS-Developer] Custom processing script instabilities
> Message-ID:
>         
> <CAOM0XWDiy-WUXQrL4fEFXKxUyzBb-K9Mix3kBTRwK4nnRAhHww at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Greetings,
>
> I have one custom script that uses PIL to get the exif tag, and when I execute the script for the first time, the processing window vanishes and qgis stall and then crashes.
>
> To get it to run properly I had to set the return before opening the files with PIL to run a neutered version and then subsequent runs were flawless during that qgis instance.
>
> I ended up using a standalone exif reader, though slower , but there are no more crashes.
>
> Has anyone else had similar issues and is anyone aware of a way to prevent such crashes or handle them more gracefully, as no trace is left currently.
>
> Thanks and have a nice day,
>
> Alex
> -------------- next part -------------- An HTML attachment was 
> scrubbed...
> URL: 
> <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/
> d49ff6b4/attachment-0001.html>
>
> ------------------------------
>
> Message: 2
> Date: Thu, 24 Jun 2021 22:34:01 +0200
> From: Luigi Pirelli <luipir at gmail.com>
> To: "Alexis R.L." <alroyliz0 at gmail.com>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] Custom processing script instabilities
> Message-ID:
>         
> <CAFO80_qOK0pBn1KajrPN0paAF=+SrsObeLs=QGqoY_vs=Oq3XQ at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> hard to say something without reading the code... btw generally you do not have to interact with main GUi from a processing alg that by default run in a separated thread => this can cause crash if you do not use standard processing libs (e.g. feedback) to send message to the user.
> No idea if this could be the source of the problem., IMHO sharing the code would help and also help to verify if it can be replicable.
>
> regards
>
> Luigi Pirelli
>
> **********************************************************************
> ****************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: 
> http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospat
> ial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
> **********************************************************************
> ****************************
>
>
> On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>
> > Greetings,
> >
> > I have one custom script that uses PIL to get the exif tag, and when 
> > I execute the script for the first time, the processing window 
> > vanishes and qgis stall and then crashes.
> >
> > To get it to run properly I had to set the return before opening the 
> > files with PIL to run a neutered version and then subsequent runs 
> > were flawless during that qgis instance.
> >
> > I ended up using a standalone exif reader, though slower , but there 
> > are no more crashes.
> >
> > Has anyone else had similar issues and is anyone aware of a way to 
> > prevent such crashes or handle them more gracefully, as no trace is left currently.
> >
> > Thanks and have a nice day,
> >
> > Alex
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
> -------------- next part -------------- An HTML attachment was 
> scrubbed...
> URL: 
> <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/
> 084a8256/attachment-0001.html>
>
> ------------------------------
>
> Message: 3
> Date: Thu, 24 Jun 2021 17:05:09 -0400
> From: "Alexis R.L." <alroyliz0 at gmail.com>
> To: Luigi Pirelli <luipir at gmail.com>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] Custom processing script instabilities
> Message-ID:
>         
> <CAOM0XWB22aCNvEZ8O04yi-VATkjotqN_rHJ26rBpGC87Asv7BA at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> Greetings Luigi,
>
> There were no interaction, I used glob to gather all the images in a folder, used Image.Open and then used _getexif(). But returning before this part was the only way to get a stable first run.
>
> Sadly I can share the code (work and IP).
>
> The rest of it looped through datapoints and correlated the images to the points using the exif timestamp and the geolocalisation.
>
> Alex
>
> Le jeu. 24 juin 2021 ? 16:34, Luigi Pirelli <luipir at gmail.com> a ?crit :
>
> > hard to say something without reading the code... btw generally you 
> > do not have to interact with main GUi from a processing alg that by 
> > default run in a separated thread => this can cause crash if you do 
> > not use standard processing libs (e.g. feedback) to send message to the user.
> > No idea if this could be the source of the problem., IMHO sharing 
> > the code would help and also help to verify if it can be replicable.
> >
> > regards
> >
> > Luigi Pirelli
> >
> >
> > ********************************************************************
> > **
> > ****************************
> > * LinkedIn: https://www.linkedin.com/in/luigipirelli
> > * Stackexchange:
> > http://gis.stackexchange.com/users/19667/luigi-pirelli
> > * GitHub: https://github.com/luipir
> > * Book: Mastering QGIS3 - 3rd Edition 
> > <https://www.packtpub.com/eu/application-development/mastering-geosp
> > at
> > ial-development-qgis-3x-third-edition>
> > * Hire a team: http://www.qcooperative.net
> >
> > ********************************************************************
> > **
> > ****************************
> >
> >
> > On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
> >
> >> Greetings,
> >>
> >> I have one custom script that uses PIL to get the exif tag, and 
> >> when I execute the script for the first time, the processing window 
> >> vanishes and qgis stall and then crashes.
> >>
> >> To get it to run properly I had to set the return before opening 
> >> the files with PIL to run a neutered version and then subsequent 
> >> runs were flawless during that qgis instance.
> >>
> >> I ended up using a standalone exif reader, though slower , but 
> >> there are no more crashes.
> >>
> >> Has anyone else had similar issues and is anyone aware of a way to 
> >> prevent such crashes or handle them more gracefully, as no trace is 
> >> left currently.
> >>
> >> Thanks and have a nice day,
> >>
> >> Alex
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: 
> >> https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
> >
> -------------- next part -------------- An HTML attachment was 
> scrubbed...
> URL: 
> <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210624/
> 415ff84b/attachment-0001.html>
>
> ------------------------------
>
> Message: 4
> Date: Fri, 25 Jun 2021 09:14:43 +0200
> From: Luigi Pirelli <luipir at gmail.com>
> To: "Alexis R.L." <alroyliz0 at gmail.com>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] Custom processing script instabilities
> Message-ID:
>         
> <CAFO80_oh3NPcZE9oOaoB+0+FfhGLrKU74t71+PsYGXCw=736dw at mail.gmail.com>
> Content-Type: text/plain; charset="utf-8"
>
> strange that a library call exit, so I would inspect if the lib faces a raise condition. I would check the code outside qgis checking if it terminates for some reason.
>
> Luigi Pirelli
>
> **********************************************************************
> ****************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: 
> http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospat
> ial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
> **********************************************************************
> ****************************
>
>
> On Thu, 24 Jun 2021 at 23:05, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>
> > Greetings Luigi,
> >
> > There were no interaction, I used glob to gather all the images in a 
> > folder, used Image.Open and then used _getexif(). But returning 
> > before this part was the only way to get a stable first run.
> >
> > Sadly I can share the code (work and IP).
> >
> > The rest of it looped through datapoints and correlated the images 
> > to the points using the exif timestamp and the geolocalisation.
> >
> > Alex
> >
> > Le jeu. 24 juin 2021 ? 16:34, Luigi Pirelli <luipir at gmail.com> a ?crit :
> >
> >> hard to say something without reading the code... btw generally you 
> >> do not have to interact with main GUi from a processing alg that by 
> >> default run in a separated thread => this can cause crash if you do 
> >> not use standard processing libs (e.g. feedback) to send message to the user.
> >> No idea if this could be the source of the problem., IMHO sharing 
> >> the code would help and also help to verify if it can be replicable.
> >>
> >> regards
> >>
> >> Luigi Pirelli
> >>
> >>
> >> *******************************************************************
> >> **
> >> *****************************
> >> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> >> * Stackexchange:
> >> http://gis.stackexchange.com/users/19667/luigi-pirelli
> >> * GitHub: https://github.com/luipir
> >> * Book: Mastering QGIS3 - 3rd Edition 
> >> <https://www.packtpub.com/eu/application-development/mastering-geos
> >> pa
> >> tial-development-qgis-3x-third-edition>
> >> * Hire a team: http://www.qcooperative.net
> >>
> >> *******************************************************************
> >> **
> >> *****************************
> >>
> >>
> >> On Thu, 24 Jun 2021 at 21:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
> >>
> >>> Greetings,
> >>>
> >>> I have one custom script that uses PIL to get the exif tag, and 
> >>> when I execute the script for the first time, the processing 
> >>> window vanishes and qgis stall and then crashes.
> >>>
> >>> To get it to run properly I had to set the return before opening 
> >>> the files with PIL to run a neutered version and then subsequent 
> >>> runs were flawless during that qgis instance.
> >>>
> >>> I ended up using a standalone exif reader, though slower , but 
> >>> there are no more crashes.
> >>>
> >>> Has anyone else had similar issues and is anyone aware of a way to 
> >>> prevent such crashes or handle them more gracefully, as no trace 
> >>> is left currently.
> >>>
> >>> Thanks and have a nice day,
> >>>
> >>> Alex
> >>> _______________________________________________
> >>> QGIS-Developer mailing list
> >>> QGIS-Developer at lists.osgeo.org
> >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>> Unsubscribe: 
> >>> https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>>
> >>
> -------------- next part -------------- An HTML attachment was 
> scrubbed...
> URL: 
> <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210625/
> fcd0affd/attachment.html>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> ------------------------------
>
> End of QGIS-Developer Digest, Vol 188, Issue 36
> ***********************************************
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


------------------------------

Message: 2
Date: Sat, 26 Jun 2021 16:49:35 +1000
From: Nyall Dawson <nyall.dawson at gmail.com>
To: "Alexis R.L." <alroyliz0 at gmail.com>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Custom processing script instabilities
Message-ID:
	<CAB28AshG1xxNV6MF5QraJEDf1x3nzhwkr0Zm7vtDUnAP-9LyxA at mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"

On Fri, 25 Jun 2021 at 05:51, Alexis R.L. <alroyliz0 at gmail.com> wrote:
>
> Greetings,
>
> I have one custom script that uses PIL to get the exif tag, and when I execute the script for the first time, the processing window vanishes and qgis stall and then crashes.
>
> To get it to run properly I had to set the return before opening the files with PIL to run a neutered version and then subsequent runs were flawless during that qgis instance.
>
> I ended up using a standalone exif reader, though slower , but there are no more crashes.

You can use the GDAL python library and retrieve exif metadata via a call to GDALGetMetadata. This has the benefit of being available EVERYWHERE qgis is available, with no added dependencies!

Nyall


>
> Has anyone else had similar issues and is anyone aware of a way to prevent such crashes or handle them more gracefully, as no trace is left currently.
>
> Thanks and have a nice day,
>
> Alex
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


------------------------------

Message: 3
Date: Sat, 26 Jun 2021 16:50:17 +1000
From: Nyall Dawson <nyall.dawson at gmail.com>
To: Prem Kumar <prem.netgis at gmail.com>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Reg: native:clip processing tool error
	with "Could not create memory layer"
Message-ID:
	<CAB28Asj3pU+a90C-Xb3BP0_CYNgX1rsfyZRjCyxJ1ij_naJ7=A at mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"

On Fri, 25 Jun 2021 at 21:56, Prem Kumar <prem.netgis at gmail.com> wrote:
>
> Hi Team,
>
> I am trying to run a script which initially clips certain data and then outputs an in-memory clipped layer that will be used further in the code on the linux machine.
>
> The script used to work perfectly fine on both Windows and Linux machines, however, only linux machines below errors are seen off late saying output in-memory layer is not created. Suspected disk space availability issue but it is not. Any thoughts to troubleshoot would be appreciated. Thanks.

You'll need to share your script for any meaningful replies. Are you able to do this?

Nyall

>
>
> Regards,
> Prem
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


------------------------------

Subject: Digest Footer

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


------------------------------

End of QGIS-Developer Digest, Vol 188, Issue 38
***********************************************

From adenaculture at gmail.com  Wed Jun 30 11:56:14 2021
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 30 Jun 2021 18:56:14 +0000
Subject: [QGIS-Developer] Preview of the QGIS Earth, Sun, Moon,
 & Planets Plugin
Message-ID: <CABPxTTrWz2fTGHVLKejQjPnGVg3jcrT0Hg4XFUcdMA9O1Bw9iA@mail.gmail.com>

I thought I would give you an alpha version of the QGIS Earth, Sun, Moon &
Planets plugin I am developing. This plugin requires QGIS 3.14 or more
recent. It is also rather large because it contains all the data needed to
run. If you are on windows and want to download a self contained windows
plugin use this link to download:

 earthsunmoon-alpha-windows.zip
<https://drive.google.com/file/d/1Pld4yIxBTTHA0FBwPbaUw_qfrIhHTawA/view?usp=drive_web>

If you are using some other OS, use this link, but before you install it
open up your OSGeo4W console and run "pip install skyfield'. If this is not
the proper command for your OS then adjust it to how you install a python
package. In the OSGeo4W shell you may need to run py3_env first. If py3_env
gives an error then it is not needed.

 earthsunmoon-alpha.zip
<https://drive.google.com/file/d/1kJammSDWRTk7659Ncp3qAnNMQLggZ4Ks/view?usp=drive_web>

There are 3 processing routines that can be used to display the 1) sun, 2)
moon, 3) planets showing their position directly overhead at a particular
date and time and will look something like this:

[image: sunmoonplanets2.jpg]

There is also another window that displays all kinds of earth and moon data
for a particular location when you click on the "Solar/lunar information"
dialog box that can be found in "Plugins->Earth, sun, moon, & plants."
There is a green plus sign in the dialog box. Click on it and then click
anywhere on the map to capture the coordinate to display solar and lunar
information.

If you need help to manually install this plugin let me know.

I have not included the day/night terminator algorithm yet because there is
a bug in it. Let me know what you think and if you have any suggestions.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210630/464f9f7a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sunmoonplanets2.jpg
Type: image/jpeg
Size: 23003 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210630/464f9f7a/attachment-0001.jpg>

From motta.luiz at gmail.com  Wed Jun 30 14:50:33 2021
From: motta.luiz at gmail.com (Luiz Motta)
Date: Wed, 30 Jun 2021 18:50:33 -0300
Subject: [QGIS-Developer] Python libraries default of QGIS
Message-ID: <CAC93zU2uno+kotjortUV6TyLueG=2yT1E93x3_QJXEb=3OXoMA@mail.gmail.com>

Hi guys,

I use a long times ago the Numpy in my plugins.

But, for my surprise, recently i discover that is possible use the
PILLOW(PIL) no need to install.

I would like know how i find which the Python libraries are installed by
QGIS?

Example, can i use "import scipy" can i use "import scipy" without need
install.

Regards,
Luiz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210630/b6bb9c1c/attachment.html>

From stefan.giese at wheregroup.com  Wed Jun 30 23:03:55 2021
From: stefan.giese at wheregroup.com (Stefan Giese (WhereGroup))
Date: Thu, 1 Jul 2021 08:03:55 +0200
Subject: [QGIS-Developer] Python libraries default of QGIS
In-Reply-To: <CAC93zU2uno+kotjortUV6TyLueG=2yT1E93x3_QJXEb=3OXoMA@mail.gmail.com>
References: <CAC93zU2uno+kotjortUV6TyLueG=2yT1E93x3_QJXEb=3OXoMA@mail.gmail.com>
Message-ID: <86c6d0b0-7c9d-d8c8-5f36-958b315f2a5b@wheregroup.com>

Hi Luis,

just type

*/help("modules")/*

into the python console.

Best regards

Stefan


Am 30.06.2021 um 23:50 schrieb Luiz Motta:
> Hi guys,
>
> I use a long times ago the Numpy in my plugins.
>
> But, for my surprise, recently i discover that is possible use the 
> PILLOW(PIL)?no need to install.
>
> I would like know how i find which the Python libraries are installed 
> by QGIS?
>
> Example, can i use "import scipy"?can i use "import scipy"?without 
> need install.
>
> Regards,
> Luiz
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Mit freundlichen Gr??en
Stefan Giese
Projektleiter/Consultant
************************************************************
Aufbau von Geodateninfrastrukturen mit Open-Source-Software
FOSS Academy 5 Tage-Kompaktkurs ?Sommerschule 2021?
Jetzt anmelden: https://foss-academy.com/kompaktkurse/
*************************************************************
WhereGroup GmbH
Schwimmbadstr. 2
79100 Freiburg
Germany

Fon: +49 (0)761 / 519 102 - 61
Fax: +49 (0)761 / 519 102 - 11

stefan.giese at wheregroup.com
www.wheregroup.com
Gesch?ftsf?hrer:
Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20210701/55fc038c/attachment.html>

